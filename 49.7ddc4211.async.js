var vw=Object.defineProperty,mw=Object.defineProperties;var gw=Object.getOwnPropertyDescriptors;var WE=Object.getOwnPropertySymbols;var yw=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable;var jd=Math.pow,XE=(vt,Ee,g)=>Ee in vt?vw(vt,Ee,{enumerable:!0,configurable:!0,writable:!0,value:g}):vt[Ee]=g,KE=(vt,Ee)=>{for(var g in Ee||(Ee={}))yw.call(Ee,g)&&XE(vt,g,Ee[g]);if(WE)for(var g of WE(Ee))_w.call(Ee,g)&&XE(vt,g,Ee[g]);return vt},YE=(vt,Ee)=>mw(vt,gw(Ee));(self.webpackChunkdistrict_data=self.webpackChunkdistrict_data||[]).push([[49],{81618:function(vt){"use strict";(function(Ee,g){vt.exports=g()})(this,function(){function Ee(L){var $=[];return L.AMapUI&&$.push(g(L.AMapUI)),L.Loca&&$.push(v(L.Loca)),Promise.all($)}function g(L){return new Promise(function($,U){var ke=[];if(L.plugins)for(var We=0;We<L.plugins.length;We+=1)c.AMapUI.plugins.indexOf(L.plugins[We])==-1&&ke.push(L.plugins[We]);if(K.AMapUI===M.failed)U("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(K.AMapUI===M.notload){K.AMapUI=M.loading,c.AMapUI.version=L.version||c.AMapUI.version,We=c.AMapUI.version;var me=document.body||document.head,Le=document.createElement("script");Le.type="text/javascript",Le.src="https://webapi.amap.com/ui/"+We+"/main.js",Le.onerror=function(Se){K.AMapUI=M.failed,U("\u8BF7\u6C42 AMapUI \u5931\u8D25")},Le.onload=function(){if(K.AMapUI=M.loaded,ke.length)window.AMapUI.loadUI(ke,function(){for(var Se=0,et=ke.length;Se<et;Se++){var at=ke[Se].split("/").slice(-1)[0];window.AMapUI[at]=arguments[Se]}for($();N.AMapUI.length;)N.AMapUI.splice(0,1)[0]()});else for($();N.AMapUI.length;)N.AMapUI.splice(0,1)[0]()},me.appendChild(Le)}else K.AMapUI===M.loaded?L.version&&L.version!==c.AMapUI.version?U("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):ke.length?window.AMapUI.loadUI(ke,function(){for(var Se=0,et=ke.length;Se<et;Se++){var at=ke[Se].split("/").slice(-1)[0];window.AMapUI[at]=arguments[Se]}$()}):$():L.version&&L.version!==c.AMapUI.version?U("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):N.AMapUI.push(function(Se){Se?U(Se):ke.length?window.AMapUI.loadUI(ke,function(){for(var et=0,at=ke.length;et<at;et++){var Lt=ke[et].split("/").slice(-1)[0];window.AMapUI[Lt]=arguments[et]}$()}):$()})})}function v(L){return new Promise(function($,U){if(K.Loca===M.failed)U("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(K.Loca===M.notload){K.Loca=M.loading,c.Loca.version=L.version||c.Loca.version;var ke=c.Loca.version,We=c.AMap.version.startsWith("2"),me=ke.startsWith("2");if(We&&!me||!We&&me)U("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{We=c.key,me=document.body||document.head;var Le=document.createElement("script");Le.type="text/javascript",Le.src="https://webapi.amap.com/loca?v="+ke+"&key="+We,Le.onerror=function(Se){K.Loca=M.failed,U("\u8BF7\u6C42 AMapUI \u5931\u8D25")},Le.onload=function(){for(K.Loca=M.loaded,$();N.Loca.length;)N.Loca.splice(0,1)[0]()},me.appendChild(Le)}}else K.Loca===M.loaded?L.version&&L.version!==c.Loca.version?U("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):$():L.version&&L.version!==c.Loca.version?U("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):N.Loca.push(function(Se){Se?U(Se):U()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var M;(function(L){L.notload="notload",L.loading="loading",L.loaded="loaded",L.failed="failed"})(M||(M={}));var c={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},K={AMap:M.notload,AMapUI:M.notload,Loca:M.notload},N={AMap:[],AMapUI:[],Loca:[]},Z=[],B=function(L){typeof L=="function"&&(K.AMap===M.loaded?L(window.AMap):Z.push(L))};return{load:function(L){return new Promise(function($,U){if(K.AMap==M.failed)U("");else if(K.AMap==M.notload){var ke=L.key,We=L.version,me=L.plugins;ke?(window.AMap&&location.host!=="lbs.amap.com"&&U("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),c.key=ke,c.AMap.version=We||c.AMap.version,c.AMap.plugins=me||c.AMap.plugins,K.AMap=M.loading,We=document.body||document.head,window.___onAPILoaded=function(Se){if(delete window.___onAPILoaded,Se)K.AMap=M.failed,U(Se);else for(K.AMap=M.loaded,Ee(L).then(function(){$(window.AMap)}).catch(U);Z.length;)Z.splice(0,1)[0]()},me=document.createElement("script"),me.type="text/javascript",me.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+c.AMap.version+"&key="+ke+"&plugin="+c.AMap.plugins.join(","),me.onerror=function(Se){K.AMap=M.failed,U(Se)},We.appendChild(me)):U("\u8BF7\u586B\u5199key")}else if(K.AMap==M.loaded)if(L.key&&L.key!==c.key)U("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(L.version&&L.version!==c.AMap.version)U("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(ke=[],L.plugins)for(We=0;We<L.plugins.length;We+=1)c.AMap.plugins.indexOf(L.plugins[We])==-1&&ke.push(L.plugins[We]);ke.length?window.AMap.plugin(ke,function(){Ee(L).then(function(){$(window.AMap)}).catch(U)}):Ee(L).then(function(){$(window.AMap)}).catch(U)}else if(L.key&&L.key!==c.key)U("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(L.version&&L.version!==c.AMap.version)U("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var Le=[];if(L.plugins)for(We=0;We<L.plugins.length;We+=1)c.AMap.plugins.indexOf(L.plugins[We])==-1&&Le.push(L.plugins[We]);B(function(){Le.length?window.AMap.plugin(Le,function(){Ee(L).then(function(){$(window.AMap)}).catch(U)}):Ee(L).then(function(){$(window.AMap)}).catch(U)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,c={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},K={AMap:M.notload,AMapUI:M.notload,Loca:M.notload},N={AMap:[],AMapUI:[],Loca:[]}}}})},16397:function(vt,Ee,g){"use strict";g.d(Ee,{R_:function(){return at}});var v=g(86500),M=g(1350),c=2,K=.16,N=.05,Z=.05,B=.15,L=5,$=4,U=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ke(Ne){var Pe=Ne.r,He=Ne.g,lt=Ne.b,ft=(0,v.py)(Pe,He,lt);return{h:ft.h*360,s:ft.s,v:ft.v}}function We(Ne){var Pe=Ne.r,He=Ne.g,lt=Ne.b;return"#".concat((0,v.vq)(Pe,He,lt,!1))}function me(Ne,Pe,He){var lt=He/100,ft={r:(Pe.r-Ne.r)*lt+Ne.r,g:(Pe.g-Ne.g)*lt+Ne.g,b:(Pe.b-Ne.b)*lt+Ne.b};return ft}function Le(Ne,Pe,He){var lt;return Math.round(Ne.h)>=60&&Math.round(Ne.h)<=240?lt=He?Math.round(Ne.h)-c*Pe:Math.round(Ne.h)+c*Pe:lt=He?Math.round(Ne.h)+c*Pe:Math.round(Ne.h)-c*Pe,lt<0?lt+=360:lt>=360&&(lt-=360),lt}function Se(Ne,Pe,He){if(Ne.h===0&&Ne.s===0)return Ne.s;var lt;return He?lt=Ne.s-K*Pe:Pe===$?lt=Ne.s+K:lt=Ne.s+N*Pe,lt>1&&(lt=1),He&&Pe===L&&lt>.1&&(lt=.1),lt<.06&&(lt=.06),Number(lt.toFixed(2))}function et(Ne,Pe,He){var lt;return He?lt=Ne.v+Z*Pe:lt=Ne.v-B*Pe,lt>1&&(lt=1),Number(lt.toFixed(2))}function at(Ne){for(var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He=[],lt=(0,M.uA)(Ne),ft=L;ft>0;ft-=1){var It=ke(lt),fe=We((0,M.uA)({h:Le(It,ft,!0),s:Se(It,ft,!0),v:et(It,ft,!0)}));He.push(fe)}He.push(We(lt));for(var _t=1;_t<=$;_t+=1){var Ye=ke(lt),Ot=We((0,M.uA)({h:Le(Ye,_t),s:Se(Ye,_t),v:et(Ye,_t)}));He.push(Ot)}return Pe.theme==="dark"?U.map(function(mt){var Rt=mt.index,pt=mt.opacity,Ge=We(me((0,M.uA)(Pe.backgroundColor||"#141414"),(0,M.uA)(He[Rt]),pt*100));return Ge}):He}var Lt={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Et={},jt={};Object.keys(Lt).forEach(function(Ne){Et[Ne]=at(Lt[Ne]),Et[Ne].primary=Et[Ne][5],jt[Ne]=at(Lt[Ne],{theme:"dark",backgroundColor:"#141414"}),jt[Ne].primary=jt[Ne][5]});var pe=Et.red,$e=Et.volcano,ye=Et.gold,ie=Et.orange,re=Et.yellow,De=Et.lime,le=Et.green,ge=Et.cyan,ce=Et.blue,je=Et.geekblue,J=Et.purple,Me=Et.magenta,ne=Et.grey,xe=Et.grey},51222:function(vt,Ee,g){"use strict";g.d(Ee,{E4:function(){return Bo},jG:function(){return sn},fp:function(){return pt},xy:function(){return kr}});var v=g(1413),M=g(74902),c=g(67294);function K(Pr){for(var Cn=0,ln,bn=0,Kn=Pr.length;Kn>=4;++bn,Kn-=4)ln=Pr.charCodeAt(bn)&255|(Pr.charCodeAt(++bn)&255)<<8|(Pr.charCodeAt(++bn)&255)<<16|(Pr.charCodeAt(++bn)&255)<<24,ln=(ln&65535)*1540483477+((ln>>>16)*59797<<16),ln^=ln>>>24,Cn=(ln&65535)*1540483477+((ln>>>16)*59797<<16)^(Cn&65535)*1540483477+((Cn>>>16)*59797<<16);switch(Kn){case 3:Cn^=(Pr.charCodeAt(bn+2)&255)<<16;case 2:Cn^=(Pr.charCodeAt(bn+1)&255)<<8;case 1:Cn^=Pr.charCodeAt(bn)&255,Cn=(Cn&65535)*1540483477+((Cn>>>16)*59797<<16)}return Cn^=Cn>>>13,Cn=(Cn&65535)*1540483477+((Cn>>>16)*59797<<16),((Cn^Cn>>>15)>>>0).toString(36)}var N=K,Z=g(56982),B=g(91881),L=g(15671),$=g(43144),U=g(4942),ke=function(){function Pr(){(0,L.Z)(this,Pr),(0,U.Z)(this,"cache",new Map)}return(0,$.Z)(Pr,[{key:"get",value:function(ln){return this.cache.get(ln.join("%"))||null}},{key:"update",value:function(ln,bn){var Kn=ln.join("%"),bi=this.cache.get(Kn),Yi=bn(bi);Yi===null?this.cache.delete(Kn):this.cache.set(Kn,Yi)}}]),Pr}(),We=ke,me=null,Le="data-token-hash",Se="data-css-hash",et="data-dev-cache-path",at="__cssinjs_instance__",Lt=Math.random().toString(12).slice(2);function Et(){if(typeof document!="undefined"&&document.head&&document.body){var Pr=document.body.querySelectorAll("style[".concat(Se,"]"))||[],Cn=document.head.firstChild;Array.from(Pr).forEach(function(bn){bn[at]=bn[at]||Lt,document.head.insertBefore(bn,Cn)});var ln={};Array.from(document.querySelectorAll("style[".concat(Se,"]"))).forEach(function(bn){var Kn=bn.getAttribute(Se);if(ln[Kn]){if(bn[at]===Lt){var bi;(bi=bn.parentNode)===null||bi===void 0||bi.removeChild(bn)}}else ln[Kn]=!0})}return new We}var jt=c.createContext({hashPriority:"low",cache:Et(),defaultCache:!0}),pe=function(Cn){var ln=Cn.children,bn=_objectWithoutProperties(Cn,me),Kn=React.useContext(jt),bi=useMemo(function(){var Yi=_objectSpread({},Kn);Object.keys(bn).forEach(function(aa){var Ta=bn[aa];bn[aa]!==void 0&&(Yi[aa]=Ta)});var Gi=bn.cache;return Yi.cache=Yi.cache||Et(),Yi.defaultCache=!Gi&&Kn.defaultCache,Yi},[Kn,bn],function(Yi,Gi){return!isEqual(Yi[0],Gi[0],!0)||!isEqual(Yi[1],Gi[1],!0)});return React.createElement(jt.Provider,{value:bi},ln)},$e=jt,ye=g(97685);function ie(){return!1}var re=!1;function De(){return re}var le=ie;if(!1)var ge,ce;function je(Pr,Cn,ln,bn){var Kn=c.useContext($e),bi=Kn.cache,Yi=[Pr].concat((0,M.Z)(Cn)),Gi=le();return c.useMemo(function(){bi.update(Yi,function(aa){var Ta=aa||[],R=(0,ye.Z)(Ta,2),_e=R[0],At=_e===void 0?0:_e,Ke=R[1],nr=Ke,wr=nr||ln();return[At+1,wr]})},[Yi.join("_")]),c.useEffect(function(){return function(){bi.update(Yi,function(aa){var Ta=aa||[],R=(0,ye.Z)(Ta,2),_e=R[0],At=_e===void 0?0:_e,Ke=R[1],nr=At-1;return nr===0?(bn==null||bn(Ke,!1),null):[At-1,Ke]})}},Yi),bi.get(Yi)[1]}var J=g(71002),Me=g(98924),ne=g(44958);function xe(Pr){var Cn="";return Object.keys(Pr).forEach(function(ln){var bn=Pr[ln];Cn+=ln,bn&&(0,J.Z)(bn)==="object"?Cn+=xe(bn):Cn+=bn}),Cn}function Ne(Pr,Cn){return N("".concat(Cn,"_").concat(xe(Pr)))}var Pe="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),He="903px";function lt(Pr,Cn){if((0,Me.Z)()){var ln;(0,ne.hq)(Pr,Pe);var bn=document.createElement("div");bn.style.position="fixed",bn.style.left="0",bn.style.top="0",Cn==null||Cn(bn),document.body.appendChild(bn);var Kn=getComputedStyle(bn).width===He;return(ln=bn.parentNode)===null||ln===void 0||ln.removeChild(bn),(0,ne.jL)(Pe),Kn}return!1}var ft=void 0;function It(){return ft===void 0&&(ft=lt("@layer ".concat(Pe," { .").concat(Pe," { width: ").concat(He,"!important; } }"),function(Pr){Pr.className=Pe})),ft}var fe={},_t="css",Ye=new Map;function Ot(Pr){Ye.set(Pr,(Ye.get(Pr)||0)+1)}function mt(Pr){if(typeof document!="undefined"){var Cn=document.querySelectorAll("style[".concat(Le,'="').concat(Pr,'"]'));Cn.forEach(function(ln){if(ln[at]===Lt){var bn;(bn=ln.parentNode)===null||bn===void 0||bn.removeChild(ln)}})}}function Rt(Pr){Ye.set(Pr,(Ye.get(Pr)||0)-1);var Cn=Array.from(Ye.keys()),ln=Cn.filter(function(bn){var Kn=Ye.get(bn)||0;return Kn<=0});ln.length<Cn.length&&ln.forEach(function(bn){mt(bn),Ye.delete(bn)})}function pt(Pr,Cn){var ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},bn=ln.salt,Kn=bn===void 0?"":bn,bi=ln.override,Yi=bi===void 0?fe:bi,Gi=ln.formatToken,aa=c.useMemo(function(){return Object.assign.apply(Object,[{}].concat((0,M.Z)(Cn)))},[Cn]),Ta=c.useMemo(function(){return xe(aa)},[aa]),R=c.useMemo(function(){return xe(Yi)},[Yi]),_e=je("token",[Kn,Pr.id,Ta,R],function(){var At=Pr.getDerivativeToken(aa),Ke=(0,v.Z)((0,v.Z)({},At),Yi);Gi&&(Ke=Gi(Ke));var nr=Ne(Ke,Kn);Ke._tokenKey=nr,Ot(nr);var wr="".concat(_t,"-").concat(N(nr));return Ke._hashId=wr,[Ke,wr]},function(At){Rt(At[0]._tokenKey)});return _e}var Ge=g(87462),wt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ee=wt,Re="-ms-",dt="-moz-",D="-webkit-",q="comm",G="rule",O="decl",k="@page",X="@media",W="@import",ae="@charset",Be="@viewport",ve="@supports",Je="@document",ot="@namespace",Qe="@keyframes",ir="@font-face",mr="@counter-style",Ar="@font-feature-values",Er=Math.abs,Zt=String.fromCharCode,Tr=Object.assign;function pn(Pr,Cn){return bt(Pr,0)^45?(((Cn<<2^bt(Pr,0))<<2^bt(Pr,1))<<2^bt(Pr,2))<<2^bt(Pr,3):0}function un(Pr){return Pr.trim()}function Zn(Pr,Cn){return(Pr=Cn.exec(Pr))?Pr[0]:Pr}function Cr(Pr,Cn,ln){return Pr.replace(Cn,ln)}function Nr(Pr,Cn){return Pr.indexOf(Cn)}function bt(Pr,Cn){return Pr.charCodeAt(Cn)|0}function jn(Pr,Cn,ln){return Pr.slice(Cn,ln)}function Pt(Pr){return Pr.length}function zt(Pr){return Pr.length}function Qt(Pr,Cn){return Cn.push(Pr),Pr}function dr(Pr,Cn){return Pr.map(Cn).join("")}function _r(Pr,Cn){for(var ln="",bn=zt(Pr),Kn=0;Kn<bn;Kn++)ln+=Cn(Pr[Kn],Kn,Pr,Cn)||"";return ln}function Hr(Pr,Cn,ln,bn){switch(Pr.type){case W:case O:return Pr.return=Pr.return||Pr.value;case q:return"";case Qe:return Pr.return=Pr.value+"{"+_r(Pr.children,bn)+"}";case G:Pr.value=Pr.props.join(",")}return Pt(ln=_r(Pr.children,bn))?Pr.return=Pr.value+"{"+ln+"}":""}var Qr=1,fr=1,tt=0,Yr=0,Tn=0,wn="";function Nn(Pr,Cn,ln,bn,Kn,bi,Yi){return{value:Pr,root:Cn,parent:ln,type:bn,props:Kn,children:bi,line:Qr,column:fr,length:Yi,return:""}}function Si(Pr,Cn){return assign(Nn("",null,null,"",null,null,0),Pr,{length:-Pr.length},Cn)}function fa(){return Tn}function Xi(){return Tn=Yr>0?bt(wn,--Yr):0,fr--,Tn===10&&(fr=1,Qr--),Tn}function Ln(){return Tn=Yr<tt?bt(wn,Yr++):0,fr++,Tn===10&&(fr=1,Qr++),Tn}function na(){return bt(wn,Yr)}function xi(){return Yr}function ta(Pr,Cn){return jn(wn,Pr,Cn)}function La(Pr){switch(Pr){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ki(Pr){return Qr=fr=1,tt=Pt(wn=Pr),Yr=0,[]}function jo(Pr){return wn="",Pr}function uo(Pr){return un(ta(Yr-1,va(Pr===91?Pr+2:Pr===40?Pr+1:Pr)))}function An(Pr){return jo(Oi(Ki(Pr)))}function gn(Pr){for(;(Tn=na())&&Tn<33;)Ln();return La(Pr)>2||La(Tn)>3?"":" "}function Oi(Pr){for(;Ln();)switch(La(Tn)){case 0:append(Ca(Yr-1),Pr);break;case 2:append(uo(Tn),Pr);break;default:append(from(Tn),Pr)}return Pr}function fi(Pr,Cn){for(;--Cn&&Ln()&&!(Tn<48||Tn>102||Tn>57&&Tn<65||Tn>70&&Tn<97););return ta(Pr,xi()+(Cn<6&&na()==32&&Ln()==32))}function va(Pr){for(;Ln();)switch(Tn){case Pr:return Yr;case 34:case 39:Pr!==34&&Pr!==39&&va(Tn);break;case 40:Pr===41&&va(Pr);break;case 92:Ln();break}return Yr}function wa(Pr,Cn){for(;Ln()&&Pr+Tn!==47+10;)if(Pr+Tn===42+42&&na()===47)break;return"/*"+ta(Cn,Yr-1)+"*"+Zt(Pr===47?Pr:Ln())}function Ca(Pr){for(;!La(na());)Ln();return ta(Pr,Yr)}function Aa(Pr){return jo(ma("",null,null,null,[""],Pr=Ki(Pr),0,[0],Pr))}function ma(Pr,Cn,ln,bn,Kn,bi,Yi,Gi,aa){for(var Ta=0,R=0,_e=Yi,At=0,Ke=0,nr=0,wr=1,Wr=1,In=1,Dn=0,Mi="",Bi=Kn,io=bi,co=bn,Sa=Mi;Wr;)switch(nr=Dn,Dn=Ln()){case 40:if(nr!=108&&bt(Sa,_e-1)==58){Nr(Sa+=Cr(uo(Dn),"&","&\f"),"&\f")!=-1&&(In=-1);break}case 34:case 39:case 91:Sa+=uo(Dn);break;case 9:case 10:case 13:case 32:Sa+=gn(nr);break;case 92:Sa+=fi(xi()-1,7);continue;case 47:switch(na()){case 42:case 47:Qt(Uo(wa(Ln(),xi()),Cn,ln),aa);break;default:Sa+="/"}break;case 123*wr:Gi[Ta++]=Pt(Sa)*In;case 125*wr:case 59:case 0:switch(Dn){case 0:case 125:Wr=0;case 59+R:Ke>0&&Pt(Sa)-_e&&Qt(Ke>32?ha(Sa+";",bn,ln,_e-1):ha(Cr(Sa," ","")+";",bn,ln,_e-2),aa);break;case 59:Sa+=";";default:if(Qt(co=ka(Sa,Cn,ln,Ta,R,Kn,Gi,Mi,Bi=[],io=[],_e),bi),Dn===123)if(R===0)ma(Sa,Cn,co,co,Bi,bi,_e,Gi,io);else switch(At===99&&bt(Sa,3)===110?100:At){case 100:case 109:case 115:ma(Pr,co,co,bn&&Qt(ka(Pr,co,co,0,0,Kn,Gi,Mi,Kn,Bi=[],_e),io),Kn,io,_e,Gi,bn?Bi:io);break;default:ma(Sa,co,co,co,[""],io,0,Gi,io)}}Ta=R=Ke=0,wr=In=1,Mi=Sa="",_e=Yi;break;case 58:_e=1+Pt(Sa),Ke=nr;default:if(wr<1){if(Dn==123)--wr;else if(Dn==125&&wr++==0&&Xi()==125)continue}switch(Sa+=Zt(Dn),Dn*wr){case 38:In=R>0?1:(Sa+="\f",-1);break;case 44:Gi[Ta++]=(Pt(Sa)-1)*In,In=1;break;case 64:na()===45&&(Sa+=uo(Ln())),At=na(),R=_e=Pt(Mi=Sa+=Ca(xi())),Dn++;break;case 45:nr===45&&Pt(Sa)==2&&(wr=0)}}return bi}function ka(Pr,Cn,ln,bn,Kn,bi,Yi,Gi,aa,Ta,R){for(var _e=Kn-1,At=Kn===0?bi:[""],Ke=zt(At),nr=0,wr=0,Wr=0;nr<bn;++nr)for(var In=0,Dn=jn(Pr,_e+1,_e=Er(wr=Yi[nr])),Mi=Pr;In<Ke;++In)(Mi=un(wr>0?At[In]+" "+Dn:Cr(Dn,/&\f/g,At[In])))&&(aa[Wr++]=Mi);return Nn(Pr,Cn,ln,Kn===0?G:Gi,aa,Ta,R)}function Uo(Pr,Cn,ln){return Nn(Pr,Cn,ln,q,Zt(fa()),jn(Pr,2,-2),0)}function ha(Pr,Cn,ln,bn){return Nn(Pr,Cn,ln,O,jn(Pr,0,bn),jn(Pr,bn+1,-1),bn)}var xa=g(80334);function eo(Pr,Cn){var ln=Cn.path,bn=Cn.parentSelectors;devWarning(!1,"[Ant Design CSS-in-JS] ".concat(ln?"Error in ".concat(ln,": "):"").concat(Pr).concat(bn.length?" Selector: ".concat(bn.join(" | ")):""))}var Te=function(Cn,ln,bn){if(Cn==="content"){var Kn=/(attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,bi=["normal","none","initial","inherit","unset"];(typeof ln!="string"||bi.indexOf(ln)===-1&&!Kn.test(ln)&&(ln.charAt(0)!==ln.charAt(ln.length-1)||ln.charAt(0)!=='"'&&ln.charAt(0)!=="'"))&&lintWarning("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\"".concat(ln,"\"'`."),bn)}},Po=null,Hs=function(Cn,ln,bn){Cn==="animation"&&bn.hashId&&ln!=="none"&&lintWarning("You seem to be using hashed animation '".concat(ln,"', in which case 'animationName' with Keyframe as value is recommended."),bn)},no=null;function Jo(Pr){var Cn,ln=((Cn=Pr.match(/:not\(([^)]*)\)/))===null||Cn===void 0?void 0:Cn[1])||"",bn=ln.split(/(\[[^[]*])|(?=[.#])/).filter(function(Kn){return Kn});return bn.length>1}function os(Pr){return Pr.parentSelectors.reduce(function(Cn,ln){return Cn?ln.includes("&")?ln.replace(/&/g,Cn):"".concat(Cn," ").concat(ln):ln},"")}var Go=function(Cn,ln,bn){var Kn=os(bn),bi=Kn.match(/:not\([^)]*\)/g)||[];bi.length>0&&bi.some(Jo)&&lintWarning("Concat ':not' selector not support in legacy browsers.",bn)},Wo=null,za=function(Cn,ln,bn){switch(Cn){case"marginLeft":case"marginRight":case"paddingLeft":case"paddingRight":case"left":case"right":case"borderLeft":case"borderLeftWidth":case"borderLeftStyle":case"borderLeftColor":case"borderRight":case"borderRightWidth":case"borderRightStyle":case"borderRightColor":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":lintWarning("You seem to be using non-logical property '".concat(Cn,"' which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),bn);return;case"margin":case"padding":case"borderWidth":case"borderStyle":if(typeof ln=="string"){var Kn=ln.split(" ").map(function(Gi){return Gi.trim()});Kn.length===4&&Kn[1]!==Kn[3]&&lintWarning("You seem to be using '".concat(Cn,"' property with different left ").concat(Cn," and right ").concat(Cn,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),bn)}return;case"clear":case"textAlign":(ln==="left"||ln==="right")&&lintWarning("You seem to be using non-logical value '".concat(ln,"' of ").concat(Cn,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),bn);return;case"borderRadius":if(typeof ln=="string"){var bi=ln.split("/").map(function(Gi){return Gi.trim()}),Yi=bi.reduce(function(Gi,aa){if(Gi)return Gi;var Ta=aa.split(" ").map(function(R){return R.trim()});return Ta.length>=2&&Ta[0]!==Ta[1]||Ta.length===3&&Ta[1]!==Ta[2]||Ta.length===4&&Ta[2]!==Ta[3]?!0:Gi},!1);Yi&&lintWarning("You seem to be using non-logical value '".concat(ln,"' of ").concat(Cn,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),bn)}return;default:}},Tu=null,ws=function(Cn,ln,bn){bn.parentSelectors.some(function(Kn){var bi=Kn.split(",");return bi.some(function(Yi){return Yi.split("&").length>2})})&&lintWarning("Should not use more than one `&` in a selector.",bn)},Zs=null,ts=(0,Me.Z)(),Vs="_skip_check_";function ou(Pr){var Cn=_r(Aa(Pr),Hr);return Cn.replace(/\{%%%\:[^;];}/g,";")}function ls(Pr){return(0,J.Z)(Pr)==="object"&&Pr&&Vs in Pr}function ki(Pr,Cn,ln){if(!Cn)return Pr;var bn=".".concat(Cn),Kn=ln==="low"?":where(".concat(bn,")"):bn,bi=Pr.split(",").map(function(Yi){var Gi,aa=Yi.trim().split(/\s+/),Ta=aa[0]||"",R=((Gi=Ta.match(/^\w+/))===null||Gi===void 0?void 0:Gi[0])||"";return Ta="".concat(R).concat(Kn).concat(Ta.slice(R.length)),[Ta].concat((0,M.Z)(aa.slice(1))).join(" ")});return bi.join(",")}var As=new Set,Rs=null,hr=function Pr(Cn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},Kn=bn.root,bi=bn.injectHash,Yi=bn.parentSelectors,Gi=ln.hashId,aa=ln.layer,Ta=ln.path,R=ln.hashPriority,_e=ln.transformers,At=_e===void 0?[]:_e,Ke=ln.linters,nr=Ke===void 0?[]:Ke,wr="",Wr={};function In(co){var Sa=co.getName(Gi);if(!Wr[Sa]){var Ko=Pr(co.style,ln,{root:!1,parentSelectors:Yi}),Co=(0,ye.Z)(Ko,1),Oo=Co[0];Wr[Sa]="@keyframes ".concat(co.getName(Gi)).concat(Oo)}}function Dn(co){var Sa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return co.forEach(function(Ko){Array.isArray(Ko)?Dn(Ko,Sa):Ko&&Sa.push(Ko)}),Sa}var Mi=Dn(Array.isArray(Cn)?Cn:[Cn]);if(Mi.forEach(function(co){var Sa=typeof co=="string"&&!Kn?{}:co;if(typeof Sa=="string")wr+="".concat(Sa,`
`);else if(Sa._keyframe)In(Sa);else{var Ko=At.reduce(function(Co,Oo){var Ho;return(Oo==null||(Ho=Oo.visit)===null||Ho===void 0?void 0:Ho.call(Oo,Co))||Co},Sa);Object.keys(Ko).forEach(function(Co){var Oo=Ko[Co];if((0,J.Z)(Oo)==="object"&&Oo&&(Co!=="animationName"||!Oo._keyframe)&&!ls(Oo)){var Ho=!1,Io=Co.trim(),Js=!1;(Kn||bi)&&Gi?Io.startsWith("@")?Ho=!0:Io=ki(Co,Gi,R):Kn&&!Gi&&(Io==="&"||Io==="")&&(Io="",Js=!0);var Il=Pr(Oo,ln,{root:Js,injectHash:Ho,parentSelectors:[].concat((0,M.Z)(Yi),[Io])}),Ao=(0,ye.Z)(Il,2),Va=Ao[0],gs=Ao[1];Wr=(0,v.Z)((0,v.Z)({},Wr),gs),wr+="".concat(Io).concat(Va)}else{var Ws,bs=(Ws=Oo==null?void 0:Oo.value)!==null&&Ws!==void 0?Ws:Oo,Ps=Co.replace(/[A-Z]/g,function(gl){return"-".concat(gl.toLowerCase())}),Xs=bs;!ee[Co]&&typeof Xs=="number"&&Xs!==0&&(Xs="".concat(Xs,"px")),Co==="animationName"&&Oo!==null&&Oo!==void 0&&Oo._keyframe&&(In(Oo),Xs=Oo.getName(Gi)),wr+="".concat(Ps,":").concat(Xs,";")}})}}),!Kn)wr="{".concat(wr,"}");else if(aa&&It()){var Bi=aa.split(","),io=Bi[Bi.length-1].trim();wr="@layer ".concat(io," {").concat(wr,"}"),Bi.length>1&&(wr="@layer ".concat(aa,"{%%%:%}").concat(wr))}return[wr,Wr]};function Lr(Pr,Cn){return N("".concat(Pr.join("%")).concat(Cn))}function or(){return null}function kr(Pr,Cn){var ln=Pr.token,bn=Pr.path,Kn=Pr.hashId,bi=Pr.layer,Yi=c.useContext($e),Gi=Yi.autoClear,aa=Yi.mock,Ta=Yi.defaultCache,R=Yi.hashPriority,_e=Yi.container,At=Yi.ssrInline,Ke=Yi.transformers,nr=Yi.linters,wr=ln._tokenKey,Wr=[wr].concat((0,M.Z)(bn)),In=ts,Dn=je("style",Wr,function(){var Sa=Cn(),Ko=hr(Sa,{hashId:Kn,hashPriority:R,layer:bi,path:bn.join("-"),transformers:Ke,linters:nr}),Co=(0,ye.Z)(Ko,2),Oo=Co[0],Ho=Co[1],Io=ou(Oo),Js=Lr(Wr,Io);if(In){var Il=(0,ne.hq)(Io,Js,{mark:Se,prepend:"queue",attachTo:_e});Il[at]=Lt,Il.setAttribute(Le,wr),Object.keys(Ho).forEach(function(Ao){As.has(Ao)||(As.add(Ao),(0,ne.hq)(ou(Ho[Ao]),"_effect-".concat(Ao),{mark:Se,prepend:"queue",attachTo:_e}))})}return[Io,wr,Js]},function(Sa,Ko){var Co=(0,ye.Z)(Sa,3),Oo=Co[2];(Ko||Gi)&&ts&&(0,ne.jL)(Oo,{mark:Se})}),Mi=(0,ye.Z)(Dn,3),Bi=Mi[0],io=Mi[1],co=Mi[2];return function(Sa){var Ko;if(!At||In||!Ta)Ko=c.createElement(or,null);else{var Co;Ko=c.createElement("style",(0,Ge.Z)({},(Co={},(0,U.Z)(Co,Le,io),(0,U.Z)(Co,Se,co),Co),{dangerouslySetInnerHTML:{__html:Bi}}))}return c.createElement(c.Fragment,null,Ko,Sa)}}function Hn(Pr){var Cn=Array.from(Pr.cache.keys()).filter(function(bn){return bn.startsWith("style%")}),ln="";return Cn.forEach(function(bn){var Kn=_slicedToArray(Pr.cache.get(bn)[1],3),bi=Kn[0],Yi=Kn[1],Gi=Kn[2];ln+="<style ".concat(ATTR_TOKEN,'="').concat(Yi,'" ').concat(ATTR_MARK,'="').concat(Gi,'">').concat(bi,"</style>")}),ln}var zr=function(){function Pr(Cn,ln){(0,L.Z)(this,Pr),(0,U.Z)(this,"name",void 0),(0,U.Z)(this,"style",void 0),(0,U.Z)(this,"_keyframe",!0),this.name=Cn,this.style=ln}return(0,$.Z)(Pr,[{key:"getName",value:function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ln?"".concat(ln,"-").concat(this.name):this.name}}]),Pr}(),Bo=zr;function Vr(Pr,Cn){if(Pr.length!==Cn.length)return!1;for(var ln=0;ln<Pr.length;ln++)if(Pr[ln]!==Cn[ln])return!1;return!0}var cr=function(){function Pr(){(0,L.Z)(this,Pr),(0,U.Z)(this,"cache",void 0),(0,U.Z)(this,"keys",void 0),(0,U.Z)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return(0,$.Z)(Pr,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(ln){var bn,Kn,bi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Yi={map:this.cache};return ln.forEach(function(Gi){if(!Yi)Yi=void 0;else{var aa,Ta;Yi=(aa=Yi)===null||aa===void 0||(Ta=aa.map)===null||Ta===void 0?void 0:Ta.get(Gi)}}),(bn=Yi)!==null&&bn!==void 0&&bn.value&&bi&&(Yi.value[1]=this.cacheCallTimes++),(Kn=Yi)===null||Kn===void 0?void 0:Kn.value}},{key:"get",value:function(ln){var bn;return(bn=this.internalGet(ln,!0))===null||bn===void 0?void 0:bn[0]}},{key:"has",value:function(ln){return!!this.internalGet(ln)}},{key:"set",value:function(ln,bn){var Kn=this;if(!this.has(ln)){if(this.size()+1>Pr.MAX_CACHE_SIZE+Pr.MAX_CACHE_OFFSET){var bi=this.keys.reduce(function(Ta,R){var _e=(0,ye.Z)(Ta,2),At=_e[1];return Kn.internalGet(R)[1]<At?[R,Kn.internalGet(R)[1]]:Ta},[this.keys[0],this.cacheCallTimes]),Yi=(0,ye.Z)(bi,1),Gi=Yi[0];this.delete(Gi)}this.keys.push(ln)}var aa=this.cache;ln.forEach(function(Ta,R){if(R===ln.length-1)aa.set(Ta,{value:[bn,Kn.cacheCallTimes++]});else{var _e=aa.get(Ta);_e?_e.map||(_e.map=new Map):aa.set(Ta,{map:new Map}),aa=aa.get(Ta).map}})}},{key:"deleteByPath",value:function(ln,bn){var Kn=ln.get(bn[0]);if(bn.length===1){var bi;return Kn.map?ln.set(bn[0],{map:Kn.map}):ln.delete(bn[0]),(bi=Kn.value)===null||bi===void 0?void 0:bi[0]}var Yi=this.deleteByPath(Kn.map,bn.slice(1));return(!Kn.map||Kn.map.size===0)&&!Kn.value&&ln.delete(bn[0]),Yi}},{key:"delete",value:function(ln){if(this.has(ln))return this.keys=this.keys.filter(function(bn){return!Vr(bn,ln)}),this.deleteByPath(this.cache,ln)}}]),Pr}();(0,U.Z)(cr,"MAX_CACHE_SIZE",20),(0,U.Z)(cr,"MAX_CACHE_OFFSET",5);var ht=0,ur=function(){function Pr(Cn){(0,L.Z)(this,Pr),(0,U.Z)(this,"derivatives",void 0),(0,U.Z)(this,"id",void 0),this.derivatives=Array.isArray(Cn)?Cn:[Cn],this.id=ht,Cn.length===0&&(0,xa.Kp)(Cn.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),ht+=1}return(0,$.Z)(Pr,[{key:"getDerivativeToken",value:function(ln){return this.derivatives.reduce(function(bn,Kn){return Kn(ln,bn)},void 0)}}]),Pr}(),er=new cr;function sn(Pr){var Cn=Array.isArray(Pr)?Pr:[Pr];return er.has(Cn)||er.set(Cn,new ur(Cn)),er.get(Cn)}function fn(Pr){if(typeof Pr=="number")return[Pr];var Cn=String(Pr).split(/\s+/),ln="",bn=0;return Cn.reduce(function(Kn,bi){return bi.includes("(")?(ln+=bi,bn+=bi.split("(").length-1):bi.includes(")")?(ln+=bi,bn-=bi.split(")").length-1,bn===0&&(Kn.push(ln),ln="")):bn>0?ln+=bi:Kn.push(bi),Kn},[])}function Vn(Pr){return Pr.notSplit=!0,Pr}var ni={inset:["top","right","bottom","left"],insetBlock:["top","bottom"],insetBlockStart:["top"],insetBlockEnd:["bottom"],insetInline:["left","right"],insetInlineStart:["left"],insetInlineEnd:["right"],marginBlock:["marginTop","marginBottom"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],marginInline:["marginLeft","marginRight"],marginInlineStart:["marginLeft"],marginInlineEnd:["marginRight"],paddingBlock:["paddingTop","paddingBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"],paddingInline:["paddingLeft","paddingRight"],paddingInlineStart:["paddingLeft"],paddingInlineEnd:["paddingRight"],borderBlock:Vn(["borderTop","borderBottom"]),borderBlockStart:Vn(["borderTop"]),borderBlockEnd:Vn(["borderBottom"]),borderInline:Vn(["borderLeft","borderRight"]),borderInlineStart:Vn(["borderLeft"]),borderInlineEnd:Vn(["borderRight"]),borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndWidth:["borderBottomWidth"],borderInlineWidth:["borderLeftWidth","borderRightWidth"],borderInlineStartWidth:["borderLeftWidth"],borderInlineEndWidth:["borderRightWidth"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderBlockStartStyle:["borderTopStyle"],borderBlockEndStyle:["borderBottomStyle"],borderInlineStyle:["borderLeftStyle","borderRightStyle"],borderInlineStartStyle:["borderLeftStyle"],borderInlineEndStyle:["borderRightStyle"],borderBlockColor:["borderTopColor","borderBottomColor"],borderBlockStartColor:["borderTopColor"],borderBlockEndColor:["borderBottomColor"],borderInlineColor:["borderLeftColor","borderRightColor"],borderInlineStartColor:["borderLeftColor"],borderInlineEndColor:["borderRightColor"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"]};function oi(Pr){return{_skip_check_:!0,value:Pr}}var Ei={visit:function(Cn){var ln={};return Object.keys(Cn).forEach(function(bn){var Kn=Cn[bn],bi=ni[bn];if(bi&&(typeof Kn=="number"||typeof Kn=="string")){var Yi=fn(Kn);bi.length&&bi.notSplit?bi.forEach(function(Gi){ln[Gi]=oi(Kn)}):bi.length===1?ln[bi[0]]=oi(Kn):bi.length===2?bi.forEach(function(Gi,aa){var Ta;ln[Gi]=oi((Ta=Yi[aa])!==null&&Ta!==void 0?Ta:Yi[0])}):bi.length===4?bi.forEach(function(Gi,aa){var Ta,R;ln[Gi]=oi((Ta=(R=Yi[aa])!==null&&R!==void 0?R:Yi[aa-2])!==null&&Ta!==void 0?Ta:Yi[0])}):ln[bn]=Kn}else ln[bn]=Kn}),ln}},qi=null},42135:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Me}});var v=g(1413),M=g(97685),c=g(4942),K=g(91),N=g(67294),Z=g(94184),B=g.n(Z),L=g(63017),$=g(71002),U=g(16397),ke=g(80334),We=g(44958);function me(ne,xe){(0,ke.ZP)(ne,"[@ant-design/icons] ".concat(xe))}function Le(ne){return(0,$.Z)(ne)==="object"&&typeof ne.name=="string"&&typeof ne.theme=="string"&&((0,$.Z)(ne.icon)==="object"||typeof ne.icon=="function")}function Se(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(ne).reduce(function(xe,Ne){var Pe=ne[Ne];switch(Ne){case"class":xe.className=Pe,delete xe.class;break;default:xe[Ne]=Pe}return xe},{})}function et(ne,xe,Ne){return Ne?N.createElement(ne.tag,(0,v.Z)((0,v.Z)({key:xe},Se(ne.attrs)),Ne),(ne.children||[]).map(function(Pe,He){return et(Pe,"".concat(xe,"-").concat(ne.tag,"-").concat(He))})):N.createElement(ne.tag,(0,v.Z)({key:xe},Se(ne.attrs)),(ne.children||[]).map(function(Pe,He){return et(Pe,"".concat(xe,"-").concat(ne.tag,"-").concat(He))}))}function at(ne){return(0,U.R_)(ne)[0]}function Lt(ne){return ne?Array.isArray(ne)?ne:[ne]:[]}var Et={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},jt=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,pe=function(){var xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jt,Ne=(0,N.useContext)(L.Z),Pe=Ne.csp,He=Ne.prefixCls,lt=xe;He&&(lt=lt.replace(/anticon/g,He)),(0,N.useEffect)(function(){(0,We.hq)(lt,"@ant-design-icons",{prepend:!0,csp:Pe})},[])},$e=["icon","className","onClick","style","primaryColor","secondaryColor"],ye={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function ie(ne){var xe=ne.primaryColor,Ne=ne.secondaryColor;ye.primaryColor=xe,ye.secondaryColor=Ne||at(xe),ye.calculated=!!Ne}function re(){return(0,v.Z)({},ye)}var De=function(xe){var Ne=xe.icon,Pe=xe.className,He=xe.onClick,lt=xe.style,ft=xe.primaryColor,It=xe.secondaryColor,fe=(0,K.Z)(xe,$e),_t=ye;if(ft&&(_t={primaryColor:ft,secondaryColor:It||at(ft)}),pe(),me(Le(Ne),"icon should be icon definiton, but got ".concat(Ne)),!Le(Ne))return null;var Ye=Ne;return Ye&&typeof Ye.icon=="function"&&(Ye=(0,v.Z)((0,v.Z)({},Ye),{},{icon:Ye.icon(_t.primaryColor,_t.secondaryColor)})),et(Ye.icon,"svg-".concat(Ye.name),(0,v.Z)({className:Pe,onClick:He,style:lt,"data-icon":Ye.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},fe))};De.displayName="IconReact",De.getTwoToneColors=re,De.setTwoToneColors=ie;var le=De;function ge(ne){var xe=Lt(ne),Ne=(0,M.Z)(xe,2),Pe=Ne[0],He=Ne[1];return le.setTwoToneColors({primaryColor:Pe,secondaryColor:He})}function ce(){var ne=le.getTwoToneColors();return ne.calculated?[ne.primaryColor,ne.secondaryColor]:ne.primaryColor}var je=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ge("#1890ff");var J=N.forwardRef(function(ne,xe){var Ne,Pe=ne.className,He=ne.icon,lt=ne.spin,ft=ne.rotate,It=ne.tabIndex,fe=ne.onClick,_t=ne.twoToneColor,Ye=(0,K.Z)(ne,je),Ot=N.useContext(L.Z),mt=Ot.prefixCls,Rt=mt===void 0?"anticon":mt,pt=Ot.rootClassName,Ge=B()(pt,Rt,(Ne={},(0,c.Z)(Ne,"".concat(Rt,"-").concat(He.name),!!He.name),(0,c.Z)(Ne,"".concat(Rt,"-spin"),!!lt||He.name==="loading"),Ne),Pe),wt=It;wt===void 0&&fe&&(wt=-1);var ee=ft?{msTransform:"rotate(".concat(ft,"deg)"),transform:"rotate(".concat(ft,"deg)")}:void 0,Re=Lt(_t),dt=(0,M.Z)(Re,2),D=dt[0],q=dt[1];return N.createElement("span",(0,v.Z)((0,v.Z)({role:"img","aria-label":He.name},Ye),{},{ref:xe,tabIndex:wt,onClick:fe,className:Ge}),N.createElement(le,{icon:He,primaryColor:D,secondaryColor:q,style:ee}))});J.displayName="AntdIcon",J.getTwoToneColor=ce,J.setTwoToneColor=ge;var Me=J},63017:function(vt,Ee,g){"use strict";var v=g(67294),M=(0,v.createContext)({});Ee.Z=M},86581:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="CloseCircleFilled";var B=M.forwardRef(Z)},12057:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="CloseOutlined";var B=M.forwardRef(Z)},58093:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="CopyOutlined";var B=M.forwardRef(Z)},55047:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="DownOutlined";var B=M.forwardRef(Z)},38244:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="DownloadOutlined";var B=M.forwardRef(Z)},16853:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="EllipsisOutlined";var B=M.forwardRef(Z)},84273:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="LoadingOutlined";var B=M.forwardRef(Z)},99290:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="PictureOutlined";var B=M.forwardRef(Z)},65793:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(1413),M=g(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},K=c,N=g(42135),Z=function($,U){return M.createElement(N.Z,(0,v.Z)((0,v.Z)({},$),{},{ref:U,icon:K}))};Z.displayName="RightOutlined";var B=M.forwardRef(Z)},40110:function(vt,Ee,g){"use strict";var v=g(1413),M=g(67294),c=g(45191),K=g(42135),N=function(B,L){return M.createElement(K.Z,(0,v.Z)((0,v.Z)({},B),{},{ref:L,icon:c.Z}))};N.displayName="SearchOutlined",Ee.Z=M.forwardRef(N)},46343:function(vt,Ee,g){"use strict";g.d(Ee,{S$:function(){return Ge},bf:function(){return wt},ni:function(){return lt},oI:function(){return Rt},sX:function(){return pt}});var v=g(34155);function M(ee,Re,dt,D){function q(G){return G instanceof dt?G:new dt(function(O){O(G)})}return new(dt||(dt=Promise))(function(G,O){function k(ae){try{W(D.next(ae))}catch(Be){O(Be)}}function X(ae){try{W(D.throw(ae))}catch(Be){O(Be)}}function W(ae){ae.done?G(ae.value):q(ae.value).then(k,X)}W((D=D.apply(ee,Re||[])).next())})}function c(ee,Re){var dt={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},D,q,G,O;return O={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function k(W){return function(ae){return X([W,ae])}}function X(W){if(D)throw new TypeError("Generator is already executing.");for(;dt;)try{if(D=1,q&&(G=W[0]&2?q.return:W[0]?q.throw||((G=q.return)&&G.call(q),0):q.next)&&!(G=G.call(q,W[1])).done)return G;switch(q=0,G&&(W=[W[0]&2,G.value]),W[0]){case 0:case 1:G=W;break;case 4:return dt.label++,{value:W[1],done:!1};case 5:dt.label++,q=W[1],W=[0];continue;case 7:W=dt.ops.pop(),dt.trys.pop();continue;default:if(G=dt.trys,!(G=G.length>0&&G[G.length-1])&&(W[0]===6||W[0]===2)){dt=0;continue}if(W[0]===3&&(!G||W[1]>G[0]&&W[1]<G[3])){dt.label=W[1];break}if(W[0]===6&&dt.label<G[1]){dt.label=G[1],G=W;break}if(G&&dt.label<G[2]){dt.label=G[2],dt.ops.push(W);break}G[2]&&dt.ops.pop(),dt.trys.pop();continue}W=Re.call(ee,dt)}catch(ae){W=[6,ae],q=0}finally{D=G=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}}function K(ee,Re){var dt=typeof Symbol=="function"&&ee[Symbol.iterator];if(!dt)return ee;var D=dt.call(ee),q,G=[],O;try{for(;(Re===void 0||Re-- >0)&&!(q=D.next()).done;)G.push(q.value)}catch(k){O={error:k}}finally{try{q&&!q.done&&(dt=D.return)&&dt.call(D)}finally{if(O)throw O.error}}return G}function N(ee,Re,dt){if(dt||arguments.length===2)for(var D=0,q=Re.length,G;D<q;D++)(G||!(D in Re))&&(G||(G=Array.prototype.slice.call(Re,0,D)),G[D]=Re[D]);return ee.concat(G||Array.prototype.slice.call(Re))}function Z(ee){return ee&&ee.__esModule&&Object.prototype.hasOwnProperty.call(ee,"default")?ee.default:ee}var B={exports:{}},L={exports:{}},$={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=dt;function dt(D){return D&&typeof D.length=="number"&&D.length>=0&&D.length%1===0}ee.exports=Re.default})($,$.exports);var U={},ke={exports:{}},We={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=function(dt){return function(){for(var D=[],q=arguments.length;q--;)D[q]=arguments[q];var G=D.pop();return dt.call(this,D,G)}},ee.exports=Re.default})(We,We.exports);var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.fallback=at,me.wrap=Lt;var Le=me.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,Se=me.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,et=me.hasNextTick=typeof v=="object"&&typeof v.nextTick=="function";function at(ee){setTimeout(ee,0)}function Lt(ee){return function(Re){for(var dt=[],D=arguments.length-1;D-- >0;)dt[D]=arguments[D+1];return ee(function(){return Re.apply(void 0,dt)})}}var Et;Le?Et=queueMicrotask:Se?Et=setImmediate:et?Et=v.nextTick:Et=at,me.default=Lt(Et),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=X;var dt=We.exports,D=k(dt),q=me,G=k(q),O=U;function k(Be){return Be&&Be.__esModule?Be:{default:Be}}function X(Be){return(0,O.isAsync)(Be)?function(){for(var ve=[],Je=arguments.length;Je--;)ve[Je]=arguments[Je];var ot=ve.pop(),Qe=Be.apply(this,ve);return W(Qe,ot)}:(0,D.default)(function(ve,Je){var ot;try{ot=Be.apply(this,ve)}catch(Qe){return Je(Qe)}if(ot&&typeof ot.then=="function")return W(ot,Je);Je(null,ot)})}function W(Be,ve){return Be.then(function(Je){ae(ve,null,Je)},function(Je){ae(ve,Je&&Je.message?Je:new Error(Je))})}function ae(Be,ve,Je){try{Be(ve,Je)}catch(ot){(0,G.default)(function(Qe){throw Qe},ot)}}ee.exports=Re.default}(ke,ke.exports),Object.defineProperty(U,"__esModule",{value:!0}),U.isAsyncIterable=U.isAsyncGenerator=U.isAsync=void 0;var jt=ke.exports,pe=$e(jt);function $e(ee){return ee&&ee.__esModule?ee:{default:ee}}function ye(ee){return ee[Symbol.toStringTag]==="AsyncFunction"}function ie(ee){return ee[Symbol.toStringTag]==="AsyncGenerator"}function re(ee){return typeof ee[Symbol.asyncIterator]=="function"}function De(ee){if(typeof ee!="function")throw new Error("expected a function");return ye(ee)?(0,pe.default)(ee):ee}U.default=De,U.isAsync=ye,U.isAsyncGenerator=ie,U.isAsyncIterable=re;var le={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=dt;function dt(D,q){if(q===void 0&&(q=D.length),!q)throw new Error("arity is undefined");function G(){for(var O=this,k=[],X=arguments.length;X--;)k[X]=arguments[X];return typeof k[q-1]=="function"?D.apply(this,k):new Promise(function(W,ae){k[q-1]=function(Be){for(var ve=[],Je=arguments.length-1;Je-- >0;)ve[Je]=arguments[Je+1];if(Be)return ae(Be);W(ve.length>1?ve:ve[0])},D.apply(O,k)})}return G}ee.exports=Re.default})(le,le.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt=$.exports,D=X(dt),q=U,G=X(q),O=le.exports,k=X(O);function X(W){return W&&W.__esModule?W:{default:W}}Re.default=(0,k.default)(function(W,ae,Be){var ve=(0,D.default)(ae)?[]:{};W(ae,function(Je,ot,Qe){(0,G.default)(Je)(function(ir){for(var mr,Ar=[],Er=arguments.length-1;Er-- >0;)Ar[Er]=arguments[Er+1];Ar.length<2&&(mr=Ar,Ar=mr[0]),ve[ot]=Ar,Qe(ir)})},function(Je){return Be(Je,ve)})},3),ee.exports=Re.default}(L,L.exports);var ge={exports:{}},ce={exports:{}},je={exports:{}},J={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=dt;function dt(D){function q(){for(var G=[],O=arguments.length;O--;)G[O]=arguments[O];if(D!==null){var k=D;D=null,k.apply(this,G)}}return Object.assign(q,D),q}ee.exports=Re.default})(J,J.exports);var Me={exports:{}},ne={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=function(dt){return dt[Symbol.iterator]&&dt[Symbol.iterator]()},ee.exports=Re.default})(ne,ne.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=ae;var dt=$.exports,D=O(dt),q=ne.exports,G=O(q);function O(Be){return Be&&Be.__esModule?Be:{default:Be}}function k(Be){var ve=-1,Je=Be.length;return function(){return++ve<Je?{value:Be[ve],key:ve}:null}}function X(Be){var ve=-1;return function(){var ot=Be.next();return ot.done?null:(ve++,{value:ot.value,key:ve})}}function W(Be){var ve=Be?Object.keys(Be):[],Je=-1,ot=ve.length;return function Qe(){var ir=ve[++Je];return ir==="__proto__"?Qe():Je<ot?{value:Be[ir],key:ir}:null}}function ae(Be){if((0,D.default)(Be))return k(Be);var ve=(0,G.default)(Be);return ve?X(ve):W(Be)}ee.exports=Re.default}(Me,Me.exports);var xe={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=dt;function dt(D){return function(){for(var q=[],G=arguments.length;G--;)q[G]=arguments[G];if(D===null)throw new Error("Callback was already called.");var O=D;D=null,O.apply(this,q)}}ee.exports=Re.default})(xe,xe.exports);var Ne={exports:{}},Pe={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt={};Re.default=dt,ee.exports=Re.default})(Pe,Pe.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=G;var dt=Pe.exports,D=q(dt);function q(O){return O&&O.__esModule?O:{default:O}}function G(O,k,X,W){var ae=!1,Be=!1,ve=!1,Je=0,ot=0;function Qe(){Je>=k||ve||ae||(ve=!0,O.next().then(function(Ar){var Er=Ar.value,Zt=Ar.done;if(!(Be||ae)){if(ve=!1,Zt){ae=!0,Je<=0&&W(null);return}Je++,X(Er,ot,ir),ot++,Qe()}}).catch(mr))}function ir(Ar,Er){if(Je-=1,!Be){if(Ar)return mr(Ar);if(Ar===!1){ae=!0,Be=!0;return}if(Er===D.default||ae&&Je<=0)return ae=!0,W(null);Qe()}}function mr(Ar){Be||(ve=!1,ae=!0,W(Ar))}Qe()}ee.exports=Re.default}(Ne,Ne.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt=J.exports,D=Je(dt),q=Me.exports,G=Je(q),O=xe.exports,k=Je(O),X=U,W=Ne.exports,ae=Je(W),Be=Pe.exports,ve=Je(Be);function Je(ot){return ot&&ot.__esModule?ot:{default:ot}}Re.default=function(ot){return function(Qe,ir,mr){if(mr=(0,D.default)(mr),ot<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Qe)return mr(null);if((0,X.isAsyncGenerator)(Qe))return(0,ae.default)(Qe,ot,ir,mr);if((0,X.isAsyncIterable)(Qe))return(0,ae.default)(Qe[Symbol.asyncIterator](),ot,ir,mr);var Ar=(0,G.default)(Qe),Er=!1,Zt=!1,Tr=0,pn=!1;function un(Cr,Nr){if(!Zt)if(Tr-=1,Cr)Er=!0,mr(Cr);else if(Cr===!1)Er=!0,Zt=!0;else{if(Nr===ve.default||Er&&Tr<=0)return Er=!0,mr(null);pn||Zn()}}function Zn(){for(pn=!0;Tr<ot&&!Er;){var Cr=Ar();if(Cr===null){Er=!0,Tr<=0&&mr(null);return}Tr+=1,ir(Cr.value,Cr.key,(0,k.default)(un))}pn=!1}Zn()}},ee.exports=Re.default}(je,je.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt=je.exports,D=X(dt),q=U,G=X(q),O=le.exports,k=X(O);function X(ae){return ae&&ae.__esModule?ae:{default:ae}}function W(ae,Be,ve,Je){return(0,D.default)(Be)(ae,(0,G.default)(ve),Je)}Re.default=(0,k.default)(W,4),ee.exports=Re.default}(ce,ce.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt=ce.exports,D=O(dt),q=le.exports,G=O(q);function O(X){return X&&X.__esModule?X:{default:X}}function k(X,W,ae){return(0,D.default)(X,1,W,ae)}Re.default=(0,G.default)(k,3),ee.exports=Re.default}(ge,ge.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=k;var dt=L.exports,D=O(dt),q=ge.exports,G=O(q);function O(X){return X&&X.__esModule?X:{default:X}}function k(X,W){return(0,D.default)(G.default,X,W)}ee.exports=Re.default}(B,B.exports);var He=Z(B.exports),lt=function(){function ee(){this.args=[],this.tasks=[]}return ee.prototype.call=function(){for(var Re=arguments,dt=[],D=0;D<arguments.length;D++)dt[D]=Re[D];return this.args=dt,He(this.tasks)},ee.prototype.tap=function(Re,dt){var D=this;this.tasks.push(function(q){dt.apply(void 0,N([],K(D.args),!1)),q(null,Re)})},ee}(),ft={exports:{}},It={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt=$.exports,D=ir(dt),q=Pe.exports,G=ir(q),O=ce.exports,k=ir(O),X=J.exports,W=ir(X),ae=xe.exports,Be=ir(ae),ve=U,Je=ir(ve),ot=le.exports,Qe=ir(ot);function ir(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}function mr(Zt,Tr,pn){pn=(0,W.default)(pn);var un=0,Zn=0,Cr=Zt.length,Nr=!1;Cr===0&&pn(null);function bt(jn,Pt){jn===!1&&(Nr=!0),Nr!==!0&&(jn?pn(jn):(++Zn===Cr||Pt===G.default)&&pn(null))}for(;un<Cr;un++)Tr(Zt[un],un,(0,Be.default)(bt))}function Ar(Zt,Tr,pn){return(0,k.default)(Zt,1/0,Tr,pn)}function Er(Zt,Tr,pn){var un=(0,D.default)(Zt)?mr:Ar;return un(Zt,(0,Je.default)(Tr),pn)}Re.default=(0,Qe.default)(Er,3),ee.exports=Re.default})(It,It.exports),function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=k;var dt=It.exports,D=O(dt),q=L.exports,G=O(q);function O(X){return X&&X.__esModule?X:{default:X}}function k(X,W){return(0,G.default)(D.default,X,W)}ee.exports=Re.default}(ft,ft.exports);var fe=Z(ft.exports),_t=function(){function ee(){this.tasks=[]}return ee.prototype.promise=function(){return fe(this.tasks)},ee.prototype.tapPromise=function(Re,dt){var D=this;this.tasks.push(function(q){return M(D,void 0,void 0,function(){return c(this,function(G){switch(G.label){case 0:return[4,dt()];case 1:return G.sent(),q(null,Re),[2]}})})})},ee}(),Ye={exports:{}};(function(ee,Re){Object.defineProperty(Re,"__esModule",{value:!0});var dt=J.exports,D=ae(dt),q=xe.exports,G=ae(q),O=U,k=ae(O),X=le.exports,W=ae(X);function ae(ve){return ve&&ve.__esModule?ve:{default:ve}}function Be(ve,Je){if(Je=(0,D.default)(Je),!Array.isArray(ve))return Je(new Error("First argument to waterfall must be an array of functions"));if(!ve.length)return Je();var ot=0;function Qe(mr){var Ar=(0,k.default)(ve[ot++]);Ar.apply(void 0,mr.concat([(0,G.default)(ir)]))}function ir(mr){for(var Ar=[],Er=arguments.length-1;Er-- >0;)Ar[Er]=arguments[Er+1];if(mr!==!1){if(mr||ot===ve.length)return Je.apply(void 0,[mr].concat(Ar));Qe(Ar)}}Qe([])}Re.default=(0,W.default)(Be),ee.exports=Re.default})(Ye,Ye.exports);var Ot=Z(Ye.exports),mt=function(){function ee(){this.tasks=[]}return ee.prototype.call=function(){return Ot(this.tasks)},ee.prototype.tap=function(Re,dt){this.tasks.length===0?this.tasks.push(function(D){var q=dt();D(q?null:!1,q)}):this.tasks.push(function(D,q){var G=dt.apply(void 0,N([],K(D),!1));q(G?null:!1,Re)})},ee}(),Rt=function(){function ee(){this.tasks=[]}return ee.prototype.call=function(){return He(this.tasks)},ee.prototype.tap=function(Re,dt){this.tasks.push(function(D){var q=dt();D(q,Re)})},ee}(),pt=function(){function ee(){this.args=[],this.tasks=[]}return ee.prototype.promise=function(){for(var Re=arguments,dt=[],D=0;D<arguments.length;D++)dt[D]=Re[D];return this.args=dt,He(this.tasks)},ee.prototype.tapPromise=function(Re,dt){var D=this;this.tasks.push(function(q){return M(D,void 0,void 0,function(){return c(this,function(G){switch(G.label){case 0:return[4,dt.apply(void 0,N([],K(this.args),!1))];case 1:return G.sent(),q(null,Re),[2]}})})})},ee}(),Ge=function(){function ee(){this.args=[],this.tasks=[]}return ee.prototype.promise=function(){for(var Re=arguments,dt=[],D=0;D<arguments.length;D++)dt[D]=Re[D];return this.args=dt,He(this.tasks)},ee.prototype.tapPromise=function(Re,dt){var D=this;this.tasks.push(function(q){return M(D,void 0,void 0,function(){var G;return c(this,function(O){switch(O.label){case 0:return[4,dt.apply(void 0,N([],K(this.args),!1))];case 1:return G=O.sent(),q(G,Re),[2]}})})})},ee}(),wt=function(){function ee(){this.tasks=[]}return ee.prototype.promise=function(){return Ot(this.tasks)},ee.prototype.tapPromise=function(Re,dt){this.tasks.length===0?this.tasks.push(function(D){dt().then(function(q){D(null,q)})}):this.tasks.push(function(D,q){dt(D).then(function(G){q(null,G)})})},ee}()},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(vt){try{let $=function(){N||(N=!0,c())},U=function(){try{K.documentElement.doScroll("left")}catch(ke){return void setTimeout(U,50)}$()};var B=$,L=U,g=(g=document.getElementsByTagName("script"))[g.length-1],Ee=g.getAttribute("data-injectcss"),g=g.getAttribute("data-disable-injectsvg");if(!g){var v,M,c,K,N,Z=function(We,me){me.parentNode.insertBefore(We,me)};if(Ee&&!vt.__iconfont__svg__cssinject__){vt.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(ke){console&&console.log(ke)}}v=function(){var We,me=document.createElement("div");me.innerHTML=vt._iconfont_svg_string_3580659,(me=me.getElementsByTagName("svg")[0])&&(me.setAttribute("aria-hidden","true"),me.style.position="absolute",me.style.width=0,me.style.height=0,me.style.overflow="hidden",me=me,(We=document.body).firstChild?Z(me,We.firstChild):We.appendChild(me))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(v,0):(M=function(){document.removeEventListener("DOMContentLoaded",M,!1),v()},document.addEventListener("DOMContentLoaded",M,!1)):document.attachEvent&&(c=v,K=vt.document,N=!1,U(),K.onreadystatechange=function(){K.readyState=="complete"&&(K.onreadystatechange=null,$())})}}catch($){}}(window)},54095:function(vt,Ee,g){"use strict";g.d(Ee,{GC:function(){return mh},mp:function(){return Yl},h0:function(){return Jc},lv:function(){return ku},lo:function(){return Ln},kw:function(){return na},Or:function(){return yu},KD:function(){return sh},sm:function(){return ka},I9:function(){return If},GR:function(){return Mf},d:function(){return ir},n3:function(){return vf},vY:function(){return vh},P7:function(){return Rf},ee:function(){return Nf},vK:function(){return Z},nC:function(){return Qo},e7:function(){return _s},Hp:function(){return Cs},gl:function(){return za},yT:function(){return Ns},yG:function(){return cs},wL:function(){return Ch}});var v=g(28660),M=g(26729),c=g.n(M),K=g(86700),N=g(84879),Z={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},B=g(1413),L=g(15671),$=g(43144),U=g(97326),ke=g(60136),We=g(82963),me=g(61120),Le=g(4942),Se=g(11265),et=g(31745),at=g.n(et);function Lt(ue,Rr){var Mt=typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(!Mt){if(Array.isArray(ue)||(Mt=Et(ue))||Rr&&ue&&typeof ue.length=="number"){Mt&&(ue=Mt);var St=0,Vt=function(){};return{s:Vt,n:function(){return St>=ue.length?{done:!0}:{done:!1,value:ue[St++]}},e:function(Fn){throw Fn},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar=!0,Xr=!1,vn;return{s:function(){Mt=Mt.call(ue)},n:function(){var Fn=Mt.next();return ar=Fn.done,Fn},e:function(Fn){Xr=!0,vn=Fn},f:function(){try{!ar&&Mt.return!=null&&Mt.return()}finally{if(Xr)throw vn}}}}function Et(ue,Rr){if(ue){if(typeof ue=="string")return jt(ue,Rr);var Mt=Object.prototype.toString.call(ue).slice(8,-1);if(Mt==="Object"&&ue.constructor&&(Mt=ue.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(ue);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return jt(ue,Rr)}}function jt(ue,Rr){(Rr==null||Rr>ue.length)&&(Rr=ue.length);for(var Mt=0,St=new Array(Rr);Mt<Rr;Mt++)St[Mt]=ue[Mt];return St}var pe=30;function $e(ue){var Rr=ue.characterSet,Mt=ue.getFontWidth,St=ue.fontHeight,Vt=ue.buffer,ar=ue.maxCanvasWidth,Xr=ue.mapping,vn=Xr===void 0?{}:Xr,Sn=ue.xOffset,Fn=Sn===void 0?0:Sn,Ci=ue.yOffset,Hi=Ci===void 0?0:Ci,ba=0,mo=Fn;Array.from(Rr).forEach(function(ks,Ts){if(!vn[ks]){var lu=Mt(ks,Ts);mo+pe>ar&&(mo=0,ba++),vn[ks]={x:mo,y:Hi+ba*pe,width:pe,height:pe,advance:lu},mo+=pe}});var Qa=St+Vt*2;return{mapping:vn,xOffset:mo,yOffset:Hi+ba*Qa,canvasHeight:re(Hi+(ba+1)*Qa)}}function ye(ue,Rr,Mt){var St=0,Vt=0,ar=0,Xr=[],vn={},Sn=Lt(ue),Fn;try{for(Sn.s();!(Fn=Sn.n()).done;){var Ci=Fn.value;if(!vn[Ci.id]){var Hi=Ci.size;St+Hi+Rr>Mt&&(ie(vn,Xr,Vt),St=0,Vt=ar+Vt+Rr,ar=0,Xr=[]),Xr.push({icon:Ci,xOffset:St}),St=St+Hi+Rr,ar=Math.max(ar,Hi)}}}catch(mo){Sn.e(mo)}finally{Sn.f()}Xr.length>0&&ie(vn,Xr,Vt);var ba=re(ar+Vt+Rr);return{mapping:vn,canvasHeight:ba}}function ie(ue,Rr,Mt){var St=Lt(Rr),Vt;try{for(St.s();!(Vt=St.n()).done;){var ar=Vt.value,Xr=ar.icon,vn=ar.xOffset;ue[Xr.id]=(0,B.Z)((0,B.Z)({},Xr),{},{x:vn,y:Mt,image:Xr.image,width:Xr.width,height:Xr.height})}}catch(Sn){St.e(Sn)}finally{St.f()}}function re(ue){return Math.pow(2,Math.ceil(Math.log2(ue)))}var De,le;function ge(ue,Rr){var Mt=typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(!Mt){if(Array.isArray(ue)||(Mt=ce(ue))||Rr&&ue&&typeof ue.length=="number"){Mt&&(ue=Mt);var St=0,Vt=function(){};return{s:Vt,n:function(){return St>=ue.length?{done:!0}:{done:!1,value:ue[St++]}},e:function(Fn){throw Fn},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar=!0,Xr=!1,vn;return{s:function(){Mt=Mt.call(ue)},n:function(){var Fn=Mt.next();return ar=Fn.done,Fn},e:function(Fn){Xr=!0,vn=Fn},f:function(){try{!ar&&Mt.return!=null&&Mt.return()}finally{if(Xr)throw vn}}}}function ce(ue,Rr){if(ue){if(typeof ue=="string")return je(ue,Rr);var Mt=Object.prototype.toString.call(ue).slice(8,-1);if(Mt==="Object"&&ue.constructor&&(Mt=ue.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(ue);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return je(ue,Rr)}}function je(ue,Rr){(Rr==null||Rr>ue.length)&&(Rr=ue.length);for(var Mt=0,St=new Array(Rr);Mt<Rr;Mt++)St[Mt]=ue[Mt];return St}function J(ue){var Rr=Me();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Me(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var ne=mt(),xe="sans-serif",Ne="normal",Pe=24,He=3,lt=.25,ft=8,It=1024,fe=1,_t=1,Ye=3,Ot=null;function mt(){for(var ue=[],Rr=32;Rr<128;Rr++)ue.push(String.fromCharCode(Rr));return ue}function Rt(ue,Rr,Mt,St){ue.font="".concat(St," ").concat(Mt,"px ").concat(Rr),ue.fillStyle="black",ue.textBaseline="middle"}function pt(ue,Rr){for(var Mt=0;Mt<ue.length;Mt++)Rr.data[4*Mt+3]=ue[Mt]}var Ge=(De=(0,K.b2)(),De(le=function(ue){(0,ke.Z)(Mt,ue);var Rr=J(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Le.Z)((0,U.Z)(St),"fontAtlas",void 0),(0,Le.Z)((0,U.Z)(St),"iconFontMap",void 0),(0,Le.Z)((0,U.Z)(St),"iconFontGlyphs",{}),(0,Le.Z)((0,U.Z)(St),"fontOptions",void 0),(0,Le.Z)((0,U.Z)(St),"key",void 0),(0,Le.Z)((0,U.Z)(St),"cache",new Se.z6(Ye)),St}return(0,$.Z)(Mt,[{key:"scale",get:function(){return _t}},{key:"canvas",get:function(){var Vt=this.cache.get(this.key);return Vt&&Vt.data}},{key:"mapping",get:function(){var Vt=this.cache.get(this.key);return Vt&&Vt.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:xe,fontWeight:Ne,characterSet:ne,fontSize:Pe,buffer:He,sdf:!0,cutoff:lt,radius:ft,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(Vt){var ar=this;Vt.forEach(function(Xr){ar.iconFontGlyphs[Xr.name]=Xr.unicode})}},{key:"addIconFont",value:function(Vt,ar){this.iconFontMap.set(Vt,ar)}},{key:"getIconFontKey",value:function(Vt){return this.iconFontMap.get(Vt)||Vt}},{key:"getGlyph",value:function(Vt){return this.iconFontGlyphs[Vt]?String.fromCharCode(parseInt(this.iconFontGlyphs[Vt],16)):""}},{key:"setFontOptions",value:function(Vt){this.fontOptions=(0,B.Z)((0,B.Z)({},this.fontOptions),Vt),this.key=this.getKey();var ar=this.getNewChars(this.key,this.fontOptions.characterSet),Xr=this.cache.get(this.key);if(!(Xr&&ar.length===0)){var vn=this.generateFontAtlas(this.key,ar,Xr);this.fontAtlas=vn,this.cache.set(this.key,vn)}}},{key:"addFontFace",value:function(Vt,ar){var Xr=this,vn=document.createElement("style");vn.type="text/css",vn.innerText=`
        @font-face{
            font-family: '`.concat(Vt,`';
            src: url('`).concat(ar,`') format('woff2'),
            url('`).concat(ar,`') format('woff'),
            url('`).concat(ar,`') format('truetype');
        }`),vn.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(Vt),"L7text"),document.fonts.ready.then(function(){Xr.emit("fontloaded",{fontFamily:Vt})})}catch(Sn){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(Sn)}},document.getElementsByTagName("head")[0].appendChild(vn)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(Vt,ar,Xr){var vn=this.fontOptions,Sn=vn.fontFamily,Fn=vn.fontWeight,Ci=vn.fontSize,Hi=vn.buffer,ba=vn.sdf,mo=vn.radius,Qa=vn.cutoff,ks=vn.iconfont,Ts=Xr&&Xr.data;Ts||(Ts=Se.vO.document.createElement("canvas"),Ts.width=It);var lu=Ts.getContext("2d",{willReadFrequently:!0});Rt(lu,Sn,Ci,Fn);var Iu=$e((0,B.Z)({getFontWidth:function(yh){return lu.measureText(yh).width},fontHeight:Ci*_t,buffer:Hi,characterSet:ar,maxCanvasWidth:It},Xr&&{mapping:Xr.mapping,xOffset:Xr.xOffset,yOffset:Xr.yOffset})),_u=Iu.mapping,Mc=Iu.canvasHeight,tu=Iu.xOffset,Fl=Iu.yOffset,Ys=lu.getImageData(0,0,Ts.width,Ts.height);if(Ts.height=Mc,lu.putImageData(Ys,0,0),Rt(lu,Sn,Ci,Fn),ba){var Du=new(at())(Ci,Hi,mo,Qa,Sn,Fn),Bu=lu.getImageData(0,0,Du.size,Du.size),Gl=ge(ar),ru;try{for(Gl.s();!(ru=Gl.n()).done;){var pl=ru.value;if(ks){var ef=String.fromCharCode(parseInt(pl.replace("&#x","").replace(";",""),16)),Bh=Du.draw(ef);pt(Bh,Bu)}else pt(Du.draw(pl),Bu);lu.putImageData(Bu,_u[pl].x,_u[pl].y)}}catch(gh){Gl.e(gh)}finally{Gl.f()}}else{var hc=ge(ar),uh;try{for(hc.s();!(uh=hc.n()).done;){var Kf=uh.value;lu.fillText(Kf,_u[Kf].x,_u[Kf].y+Ci*fe)}}catch(gh){hc.e(gh)}finally{hc.f()}}return{xOffset:tu,yOffset:Fl,mapping:_u,data:Ts,width:Ts.width,height:Ts.height}}},{key:"getKey",value:function(){var Vt=this.fontOptions,ar=Vt.fontFamily,Xr=Vt.fontWeight;return"".concat(ar,"_").concat(Xr)}},{key:"getNewChars",value:function(Vt,ar){var Xr=this.cache.get(Vt);if(!Xr)return ar;var vn=[],Sn=Xr.mapping,Fn=new Set(Object.keys(Sn)),Ci=new Set(ar);return Ci.forEach(function(Hi){Fn.has(Hi)||vn.push(Hi)}),vn}}]),Mt}(M.EventEmitter))||le),wt=g(15861),ee=g(64687),Re=g.n(ee),dt,D;function q(ue){var Rr=G();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function G(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var O=3,k=1024,X=64,W=(dt=(0,K.b2)(),dt(D=function(ue){(0,ke.Z)(Mt,ue);var Rr=q(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Le.Z)((0,U.Z)(St),"canvasHeight",128),(0,Le.Z)((0,U.Z)(St),"texture",void 0),(0,Le.Z)((0,U.Z)(St),"canvas",void 0),(0,Le.Z)((0,U.Z)(St),"iconData",void 0),(0,Le.Z)((0,U.Z)(St),"iconMap",void 0),(0,Le.Z)((0,U.Z)(St),"ctx",void 0),(0,Le.Z)((0,U.Z)(St),"loadingImageCount",0),St}return(0,$.Z)(Mt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=Se.vO.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var St=(0,wt.Z)(Re().mark(function ar(Xr,vn){var Sn,Fn;return Re().wrap(function(Hi){for(;;)switch(Hi.prev=Hi.next){case 0:return Sn=new Image,this.loadingImageCount++,this.hasImage(Xr)?console.warn("Image Id already exists"):this.iconData.push({id:Xr,size:X}),this.updateIconMap(),Hi.next=6,this.loadImage(vn);case 6:Sn=Hi.sent,Fn=this.iconData.find(function(ba){return ba.id===Xr}),Fn&&(Fn.image=Sn,Fn.width=Sn.width,Fn.height=Sn.height),this.update();case 10:case"end":return Hi.stop()}},ar,this)}));function Vt(ar,Xr){return St.apply(this,arguments)}return Vt}()},{key:"addImageMini",value:function(Vt,ar,Xr){var vn=this,Sn=Xr.getSceneConfig().canvas,Fn=Sn.createImage();if(this.loadingImageCount++,this.hasImage(Vt))throw new Error("Image Id already exists");this.iconData.push({id:Vt,size:X}),this.updateIconMap(),this.loadImageMini(ar,Sn).then(function(Ci){Fn=Ci;var Hi=vn.iconData.find(function(ba){return ba.id===Vt});Hi&&(Hi.image=Fn,Hi.width=Fn.width,Hi.height=Fn.height),vn.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(Vt){return this.iconMap.hasOwnProperty(Vt)}},{key:"removeImage",value:function(Vt){this.hasImage(Vt)&&(this.iconData=this.iconData.filter(function(ar){return ar.id!==Vt}),delete this.iconMap[Vt],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(Vt){return new Promise(function(ar,Xr){if(Vt instanceof HTMLImageElement){ar(Vt);return}var vn=new Image;vn.crossOrigin="anonymous",vn.onload=function(){ar(vn)},vn.onerror=function(){Xr(new Error("Could not load image at "+Vt))},vn.src=Vt instanceof File?URL.createObjectURL(Vt):Vt})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var Vt=this;this.canvas.width=k,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(ar){var Xr=Vt.iconMap[ar],vn=Xr.x,Sn=Xr.y,Fn=Xr.image,Ci=Xr.width,Hi=Ci===void 0?64:Ci,ba=Xr.height,mo=ba===void 0?64:ba,Qa=Math.max(Hi,mo),ks=Qa/X,Ts=mo/ks,lu=Hi/ks;Fn&&Vt.ctx.drawImage(Fn,vn+(X-lu)/2,Sn+(X-Ts)/2,lu,Ts)})}},{key:"updateIconMap",value:function(){var Vt=ye(this.iconData,O,k),ar=Vt.mapping,Xr=Vt.canvasHeight;this.iconMap=ar,this.canvasHeight=Xr}},{key:"loadImageMini",value:function(Vt,ar){return new Promise(function(Xr,vn){var Sn=ar.createImage();Sn.crossOrigin="anonymous",Sn.onload=function(){Xr(Sn)},Sn.onerror=function(){vn(new Error("Could not load image at "+Vt))},Sn.src=Vt})}}]),Mt}(M.EventEmitter))||D),ae=g(97685),Be=g(85975),ve,Je,ot=(ve=(0,K.b2)(),ve(Je=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"viewport",void 0),(0,Le.Z)(this,"overridedViewProjectionMatrix",void 0),(0,Le.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,Le.Z)(this,"jitteredProjectionMatrix",void 0),(0,Le.Z)(this,"viewMatrixInverse",void 0),(0,Le.Z)(this,"cameraPosition",void 0)}return(0,$.Z)(ue,[{key:"init",value:function(){}},{key:"update",value:function(Mt){this.viewport=Mt,this.viewMatrixInverse=Be.create(),Be.invert(this.viewMatrixInverse,Mt.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Mt=this.viewport.getCenter(),St=(0,ae.Z)(Mt,2),Vt=St[0],ar=St[1];return[Vt,ar]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Mt,St){return this.viewport.projectFlat(Mt,St)}},{key:"setViewProjectionMatrix",value:function(Mt){this.overridedViewProjectionMatrix=Mt}},{key:"jitterProjectionMatrix",value:function(Mt,St){var Vt=Be.fromTranslation(Be.create(),[Mt,St,0]);this.jitteredProjectionMatrix=Be.multiply(Be.create(),Vt,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Be.multiply(Be.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),ue}())||Je),Qe=g(74902),ir;(function(ue){ue.TOPRIGHT="topright",ue.TOPLEFT="topleft",ue.BOTTOMRIGHT="bottomright",ue.BOTTOMLEFT="bottomleft",ue.TOPCENTER="topcenter",ue.BOTTOMCENTER="bottomcenter",ue.LEFTCENTER="leftcenter",ue.RIGHTCENTER="rightcenter",ue.LEFTTOP="lefttop",ue.RIGHTTOP="righttop",ue.LEFTBOTTOM="leftbottom",ue.RIGHTBOTTOM="rightbottom"})(ir||(ir={}));var mr,Ar;function Er(ue,Rr){var Mt=typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(!Mt){if(Array.isArray(ue)||(Mt=Zt(ue))||Rr&&ue&&typeof ue.length=="number"){Mt&&(ue=Mt);var St=0,Vt=function(){};return{s:Vt,n:function(){return St>=ue.length?{done:!0}:{done:!1,value:ue[St++]}},e:function(Fn){throw Fn},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar=!0,Xr=!1,vn;return{s:function(){Mt=Mt.call(ue)},n:function(){var Fn=Mt.next();return ar=Fn.done,Fn},e:function(Fn){Xr=!0,vn=Fn},f:function(){try{!ar&&Mt.return!=null&&Mt.return()}finally{if(Xr)throw vn}}}}function Zt(ue,Rr){if(ue){if(typeof ue=="string")return Tr(ue,Rr);var Mt=Object.prototype.toString.call(ue).slice(8,-1);if(Mt==="Object"&&ue.constructor&&(Mt=ue.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(ue);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return Tr(ue,Rr)}}function Tr(ue,Rr){(Rr==null||Rr>ue.length)&&(Rr=ue.length);for(var Mt=0,St=new Array(Rr);Mt<Rr;Mt++)St[Mt]=ue[Mt];return St}var pn={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},un=(mr=(0,K.b2)(),mr(Ar=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"container",void 0),(0,Le.Z)(this,"controlCorners",void 0),(0,Le.Z)(this,"controlContainer",void 0),(0,Le.Z)(this,"scene",void 0),(0,Le.Z)(this,"mapsService",void 0),(0,Le.Z)(this,"controls",[]),(0,Le.Z)(this,"unAddControls",[])}return(0,$.Z)(ue,[{key:"init",value:function(Mt,St){this.container=Mt.container,this.scene=St,this.mapsService=St.get(Z.IMapService),this.initControlPos()}},{key:"addControl",value:function(Mt,St){var Vt=St.get(Z.IMapService);Vt.map?(Mt.addTo(this.scene),this.controls.push(Mt)):this.unAddControls.push(Mt)}},{key:"getControlByName",value:function(Mt){return this.controls.find(function(St){return St.controlOption.name===Mt})}},{key:"removeControl",value:function(Mt){var St=this.controls.indexOf(Mt);return St>-1&&this.controls.splice(St,1),Mt.remove(),this}},{key:"addControls",value:function(){var Mt=this;this.unAddControls.forEach(function(St){St.addTo(Mt.scene),Mt.controls.push(St)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Mt=Er(this.controls),St;try{for(Mt.s();!(St=Mt.n()).done;){var Vt=St.value;Vt.remove()}}catch(ar){Mt.e(ar)}finally{Mt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Mt=this.controlCorners={},St="l7-",Vt=this.controlContainer=Se.SO.create("div",St+"control-container",this.container);function ar(){var vn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Sn=vn.map(function(Fn){return St+Fn}).join(" ");Mt[vn.filter(function(Fn){return!["row","column"].includes(Fn)}).join("")]=Se.SO.create("div",Sn,Vt)}function Xr(vn){var Sn=vn.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,Qe.Z)(Sn),[pn[vn]])}Object.values(ir).forEach(function(vn){ar(Xr(vn))})}},{key:"clearControlPos",value:function(){for(var Mt in this.controlCorners)this.controlCorners[Mt]&&Se.SO.remove(this.controlCorners[Mt]);this.controlContainer&&Se.SO.remove(this.controlContainer)}}]),ue}())||Ar),Zn,Cr,Nr=(Zn=(0,K.b2)(),Zn(Cr=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"container",void 0),(0,Le.Z)(this,"scene",void 0),(0,Le.Z)(this,"mapsService",void 0),(0,Le.Z)(this,"markers",[]),(0,Le.Z)(this,"markerLayers",[]),(0,Le.Z)(this,"unAddMarkers",[]),(0,Le.Z)(this,"unAddMarkerLayers",[])}return(0,$.Z)(ue,[{key:"addMarkerLayer",value:function(Mt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Mt),Mt.addTo(this.scene)):this.unAddMarkerLayers.push(Mt)}},{key:"removeMarkerLayer",value:function(Mt){Mt.destroy(),this.markerLayers.indexOf(Mt);var St=this.markerLayers.indexOf(Mt);St>-1&&this.markerLayers.splice(St,1)}},{key:"addMarker",value:function(Mt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Mt),Mt.addTo(this.scene)):this.unAddMarkers.push(Mt)}},{key:"addMarkers",value:function(){var Mt=this;this.unAddMarkers.forEach(function(St){St.addTo(Mt.scene),Mt.markers.push(St)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Mt=this;this.unAddMarkerLayers.forEach(function(St){Mt.markerLayers.push(St),St.addTo(Mt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Mt){Mt.remove(),this.markers.indexOf(Mt);var St=this.markers.indexOf(Mt);St>-1&&this.markers.splice(St,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Mt){this.scene=Mt,this.mapsService=Mt.get(Z.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(Mt){Mt.remove()}),this.markers=[],this.markerLayers.forEach(function(Mt){Mt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Mt){Mt.destroy()}}]),ue}())||Cr),bt,jn,Pt=(bt=(0,K.b2)(),bt(jn=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"scene",void 0),(0,Le.Z)(this,"mapsService",void 0),(0,Le.Z)(this,"popups",[]),(0,Le.Z)(this,"unAddPopups",[])}return(0,$.Z)(ue,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(Mt){Mt!=null&&Mt.isOpen()&&Mt.remove();var St=this.popups.indexOf(Mt);St>-1&&this.popups.splice(St,1);var Vt=this.unAddPopups.indexOf(Mt);Vt>-1&&this.unAddPopups.splice(Vt,1)}},{key:"destroy",value:function(){this.popups.forEach(function(Mt){return Mt.remove()})}},{key:"addPopup",value:function(Mt){var St=this;Mt&&Mt.getOptions().autoClose&&[].concat((0,Qe.Z)(this.popups),(0,Qe.Z)(this.unAddPopups)).forEach(function(Vt){Vt.getOptions().autoClose&&St.removePopup(Vt)}),this.isMarkerReady?(Mt.addTo(this.scene),this.popups.push(Mt)):this.unAddPopups.push(Mt),Mt.on("close",function(){St.removePopup(Mt)})}},{key:"initPopup",value:function(){var Mt=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(St){Mt.addPopup(St),Mt.unAddPopups=[]})}},{key:"init",value:function(Mt){this.scene=Mt,this.mapsService=Mt.get(Z.IMapService)}}]),ue}())||jn),zt=g(96486),Qt={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},dr=Qt,_r,Hr,Qr={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,isMini:!1,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},fr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},tt=(_r=(0,K.b2)(),_r(Hr=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"sceneConfigCache",{}),(0,Le.Z)(this,"layerConfigCache",{}),(0,Le.Z)(this,"layerAttributeConfigCache",{})}return(0,$.Z)(ue,[{key:"getSceneConfig",value:function(Mt){return this.sceneConfigCache[Mt]}},{key:"getSceneWarninfo",value:function(Mt){return dr[Mt]}},{key:"setSceneConfig",value:function(Mt,St){this.sceneConfigCache[Mt]=(0,B.Z)((0,B.Z)({},Qr),St)}},{key:"getLayerConfig",value:function(Mt){return this.layerConfigCache[Mt]}},{key:"setLayerConfig",value:function(Mt,St,Vt){this.layerConfigCache[St]=(0,B.Z)({},(0,zt.merge)({},this.sceneConfigCache[Mt],fr,Vt))}},{key:"getAttributeConfig",value:function(Mt){return this.layerAttributeConfigCache[Mt]}},{key:"setAttributeConfig",value:function(Mt,St){this.layerAttributeConfigCache[Mt]=(0,B.Z)((0,B.Z)({},this.layerAttributeConfigCache[Mt]),St)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),ue}())||Hr),Yr=g(43269),Tn=g(53229),wn=g(98333),Nn=Math.PI/180,Si=512,fa=4003e4;function Xi(ue){var Rr=ue.latitude,Mt=Rr===void 0?0:Rr,St=ue.zoom,Vt=St===void 0?0:St,ar=ue.scale,Xr=ue.highPrecision,vn=Xr===void 0?!1:Xr,Sn=ue.flipY,Fn=Sn===void 0?!1:Sn;ar=ar!==void 0?ar:Math.pow(2,Vt);var Ci={},Hi=Si*ar,ba=Math.cos(Mt*Nn),mo=Hi/360,Qa=mo/ba,ks=Hi/fa/ba;if(Ci.pixelsPerMeter=[ks,-ks,ks],Ci.metersPerPixel=[1/ks,-1/ks,1/ks],Ci.pixelsPerDegree=[mo,-Qa,ks],Ci.degreesPerPixel=[1/mo,-1/Qa,1/ks],vn){var Ts=Nn*Math.tan(Mt*Nn)/ba,lu=mo*Ts/2,Iu=Hi/fa*Ts,_u=Iu/Qa*ks;Ci.pixelsPerDegree2=[0,-lu,Iu],Ci.pixelsPerMeter2=[_u,0,_u],Fn&&(Ci.pixelsPerDegree2[1]=-Ci.pixelsPerDegree2[1],Ci.pixelsPerMeter2[1]=-Ci.pixelsPerMeter2[1])}return Fn&&(Ci.pixelsPerMeter[1]=-Ci.pixelsPerMeter[1],Ci.metersPerPixel[1]=-Ci.metersPerPixel[1],Ci.pixelsPerDegree[1]=-Ci.pixelsPerDegree[1],Ci.degreesPerPixel[1]=-Ci.degreesPerPixel[1]),Ci}var Ln;(function(ue){ue[ue.LNGLAT=1]="LNGLAT",ue[ue.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",ue[ue.VECTOR_TILE=3]="VECTOR_TILE",ue[ue.IDENTITY=4]="IDENTITY",ue[ue.P20=5]="P20",ue[ue.P20_OFFSET=6]="P20_OFFSET",ue[ue.METER_OFFSET=7]="METER_OFFSET",ue[ue.P20_2=8]="P20_2"})(Ln||(Ln={}));var na={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},xi,ta,La,Ki,jo,uo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],An=(xi=(0,K.b2)(),ta=(0,K.f3)(Z.ICameraService),xi(La=(Ki=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"needRefresh",!0),(0,Yr.Z)(this,"cameraService",jo,this),(0,Le.Z)(this,"coordinateSystem",void 0),(0,Le.Z)(this,"viewportCenter",void 0),(0,Le.Z)(this,"viewportCenterProjection",void 0),(0,Le.Z)(this,"pixelsPerDegree",void 0),(0,Le.Z)(this,"pixelsPerDegree2",void 0),(0,Le.Z)(this,"pixelsPerMeter",void 0)}return(0,$.Z)(ue,[{key:"refresh",value:function(Mt){var St=this.cameraService.getZoom(),Vt=this.cameraService.getZoomScale(),ar=Mt||this.cameraService.getCenter(),Xr=Xi({latitude:ar[1],zoom:St}),vn=Xr.pixelsPerMeter,Sn=Xr.pixelsPerDegree;this.viewportCenter=ar,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=vn,this.pixelsPerDegree=Sn,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ln.LNGLAT||this.coordinateSystem===Ln.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ln.LNGLAT_OFFSET?this.calculateLnglatOffset(ar,St):this.coordinateSystem===Ln.P20_OFFSET&&this.calculateLnglatOffset(ar,St,Vt,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Mt){this.coordinateSystem=Mt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Mt,St,Vt,ar){var Xr=Xi({latitude:Mt[1],zoom:St,scale:Vt,flipY:ar,highPrecision:!0}),vn=Xr.pixelsPerMeter,Sn=Xr.pixelsPerDegree,Fn=Xr.pixelsPerDegree2,Ci=this.cameraService.getViewMatrix(),Hi=this.cameraService.getProjectionMatrix(),ba=Be.multiply([],Hi,Ci),mo=this.cameraService.projectFlat([Math.fround(Mt[0]),Math.fround(Mt[1])],Math.pow(2,St));this.viewportCenterProjection=wn.fF([],[mo[0],mo[1],0,1],ba),Ci=this.cameraService.getViewMatrixUncentered()||Ci,ba=Be.multiply([],Hi,Ci),ba=Be.multiply([],ba,uo),this.cameraService.setViewProjectionMatrix(ba),this.pixelsPerMeter=vn,this.pixelsPerDegree=Sn,this.pixelsPerDegree2=Fn}}]),ue}(),jo=(0,Tn.Z)(Ki.prototype,"cameraService",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ki))||La),gn=g(71002),Oi,fi;function va(ue){var Rr=wa();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function wa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Ca=(Oi=(0,K.b2)(),Oi(fi=function(ue){(0,ke.Z)(Mt,ue);var Rr=va(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Le.Z)((0,U.Z)(St),"renderMap",new Map),(0,Le.Z)((0,U.Z)(St),"enable",!1),(0,Le.Z)((0,U.Z)(St),"renderEnable",!1),(0,Le.Z)((0,U.Z)(St),"cacheLogs",{}),St}return(0,$.Z)(Mt,[{key:"setEnable",value:function(Vt){this.enable=!!Vt}},{key:"log",value:function(Vt,ar){var Xr=this;if(this.enable){var vn=Vt.split("."),Sn=null;vn.forEach(function(Fn,Ci){Sn!==null?(Sn[Fn]||(Sn[Fn]={}),Ci!==vn.length-1&&(Sn=Sn[Fn])):(Xr.cacheLogs[Fn]||(Xr.cacheLogs[Fn]={}),Ci!==vn.length-1&&(Sn=Xr.cacheLogs[Fn])),Ci===vn.length-1&&(Sn[Fn]=(0,B.Z)((0,B.Z)({time:Date.now()},Sn[Fn]),ar))})}}},{key:"getLog",value:function(Vt){var ar=this;switch((0,gn.Z)(Vt)){case"string":return this.cacheLogs[Vt];case"object":return Vt.map(function(Xr){return ar.cacheLogs[Xr]}).filter(function(Xr){return Xr!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(Vt){delete this.cacheLogs[Vt]}},{key:"generateRenderUid",value:function(){return this.renderEnable?(0,Se.M8)():""}},{key:"renderDebug",value:function(Vt){this.renderEnable=Vt}},{key:"renderStart",value:function(Vt){if(!(!this.renderEnable||!this.enable)){var ar=this.renderMap.get(Vt)||{};this.renderMap.set(Vt,(0,B.Z)((0,B.Z)({},ar),{},{renderUid:Vt,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(Vt){if(!(!this.renderEnable||!this.enable)){var ar=this.renderMap.get(Vt);if(ar){var Xr=ar.renderStart,vn=Date.now();this.emit("renderEnd",(0,B.Z)((0,B.Z)({},ar),{},{renderEnd:vn,renderDuration:vn-Xr})),this.renderMap.delete(Vt)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),Mt}(M.EventEmitter))||fi),Aa=g(20396),ma=g.n(Aa),ka;(function(ue){ue.Hover="hover",ue.Click="click",ue.Select="select",ue.Active="active",ue.Drag="drag"})(ka||(ka={}));var Uo,ha,xa,eo,Te;function Po(ue){var Rr=Hs();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Hs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var no={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Jo=(Uo=(0,K.b2)(),ha=(0,K.f3)(Z.IMapService),Uo(xa=(eo=function(ue){(0,ke.Z)(Mt,ue);var Rr=Po(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Le.Z)((0,U.Z)(St),"indragging",!1),(0,Yr.Z)((0,U.Z)(St),"mapService",Te,(0,U.Z)(St)),(0,Le.Z)((0,U.Z)(St),"hammertime",void 0),(0,Le.Z)((0,U.Z)(St),"lastClickTime",0),(0,Le.Z)((0,U.Z)(St),"lastClickXY",[-1,-1]),(0,Le.Z)((0,U.Z)(St),"clickTimer",void 0),(0,Le.Z)((0,U.Z)(St),"$containter",void 0),(0,Le.Z)((0,U.Z)(St),"onDrag",function(vn){var Sn=St.interactionEvent(vn);Sn.type=no[Sn.type],Sn.type==="dragging"?St.indragging=!0:St.indragging=!1,St.emit(ka.Drag,Sn)}),(0,Le.Z)((0,U.Z)(St),"onHammer",function(vn){vn.srcEvent.stopPropagation();var Sn=St.interactionEvent(vn);St.emit(ka.Hover,Sn)}),(0,Le.Z)((0,U.Z)(St),"onTouch",function(vn){var Sn=vn.touches[0];St.onHover({x:Sn.pageX,y:Sn.pageY,type:"touch"})}),(0,Le.Z)((0,U.Z)(St),"onHover",function(vn){var Sn=vn.clientX,Fn=vn.clientY,Ci=Sn,Hi=Fn,ba=vn.type,mo=St.mapService.getMapContainer();if(mo)if(Se.eW)Ci=Ci-mo.left-0,Hi=Hi-mo.top-0;else{var Qa=mo.getBoundingClientRect(),ks=Qa.top,Ts=Qa.left;Ci=Ci-Ts-mo.clientLeft,Hi=Hi-ks-mo.clientTop}var lu=St.mapService.containerToLngLat([Ci,Hi]);if(ba==="click"){if(!Se.eW&&"ontouchstart"in document.documentElement)return;St.isDoubleTap(Ci,Hi,lu);return}if(ba==="touch"){St.isDoubleTap(Ci,Hi,lu);return}ba!=="click"&&ba!=="dblclick"&&St.emit(ka.Hover,{x:Ci,y:Hi,lngLat:lu,type:ba,target:vn})}),St}return(0,$.Z)(Mt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(ka.Hover)}},{key:"triggerHover",value:function(Vt){var ar=Vt.x,Xr=Vt.y;this.emit(ka.Hover,{x:ar,y:Xr})}},{key:"triggerSelect",value:function(Vt){this.emit(ka.Select,{featureId:Vt})}},{key:"triggerActive",value:function(Vt){this.emit(ka.Active,{featureId:Vt})}},{key:"handleMiniEvent",value:function(Vt){this.onHover({clientX:Vt.touches[0].pageX,clientY:Vt.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var Vt=this.mapService.getMapContainer();if(Vt)if(Se.eW)Se.vO.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var ar=new(ma()).Manager(Vt);ar.add(new(ma()).Tap({event:"dblclick",taps:2})),ar.add(new(ma()).Tap({event:"click"})),ar.add(new(ma()).Pan({threshold:0,pointers:0})),ar.add(new(ma()).Press({})),ar.on("dblclick click",this.onHammer),ar.on("panstart panmove panend pancancel",this.onDrag),Vt.addEventListener("mousemove",this.onHover),Vt.addEventListener("mousedown",this.onHover,!0),Vt.addEventListener("mouseup",this.onHover),Vt.addEventListener("contextmenu",this.onHover),this.hammertime=ar}}},{key:"removeEventListenerOnMap",value:function(){if(Se.eW)Se.vO.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var Vt=this.mapService.getMapContainer();Vt&&(Vt.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Vt.removeEventListener("mousedown",this.onHover),Vt.removeEventListener("mouseup",this.onHover),Vt.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(Vt){var ar=Vt.type,Xr=Vt.pointerType,vn,Sn;Xr==="touch"?(Sn=Math.floor(Vt.pointers[0].clientY),vn=Math.floor(Vt.pointers[0].clientX)):(Sn=Math.floor(Vt.srcEvent.y),vn=Math.floor(Vt.srcEvent.x));var Fn=this.mapService.getMapContainer();if(Fn){var Ci=Fn.getBoundingClientRect(),Hi=Ci.top,ba=Ci.left;vn-=ba,Sn-=Hi}var mo=this.mapService.containerToLngLat([vn,Sn]);return{x:vn,y:Sn,lngLat:mo,type:ar,target:Vt.srcEvent}}},{key:"isDoubleTap",value:function(Vt,ar,Xr){var vn=this,Sn=new Date().getTime(),Fn="click";Sn-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Vt)<10&&Math.abs(this.lastClickXY[1]-ar)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),Fn="dblclick",this.emit(ka.Hover,{x:Vt,y:ar,lngLat:Xr,type:Fn})):(this.lastClickTime=Sn,this.lastClickXY=[Vt,ar],this.clickTimer=setTimeout(function(){Fn="click",vn.emit(ka.Hover,{x:Vt,y:ar,lngLat:Xr,type:Fn})},400))}}]),Mt}(c()),Te=(0,Tn.Z)(eo.prototype,"mapService",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo))||xa),os=0;function Go(ue){if(Se.eW)return null;var Rr=ue;if(typeof ue=="string"&&(Rr=document.getElementById(ue)),Rr){var Mt=document.createElement("div");return Mt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Mt.id="l7-scene-".concat(os++),Mt.classList.add("l7-scene"),Rr.appendChild(Mt),Mt}return null}function Wo(ue){var Rr,Mt,St=!0;return ue==null||(Rr=ue.target)===null||Rr===void 0||(Mt=Rr.path)===null||Mt===void 0||Mt.map(function(Vt){if(Vt!=null&&Vt.classList){var ar;Vt==null||(ar=Vt.classList)===null||ar===void 0||ar.forEach(function(Xr){(Xr==="l7-marker"||Xr==="l7-popup")&&(St=!1)})}}),St}var za;(function(ue){ue[ue.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",ue[ue.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",ue[ue.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",ue[ue.POINTS=0]="POINTS",ue[ue.LINES=1]="LINES",ue[ue.LINE_LOOP=2]="LINE_LOOP",ue[ue.LINE_STRIP=3]="LINE_STRIP",ue[ue.TRIANGLES=4]="TRIANGLES",ue[ue.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ue[ue.TRIANGLE_FAN=6]="TRIANGLE_FAN",ue[ue.ZERO=0]="ZERO",ue[ue.ONE=1]="ONE",ue[ue.SRC_COLOR=768]="SRC_COLOR",ue[ue.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",ue[ue.SRC_ALPHA=770]="SRC_ALPHA",ue[ue.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",ue[ue.DST_ALPHA=772]="DST_ALPHA",ue[ue.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",ue[ue.DST_COLOR=774]="DST_COLOR",ue[ue.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",ue[ue.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",ue[ue.FUNC_ADD=32774]="FUNC_ADD",ue[ue.BLEND_EQUATION=32777]="BLEND_EQUATION",ue[ue.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",ue[ue.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",ue[ue.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",ue[ue.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",ue[ue.MAX_EXT=32776]="MAX_EXT",ue[ue.MIN_EXT=32775]="MIN_EXT",ue[ue.BLEND_DST_RGB=32968]="BLEND_DST_RGB",ue[ue.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",ue[ue.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",ue[ue.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",ue[ue.CONSTANT_COLOR=32769]="CONSTANT_COLOR",ue[ue.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",ue[ue.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",ue[ue.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",ue[ue.BLEND_COLOR=32773]="BLEND_COLOR",ue[ue.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ue[ue.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ue[ue.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",ue[ue.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",ue[ue.STREAM_DRAW=35040]="STREAM_DRAW",ue[ue.STATIC_DRAW=35044]="STATIC_DRAW",ue[ue.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",ue[ue.BUFFER_SIZE=34660]="BUFFER_SIZE",ue[ue.BUFFER_USAGE=34661]="BUFFER_USAGE",ue[ue.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",ue[ue.FRONT=1028]="FRONT",ue[ue.BACK=1029]="BACK",ue[ue.FRONT_AND_BACK=1032]="FRONT_AND_BACK",ue[ue.CULL_FACE=2884]="CULL_FACE",ue[ue.BLEND=3042]="BLEND",ue[ue.DITHER=3024]="DITHER",ue[ue.STENCIL_TEST=2960]="STENCIL_TEST",ue[ue.DEPTH_TEST=2929]="DEPTH_TEST",ue[ue.SCISSOR_TEST=3089]="SCISSOR_TEST",ue[ue.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",ue[ue.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",ue[ue.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",ue[ue.NO_ERROR=0]="NO_ERROR",ue[ue.INVALID_ENUM=1280]="INVALID_ENUM",ue[ue.INVALID_VALUE=1281]="INVALID_VALUE",ue[ue.INVALID_OPERATION=1282]="INVALID_OPERATION",ue[ue.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",ue[ue.CW=2304]="CW",ue[ue.CCW=2305]="CCW",ue[ue.LINE_WIDTH=2849]="LINE_WIDTH",ue[ue.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",ue[ue.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",ue[ue.CULL_FACE_MODE=2885]="CULL_FACE_MODE",ue[ue.FRONT_FACE=2886]="FRONT_FACE",ue[ue.DEPTH_RANGE=2928]="DEPTH_RANGE",ue[ue.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",ue[ue.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",ue[ue.DEPTH_FUNC=2932]="DEPTH_FUNC",ue[ue.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",ue[ue.STENCIL_FUNC=2962]="STENCIL_FUNC",ue[ue.STENCIL_FAIL=2964]="STENCIL_FAIL",ue[ue.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",ue[ue.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",ue[ue.STENCIL_REF=2967]="STENCIL_REF",ue[ue.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",ue[ue.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",ue[ue.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",ue[ue.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",ue[ue.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",ue[ue.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",ue[ue.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",ue[ue.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",ue[ue.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",ue[ue.VIEWPORT=2978]="VIEWPORT",ue[ue.SCISSOR_BOX=3088]="SCISSOR_BOX",ue[ue.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",ue[ue.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",ue[ue.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",ue[ue.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",ue[ue.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",ue[ue.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",ue[ue.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",ue[ue.RED_BITS=3410]="RED_BITS",ue[ue.GREEN_BITS=3411]="GREEN_BITS",ue[ue.BLUE_BITS=3412]="BLUE_BITS",ue[ue.ALPHA_BITS=3413]="ALPHA_BITS",ue[ue.DEPTH_BITS=3414]="DEPTH_BITS",ue[ue.STENCIL_BITS=3415]="STENCIL_BITS",ue[ue.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",ue[ue.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",ue[ue.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",ue[ue.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",ue[ue.SAMPLES=32937]="SAMPLES",ue[ue.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",ue[ue.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",ue[ue.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",ue[ue.DONT_CARE=4352]="DONT_CARE",ue[ue.FASTEST=4353]="FASTEST",ue[ue.NICEST=4354]="NICEST",ue[ue.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",ue[ue.BYTE=5120]="BYTE",ue[ue.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ue[ue.SHORT=5122]="SHORT",ue[ue.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ue[ue.INT=5124]="INT",ue[ue.UNSIGNED_INT=5125]="UNSIGNED_INT",ue[ue.FLOAT=5126]="FLOAT",ue[ue.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ue[ue.ALPHA=6406]="ALPHA",ue[ue.RGB=6407]="RGB",ue[ue.RGBA=6408]="RGBA",ue[ue.LUMINANCE=6409]="LUMINANCE",ue[ue.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ue[ue.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ue[ue.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ue[ue.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ue[ue.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",ue[ue.VERTEX_SHADER=35633]="VERTEX_SHADER",ue[ue.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",ue[ue.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",ue[ue.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",ue[ue.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",ue[ue.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",ue[ue.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",ue[ue.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",ue[ue.SHADER_TYPE=35663]="SHADER_TYPE",ue[ue.DELETE_STATUS=35712]="DELETE_STATUS",ue[ue.LINK_STATUS=35714]="LINK_STATUS",ue[ue.VALIDATE_STATUS=35715]="VALIDATE_STATUS",ue[ue.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",ue[ue.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",ue[ue.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",ue[ue.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",ue[ue.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",ue[ue.NEVER=512]="NEVER",ue[ue.LESS=513]="LESS",ue[ue.EQUAL=514]="EQUAL",ue[ue.LEQUAL=515]="LEQUAL",ue[ue.GREATER=516]="GREATER",ue[ue.NOTEQUAL=517]="NOTEQUAL",ue[ue.GEQUAL=518]="GEQUAL",ue[ue.ALWAYS=519]="ALWAYS",ue[ue.KEEP=7680]="KEEP",ue[ue.REPLACE=7681]="REPLACE",ue[ue.INCR=7682]="INCR",ue[ue.DECR=7683]="DECR",ue[ue.INVERT=5386]="INVERT",ue[ue.INCR_WRAP=34055]="INCR_WRAP",ue[ue.DECR_WRAP=34056]="DECR_WRAP",ue[ue.VENDOR=7936]="VENDOR",ue[ue.RENDERER=7937]="RENDERER",ue[ue.VERSION=7938]="VERSION",ue[ue.NEAREST=9728]="NEAREST",ue[ue.LINEAR=9729]="LINEAR",ue[ue.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",ue[ue.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",ue[ue.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",ue[ue.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",ue[ue.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",ue[ue.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",ue[ue.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",ue[ue.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",ue[ue.TEXTURE_2D=3553]="TEXTURE_2D",ue[ue.TEXTURE=5890]="TEXTURE",ue[ue.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ue[ue.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",ue[ue.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ue[ue.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ue[ue.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ue[ue.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ue[ue.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ue[ue.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ue[ue.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",ue[ue.TEXTURE0=33984]="TEXTURE0",ue[ue.TEXTURE1=33985]="TEXTURE1",ue[ue.TEXTURE2=33986]="TEXTURE2",ue[ue.TEXTURE3=33987]="TEXTURE3",ue[ue.TEXTURE4=33988]="TEXTURE4",ue[ue.TEXTURE5=33989]="TEXTURE5",ue[ue.TEXTURE6=33990]="TEXTURE6",ue[ue.TEXTURE7=33991]="TEXTURE7",ue[ue.TEXTURE8=33992]="TEXTURE8",ue[ue.TEXTURE9=33993]="TEXTURE9",ue[ue.TEXTURE10=33994]="TEXTURE10",ue[ue.TEXTURE11=33995]="TEXTURE11",ue[ue.TEXTURE12=33996]="TEXTURE12",ue[ue.TEXTURE13=33997]="TEXTURE13",ue[ue.TEXTURE14=33998]="TEXTURE14",ue[ue.TEXTURE15=33999]="TEXTURE15",ue[ue.TEXTURE16=34e3]="TEXTURE16",ue[ue.TEXTURE17=34001]="TEXTURE17",ue[ue.TEXTURE18=34002]="TEXTURE18",ue[ue.TEXTURE19=34003]="TEXTURE19",ue[ue.TEXTURE20=34004]="TEXTURE20",ue[ue.TEXTURE21=34005]="TEXTURE21",ue[ue.TEXTURE22=34006]="TEXTURE22",ue[ue.TEXTURE23=34007]="TEXTURE23",ue[ue.TEXTURE24=34008]="TEXTURE24",ue[ue.TEXTURE25=34009]="TEXTURE25",ue[ue.TEXTURE26=34010]="TEXTURE26",ue[ue.TEXTURE27=34011]="TEXTURE27",ue[ue.TEXTURE28=34012]="TEXTURE28",ue[ue.TEXTURE29=34013]="TEXTURE29",ue[ue.TEXTURE30=34014]="TEXTURE30",ue[ue.TEXTURE31=34015]="TEXTURE31",ue[ue.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",ue[ue.REPEAT=10497]="REPEAT",ue[ue.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",ue[ue.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ue[ue.FLOAT_VEC2=35664]="FLOAT_VEC2",ue[ue.FLOAT_VEC3=35665]="FLOAT_VEC3",ue[ue.FLOAT_VEC4=35666]="FLOAT_VEC4",ue[ue.INT_VEC2=35667]="INT_VEC2",ue[ue.INT_VEC3=35668]="INT_VEC3",ue[ue.INT_VEC4=35669]="INT_VEC4",ue[ue.BOOL=35670]="BOOL",ue[ue.BOOL_VEC2=35671]="BOOL_VEC2",ue[ue.BOOL_VEC3=35672]="BOOL_VEC3",ue[ue.BOOL_VEC4=35673]="BOOL_VEC4",ue[ue.FLOAT_MAT2=35674]="FLOAT_MAT2",ue[ue.FLOAT_MAT3=35675]="FLOAT_MAT3",ue[ue.FLOAT_MAT4=35676]="FLOAT_MAT4",ue[ue.SAMPLER_2D=35678]="SAMPLER_2D",ue[ue.SAMPLER_CUBE=35680]="SAMPLER_CUBE",ue[ue.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",ue[ue.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",ue[ue.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",ue[ue.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",ue[ue.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",ue[ue.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",ue[ue.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",ue[ue.COMPILE_STATUS=35713]="COMPILE_STATUS",ue[ue.LOW_FLOAT=36336]="LOW_FLOAT",ue[ue.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",ue[ue.HIGH_FLOAT=36338]="HIGH_FLOAT",ue[ue.LOW_INT=36339]="LOW_INT",ue[ue.MEDIUM_INT=36340]="MEDIUM_INT",ue[ue.HIGH_INT=36341]="HIGH_INT",ue[ue.FRAMEBUFFER=36160]="FRAMEBUFFER",ue[ue.RENDERBUFFER=36161]="RENDERBUFFER",ue[ue.RGBA4=32854]="RGBA4",ue[ue.RGB5_A1=32855]="RGB5_A1",ue[ue.RGB565=36194]="RGB565",ue[ue.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",ue[ue.STENCIL_INDEX=6401]="STENCIL_INDEX",ue[ue.STENCIL_INDEX8=36168]="STENCIL_INDEX8",ue[ue.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ue[ue.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",ue[ue.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",ue[ue.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",ue[ue.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",ue[ue.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",ue[ue.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",ue[ue.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",ue[ue.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",ue[ue.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",ue[ue.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",ue[ue.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",ue[ue.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",ue[ue.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",ue[ue.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",ue[ue.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",ue[ue.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",ue[ue.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",ue[ue.NONE=0]="NONE",ue[ue.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",ue[ue.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",ue[ue.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",ue[ue.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",ue[ue.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",ue[ue.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",ue[ue.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",ue[ue.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",ue[ue.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",ue[ue.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",ue[ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",ue[ue.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",ue[ue.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",ue[ue.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(za||(za={}));var Tu,ws,Zs,ts,Vs,ou,ls,ki,As,Rs,hr,Lr,or,kr=(Tu=(0,K.b2)(),ws=(0,K.f3)(Z.IMapService),Zs=(0,K.f3)(Z.IRendererService),ts=(0,K.f3)(Z.IGlobalConfigService),Vs=(0,K.f3)(Z.IInteractionService),ou=(0,K.f3)(Z.ILayerService),Tu(ls=(ki=function(){function ue(){var Rr=this;(0,L.Z)(this,ue),(0,Le.Z)(this,"pickedColors",void 0),(0,Le.Z)(this,"pickedTileLayers",[]),(0,Yr.Z)(this,"mapService",As,this),(0,Yr.Z)(this,"rendererService",Rs,this),(0,Yr.Z)(this,"configService",hr,this),(0,Yr.Z)(this,"interactionService",Lr,this),(0,Yr.Z)(this,"layerService",or,this),(0,Le.Z)(this,"pickingFBO",void 0),(0,Le.Z)(this,"width",0),(0,Le.Z)(this,"height",0),(0,Le.Z)(this,"alreadyInPicking",!1),(0,Le.Z)(this,"pickBufferScale",1),(0,Le.Z)(this,"pickFromPickingFBO",function(Mt,St){var Vt=St.x,ar=St.y,Xr=St.lngLat,vn=St.type,Sn=St.target,Fn=!1,Ci=Rr.rendererService,Hi=Ci.readPixels,ba=Ci.getContainer,mo=Rr.getContainerSize(ba()),Qa=mo.width,ks=mo.height;Qa*=Se.SO.DPR,ks*=Se.SO.DPR;var Ts=Mt.getLayerConfig(),lu=Ts.enableHighlight,Iu=Ts.enableSelect,_u=Vt*Se.SO.DPR,Mc=ar*Se.SO.DPR;if(_u>Qa-1*Se.SO.DPR||_u<0||Mc>ks-1*Se.SO.DPR||Mc<0)return!1;var tu=Hi({x:Math.floor(_u/Rr.pickBufferScale),y:Math.floor((ks-(ar+1)*Se.SO.DPR)/Rr.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Rr.pickingFBO});if(Rr.pickedColors=tu,tu[0]!==0||tu[1]!==0||tu[2]!==0){var Fl=(0,Se.W0)(tu),Ys=Mt.layerPickService.getFeatureById(Fl);Fl!==Mt.getCurrentPickId()&&vn==="mousemove"&&(vn="mouseenter");var Du={x:Vt,y:ar,type:vn,lngLat:Xr,featureId:Fl,feature:Ys,target:Sn};Ys&&(Fn=!0,Mt.setCurrentPickId(Fl),Rr.triggerHoverOnLayer(Mt,Du))}else{var Bu={x:Vt,y:ar,lngLat:Xr,type:Mt.getCurrentPickId()!==null&&vn==="mousemove"?"mouseout":"un"+vn,featureId:null,target:Sn,feature:null};Rr.triggerHoverOnLayer(Mt,(0,B.Z)((0,B.Z)({},Bu),{},{type:"unpick"})),Rr.triggerHoverOnLayer(Mt,Bu),Mt.setCurrentPickId(null)}if(lu&&Mt.layerPickService.highlightPickedFeature(tu),Iu&&vn==="click"&&(tu==null?void 0:tu.toString())!==[0,0,0,0].toString()){var Gl=(0,Se.W0)(tu);Mt.getCurrentSelectedId()===null||Gl!==Mt.getCurrentSelectedId()?(Mt.layerPickService.selectFeature(tu),Mt.setCurrentSelectedId(Gl)):(Mt.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),Mt.setCurrentSelectedId(null))}return Fn})}return(0,$.Z)(ue,[{key:"init",value:function(Mt){var St=this.rendererService,Vt=St.createTexture2D,ar=St.createFramebuffer,Xr=St.getContainer,vn=this.getContainerSize(Xr()),Sn=vn.width,Fn=vn.height;Sn*=Se.SO.DPR,Fn*=Se.SO.DPR,this.pickBufferScale=this.configService.getSceneConfig(Mt).pickBufferScale||1,this.pickingFBO=ar({color:Vt({width:Math.round(Sn/this.pickBufferScale),height:Math.round(Fn/this.pickBufferScale),wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.interactionService.on(ka.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var Rr=(0,wt.Z)(Re().mark(function St(Vt,ar,Xr){var vn=this,Sn,Fn,Ci;return Re().wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:Sn=this.rendererService,Fn=Sn.useFramebuffer,Ci=Sn.clear,this.resizePickingFBO(),Fn(this.pickingFBO,function(){Ci({framebuffer:vn.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Vt.hooks.beforePickingEncode.call(),Vt.renderModels(),Vt.hooks.afterPickingEncode.call();var mo=vn.pickBox(Vt,ar);Xr(mo)});case 3:case"end":return ba.stop()}},St,this)}));function Mt(St,Vt,ar){return Rr.apply(this,arguments)}return Mt}()},{key:"pickBox",value:function(Mt,St){var Vt=this,ar=St.map(function(Gl){var ru=Gl<0?0:Gl;return Math.floor(ru*Se.SO.DPR/Vt.pickBufferScale)}),Xr=(0,ae.Z)(ar,4),vn=Xr[0],Sn=Xr[1],Fn=Xr[2],Ci=Xr[3],Hi=this.rendererService,ba=Hi.readPixels,mo=Hi.getContainer,Qa=this.getContainerSize(mo()),ks=Qa.width,Ts=Qa.height;if(ks*=Se.SO.DPR,Ts*=Se.SO.DPR,vn>(ks-1)*Se.SO.DPR/this.pickBufferScale||Fn<0||Sn>(Ts-1)*Se.SO.DPR/this.pickBufferScale||Ci<0)return[];for(var lu=Math.min(ks/this.pickBufferScale,Fn)-vn,Iu=Math.min(Ts/this.pickBufferScale,Ci)-Sn,_u=ba({x:vn,y:Math.floor(Ts/this.pickBufferScale-(Ci+1)),width:lu,height:Iu,data:new Uint8Array(lu*Iu*4),framebuffer:this.pickingFBO}),Mc=[],tu={},Fl=0;Fl<_u.length/4;Fl=Fl+1){var Ys=_u.slice(Fl*4,Fl*4+4),Du=(0,Se.W0)(Ys);if(Du!==-1&&!tu[Du]){var Bu=Mt.layerPickService.getFeatureById(Du);Mc.push((0,B.Z)((0,B.Z)({},Bu),{},{pickedFeatureIdx:Du})),tu[Du]=!0}}return Mc}},{key:"handleCursor",value:function(Mt,St){var Vt=Mt.getLayerConfig(),ar=Vt.cursor,Xr=ar===void 0?"":ar,vn=Vt.cursorEnabled;if(vn){var Sn=this.mapService.version,Fn=Sn==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Ci=Fn==null?void 0:Fn.style.getPropertyValue("cursor");St==="unmousemove"&&Ci!==""?Fn==null||Fn.style.setProperty("cursor",""):St==="mousemove"&&(Fn==null||Fn.style.setProperty("cursor",Xr))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(Mt){return Mt.getContext?{width:Mt.width/Se.SO.DPR,height:Mt.height/Se.SO.DPR}:Mt.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var Rr=(0,wt.Z)(Re().mark(function St(Vt){return Re().wrap(function(Xr){for(;;)switch(Xr.prev=Xr.next){case 0:if(!(!this.layerService.needPick(Vt.type)||!this.isPickingAllLayer())){Xr.next=2;break}return Xr.abrupt("return");case 2:return this.alreadyInPicking=!0,Xr.next=5,this.pickingLayers(Vt);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return Xr.stop()}},St,this)}));function Mt(St){return Rr.apply(this,arguments)}return Mt}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var Mt=this.rendererService.getContainer,St=this.getContainerSize(Mt()),Vt=St.width,ar=St.height;Vt*=Se.SO.DPR,ar*=Se.SO.DPR,(this.width!==Vt||this.height!==ar)&&(this.pickingFBO.resize({width:Math.round(Vt/this.pickBufferScale),height:Math.round(ar/this.pickBufferScale)}),this.width=Vt,this.height=ar)}},{key:"pickingLayers",value:function(){var Rr=(0,wt.Z)(Re().mark(function St(Vt){var ar=this,Xr,vn,Sn;return Re().wrap(function(Ci){for(;;)switch(Ci.prev=Ci.next){case 0:Xr=this.rendererService,vn=Xr.useFramebuffer,Sn=Xr.clear,this.resizePickingFBO(),vn(this.pickingFBO,function(){var Hi=ar.layerService.getRenderList();Hi.filter(function(ba){return ba.needPick(Vt.type)}).reverse().some(function(ba){Sn({framebuffer:ar.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ba.layerPickService.pickRender(Vt);var mo=ar.pickFromPickingFBO(ba,Vt);return ar.layerService.pickedLayerId=mo?+ba.id:-1,mo&&!ba.getLayerConfig().enablePropagation})});case 3:case"end":return Ci.stop()}},St,this)}));function Mt(St){return Rr.apply(this,arguments)}return Mt}()},{key:"triggerHoverOnLayer",value:function(Mt,St){Wo(St)&&(this.handleCursor(Mt,St.type),Mt.emit(St.type,St))}}]),ue}(),As=(0,Tn.Z)(ki.prototype,"mapService",[ws],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rs=(0,Tn.Z)(ki.prototype,"rendererService",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hr=(0,Tn.Z)(ki.prototype,"configService",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr=(0,Tn.Z)(ki.prototype,"interactionService",[Vs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or=(0,Tn.Z)(ki.prototype,"layerService",[ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ki))||ls),Hn=function(){function ue(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,L.Z)(this,ue),(0,Le.Z)(this,"autoStart",void 0),(0,Le.Z)(this,"startTime",0),(0,Le.Z)(this,"oldTime",0),(0,Le.Z)(this,"running",!1),(0,Le.Z)(this,"elapsedTime",0),this.autoStart=Rr}return(0,$.Z)(ue,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Mt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var St=(typeof performance=="undefined"?Date:performance).now();Mt=(St-this.oldTime)/1e3,this.oldTime=St,this.elapsedTime+=Mt}return Mt}}]),ue}(),zr,Bo,Vr,cr,ht,ur,er,sn,fn;function Vn(ue,Rr){var Mt=typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(!Mt){if(Array.isArray(ue)||(Mt=ni(ue))||Rr&&ue&&typeof ue.length=="number"){Mt&&(ue=Mt);var St=0,Vt=function(){};return{s:Vt,n:function(){return St>=ue.length?{done:!0}:{done:!1,value:ue[St++]}},e:function(Fn){throw Fn},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar=!0,Xr=!1,vn;return{s:function(){Mt=Mt.call(ue)},n:function(){var Fn=Mt.next();return ar=Fn.done,Fn},e:function(Fn){Xr=!0,vn=Fn},f:function(){try{!ar&&Mt.return!=null&&Mt.return()}finally{if(Xr)throw vn}}}}function ni(ue,Rr){if(ue){if(typeof ue=="string")return oi(ue,Rr);var Mt=Object.prototype.toString.call(ue).slice(8,-1);if(Mt==="Object"&&ue.constructor&&(Mt=ue.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(ue);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return oi(ue,Rr)}}function oi(ue,Rr){(Rr==null||Rr>ue.length)&&(Rr=ue.length);for(var Mt=0,St=new Array(Rr);Mt<Rr;Mt++)St[Mt]=ue[Mt];return St}function Ei(ue){var Rr=qi();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function qi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Pr=(zr=(0,K.b2)(),Bo=(0,K.f3)(Z.IRendererService),Vr=(0,K.f3)(Z.IMapService),cr=(0,K.f3)(Z.IDebugService),zr(ht=(ur=function(ue){(0,ke.Z)(Mt,ue);var Rr=Ei(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Le.Z)((0,U.Z)(St),"pickedLayerId",-1),(0,Le.Z)((0,U.Z)(St),"clock",new Hn),(0,Le.Z)((0,U.Z)(St),"alreadyInRendering",!1),(0,Le.Z)((0,U.Z)(St),"layers",[]),(0,Le.Z)((0,U.Z)(St),"layerList",[]),(0,Le.Z)((0,U.Z)(St),"layerRenderID",void 0),(0,Le.Z)((0,U.Z)(St),"sceneInited",!1),(0,Le.Z)((0,U.Z)(St),"animateInstanceCount",0),(0,Le.Z)((0,U.Z)(St),"shaderPicking",!0),(0,Le.Z)((0,U.Z)(St),"enableRender",!0),(0,Yr.Z)((0,U.Z)(St),"renderService",er,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"mapService",sn,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"debugService",fn,(0,U.Z)(St)),(0,Le.Z)((0,U.Z)(St),"reRender",(0,zt.throttle)(function(){St.updateLayerRenderList(),St.renderLayers()},32)),(0,Le.Z)((0,U.Z)(St),"throttleRenderLayers",(0,zt.throttle)(function(){St.renderLayers()},16)),St}return(0,$.Z)(Mt,[{key:"needPick",value:function(Vt){return this.layerList.some(function(ar){return ar.needPick(Vt)})}},{key:"add",value:function(Vt){var ar=this;this.layers.push(Vt),this.sceneInited&&Vt.init().then(function(){ar.updateLayerRenderList(),ar.renderLayers()})}},{key:"addMask",value:function(Vt){var ar=this;this.sceneInited&&Vt.init().then(function(){ar.renderLayers()})}},{key:"initLayers",value:function(){var St=(0,wt.Z)(Re().mark(function ar(){var Xr=this;return Re().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var Fn=(0,wt.Z)(Re().mark(function Ci(Hi){return Re().wrap(function(mo){for(;;)switch(mo.prev=mo.next){case 0:if(Hi.startInit){mo.next=4;break}return mo.next=3,Hi.init();case 3:Xr.updateLayerRenderList();case 4:case"end":return mo.stop()}},Ci)}));return function(Ci){return Fn.apply(this,arguments)}}());case 2:case"end":return Sn.stop()}},ar,this)}));function Vt(){return St.apply(this,arguments)}return Vt}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Vt){return this.layers.find(function(ar){return ar.id===Vt})}},{key:"getLayerByName",value:function(Vt){return this.layers.find(function(ar){return ar.name===Vt})}},{key:"remove",value:function(){var St=(0,wt.Z)(Re().mark(function ar(Xr,vn){var Sn,Fn;return Re().wrap(function(Hi){for(;;)switch(Hi.prev=Hi.next){case 0:vn?(Sn=vn.layerChildren.indexOf(Xr),Sn>-1&&vn.layerChildren.splice(Sn,1)):(Fn=this.layers.indexOf(Xr),Fn>-1&&this.layers.splice(Fn,1)),this.updateLayerRenderList(),Xr.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 5:case"end":return Hi.stop()}},ar,this)}));function Vt(ar,Xr){return St.apply(this,arguments)}return Vt}()},{key:"removeAllLayers",value:function(){var St=(0,wt.Z)(Re().mark(function ar(){return Re().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:this.destroy(),this.reRender();case 2:case"end":return vn.stop()}},ar,this)}));function Vt(){return St.apply(this,arguments)}return Vt}()},{key:"setEnableRender",value:function(Vt){this.enableRender=Vt}},{key:"renderLayers",value:function(){var St=(0,wt.Z)(Re().mark(function ar(){var Xr,vn,Sn,Fn;return Re().wrap(function(Hi){for(;;)switch(Hi.prev=Hi.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){Hi.next=2;break}return Hi.abrupt("return");case 2:Xr=this.debugService.generateRenderUid(),this.debugService.renderStart(Xr),this.alreadyInRendering=!0,this.clear(),vn=Vn(this.layerList),Hi.prev=7,vn.s();case 9:if((Sn=vn.n()).done){Hi.next=21;break}if(Fn=Sn.value,Fn.masks.filter(function(ba){return ba.inited}).length>0&&(this.renderService.clear({stencil:0,depth:1,framebuffer:null}),Fn.masks.map(function(){var ba=(0,wt.Z)(Re().mark(function mo(Qa){return Re().wrap(function(Ts){for(;;)switch(Ts.prev=Ts.next){case 0:Qa.render();case 1:case"end":return Ts.stop()}},mo)}));return function(mo){return ba.apply(this,arguments)}}())),!Fn.getLayerConfig().enableMultiPassRenderer){Hi.next=17;break}return Hi.next=15,Fn.renderMultiPass();case 15:Hi.next=19;break;case 17:return Hi.next=19,Fn.render();case 19:Hi.next=9;break;case 21:Hi.next=26;break;case 23:Hi.prev=23,Hi.t0=Hi.catch(7),vn.e(Hi.t0);case 26:return Hi.prev=26,vn.f(),Hi.finish(26);case 29:this.debugService.renderEnd(Xr),this.alreadyInRendering=!1;case 31:case"end":return Hi.stop()}},ar,this,[[7,23,26,29]])}));function Vt(){return St.apply(this,arguments)}return Vt}()},{key:"renderMask",value:function(Vt){Vt.filter(function(ar){return ar.inited}).map(function(ar){ar.render()})}},{key:"beforeRenderData",value:function(){var St=(0,wt.Z)(Re().mark(function ar(Xr){var vn;return Re().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Fn.next=2,Xr.hooks.beforeRenderData.promise();case 2:vn=Fn.sent,vn&&this.renderLayers();case 4:case"end":return Fn.stop()}},ar,this)}));function Vt(ar){return St.apply(this,arguments)}return Vt}()},{key:"renderLayer",value:function(){var St=(0,wt.Z)(Re().mark(function ar(Xr){var vn=this;return Re().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:if(Xr.masks.filter(function(Ci){return Ci.inited}).length>0&&Xr.masks.map(function(Ci){vn.renderService.clear({stencil:0,depth:1,framebuffer:null}),Ci.render()}),!Xr.getLayerConfig().enableMultiPassRenderer){Fn.next=6;break}return Fn.next=4,Xr.renderMultiPass();case 4:Fn.next=8;break;case 6:return Fn.next=8,Xr.render();case 8:case"end":return Fn.stop()}},ar)}));function Vt(ar){return St.apply(this,arguments)}return Vt}()},{key:"updateLayerRenderList",value:function(){var Vt=this;this.layerList=[],this.layers.filter(function(ar){return ar.inited}).filter(function(ar){return ar.isVisible()}).sort(function(ar,Xr){return ar.zIndex-Xr.zIndex}).forEach(function(ar){Vt.layerList.push(ar)})}},{key:"destroy",value:function(){this.layers.forEach(function(Vt){Vt.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var Vt=(0,Se.CI)(this.mapService.bgColor);this.renderService.clear({color:Vt,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=Se.vO.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){Se.vO.cancelAnimationFrame(this.layerRenderID)}}]),Mt}(M.EventEmitter),er=(0,Tn.Z)(ur.prototype,"renderService",[Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=(0,Tn.Z)(ur.prototype,"mapService",[Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn=(0,Tn.Z)(ur.prototype,"debugService",[cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur))||ht),Cn=g(91),ln=function(){function ue(Rr){var Mt=this;(0,L.Z)(this,ue),(0,Le.Z)(this,"name",void 0),(0,Le.Z)(this,"type",void 0),(0,Le.Z)(this,"scale",void 0),(0,Le.Z)(this,"descriptor",void 0),(0,Le.Z)(this,"featureBufferLayout",[]),(0,Le.Z)(this,"needRescale",!1),(0,Le.Z)(this,"needRemapping",!1),(0,Le.Z)(this,"needRegenerateVertices",!1),(0,Le.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,Le.Z)(this,"vertexAttribute",void 0),(0,Le.Z)(this,"defaultCallback",function(St){if(St.length===0){var Vt;return((Vt=Mt.scale)===null||Vt===void 0?void 0:Vt.defaultValues)||[]}return St.map(function(ar,Xr){var vn,Sn=(vn=Mt.scale)===null||vn===void 0?void 0:vn.scalers[Xr].func,Fn=Sn(ar);return Fn})}),this.setProps(Rr)}return(0,$.Z)(ue,[{key:"setProps",value:function(Mt){Object.assign(this,Mt)}},{key:"mapping",value:function(Mt){var St;if((St=this.scale)!==null&&St!==void 0&&St.callback){var Vt,ar=(Vt=this.scale)===null||Vt===void 0?void 0:Vt.callback.apply(Vt,(0,Qe.Z)(Mt));if(!(0,zt.isNil)(ar))return[ar]}return this.defaultCallback(Mt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),ue}(),bn=["modelType"],Kn=["buffer","update","name"],bi=["buffer","update","name"],Yi=["buffer","update","name"],Gi,aa,Ta,R,_e,At,Ke=(Gi={},(0,Le.Z)(Gi,za.FLOAT,4),(0,Le.Z)(Gi,za.UNSIGNED_BYTE,1),(0,Le.Z)(Gi,za.UNSIGNED_SHORT,2),Gi),nr=(aa=(0,K.b2)(),Ta=(0,K.f3)(Z.IRendererService),aa(R=(_e=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"attributesAndIndices",void 0),(0,Yr.Z)(this,"rendererService",At,this),(0,Le.Z)(this,"attributes",[]),(0,Le.Z)(this,"triangulation",void 0),(0,Le.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,$.Z)(ue,[{key:"registerStyleAttribute",value:function(Mt){var St=this.getLayerStyleAttribute(Mt.name||"");return St?St.setProps(Mt):(St=new ln(Mt),this.attributes.push(St)),St}},{key:"updateScaleAttribute",value:function(Mt){this.attributes.forEach(function(St){var Vt,ar=St.name,Xr=(Vt=St.scale)===null||Vt===void 0?void 0:Vt.field;(Mt[ar]||Xr&&Mt[Xr])&&(St.needRescale=!0,St.needRemapping=!0,St.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(Mt,St,Vt){var ar=this.getLayerStyleAttribute(Mt);ar||(ar=this.registerStyleAttribute((0,B.Z)((0,B.Z)({},St),{},{name:Mt})));var Xr=St.scale;Xr&&ar&&(ar.scale=Xr,ar.needRescale=!0,ar.needRemapping=!0,ar.needRegenerateVertices=!0,Vt&&Vt.featureRange&&(ar.featureRange=Vt.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Mt){return this.attributes.find(function(St){return St.name===Mt})}},{key:"getLayerAttributeScale",value:function(Mt){var St,Vt=this.getLayerStyleAttribute(Mt),ar=Vt==null||(St=Vt.scale)===null||St===void 0?void 0:St.scalers;return ar&&ar[0]?ar[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Mt,St){var Vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,ar=arguments.length>3?arguments[3]:void 0,Xr=arguments.length>4?arguments[4]:void 0,vn=this.attributes.find(function(tu){return tu.name===Mt});if(vn&&vn.descriptor){var Sn=vn.descriptor,Fn=Sn.update,Ci=Sn.buffer,Hi=Sn.size,ba=Hi===void 0?0:Hi,mo=Ke[Ci.type||za.FLOAT];if(Fn){var Qa=this.featureLayout,ks=Qa.elements,Ts=Qa.sizePerElement,lu=ks.slice(Vt,ar);if(!lu.length)return;var Iu=lu[0].offset,_u=Iu*ba*mo,Mc=lu.map(function(tu,Fl){for(var Ys=tu.featureIdx,Du=tu.vertices,Bu=tu.normals,Gl=Du.length/Ts,ru=[],pl=0;pl<Gl;pl++){var ef=Bu?Bu.slice(pl*3,pl*3+3):[];ru.push.apply(ru,(0,Qe.Z)(Fn(St[Ys],Ys,Du.slice(pl*Ts,pl*Ts+Ts),Fl,ef)))}return ru}).reduce(function(tu,Fl){return tu.push.apply(tu,(0,Qe.Z)(Fl)),tu},[]);vn.vertexAttribute.updateBuffer({data:Mc,offset:_u}),Xr==null||Xr.emit("legend:".concat(Mt),{type:Mt,attr:vn})}}}},{key:"createAttributesAndIndicesAscy",value:function(Mt,St,Vt){var ar=this;this.featureLayout={sizePerElement:0,elements:[]};var Xr=this.attributes.map(function(Qa){return Qa.resetDescriptor(),Qa.descriptor}).filter(function(Qa){return Qa}),vn=Vt.modelType,Sn=(0,Cn.Z)(Vt,bn),Fn=this.rendererService,Ci=Fn.createAttribute,Hi=Fn.createBuffer,ba=Fn.createElements,mo={};return new Promise(function(Qa,ks){(0,Se.hH)(vn,(0,B.Z)({descriptors:ar.getDescriptorsWithOutFunc(Xr),features:Mt,segmentNumber:St},Sn)).then(function(Ts){Ts.descriptors.forEach(function(Iu,_u){if(Iu){var Mc=Iu.buffer,tu=Iu.update,Fl=Iu.name,Ys=(0,Cn.Z)(Iu,Kn),Du=Ci((0,B.Z)({buffer:Hi(Mc)},Ys));mo[Iu.name||""]=Du,ar.attributes[_u].vertexAttribute=Du}}),ar.featureLayout=Ts.featureLayout;var lu=ba({data:Ts.indices,type:za.UNSIGNED_INT,count:Ts.indices.length});ar.attributesAndIndices={attributes:mo,elements:lu,count:null},Qa(ar.attributesAndIndices)}).catch(function(Ts){console.warn(Ts),ks(Ts)})})}},{key:"createAttributesAndIndices",value:function(Mt,St,Vt){var ar=this;this.featureLayout={sizePerElement:0,elements:[]},St&&(this.triangulation=St);var Xr=this.attributes.map(function(_u){return _u.resetDescriptor(),_u.descriptor}),vn=0,Sn=0,Fn=[],Ci=[],Hi=[],ba=3;Mt.forEach(function(_u,Mc){var tu=ar.triangulation(_u,Vt),Fl=tu.indices,Ys=tu.vertices,Du=tu.normals,Bu=tu.size,Gl=tu.indexes,ru=tu.count;typeof ru=="number"&&(Sn+=ru),Fl.forEach(function(hc){Ci.push(hc+vn)}),ba=Bu;var pl=Ys.length/Bu;ar.featureLayout.sizePerElement=ba,ar.featureLayout.elements.push({featureIdx:Mc,vertices:Ys,normals:Du,offset:vn}),vn+=pl;for(var ef=function(uh){var Kf=(Du==null?void 0:Du.slice(uh*3,uh*3+3))||[],gh=Ys.slice(uh*Bu,uh*Bu+Bu),yh=0;Gl&&Gl[uh]!==void 0&&(yh=Gl[uh]),Xr.forEach(function(Yf,dc){if(Yf&&Yf.update){var oe;(oe=Yf.buffer.data).push.apply(oe,(0,Qe.Z)(Yf.update(_u,Mc,gh,uh,Kf,yh)))}})},Bh=0;Bh<pl;Bh++)ef(Bh)});var mo=this.rendererService,Qa=mo.createAttribute,ks=mo.createBuffer,Ts=mo.createElements,lu={};Xr.forEach(function(_u,Mc){if(_u){var tu=_u.buffer,Fl=_u.update,Ys=_u.name,Du=(0,Cn.Z)(_u,bi),Bu=Qa((0,B.Z)({buffer:ks(tu)},Du));lu[_u.name||""]=Bu,ar.attributes[Mc].vertexAttribute=Bu}});var Iu=Ts({data:Ci,type:za.UNSIGNED_INT,count:Ci.length});return this.attributesAndIndices={attributes:lu,elements:Iu,count:Sn},this.attributesAndIndices}},{key:"createAttributes",value:function(Mt,St){var Vt=this;this.featureLayout={sizePerElement:0,elements:[]},St&&(this.triangulation=St);var ar=this.attributes.map(function(mo){return mo.resetDescriptor(),mo.descriptor}),Xr=0,vn=[],Sn=3;Mt.forEach(function(mo,Qa){var ks=Vt.triangulation(mo),Ts=ks.indices,lu=ks.vertices,Iu=ks.normals,_u=ks.size,Mc=ks.indexes;Ts.forEach(function(Du){vn.push(Du+Xr)}),Sn=_u;var tu=lu.length/_u;Vt.featureLayout.sizePerElement=Sn,Vt.featureLayout.elements.push({featureIdx:Qa,vertices:lu,normals:Iu,offset:Xr}),Xr+=tu;for(var Fl=function(Bu){var Gl=(Iu==null?void 0:Iu.slice(Bu*3,Bu*3+3))||[],ru=lu.slice(Bu*_u,Bu*_u+_u),pl=0;Mc&&Mc[Bu]!==void 0&&(pl=Mc[Bu]),ar.forEach(function(ef,Bh){if(ef&&ef.update){var hc;(hc=ef.buffer.data).push.apply(hc,(0,Qe.Z)(ef.update(mo,Qa,ru,Bu,Gl,pl)))}})},Ys=0;Ys<tu;Ys++)Fl(Ys)});var Fn=this.rendererService,Ci=Fn.createAttribute,Hi=Fn.createBuffer,ba={};return ar.forEach(function(mo,Qa){if(mo){var ks=mo.buffer,Ts=mo.update,lu=mo.name,Iu=(0,Cn.Z)(mo,Yi),_u=Ci((0,B.Z)({buffer:Hi(ks)},Iu));ba[mo.name||""]=_u,Vt.attributes[Qa].vertexAttribute=_u}}),{attributes:ba}}},{key:"clearAllAttributes",value:function(){var Mt;this.attributes.forEach(function(St){St.vertexAttribute&&St.vertexAttribute.destroy()}),(Mt=this.attributesAndIndices)===null||Mt===void 0||Mt.elements.destroy(),this.attributes=[]}},{key:"getDescriptorsWithOutFunc",value:function(Mt){return Mt.map(function(St){return{buffer:St.buffer,name:St.name,size:St.size}})}}]),ue}(),At=(0,Tn.Z)(_e.prototype,"rendererService",[Ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e))||R),wr=g(46343),Wr=g(67709),In=g.n(Wr),Dn,Mi,Bi,io,co,Sa,Ko,Co,Oo,Ho,Io,Js,Il,Ao,Va,gs,Ws,bs,Ps,Xs,gl,jf,Mu,yl,lc,Lc,dh,_l,Us,th,Df,Cf,lf,gd,Kh;function yc(ue){var Rr=Eh();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Eh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var cf=(Dn=(0,K.b2)(),Mi=(0,K.f3)(Z.SceneID),Bi=(0,K.f3)(Z.IIconService),io=(0,K.f3)(Z.IFontService),co=(0,K.f3)(Z.IControlService),Sa=(0,K.f3)(Z.IGlobalConfigService),Ko=(0,K.f3)(Z.IMapService),Co=(0,K.f3)(Z.ICoordinateSystemService),Oo=(0,K.f3)(Z.IRendererService),Ho=(0,K.f3)(Z.ILayerService),Io=(0,K.f3)(Z.IDebugService),Js=(0,K.f3)(Z.ICameraService),Il=(0,K.f3)(Z.IInteractionService),Ao=(0,K.f3)(Z.IPickingService),Va=(0,K.f3)(Z.IShaderModuleService),gs=(0,K.f3)(Z.IMarkerService),Ws=(0,K.f3)(Z.IPopupService),Dn(bs=(Ps=function(ue){(0,ke.Z)(Mt,ue);var Rr=yc(Mt);function Mt(){var St;return(0,L.Z)(this,Mt),St=Rr.call(this),(0,Le.Z)((0,U.Z)(St),"destroyed",!1),(0,Le.Z)((0,U.Z)(St),"loaded",!1),(0,Yr.Z)((0,U.Z)(St),"id",Xs,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"iconService",gl,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"fontService",jf,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"controlService",Mu,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"configService",yl,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"map",lc,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"coordinateSystemService",Lc,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"rendererService",dh,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"layerService",_l,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"debugService",Us,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"cameraService",th,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"interactionService",Df,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"pickingService",Cf,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"shaderModuleService",lf,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"markerService",gd,(0,U.Z)(St)),(0,Yr.Z)((0,U.Z)(St),"popupService",Kh,(0,U.Z)(St)),(0,Le.Z)((0,U.Z)(St),"inited",!1),(0,Le.Z)((0,U.Z)(St),"initPromise",void 0),(0,Le.Z)((0,U.Z)(St),"rendering",!1),(0,Le.Z)((0,U.Z)(St),"$container",void 0),(0,Le.Z)((0,U.Z)(St),"canvas",void 0),(0,Le.Z)((0,U.Z)(St),"markerContainer",void 0),(0,Le.Z)((0,U.Z)(St),"hooks",void 0),(0,Le.Z)((0,U.Z)(St),"handleWindowResized",function(){St.emit("resize"),St.$container&&(St.initContainer(),Se.SO.triggerResize(),St.coordinateSystemService.needRefresh=!0,St.render())}),(0,Le.Z)((0,U.Z)(St),"handleMapCameraChanged",function(Vt){St.cameraService.update(Vt),St.render()}),St.hooks={init:new wr.sX},St}return(0,$.Z)(Mt,[{key:"init",value:function(Vt){var ar=this;this.configService.setSceneConfig(this.id,Vt),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return ar.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,wt.Z)(Re().mark(function Xr(){return Re().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:return ar.debugService.log("map.mapInitStart",{type:ar.map.version}),Sn.next=3,new Promise(function(Fn){ar.map.onCameraChanged(function(Ci){ar.cameraService.init(),ar.cameraService.update(Ci),Fn()}),ar.map.init()});case 3:ar.map.onCameraChanged(ar.handleMapCameraChanged),ar.map.addMarkerContainer(),ar.markerService.addMarkers(),ar.markerService.addMarkerLayers(),ar.popupService.initPopup(),ar.interactionService.init(),ar.interactionService.on(ka.Drag,ar.addSceneEvent.bind(ar));case 10:case"end":return Sn.stop()}},Xr)}))),this.hooks.init.tapPromise("initRenderer",(0,wt.Z)(Re().mark(function Xr(){var vn,Sn;return Re().wrap(function(Ci){for(;;)switch(Ci.prev=Ci.next){case 0:if(vn=ar.map.getOverlayContainer(),vn?ar.$container=vn:ar.$container=Go(ar.configService.getSceneConfig(ar.id).id||""),!ar.$container){Ci.next=13;break}return ar.canvas=Se.SO.create("canvas","",ar.$container),ar.setCanvas(),Ci.next=7,ar.rendererService.init(ar.canvas,ar.configService.getSceneConfig(ar.id),Vt.gl);case 7:ar.registerContextLost(),ar.initContainer(),In()(ar.$container,ar.handleWindowResized),Se.vO.matchMedia&&((Sn=Se.vO.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||Sn===void 0||Sn.addListener(ar.handleWindowResized)),Ci.next=14;break;case 13:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 14:ar.pickingService.init(ar.id);case 15:case"end":return Ci.stop()}},Xr)}))),this.render()}},{key:"registerContextLost",value:function(){var Vt=this,ar=this.rendererService.getCanvas();ar&&ar.addEventListener("webglcontextlost",function(){return Vt.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(Vt){var ar=this;this.configService.setSceneConfig(this.id,Vt),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return ar.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,wt.Z)(Re().mark(function Xr(){return Re().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:return Sn.next=2,new Promise(function(Fn){ar.map.onCameraChanged(function(Ci){ar.cameraService.init(),ar.cameraService.update(Ci),ar.map.version!=="GAODE2.x"&&Fn()}),ar.map.initMiniMap()});case 2:ar.map.onCameraChanged(ar.handleMapCameraChanged),ar.interactionService.init(),ar.interactionService.on(ka.Drag,ar.addSceneEvent.bind(ar));case 5:case"end":return Sn.stop()}},Xr)}))),this.hooks.init.tapPromise("initRenderer",(0,wt.Z)(Re().mark(function Xr(){var vn;return Re().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:if(vn=Vt.canvas,ar.$container=vn||null,!ar.$container){Fn.next=7;break}return Fn.next=5,ar.rendererService.init(Vt.canvas,ar.configService.getSceneConfig(ar.id),void 0);case 5:Fn.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:ar.pickingService.init(ar.id);case 9:case"end":return Fn.stop()}},Xr)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(Vt){this.layerService.sceneService=this,this.layerService.add(Vt)}},{key:"addMask",value:function(Vt){this.layerService.sceneService=this,this.layerService.addMask(Vt)}},{key:"render",value:function(){var St=(0,wt.Z)(Re().mark(function ar(){return Re().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:if(!(this.rendering||this.destroyed)){vn.next=2;break}return vn.abrupt("return");case 2:if(this.rendering=!0,this.inited){vn.next=16;break}return vn.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),vn.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,vn.next=20;break;case 16:return vn.next=18,this.layerService.initLayers();case 18:return vn.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return vn.stop()}},ar,this)}));function Vt(){return St.apply(this,arguments)}return Vt}()},{key:"addFontFace",value:function(Vt,ar){this.fontService.addFontFace(Vt,ar)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var St=(0,wt.Z)(Re().mark(function ar(Xr){var vn,Sn,Fn;return Re().wrap(function(Hi){for(;;)switch(Hi.prev=Hi.next){case 0:return Sn=(vn=this.$container)===null||vn===void 0?void 0:vn.getElementsByTagName("canvas")[0],Hi.next=3,this.render();case 3:return Fn=Xr==="jpg"?Sn==null?void 0:Sn.toDataURL("image/jpeg"):Sn==null?void 0:Sn.toDataURL("image/png"),Hi.abrupt("return",Fn);case 5:case"end":return Hi.stop()}},ar,this)}));function Vt(ar){return St.apply(this,arguments)}return Vt}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var Vt=this.$container.parentElement;Vt!==null&&(this.markerContainer=Se.SO.create("div","l7-marker-container",Vt))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var Vt=this,ar,Xr;if(!this.inited){this.destroyed=!0;return}if((0,Wr.unbind)(this.$container,this.handleWindowResized),Se.vO.matchMedia){var vn;(vn=Se.vO.matchMedia("screen and (min-resolution: 2dppx)"))===null||vn===void 0||vn.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var Sn;(Sn=Vt.$container)===null||Sn===void 0||Sn.removeChild(Vt.canvas),Vt.canvas=null,Vt.rendererService.destroy()}),(ar=this.$container)===null||ar===void 0||(Xr=ar.parentNode)===null||Xr===void 0||Xr.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var Vt,ar,Xr=Se.SO.DPR,vn=((Vt=this.$container)===null||Vt===void 0?void 0:Vt.clientWidth)||400,Sn=((ar=this.$container)===null||ar===void 0?void 0:ar.clientHeight)||300,Fn=this.canvas;Fn&&(Fn.width=vn*Xr,Fn.height=Sn*Xr),this.rendererService.viewport({x:0,y:0,width:Xr*vn,height:Xr*Sn})}},{key:"setCanvas",value:function(){var Vt,ar,Xr=Se.SO.DPR,vn=((Vt=this.$container)===null||Vt===void 0?void 0:Vt.clientWidth)||400,Sn=((ar=this.$container)===null||ar===void 0?void 0:ar.clientHeight)||300,Fn=this.canvas;Fn.width=vn*Xr,Fn.height=Sn*Xr,Fn.style.width="100%",Fn.style.height="100%"}},{key:"addSceneEvent",value:function(Vt){this.emit(Vt.type,Vt)}}]),Mt}(M.EventEmitter),Xs=(0,Tn.Z)(Ps.prototype,"id",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=(0,Tn.Z)(Ps.prototype,"iconService",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=(0,Tn.Z)(Ps.prototype,"fontService",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mu=(0,Tn.Z)(Ps.prototype,"controlService",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=(0,Tn.Z)(Ps.prototype,"configService",[Sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lc=(0,Tn.Z)(Ps.prototype,"map",[Ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lc=(0,Tn.Z)(Ps.prototype,"coordinateSystemService",[Co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dh=(0,Tn.Z)(Ps.prototype,"rendererService",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_l=(0,Tn.Z)(Ps.prototype,"layerService",[Ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Us=(0,Tn.Z)(Ps.prototype,"debugService",[Io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),th=(0,Tn.Z)(Ps.prototype,"cameraService",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Df=(0,Tn.Z)(Ps.prototype,"interactionService",[Il],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cf=(0,Tn.Z)(Ps.prototype,"pickingService",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lf=(0,Tn.Z)(Ps.prototype,"shaderModuleService",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=(0,Tn.Z)(Ps.prototype,"markerService",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh=(0,Tn.Z)(Ps.prototype,"popupService",[Ws],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ps))||bs);function Af(ue){var Rr=0;switch(ue){case"vec2":case"ivec2":Rr=2;break;case"vec3":case"ivec3":Rr=3;break;case"vec4":case"ivec4":case"mat2":Rr=4;break;case"mat3":Rr=9;break;case"mat4":Rr=16;break;default:}return Rr}var _f=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function kc(ue){var Rr={};return ue=ue.replace(_f,function(Mt,St,Vt){var ar=Vt.split(":"),Xr=ar[0].trim(),vn="";switch(ar.length>1&&(vn=ar[1].trim()),St){case"bool":vn=vn==="true";break;case"float":case"int":vn=Number(vn);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":vn?vn=vn.replace("[","").replace("]","").split(",").reduce(function(Sn,Fn){return Sn.push(Number(Fn.trim())),Sn},[]):vn=new Array(Af(St)).fill(0);break;default:}return Rr[Xr]=vn,"uniform ".concat(St," ").concat(Xr,`;
`)}),{content:ue,uniforms:Rr}}var Ff,Zl,Dc="#define PI 3.14159265359",ad=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,rh=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,od=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Yo=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Gs=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,Kl=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,dl=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,su=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Fc=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,tc=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,Tf=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,_c=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,Hl=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,ff=/precision\s+(high|low|medium)p\s+float/,xc=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Yh=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Uh=(Ff=(0,K.b2)(),Ff(Zl=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"moduleCache",{}),(0,Le.Z)(this,"rawContentCache",{})}return(0,$.Z)(ue,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:Dc,fs:Dc}),this.registerModule("decode",{vs:ad,fs:""}),this.registerModule("projection",{vs:dl,fs:""}),this.registerModule("project",{vs:Kl,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:su}),this.registerModule("lighting",{vs:od,fs:""}),this.registerModule("light",{vs:rh,fs:""}),this.registerModule("picking",{vs:Gs,fs:Yo}),this.registerModule("styleMapping",{vs:Fc,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:Hl,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:tc,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:Tf,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:_c,fs:""})}},{key:"registerModule",value:function(Mt,St){if(!this.rawContentCache[Mt]){var Vt=St.vs,ar=St.fs,Xr=St.uniforms,vn=kc(Vt),Sn=vn.content,Fn=vn.uniforms,Ci=kc(ar),Hi=Ci.content,ba=Ci.uniforms;this.rawContentCache[Mt]={fs:Hi,uniforms:(0,B.Z)((0,B.Z)((0,B.Z)({},Fn),ba),Xr),vs:Sn}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Mt){var St=this;if(this.moduleCache[Mt])return this.moduleCache[Mt];var Vt=this.rawContentCache[Mt].vs,ar=this.rawContentCache[Mt].fs,Xr=this.processModule(Vt,[],"vs"),vn=Xr.content,Sn=Xr.includeList,Fn=this.processModule(ar,[],"fs"),Ci=Fn.content,Hi=Fn.includeList,ba=Ci,mo=(0,zt.uniq)(Sn.concat(Hi).concat(Mt)).reduce(function(Qa,ks){return(0,B.Z)((0,B.Z)({},Qa),St.rawContentCache[ks].uniforms)},{});return ff.test(Ci)||(ba=xc+Ci),this.moduleCache[Mt]={fs:ba.trim(),uniforms:mo,vs:vn.trim()},this.moduleCache[Mt]}},{key:"processModule",value:function(Mt,St,Vt){var ar=this,Xr=Mt.replace(Yh,function(vn,Sn){var Fn=Sn.split(" "),Ci=Fn[0].replace(/"/g,"");if(St.indexOf(Ci)>-1)return"";var Hi=ar.rawContentCache[Ci][Vt];St.push(Ci);var ba=ar.processModule(Hi,St,Vt),mo=ba.content;return mo});return{content:Xr,includeList:St}}}]),ue}())||Zl),Gc=g(73237),Mf;(function(ue){ue.Normal="normal",ue.PostProcessing="post-processing"})(Mf||(Mf={}));var nh,qn,ca=(nh=(0,K.b2)(),nh(qn=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"shaderModuleService",void 0),(0,Le.Z)(this,"rendererService",void 0),(0,Le.Z)(this,"cameraService",void 0),(0,Le.Z)(this,"mapService",void 0),(0,Le.Z)(this,"interactionService",void 0),(0,Le.Z)(this,"layerService",void 0),(0,Le.Z)(this,"config",void 0)}return(0,$.Z)(ue,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Mf.Normal}},{key:"init",value:function(Mt,St){this.config=St,this.rendererService=Mt.getContainer().get(Z.IRendererService),this.cameraService=Mt.getContainer().get(Z.ICameraService),this.mapService=Mt.getContainer().get(Z.IMapService),this.interactionService=Mt.getContainer().get(Z.IInteractionService),this.layerService=Mt.getContainer().get(Z.ILayerService),this.shaderModuleService=Mt.getContainer().get(Z.IShaderModuleService)}},{key:"render",value:function(Mt){}}]),ue}())||qn),$i,$o;function lo(ue){var Rr=Es();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var tl=($i=(0,K.b2)(),$i($o=function(ue){(0,ke.Z)(Mt,ue);var Rr=lo(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(Vt,ar){(0,Gc.Z)((0,me.Z)(Mt.prototype),"init",this).call(this,Vt,ar)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Mt}(ca))||$o),al,Tl,Lh,xf,qh;function $h(ue,Rr){var Mt=typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(!Mt){if(Array.isArray(ue)||(Mt=Ul(ue))||Rr&&ue&&typeof ue.length=="number"){Mt&&(ue=Mt);var St=0,Vt=function(){};return{s:Vt,n:function(){return St>=ue.length?{done:!0}:{done:!1,value:ue[St++]}},e:function(Fn){throw Fn},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ar=!0,Xr=!1,vn;return{s:function(){Mt=Mt.call(ue)},n:function(){var Fn=Mt.next();return ar=Fn.done,Fn},e:function(Fn){Xr=!0,vn=Fn},f:function(){try{!ar&&Mt.return!=null&&Mt.return()}finally{if(Xr)throw vn}}}}function Ul(ue,Rr){if(ue){if(typeof ue=="string")return Rl(ue,Rr);var Mt=Object.prototype.toString.call(ue).slice(8,-1);if(Mt==="Object"&&ue.constructor&&(Mt=ue.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(ue);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return Rl(ue,Rr)}}function Rl(ue,Rr){(Rr==null||Rr>ue.length)&&(Rr=ue.length);for(var Mt=0,St=new Array(Rr);Mt<Rr;Mt++)St[Mt]=ue[Mt];return St}var ol=(al=(0,K.b2)(),Tl=(0,K.f3)(Z.IPostProcessor),al(Lh=(xf=function(){function ue(){(0,L.Z)(this,ue),(0,Le.Z)(this,"passes",[]),(0,Yr.Z)(this,"postProcessor",qh,this),(0,Le.Z)(this,"layer",void 0),(0,Le.Z)(this,"renderFlag",void 0),(0,Le.Z)(this,"width",0),(0,Le.Z)(this,"height",0)}return(0,$.Z)(ue,[{key:"setLayer",value:function(Mt){this.layer=Mt}},{key:"setRenderFlag",value:function(Mt){this.renderFlag=Mt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var Rr=(0,wt.Z)(Re().mark(function St(){var Vt,ar,Xr;return Re().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:Vt=$h(this.passes),Sn.prev=1,Vt.s();case 3:if((ar=Vt.n()).done){Sn.next=9;break}return Xr=ar.value,Sn.next=7,Xr.render(this.layer);case 7:Sn.next=3;break;case 9:Sn.next=14;break;case 11:Sn.prev=11,Sn.t0=Sn.catch(1),Vt.e(Sn.t0);case 14:return Sn.prev=14,Vt.f(),Sn.finish(14);case 17:return Sn.next=19,this.postProcessor.render(this.layer);case 19:case"end":return Sn.stop()}},St,this,[[1,11,14,17]])}));function Mt(){return Rr.apply(this,arguments)}return Mt}()},{key:"resize",value:function(Mt,St){(this.width!==Mt||this.height!==St)&&(this.postProcessor.resize(Mt,St),this.width=Mt,this.height=St)}},{key:"add",value:function(Mt,St){Mt.getType()===Mf.PostProcessing?this.postProcessor.add(Mt,this.layer,St):(Mt.init(this.layer,St),this.passes.push(Mt))}},{key:"insert",value:function(Mt,St,Vt){Mt.init(this.layer,St),this.passes.splice(Vt,0,Mt)}},{key:"destroy",value:function(){this.passes.length=0}}]),ue}(),qh=(0,Tn.Z)(xf.prototype,"postProcessor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xf))||Lh),uu,Bc;function cc(ue){var Rr=ao();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function ao(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Ml=(uu=(0,K.b2)(),uu(Bc=function(ue){(0,ke.Z)(Mt,ue);var Rr=cc(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Le.Z)((0,U.Z)(St),"pickingFBO",void 0),(0,Le.Z)((0,U.Z)(St),"layer",void 0),(0,Le.Z)((0,U.Z)(St),"width",0),(0,Le.Z)((0,U.Z)(St),"height",0),(0,Le.Z)((0,U.Z)(St),"alreadyInRendering",!1),(0,Le.Z)((0,U.Z)(St),"pickFromPickingFBO",function(vn){var Sn=vn.x,Fn=vn.y,Ci=vn.lngLat,Hi=vn.type;if(!(!St.layer.isVisible()||!St.layer.needPick(Hi))){var ba=St.rendererService,mo=ba.getViewportSize,Qa=ba.readPixels,ks=ba.useFramebuffer,Ts=mo(),lu=Ts.width,Iu=Ts.height,_u=St.layer.getLayerConfig(),Mc=_u.enableHighlight,tu=_u.enableSelect,Fl=Sn*Se.SO.DPR,Ys=Fn*Se.SO.DPR;if(!(Fl>lu||Fl<0||Ys>Iu||Ys<0)){var Du;ks(St.pickingFBO,function(){var Bu;if(Du=Qa({x:Math.round(Fl),y:Math.round(Iu-(Fn+1)*Se.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:St.pickingFBO}),Du[0]!==0||Du[1]!==0||Du[2]!==0){var Gl=(0,Se.W0)(Du),ru=St.layer.getSource().getFeatureById(Gl),pl={x:Sn,y:Fn,type:Hi,lngLat:Ci,featureId:Gl,feature:ru};ru&&(St.layer.setCurrentPickId(Gl),St.triggerHoverOnLayer(pl))}else{var ef={x:Sn,y:Fn,lngLat:Ci,type:St.layer.getCurrentPickId()===null?"un"+Hi:"mouseout",featureId:null,feature:null};St.triggerHoverOnLayer((0,B.Z)((0,B.Z)({},ef),{},{type:"unpick"})),St.triggerHoverOnLayer(ef),St.layer.setCurrentPickId(null)}Mc&&St.highlightPickedFeature(Du),tu&&Hi==="click"&&((Bu=Du)===null||Bu===void 0?void 0:Bu.toString())!==[0,0,0,0].toString()&&St.selectFeature(Du)})}}}),St}return(0,$.Z)(Mt,[{key:"getType",value:function(){return Mf.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(Vt,ar){(0,Gc.Z)((0,me.Z)(Mt.prototype),"init",this).call(this,Vt,ar),this.layer=Vt;var Xr=this.rendererService,vn=Xr.createTexture2D,Sn=Xr.createFramebuffer,Fn=Xr.getViewportSize,Ci=Fn(),Hi=Ci.width,ba=Ci.height;this.pickingFBO=Sn({color:vn({width:Hi,height:ba,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.interactionService.on(ka.Hover,this.pickFromPickingFBO),this.interactionService.on(ka.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(ka.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(Vt){var ar=this;if(!this.alreadyInRendering){var Xr=this.rendererService,vn=Xr.getViewportSize,Sn=Xr.useFramebuffer,Fn=Xr.clear,Ci=vn(),Hi=Ci.width,ba=Ci.height;this.alreadyInRendering=!0,(this.width!==Hi||this.height!==ba)&&(this.pickingFBO.resize({width:Hi,height:ba}),this.width=Hi,this.height=ba),Sn(this.pickingFBO,function(){Fn({framebuffer:ar.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var mo=ar.layer.multiPassRenderer.getRenderFlag();ar.layer.multiPassRenderer.setRenderFlag(!1),Vt.hooks.beforePickingEncode.call(),Vt.render(),Vt.hooks.afterPickingEncode.call(),ar.layer.multiPassRenderer.setRenderFlag(mo),ar.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(Vt){this.layer.emit(Vt.type,Vt)}},{key:"highlightPickedFeature",value:function(Vt){var ar=(0,ae.Z)(Vt,3),Xr=ar[0],vn=ar[1],Sn=ar[2];this.layer.hooks.beforeHighlight.call([Xr,vn,Sn]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(Vt){var ar=(0,ae.Z)(Vt,3),Xr=ar[0],vn=ar[1],Sn=ar[2];this.layer.hooks.beforeSelect.call([Xr,vn,Sn]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(Vt){var ar=Vt.featureId,Xr=(0,Se.Z6)(ar);this.selectFeature(new Uint8Array(Xr))}},{key:"highlightFeatureHandle",value:function(Vt){var ar=Vt.featureId,Xr=(0,Se.Z6)(ar);this.highlightPickedFeature(new Uint8Array(Xr))}}]),Mt}(ca))||Bc),Hf,fl,Vl,Ll,jh,qa=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Yl=(Hf=(0,K.b2)(),fl=(0,K.f3)(Z.IShaderModuleService),Hf(Vl=(Ll=function(){function ue(){(0,L.Z)(this,ue),(0,Yr.Z)(this,"shaderModuleService",jh,this),(0,Le.Z)(this,"rendererService",void 0),(0,Le.Z)(this,"config",void 0),(0,Le.Z)(this,"quad",qa),(0,Le.Z)(this,"enabled",!0),(0,Le.Z)(this,"renderToScreen",!1),(0,Le.Z)(this,"model",void 0),(0,Le.Z)(this,"name",void 0),(0,Le.Z)(this,"optionsToUpdate",{})}return(0,$.Z)(ue,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(Mt){this.name=Mt}},{key:"getType",value:function(){return Mf.PostProcessing}},{key:"init",value:function(Mt,St){this.config=St,this.rendererService=Mt.getContainer().get(Z.IRendererService),this.shaderModuleService=Mt.getContainer().get(Z.IShaderModuleService);var Vt=this.rendererService,ar=Vt.createAttribute,Xr=Vt.createBuffer,vn=Vt.createModel,Sn=this.setupShaders(),Fn=Sn.vs,Ci=Sn.fs,Hi=Sn.uniforms;this.model=vn({vs:Fn,fs:Ci,attributes:{a_Position:ar({buffer:Xr({data:[-4,-4,4,-4,0,4],type:za.FLOAT}),size:2})},uniforms:(0,B.Z)((0,B.Z)({u_Texture:null},Hi),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(Mt,St){var Vt=this,ar=Mt.multiPassRenderer.getPostProcessor(),Xr=this.rendererService,vn=Xr.useFramebuffer,Sn=Xr.getViewportSize,Fn=Xr.clear,Ci=Sn(),Hi=Ci.width,ba=Ci.height;vn(this.renderToScreen?null:ar.getWriteFBO(),function(){Fn({framebuffer:ar.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var mo=(0,B.Z)({u_BloomFinal:0,u_Texture:ar.getReadFBO(),u_ViewportSize:[Hi,ba]},Vt.convertOptionsToUniforms(Vt.optionsToUpdate));St&&(mo.u_BloomFinal=1,mo.u_Texture2=St),Vt.model.draw({uniforms:mo})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(Mt){this.enabled=Mt}},{key:"setRenderToScreen",value:function(Mt){this.renderToScreen=Mt}},{key:"updateOptions",value:function(Mt){this.optionsToUpdate=(0,B.Z)((0,B.Z)({},this.optionsToUpdate),Mt)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(Mt){var St={};return Object.keys(Mt).forEach(function(Vt){(0,zt.isNil)(Mt[Vt])||(St["u_".concat((0,zt.upperFirst)((0,zt.camelCase)(Vt)))]=Mt[Vt])}),St}}]),ue}(),jh=(0,Tn.Z)(Ll.prototype,"shaderModuleService",[fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ll))||Vl),Vf,ih;function Vu(ue){var Rr=hf();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function hf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Hh=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ec=(Vf=(0,K.b2)(),Vf(ih=function(ue){(0,ke.Z)(Mt,ue);var Rr=Vu(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:bc,fs:Hh});var Vt=this.shaderModuleService.getModule("blur-pass"),ar=Vt.vs,Xr=Vt.fs,vn=Vt.uniforms,Sn=this.rendererService.getViewportSize(),Fn=Sn.width,Ci=Sn.height;return{vs:ar,fs:Xr,uniforms:(0,B.Z)((0,B.Z)({},vn),{},{u_ViewportSize:[Fn,Ci]})}}},{key:"convertOptionsToUniforms",value:function(Vt){var ar={};return(0,zt.isNil)(Vt.bloomRadius)||(ar.u_radius=Vt.bloomRadius),(0,zt.isNil)(Vt.bloomIntensity)||(ar.u_intensity=Vt.bloomIntensity),(0,zt.isNil)(Vt.bloomBaseRadio)||(ar.u_baseRadio=Vt.bloomBaseRadio),ar}}]),Mt}(Yl))||ih),ah,Wc;function kh(ue){var Rr=Sc();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Sc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Vh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,ql=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gu=(ah=(0,K.b2)(),ah(Wc=function(ue){(0,ke.Z)(Mt,ue);var Rr=kh(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ql,fs:Vh});var Vt=this.shaderModuleService.getModule("blur-pass"),ar=Vt.vs,Xr=Vt.fs,vn=Vt.uniforms,Sn=this.rendererService.getViewportSize(),Fn=Sn.width,Ci=Sn.height;return{vs:ar,fs:Xr,uniforms:(0,B.Z)((0,B.Z)({},vn),{},{u_ViewportSize:[Fn,Ci]})}}},{key:"convertOptionsToUniforms",value:function(Vt){var ar={};return(0,zt.isNil)(Vt.blurRadius)||(ar.u_BlurDir=[Vt.blurRadius,0]),ar}}]),Mt}(Yl))||Wc),Ks,Gf;function Bf(ue){var Rr=eu();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function eu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Pl=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Xc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Nc=(Ks=(0,K.b2)(),Ks(Gf=function(ue){(0,ke.Z)(Mt,ue);var Rr=Bf(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Xc,fs:Pl});var Vt=this.shaderModuleService.getModule("blur-pass"),ar=Vt.vs,Xr=Vt.fs,vn=Vt.uniforms,Sn=this.rendererService.getViewportSize(),Fn=Sn.width,Ci=Sn.height;return{vs:ar,fs:Xr,uniforms:(0,B.Z)((0,B.Z)({},vn),{},{u_ViewportSize:[Fn,Ci]})}}},{key:"convertOptionsToUniforms",value:function(Vt){var ar={};return(0,zt.isNil)(Vt.blurRadius)||(ar.u_BlurDir=[0,Vt.blurRadius]),ar}}]),Mt}(Yl))||Gf),Ql,fc;function oo(ue){var Rr=Do();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Do(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var nu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Jl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,xl=(Ql=(0,K.b2)(),Ql(fc=function(ue){(0,ke.Z)(Mt,ue);var Rr=oo(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Jl,fs:nu});var Vt=this.shaderModuleService.getModule("colorhalftone-pass"),ar=Vt.vs,Xr=Vt.fs,vn=Vt.uniforms,Sn=this.rendererService.getViewportSize(),Fn=Sn.width,Ci=Sn.height;return{vs:ar,fs:Xr,uniforms:(0,B.Z)((0,B.Z)({},vn),{},{u_ViewportSize:[Fn,Ci]})}}}]),Mt}(Yl))||fc),mu,Ku;function Kc(ue){var Rr=Gh();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Gh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Yu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,bl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,yd=(mu=(0,K.b2)(),mu(Ku=function(ue){(0,ke.Z)(Mt,ue);var Rr=Kc(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:bl,fs:Yu}),this.shaderModuleService.getModule("copy-pass")}}]),Mt}(Yl))||Ku),ph,wc;function Yc(ue){var Rr=kl();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function kl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Dr=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Dl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Vo=(ph=(0,K.b2)(),ph(wc=function(ue){(0,ke.Z)(Mt,ue);var Rr=Yc(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Dl,fs:Dr});var Vt=this.shaderModuleService.getModule("hexagonalpixelate-pass"),ar=Vt.vs,Xr=Vt.fs,vn=Vt.uniforms,Sn=this.rendererService.getViewportSize(),Fn=Sn.width,Ci=Sn.height;return{vs:ar,fs:Xr,uniforms:(0,B.Z)((0,B.Z)({},vn),{},{u_ViewportSize:[Fn,Ci]})}}}]),Mt}(Yl))||wc),qo,du;function Dh(ue){var Rr=Wf();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Wf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var zc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,df=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,rc=(qo=(0,K.b2)(),qo(du=function(ue){(0,ke.Z)(Mt,ue);var Rr=Dh(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:df,fs:zc});var Vt=this.shaderModuleService.getModule("ink-pass"),ar=Vt.vs,Xr=Vt.fs,vn=Vt.uniforms,Sn=this.rendererService.getViewportSize(),Fn=Sn.width,Ci=Sn.height;return{vs:ar,fs:Xr,uniforms:(0,B.Z)((0,B.Z)({},vn),{},{u_ViewportSize:[Fn,Ci]})}}}]),Mt}(Yl))||du),ys,bf;function Xf(ue){var Rr=rl();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function rl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Cc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Zc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,sd=(ys=(0,K.b2)(),ys(bf=function(ue){(0,ke.Z)(Mt,ue);var Rr=Xf(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Zc,fs:Cc}),this.shaderModuleService.getModule("noise-pass")}}]),Mt}(Yl))||bf),qc,f;function m(ue){var Rr=p();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function p(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var E=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Y=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Ce=(qc=(0,K.b2)(),qc(f=function(ue){(0,ke.Z)(Mt,ue);var Rr=m(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:E,fs:Y}),this.shaderModuleService.getModule("sepia-pass")}}]),Mt}(Yl))||f),ze,gt,Gt,sr,Mr,Or,Br=(ze=(0,K.b2)(),gt=(0,K.f3)(Z.IRendererService),Gt=(0,K.zY)(),ze(sr=(Mr=function(){function ue(){(0,L.Z)(this,ue),(0,Yr.Z)(this,"rendererService",Or,this),(0,Le.Z)(this,"passes",[]),(0,Le.Z)(this,"readFBO",void 0),(0,Le.Z)(this,"writeFBO",void 0)}return(0,$.Z)(ue,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var Mt=this.rendererService,St=Mt.getViewportSize,Vt=Mt.createTexture2D,ar=St(),Xr=ar.width,vn=ar.height;return Vt({x:0,y:0,width:Xr,height:vn,copy:!0})}},{key:"getReadFBOTex",value:function(){var Mt=this,St=this.rendererService.useFramebuffer;return new Promise(function(Vt){St(Mt.readFBO,(0,wt.Z)(Re().mark(function ar(){return Re().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:Vt(Mt.getCurrentFBOTex());case 1:case"end":return vn.stop()}},ar)})))})}},{key:"renderBloomPass",value:function(){var Rr=(0,wt.Z)(Re().mark(function St(Vt,ar){var Xr,vn;return Re().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Fn.next=2,this.getReadFBOTex();case 2:Xr=Fn.sent,vn=0;case 4:if(!(vn<4)){Fn.next=11;break}return Fn.next=7,ar.render(Vt,Xr);case 7:this.swap(),vn++,Fn.next=4;break;case 11:case"end":return Fn.stop()}},St,this)}));function Mt(St,Vt){return Rr.apply(this,arguments)}return Mt}()},{key:"render",value:function(){var Rr=(0,wt.Z)(Re().mark(function St(Vt){var ar,Xr;return Re().wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:ar=0;case 1:if(!(ar<this.passes.length)){Sn.next=15;break}if(Xr=this.passes[ar],Xr.setRenderToScreen(this.isLastEnabledPass(ar)),Xr.getName()!=="bloom"){Sn.next=9;break}return Sn.next=7,this.renderBloomPass(Vt,Xr);case 7:Sn.next=12;break;case 9:return Sn.next=11,Xr.render(Vt);case 11:ar!==this.passes.length-1&&this.swap();case 12:ar++,Sn.next=1;break;case 15:case"end":return Sn.stop()}},St,this)}));function Mt(St){return Rr.apply(this,arguments)}return Mt}()},{key:"resize",value:function(Mt,St){this.readFBO.resize({width:Mt,height:St}),this.writeFBO.resize({width:Mt,height:St})}},{key:"add",value:function(Mt,St,Vt){Mt.init(St,Vt),this.passes.push(Mt)}},{key:"insert",value:function(Mt,St,Vt,ar){Mt.init(Vt,ar),this.passes.splice(St,0,Mt)}},{key:"getPostProcessingPassByName",value:function(Mt){return this.passes.find(function(St){return St.getName()===Mt})}},{key:"init",value:function(){var Mt=this.rendererService,St=Mt.createFramebuffer,Vt=Mt.createTexture2D;this.readFBO=St({color:Vt({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.writeFBO=St({color:Vt({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(Mt){for(var St=Mt+1;St<this.passes.length;St++)if(this.passes[St].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Mt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Mt}}]),ue}(),Or=(0,Tn.Z)(Mr.prototype,"rendererService",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,Tn.Z)(Mr.prototype,"init",[Gt],Object.getOwnPropertyDescriptor(Mr.prototype,"init"),Mr.prototype),Mr))||sr),yn,hn;function kn(ue){var Rr=an();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function an(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Rn=(yn=(0,K.b2)(),yn(hn=function(ue){(0,ke.Z)(Mt,ue);var Rr=kn(Mt);function Mt(){return(0,L.Z)(this,Mt),Rr.apply(this,arguments)}return(0,$.Z)(Mt,[{key:"getType",value:function(){return Mf.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(Vt,ar){(0,Gc.Z)((0,me.Z)(Mt.prototype),"init",this).call(this,Vt,ar)}},{key:"render",value:function(Vt){var ar=this.rendererService,Xr=ar.useFramebuffer,vn=ar.clear,Sn=Vt.multiPassRenderer.getPostProcessor().getReadFBO();Xr(Sn,function(){vn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Sn}),Vt.multiPassRenderer.setRenderFlag(!1),Vt.models.forEach(function(Fn){Fn.draw({uniforms:Vt.layerModel.getUninforms()})}),Vt.multiPassRenderer.setRenderFlag(!0)})}}]),Mt}(ca))||hn),$n,di,Di,Ti,Fi;function ra(ue){var Rr=Da();return function(){var St=(0,me.Z)(ue),Vt;if(Rr){var ar=(0,me.Z)(this).constructor;Vt=Reflect.construct(St,arguments,ar)}else Vt=St.apply(this,arguments);return(0,We.Z)(this,Vt)}}function Da(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ue){return!1}}var Na=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,po=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,No=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function is(ue,Rr){for(var Mt=0,St=1/Rr,Vt=ue;Vt>0;)Mt=Mt+St*(Vt%Rr),Vt=Math.floor(Vt/Rr),St=St/Rr;return Mt}var rs=1,Ls=($n=(0,K.b2)(),di=(0,K.f3)(Z.IShaderModuleService),$n(Di=(Ti=function(ue){(0,ke.Z)(Mt,ue);var Rr=ra(Mt);function Mt(){var St;(0,L.Z)(this,Mt);for(var Vt=arguments.length,ar=new Array(Vt),Xr=0;Xr<Vt;Xr++)ar[Xr]=arguments[Xr];return St=Rr.call.apply(Rr,[this].concat(ar)),(0,Yr.Z)((0,U.Z)(St),"shaderModuleService",Fi,(0,U.Z)(St)),(0,Le.Z)((0,U.Z)(St),"haltonSequence",[]),(0,Le.Z)((0,U.Z)(St),"accumulatingId",0),(0,Le.Z)((0,U.Z)(St),"frame",0),(0,Le.Z)((0,U.Z)(St),"timer",void 0),(0,Le.Z)((0,U.Z)(St),"sampleRenderTarget",void 0),(0,Le.Z)((0,U.Z)(St),"prevRenderTarget",void 0),(0,Le.Z)((0,U.Z)(St),"outputRenderTarget",void 0),(0,Le.Z)((0,U.Z)(St),"copyRenderTarget",void 0),(0,Le.Z)((0,U.Z)(St),"blendModel",void 0),(0,Le.Z)((0,U.Z)(St),"outputModel",void 0),(0,Le.Z)((0,U.Z)(St),"copyModel",void 0),St}return(0,$.Z)(Mt,[{key:"getType",value:function(){return Mf.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(Vt,ar){(0,Gc.Z)((0,me.Z)(Mt.prototype),"init",this).call(this,Vt,ar);var Xr=this.rendererService,vn=Xr.createFramebuffer,Sn=Xr.createTexture2D;this.sampleRenderTarget=vn({color:Sn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.prevRenderTarget=vn({color:Sn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.outputRenderTarget=vn({color:Sn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.copyRenderTarget=vn({color:Sn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})});for(var Fn=0;Fn<30;Fn++)this.haltonSequence.push([is(Fn,2),is(Fn,3)]);this.blendModel=this.createTriangleModel("blend-pass",Na),this.outputModel=this.createTriangleModel("copy-pass",po,{blend:{enable:!0,func:{srcRGB:za.ONE,dstRGB:za.ONE_MINUS_SRC_ALPHA,srcAlpha:za.ONE,dstAlpha:za.ONE_MINUS_SRC_ALPHA},equation:{rgb:za.FUNC_ADD,alpha:za.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",po)}},{key:"render",value:function(Vt){var ar=this,Xr=this.rendererService,vn=Xr.clear,Sn=Xr.getViewportSize,Fn=Xr.useFramebuffer,Ci=Sn(),Hi=Ci.width,ba=Ci.height;this.sampleRenderTarget.resize({width:Hi,height:ba}),this.prevRenderTarget.resize({width:Hi,height:ba}),this.outputRenderTarget.resize({width:Hi,height:ba}),this.copyRenderTarget.resize({width:Hi,height:ba}),this.resetFrame(),this.stopAccumulating();var mo=Vt.multiPassRenderer.getPostProcessor().getReadFBO();Fn(mo,function(){vn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:mo}),Vt.multiPassRenderer.setRenderFlag(!1),Vt.render(),Vt.multiPassRenderer.setRenderFlag(!0)});var Qa=function ks(Ts){!ar.accumulatingId||Ts!==ar.accumulatingId||ar.isFinished()||(ar.doRender(Vt),Se.vO.requestAnimationFrame(function(){ks(Ts)}))};this.accumulatingId=rs++,this.timer=Se.vO.setTimeout(function(){Qa(ar.accumulatingId)},50)}},{key:"doRender",value:function(Vt){var ar=this,Xr=this.rendererService,vn=Xr.clear,Sn=Xr.getViewportSize,Fn=Xr.useFramebuffer,Ci=Sn(),Hi=Ci.width,ba=Ci.height,mo=Vt.getLayerConfig(),Qa=mo.jitterScale,ks=Qa===void 0?1:Qa,Ts=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Ts[0]*2-1)/Hi*ks,(Ts[1]*2-1)/ba*ks),Vt.multiPassRenderer.setRenderFlag(!1),Vt.hooks.beforeRender.call(),Fn(this.sampleRenderTarget,function(){vn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:ar.sampleRenderTarget}),Vt.render()}),Vt.hooks.afterRender.call(),Vt.multiPassRenderer.setRenderFlag(!0);var lu=Vt.getLayerConfig();Fn(this.outputRenderTarget,function(){ar.blendModel.draw({uniforms:{u_opacity:lu.opacity||1,u_MixRatio:ar.frame===0?1:.9,u_Diffuse1:ar.sampleRenderTarget,u_Diffuse2:ar.frame===0?Vt.multiPassRenderer.getPostProcessor().getReadFBO():ar.prevRenderTarget}})}),this.frame===0&&vn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(Fn(this.copyRenderTarget,function(){ar.outputModel.draw({uniforms:{u_Texture:ar.outputRenderTarget}})}),Fn(Vt.multiPassRenderer.getPostProcessor().getReadFBO(),function(){ar.copyModel.draw({uniforms:{u_Texture:ar.copyRenderTarget}})}),Vt.multiPassRenderer.getPostProcessor().render(Vt));var Iu=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Iu,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,Se.vO.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(Vt,ar,Xr){this.shaderModuleService.registerModule(Vt,{vs:No,fs:ar});var vn=this.shaderModuleService.getModule(Vt),Sn=vn.vs,Fn=vn.fs,Ci=vn.uniforms,Hi=this.rendererService,ba=Hi.createAttribute,mo=Hi.createBuffer,Qa=Hi.createModel;return Qa((0,B.Z)({vs:Sn,fs:Fn,attributes:{a_Position:ba({buffer:mo({data:[-4,-4,4,-4,0,4],type:za.FLOAT}),size:2})},uniforms:(0,B.Z)({},Ci),depth:{enable:!1},count:3},Xr))}}]),Mt}(ca),Fi=(0,Tn.Z)(Ti.prototype,"shaderModuleService",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ti))||Di),vo=new K.W2;vo.bind(Z.IGlobalConfigService).to(tt).inSingletonScope(),(0,K.GW)((0,K.b2)(),M.EventEmitter),vo.bind(Z.IEventEmitter).to(M.EventEmitter);var ds=(0,N.Z)(vo,!1),Ns=function(Rr){var Mt=ds.lazyInject(Rr);return function(St,Vt,ar){Mt.call(this,St,Vt),ar&&(ar.initializer=function(){return St[Vt]})}},cs=function(Rr){var Mt=ds.lazyMultiInject(Rr);return function(St,Vt,ar){Mt.call(this,St,Vt),ar&&(ar.initializer=function(){return St[Vt]})}},Qo=vo,$s=0;function Cs(){var ue=new K.W2;return ue.parent=vo,ue.bind(Z.SceneID).toConstantValue("".concat($s++)),ue.bind(Z.IShaderModuleService).to(Uh).inSingletonScope(),ue.bind(Z.ILayerService).to(Pr).inSingletonScope(),ue.bind(Z.IDebugService).to(Ca).inSingletonScope(),ue.bind(Z.ISceneService).to(cf).inSingletonScope(),ue.bind(Z.ICameraService).to(ot).inSingletonScope(),ue.bind(Z.ICoordinateSystemService).to(An).inSingletonScope(),ue.bind(Z.IInteractionService).to(Jo).inSingletonScope(),ue.bind(Z.IPickingService).to(kr).inSingletonScope(),ue.bind(Z.IControlService).to(un).inSingletonScope(),ue.bind(Z.IMarkerService).to(Nr).inSingletonScope(),ue.bind(Z.IIconService).to(W).inSingletonScope(),ue.bind(Z.IFontService).to(Ge).inSingletonScope(),ue.bind(Z.IPopupService).to(Pt).inSingletonScope(),ue.bind(Z.INormalPass).to(tl).whenTargetNamed("clear"),ue.bind(Z.INormalPass).to(Ml).whenTargetNamed("pixelPicking"),ue.bind(Z.INormalPass).to(Rn).whenTargetNamed("render"),ue.bind(Z.INormalPass).to(Ls).whenTargetNamed("taa"),ue.bind(Z.IFactoryNormalPass).toFactory(function(Rr){return function(Mt){return Rr.container.getNamed(Z.INormalPass,Mt)}}),ue.bind(Z.IPostProcessingPass).to(yd).whenTargetNamed("copy"),ue.bind(Z.IPostProcessingPass).to(Ec).whenTargetNamed("bloom"),ue.bind(Z.IPostProcessingPass).to(gu).whenTargetNamed("blurH"),ue.bind(Z.IPostProcessingPass).to(Nc).whenTargetNamed("blurV"),ue.bind(Z.IPostProcessingPass).to(sd).whenTargetNamed("noise"),ue.bind(Z.IPostProcessingPass).to(Ce).whenTargetNamed("sepia"),ue.bind(Z.IPostProcessingPass).to(xl).whenTargetNamed("colorHalftone"),ue.bind(Z.IPostProcessingPass).to(Vo).whenTargetNamed("hexagonalPixelate"),ue.bind(Z.IPostProcessingPass).to(rc).whenTargetNamed("ink"),ue.bind(Z.IFactoryPostProcessingPass).toFactory(function(Rr){return function(Mt){var St=Rr.container.getNamed(Z.IPostProcessingPass,Mt);return St.setName(Mt),St}}),ue}function _s(ue){var Rr=new K.W2;return Rr.parent=ue,Rr.bind(Z.IStyleAttributeService).to(nr).inSingletonScope(),Rr.bind(Z.IMultiPassRenderer).to(ol).inSingletonScope(),Rr.bind(Z.IPostProcessor).to(Br).inSingletonScope(),Rr}var El=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function nl(ue){return El.indexOf(ue)}var qu=2,Ac=4,Qu=64,Ju=128,Tc=256,ec=512,Pf=8192,Ef=16384,$l=32768,Uc=null,Qh=131072,Jh=262144,Sh=524288,Of=1048576,wh=2097152,pf=4194304,oh=8388608,Qc=16777216,nc=null;function ic(ue,Rr){return ue=(0,zt.clamp)(Math.floor(ue),0,255),Rr=(0,zt.clamp)(Math.floor(Rr),0,255),256*ue+Rr}function Ch(ue){var Rr=ue.color,Mt=ue.radius,St=ue.tileX,Vt=ue.tileY,ar=ue.shape,Xr=ue.opacity,vn=ue.stroke,Sn=ue.strokeWidth,Fn=ue.strokeOpacity,Ci=[],Hi=[],ba=[],mo=[ic(Rr[0],Rr[1]),ic(Rr[2],Rr[3])],Qa=[ic(vn[0],vn[1]),ic(vn[2],vn[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(ks){var Ts=(0,ae.Z)(ks,2),lu=Ts[0],Iu=Ts[1];Ci.push([].concat(mo,[(lu+1)*oh+(Iu+1)*wh+nl(ar)*Qh+Mt,(St+512)*Sh+(Vt+512)*Qu])),Hi.push([].concat(Qa,[Sn,Fn])),ba.push([Xr,0,0,0])}),{packedBuffer:Ci,packedBuffer2:Hi,packedBuffer3:ba}}function Fh(ue,Rr){if(ue===0&&!Rr)return 0;if(ue===1&&Rr)return 4294967295;var Mt=Rr?1:0,St=Math.floor(ue*127);return St*nc+Mt*Qc+St*Qh+Mt*Uc+St*ec+Mt*Tc+St*qu+Mt}var ku={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},yu={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},Jc;(function(ue){ue.normal="normal",ue.additive="additive",ue.subtractive="subtractive",ue.min="min",ue.max="max",ue.none="none"})(Jc||(Jc={}));var sh;(function(ue){ue.INIT="init",ue.UPDATE="update"})(sh||(sh={}));var vh;(function(ue){ue.LINEAR="linear",ue.SEQUENTIAL="sequential",ue.POWER="power",ue.LOG="log",ue.IDENTITY="identity",ue.TIME="time",ue.QUANTILE="quantile",ue.QUANTIZE="quantize",ue.THRESHOLD="threshold",ue.CAT="cat",ue.DIVERGING="diverging"})(vh||(vh={}));var Nf;(function(ue){ue.CONSTANT="constant",ue.VARIABLE="variable"})(Nf||(Nf={}));var mh;(function(ue){ue[ue.Attribute=0]="Attribute",ue[ue.InstancedAttribute=1]="InstancedAttribute",ue[ue.Uniform=2]="Uniform"})(mh||(mh={}));var If=["mapload","mapchange","mapAfterFrameChange"],Rf=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],vf;(function(ue){ue.IMAGE="image",ue.ARRAYBUFFER="arraybuffer",ue.RGB="rgb",ue.CUSTOMRGB="customRGB",ue.CUSTOMARRAYBUFFER="customArrayBuffer"})(vf||(vf={}))},67135:function(vt,Ee,g){(function(v,M){M(Ee,g(70844))})(this,function(v,M){"use strict";var c={draw:"crosshair",pointHover:"pointer",pointDrag:"move",lineHover:"pointer",lineDrag:"move",polygonHover:"pointer",polygonDrag:"move"},K={point:[],line:[],polygon:[],midPoint:[],dashLine:[],text:[]},N="top",Z="bottom",B="right",L="left",$="auto",U=[N,Z,B,L],ke="start",We="end",me="viewport",Le="popper",Se=U.reduce(function(b,A){return b.concat([A+"-"+ke,A+"-"+We])},[]),et=[].concat(U,[$]).reduce(function(b,A){return b.concat([A,A+"-"+ke,A+"-"+We])},[]),at=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Lt(b){return b?(b.nodeName||"").toLowerCase():null}function Et(b){if(b==null)return window;if(""+b!="[object Window]"){var A=b.ownerDocument;return A&&A.defaultView||window}return b}function jt(b){return b instanceof Et(b).Element||b instanceof Element}function pe(b){return b instanceof Et(b).HTMLElement||b instanceof HTMLElement}function $e(b){return typeof ShadowRoot!="undefined"&&(b instanceof Et(b).ShadowRoot||b instanceof ShadowRoot)}var ye={name:"applyStyles",enabled:!0,phase:"write",fn:function(b){var A=b.state;Object.keys(A.elements).forEach(function(I){var T=A.styles[I]||{},H=A.attributes[I]||{},te=A.elements[I];pe(te)&&Lt(te)&&(Object.assign(te.style,T),Object.keys(H).forEach(function(Ae){var qe=H[Ae];qe===!1?te.removeAttribute(Ae):te.setAttribute(Ae,qe===!0?"":qe)}))})},effect:function(b){var A=b.state,I={popper:{position:A.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(A.elements.popper.style,I.popper),A.styles=I,A.elements.arrow&&Object.assign(A.elements.arrow.style,I.arrow),function(){Object.keys(A.elements).forEach(function(T){var H=A.elements[T],te=A.attributes[T]||{},Ae=Object.keys(A.styles.hasOwnProperty(T)?A.styles[T]:I[T]).reduce(function(qe,Tt){return qe[Tt]="",qe},{});pe(H)&&Lt(H)&&(Object.assign(H.style,Ae),Object.keys(te).forEach(function(qe){H.removeAttribute(qe)}))})}},requires:["computeStyles"]};function ie(b){return b.split("-")[0]}var re=Math.max,De=Math.min,le=Math.round;function ge(){var b=navigator.userAgentData;return b!=null&&b.brands?b.brands.map(function(A){return A.brand+"/"+A.version}).join(" "):navigator.userAgent}function ce(){return!/^((?!chrome|android).)*safari/i.test(ge())}function je(b,A,I){A===void 0&&(A=!1),I===void 0&&(I=!1);var T=b.getBoundingClientRect(),H=1,te=1;A&&pe(b)&&(H=b.offsetWidth>0&&le(T.width)/b.offsetWidth||1,te=b.offsetHeight>0&&le(T.height)/b.offsetHeight||1);var Ae=(jt(b)?Et(b):window).visualViewport,qe=!ce()&&I,Tt=(T.left+(qe&&Ae?Ae.offsetLeft:0))/H,Wt=(T.top+(qe&&Ae?Ae.offsetTop:0))/te,vr=T.width/H,Fr=T.height/te;return{width:vr,height:Fr,top:Wt,right:Tt+vr,bottom:Wt+Fr,left:Tt,x:Tt,y:Wt}}function J(b){var A=je(b),I=b.offsetWidth,T=b.offsetHeight;return Math.abs(A.width-I)>1||(I=A.width),Math.abs(A.height-T)>1||(T=A.height),{x:b.offsetLeft,y:b.offsetTop,width:I,height:T}}function Me(b,A){var I=A.getRootNode&&A.getRootNode();if(b.contains(A))return!0;if(I&&$e(I)){var T=A;do{if(T&&b.isSameNode(T))return!0;T=T.parentNode||T.host}while(T)}return!1}function ne(b){return Et(b).getComputedStyle(b)}function xe(b){return["table","td","th"].indexOf(Lt(b))>=0}function Ne(b){return((jt(b)?b.ownerDocument:b.document)||window.document).documentElement}function Pe(b){return Lt(b)==="html"?b:b.assignedSlot||b.parentNode||($e(b)?b.host:null)||Ne(b)}function He(b){return pe(b)&&ne(b).position!=="fixed"?b.offsetParent:null}function lt(b){for(var A=Et(b),I=He(b);I&&xe(I)&&ne(I).position==="static";)I=He(I);return I&&(Lt(I)==="html"||Lt(I)==="body"&&ne(I).position==="static")?A:I||function(T){var H=/firefox/i.test(ge());if(/Trident/i.test(ge())&&pe(T)&&ne(T).position==="fixed")return null;var te=Pe(T);for($e(te)&&(te=te.host);pe(te)&&0>["html","body"].indexOf(Lt(te));){var Ae=ne(te);if(Ae.transform!=="none"||Ae.perspective!=="none"||Ae.contain==="paint"||["transform","perspective"].indexOf(Ae.willChange)!==-1||H&&Ae.willChange==="filter"||H&&Ae.filter&&Ae.filter!=="none")return te;te=te.parentNode}return null}(b)||A}function ft(b){return 0>["top","bottom"].indexOf(b)?"y":"x"}function It(b,A,I){return re(b,De(A,I))}function fe(b){return Object.assign({},{top:0,right:0,bottom:0,left:0},b)}function _t(b,A){return A.reduce(function(I,T){return I[T]=b,I},{})}var Ye={name:"arrow",enabled:!0,phase:"main",fn:function(b){var A,I=b.state,T=b.name,H=b.options,te=I.elements.arrow,Ae=I.modifiersData.popperOffsets,qe=ie(I.placement),Tt=ft(qe),Wt=[L,B].indexOf(qe)>=0?"height":"width";if(te&&Ae){var vr=function(hi,vi){return fe(typeof(hi=typeof hi=="function"?hi(Object.assign({},vi.rects,{placement:vi.placement})):hi)!="number"?hi:_t(hi,U))}(H.padding,I),Fr=J(te),en=Tt==="y"?N:L,zn=Tt==="y"?Z:B,ei=I.rects.reference[Wt]+I.rects.reference[Tt]-Ae[Tt]-I.rects.popper[Wt],Qn=Ae[Tt]-I.rects.reference[Tt],_n=lt(te),Xn=_n?Tt==="y"?_n.clientHeight||0:_n.clientWidth||0:0,ai=Xn/2-Fr[Wt]/2+(ei/2-Qn/2),nn=It(vr[en],ai,Xn-Fr[Wt]-vr[zn]);I.modifiersData[T]=((A={})[Tt]=nn,A.centerOffset=nn-ai,A)}},effect:function(b){var A=b.state,I=b.options.element,T=I===void 0?"[data-popper-arrow]":I;T!=null&&(typeof T!="string"||(T=A.elements.popper.querySelector(T)))&&Me(A.elements.popper,T)&&(A.elements.arrow=T)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ot(b){return b.split("-")[1]}var mt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Rt(b){var A,I=b.popper,T=b.popperRect,H=b.placement,te=b.variation,Ae=b.offsets,qe=b.position,Tt=b.gpuAcceleration,Wt=b.adaptive,vr=b.roundOffsets,Fr=b.isFixed,en=Ae.x,zn=en===void 0?0:en,ei=Ae.y,Qn=ei===void 0?0:ei,_n=typeof vr=="function"?vr({x:zn,y:Qn}):{x:zn,y:Qn};zn=_n.x,Qn=_n.y;var Xn=Ae.hasOwnProperty("x"),ai=Ae.hasOwnProperty("y"),nn=L,hi=N,vi=window;if(Wt){var Li=lt(I),Vi="clientHeight",sa="clientWidth";Li===Et(I)&&ne(Li=Ne(I)).position!=="static"&&qe==="absolute"&&(Vi="scrollHeight",sa="scrollWidth"),(H===N||(H===L||H===B)&&te===We)&&(hi=Z,Qn-=(Fr&&Li===vi&&vi.visualViewport?vi.visualViewport.height:Li[Vi])-T.height,Qn*=Tt?1:-1),(H===L||(H===N||H===Z)&&te===We)&&(nn=B,zn-=(Fr&&Li===vi&&vi.visualViewport?vi.visualViewport.width:Li[sa])-T.width,zn*=Tt?1:-1)}var ua,Lo=Object.assign({position:qe},Wt&&mt),Fa=vr===!0?function(go){var qs=go.y,e=window.devicePixelRatio||1;return{x:le(go.x*e)/e||0,y:le(qs*e)/e||0}}({x:zn,y:Qn}):{x:zn,y:Qn};return zn=Fa.x,Qn=Fa.y,Object.assign({},Lo,Tt?((ua={})[hi]=ai?"0":"",ua[nn]=Xn?"0":"",ua.transform=(vi.devicePixelRatio||1)>1?"translate3d("+zn+"px, "+Qn+"px, 0)":"translate("+zn+"px, "+Qn+"px)",ua):((A={})[hi]=ai?Qn+"px":"",A[nn]=Xn?zn+"px":"",A.transform="",A))}var pt={passive:!0},Ge={left:"right",right:"left",bottom:"top",top:"bottom"};function wt(b){return b.replace(/left|right|bottom|top/g,function(A){return Ge[A]})}var ee={start:"end",end:"start"};function Re(b){return b.replace(/start|end/g,function(A){return ee[A]})}function dt(b){var A=Et(b);return{scrollLeft:A.pageXOffset,scrollTop:A.pageYOffset}}function D(b){return je(Ne(b)).left+dt(b).scrollLeft}function q(b){var A=ne(b);return/auto|scroll|overlay|hidden/.test(A.overflow+A.overflowY+A.overflowX)}function G(b){return 0>["html","body","#document"].indexOf(Lt(b))?pe(b)&&q(b)?b:G(Pe(b)):b.ownerDocument.body}function O(b,A){var I;A===void 0&&(A=[]);var T=G(b),H=T===((I=b.ownerDocument)==null?void 0:I.body),te=Et(T),Ae=H?[te].concat(te.visualViewport||[],q(T)?T:[]):T,qe=A.concat(Ae);return H?qe:qe.concat(O(Pe(Ae)))}function k(b){return Object.assign({},b,{left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})}function X(b,A,I){return A===me?k(function(T,H){var te=Et(T),Ae=Ne(T),qe=te.visualViewport,Tt=Ae.clientWidth,Wt=Ae.clientHeight,vr=0,Fr=0;if(qe){Tt=qe.width,Wt=qe.height;var en=ce();(en||!en&&H==="fixed")&&(vr=qe.offsetLeft,Fr=qe.offsetTop)}return{width:Tt,height:Wt,x:vr+D(T),y:Fr}}(b,I)):jt(A)?function(T,H){var te=je(T,!1,H==="fixed");return te.top=te.top+T.clientTop,te.left=te.left+T.clientLeft,te.bottom=te.top+T.clientHeight,te.right=te.left+T.clientWidth,te.width=T.clientWidth,te.height=T.clientHeight,te.x=te.left,te.y=te.top,te}(A,I):k(function(T){var H,te=Ne(T),Ae=dt(T),qe=(H=T.ownerDocument)==null?void 0:H.body,Tt=re(te.scrollWidth,te.clientWidth,qe?qe.scrollWidth:0,qe?qe.clientWidth:0),Wt=re(te.scrollHeight,te.clientHeight,qe?qe.scrollHeight:0,qe?qe.clientHeight:0),vr=-Ae.scrollLeft+D(T),Fr=-Ae.scrollTop;return ne(qe||te).direction==="rtl"&&(vr+=re(te.clientWidth,qe?qe.clientWidth:0)-Tt),{width:Tt,height:Wt,x:vr,y:Fr}}(Ne(b)))}function W(b,A,I,T){var H=A==="clippingParents"?function(qe){var Tt=O(Pe(qe)),Wt=["absolute","fixed"].indexOf(ne(qe).position)>=0&&pe(qe)?lt(qe):qe;return jt(Wt)?Tt.filter(function(vr){return jt(vr)&&Me(vr,Wt)&&Lt(vr)!=="body"}):[]}(b):[].concat(A),te=[].concat(H,[I]),Ae=te.reduce(function(qe,Tt){var Wt=X(b,Tt,T);return qe.top=re(Wt.top,qe.top),qe.right=De(Wt.right,qe.right),qe.bottom=De(Wt.bottom,qe.bottom),qe.left=re(Wt.left,qe.left),qe},X(b,te[0],T));return Ae.width=Ae.right-Ae.left,Ae.height=Ae.bottom-Ae.top,Ae.x=Ae.left,Ae.y=Ae.top,Ae}function ae(b){var A,I=b.reference,T=b.element,H=b.placement,te=H?ie(H):null,Ae=H?Ot(H):null,qe=I.x+I.width/2-T.width/2,Tt=I.y+I.height/2-T.height/2;switch(te){case N:A={x:qe,y:I.y-T.height};break;case Z:A={x:qe,y:I.y+I.height};break;case B:A={x:I.x+I.width,y:Tt};break;case L:A={x:I.x-T.width,y:Tt};break;default:A={x:I.x,y:I.y}}var Wt=te?ft(te):null;if(Wt!=null){var vr=Wt==="y"?"height":"width";switch(Ae){case ke:A[Wt]=A[Wt]-(I[vr]/2-T[vr]/2);break;case We:A[Wt]=A[Wt]+(I[vr]/2-T[vr]/2)}}return A}function Be(b,A){A===void 0&&(A={});var I=A.placement,T=I===void 0?b.placement:I,H=A.strategy,te=H===void 0?b.strategy:H,Ae=A.boundary,qe=Ae===void 0?"clippingParents":Ae,Tt=A.rootBoundary,Wt=Tt===void 0?me:Tt,vr=A.elementContext,Fr=vr===void 0?Le:vr,en=A.altBoundary,zn=en!==void 0&&en,ei=A.padding,Qn=ei===void 0?0:ei,_n=fe(typeof Qn!="number"?Qn:_t(Qn,U)),Xn=b.rects.popper,ai=b.elements[zn?Fr===Le?"reference":Le:Fr],nn=W(jt(ai)?ai:ai.contextElement||Ne(b.elements.popper),qe,Wt,te),hi=je(b.elements.reference),vi=ae({reference:hi,element:Xn,strategy:"absolute",placement:T}),Li=k(Object.assign({},Xn,vi)),Vi=Fr===Le?Li:hi,sa={top:nn.top-Vi.top+_n.top,bottom:Vi.bottom-nn.bottom+_n.bottom,left:nn.left-Vi.left+_n.left,right:Vi.right-nn.right+_n.right},ua=b.modifiersData.offset;if(Fr===Le&&ua){var Lo=ua[T];Object.keys(sa).forEach(function(Fa){var go=0>[B,Z].indexOf(Fa)?-1:1;sa[Fa]+=Lo[0>[N,Z].indexOf(Fa)?"x":"y"]*go})}return sa}function ve(b,A){A===void 0&&(A={});var I=A.boundary,T=A.rootBoundary,H=A.padding,te=A.flipVariations,Ae=A.allowedAutoPlacements,qe=Ae===void 0?et:Ae,Tt=Ot(A.placement),Wt=Tt?te?Se:Se.filter(function(en){return Ot(en)===Tt}):U,vr=Wt.filter(function(en){return qe.indexOf(en)>=0});vr.length===0&&(vr=Wt);var Fr=vr.reduce(function(en,zn){return en[zn]=Be(b,{placement:zn,boundary:I,rootBoundary:T,padding:H})[ie(zn)],en},{});return Object.keys(Fr).sort(function(en,zn){return Fr[en]-Fr[zn]})}var Je={name:"flip",enabled:!0,phase:"main",fn:function(b){var A=b.state,I=b.options,T=b.name;if(!A.modifiersData[T]._skip){for(var H=I.mainAxis,te=H===void 0||H,Ae=I.altAxis,qe=Ae===void 0||Ae,Tt=I.fallbackPlacements,Wt=I.padding,vr=I.boundary,Fr=I.rootBoundary,en=I.altBoundary,zn=I.flipVariations,ei=zn===void 0||zn,Qn=I.allowedAutoPlacements,_n=A.options.placement,Xn=ie(_n),ai=Tt||(Xn===_n||!ei?[wt(_n)]:function(we){if(ie(we)===$)return[];var ut=wt(we);return[Re(we),ut,Re(ut)]}(_n)),nn=[_n].concat(ai).reduce(function(we,ut){return we.concat(ie(ut)===$?ve(A,{placement:ut,boundary:vr,rootBoundary:Fr,padding:Wt,flipVariations:ei,allowedAutoPlacements:Qn}):ut)},[]),hi=A.rects.reference,vi=A.rects.popper,Li=new Map,Vi=!0,sa=nn[0],ua=0;nn.length>ua;ua++){var Lo=nn[ua],Fa=ie(Lo),go=Ot(Lo)===ke,qs=[N,Z].indexOf(Fa)>=0,e=qs?"width":"height",i=Be(A,{placement:Lo,boundary:vr,rootBoundary:Fr,altBoundary:en,padding:Wt}),l=qs?go?B:L:go?Z:N;hi[e]>vi[e]&&(l=wt(l));var y=wt(l),P=[];if(te&&P.push(0>=i[Fa]),qe&&P.push(0>=i[l],0>=i[y]),P.every(function(we){return we})){sa=Lo,Vi=!1;break}Li.set(Lo,P)}if(Vi)for(var j=function(we){var ut=nn.find(function(Nt){var Ut=Li.get(Nt);if(Ut)return Ut.slice(0,we).every(function(qt){return qt})});if(ut)return sa=ut,"break"},Q=ei?3:1;Q>0&&j(Q)!=="break";Q--);A.placement!==sa&&(A.modifiersData[T]._skip=!0,A.placement=sa,A.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ot(b,A,I){return I===void 0&&(I={x:0,y:0}),{top:b.top-A.height-I.y,right:b.right-A.width+I.x,bottom:b.bottom-A.height+I.y,left:b.left-A.width-I.x}}function Qe(b){return[N,B,Z,L].some(function(A){return b[A]>=0})}var ir={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(b){var A=b.state,I=b.name,T=b.options.offset,H=T===void 0?[0,0]:T,te=et.reduce(function(Tt,Wt){return Tt[Wt]=function(vr,Fr,en){var zn=ie(vr),ei=0>[L,N].indexOf(zn)?1:-1,Qn=typeof en=="function"?en(Object.assign({},Fr,{placement:vr})):en,_n=Qn[0],Xn=Qn[1];return _n=_n||0,Xn=(Xn||0)*ei,0>[L,B].indexOf(zn)?{x:_n,y:Xn}:{x:Xn,y:_n}}(Wt,A.rects,H),Tt},{}),Ae=te[A.placement],qe=Ae.y;A.modifiersData.popperOffsets!=null&&(A.modifiersData.popperOffsets.x+=Ae.x,A.modifiersData.popperOffsets.y+=qe),A.modifiersData[I]=te}},mr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(b){var A=b.state,I=b.options,T=b.name,H=I.mainAxis,te=H===void 0||H,Ae=I.altAxis,qe=Ae!==void 0&&Ae,Tt=I.tether,Wt=Tt===void 0||Tt,vr=I.tetherOffset,Fr=vr===void 0?0:vr,en=Be(A,{boundary:I.boundary,rootBoundary:I.rootBoundary,padding:I.padding,altBoundary:I.altBoundary}),zn=ie(A.placement),ei=Ot(A.placement),Qn=!ei,_n=ft(zn),Xn=_n==="x"?"y":"x",ai=A.modifiersData.popperOffsets,nn=A.rects.reference,hi=A.rects.popper,vi=typeof Fr=="function"?Fr(Object.assign({},A.rects,{placement:A.placement})):Fr,Li=typeof vi=="number"?{mainAxis:vi,altAxis:vi}:Object.assign({mainAxis:0,altAxis:0},vi),Vi=A.modifiersData.offset?A.modifiersData.offset[A.placement]:null,sa={x:0,y:0};if(ai){if(te){var ua,Lo=_n==="y"?N:L,Fa=_n==="y"?Z:B,go=_n==="y"?"height":"width",qs=ai[_n],e=qs+en[Lo],i=qs-en[Fa],l=Wt?-hi[go]/2:0,y=ei===ke?nn[go]:hi[go],P=ei===ke?-hi[go]:-nn[go],j=A.elements.arrow,Q=Wt&&j?J(j):{width:0,height:0},we=A.modifiersData["arrow#persistent"]?A.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ut=we[Lo],Nt=we[Fa],Ut=It(0,nn[go],Q[go]),qt=Qn?nn[go]/2-l-Ut-ut-Li.mainAxis:y-Ut-ut-Li.mainAxis,lr=Qn?-nn[go]/2+l+Ut+Nt+Li.mainAxis:P+Ut+Nt+Li.mainAxis,xr=A.elements.arrow&&lt(A.elements.arrow),Kr=(ua=Vi==null?void 0:Vi[_n])!=null?ua:0,qr=qs+lr-Kr,dn=It(Wt?De(e,qs+qt-Kr-(xr?_n==="y"?xr.clientTop||0:xr.clientLeft||0:0)):e,qs,Wt?re(i,qr):i);ai[_n]=dn,sa[_n]=dn-qs}if(qe){var cn,Un=ai[Xn],ri=Xn==="y"?"height":"width",gi=Un+en[_n==="x"?N:L],yi=Un-en[_n==="x"?Z:B],Ii=[N,L].indexOf(zn)!==-1,Ji=(cn=Vi==null?void 0:Vi[Xn])!=null?cn:0,Wi=Ii?gi:Un-nn[ri]-hi[ri]-Ji+Li.altAxis,ja=Ii?Un+nn[ri]+hi[ri]-Ji-Li.altAxis:yi,Jn=Wt&&Ii?function(la,ea,bo){var Eo=It(la,ea,bo);return Eo>bo?bo:Eo}(Wi,Un,ja):It(Wt?Wi:gi,Un,Wt?ja:yi);ai[Xn]=Jn,sa[Xn]=Jn-Un}A.modifiersData[T]=sa}},requiresIfExists:["offset"]};function Ar(b,A,I){I===void 0&&(I=!1);var T,H,te=pe(A),Ae=pe(A)&&function(Fr){var en=Fr.getBoundingClientRect(),zn=le(en.width)/Fr.offsetWidth||1,ei=le(en.height)/Fr.offsetHeight||1;return zn!==1||ei!==1}(A),qe=Ne(A),Tt=je(b,Ae,I),Wt={scrollLeft:0,scrollTop:0},vr={x:0,y:0};return(te||!te&&!I)&&((Lt(A)!=="body"||q(qe))&&(Wt=(T=A)!==Et(T)&&pe(T)?{scrollLeft:(H=T).scrollLeft,scrollTop:H.scrollTop}:dt(T)),pe(A)?((vr=je(A,!0)).x+=A.clientLeft,vr.y+=A.clientTop):qe&&(vr.x=D(qe))),{x:Tt.left+Wt.scrollLeft-vr.x,y:Tt.top+Wt.scrollTop-vr.y,width:Tt.width,height:Tt.height}}function Er(b){var A=new Map,I=new Set,T=[];function H(te){I.add(te.name),[].concat(te.requires||[],te.requiresIfExists||[]).forEach(function(Ae){if(!I.has(Ae)){var qe=A.get(Ae);qe&&H(qe)}}),T.push(te)}return b.forEach(function(te){A.set(te.name,te)}),b.forEach(function(te){I.has(te.name)||H(te)}),T}var Zt={placement:"bottom",modifiers:[],strategy:"absolute"};function Tr(){for(var b=arguments.length,A=Array(b),I=0;b>I;I++)A[I]=arguments[I];return!A.some(function(T){return!(T&&typeof T.getBoundingClientRect=="function")})}function pn(b){b===void 0&&(b={});var A=b.defaultModifiers,I=A===void 0?[]:A,T=b.defaultOptions,H=T===void 0?Zt:T;return function(te,Ae,qe){qe===void 0&&(qe=H);var Tt,Wt,vr={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zt,H),modifiersData:{},elements:{reference:te,popper:Ae},attributes:{},styles:{}},Fr=[],en=!1,zn={state:vr,setOptions:function(Qn){var _n=typeof Qn=="function"?Qn(vr.options):Qn;ei(),vr.options=Object.assign({},H,vr.options,_n),vr.scrollParents={reference:jt(te)?O(te):te.contextElement?O(te.contextElement):[],popper:O(Ae)};var Xn,ai,nn=function(hi){var vi=Er(hi);return at.reduce(function(Li,Vi){return Li.concat(vi.filter(function(sa){return sa.phase===Vi}))},[])}((Xn=[].concat(I,vr.options.modifiers),ai=Xn.reduce(function(hi,vi){var Li=hi[vi.name];return hi[vi.name]=Li?Object.assign({},Li,vi,{options:Object.assign({},Li.options,vi.options),data:Object.assign({},Li.data,vi.data)}):vi,hi},{}),Object.keys(ai).map(function(hi){return ai[hi]})));return vr.orderedModifiers=nn.filter(function(hi){return hi.enabled}),vr.orderedModifiers.forEach(function(hi){var vi=hi.options,Li=hi.effect;if(typeof Li=="function"){var Vi=Li({state:vr,name:hi.name,instance:zn,options:vi===void 0?{}:vi});Fr.push(Vi||function(){})}}),zn.update()},forceUpdate:function(){if(!en){var Qn=vr.elements,_n=Qn.reference,Xn=Qn.popper;if(Tr(_n,Xn)){vr.rects={reference:Ar(_n,lt(Xn),vr.options.strategy==="fixed"),popper:J(Xn)},vr.reset=!1,vr.placement=vr.options.placement,vr.orderedModifiers.forEach(function(Li){return vr.modifiersData[Li.name]=Object.assign({},Li.data)});for(var ai=0;vr.orderedModifiers.length>ai;ai++)if(vr.reset!==!0){var nn=vr.orderedModifiers[ai],hi=nn.fn,vi=nn.options;typeof hi=="function"&&(vr=hi({state:vr,options:vi===void 0?{}:vi,name:nn.name,instance:zn})||vr)}else vr.reset=!1,ai=-1}}},update:(Tt=function(){return new Promise(function(Qn){zn.forceUpdate(),Qn(vr)})},function(){return Wt||(Wt=new Promise(function(Qn){Promise.resolve().then(function(){Wt=void 0,Qn(Tt())})})),Wt}),destroy:function(){ei(),en=!0}};if(!Tr(te,Ae))return zn;function ei(){Fr.forEach(function(Qn){return Qn()}),Fr=[]}return zn.setOptions(qe).then(function(Qn){!en&&qe.onFirstUpdate&&qe.onFirstUpdate(Qn)}),zn}}var un=pn({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(b){var A=b.state,I=b.instance,T=b.options,H=T.scroll,te=H===void 0||H,Ae=T.resize,qe=Ae===void 0||Ae,Tt=Et(A.elements.popper),Wt=[].concat(A.scrollParents.reference,A.scrollParents.popper);return te&&Wt.forEach(function(vr){vr.addEventListener("scroll",I.update,pt)}),qe&&Tt.addEventListener("resize",I.update,pt),function(){te&&Wt.forEach(function(vr){vr.removeEventListener("scroll",I.update,pt)}),qe&&Tt.removeEventListener("resize",I.update,pt)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(b){var A=b.state;A.modifiersData[b.name]=ae({reference:A.rects.reference,element:A.rects.popper,strategy:"absolute",placement:A.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(b){var A=b.state,I=b.options,T=I.gpuAcceleration,H=T===void 0||T,te=I.adaptive,Ae=te===void 0||te,qe=I.roundOffsets,Tt=qe===void 0||qe,Wt={placement:ie(A.placement),variation:Ot(A.placement),popper:A.elements.popper,popperRect:A.rects.popper,gpuAcceleration:H,isFixed:A.options.strategy==="fixed"};A.modifiersData.popperOffsets!=null&&(A.styles.popper=Object.assign({},A.styles.popper,Rt(Object.assign({},Wt,{offsets:A.modifiersData.popperOffsets,position:A.options.strategy,adaptive:Ae,roundOffsets:Tt})))),A.modifiersData.arrow!=null&&(A.styles.arrow=Object.assign({},A.styles.arrow,Rt(Object.assign({},Wt,{offsets:A.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Tt})))),A.attributes.popper=Object.assign({},A.attributes.popper,{"data-popper-placement":A.placement})},data:{}},ye,ir,Je,mr,Ye,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(b){var A=b.state,I=b.name,T=A.rects.reference,H=A.rects.popper,te=A.modifiersData.preventOverflow,Ae=Be(A,{elementContext:"reference"}),qe=Be(A,{altBoundary:!0}),Tt=ot(Ae,T),Wt=ot(qe,H,te),vr=Qe(Tt),Fr=Qe(Wt);A.modifiersData[I]={referenceClippingOffsets:Tt,popperEscapeOffsets:Wt,isReferenceHidden:vr,hasPopperEscaped:Fr},A.attributes.popper=Object.assign({},A.attributes.popper,{"data-popper-reference-hidden":vr,"data-popper-escaped":Fr})}}]}),Zn="tippy-content",Cr="tippy-arrow",Nr="tippy-svg-arrow",bt={passive:!0,capture:!0},jn=function(){return document.body};function Pt(b,A,I){if(Array.isArray(b)){var T=b[A];return T==null?Array.isArray(I)?I[A]:I:T}return b}function zt(b,A){var I={}.toString.call(b);return I.indexOf("[object")===0&&I.indexOf(A+"]")>-1}function Qt(b,A){return typeof b=="function"?b.apply(void 0,A):b}function dr(b,A){return A===0?b:function(T){clearTimeout(I),I=setTimeout(function(){b(T)},A)};var I}function _r(b){return[].concat(b)}function Hr(b,A){b.indexOf(A)===-1&&b.push(A)}function Qr(b){return[].slice.call(b)}function fr(b){return Object.keys(b).reduce(function(A,I){return b[I]!==void 0&&(A[I]=b[I]),A},{})}function tt(){return document.createElement("div")}function Yr(b){return["Element","Fragment"].some(function(A){return zt(b,A)})}function Tn(b){return zt(b,"MouseEvent")}function wn(b){return Yr(b)?[b]:function(A){return zt(A,"NodeList")}(b)?Qr(b):Array.isArray(b)?b:Qr(document.querySelectorAll(b))}function Nn(b,A){b.forEach(function(I){I&&(I.style.transitionDuration=A+"ms")})}function Si(b,A){b.forEach(function(I){I&&I.setAttribute("data-state",A)})}function fa(b){var A,I=_r(b)[0];return I!=null&&(A=I.ownerDocument)!=null&&A.body?I.ownerDocument:document}function Xi(b,A,I){var T=A+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(H){b[T](H,I)})}function Ln(b,A){for(var I=A;I;){var T;if(b.contains(I))return!0;I=I.getRootNode==null||(T=I.getRootNode())==null?void 0:T.host}return!1}var na={isTouch:!1},xi=0;function ta(){na.isTouch||(na.isTouch=!0,window.performance&&document.addEventListener("mousemove",La))}function La(){var b=performance.now();20>b-xi&&(na.isTouch=!1,document.removeEventListener("mousemove",La)),xi=b}function Ki(){var b,A=document.activeElement;(b=A)&&b._tippy&&b._tippy.reference===b&&A.blur&&!A._tippy.state.isVisible&&A.blur()}var jo=typeof window!="undefined"&&typeof document!="undefined"&&!!window.msCrypto,uo=Object.assign({appendTo:jn,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),An=Object.keys(uo);function gn(b){var A=(b.plugins||[]).reduce(function(I,T){var H,te=T.name;return te&&(I[te]=b[te]!==void 0?b[te]:(H=uo[te])!=null?H:T.defaultValue),I},{});return Object.assign({},b,A)}function Oi(b,A){var I=Object.assign({},A,{content:Qt(A.content,[b])},A.ignoreAttributes?{}:function(T,H){return(H?Object.keys(gn(Object.assign({},uo,{plugins:H}))):An).reduce(function(te,Ae){var qe=(T.getAttribute("data-tippy-"+Ae)||"").trim();if(!qe)return te;if(Ae==="content")te[Ae]=qe;else try{te[Ae]=JSON.parse(qe)}catch(Tt){te[Ae]=qe}return te},{})}(b,A.plugins));return I.aria=Object.assign({},uo.aria,I.aria),I.aria={expanded:I.aria.expanded==="auto"?A.interactive:I.aria.expanded,content:I.aria.content==="auto"?A.interactive?null:"describedby":I.aria.content},I}function fi(b,A){b.innerHTML=A}function va(b){var A=tt();return b===!0?A.className=Cr:(A.className=Nr,Yr(b)?A.appendChild(b):fi(A,b)),A}function wa(b,A){Yr(A.content)?(fi(b,""),b.appendChild(A.content)):typeof A.content!="function"&&(A.allowHTML?fi(b,A.content):b.textContent=A.content)}function Ca(b){var A=b.firstElementChild,I=Qr(A.children);return{box:A,content:I.find(function(T){return T.classList.contains(Zn)}),arrow:I.find(function(T){return T.classList.contains(Cr)||T.classList.contains(Nr)}),backdrop:I.find(function(T){return T.classList.contains("tippy-backdrop")})}}function Aa(b){var A=tt(),I=tt();I.className="tippy-box",I.setAttribute("data-state","hidden"),I.setAttribute("tabindex","-1");var T=tt();function H(te,Ae){var qe=Ca(A),Tt=qe.box,Wt=qe.content,vr=qe.arrow;Ae.theme?Tt.setAttribute("data-theme",Ae.theme):Tt.removeAttribute("data-theme"),typeof Ae.animation=="string"?Tt.setAttribute("data-animation",Ae.animation):Tt.removeAttribute("data-animation"),Ae.inertia?Tt.setAttribute("data-inertia",""):Tt.removeAttribute("data-inertia"),Tt.style.maxWidth=typeof Ae.maxWidth=="number"?Ae.maxWidth+"px":Ae.maxWidth,Ae.role?Tt.setAttribute("role",Ae.role):Tt.removeAttribute("role"),te.content===Ae.content&&te.allowHTML===Ae.allowHTML||wa(Wt,b.props),Ae.arrow?vr?te.arrow!==Ae.arrow&&(Tt.removeChild(vr),Tt.appendChild(va(Ae.arrow))):Tt.appendChild(va(Ae.arrow)):vr&&Tt.removeChild(vr)}return T.className=Zn,T.setAttribute("data-state","hidden"),wa(T,b.props),A.appendChild(I),I.appendChild(T),H(b.props,b.props),{popper:A,onUpdate:H}}Aa.$$tippy=!0;var ma=1,ka=[],Uo=[];function ha(b,A){var I,T,H,te,Ae,qe,Tt,Wt,vr=Oi(b,Object.assign({},uo,gn(fr(A)))),Fr=!1,en=!1,zn=!1,ei=!1,Qn=[],_n=dr(cn,vr.interactiveDebounce),Xn=ma++,ai=(Wt=vr.plugins).filter(function(Jn,la){return Wt.indexOf(Jn)===la}),nn={id:Xn,reference:b,popper:tt(),popperInstance:null,props:vr,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:ai,clearDelayTimeouts:function(){clearTimeout(I),clearTimeout(T),cancelAnimationFrame(H)},setProps:function(Jn){if(!nn.state.isDestroyed){y("onBeforeUpdate",[nn,Jn]),qr();var la=nn.props,ea=Oi(b,Object.assign({},la,fr(Jn),{ignoreAttributes:!0}));nn.props=ea,Kr(),la.interactiveDebounce!==ea.interactiveDebounce&&(Q(),_n=dr(cn,ea.interactiveDebounce)),la.triggerTarget&&!ea.triggerTarget?_r(la.triggerTarget).forEach(function(bo){bo.removeAttribute("aria-expanded")}):ea.triggerTarget&&b.removeAttribute("aria-expanded"),j(),l(),Li&&Li(la,ea),nn.popperInstance&&(yi(),Ji().forEach(function(bo){requestAnimationFrame(bo._tippy.popperInstance.forceUpdate)})),y("onAfterUpdate",[nn,Jn])}},setContent:function(Jn){nn.setProps({content:Jn})},show:function(){var Jn=nn.state.isVisible,la=nn.state.isDestroyed,ea=!nn.state.isEnabled,bo=na.isTouch&&!nn.props.touch,Eo=Pt(nn.props.duration,0,uo.duration);if(!(Jn||la||ea||bo)&&!go().hasAttribute("disabled")&&(y("onShow",[nn],!1),nn.props.onShow(nn)!==!1)){if(nn.state.isVisible=!0,Fa()&&(vi.style.visibility="visible"),l(),Ut(),nn.state.isMounted||(vi.style.transition="none"),Fa()){var Ja=e();Nn([Ja.box,Ja.content],0)}qe=function(){var Ss;if(nn.state.isVisible&&!ei){if(ei=!0,vi.style.transition=nn.props.moveTransition,Fa()&&nn.props.animation){var Is=e(),pu=Is.box,es=Is.content;Nn([pu,es],Eo),Si([pu,es],"visible")}P(),j(),Hr(Uo,nn),(Ss=nn.popperInstance)==null||Ss.forceUpdate(),y("onMount",[nn]),nn.props.animation&&Fa()&&function($u,hl){lr($u,hl)}(Eo,function(){nn.state.isShown=!0,y("onShown",[nn])})}},function(){var Ss,Is=nn.props.appendTo,pu=go();Ss=nn.props.interactive&&Is===jn||Is==="parent"?pu.parentNode:Qt(Is,[pu]),Ss.contains(vi)||Ss.appendChild(vi),nn.state.isMounted=!0,yi()}()}},hide:function(){var Jn=!nn.state.isVisible,la=nn.state.isDestroyed,ea=!nn.state.isEnabled,bo=Pt(nn.props.duration,1,uo.duration);if(!(Jn||la||ea)&&(y("onHide",[nn],!1),nn.props.onHide(nn)!==!1)){if(nn.state.isVisible=!1,nn.state.isShown=!1,ei=!1,Fr=!1,Fa()&&(vi.style.visibility="hidden"),Q(),qt(),l(!0),Fa()){var Eo=e(),Ja=Eo.box,Ss=Eo.content;nn.props.animation&&(Nn([Ja,Ss],bo),Si([Ja,Ss],"hidden"))}P(),j(),nn.props.animation?Fa()&&function(Is,pu){lr(Is,function(){!nn.state.isVisible&&vi.parentNode&&vi.parentNode.contains(vi)&&pu()})}(bo,nn.unmount):nn.unmount()}},hideWithInteractivity:function(Jn){qs().addEventListener("mousemove",_n),Hr(ka,_n),_n(Jn)},enable:function(){nn.state.isEnabled=!0},disable:function(){nn.hide(),nn.state.isEnabled=!1},unmount:function(){nn.state.isVisible&&nn.hide(),nn.state.isMounted&&(Ii(),Ji().forEach(function(Jn){Jn._tippy.unmount()}),vi.parentNode&&vi.parentNode.removeChild(vi),Uo=Uo.filter(function(Jn){return Jn!==nn}),nn.state.isMounted=!1,y("onHidden",[nn]))},destroy:function(){nn.state.isDestroyed||(nn.clearDelayTimeouts(),nn.unmount(),qr(),delete b._tippy,nn.state.isDestroyed=!0,y("onDestroy",[nn]))}};if(!vr.render)return nn;var hi=vr.render(nn),vi=hi.popper,Li=hi.onUpdate;vi.setAttribute("data-tippy-root",""),vi.id="tippy-"+nn.id,nn.popper=vi,b._tippy=nn,vi._tippy=nn;var Vi=ai.map(function(Jn){return Jn.fn(nn)}),sa=b.hasAttribute("aria-expanded");return Kr(),j(),l(),y("onCreate",[nn]),vr.showOnCreate&&Wi(),vi.addEventListener("mouseenter",function(){nn.props.interactive&&nn.state.isVisible&&nn.clearDelayTimeouts()}),vi.addEventListener("mouseleave",function(){nn.props.interactive&&nn.props.trigger.indexOf("mouseenter")>=0&&qs().addEventListener("mousemove",_n)}),nn;function ua(){var Jn=nn.props.touch;return Array.isArray(Jn)?Jn:[Jn,0]}function Lo(){return ua()[0]==="hold"}function Fa(){var Jn;return!((Jn=nn.props.render)==null||!Jn.$$tippy)}function go(){return Tt||b}function qs(){var Jn=go().parentNode;return Jn?fa(Jn):document}function e(){return Ca(vi)}function i(Jn){return nn.state.isMounted&&!nn.state.isVisible||na.isTouch||te&&te.type==="focus"?0:Pt(nn.props.delay,Jn?0:1,uo.delay)}function l(Jn){Jn===void 0&&(Jn=!1),vi.style.pointerEvents=nn.props.interactive&&!Jn?"":"none",vi.style.zIndex=""+nn.props.zIndex}function y(Jn,la,ea){var bo;ea===void 0&&(ea=!0),Vi.forEach(function(Eo){Eo[Jn]&&Eo[Jn].apply(Eo,la)}),ea&&(bo=nn.props)[Jn].apply(bo,la)}function P(){var Jn=nn.props.aria;if(Jn.content){var la="aria-"+Jn.content,ea=vi.id;_r(nn.props.triggerTarget||b).forEach(function(bo){var Eo=bo.getAttribute(la);if(nn.state.isVisible)bo.setAttribute(la,Eo?Eo+" "+ea:ea);else{var Ja=Eo&&Eo.replace(ea,"").trim();Ja?bo.setAttribute(la,Ja):bo.removeAttribute(la)}})}}function j(){!sa&&nn.props.aria.expanded&&_r(nn.props.triggerTarget||b).forEach(function(Jn){nn.props.interactive?Jn.setAttribute("aria-expanded",nn.state.isVisible&&Jn===go()?"true":"false"):Jn.removeAttribute("aria-expanded")})}function Q(){qs().removeEventListener("mousemove",_n),ka=ka.filter(function(Jn){return Jn!==_n})}function we(Jn){if(!na.isTouch||!zn&&Jn.type!=="mousedown"){var la=Jn.composedPath&&Jn.composedPath()[0]||Jn.target;if(!nn.props.interactive||!Ln(vi,la)){if(_r(nn.props.triggerTarget||b).some(function(ea){return Ln(ea,la)})){if(na.isTouch||nn.state.isVisible&&nn.props.trigger.indexOf("click")>=0)return}else y("onClickOutside",[nn,Jn]);nn.props.hideOnClick===!0&&(nn.clearDelayTimeouts(),nn.hide(),en=!0,setTimeout(function(){en=!1}),nn.state.isMounted||qt())}}}function ut(){zn=!0}function Nt(){zn=!1}function Ut(){var Jn=qs();Jn.addEventListener("mousedown",we,!0),Jn.addEventListener("touchend",we,bt),Jn.addEventListener("touchstart",Nt,bt),Jn.addEventListener("touchmove",ut,bt)}function qt(){var Jn=qs();Jn.removeEventListener("mousedown",we,!0),Jn.removeEventListener("touchend",we,bt),Jn.removeEventListener("touchstart",Nt,bt),Jn.removeEventListener("touchmove",ut,bt)}function lr(Jn,la){var ea=e().box;function bo(Eo){Eo.target===ea&&(Xi(ea,"remove",bo),la())}if(Jn===0)return la();Xi(ea,"remove",Ae),Xi(ea,"add",bo),Ae=bo}function xr(Jn,la,ea){ea===void 0&&(ea=!1),_r(nn.props.triggerTarget||b).forEach(function(bo){bo.addEventListener(Jn,la,ea),Qn.push({node:bo,eventType:Jn,handler:la,options:ea})})}function Kr(){var Jn;Lo()&&(xr("touchstart",dn,{passive:!0}),xr("touchend",Un,{passive:!0})),(Jn=nn.props.trigger,Jn.split(/\s+/).filter(Boolean)).forEach(function(la){if(la!=="manual")switch(xr(la,dn),la){case"mouseenter":xr("mouseleave",Un);break;case"focus":xr(jo?"focusout":"blur",ri);break;case"focusin":xr("focusout",ri)}})}function qr(){Qn.forEach(function(Jn){Jn.node.removeEventListener(Jn.eventType,Jn.handler,Jn.options)}),Qn=[]}function dn(Jn){var la,ea=!1;if(nn.state.isEnabled&&!gi(Jn)&&!en){var bo=((la=te)==null?void 0:la.type)==="focus";te=Jn,Tt=Jn.currentTarget,j(),!nn.state.isVisible&&Tn(Jn)&&ka.forEach(function(Eo){return Eo(Jn)}),Jn.type==="click"&&(0>nn.props.trigger.indexOf("mouseenter")||Fr)&&nn.props.hideOnClick!==!1&&nn.state.isVisible?ea=!0:Wi(Jn),Jn.type==="click"&&(Fr=!ea),ea&&!bo&&ja(Jn)}}function cn(Jn){var la=Jn.target,ea=go().contains(la)||vi.contains(la);if(Jn.type!=="mousemove"||!ea){var bo=Ji().concat(vi).map(function(Eo){var Ja,Ss=(Ja=Eo._tippy.popperInstance)==null?void 0:Ja.state;return Ss?{popperRect:Eo.getBoundingClientRect(),popperState:Ss,props:vr}:null}).filter(Boolean);(function(Eo,Ja){var Ss=Ja.clientX,Is=Ja.clientY;return Eo.every(function(pu){var es=pu.popperRect,$u=pu.popperState,hl=pu.props.interactiveBorder,Nl=$u.placement.split("-")[0],el=$u.modifiersData.offset;return!el||es.top-Is+(Nl==="bottom"?el.top.y:0)>hl||Is-es.bottom-(Nl==="top"?el.bottom.y:0)>hl||es.left-Ss+(Nl==="right"?el.left.x:0)>hl||Ss-es.right-(Nl==="left"?el.right.x:0)>hl})})(bo,Jn)&&(Q(),ja(Jn))}}function Un(Jn){gi(Jn)||nn.props.trigger.indexOf("click")>=0&&Fr||(nn.props.interactive?nn.hideWithInteractivity(Jn):ja(Jn))}function ri(Jn){0>nn.props.trigger.indexOf("focusin")&&Jn.target!==go()||nn.props.interactive&&Jn.relatedTarget&&vi.contains(Jn.relatedTarget)||ja(Jn)}function gi(Jn){return!!na.isTouch&&Lo()!==Jn.type.indexOf("touch")>=0}function yi(){Ii();var Jn=nn.props,la=Jn.popperOptions,ea=Jn.placement,bo=Jn.offset,Eo=Jn.getReferenceClientRect,Ja=Jn.moveTransition,Ss=Fa()?Ca(vi).arrow:null,Is=Eo?{getBoundingClientRect:Eo,contextElement:Eo.contextElement||go()}:b,pu={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function($u){var hl=$u.state;if(Fa()){var Nl=e().box;["placement","reference-hidden","escaped"].forEach(function(el){el==="placement"?Nl.setAttribute("data-placement",hl.placement):hl.attributes.popper["data-popper-"+el]?Nl.setAttribute("data-"+el,""):Nl.removeAttribute("data-"+el)}),hl.attributes.popper={}}}},es=[{name:"offset",options:{offset:bo}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ja}},pu];Fa()&&Ss&&es.push({name:"arrow",options:{element:Ss,padding:3}}),es.push.apply(es,(la==null?void 0:la.modifiers)||[]),nn.popperInstance=un(Is,vi,Object.assign({},la,{placement:ea,onFirstUpdate:qe,modifiers:es}))}function Ii(){nn.popperInstance&&(nn.popperInstance.destroy(),nn.popperInstance=null)}function Ji(){return Qr(vi.querySelectorAll("[data-tippy-root]"))}function Wi(Jn){nn.clearDelayTimeouts(),Jn&&y("onTrigger",[nn,Jn]),Ut();var la=i(!0),ea=ua(),bo=ea[1];na.isTouch&&ea[0]==="hold"&&bo&&(la=bo),la?I=setTimeout(function(){nn.show()},la):nn.show()}function ja(Jn){if(nn.clearDelayTimeouts(),y("onUntrigger",[nn,Jn]),nn.state.isVisible){if(0>nn.props.trigger.indexOf("mouseenter")||0>nn.props.trigger.indexOf("click")||0>["mouseleave","mousemove"].indexOf(Jn.type)||!Fr){var la=i(!1);la?T=setTimeout(function(){nn.state.isVisible&&nn.hide()},la):H=requestAnimationFrame(function(){nn.hide()})}}else qt()}}function xa(b,A){A===void 0&&(A={});var I=uo.plugins.concat(A.plugins||[]);document.addEventListener("touchstart",ta,bt),window.addEventListener("blur",Ki);var T=Object.assign({},A,{plugins:I}),H=wn(b).reduce(function(te,Ae){var qe=Ae&&ha(Ae,T);return qe&&te.push(qe),te},[]);return Yr(b)?H[0]:H}xa.defaultProps=uo,xa.setDefaultProps=function(b){Object.keys(b).forEach(function(A){uo[A]=b[A]})},xa.currentInput=na,Object.assign({},ye,{effect:function(b){var A=b.state,I={popper:{position:A.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(A.elements.popper.style,I.popper),A.styles=I,A.elements.arrow&&Object.assign(A.elements.arrow.style,I.arrow)}});var eo={clientX:0,clientY:0},Te=[];function Po(b){eo={clientX:b.clientX,clientY:b.clientY}}var Hs={name:"followCursor",defaultValue:!1,fn:function(b){var A=b.reference,I=fa(b.props.triggerTarget||A),T=!1,H=!1,te=!0,Ae=b.props;function qe(){return b.props.followCursor==="initial"&&b.state.isVisible}function Tt(){I.addEventListener("mousemove",Fr)}function Wt(){I.removeEventListener("mousemove",Fr)}function vr(){T=!0,b.setProps({getReferenceClientRect:null}),T=!1}function Fr(ei){var Qn=!ei.target||A.contains(ei.target),_n=b.props.followCursor,Xn=ei.clientX,ai=ei.clientY,nn=A.getBoundingClientRect(),hi=Xn-nn.left,vi=ai-nn.top;!Qn&&b.props.interactive||b.setProps({getReferenceClientRect:function(){var Li=A.getBoundingClientRect(),Vi=Xn,sa=ai;_n==="initial"&&(Vi=Li.left+hi,sa=Li.top+vi);var ua=_n==="horizontal"?Li.top:sa,Lo=_n==="vertical"?Li.right:Vi,Fa=_n==="horizontal"?Li.bottom:sa,go=_n==="vertical"?Li.left:Vi;return{width:Lo-go,height:Fa-ua,top:ua,right:Lo,bottom:Fa,left:go}}})}function en(){b.props.followCursor&&(Te.push({instance:b,doc:I}),function(ei){ei.addEventListener("mousemove",Po)}(I))}function zn(){(Te=Te.filter(function(ei){return ei.instance!==b})).filter(function(ei){return ei.doc===I}).length===0&&function(ei){ei.removeEventListener("mousemove",Po)}(I)}return{onCreate:en,onDestroy:zn,onBeforeUpdate:function(){Ae=b.props},onAfterUpdate:function(ei,Qn){var _n=Qn.followCursor;T||_n!==void 0&&Ae.followCursor!==_n&&(zn(),_n?(en(),!b.state.isMounted||H||qe()||Tt()):(Wt(),vr()))},onMount:function(){b.props.followCursor&&!H&&(te&&(Fr(eo),te=!1),qe()||Tt())},onTrigger:function(ei,Qn){Tn(Qn)&&(eo={clientX:Qn.clientX,clientY:Qn.clientY}),H=Qn.type==="focus"},onHidden:function(){b.props.followCursor&&(vr(),Wt(),te=!0)}}}};xa.setDefaultProps({render:Aa});var no,Jo,os,Go,Wo,za,Tu={showTotalDistance:!1,showDashDistance:!0,showWhen:["normal","active"],format:function(b){return 1e3>b?+b.toFixed(2)+"m":+(b/1e3).toFixed(2)+"km"}},ws={showWhen:["normal","active"],format:function(b){return b>1e6?"".concat(+(b/1e6).toFixed(2),"km\xB2"):"".concat(+b.toFixed(2),"m\xB2")}},Zs={maxSize:100},ts={remove:["del","backspace"],revert:["command+z","ctrl+z"],redo:["command+shift+z","ctrl+shift+z"]},Vs={allowHTML:!0,followCursor:!0,placement:"bottom-start",offset:[-10,20],plugins:[Hs],trigger:"manual",hideOnClick:!1,theme:"light"},ou={data:"drawData",pointAdsorbPixel:12,lineAdsorbPixel:10};function ls(b,A){var I=Object.keys(b);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(b);A&&(T=T.filter(function(H){return Object.getOwnPropertyDescriptor(b,H).enumerable})),I.push.apply(I,T)}return I}function ki(b){for(var A=1;arguments.length>A;A++){var I=arguments[A]!=null?arguments[A]:{};A%2?ls(Object(I),!0).forEach(function(T){Lr(b,T,I[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(I)):ls(Object(I)).forEach(function(T){Object.defineProperty(b,T,Object.getOwnPropertyDescriptor(I,T))})}return b}function As(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function Rs(b,A){for(var I=0;A.length>I;I++){var T=A[I];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,Vn(T.key),T)}}function hr(b,A,I){return A&&Rs(b.prototype,A),I&&Rs(b,I),Object.defineProperty(b,"prototype",{writable:!1}),b}function Lr(b,A,I){return(A=Vn(A))in b?Object.defineProperty(b,A,{value:I,enumerable:!0,configurable:!0,writable:!0}):b[A]=I,b}function or(b,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(A&&A.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),A&&Hn(b,A)}function kr(b){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},kr(b)}function Hn(b,A){return Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,T){return I.__proto__=T,I},Hn(b,A)}function zr(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function Bo(b,A){if(A&&(typeof A=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zr(b)}function Vr(b){var A=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}();return function(){var I,T=kr(b);if(A){var H=kr(this).constructor;I=Reflect.construct(T,arguments,H)}else I=T.apply(this,arguments);return Bo(this,I)}}function cr(b,A){for(;!Object.prototype.hasOwnProperty.call(b,A)&&(b=kr(b))!==null;);return b}function ht(){return ht=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(b,A,I){var T=cr(b,A);if(T){var H=Object.getOwnPropertyDescriptor(T,A);return H.get?H.get.call(3>arguments.length?b:I):H.value}},ht.apply(this,arguments)}function ur(b,A){return function(I){if(Array.isArray(I))return I}(b)||function(I,T){var H=I==null?null:typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(H!=null){var te,Ae,qe,Tt,Wt=[],vr=!0,Fr=!1;try{if(qe=(H=H.call(I)).next,T===0){if(Object(H)!==H)return;vr=!1}else for(;!(vr=(te=qe.call(H)).done)&&(Wt.push(te.value),Wt.length!==T);vr=!0);}catch(en){Fr=!0,Ae=en}finally{try{if(!vr&&H.return!=null&&(Tt=H.return(),Object(Tt)!==Tt))return}finally{if(Fr)throw Ae}}return Wt}}(b,A)||sn(b,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function er(b){return function(A){if(Array.isArray(A))return fn(A)}(b)||function(A){if(typeof Symbol!="undefined"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(b)||sn(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sn(b,A){if(b){if(typeof b=="string")return fn(b,A);var I=Object.prototype.toString.call(b).slice(8,-1);return I==="Object"&&b.constructor&&(I=b.constructor.name),I==="Map"||I==="Set"?Array.from(b):I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?fn(b,A):void 0}}function fn(b,A){(A==null||A>b.length)&&(A=b.length);for(var I=0,T=Array(A);A>I;I++)T[I]=b[I];return T}function Vn(b){var A=function(I,T){if(typeof I!="object"||I===null)return I;var H=I[Symbol.toPrimitive];if(H!==void 0){var te=H.call(I,T||"default");if(typeof te!="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(I)}(b,"string");return typeof A=="symbol"?A:A+""}(no=v.DrawEvent||(v.DrawEvent={})).Init="init",no.Destroy="destroy",no.Enable="enable",no.Disable="disable",no.Add="add",no.Edit="edit",no.Remove="remove",no.Clear="clear",no.Change="change",no.DragStart="dragStart",no.Dragging="dragging",no.DragEnd="dragEnd",no.AddNode="addNode",no.RemoveNode="removeNode",(Jo=v.SourceEvent||(v.SourceEvent={})).Change="change",Jo.Update="update",(os=v.RenderEvent||(v.RenderEvent={})).Click="click",os.UnClick="unclick",os.Dragstart="dragstart",os.Mousemove="mousemove",os.Mouseout="mouseout",os.Dragging="dragging",os.Dragend="dragend",os.DblClick="dblClick",os.Contextmenu="contextmenu",(Go=v.LayerEvent||(v.LayerEvent={})).Mousedown="mousedown",Go.Mouseup="mouseup",Go.Click="click",Go.UnClick="unclick",Go.Dblclick="dblclick",Go.Mousemove="mousemove",Go.Mouseover="mouseover",Go.Mouseenter="mouseenter",Go.Mouseleave="mouseleave",Go.Mouseout="mouseout",Go.Contextmenu="contextmenu",(Wo=v.SceneEvent||(v.SceneEvent={})).Loaded="loaded",Wo.MapMove="mapmove",Wo.MoveStart="movestart",Wo.MoveEnd="moveend",Wo.ZoomChange="zoomchange",Wo.ZoomStart="zoomstart",Wo.ZoomEnd="zoomend",Wo.Click="click",Wo.Dblclick="dblclick",Wo.Mousemove="mousemove",Wo.Mousewheel="mousewheel",Wo.Mouseover="mouseover",Wo.Mouseout="mouseout",Wo.Mouseup="mouseup",Wo.Mousedown="mousedown",Wo.Contextmenu="contextmenu",Wo.Dragstart="dragstart",Wo.Dragging="dragging",Wo.Dragend="dragend",(za=v.ControlEvent||(v.ControlEvent={})).DrawChange="drawchange",za.DataChange="datachange";var ni=63710088e-1,oi={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*ni,kilometers:6371.0088,kilometres:6371.0088,meters:ni,metres:ni,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:ni/1852,radians:1,yards:6967335223679999e-9},Ei={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function qi(b,A,I){I===void 0&&(I={});var T={type:"Feature"};return(I.id===0||I.id)&&(T.id=I.id),I.bbox&&(T.bbox=I.bbox),T.properties=A||{},T.geometry=b,T}function Pr(b,A,I){if(I===void 0&&(I={}),!b)throw Error("coordinates is required");if(!Array.isArray(b))throw Error("coordinates must be an Array");if(2>b.length)throw Error("coordinates must be at least 2 numbers long");if(!_e(b[0])||!_e(b[1]))throw Error("coordinates must contain numbers");return qi({type:"Point",coordinates:b},A,I)}function Cn(b,A,I){I===void 0&&(I={});for(var T=0,H=b;H.length>T;T++){var te=H[T];if(4>te.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ae=0;te[te.length-1].length>Ae;Ae++)if(te[te.length-1][Ae]!==te[0][Ae])throw Error("First and last Position are not equivalent.")}return qi({type:"Polygon",coordinates:b},A,I)}function ln(b,A,I){if(I===void 0&&(I={}),2>b.length)throw Error("coordinates must be an array of two or more positions");return qi({type:"LineString",coordinates:b},A,I)}function bn(b,A){A===void 0&&(A={});var I={type:"FeatureCollection"};return A.id&&(I.id=A.id),A.bbox&&(I.bbox=A.bbox),I.features=b,I}function Kn(b,A,I){return I===void 0&&(I={}),qi({type:"MultiLineString",coordinates:b},A,I)}function bi(b,A,I){return I===void 0&&(I={}),qi({type:"MultiPoint",coordinates:b},A,I)}function Yi(b,A,I){return I===void 0&&(I={}),qi({type:"MultiPolygon",coordinates:b},A,I)}function Gi(b,A){A===void 0&&(A="kilometers");var I=oi[A];if(!I)throw Error(A+" units is invalid");return b*I}function aa(b,A){A===void 0&&(A="kilometers");var I=oi[A];if(!I)throw Error(A+" units is invalid");return b/I}function Ta(b){return 180*(b%(2*Math.PI))/Math.PI}function R(b){return b%360*Math.PI/180}function _e(b){return!isNaN(b)&&b!==null&&!Array.isArray(b)}function At(b){return!!b&&b.constructor===Object}var Ke=Object.freeze({__proto__:null,earthRadius:ni,factors:oi,unitsFactors:{centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ni,yards:1.0936133},areaFactors:Ei,feature:qi,geometry:function(b,A,I){switch(b){case"Point":return Pr(A).geometry;case"LineString":return ln(A).geometry;case"Polygon":return Cn(A).geometry;case"MultiPoint":return bi(A).geometry;case"MultiLineString":return Kn(A).geometry;case"MultiPolygon":return Yi(A).geometry;default:throw Error(b+" is invalid")}},point:Pr,points:function(b,A,I){return I===void 0&&(I={}),bn(b.map(function(T){return Pr(T,A)}),I)},polygon:Cn,polygons:function(b,A,I){return I===void 0&&(I={}),bn(b.map(function(T){return Cn(T,A)}),I)},lineString:ln,lineStrings:function(b,A,I){return I===void 0&&(I={}),bn(b.map(function(T){return ln(T,A)}),I)},featureCollection:bn,multiLineString:Kn,multiPoint:bi,multiPolygon:Yi,geometryCollection:function(b,A,I){return I===void 0&&(I={}),qi({type:"GeometryCollection",geometries:b},A,I)},round:function(b,A){if(A===void 0&&(A=0),A&&A<0)throw Error("precision must be a positive number");var I=Math.pow(10,A||0);return Math.round(b*I)/I},radiansToLength:Gi,lengthToRadians:aa,lengthToDegrees:function(b,A){return Ta(aa(b,A))},bearingToAzimuth:function(b){var A=b%360;return 0>A&&(A+=360),A},radiansToDegrees:Ta,degreesToRadians:R,convertLength:function(b,A,I){if(A===void 0&&(A="kilometers"),I===void 0&&(I="kilometers"),b<0)throw Error("length must be a positive number");return Gi(aa(b,A),I)},convertArea:function(b,A,I){if(A===void 0&&(A="meters"),I===void 0&&(I="kilometers"),b<0)throw Error("area must be a positive number");var T=Ei[A];if(!T)throw Error("invalid original units");var H=Ei[I];if(!H)throw Error("invalid final units");return b/T*H},isNumber:_e,isObject:At,validateBBox:function(b){if(!b)throw Error("bbox is required");if(!Array.isArray(b))throw Error("bbox must be an Array");if(b.length!==4&&b.length!==6)throw Error("bbox must be an Array of 4 or 6 numbers");b.forEach(function(A){if(!_e(A))throw Error("bbox must only contain numbers")})},validateId:function(b){if(!b)throw Error("id is required");if(["string","number"].indexOf(typeof b)===-1)throw Error("id must be a number or a string")}});function nr(b,A,I){if(b!==null)for(var T,H,te,Ae,qe,Tt,Wt,vr,Fr=0,en=0,zn=b.type,ei=zn==="FeatureCollection",Qn=zn==="Feature",_n=ei?b.features.length:1,Xn=0;_n>Xn;Xn++){qe=(vr=!!(Wt=ei?b.features[Xn].geometry:Qn?b.geometry:b)&&Wt.type==="GeometryCollection")?Wt.geometries.length:1;for(var ai=0;qe>ai;ai++){var nn=0,hi=0;if((Ae=vr?Wt.geometries[ai]:Wt)!==null){Tt=Ae.coordinates;var vi=Ae.type;switch(Fr=!I||vi!=="Polygon"&&vi!=="MultiPolygon"?0:1,vi){case null:break;case"Point":if(A(Tt,en,Xn,nn,hi)===!1)return!1;en++,nn++;break;case"LineString":case"MultiPoint":for(T=0;Tt.length>T;T++){if(A(Tt[T],en,Xn,nn,hi)===!1)return!1;en++,vi==="MultiPoint"&&nn++}vi==="LineString"&&nn++;break;case"Polygon":case"MultiLineString":for(T=0;Tt.length>T;T++){for(H=0;Tt[T].length-Fr>H;H++){if(A(Tt[T][H],en,Xn,nn,hi)===!1)return!1;en++}vi==="MultiLineString"&&nn++,vi==="Polygon"&&hi++}vi==="Polygon"&&nn++;break;case"MultiPolygon":for(T=0;Tt.length>T;T++){for(hi=0,H=0;Tt[T].length>H;H++){for(te=0;Tt[T][H].length-Fr>te;te++){if(A(Tt[T][H][te],en,Xn,nn,hi)===!1)return!1;en++}hi++}nn++}break;case"GeometryCollection":for(T=0;Ae.geometries.length>T;T++)if(nr(Ae.geometries[T],A,I)===!1)return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function wr(b,A){var I;switch(b.type){case"FeatureCollection":for(I=0;b.features.length>I&&A(b.features[I].properties,I)!==!1;I++);break;case"Feature":A(b.properties,0)}}function Wr(b,A){if(b.type==="Feature")A(b,0);else if(b.type==="FeatureCollection")for(var I=0;b.features.length>I&&A(b.features[I],I)!==!1;I++);}function In(b){var A=[];return nr(b,function(I){A.push(I)}),A}function Dn(b,A){var I,T,H,te,Ae,qe,Tt,Wt,vr,Fr,en=0,zn=b.type==="FeatureCollection",ei=b.type==="Feature",Qn=zn?b.features.length:1;for(I=0;Qn>I;I++){for(Wt=zn?b.features[I].properties:ei?b.properties:{},vr=zn?b.features[I].bbox:ei?b.bbox:void 0,Fr=zn?b.features[I].id:ei?b.id:void 0,Ae=(Tt=!!(qe=zn?b.features[I].geometry:ei?b.geometry:b)&&qe.type==="GeometryCollection")?qe.geometries.length:1,H=0;Ae>H;H++)if((te=Tt?qe.geometries[H]:qe)!==null)switch(te.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(A(te,en,Wt,vr,Fr)===!1)return!1;break;case"GeometryCollection":for(T=0;te.geometries.length>T;T++)if(A(te.geometries[T],en,Wt,vr,Fr)===!1)return!1;break;default:throw Error("Unknown Geometry Type")}else if(A(null,en,Wt,vr,Fr)===!1)return!1;en++}}function Mi(b,A,I){var T=I;return Dn(b,function(H,te,Ae,qe,Tt){T=te===0&&I===void 0?H:A(T,H,te,Ae,qe,Tt)}),T}function Bi(b,A){Dn(b,function(I,T,H,te,Ae){var qe,Tt=I===null?null:I.type;switch(Tt){case null:case"Point":case"LineString":case"Polygon":return A(qi(I,H,{bbox:te,id:Ae}),T,0)!==!1&&void 0}switch(Tt){case"MultiPoint":qe="Point";break;case"MultiLineString":qe="LineString";break;case"MultiPolygon":qe="Polygon"}for(var Wt=0;I.coordinates.length>Wt;Wt++)if(A(qi({type:qe,coordinates:I.coordinates[Wt]},H),T,Wt)===!1)return!1})}function io(b,A){Bi(b,function(I,T,H){var te=0;if(I.geometry){var Ae=I.geometry.type;if(Ae!=="Point"&&Ae!=="MultiPoint"){var qe,Tt=0,Wt=0,vr=0;return nr(I,function(Fr,en,zn,ei,Qn){if(qe===void 0||T>Tt||ei>Wt||Qn>vr)return qe=Fr,Tt=T,Wt=ei,vr=Qn,void(te=0);var _n=ln([qe,Fr],I.properties);if(A(_n,T,H,Qn,te)===!1)return!1;te++,qe=Fr})!==!1&&void 0}}})}function co(b,A,I){var T=I,H=!1;return io(b,function(te,Ae,qe,Tt,Wt){T=H===!1&&I===void 0?te:A(T,te,Ae,qe,Tt,Wt),H=!0}),T}function Sa(b,A){if(!b)throw Error("geojson is required");Bi(b,function(I,T,H){if(I.geometry!==null){var te=I.geometry.coordinates;switch(I.geometry.type){case"LineString":if(A(I,T,H,0,0)===!1)return!1;break;case"Polygon":for(var Ae=0;te.length>Ae;Ae++)if(A(ln(te[Ae],I.properties),T,H,Ae)===!1)return!1}}})}var Ko=Object.freeze({__proto__:null,coordAll:In,coordEach:nr,coordReduce:function(b,A,I,T){var H=I;return nr(b,function(te,Ae,qe,Tt,Wt){H=Ae===0&&I===void 0?te:A(H,te,Ae,qe,Tt,Wt)},T),H},featureEach:Wr,featureReduce:function(b,A,I){var T=I;return Wr(b,function(H,te){T=te===0&&I===void 0?H:A(T,H,te)}),T},findPoint:function(b,A){if(!At(A=A||{}))throw Error("options is invalid");var I,T=A.featureIndex||0,H=A.multiFeatureIndex||0,te=A.geometryIndex||0,Ae=A.coordIndex||0,qe=A.properties;switch(b.type){case"FeatureCollection":0>T&&(T=b.features.length+T),qe=qe||b.features[T].properties,I=b.features[T].geometry;break;case"Feature":qe=qe||b.properties,I=b.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=b;break;default:throw Error("geojson is invalid")}if(I===null)return null;var Tt=I.coordinates;switch(I.type){case"Point":return Pr(Tt,qe,A);case"MultiPoint":return 0>H&&(H=Tt.length+H),Pr(Tt[H],qe,A);case"LineString":return 0>Ae&&(Ae=Tt.length+Ae),Pr(Tt[Ae],qe,A);case"Polygon":return 0>te&&(te=Tt.length+te),0>Ae&&(Ae=Tt[te].length+Ae),Pr(Tt[te][Ae],qe,A);case"MultiLineString":return 0>H&&(H=Tt.length+H),0>Ae&&(Ae=Tt[H].length+Ae),Pr(Tt[H][Ae],qe,A);case"MultiPolygon":return 0>H&&(H=Tt.length+H),0>te&&(te=Tt[H].length+te),0>Ae&&(Ae=Tt[H][te].length-Ae),Pr(Tt[H][te][Ae],qe,A)}throw Error("geojson is invalid")},findSegment:function(b,A){if(!At(A=A||{}))throw Error("options is invalid");var I,T=A.featureIndex||0,H=A.multiFeatureIndex||0,te=A.geometryIndex||0,Ae=A.segmentIndex||0,qe=A.properties;switch(b.type){case"FeatureCollection":0>T&&(T=b.features.length+T),qe=qe||b.features[T].properties,I=b.features[T].geometry;break;case"Feature":qe=qe||b.properties,I=b.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=b;break;default:throw Error("geojson is invalid")}if(I===null)return null;var Tt=I.coordinates;switch(I.type){case"Point":case"MultiPoint":return null;case"LineString":return 0>Ae&&(Ae=Tt.length+Ae-1),ln([Tt[Ae],Tt[Ae+1]],qe,A);case"Polygon":return 0>te&&(te=Tt.length+te),0>Ae&&(Ae=Tt[te].length+Ae-1),ln([Tt[te][Ae],Tt[te][Ae+1]],qe,A);case"MultiLineString":return 0>H&&(H=Tt.length+H),0>Ae&&(Ae=Tt[H].length+Ae-1),ln([Tt[H][Ae],Tt[H][Ae+1]],qe,A);case"MultiPolygon":return 0>H&&(H=Tt.length+H),0>te&&(te=Tt[H].length+te),0>Ae&&(Ae=Tt[H][te].length-Ae-1),ln([Tt[H][te][Ae],Tt[H][te][Ae+1]],qe,A)}throw Error("geojson is invalid")},flattenEach:Bi,flattenReduce:function(b,A,I){var T=I;return Bi(b,function(H,te,Ae){T=te===0&&Ae===0&&I===void 0?H:A(T,H,te,Ae)}),T},geomEach:Dn,geomReduce:Mi,lineEach:Sa,lineReduce:function(b,A,I){var T=I;return Sa(b,function(H,te,Ae,qe){T=te===0&&I===void 0?H:A(T,H,te,Ae,qe)}),T},propEach:wr,propReduce:function(b,A,I){var T=I;return wr(b,function(H,te){T=te===0&&I===void 0?H:A(T,H,te)}),T},segmentEach:io,segmentReduce:co});function Co(b){var A=[1/0,1/0,-1/0,-1/0];return nr(b,function(I){A[0]>I[0]&&(A[0]=I[0]),A[1]>I[1]&&(A[1]=I[1]),I[0]>A[2]&&(A[2]=I[0]),I[1]>A[3]&&(A[3]=I[1])}),A}Co.default=Co;var Oo=Object.freeze({__proto__:null,default:Co});function Ho(b){if(!b)throw Error("coord is required");if(!Array.isArray(b)){if(b.type==="Feature"&&b.geometry!==null&&b.geometry.type==="Point")return b.geometry.coordinates;if(b.type==="Point")return b.coordinates}if(Array.isArray(b)&&b.length>=2&&!Array.isArray(b[0])&&!Array.isArray(b[1]))return b;throw Error("coord must be GeoJSON Point or an Array of numbers")}function Io(b){if(Array.isArray(b))return b;if(b.type==="Feature"){if(b.geometry!==null)return b.geometry.coordinates}else if(b.coordinates)return b.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Js(b){return b.type==="Feature"?b.geometry:b}function Il(b,A){return b.type==="FeatureCollection"?"FeatureCollection":b.type==="GeometryCollection"?"GeometryCollection":b.type==="Feature"&&b.geometry!==null?b.geometry.type:b.type}function Ao(b,A,I,T,H){Va(b,A,I||0,T||b.length-1,H||Ws)}function Va(b,A,I,T,H){for(;T>I;){if(T-I>600){var te=T-I+1,Ae=A-I+1,qe=Math.log(te),Tt=.5*Math.exp(2*qe/3),Wt=.5*Math.sqrt(qe*Tt*(te-Tt)/te)*(0>Ae-te/2?-1:1);Va(b,A,Math.max(I,Math.floor(A-Ae*Tt/te+Wt)),Math.min(T,Math.floor(A+(te-Ae)*Tt/te+Wt)),H)}var vr=b[A],Fr=I,en=T;for(gs(b,I,A),H(b[T],vr)>0&&gs(b,I,T);en>Fr;){for(gs(b,Fr,en),Fr++,en--;0>H(b[Fr],vr);)Fr++;for(;H(b[en],vr)>0;)en--}H(b[I],vr)===0?gs(b,I,en):gs(b,++en,T),en>A||(I=en+1),A>en||(T=en-1)}}function gs(b,A,I){var T=b[A];b[A]=b[I],b[I]=T}function Ws(b,A){return A>b?-1:b>A?1:0}function bs(b,A,I){if(!I)return A.indexOf(b);for(let T=0;A.length>T;T++)if(I(b,A[T]))return T;return-1}function Ps(b,A){Xs(b,0,b.children.length,A,b)}function Xs(b,A,I,T,H){H||(H=Us(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(let te=A;I>te;te++){const Ae=b.children[te];gl(H,b.leaf?T(Ae):Ae)}return H}function gl(b,A){return b.minX=Math.min(b.minX,A.minX),b.minY=Math.min(b.minY,A.minY),b.maxX=Math.max(b.maxX,A.maxX),b.maxY=Math.max(b.maxY,A.maxY),b}function jf(b,A){return b.minX-A.minX}function Mu(b,A){return b.minY-A.minY}function yl(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function lc(b){return b.maxX-b.minX+(b.maxY-b.minY)}function Lc(b,A){const I=Math.max(b.minX,A.minX),T=Math.max(b.minY,A.minY),H=Math.min(b.maxX,A.maxX),te=Math.min(b.maxY,A.maxY);return Math.max(0,H-I)*Math.max(0,te-T)}function dh(b,A){return!(b.minX>A.minX||b.minY>A.minY||A.maxX>b.maxX||A.maxY>b.maxY)}function _l(b,A){return!(A.minX>b.maxX||A.minY>b.maxY||b.minX>A.maxX||b.minY>A.maxY)}function Us(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function th(b,A,I,T,H){const te=[A,I];for(;te.length;){if(T>=(I=te.pop())-(A=te.pop()))continue;const Ae=A+Math.ceil((I-A)/T/2)*T;Ao(b,Ae,A,I,H),te.push(A,Ae,Ae,I)}}var Df=Object.freeze({__proto__:null,default:class{constructor(b=9){this._maxEntries=Math.max(4,b),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(b){let A=this.data;const I=[];if(!_l(b,A))return I;const T=this.toBBox,H=[];for(;A;){for(let te=0;A.children.length>te;te++){const Ae=A.children[te],qe=A.leaf?T(Ae):Ae;_l(b,qe)&&(A.leaf?I.push(Ae):dh(b,qe)?this._all(Ae,I):H.push(Ae))}A=H.pop()}return I}collides(b){let A=this.data;if(!_l(b,A))return!1;const I=[];for(;A;){for(let T=0;A.children.length>T;T++){const H=A.children[T],te=A.leaf?this.toBBox(H):H;if(_l(b,te)){if(A.leaf||dh(b,te))return!0;I.push(H)}}A=I.pop()}return!1}load(b){if(!b||!b.length)return this;if(this._minEntries>b.length){for(let I=0;b.length>I;I++)this.insert(b[I]);return this}let A=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(A.height>this.data.height){const I=this.data;this.data=A,A=I}this._insert(A,this.data.height-A.height-1,!0)}else this.data=A;return this}insert(b){return b&&this._insert(b,this.data.height-1),this}clear(){return this.data=Us([]),this}remove(b,A){if(!b)return this;let I=this.data;const T=this.toBBox(b),H=[],te=[];let Ae,qe,Tt;for(;I||H.length;){if(I||(I=H.pop(),qe=H[H.length-1],Ae=te.pop(),Tt=!0),I.leaf){const Wt=bs(b,I.children,A);if(Wt!==-1)return I.children.splice(Wt,1),H.push(I),this._condense(H),this}Tt||I.leaf||!dh(I,T)?qe?(Ae++,I=qe.children[Ae],Tt=!1):I=null:(H.push(I),te.push(Ae),Ae=0,qe=I,I=I.children[0])}return this}toBBox(b){return b}compareMinX(b,A){return b.minX-A.minX}compareMinY(b,A){return b.minY-A.minY}toJSON(){return this.data}fromJSON(b){return this.data=b,this}_all(b,A){const I=[];for(;b;)b.leaf?A.push(...b.children):I.push(...b.children),b=I.pop();return A}_build(b,A,I,T){const H=I-A+1;let te,Ae=this._maxEntries;if(Ae>=H)return te=Us(b.slice(A,I+1)),Ps(te,this.toBBox),te;T||(Ae=Math.ceil(H/Math.pow(Ae,(T=Math.ceil(Math.log(H)/Math.log(Ae)))-1))),te=Us([]),te.leaf=!1,te.height=T;const qe=Math.ceil(H/Ae),Tt=qe*Math.ceil(Math.sqrt(Ae));th(b,A,I,Tt,this.compareMinX);for(let Wt=A;I>=Wt;Wt+=Tt){const vr=Math.min(Wt+Tt-1,I);th(b,Wt,vr,qe,this.compareMinY);for(let Fr=Wt;vr>=Fr;Fr+=qe)te.children.push(this._build(b,Fr,Math.min(Fr+qe-1,vr),T-1))}return Ps(te,this.toBBox),te}_chooseSubtree(b,A,I,T){for(;T.push(A),!A.leaf&&T.length-1!==I;){let Ae,qe=1/0,Tt=1/0;for(let Wt=0;A.children.length>Wt;Wt++){const vr=A.children[Wt],Fr=yl(vr),en=(Math.max((te=vr).maxX,(H=b).maxX)-Math.min(te.minX,H.minX))*(Math.max(te.maxY,H.maxY)-Math.min(te.minY,H.minY))-Fr;Tt>en?(Tt=en,qe=qe>Fr?Fr:qe,Ae=vr):en===Tt&&qe>Fr&&(qe=Fr,Ae=vr)}A=Ae||A.children[0]}var H,te;return A}_insert(b,A,I){const T=I?b:this.toBBox(b),H=[],te=this._chooseSubtree(T,this.data,A,H);for(te.children.push(b),gl(te,T);A>=0&&H[A].children.length>this._maxEntries;)this._split(H,A),A--;this._adjustParentBBoxes(T,H,A)}_split(b,A){const I=b[A],T=I.children.length,H=this._minEntries;this._chooseSplitAxis(I,H,T);const te=this._chooseSplitIndex(I,H,T),Ae=Us(I.children.splice(te,I.children.length-te));Ae.height=I.height,Ae.leaf=I.leaf,Ps(I,this.toBBox),Ps(Ae,this.toBBox),A?b[A-1].children.push(Ae):this._splitRoot(I,Ae)}_splitRoot(b,A){this.data=Us([b,A]),this.data.height=b.height+1,this.data.leaf=!1,Ps(this.data,this.toBBox)}_chooseSplitIndex(b,A,I){let T,H=1/0,te=1/0;for(let Ae=A;I-A>=Ae;Ae++){const qe=Xs(b,0,Ae,this.toBBox),Tt=Xs(b,Ae,I,this.toBBox),Wt=Lc(qe,Tt),vr=yl(qe)+yl(Tt);H>Wt?(H=Wt,T=Ae,te=te>vr?vr:te):Wt===H&&te>vr&&(te=vr,T=Ae)}return T||I-A}_chooseSplitAxis(b,A,I){const T=b.leaf?this.compareMinX:jf,H=b.leaf?this.compareMinY:Mu,te=this._allDistMargin(b,A,I,T);this._allDistMargin(b,A,I,H)>te&&b.children.sort(T)}_allDistMargin(b,A,I,T){b.children.sort(T);const H=this.toBBox,te=Xs(b,0,A,H),Ae=Xs(b,I-A,I,H);let qe=lc(te)+lc(Ae);for(let Tt=A;I-A>Tt;Tt++){const Wt=b.children[Tt];gl(te,b.leaf?H(Wt):Wt),qe+=lc(te)}for(let Tt=I-A-1;Tt>=A;Tt--){const Wt=b.children[Tt];gl(Ae,b.leaf?H(Wt):Wt),qe+=lc(Ae)}return qe}_adjustParentBBoxes(b,A,I){for(let T=I;T>=0;T--)gl(A[T],b)}_condense(b){for(let A,I=b.length-1;I>=0;I--)b[I].children.length===0?I>0?(A=b[I-1].children,A.splice(A.indexOf(b[I]),1)):this.clear():Ps(b[I],this.toBBox)}}});function Cf(b,A){return A>b?-1:b>A?1:0}var lf=Object.freeze({__proto__:null,default:class{constructor(b=[],A=Cf){if(this.data=b,this.length=this.data.length,this.compare=A,this.length>0)for(let I=(this.length>>1)-1;I>=0;I--)this._down(I)}push(b){this.data.push(b),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const b=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),b}peek(){return this.data[0]}_up(b){const{data:A,compare:I}=this,T=A[b];for(;b>0;){const H=b-1>>1,te=A[H];if(I(T,te)>=0)break;A[b]=te,b=H}A[b]=T}_down(b){const{data:A,compare:I}=this,T=this.length>>1,H=A[b];for(;T>b;){let te=1+(b<<1),Ae=A[te];const qe=te+1;if(this.length>qe&&0>I(A[qe],Ae)&&(te=qe,Ae=A[qe]),I(Ae,H)>=0)break;A[b]=Ae,b=te}A[b]=H}}}),gd=function(b,A,I,T){var H=b[0],te=b[1],Ae=!1;I===void 0&&(I=0),T===void 0&&(T=A.length);for(var qe=(T-I)/2,Tt=0,Wt=qe-1;qe>Tt;Wt=Tt++){var vr=A[I+2*Tt+0],Fr=A[I+2*Tt+1],en=A[I+2*Wt+1];Fr>te!=en>te&&(A[I+2*Wt+0]-vr)*(te-Fr)/(en-Fr)+vr>H&&(Ae=!Ae)}return Ae},Kh=function(b,A,I,T){var H=b[0],te=b[1],Ae=!1;I===void 0&&(I=0),T===void 0&&(T=A.length);for(var qe=T-I,Tt=0,Wt=qe-1;qe>Tt;Wt=Tt++){var vr=A[Tt+I][0],Fr=A[Tt+I][1],en=A[Wt+I][1];Fr>te!=en>te&&(A[Wt+I][0]-vr)*(te-Fr)/(en-Fr)+vr>H&&(Ae=!Ae)}return Ae},yc=function(b,A,I,T){return A.length>0&&Array.isArray(A[0])?Kh(b,A,I,T):gd(b,A,I,T)},Eh=gd;yc.nested=Kh,yc.flat=Eh;var cf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof g.g!="undefined"?g.g:typeof self!="undefined"?self:{};function Af(b,A,I){return b(I={path:A,exports:{},require:function(T,H){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},I.exports),I.exports}function _f(b){if(b.__esModule)return b;var A=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(b).forEach(function(I){var T=Object.getOwnPropertyDescriptor(b,I);Object.defineProperty(A,I,T.get?T:{enumerable:!0,get:function(){return b[I]}})}),A}var kc=Af(function(b,A){(function(I){const H=33306690738754706e-32;function te(Qn,_n,Xn,ai,nn){let hi,vi,Li,Vi,sa=_n[0],ua=ai[0],Lo=0,Fa=0;ua>sa==ua>-sa?(hi=sa,sa=_n[++Lo]):(hi=ua,ua=ai[++Fa]);let go=0;if(Qn>Lo&&Xn>Fa)for(ua>sa==ua>-sa?(Li=hi-((vi=sa+hi)-sa),sa=_n[++Lo]):(Li=hi-((vi=ua+hi)-ua),ua=ai[++Fa]),hi=vi,Li!==0&&(nn[go++]=Li);Qn>Lo&&Xn>Fa;)ua>sa==ua>-sa?(Li=hi-((vi=hi+sa)-(Vi=vi-hi))+(sa-Vi),sa=_n[++Lo]):(Li=hi-((vi=hi+ua)-(Vi=vi-hi))+(ua-Vi),ua=ai[++Fa]),hi=vi,Li!==0&&(nn[go++]=Li);for(;Qn>Lo;)Li=hi-((vi=hi+sa)-(Vi=vi-hi))+(sa-Vi),sa=_n[++Lo],hi=vi,Li!==0&&(nn[go++]=Li);for(;Xn>Fa;)Li=hi-((vi=hi+ua)-(Vi=vi-hi))+(ua-Vi),ua=ai[++Fa],hi=vi,Li!==0&&(nn[go++]=Li);return hi===0&&go!==0||(nn[go++]=hi),go}function Ae(Qn){return new Float64Array(Qn)}const qe=33306690738754716e-32,Tt=22204460492503146e-32,Wt=11093356479670487e-47,vr=Ae(4),Fr=Ae(8),en=Ae(12),zn=Ae(16),ei=Ae(4);I.orient2d=function(Qn,_n,Xn,ai,nn,hi){const vi=(_n-hi)*(Xn-nn),Li=(Qn-nn)*(ai-hi),Vi=vi-Li;if(vi===0||Li===0||vi>0!=Li>0)return Vi;const sa=Math.abs(vi+Li);return qe*sa>Math.abs(Vi)?-function(ua,Lo,Fa,go,qs,e,i){let l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un,ri;const gi=ua-qs,yi=Fa-qs,Ii=Lo-e,Ji=go-e;Q=(dn=(Nt=gi-(ut=(we=134217729*gi)-(we-gi)))*(qt=Ji-(Ut=(we=134217729*Ji)-(we-Ji)))-((qr=gi*Ji)-ut*Ut-Nt*Ut-ut*qt))-(lr=dn-(Un=(Nt=Ii-(ut=(we=134217729*Ii)-(we-Ii)))*(qt=yi-(Ut=(we=134217729*yi)-(we-yi)))-((cn=Ii*yi)-ut*Ut-Nt*Ut-ut*qt))),vr[0]=dn-(lr+Q)+(Q-Un),Q=(Kr=qr-((xr=qr+lr)-(Q=xr-qr))+(lr-Q))-(lr=Kr-cn),vr[1]=Kr-(lr+Q)+(Q-cn),Q=(ri=xr+lr)-xr,vr[2]=xr-(ri-Q)+(lr-Q),vr[3]=ri;let Wi=function(bo,Eo){let Ja=Eo[0];for(let Ss=1;bo>Ss;Ss++)Ja+=Eo[Ss];return Ja}(4,vr),ja=Tt*i;if(Wi>=ja||-Wi>=ja||(l=ua-(gi+(Q=ua-gi))+(Q-qs),P=Fa-(yi+(Q=Fa-yi))+(Q-qs),y=Lo-(Ii+(Q=Lo-Ii))+(Q-e),j=go-(Ji+(Q=go-Ji))+(Q-e),l===0&&y===0&&P===0&&j===0)||(ja=Wt*i+H*Math.abs(Wi),(Wi+=gi*j+Ji*l-(Ii*P+yi*y))>=ja||-Wi>=ja))return Wi;Q=(dn=(Nt=l-(ut=(we=134217729*l)-(we-l)))*(qt=Ji-(Ut=(we=134217729*Ji)-(we-Ji)))-((qr=l*Ji)-ut*Ut-Nt*Ut-ut*qt))-(lr=dn-(Un=(Nt=y-(ut=(we=134217729*y)-(we-y)))*(qt=yi-(Ut=(we=134217729*yi)-(we-yi)))-((cn=y*yi)-ut*Ut-Nt*Ut-ut*qt))),ei[0]=dn-(lr+Q)+(Q-Un),Q=(Kr=qr-((xr=qr+lr)-(Q=xr-qr))+(lr-Q))-(lr=Kr-cn),ei[1]=Kr-(lr+Q)+(Q-cn),Q=(ri=xr+lr)-xr,ei[2]=xr-(ri-Q)+(lr-Q),ei[3]=ri;const Jn=te(4,vr,4,ei,Fr);Q=(dn=(Nt=gi-(ut=(we=134217729*gi)-(we-gi)))*(qt=j-(Ut=(we=134217729*j)-(we-j)))-((qr=gi*j)-ut*Ut-Nt*Ut-ut*qt))-(lr=dn-(Un=(Nt=Ii-(ut=(we=134217729*Ii)-(we-Ii)))*(qt=P-(Ut=(we=134217729*P)-(we-P)))-((cn=Ii*P)-ut*Ut-Nt*Ut-ut*qt))),ei[0]=dn-(lr+Q)+(Q-Un),Q=(Kr=qr-((xr=qr+lr)-(Q=xr-qr))+(lr-Q))-(lr=Kr-cn),ei[1]=Kr-(lr+Q)+(Q-cn),Q=(ri=xr+lr)-xr,ei[2]=xr-(ri-Q)+(lr-Q),ei[3]=ri;const la=te(Jn,Fr,4,ei,en);Q=(dn=(Nt=l-(ut=(we=134217729*l)-(we-l)))*(qt=j-(Ut=(we=134217729*j)-(we-j)))-((qr=l*j)-ut*Ut-Nt*Ut-ut*qt))-(lr=dn-(Un=(Nt=y-(ut=(we=134217729*y)-(we-y)))*(qt=P-(Ut=(we=134217729*P)-(we-P)))-((cn=y*P)-ut*Ut-Nt*Ut-ut*qt))),ei[0]=dn-(lr+Q)+(Q-Un),Q=(Kr=qr-((xr=qr+lr)-(Q=xr-qr))+(lr-Q))-(lr=Kr-cn),ei[1]=Kr-(lr+Q)+(Q-cn),Q=(ri=xr+lr)-xr,ei[2]=xr-(ri-Q)+(lr-Q),ei[3]=ri;const ea=te(la,en,4,ei,zn);return zn[ea-1]}(Qn,_n,Xn,ai,nn,hi,sa):Vi},I.orient2dfast=function(Qn,_n,Xn,ai,nn,hi){return(_n-hi)*(Xn-nn)-(Qn-nn)*(ai-hi)},Object.defineProperty(I,"__esModule",{value:!0})})(A)}),Ff=_f(Df),Zl=_f(lf),Dc=kc.orient2d;Zl.default&&(Zl=Zl.default);var ad=rh;function rh(b,A,I){A=Math.max(0,A===void 0?2:A),I=I||0;var T=function(ai){for(var nn=ai[0],hi=ai[0],vi=ai[0],Li=ai[0],Vi=0;ai.length>Vi;Vi++){var sa=ai[Vi];nn[0]>sa[0]&&(nn=sa),sa[0]>vi[0]&&(vi=sa),hi[1]>sa[1]&&(hi=sa),sa[1]>Li[1]&&(Li=sa)}var ua=[nn,hi,vi,Li],Lo=ua.slice();for(Vi=0;ai.length>Vi;Vi++)yc(ai[Vi],ua)||Lo.push(ai[Vi]);return function(Fa){Fa.sort(ff);for(var go=[],qs=0;Fa.length>qs;qs++){for(;go.length>=2&&0>=su(go[go.length-2],go[go.length-1],Fa[qs]);)go.pop();go.push(Fa[qs])}for(var e=[],i=Fa.length-1;i>=0;i--){for(;e.length>=2&&0>=su(e[e.length-2],e[e.length-1],Fa[i]);)e.pop();e.push(Fa[i])}return e.pop(),go.pop(),go.concat(e)}(Lo)}(b),H=new Ff(16);H.toBBox=function(ai){return{minX:ai[0],minY:ai[1],maxX:ai[0],maxY:ai[1]}},H.compareMinX=function(ai,nn){return ai[0]-nn[0]},H.compareMinY=function(ai,nn){return ai[1]-nn[1]},H.load(b);for(var te,Ae=[],qe=0;T.length>qe;qe++){var Tt=T[qe];H.remove(Tt),te=tc(Tt,te),Ae.push(te)}var Wt=new Ff(16);for(qe=0;Ae.length>qe;qe++)Wt.insert(Fc(Ae[qe]));for(var vr=A*A,Fr=I*I;Ae.length;){var en=Ae.shift(),zn=en.p,ei=en.next.p,Qn=Tf(zn,ei);if(Qn>=Fr){var _n=Qn/vr;(Tt=od(H,en.prev.p,zn,ei,en.next.next.p,_n,Wt))&&Math.min(Tf(Tt,zn),Tf(Tt,ei))<=_n&&(Ae.push(en),Ae.push(tc(Tt,en)),H.remove(Tt),Wt.remove(en),Wt.insert(Fc(en)),Wt.insert(Fc(en.next)))}}en=te;var Xn=[];do Xn.push(en.p),en=en.next;while(en!==te);return Xn.push(en.p),Xn}function od(b,A,I,T,H,te,Ae){for(var qe=new Zl([],Yo),Tt=b.data;Tt;){for(var Wt=0;Tt.children.length>Wt;Wt++){var vr=Tt.children[Wt],Fr=Tt.leaf?_c(vr,I,T):Gs(I,T,vr);te<Fr||qe.push({node:vr,dist:Fr})}for(;qe.length&&!qe.peek().node.children;){var en=qe.pop(),zn=en.node,ei=_c(zn,A,I),Qn=_c(zn,T,H);if(ei>en.dist&&Qn>en.dist&&dl(I,zn,Ae)&&dl(T,zn,Ae))return zn}(Tt=qe.pop())&&(Tt=Tt.node)}return null}function Yo(b,A){return b.dist-A.dist}function Gs(b,A,I){if(Kl(b,I)||Kl(A,I))return 0;var T=Hl(b[0],b[1],A[0],A[1],I.minX,I.minY,I.maxX,I.minY);if(T===0)return 0;var H=Hl(b[0],b[1],A[0],A[1],I.minX,I.minY,I.minX,I.maxY);if(H===0)return 0;var te=Hl(b[0],b[1],A[0],A[1],I.maxX,I.minY,I.maxX,I.maxY);if(te===0)return 0;var Ae=Hl(b[0],b[1],A[0],A[1],I.minX,I.maxY,I.maxX,I.maxY);return Ae===0?0:Math.min(T,H,te,Ae)}function Kl(b,A){return!(A.minX>b[0]||b[0]>A.maxX||A.minY>b[1]||b[1]>A.maxY)}function dl(b,A,I){for(var T,H,te,Ae,qe=I.search({minX:Math.min(b[0],A[0]),minY:Math.min(b[1],A[1]),maxX:Math.max(b[0],A[0]),maxY:Math.max(b[1],A[1])}),Tt=0;qe.length>Tt;Tt++)if(H=qe[Tt].next.p,te=b,(T=qe[Tt].p)!==(Ae=A)&&H!==te&&su(T,H,te)>0!=su(T,H,Ae)>0&&su(te,Ae,T)>0!=su(te,Ae,H)>0)return!1;return!0}function su(b,A,I){return Dc(b[0],b[1],A[0],A[1],I[0],I[1])}function Fc(b){var A=b.p,I=b.next.p;return b.minX=Math.min(A[0],I[0]),b.minY=Math.min(A[1],I[1]),b.maxX=Math.max(A[0],I[0]),b.maxY=Math.max(A[1],I[1]),b}function tc(b,A){var I={p:b,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return A?(I.next=A.next,I.prev=A,A.next.prev=I,A.next=I):(I.prev=I,I.next=I),I}function Tf(b,A){var I=b[0]-A[0],T=b[1]-A[1];return I*I+T*T}function _c(b,A,I){var T=A[0],H=A[1],te=I[0]-T,Ae=I[1]-H;if(te!==0||Ae!==0){var qe=((b[0]-T)*te+(b[1]-H)*Ae)/(te*te+Ae*Ae);qe>1?(T=I[0],H=I[1]):qe>0&&(T+=te*qe,H+=Ae*qe)}return(te=b[0]-T)*te+(Ae=b[1]-H)*Ae}function Hl(b,A,I,T,H,te,Ae,qe){var Tt,Wt,vr,Fr,en=I-b,zn=T-A,ei=Ae-H,Qn=qe-te,_n=b-H,Xn=A-te,ai=en*en+zn*zn,nn=en*ei+zn*Qn,hi=ei*ei+Qn*Qn,vi=en*_n+zn*Xn,Li=ei*_n+Qn*Xn,Vi=ai*hi-nn*nn,sa=Vi,ua=Vi;Vi===0?(Wt=0,sa=1,Fr=Li,ua=hi):(Fr=ai*Li-nn*vi,0>(Wt=nn*Li-hi*vi)?(Wt=0,Fr=Li,ua=hi):Wt>sa&&(Wt=sa,Fr=Li+nn,ua=hi)),0>Fr?(Fr=0,0>-vi?Wt=0:-vi>ai?Wt=sa:(Wt=-vi,sa=ai)):Fr>ua&&(Fr=ua,0>-vi+nn?Wt=0:-vi+nn>ai?Wt=sa:(Wt=-vi+nn,sa=ai));var Lo=(1-(vr=Fr===0?0:Fr/ua))*H+vr*Ae-((1-(Tt=Wt===0?0:Wt/sa))*b+Tt*I),Fa=(1-vr)*te+vr*qe-((1-Tt)*A+Tt*T);return Lo*Lo+Fa*Fa}function ff(b,A){return b[0]===A[0]?b[1]-A[1]:b[0]-A[0]}function xc(b,A,I){I===void 0&&(I={});var T=Ho(b),H=Ho(A),te=R(H[1]-T[1]),Ae=R(H[0]-T[0]),qe=R(T[1]),Tt=R(H[1]),Wt=Math.pow(Math.sin(te/2),2)+Math.pow(Math.sin(Ae/2),2)*Math.cos(qe)*Math.cos(Tt);return Gi(2*Math.atan2(Math.sqrt(Wt),Math.sqrt(1-Wt)),I.units)}function Yh(b){return function(A,I){I===void 0&&(I={});var T=Number(A[0]),H=Number(A[1]),te=Number(A[2]),Ae=Number(A[3]);if(A.length===6)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var qe=[T,H];return Cn([[qe,[te,H],[te,Ae],[T,Ae],qe]],I.properties,{bbox:A,id:I.id})}(Co(b))}function Uh(b,A,I,T){T===void 0&&(T={});var H=Ho(b),te=R(H[0]),Ae=R(H[1]),qe=R(I),Tt=aa(A,T.units),Wt=Math.asin(Math.sin(Ae)*Math.cos(Tt)+Math.cos(Ae)*Math.sin(Tt)*Math.cos(qe));return Pr([Ta(te+Math.atan2(Math.sin(qe)*Math.sin(Tt)*Math.cos(Ae),Math.cos(Tt)-Math.sin(Ae)*Math.sin(Wt))),Ta(Wt)],T.properties)}function Gc(b,A,I){if(I===void 0&&(I={}),I.final===!0)return function(Wt,vr){var Fr=Gc(vr,Wt);return Fr=(Fr+180)%360}(b,A);var T=Ho(b),H=Ho(A),te=R(T[0]),Ae=R(H[0]),qe=R(T[1]),Tt=R(H[1]);return Ta(Math.atan2(Math.sin(Ae-te)*Math.cos(Tt),Math.cos(qe)*Math.sin(Tt)-Math.sin(qe)*Math.cos(Tt)*Math.cos(Ae-te)))}function Mf(b,A){A===void 0&&(A={});var I=Co(b);return Pr([(I[0]+I[2])/2,(I[1]+I[3])/2],A.properties,A)}function nh(b,A){A===void 0&&(A={});var I=0,T=0,H=0;return nr(b,function(te){I+=te[0],T+=te[1],H++},!0),Pr([I/H,T/H],A.properties)}function qn(b,A){switch(A===void 0&&(A={}),Il(b)){case"Point":return Pr(Ho(b),A.properties);case"Polygon":var I=[];nr(b,function(nn){I.push(nn)});var T,H,te,Ae,qe,Tt,Wt,vr,Fr=nh(b,{properties:A.properties}),en=Fr.geometry.coordinates,zn=0,ei=0,Qn=0,_n=I.map(function(nn){return[nn[0]-en[0],nn[1]-en[1]]});for(T=0;I.length-1>T;T++)Qn+=vr=(Ae=(H=_n[T])[0])*(Wt=(te=_n[T+1])[1])-(qe=te[0])*(Tt=H[1]),zn+=(Ae+qe)*vr,ei+=(Tt+Wt)*vr;if(Qn===0)return Fr;var Xn=1/(6*(.5*Qn));return Pr([en[0]+Xn*zn,en[1]+Xn*ei],A.properties);default:var ai=function(nn,hi){hi===void 0&&(hi={}),hi.concavity=hi.concavity||1/0;var vi=[];if(nr(nn,function(Vi){vi.push([Vi[0],Vi[1]])}),!vi.length)return null;var Li=ad(vi,hi.concavity);return Li.length>3?Cn([Li]):null}(b);return ai?qn(ai,{properties:A.properties}):nh(b,{properties:A.properties})}}function ca(b){if(!b)throw Error("geojson is required");var A=[];return Bi(b,function(I){(function(T,H){var te=[],Ae=T.geometry;if(Ae!==null){switch(Ae.type){case"Polygon":te=Io(Ae);break;case"LineString":te=[Io(Ae)]}te.forEach(function(qe){var Tt=function(Wt,vr){var Fr=[];return Wt.reduce(function(en,zn){var ei,Qn,_n,Xn,ai,nn,hi=ln([en,zn],vr);return hi.bbox=[(ai=(Qn=zn)[0])>(_n=(ei=en)[0])?_n:ai,(nn=Qn[1])>(Xn=ei[1])?Xn:nn,_n>ai?_n:ai,Xn>nn?Xn:nn],Fr.push(hi),zn}),Fr}(qe,T.properties);Tt.forEach(function(Wt){Wt.id=H.length,H.push(Wt)})})}})(I,A)}),bn(A)}ad.default=rh;function $i(b,A,I){if(!I)return A.indexOf(b);for(let T=0;A.length>T;T++)if(I(b,A[T]))return T;return-1}function $o(b,A){lo(b,0,b.children.length,A,b)}function lo(b,A,I,T,H){H||(H=Ul(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(let te=A;I>te;te++){const Ae=b.children[te];Es(H,b.leaf?T(Ae):Ae)}return H}function Es(b,A){return b.minX=Math.min(b.minX,A.minX),b.minY=Math.min(b.minY,A.minY),b.maxX=Math.max(b.maxX,A.maxX),b.maxY=Math.max(b.maxY,A.maxY),b}function tl(b,A){return b.minX-A.minX}function al(b,A){return b.minY-A.minY}function Tl(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function Lh(b){return b.maxX-b.minX+(b.maxY-b.minY)}function xf(b,A){const I=Math.max(b.minX,A.minX),T=Math.max(b.minY,A.minY),H=Math.min(b.maxX,A.maxX),te=Math.min(b.maxY,A.maxY);return Math.max(0,H-I)*Math.max(0,te-T)}function qh(b,A){return!(b.minX>A.minX||b.minY>A.minY||A.maxX>b.maxX||A.maxY>b.maxY)}function $h(b,A){return!(A.minX>b.maxX||A.minY>b.maxY||b.minX>A.maxX||b.minY>A.maxY)}function Ul(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Rl(b,A,I,T,H){const te=[A,I];for(;te.length;){if(T>=(I=te.pop())-(A=te.pop()))continue;const Ae=A+Math.ceil((I-A)/T/2)*T;Ao(b,Ae,A,I,H),te.push(A,Ae,Ae,I)}}var ol=Object.freeze({__proto__:null,default:class{constructor(b=9){this._maxEntries=Math.max(4,b),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(b){let A=this.data;const I=[];if(!$h(b,A))return I;const T=this.toBBox,H=[];for(;A;){for(let te=0;A.children.length>te;te++){const Ae=A.children[te],qe=A.leaf?T(Ae):Ae;$h(b,qe)&&(A.leaf?I.push(Ae):qh(b,qe)?this._all(Ae,I):H.push(Ae))}A=H.pop()}return I}collides(b){let A=this.data;if(!$h(b,A))return!1;const I=[];for(;A;){for(let T=0;A.children.length>T;T++){const H=A.children[T],te=A.leaf?this.toBBox(H):H;if($h(b,te)){if(A.leaf||qh(b,te))return!0;I.push(H)}}A=I.pop()}return!1}load(b){if(!b||!b.length)return this;if(this._minEntries>b.length){for(let I=0;b.length>I;I++)this.insert(b[I]);return this}let A=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(A.height>this.data.height){const I=this.data;this.data=A,A=I}this._insert(A,this.data.height-A.height-1,!0)}else this.data=A;return this}insert(b){return b&&this._insert(b,this.data.height-1),this}clear(){return this.data=Ul([]),this}remove(b,A){if(!b)return this;let I=this.data;const T=this.toBBox(b),H=[],te=[];let Ae,qe,Tt;for(;I||H.length;){if(I||(I=H.pop(),qe=H[H.length-1],Ae=te.pop(),Tt=!0),I.leaf){const Wt=$i(b,I.children,A);if(Wt!==-1)return I.children.splice(Wt,1),H.push(I),this._condense(H),this}Tt||I.leaf||!qh(I,T)?qe?(Ae++,I=qe.children[Ae],Tt=!1):I=null:(H.push(I),te.push(Ae),Ae=0,qe=I,I=I.children[0])}return this}toBBox(b){return b}compareMinX(b,A){return b.minX-A.minX}compareMinY(b,A){return b.minY-A.minY}toJSON(){return this.data}fromJSON(b){return this.data=b,this}_all(b,A){const I=[];for(;b;)b.leaf?A.push(...b.children):I.push(...b.children),b=I.pop();return A}_build(b,A,I,T){const H=I-A+1;let te,Ae=this._maxEntries;if(Ae>=H)return te=Ul(b.slice(A,I+1)),$o(te,this.toBBox),te;T||(Ae=Math.ceil(H/Math.pow(Ae,(T=Math.ceil(Math.log(H)/Math.log(Ae)))-1))),te=Ul([]),te.leaf=!1,te.height=T;const qe=Math.ceil(H/Ae),Tt=qe*Math.ceil(Math.sqrt(Ae));Rl(b,A,I,Tt,this.compareMinX);for(let Wt=A;I>=Wt;Wt+=Tt){const vr=Math.min(Wt+Tt-1,I);Rl(b,Wt,vr,qe,this.compareMinY);for(let Fr=Wt;vr>=Fr;Fr+=qe)te.children.push(this._build(b,Fr,Math.min(Fr+qe-1,vr),T-1))}return $o(te,this.toBBox),te}_chooseSubtree(b,A,I,T){for(;T.push(A),!A.leaf&&T.length-1!==I;){let Ae,qe=1/0,Tt=1/0;for(let Wt=0;A.children.length>Wt;Wt++){const vr=A.children[Wt],Fr=Tl(vr),en=(Math.max((te=vr).maxX,(H=b).maxX)-Math.min(te.minX,H.minX))*(Math.max(te.maxY,H.maxY)-Math.min(te.minY,H.minY))-Fr;Tt>en?(Tt=en,qe=qe>Fr?Fr:qe,Ae=vr):en===Tt&&qe>Fr&&(qe=Fr,Ae=vr)}A=Ae||A.children[0]}var H,te;return A}_insert(b,A,I){const T=I?b:this.toBBox(b),H=[],te=this._chooseSubtree(T,this.data,A,H);for(te.children.push(b),Es(te,T);A>=0&&H[A].children.length>this._maxEntries;)this._split(H,A),A--;this._adjustParentBBoxes(T,H,A)}_split(b,A){const I=b[A],T=I.children.length,H=this._minEntries;this._chooseSplitAxis(I,H,T);const te=this._chooseSplitIndex(I,H,T),Ae=Ul(I.children.splice(te,I.children.length-te));Ae.height=I.height,Ae.leaf=I.leaf,$o(I,this.toBBox),$o(Ae,this.toBBox),A?b[A-1].children.push(Ae):this._splitRoot(I,Ae)}_splitRoot(b,A){this.data=Ul([b,A]),this.data.height=b.height+1,this.data.leaf=!1,$o(this.data,this.toBBox)}_chooseSplitIndex(b,A,I){let T,H=1/0,te=1/0;for(let Ae=A;I-A>=Ae;Ae++){const qe=lo(b,0,Ae,this.toBBox),Tt=lo(b,Ae,I,this.toBBox),Wt=xf(qe,Tt),vr=Tl(qe)+Tl(Tt);H>Wt?(H=Wt,T=Ae,te=te>vr?vr:te):Wt===H&&te>vr&&(te=vr,T=Ae)}return T||I-A}_chooseSplitAxis(b,A,I){const T=b.leaf?this.compareMinX:tl,H=b.leaf?this.compareMinY:al,te=this._allDistMargin(b,A,I,T);this._allDistMargin(b,A,I,H)>te&&b.children.sort(T)}_allDistMargin(b,A,I,T){b.children.sort(T);const H=this.toBBox,te=lo(b,0,A,H),Ae=lo(b,I-A,I,H);let qe=Lh(te)+Lh(Ae);for(let Tt=A;I-A>Tt;Tt++){const Wt=b.children[Tt];Es(te,b.leaf?H(Wt):Wt),qe+=Lh(te)}for(let Tt=I-A-1;Tt>=A;Tt--){const Wt=b.children[Tt];Es(Ae,b.leaf?H(Wt):Wt),qe+=Lh(Ae)}return qe}_adjustParentBBoxes(b,A,I){for(let T=I;T>=0;T--)Es(A[T],b)}_condense(b){for(let A,I=b.length-1;I>=0;I--)b[I].children.length===0?I>0?(A=b[I-1].children,A.splice(A.indexOf(b[I]),1)):this.clear():$o(b[I],this.toBBox)}}}),uu=_f(ol),Bc=_f(Ke),cc=_f(Ko),ao=_f(Oo).default,Ml=cc.featureEach,Hf=Bc.featureCollection;function fl(b){var A=new uu(b);return A.insert=function(I){if(I.type!=="Feature")throw Error("invalid feature");return I.bbox=I.bbox?I.bbox:ao(I),uu.prototype.insert.call(this,I)},A.load=function(I){var T=[];return Array.isArray(I)?I.forEach(function(H){if(H.type!=="Feature")throw Error("invalid features");H.bbox=H.bbox?H.bbox:ao(H),T.push(H)}):Ml(I,function(H){if(H.type!=="Feature")throw Error("invalid features");H.bbox=H.bbox?H.bbox:ao(H),T.push(H)}),uu.prototype.load.call(this,T)},A.remove=function(I,T){if(I.type!=="Feature")throw Error("invalid feature");return I.bbox=I.bbox?I.bbox:ao(I),uu.prototype.remove.call(this,I,T)},A.clear=function(){return uu.prototype.clear.call(this)},A.search=function(I){var T=uu.prototype.search.call(this,this.toBBox(I));return Hf(T)},A.collides=function(I){return uu.prototype.collides.call(this,this.toBBox(I))},A.all=function(){var I=uu.prototype.all.call(this);return Hf(I)},A.toJSON=function(){return uu.prototype.toJSON.call(this)},A.fromJSON=function(I){return uu.prototype.fromJSON.call(this,I)},A.toBBox=function(I){var T;if(I.bbox)T=I.bbox;else if(Array.isArray(I)&&I.length===4)T=I;else if(Array.isArray(I)&&I.length===6)T=[I[0],I[1],I[3],I[4]];else if(I.type==="Feature")T=ao(I);else{if(I.type!=="FeatureCollection")throw Error("invalid geojson");T=ao(I)}return{minX:T[0],minY:T[1],maxX:T[2],maxY:T[3]}},A}var Vl=fl;function Ll(b,A){var I={},T=[];if(b.type==="LineString"&&(b=qi(b)),A.type==="LineString"&&(A=qi(A)),b.type==="Feature"&&A.type==="Feature"&&b.geometry!==null&&A.geometry!==null&&b.geometry.type==="LineString"&&A.geometry.type==="LineString"&&b.geometry.coordinates.length===2&&A.geometry.coordinates.length===2){var H=jh(b,A);return H&&T.push(H),bn(T)}var te=Vl();return te.load(ca(A)),Wr(ca(b),function(Ae){Wr(te.search(Ae),function(qe){var Tt=jh(Ae,qe);if(Tt){var Wt=Io(Tt).join(",");I[Wt]||(I[Wt]=!0,T.push(Tt))}})}),bn(T)}function jh(b,A){var I=Io(b),T=Io(A);if(I.length!==2)throw Error("<intersects> line1 must only contain 2 coordinates");if(T.length!==2)throw Error("<intersects> line2 must only contain 2 coordinates");var H=I[0][0],te=I[0][1],Ae=I[1][0],qe=I[1][1],Tt=T[0][0],Wt=T[0][1],vr=T[1][0],Fr=T[1][1],en=(Fr-Wt)*(Ae-H)-(vr-Tt)*(qe-te),zn=(vr-Tt)*(te-Wt)-(Fr-Wt)*(H-Tt),ei=(Ae-H)*(te-Wt)-(qe-te)*(H-Tt);if(en===0)return null;var Qn=zn/en,_n=ei/en;return 0>Qn||Qn>1||0>_n||_n>1?null:Pr([H+Qn*(Ae-H),te+Qn*(qe-te)])}Vl.default=fl;var qa=6378137;function Yl(b){return Mi(b,function(A,I){return A+function(T){var H,te=0;switch(T.type){case"Polygon":return Vf(T.coordinates);case"MultiPolygon":for(H=0;T.coordinates.length>H;H++)te+=Vf(T.coordinates[H]);return te;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(I)},0)}function Vf(b){var A=0;if(b&&b.length>0){A+=Math.abs(ih(b[0]));for(var I=1;b.length>I;I++)A-=Math.abs(ih(b[I]))}return A}function ih(b){var A,I,T,H,te,Ae,qe=0,Tt=b.length;if(Tt>2){for(Ae=0;Tt>Ae;Ae++)Ae===Tt-2?(T=Tt-2,H=Tt-1,te=0):Ae===Tt-1?(T=Tt-1,H=0,te=1):(T=Ae,H=Ae+1,te=Ae+2),A=b[T],I=b[H],qe+=(Vu(b[te][0])-Vu(A[0]))*Math.sin(Vu(I[1]));qe=qe*qa*qa/2}return qe}function Vu(b){return b*Math.PI/180}function hf(b,A){return A===void 0&&(A={}),co(b,function(I,T){var H=T.geometry.coordinates;return I+xc(H[0],H[1],A)},0)}function Hh(b,A){A===void 0&&(A={});var I=Js(b);switch(A.properties||b.type!=="Feature"||(A.properties=b.properties),I.type){case"Polygon":return function(T,H){H===void 0&&(H={});var te=Js(T),Ae=te.coordinates,qe=H.properties?H.properties:T.type==="Feature"?T.properties:{};return bc(Ae,qe)}(I,A);case"MultiPolygon":return function(T,H){H===void 0&&(H={});var te=Js(T),Ae=te.coordinates,qe=H.properties?H.properties:T.type==="Feature"?T.properties:{},Tt=[];return Ae.forEach(function(Wt){Tt.push(bc(Wt,qe))}),bn(Tt)}(I,A);default:throw Error("invalid poly")}}function bc(b,A){return b.length>1?Kn(b,A):ln(b[0],A)}function Ec(b){for(var A,I,T=Io(b),H=0,te=1;T.length>te;)A=I||T[0],H+=((I=T[te])[0]-A[0])*(I[1]+A[1]),te++;return H>0}var ah=Af(function(b){var A=Object.prototype.hasOwnProperty,I="~";function T(){}function H(Tt,Wt,vr){this.fn=Tt,this.context=Wt,this.once=vr||!1}function te(Tt,Wt,vr,Fr,en){if(typeof vr!="function")throw new TypeError("The listener must be a function");var zn=new H(vr,Fr||Tt,en),ei=I?I+Wt:Wt;return Tt._events[ei]?Tt._events[ei].fn?Tt._events[ei]=[Tt._events[ei],zn]:Tt._events[ei].push(zn):(Tt._events[ei]=zn,Tt._eventsCount++),Tt}function Ae(Tt,Wt){--Tt._eventsCount==0?Tt._events=new T:delete Tt._events[Wt]}function qe(){this._events=new T,this._eventsCount=0}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(I=!1)),qe.prototype.eventNames=function(){var Tt,Wt,vr=[];if(this._eventsCount===0)return vr;for(Wt in Tt=this._events)A.call(Tt,Wt)&&vr.push(I?Wt.slice(1):Wt);return Object.getOwnPropertySymbols?vr.concat(Object.getOwnPropertySymbols(Tt)):vr},qe.prototype.listeners=function(Tt){var Wt=this._events[I?I+Tt:Tt];if(!Wt)return[];if(Wt.fn)return[Wt.fn];for(var vr=0,Fr=Wt.length,en=Array(Fr);Fr>vr;vr++)en[vr]=Wt[vr].fn;return en},qe.prototype.listenerCount=function(Tt){var Wt=this._events[I?I+Tt:Tt];return Wt?Wt.fn?1:Wt.length:0},qe.prototype.emit=function(Tt,Wt,vr,Fr,en,zn){var ei=I?I+Tt:Tt;if(!this._events[ei])return!1;var Qn,_n,Xn=this._events[ei],ai=arguments.length;if(Xn.fn){switch(Xn.once&&this.removeListener(Tt,Xn.fn,void 0,!0),ai){case 1:return Xn.fn.call(Xn.context),!0;case 2:return Xn.fn.call(Xn.context,Wt),!0;case 3:return Xn.fn.call(Xn.context,Wt,vr),!0;case 4:return Xn.fn.call(Xn.context,Wt,vr,Fr),!0;case 5:return Xn.fn.call(Xn.context,Wt,vr,Fr,en),!0;case 6:return Xn.fn.call(Xn.context,Wt,vr,Fr,en,zn),!0}for(_n=1,Qn=Array(ai-1);ai>_n;_n++)Qn[_n-1]=arguments[_n];Xn.fn.apply(Xn.context,Qn)}else{var nn,hi=Xn.length;for(_n=0;hi>_n;_n++)switch(Xn[_n].once&&this.removeListener(Tt,Xn[_n].fn,void 0,!0),ai){case 1:Xn[_n].fn.call(Xn[_n].context);break;case 2:Xn[_n].fn.call(Xn[_n].context,Wt);break;case 3:Xn[_n].fn.call(Xn[_n].context,Wt,vr);break;case 4:Xn[_n].fn.call(Xn[_n].context,Wt,vr,Fr);break;default:if(!Qn)for(nn=1,Qn=Array(ai-1);ai>nn;nn++)Qn[nn-1]=arguments[nn];Xn[_n].fn.apply(Xn[_n].context,Qn)}}return!0},qe.prototype.on=function(Tt,Wt,vr){return te(this,Tt,Wt,vr,!1)},qe.prototype.once=function(Tt,Wt,vr){return te(this,Tt,Wt,vr,!0)},qe.prototype.removeListener=function(Tt,Wt,vr,Fr){var en=I?I+Tt:Tt;if(!this._events[en])return this;if(!Wt)return Ae(this,en),this;var zn=this._events[en];if(zn.fn)zn.fn!==Wt||Fr&&!zn.once||vr&&zn.context!==vr||Ae(this,en);else{for(var ei=0,Qn=[],_n=zn.length;_n>ei;ei++)(zn[ei].fn!==Wt||Fr&&!zn[ei].once||vr&&zn[ei].context!==vr)&&Qn.push(zn[ei]);Qn.length?this._events[en]=Qn.length===1?Qn[0]:Qn:Ae(this,en)}return this},qe.prototype.removeAllListeners=function(Tt){var Wt;return Tt?this._events[Wt=I?I+Tt:Tt]&&Ae(this,Wt):(this._events=new T,this._eventsCount=0),this},qe.prototype.off=qe.prototype.removeListener,qe.prototype.addListener=qe.prototype.on,qe.prefixed=I,qe.EventEmitter=qe,b.exports=qe}),Wc=function(b){or(I,b);var A=Vr(I);function I(T,H){var te,Ae=H.style;return As(this,I),(te=A.call(this)).scene=void 0,te.style=void 0,te.layers=void 0,te.data=[],te.scene=T,te.style=Ae,te.layers=te.getLayers(),te.layers.forEach(function(qe){T.addLayer(qe)}),Ae.callback instanceof Function&&Ae.callback(te.layers),te}return hr(I,[{key:"show",value:function(){this.layers.forEach(function(T){T.show()})}},{key:"hide",value:function(){this.layers.forEach(function(T){T.hide()})}},{key:"setData",value:function(T){this.data=T;var H=bn(T);this.layers.forEach(function(te){te.setData(H)})}},{key:"destroy",value:function(){var T=this;this.layers.forEach(function(H){T.scene.removeLayer(H)})}}]),I}(ah.EventEmitter),kh=function(b){or(I,b);var A=Vr(I);function I(){return As(this,I),A.apply(this,arguments)}return hr(I,[{key:"getLayers",value:function(){var T=this.style,H=T.normal,te=T.style,Ae=T.options;return[new M.LineLayer(Ae!=null?Ae:{}).source(bn([])).size(H.size).color(H.color).shape("line").style(te)]}}]),I}(Wc),Sc=function(b){var A=typeof b;return b!=null&&(A=="object"||A=="function")},Vh=typeof cf=="object"&&cf&&cf.Object===Object&&cf,ql=typeof self=="object"&&self&&self.Object===Object&&self,gu=Vh||ql||Function("return this")(),Ks=function(){return gu.Date.now()},Gf=/\s/,Bf=function(b){for(var A=b.length;A--&&Gf.test(b.charAt(A)););return A},eu=/^\s+/,Pl=function(b){return b&&b.slice(0,Bf(b)+1).replace(eu,"")},Xc=gu.Symbol,Nc=Object.prototype,Ql=Nc.hasOwnProperty,fc=Nc.toString,oo=Xc?Xc.toStringTag:void 0,Do=function(b){var A=Ql.call(b,oo),I=b[oo];try{b[oo]=void 0;var T=!0}catch(te){}var H=fc.call(b);return T&&(A?b[oo]=I:delete b[oo]),H},nu=Object.prototype.toString,Jl=function(b){return nu.call(b)},xl=Xc?Xc.toStringTag:void 0,mu=function(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":xl&&xl in Object(b)?Do(b):Jl(b)},Ku=function(b){return b!=null&&typeof b=="object"},Kc=function(b){return typeof b=="symbol"||Ku(b)&&mu(b)=="[object Symbol]"},Gh=/^[-+]0x[0-9a-f]+$/i,Yu=/^0b[01]+$/i,bl=/^0o[0-7]+$/i,yd=parseInt,ph=function(b){if(typeof b=="number")return b;if(Kc(b))return NaN;if(Sc(b)){var A=typeof b.valueOf=="function"?b.valueOf():b;b=Sc(A)?A+"":A}if(typeof b!="string")return b===0?b:+b;b=Pl(b);var I=Yu.test(b);return I||bl.test(b)?yd(b.slice(2),I?2:8):Gh.test(b)?NaN:+b},wc=Math.max,Yc=Math.min,kl=function(b,A,I){var T,H,te,Ae,qe,Tt,Wt=0,vr=!1,Fr=!1,en=!0;if(typeof b!="function")throw new TypeError("Expected a function");function zn(nn){var hi=T,vi=H;return T=H=void 0,Wt=nn,Ae=b.apply(vi,hi)}function ei(nn){return Wt=nn,qe=setTimeout(_n,A),vr?zn(nn):Ae}function Qn(nn){var hi=nn-Tt;return Tt===void 0||hi>=A||0>hi||Fr&&nn-Wt>=te}function _n(){var nn=Ks();if(Qn(nn))return Xn(nn);qe=setTimeout(_n,function(hi){var vi=A-(hi-Tt);return Fr?Yc(vi,te-(hi-Wt)):vi}(nn))}function Xn(nn){return qe=void 0,en&&T?zn(nn):(T=H=void 0,Ae)}function ai(){var nn=Ks(),hi=Qn(nn);if(T=arguments,H=this,Tt=nn,hi){if(qe===void 0)return ei(Tt);if(Fr)return clearTimeout(qe),qe=setTimeout(_n,A),zn(Tt)}return qe===void 0&&(qe=setTimeout(_n,A)),Ae}return A=ph(A)||0,Sc(I)&&(vr=!!I.leading,te=(Fr="maxWait"in I)?wc(ph(I.maxWait)||0,A):te,en="trailing"in I?!!I.trailing:en),ai.cancel=function(){qe!==void 0&&clearTimeout(qe),Wt=0,T=Tt=H=qe=void 0},ai.flush=function(){return qe===void 0?Ae:Xn(Ks())},ai},Dr=function(b){or(I,b);var A=Vr(I);function I(){var T;As(this,I);for(var H=arguments.length,te=Array(H),Ae=0;H>Ae;Ae++)te[Ae]=arguments[Ae];return(T=A.call.apply(A,[this].concat(te))).onMouseMove=function(qe){T.emit(v.RenderEvent.Mousemove,qe)},T.onMouseOut=function(qe){T.emit(v.RenderEvent.Mouseout,qe)},T.onMouseDown=function(qe){T.emit(v.RenderEvent.Dragstart,qe)},T.onDragging=function(qe){T.emit(v.RenderEvent.Dragging,qe)},T.onDragEnd=kl(function(qe){T.emit(v.RenderEvent.Dragend,qe)},0),T.onUnClick=function(qe){T.emit(v.RenderEvent.UnClick,qe)},T.enableHover=function(){var qe,Tt;T.disableHover(),(qe=T.layers[0])===null||qe===void 0||qe.on(v.LayerEvent.Mousemove,T.onMouseMove),(Tt=T.layers[0])===null||Tt===void 0||Tt.on(v.LayerEvent.Mouseout,T.onMouseOut)},T.disableHover=function(){var qe,Tt;(qe=T.layers[0])===null||qe===void 0||qe.off(v.LayerEvent.Mousemove,T.onMouseMove),(Tt=T.layers[0])===null||Tt===void 0||Tt.off(v.LayerEvent.Mouseout,T.onMouseOut)},T}return hr(I,[{key:"getLayers",value:function(){var T=this.style,H=T.normal,te=T.hover,Ae=T.active,qe=T.style,Tt=T.options;return[new M.LineLayer(Tt!=null?Tt:{}).source(bn([])).size("isHover*isActive",function(Wt,vr){return vr?Ae.size:Wt?te.size:H.size}).color("isHover*isActive",function(Wt,vr){return vr?Ae.color:Wt?te.color:H.color}).shape("line").style(qe)]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(v.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(v.LayerEvent.UnClick,this.onUnClick)}}]),I}(Wc),Dl=function(b){or(I,b);var A=Vr(I);function I(){var T;As(this,I);for(var H=arguments.length,te=Array(H),Ae=0;H>Ae;Ae++)te[Ae]=arguments[Ae];return(T=A.call.apply(A,[this].concat(te))).onMouseMove=function(qe){T.emit(v.RenderEvent.Mousemove,qe)},T.onMouseOut=function(qe){T.emit(v.RenderEvent.Mouseout,qe)},T.onMouseDown=function(qe){T.emit(v.RenderEvent.Click,qe)},T}return hr(I,[{key:"getLayers",value:function(){var T=this.style,H=T.normal,te=T.style,Ae=T.options,qe=H.shape,Tt=H.size,Wt=H.color,vr=H.stroke;return[new M.PointLayer(Ae!=null?Ae:{}).source(bn([])).size(Tt).color(Wt).shape(qe).style(ki({stroke:vr},te))]}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown)}},{key:"disableClick",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown)}},{key:"enableHover",value:function(){var T,H;this.disableHover(),(T=this.layers[0])===null||T===void 0||T.on(v.LayerEvent.Mousemove,this.onMouseMove),(H=this.layers[0])===null||H===void 0||H.on(v.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var T,H;(T=this.layers[0])===null||T===void 0||T.off(v.LayerEvent.Mousemove,this.onMouseMove),(H=this.layers[0])===null||H===void 0||H.off(v.LayerEvent.Mouseout,this.onMouseOut)}}]),I}(Wc),Vo=function(b){or(I,b);var A=Vr(I);function I(){var T;As(this,I);for(var H=arguments.length,te=Array(H),Ae=0;H>Ae;Ae++)te[Ae]=arguments[Ae];return(T=A.call.apply(A,[this].concat(te))).onCreate=function(qe){T.emit(v.RenderEvent.UnClick,qe)},T.onMouseMove=function(qe){T.emit(v.RenderEvent.Mousemove,qe)},T.onMouseOut=function(qe){T.emit(v.RenderEvent.Mouseout,qe)},T.onMouseDown=function(qe){T.emit(v.RenderEvent.Dragstart,qe)},T.onDragging=function(qe){T.emit(v.RenderEvent.Dragging,qe)},T.onDragEnd=kl(function(qe){T.emit(v.RenderEvent.Dragend,qe)},0),T.onClick=function(qe){T.emit(v.RenderEvent.Click,qe)},T.onContextmenu=function(qe){T.emit(v.RenderEvent.Contextmenu,qe)},T}return hr(I,[{key:"getLayers",value:function(){var T=this.style,H=T.normal,te=T.hover,Ae=T.active,qe=T.style,Tt=T.options;return[new M.PointLayer(Tt!=null?Tt:{}).source(bn([])).size("isHover*isActive",function(Wt,vr){return vr?Ae.size:Wt?te.size:H.size}).color("isHover*isActive",function(Wt,vr){return vr?Ae.color:Wt?te.color:H.color}).shape("isHover*isActive",function(Wt,vr){return vr?Ae.shape:Wt?te.shape:H.shape}).style(ki({stroke:["isHover*isActive",function(Wt,vr){return vr?Ae.stroke:Wt?te.stroke:H.stroke}]},qe))]}},{key:"enableCreate",value:function(){this.disableCreate(),this.layers[0].on(v.LayerEvent.UnClick,this.onCreate)}},{key:"disableCreate",value:function(){this.layers[0].off(v.LayerEvent.UnClick,this.onCreate)}},{key:"enableHover",value:function(){var T,H;this.disableHover(),(T=this.layers[0])===null||T===void 0||T.on(v.LayerEvent.Mousemove,this.onMouseMove),(H=this.layers[0])===null||H===void 0||H.on(v.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var T,H;(T=this.layers[0])===null||T===void 0||T.off(v.LayerEvent.Mousemove,this.onMouseMove),(H=this.layers[0])===null||H===void 0||H.off(v.LayerEvent.Mouseout,this.onMouseOut)}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(v.LayerEvent.Click,this.onClick)}},{key:"disableClick",value:function(){this.layers[0].off(v.LayerEvent.Click,this.onClick)}},{key:"enableContextMenu",value:function(){this.disableContextMenu(),this.layers[0].on(v.LayerEvent.Contextmenu,this.onContextmenu)}},{key:"disableContextMenu",value:function(){this.layers[0].off(v.LayerEvent.Contextmenu,this.onContextmenu)}}]),I}(Wc),qo=function(b){or(I,b);var A=Vr(I);function I(){var T;As(this,I);for(var H=arguments.length,te=Array(H),Ae=0;H>Ae;Ae++)te[Ae]=arguments[Ae];return(T=A.call.apply(A,[this].concat(te))).onMouseMove=function(qe){T.emit(v.RenderEvent.Mousemove,qe)},T.onMouseOut=function(qe){T.emit(v.RenderEvent.Mouseout,qe)},T.onMouseDown=function(qe){T.emit(v.RenderEvent.Dragstart,qe)},T.onDragging=function(qe){T.emit(v.RenderEvent.Dragging,qe)},T.onDragEnd=kl(function(qe){T.emit(v.RenderEvent.Dragend,qe)},0),T.onUnClick=function(qe){T.emit(v.RenderEvent.UnClick,qe)},T.enableHover=function(){var qe,Tt;T.disableHover(),(qe=T.layers[0])===null||qe===void 0||qe.on(v.LayerEvent.Mousemove,T.onMouseMove),(Tt=T.layers[0])===null||Tt===void 0||Tt.on(v.LayerEvent.Mouseout,T.onMouseOut)},T.disableHover=function(){var qe,Tt;(qe=T.layers[0])===null||qe===void 0||qe.off(v.LayerEvent.Mousemove,T.onMouseMove),(Tt=T.layers[0])===null||Tt===void 0||Tt.off(v.LayerEvent.Mouseout,T.onMouseOut)},T}return hr(I,[{key:"getLayers",value:function(){var T=this.style,H=T.normal,te=T.hover,Ae=T.active,qe=T.style,Tt=T.options,Wt=new M.PolygonLayer(Tt!=null?Tt:{});return Wt.source(bn([])).color("isHover*isActive",function(vr,Fr){return Fr?Ae.color:vr?te.color:H.color}).style(qe),[Wt]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(v.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(v.LayerEvent.UnClick,this.onUnClick)}}]),I}(Wc),du=function(b){or(I,b);var A=Vr(I);function I(T){var H;return As(this,I),(H=A.call(this)).scene=void 0,H.previousClick=void 0,H.onDblClick=function(te){var Ae,qe,Tt=(Ae=(qe=te.pixel)!==null&&qe!==void 0?qe:te.point)!==null&&Ae!==void 0?Ae:{},Wt=Tt.x,vr=Wt===void 0?0:Wt,Fr=Tt.y,en=Fr===void 0?0:Fr,zn=Date.now();if(H.previousClick){var ei=H.previousClick,Qn=ei.y;300>zn-ei.time&&5>Math.abs(vr-ei.x)&&5>Math.abs(en-Qn)&&H.emit(v.RenderEvent.DblClick,te)}H.previousClick={x:vr,y:en,time:zn}},H.onMouseMove=function(te){H.emit(v.RenderEvent.Mousemove,te)},H.onMouseDown=function(te){H.emit(v.RenderEvent.Dragstart,te)},H.onDragging=function(te){H.emit(v.RenderEvent.Dragging,te)},H.onDragEnd=kl(function(te){H.emit(v.RenderEvent.Dragend,te)},0),H.scene=T,H}return hr(I,[{key:"enableDrag",value:function(){this.disableDrag(),this.scene.on(v.SceneEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.scene.off(v.SceneEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableMouseMove",value:function(){this.disableMouseMove(),this.scene.on(v.SceneEvent.Mousemove,this.onMouseMove)}},{key:"disableMouseMove",value:function(){this.scene.off(v.SceneEvent.Mousemove,this.onMouseMove)}},{key:"enableDblClick",value:function(){this.disableDblClick(),this.scene.on(v.SceneEvent.Mousedown,this.onDblClick)}},{key:"disableDblClick",value:function(){this.scene.off(v.SceneEvent.Mousedown,this.onDblClick)}}]),I}(ah),Dh=function(b){or(I,b);var A=Vr(I);function I(){return As(this,I),A.apply(this,arguments)}return hr(I,[{key:"getLayers",value:function(){var T=this.style,H=T.normal,te=T.active,Ae=T.style,qe=T.options;return[new M.PointLayer(qe!=null?qe:{}).source(bn([])).size("isActive",function(Tt){return Tt?te.size:H.size}).color("isActive",function(Tt){return Tt?te.color:H.color}).shape("text","text").style(ki({stroke:["isActive",function(Tt){return Tt?te.stroke:H.stroke}]},Ae))]}}]),I}(Wc),Wf={point:Vo,line:Dr,dashLine:kh,midPoint:Dl,text:Dh,polygon:qo},zc="#1990FF",df="#ED9D48",rc={blend:"normal",pickingBuffer:5},ys={color:zc,shape:"circle",size:6,stroke:"#ffffff"},bf={color:df,shape:"circle",size:6,stroke:"#ffffff"},Xf={shape:"circle",size:6,color:df,stroke:"#ffffff"},rl={options:rc,normal:ys,hover:ki(ki({},ys),{},{size:8}),active:ki(ki({},ys),{},{size:8,color:df}),style:{strokeWidth:2}},Cc={options:rc,normal:bf,hover:ki(ki({},bf),{},{size:8}),active:ki(ki({},bf),{},{size:8}),style:{strokeWidth:2}},Zc={color:zc,size:12,stroke:"#ffffff"},sd={point:Cc,line:{options:rc,normal:{color:zc,size:2},hover:{color:zc,size:2},active:{color:df,size:2},style:{}},polygon:{options:rc,normal:{color:zc},hover:{color:zc},active:{color:df},style:{opacity:.15}},midPoint:{options:rc,normal:Xf},dashLine:{options:rc,normal:{color:df,size:2},style:{lineType:"dash",dashArray:[6,6]}},text:{options:rc,normal:Zc,active:ki(ki({},Zc),{},{color:df}),style:{fontWeight:"800",textOffset:[0,Zc.size+6],textAllowOverlap:!0,strokeWidth:2}}},qc=function(b,A){return b===A||b!=b&&A!=A},f=function(b,A){for(var I=b.length;I--;)if(qc(b[I][0],A))return I;return-1},m=Array.prototype.splice,p=function(b){var A=this.__data__,I=f(A,b);return I>=0&&(I==A.length-1?A.pop():m.call(A,I,1),--this.size,!0)},E=function(b){var A=this.__data__,I=f(A,b);return 0>I?void 0:A[I][1]},Y=function(b){return f(this.__data__,b)>-1},Ce=function(b,A){var I=this.__data__,T=f(I,b);return 0>T?(++this.size,I.push([b,A])):I[T][1]=A,this};function ze(b){var A=-1,I=b==null?0:b.length;for(this.clear();++A<I;){var T=b[A];this.set(T[0],T[1])}}ze.prototype.clear=function(){this.__data__=[],this.size=0},ze.prototype.delete=p,ze.prototype.get=E,ze.prototype.has=Y,ze.prototype.set=Ce;var gt=ze,Gt=function(){this.__data__=new gt,this.size=0},sr=function(b){var A=this.__data__,I=A.delete(b);return this.size=A.size,I},Mr=function(b){return this.__data__.get(b)},Or=function(b){return this.__data__.has(b)},Br,yn=function(b){if(!Sc(b))return!1;var A=mu(b);return A=="[object Function]"||A=="[object GeneratorFunction]"||A=="[object AsyncFunction]"||A=="[object Proxy]"},hn=gu["__core-js_shared__"],kn=(Br=/[^.]+$/.exec(hn&&hn.keys&&hn.keys.IE_PROTO||""))?"Symbol(src)_1."+Br:"",an=function(b){return!!kn&&kn in b},Rn=Function.prototype.toString,$n=function(b){if(b!=null){try{return Rn.call(b)}catch(A){}try{return b+""}catch(A){}}return""},di=/^\[object .+?Constructor\]$/,Di=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ti=function(b){return!(!Sc(b)||an(b))&&(yn(b)?Di:di).test($n(b))},Fi=function(b,A){return b==null?void 0:b[A]},ra=function(b,A){var I=Fi(b,A);return Ti(I)?I:void 0},Da=ra(gu,"Map"),Na=ra(Object,"create"),po=function(b){var A=this.has(b)&&delete this.__data__[b];return this.size-=A?1:0,A},No=Object.prototype.hasOwnProperty,is=function(b){var A=this.__data__;if(Na){var I=A[b];return I==="__lodash_hash_undefined__"?void 0:I}return No.call(A,b)?A[b]:void 0},rs=Object.prototype.hasOwnProperty,Ls=function(b){var A=this.__data__;return Na?A[b]!==void 0:rs.call(A,b)},vo=function(b,A){var I=this.__data__;return this.size+=this.has(b)?0:1,I[b]=Na&&A===void 0?"__lodash_hash_undefined__":A,this};function ds(b){var A=-1,I=b==null?0:b.length;for(this.clear();++A<I;){var T=b[A];this.set(T[0],T[1])}}ds.prototype.clear=function(){this.__data__=Na?Na(null):{},this.size=0},ds.prototype.delete=po,ds.prototype.get=is,ds.prototype.has=Ls,ds.prototype.set=vo;var Ns=ds,cs=function(b){var A=typeof b;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?b!=="__proto__":b===null},Qo=function(b,A){var I=b.__data__;return cs(A)?I[typeof A=="string"?"string":"hash"]:I.map},$s=function(b){var A=Qo(this,b).delete(b);return this.size-=A?1:0,A},Cs=function(b){return Qo(this,b).get(b)},_s=function(b){return Qo(this,b).has(b)},El=function(b,A){var I=Qo(this,b),T=I.size;return I.set(b,A),this.size+=I.size==T?0:1,this};function nl(b){var A=-1,I=b==null?0:b.length;for(this.clear();++A<I;){var T=b[A];this.set(T[0],T[1])}}nl.prototype.clear=function(){this.size=0,this.__data__={hash:new Ns,map:new(Da||gt),string:new Ns}},nl.prototype.delete=$s,nl.prototype.get=Cs,nl.prototype.has=_s,nl.prototype.set=El;var qu=nl,Ac=function(b,A){var I=this.__data__;if(I instanceof gt){var T=I.__data__;if(!Da||199>T.length)return T.push([b,A]),this.size=++I.size,this;I=this.__data__=new qu(T)}return I.set(b,A),this.size=I.size,this};function Qu(b){var A=this.__data__=new gt(b);this.size=A.size}Qu.prototype.clear=Gt,Qu.prototype.delete=sr,Qu.prototype.get=Mr,Qu.prototype.has=Or,Qu.prototype.set=Ac;var Ju=Qu,Tc=function(b,A){for(var I=-1,T=b==null?0:b.length;++I<T&&A(b[I],I,b)!==!1;);return b},ec=function(){try{var b=ra(Object,"defineProperty");return b({},"",{}),b}catch(A){}}(),Pf=function(b,A,I){A=="__proto__"&&ec?ec(b,A,{configurable:!0,enumerable:!0,value:I,writable:!0}):b[A]=I},Ef=Object.prototype.hasOwnProperty,$l=function(b,A,I){var T=b[A];Ef.call(b,A)&&qc(T,I)&&(I!==void 0||A in b)||Pf(b,A,I)},Uc=function(b,A,I,T){var H=!I;I||(I={});for(var te=-1,Ae=A.length;++te<Ae;){var qe=A[te],Tt=T?T(I[qe],b[qe],qe,I,b):void 0;Tt===void 0&&(Tt=b[qe]),H?Pf(I,qe,Tt):$l(I,qe,Tt)}return I},Qh=function(b,A){for(var I=-1,T=Array(b);++I<b;)T[I]=A(I);return T},Jh=function(b){return Ku(b)&&mu(b)=="[object Arguments]"},Sh=Object.prototype,Of=Sh.hasOwnProperty,wh=Sh.propertyIsEnumerable,pf=Jh(function(){return arguments}())?Jh:function(b){return Ku(b)&&Of.call(b,"callee")&&!wh.call(b,"callee")},oh=pf,Qc=Array.isArray,nc=function(){return!1},ic=Af(function(b,A){var I=A&&!A.nodeType&&A,T=I&&b&&!b.nodeType&&b,H=T&&T.exports===I?gu.Buffer:void 0;b.exports=(H?H.isBuffer:void 0)||nc}),Ch=/^(?:0|[1-9]\d*)$/,Fh=function(b,A){var I=typeof b;return!!(A=A==null?9007199254740991:A)&&(I=="number"||I!="symbol"&&Ch.test(b))&&b>-1&&b%1==0&&A>b},ku=function(b){return typeof b=="number"&&b>-1&&b%1==0&&9007199254740991>=b},yu={};yu["[object Float32Array]"]=yu["[object Float64Array]"]=yu["[object Int8Array]"]=yu["[object Int16Array]"]=yu["[object Int32Array]"]=yu["[object Uint8Array]"]=yu["[object Uint8ClampedArray]"]=yu["[object Uint16Array]"]=yu["[object Uint32Array]"]=!0,yu["[object Arguments]"]=yu["[object Array]"]=yu["[object ArrayBuffer]"]=yu["[object Boolean]"]=yu["[object DataView]"]=yu["[object Date]"]=yu["[object Error]"]=yu["[object Function]"]=yu["[object Map]"]=yu["[object Number]"]=yu["[object Object]"]=yu["[object RegExp]"]=yu["[object Set]"]=yu["[object String]"]=yu["[object WeakMap]"]=!1;var Jc=function(b){return Ku(b)&&ku(b.length)&&!!yu[mu(b)]},sh=function(b){return function(A){return b(A)}},vh=Af(function(b,A){var I=A&&!A.nodeType&&A,T=I&&b&&!b.nodeType&&b,H=T&&T.exports===I&&Vh.process,te=function(){try{var Ae=T&&T.require&&T.require("util").types;return Ae||H&&H.binding&&H.binding("util")}catch(qe){}}();b.exports=te}),Nf=vh&&vh.isTypedArray,mh=Nf?sh(Nf):Jc,If=Object.prototype.hasOwnProperty,Rf=function(b,A){var I=Qc(b),T=!I&&oh(b),H=!I&&!T&&ic(b),te=!I&&!T&&!H&&mh(b),Ae=I||T||H||te,qe=Ae?Qh(b.length,String):[],Tt=qe.length;for(var Wt in b)!A&&!If.call(b,Wt)||Ae&&(Wt=="length"||H&&(Wt=="offset"||Wt=="parent")||te&&(Wt=="buffer"||Wt=="byteLength"||Wt=="byteOffset")||Fh(Wt,Tt))||qe.push(Wt);return qe},vf=Object.prototype,ue=function(b){var A=b&&b.constructor;return b===(typeof A=="function"&&A.prototype||vf)},Rr=function(b,A){return function(I){return b(A(I))}},Mt=Rr(Object.keys,Object),St=Object.prototype.hasOwnProperty,Vt=function(b){if(!ue(b))return Mt(b);var A=[];for(var I in Object(b))St.call(b,I)&&I!="constructor"&&A.push(I);return A},ar=function(b){return b!=null&&ku(b.length)&&!yn(b)},Xr=function(b){return ar(b)?Rf(b):Vt(b)},vn=function(b,A){return b&&Uc(A,Xr(A),b)},Sn=function(b){var A=[];if(b!=null)for(var I in Object(b))A.push(I);return A},Fn=Object.prototype.hasOwnProperty,Ci=function(b){if(!Sc(b))return Sn(b);var A=ue(b),I=[];for(var T in b)(T!="constructor"||!A&&Fn.call(b,T))&&I.push(T);return I},Hi=function(b){return ar(b)?Rf(b,!0):Ci(b)},ba=function(b,A){return b&&Uc(A,Hi(A),b)},mo=Af(function(b,A){var I=A&&!A.nodeType&&A,T=I&&b&&!b.nodeType&&b,H=T&&T.exports===I?gu.Buffer:void 0,te=H?H.allocUnsafe:void 0;b.exports=function(Ae,qe){if(qe)return Ae.slice();var Tt=Ae.length,Wt=te?te(Tt):new Ae.constructor(Tt);return Ae.copy(Wt),Wt}}),Qa=function(b,A){var I=-1,T=b.length;for(A||(A=Array(T));++I<T;)A[I]=b[I];return A},ks=function(b,A){for(var I=-1,T=b==null?0:b.length,H=0,te=[];++I<T;){var Ae=b[I];A(Ae,I,b)&&(te[H++]=Ae)}return te},Ts=function(){return[]},lu=Object.prototype.propertyIsEnumerable,Iu=Object.getOwnPropertySymbols,_u=Iu?function(b){return b==null?[]:ks(Iu(b=Object(b)),function(A){return lu.call(b,A)})}:Ts,Mc=function(b,A){return Uc(b,_u(b),A)},tu=function(b,A){for(var I=-1,T=A.length,H=b.length;++I<T;)b[H+I]=A[I];return b},Fl=Rr(Object.getPrototypeOf,Object),Ys=Object.getOwnPropertySymbols?function(b){for(var A=[];b;)tu(A,_u(b)),b=Fl(b);return A}:Ts,Du=function(b,A){return Uc(b,Ys(b),A)},Bu=function(b,A,I){var T=A(b);return Qc(b)?T:tu(T,I(b))},Gl=function(b){return Bu(b,Xr,_u)},ru=function(b){return Bu(b,Hi,Ys)},pl=ra(gu,"DataView"),ef=ra(gu,"Promise"),Bh=ra(gu,"Set"),hc=ra(gu,"WeakMap"),uh="[object Map]",Kf="[object Promise]",gh="[object Set]",yh="[object WeakMap]",Yf="[object DataView]",dc=$n(pl),oe=$n(Da),Fe=$n(ef),Ze=$n(Bh),rt=$n(hc),xt=mu;(pl&&xt(new pl(new ArrayBuffer(1)))!=Yf||Da&&xt(new Da)!=uh||ef&&xt(ef.resolve())!=Kf||Bh&&xt(new Bh)!=gh||hc&&xt(new hc)!=yh)&&(xt=function(b){var A=mu(b),I=A=="[object Object]"?b.constructor:void 0,T=I?$n(I):"";if(T)switch(T){case dc:return Yf;case oe:return uh;case Fe:return Kf;case Ze:return gh;case rt:return yh}return A});var Dt=xt,$r=Object.prototype.hasOwnProperty,En=function(b){var A=b.length,I=new b.constructor(A);return A&&typeof b[0]=="string"&&$r.call(b,"index")&&(I.index=b.index,I.input=b.input),I},pi=gu.Uint8Array,rn=function(b){var A=new b.constructor(b.byteLength);return new pi(A).set(new pi(b)),A},_i=function(b,A){var I=A?rn(b.buffer):b.buffer;return new b.constructor(I,b.byteOffset,b.byteLength)},ga=/\w*$/,ss=function(b){var A=new b.constructor(b.source,ga.exec(b));return A.lastIndex=b.lastIndex,A},To=Xc?Xc.prototype:void 0,Ro=To?To.valueOf:void 0,fs=function(b){return Ro?Object(Ro.call(b)):{}},ps=function(b,A){var I=A?rn(b.buffer):b.buffer;return new b.constructor(I,b.byteOffset,b.length)},zo=function(b,A,I){var T=b.constructor;switch(A){case"[object ArrayBuffer]":return rn(b);case"[object Boolean]":case"[object Date]":return new T(+b);case"[object DataView]":return _i(b,I);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ps(b,I);case"[object Map]":case"[object Set]":return new T;case"[object Number]":case"[object String]":return new T(b);case"[object RegExp]":return ss(b);case"[object Symbol]":return fs(b)}},Ds=Object.create,xu=function(){function b(){}return function(A){if(!Sc(A))return{};if(Ds)return Ds(A);b.prototype=A;var I=new b;return b.prototype=void 0,I}}(),cu=function(b){return typeof b.constructor!="function"||ue(b)?{}:xu(Fl(b))},tf=function(b){return Ku(b)&&Dt(b)=="[object Map]"},$c=vh&&vh.isMap,ac=$c?sh($c):tf,ll=function(b){return Ku(b)&&Dt(b)=="[object Set]"},wu=vh&&vh.isSet,Sl=wu?sh(wu):ll,Wl="[object Arguments]",Pc="[object Function]",jc="[object Object]",hu={};hu[Wl]=hu["[object Array]"]=hu["[object ArrayBuffer]"]=hu["[object DataView]"]=hu["[object Boolean]"]=hu["[object Date]"]=hu["[object Float32Array]"]=hu["[object Float64Array]"]=hu["[object Int8Array]"]=hu["[object Int16Array]"]=hu["[object Int32Array]"]=hu["[object Map]"]=hu["[object Number]"]=hu[jc]=hu["[object RegExp]"]=hu["[object Set]"]=hu["[object String]"]=hu["[object Symbol]"]=hu["[object Uint8Array]"]=hu["[object Uint8ClampedArray]"]=hu["[object Uint16Array]"]=hu["[object Uint32Array]"]=!0,hu["[object Error]"]=hu[Pc]=hu["[object WeakMap]"]=!1;var _h=function b(A,I,T,H,te,Ae){var qe,Tt=1&I,Wt=2&I,vr=4&I;if(T&&(qe=te?T(A,H,te,Ae):T(A)),qe!==void 0)return qe;if(!Sc(A))return A;var Fr=Qc(A);if(Fr){if(qe=En(A),!Tt)return Qa(A,qe)}else{var en=Dt(A),zn=en==Pc||en=="[object GeneratorFunction]";if(ic(A))return mo(A,Tt);if(en==jc||en==Wl||zn&&!te){if(qe=Wt||zn?{}:cu(A),!Tt)return Wt?Du(A,ba(qe,A)):Mc(A,vn(qe,A))}else{if(!hu[en])return te?A:{};qe=zo(A,en,Tt)}}Ae||(Ae=new Ju);var ei=Ae.get(A);if(ei)return ei;Ae.set(A,qe),Sl(A)?A.forEach(function(_n){qe.add(b(_n,I,T,_n,A,Ae))}):ac(A)&&A.forEach(function(_n,Xn){qe.set(Xn,b(_n,I,T,Xn,A,Ae))});var Qn=Fr?void 0:(vr?Wt?ru:Gl:Wt?Hi:Xr)(A);return Tc(Qn||A,function(_n,Xn){Qn&&(_n=A[Xn=_n]),$l(qe,Xn,b(_n,I,T,Xn,A,Ae))}),qe},Oc=function(b){return _h(b,5)},ud=function(b){for(var A=-1,I=b==null?0:b.length,T={};++A<I;){var H=b[A];T[H[0]]=H[1]}return T},Hd=function(b){return this.__data__.has(b)};function Zu(b){var A=-1,I=b==null?0:b.length;for(this.__data__=new qu;++A<I;)this.add(b[A])}Zu.prototype.add=Zu.prototype.push=function(b){return this.__data__.set(b,"__lodash_hash_undefined__"),this},Zu.prototype.has=Hd;var Sd=Zu,Hc=function(b,A){for(var I=-1,T=b==null?0:b.length;++I<T;)if(A(b[I],I,b))return!0;return!1},Nh=function(b,A){return b.has(A)},up=function(b,A,I,T,H,te){var Ae=1&I,qe=b.length,Tt=A.length;if(!(qe==Tt||Ae&&Tt>qe))return!1;var Wt=te.get(b),vr=te.get(A);if(Wt&&vr)return Wt==A&&vr==b;var Fr=-1,en=!0,zn=2&I?new Sd:void 0;for(te.set(b,A),te.set(A,b);++Fr<qe;){var ei=b[Fr],Qn=A[Fr];if(T)var _n=Ae?T(Qn,ei,Fr,A,b,te):T(ei,Qn,Fr,b,A,te);if(_n!==void 0){if(_n)continue;en=!1;break}if(zn){if(!Hc(A,function(Xn,ai){if(!Nh(zn,ai)&&(ei===Xn||H(ei,Xn,I,T,te)))return zn.push(ai)})){en=!1;break}}else if(ei!==Qn&&!H(ei,Qn,I,T,te)){en=!1;break}}return te.delete(b),te.delete(A),en},_d=function(b){var A=-1,I=Array(b.size);return b.forEach(function(T,H){I[++A]=[H,T]}),I},pp=function(b){var A=-1,I=Array(b.size);return b.forEach(function(T){I[++A]=T}),I},vp=Xc?Xc.prototype:void 0,mp=vp?vp.valueOf:void 0,wd=function(b,A,I,T,H,te,Ae){switch(I){case"[object DataView]":if(b.byteLength!=A.byteLength||b.byteOffset!=A.byteOffset)return!1;b=b.buffer,A=A.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=A.byteLength||!te(new pi(b),new pi(A)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qc(+b,+A);case"[object Error]":return b.name==A.name&&b.message==A.message;case"[object RegExp]":case"[object String]":return b==A+"";case"[object Map]":var qe=_d;case"[object Set]":if(qe||(qe=pp),b.size!=A.size&&!(1&T))return!1;var Tt=Ae.get(b);if(Tt)return Tt==A;T|=2,Ae.set(b,A);var Wt=up(qe(b),qe(A),T,H,te,Ae);return Ae.delete(b),Wt;case"[object Symbol]":if(mp)return mp.call(b)==mp.call(A)}return!1},ld=Object.prototype.hasOwnProperty,gp=function(b,A,I,T,H,te){var Ae=1&I,qe=Gl(b),Tt=qe.length;if(Tt!=Gl(A).length&&!Ae)return!1;for(var Wt=Tt;Wt--;){var vr=qe[Wt];if(!(Ae?vr in A:ld.call(A,vr)))return!1}var Fr=te.get(b),en=te.get(A);if(Fr&&en)return Fr==A&&en==b;var zn=!0;te.set(b,A),te.set(A,b);for(var ei=Ae;++Wt<Tt;){var Qn=b[vr=qe[Wt]],_n=A[vr];if(T)var Xn=Ae?T(_n,Qn,vr,A,b,te):T(Qn,_n,vr,b,A,te);if(!(Xn===void 0?Qn===_n||H(Qn,_n,I,T,te):Xn)){zn=!1;break}ei||(ei=vr=="constructor")}if(zn&&!ei){var ai=b.constructor,nn=A.constructor;ai==nn||!("constructor"in b)||!("constructor"in A)||typeof ai=="function"&&ai instanceof ai&&typeof nn=="function"&&nn instanceof nn||(zn=!1)}return te.delete(b),te.delete(A),zn},Ah="[object Arguments]",kd="[object Array]",xd="[object Object]",Cd=Object.prototype.hasOwnProperty,vl=function(b,A,I,T,H,te){var Ae=Qc(b),qe=Qc(A),Tt=Ae?kd:Dt(b),Wt=qe?kd:Dt(A),vr=(Tt=Tt==Ah?xd:Tt)==xd,Fr=(Wt=Wt==Ah?xd:Wt)==xd,en=Tt==Wt;if(en&&ic(b)){if(!ic(A))return!1;Ae=!0,vr=!1}if(en&&!vr)return te||(te=new Ju),Ae||mh(b)?up(b,A,I,T,H,te):wd(b,A,Tt,I,T,H,te);if(!(1&I)){var zn=vr&&Cd.call(b,"__wrapped__"),ei=Fr&&Cd.call(A,"__wrapped__");if(zn||ei){var Qn=zn?b.value():b,_n=ei?A.value():A;return te||(te=new Ju),H(Qn,_n,I,T,te)}}return!!en&&(te||(te=new Ju),gp(b,A,I,T,H,te))},Dd=function b(A,I,T,H,te){return A===I||(A==null||I==null||!Ku(A)&&!Ku(I)?A!=A&&I!=I:vl(A,I,T,H,b,te))},Fs=function(b,A){return Dd(b,A)},cd=function(b,A,I){(I!==void 0&&!qc(b[A],I)||I===void 0&&!(A in b))&&Pf(b,A,I)},Vd=function(b){return function(A,I,T){for(var H=-1,te=Object(A),Ae=T(A),qe=Ae.length;qe--;){var Tt=Ae[b?qe:++H];if(I(te[Tt],Tt,te)===!1)break}return A}},Gd=Vd(),Ht=function(b){return Ku(b)&&ar(b)},Zr=Function.prototype.toString,On=Object.prototype.hasOwnProperty,wi=Zr.call(Object),ia=function(b){if(!Ku(b)||mu(b)!="[object Object]")return!1;var A=Fl(b);if(A===null)return!0;var I=On.call(A,"constructor")&&A.constructor;return typeof I=="function"&&I instanceof I&&Zr.call(I)==wi},Ai=function(b,A){if((A!=="constructor"||typeof b[A]!="function")&&A!="__proto__")return b[A]},ji=function(b){return Uc(b,Hi(b))},Ea=function(b,A,I,T,H,te,Ae){var qe=Ai(b,I),Tt=Ai(A,I),Wt=Ae.get(Tt);if(Wt)cd(b,I,Wt);else{var vr=te?te(qe,Tt,I+"",b,A,Ae):void 0,Fr=vr===void 0;if(Fr){var en=Qc(Tt),zn=!en&&ic(Tt),ei=!en&&!zn&&mh(Tt);vr=Tt,en||zn||ei?Qc(qe)?vr=qe:Ht(qe)?vr=Qa(qe):zn?(Fr=!1,vr=mo(Tt,!0)):ei?(Fr=!1,vr=ps(Tt,!0)):vr=[]:ia(Tt)||oh(Tt)?(vr=qe,oh(qe)?vr=ji(qe):Sc(qe)&&!yn(qe)||(vr=cu(Tt))):Fr=!1}Fr&&(Ae.set(Tt,vr),H(vr,Tt,T,te,Ae),Ae.delete(Tt)),cd(b,I,vr)}},Ma=function b(A,I,T,H,te){A!==I&&Gd(I,function(Ae,qe){if(te||(te=new Ju),Sc(Ae))Ea(A,I,qe,T,b,H,te);else{var Tt=H?H(Ai(A,qe),Ae,qe+"",A,I,te):void 0;Tt===void 0&&(Tt=Ae),cd(A,qe,Tt)}},Hi)},Ia=function(b){return b},Za=function(b,A,I){switch(I.length){case 0:return b.call(A);case 1:return b.call(A,I[0]);case 2:return b.call(A,I[0],I[1]);case 3:return b.call(A,I[0],I[1],I[2])}return b.apply(A,I)},Ha=Math.max,$a=function(b,A,I){return A=Ha(A===void 0?b.length-1:A,0),function(){for(var T=arguments,H=-1,te=Ha(T.length-A,0),Ae=Array(te);++H<te;)Ae[H]=T[A+H];H=-1;for(var qe=Array(A+1);++H<A;)qe[H]=T[H];return qe[A]=I(Ae),Za(b,this,qe)}},ya=function(b){return function(){return b}},Ua=Date.now,si=function(b){var A=0,I=0;return function(){var T=Ua(),H=16-(T-I);if(I=T,H>0){if(++A>=800)return arguments[0]}else A=0;return b.apply(void 0,arguments)}},Ni=si(ec?function(b,A){return ec(b,"toString",{configurable:!0,enumerable:!1,value:ya(A),writable:!0})}:Ia),Ra=function(b,A){return Ni($a(b,A,Ia),b+"")},Ya=function(b,A,I){if(!Sc(I))return!1;var T=typeof A;return!!(T=="number"?ar(I)&&Fh(A,I.length):T=="string"&&A in I)&&qc(I[A],b)},_a=function(b){return Ra(function(A,I){var T=-1,H=I.length,te=H>1?I[H-1]:void 0,Ae=H>2?I[2]:void 0;for(te=b.length>3&&typeof te=="function"?(H--,te):void 0,Ae&&Ya(I[0],I[1],Ae)&&(te=3>H?void 0:te,H=1),A=Object(A);++T<H;){var qe=I[T];qe&&b(A,qe,T,te)}return A})},Ga=_a(function(b,A,I){Ma(b,A,I)}),xo=function(b,A){for(var I=-1,T=b==null?0:b.length,H=Array(T);++I<T;)H[I]=A(b[I],I,b);return H},xs=function(b,A){return xo(A,function(I){return[I,b[I]]})},Qi=function(b){var A=-1,I=Array(b.size);return b.forEach(function(T){I[++A]=[T,T]}),I},oa=function(b){return function(A){var I=Dt(A);return I=="[object Map]"?_d(A):I=="[object Set]"?Qi(A):xs(A,b(A))}}(Xr),Zo=Af(function(b){(function(A,I,T){if(A){for(var H,te={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Ae={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qe={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},Tt={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},Wt=1;20>Wt;++Wt)te[111+Wt]="f"+Wt;for(Wt=0;9>=Wt;++Wt)te[Wt+96]=""+Wt;_n.prototype.bind=function(Xn,ai,nn){var hi=this;return hi._bindMultiple.call(hi,Xn=Xn instanceof Array?Xn:[Xn],ai,nn),hi},_n.prototype.unbind=function(Xn,ai){return this.bind.call(this,Xn,function(){},ai)},_n.prototype.trigger=function(Xn,ai){var nn=this;return nn._directMap[Xn+":"+ai]&&nn._directMap[Xn+":"+ai]({},Xn),nn},_n.prototype.reset=function(){var Xn=this;return Xn._callbacks={},Xn._directMap={},Xn},_n.prototype.stopCallback=function(Xn,ai){if((" "+ai.className+" ").indexOf(" mousetrap ")>-1||Qn(ai,this.target))return!1;if("composedPath"in Xn&&typeof Xn.composedPath=="function"){var nn=Xn.composedPath()[0];nn!==Xn.target&&(ai=nn)}return ai.tagName=="INPUT"||ai.tagName=="SELECT"||ai.tagName=="TEXTAREA"||ai.isContentEditable},_n.prototype.handleKey=function(){var Xn=this;return Xn._handleKey.apply(Xn,arguments)},_n.addKeycodes=function(Xn){for(var ai in Xn)Xn.hasOwnProperty(ai)&&(te[ai]=Xn[ai]);H=null},_n.init=function(){var Xn=_n(I);for(var ai in Xn)ai.charAt(0)!=="_"&&(_n[ai]=function(nn){return function(){return Xn[nn].apply(Xn,arguments)}}(ai))},_n.init(),A.Mousetrap=_n,b.exports&&(b.exports=_n)}function vr(Xn,ai,nn){Xn.addEventListener?Xn.addEventListener(ai,nn,!1):Xn.attachEvent("on"+ai,nn)}function Fr(Xn){if(Xn.type=="keypress"){var ai=String.fromCharCode(Xn.which);return Xn.shiftKey||(ai=ai.toLowerCase()),ai}return te[Xn.which]?te[Xn.which]:Ae[Xn.which]?Ae[Xn.which]:String.fromCharCode(Xn.which).toLowerCase()}function en(Xn){return Xn=="shift"||Xn=="ctrl"||Xn=="alt"||Xn=="meta"}function zn(Xn,ai,nn){return nn||(nn=function(){if(!H)for(var hi in H={},te)hi>95&&112>hi||te.hasOwnProperty(hi)&&(H[te[hi]]=hi);return H}()[Xn]?"keydown":"keypress"),nn=="keypress"&&ai.length&&(nn="keydown"),nn}function ei(Xn,ai){var nn,hi,vi,Li=[];for(nn=function(Vi){return Vi==="+"?["+"]:(Vi=Vi.replace(/\+{2}/g,"+plus")).split("+")}(Xn),vi=0;nn.length>vi;++vi)Tt[hi=nn[vi]]&&(hi=Tt[hi]),ai&&ai!="keypress"&&qe[hi]&&(hi=qe[hi],Li.push("shift")),en(hi)&&Li.push(hi);return{key:hi,modifiers:Li,action:ai=zn(hi,Li,ai)}}function Qn(Xn,ai){return Xn!==null&&Xn!==I&&(Xn===ai||Qn(Xn.parentNode,ai))}function _n(Xn){var ai=this;if(Xn=Xn||I,!(ai instanceof _n))return new _n(Xn);ai.target=Xn,ai._callbacks={},ai._directMap={};var nn,hi={},vi=!1,Li=!1,Vi=!1;function sa(e){e=e||{};var i,l=!1;for(i in hi)e[i]?l=!0:hi[i]=0;l||(Vi=!1)}function ua(e,i,l,y,P,j){var Q,we,ut,Nt=[],Ut=l.type;if(!ai._callbacks[e])return[];for(Ut=="keyup"&&en(e)&&(i=[e]),Q=0;ai._callbacks[e].length>Q;++Q)we=ai._callbacks[e][Q],(y||!we.seq||hi[we.seq]==we.level)&&Ut==we.action&&(Ut=="keypress"&&!l.metaKey&&!l.ctrlKey||(ut=we.modifiers,i.sort().join(",")===ut.sort().join(",")))&&((!y&&we.combo==P||y&&we.seq==y&&we.level==j)&&ai._callbacks[e].splice(Q,1),Nt.push(we));return Nt}function Lo(e,i,l,y){ai.stopCallback(i,i.target||i.srcElement,l,y)||e(i,l)===!1&&(function(P){P.preventDefault?P.preventDefault():P.returnValue=!1}(i),function(P){P.stopPropagation?P.stopPropagation():P.cancelBubble=!0}(i))}function Fa(e){typeof e.which!="number"&&(e.which=e.keyCode);var i=Fr(e);i&&(e.type!="keyup"||vi!==i?ai.handleKey(i,function(l){var y=[];return l.shiftKey&&y.push("shift"),l.altKey&&y.push("alt"),l.ctrlKey&&y.push("ctrl"),l.metaKey&&y.push("meta"),y}(e),e):vi=!1)}function go(e,i,l,y){function P(ut){return function(){Vi=ut,++hi[e],clearTimeout(nn),nn=setTimeout(sa,1e3)}}function j(ut){Lo(l,ut,e),y!=="keyup"&&(vi=Fr(ut)),setTimeout(sa,10)}hi[e]=0;for(var Q=0;i.length>Q;++Q){var we=Q+1===i.length?j:P(y||ei(i[Q+1]).action);qs(i[Q],we,y,e,Q)}}function qs(e,i,l,y,P){ai._directMap[e+":"+l]=i;var j,Q=(e=e.replace(/\s+/g," ")).split(" ");Q.length>1?go(e,Q,i,l):(j=ei(e,l),ai._callbacks[j.key]=ai._callbacks[j.key]||[],ua(j.key,j.modifiers,{type:j.action},y,e,P),ai._callbacks[j.key][y?"unshift":"push"]({callback:i,modifiers:j.modifiers,action:j.action,seq:y,level:P,combo:e}))}ai._handleKey=function(e,i,l){var y,P=ua(e,i,l),j={},Q=0,we=!1;for(y=0;P.length>y;++y)P[y].seq&&(Q=Math.max(Q,P[y].level));for(y=0;P.length>y;++y)if(P[y].seq){if(P[y].level!=Q)continue;we=!0,j[P[y].seq]=1,Lo(P[y].callback,l,P[y].combo,P[y].seq)}else we||Lo(P[y].callback,l,P[y].combo);var ut=l.type=="keypress"&&Li;l.type!=Vi||en(e)||ut||sa(j),Li=we&&l.type=="keydown"},ai._bindMultiple=function(e,i,l){for(var y=0;e.length>y;++y)qs(e[y],i,l)},vr(Xn,"keypress",Fa),vr(Xn,"keydown",Fa),vr(Xn,"keyup",Fa)}})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)}),fo,Pa=function(b){return b&&b.length?b[0]:void 0},to=(fo=1,function(b){return"".concat(b,"-").concat(fo++)}),Oa=function(b,A){var I,T;return!(!b||!A||((I=b.properties)===null||I===void 0?void 0:I.id)!==((T=A.properties)===null||T===void 0?void 0:T.id))},Os=function(b){var A=b.target,I=b.targetHandler,T=b.otherHandler;return b.data.map(function(H,te){var Ae,qe=Oa(H,A)?I:T;return(Ae=qe==null?void 0:qe(H,te))!==null&&Ae!==void 0?Ae:H})},Bs=function(){return{id:to("point"),isHover:!1,isActive:!1,isDrag:!1,createTime:Date.now()}},so=function(){return{id:to("line"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},yo=function(){return{id:to("polygon"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},hs=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Pr(b,ki(ki({},Bs()),A))},zs=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"Feature",properties:ki(ki({},so()),{},{nodes:b},A),geometry:{type:"LineString",coordinates:In(bn(b))}}},Cu=function(b){return ln(b,{id:to("dashLine")})},Gu=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"Feature",properties:ki(ki({},yo()),{},{nodes:b},A),geometry:{type:"Polygon",coordinates:[In(bn([].concat(er(b),[Pa(b)])))]}}},Bl=function(b){return function(A,I,T){T===void 0&&(T={});for(var H=Js(A).coordinates,te=0,Ae=0;H.length>Ae&&(te>I||Ae!==H.length-1);Ae++){if(te>=I){var qe=I-te;if(qe){var Tt=Gc(H[Ae],H[Ae-1])-180;return Uh(H[Ae],qe,Tt,T)}return Pr(H[Ae])}te+=xc(H[Ae],H[Ae+1],T)}return Pr(H[H.length-1])}(b,hf(b,{units:"meters"})/2,{units:"meters"})},Au=function(b,A){var I=A.showTotalDistance,T=A.format,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},te=[];if(I){var Ae=Bl(b),qe=hf(b,{units:"meters"});Ae.properties=ki({id:to("text"),isActive:!1,meters:qe,text:T(qe),type:"totalDistance"},H),te.push(Ae)}else for(var Tt=b.geometry.coordinates,Wt=0;Tt.length-1>Wt;Wt++){var vr=Pr(Tt[Wt]),Fr=Pr(Tt[Wt+1]),en=xc(vr,Fr,{units:"meters"}),zn=Mf(bn([vr,Fr]));zn.properties=ki({id:to("text"),isActive:!1,meters:en,text:T(en),type:"distance"},H),te.push(zn)}return te},Sf=function(b,A){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},T=A.format,H=Yl(b);return qn(b,{properties:ki({meters:H,text:T(H),type:"area",isActive:!1},I)})},Xl=function(b){var A,I,T=b.getContainer();return(A=(I=T==null?void 0:T.querySelector(".l7-marker-container"))!==null&&I!==void 0?I:T==null?void 0:T.querySelector(".amap-maps"))!==null&&A!==void 0?A:null},Ic=function(b){return b.lngLat||b.lnglat},wl=function(b){var A=Ic(b);return[A.lng,A.lat]},rf=function(b){return[b.lng,b.lat]},mf=function(b){for(var A=Number.MAX_SAFE_INTEGER,I=0,T=b.length,H=0;T>H;H++)A>b[H]&&(A=b[H],I=H);return I},lh=function(b,A){var I=[],T=[];return b.forEach(function(H){Fs(H,A)?T.length&&(I.push(T),T=[]):T.push(H)}),T.length&&I.push(T),I},pc=function(b,A,I){var T=[],H=[],te=[];return(T=b==="drawData"?A.getData():b instanceof Function?b(I):b).length&&(H=T.map(function(Ae){var qe,Tt=(qe=Ae.properties)!==null&&qe!==void 0?qe:{},Wt=Tt.nodes,vr=Wt===void 0?[]:Wt,Fr=Tt.isActive;return Fr!==void 0&&Fr?vr.filter(function(en){return!Fs(en.geometry.coordinates,I)}):vr}).flat().filter(function(Ae){return Ae}),H.length||(H=In(bn(T)).map(function(Ae){return Pr(Ae)})),te=T.map(function(Ae){var qe,Tt,Wt,vr=(qe=(Tt=Ae.properties)===null||Tt===void 0?void 0:Tt.line)!==null&&qe!==void 0?qe:Ae;return!((Wt=Ae.properties)===null||Wt===void 0)&&Wt.isActive?lh(vr.properties.nodes.map(function(Fr){return Fr.geometry.coordinates}),I).filter(function(Fr){return Fr.length>1}).map(function(Fr){return ln(Fr)}):[vr]}).flat().filter(function(Ae){return Ae}),te.length||T.forEach(function(Ae){var qe=Il(Ae);if(/linestring/i.test(qe)&&te.push(Ae),/polygon/i.test(qe)){var Tt,Wt,vr=Hh(Ae);return(Tt=te).push.apply(Tt,er((Wt=vr==null?void 0:vr.features)!==null&&Wt!==void 0?Wt:[vr]))}})),{points:H,lines:te}},fu=function(b,A,I,T){var H=I.pointAdsorbPixel,te=ur(b,2),Ae=T.lngLatToPixel([te[0],te[1]]),qe=Ae.x,Tt=Ae.y,Wt=A.map(function(Fr){var en=ur(Fr.geometry.coordinates,2),zn=T.lngLatToPixel([en[0],en[1]]),ei=zn.y;return Math.pow(qe-zn.x,2)+Math.pow(Tt-ei,2)}),vr=mf(Wt);return Math.pow(Wt[vr],.5)>H?null:A[vr].geometry.coordinates},wf=function(b,A,I,T){var H=I.lineAdsorbPixel,te=ur(b,2),Ae=T.lngLatToPixel([te[0],te[1]]),qe=Ae.x,Tt=Ae.y,Wt=A.filter(function(en){return In(en).length>1}).map(function(en){return function(zn,ei,Qn){Qn===void 0&&(Qn={});var _n=Pr([1/0,1/0],{dist:1/0}),Xn=0;return Bi(zn,function(ai){for(var nn=Io(ai),hi=0;nn.length-1>hi;hi++){var vi=Pr(nn[hi]);vi.properties.dist=xc(ei,vi,Qn);var Li=Pr(nn[hi+1]);Li.properties.dist=xc(ei,Li,Qn);var Vi=xc(vi,Li,Qn),sa=Math.max(vi.properties.dist,Li.properties.dist),ua=Gc(vi,Li),Lo=Uh(ei,sa,ua+90,Qn),Fa=Uh(ei,sa,ua-90,Qn),go=Ll(ln([Lo.geometry.coordinates,Fa.geometry.coordinates]),ln([vi.geometry.coordinates,Li.geometry.coordinates])),qs=null;go.features.length>0&&((qs=go.features[0]).properties.dist=xc(ei,qs,Qn),qs.properties.location=Xn+xc(vi,qs,Qn)),_n.properties.dist>vi.properties.dist&&((_n=vi).properties.index=hi,_n.properties.location=Xn),_n.properties.dist>Li.properties.dist&&((_n=Li).properties.index=hi+1,_n.properties.location=Xn+Vi),qs&&_n.properties.dist>qs.properties.dist&&((_n=qs).properties.index=hi),Xn+=Vi}}),_n}(en,b)}),vr=Wt.map(function(en){var zn=ur(en.geometry.coordinates,2),ei=T.lngLatToPixel([zn[0],zn[1]]),Qn=ei.y;return Math.pow(qe-ei.x,2)+Math.pow(Tt-Qn,2)}),Fr=mf(vr);return Math.pow(vr[Fr],.5)>H?null:Wt[Fr].geometry.coordinates},Uu=function(b,A){var I=ur(A,2),T=I[0],H=I[1];b.lngLat&&(b.lngLat={lng:T,lat:H}),b.lnglat&&(b.lnglat={lng:T,lat:H})},qf=function(){function b(A,I){As(this,b),this.container=void 0,this.cursor=null,this.options=void 0,this.container=Xl(A),this.options=I}return hr(b,[{key:"setCursor",value:function(A){A!==this.cursor&&this.container&&(this.container.style.cursor=A?this.options[A]:"",this.cursor=A)}},{key:"destroy",value:function(){this.setCursor(null)}}]),b}();function js(b,A){A===void 0&&(A={});var I=A.insertAt;if(b&&typeof document!="undefined"){var T=document.head||document.getElementsByTagName("head")[0],H=document.createElement("style");H.type="text/css",I==="top"&&T.firstChild?T.insertBefore(H,T.firstChild):T.appendChild(H),H.styleSheet?H.styleSheet.cssText=b:H.appendChild(document.createTextNode(b))}}js('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}'),js(".tippy-box[data-theme~=light]{color:#26323d;box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);background-color:#fff}.tippy-box[data-theme~=light][data-placement^=top]>.tippy-arrow:before{border-top-color:#fff}.tippy-box[data-theme~=light][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:#fff}.tippy-box[data-theme~=light][data-placement^=left]>.tippy-arrow:before{border-left-color:#fff}.tippy-box[data-theme~=light][data-placement^=right]>.tippy-arrow:before{border-right-color:#fff}.tippy-box[data-theme~=light]>.tippy-backdrop{background-color:#fff}.tippy-box[data-theme~=light]>.tippy-svg-arrow{fill:#fff}");var Pu=function(){function b(A,I){var T=this;As(this,b),this.content="",this.tippy=void 0,this.scene=void 0,this.isMouseInner=!1,this.onMouseMove=function(){T.isMouseInner=!0,T.checkTippyShow()},this.onMouseOut=function(){T.isMouseInner=!1,T.checkTippyShow()},this.setContent=kl(function(H){T.content=H!=null?H:"",T.tippy.setContent(H!=null?H:""),T.checkTippyShow()},16,{maxWait:16}),this.tippy=xa(Xl(A),ki(ki({},Vs),I)),this.tippy.hide(),this.scene=A,A.on(v.SceneEvent.Mousemove,this.onMouseMove),A.on(v.SceneEvent.Mouseout,this.onMouseOut)}return hr(b,[{key:"getContent",value:function(){return this.content}},{key:"checkTippyShow",value:function(){this.content&&this.isMouseInner?this.tippy.show():this.tippy.hide()}},{key:"destroy",value:function(){this.scene.off(v.SceneEvent.Mousemove,this.onMouseMove),this.scene.off(v.SceneEvent.Mouseout,this.onMouseOut),this.tippy.destroy()}}]),b}(),Ru=function(){function b(A){var I=A.config;As(this,b),this.historyList=[],this.historyIndex=0,this.config=void 0,this.config=I}return hr(b,[{key:"save",value:function(A){if(this.config){var I=this.config.maxSize;this.historyIndex&&(this.historyList=this.historyList.slice(this.historyIndex),this.historyIndex=0),I>this.historyList.length||this.historyList.pop();var T=Oc(A);return this.historyList.unshift(T),T}}},{key:"revert",value:function(){if(this.historyList.length&&this.historyList.length-1>this.historyIndex){var A=this.historyList[++this.historyIndex];return A?Oc(A):void 0}}},{key:"redo",value:function(){if(this.historyList.length&&this.historyIndex>0){var A=this.historyList[--this.historyIndex];return A?Oc(A):void 0}}}]),b}(),nf=function(b){or(I,b);var A=Vr(I);function I(T){var H,te=T.data,Ae=T.render,qe=T.history;return As(this,I),(H=A.call(this)).render=void 0,H.data=Oc(K),H.timeout=null,H.diffData={},H.history=void 0,H.render=Ae,qe&&(H.history=new Ru({config:qe})),te&&H.setData(te),H}return hr(I,[{key:"saveHistory",value:function(){var T;return(T=this.history)===null||T===void 0?void 0:T.save(this.data)}},{key:"revertHistory",value:function(){var T,H=(T=this.history)===null||T===void 0?void 0:T.revert();if(H)return this.setData(H),H}},{key:"redoHistory",value:function(){var T,H=(T=this.history)===null||T===void 0?void 0:T.redo();if(H)return this.setData(H),H}},{key:"setData",value:function(T){var H=this;return Object.keys(T).length&&(this.data=ki(ki({},this.data),T),this.diffData=ki(ki({},this.diffData),T),this.timeout||(this.timeout=requestAnimationFrame(function(){return H.updateDiffData()})),this.emit(v.SourceEvent.Change,{data:this.data})),this.data}},{key:"getData",value:function(){return this.data}},{key:"getRenderData",value:function(T){return this.data[T]}},{key:"setRenderData",value:function(T,H){var te=typeof H=="function"?H(this.getRenderData(T)):H;return this.setData(Lr({},T,er(te).sort(function(Ae,qe){return+Ae.properties.isActive-+qe.properties.isActive}))),this.emit(v.SourceEvent.Change,this.data),te}},{key:"updateDiffData",value:function(){var T=this,H=Object.entries(this.diffData);H.length&&(H.forEach(function(te){var Ae,qe=ur(te,2),Tt=qe[0],Wt=qe[1];Array.isArray(Wt)&&((Ae=T.getRender(Tt))===null||Ae===void 0||Ae.setData(Wt))}),this.emit(v.SourceEvent.Update,this.data,this.diffData),this.diffData={},this.timeout=null)}},{key:"getRender",value:function(T){return this.render[T]}},{key:"clear",value:function(){this.setData(ud(Object.keys(this.render).map(function(T){return[T,[]]})))}}]),I}(ah),pd=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;As(this,I),(te=A.call(this)).scene=void 0,te.source=void 0,te.render=void 0,te.cursor=void 0,te.options=void 0,te.enabled=!1,te.allowCreate=!1,te.sceneRender=void 0,te.mouseLngLat={lng:0,lat:0},te.popup=void 0,te.addCount=0,te.saveMouseLngLat=kl(function(Wt){te.mouseLngLat=Ic(Wt)},100,{maxWait:100}),te.saveHistory=kl(function(){te.options.history&&te.source.saveHistory()},100),te.bindThis(),te.scene=T,te.sceneRender=new du(T),te.options=Ga({},te.getDefaultOptions(H),H),te.render=te.initRender(),te.source=new nf({render:te.render,history:te.options.history||void 0}),te.cursor=new qf(T,te.options.cursor);var Ae=te.options,qe=Ae.initialData,Tt=Ae.popup;return qe&&te.setData(qe),Tt&&(te.popup=new Pu(T,Tt instanceof Object?Tt:{})),te.saveHistory(),te.bindCommonEvent(),te.emit(v.DrawEvent.Init,zr(te)),te.bindEnableEvent(),te}return hr(I,[{key:"addable",get:function(){var T=this.getData(),H=this.options,te=H.multiple,Ae=H.maxCount,qe=T.find(function(Tt){return Tt.properties.isDraw});return!(!this.enabled||!this.allowCreate)&&(!!(te&&0>=Ae||qe)||!(!te&&this.addCount>=1)&&(0>=Ae||Ae>T.length))}},{key:"getOptions",value:function(){return this.options}},{key:"getEditItem",value:function(){return this.editItem}},{key:"getDragItem",value:function(){return this.dragItem}},{key:"setHelper",value:function(T){var H,te,Ae=this.options.helper;if(Ae){var qe=(H=T in Ae?Ae[T]:T)!==null&&H!==void 0?H:null;(te=this.popup)===null||te===void 0||te.setContent(qe)}}},{key:"isEnable",value:function(){return this.enabled}},{key:"bindThis",value:function(){this.initRender=this.initRender.bind(this),this.getData=this.getData.bind(this),this.setData=this.setData.bind(this),this.emitChangeEvent=this.emitChangeEvent.bind(this),this.saveHistory=this.saveHistory.bind(this),this.onSceneMouseMove=this.onSceneMouseMove.bind(this),this.revertHistory=this.revertHistory.bind(this),this.redoHistory=this.redoHistory.bind(this),this.removeActiveFeature=this.removeActiveFeature.bind(this),this.bindCommonEvent=this.bindCommonEvent.bind(this),this.bindEnableEvent=this.bindEnableEvent.bind(this),this.unbindEnableEvent=this.unbindEnableEvent.bind(this),this.setActiveFeature=this.setActiveFeature.bind(this)}},{key:"bindCommonEvent",value:function(){var T=this;this.on(v.DrawEvent.Add,this.emitChangeEvent),this.on(v.DrawEvent.Add,function(){T.addCount++}),this.on(v.DrawEvent.Edit,this.emitChangeEvent),this.on(v.DrawEvent.Remove,this.emitChangeEvent),this.on(v.DrawEvent.Clear,this.emitChangeEvent),this.on(v.DrawEvent.AddNode,this.saveHistory),this.on(v.DrawEvent.RemoveNode,this.emitChangeEvent)}},{key:"bindEnableEvent",value:function(){this.unbindKeyboardEvent(),this.scene.setMapStatus({doubleClickZoom:!1}),this.scene.on(v.SceneEvent.Mousemove,this.saveMouseLngLat),this.bindKeyboardEvent()}},{key:"unbindEnableEvent",value:function(){this.scene.setMapStatus({doubleClickZoom:!0}),this.scene.off(v.SceneEvent.Mousemove,this.saveMouseLngLat),this.unbindKeyboardEvent()}},{key:"bindKeyboardEvent",value:function(){var T=this,H=this.options.keyboard||{},te=H.revert,Ae=H.redo,qe=H.remove;qe&&Zo.bind(qe,function(){T.removeActiveFeature()}),this.options.history&&(te&&Zo.bind(te,this.revertHistory),Ae&&Zo.bind(Ae,this.redoHistory))}},{key:"unbindKeyboardEvent",value:function(){var T=this.options.keyboard||{},H=T.revert,te=T.redo,Ae=T.remove;Ae&&Zo.unbind(Ae),this.options.history&&(H&&Zo.unbind(H),te&&Zo.unbind(te))}},{key:"emitChangeEvent",value:function(){this.emit(v.DrawEvent.Change,this.getData()),this.saveHistory()}},{key:"revertHistory",value:function(){this.enabled&&this.options.history&&this.source.revertHistory()&&this.correctDrawItem()}},{key:"redoHistory",value:function(){this.enabled&&this.options.history&&this.source.redoHistory()&&this.correctDrawItem()}},{key:"getRenderLayers",value:function(){return ud(oa(this.render).map(function(T){var H=ur(T,2);return[H[0],H[1].getLayers()]}))}},{key:"getTargetFeature",value:function(T){var H,te,Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getData(),qe=null;return T&&(qe=(H=Ae.find(function(Tt){var Wt;return Tt.properties.id===(typeof T=="string"?T:(Wt=T.properties)===null||Wt===void 0?void 0:Wt.id)}))!==null&&H!==void 0?H:null,!qe&&T instanceof Object&&(qe=(te=Ae.find(function(Tt){return Fs(T.geometry,Tt.geometry)}))!==null&&te!==void 0?te:null)),qe}},{key:"removeActiveFeature",value:function(){var T=this.getData().find(function(H){var te=H.properties;return te.isActive||te.isDraw});return T&&this.removeFeature(T),T}},{key:"removeFeature",value:function(T){var H=this.getData(),te=this.getTargetFeature(T);te&&(this.setData(H.filter(function(Ae){return!Oa(te,Ae)})),this.emit(v.DrawEvent.Remove,T,this.getData()))}},{key:"correctDrawItem",value:function(){this.getData().find(function(T){return T.properties.isDraw})&&this.onSceneMouseMove({type:"mousemove",lnglat:this.mouseLngLat,lngLat:this.mouseLngLat})}},{key:"initRender",value:function(){var T,H={},te=function(qe,Tt){var Wt=typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(!Wt){if(Array.isArray(qe)||(Wt=sn(qe))||Tt&&qe&&typeof qe.length=="number"){Wt&&(qe=Wt);var vr=0,Fr=function(){};return{s:Fr,n:function(){return qe.length>vr?{done:!1,value:qe[vr++]}:{done:!0}},e:function(Qn){throw Qn},f:Fr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var en,zn=!0,ei=!1;return{s:function(){Wt=Wt.call(qe)},n:function(){var Qn=Wt.next();return zn=Qn.done,Qn},e:function(Qn){ei=!0,en=Qn},f:function(){try{zn||Wt.return==null||Wt.return()}finally{if(ei)throw en}}}}(this.getRenderTypes());try{for(te.s();!(T=te.n()).done;){var Ae=T.value;H[Ae]=new Wf[Ae](this.scene,{style:this.options.style[Ae]})}}catch(qe){te.e(qe)}finally{te.f()}return H}},{key:"getCommonOptions",value:function(T){return{initialData:[],autoActive:!0,cursor:Oc(c),editable:!0,style:Oc(sd),multiple:!0,history:Oc(Zs),keyboard:Oc(ts),popup:!0,helper:{},maxCount:-1}}},{key:"setCursor",value:function(T){this.cursor.setCursor(T)}},{key:"resetCursor",value:function(){this.setCursor(this.addable?"draw":null)}},{key:"enable",value:function(){var T=this,H=0>=arguments.length||arguments[0]===void 0||arguments[0];this.allowCreate=H,this.addCount=0,this.enabled=!0,this.bindEnableEvent(),this.resetCursor(),this.setHelper(this.addable?"draw":null),setTimeout(function(){T.emit(v.DrawEvent.Enable,T)},0)}},{key:"disable",value:function(){var T=this;this.resetFeatures(),this.enabled=!1,this.setCursor(null),this.unbindEnableEvent(),this.addCount=0,this.setHelper(null),setTimeout(function(){T.emit(v.DrawEvent.Disable,T)},0)}},{key:"clear",value:function(){var T=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.source.clear(),this.emit(v.DrawEvent.Clear,this),T&&this.disable()}},{key:"show",value:function(){return Object.values(this.render).forEach(function(T){T.show()})}},{key:"hide",value:function(){return Object.values(this.render).forEach(function(T){T.hide()})}},{key:"destroy",value:function(){var T,H=this;Object.values(this.render).forEach(function(te){te.destroy()}),Object.values(v.RenderEvent).forEach(function(te){Object.values(H.render).forEach(function(Ae){Ae.removeAllListeners(te)}),H.sceneRender.removeAllListeners(te)}),setTimeout(function(){Object.values(v.DrawEvent).forEach(function(te){H.removeAllListeners(te)})},0),(T=this.popup)===null||T===void 0||T.destroy(),this.cursor.destroy(),this.emit(v.DrawEvent.Destroy,this)}}]),I}(ah),w=function(b){var A=b==null?0:b.length;return A?b[A-1]:void 0},V=function(b){or(I,b);var A=Vr(I);function I(){return As(this,I),A.apply(this,arguments)}return hr(I,[{key:"pointRender",get:function(){return this.render.point}},{key:"dragPoint",get:function(){return this.getPointData().find(function(T){return T.properties.isDrag})}},{key:"editPoint",get:function(){return this.getPointData().find(function(T){return T.properties.isActive})}},{key:"hoverPoint",get:function(){return this.getPointData().find(function(T){return T.properties.isHover})}},{key:"getDragPoint",value:function(){return this.dragPoint}},{key:"getEditPoint",value:function(){return this.editPoint}},{key:"getPointData",value:function(){return this.source.getRenderData("point")}},{key:"setPointData",value:function(T){return this.source.setRenderData("point",T)}},{key:"bindPointRenderEvent",value:function(){var T,H,te,Ae,qe,Tt;(T=this.pointRender)===null||T===void 0||T.on(v.RenderEvent.UnClick,this.onPointCreate.bind(this)),(H=this.pointRender)===null||H===void 0||H.on(v.RenderEvent.Mousemove,this.onPointMouseMove.bind(this)),(te=this.pointRender)===null||te===void 0||te.on(v.RenderEvent.Mouseout,this.onPointMouseOut.bind(this)),(Ae=this.pointRender)===null||Ae===void 0||Ae.on(v.RenderEvent.Dragstart,this.onPointDragStart.bind(this)),(qe=this.pointRender)===null||qe===void 0||qe.on(v.RenderEvent.Dragging,this.onPointDragging.bind(this)),(Tt=this.pointRender)===null||Tt===void 0||Tt.on(v.RenderEvent.Dragend,this.onPointDragEnd.bind(this))}},{key:"handleCreatePoint",value:function(T){var H=this.options,te=H.autoActive,Ae=H.editable,qe=hs(T);return this.setPointData(function(Tt){return Os({target:qe,data:[].concat(er(Tt),[qe]),targetHandler:function(Wt){Wt.properties=ki(ki({},Wt.properties),{},{isHover:Ae,isActive:te&&Ae})},otherHandler:function(Wt){Wt.properties=ki(ki({},Wt.properties),{},{isHover:!1,isActive:!1,isDrag:!1})}})}),qe}},{key:"handlePointHover",value:function(T){return this.setCursor("pointHover"),Oa(T,this.hoverPoint)||this.setPointData(function(H){return Os({target:T,data:H,targetHandler:function(te){te.properties.isHover=!0},otherHandler:function(te){te.properties.isHover=!1}})}),T}},{key:"handlePointUnHover",value:function(T){return this.resetCursor(),this.setPointData(function(H){return H.map(function(te){return te.properties.isHover=!1,te})}),T}},{key:"handlePointDragStart",value:function(T){return this.setPointData(function(H){return Os({target:T,data:H,targetHandler:function(te){te.properties=ki(ki({},te.properties),{},{isDrag:!0,isActive:!0})},otherHandler:function(te){te.properties=ki(ki({},te.properties),{},{isDrag:!1,isActive:!1})}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),T}},{key:"handlePointDragging",value:function(T,H){return this.setPointData(function(te){return Os({target:T,data:te,targetHandler:function(Ae){Ae.geometry.coordinates=rf(H)}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),T}},{key:"handlePointDragEnd",value:function(T){return this.setPointData(function(H){return Os({target:T,data:H,targetHandler:function(te){te.properties.isDrag=!1}})}),this.scene.setMapStatus({dragEnable:!0}),this.setCursor("pointHover"),T}},{key:"onPointCreate",value:function(T){return this.handleCreatePoint(rf(Ic(T)))}},{key:"onPointMouseMove",value:function(T){return this.handlePointHover(T.feature)}},{key:"onPointMouseOut",value:function(T){return this.handlePointUnHover(T.feature)}},{key:"onPointDragStart",value:function(T){if(this.options.editable)return this.handlePointDragStart(T.feature)}},{key:"onPointDragging",value:function(T){var H=this.dragPoint;if(this.options.editable&&H)return this.handlePointDragging(H,Ic(T))}},{key:"onPointDragEnd",value:function(T){var H=this.dragPoint;if(this.options.editable&&H)return this.handlePointDragEnd(H)}},{key:"enablePointRenderAction",value:function(){var T,H,te,Ae,qe=this.options.editable;this.enabled&&((H=this.pointRender)===null||H===void 0||H.enableCreate()),(T=this.pointRender)===null||T===void 0||T.enableClick(),qe&&((te=this.pointRender)===null||te===void 0||te.enableHover(),(Ae=this.pointRender)===null||Ae===void 0||Ae.enableDrag())}},{key:"disablePointRenderAction",value:function(){var T,H,te,Ae;(T=this.pointRender)===null||T===void 0||T.disableCreate(),(H=this.pointRender)===null||H===void 0||H.disableHover(),(te=this.pointRender)===null||te===void 0||te.disableDrag(),(Ae=this.pointRender)===null||Ae===void 0||Ae.disableClick()}}]),I}(pd),Ie=function(b){or(I,b);var A=Vr(I);function I(){return As(this,I),A.apply(this,arguments)}return hr(I,[{key:"midPointRender",get:function(){return this.render.midPoint}},{key:"getCommonOptions",value:function(T){return ki(ki({},ht(kr(I.prototype),"getCommonOptions",this).call(this,T)),{},{showMidPoint:!0})}},{key:"bindMidPointRenderEvent",value:function(){var T,H,te;(T=this.midPointRender)===null||T===void 0||T.on(v.RenderEvent.Click,this.onMidPointClick.bind(this)),(H=this.midPointRender)===null||H===void 0||H.on(v.RenderEvent.Mousemove,this.onMidPointHover.bind(this)),(te=this.midPointRender)===null||te===void 0||te.on(v.RenderEvent.Mouseout,this.onMidPointUnHover.bind(this))}},{key:"getMidPointData",value:function(){return this.source.getRenderData("midPoint")}},{key:"setMidPointData",value:function(T){return this.source.setRenderData("midPoint",T)}},{key:"getMidPointsByLine",value:function(T){var H=T.properties.nodes;if(!this.options.showMidPoint||2>H.length)return[];for(var te=[],Ae=0;H.length-1>Ae;Ae++){var qe,Tt,Wt,vr,Fr=Mf(bn([H[Ae],H[Ae+1]]),{properties:{id:to("midPoint"),startId:(qe=(Tt=H[Ae].properties)===null||Tt===void 0?void 0:Tt.id)!==null&&qe!==void 0?qe:"",endId:(Wt=(vr=H[Ae+1].properties)===null||vr===void 0?void 0:vr.id)!==null&&Wt!==void 0?Wt:""}});te.push(Fr)}return te}},{key:"onMidPointHover",value:function(T){this.setCursor("pointHover")}},{key:"onMidPointUnHover",value:function(T){this.resetCursor()}},{key:"enableMidPointRenderAction",value:function(){var T,H;(T=this.midPointRender)===null||T===void 0||T.enableClick(),(H=this.midPointRender)===null||H===void 0||H.enableHover()}},{key:"disableMidPointRenderAction",value:function(){var T,H;(T=this.midPointRender)===null||T===void 0||T.disableClick(),(H=this.midPointRender)===null||H===void 0||H.disableHover()}}]),I}(V),se={draw:"\u5355\u51FB\u7ED8\u5236\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u70B9\u4F4D\u7F6E",pointDrag:null},st={draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u8282\u70B9\u4F4D\u7F6E",pointDrag:null,lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u7EBF\u4F4D\u7F6E",lineDrag:null,midPointHover:"\u5355\u51FB\u5728\u8BE5\u4F4D\u7F6E\u65B0\u589E\u8282\u70B9",drawFinish:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236\uFF0C\u53CC\u51FB\u7ED3\u675F\u7ED8\u5236"},Ue={draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",drawContinue:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236",drawFinish:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236\uFF0C\u53CC\u51FB\u7ED3\u675F\u7ED8\u5236",midPointHover:"\u5355\u51FB\u5728\u8BE5\u4F4D\u7F6E\u65B0\u589E\u8282\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u8282\u70B9\u4F4D\u7F6E",pointDrag:null,lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u9762\u4F4D\u7F6E",lineDrag:null,polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u9762\u4F4D\u7F6E",polygonDrag:null},Xe=ki(ki({},Ue),{},{draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",drawFinish:"\u5355\u51FB\u7ED3\u675F\u7ED8\u5236"}),Ve={draw:"\u62D6\u62FD\u5F00\u59CB\u7ED8\u5236",drawFinish:"\u677E\u5F00\u9F20\u6807\u7ED3\u675F\u7ED8\u5236"},ct={lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u77E9\u5F62\u4F4D\u7F6E",polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u77E9\u5F62\u4F4D\u7F6E"},Ct={lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u5706\u4F4D\u7F6E",polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u5706\u4F4D\u7F6E"},Bt=function(b){or(I,b);var A=Vr(I);function I(){var T;As(this,I);for(var H=arguments.length,te=Array(H),Ae=0;H>Ae;Ae++)te[Ae]=arguments[Ae];return(T=A.call.apply(A,[this].concat(te))).previousPosition=[0,0],T}return hr(I,[{key:"lineRender",get:function(){return this.render.line}},{key:"dragLine",get:function(){return this.getLineData().find(function(T){return T.properties.isDrag})}},{key:"drawLine",get:function(){return this.getLineData().find(function(T){return T.properties.isDraw})}},{key:"editLine",get:function(){return this.getLineData().find(function(T){var H=T.properties;return!H.isDraw&&H.isActive})}},{key:"hoverLine",get:function(){return this.getLineData().find(function(T){return T.properties.isHover})}},{key:"getDragLine",value:function(){return this.dragLine}},{key:"getDrawLine",value:function(){return this.drawLine}},{key:"getEditLine",value:function(){return this.editLine}},{key:"getDefaultOptions",value:function(T){var H=ki(ki({},this.getCommonOptions(T)),{},{showMidPoint:!0,distanceOptions:!1,helper:Oc(st)});return T.distanceOptions&&(H.distanceOptions=ki(ki({},Tu),H.distanceOptions)),T.adsorbOptions&&(H.adsorbOptions=ki(ki({},ou),H.adsorbOptions)),H}},{key:"getAdsorbPosition",value:function(T){var H=this.options.adsorbOptions;if(typeof H=="boolean")return T;var te=this.scene,Ae=H.pointAdsorbPixel,qe=H.lineAdsorbPixel,Tt=null,Wt=pc(H.data,this,T),vr=Wt.points,Fr=Wt.lines;return vr.length&&Ae>0&&(Tt=fu(T,vr,H,te)),!Tt&&Fr.length&&qe>0&&(Tt=wf(T,Fr,H,te)),Tt}},{key:"bindSceneEvent",value:function(){this.sceneRender.on(v.RenderEvent.Mousemove,this.onSceneMouseMove.bind(this))}},{key:"bindPointRenderEvent",value:function(){var T;ht(kr(I.prototype),"bindPointRenderEvent",this).call(this),(T=this.pointRender)===null||T===void 0||T.on(v.RenderEvent.Click,this.onPointClick.bind(this))}},{key:"bindLineRenderEvent",value:function(){var T,H,te,Ae,qe,Tt;(T=this.lineRender)===null||T===void 0||T.on(v.RenderEvent.UnClick,this.onLineUnClick.bind(this)),(H=this.lineRender)===null||H===void 0||H.on(v.RenderEvent.Mousemove,this.onLineMouseMove.bind(this)),(te=this.lineRender)===null||te===void 0||te.on(v.RenderEvent.Mouseout,this.onLineMouseOut.bind(this)),(Ae=this.lineRender)===null||Ae===void 0||Ae.on(v.RenderEvent.Dragstart,this.onLineDragStart.bind(this)),(qe=this.lineRender)===null||qe===void 0||qe.on(v.RenderEvent.Dragging,this.onLineDragging.bind(this)),(Tt=this.lineRender)===null||Tt===void 0||Tt.on(v.RenderEvent.Dragend,this.onLineDragEnd.bind(this))}},{key:"getDashLineDistanceTexts",value:function(T,H){var te=H.showTotalDistance,Ae=H.format;return H.showDashDistance?T.map(function(qe){return Au(qe,{showTotalDistance:te,format:Ae},{isActive:!0,type:"dash"})}).flat():[]}},{key:"getLineDistanceTexts",value:function(T,H){var te=H.showTotalDistance,Ae=H.format,qe=H.showWhen,Tt=[];if(qe.includes("active")){var Wt=T.filter(function(Fr){return Fr.properties.isActive&&Fr.properties.nodes.length>1});Tt.push.apply(Tt,er(Wt.map(function(Fr){return Au(Fr,{showTotalDistance:te,format:Ae},{isActive:!0})}).flat()))}if(qe.includes("normal")){var vr=T.filter(function(Fr){return!Fr.properties.isActive&&Fr.properties.nodes.length>1});Tt.push.apply(Tt,er(vr.map(function(Fr){return Au(Fr,{showTotalDistance:te,format:Ae})}).flat()))}return Tt}},{key:"getDistanceTexts",value:function(){var T=this.options.distanceOptions;if(!T)return[];var H=[],te=T.showWhen,Ae=T.showDashDistance,qe=T.format,Tt=T.showTotalDistance;return H.push.apply(H,er(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!1,format:qe,showDashDistance:Ae})).concat(er(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:Tt,format:qe,showWhen:te})))),H}},{key:"getAllTexts",value:function(){return this.getDistanceTexts()}},{key:"handleCreateLine",value:function(T){var H=zs([T],{isActive:!0,isDraw:!0});return this.setLineData(function(te){return Os({target:H,data:[].concat(er(te),[H]),otherHandler:function(Ae){Ae.properties.isActive=!1}})}),this.setPointData([T]),this.setTextData(this.getAllTexts()),H}},{key:"syncLineNodes",value:function(T,H){return T.properties.nodes=H,T.geometry.coordinates=In(bn(H)),this.setLineData(function(te){return te.map(function(Ae){return Oa(Ae,T)?T:Ae})}),Oa(this.editLine,T)&&this.setMidPointData(this.getMidPointsByLine(T)),this.setPointData(T.properties.nodes),this.setTextData(this.getAllTexts()),T}},{key:"setActiveLine",value:function(T){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setLineData(function(te){return Os({target:T,data:te,targetHandler:function(Ae){Ae.properties=ki(ki({},Ae.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},H)},otherHandler:function(Ae){Ae.properties=ki(ki({},Ae.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(T.properties.nodes.map(function(te){return te.properties=ki(ki({},te.properties),{},{isHover:!1,isActive:!1}),te})),this.setMidPointData(this.getMidPointsByLine(T)),this.setDashLineData([]),this.setTextData(this.getAllTexts()),T}},{key:"clearActiveLine",value:function(){this.source.setData({point:[],line:this.getLineData().map(function(T){return T.properties=ki(ki({},T.properties),{},{isActive:!1,isHover:!1}),T}),midPoint:[],text:this.getAllTexts()})}},{key:"handleLineUnClick",value:function(T){return this.clearActiveLine(),T}},{key:"handleLineHover",value:function(T){if(!this.drawLine)return this.setCursor("lineHover"),Oa(T,this.hoverLine)||this.setLineData(function(H){return Os({target:T,data:H,targetHandler:function(te){te.properties.isHover=!0},otherHandler:function(te){te.properties.isHover=!1}})}),T}},{key:"handleLineUnHover",value:function(T){if(!this.drawLine)return this.resetCursor(),this.setLineData(function(H){return H.map(function(te){return te.properties.isHover=!1,te})}),T}},{key:"handleLineDragStart",value:function(T){return this.setActiveLine(T,{isDrag:!0,isActive:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("lineDrag"),T}},{key:"handleLineDragging",value:function(T,H){var te=H.lng,Ae=H.lat,qe=T.properties.nodes,Tt=ur(this.previousPosition,2),Wt=Tt[0],vr=Tt[1];return qe.forEach(function(Fr){var en=Fr.geometry.coordinates;Fr.geometry.coordinates=[en[0]+te-Wt,en[1]+Ae-vr]}),this.syncLineNodes(T,qe),this.setActiveLine(T,{isDrag:!0}),this.setCursor("lineDrag"),this.previousPosition=[te,Ae],T}},{key:"handleLineDragEnd",value:function(T){return T.properties.isDrag=!1,this.setLineData(function(H){return H}),this.scene.setMapStatus({dragEnable:!0}),T}},{key:"resetAdsorbLngLat",value:function(T){if(this.options.adsorbOptions){var H=this.getAdsorbPosition(rf(Ic(T)));return H&&Uu(T,H),H}}},{key:"onPointCreate",value:function(T){if(!this.editLine){this.resetAdsorbLngLat(T);var H=ht(kr(I.prototype),"onPointCreate",this).call(this,T),te=this.drawLine;if(H)return te?(this.syncLineNodes(te,[].concat(er(te.properties.nodes),[H])),this.setDashLineData([])):this.handleCreateLine(H),H}}},{key:"onPointDragStart",value:function(T){if(this.editLine)return this.setHelper("pointDrag"),ht(kr(I.prototype),"onPointDragStart",this).call(this,T)}},{key:"onPointDragging",value:function(T){var H=ht(kr(I.prototype),"onPointDragging",this).call(this,T);if(H){var te=this.resetAdsorbLngLat(T);te&&(H.geometry.coordinates=Oc(te))}var Ae=this.editLine;return Ae&&H&&(this.syncLineNodes(Ae,Ae.properties.nodes.map(function(qe){return Oa(H,qe)?H:qe})),this.setActiveLine(Ae)),H}},{key:"onPointDragEnd",value:function(T){if(this.editLine){var H=ht(kr(I.prototype),"onPointDragEnd",this).call(this,T);return this.setPointData(function(te){return te.map(function(Ae){return Ae.properties.isActive=!1,Ae})}),this.setHelper("pointHover"),H}}},{key:"onLineUnClick",value:function(T){var H=this.editLine;if(H)return this.handleLineUnClick(H)}},{key:"onLineMouseMove",value:function(T){if(!this.drawLine)return this.dragLine||this.drawLine||!this.options.editable||this.setHelper("lineHover"),this.handleLineHover(T.feature)}},{key:"onLineMouseOut",value:function(T){if(!this.drawLine)return this.dragLine||this.drawLine||this.setHelper(this.addable?"draw":null),this.handleLineUnHover(T.feature)}},{key:"onLineDragStart",value:function(T){if(this.options.editable&&!this.drawLine)return this.previousPosition=wl(T),this.setHelper("lineDrag"),this.handleLineDragStart(T.feature)}},{key:"onLineDragging",value:function(T){var H=this.dragLine;if(H)return this.handleLineDragging(H,Ic(T))}},{key:"onLineDragEnd",value:function(T){var H=this.dragLine;if(H)return this.setHelper("lineHover"),this.handleLineDragEnd(H)}},{key:"onPointMouseMove",value:function(T){var H=ht(kr(I.prototype),"onPointMouseMove",this).call(this,T);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper("pointHover"),H}},{key:"onPointMouseOut",value:function(T){var H=ht(kr(I.prototype),"onPointMouseOut",this).call(this,T);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper(this.addable?"draw":null),H}},{key:"onMidPointHover",value:function(T){ht(kr(I.prototype),"onMidPointHover",this).call(this,T),this.setHelper("midPointHover")}},{key:"onMidPointUnHover",value:function(T){ht(kr(I.prototype),"onMidPointUnHover",this).call(this,T),this.setHelper(null)}},{key:"onPointClick",value:function(T){}},{key:"getLineData",value:function(){return this.source.getRenderData("line")}},{key:"setLineData",value:function(T){return this.source.setRenderData("line",T)}},{key:"getTextData",value:function(){return this.source.getRenderData("text")}},{key:"setTextData",value:function(T){return this.source.setRenderData("text",T)}},{key:"getDashLineData",value:function(){return this.source.getRenderData("dashLine")}},{key:"setDashLineData",value:function(T){return this.source.setRenderData("dashLine",T)}},{key:"onMidPointClick",value:function(T){var H=this.editLine,te=T.feature;if(H&&te&&!this.dragPoint){var Ae=H.properties.nodes,qe=te.properties,Tt=qe.startId,Wt=qe.endId,vr=Ae.findIndex(function(zn){return zn.properties.id===Tt}),Fr=Ae.findIndex(function(zn){return zn.properties.id===Wt});if(vr>-1&&Fr>-1){var en=hs(te.geometry.coordinates,{isDrag:!0,isHover:!0});return this.setHelper("pointDrag"),Ae.splice(Fr,0,en),H.geometry.coordinates=In(bn(Ae)),this.syncLineNodes(H,Ae),this.setActiveLine(H),en}}}},{key:"enableSceneRenderAction",value:function(){this.sceneRender.enableDrag(),this.sceneRender.enableMouseMove(),this.sceneRender.enableDblClick()}},{key:"disableSceneRenderAction",value:function(){this.sceneRender.disableDrag(),this.sceneRender.disableMouseMove(),this.sceneRender.disableDblClick()}},{key:"enableLineRenderAction",value:function(){var T,H,te,Ae=this.options.editable;(T=this.lineRender)===null||T===void 0||T.enableUnClick(),Ae&&((H=this.lineRender)===null||H===void 0||H.enableHover(),(te=this.lineRender)===null||te===void 0||te.enableDrag())}},{key:"disableLineRenderAction",value:function(){var T,H,te;(T=this.lineRender)===null||T===void 0||T.disableUnClick(),(H=this.lineRender)===null||H===void 0||H.disableHover(),(te=this.lineRender)===null||te===void 0||te.disableDrag()}}]),I}(Ie),kt=function(b){or(I,b);var A=Vr(I);function I(){return As(this,I),A.apply(this,arguments)}return hr(I,[{key:"dragItem",get:function(){return this.dragPolygon}},{key:"editItem",get:function(){return this.editPolygon}},{key:"polygonRender",get:function(){return this.render.polygon}},{key:"dragPolygon",get:function(){return this.getPolygonData().find(function(T){return T.properties.isDrag})}},{key:"drawPolygon",get:function(){return this.getPolygonData().find(function(T){return T.properties.isDraw})}},{key:"editPolygon",get:function(){return this.getPolygonData().find(function(T){var H=T.properties;return!H.isDraw&&H.isActive})}},{key:"hoverPolygon",get:function(){return this.getPolygonData().find(function(T){return T.properties.isHover})}},{key:"getDragPolygon",value:function(){return this.dragPolygon}},{key:"getDrawPolygon",value:function(){return this.drawPolygon}},{key:"getEditPolygon",value:function(){return this.editPolygon}},{key:"getRenderTypes",value:function(){return["polygon","line","dashLine","midPoint","point","text"]}},{key:"getData",value:function(){return this.getPolygonData()}},{key:"getDefaultOptions",value:function(T){var H=ki(ki({},ht(kr(I.prototype),"getDefaultOptions",this).call(this,T)),{},{areaOptions:!1,helper:Oc(Ue)});return T.areaOptions&&(H.areaOptions=ki(ki({},ws),T.areaOptions)),H}},{key:"getAreaTexts",value:function(T){var H=this.options.areaOptions;if(!H)return[];var te=H.format,Ae=H.showWhen,qe=[],Tt=T.filter(function(Wt){return Wt.geometry.coordinates[0].length>=4});return Ae.includes("active")&&Tt.filter(function(Wt){return Wt.properties.isActive}).forEach(function(Wt){qe.push(Sf(Wt,{format:te},{isActive:!0}))}),Ae.includes("normal")&&Tt.filter(function(Wt){return!Wt.properties.isActive}).forEach(function(Wt){qe.push(Sf(Wt,{format:te},{isActive:!1}))}),qe}},{key:"getAllTexts",value:function(){return[].concat(er(ht(kr(I.prototype),"getAllTexts",this).call(this)),er(this.getAreaTexts(this.getPolygonData())))}},{key:"getPolygonData",value:function(){return this.source.getRenderData("polygon")}},{key:"setPolygonData",value:function(T){return this.source.setRenderData("polygon",T)}},{key:"handleCreatePolygon",value:function(T,H){var te=Gu(T,{nodes:T,line:H,isActive:!0,isDraw:!0});return this.setPolygonData(function(Ae){return Os({target:te,data:[].concat(er(Ae),[te]),otherHandler:function(qe){qe.properties.isActive=!1}})}),te}},{key:"handlePolygonUnClick",value:function(T){return this.clearActivePolygon(),T}},{key:"handlePolygonHover",value:function(T){return this.setCursor("polygonHover"),Oa(T,this.hoverPolygon)||this.setPolygonData(function(H){return Os({target:T,data:H,targetHandler:function(te){te.properties.isHover=!0},otherHandler:function(te){te.properties.isHover=!1}})}),T}},{key:"handlePolygonUnHover",value:function(){this.resetCursor(),this.setPolygonData(function(T){return T.map(function(H){return H.properties.isHover=!1,H})})}},{key:"handlePolygonDragStart",value:function(T){return this.setActivePolygon(T,{isDrag:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("polygonDrag"),T}},{key:"bindPolygonRenderEvent",value:function(){var T,H,te,Ae;(T=this.polygonRender)===null||T===void 0||T.on(v.RenderEvent.UnClick,this.onPolygonUnClick.bind(this)),(H=this.polygonRender)===null||H===void 0||H.on(v.RenderEvent.Mousemove,this.onPolygonHover.bind(this)),(te=this.polygonRender)===null||te===void 0||te.on(v.RenderEvent.Mouseout,this.onPolygonUnHover.bind(this)),(Ae=this.polygonRender)===null||Ae===void 0||Ae.on(v.RenderEvent.Dragstart,this.onPolygonDragStart.bind(this))}},{key:"syncPolygonNodes",value:function(T,H){var te=In(bn([].concat(er(H),[Pa(H)]))),Ae=T.properties,qe=Ae.line;if(T.properties.nodes=H,T.geometry.coordinates=[Ec(ln(te))?te:te.reverse()],this.setPolygonData(function(en){return en.map(function(zn){return Oa(zn,T)?T:zn})}),!Oa(this.drawPolygon,T)){var Tt=qe.properties.nodes,Wt=er(H),vr=Pa(Wt);Wt.push(Tt.length===H.length?hs(vr.geometry.coordinates):w(Tt));var Fr=w(Wt);Fs(vr.geometry.coordinates,Fr.geometry.coordinates)||(Fr.geometry.coordinates=Oc(vr.geometry.coordinates)),this.syncLineNodes(qe,Wt)}return T}},{key:"setActivePolygon",value:function(T){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setActiveLine(T.properties.line,H),this.setPolygonData(function(te){return Os({target:T,data:te,targetHandler:function(Ae){Ae.properties=ki(ki({},Ae.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},H)},otherHandler:function(Ae){Ae.properties=ki(ki({},Ae.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setTextData(this.getAllTexts()),T}},{key:"clearActivePolygon",value:function(){this.setPolygonData(function(T){return T.map(function(H){return H.properties=ki(ki({},H.properties),{},{isActive:!1,isHover:!1}),H})}),this.clearActiveLine()}},{key:"onLineDragStart",value:function(T){var H=ht(kr(I.prototype),"onLineDragStart",this).call(this,T),te=this.getPolygonData().find(function(Ae){return Oa(Ae.properties.line,H)});return te&&(this.setActivePolygon(te,{isDrag:!0}),this.emit(v.DrawEvent.DragStart,te,this.getPolygonData())),H}},{key:"onLineUnClick",value:function(T){return this.editLine}},{key:"onLineDragEnd",value:function(T){var H=ht(kr(I.prototype),"onLineDragEnd",this).call(this,T),te=this.dragPolygon;return H&&te&&(te.properties.isDrag=!1,this.emit(v.DrawEvent.DragEnd,te,this.getPolygonData()),this.emit(v.DrawEvent.Edit,te,this.getPolygonData())),H}},{key:"onPolygonUnClick",value:function(T){var H=this.editPolygon;if(H)return this.handlePolygonUnClick(H)}},{key:"onPolygonHover",value:function(T){if(!this.drawPolygon)return this.dragPolygon||this.setHelper("polygonHover"),this.handlePolygonHover(T.feature)}},{key:"onPolygonUnHover",value:function(T){if(!this.drawPolygon)return this.setHelper(this.addable?"draw":null),this.handlePolygonUnHover()}},{key:"onPolygonDragStart",value:function(T){if(this.options.editable&&!this.drawPolygon){var H=T.feature;return this.previousPosition=wl(T),this.setHelper("polygonDrag"),this.emit(v.DrawEvent.DragStart,H,this.getPolygonData()),this.handlePolygonDragStart(H)}}},{key:"onMidPointClick",value:function(T){var H=this.editPolygon,te=ht(kr(I.prototype),"onMidPointClick",this).call(this,T);if(te&&H){var Ae=H.properties.line.properties.nodes;this.syncPolygonNodes(H,Ae.slice(0,Ae.length-1)),this.setActivePolygon(H)}return te}},{key:"onPointDragEnd",value:function(T){var H=this.editPolygon,te=ht(kr(I.prototype),"onPointDragEnd",this).call(this,T);return te&&H&&this.emit(v.DrawEvent.Edit,H,this.getPolygonData()),te}},{key:"enablePolygonRenderAction",value:function(){var T,H,te,Ae=this.options.editable;(T=this.polygonRender)===null||T===void 0||T.enableUnClick(),Ae&&((H=this.polygonRender)===null||H===void 0||H.enableHover(),(te=this.polygonRender)===null||te===void 0||te.enableDrag())}},{key:"disablePolygonRenderAction",value:function(){var T,H,te;(T=this.polygonRender)===null||T===void 0||T.disableUnClick(),(H=this.polygonRender)===null||H===void 0||H.disableHover(),(te=this.polygonRender)===null||te===void 0||te.disableDrag()}},{key:"bindEnableEvent",value:function(){ht(kr(I.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.enablePolygonRenderAction()}},{key:"unbindEnableEvent",value:function(){ht(kr(I.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.disablePolygonRenderAction()}},{key:"bindThis",value:function(){ht(kr(I.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this),this.bindPolygonRenderEvent=this.bindPolygonRenderEvent.bind(this)}},{key:"setActiveFeature",value:function(T){var H=this.getTargetFeature(T);H?this.setActivePolygon(H):this.clearActivePolygon()}},{key:"resetFeatures",value:function(){var T=this.getPolygonData();this.drawPolygon&&(T=T.filter(function(H){return!H.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setLineData(function(H){return H.filter(function(te){return!te.properties.isDraw})}),this.setTextData(function(H){return H.filter(function(te){return!te.properties.isActive})})),this.editPolygon&&this.handlePolygonUnClick(this.editPolygon),this.setPolygonData(T.map(function(H){return H.properties=ki(ki({},H.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),H}))}}]),I}(Bt),Jt=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;return As(this,I),(te=A.call(this,T,H)).onSceneDragStart=te.onSceneDragStart.bind(zr(te)),te.onSceneDragEnd=te.onSceneDragEnd.bind(zr(te)),te}return hr(I,[{key:"drawLine",get:function(){var T;return(T=this.drawPolygon)===null||T===void 0?void 0:T.properties.line}},{key:"isDragTrigger",get:function(){return this.options.trigger==="drag"}},{key:"isClickTrigger",get:function(){return this.options.trigger==="click"}},{key:"getDefaultOptions",value:function(T){var H=ki(ki({},ht(kr(I.prototype),"getDefaultOptions",this).call(this,T)),{},{showMidPoint:!1,trigger:"click",autoActive:!1,helper:Oc(Xe)});return T.trigger==="drag"&&(H.helper=ki(ki({},H.helper),Ve)),H}},{key:"getMidPointsByLine",value:function(T){return[]}},{key:"handleCreatePolygon",value:function(T,H){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=H.properties.nodes;return Gu(Ae.slice(0,Ae.length-1),ki({nodes:T,line:H},te))}},{key:"handleFirstNodeCreate",value:function(T){var H=hs(T.geometry.coordinates),te=this.handleCreatePolygonLine(T,H,{isDraw:!0,isActive:!0}),Ae=this.handleCreatePolygon([T,H],te,{isDraw:!0,isActive:!0});return this.setPolygonData(function(qe){return Os({target:Ae,data:[].concat(er(qe),[Ae]),targetHandler:function(Tt){Tt.properties=ki(ki({},Tt.properties),{},{isDraw:!0,isActive:!0})}})}),this.emit(v.DrawEvent.AddNode,T,this.drawPolygon,this.getPolygonData()),this.setHelper("drawFinish"),T}},{key:"handleLastNodeCreate",value:function(T){var H=this.options,te=H.autoActive,Ae=H.editable,qe=this.drawPolygon;return qe&&(this.setLineData(function(Tt){return[].concat(er(Tt),[qe.properties.line])}),this.setActivePolygon(qe),te&&Ae||this.handlePolygonUnClick(qe),this.emit(v.DrawEvent.Add,qe,this.getPolygonData()),this.emit(v.DrawEvent.AddNode,qe.properties.nodes[1],this.drawPolygon,this.getPolygonData()),this.setHelper(Ae?te?"pointHover":"polygonHover":this.addable?"draw":null)),T}},{key:"onPointCreate",value:function(T){var H=this;if(this.addable&&!this.dragPoint&&!this.editLine&&this.isClickTrigger){var te=this.drawPolygon,Ae=wl(T),qe=this.handleCreatePoint(Ae);return te?requestAnimationFrame(function(){H.handleLastNodeCreate(qe)}):this.handleFirstNodeCreate(qe),qe}}},{key:"setActivePolygon",value:function(T){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.setActiveLine(T.properties.line,H),this.setPolygonData(function(Ae){return Os({target:T,data:Ae,targetHandler:function(qe){qe.properties=ki(ki({},qe.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},H)},otherHandler:function(qe){qe.properties=ki(ki({},qe.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(T.properties.nodes),this.setDashLineData([]);var te=this.getAllTexts();return this.setTextData(te),T}},{key:"onPointDragging",value:function(T){var H=this.dragPoint;if(H){var te=this.handlePointDragging(H,Ic(T)),Ae=this.editPolygon;return te&&Ae&&(this.syncPolygonNodes(Ae,Ae.properties.nodes.map(function(qe){return Oa(qe,te)?te:qe})),this.setActivePolygon(Ae)),te}}},{key:"onSceneDragStart",value:function(T){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&(this.scene.setMapStatus({dragEnable:!1}),this.handleFirstNodeCreate(this.handleCreatePoint(wl(T))))}},{key:"onSceneDragEnd",value:function(T){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&this.drawPolygon&&(this.scene.setMapStatus({dragEnable:!1}),this.handleLastNodeCreate(this.handleCreatePoint(wl(T))))}},{key:"onSceneMouseMove",value:function(T){var H=this.drawPolygon;if(H){var te=H.properties.nodes,Ae=Pa(te),qe=w(te);qe.geometry.coordinates=wl(T),this.syncPolygonNodes(H,[Ae,qe]),this.setDashLineData([H.properties.line]),this.setTextData(this.getAllTexts()),this.resetCursor()}}},{key:"bindSceneDragEvent",value:function(){this.unbindSceneDragEvent(),this.sceneRender.on(v.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.on(v.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!1})}},{key:"unbindSceneDragEvent",value:function(){this.sceneRender.off(v.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.off(v.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!0})}},{key:"bindEnableEvent",value:function(){ht(kr(I.prototype),"bindEnableEvent",this).call(this),this.isDragTrigger&&this.bindSceneDragEvent()}},{key:"unbindEnableEvent",value:function(){ht(kr(I.prototype),"unbindEnableEvent",this).call(this),this.isDragTrigger&&this.unbindSceneDragEvent()}},{key:"bindThis",value:function(){ht(kr(I.prototype),"bindThis",this).call(this),this.onSceneDragStart=this.onSceneDragStart.bind(this),this.onSceneDragEnd=this.onSceneDragEnd.bind(this)}}]),I}(kt),Ft=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;return As(this,I),(te=A.call(this,T,H)).bindPointRenderEvent(),te.bindSceneEvent(),te.bindMidPointRenderEvent(),te.bindLineRenderEvent(),te.bindPolygonRenderEvent(),te}return hr(I,[{key:"getDefaultOptions",value:function(T){var H=ki(ki({},ht(kr(I.prototype),"getDefaultOptions",this).call(this,T)),{},{showMidPoint:!1,circleSteps:60});return H.distanceOptions&&(H.distanceOptions.showTotalDistance=!0,H.distanceOptions.showOnRadius===void 0&&(H.distanceOptions.showOnRadius=!0)),H.helper&&(H.helper=ki(ki({},H.helper),Ct)),H}},{key:"getDistanceTexts",value:function(){var T=this.options.distanceOptions;if(!T)return[];var H=[],te=T.showWhen,Ae=T.showDashDistance,qe=T.format,Tt=T.showTotalDistance;return H.push.apply(H,er(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!0,format:qe,showDashDistance:Ae})).concat(er(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:Tt,format:qe,showWhen:te})))),H}},{key:"setData",value:function(T){var H=this,te=T.map(function(Ae){var qe,Tt,Wt;Ae.properties=ki(ki({},yo()),Ae.properties);var vr=(qe=Ae.properties)===null||qe===void 0?void 0:qe.nodes;if(((Tt=vr)===null||Tt===void 0?void 0:Tt.length)!==2){var Fr=ur(Mf(Ae).geometry.coordinates,2),en=Fr[0],zn=Fr[1],ei=Co(Ae),Qn=ei[2],_n=(ei[1]+ei[3])/2;vr=[hs([en,zn]),hs([Qn,_n])],Ae.properties.nodes=vr}var Xn=vr[0],ai=vr[1],nn=!!(!((Wt=Ae.properties)===null||Wt===void 0)&&Wt.isActive),hi=Ae.properties.line;return hi||(hi=H.handleCreatePolygonLine(Xn,ai,{isActive:nn}),Ae.properties.line=hi),H.handleCreatePolygon([Xn,ai],hi,ki(ki({},Ae.properties),{},{isActive:nn}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:te,line:te.map(function(Ae){return Ae.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(T,H){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=this.getBoundaryPositions(T,H),qe=Ae.map(function(Tt){return hs(Tt)});return zs(qe,te)}},{key:"syncPolygonNodes",value:function(T,H){var te=T.properties.line,Ae=this.getBoundaryPositions(H[0],H[1]);return T.properties.nodes=H,T.geometry.coordinates=[Ae],this.setPolygonData(function(qe){return qe.map(function(Tt){return Oa(Tt,T)?T:Tt})}),this.setPointData(T.properties.isDraw?[H[0]]:H),te.properties.nodes.forEach(function(qe,Tt){qe.geometry.coordinates=Ae[Tt]}),te.geometry.coordinates=Ae,T}},{key:"onLineDragging",value:function(T){var H=this.dragPolygon,te=ur(this.previousPosition,2),Ae=te[0],qe=te[1],Tt=ht(kr(I.prototype),"onLineDragging",this).call(this,T);if(H){var Wt=ur(wl(T),2),vr=Wt[0],Fr=Wt[1];H.properties.nodes.forEach(function(en){var zn=ur(en.geometry.coordinates,2);en.geometry.coordinates=[zn[0]+vr-Ae,zn[1]+Fr-qe]}),this.syncPolygonNodes(H,H.properties.nodes),this.setActivePolygon(H,{isDrag:!0}),this.emit(v.DrawEvent.Dragging,H,this.getPolygonData())}return Tt}},{key:"getBoundaryPositions",value:function(T,H){for(var te=this.options.circleSteps,Ae=xc(T,H,{units:"meters"}),qe=Gc(T,H),Tt=360/te,Wt=[er(H.geometry.coordinates)],vr=1;te-1>=vr;vr++)Wt.push(Uh(T,Ae,qe+Tt*vr,{units:"meters"}).geometry.coordinates);return Wt.push(er(H.geometry.coordinates)),Wt}}]),I}(Jt),rr=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;return As(this,I),(te=A.call(this,T,H)).drawLineFinish=function(){var Ae,qe=te.drawLine,Tt=(Ae=qe==null?void 0:qe.properties.nodes)!==null&&Ae!==void 0?Ae:[];if(qe&&(Tt==null?void 0:Tt.length)>1){te.setActiveLine(qe);var Wt=te.options,vr=Wt.autoActive,Fr=Wt.editable;vr&&Fr||te.handleLineUnClick(qe),te.setHelper(Fr&&vr?"pointHover":te.addable?"draw":null),te.emit(v.DrawEvent.Add,qe,te.getLineData())}},te.sceneRender.on(v.RenderEvent.DblClick,te.drawLineFinish),te.bindPointRenderEvent(),te.bindSceneEvent(),te.bindMidPointRenderEvent(),te.bindLineRenderEvent(),te}return hr(I,[{key:"dragItem",get:function(){return this.dragLine}},{key:"editItem",get:function(){return this.editLine}},{key:"setData",value:function(T){var H=T.map(function(te){var Ae,qe;return te.properties=ki(ki({},so()),(Ae=te.properties)!==null&&Ae!==void 0?Ae:{}),!((qe=te.properties.nodes)===null||qe===void 0)&&qe.length||(te.properties.nodes=In(te).map(function(Tt){return hs(Tt)})),te});this.source.setData({point:[],midPoint:[],dashLine:[],line:H}),this.setTextData(this.getAllTexts()),this.editLine&&this.setActiveLine(this.editLine)}},{key:"getData",value:function(){return this.getLineData()}},{key:"getRenderTypes",value:function(){return["line","dashLine","midPoint","point","text"]}},{key:"bindPointRenderEvent",value:function(){var T;ht(kr(I.prototype),"bindPointRenderEvent",this).call(this),(T=this.pointRender)===null||T===void 0||T.on(v.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"onPointClick",value:function(T){var H,te=this,Ae=this.drawLine,qe=(H=Ae==null?void 0:Ae.properties.nodes)!==null&&H!==void 0?H:[],Tt=T.feature;if(Oa(Tt,w(qe)))requestAnimationFrame(function(){te.drawLineFinish()});else{var Wt=ur(Tt.geometry.coordinates,2);T.lngLat={lng:Wt[0],lat:Wt[1]},this.onPointCreate(T)}}},{key:"removeNode",value:function(T,H){var te,Ae=this.getTargetFeature(H),qe=this.getTargetFeature(T,(te=Ae==null?void 0:Ae.properties.nodes)!==null&&te!==void 0?te:[]);if(Ae&&qe){var Tt,Wt=(Tt=Ae==null?void 0:Ae.properties.nodes)!==null&&Tt!==void 0?Tt:[];if(3>Wt.length)return;this.syncLineNodes(Ae,Wt.filter(function(vr){return!Oa(qe,vr)})),this.emit(v.DrawEvent.RemoveNode,qe,Ae,this.getLineData()),this.emit(v.DrawEvent.Edit,Ae,this.getLineData())}}},{key:"onPointContextMenu",value:function(T){var H,te=this.editLine,Ae=T.feature,qe=(H=te==null?void 0:te.properties.nodes)!==null&&H!==void 0?H:[];if(te&&qe.length>=3)return this.removeNode(Ae,te),Ae}},{key:"onPointCreate",value:function(T){if(this.addable){var H=ht(kr(I.prototype),"onPointCreate",this).call(this,T);return H&&(this.setHelper("drawFinish"),this.emit(v.DrawEvent.AddNode,H,this.drawLine,this.getLineData())),H}}},{key:"onPointDragEnd",value:function(T){var H=this.editLine,te=ht(kr(I.prototype),"onPointDragEnd",this).call(this,T);return H&&te&&this.emit(v.DrawEvent.Edit,H,this.getLineData()),te}},{key:"onLineDragStart",value:function(T){var H=ht(kr(I.prototype),"onLineDragStart",this).call(this,T);return H&&this.emit(v.DrawEvent.DragStart,H,this.getLineData()),H}},{key:"onLineDragging",value:function(T){var H=ht(kr(I.prototype),"onLineDragging",this).call(this,T);return H&&this.emit(v.DrawEvent.Dragging,H,this.getLineData()),H}},{key:"onLineDragEnd",value:function(T){var H=ht(kr(I.prototype),"onLineDragEnd",this).call(this,T);return H&&(this.emit(v.DrawEvent.DragEnd,H,this.getLineData()),this.emit(v.DrawEvent.Edit,H,this.getLineData())),H}},{key:"onMidPointClick",value:function(T){var H=this.editLine,te=ht(kr(I.prototype),"onMidPointClick",this).call(this,T);return H&&te&&(this.emit(v.DrawEvent.Edit,H,this.getLineData()),this.emit(v.DrawEvent.AddNode,te,H,this.getLineData())),te}},{key:"onSceneMouseMove",value:function(T){var H=this.drawLine;if(H){var te,Ae=w(H.properties.nodes),qe=wl(T);this.options.adsorbOptions&&(qe=(te=this.getAdsorbPosition(qe))!==null&&te!==void 0?te:qe),this.setDashLineData([Cu([qe,Ae.geometry.coordinates])]),this.setTextData(this.getAllTexts())}}},{key:"setActiveFeature",value:function(T){var H=this.getTargetFeature(T);H?this.setActiveLine(H):this.clearActiveLine()}},{key:"resetFeatures",value:function(){var T=this.getLineData();this.drawLine&&(T=T.filter(function(H){return!H.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setTextData(function(H){return H.filter(function(te){return!te.properties.isActive})})),this.editLine&&this.handleLineUnClick(this.editLine),this.setLineData(T.map(function(H){return H.properties=ki(ki({},H.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),H}))}},{key:"enablePointRenderAction",value:function(){var T;ht(kr(I.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&((T=this.pointRender)===null||T===void 0||T.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var T;ht(kr(I.prototype),"disablePointRenderAction",this).call(this),(T=this.pointRender)===null||T===void 0||T.disableContextMenu()}},{key:"bindEnableEvent",value:function(){ht(kr(I.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.sceneRender.enableDblClick()}},{key:"unbindEnableEvent",value:function(){ht(kr(I.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.sceneRender.disableDblClick()}},{key:"bindThis",value:function(){ht(kr(I.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this)}}]),I}(Bt),Xt=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;return As(this,I),(te=A.call(this,T,H)).bindPointRenderEvent(),te}return hr(I,[{key:"dragItem",get:function(){return this.dragPoint}},{key:"editItem",get:function(){return this.editPoint}},{key:"getDefaultOptions",value:function(T){var H=ki(ki({},this.getCommonOptions(T)),{},{helper:Oc(se)});return H.style.point=rl,H}},{key:"bindEnableEvent",value:function(){ht(kr(I.prototype),"bindEnableEvent",this).call(this),this.enablePointRenderAction()}},{key:"unbindEnableEvent",value:function(){ht(kr(I.prototype),"unbindEnableEvent",this).call(this),this.disablePointRenderAction()}},{key:"getRenderTypes",value:function(){return["point"]}},{key:"setData",value:function(T){this.setPointData(T.map(function(H){var te;return H.properties=ki(ki({},Bs()),(te=H.properties)!==null&&te!==void 0?te:{}),H}))}},{key:"getData",value:function(){return this.getPointData()}},{key:"onPointCreate",value:function(T){if(this.addable){var H=ht(kr(I.prototype),"onPointCreate",this).call(this,T);if(H)return this.options.editable&&this.setHelper("pointHover"),this.emit(v.DrawEvent.Add,H,this.getData()),H}else this.setPointData(function(te){return te.map(function(Ae){return Ae.properties=ki(ki({},Ae.properties),{},{isHover:!1,isActive:!1}),Ae})})}},{key:"onPointMouseMove",value:function(T){var H=ht(kr(I.prototype),"onPointMouseMove",this).call(this,T);return this.options.editable&&!this.dragPoint&&this.setHelper("pointHover"),H}},{key:"onPointMouseOut",value:function(T){var H=ht(kr(I.prototype),"onPointMouseOut",this).call(this,T);return this.setHelper(this.addable?"draw":null),H}},{key:"onPointDragStart",value:function(T){var H=ht(kr(I.prototype),"onPointDragStart",this).call(this,T);return this.setHelper("pointDrag"),this.emit(v.DrawEvent.DragStart,H,this.getData()),H}},{key:"onPointDragging",value:function(T){var H=ht(kr(I.prototype),"onPointDragging",this).call(this,T);return H&&this.options.editable&&this.emit(v.DrawEvent.Dragging,H,this.getData()),H}},{key:"onPointDragEnd",value:function(T){var H=ht(kr(I.prototype),"onPointDragEnd",this).call(this,T);return H&&this.options.editable&&(this.setHelper("pointHover"),this.emit(v.DrawEvent.DragEnd,H,this.getData()),this.emit(v.DrawEvent.Edit,H,this.getData())),H}},{key:"bindThis",value:function(){ht(kr(I.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this)}},{key:"onSceneMouseMove",value:function(T){}},{key:"setActiveFeature",value:function(T){var H=this.getTargetFeature(T);this.setPointData(function(te){return te.map(function(Ae){return Ae.properties.isActive=Oa(H,Ae),Ae})})}},{key:"resetFeatures",value:function(){this.setPointData(function(T){return T.map(function(H){return H.properties=ki(ki({},H.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),H})})}}]),I}(V),pr=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;return As(this,I),(te=A.call(this,T,H)).drawPolygonFinish=function(){var Ae,qe=te.drawPolygon,Tt=(Ae=qe==null?void 0:qe.properties.nodes)!==null&&Ae!==void 0?Ae:[];if(qe&&Tt.length>=3){qe.properties.isDraw=!1,te.syncPolygonNodes(qe,Tt),te.setActivePolygon(qe);var Wt=te.options,vr=Wt.autoActive,Fr=Wt.editable;vr&&Fr||te.handlePolygonUnClick(qe),te.setHelper(Fr?vr?"pointHover":"polygonHover":te.addable?"draw":null),te.emit(v.DrawEvent.Add,qe,te.getPolygonData())}},te.sceneRender.on(v.RenderEvent.DblClick,te.drawPolygonFinish),te.bindPointRenderEvent(),te.bindSceneEvent(),te.bindMidPointRenderEvent(),te.bindLineRenderEvent(),te.bindPolygonRenderEvent(),te}return hr(I,[{key:"getDefaultOptions",value:function(T){return ki(ki({},ht(kr(I.prototype),"getDefaultOptions",this).call(this,T)),{},{liveUpdate:!1})}},{key:"setData",value:function(T){var H=T.map(function(te){var Ae,qe;if(te.properties=ki(ki({},yo()),(Ae=te.properties)!==null&&Ae!==void 0?Ae:{}),!(!((qe=te.properties.nodes)===null||qe===void 0)&&qe.length)){var Tt=In(te);Tt=Tt.slice(0,Tt.length-1),te.properties.nodes=Tt.map(function(vr){return hs(vr)})}if(!te.properties.line){var Wt=te.properties.nodes;te.properties.line=zs([].concat(er(Wt),[hs(Pa(Wt).geometry.coordinates)]))}return te});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:H,line:H.map(function(te){return te.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"onPointCreate",value:function(T){if(this.addable&&!this.dragPoint){var H=ht(kr(I.prototype),"onPointCreate",this).call(this,T),te=this.drawPolygon,Ae=this.drawLine;return H&&(te?(this.syncPolygonNodes(te,[].concat(er(te.properties.nodes),[H])),this.setDashLineData([Cu([wl(T),te.properties.nodes[0].geometry.coordinates])]),te.properties.nodes.length>1&&this.setHelper("drawFinish")):Ae&&(this.handleCreatePolygon([H],Ae),this.setHelper("drawContinue")),this.emit(v.DrawEvent.AddNode,H,te,this.getPolygonData())),H}}},{key:"onPointClick",value:function(T){var H=this,te=this.drawPolygon,Ae=T.feature;if(te){var qe=te.properties.nodes;if(qe.length<3||!Oa(Pa(qe),Ae)&&!Oa(w(qe),Ae)){var Tt=ur(Ae.geometry.coordinates,2);T.lngLat={lng:Tt[0],lat:Tt[1]},this.onPointCreate(T)}else requestAnimationFrame(function(){H.drawPolygonFinish()})}}},{key:"onPointDragging",value:function(T){var H=this.dragPoint,te=this.editPolygon;if(H&&te){var Ae=te.properties.line;Ae.properties.nodes=Ae.properties.nodes.map(function(zn){return Oa(zn,H)?H:zn});var qe=Ae.properties.nodes,Tt=qe.slice(0,qe.length-1),Wt=Pa(qe),vr=w(qe),Fr=Oa(Wt,H)||Oa(vr,H);if(Fr&&(Wt.geometry.coordinates=vr.geometry.coordinates=wl(T)),this.options.adsorbOptions&&Fr){var en=this.resetAdsorbLngLat(T);en&&(Wt.geometry.coordinates=vr.geometry.coordinates=en)}ht(kr(I.prototype),"onPointDragging",this).call(this,T),this.syncPolygonNodes(te,Tt),this.setActivePolygon(te)}return H}},{key:"onLineDragging",value:function(T){var H=this.dragPolygon,te=ht(kr(I.prototype),"onLineDragging",this).call(this,T);if(te&&H){var Ae=te.properties.nodes;this.syncPolygonNodes(H,Ae.slice(0,Ae.length-1)),this.emit(v.DrawEvent.Dragging,H,this.getPolygonData())}return te}},{key:"onMidPointClick",value:function(T){var H=ht(kr(I.prototype),"onMidPointClick",this).call(this,T),te=this.editPolygon;return H&&te&&(this.emit(v.DrawEvent.Edit,te,this.getPolygonData()),this.emit(v.DrawEvent.AddNode,H,te,this.getPolygonData())),H}},{key:"onSceneMouseMove",value:function(T){var H,te=this.drawPolygon,Ae=(H=te==null?void 0:te.properties.nodes)!==null&&H!==void 0?H:[];if(te&&Ae.length){this.options.adsorbOptions&&this.resetAdsorbLngLat(T);var qe=wl(T),Tt=[];if(Tt.push(Cu([qe,Pa(Ae).geometry.coordinates])),Ae.length>1&&Tt.push(Cu([qe,w(Ae).geometry.coordinates])),this.options.liveUpdate&&Ae.length>=2){var Wt=In(bn(Ae));te.geometry.coordinates=[[].concat(er(Wt),[qe,Wt[0]])],this.setPolygonData(this.getPolygonData())}this.setDashLineData(Tt),this.setTextData(this.getAllTexts())}}},{key:"removeNode",value:function(T,H){var te,Ae=this.getTargetFeature(H),qe=this.getTargetFeature(T,(te=Ae==null?void 0:Ae.properties.nodes)!==null&&te!==void 0?te:[]);if(Ae&&qe){var Tt,Wt=(Tt=Ae==null?void 0:Ae.properties.nodes)!==null&&Tt!==void 0?Tt:[];if(4>Wt.length)return;this.syncPolygonNodes(Ae,Wt.filter(function(vr){return!Oa(qe,vr)})),this.emit(v.DrawEvent.RemoveNode,qe,Ae,this.getLineData()),this.emit(v.DrawEvent.Edit,Ae,this.getPolygonData())}}},{key:"onPointContextMenu",value:function(T){var H,te=this.editPolygon,Ae=T.feature,qe=(H=te==null?void 0:te.properties.nodes)!==null&&H!==void 0?H:[];if(te&&qe.length>=4)return qe.find(function(Tt){return Oa(Tt,Ae)})||(Ae=qe[0]),this.removeNode(Ae,te),Ae}},{key:"bindPointRenderEvent",value:function(){var T;ht(kr(I.prototype),"bindPointRenderEvent",this).call(this),(T=this.pointRender)===null||T===void 0||T.on(v.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"enablePointRenderAction",value:function(){var T;ht(kr(I.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&((T=this.pointRender)===null||T===void 0||T.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var T;ht(kr(I.prototype),"disablePointRenderAction",this).call(this),(T=this.pointRender)===null||T===void 0||T.disableContextMenu()}}]),I}(kt),yr=function(b){or(I,b);var A=Vr(I);function I(T,H){var te;return As(this,I),(te=A.call(this,T,H)).bindPointRenderEvent(),te.bindSceneEvent(),te.bindMidPointRenderEvent(),te.bindLineRenderEvent(),te.bindPolygonRenderEvent(),te}return hr(I,[{key:"getDefaultOptions",value:function(T){var H=ht(kr(I.prototype),"getDefaultOptions",this).call(this,T);return H.helper&&(H.helper=ki(ki({},H.helper),ct)),H}},{key:"setData",value:function(T){var H=this,te=T.map(function(Ae){var qe,Tt,Wt;Ae.properties=ki(ki({},yo()),(qe=Ae.properties)!==null&&qe!==void 0?qe:{});var vr=Ae.properties.nodes;if(((Tt=vr)===null||Tt===void 0?void 0:Tt.length)!==2){var Fr=ur(Co(Ae),4),en=Fr[2],zn=Fr[3];vr=[hs([Fr[0],Fr[1]]),hs([en,zn])],Ae.properties.nodes=vr}var ei=ur(vr,2),Qn=ei[0],_n=ei[1],Xn=!!(!((Wt=Ae.properties)===null||Wt===void 0)&&Wt.isActive),ai=Ae.properties.line;return ai||(ai=H.handleCreatePolygonLine(Qn,_n,{isActive:Xn}),Ae.properties.line=ai),H.handleCreatePolygon([Qn,_n],ai,ki(ki({},Ae.properties),{},{isActive:Xn}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:te,line:te.map(function(Ae){return Ae.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(T,H){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=In(Yh(bn([T,H]))),qe=Ae.map(function(Tt,Wt){return Wt===0?T:Wt===2?H:hs(Tt)});return zs(qe,te)}},{key:"syncPolygonNodes",value:function(T,H){var te=T.properties.line,Ae=In(Yh(bn(H)));T.properties.nodes=H,T.geometry.coordinates=[Ae],this.setPolygonData(function(Wt){return Wt.map(function(vr){return Oa(vr,T)?T:vr})}),this.setPointData(T.properties.isDraw?[H[0]]:H);var qe=te.properties.nodes,Tt=Ae.filter(function(Wt){return!Fs(Wt,H[0].geometry.coordinates)&&!Fs(Wt,H[1].geometry.coordinates)});return qe.forEach(function(Wt,vr){var Fr=[0,0];switch(vr){case 0:Fr=H[0].geometry.coordinates;break;case 1:Fr=Tt[0];break;case 2:Fr=H[1].geometry.coordinates;break;case 3:Fr=Tt[1];break;case 4:Fr=Oc(H[0].geometry.coordinates)}Wt.geometry.coordinates=Fr}),te.geometry.coordinates=Ae,T}},{key:"onLineDragging",value:function(T){var H=ht(kr(I.prototype),"onLineDragging",this).call(this,T),te=this.dragPolygon;if(H&&te){var Ae=te.properties.line.properties.nodes;this.syncPolygonNodes(te,[Ae[0],Ae[2]]),this.setActivePolygon(te,{isDrag:!0}),this.emit(v.DrawEvent.Dragging,te,this.getPolygonData())}return H}}]),I}(Jt),Ur=function(b,A){for(var I=b;I&&!Array.from(I.classList).includes(A);)I=I.parentElement;return I},xn={point:"#l7draw-point",line:"#l7draw-line",polygon:"#l7draw-polygon",rect:"#l7draw-rect",circle:"#l7draw-circle",clear:"#l7draw-qingkong"},mn={point:Xt,line:rr,polygon:pr,rect:yr,circle:Ft},Mn="data-draw-type",Pn="l7-draw-control",Gn="".concat(Pn,"__btn"),ti="".concat(Gn,"--active");(function(b){var A,I,T,H,te,Ae='<svg><symbol id="l7draw-qingkong" viewBox="0 0 1024 1024"><path d="M778.96777344 334.02148437h-148.31542969V284.58300781A71.78466797 71.78466797 0 0 0 556.49462891 215.36914062H467.50537109a71.78466797 71.78466797 0 0 0-74.15771484 69.11499024V334.02148437h-148.31542969a29.66308594 29.66308594 0 1 0 0 59.32617188h29.66308594v326.29394531A88.98925781 88.98925781 0 0 0 363.68457031 808.63085938h296.63085938a88.98925781 88.98925781 0 0 0 88.98925781-88.98925782V393.34765625h29.66308594a29.66308594 29.66308594 0 0 0 0-59.32617188zM452.67382812 284.58300781c0-4.74609375 6.22924805-9.78881836 14.83154297-9.78881836h88.98925782c8.60229492 0 14.83154297 5.04272461 14.83154296 9.78881836V334.02148437H452.67382812V284.53356934z m237.30468751 435.10803223a29.66308594 29.66308594 0 0 1-29.66308594 29.66308593H363.68457031a29.66308594 29.66308594 0 0 1-29.66308593-29.66308594V393.34765625h355.95703124v326.29394531z"  ></path><path d="M437.84228516 660.31542969c6.57531739 0 12.85400391-3.46069336 17.5012207-9.64050294A39.20471192 39.20471192 0 0 0 462.56152344 627.33996582V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 437.84228516 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.50122071 9.64050293A39.20471192 39.20471192 0 0 0 413.12304687 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.50122071 9.64050294zM586.15771484 660.31542969c6.57531739 0 12.85400391-3.46069336 17.50122071-9.64050294a39.20471192 39.20471192 0 0 0 7.21801758-23.33496093V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 586.15771484 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.5012207 9.64050293A39.20471192 39.20471192 0 0 0 561.43847656 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.5012207 9.64050294z"  ></path></symbol><symbol id="l7draw-rect" viewBox="0 0 1024 1024"><path d="M736.14 648.79V330c0-23.16-18.84-42-42-42H375.49c-11.07-19.13-31.74-32.01-55.43-32.01-35.35 0-64.01 28.66-64.01 64.01 0 23.69 12.88 44.36 32.01 55.43v318.8c0 23.16 18.84 42 42 42H648.7c11.07 19.13 31.74 32.01 55.43 32.01 35.35 0 64.01-28.66 64.01-64.01 0.01-23.7-12.87-44.37-32-55.44zM352.06 375.43A64.281 64.281 0 0 0 375.49 352h296.64v296.8a64.357 64.357 0 0 0-23.43 23.43H352.06v-296.8z"  ></path></symbol><symbol id="l7draw-circle" viewBox="0 0 1024 1024"><path d="M467.013228 557.765038a64.01 64.01 0 1 0 90.52223-90.52539 64.01 64.01 0 1 0-90.52223 90.52539Z"  ></path><path d="M832.16 512.22c0-26.06-15.58-48.46-37.93-58.45-11.21-54.67-38.11-104.92-78.48-145.3-54.42-54.42-126.78-84.4-203.75-84.4s-149.33 29.97-203.75 84.4c-54.42 54.42-84.4 126.79-84.4 203.75s29.97 149.33 84.4 203.75c54.42 54.42 126.78 84.4 203.75 84.4s149.33-29.97 203.75-84.4c40.37-40.37 67.28-90.62 78.48-145.3 22.35-9.98 37.93-32.39 37.93-58.45zM670.5 670.72c-42.34 42.34-98.62 65.65-158.5 65.65-59.87 0-116.16-23.32-158.5-65.65-42.34-42.34-65.65-98.62-65.65-158.5s23.32-116.16 65.65-158.5c42.34-42.34 98.62-65.65 158.5-65.65 59.87 0 116.16 23.32 158.5 65.65 29.9 29.9 50.3 66.77 59.71 106.95-15.81 11.66-26.07 30.4-26.07 51.55s10.26 39.9 26.07 51.55c-9.41 40.18-29.81 77.05-59.71 106.95z"  ></path></symbol><symbol id="l7draw-polygon" viewBox="0 0 1024 1024"><path d="M705.97 640.31c-5.79 0-11.39 0.78-16.72 2.22L381.94 336.66a64.079 64.079 0 0 0 2.14-16.43c0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 23.69 12.88 44.36 32.01 55.43V648.8c-19.13 11.07-32.01 31.74-32.01 55.43 0 35.35 28.66 64.01 64.01 64.01 23.69 0 44.35-12.87 55.42-32l275.05 0.07c11.07 19.14 31.74 32.03 55.44 32.03 35.35 0 64.01-28.66 64.01-64.01s-28.66-64.02-64.02-64.02z m-353.91 8.48V397.22L628.44 672.3l-252.94-0.07a64.411 64.411 0 0 0-23.44-23.44z"  ></path></symbol><symbol id="l7draw-line" viewBox="0 0 1024 1024"><path d="M832.16 449.21c0-35.35-28.66-64.01-64.01-64.01-29.2 0-53.81 19.56-61.5 46.28l-390.9 96.82 72.18-144.18c33.56-1.99 60.17-29.83 60.17-63.89 0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 13.04 3.91 25.17 10.61 35.28l-78.42 156.65c-33.58 1.97-60.21 29.81-60.21 63.89 0 35.35 28.66 64.01 64.01 64.01 29.2 0 53.81-19.56 61.5-46.28l390.8-96.79-71.97 143.34c-33.62 1.93-60.28 29.8-60.28 63.9 0 35.35 28.66 64.01 64.01 64.01s64.01-28.66 64.01-64.01c0-13-3.89-25.09-10.54-35.18l78.28-155.93c33.61-1.95 60.28-29.81 60.28-63.91z"  ></path></symbol><symbol id="l7draw-point" viewBox="0 0 1024 1024"><path d="M331.46 330.08m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M384.12 735.84m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M769.11 512.7m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path></symbol></svg>',qe=(qe=document.getElementsByTagName("script"))[qe.length-1].getAttribute("data-injectcss");if(qe&&!b.__iconfont__svg__cssinject__){b.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(Wt){console&&console.log(Wt)}}function Tt(){te||(te=!0,T())}A=function(){var Wt,vr=document.createElement("div");vr.innerHTML=Ae,Ae=null,(vr=vr.getElementsByTagName("svg")[0])&&(vr.setAttribute("aria-hidden","true"),vr.style.position="absolute",vr.style.width=0,vr.style.height=0,vr.style.overflow="hidden",(Wt=document.body).firstChild?function(Fr,en){en.parentNode.insertBefore(Fr,en)}(vr,Wt.firstChild):Wt.appendChild(vr))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(A,0):(I=function(){document.removeEventListener("DOMContentLoaded",I,!1),A()},document.addEventListener("DOMContentLoaded",I,!1)):document.attachEvent&&(T=A,H=b.document,te=!1,function Wt(){try{H.documentElement.doScroll("left")}catch(vr){return void setTimeout(Wt,50)}Tt()}(),H.onreadystatechange=function(){H.readyState=="complete"&&(H.onreadystatechange=null,Tt())})})(window),js(".l7-draw-control{display:flex;overflow:hidden;background:#fff;border-radius:2px}.l7-draw-control__btn{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;padding:0;text-align:center;background:transparent;border-width:0;border-right:1px solid #e0e0e0;outline:0;cursor:pointer}.l7-draw-control__btn:hover{background-color:#e5e5e5}.l7-draw-control__btn:last-child{border-bottom:0}.l7-draw-control__btn .l7-draw-icon{width:26px;height:26px;overflow:hidden;fill:currentColor}.l7-draw-control__btn--active svg{color:#0370fe}");var ii=function(b){or(I,b);var A=Vr(I);function I(T){var H,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return As(this,I),(H=A.call(this,te)).controlOption=void 0,H.sceneInstance=void 0,H.drawMap={},H.btnMap={},H.activeType=null,H.emitDataChange=kl(function(){H.emit(v.ControlEvent.DataChange,H.getDrawData())},16),H.sceneInstance=T,H.controlOption=ki(ki({},H.getDefault()),te||{}),H.onBtnClick=H.onBtnClick.bind(zr(H)),H}return hr(I,[{key:"getActiveType",value:function(){return this.activeType}},{key:"getDefault",value:function(){return ki(ki({},ht(kr(I.prototype),"getDefault",this).call(this)),{},{className:"",buttonClassName:"",activeButtonClassName:"",style:"",position:"topleft",commonDrawOptions:{},drawConfig:{point:!0,line:!0,polygon:!0,rect:!0,circle:!0,clear:!0}})}},{key:"addTo",value:function(T){return ht(kr(I.prototype),"addTo",this).call(this,T),this.init(),this}},{key:"onAdd",value:function(){var T=this.controlOption,H=T.className,te=T.style,Ae=M.DOM.create("div","".concat(Pn," ").concat(H));return te&&Ae.setAttribute("style",te),Ae}},{key:"onRemove",value:function(){Object.values(this.drawMap).forEach(function(T){T.clear(!0)})}},{key:"init",value:function(){var T,H=this,te=[];Object.entries(this.controlOption.drawConfig).forEach(function(Ae){var qe=ur(Ae,2),Tt=qe[0],Wt=qe[1];if(Wt){var vr=H.initBtn(Tt);vr.addEventListener("click",H.onBtnClick),te.push(vr),H.btnMap[Tt]=vr;var Fr=mn[Tt];if(Fr&&H.sceneInstance){var en=new Fr(H.sceneInstance,ki(ki({},H.controlOption.commonDrawOptions),typeof Wt=="boolean"?{}:Wt));en.on(v.DrawEvent.Change,H.emitDataChange),H.drawMap[Tt]=en}}}),(T=this.container).append.apply(T,te),this.controlOption.defaultActiveType&&this.onDrawClick(this.controlOption.defaultActiveType)}},{key:"getDrawData",value:function(){return ud(oa(this.drawMap).map(function(T){var H=ur(T,2);return[H[0],H[1].getData()]}))}},{key:"getTypeDraw",value:function(T){var H;return(H=this.drawMap[T])!==null&&H!==void 0?H:null}},{key:"onBtnClick",value:function(T){var H=Ur(T.target,Gn);if(H){var te=H.getAttribute(Mn);te==="clear"?this.clearDrawData():this.onDrawClick(te)}}},{key:"setActiveType",value:function(T){var H=null,te=this.activeType;if(te){var Ae,qe=this.btnMap[te];if(qe){M.DOM.removeClass(qe,ti);var Tt=this.controlOption.activeButtonClassName;Tt&&M.DOM.removeClass(qe,Tt)}(Ae=this.drawMap[te])===null||Ae===void 0||Ae.disable(),H=null}if(te!==T&&T){var Wt;(Wt=this.drawMap[T])===null||Wt===void 0||Wt.enable();var vr=this.btnMap[T];vr&&M.DOM.addClass(vr,"".concat(ti," ").concat(this.controlOption.activeButtonClassName)),H=T}this.activeType=H,this.emit(v.ControlEvent.DrawChange,H)}},{key:"onDrawClick",value:function(T){this.setActiveType(T)}},{key:"clearDrawData",value:function(){Object.values(this.drawMap).forEach(function(T){T==null||T.clear()})}},{key:"initBtn",value:function(T){var H=M.DOM.create("button","".concat(Gn," ").concat(this.controlOption.buttonClassName));return H.innerHTML=`<svg class="l7-draw-icon" aria-hidden="true">
      <use xlink:href="`.concat(xn[T],`"></use>
    </svg>`),H.setAttribute(Mn,T),H}}]),I}(M.Control);v.ACTIVE_COLOR=df,v.BaseMode=pd,v.CircleDrawer=Ft,v.DEFAULT_ADSORB_CONFIG=ou,v.DEFAULT_AREA_OPTIONS=ws,v.DEFAULT_COMMON_OPTIONS=rc,v.DEFAULT_CURSOR_MAP=c,v.DEFAULT_DISTANCE_OPTIONS=Tu,v.DEFAULT_HISTORY_CONFIG=Zs,v.DEFAULT_KEYBOARD_CONFIG=ts,v.DEFAULT_MID_POINT_STYLE=Xf,v.DEFAULT_NODE_NORMAL_STYLE=bf,v.DEFAULT_NODE_STYLE=Cc,v.DEFAULT_POINT_NORMAL_STYLE=ys,v.DEFAULT_POINT_STYLE=rl,v.DEFAULT_POPUP_CONFIG=Vs,v.DEFAULT_SOURCE_DATA=K,v.DEFAULT_STYLE=sd,v.DEFAULT_TEXT_NORMAL_STYLE=Zc,v.DashLineRender=kh,v.DragPolygonMode=Jt,v.DrawCircle=Ft,v.DrawControl=ii,v.DrawLine=rr,v.DrawPoint=Xt,v.DrawPolygon=pr,v.DrawRect=yr,v.LayerRender=Wc,v.LineDrawer=rr,v.LineMode=Bt,v.LineRender=Dr,v.MidPointMode=Ie,v.MidPointRender=Dl,v.NORMAL_COLOR=zc,v.PointDrawer=Xt,v.PointMode=V,v.PointRender=Vo,v.PolygonDrawer=pr,v.PolygonMode=kt,v.PolygonRender=qo,v.RENDER_MAP=Wf,v.RectDrawer=yr,v.SceneRender=du,v.Source=nf,v.TextRender=Dh,v.calcAreaText=Sf,v.calcDistanceTextsByLine=Au,v.createDashLine=Cu,v.createLineFeature=zs,v.createPointFeature=hs,v.createPolygonFeature=Gu,v.findMinIndex=mf,v.getAdsorbFeature=pc,v.getAdsorbLine=wf,v.getAdsorbPoint=fu,v.getDefaultLineProperties=so,v.getDefaultPointProperties=Bs,v.getDefaultPolygonProperties=yo,v.getLineCenterPoint=Bl,v.getLngLat=Ic,v.getMapDom=Xl,v.getParentByClassName=Ur,v.getPosition=wl,v.getUuid=to,v.isDev=!1,v.isSameFeature=Oa,v.resetEventLngLat=Uu,v.splitByPosition=lh,v.transLngLat2Position=rf,v.updateTargetFeature=Os,Object.defineProperty(v,"__esModule",{value:!0})})},10438:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return fe}});var v=g(15671),M=g(43144),c=g(60136),K=g(82963),N=g(61120),Z=g(16912),B=g(1413),L=g(91),$=g(15861),U=g(74902),ke=g(97326),We=g(4942),me=g(64687),Le=g.n(me),Se=g(81618),et=g.n(Se),at=g(54095),Lt=g(11265),Et=g(85975),jt=g(77160),pe=g(86700),$e=g(28660),ye=g(58304),ie=g(84859),re=g(97685),De=function(){function _t(){(0,v.Z)(this,_t),(0,We.Z)(this,"projectionMatrix",Et.create()),(0,We.Z)(this,"viewMatrix",Et.create()),(0,We.Z)(this,"viewProjectionMatrix",Et.create()),(0,We.Z)(this,"ViewProjectionMatrixUncentered",Et.create()),(0,We.Z)(this,"viewUncenteredMatrix",Et.create())}return(0,M.Z)(_t,[{key:"syncWithMapCamera",value:function(Ot){var mt=Ot.zoom,Rt=mt===void 0?1:mt,pt=Ot.center,Ge=pt===void 0?[0,0]:pt,wt=Ot.offsetOrigin,ee=wt===void 0?[0,0]:wt,Re=Ot.cameraPosition,dt=Re===void 0?[0,0,0]:Re,D=Ot.up,q=D===void 0?[0,1,0]:D,G=Ot.lookAt,O=G===void 0?[0,0,0]:G,k=Ot.aspect,X=k===void 0?1:k,W=Ot.near,ae=W===void 0?.1:W,Be=Ot.far,ve=Be===void 0?1e3:Be,Je=Ot.fov,ot=Je===void 0?45:Je;this.zoom=Rt,this.center=Ge,Et.perspective(this.projectionMatrix,ot/180*Math.PI,X,ae,ve);var Qe=jt.fromValues.apply(jt,(0,U.Z)(dt)),ir=jt.fromValues.apply(jt,(0,U.Z)(O)),mr=jt.fromValues.apply(jt,(0,U.Z)(q));Et.lookAt(this.viewMatrix,Qe,ir,mr),this.viewUncenteredMatrix=Et.clone(this.viewMatrix),Et.translate(this.viewMatrix,this.viewMatrix,jt.fromValues(-ee[0],ee[1],0)),Et.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Et.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var Ot=(0,re.Z)(this.center,2),mt=Ot[0],Rt=Ot[1];return[mt,Rt]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(Ot){var mt=85.0511287798,Rt=Math.max(Math.min(mt,Ot[1]),-mt),pt=256<<20,Ge=Math.PI/180,wt=Ot[0]*Ge,ee=Rt*Ge;ee=Math.log(Math.tan(Math.PI/4+ee/2));var Re=.5/Math.PI,dt=.5,D=-.5/Math.PI;return Ge=.5,wt=pt*(Re*wt+dt)-215440491,ee=-(pt*(D*ee+Ge)-106744817),[wt,ee]}}]),_t}(),le=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],ge,ce;function je(_t){var Ye=J();return function(){var mt=(0,N.Z)(_t),Rt;if(Ye){var pt=(0,N.Z)(this).constructor;Rt=Reflect.construct(mt,arguments,pt)}else Rt=mt.apply(this,arguments);return(0,K.Z)(this,Rt)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_t){return!1}}function Me(_t,Ye){var Ot=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,mt=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Ot||mt)&&(Ye||(Ye=document),!!Ye)){var Rt=Ye.head||Ye.getElementsByTagName("head")[0];if(!Rt){Rt=Ye.createElement("head");var pt=Ye.body||Ye.getElementsByTagName("body")[0];pt?pt.parentNode.insertBefore(Rt,pt):Ye.documentElement.appendChild(Rt)}var Ge=Ye.createElement("style");return Ge.type="text/css",Ge.styleSheet?Ge.styleSheet.cssText=_t:Ge.appendChild(Ye.createTextNode(_t)),Rt.appendChild(Ge),Ge}}Me(`.amap-logo{
 display: none !important;
}
`);var ne=[108.92361,34.54083];window.forceWebGL=!0;var xe="ff533602d57df6f8ab3b0fea226ae52f",Ne="2.0",Pe=!1,He=null,lt=(ge=(0,pe.b2)(),ge(ce=function(_t){(0,c.Z)(Ot,_t);var Ye=je(Ot);function Ot(){var mt;(0,v.Z)(this,Ot);for(var Rt=arguments.length,pt=new Array(Rt),Ge=0;Ge<Rt;Ge++)pt[Ge]=arguments[Ge];return mt=Ye.call.apply(Ye,[this].concat(pt)),(0,We.Z)((0,ke.Z)(mt),"version",ie.G["GAODE2.x"]),(0,We.Z)((0,ke.Z)(mt),"handleViewChanged",function(wt){var ee=mt.map.customCoords.getCameraParams(),Re=ee.fov,dt=ee.near,D=ee.far,q=ee.aspect,G=ee.position,O=ee.lookAt,k=ee.up;mt.emit("mapchange");var X=mt.map.customCoords.getCenter();mt.cameraChangedCallback&&(mt.viewport.syncWithMapCamera({aspect:q,far:D,fov:Re,cameraPosition:G,lookAt:O,up:k,near:dt,zoom:mt.map.getZoom()-1,center:X,offsetOrigin:[G[0],G[1]]}),mt.coordinateSystemService.setCoordinateSystem(at.lo.P20_2),mt.cameraChangedCallback(mt.viewport))}),mt}return(0,M.Z)(Ot,[{key:"setCustomCoordCenter",value:function(Rt){this.sceneCenter=Rt,this.sceneCenterMKT=Lt.TG.apply(void 0,(0,U.Z)(Rt))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoordByLayer",value:function(Rt,pt){var Ge=pt||this.sceneCenter,wt=Lt.TG.apply(void 0,(0,U.Z)(Ge)),ee=this._sub((0,Lt.TG)(Rt[0],Rt[1]),wt);return Rt[2]&&ee.push(Rt[2]),ee}},{key:"lngLatToCoordsByLayer",value:function(Rt,pt){var Ge=this;return Rt.map(function(wt){return typeof wt[0]=="number"?Ge.lngLatToCoordByLayer(wt,pt):wt.map(function(ee){return Ge.lngLatToCoordByLayer(ee,pt)})})}},{key:"setCoordCenter",value:function(Rt){this.map.customCoords.setCenter(Rt||ne),this.setCustomCoordCenter(Rt||ne)}},{key:"lngLatToCoord",value:function(Rt){return this.sceneCenter||(this.map.customCoords.setCenter(Rt),this.setCustomCoordCenter(Rt)),this._sub((0,Lt.TG)(Rt[0],Rt[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(Rt){var pt=this;return Rt.map(function(Ge){return typeof Ge[0]=="number"?pt.lngLatToCoord(Ge):Ge.map(function(wt){return pt.lngLatToCoord(wt)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var Rt=this.map.getContainer();if(Rt!==null){var pt=Rt.getElementsByClassName("amap-maps")[0];pt.style.zIndex="auto",this.markerContainer=Lt.SO.create("div","l7-marker-container2",pt)}}}},{key:"updateView",value:function(Rt){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var Rt=this.map.getBounds(),pt=Rt.getNorthEast(),Ge=Rt.getSouthWest(),wt=this.getCenter(),ee=wt.lng>pt.getLng()||wt.lng<Ge.getLng()?180-pt.getLng():pt.getLng(),Re=wt.lng<Ge.getLng()?Ge.getLng()-180:Ge.getLng();return[[Re,Ge.getLat()],[ee,pt.getLat()]]}},{key:"getMinZoom",value:function(){var Rt=this.map.getZooms();return Rt[0]-1}},{key:"getMaxZoom",value:function(){var Rt=this.map.getZooms();return Rt[1]-1}},{key:"lngLatToContainer",value:function(Rt){var pt=this.map.lngLatToContainer(Rt);return{x:pt.getX(),y:pt.getY()}}},{key:"getModelMatrix",value:function(Rt,pt,Ge){var wt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ee=this.map.customCoords.lngLatToCoord(Rt),Re=Et.create();return Et.translate(Re,Re,jt.fromValues(ee[0],ee[1],pt)),Et.scale(Re,Re,jt.fromValues(wt[0],wt[1],wt[2])),Et.rotateX(Re,Re,Ge[0]),Et.rotateY(Re,Re,Ge[1]),Et.rotateZ(Re,Re,Ge[2]),Re}},{key:"init",value:function(){var mt=(0,$.Z)(Le().mark(function pt(){var Ge,wt,ee,Re,dt,D,q,G,O,k,X,W,ae,Be,ve,Je,ot,Qe,ir,mr,Ar,Er;return Le().wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(Ge=this.config,wt=Ge.id,ee=Ge.style,Re=ee===void 0?"light":ee,dt=Ge.minZoom,D=dt===void 0?0:dt,q=Ge.maxZoom,G=q===void 0?18:q,O=Ge.token,k=O===void 0?xe:O,X=Ge.mapInstance,W=Ge.plugin,ae=W===void 0?[]:W,Be=Ge.version,ve=Be===void 0?Ne:Be,Je=(0,L.Z)(Ge,le),this.viewport=new De,window.AMap||X){Tr.next=6;break}return ae.push("Map3D"),Tr.next=6,et().load({key:k,version:Ne,plugins:ae});case 6:X?(this.map=X,this.$mapContainer=this.map.getContainer(),Qe=this.map.getCenter(),(ot=this.map.customCoords)===null||ot===void 0||ot.setCenter([Qe.lng,Qe.lat]),this.setCustomCoordCenter([Qe.lng,Qe.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(wt),mr=(0,B.Z)({mapStyle:this.getMapStyleValue(Re),zooms:[D,G],viewMode:"3D"},Je),mr.zoom&&(mr.zoom+=1),k===xe&&console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),Ar=new AMap.Map(this.$mapContainer,mr),this.map=Ar,Er=Ar.getCenter(),(ir=this.map.customCoords)===null||ir===void 0||ir.setCenter([Er.lng,Er.lat]),this.setCustomCoordCenter([Er.lng,Er.lat]),Ar.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return Tr.stop()}},pt,this)}));function Rt(){return mt.apply(this,arguments)}return Rt}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(Rt){this.cameraChangedCallback=Rt}},{key:"initViewPort",value:function(){var Rt,pt=(Rt=this.map.customCoords)===null||Rt===void 0?void 0:Rt.getCameraParams(),Ge=pt.fov,wt=pt.near,ee=pt.far,Re=pt.aspect,dt=pt.position,D=pt.lookAt,q=pt.up;this.emit("mapchange");var G=this.map.customCoords.getCenter(),O=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:Re,far:ee,fov:Ge,cameraPosition:dt,lookAt:D,near:wt,up:q,zoom:O-1,center:G,offsetOrigin:[dt[0],dt[1]]}),this.coordinateSystemService.setCoordinateSystem(at.lo.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(Rt,pt){var Ge=[0,0];return Ge[0]=Rt[0]-pt[0],Ge[1]=Rt[1]-pt[1],Ge}}]),Ot}(ye.Z))||ce);function ft(_t){var Ye=It();return function(){var mt=(0,N.Z)(_t),Rt;if(Ye){var pt=(0,N.Z)(this).constructor;Rt=Reflect.construct(mt,arguments,pt)}else Rt=mt.apply(this,arguments);return(0,K.Z)(this,Rt)}}function It(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_t){return!1}}var fe=function(_t){(0,c.Z)(Ot,_t);var Ye=ft(Ot);function Ot(){return(0,v.Z)(this,Ot),Ye.apply(this,arguments)}return(0,M.Z)(Ot,[{key:"getServiceConstructor",value:function(){return lt}}]),Ot}(Z.Z)},16912:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return U}});var v=g(1413),M=g(43269),c=g(15671),K=g(43144),N=g(53229),Z=g(54095),B,L,$,U=(B=(0,Z.yT)(Z.vK.IGlobalConfigService),L=function(){function ke(We){(0,c.Z)(this,ke),(0,M.Z)(this,"configService",$,this),this.config=We}return(0,K.Z)(ke,[{key:"setContainer",value:function(me,Le,Se,et){me.bind(Z.vK.MapConfig).toConstantValue((0,v.Z)((0,v.Z)({},this.config),{},{id:Le,canvas:Se,hasBaseMap:et})),me.bind(Z.vK.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),ke}(),$=(0,N.Z)(L.prototype,"configService",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L)},43663:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return N}});var v=g(1413),M=g(15671),c=g(43144),K=g(55538),N=function(){function Z(){(0,M.Z)(this,Z)}return(0,c.Z)(Z,[{key:"syncWithMapCamera",value:function(L){var $=L.center,U=L.zoom,ke=L.pitch,We=L.bearing,me=L.viewportHeight,Le=L.viewportWidth,Se=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new K.Z((0,v.Z)((0,v.Z)({},Se),{},{width:Le,height:me,longitude:$&&$[0],latitude:$&&$[1],zoom:U,pitch:ke,bearing:We}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(L,$){return this.viewport.projectFlat(L,$)}}]),Z}()},58304:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Ge}});var v=g(97685),M=g(5647),c=g(74902),K=g(1413),N=g(91),Z=g(15861),B=g(43269),L=g(15671),$=g(43144),U=g(4942),ke=g(53229),We=g(64687),me=g.n(We),Le=g(81618),Se=g.n(Le),et=g(54095),at=g(11265),Lt=g(85975),Et=g(77160),jt=g(86700),pe=g(28660),$e=g(84859),ye=g(73900);function ie(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee={top:0,right:0,bottom:0,left:0};if(typeof wt=="number")return{top:wt,right:wt,bottom:wt,left:wt};if(Array.isArray(wt)){if(wt.length===4)return{top:wt[0],right:wt[1],bottom:wt[2],left:wt[3]};if(wt.length===2)return{top:wt[0],right:wt[1],bottom:wt[0],left:wt[1]}}return(0,K.Z)((0,K.Z)({},ee),wt)}var re=g(43663),De={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},le=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],ge,ce,je,J,Me,ne,xe,Ne,Pe,He,lt;function ft(wt,ee){var Re=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,dt=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Re||dt)&&(ee||(ee=document),!!ee)){var D=ee.head||ee.getElementsByTagName("head")[0];if(!D){D=ee.createElement("head");var q=ee.body||ee.getElementsByTagName("body")[0];q?q.parentNode.insertBefore(D,q):ee.documentElement.appendChild(D)}var G=ee.createElement("style");return G.type="text/css",G.styleSheet?G.styleSheet.cssText=wt:G.appendChild(ee.createTextNode(wt)),D.appendChild(G),G}}ft(`.amap-logo{
 display: none !important;
}
`);var It={contextmenu:"rightclick"},fe=0;window.forceWebGL=!0;var _t="15cd8a57710d40c9b7c0e3cc120f1200",Ye="1.4.15",Ot="amap-script",mt=!1,Rt=[],pt=12,Ge=(ge=(0,jt.b2)(),ce=(0,jt.f3)(et.vK.IGlobalConfigService),je=(0,jt.f3)(et.vK.MapConfig),J=(0,jt.f3)(et.vK.ICoordinateSystemService),Me=(0,jt.f3)(et.vK.IEventEmitter),ge(ne=(xe=function(){function wt(){var ee=this;(0,L.Z)(this,wt),(0,U.Z)(this,"version",$e.G["GAODE1.x"]),(0,U.Z)(this,"simpleMapCoord",new ye.D),(0,U.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),(0,B.Z)(this,"configService",Ne,this),(0,B.Z)(this,"config",Pe,this),(0,B.Z)(this,"coordinateSystemService",He,this),(0,B.Z)(this,"eventEmitter",lt,this),(0,U.Z)(this,"handleCameraChanged",function(Re){var dt=Re.camera,D=dt.fov,q=dt.near,G=dt.far,O=dt.height,k=dt.pitch,X=dt.rotation,W=dt.aspect,ae=dt.position,Be=ee.getCenter(),ve=Be.lng,Je=Be.lat;if(ee.emit("mapchange"),ee.cameraChangedCallback){ee.viewport.syncWithMapCamera({aspect:W,bearing:360-X,far:G,fov:D,cameraHeight:O,near:q,pitch:k,zoom:ee.map.getZoom()-1,center:[ve,Je],offsetOrigin:[ae.x,ae.y]});var ot=ee.config.offsetZoom,Qe=ot===void 0?pt:ot;ee.viewport.getZoom()>Qe?ee.coordinateSystemService.setCoordinateSystem(et.lo.P20_OFFSET):ee.coordinateSystemService.setCoordinateSystem(et.lo.P20),ee.cameraChangedCallback(ee.viewport)}})}return(0,$.Z)(wt,[{key:"setBgColor",value:function(Re){this.bgColor=Re}},{key:"addMarkerContainer",value:function(){var Re=this.map.getContainer();if(Re!==null){var dt=Re.getElementsByClassName("amap-maps")[0];this.markerContainer=at.SO.create("div","l7-marker-container",dt)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(Re,dt){et.I9.indexOf(Re)!==-1?this.eventEmitter.on(Re,dt):this.map.on(It[Re]||Re,dt)}},{key:"off",value:function(Re,dt){et.I9.indexOf(Re)!==-1?this.eventEmitter.off(Re,dt):this.map.off(It[Re]||Re,dt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var Re;return(Re=this.map.getContainer())===null||Re===void 0?void 0:Re.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var Re=this.map.getSize();return[Re.getWidth(),Re.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(Re){return this.map.setZoom(Re+1)}},{key:"getCenter",value:function(Re){if(Re!=null&&Re.padding){var dt=this.getCenter(),D=ie(Re.padding),q=this.lngLatToPixel([dt.lng,dt.lat]),G=[(D.right-D.left)/2,(D.bottom-D.top)/2],O=this.pixelToLngLat([q.x-G[0],q.y-G[1]]);return O}var k=this.map.getCenter();return{lng:k.getLng(),lat:k.getLat()}}},{key:"setCenter",value:function(Re,dt){if(dt!=null&&dt.padding){var D=ie(dt.padding),q=this.lngLatToPixel(Re),G=[(D.right-D.left)/2,(D.bottom-D.top)/2],O=this.pixelToLngLat([q.x+G[0],q.y+G[1]]);this.map.setCenter([O.lng,O.lat])}else this.map.setCenter(Re)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var Re=this.map.getBounds().toBounds(),dt=Re.getNorthEast(),D=Re.getSouthWest(),q=this.getCenter(),G=q.lng>dt.getLng()||q.lng<D.getLng()?180-dt.getLng():dt.getLng(),O=q.lng<D.getLng()?D.getLng()-180:D.getLng();return[[O,D.getLat()],[G,dt.getLat()]]}},{key:"getMinZoom",value:function(){var Re=this.map.get("zooms");return Re[0]-1}},{key:"getMaxZoom",value:function(){var Re=this.map.get("zooms");return Re[1]-1}},{key:"setRotation",value:function(Re){return this.map.setRotation(Re)}},{key:"setPitch",value:function(Re){return this.map.setPitch(Re)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(Re){this.map.panTo(Re)}},{key:"panBy",value:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(Re,dt)}},{key:"fitBounds",value:function(Re){this.map.setBounds(new AMap.Bounds([Re[0][0],Re[0][1],Re[1][0],Re[1][1]]))}},{key:"setZoomAndCenter",value:function(Re,dt){this.map.setZoomAndCenter(Re+1,dt)}},{key:"setMapStyle",value:function(Re){this.map.setMapStyle(this.getMapStyleValue(Re))}},{key:"setMapStatus",value:function(Re){this.map.setStatus(Re)}},{key:"getMapStyleConfig",value:function(){return De}},{key:"getMapStyleValue",value:function(Re){return this.getMapStyleConfig()[Re]||Re}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(Re){var dt=this.map.pixelToLngLat(new AMap.Pixel(Re[0],Re[1]));return{lng:dt.getLng(),lat:dt.getLat()}}},{key:"lngLatToPixel",value:function(Re){var dt=this.map.lnglatToPixel(new AMap.LngLat(Re[0],Re[1]));return{x:dt.getX(),y:dt.getY()}}},{key:"containerToLngLat",value:function(Re){var dt=new AMap.Pixel(Re[0],Re[1]),D=this.map.containerToLngLat(dt);return{lng:D==null?void 0:D.getLng(),lat:D==null?void 0:D.getLat()}}},{key:"lngLatToContainer",value:function(Re){var dt=new AMap.LngLat(Re[0],Re[1]),D=this.map.lngLatToContainer(dt);return{x:D.getX(),y:D.getY()}}},{key:"lngLatToCoord",value:function(Re){var dt=this.map.lngLatToGeodeticCoord(Re),D=dt.x,q=dt.y;return[D,-q]}},{key:"lngLatToMercator",value:function(Re,dt){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(Re,dt,D){var q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],G=this.viewport.projectFlat(Re),O=Lt.create();return Lt.translate(O,O,Et.fromValues(G[0],G[1],dt)),Lt.scale(O,O,Et.fromValues(q[0],q[1],q[2])),Lt.rotateX(O,O,D[0]),Lt.rotateY(O,O,D[1]),Lt.rotateZ(O,O,D[2]),O}},{key:"init",value:function(){var ee=(0,Z.Z)(me().mark(function dt(){var D=this,q,G,O,k,X,W,ae,Be,ve,Je,ot,Qe,ir,mr;return me().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return q=this.config,G=q.id,O=q.style,k=O===void 0?"light":O,X=q.minZoom,W=X===void 0?0:X,ae=q.maxZoom,Be=ae===void 0?18:ae,ve=q.token,Je=ve===void 0?_t:ve,ot=q.mapInstance,Qe=q.plugin,ir=Qe===void 0?[]:Qe,mr=(0,N.Z)(q,le),Er.next=3,new Promise(function(Zt){var Tr=function(){if(ot)D.map=ot,D.$mapContainer=D.map.getContainer(),setTimeout(function(){D.map.on("camerachange",D.handleCameraChanged),Zt()},30);else{D.$mapContainer=D.creatMapContainer(G);var un=(0,K.Z)({mapStyle:D.getMapStyleValue(k),zooms:[W,Be],viewMode:"3D"},mr);un.zoom&&(un.zoom+=1);var Zn=new AMap.Map(D.$mapContainer,un);Zn.on("camerachange",D.handleCameraChanged),Zn.on("camerachange",function(){setTimeout(function(){return D.handleAfterMapChange()})}),D.map=Zn,setTimeout(function(){Zt()},10)}};!mt&&!ot?(Je===_t&&console.warn("%c".concat(D.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),mt=!0,ir.push("Map3D"),Se().load({key:Je,version:Ye,plugins:ir}).then(function(){Tr(),Rt.length&&(Rt.forEach(function(pn){return pn()}),Rt=[])}).catch(function(pn){throw new Error(pn)})):mt&&window.AMap||ot?Tr():Rt.push(Tr)});case 3:this.viewport=new re.Z;case 4:case"end":return Er.stop()}},dt,this)}));function Re(){return ee.apply(this,arguments)}return Re}()},{key:"meterToCoord",value:function(Re,dt){var D=AMap.GeometryUtil.distance((0,M.Z)(AMap.LngLat,(0,c.Z)(Re)),(0,M.Z)(AMap.LngLat,(0,c.Z)(dt))),q=this.lngLatToCoord(Re),G=(0,v.Z)(q,2),O=G[0],k=G[1],X=this.lngLatToCoord(dt),W=(0,v.Z)(X,2),ae=W[0],Be=W[1],ve=Math.sqrt(Math.pow(O-ae,2)+Math.pow(k-Be,2));return ve/D}},{key:"updateView",value:function(Re){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(Re){var dt,D=(dt=this.getContainer())===null||dt===void 0?void 0:dt.getElementsByClassName("amap-layer")[0],q=Re==="jpg"?D==null?void 0:D.toDataURL("image/jpeg"):D==null?void 0:D.toDataURL("image/png");return q}},{key:"emit",value:function(Re){for(var dt,D=arguments.length,q=new Array(D>1?D-1:0),G=1;G<D;G++)q[G-1]=arguments[G];(dt=this.eventEmitter).emit.apply(dt,[Re].concat(q))}},{key:"once",value:function(Re){for(var dt,D=arguments.length,q=new Array(D>1?D-1:0),G=1;G<D;G++)q[G-1]=arguments[G];(dt=this.eventEmitter).once.apply(dt,[Re].concat(q))}},{key:"destroy",value:function(){var Re,dt;(Re=this.$mapContainer)===null||Re===void 0||(dt=Re.parentNode)===null||dt===void 0||dt.removeChild(this.$mapContainer),delete window.initAMap;var D=document.getElementById(Ot);D&&document.head.removeChild(D),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(Re){this.cameraChangedCallback=Re}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(Re){var dt=Re;typeof Re=="string"&&(dt=document.getElementById(Re));var D=document.createElement("div");return D.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,D.id="l7_amap_div"+fe++,dt.appendChild(D),D}}]),wt}(),Ne=(0,ke.Z)(xe.prototype,"configService",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=(0,ke.Z)(xe.prototype,"config",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=(0,ke.Z)(xe.prototype,"coordinateSystemService",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=(0,ke.Z)(xe.prototype,"eventEmitter",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe))||ne)},73900:function(vt,Ee,g){"use strict";g.d(Ee,{D:function(){return K}});var v=g(15671),M=g(43144),c=g(4942),K=function(){function N(Z){(0,v.Z)(this,N),(0,c.Z)(this,"size",1e4),this.size=Z||1e4}return(0,M.Z)(N,[{key:"setSize",value:function(B){this.size=B}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(B){return(180+B)/360*this.size}},{key:"mercatorYfromLat",value:function(B){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+B*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(B){return B/this.size*360-180}},{key:"latFromMercatorY",value:function(B){var L=180-(1-B/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(L*Math.PI/180))-90}},{key:"project",value:function(B){var L=this.mercatorXfromLng(B[0]),$=this.mercatorYfromLat(B[1]);return[L,$]}},{key:"unproject",value:function(B){var L=this.lngFromMercatorX(B[0]),$=this.latFromMercatorY(B[1]);return[L,$]}}]),N}()},84859:function(vt,Ee,g){"use strict";g.d(Ee,{G:function(){return v}});var v;(function(M){M["GAODE1.x"]="GAODE1.x",M["GAODE2.x"]="GAODE2.x",M.MAPBOX="MAPBOX",M.DEFUALT="DEFUALTMAP",M.SIMPLE="SIMPLE",M.GLOBEL="GLOBEL"})(v||(v={}))},11265:function(vt,Ee,g){"use strict";g.d(Ee,{ft:function(){return Vn},PG:function(){return ni},vO:function(){return fn},Uj:function(){return qi},e2:function(){return ao},SO:function(){return v},iH:function(){return Kl},z6:function(){return Vh},sN:function(){return ks},Qj:function(){return mu},oX:function(){return Ts},a5:function(){return M},LZ:function(){return Xf},nx:function(){return p},dD:function(){return xl},lN:function(){return Ys},Z:function(){return qn},TG:function(){return $i},S8:function(){return $o},rQ:function(){return At},bV:function(){return _e},zi:function(){return Ke},ds:function(){return Tl},Ev:function(){return Gs},oO:function(){return al},mt:function(){return Ul},Lw:function(){return xf},SI:function(){return uu},Rx:function(){return Bc},W0:function(){return In},Gi:function(){return Bo},Dd:function(){return ha},YR:function(){return xa},TS:function(){return eo},fO:function(){return Vs},xr:function(){return ou},VJ:function(){return ls},vJ:function(){return zr},b0:function(){return Hn},om:function(){return kr},h8:function(){return Ml},Z6:function(){return Dn},hH:function(){return Yf},Gk:function(){return Y},We:function(){return _c},ls:function(){return ol},hj:function(){return io},Cl:function(){return Mi},Oc:function(){return Sa},M4:function(){return Bi},NJ:function(){return co},_O:function(){return Rl},ks:function(){return Kn},Ol:function(){return cc},fj:function(){return Ho},ZB:function(){return Co},gJ:function(){return R},xA:function(){return bn},Vi:function(){return Nc},an:function(){return Zl},rJ:function(){return df},qD:function(){return rc},z0:function(){return Ce},jG:function(){return ze},M8:function(){return Hf},Dt:function(){return rh},D5:function(){return wr},fg:function(){return kc},eW:function(){return er},zh:function(){return ht},N_:function(){return Vr},Ro:function(){return od},Xj:function(){return E},FH:function(){return ur},hJ:function(){return Ff},Tt:function(){return ad},pq:function(){return Mf},LT:function(){return Wc},wj:function(){return kh},if:function(){return Tf},vP:function(){return Yh},yM:function(){return lo},MS:function(){return Gc},LF:function(){return Cn},Uv:function(){return Uh},RH:function(){return sn},Fv:function(){return Lh},RV:function(){return Dh},cN:function(){return Wf},yA:function(){return tl},yR:function(){return lu},qC:function(){return bi},iV:function(){return Es},CI:function(){return Wr},_0:function(){return Yi},p3:function(){return gh},a:function(){return cr},Dv:function(){return zc},Jo:function(){return ff},ih:function(){return ca},Fb:function(){return nh}});var v={};g.r(v),g.d(v,{DPR:function(){return Df},addClass:function(){return Xs},addStyle:function(){return Cf},appendElementType:function(){return _f},clearChildren:function(){return cf},create:function(){return bs},css2Style:function(){return Kh},empty:function(){return lc},getClass:function(){return yl},getContainer:function(){return Ao},getDiffRect:function(){return yc},getStyleList:function(){return lf},getViewPortScale:function(){return th},hasClass:function(){return jf},printCanvas:function(){return Us},remove:function(){return Ps},removeClass:function(){return gl},removeStyle:function(){return gd},setChecked:function(){return Eh},setClass:function(){return Mu},setTransform:function(){return dh},setUnDraggable:function(){return Af},splitWords:function(){return gs},triggerResize:function(){return _l},trim:function(){return Va}});var M={};g.r(M),g.d(M,{getColumn:function(){return Pl},getSatByColumn:function(){return Xc},max:function(){return ql},mean:function(){return Gf},min:function(){return gu},mode:function(){return Bf},statMap:function(){return eu},sum:function(){return Ks}});var c=g(1413),K=g(43144),N=g(15671),Z=g(60136),B=g(82963),L=g(61120),$=g(89611);function U(oe){return Function.toString.call(oe).indexOf("[native code]")!==-1}var ke=g(5647);function We(oe){var Fe=typeof Map=="function"?new Map:void 0;return We=function(rt){if(rt===null||!U(rt))return rt;if(typeof rt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Fe!="undefined"){if(Fe.has(rt))return Fe.get(rt);Fe.set(rt,xt)}function xt(){return(0,ke.Z)(rt,arguments,(0,L.Z)(this).constructor)}return xt.prototype=Object.create(rt.prototype,{constructor:{value:xt,enumerable:!1,writable:!0,configurable:!0}}),(0,$.Z)(xt,rt)},We(oe)}var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Le(oe){this.message=oe}Le.prototype=new Error,Le.prototype.name="InvalidCharacterError";function Se(oe){var Fe=String(oe).replace(/=+$/,"");if(Fe.length%4===1)throw new Le("'atob' failed: The string to be decoded is not correctly encoded.");for(var Ze="",rt=0,xt,Dt,$r=0;Dt=Fe.charAt($r++);~Dt&&(xt=rt%4?xt*64+Dt:Dt,rt++%4)?Ze+=String.fromCharCode(255&xt>>(-2*rt&6)):0)Dt=me.indexOf(Dt);return Ze}function et(oe){oe=String(oe);for(var Fe,Ze,rt,xt,Dt="",$r=0,En=oe.length%3;$r<oe.length;){if((Ze=oe.charCodeAt($r++))>255||(rt=oe.charCodeAt($r++))>255||(xt=oe.charCodeAt($r++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");Fe=Ze<<16|rt<<8|xt,Dt+=me.charAt(Fe>>18&63)+me.charAt(Fe>>12&63)+me.charAt(Fe>>6&63)+me.charAt(Fe&63)}return En?Dt.slice(0,En-3)+"===".substring(En):Dt}var at=function(){function oe(Fe,Ze){(0,N.Z)(this,oe),this.buffers=Fe,this.type=Ze}return(0,K.Z)(oe,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(Ze,rt,xt){throw new Error("not implemented")}}]),oe}(),Lt,Et=function(){return Lt||(Lt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof g.g!="undefined"?g.g:{})};Lt=Et();var jt;typeof window=="undefined"?jt={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(Fe){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(Fe){return null},clearMeasures:function(Fe){return null},clearMarks:function(Fe){return null},measure:function(Fe,Ze,rt){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(Fe){return!0},Event:function(Fe,Ze){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:jt=window;var pe=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,$e=pe?my.getSystemInfoSync().pixelRatio:jt.devicePixelRatio,ye=(0,K.Z)(function oe(Fe,Ze){(0,N.Z)(this,oe),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=Fe,this.timeStamp=Date.now()}),ie=g(97326);function re(oe,Fe){var Ze=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!Ze){if(Array.isArray(oe)||(Ze=De(oe))||Fe&&oe&&typeof oe.length=="number"){Ze&&(oe=Ze);var rt=0,xt=function(){};return{s:xt,n:function(){return rt>=oe.length?{done:!0}:{done:!1,value:oe[rt++]}},e:function(rn){throw rn},f:xt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt=!0,$r=!1,En;return{s:function(){Ze=Ze.call(oe)},n:function(){var rn=Ze.next();return Dt=rn.done,rn},e:function(rn){$r=!0,En=rn},f:function(){try{!Dt&&Ze.return!=null&&Ze.return()}finally{if($r)throw En}}}}function De(oe,Fe){if(oe){if(typeof oe=="string")return le(oe,Fe);var Ze=Object.prototype.toString.call(oe).slice(8,-1);if(Ze==="Object"&&oe.constructor&&(Ze=oe.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(oe);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return le(oe,Fe)}}function le(oe,Fe){(Fe==null||Fe>oe.length)&&(Fe=oe.length);for(var Ze=0,rt=new Array(Fe);Ze<Fe;Ze++)rt[Ze]=oe[Ze];return rt}var ge=new WeakMap,ce=function(){function oe(){(0,N.Z)(this,oe),ge.set(this,{})}return(0,K.Z)(oe,[{key:"addEventListener",value:function(Ze,rt){var xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Dt=ge.get(this);Dt||(Dt={}),Dt[Ze]||(Dt[Ze]=[]),Dt[Ze].push(rt),ge.set(this,Dt),xt.capture,xt.once,xt.passive}},{key:"removeEventListener",value:function(Ze,rt){var xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Dt=ge.get(this);if(Dt){var $r=Dt[Ze];if($r&&$r.length>0){for(var En=$r.length;En--;En>0)if($r[En]===rt){$r.splice(En,1);break}}}}},{key:"dispatchEvent",value:function(Ze){var rt=ge.get(this)[Ze.type];if(rt){var xt=re(rt),Dt;try{for(xt.s();!(Dt=xt.n()).done;){var $r=Dt.value;$r(Ze)}}catch(En){xt.e(En)}finally{xt.f()}}}}]),oe}();function je(oe){var Fe=J();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Me=function(oe){(0,Z.Z)(Ze,oe);var Fe=je(Ze);function Ze(){var rt;return(0,N.Z)(this,Ze),rt=Fe.call(this),rt.childNodes=[],rt}return(0,K.Z)(Ze,[{key:"appendChild",value:function(xt){this.childNodes.push(xt)}},{key:"cloneNode",value:function(){var xt=Object.create(this);return Object.assign(xt,this),xt}},{key:"removeChild",value:function(xt){var Dt=this.childNodes.findIndex(function($r){return $r===xt});return Dt>-1?this.childNodes.splice(Dt,1):null}}]),Ze}(ce);function ne(oe){var Fe=xe();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function xe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Ne=function(oe){(0,Z.Z)(Ze,oe);var Fe=ne(Ze);function Ze(){var rt;return(0,N.Z)(this,Ze),rt=Fe.call(this),rt.className="",rt.children=[],rt}return(0,K.Z)(Ze,[{key:"setAttribute",value:function(xt,Dt){this[xt]=Dt}},{key:"getAttribute",value:function(xt){return this[xt]}},{key:"setAttributeNS",value:function(xt,Dt){this[xt]=Dt}},{key:"getAttributeNS",value:function(xt){return this[xt]}}]),Ze}(Me),Pe=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,He,lt,ft,It;if(Pe){var fe=my.getSystemInfoSync();He=fe.screenWidth,lt=fe.screenHeight,ft=fe.windowWidth,It=fe.windowHeight}else{var _t=jt.innerWidth,Ye=jt.innerHeight;He=_t,lt=Ye,ft=_t,It=Ye}var Ot={width:He,height:lt,availWidth:ft,availHeight:It,availLeft:0,availTop:0},mt=Ot.availWidth,Rt=Ot.availHeight,pt={style:[]};function Ge(oe,Fe){if(!("parentNode"in oe)){var Ze;Fe===0?Ze=function(){return null}:Fe===1?Ze=function(){return pt}:Ze=function(){return null},Object.defineProperty(oe,"parentNode",{enumerable:!0,get:Ze})}if(!("parentElement"in oe)){var rt;Fe===0?rt=function(){return null}:Fe===1?rt=function(){return pt}:rt=function(){return null},Object.defineProperty(oe,"parentElement",{enumerable:!0,get:rt})}}function wt(oe){oe.style=oe.style||{},Object.assign(oe.style,{top:"0px",left:"0px",width:mt+"px",height:Rt+"px",margin:"0px",padding:"0px"})}function ee(oe){"clientLeft"in oe||(oe.clientLeft=0,oe.clientTop=0),"clientWidth"in oe||(oe.clientWidth=mt,oe.clientHeight=Rt),"getBoundingClientRect"in oe||(oe.getBoundingClientRect=function(){var Fe={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return Fe})}function Re(oe){"offsetLeft"in oe||(oe.offsetLeft=0,oe.offsetTop=0),"offsetWidth"in oe||(oe.offsetWidth=mt,oe.offsetHeight=Rt)}function dt(oe){"scrollLeft"in oe||(oe.scrollLeft=0,oe.scrollTop=0),"scrollWidth"in oe||(oe.scrollWidth=mt,oe.scrollHeight=Rt)}function D(oe){var Fe=function(){return!0};oe.classList=[],oe.classList.add=Fe,oe.classList.remove=Fe,oe.classList.contains=Fe,oe.classList.toggle=Fe}function q(oe){var Fe=G();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function G(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}function O(){}var k=function(oe){(0,Z.Z)(Ze,oe);var Fe=q(Ze);function Ze(){var rt,xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Dt=arguments.length>1?arguments[1]:void 0;return(0,N.Z)(this,Ze),rt=Fe.call(this),rt.className="",rt.children=[],rt.focus=O,rt.blur=O,rt.insertBefore=O,rt.appendChild=O,rt.removeChild=O,rt.remove=O,rt.innerHTML="",rt.tagName=xt.toUpperCase(),Ge((0,ie.Z)(rt),Dt),wt((0,ie.Z)(rt)),D((0,ie.Z)(rt)),ee((0,ie.Z)(rt)),Re((0,ie.Z)(rt)),dt((0,ie.Z)(rt)),rt}return(0,K.Z)(Ze)}(Ne);function X(oe){var Fe=W();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function W(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var ae=function(oe){(0,Z.Z)(Ze,oe);var Fe=X(Ze);function Ze(rt){return(0,N.Z)(this,Ze),Fe.call(this,rt)}return(0,K.Z)(Ze,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),Ze}(k);function Be(oe){var Fe=ve();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function ve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Je=function(oe){(0,Z.Z)(Ze,oe);var Fe=Be(Ze);function Ze(){return(0,N.Z)(this,Ze),Fe.call(this,"video")}return(0,K.Z)(Ze)}(ae),ot={},Qe={};function ir(oe,Fe){ot=oe,ot.id=Fe,"tagName"in ot||(ot.tagName="CANVAS"),ot.type="canvas",Mixin.parentNode(ot),Mixin.style(ot),Mixin.classList(ot),Mixin.clientRegion(ot),Mixin.offsetRegion(ot),ot.focus=function(){},ot.blur=function(){}}function mr(oe,Fe){var Ze=1024,rt=1024;Qe={width:Ze,height:rt,clientWidth:Ze/devicePixelRatio,clientHeight:rt/devicePixelRatio,id:Fe,type:"canvas"},"tagName"in Qe||(Qe.tagName="CANVAS"),Mixin.parentNode(Qe),Mixin.style(Qe),Mixin.classList(Qe),Mixin.clientRegion(Qe),Mixin.offsetRegion(Qe),Qe.getContext=function(xt){if(xt==="2d")return oe},Qe.focus=function(){},Qe.blur=function(){}}function Ar(){return ot}function Er(){return Qe}var Zt=(0,K.Z)(function oe(){(0,N.Z)(this,oe);var Fe=Ar(),Ze=Fe.createImage&&Fe.createImage()||{};return"tagName"in Ze||(Ze.tagName="IMG",Ze.__proto__=oe.prototype),Ge(Ze),D(Ze),Object.assign(Ze,{addEventListener:function(xt,Dt){Ze["on".concat(xt)]=Dt.bind(Ze)},removeEventListener:function(xt){Ze["on".concat(xt)]=null}}),Ze}),Tr={href:"",protocol:"",host:""};function pn(oe){var Fe=un();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function un(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Zn=function(oe){(0,Z.Z)(Ze,oe);var Fe=pn(Ze);function Ze(){return(0,N.Z)(this,Ze),Fe.call(this,"body",0)}return(0,K.Z)(Ze,[{key:"addEventListener",value:function(xt,Dt){var $r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(xt,Dt,$r){}},{key:"dispatchEvent",value:function(xt){}}]),Ze}(k),Cr=function(oe){(0,Z.Z)(Ze,oe);var Fe=pn(Ze);function Ze(){return(0,N.Z)(this,Ze),Fe.call(this,"html",0)}return(0,K.Z)(Ze,[{key:"addEventListener",value:function(xt,Dt){var $r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(xt,Dt){}},{key:"dispatchEvent",value:function(xt){}}]),Ze}(k),Nr={},bt={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Tr,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(Fe){return Fe=Fe.toLowerCase(),Fe==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):Fe==="img"?new Zt:Fe==="video"?new Je:new k(Fe)},createElementNS:function(Fe,Ze){return this.createElement(Ze)},createTextNode:function(Fe){return Fe},getElementById:function(Fe){return null},getElementsByTagName:function(Fe){return Fe=Fe.toLowerCase(),[]},getElementsByTagNameNS:function(Fe,Ze){return this.getElementsByTagName(Ze)},getElementsByName:function(Fe){return[]},querySelector:function(Fe){return null},querySelectorAll:function(Fe){return[]},addEventListener:function(Fe,Ze,rt){Nr[Fe]||(Nr[Fe]=[]),Nr[Fe].push(Ze)},removeEventListener:function(Fe,Ze){var rt=Nr[Fe];if(rt&&rt.length>0){for(var xt=rt.length;xt--;xt>0)if(rt[xt]===Ze){rt.splice(xt,1);break}}},dispatchEvent:function(Fe){var Ze=Fe.type,rt=Nr[Ze];if(rt)for(var xt=0;xt<rt.length;xt++)rt[xt](Fe);Fe.target&&typeof Fe.target["on"+Ze]=="function"&&Fe.target["on"+Ze](Fe)},createEvent:function(Fe){return new ye(Fe)}};bt.documentElement=new Cr,bt.head=new k("head"),bt.body=new Zn;var jn=Object,Pt=g(71002),zt=function(){function oe(){(0,N.Z)(this,oe);var Fe=arguments.length;if(Fe===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else Fe===3&&(0,Pt.Z)(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return(0,K.Z)(oe,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),oe}(),Qt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,dr,_r,Hr;if(Qt){var Qr=my.getSystemInfoSync();dr=Qr.system,_r=Qr.platform,Hr=Qr.language}else{var fr={versions:function(){var oe=jt.navigator.userAgent;return{trident:oe.indexOf("Trident")>-1,presto:oe.indexOf("Presto")>-1,webKit:oe.indexOf("AppleWebKit")>-1,gecko:oe.indexOf("Gecko")>-1&&oe.indexOf("KHTML")===-1,mobile:!!oe.match(/AppleWebKit.*Mobile.*/),ios:!!oe.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:oe.indexOf("Android")>-1||oe.indexOf("Linux")>-1,iPhone:oe.indexOf("iPhone")>-1,iPad:oe.indexOf("iPad")>-1,webApp:oe.indexOf("Safari")===-1,weixin:oe.indexOf("MicroMessenger")>-1,qq:oe.match(/\sQQ/i)===" qq"}}(),language:(jt.navigator.browserLanguage||jt.navigator.language).toLowerCase()};fr.versions.android?_r="android":fr.versions.trident?_r="IE":fr.versions.presto?_r="Opera":fr.versions.webKit?_r="webKit":fr.versions.gecko?_r="Firefox":fr.versions.mobile?_r="mobile":fr.versions.ios?_r="ios":fr.versions.iPhone?_r="iPhone":fr.versions.iPad?_r="ipad":fr.versions.webApp?_r="webApp":fr.versions.weixin?_r="weixin":fr.versions.qq&&(_r="qq"),dr=jt.navigator.userAgent,Hr=fr.language}var tt=dr.toLowerCase().indexOf("android")!==-1,Yr=tt?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",Tn="Mozilla/5.0 (".concat(Yr,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(Hr),wn={platform:_r,language:Hr,appVersion:"5.0 (".concat(Yr,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:Tn},Nn={mark:function(Fe){return null},clearMeasures:function(Fe){return null},clearMarks:function(Fe){return null},measure:function(Fe,Ze,rt){return{duration:0}},now:function(){}},Si=0,fa=0;function Xi(oe){var Fe=Date.now(),Ze=Math.max(Si+23,Fe);return fa=setTimeout(function(){oe(Si=Ze)},Ze-Fe),fa}function Ln(oe){var Fe=Ar();return Fe.requestAnimationFrame?Fe.requestAnimationFrame(oe):Xi(oe)}function na(oe){var Fe=Ar();return Fe.cancelAnimationFrame?Fe.cancelAnimationFrame(oe):clearTimeout(oe)}var xi=function(){function oe(Fe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,N.Z)(this,oe),Fe.indexOf("http://")==0||Fe.indexOf("https://")==0){this.href=Fe;return}this.href=Ze+Fe}return(0,K.Z)(oe,null,[{key:"createObjectURL",value:function(Ze){var rt=Ze.buffers[0],xt=Ze.type,Dt=ta(rt),$r="data:".concat(xt,";base64, ");return $r+Dt}}]),oe}();function ta(oe){for(var Fe="",Ze=new Uint8Array(oe),rt=Ze.byteLength,xt=0;xt<rt;xt++)Fe+=String.fromCharCode(Ze[xt]);return et(Fe)}var La={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:18446744073709552e3,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},Ki={};function jo(oe){var Fe=uo();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function uo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var An=new Map,gn=new Map,Oi=new Map,fi={json:"application/json",text:"application/text",arraybuffer:"application/octet-stream"};function va(oe){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:this};typeof this["on".concat(oe)]=="function"&&this["on".concat(oe)].call(this,Fe)}function wa(oe){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{readyState:oe};this.readyState=oe,va.call(this,"readystatechange",Fe)}var Ca=function(oe){(0,Z.Z)(Ze,oe);var Fe=jo(Ze);function Ze(){var rt;return(0,N.Z)(this,Ze),rt=Fe.call(this),rt.onabort=null,rt.onerror=null,rt.onload=null,rt.onloadstart=null,rt.onprogress=null,rt.ontimeout=null,rt.onloadend=null,rt.onreadystatechange=null,rt.readyState=0,rt.response=null,rt.responseText=null,rt._responseType="text",rt.responseXML=null,rt.status=0,rt.statusText="",rt.upload={},rt.withCredentials=!1,An.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),rt}return(0,K.Z)(Ze,[{key:"responseType",set:function(xt){this._responseType=xt}},{key:"abort",value:function(){var xt=Oi.get("requestTask");xt&&xt.abort()}},{key:"getAllResponseHeaders",value:function(){var xt=gn.get("responseHeader");return Object.keys(xt).map(function(Dt){return"".concat(Dt,": ").concat(xt[Dt])}).join(`
`)}},{key:"getResponseHeader",value:function(xt){return gn.get("responseHeader")[xt]}},{key:"open",value:function(xt,Dt,$r){this._method=xt,this._url=Dt}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:""}},{key:"setRequestHeader",value:function(xt,Dt){var $r=An.get("requestHeader");$r[xt]=Dt,An.set("requestHeader",$r)}},{key:"addEventListener",value:function(xt,Dt){var $r=this;typeof Dt=="function"&&(this["on"+xt]=function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};En.target=En.target||$r,Dt.call($r,En)})}},{key:"removeEventListener",value:function(xt,Dt){this["on"+xt]===Dt&&(this["on"+xt]=null)}}]),Ze}(ce);Ca.UNSEND=0,Ca.OPENED=1,Ca.HEADERS_RECEIVED=2,Ca.LOADING=3,Ca.DONE=4;function Aa(oe){var Fe=ma();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function ma(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var ka=function(oe){(0,Z.Z)(Ze,oe);var Fe=Aa(Ze);function Ze(rt){return(0,N.Z)(this,Ze),Fe.call(this,rt)}return(0,K.Z)(Ze)}(ye);function Uo(oe){return function(Fe){Fe.type=oe,bt.dispatchEvent(Fe)}}var ha=Uo("mousedown"),xa=Uo("mousemove"),eo=Uo("mouseup");function Te(oe){var Fe=Po();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function Po(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Hs=function(oe){(0,Z.Z)(Ze,oe);var Fe=Te(Ze);function Ze(rt){var xt;return(0,N.Z)(this,Ze),xt=Fe.call(this,rt),xt.target=Ar(),xt.currentTarget=Ar(),xt}return(0,K.Z)(Ze)}(ye),no=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],Jo=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],os="touch";function Go(oe,Fe,Ze){for(var rt=new Hs(oe),xt=0;xt<no.length;xt++){var Dt=no[xt];rt[Dt]=Fe[Dt]||Jo[xt]}return rt.type=oe,rt.target=Ar(),rt.currentTarget=Ar(),rt.buttons=Wo(oe),rt.which=rt.buttons,rt.pointerId=(Fe.identifier||0)+2,rt.bubbles=!0,rt.cancelable=!0,rt.button=0,rt.width=(Fe.radiusX||.5)*2,rt.height=(Fe.radiusY||.5)*2,rt.pressure=Fe.force||.5,rt.isPrimary=Tu(Fe),rt.pointerType=os,rt.altKey=Ze.altKey,rt.ctrlKey=Ze.ctrlKey,rt.metaKey=Ze.metaKey,rt.shiftKey=Ze.shiftKey,Ze.preventDefault&&(rt.preventDefault=function(){Ze.preventDefault()}),rt}function Wo(oe){var Fe=0;return(oe==="touchstart"||oe==="touchmove"||oe==="pointerdown"||oe==="pointermove")&&(Fe=1),Fe}var za=null;function Tu(oe){return za===oe.identifier}function ws(oe){za===null&&(za=oe.identifier)}function Zs(oe){za===oe.identifier&&(za=null)}function ts(oe){return function(Fe){for(var Ze=Fe.changedTouches,rt=0;rt<Ze.length;rt++){var xt=Ze[rt];rt===0&&oe==="pointerdown"?ws(xt):(oe==="pointerup"||oe==="pointercancel")&&Zs(xt);var Dt=Go(oe,xt,Fe);bt.dispatchEvent(Dt)}}}var Vs=ts("pointerdown"),ou=ts("pointermove"),ls=ts("pointerup");function ki(oe){var Fe=As();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function As(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Rs=function(oe){(0,Z.Z)(Ze,oe);var Fe=ki(Ze);function Ze(rt){var xt;return(0,N.Z)(this,Ze),xt=Fe.call(this,rt),xt.touches=[],xt.targetTouches=[],xt.changedTouches=[],xt.target=Ar(),xt.currentTarget=Ar(),xt}return(0,K.Z)(Ze)}(ye);function hr(oe){var Fe=oe||{},Ze=Fe.x,rt=Ze===void 0?0:Ze,xt=Fe.y,Dt=xt===void 0?0:xt,$r=Fe.clientX,En=$r===void 0?0:$r,pi=Fe.clientY,rn=pi===void 0?0:pi;Object.keys(oe).indexOf("x")!==-1?(oe.pageX=oe.clientX=rt,oe.pageY=oe.clientY=Dt):(oe.x=En,oe.y=rn)}function Lr(oe){return function(Fe){var Ze=new Rs(oe);Ze.changedTouches=Fe.changedTouches,Ze.touches=Fe.touches,Ze.targetTouches=Array.prototype.slice.call(Fe.touches),Ze.timeStamp=Fe.timeStamp,Ze.changedTouches.forEach(function(rt){return hr(rt)}),Ze.touches.forEach(function(rt){return hr(rt)}),Ze.targetTouches.forEach(function(rt){return hr(rt)}),bt.dispatchEvent(Ze)}}function or(oe){return function(Fe){Fe.type=oe,bt.dispatchEvent(Fe)}}var kr=Lr("touchstart"),Hn=Lr("touchmove"),zr=Lr("touchend"),Bo=or("mapCameaParams"),Vr=!1;function cr(oe){Vr=oe}var ht=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,ur=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),er=(ht||ur)&&Vr,sn={atob:Se,btoa:et,devicePixelRatio:$e,Blob:at,document:bt,Element:Ne,Event:ye,EventTarget:ce,HTMLCanvasElement:jn,HTMLElement:k,HTMLMediaElement:ae,HTMLVideoElement:Je,Image:Zt,ImageData:zt,navigator:wn,Node:Me,requestAnimationFrame:Ln,cancelAnimationFrame:na,screen:Ot,XMLHttpRequest:Ca,performance:Nn,URL:xi,WebGLRenderingContext:La,WebGL2RenderingContext:Ki,addEventListener:function(Fe,Ze){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};bt.addEventListener(Fe,Ze,rt)},removeEventListener:function(Fe,Ze,rt){bt.removeEventListener(Fe,Ze)},dispatchEvent:function(Fe){bt.dispatchEvent(Fe)},innerWidth:Ot.availWidth,innerHeight:Ot.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},fn=er?sn:jt,Vn=er?Ca:jt.XMLHttpRequest,ni=er?Tr:jt.location;function oi(oe){var Fe=Ei();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function Ei(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var qi=function(oe){(0,Z.Z)(Ze,oe);var Fe=oi(Ze);function Ze(rt,xt,Dt,$r){var En;return(0,N.Z)(this,Ze),En=Fe.call(this,"AJAXError: ".concat(xt," (").concat(rt,"): ").concat(Dt)),En.status=rt,En.statusText=xt,En.url=Dt,En.body=$r,En}return(0,K.Z)(Ze)}(We(Error));function Pr(oe,Fe){var Ze=new Vn,rt=Array.isArray(oe.url)?oe.url[0]:oe.url;Ze.open(oe.method||"GET",rt,!0),oe.type==="arrayBuffer"&&(Ze.responseType="arraybuffer");for(var xt in oe.headers)oe.headers.hasOwnProperty(xt)&&Ze.setRequestHeader(xt,oe.headers[xt]);return oe.type==="json"&&(Ze.responseType="text",Ze.setRequestHeader("Accept","application/json")),Ze.withCredentials=oe.credentials==="include",Ze.onerror=function(){Fe(new Error(Ze.statusText))},Ze.onload=function(){if((Ze.status>=200&&Ze.status<300||Ze.status===0)&&Ze.response!==null){var Dt=Ze.response;if(oe.type==="json")try{Dt=JSON.parse(Ze.response)}catch(En){return Fe(En)}Fe(null,Dt,Ze.getResponseHeader("Cache-Control"),Ze.getResponseHeader("Expires"),Ze)}else{var $r=new Blob([Ze.response],{type:Ze.getResponseHeader("Content-Type")});Fe(new qi(Ze.status,Ze.statusText,rt.toString(),$r))}},Ze.send(oe.body),Ze}function Cn(oe){return new Promise(function(Fe,Ze){Pr(oe,function(rt,xt,Dt,$r,En){rt?Ze({err:rt,data:null,xhr:En}):Fe({err:null,data:xt,cacheControl:Dt,expires:$r,xhr:En})})})}function ln(oe,Fe){return Pr(oe,Fe)}var bn=function(Fe,Ze){return ln((0,c.Z)((0,c.Z)({},Fe),{},{type:"json"}),Ze)},Kn=function(Fe,Ze){return ln((0,c.Z)((0,c.Z)({},Fe),{},{type:"arrayBuffer"}),Ze)},bi=function(Fe,Ze){return ln((0,c.Z)((0,c.Z)({},Fe),{},{method:"POST"}),Ze)};function Yi(oe){var Fe=fn.document.createElement("a");return Fe.href=oe,Fe.protocol===fn.document.location.protocol&&Fe.host===fn.document.location.host}var Gi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function aa(oe,Fe){var Ze=new fn.Image,rt=fn.URL||fn.webkitURL;Ze.crossOrigin="anonymous",Ze.onload=function(){Fe(null,Ze),rt.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(function(){Ze.src=Gi})},Ze.onerror=function(){return Fe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var xt=new Blob([new Uint8Array(oe)],{type:"image/png"});Ze.src=oe.byteLength?rt.createObjectURL(xt):Gi}function Ta(oe,Fe){var Ze=new Blob([new Uint8Array(oe)],{type:"image/png"});createImageBitmap(Ze).then(function(rt){Fe(null,rt)}).catch(function(rt){Fe(new Error("Could not load image because of ".concat(rt.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var R=function(Fe,Ze,rt){var xt=function($r,En){if($r)Ze($r);else if(En){var pi=typeof createImageBitmap=="function",rn=rt?rt(En):En;pi?Ta(rn,Ze):aa(rn,Ze)}};return Fe.type==="json"?bn(Fe,xt):Kn(Fe,xt)},_e;(function(oe){oe.CENTER="center",oe.TOP="top",oe["TOP-LEFT"]="top-left",oe["TOP-RIGHT"]="top-right",oe.BOTTOM="bottom",oe["BOTTOM-LEFT"]="bottom-left",oe["BOTTOM-RIGHT"]="bottom-right",oe.LEFT="left",oe.RIGHT="right"})(_e||(_e={}));var At={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ke(oe,Fe,Ze){var rt=oe.classList;for(var xt in At)At.hasOwnProperty(xt)&&rt.remove("l7-".concat(Ze,"-anchor-").concat(xt));rt.add("l7-".concat(Ze,"-anchor-").concat(Fe))}var nr=g(37620);function wr(oe){return typeof oe=="string"?!!nr.ZP(oe):!1}function Wr(oe){var Fe=nr.ZP(oe),Ze=[0,0,0,0];return Fe!=null&&(Ze[0]=Fe.r/255,Ze[1]=Fe.g/255,Ze[2]=Fe.b/255,Ze[3]=Fe.opacity),Ze}function In(oe){var Fe=oe&&oe[0],Ze=oe&&oe[1],rt=oe&&oe[2],xt=Fe+Ze*256+rt*65536-1;return xt}function Dn(oe){return[oe+1&255,oe+1>>8&255,oe+1>>8>>8&255]}function Mi(oe){var Fe=fn.document.createElement("canvas"),Ze=Fe.getContext("2d");Fe.width=256,Fe.height=1;for(var rt=null,xt=Ze.createLinearGradient(0,0,256,1),Dt=oe.positions[0],$r=oe.positions[oe.positions.length-1],En=0;En<oe.colors.length;++En){var pi=(oe.positions[En]-Dt)/($r-Dt);xt.addColorStop(pi,oe.colors[En])}if(Ze.fillStyle=xt,Ze.fillRect(0,0,256,1),er)return rt=new Uint8ClampedArray(Ze.getImageData(0,0,256,1).data),Fe=null,Ze=null,{data:rt,width:256,height:1};rt=Ze.getImageData(0,0,256,1).data;for(var rn=Ze.createImageData(256,1),_i=0;_i<rn.data.length;_i+=4)rn.data[_i+0]=rt[_i+0],rn.data[_i+1]=rt[_i+1],rn.data[_i+2]=rt[_i+2],rn.data[_i+3]=rt[_i+3];return Fe=null,Ze=null,rn}function Bi(oe,Fe){var Ze=fn.document.createElement("canvas"),rt=Ze.getContext("2d");Ze.width=256,Ze.height=1;for(var xt=rt.createLinearGradient(0,0,256,1),Dt=Fe[1]-Fe[0],$r=0;$r<oe.colors.length;++$r){var En=Math.max((oe.positions[$r]-Fe[0])/Dt,0);xt.addColorStop(En,oe.colors[$r])}rt.fillStyle=xt,rt.fillRect(0,0,256,1);var pi=rt.getImageData(0,0,256,1).data,rn=Ko(rt,pi);return Ze=null,rt=null,rn}function io(oe){var Fe=fn.document.createElement("canvas"),Ze=Fe.getContext("2d");Fe.width=256,Fe.height=1;var rt=Ze.createImageData(256,1);return rt.data.fill(0),oe.positions.forEach(function(xt,Dt){var $r=Wr(oe.colors[Dt]);rt.data[xt*4+0]=$r[0]*255,rt.data[xt*4+1]=$r[1]*255,rt.data[xt*4+2]=$r[2]*255,rt.data[xt*4+3]=$r[3]*255}),Fe=null,Ze=null,rt}function co(oe){var Fe=fn.document.createElement("canvas"),Ze=Fe.getContext("2d");Ze.globalAlpha=1,Fe.width=256,Fe.height=1;for(var rt=256/oe.colors.length,xt=0;xt<oe.colors.length;xt++)Ze.beginPath(),Ze.lineWidth=2,Ze.strokeStyle=oe.colors[xt],Ze.moveTo(xt*rt,0),Ze.lineTo((xt+1)*rt,0),Ze.stroke();var Dt=Ze.getImageData(0,0,256,1).data,$r=Ko(Ze,Dt);return Fe=null,Ze=null,$r}function Sa(oe,Fe){var Ze=fn.document.createElement("canvas"),rt=Ze.getContext("2d");rt.globalAlpha=1,Ze.width=256,Ze.height=1;var xt=Fe[1]-Fe[0];oe.positions.length-oe.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var Dt=0;Dt<oe.colors.length;Dt++)rt.beginPath(),rt.lineWidth=2,rt.strokeStyle=oe.colors[Dt],rt.moveTo((oe.positions[Dt]-Fe[0])/xt*255,0),rt.lineTo((oe.positions[Dt+1]-Fe[0])/xt*255,0),rt.stroke();var $r=rt.getImageData(0,0,256,1).data,En=Ko(rt,$r);return Ze=null,rt=null,En}function Ko(oe,Fe){for(var Ze=oe.createImageData(256,1),rt=0;rt<Ze.data.length;rt+=4)Ze.data[rt+0]=Fe[rt+0],Ze.data[rt+1]=Fe[rt+1],Ze.data[rt+2]=Fe[rt+2],Ze.data[rt+3]=Fe[rt+3];return Ze}function Co(oe){switch(oe.type){case"cat":return[0,255];default:return[0,1]}}var Oo={BACK:1029,FRONT:1028};function Ho(oe){switch(oe){case"GAODE1.x":return Oo.BACK;case"GAODE2.x":return Oo.BACK;case"MAPBOX":return Oo.FRONT;case"SIMPLE":return Oo.FRONT;case"GLOBEL":return Oo.BACK;case"DEBAULT":return Oo.FRONT;default:return Oo.FRONT}}var Io=g(74902),Js=g(97685),Il=g(96486);function Ao(oe){var Fe=oe;return typeof oe=="string"&&(Fe=fn.document.getElementById(oe)),Fe}function Va(oe){return oe.trim?oe.trim():oe.replace(/^\s+|\s+$/g,"")}function gs(oe){return Va(oe).split(/\s+/)}function Ws(oe){var Fe,Ze,rt=fn==null||(Fe=fn.document)===null||Fe===void 0||(Ze=Fe.documentElement)===null||Ze===void 0?void 0:Ze.style;if(!rt)return oe[0];for(var xt in oe)if(oe[xt]&&oe[xt]in rt)return oe[xt];return oe[0]}function bs(oe,Fe,Ze){var rt=fn.document.createElement(oe);return Fe&&(rt.className=Fe||""),Ze&&Ze.appendChild(rt),rt}function Ps(oe){var Fe=oe.parentNode;Fe&&Fe.removeChild(oe)}function Xs(oe,Fe){if(oe.classList!==void 0)for(var Ze=gs(Fe),rt=0,xt=Ze.length;rt<xt;rt++)oe.classList.add(Ze[rt]);else if(!jf(oe,Fe)){var Dt=yl(oe);Mu(oe,(Dt?Dt+" ":"")+Fe)}}function gl(oe,Fe){oe.classList!==void 0?oe.classList.remove(Fe):Mu(oe,Va((" "+yl(oe)+" ").replace(" "+Fe+" "," ")))}function jf(oe,Fe){if(oe.classList!==void 0)return oe.classList.contains(Fe);var Ze=yl(oe);return Ze.length>0&&new RegExp("(^|\\s)"+Fe+"(\\s|$)").test(Ze)}function Mu(oe,Fe){oe instanceof HTMLElement?oe.className=Fe:oe.className.baseVal=Fe}function yl(oe){return oe instanceof SVGElement&&(oe=oe.correspondingElement),oe.className.baseVal===void 0?oe.className:oe.className.baseVal}function lc(oe){for(;oe&&oe.firstChild;)oe.removeChild(oe.firstChild)}var Lc=Ws(["transform","WebkitTransform"]);function dh(oe,Fe){oe.style[Lc]=Fe}function _l(){if(typeof Event=="function")fn.dispatchEvent(new Event("resize"));else{var oe=fn.document.createEvent("UIEvents");oe.initUIEvent("resize",!0,!1,fn,0),fn.dispatchEvent(oe)}}function Us(oe){var Fe=["padding: "+(oe.height/2-8)+"px "+oe.width/2+"px;","line-height: "+oe.height+"px;","background-image: url("+oe.toDataURL()+");"];console.log(`%c
`,Fe.join(""))}function th(){var oe,Fe=fn.document.querySelector('meta[name="viewport"]');if(!Fe)return 1;var Ze=(oe=Fe.content)===null||oe===void 0?void 0:oe.split(","),rt=Ze.find(function(xt){var Dt=xt.split("="),$r=(0,Js.Z)(Dt,1),En=$r[0];return En==="initial-scale"});return rt?rt.split("=")[1]*1:1}var Df=th()<1?1:fn.devicePixelRatio;function Cf(oe,Fe){oe.setAttribute("style","".concat(oe.style.cssText).concat(Fe))}function lf(oe){return oe.split(";").map(function(Fe){return Fe.trim()}).filter(function(Fe){return Fe})}function gd(oe,Fe){var Ze,rt=lf((Ze=oe.getAttribute("style"))!==null&&Ze!==void 0?Ze:""),xt=lf(Fe),Dt=Il.pull.apply(void 0,[rt].concat((0,Io.Z)(xt)));oe.setAttribute("style",Dt.join(";"))}function Kh(oe){return Object.entries(oe).map(function(Fe){var Ze=(0,Js.Z)(Fe,2),rt=Ze[0],xt=Ze[1];return"".concat(rt,": ").concat(xt)}).join(";")}function yc(oe,Fe){return{left:oe.left-Fe.left,top:oe.top-Fe.top,right:Fe.left+Fe.width-oe.left-oe.width,bottom:Fe.top+Fe.height-oe.top-oe.height}}function Eh(oe,Fe){oe.checked=Fe,Fe?oe.setAttribute("checked","true"):oe.removeAttribute("checked")}function cf(oe){oe.innerHTML=""}function Af(oe){oe.setAttribute("draggable","false")}function _f(oe,Fe){if(typeof Fe=="string"){var Ze=document.createElement("div");for(Ze.innerHTML=Fe;Ze.firstChild;)oe.append(Ze.firstChild)}else Array.isArray(Fe)?oe.append.apply(oe,(0,Io.Z)(Fe)):oe.append(Fe)}function kc(oe){return typeof ImageBitmap!="undefined"&&oe instanceof ImageBitmap}function Ff(){return typeof importScripts=="function"}var Zl=Ff()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},Dc=navigator.userAgent,ad=!!Dc.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),rh=Dc.indexOf("Android")>-1||Dc.indexOf("Adr")>-1;function od(){for(var oe=navigator.userAgent,Fe=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],Ze=!0,rt=0,xt=Fe;rt<xt.length;rt++){var Dt=xt[rt];if(oe.indexOf(Dt)>0){Ze=!1;break}}return Ze}var Yo=g(4942);function Gs(oe,Fe){oe.forEach(function(Ze){Fe[Ze]&&(Fe[Ze]=Fe[Ze].bind(Fe))})}var Kl=function(){function oe(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;(0,N.Z)(this,oe),(0,Yo.Z)(this,"duration",16),(0,Yo.Z)(this,"timestamp",new Date().getTime()),this.duration=Fe}return(0,K.Z)(oe,[{key:"run",value:function(Ze){var rt=new Date().getTime(),xt=rt-this.timestamp;this.timestamp=rt,xt>=this.duration&&Ze()}}]),oe}(),dl=g(62096),su=g(1449);function Fc(oe){return typeof oe=="number"}var tc=2*Math.PI*6378137/2;function Tf(oe,Fe){var Ze=(0,Js.Z)(Fe,4),rt=Ze[0],xt=Ze[1],Dt=Ze[2],$r=Ze[3];return oe.lng>rt&&oe.lng<=Dt&&oe.lat>xt&&oe.lat<=$r}function _c(oe){var Fe=[1/0,1/0,-1/0,-1/0];return oe.forEach(function(Ze){var rt=Ze.coordinates;Hl(Fe,rt)}),Fe}function Hl(oe,Fe){return Array.isArray(Fe[0])?Fe.forEach(function(Ze){Hl(oe,Ze)}):(oe[0]>Fe[0]&&(oe[0]=Fe[0]),oe[1]>Fe[1]&&(oe[1]=Fe[1]),oe[2]<Fe[0]&&(oe[2]=Fe[0]),oe[3]<Fe[1]&&(oe[3]=Fe[1])),oe}function ff(oe,Fe){return xc(oe,Fe)}function xc(oe,Fe){return Array.isArray(oe[0])?oe.map(function(Ze){return xc(Ze,Fe)}):Fe(oe)}function Yh(oe){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};oe=nh(oe,Fe);var rt=oe[0],xt=oe[1],Dt=rt*tc/180,$r=Math.log(Math.tan((90+xt)*Math.PI/360))/(Math.PI/180);return $r=$r*tc/180,Ze.enable&&(Dt=Number(Dt.toFixed(Ze.decimal)),$r=Number($r.toFixed(Ze.decimal))),oe.length===3?[Dt,$r,oe[2]]:[Dt,$r]}function Uh(oe){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Ze=oe[0],rt=oe[1],xt=Ze/tc*180,Dt=rt/tc*180;return Dt=180/Math.PI*(2*Math.atan(Math.exp(Dt*Math.PI/180))-Math.PI/2),Fe!=null&&(xt=Number(xt.toFixed(Fe)),Dt=Number(Dt.toFixed(Fe))),oe.length===3?[xt,Dt,oe[2]]:[xt,Dt]}function Gc(oe){if(oe==null)throw new Error("lng is required");return(oe>180||oe<-180)&&(oe=oe%360,oe>180&&(oe=-360+oe),oe<-180&&(oe=360+oe),oe===0&&(oe=0)),oe}function Mf(oe){if(oe==null)throw new Error("lat is required");return(oe>90||oe<-90)&&(oe=oe%180,oe>90&&(oe=-180+oe),oe<-90&&(oe=180+oe),oe===0&&(oe=0)),oe}function nh(oe,Fe){if(Fe===!1)return oe;var Ze=Gc(oe[0]),rt=Mf(oe[1]);return rt>85&&(rt=85),rt<-85&&(rt=-85),oe.length===3?[Ze,rt,oe[2]]:[Ze,rt]}function qn(oe){var Fe=85.0511287798,Ze=Math.max(Math.min(Fe,oe[1]),-Fe),rt=256<<20,xt=Math.PI/180,Dt=oe[0]*xt,$r=Ze*xt;$r=Math.log(Math.tan(Math.PI/4+$r/2));var En=.5/Math.PI,pi=.5,rn=-.5/Math.PI;return xt=.5,Dt=rt*(En*Dt+pi),$r=rt*(rn*$r+xt),[Math.floor(Dt),Math.floor($r)]}function ca(oe){var Fe=.5/Math.PI,Ze=.5,rt=-.5/Math.PI,xt=.5,Dt=256<<20,$r=(0,Js.Z)(oe,2),En=$r[0],pi=$r[1];En=(En/Dt-Ze)/Fe,pi=(pi/Dt-xt)/rt,pi=(Math.atan(Math.pow(Math.E,pi))-Math.PI/4)*2,xt=Math.PI/180;var rn=pi/xt,_i=En/xt;return[_i,rn]}function $i(oe,Fe){var Ze=85.0511287798,rt=Math.PI/180,xt=6378137;return Fe=Math.max(Math.min(Ze,Fe),-Ze),oe*=rt,Fe*=rt,Fe=Math.log(Math.tan(Math.PI/4+Fe/2)),[oe*xt,Fe*xt]}function $o(oe,Fe){var Ze=Math.PI/180,rt=6378137,xt=oe/rt/Ze,Dt=2*(Math.atan(Math.exp(Fe/rt))-Math.PI/4)/Ze;return[xt,Dt]}function lo(oe,Fe,Ze){var rt=(0,su.Ht)(Fe[1]-oe[1]),xt=(0,su.Ht)(Fe[0]-oe[0]),Dt=(0,su.Ht)(oe[1]),$r=(0,su.Ht)(Fe[1]),En=Math.pow(Math.sin(rt/2),2)+Math.pow(Math.sin(xt/2),2)*Math.cos(Dt)*Math.cos($r);return(0,su.DL)(2*Math.atan2(Math.sqrt(En),Math.sqrt(1-En)),Ze="meters")}function Es(oe){var Fe=Math.PI/180,Ze=85.0511287798,rt=6378137,xt=Math.max(Math.min(Ze,oe[1]),-Ze),Dt=Math.sin(xt*Fe),$r=rt*oe[0]*Fe,En=rt*Math.log((1+Dt)/(1-Dt))/2;return[$r,En]}function tl(oe,Fe){var Ze=Math.abs(oe[1][1]-oe[0][1])*Fe,rt=Math.abs(oe[1][0]-oe[0][0])*Fe;return[[oe[0][0]-rt,oe[0][1]-Ze],[oe[1][0]+rt,oe[1][1]+Ze]]}function al(oe,Fe){return oe[0][0]<=Fe[0][0]&&oe[0][1]<=Fe[0][1]&&oe[1][0]>=Fe[1][0]&&oe[1][1]>=Fe[1][1]}function Tl(oe){return[[oe[0],oe[1]],[oe[2],oe[3]]]}function Lh(oe){var Fe=xf(oe,[0,0]);return[oe[0]/Fe,oe[1]/Fe]}function xf(oe,Fe){return Math.sqrt(Math.pow(oe[0]-Fe[0],2)+Math.pow(oe[1]-Fe[1],2))}function qh(oe,Fe){return oe[0]*Fe[0]+oe[1]*Fe[1]}function $h(oe){return Math.sqrt(oe[0]*oe[0]+oe[1]*oe[1])}function Ul(oe,Fe){return Math.acos(qh(oe,Fe)/($h(oe)*$h(Fe)))*180/Math.PI}function Rl(oe,Fe){return Fe[0]>0?Fe[1]>0?90-Math.atan(Fe[1]/Fe[0])*180/Math.PI:90+Math.atan(-Fe[1]/Fe[0])*180/Math.PI:Fe[1]<0?180+(90-Math.atan(Fe[1]/Fe[0])*180/Math.PI):270+Math.atan(Fe[1]/-Fe[0])*180/Math.PI}function ol(oe){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!oe||oe.length<2)){for(var Ze=[0,1],rt=0,xt=[],Dt=0;Dt<oe.length-1;Dt++){var $r=oe[Dt],En=oe[Dt+1],pi=xf($r,En);rt+=pi;var rn=[$r[0]-En[0],$r[1]-En[1]],_i=Rl(Ze,rn);if(Dt>0){var ga=xt[Dt-1].rotation;ga-_i>360-ga+_i&&(_i=_i+360)}xt.push({start:$r,end:En,dis:pi,rotation:_i,duration:0})}return xt.map(function(ss){ss.duration=Fe*(ss.dis/rt)}),xt}}function uu(oe){if(Fc(oe[0]))return oe;if(Fc(oe[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Fc(oe[0][0][0])){var Fe=oe,Ze=0,rt=0,xt=0;return Fe.forEach(function(Dt){Dt.forEach(function($r){Ze+=$r[0],rt+=$r[1],xt++})}),[Ze/xt,rt/xt,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Bc(oe){for(var Fe=oe[0],Ze=oe[1],rt=oe[0],xt=oe[1],Dt=0,$r=0,En=0,pi=0;pi<oe.length;pi+=2){var rn=oe[pi],_i=oe[pi+1];rn&&_i&&(Fe=Math.max(rn,Fe),Ze=Math.max(_i,Ze),rt=Math.min(rn,rt),xt=Math.min(_i,xt),Dt+=rn,$r+=_i,En++)}return{center:[Dt/En,$r/En],radius:Math.sqrt(Math.pow(Fe-rt,2)+Math.pow(Ze-xt,2))/2}}function cc(oe){return(0,dl.Z)((0,su.uf)([(0,su.Tu)(oe)]))}function ao(oe){var Fe=131,Ze=137,rt=0;oe+="x";for(var xt=Math.floor(9007199254740991/Ze),Dt=0;Dt<oe.length;Dt++)rt>xt&&(rt=Math.floor(rt/Ze)),rt=rt*Fe+oe.charCodeAt(Dt);return rt}function Ml(oe){oe=oe.toString();for(var Fe=5381,Ze=oe.length;Ze;)Fe=Fe*33^oe.charCodeAt(--Ze);return Fe>>>0}function Hf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(oe){var Fe=Math.random()*16|0,Ze=oe==="x"?Fe:Fe&3|8;return Ze.toString(16)})}var fl;(function(oe){oe["GAODE1.x"]="GAODE1.x",oe["GAODE2.x"]="GAODE2.x",oe.MAPBOX="MAPBOX",oe.DEFAULT="DEFAUlTMAP",oe.SIMPLE="SIMPLE",oe.GLOBEL="GLOBEL"})(fl||(fl={}));function Vl(oe,Fe,Ze,rt,xt){var Dt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,$r=arguments.length>6?arguments[6]:void 0,En=Ze;return $r&&(En=Math.round(Ze*(Dt-1))/(Dt-1)),rt?Yl(oe,Fe,En,rt,xt):Yl(oe,Fe,En,.314,xt)}function Ll(oe,Fe){var Ze=1-Fe;return(oe[0]*Ze+oe[1]*Fe)*Ze+(oe[1]*Ze+oe[2]*Fe)*Fe}function jh(oe,Fe){return Math.sqrt(Math.pow(oe[0]-Fe[0],2)+Math.pow(oe[1]-Fe[1],2))}function qa(oe,Fe,Ze){var rt=[Fe[0]-oe[0],Fe[1]-oe[1]],xt=jh(rt,[0,0]),Dt=Math.atan2(rt[1],rt[0]),$r=xt/2/Math.cos(Ze),En=Dt+Ze,pi=[$r*Math.cos(En)+oe[0],$r*Math.sin(En)+oe[1]];return pi}function Yl(oe,Fe,Ze,rt,xt){if(xt===fl["GAODE2.x"]){var Dt=$i(oe[0],oe[1]),$r=$i(Fe[0],Fe[1]),En=qa(Dt,$r,rt),pi=[Dt[0],En[0],$r[0]],rn=[Dt[1],En[1],$r[1]];return[].concat((0,Io.Z)($o(Ll(pi,Ze),Ll(rn,Ze))),[0])}else{var _i=qa(oe,Fe,rt),ga=[oe[0],_i[0],Fe[0]],ss=[oe[1],_i[1],Fe[1]];return[Ll(ga,Ze),Ll(ss,Ze),0]}}function Vf(oe,Fe,Ze,rt,xt){var Dt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,$r=arguments.length>6?arguments[6]:void 0,En=Ze;return $r&&(En=Math.round(Ze*29)/29),Hh(oe,Fe,En,xt)}function ih(oe,Fe){var Ze=[Fe[0]-oe[0],Fe[1]-oe[1]],rt=xf(Ze,[0,0]),xt=Math.atan2(Ze[1],Ze[0]),Dt=.314,$r=rt/2/Math.cos(Dt),En=xt+Dt,pi=[$r*Math.cos(En)+oe[0],$r*Math.sin(En)+oe[1]];return pi}function Vu(oe,Fe){var Ze=1-Fe;return(oe[0]*Ze+oe[1]*Fe)*Ze+(oe[1]*Ze+oe[2]*Fe)*Fe}function hf(oe,Fe){var Ze=[oe[0]-Fe[0],oe[1]-Fe[1]],rt=[Math.sin(Ze[0]/2),Math.sin(Ze[1]/2)],xt=rt[1]*rt[1]+Math.cos(oe[1])*Math.cos(Fe[1])*rt[0]*rt[0];return 2*Math.atan2(Math.sqrt(xt),Math.sqrt(1-xt))}function Hh(oe,Fe,Ze,rt){var xt=[(0,su.Ht)(oe[0]),(0,su.Ht)(oe[1])],Dt=[(0,su.Ht)(Fe[0]),(0,su.Ht)(Fe[1])];if(rt==="GAODE2.x"){var $r=ih(xt,Dt),En=[xt[0],$r[0],Dt[0]],pi=[xt[1],$r[1],Dt[1]];return[Vu(En,Ze),Vu(pi,Ze),0]}else{var rn=hf(xt,Dt);if(Math.abs(rn-Math.PI)<.001)return[(1-Ze)*xt[0]+Ze*Dt[0],(1-Ze)*xt[1]+Ze*Dt[1]];var _i=Math.sin((1-Ze)*rn)/Math.sin(rn),ga=Math.sin(Ze*rn)/Math.sin(rn),ss=[Math.sin(xt[0]),Math.sin(xt[1])],To=[Math.cos(xt[0]),Math.cos(xt[1])],Ro=[Math.sin(Dt[0]),Math.sin(Dt[1])],fs=[Math.cos(Dt[0]),Math.cos(Dt[1])],ps=_i*To[1]*To[0]+ga*fs[1]*fs[0],zo=_i*To[1]*ss[0]+ga*fs[1]*Ro[0],Ds=_i*ss[1]+ga*Ro[1];return[(0,su.vi)(Math.atan2(zo,ps)),(0,su.vi)(Math.atan2(Ds,Math.sqrt(ps*ps+zo*zo)))]}}function bc(oe,Fe){for(var Ze=0,rt=[],xt=0;xt<oe.length-1;xt++){var Dt=oe[xt],$r=oe[xt+1],En=ah(Dt,$r),pi=Ze;Ze+=En,rt.push({p1:Dt,p2:$r,totalDistance:Ze,distance:En,lastTotalDistance:pi})}for(var rn=Ze*Fe,_i,ga,ss=0,To=rt;ss<To.length;ss++){var Ro=To[ss],fs=Ro.totalDistance;if(fs>rn){var ps=Ro.p1,zo=Ro.p2,Ds=(rn-Ro.lastTotalDistance)/Ro.distance,xu=Ec(zo,ps,Ds);_i=xu[0],ga=xu[1];break}}return{lng:_i,lat:ga,height:0}}function Ec(oe,Fe,Ze){return[oe[0]*Ze+Fe[0]*(1-Ze),oe[1]*Ze+Fe[1]*(1-Ze)]}function ah(oe,Fe){return Math.sqrt(Math.pow(oe[0]-Fe[0],2)+Math.pow(oe[1]-Fe[1],2))}function Wc(oe,Fe){var Ze=Fe.featureId,rt=oe.data.dataArray;return typeof Ze=="number"&&(rt=rt.filter(function(xt){var Dt=xt.id;return Dt===Ze})),rt.map(function(xt){var Dt=Sc(xt,Fe);return(0,c.Z)((0,c.Z)({},xt),Dt)})}function kh(oe,Fe){return new Promise(function(Ze){oe.inited?Ze(Wc(oe,Fe)):oe.once("update",function(){Ze(Wc(oe,Fe))})})}function Sc(oe,Fe){var Ze=Fe.offset,rt=Fe.shape,xt=Fe.thetaOffset,Dt=Fe.mapVersion,$r=Fe.segmentNumber,En=$r===void 0?30:$r,pi=Fe.autoFit,rn=pi===void 0?!0:pi,_i=oe.coordinates;if(rt==="line")return bc(_i,Ze);var ga=_i[0],ss=_i[1],To=typeof xt=="string"?oe[xt]||0:xt,Ro;switch(rt){case"arc":Ro=Vl;break;case"greatcircle":Ro=Vf;break;default:Ro=Vl}var fs=Ro(ga,ss,Ze,To,Dt,En,rn),ps=(0,Js.Z)(fs,3),zo=ps[0],Ds=ps[1],xu=ps[2];return{lng:zo,lat:Ds,height:xu}}var Vh=function(){function oe(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Ze=arguments.length>1?arguments[1]:void 0;(0,N.Z)(this,oe),this.limit=Fe,this.destroy=Ze||this.defaultDestroy,this.order=[],this.clear()}return(0,K.Z)(oe,[{key:"clear",value:function(){var Ze=this;this.order.forEach(function(rt){Ze.delete(rt)}),this.cache={},this.order=[]}},{key:"get",value:function(Ze){var rt=this.cache[Ze];return rt&&(this.deleteOrder(Ze),this.appendOrder(Ze)),rt}},{key:"set",value:function(Ze,rt){this.cache[Ze]?(this.delete(Ze),this.cache[Ze]=rt,this.appendOrder(Ze)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Ze]=rt,this.appendOrder(Ze))}},{key:"delete",value:function(Ze){var rt=this.cache[Ze];rt&&(this.deleteCache(Ze),this.deleteOrder(Ze),this.destroy(rt,Ze))}},{key:"deleteCache",value:function(Ze){delete this.cache[Ze]}},{key:"deleteOrder",value:function(Ze){var rt=this.order.findIndex(function(xt){return xt===Ze});rt>=0&&this.order.splice(rt,1)}},{key:"appendOrder",value:function(Ze){this.order.push(Ze)}},{key:"defaultDestroy",value:function(Ze,rt){return null}}]),oe}();function ql(oe){if(oe.length===0)throw new Error("max requires at least one data point");for(var Fe=oe[0],Ze=1;Ze<oe.length;Ze++)oe[Ze]>Fe&&(Fe=oe[Ze]);return Fe*1}function gu(oe){if(oe.length===0)throw new Error("min requires at least one data point");for(var Fe=oe[0],Ze=1;Ze<oe.length;Ze++)oe[Ze]<Fe&&(Fe=oe[Ze]);return Fe*1}function Ks(oe){if(oe.length===0)return 0;for(var Fe=oe[0]*1,Ze=1;Ze<oe.length;Ze++)Fe+=oe[Ze]*1;return Fe}function Gf(oe){if(oe.length===0)throw new Error("mean requires at least one data point");return Ks(oe)/oe.length}function Bf(oe){if(oe.length===0)throw new Error("mean requires at least one data point");if(oe.length<3)return oe[0];oe.sort();for(var Fe=oe[0],Ze=NaN,rt=0,xt=1,Dt=1;Dt<oe.length+1;Dt++)oe[Dt]!==Fe?(xt>rt&&(rt=xt,Ze=Fe),xt=1,Fe=oe[Dt]):xt++;return Ze*1}var eu={min:gu,max:ql,mean:Gf,sum:Ks,mode:Bf};function Pl(oe,Fe){return oe.map(function(Ze){return Ze[Fe]})}function Xc(oe,Fe){return eu[oe](Fe)}function Nc(oe,Fe){return{enable:oe,mask:255,func:{cmp:514,ref:Fe?1:0,mask:255}}}var Ql=g(15861),fc=g(64687),oo=g.n(fc),Do=g(95),nu=g(26729),Jl=g.n(nu),xl;(function(oe){oe.Realtime="realtime",oe.Overlap="overlap",oe.Replace="replace"})(xl||(xl={}));var mu;(function(oe){oe.Loading="Loading",oe.Loaded="Loaded",oe.Failure="Failure",oe.Cancelled="Cancelled"})(mu||(mu={}));var Ku=0,Kc=1,Gh=2;function Yu(oe){oe.forEach(function(Fe){Fe.isCurrent&&(Fe.isVisible=Fe.isLoaded)})}function bl(oe){oe.forEach(function(Fe){Fe.properties.state=Ku}),oe.forEach(function(Fe){Fe.isCurrent&&!ph(Fe)&&wc(Fe)}),oe.forEach(function(Fe){Fe.isVisible=Boolean(Fe.properties.state&Gh)})}function yd(oe){oe.forEach(function(Ze){Ze.properties.state=Ku}),oe.forEach(function(Ze){Ze.isCurrent&&ph(Ze)});var Fe=oe.slice().sort(function(Ze,rt){return Ze.z-rt.z});Fe.forEach(function(Ze){Ze.isVisible=Boolean(Ze.properties.state&Gh),Ze.children.length&&(Ze.isVisible||Ze.properties.state&Kc)?Ze.children.forEach(function(rt){rt.properties.state=Kc}):Ze.isCurrent&&wc(Ze)})}function ph(oe){for(;oe;){if(oe.isLoaded)return oe.properties.state|=Gh,!0;oe=oe.parent}return!1}function wc(oe){oe.children.forEach(function(Fe){Fe.isLoaded?Fe.properties.state|=Gh:wc(Fe)})}var Yc,kl=256,Dr=[-1/0,-1/0,1/0,1/0],Dl=.2,Vo=5,qo=(Yc={},(0,Yo.Z)(Yc,xl.Realtime,Yu),(0,Yo.Z)(Yc,xl.Overlap,bl),(0,Yo.Z)(Yc,xl.Replace,yd),Yc),du=function(){};function Dh(oe,Fe,Ze){var rt=Math.floor((oe+180)/360*Math.pow(2,Ze)),xt=Math.floor((1-Math.log(Math.tan(Fe*Math.PI/180)+1/Math.cos(Fe*Math.PI/180))/Math.PI)/2*Math.pow(2,Ze));return[rt,xt]}function Wf(oe,Fe,Ze){var rt=oe/Math.pow(2,Ze)*360-180,xt=Math.PI-2*Math.PI*Fe/Math.pow(2,Ze),Dt=180/Math.PI*Math.atan(.5*(Math.exp(xt)-Math.exp(-xt)));return[rt,Dt]}var zc=function(Fe,Ze,rt){var xt=Wf(Fe,Ze,rt),Dt=(0,Js.Z)(xt,2),$r=Dt[0],En=Dt[1],pi=Wf(Fe+1,Ze+1,rt),rn=(0,Js.Z)(pi,2),_i=rn[0],ga=rn[1];return[$r,ga,_i,En]};function df(oe){var Fe=oe.zoom,Ze=oe.latLonBounds,rt=oe.maxZoom,xt=rt===void 0?1/0:rt,Dt=oe.minZoom,$r=Dt===void 0?0:Dt,En=oe.zoomOffset,pi=En===void 0?0:En,rn=oe.extent,_i=rn===void 0?Dr:rn,ga=Math.ceil(Fe)+pi;if(Number.isFinite($r)&&ga<$r)return[];Number.isFinite(xt)&&ga>xt&&(ga=xt);for(var ss=(0,Js.Z)(Ze,4),To=ss[0],Ro=ss[1],fs=ss[2],ps=ss[3],zo=[Math.max(To,_i[0]),Math.max(Ro,_i[1]),Math.min(fs,_i[2]),Math.min(ps,_i[3])],Ds=[],xu=Dh(zo[0],zo[1],ga),cu=(0,Js.Z)(xu,2),tf=cu[0],$c=cu[1],ac=Dh(zo[2],zo[3],ga),ll=(0,Js.Z)(ac,2),wu=ll[0],Sl=ll[1],Wl=tf;Wl<=wu;Wl++)for(var Pc=Sl;Pc<=$c;Pc++)Ds.push({x:Wl,y:Pc,z:ga});var jc=(wu+tf)/2,hu=($c+Sl)/2,_h=function(ud,Hd){return Math.abs(ud-jc)+Math.abs(Hd-hu)};return Ds.sort(function(Oc,ud){return _h(Oc.x,Oc.y)-_h(ud.x,ud.y)}),Ds}var rc=function(Fe,Ze,rt){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,Dt=Math.pow(2,rt),$r=Dt-1,En=Dt,pi=Fe,rn=Ze;return xt&&(pi<0?pi=pi+En:pi>$r&&(pi=pi%En)),{warpX:pi,warpY:rn}};function ys(oe){var Fe=bf();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function bf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Xf=function(oe){(0,Z.Z)(Ze,oe);var Fe=ys(Ze);function Ze(rt){var xt;(0,N.Z)(this,Ze),xt=Fe.call(this),(0,Yo.Z)((0,ie.Z)(xt),"tileSize",256),(0,Yo.Z)((0,ie.Z)(xt),"isVisible",!1),(0,Yo.Z)((0,ie.Z)(xt),"isCurrent",!1),(0,Yo.Z)((0,ie.Z)(xt),"isVisibleChange",!1),(0,Yo.Z)((0,ie.Z)(xt),"loadedLayers",0),(0,Yo.Z)((0,ie.Z)(xt),"isLayerLoaded",!1),(0,Yo.Z)((0,ie.Z)(xt),"isLoad",!1),(0,Yo.Z)((0,ie.Z)(xt),"isChildLoad",!1),(0,Yo.Z)((0,ie.Z)(xt),"parent",null),(0,Yo.Z)((0,ie.Z)(xt),"children",[]),(0,Yo.Z)((0,ie.Z)(xt),"data",null),(0,Yo.Z)((0,ie.Z)(xt),"properties",{}),(0,Yo.Z)((0,ie.Z)(xt),"loadDataId",0);var Dt=rt.x,$r=rt.y,En=rt.z,pi=rt.tileSize,rn=rt.warp,_i=rn===void 0?!0:rn;return xt.x=Dt,xt.y=$r,xt.z=En,xt.warp=_i||!0,xt.tileSize=pi,xt}return(0,K.Z)(Ze,[{key:"isLoading",get:function(){return this.loadStatus===mu.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===mu.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===mu.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===mu.Cancelled}},{key:"isDone",get:function(){return[mu.Loaded,mu.Cancelled,mu.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return zc(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var xt=(0,Js.Z)(this.bounds,4),Dt=xt[0],$r=xt[1],En=xt[2],pi=xt[3],rn=[(En-Dt)/2,(pi-$r)/2],_i=(0,Do.Z)(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:rn,meta:`
      `.concat(this.key,`
      `)}});return _i}},{key:"key",get:function(){var xt="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return xt}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var rt=(0,Ql.Z)(oo().mark(function Dt($r){var En,pi,rn,_i,ga,ss,To,Ro,fs,ps,zo,Ds,xu,cu,tf,$c,ac;return oo().wrap(function(wu){for(;;)switch(wu.prev=wu.next){case 0:return En=$r.getData,pi=$r.onLoad,rn=$r.onError,this.loadDataId++,_i=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=mu.Loading,ga=null,wu.prev=7,To=this.x,Ro=this.y,fs=this.z,ps=this.bounds,zo=this.tileSize,Ds=this.warp,xu=rc(To,Ro,fs,Ds),cu=xu.warpX,tf=xu.warpY,$c=this.abortController.signal,ac={x:cu,y:tf,z:fs,bounds:ps,tileSize:zo,signal:$c,warp:Ds},wu.next=14,En(ac,this);case 14:ga=wu.sent,wu.next=20;break;case 17:wu.prev=17,wu.t0=wu.catch(7),ss=wu.t0;case 20:if(_i===this.loadDataId){wu.next=22;break}return wu.abrupt("return");case 22:if(!(this.isCancelled&&!ga)){wu.next=24;break}return wu.abrupt("return");case 24:if(!(ss||!ga)){wu.next=28;break}return this.loadStatus=mu.Failure,rn(ss,this),wu.abrupt("return");case 28:this.loadStatus=mu.Loaded,this.data=ga,pi(this);case 31:case"end":return wu.stop()}},Dt,this,[[7,17]])}));function xt(Dt){return rt.apply(this,arguments)}return xt}()},{key:"reloadData",value:function(xt){this.isLoading&&this.abortLoad(),this.loadData(xt)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=mu.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),Ze}(nu.EventEmitter),rl=function(Fe,Ze){var rt=Tl(Fe),xt=tl(rt,Ze),Dt=360*3-180,$r=85.0511287798065,En=[Math.max(xt[0][0],-Dt),Math.max(xt[0][1],-$r),Math.min(xt[1][0],Dt),Math.min(xt[1][1],$r)];return En},Cc=function(Fe,Ze){var rt=Tl(Fe),xt=Tl(Ze),Dt=al(rt,xt);return Dt};function Zc(oe,Fe){var Ze=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!Ze){if(Array.isArray(oe)||(Ze=sd(oe))||Fe&&oe&&typeof oe.length=="number"){Ze&&(oe=Ze);var rt=0,xt=function(){};return{s:xt,n:function(){return rt>=oe.length?{done:!0}:{done:!1,value:oe[rt++]}},e:function(rn){throw rn},f:xt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt=!0,$r=!1,En;return{s:function(){Ze=Ze.call(oe)},n:function(){var rn=Ze.next();return Dt=rn.done,rn},e:function(rn){$r=!0,En=rn},f:function(){try{!Dt&&Ze.return!=null&&Ze.return()}finally{if($r)throw En}}}}function sd(oe,Fe){if(oe){if(typeof oe=="string")return qc(oe,Fe);var Ze=Object.prototype.toString.call(oe).slice(8,-1);if(Ze==="Object"&&oe.constructor&&(Ze=oe.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(oe);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return qc(oe,Fe)}}function qc(oe,Fe){(Fe==null||Fe>oe.length)&&(Fe=oe.length);for(var Ze=0,rt=new Array(Fe);Ze<Fe;Ze++)rt[Ze]=oe[Ze];return rt}function f(oe){var Fe=m();return function(){var rt=(0,L.Z)(oe),xt;if(Fe){var Dt=(0,L.Z)(this).constructor;xt=Reflect.construct(rt,arguments,Dt)}else xt=rt.apply(this,arguments);return(0,B.Z)(this,xt)}}function m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var p=function(oe){(0,Z.Z)(Ze,oe);var Fe=f(Ze);function Ze(rt){var xt;return(0,N.Z)(this,Ze),xt=Fe.call(this),(0,Yo.Z)((0,ie.Z)(xt),"currentTiles",[]),(0,Yo.Z)((0,ie.Z)(xt),"cacheTiles",new Map),(0,Yo.Z)((0,ie.Z)(xt),"throttleUpdate",(0,Il.throttle)(function(Dt,$r){xt.update(Dt,$r)},16)),(0,Yo.Z)((0,ie.Z)(xt),"onTileLoad",function(Dt){xt.emit("tile-loaded",Dt),xt.updateTileVisible()}),(0,Yo.Z)((0,ie.Z)(xt),"onTileError",function(Dt,$r){xt.emit("tile-error",{error:Dt,tile:$r}),xt.updateTileVisible()}),(0,Yo.Z)((0,ie.Z)(xt),"onTileUnload",function(Dt){xt.emit("tile-unload",Dt)}),xt.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Dr,getTileData:du,warp:!0,updateStrategy:xl.Overlap},xt.updateOptions(rt),xt}return(0,K.Z)(Ze,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(xt){return xt.isDone})}},{key:"tiles",get:function(){var xt=Array.from(this.cacheTiles.values()).sort(function(Dt,$r){return Dt.z-$r.z});return xt}},{key:"updateOptions",value:function(xt){var Dt=xt.minZoom===void 0?this.options.minZoom:Math.ceil(xt.minZoom),$r=xt.maxZoom===void 0?this.options.maxZoom:Math.floor(xt.maxZoom);this.options=(0,c.Z)((0,c.Z)((0,c.Z)({},this.options),xt),{},{minZoom:Dt,maxZoom:$r})}},{key:"update",value:function(xt,Dt){var $r=this,En=Math.max(0,Math.ceil(xt));if(!(this.lastViewStates&&this.lastViewStates.zoom===En&&Cc(this.lastViewStates.latLonBoundsBuffer,Dt))){var pi=rl(Dt,Dl);this.lastViewStates={zoom:En,latLonBounds:Dt,latLonBoundsBuffer:pi};var rn=!1,_i=this.getTileIndices(En,pi).filter(function(ga){return $r.options.warp||ga.x>=0&&ga.x<Math.pow(2,En)});this.currentTiles=_i.map(function(ga){var ss=ga.x,To=ga.y,Ro=ga.z,fs=$r.getTile(ss,To,Ro);if(fs){var ps,zo,Ds=((ps=fs)===null||ps===void 0?void 0:ps.isFailure)||((zo=fs)===null||zo===void 0?void 0:zo.isCancelled);return Ds&&fs.loadData({getData:$r.options.getTileData,onLoad:$r.onTileLoad,onError:$r.onTileError}),fs}return fs=$r.createTile(ss,To,Ro),rn=!0,fs}),rn&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var xt=Zc(this.cacheTiles),Dt;try{for(xt.s();!(Dt=xt.n()).done;){var $r=(0,Js.Z)(Dt.value,2),En=$r[0],pi=$r[1];this.currentTiles.includes(pi)||(this.cacheTiles.delete(En),this.onTileUnload(pi)),this.onTileUnload(pi),pi.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(rn){xt.e(rn)}finally{xt.f()}}},{key:"pruneRequests",value:function(){var xt=[],Dt=Zc(this.cacheTiles.values()),$r;try{for(Dt.s();!($r=Dt.n()).done;){var En=$r.value;En.isLoading&&!En.isCurrent&&!En.isVisible&&xt.push(En)}}catch(rn){Dt.e(rn)}finally{Dt.f()}for(;xt.length>0;){var pi=xt.shift();pi.abortLoad()}}},{key:"getTileByLngLat",value:function(xt,Dt,$r){var En=this.options.zoomOffset,pi=Math.ceil($r)+En,rn=Dh(xt,Dt,pi),_i=this.tiles.filter(function(ga){return ga.key==="".concat(rn[0],"_").concat(rn[1],"_").concat(pi)});return _i[0]}},{key:"destroy",value:function(){var xt=Zc(this.cacheTiles.values()),Dt;try{for(xt.s();!(Dt=xt.n()).done;){var $r=Dt.value;$r.isLoading&&$r.abortLoad()}}catch(En){xt.e(En)}finally{xt.f()}this.cacheTiles.clear(),this.currentTiles=[],this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var xt=this.options.updateStrategy,Dt=new Map,$r=Zc(this.cacheTiles.values()),En;try{for($r.s();!(En=$r.n()).done;){var pi=En.value;Dt.set(pi.key,pi.isVisible),pi.isCurrent=!1,pi.isVisible=!1}}catch(Ro){$r.e(Ro)}finally{$r.f()}var rn=Zc(this.currentTiles),_i;try{for(rn.s();!(_i=rn.n()).done;){var ga=_i.value;ga.isCurrent=!0,ga.isVisible=!0}}catch(Ro){rn.e(Ro)}finally{rn.f()}var ss=Array.from(this.cacheTiles.values());typeof xt=="function"?xt(ss):qo[xt](ss);var To=!1;Array.from(this.cacheTiles.values()).forEach(function(Ro){Ro.isVisible!==Dt.get(Ro.key)?(Ro.isVisibleChange=!0,To=!0):Ro.isVisibleChange=!1}),To&&this.emit("tile-update")}},{key:"getTileIndices",value:function(xt,Dt){var $r=this.options,En=$r.tileSize,pi=$r.extent,rn=$r.zoomOffset,_i=Math.floor(this.options.maxZoom),ga=Math.ceil(this.options.minZoom),ss=df({maxZoom:_i,minZoom:ga,zoomOffset:rn,tileSize:En,zoom:xt,latLonBounds:Dt,extent:pi});return ss}},{key:"getTileId",value:function(xt,Dt,$r){var En="".concat(xt,",").concat(Dt,",").concat($r);return En}},{key:"getTile",value:function(xt,Dt,$r){var En=this.getTileId(xt,Dt,$r),pi=this.cacheTiles.get(En);return pi}},{key:"createTile",value:function(xt,Dt,$r){var En=this.getTileId(xt,Dt,$r),pi=new Xf({x:xt,y:Dt,z:$r,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(En,pi),pi.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),pi}},{key:"resizeCacheTiles",value:function(){var xt=Vo*this.currentTiles.length,Dt=this.cacheTiles.size>xt;if(Dt){var $r=Zc(this.cacheTiles),En;try{for($r.s();!(En=$r.n()).done;){var pi=(0,Js.Z)(En.value,2),rn=pi[0],_i=pi[1];if(!_i.isVisible&&!this.currentTiles.includes(_i)&&(this.cacheTiles.delete(rn),this.onTileUnload(_i)),this.cacheTiles.size<=xt)break}}catch(ga){$r.e(ga)}finally{$r.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var xt=Zc(this.cacheTiles.values()),Dt;try{for(xt.s();!(Dt=xt.n()).done;){var $r=Dt.value;$r.parent=null,$r.children.length=0}}catch(ga){xt.e(ga)}finally{xt.f()}var En=Zc(this.cacheTiles.values()),pi;try{for(En.s();!(pi=En.n()).done;){var rn=pi.value,_i=this.getNearestAncestor(rn.x,rn.y,rn.z);rn.parent=_i,_i!=null&&_i.children&&_i.children.push(rn)}}catch(ga){En.e(ga)}finally{En.f()}}},{key:"getNearestAncestor",value:function(xt,Dt,$r){for(;$r>this.options.minZoom;){xt=Math.floor(xt/2),Dt=Math.floor(Dt/2),$r=$r-1;var En=this.getTile(xt,Dt,$r);if(En)return En}return null}}]),Ze}(Jl());function E(oe){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(oe)}function Y(oe){var Fe=[],Ze=/\{([a-z])-([a-z])\}/.exec(oe);if(Ze){var rt=Ze[1].charCodeAt(0),xt=Ze[2].charCodeAt(0),Dt;for(Dt=rt;Dt<=xt;++Dt)Fe.push(oe.replace(Ze[0],String.fromCharCode(Dt)));return Fe}if(Ze=/\{(\d+)-(\d+)\}/.exec(oe),Ze){for(var $r=parseInt(Ze[2],10),En=parseInt(Ze[1],10);En<=$r;En++)Fe.push(oe.replace(Ze[0],En.toString()));return Fe}return Fe.push(oe),Fe}function Ce(oe,Fe){if(!oe||!oe.length)throw new Error("url is not allowed to be empty");var Ze=Fe.x,rt=Fe.y,xt=Fe.z,Dt=Y(oe),$r=Math.abs(Ze+rt)%Dt.length,En=Dt[$r];return En.replace(/\{x\}/g,Ze.toString()).replace(/\{y\}/g,rt.toString()).replace(/\{z\}/g,xt.toString()).replace(/\{bbox\}/g,zc(Ze,rt,xt).join(",")).replace(/\{-y\}/g,(Math.pow(2,xt)-rt-1).toString())}function ze(oe,Fe){var Ze=Fe.x,rt=Fe.y,xt=Fe.z,Dt=Fe.layer,$r=Fe.version,En=$r===void 0?"1.0.0":$r,pi=Fe.style,rn=pi===void 0?"default":pi,_i=Fe.format,ga=Fe.service,ss=ga===void 0?"WMTS":ga,To=Fe.tileMatrixset,Ro="".concat(oe,"&SERVICE=").concat(ss,"&REQUEST=GetTile&VERSION=").concat(En,"&LAYER=").concat(Dt,"&STYLE=").concat(rn,"&TILEMATRIXSET=").concat(To,"&FORMAT=").concat(_i,"&TILECOL=").concat(Ze,"&TILEROW=").concat(rt,"&TILEMATRIX=").concat(xt);return Ro}function gt(oe,Fe){if(!oe)throw new Error(Fe||"web worker helper assertion failed.")}var Gt={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},sr=Gt.self||Gt.window||{},Mr=Gt.window||Gt.self||{},Or=Gt.self||Gt.window||{},Br=Gt.document||{},yn=typeof importScripts=="function",hn=typeof window!="undefined"&&typeof window.orientation!="undefined",kn=function(){function oe(Fe,Ze){var rt=this;this.name=Fe,this.workerThread=Ze,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(xt,Dt){rt.resolve=xt,rt.reject=Dt})}return oe.prototype.postMessage=function(Fe,Ze){this.workerThread.postMessage({source:"Main thread",type:Fe,payload:Ze})},oe.prototype.done=function(Fe){gt(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(Fe)},oe.prototype.error=function(Fe){gt(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(Fe)},oe}(),an=kn,Rn=new Map;function $n(oe){gt(oe.source&&!oe.url||!oe.source&&oe.url);var Fe=Rn.get(oe.source||oe.url);return Fe||(oe.url&&(Fe=di(oe.url),Rn.set(oe.url,Fe)),oe.source&&(Fe=Di(oe.source),Rn.set(oe.source,Fe))),gt(Fe),Fe}function di(oe){if(!oe.startsWith("http"))return oe;var Fe=Ti(oe);return Di(Fe)}function Di(oe){var Fe=new Blob([oe],{type:"application/javascript"});return URL.createObjectURL(Fe)}function Ti(oe){return`try {
  importScripts('`+oe+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function Fi(oe,Fe,Ze){Fe===void 0&&(Fe=!0);var rt=Ze||new Set;if(oe){if(ra(oe))rt.add(oe);else if(ra(oe.buffer))rt.add(oe.buffer);else if(!ArrayBuffer.isView(oe)){if(Fe&&typeof oe=="object")for(var xt in oe)Fi(oe[xt],Fe,rt)}}return Ze===void 0?Array.from(rt):[]}function ra(oe){return oe?oe instanceof ArrayBuffer||typeof MessagePort!="undefined"&&oe instanceof MessagePort||typeof ImageBitmap!="undefined"&&oe instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&oe instanceof OffscreenCanvas:!1}var Da=function(){},Na=function(){function oe(Fe){this.terminated=!1,this.loadableURL="";var Ze=Fe.name,rt=Fe.source,xt=Fe.url;gt(rt||xt),this.name=Ze,this.source=rt,this.url=xt,this.onMessage=Da,this.onError=function(Dt){return console.log(Dt)},this.worker=this.createBrowserWorker()}return oe.isSupported=function(){return typeof Worker!="undefined"},oe.prototype.destroy=function(){this.onMessage=Da,this.onError=Da,this.worker.terminate(),this.terminated=!0},Object.defineProperty(oe.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),oe.prototype.postMessage=function(Fe,Ze){Ze=Ze||Fi(Fe),this.worker.postMessage(Fe,Ze)},oe.prototype.getErrorFromErrorEvent=function(Fe){var Ze="Failed to load ";return Ze+="worker "+this.name+" from "+this.url+". ",Fe.message&&(Ze+=Fe.message+" in "),Fe.lineno&&(Ze+=":"+Fe.lineno+":"+Fe.colno),new Error(Ze)},oe.prototype.createBrowserWorker=function(){var Fe=this;this.loadableURL=$n({source:this.source,url:this.url});var Ze=new Worker(this.loadableURL,{name:this.name});return Ze.onmessage=function(rt){rt.data?Fe.onMessage(rt.data):Fe.onError(new Error("No data received"))},Ze.onerror=function(rt){Fe.onError(Fe.getErrorFromErrorEvent(rt)),Fe.terminated=!0},Ze.onmessageerror=function(rt){return console.error("worker "+Fe.name+", message error: "+rt)},Ze},oe}(),po=Na,No=function(){return No=Object.assign||function(oe){for(var Fe,Ze=1,rt=arguments.length;Ze<rt;Ze++){Fe=arguments[Ze];for(var xt in Fe)Object.prototype.hasOwnProperty.call(Fe,xt)&&(oe[xt]=Fe[xt])}return oe},No.apply(this,arguments)},is=function(oe,Fe,Ze,rt){function xt(Dt){return Dt instanceof Ze?Dt:new Ze(function($r){$r(Dt)})}return new(Ze||(Ze=Promise))(function(Dt,$r){function En(_i){try{rn(rt.next(_i))}catch(ga){$r(ga)}}function pi(_i){try{rn(rt.throw(_i))}catch(ga){$r(ga)}}function rn(_i){_i.done?Dt(_i.value):xt(_i.value).then(En,pi)}rn((rt=rt.apply(oe,Fe||[])).next())})},rs=function(oe,Fe){var Ze={label:0,sent:function(){if(Dt[0]&1)throw Dt[1];return Dt[1]},trys:[],ops:[]},rt,xt,Dt,$r;return $r={next:En(0),throw:En(1),return:En(2)},typeof Symbol=="function"&&($r[Symbol.iterator]=function(){return this}),$r;function En(rn){return function(_i){return pi([rn,_i])}}function pi(rn){if(rt)throw new TypeError("Generator is already executing.");for(;Ze;)try{if(rt=1,xt&&(Dt=rn[0]&2?xt.return:rn[0]?xt.throw||((Dt=xt.return)&&Dt.call(xt),0):xt.next)&&!(Dt=Dt.call(xt,rn[1])).done)return Dt;switch(xt=0,Dt&&(rn=[rn[0]&2,Dt.value]),rn[0]){case 0:case 1:Dt=rn;break;case 4:return Ze.label++,{value:rn[1],done:!1};case 5:Ze.label++,xt=rn[1],rn=[0];continue;case 7:rn=Ze.ops.pop(),Ze.trys.pop();continue;default:if(Dt=Ze.trys,!(Dt=Dt.length>0&&Dt[Dt.length-1])&&(rn[0]===6||rn[0]===2)){Ze=0;continue}if(rn[0]===3&&(!Dt||rn[1]>Dt[0]&&rn[1]<Dt[3])){Ze.label=rn[1];break}if(rn[0]===6&&Ze.label<Dt[1]){Ze.label=Dt[1],Dt=rn;break}if(Dt&&Ze.label<Dt[2]){Ze.label=Dt[2],Ze.ops.push(rn);break}Dt[2]&&Ze.ops.pop(),Ze.trys.pop();continue}rn=Fe.call(oe,Ze)}catch(_i){rn=[6,_i],xt=0}finally{rt=Dt=0}if(rn[0]&5)throw rn[1];return{value:rn[0]?rn[1]:void 0,done:!0}}},Ls=function(){function oe(Fe){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=Fe.source,this.url=Fe.url,this.setProps(Fe)}return oe.prototype.destroy=function(){this.idleQueue.forEach(function(Fe){return Fe.destroy()}),this.isDestroyed=!0},oe.prototype.setProps=function(Fe){this.props=No(No({},this.props),Fe),Fe.name!==void 0&&(this.name=Fe.name),Fe.maxConcurrency!==void 0&&(this.maxConcurrency=Fe.maxConcurrency),Fe.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=Fe.maxMobileConcurrency),Fe.reuseWorkers!==void 0&&(this.reuseWorkers=Fe.reuseWorkers),Fe.onDebug!==void 0&&(this.onDebug=Fe.onDebug)},oe.prototype.startJob=function(Fe,Ze,rt){return Ze===void 0&&(Ze=function(xt,Dt,$r){return xt.done($r)}),rt===void 0&&(rt=function(xt,Dt){return xt.error(Dt)}),is(this,void 0,void 0,function(){var xt,Dt=this;return rs(this,function($r){switch($r.label){case 0:return xt=new Promise(function(En){return Dt.jobQueue.push({name:Fe,onMessage:Ze,onError:rt,onStart:En}),Dt}),this.startQueuedJob(),[4,xt];case 1:return[2,$r.sent()]}})})},oe.prototype.startQueuedJob=function(){return is(this,void 0,void 0,function(){var Fe,Ze,rt;return rs(this,function(xt){switch(xt.label){case 0:if(!this.jobQueue.length)return[2];if(Fe=this.getAvailableWorker(),!Fe)return[2];if(Ze=this.jobQueue.shift(),!Ze)return[3,4];this.onDebug({message:"Starting job",name:Ze.name,backlog:this.jobQueue.length,workerThread:Fe}),rt=new an(Ze.name,Fe),Fe.onMessage=function(Dt){return Ze.onMessage(rt,Dt.type,Dt.payload)},Fe.onError=function(Dt){return Ze.onError(rt,Dt)},Ze.onStart(rt),xt.label=1;case 1:return xt.trys.push([1,,3,4]),[4,rt.result];case 2:return xt.sent(),[3,4];case 3:return this.returnWorkerToQueue(Fe),[7];case 4:return[2]}})})},oe.prototype.returnWorkerToQueue=function(Fe){var Ze=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();Ze?(Fe.destroy(),this.count--):this.idleQueue.push(Fe),this.isDestroyed||this.startQueuedJob()},oe.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var Fe=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new po({name:Fe,source:this.source,url:this.url})}return null},oe.prototype.getMaxConcurrency=function(){return hn?this.maxMobileConcurrency:this.maxConcurrency},oe}(),vo=Ls,ds=function(){return ds=Object.assign||function(oe){for(var Fe,Ze=1,rt=arguments.length;Ze<rt;Ze++){Fe=arguments[Ze];for(var xt in Fe)Object.prototype.hasOwnProperty.call(Fe,xt)&&(oe[xt]=Fe[xt])}return oe},ds.apply(this,arguments)},Ns=function(oe){var Fe=typeof Symbol=="function"&&Symbol.iterator,Ze=Fe&&oe[Fe],rt=0;if(Ze)return Ze.call(oe);if(oe&&typeof oe.length=="number")return{next:function(){return oe&&rt>=oe.length&&(oe=void 0),{value:oe&&oe[rt++],done:!oe}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")},cs={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Qo=function(){function oe(Fe){this.workerPools=new Map,this.props=ds({},cs),this.setProps(Fe),this.workerPools=new Map}return oe.isSupported=function(){return po.isSupported()},oe.getWorkerFarm=function(Fe){return Fe===void 0&&(Fe={}),oe.workerFarm=oe.workerFarm||new oe({}),oe.workerFarm.setProps(Fe),oe.workerFarm},oe.prototype.destroy=function(){var Fe,Ze;try{for(var rt=Ns(this.workerPools.values()),xt=rt.next();!xt.done;xt=rt.next()){var Dt=xt.value;Dt.destroy()}}catch($r){Fe={error:$r}}finally{try{xt&&!xt.done&&(Ze=rt.return)&&Ze.call(rt)}finally{if(Fe)throw Fe.error}}},oe.prototype.setProps=function(Fe){var Ze,rt;this.props=ds(ds({},this.props),Fe);try{for(var xt=Ns(this.workerPools.values()),Dt=xt.next();!Dt.done;Dt=xt.next()){var $r=Dt.value;$r.setProps(this.getWorkerPoolProps())}}catch(En){Ze={error:En}}finally{try{Dt&&!Dt.done&&(rt=xt.return)&&rt.call(xt)}finally{if(Ze)throw Ze.error}}},oe.prototype.getWorkerPool=function(Fe){var Ze=Fe.name,rt=Fe.source,xt=Fe.url,Dt=this.workerPools.get(Ze);return Dt||(Dt=new vo({name:Ze,source:rt,url:xt}),Dt.setProps(this.getWorkerPoolProps()),this.workerPools.set(Ze,Dt)),Dt},oe.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},oe}(),$s=Qo,Cs=new Map,_s=function(){function oe(){}return Object.defineProperty(oe,"onmessage",{set:function(Fe){self.onmessage=function(Ze){if(nl(Ze)){var rt=Ze.data,xt=rt.type,Dt=rt.payload;Fe(xt,Dt)}}},enumerable:!1,configurable:!0}),oe.addEventListener=function(Fe){var Ze=Cs.get(Fe);Ze||(Ze=function(rt){if(nl(rt)){var xt=rt.data,Dt=xt.type,$r=xt.payload;Fe(Dt,$r)}}),self.addEventListener("message",Ze)},oe.removeEventListener=function(Fe){var Ze=Cs.get(Fe);Cs.delete(Fe),self.removeEventListener("message",Ze)},oe.postMessage=function(Fe,Ze){if(self){var rt={source:"Worker thread",type:Fe,payload:Ze},xt=Fi(Ze);self.postMessage(rt,xt)}},oe}(),El=_s;function nl(oe){var Fe=oe.type,Ze=oe.data;return Fe==="message"&&Ze&&typeof Ze.source=="string"&&Ze.source==="Main thread"}function qu(oe){return JSON.parse(Ac(oe))}function Ac(oe){var Fe=new Set;return JSON.stringify(oe,function(Ze,rt){if(typeof rt=="object"&&rt!==null){if(Fe.has(rt))try{return JSON.parse(JSON.stringify(rt))}catch(xt){return}Fe.add(rt)}return rt})}function Qu(oe){return""+oe.name}function Ju(oe,Fe){Fe===void 0&&(Fe={});var Ze=Fe[oe.id]||{},rt=oe.name+".worker.js",xt=Ze.workerUrl;return Fe._workerType==="test"&&(xt=oe.module+"/dist/"+rt),xt||(xt="https://unpkg.com/"+oe.module+"/dist/"+rt),assert(xt),xt}var Tc=function(oe,Fe,Ze,rt){function xt(Dt){return Dt instanceof Ze?Dt:new Ze(function($r){$r(Dt)})}return new(Ze||(Ze=Promise))(function(Dt,$r){function En(_i){try{rn(rt.next(_i))}catch(ga){$r(ga)}}function pi(_i){try{rn(rt.throw(_i))}catch(ga){$r(ga)}}function rn(_i){_i.done?Dt(_i.value):xt(_i.value).then(En,pi)}rn((rt=rt.apply(oe,Fe||[])).next())})},ec=function(oe,Fe){var Ze={label:0,sent:function(){if(Dt[0]&1)throw Dt[1];return Dt[1]},trys:[],ops:[]},rt,xt,Dt,$r;return $r={next:En(0),throw:En(1),return:En(2)},typeof Symbol=="function"&&($r[Symbol.iterator]=function(){return this}),$r;function En(rn){return function(_i){return pi([rn,_i])}}function pi(rn){if(rt)throw new TypeError("Generator is already executing.");for(;Ze;)try{if(rt=1,xt&&(Dt=rn[0]&2?xt.return:rn[0]?xt.throw||((Dt=xt.return)&&Dt.call(xt),0):xt.next)&&!(Dt=Dt.call(xt,rn[1])).done)return Dt;switch(xt=0,Dt&&(rn=[rn[0]&2,Dt.value]),rn[0]){case 0:case 1:Dt=rn;break;case 4:return Ze.label++,{value:rn[1],done:!1};case 5:Ze.label++,xt=rn[1],rn=[0];continue;case 7:rn=Ze.ops.pop(),Ze.trys.pop();continue;default:if(Dt=Ze.trys,!(Dt=Dt.length>0&&Dt[Dt.length-1])&&(rn[0]===6||rn[0]===2)){Ze=0;continue}if(rn[0]===3&&(!Dt||rn[1]>Dt[0]&&rn[1]<Dt[3])){Ze.label=rn[1];break}if(rn[0]===6&&Ze.label<Dt[1]){Ze.label=Dt[1],Dt=rn;break}if(Dt&&Ze.label<Dt[2]){Ze.label=Dt[2],Ze.ops.push(rn);break}Dt[2]&&Ze.ops.pop(),Ze.trys.pop();continue}rn=Fe.call(oe,Ze)}catch(_i){rn=[6,_i],xt=0}finally{rt=Dt=0}if(rn[0]&5)throw rn[1];return{value:rn[0]?rn[1]:void 0,done:!0}}};function Pf(oe,Fe){return WorkerFarm.isSupported()?oe.worker&&(Fe==null?void 0:Fe.worker):!1}function Ef(oe,Fe,Ze,rt){return Ze===void 0&&(Ze={}),rt===void 0&&(rt={}),Tc(this,void 0,void 0,function(){var xt,Dt,$r,En,pi,rn,_i,ga;return ec(this,function(ss){switch(ss.label){case 0:return xt=getWorkerName(oe),Dt=getWorkerURL(oe,Ze),$r=WorkerFarm.getWorkerFarm(Ze),En=$r.getWorkerPool({name:xt,url:Dt}),pi=Ze.jobName||oe.name,[4,En.startJob(pi,$l.bind(null,rt))];case 1:return rn=ss.sent(),_i=removeNontransferableOptions(Ze),rn.postMessage("process",{input:Fe,options:_i}),[4,rn.result];case 2:return ga=ss.sent(),[2,ga.result]}})})}function $l(oe,Fe,Ze,rt){return Tc(this,void 0,void 0,function(){var xt,Dt,$r,En,pi,rn,_i;return ec(this,function(ga){switch(ga.label){case 0:switch(xt=Ze,xt){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return Fe.done(rt),[3,9];case 2:return Fe.error(new Error(rt.error)),[3,9];case 3:Dt=rt.id,$r=rt.input,En=rt.options,ga.label=4;case 4:return ga.trys.push([4,6,,7]),oe.process?[4,oe.process($r,En)]:(Fe.postMessage("error",{id:Dt,error:"Worker not set up to process on main thread"}),[2]);case 5:return pi=ga.sent(),Fe.postMessage("done",{id:Dt,result:pi}),[3,7];case 6:return rn=ga.sent(),_i=rn instanceof Error?rn.message:"unknown error",Fe.postMessage("error",{id:Dt,error:_i}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+Ze),ga.label=9;case 9:return[2]}})})}var Uc=function(){function oe(){this._values=[],this._settlers=[],this._closed=!1}return oe.prototype[Symbol.asyncIterator]=function(){return this},oe.prototype.push=function(Fe){return this.enqueue(Fe)},oe.prototype.enqueue=function(Fe){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var Ze=this._settlers.shift();Fe instanceof Error?Ze.reject(Fe):Ze.resolve({value:Fe})}else this._values.push(Fe)},oe.prototype.close=function(){for(;this._settlers.length>0;){var Fe=this._settlers.shift();Fe.resolve({done:!0})}this._closed=!0},oe.prototype.next=function(){var Fe=this;if(this._values.length>0){var Ze=this._values.shift();return Ze instanceof Error?Promise.reject(Ze):Promise.resolve({done:!1,value:Ze})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(rt,xt){Fe._settlers.push({resolve:rt,reject:xt})})},oe}(),Qh=Uc,Jh=function(oe,Fe,Ze,rt){function xt(Dt){return Dt instanceof Ze?Dt:new Ze(function($r){$r(Dt)})}return new(Ze||(Ze=Promise))(function(Dt,$r){function En(_i){try{rn(rt.next(_i))}catch(ga){$r(ga)}}function pi(_i){try{rn(rt.throw(_i))}catch(ga){$r(ga)}}function rn(_i){_i.done?Dt(_i.value):xt(_i.value).then(En,pi)}rn((rt=rt.apply(oe,Fe||[])).next())})},Sh=function(oe,Fe){var Ze={label:0,sent:function(){if(Dt[0]&1)throw Dt[1];return Dt[1]},trys:[],ops:[]},rt,xt,Dt,$r;return $r={next:En(0),throw:En(1),return:En(2)},typeof Symbol=="function"&&($r[Symbol.iterator]=function(){return this}),$r;function En(rn){return function(_i){return pi([rn,_i])}}function pi(rn){if(rt)throw new TypeError("Generator is already executing.");for(;Ze;)try{if(rt=1,xt&&(Dt=rn[0]&2?xt.return:rn[0]?xt.throw||((Dt=xt.return)&&Dt.call(xt),0):xt.next)&&!(Dt=Dt.call(xt,rn[1])).done)return Dt;switch(xt=0,Dt&&(rn=[rn[0]&2,Dt.value]),rn[0]){case 0:case 1:Dt=rn;break;case 4:return Ze.label++,{value:rn[1],done:!1};case 5:Ze.label++,xt=rn[1],rn=[0];continue;case 7:rn=Ze.ops.pop(),Ze.trys.pop();continue;default:if(Dt=Ze.trys,!(Dt=Dt.length>0&&Dt[Dt.length-1])&&(rn[0]===6||rn[0]===2)){Ze=0;continue}if(rn[0]===3&&(!Dt||rn[1]>Dt[0]&&rn[1]<Dt[3])){Ze.label=rn[1];break}if(rn[0]===6&&Ze.label<Dt[1]){Ze.label=Dt[1],Dt=rn;break}if(Dt&&Ze.label<Dt[2]){Ze.label=Dt[2],Ze.ops.push(rn);break}Dt[2]&&Ze.ops.pop(),Ze.trys.pop();continue}rn=Fe.call(oe,Ze)}catch(_i){rn=[6,_i],xt=0}finally{rt=Dt=0}if(rn[0]&5)throw rn[1];return{value:rn[0]?rn[1]:void 0,done:!0}}},Of=function(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe=oe[Symbol.asyncIterator],Ze;return Fe?Fe.call(oe):(oe=typeof __values=="function"?__values(oe):oe[Symbol.iterator](),Ze={},rt("next"),rt("throw"),rt("return"),Ze[Symbol.asyncIterator]=function(){return this},Ze);function rt(Dt){Ze[Dt]=oe[Dt]&&function($r){return new Promise(function(En,pi){$r=oe[Dt]($r),xt(En,pi,$r.done,$r.value)})}}function xt(Dt,$r,En,pi){Promise.resolve(pi).then(function(rn){Dt({value:rn,done:En})},$r)}},wh=0,pf,oh;function Qc(oe,Fe){var Ze=this;if(typeof self!="undefined"){var rt={process:nc};El.onmessage=function(xt,Dt){return Jh(Ze,void 0,void 0,function(){var $r,En,pi,rn,_i,ga,ss,To,Ro,fs,ps;return Sh(this,function(zo){switch(zo.label){case 0:switch(zo.trys.push([0,19,,20]),$r=xt,$r){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!oe)throw new Error("Worker does not support atomic processing");return[4,oe(Dt.input,Dt.options||{},rt)];case 2:return En=zo.sent(),El.postMessage("done",{result:En}),[3,18];case 3:if(!Fe)throw new Error("Worker does not support batched processing");pf=new Qh,oh=Dt.options||{},pi=Fe(pf,oh,rt),zo.label=4;case 4:zo.trys.push([4,9,10,15]),rn=Of(pi),zo.label=5;case 5:return[4,rn.next()];case 6:if(_i=zo.sent(),!!_i.done)return[3,8];ga=_i.value,El.postMessage("output-batch",{result:ga}),zo.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return ss=zo.sent(),fs={error:ss},[3,15];case 10:return zo.trys.push([10,,13,14]),_i&&!_i.done&&(ps=rn.return)?[4,ps.call(rn)]:[3,12];case 11:zo.sent(),zo.label=12;case 12:return[3,14];case 13:if(fs)throw fs.error;return[7];case 14:return[7];case 15:return El.postMessage("done",{}),[3,18];case 16:return pf.push(Dt.input),[3,18];case 17:return pf.close(),[3,18];case 18:return[3,20];case 19:return To=zo.sent(),Ro=To instanceof Error?To.message:"",El.postMessage("error",{error:Ro}),[3,20];case 20:return[2]}})})}}}function nc(oe,Fe){return Fe===void 0&&(Fe={}),new Promise(function(Ze,rt){var xt=wh++,Dt=function(En,pi){if(pi.id===xt)switch(En){case"done":El.removeEventListener(Dt),Ze(pi.result);break;case"error":El.removeEventListener(Dt),rt(pi.error);break;default:}};El.addEventListener(Dt);var $r={id:xt,input:oe,options:Fe};El.postMessage("process",$r)})}var ic=function(oe,Fe,Ze,rt){function xt(Dt){return Dt instanceof Ze?Dt:new Ze(function($r){$r(Dt)})}return new(Ze||(Ze=Promise))(function(Dt,$r){function En(_i){try{rn(rt.next(_i))}catch(ga){$r(ga)}}function pi(_i){try{rn(rt.throw(_i))}catch(ga){$r(ga)}}function rn(_i){_i.done?Dt(_i.value):xt(_i.value).then(En,pi)}rn((rt=rt.apply(oe,Fe||[])).next())})},Ch=function(oe,Fe){var Ze={label:0,sent:function(){if(Dt[0]&1)throw Dt[1];return Dt[1]},trys:[],ops:[]},rt,xt,Dt,$r;return $r={next:En(0),throw:En(1),return:En(2)},typeof Symbol=="function"&&($r[Symbol.iterator]=function(){return this}),$r;function En(rn){return function(_i){return pi([rn,_i])}}function pi(rn){if(rt)throw new TypeError("Generator is already executing.");for(;Ze;)try{if(rt=1,xt&&(Dt=rn[0]&2?xt.return:rn[0]?xt.throw||((Dt=xt.return)&&Dt.call(xt),0):xt.next)&&!(Dt=Dt.call(xt,rn[1])).done)return Dt;switch(xt=0,Dt&&(rn=[rn[0]&2,Dt.value]),rn[0]){case 0:case 1:Dt=rn;break;case 4:return Ze.label++,{value:rn[1],done:!1};case 5:Ze.label++,xt=rn[1],rn=[0];continue;case 7:rn=Ze.ops.pop(),Ze.trys.pop();continue;default:if(Dt=Ze.trys,!(Dt=Dt.length>0&&Dt[Dt.length-1])&&(rn[0]===6||rn[0]===2)){Ze=0;continue}if(rn[0]===3&&(!Dt||rn[1]>Dt[0]&&rn[1]<Dt[3])){Ze.label=rn[1];break}if(rn[0]===6&&Ze.label<Dt[1]){Ze.label=Dt[1],Dt=rn;break}if(Dt&&Ze.label<Dt[2]){Ze.label=Dt[2],Ze.ops.push(rn);break}Dt[2]&&Ze.ops.pop(),Ze.trys.pop();continue}rn=Fe.call(oe,Ze)}catch(_i){rn=[6,_i],xt=0}finally{rt=Dt=0}if(rn[0]&5)throw rn[1];return{value:rn[0]?rn[1]:void 0,done:!0}}},Fh={};function ku(oe,Fe,Ze){return Fe===void 0&&(Fe=null),Ze===void 0&&(Ze={}),ic(this,void 0,void 0,function(){return Ch(this,function(rt){switch(rt.label){case 0:return Fe&&(oe=yu(oe,Fe,Ze)),Fh[oe]=Fh[oe]||Jc(oe),[4,Fh[oe]];case 1:return[2,rt.sent()]}})})}function yu(oe,Fe,Ze){if(oe.startsWith("http"))return oe;var rt=Ze.modules||{};return rt[oe]?rt[oe]:Ze.CDN?(assert(Ze.CDN.startsWith("http")),Ze.CDN+"/"+Fe+"/dist/libs/"+oe):isWorker?"../src/libs/"+oe:"modules/"+Fe+"/src/libs/"+oe}function Jc(oe){return ic(this,void 0,void 0,function(){var Fe,Ze,rt;return Ch(this,function(xt){switch(xt.label){case 0:return oe.endsWith("wasm")?[4,fetch(oe)]:[3,3];case 1:return Fe=xt.sent(),[4,Fe.arrayBuffer()];case 2:return[2,xt.sent()];case 3:return isWorker?[2,importScripts(oe)]:[4,fetch(oe)];case 4:return Ze=xt.sent(),[4,Ze.text()];case 5:return rt=xt.sent(),[2,sh(rt,oe)]}})})}function sh(oe,Fe){if(isWorker)return eval.call(global,oe),null;var Ze=document.createElement("script");Ze.id=Fe;try{Ze.appendChild(document.createTextNode(oe))}catch(rt){Ze.text=oe}return document.body.appendChild(Ze),null}var vh="0.0.3",Nf={id:"null",name:"null",module:"web-worker-helper",options:{}};function mh(oe){var Fe=oe.color;return!Fe||!Fe.length?[1,1,1,1]:Fe}function If(oe,Fe,Ze){return Ze.length===2?[Ze[0],Ze[1],0]:[Ze[0],Ze[1],Ze[2]]}function Rf(oe){var Fe=oe.filter;return Fe?[1]:[0]}function vf(oe,Fe){return[Fe]}var ue=g(9187),Rr=g.n(ue),Mt=g(31437),St=Mt.Ue(),Vt=Mt.Ue(),ar=Mt.Ue(),Xr=Mt.Ue(),vn=Mt.Ue();function Sn(oe,Fe,Ze,rt,xt){Mt.IH(oe,Ze,rt),Mt.Fv(oe,oe),Fe=Mt.al(-oe[1],oe[0]);var Dt=Mt.al(-Ze[1],Ze[0]);return[xt/Mt.AK(Fe,Dt),Fe]}function Fn(oe,Fe){return Mt.t8(oe,-Fe[1],Fe[0])}function Ci(oe,Fe,Ze){return Mt.lu(oe,Fe,Ze),Mt.Fv(oe,oe),oe}function Hi(oe,Fe){return oe[0]===Fe[0]&&oe[1]===Fe[1]}function ba(oe){for(var Fe=new Map,Ze=0;Ze<oe.length;Ze++){var rt=oe[0].toString()+"-"+oe[1].toString();Fe.get(rt)?(oe.splice(Ze,1),Ze++):Fe.set(rt,rt)}return oe}var mo=function(){function oe(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,N.Z)(this,oe),(0,Yo.Z)(this,"lastFlip",-1),(0,Yo.Z)(this,"miter",Mt.al(0,0)),(0,Yo.Z)(this,"started",!1),(0,Yo.Z)(this,"dash",!1),(0,Yo.Z)(this,"totalDistance",0),(0,Yo.Z)(this,"currentIndex",0),this.join=Fe.join||"miter",this.cap=Fe.cap||"butt",this.miterLimit=Fe.miterLimit||10,this.thickness=Fe.thickness||1,this.dash=Fe.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,K.Z)(oe,[{key:"extrude_gaode2",value:function(Ze,rt){var xt=this.complex;if(Ze.length<=1)return xt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Dt=Ze.length,$r=xt.startIndex,En=1;En<Dt;En++){var pi,rn,_i,ga=Ze[En-1];ga.push((pi=rt[En-1][2])!==null&&pi!==void 0?pi:0);var ss=rt[En-1],To=Ze[En];To.push((rn=rt[En][2])!==null&&rn!==void 0?rn:0);var Ro=rt[En],fs=En<Ze.length-1?[].concat((0,Io.Z)(Ze[En+1]),[(_i=rt[En+1][2])!==null&&_i!==void 0?_i:0]):null,ps=En<rt.length-1?rt[En+1]:null,zo=this.segment_gaode2(xt,$r,ga,To,fs,ss,Ro,ps);$r+=zo}if(this.dash)for(var Ds=0;Ds<xt.positions.length/6;Ds++)xt.positions[Ds*6+5]=this.totalDistance;return xt.startIndex=xt.positions.length/6,xt}},{key:"simpleExtrude_gaode2",value:function(Ze,rt){var xt=this.complex;if(Ze.length<=1)return xt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Dt=Ze.length,$r=xt.startIndex,En=1;En<Dt;En++){var pi,rn,_i,ga=Ze[En-1];ga.push((pi=rt[En-1][2])!==null&&pi!==void 0?pi:0);var ss=rt[En-1],To=Ze[En];To.push((rn=rt[En][2])!==null&&rn!==void 0?rn:0);var Ro=rt[En],fs=En<Ze.length-1?[].concat((0,Io.Z)(Ze[En+1]),[(_i=rt[En+1][2])!==null&&_i!==void 0?_i:0]):null,ps=En<rt.length-1?rt[En+1]:null,zo=this.simpleSegment(xt,$r,ga,To,fs,ss,Ro,ps);$r+=zo}if(this.dash)for(var Ds=0;Ds<xt.positions.length/6;Ds++)xt.positions[Ds*6+5]=this.totalDistance;return xt.startIndex=xt.positions.length/6,xt}},{key:"extrude",value:function(Ze){var rt=this.complex;if(Ze.length<=1)return rt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var xt=Ze.length,Dt=rt.startIndex,$r=1;$r<xt;$r++){var En=Ze[$r-1],pi=Ze[$r],rn=$r<Ze.length-1?Ze[$r+1]:null,_i=this.segment(rt,Dt,En,pi,rn);Dt+=_i}if(this.dash)for(var ga=0;ga<rt.positions.length/6;ga++)rt.positions[ga*6+5]=this.totalDistance;return rt.startIndex=rt.positions.length/6,rt}},{key:"simpleExtrude",value:function(Ze){var rt=this.complex;if(Ze.length<=1)return rt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var xt=Ze.length,Dt=rt.startIndex,$r=1;$r<xt;$r++){var En=Ze[$r-1],pi=Ze[$r],rn=$r<Ze.length-1?Ze[$r+1]:null,_i=this.simpleSegment(rt,Dt,En,pi,rn);Dt+=_i}if(this.dash)for(var ga=0;ga<rt.positions.length/6;ga++)rt.positions[ga*6+5]=this.totalDistance;return rt.startIndex=rt.positions.length/6,rt}},{key:"segment_gaode2",value:function(Ze,rt,xt,Dt,$r,En,pi,rn){var _i=0,ga=Ze.indices,ss=Ze.positions,To=Ze.normals,Ro=this.cap==="square",fs=this.join==="bevel",ps=qn([pi[0],pi[1]]),zo=qn([En[0],En[1]]);Ci(ar,Dt,xt);var Ds=0;if(this.dash&&(Ds=this.lineSegmentDistance(ps,zo),this.totalDistance+=Ds),this.normal||(this.normal=Mt.Ue(),Fn(this.normal,ar)),!this.started)if(this.started=!0,Ro){var xu=Mt.Ue(),cu=Mt.Ue();Mt.IH(xu,this.normal,ar),Mt.IH(cu,this.normal,ar),To.push(cu[0],cu[1],0),To.push(xu[0],xu[1],0),ss.push(xt[0],xt[1],xt[2]|0,this.totalDistance-Ds,-this.thickness,xt[2]|0),this.complex.indexes.push(this.currentIndex),ss.push(xt[0],xt[1],xt[2]|0,this.totalDistance-Ds,this.thickness,xt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(ss,To,xt,this.normal,this.thickness,this.totalDistance-Ds);if(ga.push(rt+0,rt+1,rt+2),$r){Hi(Dt,$r)&&Mt.IH($r,Dt,Mt.Fv($r,Mt.$X($r,Dt,xt))),Ci(Xr,$r,Dt);var ac=Sn(vn,Mt.Ue(),ar,Xr,this.thickness),ll=(0,Js.Z)(ac,2),wu=ll[0],Sl=ll[1],Wl=Mt.AK(vn,this.normal)<0?-1:1,Pc=fs;if(!Pc&&this.join==="miter"){var jc=wu;jc>this.miterLimit&&(Pc=!0)}Pc?(To.push(this.normal[0],this.normal[1],0),To.push(Sl[0],Sl[1],0),ss.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,-this.thickness*Wl,Dt[2]|0),this.complex.indexes.push(this.currentIndex),ss.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,this.thickness*Wl,Dt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,ga.push.apply(ga,(0,Io.Z)(this.lastFlip!==-Wl?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),ga.push(rt+2,rt+3,rt+4),Fn(St,Xr),Mt.JG(this.normal,St),To.push(this.normal[0],this.normal[1],0),ss.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,-this.thickness*Wl,Dt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,_i+=3):(this.extrusions(ss,To,Dt,Sl,wu,this.totalDistance),ga.push.apply(ga,(0,Io.Z)(this.lastFlip===1?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),Wl=-1,Mt.JG(this.normal,Sl),_i+=2),this.lastFlip=Wl}else{if(Fn(this.normal,ar),Ro){var tf=Mt.Ue(),$c=Mt.Ue();Mt.lu($c,ar,this.normal),Mt.IH(tf,ar,this.normal),To.push($c[0],$c[1],0),To.push(tf[0],tf[1],0),ss.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,this.thickness,Dt[2]|0),this.complex.indexes.push(this.currentIndex),ss.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,this.thickness,Dt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(ss,To,Dt,this.normal,this.thickness,this.totalDistance);ga.push.apply(ga,(0,Io.Z)(this.lastFlip===1?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),_i+=2}return _i}},{key:"simpleSegment",value:function(Ze,rt,xt,Dt,$r){var En=0,pi=Ze.indices,rn=Ze.positions,_i=Ze.normals,ga=qn([Dt[0],Dt[1]]),ss=qn([xt[0],xt[1]]);Ci(ar,ga,ss);var To=0;if(this.dash&&(To=this.lineSegmentDistance(ga,ss),this.totalDistance+=To),this.normal||(this.normal=Mt.Ue(),Fn(this.normal,ar)),this.started||(this.started=!0,this.extrusions(rn,_i,xt,this.normal,this.thickness,this.totalDistance-To)),pi.push(rt+0,rt+1,rt+2),!$r)Fn(this.normal,ar),this.extrusions(rn,_i,Dt,this.normal,this.thickness,this.totalDistance),pi.push.apply(pi,(0,Io.Z)(this.lastFlip===1?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),En+=2;else{var Ro=qn([$r[0],$r[1]]);Hi(ga,Ro)&&Mt.IH(Ro,ga,Mt.Fv(Ro,Mt.$X(Ro,ga,ss))),Ci(Xr,Ro,ga);var fs=Sn(vn,Mt.Ue(),ar,Xr,this.thickness),ps=(0,Js.Z)(fs,2),zo=ps[0],Ds=ps[1],xu=Mt.AK(vn,this.normal)<0?-1:1;this.extrusions(rn,_i,Dt,Ds,zo,this.totalDistance),pi.push.apply(pi,(0,Io.Z)(this.lastFlip===1?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),xu=-1,Mt.JG(this.normal,Ds),En+=2,this.lastFlip=xu}return En}},{key:"segment",value:function(Ze,rt,xt,Dt,$r){var En=0,pi=Ze.indices,rn=Ze.positions,_i=Ze.normals,ga=this.cap==="square",ss=this.join==="bevel",To=qn([Dt[0],Dt[1]]),Ro=qn([xt[0],xt[1]]);Ci(ar,To,Ro);var fs=0;if(this.dash&&(fs=this.lineSegmentDistance(To,Ro),this.totalDistance+=fs),this.normal||(this.normal=Mt.Ue(),Fn(this.normal,ar)),!this.started)if(this.started=!0,ga){var ps=Mt.Ue(),zo=Mt.Ue();Mt.IH(ps,this.normal,ar),Mt.IH(zo,this.normal,ar),_i.push(zo[0],zo[1],0),_i.push(ps[0],ps[1],0),rn.push(xt[0],xt[1],xt[2]|0,this.totalDistance-fs,-this.thickness,xt[2]|0),this.complex.indexes.push(this.currentIndex),rn.push(xt[0],xt[1],xt[2]|0,this.totalDistance-fs,this.thickness,xt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(rn,_i,xt,this.normal,this.thickness,this.totalDistance-fs);if(pi.push(rt+0,rt+1,rt+2),$r){var cu=qn([$r[0],$r[1]]);Hi(To,cu)&&Mt.IH(cu,To,Mt.Fv(cu,Mt.$X(cu,To,Ro))),Ci(Xr,cu,To);var tf=Sn(vn,Mt.Ue(),ar,Xr,this.thickness),$c=(0,Js.Z)(tf,2),ac=$c[0],ll=$c[1],wu=Mt.AK(vn,this.normal)<0?-1:1,Sl=ss;if(!Sl&&this.join==="miter"){var Wl=ac;Wl>this.miterLimit&&(Sl=!0)}Sl?(_i.push(this.normal[0],this.normal[1],0),_i.push(ll[0],ll[1],0),rn.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,-this.thickness*wu,Dt[2]|0),this.complex.indexes.push(this.currentIndex),rn.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,this.thickness*wu,Dt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,pi.push.apply(pi,(0,Io.Z)(this.lastFlip!==-wu?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),pi.push(rt+2,rt+3,rt+4),Fn(St,Xr),Mt.JG(this.normal,St),_i.push(this.normal[0],this.normal[1],0),rn.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,-this.thickness*wu,Dt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,En+=3):(this.extrusions(rn,_i,Dt,ll,ac,this.totalDistance),pi.push.apply(pi,(0,Io.Z)(this.lastFlip===1?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),wu=-1,Mt.JG(this.normal,ll),En+=2),this.lastFlip=wu}else{if(Fn(this.normal,ar),ga){var Ds=Mt.Ue(),xu=Mt.Ue();Mt.lu(xu,ar,this.normal),Mt.IH(Ds,ar,this.normal),_i.push(xu[0],xu[1],0),_i.push(Ds[0],Ds[1],0),rn.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,this.thickness,Dt[2]|0),this.complex.indexes.push(this.currentIndex),rn.push(Dt[0],Dt[1],Dt[2]|0,this.totalDistance,this.thickness,Dt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(rn,_i,Dt,this.normal,this.thickness,this.totalDistance);pi.push.apply(pi,(0,Io.Z)(this.lastFlip===1?[rt,rt+2,rt+3]:[rt+2,rt+1,rt+3])),En+=2}return En}},{key:"extrusions",value:function(Ze,rt,xt,Dt,$r,En){rt.push(Dt[0],Dt[1],0),rt.push(Dt[0],Dt[1],0),Ze.push(xt[0],xt[1],xt[2]|0,En,-$r,xt[2]|0),this.complex.indexes.push(this.currentIndex),Ze.push(xt[0],xt[1],xt[2]|0,En,$r,xt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(Ze,rt){var xt=rt[0]-Ze[0],Dt=rt[1]-Ze[1];return Math.sqrt(xt*xt+Dt*Dt)}}]),oe}(),Qa=85.0511287798;function ks(oe){var Fe=oe.coordinates,Ze=oe.originCoordinates,rt=oe.version,xt=new mo({dash:!0,join:"bevel"});if(rt==="GAODE2.x"){var Dt=Fe;Array.isArray(Dt[0][0])||(Dt=[Fe]);var $r=Ze;Array.isArray($r[0][0])||($r=[Ze]);for(var En=0;En<Dt.length;En++){var pi=Dt[En],rn=$r[En];xt.extrude_gaode2(pi,rn)}}else{var _i=Fe;_i[0]&&!Array.isArray(_i[0][0])&&(_i=[Fe]),_i.forEach(function(ss){xt.extrude(ss)})}var ga=xt.complex;return{vertices:ga.positions,indices:ga.indices,normals:ga.normals,indexes:ga.indexes,size:6}}function Ts(oe){var Fe=uu(oe.coordinates);return{vertices:[].concat((0,Io.Z)(Fe),(0,Io.Z)(Fe),(0,Io.Z)(Fe),(0,Io.Z)(Fe)),indices:[0,1,2,2,3,0],size:Fe.length}}function lu(oe){var Fe=oe.coordinates,Ze=Rr().flatten(Fe),rt=Ze.vertices,xt=Ze.dimensions,Dt=Ze.holes,$r=Rr()(rt,Dt,xt);return{indices:$r,vertices:rt,size:xt}}function Iu(oe,Fe){var Ze=Fe;return Fe>Qa&&(Ze=Qa),Fe<-Qa&&(Ze=-Qa),[Math.PI*oe/180+Math.PI,Math.PI-Math.log(Math.tan(Math.PI*.25+Math.PI*Ze/180*.5))]}function _u(oe,Fe){return[(oe-Math.PI)*180/Math.PI,(Math.atan(Math.exp(Math.PI-Fe))-Math.PI*.25)*2*180/Math.PI]}var Mc=function(){var oe=(0,Ql.Z)(oo().mark(function Fe(Ze){var rt,xt,Dt,$r,En,pi,rn,_i,ga;return oo().wrap(function(To){for(;;)switch(To.prev=To.next){case 0:return rt=Ze.descriptors,xt=Ze.features,Dt=Ze.enablePicking,$r=Ze.iconMap,En={a_Color:mh,a_Position:If,filter:Rf,a_vertexId:vf,a_PickingColor:function(fs){var ps=fs.id;return Dt?Dn(ps):[0,0,0]},a_DistanceAndIndex:function(fs,ps,zo,Ds,xu,cu){return cu===void 0?[zo[3],10]:[zo[3],cu]},a_Total_Distance:function(fs,ps,zo){return[zo[5]]},a_Size:function(fs){var ps=fs.size,zo=ps===void 0?1:ps;return Array.isArray(zo)?[zo[0],zo[1]]:[zo,0]},a_Normal:function(fs,ps,zo,Ds,xu){return xu},a_Miter:function(fs,ps,zo){return[zo[4]]},a_iconMapUV:function(fs){var ps=fs.texture,zo=$r[ps]||{x:0,y:0},Ds=zo.x,xu=zo.y;return[Ds,xu]}},pi={sizePerElement:0,elements:[]},rn=0,_i=[],ga=3,xt.forEach(function(Ro,fs){var ps=ks(Ro),zo=ps.indices,Ds=ps.vertices,xu=ps.normals,cu=ps.size,tf=ps.indexes;zo.forEach(function(wu){_i.push(wu+rn)}),ga=cu;var $c=Ds.length/cu;pi.sizePerElement=ga,pi.elements.push({featureIdx:fs,vertices:Ds,normals:xu,offset:rn}),rn+=$c;for(var ac=function(Sl){var Wl=(xu==null?void 0:xu.slice(Sl*3,Sl*3+3))||[],Pc=Ds.slice(Sl*cu,Sl*cu+cu),jc=0;tf&&tf[Sl]!==void 0&&(jc=tf[Sl]),rt.forEach(function(hu){if(hu&&En[hu.name]){var _h;(_h=hu.buffer.data).push.apply(_h,(0,Io.Z)(En[hu.name](Ro,fs,Pc,Sl,Wl,jc)))}})},ll=0;ll<$c;ll++)ac(ll)}),To.abrupt("return",{descriptors:rt,featureLayout:pi,indices:_i});case 8:case"end":return To.stop()}},Fe)}));return function(Ze){return oe.apply(this,arguments)}}(),tu=function(){var oe=(0,Ql.Z)(oo().mark(function Fe(Ze){var rt,xt,Dt,$r,En,pi,rn,_i,ga;return oo().wrap(function(To){for(;;)switch(To.prev=To.next){case 0:return rt=Ze.descriptors,xt=Ze.features,Dt=Ze.enablePicking,$r=Ze.shape2d,En={a_Color:mh,a_Position:If,filter:Rf,a_vertexId:vf,a_PickingColor:function(fs){var ps=fs.id;return Dt?Dn(ps):[0,0,0]},a_Shape:function(fs){var ps=fs.shape,zo=ps===void 0?2:ps,Ds=$r.indexOf(zo);return[Ds]},a_Extrude:function(fs,ps,zo,Ds){var xu=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],cu=Ds%4*3;return[xu[cu],xu[cu+1],xu[cu+2]]},a_Size:function(fs){var ps=fs.size,zo=ps===void 0?5:ps;return Array.isArray(zo)?[zo[0]]:[zo]}},pi={sizePerElement:0,elements:[]},rn=0,_i=[],ga=3,xt.forEach(function(Ro,fs){var ps=Ts(Ro),zo=ps.indices,Ds=ps.vertices,xu=ps.normals,cu=ps.size,tf=ps.indexes;zo.forEach(function(wu){_i.push(wu+rn)}),ga=cu;var $c=Ds.length/cu;pi.sizePerElement=ga,pi.elements.push({featureIdx:fs,vertices:Ds,normals:xu,offset:rn}),rn+=$c;for(var ac=function(Sl){var Wl=(xu==null?void 0:xu.slice(Sl*3,Sl*3+3))||[],Pc=Ds.slice(Sl*cu,Sl*cu+cu),jc=0;tf&&tf[Sl]!==void 0&&(jc=tf[Sl]),rt.forEach(function(hu){if(hu&&En[hu.name]){var _h;(_h=hu.buffer.data).push.apply(_h,(0,Io.Z)(En[hu.name](Ro,fs,Pc,Sl,Wl,jc)))}})},ll=0;ll<$c;ll++)ac(ll)}),To.abrupt("return",{descriptors:rt,featureLayout:pi,indices:_i});case 8:case"end":return To.stop()}},Fe)}));return function(Ze){return oe.apply(this,arguments)}}(),Fl=function(){var oe=(0,Ql.Z)(oo().mark(function Fe(Ze){var rt,xt,Dt,$r,En,pi,rn,_i;return oo().wrap(function(ss){for(;;)switch(ss.prev=ss.next){case 0:return rt=Ze.descriptors,xt=Ze.features,Dt=Ze.enablePicking,$r={a_Color:mh,a_Position:If,filter:Rf,a_vertexId:vf,a_PickingColor:function(Ro){var fs=Ro.id;return Dt?Dn(fs):[0,0,0]}},En={sizePerElement:0,elements:[]},pi=0,rn=[],_i=3,xt.forEach(function(To,Ro){var fs=lu(To),ps=fs.indices,zo=fs.vertices,Ds=fs.normals,xu=fs.size,cu=fs.indexes;ps.forEach(function(ll){rn.push(ll+pi)}),_i=xu;var tf=zo.length/xu;En.sizePerElement=_i,En.elements.push({featureIdx:Ro,vertices:zo,normals:Ds,offset:pi}),pi+=tf;for(var $c=function(wu){var Sl=(Ds==null?void 0:Ds.slice(wu*3,wu*3+3))||[],Wl=zo.slice(wu*xu,wu*xu+xu),Pc=0;cu&&cu[wu]!==void 0&&(Pc=cu[wu]),rt.forEach(function(jc){if(jc&&$r[jc.name]){var hu;(hu=jc.buffer.data).push.apply(hu,(0,Io.Z)($r[jc.name](To,Ro,Wl,wu,Sl,Pc)))}})},ac=0;ac<tf;ac++)$c(ac)}),ss.abrupt("return",{descriptors:rt,featureLayout:En,indices:rn});case 8:case"end":return ss.stop()}},Fe)}));return function(Ze){return oe.apply(this,arguments)}}(),Ys={pointFill:tu,line:Mc,polygonFill:Fl},Du=(0,c.Z)({},Ys);function Bu(oe){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,Ql.Z)(oo().mark(function oe(Fe){var Ze,rt;return oo().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(Ze=Fe.workerType,rt=Fe.data,!Du[Ze]){Dt.next=3;break}return Dt.abrupt("return",Du[Ze](rt));case 3:return Dt.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(Ze,'" non-existent.'))));case 4:case"end":return Dt.stop()}},oe)})),Gl.apply(this,arguments)}Qc(Bu);var ru=new Map;function pl(oe,Fe){ru.set(oe,Fe)}function ef(oe){var Fe=ru.get(oe);return Fe}var Bh=`var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===l)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=f(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==e&&n.call(g,i)&&(d=g);var m=v.prototype=h.prototype=Object.create(d);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=f(t[o],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=f(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,s(m,"constructor",v),s(v,"constructor",p),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},x(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var w,E,A=function(t){return t&&t.Math==Math&&t},O=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof x&&x)||function(){return this}()||Function("return this")(),S=Object.defineProperty,T=function(t,e){try{S(O,t,{value:e,configurable:!0,writable:!0})}catch(r){O[t]=e}return e},k=O["__core-js_shared__"]||T("__core-js_shared__",{}),I=b((function(t){(t.exports=function(t,e){return k[t]||(k[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})})),j=function(t){try{return!!t()}catch(t){return!0}},P=!j((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),_=Function.prototype,M=_.call,L=P&&_.bind.bind(M,M),R=function(t){return P?L(t):function(){return M.apply(t,arguments)}},C=R({}.toString),N=R("".slice),D=function(t){return N(C(t),8,-1)},F=function(t){if("Function"===D(t))return R(t)},W=function(t){return null==t},z=TypeError,B=function(t){if(W(t))throw z("Can't call method on "+t);return t},U=Object,G=function(t){return U(B(t))},H=F({}.hasOwnProperty),V=Object.hasOwn||function(t,e){return H(G(t),e)},q=0,Z=Math.random(),Y=F(1..toString),$=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Y(++q+Z,36)},K="object"==typeof document&&document.all,Q={all:K,IS_HTMLDDA:void 0===K&&void 0!==K},X=Q.all,J=Q.IS_HTMLDDA?function(t){return"function"==typeof t||t===X}:function(t){return"function"==typeof t},tt=function(t){return J(t)?t:void 0},et=function(t,e){return arguments.length<2?tt(O[t]):O[t]&&O[t][e]},rt=et("navigator","userAgent")||"",nt=O.process,ot=O.Deno,it=nt&&nt.versions||ot&&ot.version,at=it&&it.v8;at&&(E=(w=at.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!E&&rt&&(!(w=rt.match(/Edge\\/(\\d+)/))||w[1]>=74)&&(w=rt.match(/Chrome\\/(\\d+)/))&&(E=+w[1]);var ut=E,st=!!Object.getOwnPropertySymbols&&!j((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ut&&ut<41})),ct=st&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ft=I("wks"),lt=O.Symbol,ht=lt&&lt.for,pt=ct?lt:lt&&lt.withoutSetter||$,vt=function(t){if(!V(ft,t)||!st&&"string"!=typeof ft[t]){var e="Symbol."+t;st&&V(lt,t)?ft[t]=lt[t]:ft[t]=ct&&ht?ht(e):pt(e)}return ft[t]},dt={};dt[vt("toStringTag")]="z";var yt="[object z]"===String(dt),gt=!j((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),mt=Q.all,xt=Q.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:J(t)||t===mt}:function(t){return"object"==typeof t?null!==t:J(t)},bt=O.document,wt=xt(bt)&&xt(bt.createElement),Et=function(t){return wt?bt.createElement(t):{}},At=!gt&&!j((function(){return 7!=Object.defineProperty(Et("div"),"a",{get:function(){return 7}}).a})),Ot=gt&&j((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),St=String,Tt=TypeError,kt=function(t){if(xt(t))return t;throw Tt(St(t)+" is not an object")},It=Function.prototype.call,jt=P?It.bind(It):function(){return It.apply(It,arguments)},Pt=F({}.isPrototypeOf),_t=Object,Mt=ct?function(t){return"symbol"==typeof t}:function(t){var e=et("Symbol");return J(e)&&Pt(e.prototype,_t(t))},Lt=String,Rt=function(t){try{return Lt(t)}catch(t){return"Object"}},Ct=TypeError,Nt=function(t){if(J(t))return t;throw Ct(Rt(t)+" is not a function")},Dt=function(t,e){var r=t[e];return W(r)?void 0:Nt(r)},Ft=TypeError,Wt=TypeError,zt=vt("toPrimitive"),Bt=function(t,e){if(!xt(t)||Mt(t))return t;var r,n=Dt(t,zt);if(n){if(void 0===e&&(e="default"),r=jt(n,t,e),!xt(r)||Mt(r))return r;throw Wt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&J(r=t.toString)&&!xt(n=jt(r,t)))return n;if(J(r=t.valueOf)&&!xt(n=jt(r,t)))return n;if("string"!==e&&J(r=t.toString)&&!xt(n=jt(r,t)))return n;throw Ft("Can't convert object to primitive value")}(t,e)},Ut=function(t){var e=Bt(t,"string");return Mt(e)?e:e+""},Gt=TypeError,Ht=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,qt={f:gt?Ot?function(t,e,r){if(kt(t),e=Ut(e),kt(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Vt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return Ht(t,e,r)}:Ht:function(t,e,r){if(kt(t),e=Ut(e),kt(r),At)try{return Ht(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Gt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Zt=Function.prototype,Yt=gt&&Object.getOwnPropertyDescriptor,$t=V(Zt,"name"),Kt={EXISTS:$t,PROPER:$t&&"something"===function(){}.name,CONFIGURABLE:$t&&(!gt||gt&&Yt(Zt,"name").configurable)},Qt=F(Function.toString);J(k.inspectSource)||(k.inspectSource=function(t){return Qt(t)});var Xt,Jt,te,ee=k.inspectSource,re=O.WeakMap,ne=J(re)&&/native code/.test(String(re)),oe=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ie=gt?function(t,e,r){return qt.f(t,e,oe(1,r))}:function(t,e,r){return t[e]=r,t},ae=I("keys"),ue=function(t){return ae[t]||(ae[t]=$(t))},se={},ce=O.TypeError,fe=O.WeakMap;if(ne||k.state){var le=k.state||(k.state=new fe);le.get=le.get,le.has=le.has,le.set=le.set,Xt=function(t,e){if(le.has(t))throw ce("Object already initialized");return e.facade=t,le.set(t,e),e},Jt=function(t){return le.get(t)||{}},te=function(t){return le.has(t)}}else{var he=ue("state");se[he]=!0,Xt=function(t,e){if(V(t,he))throw ce("Object already initialized");return e.facade=t,ie(t,he,e),e},Jt=function(t){return V(t,he)?t[he]:{}},te=function(t){return V(t,he)}}var pe={set:Xt,get:Jt,has:te,enforce:function(t){return te(t)?Jt(t):Xt(t,{})},getterFor:function(t){return function(e){var r;if(!xt(e)||(r=Jt(e)).type!==t)throw ce("Incompatible receiver, "+t+" required");return r}}},ve=b((function(t){var e=Kt.CONFIGURABLE,r=pe.enforce,n=pe.get,o=Object.defineProperty,i=gt&&!j((function(){return 8!==o((function(){}),"length",{value:8}).length})),a=String(String).split("String"),u=t.exports=function(t,n,u){"Symbol("===String(n).slice(0,7)&&(n="["+String(n).replace(/^Symbol\\(([^)]*)\\)/,"$1")+"]"),u&&u.getter&&(n="get "+n),u&&u.setter&&(n="set "+n),(!V(t,"name")||e&&t.name!==n)&&(gt?o(t,"name",{value:n,configurable:!0}):t.name=n),i&&u&&V(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&V(u,"constructor")&&u.constructor?gt&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=r(t);return V(s,"source")||(s.source=a.join("string"==typeof n?n:"")),t};Function.prototype.toString=u((function(){return J(this)&&n(this).source||ee(this)}),"toString")})),de=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(J(r)&&ve(r,i,n),n.global)o?t[e]=r:T(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:qt.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},ye=vt("toStringTag"),ge=Object,me="Arguments"==D(function(){return arguments}()),xe=yt?D:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ge(t),ye))?r:me?D(e):"Object"==(n=D(e))&&J(e.callee)?"Arguments":n},be=yt?{}.toString:function(){return"[object "+xe(this)+"]"};yt||de(Object.prototype,"toString",be,{unsafe:!0});var we={}.propertyIsEnumerable,Ee=Object.getOwnPropertyDescriptor,Ae={f:Ee&&!we.call({1:2},1)?function(t){var e=Ee(this,t);return!!e&&e.enumerable}:we},Oe=Object,Se=F("".split),Te=j((function(){return!Oe("z").propertyIsEnumerable(0)}))?function(t){return"String"==D(t)?Se(t,""):Oe(t)}:Oe,ke=function(t){return Te(B(t))},Ie=Object.getOwnPropertyDescriptor,je={f:gt?Ie:function(t,e){if(t=ke(t),e=Ut(e),At)try{return Ie(t,e)}catch(t){}if(V(t,e))return oe(!jt(Ae.f,t,e),t[e])}},Pe=Math.ceil,_e=Math.floor,Me=Math.trunc||function(t){var e=+t;return(e>0?_e:Pe)(e)},Le=function(t){var e=+t;return e!=e||0===e?0:Me(e)},Re=Math.max,Ce=Math.min,Ne=function(t,e){var r=Le(t);return r<0?Re(r+e,0):Ce(r,e)},De=Math.min,Fe=function(t){return t>0?De(Le(t),9007199254740991):0},We=function(t){return Fe(t.length)},ze=function(t){return function(e,r,n){var o,i=ke(e),a=We(i),u=Ne(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},Be={includes:ze(!0),indexOf:ze(!1)},Ue=Be.indexOf,Ge=F([].push),He=function(t,e){var r,n=ke(t),o=0,i=[];for(r in n)!V(se,r)&&V(n,r)&&Ge(i,r);for(;e.length>o;)V(n,r=e[o++])&&(~Ue(i,r)||Ge(i,r));return i},Ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qe=Ve.concat("length","prototype"),Ze={f:Object.getOwnPropertyNames||function(t){return He(t,qe)}},Ye={f:Object.getOwnPropertySymbols},$e=F([].concat),Ke=et("Reflect","ownKeys")||function(t){var e=Ze.f(kt(t)),r=Ye.f;return r?$e(e,r(t)):e},Qe=function(t,e,r){for(var n=Ke(e),o=qt.f,i=je.f,a=0;a<n.length;a++){var u=n[a];V(t,u)||r&&V(r,u)||o(t,u,i(e,u))}},Xe=/#|\\.prototype\\./,Je=function(t,e){var r=er[tr(t)];return r==nr||r!=rr&&(J(e)?j(e):!!e)},tr=Je.normalize=function(t){return String(t).replace(Xe,".").toLowerCase()},er=Je.data={},rr=Je.NATIVE="N",nr=Je.POLYFILL="P",or=Je,ir=je.f,ar=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?O:c?O[u]||T(u,{}):(O[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=ir(r,n))&&a.value:r[n],!or(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Qe(i,o)}(t.sham||o&&o.sham)&&ie(i,"sham",!0),de(r,n,i,t)}},ur="process"==D(O.process),sr=String,cr=TypeError,fr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=F(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return kt(r),function(t){if("object"==typeof t||J(t))return t;throw cr("Can't set "+sr(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),lr=qt.f,hr=vt("toStringTag"),pr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!V(t,hr)&&lr(t,hr,{configurable:!0,value:e})},vr=vt("species"),dr=function(t){var e=et(t),r=qt.f;gt&&e&&!e[vr]&&r(e,vr,{configurable:!0,get:function(){return this}})},yr=TypeError,gr=function(t,e){if(Pt(e,t))return t;throw yr("Incorrect invocation")},mr=function(){},xr=[],br=et("Reflect","construct"),wr=/^\\s*(?:class|function)\\b/,Er=F(wr.exec),Ar=!wr.exec(mr),Or=function(t){if(!J(t))return!1;try{return br(mr,xr,t),!0}catch(t){return!1}},Sr=function(t){if(!J(t))return!1;switch(xe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ar||!!Er(wr,ee(t))}catch(t){return!0}};Sr.sham=!0;var Tr,kr,Ir,jr,Pr=!br||j((function(){var t;return Or(Or.call)||!Or(Object)||!Or((function(){t=!0}))||t}))?Sr:Or,_r=TypeError,Mr=function(t){if(Pr(t))return t;throw _r(Rt(t)+" is not a constructor")},Lr=vt("species"),Rr=function(t,e){var r,n=kt(t).constructor;return void 0===n||W(r=kt(n)[Lr])?e:Mr(r)},Cr=Function.prototype,Nr=Cr.apply,Dr=Cr.call,Fr="object"==typeof Reflect&&Reflect.apply||(P?Dr.bind(Nr):function(){return Dr.apply(Nr,arguments)}),Wr=F(F.bind),zr=function(t,e){return Nt(t),void 0===e?t:P?Wr(t,e):function(){return t.apply(e,arguments)}},Br=et("document","documentElement"),Ur=F([].slice),Gr=TypeError,Hr=function(t,e){if(t<e)throw Gr("Not enough arguments");return t},Vr=/(?:ipad|iphone|ipod).*applewebkit/i.test(rt),qr=O.setImmediate,Zr=O.clearImmediate,Yr=O.process,$r=O.Dispatch,Kr=O.Function,Qr=O.MessageChannel,Xr=O.String,Jr=0,tn={};try{Tr=O.location}catch(t){}var en=function(t){if(V(tn,t)){var e=tn[t];delete tn[t],e()}},rn=function(t){return function(){en(t)}},nn=function(t){en(t.data)},on=function(t){O.postMessage(Xr(t),Tr.protocol+"//"+Tr.host)};qr&&Zr||(qr=function(t){Hr(arguments.length,1);var e=J(t)?t:Kr(t),r=Ur(arguments,1);return tn[++Jr]=function(){Fr(e,void 0,r)},kr(Jr),Jr},Zr=function(t){delete tn[t]},ur?kr=function(t){Yr.nextTick(rn(t))}:$r&&$r.now?kr=function(t){$r.now(rn(t))}:Qr&&!Vr?(jr=(Ir=new Qr).port2,Ir.port1.onmessage=nn,kr=zr(jr.postMessage,jr)):O.addEventListener&&J(O.postMessage)&&!O.importScripts&&Tr&&"file:"!==Tr.protocol&&!j(on)?(kr=on,O.addEventListener("message",nn,!1)):kr="onreadystatechange"in Et("script")?function(t){Br.appendChild(Et("script")).onreadystatechange=function(){Br.removeChild(this),en(t)}}:function(t){setTimeout(rn(t),0)});var an,un,sn,cn,fn,ln,hn,pn,vn={set:qr,clear:Zr},dn=/ipad|iphone|ipod/i.test(rt)&&void 0!==O.Pebble,yn=/web0s(?!.*chrome)/i.test(rt),gn=je.f,mn=vn.set,xn=O.MutationObserver||O.WebKitMutationObserver,bn=O.document,wn=O.process,En=O.Promise,An=gn(O,"queueMicrotask"),On=An&&An.value;On||(an=function(){var t,e;for(ur&&(t=wn.domain)&&t.exit();un;){e=un.fn,un=un.next;try{e()}catch(t){throw un?cn():sn=void 0,t}}sn=void 0,t&&t.enter()},Vr||ur||yn||!xn||!bn?!dn&&En&&En.resolve?((hn=En.resolve(void 0)).constructor=En,pn=zr(hn.then,hn),cn=function(){pn(an)}):ur?cn=function(){wn.nextTick(an)}:(mn=zr(mn,O),cn=function(){mn(an)}):(fn=!0,ln=bn.createTextNode(""),new xn(an).observe(ln,{characterData:!0}),cn=function(){ln.data=fn=!fn}));var Sn=On||function(t){var e={fn:t,next:void 0};sn&&(sn.next=e),un||(un=e,cn()),sn=e},Tn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},kn=function(){this.head=null,this.tail=null};kn.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var In,jn,Pn,_n=kn,Mn=O.Promise,Ln="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Rn=!Ln&&!ur&&"object"==typeof window&&"object"==typeof document,Cn=(Mn&&Mn.prototype,vt("species")),Nn=!1,Dn=J(O.PromiseRejectionEvent),Fn={CONSTRUCTOR:or("Promise",(function(){var t=ee(Mn),e=t!==String(Mn);if(!e&&66===ut)return!0;if(!ut||ut<51||!/native code/.test(t)){var r=new Mn((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Cn]=n,!(Nn=r.then((function(){}))instanceof n))return!0}return!e&&(Rn||Ln)&&!Dn})),REJECTION_EVENT:Dn,SUBCLASSING:Nn},Wn=TypeError,zn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Wn("Bad Promise constructor");e=t,r=n})),this.resolve=Nt(e),this.reject=Nt(r)},Bn={f:function(t){return new zn(t)}},Un=vn.set,Gn=Fn.CONSTRUCTOR,Hn=Fn.REJECTION_EVENT,Vn=Fn.SUBCLASSING,qn=pe.getterFor("Promise"),Zn=pe.set,Yn=Mn&&Mn.prototype,$n=Mn,Kn=Yn,Qn=O.TypeError,Xn=O.document,Jn=O.process,to=Bn.f,eo=to,ro=!!(Xn&&Xn.createEvent&&O.dispatchEvent),no=function(t){var e;return!(!xt(t)||!J(e=t.then))&&e},oo=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&co(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Qn("Promise-chain cycle")):(n=no(r))?jt(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},io=function(t,e){t.notified||(t.notified=!0,Sn((function(){for(var r,n=t.reactions;r=n.get();)oo(r,t);t.notified=!1,e&&!t.rejection&&uo(t)})))},ao=function(t,e,r){var n,o;ro?((n=Xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),O.dispatchEvent(n)):n={promise:e,reason:r},!Hn&&(o=O["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){var r=O.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)},uo=function(t){jt(Un,O,(function(){var e,r=t.facade,n=t.value;if(so(t)&&(e=Tn((function(){ur?Jn.emit("unhandledRejection",n,r):ao("unhandledrejection",r,n)})),t.rejection=ur||so(t)?2:1,e.error))throw e.value}))},so=function(t){return 1!==t.rejection&&!t.parent},co=function(t){jt(Un,O,(function(){var e=t.facade;ur?Jn.emit("rejectionHandled",e):ao("rejectionhandled",e,t.value)}))},fo=function(t,e,r){return function(n){t(e,n,r)}},lo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,io(t,!0))},ho=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Qn("Promise can't be resolved itself");var n=no(e);n?Sn((function(){var r={done:!1};try{jt(n,e,fo(ho,r,t),fo(lo,r,t))}catch(e){lo(r,e,t)}})):(t.value=e,t.state=1,io(t,!1))}catch(e){lo({done:!1},e,t)}}};if(Gn&&(Kn=($n=function(t){gr(this,Kn),Nt(t),jt(In,this);var e=qn(this);try{t(fo(ho,e),fo(lo,e))}catch(t){lo(e,t)}}).prototype,(In=function(t){Zn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new _n,rejection:!1,state:0,value:void 0})}).prototype=de(Kn,"then",(function(t,e){var r=qn(this),n=to(Rr(this,$n));return r.parent=!0,n.ok=!J(t)||t,n.fail=J(e)&&e,n.domain=ur?Jn.domain:void 0,0==r.state?r.reactions.add(n):Sn((function(){oo(n,r)})),n.promise})),jn=function(){var t=new In,e=qn(t);this.promise=t,this.resolve=fo(ho,e),this.reject=fo(lo,e)},Bn.f=to=function(t){return t===$n||void 0===t?new jn(t):eo(t)},J(Mn)&&Yn!==Object.prototype)){Pn=Yn.then,Vn||de(Yn,"then",(function(t,e){var r=this;return new $n((function(t,e){jt(Pn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Yn.constructor}catch(t){}fr&&fr(Yn,Kn)}ar({global:!0,constructor:!0,wrap:!0,forced:Gn},{Promise:$n}),pr($n,"Promise",!1),dr("Promise");var po={},vo=vt("iterator"),yo=Array.prototype,go=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},mo=vt("iterator"),xo=function(t){if(!W(t))return Dt(t,mo)||Dt(t,"@@iterator")||po[xe(t)]},bo=TypeError,wo=function(t,e){var r=arguments.length<2?xo(t):e;if(Nt(r))return kt(jt(r,t));throw bo(Rt(t)+" is not iterable")},Eo=function(t,e,r){var n,o;kt(t);try{if(!(n=Dt(t,"return"))){if("throw"===e)throw r;return r}n=jt(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return kt(n),r},Ao=TypeError,Oo=function(t,e){this.stopped=t,this.result=e},So=Oo.prototype,To=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=zr(e,f),y=function(t){return n&&Eo(n,"normal",t),new Oo(!0,t)},g=function(t){return l?(kt(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=xo(t)))throw Ao(Rt(t)+" is not iterable");if(go(o)){for(i=0,a=We(t);a>i;i++)if((u=g(t[i]))&&Pt(So,u))return u;return new Oo(!1)}n=wo(t,o)}for(s=h?t.next:n.next;!(c=jt(s,n)).done;){try{u=g(c.value)}catch(t){Eo(n,"throw",t)}if("object"==typeof u&&u&&Pt(So,u))return u}return new Oo(!1)},ko=vt("iterator"),Io=!1;try{var jo=0,Po={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Po[ko]=function(){return this},Array.from(Po,(function(){throw 2}))}catch(t){}var _o=function(t,e){if(!e&&!Io)return!1;var r=!1;try{var n={};n[ko]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Mo=Fn.CONSTRUCTOR||!_o((function(t){Mn.all(t).then(void 0,(function(){}))}));ar({target:"Promise",stat:!0,forced:Mo},{all:function(t){var e=this,r=Bn.f(e),n=r.resolve,o=r.reject,i=Tn((function(){var r=Nt(e.resolve),i=[],a=0,u=1;To(t,(function(t){var s=a++,c=!1;u++,jt(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Lo=Fn.CONSTRUCTOR,Ro=Mn&&Mn.prototype;if(ar({target:"Promise",proto:!0,forced:Lo,real:!0},{catch:function(t){return this.then(void 0,t)}}),J(Mn)){var Co=et("Promise").prototype.catch;Ro.catch!==Co&&de(Ro,"catch",Co,{unsafe:!0})}ar({target:"Promise",stat:!0,forced:Mo},{race:function(t){var e=this,r=Bn.f(e),n=r.reject,o=Tn((function(){var o=Nt(e.resolve);To(t,(function(t){jt(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ar({target:"Promise",stat:!0,forced:Fn.CONSTRUCTOR},{reject:function(t){var e=Bn.f(this);return jt(e.reject,void 0,t),e.promise}});var No=Fn.CONSTRUCTOR;et("Promise");function Do(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ar({target:"Promise",stat:!0,forced:No},{resolve:function(t){return function(t,e){if(kt(t),xt(e)&&e.constructor===t)return e;var r=Bn.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Fo="undefined"!=typeof window&&void 0!==window.orientation,Wo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),zo=new Map;function Bo(t){Do(t.source&&!t.url||!t.source&&t.url);var e=zo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uo((e=t,"try {\\n  importScripts('"+e+"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),zo.set(t.url,e)),t.source&&(e=Uo(t.source),zo.set(t.source,e))),Do(e),e}function Uo(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Go(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Ho(t))n.add(t);else if(Ho(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Go(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Ho(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Vo=function(){},qo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Do(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=Vo,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=Vo,this.onError=Vo,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Go(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Bo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Zo=self&&self.__assign||function(){return(Zo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yo=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$o=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Zo(Zo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),Yo(this,void 0,void 0,(function(){var n,o=this;return $o(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Yo(this,void 0,void 0,(function(){var t,e,r;return $o(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new Wo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new qo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Fo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Qo=self&&self.__assign||function(){return(Qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ti=(function(){function t(t){this.workerPools=new Map,this.props=Qo({},Jo),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return qo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Xo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Qo(Qo({},this.props),t);try{for(var n=Xo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Ko({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ei=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ti.get(t);e||(e=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ti.get(t);ti.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Go(e);self.postMessage(r,n)}},t}();function ri(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var ni,oi,ii=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ai=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},ui=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},si=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},ci=0;function fi(t,e){var r=this;if("undefined"!=typeof self){var n={process:li};ei.onmessage=function(o,i){return ai(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return ui(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ei.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");ni=new ii,oi=i.options||{},a=e(ni,oi,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=si(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ei.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ei.postMessage("done",{}),[3,18];case 16:return ni.push(i.input),[3,18];case 17:return ni.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ei.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function li(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=ci++,i=function(t,e){if(e.id===o)switch(t){case"done":ei.removeEventListener(i),r(e.result);break;case"error":ei.removeEventListener(i),n(e.error)}};ei.addEventListener(i);var a={id:o,input:t,options:e};ei.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pi=Et("span").classList,vi=pi&&pi.constructor&&pi.constructor.prototype,di=vi===Object.prototype?void 0:vi,yi=Array.isArray||function(t){return"Array"==D(t)},gi=vt("species"),mi=Array,xi=function(t,e){return new(function(t){var e;return yi(t)&&(e=t.constructor,(Pr(e)&&(e===mi||yi(e.prototype))||xt(e)&&null===(e=e[gi]))&&(e=void 0)),void 0===e?mi:e}(t))(0===e?0:e)},bi=F([].push),wi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=G(s),d=Te(v),y=zr(c,f),g=We(d),m=0,x=l||xi,b=e?x(s,g):r||a?x(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)b[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:bi(b,h)}else switch(t){case 4:return!1;case 7:bi(b,h)}return i?-1:n||o?o:b}},Ei={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterReject:wi(7)},Ai=function(t,e){var r=[][t];return!!r&&j((function(){r.call(null,e||function(){return 1},1)}))},Oi=Ei.forEach,Si=Ai("forEach")?[].forEach:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)},Ti=function(t){if(t&&t.forEach!==Si)try{ie(t,"forEach",Si)}catch(e){t.forEach=Si}};for(var ki in hi)hi[ki]&&Ti(O[ki]&&O[ki].prototype);Ti(di);var Ii=function(t,e,r){var n=Ut(e);n in t?qt.f(t,n,oe(0,r)):t[n]=r},ji=vt("species"),Pi=function(t){return ut>=51||!j((function(){var e=[];return(e.constructor={})[ji]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_i=Pi("slice"),Mi=vt("species"),Li=Array,Ri=Math.max;ar({target:"Array",proto:!0,forced:!_i},{slice:function(t,e){var r,n,o,i=ke(this),a=We(i),u=Ne(t,a),s=Ne(void 0===e?a:e,a);if(yi(i)&&(r=i.constructor,(Pr(r)&&(r===Li||yi(r.prototype))||xt(r)&&null===(r=r[Mi]))&&(r=void 0),r===Li||void 0===r))return Ur(i,u,s);for(n=new(void 0===r?Li:r)(Ri(s-u,0)),o=0;u<s;u++,o++)u in i&&Ii(n,o,i[u]);return n.length=o,n}});var Ci=Kt.EXISTS,Ni=qt.f,Di=Function.prototype,Fi=F(Di.toString),Wi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,zi=F(Wi.exec);gt&&!Ci&&Ni(Di,"name",{configurable:!0,get:function(){try{return zi(Wi,Fi(this))[1]}catch(t){return""}}});var Bi=Ei.map,Ui=Pi("map");ar({target:"Array",proto:!0,forced:!Ui},{map:function(t){return Bi(this,t,arguments.length>1?arguments[1]:void 0)}});var Gi,Hi=Object.keys||function(t){return He(t,Ve)},Vi={f:gt&&!Ot?Object.defineProperties:function(t,e){kt(t);for(var r,n=ke(e),o=Hi(e),i=o.length,a=0;i>a;)qt.f(t,r=o[a++],n[r]);return t}},qi=ue("IE_PROTO"),Zi=function(){},Yi=function(t){return"<script>"+t+"<\\/script>"},$i=function(t){t.write(Yi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Ki=function(){try{Gi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ki="undefined"!=typeof document?document.domain&&Gi?$i(Gi):((e=Et("iframe")).style.display="none",Br.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Yi("document.F=Object")),t.close(),t.F):$i(Gi);for(var r=Ve.length;r--;)delete Ki.prototype[Ve[r]];return Ki()};se[qi]=!0;var Qi=Object.create||function(t,e){var r;return null!==t?(Zi.prototype=kt(t),r=new Zi,Zi.prototype=null,r[qi]=t):r=Ki(),void 0===e?r:Vi.f(r,e)},Xi=qt.f,Ji=vt("unscopables"),ta=Array.prototype;null==ta[Ji]&&Xi(ta,Ji,{configurable:!0,value:Qi(null)});var ea,ra,na,oa=function(t){ta[Ji][t]=!0},ia=!j((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),aa=ue("IE_PROTO"),ua=Object,sa=ua.prototype,ca=ia?ua.getPrototypeOf:function(t){var e=G(t);if(V(e,aa))return e[aa];var r=e.constructor;return J(r)&&e instanceof r?r.prototype:e instanceof ua?sa:null},fa=vt("iterator"),la=!1;[].keys&&("next"in(na=[].keys())?(ra=ca(ca(na)))!==Object.prototype&&(ea=ra):la=!0),(!xt(ea)||j((function(){var t={};return ea[fa].call(t)!==t})))&&(ea={}),J(ea[fa])||de(ea,fa,(function(){return this}));var ha={IteratorPrototype:ea,BUGGY_SAFARI_ITERATORS:la},pa=ha.IteratorPrototype,va=function(){return this},da=Kt.PROPER,ya=Kt.CONFIGURABLE,ga=ha.IteratorPrototype,ma=ha.BUGGY_SAFARI_ITERATORS,xa=vt("iterator"),ba=function(){return this},wa=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=Qi(pa,{next:oe(+!n,r)}),pr(t,o,!1),po[o]=va}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!ma&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[xa]||p["@@iterator"]||o&&p[o],d=!ma&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=ca(y.call(new t)))!==Object.prototype&&u.next&&(ca(u)!==ga&&(fr?fr(u,ga):J(u[xa])||de(u,xa,ba)),pr(u,l,!0)),da&&"values"==o&&v&&"values"!==v.name&&(ya?ie(p,"name","values"):(h=!0,d=function(){return jt(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(ma||h||!(c in p))&&de(p,c,s[c]);else ar({target:e,proto:!0,forced:ma||h},s);return p[xa]!==d&&de(p,xa,d,{name:o}),po[e]=d,s},Ea=function(t,e){return{value:t,done:e}},Aa=qt.f,Oa=pe.set,Sa=pe.getterFor("Array Iterator"),Ta=wa(Array,"Array",(function(t,e){Oa(this,{type:"Array Iterator",target:ke(t),index:0,kind:e})}),(function(){var t=Sa(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Ea(void 0,!0)):Ea("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),ka=po.Arguments=po.Array;if(oa("keys"),oa("values"),oa("entries"),gt&&"values"!==ka.name)try{Aa(ka,"name",{value:"values"})}catch(t){}var Ia,ja,Pa,_a="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ma=qt.f,La=pe.enforce,Ra=pe.get,Ca=O.Int8Array,Na=Ca&&Ca.prototype,Da=O.Uint8ClampedArray,Fa=Da&&Da.prototype,Wa=Ca&&ca(Ca),za=Na&&ca(Na),Ba=Object.prototype,Ua=O.TypeError,Ga=vt("toStringTag"),Ha=$("TYPED_ARRAY_TAG"),Va=_a&&!!fr&&"Opera"!==xe(O.opera),qa=!1,Za={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ya={BigInt64Array:8,BigUint64Array:8},$a=function(t){var e=ca(t);if(xt(e)){var r=Ra(e);return r&&V(r,"TypedArrayConstructor")?r.TypedArrayConstructor:$a(e)}},Ka=function(t){if(!xt(t))return!1;var e=xe(t);return V(Za,e)||V(Ya,e)};for(Ia in Za)(Pa=(ja=O[Ia])&&ja.prototype)?La(Pa).TypedArrayConstructor=ja:Va=!1;for(Ia in Ya)(Pa=(ja=O[Ia])&&ja.prototype)&&(La(Pa).TypedArrayConstructor=ja);if((!Va||!J(Wa)||Wa===Function.prototype)&&(Wa=function(){throw Ua("Incorrect invocation")},Va))for(Ia in Za)O[Ia]&&fr(O[Ia],Wa);if((!Va||!za||za===Ba)&&(za=Wa.prototype,Va))for(Ia in Za)O[Ia]&&fr(O[Ia].prototype,za);if(Va&&ca(Fa)!==za&&fr(Fa,za),gt&&!V(za,Ga))for(Ia in qa=!0,Ma(za,Ga,{get:function(){return xt(this)?this[Ha]:void 0}}),Za)O[Ia]&&ie(O[Ia],Ha,Ia);var Qa={NATIVE_ARRAY_BUFFER_VIEWS:Va,TYPED_ARRAY_TAG:qa&&Ha,aTypedArray:function(t){if(Ka(t))return t;throw Ua("Target is not a typed array")},aTypedArrayConstructor:function(t){if(J(t)&&(!fr||Pt(Wa,t)))return t;throw Ua(Rt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(gt){if(r)for(var o in Za){var i=O[o];if(i&&V(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}za[t]&&!r||de(za,t,r?e:Va&&Na[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(gt){if(fr){if(r)for(n in Za)if((o=O[n])&&V(o,t))try{delete o[t]}catch(t){}if(Wa[t]&&!r)return;try{return de(Wa,t,r?e:Va&&Wa[t]||e)}catch(t){}}for(n in Za)!(o=O[n])||o[t]&&!r||de(o,t,e)}},getTypedArrayConstructor:$a,isView:function(t){if(!xt(t))return!1;var e=xe(t);return"DataView"===e||V(Za,e)||V(Ya,e)},isTypedArray:Ka,TypedArray:Wa,TypedArrayPrototype:za},Xa=Qa.NATIVE_ARRAY_BUFFER_VIEWS,Ja=O.ArrayBuffer,tu=O.Int8Array,eu=!Xa||!j((function(){tu(1)}))||!j((function(){new tu(-1)}))||!_o((function(t){new tu,new tu(null),new tu(1.5),new tu(t)}),!0)||j((function(){return 1!==new tu(new Ja(2),1,void 0).length})),ru=function(t,e,r){for(var n in e)de(t,n,e[n],r);return t},nu=RangeError,ou=function(t){if(void 0===t)return 0;var e=Le(t),r=Fe(e);if(e!==r)throw nu("Wrong length or index");return r},iu=Array,au=Math.abs,uu=Math.pow,su=Math.floor,cu=Math.log,fu=Math.LN2,lu=function(t,e,r){var n,o,i,a=iu(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?uu(2,-24)-uu(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=au(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=su(cu(t)/fu),t*(i=uu(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*uu(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*uu(2,e),n+=c):(o=t*uu(2,c-1)*uu(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},hu=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=uu(2,e),f-=a}return(c?-1:1)*r*uu(2,f-e)},pu=function(t){for(var e=G(this),r=We(e),n=arguments.length,o=Ne(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ne(i,r);a>o;)e[o++]=t;return e},vu=Array,du=Math.max,yu=function(t,e,r){for(var n=We(t),o=Ne(e,n),i=Ne(void 0===r?n:r,n),a=vu(du(i-o,0)),u=0;o<i;o++,u++)Ii(a,u,t[o]);return a.length=u,a},gu=Ze.f,mu=qt.f,xu=Kt.PROPER,bu=Kt.CONFIGURABLE,wu=pe.get,Eu=pe.set,Au=O.ArrayBuffer,Ou=Au,Su=Ou&&Ou.prototype,Tu=O.DataView,ku=Tu&&Tu.prototype,Iu=Object.prototype,ju=O.Array,Pu=O.RangeError,_u=F(pu),Mu=F([].reverse),Lu=lu,Ru=hu,Cu=function(t){return[255&t]},Nu=function(t){return[255&t,t>>8&255]},Du=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Fu=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Wu=function(t){return Lu(t,23,4)},zu=function(t){return Lu(t,52,8)},Bu=function(t,e){mu(t.prototype,e,{get:function(){return wu(this)[e]}})},Uu=function(t,e,r,n){var o=ou(r),i=wu(t);if(o+e>i.byteLength)throw Pu("Wrong index");var a=wu(i.buffer).bytes,u=o+i.byteOffset,s=yu(a,u,u+e);return n?s:Mu(s)},Gu=function(t,e,r,n,o,i){var a=ou(r),u=wu(t);if(a+e>u.byteLength)throw Pu("Wrong index");for(var s=wu(u.buffer).bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(_a){var Hu=xu&&"ArrayBuffer"!==Au.name;if(j((function(){Au(1)}))&&j((function(){new Au(-1)}))&&!j((function(){return new Au,new Au(1.5),new Au(NaN),1!=Au.length||Hu&&!bu})))Hu&&bu&&ie(Au,"name","ArrayBuffer");else{(Ou=function(t){return gr(this,Su),new Au(ou(t))}).prototype=Su;for(var Vu,qu=gu(Au),Zu=0;qu.length>Zu;)(Vu=qu[Zu++])in Ou||ie(Ou,Vu,Au[Vu]);Su.constructor=Ou}fr&&ca(ku)!==Iu&&fr(ku,Iu);var Yu=new Tu(new Ou(2)),$u=F(ku.setInt8);Yu.setInt8(0,2147483648),Yu.setInt8(1,2147483649),!Yu.getInt8(0)&&Yu.getInt8(1)||ru(ku,{setInt8:function(t,e){$u(this,t,e<<24>>24)},setUint8:function(t,e){$u(this,t,e<<24>>24)}},{unsafe:!0})}else Su=(Ou=function(t){gr(this,Su);var e=ou(t);Eu(this,{bytes:_u(ju(e),0),byteLength:e}),gt||(this.byteLength=e)}).prototype,ku=(Tu=function(t,e,r){gr(this,ku),gr(t,Su);var n=wu(t).byteLength,o=Le(e);if(o<0||o>n)throw Pu("Wrong offset");if(o+(r=void 0===r?n-o:Fe(r))>n)throw Pu("Wrong length");Eu(this,{buffer:t,byteLength:r,byteOffset:o}),gt||(this.buffer=t,this.byteLength=r,this.byteOffset=o)}).prototype,gt&&(Bu(Ou,"byteLength"),Bu(Tu,"buffer"),Bu(Tu,"byteLength"),Bu(Tu,"byteOffset")),ru(ku,{getInt8:function(t){return Uu(this,1,t)[0]<<24>>24},getUint8:function(t){return Uu(this,1,t)[0]},getInt16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Ru(Uu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Ru(Uu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Gu(this,1,t,Cu,e)},setUint8:function(t,e){Gu(this,1,t,Cu,e)},setInt16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Gu(this,4,t,Wu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Gu(this,8,t,zu,e,arguments.length>2?arguments[2]:void 0)}});pr(Ou,"ArrayBuffer"),pr(Tu,"DataView");var Ku={ArrayBuffer:Ou,DataView:Tu},Qu=Math.floor,Xu=Number.isInteger||function(t){return!xt(t)&&isFinite(t)&&Qu(t)===t},Ju=RangeError,ts=RangeError,es=function(t,e){var r=function(t){var e=Le(t);if(e<0)throw Ju("The argument can't be less than 0");return e}(t);if(r%e)throw ts("Wrong offset");return r},rs=F("".slice),ns=function(t){return"Big"===rs(xe(t),0,3)},os=TypeError,is=function(t){var e=Bt(t,"number");if("number"==typeof e)throw os("Can't convert number to bigint");return BigInt(e)},as=Qa.aTypedArrayConstructor,us=function(t){var e,r,n,o,i,a,u,s,c=Mr(this),f=G(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=xo(f);if(v&&!go(v))for(s=(u=wo(f,v)).next,f=[];!(a=jt(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=zr(h,arguments[2])),r=We(f),n=new(as(c))(r),o=ns(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?is(i):+i;return n},ss=function(t,e,r){var n,o;return fr&&J(n=e.constructor)&&n!==r&&xt(o=n.prototype)&&o!==r.prototype&&fr(t,o),t},cs=b((function(t){var e=Ze.f,r=Ei.forEach,n=pe.get,o=pe.set,i=pe.enforce,a=qt.f,u=je.f,s=Math.round,c=O.RangeError,f=Ku.ArrayBuffer,l=f.prototype,h=Ku.DataView,p=Qa.NATIVE_ARRAY_BUFFER_VIEWS,v=Qa.TYPED_ARRAY_TAG,d=Qa.TypedArray,y=Qa.TypedArrayPrototype,g=Qa.aTypedArrayConstructor,m=Qa.isTypedArray,x=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},b=function(t,e){a(t,e,{get:function(){return n(this)[e]}})},w=function(t){var e;return Pt(l,t)||"ArrayBuffer"==(e=xe(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!Mt(e)&&e in t&&Xu(+e)&&e>=0},A=function(t,e){return e=Ut(e),E(t,e)?oe(2,t[e]):u(t,e)},S=function(t,e,r){return e=Ut(e),!(E(t,e)&&xt(r)&&V(r,"value"))||V(r,"get")||V(r,"set")||r.configurable||V(r,"writable")&&!r.writable||V(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};gt?(p||(je.f=A,qt.f=S,b(y,"buffer"),b(y,"byteOffset"),b(y,"byteLength"),b(y,"length")),ar({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:S}),t.exports=function(t,u,l){var g=t.match(/\\d+$/)[0]/8,b=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,S=O[b],T=S,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?eu&&(T=u((function(t,e,r,n){return gr(t,k),ss(xt(e)?w(e)?void 0!==n?new S(e,es(r,g),n):void 0!==r?new S(e,es(r,g)):new S(e):m(e)?x(T,e):jt(us,T,e):new S(ou(e)),t,T)})),fr&&fr(T,d),r(e(S),(function(t){t in T||ie(T,t,S[t])})),T.prototype=k):(T=u((function(t,e,r,n){gr(t,k);var i,a,u,s=0,l=0;if(xt(e)){if(!w(e))return m(e)?x(T,e):jt(us,T,e);i=e,l=es(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=Fe(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=ou(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),fr&&fr(T,d),k=T.prototype=Qi(y)),k.constructor!==T&&ie(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&ie(k,v,b);var P=T!=S;I[b]=T,ar({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||ie(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||ie(k,"BYTES_PER_ELEMENT",g),dr(b)}):t.exports=function(){}}));cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var fs=TypeError,ls=function(t,e){if(!delete t[e])throw fs("Cannot delete property "+Rt(e)+" of "+Rt(t))},hs=Math.min,ps=F([].copyWithin||function(t,e){var r=G(this),n=We(r),o=Ne(t,n),i=Ne(e,n),a=arguments.length>2?arguments[2]:void 0,u=hs((void 0===a?n:Ne(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:ls(r,o),o+=s,i+=s;return r}),vs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("copyWithin",(function(t,e){return ps(vs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ds=Ei.every,ys=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("every",(function(t){return ds(ys(this),t,arguments.length>1?arguments[1]:void 0)}));var gs=Qa.aTypedArray,ms=Qa.exportTypedArrayMethod,xs=F("".slice);ms("fill",(function(t){var e=arguments.length;gs(this);var r="Big"===xs(xe(this),0,3)?is(t):+t;return jt(pu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),j((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var bs=Qa.aTypedArrayConstructor,ws=Qa.getTypedArrayConstructor,Es=function(t){return bs(Rr(t,ws(t)))},As=function(t,e){return function(t,e){for(var r=0,n=We(e),o=new t(n);n>r;)o[r]=e[r++];return o}(Es(t),e)},Os=Ei.filter,Ss=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("filter",(function(t){var e=Os(Ss(this),t,arguments.length>1?arguments[1]:void 0);return As(this,e)}));var Ts=Ei.find,ks=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("find",(function(t){return Ts(ks(this),t,arguments.length>1?arguments[1]:void 0)}));var Is=Ei.findIndex,js=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("findIndex",(function(t){return Is(js(this),t,arguments.length>1?arguments[1]:void 0)}));var Ps=Ei.forEach,_s=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("forEach",(function(t){Ps(_s(this),t,arguments.length>1?arguments[1]:void 0)}));var Ms=Be.includes,Ls=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("includes",(function(t){return Ms(Ls(this),t,arguments.length>1?arguments[1]:void 0)}));var Rs=Be.indexOf,Cs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("indexOf",(function(t){return Rs(Cs(this),t,arguments.length>1?arguments[1]:void 0)}));var Ns=vt("iterator"),Ds=O.Uint8Array,Fs=F(Ta.values),Ws=F(Ta.keys),zs=F(Ta.entries),Bs=Qa.aTypedArray,Us=Qa.exportTypedArrayMethod,Gs=Ds&&Ds.prototype,Hs=!j((function(){Gs[Ns].call([1])})),Vs=!!Gs&&Gs.values&&Gs[Ns]===Gs.values&&"values"===Gs.values.name,qs=function(){return Fs(Bs(this))};Us("entries",(function(){return zs(Bs(this))}),Hs),Us("keys",(function(){return Ws(Bs(this))}),Hs),Us("values",qs,Hs||!Vs,{name:"values"}),Us(Ns,qs,Hs||!Vs,{name:"values"});var Zs=Qa.aTypedArray,Ys=Qa.exportTypedArrayMethod,$s=F([].join);Ys("join",(function(t){return $s(Zs(this),t)}));var Ks=Math.min,Qs=[].lastIndexOf,Xs=!!Qs&&1/[1].lastIndexOf(1,-0)<0,Js=Ai("lastIndexOf"),tc=Xs||!Js?function(t){if(Xs)return Fr(Qs,this,arguments)||0;var e=ke(this),r=We(e),n=r-1;for(arguments.length>1&&(n=Ks(n,Le(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Qs,ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Fr(tc,ec(this),e>1?[t,arguments[1]]:[t])}));var rc=Ei.map,nc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("map",(function(t){return rc(nc(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(Es(t))(e)}))}));var oc=TypeError,ic=function(t){return function(e,r,n,o){Nt(r);var i=G(e),a=Te(i),u=We(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw oc("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},ac={left:ic(!1),right:ic(!0)},uc=ac.left,sc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return uc(sc(this),t,e,e>1?arguments[1]:void 0)}));var cc=ac.right,fc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return cc(fc(this),t,e,e>1?arguments[1]:void 0)}));var lc=Qa.aTypedArray,hc=Qa.exportTypedArrayMethod,pc=Math.floor;hc("reverse",(function(){for(var t,e=lc(this).length,r=pc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var vc=O.RangeError,dc=O.Int8Array,yc=dc&&dc.prototype,gc=yc&&yc.set,mc=Qa.aTypedArray,xc=Qa.exportTypedArrayMethod,bc=!j((function(){var t=new Uint8ClampedArray(2);return jt(gc,t,{length:1,0:3},1),3!==t[1]})),wc=bc&&Qa.NATIVE_ARRAY_BUFFER_VIEWS&&j((function(){var t=new dc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));xc("set",(function(t){mc(this);var e=es(arguments.length>1?arguments[1]:void 0,1),r=G(t);if(bc)return jt(gc,this,r,e);var n=this.length,o=We(r),i=0;if(o+e>n)throw vc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!bc||wc);var Ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Ur(Ec(this),t,e),n=Es(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),j((function(){new Int8Array(1).slice()})));var Ac=Ei.some,Oc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("some",(function(t){return Ac(Oc(this),t,arguments.length>1?arguments[1]:void 0)}));var Sc=Math.floor,Tc=function(t,e){var r=t.length,n=Sc(r/2);return r<8?kc(t,e):Ic(t,Tc(yu(t,0,n),e),Tc(yu(t,n),e),e)},kc=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Ic=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},jc=Tc,Pc=rt.match(/firefox\\/(\\d+)/i),_c=!!Pc&&+Pc[1],Mc=/MSIE|Trident/.test(rt),Lc=rt.match(/AppleWebKit\\/(\\d+)\\./),Rc=!!Lc&&+Lc[1],Cc=Qa.aTypedArray,Nc=Qa.exportTypedArrayMethod,Dc=O.Uint16Array,Fc=Dc&&F(Dc.prototype.sort),Wc=!(!Fc||j((function(){Fc(new Dc(2),null)}))&&j((function(){Fc(new Dc(2),{})}))),zc=!!Fc&&!j((function(){if(ut)return ut<74;if(_c)return _c<67;if(Mc)return!0;if(Rc)return Rc<602;var t,e,r=new Dc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Fc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Nc("sort",(function(t){return void 0!==t&&Nt(t),zc?Fc(this,t):jc(Cc(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!zc||Wc);var Bc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("subarray",(function(t,e){var r=Bc(this),n=r.length,o=Ne(t,n);return new(Es(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,Fe((void 0===e?n:Ne(e,n))-o))}));var Uc=O.Int8Array,Gc=Qa.aTypedArray,Hc=Qa.exportTypedArrayMethod,Vc=[].toLocaleString,qc=!!Uc&&j((function(){Vc.call(new Uc(1))}));Hc("toLocaleString",(function(){return Fr(Vc,qc?Ur(Gc(this)):Gc(this),Ur(arguments))}),j((function(){return[1,2].toLocaleString()!=new Uc([1,2]).toLocaleString()}))||!j((function(){Uc.prototype.toLocaleString.call([1,2])})));var Zc=Qa.exportTypedArrayMethod,Yc=O.Uint8Array,$c=Yc&&Yc.prototype||{},Kc=[].toString,Qc=F([].join);j((function(){Kc.call({})}))&&(Kc=function(){return Qc(this)});var Xc=$c.toString!=Kc;Zc("toString",Kc,Xc);var Jc,tf,ef=String,rf=function(t){if("Symbol"===xe(t))throw TypeError("Cannot convert a Symbol value to a string");return ef(t)},nf=function(){var t=kt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},of=O.RegExp,af=j((function(){var t=of("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),uf=af||j((function(){return!of("a","y").sticky})),sf={BROKEN_CARET:af||j((function(){var t=of("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:uf,UNSUPPORTED_Y:af},cf=O.RegExp,ff=j((function(){var t=cf(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),lf=O.RegExp,hf=j((function(){var t=lf("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pf=pe.get,vf=I("native-string-replace",String.prototype.replace),df=RegExp.prototype.exec,yf=df,gf=F("".charAt),mf=F("".indexOf),xf=F("".replace),bf=F("".slice),wf=(tf=/b*/g,jt(df,Jc=/a/,"a"),jt(df,tf,"a"),0!==Jc.lastIndex||0!==tf.lastIndex),Ef=sf.BROKEN_CARET,Af=void 0!==/()??/.exec("")[1];(wf||Af||Ef||ff||hf)&&(yf=function(t){var e,r,n,o,i,a,u,s=this,c=pf(s),f=rf(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=jt(yf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=Ef&&s.sticky,v=jt(nf,s),d=s.source,y=0,g=f;if(p&&(v=xf(v,"y",""),-1===mf(v,"g")&&(v+="g"),g=bf(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==gf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),Af&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),wf&&(n=s.lastIndex),o=jt(df,p?r:s,g),p?o?(o.input=bf(o.input,y),o[0]=bf(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:wf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),Af&&o&&o.length>1&&jt(vf,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Qi(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var Of=yf;ar({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Sf,Tf=vt("species"),kf=RegExp.prototype,If=function(t,e,r,n){var o=vt(t),i=!j((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!j((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Tf]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=F(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=F(t),s=e.exec;return s===Of||s===kf.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));de(String.prototype,t,s[0]),de(kf,o,s[1])}n&&ie(kf[o],"sham",!0)},jf=F("".charAt),Pf=F("".charCodeAt),_f=F("".slice),Mf=function(t){return function(e,r){var n,o,i=rf(B(e)),a=Le(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Pf(i,a))<55296||n>56319||a+1===u||(o=Pf(i,a+1))<56320||o>57343?t?jf(i,a):n:t?_f(i,a,a+2):o-56320+(n-55296<<10)+65536}},Lf={codeAt:Mf(!1),charAt:Mf(!0)},Rf=Lf.charAt,Cf=function(t,e,r){return e+(r?Rf(t,e).length:1)},Nf=Math.floor,Df=F("".charAt),Ff=F("".replace),Wf=F("".slice),zf=/\\$([$&'\`]|\\d{1,2}|<[^>]*>)/g,Bf=/\\$([$&'\`]|\\d{1,2})/g,Uf=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Bf;return void 0!==o&&(o=G(o),s=zf),Ff(i,s,(function(i,s){var c;switch(Df(s,0)){case"$":return"$";case"&":return t;case"\`":return Wf(e,0,r);case"'":return Wf(e,a);case"<":c=o[Wf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=Nf(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Df(s,1):n[l-1]+Df(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Gf=TypeError,Hf=function(t,e){var r=t.exec;if(J(r)){var n=jt(r,t,e);return null!==n&&kt(n),n}if("RegExp"===D(t))return jt(Of,t,e);throw Gf("RegExp#exec called on incompatible receiver")},Vf=vt("replace"),qf=Math.max,Zf=Math.min,Yf=F([].concat),$f=F([].push),Kf=F("".indexOf),Qf=F("".slice),Xf="$0"==="a".replace(/./,"$0"),Jf=!!/./[Vf]&&""===/./[Vf]("a","$0");function tl(t){this.message=t}If("replace",(function(t,e,r){var n=Jf?"$":"$0";return[function(t,r){var n=B(this),o=W(t)?void 0:Dt(t,Vf);return o?jt(o,t,n,r):jt(e,rf(n),t,r)},function(t,o){var i=kt(this),a=rf(t);if("string"==typeof o&&-1===Kf(o,n)&&-1===Kf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=J(o);s||(o=rf(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Hf(i,a);if(null===h)break;if($f(l,h),!c)break;""===rf(h[0])&&(i.lastIndex=Cf(a,Fe(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=rf((h=l[y])[0]),m=qf(Zf(Le(h.index),a.length),0),x=[],b=1;b<h.length;b++)$f(x,void 0===(p=h[b])?p:String(p));var w=h.groups;if(s){var E=Yf([g],x,m,a);void 0!==w&&$f(E,w);var A=rf(Fr(o,void 0,E))}else A=Uf(g,a,m,x,w,o);m>=d&&(v+=Qf(a,d,m)+A,d=m+g.length)}return v+Qf(a,d)}]}),!!j((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Xf||Jf),tl.prototype=new Error,tl.prototype.name="InvalidCharacterError",ar({global:!0,forced:O.globalThis!==O},{globalThis:O}),Sf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:Sf.devicePixelRatio;var el=TypeError,rl=Object.getOwnPropertyDescriptor,nl=gt&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(yi(t)&&!rl(t,"length").writable)throw el("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},ol=TypeError,il=function(t){if(t>9007199254740991)throw ol("Maximum allowed index exceeded");return t},al=Pi("splice"),ul=Math.max,sl=Math.min;ar({target:"Array",proto:!0,forced:!al},{splice:function(t,e){var r,n,o,i,a,u,s=G(this),c=We(s),f=Ne(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=sl(ul(Le(e),0),c-f)),il(c+r-n),o=xi(s,n),i=0;i<n;i++)(a=f+i)in s&&Ii(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:ls(s,u);for(i=c;i>c-n+r;i--)ls(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:ls(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return nl(s,c-n+r),o}});var cl=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),fl=Object.assign,ll=Object.defineProperty,hl=F([].concat),pl=!fl||j((function(){if(gt&&1!==fl({b:1},fl(ll({},"a",{enumerable:!0,get:function(){ll(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=fl({},t)[r]||"abcdefghijklmnopqrst"!=Hi(fl({},e)).join("")}))?function(t,e){for(var r=G(t),n=arguments.length,o=1,i=Ye.f,a=Ae.f;n>o;)for(var u,s=Te(arguments[o++]),c=i?hl(Hi(s),i(s)):Hi(s),f=c.length,l=0;f>l;)u=c[l++],gt&&!jt(a,s,u)||(r[u]=s[u]);return r}:fl;ar({target:"Object",stat:!0,arity:2,forced:Object.assign!==pl},{assign:pl});var vl=Ei.findIndex,dl=!0;"findIndex"in[]&&Array(1).findIndex((function(){dl=!1})),ar({target:"Array",proto:!0,forced:dl},{findIndex:function(t){return vl(this,t,arguments.length>1?arguments[1]:void 0)}}),oa("findIndex");var yl=Lf.charAt,gl=pe.set,ml=pe.getterFor("String Iterator");wa(String,"String",(function(t){gl(this,{type:"String Iterator",string:rf(t),index:0})}),(function(){var t,e=ml(this),r=e.string,n=e.index;return n>=r.length?Ea(void 0,!0):(t=yl(r,n),e.index+=t.length,Ea(t,!1))}));var xl=Ze.f,bl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wl={f:function(t){return bl&&"Window"==D(t)?function(t){try{return xl(t)}catch(t){return yu(bl)}}(t):xl(ke(t))}},El=j((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Al=Object.isExtensible,Ol=j((function(){Al(1)}))||El?function(t){return!!xt(t)&&((!El||"ArrayBuffer"!=D(t))&&(!Al||Al(t)))}:Al,Sl=!j((function(){return Object.isExtensible(Object.preventExtensions({}))})),Tl=b((function(t){var e=qt.f,r=!1,n=$("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=Ze.f,e=F([].splice),o={};o[n]=1,t(o).length&&(Ze.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ar({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wl.f}))},fastKey:function(t,e){if(!xt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!V(t,n)){if(!Ol(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!V(t,n)){if(!Ol(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Sl&&r&&Ol(t)&&!V(t,n)&&i(t),t}};se[n]=!0})),kl=(Tl.enable,Tl.fastKey,Tl.getWeakData,Tl.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=O[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=F(u[t]);de(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!xt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!xt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!xt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(or(t,!J(a)||!(o||u.forEach&&!j((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),Tl.enable();else if(or(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=j((function(){l.has(1)})),v=_o((function(t){new a(t)})),d=!o&&j((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){gr(t,u);var r=ss(new a,t,s);return W(e)||To(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ar({global:!0,constructor:!0,forced:s!=a},c),pr(s,t),o||r.setStrong(s,t,n),s}),Il=Tl.getWeakData,jl=pe.set,Pl=pe.getterFor,_l=Ei.find,Ml=Ei.findIndex,Ll=F([].splice),Rl=0,Cl=function(t){return t.frozen||(t.frozen=new Nl)},Nl=function(){this.entries=[]},Dl=function(t,e){return _l(t.entries,(function(t){return t[0]===e}))};Nl.prototype={get:function(t){var e=Dl(this,t);if(e)return e[1]},has:function(t){return!!Dl(this,t)},set:function(t,e){var r=Dl(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Ml(this.entries,(function(e){return e[0]===t}));return~e&&Ll(this.entries,e,1),!!~e}};var Fl,Wl={getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),jl(t,{type:e,id:Rl++,frozen:void 0}),W(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Pl(e),u=function(t,e,r){var n=a(t),o=Il(kt(e),!0);return!0===o?Cl(n).set(e,r):o[n.id]=r,t};return ru(i,{delete:function(t){var e=a(this);if(!xt(t))return!1;var r=Il(t);return!0===r?Cl(e).delete(t):r&&V(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!xt(t))return!1;var r=Il(t);return!0===r?Cl(e).has(t):r&&V(r,e.id)}}),ru(i,r?{get:function(t){var e=a(this);if(xt(t)){var r=Il(t);return!0===r?Cl(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},zl=pe.enforce,Bl=!O.ActiveXObject&&"ActiveXObject"in O,Ul=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Gl=kl("WeakMap",Ul,Wl);if(ne&&Bl){Fl=Wl.getConstructor(Ul,"WeakMap",!0),Tl.enable();var Hl=Gl.prototype,Vl=F(Hl.delete),ql=F(Hl.has),Zl=F(Hl.get),Yl=F(Hl.set);ru(Hl,{delete:function(t){if(xt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),Vl(this,t)||e.frozen.delete(t)}return Vl(this,t)},has:function(t){if(xt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)||e.frozen.has(t)}return ql(this,t)},get:function(t){if(xt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)?Zl(this,t):e.frozen.get(t)}return Zl(this,t)},set:function(t,e){if(xt(t)&&!Ol(t)){var r=zl(this);r.frozen||(r.frozen=new Fl),ql(this,t)?Yl(this,t,e):r.frozen.set(t,e)}else Yl(this,t,e);return this}})}var $l=vt("iterator"),Kl=vt("toStringTag"),Ql=Ta.values,Xl=function(t,e){if(t){if(t[$l]!==Ql)try{ie(t,$l,Ql)}catch(e){t[$l]=Ql}if(t[Kl]||ie(t,Kl,e),hi[e])for(var r in Ta)if(t[r]!==Ta[r])try{ie(t,r,Ta[r])}catch(e){t[r]=Ta[r]}}};for(var Jl in hi)Xl(O[Jl]&&O[Jl].prototype,Jl);Xl(di,"DOMTokenList");var th,eh,rh,nh,oh=new WeakMap,ih=function(){function t(){i(this,t),oh.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=oh.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),oh.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=oh.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=oh.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),ah=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(ih));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var uh=my.getSystemInfoSync();th=uh.screenWidth,eh=uh.screenHeight,rh=uh.windowWidth,nh=uh.windowHeight}else{var sh=Sf.innerWidth,ch=Sf.innerHeight;th=sh,eh=ch,rh=sh,nh=ch}var fh={width:th,height:eh,availWidth:rh,availHeight:nh,availLeft:0,availTop:0},lh=fh.availWidth,hh=fh.availHeight,ph={style:[]};function vh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function dh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:lh+"px",height:hh+"px",margin:"0px",padding:"0px"})}function yh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=lh,t.clientHeight=hh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function gh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=lh,t.offsetHeight=hh)}function mh(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=lh,t.scrollHeight=hh)}function xh(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function bh(){}var wh=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=bh,t.blur=bh,t.insertBefore=bh,t.appendChild=bh,t.removeChild=bh,t.remove=bh,t.innerHTML="",t.tagName=n.toUpperCase(),vh(h(t),o),dh(h(t)),xh(h(t)),yh(h(t)),gh(h(t)),mh(h(t)),t}return u(r)}(ah),Eh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(wh)),Ah={};function Oh(){return Ah}var Sh=u((function t(){i(this,t);var e=Oh(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),vh(r),xh(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),Th={href:"",protocol:"",host:""},kh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),Ih=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),jh={},Ph={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Th,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new Sh:"video"===t?new Eh:new wh(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){jh[t]||(jh[t]=[]),jh[t].push(e)},removeEventListener:function(t,e){var r=jh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=jh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new cl(t)}};Ph.documentElement=new Ih,Ph.head=new wh("head"),Ph.body=new kh,If("match",(function(t,e,r){return[function(e){var r=B(this),n=W(e)?void 0:Dt(e,t);return n?jt(n,e,r):new RegExp(e)[t](rf(r))},function(t){var n=kt(this),o=rf(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return Hf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=Hf(n,o));){var f=rf(u[0]);s[c]=f,""===f&&(n.lastIndex=Cf(o,Fe(n.lastIndex),a)),c++}return 0===c?null:s}]}));var _h,Mh,Lh=vt("isConcatSpreadable"),Rh=ut>=51||!j((function(){var t=[];return t[Lh]=!1,t.concat()[0]!==t})),Ch=Pi("concat"),Nh=function(t){if(!xt(t))return!1;var e=t[Lh];return void 0!==e?!!e:yi(t)};if(ar({target:"Array",proto:!0,arity:1,forced:!Rh||!Ch},{concat:function(t){var e,r,n,o,i,a=G(this),u=xi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Nh(i=-1===e?a:arguments[e]))for(o=We(i),il(s+o),r=0;r<o;r++,s++)r in i&&Ii(u,s,i[r]);else il(s+1),Ii(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Dh=my.getSystemInfoSync();_h=Dh.system,Dh.platform,Dh.language}else{var Fh={versions:(Mh=Sf.navigator.userAgent,{trident:Mh.indexOf("Trident")>-1,presto:Mh.indexOf("Presto")>-1,webKit:Mh.indexOf("AppleWebKit")>-1,gecko:Mh.indexOf("Gecko")>-1&&-1===Mh.indexOf("KHTML"),mobile:!!Mh.match(/AppleWebKit.*Mobile.*/),ios:!!Mh.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Mh.indexOf("Android")>-1||Mh.indexOf("Linux")>-1,iPhone:Mh.indexOf("iPhone")>-1,iPad:Mh.indexOf("iPad")>-1,webApp:-1===Mh.indexOf("Safari"),weixin:Mh.indexOf("MicroMessenger")>-1,qq:" qq"===Mh.match(/\\sQQ/i)}),language:(Sf.navigator.browserLanguage||Sf.navigator.language).toLowerCase()};Fh.versions.android?"android":Fh.versions.trident?"IE":Fh.versions.presto?"Opera":Fh.versions.webKit?"webKit":Fh.versions.gecko?"Firefox":Fh.versions.mobile?"mobile":Fh.versions.ios?"ios":Fh.versions.iPhone?"iPhone":Fh.versions.iPad?"ipad":Fh.versions.webApp?"webApp":Fh.versions.weixin?"weixin":Fh.versions.qq&&"qq",_h=Sf.navigator.userAgent,Fh.language}_h.toLowerCase().indexOf("android");cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Wh=qt.f,zh=Tl.fastKey,Bh=pe.set,Uh=pe.getterFor;kl("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),Bh(t,{type:e,index:Qi(null),first:void 0,last:void 0,size:0}),gt||(t.size=0),W(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Uh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=zh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),gt?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=zh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return ru(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,gt?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),gt?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=zr(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),ru(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),gt&&Wh(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Uh(e),i=Uh(n);wa(t,e,(function(t,e){Bh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?Ea("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,Ea(void 0,!0))}),r?"entries":"values",!r,!0),dr(e)}});var Gh=F([].join),Hh=Te!=Object,Vh=Ai("join",",");ar({target:"Array",proto:!0,forced:Hh||!Vh},{join:function(t){return Gh(ke(this),void 0===t?",":t)}});var qh=j((function(){Hi(1)}));ar({target:"Object",stat:!0,forced:qh},{keys:function(t){return Hi(G(t))}});var Zh=new Map,Yh=new Map,$h=new Map,Kh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Zh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=$h.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Yh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Yh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Zh.get("requestHeader");r[t]=e,Zh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(ih);s(Kh,"UNSEND",void 0),s(Kh,"OPENED",void 0),s(Kh,"HEADERS_RECEIVED",void 0),s(Kh,"LOADING",void 0),s(Kh,"DONE",void 0),Kh.UNSEND=0,Kh.OPENED=1,Kh.HEADERS_RECEIVED=2,Kh.LOADING=3,Kh.DONE=4;var Qh="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,Xh="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),Jh=Qh||Xh;Jh||Sf.XMLHttpRequest,Jh||Sf.location;function tp(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ep=Ei.filter,rp=Pi("filter");function np(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function op(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function ip(t){return t.filter?[1]:[0]}function ap(t,e){return[e]}ar({target:"Array",proto:!0,forced:!rp},{filter:function(t){return ep(this,t,arguments.length>1?arguments[1]:void 0)}});var up=cp,sp=cp;function cp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=fp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=fp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(wp(s));for(c.sort(gp),o=0;o<c.length;o++)r=mp(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return hp(h,p,r,n,o,c,0),p}function fp(t,e,r,n,o){var i,a;if(o===Rp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=_p(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=_p(i,t[i],t[i+1],a);return a&&Sp(a,a.next)&&(Mp(a),a=a.next),a}function lp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Sp(n,n.next)&&0!==Op(n.prev,n,n.next))n=n.next;else{if(Mp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function hp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=bp(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?vp(t,n,o,i):pp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Mp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?hp(t=dp(lp(t),e,r),e,r,n,o,i,2):2===a&&yp(t,e,r,n,o,i):hp(lp(t),e,r,n,o,i,1);break}}}function pp(t){var e=t.prev,r=t,n=t.next;if(Op(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&Ep(o,u,i,s,a,c,v.x,v.y)&&Op(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function vp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(Op(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=bp(p,v,e,r,n),m=bp(d,y,e,r,n),x=t.prevZ,b=t.nextZ;x&&x.z>=g&&b&&b.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function dp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!Sp(o,i)&&Tp(o,n,n.next,i)&&jp(o,i)&&jp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Mp(n),Mp(n.next),n=t=i),n=n.next}while(n!==t);return lp(n)}function yp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&Ap(a,u)){var s=Pp(a,u);return a=lp(a,a.next),s=lp(s,s.next),hp(a,e,r,n,o,i,0),void hp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function gp(t,e){return t.x-e.x}function mp(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&Ep(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),jp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&xp(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Pp(r,t);return lp(n,n.next),lp(r,r.next)}function xp(t,e){return Op(t.prev,t,e.prev)<0&&Op(e.next,t,t.next)<0}function bp(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Ep(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function Ap(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Tp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(jp(t,e)&&jp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Op(t.prev,t,e.prev)||Op(t,e.prev,e))||Sp(t,e)&&Op(t.prev,t,t.next)>0&&Op(e.prev,e,e.next)>0)}function Op(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Sp(t,e){return t.x===e.x&&t.y===e.y}function Tp(t,e,r,n){var o=Ip(Op(t,e,r)),i=Ip(Op(t,e,n)),a=Ip(Op(r,n,t)),u=Ip(Op(r,n,e));return o!==i&&a!==u||(!(0!==o||!kp(t,r,e))||(!(0!==i||!kp(t,n,e))||(!(0!==a||!kp(r,t,n))||!(0!==u||!kp(r,e,n)))))}function kp(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ip(t){return t>0?1:t<0?-1:0}function jp(t,e){return Op(t.prev,t,t.next)<0?Op(t,e,t.next)>=0&&Op(t,t.prev,e)>=0:Op(t,e,t.prev)<0||Op(t,t.next,e)<0}function Pp(t,e){var r=new Lp(t.i,t.x,t.y),n=new Lp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function _p(t,e,r,n){var o=new Lp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Mp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Rp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}cp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Rp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Rp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},cp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},up.default=sp;var Cp=F(1..valueOf),Np=F("".replace),Dp="[\\t\\n\\v\\f\\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\\u2028\\u2029\\ufeff]",Fp=RegExp("^"+Dp+Dp+"*"),Wp=RegExp(Dp+Dp+"*$"),zp=function(t){return function(e){var r=rf(B(e));return 1&t&&(r=Np(r,Fp,"")),2&t&&(r=Np(r,Wp,"")),r}},Bp={start:zp(1),end:zp(2),trim:zp(3)},Up=Ze.f,Gp=je.f,Hp=qt.f,Vp=Bp.trim,qp=O.Number,Zp=qp.prototype,Yp=O.TypeError,$p=F("".slice),Kp=F("".charCodeAt),Qp=function(t){var e=Bt(t,"number");return"bigint"==typeof e?e:Xp(e)},Xp=function(t){var e,r,n,o,i,a,u,s,c=Bt(t,"number");if(Mt(c))throw Yp("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Vp(c),43===(e=Kp(c,0))||45===e){if(88===(r=Kp(c,2))||120===r)return NaN}else if(48===e){switch(Kp(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=$p(c,2)).length,u=0;u<a;u++)if((s=Kp(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c};if(or("Number",!qp(" 0o1")||!qp("0b1")||qp("+0x1"))){for(var Jp,tv=function(t){var e=arguments.length<1?0:qp(Qp(t)),r=this;return Pt(Zp,r)&&j((function(){Cp(r)}))?ss(Object(e),r,tv):e},ev=gt?Up(qp):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),rv=0;ev.length>rv;rv++)V(qp,Jp=ev[rv])&&!V(tv,Jp)&&Hp(tv,Jp,Gp(qp,Jp));tv.prototype=Zp,Zp.constructor=tv,de(O,"Number",tv,{constructor:!0})}var nv=RangeError,ov=RangeError,iv=String,av=Math.floor,uv=F((function(t){var e=rf(B(this)),r="",n=Le(t);if(n<0||n==1/0)throw nv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),sv=F("".slice),cv=F(1..toFixed),fv=function(t,e,r){return 0===e?r:e%2==1?fv(t,e-1,r*t):fv(t*t,e/2,r)},lv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=av(o/1e7)},hv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=av(n/e),n=n%e*1e7},pv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=iv(t[e]);r=""===r?n:r+uv("0",7-n.length)+n}return r},vv=j((function(){return"0.000"!==cv(8e-5,3)||"1"!==cv(.9,0)||"1.25"!==cv(1.255,2)||"1000000000000000128"!==cv(0xde0b6b3a7640080,0)}))||!j((function(){cv({})}));function dv(t){return"number"==typeof t}function yv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ar({target:"Number",proto:!0,forced:vv},{toFixed:function(t){var e,r,n,o,i=Cp(this),a=Le(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw ov("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return iv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*fv(2,69,1))-69)<0?i*fv(2,-e,1):i/fv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(lv(u,0,r),n=a;n>=7;)lv(u,1e7,0),n-=7;for(lv(u,fv(10,n,1),0),n=e-1;n>=23;)hv(u,1<<23),n-=23;hv(u,1<<n),lv(u,1,1),hv(u,2),c=pv(u)}else lv(u,0,r),lv(u,1<<-e,0),c=pv(u)+uv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+uv("0",a-o)+c:sv(c,0,o-a)+"."+sv(c,o-a)):s+c}});var gv,mv=/"/g,xv=F("".replace);ar({target:"String",proto:!0,forced:(gv="sub",j((function(){var t=""[gv]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{sub:function(){return t="sub",e="",r="",n=rf(B(this)),o="<"+t,""!==e&&(o+=" "+e+'="'+xv(rf(r),mv,"&quot;")+'"'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var bv=RegExp.prototype,wv=Kt.PROPER,Ev=RegExp.prototype.toString,Av=j((function(){return"/a/b"!=Ev.call({source:"a",flags:"b"})})),Ov=wv&&"toString"!=Ev.name;(Av||Ov)&&de(RegExp.prototype,"toString",(function(){var t=kt(this);return"/"+rf(t.source)+"/"+rf(function(t){var e=t.flags;return void 0!==e||"flags"in bv||V(t,"flags")||!Pt(bv,t)?e:jt(nf,t)}(t))}),{unsafe:!0});var Sv="undefined"!=typeof Float32Array?Float32Array:Array;function Tv(){var t=new Sv(2);return Sv!=Float32Array&&(t[0]=0,t[1]=0),t}function kv(t,e){var r=new Sv(2);return r[0]=t,r[1]=e,r}function Iv(t,e){return t[0]=e[0],t[1]=e[1],t}function jv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Pv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function _v(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Mv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Lv,Rv=Pv,Cv=(Lv=Tv(),Tv()),Nv=(Tv(),Tv()),Dv=Tv(),Fv=Tv();function Wv(t,e,r,n,o){return jv(t,r,n),_v(t,t),[o/Mv(e=kv(-t[1],t[0]),kv(-r[1],r[0])),e]}function zv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function Bv(t,e,r){return Rv(t,e,r),_v(t,t),t}function Uv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Gv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",kv(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=yv([a[0],a[1]]),g=yv([i[0],i[1]]);Bv(Nv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,h){var x=Tv(),b=Tv();jv(x,this.normal,Nv),jv(b,this.normal,Nv),l.push(b[0],b[1],0),l.push(x[0],x[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){Uv(n,o)&&jv(o,n,_v(o,Pv(o,n,r))),Bv(Dv,o,n);var w=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),E=w[0],A=w[1],O=Mv(Fv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Iv(this.normal,A),s+=2),this.lastFlip=O}else{if(zv(this.normal,Nv),h){var T=Tv(),k=Tv();Rv(k,Nv,this.normal),jv(T,Nv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=yv([n[0],n[1]]),f=yv([r[0],r[1]]);Bv(Nv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=yv([o[0],o[1]]);Uv(c,h)&&jv(h,c,_v(h,Pv(h,c,f))),Bv(Dv,h,c);var p=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),v=p[0],g=p[1];Mv(Fv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Iv(this.normal,g),i+=2,this.lastFlip=-1}else zv(this.normal,Nv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=yv([n[0],n[1]]),h=yv([r[0],r[1]]);Bv(Nv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,c){var v=Tv(),g=Tv();jv(v,this.normal,Nv),jv(g,this.normal,Nv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=yv([o[0],o[1]]);Uv(l,m)&&jv(m,l,_v(m,Pv(m,l,h))),Bv(Dv,m,l);var x=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),b=x[0],w=x[1],E=Mv(Fv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)b>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,b,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Iv(this.normal,w),i+=2),this.lastFlip=E}else{if(zv(this.normal,Nv),c){var O=Tv(),S=Tv();Rv(S,Nv,this.normal),jv(O,Nv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function Hv(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Gv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function Vv(t){var e=function(t){if(dv(t[0]))return t;if(dv(t[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(dv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function qv(t){var e=t.coordinates,r=up.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:up(n,i,o),vertices:n,size:o}}var Zv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Hv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Vv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Zv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=qv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$v=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Yv);function Kv(t){return Qv.apply(this,arguments)}function Qv(){return(Qv=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!$v[n]){t.next=3;break}return t.abrupt("return",$v[n](o));case 3:return t.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return fi(Kv),t.WorkerSourceMap=Yv,t.createWorker=fi,t.worker=Kv,t}({});
`,hc="l7-worker",uh=3,Kf=!0;function gh(oe){pl(hc,oe)}function yh(){var oe=ef(hc);if(!oe)throw new Error("get worker failed by workerName: ".concat(hc,"."));return oe}function Yf(oe,Fe){return dc.apply(this,arguments)}function dc(){return dc=(0,Ql.Z)(oo().mark(function oe(Fe,Ze){var rt,xt,Dt,$r,En;return oo().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rt=yh(),xt=$s.getWorkerFarm({maxConcurrency:uh,reuseWorkers:Kf}),Dt=xt.getWorkerPool({name:hc,source:rt}),rn.next=5,Dt.startJob(hc,function(_i,ga,ss){return _i.done(ss)});case 5:return $r=rn.sent,$r.postMessage("process",{input:{workerType:Fe,data:Ze}}),rn.next=9,$r.result;case 9:return En=rn.sent,rn.abrupt("return",En.result);case 11:case"end":return rn.stop()}},oe)})),dc.apply(this,arguments)}gh(Bh)},70844:function(vt,Ee,g){"use strict";g.r(Ee),g.d(Ee,{$XMLHttpRequest:function(){return tt.ft},$location:function(){return tt.PG},$window:function(){return tt.vO},AJAXError:function(){return tt.Uj},AttributeType:function(){return Te.GC},BKDRHash:function(){return tt.e2},BaseLayer:function(){return eu},BaseMapService:function(){return w_},BaseMapWrapper:function(){return pm.Z},BaseModel:function(){return nu},BasePostProcessingPass:function(){return Te.mp},BlendType:function(){return Te.h0},ButtonControl:function(){return gl},CameraUniform:function(){return Te.lv},CanvasLayer:function(){return kl},CanvasUpdateType:function(){return Kc},CityBuildingLayer:function(){return Sh},Control:function(){return bs},CoordinateSystem:function(){return Te.lo},CoordinateUniform:function(){return Te.kw},DOM:function(){return tt.SO},Earth:function(){return CS},EarthLayer:function(){return oc},ExportImage:function(){return yc},FrequencyController:function(){return tt.iH},Fullscreen:function(){return od},GaodeMap:function(){return G1.Z},GaodeMapV1:function(){return gb},GaodeMapV2:function(){return G1.Z},GeoLocate:function(){return Kl},GeometryLayer:function(){return Rr},HeatmapLayer:function(){return yh},IDebugLog:function(){return Te.Or},ILayerStage:function(){return Te.KD},ImageLayer:function(){return En},InteractionEvent:function(){return Te.sm},LRUCache:function(){return tt.z6},LayerPopup:function(){return qh},LayerSwitch:function(){return Fc},LineLayer:function(){return Ra},LineTriangulation:function(){return tt.sN},LinearDir:function(){return xl},LoadTileDataStatus:function(){return tt.Qj},Logo:function(){return _c},Map:function(){return kS},MapServiceEvent:function(){return Te.I9},MapTheme:function(){return Uh},Mapbox:function(){return WS},Marker:function(){return Ho},MarkerLayer:function(){return Il},MaskLayer:function(){return Ad},MouseLocation:function(){return nh},PassType:function(){return Te.GR},PointFillTriangulation:function(){return tt.oX},PointLayer:function(){return _n},PolygonLayer:function(){return cn},PopperControl:function(){return _l},Popup:function(){return Tl},PositionType:function(){return Te.d},RasterLayer:function(){return el},RasterTileType:function(){return Te.n3},Satistics:function(){return tt.a5},Scale:function(){return $i},ScaleTypes:function(){return Te.vY},Scene:function(){return dw},SceneEventList:function(){return Te.P7},SelectControl:function(){return Cf},SizeUnitType:function(){return Ku},Source:function(){return Ko},SourceTile:function(){return tt.LZ},StyleScaleType:function(){return Te.ee},TYPES:function(){return Te.vK},TextureBlend:function(){return mu},TileDebugLayer:function(){return zf},TilesetManager:function(){return tt.nx},UpdateTileStrategy:function(){return tt.dD},Version:function(){return fl.G},Viewport:function(){return n2.Z},WindLayer:function(){return np},WorkerSourceMap:function(){return tt.lN},Zoom:function(){return Es},aProjectFlat:function(){return tt.Z},amap2Project:function(){return tt.TG},amap2UnProject:function(){return tt.S8},anchorTranslate:function(){return tt.rQ},anchorType:function(){return tt.bV},applyAnchorClass:function(){return tt.zi},bBoxToBounds:function(){return tt.ds},bindAll:function(){return tt.Ev},boundsContains:function(){return tt.oO},calAngle:function(){return tt.mt},calDistance:function(){return tt.Lw},calculateCentroid:function(){return tt.SI},calculatePointsCenterAndRadius:function(){return tt.Rx},container:function(){return Te.nC},createLayerContainer:function(){return Te.e7},createSceneContainer:function(){return Te.Hp},decodePickingColor:function(){return tt.W0},dispatchMapCameraParams:function(){return tt.Gi},dispatchMouseDown:function(){return tt.Dd},dispatchMouseMove:function(){return tt.YR},dispatchMouseUp:function(){return tt.TS},dispatchPointerDown:function(){return tt.fO},dispatchPointerMove:function(){return tt.xr},dispatchPointerUp:function(){return tt.VJ},dispatchTouchEnd:function(){return tt.vJ},dispatchTouchMove:function(){return tt.b0},dispatchTouchStart:function(){return tt.om},djb2hash:function(){return tt.h8},encodePickingColor:function(){return tt.Z6},executeWorkerTask:function(){return tt.hH},expandUrl:function(){return tt.Gk},extent:function(){return tt.We},flow:function(){return tt.ls},generateCatRamp:function(){return tt.hj},generateColorRamp:function(){return tt.Cl},generateCustomRamp:function(){return tt.Oc},generateLinearRamp:function(){return tt.M4},generateQuantizeRamp:function(){return tt.NJ},getAngle:function(){return tt._O},getArrayBuffer:function(){return tt.ks},getBBoxFromPoints:function(){return tt.Ol},getCullFace:function(){return tt.fj},getDefaultDomain:function(){return tt.ZB},getImage:function(){return tt.gJ},getJSON:function(){return tt.xA},getMask:function(){return tt.Vi},getReferrer:function(){return tt.an},getTileIndices:function(){return tt.rJ},getTileWarpXY:function(){return tt.qD},getURLFromTemplate:function(){return tt.z0},getWMTSURLFromTemplate:function(){return tt.jG},gl:function(){return Te.gl},guid:function(){return tt.M8},isAndroid:function(){return tt.Dt},isColor:function(){return tt.D5},isImageBitmap:function(){return tt.fg},isMini:function(){return tt.eW},isMiniAli:function(){return tt.zh},isMiniScene:function(){return tt.N_},isPC:function(){return tt.Ro},isURLTemplate:function(){return tt.Xj},isWeChatMiniProgram:function(){return tt.FH},isWorker:function(){return tt.hJ},isiOS:function(){return tt.Tt},latitude:function(){return tt.pq},lazyInject:function(){return Te.yT},lazyMultiInject:function(){return Te.yG},lineAtOffset:function(){return tt.LT},lineAtOffsetAsyc:function(){return tt.wj},lineStyleType:function(){return Jl},lngLatInExtent:function(){return tt.if},lngLatToMeters:function(){return tt.vP},lnglatDistance:function(){return tt.yM},longitude:function(){return tt.MS},makeXMLHttpRequestPromise:function(){return tt.LF},metersToLngLat:function(){return tt.Uv},miniWindow:function(){return tt.RH},normalize:function(){return tt.Fv},osmLonLat2TileXY:function(){return tt.RV},osmTileXY2LonLat:function(){return tt.cN},packCircleVertex:function(){return Te.wL},padBounds:function(){return tt.yA},polygonFillTriangulation:function(){return tt.yR},postData:function(){return tt.qC},project:function(){return tt.iV},rgb2arr:function(){return tt.CI},sameOrigin:function(){return tt._0},setL7WorkerSource:function(){return tt.p3},setMiniScene:function(){return tt.a},tileToBounds:function(){return tt.Dv},tranfrormCoord:function(){return tt.Jo},unProjectFlat:function(){return tt.ih},validateLngLat:function(){return tt.Fb},version:function(){return pw}});var v={},M={},c=function(s){return M[s]},K=function(s,n){M[s]=n},N=function(s){return v[s]},Z=function(s,n){v[s]=n},B={},L={},$=34,U=10,ke=13;function We(a){return new Function("d","return {"+a.map(function(s,n){return JSON.stringify(s)+": d["+n+'] || ""'}).join(",")+"}")}function me(a,s){var n=We(a);return function(r,t){return s(n(r),t,a)}}function Le(a){var s=Object.create(null),n=[];return a.forEach(function(r){for(var t in r)t in s||n.push(s[t]=t)}),n}function Se(a,s){var n=a+"",r=n.length;return r<s?new Array(s-r+1).join(0)+n:n}function et(a){return a<0?"-"+Se(-a,6):a>9999?"+"+Se(a,6):Se(a,4)}function at(a){var s=a.getUTCHours(),n=a.getUTCMinutes(),r=a.getUTCSeconds(),t=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":et(a.getUTCFullYear(),4)+"-"+Se(a.getUTCMonth()+1,2)+"-"+Se(a.getUTCDate(),2)+(t?"T"+Se(s,2)+":"+Se(n,2)+":"+Se(r,2)+"."+Se(t,3)+"Z":r?"T"+Se(s,2)+":"+Se(n,2)+":"+Se(r,2)+"Z":n||s?"T"+Se(s,2)+":"+Se(n,2)+"Z":"")}function Lt(a){var s=new RegExp('["'+a+`
\r]`),n=a.charCodeAt(0);function r(be,it){var nt,Kt,tr=t(be,function(Ir,jr){if(nt)return nt(Ir,jr-1);Kt=Ir,nt=it?me(Ir,it):We(Ir)});return tr.columns=Kt||[],tr}function t(be,it){var nt=[],Kt=be.length,tr=0,Ir=0,jr,on=Kt<=0,tn=!1;be.charCodeAt(Kt-1)===U&&--Kt,be.charCodeAt(Kt-1)===ke&&--Kt;function Yn(){if(on)return L;if(tn)return tn=!1,B;var Zi,zi=tr,pa;if(be.charCodeAt(zi)===$){for(;tr++<Kt&&be.charCodeAt(tr)!==$||be.charCodeAt(++tr)===$;);return(Zi=tr)>=Kt?on=!0:(pa=be.charCodeAt(tr++))===U?tn=!0:pa===ke&&(tn=!0,be.charCodeAt(tr)===U&&++tr),be.slice(zi+1,Zi-1).replace(/""/g,'"')}for(;tr<Kt;){if((pa=be.charCodeAt(Zi=tr++))===U)tn=!0;else if(pa===ke)tn=!0,be.charCodeAt(tr)===U&&++tr;else if(pa!==n)continue;return be.slice(zi,Zi)}return on=!0,be.slice(zi,Kt)}for(;(jr=Yn())!==L;){for(var ci=[];jr!==B&&jr!==L;)ci.push(jr),jr=Yn();it&&(ci=it(ci,Ir++))==null||nt.push(ci)}return nt}function o(be,it){return be.map(function(nt){return it.map(function(Kt){return de(nt[Kt])}).join(a)})}function u(be,it){return it==null&&(it=Le(be)),[it.map(de).join(a)].concat(o(be,it)).join(`
`)}function d(be,it){return it==null&&(it=Le(be)),o(be,it).join(`
`)}function S(be){return be.map(z).join(`
`)}function z(be){return be.map(de).join(a)}function de(be){return be==null?"":be instanceof Date?at(be):s.test(be+="")?'"'+be.replace(/"/g,'""')+'"':be}return{parse:r,parseRows:t,format:u,formatBody:d,formatRows:S,formatRow:z,formatValue:de}}var Et=Lt(","),jt=Et.parse,pe=Et.parseRows,$e=Et.format,ye=Et.formatBody,ie=Et.formatRows,re=Et.formatRow,De=Et.formatValue,le=g(74902),ge=g(1413),ce=g(38163),je=g.n(ce),J=g(36987),Me=g(39034);function ne(a,s){var n=s.x,r=s.y,t=s.x1,o=s.y1,u=s.coordinates,d=s.geometry,S=[];if(!Array.isArray(a))return{dataArray:[]};if(d)return a.filter(function(jr){return jr[d]&&jr[d].type&&jr[d].coordinates&&jr[d].coordinates.length>0}).forEach(function(jr,on){var tn=je()((0,ge.Z)({},jr[d]),!0);(0,Me.nG)(tn,function(Yn){var ci=(0,J.r7)(Yn),Zi=(0,ge.Z)((0,ge.Z)({},jr),{},{_id:on,coordinates:ci});S.push(Zi)})}),{dataArray:S};for(var z=0;z<a.length;z++){var de=a[z],be=[];if(u){var it="Polygon";Array.isArray(u[0])||(it="Point"),Array.isArray(u[0])&&!Array.isArray(u[0][0])&&(it="LineString");var nt=je()({type:it,coordinates:(0,le.Z)(de[u])},!0);be=nt.coordinates}else if(n&&r&&t&&o){var Kt=[parseFloat(de[n]),parseFloat(de[r])],tr=[parseFloat(de[t]),parseFloat(de[o])];be=[Kt,tr]}else n&&r&&(be=[parseFloat(de[n]),parseFloat(de[r])]);var Ir=(0,ge.Z)((0,ge.Z)({},de),{},{_id:z,coordinates:be});S.push(Ir)}return{dataArray:S}}function xe(a,s){var n=jt(a);return ne(n,s)}var Ne=g(71002);function Pe(a){for(var s=a.toString(),n=5381,r=s.length;r;)n=n*33^s.charCodeAt(--r);return n>>>0}function He(a,s){return s===void 0?null:(0,Ne.Z)(a.properties[s])*1==="number"?a.properties[s]*1:a.properties&&a.properties[s]?Pe(a.properties[s]+"")%1000019:null}function lt(a,s){var n=[],r={};return a.features?(a.features=a.features.filter(function(t){var o=t.geometry;return t!=null&&o&&o.type&&o.coordinates&&o.coordinates.length>0}),je()(a,!0),a.features.length===0?{dataArray:[],featureKeys:r}:((0,Me.nG)(a,function(t,o){var u=He(t,s==null?void 0:s.featureId);u===null&&(u=o);var d=u,S=(0,J.r7)(t),z=(0,ge.Z)((0,ge.Z)({},t.properties),{},{coordinates:S,_id:d});n.push(z)}),{dataArray:n,featureKeys:r})):(a.features=[],{dataArray:[]})}var ft=g(15861),It=g(64687),fe=g.n(It);function _t(a,s,n,r){for(var t=r,o=n-s>>1,u=n-s,d,S=a[s],z=a[s+1],de=a[n],be=a[n+1],it=s+3;it<n;it+=3){var nt=Ye(a[it],a[it+1],S,z,de,be);if(nt>t)d=it,t=nt;else if(nt===t){var Kt=Math.abs(it-o);Kt<u&&(d=it,u=Kt)}}t>r&&(d-s>3&&_t(a,s,d,r),a[d+2]=t,n-d>3&&_t(a,d,n,r))}function Ye(a,s,n,r,t,o){var u=t-n,d=o-r;if(u!==0||d!==0){var S=((a-n)*u+(s-r)*d)/(u*u+d*d);S>1?(n=t,r=o):S>0&&(n+=u*S,r+=d*S)}return u=a-n,d=s-r,u*u+d*d}function Ot(a,s,n,r){var t={id:typeof a=="undefined"?null:a,type:s,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return mt(t),t}function mt(a){var s=a.geometry,n=a.type;if(n==="Point"||n==="MultiPoint"||n==="LineString")Rt(a,s);else if(n==="Polygon"||n==="MultiLineString")for(var r=0;r<s.length;r++)Rt(a,s[r]);else if(n==="MultiPolygon")for(r=0;r<s.length;r++)for(var t=0;t<s[r].length;t++)Rt(a,s[r][t])}function Rt(a,s){for(var n=0;n<s.length;n+=3)a.minX=Math.min(a.minX,s[n]),a.minY=Math.min(a.minY,s[n+1]),a.maxX=Math.max(a.maxX,s[n]),a.maxY=Math.max(a.maxY,s[n+1])}function pt(a,s){var n=[];if(a.type==="FeatureCollection")for(var r=0;r<a.features.length;r++)Ge(n,a.features[r],s,r);else a.type==="Feature"?Ge(n,a,s):Ge(n,{geometry:a},s);return n}function Ge(a,s,n,r){if(s.geometry){var t=s.geometry.coordinates,o=s.geometry.type,u=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),d=[],S=s.id;if(n.promoteId?S=s.properties[n.promoteId]:n.generateId&&(S=r||0),o==="Point")wt(t,d);else if(o==="MultiPoint")for(var z=0;z<t.length;z++)wt(t[z],d);else if(o==="LineString")ee(t,d,u,!1);else if(o==="MultiLineString")if(n.lineMetrics){for(z=0;z<t.length;z++)d=[],ee(t[z],d,u,!1),a.push(Ot(S,"LineString",d,s.properties));return}else Re(t,d,u,!1);else if(o==="Polygon")Re(t,d,u,!0);else if(o==="MultiPolygon")for(z=0;z<t.length;z++){var de=[];Re(t[z],de,u,!0),d.push(de)}else if(o==="GeometryCollection"){for(z=0;z<s.geometry.geometries.length;z++)Ge(a,{id:S,geometry:s.geometry.geometries[z],properties:s.properties},n,r);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Ot(S,o,d,s.properties))}}function wt(a,s){s.push(dt(a[0])),s.push(D(a[1])),s.push(0)}function ee(a,s,n,r){for(var t,o,u=0,d=0;d<a.length;d++){var S=dt(a[d][0]),z=D(a[d][1]);s.push(S),s.push(z),s.push(0),d>0&&(r?u+=(t*z-S*o)/2:u+=Math.sqrt(Math.pow(S-t,2)+Math.pow(z-o,2))),t=S,o=z}var de=s.length-3;s[2]=1,_t(s,0,de,n),s[de+2]=1,s.size=Math.abs(u),s.start=0,s.end=s.size}function Re(a,s,n,r){for(var t=0;t<a.length;t++){var o=[];ee(a[t],o,n,r),s.push(o)}}function dt(a){return a/360+.5}function D(a){var s=Math.sin(a*Math.PI/180),n=.5-.25*Math.log((1+s)/(1-s))/Math.PI;return n<0?0:n>1?1:n}function q(a,s,n,r,t,o,u,d){if(n/=s,r/=s,o>=n&&u<r)return a;if(u<n||o>=r)return null;for(var S=[],z=0;z<a.length;z++){var de=a[z],be=de.geometry,it=de.type,nt=t===0?de.minX:de.minY,Kt=t===0?de.maxX:de.maxY;if(nt>=n&&Kt<r){S.push(de);continue}else if(Kt<n||nt>=r)continue;var tr=[];if(it==="Point"||it==="MultiPoint")G(be,tr,n,r,t);else if(it==="LineString")O(be,tr,n,r,t,!1,d.lineMetrics);else if(it==="MultiLineString")X(be,tr,n,r,t,!1);else if(it==="Polygon")X(be,tr,n,r,t,!0);else if(it==="MultiPolygon")for(var Ir=0;Ir<be.length;Ir++){var jr=[];X(be[Ir],jr,n,r,t,!0),jr.length&&tr.push(jr)}if(tr.length){if(d.lineMetrics&&it==="LineString"){for(Ir=0;Ir<tr.length;Ir++)S.push(Ot(de.id,it,tr[Ir],de.tags));continue}(it==="LineString"||it==="MultiLineString")&&(tr.length===1?(it="LineString",tr=tr[0]):it="MultiLineString"),(it==="Point"||it==="MultiPoint")&&(it=tr.length===3?"Point":"MultiPoint"),S.push(Ot(de.id,it,tr,de.tags))}}return S.length?S:null}function G(a,s,n,r,t){for(var o=0;o<a.length;o+=3){var u=a[o+t];u>=n&&u<=r&&(s.push(a[o]),s.push(a[o+1]),s.push(a[o+2]))}}function O(a,s,n,r,t,o,u){for(var d=k(a),S=t===0?ae:Be,z=a.start,de,be,it=0;it<a.length-3;it+=3){var nt=a[it],Kt=a[it+1],tr=a[it+2],Ir=a[it+3],jr=a[it+4],on=t===0?nt:Kt,tn=t===0?Ir:jr,Yn=!1;u&&(de=Math.sqrt(Math.pow(nt-Ir,2)+Math.pow(Kt-jr,2))),on<n?tn>n&&(be=S(d,nt,Kt,Ir,jr,n),u&&(d.start=z+de*be)):on>r?tn<r&&(be=S(d,nt,Kt,Ir,jr,r),u&&(d.start=z+de*be)):W(d,nt,Kt,tr),tn<n&&on>=n&&(be=S(d,nt,Kt,Ir,jr,n),Yn=!0),tn>r&&on<=r&&(be=S(d,nt,Kt,Ir,jr,r),Yn=!0),!o&&Yn&&(u&&(d.end=z+de*be),s.push(d),d=k(a)),u&&(z+=de)}var ci=a.length-3;nt=a[ci],Kt=a[ci+1],tr=a[ci+2],on=t===0?nt:Kt,on>=n&&on<=r&&W(d,nt,Kt,tr),ci=d.length-3,o&&ci>=3&&(d[ci]!==d[0]||d[ci+1]!==d[1])&&W(d,d[0],d[1],d[2]),d.length&&s.push(d)}function k(a){var s=[];return s.size=a.size,s.start=a.start,s.end=a.end,s}function X(a,s,n,r,t,o){for(var u=0;u<a.length;u++)O(a[u],s,n,r,t,o,!1)}function W(a,s,n,r){a.push(s),a.push(n),a.push(r)}function ae(a,s,n,r,t,o){var u=(o-s)/(r-s);return a.push(o),a.push(n+(t-n)*u),a.push(1),u}function Be(a,s,n,r,t,o){var u=(o-n)/(t-n);return a.push(s+(r-s)*u),a.push(o),a.push(1),u}function ve(a,s){var n=s.buffer/s.extent,r=a,t=q(a,1,-1-n,n,0,-1,2,s),o=q(a,1,1-n,2+n,0,-1,2,s);return(t||o)&&(r=q(a,1,-n,1+n,0,-1,2,s)||[],t&&(r=Je(t,1).concat(r)),o&&(r=r.concat(Je(o,-1)))),r}function Je(a,s){for(var n=[],r=0;r<a.length;r++){var t=a[r],o=t.type,u;if(o==="Point"||o==="MultiPoint"||o==="LineString")u=ot(t.geometry,s);else if(o==="MultiLineString"||o==="Polygon"){u=[];for(var d=0;d<t.geometry.length;d++)u.push(ot(t.geometry[d],s))}else if(o==="MultiPolygon")for(u=[],d=0;d<t.geometry.length;d++){for(var S=[],z=0;z<t.geometry[d].length;z++)S.push(ot(t.geometry[d][z],s));u.push(S)}n.push(Ot(t.id,o,u,t.tags))}return n}function ot(a,s){var n=[];n.size=a.size,a.start!==void 0&&(n.start=a.start,n.end=a.end);for(var r=0;r<a.length;r+=3)n.push(a[r]+s,a[r+1],a[r+2]);return n}function Qe(a,s){if(a.transformed)return a;var n=1<<a.z,r=a.x,t=a.y,o,u,d;for(o=0;o<a.features.length;o++){var S=a.features[o],z=S.geometry,de=S.type;if(S.geometry=[],de===1)for(u=0;u<z.length;u+=2)S.geometry.push(ir(z[u],z[u+1],s,n,r,t));else for(u=0;u<z.length;u++){var be=[];for(d=0;d<z[u].length;d+=2)be.push(ir(z[u][d],z[u][d+1],s,n,r,t));S.geometry.push(be)}}return a.transformed=!0,a}function ir(a,s,n,r,t,o){return[Math.round(n*(a*r-t)),Math.round(n*(s*r-o))]}function mr(a,s,n,r,t){for(var o=s===t.maxZoom?0:t.tolerance/((1<<s)*t.extent),u={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:s,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},d=0;d<a.length;d++){u.numFeatures++,Ar(u,a[d],o,t);var S=a[d].minX,z=a[d].minY,de=a[d].maxX,be=a[d].maxY;S<u.minX&&(u.minX=S),z<u.minY&&(u.minY=z),de>u.maxX&&(u.maxX=de),be>u.maxY&&(u.maxY=be)}return u}function Ar(a,s,n,r){var t=s.geometry,o=s.type,u=[];if(o==="Point"||o==="MultiPoint")for(var d=0;d<t.length;d+=3)u.push(t[d]),u.push(t[d+1]),a.numPoints++,a.numSimplified++;else if(o==="LineString")Er(u,t,a,n,!1,!1);else if(o==="MultiLineString"||o==="Polygon")for(d=0;d<t.length;d++)Er(u,t[d],a,n,o==="Polygon",d===0);else if(o==="MultiPolygon")for(var S=0;S<t.length;S++){var z=t[S];for(d=0;d<z.length;d++)Er(u,z[d],a,n,!0,d===0)}if(u.length){var de=s.tags||null;if(o==="LineString"&&r.lineMetrics){de={};for(var be in s.tags)de[be]=s.tags[be];de.mapbox_clip_start=t.start/t.size,de.mapbox_clip_end=t.end/t.size}var it={geometry:u,type:o==="Polygon"||o==="MultiPolygon"?3:o==="LineString"||o==="MultiLineString"?2:1,tags:de};s.id!==null&&(it.id=s.id),a.features.push(it)}}function Er(a,s,n,r,t,o){var u=r*r;if(r>0&&s.size<(t?u:r)){n.numPoints+=s.length/3;return}for(var d=[],S=0;S<s.length;S+=3)(r===0||s[S+2]>u)&&(n.numSimplified++,d.push(s[S]),d.push(s[S+1])),n.numPoints++;t&&Zt(d,o),a.push(d)}function Zt(a,s){for(var n=0,r=0,t=a.length,o=t-2;r<t;o=r,r+=2)n+=(a[r]-a[o])*(a[r+1]+a[o+1]);if(n>0===s)for(r=0,t=a.length;r<t/2;r+=2){var u=a[r],d=a[r+1];a[r]=a[t-2-r],a[r+1]=a[t-1-r],a[t-2-r]=u,a[t-1-r]=d}}function Tr(a,s){return new pn(a,s)}function pn(a,s){s=this.options=Zn(Object.create(this.options),s);var n=s.debug;if(n&&console.time("preprocess data"),s.maxZoom<0||s.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(s.promoteId&&s.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=pt(a,s);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",s.indexMaxZoom,s.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=ve(r,s),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}pn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},pn.prototype.splitTile=function(a,s,n,r,t,o,u){for(var d=[a,s,n,r],S=this.options,z=S.debug;d.length;){r=d.pop(),n=d.pop(),s=d.pop(),a=d.pop();var de=1<<s,be=un(s,n,r),it=this.tiles[be];if(!it&&(z>1&&console.time("creation"),it=this.tiles[be]=mr(a,s,n,r,S),this.tileCoords.push({z:s,x:n,y:r}),z)){z>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",s,n,r,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));var nt="z"+s;this.stats[nt]=(this.stats[nt]||0)+1,this.total++}if(it.source=a,t){if(s===S.maxZoom||s===t)continue;var Kt=1<<t-s;if(n!==Math.floor(o/Kt)||r!==Math.floor(u/Kt))continue}else if(s===S.indexMaxZoom||it.numPoints<=S.indexMaxPoints)continue;if(it.source=null,a.length!==0){z>1&&console.time("clipping");var tr=.5*S.buffer/S.extent,Ir=.5-tr,jr=.5+tr,on=1+tr,tn,Yn,ci,Zi,zi,pa;tn=Yn=ci=Zi=null,zi=q(a,de,n-tr,n+jr,0,it.minX,it.maxX,S),pa=q(a,de,n+Ir,n+on,0,it.minX,it.maxX,S),a=null,zi&&(tn=q(zi,de,r-tr,r+jr,1,it.minY,it.maxY,S),Yn=q(zi,de,r+Ir,r+on,1,it.minY,it.maxY,S),zi=null),pa&&(ci=q(pa,de,r-tr,r+jr,1,it.minY,it.maxY,S),Zi=q(pa,de,r+Ir,r+on,1,it.minY,it.maxY,S),pa=null),z>1&&console.timeEnd("clipping"),d.push(tn||[],s+1,n*2,r*2),d.push(Yn||[],s+1,n*2,r*2+1),d.push(ci||[],s+1,n*2+1,r*2),d.push(Zi||[],s+1,n*2+1,r*2+1)}}},pn.prototype.getTile=function(a,s,n){var r=this.options,t=r.extent,o=r.debug;if(a<0||a>24)return null;var u=1<<a;s=(s%u+u)%u;var d=un(a,s,n);if(this.tiles[d])return Qe(this.tiles[d],t);o>1&&console.log("drilling down to z%d-%d-%d",a,s,n);for(var S=a,z=s,de=n,be;!be&&S>0;)S--,z=Math.floor(z/2),de=Math.floor(de/2),be=this.tiles[un(S,z,de)];return!be||!be.source?null:(o>1&&console.log("found parent tile z%d-%d-%d",S,z,de),o>1&&console.time("drilling down"),this.splitTile(be.source,S,z,de,a,s,n),o>1&&console.timeEnd("drilling down"),this.tiles[d]?Qe(this.tiles[d],t):null)};function un(a,s,n){return((1<<a)*n+s)*32+a}function Zn(a,s){for(var n in s)a[n]=s[n];return a}var Cr=g(15671),Nr=g(43144),bt=g(4942),jn=function(){function a(s,n,r,t){(0,Cr.Z)(this,a),(0,bt.Z)(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=t,this.vectorTile=s}return(0,Nr.Z)(a,[{key:"getTileData",value:function(n){if(!n||!this.vectorTile.layers[n])return[];if(this.vectorLayerCache[n])return this.vectorLayerCache[n];var r=this.vectorTile.layers[n];return r.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),a}(),Pt={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function zt(a){for(var s=0,n=0,r=a.length,t=r-1,o,u;n<r;t=n++)o=a[n],u=a[t],s+=(u.x-o.x)*(o.y+u.y);return s}function Qt(a){var s=a.length;if(s<=1)return[a];for(var n=[],r,t,o=0;o<s;o++){var u=zt(a[o]);u!==0&&(t===void 0&&(t=u<0),t===u<0?(r&&n.push(r),r=[a[o]]):r.push(a[o]))}return r&&n.push(r),n}var dr=["Unknown","Point","LineString","Polygon"];function _r(a,s,n,r,t){var o=t.geometry,u=t.type,d=t.tags,S=t.id,z=a*Math.pow(2,r),de=a*s,be=a*n,it=dr[u],nt,Kt;function tr(on){for(var tn=0;tn<on.length;tn++){var Yn=on[tn];if(Yn[3])break;var ci=180-(Yn[1]+be)*360/z,Zi=(Yn[0]+de)*360/z-180,zi=360/Math.PI*Math.atan(Math.exp(ci*Math.PI/180))-90;on[tn]=[Zi,zi,0,1]}}switch(u){case 1:var Ir=[];for(nt=0;nt<o.length;nt++)Ir[nt]=o[nt][0];o=Ir,tr(o);break;case 2:for(nt=0;nt<o.length;nt++)tr(o[nt]);break;case 3:for(o=Qt(o),nt=0;nt<o.length;nt++)for(Kt=0;Kt<o[nt].length;Kt++)tr(o[nt][Kt]);break}o.length===1?o=o[0]:it="Multi"+it;var jr={type:"Feature",geometry:{type:it,coordinates:o},properties:d,id:S,tileOrigin:[0,0],coord:""};return jr}var Hr=function(){var a=(0,ft.Z)(fe().mark(function s(n,r,t,o){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(S){var z=r.getTile(n.z,n.x,n.y),de=z?z.features.map(function(nt){return _r(o,t.x,t.y,t.z,nt)}):[],be={layers:{defaultLayer:{features:de}}},it=new jn(be,n.x,n.y,n.z);S(it)}));case 1:case"end":return d.stop()}},s)}));return function(n,r,t,o){return a.apply(this,arguments)}}();function Qr(a){var s={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?s:(0,ge.Z)((0,ge.Z)({},s),a.geojsonvtOptions)}function fr(a,s){var n=Qr(s),r=n.extent||4096,t=Tr(a,n),o=function(S,z){return Hr(z,t,S,r)},u=(0,ge.Z)((0,ge.Z)((0,ge.Z)({},Pt),s),{},{getTileData:o});return{data:a,dataArray:[],tilesetOptions:u,isTile:!0}}var tt=g(11265);function Yr(a,s){var n=s.extent,r=n===void 0?[121.168,30.2828,121.384,30.4219]:n,t=new Promise(function(u){a instanceof HTMLImageElement||(0,tt.fg)(a)?u([a]):Tn(a,function(d){u(d)})}),o={originData:a,images:t,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return o}function Tn(a,s){var n=a,r=[];if(typeof n=="string")(0,tt.gJ)({url:n},function(u,d){d&&(r.push(d),s(r))});else{var t=n.length,o=0;n.forEach(function(u){(0,tt.gJ)({url:u},function(d,S){o++,S&&r.push(S),o===t&&s(r)})})}return Yr}var wn=g(38929),Nn=g(3614),Si=g.n(Nn),fa=function(){function a(s,n,r,t){(0,Cr.Z)(this,a),(0,bt.Z)(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=t,this.vectorTile=new wn.VectorTile(new(Si())(s))}return(0,Nr.Z)(a,[{key:"getTileData",value:function(n){if(!n||!this.vectorTile.layers[n])return[];if(this.vectorLayerCache[n])return this.vectorLayerCache[n];var r=this.vectorTile.layers[n];if(Array.isArray(r.features))return this.vectorLayerCache[n]=r.features,r.features;for(var t=[],o=0;o<r.length;o++){var u=r.feature(o),d=u.toGeoJSON(this.x,this.y,this.z);t.push((0,ge.Z)((0,ge.Z)({},d),{},{properties:(0,ge.Z)({id:d.id},d.properties)}))}return this.vectorLayerCache[n]=t,t}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),a}(),Xi={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Ln=function(){var a=(0,ft.Z)(fe().mark(function s(n,r,t,o,u){var d;return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return d=(0,tt.z0)(n,r),z.abrupt("return",new Promise(function(de){if(u)u({x:t.x,y:t.y,z:t.z},function(it,nt){if(it||!nt)de(void 0);else{var Kt=new fa(nt,t.x,t.y,t.z);de(Kt)}});else{var be=(0,tt.ks)((0,ge.Z)((0,ge.Z)({},o),{},{url:d}),function(it,nt){if(it||!nt)de(void 0);else{var Kt=new fa(nt,t.x,t.y,t.z);de(Kt)}});t.xhrCancel=function(){return be.abort()}}}));case 2:case"end":return z.stop()}},s)}));return function(n,r,t,o,u){return a.apply(this,arguments)}}();function na(a,s){var n=Array.isArray(a)?a[0]:a,r=function(u,d){return Ln(n,u,d,s==null?void 0:s.requestParameters,s==null?void 0:s.getCustomData)},t=(0,ge.Z)((0,ge.Z)((0,ge.Z)({},Xi),s),{},{getTileData:r});return{data:n,dataArray:[],tilesetOptions:t,isTile:!0}}var xi=g(97685);function ta(a,s,n){switch(a){case"+":return s+n;case"-":return s-n;case"*":return s*n;case"/":return s/n;case"%":return s%n;case"^":return Math.pow(s,n);case"abs":return Math.abs(s);case"floor":return Math.floor(s);case"round":return Math.round(s);case"ceil":return Math.ceil(s);case"sin":return Math.sin(s);case"cos":return Math.cos(s);case"atan":return n===-1?Math.atan(s):Math.atan2(s,n);case"min":return Math.min(s,n);case"max":return Math.max(s,n);case"log10":return Math.log(s);case"log2":return Math.log2(s);default:return console.warn("Calculate symbol err! Return default 0"),0}}function La(a,s){for(var n=s[0],r=n.width,t=n.height,o=s.map(function(nt){return nt.rasterData}),u=r*t,d=[],S=JSON.stringify(a),z=0;z<u;z++){var de=JSON.parse(S),be=Ki(de,o,z);if(typeof be=="number")d.push(be);else{var it=uo(de);d.push(it)}}return d}function Ki(a,s,n){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return s[a[1]][n]}catch(r){return console.warn("Raster Data err!"),0}a.map(function(r,t){if(Array.isArray(r)&&r.length>0)switch(r[0]){case"band":try{a[t]=s[r[1]][n]}catch(o){console.warn("Raster Data err!"),a[t]=0}break;default:Ki(r,s,n)}})}function jo(a){var s=(0,xi.Z)(a,3),n=s[0],r=s[1],t=r===void 0?-1:r,o=s[2],u=o===void 0?-1:o;if(n===void 0)return console.warn("Express err!"),["+",0,0];var d=n.replace(/\s+/g,"");return[d,t,u]}function uo(a){var s=jo(a),n=s[0],r=s[1],t=s[2];return Array.isArray(r)&&(r=uo(a[1])),Array.isArray(t)&&(t=uo(a[2])),ta(n,r,t)}var An={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:gn}};function gn(a,s){for(var n=a[0].rasterData,r=a[1].rasterData,t=a[2].rasterData,o=[],u=(s==null?void 0:s.countCut)||[2,98],d=(0,xi.Z)(u,2),S=d[0],z=d[1],de=(s==null?void 0:s.RMinMax)||Oi(n,S,z),be=(s==null?void 0:s.GMinMax)||Oi(r,S,z),it=(s==null?void 0:s.BMinMax)||Oi(t,S,z),nt=0;nt<n.length;nt++)o.push(Math.max(0,n[nt]-de[0])),o.push(Math.max(0,r[nt]-be[0])),o.push(Math.max(0,t[nt]-it[0]));return{rasterData:o,rMinMax:de,gMinMax:be,bMinMax:it}}function Oi(a,s,n){var r=a.slice().sort(function(d,S){return d-S}),t=r.length,o=r[Math.ceil(t*s/100)],u=r[Math.ceil(t*n/100)];return[o,u]}function fi(a,s,n){return va.apply(this,arguments)}function va(){return va=(0,ft.Z)(fe().mark(function a(s,n,r){var t,o,u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(s.length!==0){be.next=2;break}return be.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return be.next=4,Promise.all(s.map(function(it){var nt=it.data,Kt=it.bands,tr=Kt===void 0?[0]:Kt;return n(nt,tr)}));case 4:t=be.sent,o=[],t.forEach(function(it){Array.isArray(it)?o.push.apply(o,(0,le.Z)(it)):o.push(it)}),u=o[0],d=u.width,S=u.height,be.t0=(0,Ne.Z)(r),be.next=be.t0==="function"?11:be.t0==="object"?13:15;break;case 11:return z=r(o),be.abrupt("break",16);case 13:return Array.isArray(r)?z={rasterData:La(r,o)}:z=wa(r,o),be.abrupt("break",16);case 15:z={rasterData:o[0].rasterData};case 16:return be.abrupt("return",(0,ge.Z)((0,ge.Z)({},z),{},{width:d,height:S}));case 17:case"end":return be.stop()}},a)})),va.apply(this,arguments)}function wa(a,s){var n=An[a.type];if(n.type==="function")return n.method(s,a==null?void 0:a.options);if(n.type==="operation")return a.type==="rgb"?Ca(n.expression,s):{rasterData:La(n.expression,s)}}function Ca(a,s){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var n=La(a.r||["band",0],s),r=La(a.g||["band",0],s),t=La(a.b||["band",0],s);return[n,r,t]}function Aa(a,s,n,r){return ma.apply(this,arguments)}function ma(){return ma=(0,ft.Z)(fe().mark(function a(s,n,r,t){var o;return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,fi(s,n,r);case 2:o=d.sent,t(null,{data:o});case 4:case"end":return d.stop()}},a)})),ma.apply(this,arguments)}function ka(a,s){return a.map(function(n){return n[s]*1})}function Uo(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function ha(a){return Array.isArray(a)?a.length===0?!1:!!Uo(a[0]):!1}function xa(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function eo(a,s){var n=s.extent,r=s.width,t=s.height,o=s.min,u=s.max,d=s.format,S=s.operation,z,de,be;if(d===void 0||xa(a))z=Array.from(a),de=r,be=t;else{var it=Array.isArray(a)?a:[a];z=fi(it,d,S)}var nt={_id:1,dataArray:[{_id:1,data:z,width:de,height:be,min:o,max:u,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return nt}var Te=g(54095),Po=function(){var a=(0,ft.Z)(fe().mark(function s(n,r,t,o){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(S,z){r({x:n.x,y:n.y,z:n.z},function(de,be){if(de||be.length===0){z(de);return}be&&Aa([{data:be,bands:[0]}],t,o,function(it,nt){it?z(it):nt&&S(nt)})})}));case 1:case"end":return d.stop()}},s)}));return function(n,r,t,o){return a.apply(this,arguments)}}();function Hs(a,s){return Array.isArray(a)?typeof a[0]=="string"?a.map(function(n){return(0,tt.z0)(n,s)}):a.map(function(n){return{url:(0,tt.z0)(n.url,s),bands:n.bands||[0]}}):(0,tt.z0)(a,s)}function no(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(function(s){return{url:s,bands:[0]}}):a}function Jo(a,s){a.xhrCancel=function(){s.map(function(n){n.abort()})}}var os=function(){var a=(0,ft.Z)(fe().mark(function s(n,r,t,o,u){var d,S,z,de,be,it;return fe().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(d=no(r.url),!(d.length>1)){Kt.next=15;break}return Kt.next=4,Go(d,r);case 4:if(S=Kt.sent,z=S.rasterFiles,de=S.xhrList,be=S.errList,Jo(n,de),!(be.length>0)){Kt.next=12;break}return t(be,null),Kt.abrupt("return");case 12:Aa(z,o,u,t),Kt.next=17;break;case 15:it=(0,tt.ks)(r,function(tr,Ir){if(tr)t(tr);else if(Ir){var jr=[{data:Ir,bands:d[0].bands}];Aa(jr,o,u,t)}}),Jo(n,[it]);case 17:case"end":return Kt.stop()}},s)}));return function(n,r,t,o,u){return a.apply(this,arguments)}}();function Go(a,s){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,ft.Z)(fe().mark(function a(s,n){var r,t,o,u,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:r=[],t=[],o=[],u=0;case 4:if(!(u<s.length)){tr.next=20;break}return d=s[u],S=(0,ge.Z)((0,ge.Z)({},n),{},{url:d.url}),z=d.bands,tr.next=10,(0,tt.LF)((0,ge.Z)((0,ge.Z)({},S),{},{type:"arrayBuffer"}));case 10:de=tr.sent,be=de.err,it=de.data,nt=de.xhr,be&&o.push(be),t.push(nt),r.push({data:it,bands:z});case 17:u++,tr.next=4;break;case 20:return tr.abrupt("return",{rasterFiles:r,xhrList:t,errList:o});case 21:case"end":return tr.stop()}},a)})),Wo.apply(this,arguments)}var za=function(){var a=(0,ft.Z)(fe().mark(function s(n,r,t,o,u){var d;return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return d={url:Hs(n,r)},z.abrupt("return",new Promise(function(de,be){os(t,d,function(it,nt){it?be(it):nt&&de(nt)},o,u)}));case 2:case"end":return z.stop()}},s)}));return function(n,r,t,o,u){return a.apply(this,arguments)}}(),Tu=function(){var a=(0,ft.Z)(fe().mark(function s(n,r,t,o){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return d=Array.isArray(n)?n[0]:n,o.wmtsOptions?(S=(o==null?void 0:o.getURLFromTemplate)||tt.jG,u=S(d,(0,ge.Z)((0,ge.Z)({},r),o.wmtsOptions))):(z=(o==null?void 0:o.getURLFromTemplate)||tt.z0,u=z(d,r)),be.abrupt("return",new Promise(function(it,nt){var Kt,tr=(0,tt.gJ)({url:u,type:(o==null||(Kt=o.requestParameters)===null||Kt===void 0?void 0:Kt.type)||"arrayBuffer"},function(Ir,jr){Ir?nt(Ir):jr&&it(jr)},o.transformResponse);t.xhrCancel=function(){return tr.abort()}}));case 3:case"end":return be.stop()}},s)}));return function(n,r,t,o){return a.apply(this,arguments)}}(),ws=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},Zs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},ts=[Te.n3.ARRAYBUFFER,Te.n3.RGB];function Vs(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function ou(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vs(a))throw new Error("tile server url is error");var n=(s==null?void 0:s.dataType)||Te.n3.IMAGE;n===Te.n3.RGB&&(n=Te.n3.ARRAYBUFFER);var r=function(u,d){switch(n){case Te.n3.IMAGE:return Tu(a,u,d,s);case Te.n3.ARRAYBUFFER:return za(a,u,d,(s==null?void 0:s.format)||ws,s==null?void 0:s.operation);case Te.n3.CUSTOMARRAYBUFFER:case Te.n3.CUSTOMRGB:return Po(d,s==null?void 0:s.getCustomData,(s==null?void 0:s.format)||ws,s==null?void 0:s.operation);default:return Tu(a,u,d,s)}},t=(0,ge.Z)((0,ge.Z)((0,ge.Z)({},Zs),s),{},{getTileData:r});return{data:a,dataArray:[],tilesetOptions:t,isTile:!0}}var ls=g(91),ki=["extent","min","max","width","height","format","operation"];function As(a,s){var n=s.extent,r=s.min,t=s.max,o=s.width,u=s.height,d=s.format,S=s.operation,z=(0,ls.Z)(s,ki),de;if(d===void 0||xa(a))de=Array.from(a);else{var be=Array.isArray(a)?a:[a];de=fi(be,d,S)}var it={_id:1,dataArray:[(0,ge.Z)((0,ge.Z)({_id:1,data:de,width:o,height:u},z),{},{min:r,max:t,coordinates:[[n[0],n[1]],[n[2],n[3]]]})]};return it}var Rs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},hr=function(){var a=(0,ft.Z)(fe().mark(function s(n){return fe().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(o){var u=(0,xi.Z)(n.bounds,4),d=u[0],S=u[1],z=u[2],de=u[3],be={layers:{testTile:{features:[{type:"Feature",properties:{key:n.x+"/"+n.y+"/"+n.z,textLng:(d+z)/2,textLat:(S+de)/2},geometry:{type:"LineString",coordinates:[[z,de],[z,S],[d,S],[d,S]]}}]}}};o(be)}));case 1:case"end":return t.stop()}},s)}));return function(n){return a.apply(this,arguments)}}();function Lr(a,s){var n=function(o){return hr(o)},r=(0,ge.Z)((0,ge.Z)((0,ge.Z)({},Rs),s),{},{getTileData:n});return{data:a,dataArray:[],tilesetOptions:r,isTile:!0}}var or=g(97326),kr=g(60136),Hn=g(82963),zr=g(61120),Bo=g(46343),Vr=g(26729),cr=g.n(Vr),ht=g(96486),ur=g(69848),er=g.n(ur);function sn(a,s){var n=s.radius,r=n===void 0?40:n,t=s.maxZoom,o=t===void 0?18:t,u=s.minZoom,d=u===void 0?0:u,S=s.zoom,z=S===void 0?2:S;if(a.pointIndex){var de=a.pointIndex.getClusters(a.extent,Math.floor(z));return a.dataArray=fn(de),a}var be=new(er())({radius:r,minZoom:d,maxZoom:o}),it={type:"FeatureCollection",features:[]};return it.features=a.dataArray.map(function(nt){return{type:"Feature",geometry:{type:"Point",coordinates:nt.coordinates},properties:(0,ge.Z)({},nt)}}),be.load(it.features),be}function fn(a){return a.map(function(s,n){return(0,ge.Z)({coordinates:s.geometry.coordinates,_id:n+1},s.properties)})}function Vn(a){if(a.length===0)throw new Error("max requires at least one data point");for(var s=a[0],n=1;n<a.length;n++)a[n]>s&&(s=a[n]);return s}function ni(a){if(a.length===0)throw new Error("min requires at least one data point");for(var s=a[0],n=1;n<a.length;n++)a[n]<s&&(s=a[n]);return s}function oi(a){if(a.length===0)return 0;for(var s=a[0],n=0,r,t=1;t<a.length;t++)r=s+a[t]*1,Math.abs(s)>=Math.abs(a[t])?n+=s-r+a[t]:n+=a[t]-r+s,s=r;return s+n*1}function Ei(a){if(a.length===0)throw new Error("mean requires at least one data point");return oi(a)/a.length}var qi={min:ni,max:Vn,mean:Ei,sum:oi};function Pr(a){var s=Cn();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Cn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function ln(a,s){if(Array.isArray(s))return s}var bn=function(a){(0,kr.Z)(n,a);var s=Pr(n);function n(r,t){var o;return(0,Cr.Z)(this,n),o=s.call(this),(0,bt.Z)((0,or.Z)(o),"type","source"),(0,bt.Z)((0,or.Z)(o),"isTile",!1),(0,bt.Z)((0,or.Z)(o),"inited",!1),(0,bt.Z)((0,or.Z)(o),"hooks",{init:new Bo.ni}),(0,bt.Z)((0,or.Z)(o),"parser",{type:"geojson"}),(0,bt.Z)((0,or.Z)(o),"transforms",[]),(0,bt.Z)((0,or.Z)(o),"cluster",!1),(0,bt.Z)((0,or.Z)(o),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,bt.Z)((0,or.Z)(o),"invalidExtent",!1),(0,bt.Z)((0,or.Z)(o),"dataArrayChanged",!1),(0,bt.Z)((0,or.Z)(o),"cfg",{autoRender:!0}),o.originData=r,o.initCfg(t),o.init().then(function(){o.inited=!0,o.emit("update",{type:"inited"})}),o}return(0,Nr.Z)(n,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(t){return this.clusterIndex.getClusters(this.caculClusterExtent(2),t)}},{key:"getClustersLeaves",value:function(t){return this.clusterIndex.getLeaves(t,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(t){var o=this,u=this.clusterOptions,d=u.method,S=d===void 0?"sum":d,z=u.field,de=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(t));this.clusterOptions.zoom=t,de.forEach(function(be){be.id||(be.properties.point_count=1)}),(z||(0,ht.isFunction)(S))&&(de=de.map(function(be){var it=be.id;if(it){var nt=o.clusterIndex.getLeaves(it,1/0),Kt=nt.map(function(jr){return jr.properties}),tr;if((0,ht.isString)(S)&&z){var Ir=ka(Kt,z);tr=qi[S](Ir)}(0,ht.isFunction)(S)&&(tr=S(Kt)),be.properties.stat=tr}else be.properties.point_count=1;return be})),this.data=c("geojson")({type:"FeatureCollection",features:de}),this.executeTrans()}},{key:"getFeatureById",value:function(t){var o=this.parser,u=o.type,d=u===void 0?"geojson":u,S=o.geometry;if(d==="geojson"&&!this.cluster){var z=t<this.originData.features.length?this.originData.features[t]:"null",de=(0,ht.cloneDeep)(z);if(de!=null&&de.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var be=this.data.dataArray.find(function(it){return it._id===t});de.properties=be}return de}else return d==="json"&&S?this.data.dataArray.find(function(it){return it._id===t}):t<this.data.dataArray.length?this.data.dataArray[t]:"null"}},{key:"updateFeaturePropertiesById",value:function(t,o){this.data.dataArray=this.data.dataArray.map(function(u){return u._id===t?(0,ge.Z)((0,ge.Z)({},u),o):u}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(t,o){var u=this.data.dataArray.find(function(d){return d[t]===o});return u==null?void 0:u._id}},{key:"setData",value:function(t,o){var u=this;this.originData=t,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(function(){u.emit("update",{type:"update"})})}},{key:"destroy",value:function(){var t;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(t=this.tileset)===null||t===void 0||t.destroy()}},{key:"processData",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",new Promise(function(z,de){try{u.excuteParser(),u.initCluster(),u.executeTrans(),z({})}catch(be){de(be)}}));case 1:case"end":return S.stop()}},o)}));function t(){return r.apply(this,arguments)}return t}()},{key:"initCfg",value:function(t){this.cfg=(0,ht.mergeWith)(this.cfg,t,ln);var o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,ge.Z)((0,ge.Z)({},this.clusterOptions),o.clusterOptions)))}},{key:"init",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.inited=!1,d.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"excuteParser",value:function(){var t=this.parser,o=t.type||"geojson",u=c(o);this.data=u(this.originData,t),this.tileset=this.initTileset(),!t.cancelExtent&&(this.extent=(0,tt.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(t){this.center=[(t[0]+t[2])/2,(t[1]+t[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var t=this.data.tilesetOptions;if(t){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(t),this.tileset;var o=new tt.nx((0,ge.Z)({},t));return o}}},{key:"executeTrans",value:function(){var t=this,o=this.transforms;o.forEach(function(u){var d=u.type,S=N(d)(t.data,u);Object.assign(t.data,S)})}},{key:"initCluster",value:function(){if(this.cluster){var t=this.clusterOptions||{};this.clusterIndex=sn(this.data,t)}}},{key:"caculClusterExtent",value:function(t){var o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,tt.yA)((0,tt.ds)(this.extent),t)),o[0].concat(o[1])}}]),n}(Vr.EventEmitter);function Kn(a,s){var n=s.callback;return n&&(a.dataArray=a.dataArray.filter(n)),a}function bi(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Yi(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Yi(a,s){if(a){if(typeof a=="string")return Gi(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gi(a,s)}}function Gi(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var aa=6378e3;function Ta(a,s){var n=a.dataArray,r=s.size,t=r===void 0?10:r,o=t/(2*Math.PI*aa)*(256<<20)/2,u=R(n,t),d=u.gridHash,S=u.gridOffset,z=nr(d,S,s);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:z}}function R(a,s){var n=1/0,r=-1/0,t,o=bi(a),u;try{for(o.s();!(u=o.n()).done;){var d=u.value;t=d.coordinates[1],Number.isFinite(t)&&(n=t<n?t:n,r=t>r?t:r)}}catch(tn){o.e(tn)}finally{o.f()}var S=(n+r)/2,z=_e(s,S);if(z.xOffset<=0||z.yOffset<=0)return{gridHash:{},gridOffset:z};var de={},be=bi(a),it;try{for(be.s();!(it=be.n()).done;){var nt=it.value,Kt=nt.coordinates[1],tr=nt.coordinates[0];if(Number.isFinite(Kt)&&Number.isFinite(tr)){var Ir=Math.floor((Kt+90)/z.yOffset),jr=Math.floor((tr+180)/z.xOffset),on="".concat(Ir,"-").concat(jr);de[on]=de[on]||{count:0,points:[]},de[on].count+=1,de[on].points.push(nt)}}}catch(tn){be.e(tn)}finally{be.f()}return{gridHash:de,gridOffset:z}}function _e(a,s){var n=At(a),r=Ke(s,a);return{yOffset:n,xOffset:r}}function At(a){return a/aa*(180/Math.PI)}function Ke(a,s){return s/aa*(180/Math.PI)/Math.cos(a*Math.PI/180)}function nr(a,s,n){return Object.keys(a).reduce(function(r,t,o){var u=t.split("-"),d=parseInt(u[0],10),S=parseInt(u[1],10),z={};if(n.field&&n.method){var de=tt.a5.getColumn(a[t].points,n.field);z[n.method]=tt.a5.statMap[n.method](de)}return Object.assign(z,{_id:o,coordinates:(0,tt.Z)([-180+s.xOffset*(S+.5),-90+s.yOffset*(d+.5)]),rawData:a[t].points,count:a[t].count}),r.push(z),r},[])}var wr=Math.PI/3,Wr=[0,wr,2*wr,3*wr,4*wr,5*wr];function In(a){return a[0]}function Dn(a){return a[1]}function Mi(){var a=0,s=0,n=1,r=1,t=In,o=Dn,u,d,S;function z(be){var it={},nt=[],Kt,tr=be.length;for(Kt=0;Kt<tr;++Kt)if(!(isNaN(jr=+t.call(null,Ir=be[Kt],Kt,be))||isNaN(on=+o.call(null,Ir,Kt,be)))){var Ir,jr,on,tn=Math.round(on=on/S),Yn=Math.round(jr=jr/d-(tn&1)/2),ci=on-tn;if(Math.abs(ci)*3>1){var Zi=jr-Yn,zi=Yn+(jr<Yn?-1:1)/2,pa=tn+(on<tn?-1:1),_o=jr-zi,wo=on-pa;Zi*Zi+ci*ci>_o*_o+wo*wo&&(Yn=zi+(tn&1?1:-1)/2,tn=pa)}var Ba=Yn+"-"+tn,ms=it[Ba];ms?ms.push(Ir):(nt.push(ms=it[Ba]=[Ir]),ms.x=(Yn+(tn&1)/2)*d,ms.y=tn*S)}return nt}function de(be){var it=0,nt=0;return Wr.map(function(Kt){var tr=Math.sin(Kt)*be,Ir=-Math.cos(Kt)*be,jr=tr-it,on=Ir-nt;return it=tr,nt=Ir,[jr,on]})}return z.hexagon=function(be){return"m"+de(be==null?u:+be).join("l")+"z"},z.centers=function(){for(var be=[],it=Math.round(s/S),nt=Math.round(a/d),Kt=it*S;Kt<r+u;Kt+=S,++it)for(var tr=nt*d+(it&1)*d/2;tr<n+d/2;tr+=d)be.push([tr,Kt]);return be},z.mesh=function(){var be=de(u).slice(0,4).join("l");return z.centers().map(function(it){return"M"+it+"m"+be}).join("")},z.x=function(be){return arguments.length?(t=be,z):t},z.y=function(be){return arguments.length?(o=be,z):o},z.radius=function(be){return arguments.length?(u=+be,d=u*2*Math.sin(wr),S=u*1.5,z):u},z.size=function(be){return arguments.length?(a=s=0,n=+be[0],r=+be[1],z):[n-a,r-s]},z.extent=function(be){return arguments.length?(a=+be[0][0],s=+be[0][1],n=+be[1][0],r=+be[1][1],z):[[a,s],[n,r]]},z.radius(1)}var Bi=6378e3;function io(a,s){var n=a.dataArray,r=s.size,t=r===void 0?10:r,o=s.method,u=o===void 0?"sum":o,d=t/(2*Math.PI*Bi)*(256<<20)/2,S=n.map(function(it){var nt=(0,tt.Z)(it.coordinates),Kt=(0,xi.Z)(nt,2),tr=Kt[0],Ir=Kt[1];return(0,ge.Z)((0,ge.Z)({},it),{},{coordinates:[tr,Ir]})}),z=Mi().radius(d).x(function(it){return it.coordinates[0]}).y(function(it){return it.coordinates[1]}),de=z(S),be={dataArray:de.map(function(it,nt){var Kt;if(s.field&&u){var tr=tt.a5.getColumn(it,s.field);it[u]=tt.a5.statMap[u](tr)}return Kt={},(0,bt.Z)(Kt,s.method,it[u]),(0,bt.Z)(Kt,"count",it.length),(0,bt.Z)(Kt,"rawData",it),(0,bt.Z)(Kt,"coordinates",[it.x,it.y]),(0,bt.Z)(Kt,"_id",nt),Kt}),radius:d,xOffset:d,yOffset:d,type:"hexagon"};return be}function co(a,s){var n=s.sourceField,r=s.targetField,t=s.data,o={};return t.forEach(function(u){o[u[n]]=u}),a.dataArray=a.dataArray.map(function(u){var d=u[r];return(0,ge.Z)((0,ge.Z)({},u),o[d])}),a}function Sa(a,s){var n=s.callback;return n&&(a.dataArray=a.dataArray.map(n)),a}K("rasterTile",ou),K("mvt",na),K("geojsonvt",fr),K("testTile",Lr),K("geojson",lt),K("image",Yr),K("csv",xe),K("json",ne),K("raster",eo),K("rasterRgb",As),Z("cluster",sn),Z("filter",Kn),Z("join",co),Z("map",Sa),Z("grid",Ta),Z("hexagon",io);var Ko=bn;function Co(a){var s=Oo();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Oo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ho=function(a){(0,kr.Z)(n,a);var s=Co(n);function n(r){var t;return(0,Cr.Z)(this,n),t=s.call(this),(0,bt.Z)((0,or.Z)(t),"added",!1),(0,bt.Z)((0,or.Z)(t),"eventHandle",function(o){t.polyfillEvent(o),t.emit(o.type,{target:o,data:t.markerOption.extData,lngLat:t.lngLat})}),t.markerOption=(0,ge.Z)((0,ge.Z)({},t.getDefault()),r),(0,tt.Ev)(["update","onMove","onMapClick"],(0,or.Z)(t)),t.init(),t}return(0,Nr.Z)(n,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:tt.bV.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(t){this.scene=t,this.mapsService=t.get(Te.vK.IMapService),this.sceneSerive=t.get(Te.vK.ISceneService);var o=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var t=this.markerOption.element;return t&&tt.SO.remove(t),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(t){var o=this;if(!this.added)return this.once("added",function(){o.setElement(t)}),this;var u=this.markerOption.element;return u&&tt.SO.remove(u),this.markerOption.element=t,this.init(),this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.update(),this}},{key:"openPopup",value:function(){var t=this;if(!this.added)return this.once("added",function(){t.openPopup()}),this;var o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var t=this;this.added||this.once("added",function(){t.closePopup()});var o=this.popup;return o&&o.remove(),this}},{key:"setPopup",value:function(t){return this.popup=t,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var t=this.popup;if(t)t.isOpen()?t.remove():t.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(t){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(t){this.markerOption.extData=t}},{key:"update",value:function(){if(this.mapsService){var t=this.markerOption,o=t.element,u=t.anchor;this.updatePosition(),tt.SO.setTransform(o,"".concat(tt.rQ[u]))}}},{key:"onMapClick",value:function(t){var o=this.markerOption.element;this.popup&&o&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var t=this.mapsService.getContainer();return{containerHeight:(t==null?void 0:t.scrollHeight)||0,containerWidth:(t==null?void 0:t.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.markerOption,o=t.element,u=t.offsets,d=this.lngLat,S=d.lng,z=d.lat,de=this.mapsService.lngLatToContainer([S,z]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";var be=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),it=be.containerHeight,nt=be.containerWidth,Kt=be.bounds;if(!Kt)return;if(Math.abs(Kt[0][0])>180||Math.abs(Kt[1][0])>180){if(de.x>nt){var tr=this.mapsService.lngLatToContainer([S-360,z]);de.x=tr.x}if(de.x<0){var Ir=this.mapsService.lngLatToContainer([S+360,z]);de.x=Ir.x}}(de.x>nt||de.x<0||de.y>it||de.y<0)&&(o.style.display="none"),o.style.left=de.x+u[0]+"px",o.style.top=de.y-u[1]+"px"}}}},{key:"init",value:function(){var t=this,o=this.markerOption.element,u=this.markerOption,d=u.color,S=u.anchor;if(!o){this.defaultMarker=!0,o=tt.SO.create("div"),this.markerOption.element=o;var z=document.createElementNS("http://www.w3.org/2000/svg","svg");z.setAttributeNS(null,"display","block"),z.setAttributeNS(null,"height","48px"),z.setAttributeNS(null,"width","48px"),z.setAttributeNS(null,"viewBox","0 0 1024 1024");var de=document.createElementNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),de.setAttributeNS(null,"fill",d),z.appendChild(de),o.appendChild(z)}tt.SO.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(be){var it,nt,Kt=((it=t.markerOption)===null||it===void 0?void 0:it.style)&&((nt=t.markerOption)===null||nt===void 0?void 0:nt.style[be]);o&&(o.style[be]=Kt)}),o.addEventListener("click",function(be){t.onMapClick(be)}),o.addEventListener("click",this.eventHandle),(0,tt.zi)(o,S,"marker")}},{key:"registerMarkerEvent",value:function(t){t.addEventListener("mousemove",this.eventHandle),t.addEventListener("click",this.eventHandle),t.addEventListener("mousedown",this.eventHandle),t.addEventListener("mouseup",this.eventHandle),t.addEventListener("dblclick",this.eventHandle),t.addEventListener("contextmenu",this.eventHandle),t.addEventListener("mouseover",this.eventHandle),t.addEventListener("mouseout",this.eventHandle),t.addEventListener("touchstart",this.eventHandle),t.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var t=this.getElement();t.removeEventListener("mousemove",this.eventHandle),t.removeEventListener("click",this.eventHandle),t.removeEventListener("mousedown",this.eventHandle),t.removeEventListener("mouseup",this.eventHandle),t.removeEventListener("dblclick",this.eventHandle),t.removeEventListener("contextmenu",this.eventHandle),t.removeEventListener("mouseover",this.eventHandle),t.removeEventListener("mouseout",this.eventHandle),t.removeEventListener("touchstart",this.eventHandle),t.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(t){!this.mapsService||this.mapsService.version!=="GAODE2.x"||!(0,tt.Ro)()&&tt.Tt&&(t.type==="touchstart"&&(this.touchStartTime=Date.now()),t.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:t,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(t){return null}},{key:"onUp",value:function(t){throw new Error("Method not implemented.")}}]),n}(Vr.EventEmitter);function Io(a){var s=Js();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Js(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Il=function(a){(0,kr.Z)(n,a);var s=Io(n);function n(r){var t,o;return(0,Cr.Z)(this,n),o=s.call(this),(0,bt.Z)((0,or.Z)(o),"markers",[]),(0,bt.Z)((0,or.Z)(o),"points",[]),(0,bt.Z)((0,or.Z)(o),"clusterMarkers",[]),o.markerLayerOption=(0,ht.merge)(o.getDefault(),r),(0,tt.Ev)(["update"],(0,or.Z)(o)),o.zoom=((t=o.markerLayerOption.clusterOption)===null||t===void 0?void 0:t.zoom)||-99,o}return(0,Nr.Z)(n,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(t){return this.scene=t,this.mapsService=t.get(Te.vK.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}},{key:"setContainerSize",value:function(){if(this.mapsService){var t=this.mapsService.getContainer();this.containerSize={containerWidth:(t==null?void 0:t.scrollWidth)||0,containerHeight:(t==null?void 0:t.scrollHeight)||0,bounds:this.mapsService.getBounds()}}}},{key:"getContainerSize",value:function(){return this.containerSize}},{key:"addMarker",value:function(t){var o=this.markerLayerOption.cluster;if(t.getMarkerLayerContainerSize=this.getContainerSize.bind(this),o&&(this.addPoint(t,this.markers.length),this.mapsService)){var u=this.mapsService.getZoom(),d=this.mapsService.getBounds();this.bbox=(0,tt.yA)(d,.5),this.zoom=Math.floor(u),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(t)}},{key:"removeMarker",value:function(t){this.markers.indexOf(t);var o=this.markers.indexOf(t);o>-1&&this.markers.splice(o,1)}},{key:"hide",value:function(){this.markers.map(function(t){t.getElement().style.opacity="0"}),this.clusterMarkers.map(function(t){t.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(t){t.getElement().style.opacity="1"}),this.clusterMarkers.map(function(t){t.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var t=this.markerLayerOption.cluster;return t?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var t=this;this.getMarkers().forEach(function(o){o.addTo(t.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(t){t.remove()}),this.clusterMarkers.forEach(function(t){t.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}},{key:"addPoint",value:function(t,o){var u=t.getLnglat(),d=u.lng,S=u.lat,z={geometry:{type:"Point",coordinates:[d,S]},properties:(0,ge.Z)((0,ge.Z)({},t.getExtData()),{},{marker_id:o})};this.points.push(z),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var t=this.markerLayerOption.clusterOption,o=t.radius,u=t.minZoom,d=u===void 0?0:u,S=t.maxZoom;this.clusterIndex=new(er())({radius:o,minZoom:d,maxZoom:S}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(t,o){var u=this,d=t[0].concat(t[1]),S=this.clusterIndex.getClusters(d,o);this.clusterMarkers.forEach(function(z){z.remove()}),this.clusterMarkers=[],S.forEach(function(z){var de,be=u.markerLayerOption.clusterOption,it=be.field,nt=be.method;if((de=z.properties)!==null&&de!==void 0&&de.cluster_id){var Kt,tr=u.getLeaves((Kt=z.properties)===null||Kt===void 0?void 0:Kt.cluster_id);if(z.properties.clusterData=tr,it&&nt){var Ir=tr==null?void 0:tr.map(function(ci){var Zi=(0,bt.Z)({},it,ci.properties[it]);return Zi}),jr=tt.a5.getColumn(Ir,it),on=tt.a5.getSatByColumn(nt,jr),tn="point_"+nt;z.properties[tn]=on.toFixed(2)}}var Yn=u.clusterMarker(z);u.clusterMarkers.push(Yn),Yn.addTo(u.scene)})}},{key:"getLeaves",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t?this.clusterIndex.getLeaves(t,o,u):null}},{key:"clusterMarker",value:function(t){var o=this.markerLayerOption.clusterOption,u=o,d=u.element,S=d===void 0?this.generateElement.bind(this):d,z=new Ho({element:S(t)}).setLnglat({lng:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]});return z}},{key:"normalMarker",value:function(t){var o=t.properties.marker_id;return this.markers[o]}},{key:"update",value:function(){if(this.mapsService&&this.markers.length!==0){var t=this.mapsService.getZoom(),o=this.mapsService.getBounds();(!this.bbox||Math.abs(t-this.zoom)>=1||!(0,tt.oO)(this.bbox,o))&&(this.bbox=(0,tt.yA)(o,.5),this.zoom=Math.floor(t),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(t){var o=tt.SO.create("div","l7-marker-cluster"),u=tt.SO.create("div","",o),d=tt.SO.create("span","",u),S=this.markerLayerOption.clusterOption,z=S.field,de=S.method;t.properties.point_count=t.properties.point_count||1;var be=z&&de?t.properties["point_"+de]||t.properties[z]:t.properties.point_count;return d.textContent=be,o}}]),n}(Vr.EventEmitter),Ao=g(4157),Va=g(73237);function gs(a){var s=Ws();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ws(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bs=function(a){(0,kr.Z)(n,a);var s=gs(n);function n(r){var t;return(0,Cr.Z)(this,n),t=s.call(this),n.controlCount++,t.controlOption=(0,ge.Z)((0,ge.Z)({},t.getDefault(r)),r||{}),t}return(0,Nr.Z)(n,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(t){var o=this.getDefault(t);Object.entries(t).forEach(function(u){var d=(0,xi.Z)(u,2),S=d[0],z=d[1];z===void 0&&(t[S]=o[S])}),"position"in t&&this.setPosition(t.position),"className"in t&&this.setClassName(t.className),"style"in t&&this.setStyle(t.style),this.controlOption=(0,ge.Z)((0,ge.Z)({},this.controlOption),t)}},{key:"addTo",value:function(t){this.mapsService=t.get(Te.vK.IMapService),this.renderService=t.get(Te.vK.IRendererService),this.layerService=t.get(Te.vK.ILayerService),this.controlService=t.get(Te.vK.IControlService),this.configService=t.get(Te.vK.IGlobalConfigService),this.scene=t.get(Te.vK.ISceneService),this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd(),tt.SO.addClass(this.container,"l7-control");var o=this.controlOption,u=o.className,d=o.style;return u&&this.setClassName(u),d&&this.setStyle(d),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;tt.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return tt.SO.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var t=this.container;tt.SO.removeClass(t,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var t=this.container;tt.SO.addClass(t,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(t){return{position:Te.d.TOPRIGHT,name:"".concat(n.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){var o=this.mapsService.getContainer();o!==null&&o.focus()}}},{key:"setPosition",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.d.TOPLEFT,o=this.controlService;return o&&o.removeControl(this),this.controlOption.position=t,o&&o.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(t){var o=this.container,u=this.controlOption.className;u&&tt.SO.removeClass(o,u),t&&tt.SO.addClass(o,t)}},{key:"setStyle",value:function(t){var o=this.container;t?o.setAttribute("style",t):o.removeAttribute("style")}},{key:"insertContainer",value:function(){var t=this.controlOption.position,o=this.container;if(t instanceof Element)t.appendChild(o);else{var u=this.controlService.controlCorners[t];t.indexOf("bottom")!==-1?u.insertBefore(o,u.firstChild):u.appendChild(o)}}},{key:"checkUpdateOption",value:function(t,o){return o.some(function(u){return u in t})}}]),n}(cr());(0,bt.Z)(bs,"controlCount",0);function Ps(a){var s=Xs();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Xs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gl=function(a){(0,kr.Z)(n,a);var s=Ps(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"isDisable",!1),r}return(0,Nr.Z)(n,[{key:"setIsDisable",value:function(t){if(this.isDisable=t,t){var o;(o=this.button)===null||o===void 0||o.setAttribute("disabled","true")}else{var u;(u=this.button)===null||u===void 0||u.removeAttribute("disabled")}}},{key:"createButton",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return tt.SO.create("button","l7-button-control ".concat(t))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var t=this.controlOption,o=t.title,u=t.btnText,d=t.btnIcon;return this.setBtnTitle(o),this.setBtnText(u),this.setBtnIcon(d),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(t){var o=t.title,u=t.btnText,d=t.btnIcon;this.checkUpdateOption(t,["title"])&&this.setBtnTitle(o),this.checkUpdateOption(t,["btnIcon"])&&this.setBtnIcon(d),this.checkUpdateOption(t,["btnText"])&&this.setBtnText(u),(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t)}},{key:"setBtnTitle",value:function(t){var o;(o=this.button)===null||o===void 0||o.setAttribute("title",t!=null?t:"")}},{key:"setBtnIcon",value:function(t){if(this.buttonIcon&&tt.SO.remove(this.buttonIcon),t){var o,u=(o=this.button)===null||o===void 0?void 0:o.firstChild;if(u){var d;(d=this.button)===null||d===void 0||d.insertBefore(t,u)}else{var S;(S=this.button)===null||S===void 0||S.appendChild(t)}this.buttonIcon=t}}},{key:"setBtnText",value:function(t){if(this.button)if(tt.SO.removeClass(this.button,"l7-button-control--row"),tt.SO.removeClass(this.button,"l7-button-control--column"),t){var o=this.buttonText;if(!o){var u;o=tt.SO.create("div","l7-button-control__text"),(u=this.button)===null||u===void 0||u.appendChild(o),this.buttonText=o}o.innerText=t,tt.SO.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!t&&this.buttonText&&(tt.SO.remove(this.buttonText),this.buttonText=void 0)}}]),n}(bs);function jf(a){var s=Mu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yl=function(a){(0,kr.Z)(n,a);var s=jf(n);function n(r,t){var o;return(0,Cr.Z)(this,n),o=s.call(this),(0,bt.Z)((0,or.Z)(o),"isShow",!1),(0,bt.Z)((0,or.Z)(o),"timeout",null),(0,bt.Z)((0,or.Z)(o),"show",function(){return o.isShow||!o.contentDOM.innerHTML||(o.resetPopperPosition(),tt.SO.removeClass(o.popperDOM,"l7-popper-hide"),o.isShow=!0,o.option.unique&&n.conflictPopperList.forEach(function(u){u!==(0,or.Z)(o)&&u.isShow&&u.hide()}),o.emit("show")),(0,or.Z)(o)}),(0,bt.Z)((0,or.Z)(o),"hide",function(){return o.isShow&&(tt.SO.addClass(o.popperDOM,"l7-popper-hide"),o.isShow=!1,o.emit("hide")),(0,or.Z)(o)}),(0,bt.Z)((0,or.Z)(o),"setHideTimeout",function(){o.timeout||(o.timeout=window.setTimeout(function(){o.isShow&&(o.hide(),o.timeout=null)},300))}),(0,bt.Z)((0,or.Z)(o),"clearHideTimeout",function(){o.timeout&&(window.clearTimeout(o.timeout),o.timeout=null)}),(0,bt.Z)((0,or.Z)(o),"onBtnClick",function(){o.isShow?o.hide():o.show()}),(0,bt.Z)((0,or.Z)(o),"onBtnMouseLeave",function(){o.setHideTimeout()}),(0,bt.Z)((0,or.Z)(o),"onBtnMouseMove",function(){o.clearHideTimeout(),!o.isShow&&o.show()}),o.button=r,o.option=t,o.init(),t.unique&&n.conflictPopperList.push((0,or.Z)(o)),o}return(0,Nr.Z)(n,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(t){typeof t=="string"?this.contentDOM.innerHTML=t:t instanceof HTMLElement&&(tt.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(t)),this.content=t}},{key:"init",value:function(){var t=this.option.trigger;this.popperDOM=this.createPopper(),t==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),tt.SO.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var t={},o=this.option,u=o.container,d=o.offset,S=d===void 0?[0,0]:d,z=o.placement,de=(0,xi.Z)(S,2),be=de[0],it=de[1],nt=this.button.getBoundingClientRect(),Kt=u.getBoundingClientRect(),tr=tt.SO.getDiffRect(nt,Kt),Ir=tr.left,jr=tr.right,on=tr.top,tn=tr.bottom,Yn=!1,ci=!1;/^(left|right)/.test(z)?(z.includes("left")?t.right="".concat(nt.width+jr,"px"):z.includes("right")&&(t.left="".concat(nt.width+Ir,"px")),z.includes("start")?t.top="".concat(on,"px"):z.includes("end")?t.bottom="".concat(tn,"px"):(t.top="".concat(on+nt.height/2,"px"),ci=!0,t.transform="translate(".concat(be,"px, calc(").concat(it,"px - 50%))"))):/^(top|bottom)/.test(z)&&(z.includes("top")?t.bottom="".concat(nt.height+tn,"px"):z.includes("bottom")&&(t.top="".concat(nt.height+on,"px")),z.includes("start")?t.left="".concat(Ir,"px"):z.includes("end")?t.right="".concat(jr,"px"):(t.left="".concat(Ir+nt.width/2,"px"),Yn=!0,t.transform="translate(calc(".concat(be,"px - 50%), ").concat(it,"px)"))),t.transform="translate(calc(".concat(be,"px - ").concat(Yn?"50%":"0%","), calc(").concat(it,"px - ").concat(ci?"50%":"0%",")");var Zi=z.split("-");Zi.length&&tt.SO.addClass(this.popperDOM,Zi.map(function(zi){return"l7-popper-".concat(zi)}).join(" ")),tt.SO.addStyle(this.popperDOM,tt.SO.css2Style(t))}},{key:"createPopper",value:function(){var t=this.option,o=t.container,u=t.className,d=u===void 0?"":u,S=t.content,z=tt.SO.create("div","l7-popper l7-popper-hide ".concat(d)),de=tt.SO.create("div","l7-popper-content"),be=tt.SO.create("div","l7-popper-arrow");return z.appendChild(de),z.appendChild(be),o.appendChild(z),this.popperDOM=z,this.contentDOM=de,S&&this.setContent(S),z}}]),n}(Vr.EventEmitter);(0,bt.Z)(yl,"conflictPopperList",[]);function lc(a){var s=Lc();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Lc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var dh={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},_l=function(a){(0,kr.Z)(n,a);var s=lc(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),(0,Va.Z)((0,zr.Z)(n.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(t){var o,u=(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t),d=(o=t==null?void 0:t.position)!==null&&o!==void 0?o:u.position;return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{popperPlacement:d instanceof Element?"bottom":dh[d],popperTrigger:"click"})}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this);return this.initPopper(),t}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var t=this,o=this.controlOption,u=o.popperClassName,d=o.popperPlacement,S=o.popperTrigger,z=this.mapsService.getMapContainer();return this.popper=new yl(this.button,{className:u,placement:d,trigger:S,container:z,unique:!0}),this.popper.on("show",function(){t.emit("popperShow",t)}).on("hide",function(){t.emit("popperHide",t)}),this.popper}},{key:"setOptions",value:function(t){if((0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["popperPlacement","popperTrigger","popperClassName"])){var o=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(o)}}}]),n}(gl);function Us(a){var s=th();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function th(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Df;(function(a){a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index"})(Df||(Df={}));var Cf=function(a){(0,kr.Z)(n,a);var s=Us(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"selectValue",[]),(0,bt.Z)((0,or.Z)(r),"createNormalOption",function(d){var S=r.selectValue.includes(d.value),z=tt.SO.create("div","l7-select-control-item ".concat(S?Df.ActiveOptionClassName:""));r.getIsMultiple()&&z.appendChild(r.createCheckbox(S)),d.icon&&z.appendChild(d.icon);var de=tt.SO.create("span");return de.innerText=d.text,z.appendChild(de),z}),(0,bt.Z)((0,or.Z)(r),"onItemClick",function(d){if(r.getIsMultiple()){var S=r.selectValue.findIndex(function(z){return z===d.value});S>-1?r.selectValue.splice(S,1):r.selectValue=[].concat((0,le.Z)(r.selectValue),[d.value])}else r.selectValue=[d.value];r.setSelectValue(r.selectValue)}),r}return(0,Nr.Z)(n,[{key:"setOptions",value:function(t){(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t);var o=t.options;o&&this.popper.setContent(this.getPopperContent(o))}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this),o=this.controlOption.defaultValue;return o&&(this.selectValue=this.transSelectValue(o)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),t}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(t){var o=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=this.transSelectValue(t);this.optionDOMList.forEach(function(S){var z=S.getAttribute(Df.OptionValueAttrKey),de=o.getIsMultiple()?S.querySelector("input[type=checkbox]"):void 0;d.includes(z)?(tt.SO.addClass(S,Df.ActiveOptionClassName),de&&tt.SO.setChecked(de,!0)):(tt.SO.removeClass(S,Df.ActiveOptionClassName),de&&tt.SO.setChecked(de,!1))}),this.selectValue=d,u&&this.emit("selectChange",this.getIsMultiple()?d:d[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(t){var o=this,u=this.isImageOptions(),d=tt.SO.create("div",u?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&tt.SO.addClass(d,"l7-select-control--multiple");var S=t.map(function(z,de){var be=u?o.createImageOption(z):o.createNormalOption(z);return be.setAttribute(Df.OptionValueAttrKey,z.value),be.setAttribute(Df.OptionIndexAttrKey,window.String(de)),be.addEventListener("click",o.onItemClick.bind(o,z)),be});return d.append.apply(d,(0,le.Z)(S)),this.optionDOMList=S,d}},{key:"createImageOption",value:function(t){var o=this.selectValue.includes(t.value),u=tt.SO.create("div","l7-select-control-item ".concat(o?Df.ActiveOptionClassName:"")),d=tt.SO.create("img");d.setAttribute("src",t.img),tt.SO.setUnDraggable(d),u.appendChild(d);var S=tt.SO.create("div","l7-select-control-item-row");this.getIsMultiple()&&u.appendChild(this.createCheckbox(o));var z=tt.SO.create("span");return z.innerText=t.text,S.appendChild(z),u.appendChild(S),u}},{key:"createCheckbox",value:function(t){var o=tt.SO.create("input");return o.setAttribute("type","checkbox"),t&&tt.SO.setChecked(o,!0),o}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find(function(t){return t.img})}},{key:"transSelectValue",value:function(t){return Array.isArray(t)?t:[t]}}]),n}(_l),lf=function(s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add("l7-iconfont"),n.setAttribute("aria-hidden","true");var r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(s)),n.appendChild(r),n};function gd(a){var s=Kh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Kh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yc=function(a){(0,kr.Z)(n,a);var s=gd(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"onClick",(0,ft.Z)(fe().mark(function d(){var S;return fe().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(S=r.controlOption.onExport,S!=null){de.next=5;break}de.next=10;break;case 5:return de.t0=S,de.next=8,r.getImage();case 8:de.t1=de.sent,(0,de.t0)(de.t1);case 10:case"end":return de.stop()}},d)}))),(0,bt.Z)((0,or.Z)(r),"mergeImage",(0,ft.Z)(fe().mark(function d(){var S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn,ci,Zi=arguments;return fe().wrap(function(pa){for(;;)switch(pa.prev=pa.next){case 0:for(de=r.controlOption.imageType,be=(S=(z=r.mapsService.getContainer())===null||z===void 0?void 0:z.getBoundingClientRect())!==null&&S!==void 0?S:{},it=be.width,nt=it===void 0?0:it,Kt=be.height,tr=Kt===void 0?0:Kt,Ir=document.createElement("canvas"),Ir.width=nt,Ir.height=tr,jr=Ir.getContext("2d"),on=Zi.length,tn=new Array(on),Yn=0;Yn<on;Yn++)tn[Yn]=Zi[Yn];return pa.next=9,Promise.all(tn.map(function(_o){return new Promise(function(wo){var Ba=new Image;Ba.onload=function(){wo(Ba)},Ba.src=_o})}));case 9:return ci=pa.sent,ci.forEach(function(_o){jr==null||jr.drawImage(_o,0,0,nt,tr)}),pa.abrupt("return",Ir.toDataURL("image/".concat(de)));case 12:case"end":return pa.stop()}},d)}))),r}return(0,Nr.Z)(n,[{key:"onAdd",value:function(){var t=(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this);return t.addEventListener("click",this.onClick),t}},{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:lf("l7-icon-export-picture"),imageType:"png"})}},{key:"getImage",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d;return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.mapsService.exportMap("png");case 2:return u=z.sent,z.next=5,this.scene.exportPng("png");case 5:return d=z.sent,z.abrupt("return",this.mergeImage(u,d));case 7:case"end":return z.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()}]),n}(gl);function Eh(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=cf(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function cf(a,s){if(a){if(typeof a=="string")return Af(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Af(a,s)}}function Af(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var _f=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],kc=function(){if(typeof document=="undefined")return!1;var a=_f[0],s={},n=Eh(_f),r;try{for(n.s();!(r=n.n()).done;){var t=r.value,o=t==null?void 0:t[1];if(o in document){var u=Eh(t.entries()),d;try{for(u.s();!(d=u.n()).done;){var S=(0,xi.Z)(d.value,2),z=S[0],de=S[1];s[a[z]]=de}}catch(be){u.e(be)}finally{u.f()}return s}}}catch(be){n.e(be)}finally{n.f()}return!1}(),Ff={change:kc.fullscreenchange,error:kc.fullscreenerror},Zl={request:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,n=arguments.length>1?arguments[1]:void 0;return new Promise(function(r,t){var o=function d(){Zl.off("change",d),r()};Zl.on("change",o);var u=s[kc.requestFullscreen](n);u instanceof Promise&&u.then(o).catch(t)})},exit:function(){return new Promise(function(s,n){if(!Zl.isFullscreen){s();return}var r=function o(){Zl.off("change",o),s()};Zl.on("change",r);var t=document[kc.exitFullscreen]();t instanceof Promise&&t.then(r).catch(n)})},toggle:function(s,n){return Zl.isFullscreen?Zl.exit():Zl.request(s,n)},onchange:function(s){Zl.on("change",s)},onerror:function(s){Zl.on("error",s)},on:function(s,n){var r=Ff[s];r&&document.addEventListener(r,n,!1)},off:function(s,n){var r=Ff[s];r&&document.removeEventListener(r,n,!1)},raw:kc};Object.defineProperties(Zl,{isFullscreen:{get:function(){return Boolean(document[kc.fullscreenElement])}},element:{enumerable:!0,get:function(){var s;return(s=document[kc.fullscreenElement])!==null&&s!==void 0?s:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[kc.fullscreenEnabled])}}}),kc||(Zl={isEnabled:!1});var Dc=Zl;function ad(a){var s=rh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function rh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var od=function(a){(0,kr.Z)(n,a);var s=ad(n);function n(r){var t;return(0,Cr.Z)(this,n),t=s.call(this,r),(0,bt.Z)((0,or.Z)(t),"isFullscreen",!1),(0,bt.Z)((0,or.Z)(t),"toggleFullscreen",(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!Dc.isEnabled){d.next=3;break}return d.next=3,Dc.toggle(t.mapContainer);case 3:case"end":return d.stop()}},o)}))),(0,bt.Z)((0,or.Z)(t),"onClick",function(){t.toggleFullscreen()}),(0,bt.Z)((0,or.Z)(t),"onFullscreenChange",function(){t.isFullscreen=!!document.fullscreenElement;var o=t.controlOption,u=o.btnText,d=o.btnIcon,S=o.title,z=o.exitBtnText,de=o.exitBtnIcon,be=o.exitTitle;t.isFullscreen?(t.setBtnTitle(be),t.setBtnText(z),t.setBtnIcon(de)):(t.setBtnTitle(S),t.setBtnText(u),t.setBtnIcon(d)),t.emit("fullscreenChange",t.isFullscreen)}),Dc.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316"),t}return(0,Nr.Z)(n,[{key:"setOptions",value:function(t){var o=t.exitBtnText,u=t.exitBtnIcon,d=t.exitTitle;this.isFullscreen&&(this.checkUpdateOption(t,["exitBtnIcon"])&&this.setBtnIcon(u),this.checkUpdateOption(t,["exitBtnText"])&&this.setBtnText(o),this.checkUpdateOption(t,["exitTitle"])&&this.setBtnTitle(d)),(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t)}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this);return t.addEventListener("click",this.onClick),this.mapContainer=tt.SO.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),t}},{key:"onRemove",value:function(){(0,Va.Z)((0,zr.Z)(n.prototype),"onRemove",this).call(this),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}},{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5168\u5C4F",btnIcon:lf("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:lf("l7-icon-exit-fullscreen")})}}]),n}(gl);function Yo(a){var s=Gs();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Gs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Kl=function(a){(0,kr.Z)(n,a);var s=Yo(n);function n(r){var t;return(0,Cr.Z)(this,n),t=s.call(this,r),(0,bt.Z)((0,or.Z)(t),"getGeoLocation",function(){return new Promise(function(o,u){window.navigator.geolocation.getCurrentPosition(function(d){var S=d.coords,z=S!=null?S:{},de=z.longitude,be=z.latitude;!(0,ht.isNaN)(de)&&!(0,ht.isNaN)(be)?o([de,be]):u()},function(d){u(d)})})}),(0,bt.Z)((0,or.Z)(t),"onClick",(0,ft.Z)(fe().mark(function o(){var u,d,S;return fe().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(window.navigator.geolocation){de.next=2;break}return de.abrupt("return");case 2:return u=t.controlOption.transform,de.next=5,t.getGeoLocation();case 5:if(d=de.sent,S=t.mapsService.getZoom(),de.t0=t.mapsService,de.t1=S>15?S:15,!u){de.next=15;break}return de.next=12,u(d);case 12:de.t2=de.sent,de.next=16;break;case 15:de.t2=d;case 16:de.t3=de.t2,de.t0.setZoomAndCenter.call(de.t0,de.t1,de.t3);case 18:case"end":return de.stop()}},o)}))),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D"),t}return(0,Nr.Z)(n,[{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5B9A\u4F4D",btnIcon:lf("l7-icon-reposition")})}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this);return t.addEventListener("click",this.onClick),t}}]),n}(gl);function dl(a){var s=su();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function su(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Fc=function(a){(0,kr.Z)(n,a);var s=dl(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"onLayerChange",function(){var d;(d=r.controlOption.layers)!==null&&d!==void 0&&d.length||(r.selectValue=r.getLayerVisible(),r.setOptions({options:r.getLayerOptions()}))}),(0,bt.Z)((0,or.Z)(r),"onLayerVisibleChane",function(){r.setSelectValue(r.getLayerVisible())}),(0,bt.Z)((0,or.Z)(r),"onSelectChange",function(){r.layers.forEach(function(d){var S=r.selectValue.includes(d.name),z=d.isVisible();S&&!z&&d.show(),!S&&z&&d.hide()})}),r}return(0,Nr.Z)(n,[{key:"layers",get:function(){var t=this.layerService,o=this.controlOption.layers;if(Array.isArray(o)&&o.length){var u=[];return o.forEach(function(d){if(d instanceof Object&&u.push(d),typeof d=="string"){var S=t.getLayer(d)||t.getLayerByName(d);S&&u.push(S)}}),u}return t.getLayers()||[]}},{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:lf("l7-icon-layer"),options:[]})}},{key:"getLayerVisible",value:function(){return this.layers.filter(function(t){return t.isVisible()}).map(function(t){return t.name})}},{key:"getLayerOptions",value:function(){return this.layers.map(function(t){return{text:t.name,value:t.name}})}},{key:"setOptions",value:function(t){var o=this.checkUpdateOption(t,["layers"]);(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t),o&&(this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}},{key:"onAdd",value:function(){var t;return(t=this.controlOption.options)!==null&&t!==void 0&&t.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this)}},{key:"onRemove",value:function(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}},{key:"getIsMultiple",value:function(){return!0}}]),n}(Cf);function tc(a){var s=Tf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Tf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _c=function(a){(0,kr.Z)(n,a);var s=tc(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getDefault",value:function(){return{position:Te.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var t=tt.SO.create("div","l7-control-logo");return this.setLogoContent(t),t}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(t){(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["img","href"])&&(tt.SO.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(t){var o=this.controlOption,u=o.href,d=o.img,S=tt.SO.create("img");if(S.setAttribute("src",d),S.setAttribute("aria-label","AntV logo"),tt.SO.setUnDraggable(S),u){var z=tt.SO.create("a","l7-control-logo-link");z.target="_blank",z.href=u,z.rel="noopener nofollow",z.setAttribute("rel","noopener nofollow"),z.appendChild(S),t.appendChild(z)}else t.appendChild(S)}}]),n}(bs),Hl={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},ff={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function xc(a){var s=Yh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Yh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Uh=function(a){(0,kr.Z)(n,a);var s=xc(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"onMapThemeChange",function(){r.mapsService.setMapStyle(r.selectValue[0])}),r}return(0,Nr.Z)(n,[{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:lf("l7-icon-color"),options:[]})}},{key:"getStyleOptions",value:function(){var t=this.mapsService.getType()==="mapbox"?ff:Hl;return Object.entries(this.mapsService.getMapStyleConfig()).filter(function(o){var u=(0,xi.Z)(o,2),d=u[0],S=u[1];return typeof S=="string"&&d!=="blank"}).map(function(o){var u,d=(0,xi.Z)(o,2),S=d[0],z=d[1],de=(u=t[S])!==null&&u!==void 0?u:{},be=de.text,it=de.img;return{text:be!=null?be:S,value:z,img:it,key:S}})}},{key:"getMapStyle",value:function(){return this.mapsService.getMapStyle()}},{key:"onAdd",value:function(){var t,o=this;if((t=this.controlOption.options)!==null&&t!==void 0&&t.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var u,d,S=this.controlOption.defaultValue;this.controlOption.defaultValue=(u=(d=this.controlOption.options.find(function(de){return de.key===S}))===null||d===void 0?void 0:d.value)!==null&&u!==void 0?u:S}else{var z=this.getMapStyle();z?this.controlOption.defaultValue=z:this.mapsService.map.once("styledata",function(){var de=o.mapsService.getMapStyle();o.controlOption.defaultValue=de,o.setSelectValue(de,!1)})}return this.on("selectChange",this.onMapThemeChange),(0,Va.Z)((0,zr.Z)(n.prototype),"onAdd",this).call(this)}},{key:"getIsMultiple",value:function(){return!1}}]),n}(Cf);function Gc(a){var s=Mf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var nh=function(a){(0,kr.Z)(n,a);var s=Gc(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"location",[0,0]),(0,bt.Z)((0,or.Z)(r),"onMouseMove",function(d){var S=r.location,z=d.lngLat||d.lnglat,de=r.controlOption.transform;z&&(S=[z.lng,z.lat]),r.location=S,de&&(S=de(S)),r.insertLocation2HTML(S),r.emit("locationChange",S)}),r}return(0,Nr.Z)(n,[{key:"getLocation",value:function(){return this.location}},{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{position:Te.d.BOTTOMLEFT,transform:function(u){var d=(0,xi.Z)(u,2),S=d[0],z=d[1];return[+(+S).toFixed(6),+(+z).toFixed(6)]}})}},{key:"onAdd",value:function(){var t=tt.SO.create("div","l7-control-mouse-location");return t.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),t}},{key:"onRemove",value:function(){this.mapsService.off("mousemove",this.onMouseMove)}},{key:"insertLocation2HTML",value:function(t){this.container.innerText=t.join(", ")}}]),n}(bs);function qn(a){var s=ca();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ca(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var $i=function(a){(0,kr.Z)(n,a);var s=qn(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"update",function(){var d=r.mapsService,S=r.controlOption.maxWidth,z=d.getSize()[1]/2,de=d.containerToLngLat([0,z]),be=d.containerToLngLat([S,z]),it=(0,tt.yM)([de.lng,de.lat],[be.lng,be.lat]);r.updateScales(it)}),r}return(0,Nr.Z)(n,[{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{name:"scale",position:Te.d.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var t="l7-control-scale",o=tt.SO.create("div",t);this.resetScaleLines(o);var u=this.controlOption.updateWhenIdle;return this.mapsService.on(u?"moveend":"mapmove",this.update),this.mapsService.on(u?"zoomend":"zoomchange",this.update),o}},{key:"onRemove",value:function(){var t=this.controlOption.updateWhenIdle;this.mapsService.off(t?"zoomend":"zoomchange",this.update),this.mapsService.off(t?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(t){(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(t){var o=this.controlOption,u=o.metric,d=o.imperial;u&&t&&this.updateMetric(t),d&&t&&this.updateImperial(t)}},{key:"resetScaleLines",value:function(t){tt.SO.clearChildren(t);var o=this.controlOption,u=o.metric,d=o.imperial,S=o.maxWidth,z=o.lockWidth;z&&tt.SO.addStyle(t,"width: ".concat(S,"px")),u&&(this.mScale=tt.SO.create("div","l7-control-scale-line",t)),d&&(this.iScale=tt.SO.create("div","l7-control-scale-line",t)),this.update()}},{key:"updateScale",value:function(t,o,u){var d=this.controlOption.maxWidth;t.style.width=Math.round(d*u)+"px",t.innerHTML=o}},{key:"getRoundNum",value:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),u=t/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}},{key:"updateMetric",value:function(t){var o=this.getRoundNum(t),u=o<1e3?o+" m":o/1e3+" km";this.updateScale(this.mScale,u,o/t)}},{key:"updateImperial",value:function(t){var o=t*3.2808399,u,d,S;o>5280?(u=o/5280,d=this.getRoundNum(u),this.updateScale(this.iScale,d+" mi",d/u)):(S=this.getRoundNum(o),this.updateScale(this.iScale,S+" ft",S/o))}}]),n}(bs);function $o(a){var s=lo();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function lo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Es=function(a){(0,kr.Z)(n,a);var s=$o(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"zoomIn",function(){!r.disabled&&r.mapsService.getZoom()<r.mapsService.getMaxZoom()&&r.mapsService.zoomIn()}),(0,bt.Z)((0,or.Z)(r),"zoomOut",function(){!r.disabled&&r.mapsService.getZoom()>r.mapsService.getMinZoom()&&r.mapsService.zoomOut()}),(0,bt.Z)((0,or.Z)(r),"updateDisabled",function(){var d=r.mapsService;r.zoomInButton.removeAttribute("disabled"),r.zoomOutButton.removeAttribute("disabled"),(r.disabled||d.getZoom()<=d.getMinZoom())&&r.zoomOutButton.setAttribute("disabled","true"),(r.disabled||d.getZoom()>=d.getMaxZoom())&&r.zoomInButton.setAttribute("disabled","true")}),r}return(0,Nr.Z)(n,[{key:"getDefault",value:function(t){return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{position:Te.d.BOTTOMRIGHT,name:"zoom",zoomInText:lf("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:lf("l7-icon-narrow"),zoomOutTitle:"Zoom out"})}},{key:"setOptions",value:function(t){(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var t=tt.SO.create("div","l7-control-zoom");return this.resetButtonGroup(t),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),t}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(t){tt.SO.clearChildren(t),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",t,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",t,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(t,o,u,d,S){var z=tt.SO.create("button",u,d);return typeof t=="string"?z.innerHTML=t:z.append(t),z.title=o,z.addEventListener("click",S),z}}]),n}(bs);function tl(a){var s=al();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function al(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Tl=function(a){(0,kr.Z)(n,a);var s=tl(n);function n(r){var t;(0,Cr.Z)(this,n),t=s.call(this),(0,bt.Z)((0,or.Z)(t),"isShow",!0),(0,bt.Z)((0,or.Z)(t),"onMouseMove",function(u){var d,S=t.mapsService.getMapContainer(),z=(d=S==null?void 0:S.getBoundingClientRect())!==null&&d!==void 0?d:{},de=z.left,be=de===void 0?0:de,it=z.top,nt=it===void 0?0:it;t.setPopupPosition(u.clientX-be,u.clientY-nt)}),(0,bt.Z)((0,or.Z)(t),"updateLngLatPosition",function(){if(!(!t.mapsService||t.popupOption.followCursor)){var u=t.lngLat,d=u.lng,S=u.lat,z=t.mapsService.lngLatToContainer([d,S]),de=z.x,be=z.y;t.setPopupPosition(de,be)}}),(0,bt.Z)((0,or.Z)(t),"onKeyDown",function(u){u.keyCode===27&&t.remove()}),(0,bt.Z)((0,or.Z)(t),"onCloseButtonClick",function(u){u.stopPropagation&&u.stopPropagation(),t.hide()}),(0,bt.Z)((0,or.Z)(t),"update",function(){var u=!!t.lngLat,d=t.popupOption,S=d.className,z=d.style,de=d.maxWidth,be=d.anchor,it=d.stopPropagation;if(!(!t.mapsService||!u||!t.content)){var nt=t.mapsService.getMarkerContainer();if(!t.container&&nt&&(t.container=tt.SO.create("div","l7-popup ".concat(S!=null?S:""," ").concat(t.isShow?"":"l7-popup-hide"),nt),z&&t.container.setAttribute("style",z),t.tip=tt.SO.create("div","l7-popup-tip",t.container),t.container.appendChild(t.content),it&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Ir){t.container.addEventListener(Ir,function(jr){jr.stopPropagation()})}),t.container.style.whiteSpace="nowrap"),t.updateLngLatPosition(),tt.SO.setTransform(t.container,"".concat(tt.rQ[be])),(0,tt.zi)(t.container,be,"popup"),de){var Kt=t.container.getBoundingClientRect(),tr=Kt.width;tr>parseFloat(de)&&(t.container.style.width=de)}else t.container.style.removeProperty("width")}}),t.popupOption=(0,ge.Z)((0,ge.Z)({},t.getDefault(r!=null?r:{})),r);var o=t.popupOption.lngLat;return o&&(t.lngLat=o),t}return(0,Nr.Z)(n,[{key:"lngLat",get:function(){var t;return(t=this.popupOption.lngLat)!==null&&t!==void 0?t:{lng:0,lat:0}},set:function(t){this.popupOption.lngLat=t}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(t){this.mapsService=t.get(Te.vK.IMapService),this.sceneService=t.get(Te.vK.ISceneService),this.layerService=t.get(Te.vK.ILayerService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=t,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var o=this.popupOption,u=o.html,d=o.text,S=o.title;return u?this.setHTML(u):d&&this.setText(d),S&&this.setTitle(S),this.emit("open"),this}},{key:"remove",value:function(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&tt.SO.remove(this.content),this.container&&(tt.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(t){return this.show(),this.popupOption=(0,ge.Z)((0,ge.Z)({},this.popupOption),t),this.checkUpdateOption(t,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(tt.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(t,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(t,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(t,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(t,["html"])&&t.html?this.setHTML(t.html):this.checkUpdateOption(t,["text"])&&t.text&&this.setText(t.text),this.checkUpdateOption(t,["lngLat"])&&t.lngLat&&this.setLnglat(t.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&tt.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(this.isShow)return this.container&&tt.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(t){return this.popupOption.html=t,this.setDOMContent(t)}},{key:"setText",value:function(t){return this.popupOption.text=t,this.setDOMContent(window.document.createTextNode(t))}},{key:"setTitle",value:function(t){this.show(),this.popupOption.title=t,t?(this.contentTitle||(this.contentTitle=tt.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),tt.SO.clearChildren(this.contentTitle),tt.SO.appendElementType(this.contentTitle,t)):this.contentTitle&&(tt.SO.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var t=this.lngLat,o=t.lng,u=t.lat;return this.popupOption.autoPan&&this.mapsService.panTo([o,u]),this}},{key:"setLngLat",value:function(t){return this.setLnglat(t)}},{key:"setLnglat",value:function(t){var o=this;return this.show(),this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){o.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(t){return this.popupOption.maxWidth=t,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(t){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:tt.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(t){return this.show(),this.createContent(),tt.SO.appendElementType(this.contentPanel,t),this.update(),this}},{key:"updateCloseOnClick",value:function(t){var o=this,u=this.mapsService;u&&(u==null||u.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!t&&requestAnimationFrame(function(){u==null||u.on("click",o.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(t){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!t&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(t){var o,u=(o=this.mapsService)===null||o===void 0?void 0:o.getContainer();u&&(u==null||u.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!t&&(u==null||u.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var t=this;if(this.content&&tt.SO.remove(this.content),this.contentTitle=void 0,this.content=tt.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var o=lf("l7-icon-guanbi");tt.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",function(){t.hide()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=tt.SO.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(t,o){if(this.container){var u=this.popupOption.offsets;this.container.style.left=t+u[0]+"px",this.container.style.top=o-u[1]+"px"}}},{key:"checkUpdateOption",value:function(t,o){return o.some(function(u){return u in t})}}]),n}(Vr.EventEmitter);function Lh(a){var s=xf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function xf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var qh=function(a){(0,kr.Z)(n,a);var s=Lh(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"layerConfigMap",new WeakMap),r}return(0,Nr.Z)(n,[{key:"layerConfigItems",get:function(){var t,o=this.popupOption,u=o.config,d=o.items;return(t=u!=null?u:d)!==null&&t!==void 0?t:[]}},{key:"addTo",value:function(t){return(0,Va.Z)((0,zr.Z)(n.prototype),"addTo",this).call(this,t),this.bindLayerEvent(),this.hide(),this}},{key:"remove",value:function(){return(0,Va.Z)((0,zr.Z)(n.prototype),"remove",this).call(this),this.unbindLayerEvent(),this}},{key:"setOptions",value:function(t){return this.unbindLayerEvent(),(0,Va.Z)((0,zr.Z)(n.prototype),"setOptions",this).call(this,t),this.bindLayerEvent(),this}},{key:"getDefault",value:function(t){var o=t.trigger==="click";return(0,ge.Z)((0,ge.Z)({},(0,Va.Z)((0,zr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{trigger:"hover",followCursor:!o,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!1,autoClose:!1,closeOnEsc:!1})}},{key:"bindLayerEvent",value:function(){var t=this,o=this.popupOption.trigger;this.layerConfigItems.forEach(function(u){var d,S=t.getLayerByConfig(u);if(S){var z=(0,ge.Z)({},u);if(o==="hover"){var de=t.onLayerMouseMove.bind(t,S),be=t.onLayerMouseOut.bind(t,S);z.onMouseMove=de,z.onMouseOut=be,S==null||S.on("mousemove",de),S==null||S.on("mouseout",be)}else{var it=t.onLayerClick.bind(t,S);z.onClick=it,S==null||S.on("click",it)}var nt=S==null||(d=S.getSource)===null||d===void 0?void 0:d.call(S),Kt=t.onSourceUpdate.bind(t,S);nt==null||nt.on("update",Kt),z.onSourceUpdate=Kt,t.layerConfigMap.set(S,z)}})}},{key:"unbindLayerEvent",value:function(){var t=this;this.layerConfigItems.forEach(function(o){var u=t.getLayerByConfig(o),d=u&&t.layerConfigMap.get(u);if(d){var S=d.onMouseMove,z=d.onMouseOut,de=d.onClick,be=d.onSourceUpdate;if(S&&u.off("mousemove",S),z&&u.off("mouseout",z),de&&u.off("click",de),be){var it;u==null||(it=u.getSource())===null||it===void 0||it.off("update",be)}}})}},{key:"onLayerMouseMove",value:function(t,o){if(!this.isSameFeature(t,o.featureId)){var u=this.getLayerInfoFrag(t,o),d=u.title,S=u.content;this.setDOMContent(S),this.setTitle(d),this.displayFeatureInfo={layer:t,featureId:o.featureId},this.show()}}},{key:"onLayerMouseOut",value:function(t,o){this.displayFeatureInfo=void 0,this.isShow&&this.hide()}},{key:"onLayerClick",value:function(t,o){if(this.isShow&&this.isSameFeature(t,o.featureId))this.hide();else{var u=this.getLayerInfoFrag(t,o),d=u.title,S=u.content;this.setDOMContent(S),this.setLnglat(o.lngLat),this.setTitle(d),this.displayFeatureInfo={layer:t,featureId:o.featureId},this.show()}}},{key:"onSourceUpdate",value:function(t){var o;((o=this.displayFeatureInfo)===null||o===void 0?void 0:o.layer)===t&&(this.hide(),this.displayFeatureInfo=void 0)}},{key:"getLayerInfoFrag",value:function(t,o){var u=this.layerConfigMap.get(t),d,S=document.createDocumentFragment();if(u){var z=o.feature;z.type==="Feature"&&"properties"in z&&"geometry"in z&&(z=z.properties);var de=u.title,be=u.fields,it=u.customContent;if(de){d=document.createDocumentFragment();var nt=de instanceof Function?de(z):de;tt.SO.appendElementType(d,nt)}if(it){var Kt=it instanceof Function?it(z):it;tt.SO.appendElementType(S,Kt)}else be!=null&&be.length&&(be==null||be.forEach(function(tr){var Ir,jr,on=typeof tr=="string"?{field:tr}:tr,tn=on.field,Yn=on.formatField,ci=on.formatValue,Zi=on.getValue,zi=tt.SO.create("div","l7-layer-popup__row"),pa=Zi?Zi(o.feature):(0,ht.get)(z,tn),_o=(Ir=Yn instanceof Function?Yn(tn,z):Yn)!==null&&Ir!==void 0?Ir:tn,wo=(jr=ci instanceof Function?ci(pa,z):ci)!==null&&jr!==void 0?jr:pa,Ba=tt.SO.create("span","l7-layer-popup__key",zi);tt.SO.appendElementType(Ba,_o),tt.SO.appendElementType(Ba,document.createTextNode("\uFF1A"));var ms=tt.SO.create("span","l7-layer-popup__value",zi);tt.SO.appendElementType(ms,wo),S.appendChild(zi)}))}return{title:d,content:S}}},{key:"getLayerByConfig",value:function(t){var o=t.layer;if(o instanceof Object)return o;if(typeof o=="string")return this.layerService.getLayer(o)||this.layerService.getLayerByName(o)}},{key:"isSameFeature",value:function(t,o){var u=this.displayFeatureInfo;return u&&t===u.layer&&o===u.featureId}}]),n}(Tl);function $h(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}$h(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 1000;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 800;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  height: 24px;
  line-height: 24px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 16px;
  font-size: 12px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  height: 14px;
  width: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  padding: 12px 12px 0 12px;
  width: 474px;
  height: 320px;
  overflow: auto;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-select-control--image .l7-select-control-item {
  margin-right: 12px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid #fff;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  width: calc((100% - 36px) / 3);
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  margin-bottom: 12px;
  position: relative;
  font-size: 12px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 142px;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  right: 0;
  top: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control--image .l7-select-control-item:nth-child(3n) {
  margin-right: 0;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  overflow: hidden;
}
.l7-control-zoom .l7-button-control {
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
  border-radius: 0;
  font-size: 16px;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:first-child {
  border-bottom: 1px solid #f0f0f0;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
`);var Ul=g(43269),Rl=g(53229),ol,uu=(ol={},(0,bt.Z)(ol,Te.h0.additive,{enable:!0,func:{srcRGB:Te.gl.ONE,dstRGB:Te.gl.ONE,srcAlpha:1,dstAlpha:1}}),(0,bt.Z)(ol,Te.h0.none,{enable:!1}),(0,bt.Z)(ol,Te.h0.normal,{enable:!0,func:{srcRGB:Te.gl.SRC_ALPHA,dstRGB:Te.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,bt.Z)(ol,Te.h0.subtractive,{enable:!0,func:{srcRGB:Te.gl.ONE,dstRGB:Te.gl.ONE,srcAlpha:Te.gl.ZERO,dstAlpha:Te.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:Te.gl.FUNC_SUBTRACT,alpha:Te.gl.FUNC_SUBTRACT}}),(0,bt.Z)(ol,Te.h0.max,{enable:!0,func:{srcRGB:Te.gl.ONE,dstRGB:Te.gl.ONE},equation:{rgb:Te.gl.MAX_EXT}}),(0,bt.Z)(ol,Te.h0.min,{enable:!0,func:{srcRGB:Te.gl.ONE,dstRGB:Te.gl.ONE},equation:{rgb:Te.gl.MIN_EXT}}),ol);function Bc(a,s,n,r,t){s.updateStyleAttribute(a,n,r,t)}function cc(a,s){s.tileLayer||s.isTileLayer||(a.opacity&&ao("opacity",s,a.opacity),a.strokeWidth&&ao("strokeWidth",s,a.strokeWidth),a.strokeOpacity&&ao("strokeOpacity",s,a.strokeOpacity),a.stroke&&Hf("stroke",s,a.stroke),a.offsets&&Ml("offsets",s,a.offsets),a.textOffset&&Ml("textOffset",s,a.textOffset),a.thetaOffset&&ao("thetaOffset",s,a.thetaOffset))}function ao(a,s,n){(0,ht.isString)(n)?Bc(a,s,n,function(r){return r}):(0,ht.isNumber)(n)||(Array.isArray(n)&&n.length===2?(0,ht.isString)(n[0])&&(0,ht.isFunction)(n[1])||(0,ht.isString)(n[0])&&Array.isArray(n[1])&&(0,ht.isNumber)(n[1][0])&&(0,ht.isNumber)(n[1][1])?Bc(a,s,n[0],n[1]):Bc(a,s,[1],void 0):Bc(a,s,[1],void 0))}function Ml(a,s,n){(0,ht.isString)(n)?Bc(a,s,n,function(r){return r}):Array.isArray(n)&&n.length===2&&(0,ht.isString)(n[0])&&(0,ht.isFunction)(n[1])?Bc(a,s,n[0],n[1]):Array.isArray(n)&&n.length===2&&(0,ht.isNumber)(n[0])&&(0,ht.isNumber)(n[1])?Bc(a,s,n,void 0):Bc(a,s,[0,0],void 0)}function Hf(a,s,n){(0,ht.isString)(n)||(Array.isArray(n)&&n.length===2&&((0,ht.isString)(n[0])&&(0,ht.isFunction)(n[1])||(0,ht.isString)(n[0])&&Array.isArray(n[1])&&n[1].length>0)?Bc(a,s,n[0],n[1]):Bc(a,s,"#fff",void 0))}var fl=g(84859);function Vl(a,s){var n=[s[0]-a[0],s[1]-a[1]],r=(0,tt.Fv)(n),t=[a[0]+r[0]*1e-4,a[1]+r[1]*1e-4];return t}function Ll(a,s,n){if(a.length>0&&s.version===fl.G["GAODE2.x"]){var r=n.coordCenter;typeof a[0].coordinates[0]=="number"?a.filter(function(t){return!t.originCoordinates}).map(function(t){t.version=fl.G["GAODE2.x"],t.originCoordinates=(0,ht.cloneDeep)(t.coordinates),t.coordinates=s.lngLatToCoordByLayer(t.coordinates,r)}):a.filter(function(t){return!t.originCoordinates}).map(function(t){t.version=fl.G["GAODE2.x"],t.originCoordinates=(0,ht.cloneDeep)(t.coordinates),t.coordinates=s.lngLatToCoordsByLayer(t.coordinates,r)})}}function jh(a,s){a.length>0&&s.version===fl.G.SIMPLE&&a.map(function(n){n.simpleCoordinate||(n.coordinates=qa(n.coordinates,s),n.simpleCoordinate=!0)})}function qa(a,s){if(typeof a[0]=="number")return s.simpleMapCoord.unproject(a);if(a[0]&&a[0][0]instanceof Array){var n=[];return a.map(function(t){var o=[];t.map(function(u){o.push(s.simpleMapCoord.unproject(u))}),n.push(o)}),n}else{var r=[];return a.map(function(t){r.push(s.simpleMapCoord.unproject(t))}),r}}function Yl(a,s){var n;if(!a.scale)return[];var r=(a==null||(n=a.scale)===null||n===void 0?void 0:n.scalers)||[],t=[];r.forEach(function(u){var d,S=u.field;(s.hasOwnProperty(S)||((d=a.scale)===null||d===void 0?void 0:d.type)==="variable")&&t.push(s[S])});var o=a.mapping?a.mapping(t):[];return o}function Vf(a,s,n,r,t){var o=t==null?void 0:t.getLayerConfig(),u=o.arrow,d=u===void 0?{enable:!1}:u,S=s.map(function(z){var de={id:z._id,coordinates:z.coordinates};if(a.filter(function(nt){return nt.scale!==void 0}).forEach(function(nt){var Kt=Yl(nt,z);nt.needRemapping=!1,nt.name==="color"&&(Kt=Kt.map(function(tr){return(0,tt.CI)(tr)})),de[nt.name]=Array.isArray(Kt)&&Kt.length===1?Kt[0]:Kt,nt.name==="shape"&&(de.shape=n.getIconFontKey(de[nt.name]))}),de.shape==="line"&&d.enable){var be=de.coordinates,it=Vl(be[0],be[1]);de.coordinates.splice(1,0,it,it)}return de});return Ll(S,r,t),jh(S,r),S}function ih(a,s,n,r,t,o){var u=new Ko(t,o),d=r.getLayerStyleAttributes()||[],S=u.data.dataArray,z=S,de=Vf(d,z,s,n,a);return u.destroy(),de}function Vu(a){return a.map(function(s){return typeof s=="string"&&(s=[s,{}]),s})}function hf(a,s,n,r){var t=a.multiPassRenderer,o=a.getLayerConfig(),u=o.enableTAA;return u?t.add(r("taa")):t.add(r("render")),Vu(s).forEach(function(d){var S=(0,xi.Z)(d,2),z=S[0],de=S[1];t.add(n(z),de)}),t.add(n("copy")),t}var Hh=function(){function a(s){(0,Cr.Z)(this,a),this.layer=s}return(0,Nr.Z)(a,[{key:"pickRender",value:function(n){var r=this.layer;if(r.tileLayer)return r.tileLayer.pickRender(n);r.hooks.beforePickingEncode.call(),r.masks.length>0&&r.masks.filter(function(t){return t.inited}).forEach(function(){var t=(0,ft.Z)(fe().mark(function o(u){return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:u.render();case 1:case"end":return S.stop()}},o)}));return function(o){return t.apply(this,arguments)}}()),r.renderModels(!0),r.hooks.afterPickingEncode.call()}},{key:"pick",value:function(n,r){var t=this.layer.getContainer(),o=t.get(Te.vK.IPickingService);return n.type==="RasterLayer"?this.pickRasterLayer(n,r):(this.pickRender(r),o.pickFromPickingFBO(n,r))}},{key:"pickRasterLayer",value:function(n,r,t){var o=this.layer.getContainer(),u=o.get(Te.vK.IPickingService),d=o.get(Te.vK.IMapService),S=this.layer.getSource().extent,z=(0,tt.if)(r.lngLat,S),de={x:r.x,y:r.y,type:r.type,lngLat:r.lngLat,target:r,rasterValue:null},be=t||n;if(z){var it=this.readRasterValue(n,S,d,r.x,r.y);return de.rasterValue=it,u.triggerHoverOnLayer(be,de),!0}else return de.type=r.type==="mousemove"?"mouseout":"un"+r.type,u.triggerHoverOnLayer(be,(0,ge.Z)((0,ge.Z)({},de),{},{type:"unpick"})),u.triggerHoverOnLayer(be,de),!1}},{key:"readRasterValue",value:function(n,r,t,o,u){var d=n.getSource().data.dataArray[0],S=(0,xi.Z)(r,4),z=S[0],de=z===void 0?0:z,be=S[1],it=be===void 0?0:be,nt=S[2],Kt=nt===void 0?10:nt,tr=S[3],Ir=tr===void 0?-10:tr,jr=t.lngLatToContainer([de,it]),on=t.lngLatToContainer([Kt,Ir]),tn=on.x-jr.x,Yn=jr.y-on.y,ci=[(o-jr.x)/tn,(u-on.y)/Yn],Zi=d.width||1,zi=d.height||1,pa=Math.floor(ci[0]*Zi),_o=Math.floor(ci[1]*zi),wo=Math.max(0,_o-1)*Zi+pa,Ba=d.data[wo];return Ba}},{key:"selectFeature",value:function(n){var r=this.layer,t=(0,xi.Z)(n,3),o=t[0],u=t[1],d=t[2];r.hooks.beforeSelect.call([o,u,d])}},{key:"highlightPickedFeature",value:function(n){var r=(0,xi.Z)(n,3),t=r[0],o=r[1],u=r[2];this.layer.hooks.beforeHighlight.call([t,o,u])}},{key:"getFeatureById",value:function(n){return this.layer.getSource().getFeatureById(n)}}]),a}(),bc=function(){function a(s){(0,Cr.Z)(this,a),this.layer=s;var n=this.layer.getContainer();this.rendererService=n.get(Te.vK.IRendererService)}return(0,Nr.Z)(a,[{key:"getColorTexture",value:function(n,r){var t=this.getTextureKey(n,r);return this.key===t?this.colorTexture:(this.createColorTexture(n,r),this.key=t,this.colorTexture)}},{key:"createColorTexture",value:function(n,r){var t=this.rendererService.createTexture2D,o=this.getColorRampBar(n,r),u=t({data:o.data,width:o.width,height:o.height,flipY:!1});return this.colorTexture=u,u}},{key:"setColorTexture",value:function(n,r,t){this.key=this.getTextureKey(r,t),this.colorTexture=n}},{key:"destroy",value:function(){var n;(n=this.colorTexture)===null||n===void 0||n.destroy()}},{key:"getColorRampBar",value:function(n,r){switch(n.type){case"cat":return(0,tt.hj)(n);case"quantize":return(0,tt.NJ)(n);case"custom":return(0,tt.Oc)(n,r);case"linear":return(0,tt.M4)(n,r);default:return(0,tt.Cl)(n)}}},{key:"getTextureKey",value:function(n,r){var t;return"".concat(n.colors.join("_"),"_").concat(n==null||(t=n.positions)===null||t===void 0?void 0:t.join("_"),"_").concat(n.type,"_").concat(r==null?void 0:r.join("_"))}}]),a}(),Ec=["passes"],ah=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber","workerEnabled","workerOptions"],Wc,kh,Sc;function Vh(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=ql(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function ql(a,s){if(a){if(typeof a=="string")return gu(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gu(a,s)}}function gu(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function Ks(a){var s=Gf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Gf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Bf=0,eu=(Wc=(0,Te.yT)(Te.vK.IGlobalConfigService),kh=function(a){(0,kr.Z)(n,a);var s=Ks(n);function n(){var r,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Cr.Z)(this,n),r=s.call(this),(0,bt.Z)((0,or.Z)(r),"id","".concat(Bf++)),(0,bt.Z)((0,or.Z)(r),"name","".concat(Bf)),(0,bt.Z)((0,or.Z)(r),"visible",!0),(0,bt.Z)((0,or.Z)(r),"zIndex",0),(0,bt.Z)((0,or.Z)(r),"inited",!1),(0,bt.Z)((0,or.Z)(r),"layerModelNeedUpdate",!1),(0,bt.Z)((0,or.Z)(r),"pickedFeatureID",null),(0,bt.Z)((0,or.Z)(r),"selectedFeatureID",null),(0,bt.Z)((0,or.Z)(r),"styleNeedUpdate",!1),(0,bt.Z)((0,or.Z)(r),"forceRender",!1),(0,bt.Z)((0,or.Z)(r),"clusterZoom",0),(0,bt.Z)((0,or.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,bt.Z)((0,or.Z)(r),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,bt.Z)((0,or.Z)(r),"hooks",{init:new Bo.S$,afterInit:new Bo.oI,beforeRender:new Bo.oI,beforeRenderData:new Bo.bf,afterRender:new Bo.ni,beforePickingEncode:new Bo.ni,afterPickingEncode:new Bo.ni,beforeHighlight:new Bo.ni(["pickedColor"]),afterHighlight:new Bo.ni,beforeSelect:new Bo.ni(["pickedColor"]),afterSelect:new Bo.ni,beforeDestroy:new Bo.ni,afterDestroy:new Bo.ni}),(0,bt.Z)((0,or.Z)(r),"models",[]),(0,bt.Z)((0,or.Z)(r),"startInit",!1),(0,bt.Z)((0,or.Z)(r),"layerChildren",[]),(0,bt.Z)((0,or.Z)(r),"masks",[]),(0,Ul.Z)((0,or.Z)(r),"configService",Sc,(0,or.Z)(r)),(0,bt.Z)((0,or.Z)(r),"animateOptions",{enable:!1}),(0,bt.Z)((0,or.Z)(r),"currentPickId",null),(0,bt.Z)((0,or.Z)(r),"pendingStyleAttributes",[]),(0,bt.Z)((0,or.Z)(r),"scaleOptions",{}),(0,bt.Z)((0,or.Z)(r),"animateStatus",!1),(0,bt.Z)((0,or.Z)(r),"isDestroyed",!1),(0,bt.Z)((0,or.Z)(r),"encodeDataLength",0),(0,bt.Z)((0,or.Z)(r),"sourceEvent",function(){r.dataState.dataSourceNeedUpdate=!0;var o=r.getLayerConfig();o&&o.autoFit&&r.fitBounds(o.fitBoundsOptions);var u=r.layerSource.getSourceCfg().autoRender;u&&r.reRender()}),r.name=t.name||r.id,r.zIndex=t.zIndex||0,r.rawConfig=t,r}return(0,Nr.Z)(n,[{key:"addMaskLayer",value:function(t){this.masks.push(t)}},{key:"removeMaskLayer",value:function(t){var o=this.masks.indexOf(t);o>-1&&this.masks.splice(o,1),t.destroy()}},{key:"getAttribute",value:function(t){return this.styleAttributeService.getLayerStyleAttribute(t)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(t){var o=this;if(Object.keys(t).map(function(d){d in o.rawConfig&&(o.rawConfig[d]=t[d])}),!this.startInit)this.needUpdateConfig=(0,ge.Z)((0,ge.Z)({},this.needUpdateConfig),t);else{var u=this.container.get(Te.vK.SceneID);cc(t,this),this.configService.setLayerConfig(u,this.id,(0,ge.Z)((0,ge.Z)((0,ge.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(t,o){this.container=t,this.sceneContainer=o}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(t){return this.plugins.push(t),this}},{key:"init",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:d=this.container.get(Te.vK.SceneID),this.startInit=!0,this.configService.setLayerConfig(d,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Te.vK.IIconService),this.fontService=this.container.get(Te.vK.IFontService),this.rendererService=this.container.get(Te.vK.IRendererService),this.layerService=this.container.get(Te.vK.ILayerService),this.debugService=this.container.get(Te.vK.IDebugService),this.interactionService=this.container.get(Te.vK.IInteractionService),this.pickingService=this.container.get(Te.vK.IPickingService),this.mapService=this.container.get(Te.vK.IMapService),S=this.getLayerConfig(),z=S.enableMultiPassRenderer,de=S.passes,z&&de!==null&&de!==void 0&&de.length&&de.length>0&&this.mapService.on("mapAfterFrameChange",function(){u.renderLayers()}),this.cameraService=this.container.get(Te.vK.ICameraService),this.coordinateService=this.container.get(Te.vK.ICoordinateSystemService),this.shaderModuleService=this.container.get(Te.vK.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Te.vK.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Te.vK.IFactoryNormalPass),this.styleAttributeService=this.container.get(Te.vK.IStyleAttributeService),z&&(this.multiPassRenderer=this.container.get(Te.vK.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(Ir){var jr=Ir.attributeName,on=Ir.attributeField,tn=Ir.attributeValues,Yn=Ir.updateOptions;u.styleAttributeService.updateStyleAttribute(jr,{scale:(0,ge.Z)({field:on},u.splitValuesAndCallbackInAttribute(tn,u.getLayerConfig()[jr]))},Yn)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Te.vK.ILayerPlugin),be=Vh(this.plugins);try{for(be.s();!(it=be.n()).done;)nt=it.value,nt.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(Ir){be.e(Ir)}finally{be.f()}return this.layerPickService=new Hh(this),this.textureService=new bc(this),this.log(Te.Or.LayerInitStart),tr.next=31,this.hooks.init.promise();case 31:this.log(Te.Or.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"log",value:function(t){var o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var d="".concat(this.id,".").concat(u,".").concat(t),S={id:this.id,type:this.type};(o=this.debugService)===null||o===void 0||o.log(d,S)}}},{key:"updateModelData",value:function(t){t.attributes&&t.elements?this.models.map(function(o){o.updateAttributesAndElements(t.attributes,t.elements)}):console.warn("data error")}},{key:"createModelData",value:function(t,o){var u;if((u=this.layerModel)!==null&&u!==void 0&&u.createModelData)return this.layerModel.createModelData(o);var d=this.calculateEncodeData(t,o),S=this.triangulation;return d&&S?this.styleAttributeService.createAttributesAndIndices(d,S):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(t){this.layerPickService=t}},{key:"calculateEncodeData",value:function(t,o){return this.inited?ih(this,this.fontService,this.mapService,this.styleAttributeService,t,o):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.updateLayerConfig((0,ge.Z)((0,ge.Z)((0,ge.Z)({},this.getDefaultConfig()),this.rawConfig),this.needUpdateConfig));var t=this.getLayerConfig(),o=t.animateOption;o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(t,o,u){return this.updateStyleAttribute("color",t,o,u),this}},{key:"texture",value:function(t,o,u){return this.updateStyleAttribute("texture",t,o,u),this}},{key:"rotate",value:function(t,o,u){return this.updateStyleAttribute("rotate",t,o,u),this}},{key:"size",value:function(t,o,u){return this.updateStyleAttribute("size",t,o,u),this}},{key:"filter",value:function(t,o,u){var d=this.updateStyleAttribute("filter",t,o,u);return this.dataState.dataSourceNeedUpdate=d,this}},{key:"shape",value:function(t,o,u){this.shapeOption={field:t,values:o};var d=this.updateStyleAttribute("shape",t,o,u);return this.dataState.dataSourceNeedUpdate=d,this}},{key:"label",value:function(t,o,u){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:o,updateOptions:u}),this}},{key:"animate",value:function(t){var o={};return(0,ht.isObject)(t)?(o.enable=!0,o=(0,ge.Z)((0,ge.Z)({},o),t)):o.enable=t,this.updateLayerConfig({animateOption:o}),this}},{key:"source",value:function(t,o){return(t==null?void 0:t.type)==="source"?(this.setSource(t),this):(this.sourceOption={data:t,options:o},this.clusterZoom=0,this)}},{key:"setData",value:function(t,o){var u=this;return this.inited?(this.log(Te.Or.SourceInitStart,Te.KD.UPDATE),this.layerSource.setData(t,o),this.log(Te.Or.SourceInitEnd,Te.KD.UPDATE)):this.on("inited",function(){u.log(Te.Or.SourceInitStart,Te.KD.UPDATE);var d=u.getSource();d?u.layerSource.setData(t,o):u.source(new Ko(t,o)),u.layerSource.once("update",function(){u.log(Te.Or.SourceInitEnd,Te.KD.UPDATE)})}),this}},{key:"style",value:function(t){var o=this,u=t.passes,d=(0,ls.Z)(t,Ec);return u&&Vu(u).forEach(function(S){var z=o.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(S[0]);z&&z.updateOptions(S[1])}),this.rawConfig=(0,ge.Z)((0,ge.Z)({},this.rawConfig),d),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(t,o){var u=(0,ge.Z)({},this.scaleOptions);if((0,ht.isObject)(t)?this.scaleOptions=(0,ge.Z)((0,ge.Z)({},this.scaleOptions),t):this.scaleOptions[t]=o,this.styleAttributeService&&!(0,ht.isEqual)(u,this.scaleOptions)){var d=(0,ht.isObject)(t)?t:(0,bt.Z)({},t,o);this.styleAttributeService.updateScaleAttribute(d)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(),this))}},{key:"renderMultiPass",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){d.next=2;break}return d.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){d.next=7;break}return d.next=5,this.multiPassRenderer.render();case 5:d.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"active",value:function(t){var o={};return o.enableHighlight=(0,ht.isObject)(t)?!0:t,(0,ht.isObject)(t)?(o.enableHighlight=!0,t.color&&(o.highlightColor=t.color),t.mix&&(o.activeMix=t.mix)):o.enableHighlight=!!t,this.updateLayerConfig(o),this}},{key:"setActive",value:function(t,o){var u=this;if((0,ht.isObject)(t)){var d=t.x,S=d===void 0?0:d,z=t.y,de=z===void 0?0:z;this.updateLayerConfig({highlightColor:(0,ht.isObject)(o)?o.color:this.getLayerConfig().highlightColor,activeMix:(0,ht.isObject)(o)?o.mix:this.getLayerConfig().activeMix}),this.pick({x:S,y:de})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:(0,ht.isObject)(o)?o.color:this.getLayerConfig().highlightColor,activeMix:(0,ht.isObject)(o)?o.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call((0,tt.Z6)(t)).then(function(){setTimeout(function(){u.reRender()},1)})}},{key:"select",value:function(t){var o={};return o.enableSelect=(0,ht.isObject)(t)?!0:t,(0,ht.isObject)(t)?(o.enableSelect=!0,t.color&&(o.selectColor=t.color),t.mix&&(o.selectMix=t.mix)):o.enableSelect=!!t,this.updateLayerConfig(o),this}},{key:"setSelect",value:function(t,o){var u=this;if((0,ht.isObject)(t)){var d=t.x,S=d===void 0?0:d,z=t.y,de=z===void 0?0:z;this.updateLayerConfig({selectColor:(0,ht.isObject)(o)?o.color:this.getLayerConfig().selectColor,selectMix:(0,ht.isObject)(o)?o.mix:this.getLayerConfig().selectMix}),this.pick({x:S,y:de})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:(0,ht.isObject)(o)?o.color:this.getLayerConfig().selectColor,selectMix:(0,ht.isObject)(o)?o.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,tt.Z6)(t)).then(function(){setTimeout(function(){u.reRender()},1)})}},{key:"setBlend",value:function(t){return this.updateLayerConfig({blend:t}),this.layerModelNeedUpdate=!0,this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(t){return this.zIndex=t,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(t){this.currentPickId=t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(t){this.selectedFeatureID=t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var t=this.mapService.getZoom(),o=this.getLayerConfig(),u=o.visible,d=o.minZoom,S=d===void 0?-1/0:d,z=o.maxZoom,de=z===void 0?1/0:z;return!!u&&t>=S&&t<de}},{key:"setMultiPass",value:function(t,o){if(this.updateLayerConfig({enableMultiPassRenderer:t}),o&&this.updateLayerConfig({passes:o}),t){var u=this.getLayerConfig(),d=u.passes,S=d===void 0?[]:d;this.multiPassRenderer=hf(this,S,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var z=this.rendererService.getViewportSize(),de=z.width,be=z.height;this.multiPassRenderer.resize(de,be)}return this}},{key:"setMinZoom",value:function(t){return this.updateLayerConfig({minZoom:t}),this}},{key:"getMinZoom",value:function(){var t=this.getLayerConfig(),o=t.minZoom;return o}},{key:"getMaxZoom",value:function(){var t=this.getLayerConfig(),o=t.maxZoom;return o}},{key:"get",value:function(t){var o=this.getLayerConfig();return o[t]}},{key:"setMaxZoom",value:function(t){return this.updateLayerConfig({maxZoom:t}),this}},{key:"setAutoFit",value:function(t){return this.updateLayerConfig({autoFit:t}),this}},{key:"fitBounds",value:function(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var o=this.getSource(),u=o.extent,d=u.some(function(S){return Math.abs(S)===1/0});return d?this:(this.mapService.fitBounds([[u[0],u[1]],[u[2],u[3]]],t),this)}},{key:"destroy",value:function(){var t,o,u,d,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isDestroyed||(this.layerChildren.map(function(z){return z.destroy(!1)}),this.layerChildren=[],this.masks.map(function(z){return z.destroy(!1)}),this.masks=[],this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(t=this.multiPassRenderer)===null||t===void 0||t.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(o=this.layerModel)===null||o===void 0||o.clearModels(S),(u=this.tileLayer)===null||u===void 0||u.destroy(),this.models=[],(d=this.debugService)===null||d===void 0||d.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var t;this.models.forEach(function(o){return o.destroy()}),(t=this.layerModel)===null||t===void 0||t.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(t){return t.needRescale||t.needRemapping||t.needRegenerateVertices}).length}},{key:"setSource",value:function(t){var o=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var u=this.mapService.getZoom();this.layerSource.updateClusterData(u)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(d){var S=d.type;if(o.coordCenter===void 0){var z,de=o.layerSource.center;o.coordCenter=de,(z=o.mapService)!==null&&z!==void 0&&z.setCoordCenter&&o.mapService.setCoordCenter(de)}S==="update"&&o.sourceEvent()})}},{key:"initSource",value:function(t){this.layerSource=t,this.clusterZoom=0,this.addSourceEvent()}},{key:"getSource",value:function(){return this.layerSource}},{key:"addSourceEvent",value:function(){var t=this;this.layerSource.on("update",function(){if(t.coordCenter===void 0){var o,u=t.layerSource.center;t.coordCenter=u,(o=t.mapService)!==null&&o!==void 0&&o.setCoordCenter&&t.mapService.setCoordCenter(u)}t.sourceEvent()})}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(t){this.encodedData=t,this.encodeDataLength=t.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(t){return this.styleAttributeService.getLayerAttributeScale(t)}},{key:"getLegend",value:function(t){var o,u,d,S=this.styleAttributeService.getLayerStyleAttribute(t),z=(S==null||(o=S.scale)===null||o===void 0?void 0:o.scalers)||[];return{type:(u=z[0].option)===null||u===void 0?void 0:u.type,field:S==null||(d=S.scale)===null||d===void 0?void 0:d.field,items:this.getLegendItems(t)}}},{key:"getLegendItems",value:function(t){var o=this.styleAttributeService.getLayerAttributeScale(t);if(!o)return[];if(o.invertExtent){var u=o.range().map(function(z){return(0,bt.Z)({value:o.invertExtent(z)},t,z)});return u}else if(o.ticks){var d=o.ticks().map(function(z){return(0,bt.Z)({value:z},t,o(z))});return d}else if(o!=null&&o.domain){var S=o.domain().filter(function(z){return!(0,ht.isUndefined)(z)}).map(function(z){return(0,bt.Z)({value:z},t,o(z))});return S}return[]}},{key:"pick",value:function(t){var o=t.x,u=t.y;this.interactionService.triggerHover({x:o,y:u})}},{key:"boxSelect",value:function(t,o){this.pickingService.boxPickLayer(this,t,o)}},{key:"buildLayerModel",value:function(){var r=(0,ft.Z)(fe().mark(function o(u){var d=this,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn,ci;return fe().wrap(function(zi){for(;;)switch(zi.prev=zi.next){case 0:return S=u.moduleName,z=u.vertexShader,de=u.fragmentShader,be=u.triangulation,it=u.segmentNumber,nt=u.workerEnabled,Kt=nt===void 0?!1:nt,tr=u.workerOptions,Ir=(0,ls.Z)(u,ah),this.shaderModuleService.registerModule(S,{vs:z,fs:de}),jr=this.shaderModuleService.getModule(S),on=jr.vs,tn=jr.fs,Yn=jr.uniforms,ci=this.rendererService.createModel,zi.abrupt("return",new Promise(function(pa,_o){if(tr&&tr.modelType in tt.lN&&Kt)d.styleAttributeService.createAttributesAndIndicesAscy(d.encodedData,it,tr).then(function(Ih){var Rh=Ih.attributes,md=Ih.elements,hh=ci((0,ge.Z)({attributes:Rh,uniforms:Yn,fs:tn,vs:on,elements:md,blend:uu[Te.h0.normal]},Ir));pa(hh)}).catch(function(Ih){return _o(Ih)});else{var wo=d.styleAttributeService.createAttributesAndIndices(d.encodedData,be,it),Ba=wo.attributes,ms=wo.elements,au=wo.count,Al=(0,ge.Z)({attributes:Ba,uniforms:Yn,fs:tn,vs:on,elements:ms,blend:uu[Te.h0.normal]},Ir);au&&(Al.count=au);var nd=ci(Al);pa(nd)}}));case 5:case"end":return zi.stop()}},o,this)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"createAttributes",value:function(t){var o=t.triangulation,u=this.styleAttributeService.createAttributes(this.encodedData,o),d=u.attributes;return d}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(t){var o=this.getLayerConfig(),u=o.enableHighlight,d=u===void 0?!0:u,S=o.enableSelect,z=S===void 0?!0:S,de=this.eventNames().indexOf(t)!==-1||this.eventNames().indexOf("un"+t)!==-1;return(t==="click"||t==="dblclick")&&z&&(de=!0),t==="mousemove"&&(d||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(de=!0),this.isVisible()&&de}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return d.stop()}},o)}));function t(){return r.apply(this,arguments)}return t}()},{key:"rebuildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.buildModels();case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"renderMulPass",value:function(){var r=(0,ft.Z)(fe().mark(function o(u){return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,u.render();case 2:case"end":return S.stop()}},o)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"renderModels",value:function(t){var o=this;return this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(u){u.draw({uniforms:o.layerModel.getUninforms()},t)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(t,o,u,d){var S=this.configService.getAttributeConfig(this.id)||{};return(0,ht.isEqual)(S[t],{field:o,values:u})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(t)!==-1&&this.configService.setAttributeConfig(this.id,(0,bt.Z)({},t,{field:o,values:u})),this.startInit?this.styleAttributeService.updateStyleAttribute(t,{scale:(0,ge.Z)({field:o},this.splitValuesAndCallbackInAttribute(u,this.getLayerConfig()[o]))},d):this.pendingStyleAttributes.push({attributeName:t,attributeField:o,attributeValues:u,updateOptions:d}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(t){console.warn("empty fn")}},{key:"processData",value:function(t){return t}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.models.forEach(function(S){return S.destroy()}),this.models=[],d.next=4,this.layerModel.initModels();case 4:this.models=d.sent;case 5:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(t,o){return{values:(0,ht.isFunction)(t)?void 0:t||o,callback:(0,ht.isFunction)(t)?t:void 0}}}]),n}(Vr.EventEmitter),Sc=(0,Rl.Z)(kh.prototype,"configService",[Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kh),Pl=g(37620),Xc,Nc,Ql;function fc(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=oo(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function oo(a,s){if(a){if(typeof a=="string")return Do(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Do(a,s)}}function Do(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var nu=(Xc=(0,Te.yT)(Te.vK.IGlobalConfigService),Nc=function(){function a(s){(0,Cr.Z)(this,a),(0,Ul.Z)(this,"configService",Ql,this),this.layer=s,this.rendererService=s.getContainer().get(Te.vK.IRendererService),this.pickingService=s.getContainer().get(Te.vK.IPickingService),this.shaderModuleService=s.getContainer().get(Te.vK.IShaderModuleService),this.styleAttributeService=s.getContainer().get(Te.vK.IStyleAttributeService),this.mapService=s.getContainer().get(Te.vK.IMapService),this.iconService=s.getContainer().get(Te.vK.IIconService),this.fontService=s.getContainer().get(Te.vK.IFontService),this.cameraService=s.getContainer().get(Te.vK.ICameraService),this.layerService=s.getContainer().get(Te.vK.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,width:1,height:1}))}return(0,Nr.Z)(a,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertiesExist.hasOpacity,this.stylePropertiesExist.hasStrokeOpacity,this.stylePropertiesExist.hasStrokeWidth,this.stylePropertiesExist.hasStroke,this.stylePropertiesExist.hasOffsets,this.stylePropertiesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(n){var r=!1;return(0,ht.isEqual)(n.thetaOffset,this.cacheStyleProperties.thetaOffset)||(r=!0,this.cacheStyleProperties.thetaOffset=n.thetaOffset),(0,ht.isEqual)(n.opacity,this.cacheStyleProperties.opacity)||(r=!0,this.cacheStyleProperties.opacity=n.opacity),(0,ht.isEqual)(n.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(r=!0,this.cacheStyleProperties.strokeOpacity=n.strokeOpacity),(0,ht.isEqual)(n.strokeWidth,this.cacheStyleProperties.strokeWidth)||(r=!0,this.cacheStyleProperties.strokeWidth=n.strokeWidth),(0,ht.isEqual)(n.stroke,this.cacheStyleProperties.stroke)||(r=!0,this.cacheStyleProperties.stroke=n.stroke),(0,ht.isEqual)(n.offsets,this.cacheStyleProperties.offsets)||(r=!0,this.cacheStyleProperties.offsets=n.offsets),this.dataTexture===void 0&&(r=!0),r}},{key:"judgeStyleAttributes",value:function(n){this.clearLastCalRes(),n.opacity!==void 0&&!(0,ht.isNumber)(n.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertiesExist.hasOpacity=1,this.cellLength+=1),n.strokeOpacity!==void 0&&!(0,ht.isNumber)(n.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertiesExist.hasStrokeOpacity=1,this.cellLength+=1),n.strokeWidth!==void 0&&!(0,ht.isNumber)(n.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertiesExist.hasStrokeWidth=1,this.cellLength+=1),n.stroke!==void 0&&!this.isStaticColor(n.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertiesExist.hasStroke=1,this.cellLength+=4),n.offsets!==void 0&&!this.isOffsetStatic(n.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertiesExist.hasOffsets=1,this.cellLength+=2),n.thetaOffset!==void 0&&!(0,ht.isNumber)(n.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertiesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(n){return(0,ht.isString)(n)?!!(0,Pl.ZP)(n):!1}},{key:"getStrokeColor",value:function(n){if(this.isStaticColor(n)){var r=(0,tt.CI)(n);return r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,r[2]=r[2]?r[2]:0,r[3]=r[3]?r[3]:0,r}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(n){return!!(Array.isArray(n)&&n.length===2&&(0,ht.isNumber)(n[0])&&(0,ht.isNumber)(n[1]))}},{key:"patchMod",value:function(n,r){for(var t=0;t<r;t++)n.push(-1)}},{key:"patchData",value:function(n,r,t){var o=fc(t),u;try{for(o.s();!(u=o.n()).done;){var d=u.value,S=d.attr,z=d.count,de=r[S];de!==void 0?S==="stroke"?n.push.apply(n,(0,le.Z)((0,tt.CI)(de))):S==="offsets"?this.isOffsetStatic(de)?n.push(-de[0],de[1]):n.push(0,0):n.push((0,ht.isNumber)(de)?de:1):this.patchMod(n,z)}}catch(be){o.e(be)}finally{o.f()}}},{key:"calDataFrame",value:function(n,r,t){for(var o=r.length,u=Math.ceil(o*n/this.DATA_TEXTURE_WIDTH),d=u*this.DATA_TEXTURE_WIDTH,S=[],z=0;z<o;z++){var de=r[z];this.patchData(S,de,t)}for(var be=S.length;be<d;be++)S.push(-1);return{data:S,width:this.DATA_TEXTURE_WIDTH,height:u}}},{key:"getBlend",value:function(){var n=this.layer.getLayerConfig(),r=n.blend,t=r===void 0?"normal":r;return uu[Te.h0[t]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var s=(0,ft.Z)(fe().mark(function r(){return fe().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",!1);case 1:case"end":return o.stop()}},r)}));function n(){return s.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var s=(0,ft.Z)(fe().mark(function r(){return fe().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return o.stop()}},r)}));function n(){return s.apply(this,arguments)}return n}()},{key:"initModels",value:function(){var s=(0,ft.Z)(fe().mark(function r(){return fe().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return o.stop()}},r)}));function n(){return s.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.duration||4,n.interval||.2,n.trailLength||.1]}},{key:"startModelAnimate",value:function(){var n=this.layer.getLayerConfig(),r=n.animateOption;r.enable&&this.layer.setAnimateStartTime()}}]),a}(),Ql=(0,Rl.Z)(Nc.prototype,"configService",[Xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc),Jl;(function(a){a[a.solid=0]="solid",a[a.dash=1]="dash"})(Jl||(Jl={}));var xl;(function(a){a.VERTICAL="vertical",a.HORIZONTAL="horizontal"})(xl||(xl={}));var mu;(function(a){a.NORMAL="normal",a.REPLACE="replace"})(mu||(mu={}));var Ku;(function(a){a[a.pixel=0]="pixel",a[a.meter=1]="meter"})(Ku||(Ku={}));var Kc;(function(a){a.ALWAYS="always",a.DRAGEND="dragend"})(Kc||(Kc={}));function Gh(a){var s=Yu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Yu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bl=function(a){(0,kr.Z)(n,a);var s=Gh(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateMode",Kc.ALWAYS),(0,bt.Z)((0,or.Z)(r),"renderUpdate",function(){var d=r.layer.getLayerConfig(),S=d.zIndex,z=S===void 0?10:S,de=d.update,be=de===void 0?Kc.ALWAYS:de,it=d.animateOption,nt=it===void 0?{enable:!1,duration:20}:it;+r.canvas.style.zIndex===z&&(r.canvas.style.zIndex=z+""),r.updateMode!==be&&(r.updateMode=be,r.unBindListener(),r.bindListener()),r.updateMode===Kc.ALWAYS&&nt.enable&&r.renderCanvas()}),(0,bt.Z)((0,or.Z)(r),"unBindListener",function(){r.mapService.off("mapchange",r.renderCanvas),r.mapService.off("zoomstart",r.clearCanvas),r.mapService.off("zoomend",r.renderCanvas),r.mapService.off("movestart",r.clearCanvas),r.mapService.off("moveend",r.renderCanvas)}),(0,bt.Z)((0,or.Z)(r),"bindListener",function(){r.updateMode===Kc.ALWAYS?r.mapService.on("mapchange",r.renderCanvas):(r.mapService.on("zoomstart",r.clearCanvas),r.mapService.on("zoomend",r.renderCanvas),r.mapService.on("movestart",r.clearCanvas),r.mapService.on("moveend",r.renderCanvas))}),(0,bt.Z)((0,or.Z)(r),"clearCanvas",function(){if(r.ctx){var d=r.rendererService.getViewportSize(),S=d.width,z=d.height;r.ctx.clearRect(0,0,S,z)}}),(0,bt.Z)((0,or.Z)(r),"renderCanvas",function(){var d=r.rendererService.getViewportSize(),S=d.width,z=d.height;if(r.prevSize[0]!==S||r.prevSize[1]!==z){r.prevSize=[S,z];var de=r.mapService.getSize(),be=(0,xi.Z)(de,2),it=be[0],nt=be[1];r.canvas.width=S,r.canvas.height=z,r.canvas.style.width=it+"px",r.canvas.style.height=nt+"px"}var Kt=r.layer.getLayerConfig(),tr=Kt.drawingOnCanvas;r.ctx&&tr({canvas:r.canvas,ctx:r.ctx,mapService:r.mapService,size:[S,z]})}),r}return(0,Nr.Z)(n,[{key:"clearModels",value:function(){if(this.canvas){var t;(t=this.mapService.getContainer())===null||t===void 0||t.removeChild(this.canvas),this.canvas=null}this.unBindListener()}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S;return fe().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return u=this.layer.getLayerConfig(),d=u.update,S=d===void 0?Kc.ALWAYS:d,this.updateMode=S,this.initCanvas(),this.renderCanvas(),this.bindListener(),this.mapService.getContainer(),de.abrupt("return",[]);case 7:case"end":return de.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"initCanvas",value:function(){var t,o=this.layer.getLayerConfig(),u=o.zIndex,d=this.mapService.getSize(),S=(0,xi.Z)(d,2),z=S[0],de=S[1],be=this.rendererService.getViewportSize(),it=be.width,nt=be.height;this.prevSize=[it,nt];var Kt=document.createElement("canvas");this.canvas=Kt,Kt.width=it,Kt.height=nt,Kt.style.pointerEvents="none",Kt.style.width=z+"px",Kt.style.height=de+"px",Kt.style.position="absolute",Kt.style.top="0",Kt.style.left="0",Kt.style.zIndex=u+"",(t=this.mapService.getContainer())===null||t===void 0||t.appendChild(Kt);var tr=Kt.getContext("2d");this.ctx=tr}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){}}]),n}(nu),yd={canvas:bl},ph=yd;function wc(a){var s=Yc();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Yc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var kl=function(a){(0,kr.Z)(n,a);var s=wc(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","CanvasLayer"),(0,bt.Z)((0,or.Z)(r),"forceRender",!0),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new ph[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"hide",value:function(){return this.layerModel.clearCanvas&&this.layerModel.clearCanvas(),this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"renderModels",value:function(){var t,o=this;return this!==null&&this!==void 0&&(t=this.layerModel)!==null&&t!==void 0&&t.renderUpdate&&this.layerModel.renderUpdate(),this.models.forEach(function(u){u.draw({uniforms:o.layerModel.getUninforms()},!1)}),this}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={canvas:{}};return o[t]}},{key:"getModelType",value:function(){return"canvas"}}]),n}(eu),Dr=g(9187),Dl=g.n(Dr),Vo=g(85975),qo=g(77160),du=100,Dh=36,Wf=40;function zc(a){return a/180*Math.acos(-1)}function df(a){var s=zc(a[0])+Math.PI/2,n=zc(a[1]),r=du+Math.random()*.4,t=r*Math.cos(n)*Math.cos(s),o=r*Math.cos(n)*Math.sin(s),u=r*Math.sin(n);return[o,u,t]}function rc(a,s){var n=Vo.create(),r=Vo.create(),t=qo.fromValues(0,1,0),o=qo.fromValues(0,0,0);s=s||{},a=typeof a!="undefined"?a:1;for(var u=typeof s.segments!="undefined"?s.segments:32,d=2+u,S=2*d,z=[],de=[],be=[],it=[],nt=[],Kt=[],tr=0;tr<=d;tr++){for(var Ir=tr/d,jr=Ir*Math.PI,on=0;on<=S;on++){var tn=on/S,Yn=tn*Math.PI*2;Vo.identity(r),Vo.rotateZ(r,r,-jr),Vo.identity(n),Vo.rotateY(n,n,Yn),qo.transformMat4(o,t,r),qo.transformMat4(o,o,n),qo.scale(o,o,-a),be.push(o.slice()),it.push.apply(it,(0,le.Z)(o.slice())),qo.normalize(o,o),nt.push.apply(nt,(0,le.Z)(o.slice())),Kt.push([tn,1-Ir]),it.push(tn,1-Ir)}if(tr>0)for(var ci=be.length,Zi=ci-2*(S+1);Zi+S+2<ci;Zi++)z.push([Zi,Zi+1,Zi+S+1]),de.push(Zi,Zi+1,Zi+S+1),z.push([Zi+S+1,Zi+1,Zi+S+2]),de.push(Zi+S+1,Zi+1,Zi+S+2)}return{cells:z,positions:be,uvs:Kt,positionsArr:it,indicesArr:de,normalArr:nt}}var ys=g(31437),bf=ys.Ue(),Xf=ys.Ue(),rl=ys.Ue(),Cc=ys.Ue(),Zc=ys.Ue();function sd(a,s,n,r,t){ys.IH(a,n,r),ys.Fv(a,a),s=ys.al(-a[1],a[0]);var o=ys.al(-n[1],n[0]);return[t/ys.AK(s,o),s]}function qc(a,s){return ys.t8(a,-s[1],s[0])}function f(a,s,n){return ys.lu(a,s,n),ys.Fv(a,a),a}function m(a,s){return a[0]===s[0]&&a[1]===s[1]}function p(a){for(var s=new Map,n=0;n<a.length;n++){var r=a[0].toString()+"-"+a[1].toString();s.get(r)?(a.splice(n,1),n++):s.set(r,r)}return a}var E=function(){function a(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Cr.Z)(this,a),(0,bt.Z)(this,"lastFlip",-1),(0,bt.Z)(this,"miter",ys.al(0,0)),(0,bt.Z)(this,"started",!1),(0,bt.Z)(this,"dash",!1),(0,bt.Z)(this,"totalDistance",0),(0,bt.Z)(this,"currentIndex",0),this.join=s.join||"miter",this.cap=s.cap||"butt",this.miterLimit=s.miterLimit||10,this.thickness=s.thickness||1,this.dash=s.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,Nr.Z)(a,[{key:"simpleExtrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var t=n.length,o=r.startIndex,u=1;u<t;u++){var d=n[u-1],S=n[u],z=u<n.length-1?n[u+1]:null,de=this.simpleSegment(r,o,d,S,z);o+=de}if(this.dash)for(var be=0;be<r.positions.length/6;be++)r.positions[be*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(n,r){var t=this.complex;if(n.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=n.length,u=t.startIndex,d=1;d<o;d++){var S,z,de,be=n[d-1];be.push((S=r[d-1][2])!==null&&S!==void 0?S:0);var it=r[d-1],nt=n[d];nt.push((z=r[d][2])!==null&&z!==void 0?z:0);var Kt=r[d],tr=d<n.length-1?[].concat((0,le.Z)(n[d+1]),[(de=r[d+1][2])!==null&&de!==void 0?de:0]):null,Ir=d<r.length-1?r[d+1]:null,jr=this.simpleSegment(t,u,be,nt,tr,it,Kt,Ir);u+=jr}if(this.dash)for(var on=0;on<t.positions.length/6;on++)t.positions[on*6+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"extrude_gaode2",value:function(n,r){var t=this.complex;if(n.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=n.length,u=t.startIndex,d=1;d<o;d++){var S,z,de,be=n[d-1];be.push((S=r[d-1][2])!==null&&S!==void 0?S:0);var it=r[d-1],nt=n[d];nt.push((z=r[d][2])!==null&&z!==void 0?z:0);var Kt=r[d],tr=d<n.length-1?[].concat((0,le.Z)(n[d+1]),[(de=r[d+1][2])!==null&&de!==void 0?de:0]):null,Ir=d<r.length-1?r[d+1]:null,jr=this.segment_gaode2(t,u,be,nt,tr,it,Kt,Ir);u+=jr}if(this.dash)for(var on=0;on<t.positions.length/6;on++)t.positions[on*6+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"extrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var t=n.length,o=r.startIndex,u=1;u<t;u++){var d=n[u-1],S=n[u],z=u<n.length-1?n[u+1]:null,de=this.segment(r,o,d,S,z);o+=de}if(this.dash)for(var be=0;be<r.positions.length/6;be++)r.positions[be*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleSegment",value:function(n,r,t,o,u){var d=0,S=n.indices,z=n.positions,de=n.normals,be=(0,tt.Z)([o[0],o[1]]),it=(0,tt.Z)([t[0],t[1]]);f(rl,be,it);var nt=0;if(this.dash&&(nt=this.lineSegmentDistance(be,it),this.totalDistance+=nt),this.normal||(this.normal=ys.Ue(),qc(this.normal,rl)),this.started||(this.started=!0,this.extrusions(z,de,t,this.normal,this.thickness,this.totalDistance-nt)),S.push(r+0,r+1,r+2),!u)qc(this.normal,rl),this.extrusions(z,de,o,this.normal,this.thickness,this.totalDistance),S.push.apply(S,(0,le.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),d+=2;else{var Kt=(0,tt.Z)([u[0],u[1]]);m(be,Kt)&&ys.IH(Kt,be,ys.Fv(Kt,ys.$X(Kt,be,it))),f(Cc,Kt,be);var tr=sd(Zc,ys.Ue(),rl,Cc,this.thickness),Ir=(0,xi.Z)(tr,2),jr=Ir[0],on=Ir[1],tn=ys.AK(Zc,this.normal)<0?-1:1;this.extrusions(z,de,o,on,jr,this.totalDistance),S.push.apply(S,(0,le.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),tn=-1,ys.JG(this.normal,on),d+=2,this.lastFlip=tn}return d}},{key:"segment_gaode2",value:function(n,r,t,o,u,d,S,z){var de=0,be=n.indices,it=n.positions,nt=n.normals,Kt=this.cap==="square",tr=this.join==="bevel",Ir=(0,tt.Z)([S[0],S[1]]),jr=(0,tt.Z)([d[0],d[1]]);f(rl,o,t);var on=0;if(this.dash&&(on=this.lineSegmentDistance(Ir,jr),this.totalDistance+=on),this.normal||(this.normal=ys.Ue(),qc(this.normal,rl)),!this.started)if(this.started=!0,Kt){var tn=ys.Ue(),Yn=ys.Ue();ys.IH(tn,this.normal,rl),ys.IH(Yn,this.normal,rl),nt.push(Yn[0],Yn[1],0),nt.push(tn[0],tn[1],0),it.push(t[0],t[1],t[2]|0,this.totalDistance-on,-this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),it.push(t[0],t[1],t[2]|0,this.totalDistance-on,this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(it,nt,t,this.normal,this.thickness,this.totalDistance-on);if(be.push(r+0,r+1,r+2),u){m(o,u)&&ys.IH(u,o,ys.Fv(u,ys.$X(u,o,t))),f(Cc,u,o);var zi=sd(Zc,ys.Ue(),rl,Cc,this.thickness),pa=(0,xi.Z)(zi,2),_o=pa[0],wo=pa[1],Ba=ys.AK(Zc,this.normal)<0?-1:1,ms=tr;if(!ms&&this.join==="miter"){var au=_o;au>this.miterLimit&&(ms=!0)}ms?(nt.push(this.normal[0],this.normal[1],0),nt.push(wo[0],wo[1],0),it.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*Ba,o[2]|0),this.complex.indexes.push(this.currentIndex),it.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*Ba,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,be.push.apply(be,(0,le.Z)(this.lastFlip!==-Ba?[r,r+2,r+3]:[r+2,r+1,r+3])),be.push(r+2,r+3,r+4),qc(bf,Cc),ys.JG(this.normal,bf),nt.push(this.normal[0],this.normal[1],0),it.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*Ba,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,de+=3):(this.extrusions(it,nt,o,wo,_o,this.totalDistance),be.push.apply(be,(0,le.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),Ba=-1,ys.JG(this.normal,wo),de+=2),this.lastFlip=Ba}else{if(qc(this.normal,rl),Kt){var ci=ys.Ue(),Zi=ys.Ue();ys.lu(Zi,rl,this.normal),ys.IH(ci,rl,this.normal),nt.push(Zi[0],Zi[1],0),nt.push(ci[0],ci[1],0),it.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),it.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(it,nt,o,this.normal,this.thickness,this.totalDistance);be.push.apply(be,(0,le.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),de+=2}return de}},{key:"segment",value:function(n,r,t,o,u){var d=0,S=n.indices,z=n.positions,de=n.normals,be=this.cap==="square",it=this.join==="bevel",nt=(0,tt.Z)([o[0],o[1]]),Kt=(0,tt.Z)([t[0],t[1]]);f(rl,nt,Kt);var tr=0;if(this.dash&&(tr=this.lineSegmentDistance(nt,Kt),this.totalDistance+=tr),this.normal||(this.normal=ys.Ue(),qc(this.normal,rl)),!this.started)if(this.started=!0,be){var Ir=ys.Ue(),jr=ys.Ue();ys.IH(Ir,this.normal,rl),ys.IH(jr,this.normal,rl),de.push(jr[0],jr[1],0),de.push(Ir[0],Ir[1],0),z.push(t[0],t[1],t[2]|0,this.totalDistance-tr,-this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),z.push(t[0],t[1],t[2]|0,this.totalDistance-tr,this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(z,de,t,this.normal,this.thickness,this.totalDistance-tr);if(S.push(r+0,r+1,r+2),u){var Yn=(0,tt.Z)([u[0],u[1]]);m(nt,Yn)&&ys.IH(Yn,nt,ys.Fv(Yn,ys.$X(Yn,nt,Kt))),f(Cc,Yn,nt);var ci=sd(Zc,ys.Ue(),rl,Cc,this.thickness),Zi=(0,xi.Z)(ci,2),zi=Zi[0],pa=Zi[1],_o=ys.AK(Zc,this.normal)<0?-1:1,wo=it;if(!wo&&this.join==="miter"){var Ba=zi;Ba>this.miterLimit&&(wo=!0)}wo?(de.push(this.normal[0],this.normal[1],0),de.push(pa[0],pa[1],0),z.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*_o,o[2]|0),this.complex.indexes.push(this.currentIndex),z.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*_o,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,S.push.apply(S,(0,le.Z)(this.lastFlip!==-_o?[r,r+2,r+3]:[r+2,r+1,r+3])),S.push(r+2,r+3,r+4),qc(bf,Cc),ys.JG(this.normal,bf),de.push(this.normal[0],this.normal[1],0),z.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*_o,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,d+=3):(this.extrusions(z,de,o,pa,zi,this.totalDistance),S.push.apply(S,(0,le.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),_o=-1,ys.JG(this.normal,pa),d+=2),this.lastFlip=_o}else{if(qc(this.normal,rl),be){var on=ys.Ue(),tn=ys.Ue();ys.lu(tn,rl,this.normal),ys.IH(on,rl,this.normal),de.push(tn[0],tn[1],0),de.push(on[0],on[1],0),z.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),z.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(z,de,o,this.normal,this.thickness,this.totalDistance);S.push.apply(S,(0,le.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),d+=2}return d}},{key:"extrusions",value:function(n,r,t,o,u,d){r.push(o[0],o[1],0),r.push(o[0],o[1],0),n.push(t[0],t[1],t[2]|0,d,-u,t[2]|0),this.complex.indexes.push(this.currentIndex),n.push(t[0],t[1],t[2]|0,d,u,t[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(n,r){var t=r[0]-n[0],o=r[1]-n[1];return Math.sqrt(t*t+o*o)}}]),a}();function Y(a){var s=a[0][0],n=a[0][a[0].length-1];s[0]===n[0]&&s[1]===n[1]&&(a[0]=a[0].slice(0,a[0].length-1));for(var r=a[0].length,t=Dl().flatten(a),o=t.vertices,u=t.dimensions,d=[],S=[],z=0;z<o.length/u;z++)u===2?d.push(o[z*2],o[z*2+1],1):d.push(o[z*3],o[z*3+1],1);var de=Dl()(t.vertices,t.holes,t.dimensions);S.push.apply(S,(0,le.Z)(de));for(var be=function(Kt){var tr=t.vertices.slice(Kt*u,(Kt+1)*u),Ir=t.vertices.slice((Kt+1)*u,(Kt+2)*u);Ir.length===0&&(Ir=t.vertices.slice(0,u));var jr=d.length/3;d.push(tr[0],tr[1],1,Ir[0],Ir[1],1,tr[0],tr[1],0,Ir[0],Ir[1],0),S.push.apply(S,(0,le.Z)([0,2,1,2,3,1].map(function(on){return on+jr})))},it=0;it<r;it++)be(it);return{positions:d,index:S}}function Ce(a){var s=Dl().flatten(a),n=Dl()(s.vertices,s.holes,s.dimensions);return{positions:s.vertices,index:n}}function ze(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=a[0][0],r=a[0][a[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(a[0]=a[0].slice(0,a[0].length-1));for(var t=a[0].length,o=Dl().flatten(a),u=o.vertices,d=o.dimensions,S=[],z=[],de=[],be=0;be<u.length/d;be++)d===2?S.push(u[be*2],u[be*2+1],1,-1,-1):S.push(u[be*3],u[be*3+1],1,-1,-1),de.push(0,0,1);var it=Dl()(o.vertices,o.holes,o.dimensions);z.push.apply(z,(0,le.Z)(it));for(var nt=function(Ir){var jr=o.vertices.slice(Ir*d,(Ir+1)*d),on=o.vertices.slice((Ir+1)*d,(Ir+2)*d);on.length===0&&(on=o.vertices.slice(0,d));var tn=S.length/5;S.push(jr[0],jr[1],1,0,0,on[0],on[1],1,.1,0,jr[0],jr[1],0,0,.8,on[0],on[1],0,.1,.8);var Yn=gt([on[0],on[1],1],[jr[0],jr[1],0],[jr[0],jr[1],1],s);de.push.apply(de,(0,le.Z)(Yn).concat((0,le.Z)(Yn),(0,le.Z)(Yn),(0,le.Z)(Yn))),z.push.apply(z,(0,le.Z)([1,2,0,3,2,1].map(function(ci){return ci+tn})))},Kt=0;Kt<t;Kt++)nt(Kt);return{positions:S,index:z,normals:de}}function gt(a,s,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,t=qo.create(),o=qo.create(),u=qo.create();r&&(a=(0,tt.vP)(a),s=(0,tt.vP)(s),n=(0,tt.vP)(n));var d=qo.fromValues.apply(qo,(0,le.Z)(a)),S=qo.fromValues.apply(qo,(0,le.Z)(s)),z=qo.fromValues.apply(qo,(0,le.Z)(n));qo.sub(t,z,S),qo.sub(o,d,S),qo.cross(u,t,o);var de=qo.create();return qo.normalize(de,u),de}var Gt,sr;(function(a){a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn"})(sr||(sr={}));var Mr;(function(a){a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon"})(Mr||(Mr={}));function Or(a){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=Math.PI*2/a,r=[],t=0;t<a;t++)r.push(n*t+s*Math.PI/12);var o=r.map(function(u){var d=Math.sin(u+Math.PI/4),S=Math.cos(u+Math.PI/4);return[d,S,0]});return o}function Br(){return Or(30)}function yn(){return Or(4)}function hn(){return Or(3)}function kn(){return Or(6,1)}function an(){return Or(5)}var Rn=(Gt={},(0,bt.Z)(Gt,Mr.CIRCLE,Br),(0,bt.Z)(Gt,Mr.HEXAGON,kn),(0,bt.Z)(Gt,Mr.TRIANGLE,hn),(0,bt.Z)(Gt,Mr.SQUARE,yn),(0,bt.Z)(Gt,Mr.PENTAGON,an),(0,bt.Z)(Gt,sr.CYLINDER,Br),(0,bt.Z)(Gt,sr.HEXAGONCOLUMN,kn),(0,bt.Z)(Gt,sr.TRIANGLECOLUMN,hn),(0,bt.Z)(Gt,sr.SQUARECOLUMN,yn),(0,bt.Z)(Gt,sr.PENTAGONCOLUMN,an),Gt),$n={};function di(a){var s=(0,tt.SI)(a.coordinates);return{vertices:[].concat((0,le.Z)(s),(0,le.Z)(s),(0,le.Z)(s),(0,le.Z)(s)),indices:[0,1,2,2,3,0],size:s.length}}function Di(a){var s=(0,tt.SI)(a.coordinates),n=df(s);return{vertices:[].concat((0,le.Z)(n),(0,le.Z)(n),(0,le.Z)(n),(0,le.Z)(n)),indices:[0,1,2,2,3,0],size:n.length}}function Ti(a){var s=a.shape,n=_s(s,!1),r=n.positions,t=n.index,o=n.normals;return{vertices:r,indices:t,normals:o,size:5}}function Fi(a){var s=(0,tt.SI)(a.coordinates);return{vertices:(0,le.Z)(s),indices:[0],size:s.length}}function ra(a){var s=a.coordinates,n=a.originCoordinates,r=a.version,t=new E({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var o=s;Array.isArray(o[0][0])||(o=[s]);var u=n;Array.isArray(u[0][0])||(u=[n]);for(var d=0;d<o.length;d++){var S=o[d],z=u[d];t.extrude_gaode2(S,z)}}else{var de=s;de[0]&&!Array.isArray(de[0][0])&&(de=[s]),de.forEach(function(it){t.extrude(it)})}var be=t.complex;return{vertices:be.positions,indices:be.indices,normals:be.normals,indexes:be.indexes,size:6}}function Da(a){var s=a.coordinates,n=[];if(!Array.isArray(s[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var r=is(s),t=r.results,o=r.totalDistance;return t.map(function(u){n.push(u[0],u[1],u[2],u[3],0,o)}),{vertices:n,indices:[],normals:[],size:6,count:t.length}}function Na(a){var s=a.coordinates,n=[];if(!Array.isArray(s[0]))return{vertices:[],indices:[],size:4,count:0};var r=rs(s),t=r.results;return t.map(function(o){n.push(o[0],o[1],o[2],o[3])}),{vertices:n,indices:[],size:4,count:t.length}}function po(a,s){var n=s[0]-a[0],r=s[1]-a[1];return Math.sqrt(n*n+r*r)}function No(a,s){return a.length<3&&a.push(0),s!==void 0&&a.push(s),a}function is(a){var s=a;Array.isArray(s)&&Array.isArray(s[0])&&Array.isArray(s[0][0])&&(s=a.flat());var n=0;if(s.length<2)return{results:s,totalDistance:0};var r=[],t=No(s[0],n);r.push(t);for(var o=1;o<s.length-1;o++){var u=po(s[o-1],s[o]);n+=u;var d=No(s[o],n);r.push(d),r.push(d)}var S=po(s[s.length-2],s[s.length-1]);return n+=S,r.push(No(s[s.length-1],n)),{results:r,totalDistance:n}}function rs(a){if(a.length<2)return{results:a};var s=[],n=No(a[0]);s.push(n);for(var r=1;r<a.length-1;r++){var t=No(a[r]);s.push(t),s.push(t)}return s.push(No(a[a.length-1])),{results:s}}function Ls(a){var s=a.coordinates,n=Dl().flatten(s),r=n.vertices,t=n.dimensions,o=n.holes;return{indices:Dl()(r,o,t),vertices:r,size:t}}function vo(a){var s=a.coordinates,n=Dl().flatten(s),r=n.vertices,t=n.dimensions,o=n.holes;return{indices:Dl()(r,o,t),vertices:ds(r),size:t+4}}function ds(a){for(var s=[],n=(0,tt.Rx)(a),r=n.center,t=n.radius,o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];s.push.apply(s,[u,d,0].concat((0,le.Z)(r),[t]))}return s}function Ns(a){var s=a.coordinates,n=ze(s,!0),r=n.positions,t=n.index,o=n.normals;return{vertices:r,indices:t,normals:o,size:5}}function cs(a){var s=a.shape,n=Ac(s),r=n.positions,t=n.index;return{vertices:r,indices:t,size:3}}function Qo(a){var s=a.coordinates,n=[].concat((0,le.Z)(s[0]),[0,0,1,s[1][0],s[0][1],0,1,1],(0,le.Z)(s[1]),[0,1,0],(0,le.Z)(s[0]),[0,0,1],(0,le.Z)(s[1]),[0,1,0,s[0][0],s[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function $s(a,s){for(var n=s||30,r=a.coordinates,t=[],o=[],u=function(z){t.push(z,1,z,r[0][0],r[0][1],r[1][0],r[1][1],z,-1,z,r[0][0],r[0][1],r[1][0],r[1][1]),z!==n-1&&o.push.apply(o,(0,le.Z)([0,1,2,1,3,2].map(function(de){return z*2+de})))},d=0;d<n;d++)u(d);return{vertices:t,indices:o,size:7}}function Cs(a){var s=a.coordinates;s.length===2&&s.push(0);var n=Qu(-1,1),r=Qu(1,1),t=Qu(-1,-1),o=Qu(1,-1),u=[].concat((0,le.Z)(s),(0,le.Z)(n),(0,le.Z)(s),(0,le.Z)(t),(0,le.Z)(s),(0,le.Z)(o),(0,le.Z)(s),(0,le.Z)(r)),d=[0,1,2,3,0,2];return{vertices:u,indices:d,size:5}}function _s(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($n&&$n[a])return $n[a];var n=Rn[a]?Rn[a]():Rn.cylinder(),r=ze([n],s);return $n[a]=r,r}function El(a,s){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,t=new Float32Array(a.length/n*3),o,u,d,S=vec3.create(),z=vec3.create(),de=vec3.create(),be=0,it=s.length;be<it;be+=3){o=s[be+0]*3,u=s[be+1]*3,d=s[be+2]*3;var nt=[a[o],a[o+1]],Kt=[a[u],a[u+1]],tr=[a[d],a[d+1]];r&&(nt=lngLatToMeters(nt),Kt=lngLatToMeters(Kt),tr=lngLatToMeters(tr));var Ir=nt,jr=_slicedToArray(Ir,2),on=jr[0],tn=jr[1],Yn=vec3.fromValues(on,tn,a[o+2]),ci=Kt,Zi=_slicedToArray(ci,2),zi=Zi[0],pa=Zi[1],_o=vec3.fromValues(zi,pa,a[u+2]),wo=tr,Ba=_slicedToArray(wo,2),ms=Ba[0],au=Ba[1],Al=vec3.fromValues(ms,au,a[d+2]);vec3.sub(S,Al,_o),vec3.sub(z,Yn,_o),vec3.cross(de,S,z),t[o]+=S[0],t[o+1]+=S[1],t[o+2]+=S[2],t[u]+=S[0],t[u+1]+=S[1],t[u+2]+=S[2],t[d]+=S[0],t[d+1]+=S[1],t[d+2]+=S[2]}return nl(t),t}function nl(a){for(var s=0,n=a.length;s<n;s+=3){var r=vec3.fromValues(a[s],a[s+1],a[s+2]),t=vec3.create();vec3.normalize(t,r),a.set(t,s)}}function qu(a){var s=a[0][0],n=a[0][a[0].length-1];return s[0]===n[0]&&s[1]===n[1]}function Ac(a){var s=["cylinder","triangleColumn","hexagonColumn","squareColumn"],n=Rn[a]?Rn[a]():Rn.circle(),r=s.indexOf(a)===-1?Ce([n]):Y([n]);return r}function Qu(a,s){var n=(a+1)/2,r=(s+1)/2;return[n,r]}function Ju(){var a=rc(du,{segments:Dh}),s=a.positionsArr,n=a.indicesArr,r=a.normalArr;return{vertices:s,indices:n,size:5,normals:r}}function Tc(){var a=rc(du+Wf,{segments:Dh}),s=a.positionsArr,n=a.indicesArr,r=a.normalArr;return{vertices:s,indices:n,size:5,normals:r}}function ec(a){var s=Pf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ef=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

uniform float u_circleSweep;
uniform float u_cityMinSize;
uniform vec3 u_circleSweepColor;
uniform float u_circleSweepSpeed;

varying float v_worldDis;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }


  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {
    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);
    gl_FragColor.rgb += r * r * u_circleSweepColor;
  }
   
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,$l=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;
uniform mat4 u_Mvp;

uniform float u_circleSweep;
uniform vec2 u_cityCenter;

varying float v_worldDis;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"


void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

   v_texCoord = a_Uv;

  if(u_circleSweep > 0.0) {
     vec2 lnglatscale = vec2(0.0);
    if(u_CoordinateSystem != COORDINATE_SYSTEM_P20_2) {
      lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);
    }
    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);
  }
 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,Uc=function(a){(0,kr.Z)(n,a);var s=ec(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.baseColor,S=d===void 0?"rgb(16,16,16)":d,z=t.brightColor,de=z===void 0?"rgb(255,176,38)":z,be=t.windowColor,it=be===void 0?"rgb(30,60,89)":be,nt=t.time,Kt=nt===void 0?0:nt,tr=t.sweep,Ir=tr===void 0?{enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}:tr;return{u_cityCenter:Ir.sweepCenter||this.cityCenter,u_cityMinSize:this.cityMinSize*Ir.sweepRadius,u_circleSweep:Ir.enable?1:0,u_circleSweepColor:(0,tt.CI)(Ir.sweepColor).slice(0,3),u_circleSweepSpeed:Ir.sweepSpeed,u_opacity:u,u_baseColor:(0,tt.CI)(S),u_brightColor:(0,tt.CI)(de),u_windowColor:(0,tt.CI)(it),u_time:this.layer.getLayerAnimateTime()||Kt}}},{key:"calCityGeo",value:function(){var t=(0,xi.Z)(this.layer.getSource().extent,4),o=t[0],u=t[1],d=t[2],S=t[3];if(this.mapService.version==="GAODE2.x"){this.cityCenter=this.mapService.lngLatToCoord([(d+o)/2,(S+u)/2]);var z=this.mapService.lngLatToCoord([d,S]),de=this.mapService.lngLatToCoord([o,u]);this.cityMinSize=Math.sqrt(Math.pow(z[0]-de[0],2)+Math.pow(z[1]-de[1],2))/4}else{var be=d-o,it=S-u;this.cityCenter=[(d+o)/2,(S+u)/2],this.cityMinSize=Math.sqrt(Math.pow(be,2)+Math.pow(it,2))/4}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.calCityGeo(),this.startModelAnimate(),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:$l,fragmentShader:Ef,triangulation:Ns,depth:{enable:!0},cull:{enable:!0,face:Te.gl.BACK}});case 2:return u=S.sent,S.abrupt("return",[u]);case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?10:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function Qh(a){var s=Jh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Sh=function(a){(0,kr.Z)(n,a);var s=Qh(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","CityBuildingLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.layerModel=new Uc(this),d.next=3,this.initLayerModels();case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"setLight",value:function(t){this.updateLayerConfig({time:t})}},{key:"getModelType",value:function(){return"citybuilding"}}]),n}(eu);function Of(a){var s=wh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function wh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var pf=`
uniform sampler2D u_texture;
uniform float u_opacity;

varying vec3 v_Color;
varying vec2 v_uv;

#pragma include "picking"
void main() {
  gl_FragColor = texture2D(u_texture, vec2(v_uv.x, 1.0 - v_uv.y));
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,oh=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform float u_raisingHeight: 0.0;
uniform mat4 u_Mvp;
uniform float u_opacity;
uniform vec2 u_size: [1.0, 1.0];
uniform mat2 u_RotateMatrix;

attribute vec3 a_Extrude;
attribute vec3 a_Position;
attribute vec2 a_Uv;
attribute vec3 a_Color;

varying vec3 v_Color;
varying vec2 v_uv;

#pragma include "projection"
#pragma include "picking"
void main() {
   vec3 extrude = a_Extrude;
   v_Color = a_Color;
   v_uv = a_Uv;

   float raiseHeight = u_raisingHeight;
   if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raiseHeight = u_raisingHeight * mapboxZoomScale;
   }

   // \u8BA1\u7B97\u7ECF\u7EAC\u5EA6\u70B9\u4F4D\u5750\u6807
   vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

   // \u8BA1\u7B97\u7ED5 z \u8F74\u65CB\u8F6C\u540E\u7684\u504F\u79FB
   vec2 offsetXY = project_pixel(u_RotateMatrix * vec2(extrude.x * u_size.x, 0.0));
   // \u7ED5 z \u8F74\u65CB\u8F6C
   float x = project_pos.x + offsetXY.x;
   float y = project_pos.y + offsetXY.y;
   // z \u8F74\u4E0D\u53C2\u4E0E\u65CB\u8F6C
   float z = project_pixel(extrude.y * u_size.y + raiseHeight);


   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      // gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));
      gl_Position = u_Mvp * (vec4(x, y, z, 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(x , y, z , 1.0));
   }

   setPickingColor(a_PickingColor);
}
`,Qc=function(a){(0,kr.Z)(n,a);var s=Of(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"radian",0),(0,bt.Z)((0,or.Z)(r),"planeGeometryTriangulation",function(){var d=r.layer.getLayerConfig(),S=d.center,z=S===void 0?[120,30]:S;return{size:4,indices:[0,1,2,2,3,0],vertices:[].concat((0,le.Z)(z),[1,1],(0,le.Z)(z),[0,1],(0,le.Z)(z),[0,0],(0,le.Z)(z),[1,0])}}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.width,d=u===void 0?1:u,S=t.height,z=S===void 0?1:S,de=t.raisingHeight,be=de===void 0?0:de,it=1;return(this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(it=-1),this.radian=it*Math.PI*(this.mapService.getRotation()%360)/180,{u_raisingHeight:Number(be),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_opacity:o||1,u_texture:this.texture,u_size:[d,z]}}},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.drawCanvas,it=this.rendererService.createTexture2D,this.texture=it({height:0,width:0}),be&&this.updateTexture(be),tr.next=6,this.layer.buildLayerModel({moduleName:"geometryBillboard",vertexShader:oh,fragmentShader:pf,triangulation:this.planeGeometryTriangulation,primitive:Te.gl.TRIANGLES,depth:{enable:!0},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 6:return nt=tr.sent,tr.abrupt("return",[nt]);case 8:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"updateTexture",value:function(t){var o=this.rendererService.createTexture2D,u=this.layer.getLayerConfig(),d=u.canvasWidth,S=d===void 0?1:d,z=u.canvasHeight,de=z===void 0?1:z,be=document.createElement("canvas");be.width=S,be.height=de;var it=be.getContext("2d");it&&(t(be),this.texture=o({data:be,width:be.width,height:be.height,wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE}),this.layerService.reRender())}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S){var z=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],de=S%4*3;return[z[de],z[de+1],z[de+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[2],d[3]]}}})}}]),n}(nu);function nc(a){var s=ic();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ch=`
uniform sampler2D u_texture;
uniform float u_mapFlag;
uniform float u_opacity;

varying vec3 v_Color;
varying vec2 v_uv;
varying float v_clip;

#pragma include "picking"
void main() {
  // gl_FragColor = vec4(v_Color, u_opacity);
  if(u_mapFlag > 0.0) {
    gl_FragColor = texture2D(u_texture, vec2(v_uv.x, 1.0 - v_uv.y));
    gl_FragColor.a *= u_opacity;
  } else {
    // gl_FragColor = vec4(v_uv, 0.0, u_opacity);
    gl_FragColor = vec4(v_Color, u_opacity);
  }
  gl_FragColor.a *= v_clip;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Fh=`precision highp float;
uniform mat4 u_ModelMatrix;

uniform mat4 u_Mvp;
uniform float u_opacity;
uniform float u_terrainClipHeight;

attribute vec3 a_Position;
attribute vec2 a_Uv;
attribute vec3 a_Color;

varying vec3 v_Color;
varying vec2 v_uv;
varying float v_clip;

#pragma include "projection"
#pragma include "picking"
void main() {
   v_Color = a_Color;
   v_uv = a_Uv;
  
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   v_clip = 1.0;
   if(a_Position.z < u_terrainClipHeight) {
      v_clip = 0.0;
   }
  
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));

   // float x = 1.0;
   // float y = 0.0;
   // float z = 0.0;
   // mat3 translateMatrix = mat3(
   //    1.0, 0.0, 0.0 
   //    0.0, 1.0, 0.0
   //    -project_pos.x,    -project_pos.y,  1.0
   // );
   //  mat4 translateMatrix = mat4(
   //    1.0, 0.0, 0.0, 0.0 ,
   //    0.0, 1.0, 0.0, 0.0,
   //    0.0, 0.0, 1.0, 0.0,
   //    1.0, 0.0, 0.0, 1.0
   // );

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, a_Position.z, 1.0));
   }

   setPickingColor(a_PickingColor);
}
`,ku=function(a){(0,kr.Z)(n,a);var s=nc(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"terrainImageLoaded",!1),(0,bt.Z)((0,or.Z)(r),"planeGeometryTriangulation",function(){var d,S=r.layer.getLayerConfig(),z=S.width,de=z===void 0?1:z,be=S.height,it=be===void 0?1:be,nt=S.widthSegments,Kt=nt===void 0?1:nt,tr=S.heightSegments,Ir=tr===void 0?1:tr,jr=S.center,on=jr===void 0?[120,30]:jr,tn=S.terrainTexture,Yn=(d=r).initPlane.apply(d,[de,it,Kt,Ir].concat((0,le.Z)(on))),ci=Yn.indices,Zi=Yn.positions;return tn&&r.loadTerrainTexture(Zi,ci),{vertices:Zi,indices:ci,size:5}}),r}return(0,Nr.Z)(n,[{key:"initPlane",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:120,z=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,de=t/2,be=o/2,it=Math.floor(u),nt=Math.floor(d),Kt=it+1,tr=nt+1,Ir=t/it,jr=o/nt,on=[],tn=[],Yn=0;Yn<tr;Yn++)for(var ci=Yn*jr-be,Zi=0;Zi<Kt;Zi++){var zi=Zi*Ir-de;if(this.mapService.version===fl.G["GAODE2.x"]){var pa=this.mapService.lngLatToCoord([zi+S,-ci+z]),_o=(0,xi.Z)(pa,2),wo=_o[0],Ba=_o[1];tn.push(wo,Ba,0)}else tn.push(zi+S,-ci+z,0);tn.push(Zi/it),tn.push(1-Yn/nt)}for(var ms=0;ms<nt;ms++)for(var au=0;au<it;au++){var Al=au+Kt*ms,nd=au+Kt*(ms+1),Ih=au+1+Kt*(ms+1),Rh=au+1+Kt*ms;on.push(Al,nd,Rh),on.push(nd,Ih,Rh)}return{indices:on,positions:tn}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.mapTexture,d=t.terrainClipHeight,S=d===void 0?0:d,z=t.terrainTexture;if(this.mapTexture!==u){var de;this.mapTexture=u,(de=this.texture)===null||de===void 0||de.destroy(),this.updateTexture(u)}return{u_opacity:o||1,u_mapFlag:u?1:0,u_terrainClipHeight:z?S:-1,u_texture:this.texture}}},{key:"clearModels",value:function(){var t;this.terrainImage=null,(t=this.texture)===null||t===void 0||t.destroy()}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.mapTexture,this.mapTexture=be,it=this.rendererService.createTexture2D,this.texture=it({height:0,width:0}),this.updateTexture(be),tr.next=7,this.layer.buildLayerModel({moduleName:"geometryPlane",vertexShader:Fh,fragmentShader:Ch,triangulation:this.planeGeometryTriangulation,primitive:Te.gl.TRIANGLES,depth:{enable:!0},stencil:(0,tt.Vi)(S,de),blend:this.getBlend(),cull:{enable:!0,face:Te.gl.BACK}});case 7:return nt=tr.sent,tr.abrupt("return",[nt]);case 9:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"createModelData",value:function(t){if(t){var o=this.layer.getLayerConfig(),u=o.widthSegments,d=o.heightSegments,S=o.width,z=o.height,de=t,be=de.widthSegments,it=de.heightSegments,nt=de.width,Kt=de.height;this.layer.style({widthSegments:be!==void 0?be:u,heightSegments:it!==void 0?it:d,width:nt!==void 0?nt:S,height:Kt!==void 0?Kt:z})}var tr=this.layer.getEncodedData(),Ir=this.styleAttributeService.createAttributesAndIndices(tr,this.planeGeometryTriangulation);return Ir}},{key:"updateTexture",value:function(t){var o=this,u=this.rendererService.createTexture2D;if(t){var d=new Image;d.crossOrigin="anonymous",d.onload=function(){o.texture=u({data:d,width:d.width,height:d.height,wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE}),o.layerService.reRender()},d.src=t}else this.texture=u({width:0,height:0})}},{key:"getImageData",value:function(t){var o=document.createElement("canvas"),u=o.getContext("2d"),d=t.width,S=t.height;o.width=d,o.height=S,u.drawImage(t,0,0,d,S);var z=u.getImageData(0,0,d,S);return z}},{key:"translateVertex",value:function(t,o,u,d,S,z){for(var de=u.width,be=u.height,it=this.getImageData(u).data,nt=Math.floor(d),Kt=Math.floor(S),tr=nt+1,Ir=Kt+1,jr=de/nt,on=be/Kt,tn=0;tn<Ir;tn++)for(var Yn=Math.floor(tn*on),ci=Yn*de,Zi=0;Zi<tr;Zi++){var zi=Math.floor(Zi*jr),pa=(ci+zi)*4,_o=it[pa],wo=it[pa+1],Ba=it[pa+2],ms=(tn*tr+Zi)*5+2;t[ms]=z(_o,wo,Ba)}var au=this.layer.getEncodedData(),Al=this.styleAttributeService.createAttributesAndIndices(au,function(){return{vertices:t,indices:o,size:5}});this.layer.updateModelData(Al),this.layerService.throttleRenderLayers()}},{key:"loadTerrainTexture",value:function(t,o){var u=this,d=this.layer.getLayerConfig(),S=d.widthSegments,z=S===void 0?1:S,de=d.heightSegments,be=de===void 0?1:de,it=d.terrainTexture,nt=d.rgb2height,Kt=nt===void 0?function(Ir,jr,on){return Ir+jr+on}:nt;if(this.terrainImage)this.terrainImageLoaded?this.translateVertex(t,o,this.terrainImage,z,be,Kt):this.terrainImage.onload=function(){u.translateVertex(t,o,u.terrainImage,z,be,Kt)};else{var tr=new Image;this.terrainImage=tr,tr.crossOrigin="anonymous",tr.onload=function(){u.terrainImageLoaded=!0,setTimeout(function(){return u.layer.emit("terrainImageLoaded",null)}),u.translateVertex(t,o,tr,z,be,Kt)},tr.src=it}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function yu(a){var s=Jc();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var sh=`
uniform sampler2D u_texture;
uniform float u_mapFlag;
uniform float u_opacity;

varying vec3 v_Color;
varying float v_d;

void main() {

  if(v_d < 0.0) {
    discard;
  }

  if(u_mapFlag > 0.0) {
    gl_FragColor = texture2D(u_texture, gl_PointCoord);
    gl_FragColor.a *= u_opacity;
  } else {
    gl_FragColor = vec4(v_Color, u_opacity);
  }
}
`,vh=`precision highp float;

attribute vec3 a_Position;
attribute vec3 a_Color;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_opacity;
uniform float u_Scale;
varying vec3 v_Color;
varying float v_d;

#pragma include "projection"
void main() {
   v_Color = a_Color;
  
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   v_d = a_Position.z;

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, a_Position.z, 1.0));
   }

   gl_PointSize = pow((u_Zoom - 1.0), 2.0) * u_Scale;
}
`,Nf;(function(a){a.UP="up",a.DOWN="down"})(Nf||(Nf={}));var mh=function(a){(0,kr.Z)(n,a);var s=yu(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"planeGeometryUpdateTriangulation",function(){for(var d=r.layer.getLayerConfig(),S=d.spriteBottom,z=S===void 0?-1e5:S,de=r.spriteUpdate,be=z,it=r.spriteTop,nt=0;nt<r.positions.length;nt+=5)r.spriteAnimate===Nf.UP?(r.positions[nt+2]+=de,r.positions[nt+2]>it&&(r.positions[nt+2]=be)):(r.positions[nt+2]-=de,r.positions[nt+2]<be&&(r.positions[nt+2]=it));return{vertices:r.positions,indices:r.indices,size:5}}),(0,bt.Z)((0,or.Z)(r),"updateModel",function(){var d=r.layer.createAttributes({triangulation:r.planeGeometryUpdateTriangulation});r.layer.models.map(function(S){S.updateAttributes(d)}),r.layerService.throttleRenderLayers(),r.timer=requestAnimationFrame(r.updateModel)}),(0,bt.Z)((0,or.Z)(r),"planeGeometryTriangulation",function(){var d,S=r.layer.getLayerConfig(),z=S.center,de=z===void 0?[120,30]:z,be=S.spriteCount,it=be===void 0?100:be,nt=S.spriteRadius,Kt=nt===void 0?10:nt,tr=(d=r).initSprite.apply(d,[Kt,it].concat((0,le.Z)(de))),Ir=tr.indices,jr=tr.positions;return r.positions=jr,r.indices=Ir,{vertices:jr,indices:Ir,size:5}}),r}return(0,Nr.Z)(n,[{key:"initSprite",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:120,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:30,S=[],z=[],de=this.mapService,be=this.spriteAnimate===Nf.UP?-this.spriteTop:this.spriteTop,it=0;it<o;it++){var nt=Math.random()*be;z.push.apply(z,(0,le.Z)(tr(nt)))}for(var Kt=0;Kt<o;Kt++)S.push(Kt);function tr(Ir){var jr=t*Math.random(),on=t*Math.random(),tn=-t/2+jr,Yn=-t/2+on;if(de.version===fl.G["GAODE2.x"]){var ci=de.lngLatToCoord([tn+u,-Yn+d]),Zi=(0,xi.Z)(ci,2),zi=Zi[0],pa=Zi[1];return[zi,pa,Ir,0,0]}else return[tn+u,-Yn+d,Ir,0,0]}return{indices:S,positions:z}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.mapTexture,d=t.spriteScale,S=d===void 0?1:d;if(this.mapTexture!==u){var z;this.mapTexture=u,(z=this.texture)===null||z===void 0||z.destroy(),this.updateTexture(u)}return{u_opacity:o||1,u_mapFlag:u?1:0,u_texture:this.texture,u_Scale:S}}},{key:"clearModels",value:function(){var t;cancelAnimationFrame(this.timer),(t=this.texture)===null||t===void 0||t.destroy()}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt,Kt,tr,Ir;return fe().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return d=this.layer.getLayerConfig(),S=d.mapTexture,z=d.spriteTop,de=z===void 0?5e6:z,be=d.spriteUpdate,it=be===void 0?1e4:be,nt=d.spriteAnimate,Kt=nt===void 0?Nf.DOWN:nt,this.mapTexture=S,this.spriteTop=de,this.spriteUpdate=it,Kt==="up"?this.spriteAnimate=Nf.UP:this.spriteAnimate=Nf.DOWN,tr=this.rendererService.createTexture2D,this.texture=tr({height:0,width:0}),this.updateTexture(S),setTimeout(function(){u.updateModel()},100),on.next=11,this.layer.buildLayerModel({moduleName:"geometrySprite",vertexShader:vh,fragmentShader:sh,triangulation:this.planeGeometryTriangulation,primitive:Te.gl.POINTS,depth:{enable:!1},blend:this.getBlend()});case 11:return Ir=on.sent,on.abrupt("return",[Ir]);case 13:case"end":return on.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"updateTexture",value:function(t){var o=this,u=this.rendererService.createTexture2D;if(t){var d=new Image;d.crossOrigin="anonymous",d.onload=function(){o.texture=u({data:d,width:d.width,height:d.height,wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE}),o.layerService.reRender()},d.src=t}else this.texture=u({width:0,height:0})}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(nu),If={plane:ku,sprite:mh,billboard:Qc},Rf=If;function vf(a){var s=ue();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Rr=function(a){(0,kr.Z)(n,a);var s=vf(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","GeometryLayer"),(0,bt.Z)((0,or.Z)(r),"defaultSourceConfig",{data:[{x:0,y:0}],options:{parser:{type:"json",x:"x",y:"y"}}}),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new Rf[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={plane:{},sprite:{},billboard:{}};return o[t]}},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(t=o.scale)===null||t===void 0?void 0:t.field;return u==="plane"?"plane":u==="sprite"?"sprite":u==="billboard"?"billboard":"plane"}}]),n}(eu);function Mt(a){var s=St();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function St(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Vt=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
uniform mat4 u_Mvp;\r
varying vec4 v_color;\r
\r
uniform vec2 u_SceneCenterMKT;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  // gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807\r
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r
    gl_Position = u_Mvp * (project_pos);\r
  } else {\r
     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
    gl_Position = project_common_position_to_clipspace(project_pos);\r
  }\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,ar=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Xr=function(a){(0,kr.Z)(n,a);var s=Mt(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.coverage,d=t.angle;return{u_opacity:o||1,u_coverage:u||.9,u_angle:d||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:Vt,fragmentShader:ar,triangulation:cs,primitive:Te.gl.TRIANGLES,depth:{enable:!1},stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=o.version==="GAODE2.x"?o.originCoordinates:o.coordinates;return[u[0],u[1],0]}}})}}]),n}(nu);function vn(a){var s=Sn();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Sn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Fn=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"


void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));


  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
 
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ECF\u7EAC\u5EA6
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807
    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));

    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);
  } else {
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
    
    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
    
    gl_Position = project_common_position_to_clipspace(project_pos);
  }



  setPickingColor(a_PickingColor);
}
`,Ci=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Hi=function(a){(0,kr.Z)(n,a);var s=vn(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.coverage,d=t.angle;return{u_opacity:o||1,u_coverage:u||1,u_angle:d||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:Fn,fragmentShader:Ci,triangulation:Ti,primitive:Te.gl.TRIANGLES,depth:{enable:!0},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size;return Array.isArray(u)?[u[0]]:[u]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=o.version==="GAODE2.x"?o.originCoordinates:o.coordinates;return[u[0],u[1],0]}}})}}]),n}(nu),ba=g(86700),mo=g(28660);function Qa(a,s){for(var n=[],r=[],t=[],o=a+1,u=s+1,d=a/2,S=s/2,z=0;z<u;z++)for(var de=z-S,be=0;be<o;be++){var it=be-d;r.push(it/d,-de/S,0),t.push(be/a),t.push(1-z/s)}for(var nt=0;nt<s;nt++)for(var Kt=0;Kt<a;Kt++){var tr=Kt+o*nt,Ir=Kt+o*(nt+1),jr=Kt+1+o*(nt+1),on=Kt+1+o*nt;n.push(tr,Ir,on),n.push(Ir,jr,on)}return{vertices:r,indices:n,uvs:t}}var ks,Ts;function lu(a){var s=Iu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _u=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,Mc=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;


vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9
	vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);
 
}
`,tu=`uniform sampler2D u_texture;        // \u70ED\u529B\u5F3A\u5EA6\u56FE
uniform sampler2D u_colorTexture;   // \u6839\u636E\u5F3A\u5EA6\u5206\u5E03\u7684\u8272\u5E26
uniform float u_opacity;
varying vec2 v_texCoord;

uniform vec2 u_ViewportSize;

float getBlurIndusty() {
    float vW = 2.0/u_ViewportSize.x;
    float vH = 2.0/u_ViewportSize.y;
    vec2 vUv = v_texCoord;
    float i11 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y + 1.0 * vH) ).r;
    float i12 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y + 1.0 * vH) ).r;
    float i13 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y + 1.0 * vH) ).r;

    float i21 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y) ).r;
    float i22 = texture2D( u_texture, vec2( vUv.x , vUv.y) ).r;
    float i23 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y) ).r;

    float i31 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y-1.0*vH) ).r;
    float i32 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y-1.0*vH) ).r;
    float i33 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y-1.0*vH) ).r;

    return(
        i11 + 
        i12 + 
        i13 + 
        i21 + 
        i21 + 
        i22 + 
        i23 + 
        i31 + 
        i32 + 
        i33
        )/9.0;
}


void main(){
    // float intensity = texture2D(u_texture, v_texCoord).r;
    float intensity = getBlurIndusty();
    vec4 color = texture2D(u_colorTexture, vec2(intensity, 0.0));

    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,Fl=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;

void main() {
  v_texCoord = a_Uv;

  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,Ys=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,Du=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
    } else {
        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
    }
}
`,Bu=(ks=(0,ba.b2)(),ks(Ts=function(a){(0,kr.Z)(n,a);var s=lu(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"render",value:function(){var t=this,o=this.rendererService,u=o.clear,d=o.useFramebuffer;d(this.heatmapFramerBuffer,function(){u({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.heatmapFramerBuffer}),t.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr;return fe().wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return d=this.rendererService,S=d.createFramebuffer,z=d.getViewportSize,de=d.createTexture2D,be=this.styleAttributeService.getLayerStyleAttribute("shape"),it=(be==null||(u=be.scale)===null||u===void 0?void 0:u.field)||"heatmap",this.shapeType=it,jr.next=6,this.buildHeatMapIntensity();case 6:return this.intensityModel=jr.sent,this.colorModel=it==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap(),nt=z(),Kt=nt.width,tr=nt.height,this.heatmapFramerBuffer=S({color:de({width:Math.floor(Kt/4),height:Math.floor(tr/4),wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE,min:Te.gl.LINEAR,mag:Te.gl.LINEAR}),depth:!1}),this.updateColorTexture(),jr.abrupt("return",[this.intensityModel,this.colorModel]);case 12:case"end":return jr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:Te.GC.Attribute,descriptor:{name:"a_Dir",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return[d]}}})}},{key:"buildHeatMapIntensity",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.triangulation=Cs,S.next=3,this.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:Du,fragmentShader:Ys,triangulation:Cs,depth:{enable:!1},cull:{enable:!0,face:(0,tt.fj)(this.mapService.version)},blend:{enable:!0,func:{srcRGB:Te.gl.ONE,srcAlpha:1,dstRGB:Te.gl.ONE,dstAlpha:1}}});case 3:return u=S.sent,S.abrupt("return",u);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildHeatmapColor",value:function(){var t=this.layer.getLayerConfig(),o=t.mask,u=o===void 0?!1:o,d=t.maskInside,S=d===void 0?!0:d;this.shaderModuleService.registerModule("heatmapColor",{vs:Fl,fs:tu});var z=this.shaderModuleService.getModule("heatmapColor"),de=z.vs,be=z.fs,it=z.uniforms,nt=this.rendererService,Kt=nt.createAttribute,tr=nt.createElements,Ir=nt.createBuffer,jr=nt.createModel;return jr({vs:de,fs:be,attributes:{a_Position:Kt({buffer:Ir({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:Te.gl.FLOAT}),size:3}),a_Uv:Kt({buffer:Ir({data:[0,1,1,1,0,0,1,0],type:Te.gl.FLOAT}),size:2})},uniforms:(0,ge.Z)({},it),depth:{enable:!1},blend:this.getBlend(),elements:tr({data:[0,2,1,2,3,1],type:Te.gl.UNSIGNED_INT,count:6}),stencil:(0,tt.Vi)(u,S)})}},{key:"drawIntensityMode",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity,d=o.intensity,S=d===void 0?10:d,z=o.radius,de=z===void 0?5:z;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),(t=this.intensityModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_radius:de,u_intensity:S}}),this.layer.hooks.afterRender.call()}},{key:"drawColorMode",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity;(t=this.colorModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity,d=Vo.create();Vo.invert(d,this.cameraService.getViewProjectionMatrixUncentered()),(t=this.colorModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:(0,le.Z)(d)}})}},{key:"build3dHeatMap",value:function(){var t=this.layer.getLayerConfig(),o=t.mask,u=o===void 0?!1:o,d=t.maskInside,S=d===void 0?!0:d,z=this.rendererService.getViewportSize,de=z(),be=de.width,it=de.height,nt=Qa(be/4,it/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:Mc,fs:_u});var Kt=this.shaderModuleService.getModule("heatmap3dColor"),tr=Kt.vs,Ir=Kt.fs,jr=Kt.uniforms,on=this.rendererService,tn=on.createAttribute,Yn=on.createElements,ci=on.createBuffer,Zi=on.createModel;return Zi({vs:tr,fs:Ir,attributes:{a_Position:tn({buffer:ci({data:nt.vertices,type:Te.gl.FLOAT}),size:3}),a_Uv:tn({buffer:ci({data:nt.uvs,type:Te.gl.FLOAT}),size:2})},primitive:Te.gl.TRIANGLES,uniforms:(0,ge.Z)({},jr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:Te.gl.SRC_ALPHA,srcAlpha:1,dstRGB:Te.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Yn({data:nt.indices,type:Te.gl.UNSIGNED_INT,count:nt.indices.length}),stencil:(0,tt.Vi)(u,S)})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var t=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var o=this.layer.getLayerConfig(),u=o.rampColors,d=(0,tt.Cl)(u);this.colorTexture=t({data:new Uint8Array(d.data),width:d.width,height:d.height,wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE,min:Te.gl.NEAREST,mag:Te.gl.NEAREST,flipY:!1})}}]),n}(nu))||Ts);function Gl(a){var s=ru();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ru(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var pl=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,ef=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
 
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));
    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));
    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Bh=function(a){(0,kr.Z)(n,a);var s=Gl(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.coverage,d=t.angle;return{u_opacity:o||1,u_coverage:u||.9,u_angle:d||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:ef,fragmentShader:pl,triangulation:cs,depth:{enable:!1},primitive:Te.gl.TRIANGLES,blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=o.version==="GAODE2.x"?o.originCoordinates:o.coordinates;return[u[0],u[1],0]}}})}}]),n}(nu),hc={heatmap:Bu,heatmap3d:Bu,grid:Xr,grid3d:Hi,hexagon:Bh},uh=hc;function Kf(a){var s=gh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function gh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yh=function(a){(0,kr.Z)(n,a);var s=Kf(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","HeatMapLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new uh[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"renderModels",value:function(){var t=this,o=this.getModelType();return o==="heatmap"?(this.layerModel&&this.layerModel.render(),this):this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(u){return u.draw({uniforms:t.layerModel.getUninforms()})}),this.hooks.afterRender.call(),this)}},{key:"updateModelData",value:function(t){t.attributes&&t.elements?this.models[0].updateAttributesAndElements(t.attributes,t.elements):console.warn("data error")}},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=this.getLayerConfig(),d=u.shape3d,S=this.getSource(),z=S.data.type,de=(o==null||(t=o.scale)===null||t===void 0?void 0:t.field)||"heatmap";return de==="heatmap"||de==="heatmap3d"?"heatmap":z==="hexagon"?(d==null?void 0:d.indexOf(de))===-1?"hexagon":"grid3d":z==="grid"?(d==null?void 0:d.indexOf(de))===-1?"grid":"grid3d":"heatmap"}}]),n}(eu);function Yf(a){var s=dc();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function dc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var oe=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,Fe=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Ze=function(a){(0,kr.Z)(n,a);var s=Yf(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity;return{u_opacity:o||1,u_texture:this.texture}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt,Kt,tr,Ir,jr;return fe().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(d=this.layer.getLayerConfig(),S=d.mask,z=S===void 0?!1:S,de=d.maskInside,be=de===void 0?!0:de,it=this.layer.getSource(),nt=this.rendererService.createTexture2D,this.texture=nt({height:0,width:0}),!tt.eW){tn.next=12;break}Kt=this.layerService.sceneService.getSceneConfig().canvas,tr=Kt.createImage(),tr.crossOrigin="anonymous",tr.src=it.data.originData,tr.onload=function(){u.texture=nt({data:tr,width:tr.width,height:tr.height}),u.layerService.reRender()},tn.next=16;break;case 12:return tn.next=14,it.data.images;case 14:Ir=tn.sent,this.texture=nt({data:Ir[0],width:Ir[0].width,height:Ir[0].height,mag:Te.gl.LINEAR,min:Te.gl.LINEAR});case 16:return tn.next=18,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Fe,fragmentShader:oe,triangulation:Qo,primitive:Te.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},stencil:(0,tt.Vi)(z,be)});case 18:return jr=tn.sent,tn.abrupt("return",[jr]);case 20:case"end":return tn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu),rt={image:Ze},xt=rt;function Dt(a){var s=$r();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function $r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var En=function(a){(0,kr.Z)(n,a);var s=Dt(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","ImageLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new xt[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={image:{}};return o[t]}},{key:"getModelType",value:function(){return"image"}}]),n}(eu);function pi(a){var s=rn();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function rn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _i=`
uniform float u_opacity;

varying vec4 v_dash_array;
varying vec4 v_color;

uniform float segmentNumber;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;

  float flag = 0.;
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    flag = 1.;
  };
  gl_FragColor.a *=flag;
  
  gl_FragColor = filterColor(gl_FragColor);
}`,ga=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;


uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);

  vec2 s = source;
  vec2 t = target;
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;

  styleMappingMat[3].b = segmentIndex / segmentNumber;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  gl_PointSize = 5.0;
  setPickingColor(a_PickingColor);
}
`,ss=`
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  
  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = styleMappingMat[3].g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = styleMappingMat[3].a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
}`,To=`#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  float arcThetaOffset = styleMappingMat[0][1];
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, arcThetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, arcThetaOffset), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
     styleMappingMat[3].g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Ro=`#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}`,fs=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,ps={solid:0,dash:1},zo=function(a){(0,kr.Z)(n,a);var s=pi(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.textureBlend,de=z===void 0?"normal":z,be=t.lineType,it=be===void 0?"solid":be,nt=t.dashArray,Kt=nt===void 0?[10,5]:nt,tr=t.forward,Ir=tr===void 0?!0:tr,jr=t.lineTexture,on=jr===void 0?!1:jr,tn=t.iconStep,Yn=tn===void 0?100:tn,ci=t.segmentNumber,Zi=ci===void 0?30:ci,zi=t.thetaOffset,pa=zi===void 0?.314:zi;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,thetaOffset:pa})){this.judgeStyleAttributes({opacity:u,thetaOffset:pa});var _o=this.layer.getEncodedData(),wo=this.calDataFrame(this.cellLength,_o,this.cellProperties),Ba=wo.data,ms=wo.width,au=wo.height;this.rowCount=au,this.dataTexture=this.cellLength>0&&Ba.length>0?this.createTexture2D({flipY:!0,data:Ba,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:ms,height:au}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}Kt.length===2&&Kt.push(0,0);var Al=0,nd=[0,0,0,0],Ih=[0,0,0,0];return d&&S&&(nd=(0,tt.CI)(d),Ih=(0,tt.CI)(S),Al=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:(0,ht.isNumber)(pa)?pa:0,u_opacity:(0,ht.isNumber)(u)?u:1,u_textureBlend:de==="normal"?0:1,segmentNumber:Zi,u_line_type:ps[it||"solid"],u_dash_array:Kt,u_blur:.9,u_lineDir:Ir?1:-1,u_texture:this.texture,u_line_texture:on?1:0,u_icon_step:Yn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Al,u_sourceColor:nd,u_targetColor:Ih}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor,d=t.lineType;return d==="dash"?{frag:_i,vert:ga,type:"Dash"}:o&&u?{frag:Ro,vert:fs,type:"Linear"}:{frag:ss,vert:To,type:""}}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr;return fe().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return u=this.layer.getLayerConfig(),d=u.segmentNumber,S=d===void 0?30:d,z=u.mask,de=z===void 0?!1:z,be=u.maskInside,it=be===void 0?!0:be,nt=this.getShaders(),Kt=nt.frag,tr=nt.vert,Ir=nt.type,tn.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+Ir,vertexShader:tr,fragmentShader:Kt,triangulation:$s,depth:{enable:!1},blend:this.getBlend(),segmentNumber:S,stencil:(0,tt.Vi)(de,it)});case 4:return jr=tn.sent,tn.abrupt("return",[jr]);case 6:case"end":return tn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,z=d[S]||{x:0,y:0},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu);function Ds(a){var s=xu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function xu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,tf=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,$c=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,ac=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,ll={solid:0,dash:1},wu=function(a){(0,kr.Z)(n,a);var s=Ds(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.textureBlend,de=z===void 0?"normal":z,be=t.lineType,it=be===void 0?"solid":be,nt=t.dashArray,Kt=nt===void 0?[10,5]:nt,tr=t.lineTexture,Ir=tr===void 0?!1:tr,jr=t.iconStep,on=jr===void 0?100:jr,tn=t.segmentNumber,Yn=tn===void 0?30:tn,ci=t.globalArcHeight,Zi=ci===void 0?10:ci;Kt.length===2&&Kt.push(0,0);var zi=0,pa=[0,0,0,0],_o=[0,0,0,0];if(d&&S&&(pa=(0,tt.CI)(d),_o=(0,tt.CI)(S),zi=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var wo=this.layer.getEncodedData(),Ba=this.calDataFrame(this.cellLength,wo,this.cellProperties),ms=Ba.data,au=Ba.width,Al=Ba.height;this.rowCount=Al,this.dataTexture=this.cellLength>0&&ms.length>0?this.createTexture2D({flipY:!0,data:ms,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:au,height:Al}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:du,u_global_height:Zi,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_textureBlend:de==="normal"?0:1,segmentNumber:Yn,u_line_type:ll[it]||0,u_dash_array:Kt,u_texture:this.texture,u_line_texture:Ir?1:0,u_icon_step:on,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:zi,u_sourceColor:pa,u_targetColor:_o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor;return o&&u?{frag:$c,vert:ac,type:"Linear"}:{frag:cu,vert:tf,type:""}}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr;return fe().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return u=this.layer.getLayerConfig(),d=u.segmentNumber,S=d===void 0?30:d,z=u.mask,de=z===void 0?!1:z,be=u.maskInside,it=be===void 0?!0:be,nt=this.getShaders(),Kt=nt.frag,tr=nt.vert,Ir=nt.type,tn.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+Ir,vertexShader:tr,fragmentShader:Kt,triangulation:$s,blend:this.getBlend(),segmentNumber:S,stencil:(0,tt.Vi)(de,it)});case 4:return jr=tn.sent,tn.abrupt("return",[jr]);case 6:case"end":return tn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,z=d[S]||{x:0,y:0},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu);function Sl(a){var s=Wl();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Pc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,jc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,hu=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,_h=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,Oc={solid:0,dash:1},ud=function(a){(0,kr.Z)(n,a);var s=Sl(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.textureBlend,de=z===void 0?"normal":z,be=t.lineType,it=be===void 0?"solid":be,nt=t.dashArray,Kt=nt===void 0?[10,5]:nt,tr=t.lineTexture,Ir=tr===void 0?!1:tr,jr=t.iconStep,on=jr===void 0?100:jr,tn=t.segmentNumber,Yn=tn===void 0?30:tn,ci=t.globalArcHeight,Zi=ci===void 0?10:ci;Kt.length===2&&Kt.push(0,0);var zi=0,pa=[0,0,0,0],_o=[0,0,0,0];if(d&&S&&(pa=(0,tt.CI)(d),_o=(0,tt.CI)(S),zi=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var wo=this.layer.getEncodedData(),Ba=this.calDataFrame(this.cellLength,wo,this.cellProperties),ms=Ba.data,au=Ba.width,Al=Ba.height;this.rowCount=Al,this.dataTexture=this.cellLength>0&&ms.length>0?this.createTexture2D({flipY:!0,data:ms,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:au,height:Al}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_globel:1,u_globel_radius:du,u_global_height:Zi,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_textureBlend:de==="normal"?0:1,segmentNumber:Yn,u_line_type:Oc[it]||0,u_dash_array:Kt,u_texture:this.texture,u_line_texture:Ir?1:0,u_icon_step:on,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:zi,u_sourceColor:pa,u_targetColor:_o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor;return o&&u?{frag:hu,vert:_h,type:"Linear"}:{frag:Pc,vert:jc,type:""}}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr;return fe().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return u=this.layer.getLayerConfig(),d=u.segmentNumber,S=d===void 0?30:d,z=u.mask,de=z===void 0?!1:z,be=u.maskInside,it=be===void 0?!0:be,nt=this.getShaders(),Kt=nt.frag,tr=nt.vert,Ir=nt.type,tn.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+Ir,vertexShader:tr,fragmentShader:Kt,triangulation:$s,depth:{enable:!0},blend:this.getBlend(),segmentNumber:S,stencil:(0,tt.Vi)(de,it)});case 4:return jr=tn.sent,tn.abrupt("return",[jr]);case 6:case"end":return tn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,z=d[S]||{x:0,y:0},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu);function Hd(a){var s=Zu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Sd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0;
  float d_segmentIndex = styleMappingMat[3].g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = gl_FragColor.a/opacity;
    }

    float v = styleMappingMat[3].a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,Hc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  styleMappingMat[3].g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}

`,Nh={solid:0,dash:1},up=function(a){(0,kr.Z)(n,a);var s=Hd(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.textureBlend,de=z===void 0?"normal":z,be=t.lineType,it=be===void 0?"solid":be,nt=t.dashArray,Kt=nt===void 0?[10,5]:nt,tr=t.lineTexture,Ir=tr===void 0?!1:tr,jr=t.iconStep,on=jr===void 0?100:jr,tn=t.segmentNumber,Yn=tn===void 0?30:tn;Kt.length===2&&Kt.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var ci=0,Zi=[0,0,0,0],zi=[0,0,0,0];if(d&&S&&(Zi=(0,tt.CI)(d),zi=(0,tt.CI)(S),ci=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var pa=this.layer.getEncodedData(),_o=this.calDataFrame(this.cellLength,pa,this.cellProperties),wo=_o.data,Ba=_o.width,ms=_o.height;this.rowCount=ms,this.dataTexture=this.cellLength>0&&wo.length>0?this.createTexture2D({flipY:!0,data:wo,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Ba,height:ms}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_textureBlend:de==="normal"?0:1,segmentNumber:Yn,u_line_type:Nh[it]||0,u_dash_array:Kt,u_texture:this.texture,u_line_texture:Ir?1:0,u_icon_step:on,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:ci,u_sourceColor:Zi,u_targetColor:zi}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:Hc,fragmentShader:Sd,triangulation:$s,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Te.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,z=d[S]||{x:0,y:0},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu);function _d(a){var s=pp();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function pp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var vp=`#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
uniform float u_CoordinateSystem;
varying vec4 v_color;
uniform float u_arrow: 0.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

varying mat4 styleMappingMat;
void main() {
  float distanceAndIndex = styleMappingMat[0][3];
  float miter = styleMappingMat[0][2];

  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B


  if(u_arrow > 0.0 && distanceAndIndex < 2.0) { // arrow
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) { 
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z < 0.0) { // amap
        discard;
      }
    } else { // amap2 mapbox map
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z > 0.0) { 
        discard;
      }
    }
  } else { // line body
    if(miter < 0.0) {
      discard;
    }
  }


  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,mp=`attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute vec4 a_dirPoints;
attribute vec3 a_DistanceAndIndex;

uniform vec4 u_lineDir;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - a_Miter - a_DistanceAndIndex
    0.0, 0.0, 0.0, 0.0, // originX - originY - vectorX - vectorY
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );
  styleMappingMat[0][3] = a_DistanceAndIndex.y;
  styleMappingMat[0][2] = a_Miter;

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97


  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  // styleMappingMat[1].rg = a_Position.xy + offset;

  vec2 copyOffset = vec2(offset.x, offset.y);

  float lineDistance = a_DistanceAndIndex.x;
  float total_Distance = a_DistanceAndIndex.z;
  float currentLinePointRatio = lineDistance / total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z); // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }
  
  if(u_arrow > 0.0 && a_DistanceAndIndex.y < 2.0) {
    vec2 startPoint = a_dirPoints.rg;
    vec2 endPoint = a_dirPoints.ba;
    vec4 t1 = project_position(vec4(startPoint, 0, 1.0));
    vec4 t2 = project_position(vec4(endPoint, 0, 1.0));
    // TODO\uFF1A \u540E\u7EED\u4F18\u5316\u53EF\u4EE5\u628A\u4F4D\u7F6E\u8BA1\u7B97\u653E\u5728 cpu \u4E2D\u5B8C\u6210
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      vec2 p1 = (u_Mvp * vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = (u_Mvp * vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    } else {
      vec2 p1 = project_common_position_to_clipspace(vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = project_common_position_to_clipspace(vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    }
  }

  setPickingColor(a_PickingColor);
}
`,wd=function(a){(0,kr.Z)(n,a);var s=_d(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.arrow,de=z===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:z,be=0,it=[0,0,0,0],nt=[0,0,0,0];if(d&&S&&(it=(0,tt.CI)(d),nt=(0,tt.CI)(S),be=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Kt=this.layer.getEncodedData(),tr=this.calDataFrame(this.cellLength,Kt,this.cellProperties),Ir=tr.data,jr=tr.width,on=tr.height;this.rowCount=on,this.dataTexture=this.cellLength>0&&Ir.length>0?this.createTexture2D({flipY:!0,data:Ir,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:jr,height:on}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_linearColor:be,u_sourceColor:it,u_targetColor:nt,u_arrow:Number(de.enable),u_arrowHeight:de.arrowHeight||3,u_arrowWidth:de.arrowWidth||2,u_tailWidth:de.tailWidth===void 0?1:de.tailWidth}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir;return fe().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.depth,it=be===void 0?!1:be,nt=this.getShaders(),Kt=nt.frag,tr=nt.vert,this.layer.triangulation=ra,on.next=5,this.layer.buildLayerModel({moduleName:"lineHalf",vertexShader:tr,fragmentShader:Kt,triangulation:ra,depth:{enable:it},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 5:return Ir=on.sent,on.abrupt("return",[Ir]);case 7:case"end":return on.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){return{frag:vp,vert:mp,type:"normal"}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Te.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z,de){return de===void 0?[d[3],10,d[5]]:[d[3],de,d[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"dirPoints",type:Te.GC.Attribute,descriptor:{name:"a_dirPoints",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:4,update:function(o){var u=o.coordinates[0]||[0,0],d=o.coordinates[3]||[0,0];return[u[0],u[1],d[0],d[1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0],d[1]]:[d,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o,u,d){return[d[4]]}}})}}]),n}(nu);function ld(a){var s=gp();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function gp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ah=`#define LineTypeSolid 0.0
uniform float u_opacity : 1.0;

varying vec4 v_color;

// dash
varying vec4 v_dash_array;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
 
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    // \u5B9E\u7EBF\u90E8\u5206
  } else {
    // \u865A\u7EBF\u90E8\u5206
    discard;
  };

  gl_FragColor = filterColor(gl_FragColor);
}
`,kd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];

uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = a_DistanceAndIndex.x / a_Total_Distance; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = a_DistanceAndIndex.x;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));
  } else {
    float lineHeight = a_Size.y;
 
    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,xd=`#define Animate 0.0
#define LineTexture 1.0
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;

uniform vec3 u_blur;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying vec2 v_iconMapUV;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = styleMappingMat[3].a;
  float borderWidth = min(0.5, u_borderWidth);
  // \u7ED8\u5236 border
  if(borderWidth > 0.01) {
    float borderOuterWidth = borderWidth/2.0;

    if(v >= 1.0 - borderWidth || v <= borderWidth) {
      if(v > borderWidth) {
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
      } else if(v <= borderWidth) {
        float linear = smoothstep(0.0, 1.0, v/borderWidth);
        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = styleMappingMat[3][3];
  if(blurV < 0.5) {
    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  gl_FragColor = filterColor(gl_FragColor);
}
`,Cd=`
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,vl=`varying vec4 v_color;
uniform float u_linearDir: 1.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"


varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3][0]; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,Dd={solid:0,dash:1},Fs=function(a){(0,kr.Z)(n,a);var s=ld(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"textureEventFlag",!1),(0,bt.Z)((0,or.Z)(r),"texture",r.createTexture2D({data:[0,0,0,0],mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1,height:1})),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.textureBlend,de=z===void 0?"normal":z,be=t.lineType,it=be===void 0?"solid":be,nt=t.dashArray,Kt=nt===void 0?[10,5,0,0]:nt,tr=t.lineTexture,Ir=tr===void 0?!1:tr,jr=t.iconStep,on=jr===void 0?100:jr,tn=t.vertexHeightScale,Yn=tn===void 0?20:tn,ci=t.borderWidth,Zi=ci===void 0?0:ci,zi=t.borderColor,pa=zi===void 0?"#ccc":zi,_o=t.raisingHeight,wo=_o===void 0?0:_o,Ba=t.heightfixed,ms=Ba===void 0?!1:Ba,au=t.linearDir,Al=au===void 0?xl.VERTICAL:au,nd=t.blur,Ih=nd===void 0?[1,1,1]:nd,Rh=t.arrow,md=Rh===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:Rh;Kt.length===2&&Kt.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var hh=0,tp=[0,0,0,0],Fv=[0,0,0,0];if(d&&S&&(tp=(0,tt.CI)(d),Fv=(0,tt.CI)(S),hh=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Gp=this.layer.getEncodedData(),D0=this.calDataFrame(this.cellLength,Gp,this.cellProperties),Dp=D0.data,Zh=D0.width,Ld=D0.height;this.rowCount=Ld,this.dataTexture=this.cellLength>0&&Dp.length>0?this.createTexture2D({flipY:!0,data:Dp,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Zh,height:Ld}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_textureBlend:de===mu.NORMAL?0:1,u_line_type:Dd[it],u_dash_array:Kt,u_blur:Ih,u_texture:this.texture,u_line_texture:Ir?1:0,u_icon_step:on,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:Zi,u_borderColor:(0,tt.CI)(pa),u_linearDir:Al===xl.VERTICAL?1:0,u_linearColor:hh,u_sourceColor:tp,u_targetColor:Fv,u_heightfixed:Number(ms),u_vertexScale:Yn,u_raisingHeight:Number(wo),u_arrow:Number(md.enable),u_arrowHeight:md.arrowHeight||3,u_arrowWidth:md.arrowWidth||2,u_tailWidth:md.tailWidth===void 0?1:md.tailWidth}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn;return fe().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.depth,it=be===void 0?!1:be,nt=u.workerEnabled,Kt=nt===void 0?!1:nt,tr=u.enablePicking,Ir=this.getShaders(),jr=Ir.frag,on=Ir.vert,tn=Ir.type,this.layer.triangulation=tt.sN,Zi.next=5,this.layer.buildLayerModel({moduleName:"line"+tn,vertexShader:on,fragmentShader:jr,triangulation:tt.sN,depth:{enable:it},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de),workerEnabled:Kt,workerOptions:{modelType:"line"+tn,enablePicking:tr,iconMap:this.iconService.getIconMap()}});case 5:return Yn=Zi.sent,Zi.abrupt("return",[Yn]);case 7:case"end":return Zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor,d=t.lineType;return d==="dash"?{frag:Ah,vert:kd,type:"Dash"}:o&&u?{frag:vl,vert:Cd,type:"Linear"}:{frag:xd,vert:Cd,type:""}}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Te.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u,d,S,z,de,be){return be===void 0?[S[3],10]:[S[3],be]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u,d,S){return[S[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0],S[1]]:[S,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(u,d,S,z,de){return de}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u,d,S){return[S[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,z=d[S]||{x:0,y:0},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu);function cd(a){var s=Vd();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Vd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Gd=`uniform float u_opacity : 1.0;
uniform sampler2D u_texture;
uniform float u_linearDir: 1.0;

#pragma include "picking"

varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  gl_FragColor = texture2D(u_texture, vec2(linearRadio, 0.5));

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ht=`
attribute float a_Miter;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

uniform float u_opacity: 1.0;

#pragma include "projection"
#pragma include "picking"

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Zr=function(a){(0,kr.Z)(n,a);var s=cd(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;r.colorTexture&&r.colorTexture.destroy();var S=r.layer.getLayerConfig(),z=S.rampColors,de=(0,tt.Cl)(z);r.colorTexture=d({data:new Uint8Array(de.data),width:de.width,height:de.height,wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE,min:Te.gl.NEAREST,mag:Te.gl.NEAREST,flipY:!1})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.vertexHeightScale,S=d===void 0?20:d,z=t.raisingHeight,de=z===void 0?0:z,be=t.heightfixed,it=be===void 0?!1:be,nt=t.linearDir,Kt=nt===void 0?xl.VERTICAL:nt;if(this.rendererService.getDirty()&&this.colorTexture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var tr=this.layer.getEncodedData(),Ir=this.calDataFrame(this.cellLength,tr,this.cellProperties),jr=Ir.data,on=Ir.width,tn=Ir.height;this.rowCount=tn,this.dataTexture=this.cellLength>0&&jr.length>0?this.createTexture2D({flipY:!0,data:jr,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:on,height:tn}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_linearDir:Kt===xl.VERTICAL?1:0,u_opacity:(0,ht.isNumber)(u)?u:1,u_texture:this.colorTexture,u_heightfixed:Number(it),u_vertexScale:S,u_raisingHeight:Number(de)}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.colorTexture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy()}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.depth,it=be===void 0?!1:be,this.layer.triangulation=ra,tr.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:Ht,fragmentShader:Gd,triangulation:ra,depth:{enable:it},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 4:return nt=tr.sent,tr.abrupt("return",[nt]);case 6:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Te.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d,S,z,de){return de===void 0?[d[3],10]:[d[3],de]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o,u,d){return[d[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0],d[1]]:[d,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o,u,d){return[d[4]]}}})}}]),n}(nu);function On(a){var s=wi();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function wi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ia=`
varying vec4 v_color;
varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,Ai=`uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];

  // styleMappingMat[3][0] \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = mix(u_sourceColor, u_targetColor, styleMappingMat[3][0]);
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,ji=`attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Position;

attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_vertexScale: 1.0;

#pragma include "projection"

varying vec4 v_color;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  v_color = a_Color; 
  styleMappingMat[3][0] = a_Distance / a_Total_Distance;

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,Ea=function(a){(0,kr.Z)(n,a);var s=On(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.vertexHeightScale,de=z===void 0?20:z,be=0,it=[0,0,0,0],nt=[0,0,0,0];if(d&&S&&(it=(0,tt.CI)(d),nt=(0,tt.CI)(S),be=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Kt=this.layer.getEncodedData(),tr=this.calDataFrame(this.cellLength,Kt,this.cellProperties),Ir=tr.data,jr=tr.width,on=tr.height;this.rowCount=on,this.dataTexture=this.cellLength>0&&Ir.length>0?this.createTexture2D({flipY:!0,data:Ir,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:jr,height:on}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_linearColor:be,u_sourceColor:it,u_targetColor:nt,u_vertexScale:de}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor;return o&&u?{frag:Ai,vert:ji,type:"lineSimpleLinear"}:{frag:ia,vert:ji,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr;return fe().wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=this.getShaders(),it=be.frag,nt=be.vert,Kt=be.type,jr.next=4,this.layer.buildLayerModel({moduleName:Kt,vertexShader:nt,fragmentShader:it,triangulation:Da,primitive:Te.gl.LINES,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de),pick:!1});case 4:return tr=jr.sent,jr.abrupt("return",[tr]);case 6:case"end":return jr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:Te.GC.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o,u,d){return[d[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o,u,d){return[d[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0],d[1]]:[d,0]}}})}}]),n}(nu);function Ma(a){var s=Ia();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ia(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Za=`#define Animate 0.0
#define LineTexture 1.0

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;
uniform float u_iconStepCount;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying vec2 v_iconMapUV;
varying float v_blur;
varying float v_radio;
varying vec4 v_color;
varying vec4 v_dataset;

#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ha=`#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;
attribute vec2 a_iconMapUV;
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;
uniform float u_heightfixed;
uniform float u_linearColor: 0;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;
varying vec4 v_color;
varying float v_blur;
varying float v_radio;
varying vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    originSize = project_float_pixel(a_Size.x);
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,$a=function(a){(0,kr.Z)(n,a);var s=Ma(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.NEAREST,min:Te.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,z=t.textureBlend,de=z===void 0?"normal":z,be=t.heightfixed,it=be===void 0?!1:be,nt=t.lineTexture,Kt=nt===void 0?!1:nt,tr=t.iconStep,Ir=tr===void 0?100:tr,jr=t.iconStepCount,on=jr===void 0?1:jr;this.rendererService.getDirty()&&this.texture.bind();var tn=0,Yn=[0,0,0,0],ci=[0,0,0,0];return d&&S&&(Yn=(0,tt.CI)(d),ci=(0,tt.CI)(S),tn=1),{u_heightfixed:Number(it),u_opacity:(0,ht.isNumber)(u)?u:1,u_textureBlend:de==="normal"?0:1,u_texture:this.texture,u_line_texture:Kt?1:0,u_iconStepCount:on,u_icon_step:Ir,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:tn,u_sourceColor:Yn,u_targetColor:ci}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Ha,fragmentShader:Za,triangulation:ra,depth:{enable:!1},blend:this.getBlend()});case 2:return u=S.sent,S.abrupt("return",[u]);case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:Te.GC.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u,d,S){return[S[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Te.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u,d,S){return[S[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0],S[1]]:[S,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(u,d,S,z,de){return de}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Te.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u,d,S){return[S[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,z=d[S]||{x:0,y:0},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu),ya={arc:zo,arc3d:wu,greatcircle:up,wall:$a,line:Fs,halfLine:wd,simple:Ea,linearline:Zr,earthArc3d:ud},Ua=ya;function si(a){var s=Ni();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ni(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ra=function(a){(0,kr.Z)(n,a);var s=si(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","LineLayer"),(0,bt.Z)((0,or.Z)(r),"arrowInsertCount",0),(0,bt.Z)((0,or.Z)(r),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new Ua[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},halfLine:{},earthArc3d:{}};return o[t]}},{key:"getModelType",value:function(){var t;if(this.layerType)return this.layerType;var o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(t=o.scale)===null||t===void 0?void 0:t.field;return u||"line"}},{key:"processData",value:function(t){if(this.getModelType()!=="simple")return t;var o=[];return t.map(function(u){if(Array.isArray(u.coordinates)&&Array.isArray(u.coordinates[0])&&Array.isArray(u.coordinates[0][0])){var d=(0,ge.Z)({},u);u.coordinates.map(function(S){o.push((0,ge.Z)((0,ge.Z)({},d),{},{coordinates:S}))})}else o.push(u)}),o}}]),n}(eu);function Ya(a){var s=_a();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function _a(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ga=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,xo=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,xs=function(a){(0,kr.Z)(n,a);var s=Ya(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"raiseCount",0),(0,bt.Z)((0,or.Z)(r),"raiseRepeat",0),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1,speed:.01,repeat:!1}:o,d=t.opacity,S=d===void 0?1:d,z=t.sourceColor,de=t.targetColor,be=t.pickLight,it=be===void 0?!1:be,nt=t.heightfixed,Kt=nt===void 0?!1:nt,tr=t.opacityLinear,Ir=tr===void 0?{enable:!1,dir:"up"}:tr,jr=t.lightEnable,on=jr===void 0?!0:jr;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:S})){this.judgeStyleAttributes({opacity:S});var tn=this.layer.getEncodedData(),Yn=this.calDataFrame(this.cellLength,tn,this.cellProperties),ci=Yn.data,Zi=Yn.width,zi=Yn.height;this.rowCount=zi,this.dataTexture=this.cellLength>0&&ci.length>0?this.createTexture2D({flipY:!0,data:ci,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Zi,height:zi}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}var pa=0,_o=[0,0,0,0],wo=[0,0,0,0];if(z&&de&&(_o=(0,tt.CI)(z),wo=(0,tt.CI)(de),pa=1),this.raiseCount<1&&this.raiseRepeat>0&&u.enable){var Ba=u.speed,ms=Ba===void 0?.01:Ba;this.raiseCount+=ms,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(it),u_heightfixed:Number(Kt),u_r:u.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(S)?S:1,u_linearColor:pa,u_sourceColor:_o,u_targetColor:wo,u_opacitylinear:Number(Ir.enable),u_opacitylinear_dir:Ir.dir==="up"?1:0,u_lightEnable:Number(on)}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return u=this.layer.getLayerConfig(),d=u.animateOption.repeat,S=d===void 0?1:d,this.raiseRepeat=S,be.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:xo,fragmentShader:Ga,triangulation:Ti,depth:{enable:!0},cull:{enable:!0,face:(0,tt.fj)(this.mapService.version)},blend:this.getBlend()});case 4:return z=be.sent,be.abrupt("return",[z]);case 6:case"end":return be.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=o.size;if(u){var d=[];return Array.isArray(u)&&(d=u.length===2?[u[0],u[0],u[1]]:u),Array.isArray(u)||(d=[u,u,u]),d}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=(0,tt.SI)(o.coordinates);return df([u[0],u[1]])}}})}}]),n}(nu);function Qi(a){var s=oa();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Zo=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,fo=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);

  setPickingColor(a_PickingColor);
}
`,Pa=function(a){(0,kr.Z)(n,a);var s=Qi(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.strokeOpacity,S=d===void 0?1:d,z=t.strokeWidth,de=z===void 0?0:z,be=t.stroke,it=be===void 0?"rgba(0,0,0,0)":be,nt=t.offsets,Kt=nt===void 0?[0,0]:nt,tr=t.blend,Ir=t.blur,jr=Ir===void 0?0:Ir;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeOpacity:S,strokeWidth:de,stroke:it,offsets:Kt})){this.judgeStyleAttributes({opacity:u,strokeOpacity:S,strokeWidth:de,stroke:it,offsets:Kt});var on=this.layer.getEncodedData(),tn=this.calDataFrame(this.cellLength,on,this.cellProperties),Yn=tn.data,ci=tn.width,Zi=tn.height;this.rowCount=Zi,this.dataTexture=this.cellLength>0&&Yn.length>0?this.createTexture2D({flipY:!0,data:Yn,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:ci,height:Zi}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_blur:jr,u_additive:tr==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_stroke_opacity:(0,ht.isNumber)(S)?S:1,u_stroke_width:(0,ht.isNumber)(de)?de:1,u_stroke_color:this.getStrokeColor(it),u_offsets:this.isOffsetStatic(Kt)?Kt:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.triangulation=Di,S.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:fo,fragmentShader:Zo,triangulation:Di,depth:{enable:!0},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(u,d,S,z){var de=(0,xi.Z)(S,3),be=de[0],it=de[1],nt=de[2],Kt=qo.fromValues(0,0,1),tr=qo.fromValues(be,0,nt),Ir=be>=0?qo.angle(Kt,tr):Math.PI*2-qo.angle(Kt,tr),jr=Math.PI*2-Math.asin(it/100),on=Vo.create();Vo.rotateY(on,on,Ir),Vo.rotateX(on,on,jr);var tn=qo.fromValues(1,1,0);qo.transformMat4(tn,tn,on),qo.normalize(tn,tn);var Yn=qo.fromValues(-1,1,0);qo.transformMat4(Yn,Yn,on),qo.normalize(Yn,Yn);var ci=qo.fromValues(-1,-1,0);qo.transformMat4(ci,ci,on),qo.normalize(ci,ci);var Zi=qo.fromValues(1,-1,0);qo.transformMat4(Zi,Zi,on),qo.normalize(Zi,Zi);var zi=[].concat((0,le.Z)(tn),(0,le.Z)(Yn),(0,le.Z)(ci),(0,le.Z)(Zi)),pa=z%4*3;return[zi[pa],zi[pa+1],zi[pa+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Te.GC.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.shape,S=d===void 0?2:d,z=t.layer.getLayerConfig().shape2d,de=z.indexOf(S);return[de]}}})}}]),n}(nu);function to(a){var s=Oa();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Os=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Bs=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }

  setPickingColor(a_PickingColor);
}
`,so=function(a){(0,kr.Z)(n,a);var s=to(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"raiseCount",0),(0,bt.Z)((0,or.Z)(r),"raiseRepeat",0),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1,speed:.01,repeat:!1}:o,d=t.opacity,S=d===void 0?1:d,z=t.sourceColor,de=t.targetColor,be=t.pickLight,it=be===void 0?!1:be,nt=t.heightfixed,Kt=nt===void 0?!1:nt,tr=t.opacityLinear,Ir=tr===void 0?{enable:!1,dir:"up"}:tr,jr=t.lightEnable,on=jr===void 0?!0:jr;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:S})){this.judgeStyleAttributes({opacity:S});var tn=this.layer.getEncodedData(),Yn=this.calDataFrame(this.cellLength,tn,this.cellProperties),ci=Yn.data,Zi=Yn.width,zi=Yn.height;this.rowCount=zi,this.dataTexture=this.cellLength>0&&ci.length>0?this.createTexture2D({flipY:!0,data:ci,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Zi,height:zi}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}var pa=0,_o=[0,0,0,0],wo=[0,0,0,0];if(z&&de&&(_o=(0,tt.CI)(z),wo=(0,tt.CI)(de),pa=1),this.raiseCount<1&&this.raiseRepeat>0&&u.enable){var Ba=u.speed,ms=Ba===void 0?.01:Ba;this.raiseCount+=ms,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(it),u_heightfixed:Number(Kt),u_r:u.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(S)?S:1,u_linearColor:pa,u_sourceColor:_o,u_targetColor:wo,u_opacitylinear:Number(Ir.enable),u_opacitylinear_dir:Ir.dir==="up"?1:0,u_lightEnable:Number(on)}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.depth,S=d===void 0?!0:d,z=u.animateOption.repeat,de=z===void 0?1:z,this.raiseRepeat=de,nt.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:Bs,fragmentShader:Os,triangulation:Ti,blend:this.getBlend(),cull:{enable:!0,face:(0,tt.fj)(this.mapService.version)},depth:{enable:S}});case 4:return be=nt.sent,nt.abrupt("return",[be]);case 6:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=o.size;if(u){var d=[];return Array.isArray(u)&&(d=u.length===2?[u[0],u[0],u[1]]:u),Array.isArray(u)||(d=[u,u,u]),d}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Te.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o){var u=(0,tt.SI)(o.coordinates);return[u[0],u[1],0]}}})}}]),n}(nu);function yo(a){var s=hs();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function hs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zs=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

 gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  
  // \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Cu=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Gu=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform int u_Size_Unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;
if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_raisingHeight;

  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }
 

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position =  u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Bl=function(a){(0,kr.Z)(n,a);var s=yo(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.strokeOpacity,S=d===void 0?1:d,z=t.strokeWidth,de=z===void 0?0:z,be=t.stroke,it=be===void 0?"rgba(0,0,0,0)":be,nt=t.offsets,Kt=nt===void 0?[0,0]:nt,tr=t.blend,Ir=t.blur,jr=Ir===void 0?0:Ir,on=t.raisingHeight,tn=on===void 0?0:on,Yn=t.heightfixed,ci=Yn===void 0?!1:Yn,Zi=t.unit,zi=Zi===void 0?"pixel":Zi;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeOpacity:S,strokeWidth:de,stroke:it,offsets:Kt})){this.judgeStyleAttributes({opacity:u,strokeOpacity:S,strokeWidth:de,stroke:it,offsets:Kt});var pa=this.layer.getEncodedData(),_o=this.calDataFrame(this.cellLength,pa,this.cellProperties),wo=_o.data,Ba=_o.width,ms=_o.height;this.rowCount=ms,this.dataTexture=this.cellLength>0&&wo.length>0?this.createTexture2D({flipY:!0,data:wo,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Ba,height:ms}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(tn),u_heightfixed:Number(ci),u_blur:jr,u_additive:tr==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_stroke_opacity:(0,ht.isNumber)(S)?S:1,u_stroke_width:(0,ht.isNumber)(de)?de:1,u_stroke_color:this.getStrokeColor(it),u_Size_Unit:Ku[zi],u_offsets:this.isOffsetStatic(Kt)?Kt:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),tt.oX)}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn,ci;return fe().wrap(function(zi){for(;;)switch(zi.prev=zi.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.animateOption,it=be===void 0?{enable:!1}:be,nt=u.workerEnabled,Kt=nt===void 0?!1:nt,tr=u.enablePicking,Ir=u.shape2d,jr=this.getShaders(it),on=jr.frag,tn=jr.vert,Yn=jr.type,this.layer.triangulation=tt.oX,zi.next=5,this.layer.buildLayerModel({moduleName:Yn,vertexShader:tn,fragmentShader:on,triangulation:tt.oX,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de),workerEnabled:Kt,workerOptions:{modelType:Yn,enablePicking:tr,shape2d:Ir}});case 5:return ci=zi.sent,zi.abrupt("return",[ci]);case 7:case"end":return zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(t){if(t.enable)switch(t.type){case"wave":return{frag:zs,vert:Gu,type:"pointWave"};default:return{frag:zs,vert:Gu,type:"pointWave"}}else return{frag:Cu,vert:Gu,type:"pointFill"}}},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(u,d,S,z){var de=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],be=z%4*3;return[de[be],de[be+1],de[be+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Te.GC.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.shape,S=d===void 0?2:d,z=t.indexOf(S);return[z]}}})}}]),n}(nu);function Au(a){var s=Sf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Sf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Xl=`uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;

void main() {

  float opacity = styleMappingMat[0][0];

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ic=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;
attribute float a_Rotate;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform mat2 u_RotateMatrix;
uniform int u_Size_Unit;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;
uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;

  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float newSize = a_Size;
  if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (newSize) + textrueOffsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp *vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,wl=function(a){(0,kr.Z)(n,a);var s=Au(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"meter2coord",1),(0,bt.Z)((0,or.Z)(r),"isMeter",!1),(0,bt.Z)((0,or.Z)(r),"radian",0),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layerService.throttleRenderLayers();return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.LINEAR,min:Te.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.offsets,S=d===void 0?[0,0]:d,z=t.rotation,de=t.raisingHeight,be=de===void 0?0:de,it=t.heightfixed,nt=it===void 0?!1:it,Kt=t.unit,tr=Kt===void 0?"pixel":Kt;this.rendererService.getDirty()&&this.texture.bind();var Ir=1;if((this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(Ir=-1),this.radian=z!==void 0?Ir*Math.PI*z/180:Ir*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:S})){this.judgeStyleAttributes({opacity:u,offsets:S});var jr=this.layer.getEncodedData(),on=this.calDataFrame(this.cellLength,jr,this.cellProperties),tn=on.data,Yn=on.width,ci=on.height;this.rowCount=ci,this.dataTexture=this.cellLength>0&&tn.length>0?this.createTexture2D({flipY:!0,data:tn,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Yn,height:ci}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(be),u_heightfixed:Number(nt),u_Size_Unit:Ku[tr],u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,ht.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(S)?S:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),di)}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:Ic,fragmentShader:Xl,triangulation:di,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de),cull:{enable:!0,face:(0,tt.fj)(this.mapService.version)}});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;this.iconService.off("imageUpdate",this.updateTexture),(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:Te.GC.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.rotate,S=d===void 0?0:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.shape,z=d[S]||{x:-64,y:-64},de=z.x,be=z.y;return[de,be]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(u,d,S,z){var de=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],be=z%4*3;return[de[be],de[be+1],de[be+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}})}}]),n}(nu);function rf(a){var s=mf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function mf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var lh=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,pc=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(textrueOffsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,fu=function(a){(0,kr.Z)(n,a);var s=rf(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){r.layerService.throttleRenderLayers()});return}r.texture=d({data:r.iconService.getCanvas(),mag:Te.gl.LINEAR,min:Te.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.offsets,S=d===void 0?[0,0]:d,z=t.raisingHeight,de=z===void 0?0:z,be=t.heightfixed,it=be===void 0?!1:be;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:S})){this.judgeStyleAttributes({opacity:u,offsets:S});var nt=this.layer.getEncodedData(),Kt=this.calDataFrame(this.cellLength,nt,this.cellProperties),tr=Kt.data,Ir=Kt.width,jr=Kt.height;this.rowCount=jr,this.dataTexture=this.cellLength>0&&tr.length>0?this.createTexture2D({flipY:!0,data:tr,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Ir,height:jr}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(de),u_heightfixed:Number(it),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,ht.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(S)?S:[0,0]}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:pc,fragmentShader:lh,triangulation:Fi,depth:{enable:!1},primitive:Te.gl.POINTS,blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.shape,z=d[S]||{x:-64,y:-64},de=z.x,be=z.y;return[de,be]}}})}}]),n}(nu);function wf(a){var s=Uu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var qf=`uniform float u_opacity : 1;
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;
}
`,js=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;

varying vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = a_Color;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
}
`;function Pu(a){var s=a.coordinates;return{vertices:(0,le.Z)(s),indices:[0],size:s.length}}var Ru=function(a){(0,kr.Z)(n,a);var s=wf(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o;return{u_opacity:(0,ht.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,this.layer.triangulation=Pu,nt.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:js,fragmentShader:qf,triangulation:Pu,depth:{enable:!1},primitive:Te.gl.POINTS,blend:this.getBlend(),stencil:(0,tt.Vi)(S,de),pick:!1});case 4:return be=nt.sent,nt.abrupt("return",[be]);case 6:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}})}}]),n}(nu);function nf(a){var s=pd();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function pd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var w=`
uniform float u_additive;
uniform float u_opacity: 1.0;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;
#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  v_exteude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  // full circle
  // float rades = dot(dir, baseDir);
  // float flag = sign(dir.y);
  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;
  
  // half circle
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,V=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
uniform float u_speed: 1.0;
uniform float u_time;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform int u_Size_Unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_exteude = rotateMatrix * a_Extrude.xy;

  // unpack color(vec2)
  v_color = a_Color;



  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = (extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
  offset = project_pixel(offset);
  
  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp *vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Ie=function(a){(0,kr.Z)(n,a);var s=nf(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.blend,S=t.speed,z=S===void 0?1:S,de=t.unit,be=de===void 0?"pixel":de;return{u_Size_Unit:Ku[be],u_speed:z,u_additive:d==="additive"?1:0,u_opacity:(0,ht.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),di)}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:V,fragmentShader:w,triangulation:di,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Te.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S){var z=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],de=S%4*3;return[z[de],z[de+1],z[de+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?5:u;return Array.isArray(d)?[d[0]]:[d]}}})}}]),n}(nu);function se(a){var s=st();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function st(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ue=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,Xe=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  vec2 offset = project_pixel(textrueOffsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function Ve(a){var s=a.coordinates;return{vertices:(0,le.Z)(s),indices:[0],size:s.length}}var ct=function(a){(0,kr.Z)(n,a);var s=se(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.offsets,S=d===void 0?[0,0]:d,z=t.blend,de=t.strokeOpacity,be=de===void 0?1:de,it=t.strokeWidth,nt=it===void 0?0:it,Kt=t.stroke,tr=Kt===void 0?"#fff":Kt;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:S})){this.judgeStyleAttributes({opacity:u,offsets:S});var Ir=this.layer.getEncodedData(),jr=this.calDataFrame(this.cellLength,Ir,this.cellProperties),on=jr.data,tn=jr.width,Yn=jr.height;this.rowCount=Yn,this.dataTexture=this.cellLength>0&&on.length>0?this.createTexture2D({flipY:!0,data:on,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:tn,height:Yn}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_additive:z==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,ht.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(S)?S:[0,0],u_stroke_opacity:(0,ht.isNumber)(be)?be:1,u_stroke_width:(0,ht.isNumber)(nt)?nt:1,u_stroke_color:this.getStrokeColor(tr)}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,this.layer.triangulation=Ve,nt.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:Xe,fragmentShader:Ue,triangulation:Ve,depth:{enable:!1},primitive:Te.gl.POINTS,blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 4:return be=nt.sent,nt.abrupt("return",[be]);case 6:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}})}}]),n}(nu),Ct=g(98333);function Bt(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=kt(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function kt(a,s){if(a){if(typeof a=="string")return Jt(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(a,s)}}function Jt(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var Ft=function(){function a(s,n,r){(0,Cr.Z)(this,a),(0,bt.Z)(this,"boxCells",[]);var t=this.boxCells;this.xCellCount=Math.ceil(s/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)t.push([]);this.boxKeys=[],this.bboxes=[],this.width=s,this.height=n,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/n,this.boxUid=0}return(0,Nr.Z)(a,[{key:"insert",value:function(n,r,t,o,u){this.forEachCell(r,t,o,u,this.insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(t),this.bboxes.push(o),this.bboxes.push(u)}},{key:"query",value:function(n,r,t,o,u){return this.queryHitTest(n,r,t,o,!1,u)}},{key:"hitTest",value:function(n,r,t,o,u){return this.queryHitTest(n,r,t,o,!0,u)}},{key:"insertBoxCell",value:function(n,r,t,o,u,d){this.boxCells[u].push(d)}},{key:"queryHitTest",value:function(n,r,t,o,u,d){if(t<0||n>this.width||o<0||r>this.height)return u?!1:[];var S=[];if(n<=0&&r<=0&&this.width<=t&&this.height<=o){if(u)return!0;for(var z=0;z<this.boxKeys.length;z++)S.push({key:this.boxKeys[z],x1:this.bboxes[z*4],y1:this.bboxes[z*4+1],x2:this.bboxes[z*4+2],y2:this.bboxes[z*4+3]});return d?S.filter(d):S}var de={hitTest:u,seenUids:{box:{},circle:{}}};return this.forEachCell(n,r,t,o,this.queryCell,S,de,d),u?S.length>0:S}},{key:"queryCell",value:function(n,r,t,o,u,d,S,z){var de=S.seenUids,be=this.boxCells[u];if(be!==null){var it=this.bboxes,nt=Bt(be),Kt;try{for(nt.s();!(Kt=nt.n()).done;){var tr=Kt.value;if(!de.box[tr]){de.box[tr]=!0;var Ir=tr*4;if(n<=it[Ir+2]&&r<=it[Ir+3]&&t>=it[Ir+0]&&o>=it[Ir+1]&&(!z||z(this.boxKeys[tr]))){if(S.hitTest)return d.push(!0),!0;d.push({key:this.boxKeys[tr],x1:it[Ir],y1:it[Ir+1],x2:it[Ir+2],y2:it[Ir+3]})}}}}catch(jr){nt.e(jr)}finally{nt.f()}}return!1}},{key:"forEachCell",value:function(n,r,t,o,u,d,S,z){for(var de=this.convertToXCellCoord(n),be=this.convertToYCellCoord(r),it=this.convertToXCellCoord(t),nt=this.convertToYCellCoord(o),Kt=de;Kt<=it;Kt++)for(var tr=be;tr<=nt;tr++){var Ir=this.xCellCount*tr+Kt;if(u.call(this,n,r,t,o,Ir,d,S,z))return}}},{key:"convertToXCellCoord",value:function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}},{key:"convertToYCellCoord",value:function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}}]),a}(),rr=Ft,Xt=function(){function a(s,n){(0,Cr.Z)(this,a),(0,bt.Z)(this,"viewportPadding",100),this.width=s,this.height=n,this.viewportPadding=Math.max(s,n),this.grid=new rr(s+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=s+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=s+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return(0,Nr.Z)(a,[{key:"placeCollisionBox",value:function(n){var r=n.x1+n.anchorPointX+this.viewportPadding,t=n.y1+n.anchorPointY+this.viewportPadding,o=n.x2+n.anchorPointX+this.viewportPadding,u=n.y2+n.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,t,o,u)||this.grid.hitTest(r,t,o,u)?{box:[]}:{box:[r,t,o,u]}}},{key:"insertCollisionBox",value:function(n,r){var t={featureIndex:r};this.grid.insert(t,n[0],n[1],n[2],n[3])}},{key:"project",value:function(n,r,t){var o=Ct.al(r,t,0,1),u=Ct.Ue(),d=Vo.fromValues.apply(Vo,(0,le.Z)(n));return Ct.fF(u,o,d),{x:(u[0]/u[3]+1)/2*this.width+this.viewportPadding,y:(-u[1]/u[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(n,r,t,o){return t>=0&&n<this.gridRightBoundary&&o>=0&&r<this.gridBottomBoundary}}]),a}();function pr(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=yr(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function yr(a,s){if(a){if(typeof a=="string")return Ur(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ur(a,s)}}function Ur(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function xn(a){var s=.5,n=.5;switch(a){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0;break;default:s=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:s,verticalAlign:n}}function mn(a,s,n,r,t){if(t){var o=a[r],u=o.glyph;if(u)for(var d=s[u].advance*o.scale,S=(a[r].x+d)*t,z=n;z<=r;z++)a[z].x-=S}}function Mn(a,s,n,r,t,o,u){var d=(s-n)*t,S=(-r*u+.5)*o,z=pr(a),de;try{for(z.s();!(de=z.n()).done;){var be=de.value;be.x+=d,be.y+=S}}catch(it){z.e(it)}finally{z.f()}}function Pn(a,s,n,r,t,o,u){var d=-8,S=0,z=d,de=0,be=a.positionedGlyphs,it=o==="right"?1:o==="left"?0:.5,nt=be.length;n.forEach(function(on){if(on.split("").forEach(function(Yn){var ci=s[Yn],Zi=0;ci&&(be.push({glyph:Yn,x:S,y:z+Zi,vertical:!1,scale:1,metrics:ci}),S+=ci.advance+u)}),be.length!==nt){var tn=S-u;de=Math.max(tn,de),mn(be,s,nt,be.length-1,it)}S=0,z-=r+5});var Kt=xn(t),tr=Kt.horizontalAlign,Ir=Kt.verticalAlign;Mn(be,it,tr,Ir,de,r,n.length);var jr=z-d;a.top+=-Ir*jr,a.bottom=a.top-jr,a.left+=-tr*de,a.right=a.left+de}function Gn(a,s,n,r,t,o,u){var d=-8,S=0,z=d,de=0,be=a.positionedGlyphs,it=o==="right"?1:o==="left"?0:.5,nt=be.length;n.forEach(function(on){var tn=s[on],Yn=0;if(tn&&(be.push({glyph:on,x:tn.advance/2,y:z+Yn,vertical:!1,scale:1,metrics:tn}),S+=tn.advance+u),be.length!==nt){var ci=S-u;de=Math.max(ci,de),mn(be,s,nt,be.length-1,it)}S=0,z-=r+5});var Kt=xn(t),tr=Kt.horizontalAlign,Ir=Kt.verticalAlign;Mn(be,it,tr,Ir,de,r,n.length);var jr=z-d;a.top+=-Ir*jr,a.bottom=a.top-jr,a.left+=-tr*de,a.right=a.left+de}function ti(a,s,n,r,t,o){var u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],d=arguments.length>7?arguments[7]:void 0,S=a.split(`
`),z=[],de={positionedGlyphs:z,top:u[1],bottom:u[1],left:u[0],right:u[0],lineCount:S.length,text:a};return d?Gn(de,s,S,n,r,t,o):Pn(de,s,S,n,r,t,o),z.length?de:!1}function ii(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],n=arguments.length>2?arguments[2]:void 0,r=a.positionedGlyphs,t=r===void 0?[]:r,o=[],u=pr(t),d;try{for(u.s();!(d=u.n()).done;){var S=d.value,z=S.metrics,de=4,be=z.advance*S.scale/2,it=n?[S.x+be,S.y]:[0,0],nt=n?[0,0]:[S.x+be+s[0],S.y+s[1]],Kt=(0-de)*S.scale-be+nt[0],tr=(0-de)*S.scale+nt[1],Ir=Kt+z.width*S.scale,jr=tr+z.height*S.scale,on={x:Kt,y:tr},tn={x:Ir,y:tr},Yn={x:Kt,y:jr},ci={x:Ir,y:jr};o.push({tl:on,tr:tn,bl:Yn,br:ci,tex:z,glyphOffset:it})}}catch(Zi){u.e(Zi)}finally{u.f()}return o}function b(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=A(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function A(a,s){if(a){if(typeof a=="string")return I(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(a,s)}}function I(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function T(a){var s=H();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function H(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var te=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ae=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp *(vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function qe(a){var s=this,n=a.id,r=[],t=[];if(!s.glyphInfoMap||!s.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=s.glyphInfoMap[n].centroid,u=o.length===2?[o[0],o[1],0]:o;return s.glyphInfoMap[n].glyphQuads.forEach(function(d,S){r.push.apply(r,(0,le.Z)(u).concat([d.tex.x,d.tex.y+d.tex.height,d.tl.x,d.tl.y],(0,le.Z)(u),[d.tex.x+d.tex.width,d.tex.y+d.tex.height,d.tr.x,d.tr.y],(0,le.Z)(u),[d.tex.x+d.tex.width,d.tex.y,d.br.x,d.br.y],(0,le.Z)(u),[d.tex.x,d.tex.y,d.bl.x,d.bl.y])),t.push(0+S*4,1+S*4,2+S*4,2+S*4,3+S*4,0+S*4)}),{vertices:r,indices:t,size:7}}var Tt=function(a){(0,kr.Z)(n,a);var s=T(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"glyphInfoMap",{}),(0,bt.Z)((0,or.Z)(r),"currentZoom",-1),(0,bt.Z)((0,or.Z)(r),"textureHeight",0),(0,bt.Z)((0,or.Z)(r),"textCount",0),(0,bt.Z)((0,or.Z)(r),"preTextStyle",{}),(0,bt.Z)((0,or.Z)(r),"mapping",(0,ft.Z)(fe().mark(function d(){return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return r.initGlyph(),r.updateTexture(),z.next=4,r.reBuildModel();case 4:case"end":return z.stop()}},d)}))),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.stroke,S=d===void 0?"#fff":d,z=t.strokeWidth,de=z===void 0?0:z,be=t.halo,it=be===void 0?.5:be,nt=t.gamma,Kt=nt===void 0?2:nt,tr=t.raisingHeight,Ir=tr===void 0?0:tr,jr=this.fontService,on=jr.canvas,tn=jr.mapping;if(tn&&Object.keys(tn).length!==this.textCount&&on&&(this.updateTexture(),this.textCount=Object.keys(tn).length),this.preTextStyle=this.getTextStyle(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeWidth:de,stroke:S})){this.judgeStyleAttributes({opacity:u,strokeWidth:de,stroke:S});var Yn=this.layer.getEncodedData(),ci=this.calDataFrame(this.cellLength,Yn,this.cellProperties),Zi=ci.data,zi=ci.width,pa=ci.height;this.rowCount=pa,this.dataTexture=this.cellLength>0&&Zi.length>0?this.createTexture2D({flipY:!0,data:Zi,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:zi,height:pa}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(Ir),u_opacity:(0,ht.isNumber)(u)?u:1,u_stroke_width:(0,ht.isNumber)(de)?de:1,u_stroke_color:this.getStrokeColor(S),u_sdf_map:this.texture,u_halo_blur:it,u_gamma_scale:Kt,u_sdf_map_size:[(on==null?void 0:on.width)||1,(on==null?void 0:on.height)||1]}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.preTextStyle=this.getTextStyle(),d.abrupt("return",this.buildModels());case 4:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=u.textAllowOverlap,it=be===void 0?!1:be,this.initGlyph(),this.updateTexture(),it||this.filterGlyphs(),tr.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Ae,fragmentShader:te,triangulation:qe.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 6:return nt=tr.sent,tr.abrupt("return",[nt]);case 8:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"needUpdate",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr;return fe().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(u=this.getTextStyle(),d=u.textAllowOverlap,S=d===void 0?!1:d,z=u.textAnchor,de=z===void 0?"center":z,be=u.textOffset,it=u.padding,nt=u.fontFamily,Kt=u.fontWeight,!(!(0,ht.isEqual)(it,this.preTextStyle.padding)||!(0,ht.isEqual)(be,this.preTextStyle.textOffset)||!(0,ht.isEqual)(de,this.preTextStyle.textAnchor)||!(0,ht.isEqual)(nt,this.preTextStyle.fontFamily)||!(0,ht.isEqual)(Kt,this.preTextStyle.fontWeight))){tn.next=5;break}return tn.next=4,this.mapping();case 4:return tn.abrupt("return",!0);case 5:if(!S){tn.next=7;break}return tn.abrupt("return",!1);case 7:if(tr=this.mapService.getZoom(),Ir=this.mapService.getBounds(),jr=(0,tt.oO)(this.extent,Ir),!(Math.abs(this.currentZoom-tr)>.5||!jr||S!==this.preTextStyle.textAllowOverlap)){tn.next=14;break}return tn.next=13,this.reBuildModel();case 13:return tn.abrupt("return",!0);case 14:return tn.abrupt("return",!1);case 15:case"end":return tn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:Te.GC.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.rotate,d=u===void 0?0:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Te.GC.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[5],d[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?12:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Te.GC.Attribute,descriptor:{name:"a_tex",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return(0,tt.yA)(t,.5)}},{key:"initTextFont",value:function(){var t=this.getTextStyle(),o=t.fontWeight,u=t.fontFamily,d=this.layer.getEncodedData(),S=[];d.forEach(function(z){var de=z.shape,be=de===void 0?"":de;be=be.toString();var it=b(be),nt;try{for(it.s();!(nt=it.n()).done;){var Kt=nt.value;S.indexOf(Kt)===-1&&S.push(Kt)}}catch(tr){it.e(tr)}finally{it.f()}}),this.fontService.setFontOptions({characterSet:S,fontWeight:o,fontFamily:u,iconfont:!1})}},{key:"initIconFontTex",value:function(){var t=this.getTextStyle(),o=t.fontWeight,u=t.fontFamily,d=this.layer.getEncodedData(),S=[];d.forEach(function(z){var de=z.shape,be=de===void 0?"":de;be="".concat(be),S.indexOf(be)===-1&&S.push(be)}),this.fontService.setFontOptions({characterSet:S,fontWeight:o,fontFamily:u,iconfont:!0})}},{key:"getTextStyle",value:function(){var t=this.layer.getLayerConfig(),o=t.fontWeight,u=o===void 0?"400":o,d=t.fontFamily,S=d===void 0?"sans-serif":d,z=t.textAllowOverlap,de=z===void 0?!1:z,be=t.padding,it=be===void 0?[0,0]:be,nt=t.textAnchor,Kt=nt===void 0?"center":nt,tr=t.textOffset,Ir=tr===void 0?[0,0]:tr,jr=t.opacity,on=jr===void 0?1:jr,tn=t.strokeOpacity,Yn=tn===void 0?1:tn,ci=t.strokeWidth,Zi=ci===void 0?0:ci,zi=t.stroke,pa=zi===void 0?"#000":zi;return{fontWeight:u,fontFamily:S,textAllowOverlap:de,padding:it,textAnchor:Kt,textOffset:Ir,opacity:on,strokeOpacity:Yn,strokeWidth:Zi,stroke:pa}}},{key:"generateGlyphLayout",value:function(t){var o=this,u=this.fontService.mapping,d=this.layer.getLayerConfig(),S=d.spacing,z=S===void 0?2:S,de=d.textAnchor,be=de===void 0?"center":de,it=d.textOffset,nt=this.layer.getEncodedData();this.glyphInfo=nt.map(function(Kt){var tr=Kt.shape,Ir=tr===void 0?"":tr,jr=Kt.id,on=Kt.size,tn=on===void 0?1:on,Yn=ti(Ir.toString(),u,tn,be,"left",z,it||Kt.textOffset||[0,0],t),ci=ii(Yn,it,!1);return Kt.shaping=Yn,Kt.glyphQuads=ci,Kt.centroid=(0,tt.SI)(Kt.coordinates),Kt.originCentroid=Kt.version==="GAODE2.x"?(0,tt.SI)(Kt.originCoordinates):Kt.originCentroid=Kt.centroid,o.glyphInfoMap[jr]={shaping:Yn,glyphQuads:ci,centroid:(0,tt.SI)(Kt.coordinates)},Kt})}},{key:"filterGlyphs",value:function(){var t=this,o=this.layer.getLayerConfig(),u=o.padding,d=u===void 0?[0,0]:u,S=o.textAllowOverlap,z=S===void 0?!1:S;if(!z){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var de=this.rendererService.getViewportSize(),be=de.width,it=de.height,nt=new Xt(be,it),Kt=this.glyphInfo.filter(function(tr){var Ir=tr.shaping,jr=tr.id,on=jr===void 0?0:jr,tn=tr.version==="GAODE2.x"?tr.originCentroid:tr.centroid,Yn=tr.size,ci=Yn/16,Zi=t.mapService.lngLatToContainer(tn),zi=nt.placeCollisionBox({x1:Ir.left*ci-d[0],x2:Ir.right*ci+d[0],y1:Ir.top*ci-d[1],y2:Ir.bottom*ci+d[1],anchorPointX:Zi.x,anchorPointY:Zi.y}),pa=zi.box;return pa&&pa.length?(nt.insertCollisionBox(pa,on),!0):!1});Kt.forEach(function(tr){t.glyphInfoMap[tr.id]=tr})}}},{key:"initGlyph",value:function(){var t=this.layer.getLayerConfig(),o=t.iconfont,u=o===void 0?!1:o;u?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(u)}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,o=this.fontService.canvas;this.textureHeight=o.height,this.texture&&this.texture.destroy(),this.texture=t({data:o,mag:Te.gl.LINEAR,min:Te.gl.LINEAR,width:o.width,height:o.height})}},{key:"reBuildModel",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,this.filterGlyphs(),nt.next=4,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Ae,fragmentShader:te,triangulation:qe.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 4:be=nt.sent,this.layer.models=[be];case 6:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()}]),n}(nu),Wt={fillImage:wl,fill:Bl,radar:Ie,image:fu,normal:Ru,simplePoint:ct,extrude:so,text:Tt,earthFill:Pa,earthExtrude:xs},vr=Wt;function Fr(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=en(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function en(a,s){if(a){if(typeof a=="string")return zn(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(a,s)}}function zn(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function ei(a){var s=Qn();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Qn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _n=function(a){(0,kr.Z)(n,a);var s=ei(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","PointLayer"),(0,bt.Z)((0,or.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new vr[u](this),S.next=5,this.initLayerModels();case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"rebuildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.buildModels();case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var t=this.shapeOption,o=t.field,u=t.values,d=this.getLayerConfig(),S=d.shape2d,z=this.iconService.getIconMap();if(o&&(S==null?void 0:S.indexOf(o))!==-1)return"fill";if(u==="text")return"text";if(u&&u instanceof Array){var de=Fr(u),be;try{for(de.s();!(be=de.n()).done;){var it=be.value;if(typeof it=="string"&&z.hasOwnProperty(it))return"image"}}catch(nt){de.e(nt)}finally{de.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return o[t]}},{key:"getModelType",value:function(){var t=this.getEncodedData(),o=this.getLayerConfig(),u=o.shape2d,d=o.shape3d,S=this.iconService.getIconMap(),z=t.find(function(be){return be.hasOwnProperty("shape")});if(z){var de=z.shape;return de==="dot"?"normal":de==="simple"?"simplePoint":de==="radar"?"radar":this.layerType==="fillImage"?"fillImage":(u==null?void 0:u.indexOf(de))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(d==null?void 0:d.indexOf(de))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":S.hasOwnProperty(de)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),n}(eu);function Xn(a){var s=ai();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ai(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var nn=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];  
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }

  } else {
     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,hi=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,vi=`uniform sampler2D u_texture;
uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float lightWeight = styleMappingMat[3][1];
  float topU = styleMappingMat[2][2];
  float topV = styleMappingMat[2][3];

  float sidey = styleMappingMat[3][0];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = texture2D(u_texture, vec2(topU, topV));
  }
  

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Li=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_Color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - a_Position.z(judge side by a_Position.z)
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - u - v
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[2][2] = a_uvs[0];
  styleMappingMat[2][3] = 1.0 - a_uvs[1];
  styleMappingMat[3][0] = a_uvs[2];


  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,Vi=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      // side notuse linear
       gl_FragColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
}
`,sa=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,ua=function(a){(0,kr.Z)(n,a);var s=Xn(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.heightfixed,S=d===void 0?!1:d,z=t.raisingHeight,de=z===void 0?0:z,be=t.topsurface,it=be===void 0?!0:be,nt=t.sidesurface,Kt=nt===void 0?!0:nt,tr=t.sourceColor,Ir=t.targetColor;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var jr=this.layer.getEncodedData(),on=this.calDataFrame(this.cellLength,jr,this.cellProperties),tn=on.data,Yn=on.width,ci=on.height;this.rowCount=ci,this.dataTexture=this.cellLength>0&&tn.length>0?this.createTexture2D({flipY:!0,data:tn,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Yn,height:ci}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}var Zi=0,zi=[1,1,1,1],pa=[1,1,1,1];return tr&&Ir&&(zi=(0,tt.CI)(tr),pa=(0,tt.CI)(Ir),Zi=1),{u_topsurface:Number(it),u_sidesurface:Number(Kt),u_heightfixed:Number(S),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(de),u_opacity:(0,ht.isNumber)(u)?u:1,u_linearColor:Zi,u_sourceColor:zi,u_targetColor:pa,u_texture:this.texture}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr;return fe().wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=this.getShaders(),it=be.frag,nt=be.vert,Kt=be.type,jr.next=4,this.layer.buildLayerModel({moduleName:Kt,vertexShader:nt,fragmentShader:it,triangulation:Ns,stencil:(0,tt.Vi)(S,de)});case 4:return tr=jr.sent,jr.abrupt("return",[tr]);case 6:case"end":return jr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.pickLight,u=t.mapTexture;return u?{frag:vi,vert:Li,type:"polygonExtrudeTexture"}:o?{frag:Vi,vert:sa,type:"polygonExtrudePickLight"}:{frag:nn,vert:hi,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var t,o;(t=this.dataTexture)===null||t===void 0||t.destroy(),(o=this.texture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,o=(0,xi.Z)(t,4),u=o[0],d=o[1],S=o[2],z=o[3],de=S-u,be=z-d;this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Te.GC.Attribute,descriptor:{name:"a_uvs",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(nt,Kt,tr){var Ir=tr[0],jr=tr[1];return[(Ir-u)/de,(jr-d)/be,tr[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(nt,Kt,tr,Ir,jr){return jr}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(nt){var Kt=nt.size,tr=Kt===void 0?10:Kt;return Array.isArray(tr)?[tr[0]]:[tr]}}})}},{key:"loadTexture",value:function(){var t=this,o=this.layer.getLayerConfig(),u=o.mapTexture,d=this.rendererService.createTexture2D;if(this.texture=d({height:0,width:0}),u){var S=new Image;S.crossOrigin="",S.src=u,S.onload=function(){t.texture=d({data:S,width:S.width,height:S.height,wrapS:Te.gl.CLAMP_TO_EDGE,wrapT:Te.gl.CLAMP_TO_EDGE,min:Te.gl.LINEAR,mag:Te.gl.LINEAR}),t.layerService.reRender()}}}}]),n}(nu);function Lo(a){var s=Fa();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Fa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var go=`uniform float u_opacity: 1.0;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,qs=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
uniform float u_opacitylinear: 0.0;
uniform float u_dir: 1.0;
varying vec3 v_linear;
varying vec2 v_pos;


void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,e=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

uniform float u_opacitylinear: 0.0;

attribute vec3 a_linear;
varying vec3 v_linear;
varying vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}`,i=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}

`,l=function(a){(0,kr.Z)(n,a);var s=Lo(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.raisingHeight,u=o===void 0?0:o,d=t.opacity,S=d===void 0?1:d,z=t.opacityLinear,de=z===void 0?{enable:!1,dir:"in"}:z;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:S})){this.judgeStyleAttributes({opacity:S});var be=this.layer.getEncodedData(),it=this.calDataFrame(this.cellLength,be,this.cellProperties),nt=it.data,Kt=it.width,tr=it.height;this.rowCount=tr,this.dataTexture=this.cellLength>0&&nt.length>0?this.createTexture2D({flipY:!0,data:nt,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:Kt,height:tr}):this.createTexture2D({flipY:!0,data:[1],format:Te.gl.LUMINANCE,type:Te.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(u),u_opacity:(0,ht.isNumber)(S)?S:1,u_opacitylinear:Number(de.enable),u_dir:de.dir==="in"?1:0}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn;return fe().wrap(function(ci){for(;;)switch(ci.prev=ci.next){case 0:return u=this.getModelParams(),d=u.frag,S=u.vert,z=u.triangulation,de=u.type,be=this.layer.getLayerConfig(),it=be.mask,nt=it===void 0?!1:it,Kt=be.maskInside,tr=Kt===void 0?!0:Kt,Ir=be.workerEnabled,jr=Ir===void 0?!1:Ir,on=be.enablePicking,this.layer.triangulation=z,ci.next=5,this.layer.buildLayerModel({moduleName:de,vertexShader:S,fragmentShader:d,triangulation:z,primitive:Te.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(nt,tr),workerEnabled:jr,workerOptions:{modelType:de,enablePicking:on}});case 5:return tn=ci.sent,ci.abrupt("return",[tn]);case 7:case"end":return ci.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig(),o=t.opacityLinear,u=o===void 0?{enable:!1,dir:"in"}:o;u.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Te.GC.Attribute,descriptor:{name:"a_linear",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(S,z,de){return[de[3],de[4],de[5]]}}})}},{key:"getModelParams",value:function(){var t=this.layer.getLayerConfig(),o=t.opacityLinear,u=o===void 0?{enable:!1}:o;return u.enable?{frag:qs,vert:e,type:"polygonLinear",triangulation:vo}:{frag:go,vert:i,type:"polygonFill",triangulation:tt.yR}}}]),n}(nu);function y(a){var s=P();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var j=`
uniform float u_time: 0.0;
uniform float u_opacity: 1.0;

varying vec2 v_uv;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;
// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)
// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)
uniform vec4 u_watercolor;
uniform vec4 u_watercolor2;
vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture2D(u_texture2,p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture2D(u_texture1,fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    

  float opacity = u_opacity;
  gl_FragColor = vec4(col, opacity);  
}
`,Q=`attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,we=function(a){(0,kr.Z)(n,a);var s=y(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.watercolor,S=d===void 0?"#6D99A8":d,z=t.watercolor2,de=z===void 0?"#0F121C":z;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:(0,tt.CI)(S),u_watercolor2:(0,tt.CI)(de),u_opacity:(0,ht.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:Q,fragmentShader:j,triangulation:Ls,primitive:Te.gl.TRIANGLES,depth:{enable:!1},stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o,u;(t=this.texture1)===null||t===void 0||t.destroy(),(o=this.texture2)===null||o===void 0||o.destroy(),(u=this.texture3)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,o=(0,xi.Z)(t,4),u=o[0],d=o[1],S=o[2],z=o[3],de=S-u,be=z-d;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Te.GC.Attribute,descriptor:{name:"a_uv",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(nt,Kt,tr,Ir){var jr=nt.version===fl.G["GAODE2.x"]?nt.originCoordinates[0][Ir]:tr,on=(0,xi.Z)(jr,2),tn=on[0],Yn=on[1];return[(tn-u)/de,(Yn-d)/be]}}})}},{key:"loadTexture",value:function(){var t=this,o=this.rendererService.createTexture2D,u={height:0,width:0};this.texture1=o(u),this.texture2=o(u),this.texture3=o(u),d(function(z){t.texture1=S(z[0]),t.texture2=S(z[1]),t.texture3=S(z[2]),t.layerService.reRender()});function d(z){var de=0,be=[],it=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];it.map(function(nt){var Kt=new Image;Kt.crossOrigin="",Kt.src=nt,be.push(Kt),Kt.onload=function(){de++,de===3&&z(be)}})}function S(z){return o({data:z,width:z.width,height:z.height,wrapS:Te.gl.MIRRORED_REPEAT,wrapT:Te.gl.MIRRORED_REPEAT,min:Te.gl.LINEAR,mag:Te.gl.LINEAR})}}}]),n}(nu);function ut(a){var s=Nt();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Nt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ut=`uniform sampler2D u_texture;
uniform float u_time: 0.0;
uniform float u_speed: 1.0;
uniform float u_opacity: 1.0;

varying vec4 v_Color;
varying vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {
  float opacity = u_opacity;
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;

  float spc = calSpc();
  gl_FragColor += spc * 0.4;
}
`,qt=`attribute vec4 a_Color;
attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
varying vec2 v_uv;
uniform float u_opacity: 1.0;


#pragma include "projection"

void main() {
  v_uv = a_uv;

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,lr=function(a){(0,kr.Z)(n,a);var s=ut(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.speed,S=d===void 0?.5:d;return{u_texture:this.texture,u_speed:S,u_opacity:(0,ht.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,nt.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:qt,fragmentShader:Ut,triangulation:Ls,primitive:Te.gl.TRIANGLES,depth:{enable:!1},stencil:(0,tt.Vi)(S,de)});case 3:return be=nt.sent,nt.abrupt("return",[be]);case 5:case"end":return nt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,o=(0,xi.Z)(t,4),u=o[0],d=o[1],S=o[2],z=o[3],de=S-u,be=z-d;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Te.GC.Attribute,descriptor:{name:"a_uv",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(nt,Kt,tr,Ir){var jr=nt.version===fl.G["GAODE2.x"]?nt.originCoordinates[0][Ir]:tr,on=(0,xi.Z)(jr,2),tn=on[0],Yn=on[1];return[(tn-u)/de,(Yn-d)/be]}}})}},{key:"loadTexture",value:function(){var t=this,o=this.layer.getLayerConfig(),u=o.waterTexture,d=this.rendererService.createTexture2D;this.texture=d({height:0,width:0});var S=new Image;S.crossOrigin="",u?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),S.src=u):S.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",S.onload=function(){t.texture=d({data:S,width:S.width,height:S.height,wrapS:Te.gl.MIRRORED_REPEAT,wrapT:Te.gl.MIRRORED_REPEAT,min:Te.gl.LINEAR,mag:Te.gl.LINEAR}),t.layerService.reRender()}}}]),n}(nu),xr={fill:l,line:Fs,extrude:ua,text:Tt,point_fill:Bl,point_image:fu,point_normal:Ru,point_extrude:so,water:lr,ocean:we},Kr=xr;function qr(a){var s=dn();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function dn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cn=function(a){(0,kr.Z)(n,a);var s=qr(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","PolygonLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new Kr[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(t=o.scale)===null||t===void 0?void 0:t.field;return u==="fill"?"fill":u==="extrude"?"extrude":u==="water"?"water":u==="ocean"?"ocean":u==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var t=this.getEncodedData(),o=this.getLayerConfig(),u=o.shape2d,d=o.shape3d,S=this.iconService.getIconMap(),z=t.find(function(be){return be.hasOwnProperty("shape")});if(z){var de=z.shape;return de==="dot"?"point_normal":(u==null?void 0:u.indexOf(de))!==-1?"point_fill":(d==null?void 0:d.indexOf(de))!==-1?"point_extrude":S.hasOwnProperty(de)?"point_image":"text"}else return"fill"}}]),n}(eu);function Un(a){var s=ri();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ri(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gi=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;
bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }


void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value))
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
   
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }
}
`,yi=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Ii=function(a){(0,kr.Z)(n,a);var s=Un(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.clampLow,S=d===void 0?!0:d,z=t.clampHigh,de=z===void 0?!0:z,be=t.noDataValue,it=be===void 0?-9999999:be,nt=t.domain,Kt=t.rampColors,tr=nt||(0,tt.ZB)(Kt);return this.colorTexture=this.layer.textureService.getColorTexture(Kt,tr),{u_opacity:u||1,u_texture:this.texture,u_domain:tr,u_clampLow:S,u_clampHigh:typeof de!="undefined"?de:S,u_noDataValue:it,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var r=(0,ft.Z)(fe().mark(function o(u){var d,S,z,de;return fe().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(!Array.isArray(u.data)){it.next=4;break}return it.abrupt("return",{data:u.data,width:u.width,height:u.height});case 4:return it.next=6,u.data;case 6:return d=it.sent,S=d.rasterData,z=d.width,de=d.height,it.abrupt("return",{data:Array.from(S),width:z,height:de});case 11:case"end":return it.stop()}},o)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on;return fe().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=this.layer.getSource(),it=this.rendererService.createTexture2D,nt=be.data.dataArray[0],Yn.next=6,this.getRasterData(nt);case 6:return Kt=Yn.sent,tr=Kt.data,Ir=Kt.width,jr=Kt.height,this.texture=it({data:tr,width:Ir,height:jr,format:Te.gl.LUMINANCE,type:Te.gl.FLOAT}),Yn.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:yi,fragmentShader:gi,triangulation:Qo,primitive:Te.gl.TRIANGLES,depth:{enable:!1},stencil:(0,tt.Vi)(S,de)});case 13:return on=Yn.sent,Yn.abrupt("return",[on]);case 15:case"end":return Yn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.colorTexture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu),Ji=["data"],Wi=["rasterData"];function ja(a){var s=Jn();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var la=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,ea=`precision mediump float;
uniform vec2 u_rminmax: vec2(0,255); 
uniform vec2 u_gminmax: vec2(0,255);
uniform vec2 u_bminmax: vec2(0,255);
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform float u_noDataValue : 0.0;
varying vec2 v_texCoord;

void main() {
  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;
  if(rgb == vec3(u_noDataValue)) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
 
}`,bo=function(a){(0,kr.Z)(n,a);var s=ja(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"dataOption",{}),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.noDataValue,S=d===void 0?0:d,z=this.dataOption,de=z.rMinMax,be=z.gMinMax,it=z.bMinMax;return{u_opacity:u||1,u_texture:this.texture,u_noDataValue:S,u_rminmax:de,u_gminmax:be,u_bminmax:it}}},{key:"getRasterData",value:function(){var r=(0,ft.Z)(fe().mark(function o(u){var d,S,z,de,be;return fe().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(!Array.isArray(u.data)){nt.next=4;break}return d=u.data,S=(0,ls.Z)(u,Ji),this.dataOption=S,nt.abrupt("return",(0,ge.Z)({data:d},S));case 4:return nt.next=6,u.data;case 6:if(z=nt.sent,de=z.rasterData,be=(0,ls.Z)(z,Wi),this.dataOption=be,!Array.isArray(de)){nt.next=14;break}return nt.abrupt("return",(0,ge.Z)({data:de},be));case 14:return nt.abrupt("return",(0,ge.Z)({data:Array.from(de)},be));case 15:case"end":return nt.stop()}},o,this)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on;return fe().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=this.layer.getSource(),it=this.rendererService.createTexture2D,nt=be.data.dataArray[0],Yn.next=6,this.getRasterData(nt);case 6:return Kt=Yn.sent,tr=Kt.data,Ir=Kt.width,jr=Kt.height,this.texture=it({data:tr,width:Ir,height:jr,format:Te.gl.RGB,type:Te.gl.FLOAT}),Yn.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:la,fragmentShader:ea,triangulation:Qo,primitive:Te.gl.TRIANGLES,depth:{enable:!1},stencil:(0,tt.Vi)(S,de)});case 13:return on=Yn.sent,Yn.abrupt("return",[on]);case 15:case"end":return Yn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function Eo(a){var s=Ja();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ja(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ss=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;

void main() {
  vec4 baseColor = texture2D(u_texture, vec2(v_texCoord.x, v_texCoord.y)) * 256.0;
  float r = baseColor.r * 256.0 * 256.0;
  float g = baseColor.g * 256.0;
  float b = baseColor.b;
  float value =  (r + g + b) * 0.1 - 10000.0;
  
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture2D(u_colorTexture, vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }
}
`,Is=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,pu=function(a){(0,kr.Z)(n,a);var s=Eo(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.clampLow,d=u===void 0?!0:u,S=t.clampHigh,z=S===void 0?!0:S,de=t.noDataValue,be=de===void 0?-9999999:de,it=t.domain,nt=t.rampColors,Kt=t.colorTexture,tr=it||(0,tt.ZB)(nt),Ir=Kt;return Kt?this.layer.textureService.setColorTexture(Kt,nt,tr):Ir=this.layer.textureService.getColorTexture(nt,tr),{u_opacity:o||1,u_texture:this.texture,u_domain:tr,u_clampLow:d,u_clampHigh:typeof z!="undefined"?z:d,u_noDataValue:be,u_colorTexture:Ir}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt,Kt;return fe().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,z=u.maskInside,de=z===void 0?!0:z,be=this.layer.getSource(),it=this.rendererService.createTexture2D,Ir.next=5,be.data.images;case 5:return nt=Ir.sent,this.texture=it({data:nt[0],width:nt[0].width,height:nt[0].height}),Ir.next=9,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:Is,fragmentShader:Ss,triangulation:Qo,primitive:Te.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:(0,tt.Vi)(S,de)});case 9:return Kt=Ir.sent,Ir.abrupt("return",[Kt]);case 11:case"end":return Ir.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu),es={raster:Ii,rasterRgb:bo,raster3d:Ii,rasterTerrainRgb:pu},$u=es;function hl(a){var s=Nl();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Nl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var el=function(a){(0,kr.Z)(n,a);var s=hl(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","RasterLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new $u[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return o[t]}},{key:"getModelType",value:function(){var t=this.layerSource.getParserType();switch(t){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),n}(eu);function af(a){var s=gf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function gf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zf=function(a){(0,kr.Z)(n,a);var s=af(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","TileDebugLayer"),(0,bt.Z)((0,or.Z)(r),"zIndex",1e4),(0,bt.Z)((0,or.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"testTile"}}}),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return");case 1:case"end":return d.stop()}},o)}));function t(){return r.apply(this,arguments)}return t}()}]),n}(eu);function Th(a){var s=ed();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ed(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Zf=`
uniform float u_opacity;
uniform vec3 u_CameraPosition;

varying vec3 vVertexNormal;
varying float v_offset;
varying vec4 v_Color;
void main() {
    
    
    // float intensity = pow(0.5 + dot(normalize(vVertexNormal), normalize(u_CameraPosition)), 3.0);
    float intensity = pow(v_offset + dot(normalize(vVertexNormal), normalize(u_CameraPosition)), 3.0);
    // \u53BB\u9664\u80CC\u9762
    if(intensity > 1.0) intensity = 0.0;

    gl_FragColor = vec4(v_Color.rgb, v_Color.a * intensity * u_opacity);
}
`,iu=`
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute vec2 a_Uv;
attribute vec4 a_Color;
uniform vec3 u_CameraPosition;
varying float v_CamreaDistance;

uniform mat4 u_ViewProjectionMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_ViewMatrix;

varying vec3 vVertexNormal;
varying vec4 v_Color;
varying float v_offset;

void main() {
    float EARTH_RADIUS = 100.0;
    
    v_Color = a_Color;

    v_offset = min(((length(u_CameraPosition) - EARTH_RADIUS)/600.0) * 0.5 + 0.4, 1.0);
    vVertexNormal = a_Normal;

    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);
}
`,Uf=function(a){(0,kr.Z)(n,a);var s=Th(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o;return{u_opacity:(0,ht.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.zIndex=-997,S.next=3,this.layer.buildLayerModel({moduleName:"earthAtmoSphere",vertexShader:iu,fragmentShader:Zf,triangulation:Ju,depth:{enable:!1},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function xh(a){var s=Lu();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Lu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cl=`
uniform sampler2D u_texture;

varying vec2 v_texCoord;
varying float v_lightWeight;


void main() {

    vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
    color.xyz = color.xyz * v_lightWeight;
    gl_FragColor = color;
}
`,sl=`// attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute vec2 a_Uv;
varying vec2 v_texCoord;

// attribute vec2 a_Extrude;
// attribute float a_Size;
// attribute float a_Shape;

uniform vec3 u_CameraPosition;
uniform mat4 u_ViewProjectionMatrix;
uniform mat4 u_ModelMatrix;
uniform float u_ambientRatio : 0.5;
uniform float u_diffuseRatio : 0.3;
uniform float u_specularRatio : 0.2;
uniform vec3 u_sunLight: [1.0, -10.5, 12.0];



float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;

    // cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(u_sunLight);

    vec3 halfDir = normalize(viewDir+lightDir);
    // lambert
    float lambert = dot(worldNormal, lightDir);
    // specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
    //sum to light weight
    float lightWeight = u_ambientRatio + u_diffuseRatio * lambert + u_specularRatio * specular;

    return lightWeight;
}

varying float v_lightWeight;
void main() {

    v_texCoord = a_Uv;

    float lightWeight = calc_lighting(vec4(a_Position, 1.0));
    v_lightWeight = lightWeight;

    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);
}
`,Wu=function(a){(0,kr.Z)(n,a);var s=xh(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"earthTime",3.4),(0,bt.Z)((0,or.Z)(r),"sunX",1e3),(0,bt.Z)((0,or.Z)(r),"sunY",1e3),(0,bt.Z)((0,or.Z)(r),"sunZ",1e3),(0,bt.Z)((0,or.Z)(r),"sunRadius",Math.sqrt(r.sunX*r.sunX+r.sunY*r.sunY+r.sunZ*r.sunZ)),r}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=t.globalOptions;return o!=null&&o.enable&&(this.mapService.rotateY({reg:.002}),this.earthTime+=.02,this.sunY=10,this.sunX=Math.cos(this.earthTime)*(this.sunRadius-this.sunY),this.sunZ=Math.sin(this.earthTime)*(this.sunRadius-this.sunY)),{u_ambientRatio:(u==null?void 0:u.ambientRatio)||.6,u_diffuseRatio:(u==null?void 0:u.diffuseRatio)||.4,u_specularRatio:(u==null?void 0:u.specularRatio)||.1,u_sunLight:[this.sunX,this.sunY,this.sunZ],u_texture:this.texture}}},{key:"setEarthTime",value:function(t){this.earthTime=t,this.sunY=10,this.sunX=Math.cos(this.earthTime)*(this.sunRadius-this.sunY),this.sunZ=Math.sin(this.earthTime)*(this.sunRadius-this.sunY),this.layerService.throttleRenderLayers()}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de;return fe().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return d=this.layer.getLayerConfig(),S=d.globalOptions,(S==null?void 0:S.earthTime)!==void 0&&this.setEarthTime(S.earthTime),z=this.layer.getSource(),de=this.rendererService.createTexture2D,this.texture=de({height:0,width:0}),z.data.images.then(function(nt){u.texture=de({data:nt[0],width:nt[0].width,height:nt[0].height}),u.layerService.reRender()}),it.abrupt("return",this.buildModels());case 7:case"end":return it.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.zIndex=-998,S.next=3,this.layer.buildLayerModel({moduleName:"earthBase",vertexShader:sl,fragmentShader:cl,triangulation:Ju,depth:{enable:!0},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function td(a){var s=Qf();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Qf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Rc=`
uniform float u_opacity;
uniform vec3 u_CameraPosition;
varying vec3 vVertexNormal;

varying vec4 v_Color;
void main() {


    float intensity =  - dot(normalize(vVertexNormal), normalize(u_CameraPosition));
    // \u53BB\u9664\u80CC\u9762
    if(intensity > 1.0) intensity = 0.0;

    gl_FragColor = vec4(v_Color.rgb, v_Color.a * intensity * u_opacity);
}
`,$f=`
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute vec2 a_Uv;
attribute vec4 a_Color;
uniform vec3 u_CameraPosition;
uniform mat4 u_ViewProjectionMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_ViewMatrix;

varying vec3 vVertexNormal;
varying vec4 v_Color;

void main() {
    v_Color = a_Color;

    vVertexNormal = a_Normal;

    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);
}
`,rd=function(a){(0,kr.Z)(n,a);var s=td(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o;return{u_opacity:(0,ht.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.zIndex=-999,S.next=3,this.layer.buildLayerModel({moduleName:"earthBloom",vertexShader:$f,fragmentShader:Rc,triangulation:Tc,depth:{enable:!1},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Te.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Te.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Te.gl.STATIC_DRAW,data:[],type:Te.gl.FLOAT},size:3,update:function(o,u,d,S,z){return z}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function Cl(a){var s=Mh();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var fd={base:Wu,atomSphere:Uf,bloomSphere:rd},Wd=["base","atomSphere","bloomSphere"],oc=function(a){(0,kr.Z)(n,a);var s=Cl(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","EarthLayer"),(0,bt.Z)((0,or.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new fd[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"setEarthTime",value:function(t){this.layerModel&&this.layerModel.setEarthTime?this.layerModel.setEarthTime(t):console.warn("\u8BF7\u5728 scene loaded \u4E4B\u540E\u6267\u884C\u8BE5\u65B9\u6CD5\uFF01")}},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=(o==null||(t=o.scale)===null||t===void 0?void 0:t.field)||"base";return Wd.indexOf(u)<0&&(u="base"),u}}]),n}(eu);function Ou(a){var s=Od();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Od(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Wh=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,yf=`attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,Ep=function(a){(0,kr.Z)(n,a);var s=Ou(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?0:o,d=t.color,S=d===void 0?"#000":d;return{u_opacity:(0,ht.isNumber)(u)?u:0,u_color:(0,tt.CI)(S)}}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:yf,fragmentShader:Wh,triangulation:Ls,depth:{enable:!1},blend:this.getBlend(),stencil:{enable:!0,mask:255,func:{cmp:Te.gl.ALWAYS,ref:1,mask:255},opFront:{fail:Te.gl.REPLACE,zfail:Te.gl.REPLACE,zpass:Te.gl.REPLACE}},pick:!1});case 2:return u=S.sent,S.abrupt("return",[u]);case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;t&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(nu),bd={fill:Ep},ml=bd;function vc(a){var s=vd();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function vd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ad=function(a){(0,kr.Z)(n,a);var s=vc(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","MaskLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new ml[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getModelType",value:function(){return"fill"}}]),n}(eu);function Fd(a,s,n){var r=yp(a,a.VERTEX_SHADER,s),t=yp(a,a.FRAGMENT_SHADER,n);if(!r||!t)return null;var o=a.createProgram();if(!o)return null;a.attachShader(o,r),a.attachShader(o,t),a.linkProgram(o);var u=a.getProgramParameter(o,a.LINK_STATUS);if(!u){var d=a.getProgramInfoLog(o);return console.warn("Failed to link program: "+d),a.deleteProgram(o),a.deleteShader(t),a.deleteShader(r),null}for(var S=a.getProgramParameter(o,a.ACTIVE_ATTRIBUTES),z=0;z<S;z++){var de=a.getActiveAttrib(o,z);o[de.name]=a.getAttribLocation(o,de.name)}for(var be=a.getProgramParameter(o,a.ACTIVE_UNIFORMS),it=0;it<be;it++){var nt=a.getActiveUniform(o,it);o[nt.name]=a.getUniformLocation(o,nt.name)}return o.vertexShader=r,o.fragmentShader=t,o}function yp(a,s,n){var r=a.createShader(s);if(r==null)return console.warn("unable to create shader"),null;a.shaderSource(r,n),a.compileShader(r);var t=a.getShaderParameter(r,a.COMPILE_STATUS);if(!t){var o=a.getShaderInfoLog(r);return console.warn("Failed to compile shader: "+o),a.deleteShader(r),null}return r}function Ph(a,s,n,r,t){var o=a.createTexture();return a.bindTexture(a.TEXTURE_2D,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r,t,0,a.RGBA,a.UNSIGNED_BYTE,n),a.bindTexture(a.TEXTURE_2D,null),o}function Ed(a,s,n){var r=a.createTexture();return a.bindTexture(a.TEXTURE_2D,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,n),a.bindTexture(a.TEXTURE_2D,null),r}function Bd(a,s,n){a.activeTexture(a.TEXTURE0+n),a.bindTexture(a.TEXTURE_2D,s)}function Qd(a,s){var n=a.createBuffer();return a.bindBuffer(a.ARRAY_BUFFER,n),a.bufferData(a.ARRAY_BUFFER,s,a.STATIC_DRAW),n}function Jf(a,s,n,r,t){var o=a.createBuffer();o||console.warn("failed create vertex buffer"),a.bindBuffer(a.ARRAY_BUFFER,o),a.bufferData(a.ARRAY_BUFFER,n,a.STATIC_DRAW);var u=a.getAttribLocation(t,s);return a.vertexAttribPointer(u,r,a.FLOAT,!1,0,0),a.enableVertexAttribArray(u),a.bindBuffer(a.ARRAY_BUFFER,null),{buffer:o,attr:u,count:r}}function bh(a,s){var n=a.createBuffer();return n?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n),a.bufferData(a.ELEMENT_ARRAY_BUFFER,s,a.STATIC_DRAW)):console.warn("failed create vertex buffer"),n}function Bv(a,s,n,r,t){var o=a.getUniformLocation(r,s);return o===null||o<0?console.warn("\u65E0\u6CD5\u83B7\u53D6 uniform \u53D8\u91CF\u7684\u5B58\u50A8\u4F4D\u7F6E"):nv(a,o,n,t),o}function nv(a,s,n,r){switch(r){case"float":a.uniform1f(s,n);break;case"vec2":a.uniform2fv(s,n);break;case"vec3":a.uniform3fv(s,n);break;case"vec4":a.uniform4fv(s,n);break;case"bool":a.uniform1i(s,n);break;case"sampler2d":break;case"mat4":a.uniformMatrix4fv(s,!1,n);break}}function iv(a){var s=a.drawingBufferWidth,n=a.drawingBufferHeight,r=s,t=n,o=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,o);var u=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,u),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r,t),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,u);var d=a.createTexture();return o.texture=d,o.width=r,o.height=t,a.bindTexture(a.TEXTURE_2D,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r,t,0,a.RGBA,a.UNSIGNED_BYTE,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,d,0),a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null),{FRAMEBUFFER:o,OFFER_SCREEN_WIDTH:r,OFFER_SCREEN_HEIGHT:t}}var av=`
 precision mediump float;

 attribute float a_index;

 uniform sampler2D u_particles;
 uniform float u_particles_res;

 varying vec2 v_particle_pos;

 void main() {
     vec4 color = texture2D(u_particles, vec2(
         fract(a_index / u_particles_res),
         floor(a_index / u_particles_res) / u_particles_res)
     );

     // decode current particle position from the pixel's RGBA value
     v_particle_pos = vec2( color.r / 255.0 + color.b, color.g / 255.0 + color.a);

     gl_PointSize = 1.0;
     gl_Position = vec4(2.0 * v_particle_pos.x - 1.0, 1.0 - 2.0 * v_particle_pos.y, 0, 1);
 }`,ov=`
 precision mediump float;

 uniform sampler2D u_wind;
 uniform vec2 u_wind_min;
 uniform vec2 u_wind_max;
 uniform sampler2D u_color_ramp;

 varying vec2 v_particle_pos;

 void main() {
     vec2 velocity = mix(u_wind_min, u_wind_max, texture2D(u_wind, v_particle_pos).rg);
     float speed_t = length(velocity) / length(u_wind_max);

     // color ramp is encoded in a 16x16 texture
     vec2 ramp_pos = vec2( fract(16.0 * speed_t), floor(16.0 * speed_t) / 16.0);

     gl_FragColor = texture2D(u_color_ramp, ramp_pos);
 }`,sv=`
 precision mediump float;

 attribute vec2 a_pos;

 varying vec2 v_tex_pos;

 void main() {
     v_tex_pos = a_pos;
     gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);
     // framebuffer \u59CB\u7EC8\u7528\u94FA\u6EE1\u5C4F\u5E55\u7684 texture
 }`,Nd=`
 precision highp float;

 uniform sampler2D u_particles;
 uniform sampler2D u_wind;
 uniform vec2 u_wind_res;
 uniform vec2 u_wind_min;
 uniform vec2 u_wind_max;
 uniform float u_rand_seed;
 uniform float u_speed_factor;
 uniform float u_drop_rate;
 uniform float u_drop_rate_bump;

 varying vec2 v_tex_pos;

 // pseudo-random generator
 const vec3 rand_constants = vec3(12.9898, 78.233, 4375.85453);
 float rand(const vec2 co) {
 float t = dot(rand_constants.xy, co);
     return fract(sin(t) * (rand_constants.z + t));
 }

 // wind speed lookup; use manual bilinear filtering based on 4 adjacent pixels for smooth interpolation
 vec2 lookup_wind(const vec2 uv) {
     // return texture2D(u_wind, uv).rg; // lower-res hardware filtering
     vec2 px = 1.0 / u_wind_res;
     vec2 vc = (floor(uv * u_wind_res)) * px;
     vec2 f = fract(uv * u_wind_res);
     vec2 tl = texture2D(u_wind, vc).rg;
     vec2 tr = texture2D(u_wind, vc + vec2(px.x, 0)).rg;
     vec2 bl = texture2D(u_wind, vc + vec2(0, px.y)).rg;
     vec2 br = texture2D(u_wind, vc + px).rg;
     return mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);
 }

 void main() {
     vec4 color = texture2D(u_particles, v_tex_pos);
     vec2 pos = vec2(
         color.r / 255.0 + color.b,
         color.g / 255.0 + color.a); // decode particle position from pixel RGBA
     vec2 velocity = mix(u_wind_min, u_wind_max, lookup_wind(pos));
     float speed_t = length(velocity) / length(u_wind_max);

     // take EPSG:4236 distortion into account for calculating where the particle moved
     float distortion = cos(radians(pos.y * 180.0 - 90.0));
     vec2 offset = vec2(velocity.x / distortion, -velocity.y) * 0.0001 * u_speed_factor;

     // update particle position, wrapping around the date line
     pos = fract(1.0 + pos + offset);

     // a random seed to use for the particle drop
     vec2 seed = (pos + v_tex_pos) * u_rand_seed;

     // drop rate is a chance a particle will restart at random position, to avoid degeneration
     float drop_rate = u_drop_rate + speed_t * u_drop_rate_bump;
     float drop = step(1.0 - drop_rate, rand(seed));

     vec2 random_pos = vec2(
         rand(seed + 1.3),
         rand(seed + 2.1));
         pos = mix(pos, random_pos, drop);

     // encode the new particle position back into RGBA
     gl_FragColor = vec4(
         fract(pos * 255.0),
         floor(pos * 255.0) / 255.0);
 }`,uv=`
     precision mediump float;

     attribute vec2 a_pos;

     varying vec2 v_tex_pos;

     void main() {
         v_tex_pos = a_pos;
         gl_Position = vec4(1.0 - 2.0 * a_pos, 0.0, 1.0);
         gl_PointSize = 100.0;
 }`,_p=`
 precision mediump float;

 uniform sampler2D u_screen;
 uniform float u_opacity;
 varying vec2 v_tex_pos;

 void main() {
     vec4 color = texture2D(u_screen, 1.0 - v_tex_pos);

     // a hack to guarantee opacity fade out even with a value close to 1.0
     gl_FragColor = vec4(floor(255.0 * color * u_opacity) / 255.0);
 }`;function Np(a){var s=document.createElement("canvas"),n=s.getContext("2d");s.width=256,s.height=1;for(var r=n.createLinearGradient(0,0,256,0),t=0,o=Object.keys(a);t<o.length;t++){var u=o[t];r.addColorStop(+u,a[+u])}return n.fillStyle=r,n.fillRect(0,0,256,1),s=null,new Uint8Array(n.getImageData(0,0,256,1).data)}function zp(a,s,n,r){a.bindBuffer(a.ARRAY_BUFFER,s),a.enableVertexAttribArray(n),a.vertexAttribPointer(n,r,a.FLOAT,!1,0,0)}function Sp(a,s,n){a.bindFramebuffer(a.FRAMEBUFFER,s),n&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,n,0)}var xp=function(){function a(s){(0,Cr.Z)(this,a),(0,bt.Z)(this,"width",512),(0,bt.Z)(this,"height",512),(0,bt.Z)(this,"numParticles",65536),this.gl=s.glContext,this.width=s.imageWidth,this.height=s.imageHeight,this.fadeOpacity=s.fadeOpacity,this.speedFactor=s.speedFactor,this.dropRate=s.dropRate,this.dropRateBump=s.dropRateBump,this.rampColors=s.rampColors,this.init()}return(0,Nr.Z)(a,[{key:"init",value:function(){var n=this.gl;this.fadeOpacity=.996,this.speedFactor=.25,this.dropRate=.003,this.dropRateBump=.01,this.drawProgram=Fd(n,av,ov),this.fullScreenProgram=Fd(n,uv,_p),this.updateProgram=Fd(n,sv,Nd),this.quadBuffer=Qd(n,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])),this.framebuffer=n.createFramebuffer(),this.colorRampTexture=Ph(this.gl,this.gl.LINEAR,Np(this.rampColors),16,16);var r=new Uint8Array(this.width*this.height*4);this.backgroundTexture=Ph(n,n.NEAREST,r,this.width,this.height),this.screenTexture=Ph(n,n.NEAREST,r,this.width,this.height);var t=this.particleStateResolution=Math.ceil(Math.sqrt(this.numParticles));this.numParticlesSize=t*t;for(var o=new Uint8Array(this.numParticlesSize*4),u=0;u<o.length;u++)o[u]=Math.floor(Math.random()*256);this.particleStateTexture0=Ph(n,n.NEAREST,o,t,t),this.particleStateTexture1=Ph(n,n.NEAREST,o,t,t);for(var d=new Float32Array(this.numParticlesSize),S=0;S<this.numParticlesSize;S++)d[S]=S;this.particleIndexBuffer=Qd(n,d)}},{key:"setWind",value:function(n){this.windData=n,this.windTexture=Ed(this.gl,this.gl.LINEAR,n.image)}},{key:"updateParticelNum",value:function(n){var r=this.gl;if(n!==this.numParticles){this.numParticles=n;var t=this.particleStateResolution=Math.ceil(Math.sqrt(this.numParticles));this.numParticlesSize=t*t;for(var o=new Uint8Array(this.numParticlesSize*4),u=0;u<o.length;u++)o[u]=Math.floor(Math.random()*256);this.particleStateTexture0=Ph(r,r.NEAREST,o,t,t),this.particleStateTexture1=Ph(r,r.NEAREST,o,t,t);for(var d=new Float32Array(this.numParticlesSize),S=0;S<this.numParticlesSize;S++)d[S]=S;this.particleIndexBuffer=Qd(r,d)}}},{key:"updateWindDir",value:function(n,r,t,o){this.windData.uMin=n,this.windData.uMax=r,this.windData.vMin=t,this.windData.vMax=o}},{key:"updateColorRampTexture",value:function(n){if(this.isColorChanged(n)){this.rampColors=n;var r=this.gl;r.deleteTexture(this.colorRampTexture),this.colorRampTexture=Ph(r,r.LINEAR,Np(n),16,16)}}},{key:"isColorChanged",value:function(n){for(var r=Object.keys(n),t=0,o=r;t<o.length;t++){var u=o[t],d=Number(u);if(!this.rampColors[d]||this.rampColors[d]&&this.rampColors[d]!==n[d])return!0}return!1}},{key:"reSize",value:function(n,r){if(n!==this.width||r!==this.height){var t=this.gl;t.deleteTexture(this.backgroundTexture),t.deleteTexture(this.screenTexture),this.width=n,this.height=r;var o=new Uint8Array(n*r*4);this.backgroundTexture=Ph(t,t.NEAREST,o,n,r),this.screenTexture=Ph(t,t.NEAREST,o,n,r)}}},{key:"draw",value:function(){var n;if((n=this.windData)!==null&&n!==void 0&&n.image){var r=this.gl;return Bd(r,this.windTexture,0),Bd(r,this.particleStateTexture0,1),this.drawScreen(),this.updateParticles(),{d:this.pixels,w:this.width,h:this.height}}else return{d:new Uint8Array([0,0,0,0]),w:1,h:1}}},{key:"drawScreen",value:function(){var n=this.gl;Sp(n,this.framebuffer,this.screenTexture),n.viewport(0,0,this.width,this.height),n.disable(n.BLEND),this.drawFullTexture(this.backgroundTexture,this.fadeOpacity),this.drawParticles(),this.pixels=new Uint8Array(4*this.width*this.height),n.readPixels(0,0,this.width,this.height,n.RGBA,n.UNSIGNED_BYTE,this.pixels),Sp(n,null,null),n.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);var r=this.backgroundTexture;this.backgroundTexture=this.screenTexture,this.screenTexture=r}},{key:"drawFullTexture",value:function(n,r){var t=this.gl,o=this.fullScreenProgram;t.useProgram(o),t.bindBuffer(t.ARRAY_BUFFER,this.quadBuffer),t.vertexAttribPointer(o.a_pos,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o.a_pos),t.bindBuffer(t.ARRAY_BUFFER,null),Bd(t,n,2),t.uniform1i(o.u_screen,2),t.uniform1f(o.u_opacity,r),t.drawArrays(t.TRIANGLES,0,6)}},{key:"drawParticles",value:function(){var n=this.gl,r=this.drawProgram;n.useProgram(r),zp(n,this.particleIndexBuffer,r.a_index,1),Bd(n,this.colorRampTexture,2),n.uniform1i(r.u_wind,0),n.uniform1i(r.u_particles,1),n.uniform1i(r.u_color_ramp,2),n.uniform1f(r.u_particles_res,this.particleStateResolution),n.uniform2f(r.u_wind_min,this.windData.uMin,this.windData.vMin),n.uniform2f(r.u_wind_max,this.windData.uMax,this.windData.vMax),n.drawArrays(n.POINTS,0,this.numParticlesSize)}},{key:"updateParticles",value:function(){var n=this.gl;Sp(n,this.framebuffer,this.particleStateTexture1),n.viewport(0,0,this.particleStateResolution,this.particleStateResolution);var r=this.updateProgram;n.useProgram(r),zp(n,this.quadBuffer,r.a_pos,2),n.uniform1i(r.u_wind,0),n.uniform1i(r.u_particles,1),n.uniform1f(r.u_rand_seed,Math.random()),n.uniform2f(r.u_wind_res,this.windData.image.width*2,this.windData.image.height*2),n.uniform2f(r.u_wind_min,this.windData.uMin,this.windData.vMin),n.uniform2f(r.u_wind_max,this.windData.uMax,this.windData.vMax),n.uniform1f(r.u_speed_factor,this.speedFactor),n.uniform1f(r.u_drop_rate,this.dropRate),n.uniform1f(r.u_drop_rate_bump,this.dropRateBump),n.drawArrays(n.TRIANGLES,0,6);var t=this.particleStateTexture0;this.particleStateTexture0=this.particleStateTexture1,this.particleStateTexture1=t,Sp(n,null,null)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.quadBuffer),this.gl.deleteBuffer(this.particleIndexBuffer),this.gl.deleteFramebuffer(this.framebuffer),this.gl.deleteShader(this.drawProgram.vertexShader),this.gl.deleteShader(this.drawProgram.fragmentShader),this.gl.deleteProgram(this.drawProgram),this.gl.deleteShader(this.fullScreenProgram.vertexShader),this.gl.deleteShader(this.fullScreenProgram.fragmentShader),this.gl.deleteProgram(this.fullScreenProgram),this.gl.deleteShader(this.updateProgram.vertexShader),this.gl.deleteShader(this.updateProgram.fragmentShader),this.gl.deleteProgram(this.updateProgram),this.gl.deleteTexture(this.colorRampTexture),this.gl.deleteTexture(this.backgroundTexture),this.gl.deleteTexture(this.screenTexture),this.gl.deleteTexture(this.particleStateTexture0),this.gl.deleteTexture(this.particleStateTexture1),this.gl.deleteTexture(this.windTexture)}}]),a}();function Td(a){var s=rp();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function rp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var t0=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,F0=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Nv={0:"#3288bd",.1:"#66c2a5",.2:"#abdda4",.3:"#e6f598",.4:"#fee08b",.5:"#fdae61",.6:"#f46d43",1:"#d53e4f"},B0=function(a){(0,kr.Z)(n,a);var s=Td(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"sizeScale",.5),(0,bt.Z)((0,or.Z)(r),"frequency",new tt.iH(7.2)),r}return(0,Nr.Z)(n,[{key:"render",value:function(){var t=this;this.frequency.run(function(){t.drawWind()}),this.drawColorMode()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z=this,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn,ci,Zi,zi,pa,_o,wo,Ba,ms,au,Al,nd,Ih,Rh,md,hh,tp,Fv,Gp;return fe().wrap(function(Dp){for(;;)switch(Dp.prev=Dp.next){case 0:return de=this.layer.getLayerConfig(),be=de.uMin,it=be===void 0?-21.32:be,nt=de.uMax,Kt=nt===void 0?26.8:nt,tr=de.vMin,Ir=tr===void 0?-21.57:tr,jr=de.vMax,on=jr===void 0?21.42:jr,tn=de.fadeOpacity,Yn=tn===void 0?.996:tn,ci=de.speedFactor,Zi=ci===void 0?.25:ci,zi=de.dropRate,pa=zi===void 0?.003:zi,_o=de.dropRateBump,wo=_o===void 0?.01:_o,Ba=de.rampColors,ms=Ba===void 0?Nv:Ba,au=de.sizeScale,Al=au===void 0?.5:au,nd=de.mask,Ih=nd===void 0?!1:nd,Rh=de.maskInside,md=Rh===void 0?!0:Rh,hh=this.rendererService.createTexture2D,tp=this.layer.getSource(),this.texture=hh({height:0,width:0}),this.cacheZoom=Math.floor(this.mapService.getZoom()),Fv=this.rendererService.getGLContext(),this.imageCoords=(u=tp.data)===null||u===void 0?void 0:u.dataArray[0].coordinates,(d=tp.data)===null||d===void 0||(S=d.images)===null||S===void 0||S.then(function(Zh){var Ld;z.sizeScale=Al*z.getZoomScale();var Em=z.getWindSize(),Sm=Em.imageWidth,vu=Em.imageHeight,Vc={glContext:Fv,imageWidth:Sm,imageHeight:vu,fadeOpacity:Yn,speedFactor:Zi,dropRate:pa,dropRateBump:wo,rampColors:ms};z.wind=new xp(Vc),z.wind.setWind({uMin:it,uMax:Kt,vMin:Ir,vMax:on,image:Zh[0]}),(Ld=z.texture)===null||Ld===void 0||Ld.destroy(),z.texture=hh({width:Sm,height:vu}),z.layerService.reRender()}),Dp.next=10,this.layer.buildLayerModel({moduleName:"wind",vertexShader:F0,fragmentShader:t0,triangulation:Qo,primitive:Te.gl.TRIANGLES,depth:{enable:!1},stencil:(0,tt.Vi)(Ih,md),blend:this.getBlend()});case 10:return Gp=Dp.sent,this.colorModel=Gp,Dp.abrupt("return",[Gp]);case 13:case"end":return Dp.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getWindSize",value:function(){var t=this.mapService.lngLatToPixel(this.imageCoords[0]),o=this.mapService.lngLatToPixel(this.imageCoords[1]),u=Math.min(Math.floor((o.x-t.x)*this.sizeScale),2048),d=Math.min(Math.floor((t.y-o.y)*this.sizeScale),2048);return{imageWidth:u,imageHeight:d}}},{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.wind)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Te.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}},{key:"getZoomScale",value:function(){return Math.min((this.cacheZoom+4)/30*2,2)}},{key:"drawWind",value:function(){if(this.wind){var t=this.layer.getLayerConfig(),o=t.uMin,u=o===void 0?-21.32:o,d=t.uMax,S=d===void 0?26.8:d,z=t.vMin,de=z===void 0?-21.57:z,be=t.vMax,it=be===void 0?21.42:be,nt=t.numParticles,Kt=nt===void 0?65535:nt,tr=t.fadeOpacity,Ir=tr===void 0?.996:tr,jr=t.speedFactor,on=jr===void 0?.25:jr,tn=t.dropRate,Yn=tn===void 0?.003:tn,ci=t.dropRateBump,Zi=ci===void 0?.01:ci,zi=t.rampColors,pa=zi===void 0?Nv:zi,_o=t.sizeScale,wo=_o===void 0?.5:_o,Ba=Kt,ms=Math.floor(this.mapService.getZoom());if(typeof wo=="number"&&wo!==this.sizeScale||ms!==this.cacheZoom){var au=this.getZoomScale();this.sizeScale=wo,Ba*=au;var Al=this.getWindSize(),nd=Al.imageWidth,Ih=Al.imageHeight;this.wind.reSize(nd,Ih),this.cacheZoom=ms}this.wind.updateWindDir(u,S,de,it),this.wind.updateParticelNum(Ba),this.wind.updateColorRampTexture(pa),this.wind.fadeOpacity=Ir,this.wind.speedFactor=on,this.wind.dropRate=Yn,this.wind.dropRateBump=Zi;var Rh=this.wind.draw(),md=Rh.d,hh=Rh.w,tp=Rh.h;this.rendererService.setBaseState(),this.texture.update({data:md,width:hh,height:tp})}}},{key:"drawColorMode",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),this.layerService.renderMask(this.layer.masks),(t=this.colorModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_texture:this.texture}}),this.layer.hooks.afterRender.call()}}]),n}(nu),lv={wind:B0},N0=lv;function Jd(a){var s=Qs();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Qs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var np=function(a){(0,kr.Z)(n,a);var s=Jd(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","WindLayer"),r}return(0,Nr.Z)(n,[{key:"buildModels",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new N0[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"renderModels",value:function(){return this.layerModel&&this.layerModel.render(),this}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={wind:{}};return o[t]}},{key:"getModelType",value:function(){return"wind"}}]),n}(eu),Xd,ip,zv,of,Zp,ap,Pp,cv=(Xd=(0,ba.b2)(),ip=(0,ba.f3)(Te.vK.IMapService),zv=(0,ba.f3)(Te.vK.IFontService),Xd(of=(Zp=function(){function a(){(0,Cr.Z)(this,a),(0,Ul.Z)(this,"mapService",ap,this),(0,Ul.Z)(this,"fontService",Pp,this)}return(0,Nr.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("DataMappingPlugin",(0,ft.Z)(fe().mark(function u(){return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:n.log(Te.Or.MappingStart,Te.KD.INIT),t.generateMaping(n,{styleAttributeService:o}),n.log(Te.Or.MappingEnd,Te.KD.INIT);case 3:case"end":return S.stop()}},u)}))),n.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var u=(0,ft.Z)(fe().mark(function d(S){var z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(S){be.next=2;break}return be.abrupt("return",S);case 2:return n.dataState.dataMappingNeedUpdate=!1,n.log(Te.Or.MappingStart,Te.KD.UPDATE),z=t.generateMaping(n,{styleAttributeService:o}),n.log(Te.Or.MappingEnd,Te.KD.UPDATE),be.abrupt("return",z);case 7:case"end":return be.stop()}},d)}));return function(d){return u.apply(this,arguments)}}()),n.hooks.beforeRender.tap("DataMappingPlugin",function(){var u=n.getSource();if(!(n.layerModelNeedUpdate||!u||!u.inited)){var d=o.getLayerStyleAttributes()||[],S=o.getLayerStyleAttribute("filter"),z=u.data.dataArray;if(!(Array.isArray(z)&&z.length===0)){var de=d.filter(function(nt){return nt.needRemapping}),be=z;if(S!=null&&S.needRemapping&&S!==null&&S!==void 0&&S.scale&&(be=z.filter(function(nt){return t.applyAttributeMapping(S,nt)[0]})),de.length){var it=t.mapping(n,de,be,n.getEncodedData());n.setEncodedData(it)}}}})}},{key:"generateMaping",value:function(n,r){var t=this,o=r.styleAttributeService,u=o.getLayerStyleAttributes()||[],d=o.getLayerStyleAttribute("filter"),S=n.getSource().data.dataArray,z=S;d!=null&&d.scale&&(z=S.filter(function(be){return t.applyAttributeMapping(d,be)[0]})),z=n.processData(z);var de=this.mapping(n,u,z,void 0);return n.setEncodedData(de),S.length===0&&n.encodeDataLength===0?!1:(n.emit("dataUpdate",null),!0)}},{key:"mapping",value:function(n,r,t,o){var u=this,d=n.getLayerConfig(),S=d.arrow,z=S===void 0?{enable:!1}:S,de=r.filter(function(it){return it.scale!==void 0}).filter(function(it){return it.name!=="filter"}),be=t.map(function(it,nt){var Kt=o?o[nt]:{},tr=(0,ge.Z)({id:it._id,coordinates:it.coordinates},Kt);if(de.forEach(function(on){var tn=u.applyAttributeMapping(on,it);on.name==="color"&&(tn=tn.map(function(Yn){return(0,tt.CI)(Yn)})),tr[on.name]=Array.isArray(tn)&&tn.length===1?tn[0]:tn,on.name==="shape"&&(tr.shape=u.fontService.getIconFontKey(tr[on.name]))}),z.enable&&(tr.shape==="line"||tr.shape==="halfLine")){var Ir=tr.coordinates;if(n.arrowInsertCount<n.encodeDataLength){var jr=u.getArrowPoints(Ir[0],Ir[1]);tr.coordinates.splice(1,0,jr,jr),n.arrowInsertCount++}}return tr});return r.forEach(function(it){it.needRemapping=!1}),this.adjustData2Amap2Coordinates(be,n),this.adjustData2SimpleCoordinates(be),be}},{key:"adjustData2Amap2Coordinates",value:function(n,r){var t=this;if(n.length>0&&this.mapService.version===fl.G["GAODE2.x"]){var o=r.coordCenter||r.getSource().center;typeof n[0].coordinates[0]=="number"?n.filter(function(u){return!u.originCoordinates}).map(function(u){u.version=fl.G["GAODE2.x"],u.originCoordinates=(0,ht.cloneDeep)(u.coordinates),u.coordinates=t.mapService.lngLatToCoordByLayer(u.coordinates,o)}):n.filter(function(u){return!u.originCoordinates}).map(function(u){u.version=fl.G["GAODE2.x"],u.originCoordinates=(0,ht.cloneDeep)(u.coordinates),u.coordinates=t.mapService.lngLatToCoordsByLayer(u.coordinates,o)})}}},{key:"adjustData2SimpleCoordinates",value:function(n){var r=this;n.length>0&&this.mapService.version===fl.G.SIMPLE&&n.map(function(t){t.simpleCoordinate||(t.coordinates=r.unProjectCoordinates(t.coordinates),t.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(n){var r=this;if(typeof n[0]=="number")return this.mapService.simpleMapCoord.unproject(n);if(n[0]&&n[0][0]instanceof Array){var t=[];return n.map(function(u){var d=[];u.map(function(S){d.push(r.mapService.simpleMapCoord.unproject(S))}),t.push(d)}),t}else{var o=[];return n.map(function(u){o.push(r.mapService.simpleMapCoord.unproject(u))}),o}}},{key:"applyAttributeMapping",value:function(n,r){var t;if(!n.scale)return[];var o=(n==null||(t=n.scale)===null||t===void 0?void 0:t.scalers)||[],u=[];o.forEach(function(S){var z,de=S.field;(r.hasOwnProperty(de)||((z=n.scale)===null||z===void 0?void 0:z.type)==="variable")&&u.push(r[de])});var d=n.mapping?n.mapping(u):[];return d}},{key:"getArrowPoints",value:function(n,r){var t=[r[0]-n[0],r[1]-n[1]],o=(0,tt.Fv)(t),u=[n[0]+o[0]*1e-4,n[1]+o[1]*1e-4];return u}}]),a}(),ap=(0,Rl.Z)(Zp.prototype,"mapService",[ip],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pp=(0,Rl.Z)(Zp.prototype,"fontService",[zv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zp))||of),fv,hv,r0=(fv=(0,ba.b2)(),fv(hv=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n){var r=this;this.mapService=n.getContainer().get(Te.vK.IMapService),n.hooks.init.tapPromise("DataSourcePlugin",(0,ft.Z)(fe().mark(function t(){var o,u,d,S;return fe().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(n.log(Te.Or.SourceInitStart,Te.KD.INIT),o=n.getSource(),o||(u=n.sourceOption||n.defaultSourceConfig,d=u.data,S=u.options,o=new Ko(d,S),n.setSource(o)),!o.inited){de.next=8;break}r.updateClusterData(n),n.log(Te.Or.SourceInitEnd,Te.KD.INIT),de.next=10;break;case 8:return de.next=10,new Promise(function(be){o.on("update",function(it){it.type==="inited"&&(r.updateClusterData(n),n.log(Te.Or.SourceInitEnd,Te.KD.INIT)),be(null)})});case 10:case"end":return de.stop()}},t)}))),n.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,ft.Z)(fe().mark(function t(){var o,u,d;return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return o=r.updateClusterData(n),u=n.dataState.dataSourceNeedUpdate,n.dataState.dataSourceNeedUpdate=!1,d=o||u,z.abrupt("return",d);case 5:case"end":return z.stop()}},t)})))}},{key:"updateClusterData",value:function(n){if(n.isTileLayer||n.tileLayer||!n.getSource())return!1;var r=n.getSource(),t=r.cluster,o=r.clusterOptions.zoom,u=o===void 0?0:o,d=this.mapService.getZoom()-1,S=n.dataState.dataSourceNeedUpdate;return t&&S&&r.updateClusterData(Math.floor(d)),t&&Math.abs(n.clusterZoom-d)>=1?(u!==Math.floor(d)&&r.updateClusterData(Math.floor(d)),n.clusterZoom=d,!0):!1}}]),a}())||hv);function Zv(a,s){return a<s?-1:a>s?1:a>=s?0:NaN}function Wp(a){return a.length===1&&(a=z0(a)),{left:function(s,n,r,t){for(r==null&&(r=0),t==null&&(t=s.length);r<t;){var o=r+t>>>1;a(s[o],n)<0?r=o+1:t=o}return r},right:function(s,n,r,t){for(r==null&&(r=0),t==null&&(t=s.length);r<t;){var o=r+t>>>1;a(s[o],n)>0?t=o:r=o+1}return r}}}function z0(a){return function(s,n){return Zv(a(s),n)}}var n0=Wp(Zv),Z0=n0.right,U0=n0.left,dv=Z0;function zd(a,s){var n=a.length,r=-1,t,o,u;if(s==null){for(;++r<n;)if((t=a[r])!=null&&t>=t)for(o=u=t;++r<n;)(t=a[r])!=null&&(o>t&&(o=t),u<t&&(u=t))}else for(;++r<n;)if((t=s(a[r],r,a))!=null&&t>=t)for(o=u=t;++r<n;)(t=s(a[r],r,a))!=null&&(o>t&&(o=t),u<t&&(u=t));return[o,u]}var pv=Array.prototype,Uv=pv.slice,wp=pv.map,vv=Math.sqrt(50),$v=Math.sqrt(10),bp=Math.sqrt(2);function Op(a,s,n){var r,t=-1,o,u,d;if(s=+s,a=+a,n=+n,a===s&&n>0)return[a];if((r=s<a)&&(o=a,a=s,s=o),(d=ch(a,s,n))===0||!isFinite(d))return[];if(d>0)for(a=Math.ceil(a/d),s=Math.floor(s/d),u=new Array(o=Math.ceil(s-a+1));++t<o;)u[t]=(a+t)*d;else for(a=Math.floor(a*d),s=Math.ceil(s*d),u=new Array(o=Math.ceil(a-s+1));++t<o;)u[t]=(a-t)/d;return r&&u.reverse(),u}function ch(a,s,n){var r=(s-a)/Math.max(0,n),t=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,t);return t>=0?(o>=vv?10:o>=$v?5:o>=bp?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(o>=vv?10:o>=$v?5:o>=bp?2:1)}function Xh(a,s,n){var r=Math.abs(s-a)/Math.max(0,n),t=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/t;return o>=vv?t*=10:o>=$v?t*=5:o>=bp&&(t*=2),s<a?-t:t}function mv(){var a=identity,s=extent,n=sturges;function r(t){var o,u=t.length,d,S=new Array(u);for(o=0;o<u;++o)S[o]=a(t[o],o,t);var z=s(S),de=z[0],be=z[1],it=n(S,de,be);Array.isArray(it)||(it=tickStep(de,be,it),it=range(Math.ceil(de/it)*it,be,it));for(var nt=it.length;it[0]<=de;)it.shift(),--nt;for(;it[nt-1]>be;)it.pop(),--nt;var Kt=new Array(nt+1),tr;for(o=0;o<=nt;++o)tr=Kt[o]=[],tr.x0=o>0?it[o-1]:de,tr.x1=o<nt?it[o]:be;for(o=0;o<u;++o)d=S[o],de<=d&&d<=be&&Kt[bisect(it,d,0,nt)].push(t[o]);return Kt}return r.value=function(t){return arguments.length?(a=typeof t=="function"?t:constant(t),r):a},r.domain=function(t){return arguments.length?(s=typeof t=="function"?t:constant([t[0],t[1]]),r):s},r.thresholds=function(t){return arguments.length?(n=typeof t=="function"?t:Array.isArray(t)?constant(slice.call(t)):constant(t),r):n},r}function Cm(a,s,n){return a=map.call(a,number).sort(ascending),Math.ceil((n-s)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function $0(a){return a===null?NaN:+a}function i0(a,s,n){if(n==null&&(n=$0),!!(r=a.length)){if((s=+s)<=0||r<2)return+n(a[0],0,a);if(s>=1)return+n(a[r-1],r-1,a);var r,t=(r-1)*s,o=Math.floor(t),u=+n(a[o],o,a),d=+n(a[o+1],o+1,a);return u+(d-u)*(t-o)}}function jv(a,s,n,r,t){var o=a*a,u=o*a;return((1-3*a+3*o-u)*s+(4-6*o+3*u)*n+(1+3*a+3*o-3*u)*r+u*t)/6}function gv(a){var s=a.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,s-1):Math.floor(n*s),t=a[r],o=a[r+1],u=r>0?a[r-1]:2*t-o,d=r<s-1?a[r+2]:2*o-t;return jv((n-r/s)*s,u,t,o,d)}}function a0(a){var s=a.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*s),t=a[(r+s-1)%s],o=a[r%s],u=a[(r+1)%s],d=a[(r+2)%s];return jv((n-r/s)*s,t,o,u,d)}}function op(a){return function(){return a}}function o0(a,s){return function(n){return a+n*s}}function s0(a,s,n){return a=Math.pow(a,n),s=Math.pow(s,n)-a,n=1/n,function(r){return Math.pow(a+r*s,n)}}function j0(a,s){var n=s-a;return n?o0(a,n>180||n<-180?n-360*Math.round(n/360):n):constant(isNaN(a)?s:a)}function Hv(a){return(a=+a)==1?yv:function(s,n){return n-s?s0(s,n,a):op(isNaN(s)?n:s)}}function yv(a,s){var n=s-a;return n?o0(a,n):op(isNaN(a)?s:a)}var u0=function a(s){var n=Hv(s);function r(t,o){var u=n((t=(0,Pl.B8)(t)).r,(o=(0,Pl.B8)(o)).r),d=n(t.g,o.g),S=n(t.b,o.b),z=yv(t.opacity,o.opacity);return function(de){return t.r=u(de),t.g=d(de),t.b=S(de),t.opacity=z(de),t+""}}return r.gamma=a,r}(1);function l0(a){return function(s){var n=s.length,r=new Array(n),t=new Array(n),o=new Array(n),u,d;for(u=0;u<n;++u)d=(0,Pl.B8)(s[u]),r[u]=d.r||0,t[u]=d.g||0,o[u]=d.b||0;return r=a(r),t=a(t),o=a(o),d.opacity=1,function(S){return d.r=r(S),d.g=t(S),d.b=o(S),d+""}}}var c0=l0(gv),H0=l0(a0),Ol="$";function _v(){}_v.prototype=xv.prototype={constructor:_v,has:function(a){return Ol+a in this},get:function(a){return this[Ol+a]},set:function(a,s){return this[Ol+a]=s,this},remove:function(a){var s=Ol+a;return s in this&&delete this[s]},clear:function(){for(var a in this)a[0]===Ol&&delete this[a]},keys:function(){var a=[];for(var s in this)s[0]===Ol&&a.push(s.slice(1));return a},values:function(){var a=[];for(var s in this)s[0]===Ol&&a.push(this[s]);return a},entries:function(){var a=[];for(var s in this)s[0]===Ol&&a.push({key:s.slice(1),value:this[s]});return a},size:function(){var a=0;for(var s in this)s[0]===Ol&&++a;return a},empty:function(){for(var a in this)if(a[0]===Ol)return!1;return!0},each:function(a){for(var s in this)s[0]===Ol&&a(this[s],s.slice(1),this)}};function xv(a,s){var n=new _v;if(a instanceof _v)a.each(function(d,S){n.set(S,d)});else if(Array.isArray(a)){var r=-1,t=a.length,o;if(s==null)for(;++r<t;)n.set(r,a[r]);else for(;++r<t;)n.set(s(o=a[r],r,a),o)}else if(a)for(var u in a)n.set(u,a[u]);return n}var Xp=xv;function Vv(){var a=[],s=[],n,r,t;function o(d,S,z,de){if(S>=a.length)return n!=null&&d.sort(n),r!=null?r(d):d;for(var be=-1,it=d.length,nt=a[S++],Kt,tr,Ir=map(),jr,on=z();++be<it;)(jr=Ir.get(Kt=nt(tr=d[be])+""))?jr.push(tr):Ir.set(Kt,[tr]);return Ir.each(function(tn,Yn){de(on,Yn,o(tn,S,z,de))}),on}function u(d,S){if(++S>a.length)return d;var z,de=s[S-1];return r!=null&&S>=a.length?z=d.entries():(z=[],d.each(function(be,it){z.push({key:it,values:u(be,S)})})),de!=null?z.sort(function(be,it){return de(be.key,it.key)}):z}return t={object:function(d){return o(d,0,V0,f0)},map:function(d){return o(d,0,bv,h0)},entries:function(d){return u(o(d,0,bv,h0),0)},key:function(d){return a.push(d),t},sortKeys:function(d){return s[a.length-1]=d,t},sortValues:function(d){return n=d,t},rollup:function(d){return r=d,t}}}function V0(){return{}}function f0(a,s,n){a[s]=n}function bv(){return map()}function h0(a,s,n){a.set(s,n)}function Ev(){}var Up=Xp.prototype;Ev.prototype=Am.prototype={constructor:Ev,has:Up.has,add:function(a){return a+="",this[Ol+a]=a,this},remove:Up.remove,clear:Up.clear,values:Up.keys,size:Up.size,empty:Up.empty,each:Up.each};function Am(a,s){var n=new Ev;if(a instanceof Ev)a.each(function(o){n.add(o)});else if(a){var r=-1,t=a.length;if(s==null)for(;++r<t;)n.add(a[r]);else for(;++r<t;)n.add(s(a[r],r,a))}return n}var Tm=null,lp=Array.prototype,Sv=lp.map,Cp=lp.slice;function Kd(a,s){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(s).domain(a);break}return this}function Kp(a,s){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(s).domain(a);break}return this}var Ap={name:"implicit"};function G0(){var a=Xp(),s=[],n=[],r=Ap;function t(o){var u=o+"",d=a.get(u);if(!d){if(r!==Ap)return r;a.set(u,d=s.push(o))}return n[(d-1)%n.length]}return t.domain=function(o){if(!arguments.length)return s.slice();s=[],a=Xp();for(var u=-1,d=o.length,S,z;++u<d;)a.has(z=(S=o[u])+"")||a.set(z,s.push(S));return t},t.range=function(o){return arguments.length?(n=Cp.call(o),t):n.slice()},t.unknown=function(o){return arguments.length?(r=o,t):r},t.copy=function(){return G0(s,n).unknown(r)},Kd.apply(t,arguments),t}function mg(){var a=ordinal().unknown(void 0),s=a.domain,n=a.range,r=[0,1],t,o,u=!1,d=0,S=0,z=.5;delete a.unknown;function de(){var be=s().length,it=r[1]<r[0],nt=r[it-0],Kt=r[1-it];t=(Kt-nt)/Math.max(1,be-d+S*2),u&&(t=Math.floor(t)),nt+=(Kt-nt-t*(be-d))*z,o=t*(1-d),u&&(nt=Math.round(nt),o=Math.round(o));var tr=sequence(be).map(function(Ir){return nt+t*Ir});return n(it?tr.reverse():tr)}return a.domain=function(be){return arguments.length?(s(be),de()):s()},a.range=function(be){return arguments.length?(r=[+be[0],+be[1]],de()):r.slice()},a.rangeRound=function(be){return r=[+be[0],+be[1]],u=!0,de()},a.bandwidth=function(){return o},a.step=function(){return t},a.round=function(be){return arguments.length?(u=!!be,de()):u},a.padding=function(be){return arguments.length?(d=Math.min(1,S=+be),de()):d},a.paddingInner=function(be){return arguments.length?(d=Math.min(1,be),de()):d},a.paddingOuter=function(be){return arguments.length?(S=+be,de()):S},a.align=function(be){return arguments.length?(z=Math.max(0,Math.min(1,be)),de()):z},a.copy=function(){return mg(s(),r).round(u).paddingInner(d).paddingOuter(S).align(z)},initRange.apply(de(),arguments)}function gg(a){var s=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return gg(s())},a}function py(){return gg(mg.apply(null,arguments).paddingInner(1))}function M_(a,s){return(isNumberArray(s)?numberArray:W0)(a,s)}function W0(a,s){var n=s?s.length:0,r=a?Math.min(n,a.length):0,t=new Array(r),o=new Array(n),u;for(u=0;u<r;++u)t[u]=Ip(a[u],s[u]);for(;u<n;++u)o[u]=s[u];return function(d){for(u=0;u<r;++u)o[u]=t[u](d);return o}}function d0(a,s){var n=new Date;return a=+a,s=+s,function(r){return n.setTime(a*(1-r)+s*r),n}}function wv(a,s){return a=+a,s=+s,function(n){return a*(1-n)+s*n}}function p0(a,s){var n={},r={},t;(a===null||typeof a!="object")&&(a={}),(s===null||typeof s!="object")&&(s={});for(t in s)t in a?n[t]=Ip(a[t],s[t]):r[t]=s[t];return function(o){for(t in n)r[t]=n[t](o);return r}}var Mm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pm=new RegExp(Mm.source,"g");function vy(a){return function(){return a}}function gy(a){return function(s){return a(s)+""}}function v0(a,s){var n=Mm.lastIndex=Pm.lastIndex=0,r,t,o,u=-1,d=[],S=[];for(a=a+"",s=s+"";(r=Mm.exec(a))&&(t=Pm.exec(s));)(o=t.index)>n&&(o=s.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(r=r[0])===(t=t[0])?d[u]?d[u]+=t:d[++u]=t:(d[++u]=null,S.push({i:u,x:wv(r,t)})),n=Pm.lastIndex;return n<s.length&&(o=s.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?S[0]?gy(S[0].x):vy(s):(s=S.length,function(z){for(var de=0,be;de<s;++de)d[(be=S[de]).i]=be.x(z);return d.join("")})}function m0(a,s){s||(s=[]);var n=a?Math.min(s.length,a.length):0,r=s.slice(),t;return function(o){for(t=0;t<n;++t)r[t]=a[t]*(1-o)+s[t]*o;return r}}function g0(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Ip(a,s){var n=typeof s,r;return s==null||n==="boolean"?op(s):(n==="number"?wv:n==="string"?(r=(0,Pl.ZP)(s))?(s=r,u0):v0:s instanceof Pl.ZP?u0:s instanceof Date?d0:g0(s)?m0:Array.isArray(s)?W0:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?p0:wv)(a,s)}function $p(a,s){return a=+a,s=+s,function(n){return Math.round(a*(1-n)+s*n)}}function Cv(a){return function(){return a}}function Av(a){return+a}var y0=[0,1];function Id(a){return a}function Rp(a,s){return(s-=a=+a)?function(n){return(n-a)/s}:Cv(isNaN(s)?NaN:.5)}function Om(a){var s=a[0],n=a[a.length-1],r;return s>n&&(r=s,s=n,n=r),function(t){return Math.max(s,Math.min(n,t))}}function Zd(a,s,n){var r=a[0],t=a[1],o=s[0],u=s[1];return t<r?(r=Rp(t,r),o=n(u,o)):(r=Rp(r,t),o=n(o,u)),function(d){return o(r(d))}}function Gv(a,s,n){var r=Math.min(a.length,s.length)-1,t=new Array(r),o=new Array(r),u=-1;for(a[r]<a[0]&&(a=a.slice().reverse(),s=s.slice().reverse());++u<r;)t[u]=Rp(a[u],a[u+1]),o[u]=n(s[u],s[u+1]);return function(d){var S=dv(a,d,1,r)-1;return o[S](t[S](d))}}function Wv(a,s){return s.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function X0(){var a=y0,s=y0,n=Ip,r,t,o,u=Id,d,S,z;function de(){return d=Math.min(a.length,s.length)>2?Gv:Zd,S=z=null,be}function be(it){return isNaN(it=+it)?o:(S||(S=d(a.map(r),s,n)))(r(u(it)))}return be.invert=function(it){return u(t((z||(z=d(s,a.map(r),wv)))(it)))},be.domain=function(it){return arguments.length?(a=Sv.call(it,Av),u===Id||(u=Om(a)),de()):a.slice()},be.range=function(it){return arguments.length?(s=Cp.call(it),de()):s.slice()},be.rangeRound=function(it){return s=Cp.call(it),n=$p,de()},be.clamp=function(it){return arguments.length?(u=it?Om(a):Id,be):u!==Id},be.interpolate=function(it){return arguments.length?(n=it,de()):n},be.unknown=function(it){return arguments.length?(o=it,be):o},function(it,nt){return r=it,t=nt,de()}}function yg(a,s){return X0()(a,s)}var Yp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qp(a){if(!(s=Yp.exec(a)))throw new Error("invalid format: "+a);var s;return new hd({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}qp.prototype=hd.prototype;function hd(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}hd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function K0(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function Tv(a,s){if((n=(a=s?a.toExponential(s-1):a.toExponential()).indexOf("e"))<0)return null;var n,r=a.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+a.slice(n+1)]}function jp(a){return a=Tv(Math.abs(a)),a?a[1]:NaN}function _g(a,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jp(s)/3)))*3-jp(Math.abs(a)))}function xg(a,s){return function(n,r){for(var t=n.length,o=[],u=0,d=a[0],S=0;t>0&&d>0&&(S+d+1>r&&(d=Math.max(1,r-S)),o.push(n.substring(t-=d,t+d)),!((S+=d+1)>r));)d=a[u=(u+1)%a.length];return o.reverse().join(s)}}function Im(a){return function(s){return s.replace(/[0-9]/g,function(n){return a[+n]})}}function Rm(a){e:for(var s=a.length,n=1,r=-1,t;n<s;++n)switch(a[n]){case".":r=t=n;break;case"0":r===0&&(r=n),t=n;break;default:if(!+a[n])break e;r>0&&(r=0);break}return r>0?a.slice(0,r)+a.slice(t+1):a}var Y0;function Lm(a,s){var n=Tv(a,s);if(!n)return a+"";var r=n[0],t=n[1],o=t-(Y0=Math.max(-8,Math.min(8,Math.floor(t/3)))*3)+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Tv(a,Math.max(0,s+o-1))[0]}function _0(a,s){var n=Tv(a,s);if(!n)return a+"";var r=n[0],t=n[1];return t<0?"0."+new Array(-t).join("0")+r:r.length>t+1?r.slice(0,t+1)+"."+r.slice(t+1):r+new Array(t-r.length+2).join("0")}var x0={"%":function(a,s){return(a*100).toFixed(s)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:K0,e:function(a,s){return a.toExponential(s)},f:function(a,s){return a.toFixed(s)},g:function(a,s){return a.toPrecision(s)},o:function(a){return Math.round(a).toString(8)},p:function(a,s){return _0(a*100,s)},r:_0,s:Lm,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function km(a){return a}var bg=Array.prototype.map,Eg=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Qp(a){var s=a.grouping===void 0||a.thousands===void 0?km:xg(bg.call(a.grouping,Number),a.thousands+""),n=a.currency===void 0?"":a.currency[0]+"",r=a.currency===void 0?"":a.currency[1]+"",t=a.decimal===void 0?".":a.decimal+"",o=a.numerals===void 0?km:Im(bg.call(a.numerals,String)),u=a.percent===void 0?"%":a.percent+"",d=a.minus===void 0?"-":a.minus+"",S=a.nan===void 0?"NaN":a.nan+"";function z(be){be=qp(be);var it=be.fill,nt=be.align,Kt=be.sign,tr=be.symbol,Ir=be.zero,jr=be.width,on=be.comma,tn=be.precision,Yn=be.trim,ci=be.type;ci==="n"?(on=!0,ci="g"):x0[ci]||(tn===void 0&&(tn=12),Yn=!0,ci="g"),(Ir||it==="0"&&nt==="=")&&(Ir=!0,it="0",nt="=");var Zi=tr==="$"?n:tr==="#"&&/[boxX]/.test(ci)?"0"+ci.toLowerCase():"",zi=tr==="$"?r:/[%p]/.test(ci)?u:"",pa=x0[ci],_o=/[defgprs%]/.test(ci);tn=tn===void 0?6:/[gprs]/.test(ci)?Math.max(1,Math.min(21,tn)):Math.max(0,Math.min(20,tn));function wo(Ba){var ms=Zi,au=zi,Al,nd,Ih;if(ci==="c")au=pa(Ba)+au,Ba="";else{Ba=+Ba;var Rh=Ba<0||1/Ba<0;if(Ba=isNaN(Ba)?S:pa(Math.abs(Ba),tn),Yn&&(Ba=Rm(Ba)),Rh&&+Ba==0&&Kt!=="+"&&(Rh=!1),ms=(Rh?Kt==="("?Kt:d:Kt==="-"||Kt==="("?"":Kt)+ms,au=(ci==="s"?Eg[8+Y0/3]:"")+au+(Rh&&Kt==="("?")":""),_o){for(Al=-1,nd=Ba.length;++Al<nd;)if(Ih=Ba.charCodeAt(Al),48>Ih||Ih>57){au=(Ih===46?t+Ba.slice(Al+1):Ba.slice(Al))+au,Ba=Ba.slice(0,Al);break}}}on&&!Ir&&(Ba=s(Ba,1/0));var md=ms.length+Ba.length+au.length,hh=md<jr?new Array(jr-md+1).join(it):"";switch(on&&Ir&&(Ba=s(hh+Ba,hh.length?jr-au.length:1/0),hh=""),nt){case"<":Ba=ms+Ba+au+hh;break;case"=":Ba=ms+hh+Ba+au;break;case"^":Ba=hh.slice(0,md=hh.length>>1)+ms+Ba+au+hh.slice(md);break;default:Ba=hh+ms+Ba+au;break}return o(Ba)}return wo.toString=function(){return be+""},wo}function de(be,it){var nt=z((be=qp(be),be.type="f",be)),Kt=Math.max(-8,Math.min(8,Math.floor(jp(it)/3)))*3,tr=Math.pow(10,-Kt),Ir=Eg[8+Kt/3];return function(jr){return nt(tr*jr)+Ir}}return{format:z,formatPrefix:de}}var b0,q0,Dm;Sg({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Sg(a){return b0=Qp(a),q0=b0.format,Dm=b0.formatPrefix,b0}function wg(a,s){return a=Math.abs(a),s=Math.abs(s)-a,Math.max(0,jp(s)-jp(a))+1}function Cg(a){return Math.max(0,-jp(Math.abs(a)))}function Q0(a,s,n,r){var t=Xh(a,s,n),o;switch(r=qp(r==null?",f":r),r.type){case"s":{var u=Math.max(Math.abs(a),Math.abs(s));return r.precision==null&&!isNaN(o=_g(t,u))&&(r.precision=o),Dm(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=wg(t,Math.max(Math.abs(a),Math.abs(s))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Cg(t))&&(r.precision=o-(r.type==="%")*2);break}}return q0(r)}function Mv(a){var s=a.domain;return a.ticks=function(n){var r=s();return Op(r[0],r[r.length-1],n==null?10:n)},a.tickFormat=function(n,r){var t=s();return Q0(t[0],t[t.length-1],n==null?10:n,r)},a.nice=function(n){n==null&&(n=10);var r=s(),t=0,o=r.length-1,u=r[t],d=r[o],S;return d<u&&(S=u,u=d,d=S,S=t,t=o,o=S),S=ch(u,d,n),S>0?(u=Math.floor(u/S)*S,d=Math.ceil(d/S)*S,S=ch(u,d,n)):S<0&&(u=Math.ceil(u*S)/S,d=Math.floor(d*S)/S,S=ch(u,d,n)),S>0?(r[t]=Math.floor(u/S)*S,r[o]=Math.ceil(d/S)*S,s(r)):S<0&&(r[t]=Math.ceil(u*S)/S,r[o]=Math.floor(d*S)/S,s(r)),a},a}function J0(){var a=yg(Id,Id);return a.copy=function(){return Wv(a,J0())},Kd.apply(a,arguments),Mv(a)}function Ag(a){var s;function n(r){return isNaN(r=+r)?s:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(a=map.call(r,number),n):a.slice()},n.unknown=function(r){return arguments.length?(s=r,n):s},n.copy=function(){return Ag(a).unknown(s)},a=arguments.length?map.call(a,number):[0,1],linearish(n)}function Fm(a,s){a=a.slice();var n=0,r=a.length-1,t=a[n],o=a[r],u;return o<t&&(u=n,n=r,r=u,u=t,t=o,o=u),a[n]=s.floor(t),a[r]=s.ceil(o),a}function Bm(a){return Math.log(a)}function Nm(a){return Math.exp(a)}function zm(a){return-Math.log(-a)}function Tg(a){return-Math.exp(-a)}function Mg(a){return isFinite(a)?+("1e"+a):a<0?0:a}function yy(a){return a===10?Mg:a===Math.E?Math.exp:function(s){return Math.pow(a,s)}}function _(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(s){return Math.log(s)/a})}function F(a){return function(s){return-a(-s)}}function Oe(a){var s=a(Bm,Nm),n=s.domain,r=10,t,o;function u(){return t=_(r),o=yy(r),n()[0]<0?(t=F(t),o=F(o),a(zm,Tg)):a(Bm,Nm),s}return s.base=function(d){return arguments.length?(r=+d,u()):r},s.domain=function(d){return arguments.length?(n(d),u()):n()},s.ticks=function(d){var S=n(),z=S[0],de=S[S.length-1],be;(be=de<z)&&(it=z,z=de,de=it);var it=t(z),nt=t(de),Kt,tr,Ir,jr=d==null?10:+d,on=[];if(!(r%1)&&nt-it<jr){if(it=Math.round(it)-1,nt=Math.round(nt)+1,z>0){for(;it<nt;++it)for(tr=1,Kt=o(it);tr<r;++tr)if(Ir=Kt*tr,!(Ir<z)){if(Ir>de)break;on.push(Ir)}}else for(;it<nt;++it)for(tr=r-1,Kt=o(it);tr>=1;--tr)if(Ir=Kt*tr,!(Ir<z)){if(Ir>de)break;on.push(Ir)}}else on=Op(it,nt,Math.min(nt-it,jr)).map(o);return be?on.reverse():on},s.tickFormat=function(d,S){if(S==null&&(S=r===10?".0e":","),typeof S!="function"&&(S=q0(S)),d===1/0)return S;d==null&&(d=10);var z=Math.max(1,r*d/s.ticks().length);return function(de){var be=de/o(Math.round(t(de)));return be*r<r-.5&&(be*=r),be<=z?S(de):""}},s.nice=function(){return n(Fm(n(),{floor:function(d){return o(Math.floor(t(d)))},ceil:function(d){return o(Math.ceil(t(d)))}}))},s}function $t(){var a=Oe(X0()).domain([1,10]);return a.copy=function(){return Wv(a,$t()).base(a.base())},Kd.apply(a,arguments),a}function br(a){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/a))}}function Jr(a){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*a}}function Wn(a){var s=1,n=a(br(s),Jr(s));return n.constant=function(r){return arguments.length?a(br(s=+r),Jr(s)):s},linearish(n)}function li(){var a=Wn(transformer());return a.copy=function(){return copy(a,li()).constant(a.constant())},initRange.apply(a,arguments)}function Ri(a){return function(s){return s<0?-Math.pow(-s,a):Math.pow(s,a)}}function Xa(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function Ka(a){return a<0?-a*a:a*a}function So(a){var s=a(Id,Id),n=1;function r(){return n===1?a(Id,Id):n===.5?a(Xa,Ka):a(Ri(n),Ri(1/n))}return s.exponent=function(t){return arguments.length?(n=+t,r()):n},Mv(s)}function Ms(){var a=So(X0());return a.copy=function(){return Wv(a,Ms()).exponent(a.exponent())},Kd.apply(a,arguments),a}function bu(){return Ms.apply(null,arguments).exponent(.5)}function ju(){var a=[],s=[],n=[],r;function t(){var u=0,d=Math.max(1,s.length);for(n=new Array(d-1);++u<d;)n[u-1]=i0(a,u/d);return o}function o(u){return isNaN(u=+u)?r:s[dv(n,u)]}return o.invertExtent=function(u){var d=s.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:a[0],d<n.length?n[d]:a[a.length-1]]},o.domain=function(u){if(!arguments.length)return a.slice();a=[];for(var d=0,S=u.length,z;d<S;++d)z=u[d],z!=null&&!isNaN(z=+z)&&a.push(z);return a.sort(Zv),t()},o.range=function(u){return arguments.length?(s=Cp.call(u),t()):s.slice()},o.unknown=function(u){return arguments.length?(r=u,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return ju().domain(a).range(s).unknown(r)},Kd.apply(o,arguments)}function zl(){var a=0,s=1,n=1,r=[.5],t=[0,1],o;function u(S){return S<=S?t[dv(r,S,0,n)]:o}function d(){var S=-1;for(r=new Array(n);++S<n;)r[S]=((S+1)*s-(S-n)*a)/(n+1);return u}return u.domain=function(S){return arguments.length?(a=+S[0],s=+S[1],d()):[a,s]},u.range=function(S){return arguments.length?(n=(t=Cp.call(S)).length-1,d()):t.slice()},u.invertExtent=function(S){var z=t.indexOf(S);return z<0?[NaN,NaN]:z<1?[a,r[0]]:z>=n?[r[n-1],s]:[r[z-1],r[z]]},u.unknown=function(S){return arguments.length&&(o=S),u},u.thresholds=function(){return r.slice()},u.copy=function(){return zl().domain([a,s]).range(t).unknown(o)},Kd.apply(Mv(u),arguments)}function Hu(){var a=[.5],s=[0,1],n,r=1;function t(o){return o<=o?s[dv(a,o,0,r)]:n}return t.domain=function(o){return arguments.length?(a=Cp.call(o),r=Math.min(a.length,s.length-1),t):a.slice()},t.range=function(o){return arguments.length?(s=Cp.call(o),r=Math.min(a.length,s.length-1),t):s.slice()},t.invertExtent=function(o){var u=s.indexOf(o);return[a[u-1],a[u]]},t.unknown=function(o){return arguments.length?(n=o,t):n},t.copy=function(){return Hu().domain(a).range(s).unknown(n)},Kd.apply(t,arguments)}var jl=new Date,sc=new Date;function fh(a,s,n,r){function t(o){return a(o=arguments.length===0?new Date:new Date(+o)),o}return t.floor=function(o){return a(o=new Date(+o)),o},t.ceil=function(o){return a(o=new Date(o-1)),s(o,1),a(o),o},t.round=function(o){var u=t(o),d=t.ceil(o);return o-u<d-o?u:d},t.offset=function(o,u){return s(o=new Date(+o),u==null?1:Math.floor(u)),o},t.range=function(o,u,d){var S=[],z;if(o=t.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return S;do S.push(z=new Date(+o)),s(o,d),a(o);while(z<o&&o<u);return S},t.filter=function(o){return fh(function(u){if(u>=u)for(;a(u),!o(u);)u.setTime(u-1)},function(u,d){if(u>=u)if(d<0)for(;++d<=0;)for(;s(u,-1),!o(u););else for(;--d>=0;)for(;s(u,1),!o(u););})},n&&(t.count=function(o,u){return jl.setTime(+o),sc.setTime(+u),a(jl),a(sc),Math.floor(n(jl,sc))},t.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?t.filter(r?function(u){return r(u)%o===0}:function(u){return t.count(0,u)%o===0}):t}),t}var Ud=fh(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,s){a.setFullYear(a.getFullYear()+s)},function(a,s){return s.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Ud.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:fh(function(s){s.setFullYear(Math.floor(s.getFullYear()/a)*a),s.setMonth(0,1),s.setHours(0,0,0,0)},function(s,n){s.setFullYear(s.getFullYear()+n*a)})};var Rd=Ud,dd=Ud.range,cp=fh(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,s){a.setMonth(a.getMonth()+s)},function(a,s){return s.getMonth()-a.getMonth()+(s.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),Lp=cp,Pg=cp.range,Zm=1e3,em=6e4,Og=36e5,_y=864e5,xy=6048e5;function Xv(a){return fh(function(s){s.setDate(s.getDate()-(s.getDay()+7-a)%7),s.setHours(0,0,0,0)},function(s,n){s.setDate(s.getDate()+n*7)},function(s,n){return(n-s-(n.getTimezoneOffset()-s.getTimezoneOffset())*em)/xy})}var Um=Xv(0),$m=Xv(1),P_=Xv(2),O_=Xv(3),E0=Xv(4),I_=Xv(5),Ig=Xv(6),o2=Um.range,by=$m.range,s2=P_.range,u2=O_.range,l2=E0.range,c2=I_.range,f2=Ig.range,Ey=fh(function(a){a.setHours(0,0,0,0)},function(a,s){a.setDate(a.getDate()+s)},function(a,s){return(s-a-(s.getTimezoneOffset()-a.getTimezoneOffset())*em)/_y},function(a){return a.getDate()-1}),Rg=Ey,h2=Ey.range,Sy=fh(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Zm-a.getMinutes()*em)},function(a,s){a.setTime(+a+s*Og)},function(a,s){return(s-a)/Og},function(a){return a.getHours()}),S0=Sy,d2=Sy.range,wy=fh(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Zm)},function(a,s){a.setTime(+a+s*em)},function(a,s){return(s-a)/em},function(a){return a.getMinutes()}),w0=wy,p2=wy.range,tm=fh(function(a){a.setTime(a-a.getMilliseconds())},function(a,s){a.setTime(+a+s*Zm)},function(a,s){return(s-a)/Zm},function(a){return a.getUTCSeconds()}),R_=tm,v2=tm.range,jm=fh(function(){},function(a,s){a.setTime(+a+s)},function(a,s){return s-a});jm.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?fh(function(s){s.setTime(Math.floor(s/a)*a)},function(s,n){s.setTime(+s+n*a)},function(s,n){return(n-s)/a}):jm};var L_=jm,m2=jm.range;function Kv(a){return fh(function(s){s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-a)%7),s.setUTCHours(0,0,0,0)},function(s,n){s.setUTCDate(s.getUTCDate()+n*7)},function(s,n){return(n-s)/xy})}var Cy=Kv(0),Hm=Kv(1),k_=Kv(2),D_=Kv(3),C0=Kv(4),F_=Kv(5),B_=Kv(6),Ay=Cy.range,g2=Hm.range,y2=k_.range,_2=D_.range,x2=C0.range,b2=F_.range,E2=B_.range,Ty=fh(function(a){a.setUTCHours(0,0,0,0)},function(a,s){a.setUTCDate(a.getUTCDate()+s)},function(a,s){return(s-a)/_y},function(a){return a.getUTCDate()-1}),Lg=Ty,S2=Ty.range,kg=fh(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,s){a.setUTCFullYear(a.getUTCFullYear()+s)},function(a,s){return s.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});kg.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:fh(function(s){s.setUTCFullYear(Math.floor(s.getUTCFullYear()/a)*a),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},function(s,n){s.setUTCFullYear(s.getUTCFullYear()+n*a)})};var rm=kg,w2=kg.range;function Dg(a){if(0<=a.y&&a.y<100){var s=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return s.setFullYear(a.y),s}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Fg(a){if(0<=a.y&&a.y<100){var s=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return s.setUTCFullYear(a.y),s}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function nm(a,s,n){return{y:a,m:s,d:n,H:0,M:0,S:0,L:0}}function N_(a){var s=a.dateTime,n=a.date,r=a.time,t=a.periods,o=a.days,u=a.shortDays,d=a.months,S=a.shortMonths,z=A0(t),de=im(t),be=A0(o),it=im(o),nt=A0(u),Kt=im(u),tr=A0(d),Ir=im(d),jr=A0(S),on=im(S),tn={a:Rh,A:md,b:hh,B:tp,c:null,d:Ly,e:Ly,f:rx,g:sx,G:lx,H:ex,I:T2,j:tx,L:ky,m:Dy,M:nx,p:Fv,q:Gp,Q:Hy,s:Vy,S:ix,u:M2,U:P2,V:Fy,w:By,W:ax,x:null,X:null,y:ox,Y:ux,Z:cx,"%":jy},Yn={a:D0,A:Dp,b:Zh,B:Ld,c:null,d:Ny,e:Ny,f:Vm,g:bx,G:Ex,H:zy,I:fx,j:hx,L:dx,m:px,M:vx,p:Em,q:Sm,Q:Hy,s:Vy,S:mx,u:gx,U:yx,V:Uy,w:zg,W:_x,x:null,X:null,y:xx,Y:$y,Z:Sx,"%":jy},ci={a:wo,A:Ba,b:ms,B:au,c:Al,d:Iy,e:Iy,f:q_,g:Oy,G:Bg,H:Ng,I:Ng,j:X_,L:A2,m:W_,M:K_,p:_o,q:C2,Q:J_,s:Ry,S:Y_,u:$_,U:j_,V:H_,w:U_,W:V_,x:nd,X:Ih,y:Oy,Y:Bg,Z:G_,"%":Q_};tn.x=Zi(n,tn),tn.X=Zi(r,tn),tn.c=Zi(s,tn),Yn.x=Zi(n,Yn),Yn.X=Zi(r,Yn),Yn.c=Zi(s,Yn);function Zi(vu,Vc){return function(eh){var as=[],Mp=-1,id=0,Fp=vu.length,Bp,wm,GE;for(eh instanceof Date||(eh=new Date(+eh));++Mp<Fp;)vu.charCodeAt(Mp)===37&&(as.push(vu.slice(id,Mp)),(wm=My[Bp=vu.charAt(++Mp)])!=null?Bp=vu.charAt(++Mp):wm=Bp==="e"?" ":"0",(GE=Vc[Bp])&&(Bp=GE(eh,wm)),as.push(Bp),id=Mp+1);return as.push(vu.slice(id,Mp)),as.join("")}}function zi(vu,Vc){return function(eh){var as=nm(1900,void 0,1),Mp=pa(as,vu,eh+="",0),id,Fp;if(Mp!=eh.length)return null;if("Q"in as)return new Date(as.Q);if("s"in as)return new Date(as.s*1e3+("L"in as?as.L:0));if(Vc&&!("Z"in as)&&(as.Z=0),"p"in as&&(as.H=as.H%12+as.p*12),as.m===void 0&&(as.m="q"in as?as.q:0),"V"in as){if(as.V<1||as.V>53)return null;"w"in as||(as.w=1),"Z"in as?(id=Fg(nm(as.y,0,1)),Fp=id.getUTCDay(),id=Fp>4||Fp===0?Hm.ceil(id):Hm(id),id=Lg.offset(id,(as.V-1)*7),as.y=id.getUTCFullYear(),as.m=id.getUTCMonth(),as.d=id.getUTCDate()+(as.w+6)%7):(id=Dg(nm(as.y,0,1)),Fp=id.getDay(),id=Fp>4||Fp===0?$m.ceil(id):$m(id),id=Rg.offset(id,(as.V-1)*7),as.y=id.getFullYear(),as.m=id.getMonth(),as.d=id.getDate()+(as.w+6)%7)}else("W"in as||"U"in as)&&("w"in as||(as.w="u"in as?as.u%7:"W"in as?1:0),Fp="Z"in as?Fg(nm(as.y,0,1)).getUTCDay():Dg(nm(as.y,0,1)).getDay(),as.m=0,as.d="W"in as?(as.w+6)%7+as.W*7-(Fp+5)%7:as.w+as.U*7-(Fp+6)%7);return"Z"in as?(as.H+=as.Z/100|0,as.M+=as.Z%100,Fg(as)):Dg(as)}}function pa(vu,Vc,eh,as){for(var Mp=0,id=Vc.length,Fp=eh.length,Bp,wm;Mp<id;){if(as>=Fp)return-1;if(Bp=Vc.charCodeAt(Mp++),Bp===37){if(Bp=Vc.charAt(Mp++),wm=ci[Bp in My?Vc.charAt(Mp++):Bp],!wm||(as=wm(vu,eh,as))<0)return-1}else if(Bp!=eh.charCodeAt(as++))return-1}return as}function _o(vu,Vc,eh){var as=z.exec(Vc.slice(eh));return as?(vu.p=de[as[0].toLowerCase()],eh+as[0].length):-1}function wo(vu,Vc,eh){var as=nt.exec(Vc.slice(eh));return as?(vu.w=Kt[as[0].toLowerCase()],eh+as[0].length):-1}function Ba(vu,Vc,eh){var as=be.exec(Vc.slice(eh));return as?(vu.w=it[as[0].toLowerCase()],eh+as[0].length):-1}function ms(vu,Vc,eh){var as=jr.exec(Vc.slice(eh));return as?(vu.m=on[as[0].toLowerCase()],eh+as[0].length):-1}function au(vu,Vc,eh){var as=tr.exec(Vc.slice(eh));return as?(vu.m=Ir[as[0].toLowerCase()],eh+as[0].length):-1}function Al(vu,Vc,eh){return pa(vu,s,Vc,eh)}function nd(vu,Vc,eh){return pa(vu,n,Vc,eh)}function Ih(vu,Vc,eh){return pa(vu,r,Vc,eh)}function Rh(vu){return u[vu.getDay()]}function md(vu){return o[vu.getDay()]}function hh(vu){return S[vu.getMonth()]}function tp(vu){return d[vu.getMonth()]}function Fv(vu){return t[+(vu.getHours()>=12)]}function Gp(vu){return 1+~~(vu.getMonth()/3)}function D0(vu){return u[vu.getUTCDay()]}function Dp(vu){return o[vu.getUTCDay()]}function Zh(vu){return S[vu.getUTCMonth()]}function Ld(vu){return d[vu.getUTCMonth()]}function Em(vu){return t[+(vu.getUTCHours()>=12)]}function Sm(vu){return 1+~~(vu.getUTCMonth()/3)}return{format:function(vu){var Vc=Zi(vu+="",tn);return Vc.toString=function(){return vu},Vc},parse:function(vu){var Vc=zi(vu+="",!1);return Vc.toString=function(){return vu},Vc},utcFormat:function(vu){var Vc=Zi(vu+="",Yn);return Vc.toString=function(){return vu},Vc},utcParse:function(vu){var Vc=zi(vu+="",!0);return Vc.toString=function(){return vu},Vc}}}var My={"-":"",_:" ",0:"0"},$d=/^\s*\d+/,Py=/^%/,z_=/[\\^$*+?|[\]().{}]/g;function Lf(a,s,n){var r=a<0?"-":"",t=(r?-a:a)+"",o=t.length;return r+(o<n?new Array(n-o+1).join(s)+t:t)}function Z_(a){return a.replace(z_,"\\$&")}function A0(a){return new RegExp("^(?:"+a.map(Z_).join("|")+")","i")}function im(a){for(var s={},n=-1,r=a.length;++n<r;)s[a[n].toLowerCase()]=n;return s}function U_(a,s,n){var r=$d.exec(s.slice(n,n+1));return r?(a.w=+r[0],n+r[0].length):-1}function $_(a,s,n){var r=$d.exec(s.slice(n,n+1));return r?(a.u=+r[0],n+r[0].length):-1}function j_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.U=+r[0],n+r[0].length):-1}function H_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.V=+r[0],n+r[0].length):-1}function V_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.W=+r[0],n+r[0].length):-1}function Bg(a,s,n){var r=$d.exec(s.slice(n,n+4));return r?(a.y=+r[0],n+r[0].length):-1}function Oy(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function G_(a,s,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(n,n+6));return r?(a.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function C2(a,s,n){var r=$d.exec(s.slice(n,n+1));return r?(a.q=r[0]*3-3,n+r[0].length):-1}function W_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.m=r[0]-1,n+r[0].length):-1}function Iy(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.d=+r[0],n+r[0].length):-1}function X_(a,s,n){var r=$d.exec(s.slice(n,n+3));return r?(a.m=0,a.d=+r[0],n+r[0].length):-1}function Ng(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.H=+r[0],n+r[0].length):-1}function K_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.M=+r[0],n+r[0].length):-1}function Y_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.S=+r[0],n+r[0].length):-1}function A2(a,s,n){var r=$d.exec(s.slice(n,n+3));return r?(a.L=+r[0],n+r[0].length):-1}function q_(a,s,n){var r=$d.exec(s.slice(n,n+6));return r?(a.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Q_(a,s,n){var r=Py.exec(s.slice(n,n+1));return r?n+r[0].length:-1}function J_(a,s,n){var r=$d.exec(s.slice(n));return r?(a.Q=+r[0],n+r[0].length):-1}function Ry(a,s,n){var r=$d.exec(s.slice(n));return r?(a.s=+r[0],n+r[0].length):-1}function Ly(a,s){return Lf(a.getDate(),s,2)}function ex(a,s){return Lf(a.getHours(),s,2)}function T2(a,s){return Lf(a.getHours()%12||12,s,2)}function tx(a,s){return Lf(1+Rg.count(Rd(a),a),s,3)}function ky(a,s){return Lf(a.getMilliseconds(),s,3)}function rx(a,s){return ky(a,s)+"000"}function Dy(a,s){return Lf(a.getMonth()+1,s,2)}function nx(a,s){return Lf(a.getMinutes(),s,2)}function ix(a,s){return Lf(a.getSeconds(),s,2)}function M2(a){var s=a.getDay();return s===0?7:s}function P2(a,s){return Lf(Um.count(Rd(a)-1,a),s,2)}function T0(a){var s=a.getDay();return s>=4||s===0?E0(a):E0.ceil(a)}function Fy(a,s){return a=T0(a),Lf(E0.count(Rd(a),a)+(Rd(a).getDay()===4),s,2)}function By(a){return a.getDay()}function ax(a,s){return Lf($m.count(Rd(a)-1,a),s,2)}function ox(a,s){return Lf(a.getFullYear()%100,s,2)}function sx(a,s){return a=T0(a),Lf(a.getFullYear()%100,s,2)}function ux(a,s){return Lf(a.getFullYear()%1e4,s,4)}function lx(a,s){var n=a.getDay();return a=n>=4||n===0?E0(a):E0.ceil(a),Lf(a.getFullYear()%1e4,s,4)}function cx(a){var s=a.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+Lf(s/60|0,"0",2)+Lf(s%60,"0",2)}function Ny(a,s){return Lf(a.getUTCDate(),s,2)}function zy(a,s){return Lf(a.getUTCHours(),s,2)}function fx(a,s){return Lf(a.getUTCHours()%12||12,s,2)}function hx(a,s){return Lf(1+Lg.count(rm(a),a),s,3)}function dx(a,s){return Lf(a.getUTCMilliseconds(),s,3)}function Vm(a,s){return dx(a,s)+"000"}function px(a,s){return Lf(a.getUTCMonth()+1,s,2)}function vx(a,s){return Lf(a.getUTCMinutes(),s,2)}function mx(a,s){return Lf(a.getUTCSeconds(),s,2)}function gx(a){var s=a.getUTCDay();return s===0?7:s}function yx(a,s){return Lf(Cy.count(rm(a)-1,a),s,2)}function Zy(a){var s=a.getUTCDay();return s>=4||s===0?C0(a):C0.ceil(a)}function Uy(a,s){return a=Zy(a),Lf(C0.count(rm(a),a)+(rm(a).getUTCDay()===4),s,2)}function zg(a){return a.getUTCDay()}function _x(a,s){return Lf(Hm.count(rm(a)-1,a),s,2)}function xx(a,s){return Lf(a.getUTCFullYear()%100,s,2)}function bx(a,s){return a=Zy(a),Lf(a.getUTCFullYear()%100,s,2)}function $y(a,s){return Lf(a.getUTCFullYear()%1e4,s,4)}function Ex(a,s){var n=a.getUTCDay();return a=n>=4||n===0?C0(a):C0.ceil(a),Lf(a.getUTCFullYear()%1e4,s,4)}function Sx(){return"+0000"}function jy(){return"%"}function Hy(a){return+a}function Vy(a){return Math.floor(+a/1e3)}var M0,Gy,Cx,Ax,Tx;Wy({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wy(a){return M0=N_(a),Gy=M0.format,Cx=M0.parse,Ax=M0.utcFormat,Tx=M0.utcParse,M0}var am=1e3,om=am*60,sm=om*60,um=sm*24,kp=um*7,Xy=um*30,Gm=um*365;function Ky(a){return new Date(a)}function Yy(a){return a instanceof Date?+a:+new Date(+a)}function qy(a,s,n,r,t,o,u,d,S){var z=yg(Id,Id),de=z.invert,be=z.domain,it=S(".%L"),nt=S(":%S"),Kt=S("%I:%M"),tr=S("%I %p"),Ir=S("%a %d"),jr=S("%b %d"),on=S("%B"),tn=S("%Y"),Yn=[[u,1,am],[u,5,5*am],[u,15,15*am],[u,30,30*am],[o,1,om],[o,5,5*om],[o,15,15*om],[o,30,30*om],[t,1,sm],[t,3,3*sm],[t,6,6*sm],[t,12,12*sm],[r,1,um],[r,2,2*um],[n,1,kp],[s,1,Xy],[s,3,3*Xy],[a,1,Gm]];function ci(zi){return(u(zi)<zi?it:o(zi)<zi?nt:t(zi)<zi?Kt:r(zi)<zi?tr:s(zi)<zi?n(zi)<zi?Ir:jr:a(zi)<zi?on:tn)(zi)}function Zi(zi,pa,_o,wo){if(zi==null&&(zi=10),typeof zi=="number"){var Ba=Math.abs(_o-pa)/zi,ms=Wp(function(au){return au[2]}).right(Yn,Ba);ms===Yn.length?(wo=Xh(pa/Gm,_o/Gm,zi),zi=a):ms?(ms=Yn[Ba/Yn[ms-1][2]<Yn[ms][2]/Ba?ms-1:ms],wo=ms[1],zi=ms[0]):(wo=Math.max(Xh(pa,_o,zi),1),zi=d)}return wo==null?zi:zi.every(wo)}return z.invert=function(zi){return new Date(de(zi))},z.domain=function(zi){return arguments.length?be(Sv.call(zi,Yy)):be().map(Ky)},z.ticks=function(zi,pa){var _o=be(),wo=_o[0],Ba=_o[_o.length-1],ms=Ba<wo,au;return ms&&(au=wo,wo=Ba,Ba=au),au=Zi(zi,wo,Ba,pa),au=au?au.range(wo,Ba+1):[],ms?au.reverse():au},z.tickFormat=function(zi,pa){return pa==null?ci:S(pa)},z.nice=function(zi,pa){var _o=be();return(zi=Zi(zi,_o[0],_o[_o.length-1],pa))?be(Fm(_o,zi)):z},z.copy=function(){return Wv(z,qy(a,s,n,r,t,o,u,d,S))},z}function Qy(){return Kd.apply(qy(Rd,Lp,Um,Rg,S0,w0,R_,L_,Gy).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mx(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lm(){var a=0,s=1,n,r,t,o,u=Id,d=!1,S;function z(de){return isNaN(de=+de)?S:u(t===0?.5:(de=(o(de)-n)*t,d?Math.max(0,Math.min(1,de)):de))}return z.domain=function(de){return arguments.length?(n=o(a=+de[0]),r=o(s=+de[1]),t=n===r?0:1/(r-n),z):[a,s]},z.clamp=function(de){return arguments.length?(d=!!de,z):d},z.interpolator=function(de){return arguments.length?(u=de,z):u},z.unknown=function(de){return arguments.length?(S=de,z):S},function(de){return o=de,n=de(a),r=de(s),t=n===r?0:1/(r-n),z}}function Jp(a,s){return s.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function cm(){var a=Mv(lm()(Id));return a.copy=function(){return Jp(a,cm())},Kp.apply(a,arguments)}function Jy(){var a=loggish(lm()).domain([1,10]);return a.copy=function(){return Jp(a,Jy()).base(a.base())},initInterpolator.apply(a,arguments)}function Px(){var a=symlogish(lm());return a.copy=function(){return Jp(a,Px()).constant(a.constant())},initInterpolator.apply(a,arguments)}function e1(){var a=powish(lm());return a.copy=function(){return Jp(a,e1()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function O2(){return e1.apply(null,arguments).exponent(.5)}function t1(){var a=[],s=identity;function n(r){if(!isNaN(r=+r))return s((bisect(a,r)-1)/(a.length-1))}return n.domain=function(r){if(!arguments.length)return a.slice();a=[];for(var t=0,o=r.length,u;t<o;++t)u=r[t],u!=null&&!isNaN(u=+u)&&a.push(u);return a.sort(ascending),n},n.interpolator=function(r){return arguments.length?(s=r,n):s},n.copy=function(){return t1(s).domain(a)},initInterpolator.apply(n,arguments)}function fm(){var a=0,s=.5,n=1,r,t,o,u,d,S=Id,z,de=!1,be;function it(nt){return isNaN(nt=+nt)?be:(nt=.5+((nt=+z(nt))-t)*(nt<t?u:d),S(de?Math.max(0,Math.min(1,nt)):nt))}return it.domain=function(nt){return arguments.length?(r=z(a=+nt[0]),t=z(s=+nt[1]),o=z(n=+nt[2]),u=r===t?0:.5/(t-r),d=t===o?0:.5/(o-t),it):[a,s,n]},it.clamp=function(nt){return arguments.length?(de=!!nt,it):de},it.interpolator=function(nt){return arguments.length?(S=nt,it):S},it.unknown=function(nt){return arguments.length?(be=nt,it):be},function(nt){return z=nt,r=nt(a),t=nt(s),o=nt(n),u=r===t?0:.5/(t-r),d=t===o?0:.5/(o-t),it}}function r1(){var a=Mv(fm()(Id));return a.copy=function(){return Jp(a,r1())},Kp.apply(a,arguments)}function n1(){var a=loggish(fm()).domain([.1,1,10]);return a.copy=function(){return copy(a,n1()).base(a.base())},initInterpolator.apply(a,arguments)}function Wm(){var a=symlogish(fm());return a.copy=function(){return copy(a,Wm()).constant(a.constant())},initInterpolator.apply(a,arguments)}function i1(){var a=powish(fm());return a.copy=function(){return copy(a,i1()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Ox(){return i1.apply(null,arguments).exponent(.5)}function Zg(a){var s,n=[];function r(t){return t==null?s:t}return r.invert=r,r.domain=r.range=function(t){return t?(n=t,t):n},r.unknown=function(t){return t?(s=t,t):s},r.copy=function(){return Zg(a).unknown(s)},r}var fp,Xm,Km,ep=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Ug=(fp={},(0,bt.Z)(fp,Te.vY.LINEAR,J0),(0,bt.Z)(fp,Te.vY.POWER,Ms),(0,bt.Z)(fp,Te.vY.LOG,$t),(0,bt.Z)(fp,Te.vY.IDENTITY,Zg),(0,bt.Z)(fp,Te.vY.SEQUENTIAL,cm),(0,bt.Z)(fp,Te.vY.TIME,Qy),(0,bt.Z)(fp,Te.vY.QUANTILE,ju),(0,bt.Z)(fp,Te.vY.QUANTIZE,zl),(0,bt.Z)(fp,Te.vY.THRESHOLD,Hu),(0,bt.Z)(fp,Te.vY.CAT,G0),(0,bt.Z)(fp,Te.vY.DIVERGING,r1),fp),I2=(Xm=(0,ba.b2)(),Xm(Km=function(){function a(){(0,Cr.Z)(this,a),(0,bt.Z)(this,"scaleOptions",{})}return(0,Nr.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("FeatureScalePlugin",(0,ft.Z)(fe().mark(function u(){var d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(n.log(Te.Or.ScaleInitStart,Te.KD.INIT),t.scaleOptions=n.getScaleOptions(),S=o.getLayerStyleAttributes(),z=(d=n.getSource())===null||d===void 0?void 0:d.data.dataArray,!(Array.isArray(z)&&z.length===0)){be.next=8;break}return be.abrupt("return");case 8:t.caculateScalesForAttributes(S||[],z);case 9:n.log(Te.Or.ScaleInitEnd,Te.KD.INIT);case 10:case"end":return be.stop()}},u)}))),n.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var u=(0,ft.Z)(fe().mark(function d(S){var z,de;return fe().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(S){it.next=2;break}return it.abrupt("return",S);case 2:if(n.log(Te.Or.ScaleInitStart,Te.KD.UPDATE),t.scaleOptions=n.getScaleOptions(),z=o.getLayerStyleAttributes(),de=n.getSource().data.dataArray,!(Array.isArray(de)&&de.length===0)){it.next=8;break}return it.abrupt("return",!0);case 8:return t.caculateScalesForAttributes(z||[],de),n.log(Te.Or.ScaleInitEnd,Te.KD.UPDATE),n.layerModelNeedUpdate=!0,it.abrupt("return",!0);case 12:case"end":return it.stop()}},d)}));return function(d){return u.apply(this,arguments)}}()),n.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!n.layerModelNeedUpdate){t.scaleOptions=n.getScaleOptions();var u=o.getLayerStyleAttributes(),d=n.getSource().data.dataArray;if(!(Array.isArray(d)&&d.length===0)&&u){var S=u.filter(function(z){return z.needRescale});S.length&&t.caculateScalesForAttributes(S,d)}}})}},{key:"isNumber",value:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},{key:"caculateScalesForAttributes",value:function(n,r){var t=this;n.forEach(function(o){if(o.scale){var u=o.scale;u.names=t.parseFields(o.scale.field||[]);var d=[];u.names.forEach(function(S){var z;d.push(t.createScale(S,o.name,(z=o.scale)===null||z===void 0?void 0:z.values,r))}),d.some(function(S){return S.type===Te.ee.VARIABLE})?(u.type=Te.ee.VARIABLE,d.forEach(function(S){var z;if(!u.callback&&u.values!=="text")switch((z=S.option)===null||z===void 0?void 0:z.type){case Te.vY.LOG:case Te.vY.LINEAR:case Te.vY.POWER:if(u.values&&u.values.length>2){var de=S.scale.ticks(u.values.length);S.scale.domain(de)}u.values?S.scale.range(u.values):S.scale.range(S.option.domain);break;case Te.vY.QUANTILE:case Te.vY.QUANTIZE:case Te.vY.THRESHOLD:S.scale.range(u.values);break;case Te.vY.IDENTITY:break;case Te.vY.CAT:u.values?S.scale.range(u.values):S.scale.range(S.option.domain);break;case Te.vY.DIVERGING:case Te.vY.SEQUENTIAL:S.scale.interpolator(c0(u.values));break}if(u.values==="text"){var be;S.scale.range((be=S.option)===null||be===void 0?void 0:be.domain)}})):(u.type=Te.ee.CONSTANT,u.defaultValues=d.map(function(S,z){return S.scale(u.names[z])})),u.scalers=d.map(function(S){return{field:S.field,func:S.scale,option:S.option}}),o.needRescale=!1}})}},{key:"parseFields",value:function(n){return Array.isArray(n)?n:(0,ht.isString)(n)?n.split("*"):[n]}},{key:"createScale",value:function(n,r,t,o){var u,d,S=this.scaleOptions[r]&&((u=this.scaleOptions[r])===null||u===void 0?void 0:u.field)===n?this.scaleOptions[r]:this.scaleOptions[n],z={field:n,scale:void 0,type:Te.ee.VARIABLE,option:S};if(!o||!o.length)return S&&S.type?z.scale=this.createDefaultScale(S):(z.scale=G0([n]),z.type=Te.ee.CONSTANT),z;var de=(d=o.find(function(nt){return!(0,ht.isNil)(nt[n])}))===null||d===void 0?void 0:d[n];if(this.isNumber(n)||(0,ht.isNil)(de)&&!S)z.scale=G0([n]),z.type=Te.ee.CONSTANT;else{var be=S&&S.type||this.getDefaultType(de);t==="text"&&(be=Te.vY.CAT);var it=this.createScaleConfig(be,n,S,o);z.scale=this.createDefaultScale(it),z.option=it}return z}},{key:"getDefaultType",value:function(n){var r=Te.vY.LINEAR;return typeof n=="string"&&(r=ep.test(n)?Te.vY.TIME:Te.vY.CAT),r}},{key:"createScaleConfig",value:function(n,r,t,o){var u={type:n},d=(o==null?void 0:o.map(function(de){return de[r]}))||[];if(t!=null&&t.domain)u.domain=t==null?void 0:t.domain;else if(n===Te.vY.CAT||n===Te.vY.IDENTITY)u.domain=(0,ht.uniq)(d);else if(n===Te.vY.QUANTILE)u.domain=d;else if(n===Te.vY.DIVERGING){var S=zd(d),z=(t==null?void 0:t.neutral)!==void 0?t==null?void 0:t.neutral:(S[0]+S[1])/2;u.domain=[S[0],z,S[1]]}else u.domain=zd(d);return(0,ge.Z)((0,ge.Z)({},u),t)}},{key:"createDefaultScale",value:function(n){var r=n.type,t=n.domain,o=n.unknown,u=n.clamp,d=n.nice,S=Ug[r]();return t&&S.domain&&S.domain(t),o&&S.unknown(o),u!==void 0&&S.clamp&&S.clamp(u),d!==void 0&&S.nice&&S.nice(d),S}}]),a}())||Km),Ix,Rx,R2=(Ix=(0,ba.b2)(),Ix(Rx=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var r=n.animateStatus;r&&n.models.forEach(function(t){t.addUniforms((0,ge.Z)({},n.layerModel.getAnimateUniforms()))})})}}]),a}())||Rx),L2=function(){function a(s){var n=s.rendererService,r=s.layerService,t=s.parent;(0,Cr.Z)(this,a),(0,bt.Z)(this,"tileResource",new Map),(0,bt.Z)(this,"layerTiles",[]),this.rendererService=n,this.layerService=r,this.parent=t}return(0,Nr.Z)(a,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(n){return this.layerTiles.some(function(r){return r.key===n})}},{key:"addTile",value:function(n){this.layerTiles.push(n)}},{key:"getTile",value:function(n){return this.layerTiles.find(function(r){return r.key===n})}},{key:"getVisibleTileBylngLat",value:function(n){return this.layerTiles.find(function(r){return r.isLoaded&&r.visible&&r.lnglatInBounds(n)})}},{key:"removeTile",value:function(n){var r=this.layerTiles.findIndex(function(o){return o.key===n}),t=this.layerTiles.splice(r,1);t[0]&&t[0].destroy()}},{key:"updateTileVisible",value:function(n){var r=this.getTile(n.key);r==null||r.updateVisible(n.isVisible)}},{key:"isParentLoaded",value:function(n){var r=n.parent;if(!r)return!0;var t=this.getTile(r==null?void 0:r.key);return!!(t!=null&&t.isLoaded)}},{key:"isChildrenLoaded",value:function(n){var r=this,t=n==null?void 0:n.children;return t.length===0?!0:t.some(function(o){var u=r.getTile(o==null?void 0:o.key);return(u==null?void 0:u.isLoaded)===!1})}},{key:"render",value:function(){var s=(0,ft.Z)(fe().mark(function r(){var t=this,o;return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:o=this.getRenderLayers(),o.map(function(){var S=(0,ft.Z)(fe().mark(function z(de){return fe().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,t.layerService.renderLayer(de);case 2:case"end":return it.stop()}},z)}));return function(z){return S.apply(this,arguments)}}());case 2:case"end":return d.stop()}},r,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"getRenderLayers",value:function(){var n=this.layerTiles.filter(function(t){return t.visible&&t.isLoaded}),r=[];return n.map(function(t){return r.push.apply(r,(0,le.Z)(t.getLayers()))}),r}},{key:"getLayers",value:function(){var n=this.layerTiles.filter(function(t){return t.isLoaded}),r=[];return n.map(function(t){return r.push.apply(r,(0,le.Z)(t.getLayers()))}),r}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(n){return n.destroy()}),this.tileResource.clear()}}]),a}(),a1=g(1449),k2=g(32676);function D2(a,s,n){n===void 0&&(n={});var r=(0,J.wA)(a),t=(0,J.wA)(s),o=k2.union(r.coordinates,t.coordinates);return o.length===0?null:o.length===1?(0,a1.yu)(o[0],n.properties):(0,a1.tw)(o,n.properties)}var F2=D2,B2=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"getCombineFeature",value:function(n){var r=null,t=n[0];return n.map(function(o){var u=a1.yu(o.coordinates);r===null?r=u:r=F2(r,u)}),t&&(r.properties=(0,ge.Z)({},t)),r}}]),a}(),Ym="select",qm="active",N2=function(){function a(s){var n=s.layerService,r=s.tileLayerService,t=s.parent;(0,Cr.Z)(this,a),(0,bt.Z)(this,"tilePickID",new Map),this.layerService=n,this.tileLayerService=r,this.parent=t,this.tileSourceService=new B2}return(0,Nr.Z)(a,[{key:"pickRender",value:function(n){var r=this.tileLayerService.getVisibleTileBylngLat(n.lngLat);if(r){var t=r.getMainLayer();t==null||t.layerPickService.pickRender(n)}}},{key:"pick",value:function(n,r){var t=this.parent.getContainer(),o=t.get(Te.vK.IPickingService);if(n.type==="RasterLayer"){var u=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(u&&u.getMainLayer()!==void 0){var d=u.getMainLayer();return d.layerPickService.pickRasterLayer(d,r,this.parent)}return!1}return this.pickRender(r),o.pickFromPickingFBO(n,r)}},{key:"selectFeature",value:function(n){var r=(0,xi.Z)(n,3),t=r[0],o=r[1],u=r[2],d=this.color2PickId(t,o,u);this.tilePickID.set(Ym,d),this.updateHighLight(t,o,u,Ym)}},{key:"highlightPickedFeature",value:function(n){var r=(0,xi.Z)(n,3),t=r[0],o=r[1],u=r[2],d=this.color2PickId(t,o,u);this.tilePickID.set(qm,d),this.updateHighLight(t,o,u,qm)}},{key:"updateHighLight",value:function(n,r,t,o){this.tileLayerService.tiles.map(function(u){var d=u.getMainLayer();switch(o){case Ym:d==null||d.hooks.beforeSelect.call([n,r,t]);break;case qm:d==null||d.hooks.beforeHighlight.call([n,r,t]);break}})}},{key:"setPickState",value:function(){var n=this.tilePickID.get(Ym),r=this.tilePickID.get(qm);if(n){var t=this.pickId2Color(n),o=(0,xi.Z)(t,3),u=o[0],d=o[1],S=o[2];this.updateHighLight(u,d,S,Ym);return}if(r){var z=this.pickId2Color(r),de=(0,xi.Z)(z,3),be=de[0],it=de[1],nt=de[2];this.updateHighLight(be,it,nt,qm);return}}},{key:"color2PickId",value:function(n,r,t){return(0,tt.W0)(new Uint8Array([n,r,t]))}},{key:"pickId2Color",value:function(n){return(0,tt.Z6)(n)}},{key:"getFeatureById",value:function(n){var r=this.tileLayerService.getTiles().filter(function(o){return o.visible}),t=[];return r.forEach(function(o){t.push.apply(t,(0,le.Z)(o.getFeatureById(n)))}),t}},{key:"pickRasterLayer",value:function(n,r,t){return!1}}]),a}(),Lx=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive"];function kx(a){return a==="PolygonLayer"?cn:a==="LineLayer"?Ra:_n}function Dx(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}var Pv=function(){function a(s,n){(0,Cr.Z)(this,a),(0,bt.Z)(this,"visible",!0),(0,bt.Z)(this,"layers",[]),(0,bt.Z)(this,"isLoaded",!1),this.parent=n,this.sourceTile=s,this.x=s.x,this.y=s.y,this.z=s.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return(0,Nr.Z)(a,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(n){var r=(0,xi.Z)(this.sourceTile.bounds,4),t=r[0],o=r[1],u=r[2],d=r[3],S=n.lng,z=n.lat;return S>=t&&S<=u&&z>=o&&z<=d}},{key:"getLayerOptions",value:function(){var n=this.parent.getLayerConfig();return(0,ge.Z)((0,ge.Z)({},n),{},{autoFit:!1,mask:Dx(this.parent.type)||n.mask})}},{key:"addMask",value:function(){var s=(0,ft.Z)(fe().mark(function r(t,o){var u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=(0,Te.e7)(this.parent.sceneContainer),o.setContainer(u,this.parent.sceneContainer),S.next=4,o.init();case 4:t.addMaskLayer(o);case 5:case"end":return S.stop()}},r,this)}));function n(r,t){return s.apply(this,arguments)}return n}()},{key:"addLayer",value:function(){var s=(0,ft.Z)(fe().mark(function r(t){var o;return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t.isTileLayer=!0,o=(0,Te.e7)(this.parent.sceneContainer),t.setContainer(o,this.parent.sceneContainer),this.layers.push(t),d.next=6,t.init();case 6:case"end":return d.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"updateVisible",value:function(n){this.visible=n,this.updateOptions("visible",n)}},{key:"updateOptions",value:function(n,r){this.layers.forEach(function(t){t.updateLayerConfig((0,bt.Z)({},n,r))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(n){return[]}},{key:"getFeatureById",value:function(n){return[]}},{key:"destroy",value:function(){this.layers.forEach(function(n){return n.destroy()})}}]),a}();function o1(a){var s=$g();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function $g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var s1=function(a){(0,kr.Z)(n,a);var s=o1(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return u=this.getSourceOption(),d=u.data.features[0].properties,S=new Ra().source(u.data,u.options).size(1).shape("line").color("red"),z=new _n({minZoom:this.z-1,maxZoom:this.z+1}).source([d],{parser:{type:"json",x:"textLng",y:"textLat"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),be.next=6,this.addLayer(S);case 6:return be.next=8,this.addLayer(z);case 8:this.isLoaded=!0;case 9:case"end":return be.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:o},options:{parser:{type:"geojson"},transforms:t.transforms}}}}]),n}(Pv);function u1(a){var s=z2();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function z2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Fx=function(a){(0,kr.Z)(n,a);var s=u1(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),z=new En((0,ge.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(it){var nt,Kt,tr=it;z[tr]((nt=u[tr])===null||nt===void 0?void 0:nt.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),be.next=7,this.addLayer(z);case 7:this.isLoaded=!0;case 8:case"end":return be.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),n}(Pv);function Bx(a){var s=Nx();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Nx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var hm=function(a){(0,kr.Z)(n,a);var s=Bx(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),z=new Ad((0,ge.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(it){var nt,Kt,tr=it;z[tr]((nt=u[tr])===null||nt===void 0?void 0:nt.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),be.next=7,this.addLayer(z);case 7:this.isLoaded=!0;case 8:case"end":return be.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getFeatures",value:function(t){if(!t)return[];var o=this.sourceTile.data;return o.getTileData(t)}},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.parent.getLayerConfig(),u=o.sourceLayer,d=o.featureId,S=this.getFeatures(u);return{data:{type:"FeatureCollection",features:S},options:{parser:{type:"geojson",featureId:d},transforms:t.transforms}}}}]),n}(Pv),zx=["rasterData"];function Zx(a){var s=Qm();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Qm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var jg=function(a){(0,kr.Z)(n,a);var s=Zx(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),z=new el((0,ge.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(it){var nt,Kt,tr=it;z[tr]((nt=u[tr])===null||nt===void 0?void 0:nt.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),be.next=7,this.addLayer(z);case 7:this.isLoaded=!0;case 8:case"end":return be.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.sourceTile.data.data,u=o.rasterData,d=(0,ls.Z)(o,zx);return{data:u,options:{parser:(0,ge.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},d),transforms:t.transforms}}}}]),n}(Pv);function l1(a){var s=Ux();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ux(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var $x=function(a){(0,kr.Z)(n,a);var s=l1(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z;return fe().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),z=new el((0,ge.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(it){var nt,Kt,tr=it;z[tr]((nt=u[tr])===null||nt===void 0?void 0:nt.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),be.next=7,this.addLayer(z);case 7:this.isLoaded=!0;case 8:case"end":return be.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),n}(Pv),Jm=["rasterData"];function jx(a){var s=c1();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function c1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Hx={positions:[0,1],colors:["#000","#fff"]},Vx=function(a){(0,kr.Z)(n,a);var s=jx(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it;return fe().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),z=this.getLayerOptions(),de=z.rampColors,be=z.domain,this.colorTexture=this.parent.textureService.getColorTexture(de,be),it=new el((0,ge.Z)((0,ge.Z)({},d),{},{colorTexture:this.colorTexture})).source(S.data,S.options),u&&Object.keys(u).forEach(function(tr){var Ir,jr,on=tr;it[on]((Ir=u[on])===null||Ir===void 0?void 0:Ir.field,(jr=u[on])===null||jr===void 0?void 0:jr.values)}),Kt.next=9,this.addLayer(it);case 9:this.isLoaded=!0;case 10:case"end":return Kt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.sourceTile.data.data,u=o.rasterData,d=(0,ls.Z)(o,Jm);return{data:u,options:{parser:(0,ge.Z)({type:"raster",extent:this.sourceTile.bounds},d),transforms:t.transforms}}}},{key:"styleUpdate",value:function(){for(var t=this,o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];var S=u,z=S.rampColors,de=z===void 0?Hx:z,be=S.domain;this.colorTexture=this.parent.textureService.getColorTexture(de,be||(0,tt.ZB)(de)),this.layers.forEach(function(it){return it.style({colorTexture:t.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(t){return t.destroy()})}}]),n}(Pv);function Gx(a){var s=Wx();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Wx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var eg=function(a){(0,kr.Z)(n,a);var s=Gx(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de;return fe().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=kx(this.parent.type),z=this.getSourceOption(),z){it.next=7;break}return this.isLoaded=!0,it.abrupt("return");case 7:if(de=new S((0,ge.Z)({},d)).source(z.data,z.options),Object.keys(u).forEach(function(nt){var Kt,tr,Ir=nt;de[Ir]((Kt=u[Ir])===null||Kt===void 0?void 0:Kt.field,(tr=u[Ir])===null||tr===void 0?void 0:tr.values)}),!d.mask){it.next=12;break}return it.next=12,this.addTileMask(de);case 12:return it.next=14,this.addLayer(de);case 14:this.setLayerMinMaxZoom(de),this.isLoaded=!0;case 16:case"end":return it.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"addTileMask",value:function(){var r=(0,ft.Z)(fe().mark(function o(u){var d;return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return d=new Ad({layerType:"MaskLayer"}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}),z.next=3,this.addMask(u,d);case 3:case"end":return z.stop()}},o,this)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.parent.getLayerConfig(),u=o.sourceLayer,d=u===void 0?"defaultLayer":u,S=o.featureId,z=S===void 0?"id":S,de=this.getFeatures(d);return{data:{type:"FeatureCollection",features:de},options:{parser:{type:"geojson",featureId:z},transforms:t.transforms}}}},{key:"setLayerMinMaxZoom",value:function(t){t.getModelType()==="text"&&t.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(t){var o=this.sourceTile.data;return o.getTileData(t)}},{key:"getFeatureById",value:function(t){var o=this.getMainLayer();if(!o)return[];var u=o.getSource().data.dataArray.filter(function(d){return d._id===t});return u}}]),n}(Pv);function Hg(a){var s=a.type;switch(s){case"PolygonLayer":return eg;case"LineLayer":return eg;case"PointLayer":return eg;case"TileDebugLayer":return s1;case"MaskLayer":return hm;case"RasterLayer":var n=a.getSource().parser.dataType;switch(n){case"rgb":case"customRGB":return jg;case"arraybuffer":case"customArrayBuffer":return Vx;case"terrainRGB":return $x;default:return Fx}default:return eg}}var f1=function(){function a(s){(0,Cr.Z)(this,a),(0,bt.Z)(this,"initedTileset",!1),(0,bt.Z)(this,"viewchange",(0,ht.debounce)(this.mapchange,24)),this.parent=s;var n=this.parent.getContainer();this.rendererService=n.get(Te.vK.IRendererService),this.layerService=n.get(Te.vK.ILayerService),this.mapService=n.get(Te.vK.IMapService),this.pickingService=n.get(Te.vK.IPickingService),this.tileLayerService=new L2({rendererService:this.rendererService,layerService:this.layerService,parent:s}),this.tilePickService=new N2({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:s}),this.parent.setLayerPickService(this.tilePickService),this.proxy(s),this.initTileSetManager()}return(0,Nr.Z)(a,[{key:"initTileSetManager",value:function(){var n,r=this.parent.getSource();this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var t=this.getCurrentView(),o=t.latLonBounds,u=t.zoom;(n=this.tilesetManager)===null||n===void 0||n.update(u,o)}},{key:"mapchange",value:function(){var n,r=this.getCurrentView(),t=r.latLonBounds,o=r.zoom;if(this.mapService.version==="GAODE1.x"){var u=this.parent.getLayerConfig(),d=u.visible;o<2&&d?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):o>=2&&!d&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===o&&this.lastViewStates.latLonBounds.toString()===t.toString()||(this.lastViewStates={zoom:o,latLonBounds:t},(n=this.tilesetManager)===null||n===void 0||n.throttleUpdate(o,t))}},{key:"getCurrentView",value:function(){var n=this.mapService.getBounds(),r=[n[0][0],n[0][1],n[1][0],n[1][1]],t=this.mapService.getZoom();return{latLonBounds:r,zoom:t}}},{key:"bindTilesetEvent",value:function(){var n=this;this.tilesetManager.on("tile-loaded",function(r){}),this.tilesetManager.on("tile-unload",function(r){n.tileUnLoad(r)}),this.tilesetManager.on("tile-error",function(r,t){n.tileError(r)}),this.tilesetManager.on("tile-update",function(){n.tileUpdate()}),this.mapService.on("zoomend",function(){return n.mapchange()}),this.mapService.on("moveend",function(){return n.viewchange()})}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"tileLoaded",value:function(n){}},{key:"tileError",value:function(n){console.warn("error:",n)}},{key:"destroy",value:function(){var n;(n=this.tilesetManager)===null||n===void 0||n.destroy(),this.tileLayerService.destroy()}},{key:"tileUnLoad",value:function(n){this.tileLayerService.removeTile(n.key)}},{key:"tileUpdate",value:function(){var s=(0,ft.Z)(fe().mark(function r(){var t=this,o,u;return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.tilesetManager){S.next=2;break}return S.abrupt("return");case 2:return o=this.parent.getMinZoom(),u=this.parent.getMaxZoom(),S.next=6,Promise.all(this.tilesetManager.tiles.filter(function(z){return z.isLoaded}).filter(function(z){return z.isVisibleChange}).filter(function(z){return z.data}).filter(function(z){return z.z>=o&&z.z<u}).map(function(){var z=(0,ft.Z)(fe().mark(function de(be){var it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(t.tileLayerService.hasTile(be.key)){tr.next=9;break}return it=Hg(t.parent),nt=new it(be,t.parent),tr.next=5,nt.initTileLayer();case 5:t.tilePickService.setPickState(),nt.getLayers().length!==0&&(t.tileLayerService.addTile(nt),t.tileLayerService.updateTileVisible(be),t.layerService.reRender()),tr.next=12;break;case 9:t.tileLayerService.updateTileVisible(be),t.tilePickService.setPickState(),t.layerService.reRender();case 12:case"end":return tr.stop()}},de)}));return function(de){return z.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return S.stop()}},r,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"setPickState",value:function(n){}},{key:"pickRender",value:function(n){this.tilePickService.pickRender(n)}},{key:"selectFeature",value:function(n){this.tilePickService.selectFeature(n)}},{key:"highlightPickedFeature",value:function(n){this.tilePickService.highlightPickedFeature(n)}},{key:"proxy",value:function(n){var r=this;Lx.forEach(function(t){var o=n[t].bind(n);n[t]=function(){for(var u=arguments.length,d=new Array(u),S=0;S<u;S++)d[S]=arguments[S];return o.apply(void 0,d),r.getLayers().map(function(z){z[t].apply(z,d)}),t==="style"&&r.getTiles().forEach(function(z){return z.styleUpdate.apply(z,d)}),n}})}}]),a}(),h1,d1,Xx=(h1=(0,ba.b2)(),h1(d1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"build",value:function(){var s=(0,ft.Z)(fe().mark(function r(t){return fe().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t.prepareBuildModel(),u.next=3,t.buildModels();case 3:case"end":return u.stop()}},r)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"initLayerModel",value:function(){var s=(0,ft.Z)(fe().mark(function r(t){return fe().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.build(t);case 2:t.styleNeedUpdate=!1;case 3:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"prepareLayerModel",value:function(){var s=(0,ft.Z)(fe().mark(function r(t){return fe().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.build(t);case 2:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"apply",value:function(n){var r=this;n.hooks.init.tapPromise("LayerModelPlugin",(0,ft.Z)(fe().mark(function t(){return fe().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!n.getSource().isTile){u.next=4;break}return n.prepareBuildModel(),n.tileLayer=new f1(n),u.abrupt("return");case 4:return n.log(Te.Or.BuildModelStart,Te.KD.INIT),u.next=7,r.initLayerModel(n);case 7:n.log(Te.Or.BuildModelEnd,Te.KD.INIT);case 8:case"end":return u.stop()}},t)}))),n.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var t=(0,ft.Z)(fe().mark(function o(u){return fe().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(u){S.next=2;break}return S.abrupt("return",!1);case 2:if(!n.getSource().isTile){S.next=5;break}return n.tileLayer=new f1(n),S.abrupt("return",!1);case 5:return n.log(Te.Or.BuildModelStart,Te.KD.UPDATE),S.next=8,r.prepareLayerModel(n);case 8:return n.log(Te.Or.BuildModelEnd,Te.KD.UPDATE),S.abrupt("return",!0);case 10:case"end":return S.stop()}},o)}));return function(o){return t.apply(this,arguments)}}())}}]),a}())||d1),p1,v1,Kx=(p1=(0,ba.b2)(),p1(v1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n){n.hooks.afterInit.tap("LayerStylePlugin",function(){var r=n.getLayerConfig(),t=r.autoFit,o=r.fitBoundsOptions;t&&n.fitBounds(o)})}}]),a}())||v1),m1,g1,Yx=["type"],y1={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},_1={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},qx={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Qx={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function Jx(a){var s={u_DirectionalLights:new Array(3).fill((0,ge.Z)({},qx)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,ge.Z)({},Qx)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[_1]),a.forEach(function(n){var r=n.type,t=r===void 0?"directional":r,o=(0,ls.Z)(n,Yx),u=y1[t].lights,d=y1[t].num,S=s[d];s[u][S]=(0,ge.Z)((0,ge.Z)({},s[u][S]),o),s[d]++}),s}var eb=(m1=(0,ba.b2)(),m1(g1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LightingPlugin",function(){var r=n.getLayerConfig(),t=r.enableLighting;t&&n.models.forEach(function(o){return o.addUniforms((0,ge.Z)({},Jx()))})})}}]),a}())||g1),x1,b1,E1=(x1=(0,ba.b2)(),x1(b1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.rendererService,u=r.postProcessingPassFactory,d=r.normalPassFactory;n.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var S=n.getLayerConfig(),z=S.enableMultiPassRenderer,de=S.passes,be=de===void 0?[]:de;t.enabled=!!z&&n.getLayerConfig().enableMultiPassRenderer!==!1,t.enabled&&(n.multiPassRenderer=hf(n,be,u,d),n.multiPassRenderer.setRenderFlag(!0))}),n.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(t.enabled){var S=o.getViewportSize(),z=S.width,de=S.height;n.multiPassRenderer.resize(z,de)}})}}]),a}())||b1),S1,w1,dm={NONE:0,ENCODE:1,HIGHLIGHT:2},tb=(S1=(0,ba.b2)(),S1(w1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n,r){var t=r.styleAttributeService;n.hooks.init.tapPromise("PixelPickingPlugin",function(){var o=n.getLayerConfig(),u=o.enablePicking;t.registerStyleAttribute({name:"pickingColor",type:Te.GC.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:Te.gl.FLOAT},size:3,update:function(S){var z=S.id;return u?(0,tt.Z6)(z):[0,0,0]}}})}),n.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var o=n.getLayerConfig(),u=o.enablePicking;u&&n.isVisible()&&n.models.forEach(function(d){return d.addUniforms({u_PickingStage:dm.ENCODE})})}),n.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var o=n.getLayerConfig(),u=o.enablePicking;u&&n.isVisible()&&n.models.forEach(function(d){return d.addUniforms({u_PickingStage:dm.HIGHLIGHT})})}),n.hooks.beforeHighlight.tap("PixelPickingPlugin",function(o){var u=n.getLayerConfig(),d=u.highlightColor,S=u.activeMix,z=S===void 0?0:S,de=typeof d=="string"?(0,tt.CI)(d):d||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:(0,tt.W0)(new Uint8Array(o))}),n.models.forEach(function(be){return be.addUniforms({u_PickingStage:dm.HIGHLIGHT,u_PickingColor:o,u_HighlightColor:de.map(function(it){return it*255}),u_activeMix:z})})}),n.hooks.beforeSelect.tap("PixelPickingPlugin",function(o){var u=n.getLayerConfig(),d=u.selectColor,S=u.selectMix,z=S===void 0?0:S,de=typeof d=="string"?(0,tt.CI)(d):d||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:(0,tt.W0)(new Uint8Array(o))}),n.models.forEach(function(be){return be.addUniforms({u_PickingStage:dm.HIGHLIGHT,u_PickingColor:o,u_HighlightColor:de.map(function(it){return it*255}),u_activeMix:z,u_CurrentSelectedId:o,u_SelectColor:de.map(function(it){return it*255}),u_EnableSelect:1})})})}}]),a}())||w1),rb=["mvt","geojsonvt","testTile"];function nb(a){var s=a.getSource();return rb.includes(s.parser.type)}function Z2(a){return a.getContext?{width:a.width/DOM.DPR,height:a.height/DOM.DPR}:a.getBoundingClientRect()}var C1,Vg,ib=(C1=(0,ba.b2)(),C1(Vg=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){nb(n)||t.registerBuiltinAttributes(o,n)})}},{key:"registerBuiltinAttributes",value:function(n,r){if(r.type==="MaskLayer"){this.registerPositionAttribute(n);return}this.registerPositionAttribute(n),this.registerColorAttribute(n),this.registerVertexIdAttribute(n)}},{key:"registerPositionAttribute",value:function(n){n.registerStyleAttribute({name:"position",type:Te.GC.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:Te.gl.FLOAT},size:3,update:function(t,o,u){return u.length===2?[u[0],u[1],0]:[u[0],u[1],u[2]]}}})}},{key:"registerFilterAttribute",value:function(n){n.registerStyleAttribute({name:"filter",type:Te.GC.Attribute,descriptor:{name:"filter",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(t){var o=t.filter;return o?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(n){n.registerStyleAttribute({name:"color",type:Te.GC.Attribute,descriptor:{name:"a_Color",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:4,update:function(t){var o=t.color;return!o||!o.length?[1,1,1,1]:o}}})}},{key:"registerVertexIdAttribute",value:function(n){n.registerStyleAttribute({name:"vertexId",type:Te.GC.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:Te.gl.DYNAMIC_DRAW,data:[],type:Te.gl.FLOAT},size:1,update:function(t,o){return[o]}}})}}]),a}())||Vg),A1,T1,M1,P1,O1,I1,P0,R1,L1,k1,D1,ab=(A1=(0,ba.b2)(),T1=(0,ba.f3)(Te.vK.ICameraService),M1=(0,ba.f3)(Te.vK.ICoordinateSystemService),P1=(0,ba.f3)(Te.vK.IRendererService),O1=(0,ba.f3)(Te.vK.IMapService),A1(I1=(P0=function(){function a(){(0,Cr.Z)(this,a),(0,Ul.Z)(this,"cameraService",R1,this),(0,Ul.Z)(this,"coordinateSystemService",L1,this),(0,Ul.Z)(this,"rendererService",k1,this),(0,Ul.Z)(this,"mapService",D1,this)}return(0,Nr.Z)(a,[{key:"apply",value:function(n){var r=this,t=this.mapService.version,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u=[0,0];n.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var d=n.getLayerConfig().tileOrigin;r.coordinateSystemService.refresh(d),t==="GAODE2.x"&&(r.setLayerCenter(n),o=r.mapService.map.customCoords.getMVPMatrix(),u=r.mapService.getCustomCoordCenter());var S=r.rendererService.getViewportSize(),z=S.width,de=S.height;n.models.forEach(function(be){var it;be.addUniforms((it={},(0,bt.Z)(it,Te.lv.ProjectionMatrix,r.cameraService.getProjectionMatrix()),(0,bt.Z)(it,Te.lv.ViewMatrix,r.cameraService.getViewMatrix()),(0,bt.Z)(it,Te.lv.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),(0,bt.Z)(it,Te.lv.Zoom,r.cameraService.getZoom()),(0,bt.Z)(it,Te.lv.ZoomScale,r.cameraService.getZoomScale()),(0,bt.Z)(it,Te.lv.FocalDistance,r.cameraService.getFocalDistance()),(0,bt.Z)(it,Te.lv.CameraPosition,r.cameraService.getCameraPosition()),(0,bt.Z)(it,Te.kw.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),(0,bt.Z)(it,Te.kw.ViewportCenter,r.coordinateSystemService.getViewportCenter()),(0,bt.Z)(it,Te.kw.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),(0,bt.Z)(it,Te.kw.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),(0,bt.Z)(it,Te.kw.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),(0,bt.Z)(it,Te.kw.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),(0,bt.Z)(it,Te.kw.Mvp,o),(0,bt.Z)(it,"u_SceneCenterMKT",u),(0,bt.Z)(it,"u_ViewportSize",[z,de]),(0,bt.Z)(it,"u_ModelMatrix",r.cameraService.getModelMatrix()),(0,bt.Z)(it,"u_DevicePixelRatio",tt.vO.devicePixelRatio),(0,bt.Z)(it,"u_PickingBuffer",n.getLayerConfig().pickingBuffer||0),(0,bt.Z)(it,"u_shaderPick",Number(n.getShaderPickStat())),it))})})}},{key:"setLayerCenter",value:function(n){n.coordCenter===void 0&&(n.coordCenter=n.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(n.coordCenter)}}]),a}(),R1=(0,Rl.Z)(P0.prototype,"cameraService",[T1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L1=(0,Rl.Z)(P0.prototype,"coordinateSystemService",[M1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k1=(0,Rl.Z)(P0.prototype,"rendererService",[P1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D1=(0,Rl.Z)(P0.prototype,"mapService",[O1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P0))||I1),F1,B1,ob=(F1=(0,ba.b2)(),F1(B1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("UpdateModelPlugin",function(){n.layerModel&&n.layerModel.needUpdate().then(function(r){r&&n.renderLayers()})}),n.hooks.afterRender.tap("UpdateModelPlugin",function(){n.layerModelNeedUpdate=!1})}}]),a}())||B1),N1,z1,sb=(N1=(0,ba.b2)(),N1(z1=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){t.initStyleAttribute(n,{styleAttributeService:o})}),n.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){n.layerModelNeedUpdate||n.inited&&t.updateStyleAttribute(n,{styleAttributeService:o})})}},{key:"updateStyleAttribute",value:function(n,r){var t=r.styleAttributeService,o=t.getLayerStyleAttributes()||[],u=t.getLayerStyleAttribute("filter");if(u&&u.needRegenerateVertices){n.layerModelNeedUpdate=!0,o.forEach(function(d){return d.needRegenerateVertices=!1});return}o.filter(function(d){return d.needRegenerateVertices}).forEach(function(d){t.updateAttributeByFeatureRange(d.name,n.getEncodedData(),d.featureRange.startIndex,d.featureRange.endIndex,n),d.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(n,r){var t=r.styleAttributeService,o=t.getLayerStyleAttributes()||[];o.filter(function(u){return u.needRegenerateVertices}).forEach(function(u){t.updateAttributeByFeatureRange(u.name,n.getEncodedData(),u.featureRange.startIndex,u.featureRange.endIndex),u.needRegenerateVertices=!1})}}]),a}())||z1);Te.nC.bind(Te.vK.ILayerPlugin).to(r0).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(ib).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(I2).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(cv).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(Kx).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(sb).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(ob).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(E1).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(ab).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(R2).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(eb).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(tb).inRequestScope(),Te.nC.bind(Te.vK.ILayerPlugin).to(Xx).inRequestScope();var pm=g(16912),O0=g(5647),ub=g(58304);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var hp;(function(a){a.notload="notload",a.loading="loading",a.loaded="loaded",a.failed="failed"})(hp||(hp={}));var dp={key:"",AMap:{version:"2.0",plugins:[]}},ev={AMap:hp.notload},lb={AMap:[]},cb=[],fb=function(s){if(typeof s=="function"){if(ev.AMap===hp.loaded){s(window.AMap);return}cb.push(s)}},Z1=function(){var a=(0,ft.Z)(fe().mark(function s(n){return fe().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(o,u){if(ev.AMap===hp.failed)u("");else if(ev.AMap===hp.notload){var d=n.key,S=n.version,z=n.plugins;if(!d){u("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&u("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),dp.key=d,dp.AMap.version=S||dp.AMap.version,dp.AMap.plugins=z||dp.AMap.plugins,ev.AMap=hp.loading;var de=document.body||document.head;window._onAPILoaded=function(Kt){Kt?(ev.AMap=hp.failed,u(Kt)):(ev.AMap=hp.loaded,o(null))};var be=document.createElement("script");be.type="text/javascript",be.async=!1,be.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+dp.AMap.version+"&key="+d+"&plugin="+dp.AMap.plugins.join(","),be.onerror=function(Kt){ev.AMap=hp.failed,u(Kt)},de.appendChild(be)}else if(ev.AMap===hp.loaded){if(n.key&&n.key!==dp.key){u("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(n.version&&n.version!==dp.AMap.version){u("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var it=[];n.plugins&&n.plugins.forEach(function(Kt){dp.AMap.plugins.indexOf(Kt)===-1&&it.push(Kt)}),it.length&&window.AMap.plugin(it,function(){o(window.AMap)})}else{if(n.key&&n.key!==dp.key){u("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(n.version&&n.version!==dp.AMap.version){u("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var nt=[];n.plugins&&n.plugins.forEach(function(Kt){dp.AMap.plugins.indexOf(Kt)===-1&&nt.push(Kt)}),fb(function(){nt.length&&window.AMap.plugin(nt,function(){o(window.AMap)})})}}));case 1:case"end":return t.stop()}},s)}));return function(n){return a.apply(this,arguments)}}();function U1(){delete window.AMap,dp={key:"",AMap:{version:"1.4.15",plugins:[]}},ev={AMap:hp.notload},lb={AMap:[]}}var hb={load:Z1,reset:U1},vm=Math.PI/180,$1=function(){function a(){(0,Cr.Z)(this,a),(0,bt.Z)(this,"projectionMatrix",Vo.create()),(0,bt.Z)(this,"viewMatrix",Vo.create()),(0,bt.Z)(this,"viewProjectionMatrix",Vo.create()),(0,bt.Z)(this,"ViewProjectionMatrixUncentered",Vo.create()),(0,bt.Z)(this,"viewUncenteredMatrix",Vo.create())}return(0,Nr.Z)(a,[{key:"syncWithMapCamera",value:function(n){var r=n.zoom,t=r===void 0?1:r,o=n.pitch,u=o===void 0?0:o,d=n.bearing,S=d===void 0?0:d,z=n.center,de=z===void 0?[0,0]:z,be=n.offsetOrigin,it=be===void 0?[0,0]:be,nt=n.cameraHeight,Kt=nt===void 0?1:nt,tr=n.aspect,Ir=tr===void 0?1:tr,jr=n.near,on=jr===void 0?.1:jr,tn=n.far,Yn=tn===void 0?1e3:tn,ci=n.fov,Zi=ci===void 0?0:ci;this.zoom=t,this.center=de;var zi=u*vm,pa=(360-S)*vm;Vo.perspective(this.projectionMatrix,Zi,Ir,on,Yn);var _o=qo.fromValues(Kt*Math.sin(zi)*Math.sin(pa),-Kt*Math.sin(zi)*Math.cos(pa),Kt*Math.cos(zi)),wo=qo.fromValues(-Math.cos(zi)*Math.sin(pa),Math.cos(zi)*Math.cos(pa),Math.sin(zi));Vo.lookAt(this.viewMatrix,_o,qo.fromValues(0,0,0),wo),this.viewUncenteredMatrix=Vo.clone(this.viewMatrix),Vo.translate(this.viewMatrix,this.viewMatrix,qo.fromValues(-it[0],it[1],0)),Vo.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Vo.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var n=(0,xi.Z)(this.center,2),r=n[0],t=n[1];return[r,t]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n){var r=85.0511287798,t=Math.max(Math.min(r,n[1]),-r),o=256<<20,u=Math.PI/180,d=n[0]*u,S=t*u;S=Math.log(Math.tan(Math.PI/4+S/2));var z=.5/Math.PI,de=.5,be=-.5/Math.PI;return u=.5,d=o*(z*d+de)-215440491,S=-(o*(be*S+u)-106744817),[d,S]}}]),a}(),Gg=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],j1,Yv;function db(a){var s=Wg();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Wg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}window.forceWebGL=!0;var tg="15cd8a57710d40c9b7c0e3cc120f1200",pb="1.4.15",Xg=!1,rg=[],vb=12,H1=(j1=(0,ba.b2)(),j1(Yv=function(a){(0,kr.Z)(n,a);var s=db(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"version",fl.G["GAODE1.x"]),(0,bt.Z)((0,or.Z)(r),"handleCameraChanged",function(d){var S=d.camera,z=S.fov,de=S.near,be=S.far,it=S.height,nt=S.pitch,Kt=S.rotation,tr=S.aspect,Ir=S.position,jr=r.getCenter(),on=jr.lng,tn=jr.lat;if(r.emit("mapchange"),r.cameraChangedCallback){r.viewport.syncWithMapCamera({aspect:tr,bearing:360-Kt,far:be,fov:z,cameraHeight:it,near:de,pitch:nt,zoom:r.map.getZoom()-1,center:[on,tn],offsetOrigin:[Ir.x,Ir.y]});var Yn=r.config.offsetZoom,ci=Yn===void 0?vb:Yn;r.viewport.getZoom()>ci?r.coordinateSystemService.setCoordinateSystem(Te.lo.P20_OFFSET):r.coordinateSystemService.setCoordinateSystem(Te.lo.P20),r.cameraChangedCallback(r.viewport)}}),r}return(0,Nr.Z)(n,[{key:"getModelMatrix",value:function(t,o,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],S=this.viewport.projectFlat(t),z=Vo.create();return Vo.translate(z,z,qo.fromValues(S[0],S[1],o)),Vo.scale(z,z,qo.fromValues(d[0],d[1],d[2])),Vo.rotateX(z,z,u[0]),Vo.rotateY(z,z,u[1]),Vo.rotateZ(z,z,u[2]),z}},{key:"init",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn;return fe().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return d=this.config,S=d.id,z=d.style,de=z===void 0?"light":z,be=d.minZoom,it=be===void 0?0:be,nt=d.maxZoom,Kt=nt===void 0?18:nt,tr=d.token,Ir=tr===void 0?tg:tr,jr=d.mapInstance,on=d.plugin,tn=on===void 0?[]:on,Yn=(0,ls.Z)(d,Gg),Zi.next=3,new Promise(function(zi){var pa=function(){if(jr)u.map=jr,u.$mapContainer=u.map.getContainer(),setTimeout(function(){u.map.on("camerachange",u.handleCameraChanged),zi()},30);else{u.$mapContainer=u.creatMapContainer(S);var wo=(0,ge.Z)({mapStyle:u.getMapStyleValue(de),zooms:[it,Kt],viewMode:"3D"},Yn);wo.zoom&&(wo.zoom+=1);var Ba=new AMap.Map(u.$mapContainer,wo);Ba.on("camerachange",u.handleCameraChanged),Ba.on("camerachange",function(){setTimeout(function(){return u.handleAfterMapChange()})}),u.map=Ba,setTimeout(function(){zi()},10)}};!Xg&&!jr?(Ir===tg&&console.warn(u.configService.getSceneWarninfo("MapToken")),Xg=!0,tn.push("Map3D"),hb.load({key:Ir,version:pb,plugins:tn}).then(function(_o){pa(),rg.length&&(rg.forEach(function(wo){return wo()}),rg=[])}).catch(function(_o){throw new Error(_o)})):Xg&&window.AMap||jr?pa():rg.push(pa)});case 3:this.viewport=new $1;case 4:case"end":return Zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"meterToCoord",value:function(t,o){var u=AMap.GeometryUtil.distance((0,O0.Z)(AMap.LngLat,(0,le.Z)(t)),(0,O0.Z)(AMap.LngLat,(0,le.Z)(o))),d=this.lngLatToCoord(t),S=(0,xi.Z)(d,2),z=S[0],de=S[1],be=this.lngLatToCoord(o),it=(0,xi.Z)(be,2),nt=it[0],Kt=it[1],tr=Math.sqrt(Math.pow(z-nt,2)+Math.pow(de-Kt,2));return tr/u}},{key:"updateView",value:function(t){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(t){var o,u=(o=this.getContainer())===null||o===void 0?void 0:o.getElementsByClassName("amap-layer")[0],d=t==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return d}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}}]),n}(ub.Z))||Yv);function V1(a){var s=mb();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function mb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gb=function(a){(0,kr.Z)(n,a);var s=V1(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getServiceConstructor",value:function(){return H1}}]),n}(pm.Z),G1=g(10438),W1=g(99874),yb=g.n(W1);function X1(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=_b(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function _b(a,s){if(a){if(typeof a=="string")return Kg(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kg(a,s)}}function Kg(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var mm;function Yg(a,s,n){var r=n-s,t=((a-s)%r+r)%r+s;return t===s?n:t}function tv(a,s,n){return Math.min(n,Math.max(s,a))}function Tp(a,s,n){return a*(1-n)+s*n}function qg(a,s,n,r){var t=new(yb())(a,s,n,r);return function(o){return t.solve(o)}}var Qg=qg(.25,.1,.25,1);function K1(){return tt.eW||!tt.vO.matchMedia?!1:(mm==null&&(mm=tt.vO.matchMedia("(prefers-reduced-motion: reduce)")),mm.matches)}function Jg(a,s){var n={},r=X1(s),t;try{for(r.s();!(t=r.n()).done;){var o=t.value;o in a&&(n[o]=a[o])}}catch(u){r.e(u)}finally{r.f()}return n}var qv=tt.eW?Date.now.bind(Date):tt.vO.performance&&tt.vO.performance.now?tt.vO.performance.now.bind(tt.vO.performance):Date.now.bind(Date),xb=tt.vO.requestAnimationFrame||tt.vO.mozRequestAnimationFrame||tt.vO.webkitRequestAnimationFrame||tt.vO.msRequestAnimationFrame,Y1=tt.vO.cancelAnimationFrame||tt.vO.mozCancelAnimationFrame||tt.vO.webkitCancelAnimationFrame||tt.vO.msCancelAnimationFrame;function ng(a){var s=xb(a);return{cancel:function(){return Y1(s)}}}var q1=63710088e-1,Oh=function(){function a(s,n){if((0,Cr.Z)(this,a),isNaN(s)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(s,", ").concat(n,")"));if(this.lng=+s,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,Nr.Z)(a,[{key:"wrap",value:function(){return new a(Yg(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(n){var r=Math.PI/180,t=this.lat*r,o=n.lat*r,u=Math.sin(t)*Math.sin(o)+Math.cos(t)*Math.cos(o)*Math.cos((n.lng-this.lng)*r),d=q1*Math.acos(Math.min(u,1));return d}}],[{key:"convert",value:function(n){if(n instanceof a)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new a(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&(0,Ne.Z)(n)==="object"&&n!==null){var r="lng"in n?n.lng:n.lon;return new a(Number(r),Number(n.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),a}(),gm=function(){function a(s,n){(0,Cr.Z)(this,a),s&&(n?this.setSouthWest(s).setNorthEast(n):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}return(0,Nr.Z)(a,[{key:"setNorthEast",value:function(n){return this.ne=n instanceof Oh?new Oh(n.lng,n.lat):Oh.convert(n),this}},{key:"setSouthWest",value:function(n){return this.sw=n instanceof Oh?new Oh(n.lng,n.lat):Oh.convert(n),this}},{key:"extend",value:function(n){var r=this.sw,t=this.ne,o,u;if(n instanceof Oh)o=n,u=n;else if(n instanceof a){if(o=n.sw,u=n.ne,!o||!u)return this}else{if(Array.isArray(n))if(n.length===4||n.every(Array.isArray)){var d=n;return this.extend(a.convert(d))}else{var S=n;return this.extend(Oh.convert(S))}return this}return!r&&!t?(this.sw=new Oh(o.lng,o.lat),this.ne=new Oh(u.lng,u.lat)):(r.lng=Math.min(o.lng,r.lng),r.lat=Math.min(o.lat,r.lat),t.lng=Math.max(u.lng,t.lng),t.lat=Math.max(u.lat,t.lat)),this}},{key:"getCenter",value:function(){return new Oh((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Oh(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Oh(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(n){var r=Oh.convert(n),t=r.lng,o=r.lat,u=this.sw.lat<=o&&o<=this.ne.lat,d=this.sw.lng<=t&&t<=this.ne.lng;return this.sw.lng>this.ne.lng&&(d=this.sw.lng>=t&&t>=this.ne.lng),u&&d}}],[{key:"convert",value:function(n){return n instanceof a?n:new a(n)}}]),a}(),mc=function(){function a(s,n){(0,Cr.Z)(this,a),this.x=s,this.y=n}return(0,Nr.Z)(a,[{key:"clone",value:function(){return new a(this.x,this.y)}},{key:"_add",value:function(n){return this.x+=n.x,this.y+=n.y,this}},{key:"add",value:function(n){return this.clone()._add(n)}},{key:"_sub",value:function(n){return this.x-=n.x,this.y-=n.y,this}},{key:"sub",value:function(n){return this.clone()._sub(n)}},{key:"_multByPoint",value:function(n){return this.x*=n.x,this.y*=n.y,this}},{key:"multByPoint",value:function(n){return this.clone()._multByPoint(n)}},{key:"_divByPoint",value:function(n){return this.x/=n.x,this.y/=n.y,this}},{key:"divByPoint",value:function(n){return this.clone()._divByPoint(n)}},{key:"_mult",value:function(n){return this.x*=n,this.y*=n,this}},{key:"mult",value:function(n){return this.clone()._mult(n)}},{key:"_div",value:function(n){return this.x/=n,this.y/=n,this}},{key:"div",value:function(n){return this.clone()._div(n)}},{key:"_rotate",value:function(n){var r=Math.cos(n),t=Math.sin(n),o=r*this.x-t*this.y,u=t*this.x+r*this.y;return this.x=o,this.y=u,this}},{key:"rotate",value:function(n){return this.clone()._rotate(n)}},{key:"_rotateAround",value:function(n,r){var t=Math.cos(n),o=Math.sin(n),u=r.x+t*(this.x-r.x)-o*(this.y-r.y),d=r.y+o*(this.x-r.x)+t*(this.y-r.y);return this.x=u,this.y=d,this}},{key:"roateAround",value:function(n,r){return this.clone()._rotateAround(n,r)}},{key:"_matMult",value:function(n){var r=n[0]*this.x+n[1]*this.y,t=n[2]*this.x+n[3]*this.y;return this.x=r,this.y=t,this}},{key:"matMult",value:function(n){return this.clone()._matMult(n)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var n=this.y;return this.y=this.x,this.x=-n,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(n){return this.x===n.x&&this.y===n.y}},{key:"dist",value:function(n){return Math.sqrt(this.distSqr(n))}},{key:"distSqr",value:function(n){var r=n.x-this.x,t=n.y-this.y;return r*r+t*t}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(n){return Math.atan2(this.y-n.y,this.x-n.x)}},{key:"angleWith",value:function(n){return this.angleWithSep(n.x,n.y)}},{key:"angleWithSep",value:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r)}}],[{key:"convert",value:function(n){return n instanceof a?n:Array.isArray(n)?new a(n[0],n[1]):n}}]),a}(),Q1=g(49685);function bb(){var a=new Q1.WT(4);return Q1.WT!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a}function U2(a){var s=new glMatrix.ARRAY_TYPE(4);return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s}function $2(a,s){return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a}function Eb(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a}function J1(a,s,n,r){var t=new glMatrix.ARRAY_TYPE(4);return t[0]=a,t[1]=s,t[2]=n,t[3]=r,t}function j2(a,s,n,r,t){return a[0]=s,a[1]=n,a[2]=r,a[3]=t,a}function H2(a,s){if(a===s){var n=s[1];a[1]=s[2],a[2]=n}else a[0]=s[0],a[1]=s[2],a[2]=s[1],a[3]=s[3];return a}function ey(a,s){var n=s[0],r=s[1],t=s[2],o=s[3],u=n*o-t*r;return u?(u=1/u,a[0]=o*u,a[1]=-r*u,a[2]=-t*u,a[3]=n*u,a):null}function V2(a,s){var n=s[0];return a[0]=s[3],a[1]=-s[1],a[2]=-s[2],a[3]=n,a}function G2(a){return a[0]*a[3]-a[2]*a[1]}function e_(a,s,n){var r=s[0],t=s[1],o=s[2],u=s[3],d=n[0],S=n[1],z=n[2],de=n[3];return a[0]=r*d+o*S,a[1]=t*d+u*S,a[2]=r*z+o*de,a[3]=t*z+u*de,a}function Sb(a,s,n){var r=s[0],t=s[1],o=s[2],u=s[3],d=Math.sin(n),S=Math.cos(n);return a[0]=r*S+o*d,a[1]=t*S+u*d,a[2]=r*-d+o*S,a[3]=t*-d+u*S,a}function W2(a,s,n){var r=s[0],t=s[1],o=s[2],u=s[3],d=n[0],S=n[1];return a[0]=r*d,a[1]=t*d,a[2]=o*S,a[3]=u*S,a}function X2(a,s){var n=Math.sin(s),r=Math.cos(s);return a[0]=r,a[1]=n,a[2]=-n,a[3]=r,a}function K2(a,s){return a[0]=s[0],a[1]=0,a[2]=0,a[3]=s[1],a}function Y2(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function q2(a){return Math.hypot(a[0],a[1],a[2],a[3])}function Q2(a,s,n,r){return a[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-a[2]*n[1],[a,s,n]}function J2(a,s,n){return a[0]=s[0]+n[0],a[1]=s[1]+n[1],a[2]=s[2]+n[2],a[3]=s[3]+n[3],a}function eE(a,s,n){return a[0]=s[0]-n[0],a[1]=s[1]-n[1],a[2]=s[2]-n[2],a[3]=s[3]-n[3],a}function tE(a,s){return a[0]===s[0]&&a[1]===s[1]&&a[2]===s[2]&&a[3]===s[3]}function rE(a,s){var n=a[0],r=a[1],t=a[2],o=a[3],u=s[0],d=s[1],S=s[2],z=s[3];return Math.abs(n-u)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-d)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(t-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(S))&&Math.abs(o-z)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(z))}function nE(a,s,n){return a[0]=s[0]*n,a[1]=s[1]*n,a[2]=s[2]*n,a[3]=s[3]*n,a}function iE(a,s,n,r){return a[0]=s[0]+n[0]*r,a[1]=s[1]+n[1]*r,a[2]=s[2]+n[2]*r,a[3]=s[3]+n[3]*r,a}var aE=null,oE=null,wb=function(){function a(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,Cr.Z)(this,a),isNaN(s)||s<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(t)||t<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=n,this.left=r,this.right=t}return(0,Nr.Z)(a,[{key:"interpolate",value:function(n,r,t){return r.top!=null&&n.top!=null&&(this.top=Tp(n.top,r.top,t)),r.bottom!=null&&n.bottom!=null&&(this.bottom=Tp(n.bottom,r.bottom,t)),r.left!=null&&n.left!=null&&(this.left=Tp(n.left,r.left,t)),r.right!=null&&n.right!=null&&(this.right=Tp(n.right,r.right,t)),this}},{key:"getCenter",value:function(n,r){var t=tv((this.left+n-this.right)/2,0,n),o=tv((this.top+r-this.bottom)/2,0,r);return new mc(t,o)}},{key:"equals",value:function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}},{key:"clone",value:function(){return new a(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),a}(),t_=2*Math.PI*q1;function r_(a){return t_*Math.cos(a*Math.PI/180)}function ig(a){return(180+a)/360}function ag(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function ty(a,s){return a/r_(s)}function Cb(a){return a*360-180}function ry(a){var s=180-a*360;return 360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90}function Ab(a,s){return a*r_(ry(s))}function Tb(a){return 1/Math.cos(a*Math.PI/180)}var I0=function(){function a(s,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,Cr.Z)(this,a),this.x=+s,this.y=+n,this.z=+r}return(0,Nr.Z)(a,[{key:"toLngLat",value:function(){return new Oh(Cb(this.x),ry(this.y))}},{key:"toAltitude",value:function(){return Ab(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/t_*Tb(ry(this.y))}}],[{key:"fromLngLat",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=Oh.convert(n);return new a(ig(t.lng),ag(t.lat),ty(r,t.lat))}}]),a}();function n_(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=i_(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function i_(a,s){if(a){if(typeof a=="string")return a_(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a_(a,s)}}function a_(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var sE=8192,Mb=function(){function a(s,n,r,t,o){(0,Cr.Z)(this,a),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=o===void 0?!0:o,this._minZoom=s||0,this._maxZoom=n||22,this._minPitch=r==null?0:r,this._maxPitch=t==null?60:t,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Oh(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new wb,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,Nr.Z)(a,[{key:"minZoom",get:function(){return this._minZoom},set:function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}},{key:"minPitch",get:function(){return this._minPitch},set:function(n){this._minPitch!==n&&(this._minPitch=n,this._pitch=Math.max(this._pitch,n))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(n){this._maxPitch!==n&&(this._maxPitch=n,this._pitch=Math.min(this._pitch,n))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new mc(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(n){var r=-Yg(n,-180,180)*Math.PI/180;this.angle!==r&&(this.unmodified=!1,this.angle=r,this.calcMatrices(),this.rotationMatrix=bb(),Sb(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(n){var r=tv(n,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==r&&(this.unmodified=!1,this._pitch=r,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this.unmodified=!1,this._fov=n/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(n){var r=Math.min(Math.max(n,this._minZoom),this._maxZoom);this._zoom!==r&&(this.unmodified=!1,this._zoom=r,this.scale=this.zoomScale(r),this.tileZoom=Math.floor(r),this.zoomFraction=r-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this.unmodified=!1,this._center=n,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(n){this.edgeInsets.equals(n)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,n,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var n=new a(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n.center=this._center,n.zoom=this.zoom,n.angle=this.angle,n.fov=this._fov,n.pitch=this._pitch,n.unmodified=this.unmodified,n.edgeInsets=this.edgeInsets.clone(),n.calcMatrices(),n}},{key:"isPaddingEqual",value:function(n){return this.edgeInsets.equals(n)}},{key:"interpolatePadding",value:function(n,r,t){this.unmodified=!1,this.edgeInsets.interpolate(n,r,t),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(n){var r=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,r)}},{key:"resize",value:function(n,r){this.width=n,this.height=r,this.pixelsToGLUnits=[2/n,-2/r],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(n){return Math.pow(2,n)}},{key:"scaleZoom",value:function(n){return Math.log(n)/Math.LN2}},{key:"project",value:function(n){var r=tv(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new mc(ig(n.lng)*this.worldSize,ag(r)*this.worldSize)}},{key:"unproject",value:function(n){return new I0(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(n,r){var t=this.pointCoordinate(r),o=this.pointCoordinate(this.centerPoint),u=this.locationCoordinate(n),d=new I0(u.x-(t.x-o.x),u.y-(t.y-o.y));this.center=this.coordinateLocation(d),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(n){var r=0,t=new Float64Array([n.x,n.y,0,1]),o=new Float64Array([n.x,n.y,1,1]);Ct.fF(t,t,this.pixelMatrixInverse),Ct.fF(o,o,this.pixelMatrixInverse);var u=t[3],d=o[3],S=t[0]/u,z=o[0]/d,de=t[1]/u,be=o[1]/d,it=t[2]/u,nt=o[2]/d,Kt=it===nt?0:(r-it)/(nt-it);return new I0(Tp(S,z,Kt)/this.worldSize,Tp(de,be,Kt)/this.worldSize)}},{key:"getBounds",value:function(){return new gm().extend(this.pointLocation(new mc(0,0))).extend(this.pointLocation(new mc(this.width,0))).extend(this.pointLocation(new mc(this.width,this.height))).extend(this.pointLocation(new mc(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new gm([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new mc(0,0)),r=new Float32Array([n.x*this.worldSize,n.y*this.worldSize,0,1]),t=Ct.fF(r,r,this.pixelMatrix);return t[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var n=this._pitch,r=Math.tan(n)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new mc(0,r))}},{key:"getCameraQueryGeometry",value:function(n){var r=this.getCameraPoint();if(n.length===1)return[n[0],r];var t=r.x,o=r.y,u=r.x,d=r.y,S=n_(n),z;try{for(S.s();!(z=S.n()).done;){var de=z.value;t=Math.min(t,de.x),o=Math.min(o,de.y),u=Math.max(u,de.x),d=Math.max(d,de.y)}}catch(be){S.e(be)}finally{S.f()}return[new mc(t,o),new mc(u,o),new mc(u,d),new mc(t,d),new mc(t,o)]}},{key:"coordinatePoint",value:function(n){var r=Ct.al(n.x*this.worldSize,n.y*this.worldSize,0,1);return Ct.fF(r,r,this.pixelMatrix),new mc(r[0]/r[3],r[1]/r[3])}},{key:"locationPoint",value:function(n){return this.coordinatePoint(this.locationCoordinate(n))}},{key:"pointLocation",value:function(n){return this.coordinateLocation(this.pointCoordinate(n))}},{key:"locationCoordinate",value:function(n){return I0.fromLngLat(n)}},{key:"coordinateLocation",value:function(n){return n.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var n=-90,r=90,t=-180,o=180,u,d,S,z,de=this.size,be=this.unmodified;if(this.latRange){var it=this.latRange;n=ag(it[1])*this.worldSize,r=ag(it[0])*this.worldSize,u=r-n<de.y?de.y/(r-n):0}if(this.lngRange){var nt=this.lngRange;t=ig(nt[0])*this.worldSize,o=ig(nt[1])*this.worldSize,d=o-t<de.x?de.x/(o-t):0}var Kt=this.point,tr=Math.max(d||0,u||0);if(tr){this.center=this.unproject(new mc(d?(o+t)/2:Kt.x,u?(r+n)/2:Kt.y)),tt.eW?this.zoom=Math.max(this.zoom,Math.max(-1,this.minZoom)):this.zoom+=this.scaleZoom(tr),this.unmodified=be,this.constraining=!1;return}if(this.latRange){var Ir=Kt.y,jr=de.y/2;Ir-jr<n&&(z=n+jr),Ir+jr>r&&(z=r-jr)}if(this.lngRange){var on=Kt.x,tn=de.x/2;on-tn<t&&(S=t+tn),on+tn>o&&(S=o-tn)}(S!==void 0||z!==void 0)&&(this.center=this.unproject(new mc(S!==void 0?S:Kt.x,z!==void 0?z:Kt.y))),this.unmodified=be,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var n=this._fov/2,r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(n)*this.height;var t=Math.PI/2+this._pitch,o=this._fov*(.5+r.y/this.height),u=Math.sin(o)*this.cameraToCenterDistance/Math.sin(tv(Math.PI-t-o,.01,Math.PI-.01)),d=this.point,S=d.x,z=d.y,de=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance,be=de*1.01,it=this.height/50,nt=new Float64Array(16);Vo.perspective(nt,this._fov,this.width/this.height,it,be),nt[8]=-r.x*2/this.width,nt[9]=r.y*2/this.height,Vo.scale(nt,nt,[1,-1,1]),Vo.translate(nt,nt,[0,0,-this.cameraToCenterDistance]),Vo.rotateX(nt,nt,this._pitch),Vo.rotateZ(nt,nt,this.angle),Vo.translate(nt,nt,[-S,-z,0]),this.mercatorMatrix=Vo.scale([],nt,[this.worldSize,this.worldSize,this.worldSize]),Vo.scale(nt,nt,[1,1,ty(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nt,this.invProjMatrix=Vo.invert([],this.projMatrix);var Kt=this.width%2/2,tr=this.height%2/2,Ir=Math.cos(this.angle),jr=Math.sin(this.angle),on=S-Math.round(S)+Ir*Kt+jr*tr,tn=z-Math.round(z)+Ir*tr+jr*Kt,Yn=new Float64Array(nt);if(Vo.translate(Yn,Yn,[on>.5?on-1:on,tn>.5?tn-1:tn,0]),this.alignedProjMatrix=Yn,nt=Vo.create(),Vo.scale(nt,nt,[this.width/2,-this.height/2,1]),Vo.translate(nt,nt,[1,-1,0]),this.labelPlaneMatrix=nt,nt=Vo.create(),Vo.scale(nt,nt,[1,-1,1]),Vo.translate(nt,nt,[-1,-1,0]),Vo.scale(nt,nt,[2/this.width,2/this.height,1]),this.glCoordMatrix=nt,this.pixelMatrix=Vo.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),nt=Vo.invert(new Float64Array(16),this.pixelMatrix),!nt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=nt,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),a}(),Pb=g(82492),Ov=g.n(Pb),kf=(0,Nr.Z)(function a(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,Cr.Z)(this,a),Ov()(this,n),this.type=s});function Ob(a){var s=Ib();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ib(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var o_=function(a){(0,kr.Z)(n,a);var s=Ob(n);function n(r){var t;(0,Cr.Z)(this,n),t=s.call(this),(0,bt.Z)((0,or.Z)(t),"renderFrameCallback",function(){var de=Math.min((qv()-t.easeStart)/t.easeOptions.duration,1);t.onEaseFrame(t.easeOptions.easing(de)),de<1?t.easeFrameId=t.requestRenderFrame(t.renderFrameCallback):t.stop()}),t.options=r;var o=r.minZoom,u=r.maxZoom,d=r.minPitch,S=r.maxPitch,z=r.renderWorldCopies;return t.moving=!1,t.zooming=!1,t.bearingSnap=r.bearingSnap,t.pitchEnabled=r.pitchEnabled,t.rotateEnabled=r.rotateEnabled,t.transform=new Mb(o,u,d,S,z),t}return(0,Nr.Z)(n,[{key:"requestRenderFrame",value:function(t){return 0}},{key:"cancelRenderFrame",value:function(t){}},{key:"getCenter",value:function(){var t=this.transform.center,o=t.lng,u=t.lat;return new Oh(o,u)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(t,o){return this.jumpTo({center:t},o)}},{key:"setPitch",value:function(t,o){return this.jumpTo({pitch:t},o),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(t,o,u){return this.easeTo((0,ht.merge)({center:t},o),u)}},{key:"zoomOut",value:function(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}},{key:"setBearing",value:function(t,o){return this.jumpTo({bearing:t},o),this}},{key:"setZoom",value:function(t,o){return this.jumpTo({zoom:t},o),this}},{key:"zoomIn",value:function(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}},{key:"zoomTo",value:function(t,o,u){return this.easeTo((0,ht.merge)({zoom:t},o),u)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,o){return this.jumpTo({padding:t},o),this}},{key:"rotateTo",value:function(t,o,u){return this.easeTo((0,ht.merge)({bearing:t},o),u)}},{key:"resetNorth",value:function(t,o){return this.rotateTo(0,(0,ht.merge)({duration:1e3},t),o),this}},{key:"resetNorthPitch",value:function(t,o){return this.easeTo((0,ht.merge)({bearing:0,pitch:0,duration:1e3},t),o),this}},{key:"fitBounds",value:function(t,o,u){return this.fitInternal(this.cameraForBounds(t,o),o,u)}},{key:"cameraForBounds",value:function(t,o){return t=gm.convert(t),this.cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,o)}},{key:"snapToNorth",value:function(t,o){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(t,o):this}},{key:"jumpTo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;this.stop();var u=this.transform,d=!1,S=!1,z=!1;return t.zoom&&u.zoom!==+t.zoom&&(d=!0,u.zoom=+t.zoom),t.center!==void 0&&(u.center=Oh.convert(t.center)),t.bearing&&u.bearing!==+t.bearing&&(S=!0,u.bearing=+t.bearing),t.pitch&&u.pitch!==+t.pitch&&(z=!0,u.pitch=+t.pitch),t.padding!=null&&!u.isPaddingEqual(t.padding)&&(u.padding=t.padding),this.emit("movestart",new kf("movestart",o)),this.emit("move",new kf("move",o)),d&&(this.emit("zoomstart",new kf("zoomstart",o)),this.emit("zoom",new kf("zoom",o)),this.emit("zoomend",new kf("zoomend",o))),S&&(this.emit("rotatestart",new kf("rotatestart",o)),this.emit("rotate",new kf("rotate",o)),this.emit("rotateend",new kf("rotateend",o))),z&&(this.emit("pitchstart",new kf("pitchstart",o)),this.emit("pitch",new kf("pitch",o)),this.emit("pitchend",new kf("pitchend",o))),this.emit("moveend",new kf("moveend",o))}},{key:"easeTo",value:function(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;o=(0,ht.merge)({offset:[0,0],duration:500,easing:Qg},o),(o.animate===!1||!o.essential&&K1())&&(o.duration=0);var d=this.transform,S=this.getZoom(),z=this.getBearing(),de=this.getPitch(),be=this.getPadding(),it=o.zoom?+o.zoom:S,nt=o.bearing?this.normalizeBearing(o.bearing,z):z,Kt=o.pitch?+o.pitch:de,tr=o.padding?o.padding:d.padding,Ir=mc.convert(o.offset),jr=d.centerPoint.add(Ir),on=d.pointLocation(jr),tn=Oh.convert(o.center||on);this.normalizeCenter(tn);var Yn=d.project(on),ci=d.project(tn).sub(Yn),Zi=d.zoomScale(it-S),zi,pa;o.around&&(zi=Oh.convert(o.around),pa=d.locationPoint(zi));var _o={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||it!==S,this.rotating=this.rotating||z!==nt,this.pitching=this.pitching||Kt!==de,this.padding=!d.isPaddingEqual(tr),this.easeId=o.easeId,this.prepareEase(u,o.noMoveStart,_o),clearTimeout(this.easeEndTimeoutID),this.ease(function(wo){if(t.zooming&&(d.zoom=Tp(S,it,wo)),t.rotating&&t.rotateEnabled&&(d.bearing=Tp(z,nt,wo)),t.pitching&&t.pitchEnabled&&(d.pitch=Tp(de,Kt,wo)),t.padding&&(d.interpolatePadding(be,tr,wo),jr=d.centerPoint.add(Ir)),zi)d.setLocationAtPoint(zi,pa);else{var Ba=d.zoomScale(d.zoom-S),ms=it>S?Math.min(2,Zi):Math.max(.5,Zi),au=Math.pow(ms,1-wo),Al=d.unproject(Yn.add(ci.mult(wo*au)).mult(Ba));d.setLocationAtPoint(d.renderWorldCopies?Al.wrap():Al,jr)}t.fireMoveEvents(u)},function(wo){t.afterEase(u,wo)},o),this}},{key:"flyTo",value:function(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;if(!o.essential&&K1()){var d=Jg(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(d,u)}this.stop(),o=(0,ht.merge)({offset:[0,0],speed:1.2,curve:1.42,easing:Qg},o);var S=this.transform,z=this.getZoom(),de=this.getBearing(),be=this.getPitch(),it=this.getPadding(),nt=o.zoom?tv(+o.zoom,S.minZoom,S.maxZoom):z,Kt=o.bearing?this.normalizeBearing(o.bearing,de):de,tr=o.pitch?+o.pitch:be,Ir="padding"in o?o.padding:S.padding,jr=S.zoomScale(nt-z),on=mc.convert(o.offset),tn=S.centerPoint.add(on),Yn=S.pointLocation(tn),ci=Oh.convert(o.center||Yn);this.normalizeCenter(ci);var Zi=S.project(Yn),zi=S.project(ci).sub(Zi),pa=o.curve,_o=Math.max(S.width,S.height),wo=_o/jr,Ba=zi.mag();if("minZoom"in o){var ms=tv(Math.min(o.minZoom,z,nt),S.minZoom,S.maxZoom),au=_o/S.zoomScale(ms-z);pa=Math.sqrt(au/Ba*2)}var Al=pa*pa;function nd(Zh){var Ld=(wo*wo-_o*_o+(Zh?-1:1)*Al*Al*Ba*Ba)/(2*(Zh?wo:_o)*Al*Ba);return Math.log(Math.sqrt(Ld*Ld+1)-Ld)}function Ih(Zh){return(Math.exp(Zh)-Math.exp(-Zh))/2}function Rh(Zh){return(Math.exp(Zh)+Math.exp(-Zh))/2}function md(Zh){return Ih(Zh)/Rh(Zh)}var hh=nd(0),tp=function(Ld){return Rh(hh)/Rh(hh+pa*Ld)},Fv=function(Ld){return _o*((Rh(hh)*md(hh+pa*Ld)-Ih(hh))/Al)/Ba},Gp=(nd(1)-hh)/pa;if(Math.abs(Ba)<1e-6||!isFinite(Gp)){if(Math.abs(_o-wo)<1e-6)return this.easeTo(o,u);var D0=wo<_o?-1:1;Gp=Math.abs(Math.log(wo/_o))/pa,Fv=function(){return 0},tp=function(Ld){return Math.exp(D0*pa*Ld)}}if("duration"in o)o.duration=+o.duration;else{var Dp="screenSpeed"in o?+o.screenSpeed/pa:+o.speed;o.duration=1e3*Gp/Dp}return o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this.zooming=!0,this.rotating=de!==Kt,this.pitching=tr!==be,this.padding=!S.isPaddingEqual(Ir),this.prepareEase(u,!1),this.ease(function(Zh){var Ld=Zh*Gp,Em=1/tp(Ld);S.zoom=Zh===1?nt:z+S.scaleZoom(Em),t.rotating&&(S.bearing=Tp(de,Kt,Zh)),t.pitching&&(S.pitch=Tp(be,tr,Zh)),t.padding&&(S.interpolatePadding(it,Ir,Zh),tn=S.centerPoint.add(on));var Sm=Zh===1?ci:S.unproject(Zi.add(zi.mult(Fv(Ld))).mult(Em));S.setLocationAtPoint(S.renderWorldCopies?Sm.wrap():Sm,tn),t.fireMoveEvents(u)},function(){return t.afterEase(u)},o),this}},{key:"fitScreenCoordinates",value:function(t,o,u,d,S){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(mc.convert(t)),this.transform.pointLocation(mc.convert(o)),u,d),d,S)}},{key:"stop",value:function(t,o){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var u=this.onEaseEnd;delete this.onEaseEnd,u.call(this,o)}return this}},{key:"normalizeBearing",value:function(t,o){t=Yg(t,-180,180);var u=Math.abs(t-o);return Math.abs(t-360-o)<u&&(t-=360),Math.abs(t+360-o)<u&&(t+=360),t}},{key:"normalizeCenter",value:function(t){var o=this.transform;if(!(!o.renderWorldCopies||o.lngRange)){var u=t.lng-o.center.lng;t.lng+=u>180?-360:u<-180?360:0}}},{key:"fireMoveEvents",value:function(t){this.emit("move",new kf("move",t)),this.zooming&&this.emit("zoom",new kf("zoom",t)),this.rotating&&this.emit("rotate",new kf("rotate",t)),this.pitching&&this.emit("rotate",new kf("pitch",t))}},{key:"prepareEase",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!o&&!u.moving&&this.emit("movestart",new kf("movestart",t)),this.zooming&&!u.zooming&&this.emit("zoomstart",new kf("zoomstart",t)),this.rotating&&!u.rotating&&this.emit("rotatestart",new kf("rotatestart",t)),this.pitching&&!u.pitching&&this.emit("pitchstart",new kf("pitchstart",t))}},{key:"afterEase",value:function(t,o){if(!(this.easeId&&o&&this.easeId===o)){delete this.easeId;var u=this.zooming,d=this.rotating,S=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,u&&this.emit("zoomend",new kf("zoomend",t)),d&&this.emit("rotateend",new kf("rotateend",t)),S&&this.emit("pitchend",new kf("pitchend",t)),this.emit("moveend",new kf("moveend",t))}}},{key:"ease",value:function(t,o,u){u.animate===!1||u.duration===0?(t(1),o()):(this.easeStart=qv(),this.easeOptions=u,this.onEaseFrame=t,this.onEaseEnd=o,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(t,o,u,d){var S={top:0,bottom:0,right:0,left:0};if(d=(0,ht.merge)({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},d),typeof d.padding=="number"){var z=d.padding;d.padding={top:z,bottom:z,right:z,left:z}}d.padding=(0,ht.merge)(S,d.padding);var de=this.transform,be=de.padding,it=de.project(Oh.convert(t)),nt=de.project(Oh.convert(o)),Kt=it.rotate(-u*Math.PI/180),tr=nt.rotate(-u*Math.PI/180),Ir=new mc(Math.max(Kt.x,tr.x),Math.max(Kt.y,tr.y)),jr=new mc(Math.min(Kt.x,tr.x),Math.min(Kt.y,tr.y)),on=Ir.sub(jr),tn=(de.width-(be.left+be.right+d.padding.left+d.padding.right))/on.x,Yn=(de.height-(be.top+be.bottom+d.padding.top+d.padding.bottom))/on.y;if(!(Yn<0||tn<0)){var ci=Math.min(de.scaleZoom(de.scale*Math.min(tn,Yn)),d.maxZoom),Zi=mc.convert(d.offset),zi=(d.padding.left-d.padding.right)/2,pa=(d.padding.top-d.padding.bottom)/2,_o=new mc(Zi.x+zi,Zi.y+pa),wo=_o.mult(de.scale/de.zoomScale(ci)),Ba=de.unproject(it.add(nt).div(2).sub(wo));return{center:Ba,zoom:ci,bearing:u}}}},{key:"fitInternal",value:function(t,o,u){return t?(o=(0,ht.merge)(t,o),delete o.padding,o.linear?this.easeTo(o,u):this.flyTo(o,u)):this}}]),n}(Vr.EventEmitter);function ny(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=iy(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function iy(a,s){if(a){if(typeof a=="string")return s_(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(a,s)}}function s_(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var Yd={},qd=Yd;Yd.create=function(a,s,n){var r=tt.vO.document.createElement(a);return s!==void 0&&(r.className=s),n&&n.appendChild(r),r},Yd.createNS=function(a,s){var n=tt.vO.document.createElementNS(a,s);return n};var Qv=tt.vO.document&&tt.vO.document.documentElement.style;function u_(a){if(!Qv)return a[0];var s=ny(a),n;try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r in Qv)return r}}catch(t){s.e(t)}finally{s.f()}return a[0]}var rv=u_(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),l_;Yd.disableDrag=function(){Qv&&rv&&(l_=Qv[rv],Qv[rv]="none")},Yd.enableDrag=function(){Qv&&rv&&(Qv[rv]=l_)};var Rb=u_(["transform","WebkitTransform"]);Yd.setTransform=function(a,s){a.style[Rb]=s};var og=!1;try{var sg=Object.defineProperty({},"passive",{get:function(){og=!0}});tt.vO.addEventListener("test",sg,sg),tt.vO.removeEventListener("test",sg,sg)}catch(a){og=!1}Yd.addEventListener=function(a,s,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in r&&og?a.addEventListener(s,n,r):a.addEventListener(s,n,r.capture)},Yd.removeEventListener=function(a,s,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in r&&og?a.removeEventListener(s,n,r):a.removeEventListener(s,n,r.capture)};var Lb=function a(s){s.preventDefault(),s.stopPropagation(),tt.vO.removeEventListener("click",a,!0)};Yd.suppressClick=function(){tt.eW||(tt.vO.addEventListener("click",Lb,!0),setTimeout(function(){tt.vO.removeEventListener("click",Lb,!0)},0))},Yd.mousePos=function(a,s){if(tt.eW)return new mc(s.clientX-a.left-0,s.clientY-a.top-0);var n=a.getBoundingClientRect();return new mc(s.clientX-n.left-a.clientLeft,s.clientY-n.top-a.clientTop)},Yd.touchPos=function(a,s){if(tt.eW){var d=[],S=ny(s),z;try{for(S.s();!(z=S.n()).done;){var de=z.value;d.push(new mc(de.clientX-a.left,de.clientY-a.top))}}catch(be){S.e(be)}finally{S.f()}return d}else{var n=a.getBoundingClientRect(),r=[],t=ny(s),o;try{for(t.s();!(o=t.n()).done;){var u=o.value;r.push(new mc(u.clientX-n.left-a.clientLeft,u.clientY-n.top-a.clientTop))}}catch(be){t.e(be)}finally{t.f()}return r}},Yd.mouseButton=function(a){return tt.eW&&typeof tt.vO.InstallTrigger!="undefined"&&a.button===2&&a.ctrlKey&&tt.vO.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:a.button},Yd.remove=function(a){a.parentNode&&a.parentNode.removeChild(a)};function c_(a){var s=f_();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function f_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Hp=function(a){(0,kr.Z)(n,a);var s=c_(n);function n(r,t,o){var u,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,Cr.Z)(this,n);var S=qd.mousePos(t.getCanvasContainer(),o),z=t.unproject(S);return u=s.call(this,r,Ov()({point:S,lngLat:z,originalEvent:o},d)),u.defaultPrevented=!1,u.target=t,u}return(0,Nr.Z)(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(kf);function uE(a){var s=h_();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function h_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ay=function(a){(0,kr.Z)(n,a);var s=uE(n);function n(r,t,o){var u;(0,Cr.Z)(this,n);var d=r==="touchend"?o.changedTouches:o.touches,S=qd.touchPos(t.getCanvasContainer(),d),z=S.map(function(it){return t.unproject(it)}),de=S.reduce(function(it,nt,Kt,tr){return it.add(nt.div(tr.length))},new mc(0,0)),be=t.unproject(de);return u=s.call(this,r,{points:S,point:de,lngLats:z,lngLat:be,originalEvent:o}),u.defaultPrevented=!1,u}return(0,Nr.Z)(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(kf);function kb(a){var s=lE();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function lE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Db=function(a){(0,kr.Z)(n,a);var s=kb(n);function n(r,t,o){var u;return(0,Cr.Z)(this,n),u=s.call(this,r,{originalEvent:o}),u.defaultPrevented=!1,u}return(0,Nr.Z)(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(kf),cE=function(){function a(s){(0,Cr.Z)(this,a),this.map=s}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Hp("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(n){this.delayContextMenu?this.contextMenuEvent=n:this.map.emit(n.type,new Hp(n.type,this.map,n)),this.map.listeners("contextmenu")&&n.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),a}(),Fb=function(){function a(s,n){(0,Cr.Z)(this,a),this.map=s,this.el=s.getCanvasContainer(),this.container=s.getContainer(),this.clickTolerance=n.clickTolerance||1}return(0,Nr.Z)(a,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(n,r){this.isEnabled()&&n.shiftKey&&n.button===0&&(qd.disableDrag(),this.startPos=this.lastPos=r,this.active=!0)}},{key:"mousemoveWindow",value:function(n,r){if(this.active){var t=r;if(!(this.lastPos.equals(t)||!this.box&&t.dist(this.startPos)<this.clickTolerance)){var o=this.startPos;this.lastPos=t,this.box||(this.box=qd.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",n));var u=Math.min(o.x,t.x),d=Math.max(o.x,t.x),S=Math.min(o.y,t.y),z=Math.max(o.y,t.y);qd.setTransform(this.box,"translate(".concat(u,"px,").concat(S,"px)")),this.box&&(this.box.style.width="".concat(d-u,"px"),this.box.style.height="".concat(z-S,"px"))}}}},{key:"mouseupWindow",value:function(n,r){var t=this;if(this.active&&n.button===0){var o=this.startPos,u=r;if(this.reset(),qd.suppressClick(),o.x===u.x&&o.y===u.y)this.fireEvent("boxzoomcancel",n);else return this.map.emit("boxzoomend",new kf("boxzoomend",{originalEvent:n})),{cameraAnimation:function(S){return S.fitScreenCoordinates(o,u,t.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(n){this.active&&n.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",n))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(qd.remove(this.box),this.box=null),qd.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(n,r){return this.map.emit(n,new kf(n,{originalEvent:r}))}}]),a}(),Bb=Fb,Nb=function(){function a(){(0,Cr.Z)(this,a),this.reset()}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(n,r){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(r)},{originalEvent:n})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}();function Iv(a){var s=fE();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function fE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zb=function(a){(0,kr.Z)(n,a);var s=Iv(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"type","renderFrame"),r}return(0,Nr.Z)(n)}(kf);function Zb(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Ub(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Ub(a,s){if(a){if(typeof a=="string")return R0(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R0(a,s)}}function R0(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var oy={linearity:.3,easing:qg(0,0,.3,1)},ym=Ov()({deceleration:2500,maxSpeed:1400},oy),d_=Ov()({deceleration:20,maxSpeed:1400},oy),sy=Ov()({deceleration:1e3,maxSpeed:360},oy),$b=Ov()({deceleration:1e3,maxSpeed:90},oy),jb=function(){function a(s){(0,Cr.Z)(this,a),this.map=s,this.clear()}return(0,Nr.Z)(a,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(n){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:qv(),settings:n})}},{key:"drainInertiaBuffer",value:function(){for(var n=this.inertiaBuffer,r=qv(),t=160;n.length>0&&r-n[0].time>t;)n.shift()}},{key:"onMoveEnd",value:function(n){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var r={zoom:0,bearing:0,pitch:0,pan:new mc(0,0),pinchAround:void 0,around:void 0},t=Zb(this.inertiaBuffer),o;try{for(t.s();!(o=t.n()).done;){var u=o.value.settings;r.zoom+=u.zoomDelta||0,r.bearing+=u.bearingDelta||0,r.pitch+=u.pitchDelta||0,u.panDelta&&r.pan._add(u.panDelta),u.around&&(r.around=u.around),u.pinchAround&&(r.pinchAround=u.pinchAround)}}catch(tr){t.e(tr)}finally{t.f()}var d=this.inertiaBuffer[this.inertiaBuffer.length-1],S=d.time-this.inertiaBuffer[0].time,z={};if(r.pan.mag()){var de=_m(r.pan.mag(),S,Ov()({},ym,n||{}));z.offset=r.pan.mult(de.amount/r.pan.mag()),z.center=this.map.transform.center,ug(z,de)}if(r.zoom){var be=_m(r.zoom,S,d_);z.zoom=this.map.transform.zoom+be.amount,ug(z,be)}if(r.bearing){var it=_m(r.bearing,S,sy);z.bearing=this.map.transform.bearing+tv(it.amount,-179,179),ug(z,it)}if(r.pitch){var nt=_m(r.pitch,S,$b);z.pitch=this.map.transform.pitch+nt.amount,ug(z,nt)}if(z.zoom||z.bearing){var Kt=r.pinchAround===void 0?r.around:r.pinchAround;z.around=Kt?this.map.unproject(Kt):this.map.getCenter()}return this.clear(),Ov()(z,{noMoveStart:!0})}}}]),a}();function ug(a,s){(!a.duration||a.duration<s.duration)&&(a.duration=s.duration,a.easing=s.easing)}function _m(a,s,n){var r=n.maxSpeed,t=n.linearity,o=n.deceleration,u=tv(a*t/(s/1e3),-r,r),d=Math.abs(u)/(o*t);return{easing:n.easing,duration:d*1e3,amount:u*(d/2)}}var Hb={panStep:100,bearingStep:15,pitchStep:10},Vb=function(){function a(){(0,Cr.Z)(this,a);var s=Hb;this.panStep=s.panStep,this.bearingStep=s.bearingStep,this.pitchStep=s.pitchStep}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(n){var r=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var t=0,o=0,u=0,d=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:n.shiftKey?o=-1:(n.preventDefault(),d=-1);break;case 39:n.shiftKey?o=1:(n.preventDefault(),d=1);break;case 38:n.shiftKey?u=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?u=-1:(n.preventDefault(),S=1);break;default:return}return{cameraAnimation:function(de){var be=de.getZoom();de.easeTo({duration:300,easeId:"keyboardHandler",easing:p_,zoom:t?Math.round(be)+t*(n.shiftKey?2:1):be,bearing:de.getBearing()+o*r.bearingStep,pitch:de.getPitch()+u*r.pitchStep,offset:[-d*r.panStep,-S*r.panStep],center:de.getCenter()},{originalEvent:n})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}();function p_(a){return a*(2-a)}var Gb=Vb,Wb=function(){function a(s,n){(0,Cr.Z)(this,a),this.map=s,this.clickTolerance=n.clickTolerance}return(0,Nr.Z)(a,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(n){return this.firePreventable(new Db(n.type,this.map,n))}},{key:"mousedown",value:function(n,r){return this.mousedownPos=r,this.firePreventable(new Hp(n.type,this.map,n))}},{key:"mouseup",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"click",value:function(n,r){this.mousedownPos&&this.mousedownPos.dist(r)>=this.clickTolerance||this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"dblclick",value:function(n){return this.firePreventable(new Hp(n.type,this.map,n))}},{key:"mouseover",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"mouseout",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"touchstart",value:function(n){return this.firePreventable(new ay(n.type,this.map,n))}},{key:"touchmove",value:function(n){this.map.emit(n.type,new ay(n.type,this.map,n))}},{key:"touchend",value:function(n){this.map.emit(n.type,new ay(n.type,this.map,n))}},{key:"touchcancel",value:function(n){this.map.emit(n.type,new ay(n.type,this.map,n))}},{key:"firePreventable",value:function(n){if(this.map.emit(n.type,n),n.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),a}(),uy,Rv=0,L0=2,Xb=(uy={},(0,bt.Z)(uy,Rv,1),(0,bt.Z)(uy,L0,2),uy);function Kb(a,s){var n=Xb[s];return a.buttons===void 0||(a.buttons&n)!==n}var lg=function(){function a(s){(0,Cr.Z)(this,a),this.reset(),this.clickTolerance=s.clickTolerance||1}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(n,r){if(!this.lastPoint){var t=qd.mouseButton(n);this.correctButton(n,t)&&(this.lastPoint=r,this.eventButton=t)}}},{key:"mousemoveWindow",value:function(n,r){var t=this.lastPoint;if(t){if(n.preventDefault(),Kb(n,this.eventButton)){this.reset();return}if(!(!this.moved&&r.dist(t)<this.clickTolerance))return this.moved=!0,this.lastPoint=r,this.move(t,r)}}},{key:"mouseupWindow",value:function(n){if(this.lastPoint){var r=qd.mouseButton(n);r===this.eventButton&&(this.moved&&qd.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(n,r){return!1}},{key:"move",value:function(n,r){}}]),a}();function Yb(a){var s=qb();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function qb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var v_=function(a){(0,kr.Z)(n,a);var s=Yb(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"mousedown",value:function(t,o){(0,Va.Z)((0,zr.Z)(n.prototype),"mousedown",this).call(this,t,o),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(t,o){return{around:o,panDelta:o.sub(t)}}},{key:"correctButton",value:function(t,o){return o===Rv&&!t.ctrlKey}}]),n}(lg);function m_(a){var s=Qb();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Qb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Jb=function(a){(0,kr.Z)(n,a);var s=m_(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"correctButton",value:function(t,o){return o===Rv&&t.ctrlKey||o===L0}},{key:"move",value:function(t,o){var u=-.5,d=(o.y-t.y)*u;if(d)return this.active=!0,{pitchDelta:d}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(lg);function e2(a){var s=hE();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function hE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var h=function(a){(0,kr.Z)(n,a);var s=e2(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"contextmenu",value:function(t){t.preventDefault()}},{key:"correctButton",value:function(t,o){return o===Rv&&t.ctrlKey||o===L0}},{key:"move",value:function(t,o){var u=.8,d=(o.x-t.x)*u;if(d)return this.active=!0,{bearingDelta:d}}}]),n}(lg),x=4.000244140625,C=1/100,he=1/450,yt=2,Yt=function(){function a(s,n){var r=this;(0,Cr.Z)(this,a),(0,bt.Z)(this,"onScrollFrame",function(){if(r.frameId&&(r.frameId=null,!!r.isActive())){var t=r.map.transform;if(r.delta!==0){var o=r.type==="wheel"&&Math.abs(r.delta)>x?r.wheelZoomRate:r.defaultZoomRate,u=yt/(1+Math.exp(-Math.abs(r.delta*o)));r.delta<0&&u!==0&&(u=1/u);var d=typeof r.targetZoom=="number"?t.zoomScale(r.targetZoom):t.scale;r.targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(d*u))),r.type==="wheel"&&(r.startZoom=t.zoom,r.easing=r.smoothOutEasing(200)),r.delta=0}var S=typeof r.targetZoom=="number"?r.targetZoom:t.zoom,z=r.startZoom,de=r.easing,be=!1,it;if(r.type==="wheel"&&z&&de){var nt=Math.min((qv()-r.lastWheelEventTime)/200,1),Kt=de(nt);it=Tp(z,S,Kt),nt<1?r.frameId||(r.frameId=!0):be=!0}else it=S,be=!0;return r.active=!0,be&&(r.active=!1,r.finishTimeout=setTimeout(function(){r.zooming=!1,r.handler.triggerRenderFrame(),delete r.targetZoom,delete r.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!be,zoomDelta:it-t.zoom,around:r.aroundPoint,originalEvent:r.lastWheelEvent}}}),this.map=s,this.el=s.getCanvasContainer(),this.handler=n,this.delta=0,this.defaultZoomRate=C,this.wheelZoomRate=he}return(0,Nr.Z)(a,[{key:"setZoomRate",value:function(n){this.defaultZoomRate=n}},{key:"setWheelZoomRate",value:function(n){this.wheelZoomRate=n}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(n){this.isEnabled()||(this.enabled=!0,this.aroundCenter=n&&n.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(n){if(this.isEnabled()){var r=n.deltaMode===window.WheelEvent.DOM_DELTA_LINE?n.deltaY*40:n.deltaY,t=qv(),o=t-(this.lastWheelEventTime||0);this.lastWheelEventTime=t,r!==0&&r%x===0?this.type="wheel":r!==0&&Math.abs(r)<4?this.type="trackpad":o>400?(this.type=null,this.lastValue=r,this.timeout=setTimeout(this.onTimeout,40,n)):this.type||(this.type=Math.abs(o*r)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,r+=this.lastValue)),n.shiftKey&&r&&(r=r/4),this.type&&(this.lastWheelEvent=n,this.delta-=r,this.active||this.start(n)),n.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(n){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(n)}},{key:"start",value:function(n){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var r=qd.mousePos(this.el,n);this.around=Oh.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(r)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(n){var r=Qg;if(this.prevEase){var t=this.prevEase,o=(qv()-t.start)/t.duration,u=t.easing(o+.01)-t.easing(o),d=.27/Math.sqrt(u*u+1e-4)*.01,S=Math.sqrt(.27*.27-d*d);r=qg(d,S,.25,1)}return this.prevEase={start:qv(),duration:n,easing:r},r}}]),a}(),gr=Yt,Sr=function(){function a(s,n){(0,Cr.Z)(this,a),this.clickZoom=s,this.tapZoom=n}return(0,Nr.Z)(a,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),a}(),Gr=function(){function a(s,n,r){(0,Cr.Z)(this,a),this.el=s,this.mousePan=n,this.touchPan=r}return(0,Nr.Z)(a,[{key:"enable",value:function(n){this.inertiaOptions=n||{},this.mousePan.enable(),this.touchPan.enable(),tt.eW||this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),tt.eW||this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),a}(),Bn=function(){function a(s,n,r){(0,Cr.Z)(this,a),this.pitchWithRotate=s.pitchWithRotate,this.mouseRotate=n,this.mousePitch=r}return(0,Nr.Z)(a,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),a}(),ui=function(){function a(s,n,r,t){(0,Cr.Z)(this,a),this.el=s,this.touchZoom=n,this.touchRotate=r,this.tapDragZoom=t,this.rotationDisabled=!1,this.enabled=!0}return(0,Nr.Z)(a,[{key:"enable",value:function(n){this.touchZoom.enable(n),this.rotationDisabled||this.touchRotate.enable(n),this.tapDragZoom.enable(),tt.eW||this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),tt.eW||this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),a}();function da(a,s){for(var n={},r=0;r<a.length;r++)n[a[r].identifier]=s[r];return n}function ro(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Xo(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Xo(a,s){if(a){if(typeof a=="string")return Fo(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(a,s)}}function Fo(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function ho(a){var s=new mc(0,0),n=ro(a),r;try{for(n.s();!(r=n.n()).done;){var t=r.value;s._add(t)}}catch(o){n.e(o)}finally{n.f()}return s.div(a.length)}var ns=500,vs=500,us=30,Eu=function(){function a(s){(0,Cr.Z)(this,a),this.reset(),this.numTouches=s.numTouches}return(0,Nr.Z)(a,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(n,r,t){(this.centroid||t.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=n.timeStamp),t.length===this.numTouches&&(this.centroid=ho(r),this.touches=da(t,r)))}},{key:"touchmove",value:function(n,r,t){if(!(this.aborted||!this.centroid)){var o=da(t,r);for(var u in this.touches)if(this.touches[u]){var d=this.touches[u],S=o[u];(!S||S.dist(d)>us)&&(this.aborted=!0)}}}},{key:"touchend",value:function(n,r,t){if((!this.centroid||n.timeStamp-this.startTime>vs)&&(this.aborted=!0),t.length===0){var o=!this.aborted&&this.centroid;if(this.reset(),o)return o}}}]),a}(),Nu=function(){function a(s){(0,Cr.Z)(this,a),this.singleTap=new Eu(s),this.numTaps=s.numTaps,this.reset()}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(n,r,t){this.singleTap.touchstart(n,r,t)}},{key:"touchmove",value:function(n,r,t){this.singleTap.touchmove(n,r,t)}},{key:"touchend",value:function(n,r,t){var o=this.singleTap.touchend(n,r,t);if(o){var u=n.timeStamp-this.lastTime<ns,d=!this.lastTap||this.lastTap.dist(o)<us;if((!u||!d)&&this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}]),a}(),ul=function(){function a(){(0,Cr.Z)(this,a),this.tap=new Nu({numTouches:1,numTaps:1}),this.reset()}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(n,r,t){this.swipePoint||(this.tapTime&&n.timeStamp-this.tapTime>ns&&this.reset(),this.tapTime?t.length>0&&(this.swipePoint=r[0],this.swipeTouch=t[0].identifier):this.tap.touchstart(n,r,t))}},{key:"touchmove",value:function(n,r,t){if(!this.tapTime)this.tap.touchmove(n,r,t);else if(this.swipePoint){if(t[0].identifier!==this.swipeTouch)return;var o=r[0],u=o.y-this.swipePoint.y;return this.swipePoint=o,n.preventDefault(),this.active=!0,{zoomDelta:u/128}}}},{key:"touchend",value:function(n,r,t){if(this.tapTime)this.swipePoint&&t.length===0&&this.reset();else{var o=this.tap.touchend(n,r,t);o&&(this.tapTime=n.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}(),sf=function(){function a(){(0,Cr.Z)(this,a),this.zoomIn=new Nu({numTouches:1,numTaps:2}),this.zoomOut=new Nu({numTouches:2,numTaps:1}),this.reset()}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(n,r,t){this.zoomIn.touchstart(n,r,t),this.zoomOut.touchstart(n,r,t)}},{key:"touchmove",value:function(n,r,t){this.zoomIn.touchmove(n,r,t),this.zoomOut.touchmove(n,r,t)}},{key:"touchend",value:function(n,r,t){var o=this,u=this.zoomIn.touchend(n,r,t),d=this.zoomOut.touchend(n,r,t);if(u)return this.active=!0,n.preventDefault(),setTimeout(function(){return o.reset()},0),{cameraAnimation:function(z){return z.easeTo({duration:300,zoom:z.getZoom()+1,around:z.unproject(u)},{originalEvent:n})}};if(d)return this.active=!0,n.preventDefault(),setTimeout(function(){return o.reset()},0),{cameraAnimation:function(z){return z.easeTo({duration:300,zoom:z.getZoom()-1,around:z.unproject(d)},{originalEvent:n})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}(),Fu=function(){function a(s){(0,Cr.Z)(this,a),this.minTouches=1,this.clickTolerance=s.clickTolerance||1,this.reset()}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new mc(0,0)}},{key:"touchstart",value:function(n,r,t){return this.calculateTransform(n,r,t)}},{key:"touchmove",value:function(n,r,t){if(this.active)return n.preventDefault(),this.calculateTransform(n,r,t)}},{key:"touchend",value:function(n,r,t){this.calculateTransform(n,r,t),this.active&&t.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(n,r,t){t.length>0&&(this.active=!0);var o=da(t,r),u=new mc(0,0),d=new mc(0,0),S=0;for(var z in o)if(o[z]){var de=o[z],be=this.touches[z];be&&(u._add(de),d._add(de.sub(be)),S++,o[z]=de)}if(this.touches=o,!(S<this.minTouches||!d.mag())){var it=d.div(S);if(this.sum._add(it),!(this.sum.mag()<this.clickTolerance)){var nt=u.div(S);return{around:nt,panDelta:it}}}}}]),a}(),il=function(){function a(){(0,Cr.Z)(this,a),this.reset()}return(0,Nr.Z)(a,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(n){}},{key:"move",value:function(n,r,t){}},{key:"touchstart",value:function(n,r,t){this.firstTwoTouches||t.length<2||(this.firstTwoTouches=[t[0].identifier,t[1].identifier],this.start([r[0],r[1]]))}},{key:"touchmove",value:function(n,r,t){if(this.firstTwoTouches){n.preventDefault();var o=(0,xi.Z)(this.firstTwoTouches,2),u=o[0],d=o[1],S=Su(t,r,u),z=Su(t,r,d);if(!(!S||!z)){var de=this.aroundCenter?null:S.add(z).div(2);return this.move([S,z],de,n)}}}},{key:"touchend",value:function(n,r,t){if(this.firstTwoTouches){var o=(0,xi.Z)(this.firstTwoTouches,2),u=o[0],d=o[1],S=Su(t,r,u),z=Su(t,r,d);S&&z||(this.active&&qd.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(n){this.enabled=!0,this.aroundCenter=!!n&&n.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}();function Su(a,s,n){for(var r=0;r<a.length;r++)if(a[r].identifier===n)return s[r]}function zu(a){var s=uc();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function uc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Ui(a){return Math.abs(a.y)>Math.abs(a.x)}var mi=100,Pi=function(a){(0,kr.Z)(n,a);var s=zu(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"reset",value:function(){(0,Va.Z)((0,zr.Z)(n.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(t){this.lastPoints=t,Ui(t[0].sub(t[1]))&&(this.valid=!1)}},{key:"move",value:function(t,o,u){var d=t[0].sub(this.lastPoints[0]),S=t[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(d,S,u.timeStamp),!!this.valid){this.lastPoints=t,this.active=!0;var z=(d.y+S.y)/2,de=-.5;return{pitchDelta:z*de}}}},{key:"gestureBeginsVertically",value:function(t,o,u){if(this.valid!==void 0)return this.valid;var d=2,S=t.mag()>=d,z=o.mag()>=d;if(!(!S&&!z)){if(!S||!z)return this.firstMove===void 0&&(this.firstMove=u),u-this.firstMove<mi?void 0:!1;var de=t.y>0==o.y>0;return Ui(t)&&Ui(o)&&de}}}]),n}(il);function Wa(a){var s=ko();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ko(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Mo=25;function Xu(a,s){return a.angleWith(s)*180/Math.PI}var gc=function(a){(0,kr.Z)(n,a);var s=Wa(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"reset",value:function(){(0,Va.Z)((0,zr.Z)(n.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(t){this.startVector=this.vector=t[0].sub(t[1]),this.minDiameter=t[0].dist(t[1])}},{key:"move",value:function(t,o){var u=this.vector;if(this.vector=t[0].sub(t[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Xu(this.vector,u),pinchAround:o}}},{key:"isBelowThreshold",value:function(t){this.minDiameter=Math.min(this.minDiameter,t.mag());var o=Math.PI*this.minDiameter,u=Mo/o*360,d=Xu(t,this.startVector);return Math.abs(d)<u}}]),n}(il);function uf(a){var s=Md();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Md(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zh=.1;function Pd(a,s){return Math.log(a/s)/Math.LN2}var qE=function(a){(0,kr.Z)(n,a);var s=uf(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"reset",value:function(){(0,Va.Z)((0,zr.Z)(n.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(t){this.startDistance=this.distance=t[0].dist(t[1])}},{key:"move",value:function(t,o){var u=this.distance;if(this.distance=t[0].dist(t[1]),!(!this.active&&Math.abs(Pd(this.distance,this.startDistance))<zh))return this.active=!0,{zoomDelta:Pd(this.distance,u),pinchAround:o}}}]),n}(il);function xm(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=QE(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function QE(a,s){if(a){if(typeof a=="string")return dE(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dE(a,s)}}function dE(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var g_=function(s){return s.zoom||s.drag||s.pitch||s.rotate};function t2(a){return a.panDelta&&a.panDelta.mag()||a.zoomDelta||a.bearingDelta||a.pitchDelta}var JE=function(){function a(s,n){var r=this;(0,Cr.Z)(this,a),(0,bt.Z)(this,"handleWindowEvent",function(be){r.handleEvent(be,"".concat(be.type,"Window"))}),(0,bt.Z)(this,"handleEvent",function(be,it){if(be.type==="blur"){r.stop();return}r.updatingCamera=!0;var nt=be.type==="renderFrame"?void 0:be,Kt={needsRenderFrame:!1},tr={},Ir={},jr=be.touches?r.getMapTouches(be.touches):void 0,on=jr?qd.touchPos(r.el,jr):qd.mousePos(r.el,be),tn=xm(r.handlers),Yn;try{for(tn.s();!(Yn=tn.n()).done;){var ci=Yn.value,Zi=ci.handlerName,zi=ci.handler,pa=ci.allowed;if(zi.isEnabled()){var _o=void 0;if(r.blockedByActive(Ir,pa,Zi))zi.reset();else{var wo=it||be.type;zi&&zi[wo]&&(_o=zi[wo](be,on,jr),r.mergeIHandlerResult(Kt,tr,_o,Zi,nt),_o&&_o.needsRenderFrame&&r.triggerRenderFrame())}(_o||zi.isActive())&&(Ir[Zi]=zi)}}}catch(Al){tn.e(Al)}finally{tn.f()}var Ba={};for(var ms in r.previousActiveHandlers)Ir[ms]||(Ba[ms]=nt);r.previousActiveHandlers=Ir,(Object.keys(Ba).length||t2(Kt))&&(r.changes.push([Kt,tr,Ba]),r.triggerRenderFrame()),(Object.keys(Ir).length||t2(Kt))&&r.map.stop(!0),r.updatingCamera=!1;var au=Kt.cameraAnimation;au&&(r.inertia.clear(),r.fireEvents({},{}),r.changes=[],au(r.map))}),this.map=s,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new jb(s),this.bearingSnap=n.bearingSnap,this.rotateEnabled=n.rotateEnabled,this.pitchEnabled=n.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(n);var t=this.el;if(this.listeners=[],tt.eW)tt.vO.document.addEventListener("touchstart",function(be){r.handleEvent(be)},{}),tt.vO.document.addEventListener("touchmove",function(be){r.handleEvent(be)},{}),tt.vO.document.addEventListener("touchend",function(be){r.handleEvent(be)},{}),tt.vO.document.addEventListener("touchcancel",function(be){r.handleEvent(be)},{});else{this.listeners=[[t,"touchstart",{passive:!1}],[t,"touchmove",{passive:!1}],[t,"touchend",void 0],[t,"touchcancel",void 0],[t,"mousedown",void 0],[t,"mousemove",void 0],[t,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[t,"mouseover",void 0],[t,"mouseout",void 0],[t,"dblclick",void 0],[t,"click",void 0],[t,"keydown",{capture:!1}],[t,"keyup",void 0],[t,"wheel",{passive:!1}],[t,"contextmenu",void 0],[window,"blur",void 0]];var o=xm(this.listeners),u;try{for(o.s();!(u=o.n()).done;){var d=(0,xi.Z)(u.value,3),S=d[0],z=d[1],de=d[2];qd.addEventListener(S,z,S===window.document?this.handleWindowEvent:this.handleEvent,de)}}catch(be){o.e(be)}finally{o.f()}}}return(0,Nr.Z)(a,[{key:"destroy",value:function(){var n=xm(this.listeners),r;try{for(n.s();!(r=n.n()).done;){var t=(0,xi.Z)(r.value,3),o=t[0],u=t[1],d=t[2];qd.removeEventListener(o,u,o===window.document?this.handleWindowEvent:this.handleEvent,d)}}catch(S){n.e(S)}finally{n.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var n=xm(this.handlers),r;try{for(n.s();!(r=n.n()).done;){var t=r.value.handler;t.reset()}}catch(o){n.e(o)}finally{n.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var n=xm(this.handlers),r;try{for(n.s();!(r=n.n()).done;){var t=r.value.handler;if(t.isActive())return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(g_(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(n,r,t,o,u){if(t){(0,ht.merge)(n,t);var d={handlerName:o,originalEvent:t.originalEvent||u};t.zoomDelta!==void 0&&(r.zoom=d),t.panDelta!==void 0&&(r.drag=d),t.pitchDelta!==void 0&&(r.pitch=d),t.bearingDelta!==void 0&&(r.rotate=d)}}},{key:"triggerRenderFrame",value:function(){var n=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(r){delete n.frameId,n.handleEvent(new zb("renderFrame",{timeStamp:r})),n.applyChanges()}))}},{key:"addDefaultHandlers",value:function(n){var r=this.map,t=r.getCanvasContainer();this.add("mapEvent",new Wb(r,n));var o=r.boxZoom=new Bb(r,n);this.add("boxZoom",o);var u=new sf,d=new Nb;r.doubleClickZoom=new Sr(d,u),this.add("tapZoom",u),this.add("clickZoom",d);var S=new ul;this.add("tapDragZoom",S);var z=r.touchPitch=new Pi;this.add("touchPitch",z);var de=new Jb(n),be=new h(n);r.dragRotate=new Bn(n,de,be),this.add("mouseRotate",de,["mousePitch"]),this.add("mousePitch",be,["mouseRotate"]);var it=new v_(n),nt=new Fu(n);r.dragPan=new Gr(t,it,nt),this.add("mousePan",it),this.add("touchPan",nt,["touchZoom","touchRotate"]);var Kt=new gc,tr=new qE;r.touchZoomRotate=new ui(t,tr,Kt,S),this.add("touchRotate",Kt,["touchPan","touchZoom"]),this.add("touchZoom",tr,["touchPan","touchRotate"]);var Ir=r.scrollZoom=new gr(r,this);this.add("scrollZoom",Ir,["mousePan"]);var jr=r.keyboard=new Gb;this.add("keyboard",jr),this.add("blockableMapEvent",new cE(r));for(var on=0,tn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];on<tn.length;on++){var Yn=tn[on];n.interactive&&n[Yn]&&r[Yn].enable(n[Yn])}}},{key:"add",value:function(n,r,t){this.handlers.push({handlerName:n,handler:r,allowed:t}),this.handlersById[n]=r}},{key:"blockedByActive",value:function(n,r,t){for(var o in n)if(o!==t&&(!r||r.indexOf(o)<0))return!0;return!1}},{key:"getMapTouches",value:function(n){var r=[],t=xm(n),o;try{for(t.s();!(o=t.n()).done;){var u=o.value,d=u.target;(tt.eW||this.el.contains(d))&&r.push(u)}}catch(S){t.e(S)}finally{t.f()}return r}},{key:"applyChanges",value:function(){var n={},r={},t={},o=xm(this.changes),u;try{for(o.s();!(u=o.n()).done;){var d=(0,xi.Z)(u.value,3),S=d[0],z=d[1],de=d[2];S.panDelta&&(n.panDelta=(n.panDelta||new mc(0,0))._add(S.panDelta)),S.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(n.around=S.around),S.pinchAround!==void 0&&(n.pinchAround=S.pinchAround),S.noInertia&&(n.noInertia=S.noInertia),(0,ht.merge)(r,z),(0,ht.merge)(t,de)}}catch(be){o.e(be)}finally{o.f()}this.updateMapTransform(n,r,t),this.changes=[]}},{key:"updateMapTransform",value:function(n,r,t){var o=this.map,u=o.transform;if(!t2(n))return this.fireEvents(r,t);var d=n.panDelta,S=n.zoomDelta,z=n.bearingDelta,de=n.pitchDelta,be=n.pinchAround,it=n.around;be!==void 0&&(it=be),o.stop(!0),it=it||o.transform.centerPoint;var nt=u.pointLocation(d?it.sub(d):it);z&&this.rotateEnabled&&(u.bearing+=z),de&&this.pitchEnabled&&(u.pitch+=de),S&&(u.zoom+=S),u.setLocationAtPoint(nt,it),this.map.update(),n.noInertia||this.inertia.record(n),this.fireEvents(r,t)}},{key:"fireEvents",value:function(n,r){var t=this,o=g_(this.eventsInProgress),u=g_(n),d={};for(var S in n)if(n[S]){var z=n[S].originalEvent;this.eventsInProgress[S]||(d["".concat(S,"start")]=z),this.eventsInProgress[S]=n[S]}!o&&u&&this.fireEvent("movestart",u.originalEvent);for(var de in d)d[de]&&this.fireEvent(de,d[de]);n.rotate&&(this.bearingChanged=!0),u&&this.fireEvent("move",u.originalEvent);for(var be in n)if(n[be]){var it=n[be].originalEvent;this.fireEvent(be,it)}var nt={},Kt;for(var tr in this.eventsInProgress)if(this.eventsInProgress[tr]){var Ir=this.eventsInProgress[tr],jr=Ir.handlerName,on=Ir.originalEvent;this.handlersById[jr].isActive()||(delete this.eventsInProgress[tr],Kt=r[jr]||on,nt["".concat(tr,"end")]=Kt)}for(var tn in nt)nt[tn]&&this.fireEvent(tn,nt[tn]);var Yn=g_(this.eventsInProgress);if((o||u)&&!Yn){this.updatingCamera=!0;var ci=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),Zi=function(pa){return pa!==0&&-t.bearingSnap<pa&&pa<t.bearingSnap};ci?(Zi(ci.bearing||this.map.getBearing())&&(ci.bearing=0),this.map.easeTo(ci,{originalEvent:Kt})):(this.map.emit("moveend",new kf("moveend",{originalEvent:Kt})),Zi(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(n,r){this.map.emit(n,new kf(n,r?{originalEvent:r}:{}))}}]),a}(),pE=JE,y_=null,ly=[],eS=30,r2=1e3/eS,cg=tt.vO.performance,fg={create:"create",load:"load",fullLoad:"fullLoad"},__={mark:function(s){cg.mark(s)},frame:function(s){var n=s;if(y_!=null){var r=n-y_;ly.push(r)}y_=n},clearMetrics:function(){y_=null,ly=[],cg.clearMeasures("loadTime"),cg.clearMeasures("fullLoadTime");for(var s in fg)cg.clearMarks(fg[s])},getPerformanceMetrics:function(){var s=cg.measure("loadTime",fg.create,fg.load).duration,n=cg.measure("fullLoadTime",fg.create,fg.fullLoad).duration,r=ly.length,t=ly.reduce(function(S,z){return S+z},0)/r/1e3,o=1/t,u=ly.filter(function(S){return S>r2}).reduce(function(S,z){return S+(z-r2)/r2},0),d=u/(r+u)*100;return{loadTime:s,fullLoadTime:n,fps:o,percentDroppedFrames:d}}};function vE(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=tS(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(z){throw z},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var z=n.next();return o=z.done,z},e:function(z){u=!0,d=z},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function tS(a,s){if(a){if(typeof a=="string")return mE(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mE(a,s)}}function mE(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var rS=function(){function a(){(0,Cr.Z)(this,a),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,Nr.Z)(a,[{key:"add",value:function(n){var r=++this.id,t=this.queue;return t.push({callback:n,id:r,cancelled:!1}),r}},{key:"remove",value:function(n){var r=this.currentlyRunning,t=r?this.queue.concat(r):this.queue,o=vE(t),u;try{for(o.s();!(u=o.n()).done;){var d=u.value;if(d.id===n){d.cancelled=!0;return}}}catch(S){o.e(S)}finally{o.f()}}},{key:"run",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=this.currentlyRunning=this.queue;this.queue=[];var t=vE(r),o;try{for(t.s();!(o=t.n()).done;){var u=o.value;if(!u.cancelled&&(u.callback(n),this.cleared))break}}catch(d){t.e(d)}finally{t.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),a}(),gE=rS;function nS(a){var s=iS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function iS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function aS(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}aS(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var x_=-2,yE=22,hg=0,b_=60,oS={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:x_,maxZoom:yE,minPitch:hg,maxPitch:b_,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},sS=function(a){(0,kr.Z)(n,a);var s=nS(n);function n(r){var t;return(0,Cr.Z)(this,n),t=s.call(this,(0,ht.merge)({},oS,r)),(0,bt.Z)((0,or.Z)(t),"renderTaskQueue",new gE),(0,bt.Z)((0,or.Z)(t),"trackResize",!0),(0,bt.Z)((0,or.Z)(t),"onWindowOnline",function(){t.update()}),(0,bt.Z)((0,or.Z)(t),"onWindowResize",function(o){t.trackResize&&t.resize({originalEvent:o}).update()}),t.initContainer(),t.resize(),t.handlers=new pE((0,or.Z)(t),t.options),typeof window!="undefined"&&(window.addEventListener("online",t.onWindowOnline,!1),window.addEventListener("resize",t.onWindowResize,!1),window.addEventListener("orientationchange",t.onWindowResize,!1)),t}return(0,Nr.Z)(n,[{key:"resize",value:function(t){var o=this.containerDimensions(),u=o[0],d=o[1];this.transform.resize(u,d);var S=!this.moving;return S&&(this.stop(),this.emit("movestart",new Event("movestart",t)),this.emit("move",new Event("move",t))),this.emit("resize",new Event("resize",t)),S&&this.emit("moveend",new Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(Oh.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(mc.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(gm.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if(t=t==null?x_:t,t>=x_&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(x_," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if(t=t==null?yE:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if(t=t==null?hg:t,t<hg)throw new Error("minPitch must be greater than or equal to ".concat(hg));if(t>=hg&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(hg," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if(t=t==null?b_:t,t>b_)throw new Error("maxPitch must be less than or equal to ".concat(b_));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=ng(function(o){__.frame(o),t.frame=null,t.update(o)}))}},{key:"update",value:function(t){var o=this;this.frame||(this.frame=ng(function(u){__.frame(u),o.frame=null,o.renderTaskQueue.run(t)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var t=this.container;t.classList.add("l7-map");var o=this.canvasContainer=tt.SO.create("div","l7-canvas-container",t);this.options.interactive&&o.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var t=0,o=0;return this.container&&(t=this.container.clientWidth||400,o=this.container.clientHeight||300),[t,o]}},{key:"resizeCanvas",value:function(t,o){var u=tt.SO.DPR||1;this.canvas.width=u*t,this.canvas.height=u*o,this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(o,"px")}}]),n}(o_),uS=function(){function a(s){var n=this;(0,Cr.Z)(this,a),(0,bt.Z)(this,"onHashChange",function(){var r=n.getCurrentHash();if(r.length>=3&&!r.some(function(o){return isNaN(+o)})){var t=n.map.dragRotate.isEnabled()&&n.map.touchZoomRotate.isEnabled()?+(r[3]||0):n.map.getBearing();return n.map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:t,pitch:+(r[4]||0)}),!0}return!1}),(0,bt.Z)(this,"getCurrentHash",function(){var r=window.location.hash.replace("#","");if(n.hashName){var t;return r.split("&").map(function(o){return o.split("=")}).forEach(function(o){o[0]===n.hashName&&(t=o)}),(t&&t[1]||"").split("/")}return r.split("/")}),(0,bt.Z)(this,"updateHashUnthrottled",function(){var r=n.getHashString();try{window.history.replaceState(window.history.state,"",r)}catch(t){}}),this.hashName=s&&encodeURIComponent(s),this.updateHash=(0,ht.throttle)(this.updateHashUnthrottled,30*1e3/100)}return(0,Nr.Z)(a,[{key:"addTo",value:function(n){return this.map=n,tt.vO.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return tt.vO.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(n){var r=this.map.getCenter(),t=Math.round(this.map.getZoom()*100)/100,o=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),u=Math.pow(10,o),d=Math.round(r.lng*u)/u,S=Math.round(r.lat*u)/u,z=this.map.getBearing(),de=this.map.getPitch(),be="";if(n?be+="/".concat(d,"/").concat(S,"/").concat(t):be+="".concat(t,"/").concat(S,"/").concat(d),(z||de)&&(be+="/".concat(Math.round(z*10)/10)),de&&(be+="/".concat(Math.round(de))),this.hashName){var it=this.hashName,nt=!1,Kt=window.location.hash.slice(1).split("&").map(function(tr){var Ir=tr.split("=")[0];return Ir===it?(nt=!0,"".concat(Ir,"=").concat(be)):tr}).filter(function(tr){return tr});return nt||Kt.push("".concat(it,"=").concat(be)),"#".concat(Kt.join("&"))}return"#".concat(be)}}]),a}(),lS=uS;function cS(a){var s=fS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function fS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function hS(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}hS(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var E_=-2,_E=22,dg=0,S_=60,dS={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:E_,maxZoom:_E,minPitch:dg,maxPitch:S_,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},xE=function(a){(0,kr.Z)(n,a);var s=cS(n);function n(r){var t;if((0,Cr.Z)(this,n),t=s.call(this,(0,ht.merge)({},dS,r)),(0,bt.Z)((0,or.Z)(t),"renderTaskQueue",new gE),(0,bt.Z)((0,or.Z)(t),"trackResize",!0),(0,bt.Z)((0,or.Z)(t),"onWindowOnline",function(){t.update()}),(0,bt.Z)((0,or.Z)(t),"onWindowResize",function(u){t.trackResize&&t.resize({originalEvent:u}).update()}),tt.eW?t.initMiniContainer():t.initContainer(),t.resize(),t.handlers=new pE((0,or.Z)(t),t.options),typeof window!="undefined"&&(window.addEventListener("online",t.onWindowOnline,!1),window.addEventListener("resize",t.onWindowResize,!1),window.addEventListener("orientationchange",t.onWindowResize,!1)),!tt.eW){var o=typeof r.hash=="string"&&r.hash||void 0;r.hash&&(t.hash=new lS(o).addTo((0,or.Z)(t)))}return(!t.hash||!t.hash.onHashChange())&&(t.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(t.resize(),t.fitBounds(r.bounds,(0,ht.merge)({},r.fitBoundsOptions,{duration:0})))),t}return(0,Nr.Z)(n,[{key:"resize",value:function(t){var o=this.containerDimensions(),u=(0,xi.Z)(o,2),d=u[0],S=u[1];if(this.transform.resize(d,S),tt.eW)return this;var z=!this.moving;return z&&(this.stop(),this.emit("movestart",new tt.vO.Event("movestart",t)),this.emit("move",new tt.vO.Event("move",t))),this.emit("resize",new tt.vO.Event("resize",t)),z&&this.emit("moveend",new tt.vO.Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(Oh.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(mc.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(gm.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if(t=t==null?E_:t,t>=E_&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(E_," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if(t=t==null?_E:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if(t=t==null?dg:t,t<dg)throw new Error("minPitch must be greater than or equal to ".concat(dg));if(t>=dg&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(dg," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if(t=t==null?S_:t,t>S_)throw new Error("maxPitch must be less than or equal to ".concat(S_));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=ng(function(o){__.frame(o),t.frame=null,t.update(o)}))}},{key:"update",value:function(t){var o=this;this.frame||(this.frame=ng(function(u){__.frame(u),o.frame=null,o.renderTaskQueue.run(t)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var t=this.container;t.classList.add("l7-map");var o=this.canvasContainer=tt.SO.create("div","l7-canvas-container",t);this.options.interactive&&o.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var t=0,o=0;return this.container&&(tt.eW?(t=this.container.width/tt.vO.devicePixelRatio,o=this.container.height/tt.vO.devicePixelRatio):(t=this.container.clientWidth,o=this.container.clientHeight,t=t===0?400:t,o=o===0?300:o)),[t,o]}}]),n}(o_),pS=g(73900),vS={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},bE,EE,SE,wE,CE,AE,pg,TE,ME,PE,OE,IE={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},mS=12,w_=(bE=(0,ba.b2)(),EE=(0,ba.f3)(Te.vK.MapConfig),SE=(0,ba.f3)(Te.vK.IGlobalConfigService),wE=(0,ba.f3)(Te.vK.ICoordinateSystemService),CE=(0,ba.f3)(Te.vK.IEventEmitter),bE(AE=(pg=function(){function a(){var s=this;(0,Cr.Z)(this,a),(0,bt.Z)(this,"version",fl.G.DEFUALT),(0,bt.Z)(this,"simpleMapCoord",new pS.D),(0,bt.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,Ul.Z)(this,"config",TE,this),(0,Ul.Z)(this,"configService",ME,this),(0,Ul.Z)(this,"coordinateSystemService",PE,this),(0,Ul.Z)(this,"eventEmitter",OE,this),(0,bt.Z)(this,"handleCameraChanged",function(n){var r=s.map.getCenter(),t=r.lat,o=r.lng;s.emit("mapchange"),s.viewport.syncWithMapCamera({bearing:s.map.getBearing(),center:[o,t],viewportHeight:s.map.transform.height,pitch:s.map.getPitch(),viewportWidth:s.map.transform.width,zoom:s.map.getZoom(),cameraHeight:0}),s.updateCoordinateSystemService(),s.cameraChangedCallback(s.viewport)})}return(0,Nr.Z)(a,[{key:"setBgColor",value:function(n){this.bgColor=n}},{key:"addMarkerContainer",value:function(){var n=this.map.getCanvasContainer();this.markerContainer=tt.SO.create("div","l7-marker-container",n),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(n,r){Te.I9.indexOf(n)!==-1?this.eventEmitter.on(n,r):this.map.on(IE[n]||n,r)}},{key:"off",value:function(n,r){this.map.off(IE[n]||n,r),this.eventEmitter.off(n,r)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===fl.G.SIMPLE)return this.simpleMapCoord.getSize();var n=this.map.transform;return[n.width,n.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(n){return this.map.setZoom(n)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(n){this.map.setCenter(n)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(n){this.map.setBearing(n)}},{key:"zoomIn",value:function(n,r){this.map.zoomIn(n,r)}},{key:"zoomOut",value:function(n,r){this.map.zoomOut(n,r)}},{key:"setPitch",value:function(n){return this.map.setPitch(n)}},{key:"panTo",value:function(n){this.map.panTo(n)}},{key:"panBy",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.panTo([n,r])}},{key:"fitBounds",value:function(n,r){this.map.fitBounds(n,r)}},{key:"setMaxZoom",value:function(n){this.map.setMaxZoom(n)}},{key:"setMinZoom",value:function(n){this.map.setMinZoom(n)}},{key:"setMapStatus",value:function(n){n.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),n.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),n.dragEnable===!1&&this.map.dragPan.disable(),n.dragEnable===!0&&this.map.dragPan.enable(),n.rotateEnable===!1&&this.map.dragRotate.disable(),n.dragEnable===!0&&this.map.dragRotate.enable(),n.keyboardEnable===!1&&this.map.keyboard.disable(),n.keyboardEnable===!0&&this.map.keyboard.enable(),n.zoomEnable===!1&&this.map.scrollZoom.disable(),n.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(n,r){this.map.flyTo({zoom:n,center:r})}},{key:"setMapStyle",value:function(n){this.map.setStyle(this.getMapStyleValue(n))}},{key:"meterToCoord",value:function(n,r){return 1}},{key:"pixelToLngLat",value:function(n){return this.map.unproject(n)}},{key:"lngLatToPixel",value:function(n){return this.map.project(n)}},{key:"containerToLngLat",value:function(n){return this.map.unproject(n)}},{key:"lngLatToContainer",value:function(n){return this.map.project(n)}},{key:"getMapStyle",value:function(){try{var n,r=(n=this.map.getStyle().sprite)!==null&&n!==void 0?n:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(r)?r==null?void 0:r.replace(/\/\w+$/,"").replace(/sprites/,"styles"):r}catch(t){return""}}},{key:"getMapStyleConfig",value:function(){return vS}},{key:"getMapStyleValue",value:function(n){var r;return(r=this.getMapStyleConfig()[n])!==null&&r!==void 0?r:n}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(n){for(var r,t=arguments.length,o=new Array(t>1?t-1:0),u=1;u<t;u++)o[u-1]=arguments[u];(r=this.eventEmitter).emit.apply(r,[n].concat(o))}},{key:"once",value:function(n){for(var r,t=arguments.length,o=new Array(t>1?t-1:0),u=1;u<t;u++)o[u-1]=arguments[u];(r=this.eventEmitter).once.apply(r,[n].concat(o))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(n){var r=this.map.getCanvas(),t=n==="jpg"?r==null?void 0:r.toDataURL("image/jpeg"):r==null?void 0:r.toDataURL("image/png");return t}},{key:"onCameraChanged",value:function(n){this.cameraChangedCallback=n}},{key:"creatMapContainer",value:function(n){var r=n;return typeof n=="string"&&(r=document.getElementById(n)),r}},{key:"updateView",value:function(n){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:n.bearing,center:n.center,viewportHeight:n.viewportHeight,pitch:n.pitch,viewportWidth:n.viewportWidth,zoom:n.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var n=this.config.offsetCoordinate,r=n===void 0?!0:n;this.viewport.getZoom()>mS&&r?this.coordinateSystemService.setCoordinateSystem(Te.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Te.lo.LNGLAT)}}]),a}(),TE=(0,Rl.Z)(pg.prototype,"config",[EE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ME=(0,Rl.Z)(pg.prototype,"configService",[SE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PE=(0,Rl.Z)(pg.prototype,"coordinateSystemService",[wE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=(0,Rl.Z)(pg.prototype,"eventEmitter",[CE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pg))||AE),gS=function(){function a(){(0,Cr.Z)(this,a),(0,bt.Z)(this,"xzReg",-Math.PI*.6),(0,bt.Z)(this,"yReg",Math.PI*.2),(0,bt.Z)(this,"earthCameraRadius",200),(0,bt.Z)(this,"earthCameraZoom",1),(0,bt.Z)(this,"cameraPosition",qo.create()),(0,bt.Z)(this,"projectionMatrix",Vo.create()),(0,bt.Z)(this,"modelMatrix",Vo.create()),(0,bt.Z)(this,"viewMatrix",Vo.create()),(0,bt.Z)(this,"viewProjectionMatrix",Vo.create()),(0,bt.Z)(this,"ViewProjectionMatrixUncentered",Vo.create()),(0,bt.Z)(this,"viewUncenteredMatrix",Vo.create())}return(0,Nr.Z)(a,[{key:"syncWithMapCamera",value:function(n){var r=n.viewportHeight,t=r===void 0?1:r,o=n.viewportWidth,u=o===void 0?1:o,d=u/t,S=.1,z=1e4,de=20;Vo.perspective(this.projectionMatrix,de,d,S,z);var be=this.earthCameraRadius*Math.cos(this.xzReg),it=this.earthCameraRadius*Math.sin(this.xzReg),nt=this.earthCameraRadius*Math.sin(this.yReg);this.cameraPosition=qo.fromValues(be,nt,it),qo.normalize(this.cameraPosition,this.cameraPosition),qo.multiply(this.cameraPosition,this.cameraPosition,qo.fromValues(this.earthCameraRadius,this.earthCameraRadius,this.earthCameraRadius)),qo.scale(this.cameraPosition,this.cameraPosition,this.earthCameraZoom);var Kt=qo.create();qo.cross(Kt,this.cameraPosition,qo.fromValues(0,1,0));var tr=qo.fromValues(0,1,0);qo.cross(tr,Kt,this.cameraPosition);var Ir=qo.fromValues(0,0,0);Vo.lookAt(this.viewMatrix,this.cameraPosition,Ir,tr),this.viewUncenteredMatrix=Vo.clone(this.viewMatrix),Vo.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Vo.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"rotateY",value:function(n){this.xzReg+=n*Math.min(this.earthCameraZoom*this.earthCameraZoom,1)}},{key:"rotateX",value:function(n){this.yReg+=n*Math.min(this.earthCameraZoom*this.earthCameraZoom,1)}},{key:"scaleZoom",value:function(n){this.earthCameraZoom+=n,this.earthCameraZoom=Math.max(this.earthCameraZoom,.6)}},{key:"getZoom",value:function(){return 4}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[0,0]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return this.modelMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n,r){return this.viewport.projectFlat(n,r)}}]),a}(),yS=["id","style","rotation"],RE,LE;function _S(a){var s=xS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function xS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var kE={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},bS=12,ES=(RE=(0,ba.b2)(),RE(LE=function(a){(0,kr.Z)(n,a);var s=_S(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"version",fl.G.GLOBEL),(0,bt.Z)((0,or.Z)(r),"dragging",!1),(0,bt.Z)((0,or.Z)(r),"handleCameraChanged",function(d){r.emit("mapchange");var S=2e3;r.handleCameraChanging=!0,r.handleCameraTimer&&clearTimeout(r.handleCameraTimer),r.handleCameraTimer=setTimeout(function(){r.handleCameraChanging=!1},S);var z=.02;d.type&&d.originalEvent&&(d.originalEvent.type==="wheel"&&r.viewport.scaleZoom(.01*Math.sign(d.originalEvent.wheelDelta)*-1),Math.abs(d.originalEvent.movementX)>Math.abs(d.originalEvent.movementY)?d.originalEvent.movementX>0?r.viewport.rotateY(z):d.originalEvent.movementX<0&&r.viewport.rotateY(-z):d.originalEvent.movementY>0?r.viewport.rotateX(z):d.originalEvent.movementY<0&&r.viewport.rotateX(-z));var de=r.config.offsetCoordinate,be=de===void 0?!0:de;r.viewport.syncWithMapCamera({viewportHeight:r.map.transform.height,viewportWidth:r.map.transform.width}),r.viewport.getZoom()>bS&&be?r.coordinateSystemService.setCoordinateSystem(Te.lo.LNGLAT_OFFSET):r.coordinateSystemService.setCoordinateSystem(Te.lo.LNGLAT),r.cameraChangedCallback(r.viewport)}),r}return(0,Nr.Z)(n,[{key:"lngLatToMercator",value:function(t,o){throw new Error("Method not implemented.")}},{key:"getModelMatrix",value:function(t,o,u,d,S){throw new Error("Method not implemented.")}},{key:"on",value:function(t,o){Te.I9.indexOf(t)!==-1?this.eventEmitter.on(t,o):this.map.on(kE[t]||t,o)}},{key:"off",value:function(t,o){this.map.off(kE[t]||t,o),this.eventEmitter.off(t,o)}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"earth"}},{key:"init",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u,d,S,z,de,be,it,nt;return fe().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:u=this.config,d=u.id,S=d===void 0?"map":d,z=u.style,de=z===void 0?"light":z,be=u.rotation,it=be===void 0?0:be,nt=(0,ls.Z)(u,yS),this.viewport=new gS,this.$mapContainer=this.creatMapContainer(S),this.map=new sS((0,ge.Z)({container:this.$mapContainer,style:this.getMapStyleValue(de),bearing:it},nt)),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged({});case 7:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var t,o;(t=this.$mapContainer)===null||t===void 0||(o=t.parentNode)===null||o===void 0||o.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).emit.apply(o,[t].concat(d))}},{key:"once",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).once.apply(o,[t].concat(d))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"rotateY",value:function(t){var o=t||{},u=o.force,d=u===void 0?!1:u,S=o.reg,z=S===void 0?.01:S;this.handleCameraChanging&&!d||this.viewport&&(this.viewport.rotateY(z),this.viewport.syncWithMapCamera({viewportHeight:this.map.transform.height,viewportWidth:this.map.transform.width}),this.cameraChangedCallback(this.viewport))}}]),n}(w_))||LE);function SS(a){var s=wS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function wS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var CS=function(a){(0,kr.Z)(n,a);var s=SS(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getServiceConstructor",value:function(){return ES}}]),n}(pm.Z),n2=g(43663),AS=["id","style","rotation","mapInstance","version","mapSize","interactive"],TS=["id","style","rotation","mapInstance","canvas","hasBaseMap"],DE,FE;function MS(a){var s=PS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function PS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var OS=12,IS=(DE=(0,ba.b2)(),DE(FE=function(a){(0,kr.Z)(n,a);var s=MS(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"version",fl.G.DEFUALT),(0,bt.Z)((0,or.Z)(r),"handleMiniCameraChanged",function(d,S,z,de,be){var it=r.config.offsetCoordinate,nt=it===void 0?!0:it;r.viewport.syncWithMapCamera({bearing:de,center:[d,S],viewportHeight:r.map.transform.height,pitch:be,viewportWidth:r.map.transform.width,zoom:z,cameraHeight:0}),r.viewport.getZoom()>OS&&nt?r.coordinateSystemService.setCoordinateSystem(Te.lo.LNGLAT_OFFSET):r.coordinateSystemService.setCoordinateSystem(Te.lo.LNGLAT),r.cameraChangedCallback(r.viewport)}),r}return(0,Nr.Z)(n,[{key:"lngLatToCoord",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},u=this.lngLatToMercator(t,0),d=u.x,S=u.y;return[d-o.x,S-o.y]}},{key:"lngLatToMercator",value:function(t,o){var u=I0.fromLngLat(t,o),d=u.x,S=d===void 0?0:d,z=u.y,de=z===void 0?0:z,be=u.z,it=be===void 0?0:be;return{x:S,y:de,z:it}}},{key:"getModelMatrix",value:function(t,o,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},z=I0.fromLngLat(t,o),de=z.meterInMercatorCoordinateUnits(),be=Vo.create();return Vo.translate(be,be,qo.fromValues(z.x-S.x,z.y-S.y,z.z||0-S.z)),Vo.scale(be,be,qo.fromValues(de*d[0],-de*d[1],de*d[2])),Vo.rotateX(be,be,u[0]),Vo.rotateY(be,be,u[1]),Vo.rotateZ(be,be,u[2]),be}},{key:"init",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn,ci;return fe().wrap(function(zi){for(;;)switch(zi.prev=zi.next){case 0:d=this.config,S=d.id,z=S===void 0?"map":S,de=d.style,be=de===void 0?"light":de,it=d.rotation,nt=it===void 0?0:it,Kt=d.mapInstance,tr=d.version,Ir=tr===void 0?"DEFAULTMAP":tr,jr=d.mapSize,on=jr===void 0?1e4:jr,tn=d.interactive,Yn=tn===void 0?!0:tn,ci=(0,ls.Z)(d,AS),this.viewport=new n2.Z,this.version=Ir,this.simpleMapCoord.setSize(on),Ir===fl.G.SIMPLE&&ci.center&&(ci.center=this.simpleMapCoord.unproject(ci.center)),Kt?(this.map=Kt,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(z),this.map=new xE((0,ge.Z)({container:this.$mapContainer,style:this.getMapStyleValue(be),bearing:nt},ci))),this.map.on("load",function(){u.handleCameraChanged()}),Yn&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){u.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"initMiniMap",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn,Yn;return fe().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:d=this.config,S=d.id,z=S===void 0?"map":S,de=d.style,be=de===void 0?"light":de,it=d.rotation,nt=it===void 0?0:it,Kt=d.mapInstance,tr=d.canvas,Ir=tr===void 0?null:tr,jr=d.hasBaseMap,on=jr===void 0?!1:jr,tn=(0,ls.Z)(d,TS),this.viewport=new n2.Z,this.$mapContainer=Ir,this.map=new xE((0,ge.Z)({container:this.$mapContainer,style:this.getMapStyleValue(be),bearing:nt,canvas:Ir},tn)),on?(Yn=this.map.getCenter(),this.handleMiniCameraChanged(Yn.lng,Yn.lat,this.map.getZoom(),this.map.getBearing(),this.map.getPitch()),tt.vO.document.addEventListener("mapCameaParams",function(zi){var pa=zi.e,_o=pa.longitude,wo=pa.latitude,Ba=pa.scale,ms=pa.bearing,au=pa.pitch;u.handleMiniCameraChanged(_o,wo,Ba-1.25,ms,au)})):(this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged());case 5:case"end":return Zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"exportMap",value:function(t){var o=this.map.getCanvas(),u=t==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}}]),n}(w_))||FE);function RS(a){var s=LS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function LS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var kS=function(a){(0,kr.Z)(n,a);var s=RS(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getServiceConstructor",value:function(){return IS}}]),n}(pm.Z),DS=g(6158),cy=g.n(DS),FS=g(55538),BS=function(){function a(){(0,Cr.Z)(this,a)}return(0,Nr.Z)(a,[{key:"syncWithMapCamera",value:function(n){var r=n.center,t=n.zoom,o=n.pitch,u=n.bearing,d=n.viewportHeight,S=n.viewportWidth;this.viewport=new FS.Z({width:S,height:d,longitude:r&&r[0],latitude:r&&r[1],zoom:t,pitch:o,bearing:u})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n,r){return this.viewport.projectFlat(n,r)}}]),a}(),NS=["id","attributionControl","style","token","rotation","mapInstance"],BE,NE;function zS(a){var s=ZS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ZS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function US(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}US(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=cy();var $S=0,zE="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",jS=(BE=(0,ba.b2)(),BE(NE=function(a){(0,kr.Z)(n,a);var s=zS(n);function n(){var r;(0,Cr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,bt.Z)((0,or.Z)(r),"version",fl.G.MAPBOX),r}return(0,Nr.Z)(n,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},u=this.lngLatToMercator(t,0),d=u.x,S=u.y;return[d-o.x,S-o.y]}},{key:"lngLatToMercator",value:function(t,o){var u=window.mapboxgl.MercatorCoordinate.fromLngLat(t,o),d=u.x,S=d===void 0?0:d,z=u.y,de=z===void 0?0:z,be=u.z,it=be===void 0?0:be;return{x:S,y:de,z:it}}},{key:"getModelMatrix",value:function(t,o,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},z=window.mapboxgl.MercatorCoordinate.fromLngLat(t,o),de=z.meterInMercatorCoordinateUnits(),be=Vo.create();return Vo.translate(be,be,qo.fromValues(z.x-S.x,z.y-S.y,z.z||0-S.z)),Vo.scale(be,be,qo.fromValues(de*d[0],-de*d[1],de*d[2])),Vo.rotateX(be,be,u[0]),Vo.rotateY(be,be,u[1]),Vo.rotateZ(be,be,u[2]),be}},{key:"init",value:function(){var r=(0,ft.Z)(fe().mark(function o(){var u=this,d,S,z,de,be,it,nt,Kt,tr,Ir,jr,on,tn;return fe().wrap(function(ci){for(;;)switch(ci.prev=ci.next){case 0:d=this.config,S=d.id,z=S===void 0?"map":S,de=d.attributionControl,be=de===void 0?!1:de,it=d.style,nt=it===void 0?"light":it,Kt=d.token,tr=Kt===void 0?zE:Kt,Ir=d.rotation,jr=Ir===void 0?0:Ir,on=d.mapInstance,tn=(0,ls.Z)(d,NS),this.viewport=new BS,!on&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),tr===zE&&nt!=="blank"&&!window.mapboxgl.accessToken&&!on&&console.warn(this.configService.getSceneWarninfo("MapToken")),!on&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=tr),on?(this.map=on,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(z),this.map=new window.mapboxgl.Map((0,ge.Z)({container:this.$mapContainer,style:this.getMapStyleValue(nt),attributionControl:be,bearing:jr},tn))),this.map.on("load",function(){u.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return ci.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var t,o;(t=this.$mapContainer)===null||t===void 0||(o=t.parentNode)===null||o===void 0||o.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).emit.apply(o,[t].concat(d))}},{key:"once",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).once.apply(o,[t].concat(d))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(t,o){var u=new(cy()).LngLat(t[0],t[1]),d=new(cy()).LngLat(o[0],o[1]),S=u.distanceTo(d),z=cy().MercatorCoordinate.fromLngLat({lng:t[0],lat:t[1]}),de=cy().MercatorCoordinate.fromLngLat({lng:o[0],lat:o[1]}),be=z.x,it=z.y,nt=de.x,Kt=de.y,tr=Math.sqrt(Math.pow(be-nt,2)+Math.pow(it-Kt,2))*4194304*2;return tr/S}},{key:"exportMap",value:function(t){var o=this.map.getCanvas(),u=t==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"creatMapContainer",value:function(t){var o=t;typeof t=="string"&&(o=document.getElementById(t));var u=document.createElement("div");return u.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,u.id="l7_mapbox_div"+$S++,o.appendChild(u),u}}]),n}(w_))||NE);function HS(a){var s=VS();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function VS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function GS(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}GS(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var WS=function(a){(0,kr.Z)(n,a);var s=HS(n);function n(){return(0,Cr.Z)(this,n),s.apply(this,arguments)}return(0,Nr.Z)(n,[{key:"getServiceConstructor",value:function(){return jS}}]),n}(pm.Z),XS=g(88307),KS=g.n(XS),YS=function(){function a(s,n){(0,Cr.Z)(this,a);var r=n.buffer,t=n.offset,o=n.stride,u=n.normalized,d=n.size,S=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:t||0,stride:o||0,normalized:u||!1,divisor:S||0},d&&(this.attribute.size=d)}return(0,Nr.Z)(a,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),a}(),Jv,fy,e0,Vp,hy,k0,dy,C_,Lv,bm,sp,kv,Dv,A_,qS=(Jv={},(0,bt.Z)(Jv,Te.gl.POINTS,"points"),(0,bt.Z)(Jv,Te.gl.LINES,"lines"),(0,bt.Z)(Jv,Te.gl.LINE_LOOP,"line loop"),(0,bt.Z)(Jv,Te.gl.LINE_STRIP,"line strip"),(0,bt.Z)(Jv,Te.gl.TRIANGLES,"triangles"),(0,bt.Z)(Jv,Te.gl.TRIANGLE_FAN,"triangle fan"),(0,bt.Z)(Jv,Te.gl.TRIANGLE_STRIP,"triangle strip"),Jv),ZE=(fy={},(0,bt.Z)(fy,Te.gl.STATIC_DRAW,"static"),(0,bt.Z)(fy,Te.gl.DYNAMIC_DRAW,"dynamic"),(0,bt.Z)(fy,Te.gl.STREAM_DRAW,"stream"),fy),i2=(e0={},(0,bt.Z)(e0,Te.gl.BYTE,"int8"),(0,bt.Z)(e0,Te.gl.UNSIGNED_INT,"int16"),(0,bt.Z)(e0,Te.gl.INT,"int32"),(0,bt.Z)(e0,Te.gl.UNSIGNED_BYTE,"uint8"),(0,bt.Z)(e0,Te.gl.UNSIGNED_SHORT,"uint16"),(0,bt.Z)(e0,Te.gl.UNSIGNED_INT,"uint32"),(0,bt.Z)(e0,Te.gl.FLOAT,"float"),e0),QS=(Vp={},(0,bt.Z)(Vp,Te.gl.ALPHA,"alpha"),(0,bt.Z)(Vp,Te.gl.LUMINANCE,"luminance"),(0,bt.Z)(Vp,Te.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,bt.Z)(Vp,Te.gl.RGB,"rgb"),(0,bt.Z)(Vp,Te.gl.RGBA,"rgba"),(0,bt.Z)(Vp,Te.gl.RGBA4,"rgba4"),(0,bt.Z)(Vp,Te.gl.RGB5_A1,"rgb5 a1"),(0,bt.Z)(Vp,Te.gl.RGB565,"rgb565"),(0,bt.Z)(Vp,Te.gl.DEPTH_COMPONENT,"depth"),(0,bt.Z)(Vp,Te.gl.DEPTH_STENCIL,"depth stencil"),Vp),JS=(hy={},(0,bt.Z)(hy,Te.gl.DONT_CARE,"dont care"),(0,bt.Z)(hy,Te.gl.NICEST,"nice"),(0,bt.Z)(hy,Te.gl.FASTEST,"fast"),hy),UE=(k0={},(0,bt.Z)(k0,Te.gl.NEAREST,"nearest"),(0,bt.Z)(k0,Te.gl.LINEAR,"linear"),(0,bt.Z)(k0,Te.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,bt.Z)(k0,Te.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,bt.Z)(k0,Te.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,bt.Z)(k0,Te.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),k0),$E=(dy={},(0,bt.Z)(dy,Te.gl.REPEAT,"repeat"),(0,bt.Z)(dy,Te.gl.CLAMP_TO_EDGE,"clamp"),(0,bt.Z)(dy,Te.gl.MIRRORED_REPEAT,"mirror"),dy),ew=(C_={},(0,bt.Z)(C_,Te.gl.NONE,"none"),(0,bt.Z)(C_,Te.gl.BROWSER_DEFAULT_WEBGL,"browser"),C_),tw=(Lv={},(0,bt.Z)(Lv,Te.gl.NEVER,"never"),(0,bt.Z)(Lv,Te.gl.ALWAYS,"always"),(0,bt.Z)(Lv,Te.gl.LESS,"less"),(0,bt.Z)(Lv,Te.gl.LEQUAL,"lequal"),(0,bt.Z)(Lv,Te.gl.GREATER,"greater"),(0,bt.Z)(Lv,Te.gl.GEQUAL,"gequal"),(0,bt.Z)(Lv,Te.gl.EQUAL,"equal"),(0,bt.Z)(Lv,Te.gl.NOTEQUAL,"notequal"),Lv),jE=(bm={},(0,bt.Z)(bm,Te.gl.FUNC_ADD,"add"),(0,bt.Z)(bm,Te.gl.MIN_EXT,"min"),(0,bt.Z)(bm,Te.gl.MAX_EXT,"max"),(0,bt.Z)(bm,Te.gl.FUNC_SUBTRACT,"subtract"),(0,bt.Z)(bm,Te.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),bm),T_=(sp={},(0,bt.Z)(sp,Te.gl.ZERO,"zero"),(0,bt.Z)(sp,Te.gl.ONE,"one"),(0,bt.Z)(sp,Te.gl.SRC_COLOR,"src color"),(0,bt.Z)(sp,Te.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,bt.Z)(sp,Te.gl.SRC_ALPHA,"src alpha"),(0,bt.Z)(sp,Te.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,bt.Z)(sp,Te.gl.DST_COLOR,"dst color"),(0,bt.Z)(sp,Te.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,bt.Z)(sp,Te.gl.DST_ALPHA,"dst alpha"),(0,bt.Z)(sp,Te.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,bt.Z)(sp,Te.gl.CONSTANT_COLOR,"constant color"),(0,bt.Z)(sp,Te.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,bt.Z)(sp,Te.gl.CONSTANT_ALPHA,"constant alpha"),(0,bt.Z)(sp,Te.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,bt.Z)(sp,Te.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),sp),rw=(kv={},(0,bt.Z)(kv,Te.gl.NEVER,"never"),(0,bt.Z)(kv,Te.gl.ALWAYS,"always"),(0,bt.Z)(kv,Te.gl.LESS,"less"),(0,bt.Z)(kv,Te.gl.LEQUAL,"lequal"),(0,bt.Z)(kv,Te.gl.GREATER,"greater"),(0,bt.Z)(kv,Te.gl.GEQUAL,"gequal"),(0,bt.Z)(kv,Te.gl.EQUAL,"equal"),(0,bt.Z)(kv,Te.gl.NOTEQUAL,"notequal"),kv),vg=(Dv={},(0,bt.Z)(Dv,Te.gl.ZERO,"zero"),(0,bt.Z)(Dv,Te.gl.KEEP,"keep"),(0,bt.Z)(Dv,Te.gl.REPLACE,"replace"),(0,bt.Z)(Dv,Te.gl.INVERT,"invert"),(0,bt.Z)(Dv,Te.gl.INCR,"increment"),(0,bt.Z)(Dv,Te.gl.DECR,"decrement"),(0,bt.Z)(Dv,Te.gl.INCR_WRAP,"increment wrap"),(0,bt.Z)(Dv,Te.gl.DECR_WRAP,"decrement wrap"),Dv),nw=(A_={},(0,bt.Z)(A_,Te.gl.FRONT,"front"),(0,bt.Z)(A_,Te.gl.BACK,"back"),A_),iw=function(){function a(s,n){(0,Cr.Z)(this,a);var r=n.data,t=n.usage,o=n.type;this.buffer=s.buffer({data:r,usage:ZE[t||Te.gl.STATIC_DRAW],type:i2[o||Te.gl.UNSIGNED_BYTE]})}return(0,Nr.Z)(a,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(n){var r=n.data,t=n.offset;this.buffer.subdata(r,t)}}]),a}(),aw=function(){function a(s,n){(0,Cr.Z)(this,a);var r=n.data,t=n.usage,o=n.type,u=n.count;this.elements=s.elements({data:r,usage:ZE[t||Te.gl.STATIC_DRAW],type:i2[o||Te.gl.UNSIGNED_BYTE],count:u})}return(0,Nr.Z)(a,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){}}]),a}(),ow=function(){function a(s,n){(0,Cr.Z)(this,a);var r=n.width,t=n.height,o=n.color,u=n.colors,d={width:r,height:t};Array.isArray(u)&&(d.colors=u.map(function(S){return S.get()})),o&&typeof o!="boolean"&&(d.color=o.get()),this.framebuffer=s.framebuffer(d)}return(0,Nr.Z)(a,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,t=n.height;this.framebuffer.resize(r,t)}}]),a}(),sw=function(){function a(s,n){(0,Cr.Z)(this,a),(0,bt.Z)(this,"destroyed",!1),(0,bt.Z)(this,"uniforms",{}),this.reGl=s;var r=n.pick,t=r===void 0?!0:r,o=n.vs,u=n.fs,d=n.attributes,S=n.uniforms,z=n.primitive,de=n.count,be=n.elements,it=n.depth,nt=n.blend,Kt=n.stencil,tr=n.cull,Ir=n.instances,jr={};this.options=n,S&&(this.uniforms=this.extractUniforms(S),Object.keys(S).forEach(function(ci){jr[ci]=s.prop(ci)}));var on={};Object.keys(d).forEach(function(ci){on[ci]=d[ci].get()});var tn={attributes:on,frag:u,uniforms:jr,vert:o,blend:{},primitive:qS[z===void 0?Te.gl.TRIANGLES:z]};if(Ir&&(tn.instances=Ir),de?tn.count=de:be&&(tn.elements=be.get()),this.initDepthDrawParams({depth:it},tn),this.initBlendDrawParams({blend:nt},tn),this.initStencilDrawParams({stencil:Kt},tn),this.initCullDrawParams({cull:tr},tn),this.drawCommand=s(tn),t){var Yn=(0,ht.cloneDeep)(tn);Yn.blend=(0,ge.Z)((0,ge.Z)({},Yn.blend),{},{enable:!1}),this.drawPickCommand=s(Yn)}this.drawParams=tn}return(0,Nr.Z)(a,[{key:"updateAttributesAndElements",value:function(n,r){var t={};if(Object.keys(n).forEach(function(u){t[u]=n[u].get()}),this.drawParams.attributes=t,this.drawParams.elements=r.get(),this.drawCommand=this.reGl(this.drawParams),this.options.pick){var o=(0,ht.cloneDeep)(this.drawParams);o.blend=(0,ge.Z)((0,ge.Z)({},o.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(o)}}},{key:"updateAttributes",value:function(n){var r={};if(Object.keys(n).forEach(function(o){r[o]=n[o].get()}),this.drawParams.attributes=r,this.drawCommand=this.reGl(this.drawParams),this.options.pick){var t=(0,ht.cloneDeep)(this.drawParams);t.blend=(0,ge.Z)((0,ge.Z)({},t.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(t)}}},{key:"addUniforms",value:function(n){this.uniforms=(0,ge.Z)((0,ge.Z)({},this.uniforms),this.extractUniforms(n))}},{key:"draw",value:function(n,r){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var t=(0,ge.Z)((0,ge.Z)({},this.uniforms),this.extractUniforms(n.uniforms||{})),o={};Object.keys(t).forEach(function(u){var d=(0,Ne.Z)(t[u]);d==="boolean"||d==="number"||Array.isArray(t[u])||t[u].BYTES_PER_ELEMENT?o[u]=t[u]:o[u]=t[u].get()}),r?this.drawPickCommand&&this.drawPickCommand(o):this.drawCommand(o)}}},{key:"destroy",value:function(){var n,r;(n=this.drawParams)===null||n===void 0||(r=n.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(t){t==null||t.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(n,r){var t=n.depth;t&&(r.depth={enable:t.enable===void 0?!0:!!t.enable,mask:t.mask===void 0?!0:!!t.mask,func:tw[t.func||Te.gl.LESS],range:t.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var t=n.blend;if(t){var o=t.enable,u=t.func,d=t.equation,S=t.color,z=S===void 0?[0,0,0,0]:S;r.blend={enable:!!o,func:{srcRGB:T_[u&&u.srcRGB||Te.gl.SRC_ALPHA],srcAlpha:T_[u&&u.srcAlpha||Te.gl.SRC_ALPHA],dstRGB:T_[u&&u.dstRGB||Te.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:T_[u&&u.dstAlpha||Te.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:jE[d&&d.rgb||Te.gl.FUNC_ADD],alpha:jE[d&&d.alpha||Te.gl.FUNC_ADD]},color:z}}}},{key:"initStencilDrawParams",value:function(n,r){var t=n.stencil;if(t){var o=t.enable,u=t.mask,d=u===void 0?-1:u,S=t.func,z=S===void 0?{cmp:Te.gl.ALWAYS,ref:0,mask:-1}:S,de=t.opFront,be=de===void 0?{fail:Te.gl.KEEP,zfail:Te.gl.KEEP,zpass:Te.gl.KEEP}:de,it=t.opBack,nt=it===void 0?{fail:Te.gl.KEEP,zfail:Te.gl.KEEP,zpass:Te.gl.KEEP}:it;r.stencil={enable:!!o,mask:d,func:(0,ge.Z)((0,ge.Z)({},z),{},{cmp:rw[z.cmp]}),opFront:{fail:vg[be.fail],zfail:vg[be.zfail],zpass:vg[be.zpass]},opBack:{fail:vg[nt.fail],zfail:vg[nt.zfail],zpass:vg[nt.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var t=n.cull;if(t){var o=t.enable,u=t.face,d=u===void 0?Te.gl.BACK:u;r.cull={enable:!!o,face:nw[d]}}}},{key:"extractUniforms",value:function(n){var r=this,t={};return Object.keys(n).forEach(function(o){r.extractUniformsRecursively(o,n[o],t,"")}),t}},{key:"extractUniformsRecursively",value:function(n,r,t,o){var u=this;if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||(0,ht.isTypedArray)(r)||r===""||"resize"in r){t["".concat(o&&o+".").concat(n)]=r;return}(0,ht.isPlainObject)(r)&&Object.keys(r).forEach(function(d){u.extractUniformsRecursively(d,r[d],t,"".concat(o&&o+".").concat(n))}),Array.isArray(r)&&r.forEach(function(d,S){Object.keys(d).forEach(function(z){u.extractUniformsRecursively(z,d[z],t,"".concat(o&&o+".").concat(n,"[").concat(S,"]"))})})}}]),a}(),uw=function(){function a(s,n){(0,Cr.Z)(this,a),(0,bt.Z)(this,"isDestroy",!1);var r=n.data,t=n.type,o=t===void 0?Te.gl.UNSIGNED_BYTE:t,u=n.width,d=n.height,S=n.flipY,z=S===void 0?!1:S,de=n.format,be=de===void 0?Te.gl.RGBA:de,it=n.mipmap,nt=it===void 0?!1:it,Kt=n.wrapS,tr=Kt===void 0?Te.gl.CLAMP_TO_EDGE:Kt,Ir=n.wrapT,jr=Ir===void 0?Te.gl.CLAMP_TO_EDGE:Ir,on=n.aniso,tn=on===void 0?0:on,Yn=n.alignment,ci=Yn===void 0?1:Yn,Zi=n.premultiplyAlpha,zi=Zi===void 0?!1:Zi,pa=n.mag,_o=pa===void 0?Te.gl.NEAREST:pa,wo=n.min,Ba=wo===void 0?Te.gl.NEAREST:wo,ms=n.colorSpace,au=ms===void 0?Te.gl.BROWSER_DEFAULT_WEBGL:ms,Al=n.x,nd=Al===void 0?0:Al,Ih=n.y,Rh=Ih===void 0?0:Ih,md=n.copy,hh=md===void 0?!1:md;this.width=u,this.height=d;var tp={width:u,height:d,type:i2[o],format:QS[be],wrapS:$E[tr],wrapT:$E[jr],mag:UE[_o],min:UE[Ba],alignment:ci,flipY:z,colorSpace:ew[au],premultiplyAlpha:zi,aniso:tn,x:nd,y:Rh,copy:hh};r&&(tp.data=r),typeof nt=="number"?tp.mipmap=JS[nt]:typeof nt=="boolean"&&(tp.mipmap=nt),this.texture=s.texture(tp)}return(0,Nr.Z)(a,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(n)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,t=n.height;this.texture.resize(r,t),this.width=r,this.height=t}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var n;(n=this.texture)===null||n===void 0||n.destroy()}this.isDestroy=!0}}]),a}(),HE,VE,lw=(HE=(0,ba.b2)(),HE(VE=function(){function a(){var s=this;(0,Cr.Z)(this,a),(0,bt.Z)(this,"createModel",function(n){return new sw(s.gl,n)}),(0,bt.Z)(this,"createAttribute",function(n){return new YS(s.gl,n)}),(0,bt.Z)(this,"createBuffer",function(n){return new iw(s.gl,n)}),(0,bt.Z)(this,"createElements",function(n){return new aw(s.gl,n)}),(0,bt.Z)(this,"createTexture2D",function(n){return new uw(s.gl,n)}),(0,bt.Z)(this,"createFramebuffer",function(n){return new ow(s.gl,n)}),(0,bt.Z)(this,"useFramebuffer",function(n,r){s.gl({framebuffer:n?n.get():null})(r)}),(0,bt.Z)(this,"clear",function(n){var r,t=n.color,o=n.depth,u=n.stencil,d=n.framebuffer,S=d===void 0?null:d,z={color:t,depth:o,stencil:u};z.framebuffer=S===null?S:S.get(),(r=s.gl)===null||r===void 0||r.clear(z)}),(0,bt.Z)(this,"viewport",function(n){var r=n.x,t=n.y,o=n.width,u=n.height;s.gl._gl.viewport(r,t,o,u),s.width=o,s.height=u,s.gl._refresh()}),(0,bt.Z)(this,"readPixels",function(n){var r=n.framebuffer,t=n.x,o=n.y,u=n.width,d=n.height,S={x:t,y:o,width:u,height:d};return r&&(S.framebuffer=r.get()),s.gl.read(S)}),(0,bt.Z)(this,"getViewportSize",function(){return{width:s.gl._gl.drawingBufferWidth,height:s.gl._gl.drawingBufferHeight}}),(0,bt.Z)(this,"getContainer",function(){if(tt.eW)return s.canvas;var n;return(n=s.canvas)===null||n===void 0?void 0:n.parentElement}),(0,bt.Z)(this,"getCanvas",function(){return s.canvas}),(0,bt.Z)(this,"getGLContext",function(){return s.gl._gl}),(0,bt.Z)(this,"destroy",function(){var n,r,t;s.canvas=null,(n=s.gl)===null||n===void 0||(r=n._gl)===null||r===void 0||(t=r.getExtension("WEBGL_lose_context"))===null||t===void 0||t.loseContext(),s.gl.destroy(),s.gl=null})}return(0,Nr.Z)(a,[{key:"init",value:function(){var s=(0,ft.Z)(fe().mark(function r(t,o,u){var d=this;return fe().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(this.canvas=t,!u){z.next=5;break}this.gl=u,z.next=8;break;case 5:return z.next=7,new Promise(function(de,be){KS()({canvas:d.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(nt,Kt){(nt||!Kt)&&be(nt),de(Kt)}})});case 7:this.gl=z.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return z.stop()}},r,this)}));function n(r,t,o){return s.apply(this,arguments)}return n}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(n){return!!this.getGLContext().getExtension(n)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var n=this.getGLContext();n.disable(n.CULL_FACE)}},{key:"setDirty",value:function(n){this.isDirty=n}},{key:"getDirty",value:function(){return this.isDirty}}]),a}())||VE);function cw(a){var s=fw();return function(){var r=(0,zr.Z)(a),t;if(s){var o=(0,zr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function fw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var a2=["selectstart","selecting","selectend"],hw=function(a){(0,kr.Z)(n,a);var s=cw(n);function n(r){var t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Cr.Z)(this,n),t=s.call(this),(0,bt.Z)((0,or.Z)(t),"isEnable",!1),(0,bt.Z)((0,or.Z)(t),"onDragStart",function(u){t.box.style.display="block",t.startEvent=t.endEvent=u,t.syncBoxBound(),t.emit("selectstart",t.getLngLatBox(),t.startEvent,t.endEvent)}),(0,bt.Z)((0,or.Z)(t),"onDragging",function(u){t.endEvent=u,t.syncBoxBound(),t.emit("selecting",t.getLngLatBox(),t.startEvent,t.endEvent)}),(0,bt.Z)((0,or.Z)(t),"onDragEnd",function(u){t.endEvent=u,t.box.style.display="none",t.emit("selectend",t.getLngLatBox(),t.startEvent,t.endEvent)}),t.scene=r,t.options=o,t}return(0,Nr.Z)(n,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var t=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var o=tt.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),t&&o.classList.add(t),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var t=this.startEvent,o=t.x,u=t.y,d=this.endEvent,S=d.x,z=d.y,de=Math.min(o,S),be=Math.min(u,z),it=Math.abs(o-S),nt=Math.abs(u-z);this.box.style.top="".concat(be,"px"),this.box.style.left="".concat(de,"px"),this.box.style.width="".concat(it,"px"),this.box.style.height="".concat(nt,"px")}},{key:"getLngLatBox",value:function(){var t=this.startEvent.lngLat,o=t.lng,u=t.lat,d=this.endEvent.lngLat,S=d.lng,z=d.lat;return(0,tt.Ol)([[o,u],[S,z]])}}]),n}(Vr.EventEmitter),dw=function(){function a(s){(0,Cr.Z)(this,a);var n=s.id,r=s.map,t=s.canvas,o=s.hasBaseMap,u=(0,Te.Hp)();this.container=u,r.setContainer(u,n,t,o),u.bind(Te.vK.IRendererService).to(lw).inSingletonScope(),this.sceneService=u.get(Te.vK.ISceneService),this.mapService=u.get(Te.vK.IMapService),this.iconService=u.get(Te.vK.IIconService),this.fontService=u.get(Te.vK.IFontService),this.controlService=u.get(Te.vK.IControlService),this.layerService=u.get(Te.vK.ILayerService),this.debugService=u.get(Te.vK.IDebugService),this.debugService.setEnable(s.debug),this.markerService=u.get(Te.vK.IMarkerService),this.interactionService=u.get(Te.vK.IInteractionService),this.popupService=u.get(Te.vK.IPopupService),this.boxSelect=new hw(this,{}),(0,tt.a)((s==null?void 0:s.isMini)||!1),tt.eW?this.sceneService.initMiniScene(s):(this.initComponent(n),this.sceneService.init(s),this.initControl())}return(0,Nr.Z)(a,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var s=(0,ft.Z)(fe().mark(function r(t){return fe().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.sceneService.exportPng(t));case 1:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"exportMap",value:function(){var s=(0,ft.Z)(fe().mark(function r(t){return fe().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.sceneService.exportPng(t));case 1:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"registerRenderService",value:function(n){var r=this;if(this.sceneService.loaded){var t=new n(this);t.init()}else this.on("loaded",function(){var o=new n(r);o.init()})}},{key:"setBgColor",value:function(n){this.mapService.setBgColor(n)}},{key:"addLayer",value:function(n){var r=this,t=(0,Te.e7)(this.container);if(n.setContainer(t,this.container),this.sceneService.addLayer(n),n.inited){var o=this.initMask(n);this.addMask(o,n.id)}else n.on("inited",function(){var u=r.initMask(n);r.addMask(u,n.id)})}},{key:"initMask",value:function(n){var r=n.getLayerConfig(),t=r.mask,o=r.maskfence,u=r.maskColor,d=u===void 0?"#000":u,S=r.maskOpacity,z=S===void 0?0:S;if(!(!t||!o)){var de=new Ad().source(o).shape("fill").style({color:d,opacity:z});return de}}},{key:"addMask",value:function(n,r){if(n){var t=this.getLayer(r);if(t){var o=(0,Te.e7)(this.container);n.setContainer(o,this.container),t.addMaskLayer(n),this.sceneService.addMask(n)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(n){return this.layerService.getLayer(n)}},{key:"getLayerByName",value:function(n){return this.layerService.getLayerByName(n)}},{key:"removeLayer",value:function(){var s=(0,ft.Z)(fe().mark(function r(t,o){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.layerService.remove(t,o);case 2:case"end":return d.stop()}},r,this)}));function n(r,t){return s.apply(this,arguments)}return n}()},{key:"removeAllLayer",value:function(){var s=(0,ft.Z)(fe().mark(function r(){return fe().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.layerService.removeAllLayers();case 2:case"end":return o.stop()}},r,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(n){this.layerService.setEnableRender(n)}},{key:"addIconFont",value:function(n,r){this.fontService.addIconFont(n,r)}},{key:"addIconFonts",value:function(n){var r=this;n.forEach(function(t){var o=(0,xi.Z)(t,2),u=o[0],d=o[1];r.fontService.addIconFont(u,d)})}},{key:"addFontFace",value:function(n,r){var t=this;this.fontService.once("fontloaded",function(o){t.emit("fontloaded",o)}),this.fontService.addFontFace(n,r)}},{key:"addImage",value:function(){var s=(0,ft.Z)(fe().mark(function r(t,o){return fe().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(tt.eW){d.next=5;break}return d.next=3,this.iconService.addImage(t,o);case 3:d.next=6;break;case 5:this.iconService.addImageMini(t,o,this.sceneService);case 6:case"end":return d.stop()}},r,this)}));function n(r,t){return s.apply(this,arguments)}return n}()},{key:"hasImage",value:function(n){return this.iconService.hasImage(n)}},{key:"removeImage",value:function(n){this.iconService.removeImage(n)}},{key:"addIconFontGlyphs",value:function(n,r){this.fontService.addIconGlyphs(r)}},{key:"addControl",value:function(n){this.controlService.addControl(n,this.container)}},{key:"removeControl",value:function(n){this.controlService.removeControl(n)}},{key:"getControlByName",value:function(n){return this.controlService.getControlByName(n)}},{key:"addMarker",value:function(n){this.markerService.addMarker(n)}},{key:"addMarkerLayer",value:function(n){this.markerService.addMarkerLayer(n)}},{key:"removeMarkerLayer",value:function(n){this.markerService.removeMarkerLayer(n)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(n){this.popupService.addPopup(n)}},{key:"removePopup",value:function(n){this.popupService.removePopup(n)}},{key:"on",value:function(n,r){if(a2.includes(n)){var t;(t=this.boxSelect)===null||t===void 0||t.on(n,r)}else Te.P7.includes(n)?this.sceneService.on(n,r):this.mapService.on(n,r)}},{key:"once",value:function(n,r){if(a2.includes(n)){var t;(t=this.boxSelect)===null||t===void 0||t.once(n,r)}else Te.P7.includes(n)?this.sceneService.once(n,r):this.mapService.once(n,r)}},{key:"emit",value:function(n,r){Te.P7.indexOf(n)===-1?this.mapService.on(n,r):this.sceneService.emit(n,r)}},{key:"off",value:function(n,r){if(a2.includes(n)){var t;(t=this.boxSelect)===null||t===void 0||t.off(n,r)}else Te.P7.includes(n)?this.sceneService.off(n,r):this.mapService.off(n,r)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(n){return this.mapService.getCenter(n)}},{key:"setCenter",value:function(n,r){return this.mapService.setCenter(n,r)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(n){return this.mapService.setPitch(n)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(n){this.mapService.setRotation(n)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(n){this.mapService.panTo(n)}},{key:"panBy",value:function(n,r){this.mapService.panBy(n,r)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(n){this.mapService.setZoom(n)}},{key:"fitBounds",value:function(n,r){var t=this.sceneService.getSceneConfig(),o=t.fitBoundsOptions,u=t.animate;this.mapService.fitBounds(n,r||(0,ge.Z)((0,ge.Z)({},o),{},{animate:u}))}},{key:"setZoomAndCenter",value:function(n,r){this.mapService.setZoomAndCenter(n,r)}},{key:"setMapStyle",value:function(n){this.mapService.setMapStyle(n)}},{key:"setMapStatus",value:function(n){this.mapService.setMapStatus(n)}},{key:"pixelToLngLat",value:function(n){return this.mapService.pixelToLngLat(n)}},{key:"lngLatToPixel",value:function(n){return this.mapService.lngLatToPixel(n)}},{key:"containerToLngLat",value:function(n){return this.mapService.containerToLngLat(n)}},{key:"lngLatToContainer",value:function(n){return this.mapService.lngLatToContainer(n)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(n,r){this.container.bind(Te.vK.IPostProcessingPass).to(n).whenTargetNamed(r)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),r&&this.boxSelect.once("selectend",function(){n.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(n){this.controlService.init({container:tt.SO.getContainer(n)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var n=this.sceneService.getSceneConfig(),r=n.logoVisible,t=n.logoPosition;r&&this.addControl(new _c({position:t}))}}]),a}(),pw="2.13.9"},98163:function(vt,Ee,g){"use strict";g.d(Ee,{Co:function(){return km},$2:function(){return lc},Kh:function(){return bx},w3:function(){return $_}});var v=g(70844),M=g(67294),c=g(18446),K=g.n(c);const N=(h=[],x=[])=>K()(h,x);var B=(h=>(x,C)=>{const he=(0,M.useRef)(),yt=(0,M.useRef)(0);(C===void 0||!N(C,he.current))&&(he.current=C,yt.current+=1),h(x,[yt.current])})(M.useEffect),L=g(94184),$=g.n(L),U=typeof global=="object"&&global&&global.Object===Object&&global,ke=U,We=typeof self=="object"&&self&&self.Object===Object&&self,me=ke||We||Function("return this")(),Le=me,Se=Le.Symbol,et=Se,at=Object.prototype,Lt=at.hasOwnProperty,Et=at.toString,jt=et?et.toStringTag:void 0;function pe(h){var x=Lt.call(h,jt),C=h[jt];try{h[jt]=void 0;var he=!0}catch(Yt){}var yt=Et.call(h);return he&&(x?h[jt]=C:delete h[jt]),yt}var $e=pe,ye=Object.prototype,ie=ye.toString;function re(h){return ie.call(h)}var De=re,le="[object Null]",ge="[object Undefined]",ce=et?et.toStringTag:void 0;function je(h){return h==null?h===void 0?ge:le:ce&&ce in Object(h)?$e(h):De(h)}var J=je;function Me(h){return h!=null&&typeof h=="object"}var ne=Me,xe="[object Number]";function Ne(h){return typeof h=="number"||ne(h)&&J(h)==xe}var Pe=Ne,He="*",lt=function(){function h(){this._events={}}return h.prototype.on=function(x,C,he){return this._events[x]||(this._events[x]=[]),this._events[x].push({callback:C,once:!!he}),this},h.prototype.once=function(x,C){return this.on(x,C,!0)},h.prototype.emit=function(x){for(var C=this,he=[],yt=1;yt<arguments.length;yt++)he[yt-1]=arguments[yt];var Yt=this._events[x]||[],gr=this._events[He]||[],Sr=function(Gr){for(var Bn=Gr.length,ui=0;ui<Bn;ui++)if(Gr[ui]){var da=Gr[ui],ro=da.callback,Xo=da.once;Xo&&(Gr.splice(ui,1),Gr.length===0&&delete C._events[x],Bn--,ui--),ro.apply(C,he)}};Sr(Yt),Sr(gr)},h.prototype.off=function(x,C){if(!x)this._events={};else if(!C)delete this._events[x];else{for(var he=this._events[x]||[],yt=he.length,Yt=0;Yt<yt;Yt++)he[Yt].callback===C&&(he.splice(Yt,1),yt--,Yt--);he.length===0&&delete this._events[x]}return this},h.prototype.getEvents=function(){return this._events},h}(),ft=lt;function It(h){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},It(h)}function fe(h,x){var C=typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(!C){if(Array.isArray(h)||(C=_t(h))||x&&h&&typeof h.length=="number"){C&&(h=C);var he=0,yt=function(){};return{s:yt,n:function(){return he>=h.length?{done:!0}:{done:!1,value:h[he++]}},e:function(Bn){throw Bn},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yt=!0,gr=!1,Sr;return{s:function(){C=C.call(h)},n:function(){var Bn=C.next();return Yt=Bn.done,Bn},e:function(Bn){gr=!0,Sr=Bn},f:function(){try{!Yt&&C.return!=null&&C.return()}finally{if(gr)throw Sr}}}}function _t(h,x){if(h){if(typeof h=="string")return Ye(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ye(h,x)}}function Ye(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Ot(h,x){if(!(h instanceof x))throw new TypeError("Cannot call a class as a function")}function mt(h,x){for(var C=0;C<x.length;C++){var he=x[C];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(h,G(he.key),he)}}function Rt(h,x,C){return x&&mt(h.prototype,x),C&&mt(h,C),Object.defineProperty(h,"prototype",{writable:!1}),h}function pt(h,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(x&&x.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),x&&Ge(h,x)}function Ge(h,x){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,yt){return he.__proto__=yt,he},Ge(h,x)}function wt(h){var x=dt();return function(){var he=D(h),yt;if(x){var Yt=D(this).constructor;yt=Reflect.construct(he,arguments,Yt)}else yt=he.apply(this,arguments);return ee(this,yt)}}function ee(h,x){if(x&&(It(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Re(h)}function Re(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function dt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function D(h){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},D(h)}function q(h,x,C){return x=G(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function G(h){var x=O(h,"string");return It(x)==="symbol"?x:String(x)}function O(h,x){if(It(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(It(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var k=0,X=function(h){pt(C,h);var x=wt(C);function C(he){var yt;return Ot(this,C),yt=x.call(this),q(Re(yt),"scene",void 0),q(Re(yt),"options",void 0),q(Re(yt),"layerMap",new Map),yt.scene=he.scene,yt.options=he,yt}return Rt(C,[{key:"hasLayer",value:function(yt){return this.layerMap.has(yt)}},{key:"addLayer",value:function(yt){var Yt=this.getLayerId(yt);this.layerMap.set(Yt,yt),yt.addTo(this.scene),this.emit("add",yt)}},{key:"addLayers",value:function(yt){var Yt=this;yt.forEach(function(gr){Yt.addLayer(gr)})}},{key:"removeLayer",value:function(yt){var Yt=typeof yt=="string"?yt:this.getLayerId(yt),gr=this.layerMap.get(Yt);return gr?(this.layerMap.delete(Yt),gr.remove(),this.emit("remove",Yt),!0):!1}},{key:"getLayers",value:function(){return Array.from(this.layerMap.values())}},{key:"getLayerById",value:function(yt){return this.layerMap.get(yt)}},{key:"getLayer",value:function(yt){return this.getLayerById(yt)}},{key:"removeAllLayer",value:function(){var yt=fe(this.layerMap.values()),Yt;try{for(yt.s();!(Yt=yt.n()).done;){var gr=Yt.value;gr.remove()}}catch(Sr){yt.e(Sr)}finally{yt.f()}this.layerMap.clear()}},{key:"isEmpty",value:function(){return this.layerMap.size===0}},{key:"getLayerId",value:function(yt){return"id"in yt?yt.id:"".concat(k++)}},{key:"destroy",value:function(){this.removeAllLayer()}}]),C}(ft);function W(h,x,C,he){var yt=-1,Yt=h==null?0:h.length;for(he&&Yt&&(C=h[++yt]);++yt<Yt;)C=x(C,h[yt],yt,h);return C}var ae=W;function Be(h){return function(x){return h==null?void 0:h[x]}}var ve=Be,Je={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ot=ve(Je),Qe=ot;function ir(h,x){for(var C=-1,he=h==null?0:h.length,yt=Array(he);++C<he;)yt[C]=x(h[C],C,h);return yt}var mr=ir,Ar=Array.isArray,Er=Ar,Zt="[object Symbol]";function Tr(h){return typeof h=="symbol"||ne(h)&&J(h)==Zt}var pn=Tr,un=1/0,Zn=et?et.prototype:void 0,Cr=Zn?Zn.toString:void 0;function Nr(h){if(typeof h=="string")return h;if(Er(h))return mr(h,Nr)+"";if(pn(h))return Cr?Cr.call(h):"";var x=h+"";return x=="0"&&1/h==-un?"-0":x}var bt=Nr;function jn(h){return h==null?"":bt(h)}var Pt=jn,zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt="\\u0300-\\u036f",dr="\\ufe20-\\ufe2f",_r="\\u20d0-\\u20ff",Hr=Qt+dr+_r,Qr="["+Hr+"]",fr=RegExp(Qr,"g");function tt(h){return h=Pt(h),h&&h.replace(zt,Qe).replace(fr,"")}var Yr=tt,Tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function wn(h){return h.match(Tn)||[]}var Nn=wn,Si=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function fa(h){return Si.test(h)}var Xi=fa,Ln="\\ud800-\\udfff",na="\\u0300-\\u036f",xi="\\ufe20-\\ufe2f",ta="\\u20d0-\\u20ff",La=na+xi+ta,Ki="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",uo="\\xac\\xb1\\xd7\\xf7",An="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gn="\\u2000-\\u206f",Oi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fi="A-Z\\xc0-\\xd6\\xd8-\\xde",va="\\ufe0e\\ufe0f",wa=uo+An+gn+Oi,Ca="['\u2019]",Aa="["+wa+"]",ma="["+La+"]",ka="\\d+",Uo="["+Ki+"]",ha="["+jo+"]",xa="[^"+Ln+wa+ka+Ki+jo+fi+"]",eo="\\ud83c[\\udffb-\\udfff]",Te="(?:"+ma+"|"+eo+")",Po="[^"+Ln+"]",Hs="(?:\\ud83c[\\udde6-\\uddff]){2}",no="[\\ud800-\\udbff][\\udc00-\\udfff]",Jo="["+fi+"]",os="\\u200d",Go="(?:"+ha+"|"+xa+")",Wo="(?:"+Jo+"|"+xa+")",za="(?:"+Ca+"(?:d|ll|m|re|s|t|ve))?",Tu="(?:"+Ca+"(?:D|LL|M|RE|S|T|VE))?",ws=Te+"?",Zs="["+va+"]?",ts="(?:"+os+"(?:"+[Po,Hs,no].join("|")+")"+Zs+ws+")*",Vs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ou="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ls=Zs+ws+ts,ki="(?:"+[Uo,Hs,no].join("|")+")"+ls,As=RegExp([Jo+"?"+ha+"+"+za+"(?="+[Aa,Jo,"$"].join("|")+")",Wo+"+"+Tu+"(?="+[Aa,Jo+Go,"$"].join("|")+")",Jo+"?"+Go+"+"+za,Jo+"+"+Tu,ou,Vs,ka,ki].join("|"),"g");function Rs(h){return h.match(As)||[]}var hr=Rs;function Lr(h,x,C){return h=Pt(h),x=C?void 0:x,x===void 0?Xi(h)?hr(h):Nn(h):h.match(x)||[]}var or=Lr,kr="['\u2019]",Hn=RegExp(kr,"g");function zr(h){return function(x){return ae(or(Yr(x).replace(Hn,"")),h,"")}}var Bo=zr,Vr=Bo(function(h,x,C){return h+(C?"-":"")+x.toLowerCase()}),cr=Vr;function ht(h,x){return Vn(h)||fn(h,x)||er(h,x)||ur()}function ur(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function er(h,x){if(h){if(typeof h=="string")return sn(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return sn(h,x)}}function sn(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function fn(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Vn(h){if(Array.isArray(h))return h}var ni=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(x!=null?x:{}).map(function(C){var he=ht(C,2),yt=he[0],Yt=he[1],gr=cr(yt),Sr=Yt;return typeof Sr=="number"?Sr="".concat(Sr,"px"):typeof Sr=="string"&&(Sr=Sr.replace("'","")),"".concat(gr," :").concat(Sr)}).join("; ")};function oi(h){return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},oi(h)}function Ei(){"use strict";Ei=function(){return h};var h={},x=Object.prototype,C=x.hasOwnProperty,he=Object.defineProperty||function(Ui,mi,Pi){Ui[mi]=Pi.value},yt=typeof Symbol=="function"?Symbol:{},Yt=yt.iterator||"@@iterator",gr=yt.asyncIterator||"@@asyncIterator",Sr=yt.toStringTag||"@@toStringTag";function Gr(Ui,mi,Pi){return Object.defineProperty(Ui,mi,{value:Pi,enumerable:!0,configurable:!0,writable:!0}),Ui[mi]}try{Gr({},"")}catch(Ui){Gr=function(Pi,Wa,ko){return Pi[Wa]=ko}}function Bn(Ui,mi,Pi,Wa){var ko=mi&&mi.prototype instanceof ro?mi:ro,Mo=Object.create(ko.prototype),Xu=new Su(Wa||[]);return he(Mo,"_invoke",{value:ul(Ui,Pi,Xu)}),Mo}function ui(Ui,mi,Pi){try{return{type:"normal",arg:Ui.call(mi,Pi)}}catch(Wa){return{type:"throw",arg:Wa}}}h.wrap=Bn;var da={};function ro(){}function Xo(){}function Fo(){}var ho={};Gr(ho,Yt,function(){return this});var ns=Object.getPrototypeOf,vs=ns&&ns(ns(zu([])));vs&&vs!==x&&C.call(vs,Yt)&&(ho=vs);var us=Fo.prototype=ro.prototype=Object.create(ho);function Eu(Ui){["next","throw","return"].forEach(function(mi){Gr(Ui,mi,function(Pi){return this._invoke(mi,Pi)})})}function Nu(Ui,mi){function Pi(ko,Mo,Xu,gc){var uf=ui(Ui[ko],Ui,Mo);if(uf.type!=="throw"){var Md=uf.arg,zh=Md.value;return zh&&oi(zh)=="object"&&C.call(zh,"__await")?mi.resolve(zh.__await).then(function(Pd){Pi("next",Pd,Xu,gc)},function(Pd){Pi("throw",Pd,Xu,gc)}):mi.resolve(zh).then(function(Pd){Md.value=Pd,Xu(Md)},function(Pd){return Pi("throw",Pd,Xu,gc)})}gc(uf.arg)}var Wa;he(this,"_invoke",{value:function(Mo,Xu){function gc(){return new mi(function(uf,Md){Pi(Mo,Xu,uf,Md)})}return Wa=Wa?Wa.then(gc,gc):gc()}})}function ul(Ui,mi,Pi){var Wa="suspendedStart";return function(ko,Mo){if(Wa==="executing")throw new Error("Generator is already running");if(Wa==="completed"){if(ko==="throw")throw Mo;return uc()}for(Pi.method=ko,Pi.arg=Mo;;){var Xu=Pi.delegate;if(Xu){var gc=sf(Xu,Pi);if(gc){if(gc===da)continue;return gc}}if(Pi.method==="next")Pi.sent=Pi._sent=Pi.arg;else if(Pi.method==="throw"){if(Wa==="suspendedStart")throw Wa="completed",Pi.arg;Pi.dispatchException(Pi.arg)}else Pi.method==="return"&&Pi.abrupt("return",Pi.arg);Wa="executing";var uf=ui(Ui,mi,Pi);if(uf.type==="normal"){if(Wa=Pi.done?"completed":"suspendedYield",uf.arg===da)continue;return{value:uf.arg,done:Pi.done}}uf.type==="throw"&&(Wa="completed",Pi.method="throw",Pi.arg=uf.arg)}}}function sf(Ui,mi){var Pi=mi.method,Wa=Ui.iterator[Pi];if(Wa===void 0)return mi.delegate=null,Pi==="throw"&&Ui.iterator.return&&(mi.method="return",mi.arg=void 0,sf(Ui,mi),mi.method==="throw")||Pi!=="return"&&(mi.method="throw",mi.arg=new TypeError("The iterator does not provide a '"+Pi+"' method")),da;var ko=ui(Wa,Ui.iterator,mi.arg);if(ko.type==="throw")return mi.method="throw",mi.arg=ko.arg,mi.delegate=null,da;var Mo=ko.arg;return Mo?Mo.done?(mi[Ui.resultName]=Mo.value,mi.next=Ui.nextLoc,mi.method!=="return"&&(mi.method="next",mi.arg=void 0),mi.delegate=null,da):Mo:(mi.method="throw",mi.arg=new TypeError("iterator result is not an object"),mi.delegate=null,da)}function Fu(Ui){var mi={tryLoc:Ui[0]};1 in Ui&&(mi.catchLoc=Ui[1]),2 in Ui&&(mi.finallyLoc=Ui[2],mi.afterLoc=Ui[3]),this.tryEntries.push(mi)}function il(Ui){var mi=Ui.completion||{};mi.type="normal",delete mi.arg,Ui.completion=mi}function Su(Ui){this.tryEntries=[{tryLoc:"root"}],Ui.forEach(Fu,this),this.reset(!0)}function zu(Ui){if(Ui){var mi=Ui[Yt];if(mi)return mi.call(Ui);if(typeof Ui.next=="function")return Ui;if(!isNaN(Ui.length)){var Pi=-1,Wa=function ko(){for(;++Pi<Ui.length;)if(C.call(Ui,Pi))return ko.value=Ui[Pi],ko.done=!1,ko;return ko.value=void 0,ko.done=!0,ko};return Wa.next=Wa}}return{next:uc}}function uc(){return{value:void 0,done:!0}}return Xo.prototype=Fo,he(us,"constructor",{value:Fo,configurable:!0}),he(Fo,"constructor",{value:Xo,configurable:!0}),Xo.displayName=Gr(Fo,Sr,"GeneratorFunction"),h.isGeneratorFunction=function(Ui){var mi=typeof Ui=="function"&&Ui.constructor;return!!mi&&(mi===Xo||(mi.displayName||mi.name)==="GeneratorFunction")},h.mark=function(Ui){return Object.setPrototypeOf?Object.setPrototypeOf(Ui,Fo):(Ui.__proto__=Fo,Gr(Ui,Sr,"GeneratorFunction")),Ui.prototype=Object.create(us),Ui},h.awrap=function(Ui){return{__await:Ui}},Eu(Nu.prototype),Gr(Nu.prototype,gr,function(){return this}),h.AsyncIterator=Nu,h.async=function(Ui,mi,Pi,Wa,ko){ko===void 0&&(ko=Promise);var Mo=new Nu(Bn(Ui,mi,Pi,Wa),ko);return h.isGeneratorFunction(mi)?Mo:Mo.next().then(function(Xu){return Xu.done?Xu.value:Mo.next()})},Eu(us),Gr(us,Sr,"Generator"),Gr(us,Yt,function(){return this}),Gr(us,"toString",function(){return"[object Generator]"}),h.keys=function(Ui){var mi=Object(Ui),Pi=[];for(var Wa in mi)Pi.push(Wa);return Pi.reverse(),function ko(){for(;Pi.length;){var Mo=Pi.pop();if(Mo in mi)return ko.value=Mo,ko.done=!1,ko}return ko.done=!0,ko}},h.values=zu,Su.prototype={constructor:Su,reset:function(mi){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(il),!mi)for(var Pi in this)Pi.charAt(0)==="t"&&C.call(this,Pi)&&!isNaN(+Pi.slice(1))&&(this[Pi]=void 0)},stop:function(){this.done=!0;var mi=this.tryEntries[0].completion;if(mi.type==="throw")throw mi.arg;return this.rval},dispatchException:function(mi){if(this.done)throw mi;var Pi=this;function Wa(Md,zh){return Xu.type="throw",Xu.arg=mi,Pi.next=Md,zh&&(Pi.method="next",Pi.arg=void 0),!!zh}for(var ko=this.tryEntries.length-1;ko>=0;--ko){var Mo=this.tryEntries[ko],Xu=Mo.completion;if(Mo.tryLoc==="root")return Wa("end");if(Mo.tryLoc<=this.prev){var gc=C.call(Mo,"catchLoc"),uf=C.call(Mo,"finallyLoc");if(gc&&uf){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0);if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}else if(gc){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0)}else{if(!uf)throw new Error("try statement without catch or finally");if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}}}},abrupt:function(mi,Pi){for(var Wa=this.tryEntries.length-1;Wa>=0;--Wa){var ko=this.tryEntries[Wa];if(ko.tryLoc<=this.prev&&C.call(ko,"finallyLoc")&&this.prev<ko.finallyLoc){var Mo=ko;break}}Mo&&(mi==="break"||mi==="continue")&&Mo.tryLoc<=Pi&&Pi<=Mo.finallyLoc&&(Mo=null);var Xu=Mo?Mo.completion:{};return Xu.type=mi,Xu.arg=Pi,Mo?(this.method="next",this.next=Mo.finallyLoc,da):this.complete(Xu)},complete:function(mi,Pi){if(mi.type==="throw")throw mi.arg;return mi.type==="break"||mi.type==="continue"?this.next=mi.arg:mi.type==="return"?(this.rval=this.arg=mi.arg,this.method="return",this.next="end"):mi.type==="normal"&&Pi&&(this.next=Pi),da},finish:function(mi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.finallyLoc===mi)return this.complete(Wa.completion,Wa.afterLoc),il(Wa),da}},catch:function(mi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.tryLoc===mi){var ko=Wa.completion;if(ko.type==="throw"){var Mo=ko.arg;il(Wa)}return Mo}}throw new Error("illegal catch attempt")},delegateYield:function(mi,Pi,Wa){return this.delegate={iterator:zu(mi),resultName:Pi,nextLoc:Wa},this.method==="next"&&(this.arg=void 0),da}},h}function qi(h,x,C,he,yt,Yt,gr){try{var Sr=h[Yt](gr),Gr=Sr.value}catch(Bn){C(Bn);return}Sr.done?x(Gr):Promise.resolve(Gr).then(he,yt)}function Pr(h){return function(){var x=this,C=arguments;return new Promise(function(he,yt){var Yt=h.apply(x,C);function gr(Gr){qi(Yt,he,yt,gr,Sr,"next",Gr)}function Sr(Gr){qi(Yt,he,yt,gr,Sr,"throw",Gr)}gr(void 0)})}}var Cn=function(){var h=Pr(Ei().mark(function x(C,he){return Ei().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:if(C!=="Map"){Yt.next=2;break}return Yt.abrupt("return",new v.Map(he));case 2:if(C!=="Gaode"){Yt.next=6;break}return Yt.abrupt("return",new v.GaodeMap(he));case 6:if(C!=="GaodeV1"){Yt.next=10;break}return Yt.abrupt("return",new v.GaodeMapV1(he));case 10:if(C!=="GaodeV2"){Yt.next=12;break}return Yt.abrupt("return",new v.GaodeMapV2(he));case 12:return Yt.abrupt("return",Promise.resolve(Promise.resolve().then(g.bind(g,70844))).then(function(gr){var Sr=gr.Mapbox;return new Sr(he)}));case 13:case"end":return Yt.stop()}},x)}));return function(C,he){return h.apply(this,arguments)}}();const ln=(h,x)=>h?h.map((C,he)=>Object.is(h[he],x==null?void 0:x[he])?-1:he).filter(C=>C>=0):x?x.map((C,he)=>he):[];var Kn=(h,x)=>{const C=(0,M.useRef)();(0,M.useEffect)(()=>{const he=ln(C.current,x),yt=C.current;return C.current=x,h(he,yt,x)},x)};function bi(h){const x=(0,M.useRef)(h);return x.current=h,x}var Yi=bi;const Gi=h=>h!==null&&typeof h=="object",aa=h=>typeof h=="function",Ta=h=>typeof h=="string",R=h=>typeof h=="boolean",_e=h=>typeof h=="number",At=h=>typeof h=="undefined";var nr=!1,Wr=h=>{nr&&(aa(h)||console.error(`useUnmount expected parameter is a function, got ${typeof h}`));const x=Yi(h);(0,M.useEffect)(()=>()=>{x.current()},[])},In={onLoaded:"loaded",onDestroy:"destroy",onResize:"resize",onMapMove:"mapmove",onMoveStart:"movestart",onMoveEnd:"moveend",onZoomChange:"zoomchange",onZoomStart:"zoomstart",onZoomEnd:"zoomend",onClick:"click",onDblclick:"dblclick",onContextMenu:"contextmenu",onMouseMove:"mousemove",onMouseWheel:"mousewheel",onMouseDown:"mousedown",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseUp:"mouseup",onDragStart:"dragstart",onDragging:"dragging",onDragEnd:"dragend"},Dn=Object.keys(In);function Mi(h){return Sa(h)||co(h)||io(h)||Bi()}function Bi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function io(h,x){if(h){if(typeof h=="string")return Ko(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ko(h,x)}}function co(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function Sa(h){if(Array.isArray(h))return Ko(h)}function Ko(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}var Co=function(x,C){Kn(function(he){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(x){var gr=he.filter(function(Sr){return!!Sr}).map(function(Sr){return Sr-1});he.includes(0)&&(gr=Dn.map(function(Sr,Gr){return Gr})),gr.forEach(function(Sr){var Gr=In[Dn[Sr]],Bn=yt[Sr+1],ui=Yt[Sr+1];Bn&&x.off(Gr,Bn),ui&&x.on(Gr,ui)})}},[x].concat(Mi(Dn.map(function(he){return C[he]})))),Wr(function(){x&&Dn.forEach(function(he){var yt=In[he],Yt=C[he];yt&&Yt&&x.off(yt,Yt)})})};function Oo(h){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Oo(h)}var Ho=["id","style","className","map","mapType","mapOptions","onLayerManagerCreated","onSceneLoaded","children"];function Io(h,x){var C=Object.keys(h);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(h);x&&(he=he.filter(function(yt){return Object.getOwnPropertyDescriptor(h,yt).enumerable})),C.push.apply(C,he)}return C}function Js(h){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?Io(Object(C),!0).forEach(function(he){Il(h,he,C[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(C)):Io(Object(C)).forEach(function(he){Object.defineProperty(h,he,Object.getOwnPropertyDescriptor(C,he))})}return h}function Il(h,x,C){return x=Ao(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function Ao(h){var x=Va(h,"string");return Oo(x)==="symbol"?x:String(x)}function Va(h,x){if(Oo(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(Oo(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function gs(h,x){return gl(h)||Xs(h,x)||bs(h,x)||Ws()}function Ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(h,x){if(h){if(typeof h=="string")return Ps(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ps(h,x)}}function Ps(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Xs(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function gl(h){if(Array.isArray(h))return h}function jf(h,x){if(h==null)return{};var C=Mu(h,x),he,yt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(yt=0;yt<Yt.length;yt++)he=Yt[yt],!(x.indexOf(he)>=0)&&Object.prototype.propertyIsEnumerable.call(h,he)&&(C[he]=h[he])}return C}function Mu(h,x){if(h==null)return{};var C={},he=Object.keys(h),yt,Yt;for(Yt=0;Yt<he.length;Yt++)yt=he[Yt],!(x.indexOf(yt)>=0)&&(C[yt]=h[yt]);return C}var yl=M.createContext(null),lc=(0,M.memo)((0,M.forwardRef)(function(x,C){var he=x.id,yt=x.style,Yt=x.className,gr=x.map,Sr=x.mapType,Gr=Sr===void 0?"Gaode":Sr,Bn=x.mapOptions,ui=Bn===void 0?{}:Bn,da=x.onLayerManagerCreated,ro=x.onSceneLoaded,Xo=x.children,Fo=jf(x,Ho),ho=(0,M.useRef)(),ns=(0,M.useState)(null),vs=gs(ns,2),us=vs[0],Eu=vs[1],Nu=(0,M.useRef)({scene:null,layerManager:null}),ul=Nu.current;(0,M.useEffect)(function(){var Fu,il=!0;return Promise.resolve(gr||Cn(Gr,ui)).then(function(Su){if(il){Fu=new v.Scene(Js(Js({},Fo),{},{id:ho.current,map:Su}));var zu=new X({scene:Fu});ul.scene=Fu,ul.layerManager=zu,Fu.once("loaded",function(){ro&&ro(Fu),da&&da(zu),Eu(Fu)})}}).catch(function(Su){console.error(Su)}),function(){il=!1,Fu&&(ul.scene=null,ul.layerManager=null,Fu.destroy())}},[]),Co(us,x),(0,M.useImperativeHandle)(C,function(){return{getScene:function(){return us},getMap:function(){return us.map}}},[us]),(0,M.useEffect)(function(){us&&ui.style&&us.setMapStyle(ui.style)},[ui.style]),(0,M.useEffect)(function(){us&&Pe(ui.zoom)&&us.setZoom(ui.zoom)},[ui.zoom]),B(function(){us&&ui.center&&us.setCenter(ui.center)},[ui.center]),(0,M.useEffect)(function(){us&&Pe(ui.pitch)&&us.setPitch(ui.pitch)},[ui.pitch]),(0,M.useEffect)(function(){us&&Pe(ui.rotation)&&us.setRotation(ui.rotation)},[ui.rotation]);var sf=(0,M.useMemo)(function(){return Js({position:"relative"},yt)},[yt]);return M.createElement("div",{id:he,ref:ho,style:sf,className:$()("larkmap",Yt)},us&&M.createElement(yl.Provider,{value:ul},Xo))}));const Lc=h=>(x,C)=>{const he=(0,M.useRef)(!1);h(()=>()=>{he.current=!1},[]),h(()=>{if(!he.current)he.current=!0;else return x()},C)};var dh=null,_l=Lc(M.useEffect),Us=function(){var x=(0,M.useContext)(yl);if(!x)throw new Error("The useScene must be used in the LarkMap container");var C=x.scene;return C},th=function(x,C,he){var yt=Us(),Yt=(0,M.useRef)();(0,M.useEffect)(function(){var gr=new v.Control(he);return gr.onAdd=function(){return x(yt)},gr.onRemove=function(){},Yt.current=gr,yt.addControl(gr),function(){typeof C=="function"&&C(yt),Yt.current=null,yt.removeControl(gr)}},[]),_l(function(){var gr;(gr=Yt.current)===null||gr===void 0||gr.setOptions(he)},[he])},Df=function(){var x=(0,M.useContext)(yl);if(!x)throw new Error("The useLayerManager must be used in the LarkMap container");var C=x.layerManager;return C};function Cf(h,x){return Eh(h)||yc(h,x)||gd(h,x)||lf()}function lf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gd(h,x){if(h){if(typeof h=="string")return Kh(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Kh(h,x)}}function Kh(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function yc(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Eh(h){if(Array.isArray(h))return h}var cf=function(x){var C=useLayerManager(),he=useState(C.getLayer(x)),yt=Cf(he,2),Yt=yt[0],gr=yt[1];return useEffect(function(){var Sr=function(da){x===da.id&&gr(da)},Gr=function(da){x===da&&gr(void 0)},Bn=C.getLayer(x);return Bn?gr(Bn):(C.on("add",Sr),C.on("remove",Gr)),function(){Bn===void 0&&(C.off("add",Sr),C.off("remove",Gr))}},[x]),Yt};function Af(h,x){return Dc(h)||Zl(h,x)||kc(h,x)||_f()}function _f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kc(h,x){if(h){if(typeof h=="string")return Ff(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ff(h,x)}}function Ff(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Zl(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Dc(h){if(Array.isArray(h))return h}var ad=function(){var x=Df(),C=(0,M.useState)((x==null?void 0:x.getLayers())||[]),he=Af(C,2),yt=he[0],Yt=he[1];return(0,M.useEffect)(function(){if(x){var gr=function(){Yt(x.getLayers())};return x.on("add",gr),x.on("remove",gr),function(){x.off("add",gr),x.off("remove",gr)}}},[x]),yt};function rh(){this.__data__=[],this.size=0}var od=rh;function Yo(h,x){return h===x||h!==h&&x!==x}var Gs=Yo;function Kl(h,x){for(var C=h.length;C--;)if(Gs(h[C][0],x))return C;return-1}var dl=Kl,su=Array.prototype,Fc=su.splice;function tc(h){var x=this.__data__,C=dl(x,h);if(C<0)return!1;var he=x.length-1;return C==he?x.pop():Fc.call(x,C,1),--this.size,!0}var Tf=tc;function _c(h){var x=this.__data__,C=dl(x,h);return C<0?void 0:x[C][1]}var Hl=_c;function ff(h){return dl(this.__data__,h)>-1}var xc=ff;function Yh(h,x){var C=this.__data__,he=dl(C,h);return he<0?(++this.size,C.push([h,x])):C[he][1]=x,this}var Uh=Yh;function Gc(h){var x=-1,C=h==null?0:h.length;for(this.clear();++x<C;){var he=h[x];this.set(he[0],he[1])}}Gc.prototype.clear=od,Gc.prototype.delete=Tf,Gc.prototype.get=Hl,Gc.prototype.has=xc,Gc.prototype.set=Uh;var Mf=Gc;function nh(){this.__data__=new Mf,this.size=0}var qn=nh;function ca(h){var x=this.__data__,C=x.delete(h);return this.size=x.size,C}var $i=ca;function $o(h){return this.__data__.get(h)}var lo=$o;function Es(h){return this.__data__.has(h)}var tl=Es;function al(h){var x=typeof h;return h!=null&&(x=="object"||x=="function")}var Tl=al,Lh="[object AsyncFunction]",xf="[object Function]",qh="[object GeneratorFunction]",$h="[object Proxy]";function Ul(h){if(!Tl(h))return!1;var x=J(h);return x==xf||x==qh||x==Lh||x==$h}var Rl=Ul,ol=Le["__core-js_shared__"],uu=ol,Bc=function(){var h=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}();function cc(h){return!!Bc&&Bc in h}var ao=cc,Ml=Function.prototype,Hf=Ml.toString;function fl(h){if(h!=null){try{return Hf.call(h)}catch(x){}try{return h+""}catch(x){}}return""}var Vl=fl,Ll=/[\\^$.*+?()[\]{}|]/g,jh=/^\[object .+?Constructor\]$/,qa=Function.prototype,Yl=Object.prototype,Vf=qa.toString,ih=Yl.hasOwnProperty,Vu=RegExp("^"+Vf.call(ih).replace(Ll,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hf(h){if(!Tl(h)||ao(h))return!1;var x=Rl(h)?Vu:jh;return x.test(Vl(h))}var Hh=hf;function bc(h,x){return h==null?void 0:h[x]}var Ec=bc;function ah(h,x){var C=Ec(h,x);return Hh(C)?C:void 0}var Wc=ah,kh=Wc(Le,"Map"),Sc=kh,Vh=Wc(Object,"create"),ql=Vh;function gu(){this.__data__=ql?ql(null):{},this.size=0}var Ks=gu;function Gf(h){var x=this.has(h)&&delete this.__data__[h];return this.size-=x?1:0,x}var Bf=Gf,eu="__lodash_hash_undefined__",Pl=Object.prototype,Xc=Pl.hasOwnProperty;function Nc(h){var x=this.__data__;if(ql){var C=x[h];return C===eu?void 0:C}return Xc.call(x,h)?x[h]:void 0}var Ql=Nc,fc=Object.prototype,oo=fc.hasOwnProperty;function Do(h){var x=this.__data__;return ql?x[h]!==void 0:oo.call(x,h)}var nu=Do,Jl="__lodash_hash_undefined__";function xl(h,x){var C=this.__data__;return this.size+=this.has(h)?0:1,C[h]=ql&&x===void 0?Jl:x,this}var mu=xl;function Ku(h){var x=-1,C=h==null?0:h.length;for(this.clear();++x<C;){var he=h[x];this.set(he[0],he[1])}}Ku.prototype.clear=Ks,Ku.prototype.delete=Bf,Ku.prototype.get=Ql,Ku.prototype.has=nu,Ku.prototype.set=mu;var Kc=Ku;function Gh(){this.size=0,this.__data__={hash:new Kc,map:new(Sc||Mf),string:new Kc}}var Yu=Gh;function bl(h){var x=typeof h;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?h!=="__proto__":h===null}var yd=bl;function ph(h,x){var C=h.__data__;return yd(x)?C[typeof x=="string"?"string":"hash"]:C.map}var wc=ph;function Yc(h){var x=wc(this,h).delete(h);return this.size-=x?1:0,x}var kl=Yc;function Dr(h){return wc(this,h).get(h)}var Dl=Dr;function Vo(h){return wc(this,h).has(h)}var qo=Vo;function du(h,x){var C=wc(this,h),he=C.size;return C.set(h,x),this.size+=C.size==he?0:1,this}var Dh=du;function Wf(h){var x=-1,C=h==null?0:h.length;for(this.clear();++x<C;){var he=h[x];this.set(he[0],he[1])}}Wf.prototype.clear=Yu,Wf.prototype.delete=kl,Wf.prototype.get=Dl,Wf.prototype.has=qo,Wf.prototype.set=Dh;var zc=Wf,df=200;function rc(h,x){var C=this.__data__;if(C instanceof Mf){var he=C.__data__;if(!Sc||he.length<df-1)return he.push([h,x]),this.size=++C.size,this;C=this.__data__=new zc(he)}return C.set(h,x),this.size=C.size,this}var ys=rc;function bf(h){var x=this.__data__=new Mf(h);this.size=x.size}bf.prototype.clear=qn,bf.prototype.delete=$i,bf.prototype.get=lo,bf.prototype.has=tl,bf.prototype.set=ys;var Xf=bf,rl="__lodash_hash_undefined__";function Cc(h){return this.__data__.set(h,rl),this}var Zc=Cc;function sd(h){return this.__data__.has(h)}var qc=sd;function f(h){var x=-1,C=h==null?0:h.length;for(this.__data__=new zc;++x<C;)this.add(h[x])}f.prototype.add=f.prototype.push=Zc,f.prototype.has=qc;var m=f;function p(h,x){for(var C=-1,he=h==null?0:h.length;++C<he;)if(x(h[C],C,h))return!0;return!1}var E=p;function Y(h,x){return h.has(x)}var Ce=Y,ze=1,gt=2;function Gt(h,x,C,he,yt,Yt){var gr=C&ze,Sr=h.length,Gr=x.length;if(Sr!=Gr&&!(gr&&Gr>Sr))return!1;var Bn=Yt.get(h),ui=Yt.get(x);if(Bn&&ui)return Bn==x&&ui==h;var da=-1,ro=!0,Xo=C&gt?new m:void 0;for(Yt.set(h,x),Yt.set(x,h);++da<Sr;){var Fo=h[da],ho=x[da];if(he)var ns=gr?he(ho,Fo,da,x,h,Yt):he(Fo,ho,da,h,x,Yt);if(ns!==void 0){if(ns)continue;ro=!1;break}if(Xo){if(!E(x,function(vs,us){if(!Ce(Xo,us)&&(Fo===vs||yt(Fo,vs,C,he,Yt)))return Xo.push(us)})){ro=!1;break}}else if(!(Fo===ho||yt(Fo,ho,C,he,Yt))){ro=!1;break}}return Yt.delete(h),Yt.delete(x),ro}var sr=Gt,Mr=Le.Uint8Array,Or=Mr;function Br(h){var x=-1,C=Array(h.size);return h.forEach(function(he,yt){C[++x]=[yt,he]}),C}var yn=Br;function hn(h){var x=-1,C=Array(h.size);return h.forEach(function(he){C[++x]=he}),C}var kn=hn,an=1,Rn=2,$n="[object Boolean]",di="[object Date]",Di="[object Error]",Ti="[object Map]",Fi="[object Number]",ra="[object RegExp]",Da="[object Set]",Na="[object String]",po="[object Symbol]",No="[object ArrayBuffer]",is="[object DataView]",rs=et?et.prototype:void 0,Ls=rs?rs.valueOf:void 0;function vo(h,x,C,he,yt,Yt,gr){switch(C){case is:if(h.byteLength!=x.byteLength||h.byteOffset!=x.byteOffset)return!1;h=h.buffer,x=x.buffer;case No:return!(h.byteLength!=x.byteLength||!Yt(new Or(h),new Or(x)));case $n:case di:case Fi:return Gs(+h,+x);case Di:return h.name==x.name&&h.message==x.message;case ra:case Na:return h==x+"";case Ti:var Sr=yn;case Da:var Gr=he&an;if(Sr||(Sr=kn),h.size!=x.size&&!Gr)return!1;var Bn=gr.get(h);if(Bn)return Bn==x;he|=Rn,gr.set(h,x);var ui=sr(Sr(h),Sr(x),he,yt,Yt,gr);return gr.delete(h),ui;case po:if(Ls)return Ls.call(h)==Ls.call(x)}return!1}var ds=vo;function Ns(h,x){for(var C=-1,he=x.length,yt=h.length;++C<he;)h[yt+C]=x[C];return h}var cs=Ns;function Qo(h,x,C){var he=x(h);return Er(h)?he:cs(he,C(h))}var $s=Qo;function Cs(h,x){for(var C=-1,he=h==null?0:h.length,yt=0,Yt=[];++C<he;){var gr=h[C];x(gr,C,h)&&(Yt[yt++]=gr)}return Yt}var _s=Cs;function El(){return[]}var nl=El,qu=Object.prototype,Ac=qu.propertyIsEnumerable,Qu=Object.getOwnPropertySymbols,Ju=Qu?function(h){return h==null?[]:(h=Object(h),_s(Qu(h),function(x){return Ac.call(h,x)}))}:nl,Tc=Ju;function ec(h,x){for(var C=-1,he=Array(h);++C<h;)he[C]=x(C);return he}var Pf=ec,Ef="[object Arguments]";function $l(h){return ne(h)&&J(h)==Ef}var Uc=$l,Qh=Object.prototype,Jh=Qh.hasOwnProperty,Sh=Qh.propertyIsEnumerable,Of=Uc(function(){return arguments}())?Uc:function(h){return ne(h)&&Jh.call(h,"callee")&&!Sh.call(h,"callee")},wh=Of;function pf(){return!1}var oh=pf,Qc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nc=Qc&&typeof module=="object"&&module&&!module.nodeType&&module,ic=nc&&nc.exports===Qc,Ch=ic?Le.Buffer:void 0,Fh=Ch?Ch.isBuffer:void 0,ku=Fh||oh,yu=ku,Jc=9007199254740991,sh=/^(?:0|[1-9]\d*)$/;function vh(h,x){var C=typeof h;return x=x==null?Jc:x,!!x&&(C=="number"||C!="symbol"&&sh.test(h))&&h>-1&&h%1==0&&h<x}var Nf=vh,mh=9007199254740991;function If(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=mh}var Rf=If,vf="[object Arguments]",ue="[object Array]",Rr="[object Boolean]",Mt="[object Date]",St="[object Error]",Vt="[object Function]",ar="[object Map]",Xr="[object Number]",vn="[object Object]",Sn="[object RegExp]",Fn="[object Set]",Ci="[object String]",Hi="[object WeakMap]",ba="[object ArrayBuffer]",mo="[object DataView]",Qa="[object Float32Array]",ks="[object Float64Array]",Ts="[object Int8Array]",lu="[object Int16Array]",Iu="[object Int32Array]",_u="[object Uint8Array]",Mc="[object Uint8ClampedArray]",tu="[object Uint16Array]",Fl="[object Uint32Array]",Ys={};Ys[Qa]=Ys[ks]=Ys[Ts]=Ys[lu]=Ys[Iu]=Ys[_u]=Ys[Mc]=Ys[tu]=Ys[Fl]=!0,Ys[vf]=Ys[ue]=Ys[ba]=Ys[Rr]=Ys[mo]=Ys[Mt]=Ys[St]=Ys[Vt]=Ys[ar]=Ys[Xr]=Ys[vn]=Ys[Sn]=Ys[Fn]=Ys[Ci]=Ys[Hi]=!1;function Du(h){return ne(h)&&Rf(h.length)&&!!Ys[J(h)]}var Bu=Du;function Gl(h){return function(x){return h(x)}}var ru=Gl,pl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ef=pl&&typeof module=="object"&&module&&!module.nodeType&&module,Bh=ef&&ef.exports===pl,hc=Bh&&ke.process,uh=function(){try{var h=ef&&ef.require&&ef.require("util").types;return h||hc&&hc.binding&&hc.binding("util")}catch(x){}}(),Kf=uh,gh=Kf&&Kf.isTypedArray,yh=gh?ru(gh):Bu,Yf=yh,dc=Object.prototype,oe=dc.hasOwnProperty;function Fe(h,x){var C=Er(h),he=!C&&wh(h),yt=!C&&!he&&yu(h),Yt=!C&&!he&&!yt&&Yf(h),gr=C||he||yt||Yt,Sr=gr?Pf(h.length,String):[],Gr=Sr.length;for(var Bn in h)(x||oe.call(h,Bn))&&!(gr&&(Bn=="length"||yt&&(Bn=="offset"||Bn=="parent")||Yt&&(Bn=="buffer"||Bn=="byteLength"||Bn=="byteOffset")||Nf(Bn,Gr)))&&Sr.push(Bn);return Sr}var Ze=Fe,rt=Object.prototype;function xt(h){var x=h&&h.constructor,C=typeof x=="function"&&x.prototype||rt;return h===C}var Dt=xt;function $r(h,x){return function(C){return h(x(C))}}var En=$r,pi=En(Object.keys,Object),rn=pi,_i=Object.prototype,ga=_i.hasOwnProperty;function ss(h){if(!Dt(h))return rn(h);var x=[];for(var C in Object(h))ga.call(h,C)&&C!="constructor"&&x.push(C);return x}var To=ss;function Ro(h){return h!=null&&Rf(h.length)&&!Rl(h)}var fs=Ro;function ps(h){return fs(h)?Ze(h):To(h)}var zo=ps;function Ds(h){return $s(h,zo,Tc)}var xu=Ds,cu=1,tf=Object.prototype,$c=tf.hasOwnProperty;function ac(h,x,C,he,yt,Yt){var gr=C&cu,Sr=xu(h),Gr=Sr.length,Bn=xu(x),ui=Bn.length;if(Gr!=ui&&!gr)return!1;for(var da=Gr;da--;){var ro=Sr[da];if(!(gr?ro in x:$c.call(x,ro)))return!1}var Xo=Yt.get(h),Fo=Yt.get(x);if(Xo&&Fo)return Xo==x&&Fo==h;var ho=!0;Yt.set(h,x),Yt.set(x,h);for(var ns=gr;++da<Gr;){ro=Sr[da];var vs=h[ro],us=x[ro];if(he)var Eu=gr?he(us,vs,ro,x,h,Yt):he(vs,us,ro,h,x,Yt);if(!(Eu===void 0?vs===us||yt(vs,us,C,he,Yt):Eu)){ho=!1;break}ns||(ns=ro=="constructor")}if(ho&&!ns){var Nu=h.constructor,ul=x.constructor;Nu!=ul&&"constructor"in h&&"constructor"in x&&!(typeof Nu=="function"&&Nu instanceof Nu&&typeof ul=="function"&&ul instanceof ul)&&(ho=!1)}return Yt.delete(h),Yt.delete(x),ho}var ll=ac,wu=Wc(Le,"DataView"),Sl=wu,Wl=Wc(Le,"Promise"),Pc=Wl,jc=Wc(Le,"Set"),hu=jc,_h=Wc(Le,"WeakMap"),Oc=_h,ud="[object Map]",Hd="[object Object]",Zu="[object Promise]",Sd="[object Set]",Hc="[object WeakMap]",Nh="[object DataView]",up=Vl(Sl),_d=Vl(Sc),pp=Vl(Pc),vp=Vl(hu),mp=Vl(Oc),wd=J;(Sl&&wd(new Sl(new ArrayBuffer(1)))!=Nh||Sc&&wd(new Sc)!=ud||Pc&&wd(Pc.resolve())!=Zu||hu&&wd(new hu)!=Sd||Oc&&wd(new Oc)!=Hc)&&(wd=function(h){var x=J(h),C=x==Hd?h.constructor:void 0,he=C?Vl(C):"";if(he)switch(he){case up:return Nh;case _d:return ud;case pp:return Zu;case vp:return Sd;case mp:return Hc}return x});var ld=wd,gp=1,Ah="[object Arguments]",kd="[object Array]",xd="[object Object]",Cd=Object.prototype,vl=Cd.hasOwnProperty;function Dd(h,x,C,he,yt,Yt){var gr=Er(h),Sr=Er(x),Gr=gr?kd:ld(h),Bn=Sr?kd:ld(x);Gr=Gr==Ah?xd:Gr,Bn=Bn==Ah?xd:Bn;var ui=Gr==xd,da=Bn==xd,ro=Gr==Bn;if(ro&&yu(h)){if(!yu(x))return!1;gr=!0,ui=!1}if(ro&&!ui)return Yt||(Yt=new Xf),gr||Yf(h)?sr(h,x,C,he,yt,Yt):ds(h,x,Gr,C,he,yt,Yt);if(!(C&gp)){var Xo=ui&&vl.call(h,"__wrapped__"),Fo=da&&vl.call(x,"__wrapped__");if(Xo||Fo){var ho=Xo?h.value():h,ns=Fo?x.value():x;return Yt||(Yt=new Xf),yt(ho,ns,C,he,Yt)}}return ro?(Yt||(Yt=new Xf),ll(h,x,C,he,yt,Yt)):!1}var Fs=Dd;function cd(h,x,C,he,yt){return h===x?!0:h==null||x==null||!ne(h)&&!ne(x)?h!==h&&x!==x:Fs(h,x,C,he,cd,yt)}var Vd=cd;function Gd(h,x){return Vd(h,x)}var Ht=Gd;function Zr(h,x){for(var C=-1,he=h==null?0:h.length;++C<he&&x(h[C],C,h)!==!1;);return h}var On=Zr,wi=function(){try{var h=Wc(Object,"defineProperty");return h({},"",{}),h}catch(x){}}(),ia=wi;function Ai(h,x,C){x=="__proto__"&&ia?ia(h,x,{configurable:!0,enumerable:!0,value:C,writable:!0}):h[x]=C}var ji=Ai,Ea=Object.prototype,Ma=Ea.hasOwnProperty;function Ia(h,x,C){var he=h[x];(!(Ma.call(h,x)&&Gs(he,C))||C===void 0&&!(x in h))&&ji(h,x,C)}var Za=Ia;function Ha(h,x,C,he){var yt=!C;C||(C={});for(var Yt=-1,gr=x.length;++Yt<gr;){var Sr=x[Yt],Gr=he?he(C[Sr],h[Sr],Sr,C,h):void 0;Gr===void 0&&(Gr=h[Sr]),yt?ji(C,Sr,Gr):Za(C,Sr,Gr)}return C}var $a=Ha;function ya(h,x){return h&&$a(x,zo(x),h)}var Ua=ya;function si(h){var x=[];if(h!=null)for(var C in Object(h))x.push(C);return x}var Ni=si,Ra=Object.prototype,Ya=Ra.hasOwnProperty;function _a(h){if(!Tl(h))return Ni(h);var x=Dt(h),C=[];for(var he in h)he=="constructor"&&(x||!Ya.call(h,he))||C.push(he);return C}var Ga=_a;function xo(h){return fs(h)?Ze(h,!0):Ga(h)}var xs=xo;function Qi(h,x){return h&&$a(x,xs(x),h)}var oa=Qi,Zo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fo=Zo&&typeof module=="object"&&module&&!module.nodeType&&module,Pa=fo&&fo.exports===Zo,to=Pa?Le.Buffer:void 0,Oa=to?to.allocUnsafe:void 0;function Os(h,x){if(x)return h.slice();var C=h.length,he=Oa?Oa(C):new h.constructor(C);return h.copy(he),he}var Bs=Os;function so(h,x){var C=-1,he=h.length;for(x||(x=Array(he));++C<he;)x[C]=h[C];return x}var yo=so;function hs(h,x){return $a(h,Tc(h),x)}var zs=hs,Cu=En(Object.getPrototypeOf,Object),Gu=Cu,Bl=Object.getOwnPropertySymbols,Au=Bl?function(h){for(var x=[];h;)cs(x,Tc(h)),h=Gu(h);return x}:nl,Sf=Au;function Xl(h,x){return $a(h,Sf(h),x)}var Ic=Xl;function wl(h){return $s(h,xs,Sf)}var rf=wl,mf=Object.prototype,lh=mf.hasOwnProperty;function pc(h){var x=h.length,C=new h.constructor(x);return x&&typeof h[0]=="string"&&lh.call(h,"index")&&(C.index=h.index,C.input=h.input),C}var fu=pc;function wf(h){var x=new h.constructor(h.byteLength);return new Or(x).set(new Or(h)),x}var Uu=wf;function qf(h,x){var C=x?Uu(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.byteLength)}var js=qf,Pu=/\w*$/;function Ru(h){var x=new h.constructor(h.source,Pu.exec(h));return x.lastIndex=h.lastIndex,x}var nf=Ru,pd=et?et.prototype:void 0,w=pd?pd.valueOf:void 0;function V(h){return w?Object(w.call(h)):{}}var Ie=V;function se(h,x){var C=x?Uu(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.length)}var st=se,Ue="[object Boolean]",Xe="[object Date]",Ve="[object Map]",ct="[object Number]",Ct="[object RegExp]",Bt="[object Set]",kt="[object String]",Jt="[object Symbol]",Ft="[object ArrayBuffer]",rr="[object DataView]",Xt="[object Float32Array]",pr="[object Float64Array]",yr="[object Int8Array]",Ur="[object Int16Array]",xn="[object Int32Array]",mn="[object Uint8Array]",Mn="[object Uint8ClampedArray]",Pn="[object Uint16Array]",Gn="[object Uint32Array]";function ti(h,x,C){var he=h.constructor;switch(x){case Ft:return Uu(h);case Ue:case Xe:return new he(+h);case rr:return js(h,C);case Xt:case pr:case yr:case Ur:case xn:case mn:case Mn:case Pn:case Gn:return st(h,C);case Ve:return new he;case ct:case kt:return new he(h);case Ct:return nf(h);case Bt:return new he;case Jt:return Ie(h)}}var ii=ti,b=Object.create,A=function(){function h(){}return function(x){if(!Tl(x))return{};if(b)return b(x);h.prototype=x;var C=new h;return h.prototype=void 0,C}}(),I=A;function T(h){return typeof h.constructor=="function"&&!Dt(h)?I(Gu(h)):{}}var H=T,te="[object Map]";function Ae(h){return ne(h)&&ld(h)==te}var qe=Ae,Tt=Kf&&Kf.isMap,Wt=Tt?ru(Tt):qe,vr=Wt,Fr="[object Set]";function en(h){return ne(h)&&ld(h)==Fr}var zn=en,ei=Kf&&Kf.isSet,Qn=ei?ru(ei):zn,_n=Qn,Xn=1,ai=2,nn=4,hi="[object Arguments]",vi="[object Array]",Li="[object Boolean]",Vi="[object Date]",sa="[object Error]",ua="[object Function]",Lo="[object GeneratorFunction]",Fa="[object Map]",go="[object Number]",qs="[object Object]",e="[object RegExp]",i="[object Set]",l="[object String]",y="[object Symbol]",P="[object WeakMap]",j="[object ArrayBuffer]",Q="[object DataView]",we="[object Float32Array]",ut="[object Float64Array]",Nt="[object Int8Array]",Ut="[object Int16Array]",qt="[object Int32Array]",lr="[object Uint8Array]",xr="[object Uint8ClampedArray]",Kr="[object Uint16Array]",qr="[object Uint32Array]",dn={};dn[hi]=dn[vi]=dn[j]=dn[Q]=dn[Li]=dn[Vi]=dn[we]=dn[ut]=dn[Nt]=dn[Ut]=dn[qt]=dn[Fa]=dn[go]=dn[qs]=dn[e]=dn[i]=dn[l]=dn[y]=dn[lr]=dn[xr]=dn[Kr]=dn[qr]=!0,dn[sa]=dn[ua]=dn[P]=!1;function cn(h,x,C,he,yt,Yt){var gr,Sr=x&Xn,Gr=x&ai,Bn=x&nn;if(C&&(gr=yt?C(h,he,yt,Yt):C(h)),gr!==void 0)return gr;if(!Tl(h))return h;var ui=Er(h);if(ui){if(gr=fu(h),!Sr)return yo(h,gr)}else{var da=ld(h),ro=da==ua||da==Lo;if(yu(h))return Bs(h,Sr);if(da==qs||da==hi||ro&&!yt){if(gr=Gr||ro?{}:H(h),!Sr)return Gr?Ic(h,oa(gr,h)):zs(h,Ua(gr,h))}else{if(!dn[da])return yt?h:{};gr=ii(h,da,Sr)}}Yt||(Yt=new Xf);var Xo=Yt.get(h);if(Xo)return Xo;Yt.set(h,gr),_n(h)?h.forEach(function(ns){gr.add(cn(ns,x,C,ns,h,Yt))}):vr(h)&&h.forEach(function(ns,vs){gr.set(vs,cn(ns,x,C,vs,h,Yt))});var Fo=Bn?Gr?rf:xu:Gr?xs:zo,ho=ui?void 0:Fo(h);return On(ho||h,function(ns,vs){ho&&(vs=ns,ns=h[vs]),Za(gr,vs,cn(ns,x,C,vs,h,Yt))}),gr}var Un=cn,ri=1,gi=4;function yi(h){return Un(h,ri|gi)}var Ii=yi;function Ji(h){return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Ji(h)}var Wi=["onCreated","source"],ja=["data"],Jn=["data"];function la(h,x){var C=Object.keys(h);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(h);x&&(he=he.filter(function(yt){return Object.getOwnPropertyDescriptor(h,yt).enumerable})),C.push.apply(C,he)}return C}function ea(h){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?la(Object(C),!0).forEach(function(he){bo(h,he,C[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(C)):la(Object(C)).forEach(function(he){Object.defineProperty(h,he,Object.getOwnPropertyDescriptor(C,he))})}return h}function bo(h,x,C){return x=Eo(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function Eo(h){var x=Ja(h,"string");return Ji(x)==="symbol"?x:String(x)}function Ja(h,x){if(Ji(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(Ji(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function Ss(h,x){if(h==null)return{};var C=Is(h,x),he,yt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(yt=0;yt<Yt.length;yt++)he=Yt[yt],!(x.indexOf(he)>=0)&&Object.prototype.propertyIsEnumerable.call(h,he)&&(C[he]=h[he])}return C}function Is(h,x){if(h==null)return{};var C={},he=Object.keys(h),yt,Yt;for(Yt=0;Yt<he.length;Yt++)yt=he[Yt],!(x.indexOf(yt)>=0)&&(C[yt]=h[yt]);return C}var pu=function(x,C){var he=C.onCreated,yt=C.source,Yt=Ss(C,Wi),gr=Df(),Sr=(0,M.useRef)(),Gr=(0,M.useRef)(Yt),Bn=(0,M.useRef)(yt);return Sr.current||(Sr.current=new x(C),he&&Sr.current.once("inited",function(){return he(Sr.current)}),gr.addLayer(Sr.current)),_l(function(){if(Sr.current){var ui=!Ht(Gr.current,Yt);ui&&(Sr.current.update(Yt),Gr.current=Ii(Yt))}},[Yt]),_l(function(){if(Sr.current){var ui=yt.data,da=Ss(yt,ja),ro=Bn.current,Xo=ro.data,Fo=Ss(ro,Jn),ho=ui!==Xo||!Ht(da,Fo);ho&&(Sr.current.changeData(yt),Bn.current=ea({},yt))}},[yt]),(0,M.useEffect)(function(){return function(){Sr.current&&(gr.removeLayer(Sr.current),Sr.current=null)}},[]),Sr},es={onRemove:"remove",onShow:"show",onHide:"hide",onDataUpdate:"dataUpdate",onLegend:"legend",onLegendColor:"legend:color",onLegendSize:"legend:size",onClick:"click",onUnClick:"unclick",onDblClick:"dblclick",onUndblclick:"undblclick",onContextMenu:"contextmenu",onUnContextMenu:"uncontextmenu",onMouseEnter:"mouseenter",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseUp:"mouseup",onMouseDown:"mousedown",onUnMousemove:"unmousemove",onUnMouseup:"unmouseup",onUnMousedown:"unmousedown",onUnPick:"unpick"},$u=function(x,C){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:es,yt=(0,M.useMemo)(function(){return Object.keys(he)},[he]);Kn(function(Yt){var gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Sr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Yt.forEach(function(Gr){var Bn=he[yt[Gr]],ui=gr[Gr],da=Sr[Gr];ui&&x.off(Bn,ui),da&&x.on(Bn,da)})},yt.map(function(Yt){return C[Yt]})),Wr(function(){yt.forEach(function(Yt){var gr=he[Yt],Sr=C[Yt];gr&&Sr&&x.off(gr,Sr)})})},hl=null,Nl=null,el=null,af=null,gf=null,zf=null,Th=null,ed=Object.assign(es,{onSelect:"select",onUnselect:"unselect"}),Zf=null,iu=g(70655),Uf={}.toString,xh=function(h,x){return Uf.call(h)==="[object "+x+"]"},Lu=xh,cl=function(h){return Lu(h,"Function")},sl=function(h){return Array.isArray?Array.isArray(h):Lu(h,"Array")},Wu=function(h){var x=typeof h;return h!==null&&x==="object"||x==="function"};function td(h,x){if(h){var C;if(sl(h))for(var he=0,yt=h.length;he<yt&&(C=x(h[he],he),C!==!1);he++);else if(Wu(h)){for(var Yt in h)if(h.hasOwnProperty(Yt)&&(C=x(h[Yt],Yt),C===!1))break}}}var Qf=td,Rc=Object.keys?function(h){return Object.keys(h)}:function(h){var x=[];return Qf(h,function(C,he){cl(h)&&he==="prototype"||x.push(he)}),x},$f=null;function rd(h,x){var C=keys(x),he=C.length;if(isNil(h))return!he;for(var yt=0;yt<he;yt+=1){var Yt=C[yt];if(x[Yt]!==h[Yt]||!(Yt in h))return!1}return!0}var Cl=null,Mh=function(h){return typeof h=="object"&&h!==null},fd=Mh,Wd=function(h){if(!fd(h)||!Lu(h,"Object"))return!1;if(Object.getPrototypeOf(h)===null)return!0;for(var x=h;Object.getPrototypeOf(x)!==null;)x=Object.getPrototypeOf(x);return Object.getPrototypeOf(h)===x},oc=Wd;function Ou(h,x){if(!isArray(h))return null;var C;if(isFunction(x)&&(C=x),isPlainObject(x)&&(C=function(yt){return isMatch(yt,x)}),C){for(var he=0;he<h.length;he+=1)if(C(h[he]))return h[he]}return null}var Od=null,Wh=function(h,x){for(var C=null,he=0;he<h.length;he++){var yt=h[he],Yt=yt[x];if(!isNil(Yt)){isArray(Yt)?C=Yt[0]:C=Yt;break}}return C},yf=null,Ep=function(h){if(!isArray(h))return[];for(var x=[],C=0;C<h.length;C++)x=x.concat(h[C]);return x},bd=null,ml=function(h,x){if(x===void 0&&(x=[]),!isArray(h))x.push(h);else for(var C=0;C<h.length;C+=1)ml(h[C],x);return x},vc=null,vd=function(h){if(isArray(h))return h.reduce(function(x,C){return Math.max(x,C)},h[0])},Ad=function(h){if(isArray(h))return h.reduce(function(x,C){return Math.min(x,C)},h[0])},Fd=function(h){var x=h.filter(function(gr){return!isNaN(gr)});if(!x.length)return{min:0,max:0};if(isArray(h[0])){for(var C=[],he=0;he<h.length;he++)C=C.concat(h[he]);x=C}var yt=getMax(x),Yt=getMin(x);return{min:Yt,max:yt}},yp=null,Ph=Array.prototype,Ed=Ph.splice,Bd=Ph.indexOf,Qd=function(h){for(var x=[],C=1;C<arguments.length;C++)x[C-1]=arguments[C];for(var he=0;he<x.length;he++)for(var yt=x[he],Yt=-1;(Yt=Bd.call(h,yt))>-1;)Ed.call(h,Yt,1);return h},Jf=null,bh=Array.prototype.splice,Bv=function(x,C){if(!isArrayLike(x))return[];for(var he=x?C.length:0,yt=he-1;he--;){var Yt=void 0,gr=C[he];(he===yt||gr!==Yt)&&(Yt=gr,bh.call(x,gr,1))}return x},nv=null,iv=function(h,x,C){if(!sl(h)&&!oc(h))return h;var he=C;return Qf(h,function(yt,Yt){he=x(he,yt,Yt)}),he},av=iv,ov=function(h,x){var C=[];if(!isArrayLike(h))return C;for(var he=-1,yt=[],Yt=h.length;++he<Yt;){var gr=h[he];x(gr,he,h)&&(C.push(gr),yt.push(he))}return pullAt(h,yt),C},sv=null,Nd=function(h){return Lu(h,"String")};function uv(h,x){var C;if(isFunction(x))C=function(yt,Yt){return x(yt)-x(Yt)};else{var he=[];isString(x)?he.push(x):isArray(x)&&(he=x),C=function(yt,Yt){for(var gr=0;gr<he.length;gr+=1){var Sr=he[gr];if(yt[Sr]>Yt[Sr])return 1;if(yt[Sr]<Yt[Sr])return-1}return 0}}return h.sort(C),h}var _p=null,Np=function(h,x){for(var C=[],he={},yt=0;yt<h.length;yt++){var Yt=h[yt],gr=Yt[x];if(!isNil(gr)){isArray(gr)||(gr=[gr]);for(var Sr=0;Sr<gr.length;Sr++){var Gr=gr[Sr];he[Gr]||(C.push(Gr),he[Gr]=!0)}}}return C};function zp(h,x){return isArray(h)||isString(h)?h[0]===x:!1}var Sp=null;function xp(h,x){return isArray(h)||isString(h)?h[h.length-1]===x:!1}var Td=null,rp=Object.prototype.hasOwnProperty;function t0(h,x){if(!x||!isArray(h))return{};for(var C={},he=isFunction(x)?x:function(Sr){return Sr[x]},yt,Yt=0;Yt<h.length;Yt++){var gr=h[Yt];yt=he(gr),rp.call(C,yt)?C[yt].push(gr):C[yt]=[gr]}return C}var F0=null;function Nv(h,x){if(!x)return{0:h};if(!isFunction(x)){var C=isArray(x)?x:x.replace(/\s+/g,"").split("*");x=function(he){for(var yt="_",Yt=0,gr=C.length;Yt<gr;Yt++)yt+=he[C[Yt]]&&he[C[Yt]].toString();return yt}}return groupBy(h,x)}var B0=function(h,x){if(!x)return[h];var C=groupToMap(h,x),he=[];for(var yt in C)he.push(C[yt]);return he},lv={};function N0(h){var x=lv[h];if(!x){for(var C=h.toString(16),he=C.length;he<6;he++)C="0"+C;x="#"+C,lv[h]=x}return x}var Jd=null;function Qs(h){var x=0,C=0,he=0,yt=0;return isArray(h)?h.length===1?x=C=he=yt=h[0]:h.length===2?(x=he=h[0],C=yt=h[1]):h.length===3?(x=h[0],C=yt=h[1],he=h[2]):(x=h[0],C=h[1],he=h[2],yt=h[3]):x=C=he=yt=h,{r1:x,r2:C,r3:he,r4:yt}}var np=null,Xd=function(h){return Lu(h,"Number")},ip=Xd,zv=function(h){return isNumber(h)&&h%1!==0},of=null,Zp=function(h){return isNumber(h)&&h%2===0},ap=null,Pp=Number.isInteger?Number.isInteger:function(h){return ip(h)&&h%1===0},cv=null,fv=function(h){return isNumber(h)&&h<0},hv=null,r0=function(h){return isNumber(h)&&h%2!==0},Zv=null,Wp=function(h){return isNumber(h)&&h>0},z0=null,n0=function(h,x){if(isArray(h)){for(var C,he=-1/0,yt=0;yt<h.length;yt++){var Yt=h[yt],gr=isFunction(x)?x(Yt):Yt[x];gr>he&&(C=Yt,he=gr)}return C}},Z0=function(h,x){if(isArray(h)){for(var C,he=1/0,yt=0;yt<h.length;yt++){var Yt=h[yt],gr=isFunction(x)?x(Yt):Yt[x];gr<he&&(C=Yt,he=gr)}return C}},U0=180/Math.PI,dv=function(h){return U0*h},zd=null,pv=parseInt,Uv=Math.PI/180,wp=function(h){return Uv*h},vv=null,$v=null,bp=Object.values?function(h){return Object.values(h)}:function(h){var x=[];return Qf(h,function(C,he){cl(h)&&he==="prototype"||x.push(C)}),x},Op=bp,ch=function(h,x){return contains(values(h),x)},Xh={}.toString,mv=function(h){return Xh.call(h).replace(/^\[object /,"").replace(/]$/,"")},Cm=null,$0=function(h){return isType(h,"Arguments")},i0=null,jv=function(h){return Lu(h,"Boolean")},gv=jv,a0=function(h){return isType(h,"Date")},op=null,o0=function(h){return isType(h,"Error")},s0=null;function j0(h){return isNumber(h)&&isFinite(h)}var Hv=Object.prototype,yv=function(h){var x=h&&h.constructor,C=typeof x=="function"&&x.prototype||Hv;return h===C},u0=null,l0=function(h){return isType(h,"RegExp")},c0=null,H0=function(h){return h===void 0},Ol=H0,_v=function(){for(var h=[],x=0;x<arguments.length;x++)h[x]=arguments[x];for(var C=h[0],he=1;he<h.length;he++){var yt=h[he];isFunction(yt)&&(yt=yt.prototype),mix(C.prototype,yt)}},xv=null,Xp=function(h){if(typeof h!="object"||h===null)return h;var x;if(sl(h)){x=[];for(var C=0,he=h.length;C<he;C++)typeof h[C]=="object"&&h[C]!=null?x[C]=Xp(h[C]):x[C]=h[C]}else{x={};for(var yt in h)typeof h[yt]=="object"&&h[yt]!=null?x[yt]=Xp(h[yt]):x[yt]=h[yt]}return x},Vv=Xp,V0=function(h,x){if(!cl(h))throw new TypeError("Expected a function");var C=function(){for(var he=[],yt=0;yt<arguments.length;yt++)he[yt]=arguments[yt];var Yt=x?x.apply(this,he):he[0],gr=C.cache;if(gr.has(Yt))return gr.get(Yt);var Sr=h.apply(this,he);return gr.set(Yt,Sr),Sr};return C.cache=new Map,C},f0=5;function bv(h,x,C,he){C=C||0,he=he||f0;for(var yt in x)if(x.hasOwnProperty(yt)){var Yt=x[yt];Yt!==null&&oc(Yt)?(oc(h[yt])||(h[yt]={}),C<he?bv(h[yt],Yt,C+1,he):h[yt]=x[yt]):sl(Yt)?(h[yt]=[],h[yt]=h[yt].concat(Yt)):Yt!==void 0&&(h[yt]=Yt)}}var h0=function(h){for(var x=[],C=1;C<arguments.length;C++)x[C-1]=arguments[C];for(var he=0;he<x.length;he+=1)bv(h,x[he]);return h},Ev=h0,Up=function(h,x,C,he){isFunction(x)||(C=x,x=h,h=function(){});var yt=Object.create?function(gr,Sr){return Object.create(gr,{constructor:{value:Sr}})}:function(gr,Sr){function Gr(){}Gr.prototype=gr;var Bn=new Gr;return Bn.constructor=Sr,Bn},Yt=yt(x.prototype,h);return h.prototype=mix(Yt,h.prototype),h.superclass=yt(x.prototype,x),mix(Yt,C),mix(h,he),h},Am=null,Tm=Object.prototype.hasOwnProperty;function lp(h){if(isNil(h))return!0;if(isArrayLike(h))return!h.length;var x=getType(h);if(x==="Map"||x==="Set")return!h.size;if(isPrototype(h))return!Object.keys(h).length;for(var C in h)if(Tm.call(h,C))return!1;return!0}var Sv=null,Cp=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)},Kd=Cp,Kp=function(h,x){if(h===x)return!0;if(!h||!x||Nd(h)||Nd(x))return!1;if(Kd(h)||Kd(x)){if(h.length!==x.length)return!1;for(var C=!0,he=0;he<h.length&&(C=Kp(h[he],x[he]),!!C);he++);return C}if(fd(h)||fd(x)){var yt=Object.keys(h),Yt=Object.keys(x);if(yt.length!==Yt.length)return!1;for(var C=!0,he=0;he<yt.length&&(C=Kp(h[yt[he]],x[yt[he]]),!!C);he++);return C}return!1},Ap=Kp,G0=function(h,x,C){return isFunction(C)?!!C(h,x):isEqual(h,x)},mg=function(h,x,C){for(var he=0,yt=isString(x)?x.split("."):x;h&&he<yt.length;)h=h[yt[he++]];return h===void 0||he<yt.length?C:h},gg=function(h,x,C){var he=h,yt=isString(x)?x.split("."):x;return yt.forEach(function(Yt,gr){gr<yt.length-1?(isObject(he[Yt])||(he[Yt]=isNumber(yt[gr+1])?[]:{}),he=he[Yt]):he[Yt]=C}),h},py=Object.prototype.hasOwnProperty,M_=function(h,x){if(h===null||!isPlainObject(h))return{};var C={};return each(x,function(he){py.call(h,he)&&(C[he]=h[he])}),C},W0=function(h,x){return av(h,function(C,he,yt){return x.includes(yt)||(C[yt]=he),C},{})},d0={},wv=function(h){return h=h||"g",d0[h]?d0[h]+=1:d0[h]=1,h+d0[h]},p0,Mm=V0(function(h,x){x===void 0&&(x={});var C=x.fontSize,he=x.fontFamily,yt=x.fontWeight,Yt=x.fontStyle,gr=x.fontVariant;return p0||(p0=document.createElement("canvas").getContext("2d")),p0.font=[Yt,gr,yt,C+"px",he].join(" "),p0.measureText(Nd(h)?h:"").width},function(h,x){return x===void 0&&(x={}),(0,iu.pr)([h],Op(x)).join("")}),Pm=function(h,x,C,he){he===void 0&&(he="...");var yt=16,Yt=measureTextWidth(he,C),gr=isString(h)?h:toString(h),Sr=x,Gr=[],Bn,ui;if(measureTextWidth(h,C)<=x)return h;for(;Bn=gr.substr(0,yt),ui=measureTextWidth(Bn,C),!(ui+Yt>Sr&&ui>Sr);)if(Gr.push(Bn),Sr-=ui,gr=gr.substr(yt),!gr)return Gr.join("");for(;Bn=gr.substr(0,1),ui=measureTextWidth(Bn,C),!(ui+Yt>Sr);)if(Gr.push(Bn),Sr-=ui,gr=gr.substr(1),!gr)return Gr.join("");return""+Gr.join("")+he},vy=function(){function h(){this.map={}}return h.prototype.has=function(x){return this.map[x]!==void 0},h.prototype.get=function(x,C){var he=this.map[x];return he===void 0?C:he},h.prototype.set=function(x,C){this.map[x]=C},h.prototype.clear=function(){this.map={}},h.prototype.delete=function(x){delete this.map[x]},h.prototype.size=function(){return Object.keys(this.map).length},h}(),gy=null,v0=function(h,x){var C=h.source,he=(0,iu._T)(h,["source"]),yt=x.source,Yt=(0,iu._T)(x,["source"]),gr=(0,iu.pi)({},Ev({},he,Yt));return yt instanceof v.Source?gr.source=yt:C instanceof v.Source?gr.source=C:gr.source=(0,iu.pi)((0,iu.pi)({},C),yt),gr},m0=function(h,x){if(h instanceof v.Source&&x instanceof v.Source)return h!==x;var C=h.data,he=(0,iu._T)(h,["data"]),yt=x.data,Yt=(0,iu._T)(x,["data"]),gr=C!==yt||!Ap(he,Yt);return gr},g0;(function(h){h.BubbleLayer="bubbleLayer",h.ChoroplethLayer="choroplethLayer",h.IconImageLayer="iconImageLayer",h.IconFontLayer="iconFontLayer"})(g0||(g0={}));var Ip=["show","hide","dataUpdate","destroy","legend","legend:color","legend:size","click","dblclick","unclick","undblclick","contextmenu","uncontextmenu","mouseenter","unmouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","unpick"],$p;(function(h){h.CREATED="created",h.INITED="inited",h.ADD="add",h.REMOVE="remove"})($p||($p={}));var Cv;(function(h){h.CREATED="created",h.INITED="inited",h.ADD="add",h.REMOVE="remove"})(Cv||(Cv={}));var Av;(function(h){h.INITED_LAYER="inited-layer",h.INITED_LAYERS="inited-layers"})(Av||(Av={}));var y0=function(h){(0,iu.ZT)(x,h);function x(C,he){C===void 0&&(C=[]),he===void 0&&(he={});var yt=h.call(this)||this;yt.layerMap=new Map,yt.name=he.name?he.name:wv("layerGroup");for(var Yt=0;Yt<C.length;Yt++){var gr=C[Yt];yt.addLayer(gr)}return yt}return x.prototype.addTo=function(C){var he,yt,Yt=this;this.scene=C;var gr=0,Sr=this.layerMap.size;try{for(var Gr=(0,iu.XA)(this.layerMap.values()),Bn=Gr.next();!Bn.done;Bn=Gr.next()){var ui=Bn.value;ui.once("inited",function(da){gr++,Yt.emit(Av.INITED_LAYER,da),gr===Sr&&Yt.emit(Av.INITED_LAYERS)}),ui.addTo(C)}}catch(da){he={error:da}}finally{try{Bn&&!Bn.done&&(yt=Gr.return)&&yt.call(Gr)}finally{if(he)throw he.error}}},x.prototype.remove=function(){this.scene&&this.getLayers().forEach(function(C){return C.remove()})},x.prototype.hasLayer=function(C){var he=typeof C=="string"?C:this.getLayerId(C);return this.layerMap.has(he)},x.prototype.addLayer=function(C){var he=this,yt=this.getLayerId(C);this.layerMap.set(yt,C),this.scene&&(C.once("inited",function(Yt){return he.emit(Av.INITED_LAYER,Yt)}),C.addTo(this.scene))},x.prototype.addLayers=function(C){var he=this;C.forEach(function(yt){he.addLayer(yt)})},x.prototype.removeLayer=function(C){var he=typeof C=="string"?C:this.getLayerId(C),yt=this.layerMap.get(he);return yt?(this.layerMap.delete(he),this.scene&&yt.remove(),!0):!1},x.prototype.getLayers=function(){return Array.from(this.layerMap.values())},x.prototype.getLayer=function(C){return this.layerMap.get(C)},x.prototype.getLayerByName=function(C){return this.getLayers().find(function(he){return he.name===C})},x.prototype.removeAllLayer=function(){var C,he;try{for(var yt=(0,iu.XA)(this.layerMap.values()),Yt=yt.next();!Yt.done;Yt=yt.next()){var gr=Yt.value;this.scene&&gr.remove()}}catch(Sr){C={error:Sr}}finally{try{Yt&&!Yt.done&&(he=yt.return)&&he.call(yt)}finally{if(C)throw C.error}}this.layerMap.clear()},x.prototype.isEmpty=function(){return this.layerMap.size===0},x.prototype.setZIndex=function(C){var he,yt;try{for(var Yt=(0,iu.XA)(this.layerMap.values()),gr=Yt.next();!gr.done;gr=Yt.next()){var Sr=gr.value;Sr.setIndex(C)}}catch(Gr){he={error:Gr}}finally{try{gr&&!gr.done&&(yt=Yt.return)&&yt.call(Yt)}finally{if(he)throw he.error}}},x.prototype.getLayerId=function(C){return C.id},x.prototype.destroy=function(){this.remove(),this.off("*")},x}(ft),Id=function(h){(0,iu.ZT)(x,h);function x(C){var he=h.call(this)||this;he.isComposite=!0;var yt=C.id,Yt=C.name;he.id=yt||wv("composite-layer"),he.name=Yt||he.id,he.options=v0(he.getDefaultOptions(),C),he.lastOptions=he.options,he.source=he.createSource();var gr=he.createSubLayers();return he.subLayers=new y0(gr),he.emit(Cv.CREATED,he),he}return x.prototype.getDefaultOptions=function(){return x.DefaultOptions},x.prototype.createSource=function(){var C=this.options.source,he=C.data,yt=(0,iu._T)(C,["data"]),Yt=this.isSourceInstance(C)?C:new v.Source(he,yt);return Yt},x.prototype.isSourceInstance=function(C){return C instanceof v.Source},x.prototype.setSubLayersSource=function(C){this.layer.changeData(C)},x.prototype.initSubLayersEvent=function(){},x.prototype.addTo=function(C){var he=this;this.scene=C,this.subLayers.once(Av.INITED_LAYERS,function(){he.emit(Cv.INITED,he),he.emit(Cv.ADD,he)}),this.subLayers.addTo(C)},x.prototype.remove=function(){this.scene&&(this.subLayers.remove(),this.emit(Cv.REMOVE))},x.prototype.update=function(C,he){var yt,Yt;he===void 0&&(he=!0),this.updateOption(C),he&&((yt=this.scene)===null||yt===void 0||yt.setEnableRender(!1)),C.source&&m0(C.source,this.lastOptions.source)&&this.changeData(C.source),this.updateSubLayers(C),he&&((Yt=this.scene)===null||Yt===void 0||Yt.setEnableRender(!0),this.render())},x.prototype.updateOption=function(C){this.lastOptions=this.options,this.options=v0(this.options,C)},x.prototype.render=function(){this.scene&&this.scene.render()},x.prototype.changeData=function(C){this.setSubLayersSource(C)},x.prototype.setIndex=function(C){this.subLayers.setZIndex(C)},x.prototype.setBlend=function(C){this.layer.setBlend(C)},x.prototype.setMinZoom=function(C){this.subLayers.getLayers().forEach(function(he){he.setMinZoom(C)})},x.prototype.setMaxZoom=function(C){this.subLayers.getLayers().forEach(function(he){he.setMaxZoom(C)})},x.prototype.show=function(){this.layer.inited&&this.update({visible:!0})},x.prototype.hide=function(){this.layer.inited&&this.update({visible:!1})},x.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},x.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():Ol(this.options.visible)?!0:this.options.visible},x.prototype.boxSelect=function(C,he){this.layer.boxSelect(C,he)},x.prototype.fitBounds=function(C){this.layer.fitBounds(C)},x.prototype.getLegend=function(C){return this.layer.getLegend(C)},x.prototype.getLegendItems=function(C){return this.layer.getLegendItems(C)},x.prototype.getColorLegendItems=function(){var C=this.layer.getLegendItems("color");if(Array.isArray(C)&&C.length!==0){var he=C;return he}return[]},x.prototype.getInteractionSubLayers=function(){var C=this.subLayers.getLayers().filter(function(he){return he.interaction===!0});return C},x.prototype.destroy=function(){this.subLayers.destroy()},x.prototype.on=function(C,he,yt){return Ip.indexOf(C)!==-1?this.layer.on(C,he):h.prototype.on.call(this,C,he,yt),this},x.prototype.once=function(C,he){return Ip.indexOf(C)!==-1?this.layer.once(C,he):h.prototype.once.call(this,C,he),this},x.prototype.off=function(C,he){return Ip.indexOf(C)!==-1?this.layer.off(C,he):h.prototype.off.call(this,C,he),this},x.LayerType=g0,x.DefaultOptions={},x}(ft);function Rp(h,x){return function(){for(var C=[],he=0;he<arguments.length;he++)C[he]=arguments[he];var yt={};return h.forEach(function(Yt,gr){yt[Yt]=C[gr]}),delete yt.undefined,x(yt)}}var Om=function(){function h(){}return h.shape=function(x,C){if(Nd(C))x.shape(C);else if(cl(C)){var he=[];x.shape(he.join("*"),Rp(he,C))}else if(Wu(C)){var yt=C.field?C.field:"";if(cl(C.value)){var he=sl(yt)?yt:yt.split("*");x.shape(yt,Rp(he,C.value))}else x.shape(yt,C.value);Nd(yt)&&C.scale&&h.scale(x,yt,C.scale)}},h.size=function(x,C){if(ip(C))x.size(C);else if(sl(C))x.size(C);else if(cl(C)){var he=[];x.size(he.join("*"),Rp(he,C))}else if(Wu(C)){var yt=C.field?C.field:"";if(cl(C.value)){var he=sl(yt)?yt:yt.split("*");x.size(yt,Rp(he,C.value))}else x.size(yt,C.value);Nd(yt)&&C.scale&&h.scale(x,yt,C.scale)}},h.color=function(x,C){if(Nd(C))x.color(C);else if(cl(C)){var he=[];x.color(he.join("*"),Rp(he,C))}else if(Wu(C)){var yt=C.field?C.field:"";if(cl(C.value)){var he=sl(yt)?yt:yt.split("*");x.color(yt,Rp(he,C.value))}else x.color(yt,C.value);Nd(yt)&&C.scale&&h.scale(x,yt,C.scale)}},h.scale=function(x,C,he){x.scale(C,he)},h.rotate=function(x,C){Nd(C)||cl(C)||Wu(C)},h.texture=function(x,C){Nd(C)&&x.texture(C)},h.animate=function(x,C){(gv(C)||Wu(C))&&x.animate(C)},h.filter=function(x,C){var he=C.field?C.field:"",yt=sl(he)?he:he.split("*");x.filter(yt.join("*"),Rp(yt,C.value))},h.style=function(x,C){C&&x.style(C)},h.state=function(x,C){var he=C.active,yt=C.select;he&&x.active(he),yt&&x.select(yt)},h}(),Zd=function(h){(0,iu.ZT)(x,h);function x(C){var he=h.call(this)||this;he.isComposite=!1;var yt=C.id,Yt=C.name,gr=C.source,Sr=C.interaction,Gr=Sr===void 0?!1:Sr;return he.id=yt||wv("core-layer"),he.name=Yt||he.id,he.interaction=Gr,he.options=v0(he.getDefaultOptions(),C),he.lastOptions=he.options,he.layer=he.createLayer(),he.adaptorLayerAttr(!1),he.setSource(gr),he.emit($p.CREATED,he),he}return Object.defineProperty(x.prototype,"inited",{get:function(){return this.layer.inited},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"source",{get:function(){return this.layer.getSource()},enumerable:!1,configurable:!0}),x.prototype.getDefaultOptions=function(){return x.DefaultOptions},x.prototype.getLayerConfig=function(){var C=W0(this.options,["source","shape","color","size","scale","texture","style","animate","state"]);return C},x.prototype.adaptorAttrOptions=function(C){return C},x.prototype.adaptorLayerAttr=function(C){C===void 0&&(C=!0);for(var he=["shape","color","size","scale","texture","style","animate","state"],yt=this.adaptorAttrOptions(this.options),Yt=this.adaptorAttrOptions(this.lastOptions),gr=0;gr<he.length;gr++){var Sr=he[gr],Gr=yt[Sr],Bn=Yt[Sr];!Ol(Gr)&&(!C||!Ap(Gr,Bn))&&Om[Sr](this.layer,Gr)}},x.prototype.setSource=function(C){if(C instanceof v.Source)this.layer.setSource(C);else{var he=C.data,yt=(0,iu._T)(C,["data"]),Yt=this.layer.getSource();Yt?this.layer.setData(he,yt):this.layer.source(he,yt)}},x.prototype.getSource=function(){return this.source},x.prototype.addTo=function(C){var he=this;this.scene=C,this.layer.once($p.INITED,function(){he.emit($p.INITED,he)}),this.layer.once($p.ADD,function(){he.emit($p.ADD,he)}),C.addLayer(this.layer)},x.prototype.remove=function(){this.scene&&(this.scene.removeLayer(this.layer),this.emit($p.REMOVE))},x.prototype.update=function(C,he){var yt,Yt;he===void 0&&(he=!0),this.updateOption(C),this.updateConfig(C),he&&((yt=this.scene)===null||yt===void 0||yt.setEnableRender(!1)),(Ol(this.options.visible)||this.options.visible)&&this.adaptorLayerAttr(),C.source&&m0(C.source,this.lastOptions.source)&&this.changeData(C.source),he&&((Yt=this.scene)===null||Yt===void 0||Yt.setEnableRender(!0),this.render())},x.prototype.updateOption=function(C){this.lastOptions=this.options,this.options=v0(this.options,C)},x.prototype.updateConfig=function(C){!Ol(C.zIndex)&&!Ap(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(C.zIndex),!Ol(C.blend)&&!Ap(this.lastOptions.blend,this.options.blend)&&this.setBlend(C.blend),!Ol(C.minZoom)&&!Ap(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(C.minZoom),!Ol(C.maxZoom)&&!Ap(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMaxZoom(C.maxZoom),!Ol(C.visible)&&!Ap(this.lastOptions.visible,this.options.visible)&&(C.visible?this.show():this.hide())},x.prototype.render=function(){this.scene&&this.scene.render()},x.prototype.changeData=function(C){this.setSource(C)},x.prototype.setIndex=function(C){this.layer.setIndex(C)},x.prototype.setBlend=function(C){this.layer.setBlend(C)},x.prototype.setMinZoom=function(C){this.layer.setMinZoom(C)},x.prototype.setMaxZoom=function(C){this.layer.setMaxZoom(C)},x.prototype.show=function(){this.layer.inited&&this.layer.show()},x.prototype.hide=function(){this.layer.inited&&this.layer.hide()},x.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},x.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():Ol(this.options.visible)?!0:this.options.visible},x.prototype.boxSelect=function(C,he){this.layer.boxSelect(C,he)},x.prototype.fitBounds=function(C){this.layer.fitBounds(C)},x.prototype.getLegend=function(C){return this.layer.getLegend(C)},x.prototype.getLegendItems=function(C){return this.layer.getLegendItems(C)},x.prototype.on=function(C,he,yt){return Ip.indexOf(C)!==-1?this.layer.on(C,he):h.prototype.on.call(this,C,he,yt),this},x.prototype.once=function(C,he){return Ip.indexOf(C)!==-1?this.layer.once(C,he):h.prototype.once.call(this,C,he),this},x.prototype.off=function(C,he){return Ip.indexOf(C)!==-1?this.layer.off(C,he):h.prototype.off.call(this,C,he),this},x.prototype.destroy=function(){this.layer.destroy()},x.DefaultOptions={},x}(ft),Gv=function(h){(0,iu.ZT)(x,h);function x(){var C=h!==null&&h.apply(this,arguments)||this;return C.type="lineLayer",C}return x.prototype.createLayer=function(){var C=this.getLayerConfig(),he=new v.LineLayer(C);return he},x}(Zd),Wv=function(h){(0,iu.ZT)(x,h);function x(){var C=h!==null&&h.apply(this,arguments)||this;return C.type="polygonLayer",C}return x.prototype.createLayer=function(){var C=this.getLayerConfig(),he=new v.PolygonLayer(C);return he},x}(Zd),X0=function(h){(0,iu.ZT)(x,h);function x(){var C=h!==null&&h.apply(this,arguments)||this;return C.type="textLayer",C}return x.prototype.createLayer=function(){var C=this.getLayerConfig(),he=new v.PointLayer(C);return he},x.prototype.adaptorAttrOptions=function(C){var he=this.options,yt=he.field,Yt=he.style,gr=Yt===void 0?{}:Yt,Sr=gr||{},Gr=Sr.fill,Bn=Sr.fontSize,ui={field:yt,value:"text"};return(0,iu.pi)({shape:ui,color:Gr,size:Bn},C)},x}(Zd),yg={data:[],parser:{type:"json",x:"x",y:"y"}},Yp={data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}},qp="#2f54eb",hd={active:{fillColor:!1,strokeColor:qp,lineWidth:1,lineOpacity:1},select:{fillColor:!1,strokeColor:qp,lineWidth:1,lineOpacity:1}},K0={visible:!0,source:Yp,lineWidth:1,state:{active:!1,select:!1},enabledMultiSelect:!1,triggerMultiSelectKey:"Shift"},Tv=function(h){return Ol(h)||(h.active===!1?hd.active=Object.assign(hd.active,{fill:!1,stroke:!1}):typeof h.active=="object"&&(h.active.fillColor===!1?hd.active.fillColor=!1:typeof h.active.fillColor=="string"&&(hd.active.fillColor=h.active.fillColor),h.active.strokeColor===!1?hd.active.strokeColor=!1:typeof h.active.strokeColor=="string"&&(hd.active.strokeColor=h.active.strokeColor),typeof h.active.lineWidth=="number"&&(hd.active.lineWidth=h.active.lineWidth),typeof h.active.lineOpacity=="number"&&(hd.active.lineOpacity=h.active.lineOpacity)),h.select===!1?hd.select=Object.assign(hd.select,{fill:!1,stroke:!1}):typeof h.select=="object"&&(h.select.fillColor===!1?hd.select.fillColor=!1:typeof h.select.fillColor=="string"&&(hd.select.fillColor=h.select.fillColor),h.select.strokeColor===!1?hd.select.strokeColor=!1:typeof h.select.strokeColor=="string"&&(hd.select.strokeColor=h.select.strokeColor),typeof h.select.lineWidth=="number"&&(hd.select.lineWidth=h.select.lineWidth),typeof h.select.lineOpacity=="number"&&(hd.select.lineOpacity=h.select.lineOpacity))),hd},jp={};window.addEventListener("keydown",function(h){h.isComposing||h.keyCode===229||(jp[h.key]=!0)}),window.addEventListener("keyup",function(h){jp[h.key]=!1});var _g=function(h){return!!jp[h]},xg=function(h,x){var C=h&&(x?_g(x):!0);return C},Im=function(h){var x=h.visible,C=h.minZoom,he=h.maxZoom,yt=h.zIndex,Yt=yt===void 0?0:yt,gr=h.label,Sr=x&&Boolean(gr)&&(Ol(gr==null?void 0:gr.visible)||(gr==null?void 0:gr.visible)),Gr=(0,iu.pi)((0,iu.pi)({zIndex:Yt+.1,minZoom:C,maxZoom:he},gr),{visible:Sr});return Gr},Rm=function(h){return!(Ol(h)||gv(h)||Ol(h.coordinates)&&(Ol(h.x)||Ol(h.y))&&Ol(h.geometry))},Y0=function(h,x){var C=x==null?void 0:x.position;if(!Rm(C))return h;var he=h.parser.type,yt=h.transforms,Yt=h.originData,gr={data:Yt,transforms:yt};if(C.coordinates){var Sr=C.coordinates;gr.parser={type:he,coordinates:Sr}}else if(C.x&&C.y){var Gr=C.x,Bn=C.y;gr.parser={type:he,x:Gr,y:Bn}}else if(C.geometry){var ui=C.geometry;gr.parser={type:he,geometry:ui}}return gr},Lm=function(h,x){return(0,iu.pi)((0,iu.pi)({},Im(h)),{source:Y0(x,h.label)})},_0=function(h){(0,iu.ZT)(x,h);function x(C){var he=h.call(this,C)||this;return he.type=Id.LayerType.ChoroplethLayer,he.selectData=[],he.layerState=hd,he.onHighlighHandle=function(yt){var Yt=yt.feature,gr=yt.featureId;he.setHighlightLayerSource(Yt,gr)},he.onUnhighlighHandle=function(){he.setHighlightLayerSource()},he.onSelectHandle=function(yt){var Yt=yt.feature,gr=yt.featureId;he.handleSelectData(gr,Yt)},he.initSubLayersEvent(),he}return Object.defineProperty(x.prototype,"layer",{get:function(){return this.fillLayer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"fillLayer",{get:function(){return this.subLayers.getLayer("fillLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"strokeLayer",{get:function(){return this.subLayers.getLayer("strokeLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"highlightStrokeLayer",{get:function(){return this.subLayers.getLayer("highlightStrokeLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"selectFillLayer",{get:function(){return this.subLayers.getLayer("selectFillLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"selectStrokeLayer",{get:function(){return this.subLayers.getLayer("selectStrokeLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"labelLayer",{get:function(){return this.subLayers.getLayer("labelLayer")},enumerable:!1,configurable:!0}),x.prototype.getDefaultOptions=function(){return x.DefaultOptions},x.prototype.createSubLayers=function(){var C=this.source;this.layerState=Tv(this.options.state);var he=new Wv((0,iu.pi)((0,iu.pi)({},this.getFillLayerOptions()),{id:"fillLayer",shape:"fill",source:C,interaction:!0})),yt=new Gv((0,iu.pi)((0,iu.pi)({},this.getStrokeLayerOptions()),{id:"strokeLayer",shape:"line",source:C})),Yt=new Gv((0,iu.pi)((0,iu.pi)({},this.getHighlightStrokeLayerOptions()),{id:"highlightStrokeLayer"})),gr=new Wv((0,iu.pi)((0,iu.pi)({},this.getSelectFillLayerOptions()),{id:"selectFillLayer"})),Sr=new Gv((0,iu.pi)((0,iu.pi)({},this.getSelectStrokeLayerOptions()),{id:"selectStrokeLayer"})),Gr=new X0((0,iu.pi)((0,iu.pi)({},Lm(this.options,C)),{id:"labelLayer"})),Bn=[he,yt,Yt,gr,Sr,Gr];return Bn},x.prototype.getFillLayerOptions=function(){var C=W0(this.options,["source"]),he=C.visible,yt=C.minZoom,Yt=C.maxZoom,gr=C.zIndex,Sr=gr===void 0?0:gr,Gr=C.fillColor,Bn=C.opacity,ui=(0,iu._T)(C,["visible","minZoom","maxZoom","zIndex","fillColor","opacity"]),da=this.layerState,ro={active:da.active.fillColor===!1?!1:{color:da.active.fillColor},select:!1},Xo={opacity:Bn},Fo=(0,iu.pi)((0,iu.pi)({},ui),{visible:he,minZoom:yt,maxZoom:Yt,zIndex:Sr,color:Gr,state:ro,style:Xo});return Fo},x.prototype.getStrokeLayerOptions=function(){var C=this.options,he=C.visible,yt=C.minZoom,Yt=C.maxZoom,gr=C.zIndex,Sr=gr===void 0?0:gr,Gr=C.opacity,Bn=C.strokeColor,ui=C.lineWidth,da=C.lineOpacity,ro=C.lineDash,Xo=C.lineType,Fo={opacity:Ol(da)?Gr:da,dashArray:ro,lineType:Xo},ho={visible:he&&Boolean(ui)&&Boolean(Bn),zIndex:Sr,minZoom:yt,maxZoom:Yt,size:ui,color:Bn,style:Fo};return ho},x.prototype.getHighlightStrokeLayerOptions=function(){var C=this.options,he=C.visible,yt=C.minZoom,Yt=C.maxZoom,gr=C.zIndex,Sr=gr===void 0?0:gr,Gr=C.lineWidth,Bn=this.layerState,ui=Bn.active.strokeColor||void 0,da=Bn.active.lineWidth||Gr,ro={visible:he&&Boolean(ui),zIndex:Sr+.1,minZoom:yt,maxZoom:Yt,source:Yp,size:da,color:ui,style:{opacity:Bn.active.lineOpacity}};return ro},x.prototype.getSelectFillLayerOptions=function(){var C=this.options,he=C.visible,yt=C.minZoom,Yt=C.maxZoom,gr=C.zIndex,Sr=gr===void 0?0:gr,Gr=C.opacity,Bn=this.layerState,ui=Bn.select.fillColor||void 0,da={opacity:Gr},ro={visible:he&&Boolean(ui),zIndex:Sr+.1,minZoom:yt,maxZoom:Yt,source:Yp,color:ui,style:da,state:{select:!1,active:!1}};return ro},x.prototype.getSelectStrokeLayerOptions=function(){var C=this.options,he=C.visible,yt=C.minZoom,Yt=C.maxZoom,gr=C.zIndex,Sr=gr===void 0?0:gr,Gr=C.lineWidth,Bn=this.layerState,ui=Bn.select.strokeColor||void 0,da=Bn.select.lineWidth||Gr,ro={visible:he&&Boolean(ui),zIndex:Sr+.1,minZoom:yt,maxZoom:Yt,source:Yp,size:da,color:ui,style:{opacity:Bn.select.lineOpacity}};return ro},x.prototype.setSubLayersSource=function(C){var he;if(this.isSourceInstance(C))this.source=C,this.fillLayer.setSource(C),this.strokeLayer.setSource(C),this.labelLayer.setSource(C);else{var yt=C.data,Yt=(0,iu._T)(C,["data"]);if(this.source.setData(yt,Yt),Rm((he=this.options.label)===null||he===void 0?void 0:he.position)){var gr=Y0(this.source,this.options.label);this.labelLayer.changeData(gr)}}this.highlightStrokeLayer.changeData(Yp),this.selectFillLayer.changeData(Yp),this.selectStrokeLayer.changeData(Yp)},x.prototype.setHighlightLayerSource=function(C,he){if(he===void 0&&(he=-999),this.highlightData!==he){var yt=C?[C]:[],Yt=this.source.parser,gr=Yt.type==="geojson"?{type:"FeatureCollection",features:yt}:yt;this.highlightStrokeLayer.changeData({data:gr,parser:Yt}),this.highlightData=he}},x.prototype.setSelectLayerSource=function(C){if(C===void 0&&(C=[]),!(this.selectData.length===C.length&&Ap(this.selectData.map(function(gr){var Sr=gr.featureId;return Sr}),C.map(function(gr){var Sr=gr.featureId;return Sr})))){var he=C.map(function(gr){var Sr=gr.feature;return Sr}),yt=this.source.parser,Yt=yt.type==="geojson"?{type:"FeatureCollection",features:he}:he;this.selectFillLayer.changeData({data:Yt,parser:yt}),this.selectStrokeLayer.changeData({data:Yt,parser:yt}),this.selectData=C}},x.prototype.initSubLayersEvent=function(){this.fillLayer.off("mousemove",this.onHighlighHandle),this.fillLayer.off("mouseout",this.onHighlighHandle),this.fillLayer.off("click",this.onSelectHandle),this.selectData=[],this.highlightData=null,this.options.state&&(this.options.state.active&&(this.fillLayer.on("mousemove",this.onHighlighHandle),this.fillLayer.on("mouseout",this.onUnhighlighHandle)),this.options.state.select&&this.fillLayer.on("click",this.onSelectHandle))},x.prototype.handleSelectData=function(C,he,yt){var Yt=this.options,gr=Yt.enabledMultiSelect,Sr=Yt.triggerMultiSelectKey,Gr=xg(gr,Sr)||yt,Bn=Vv(this.selectData),ui=Bn.findIndex(function(ro){return ro.featureId===C});if(ui===-1)Gr?Bn.push({feature:he,featureId:C}):Bn=[{feature:he,featureId:C}],this.emit("select",he,Vv(Bn));else{var da=Bn[ui];Gr?Bn.splice(ui,1):Bn=[],this.emit("unselect",da,Vv(Bn))}this.setSelectLayerSource(Bn)},x.prototype.update=function(C){h.prototype.update.call(this,C),this.initSubLayersEvent()},x.prototype.updateOption=function(C){h.prototype.updateOption.call(this,C),this.layerState=Tv(this.options.state)},x.prototype.updateSubLayers=function(C){this.fillLayer.update(this.getFillLayerOptions(),!1),this.strokeLayer.update(this.getStrokeLayerOptions(),!1),this.highlightStrokeLayer.update(this.getHighlightStrokeLayerOptions(),!1),this.selectFillLayer.update(this.getSelectFillLayerOptions(),!1),this.selectStrokeLayer.update(this.getSelectStrokeLayerOptions(),!1),this.labelLayer.update(Lm(this.options,this.source),!1),this.options.visible&&(!Ol(C.state)&&!Ap(this.lastOptions.state,this.options.state)&&this.updateHighlightSubLayers(),this.layerState.active.strokeColor&&this.setHighlightLayerSource(),(this.layerState.select.fillColor||this.layerState.select.strokeColor)&&this.setSelectLayerSource())},x.prototype.updateHighlightSubLayers=function(){var C=this.layerState,he=Tv(this.lastOptions.state);he.active.strokeColor!==C.active.strokeColor&&(C.active.strokeColor?this.highlightStrokeLayer.show():this.highlightStrokeLayer.hide()),he.select.fillColor!==C.select.fillColor&&(C.select.fillColor?this.selectFillLayer.show():this.selectFillLayer.hide()),he.select.strokeColor!==C.select.strokeColor&&(C.select.strokeColor?this.selectStrokeLayer.show():this.selectStrokeLayer.hide())},x.prototype.setIndex=function(C){this.fillLayer.setIndex(C),this.strokeLayer.setIndex(C),this.highlightStrokeLayer.setIndex(C+.1),this.selectFillLayer.setIndex(C+.1),this.selectStrokeLayer.setIndex(C+.1),this.labelLayer.setIndex(C+.1)},x.prototype.setActive=function(C,he){var yt=this.fillLayer.source,Yt=yt.getFeatureId(C,he);if(Ol(Yt)){console.warn("Feature non-existent by field: ".concat(C,",value: ").concat(he));return}if(this.layerState.active.fillColor&&this.fillLayer.layer.setActive(Yt),this.layerState.active.strokeColor){var gr=yt.getFeatureById(Yt);this.setHighlightLayerSource(gr,Yt)}},x.prototype.setSelect=function(C,he){var yt=this.fillLayer.source,Yt=yt.getFeatureId(C,he);if(Ol(Yt)){console.warn("Feature non-existent by field: ".concat(C,",value: ").concat(he));return}if(!(this.layerState.select.strokeColor===!1&&this.layerState.select.fillColor===!1)){var gr=yt.getFeatureById(Yt);this.handleSelectData(Yt,gr,!0)}},x.prototype.boxSelect=function(C,he){this.fillLayer.boxSelect(C,he)},x.DefaultOptions=K0,x}(Id),x0=Object.assign(es,{onSelect:"select",onUnselect:"unselect"}),km=(0,M.memo)((0,M.forwardRef)(function(x,C){var he=pu(_0,x);return $u(he.current,x,x0),(0,M.useImperativeHandle)(C,function(){return he.current}),null})),bg=null,Eg=null,Qp=g(73935),b0=function(x){var C=x.className,he=x.style,yt=x.children,Yt=x.position,gr=x.name,Sr=(0,M.useRef)(document.createElement("div")),Gr=ni(he),Bn=(0,M.useCallback)(function(){return Sr.current},[]),ui=(0,M.useMemo)(function(){return{position:Yt,name:gr,className:C,style:Gr}},[Yt,gr,C,Gr]);return th(Bn,void 0,ui),(0,Qp.createPortal)(yt,Sr.current)};b0.defaultProps={position:"topleft"};function q0(h){return Cg(h)||wg(h)||Sg(h)||Dm()}function Dm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sg(h,x){if(h){if(typeof h=="string")return Q0(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Q0(h,x)}}function wg(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function Cg(h){if(Array.isArray(h))return Q0(h)}function Q0(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}var Mv=function(x,C){var he=(0,M.useMemo)(function(){return Object.keys(C)},[C]);(0,M.useEffect)(function(){return x&&he.forEach(function(yt){var Yt=C[yt];Yt&&x.on(yt,Yt)}),function(){x&&he.forEach(function(yt){var Yt=C[yt];Yt&&x.off(yt,Yt)})}},[x].concat(q0(Object.values(C)))),Wr(function(){x&&he.forEach(function(yt){var Yt=C[yt];Yt&&x.off(yt,Yt)})})},J0=function(x,C){var he=(0,M.useRef)(!0),yt=(0,M.useMemo)(function(){return Object.keys(C)},[C]);Kn(function(Yt){if(he.current){he.current=!1;return}var gr={};Yt.forEach(function(Sr){var Gr=yt[Sr];gr[Gr]=C[Gr]}),x==null||x.setOptions(gr)},Object.values(C))},Ag=function(x){var C=(0,M.useRef)(document.createElement("span"));return{portal:x?(0,Qp.createPortal)(x,C.current):null,dom:x?C.current:void 0}};function Fm(h,x){return Mg(h)||Tg(h,x)||Nm(h,x)||Bm()}function Bm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nm(h,x){if(h){if(typeof h=="string")return zm(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return zm(h,x)}}function zm(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Tg(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Mg(h){if(Array.isArray(h))return h}var yy=function(x){var C=x.onExport,he=x.onShow,yt=x.onHide,Yt=x.onAdd,gr=x.onRemove,Sr=x.imageType,Gr=x.btnIcon,Bn=x.btnText,ui=x.title,da=x.vertical,ro=x.position,Xo=x.className,Fo=x.style,ho=useScene(),ns=useState(),vs=Fm(ns,2),us=vs[0],Eu=vs[1],Nu=useMemo(function(){return getStyleText(Fo)},[Fo]),ul=useL7ComponentPortal(Gr),sf=ul.portal,Fu=ul.dom,il=useMemo(function(){return{btnText:Bn,title:ui,vertical:da,position:ro,className:Xo,imageType:Sr,style:Nu,btnIcon:Fu,onExport:C}},[Bn,ui,da,ro,Xo,Nu,Sr,C,Fu]);return useMount(function(){var Su=new L7ExportImage(omitBy(il,function(zu){return zu===void 0}));Eu(Su),ho.addControl(Su)}),useUnmount(function(){us&&(ho.removeControl(us),Eu(void 0))}),useL7ComponentUpdate(us,il),useL7ComponentEvent(us,{add:Yt,remove:gr,show:he,hide:yt}),React.createElement(React.Fragment,null,sf)};function _(h,x){return Jr(h)||br(h,x)||Oe(h,x)||F()}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(h,x){if(h){if(typeof h=="string")return $t(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return $t(h,x)}}function $t(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function br(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Jr(h){if(Array.isArray(h))return h}var Wn=function(x){var C=x.onShow,he=x.onHide,yt=x.onAdd,Yt=x.onRemove,gr=x.onFullscreenChange,Sr=x.btnIcon,Gr=x.btnText,Bn=x.title,ui=x.vertical,da=x.exitBtnIcon,ro=x.exitBtnText,Xo=x.exitTitle,Fo=x.position,ho=x.className,ns=x.style,vs=useScene(),us=useState(),Eu=_(us,2),Nu=Eu[0],ul=Eu[1],sf=useMemo(function(){return getStyleText(ns)},[ns]),Fu=useL7ComponentPortal(Sr),il=Fu.portal,Su=Fu.dom,zu=useL7ComponentPortal(da),uc=zu.portal,Ui=zu.dom,mi=useMemo(function(){return{btnText:Gr,title:Bn,vertical:ui,exitBtnText:ro,exitTitle:Xo,position:Fo,className:ho,style:sf,btnIcon:Su,exitBtnIcon:Ui}},[Gr,Bn,ui,ro,Xo,Fo,ho,sf,Su,Ui]);return useMount(function(){var Pi=new L7Fullscreen(omitBy(mi,function(Wa){return Wa===void 0}));ul(Pi),vs.addControl(Pi)}),useUnmount(function(){Nu&&(vs.removeControl(Nu),ul(void 0))}),useL7ComponentUpdate(Nu,mi),useL7ComponentEvent(Nu,{add:yt,remove:Yt,show:C,hide:he,fullscreenChange:gr}),React.createElement(React.Fragment,null,il,uc)};function li(h,x){return Ms(h)||So(h,x)||Xa(h,x)||Ri()}function Ri(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xa(h,x){if(h){if(typeof h=="string")return Ka(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ka(h,x)}}function Ka(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function So(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Ms(h){if(Array.isArray(h))return h}var bu=function(x){var C=x.transform,he=x.onShow,yt=x.onHide,Yt=x.onAdd,gr=x.onRemove,Sr=x.btnIcon,Gr=x.btnText,Bn=x.title,ui=x.vertical,da=x.position,ro=x.className,Xo=x.style,Fo=useScene(),ho=useState(),ns=li(ho,2),vs=ns[0],us=ns[1],Eu=useMemo(function(){return getStyleText(Xo)},[Xo]),Nu=useL7ComponentPortal(Sr),ul=Nu.portal,sf=Nu.dom,Fu=useMemo(function(){return{btnText:Gr,title:Bn,vertical:ui,position:da,className:ro,style:Eu,transform:C,btnIcon:sf}},[Gr,Bn,ui,da,ro,Eu,C,sf]);return useMount(function(){var il=new L7GeoLocate(omitBy(Fu,function(Su){return Su===void 0}));us(il),Fo.addControl(il)}),useUnmount(function(){vs&&(Fo.removeControl(vs),us(void 0))}),useL7ComponentUpdate(vs,Fu),useL7ComponentEvent(vs,{add:Yt,remove:gr,show:he,hide:yt}),React.createElement(React.Fragment,null,ul)};function ju(h,x){return fh(h)||sc(h,x)||Hu(h,x)||zl()}function zl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hu(h,x){if(h){if(typeof h=="string")return jl(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return jl(h,x)}}function jl(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function sc(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function fh(h){if(Array.isArray(h))return h}var Ud=function(x){var C=x.layers,he=x.popperPlacement,yt=x.popperTrigger,Yt=x.popperClassName,gr=x.btnIcon,Sr=x.btnText,Gr=x.title,Bn=x.vertical,ui=x.position,da=x.className,ro=x.style,Xo=x.onAdd,Fo=x.onRemove,ho=x.onShow,ns=x.onHide,vs=x.onPopperShow,us=x.onPopperHide,Eu=x.onSelectChange,Nu=useScene(),ul=useLayerList(),sf=useState(),Fu=ju(sf,2),il=Fu[0],Su=Fu[1],zu=useMemo(function(){return getStyleText(ro)},[ro]),uc=useL7ComponentPortal(gr),Ui=uc.portal,mi=uc.dom,Pi=useMemo(function(){return C!=null&&C.length?C.map(function(ko){return typeof ko=="string"?ul.find(function(Mo){return Mo.id===ko}):ko}).filter(function(ko){return!!ko}):ul},[C,ul]),Wa=useMemo(function(){return{layers:Pi,popperPlacement:he,popperTrigger:yt,popperClassName:Yt,btnText:Sr,title:Gr,vertical:Bn,position:ui,className:da,style:zu,btnIcon:mi}},[Pi,he,yt,Yt,Sr,Gr,Bn,ui,da,zu,mi]);return useMount(function(){var ko=new L7LayerSwitch(omitBy(Wa,function(Mo){return Mo===void 0}));Su(ko),Nu.addControl(ko)}),useUnmount(function(){il&&(Nu.removeControl(il),Su(void 0))}),useL7ComponentUpdate(il,Wa),useL7ComponentEvent(il,{add:Xo,remove:Fo,show:ho,hide:ns,popperShow:vs,popperHide:us,selectChange:Eu}),React.createElement(React.Fragment,null,Ui)},dd=h=>{nr&&(aa(h)||console.error(`useMount: parameter \`fn\` expected to be a function, but got "${typeof h}".`)),(0,M.useEffect)(()=>{h==null||h()},[])},cp=1,Lp=2;function Pg(h,x,C,he){var yt=C.length,Yt=yt,gr=!he;if(h==null)return!Yt;for(h=Object(h);yt--;){var Sr=C[yt];if(gr&&Sr[2]?Sr[1]!==h[Sr[0]]:!(Sr[0]in h))return!1}for(;++yt<Yt;){Sr=C[yt];var Gr=Sr[0],Bn=h[Gr],ui=Sr[1];if(gr&&Sr[2]){if(Bn===void 0&&!(Gr in h))return!1}else{var da=new Xf;if(he)var ro=he(Bn,ui,Gr,h,x,da);if(!(ro===void 0?Vd(ui,Bn,cp|Lp,he,da):ro))return!1}}return!0}var Zm=Pg;function em(h){return h===h&&!Tl(h)}var Og=em;function _y(h){for(var x=zo(h),C=x.length;C--;){var he=x[C],yt=h[he];x[C]=[he,yt,Og(yt)]}return x}var xy=_y;function Xv(h,x){return function(C){return C==null?!1:C[h]===x&&(x!==void 0||h in Object(C))}}var Um=Xv;function $m(h){var x=xy(h);return x.length==1&&x[0][2]?Um(x[0][0],x[0][1]):function(C){return C===h||Zm(C,h,x)}}var P_=$m,O_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E0=/^\w*$/;function I_(h,x){if(Er(h))return!1;var C=typeof h;return C=="number"||C=="symbol"||C=="boolean"||h==null||pn(h)?!0:E0.test(h)||!O_.test(h)||x!=null&&h in Object(x)}var Ig=I_,o2="Expected a function";function by(h,x){if(typeof h!="function"||x!=null&&typeof x!="function")throw new TypeError(o2);var C=function(){var he=arguments,yt=x?x.apply(this,he):he[0],Yt=C.cache;if(Yt.has(yt))return Yt.get(yt);var gr=h.apply(this,he);return C.cache=Yt.set(yt,gr)||Yt,gr};return C.cache=new(by.Cache||zc),C}by.Cache=zc;var s2=by,u2=500;function l2(h){var x=s2(h,function(he){return C.size===u2&&C.clear(),he}),C=x.cache;return x}var c2=l2,f2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ey=/\\(\\)?/g,Rg=c2(function(h){var x=[];return h.charCodeAt(0)===46&&x.push(""),h.replace(f2,function(C,he,yt,Yt){x.push(yt?Yt.replace(Ey,"$1"):he||C)}),x}),h2=Rg;function Sy(h,x){return Er(h)?h:Ig(h,x)?[h]:h2(Pt(h))}var S0=Sy,d2=1/0;function wy(h){if(typeof h=="string"||pn(h))return h;var x=h+"";return x=="0"&&1/h==-d2?"-0":x}var w0=wy;function p2(h,x){x=S0(x,h);for(var C=0,he=x.length;h!=null&&C<he;)h=h[w0(x[C++])];return C&&C==he?h:void 0}var tm=p2;function R_(h,x,C){var he=h==null?void 0:tm(h,x);return he===void 0?C:he}var v2=R_;function jm(h,x){return h!=null&&x in Object(h)}var L_=jm;function m2(h,x,C){x=S0(x,h);for(var he=-1,yt=x.length,Yt=!1;++he<yt;){var gr=w0(x[he]);if(!(Yt=h!=null&&C(h,gr)))break;h=h[gr]}return Yt||++he!=yt?Yt:(yt=h==null?0:h.length,!!yt&&Rf(yt)&&Nf(gr,yt)&&(Er(h)||wh(h)))}var Kv=m2;function Cy(h,x){return h!=null&&Kv(h,x,L_)}var Hm=Cy,k_=1,D_=2;function C0(h,x){return Ig(h)&&Og(x)?Um(w0(h),x):function(C){var he=v2(C,h);return he===void 0&&he===x?Hm(C,h):Vd(x,he,k_|D_)}}var F_=C0;function B_(h){return h}var Ay=B_;function g2(h){return function(x){return x==null?void 0:x[h]}}var y2=g2;function _2(h){return function(x){return tm(x,h)}}var x2=_2;function b2(h){return Ig(h)?y2(w0(h)):x2(h)}var E2=b2;function Ty(h){return typeof h=="function"?h:h==null?Ay:typeof h=="object"?Er(h)?F_(h[0],h[1]):P_(h):E2(h)}var Lg=Ty,S2="Expected a function";function kg(h){if(typeof h!="function")throw new TypeError(S2);return function(){var x=arguments;switch(x.length){case 0:return!h.call(this);case 1:return!h.call(this,x[0]);case 2:return!h.call(this,x[0],x[1]);case 3:return!h.call(this,x[0],x[1],x[2])}return!h.apply(this,x)}}var rm=kg;function w2(h,x,C,he){if(!Tl(h))return h;x=S0(x,h);for(var yt=-1,Yt=x.length,gr=Yt-1,Sr=h;Sr!=null&&++yt<Yt;){var Gr=w0(x[yt]),Bn=C;if(Gr==="__proto__"||Gr==="constructor"||Gr==="prototype")return h;if(yt!=gr){var ui=Sr[Gr];Bn=he?he(ui,Gr,Sr):void 0,Bn===void 0&&(Bn=Tl(ui)?ui:Nf(x[yt+1])?[]:{})}Za(Sr,Gr,Bn),Sr=Sr[Gr]}return h}var Dg=w2;function Fg(h,x,C){for(var he=-1,yt=x.length,Yt={};++he<yt;){var gr=x[he],Sr=tm(h,gr);C(Sr,gr)&&Dg(Yt,S0(gr,h),Sr)}return Yt}var nm=Fg;function N_(h,x){if(h==null)return{};var C=mr(rf(h),function(he){return[he]});return x=Lg(x),nm(h,C,function(he,yt){return x(he,yt[0])})}var My=N_;function $d(h,x){return My(h,rm(Lg(x)))}var Py=$d;function z_(h,x){return U_(h)||im(h,x)||Z_(h,x)||Lf()}function Lf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z_(h,x){if(h){if(typeof h=="string")return A0(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return A0(h,x)}}function A0(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function im(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function U_(h){if(Array.isArray(h))return h}var $_=function(x){var C=x.popperPlacement,he=x.btnText,yt=x.title,Yt=x.vertical,gr=x.position,Sr=x.className,Gr=x.options,Bn=x.popperTrigger,ui=x.popperClassName,da=x.btnIcon,ro=x.style,Xo=x.onAdd,Fo=x.onRemove,ho=x.onShow,ns=x.onHide,vs=x.onPopperShow,us=x.onPopperHide,Eu=x.onSelectChange,Nu=Us(),ul=(0,M.useState)(),sf=z_(ul,2),Fu=sf[0],il=sf[1],Su=(0,M.useMemo)(function(){return ni(ro)},[ro]),zu=Ag(da),uc=zu.portal,Ui=zu.dom,mi=(0,M.useMemo)(function(){return{popperPlacement:C,popperTrigger:Bn,popperClassName:ui,btnText:he,title:yt,vertical:Yt,position:gr,className:Sr,options:Gr,style:Su,btnIcon:Ui}},[Gr,C,Bn,ui,he,yt,Yt,gr,Sr,Su,Ui]);return dd(function(){var Pi=new v.MapTheme(Py(mi,function(Wa){return Wa===void 0}));il(Pi),Nu.addControl(Pi)}),Wr(function(){Fu&&(Nu.removeControl(Fu),il(void 0))}),J0(Fu,mi),Mv(Fu,{add:Xo,remove:Fo,show:ho,hide:ns,popperShow:vs,popperHide:us,selectChange:Eu}),M.createElement(M.Fragment,null,uc)};function j_(h,x){return G_(h)||Oy(h,x)||V_(h,x)||H_()}function H_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_(h,x){if(h){if(typeof h=="string")return Bg(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Bg(h,x)}}function Bg(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Oy(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function G_(h){if(Array.isArray(h))return h}var C2=function(x){var C=x.position,he=x.className,yt=x.style,Yt=x.onLocationChange,gr=x.transform,Sr=x.onAdd,Gr=x.onRemove,Bn=x.onShow,ui=x.onHide,da=useScene(),ro=useState(),Xo=j_(ro,2),Fo=Xo[0],ho=Xo[1],ns=useMemo(function(){return getStyleText(yt)},[yt]),vs=useMemo(function(){return{transform:gr,position:C,className:he,style:ns}},[gr,C,he,ns]);return useMount(function(){var us=new L7MouseLocation(omitBy(vs,function(Eu){return Eu===void 0}));ho(us),da.addControl(us)}),useUnmount(function(){Fo&&(da.removeControl(Fo),ho(void 0))}),useL7ComponentUpdate(Fo,vs),useL7ComponentEvent(Fo,{add:Sr,remove:Gr,show:Bn,hide:ui,locationChange:Yt}),null};function W_(h,x){return Y_(h)||K_(h,x)||X_(h,x)||Iy()}function Iy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_(h,x){if(h){if(typeof h=="string")return Ng(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ng(h,x)}}function Ng(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function K_(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Y_(h){if(Array.isArray(h))return h}var A2=function(x){var C=x.onShow,he=x.onHide,yt=x.onAdd,Yt=x.onRemove,gr=x.position,Sr=x.className,Gr=x.style,Bn=x.lockWidth,ui=x.maxWidth,da=x.metric,ro=x.imperial,Xo=x.updateWhenIdle,Fo=useScene(),ho=useState(),ns=W_(ho,2),vs=ns[0],us=ns[1],Eu=useMemo(function(){return getStyleText(Gr)},[Gr]),Nu=useMemo(function(){return{position:gr,className:Sr,style:Eu,lockWidth:Bn,maxWidth:ui,metric:da,imperial:ro,updateWhenIdle:Xo}},[gr,Sr,Eu,Bn,ui,da,ro,Xo]);return useMount(function(){var ul=new L7Scale(omitBy(Nu,function(sf){return sf===void 0}));us(ul),Fo.addControl(ul)}),useUnmount(function(){vs&&(Fo.removeControl(vs),us(void 0))}),useL7ComponentUpdate(vs,Nu),useL7ComponentEvent(vs,{add:yt,remove:Yt,show:C,hide:he}),null};function q_(h,x){return ex(h)||Ly(h,x)||J_(h,x)||Q_()}function Q_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J_(h,x){if(h){if(typeof h=="string")return Ry(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ry(h,x)}}function Ry(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Ly(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function ex(h){if(Array.isArray(h))return h}var T2=function(x){var C=x.onShow,he=x.onHide,yt=x.onAdd,Yt=x.onRemove,gr=x.position,Sr=x.name,Gr=x.className,Bn=x.style,ui=x.zoomInText,da=x.zoomOutText,ro=x.zoomInTitle,Xo=x.zoomOutTitle,Fo=useScene(),ho=useState(),ns=q_(ho,2),vs=ns[0],us=ns[1],Eu=useMemo(function(){return getStyleText(Bn)},[Bn]),Nu=useL7ComponentPortal(ui),ul=Nu.portal,sf=Nu.dom,Fu=useL7ComponentPortal(da),il=Fu.portal,Su=Fu.dom,zu=useMemo(function(){return{position:gr,name:Sr,className:Gr,zoomInTitle:ro,zoomOutTitle:Xo,style:Eu,zoomInText:sf,zoomOutText:Su}},[gr,Sr,Gr,Eu,ro,Xo,sf,Su]);return useMount(function(){var uc=new L7Zoom(omitBy(zu,function(Ui){return Ui===void 0}));us(uc),Fo.addControl(uc)}),useUnmount(function(){vs&&(Fo.removeControl(vs),us(void 0))}),useL7ComponentUpdate(vs,zu),useL7ComponentEvent(vs,{add:yt,remove:Yt,show:C,hide:he}),React.createElement(React.Fragment,null,ul,il)};function tx(h,x){return ix(h)||nx(h,x)||rx(h,x)||ky()}function ky(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rx(h,x){if(h){if(typeof h=="string")return Dy(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Dy(h,x)}}function Dy(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function nx(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function ix(h){if(Array.isArray(h))return h}var M2=function(x){var C=x.img,he=x.href,yt=x.position,Yt=x.className,gr=x.style,Sr=x.onShow,Gr=x.onHide,Bn=x.onAdd,ui=x.onRemove,da=useScene(),ro=useState(),Xo=tx(ro,2),Fo=Xo[0],ho=Xo[1],ns=useMemo(function(){return getStyleText(gr)},[gr]),vs=useMemo(function(){return{img:C,href:he,position:yt,className:Yt,style:ns}},[C,he,yt,Yt,ns]);return useMount(function(){var us=new L7Logo(omitBy(vs,function(Eu){return Eu===void 0}));ho(us),da.addControl(us)}),useUnmount(function(){Fo&&(da.removeControl(Fo),ho(void 0))}),useL7ComponentUpdate(Fo,vs),useL7ComponentEvent(Fo,{add:Bn,remove:ui,show:Sr,hide:Gr}),null},P2=function(x){var C=x.title,he=x.className,yt=x.style;return React.createElement("h1",{className:classNames("".concat(CLS_PREFIX,"_decoration"),he),style:yt},C)};function T0(h){return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},T0(h)}function Fy(h,x){var C=Object.keys(h);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(h);x&&(he=he.filter(function(yt){return Object.getOwnPropertyDescriptor(h,yt).enumerable})),C.push.apply(C,he)}return C}function By(h){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?Fy(Object(C),!0).forEach(function(he){ax(h,he,C[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(C)):Fy(Object(C)).forEach(function(he){Object.defineProperty(h,he,Object.getOwnPropertyDescriptor(C,he))})}return h}function ax(h,x,C){return x=ox(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function ox(h){var x=sx(h,"string");return T0(x)==="symbol"?x:String(x)}function sx(h,x){if(T0(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(T0(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var ux=(0,M.memo)(function(x){var C=Us(),he=(0,M.useRef)({props:x});he.current.props=x;var yt=(0,M.useMemo)(function(){var Yt=!1;M.Children.forEach(x.children,function(Gr){Gr&&(Yt=!0)});var gr=By(By({},x),{},{element:Yt?document.createElement("div"):null}),Sr=new v.Marker(gr);return Sr.on("click",function(Gr){var Bn,ui;(Bn=(ui=he.current.props).onClick)===null||Bn===void 0||Bn.call(ui,Gr)}),Sr},[]);return B(function(){yt.setLnglat(x.lngLat)},[x.lngLat]),(0,M.useEffect)(function(){return C.addMarker(yt),function(){yt.remove()}},[]),(0,Qp.createPortal)(x.children,yt.getElement())});function lx(h,x){return hx(h)||fx(h,x)||Ny(h,x)||cx()}function cx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ny(h,x){if(h){if(typeof h=="string")return zy(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return zy(h,x)}}function zy(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function fx(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function hx(h){if(Array.isArray(h))return h}var dx=function(x){var C=x.style,he=x.closeButton,yt=x.closeButtonOffsets,Yt=x.closeOnClick,gr=x.closeOnEsc,Sr=x.maxWidth,Gr=x.anchor,Bn=x.offsets,ui=x.stopPropagation,da=x.autoPan,ro=x.autoClose,Xo=x.followCursor,Fo=x.className,ho=x.lngLat,ns=x.children,vs=x.title,us=x.onOpen,Eu=x.onClose,Nu=x.onShow,ul=x.onHide,sf=useScene(),Fu=useState(),il=lx(Fu,2),Su=il[0],zu=il[1],uc=useMemo(function(){return getStyleText(C)},[C]),Ui=useL7ComponentPortal(ns),mi=Ui.portal,Pi=Ui.dom,Wa=useL7ComponentPortal(vs),ko=Wa.portal,Mo=Wa.dom,Xu=useMemo(function(){return{style:uc,closeButton:he,closeButtonOffsets:yt,closeOnClick:Yt,closeOnEsc:gr,maxWidth:Sr,anchor:Gr,offsets:Bn,stopPropagation:ui,autoPan:da,autoClose:ro,followCursor:Xo,className:Fo,lngLat:ho,html:Pi,title:Mo}},[uc,he,JSON.stringify(yt),Yt,gr,Sr,Gr,JSON.stringify(Bn),ui,da,ro,Xo,Fo,Pi,Mo,JSON.stringify(ho)]);return useMount(function(){var gc=new L7Popup(omitBy(Xu,function(uf){return uf===void 0}));zu(gc),sf.addPopup(gc)}),useUnmount(function(){Su&&(sf.removePopup(Su),zu(void 0))}),useL7ComponentUpdate(Su,Xu),useL7ComponentEvent(Su,{open:us,close:Eu,show:Nu,hide:ul}),React.createElement(React.Fragment,null,mi,ko)},Vm=function(x,C){if(x instanceof Function){var he=document.createElement(C);return function(){var gr=x.apply(void 0,arguments),Sr=Qp.createPortal(gr,he);return Qp.render(Sr,he),he}}else{var yt=document.createElement(C),Yt=Qp.createPortal(x,yt);return Qp.render(Yt,yt),yt}};function px(h){return gx(h)||mx(h)||Uy(h)||vx()}function vx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mx(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function gx(h){if(Array.isArray(h))return zg(h)}function yx(h,x){return xx(h)||_x(h,x)||Uy(h,x)||Zy()}function Zy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uy(h,x){if(h){if(typeof h=="string")return zg(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return zg(h,x)}}function zg(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function _x(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function xx(h){if(Array.isArray(h))return h}var bx=function(x){var C=x.style,he=x.closeButton,yt=x.closeButtonOffsets,Yt=x.closeOnClick,gr=x.closeOnEsc,Sr=x.maxWidth,Gr=x.anchor,Bn=x.offsets,ui=x.stopPropagation,da=x.autoPan,ro=x.autoClose,Xo=x.className,Fo=x.lngLat,ho=x.items,ns=x.trigger,vs=x.onOpen,us=x.onClose,Eu=x.onShow,Nu=x.onHide,ul=Us(),sf=(0,M.useState)(),Fu=yx(sf,2),il=Fu[0],Su=Fu[1],zu=(0,M.useMemo)(function(){return ni(C)},[C]),uc=ad(),Ui=(0,M.useMemo)(function(){var Pi=[];return ho.forEach(function(Wa){var ko;if(typeof Wa.layer=="string"){var Mo=uc.find(function(gc){return gc.id===Wa.layer});if(Mo)ko=Mo;else return}else ko=Wa.layer;var Xu=[];ko.isComposite?Xu.push.apply(Xu,px(ko.getInteractionSubLayers())):Xu.push(ko),Xu.forEach(function(gc){var uf,Md={layer:gc};Wa.title&&(Md.title=Vm(Wa.title,"div")),Wa.customContent&&(Md.customContent=Vm(Wa.customContent,"div")),(uf=Wa.fields)!==null&&uf!==void 0&&uf.length&&(Md.fields=Wa.fields.map(function(zh){if(typeof zh=="string")return zh;var Pd={field:zh.field,getValue:zh.getValue};return zh.formatField&&(Pd.formatField=Vm(zh.formatField,"span")),zh.formatValue&&(Pd.formatValue=Vm(zh.formatValue,"span")),Pd})),Pi.push(Md)})}),Pi},[uc,ho]),mi=(0,M.useMemo)(function(){return{style:zu,closeButton:he,closeButtonOffsets:yt,closeOnClick:Yt,closeOnEsc:gr,maxWidth:Sr,anchor:Gr,offsets:Bn,stopPropagation:ui,autoPan:da,autoClose:ro,followCursor:ns==="hover",className:Xo,lngLat:Fo,items:Ui,trigger:ns}},[zu,he,JSON.stringify(yt),Yt,gr,Sr,Gr,JSON.stringify(Bn),ui,da,ro,Xo,ns,JSON.stringify(Fo),Ui]);return dd(function(){var Pi=new v.LayerPopup(Py(mi,function(Wa){return Wa===void 0}));Su(Pi),ul.addPopup(Pi)}),Wr(function(){il&&(ul.removePopup(il),Su(void 0))}),J0(il,mi),Mv(il,{open:vs,close:us,show:Eu,hide:Nu}),M.createElement(M.Fragment,null)},$y="larkmap-context-menu",Ex="[object Map]",Sx="[object Set]",jy=Object.prototype,Hy=jy.hasOwnProperty;function Vy(h){if(h==null)return!0;if(fs(h)&&(Er(h)||typeof h=="string"||typeof h.splice=="function"||yu(h)||Yf(h)||wh(h)))return!h.length;var x=ld(h);if(x==Ex||x==Sx)return!h.size;if(Dt(h))return!To(h).length;for(var C in h)if(Hy.call(h,C))return!1;return!0}var M0=Vy,Gy=(0,M.memo)(function(x){var C=x.text,he=C===void 0?"":C,yt=x.onClick;return M0(he)?null:M.createElement("li",{className:$()("".concat($y,"__menu-item"),x==null?void 0:x.className),style:x==null?void 0:x.style,onClick:yt},he)});function Cx(h,x){return om(h)||am(h,x)||Tx(h,x)||Ax()}function Ax(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tx(h,x){if(h){if(typeof h=="string")return Wy(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Wy(h,x)}}function Wy(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function am(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function om(h){if(Array.isArray(h))return h}var sm=function(x){var C=Us(),he=(0,M.useState)({visible:!1,position:void 0}),yt=Cx(he,2),Yt=yt[0],gr=yt[1],Sr=(0,M.useMemo)(function(){return M.createElement("div",{className:$()("".concat($y),x==null?void 0:x.className),style:x==null?void 0:x.style},x==null?void 0:x.children)},[x]),Gr=function(da){var ro=da.lnglat,Xo=ro.lng,Fo=ro.lat;gr({visible:!0,position:{lng:Xo,lat:Fo}})},Bn=function(){var da=setTimeout(function(){da&&(clearTimeout(da),gr({visible:!1,position:void 0}))},0)};return(0,M.useEffect)(function(){return C&&(C.on("contextmenu",Gr),C.on("click",Bn)),function(){C.off("contextmenu",Gr),C.off("click",Bn)}},[C]),Yt.visible?M.createElement(ux,{lngLat:Yt.position,anchor:"top-left"},Sr):null};sm.Item=Gy;var um=g(38018),kp=g(1413),Xy=g(45191),Gm=g(97685),Ky=g(4942),Yy=g(91),qy=(0,M.createContext)({}),Qy=qy,Mx=g(71002),lm=g(86500),Jp=g(1350),cm=2,Jy=.16,Px=.05,e1=.05,O2=.15,t1=5,fm=4,r1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function n1(h){var x=h.r,C=h.g,he=h.b,yt=(0,lm.py)(x,C,he);return{h:yt.h*360,s:yt.s,v:yt.v}}function Wm(h){var x=h.r,C=h.g,he=h.b;return"#".concat((0,lm.vq)(x,C,he,!1))}function i1(h,x,C){var he=C/100,yt={r:(x.r-h.r)*he+h.r,g:(x.g-h.g)*he+h.g,b:(x.b-h.b)*he+h.b};return yt}function Ox(h,x,C){var he;return Math.round(h.h)>=60&&Math.round(h.h)<=240?he=C?Math.round(h.h)-cm*x:Math.round(h.h)+cm*x:he=C?Math.round(h.h)+cm*x:Math.round(h.h)-cm*x,he<0?he+=360:he>=360&&(he-=360),he}function Zg(h,x,C){if(h.h===0&&h.s===0)return h.s;var he;return C?he=h.s-Jy*x:x===fm?he=h.s+Jy:he=h.s+Px*x,he>1&&(he=1),C&&x===t1&&he>.1&&(he=.1),he<.06&&(he=.06),Number(he.toFixed(2))}function fp(h,x,C){var he;return C?he=h.v+e1*x:he=h.v-O2*x,he>1&&(he=1),Number(he.toFixed(2))}function Xm(h){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=[],he=(0,Jp.uA)(h),yt=t1;yt>0;yt-=1){var Yt=n1(he),gr=Wm((0,Jp.uA)({h:Ox(Yt,yt,!0),s:Zg(Yt,yt,!0),v:fp(Yt,yt,!0)}));C.push(gr)}C.push(Wm(he));for(var Sr=1;Sr<=fm;Sr+=1){var Gr=n1(he),Bn=Wm((0,Jp.uA)({h:Ox(Gr,Sr),s:Zg(Gr,Sr),v:fp(Gr,Sr)}));C.push(Bn)}return x.theme==="dark"?r1.map(function(ui){var da=ui.index,ro=ui.opacity,Xo=Wm(i1((0,Jp.uA)(x.backgroundColor||"#141414"),(0,Jp.uA)(C[da]),ro*100));return Xo}):C}var Km={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ep={},Ug={};Object.keys(Km).forEach(function(h){ep[h]=Xm(Km[h]),ep[h].primary=ep[h][5],Ug[h]=Xm(Km[h],{theme:"dark",backgroundColor:"#141414"}),Ug[h].primary=Ug[h][5]});var I2=ep.red,Ix=ep.volcano,Rx=ep.gold,R2=ep.orange,L2=ep.yellow,a1=ep.lime,k2=ep.green,D2=ep.cyan,F2=ep.blue,B2=ep.geekblue,Ym=ep.purple,qm=ep.magenta,N2=ep.grey,Lx=g(80334),kx=g(44958);function Dx(h,x){(0,Lx.ZP)(h,"[@ant-design/icons] ".concat(x))}function Pv(h){return(0,Mx.Z)(h)==="object"&&typeof h.name=="string"&&typeof h.theme=="string"&&((0,Mx.Z)(h.icon)==="object"||typeof h.icon=="function")}function o1(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(h).reduce(function(x,C){var he=h[C];switch(C){case"class":x.className=he,delete x.class;break;default:x[C]=he}return x},{})}function $g(h,x,C){return C?M.createElement(h.tag,(0,kp.Z)((0,kp.Z)({key:x},o1(h.attrs)),C),(h.children||[]).map(function(he,yt){return $g(he,"".concat(x,"-").concat(h.tag,"-").concat(yt))})):M.createElement(h.tag,(0,kp.Z)({key:x},o1(h.attrs)),(h.children||[]).map(function(he,yt){return $g(he,"".concat(x,"-").concat(h.tag,"-").concat(yt))}))}function s1(h){return Xm(h)[0]}function u1(h){return h?Array.isArray(h)?h:[h]:[]}var z2={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},Fx=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Bx=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fx,C=(0,M.useContext)(Qy),he=C.csp;(0,M.useEffect)(function(){(0,kx.hq)(x,"@ant-design-icons",{prepend:!0,csp:he})},[])},Nx=["icon","className","onClick","style","primaryColor","secondaryColor"],hm={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function zx(h){var x=h.primaryColor,C=h.secondaryColor;hm.primaryColor=x,hm.secondaryColor=C||s1(x),hm.calculated=!!C}function Zx(){return(0,kp.Z)({},hm)}var Qm=function(x){var C=x.icon,he=x.className,yt=x.onClick,Yt=x.style,gr=x.primaryColor,Sr=x.secondaryColor,Gr=(0,Yy.Z)(x,Nx),Bn=hm;if(gr&&(Bn={primaryColor:gr,secondaryColor:Sr||s1(gr)}),Bx(),Dx(Pv(C),"icon should be icon definiton, but got ".concat(C)),!Pv(C))return null;var ui=C;return ui&&typeof ui.icon=="function"&&(ui=(0,kp.Z)((0,kp.Z)({},ui),{},{icon:ui.icon(Bn.primaryColor,Bn.secondaryColor)})),$g(ui.icon,"svg-".concat(ui.name),(0,kp.Z)({className:he,onClick:yt,style:Yt,"data-icon":ui.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Gr))};Qm.displayName="IconReact",Qm.getTwoToneColors=Zx,Qm.setTwoToneColors=zx;var jg=Qm;function l1(h){var x=u1(h),C=(0,Gm.Z)(x,2),he=C[0],yt=C[1];return jg.setTwoToneColors({primaryColor:he,secondaryColor:yt})}function Ux(){var h=jg.getTwoToneColors();return h.calculated?[h.primaryColor,h.secondaryColor]:h.primaryColor}var $x=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];l1("#1890ff");var Jm=M.forwardRef(function(h,x){var C,he=h.className,yt=h.icon,Yt=h.spin,gr=h.rotate,Sr=h.tabIndex,Gr=h.onClick,Bn=h.twoToneColor,ui=(0,Yy.Z)(h,$x),da=M.useContext(Qy),ro=da.prefixCls,Xo=ro===void 0?"anticon":ro,Fo=da.rootClassName,ho=$()(Fo,Xo,(C={},(0,Ky.Z)(C,"".concat(Xo,"-").concat(yt.name),!!yt.name),(0,Ky.Z)(C,"".concat(Xo,"-spin"),!!Yt||yt.name==="loading"),C),he),ns=Sr;ns===void 0&&Gr&&(ns=-1);var vs=gr?{msTransform:"rotate(".concat(gr,"deg)"),transform:"rotate(".concat(gr,"deg)")}:void 0,us=u1(Bn),Eu=(0,Gm.Z)(us,2),Nu=Eu[0],ul=Eu[1];return M.createElement("span",(0,kp.Z)((0,kp.Z)({role:"img","aria-label":yt.name},ui),{},{ref:x,tabIndex:ns,onClick:Gr,className:ho}),M.createElement(jg,{icon:yt,primaryColor:Nu,secondaryColor:ul,style:vs}))});Jm.displayName="AntdIcon",Jm.getTwoToneColor=Ux,Jm.setTwoToneColor=l1;var jx=Jm,c1=function(x,C){return M.createElement(jx,(0,kp.Z)((0,kp.Z)({},x),{},{ref:C,icon:Xy.Z}))};c1.displayName="SearchOutlined";var Hx=M.forwardRef(c1),Vx=g(23279),Gx=g.n(Vx);function Wx(h,x){var C;nr&&(aa(h)||console.error(`useDebounceFn expected parameter is a function, got ${typeof h}`));const he=Yi(h),yt=(C=x==null?void 0:x.wait)!==null&&C!==void 0?C:1e3,Yt=(0,M.useMemo)(()=>Gx()((...gr)=>he.current(...gr),yt,x),[]);return Wr(()=>{Yt.cancel()}),{run:Yt,cancel:Yt.cancel,flush:Yt.flush}}var eg=Wx,Hg=g(21990);function f1(h){var x=h==null?0:h.length;return x?h[x-1]:void 0}var h1=f1;function d1(h,x,C){var he=-1,yt=h.length;x<0&&(x=-x>yt?0:yt+x),C=C>yt?yt:C,C<0&&(C+=yt),yt=x>C?0:C-x>>>0,x>>>=0;for(var Yt=Array(yt);++he<yt;)Yt[he]=h[he+x];return Yt}var Xx=d1;function p1(h,x){return x.length<2?h:tm(h,Xx(x,0,-1))}var v1=p1;function Kx(h,x){return x=S0(x,h),h=v1(h,x),h==null||delete h[w0(h1(x))]}var m1=Kx,g1="[object Object]",Yx=Function.prototype,y1=Object.prototype,_1=Yx.toString,qx=y1.hasOwnProperty,Qx=_1.call(Object);function Jx(h){if(!ne(h)||J(h)!=g1)return!1;var x=Gu(h);if(x===null)return!0;var C=qx.call(x,"constructor")&&x.constructor;return typeof C=="function"&&C instanceof C&&_1.call(C)==Qx}var eb=Jx;function x1(h){return eb(h)?void 0:h}var b1=x1,E1=et?et.isConcatSpreadable:void 0;function S1(h){return Er(h)||wh(h)||!!(E1&&h&&h[E1])}var w1=S1;function dm(h,x,C,he,yt){var Yt=-1,gr=h.length;for(C||(C=w1),yt||(yt=[]);++Yt<gr;){var Sr=h[Yt];x>0&&C(Sr)?x>1?dm(Sr,x-1,C,he,yt):cs(yt,Sr):he||(yt[yt.length]=Sr)}return yt}var tb=dm;function rb(h){var x=h==null?0:h.length;return x?tb(h,1):[]}var nb=rb;function Z2(h,x,C){switch(C.length){case 0:return h.call(x);case 1:return h.call(x,C[0]);case 2:return h.call(x,C[0],C[1]);case 3:return h.call(x,C[0],C[1],C[2])}return h.apply(x,C)}var C1=Z2,Vg=Math.max;function ib(h,x,C){return x=Vg(x===void 0?h.length-1:x,0),function(){for(var he=arguments,yt=-1,Yt=Vg(he.length-x,0),gr=Array(Yt);++yt<Yt;)gr[yt]=he[x+yt];yt=-1;for(var Sr=Array(x+1);++yt<x;)Sr[yt]=he[yt];return Sr[x]=C(gr),C1(h,this,Sr)}}var A1=ib;function T1(h){return function(){return h}}var M1=T1,P1=ia?function(h,x){return ia(h,"toString",{configurable:!0,enumerable:!1,value:M1(x),writable:!0})}:Ay,O1=P1,I1=800,P0=16,R1=Date.now;function L1(h){var x=0,C=0;return function(){var he=R1(),yt=P0-(he-C);if(C=he,yt>0){if(++x>=I1)return arguments[0]}else x=0;return h.apply(void 0,arguments)}}var k1=L1,D1=k1(O1),ab=D1;function F1(h){return ab(A1(h,void 0,nb),h+"")}var B1=F1,ob=1,N1=2,z1=4,sb=B1(function(h,x){var C={};if(h==null)return C;var he=!1;x=mr(x,function(Yt){return Yt=S0(Yt,h),he||(he=Yt.length>1),Yt}),$a(h,rf(h),C),he&&(C=Un(C,ob|N1|z1,b1));for(var yt=x.length;yt--;)m1(C,x[yt]);return C}),pm=sb;function O0(h){return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},O0(h)}var ub=["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","disabled","notFoundContent","showArrow"];function hp(){return hp=Object.assign?Object.assign.bind():function(h){for(var x=1;x<arguments.length;x++){var C=arguments[x];for(var he in C)Object.prototype.hasOwnProperty.call(C,he)&&(h[he]=C[he])}return h},hp.apply(this,arguments)}function dp(h,x,C){return x=ev(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function ev(h){var x=lb(h,"string");return O0(x)==="symbol"?x:String(x)}function lb(h,x){if(O0(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(O0(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function cb(h,x){if(h==null)return{};var C=fb(h,x),he,yt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(yt=0;yt<Yt.length;yt++)he=Yt[yt],!(x.indexOf(he)>=0)&&Object.prototype.propertyIsEnumerable.call(h,he)&&(C[he]=h[he])}return C}function fb(h,x){if(h==null)return{};var C={},he=Object.keys(h),yt,Yt;for(Yt=0;Yt<he.length;Yt++)yt=he[Yt],!(x.indexOf(yt)>=0)&&(C[yt]=h[yt]);return C}var Z1="SECRET_COMBOBOX_MODE_DO_NOT_USE",U1="larkmap-select",hb=function(x,C){var he=x.prefixCls,yt=x.bordered,Yt=yt===void 0?!0:yt,gr=x.className,Sr=x.getPopupContainer,Gr=x.dropdownClassName,Bn=x.popupClassName,ui=x.listHeight,da=ui===void 0?256:ui,ro=x.placement,Xo=x.listItemHeight,Fo=Xo===void 0?24:Xo,ho=x.disabled,ns=x.notFoundContent,vs=x.showArrow,us=cb(x,ub),Eu=M.useMemo(function(){var sf=us,Fu=sf.mode;if(Fu!=="combobox")return Fu===Z1?"combobox":Fu},[us]),Nu=pm(us,"suffixIcon","itemIcon"),ul=$()(dp({},"".concat(U1,"-borderless"),!Yt),gr);return M.createElement(Hg.ZP,hp({ref:C},Nu,{listHeight:da,listItemHeight:Fo,mode:Eu,prefixCls:U1,placement:ro,notFoundContent:ns!=null?ns:"\u5F53\u524D\u65E0\u6570\u636E",className:ul,getPopupContainer:Sr,dropdownClassName:Bn,showArrow:vs,disabled:ho}))},vm=M.forwardRef(hb);vm.SECRET_COMBOBOX_MODE_DO_NOT_USE=Z1,vm.Option=Hg.Wx,vm.OptGroup=Hg.Xo;var $1=vm,Gg="larkmap-location-search",j1="https://restapi.amap.com/v3/assistant/inputtips";function Yv(h){return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Yv(h)}var db=["searchParams","showDistrict","showAddress","onSearchFinish","onChange"];function Wg(){return Wg=Object.assign?Object.assign.bind():function(h){for(var x=1;x<arguments.length;x++){var C=arguments[x];for(var he in C)Object.prototype.hasOwnProperty.call(C,he)&&(h[he]=C[he])}return h},Wg.apply(this,arguments)}function tg(){"use strict";tg=function(){return h};var h={},x=Object.prototype,C=x.hasOwnProperty,he=Object.defineProperty||function(Ui,mi,Pi){Ui[mi]=Pi.value},yt=typeof Symbol=="function"?Symbol:{},Yt=yt.iterator||"@@iterator",gr=yt.asyncIterator||"@@asyncIterator",Sr=yt.toStringTag||"@@toStringTag";function Gr(Ui,mi,Pi){return Object.defineProperty(Ui,mi,{value:Pi,enumerable:!0,configurable:!0,writable:!0}),Ui[mi]}try{Gr({},"")}catch(Ui){Gr=function(Pi,Wa,ko){return Pi[Wa]=ko}}function Bn(Ui,mi,Pi,Wa){var ko=mi&&mi.prototype instanceof ro?mi:ro,Mo=Object.create(ko.prototype),Xu=new Su(Wa||[]);return he(Mo,"_invoke",{value:ul(Ui,Pi,Xu)}),Mo}function ui(Ui,mi,Pi){try{return{type:"normal",arg:Ui.call(mi,Pi)}}catch(Wa){return{type:"throw",arg:Wa}}}h.wrap=Bn;var da={};function ro(){}function Xo(){}function Fo(){}var ho={};Gr(ho,Yt,function(){return this});var ns=Object.getPrototypeOf,vs=ns&&ns(ns(zu([])));vs&&vs!==x&&C.call(vs,Yt)&&(ho=vs);var us=Fo.prototype=ro.prototype=Object.create(ho);function Eu(Ui){["next","throw","return"].forEach(function(mi){Gr(Ui,mi,function(Pi){return this._invoke(mi,Pi)})})}function Nu(Ui,mi){function Pi(ko,Mo,Xu,gc){var uf=ui(Ui[ko],Ui,Mo);if(uf.type!=="throw"){var Md=uf.arg,zh=Md.value;return zh&&Yv(zh)=="object"&&C.call(zh,"__await")?mi.resolve(zh.__await).then(function(Pd){Pi("next",Pd,Xu,gc)},function(Pd){Pi("throw",Pd,Xu,gc)}):mi.resolve(zh).then(function(Pd){Md.value=Pd,Xu(Md)},function(Pd){return Pi("throw",Pd,Xu,gc)})}gc(uf.arg)}var Wa;he(this,"_invoke",{value:function(Mo,Xu){function gc(){return new mi(function(uf,Md){Pi(Mo,Xu,uf,Md)})}return Wa=Wa?Wa.then(gc,gc):gc()}})}function ul(Ui,mi,Pi){var Wa="suspendedStart";return function(ko,Mo){if(Wa==="executing")throw new Error("Generator is already running");if(Wa==="completed"){if(ko==="throw")throw Mo;return uc()}for(Pi.method=ko,Pi.arg=Mo;;){var Xu=Pi.delegate;if(Xu){var gc=sf(Xu,Pi);if(gc){if(gc===da)continue;return gc}}if(Pi.method==="next")Pi.sent=Pi._sent=Pi.arg;else if(Pi.method==="throw"){if(Wa==="suspendedStart")throw Wa="completed",Pi.arg;Pi.dispatchException(Pi.arg)}else Pi.method==="return"&&Pi.abrupt("return",Pi.arg);Wa="executing";var uf=ui(Ui,mi,Pi);if(uf.type==="normal"){if(Wa=Pi.done?"completed":"suspendedYield",uf.arg===da)continue;return{value:uf.arg,done:Pi.done}}uf.type==="throw"&&(Wa="completed",Pi.method="throw",Pi.arg=uf.arg)}}}function sf(Ui,mi){var Pi=mi.method,Wa=Ui.iterator[Pi];if(Wa===void 0)return mi.delegate=null,Pi==="throw"&&Ui.iterator.return&&(mi.method="return",mi.arg=void 0,sf(Ui,mi),mi.method==="throw")||Pi!=="return"&&(mi.method="throw",mi.arg=new TypeError("The iterator does not provide a '"+Pi+"' method")),da;var ko=ui(Wa,Ui.iterator,mi.arg);if(ko.type==="throw")return mi.method="throw",mi.arg=ko.arg,mi.delegate=null,da;var Mo=ko.arg;return Mo?Mo.done?(mi[Ui.resultName]=Mo.value,mi.next=Ui.nextLoc,mi.method!=="return"&&(mi.method="next",mi.arg=void 0),mi.delegate=null,da):Mo:(mi.method="throw",mi.arg=new TypeError("iterator result is not an object"),mi.delegate=null,da)}function Fu(Ui){var mi={tryLoc:Ui[0]};1 in Ui&&(mi.catchLoc=Ui[1]),2 in Ui&&(mi.finallyLoc=Ui[2],mi.afterLoc=Ui[3]),this.tryEntries.push(mi)}function il(Ui){var mi=Ui.completion||{};mi.type="normal",delete mi.arg,Ui.completion=mi}function Su(Ui){this.tryEntries=[{tryLoc:"root"}],Ui.forEach(Fu,this),this.reset(!0)}function zu(Ui){if(Ui){var mi=Ui[Yt];if(mi)return mi.call(Ui);if(typeof Ui.next=="function")return Ui;if(!isNaN(Ui.length)){var Pi=-1,Wa=function ko(){for(;++Pi<Ui.length;)if(C.call(Ui,Pi))return ko.value=Ui[Pi],ko.done=!1,ko;return ko.value=void 0,ko.done=!0,ko};return Wa.next=Wa}}return{next:uc}}function uc(){return{value:void 0,done:!0}}return Xo.prototype=Fo,he(us,"constructor",{value:Fo,configurable:!0}),he(Fo,"constructor",{value:Xo,configurable:!0}),Xo.displayName=Gr(Fo,Sr,"GeneratorFunction"),h.isGeneratorFunction=function(Ui){var mi=typeof Ui=="function"&&Ui.constructor;return!!mi&&(mi===Xo||(mi.displayName||mi.name)==="GeneratorFunction")},h.mark=function(Ui){return Object.setPrototypeOf?Object.setPrototypeOf(Ui,Fo):(Ui.__proto__=Fo,Gr(Ui,Sr,"GeneratorFunction")),Ui.prototype=Object.create(us),Ui},h.awrap=function(Ui){return{__await:Ui}},Eu(Nu.prototype),Gr(Nu.prototype,gr,function(){return this}),h.AsyncIterator=Nu,h.async=function(Ui,mi,Pi,Wa,ko){ko===void 0&&(ko=Promise);var Mo=new Nu(Bn(Ui,mi,Pi,Wa),ko);return h.isGeneratorFunction(mi)?Mo:Mo.next().then(function(Xu){return Xu.done?Xu.value:Mo.next()})},Eu(us),Gr(us,Sr,"Generator"),Gr(us,Yt,function(){return this}),Gr(us,"toString",function(){return"[object Generator]"}),h.keys=function(Ui){var mi=Object(Ui),Pi=[];for(var Wa in mi)Pi.push(Wa);return Pi.reverse(),function ko(){for(;Pi.length;){var Mo=Pi.pop();if(Mo in mi)return ko.value=Mo,ko.done=!1,ko}return ko.done=!0,ko}},h.values=zu,Su.prototype={constructor:Su,reset:function(mi){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(il),!mi)for(var Pi in this)Pi.charAt(0)==="t"&&C.call(this,Pi)&&!isNaN(+Pi.slice(1))&&(this[Pi]=void 0)},stop:function(){this.done=!0;var mi=this.tryEntries[0].completion;if(mi.type==="throw")throw mi.arg;return this.rval},dispatchException:function(mi){if(this.done)throw mi;var Pi=this;function Wa(Md,zh){return Xu.type="throw",Xu.arg=mi,Pi.next=Md,zh&&(Pi.method="next",Pi.arg=void 0),!!zh}for(var ko=this.tryEntries.length-1;ko>=0;--ko){var Mo=this.tryEntries[ko],Xu=Mo.completion;if(Mo.tryLoc==="root")return Wa("end");if(Mo.tryLoc<=this.prev){var gc=C.call(Mo,"catchLoc"),uf=C.call(Mo,"finallyLoc");if(gc&&uf){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0);if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}else if(gc){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0)}else{if(!uf)throw new Error("try statement without catch or finally");if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}}}},abrupt:function(mi,Pi){for(var Wa=this.tryEntries.length-1;Wa>=0;--Wa){var ko=this.tryEntries[Wa];if(ko.tryLoc<=this.prev&&C.call(ko,"finallyLoc")&&this.prev<ko.finallyLoc){var Mo=ko;break}}Mo&&(mi==="break"||mi==="continue")&&Mo.tryLoc<=Pi&&Pi<=Mo.finallyLoc&&(Mo=null);var Xu=Mo?Mo.completion:{};return Xu.type=mi,Xu.arg=Pi,Mo?(this.method="next",this.next=Mo.finallyLoc,da):this.complete(Xu)},complete:function(mi,Pi){if(mi.type==="throw")throw mi.arg;return mi.type==="break"||mi.type==="continue"?this.next=mi.arg:mi.type==="return"?(this.rval=this.arg=mi.arg,this.method="return",this.next="end"):mi.type==="normal"&&Pi&&(this.next=Pi),da},finish:function(mi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.finallyLoc===mi)return this.complete(Wa.completion,Wa.afterLoc),il(Wa),da}},catch:function(mi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.tryLoc===mi){var ko=Wa.completion;if(ko.type==="throw"){var Mo=ko.arg;il(Wa)}return Mo}}throw new Error("illegal catch attempt")},delegateYield:function(mi,Pi,Wa){return this.delegate={iterator:zu(mi),resultName:Pi,nextLoc:Wa},this.method==="next"&&(this.arg=void 0),da}},h}function pb(h){return vb(h)||rg(h)||Kg(h)||Xg()}function Xg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rg(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function vb(h){if(Array.isArray(h))return mm(h)}function H1(h,x){var C=Object.keys(h);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(h);x&&(he=he.filter(function(yt){return Object.getOwnPropertyDescriptor(h,yt).enumerable})),C.push.apply(C,he)}return C}function V1(h){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?H1(Object(C),!0).forEach(function(he){mb(h,he,C[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(C)):H1(Object(C)).forEach(function(he){Object.defineProperty(h,he,Object.getOwnPropertyDescriptor(C,he))})}return h}function mb(h,x,C){return x=gb(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function gb(h){var x=G1(h,"string");return Yv(x)==="symbol"?x:String(x)}function G1(h,x){if(Yv(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(Yv(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function W1(h,x,C,he,yt,Yt,gr){try{var Sr=h[Yt](gr),Gr=Sr.value}catch(Bn){C(Bn);return}Sr.done?x(Gr):Promise.resolve(Gr).then(he,yt)}function yb(h){return function(){var x=this,C=arguments;return new Promise(function(he,yt){var Yt=h.apply(x,C);function gr(Gr){W1(Yt,he,yt,gr,Sr,"next",Gr)}function Sr(Gr){W1(Yt,he,yt,gr,Sr,"throw",Gr)}gr(void 0)})}}function X1(h,x){return tv(h)||Yg(h,x)||Kg(h,x)||_b()}function _b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kg(h,x){if(h){if(typeof h=="string")return mm(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return mm(h,x)}}function mm(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Yg(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function tv(h){if(Array.isArray(h))return h}function Tp(h,x){if(h==null)return{};var C=qg(h,x),he,yt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(yt=0;yt<Yt.length;yt++)he=Yt[yt],!(x.indexOf(he)>=0)&&Object.prototype.propertyIsEnumerable.call(h,he)&&(C[he]=h[he])}return C}function qg(h,x){if(h==null)return{};var C={},he=Object.keys(h),yt,Yt;for(Yt=0;Yt<he.length;Yt++)yt=he[Yt],!(x.indexOf(yt)>=0)&&(C[yt]=h[yt]);return C}var Qg=$1.Option,K1=function(x){var C=x.searchParams,he=x.showDistrict,yt=x.showAddress,Yt=x.onSearchFinish,gr=x.onChange,Sr=Tp(x,db),Gr=(0,M.useState)([]),Bn=X1(Gr,2),ui=Bn[0],da=Bn[1];(0,M.useEffect)(function(){Yt==null||Yt(ui)},[Yt,ui]);var ro=eg(function(){var ho=yb(tg().mark(function ns(vs){var us,Eu,Nu,ul;return tg().wrap(function(Fu){for(;;)switch(Fu.prev=Fu.next){case 0:if(vs){Fu.next=3;break}return da([]),Fu.abrupt("return");case 3:return Nu=um.stringifyUrl({url:j1,query:V1(V1({},C),{},{keywords:[].concat(pb(((us=C.keywords)!==null&&us!==void 0?us:"").split("|")),[vs]).filter(function(il){return!!il}).join("|")})}),Fu.next=6,fetch(Nu);case 6:return Fu.next=8,Fu.sent.json();case 8:ul=Fu.sent,da(((Eu=ul==null?void 0:ul.tips)!==null&&Eu!==void 0?Eu:[]).filter(function(il){return il.location&&il.location.length}).map(function(il){var Su=il.location.split(","),zu=X1(Su,2),uc=zu[0],Ui=zu[1];return il.longitude=+uc,il.latitude=+Ui,il}));case 10:case"end":return Fu.stop()}},ns)}));return function(ns){return ho.apply(this,arguments)}}(),{wait:1e3}),Xo=ro.run,Fo=(0,M.useCallback)(function(ho){var ns=ho&&ui.find(function(vs){return vs.name===ho});gr==null||gr(ho||void 0,ns||void 0)},[gr,ui]);return M.createElement($1,Wg({className:"".concat(Gg),onSearch:Xo,onChange:Fo,clearIcon:function(){return null}},Sr),ui.map(function(ho){var ns="".concat(he?ho.district:"").concat(yt?ho.address:"");return M.createElement(Qg,{key:ho.id,value:ho.name},M.createElement("div",{title:ho.name,className:"".concat(Gg,"__option-name")},ho.name),ns&&M.createElement("div",{title:ns,className:"".concat(Gg,"__option-tip")},ns))}))};K1.defaultProps={placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u5730\u540D",showSearch:!0,allowClear:!0,suffixIcon:M.createElement(Hx,null),filterOption:!1,defaultActiveFirstOption:!1,showAddress:!0,showDistrict:!0};var Jg="larkmap-legend-icon",qv=function(x){var C=x.labels,he=x.icons,yt=x.className,Yt=x.style;return React.createElement("div",{className:classnames("".concat(Jg),yt),style:Yt},C.map(function(gr,Sr){return React.createElement("div",{key:gr,className:"".concat(Jg,"__content")},React.createElement("img",{src:he[Sr],className:"".concat(Jg,"__content__icon")}),React.createElement("div",null,gr))}))};function xb(h){return Pe(h)&&h!=+h}var Y1=xb,ng=0;function q1(h){var x=++ng;return Pt(h)+x}var Oh=q1;function gm(h){return bb(h)||Q1(h)||Eb(h)||mc()}function mc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q1(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function bb(h){if(Array.isArray(h))return J1(h)}function U2(h,x){return H2(h)||j2(h,x)||Eb(h,x)||$2()}function $2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eb(h,x){if(h){if(typeof h=="string")return J1(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return J1(h,x)}}function J1(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function j2(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function H2(h){if(Array.isArray(h))return h}var ey="larkmap-legend-proportion",V2=function(x){var C=x.labels,he=x.fillColor,yt=he===void 0?"#f9f9f9":he,Yt=x.className,gr=x.style,Sr=U2(C,2),Gr=Sr[0],Bn=Sr[1],ui=[86,62,38,24];function da(ho,ns){var vs=(ns-ho)/4,us=Math.floor(ho+vs),Eu=Math.floor(ns-vs);return[us,Eu]}function ro(){var ho=Gr,ns=Bn;(!Pe(ho)||!Pe(ho))&&(ho=ns=0),Y1(ho)&&(ho=0),Y1(ns)&&(ns=0);var vs=da(ho,ns),us=[{prefix:"MIN:",val:ho}].concat(gm(vs),[{prefix:"MAX:",val:ns}]);return us}function Xo(){return M.createElement("div",{className:"".concat(ey,"__circlebox"),style:{width:ui[0]}},ui.map(function(ho){return M.createElement("div",{key:ho,style:{width:ho,height:ho,background:yt},className:"".concat(ey,"__circlebox__item")})}))}function Fo(){return M.createElement("div",{style:{height:ui[0]}},ro().reverse().map(function(ho){return M.createElement("div",{key:Oh(),className:"".concat(ey,"__labelitem")},ho==null?void 0:ho.prefix,typeof ho=="number"?ho:ho.val)}))}return M.createElement("div",{className:$()("".concat(ey),Yt),style:gr},M.createElement(Xo,null),M.createElement(Fo,null))};V2.defaultProps={fillColor:"#f9f9f9"};var G2=g(6767),e_=g.n(G2);function Sb(h){return function(x,C,he){for(var yt=-1,Yt=Object(x),gr=he(x),Sr=gr.length;Sr--;){var Gr=gr[h?Sr:++yt];if(C(Yt[Gr],Gr,Yt)===!1)break}return x}}var W2=Sb,X2=W2(),K2=X2;function Y2(h,x){return h&&K2(h,x,zo)}var q2=Y2;function Q2(h,x){return function(C,he){if(C==null)return C;if(!fs(C))return h(C,he);for(var yt=C.length,Yt=x?yt:-1,gr=Object(C);(x?Yt--:++Yt<yt)&&he(gr[Yt],Yt,gr)!==!1;);return C}}var J2=Q2,eE=J2(q2),tE=eE;function rE(h){return typeof h=="function"?h:Ay}var nE=rE;function iE(h,x){var C=Er(h)?On:tE;return C(h,nE(x))}var aE=iE,oE=/\s/;function wb(h){for(var x=h.length;x--&&oE.test(h.charAt(x)););return x}var t_=wb,r_=/^\s+/;function ig(h){return h&&h.slice(0,t_(h)+1).replace(r_,"")}var ag=ig,ty=0/0,Cb=/^[-+]0x[0-9a-f]+$/i,ry=/^0b[01]+$/i,Ab=/^0o[0-7]+$/i,Tb=parseInt;function I0(h){if(typeof h=="number")return h;if(pn(h))return ty;if(Tl(h)){var x=typeof h.valueOf=="function"?h.valueOf():h;h=Tl(x)?x+"":x}if(typeof h!="string")return h===0?h:+h;h=ag(h);var C=ry.test(h);return C||Ab.test(h)?Tb(h.slice(2),C?2:8):Cb.test(h)?ty:+h}var n_=I0,i_=1/0,a_=17976931348623157e292;function sE(h){if(!h)return h===0?h:0;if(h=n_(h),h===i_||h===-i_){var x=h<0?-1:1;return x*a_}return h===h?h:0}var Mb=sE;function Pb(h){var x=Mb(h),C=x%1;return x===x?C?x-C:x:0}var Ov=Pb,kf=Le.isFinite,Ob=Math.min;function Ib(h){var x=Math[h];return function(C,he){if(C=n_(C),he=he==null?0:Ob(Ov(he),292),he&&kf(C)){var yt=(Pt(C)+"e").split("e"),Yt=x(yt[0]+"e"+(+yt[1]+he));return yt=(Pt(Yt)+"e").split("e"),+(yt[0]+"e"+(+yt[1]-he))}return x(C)}}var o_=Ib,ny=o_("round"),iy=ny,s_=function(x,C){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5,yt=[x],Yt=e_()(x).object(),gr=e_()(C).object();if(he<2)return he<1?[]:yt;var Sr={r:(Yt.r-gr.r)/(he-1),g:(Yt.g-gr.g)/(he-1),b:(Yt.b-gr.b)/(he-1)};return aE(new Array(he-2),function(Gr,Bn){return yt.push(e_()({r:iy(Yt.r-Sr.r*(Bn+1),0),g:iy(Yt.g-Sr.g*(Bn+1),0),b:iy(Yt.b-Sr.b*(Bn+1),0)}).hex())}),yt.push(C),yt};function Yd(h){return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Yd(h)}function qd(h,x,C){return x=Qv(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function Qv(h){var x=u_(h,"string");return Yd(x)==="symbol"?x:String(x)}function u_(h,x){if(Yd(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(Yd(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var rv="larkmap-legend-category";function l_(h){var x=h.labels,C=h.colors,he=h.geometryType,yt=he===void 0?"circle":he,Yt=h.isStrokeColor,gr=h.style,Sr=h.className;function Gr(da){return Yt?{border:"2px solid ".concat(da)}:{background:da}}function Bn(da){return M.createElement("div",{className:$()(rv,Sr),style:gr},x.map(function(ro,Xo){return M.createElement("div",{className:"".concat(rv,"__content"),key:ro},M.createElement("div",{className:$()("".concat(rv,"__content__shape"),qd({},"".concat(rv,"__content__").concat(yt),yt)),style:Gr(da[Xo])}),M.createElement("div",{className:"".concat(rv,"labels")},ro))}))}function ui(){if(Array.isArray(C))return Bn(C);var da=s_(C.startColor,C.endColor,x.length);return Bn(da)}return M.createElement(ui,null)}l_.defaultProps={geometryType:"circle",isStrokeColor:!1};var Rb=g(91033);function og(h){const x=(0,M.useRef)(0),[C,he]=(0,M.useState)(h),yt=(0,M.useCallback)(Yt=>{cancelAnimationFrame(x.current),x.current=requestAnimationFrame(()=>{he(Yt)})},[]);return Wr(()=>{cancelAnimationFrame(x.current)}),[C,yt]}var sg=og,c_=!!(typeof window!="undefined"&&window.document&&window.document.createElement);function f_(h,x){if(!c_)return;if(!h)return x;let C;return aa(h)?C=h():"current"in h?C=h.current:C=h,C}function Hp(h,x){if(h===x)return!0;for(let C=0;C<h.length;C++)if(!Object.is(h[C],x[C]))return!1;return!0}var h_=h=>(C,he,yt)=>{const Yt=(0,M.useRef)(!1),gr=(0,M.useRef)([]),Sr=(0,M.useRef)([]),Gr=(0,M.useRef)();h(()=>{var Bn;const da=(Array.isArray(yt)?yt:[yt]).map(ro=>f_(ro));if(!Yt.current){Yt.current=!0,gr.current=da,Sr.current=he,Gr.current=C();return}(da.length!==gr.current.length||!Hp(da,gr.current)||!Hp(he,Sr.current))&&((Bn=Gr.current)===null||Bn===void 0||Bn.call(Gr),gr.current=da,Sr.current=he,Gr.current=C())}),Wr(()=>{var Bn;(Bn=Gr.current)===null||Bn===void 0||Bn.call(Gr),Yt.current=!1})},kb=h_(M.useEffect),Db=h_(M.useLayoutEffect),Fb=c_?Db:kb;function Bb(h){const[x,C]=sg();return Fb(()=>{const he=f_(h);if(!he)return;const yt=new Rb.Z(Yt=>{Yt.forEach(gr=>{const{clientWidth:Sr,clientHeight:Gr}=gr.target;C({width:Sr,height:Gr})})});return yt.observe(he),()=>{yt.disconnect()}},[],h),x}var Nb=Bb,Iv="larkmap-legend-ramp",fE=function(x){var C=x[x.length-1],he=x[0];return Number.isFinite(he)||(he=parseInt(he,10)),Number.isFinite(C)||(C=parseInt(C,10)),[he,C]};function zb(h){var x=h.labels,C=h.labelUnit,he=C===void 0?"":C,yt=h.colors,Yt=x[0]+he,gr=x[x.length-1]+he;return M.createElement(M.Fragment,null,M.createElement("div",{className:"".concat(Iv,"__continuous"),style:{background:"linear-gradient(to right,".concat(yt,")")}}),M.createElement("div",{className:"".concat(Iv,"__continuous-labelbar")},M.createElement("span",null,Yt),M.createElement("span",null,gr)))}function Zb(h){var x=h.labels,C=h.labelUnit,he=C===void 0?"":C,yt=h.colors,Yt=(0,M.useRef)(null),gr=Nb(Yt),Sr=(gr==null?void 0:gr.width)/(yt.length+1),Gr=x;if(x.length+1===yt.length){var Bn="< "+x[0],ui="\u2265 "+x[x.length-1];Gr.unshift(Bn),Gr.push(ui)}var da=function(Xo){var Fo="".concat(x[Xo]).concat(he," - ").concat(x[Xo+1]).concat(he);return Fo};return M.createElement("div",{className:"".concat(Iv,"__dis-continuous"),ref:Yt},Number.isNaN(Sr)?null:M.createElement(M.Fragment,null,M.createElement("div",{className:"".concat(Iv,"__dis-continuous__colors"),style:{paddingLeft:Sr/2}},yt==null?void 0:yt.map(function(ro,Xo){return M.createElement("div",{key:ro,title:da(Xo),className:"".concat(Iv,"__dis-continuous__color"),style:{background:ro,width:Sr}})})),M.createElement("div",{className:"".concat(Iv,"__dis-continuous__labels")},x==null?void 0:x.map(function(ro){var Xo=ro+he;return M.createElement("span",{key:ro,className:"".concat(Iv,"__dis-continuous__label")},Xo)}))))}function Ub(h){var x=h.isContinuous,C=h.labels,he=h.colors,yt=h.labelUnit,Yt=h.className,gr=h.style;return M.createElement("div",{className:$()("".concat(Iv),Yt),style:gr},x?M.createElement(zb,{labels:C,labelUnit:yt,colors:he}):M.createElement(Zb,{labels:C,labelUnit:yt,colors:he}))}Ub.defaultProps={isContinuous:!1,labelUnit:""};var R0=g(67135),oy={point:R0.DrawPoint,line:R0.DrawLine,polygon:R0.DrawPolygon,rect:R0.DrawRect,circle:R0.DrawCircle};function ym(h){return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},ym(h)}function d_(h,x){var C=Object.keys(h);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(h);x&&(he=he.filter(function(yt){return Object.getOwnPropertyDescriptor(h,yt).enumerable})),C.push.apply(C,he)}return C}function sy(h){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?d_(Object(C),!0).forEach(function(he){$b(h,he,C[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(C)):d_(Object(C)).forEach(function(he){Object.defineProperty(h,he,Object.getOwnPropertyDescriptor(C,he))})}return h}function $b(h,x,C){return x=jb(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function jb(h){var x=ug(h,"string");return ym(x)==="symbol"?x:String(x)}function ug(h,x){if(ym(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(ym(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function _m(h,x){return Wb(h)||Gb(h,x)||Vb(h,x)||Hb()}function Hb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vb(h,x){if(h){if(typeof h=="string")return p_(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return p_(h,x)}}function p_(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Gb(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function Wb(h){if(Array.isArray(h))return h}var uy=function(x){var C=useScene(),he=useState(function(){var Fo,ho;return(Fo=x==null||(ho=x.options)===null||ho===void 0?void 0:ho.initialData)!==null&&Fo!==void 0?Fo:[]}),yt=_m(he,2),Yt=yt[0],gr=yt[1],Sr=useMemo(function(){if(!C)return console.error("useDraw \u53EA\u80FD\u4F7F\u7528\u5728 LarkMap \u5BB9\u5668\u4E2D"),null;var Fo=DRAW_TYPE_MAP[x.type],ho=new Fo(C,sy(sy({},x.options),{},{initialData:Yt}));return ho},[C,JSON.stringify(x.options),x.type]),Gr=useState(Sr.isEnable()),Bn=_m(Gr,2),ui=Bn[0],da=Bn[1];useEffect(function(){var Fo=function(){return da(!0)},ho=function(){return da(!1)},ns=function(us){gr(us)};return Sr==null||Sr.setData(Yt),Sr==null||Sr.on(DrawEvent.Enable,Fo),Sr==null||Sr.on(DrawEvent.Disable,ho),Sr==null||Sr.on(DrawEvent.Change,ns),function(){gr(Sr.getData()),Sr==null||Sr.off(DrawEvent.Enable,Fo),Sr==null||Sr.off(DrawEvent.Disable,ho),Sr==null||Sr.off(DrawEvent.Change,ns),Sr==null||Sr.destroy()}},[Sr]);var ro=useCallback(function(Fo){Sr==null||Sr.setData(Fo),gr(Fo)},[Sr]),Xo=useMemo(function(){return{enable:Sr==null?void 0:Sr.enable.bind(Sr),disable:Sr==null?void 0:Sr.disable.bind(Sr),getDrawData:Sr==null?void 0:Sr.getData.bind(Sr)}},[Sr]);return sy({draw:Sr,drawData:Yt,setDrawData:ro,isEnable:ui},Xo)};function Rv(h){return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Rv(h)}function L0(h,x){return qb(h)||Yb(h,x)||Kb(h,x)||Xb()}function Xb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kb(h,x){if(h){if(typeof h=="string")return lg(h,x);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return lg(h,x)}}function lg(h,x){(x==null||x>h.length)&&(x=h.length);for(var C=0,he=new Array(x);C<x;C++)he[C]=h[C];return he}function Yb(h,x){var C=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(C!=null){var he,yt,Yt,gr,Sr=[],Gr=!0,Bn=!1;try{if(Yt=(C=C.call(h)).next,x===0){if(Object(C)!==C)return;Gr=!1}else for(;!(Gr=(he=Yt.call(C)).done)&&(Sr.push(he.value),Sr.length!==x);Gr=!0);}catch(ui){Bn=!0,yt=ui}finally{try{if(!Gr&&C.return!=null&&(gr=C.return(),Object(gr)!==gr))return}finally{if(Bn)throw yt}}return Sr}}function qb(h){if(Array.isArray(h))return h}function v_(h,x){var C=Object.keys(h);if(Object.getOwnPropertySymbols){var he=Object.getOwnPropertySymbols(h);x&&(he=he.filter(function(yt){return Object.getOwnPropertyDescriptor(h,yt).enumerable})),C.push.apply(C,he)}return C}function m_(h){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?v_(Object(C),!0).forEach(function(he){Qb(h,he,C[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(C)):v_(Object(C)).forEach(function(he){Object.defineProperty(h,he,Object.getOwnPropertyDescriptor(C,he))})}return h}function Qb(h,x,C){return x=Jb(x),x in h?Object.defineProperty(h,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):h[x]=C,h}function Jb(h){var x=e2(h,"string");return Rv(x)==="symbol"?x:String(x)}function e2(h,x){if(Rv(h)!=="object"||h===null)return h;var C=h[Symbol.toPrimitive];if(C!==void 0){var he=C.call(h,x||"default");if(Rv(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var hE=function(x,C){var he=x.point,yt=x.line,Yt=x.polygon,gr=x.rect,Sr=x.circle,Gr=!!he,Bn=!!yt,ui=!!Yt,da=!!gr,ro=!!Sr,Xo=useCallback(function(Su){return m_(m_({},C),Su instanceof Object?Su:{})},[C]),Fo=useDraw({type:"point",options:Xo(he)}),ho=useDraw({type:"line",options:Xo(yt)}),ns=useDraw({type:"polygon",options:Xo(Yt)}),vs=useDraw({type:"rect",options:Xo(gr)}),us=useDraw({type:"circle",options:Xo(Sr)}),Eu=useMemo(function(){return fromPairs(toPairs({point:Gr?Fo:void 0,line:Bn?ho:void 0,polygon:ui?ns:void 0,rect:da?vs:void 0,circle:ro?us:void 0}).filter(function(Su){var zu=L0(Su,2),uc=zu[1];return!!uc}))},[Fo,ho,ns,vs,us,Gr,Bn,ui,da,ro]),Nu=useMemo(function(){return fromPairs(toPairs(Eu).map(function(Su){var zu=L0(Su,2),uc=zu[0],Ui=zu[1];return[uc,Ui.draw]}))},[Eu]),ul=useMemo(function(){return fromPairs(toPairs(Eu).map(function(Su){var zu=L0(Su,2),uc=zu[0],Ui=zu[1];return[uc,Ui.drawData]}))},[Eu]),sf=useCallback(function(Su){Object.entries(Su).forEach(function(zu){var uc,Ui=L0(zu,2),mi=Ui[0],Pi=Ui[1];(uc=Eu[mi])===null||uc===void 0||uc.setDrawData(Pi)})},[Eu]),Fu=useMemo(function(){var Su,zu;return(Su=(zu=Object.values(Eu).find(function(uc){return uc.isEnable}))===null||zu===void 0?void 0:zu.draw)!==null&&Su!==void 0?Su:null},[Eu]),il=useCallback(function(Su){Object.values(Eu).forEach(function(zu){var uc,Ui;if(zu){var mi=typeof Su=="string"?(uc=(Ui=Eu[Su])===null||Ui===void 0?void 0:Ui.draw)!==null&&uc!==void 0?uc:null:Su;if(!mi){zu.disable();return}var Pi=zu.isEnable;mi===zu.draw?Pi||zu.enable():Pi&&zu.disable()}})},[Eu]);return{drawMap:Nu,drawGroupData:ul,setDrawGroupData:sf,activeDraw:Fu,setActiveDraw:il}}},86500:function(vt,Ee,g){"use strict";g.d(Ee,{T6:function(){return We},VD:function(){return me},WE:function(){return B},Yt:function(){return Le},lC:function(){return c},py:function(){return Z},rW:function(){return M},s:function(){return $},ve:function(){return N},vq:function(){return L}});var v=g(90279);function M(Se,et,at){return{r:(0,v.sh)(Se,255)*255,g:(0,v.sh)(et,255)*255,b:(0,v.sh)(at,255)*255}}function c(Se,et,at){Se=(0,v.sh)(Se,255),et=(0,v.sh)(et,255),at=(0,v.sh)(at,255);var Lt=Math.max(Se,et,at),Et=Math.min(Se,et,at),jt=0,pe=0,$e=(Lt+Et)/2;if(Lt===Et)pe=0,jt=0;else{var ye=Lt-Et;switch(pe=$e>.5?ye/(2-Lt-Et):ye/(Lt+Et),Lt){case Se:jt=(et-at)/ye+(et<at?6:0);break;case et:jt=(at-Se)/ye+2;break;case at:jt=(Se-et)/ye+4;break;default:break}jt/=6}return{h:jt,s:pe,l:$e}}function K(Se,et,at){return at<0&&(at+=1),at>1&&(at-=1),at<1/6?Se+(et-Se)*(6*at):at<1/2?et:at<2/3?Se+(et-Se)*(2/3-at)*6:Se}function N(Se,et,at){var Lt,Et,jt;if(Se=(0,v.sh)(Se,360),et=(0,v.sh)(et,100),at=(0,v.sh)(at,100),et===0)Et=at,jt=at,Lt=at;else{var pe=at<.5?at*(1+et):at+et-at*et,$e=2*at-pe;Lt=K($e,pe,Se+1/3),Et=K($e,pe,Se),jt=K($e,pe,Se-1/3)}return{r:Lt*255,g:Et*255,b:jt*255}}function Z(Se,et,at){Se=(0,v.sh)(Se,255),et=(0,v.sh)(et,255),at=(0,v.sh)(at,255);var Lt=Math.max(Se,et,at),Et=Math.min(Se,et,at),jt=0,pe=Lt,$e=Lt-Et,ye=Lt===0?0:$e/Lt;if(Lt===Et)jt=0;else{switch(Lt){case Se:jt=(et-at)/$e+(et<at?6:0);break;case et:jt=(at-Se)/$e+2;break;case at:jt=(Se-et)/$e+4;break;default:break}jt/=6}return{h:jt,s:ye,v:pe}}function B(Se,et,at){Se=(0,v.sh)(Se,360)*6,et=(0,v.sh)(et,100),at=(0,v.sh)(at,100);var Lt=Math.floor(Se),Et=Se-Lt,jt=at*(1-et),pe=at*(1-Et*et),$e=at*(1-(1-Et)*et),ye=Lt%6,ie=[at,pe,jt,jt,$e,at][ye],re=[$e,at,at,pe,jt,jt][ye],De=[jt,jt,$e,at,at,pe][ye];return{r:ie*255,g:re*255,b:De*255}}function L(Se,et,at,Lt){var Et=[(0,v.FZ)(Math.round(Se).toString(16)),(0,v.FZ)(Math.round(et).toString(16)),(0,v.FZ)(Math.round(at).toString(16))];return Lt&&Et[0].startsWith(Et[0].charAt(1))&&Et[1].startsWith(Et[1].charAt(1))&&Et[2].startsWith(Et[2].charAt(1))?Et[0].charAt(0)+Et[1].charAt(0)+Et[2].charAt(0):Et.join("")}function $(Se,et,at,Lt,Et){var jt=[(0,v.FZ)(Math.round(Se).toString(16)),(0,v.FZ)(Math.round(et).toString(16)),(0,v.FZ)(Math.round(at).toString(16)),(0,v.FZ)(ke(Lt))];return Et&&jt[0].startsWith(jt[0].charAt(1))&&jt[1].startsWith(jt[1].charAt(1))&&jt[2].startsWith(jt[2].charAt(1))&&jt[3].startsWith(jt[3].charAt(1))?jt[0].charAt(0)+jt[1].charAt(0)+jt[2].charAt(0)+jt[3].charAt(0):jt.join("")}function U(Se,et,at,Lt){var Et=[pad2(ke(Lt)),pad2(Math.round(Se).toString(16)),pad2(Math.round(et).toString(16)),pad2(Math.round(at).toString(16))];return Et.join("")}function ke(Se){return Math.round(parseFloat(Se)*255).toString(16)}function We(Se){return me(Se)/255}function me(Se){return parseInt(Se,16)}function Le(Se){return{r:Se>>16,g:(Se&65280)>>8,b:Se&255}}},48701:function(vt,Ee,g){"use strict";g.d(Ee,{R:function(){return v}});var v={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},1350:function(vt,Ee,g){"use strict";g.d(Ee,{uA:function(){return K}});var v=g(86500),M=g(48701),c=g(90279);function K(me){var Le={r:0,g:0,b:0},Se=1,et=null,at=null,Lt=null,Et=!1,jt=!1;return typeof me=="string"&&(me=ke(me)),typeof me=="object"&&(We(me.r)&&We(me.g)&&We(me.b)?(Le=(0,v.rW)(me.r,me.g,me.b),Et=!0,jt=String(me.r).substr(-1)==="%"?"prgb":"rgb"):We(me.h)&&We(me.s)&&We(me.v)?(et=(0,c.JX)(me.s),at=(0,c.JX)(me.v),Le=(0,v.WE)(me.h,et,at),Et=!0,jt="hsv"):We(me.h)&&We(me.s)&&We(me.l)&&(et=(0,c.JX)(me.s),Lt=(0,c.JX)(me.l),Le=(0,v.ve)(me.h,et,Lt),Et=!0,jt="hsl"),Object.prototype.hasOwnProperty.call(me,"a")&&(Se=me.a)),Se=(0,c.Yq)(Se),{ok:Et,format:me.format||jt,r:Math.min(255,Math.max(Le.r,0)),g:Math.min(255,Math.max(Le.g,0)),b:Math.min(255,Math.max(Le.b,0)),a:Se}}var N="[-\\+]?\\d+%?",Z="[-\\+]?\\d*\\.\\d+%?",B="(?:".concat(Z,")|(?:").concat(N,")"),L="[\\s|\\(]+(".concat(B,")[,|\\s]+(").concat(B,")[,|\\s]+(").concat(B,")\\s*\\)?"),$="[\\s|\\(]+(".concat(B,")[,|\\s]+(").concat(B,")[,|\\s]+(").concat(B,")[,|\\s]+(").concat(B,")\\s*\\)?"),U={CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+L),rgba:new RegExp("rgba"+$),hsl:new RegExp("hsl"+L),hsla:new RegExp("hsla"+$),hsv:new RegExp("hsv"+L),hsva:new RegExp("hsva"+$),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ke(me){if(me=me.trim().toLowerCase(),me.length===0)return!1;var Le=!1;if(M.R[me])me=M.R[me],Le=!0;else if(me==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Se=U.rgb.exec(me);return Se?{r:Se[1],g:Se[2],b:Se[3]}:(Se=U.rgba.exec(me),Se?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=U.hsl.exec(me),Se?{h:Se[1],s:Se[2],l:Se[3]}:(Se=U.hsla.exec(me),Se?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=U.hsv.exec(me),Se?{h:Se[1],s:Se[2],v:Se[3]}:(Se=U.hsva.exec(me),Se?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=U.hex8.exec(me),Se?{r:(0,v.VD)(Se[1]),g:(0,v.VD)(Se[2]),b:(0,v.VD)(Se[3]),a:(0,v.T6)(Se[4]),format:Le?"name":"hex8"}:(Se=U.hex6.exec(me),Se?{r:(0,v.VD)(Se[1]),g:(0,v.VD)(Se[2]),b:(0,v.VD)(Se[3]),format:Le?"name":"hex"}:(Se=U.hex4.exec(me),Se?{r:(0,v.VD)(Se[1]+Se[1]),g:(0,v.VD)(Se[2]+Se[2]),b:(0,v.VD)(Se[3]+Se[3]),a:(0,v.T6)(Se[4]+Se[4]),format:Le?"name":"hex8"}:(Se=U.hex3.exec(me),Se?{r:(0,v.VD)(Se[1]+Se[1]),g:(0,v.VD)(Se[2]+Se[2]),b:(0,v.VD)(Se[3]+Se[3]),format:Le?"name":"hex"}:!1)))))))))}function We(me){return Boolean(U.CSS_UNIT.exec(String(me)))}},10274:function(vt,Ee,g){"use strict";g.d(Ee,{C:function(){return N}});var v=g(86500),M=g(48701),c=g(1350),K=g(90279),N=function(){function B(L,$){L===void 0&&(L=""),$===void 0&&($={});var U;if(L instanceof B)return L;typeof L=="number"&&(L=(0,v.Yt)(L)),this.originalInput=L;var ke=(0,c.uA)(L);this.originalInput=L,this.r=ke.r,this.g=ke.g,this.b=ke.b,this.a=ke.a,this.roundA=Math.round(100*this.a)/100,this.format=(U=$.format)!==null&&U!==void 0?U:ke.format,this.gradientType=$.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=ke.ok}return B.prototype.isDark=function(){return this.getBrightness()<128},B.prototype.isLight=function(){return!this.isDark()},B.prototype.getBrightness=function(){var L=this.toRgb();return(L.r*299+L.g*587+L.b*114)/1e3},B.prototype.getLuminance=function(){var L=this.toRgb(),$,U,ke,We=L.r/255,me=L.g/255,Le=L.b/255;return We<=.03928?$=We/12.92:$=Math.pow((We+.055)/1.055,2.4),me<=.03928?U=me/12.92:U=Math.pow((me+.055)/1.055,2.4),Le<=.03928?ke=Le/12.92:ke=Math.pow((Le+.055)/1.055,2.4),.2126*$+.7152*U+.0722*ke},B.prototype.getAlpha=function(){return this.a},B.prototype.setAlpha=function(L){return this.a=(0,K.Yq)(L),this.roundA=Math.round(100*this.a)/100,this},B.prototype.isMonochrome=function(){var L=this.toHsl().s;return L===0},B.prototype.toHsv=function(){var L=(0,v.py)(this.r,this.g,this.b);return{h:L.h*360,s:L.s,v:L.v,a:this.a}},B.prototype.toHsvString=function(){var L=(0,v.py)(this.r,this.g,this.b),$=Math.round(L.h*360),U=Math.round(L.s*100),ke=Math.round(L.v*100);return this.a===1?"hsv(".concat($,", ").concat(U,"%, ").concat(ke,"%)"):"hsva(".concat($,", ").concat(U,"%, ").concat(ke,"%, ").concat(this.roundA,")")},B.prototype.toHsl=function(){var L=(0,v.lC)(this.r,this.g,this.b);return{h:L.h*360,s:L.s,l:L.l,a:this.a}},B.prototype.toHslString=function(){var L=(0,v.lC)(this.r,this.g,this.b),$=Math.round(L.h*360),U=Math.round(L.s*100),ke=Math.round(L.l*100);return this.a===1?"hsl(".concat($,", ").concat(U,"%, ").concat(ke,"%)"):"hsla(".concat($,", ").concat(U,"%, ").concat(ke,"%, ").concat(this.roundA,")")},B.prototype.toHex=function(L){return L===void 0&&(L=!1),(0,v.vq)(this.r,this.g,this.b,L)},B.prototype.toHexString=function(L){return L===void 0&&(L=!1),"#"+this.toHex(L)},B.prototype.toHex8=function(L){return L===void 0&&(L=!1),(0,v.s)(this.r,this.g,this.b,this.a,L)},B.prototype.toHex8String=function(L){return L===void 0&&(L=!1),"#"+this.toHex8(L)},B.prototype.toHexShortString=function(L){return L===void 0&&(L=!1),this.a===1?this.toHexString(L):this.toHex8String(L)},B.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},B.prototype.toRgbString=function(){var L=Math.round(this.r),$=Math.round(this.g),U=Math.round(this.b);return this.a===1?"rgb(".concat(L,", ").concat($,", ").concat(U,")"):"rgba(".concat(L,", ").concat($,", ").concat(U,", ").concat(this.roundA,")")},B.prototype.toPercentageRgb=function(){var L=function($){return"".concat(Math.round((0,K.sh)($,255)*100),"%")};return{r:L(this.r),g:L(this.g),b:L(this.b),a:this.a}},B.prototype.toPercentageRgbString=function(){var L=function($){return Math.round((0,K.sh)($,255)*100)};return this.a===1?"rgb(".concat(L(this.r),"%, ").concat(L(this.g),"%, ").concat(L(this.b),"%)"):"rgba(".concat(L(this.r),"%, ").concat(L(this.g),"%, ").concat(L(this.b),"%, ").concat(this.roundA,")")},B.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var L="#"+(0,v.vq)(this.r,this.g,this.b,!1),$=0,U=Object.entries(M.R);$<U.length;$++){var ke=U[$],We=ke[0],me=ke[1];if(L===me)return We}return!1},B.prototype.toString=function(L){var $=Boolean(L);L=L!=null?L:this.format;var U=!1,ke=this.a<1&&this.a>=0,We=!$&&ke&&(L.startsWith("hex")||L==="name");return We?L==="name"&&this.a===0?this.toName():this.toRgbString():(L==="rgb"&&(U=this.toRgbString()),L==="prgb"&&(U=this.toPercentageRgbString()),(L==="hex"||L==="hex6")&&(U=this.toHexString()),L==="hex3"&&(U=this.toHexString(!0)),L==="hex4"&&(U=this.toHex8String(!0)),L==="hex8"&&(U=this.toHex8String()),L==="name"&&(U=this.toName()),L==="hsl"&&(U=this.toHslString()),L==="hsv"&&(U=this.toHsvString()),U||this.toHexString())},B.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},B.prototype.clone=function(){return new B(this.toString())},B.prototype.lighten=function(L){L===void 0&&(L=10);var $=this.toHsl();return $.l+=L/100,$.l=(0,K.V2)($.l),new B($)},B.prototype.brighten=function(L){L===void 0&&(L=10);var $=this.toRgb();return $.r=Math.max(0,Math.min(255,$.r-Math.round(255*-(L/100)))),$.g=Math.max(0,Math.min(255,$.g-Math.round(255*-(L/100)))),$.b=Math.max(0,Math.min(255,$.b-Math.round(255*-(L/100)))),new B($)},B.prototype.darken=function(L){L===void 0&&(L=10);var $=this.toHsl();return $.l-=L/100,$.l=(0,K.V2)($.l),new B($)},B.prototype.tint=function(L){return L===void 0&&(L=10),this.mix("white",L)},B.prototype.shade=function(L){return L===void 0&&(L=10),this.mix("black",L)},B.prototype.desaturate=function(L){L===void 0&&(L=10);var $=this.toHsl();return $.s-=L/100,$.s=(0,K.V2)($.s),new B($)},B.prototype.saturate=function(L){L===void 0&&(L=10);var $=this.toHsl();return $.s+=L/100,$.s=(0,K.V2)($.s),new B($)},B.prototype.greyscale=function(){return this.desaturate(100)},B.prototype.spin=function(L){var $=this.toHsl(),U=($.h+L)%360;return $.h=U<0?360+U:U,new B($)},B.prototype.mix=function(L,$){$===void 0&&($=50);var U=this.toRgb(),ke=new B(L).toRgb(),We=$/100,me={r:(ke.r-U.r)*We+U.r,g:(ke.g-U.g)*We+U.g,b:(ke.b-U.b)*We+U.b,a:(ke.a-U.a)*We+U.a};return new B(me)},B.prototype.analogous=function(L,$){L===void 0&&(L=6),$===void 0&&($=30);var U=this.toHsl(),ke=360/$,We=[this];for(U.h=(U.h-(ke*L>>1)+720)%360;--L;)U.h=(U.h+ke)%360,We.push(new B(U));return We},B.prototype.complement=function(){var L=this.toHsl();return L.h=(L.h+180)%360,new B(L)},B.prototype.monochromatic=function(L){L===void 0&&(L=6);for(var $=this.toHsv(),U=$.h,ke=$.s,We=$.v,me=[],Le=1/L;L--;)me.push(new B({h:U,s:ke,v:We})),We=(We+Le)%1;return me},B.prototype.splitcomplement=function(){var L=this.toHsl(),$=L.h;return[this,new B({h:($+72)%360,s:L.s,l:L.l}),new B({h:($+216)%360,s:L.s,l:L.l})]},B.prototype.onBackground=function(L){var $=this.toRgb(),U=new B(L).toRgb(),ke=$.a+U.a*(1-$.a);return new B({r:($.r*$.a+U.r*U.a*(1-$.a))/ke,g:($.g*$.a+U.g*U.a*(1-$.a))/ke,b:($.b*$.a+U.b*U.a*(1-$.a))/ke,a:ke})},B.prototype.triad=function(){return this.polyad(3)},B.prototype.tetrad=function(){return this.polyad(4)},B.prototype.polyad=function(L){for(var $=this.toHsl(),U=$.h,ke=[this],We=360/L,me=1;me<L;me++)ke.push(new B({h:(U+me*We)%360,s:$.s,l:$.l}));return ke},B.prototype.equals=function(L){return this.toRgbString()===new B(L).toRgbString()},B}();function Z(B,L){return B===void 0&&(B=""),L===void 0&&(L={}),new N(B,L)}},90279:function(vt,Ee,g){"use strict";g.d(Ee,{FZ:function(){return B},JX:function(){return Z},V2:function(){return M},Yq:function(){return N},sh:function(){return v}});function v(L,$){c(L)&&(L="100%");var U=K(L);return L=$===360?L:Math.min($,Math.max(0,parseFloat(L))),U&&(L=parseInt(String(L*$),10)/100),Math.abs(L-$)<1e-6?1:($===360?L=(L<0?L%$+$:L%$)/parseFloat(String($)):L=L%$/parseFloat(String($)),L)}function M(L){return Math.min(1,Math.max(0,L))}function c(L){return typeof L=="string"&&L.indexOf(".")!==-1&&parseFloat(L)===1}function K(L){return typeof L=="string"&&L.indexOf("%")!==-1}function N(L){return L=parseFloat(L),(isNaN(L)||L<0||L>1)&&(L=1),L}function Z(L){return L<=1?"".concat(Number(L)*100,"%"):L}function B(L){return L.length===1?"0"+L:String(L)}},38163:function(vt){vt.exports=Ee;function Ee(M,c){var K=M&&M.type,N;if(K==="FeatureCollection")for(N=0;N<M.features.length;N++)Ee(M.features[N],c);else if(K==="GeometryCollection")for(N=0;N<M.geometries.length;N++)Ee(M.geometries[N],c);else if(K==="Feature")Ee(M.geometry,c);else if(K==="Polygon")g(M.coordinates,c);else if(K==="MultiPolygon")for(N=0;N<M.coordinates.length;N++)g(M.coordinates[N],c);return M}function g(M,c){if(M.length!==0){v(M[0],c);for(var K=1;K<M.length;K++)v(M[K],!c)}}function v(M,c){for(var K=0,N=0,Z=0,B=M.length,L=B-1;Z<B;L=Z++){var $=(M[Z][0]-M[L][0])*(M[L][1]+M[Z][1]),U=K+$;N+=Math.abs(K)>=Math.abs($)?K-U+$:$-U+K,K=U}K+N>=0!=!!c&&M.reverse()}},75550:function(vt){"use strict";vt.exports=Ee;function Ee(g,v){this.x=g,this.y=v}Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function(g){return this.clone()._add(g)},sub:function(g){return this.clone()._sub(g)},multByPoint:function(g){return this.clone()._multByPoint(g)},divByPoint:function(g){return this.clone()._divByPoint(g)},mult:function(g){return this.clone()._mult(g)},div:function(g){return this.clone()._div(g)},rotate:function(g){return this.clone()._rotate(g)},rotateAround:function(g,v){return this.clone()._rotateAround(g,v)},matMult:function(g){return this.clone()._matMult(g)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(g){return this.x===g.x&&this.y===g.y},dist:function(g){return Math.sqrt(this.distSqr(g))},distSqr:function(g){var v=g.x-this.x,M=g.y-this.y;return v*v+M*M},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(g){return Math.atan2(this.y-g.y,this.x-g.x)},angleWith:function(g){return this.angleWithSep(g.x,g.y)},angleWithSep:function(g,v){return Math.atan2(this.x*v-this.y*g,this.x*g+this.y*v)},_matMult:function(g){var v=g[0]*this.x+g[1]*this.y,M=g[2]*this.x+g[3]*this.y;return this.x=v,this.y=M,this},_add:function(g){return this.x+=g.x,this.y+=g.y,this},_sub:function(g){return this.x-=g.x,this.y-=g.y,this},_mult:function(g){return this.x*=g,this.y*=g,this},_div:function(g){return this.x/=g,this.y/=g,this},_multByPoint:function(g){return this.x*=g.x,this.y*=g.y,this},_divByPoint:function(g){return this.x/=g.x,this.y/=g.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var g=this.y;return this.y=this.x,this.x=-g,this},_rotate:function(g){var v=Math.cos(g),M=Math.sin(g),c=v*this.x-M*this.y,K=M*this.x+v*this.y;return this.x=c,this.y=K,this},_rotateAround:function(g,v){var M=Math.cos(g),c=Math.sin(g),K=v.x+M*(this.x-v.x)-c*(this.y-v.y),N=v.y+c*(this.x-v.x)+M*(this.y-v.y);return this.x=K,this.y=N,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ee.convert=function(g){return g instanceof Ee?g:Array.isArray(g)?new Ee(g[0],g[1]):g}},99874:function(vt){vt.exports=Ee;function Ee(g,v,M,c){this.cx=3*g,this.bx=3*(M-g)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(c-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=g,this.p1y=c,this.p2x=M,this.p2y=c}Ee.prototype.sampleCurveX=function(g){return((this.ax*g+this.bx)*g+this.cx)*g},Ee.prototype.sampleCurveY=function(g){return((this.ay*g+this.by)*g+this.cy)*g},Ee.prototype.sampleCurveDerivativeX=function(g){return(3*this.ax*g+2*this.bx)*g+this.cx},Ee.prototype.solveCurveX=function(g,v){typeof v=="undefined"&&(v=1e-6);var M,c,K,N,Z;for(K=g,Z=0;Z<8;Z++){if(N=this.sampleCurveX(K)-g,Math.abs(N)<v)return K;var B=this.sampleCurveDerivativeX(K);if(Math.abs(B)<1e-6)break;K=K-N/B}if(M=0,c=1,K=g,K<M)return M;if(K>c)return c;for(;M<c;){if(N=this.sampleCurveX(K),Math.abs(N-g)<v)return K;g>N?M=K:c=K,K=(c-M)*.5+M}return K},Ee.prototype.solve=function(g,v){return this.sampleCurveY(this.solveCurveX(g,v))}},38929:function(vt,Ee,g){vt.exports.VectorTile=g(22779),g(66024),g(59701)},22779:function(vt,Ee,g){"use strict";var v=g(59701);vt.exports=M;function M(K,N){this.layers=K.readFields(c,{},N)}function c(K,N,Z){if(K===3){var B=new v(Z,Z.readVarint()+Z.pos);B.length&&(N[B.name]=B)}}},66024:function(vt,Ee,g){"use strict";var v=g(75550);vt.exports=M;function M(B,L,$,U,ke){this.properties={},this.extent=$,this.type=0,this._pbf=B,this._geometry=-1,this._keys=U,this._values=ke,B.readFields(c,this,L)}function c(B,L,$){B==1?L.id=$.readVarint():B==2?K($,L):B==3?L.type=$.readVarint():B==4&&(L._geometry=$.pos)}function K(B,L){for(var $=B.readVarint()+B.pos;B.pos<$;){var U=L._keys[B.readVarint()],ke=L._values[B.readVarint()];L.properties[U]=ke}}M.types=["Unknown","Point","LineString","Polygon"],M.prototype.loadGeometry=function(){var B=this._pbf;B.pos=this._geometry;for(var L=B.readVarint()+B.pos,$=1,U=0,ke=0,We=0,me=[],Le;B.pos<L;){if(U<=0){var Se=B.readVarint();$=Se&7,U=Se>>3}if(U--,$===1||$===2)ke+=B.readSVarint(),We+=B.readSVarint(),$===1&&(Le&&me.push(Le),Le=[]),Le.push(new v(ke,We));else if($===7)Le&&Le.push(Le[0].clone());else throw new Error("unknown command "+$)}return Le&&me.push(Le),me},M.prototype.bbox=function(){var B=this._pbf;B.pos=this._geometry;for(var L=B.readVarint()+B.pos,$=1,U=0,ke=0,We=0,me=1/0,Le=-1/0,Se=1/0,et=-1/0;B.pos<L;){if(U<=0){var at=B.readVarint();$=at&7,U=at>>3}if(U--,$===1||$===2)ke+=B.readSVarint(),We+=B.readSVarint(),ke<me&&(me=ke),ke>Le&&(Le=ke),We<Se&&(Se=We),We>et&&(et=We);else if($!==7)throw new Error("unknown command "+$)}return[me,Se,Le,et]},M.prototype.toGeoJSON=function(B,L,$){var U=this.extent*Math.pow(2,$),ke=this.extent*B,We=this.extent*L,me=this.loadGeometry(),Le=M.types[this.type],Se,et;function at(jt){for(var pe=0;pe<jt.length;pe++){var $e=jt[pe],ye=180-($e.y+We)*360/U;jt[pe]=[($e.x+ke)*360/U-180,360/Math.PI*Math.atan(Math.exp(ye*Math.PI/180))-90]}}switch(this.type){case 1:var Lt=[];for(Se=0;Se<me.length;Se++)Lt[Se]=me[Se][0];me=Lt,at(me);break;case 2:for(Se=0;Se<me.length;Se++)at(me[Se]);break;case 3:for(me=N(me),Se=0;Se<me.length;Se++)for(et=0;et<me[Se].length;et++)at(me[Se][et]);break}me.length===1?me=me[0]:Le="Multi"+Le;var Et={type:"Feature",geometry:{type:Le,coordinates:me},properties:this.properties};return"id"in this&&(Et.id=this.id),Et};function N(B){var L=B.length;if(L<=1)return[B];for(var $=[],U,ke,We=0;We<L;We++){var me=Z(B[We]);me!==0&&(ke===void 0&&(ke=me<0),ke===me<0?(U&&$.push(U),U=[B[We]]):U.push(B[We]))}return U&&$.push(U),$}function Z(B){for(var L=0,$=0,U=B.length,ke=U-1,We,me;$<U;ke=$++)We=B[$],me=B[ke],L+=(me.x-We.x)*(We.y+me.y);return L}},59701:function(vt,Ee,g){"use strict";var v=g(66024);vt.exports=M;function M(N,Z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=N,this._keys=[],this._values=[],this._features=[],N.readFields(c,this,Z),this.length=this._features.length}function c(N,Z,B){N===15?Z.version=B.readVarint():N===1?Z.name=B.readString():N===5?Z.extent=B.readVarint():N===2?Z._features.push(B.pos):N===3?Z._keys.push(B.readString()):N===4&&Z._values.push(K(B))}function K(N){for(var Z=null,B=N.readVarint()+N.pos;N.pos<B;){var L=N.readVarint()>>3;Z=L===1?N.readString():L===2?N.readFloat():L===3?N.readDouble():L===4?N.readVarint64():L===5?N.readVarint():L===6?N.readSVarint():L===7?N.readBoolean():null}return Z}M.prototype.feature=function(N){if(N<0||N>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[N];var Z=this._pbf.readVarint()+this._pbf.pos;return new v(this._pbf,Z,this.extent,this._keys,this._values)}},45191:function(vt,Ee){"use strict";var g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};Ee.Z=g},38018:function(vt,Ee,g){"use strict";var v=g(9783).default,M=g(5574).default,c=g(96695).default,K=g(52677).default,N=g(19632).default,Z=g(62072),B=g(44020),L=g(13615),$=g(92806),U=function(ie){return ie==null},ke=Symbol("encodeFragmentIdentifier");function We(ye){switch(ye.arrayFormat){case"index":return function(re){return function(De,le){var ge=De.length;return le===void 0||ye.skipNull&&le===null||ye.skipEmptyString&&le===""?De:le===null?[].concat(N(De),[[Se(re,ye),"[",ge,"]"].join("")]):[].concat(N(De),[[Se(re,ye),"[",Se(ge,ye),"]=",Se(le,ye)].join("")])}};case"bracket":return function(re){return function(De,le){return le===void 0||ye.skipNull&&le===null||ye.skipEmptyString&&le===""?De:le===null?[].concat(N(De),[[Se(re,ye),"[]"].join("")]):[].concat(N(De),[[Se(re,ye),"[]=",Se(le,ye)].join("")])}};case"colon-list-separator":return function(re){return function(De,le){return le===void 0||ye.skipNull&&le===null||ye.skipEmptyString&&le===""?De:le===null?[].concat(N(De),[[Se(re,ye),":list="].join("")]):[].concat(N(De),[[Se(re,ye),":list=",Se(le,ye)].join("")])}};case"comma":case"separator":case"bracket-separator":{var ie=ye.arrayFormat==="bracket-separator"?"[]=":"=";return function(re){return function(De,le){return le===void 0||ye.skipNull&&le===null||ye.skipEmptyString&&le===""?De:(le=le===null?"":le,De.length===0?[[Se(re,ye),ie,Se(le,ye)].join("")]:[[De,Se(le,ye)].join(ye.arrayFormatSeparator)])}}}default:return function(re){return function(De,le){return le===void 0||ye.skipNull&&le===null||ye.skipEmptyString&&le===""?De:le===null?[].concat(N(De),[Se(re,ye)]):[].concat(N(De),[[Se(re,ye),"=",Se(le,ye)].join("")])}}}}function me(ye){var ie;switch(ye.arrayFormat){case"index":return function(re,De,le){if(ie=/\[(\d*)\]$/.exec(re),re=re.replace(/\[\d*\]$/,""),!ie){le[re]=De;return}le[re]===void 0&&(le[re]={}),le[re][ie[1]]=De};case"bracket":return function(re,De,le){if(ie=/(\[\])$/.exec(re),re=re.replace(/\[\]$/,""),!ie){le[re]=De;return}if(le[re]===void 0){le[re]=[De];return}le[re]=[].concat(le[re],De)};case"colon-list-separator":return function(re,De,le){if(ie=/(:list)$/.exec(re),re=re.replace(/:list$/,""),!ie){le[re]=De;return}if(le[re]===void 0){le[re]=[De];return}le[re]=[].concat(le[re],De)};case"comma":case"separator":return function(re,De,le){var ge=typeof De=="string"&&De.includes(ye.arrayFormatSeparator),ce=typeof De=="string"&&!ge&&et(De,ye).includes(ye.arrayFormatSeparator);De=ce?et(De,ye):De;var je=ge||ce?De.split(ye.arrayFormatSeparator).map(function(J){return et(J,ye)}):De===null?De:et(De,ye);le[re]=je};case"bracket-separator":return function(re,De,le){var ge=/(\[\])$/.test(re);if(re=re.replace(/\[\]$/,""),!ge){le[re]=De&&et(De,ye);return}var ce=De===null?[]:De.split(ye.arrayFormatSeparator).map(function(je){return et(je,ye)});if(le[re]===void 0){le[re]=ce;return}le[re]=[].concat(le[re],ce)};default:return function(re,De,le){if(le[re]===void 0){le[re]=De;return}le[re]=[].concat(le[re],De)}}}function Le(ye){if(typeof ye!="string"||ye.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Se(ye,ie){return ie.encode?ie.strict?Z(ye):encodeURIComponent(ye):ye}function et(ye,ie){return ie.decode?B(ye):ye}function at(ye){return Array.isArray(ye)?ye.sort():K(ye)==="object"?at(Object.keys(ye)).sort(function(ie,re){return Number(ie)-Number(re)}).map(function(ie){return ye[ie]}):ye}function Lt(ye){var ie=ye.indexOf("#");return ie!==-1&&(ye=ye.slice(0,ie)),ye}function Et(ye){var ie="",re=ye.indexOf("#");return re!==-1&&(ie=ye.slice(re)),ie}function jt(ye){ye=Lt(ye);var ie=ye.indexOf("?");return ie===-1?"":ye.slice(ie+1)}function pe(ye,ie){return ie.parseNumbers&&!Number.isNaN(Number(ye))&&typeof ye=="string"&&ye.trim()!==""?ye=Number(ye):ie.parseBooleans&&ye!==null&&(ye.toLowerCase()==="true"||ye.toLowerCase()==="false")&&(ye=ye.toLowerCase()==="true"),ye}function $e(ye,ie){ie=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},ie),Le(ie.arrayFormatSeparator);var re=me(ie),De=Object.create(null);if(typeof ye!="string"||(ye=ye.trim().replace(/^[?#&]/,""),!ye))return De;var le=c(ye.split("&")),ge;try{for(le.s();!(ge=le.n()).done;){var ce=ge.value;if(ce!==""){var je=L(ie.decode?ce.replace(/\+/g," "):ce,"="),J=M(je,2),Me=J[0],ne=J[1];ne=ne===void 0?null:["comma","separator","bracket-separator"].includes(ie.arrayFormat)?ne:et(ne,ie),re(et(Me,ie),ne,De)}}}catch(fe){le.e(fe)}finally{le.f()}for(var xe=0,Ne=Object.keys(De);xe<Ne.length;xe++){var Pe=Ne[xe],He=De[Pe];if(K(He)==="object"&&He!==null)for(var lt=0,ft=Object.keys(He);lt<ft.length;lt++){var It=ft[lt];He[It]=pe(He[It],ie)}else De[Pe]=pe(He,ie)}return ie.sort===!1?De:(ie.sort===!0?Object.keys(De).sort():Object.keys(De).sort(ie.sort)).reduce(function(fe,_t){var Ye=De[_t];return Boolean(Ye)&&K(Ye)==="object"&&!Array.isArray(Ye)?fe[_t]=at(Ye):fe[_t]=Ye,fe},Object.create(null))}Ee.extract=jt,Ee.parse=$e,Ee.stringify=function(ye,ie){if(!ye)return"";ie=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},ie),Le(ie.arrayFormatSeparator);for(var re=function(ne){return ie.skipNull&&U(ye[ne])||ie.skipEmptyString&&ye[ne]===""},De=We(ie),le={},ge=0,ce=Object.keys(ye);ge<ce.length;ge++){var je=ce[ge];re(je)||(le[je]=ye[je])}var J=Object.keys(le);return ie.sort!==!1&&J.sort(ie.sort),J.map(function(Me){var ne=ye[Me];return ne===void 0?"":ne===null?Se(Me,ie):Array.isArray(ne)?ne.length===0&&ie.arrayFormat==="bracket-separator"?Se(Me,ie)+"[]":ne.reduce(De(Me),[]).join("&"):Se(Me,ie)+"="+Se(ne,ie)}).filter(function(Me){return Me.length>0}).join("&")},Ee.parseUrl=function(ye,ie){ie=Object.assign({decode:!0},ie);var re=L(ye,"#"),De=M(re,2),le=De[0],ge=De[1];return Object.assign({url:le.split("?")[0]||"",query:$e(jt(ye),ie)},ie&&ie.parseFragmentIdentifier&&ge?{fragmentIdentifier:et(ge,ie)}:{})},Ee.stringifyUrl=function(ye,ie){ie=Object.assign(v({encode:!0,strict:!0},ke,!0),ie);var re=Lt(ye.url).split("?")[0]||"",De=Ee.extract(ye.url),le=Ee.parse(De,{sort:!1}),ge=Object.assign(le,ye.query),ce=Ee.stringify(ge,ie);ce&&(ce="?".concat(ce));var je=Et(ye.url);return ye.fragmentIdentifier&&(je="#".concat(ie[ke]?Se(ye.fragmentIdentifier,ie):ye.fragmentIdentifier)),"".concat(re).concat(ce).concat(je)},Ee.pick=function(ye,ie,re){re=Object.assign(v({parseFragmentIdentifier:!0},ke,!1),re);var De=Ee.parseUrl(ye,re),le=De.url,ge=De.query,ce=De.fragmentIdentifier;return Ee.stringifyUrl({url:le,query:$(ge,ie),fragmentIdentifier:ce},re)},Ee.exclude=function(ye,ie,re){var De=Array.isArray(ie)?function(le){return!ie.includes(le)}:function(le,ge){return!ie(le,ge)};return Ee.pick(ye,De,re)}},13615:function(vt){"use strict";vt.exports=function(Ee,g){if(!(typeof Ee=="string"&&typeof g=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(g==="")return[Ee];var v=Ee.indexOf(g);return v===-1?[Ee]:[Ee.slice(0,v),Ee.slice(v+g.length)]}},62072:function(vt){"use strict";vt.exports=function(Ee){return encodeURIComponent(Ee).replace(/[!'()*]/g,function(g){return"%".concat(g.charCodeAt(0).toString(16).toUpperCase())})}},8745:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return N}});var v=g(21770),M=g(67294),c=g(53124),K=g(32170);function N(Z,B,L){return function(U){const{prefixCls:ke,style:We}=U,me=M.useRef(null),[Le,Se]=M.useState(0),[et,at]=M.useState(0),[Lt,Et]=(0,v.Z)(!1,{value:U.open}),{getPrefixCls:jt}=M.useContext(c.E_),pe=jt(B||"select",ke);return M.useEffect(()=>{if(Et(!0),typeof ResizeObserver!="undefined"){const $e=new ResizeObserver(ie=>{const re=ie[0].target;Se(re.offsetHeight+8),at(re.offsetWidth)}),ye=setInterval(()=>{var ie;const re=L?`.${L(pe)}`:`.${pe}-dropdown`,De=(ie=me.current)===null||ie===void 0?void 0:ie.querySelector(re);De&&(clearInterval(ye),$e.observe(De))},10);return()=>{clearInterval(ye),$e.disconnect()}}},[]),M.createElement(K.ZP,{theme:{token:{motionDurationFast:"0.01s",motionDurationMid:"0.01s",motionDurationSlow:"0.01s"}}},M.createElement("div",{ref:me,style:{paddingBottom:Le,position:"relative",width:"fit-content",minWidth:et}},M.createElement(Z,Object.assign({},U,{style:Object.assign(Object.assign({},We),{margin:0}),open:Lt,visible:Lt,getPopupContainer:()=>me.current}))))}}},37193:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Z}});var v=g(67294),M=g(98924);const c=()=>(0,M.Z)()&&window.document.documentElement;let K;const N=()=>{if(!c())return!1;if(K!==void 0)return K;const B=document.createElement("div");return B.style.display="flex",B.style.flexDirection="column",B.style.rowGap="1px",B.appendChild(document.createElement("div")),B.appendChild(document.createElement("div")),document.body.appendChild(B),K=B.scrollHeight===1,document.body.removeChild(B),K};var Z=()=>{const[B,L]=v.useState(!1);return v.useEffect(()=>{L(N())},[]),B}},33603:function(vt,Ee,g){"use strict";g.d(Ee,{mL:function(){return L},q0:function(){return B}});const v=()=>({height:0,opacity:0}),M=$=>{const{scrollHeight:U}=$;return{height:U,opacity:1}},c=$=>({height:$?$.offsetHeight:0}),K=($,U)=>(U==null?void 0:U.deadline)===!0||U.propertyName==="height",N=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:v,onEnterStart:v,onAppearActive:M,onEnterActive:M,onLeaveStart:c,onLeaveActive:v,onAppearEnd:K,onEnterEnd:K,onLeaveEnd:K,motionDeadline:500}},Z=null,B=$=>$!==void 0&&($==="topLeft"||$==="topRight")?"slide-down":"slide-up",L=($,U,ke)=>ke!==void 0?ke:`${$}-${U}`;Ee.ZP=N},80636:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return L}});var v=g(43159);const M={adjustX:1,adjustY:1},c={adjustX:0,adjustY:0},K=[0,0];function N($){return typeof $=="boolean"?$?M:c:Object.assign(Object.assign({},c),$)}function Z($,U,ke){switch($){case"top":case"topLeft":case"topRight":return[0,-(U/2+ke)];case"bottom":case"bottomLeft":case"bottomRight":return[0,U/2+ke];case"left":case"leftTop":case"leftBottom":return[-(U/2+ke),0];case"right":case"rightTop":case"rightBottom":return[U/2+ke,0];default:return[0,0]}}function B($,U){return[$[0]+U[0],$[1]+U[1]]}function L($){const{arrowWidth:U,horizontalArrowShift:ke=16,verticalArrowShift:We=8,autoAdjustOverflow:me,arrowPointAtCenter:Le,offset:Se}=$,et=U/2,at={left:{points:["cr","cl"],offset:[-Se,0]},right:{points:["cl","cr"],offset:[Se,0]},top:{points:["bc","tc"],offset:[0,-Se]},bottom:{points:["tc","bc"],offset:[0,Se]},topLeft:{points:["bl","tc"],offset:[-(ke+et),-Se]},leftTop:{points:["tr","cl"],offset:[-Se,-(We+et)]},topRight:{points:["br","tc"],offset:[ke+et,-Se]},rightTop:{points:["tl","cr"],offset:[Se,-(We+et)]},bottomRight:{points:["tr","bc"],offset:[ke+et,Se]},rightBottom:{points:["bl","cr"],offset:[Se,We+et]},bottomLeft:{points:["tl","bc"],offset:[-(ke+et),Se]},leftBottom:{points:["br","cl"],offset:[-Se,We+et]}};return Object.keys(at).forEach(Lt=>{at[Lt]=Le?Object.assign(Object.assign({},at[Lt]),{offset:B(at[Lt].offset,Z(Lt,U,Se)),overflow:N(me),targetOffset:K}):Object.assign(Object.assign({},v.C[Lt]),{offset:B(v.C[Lt].offset,Z(Lt,U,Se)),overflow:N(me)}),at[Lt].ignoreShake=!0}),at}},96159:function(vt,Ee,g){"use strict";var v;g.d(Ee,{M2:function(){return K},Tm:function(){return Z},l$:function(){return c}});var M=g(67294);const{isValidElement:c}=v||(v=g.t(M,2));function K(B){return B&&c(B)&&B.type===M.Fragment}function N(B,L,$){return c(B)?M.cloneElement(B,typeof $=="function"?$(B.props||{}):$):L}function Z(B,L){return N(B,B,L)}},74443:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Z},c:function(){return c}});var v=g(67294),M=g(48012);const c=["xxl","xl","lg","md","sm","xs"],K=B=>({xs:`(max-width: ${B.screenXSMax}px)`,sm:`(min-width: ${B.screenSM}px)`,md:`(min-width: ${B.screenMD}px)`,lg:`(min-width: ${B.screenLG}px)`,xl:`(min-width: ${B.screenXL}px)`,xxl:`(min-width: ${B.screenXXL}px)`}),N=B=>{const L=B,$=[].concat(c).reverse();return $.forEach((U,ke)=>{const We=U.toUpperCase(),me=`screen${We}Min`,Le=`screen${We}`;if(!(L[me]<=L[Le]))throw new Error(`${me}<=${Le} fails : !(${L[me]}<=${L[Le]})`);if(ke<$.length-1){const Se=`screen${We}Max`;if(!(L[Le]<=L[Se]))throw new Error(`${Le}<=${Se} fails : !(${L[Le]}<=${L[Se]})`);const at=`screen${$[ke+1].toUpperCase()}Min`;if(!(L[Se]<=L[at]))throw new Error(`${Se}<=${at} fails : !(${L[Se]}<=${L[at]})`)}}),B};function Z(){const[,B]=(0,M.dQ)(),L=K(N(B));return v.useMemo(()=>{const $=new Map;let U=-1,ke={};return{matchHandlers:{},dispatch(We){return ke=We,$.forEach(me=>me(ke)),$.size>=1},subscribe(We){return $.size||this.register(),U+=1,$.set(U,We),We(ke),U},unsubscribe(We){$.delete(We),$.size||this.unregister()},unregister(){Object.keys(L).forEach(We=>{const me=L[We],Le=this.matchHandlers[me];Le==null||Le.mql.removeListener(Le==null?void 0:Le.listener)}),$.clear()},register(){Object.keys(L).forEach(We=>{const me=L[We],Le=et=>{let{matches:at}=et;this.dispatch(Object.assign(Object.assign({},ke),{[We]:at}))},Se=window.matchMedia(me);Se.addListener(Le),this.matchHandlers[me]={mql:Se,listener:Le},Le(Se)})},responsiveMap:L}},[B])}},9708:function(vt,Ee,g){"use strict";g.d(Ee,{F:function(){return N},Z:function(){return K}});var v=g(94184),M=g.n(v);const c=null;function K(Z,B,L){return M()({[`${Z}-status-success`]:B==="success",[`${Z}-status-warning`]:B==="warning",[`${Z}-status-error`]:B==="error",[`${Z}-status-validating`]:B==="validating",[`${Z}-has-feedback`]:L})}const N=(Z,B)=>B||Z},45353:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return $e}});var v=g(94184),M=g.n(v),c=g(42550),K=g(5110),N=g(67294),Z=g(53124),B=g(96159),L=g(67968);const $=ye=>{const{componentCls:ie,colorPrimary:re}=ye;return{[ie]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${re})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${ye.motionEaseOutCirc}`,`opacity 2s ${ye.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}};var U=(0,L.Z)("Wave",ye=>[$(ye)]),ke=g(62874),We=g(75164),me=g(38135);function Le(ye){const ie=(ye||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return ie&&ie[1]&&ie[2]&&ie[3]?!(ie[1]===ie[2]&&ie[2]===ie[3]):!0}function Se(ye){return ye&&ye!=="#fff"&&ye!=="#ffffff"&&ye!=="rgb(255, 255, 255)"&&ye!=="rgba(255, 255, 255, 1)"&&Le(ye)&&!/rgba\((?:\d*, ){3}0\)/.test(ye)&&ye!=="transparent"}function et(ye){const{borderTopColor:ie,borderColor:re,backgroundColor:De}=getComputedStyle(ye);return Se(ie)?ie:Se(re)?re:Se(De)?De:null}function at(ye){return Number.isNaN(ye)?0:ye}const Lt=ye=>{const{className:ie,target:re}=ye,De=N.useRef(null),[le,ge]=N.useState(null),[ce,je]=N.useState([]),[J,Me]=N.useState(0),[ne,xe]=N.useState(0),[Ne,Pe]=N.useState(0),[He,lt]=N.useState(0),[ft,It]=N.useState(!1),fe={left:J,top:ne,width:Ne,height:He,borderRadius:ce.map(Ye=>`${Ye}px`).join(" ")};le&&(fe["--wave-color"]=le);function _t(){const Ye=getComputedStyle(re);ge(et(re));const Ot=Ye.position==="static",{borderLeftWidth:mt,borderTopWidth:Rt}=Ye;Me(Ot?re.offsetLeft:at(-parseFloat(mt))),xe(Ot?re.offsetTop:at(-parseFloat(Rt))),Pe(re.offsetWidth),lt(re.offsetHeight);const{borderTopLeftRadius:pt,borderTopRightRadius:Ge,borderBottomLeftRadius:wt,borderBottomRightRadius:ee}=Ye;je([pt,Ge,ee,wt].map(Re=>at(parseFloat(Re))))}return N.useEffect(()=>{if(re){const Ye=(0,We.Z)(()=>{_t(),It(!0)});let Ot;return typeof ResizeObserver!="undefined"&&(Ot=new ResizeObserver(_t),Ot.observe(re)),()=>{We.Z.cancel(Ye),Ot==null||Ot.disconnect()}}},[]),ft?N.createElement(ke.Z,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(Ye,Ot)=>{var mt;if(Ot.deadline||Ot.propertyName==="opacity"){const Rt=(mt=De.current)===null||mt===void 0?void 0:mt.parentElement;(0,me.v)(Rt).then(()=>{var pt;(pt=Rt.parentElement)===null||pt===void 0||pt.removeChild(Rt)})}return!1}},Ye=>{let{className:Ot}=Ye;return N.createElement("div",{ref:De,className:M()(ie,Ot),style:fe})}):null};function Et(ye,ie){const re=document.createElement("div");re.style.position="absolute",re.style.left="0px",re.style.top="0px",ye==null||ye.insertBefore(re,ye==null?void 0:ye.firstChild),(0,me.s)(N.createElement(Lt,{target:ye,className:ie}),re)}function jt(ye,ie){function re(){const De=ye.current;Et(De,ie)}return re}var $e=ye=>{const{children:ie,disabled:re}=ye,{getPrefixCls:De}=(0,N.useContext)(Z.E_),le=(0,N.useRef)(null),ge=De("wave"),[,ce]=U(ge),je=jt(le,M()(ge,ce));if(N.useEffect(()=>{const Me=le.current;if(!Me||Me.nodeType!==1||re)return;const ne=xe=>{xe.target.tagName==="INPUT"||!(0,K.Z)(xe.target)||!Me.getAttribute||Me.getAttribute("disabled")||Me.disabled||Me.className.includes("disabled")||Me.className.includes("-leave")||je()};return Me.addEventListener("click",ne,!0),()=>{Me.removeEventListener("click",ne,!0)}},[re]),!N.isValidElement(ie))return ie!=null?ie:null;const J=(0,c.Yr)(ie)?(0,c.sQ)(ie.ref,le):le;return(0,B.Tm)(ie,{ref:J})}},18662:function(vt,Ee,g){"use strict";g.d(Ee,{ZP:function(){return Er}});var v=g(94184),M=g.n(v),c=g(98423),K=g(67294),N=g(53124),Z=g(98866),B=g(97647),L=g(4173),$=g(45353),U=g(48012),ke=function(Zt,Tr){var pn={};for(var un in Zt)Object.prototype.hasOwnProperty.call(Zt,un)&&Tr.indexOf(un)<0&&(pn[un]=Zt[un]);if(Zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Zn=0,un=Object.getOwnPropertySymbols(Zt);Zn<un.length;Zn++)Tr.indexOf(un[Zn])<0&&Object.prototype.propertyIsEnumerable.call(Zt,un[Zn])&&(pn[un[Zn]]=Zt[un[Zn]]);return pn};const We=K.createContext(void 0);var Le=Zt=>{const{getPrefixCls:Tr,direction:pn}=K.useContext(N.E_),{prefixCls:un,size:Zn,className:Cr}=Zt,Nr=ke(Zt,["prefixCls","size","className"]),bt=Tr("btn-group",un),[,,jn]=(0,U.dQ)();let Pt="";switch(Zn){case"large":Pt="lg";break;case"small":Pt="sm";break;case"middle":case void 0:break;default:}const zt=M()(bt,{[`${bt}-${Pt}`]:Pt,[`${bt}-rtl`]:pn==="rtl"},Cr,jn);return K.createElement(We.Provider,{value:Zn},K.createElement("div",Object.assign({},Nr,{className:zt})))},Se=g(96159);const et=/^[\u4e00-\u9fa5]{2}$/,at=et.test.bind(et);function Lt(Zt){return typeof Zt=="string"}function Et(Zt){return Zt==="text"||Zt==="link"}function jt(Zt,Tr){if(Zt==null)return;const pn=Tr?" ":"";return typeof Zt!="string"&&typeof Zt!="number"&&Lt(Zt.type)&&at(Zt.props.children)?(0,Se.Tm)(Zt,{children:Zt.props.children.split("").join(pn)}):typeof Zt=="string"?at(Zt)?K.createElement("span",null,Zt.split("").join(pn)):K.createElement("span",null,Zt):(0,Se.M2)(Zt)?K.createElement("span",null,Zt):Zt}function pe(Zt,Tr){let pn=!1;const un=[];return K.Children.forEach(Zt,Zn=>{const Cr=typeof Zn,Nr=Cr==="string"||Cr==="number";if(pn&&Nr){const bt=un.length-1,jn=un[bt];un[bt]=`${jn}${Zn}`}else un.push(Zn);pn=Nr}),K.Children.map(un,Zn=>jt(Zn,Tr))}const $e=null,ye=null,ie=null;var re=g(84273),De=g(62874);const le=()=>({width:0,opacity:0,transform:"scale(0)"}),ge=Zt=>({width:Zt.scrollWidth,opacity:1,transform:"scale(1)"});var je=Zt=>{let{prefixCls:Tr,loading:pn,existIcon:un}=Zt;const Zn=!!pn;return un?K.createElement("span",{className:`${Tr}-loading-icon`},K.createElement(re.Z,null)):K.createElement(De.Z,{visible:Zn,motionName:`${Tr}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:le,onAppearActive:ge,onEnterStart:le,onEnterActive:ge,onLeaveStart:ge,onLeaveActive:le},(Cr,Nr)=>{let{className:bt,style:jn}=Cr;return K.createElement("span",{className:`${Tr}-loading-icon`,style:jn,ref:Nr},K.createElement(re.Z,{className:bt}))})},J=g(45503),Me=g(67968);const ne=(Zt,Tr)=>({[`> span, > ${Zt}`]:{"&:not(:last-child)":{[`&, & > ${Zt}`]:{"&:not(:disabled)":{borderInlineEndColor:Tr}}},"&:not(:first-child)":{[`&, & > ${Zt}`]:{"&:not(:disabled)":{borderInlineStartColor:Tr}}}}});var Ne=Zt=>{const{componentCls:Tr,fontSize:pn,lineWidth:un,colorPrimaryHover:Zn,colorErrorHover:Cr}=Zt;return{[`${Tr}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${Tr}`]:{"&:not(:last-child)":{[`&, & > ${Tr}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-un,[`&, & > ${Tr}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[Tr]:{position:"relative",zIndex:1,[`&:hover,
          &:focus,
          &:active`]:{zIndex:2},"&[disabled]":{zIndex:0}},[`${Tr}-icon-only`]:{fontSize:pn}},ne(`${Tr}-primary`,Zn),ne(`${Tr}-danger`,Cr)]}},Pe=g(14747),He=g(80110);function lt(Zt,Tr){return{[`&-item:not(${Tr}-last-item)`]:{marginBottom:-Zt.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function ft(Zt,Tr){return{[`&-item:not(${Tr}-first-item):not(${Tr}-last-item)`]:{borderRadius:0},[`&-item${Tr}-first-item:not(${Tr}-last-item)`]:{[`&, &${Zt}-sm, &${Zt}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${Tr}-last-item:not(${Tr}-first-item)`]:{[`&, &${Zt}-sm, &${Zt}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function It(Zt){const Tr=`${Zt.componentCls}-compact-vertical`;return{[Tr]:Object.assign(Object.assign({},lt(Zt,Tr)),ft(Zt.componentCls,Tr))}}const fe=Zt=>{const{componentCls:Tr,iconCls:pn}=Zt;return{[Tr]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${Zt.lineWidth}px ${Zt.lineType} transparent`,cursor:"pointer",transition:`all ${Zt.motionDurationMid} ${Zt.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:Zt.lineHeight,color:Zt.colorText,"> span":{display:"inline-block"},[`> ${pn} + span, > span + ${pn}`]:{marginInlineStart:Zt.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},(0,Pe.Qy)(Zt)),[`&-icon-only${Tr}-compact-item`]:{flex:"none"},[`&-compact-item${Tr}-primary`]:{[`&:not([disabled]) + ${Tr}-compact-item${Tr}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-Zt.lineWidth,insetInlineStart:-Zt.lineWidth,display:"inline-block",width:Zt.lineWidth,height:`calc(100% + ${Zt.lineWidth*2}px)`,backgroundColor:Zt.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${Tr}-primary`]:{[`&:not([disabled]) + ${Tr}-compact-vertical-item${Tr}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-Zt.lineWidth,insetInlineStart:-Zt.lineWidth,display:"inline-block",width:`calc(100% + ${Zt.lineWidth*2}px)`,height:Zt.lineWidth,backgroundColor:Zt.colorPrimaryHover,content:'""'}}}}}}},_t=(Zt,Tr)=>({"&:not(:disabled)":{"&:hover":Zt,"&:active":Tr}}),Ye=Zt=>({minWidth:Zt.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Ot=Zt=>({borderRadius:Zt.controlHeight,paddingInlineStart:Zt.controlHeight/2,paddingInlineEnd:Zt.controlHeight/2}),mt=Zt=>({cursor:"not-allowed",borderColor:Zt.colorBorder,color:Zt.colorTextDisabled,backgroundColor:Zt.colorBgContainerDisabled,boxShadow:"none"}),Rt=(Zt,Tr,pn,un,Zn,Cr,Nr)=>({[`&${Zt}-background-ghost`]:Object.assign(Object.assign({color:Tr||void 0,backgroundColor:"transparent",borderColor:pn||void 0,boxShadow:"none"},_t(Object.assign({backgroundColor:"transparent"},Cr),Object.assign({backgroundColor:"transparent"},Nr))),{"&:disabled":{cursor:"not-allowed",color:un||void 0,borderColor:Zn||void 0}})}),pt=Zt=>({"&:disabled":Object.assign({},mt(Zt))}),Ge=Zt=>Object.assign({},pt(Zt)),wt=Zt=>({"&:disabled":{cursor:"not-allowed",color:Zt.colorTextDisabled}}),ee=Zt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ge(Zt)),{backgroundColor:Zt.colorBgContainer,borderColor:Zt.colorBorder,boxShadow:`0 ${Zt.controlOutlineWidth}px 0 ${Zt.controlTmpOutline}`}),_t({color:Zt.colorPrimaryHover,borderColor:Zt.colorPrimaryHover},{color:Zt.colorPrimaryActive,borderColor:Zt.colorPrimaryActive})),Rt(Zt.componentCls,Zt.colorBgContainer,Zt.colorBgContainer,Zt.colorTextDisabled,Zt.colorBorder)),{[`&${Zt.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:Zt.colorError,borderColor:Zt.colorError},_t({color:Zt.colorErrorHover,borderColor:Zt.colorErrorBorderHover},{color:Zt.colorErrorActive,borderColor:Zt.colorErrorActive})),Rt(Zt.componentCls,Zt.colorError,Zt.colorError,Zt.colorTextDisabled,Zt.colorBorder)),pt(Zt))}),Re=Zt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ge(Zt)),{color:Zt.colorTextLightSolid,backgroundColor:Zt.colorPrimary,boxShadow:`0 ${Zt.controlOutlineWidth}px 0 ${Zt.controlOutline}`}),_t({color:Zt.colorTextLightSolid,backgroundColor:Zt.colorPrimaryHover},{color:Zt.colorTextLightSolid,backgroundColor:Zt.colorPrimaryActive})),Rt(Zt.componentCls,Zt.colorPrimary,Zt.colorPrimary,Zt.colorTextDisabled,Zt.colorBorder,{color:Zt.colorPrimaryHover,borderColor:Zt.colorPrimaryHover},{color:Zt.colorPrimaryActive,borderColor:Zt.colorPrimaryActive})),{[`&${Zt.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:Zt.colorError,boxShadow:`0 ${Zt.controlOutlineWidth}px 0 ${Zt.colorErrorOutline}`},_t({backgroundColor:Zt.colorErrorHover},{backgroundColor:Zt.colorErrorActive})),Rt(Zt.componentCls,Zt.colorError,Zt.colorError,Zt.colorTextDisabled,Zt.colorBorder,{color:Zt.colorErrorHover,borderColor:Zt.colorErrorHover},{color:Zt.colorErrorActive,borderColor:Zt.colorErrorActive})),pt(Zt))}),dt=Zt=>Object.assign(Object.assign({},ee(Zt)),{borderStyle:"dashed"}),D=Zt=>Object.assign(Object.assign(Object.assign({color:Zt.colorLink},_t({color:Zt.colorLinkHover},{color:Zt.colorLinkActive})),wt(Zt)),{[`&${Zt.componentCls}-dangerous`]:Object.assign(Object.assign({color:Zt.colorError},_t({color:Zt.colorErrorHover},{color:Zt.colorErrorActive})),wt(Zt))}),q=Zt=>Object.assign(Object.assign(Object.assign({},_t({color:Zt.colorText,backgroundColor:Zt.colorBgTextHover},{color:Zt.colorText,backgroundColor:Zt.colorBgTextActive})),wt(Zt)),{[`&${Zt.componentCls}-dangerous`]:Object.assign(Object.assign({color:Zt.colorError},wt(Zt)),_t({color:Zt.colorErrorHover,backgroundColor:Zt.colorErrorBg},{color:Zt.colorErrorHover,backgroundColor:Zt.colorErrorBg}))}),G=Zt=>Object.assign(Object.assign({},mt(Zt)),{[`&${Zt.componentCls}:hover`]:Object.assign({},mt(Zt))}),O=Zt=>{const{componentCls:Tr}=Zt;return{[`${Tr}-default`]:ee(Zt),[`${Tr}-primary`]:Re(Zt),[`${Tr}-dashed`]:dt(Zt),[`${Tr}-link`]:D(Zt),[`${Tr}-text`]:q(Zt),[`${Tr}-disabled`]:G(Zt)}},k=function(Zt){let Tr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:pn,iconCls:un,controlHeight:Zn,fontSize:Cr,lineHeight:Nr,lineWidth:bt,borderRadius:jn,buttonPaddingHorizontal:Pt}=Zt,zt=Math.max(0,(Zn-Cr*Nr)/2-bt),Qt=Pt-bt,dr=`${pn}-icon-only`;return[{[`${pn}${Tr}`]:{fontSize:Cr,height:Zn,padding:`${zt}px ${Qt}px`,borderRadius:jn,[`&${dr}`]:{width:Zn,paddingInlineStart:0,paddingInlineEnd:0,[`&${pn}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${pn}-loading`]:{opacity:Zt.opacityLoading,cursor:"default"},[`${pn}-loading-icon`]:{transition:`width ${Zt.motionDurationSlow} ${Zt.motionEaseInOut}, opacity ${Zt.motionDurationSlow} ${Zt.motionEaseInOut}`},[`&:not(${dr}) ${pn}-loading-icon > ${un}`]:{marginInlineEnd:Zt.marginXS}}},{[`${pn}${pn}-circle${Tr}`]:Ye(Zt)},{[`${pn}${pn}-round${Tr}`]:Ot(Zt)}]},X=Zt=>k(Zt),W=Zt=>{const Tr=(0,J.TS)(Zt,{controlHeight:Zt.controlHeightSM,padding:Zt.paddingXS,buttonPaddingHorizontal:8,borderRadius:Zt.borderRadiusSM});return k(Tr,`${Zt.componentCls}-sm`)},ae=Zt=>{const Tr=(0,J.TS)(Zt,{controlHeight:Zt.controlHeightLG,fontSize:Zt.fontSizeLG,borderRadius:Zt.borderRadiusLG});return k(Tr,`${Zt.componentCls}-lg`)},Be=Zt=>{const{componentCls:Tr}=Zt;return{[Tr]:{[`&${Tr}-block`]:{width:"100%"}}}};var ve=(0,Me.Z)("Button",Zt=>{const{controlTmpOutline:Tr,paddingContentHorizontal:pn}=Zt,un=(0,J.TS)(Zt,{colorOutlineDefault:Tr,buttonPaddingHorizontal:pn});return[fe(un),W(un),X(un),ae(un),Be(un),O(un),Ne(un),(0,He.c)(Zt,{focus:!1}),It(Zt)]}),Je=function(Zt,Tr){var pn={};for(var un in Zt)Object.prototype.hasOwnProperty.call(Zt,un)&&Tr.indexOf(un)<0&&(pn[un]=Zt[un]);if(Zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Zn=0,un=Object.getOwnPropertySymbols(Zt);Zn<un.length;Zn++)Tr.indexOf(un[Zn])<0&&Object.prototype.propertyIsEnumerable.call(Zt,un[Zn])&&(pn[un[Zn]]=Zt[un[Zn]]);return pn};function ot(Zt){return Zt==="danger"?{danger:!0}:{type:Zt}}function Qe(Zt){if(typeof Zt=="object"&&Zt){const Tr=Zt==null?void 0:Zt.delay;return{loading:!1,delay:!Number.isNaN(Tr)&&typeof Tr=="number"?Tr:0}}return{loading:!!Zt,delay:0}}const ir=(Zt,Tr)=>{const{loading:pn=!1,prefixCls:un,type:Zn="default",danger:Cr,shape:Nr="default",size:bt,disabled:jn,className:Pt,rootClassName:zt,children:Qt,icon:dr,ghost:_r=!1,block:Hr=!1,htmlType:Qr="button"}=Zt,fr=Je(Zt,["loading","prefixCls","type","danger","shape","size","disabled","className","rootClassName","children","icon","ghost","block","htmlType"]),{getPrefixCls:tt,autoInsertSpaceInButton:Yr,direction:Tn}=K.useContext(N.E_),wn=tt("btn",un),[Nn,Si]=ve(wn),fa=K.useContext(B.Z),Xi=K.useContext(Z.Z),Ln=jn!=null?jn:Xi,na=K.useContext(We),xi=K.useMemo(()=>Qe(pn),[pn]),[ta,La]=K.useState(xi.loading),[Ki,jo]=K.useState(!1),uo=Tr||K.createRef(),An=()=>K.Children.count(Qt)===1&&!dr&&!Et(Zn),gn=()=>{if(!uo||!uo.current||Yr===!1)return;const Hs=uo.current.textContent;An()&&at(Hs)?Ki||jo(!0):Ki&&jo(!1)};K.useEffect(()=>{let Hs=null;xi.delay>0?Hs=window.setTimeout(()=>{Hs=null,La(!0)},xi.delay):La(xi.loading);function no(){Hs&&(window.clearTimeout(Hs),Hs=null)}return no},[xi]),K.useEffect(gn,[uo]);const Oi=Hs=>{const{onClick:no}=Zt;if(ta||Ln){Hs.preventDefault();return}no==null||no(Hs)},fi=Yr!==!1,{compactSize:va,compactItemClassnames:wa}=(0,L.ri)(wn,Tn),Ca={large:"lg",small:"sm",middle:void 0},Aa=va||na||bt||fa,ma=Aa&&Ca[Aa]||"",ka=ta?"loading":dr,Uo=(0,c.Z)(fr,["navigate"]),ha=Uo.href!==void 0&&Ln,xa=M()(wn,Si,{[`${wn}-${Nr}`]:Nr!=="default"&&Nr,[`${wn}-${Zn}`]:Zn,[`${wn}-${ma}`]:ma,[`${wn}-icon-only`]:!Qt&&Qt!==0&&!!ka,[`${wn}-background-ghost`]:_r&&!Et(Zn),[`${wn}-loading`]:ta,[`${wn}-two-chinese-chars`]:Ki&&fi&&!ta,[`${wn}-block`]:Hr,[`${wn}-dangerous`]:!!Cr,[`${wn}-rtl`]:Tn==="rtl",[`${wn}-disabled`]:ha},wa,Pt,zt),eo=dr&&!ta?dr:K.createElement(je,{existIcon:!!dr,prefixCls:wn,loading:!!ta}),Te=Qt||Qt===0?pe(Qt,An()&&fi):null;if(Uo.href!==void 0)return Nn(K.createElement("a",Object.assign({},Uo,{className:xa,onClick:Oi,ref:uo}),eo,Te));let Po=K.createElement("button",Object.assign({},fr,{type:Qr,className:xa,onClick:Oi,disabled:Ln,ref:uo}),eo,Te);return Et(Zn)||(Po=K.createElement($.Z,{disabled:!!ta},Po)),Nn(Po)},mr=K.forwardRef(ir);mr.Group=Le,mr.__ANT_BUTTON=!0;var Ar=mr,Er=Ar},6226:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return We}});var v=g(94184),M=g.n(v),c=g(67294),K=g(53124),N=g(99134),Z=g(6999),B=function(me,Le){var Se={};for(var et in me)Object.prototype.hasOwnProperty.call(me,et)&&Le.indexOf(et)<0&&(Se[et]=me[et]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,et=Object.getOwnPropertySymbols(me);at<et.length;at++)Le.indexOf(et[at])<0&&Object.prototype.propertyIsEnumerable.call(me,et[at])&&(Se[et[at]]=me[et[at]]);return Se};function L(me){return typeof me=="number"?`${me} ${me} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(me)?`0 0 ${me}`:me}const $=["xs","sm","md","lg","xl","xxl"];var ke=c.forwardRef((me,Le)=>{const{getPrefixCls:Se,direction:et}=c.useContext(K.E_),{gutter:at,wrap:Lt,supportFlexGap:Et}=c.useContext(N.Z),{prefixCls:jt,span:pe,order:$e,offset:ye,push:ie,pull:re,className:De,children:le,flex:ge,style:ce}=me,je=B(me,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),J=Se("col",jt),[Me,ne]=(0,Z.c)(J);let xe={};$.forEach(He=>{let lt={};const ft=me[He];typeof ft=="number"?lt.span=ft:typeof ft=="object"&&(lt=ft||{}),delete je[He],xe=Object.assign(Object.assign({},xe),{[`${J}-${He}-${lt.span}`]:lt.span!==void 0,[`${J}-${He}-order-${lt.order}`]:lt.order||lt.order===0,[`${J}-${He}-offset-${lt.offset}`]:lt.offset||lt.offset===0,[`${J}-${He}-push-${lt.push}`]:lt.push||lt.push===0,[`${J}-${He}-pull-${lt.pull}`]:lt.pull||lt.pull===0,[`${J}-rtl`]:et==="rtl"})});const Ne=M()(J,{[`${J}-${pe}`]:pe!==void 0,[`${J}-order-${$e}`]:$e,[`${J}-offset-${ye}`]:ye,[`${J}-push-${ie}`]:ie,[`${J}-pull-${re}`]:re},De,xe,ne),Pe={};if(at&&at[0]>0){const He=at[0]/2;Pe.paddingLeft=He,Pe.paddingRight=He}if(at&&at[1]>0&&!Et){const He=at[1]/2;Pe.paddingTop=He,Pe.paddingBottom=He}return ge&&(Pe.flex=L(ge),Lt===!1&&!Pe.minWidth&&(Pe.minWidth=0)),Me(c.createElement("div",Object.assign({},je,{style:Object.assign(Object.assign({},Pe),ce),className:Ne,ref:Le}),le))}),We=ke},98866:function(vt,Ee,g){"use strict";g.d(Ee,{n:function(){return c}});var v=g(67294);const M=v.createContext(!1),c=K=>{let{children:N,disabled:Z}=K;const B=v.useContext(M);return v.createElement(M.Provider,{value:Z!=null?Z:B},N)};Ee.Z=M},97647:function(vt,Ee,g){"use strict";g.d(Ee,{q:function(){return c}});var v=g(67294);const M=v.createContext(void 0),c=K=>{let{children:N,size:Z}=K;const B=v.useContext(M);return v.createElement(M.Provider,{value:Z||B},N)};Ee.Z=M},53124:function(vt,Ee,g){"use strict";g.d(Ee,{C:function(){return N},E_:function(){return K},oR:function(){return M}});var v=g(67294);const M="anticon",c=(Z,B)=>B||(Z?`ant-${Z}`:"ant"),K=v.createContext({getPrefixCls:c,iconPrefixCls:M}),{Consumer:N}=K},88258:function(vt,Ee,g){"use strict";var v=g(67294),M=g(53124),c=g(32983);const K=N=>{const{componentName:Z}=N,{getPrefixCls:B}=(0,v.useContext)(M.E_),L=B("empty");switch(Z){case"Table":case"List":return v.createElement(c.Z,{image:c.Z.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return v.createElement(c.Z,{image:c.Z.PRESENTED_IMAGE_SIMPLE,className:`${L}-small`});default:return v.createElement(c.Z,null)}};Ee.Z=K},32170:function(vt,Ee,g){"use strict";g.d(Ee,{ZP:function(){return Ot},w6:function(){return fe}});var v=g(51222),M=g(63017),c=g(24407),K=g(56982),N=g(67294),Z=g(88526);let B=Object.assign({},Z.Z.Modal);function L(mt){mt?B=Object.assign(Object.assign({},B),mt):B=Object.assign({},Z.Z.Modal)}function $(){return B}var U=g(76745);const ke="internalMark";var me=mt=>{const{locale:Rt={},children:pt,_ANT_MARK__:Ge}=mt;N.useEffect(()=>(L(Rt&&Rt.Modal),()=>{L()}),[Rt]);const wt=N.useMemo(()=>Object.assign(Object.assign({},Rt),{exist:!0}),[Rt]);return N.createElement(U.Z.Provider,{value:wt},pt)},Le=g(74342),Se=g(48012),et=g(2790),at=g(53124),Lt=g(16397),Et=g(10274),jt=g(98924),pe=g(44958);const $e=`-ant-${Date.now()}-${Math.random()}`;function ye(mt,Rt){const pt={},Ge=(Re,dt)=>{let D=Re.clone();return D=(dt==null?void 0:dt(D))||D,D.toRgbString()},wt=(Re,dt)=>{const D=new Et.C(Re),q=(0,Lt.R_)(D.toRgbString());pt[`${dt}-color`]=Ge(D),pt[`${dt}-color-disabled`]=q[1],pt[`${dt}-color-hover`]=q[4],pt[`${dt}-color-active`]=q[6],pt[`${dt}-color-outline`]=D.clone().setAlpha(.2).toRgbString(),pt[`${dt}-color-deprecated-bg`]=q[0],pt[`${dt}-color-deprecated-border`]=q[2]};if(Rt.primaryColor){wt(Rt.primaryColor,"primary");const Re=new Et.C(Rt.primaryColor),dt=(0,Lt.R_)(Re.toRgbString());dt.forEach((q,G)=>{pt[`primary-${G+1}`]=q}),pt["primary-color-deprecated-l-35"]=Ge(Re,q=>q.lighten(35)),pt["primary-color-deprecated-l-20"]=Ge(Re,q=>q.lighten(20)),pt["primary-color-deprecated-t-20"]=Ge(Re,q=>q.tint(20)),pt["primary-color-deprecated-t-50"]=Ge(Re,q=>q.tint(50)),pt["primary-color-deprecated-f-12"]=Ge(Re,q=>q.setAlpha(q.getAlpha()*.12));const D=new Et.C(dt[0]);pt["primary-color-active-deprecated-f-30"]=Ge(D,q=>q.setAlpha(q.getAlpha()*.3)),pt["primary-color-active-deprecated-d-02"]=Ge(D,q=>q.darken(2))}return Rt.successColor&&wt(Rt.successColor,"success"),Rt.warningColor&&wt(Rt.warningColor,"warning"),Rt.errorColor&&wt(Rt.errorColor,"error"),Rt.infoColor&&wt(Rt.infoColor,"info"),`
  :root {
    ${Object.keys(pt).map(Re=>`--${mt}-${Re}: ${pt[Re]};`).join(`
`)}
  }
  `.trim()}function ie(mt,Rt){const pt=ye(mt,Rt);(0,jt.Z)()&&(0,pe.hq)(pt,`${$e}-dynamic-theme`)}var re=g(98866),De=g(91881);function le(mt,Rt){const pt=mt||{},Ge=pt.inherit===!1||!Rt?Se.u_:Rt;return(0,K.Z)(()=>{if(!mt)return Rt;const ee=Object.assign({},Ge.components);return Object.keys(mt.components||{}).forEach(Re=>{ee[Re]=Object.assign(Object.assign({},ee[Re]),mt.components[Re])}),Object.assign(Object.assign(Object.assign({},Ge),pt),{token:Object.assign(Object.assign({},Ge.token),pt.token),components:ee})},[pt,Ge],(ee,Re)=>ee.some((dt,D)=>{const q=Re[D];return!(0,De.Z)(dt,q,!0)}))}var ge=g(97647),ce=g(14747),J=mt=>{const[Rt,pt]=(0,Se.dQ)();return(0,v.xy)({theme:Rt,token:pt,hashId:"",path:["ant-design-icons",mt]},()=>[{[`.${mt}`]:Object.assign(Object.assign({},(0,ce.Ro)()),{[`.${mt} .${mt}-icon`]:{display:"block"}})}])},Me=function(mt,Rt){var pt={};for(var Ge in mt)Object.prototype.hasOwnProperty.call(mt,Ge)&&Rt.indexOf(Ge)<0&&(pt[Ge]=mt[Ge]);if(mt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,Ge=Object.getOwnPropertySymbols(mt);wt<Ge.length;wt++)Rt.indexOf(Ge[wt])<0&&Object.prototype.propertyIsEnumerable.call(mt,Ge[wt])&&(pt[Ge[wt]]=mt[Ge[wt]]);return pt};const ne=null,xe=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"],Ne="ant";let Pe,He;function lt(){return Pe||Ne}function ft(){return He||at.oR}const It=mt=>{let{prefixCls:Rt,iconPrefixCls:pt,theme:Ge}=mt;Rt!==void 0&&(Pe=Rt),pt!==void 0&&(He=pt),Ge&&ie(lt(),Ge)},fe=()=>({getPrefixCls:(mt,Rt)=>Rt||(mt?`${lt()}-${mt}`:lt()),getIconPrefixCls:ft,getRootPrefixCls:()=>Pe||lt()}),_t=mt=>{var Rt,pt;const{children:Ge,csp:wt,autoInsertSpaceInButton:ee,form:Re,locale:dt,componentSize:D,direction:q,space:G,virtual:O,dropdownMatchSelectWidth:k,legacyLocale:X,parentContext:W,iconPrefixCls:ae,theme:Be,componentDisabled:ve}=mt,Je=N.useCallback((Nr,bt)=>{const{prefixCls:jn}=mt;if(bt)return bt;const Pt=jn||W.getPrefixCls("");return Nr?`${Pt}-${Nr}`:Pt},[W.getPrefixCls,mt.prefixCls]),ot=ae||W.iconPrefixCls||at.oR,Qe=ot!==W.iconPrefixCls,ir=wt||W.csp,mr=J(ot),Ar=le(Be,W.theme),Er={csp:ir,autoInsertSpaceInButton:ee,locale:dt||X,direction:q,space:G,virtual:O,dropdownMatchSelectWidth:k,getPrefixCls:Je,iconPrefixCls:ot,theme:Ar},Zt=Object.assign({},W);Object.keys(Er).forEach(Nr=>{Er[Nr]!==void 0&&(Zt[Nr]=Er[Nr])}),xe.forEach(Nr=>{const bt=mt[Nr];bt&&(Zt[Nr]=bt)});const Tr=(0,K.Z)(()=>Zt,Zt,(Nr,bt)=>{const jn=Object.keys(Nr),Pt=Object.keys(bt);return jn.length!==Pt.length||jn.some(zt=>Nr[zt]!==bt[zt])}),pn=N.useMemo(()=>({prefixCls:ot,csp:ir}),[ot,ir]);let un=Qe?mr(Ge):Ge,Zn={};dt&&(Zn=((Rt=dt.Form)===null||Rt===void 0?void 0:Rt.defaultValidateMessages)||((pt=Z.Z.Form)===null||pt===void 0?void 0:pt.defaultValidateMessages)||{}),Re&&Re.validateMessages&&(Zn=Object.assign(Object.assign({},Zn),Re.validateMessages)),Object.keys(Zn).length>0&&(un=N.createElement(c.RV,{validateMessages:Zn},Ge)),dt&&(un=N.createElement(me,{locale:dt,_ANT_MARK__:ke},un)),(ot||ir)&&(un=N.createElement(M.Z.Provider,{value:pn},un)),D&&(un=N.createElement(ge.q,{size:D},un));const Cr=N.useMemo(()=>{const Nr=Ar||{},{algorithm:bt,token:jn}=Nr,Pt=Me(Nr,["algorithm","token"]),zt=bt&&(!Array.isArray(bt)||bt.length>0)?(0,v.jG)(bt):void 0;return Object.assign(Object.assign({},Pt),{theme:zt,token:Object.assign(Object.assign({},et.Z),jn)})},[Ar]);return Be&&(un=N.createElement(Se.Mj.Provider,{value:Cr},un)),ve!==void 0&&(un=N.createElement(re.n,{disabled:ve},un)),N.createElement(at.E_.Provider,{value:Tr},un)},Ye=mt=>N.createElement(Le.Z,null,(Rt,pt,Ge)=>N.createElement(at.C,null,wt=>N.createElement(_t,Object.assign({parentContext:wt,legacyLocale:Ge},mt))));Ye.ConfigContext=at.E_,Ye.SizeContext=ge.Z,Ye.config=It;var Ot=Ye},27511:function(vt,Ee,g){"use strict";g.d(Ee,{K:function(){return $e},Z:function(){return ge}});var v=g(94184),M=g.n(v),c=g(50344),K=g(67294),N=g(53124),Z=g(96159),B=g(74443),$=ce=>{let{children:je}=ce;return je};function U(ce){return ce!=null}var We=ce=>{let{itemPrefixCls:je,component:J,span:Me,className:ne,style:xe,labelStyle:Ne,contentStyle:Pe,bordered:He,label:lt,content:ft,colon:It}=ce;const fe=J;return He?K.createElement(fe,{className:M()({[`${je}-item-label`]:U(lt),[`${je}-item-content`]:U(ft)},ne),style:xe,colSpan:Me},U(lt)&&K.createElement("span",{style:Ne},lt),U(ft)&&K.createElement("span",{style:Pe},ft)):K.createElement(fe,{className:M()(`${je}-item`,ne),style:xe,colSpan:Me},K.createElement("div",{className:`${je}-item-container`},(lt||lt===0)&&K.createElement("span",{className:M()(`${je}-item-label`,{[`${je}-item-no-colon`]:!It}),style:Ne},lt),(ft||ft===0)&&K.createElement("span",{className:M()(`${je}-item-content`),style:Pe},ft)))};function me(ce,je,J){let{colon:Me,prefixCls:ne,bordered:xe}=je,{component:Ne,type:Pe,showLabel:He,showContent:lt,labelStyle:ft,contentStyle:It}=J;return ce.map((fe,_t)=>{let{props:{label:Ye,children:Ot,prefixCls:mt=ne,className:Rt,style:pt,labelStyle:Ge,contentStyle:wt,span:ee=1},key:Re}=fe;return typeof Ne=="string"?K.createElement(We,{key:`${Pe}-${Re||_t}`,className:Rt,style:pt,labelStyle:Object.assign(Object.assign({},ft),Ge),contentStyle:Object.assign(Object.assign({},It),wt),span:ee,colon:Me,component:Ne,itemPrefixCls:mt,bordered:xe,label:He?Ye:null,content:lt?Ot:null}):[K.createElement(We,{key:`label-${Re||_t}`,className:Rt,style:Object.assign(Object.assign(Object.assign({},ft),pt),Ge),span:1,colon:Me,component:Ne[0],itemPrefixCls:mt,bordered:xe,label:Ye}),K.createElement(We,{key:`content-${Re||_t}`,className:Rt,style:Object.assign(Object.assign(Object.assign({},It),pt),wt),span:ee*2-1,component:Ne[1],itemPrefixCls:mt,bordered:xe,content:Ot})]})}var Se=ce=>{const je=K.useContext($e),{prefixCls:J,vertical:Me,row:ne,index:xe,bordered:Ne}=ce;return Me?K.createElement(K.Fragment,null,K.createElement("tr",{key:`label-${xe}`,className:`${J}-row`},me(ne,ce,Object.assign({component:"th",type:"label",showLabel:!0},je))),K.createElement("tr",{key:`content-${xe}`,className:`${J}-row`},me(ne,ce,Object.assign({component:"td",type:"content",showContent:!0},je)))):K.createElement("tr",{key:xe,className:`${J}-row`},me(ne,ce,Object.assign({component:Ne?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},je)))},et=g(67968),at=g(45503),Lt=g(14747);const Et=ce=>{const{componentCls:je,descriptionsSmallPadding:J,descriptionsDefaultPadding:Me,descriptionsMiddlePadding:ne,descriptionsBg:xe}=ce;return{[`&${je}-bordered`]:{[`${je}-view`]:{border:`${ce.lineWidth}px ${ce.lineType} ${ce.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${je}-item-label, ${je}-item-content`]:{padding:Me,borderInlineEnd:`${ce.lineWidth}px ${ce.lineType} ${ce.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${je}-item-label`]:{color:ce.colorTextSecondary,backgroundColor:xe,"&::after":{display:"none"}},[`${je}-row`]:{borderBottom:`${ce.lineWidth}px ${ce.lineType} ${ce.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${je}-middle`]:{[`${je}-item-label, ${je}-item-content`]:{padding:ne}},[`&${je}-small`]:{[`${je}-item-label, ${je}-item-content`]:{padding:J}}}}},jt=ce=>{const{componentCls:je,descriptionsExtraColor:J,descriptionItemPaddingBottom:Me,descriptionsItemLabelColonMarginRight:ne,descriptionsItemLabelColonMarginLeft:xe,descriptionsTitleMarginBottom:Ne}=ce;return{[je]:Object.assign(Object.assign(Object.assign({},(0,Lt.Wf)(ce)),Et(ce)),{["&-rtl"]:{direction:"rtl"},[`${je}-header`]:{display:"flex",alignItems:"center",marginBottom:Ne},[`${je}-title`]:Object.assign(Object.assign({},Lt.vS),{flex:"auto",color:ce.colorText,fontWeight:ce.fontWeightStrong,fontSize:ce.fontSizeLG,lineHeight:ce.lineHeightLG}),[`${je}-extra`]:{marginInlineStart:"auto",color:J,fontSize:ce.fontSize},[`${je}-view`]:{width:"100%",borderRadius:ce.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${je}-row`]:{"> th, > td":{paddingBottom:Me},"&:last-child":{borderBottom:"none"}},[`${je}-item-label`]:{color:ce.colorTextTertiary,fontWeight:"normal",fontSize:ce.fontSize,lineHeight:ce.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${xe}px ${ne}px`},[`&${je}-item-no-colon::after`]:{content:'""'}},[`${je}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${je}-item-content`]:{display:"table-cell",flex:1,color:ce.colorText,fontSize:ce.fontSize,lineHeight:ce.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${je}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${je}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${je}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${je}-row`]:{"> th, > td":{paddingBottom:ce.paddingSM}}},"&-small":{[`${je}-row`]:{"> th, > td":{paddingBottom:ce.paddingXS}}}})}};var pe=(0,et.Z)("Descriptions",ce=>{const je=ce.colorFillAlter,J=ce.fontSizeSM*ce.lineHeightSM,Me=ce.colorText,ne=`${ce.paddingXS}px ${ce.padding}px`,xe=`${ce.padding}px ${ce.paddingLG}px`,Ne=`${ce.paddingSM}px ${ce.paddingLG}px`,Pe=ce.padding,He=ce.marginXS,lt=ce.marginXXS/2,ft=(0,at.TS)(ce,{descriptionsBg:je,descriptionsTitleMarginBottom:J,descriptionsExtraColor:Me,descriptionItemPaddingBottom:Pe,descriptionsSmallPadding:ne,descriptionsDefaultPadding:xe,descriptionsMiddlePadding:Ne,descriptionsItemLabelColonMarginRight:He,descriptionsItemLabelColonMarginLeft:lt});return[jt(ft)]});const $e=K.createContext({}),ye={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function ie(ce,je){if(typeof ce=="number")return ce;if(typeof ce=="object")for(let J=0;J<B.c.length;J++){const Me=B.c[J];if(je[Me]&&ce[Me]!==void 0)return ce[Me]||ye[Me]}return 3}function re(ce,je,J){let Me=ce;return(J===void 0||J>je)&&(Me=(0,Z.Tm)(ce,{span:je})),Me}function De(ce,je){const J=(0,c.Z)(ce).filter(Ne=>Ne),Me=[];let ne=[],xe=je;return J.forEach((Ne,Pe)=>{var He;const lt=(He=Ne.props)===null||He===void 0?void 0:He.span,ft=lt||1;if(Pe===J.length-1){ne.push(re(Ne,xe,lt)),Me.push(ne);return}ft<xe?(xe-=ft,ne.push(Ne)):(ne.push(re(Ne,xe,ft)),Me.push(ne),xe=je,ne=[])}),Me}function le(ce){let{prefixCls:je,title:J,extra:Me,column:ne=ye,colon:xe=!0,bordered:Ne,layout:Pe,children:He,className:lt,rootClassName:ft,style:It,size:fe,labelStyle:_t,contentStyle:Ye}=ce;const{getPrefixCls:Ot,direction:mt}=K.useContext(N.E_),Rt=Ot("descriptions",je),[pt,Ge]=K.useState({}),wt=ie(ne,pt),[ee,Re]=pe(Rt),dt=(0,B.Z)();K.useEffect(()=>{const G=dt.subscribe(O=>{typeof ne=="object"&&Ge(O)});return()=>{dt.unsubscribe(G)}},[]);const D=De(He,wt),q=K.useMemo(()=>({labelStyle:_t,contentStyle:Ye}),[_t,Ye]);return ee(K.createElement($e.Provider,{value:q},K.createElement("div",{className:M()(Rt,{[`${Rt}-${fe}`]:fe&&fe!=="default",[`${Rt}-bordered`]:!!Ne,[`${Rt}-rtl`]:mt==="rtl"},lt,ft,Re),style:It},(J||Me)&&K.createElement("div",{className:`${Rt}-header`},J&&K.createElement("div",{className:`${Rt}-title`},J),Me&&K.createElement("div",{className:`${Rt}-extra`},Me)),K.createElement("div",{className:`${Rt}-view`},K.createElement("table",null,K.createElement("tbody",null,D.map((G,O)=>K.createElement(Se,{key:O,index:O,colon:xe,prefixCls:Rt,vertical:Pe==="vertical",bordered:Ne,row:G}))))))))}le.Item=$;var ge=le},96074:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return We}});var v=g(94184),M=g.n(v),c=g(67294),K=g(53124),N=g(67968),Z=g(45503),B=g(14747);const L=me=>{const{componentCls:Le,sizePaddingEdgeHorizontal:Se,colorSplit:et,lineWidth:at}=me;return{[Le]:Object.assign(Object.assign({},(0,B.Wf)(me)),{borderBlockStart:`${at}px solid ${et}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${me.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${at}px solid ${et}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${me.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${Le}-with-text`]:{display:"flex",alignItems:"center",margin:`${me.dividerHorizontalWithTextGutterMargin}px 0`,color:me.colorTextHeading,fontWeight:500,fontSize:me.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${et}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${at}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${Le}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${Le}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${Le}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:et,borderStyle:"dashed",borderWidth:`${at}px 0 0`},[`&-horizontal${Le}-with-text${Le}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${Le}-dashed`]:{borderInlineStart:at,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${Le}-with-text`]:{color:me.colorText,fontWeight:"normal",fontSize:me.fontSize},[`&-horizontal${Le}-with-text-left${Le}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${Le}-inner-text`]:{paddingInlineStart:Se}},[`&-horizontal${Le}-with-text-right${Le}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${Le}-inner-text`]:{paddingInlineEnd:Se}}})}};var $=(0,N.Z)("Divider",me=>{const Le=(0,Z.TS)(me,{dividerVerticalGutterMargin:me.marginXS,dividerHorizontalWithTextGutterMargin:me.margin,dividerHorizontalGutterMargin:me.marginLG});return[L(Le)]},{sizePaddingEdgeHorizontal:0}),U=function(me,Le){var Se={};for(var et in me)Object.prototype.hasOwnProperty.call(me,et)&&Le.indexOf(et)<0&&(Se[et]=me[et]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,et=Object.getOwnPropertySymbols(me);at<et.length;at++)Le.indexOf(et[at])<0&&Object.prototype.propertyIsEnumerable.call(me,et[at])&&(Se[et[at]]=me[et[at]]);return Se},We=me=>{const{getPrefixCls:Le,direction:Se}=c.useContext(K.E_),{prefixCls:et,type:at="horizontal",orientation:Lt="center",orientationMargin:Et,className:jt,rootClassName:pe,children:$e,dashed:ye,plain:ie}=me,re=U(me,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain"]),De=Le("divider",et),[le,ge]=$(De),ce=Lt.length>0?`-${Lt}`:Lt,je=!!$e,J=Lt==="left"&&Et!=null,Me=Lt==="right"&&Et!=null,ne=M()(De,ge,`${De}-${at}`,{[`${De}-with-text`]:je,[`${De}-with-text${ce}`]:je,[`${De}-dashed`]:!!ye,[`${De}-plain`]:!!ie,[`${De}-rtl`]:Se==="rtl",[`${De}-no-default-orientation-margin-left`]:J,[`${De}-no-default-orientation-margin-right`]:Me},jt,pe),xe=Object.assign(Object.assign({},J&&{marginLeft:Et}),Me&&{marginRight:Et});return le(c.createElement("div",Object.assign({className:ne},re,{role:"separator"}),$e&&at!=="vertical"&&c.createElement("span",{className:`${De}-inner-text`,style:xe},$e)))}},23672:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Re}});var v=g(65793),M=g(94184),c=g.n(M),K=g(60057),N=g(66680),Z=g(21770),B=g(98423),L=g(67294),$=g(53124),U=g(82610),ke=g(76529),We=g(4173),me=g(80636),Le=g(8745),Se=g(96159),et=g(16853),at=g(18662),Lt=g(50344),Et=g(37193);function jt(dt){let{className:D,direction:q,index:G,marginDirection:O,children:k,split:X,wrap:W}=dt;const{horizontalSize:ae,verticalSize:Be,latestIndex:ve,supportFlexGap:Je}=L.useContext(ye);let ot={};return Je||(q==="vertical"?G<ve&&(ot={marginBottom:ae/(X?2:1)}):ot=Object.assign(Object.assign({},G<ve&&{[O]:ae/(X?2:1)}),W&&{paddingBottom:Be})),k==null?null:L.createElement(L.Fragment,null,L.createElement("div",{className:D,style:ot},k),G<ve&&X&&L.createElement("span",{className:`${D}-split`,style:ot},X))}var pe=g(51916),$e=function(dt,D){var q={};for(var G in dt)Object.prototype.hasOwnProperty.call(dt,G)&&D.indexOf(G)<0&&(q[G]=dt[G]);if(dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,G=Object.getOwnPropertySymbols(dt);O<G.length;O++)D.indexOf(G[O])<0&&Object.prototype.propertyIsEnumerable.call(dt,G[O])&&(q[G[O]]=dt[G[O]]);return q};const ye=L.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),ie={small:8,middle:16,large:24};function re(dt){return typeof dt=="string"?ie[dt]:dt||0}const le=dt=>{const{getPrefixCls:D,space:q,direction:G}=L.useContext($.E_),{size:O=(q==null?void 0:q.size)||"small",align:k,className:X,rootClassName:W,children:ae,direction:Be="horizontal",prefixCls:ve,split:Je,style:ot,wrap:Qe=!1}=dt,ir=$e(dt,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap"]),mr=(0,Et.Z)(),[Ar,Er]=L.useMemo(()=>(Array.isArray(O)?O:[O,O]).map(dr=>re(dr)),[O]),Zt=(0,Lt.Z)(ae,{keepEmpty:!0}),Tr=k===void 0&&Be==="horizontal"?"center":k,pn=D("space",ve),[un,Zn]=(0,pe.Z)(pn),Cr=c()(pn,Zn,`${pn}-${Be}`,{[`${pn}-rtl`]:G==="rtl",[`${pn}-align-${Tr}`]:Tr},X,W),Nr=`${pn}-item`,bt=G==="rtl"?"marginLeft":"marginRight";let jn=0;const Pt=Zt.map((dr,_r)=>{dr!=null&&(jn=_r);const Hr=dr&&dr.key||`${Nr}-${_r}`;return L.createElement(jt,{className:Nr,key:Hr,direction:Be,index:_r,marginDirection:bt,split:Je,wrap:Qe},dr)}),zt=L.useMemo(()=>({horizontalSize:Ar,verticalSize:Er,latestIndex:jn,supportFlexGap:mr}),[Ar,Er,jn,mr]);if(Zt.length===0)return null;const Qt={};return Qe&&(Qt.flexWrap="wrap",mr||(Qt.marginBottom=-Er)),mr&&(Qt.columnGap=Ar,Qt.rowGap=Er),un(L.createElement("div",Object.assign({className:Cr,style:Object.assign(Object.assign({},Qt),ot)},ir),L.createElement(ye.Provider,{value:zt},Pt)))};le.Compact=We.ZP;var ge=le,ce=g(14747),je=g(67771),J=g(33297),Me=g(50438),ne=g(77786),xe=g(67968),Ne=g(45503),He=dt=>{const{componentCls:D,antCls:q,paddingXS:G,opacityLoading:O}=dt;return{[`${D}-button`]:{whiteSpace:"nowrap",[`&${q}-btn-group > ${q}-btn`]:{[`&-loading, &-loading + ${q}-btn`]:{cursor:"default",pointerEvents:"none",opacity:O},[`&:last-child:not(:first-child):not(${q}-btn-icon-only)`]:{paddingInline:G}}}}},ft=dt=>{const{componentCls:D,menuCls:q,colorError:G,colorTextLightSolid:O}=dt,k=`${q}-item`;return{[`${D}, ${D}-menu-submenu`]:{[`${q} ${k}`]:{[`&${k}-danger:not(${k}-disabled)`]:{color:G,"&:hover":{color:O,backgroundColor:G}}}}}};const It=dt=>{const{componentCls:D,menuCls:q,zIndexPopup:G,dropdownArrowDistance:O,sizePopupArrow:k,antCls:X,iconCls:W,motionDurationMid:ae,dropdownPaddingVertical:Be,fontSize:ve,dropdownEdgeChildPadding:Je,colorTextDisabled:ot,fontSizeIcon:Qe,controlPaddingHorizontal:ir,colorBgElevated:mr}=dt;return[{[D]:Object.assign(Object.assign({},(0,ce.Wf)(dt)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:G,display:"block","&::before":{position:"absolute",insetBlock:-O+k/2,zIndex:-9999,opacity:1e-4,content:'""'},[`${D}-wrap`]:{position:"relative",[`${X}-btn > ${W}-down`]:{fontSize:Qe},[`${W}-down::before`]:{transition:`transform ${ae}`}},[`${D}-wrap-open`]:{[`${W}-down::before`]:{transform:"rotate(180deg)"}},[`
        &-hidden,
        &-menu-hidden,
        &-menu-submenu-hidden
      `]:{display:"none"},[`&${X}-slide-down-enter${X}-slide-down-enter-active${D}-placement-bottomLeft,
          &${X}-slide-down-appear${X}-slide-down-appear-active${D}-placement-bottomLeft,
          &${X}-slide-down-enter${X}-slide-down-enter-active${D}-placement-bottom,
          &${X}-slide-down-appear${X}-slide-down-appear-active${D}-placement-bottom,
          &${X}-slide-down-enter${X}-slide-down-enter-active${D}-placement-bottomRight,
          &${X}-slide-down-appear${X}-slide-down-appear-active${D}-placement-bottomRight`]:{animationName:je.fJ},[`&${X}-slide-up-enter${X}-slide-up-enter-active${D}-placement-topLeft,
          &${X}-slide-up-appear${X}-slide-up-appear-active${D}-placement-topLeft,
          &${X}-slide-up-enter${X}-slide-up-enter-active${D}-placement-top,
          &${X}-slide-up-appear${X}-slide-up-appear-active${D}-placement-top,
          &${X}-slide-up-enter${X}-slide-up-enter-active${D}-placement-topRight,
          &${X}-slide-up-appear${X}-slide-up-appear-active${D}-placement-topRight`]:{animationName:je.Qt},[`&${X}-slide-down-leave${X}-slide-down-leave-active${D}-placement-bottomLeft,
          &${X}-slide-down-leave${X}-slide-down-leave-active${D}-placement-bottom,
          &${X}-slide-down-leave${X}-slide-down-leave-active${D}-placement-bottomRight`]:{animationName:je.Uw},[`&${X}-slide-up-leave${X}-slide-up-leave-active${D}-placement-topLeft,
          &${X}-slide-up-leave${X}-slide-up-leave-active${D}-placement-top,
          &${X}-slide-up-leave${X}-slide-up-leave-active${D}-placement-topRight`]:{animationName:je.ly}})},(0,ne.ZP)(dt,{colorBg:mr,limitVerticalRadius:!0,arrowPlacement:{top:!0,bottom:!0}}),{[`${D} ${q}`]:{position:"relative",margin:0},[`${q}-submenu-popup`]:{position:"absolute",zIndex:G,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${D}, ${D}-menu-submenu`]:{[q]:Object.assign(Object.assign({padding:Je,listStyleType:"none",backgroundColor:mr,backgroundClip:"padding-box",borderRadius:dt.borderRadiusLG,outline:"none",boxShadow:dt.boxShadowSecondary},(0,ce.Qy)(dt)),{[`${q}-item-group-title`]:{padding:`${Be}px ${ir}px`,color:dt.colorTextDescription,transition:`all ${ae}`},[`${q}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${q}-item-icon`]:{minWidth:ve,marginInlineEnd:dt.marginXS,fontSize:dt.fontSizeSM},[`${q}-title-content`]:{flex:"auto","> a":{color:"inherit",transition:`all ${ae}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}},[`${q}-item, ${q}-submenu-title`]:Object.assign(Object.assign({clear:"both",margin:0,padding:`${Be}px ${ir}px`,color:dt.colorText,fontWeight:"normal",fontSize:ve,lineHeight:dt.lineHeight,cursor:"pointer",transition:`all ${ae}`,borderRadius:dt.borderRadiusSM,["&:hover, &-active"]:{backgroundColor:dt.controlItemBgHover}},(0,ce.Qy)(dt)),{"&-selected":{color:dt.colorPrimary,backgroundColor:dt.controlItemBgActive,"&:hover, &-active":{backgroundColor:dt.controlItemBgActiveHover}},"&-disabled":{color:ot,cursor:"not-allowed","&:hover":{color:ot,backgroundColor:mr,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${dt.marginXXS}px 0`,overflow:"hidden",lineHeight:0,backgroundColor:dt.colorSplit},[`${D}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:dt.paddingXS,[`${D}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:dt.colorTextDescription,fontSize:Qe,fontStyle:"normal"}}}),[`${q}-item-group-list`]:{margin:`0 ${dt.marginXS}px`,padding:0,listStyle:"none"},[`${q}-submenu-title`]:{paddingInlineEnd:ir+dt.fontSizeSM},[`${q}-submenu-vertical`]:{position:"relative"},[`${q}-submenu${q}-submenu-disabled ${D}-menu-submenu-title`]:{[`&, ${D}-menu-submenu-arrow-icon`]:{color:ot,backgroundColor:mr,cursor:"not-allowed"}},[`${q}-submenu-selected ${D}-menu-submenu-title`]:{color:dt.colorPrimary}})}},[(0,je.oN)(dt,"slide-up"),(0,je.oN)(dt,"slide-down"),(0,J.Fm)(dt,"move-up"),(0,J.Fm)(dt,"move-down"),(0,Me._y)(dt,"zoom-big")]]};var fe=(0,xe.Z)("Dropdown",(dt,D)=>{let{rootPrefixCls:q}=D;const{marginXXS:G,sizePopupArrow:O,controlHeight:k,fontSize:X,lineHeight:W,paddingXXS:ae,componentCls:Be,borderRadiusLG:ve}=dt,Je=(k-X*W)/2,{dropdownArrowOffset:ot}=(0,ne.fS)({contentRadius:ve}),Qe=(0,Ne.TS)(dt,{menuCls:`${Be}-menu`,rootPrefixCls:q,dropdownArrowDistance:O/2+G,dropdownArrowOffset:ot,dropdownPaddingVertical:Je,dropdownEdgeChildPadding:ae});return[It(Qe),He(Qe),ft(Qe)]},dt=>({zIndexPopup:dt.zIndexPopupBase+50})),_t=function(dt,D){var q={};for(var G in dt)Object.prototype.hasOwnProperty.call(dt,G)&&D.indexOf(G)<0&&(q[G]=dt[G]);if(dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,G=Object.getOwnPropertySymbols(dt);O<G.length;O++)D.indexOf(G[O])<0&&Object.prototype.propertyIsEnumerable.call(dt,G[O])&&(q[G[O]]=dt[G[O]]);return q};const Ye=dt=>{const{getPopupContainer:D,getPrefixCls:q,direction:G}=L.useContext($.E_),{prefixCls:O,type:k="default",danger:X,disabled:W,loading:ae,onClick:Be,htmlType:ve,children:Je,className:ot,menu:Qe,arrow:ir,autoFocus:mr,overlay:Ar,trigger:Er,align:Zt,open:Tr,onOpenChange:pn,placement:un,getPopupContainer:Zn,href:Cr,icon:Nr=L.createElement(et.Z,null),title:bt,buttonsRender:jn=ta=>ta,mouseEnterDelay:Pt,mouseLeaveDelay:zt,overlayClassName:Qt,overlayStyle:dr,destroyPopupOnHide:_r,dropdownRender:Hr}=dt,Qr=_t(dt,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),fr=q("dropdown",O),tt=`${fr}-button`,[Yr,Tn]=fe(fr),wn={menu:Qe,arrow:ir,autoFocus:mr,align:Zt,disabled:W,trigger:W?[]:Er,onOpenChange:pn,getPopupContainer:Zn||D,mouseEnterDelay:Pt,mouseLeaveDelay:zt,overlayClassName:Qt,overlayStyle:dr,destroyPopupOnHide:_r,dropdownRender:Hr},{compactSize:Nn,compactItemClassnames:Si}=(0,We.ri)(fr,G),fa=c()(tt,Si,ot,Tn);"overlay"in dt&&(wn.overlay=Ar),"open"in dt&&(wn.open=Tr),"placement"in dt?wn.placement=un:wn.placement=G==="rtl"?"bottomLeft":"bottomRight";const Xi=L.createElement(at.ZP,{type:k,danger:X,disabled:W,loading:ae,onClick:Be,htmlType:ve,href:Cr,title:bt},Je),Ln=L.createElement(at.ZP,{type:k,danger:X,icon:Nr}),[na,xi]=jn([Xi,Ln]);return Yr(L.createElement(ge.Compact,Object.assign({className:fa,size:Nn,block:!0},Qr),na,L.createElement(ee,Object.assign({},wn),xi)))};Ye.__ANT_BUTTON=!0;var Ot=Ye,mt=g(92195);const Rt=null,pt=dt=>{const{getPopupContainer:D,getPrefixCls:q,direction:G}=L.useContext($.E_),O=()=>{const wn=q(),{placement:Nn="",transitionName:Si}=dt;return Si!==void 0?Si:Nn.includes("top")?`${wn}-slide-down`:`${wn}-slide-up`},k=()=>{const{placement:wn}=dt;return wn?wn.includes("Center")?wn.slice(0,wn.indexOf("Center")):wn:G==="rtl"?"bottomRight":"bottomLeft"},{menu:X,arrow:W,prefixCls:ae,children:Be,trigger:ve,disabled:Je,dropdownRender:ot,getPopupContainer:Qe,overlayClassName:ir,rootClassName:mr,open:Ar,onOpenChange:Er,visible:Zt,onVisibleChange:Tr,mouseEnterDelay:pn=.15,mouseLeaveDelay:un=.1,autoAdjustOverflow:Zn=!0}=dt,Cr=q("dropdown",ae),[Nr,bt]=fe(Cr),{token:jn}=mt.Z.useToken(),Pt=L.Children.only(Be),zt=(0,Se.Tm)(Pt,{className:c()(`${Cr}-trigger`,{[`${Cr}-rtl`]:G==="rtl"},Pt.props.className),disabled:Je}),Qt=Je?[]:ve;let dr;Qt&&Qt.includes("contextMenu")&&(dr=!0);const[_r,Hr]=(0,Z.Z)(!1,{value:Ar!=null?Ar:Zt}),Qr=(0,N.Z)(wn=>{Er==null||Er(wn),Tr==null||Tr(wn),Hr(wn)}),fr=c()(ir,mr,bt,{[`${Cr}-rtl`]:G==="rtl"}),tt=(0,me.Z)({arrowPointAtCenter:typeof W=="object"&&W.pointAtCenter,autoAdjustOverflow:Zn,offset:jn.marginXXS,arrowWidth:W?jn.sizePopupArrow:0}),Yr=L.useCallback(()=>{Hr(!1)},[]),Tn=()=>{const{overlay:wn}=dt;let Nn;return X!=null&&X.items?Nn=L.createElement(U.Z,Object.assign({},X)):typeof wn=="function"?Nn=wn():Nn=wn,ot&&(Nn=ot(Nn)),Nn=L.Children.only(typeof Nn=="string"?L.createElement("span",null,Nn):Nn),L.createElement(ke.J,{prefixCls:`${Cr}-menu`,expandIcon:L.createElement("span",{className:`${Cr}-menu-submenu-arrow`},L.createElement(v.Z,{className:`${Cr}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:Yr,validator:Si=>{let{mode:fa}=Si}},L.createElement(We.BR,null,Nn))};return Nr(L.createElement(K.Z,Object.assign({alignPoint:dr},(0,B.Z)(dt,["rootClassName"]),{mouseEnterDelay:pn,mouseLeaveDelay:un,visible:_r,builtinPlacements:tt,arrow:!!W,overlayClassName:fr,prefixCls:Cr,getPopupContainer:Qe||D,transitionName:O(),trigger:Qt,overlay:Tn,placement:k(),onVisibleChange:Qr}),zt))};pt.Button=Ot;const Ge=(0,Le.Z)(pt,"dropdown",dt=>dt),wt=dt=>L.createElement(Ge,Object.assign({},dt),L.createElement("span",null));pt._InternalPanelDoNotUseOrYouWillBeFired=wt;var ee=pt,Re=ee},32983:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return jt}});var v=g(94184),M=g.n(v),c=g(67294),K=g(53124),N=g(74342),Z=g(10274),B=g(48012),$=()=>{const[,pe]=(0,B.dQ)(),$e=new Z.C(pe.colorBgBase);let ye={};return $e.toHsl().l<.5&&(ye={opacity:.65}),c.createElement("svg",{style:ye,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("g",{transform:"translate(24 31.67)"},c.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),c.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),c.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),c.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),c.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),c.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),c.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},c.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),c.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},ke=()=>{const[,pe]=(0,B.dQ)(),{colorFill:$e,colorFillTertiary:ye,colorFillQuaternary:ie,colorBgContainer:re}=pe,{borderColor:De,shadowColor:le,contentColor:ge}=(0,c.useMemo)(()=>({borderColor:new Z.C($e).onBackground(re).toHexShortString(),shadowColor:new Z.C(ye).onBackground(re).toHexShortString(),contentColor:new Z.C(ie).onBackground(re).toHexShortString()}),[$e,ye,ie,re]);return c.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},c.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},c.createElement("ellipse",{fill:le,cx:"32",cy:"33",rx:"32",ry:"7"}),c.createElement("g",{fillRule:"nonzero",stroke:De},c.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),c.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:ge}))))},We=g(67968),me=g(45503);const Le=pe=>{const{componentCls:$e,margin:ye,marginXS:ie,marginXL:re,fontSize:De,lineHeight:le}=pe;return{[$e]:{marginInline:ie,fontSize:De,lineHeight:le,textAlign:"center",[`${$e}-image`]:{height:pe.emptyImgHeight,marginBottom:ie,opacity:pe.opacityImage,img:{height:"100%"},svg:{height:"100%",margin:"auto"}},[`${$e}-description`]:{color:pe.colorText},[`${$e}-footer`]:{marginTop:ye},"&-normal":{marginBlock:re,color:pe.colorTextDisabled,[`${$e}-description`]:{color:pe.colorTextDisabled},[`${$e}-image`]:{height:pe.emptyImgHeightMD}},"&-small":{marginBlock:ie,color:pe.colorTextDisabled,[`${$e}-image`]:{height:pe.emptyImgHeightSM}}}}};var Se=(0,We.Z)("Empty",pe=>{const{componentCls:$e,controlHeightLG:ye}=pe,ie=(0,me.TS)(pe,{emptyImgCls:`${$e}-img`,emptyImgHeight:ye*2.5,emptyImgHeightMD:ye,emptyImgHeightSM:ye*.875});return[Le(ie)]}),et=function(pe,$e){var ye={};for(var ie in pe)Object.prototype.hasOwnProperty.call(pe,ie)&&$e.indexOf(ie)<0&&(ye[ie]=pe[ie]);if(pe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,ie=Object.getOwnPropertySymbols(pe);re<ie.length;re++)$e.indexOf(ie[re])<0&&Object.prototype.propertyIsEnumerable.call(pe,ie[re])&&(ye[ie[re]]=pe[ie[re]]);return ye};const at=c.createElement($,null),Lt=c.createElement(ke,null),Et=pe=>{var{className:$e,rootClassName:ye,prefixCls:ie,image:re=at,description:De,children:le,imageStyle:ge}=pe,ce=et(pe,["className","rootClassName","prefixCls","image","description","children","imageStyle"]);const{getPrefixCls:je,direction:J}=c.useContext(K.E_),Me=je("empty",ie),[ne,xe]=Se(Me);return ne(c.createElement(N.Z,{componentName:"Empty"},Ne=>{const Pe=typeof De!="undefined"?De:Ne.description,He=typeof Pe=="string"?Pe:"empty";let lt=null;return typeof re=="string"?lt=c.createElement("img",{alt:He,src:re}):lt=re,c.createElement("div",Object.assign({className:M()(xe,Me,{[`${Me}-normal`]:re===Lt,[`${Me}-rtl`]:J==="rtl"},$e,ye)},ce),c.createElement("div",{className:`${Me}-image`,style:ge},lt),Pe&&c.createElement("div",{className:`${Me}-description`},Pe),le&&c.createElement("div",{className:`${Me}-footer`},le))}))};Et.PRESENTED_IMAGE_DEFAULT=at,Et.PRESENTED_IMAGE_SIMPLE=Lt;var jt=Et},65223:function(vt,Ee,g){"use strict";g.d(Ee,{Ux:function(){return L},aM:function(){return B}});var v=g(24407),M=g(67294);const c=M.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),K=null,N=$=>{const U=omit($,["prefixCls"]);return React.createElement(RcFormProvider,Object.assign({},U))},Z=M.createContext({prefixCls:""}),B=M.createContext({}),L=$=>{let{children:U,status:ke,override:We}=$;const me=(0,M.useContext)(B),Le=(0,M.useMemo)(()=>{const Se=Object.assign({},me);return We&&delete Se.isFormItemInput,ke&&(delete Se.status,delete Se.hasFeedback,delete Se.feedbackIcon),Se},[ke,We,me]);return M.createElement(B.Provider,{value:Le},U)}},99134:function(vt,Ee,g){"use strict";var v=g(67294);const M=(0,v.createContext)({});Ee.Z=M},6999:function(vt,Ee,g){"use strict";g.d(Ee,{V:function(){return L},c:function(){return $}});var v=g(67968),M=g(45503);const c=U=>{const{componentCls:ke}=U;return{[ke]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around ":{justifyContent:"space-around"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},K=U=>{const{componentCls:ke}=U;return{[ke]:{position:"relative",maxWidth:"100%",minHeight:1}}},N=(U,ke)=>{const{componentCls:We,gridColumns:me}=U,Le={};for(let Se=me;Se>=0;Se--)Se===0?(Le[`${We}${ke}-${Se}`]={display:"none"},Le[`${We}-push-${Se}`]={insetInlineStart:"auto"},Le[`${We}-pull-${Se}`]={insetInlineEnd:"auto"},Le[`${We}${ke}-push-${Se}`]={insetInlineStart:"auto"},Le[`${We}${ke}-pull-${Se}`]={insetInlineEnd:"auto"},Le[`${We}${ke}-offset-${Se}`]={marginInlineEnd:0},Le[`${We}${ke}-order-${Se}`]={order:0}):(Le[`${We}${ke}-${Se}`]={display:"block",flex:`0 0 ${Se/me*100}%`,maxWidth:`${Se/me*100}%`},Le[`${We}${ke}-push-${Se}`]={insetInlineStart:`${Se/me*100}%`},Le[`${We}${ke}-pull-${Se}`]={insetInlineEnd:`${Se/me*100}%`},Le[`${We}${ke}-offset-${Se}`]={marginInlineStart:`${Se/me*100}%`},Le[`${We}${ke}-order-${Se}`]={order:Se});return Le},Z=(U,ke)=>N(U,ke),B=(U,ke,We)=>({[`@media (min-width: ${ke}px)`]:Object.assign({},Z(U,We))}),L=(0,v.Z)("Grid",U=>[c(U)]),$=(0,v.Z)("Grid",U=>{const ke=(0,M.TS)(U,{gridColumns:24}),We={"-sm":ke.screenSMMin,"-md":ke.screenMDMin,"-lg":ke.screenLGMin,"-xl":ke.screenXLMin,"-xxl":ke.screenXXLMin};return[K(ke),Z(ke,""),Z(ke,"-xs"),Object.keys(We).map(me=>B(ke,We[me],me)).reduce((me,Le)=>Object.assign(Object.assign({},me),Le),{})]})},74342:function(vt,Ee,g){"use strict";var v=g(67294),M=g(76745),c=g(88526);const K=Z=>{const{componentName:B="global",defaultLocale:L,children:$}=Z,U=v.useContext(M.Z),ke=v.useMemo(()=>{var me;const Le=L||c.Z[B],Se=(me=U==null?void 0:U[B])!==null&&me!==void 0?me:{};return Object.assign(Object.assign({},Le instanceof Function?Le():Le),Se||{})},[B,L,U]),We=v.useMemo(()=>{const me=U&&U.locale;return U&&U.exist&&!me?c.Z.locale:me},[U]);return $(ke,We,U)};Ee.Z=K;const N=(Z,B)=>{const L=React.useContext(LocaleContext);return[React.useMemo(()=>{var U;const ke=B||defaultLocaleData[Z],We=(U=L==null?void 0:L[Z])!==null&&U!==void 0?U:{};return Object.assign(Object.assign({},typeof ke=="function"?ke():ke),We||{})},[Z,B,L])]}},76745:function(vt,Ee,g){"use strict";var v=g(67294);const M=(0,v.createContext)(void 0);Ee.Z=M},88526:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return ke}});var v=g(62906),M={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},c=M,N={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},B={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},c),timePickerLocale:Object.assign({},N)},L=B;const $="${label} is not a valid ${type}";var ke={locale:"en",Pagination:v.Z,DatePicker:B,TimePicker:N,Calendar:L,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:$,method:$,array:$,object:$,number:$,date:$,boolean:$,integer:$,float:$,regexp:$,email:$,url:$,hex:$},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}}},76529:function(vt,Ee,g){"use strict";g.d(Ee,{J:function(){return K}});var v=g(67294),M=function(N,Z){var B={};for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&Z.indexOf(L)<0&&(B[L]=N[L]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,L=Object.getOwnPropertySymbols(N);$<L.length;$++)Z.indexOf(L[$])<0&&Object.prototype.propertyIsEnumerable.call(N,L[$])&&(B[L[$]]=N[L[$]]);return B};const c=v.createContext(null),K=N=>{const{children:Z}=N,B=M(N,["children"]),L=v.useContext(c),$=v.useMemo(()=>Object.assign(Object.assign({},L),B),[L,B.prefixCls,B.mode,B.selectable]);return v.createElement(c.Provider,{value:$},Z)};Ee.Z=c},82610:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return k}});var v=g(97868),M=g(67294),c=g(98423),K=g(66680),N=g(94184),Z=g.n(N),B=g(16853),L=g(33603),$=g(96159),U=g(53124),ke=g(10274),We=g(33507),me=g(67771),Le=g(50438),Se=g(67968),et=g(45503),Lt=X=>{const{componentCls:W,motionDurationSlow:ae,menuHorizontalHeight:Be,colorSplit:ve,lineWidth:Je,lineType:ot,menuItemPaddingInline:Qe}=X;return{[`${W}-horizontal`]:{lineHeight:`${Be}px`,border:0,borderBottom:`${Je}px ${ot} ${ve}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${W}-item, ${W}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:Qe},[`> ${W}-item:hover,
        > ${W}-item-active,
        > ${W}-submenu ${W}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${W}-item, ${W}-submenu-title`]:{transition:[`border-color ${ae}`,`background ${ae}`].join(",")},[`${W}-submenu-arrow`]:{display:"none"}}}},jt=X=>{let{componentCls:W,menuArrowOffset:ae}=X;return{[`${W}-rtl`]:{direction:"rtl"},[`${W}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${W}-rtl${W}-vertical,
    ${W}-submenu-rtl ${W}-vertical`]:{[`${W}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${ae})`},"&::after":{transform:`rotate(45deg) translateY(${ae})`}}}}},pe=g(14747);const $e=X=>Object.assign({},(0,pe.oN)(X));var ie=(X,W)=>{const{componentCls:ae,colorItemText:Be,colorItemTextSelected:ve,colorGroupTitle:Je,colorItemBg:ot,colorSubItemBg:Qe,colorItemBgSelected:ir,colorActiveBarHeight:mr,colorActiveBarWidth:Ar,colorActiveBarBorderSize:Er,motionDurationSlow:Zt,motionEaseInOut:Tr,motionEaseOut:pn,menuItemPaddingInline:un,motionDurationMid:Zn,colorItemTextHover:Cr,lineType:Nr,colorSplit:bt,colorItemTextDisabled:jn,colorDangerItemText:Pt,colorDangerItemTextHover:zt,colorDangerItemTextSelected:Qt,colorDangerItemBgActive:dr,colorDangerItemBgSelected:_r,colorItemBgHover:Hr,menuSubMenuBg:Qr,colorItemTextSelectedHorizontal:fr,colorItemBgSelectedHorizontal:tt}=X;return{[`${ae}-${W}`]:{color:Be,background:ot,[`&${ae}-root:focus-visible`]:Object.assign({},$e(X)),[`${ae}-item-group-title`]:{color:Je},[`${ae}-submenu-selected`]:{[`> ${ae}-submenu-title`]:{color:ve}},[`${ae}-item-disabled, ${ae}-submenu-disabled`]:{color:`${jn} !important`},[`${ae}-item:hover, ${ae}-submenu-title:hover`]:{[`&:not(${ae}-item-selected):not(${ae}-submenu-selected)`]:{color:Cr}},[`&:not(${ae}-horizontal)`]:{[`${ae}-item:not(${ae}-item-selected)`]:{"&:hover":{backgroundColor:Hr},"&:active":{backgroundColor:ir}},[`${ae}-submenu-title`]:{"&:hover":{backgroundColor:Hr},"&:active":{backgroundColor:ir}}},[`${ae}-item-danger`]:{color:Pt,[`&${ae}-item:hover`]:{[`&:not(${ae}-item-selected):not(${ae}-submenu-selected)`]:{color:zt}},[`&${ae}-item:active`]:{background:dr}},[`${ae}-item a`]:{"&, &:hover":{color:"inherit"}},[`${ae}-item-selected`]:{color:ve,[`&${ae}-item-danger`]:{color:Qt},["a, a:hover"]:{color:"inherit"}},[`& ${ae}-item-selected`]:{backgroundColor:ir,[`&${ae}-item-danger`]:{backgroundColor:_r}},[`${ae}-item, ${ae}-submenu-title`]:{[`&:not(${ae}-item-disabled):focus-visible`]:Object.assign({},$e(X))},[`&${ae}-submenu > ${ae}`]:{backgroundColor:Qr},[`&${ae}-popup > ${ae}`]:{backgroundColor:ot},[`&${ae}-horizontal`]:Object.assign(Object.assign({},W==="dark"?{borderBottom:0}:{}),{[`> ${ae}-item, > ${ae}-submenu`]:{top:Er,marginTop:-Er,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:un,bottom:0,borderBottom:`${mr}px solid transparent`,transition:`border-color ${Zt} ${Tr}`,content:'""'},["&:hover, &-active, &-open"]:{"&::after":{borderBottomWidth:mr,borderBottomColor:fr}},["&-selected"]:{color:fr,backgroundColor:tt,"&::after":{borderBottomWidth:mr,borderBottomColor:fr}}}}),[`&${ae}-root`]:{[`&${ae}-inline, &${ae}-vertical`]:{borderInlineEnd:`${Er}px ${Nr} ${bt}`}},[`&${ae}-inline`]:{[`${ae}-sub${ae}-inline`]:{background:Qe},[`${ae}-item, ${ae}-submenu-title`]:Er&&Ar?{width:`calc(100% + ${Er}px)`}:{},[`${ae}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Ar}px solid ${ve}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${Zn} ${pn}`,`opacity ${Zn} ${pn}`].join(","),content:'""'},[`&${ae}-item-danger`]:{"&::after":{borderInlineEndColor:Qt}}},[`${ae}-selected, ${ae}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${Zn} ${Tr}`,`opacity ${Zn} ${Tr}`].join(",")}}}}}};const re=X=>{const{componentCls:W,menuItemHeight:ae,itemMarginInline:Be,padding:ve,menuArrowSize:Je,marginXS:ot,marginXXS:Qe}=X,ir=ve+Je+ot;return{[`${W}-item`]:{position:"relative"},[`${W}-item, ${W}-submenu-title`]:{height:ae,lineHeight:`${ae}px`,paddingInline:ve,overflow:"hidden",textOverflow:"ellipsis",marginInline:Be,marginBlock:Qe,width:`calc(100% - ${Be*2}px)`},[`${W}-submenu`]:{paddingBottom:.02},[`> ${W}-item,
            > ${W}-submenu > ${W}-submenu-title`]:{height:ae,lineHeight:`${ae}px`},[`${W}-item-group-list ${W}-submenu-title,
            ${W}-submenu-title`]:{paddingInlineEnd:ir}}};var le=X=>{const{componentCls:W,iconCls:ae,menuItemHeight:Be,colorTextLightSolid:ve,dropdownWidth:Je,controlHeightLG:ot,motionDurationMid:Qe,motionEaseOut:ir,paddingXL:mr,fontSizeSM:Ar,fontSizeLG:Er,motionDurationSlow:Zt,paddingXS:Tr,boxShadowSecondary:pn}=X,un={height:Be,lineHeight:`${Be}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[W]:{["&-inline, &-vertical"]:Object.assign({[`&${W}-root`]:{boxShadow:"none"}},re(X))},[`${W}-submenu-popup`]:{[`${W}-vertical`]:Object.assign(Object.assign({},re(X)),{boxShadow:pn})}},{[`${W}-submenu-popup ${W}-vertical${W}-sub`]:{minWidth:Je,maxHeight:`calc(100vh - ${ot*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${W}-inline`]:{width:"100%",[`&${W}-root`]:{[`${W}-item, ${W}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${Zt}`,`background ${Zt}`,`padding ${Qe} ${ir}`].join(","),[`> ${W}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${W}-sub${W}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${W}-submenu > ${W}-submenu-title`]:un,[`& ${W}-item-group-title`]:{paddingInlineStart:mr}},[`${W}-item`]:un}},{[`${W}-inline-collapsed`]:{width:Be*2,[`&${W}-root`]:{[`${W}-item, ${W}-submenu ${W}-submenu-title`]:{[`> ${W}-inline-collapsed-noicon`]:{fontSize:Er,textAlign:"center"}}},[`> ${W}-item,
          > ${W}-item-group > ${W}-item-group-list > ${W}-item,
          > ${W}-item-group > ${W}-item-group-list > ${W}-submenu > ${W}-submenu-title,
          > ${W}-submenu > ${W}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Ar}px)`,textOverflow:"clip",[`
            ${W}-submenu-arrow,
            ${W}-submenu-expand-icon
          `]:{opacity:0},[`${W}-item-icon, ${ae}`]:{margin:0,fontSize:Er,lineHeight:`${Be}px`,"+ span":{display:"inline-block",opacity:0}}},[`${W}-item-icon, ${ae}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${W}-item-icon, ${ae}`]:{display:"none"},"a, a:hover":{color:ve}},[`${W}-item-group-title`]:Object.assign(Object.assign({},pe.vS),{paddingInline:Tr})}}]};const ge=X=>{const{componentCls:W,fontSize:ae,motionDurationSlow:Be,motionDurationMid:ve,motionEaseInOut:Je,motionEaseOut:ot,iconCls:Qe,controlHeightSM:ir}=X;return{[`${W}-item, ${W}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${Be}`,`background ${Be}`,`padding ${Be} ${Je}`].join(","),[`${W}-item-icon, ${Qe}`]:{minWidth:ae,fontSize:ae,transition:[`font-size ${ve} ${ot}`,`margin ${Be} ${Je}`,`color ${Be}`].join(","),"+ span":{marginInlineStart:ir-ae,opacity:1,transition:[`opacity ${Be} ${Je}`,`margin ${Be}`,`color ${Be}`].join(",")}},[`${W}-item-icon`]:Object.assign({},(0,pe.Ro)()),[`&${W}-item-only-child`]:{[`> ${Qe}, > ${W}-item-icon`]:{marginInlineEnd:0}}},[`${W}-item-disabled, ${W}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${W}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},ce=X=>{const{componentCls:W,motionDurationSlow:ae,motionEaseInOut:Be,borderRadius:ve,menuArrowSize:Je,menuArrowOffset:ot}=X;return{[`${W}-submenu`]:{["&-expand-icon, &-arrow"]:{position:"absolute",top:"50%",insetInlineEnd:X.margin,width:Je,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${ae} ${Be}, opacity ${ae}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:Je*.6,height:Je*.15,backgroundColor:"currentcolor",borderRadius:ve,transition:[`background ${ae} ${Be}`,`transform ${ae} ${Be}`,`top ${ae} ${Be}`,`color ${ae} ${Be}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${ot})`},"&::after":{transform:`rotate(-45deg) translateY(${ot})`}}}}},je=X=>{const{antCls:W,componentCls:ae,fontSize:Be,motionDurationSlow:ve,motionDurationMid:Je,motionEaseInOut:ot,lineHeight:Qe,paddingXS:ir,padding:mr,colorSplit:Ar,lineWidth:Er,zIndexPopup:Zt,borderRadiusLG:Tr,radiusSubMenuItem:pn,menuArrowSize:un,menuArrowOffset:Zn,lineType:Cr,menuPanelMaskInset:Nr}=X;return[{"":{[`${ae}`]:Object.assign(Object.assign({},(0,pe.dF)()),{["&-hidden"]:{display:"none"}})},[`${ae}-submenu-hidden`]:{display:"none"}},{[ae]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,pe.Wf)(X)),(0,pe.dF)()),{marginBottom:0,paddingInlineStart:0,fontSize:Be,lineHeight:0,listStyle:"none",outline:"none",transition:[`background ${ve}`,`width ${ve} cubic-bezier(0.2, 0, 0, 1) 0s`].join(","),["ul, ol"]:{margin:0,padding:0,listStyle:"none"},["&-overflow"]:{display:"flex",[`${ae}-item`]:{flex:"none"}},[`${ae}-item, ${ae}-submenu, ${ae}-submenu-title`]:{borderRadius:X.radiusItem},[`${ae}-item-group-title`]:{padding:`${ir}px ${mr}px`,fontSize:Be,lineHeight:Qe,transition:`all ${ve}`},[`&-horizontal ${ae}-submenu`]:{transition:[`border-color ${ve} ${ot}`,`background ${ve} ${ot}`].join(",")},[`${ae}-submenu, ${ae}-submenu-inline`]:{transition:[`border-color ${ve} ${ot}`,`background ${ve} ${ot}`,`padding ${Je} ${ot}`].join(",")},[`${ae}-submenu ${ae}-sub`]:{cursor:"initial",transition:[`background ${ve} ${ot}`,`padding ${ve} ${ot}`].join(",")},[`${ae}-title-content`]:{transition:`color ${ve}`},[`${ae}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${ae}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:Ar,borderStyle:Cr,borderWidth:0,borderTopWidth:Er,marginBlock:Er,padding:0,"&-dashed":{borderStyle:"dashed"}}}),ge(X)),{[`${ae}-item-group`]:{[`${ae}-item-group-list`]:{margin:0,padding:0,[`${ae}-item, ${ae}-submenu-title`]:{paddingInline:`${Be*2}px ${mr}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:Zt,background:"transparent",borderRadius:Tr,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:`${Nr}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:Nr},[`> ${ae}`]:Object.assign(Object.assign(Object.assign({borderRadius:Tr},ge(X)),ce(X)),{[`${ae}-item, ${ae}-submenu > ${ae}-submenu-title`]:{borderRadius:pn},[`${ae}-submenu-title::after`]:{transition:`transform ${ve} ${ot}`}})}}),ce(X)),{[`&-inline-collapsed ${ae}-submenu-arrow,
        &-inline ${ae}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Zn})`},"&::after":{transform:`rotate(45deg) translateX(-${Zn})`}},[`${ae}-submenu-open${ae}-submenu-inline > ${ae}-submenu-title > ${ae}-submenu-arrow`]:{transform:`translateY(-${un*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${Zn})`},"&::before":{transform:`rotate(45deg) translateX(${Zn})`}}})},{[`${W}-layout-header`]:{[ae]:{lineHeight:"inherit"}}}]};var J=(X,W)=>(0,Se.Z)("Menu",(Be,ve)=>{let{overrideComponentToken:Je}=ve;if(W===!1)return[];const{colorBgElevated:ot,colorPrimary:Qe,colorError:ir,colorErrorHover:mr,colorTextLightSolid:Ar}=Be,{controlHeightLG:Er,fontSize:Zt}=Be,Tr=Zt/7*5,pn=(0,et.TS)(Be,{menuItemHeight:Er,menuItemPaddingInline:Be.margin,menuArrowSize:Tr,menuHorizontalHeight:Er*1.15,menuArrowOffset:`${Tr*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:ot}),un=new ke.C(Ar).setAlpha(.65).toRgbString(),Zn=(0,et.TS)(pn,{colorItemText:un,colorItemTextHover:Ar,colorGroupTitle:un,colorItemTextSelected:Ar,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:Qe,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new ke.C(Ar).setAlpha(.25).toRgbString(),colorDangerItemText:ir,colorDangerItemTextHover:mr,colorDangerItemTextSelected:Ar,colorDangerItemBgActive:ir,colorDangerItemBgSelected:ir,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:Ar,colorItemBgSelectedHorizontal:Qe},Object.assign({},Je));return[je(pn),Lt(pn),le(pn),ie(pn,"light"),ie(Zn,"dark"),jt(pn),(0,We.Z)(pn),(0,me.oN)(pn,"slide-up"),(0,me.oN)(pn,"slide-down"),(0,Le._y)(pn,"zoom-big")]},Be=>{const{colorPrimary:ve,colorError:Je,colorTextDisabled:ot,colorErrorBg:Qe,colorText:ir,colorTextDescription:mr,colorBgContainer:Ar,colorFillAlter:Er,colorFillContent:Zt,lineWidth:Tr,lineWidthBold:pn,controlItemBgActive:un,colorBgTextHover:Zn}=Be;return{dropdownWidth:160,zIndexPopup:Be.zIndexPopupBase+50,radiusItem:Be.borderRadiusLG,radiusSubMenuItem:Be.borderRadiusSM,colorItemText:ir,colorItemTextHover:ir,colorItemTextHoverHorizontal:ve,colorGroupTitle:mr,colorItemTextSelected:ve,colorItemTextSelectedHorizontal:ve,colorItemBg:Ar,colorItemBgHover:Zn,colorItemBgActive:Zt,colorSubItemBg:Er,colorItemBgSelected:un,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:pn,colorActiveBarBorderSize:Tr,colorItemTextDisabled:ot,colorDangerItemText:Je,colorDangerItemTextHover:Je,colorDangerItemTextSelected:Je,colorDangerItemBgActive:Qe,colorDangerItemBgSelected:Qe,itemMarginInline:Be.marginXXS}})(X),Me=g(76529),ne=function(X,W){var ae={};for(var Be in X)Object.prototype.hasOwnProperty.call(X,Be)&&W.indexOf(Be)<0&&(ae[Be]=X[Be]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ve=0,Be=Object.getOwnPropertySymbols(X);ve<Be.length;ve++)W.indexOf(Be[ve])<0&&Object.prototype.propertyIsEnumerable.call(X,Be[ve])&&(ae[Be[ve]]=X[Be[ve]]);return ae},Ne=X=>{const{prefixCls:W,className:ae,dashed:Be}=X,ve=ne(X,["prefixCls","className","dashed"]),{getPrefixCls:Je}=M.useContext(U.E_),ot=Je("menu",W),Qe=Z()({[`${ot}-item-divider-dashed`]:!!Be},ae);return M.createElement(v.iz,Object.assign({className:Qe},ve))},Pe=g(50344),He=function(X,W){var ae={};for(var Be in X)Object.prototype.hasOwnProperty.call(X,Be)&&W.indexOf(Be)<0&&(ae[Be]=X[Be]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ve=0,Be=Object.getOwnPropertySymbols(X);ve<Be.length;ve++)W.indexOf(Be[ve])<0&&Object.prototype.propertyIsEnumerable.call(X,Be[ve])&&(ae[Be[ve]]=X[Be[ve]]);return ae};const lt={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},ft=M.createContext({}),It=(()=>{let X=0;return function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return X+=1,`${W}${X}`}})(),fe=null;var _t=null,Ye=g(15335),mt=(0,M.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),pt=X=>{var W;const{className:ae,children:Be,icon:ve,title:Je,danger:ot}=X,{prefixCls:Qe,firstLevel:ir,direction:mr,disableMenuItemTitleTooltip:Ar,inlineCollapsed:Er}=M.useContext(mt),Zt=Nr=>{const bt=M.createElement("span",{className:`${Qe}-title-content`},Be);return(!ve||(0,$.l$)(Be)&&Be.type==="span")&&Be&&Nr&&ir&&typeof Be=="string"?M.createElement("div",{className:`${Qe}-inline-collapsed-noicon`},Be.charAt(0)):bt},{siderCollapsed:Tr}=M.useContext(ft);let pn=Je;typeof Je=="undefined"?pn=ir?Be:"":Je===!1&&(pn="");const un={title:pn};!Tr&&!Er&&(un.title=null,un.open=!1);const Zn=(0,Pe.Z)(Be).length;let Cr=M.createElement(v.ck,Object.assign({},(0,c.Z)(X,["title","icon","danger"]),{className:Z()({[`${Qe}-item-danger`]:ot,[`${Qe}-item-only-child`]:(ve?Zn+1:Zn)===1},ae),title:typeof Je=="string"?Je:void 0}),(0,$.Tm)(ve,{className:Z()((0,$.l$)(ve)?(W=ve.props)===null||W===void 0?void 0:W.className:"",`${Qe}-item-icon`)}),Zt(Er));return Ar||(Cr=M.createElement(Ye.Z,Object.assign({},un,{placement:mr==="rtl"?"left":"right",overlayClassName:`${Qe}-inline-collapsed-tooltip`}),Cr)),Cr},wt=X=>{var W;const{popupClassName:ae,icon:Be,title:ve,theme:Je}=X,ot=M.useContext(mt),{prefixCls:Qe,inlineCollapsed:ir,theme:mr,mode:Ar}=ot,Er=(0,v.Xl)();let Zt;if(!Be)Zt=ir&&!Er.length&&ve&&typeof ve=="string"?M.createElement("div",{className:`${Qe}-inline-collapsed-noicon`},ve.charAt(0)):M.createElement("span",{className:`${Qe}-title-content`},ve);else{const un=(0,$.l$)(ve)&&ve.type==="span";Zt=M.createElement(M.Fragment,null,(0,$.Tm)(Be,{className:Z()((0,$.l$)(Be)?(W=Be.props)===null||W===void 0?void 0:W.className:"",`${Qe}-item-icon`)}),un?ve:M.createElement("span",{className:`${Qe}-title-content`},ve))}const Tr=M.useMemo(()=>Object.assign(Object.assign({},ot),{firstLevel:!1}),[ot]),pn=Ar==="horizontal"?[0,8]:[10,0];return M.createElement(mt.Provider,{value:Tr},M.createElement(v.Wd,Object.assign({popupOffset:pn},(0,c.Z)(X,["icon"]),{title:Zt,popupClassName:Z()(Qe,ae,`${Qe}-${Je||mr}`)})))},ee=function(X,W){var ae={};for(var Be in X)Object.prototype.hasOwnProperty.call(X,Be)&&W.indexOf(Be)<0&&(ae[Be]=X[Be]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ve=0,Be=Object.getOwnPropertySymbols(X);ve<Be.length;ve++)W.indexOf(Be[ve])<0&&Object.prototype.propertyIsEnumerable.call(X,Be[ve])&&(ae[Be[ve]]=X[Be[ve]]);return ae};function Re(X){return(X||[]).map((W,ae)=>{if(W&&typeof W=="object"){const Be=W,{label:ve,children:Je,key:ot,type:Qe}=Be,ir=ee(Be,["label","children","key","type"]),mr=ot!=null?ot:`tmp-${ae}`;return Je||Qe==="group"?Qe==="group"?M.createElement(v.BW,Object.assign({key:mr},ir,{title:ve}),Re(Je)):M.createElement(wt,Object.assign({key:mr},ir,{title:ve}),Re(Je)):Qe==="divider"?M.createElement(Ne,Object.assign({key:mr},ir)):M.createElement(pt,Object.assign({key:mr},ir),ve)}return null}).filter(W=>W)}function dt(X){return M.useMemo(()=>X&&Re(X),[X])}var D=function(X,W){var ae={};for(var Be in X)Object.prototype.hasOwnProperty.call(X,Be)&&W.indexOf(Be)<0&&(ae[Be]=X[Be]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ve=0,Be=Object.getOwnPropertySymbols(X);ve<Be.length;ve++)W.indexOf(Be[ve])<0&&Object.prototype.propertyIsEnumerable.call(X,Be[ve])&&(ae[Be[ve]]=X[Be[ve]]);return ae},G=(0,M.forwardRef)((X,W)=>{var ae,Be;const ve=M.useContext(Me.Z),Je=ve||{},{getPrefixCls:ot,getPopupContainer:Qe,direction:ir}=M.useContext(U.E_),mr=ot(),{prefixCls:Ar,className:Er,theme:Zt="light",expandIcon:Tr,_internalDisableMenuItemTitleTooltip:pn,inlineCollapsed:un,siderCollapsed:Zn,items:Cr,children:Nr,rootClassName:bt,mode:jn,selectable:Pt,onClick:zt}=X,Qt=D(X,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),dr=(0,c.Z)(Qt,["collapsedWidth"]),_r=dt(Cr)||Nr;(ae=Je.validator)===null||ae===void 0||ae.call(Je,{mode:jn});const Hr=(0,K.Z)(function(){var Ln;zt==null||zt.apply(void 0,arguments),(Ln=Je.onClick)===null||Ln===void 0||Ln.call(Je)}),Qr=Je.mode||jn,fr=Pt!=null?Pt:Je.selectable,tt=M.useMemo(()=>Zn!==void 0?Zn:un,[un,Zn]),Yr={horizontal:{motionName:`${mr}-slide-up`},inline:(0,L.ZP)(mr),other:{motionName:`${mr}-zoom-big`}},Tn=ot("menu",Ar||Je.prefixCls),[wn,Nn]=J(Tn,!ve),Si=Z()(`${Tn}-${Zt}`,Er);let fa;if(typeof Tr=="function")fa=Tr;else{const Ln=Tr||Je.expandIcon;fa=(0,$.Tm)(Ln,{className:Z()(`${Tn}-submenu-expand-icon`,(Be=Ln==null?void 0:Ln.props)===null||Be===void 0?void 0:Be.className)})}const Xi=M.useMemo(()=>({prefixCls:Tn,inlineCollapsed:tt||!1,direction:ir,firstLevel:!0,theme:Zt,mode:Qr,disableMenuItemTitleTooltip:pn}),[Tn,tt,ir,pn,Zt]);return wn(M.createElement(Me.Z.Provider,{value:null},M.createElement(mt.Provider,{value:Xi},M.createElement(v.ZP,Object.assign({getPopupContainer:Qe,overflowedIndicator:M.createElement(B.Z,null),overflowedIndicatorPopupClassName:`${Tn}-${Zt}`,mode:Qr,selectable:fr,onClick:Hr},dr,{inlineCollapsed:tt,className:Si,prefixCls:Tn,direction:ir,defaultMotions:Yr,expandIcon:fa,ref:W,rootClassName:Z()(bt,Nn)}),_r))))});const O=(0,M.forwardRef)((X,W)=>{const ae=(0,M.useRef)(null),Be=M.useContext(ft);return(0,M.useImperativeHandle)(W,()=>({menu:ae.current,focus:ve=>{var Je;(Je=ae.current)===null||Je===void 0||Je.focus(ve)}})),M.createElement(G,Object.assign({ref:ae},X,Be))});O.Item=pt,O.SubMenu=wt,O.Divider=Ne,O.ItemGroup=v.BW;var k=O},247:function(vt,Ee,g){"use strict";g.d(Ee,{ZP:function(){return Nr}});var v=g(74902),M=g(38135),c=g(67294),K=g(32170),N=g(84273),Z=g(1413),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},L=B,$=g(42135),U=function(jn,Pt){return c.createElement($.Z,(0,Z.Z)((0,Z.Z)({},jn),{},{ref:Pt,icon:L}))};U.displayName="ExclamationCircleFilled";var ke=c.forwardRef(U),We=g(86581),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Le=me,Se=function(jn,Pt){return c.createElement($.Z,(0,Z.Z)((0,Z.Z)({},jn),{},{ref:Pt,icon:Le}))};Se.displayName="CheckCircleFilled";var et=c.forwardRef(Se),at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Lt=at,Et=function(jn,Pt){return c.createElement($.Z,(0,Z.Z)((0,Z.Z)({},jn),{},{ref:Pt,icon:Lt}))};Et.displayName="InfoCircleFilled";var jt=c.forwardRef(Et),pe=g(97685),$e=g(91),ye=g(87462),ie=g(73935),re=g(62874),De=g(94184),le=g.n(De),ge=g(4942),ce=c.forwardRef(function(bt,jn){var Pt=bt.prefixCls,zt=bt.style,Qt=bt.className,dr=bt.duration,_r=dr===void 0?4.5:dr,Hr=bt.eventKey,Qr=bt.content,fr=bt.closable,tt=bt.closeIcon,Yr=tt===void 0?"x":tt,Tn=bt.props,wn=bt.onClick,Nn=bt.onNoticeClose,Si=bt.times,fa=c.useState(!1),Xi=(0,pe.Z)(fa,2),Ln=Xi[0],na=Xi[1],xi=function(){Nn(Hr)};c.useEffect(function(){if(!Ln&&_r>0){var La=setTimeout(function(){xi()},_r*1e3);return function(){clearTimeout(La)}}},[_r,Ln,Si]);var ta="".concat(Pt,"-notice");return c.createElement("div",(0,ye.Z)({},Tn,{ref:jn,className:le()(ta,Qt,(0,ge.Z)({},"".concat(ta,"-closable"),fr)),style:zt,onMouseEnter:function(){na(!0)},onMouseLeave:function(){na(!1)},onClick:wn}),c.createElement("div",{className:"".concat(ta,"-content")},Qr),fr&&c.createElement("a",{tabIndex:0,className:"".concat(ta,"-close"),onClick:function(Ki){Ki.preventDefault(),Ki.stopPropagation(),xi()}},Yr))}),je=ce,J=c.forwardRef(function(bt,jn){var Pt=bt.prefixCls,zt=Pt===void 0?"rc-notification":Pt,Qt=bt.container,dr=bt.motion,_r=bt.maxCount,Hr=bt.className,Qr=bt.style,fr=bt.onAllRemoved,tt=c.useState([]),Yr=(0,pe.Z)(tt,2),Tn=Yr[0],wn=Yr[1],Nn=function(Ki){var jo,uo=Tn.find(function(An){return An.key===Ki});uo==null||(jo=uo.onClose)===null||jo===void 0||jo.call(uo),wn(function(An){return An.filter(function(gn){return gn.key!==Ki})})};c.useImperativeHandle(jn,function(){return{open:function(Ki){wn(function(jo){var uo=(0,v.Z)(jo),An=uo.findIndex(function(fi){return fi.key===Ki.key}),gn=(0,Z.Z)({},Ki);if(An>=0){var Oi;gn.times=(((Oi=jo[An])===null||Oi===void 0?void 0:Oi.times)||0)+1,uo[An]=gn}else gn.times=0,uo.push(gn);return _r>0&&uo.length>_r&&(uo=uo.slice(-_r)),uo})},close:function(Ki){Nn(Ki)},destroy:function(){wn([])}}});var Si=c.useState({}),fa=(0,pe.Z)(Si,2),Xi=fa[0],Ln=fa[1];c.useEffect(function(){var La={};Tn.forEach(function(Ki){var jo=Ki.placement,uo=jo===void 0?"topRight":jo;uo&&(La[uo]=La[uo]||[],La[uo].push(Ki))}),Object.keys(Xi).forEach(function(Ki){La[Ki]=La[Ki]||[]}),Ln(La)},[Tn]);var na=function(Ki){Ln(function(jo){var uo=(0,Z.Z)({},jo),An=uo[Ki]||[];return An.length||delete uo[Ki],uo})},xi=c.useRef(!1);if(c.useEffect(function(){Object.keys(Xi).length>0?xi.current=!0:xi.current&&(fr==null||fr(),xi.current=!1)},[Xi]),!Qt)return null;var ta=Object.keys(Xi);return(0,ie.createPortal)(c.createElement(c.Fragment,null,ta.map(function(La){var Ki=Xi[La],jo=Ki.map(function(An){return{config:An,key:An.key}}),uo=typeof dr=="function"?dr(La):dr;return c.createElement(re.V,(0,ye.Z)({key:La,className:le()(zt,"".concat(zt,"-").concat(La),Hr==null?void 0:Hr(La)),style:Qr==null?void 0:Qr(La),keys:jo,motionAppear:!0},uo,{onAllRemoved:function(){na(La)}}),function(An,gn){var Oi=An.config,fi=An.className,va=An.style,wa=Oi.key,Ca=Oi.times,Aa=Oi.className,ma=Oi.style;return c.createElement(je,(0,ye.Z)({},Oi,{ref:gn,prefixCls:zt,className:le()(fi,Aa),style:(0,Z.Z)((0,Z.Z)({},va),ma),times:Ca,key:wa,eventKey:wa,onNoticeClose:Nn}))})})),Qt)}),Me=J,ne=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],xe=function(){return document.body},Ne=0;function Pe(){for(var bt={},jn=arguments.length,Pt=new Array(jn),zt=0;zt<jn;zt++)Pt[zt]=arguments[zt];return Pt.forEach(function(Qt){Qt&&Object.keys(Qt).forEach(function(dr){var _r=Qt[dr];_r!==void 0&&(bt[dr]=_r)})}),bt}function He(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},jn=bt.getContainer,Pt=jn===void 0?xe:jn,zt=bt.motion,Qt=bt.prefixCls,dr=bt.maxCount,_r=bt.className,Hr=bt.style,Qr=bt.onAllRemoved,fr=(0,$e.Z)(bt,ne),tt=c.useState(),Yr=(0,pe.Z)(tt,2),Tn=Yr[0],wn=Yr[1],Nn=c.useRef(),Si=c.createElement(Me,{container:Tn,ref:Nn,prefixCls:Qt,motion:zt,maxCount:dr,className:_r,style:Hr,onAllRemoved:Qr}),fa=c.useState([]),Xi=(0,pe.Z)(fa,2),Ln=Xi[0],na=Xi[1],xi=c.useMemo(function(){return{open:function(La){var Ki=Pe(fr,La);(Ki.key===null||Ki.key===void 0)&&(Ki.key="rc-notification-".concat(Ne),Ne+=1),na(function(jo){return[].concat((0,v.Z)(jo),[{type:"open",config:Ki}])})},close:function(La){na(function(Ki){return[].concat((0,v.Z)(Ki),[{type:"close",key:La}])})},destroy:function(){na(function(La){return[].concat((0,v.Z)(La),[{type:"destroy"}])})}}},[]);return c.useEffect(function(){wn(Pt())}),c.useEffect(function(){Nn.current&&Ln.length&&(Ln.forEach(function(ta){switch(ta.type){case"open":Nn.current.open(ta.config);break;case"close":Nn.current.close(ta.key);break;case"destroy":Nn.current.destroy();break}}),na([]))},[Ln]),[xi,Si]}var lt=g(51222),ft=g(67968),It=g(45503),fe=g(14747);const _t=bt=>{const{componentCls:jn,iconCls:Pt,boxShadow:zt,colorBgElevated:Qt,colorSuccess:dr,colorError:_r,colorWarning:Hr,colorInfo:Qr,fontSizeLG:fr,motionEaseInOutCirc:tt,motionDurationSlow:Yr,marginXS:Tn,paddingXS:wn,borderRadiusLG:Nn,zIndexPopup:Si,messageNoticeContentPadding:fa}=bt,Xi=new lt.E4("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:wn,transform:"translateY(0)",opacity:1}}),Ln=new lt.E4("MessageMoveOut",{"0%":{maxHeight:bt.height,padding:wn,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}});return[{[jn]:Object.assign(Object.assign({},(0,fe.Wf)(bt)),{position:"fixed",top:Tn,width:"100%",pointerEvents:"none",zIndex:Si,[`${jn}-move-up`]:{animationFillMode:"forwards"},[`
        ${jn}-move-up-appear,
        ${jn}-move-up-enter
      `]:{animationName:Xi,animationDuration:Yr,animationPlayState:"paused",animationTimingFunction:tt},[`
        ${jn}-move-up-appear${jn}-move-up-appear-active,
        ${jn}-move-up-enter${jn}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${jn}-move-up-leave`]:{animationName:Ln,animationDuration:Yr,animationPlayState:"paused",animationTimingFunction:tt},[`${jn}-move-up-leave${jn}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[`${jn}-notice`]:{padding:wn,textAlign:"center",[`${jn}-custom-content > ${Pt}`]:{verticalAlign:"text-bottom",marginInlineEnd:Tn,fontSize:fr},[`${jn}-notice-content`]:{display:"inline-block",padding:fa,background:Qt,borderRadius:Nn,boxShadow:zt,pointerEvents:"all"},[`${jn}-success > ${Pt}`]:{color:dr},[`${jn}-error > ${Pt}`]:{color:_r},[`${jn}-warning > ${Pt}`]:{color:Hr},[`
        ${jn}-info > ${Pt},
        ${jn}-loading > ${Pt}`]:{color:Qr}}},{[`${jn}-notice-pure-panel`]:{padding:0,textAlign:"start"}}]};var Ye=(0,ft.Z)("Message",bt=>{const jn=(0,It.TS)(bt,{messageNoticeContentPadding:`${(bt.controlHeightLG-bt.fontSize*bt.lineHeight)/2}px ${bt.paddingSM}px`});return[_t(jn)]},bt=>({height:150,zIndexPopup:bt.zIndexPopupBase+10})),Ot=g(53124),mt=function(bt,jn){var Pt={};for(var zt in bt)Object.prototype.hasOwnProperty.call(bt,zt)&&jn.indexOf(zt)<0&&(Pt[zt]=bt[zt]);if(bt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Qt=0,zt=Object.getOwnPropertySymbols(bt);Qt<zt.length;Qt++)jn.indexOf(zt[Qt])<0&&Object.prototype.propertyIsEnumerable.call(bt,zt[Qt])&&(Pt[zt[Qt]]=bt[zt[Qt]]);return Pt};const Rt={info:c.createElement(jt,null),success:c.createElement(et,null),error:c.createElement(We.Z,null),warning:c.createElement(ke,null),loading:c.createElement(N.Z,null)};function pt(bt){let{prefixCls:jn,type:Pt,icon:zt,children:Qt}=bt;return c.createElement("div",{className:le()(`${jn}-custom-content`,`${jn}-${Pt}`)},zt||Rt[Pt],c.createElement("span",null,Qt))}function Ge(bt){const{prefixCls:jn,className:Pt,type:zt,icon:Qt,content:dr}=bt,_r=mt(bt,["prefixCls","className","type","icon","content"]),{getPrefixCls:Hr}=c.useContext(Ot.E_),Qr=jn||Hr("message"),[,fr]=Ye(Qr);return c.createElement(je,Object.assign({},_r,{prefixCls:Qr,className:le()(Pt,fr,`${Qr}-notice-pure-panel`),eventKey:"pure",duration:null,content:c.createElement(pt,{prefixCls:Qr,type:zt,icon:Qt},dr)}))}var wt=g(12057);function ee(bt,jn){return{motionName:jn!=null?jn:`${bt}-move-up`}}function Re(bt){let jn;const Pt=new Promise(Qt=>{jn=bt(()=>{Qt(!0)})}),zt=()=>{jn==null||jn()};return zt.then=(Qt,dr)=>Pt.then(Qt,dr),zt.promise=Pt,zt}var dt=function(bt,jn){var Pt={};for(var zt in bt)Object.prototype.hasOwnProperty.call(bt,zt)&&jn.indexOf(zt)<0&&(Pt[zt]=bt[zt]);if(bt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Qt=0,zt=Object.getOwnPropertySymbols(bt);Qt<zt.length;Qt++)jn.indexOf(zt[Qt])<0&&Object.prototype.propertyIsEnumerable.call(bt,zt[Qt])&&(Pt[zt[Qt]]=bt[zt[Qt]]);return Pt};const D=8,q=3,G=c.forwardRef((bt,jn)=>{const{top:Pt,prefixCls:zt,getContainer:Qt,maxCount:dr,duration:_r=q,rtl:Hr,transitionName:Qr,onAllRemoved:fr}=bt,{getPrefixCls:tt,getPopupContainer:Yr}=c.useContext(Ot.E_),Tn=zt||tt("message"),[,wn]=Ye(Tn),Nn=()=>({left:"50%",transform:"translateX(-50%)",top:Pt!=null?Pt:D}),Si=()=>le()(wn,Hr?`${Tn}-rtl`:""),fa=()=>ee(Tn,Qr),Xi=c.createElement("span",{className:`${Tn}-close-x`},c.createElement(wt.Z,{className:`${Tn}-close-icon`})),[Ln,na]=He({prefixCls:Tn,style:Nn,className:Si,motion:fa,closable:!1,closeIcon:Xi,duration:_r,getContainer:()=>(Qt==null?void 0:Qt())||(Yr==null?void 0:Yr())||document.body,maxCount:dr,onAllRemoved:fr});return c.useImperativeHandle(jn,()=>Object.assign(Object.assign({},Ln),{prefixCls:Tn,hashId:wn})),na});let O=0;function k(bt){const jn=c.useRef(null);return[c.useMemo(()=>{const zt=Qr=>{var fr;(fr=jn.current)===null||fr===void 0||fr.close(Qr)},Qt=Qr=>{if(!jn.current){const ta=()=>{};return ta.then=()=>{},ta}const{open:fr,prefixCls:tt,hashId:Yr}=jn.current,Tn=`${tt}-notice`,{content:wn,icon:Nn,type:Si,key:fa,className:Xi,onClose:Ln}=Qr,na=dt(Qr,["content","icon","type","key","className","onClose"]);let xi=fa;return xi==null&&(O+=1,xi=`antd-message-${O}`),Re(ta=>(fr(Object.assign(Object.assign({},na),{key:xi,content:c.createElement(pt,{prefixCls:tt,type:Si,icon:Nn},wn),placement:"top",className:le()(Si&&`${Tn}-${Si}`,Yr,Xi),onClose:()=>{Ln==null||Ln(),ta()}})),()=>{zt(xi)}))},_r={open:Qt,destroy:Qr=>{var fr;Qr!==void 0?zt(Qr):(fr=jn.current)===null||fr===void 0||fr.destroy()}};return["info","success","warning","error","loading"].forEach(Qr=>{const fr=(tt,Yr,Tn)=>{let wn;tt&&typeof tt=="object"&&"content"in tt?wn=tt:wn={content:tt};let Nn,Si;typeof Yr=="function"?Si=Yr:(Nn=Yr,Si=Tn);const fa=Object.assign(Object.assign({onClose:Si,duration:Nn},wn),{type:Qr});return Qt(fa)};_r[Qr]=fr}),_r},[]),c.createElement(G,Object.assign({key:"message-holder"},bt,{ref:jn}))]}function X(bt){return k(bt)}const W=["success","info","warning","error","loading"];let ae=null,Be=bt=>bt(),ve=[],Je={};function ot(){const{prefixCls:bt,getContainer:jn,duration:Pt,rtl:zt,maxCount:Qt,top:dr}=Je,_r=bt!=null?bt:(0,K.w6)().getPrefixCls("message"),Hr=(jn==null?void 0:jn())||document.body;return{prefixCls:_r,container:Hr,duration:Pt,rtl:zt,maxCount:Qt,top:dr}}const Qe=c.forwardRef((bt,jn)=>{const Pt=()=>{const{prefixCls:Yr,container:Tn,maxCount:wn,duration:Nn,rtl:Si,top:fa}=ot();return{prefixCls:Yr,getContainer:()=>Tn,maxCount:wn,duration:Nn,rtl:Si,top:fa}},[zt,Qt]=c.useState(Pt),[dr,_r]=k(zt),Hr=(0,K.w6)(),Qr=Hr.getRootPrefixCls(),fr=Hr.getIconPrefixCls(),tt=()=>{Qt(Pt)};return c.useEffect(tt,[]),c.useImperativeHandle(jn,()=>{const Yr=Object.assign({},dr);return Object.keys(Yr).forEach(Tn=>{Yr[Tn]=function(){return tt(),dr[Tn].apply(dr,arguments)}}),{instance:Yr,sync:tt}}),c.createElement(K.ZP,{prefixCls:Qr,iconPrefixCls:fr},_r)});function ir(){if(!ae){const bt=document.createDocumentFragment(),jn={fragment:bt};ae=jn,Be(()=>{(0,M.s)(c.createElement(Qe,{ref:Pt=>{const{instance:zt,sync:Qt}=Pt||{};Promise.resolve().then(()=>{!jn.instance&&zt&&(jn.instance=zt,jn.sync=Qt,ir())})}}),bt)});return}ae.instance&&(ve.forEach(bt=>{const{type:jn,skipped:Pt}=bt;if(!Pt)switch(jn){case"open":{Be(()=>{const zt=ae.instance.open(Object.assign(Object.assign({},Je),bt.config));zt==null||zt.then(bt.resolve),bt.setCloseFn(zt)});break}case"destroy":Be(()=>{ae==null||ae.instance.destroy(bt.key)});break;default:Be(()=>{var zt;const Qt=(zt=ae.instance)[jn].apply(zt,(0,v.Z)(bt.args));Qt==null||Qt.then(bt.resolve),bt.setCloseFn(Qt)})}}),ve=[])}function mr(bt){Je=Object.assign(Object.assign({},Je),bt),Be(()=>{var jn;(jn=ae==null?void 0:ae.sync)===null||jn===void 0||jn.call(ae)})}function Ar(bt){const jn=Re(Pt=>{let zt;const Qt={type:"open",config:bt,resolve:Pt,setCloseFn:dr=>{zt=dr}};return ve.push(Qt),()=>{zt?Be(()=>{zt()}):Qt.skipped=!0}});return ir(),jn}function Er(bt,jn){const Pt=Re(zt=>{let Qt;const dr={type:bt,args:jn,resolve:zt,setCloseFn:_r=>{Qt=_r}};return ve.push(dr),()=>{Qt?Be(()=>{Qt()}):dr.skipped=!0}});return ir(),Pt}function Zt(bt){ve.push({type:"destroy",key:bt}),ir()}const pn={open:Ar,destroy:Zt,config:mr,useMessage:X,_InternalPanelDoNotUseOrYouWillBeFired:Ge};W.forEach(bt=>{pn[bt]=function(){for(var jn=arguments.length,Pt=new Array(jn),zt=0;zt<jn;zt++)Pt[zt]=arguments[zt];return Er(bt,Pt)}});const un=()=>{};let Zn=null,Cr=null;var Nr=pn},33573:function(vt,Ee,g){"use strict";g.d(Ee,{ZP:function(){return Pe}});var v=g(94184),M=g.n(v),c=g(21770),K=g(67294),N=g(53124),Z=g(97647);function B(He){return Object.keys(He).reduce((lt,ft)=>((ft.startsWith("data-")||ft.startsWith("aria-")||ft==="role")&&!ft.startsWith("data-__")&&(lt[ft]=He[ft]),lt),{})}const L=K.createContext(null),$=L.Provider;var U=L;const ke=K.createContext(null),We=ke.Provider;var me=g(50132),Le=g(42550),Se=g(98866),et=g(65223),at=g(51222),Lt=g(67968),Et=g(45503),jt=g(14747);const pe=new at.E4("antRadioEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),$e=He=>{const{componentCls:lt,antCls:ft}=He,It=`${lt}-group`;return{[It]:Object.assign(Object.assign({},(0,jt.Wf)(He)),{display:"inline-block",fontSize:0,[`&${It}-rtl`]:{direction:"rtl"},[`${ft}-badge ${ft}-badge-count`]:{zIndex:1},[`> ${ft}-badge:not(:first-child) > ${ft}-button-wrapper`]:{borderInlineStart:"none"}})}},ye=He=>{const{componentCls:lt,radioWrapperMarginRight:ft,radioCheckedColor:It,radioSize:fe,motionDurationSlow:_t,motionDurationMid:Ye,motionEaseInOut:Ot,motionEaseInOutCirc:mt,radioButtonBg:Rt,colorBorder:pt,lineWidth:Ge,radioDotSize:wt,colorBgContainerDisabled:ee,colorTextDisabled:Re,paddingXS:dt,radioDotDisabledColor:D,lineType:q,radioDotDisabledSize:G,wireframe:O,colorWhite:k}=He,X=`${lt}-inner`;return{[`${lt}-wrapper`]:Object.assign(Object.assign({},(0,jt.Wf)(He)),{position:"relative",display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:ft,cursor:"pointer",[`&${lt}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:He.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${lt}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${Ge}px ${q} ${It}`,borderRadius:"50%",visibility:"hidden",animationName:pe,animationDuration:_t,animationTimingFunction:Ot,animationFillMode:"both",content:'""'},[lt]:Object.assign(Object.assign({},(0,jt.Wf)(He)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center"}),[`${lt}-wrapper:hover &,
        &:hover ${X}`]:{borderColor:It},[`${lt}-input:focus-visible + ${X}`]:Object.assign({},(0,jt.oN)(He)),[`${lt}:hover::after, ${lt}-wrapper:hover &::after`]:{visibility:"visible"},[`${lt}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:fe,height:fe,marginBlockStart:fe/-2,marginInlineStart:fe/-2,backgroundColor:O?It:k,borderBlockStart:0,borderInlineStart:0,borderRadius:fe,transform:"scale(0)",opacity:0,transition:`all ${_t} ${mt}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:fe,height:fe,backgroundColor:Rt,borderColor:pt,borderStyle:"solid",borderWidth:Ge,borderRadius:"50%",transition:`all ${Ye}`},[`${lt}-input`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,insetBlockEnd:0,insetInlineStart:0,zIndex:1,cursor:"pointer",opacity:0},[`${lt}-checked`]:{[X]:{borderColor:It,backgroundColor:O?Rt:It,"&::after":{transform:`scale(${wt/fe})`,opacity:1,transition:`all ${_t} ${mt}`}}},[`${lt}-disabled`]:{cursor:"not-allowed",[X]:{backgroundColor:ee,borderColor:pt,cursor:"not-allowed","&::after":{backgroundColor:D}},[`${lt}-input`]:{cursor:"not-allowed"},[`${lt}-disabled + span`]:{color:Re,cursor:"not-allowed"},[`&${lt}-checked`]:{[X]:{"&::after":{transform:`scale(${G/fe})`}}}},[`span${lt} + *`]:{paddingInlineStart:dt,paddingInlineEnd:dt}})}},ie=He=>{const{radioButtonColor:lt,controlHeight:ft,componentCls:It,lineWidth:fe,lineType:_t,colorBorder:Ye,motionDurationSlow:Ot,motionDurationMid:mt,radioButtonPaddingHorizontal:Rt,fontSize:pt,radioButtonBg:Ge,fontSizeLG:wt,controlHeightLG:ee,controlHeightSM:Re,paddingXS:dt,borderRadius:D,borderRadiusSM:q,borderRadiusLG:G,radioCheckedColor:O,radioButtonCheckedBg:k,radioButtonHoverColor:X,radioButtonActiveColor:W,radioSolidCheckedColor:ae,colorTextDisabled:Be,colorBgContainerDisabled:ve,radioDisabledButtonCheckedColor:Je,radioDisabledButtonCheckedBg:ot}=He;return{[`${It}-button-wrapper`]:{position:"relative",display:"inline-block",height:ft,margin:0,paddingInline:Rt,paddingBlock:0,color:lt,fontSize:pt,lineHeight:`${ft-fe*2}px`,background:Ge,border:`${fe}px ${_t} ${Ye}`,borderBlockStartWidth:fe+.02,borderInlineStartWidth:0,borderInlineEndWidth:fe,cursor:"pointer",transition:[`color ${mt}`,`background ${mt}`,`border-color ${mt}`,`box-shadow ${mt}`].join(","),a:{color:lt},[`> ${It}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:-fe,insetInlineStart:-fe,display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:fe,paddingInline:0,backgroundColor:Ye,transition:`background-color ${Ot}`,content:'""'}},"&:first-child":{borderInlineStart:`${fe}px ${_t} ${Ye}`,borderStartStartRadius:D,borderEndStartRadius:D},"&:last-child":{borderStartEndRadius:D,borderEndEndRadius:D},"&:first-child:last-child":{borderRadius:D},[`${It}-group-large &`]:{height:ee,fontSize:wt,lineHeight:`${ee-fe*2}px`,"&:first-child":{borderStartStartRadius:G,borderEndStartRadius:G},"&:last-child":{borderStartEndRadius:G,borderEndEndRadius:G}},[`${It}-group-small &`]:{height:Re,paddingInline:dt-fe,paddingBlock:0,lineHeight:`${Re-fe*2}px`,"&:first-child":{borderStartStartRadius:q,borderEndStartRadius:q},"&:last-child":{borderStartEndRadius:q,borderEndEndRadius:q}},"&:hover":{position:"relative",color:O},"&:has(:focus-visible)":Object.assign({},(0,jt.oN)(He)),[`${It}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${It}-button-wrapper-disabled)`]:{zIndex:1,color:O,background:k,borderColor:O,"&::before":{backgroundColor:O},"&:first-child":{borderColor:O},"&:hover":{color:X,borderColor:X,"&::before":{backgroundColor:X}},"&:active":{color:W,borderColor:W,"&::before":{backgroundColor:W}}},[`${It}-group-solid &-checked:not(${It}-button-wrapper-disabled)`]:{color:ae,background:O,borderColor:O,"&:hover":{color:ae,background:X,borderColor:X},"&:active":{color:ae,background:W,borderColor:W}},"&-disabled":{color:Be,backgroundColor:ve,borderColor:Ye,cursor:"not-allowed","&:first-child, &:hover":{color:Be,backgroundColor:ve,borderColor:Ye}},[`&-disabled${It}-button-wrapper-checked`]:{color:Je,backgroundColor:ot,borderColor:Ye,boxShadow:"none"}}}};var re=(0,Lt.Z)("Radio",He=>{const{padding:lt,lineWidth:ft,controlItemBgActiveDisabled:It,colorTextDisabled:fe,colorBgContainer:_t,fontSizeLG:Ye,controlOutline:Ot,colorPrimaryHover:mt,colorPrimaryActive:Rt,colorText:pt,colorPrimary:Ge,marginXS:wt,controlOutlineWidth:ee,colorTextLightSolid:Re,wireframe:dt}=He,D=`0 0 0 ${ee}px ${Ot}`,q=D,G=Ye,O=4,k=G-O*2,X=dt?k:G-(O+ft)*2,W=Ge,ae=pt,Be=mt,ve=Rt,Je=lt-ft,ot=fe,Qe=wt,ir=(0,Et.TS)(He,{radioFocusShadow:D,radioButtonFocusShadow:q,radioSize:G,radioDotSize:X,radioDotDisabledSize:k,radioCheckedColor:W,radioDotDisabledColor:fe,radioSolidCheckedColor:Re,radioButtonBg:_t,radioButtonCheckedBg:_t,radioButtonColor:ae,radioButtonHoverColor:Be,radioButtonActiveColor:ve,radioButtonPaddingHorizontal:Je,radioDisabledButtonCheckedBg:It,radioDisabledButtonCheckedColor:ot,radioWrapperMarginRight:Qe});return[$e(ir),ye(ir),ie(ir)]}),De=function(He,lt){var ft={};for(var It in He)Object.prototype.hasOwnProperty.call(He,It)&&lt.indexOf(It)<0&&(ft[It]=He[It]);if(He!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,It=Object.getOwnPropertySymbols(He);fe<It.length;fe++)lt.indexOf(It[fe])<0&&Object.prototype.propertyIsEnumerable.call(He,It[fe])&&(ft[It[fe]]=He[It[fe]]);return ft};const le=(He,lt)=>{var ft,It;const fe=K.useContext(U),_t=K.useContext(ke),{getPrefixCls:Ye,direction:Ot}=K.useContext(N.E_),mt=K.useRef(),Rt=(0,Le.sQ)(lt,mt),{isFormItemInput:pt}=K.useContext(et.aM),Ge=ve=>{var Je,ot;(Je=He.onChange)===null||Je===void 0||Je.call(He,ve),(ot=fe==null?void 0:fe.onChange)===null||ot===void 0||ot.call(fe,ve)},{prefixCls:wt,className:ee,rootClassName:Re,children:dt,style:D}=He,q=De(He,["prefixCls","className","rootClassName","children","style"]),G=Ye("radio",wt),O=((fe==null?void 0:fe.optionType)||_t)==="button"?`${G}-button`:G,[k,X]=re(G),W=Object.assign({},q),ae=K.useContext(Se.Z);fe&&(W.name=fe.name,W.onChange=Ge,W.checked=He.value===fe.value,W.disabled=(ft=W.disabled)!==null&&ft!==void 0?ft:fe.disabled),W.disabled=(It=W.disabled)!==null&&It!==void 0?It:ae;const Be=M()(`${O}-wrapper`,{[`${O}-wrapper-checked`]:W.checked,[`${O}-wrapper-disabled`]:W.disabled,[`${O}-wrapper-rtl`]:Ot==="rtl",[`${O}-wrapper-in-form-item`]:pt},ee,Re,X);return k(K.createElement("label",{className:Be,style:D,onMouseEnter:He.onMouseEnter,onMouseLeave:He.onMouseLeave},K.createElement(me.Z,Object.assign({},W,{type:"radio",prefixCls:O,ref:Rt})),dt!==void 0?K.createElement("span",null,dt):null))};var ce=K.forwardRef(le);const je=K.forwardRef((He,lt)=>{const{getPrefixCls:ft,direction:It}=K.useContext(N.E_),fe=K.useContext(Z.Z),[_t,Ye]=(0,c.Z)(He.defaultValue,{value:He.value}),Ot=ir=>{const mr=_t,Ar=ir.target.value;"value"in He||Ye(Ar);const{onChange:Er}=He;Er&&Ar!==mr&&Er(ir)},{prefixCls:mt,className:Rt,rootClassName:pt,options:Ge,buttonStyle:wt="outline",disabled:ee,children:Re,size:dt,style:D,id:q,onMouseEnter:G,onMouseLeave:O,onFocus:k,onBlur:X}=He,W=ft("radio",mt),ae=`${W}-group`,[Be,ve]=re(W);let Je=Re;Ge&&Ge.length>0&&(Je=Ge.map(ir=>typeof ir=="string"||typeof ir=="number"?K.createElement(ce,{key:ir.toString(),prefixCls:W,disabled:ee,value:ir,checked:_t===ir},ir):K.createElement(ce,{key:`radio-group-value-options-${ir.value}`,prefixCls:W,disabled:ir.disabled||ee,value:ir.value,checked:_t===ir.value,style:ir.style},ir.label)));const ot=dt||fe,Qe=M()(ae,`${ae}-${wt}`,{[`${ae}-${ot}`]:ot,[`${ae}-rtl`]:It==="rtl"},Rt,pt,ve);return Be(K.createElement("div",Object.assign({},B(He),{className:Qe,style:D,onMouseEnter:G,onMouseLeave:O,onFocus:k,onBlur:X,id:q,ref:lt}),K.createElement($,{value:{onChange:Ot,value:_t,disabled:He.disabled,name:He.name,optionType:He.optionType}},Je)))});var J=K.memo(je),Me=function(He,lt){var ft={};for(var It in He)Object.prototype.hasOwnProperty.call(He,It)&&lt.indexOf(It)<0&&(ft[It]=He[It]);if(He!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,It=Object.getOwnPropertySymbols(He);fe<It.length;fe++)lt.indexOf(It[fe])<0&&Object.prototype.propertyIsEnumerable.call(He,It[fe])&&(ft[It[fe]]=He[It[fe]]);return ft};const ne=(He,lt)=>{const{getPrefixCls:ft}=K.useContext(N.E_),{prefixCls:It}=He,fe=Me(He,["prefixCls"]),_t=ft("radio",It);return K.createElement(We,{value:"button"},K.createElement(ce,Object.assign({prefixCls:_t},fe,{type:"radio",ref:lt})))};var xe=K.forwardRef(ne);const Ne=ce;Ne.Button=xe,Ne.Group=J,Ne.__ANT_RADIO=!0;var Pe=Ne},25968:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Se}});var v=g(94184),M=g.n(v),c=g(67294),K=g(53124),N=g(37193),Z=g(74443),B=g(99134),L=g(6999),$=function(et,at){var Lt={};for(var Et in et)Object.prototype.hasOwnProperty.call(et,Et)&&at.indexOf(Et)<0&&(Lt[Et]=et[Et]);if(et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,Et=Object.getOwnPropertySymbols(et);jt<Et.length;jt++)at.indexOf(Et[jt])<0&&Object.prototype.propertyIsEnumerable.call(et,Et[jt])&&(Lt[Et[jt]]=et[Et[jt]]);return Lt};const U=null,ke=null;function We(et,at){const[Lt,Et]=c.useState(typeof et=="string"?et:""),jt=()=>{if(typeof et=="string"&&Et(et),typeof et=="object")for(let pe=0;pe<Z.c.length;pe++){const $e=Z.c[pe];if(!at[$e])continue;const ye=et[$e];if(ye!==void 0){Et(ye);return}}};return c.useEffect(()=>{jt()},[JSON.stringify(et),at]),Lt}var Le=c.forwardRef((et,at)=>{const{prefixCls:Lt,justify:Et,align:jt,className:pe,style:$e,children:ye,gutter:ie=0,wrap:re}=et,De=$(et,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:le,direction:ge}=c.useContext(K.E_),[ce,je]=c.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[J,Me]=c.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),ne=We(jt,J),xe=We(Et,J),Ne=(0,N.Z)(),Pe=c.useRef(ie),He=(0,Z.Z)();c.useEffect(()=>{const ee=He.subscribe(Re=>{Me(Re);const dt=Pe.current||0;(!Array.isArray(dt)&&typeof dt=="object"||Array.isArray(dt)&&(typeof dt[0]=="object"||typeof dt[1]=="object"))&&je(Re)});return()=>He.unsubscribe(ee)},[]);const lt=()=>{const ee=[void 0,void 0];return(Array.isArray(ie)?ie:[ie,void 0]).forEach((dt,D)=>{if(typeof dt=="object")for(let q=0;q<Z.c.length;q++){const G=Z.c[q];if(ce[G]&&dt[G]!==void 0){ee[D]=dt[G];break}}else ee[D]=dt}),ee},ft=le("row",Lt),[It,fe]=(0,L.V)(ft),_t=lt(),Ye=M()(ft,{[`${ft}-no-wrap`]:re===!1,[`${ft}-${xe}`]:xe,[`${ft}-${ne}`]:ne,[`${ft}-rtl`]:ge==="rtl"},pe,fe),Ot={},mt=_t[0]!=null&&_t[0]>0?_t[0]/-2:void 0,Rt=_t[1]!=null&&_t[1]>0?_t[1]/-2:void 0;mt&&(Ot.marginLeft=mt,Ot.marginRight=mt),Ne?[,Ot.rowGap]=_t:Rt&&(Ot.marginTop=Rt,Ot.marginBottom=Rt);const[pt,Ge]=_t,wt=c.useMemo(()=>({gutter:[pt,Ge],wrap:re,supportFlexGap:Ne}),[pt,Ge,re,Ne]);return It(c.createElement(B.Z.Provider,{value:wt},c.createElement("div",Object.assign({},De,{className:Ye,style:Object.assign(Object.assign({},Ot),$e),ref:at}),ye)))}),Se=Le},33394:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return D}});var v=g(94184),M=g.n(v),c=g(21990),K=g(98423),N=g(67294),Z=g(53124),B=g(88258),L=g(98866),$=g(97647),U=g(65223),ke=g(33603),We=g(9708),me=g(1413),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},Se=Le,et=g(42135),at=function(G,O){return N.createElement(et.Z,(0,me.Z)((0,me.Z)({},G),{},{ref:O,icon:Se}))};at.displayName="CheckOutlined";var Lt=N.forwardRef(at),Et=g(86581),jt=g(12057),pe=g(55047),$e=g(84273),ye=g(40110);function ie(q){let{suffixIcon:G,clearIcon:O,menuItemSelectedIcon:k,removeIcon:X,loading:W,multiple:ae,hasFeedback:Be,prefixCls:ve,showArrow:Je,feedbackIcon:ot}=q;const Qe=O!=null?O:N.createElement(Et.Z,null),ir=Zt=>N.createElement(N.Fragment,null,Je!==!1&&Zt,Be&&ot);let mr=null;if(G!==void 0)mr=ir(G);else if(W)mr=ir(N.createElement($e.Z,{spin:!0}));else{const Zt=`${ve}-suffix`;mr=Tr=>{let{open:pn,showSearch:un}=Tr;return ir(pn&&un?N.createElement(ye.Z,{className:Zt}):N.createElement(pe.Z,{className:Zt}))}}let Ar=null;k!==void 0?Ar=k:ae?Ar=N.createElement(Lt,null):Ar=null;let Er=null;return X!==void 0?Er=X:Er=N.createElement(jt.Z,null),{clearIcon:Qe,suffixIcon:mr,itemIcon:Ar,removeIcon:Er}}var re=g(4173),De=g(8745),le=g(45503),ge=g(67968),ce=g(67771),je=g(33297),J=g(14747);const Me=q=>{const{controlPaddingHorizontal:G}=q;return{position:"relative",display:"block",minHeight:q.controlHeight,padding:`${(q.controlHeight-q.fontSize*q.lineHeight)/2}px ${G}px`,color:q.colorText,fontWeight:"normal",fontSize:q.fontSize,lineHeight:q.lineHeight,boxSizing:"border-box"}};var xe=q=>{const{antCls:G,componentCls:O}=q,k=`${O}-item`;return[{[`${O}-dropdown`]:Object.assign(Object.assign({},(0,J.Wf)(q)),{position:"absolute",top:-9999,zIndex:q.zIndexPopup,boxSizing:"border-box",padding:q.paddingXXS,overflow:"hidden",fontSize:q.fontSize,fontVariant:"initial",backgroundColor:q.colorBgElevated,borderRadius:q.borderRadiusLG,outline:"none",boxShadow:q.boxShadowSecondary,[`
            &${G}-slide-up-enter${G}-slide-up-enter-active${O}-dropdown-placement-bottomLeft,
            &${G}-slide-up-appear${G}-slide-up-appear-active${O}-dropdown-placement-bottomLeft
          `]:{animationName:ce.fJ},[`
            &${G}-slide-up-enter${G}-slide-up-enter-active${O}-dropdown-placement-topLeft,
            &${G}-slide-up-appear${G}-slide-up-appear-active${O}-dropdown-placement-topLeft
          `]:{animationName:ce.Qt},[`&${G}-slide-up-leave${G}-slide-up-leave-active${O}-dropdown-placement-bottomLeft`]:{animationName:ce.Uw},[`&${G}-slide-up-leave${G}-slide-up-leave-active${O}-dropdown-placement-topLeft`]:{animationName:ce.ly},"&-hidden":{display:"none"},"&-empty":{color:q.colorTextDisabled},[`${k}-empty`]:Object.assign(Object.assign({},Me(q)),{color:q.colorTextDisabled}),[`${k}`]:Object.assign(Object.assign({},Me(q)),{cursor:"pointer",transition:`background ${q.motionDurationSlow} ease`,borderRadius:q.borderRadiusSM,"&-group":{color:q.colorTextDescription,fontSize:q.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},J.vS),"&-state":{flex:"none"},[`&-active:not(${k}-option-disabled)`]:{backgroundColor:q.controlItemBgHover},[`&-selected:not(${k}-option-disabled)`]:{color:q.colorText,fontWeight:q.fontWeightStrong,backgroundColor:q.controlItemBgActive,[`${k}-option-state`]:{color:q.colorPrimary}},"&-disabled":{[`&${k}-option-selected`]:{backgroundColor:q.colorBgContainerDisabled},color:q.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:q.controlPaddingHorizontal*2}}}),"&-rtl":{direction:"rtl"}})},(0,ce.oN)(q,"slide-up"),(0,ce.oN)(q,"slide-down"),(0,je.Fm)(q,"move-up"),(0,je.Fm)(q,"move-down")]};const Ne=2;function Pe(q){let{controlHeightSM:G,controlHeight:O,lineWidth:k}=q;const X=(O-G)/2-k,W=Math.ceil(X/2);return[X,W]}function He(q,G){const{componentCls:O,iconCls:k}=q,X=`${O}-selection-overflow`,W=q.controlHeightSM,[ae]=Pe(q),Be=G?`${O}-${G}`:"";return{[`${O}-multiple${Be}`]:{fontSize:q.fontSize,[X]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${O}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:`${ae-Ne}px ${Ne*2}px`,borderRadius:q.borderRadius,[`${O}-show-search&`]:{cursor:"text"},[`${O}-disabled&`]:{background:q.colorBgContainerDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Ne}px 0`,lineHeight:`${W}px`,content:'"\\a0"'}},[`
        &${O}-show-arrow ${O}-selector,
        &${O}-allow-clear ${O}-selector
      `]:{paddingInlineEnd:q.fontSizeIcon+q.controlPaddingHorizontal},[`${O}-selection-item`]:{position:"relative",display:"flex",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:W,marginTop:Ne,marginBottom:Ne,lineHeight:`${W-q.lineWidth*2}px`,background:q.colorFillSecondary,border:`${q.lineWidth}px solid ${q.colorSplit}`,borderRadius:q.borderRadiusSM,cursor:"default",transition:`font-size ${q.motionDurationSlow}, line-height ${q.motionDurationSlow}, height ${q.motionDurationSlow}`,userSelect:"none",marginInlineEnd:Ne*2,paddingInlineStart:q.paddingXS,paddingInlineEnd:q.paddingXS/2,[`${O}-disabled&`]:{color:q.colorTextDisabled,borderColor:q.colorBorder,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:q.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},(0,J.Ro)()),{display:"inline-block",color:q.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${k}`]:{verticalAlign:"-0.2em"},"&:hover":{color:q.colorIconHover}})},[`${X}-item + ${X}-item`]:{[`${O}-selection-search`]:{marginInlineStart:0}},[`${O}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:q.inputPaddingHorizontalBase-ae,[`
          &-input,
          &-mirror
        `]:{height:W,fontFamily:q.fontFamily,lineHeight:`${W}px`,transition:`all ${q.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${O}-selection-placeholder `]:{position:"absolute",top:"50%",insetInlineStart:q.inputPaddingHorizontalBase,insetInlineEnd:q.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${q.motionDurationSlow}`}}}}function lt(q){const{componentCls:G}=q,O=(0,le.TS)(q,{controlHeight:q.controlHeightSM,controlHeightSM:q.controlHeightXS,borderRadius:q.borderRadiusSM,borderRadiusSM:q.borderRadiusXS}),[,k]=Pe(q);return[He(q),He(O,"sm"),{[`${G}-multiple${G}-sm`]:{[`${G}-selection-placeholder`]:{insetInline:q.controlPaddingHorizontalSM-q.lineWidth},[`${G}-selection-search`]:{marginInlineStart:k}}},He((0,le.TS)(q,{fontSize:q.fontSizeLG,controlHeight:q.controlHeightLG,controlHeightSM:q.controlHeight,borderRadius:q.borderRadiusLG,borderRadiusSM:q.borderRadius}),"lg")]}function ft(q,G){const{componentCls:O,inputPaddingHorizontalBase:k,borderRadius:X}=q,W=q.controlHeight-q.lineWidth*2,ae=Math.ceil(q.fontSize*1.25),Be=G?`${O}-${G}`:"";return{[`${O}-single${Be}`]:{fontSize:q.fontSize,[`${O}-selector`]:Object.assign(Object.assign({},(0,J.Wf)(q)),{display:"flex",borderRadius:X,[`${O}-selection-search`]:{position:"absolute",top:0,insetInlineStart:k,insetInlineEnd:k,bottom:0,"&-input":{width:"100%"}},[`
          ${O}-selection-item,
          ${O}-selection-placeholder
        `]:{padding:0,lineHeight:`${W}px`,transition:`all ${q.motionDurationSlow}`,"@supports (-moz-appearance: meterbar)":{lineHeight:`${W}px`}},[`${O}-selection-item`]:{position:"relative",userSelect:"none"},[`${O}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${O}-selection-item:after`,`${O}-selection-placeholder:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${O}-show-arrow ${O}-selection-item,
        &${O}-show-arrow ${O}-selection-placeholder
      `]:{paddingInlineEnd:ae},[`&${O}-open ${O}-selection-item`]:{color:q.colorTextPlaceholder},[`&:not(${O}-customize-input)`]:{[`${O}-selector`]:{width:"100%",height:q.controlHeight,padding:`0 ${k}px`,[`${O}-selection-search-input`]:{height:W},"&:after":{lineHeight:`${W}px`}}},[`&${O}-customize-input`]:{[`${O}-selector`]:{"&:after":{display:"none"},[`${O}-selection-search`]:{position:"static",width:"100%"},[`${O}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${k}px`,"&:after":{display:"none"}}}}}}}function It(q){const{componentCls:G}=q,O=q.controlPaddingHorizontalSM-q.lineWidth;return[ft(q),ft((0,le.TS)(q,{controlHeight:q.controlHeightSM,borderRadius:q.borderRadiusSM}),"sm"),{[`${G}-single${G}-sm`]:{[`&:not(${G}-customize-input)`]:{[`${G}-selection-search`]:{insetInlineStart:O,insetInlineEnd:O},[`${G}-selector`]:{padding:`0 ${O}px`},[`&${G}-show-arrow ${G}-selection-search`]:{insetInlineEnd:O+q.fontSize*1.5},[`
            &${G}-show-arrow ${G}-selection-item,
            &${G}-show-arrow ${G}-selection-placeholder
          `]:{paddingInlineEnd:q.fontSize*1.5}}}},ft((0,le.TS)(q,{controlHeight:q.controlHeightLG,fontSize:q.fontSizeLG,borderRadius:q.borderRadiusLG}),"lg")]}var fe=g(80110);const _t=q=>{const{componentCls:G}=q;return{position:"relative",backgroundColor:q.colorBgContainer,border:`${q.lineWidth}px ${q.lineType} ${q.colorBorder}`,transition:`all ${q.motionDurationMid} ${q.motionEaseInOut}`,input:{cursor:"pointer"},[`${G}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit"}},[`${G}-disabled&`]:{color:q.colorTextDisabled,background:q.colorBgContainerDisabled,cursor:"not-allowed",[`${G}-multiple&`]:{background:q.colorBgContainerDisabled},input:{cursor:"not-allowed"}}}},Ye=function(q,G){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:k,borderHoverColor:X,outlineColor:W,antCls:ae}=G,Be=O?{[`${k}-selector`]:{borderColor:X}}:{};return{[q]:{[`&:not(${k}-disabled):not(${k}-customize-input):not(${ae}-pagination-size-changer)`]:Object.assign(Object.assign({},Be),{[`${k}-focused& ${k}-selector`]:{borderColor:X,boxShadow:`0 0 0 ${G.controlOutlineWidth}px ${W}`,outline:0},[`&:hover ${k}-selector`]:{borderColor:X}})}}},Ot=q=>{const{componentCls:G}=q;return{[`${G}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},mt=q=>{const{componentCls:G,inputPaddingHorizontalBase:O,iconCls:k}=q;return{[G]:Object.assign(Object.assign({},(0,J.Wf)(q)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${G}-customize-input) ${G}-selector`]:Object.assign(Object.assign({},_t(q)),Ot(q)),[`${G}-selection-item`]:Object.assign({flex:1,fontWeight:"normal"},J.vS),[`${G}-selection-placeholder`]:Object.assign(Object.assign({},J.vS),{flex:1,color:q.colorTextPlaceholder,pointerEvents:"none"}),[`${G}-arrow`]:Object.assign(Object.assign({},(0,J.Ro)()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:O,height:q.fontSizeIcon,marginTop:-q.fontSizeIcon/2,color:q.colorTextQuaternary,fontSize:q.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[k]:{verticalAlign:"top",transition:`transform ${q.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${G}-suffix)`]:{pointerEvents:"auto"}},[`${G}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${G}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:O,zIndex:1,display:"inline-block",width:q.fontSizeIcon,height:q.fontSizeIcon,marginTop:-q.fontSizeIcon/2,color:q.colorTextQuaternary,fontSize:q.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:q.colorBgContainer,cursor:"pointer",opacity:0,transition:`color ${q.motionDurationMid} ease, opacity ${q.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:q.colorTextTertiary}},"&:hover":{[`${G}-clear`]:{opacity:1}}}),[`${G}-has-feedback`]:{[`${G}-clear`]:{insetInlineEnd:O+q.fontSize+q.paddingXXS}}}},Rt=q=>{const{componentCls:G}=q;return[{[G]:{[`&-borderless ${G}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${G}-in-form-item`]:{width:"100%"}}},mt(q),It(q),lt(q),xe(q),{[`${G}-rtl`]:{direction:"rtl"}},Ye(G,(0,le.TS)(q,{borderHoverColor:q.colorPrimaryHover,outlineColor:q.controlOutline})),Ye(`${G}-status-error`,(0,le.TS)(q,{borderHoverColor:q.colorErrorHover,outlineColor:q.colorErrorOutline}),!0),Ye(`${G}-status-warning`,(0,le.TS)(q,{borderHoverColor:q.colorWarningHover,outlineColor:q.colorWarningOutline}),!0),(0,fe.c)(q,{borderElCls:`${G}-selector`,focusElCls:`${G}-focused`})]};var pt=(0,ge.Z)("Select",(q,G)=>{let{rootPrefixCls:O}=G;const k=(0,le.TS)(q,{rootPrefixCls:O,inputPaddingHorizontalBase:q.paddingSM-1});return[Rt(k)]},q=>({zIndexPopup:q.zIndexPopupBase+50})),Ge=function(q,G){var O={};for(var k in q)Object.prototype.hasOwnProperty.call(q,k)&&G.indexOf(k)<0&&(O[k]=q[k]);if(q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,k=Object.getOwnPropertySymbols(q);X<k.length;X++)G.indexOf(k[X])<0&&Object.prototype.propertyIsEnumerable.call(q,k[X])&&(O[k[X]]=q[k[X]]);return O};const wt="SECRET_COMBOBOX_MODE_DO_NOT_USE",ee=(q,G)=>{var{prefixCls:O,bordered:k=!0,className:X,rootClassName:W,getPopupContainer:ae,popupClassName:Be,dropdownClassName:ve,listHeight:Je=256,placement:ot,listItemHeight:Qe=24,size:ir,disabled:mr,notFoundContent:Ar,status:Er,showArrow:Zt}=q,Tr=Ge(q,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]);const{getPopupContainer:pn,getPrefixCls:un,renderEmpty:Zn,direction:Cr,virtual:Nr,dropdownMatchSelectWidth:bt,select:jn}=N.useContext(Z.E_),Pt=N.useContext($.Z),zt=un("select",O),Qt=un(),{compactSize:dr,compactItemClassnames:_r}=(0,re.ri)(zt,Cr),[Hr,Qr]=pt(zt),fr=N.useMemo(()=>{const{mode:fi}=Tr;if(fi!=="combobox")return fi===wt?"combobox":fi},[Tr.mode]),tt=fr==="multiple"||fr==="tags",Yr=Zt!==void 0?Zt:Tr.loading||!(tt||fr==="combobox"),{status:Tn,hasFeedback:wn,isFormItemInput:Nn,feedbackIcon:Si}=N.useContext(U.aM),fa=(0,We.F)(Tn,Er);let Xi;Ar!==void 0?Xi=Ar:fr==="combobox"?Xi=null:Xi=(Zn==null?void 0:Zn("Select"))||N.createElement(B.Z,{componentName:"Select"});const{suffixIcon:Ln,itemIcon:na,removeIcon:xi,clearIcon:ta}=ie(Object.assign(Object.assign({},Tr),{multiple:tt,hasFeedback:wn,feedbackIcon:Si,showArrow:Yr,prefixCls:zt})),La=(0,K.Z)(Tr,["suffixIcon","itemIcon"]),Ki=M()(Be||ve,{[`${zt}-dropdown-${Cr}`]:Cr==="rtl"},W,Qr),jo=dr||ir||Pt,uo=N.useContext(L.Z),An=mr!=null?mr:uo,gn=M()({[`${zt}-lg`]:jo==="large",[`${zt}-sm`]:jo==="small",[`${zt}-rtl`]:Cr==="rtl",[`${zt}-borderless`]:!k,[`${zt}-in-form-item`]:Nn},(0,We.Z)(zt,fa,wn),_r,X,W,Qr),Oi=()=>ot!==void 0?ot:Cr==="rtl"?"bottomRight":"bottomLeft";return Hr(N.createElement(c.ZP,Object.assign({ref:G,virtual:Nr,dropdownMatchSelectWidth:bt,showSearch:jn==null?void 0:jn.showSearch},La,{transitionName:(0,ke.mL)(Qt,(0,ke.q0)(ot),Tr.transitionName),listHeight:Je,listItemHeight:Qe,mode:fr,prefixCls:zt,placement:Oi(),direction:Cr,inputIcon:Ln,menuItemSelectedIcon:na,removeIcon:xi,clearIcon:ta,notFoundContent:Xi,className:gn,getPopupContainer:ae||pn,dropdownClassName:Ki,showArrow:wn||Zt,disabled:An})))},Re=N.forwardRef(ee),dt=(0,De.Z)(Re);Re.SECRET_COMBOBOX_MODE_DO_NOT_USE=wt,Re.Option=c.Wx,Re.OptGroup=c.Xo,Re._InternalPanelDoNotUseOrYouWillBeFired=dt;var D=Re},4173:function(vt,Ee,g){"use strict";g.d(Ee,{BR:function(){return U},ri:function(){return $}});var v=g(94184),M=g.n(v),c=g(50344),K=g(67294),N=g(53124),Z=g(51916),B=function(me,Le){var Se={};for(var et in me)Object.prototype.hasOwnProperty.call(me,et)&&Le.indexOf(et)<0&&(Se[et]=me[et]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,et=Object.getOwnPropertySymbols(me);at<et.length;at++)Le.indexOf(et[at])<0&&Object.prototype.propertyIsEnumerable.call(me,et[at])&&(Se[et[at]]=me[et[at]]);return Se};const L=K.createContext(null),$=(me,Le)=>{const Se=K.useContext(L),et=K.useMemo(()=>{if(!Se)return"";const{compactDirection:at,isFirstItem:Lt,isLastItem:Et}=Se,jt=at==="vertical"?"-vertical-":"-";return M()({[`${me}-compact${jt}item`]:!0,[`${me}-compact${jt}first-item`]:Lt,[`${me}-compact${jt}last-item`]:Et,[`${me}-compact${jt}item-rtl`]:Le==="rtl"})},[me,Le,Se]);return{compactSize:Se==null?void 0:Se.compactSize,compactDirection:Se==null?void 0:Se.compactDirection,compactItemClassnames:et}},U=me=>{let{children:Le}=me;return K.createElement(L.Provider,{value:null},Le)},ke=me=>{var{children:Le}=me,Se=B(me,["children"]);return K.createElement(L.Provider,{value:Se},Le)},We=me=>{const{getPrefixCls:Le,direction:Se}=K.useContext(N.E_),{size:et="middle",direction:at,block:Lt,prefixCls:Et,className:jt,rootClassName:pe,children:$e}=me,ye=B(me,["size","direction","block","prefixCls","className","rootClassName","children"]),ie=Le("space-compact",Et),[re,De]=(0,Z.Z)(ie),le=M()(ie,De,{[`${ie}-rtl`]:Se==="rtl",[`${ie}-block`]:Lt,[`${ie}-vertical`]:at==="vertical"},jt,pe),ge=K.useContext(L),ce=(0,c.Z)($e),je=K.useMemo(()=>ce.map((J,Me)=>{const ne=J&&J.key||`${ie}-item-${Me}`;return K.createElement(ke,{key:ne,compactSize:et,compactDirection:at,isFirstItem:Me===0&&(!ge||(ge==null?void 0:ge.isFirstItem)),isLastItem:Me===ce.length-1&&(!ge||(ge==null?void 0:ge.isLastItem))},J)}),[et,ce,ge]);return ce.length===0?null:re(K.createElement("div",Object.assign({className:le},ye),je))};Ee.ZP=We},51916:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return N}});var v=g(67968),c=Z=>{const{componentCls:B}=Z;return{[B]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};const K=Z=>{const{componentCls:B}=Z;return{[B]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${B}-item`]:{"&:empty":{display:"none"}}}}};var N=(0,v.Z)("Space",Z=>[K(Z),c(Z)])},75081:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return ie}});var v=g(94184),M=g.n(v);function c(re,De,le){var ge=le||{},ce=ge.noTrailing,je=ce===void 0?!1:ce,J=ge.noLeading,Me=J===void 0?!1:J,ne=ge.debounceMode,xe=ne===void 0?void 0:ne,Ne,Pe=!1,He=0;function lt(){Ne&&clearTimeout(Ne)}function ft(fe){var _t=fe||{},Ye=_t.upcomingOnly,Ot=Ye===void 0?!1:Ye;lt(),Pe=!Ot}function It(){for(var fe=arguments.length,_t=new Array(fe),Ye=0;Ye<fe;Ye++)_t[Ye]=arguments[Ye];var Ot=this,mt=Date.now()-He;if(Pe)return;function Rt(){He=Date.now(),De.apply(Ot,_t)}function pt(){Ne=void 0}!Me&&xe&&!Ne&&Rt(),lt(),xe===void 0&&mt>re?Me?(He=Date.now(),je||(Ne=setTimeout(xe?pt:Rt,re))):Rt():je!==!0&&(Ne=setTimeout(xe?pt:Rt,xe===void 0?re-mt:re))}return It.cancel=ft,It}function K(re,De,le){var ge=le||{},ce=ge.atBegin,je=ce===void 0?!1:ce;return c(re,De,{debounceMode:je!==!1})}var N=g(98423),Z=g(67294),B=g(53124),L=g(96159),$=g(51222),U=g(67968),ke=g(45503),We=g(14747);const me=new $.E4("antSpinMove",{to:{opacity:1}}),Le=new $.E4("antRotate",{to:{transform:"rotate(405deg)"}}),Se=re=>({[`${re.componentCls}`]:Object.assign(Object.assign({},(0,We.Wf)(re)),{position:"absolute",display:"none",color:re.colorPrimary,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${re.motionDurationSlow} ${re.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${re.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:re.contentHeight,[`${re.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-re.spinDotSize/2},[`${re.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(re.spinDotSize-re.fontSize)/2+2,textShadow:`0 1px 2px ${re.colorBgContainer}`},[`&${re.componentCls}-show-text ${re.componentCls}-dot`]:{marginTop:-(re.spinDotSize/2)-10},"&-sm":{[`${re.componentCls}-dot`]:{margin:-re.spinDotSizeSM/2},[`${re.componentCls}-text`]:{paddingTop:(re.spinDotSizeSM-re.fontSize)/2+2},[`&${re.componentCls}-show-text ${re.componentCls}-dot`]:{marginTop:-(re.spinDotSizeSM/2)-10}},"&-lg":{[`${re.componentCls}-dot`]:{margin:-(re.spinDotSizeLG/2)},[`${re.componentCls}-text`]:{paddingTop:(re.spinDotSizeLG-re.fontSize)/2+2},[`&${re.componentCls}-show-text ${re.componentCls}-dot`]:{marginTop:-(re.spinDotSizeLG/2)-10}}},[`${re.componentCls}-container`]:{position:"relative",transition:`opacity ${re.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:re.colorBgContainer,opacity:0,transition:`all ${re.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${re.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:re.spinDotDefault},[`${re.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:re.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(re.spinDotSize-re.marginXXS/2)/2,height:(re.spinDotSize-re.marginXXS/2)/2,backgroundColor:re.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:me,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Le,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${re.componentCls}-dot`]:{fontSize:re.spinDotSizeSM,i:{width:(re.spinDotSizeSM-re.marginXXS/2)/2,height:(re.spinDotSizeSM-re.marginXXS/2)/2}},[`&-lg ${re.componentCls}-dot`]:{fontSize:re.spinDotSizeLG,i:{width:(re.spinDotSizeLG-re.marginXXS)/2,height:(re.spinDotSizeLG-re.marginXXS)/2}},[`&${re.componentCls}-show-text ${re.componentCls}-text`]:{display:"block"}})});var et=(0,U.Z)("Spin",re=>{const De=(0,ke.TS)(re,{spinDotDefault:re.colorTextDescription,spinDotSize:re.controlHeightLG/2,spinDotSizeSM:re.controlHeightLG*.35,spinDotSizeLG:re.controlHeight});return[Se(De)]},{contentHeight:400}),at=function(re,De){var le={};for(var ge in re)Object.prototype.hasOwnProperty.call(re,ge)&&De.indexOf(ge)<0&&(le[ge]=re[ge]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,ge=Object.getOwnPropertySymbols(re);ce<ge.length;ce++)De.indexOf(ge[ce])<0&&Object.prototype.propertyIsEnumerable.call(re,ge[ce])&&(le[ge[ce]]=re[ge[ce]]);return le};const Lt=null;let Et=null;function jt(re,De){const{indicator:le}=De,ge=`${re}-dot`;return le===null?null:(0,L.l$)(le)?(0,L.Tm)(le,{className:M()(le.props.className,ge)}):(0,L.l$)(Et)?(0,L.Tm)(Et,{className:M()(Et.props.className,ge)}):Z.createElement("span",{className:M()(ge,`${re}-dot-spin`)},Z.createElement("i",{className:`${re}-dot-item`}),Z.createElement("i",{className:`${re}-dot-item`}),Z.createElement("i",{className:`${re}-dot-item`}),Z.createElement("i",{className:`${re}-dot-item`}))}function pe(re,De){return!!re&&!!De&&!isNaN(Number(De))}const $e=re=>{const{spinPrefixCls:De,spinning:le=!0,delay:ge=0,className:ce,rootClassName:je,size:J="default",tip:Me,wrapperClassName:ne,style:xe,children:Ne,hashId:Pe}=re,He=at(re,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[lt,ft]=Z.useState(()=>le&&!pe(le,ge));Z.useEffect(()=>{if(le){const Rt=K(ge,()=>{ft(!0)});return Rt(),()=>{var pt;(pt=Rt==null?void 0:Rt.cancel)===null||pt===void 0||pt.call(Rt)}}ft(!1)},[ge,le]);const It=Z.useMemo(()=>typeof Ne!="undefined",[Ne]),{direction:fe}=Z.useContext(B.E_),_t=M()(De,{[`${De}-sm`]:J==="small",[`${De}-lg`]:J==="large",[`${De}-spinning`]:lt,[`${De}-show-text`]:!!Me,[`${De}-rtl`]:fe==="rtl"},ce,je,Pe),Ye=M()(`${De}-container`,{[`${De}-blur`]:lt}),Ot=(0,N.Z)(He,["indicator","prefixCls"]),mt=Z.createElement("div",Object.assign({},Ot,{style:xe,className:_t,"aria-live":"polite","aria-busy":lt}),jt(De,re),Me?Z.createElement("div",{className:`${De}-text`},Me):null);return It?Z.createElement("div",Object.assign({},Ot,{className:M()(`${De}-nested-loading`,ne,Pe)}),lt&&Z.createElement("div",{key:"loading"},mt),Z.createElement("div",{className:Ye,key:"container"},Ne)):mt},ye=re=>{const{prefixCls:De}=re,{getPrefixCls:le}=Z.useContext(B.E_),ge=le("spin",De),[ce,je]=et(ge),J=Object.assign(Object.assign({},re),{spinPrefixCls:ge,hashId:je});return ce(Z.createElement($e,Object.assign({},J)))};ye.setDefaultIndicator=re=>{Et=re};var ie=ye},80110:function(vt,Ee,g){"use strict";g.d(Ee,{c:function(){return c}});function v(K,N,Z){const{focusElCls:B,focus:L,borderElCls:$}=Z,U=$?"> *":"",ke=["hover",L?"focus":null,"active"].filter(Boolean).map(We=>`&:${We} ${U}`).join(",");return{[`&-item:not(${N}-last-item)`]:{marginInlineEnd:-K.lineWidth},"&-item":Object.assign(Object.assign({[ke]:{zIndex:2}},B?{[`&${B}`]:{zIndex:2}}:{}),{[`&[disabled] ${U}`]:{zIndex:0}})}}function M(K,N,Z){const{borderElCls:B}=Z,L=B?`> ${B}`:"";return{[`&-item:not(${N}-first-item):not(${N}-last-item) ${L}`]:{borderRadius:0},[`&-item:not(${N}-last-item)${N}-first-item`]:{[`& ${L}, &${K}-sm ${L}, &${K}-lg ${L}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${N}-first-item)${N}-last-item`]:{[`& ${L}, &${K}-sm ${L}, &${K}-lg ${L}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function c(K){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:Z}=K,B=`${Z}-compact`;return{[B]:Object.assign(Object.assign({},v(K,B,N)),M(Z,B,N))}}},14747:function(vt,Ee,g){"use strict";g.d(Ee,{Lx:function(){return N},Qy:function(){return L},Ro:function(){return c},Wf:function(){return M},dF:function(){return K},du:function(){return Z},oN:function(){return B},vS:function(){return v}});const v={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},M=$=>({boxSizing:"border-box",margin:0,padding:0,color:$.colorText,fontSize:$.fontSize,lineHeight:$.lineHeight,listStyle:"none",fontFamily:$.fontFamily}),c=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),K=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),N=$=>({a:{color:$.colorLink,textDecoration:$.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${$.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:$.colorLinkHover},"&:active":{color:$.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:$.linkHoverDecoration,outline:0},"&:focus":{textDecoration:$.linkFocusDecoration,outline:0},"&[disabled]":{color:$.colorTextDisabled,cursor:"not-allowed"}}}),Z=($,U)=>{const{fontFamily:ke,fontSize:We}=$,me=`[class^="${U}"], [class*=" ${U}"]`;return{[me]:{fontFamily:ke,fontSize:We,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[me]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},B=$=>({outline:`${$.lineWidthBold}px solid ${$.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),L=$=>({"&:focus-visible":Object.assign({},B($))})},33507:function(vt,Ee){"use strict";const g=v=>({[v.componentCls]:{[`${v.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${v.motionDurationMid} ${v.motionEaseInOut},
        opacity ${v.motionDurationMid} ${v.motionEaseInOut} !important`}},[`${v.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${v.motionDurationMid} ${v.motionEaseInOut},
        opacity ${v.motionDurationMid} ${v.motionEaseInOut} !important`}}});Ee.Z=g},93590:function(vt,Ee,g){"use strict";g.d(Ee,{R:function(){return c}});const v=K=>({animationDuration:K,animationFillMode:"both"}),M=K=>({animationDuration:K,animationFillMode:"both"}),c=function(K,N,Z,B){const $=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${$}${K}-enter,
      ${$}${K}-appear
    `]:Object.assign(Object.assign({},v(B)),{animationPlayState:"paused"}),[`${$}${K}-leave`]:Object.assign(Object.assign({},M(B)),{animationPlayState:"paused"}),[`
      ${$}${K}-enter${K}-enter-active,
      ${$}${K}-appear${K}-appear-active
    `]:{animationName:N,animationPlayState:"running"},[`${$}${K}-leave${K}-leave-active`]:{animationName:Z,animationPlayState:"running",pointerEvents:"none"}}}},33297:function(vt,Ee,g){"use strict";g.d(Ee,{Fm:function(){return We}});var v=g(51222),M=g(93590);const c=new v.E4("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),K=new v.E4("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),N=new v.E4("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Z=new v.E4("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),B=new v.E4("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),L=new v.E4("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),$=new v.E4("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),U=new v.E4("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),ke={"move-up":{inKeyframes:$,outKeyframes:U},"move-down":{inKeyframes:c,outKeyframes:K},"move-left":{inKeyframes:N,outKeyframes:Z},"move-right":{inKeyframes:B,outKeyframes:L}},We=(me,Le)=>{const{antCls:Se}=me,et=`${Se}-${Le}`,{inKeyframes:at,outKeyframes:Lt}=ke[Le];return[(0,M.R)(et,at,Lt,me.motionDurationMid),{[`
        ${et}-enter,
        ${et}-appear
      `]:{opacity:0,animationTimingFunction:me.motionEaseOutCirc},[`${et}-leave`]:{animationTimingFunction:me.motionEaseInOutCirc}}]}},67771:function(vt,Ee,g){"use strict";g.d(Ee,{Qt:function(){return N},Uw:function(){return K},fJ:function(){return c},ly:function(){return Z},oN:function(){return We}});var v=g(51222),M=g(93590);const c=new v.E4("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),K=new v.E4("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),N=new v.E4("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Z=new v.E4("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),B=new v.E4("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),L=new v.E4("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),$=new v.E4("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),U=new v.E4("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),ke={"slide-up":{inKeyframes:c,outKeyframes:K},"slide-down":{inKeyframes:N,outKeyframes:Z},"slide-left":{inKeyframes:B,outKeyframes:L},"slide-right":{inKeyframes:$,outKeyframes:U}},We=(me,Le)=>{const{antCls:Se}=me,et=`${Se}-${Le}`,{inKeyframes:at,outKeyframes:Lt}=ke[Le];return[(0,M.R)(et,at,Lt,me.motionDurationMid),{[`
      ${et}-enter,
      ${et}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:me.motionEaseOutQuint},[`${et}-leave`]:{animationTimingFunction:me.motionEaseInQuint}}]}},50438:function(vt,Ee,g){"use strict";g.d(Ee,{_y:function(){return et}});var v=g(51222),M=g(93590);const c=new v.E4("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),K=new v.E4("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),N=new v.E4("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Z=new v.E4("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),B=new v.E4("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),L=new v.E4("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),$=new v.E4("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),U=new v.E4("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),ke=new v.E4("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),We=new v.E4("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),me=new v.E4("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Le=new v.E4("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Se={zoom:{inKeyframes:c,outKeyframes:K},"zoom-big":{inKeyframes:N,outKeyframes:Z},"zoom-big-fast":{inKeyframes:N,outKeyframes:Z},"zoom-left":{inKeyframes:$,outKeyframes:U},"zoom-right":{inKeyframes:ke,outKeyframes:We},"zoom-up":{inKeyframes:B,outKeyframes:L},"zoom-down":{inKeyframes:me,outKeyframes:Le}},et=(at,Lt)=>{const{antCls:Et}=at,jt=`${Et}-${Lt}`,{inKeyframes:pe,outKeyframes:$e}=Se[Lt];return[(0,M.R)(jt,pe,$e,Lt==="zoom-big-fast"?at.motionDurationFast:at.motionDurationMid),{[`
        ${jt}-enter,
        ${jt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:at.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${jt}-leave`]:{animationTimingFunction:at.motionEaseInOutCirc}}]}},77786:function(vt,Ee,g){"use strict";g.d(Ee,{qN:function(){return M},ZP:function(){return N},fS:function(){return c}});const v=(Z,B,L,$,U)=>{const ke=Z/2,We=0,me=ke,Le=L*1/Math.sqrt(2),Se=ke-L*(1-1/Math.sqrt(2)),et=ke-B*(1/Math.sqrt(2)),at=L*(Math.sqrt(2)-1)+B*(1/Math.sqrt(2)),Lt=2*ke-et,Et=at,jt=2*ke-Le,pe=Se,$e=2*ke-We,ye=me,ie=ke*Math.sqrt(2)+L*(Math.sqrt(2)-2);return{borderRadius:{_skip_check_:!0,value:`0 0 ${B}px`},pointerEvents:"none",width:Z,height:Z,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:Z,height:Z/2,background:$,clipPath:`path('M ${We} ${me} A ${L} ${L} 0 0 0 ${Le} ${Se} L ${et} ${at} A ${B} ${B} 0 0 1 ${Lt} ${Et} L ${jt} ${pe} A ${L} ${L} 0 0 0 ${$e} ${ye} Z')`,content:'""'},"&::after":{content:'""',position:"absolute",width:ie,height:ie,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${B}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:U,zIndex:0,background:"transparent"}}},M=8;function c(Z){const B=M,{contentRadius:L,limitVerticalRadius:$}=Z,U=L>12?L+2:12;return{dropdownArrowOffset:U,dropdownArrowOffsetVertical:$?B:U}}function K(Z,B){return Z?B:{}}function N(Z,B){const{componentCls:L,sizePopupArrow:$,borderRadiusXS:U,borderRadiusOuter:ke,boxShadowPopoverArrow:We}=Z,{colorBg:me,contentRadius:Le=Z.borderRadiusLG,limitVerticalRadius:Se,arrowDistance:et=0,arrowPlacement:at={left:!0,right:!0,top:!0,bottom:!0}}=B,{dropdownArrowOffsetVertical:Lt,dropdownArrowOffset:Et}=c({contentRadius:Le,limitVerticalRadius:Se});return{[L]:Object.assign(Object.assign(Object.assign(Object.assign({[`${L}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},v($,U,ke,me,We)),{"&:before":{background:me}})]},K(!!at.top,{[[`&-placement-top ${L}-arrow`,`&-placement-topLeft ${L}-arrow`,`&-placement-topRight ${L}-arrow`].join(",")]:{bottom:et,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${L}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${L}-arrow`]:{left:{_skip_check_:!0,value:Et}},[`&-placement-topRight ${L}-arrow`]:{right:{_skip_check_:!0,value:Et}}})),K(!!at.bottom,{[[`&-placement-bottom ${L}-arrow`,`&-placement-bottomLeft ${L}-arrow`,`&-placement-bottomRight ${L}-arrow`].join(",")]:{top:et,transform:"translateY(-100%)"},[`&-placement-bottom ${L}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${L}-arrow`]:{left:{_skip_check_:!0,value:Et}},[`&-placement-bottomRight ${L}-arrow`]:{right:{_skip_check_:!0,value:Et}}})),K(!!at.left,{[[`&-placement-left ${L}-arrow`,`&-placement-leftTop ${L}-arrow`,`&-placement-leftBottom ${L}-arrow`].join(",")]:{right:{_skip_check_:!0,value:et},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${L}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${L}-arrow`]:{top:Lt},[`&-placement-leftBottom ${L}-arrow`]:{bottom:Lt}})),K(!!at.right,{[[`&-placement-right ${L}-arrow`,`&-placement-rightTop ${L}-arrow`,`&-placement-rightBottom ${L}-arrow`].join(",")]:{left:{_skip_check_:!0,value:et},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${L}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${L}-arrow`]:{top:Lt},[`&-placement-rightBottom ${L}-arrow`]:{bottom:Lt}}))}}},72269:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return je}});var v=g(84273),M=g(94184),c=g.n(M),K=g(87462),N=g(4942),Z=g(97685),B=g(91),L=g(67294),$=g(21770),U=g(15105),ke=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],We=L.forwardRef(function(J,Me){var ne,xe=J.prefixCls,Ne=xe===void 0?"rc-switch":xe,Pe=J.className,He=J.checked,lt=J.defaultChecked,ft=J.disabled,It=J.loadingIcon,fe=J.checkedChildren,_t=J.unCheckedChildren,Ye=J.onClick,Ot=J.onChange,mt=J.onKeyDown,Rt=(0,B.Z)(J,ke),pt=(0,$.Z)(!1,{value:He,defaultValue:lt}),Ge=(0,Z.Z)(pt,2),wt=Ge[0],ee=Ge[1];function Re(G,O){var k=wt;return ft||(k=G,ee(k),Ot==null||Ot(k,O)),k}function dt(G){G.which===U.Z.LEFT?Re(!1,G):G.which===U.Z.RIGHT&&Re(!0,G),mt==null||mt(G)}function D(G){var O=Re(!wt,G);Ye==null||Ye(O,G)}var q=c()(Ne,Pe,(ne={},(0,N.Z)(ne,"".concat(Ne,"-checked"),wt),(0,N.Z)(ne,"".concat(Ne,"-disabled"),ft),ne));return L.createElement("button",(0,K.Z)({},Rt,{type:"button",role:"switch","aria-checked":wt,disabled:ft,className:q,ref:Me,onKeyDown:dt,onClick:D}),It,L.createElement("span",{className:"".concat(Ne,"-inner")},L.createElement("span",{className:"".concat(Ne,"-inner-checked")},fe),L.createElement("span",{className:"".concat(Ne,"-inner-unchecked")},_t)))});We.displayName="Switch";var me=We,Le=g(53124),Se=g(98866),et=g(97647),at=g(45353),Lt=g(10274),Et=g(67968),jt=g(45503),pe=g(14747);const $e=J=>{const{componentCls:Me}=J,ne=`${Me}-inner`;return{[Me]:{[`&${Me}-small`]:{minWidth:J.switchMinWidthSM,height:J.switchHeightSM,lineHeight:`${J.switchHeightSM}px`,[`${Me}-inner`]:{paddingInlineStart:J.switchInnerMarginMaxSM,paddingInlineEnd:J.switchInnerMarginMinSM,[`${ne}-checked`]:{marginInlineStart:`calc(-100% + ${J.switchPinSizeSM+J.switchPadding*2}px - ${J.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(100% - ${J.switchPinSizeSM+J.switchPadding*2}px + ${J.switchInnerMarginMaxSM*2}px)`},[`${ne}-unchecked`]:{marginTop:-J.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}},[`${Me}-handle`]:{width:J.switchPinSizeSM,height:J.switchPinSizeSM},[`${Me}-loading-icon`]:{top:(J.switchPinSizeSM-J.switchLoadingIconSize)/2,fontSize:J.switchLoadingIconSize},[`&${Me}-checked`]:{[`${Me}-inner`]:{paddingInlineStart:J.switchInnerMarginMinSM,paddingInlineEnd:J.switchInnerMarginMaxSM,[`${ne}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${ne}-unchecked`]:{marginInlineStart:`calc(100% - ${J.switchPinSizeSM+J.switchPadding*2}px + ${J.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(-100% + ${J.switchPinSizeSM+J.switchPadding*2}px - ${J.switchInnerMarginMaxSM*2}px)`}},[`${Me}-handle`]:{insetInlineStart:`calc(100% - ${J.switchPinSizeSM+J.switchPadding}px)`}},[`&:not(${Me}-disabled):active`]:{[`&:not(${Me}-checked) ${ne}`]:{[`${ne}-unchecked`]:{marginInlineStart:J.marginXXS/2,marginInlineEnd:-J.marginXXS/2}},[`&${Me}-checked ${ne}`]:{[`${ne}-checked`]:{marginInlineStart:-J.marginXXS/2,marginInlineEnd:J.marginXXS/2}}}}}}},ye=J=>{const{componentCls:Me}=J;return{[Me]:{[`${Me}-loading-icon${J.iconCls}`]:{position:"relative",top:(J.switchPinSize-J.fontSize)/2,color:J.switchLoadingIconColor,verticalAlign:"top"},[`&${Me}-checked ${Me}-loading-icon`]:{color:J.switchColor}}}},ie=J=>{const{componentCls:Me}=J,ne=`${Me}-handle`;return{[Me]:{[ne]:{position:"absolute",top:J.switchPadding,insetInlineStart:J.switchPadding,width:J.switchPinSize,height:J.switchPinSize,transition:`all ${J.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:J.colorWhite,borderRadius:J.switchPinSize/2,boxShadow:J.switchHandleShadow,transition:`all ${J.switchDuration} ease-in-out`,content:'""'}},[`&${Me}-checked ${ne}`]:{insetInlineStart:`calc(100% - ${J.switchPinSize+J.switchPadding}px)`},[`&:not(${Me}-disabled):active`]:{[`${ne}::before`]:{insetInlineEnd:J.switchHandleActiveInset,insetInlineStart:0},[`&${Me}-checked ${ne}::before`]:{insetInlineEnd:0,insetInlineStart:J.switchHandleActiveInset}}}}},re=J=>{const{componentCls:Me}=J,ne=`${Me}-inner`;return{[Me]:{[ne]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:J.switchInnerMarginMax,paddingInlineEnd:J.switchInnerMarginMin,transition:`padding-inline-start ${J.switchDuration} ease-in-out, padding-inline-end ${J.switchDuration} ease-in-out`,[`${ne}-checked, ${ne}-unchecked`]:{display:"block",color:J.colorTextLightSolid,fontSize:J.fontSizeSM,transition:`margin-inline-start ${J.switchDuration} ease-in-out, margin-inline-end ${J.switchDuration} ease-in-out`,pointerEvents:"none"},[`${ne}-checked`]:{marginInlineStart:`calc(-100% + ${J.switchPinSize+J.switchPadding*2}px - ${J.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(100% - ${J.switchPinSize+J.switchPadding*2}px + ${J.switchInnerMarginMax*2}px)`},[`${ne}-unchecked`]:{marginTop:-J.switchHeight,marginInlineStart:0,marginInlineEnd:0}},[`&${Me}-checked ${ne}`]:{paddingInlineStart:J.switchInnerMarginMin,paddingInlineEnd:J.switchInnerMarginMax,[`${ne}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${ne}-unchecked`]:{marginInlineStart:`calc(100% - ${J.switchPinSize+J.switchPadding*2}px + ${J.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(-100% + ${J.switchPinSize+J.switchPadding*2}px - ${J.switchInnerMarginMax*2}px)`}},[`&:not(${Me}-disabled):active`]:{[`&:not(${Me}-checked) ${ne}`]:{[`${ne}-unchecked`]:{marginInlineStart:J.switchPadding*2,marginInlineEnd:-J.switchPadding*2}},[`&${Me}-checked ${ne}`]:{[`${ne}-checked`]:{marginInlineStart:-J.switchPadding*2,marginInlineEnd:J.switchPadding*2}}}}}},De=J=>{const{componentCls:Me}=J;return{[Me]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,pe.Wf)(J)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:J.switchMinWidth,height:J.switchHeight,lineHeight:`${J.switchHeight}px`,verticalAlign:"middle",background:J.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${J.motionDurationMid}`,userSelect:"none",[`&:hover:not(${Me}-disabled)`]:{background:J.colorTextTertiary}}),(0,pe.Qy)(J)),{[`&${Me}-checked`]:{background:J.switchColor,[`&:hover:not(${Me}-disabled)`]:{background:J.colorPrimaryHover}},[`&${Me}-loading, &${Me}-disabled`]:{cursor:"not-allowed",opacity:J.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${Me}-rtl`]:{direction:"rtl"}})}};var le=(0,Et.Z)("Switch",J=>{const Me=J.fontSize*J.lineHeight,ne=J.controlHeight/2,xe=2,Ne=Me-xe*2,Pe=ne-xe*2,He=(0,jt.TS)(J,{switchMinWidth:Ne*2+xe*4,switchHeight:Me,switchDuration:J.motionDurationMid,switchColor:J.colorPrimary,switchDisabledOpacity:J.opacityLoading,switchInnerMarginMin:Ne/2,switchInnerMarginMax:Ne+xe+xe*2,switchPadding:xe,switchPinSize:Ne,switchBg:J.colorBgContainer,switchMinWidthSM:Pe*2+xe*2,switchHeightSM:ne,switchInnerMarginMinSM:Pe/2,switchInnerMarginMaxSM:Pe+xe+xe*2,switchPinSizeSM:Pe,switchHandleShadow:`0 2px 4px 0 ${new Lt.C("#00230b").setAlpha(.2).toRgbString()}`,switchLoadingIconSize:J.fontSizeIcon*.75,switchLoadingIconColor:`rgba(0, 0, 0, ${J.opacityLoading})`,switchHandleActiveInset:"-30%"});return[De(He),re(He),ie(He),ye(He),$e(He)]}),ge=function(J,Me){var ne={};for(var xe in J)Object.prototype.hasOwnProperty.call(J,xe)&&Me.indexOf(xe)<0&&(ne[xe]=J[xe]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ne=0,xe=Object.getOwnPropertySymbols(J);Ne<xe.length;Ne++)Me.indexOf(xe[Ne])<0&&Object.prototype.propertyIsEnumerable.call(J,xe[Ne])&&(ne[xe[Ne]]=J[xe[Ne]]);return ne};const ce=L.forwardRef((J,Me)=>{var{prefixCls:ne,size:xe,disabled:Ne,loading:Pe,className:He,rootClassName:lt}=J,ft=ge(J,["prefixCls","size","disabled","loading","className","rootClassName"]);const{getPrefixCls:It,direction:fe}=L.useContext(Le.E_),_t=L.useContext(et.Z),Ye=L.useContext(Se.Z),Ot=(Ne!=null?Ne:Ye)||Pe,mt=It("switch",ne),Rt=L.createElement("div",{className:`${mt}-handle`},Pe&&L.createElement(v.Z,{className:`${mt}-loading-icon`})),[pt,Ge]=le(mt),wt=c()({[`${mt}-small`]:(xe||_t)==="small",[`${mt}-loading`]:Pe,[`${mt}-rtl`]:fe==="rtl"},He,lt,Ge);return pt(L.createElement(at.Z,null,L.createElement(me,Object.assign({},ft,{prefixCls:mt,className:wt,disabled:Ot,ref:Me,loadingIcon:Rt}))))});ce.__ANT_SWITCH=!0;var je=ce},71721:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return pd}});var v=g(67294),M={},c=g(97685),K=g(66680),N=g(8410),Z=g(91881),B=g(73935);function L(w){var V=v.createContext(void 0),Ie=function(st){var Ue=st.value,Xe=st.children,Ve=v.useRef(Ue);Ve.current=Ue;var ct=v.useState(function(){return{getValue:function(){return Ve.current},listeners:new Set}}),Ct=(0,c.Z)(ct,1),Bt=Ct[0];return(0,N.Z)(function(){(0,B.unstable_batchedUpdates)(function(){Bt.listeners.forEach(function(kt){kt(Ue)})})},[Ue]),v.createElement(V.Provider,{value:Bt},Xe)};return{Context:V,Provider:Ie,defaultValue:w}}function $(w,V){var Ie=(0,K.Z)(typeof V=="function"?V:function(kt){if(V===void 0)return kt;if(!Array.isArray(V))return kt[V];var Jt={};return V.forEach(function(Ft){Jt[Ft]=kt[Ft]}),Jt}),se=v.useContext(w==null?void 0:w.Context),st=se||{},Ue=st.listeners,Xe=st.getValue,Ve=v.useRef();Ve.current=Ie(se?Xe():w==null?void 0:w.defaultValue);var ct=v.useState({}),Ct=(0,c.Z)(ct,2),Bt=Ct[1];return(0,N.Z)(function(){if(!se)return;function kt(Jt){var Ft=Ie(Jt);(0,Z.Z)(Ve.current,Ft,!0)||Bt({})}return Ue.add(kt),function(){Ue.delete(kt)}},[se]),Ve.current}var U=g(87462),ke=g(42550),We=v.createContext(0);function me(){return v.useContext(We)}function Le(w,V){var Ie=(0,ke.Yr)(w),se=function(Ue,Xe){var Ve=Ie?{ref:Xe}:{},ct=v.useRef(0),Ct=v.useRef(Ue);return(!V||V(Ct.current,Ue))&&(ct.current+=1),Ct.current=Ue,v.createElement(We.Provider,{value:ct.current},v.createElement(w,(0,U.Z)({},Ue,Ve)))};return Ie?v.forwardRef(se):se}function Se(w,V){var Ie=(0,ke.Yr)(w),se=function(Ue,Xe){var Ve=Ie?{ref:Xe}:{};return me(),v.createElement(w,(0,U.Z)({},Ue,Ve))};return Ie?v.memo(v.forwardRef(se),V):v.memo(se,V)}var et=L(),at=et;function Lt(w,V){var Ie=v.useRef(0);Ie.current+=1;var se=v.useRef(w),st=[];Object.keys(w||{}).map(function(Xe){var Ve;(w==null?void 0:w[Xe])!==((Ve=se.current)===null||Ve===void 0?void 0:Ve[Xe])&&st.push(Xe)}),se.current=w;var Ue=v.useRef([]);return st.length&&(Ue.current=st),v.useDebugValue(Ie.current),v.useDebugValue(Ue.current.join(", ")),V&&console.log("".concat(V,":"),Ie.current,Ue.current),Ie.current}var Et=null,jt=v.memo(function(){var w=Lt();return v.createElement("h1",null,"Render Times: ",w)});jt.displayName="RenderBlock";var pe=g(71002),$e=g(1413),ye=g(4942),ie=g(94184),re=g.n(ie),De=g(56982),le=g(88306),ge=g(80334),ce=v.createContext({renderWithProps:!1}),je=ce,J="RC_TABLE_KEY";function Me(w){return w==null?[]:Array.isArray(w)?w:[w]}function ne(w){var V=[],Ie={};return w.forEach(function(se){for(var st=se||{},Ue=st.key,Xe=st.dataIndex,Ve=Ue||Me(Xe).join("-")||J;Ie[Ve];)Ve="".concat(Ve,"_next");Ie[Ve]=!0,V.push(Ve)}),V}function xe(w){return w!=null}function Ne(w){return w&&(0,pe.Z)(w)==="object"&&!Array.isArray(w)&&!v.isValidElement(w)}function Pe(w,V,Ie,se,st,Ue){var Xe=v.useContext(je),Ve=me(),ct=(0,De.Z)(function(){if(xe(se))return[se];var Ct=V==null||V===""?[]:Array.isArray(V)?V:[V],Bt=(0,le.Z)(w,Ct),kt=Bt,Jt=void 0;if(st){var Ft=st(Bt,w,Ie);Ne(Ft)?(kt=Ft.children,Jt=Ft.props,Xe.renderWithProps=!0):kt=Ft}return[kt,Jt]},[Ve,w,se,V,st,Ie],function(Ct,Bt){if(Ue){var kt=(0,c.Z)(Ct,2),Jt=kt[1],Ft=(0,c.Z)(Bt,2),rr=Ft[1];return Ue(rr,Jt)}return Xe.renderWithProps?!0:!(0,Z.Z)(Ct,Bt,!0)});return ct}function He(w,V,Ie,se){var st=w+V-1;return w<=se&&st>=Ie}function lt(w,V){return $(at,function(Ie){var se=He(w,V||1,Ie.hoverStartRow,Ie.hoverEndRow);return[se,Ie.onHover]})}var ft=function(V){var Ie=V.ellipsis,se=V.rowType,st=V.children,Ue,Xe=Ie===!0?{showTitle:!0}:Ie;return Xe&&(Xe.showTitle||se==="header")&&(typeof st=="string"||typeof st=="number"?Ue=st.toString():v.isValidElement(st)&&typeof st.props.children=="string"&&(Ue=st.props.children)),Ue};function It(w){var V,Ie,se,st,Ue,Xe,Ve,ct,Ct=w.component,Bt=w.children,kt=w.ellipsis,Jt=w.scope,Ft=w.prefixCls,rr=w.className,Xt=w.align,pr=w.record,yr=w.render,Ur=w.dataIndex,xn=w.renderIndex,mn=w.shouldCellUpdate,Mn=w.index,Pn=w.rowType,Gn=w.colSpan,ti=w.rowSpan,ii=w.fixLeft,b=w.fixRight,A=w.firstFixLeft,I=w.lastFixLeft,T=w.firstFixRight,H=w.lastFixRight,te=w.appendNode,Ae=w.additionalProps,qe=Ae===void 0?{}:Ae,Tt=w.isSticky,Wt="".concat(Ft,"-cell"),vr=$(at,["supportSticky","allColumnsFixedLeft"]),Fr=vr.supportSticky,en=vr.allColumnsFixedLeft,zn=Pe(pr,Ur,xn,Bt,yr,mn),ei=(0,c.Z)(zn,2),Qn=ei[0],_n=ei[1],Xn={},ai=typeof ii=="number"&&Fr,nn=typeof b=="number"&&Fr;ai&&(Xn.position="sticky",Xn.left=ii),nn&&(Xn.position="sticky",Xn.right=b);var hi=(V=(Ie=(se=_n==null?void 0:_n.colSpan)!==null&&se!==void 0?se:Gn)!==null&&Ie!==void 0?Ie:qe.colSpan)!==null&&V!==void 0?V:1,vi=(st=(Ue=(Xe=_n==null?void 0:_n.rowSpan)!==null&&Xe!==void 0?Xe:ti)!==null&&Ue!==void 0?Ue:qe.rowSpan)!==null&&st!==void 0?st:1,Li=lt(Mn,vi),Vi=(0,c.Z)(Li,2),sa=Vi[0],ua=Vi[1],Lo=function(P){var j;pr&&ua(Mn,Mn+vi-1),qe==null||(j=qe.onMouseEnter)===null||j===void 0||j.call(qe,P)},Fa=function(P){var j;pr&&ua(-1,-1),qe==null||(j=qe.onMouseLeave)===null||j===void 0||j.call(qe,P)};if(hi===0||vi===0)return null;var go=(Ve=qe.title)!==null&&Ve!==void 0?Ve:ft({rowType:Pn,ellipsis:kt,children:Qn}),qs=re()(Wt,rr,(ct={},(0,ye.Z)(ct,"".concat(Wt,"-fix-left"),ai&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-fix-left-first"),A&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-fix-left-last"),I&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-fix-left-all"),I&&en&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-fix-right"),nn&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-fix-right-first"),T&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-fix-right-last"),H&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-ellipsis"),kt),(0,ye.Z)(ct,"".concat(Wt,"-with-append"),te),(0,ye.Z)(ct,"".concat(Wt,"-fix-sticky"),(ai||nn)&&Tt&&Fr),(0,ye.Z)(ct,"".concat(Wt,"-row-hover"),!_n&&sa),ct),qe.className,_n==null?void 0:_n.className),e={};Xt&&(e.textAlign=Xt);var i=(0,$e.Z)((0,$e.Z)((0,$e.Z)((0,$e.Z)({},qe.style),e),Xn),_n==null?void 0:_n.style),l=Qn;return(0,pe.Z)(l)==="object"&&!Array.isArray(l)&&!v.isValidElement(l)&&(l=null),kt&&(I||T)&&(l=v.createElement("span",{className:"".concat(Wt,"-content")},l)),v.createElement(Ct,(0,U.Z)({},_n,qe,{className:qs,style:i,title:go,scope:Jt,onMouseEnter:Lo,onMouseLeave:Fa,colSpan:hi!==1?hi:null,rowSpan:vi!==1?vi:null}),te,l)}var fe=v.memo(It);function _t(w,V,Ie,se,st,Ue){var Xe=Ie[w]||{},Ve=Ie[V]||{},ct,Ct;Xe.fixed==="left"?ct=se.left[w]:Ve.fixed==="right"&&(Ct=se.right[V]);var Bt=!1,kt=!1,Jt=!1,Ft=!1,rr=Ie[V+1],Xt=Ie[w-1],pr=!(Ue!=null&&Ue.children);if(st==="rtl"){if(ct!==void 0){var yr=Xt&&Xt.fixed==="left";Ft=!yr&&pr}else if(Ct!==void 0){var Ur=rr&&rr.fixed==="right";Jt=!Ur&&pr}}else if(ct!==void 0){var xn=rr&&rr.fixed==="left";Bt=!xn&&pr}else if(Ct!==void 0){var mn=Xt&&Xt.fixed==="right";kt=!mn&&pr}return{fixLeft:ct,fixRight:Ct,lastFixLeft:Bt,firstFixRight:kt,lastFixRight:Jt,firstFixLeft:Ft,isSticky:se.isSticky}}var Ye=v.createContext({}),Ot=Ye;function mt(w){var V=w.className,Ie=w.index,se=w.children,st=w.colSpan,Ue=st===void 0?1:st,Xe=w.rowSpan,Ve=w.align,ct=$(at,["prefixCls","direction"]),Ct=ct.prefixCls,Bt=ct.direction,kt=v.useContext(Ot),Jt=kt.scrollColumnIndex,Ft=kt.stickyOffsets,rr=kt.flattenColumns,Xt=kt.columns,pr=Ie+Ue-1,yr=pr+1===Jt?Ue+1:Ue,Ur=_t(Ie,Ie+yr-1,rr,Ft,Bt,Xt==null?void 0:Xt[Ie]);return v.createElement(fe,(0,U.Z)({className:V,index:Ie,component:"td",prefixCls:Ct,record:null,dataIndex:null,align:Ve,colSpan:yr,rowSpan:Xe,render:function(){return se}},Ur))}var Rt=g(91),pt=["children"];function Ge(w){var V=w.children,Ie=(0,Rt.Z)(w,pt);return v.createElement("tr",Ie,V)}function wt(w){var V=w.children;return V}wt.Row=Ge,wt.Cell=mt;var ee=wt;function Re(w){var V=w.children,Ie=w.stickyOffsets,se=w.flattenColumns,st=w.columns,Ue=$(at,"prefixCls"),Xe=se.length-1,Ve=se[Xe],ct=v.useMemo(function(){return{stickyOffsets:Ie,flattenColumns:se,scrollColumnIndex:Ve!=null&&Ve.scrollbar?Xe:null,columns:st}},[Ve,se,Xe,Ie,st]);return v.createElement(Ot.Provider,{value:ct},v.createElement("tfoot",{className:"".concat(Ue,"-summary")},V))}var dt=Se(Re),D=ee,q=g(48555),G=g(5110),O=g(98924),k=function(V){if((0,O.Z)()&&window.document.documentElement){var Ie=Array.isArray(V)?V:[V],se=window.document.documentElement;return Ie.some(function(st){return st in se.style})}return!1},X=function(V,Ie){if(!k(V))return!1;var se=document.createElement("div"),st=se.style[V];return se.style[V]=Ie,se.style[V]!==st};function W(w,V){return!Array.isArray(w)&&V!==void 0?X(w,V):k(w)}var ae;function Be(w){if(typeof document=="undefined")return 0;if(w||ae===void 0){var V=document.createElement("div");V.style.width="100%",V.style.height="200px";var Ie=document.createElement("div"),se=Ie.style;se.position="absolute",se.top="0",se.left="0",se.pointerEvents="none",se.visibility="hidden",se.width="200px",se.height="150px",se.overflow="hidden",Ie.appendChild(V),document.body.appendChild(Ie);var st=V.offsetWidth;Ie.style.overflow="scroll";var Ue=V.offsetWidth;st===Ue&&(Ue=Ie.clientWidth),document.body.removeChild(Ie),ae=st-Ue}return ae}function ve(w){var V=w.match(/^(.*)px$/),Ie=Number(V==null?void 0:V[1]);return Number.isNaN(Ie)?Be():Ie}function Je(w){if(typeof document=="undefined"||!w||!(w instanceof Element))return{width:0,height:0};var V=getComputedStyle(w,"::-webkit-scrollbar"),Ie=V.width,se=V.height;return{width:ve(Ie),height:ve(se)}}var ot=g(64217),Qe=g(74902);function ir(w,V,Ie,se,st,Ue){var Xe=[];Xe.push({record:w,indent:V,index:Ue});var Ve=st(w),ct=se==null?void 0:se.has(Ve);if(w&&Array.isArray(w[Ie])&&ct)for(var Ct=0;Ct<w[Ie].length;Ct+=1){var Bt=ir(w[Ie][Ct],V+1,Ie,se,st,Ct);Xe.push.apply(Xe,(0,Qe.Z)(Bt))}return Xe}function mr(w,V,Ie,se){var st=v.useMemo(function(){if(Ie!=null&&Ie.size){for(var Ue=[],Xe=0;Xe<(w==null?void 0:w.length);Xe+=1){var Ve=w[Xe];Ue.push.apply(Ue,(0,Qe.Z)(ir(Ve,0,V,Ie,se,Xe)))}return Ue}return w==null?void 0:w.map(function(ct,Ct){return{record:ct,indent:0,index:Ct}})},[w,V,Ie,se]);return st}function Ar(w){var V=w.prefixCls,Ie=w.children,se=w.component,st=w.cellComponent,Ue=w.className,Xe=w.expanded,Ve=w.colSpan,ct=w.isEmpty,Ct=$(at,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),Bt=Ct.scrollbarSize,kt=Ct.fixHeader,Jt=Ct.fixColumn,Ft=Ct.componentWidth,rr=Ct.horizonScroll,Xt=Ie;return(ct?rr:Jt)&&(Xt=v.createElement("div",{style:{width:Ft-(kt?Bt:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(V,"-expanded-row-fixed")},Ft!==0&&Xt)),v.createElement(se,{className:Ue,style:{display:Xe?null:"none"}},v.createElement(fe,{component:st,prefixCls:V,colSpan:Ve},Xt))}var Er=Ar;function Zt(w){var V=w.className,Ie=w.style,se=w.record,st=w.index,Ue=w.renderIndex,Xe=w.rowKey,Ve=w.rowExpandable,ct=w.expandedKeys,Ct=w.onRow,Bt=w.indent,kt=Bt===void 0?0:Bt,Jt=w.rowComponent,Ft=w.cellComponent,rr=w.scopeCellComponent,Xt=w.childrenColumnName,pr=$(at,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex"]),yr=pr.prefixCls,Ur=pr.fixedInfoList,xn=pr.flattenColumns,mn=pr.expandableType,Mn=pr.expandRowByClick,Pn=pr.onTriggerExpand,Gn=pr.rowClassName,ti=pr.expandedRowClassName,ii=pr.indentSize,b=pr.expandIcon,A=pr.expandedRowRender,I=pr.expandIconColumnIndex,T=v.useState(!1),H=(0,c.Z)(T,2),te=H[0],Ae=H[1],qe=ct&&ct.has(Xe);v.useEffect(function(){qe&&Ae(!0)},[qe]);var Tt=mn==="row"&&(!Ve||Ve(se)),Wt=mn==="nest",vr=Xt&&se&&se[Xt],Fr=Tt||Wt,en=v.useRef(Pn);en.current=Pn;var zn=function(){en.current.apply(en,arguments)},ei=Ct==null?void 0:Ct(se,st),Qn=function(Vi){var sa;Mn&&Fr&&zn(se,Vi);for(var ua=arguments.length,Lo=new Array(ua>1?ua-1:0),Fa=1;Fa<ua;Fa++)Lo[Fa-1]=arguments[Fa];ei==null||(sa=ei.onClick)===null||sa===void 0||sa.call.apply(sa,[ei,Vi].concat(Lo))},_n;typeof Gn=="string"?_n=Gn:typeof Gn=="function"&&(_n=Gn(se,st,kt));var Xn=ne(xn),ai=v.createElement(Jt,(0,U.Z)({},ei,{"data-row-key":Xe,className:re()(V,"".concat(yr,"-row"),"".concat(yr,"-row-level-").concat(kt),_n,ei&&ei.className),style:(0,$e.Z)((0,$e.Z)({},Ie),ei?ei.style:null),onClick:Qn}),xn.map(function(Li,Vi){var sa=Li.render,ua=Li.dataIndex,Lo=Li.className,Fa=Xn[Vi],go=Ur[Vi],qs;Vi===(I||0)&&Wt&&(qs=v.createElement(v.Fragment,null,v.createElement("span",{style:{paddingLeft:"".concat(ii*kt,"px")},className:"".concat(yr,"-row-indent indent-level-").concat(kt)}),b({prefixCls:yr,expanded:qe,expandable:vr,record:se,onExpand:zn})));var e;return Li.onCell&&(e=Li.onCell(se,st)),v.createElement(fe,(0,U.Z)({className:Lo,ellipsis:Li.ellipsis,align:Li.align,scope:Li.rowScope,component:Li.rowScope?rr:Ft,prefixCls:yr,key:Fa,record:se,index:st,renderIndex:Ue,dataIndex:ua,render:sa,shouldCellUpdate:Li.shouldCellUpdate,expanded:qs&&qe},go,{appendNode:qs,additionalProps:e}))})),nn;if(Tt&&(te||qe)){var hi=A(se,st,kt+1,qe),vi=ti&&ti(se,st,kt);nn=v.createElement(Er,{expanded:qe,className:re()("".concat(yr,"-expanded-row"),"".concat(yr,"-expanded-row-level-").concat(kt+1),vi),prefixCls:yr,component:Jt,cellComponent:Ft,colSpan:xn.length,isEmpty:!1},hi)}return v.createElement(v.Fragment,null,ai,nn)}Zt.displayName="BodyRow";var Tr=Se(Zt);function pn(w){var V=w.columnKey,Ie=w.onColumnResize,se=v.useRef();return v.useEffect(function(){se.current&&Ie(V,se.current.offsetWidth)},[]),v.createElement(q.Z,{data:V},v.createElement("td",{ref:se,style:{padding:0,border:0,height:0}},v.createElement("div",{style:{height:0,overflow:"hidden"}},"\xA0")))}function un(w){var V=w.prefixCls,Ie=w.columnsKey,se=w.onColumnResize;return v.createElement("tr",{"aria-hidden":"true",className:"".concat(V,"-measure-row"),style:{height:0,fontSize:0}},v.createElement(q.Z.Collection,{onBatchResize:function(Ue){Ue.forEach(function(Xe){var Ve=Xe.data,ct=Xe.size;se(Ve,ct.offsetWidth)})}},Ie.map(function(st){return v.createElement(pn,{key:st,columnKey:st,onColumnResize:se})})))}function Zn(w){var V=w.data,Ie=w.getRowKey,se=w.measureColumnWidth,st=w.expandedKeys,Ue=w.onRow,Xe=w.rowExpandable,Ve=w.emptyNode,ct=w.childrenColumnName,Ct=$(at,["prefixCls","getComponent","onColumnResize","flattenColumns"]),Bt=Ct.prefixCls,kt=Ct.getComponent,Jt=Ct.onColumnResize,Ft=Ct.flattenColumns,rr=mr(V,ct,st,Ie),Xt=v.useRef({renderWithProps:!1}),pr=kt(["body","wrapper"],"tbody"),yr=kt(["body","row"],"tr"),Ur=kt(["body","cell"],"td"),xn=kt(["body","cell"],"th"),mn;V.length?mn=rr.map(function(Pn,Gn){var ti=Pn.record,ii=Pn.indent,b=Pn.index,A=Ie(ti,Gn);return v.createElement(Tr,{key:A,rowKey:A,record:ti,index:Gn,renderIndex:b,rowComponent:yr,cellComponent:Ur,scopeCellComponent:xn,expandedKeys:st,onRow:Ue,getRowKey:Ie,rowExpandable:Xe,childrenColumnName:ct,indent:ii})}):mn=v.createElement(Er,{expanded:!0,className:"".concat(Bt,"-placeholder"),prefixCls:Bt,component:yr,cellComponent:Ur,colSpan:Ft.length,isEmpty:!0},Ve);var Mn=ne(Ft);return v.createElement(je.Provider,{value:Xt.current},v.createElement(pr,{className:"".concat(Bt,"-tbody")},se&&v.createElement(un,{prefixCls:Bt,columnsKey:Mn,onColumnResize:Jt}),mn))}Zn.displayName="Body";var Cr=Se(Zn),Nr=["expandable"],bt="RC_TABLE_INTERNAL_COL_DEFINE";function jn(w){var V=w.expandable,Ie=(0,Rt.Z)(w,Nr),se;return"expandable"in w?se=(0,$e.Z)((0,$e.Z)({},Ie),V):se=Ie,se.showExpandColumn===!1&&(se.expandIconColumnIndex=-1),se}var Pt=["columnType"];function zt(w){for(var V=w.colWidths,Ie=w.columns,se=w.columCount,st=[],Ue=se||Ie.length,Xe=!1,Ve=Ue-1;Ve>=0;Ve-=1){var ct=V[Ve],Ct=Ie&&Ie[Ve],Bt=Ct&&Ct[bt];if(ct||Bt||Xe){var kt=Bt||{},Jt=kt.columnType,Ft=(0,Rt.Z)(kt,Pt);st.unshift(v.createElement("col",(0,U.Z)({key:Ve,style:{width:ct}},Ft))),Xe=!0}}return v.createElement("colgroup",null,st)}var Qt=zt,dr=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function _r(w,V){return(0,v.useMemo)(function(){for(var Ie=[],se=0;se<V;se+=1){var st=w[se];if(st!==void 0)Ie[se]=st;else return null}return Ie},[w.join("_"),V])}var Hr=v.forwardRef(function(w,V){var Ie=w.className,se=w.noData,st=w.columns,Ue=w.flattenColumns,Xe=w.colWidths,Ve=w.columCount,ct=w.stickyOffsets,Ct=w.direction,Bt=w.fixHeader,kt=w.stickyTopOffset,Jt=w.stickyBottomOffset,Ft=w.stickyClassName,rr=w.onScroll,Xt=w.maxContentScroll,pr=w.children,yr=(0,Rt.Z)(w,dr),Ur=$(at,["prefixCls","scrollbarSize","isSticky"]),xn=Ur.prefixCls,mn=Ur.scrollbarSize,Mn=Ur.isSticky,Pn=Mn&&!Bt?0:mn,Gn=v.useRef(null),ti=v.useCallback(function(Ae){(0,ke.mH)(V,Ae),(0,ke.mH)(Gn,Ae)},[]);v.useEffect(function(){var Ae;function qe(Tt){var Wt=Tt,vr=Wt.currentTarget,Fr=Wt.deltaX;Fr&&(rr({currentTarget:vr,scrollLeft:vr.scrollLeft+Fr}),Tt.preventDefault())}return(Ae=Gn.current)===null||Ae===void 0||Ae.addEventListener("wheel",qe),function(){var Tt;(Tt=Gn.current)===null||Tt===void 0||Tt.removeEventListener("wheel",qe)}},[]);var ii=v.useMemo(function(){return Ue.every(function(Ae){return Ae.width>=0})},[Ue]),b=Ue[Ue.length-1],A={fixed:b?b.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(xn,"-cell-scrollbar")}}},I=(0,v.useMemo)(function(){return Pn?[].concat((0,Qe.Z)(st),[A]):st},[Pn,st]),T=(0,v.useMemo)(function(){return Pn?[].concat((0,Qe.Z)(Ue),[A]):Ue},[Pn,Ue]),H=(0,v.useMemo)(function(){var Ae=ct.right,qe=ct.left;return(0,$e.Z)((0,$e.Z)({},ct),{},{left:Ct==="rtl"?[].concat((0,Qe.Z)(qe.map(function(Tt){return Tt+Pn})),[0]):qe,right:Ct==="rtl"?Ae:[].concat((0,Qe.Z)(Ae.map(function(Tt){return Tt+Pn})),[0]),isSticky:Mn})},[Pn,ct,Mn]),te=_r(Xe,Ve);return v.createElement("div",{style:(0,$e.Z)({overflow:"hidden"},Mn?{top:kt,bottom:Jt}:{}),ref:ti,className:re()(Ie,(0,ye.Z)({},Ft,!!Ft))},v.createElement("table",{style:{tableLayout:"fixed",visibility:se||te?null:"hidden"}},(!se||!Xt||ii)&&v.createElement(Qt,{colWidths:te?[].concat((0,Qe.Z)(te),[Pn]):[],columCount:Ve+1,columns:T}),pr((0,$e.Z)((0,$e.Z)({},yr),{},{stickyOffsets:H,columns:I,flattenColumns:T}))))});Hr.displayName="FixedHolder";var Qr=v.memo(Hr);function fr(w){var V=w.cells,Ie=w.stickyOffsets,se=w.flattenColumns,st=w.rowComponent,Ue=w.cellComponent,Xe=w.tdCellComponent,Ve=w.onHeaderRow,ct=w.index,Ct=$(at,["prefixCls","direction"]),Bt=Ct.prefixCls,kt=Ct.direction,Jt;Ve&&(Jt=Ve(V.map(function(rr){return rr.column}),ct));var Ft=ne(V.map(function(rr){return rr.column}));return v.createElement(st,Jt,V.map(function(rr,Xt){var pr=rr.column,yr=_t(rr.colStart,rr.colEnd,se,Ie,kt,pr),Ur;return pr&&pr.onHeaderCell&&(Ur=rr.column.onHeaderCell(pr)),v.createElement(fe,(0,U.Z)({},rr,{scope:pr.title?rr.colSpan>1?"colgroup":"col":null,ellipsis:pr.ellipsis,align:pr.align,component:pr.title?Ue:Xe,prefixCls:Bt,key:Ft[Xt]},yr,{additionalProps:Ur,rowType:"header"}))}))}fr.displayName="HeaderRow";var tt=fr;function Yr(w){var V=[];function Ie(Xe,Ve){var ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;V[ct]=V[ct]||[];var Ct=Ve,Bt=Xe.filter(Boolean).map(function(kt){var Jt={key:kt.key,className:kt.className||"",children:kt.title,column:kt,colStart:Ct},Ft=1,rr=kt.children;return rr&&rr.length>0&&(Ft=Ie(rr,Ct,ct+1).reduce(function(Xt,pr){return Xt+pr},0),Jt.hasSubColumns=!0),"colSpan"in kt&&(Ft=kt.colSpan),"rowSpan"in kt&&(Jt.rowSpan=kt.rowSpan),Jt.colSpan=Ft,Jt.colEnd=Jt.colStart+Ft-1,V[ct].push(Jt),Ct+=Ft,Ft});return Bt}Ie(w,0);for(var se=V.length,st=function(Ve){V[Ve].forEach(function(ct){!("rowSpan"in ct)&&!ct.hasSubColumns&&(ct.rowSpan=se-Ve)})},Ue=0;Ue<se;Ue+=1)st(Ue);return V}function Tn(w){var V=w.stickyOffsets,Ie=w.columns,se=w.flattenColumns,st=w.onHeaderRow,Ue=$(at,["prefixCls","getComponent"]),Xe=Ue.prefixCls,Ve=Ue.getComponent,ct=v.useMemo(function(){return Yr(Ie)},[Ie]),Ct=Ve(["header","wrapper"],"thead"),Bt=Ve(["header","row"],"tr"),kt=Ve(["header","cell"],"th"),Jt=Ve(["header","cell"],"td");return v.createElement(Ct,{className:"".concat(Xe,"-thead")},ct.map(function(Ft,rr){var Xt=v.createElement(tt,{key:rr,flattenColumns:se,cells:Ft,stickyOffsets:V,rowComponent:Bt,cellComponent:kt,tdCellComponent:Jt,onHeaderRow:st,index:rr});return Xt}))}var wn=Se(Tn),Nn=g(50344),Si=["children"],fa=["fixed"];function Xi(w){return(0,Nn.Z)(w).filter(function(V){return v.isValidElement(V)}).map(function(V){var Ie=V.key,se=V.props,st=se.children,Ue=(0,Rt.Z)(se,Si),Xe=(0,$e.Z)({key:Ie},Ue);return st&&(Xe.children=Xi(st)),Xe})}function Ln(w){return w.filter(function(V){return V&&(0,pe.Z)(V)==="object"}).reduce(function(V,Ie){var se=Ie.fixed,st=se===!0?"left":se,Ue=Ie.children;return Ue&&Ue.length>0?[].concat((0,Qe.Z)(V),(0,Qe.Z)(Ln(Ue).map(function(Xe){return(0,$e.Z)({fixed:st},Xe)}))):[].concat((0,Qe.Z)(V),[(0,$e.Z)((0,$e.Z)({},Ie),{},{fixed:st})])},[])}function na(w){for(var V=!0,Ie=0;Ie<w.length;Ie+=1){var se=w[Ie];if(V&&se.fixed!=="left")V=!1;else if(!V&&se.fixed==="left"){warning(!1,"Index ".concat(Ie-1," of `columns` missing `fixed='left'` prop."));break}}for(var st=!0,Ue=w.length-1;Ue>=0;Ue-=1){var Xe=w[Ue];if(st&&Xe.fixed!=="right")st=!1;else if(!st&&Xe.fixed==="right"){warning(!1,"Index ".concat(Ue+1," of `columns` missing `fixed='right'` prop."));break}}}function xi(w){return w.map(function(V){var Ie=V.fixed,se=(0,Rt.Z)(V,fa),st=Ie;return Ie==="left"?st="right":Ie==="right"&&(st="left"),(0,$e.Z)({fixed:st},se)})}function ta(w,V){var Ie=w.prefixCls,se=w.columns,st=w.children,Ue=w.expandable,Xe=w.expandedKeys,Ve=w.columnTitle,ct=w.getRowKey,Ct=w.onTriggerExpand,Bt=w.expandIcon,kt=w.rowExpandable,Jt=w.expandIconColumnIndex,Ft=w.direction,rr=w.expandRowByClick,Xt=w.columnWidth,pr=w.fixed,yr=v.useMemo(function(){return se||Xi(st)},[se,st]),Ur=v.useMemo(function(){if(Ue){var Mn,Pn=yr.slice();if(!Pn.includes(M)){var Gn=Jt||0;Gn>=0&&Pn.splice(Gn,0,M)}var ti=Pn.indexOf(M);Pn=Pn.filter(function(I,T){return I!==M||T===ti});var ii=yr[ti],b;(pr==="left"||pr)&&!Jt?b="left":(pr==="right"||pr)&&Jt===yr.length?b="right":b=ii?ii.fixed:null;var A=(Mn={},(0,ye.Z)(Mn,bt,{className:"".concat(Ie,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),(0,ye.Z)(Mn,"title",Ve),(0,ye.Z)(Mn,"fixed",b),(0,ye.Z)(Mn,"className","".concat(Ie,"-row-expand-icon-cell")),(0,ye.Z)(Mn,"width",Xt),(0,ye.Z)(Mn,"render",function(T,H,te){var Ae=ct(H,te),qe=Xe.has(Ae),Tt=kt?kt(H):!0,Wt=Bt({prefixCls:Ie,expanded:qe,expandable:Tt,record:H,onExpand:Ct});return rr?v.createElement("span",{onClick:function(Fr){return Fr.stopPropagation()}},Wt):Wt}),Mn);return Pn.map(function(I){return I===M?A:I})}return yr.filter(function(I){return I!==M})},[Ue,yr,ct,Xe,Bt,Ft]),xn=v.useMemo(function(){var Mn=Ur;return V&&(Mn=V(Mn)),Mn.length||(Mn=[{render:function(){return null}}]),Mn},[V,Ur,Ft]),mn=v.useMemo(function(){return Ft==="rtl"?xi(Ln(xn)):Ln(xn)},[xn,Ft]);return[xn,mn]}var La=ta;function Ki(w){var V,Ie=w.prefixCls,se=w.record,st=w.onExpand,Ue=w.expanded,Xe=w.expandable,Ve="".concat(Ie,"-row-expand-icon");if(!Xe)return v.createElement("span",{className:re()(Ve,"".concat(Ie,"-row-spaced"))});var ct=function(Bt){st(se,Bt),Bt.stopPropagation()};return v.createElement("span",{className:re()(Ve,(V={},(0,ye.Z)(V,"".concat(Ie,"-row-expanded"),Ue),(0,ye.Z)(V,"".concat(Ie,"-row-collapsed"),!Ue),V)),onClick:ct})}function jo(w,V,Ie){var se=[];function st(Ue){(Ue||[]).forEach(function(Xe,Ve){se.push(V(Xe,Ve)),st(Xe[Ie])})}return st(w),se}function uo(w,V,Ie){var se=jn(w),st=se.expandIcon,Ue=se.expandedRowKeys,Xe=se.defaultExpandedRowKeys,Ve=se.defaultExpandAllRows,ct=se.expandedRowRender,Ct=se.onExpand,Bt=se.onExpandedRowsChange,kt=se.childrenColumnName,Jt=st||Ki,Ft=kt||"children",rr=v.useMemo(function(){return ct?"row":w.expandable&&w.internalHooks===Rs&&w.expandable.__PARENT_RENDER_ICON__||V.some(function(Mn){return Mn&&(0,pe.Z)(Mn)==="object"&&Mn[Ft]})?"nest":!1},[!!ct,V]),Xt=v.useState(function(){return Xe||(Ve?jo(V,Ie,Ft):[])}),pr=(0,c.Z)(Xt,2),yr=pr[0],Ur=pr[1],xn=v.useMemo(function(){return new Set(Ue||yr||[])},[Ue,yr]),mn=v.useCallback(function(Mn){var Pn=Ie(Mn,V.indexOf(Mn)),Gn,ti=xn.has(Pn);ti?(xn.delete(Pn),Gn=(0,Qe.Z)(xn)):Gn=[].concat((0,Qe.Z)(xn),[Pn]),Ur(Gn),Ct&&Ct(!ti,Mn),Bt&&Bt(Gn)},[Ie,xn,V,Ct,Bt]);return[se,rr,xn,Jt,Ft,mn]}function An(w,V,Ie,se){var st=w.map(function(Ue,Xe){return _t(Xe,Xe,w,V,Ie,se==null?void 0:se[Xe])});return(0,De.Z)(function(){return st},[st],function(Ue,Xe){return!(0,Z.Z)(Ue,Xe)})}function gn(w){var V=(0,v.useRef)(w),Ie=(0,v.useState)({}),se=(0,c.Z)(Ie,2),st=se[1],Ue=(0,v.useRef)(null),Xe=(0,v.useRef)([]);function Ve(ct){Xe.current.push(ct);var Ct=Promise.resolve();Ue.current=Ct,Ct.then(function(){if(Ue.current===Ct){var Bt=Xe.current,kt=V.current;Xe.current=[],Bt.forEach(function(Jt){V.current=Jt(V.current)}),Ue.current=null,kt!==V.current&&st({})}})}return(0,v.useEffect)(function(){return function(){Ue.current=null}},[]),[V.current,Ve]}function Oi(w){var V=(0,v.useRef)(w||null),Ie=(0,v.useRef)();function se(){window.clearTimeout(Ie.current)}function st(Xe){V.current=Xe,se(),Ie.current=window.setTimeout(function(){V.current=null,Ie.current=void 0},100)}function Ue(){return V.current}return(0,v.useEffect)(function(){return se},[]),[st,Ue]}function fi(){var w=v.useState(-1),V=(0,c.Z)(w,2),Ie=V[0],se=V[1],st=v.useState(-1),Ue=(0,c.Z)(st,2),Xe=Ue[0],Ve=Ue[1],ct=v.useCallback(function(Ct,Bt){se(Ct),Ve(Bt)},[]);return[Ie,Xe,ct]}var va=(0,O.Z)()?window:null;function wa(w,V){var Ie=(0,pe.Z)(w)==="object"?w:{},se=Ie.offsetHeader,st=se===void 0?0:se,Ue=Ie.offsetSummary,Xe=Ue===void 0?0:Ue,Ve=Ie.offsetScroll,ct=Ve===void 0?0:Ve,Ct=Ie.getContainer,Bt=Ct===void 0?function(){return va}:Ct,kt=Bt()||va;return v.useMemo(function(){var Jt=!!w;return{isSticky:Jt,stickyClassName:Jt?"".concat(V,"-sticky-holder"):"",offsetHeader:st,offsetSummary:Xe,offsetScroll:ct,container:kt}},[ct,st,Xe,V,kt])}function Ca(w,V,Ie){var se=(0,v.useMemo)(function(){for(var st=[],Ue=[],Xe=0,Ve=0,ct=0;ct<V;ct+=1)if(Ie==="rtl"){Ue[ct]=Ve,Ve+=w[ct]||0;var Ct=V-ct-1;st[Ct]=Xe,Xe+=w[Ct]||0}else{st[ct]=Xe,Xe+=w[ct]||0;var Bt=V-ct-1;Ue[Bt]=Ve,Ve+=w[Bt]||0}return{left:st,right:Ue}},[w,V,Ie]);return se}var Aa=Ca;function ma(w){var V=w.className,Ie=w.children;return v.createElement("div",{className:V},Ie)}var ka=ma,Uo=g(64019),ha=/margin|padding|width|height|max|min|offset/,xa={left:!0,top:!0},eo={cssFloat:1,styleFloat:1,float:1};function Te(w){return w.nodeType===1?w.ownerDocument.defaultView.getComputedStyle(w,null):{}}function Po(w,V,Ie){if(V=V.toLowerCase(),Ie==="auto"){if(V==="height")return w.offsetHeight;if(V==="width")return w.offsetWidth}return V in xa||(xa[V]=ha.test(V)),xa[V]?parseFloat(Ie)||0:Ie}function Hs(w,V){var Ie=arguments.length,se=Te(w);return V=eo[V]?"cssFloat"in w.style?"cssFloat":"styleFloat":V,Ie===1?se:Po(w,V,se[V]||w.style[V])}function no(w,V,Ie){var se=arguments.length;if(V=eo[V]?"cssFloat"in w.style?"cssFloat":"styleFloat":V,se===3)return typeof Ie=="number"&&ha.test(V)&&(Ie="".concat(Ie,"px")),w.style[V]=Ie,Ie;for(var st in V)V.hasOwnProperty(st)&&no(w,st,V[st]);return Te(w)}function Jo(w){return w===document.body?document.documentElement.clientWidth:w.offsetWidth}function os(w){return w===document.body?window.innerHeight||document.documentElement.clientHeight:w.offsetHeight}function Go(){var w=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),V=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:w,height:V}}function Wo(){var w=document.documentElement.clientWidth,V=window.innerHeight||document.documentElement.clientHeight;return{width:w,height:V}}function za(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function Tu(w){var V=w.getBoundingClientRect(),Ie=document.documentElement;return{left:V.left+(window.pageXOffset||Ie.scrollLeft)-(Ie.clientLeft||document.body.clientLeft||0),top:V.top+(window.pageYOffset||Ie.scrollTop)-(Ie.clientTop||document.body.clientTop||0)}}var ws=function(V,Ie){var se,st,Ue=V.scrollBodyRef,Xe=V.onScroll,Ve=V.offsetScroll,ct=V.container,Ct=$(at,"prefixCls"),Bt=((se=Ue.current)===null||se===void 0?void 0:se.scrollWidth)||0,kt=((st=Ue.current)===null||st===void 0?void 0:st.clientWidth)||0,Jt=Bt&&kt*(kt/Bt),Ft=v.useRef(),rr=gn({scrollLeft:0,isHiddenScrollBar:!1}),Xt=(0,c.Z)(rr,2),pr=Xt[0],yr=Xt[1],Ur=v.useRef({delta:0,x:0}),xn=v.useState(!1),mn=(0,c.Z)(xn,2),Mn=mn[0],Pn=mn[1],Gn=function(){Pn(!1)},ti=function(T){T.persist(),Ur.current.delta=T.pageX-pr.scrollLeft,Ur.current.x=0,Pn(!0),T.preventDefault()},ii=function(T){var H,te=T||((H=window)===null||H===void 0?void 0:H.event),Ae=te.buttons;if(!Mn||Ae===0){Mn&&Pn(!1);return}var qe=Ur.current.x+T.pageX-Ur.current.x-Ur.current.delta;qe<=0&&(qe=0),qe+Jt>=kt&&(qe=kt-Jt),Xe({scrollLeft:qe/kt*(Bt+2)}),Ur.current.x=T.pageX},b=function(){if(Ue.current){var T=Tu(Ue.current).top,H=T+Ue.current.offsetHeight,te=ct===window?document.documentElement.scrollTop+window.innerHeight:Tu(ct).top+ct.clientHeight;H-Be()<=te||T>=te-Ve?yr(function(Ae){return(0,$e.Z)((0,$e.Z)({},Ae),{},{isHiddenScrollBar:!0})}):yr(function(Ae){return(0,$e.Z)((0,$e.Z)({},Ae),{},{isHiddenScrollBar:!1})})}},A=function(T){yr(function(H){return(0,$e.Z)((0,$e.Z)({},H),{},{scrollLeft:T/Bt*kt||0})})};return v.useImperativeHandle(Ie,function(){return{setScrollLeft:A}}),v.useEffect(function(){var I=(0,Uo.Z)(document.body,"mouseup",Gn,!1),T=(0,Uo.Z)(document.body,"mousemove",ii,!1);return b(),function(){I.remove(),T.remove()}},[Jt,Mn]),v.useEffect(function(){var I=(0,Uo.Z)(ct,"scroll",b,!1),T=(0,Uo.Z)(window,"resize",b,!1);return function(){I.remove(),T.remove()}},[ct]),v.useEffect(function(){pr.isHiddenScrollBar||yr(function(I){var T=Ue.current;return T?(0,$e.Z)((0,$e.Z)({},I),{},{scrollLeft:T.scrollLeft/T.scrollWidth*T.clientWidth}):I})},[pr.isHiddenScrollBar]),Bt<=kt||!Jt||pr.isHiddenScrollBar?null:v.createElement("div",{style:{height:Be(),width:kt,bottom:Ve},className:"".concat(Ct,"-sticky-scroll")},v.createElement("div",{onMouseDown:ti,ref:Ft,className:re()("".concat(Ct,"-sticky-scroll-bar"),(0,ye.Z)({},"".concat(Ct,"-sticky-scroll-bar-active"),Mn)),style:{width:"".concat(Jt,"px"),transform:"translate3d(".concat(pr.scrollLeft,"px, 0, 0)")}}))},Zs=v.forwardRef(ws);function ts(w){return null}var Vs=ts;function ou(w){return null}var ls=ou,ki=[],As={},Rs="rc-table-internal-hook";function hr(){return"No Data"}function Lr(w){var V,Ie=(0,$e.Z)({rowKey:"key",prefixCls:"rc-table",emptyText:hr},w),se=Ie.prefixCls,st=Ie.className,Ue=Ie.rowClassName,Xe=Ie.style,Ve=Ie.data,ct=Ie.rowKey,Ct=Ie.scroll,Bt=Ie.tableLayout,kt=Ie.direction,Jt=Ie.title,Ft=Ie.footer,rr=Ie.summary,Xt=Ie.caption,pr=Ie.id,yr=Ie.showHeader,Ur=Ie.components,xn=Ie.emptyText,mn=Ie.onRow,Mn=Ie.onHeaderRow,Pn=Ie.internalHooks,Gn=Ie.transformColumns,ti=Ie.internalRefs,ii=Ie.sticky,b=Ve||ki,A=!!b.length,I=v.useCallback(function(ml,vc){return(0,le.Z)(Ur,ml)||vc},[Ur]),T=v.useMemo(function(){return typeof ct=="function"?ct:function(ml){var vc=ml&&ml[ct];return vc}},[ct]),H=fi(),te=(0,c.Z)(H,3),Ae=te[0],qe=te[1],Tt=te[2],Wt=uo(Ie,b,T),vr=(0,c.Z)(Wt,6),Fr=vr[0],en=vr[1],zn=vr[2],ei=vr[3],Qn=vr[4],_n=vr[5],Xn=v.useState(0),ai=(0,c.Z)(Xn,2),nn=ai[0],hi=ai[1],vi=La((0,$e.Z)((0,$e.Z)((0,$e.Z)({},Ie),Fr),{},{expandable:!!Fr.expandedRowRender,columnTitle:Fr.columnTitle,expandedKeys:zn,getRowKey:T,onTriggerExpand:_n,expandIcon:ei,expandIconColumnIndex:Fr.expandIconColumnIndex,direction:kt}),Pn===Rs?Gn:null),Li=(0,c.Z)(vi,2),Vi=Li[0],sa=Li[1],ua=v.useMemo(function(){return{columns:Vi,flattenColumns:sa}},[Vi,sa]),Lo=v.useRef(),Fa=v.useRef(),go=v.useRef(),qs=v.useRef(),e=v.useRef(),i=v.useState(!1),l=(0,c.Z)(i,2),y=l[0],P=l[1],j=v.useState(!1),Q=(0,c.Z)(j,2),we=Q[0],ut=Q[1],Nt=gn(new Map),Ut=(0,c.Z)(Nt,2),qt=Ut[0],lr=Ut[1],xr=ne(sa),Kr=xr.map(function(ml){return qt.get(ml)}),qr=v.useMemo(function(){return Kr},[Kr.join("_")]),dn=Aa(qr,sa.length,kt),cn=Ct&&xe(Ct.y),Un=Ct&&xe(Ct.x)||Boolean(Fr.fixed),ri=Un&&sa.some(function(ml){var vc=ml.fixed;return vc}),gi=v.useRef(),yi=wa(ii,se),Ii=yi.isSticky,Ji=yi.offsetHeader,Wi=yi.offsetSummary,ja=yi.offsetScroll,Jn=yi.stickyClassName,la=yi.container,ea=v.useMemo(function(){return rr==null?void 0:rr(b)},[rr,b]),bo=(cn||Ii)&&v.isValidElement(ea)&&ea.type===ee&&ea.props.fixed,Eo,Ja,Ss;cn&&(Ja={overflowY:"scroll",maxHeight:Ct.y}),Un&&(Eo={overflowX:"auto"},cn||(Ja={overflowY:"hidden"}),Ss={width:(Ct==null?void 0:Ct.x)===!0?"auto":Ct==null?void 0:Ct.x,minWidth:"100%"});var Is=v.useCallback(function(ml,vc){(0,G.Z)(Lo.current)&&lr(function(vd){if(vd.get(ml)!==vc){var Ad=new Map(vd);return Ad.set(ml,vc),Ad}return vd})},[]),pu=Oi(null),es=(0,c.Z)(pu,2),$u=es[0],hl=es[1];function Nl(ml,vc){vc&&(typeof vc=="function"?vc(ml):vc.scrollLeft!==ml&&(vc.scrollLeft=ml,vc.scrollLeft!==ml&&setTimeout(function(){vc.scrollLeft=ml},0)))}var el=(0,K.Z)(function(ml){var vc=ml.currentTarget,vd=ml.scrollLeft,Ad=kt==="rtl",Fd=typeof vd=="number"?vd:vc.scrollLeft,yp=vc||As;if(!hl()||hl()===yp){var Ph;$u(yp),Nl(Fd,Fa.current),Nl(Fd,go.current),Nl(Fd,e.current),Nl(Fd,(Ph=gi.current)===null||Ph===void 0?void 0:Ph.setScrollLeft)}if(vc){var Ed=vc.scrollWidth,Bd=vc.clientWidth;if(Ed===Bd){P(!1),ut(!1);return}Ad?(P(-Fd<Ed-Bd),ut(-Fd>0)):(P(Fd>0),ut(Fd<Ed-Bd))}}),af=function(){Un&&go.current?el({currentTarget:go.current}):(P(!1),ut(!1))},gf=function(vc){var vd=vc.width;vd!==nn&&(af(),hi(Lo.current?Lo.current.offsetWidth:vd))},zf=v.useRef(!1);v.useEffect(function(){zf.current&&af()},[Un,Ve,Vi.length]),v.useEffect(function(){zf.current=!0},[]);var Th=v.useState(0),ed=(0,c.Z)(Th,2),Zf=ed[0],iu=ed[1],Uf=v.useState(!0),xh=(0,c.Z)(Uf,2),Lu=xh[0],cl=xh[1];v.useEffect(function(){go.current instanceof Element?iu(Je(go.current).width):iu(Je(qs.current).width),cl(W("position","sticky"))},[]),v.useEffect(function(){Pn===Rs&&ti&&(ti.body.current=go.current)});var sl=v.useCallback(function(ml){return v.createElement(v.Fragment,null,v.createElement(wn,ml),bo==="top"&&v.createElement(dt,ml,ea))},[bo,ea]),Wu=v.useCallback(function(ml){return v.createElement(dt,ml,ea)},[ea]),td=I(["table"],"table"),Qf=v.useMemo(function(){return Bt||(ri?(Ct==null?void 0:Ct.x)==="max-content"?"auto":"fixed":cn||Ii||sa.some(function(ml){var vc=ml.ellipsis;return vc})?"fixed":"auto")},[cn,ri,sa,Bt,Ii]),Rc,$f={colWidths:qr,columCount:sa.length,stickyOffsets:dn,onHeaderRow:Mn,fixHeader:cn,scroll:Ct},rd=v.useMemo(function(){return A?null:typeof xn=="function"?xn():xn},[A,xn]),Cl=v.createElement(Cr,{data:b,measureColumnWidth:cn||Un||Ii,expandedKeys:zn,rowExpandable:Fr.rowExpandable,getRowKey:T,onRow:mn,emptyNode:rd,childrenColumnName:Qn}),Mh=v.createElement(Qt,{colWidths:sa.map(function(ml){var vc=ml.width;return vc}),columns:sa}),fd=Xt!=null?v.createElement("caption",{className:"".concat(se,"-caption")},Xt):void 0,Wd=I(["body"]),oc=(0,ot.Z)(Ie,{data:!0}),Ou=(0,ot.Z)(Ie,{aria:!0});if(cn||Ii){var Od;typeof Wd=="function"?(Od=Wd(b,{scrollbarSize:Zf,ref:go,onScroll:el}),$f.colWidths=sa.map(function(ml,vc){var vd=ml.width,Ad=vc===Vi.length-1?vd-Zf:vd;return typeof Ad=="number"&&!Number.isNaN(Ad)?Ad:((0,ge.ZP)(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0)})):Od=v.createElement("div",{style:(0,$e.Z)((0,$e.Z)({},Eo),Ja),onScroll:el,ref:go,className:re()("".concat(se,"-body"))},v.createElement(td,(0,U.Z)({style:(0,$e.Z)((0,$e.Z)({},Ss),{},{tableLayout:Qf})},Ou),fd,Mh,Cl,!bo&&ea&&v.createElement(dt,{stickyOffsets:dn,flattenColumns:sa,columns:Vi},ea)));var Wh=(0,$e.Z)((0,$e.Z)((0,$e.Z)({noData:!b.length,maxContentScroll:Un&&Ct.x==="max-content"},$f),ua),{},{direction:kt,stickyClassName:Jn,onScroll:el});Rc=v.createElement(v.Fragment,null,yr!==!1&&v.createElement(Qr,(0,U.Z)({},Wh,{stickyTopOffset:Ji,className:"".concat(se,"-header"),ref:Fa}),sl),Od,bo&&bo!=="top"&&v.createElement(Qr,(0,U.Z)({},Wh,{stickyBottomOffset:Wi,className:"".concat(se,"-summary"),ref:e}),Wu),Ii&&v.createElement(Zs,{ref:gi,offsetScroll:ja,scrollBodyRef:go,onScroll:el,container:la}))}else Rc=v.createElement("div",{style:(0,$e.Z)((0,$e.Z)({},Eo),Ja),className:re()("".concat(se,"-content")),onScroll:el,ref:go},v.createElement(td,(0,U.Z)({style:(0,$e.Z)((0,$e.Z)({},Ss),{},{tableLayout:Qf})},Ou),fd,Mh,yr!==!1&&v.createElement(wn,(0,U.Z)({},$f,ua)),Cl,ea&&v.createElement(dt,{stickyOffsets:dn,flattenColumns:sa,columns:Vi},ea)));var yf=v.createElement("div",(0,U.Z)({className:re()(se,st,(V={},(0,ye.Z)(V,"".concat(se,"-rtl"),kt==="rtl"),(0,ye.Z)(V,"".concat(se,"-ping-left"),y),(0,ye.Z)(V,"".concat(se,"-ping-right"),we),(0,ye.Z)(V,"".concat(se,"-layout-fixed"),Bt==="fixed"),(0,ye.Z)(V,"".concat(se,"-fixed-header"),cn),(0,ye.Z)(V,"".concat(se,"-fixed-column"),ri),(0,ye.Z)(V,"".concat(se,"-scroll-horizontal"),Un),(0,ye.Z)(V,"".concat(se,"-has-fix-left"),sa[0]&&sa[0].fixed),(0,ye.Z)(V,"".concat(se,"-has-fix-right"),sa[sa.length-1]&&sa[sa.length-1].fixed==="right"),V)),style:Xe,id:pr,ref:Lo},oc),Jt&&v.createElement(ka,{className:"".concat(se,"-title")},Jt(b)),v.createElement("div",{ref:qs,className:"".concat(se,"-container")},Rc),Ft&&v.createElement(ka,{className:"".concat(se,"-footer")},Ft(b)));Un&&(yf=v.createElement(q.Z,{onResize:gf},yf));var Ep=An(sa,dn,kt,Vi),bd=v.useMemo(function(){return{prefixCls:se,getComponent:I,scrollbarSize:Zf,direction:kt,fixedInfoList:Ep,isSticky:Ii,supportSticky:Lu,componentWidth:nn,fixHeader:cn,fixColumn:ri,horizonScroll:Un,tableLayout:Qf,rowClassName:Ue,expandedRowClassName:Fr.expandedRowClassName,expandIcon:ei,expandableType:en,expandRowByClick:Fr.expandRowByClick,expandedRowRender:Fr.expandedRowRender,onTriggerExpand:_n,expandIconColumnIndex:Fr.expandIconColumnIndex,indentSize:Fr.indentSize,allColumnsFixedLeft:sa.every(function(ml){return ml.fixed==="left"}),columns:Vi,flattenColumns:sa,onColumnResize:Is,hoverStartRow:Ae,hoverEndRow:qe,onHover:Tt}},[se,I,Zf,kt,Ep,Ii,Lu,nn,cn,ri,Un,Qf,Ue,Fr.expandedRowClassName,ei,en,Fr.expandRowByClick,Fr.expandedRowRender,_n,Fr.expandIconColumnIndex,Fr.indentSize,Vi,sa,Is,Ae,qe,Tt]);return v.createElement(at.Provider,{value:bd},yf)}function or(w){return Le(Lr,w)}var kr=or();kr.EXPAND_COLUMN=M,kr.Column=Vs,kr.ColumnGroup=ls,kr.Summary=D;var Hn=null,zr=null;function Bo(w){return null}var Vr=Bo;function cr(w){return null}var ht=cr,ur=g(98423),er=g(53124),sn=g(88258),fn=g(97647);function Vn(){const[,w]=v.useReducer(V=>V+1,0);return w}var ni=g(74443);function oi(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const V=(0,v.useRef)({}),Ie=Vn(),se=(0,ni.Z)();return(0,v.useEffect)(()=>{const st=se.subscribe(Ue=>{V.current=Ue,w&&Ie()});return()=>se.unsubscribe(st)},[]),V.current}var Ei=oi,qi=g(88526),Pr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},Cn=Pr,ln=g(42135),bn=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Cn}))};bn.displayName="DoubleLeftOutlined";var Kn=v.forwardRef(bn),bi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},Yi=bi,Gi=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Yi}))};Gi.displayName="DoubleRightOutlined";var aa=v.forwardRef(Gi),Ta={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},R=Ta,_e=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:R}))};_e.displayName="LeftOutlined";var At=v.forwardRef(_e),Ke=g(65793),nr=g(15671),wr=g(43144),Wr=g(60136),In=g(29388),Dn=function(V){var Ie,se="".concat(V.rootPrefixCls,"-item"),st=re()(se,"".concat(se,"-").concat(V.page),(Ie={},(0,ye.Z)(Ie,"".concat(se,"-active"),V.active),(0,ye.Z)(Ie,"".concat(se,"-disabled"),!V.page),(0,ye.Z)(Ie,V.className,!!V.className),Ie)),Ue=function(){V.onClick(V.page)},Xe=function(ct){V.onKeyPress(ct,V.onClick,V.page)};return v.createElement("li",{title:V.showTitle?V.page:null,className:st,onClick:Ue,onKeyPress:Xe,tabIndex:"0"},V.itemRender(V.page,"page",v.createElement("a",{rel:"nofollow"},V.page)))},Mi=Dn,Bi={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},io=function(w){(0,Wr.Z)(Ie,w);var V=(0,In.Z)(Ie);function Ie(){var se;(0,nr.Z)(this,Ie);for(var st=arguments.length,Ue=new Array(st),Xe=0;Xe<st;Xe++)Ue[Xe]=arguments[Xe];return se=V.call.apply(V,[this].concat(Ue)),se.state={goInputText:""},se.buildOptionText=function(Ve){return"".concat(Ve," ").concat(se.props.locale.items_per_page)},se.changeSize=function(Ve){se.props.changeSize(Number(Ve))},se.handleChange=function(Ve){se.setState({goInputText:Ve.target.value})},se.handleBlur=function(Ve){var ct=se.props,Ct=ct.goButton,Bt=ct.quickGo,kt=ct.rootPrefixCls,Jt=se.state.goInputText;Ct||Jt===""||(se.setState({goInputText:""}),!(Ve.relatedTarget&&(Ve.relatedTarget.className.indexOf("".concat(kt,"-item-link"))>=0||Ve.relatedTarget.className.indexOf("".concat(kt,"-item"))>=0))&&Bt(se.getValidValue()))},se.go=function(Ve){var ct=se.state.goInputText;ct!==""&&(Ve.keyCode===Bi.ENTER||Ve.type==="click")&&(se.setState({goInputText:""}),se.props.quickGo(se.getValidValue()))},se}return(0,wr.Z)(Ie,[{key:"getValidValue",value:function(){var st=this.state.goInputText;return!st||isNaN(st)?void 0:Number(st)}},{key:"getPageSizeOptions",value:function(){var st=this.props,Ue=st.pageSize,Xe=st.pageSizeOptions;return Xe.some(function(Ve){return Ve.toString()===Ue.toString()})?Xe:Xe.concat([Ue.toString()]).sort(function(Ve,ct){var Ct=isNaN(Number(Ve))?0:Number(Ve),Bt=isNaN(Number(ct))?0:Number(ct);return Ct-Bt})}},{key:"render",value:function(){var st=this,Ue=this.props,Xe=Ue.pageSize,Ve=Ue.locale,ct=Ue.rootPrefixCls,Ct=Ue.changeSize,Bt=Ue.quickGo,kt=Ue.goButton,Jt=Ue.selectComponentClass,Ft=Ue.buildOptionText,rr=Ue.selectPrefixCls,Xt=Ue.disabled,pr=this.state.goInputText,yr="".concat(ct,"-options"),Ur=Jt,xn=null,mn=null,Mn=null;if(!Ct&&!Bt)return null;var Pn=this.getPageSizeOptions();if(Ct&&Ur){var Gn=Pn.map(function(ti,ii){return v.createElement(Ur.Option,{key:ii,value:ti.toString()},(Ft||st.buildOptionText)(ti))});xn=v.createElement(Ur,{disabled:Xt,prefixCls:rr,showSearch:!1,className:"".concat(yr,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(Xe||Pn[0]).toString(),onChange:this.changeSize,getPopupContainer:function(ii){return ii.parentNode},"aria-label":Ve.page_size,defaultOpen:!1},Gn)}return Bt&&(kt&&(Mn=typeof kt=="boolean"?v.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:Xt,className:"".concat(yr,"-quick-jumper-button")},Ve.jump_to_confirm):v.createElement("span",{onClick:this.go,onKeyUp:this.go},kt)),mn=v.createElement("div",{className:"".concat(yr,"-quick-jumper")},Ve.jump_to,v.createElement("input",{disabled:Xt,type:"text",value:pr,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":Ve.page}),Ve.page,Mn)),v.createElement("li",{className:"".concat(yr)},xn,mn)}}]),Ie}(v.Component);io.defaultProps={pageSizeOptions:["10","20","50","100"]};var co=io,Sa={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};function Ko(){}function Co(w){var V=Number(w);return typeof V=="number"&&!isNaN(V)&&isFinite(V)&&Math.floor(V)===V}function Oo(w,V,Ie){return Ie}function Ho(w,V,Ie){var se=typeof w=="undefined"?V.pageSize:w;return Math.floor((Ie.total-1)/se)+1}var Io=function(w){(0,Wr.Z)(Ie,w);var V=(0,In.Z)(Ie);function Ie(se){var st;(0,nr.Z)(this,Ie),st=V.call(this,se),st.getJumpPrevPage=function(){return Math.max(1,st.state.current-(st.props.showLessItems?3:5))},st.getJumpNextPage=function(){return Math.min(Ho(void 0,st.state,st.props),st.state.current+(st.props.showLessItems?3:5))},st.getItemIcon=function(Ct,Bt){var kt=st.props.prefixCls,Jt=Ct||v.createElement("button",{type:"button","aria-label":Bt,className:"".concat(kt,"-item-link")});return typeof Ct=="function"&&(Jt=v.createElement(Ct,(0,$e.Z)({},st.props))),Jt},st.savePaginationNode=function(Ct){st.paginationNode=Ct},st.isValid=function(Ct){var Bt=st.props.total;return Co(Ct)&&Ct!==st.state.current&&Co(Bt)&&Bt>0},st.shouldDisplayQuickJumper=function(){var Ct=st.props,Bt=Ct.showQuickJumper,kt=Ct.total,Jt=st.state.pageSize;return kt<=Jt?!1:Bt},st.handleKeyDown=function(Ct){(Ct.keyCode===Bi.ARROW_UP||Ct.keyCode===Bi.ARROW_DOWN)&&Ct.preventDefault()},st.handleKeyUp=function(Ct){var Bt=st.getValidValue(Ct),kt=st.state.currentInputValue;Bt!==kt&&st.setState({currentInputValue:Bt}),Ct.keyCode===Bi.ENTER?st.handleChange(Bt):Ct.keyCode===Bi.ARROW_UP?st.handleChange(Bt-1):Ct.keyCode===Bi.ARROW_DOWN&&st.handleChange(Bt+1)},st.handleBlur=function(Ct){var Bt=st.getValidValue(Ct);st.handleChange(Bt)},st.changePageSize=function(Ct){var Bt=st.state.current,kt=Ho(Ct,st.state,st.props);Bt=Bt>kt?kt:Bt,kt===0&&(Bt=st.state.current),typeof Ct=="number"&&("pageSize"in st.props||st.setState({pageSize:Ct}),"current"in st.props||st.setState({current:Bt,currentInputValue:Bt})),st.props.onShowSizeChange(Bt,Ct),"onChange"in st.props&&st.props.onChange&&st.props.onChange(Bt,Ct)},st.handleChange=function(Ct){var Bt=st.props,kt=Bt.disabled,Jt=Bt.onChange,Ft=st.state,rr=Ft.pageSize,Xt=Ft.current,pr=Ft.currentInputValue;if(st.isValid(Ct)&&!kt){var yr=Ho(void 0,st.state,st.props),Ur=Ct;return Ct>yr?Ur=yr:Ct<1&&(Ur=1),"current"in st.props||st.setState({current:Ur}),Ur!==pr&&st.setState({currentInputValue:Ur}),Jt(Ur,rr),Ur}return Xt},st.prev=function(){st.hasPrev()&&st.handleChange(st.state.current-1)},st.next=function(){st.hasNext()&&st.handleChange(st.state.current+1)},st.jumpPrev=function(){st.handleChange(st.getJumpPrevPage())},st.jumpNext=function(){st.handleChange(st.getJumpNextPage())},st.hasPrev=function(){return st.state.current>1},st.hasNext=function(){return st.state.current<Ho(void 0,st.state,st.props)},st.runIfEnter=function(Ct,Bt){if(Ct.key==="Enter"||Ct.charCode===13){for(var kt=arguments.length,Jt=new Array(kt>2?kt-2:0),Ft=2;Ft<kt;Ft++)Jt[Ft-2]=arguments[Ft];Bt.apply(void 0,Jt)}},st.runIfEnterPrev=function(Ct){st.runIfEnter(Ct,st.prev)},st.runIfEnterNext=function(Ct){st.runIfEnter(Ct,st.next)},st.runIfEnterJumpPrev=function(Ct){st.runIfEnter(Ct,st.jumpPrev)},st.runIfEnterJumpNext=function(Ct){st.runIfEnter(Ct,st.jumpNext)},st.handleGoTO=function(Ct){(Ct.keyCode===Bi.ENTER||Ct.type==="click")&&st.handleChange(st.state.currentInputValue)};var Ue=se.onChange!==Ko,Xe="current"in se;Xe&&!Ue&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var Ve=se.defaultCurrent;"current"in se&&(Ve=se.current);var ct=se.defaultPageSize;return"pageSize"in se&&(ct=se.pageSize),Ve=Math.min(Ve,Ho(ct,void 0,se)),st.state={current:Ve,currentInputValue:Ve,pageSize:ct},st}return(0,wr.Z)(Ie,[{key:"componentDidUpdate",value:function(st,Ue){var Xe=this.props.prefixCls;if(Ue.current!==this.state.current&&this.paginationNode){var Ve=this.paginationNode.querySelector(".".concat(Xe,"-item-").concat(Ue.current));Ve&&document.activeElement===Ve&&Ve.blur()}}},{key:"getValidValue",value:function(st){var Ue=st.target.value,Xe=Ho(void 0,this.state,this.props),Ve=this.state.currentInputValue,ct;return Ue===""?ct=Ue:isNaN(Number(Ue))?ct=Ve:Ue>=Xe?ct=Xe:ct=Number(Ue),ct}},{key:"getShowSizeChanger",value:function(){var st=this.props,Ue=st.showSizeChanger,Xe=st.total,Ve=st.totalBoundaryShowSizeChanger;return typeof Ue!="undefined"?Ue:Xe>Ve}},{key:"renderPrev",value:function(st){var Ue=this.props,Xe=Ue.prevIcon,Ve=Ue.itemRender,ct=Ve(st,"prev",this.getItemIcon(Xe,"prev page")),Ct=!this.hasPrev();return(0,v.isValidElement)(ct)?(0,v.cloneElement)(ct,{disabled:Ct}):ct}},{key:"renderNext",value:function(st){var Ue=this.props,Xe=Ue.nextIcon,Ve=Ue.itemRender,ct=Ve(st,"next",this.getItemIcon(Xe,"next page")),Ct=!this.hasNext();return(0,v.isValidElement)(ct)?(0,v.cloneElement)(ct,{disabled:Ct}):ct}},{key:"render",value:function(){var st=this,Ue=this.props,Xe=Ue.prefixCls,Ve=Ue.className,ct=Ue.style,Ct=Ue.disabled,Bt=Ue.hideOnSinglePage,kt=Ue.total,Jt=Ue.locale,Ft=Ue.showQuickJumper,rr=Ue.showLessItems,Xt=Ue.showTitle,pr=Ue.showTotal,yr=Ue.simple,Ur=Ue.itemRender,xn=Ue.showPrevNextJumpers,mn=Ue.jumpPrevIcon,Mn=Ue.jumpNextIcon,Pn=Ue.selectComponentClass,Gn=Ue.selectPrefixCls,ti=Ue.pageSizeOptions,ii=this.state,b=ii.current,A=ii.pageSize,I=ii.currentInputValue;if(Bt===!0&&kt<=A)return null;var T=Ho(void 0,this.state,this.props),H=[],te=null,Ae=null,qe=null,Tt=null,Wt=null,vr=Ft&&Ft.goButton,Fr=rr?1:2,en=b-1>0?b-1:0,zn=b+1<T?b+1:T,ei=Object.keys(this.props).reduce(function(Fa,go){return(go.substr(0,5)==="data-"||go.substr(0,5)==="aria-"||go==="role")&&(Fa[go]=st.props[go]),Fa},{}),Qn=pr&&v.createElement("li",{className:"".concat(Xe,"-total-text")},pr(kt,[kt===0?0:(b-1)*A+1,b*A>kt?kt:b*A]));if(yr)return vr&&(typeof vr=="boolean"?Wt=v.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},Jt.jump_to_confirm):Wt=v.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},vr),Wt=v.createElement("li",{title:Xt?"".concat(Jt.jump_to).concat(b,"/").concat(T):null,className:"".concat(Xe,"-simple-pager")},Wt)),v.createElement("ul",(0,U.Z)({className:re()(Xe,"".concat(Xe,"-simple"),(0,ye.Z)({},"".concat(Xe,"-disabled"),Ct),Ve),style:ct,ref:this.savePaginationNode},ei),Qn,v.createElement("li",{title:Xt?Jt.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:re()("".concat(Xe,"-prev"),(0,ye.Z)({},"".concat(Xe,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(en)),v.createElement("li",{title:Xt?"".concat(b,"/").concat(T):null,className:"".concat(Xe,"-simple-pager")},v.createElement("input",{type:"text",value:I,disabled:Ct,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),v.createElement("span",{className:"".concat(Xe,"-slash")},"/"),T),v.createElement("li",{title:Xt?Jt.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:re()("".concat(Xe,"-next"),(0,ye.Z)({},"".concat(Xe,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(zn)),Wt);if(T<=3+Fr*2){var _n={locale:Jt,rootPrefixCls:Xe,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:Xt,itemRender:Ur};T||H.push(v.createElement(Mi,(0,U.Z)({},_n,{key:"noPager",page:1,className:"".concat(Xe,"-item-disabled")})));for(var Xn=1;Xn<=T;Xn+=1){var ai=b===Xn;H.push(v.createElement(Mi,(0,U.Z)({},_n,{key:Xn,page:Xn,active:ai})))}}else{var nn=rr?Jt.prev_3:Jt.prev_5,hi=rr?Jt.next_3:Jt.next_5;xn&&(te=v.createElement("li",{title:Xt?nn:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:re()("".concat(Xe,"-jump-prev"),(0,ye.Z)({},"".concat(Xe,"-jump-prev-custom-icon"),!!mn))},Ur(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(mn,"prev page"))),Ae=v.createElement("li",{title:Xt?hi:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:re()("".concat(Xe,"-jump-next"),(0,ye.Z)({},"".concat(Xe,"-jump-next-custom-icon"),!!Mn))},Ur(this.getJumpNextPage(),"jump-next",this.getItemIcon(Mn,"next page")))),Tt=v.createElement(Mi,{locale:Jt,last:!0,rootPrefixCls:Xe,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:T,page:T,active:!1,showTitle:Xt,itemRender:Ur}),qe=v.createElement(Mi,{locale:Jt,rootPrefixCls:Xe,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:Xt,itemRender:Ur});var vi=Math.max(1,b-Fr),Li=Math.min(b+Fr,T);b-1<=Fr&&(Li=1+Fr*2),T-b<=Fr&&(vi=T-Fr*2);for(var Vi=vi;Vi<=Li;Vi+=1){var sa=b===Vi;H.push(v.createElement(Mi,{locale:Jt,rootPrefixCls:Xe,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Vi,page:Vi,active:sa,showTitle:Xt,itemRender:Ur}))}b-1>=Fr*2&&b!==1+2&&(H[0]=(0,v.cloneElement)(H[0],{className:"".concat(Xe,"-item-after-jump-prev")}),H.unshift(te)),T-b>=Fr*2&&b!==T-2&&(H[H.length-1]=(0,v.cloneElement)(H[H.length-1],{className:"".concat(Xe,"-item-before-jump-next")}),H.push(Ae)),vi!==1&&H.unshift(qe),Li!==T&&H.push(Tt)}var ua=!this.hasPrev()||!T,Lo=!this.hasNext()||!T;return v.createElement("ul",(0,U.Z)({className:re()(Xe,Ve,(0,ye.Z)({},"".concat(Xe,"-disabled"),Ct)),style:ct,ref:this.savePaginationNode},ei),Qn,v.createElement("li",{title:Xt?Jt.prev_page:null,onClick:this.prev,tabIndex:ua?null:0,onKeyPress:this.runIfEnterPrev,className:re()("".concat(Xe,"-prev"),(0,ye.Z)({},"".concat(Xe,"-disabled"),ua)),"aria-disabled":ua},this.renderPrev(en)),H,v.createElement("li",{title:Xt?Jt.next_page:null,onClick:this.next,tabIndex:Lo?null:0,onKeyPress:this.runIfEnterNext,className:re()("".concat(Xe,"-next"),(0,ye.Z)({},"".concat(Xe,"-disabled"),Lo)),"aria-disabled":Lo},this.renderNext(zn)),v.createElement(co,{disabled:Ct,locale:Jt,rootPrefixCls:Xe,selectComponentClass:Pn,selectPrefixCls:Gn,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:b,pageSize:A,pageSizeOptions:ti,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:vr}))}}],[{key:"getDerivedStateFromProps",value:function(st,Ue){var Xe={};if("current"in st&&(Xe.current=st.current,st.current!==Ue.current&&(Xe.currentInputValue=Xe.current)),"pageSize"in st&&st.pageSize!==Ue.pageSize){var Ve=Ue.current,ct=Ho(st.pageSize,Ue,st);Ve=Ve>ct?ct:Ve,"current"in st||(Xe.current=Ve,Xe.currentInputValue=Ve),Xe.pageSize=st.pageSize}return Xe}}]),Ie}(v.Component);Io.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:Ko,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:Ko,locale:Sa,style:{},itemRender:Oo,totalBoundaryShowSizeChanger:50};var Js=Io,Il=g(62906),Ao=g(74342),Va=g(33394);const gs=w=>v.createElement(Va.Z,Object.assign({},w,{size:"small"})),Ws=w=>v.createElement(Va.Z,Object.assign({},w,{size:"middle"}));gs.Option=Va.Z.Option,Ws.Option=Va.Z.Option;var bs=g(14747),Ps=g(80110),Xs=g(45503),gl=g(67968);const jf=w=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:w,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Mu=w=>({borderColor:w.inputBorderHoverColor,borderInlineEndWidth:w.lineWidth}),yl=w=>({borderColor:w.inputBorderHoverColor,boxShadow:`0 0 0 ${w.controlOutlineWidth}px ${w.controlOutline}`,borderInlineEndWidth:w.lineWidth,outline:0}),lc=w=>({color:w.colorTextDisabled,backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},Mu((0,Xs.TS)(w,{inputBorderHoverColor:w.colorBorder})))}),Lc=w=>{const{inputPaddingVerticalLG:V,fontSizeLG:Ie,lineHeightLG:se,borderRadiusLG:st,inputPaddingHorizontalLG:Ue}=w;return{padding:`${V}px ${Ue}px`,fontSize:Ie,lineHeight:se,borderRadius:st}},dh=w=>({padding:`${w.inputPaddingVerticalSM}px ${w.controlPaddingHorizontalSM-1}px`,borderRadius:w.borderRadiusSM}),_l=(w,V)=>{const{componentCls:Ie,colorError:se,colorWarning:st,colorErrorOutline:Ue,colorWarningOutline:Xe,colorErrorBorderHover:Ve,colorWarningBorderHover:ct}=w;return{[`&-status-error:not(${V}-disabled):not(${V}-borderless)${V}`]:{borderColor:se,"&:hover":{borderColor:Ve},"&:focus, &-focused":Object.assign({},yl((0,Xs.TS)(w,{inputBorderActiveColor:se,inputBorderHoverColor:se,controlOutline:Ue}))),[`${Ie}-prefix, ${Ie}-suffix`]:{color:se}},[`&-status-warning:not(${V}-disabled):not(${V}-borderless)${V}`]:{borderColor:st,"&:hover":{borderColor:ct},"&:focus, &-focused":Object.assign({},yl((0,Xs.TS)(w,{inputBorderActiveColor:st,inputBorderHoverColor:st,controlOutline:Xe}))),[`${Ie}-prefix, ${Ie}-suffix`]:{color:st}}}},Us=w=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${w.inputPaddingVertical}px ${w.inputPaddingHorizontal}px`,color:w.colorText,fontSize:w.fontSize,lineHeight:w.lineHeight,backgroundColor:w.colorBgContainer,backgroundImage:"none",borderWidth:w.lineWidth,borderStyle:w.lineType,borderColor:w.colorBorder,borderRadius:w.borderRadius,transition:`all ${w.motionDurationMid}`},jf(w.colorTextPlaceholder)),{"&:hover":Object.assign({},Mu(w)),"&:focus, &-focused":Object.assign({},yl(w)),"&-disabled, &[disabled]":Object.assign({},lc(w)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:w.controlHeight,lineHeight:w.lineHeight,verticalAlign:"bottom",transition:`all ${w.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},Lc(w)),"&-sm":Object.assign({},dh(w)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),th=w=>{const{componentCls:V,antCls:Ie}=w;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:w.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${V}, &-lg > ${V}-group-addon`]:Object.assign({},Lc(w)),[`&-sm ${V}, &-sm > ${V}-group-addon`]:Object.assign({},dh(w)),[`&-lg ${Ie}-select-single ${Ie}-select-selector`]:{height:w.controlHeightLG},[`&-sm ${Ie}-select-single ${Ie}-select-selector`]:{height:w.controlHeightSM},[`> ${V}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${V}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${w.inputPaddingHorizontal}px`,color:w.colorText,fontWeight:"normal",fontSize:w.fontSize,textAlign:"center",backgroundColor:w.colorFillAlter,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,borderRadius:w.borderRadius,transition:`all ${w.motionDurationSlow}`,lineHeight:1,[`${Ie}-select`]:{margin:`-${w.inputPaddingVertical+1}px -${w.inputPaddingHorizontal}px`,[`&${Ie}-select-single:not(${Ie}-select-customize-input)`]:{[`${Ie}-select-selector`]:{backgroundColor:"inherit",border:`${w.lineWidth}px ${w.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Ie}-select-selector`]:{color:w.colorPrimary}}},[`${Ie}-cascader-picker`]:{margin:`-9px -${w.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${Ie}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${V}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${V}-search-with-button &`]:{zIndex:0}}},[`> ${V}:first-child, ${V}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Ie}-select ${Ie}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${V}-affix-wrapper`]:{[`&:not(:first-child) ${V}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${V}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${V}:last-child, ${V}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Ie}-select ${Ie}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${V}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${V}-search &`]:{borderStartStartRadius:w.borderRadius,borderEndStartRadius:w.borderRadius}},[`&:not(:first-child), ${V}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${V}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,bs.dF)()),{[`${V}-group-addon, ${V}-group-wrap, > ${V}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:w.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`& > ${V}-affix-wrapper`]:{display:"inline-flex"},[`& > ${Ie}-picker-range`]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-w.lineWidth,borderInlineEndWidth:w.lineWidth},[`${V}`]:{float:"none"},[`& > ${Ie}-select > ${Ie}-select-selector,
      & > ${Ie}-select-auto-complete ${V},
      & > ${Ie}-cascader-picker ${V},
      & > ${V}-group-wrapper ${V}`]:{borderInlineEndWidth:w.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Ie}-select-focused`]:{zIndex:1},[`& > ${Ie}-select > ${Ie}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Ie}-select:first-child > ${Ie}-select-selector,
      & > ${Ie}-select-auto-complete:first-child ${V},
      & > ${Ie}-cascader-picker:first-child ${V}`]:{borderStartStartRadius:w.borderRadius,borderEndStartRadius:w.borderRadius},[`& > *:last-child,
      & > ${Ie}-select:last-child > ${Ie}-select-selector,
      & > ${Ie}-cascader-picker:last-child ${V},
      & > ${Ie}-cascader-picker-focused:last-child ${V}`]:{borderInlineEndWidth:w.lineWidth,borderStartEndRadius:w.borderRadius,borderEndEndRadius:w.borderRadius},[`& > ${Ie}-select-auto-complete ${V}`]:{verticalAlign:"top"},[`${V}-group-wrapper + ${V}-group-wrapper`]:{marginInlineStart:-w.lineWidth,[`${V}-affix-wrapper`]:{borderRadius:0}},[`${V}-group-wrapper:not(:last-child)`]:{[`&${V}-search > ${V}-group`]:{[`& > ${V}-group-addon > ${V}-search-button`]:{borderRadius:0},[`& > ${V}`]:{borderStartStartRadius:w.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:w.borderRadius}}}})}},Df=w=>{const{componentCls:V,controlHeightSM:Ie,lineWidth:se}=w,st=16,Ue=(Ie-se*2-st)/2;return{[V]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,bs.Wf)(w)),Us(w)),_l(w,V)),{'&[type="color"]':{height:w.controlHeight,[`&${V}-lg`]:{height:w.controlHeightLG},[`&${V}-sm`]:{height:Ie,paddingTop:Ue,paddingBottom:Ue}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},Cf=w=>{const{componentCls:V}=w;return{[`${V}-clear-icon`]:{margin:0,color:w.colorTextQuaternary,fontSize:w.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${w.motionDurationSlow}`,"&:hover":{color:w.colorTextTertiary},"&:active":{color:w.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${w.inputAffixPadding}px`}}}},lf=w=>{const{componentCls:V,inputAffixPadding:Ie,colorTextDescription:se,motionDurationSlow:st,colorIcon:Ue,colorIconHover:Xe,iconCls:Ve}=w;return{[`${V}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Us(w)),{display:"inline-flex",[`&:not(${V}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},Mu(w)),{zIndex:1,[`${V}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${V}[disabled]`]:{background:"transparent"}},[`> input${V}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&:focus":{boxShadow:"none !important"}},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${V}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:w.paddingXS}},"&-show-count-suffix":{color:se},"&-show-count-has-suffix":{marginInlineEnd:w.paddingXXS},"&-prefix":{marginInlineEnd:Ie},"&-suffix":{marginInlineStart:Ie}}}),Cf(w)),{[`${Ve}${V}-password-icon`]:{color:Ue,cursor:"pointer",transition:`all ${st}`,"&:hover":{color:Xe}}}),_l(w,`${V}-affix-wrapper`))}},gd=w=>{const{componentCls:V,colorError:Ie,colorWarning:se,borderRadiusLG:st,borderRadiusSM:Ue}=w;return{[`${V}-group`]:Object.assign(Object.assign(Object.assign({},(0,bs.Wf)(w)),th(w)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${V}-group-addon`]:{borderRadius:st}},"&-sm":{[`${V}-group-addon`]:{borderRadius:Ue}},"&-status-error":{[`${V}-group-addon`]:{color:Ie,borderColor:Ie}},"&-status-warning":{[`${V}-group-addon`]:{color:se,borderColor:se}},"&-disabled":{[`${V}-group-addon`]:Object.assign({},lc(w))}}})}},Kh=w=>{const{componentCls:V,antCls:Ie}=w,se=`${V}-search`;return{[se]:{[`${V}`]:{"&:hover, &:focus":{borderColor:w.colorPrimaryHover,[`+ ${V}-group-addon ${se}-button:not(${Ie}-btn-primary)`]:{borderInlineStartColor:w.colorPrimaryHover}}},[`${V}-affix-wrapper`]:{borderRadius:0},[`${V}-lg`]:{lineHeight:w.lineHeightLG-2e-4},[`> ${V}-group`]:{[`> ${V}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${se}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:w.borderRadius,borderEndEndRadius:w.borderRadius,borderEndStartRadius:0},[`${se}-button:not(${Ie}-btn-primary)`]:{color:w.colorTextDescription,"&:hover":{color:w.colorPrimaryHover},"&:active":{color:w.colorPrimaryActive},[`&${Ie}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${se}-button`]:{height:w.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${se}-button`]:{height:w.controlHeightLG},[`&-small ${se}-button`]:{height:w.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${V}-compact-item`]:{[`&:not(${V}-compact-last-item)`]:{[`${V}-group-addon`]:{[`${V}-search-button`]:{marginInlineEnd:-w.lineWidth,borderRadius:0}}},[`&:not(${V}-compact-first-item)`]:{[`${V},${V}-affix-wrapper`]:{borderRadius:0}},[`> ${V}-group-addon ${V}-search-button,
        > ${V},
        ${V}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${V}-affix-wrapper-focused`]:{zIndex:2}}}}};function yc(w){return(0,Xs.TS)(w,{inputAffixPadding:w.paddingXXS,inputPaddingVertical:Math.max(Math.round((w.controlHeight-w.fontSize*w.lineHeight)/2*10)/10-w.lineWidth,3),inputPaddingVerticalLG:Math.ceil((w.controlHeightLG-w.fontSizeLG*w.lineHeightLG)/2*10)/10-w.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((w.controlHeightSM-w.fontSize*w.lineHeight)/2*10)/10-w.lineWidth,0),inputPaddingHorizontal:w.paddingSM-w.lineWidth,inputPaddingHorizontalSM:w.paddingXS-w.lineWidth,inputPaddingHorizontalLG:w.controlPaddingHorizontal-w.lineWidth,inputBorderHoverColor:w.colorPrimaryHover,inputBorderActiveColor:w.colorPrimaryHover})}const Eh=w=>{const{componentCls:V,paddingLG:Ie}=w,se=`${V}-textarea`;return{[se]:{position:"relative","&-show-count":{[`> ${V}`]:{height:"100%"},[`${V}-data-count`]:{color:w.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none",float:"right",marginBottom:-w.fontSize*w.lineHeight},"&-rtl":{[`${V}-data-count`]:{float:"left"}}},[`&-affix-wrapper${se}-has-feedback`]:{[`${V}`]:{paddingInlineEnd:Ie}},[`&-affix-wrapper${V}-affix-wrapper`]:{padding:0,[`> textarea${V}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${V}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${V}-clear-icon`]:{position:"absolute",insetInlineEnd:w.paddingXS,insetBlockStart:w.paddingXS},[`${se}-suffix`]:{position:"absolute",top:0,insetInlineEnd:w.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}};var cf=(0,gl.Z)("Input",w=>{const V=yc(w);return[Df(V),Eh(V),lf(V),gd(V),Kh(V),(0,Ps.c)(V)]});const Af=w=>{const{componentCls:V}=w;return{[`${V}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${V}-item-link`]:{color:w.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${V}-item-link`]:{color:w.colorTextDisabled,cursor:"not-allowed"}}},[`&${V}-disabled`]:{cursor:"not-allowed",[`${V}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:w.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:w.colorBorder,backgroundColor:w.paginationItemDisabledBgActive,"&:hover, &:active":{backgroundColor:w.paginationItemDisabledBgActive},a:{color:w.paginationItemDisabledColorActive}}},[`${V}-item-link`]:{color:w.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${V}-simple&`]:{backgroundColor:"transparent"}},[`${V}-item-link-icon`]:{opacity:0},[`${V}-item-ellipsis`]:{opacity:1},[`${V}-simple-pager`]:{color:w.colorTextDisabled}}}},_f=w=>{const{componentCls:V}=w;return{[`&${V}-mini ${V}-total-text, &${V}-mini ${V}-simple-pager`]:{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`},[`&${V}-mini ${V}-item`]:{minWidth:w.paginationItemSizeSM,height:w.paginationItemSizeSM,margin:0,lineHeight:`${w.paginationItemSizeSM-2}px`},[`&${V}-mini ${V}-item:not(${V}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent"},[`&${V}-mini ${V}-prev, &${V}-mini ${V}-next`]:{minWidth:w.paginationItemSizeSM,height:w.paginationItemSizeSM,margin:0,lineHeight:`${w.paginationItemSizeSM}px`},[`
    &${V}-mini ${V}-prev ${V}-item-link,
    &${V}-mini ${V}-next ${V}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`}},[`&${V}-mini ${V}-jump-prev, &${V}-mini ${V}-jump-next`]:{height:w.paginationItemSizeSM,marginInlineEnd:0,lineHeight:`${w.paginationItemSizeSM}px`},[`&${V}-mini ${V}-options`]:{marginInlineStart:w.paginationMiniOptionsMarginInlineStart,["&-size-changer"]:{top:w.paginationMiniOptionsSizeChangerTop},["&-quick-jumper"]:{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`,input:Object.assign(Object.assign({},dh(w)),{width:w.paginationMiniQuickJumperInputWidth,height:w.controlHeightSM})}}}},kc=w=>{const{componentCls:V}=w;return{[`
    &${V}-simple ${V}-prev,
    &${V}-simple ${V}-next
    `]:{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`,verticalAlign:"top",[`${V}-item-link`]:{height:w.paginationItemSizeSM,backgroundColor:"transparent",border:0,"&::after":{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`}}},[`&${V}-simple ${V}-simple-pager`]:{display:"inline-block",height:w.paginationItemSizeSM,marginInlineEnd:w.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:w.marginXS,padding:`0 ${w.paginationItemPaddingInline}px`,textAlign:"center",backgroundColor:w.paginationItemInputBg,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,borderRadius:w.borderRadius,outline:"none",transition:`border-color ${w.motionDurationMid}`,color:"inherit","&:hover":{borderColor:w.colorPrimary},"&:focus":{borderColor:w.colorPrimaryHover,boxShadow:`${w.inputOutlineOffset}px 0 ${w.controlOutlineWidth}px ${w.controlOutline}`},"&[disabled]":{color:w.colorTextDisabled,backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,cursor:"not-allowed"}}}}},Ff=w=>{const{componentCls:V}=w;return{[`${V}-jump-prev, ${V}-jump-next`]:{outline:0,[`${V}-item-container`]:{position:"relative",[`${V}-item-link-icon`]:{color:w.colorPrimary,fontSize:w.fontSizeSM,opacity:0,transition:`all ${w.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${V}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:w.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:w.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:w.paginationEllipsisTextIndent,opacity:1,transition:`all ${w.motionDurationMid}`}},"&:hover":{[`${V}-item-link-icon`]:{opacity:1},[`${V}-item-ellipsis`]:{opacity:0}},"&:focus-visible":Object.assign({[`${V}-item-link-icon`]:{opacity:1},[`${V}-item-ellipsis`]:{opacity:0}},(0,bs.oN)(w))},[`
    ${V}-prev,
    ${V}-jump-prev,
    ${V}-jump-next
    `]:{marginInlineEnd:w.marginXS},[`
    ${V}-prev,
    ${V}-next,
    ${V}-jump-prev,
    ${V}-jump-next
    `]:{display:"inline-block",minWidth:w.paginationItemSize,height:w.paginationItemSize,color:w.colorText,fontFamily:w.paginationFontFamily,lineHeight:`${w.paginationItemSize}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:w.borderRadius,cursor:"pointer",transition:`all ${w.motionDurationMid}`},[`${V}-prev, ${V}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:w.colorText,cursor:"pointer",userSelect:"none"},[`${V}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:w.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${w.lineWidth}px ${w.lineType} transparent`,borderRadius:w.borderRadius,outline:"none",transition:`border ${w.motionDurationMid}`},[`&:focus-visible ${V}-item-link`]:Object.assign({},(0,bs.oN)(w)),[`&:hover ${V}-item-link`]:{backgroundColor:w.colorBgTextHover},[`&:active ${V}-item-link`]:{backgroundColor:w.colorBgTextActive},[`&${V}-disabled:hover`]:{[`${V}-item-link`]:{backgroundColor:"transparent"}}},[`${V}-slash`]:{marginInlineEnd:w.paginationSlashMarginInlineEnd,marginInlineStart:w.paginationSlashMarginInlineStart},[`${V}-options`]:{display:"inline-block",marginInlineStart:w.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:w.controlHeight,marginInlineStart:w.marginXS,lineHeight:`${w.controlHeight}px`,verticalAlign:"top",input:Object.assign(Object.assign({},Us(w)),{width:w.controlHeightLG*1.25,height:w.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:w.marginXS,marginInlineEnd:w.marginXS})}}}},Zl=w=>{const{componentCls:V}=w;return{[`${V}-item`]:Object.assign(Object.assign({display:"inline-block",minWidth:w.paginationItemSize,height:w.paginationItemSize,marginInlineEnd:w.marginXS,fontFamily:w.paginationFontFamily,lineHeight:`${w.paginationItemSize-2}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${w.lineWidth}px ${w.lineType} transparent`,borderRadius:w.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${w.paginationItemPaddingInline}px`,color:w.colorText,transition:"none","&:hover":{textDecoration:"none"}},[`&:not(${V}-item-active)`]:{"&:hover":{transition:`all ${w.motionDurationMid}`,backgroundColor:w.colorBgTextHover},"&:active":{backgroundColor:w.colorBgTextActive}}},(0,bs.Qy)(w)),{"&-active":{fontWeight:w.paginationFontWeightActive,backgroundColor:w.paginationItemBgActive,borderColor:w.colorPrimary,a:{color:w.colorPrimary},"&:hover":{borderColor:w.colorPrimaryHover},"&:hover a":{color:w.colorPrimaryHover}}})}},Dc=w=>{const{componentCls:V}=w;return{[V]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,bs.Wf)(w)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${V}-total-text`]:{display:"inline-block",height:w.paginationItemSize,marginInlineEnd:w.marginXS,lineHeight:`${w.paginationItemSize-2}px`,verticalAlign:"middle"}}),Zl(w)),Ff(w)),kc(w)),_f(w)),Af(w)),{[`@media only screen and (max-width: ${w.screenLG}px)`]:{[`${V}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${w.screenSM}px)`]:{[`${V}-options`]:{display:"none"}}}),[`&${w.componentCls}-rtl`]:{direction:"rtl"}}},ad=w=>{const{componentCls:V}=w;return{[`${V}${V}-disabled`]:{"&, &:hover":{[`${V}-item-link`]:{borderColor:w.colorBorder}},"&:focus-visible":{[`${V}-item-link`]:{borderColor:w.colorBorder}},[`${V}-item, ${V}-item-link`]:{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,[`&:hover:not(${V}-item-active)`]:{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,a:{color:w.colorTextDisabled}},[`&${V}-item-active`]:{backgroundColor:w.paginationItemDisabledBgActive}},[`${V}-prev, ${V}-next`]:{"&:hover button":{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,color:w.colorTextDisabled},[`${V}-item-link`]:{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder}}},[V]:{[`${V}-prev, ${V}-next`]:{"&:hover button":{borderColor:w.colorPrimaryHover,backgroundColor:w.paginationItemBg},[`${V}-item-link`]:{backgroundColor:w.paginationItemLinkBg,borderColor:w.colorBorder},[`&:hover ${V}-item-link`]:{borderColor:w.colorPrimary,backgroundColor:w.paginationItemBg,color:w.colorPrimary},[`&${V}-disabled`]:{[`${V}-item-link`]:{borderColor:w.colorBorder,color:w.colorTextDisabled}}},[`${V}-item`]:{backgroundColor:w.paginationItemBg,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,[`&:hover:not(${V}-item-active)`]:{borderColor:w.colorPrimary,backgroundColor:w.paginationItemBg,a:{color:w.colorPrimary}},"&-active":{borderColor:w.colorPrimary}}}}};var rh=(0,gl.Z)("Pagination",w=>{const V=(0,Xs.TS)(w,{paginationItemSize:w.controlHeight,paginationFontFamily:w.fontFamily,paginationItemBg:w.colorBgContainer,paginationItemBgActive:w.colorBgContainer,paginationFontWeightActive:w.fontWeightStrong,paginationItemSizeSM:w.controlHeightSM,paginationItemInputBg:w.colorBgContainer,paginationMiniOptionsSizeChangerTop:0,paginationItemDisabledBgActive:w.controlItemBgActiveDisabled,paginationItemDisabledColorActive:w.colorTextDisabled,paginationItemLinkBg:w.colorBgContainer,inputOutlineOffset:"0 0",paginationMiniOptionsMarginInlineStart:w.marginXXS/2,paginationMiniQuickJumperInputWidth:w.controlHeightLG*1.1,paginationItemPaddingInline:w.marginXXS*1.5,paginationEllipsisLetterSpacing:w.marginXXS/2,paginationSlashMarginInlineStart:w.marginXXS,paginationSlashMarginInlineEnd:w.marginSM,paginationEllipsisTextIndent:"0.13em"},yc(w));return[Dc(V),w.wireframe&&ad(V)]}),od=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie},Gs=w=>{var{prefixCls:V,selectPrefixCls:Ie,className:se,rootClassName:st,size:Ue,locale:Xe,selectComponentClass:Ve,responsive:ct,showSizeChanger:Ct}=w,Bt=od(w,["prefixCls","selectPrefixCls","className","rootClassName","size","locale","selectComponentClass","responsive","showSizeChanger"]);const{xs:kt}=Ei(ct),{getPrefixCls:Jt,direction:Ft,pagination:rr={}}=v.useContext(er.E_),Xt=Jt("pagination",V),[pr,yr]=rh(Xt),Ur=Ct!=null?Ct:rr.showSizeChanger,xn=()=>{const mn=v.createElement("span",{className:`${Xt}-item-ellipsis`},"\u2022\u2022\u2022");let Mn=v.createElement("button",{className:`${Xt}-item-link`,type:"button",tabIndex:-1},v.createElement(At,null)),Pn=v.createElement("button",{className:`${Xt}-item-link`,type:"button",tabIndex:-1},v.createElement(Ke.Z,null)),Gn=v.createElement("a",{className:`${Xt}-item-link`},v.createElement("div",{className:`${Xt}-item-container`},v.createElement(Kn,{className:`${Xt}-item-link-icon`}),mn)),ti=v.createElement("a",{className:`${Xt}-item-link`},v.createElement("div",{className:`${Xt}-item-container`},v.createElement(aa,{className:`${Xt}-item-link-icon`}),mn));return Ft==="rtl"&&([Mn,Pn]=[Pn,Mn],[Gn,ti]=[ti,Gn]),{prevIcon:Mn,nextIcon:Pn,jumpPrevIcon:Gn,jumpNextIcon:ti}};return v.createElement(Ao.Z,{componentName:"Pagination",defaultLocale:Il.Z},mn=>{const Mn=Object.assign(Object.assign({},mn),Xe),Pn=Ue==="small"||!!(kt&&!Ue&&ct),Gn=Jt("select",Ie),ti=re()({[`${Xt}-mini`]:Pn,[`${Xt}-rtl`]:Ft==="rtl"},se,st,yr);return pr(v.createElement(Js,Object.assign({},xn(),Bt,{prefixCls:Xt,selectPrefixCls:Gn,className:ti,selectComponentClass:Ve||(Pn?gs:Ws),locale:Mn,showSizeChanger:Ur})))})},Kl=Gs,dl=g(75081),su=g(75164);function Fc(w,V,Ie,se){const st=Ie-V;return w/=se/2,w<1?st/2*w*w*w+V:st/2*((w-=2)*w*w+2)+V}function tc(w){return w!=null&&w===w.window}function Tf(w,V){var Ie,se;if(typeof window=="undefined")return 0;const st=V?"scrollTop":"scrollLeft";let Ue=0;return tc(w)?Ue=w[V?"pageYOffset":"pageXOffset"]:w instanceof Document?Ue=w.documentElement[st]:(w instanceof HTMLElement||w)&&(Ue=w[st]),w&&!tc(w)&&typeof Ue!="number"&&(Ue=(se=((Ie=w.ownerDocument)!==null&&Ie!==void 0?Ie:w).documentElement)===null||se===void 0?void 0:se[st]),Ue}function _c(w){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{getContainer:Ie=()=>window,callback:se,duration:st=450}=V,Ue=Ie(),Xe=Tf(Ue,!0),Ve=Date.now(),ct=()=>{const Bt=Date.now()-Ve,kt=Fc(Bt>st?st:Bt,Xe,w,st);tc(Ue)?Ue.scrollTo(window.pageXOffset,kt):Ue instanceof Document||Ue.constructor.name==="HTMLDocument"?Ue.documentElement.scrollTop=kt:Ue.scrollTop=kt,Bt<st?(0,su.Z)(ct):typeof se=="function"&&se()};(0,su.Z)(ct)}function Hl(w){return function(Ie){let{prefixCls:se,onExpand:st,record:Ue,expanded:Xe,expandable:Ve}=Ie;const ct=`${se}-row-expand-icon`;return v.createElement("button",{type:"button",onClick:Ct=>{st(Ue,Ct),Ct.stopPropagation()},className:re()(ct,{[`${ct}-spaced`]:!Ve,[`${ct}-expanded`]:Ve&&Xe,[`${ct}-collapsed`]:Ve&&!Xe}),"aria-label":Xe?w.collapse:w.expand,"aria-expanded":Xe})}}var ff=Hl;function xc(w,V){return"key"in w&&w.key!==void 0&&w.key!==null?w.key:w.dataIndex?Array.isArray(w.dataIndex)?w.dataIndex.join("."):w.dataIndex:V}function Yh(w,V){return V?`${V}-${w}`:`${w}`}function Uh(w,V){return typeof w=="function"?w(V):w}function Gc(w,V){const Ie=Uh(w,V);return Object.prototype.toString.call(Ie)==="[object Object]"?"":Ie}var Mf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},nh=Mf,qn=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:nh}))};qn.displayName="FilterFilled";var ca=v.forwardRef(qn),$i=g(18662),$o=g(50132),lo=g(65223),Es=g(51222);const tl=new Es.E4("antCheckboxEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),al=w=>{const{checkboxCls:V}=w,Ie=`${V}-wrapper`;return[{[`${V}-group`]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{display:"inline-flex"}),[Ie]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${Ie}`]:{marginInlineStart:w.marginXS},[`&${Ie}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[V]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{top:"0.2em",position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",[`${V}-input`]:{position:"absolute",inset:0,zIndex:1,width:"100%",height:"100%",cursor:"pointer",opacity:0,[`&:focus-visible + ${V}-inner`]:Object.assign({},(0,bs.oN)(w))},[`${V}-inner`]:{boxSizing:"border-box",position:"relative",top:0,insetInlineStart:0,display:"block",width:w.checkboxSize,height:w.checkboxSize,direction:"ltr",backgroundColor:w.colorBgContainer,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,borderRadius:w.borderRadiusSM,borderCollapse:"separate",transition:`all ${w.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:w.checkboxSize/14*5,height:w.checkboxSize/14*8,border:`${w.lineWidthBold}px solid ${w.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${w.motionDurationFast} ${w.motionEaseInBack}, opacity ${w.motionDurationFast}`}},"& + span":{paddingInlineStart:w.paddingXS,paddingInlineEnd:w.paddingXS}})},{[V]:{"&-indeterminate":{[`${V}-inner`]:{"&:after":{top:"50%",insetInlineStart:"50%",width:w.fontSizeLG/2,height:w.fontSizeLG/2,backgroundColor:w.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}}}}},{[`${Ie}:hover ${V}:after`]:{visibility:"visible"},[`
        ${Ie}:not(${Ie}-disabled),
        ${V}:not(${V}-disabled)
      `]:{[`&:hover ${V}-inner`]:{borderColor:w.colorPrimary}},[`${Ie}:not(${Ie}-disabled)`]:{[`&:hover ${V}-checked:not(${V}-disabled) ${V}-inner`]:{backgroundColor:w.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${V}-checked:not(${V}-disabled):after`]:{borderColor:w.colorPrimaryHover}}},{[`${V}-checked`]:{[`${V}-inner`]:{backgroundColor:w.colorPrimary,borderColor:w.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${w.motionDurationMid} ${w.motionEaseOutBack} ${w.motionDurationFast}`}},"&:after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderRadius:w.borderRadiusSM,visibility:"hidden",border:`${w.lineWidthBold}px solid ${w.colorPrimary}`,animationName:tl,animationDuration:w.motionDurationSlow,animationTimingFunction:"ease-in-out",animationFillMode:"backwards",content:'""',transition:`all ${w.motionDurationSlow}`}},[`
        ${Ie}-checked:not(${Ie}-disabled),
        ${V}-checked:not(${V}-disabled)
      `]:{[`&:hover ${V}-inner`]:{backgroundColor:w.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${V}:after`]:{borderColor:w.colorPrimaryHover}}},{[`${Ie}-disabled`]:{cursor:"not-allowed"},[`${V}-disabled`]:{[`&, ${V}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${V}-inner`]:{background:w.colorBgContainerDisabled,borderColor:w.colorBorder,"&:after":{borderColor:w.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:w.colorTextDisabled},[`&${V}-indeterminate ${V}-inner::after`]:{background:w.colorTextDisabled}}}]};function Tl(w,V){const Ie=(0,Xs.TS)(V,{checkboxCls:`.${w}`,checkboxSize:V.controlInteractiveSize});return[al(Ie)]}var Lh=(0,gl.Z)("Checkbox",(w,V)=>{let{prefixCls:Ie}=V;return[Tl(Ie,w)]}),xf=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie};const qh=v.createContext(null),$h=(w,V)=>{var{defaultValue:Ie,children:se,options:st=[],prefixCls:Ue,className:Xe,rootClassName:Ve,style:ct,onChange:Ct}=w,Bt=xf(w,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]);const{getPrefixCls:kt,direction:Jt}=v.useContext(er.E_),[Ft,rr]=v.useState(Bt.value||Ie||[]),[Xt,pr]=v.useState([]);v.useEffect(()=>{"value"in Bt&&rr(Bt.value||[])},[Bt.value]);const yr=()=>st.map(I=>typeof I=="string"||typeof I=="number"?{label:I,value:I}:I),Ur=I=>{pr(T=>T.filter(H=>H!==I))},xn=I=>{pr(T=>[].concat((0,Qe.Z)(T),[I]))},mn=I=>{const T=Ft.indexOf(I.value),H=(0,Qe.Z)(Ft);T===-1?H.push(I.value):H.splice(T,1),"value"in Bt||rr(H);const te=yr();Ct==null||Ct(H.filter(Ae=>Xt.includes(Ae)).sort((Ae,qe)=>{const Tt=te.findIndex(vr=>vr.value===Ae),Wt=te.findIndex(vr=>vr.value===qe);return Tt-Wt}))},Mn=kt("checkbox",Ue),Pn=`${Mn}-group`,[Gn,ti]=Lh(Mn),ii=(0,ur.Z)(Bt,["value","disabled"]);st&&st.length>0&&(se=yr().map(I=>v.createElement(ao,{prefixCls:Mn,key:I.value.toString(),disabled:"disabled"in I?I.disabled:Bt.disabled,value:I.value,checked:Ft.includes(I.value),onChange:I.onChange,className:`${Pn}-item`,style:I.style},I.label)));const b={toggleOption:mn,value:Ft,disabled:Bt.disabled,name:Bt.name,registerValue:xn,cancelValue:Ur},A=re()(Pn,{[`${Pn}-rtl`]:Jt==="rtl"},Xe,Ve,ti);return Gn(v.createElement("div",Object.assign({className:A,style:ct},ii,{ref:V}),v.createElement(qh.Provider,{value:b},se)))},Ul=v.forwardRef($h);var Rl=v.memo(Ul),ol=g(98866),uu=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie};const Bc=(w,V)=>{var Ie,{prefixCls:se,className:st,rootClassName:Ue,children:Xe,indeterminate:Ve=!1,style:ct,onMouseEnter:Ct,onMouseLeave:Bt,skipGroup:kt=!1,disabled:Jt}=w,Ft=uu(w,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]);const{getPrefixCls:rr,direction:Xt}=v.useContext(er.E_),pr=v.useContext(qh),{isFormItemInput:yr}=v.useContext(lo.aM),Ur=v.useContext(ol.Z),xn=(Ie=(pr==null?void 0:pr.disabled)||Jt)!==null&&Ie!==void 0?Ie:Ur,mn=v.useRef(Ft.value);v.useEffect(()=>{pr==null||pr.registerValue(Ft.value)},[]),v.useEffect(()=>{if(!kt)return Ft.value!==mn.current&&(pr==null||pr.cancelValue(mn.current),pr==null||pr.registerValue(Ft.value),mn.current=Ft.value),()=>pr==null?void 0:pr.cancelValue(Ft.value)},[Ft.value]);const Mn=rr("checkbox",se),[Pn,Gn]=Lh(Mn),ti=Object.assign({},Ft);pr&&!kt&&(ti.onChange=function(){Ft.onChange&&Ft.onChange.apply(Ft,arguments),pr.toggleOption&&pr.toggleOption({label:Xe,value:Ft.value})},ti.name=pr.name,ti.checked=pr.value.includes(Ft.value));const ii=re()({[`${Mn}-wrapper`]:!0,[`${Mn}-rtl`]:Xt==="rtl",[`${Mn}-wrapper-checked`]:ti.checked,[`${Mn}-wrapper-disabled`]:xn,[`${Mn}-wrapper-in-form-item`]:yr},st,Ue,Gn),b=re()({[`${Mn}-indeterminate`]:Ve},Gn),A=Ve?"mixed":void 0;return Pn(v.createElement("label",{className:ii,style:ct,onMouseEnter:Ct,onMouseLeave:Bt},v.createElement($o.Z,Object.assign({"aria-checked":A},ti,{prefixCls:Mn,className:b,disabled:xn,ref:V})),Xe!==void 0&&v.createElement("span",null,Xe)))};var ao=v.forwardRef(Bc);const Ml=ao;Ml.Group=Rl,Ml.__ANT_CHECKBOX=!0;var Hf=Ml,fl=g(23672),Vl=g(32983),Ll=g(82610),jh=g(76529),qa=g(33573),Yl=g(97326),Vf=g(15105),ih=v.createContext(null),Vu=function(V){for(var Ie=V.prefixCls,se=V.level,st=V.isStart,Ue=V.isEnd,Xe="".concat(Ie,"-indent-unit"),Ve=[],ct=0;ct<se;ct+=1){var Ct;Ve.push(v.createElement("span",{key:ct,className:re()(Xe,(Ct={},(0,ye.Z)(Ct,"".concat(Xe,"-start"),st[ct]),(0,ye.Z)(Ct,"".concat(Xe,"-end"),Ue[ct]),Ct))}))}return v.createElement("span",{"aria-hidden":"true",className:"".concat(Ie,"-indent")},Ve)},hf=v.memo(Vu),Hh=["children"];function bc(w,V){return w!=null?w:V}function Ec(w){var V=w||{},Ie=V.title,se=V._title,st=V.key,Ue=V.children,Xe=Ie||"title";return{title:Xe,_title:se||[Xe],key:st||"key",children:Ue||"children"}}function ah(w,V){var Ie=new Map;function se(st){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(st||[]).forEach(function(Xe){var Ve=Xe[V.key],ct=Xe[V.children];warning(Ve!=null,"Tree node must have a certain key: [".concat(Ue).concat(Ve,"]"));var Ct=String(Ve);warning(!Ie.has(Ct)||Ve===null||Ve===void 0,"Same 'key' exist in the Tree: ".concat(Ct)),Ie.set(Ct,!0),se(ct,"".concat(Ue).concat(Ct," > "))})}se(w)}function Wc(w){function V(Ie){var se=(0,Nn.Z)(Ie);return se.map(function(st){if(!Jl(st))return(0,ge.ZP)(!st,"Tree/TreeNode can only accept TreeNode as children."),null;var Ue=st.key,Xe=st.props,Ve=Xe.children,ct=(0,Rt.Z)(Xe,Hh),Ct=(0,$e.Z)({key:Ue},ct),Bt=V(Ve);return Bt.length&&(Ct.children=Bt),Ct}).filter(function(st){return st})}return V(w)}function kh(w,V,Ie){var se=Ec(Ie),st=se._title,Ue=se.key,Xe=se.children,Ve=new Set(V===!0?[]:V),ct=[];function Ct(Bt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Bt.map(function(Jt,Ft){for(var rr=nu(kt?kt.pos:"0",Ft),Xt=bc(Jt[Ue],rr),pr,yr=0;yr<st.length;yr+=1){var Ur=st[yr];if(Jt[Ur]!==void 0){pr=Jt[Ur];break}}var xn=(0,$e.Z)((0,$e.Z)({},(0,ur.Z)(Jt,[].concat((0,Qe.Z)(st),[Ue,Xe]))),{},{title:pr,key:Xt,parent:kt,pos:rr,children:null,data:Jt,isStart:[].concat((0,Qe.Z)(kt?kt.isStart:[]),[Ft===0]),isEnd:[].concat((0,Qe.Z)(kt?kt.isEnd:[]),[Ft===Bt.length-1])});return ct.push(xn),V===!0||Ve.has(Xt)?xn.children=Ct(Jt[Xe]||[],xn):xn.children=[],xn})}return Ct(w),ct}function Sc(w,V,Ie){var se={};(0,pe.Z)(Ie)==="object"?se=Ie:se={externalGetKey:Ie},se=se||{};var st=se,Ue=st.childrenPropName,Xe=st.externalGetKey,Ve=st.fieldNames,ct=Ec(Ve),Ct=ct.key,Bt=ct.children,kt=Ue||Bt,Jt;Xe?typeof Xe=="string"?Jt=function(Xt){return Xt[Xe]}:typeof Xe=="function"&&(Jt=function(Xt){return Xe(Xt)}):Jt=function(Xt,pr){return bc(Xt[Ct],pr)};function Ft(rr,Xt,pr,yr){var Ur=rr?rr[kt]:w,xn=rr?nu(pr.pos,Xt):"0",mn=rr?[].concat((0,Qe.Z)(yr),[rr]):[];if(rr){var Mn=Jt(rr,xn),Pn={node:rr,index:Xt,pos:xn,key:Mn,parentPos:pr.node?pr.pos:null,level:pr.level+1,nodes:mn};V(Pn)}Ur&&Ur.forEach(function(Gn,ti){Ft(Gn,ti,{node:rr,pos:xn,level:pr?pr.level+1:-1},mn)})}Ft(null)}function Vh(w){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=V.initWrapper,se=V.processEntity,st=V.onProcessFinished,Ue=V.externalGetKey,Xe=V.childrenPropName,Ve=V.fieldNames,ct=arguments.length>2?arguments[2]:void 0,Ct=Ue||ct,Bt={},kt={},Jt={posEntities:Bt,keyEntities:kt};return Ie&&(Jt=Ie(Jt)||Jt),Sc(w,function(Ft){var rr=Ft.node,Xt=Ft.index,pr=Ft.pos,yr=Ft.key,Ur=Ft.parentPos,xn=Ft.level,mn=Ft.nodes,Mn={node:rr,nodes:mn,index:Xt,key:yr,pos:pr,level:xn},Pn=bc(yr,pr);Bt[pr]=Mn,kt[Pn]=Mn,Mn.parent=Bt[Ur],Mn.parent&&(Mn.parent.children=Mn.parent.children||[],Mn.parent.children.push(Mn)),se&&se(Mn,Jt)},{externalGetKey:Ct,childrenPropName:Xe,fieldNames:Ve}),st&&st(Jt),Jt}function ql(w,V){var Ie=V.expandedKeys,se=V.selectedKeys,st=V.loadedKeys,Ue=V.loadingKeys,Xe=V.checkedKeys,Ve=V.halfCheckedKeys,ct=V.dragOverNodeKey,Ct=V.dropPosition,Bt=V.keyEntities,kt=Bt[w],Jt={eventKey:w,expanded:Ie.indexOf(w)!==-1,selected:se.indexOf(w)!==-1,loaded:st.indexOf(w)!==-1,loading:Ue.indexOf(w)!==-1,checked:Xe.indexOf(w)!==-1,halfChecked:Ve.indexOf(w)!==-1,pos:String(kt?kt.pos:""),dragOver:ct===w&&Ct===0,dragOverGapTop:ct===w&&Ct===-1,dragOverGapBottom:ct===w&&Ct===1};return Jt}function gu(w){var V=w.data,Ie=w.expanded,se=w.selected,st=w.checked,Ue=w.loaded,Xe=w.loading,Ve=w.halfChecked,ct=w.dragOver,Ct=w.dragOverGapTop,Bt=w.dragOverGapBottom,kt=w.pos,Jt=w.active,Ft=w.eventKey,rr=(0,$e.Z)((0,$e.Z)({},V),{},{expanded:Ie,selected:se,checked:st,loaded:Ue,loading:Xe,halfChecked:Ve,dragOver:ct,dragOverGapTop:Ct,dragOverGapBottom:Bt,pos:kt,active:Jt,key:Ft});return"props"in rr||Object.defineProperty(rr,"props",{get:function(){return(0,ge.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),w}}),rr}var Ks=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Gf="open",Bf="close",eu="---",Pl=function(w){(0,Wr.Z)(Ie,w);var V=(0,In.Z)(Ie);function Ie(){var se;(0,nr.Z)(this,Ie);for(var st=arguments.length,Ue=new Array(st),Xe=0;Xe<st;Xe++)Ue[Xe]=arguments[Xe];return se=V.call.apply(V,[this].concat(Ue)),se.state={dragNodeHighlight:!1},se.selectHandle=void 0,se.onSelectorClick=function(Ve){var ct=se.props.context.onNodeClick;ct(Ve,gu(se.props)),se.isSelectable()?se.onSelect(Ve):se.onCheck(Ve)},se.onSelectorDoubleClick=function(Ve){var ct=se.props.context.onNodeDoubleClick;ct(Ve,gu(se.props))},se.onSelect=function(Ve){if(!se.isDisabled()){var ct=se.props.context.onNodeSelect;Ve.preventDefault(),ct(Ve,gu(se.props))}},se.onCheck=function(Ve){if(!se.isDisabled()){var ct=se.props,Ct=ct.disableCheckbox,Bt=ct.checked,kt=se.props.context.onNodeCheck;if(!(!se.isCheckable()||Ct)){Ve.preventDefault();var Jt=!Bt;kt(Ve,gu(se.props),Jt)}}},se.onMouseEnter=function(Ve){var ct=se.props.context.onNodeMouseEnter;ct(Ve,gu(se.props))},se.onMouseLeave=function(Ve){var ct=se.props.context.onNodeMouseLeave;ct(Ve,gu(se.props))},se.onContextMenu=function(Ve){var ct=se.props.context.onNodeContextMenu;ct(Ve,gu(se.props))},se.onDragStart=function(Ve){var ct=se.props.context.onNodeDragStart;Ve.stopPropagation(),se.setState({dragNodeHighlight:!0}),ct(Ve,(0,Yl.Z)(se));try{Ve.dataTransfer.setData("text/plain","")}catch(Ct){}},se.onDragEnter=function(Ve){var ct=se.props.context.onNodeDragEnter;Ve.preventDefault(),Ve.stopPropagation(),ct(Ve,(0,Yl.Z)(se))},se.onDragOver=function(Ve){var ct=se.props.context.onNodeDragOver;Ve.preventDefault(),Ve.stopPropagation(),ct(Ve,(0,Yl.Z)(se))},se.onDragLeave=function(Ve){var ct=se.props.context.onNodeDragLeave;Ve.stopPropagation(),ct(Ve,(0,Yl.Z)(se))},se.onDragEnd=function(Ve){var ct=se.props.context.onNodeDragEnd;Ve.stopPropagation(),se.setState({dragNodeHighlight:!1}),ct(Ve,(0,Yl.Z)(se))},se.onDrop=function(Ve){var ct=se.props.context.onNodeDrop;Ve.preventDefault(),Ve.stopPropagation(),se.setState({dragNodeHighlight:!1}),ct(Ve,(0,Yl.Z)(se))},se.onExpand=function(Ve){var ct=se.props,Ct=ct.loading,Bt=ct.context.onNodeExpand;Ct||Bt(Ve,gu(se.props))},se.setSelectHandle=function(Ve){se.selectHandle=Ve},se.getNodeState=function(){var Ve=se.props.expanded;return se.isLeaf()?null:Ve?Gf:Bf},se.hasChildren=function(){var Ve=se.props.eventKey,ct=se.props.context.keyEntities,Ct=ct[Ve]||{},Bt=Ct.children;return!!(Bt||[]).length},se.isLeaf=function(){var Ve=se.props,ct=Ve.isLeaf,Ct=Ve.loaded,Bt=se.props.context.loadData,kt=se.hasChildren();return ct===!1?!1:ct||!Bt&&!kt||Bt&&Ct&&!kt},se.isDisabled=function(){var Ve=se.props.disabled,ct=se.props.context.disabled;return!!(ct||Ve)},se.isCheckable=function(){var Ve=se.props.checkable,ct=se.props.context.checkable;return!ct||Ve===!1?!1:ct},se.syncLoadData=function(Ve){var ct=Ve.expanded,Ct=Ve.loading,Bt=Ve.loaded,kt=se.props.context,Jt=kt.loadData,Ft=kt.onNodeLoad;Ct||Jt&&ct&&!se.isLeaf()&&!se.hasChildren()&&!Bt&&Ft(gu(se.props))},se.isDraggable=function(){var Ve=se.props,ct=Ve.data,Ct=Ve.context.draggable;return!!(Ct&&(!Ct.nodeDraggable||Ct.nodeDraggable(ct)))},se.renderDragHandler=function(){var Ve=se.props.context,ct=Ve.draggable,Ct=Ve.prefixCls;return ct!=null&&ct.icon?v.createElement("span",{className:"".concat(Ct,"-draggable-icon")},ct.icon):null},se.renderSwitcherIconDom=function(Ve){var ct=se.props.switcherIcon,Ct=se.props.context.switcherIcon,Bt=ct||Ct;return typeof Bt=="function"?Bt((0,$e.Z)((0,$e.Z)({},se.props),{},{isLeaf:Ve})):Bt},se.renderSwitcher=function(){var Ve=se.props.expanded,ct=se.props.context.prefixCls;if(se.isLeaf()){var Ct=se.renderSwitcherIconDom(!0);return Ct!==!1?v.createElement("span",{className:re()("".concat(ct,"-switcher"),"".concat(ct,"-switcher-noop"))},Ct):null}var Bt=re()("".concat(ct,"-switcher"),"".concat(ct,"-switcher_").concat(Ve?Gf:Bf)),kt=se.renderSwitcherIconDom(!1);return kt!==!1?v.createElement("span",{onClick:se.onExpand,className:Bt},kt):null},se.renderCheckbox=function(){var Ve=se.props,ct=Ve.checked,Ct=Ve.halfChecked,Bt=Ve.disableCheckbox,kt=se.props.context.prefixCls,Jt=se.isDisabled(),Ft=se.isCheckable();if(!Ft)return null;var rr=typeof Ft!="boolean"?Ft:null;return v.createElement("span",{className:re()("".concat(kt,"-checkbox"),ct&&"".concat(kt,"-checkbox-checked"),!ct&&Ct&&"".concat(kt,"-checkbox-indeterminate"),(Jt||Bt)&&"".concat(kt,"-checkbox-disabled")),onClick:se.onCheck},rr)},se.renderIcon=function(){var Ve=se.props.loading,ct=se.props.context.prefixCls;return v.createElement("span",{className:re()("".concat(ct,"-iconEle"),"".concat(ct,"-icon__").concat(se.getNodeState()||"docu"),Ve&&"".concat(ct,"-icon_loading"))})},se.renderSelector=function(){var Ve=se.state.dragNodeHighlight,ct=se.props,Ct=ct.title,Bt=ct.selected,kt=ct.icon,Jt=ct.loading,Ft=ct.data,rr=se.props.context,Xt=rr.prefixCls,pr=rr.showIcon,yr=rr.icon,Ur=rr.loadData,xn=rr.titleRender,mn=se.isDisabled(),Mn="".concat(Xt,"-node-content-wrapper"),Pn;if(pr){var Gn=kt||yr;Pn=Gn?v.createElement("span",{className:re()("".concat(Xt,"-iconEle"),"".concat(Xt,"-icon__customize"))},typeof Gn=="function"?Gn(se.props):Gn):se.renderIcon()}else Ur&&Jt&&(Pn=se.renderIcon());var ti;typeof Ct=="function"?ti=Ct(Ft):xn?ti=xn(Ft):ti=Ct;var ii=v.createElement("span",{className:"".concat(Xt,"-title")},ti);return v.createElement("span",{ref:se.setSelectHandle,title:typeof Ct=="string"?Ct:"",className:re()("".concat(Mn),"".concat(Mn,"-").concat(se.getNodeState()||"normal"),!mn&&(Bt||Ve)&&"".concat(Xt,"-node-selected")),onMouseEnter:se.onMouseEnter,onMouseLeave:se.onMouseLeave,onContextMenu:se.onContextMenu,onClick:se.onSelectorClick,onDoubleClick:se.onSelectorDoubleClick},Pn,ii,se.renderDropIndicator())},se.renderDropIndicator=function(){var Ve=se.props,ct=Ve.disabled,Ct=Ve.eventKey,Bt=se.props.context,kt=Bt.draggable,Jt=Bt.dropLevelOffset,Ft=Bt.dropPosition,rr=Bt.prefixCls,Xt=Bt.indent,pr=Bt.dropIndicatorRender,yr=Bt.dragOverNodeKey,Ur=Bt.direction,xn=!!kt,mn=!ct&&xn&&yr===Ct;return mn?pr({dropPosition:Ft,dropLevelOffset:Jt,indent:Xt,prefixCls:rr,direction:Ur}):null},se}return(0,wr.Z)(Ie,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var st=this.props.selectable,Ue=this.props.context.selectable;return typeof st=="boolean"?st:Ue}},{key:"render",value:function(){var st,Ue=this.props,Xe=Ue.eventKey,Ve=Ue.className,ct=Ue.style,Ct=Ue.dragOver,Bt=Ue.dragOverGapTop,kt=Ue.dragOverGapBottom,Jt=Ue.isLeaf,Ft=Ue.isStart,rr=Ue.isEnd,Xt=Ue.expanded,pr=Ue.selected,yr=Ue.checked,Ur=Ue.halfChecked,xn=Ue.loading,mn=Ue.domRef,Mn=Ue.active,Pn=Ue.data,Gn=Ue.onMouseMove,ti=Ue.selectable,ii=(0,Rt.Z)(Ue,Ks),b=this.props.context,A=b.prefixCls,I=b.filterTreeNode,T=b.keyEntities,H=b.dropContainerKey,te=b.dropTargetKey,Ae=b.draggingNodeKey,qe=this.isDisabled(),Tt=(0,ot.Z)(ii,{aria:!0,data:!0}),Wt=T[Xe]||{},vr=Wt.level,Fr=rr[rr.length-1],en=this.isDraggable(),zn=!qe&&en,ei=Ae===Xe,Qn=ti!==void 0?{"aria-selected":!!ti}:void 0;return v.createElement("div",(0,U.Z)({ref:mn,className:re()(Ve,"".concat(A,"-treenode"),(st={},(0,ye.Z)(st,"".concat(A,"-treenode-disabled"),qe),(0,ye.Z)(st,"".concat(A,"-treenode-switcher-").concat(Xt?"open":"close"),!Jt),(0,ye.Z)(st,"".concat(A,"-treenode-checkbox-checked"),yr),(0,ye.Z)(st,"".concat(A,"-treenode-checkbox-indeterminate"),Ur),(0,ye.Z)(st,"".concat(A,"-treenode-selected"),pr),(0,ye.Z)(st,"".concat(A,"-treenode-loading"),xn),(0,ye.Z)(st,"".concat(A,"-treenode-active"),Mn),(0,ye.Z)(st,"".concat(A,"-treenode-leaf-last"),Fr),(0,ye.Z)(st,"".concat(A,"-treenode-draggable"),en),(0,ye.Z)(st,"dragging",ei),(0,ye.Z)(st,"drop-target",te===Xe),(0,ye.Z)(st,"drop-container",H===Xe),(0,ye.Z)(st,"drag-over",!qe&&Ct),(0,ye.Z)(st,"drag-over-gap-top",!qe&&Bt),(0,ye.Z)(st,"drag-over-gap-bottom",!qe&&kt),(0,ye.Z)(st,"filter-node",I&&I(gu(this.props))),st)),style:ct,draggable:zn,"aria-grabbed":ei,onDragStart:zn?this.onDragStart:void 0,onDragEnter:en?this.onDragEnter:void 0,onDragOver:en?this.onDragOver:void 0,onDragLeave:en?this.onDragLeave:void 0,onDrop:en?this.onDrop:void 0,onDragEnd:en?this.onDragEnd:void 0,onMouseMove:Gn},Qn,Tt),v.createElement(hf,{prefixCls:A,level:vr,isStart:Ft,isEnd:rr}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),Ie}(v.Component),Xc=function(V){return v.createElement(ih.Consumer,null,function(Ie){return v.createElement(Pl,(0,U.Z)({},V,{context:Ie}))})};Xc.displayName="TreeNode",Xc.defaultProps={title:eu},Xc.isTreeNode=1;var Nc=Xc,Ql=null;function fc(w,V){if(!w)return[];var Ie=w.slice(),se=Ie.indexOf(V);return se>=0&&Ie.splice(se,1),Ie}function oo(w,V){var Ie=(w||[]).slice();return Ie.indexOf(V)===-1&&Ie.push(V),Ie}function Do(w){return w.split("-")}function nu(w,V){return"".concat(w,"-").concat(V)}function Jl(w){return w&&w.type&&w.type.isTreeNode}function xl(w,V){var Ie=[],se=V[w];function st(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Ue.forEach(function(Xe){var Ve=Xe.key,ct=Xe.children;Ie.push(Ve),st(ct)})}return st(se.children),Ie}function mu(w){if(w.parent){var V=Do(w.pos);return Number(V[V.length-1])===w.parent.children.length-1}return!1}function Ku(w){var V=Do(w.pos);return Number(V[V.length-1])===0}function Kc(w,V,Ie,se,st,Ue,Xe,Ve,ct,Ct){var Bt,kt=w.clientX,Jt=w.clientY,Ft=w.target.getBoundingClientRect(),rr=Ft.top,Xt=Ft.height,pr=(Ct==="rtl"?-1:1)*(((st==null?void 0:st.x)||0)-kt),yr=(pr-12)/se,Ur=Ve[Ie.props.eventKey];if(Jt<rr+Xt/2){var xn=Xe.findIndex(function(te){return te.key===Ur.key}),mn=xn<=0?0:xn-1,Mn=Xe[mn].key;Ur=Ve[Mn]}var Pn=Ur.key,Gn=Ur,ti=Ur.key,ii=0,b=0;if(!ct.includes(Pn))for(var A=0;A<yr&&mu(Ur);A+=1)Ur=Ur.parent,b+=1;var I=V.props.data,T=Ur.node,H=!0;return Ku(Ur)&&Ur.level===0&&Jt<rr+Xt/2&&Ue({dragNode:I,dropNode:T,dropPosition:-1})&&Ur.key===Ie.props.eventKey?ii=-1:(Gn.children||[]).length&&ct.includes(ti)?Ue({dragNode:I,dropNode:T,dropPosition:0})?ii=0:H=!1:b===0?yr>-1.5?Ue({dragNode:I,dropNode:T,dropPosition:1})?ii=1:H=!1:Ue({dragNode:I,dropNode:T,dropPosition:0})?ii=0:Ue({dragNode:I,dropNode:T,dropPosition:1})?ii=1:H=!1:Ue({dragNode:I,dropNode:T,dropPosition:1})?ii=1:H=!1,{dropPosition:ii,dropLevelOffset:b,dropTargetKey:Ur.key,dropTargetPos:Ur.pos,dragOverNodeKey:ti,dropContainerKey:ii===0?null:((Bt=Ur.parent)===null||Bt===void 0?void 0:Bt.key)||null,dropAllowed:H}}function Gh(w,V){if(w){var Ie=V.multiple;return Ie?w.slice():w.length?[w[0]]:w}}var Yu=function(V){return V};function bl(w,V){if(!w)return[];var Ie=V||{},se=Ie.processProps,st=se===void 0?Yu:se,Ue=Array.isArray(w)?w:[w];return Ue.map(function(Xe){var Ve=Xe.children,ct=_objectWithoutProperties(Xe,Ql),Ct=bl(Ve,V);return React.createElement(TreeNode,_extends({key:ct.key},st(ct)),Ct)})}function yd(w){if(!w)return null;var V;if(Array.isArray(w))V={checkedKeys:w,halfCheckedKeys:void 0};else if((0,pe.Z)(w)==="object")V={checkedKeys:w.checked||void 0,halfCheckedKeys:w.halfChecked||void 0};else return(0,ge.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return V}function ph(w,V){var Ie=new Set;function se(st){if(!Ie.has(st)){var Ue=V[st];if(Ue){Ie.add(st);var Xe=Ue.parent,Ve=Ue.node;Ve.disabled||Xe&&se(Xe.key)}}}return(w||[]).forEach(function(st){se(st)}),(0,Qe.Z)(Ie)}function wc(w){if(w==null)throw new TypeError("Cannot destructure "+w)}var Yc=g(73453),kl=g(62874),Dr=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Dl=function(V,Ie){var se=V.className,st=V.style,Ue=V.motion,Xe=V.motionNodes,Ve=V.motionType,ct=V.onMotionStart,Ct=V.onMotionEnd,Bt=V.active,kt=V.treeNodeRequiredProps,Jt=(0,Rt.Z)(V,Dr),Ft=v.useState(!0),rr=(0,c.Z)(Ft,2),Xt=rr[0],pr=rr[1],yr=v.useContext(ih),Ur=yr.prefixCls,xn=v.useRef(!1),mn=function(){xn.current||Ct(),xn.current=!0};return(0,v.useEffect)(function(){Xe&&Ve==="hide"&&Xt&&pr(!1)},[Xe]),(0,v.useEffect)(function(){return Xe&&ct(),function(){Xe&&mn()}},[]),Xe?v.createElement(kl.Z,(0,U.Z)({ref:Ie,visible:Xt},Ue,{motionAppear:Ve==="show",onAppearEnd:mn,onLeaveEnd:mn}),function(Mn,Pn){var Gn=Mn.className,ti=Mn.style;return v.createElement("div",{ref:Pn,className:re()("".concat(Ur,"-treenode-motion"),Gn),style:ti},Xe.map(function(ii){var b=(0,U.Z)({},(wc(ii.data),ii.data)),A=ii.title,I=ii.key,T=ii.isStart,H=ii.isEnd;delete b.children;var te=ql(I,kt);return v.createElement(Nc,(0,U.Z)({},b,te,{title:A,active:Bt,data:ii.data,key:I,isStart:T,isEnd:H}))}))}):v.createElement(Nc,(0,U.Z)({domRef:Ie,className:se,style:st},Jt,{active:Bt}))};Dl.displayName="MotionTreeNode";var Vo=v.forwardRef(Dl),qo=Vo;function du(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ie=w.length,se=V.length;if(Math.abs(Ie-se)!==1)return{add:!1,key:null};function st(Ue,Xe){var Ve=new Map;Ue.forEach(function(Ct){Ve.set(Ct,!0)});var ct=Xe.filter(function(Ct){return!Ve.has(Ct)});return ct.length===1?ct[0]:null}return Ie<se?{add:!0,key:st(w,V)}:{add:!1,key:st(V,w)}}function Dh(w,V,Ie){var se=w.findIndex(function(Ve){return Ve.key===Ie}),st=w[se+1],Ue=V.findIndex(function(Ve){return Ve.key===Ie});if(st){var Xe=V.findIndex(function(Ve){return Ve.key===st.key});return V.slice(Ue+1,Xe)}return V.slice(Ue+1)}var Wf=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],zc={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},df=function(){},rc="RC_TREE_MOTION_".concat(Math.random()),ys={key:rc},bf={key:rc,level:0,index:0,pos:"0",node:ys,nodes:[ys]},Xf={parent:null,children:[],pos:bf.pos,data:ys,title:null,key:rc,isStart:[],isEnd:[]};function rl(w,V,Ie,se){return V===!1||!Ie?w:w.slice(0,Math.ceil(Ie/se)+1)}function Cc(w){var V=w.key,Ie=w.pos;return bc(V,Ie)}function Zc(w){for(var V=String(w.data.key),Ie=w;Ie.parent;)Ie=Ie.parent,V="".concat(Ie.data.key," > ").concat(V);return V}var sd=v.forwardRef(function(w,V){var Ie=w.prefixCls,se=w.data,st=w.selectable,Ue=w.checkable,Xe=w.expandedKeys,Ve=w.selectedKeys,ct=w.checkedKeys,Ct=w.loadedKeys,Bt=w.loadingKeys,kt=w.halfCheckedKeys,Jt=w.keyEntities,Ft=w.disabled,rr=w.dragging,Xt=w.dragOverNodeKey,pr=w.dropPosition,yr=w.motion,Ur=w.height,xn=w.itemHeight,mn=w.virtual,Mn=w.focusable,Pn=w.activeItem,Gn=w.focused,ti=w.tabIndex,ii=w.onKeyDown,b=w.onFocus,A=w.onBlur,I=w.onActiveChange,T=w.onListChangeStart,H=w.onListChangeEnd,te=(0,Rt.Z)(w,Wf),Ae=v.useRef(null),qe=v.useRef(null);v.useImperativeHandle(V,function(){return{scrollTo:function(y){Ae.current.scrollTo(y)},getIndentWidth:function(){return qe.current.offsetWidth}}});var Tt=v.useState(Xe),Wt=(0,c.Z)(Tt,2),vr=Wt[0],Fr=Wt[1],en=v.useState(se),zn=(0,c.Z)(en,2),ei=zn[0],Qn=zn[1],_n=v.useState(se),Xn=(0,c.Z)(_n,2),ai=Xn[0],nn=Xn[1],hi=v.useState([]),vi=(0,c.Z)(hi,2),Li=vi[0],Vi=vi[1],sa=v.useState(null),ua=(0,c.Z)(sa,2),Lo=ua[0],Fa=ua[1],go=v.useRef(se);go.current=se;function qs(){var l=go.current;Qn(l),nn(l),Vi([]),Fa(null),H()}v.useEffect(function(){Fr(Xe);var l=du(vr,Xe);if(l.key!==null)if(l.add){var y=ei.findIndex(function(Nt){var Ut=Nt.key;return Ut===l.key}),P=rl(Dh(ei,se,l.key),mn,Ur,xn),j=ei.slice();j.splice(y+1,0,Xf),nn(j),Vi(P),Fa("show")}else{var Q=se.findIndex(function(Nt){var Ut=Nt.key;return Ut===l.key}),we=rl(Dh(se,ei,l.key),mn,Ur,xn),ut=se.slice();ut.splice(Q+1,0,Xf),nn(ut),Vi(we),Fa("hide")}else ei!==se&&(Qn(se),nn(se))},[Xe,se]),v.useEffect(function(){rr||qs()},[rr]);var e=yr?ai:se,i={expandedKeys:Xe,selectedKeys:Ve,loadedKeys:Ct,loadingKeys:Bt,checkedKeys:ct,halfCheckedKeys:kt,dragOverNodeKey:Xt,dropPosition:pr,keyEntities:Jt};return v.createElement(v.Fragment,null,Gn&&Pn&&v.createElement("span",{style:zc,"aria-live":"assertive"},Zc(Pn)),v.createElement("div",null,v.createElement("input",{style:zc,disabled:Mn===!1||Ft,tabIndex:Mn!==!1?ti:null,onKeyDown:ii,onFocus:b,onBlur:A,value:"",onChange:df,"aria-label":"for screen reader"})),v.createElement("div",{className:"".concat(Ie,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},v.createElement("div",{className:"".concat(Ie,"-indent")},v.createElement("div",{ref:qe,className:"".concat(Ie,"-indent-unit")}))),v.createElement(Yc.Z,(0,U.Z)({},te,{data:e,itemKey:Cc,height:Ur,fullHeight:!1,virtual:mn,itemHeight:xn,prefixCls:"".concat(Ie,"-list"),ref:Ae,onVisibleChange:function(y,P){var j=new Set(y),Q=P.filter(function(we){return!j.has(we)});Q.some(function(we){return Cc(we)===rc})&&qs()}}),function(l){var y=l.pos,P=(0,U.Z)({},(wc(l.data),l.data)),j=l.title,Q=l.key,we=l.isStart,ut=l.isEnd,Nt=bc(Q,y);delete P.key,delete P.children;var Ut=ql(Nt,i);return v.createElement(qo,(0,U.Z)({},P,Ut,{title:j,active:!!Pn&&Q===Pn.key,pos:y,data:l.data,isStart:we,isEnd:ut,motion:yr,motionNodes:Q===rc?Li:null,motionType:Lo,onMotionStart:T,onMotionEnd:qs,treeNodeRequiredProps:i,onMouseMove:function(){I(null)}}))}))});sd.displayName="NodeList";var qc=sd;function f(w,V){var Ie=new Set;return w.forEach(function(se){V.has(se)||Ie.add(se)}),Ie}function m(w){var V=w||{},Ie=V.disabled,se=V.disableCheckbox,st=V.checkable;return!!(Ie||se)||st===!1}function p(w,V,Ie,se){for(var st=new Set(w),Ue=new Set,Xe=0;Xe<=Ie;Xe+=1){var Ve=V.get(Xe)||new Set;Ve.forEach(function(kt){var Jt=kt.key,Ft=kt.node,rr=kt.children,Xt=rr===void 0?[]:rr;st.has(Jt)&&!se(Ft)&&Xt.filter(function(pr){return!se(pr.node)}).forEach(function(pr){st.add(pr.key)})})}for(var ct=new Set,Ct=Ie;Ct>=0;Ct-=1){var Bt=V.get(Ct)||new Set;Bt.forEach(function(kt){var Jt=kt.parent,Ft=kt.node;if(!(se(Ft)||!kt.parent||ct.has(kt.parent.key))){if(se(kt.parent.node)){ct.add(Jt.key);return}var rr=!0,Xt=!1;(Jt.children||[]).filter(function(pr){return!se(pr.node)}).forEach(function(pr){var yr=pr.key,Ur=st.has(yr);rr&&!Ur&&(rr=!1),!Xt&&(Ur||Ue.has(yr))&&(Xt=!0)}),rr&&st.add(Jt.key),Xt&&Ue.add(Jt.key),ct.add(Jt.key)}})}return{checkedKeys:Array.from(st),halfCheckedKeys:Array.from(f(Ue,st))}}function E(w,V,Ie,se,st){for(var Ue=new Set(w),Xe=new Set(V),Ve=0;Ve<=se;Ve+=1){var ct=Ie.get(Ve)||new Set;ct.forEach(function(Jt){var Ft=Jt.key,rr=Jt.node,Xt=Jt.children,pr=Xt===void 0?[]:Xt;!Ue.has(Ft)&&!Xe.has(Ft)&&!st(rr)&&pr.filter(function(yr){return!st(yr.node)}).forEach(function(yr){Ue.delete(yr.key)})})}Xe=new Set;for(var Ct=new Set,Bt=se;Bt>=0;Bt-=1){var kt=Ie.get(Bt)||new Set;kt.forEach(function(Jt){var Ft=Jt.parent,rr=Jt.node;if(!(st(rr)||!Jt.parent||Ct.has(Jt.parent.key))){if(st(Jt.parent.node)){Ct.add(Ft.key);return}var Xt=!0,pr=!1;(Ft.children||[]).filter(function(yr){return!st(yr.node)}).forEach(function(yr){var Ur=yr.key,xn=Ue.has(Ur);Xt&&!xn&&(Xt=!1),!pr&&(xn||Xe.has(Ur))&&(pr=!0)}),Xt||Ue.delete(Ft.key),pr&&Xe.add(Ft.key),Ct.add(Ft.key)}})}return{checkedKeys:Array.from(Ue),halfCheckedKeys:Array.from(f(Xe,Ue))}}function Y(w,V,Ie,se){var st=[],Ue;se?Ue=se:Ue=m;var Xe=new Set(w.filter(function(Bt){var kt=!!Ie[Bt];return kt||st.push(Bt),kt})),Ve=new Map,ct=0;Object.keys(Ie).forEach(function(Bt){var kt=Ie[Bt],Jt=kt.level,Ft=Ve.get(Jt);Ft||(Ft=new Set,Ve.set(Jt,Ft)),Ft.add(kt),ct=Math.max(ct,Jt)}),(0,ge.ZP)(!st.length,"Tree missing follow keys: ".concat(st.slice(0,100).map(function(Bt){return"'".concat(Bt,"'")}).join(", ")));var Ct;return V===!0?Ct=p(Xe,Ve,ct,Ue):Ct=E(Xe,V.halfCheckedKeys,Ve,ct,Ue),Ct}function Ce(w){var V=w.dropPosition,Ie=w.dropLevelOffset,se=w.indent,st={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(V){case-1:st.top=0,st.left=-Ie*se;break;case 1:st.bottom=0,st.left=-Ie*se;break;case 0:st.bottom=0,st.left=se;break}return v.createElement("div",{style:st})}var ze=10,gt=function(w){(0,Wr.Z)(Ie,w);var V=(0,In.Z)(Ie);function Ie(){var se;(0,nr.Z)(this,Ie);for(var st=arguments.length,Ue=new Array(st),Xe=0;Xe<st;Xe++)Ue[Xe]=arguments[Xe];return se=V.call.apply(V,[this].concat(Ue)),se.destroyed=!1,se.delayedDragEnterLogic=void 0,se.loadingRetryTimes={},se.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ec()},se.dragStartMousePosition=null,se.dragNode=void 0,se.currentMouseOverDroppableNodeKey=null,se.listRef=v.createRef(),se.onNodeDragStart=function(Ve,ct){var Ct=se.state,Bt=Ct.expandedKeys,kt=Ct.keyEntities,Jt=se.props.onDragStart,Ft=ct.props.eventKey;se.dragNode=ct,se.dragStartMousePosition={x:Ve.clientX,y:Ve.clientY};var rr=fc(Bt,Ft);se.setState({draggingNodeKey:Ft,dragChildrenKeys:xl(Ft,kt),indent:se.listRef.current.getIndentWidth()}),se.setExpandedKeys(rr),window.addEventListener("dragend",se.onWindowDragEnd),Jt==null||Jt({event:Ve,node:gu(ct.props)})},se.onNodeDragEnter=function(Ve,ct){var Ct=se.state,Bt=Ct.expandedKeys,kt=Ct.keyEntities,Jt=Ct.dragChildrenKeys,Ft=Ct.flattenNodes,rr=Ct.indent,Xt=se.props,pr=Xt.onDragEnter,yr=Xt.onExpand,Ur=Xt.allowDrop,xn=Xt.direction,mn=ct.props,Mn=mn.pos,Pn=mn.eventKey,Gn=(0,Yl.Z)(se),ti=Gn.dragNode;if(se.currentMouseOverDroppableNodeKey!==Pn&&(se.currentMouseOverDroppableNodeKey=Pn),!ti){se.resetDragState();return}var ii=Kc(Ve,ti,ct,rr,se.dragStartMousePosition,Ur,Ft,kt,Bt,xn),b=ii.dropPosition,A=ii.dropLevelOffset,I=ii.dropTargetKey,T=ii.dropContainerKey,H=ii.dropTargetPos,te=ii.dropAllowed,Ae=ii.dragOverNodeKey;if(Jt.indexOf(I)!==-1||!te){se.resetDragState();return}if(se.delayedDragEnterLogic||(se.delayedDragEnterLogic={}),Object.keys(se.delayedDragEnterLogic).forEach(function(qe){clearTimeout(se.delayedDragEnterLogic[qe])}),ti.props.eventKey!==ct.props.eventKey&&(Ve.persist(),se.delayedDragEnterLogic[Mn]=window.setTimeout(function(){if(se.state.draggingNodeKey!==null){var qe=(0,Qe.Z)(Bt),Tt=kt[ct.props.eventKey];Tt&&(Tt.children||[]).length&&(qe=oo(Bt,ct.props.eventKey)),"expandedKeys"in se.props||se.setExpandedKeys(qe),yr==null||yr(qe,{node:gu(ct.props),expanded:!0,nativeEvent:Ve.nativeEvent})}},800)),ti.props.eventKey===I&&A===0){se.resetDragState();return}se.setState({dragOverNodeKey:Ae,dropPosition:b,dropLevelOffset:A,dropTargetKey:I,dropContainerKey:T,dropTargetPos:H,dropAllowed:te}),pr==null||pr({event:Ve,node:gu(ct.props),expandedKeys:Bt})},se.onNodeDragOver=function(Ve,ct){var Ct=se.state,Bt=Ct.dragChildrenKeys,kt=Ct.flattenNodes,Jt=Ct.keyEntities,Ft=Ct.expandedKeys,rr=Ct.indent,Xt=se.props,pr=Xt.onDragOver,yr=Xt.allowDrop,Ur=Xt.direction,xn=(0,Yl.Z)(se),mn=xn.dragNode;if(mn){var Mn=Kc(Ve,mn,ct,rr,se.dragStartMousePosition,yr,kt,Jt,Ft,Ur),Pn=Mn.dropPosition,Gn=Mn.dropLevelOffset,ti=Mn.dropTargetKey,ii=Mn.dropContainerKey,b=Mn.dropAllowed,A=Mn.dropTargetPos,I=Mn.dragOverNodeKey;Bt.indexOf(ti)!==-1||!b||(mn.props.eventKey===ti&&Gn===0?se.state.dropPosition===null&&se.state.dropLevelOffset===null&&se.state.dropTargetKey===null&&se.state.dropContainerKey===null&&se.state.dropTargetPos===null&&se.state.dropAllowed===!1&&se.state.dragOverNodeKey===null||se.resetDragState():Pn===se.state.dropPosition&&Gn===se.state.dropLevelOffset&&ti===se.state.dropTargetKey&&ii===se.state.dropContainerKey&&A===se.state.dropTargetPos&&b===se.state.dropAllowed&&I===se.state.dragOverNodeKey||se.setState({dropPosition:Pn,dropLevelOffset:Gn,dropTargetKey:ti,dropContainerKey:ii,dropTargetPos:A,dropAllowed:b,dragOverNodeKey:I}),pr==null||pr({event:Ve,node:gu(ct.props)}))}},se.onNodeDragLeave=function(Ve,ct){se.currentMouseOverDroppableNodeKey===ct.props.eventKey&&!Ve.currentTarget.contains(Ve.relatedTarget)&&(se.resetDragState(),se.currentMouseOverDroppableNodeKey=null);var Ct=se.props.onDragLeave;Ct==null||Ct({event:Ve,node:gu(ct.props)})},se.onWindowDragEnd=function(Ve){se.onNodeDragEnd(Ve,null,!0),window.removeEventListener("dragend",se.onWindowDragEnd)},se.onNodeDragEnd=function(Ve,ct){var Ct=se.props.onDragEnd;se.setState({dragOverNodeKey:null}),se.cleanDragState(),Ct==null||Ct({event:Ve,node:gu(ct.props)}),se.dragNode=null,window.removeEventListener("dragend",se.onWindowDragEnd)},se.onNodeDrop=function(Ve,ct){var Ct,Bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,kt=se.state,Jt=kt.dragChildrenKeys,Ft=kt.dropPosition,rr=kt.dropTargetKey,Xt=kt.dropTargetPos,pr=kt.dropAllowed;if(pr){var yr=se.props.onDrop;if(se.setState({dragOverNodeKey:null}),se.cleanDragState(),rr!==null){var Ur=(0,$e.Z)((0,$e.Z)({},ql(rr,se.getTreeNodeRequiredProps())),{},{active:((Ct=se.getActiveItem())===null||Ct===void 0?void 0:Ct.key)===rr,data:se.state.keyEntities[rr].node}),xn=Jt.indexOf(rr)!==-1;(0,ge.ZP)(!xn,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var mn=Do(Xt),Mn={event:Ve,node:gu(Ur),dragNode:se.dragNode?gu(se.dragNode.props):null,dragNodesKeys:[se.dragNode.props.eventKey].concat(Jt),dropToGap:Ft!==0,dropPosition:Ft+Number(mn[mn.length-1])};Bt||yr==null||yr(Mn),se.dragNode=null}}},se.cleanDragState=function(){var Ve=se.state.draggingNodeKey;Ve!==null&&se.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),se.dragStartMousePosition=null,se.currentMouseOverDroppableNodeKey=null},se.triggerExpandActionExpand=function(Ve,ct){var Ct=se.state,Bt=Ct.expandedKeys,kt=Ct.flattenNodes,Jt=ct.expanded,Ft=ct.key,rr=ct.isLeaf;if(!(rr||Ve.shiftKey||Ve.metaKey||Ve.ctrlKey)){var Xt=kt.filter(function(yr){return yr.key===Ft})[0],pr=gu((0,$e.Z)((0,$e.Z)({},ql(Ft,se.getTreeNodeRequiredProps())),{},{data:Xt.data}));se.setExpandedKeys(Jt?fc(Bt,Ft):oo(Bt,Ft)),se.onNodeExpand(Ve,pr)}},se.onNodeClick=function(Ve,ct){var Ct=se.props,Bt=Ct.onClick,kt=Ct.expandAction;kt==="click"&&se.triggerExpandActionExpand(Ve,ct),Bt==null||Bt(Ve,ct)},se.onNodeDoubleClick=function(Ve,ct){var Ct=se.props,Bt=Ct.onDoubleClick,kt=Ct.expandAction;kt==="doubleClick"&&se.triggerExpandActionExpand(Ve,ct),Bt==null||Bt(Ve,ct)},se.onNodeSelect=function(Ve,ct){var Ct=se.state.selectedKeys,Bt=se.state,kt=Bt.keyEntities,Jt=Bt.fieldNames,Ft=se.props,rr=Ft.onSelect,Xt=Ft.multiple,pr=ct.selected,yr=ct[Jt.key],Ur=!pr;Ur?Xt?Ct=oo(Ct,yr):Ct=[yr]:Ct=fc(Ct,yr);var xn=Ct.map(function(mn){var Mn=kt[mn];return Mn?Mn.node:null}).filter(function(mn){return mn});se.setUncontrolledState({selectedKeys:Ct}),rr==null||rr(Ct,{event:"select",selected:Ur,node:ct,selectedNodes:xn,nativeEvent:Ve.nativeEvent})},se.onNodeCheck=function(Ve,ct,Ct){var Bt=se.state,kt=Bt.keyEntities,Jt=Bt.checkedKeys,Ft=Bt.halfCheckedKeys,rr=se.props,Xt=rr.checkStrictly,pr=rr.onCheck,yr=ct.key,Ur,xn={event:"check",node:ct,checked:Ct,nativeEvent:Ve.nativeEvent};if(Xt){var mn=Ct?oo(Jt,yr):fc(Jt,yr),Mn=fc(Ft,yr);Ur={checked:mn,halfChecked:Mn},xn.checkedNodes=mn.map(function(A){return kt[A]}).filter(function(A){return A}).map(function(A){return A.node}),se.setUncontrolledState({checkedKeys:mn})}else{var Pn=Y([].concat((0,Qe.Z)(Jt),[yr]),!0,kt),Gn=Pn.checkedKeys,ti=Pn.halfCheckedKeys;if(!Ct){var ii=new Set(Gn);ii.delete(yr);var b=Y(Array.from(ii),{checked:!1,halfCheckedKeys:ti},kt);Gn=b.checkedKeys,ti=b.halfCheckedKeys}Ur=Gn,xn.checkedNodes=[],xn.checkedNodesPositions=[],xn.halfCheckedKeys=ti,Gn.forEach(function(A){var I=kt[A];if(I){var T=I.node,H=I.pos;xn.checkedNodes.push(T),xn.checkedNodesPositions.push({node:T,pos:H})}}),se.setUncontrolledState({checkedKeys:Gn},!1,{halfCheckedKeys:ti})}pr==null||pr(Ur,xn)},se.onNodeLoad=function(Ve){var ct=Ve.key,Ct=new Promise(function(Bt,kt){se.setState(function(Jt){var Ft=Jt.loadedKeys,rr=Ft===void 0?[]:Ft,Xt=Jt.loadingKeys,pr=Xt===void 0?[]:Xt,yr=se.props,Ur=yr.loadData,xn=yr.onLoad;if(!Ur||rr.indexOf(ct)!==-1||pr.indexOf(ct)!==-1)return null;var mn=Ur(Ve);return mn.then(function(){var Mn=se.state.loadedKeys,Pn=oo(Mn,ct);xn==null||xn(Pn,{event:"load",node:Ve}),se.setUncontrolledState({loadedKeys:Pn}),se.setState(function(Gn){return{loadingKeys:fc(Gn.loadingKeys,ct)}}),Bt()}).catch(function(Mn){if(se.setState(function(Gn){return{loadingKeys:fc(Gn.loadingKeys,ct)}}),se.loadingRetryTimes[ct]=(se.loadingRetryTimes[ct]||0)+1,se.loadingRetryTimes[ct]>=ze){var Pn=se.state.loadedKeys;(0,ge.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),se.setUncontrolledState({loadedKeys:oo(Pn,ct)}),Bt()}kt(Mn)}),{loadingKeys:oo(pr,ct)}})});return Ct.catch(function(){}),Ct},se.onNodeMouseEnter=function(Ve,ct){var Ct=se.props.onMouseEnter;Ct==null||Ct({event:Ve,node:ct})},se.onNodeMouseLeave=function(Ve,ct){var Ct=se.props.onMouseLeave;Ct==null||Ct({event:Ve,node:ct})},se.onNodeContextMenu=function(Ve,ct){var Ct=se.props.onRightClick;Ct&&(Ve.preventDefault(),Ct({event:Ve,node:ct}))},se.onFocus=function(){var Ve=se.props.onFocus;se.setState({focused:!0});for(var ct=arguments.length,Ct=new Array(ct),Bt=0;Bt<ct;Bt++)Ct[Bt]=arguments[Bt];Ve==null||Ve.apply(void 0,Ct)},se.onBlur=function(){var Ve=se.props.onBlur;se.setState({focused:!1}),se.onActiveChange(null);for(var ct=arguments.length,Ct=new Array(ct),Bt=0;Bt<ct;Bt++)Ct[Bt]=arguments[Bt];Ve==null||Ve.apply(void 0,Ct)},se.getTreeNodeRequiredProps=function(){var Ve=se.state,ct=Ve.expandedKeys,Ct=Ve.selectedKeys,Bt=Ve.loadedKeys,kt=Ve.loadingKeys,Jt=Ve.checkedKeys,Ft=Ve.halfCheckedKeys,rr=Ve.dragOverNodeKey,Xt=Ve.dropPosition,pr=Ve.keyEntities;return{expandedKeys:ct||[],selectedKeys:Ct||[],loadedKeys:Bt||[],loadingKeys:kt||[],checkedKeys:Jt||[],halfCheckedKeys:Ft||[],dragOverNodeKey:rr,dropPosition:Xt,keyEntities:pr}},se.setExpandedKeys=function(Ve){var ct=se.state,Ct=ct.treeData,Bt=ct.fieldNames,kt=kh(Ct,Ve,Bt);se.setUncontrolledState({expandedKeys:Ve,flattenNodes:kt},!0)},se.onNodeExpand=function(Ve,ct){var Ct=se.state.expandedKeys,Bt=se.state,kt=Bt.listChanging,Jt=Bt.fieldNames,Ft=se.props,rr=Ft.onExpand,Xt=Ft.loadData,pr=ct.expanded,yr=ct[Jt.key];if(!kt){var Ur=Ct.indexOf(yr),xn=!pr;if((0,ge.ZP)(pr&&Ur!==-1||!pr&&Ur===-1,"Expand state not sync with index check"),xn?Ct=oo(Ct,yr):Ct=fc(Ct,yr),se.setExpandedKeys(Ct),rr==null||rr(Ct,{node:ct,expanded:xn,nativeEvent:Ve.nativeEvent}),xn&&Xt){var mn=se.onNodeLoad(ct);mn&&mn.then(function(){var Mn=kh(se.state.treeData,Ct,Jt);se.setUncontrolledState({flattenNodes:Mn})}).catch(function(){var Mn=se.state.expandedKeys,Pn=fc(Mn,yr);se.setExpandedKeys(Pn)})}}},se.onListChangeStart=function(){se.setUncontrolledState({listChanging:!0})},se.onListChangeEnd=function(){setTimeout(function(){se.setUncontrolledState({listChanging:!1})})},se.onActiveChange=function(Ve){var ct=se.state.activeKey,Ct=se.props.onActiveChange;ct!==Ve&&(se.setState({activeKey:Ve}),Ve!==null&&se.scrollTo({key:Ve}),Ct==null||Ct(Ve))},se.getActiveItem=function(){var Ve=se.state,ct=Ve.activeKey,Ct=Ve.flattenNodes;return ct===null?null:Ct.find(function(Bt){var kt=Bt.key;return kt===ct})||null},se.offsetActiveKey=function(Ve){var ct=se.state,Ct=ct.flattenNodes,Bt=ct.activeKey,kt=Ct.findIndex(function(rr){var Xt=rr.key;return Xt===Bt});kt===-1&&Ve<0&&(kt=Ct.length),kt=(kt+Ve+Ct.length)%Ct.length;var Jt=Ct[kt];if(Jt){var Ft=Jt.key;se.onActiveChange(Ft)}else se.onActiveChange(null)},se.onKeyDown=function(Ve){var ct=se.state,Ct=ct.activeKey,Bt=ct.expandedKeys,kt=ct.checkedKeys,Jt=ct.fieldNames,Ft=se.props,rr=Ft.onKeyDown,Xt=Ft.checkable,pr=Ft.selectable;switch(Ve.which){case Vf.Z.UP:{se.offsetActiveKey(-1),Ve.preventDefault();break}case Vf.Z.DOWN:{se.offsetActiveKey(1),Ve.preventDefault();break}}var yr=se.getActiveItem();if(yr&&yr.data){var Ur=se.getTreeNodeRequiredProps(),xn=yr.data.isLeaf===!1||!!(yr.data[Jt.children]||[]).length,mn=gu((0,$e.Z)((0,$e.Z)({},ql(Ct,Ur)),{},{data:yr.data,active:!0}));switch(Ve.which){case Vf.Z.LEFT:{xn&&Bt.includes(Ct)?se.onNodeExpand({},mn):yr.parent&&se.onActiveChange(yr.parent.key),Ve.preventDefault();break}case Vf.Z.RIGHT:{xn&&!Bt.includes(Ct)?se.onNodeExpand({},mn):yr.children&&yr.children.length&&se.onActiveChange(yr.children[0].key),Ve.preventDefault();break}case Vf.Z.ENTER:case Vf.Z.SPACE:{Xt&&!mn.disabled&&mn.checkable!==!1&&!mn.disableCheckbox?se.onNodeCheck({},mn,!kt.includes(Ct)):!Xt&&pr&&!mn.disabled&&mn.selectable!==!1&&se.onNodeSelect({},mn);break}}}rr==null||rr(Ve)},se.setUncontrolledState=function(Ve){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!se.destroyed){var Bt=!1,kt=!0,Jt={};Object.keys(Ve).forEach(function(Ft){if(Ft in se.props){kt=!1;return}Bt=!0,Jt[Ft]=Ve[Ft]}),Bt&&(!ct||kt)&&se.setState((0,$e.Z)((0,$e.Z)({},Jt),Ct))}},se.scrollTo=function(Ve){se.listRef.current.scrollTo(Ve)},se}return(0,wr.Z)(Ie,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var st=this.props.activeKey;st!==void 0&&st!==this.state.activeKey&&(this.setState({activeKey:st}),st!==null&&this.scrollTo({key:st}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var st,Ue=this.state,Xe=Ue.focused,Ve=Ue.flattenNodes,ct=Ue.keyEntities,Ct=Ue.draggingNodeKey,Bt=Ue.activeKey,kt=Ue.dropLevelOffset,Jt=Ue.dropContainerKey,Ft=Ue.dropTargetKey,rr=Ue.dropPosition,Xt=Ue.dragOverNodeKey,pr=Ue.indent,yr=this.props,Ur=yr.prefixCls,xn=yr.className,mn=yr.style,Mn=yr.showLine,Pn=yr.focusable,Gn=yr.tabIndex,ti=Gn===void 0?0:Gn,ii=yr.selectable,b=yr.showIcon,A=yr.icon,I=yr.switcherIcon,T=yr.draggable,H=yr.checkable,te=yr.checkStrictly,Ae=yr.disabled,qe=yr.motion,Tt=yr.loadData,Wt=yr.filterTreeNode,vr=yr.height,Fr=yr.itemHeight,en=yr.virtual,zn=yr.titleRender,ei=yr.dropIndicatorRender,Qn=yr.onContextMenu,_n=yr.onScroll,Xn=yr.direction,ai=yr.rootClassName,nn=yr.rootStyle,hi=(0,ot.Z)(this.props,{aria:!0,data:!0}),vi;return T&&((0,pe.Z)(T)==="object"?vi=T:typeof T=="function"?vi={nodeDraggable:T}:vi={}),v.createElement(ih.Provider,{value:{prefixCls:Ur,selectable:ii,showIcon:b,icon:A,switcherIcon:I,draggable:vi,draggingNodeKey:Ct,checkable:H,checkStrictly:te,disabled:Ae,keyEntities:ct,dropLevelOffset:kt,dropContainerKey:Jt,dropTargetKey:Ft,dropPosition:rr,dragOverNodeKey:Xt,indent:pr,direction:Xn,dropIndicatorRender:ei,loadData:Tt,filterTreeNode:Wt,titleRender:zn,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},v.createElement("div",{role:"tree",className:re()(Ur,xn,ai,(st={},(0,ye.Z)(st,"".concat(Ur,"-show-line"),Mn),(0,ye.Z)(st,"".concat(Ur,"-focused"),Xe),(0,ye.Z)(st,"".concat(Ur,"-active-focused"),Bt!==null),st)),style:nn},v.createElement(qc,(0,U.Z)({ref:this.listRef,prefixCls:Ur,style:mn,data:Ve,disabled:Ae,selectable:ii,checkable:!!H,motion:qe,dragging:Ct!==null,height:vr,itemHeight:Fr,virtual:en,focusable:Pn,focused:Xe,tabIndex:ti,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:Qn,onScroll:_n},this.getTreeNodeRequiredProps(),hi))))}}],[{key:"getDerivedStateFromProps",value:function(st,Ue){var Xe=Ue.prevProps,Ve={prevProps:st};function ct(Pn){return!Xe&&Pn in st||Xe&&Xe[Pn]!==st[Pn]}var Ct,Bt=Ue.fieldNames;if(ct("fieldNames")&&(Bt=Ec(st.fieldNames),Ve.fieldNames=Bt),ct("treeData")?Ct=st.treeData:ct("children")&&((0,ge.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),Ct=Wc(st.children)),Ct){Ve.treeData=Ct;var kt=Vh(Ct,{fieldNames:Bt});Ve.keyEntities=(0,$e.Z)((0,ye.Z)({},rc,bf),kt.keyEntities)}var Jt=Ve.keyEntities||Ue.keyEntities;if(ct("expandedKeys")||Xe&&ct("autoExpandParent"))Ve.expandedKeys=st.autoExpandParent||!Xe&&st.defaultExpandParent?ph(st.expandedKeys,Jt):st.expandedKeys;else if(!Xe&&st.defaultExpandAll){var Ft=(0,$e.Z)({},Jt);delete Ft[rc],Ve.expandedKeys=Object.keys(Ft).map(function(Pn){return Ft[Pn].key})}else!Xe&&st.defaultExpandedKeys&&(Ve.expandedKeys=st.autoExpandParent||st.defaultExpandParent?ph(st.defaultExpandedKeys,Jt):st.defaultExpandedKeys);if(Ve.expandedKeys||delete Ve.expandedKeys,Ct||Ve.expandedKeys){var rr=kh(Ct||Ue.treeData,Ve.expandedKeys||Ue.expandedKeys,Bt);Ve.flattenNodes=rr}if(st.selectable&&(ct("selectedKeys")?Ve.selectedKeys=Gh(st.selectedKeys,st):!Xe&&st.defaultSelectedKeys&&(Ve.selectedKeys=Gh(st.defaultSelectedKeys,st))),st.checkable){var Xt;if(ct("checkedKeys")?Xt=yd(st.checkedKeys)||{}:!Xe&&st.defaultCheckedKeys?Xt=yd(st.defaultCheckedKeys)||{}:Ct&&(Xt=yd(st.checkedKeys)||{checkedKeys:Ue.checkedKeys,halfCheckedKeys:Ue.halfCheckedKeys}),Xt){var pr=Xt,yr=pr.checkedKeys,Ur=yr===void 0?[]:yr,xn=pr.halfCheckedKeys,mn=xn===void 0?[]:xn;if(!st.checkStrictly){var Mn=Y(Ur,!0,Jt);Ur=Mn.checkedKeys,mn=Mn.halfCheckedKeys}Ve.checkedKeys=Ur,Ve.halfCheckedKeys=mn}}return ct("loadedKeys")&&(Ve.loadedKeys=st.loadedKeys),Ve}}]),Ie}(v.Component);gt.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Ce,allowDrop:function(){return!0},expandAction:!1},gt.TreeNode=Nc;var Gt=gt,sr=Gt,Mr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},Or=Mr,Br=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Or}))};Br.displayName="HolderOutlined";var yn=v.forwardRef(Br),hn=g(33603);const kn=4;function an(w){const{dropPosition:V,dropLevelOffset:Ie,prefixCls:se,indent:st,direction:Ue="ltr"}=w,Xe=Ue==="ltr"?"left":"right",Ve=Ue==="ltr"?"right":"left",ct={[Xe]:-Ie*st+kn,[Ve]:0};switch(V){case-1:ct.top=-3;break;case 1:ct.bottom=-3;break;default:ct.bottom=-3,ct[Xe]=st+kn;break}return v.createElement("div",{style:ct,className:`${se}-drop-indicator`})}var Rn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},$n=Rn,di=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:$n}))};di.displayName="CaretDownFilled";var Di=v.forwardRef(di),Ti={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Fi=Ti,ra=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Fi}))};ra.displayName="FileOutlined";var Da=v.forwardRef(ra),Na=g(84273),po={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},No=po,is=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:No}))};is.displayName="MinusSquareOutlined";var rs=v.forwardRef(is),Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},vo=Ls,ds=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:vo}))};ds.displayName="PlusSquareOutlined";var Ns=v.forwardRef(ds),cs=g(96159);function Qo(w,V,Ie,se){const{isLeaf:st,expanded:Ue,loading:Xe}=Ie;if(Xe)return v.createElement(Na.Z,{className:`${w}-switcher-loading-icon`});let Ve;if(se&&typeof se=="object"&&(Ve=se.showLeafIcon),st){if(!se)return null;if(typeof Ve!="boolean"&&Ve){const Bt=typeof Ve=="function"?Ve(Ie):Ve,kt=`${w}-switcher-line-custom-icon`;return(0,cs.l$)(Bt)?(0,cs.Tm)(Bt,{className:re()(Bt.props.className||"",kt)}):Bt}return Ve?v.createElement(Da,{className:`${w}-switcher-line-icon`}):v.createElement("span",{className:`${w}-switcher-leaf-line`})}const ct=`${w}-switcher-icon`,Ct=typeof V=="function"?V(Ie):V;return(0,cs.l$)(Ct)?(0,cs.Tm)(Ct,{className:re()(Ct.props.className||"",ct)}):Ct||(se?Ue?v.createElement(rs,{className:`${w}-switcher-line-icon`}):v.createElement(Ns,{className:`${w}-switcher-line-icon`}):v.createElement(Di,{className:ct}))}var $s=g(33507);const Cs=new Es.E4("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),_s=(w,V)=>({[`.${w}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${V.motionDurationSlow}`}}}),El=(w,V)=>({[`.${w}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:V.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${V.lineWidthBold}px solid ${V.colorPrimary}`,borderRadius:"50%",content:'""'}}}),nl=(w,V)=>{const{treeCls:Ie,treeNodeCls:se,treeNodePadding:st,treeTitleHeight:Ue}=V,Xe=(Ue-V.fontSizeLG)/2,Ve=V.paddingXS;return{[Ie]:Object.assign(Object.assign({},(0,bs.Wf)(V)),{background:V.colorBgContainer,borderRadius:V.borderRadius,transition:`background-color ${V.motionDurationSlow}`,[`&${Ie}-rtl`]:{[`${Ie}-switcher`]:{"&_close":{[`${Ie}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${Ie}-active-focused)`]:Object.assign({},(0,bs.oN)(V)),[`${Ie}-list-holder-inner`]:{alignItems:"flex-start"},[`&${Ie}-block-node`]:{[`${Ie}-list-holder-inner`]:{alignItems:"stretch",[`${Ie}-node-content-wrapper`]:{flex:"auto"},[`${se}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:st,insetInlineStart:0,border:`1px solid ${V.colorPrimary}`,opacity:0,animationName:Cs,animationDuration:V.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${se}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${st}px 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${Ie}-node-content-wrapper`]:{color:V.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${Ie}-node-content-wrapper`]:Object.assign({},(0,bs.oN)(V)),[`&:not(${se}-disabled).filter-node ${Ie}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${Ie}-draggable-icon`]:{width:Ue,lineHeight:`${Ue}px`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${V.motionDurationSlow}`,[`${se}:hover &`]:{opacity:.45}},[`&${se}-disabled`]:{[`${Ie}-draggable-icon`]:{visibility:"hidden"}}}},[`${Ie}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:Ue}},[`${Ie}-draggable-icon`]:{visibility:"hidden"},[`${Ie}-switcher`]:Object.assign(Object.assign({},_s(w,V)),{position:"relative",flex:"none",alignSelf:"stretch",width:Ue,margin:0,lineHeight:`${Ue}px`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${Ie}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:V.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:Ue/2,bottom:-st,marginInlineStart:-1,borderInlineEnd:`1px solid ${V.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:Ue/2*.8,height:Ue/2,borderBottom:`1px solid ${V.colorBorder}`,content:'""'}}}),[`${Ie}-checkbox`]:{top:"initial",marginInlineEnd:Ve,marginBlockStart:Xe},[`${Ie}-node-content-wrapper, ${Ie}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:Ue,margin:0,padding:`0 ${V.paddingXS/2}px`,color:"inherit",lineHeight:`${Ue}px`,background:"transparent",borderRadius:V.borderRadius,cursor:"pointer",transition:`all ${V.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:V.controlItemBgHover},[`&${Ie}-node-selected`]:{backgroundColor:V.controlItemBgActive},[`${Ie}-iconEle`]:{display:"inline-block",width:Ue,height:Ue,lineHeight:`${Ue}px`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${Ie}-unselectable ${Ie}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${Ie}-node-content-wrapper`]:Object.assign({lineHeight:`${Ue}px`,userSelect:"none"},El(w,V)),[`${se}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${V.colorPrimary}`}},"&-show-line":{[`${Ie}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:Ue/2,bottom:-st,borderInlineEnd:`1px solid ${V.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${Ie}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${se}-leaf-last`]:{[`${Ie}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${Ue/2}px !important`}}}}})}},qu=w=>{const{treeCls:V,treeNodeCls:Ie,treeNodePadding:se}=w;return{[`${V}${V}-directory`]:{[Ie]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:se,insetInlineStart:0,transition:`background-color ${w.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:w.controlItemBgHover}},"> *":{zIndex:1},[`${V}-switcher`]:{transition:`color ${w.motionDurationMid}`},[`${V}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${V}-node-selected`]:{color:w.colorTextLightSolid,background:"transparent"}},"&-selected":{[`
            &:hover::before,
            &::before
          `]:{background:w.colorPrimary},[`${V}-switcher`]:{color:w.colorTextLightSolid},[`${V}-node-content-wrapper`]:{color:w.colorTextLightSolid,background:"transparent"}}}}}},Ac=(w,V)=>{const Ie=`.${w}`,se=`${Ie}-treenode`,st=V.paddingXS/2,Ue=V.controlHeightSM,Xe=(0,Xs.TS)(V,{treeCls:Ie,treeNodeCls:se,treeNodePadding:st,treeTitleHeight:Ue});return[nl(w,Xe),qu(Xe)]};var Qu=(0,gl.Z)("Tree",(w,V)=>{let{prefixCls:Ie}=V;return[{[w.componentCls]:Tl(`${Ie}-checkbox`,w)},Ac(Ie,w),(0,$s.Z)(w)]}),Tc=v.forwardRef((w,V)=>{const{getPrefixCls:Ie,direction:se,virtual:st}=v.useContext(er.E_),{prefixCls:Ue,className:Xe,showIcon:Ve=!1,showLine:ct,switcherIcon:Ct,blockNode:Bt=!1,children:kt,checkable:Jt=!1,selectable:Ft=!0,draggable:rr,motion:Xt}=w,pr=Ie("tree",Ue),yr=Ie(),Ur=Xt!=null?Xt:Object.assign(Object.assign({},(0,hn.ZP)(yr)),{motionAppear:!1}),xn=Object.assign(Object.assign({},w),{checkable:Jt,selectable:Ft,showIcon:Ve,motion:Ur,blockNode:Bt,showLine:Boolean(ct),dropIndicatorRender:an}),[mn,Mn]=Qu(pr),Pn=v.useMemo(()=>{if(!rr)return!1;let Gn={};switch(typeof rr){case"function":Gn.nodeDraggable=rr;break;case"object":Gn=Object.assign({},rr);break;default:break}return Gn.icon!==!1&&(Gn.icon=Gn.icon||v.createElement(yn,null)),Gn},[rr]);return mn(v.createElement(sr,Object.assign({itemHeight:20,ref:V,virtual:st},xn,{prefixCls:pr,className:re()({[`${pr}-icon-hide`]:!Ve,[`${pr}-block-node`]:Bt,[`${pr}-unselectable`]:!Ft,[`${pr}-rtl`]:se==="rtl"},Xe,Mn),direction:se,checkable:Jt&&v.createElement("span",{className:`${pr}-checkbox-inner`}),selectable:Ft,switcherIcon:Gn=>Qo(pr,Ct,Gn,ct),draggable:Pn}),kt))}),ec={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},Pf=ec,Ef=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Pf}))};Ef.displayName="FolderOpenOutlined";var $l=v.forwardRef(Ef),Uc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},Qh=Uc,Jh=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Qh}))};Jh.displayName="FolderOutlined";var Sh=v.forwardRef(Jh),Of;(function(w){w[w.None=0]="None",w[w.Start=1]="Start",w[w.End=2]="End"})(Of||(Of={}));function wh(w,V){function Ie(se){const{key:st,children:Ue}=se;V(st,se)!==!1&&wh(Ue||[],V)}w.forEach(Ie)}function pf(w){let{treeData:V,expandedKeys:Ie,startKey:se,endKey:st}=w;const Ue=[];let Xe=Of.None;if(se&&se===st)return[se];if(!se||!st)return[];function Ve(ct){return ct===se||ct===st}return wh(V,ct=>{if(Xe===Of.End)return!1;if(Ve(ct)){if(Ue.push(ct),Xe===Of.None)Xe=Of.Start;else if(Xe===Of.Start)return Xe=Of.End,!1}else Xe===Of.Start&&Ue.push(ct);return Ie.includes(ct)}),Ue}function oh(w,V){const Ie=(0,Qe.Z)(V),se=[];return wh(w,(st,Ue)=>{const Xe=Ie.indexOf(st);return Xe!==-1&&(se.push(Ue),Ie.splice(Xe,1)),!!Ie.length}),se}var Qc=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie};function nc(w){const{isLeaf:V,expanded:Ie}=w;return V?v.createElement(Da,null):Ie?v.createElement($l,null):v.createElement(Sh,null)}function ic(w){let{treeData:V,children:Ie}=w;return V||Wc(Ie)}const Ch=(w,V)=>{var{defaultExpandAll:Ie,defaultExpandParent:se,defaultExpandedKeys:st}=w,Ue=Qc(w,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const Xe=v.useRef(),Ve=v.useRef(),ct=()=>{const{keyEntities:ti}=Vh(ic(Ue));let ii;return Ie?ii=Object.keys(ti):se?ii=ph(Ue.expandedKeys||st||[],ti):ii=Ue.expandedKeys||st,ii},[Ct,Bt]=v.useState(Ue.selectedKeys||Ue.defaultSelectedKeys||[]),[kt,Jt]=v.useState(()=>ct());v.useEffect(()=>{"selectedKeys"in Ue&&Bt(Ue.selectedKeys)},[Ue.selectedKeys]),v.useEffect(()=>{"expandedKeys"in Ue&&Jt(Ue.expandedKeys)},[Ue.expandedKeys]);const Ft=(ti,ii)=>{var b;return"expandedKeys"in Ue||Jt(ti),(b=Ue.onExpand)===null||b===void 0?void 0:b.call(Ue,ti,ii)},rr=(ti,ii)=>{var b;const{multiple:A}=Ue,{node:I,nativeEvent:T}=ii,{key:H=""}=I,te=ic(Ue),Ae=Object.assign(Object.assign({},ii),{selected:!0}),qe=(T==null?void 0:T.ctrlKey)||(T==null?void 0:T.metaKey),Tt=T==null?void 0:T.shiftKey;let Wt;A&&qe?(Wt=ti,Xe.current=H,Ve.current=Wt,Ae.selectedNodes=oh(te,Wt)):A&&Tt?(Wt=Array.from(new Set([].concat((0,Qe.Z)(Ve.current||[]),(0,Qe.Z)(pf({treeData:te,expandedKeys:kt,startKey:H,endKey:Xe.current}))))),Ae.selectedNodes=oh(te,Wt)):(Wt=[H],Xe.current=H,Ve.current=Wt,Ae.selectedNodes=oh(te,Wt)),(b=Ue.onSelect)===null||b===void 0||b.call(Ue,Wt,Ae),"selectedKeys"in Ue||Bt(Wt)},{getPrefixCls:Xt,direction:pr}=v.useContext(er.E_),{prefixCls:yr,className:Ur,showIcon:xn=!0,expandAction:mn="click"}=Ue,Mn=Qc(Ue,["prefixCls","className","showIcon","expandAction"]),Pn=Xt("tree",yr),Gn=re()(`${Pn}-directory`,{[`${Pn}-directory-rtl`]:pr==="rtl"},Ur);return v.createElement(Tc,Object.assign({icon:nc,ref:V,blockNode:!0},Mn,{showIcon:xn,expandAction:mn,prefixCls:Pn,className:Gn,expandedKeys:kt,selectedKeys:Ct,onSelect:rr,onExpand:Ft}))};var ku=v.forwardRef(Ch);const yu=Tc;yu.DirectoryTree=ku,yu.TreeNode=Nc;var Jc=yu;function sh(w){const V=v.useRef(w),Ie=Vn();return[()=>V.current,se=>{V.current=se,Ie()}]}var vh=g(40110),mh=w=>{const{getPrefixCls:V,direction:Ie}=(0,v.useContext)(er.E_),{prefixCls:se,className:st=""}=w,Ue=V("input-group",se),Xe=V("input"),[Ve,ct]=cf(Xe),Ct=re()(Ue,{[`${Ue}-lg`]:w.size==="large",[`${Ue}-sm`]:w.size==="small",[`${Ue}-compact`]:w.compact,[`${Ue}-rtl`]:Ie==="rtl"},ct,st),Bt=(0,v.useContext)(lo.aM),kt=(0,v.useMemo)(()=>Object.assign(Object.assign({},Bt),{isFormItemInput:!1}),[Bt]);return Ve(v.createElement("span",{className:Ct,style:w.style,onMouseEnter:w.onMouseEnter,onMouseLeave:w.onMouseLeave,onFocus:w.onFocus,onBlur:w.onBlur},v.createElement(lo.aM.Provider,{value:kt},w.children)))},If=g(86581);function Rf(w){return!!(w.addonBefore||w.addonAfter)}function vf(w){return!!(w.prefix||w.suffix||w.allowClear)}function ue(w,V,Ie,se){if(Ie){var st=V;if(V.type==="click"){var Ue=w.cloneNode(!0);st=Object.create(V,{target:{value:Ue},currentTarget:{value:Ue}}),Ue.value="",Ie(st);return}if(se!==void 0){st=Object.create(V,{target:{value:w},currentTarget:{value:w}}),w.value=se,Ie(st);return}Ie(st)}}function Rr(w,V){if(w){w.focus(V);var Ie=V||{},se=Ie.cursor;if(se){var st=w.value.length;switch(se){case"start":w.setSelectionRange(0,0);break;case"end":w.setSelectionRange(st,st);break;default:w.setSelectionRange(0,st)}}}}function Mt(w){return typeof w=="undefined"||w===null?"":String(w)}var St=function(V){var Ie,se=V.inputElement,st=V.prefixCls,Ue=V.prefix,Xe=V.suffix,Ve=V.addonBefore,ct=V.addonAfter,Ct=V.className,Bt=V.style,kt=V.affixWrapperClassName,Jt=V.groupClassName,Ft=V.wrapperClassName,rr=V.disabled,Xt=V.readOnly,pr=V.focused,yr=V.triggerFocus,Ur=V.allowClear,xn=V.value,mn=V.handleReset,Mn=V.hidden,Pn=V.inputStyle,Gn=V.classes,ti=(0,v.useRef)(null),ii=function(Fr){var en;(en=ti.current)!==null&&en!==void 0&&en.contains(Fr.target)&&(yr==null||yr())},b=function(){var Fr;if(!Ur)return null;var en=!rr&&!Xt&&xn,zn="".concat(st,"-clear-icon"),ei=(0,pe.Z)(Ur)==="object"&&Ur!==null&&Ur!==void 0&&Ur.clearIcon?Ur.clearIcon:"\u2716";return v.createElement("span",{onClick:mn,onMouseDown:function(_n){return _n.preventDefault()},className:re()(zn,(Fr={},(0,ye.Z)(Fr,"".concat(zn,"-hidden"),!en),(0,ye.Z)(Fr,"".concat(zn,"-has-suffix"),!!Xe),Fr)),role:"button",tabIndex:-1},ei)},A=(0,v.cloneElement)(se,{value:xn,hidden:Mn,style:(0,$e.Z)((0,$e.Z)({},(Ie=se.props)===null||Ie===void 0?void 0:Ie.style),Pn)});if(vf(V)){var I,T="".concat(st,"-affix-wrapper"),H=re()(T,(I={},(0,ye.Z)(I,"".concat(T,"-disabled"),rr),(0,ye.Z)(I,"".concat(T,"-focused"),pr),(0,ye.Z)(I,"".concat(T,"-readonly"),Xt),(0,ye.Z)(I,"".concat(T,"-input-with-clear-btn"),Xe&&Ur&&xn),I),!Rf(V)&&Ct,kt,Gn==null?void 0:Gn.affixWrapper),te=(Xe||Ur)&&v.createElement("span",{className:"".concat(st,"-suffix")},b(),Xe);A=v.createElement("span",{className:H,style:Bt,hidden:!Rf(V)&&Mn,onClick:ii,ref:ti},Ue&&v.createElement("span",{className:"".concat(st,"-prefix")},Ue),(0,v.cloneElement)(se,{style:Pn!=null?Pn:null,value:xn,hidden:null}),te)}if(Rf(V)){var Ae="".concat(st,"-group"),qe="".concat(Ae,"-addon"),Tt=re()("".concat(st,"-wrapper"),Ae,Ft,Gn==null?void 0:Gn.wrapper),Wt=re()("".concat(st,"-group-wrapper"),Ct,Jt,Gn==null?void 0:Gn.group);return v.createElement("span",{className:Wt,style:Bt,hidden:Mn},v.createElement("span",{className:Tt},Ve&&v.createElement("span",{className:qe},Ve),(0,v.cloneElement)(A,{style:Pn!=null?Pn:null,hidden:null}),ct&&v.createElement("span",{className:qe},ct)))}return A},Vt=St,ar=g(21770),Xr=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName","classes"],vn=(0,v.forwardRef)(function(w,V){var Ie=w.autoComplete,se=w.onChange,st=w.onFocus,Ue=w.onBlur,Xe=w.onPressEnter,Ve=w.onKeyDown,ct=w.prefixCls,Ct=ct===void 0?"rc-input":ct,Bt=w.disabled,kt=w.htmlSize,Jt=w.className,Ft=w.maxLength,rr=w.suffix,Xt=w.showCount,pr=w.type,yr=pr===void 0?"text":pr,Ur=w.inputClassName,xn=w.classes,mn=(0,Rt.Z)(w,Xr),Mn=(0,ar.Z)(w.defaultValue,{value:w.value}),Pn=(0,c.Z)(Mn,2),Gn=Pn[0],ti=Pn[1],ii=(0,v.useState)(!1),b=(0,c.Z)(ii,2),A=b[0],I=b[1],T=(0,v.useRef)(null),H=function(zn){T.current&&Rr(T.current,zn)};(0,v.useImperativeHandle)(V,function(){return{focus:H,blur:function(){var zn;(zn=T.current)===null||zn===void 0||zn.blur()},setSelectionRange:function(zn,ei,Qn){var _n;(_n=T.current)===null||_n===void 0||_n.setSelectionRange(zn,ei,Qn)},select:function(){var zn;(zn=T.current)===null||zn===void 0||zn.select()},input:T.current}}),(0,v.useEffect)(function(){I(function(en){return en&&Bt?!1:en})},[Bt]);var te=function(zn){w.value===void 0&&ti(zn.target.value),T.current&&ue(T.current,zn,se)},Ae=function(zn){Xe&&zn.key==="Enter"&&Xe(zn),Ve==null||Ve(zn)},qe=function(zn){I(!0),st==null||st(zn)},Tt=function(zn){I(!1),Ue==null||Ue(zn)},Wt=function(zn){ti(""),H(),T.current&&ue(T.current,zn,se)},vr=function(){var zn=(0,ur.Z)(w,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","classes","wrapperClassName","htmlSize"]);return v.createElement("input",(0,U.Z)({autoComplete:Ie},zn,{onChange:te,onFocus:qe,onBlur:Tt,onKeyDown:Ae,className:re()(Ct,(0,ye.Z)({},"".concat(Ct,"-disabled"),Bt),Ur,xn==null?void 0:xn.input,!Rf(w)&&!vf(w)&&Jt),ref:T,size:kt,type:yr}))},Fr=function(){var zn=Number(Ft)>0;if(rr||Xt){var ei=Mt(Gn),Qn=(0,Qe.Z)(ei).length,_n=(0,pe.Z)(Xt)==="object"?Xt.formatter({value:ei,count:Qn,maxLength:Ft}):"".concat(Qn).concat(zn?" / ".concat(Ft):"");return v.createElement(v.Fragment,null,!!Xt&&v.createElement("span",{className:re()("".concat(Ct,"-show-count-suffix"),(0,ye.Z)({},"".concat(Ct,"-show-count-has-suffix"),!!rr))},_n),rr)}return null};return v.createElement(Vt,(0,U.Z)({},mn,{prefixCls:Ct,className:Jt,inputElement:vr(),handleReset:Wt,value:Mt(Gn),focused:A,triggerFocus:H,suffix:Fr(),disabled:Bt,classes:xn}))}),Sn=vn,Fn=Sn,Ci=g(4173),Hi=g(9708);function ba(w,V){const Ie=(0,v.useRef)([]),se=()=>{Ie.current.push(setTimeout(()=>{var st,Ue,Xe,Ve;!((st=w.current)===null||st===void 0)&&st.input&&((Ue=w.current)===null||Ue===void 0?void 0:Ue.input.getAttribute("type"))==="password"&&(!((Xe=w.current)===null||Xe===void 0)&&Xe.input.hasAttribute("value"))&&((Ve=w.current)===null||Ve===void 0||Ve.input.removeAttribute("value"))}))};return(0,v.useEffect)(()=>(V&&se(),()=>Ie.current.forEach(st=>{st&&clearTimeout(st)})),[]),se}function mo(w){return!!(w.prefix||w.suffix||w.allowClear)}var Qa=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie};function ks(w,V){if(!w)return;w.focus(V);const{cursor:Ie}=V||{};if(Ie){const se=w.value.length;switch(Ie){case"start":w.setSelectionRange(0,0);break;case"end":w.setSelectionRange(se,se);break;default:w.setSelectionRange(0,se);break}}}var lu=(0,v.forwardRef)((w,V)=>{const{prefixCls:Ie,bordered:se=!0,status:st,size:Ue,disabled:Xe,onBlur:Ve,onFocus:ct,suffix:Ct,allowClear:Bt,addonAfter:kt,addonBefore:Jt,className:Ft,rootClassName:rr,onChange:Xt}=w,pr=Qa(w,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange"]),{getPrefixCls:yr,direction:Ur,input:xn}=v.useContext(er.E_),mn=yr("input",Ie),Mn=(0,v.useRef)(null),[Pn,Gn]=cf(mn),{compactSize:ti,compactItemClassnames:ii}=(0,Ci.ri)(mn,Ur),b=v.useContext(fn.Z),A=ti||Ue||b,I=v.useContext(ol.Z),T=Xe!=null?Xe:I,{status:H,hasFeedback:te,feedbackIcon:Ae}=(0,v.useContext)(lo.aM),qe=(0,Hi.F)(H,st),Tt=mo(w)||!!te,Wt=(0,v.useRef)(Tt);(0,v.useEffect)(()=>{var _n;Tt&&Wt.current,Wt.current=Tt},[Tt]);const vr=ba(Mn,!0),Fr=_n=>{vr(),Ve==null||Ve(_n)},en=_n=>{vr(),ct==null||ct(_n)},zn=_n=>{vr(),Xt==null||Xt(_n)},ei=(te||Ct)&&v.createElement(v.Fragment,null,Ct,te&&Ae);let Qn;return typeof Bt=="object"&&(Bt!=null&&Bt.clearIcon)?Qn=Bt:Bt&&(Qn={clearIcon:v.createElement(If.Z,null)}),Pn(v.createElement(Fn,Object.assign({ref:(0,ke.sQ)(V,Mn),prefixCls:mn,autoComplete:xn==null?void 0:xn.autoComplete},pr,{disabled:T,onBlur:Fr,onFocus:en,suffix:ei,allowClear:Qn,className:re()(Ft,rr,ii),onChange:zn,addonAfter:kt&&v.createElement(Ci.BR,null,v.createElement(lo.Ux,{override:!0,status:!0},kt)),addonBefore:Jt&&v.createElement(Ci.BR,null,v.createElement(lo.Ux,{override:!0,status:!0},Jt)),classes:{input:re()({[`${mn}-sm`]:A==="small",[`${mn}-lg`]:A==="large",[`${mn}-rtl`]:Ur==="rtl",[`${mn}-borderless`]:!se},!Tt&&(0,Hi.Z)(mn,qe),Gn),affixWrapper:re()({[`${mn}-affix-wrapper-sm`]:A==="small",[`${mn}-affix-wrapper-lg`]:A==="large",[`${mn}-affix-wrapper-rtl`]:Ur==="rtl",[`${mn}-affix-wrapper-borderless`]:!se},(0,Hi.Z)(`${mn}-affix-wrapper`,qe,te),Gn),wrapper:re()({[`${mn}-group-rtl`]:Ur==="rtl"},Gn),group:re()({[`${mn}-group-wrapper-sm`]:A==="small",[`${mn}-group-wrapper-lg`]:A==="large",[`${mn}-group-wrapper-rtl`]:Ur==="rtl",[`${mn}-group-wrapper-disabled`]:T},(0,Hi.Z)(`${mn}-group-wrapper`,qe,te),Gn)}})))}),Iu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},_u=Iu,Mc=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:_u}))};Mc.displayName="EyeInvisibleOutlined";var tu=v.forwardRef(Mc),Fl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Ys=Fl,Du=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Ys}))};Du.displayName="EyeOutlined";var Bu=v.forwardRef(Du),Gl=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie};const ru=w=>w?v.createElement(Bu,null):v.createElement(tu,null),pl={click:"onClick",hover:"onMouseOver"};var Bh=v.forwardRef((w,V)=>{const{visibilityToggle:Ie=!0}=w,se=typeof Ie=="object"&&Ie.visible!==void 0,[st,Ue]=(0,v.useState)(()=>se?Ie.visible:!1),Xe=(0,v.useRef)(null);v.useEffect(()=>{se&&Ue(Ie.visible)},[se,Ie]);const Ve=ba(Xe),ct=()=>{const{disabled:Mn}=w;Mn||(st&&Ve(),Ue(Pn=>{var Gn;const ti=!Pn;return typeof Ie=="object"&&((Gn=Ie.onVisibleChange)===null||Gn===void 0||Gn.call(Ie,ti)),ti}))},Ct=Mn=>{const{action:Pn="click",iconRender:Gn=ru}=w,ti=pl[Pn]||"",ii=Gn(st),b={[ti]:ct,className:`${Mn}-icon`,key:"passwordIcon",onMouseDown:A=>{A.preventDefault()},onMouseUp:A=>{A.preventDefault()}};return v.cloneElement(v.isValidElement(ii)?ii:v.createElement("span",null,ii),b)},{className:Bt,prefixCls:kt,inputPrefixCls:Jt,size:Ft}=w,rr=Gl(w,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:Xt}=v.useContext(er.E_),pr=Xt("input",Jt),yr=Xt("input-password",kt),Ur=Ie&&Ct(yr),xn=re()(yr,Bt,{[`${yr}-${Ft}`]:!!Ft}),mn=Object.assign(Object.assign({},(0,ur.Z)(rr,["suffix","iconRender","visibilityToggle"])),{type:st?"text":"password",className:xn,prefixCls:pr,suffix:Ur});return Ft&&(mn.size=Ft),v.createElement(lu,Object.assign({ref:(0,ke.sQ)(V,Xe)},mn))}),hc=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie},Kf=v.forwardRef((w,V)=>{const{prefixCls:Ie,inputPrefixCls:se,className:st,size:Ue,suffix:Xe,enterButton:Ve=!1,addonAfter:ct,loading:Ct,disabled:Bt,onSearch:kt,onChange:Jt,onCompositionStart:Ft,onCompositionEnd:rr}=w,Xt=hc(w,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:pr,direction:yr}=v.useContext(er.E_),Ur=v.useContext(fn.Z),xn=v.useRef(!1),mn=pr("input-search",Ie),Mn=pr("input",se),{compactSize:Pn}=(0,Ci.ri)(mn,yr),Gn=Pn||Ue||Ur,ti=v.useRef(null),ii=Fr=>{Fr&&Fr.target&&Fr.type==="click"&&kt&&kt(Fr.target.value,Fr),Jt&&Jt(Fr)},b=Fr=>{var en;document.activeElement===((en=ti.current)===null||en===void 0?void 0:en.input)&&Fr.preventDefault()},A=Fr=>{var en,zn;kt&&kt((zn=(en=ti.current)===null||en===void 0?void 0:en.input)===null||zn===void 0?void 0:zn.value,Fr)},I=Fr=>{xn.current||Ct||A(Fr)},T=typeof Ve=="boolean"?v.createElement(vh.Z,null):null,H=`${mn}-button`;let te;const Ae=Ve||{},qe=Ae.type&&Ae.type.__ANT_BUTTON===!0;qe||Ae.type==="button"?te=(0,cs.Tm)(Ae,Object.assign({onMouseDown:b,onClick:Fr=>{var en,zn;(zn=(en=Ae==null?void 0:Ae.props)===null||en===void 0?void 0:en.onClick)===null||zn===void 0||zn.call(en,Fr),A(Fr)},key:"enterButton"},qe?{className:H,size:Gn}:{})):te=v.createElement($i.ZP,{className:H,type:Ve?"primary":void 0,size:Gn,disabled:Bt,key:"enterButton",onMouseDown:b,onClick:A,loading:Ct,icon:T},Ve),ct&&(te=[te,(0,cs.Tm)(ct,{key:"addonAfter"})]);const Tt=re()(mn,{[`${mn}-rtl`]:yr==="rtl",[`${mn}-${Gn}`]:!!Gn,[`${mn}-with-button`]:!!Ve},st),Wt=Fr=>{xn.current=!0,Ft==null||Ft(Fr)},vr=Fr=>{xn.current=!1,rr==null||rr(Fr)};return v.createElement(lu,Object.assign({ref:(0,ke.sQ)(ti,V),onPressEnter:I},Xt,{size:Gn,onCompositionStart:Wt,onCompositionEnd:vr,prefixCls:Mn,addonAfter:te,suffix:Xe,onChange:ii,className:Tt,disabled:Bt}))}),gh=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,yh=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Yf={},dc;function oe(w){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ie=w.getAttribute("id")||w.getAttribute("data-reactid")||w.getAttribute("name");if(V&&Yf[Ie])return Yf[Ie];var se=window.getComputedStyle(w),st=se.getPropertyValue("box-sizing")||se.getPropertyValue("-moz-box-sizing")||se.getPropertyValue("-webkit-box-sizing"),Ue=parseFloat(se.getPropertyValue("padding-bottom"))+parseFloat(se.getPropertyValue("padding-top")),Xe=parseFloat(se.getPropertyValue("border-bottom-width"))+parseFloat(se.getPropertyValue("border-top-width")),Ve=yh.map(function(Ct){return"".concat(Ct,":").concat(se.getPropertyValue(Ct))}).join(";"),ct={sizingStyle:Ve,paddingSize:Ue,borderSize:Xe,boxSizing:st};return V&&Ie&&(Yf[Ie]=ct),ct}function Fe(w){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;dc||(dc=document.createElement("textarea"),dc.setAttribute("tab-index","-1"),dc.setAttribute("aria-hidden","true"),document.body.appendChild(dc)),w.getAttribute("wrap")?dc.setAttribute("wrap",w.getAttribute("wrap")):dc.removeAttribute("wrap");var st=oe(w,V),Ue=st.paddingSize,Xe=st.borderSize,Ve=st.boxSizing,ct=st.sizingStyle;dc.setAttribute("style","".concat(ct,";").concat(gh)),dc.value=w.value||w.placeholder||"";var Ct=void 0,Bt=void 0,kt,Jt=dc.scrollHeight;if(Ve==="border-box"?Jt+=Xe:Ve==="content-box"&&(Jt-=Ue),Ie!==null||se!==null){dc.value=" ";var Ft=dc.scrollHeight-Ue;Ie!==null&&(Ct=Ft*Ie,Ve==="border-box"&&(Ct=Ct+Ue+Xe),Jt=Math.max(Ct,Jt)),se!==null&&(Bt=Ft*se,Ve==="border-box"&&(Bt=Bt+Ue+Xe),kt=Jt>Bt?"":"hidden",Jt=Math.min(Bt,Jt))}var rr={height:Jt,overflowY:kt,resize:"none"};return Ct&&(rr.minHeight=Ct),Bt&&(rr.maxHeight=Bt),rr}var Ze=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],rt=0,xt=1,Dt=2,$r=v.forwardRef(function(w,V){var Ie=w,se=Ie.prefixCls,st=Ie.onPressEnter,Ue=Ie.defaultValue,Xe=Ie.value,Ve=Ie.autoSize,ct=Ie.onResize,Ct=Ie.className,Bt=Ie.style,kt=Ie.disabled,Jt=Ie.onChange,Ft=Ie.onInternalAutoSize,rr=(0,Rt.Z)(Ie,Ze),Xt=(0,ar.Z)(Ue,{value:Xe,postState:function(_n){return _n!=null?_n:""}}),pr=(0,c.Z)(Xt,2),yr=pr[0],Ur=pr[1],xn=function(_n){Ur(_n.target.value),Jt==null||Jt(_n)},mn=v.useRef();v.useImperativeHandle(V,function(){return{textArea:mn.current}});var Mn=v.useMemo(function(){return Ve&&(0,pe.Z)(Ve)==="object"?[Ve.minRows,Ve.maxRows]:[]},[Ve]),Pn=(0,c.Z)(Mn,2),Gn=Pn[0],ti=Pn[1],ii=!!Ve,b=function(){try{if(document.activeElement===mn.current){var _n=mn.current,Xn=_n.selectionStart,ai=_n.selectionEnd,nn=_n.scrollTop;mn.current.setSelectionRange(Xn,ai),mn.current.scrollTop=nn}}catch(hi){}},A=v.useState(Dt),I=(0,c.Z)(A,2),T=I[0],H=I[1],te=v.useState(),Ae=(0,c.Z)(te,2),qe=Ae[0],Tt=Ae[1],Wt=function(){H(rt)};(0,N.Z)(function(){ii&&Wt()},[Xe,Gn,ti,ii]),(0,N.Z)(function(){if(T===rt)H(xt);else if(T===xt){var Qn=Fe(mn.current,!1,Gn,ti);H(Dt),Tt(Qn)}else b()},[T]);var vr=v.useRef(),Fr=function(){su.Z.cancel(vr.current)},en=function(_n){T===Dt&&(ct==null||ct(_n),Ve&&(Fr(),vr.current=(0,su.Z)(function(){Wt()})))};v.useEffect(function(){return Fr},[]);var zn=ii?qe:null,ei=(0,$e.Z)((0,$e.Z)({},Bt),zn);return(T===rt||T===xt)&&(ei.overflowY="hidden",ei.overflowX="hidden"),v.createElement(q.Z,{onResize:en,disabled:!(Ve||ct)},v.createElement("textarea",(0,U.Z)({},rr,{ref:mn,style:ei,className:re()(se,Ct,(0,ye.Z)({},"".concat(se,"-disabled"),kt)),disabled:kt,value:yr,onChange:xn})))}),En=$r,pi=["defaultValue","value","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled"];function rn(w,V){return(0,Qe.Z)(w||"").slice(0,V).join("")}function _i(w,V,Ie,se){var st=Ie;return w?st=rn(Ie,se):(0,Qe.Z)(V||"").length<Ie.length&&(0,Qe.Z)(Ie||"").length>se&&(st=V),st}var ga=v.forwardRef(function(w,V){var Ie=w.defaultValue,se=w.value,st=w.onChange,Ue=w.allowClear,Xe=w.maxLength,Ve=w.onCompositionStart,ct=w.onCompositionEnd,Ct=w.suffix,Bt=w.prefixCls,kt=Bt===void 0?"rc-textarea":Bt,Jt=w.classes,Ft=w.showCount,rr=w.className,Xt=w.style,pr=w.disabled,yr=(0,Rt.Z)(w,pi),Ur=(0,ar.Z)(Ie,{value:se,defaultValue:Ie}),xn=(0,c.Z)(Ur,2),mn=xn[0],Mn=xn[1],Pn=(0,v.useRef)(null),Gn=v.useState(!1),ti=(0,c.Z)(Gn,2),ii=ti[0],b=ti[1],A=v.useRef(),I=v.useRef(0),T=function(){Pn.current.textArea.focus()};(0,v.useImperativeHandle)(V,function(){return{resizableTextArea:Pn.current,focus:T,blur:function(){Pn.current.textArea.blur()}}});var H=Number(Xe)>0,te=function(Qn){b(!0),A.current=mn,I.current=Qn.currentTarget.selectionStart,Ve==null||Ve(Qn)},Ae=function(Qn){b(!1);var _n=Qn.currentTarget.value;if(H){var Xn,ai=I.current>=Xe+1||I.current===((Xn=A.current)===null||Xn===void 0?void 0:Xn.length);_n=_i(ai,A.current,_n,Xe)}_n!==mn&&(Mn(_n),ue(Qn.currentTarget,Qn,st,_n)),ct==null||ct(Qn)},qe=function(Qn){var _n=Qn.target.value;if(!ii&&H){var Xn=Qn.target.selectionStart>=Xe+1||Qn.target.selectionStart===_n.length||!Qn.target.selectionStart;_n=_i(Xn,mn,_n,Xe)}Mn(_n),ue(Qn.currentTarget,Qn,st,_n)},Tt=function(Qn){var _n=yr.onPressEnter,Xn=yr.onKeyDown;Qn.key==="Enter"&&_n&&_n(Qn),Xn==null||Xn(Qn)},Wt=function(Qn){Mn(""),T(),ue(Pn.current.textArea,Qn,st)},vr=Mt(mn);!ii&&H&&se==null&&(vr=rn(vr,Xe));var Fr=v.createElement(Vt,{value:vr,allowClear:Ue,handleReset:Wt,suffix:Ct,prefixCls:kt,classes:{affixWrapper:Jt==null?void 0:Jt.affixWrapper},disabled:pr,style:Xt,inputStyle:{resize:Xt==null?void 0:Xt.resize},inputElement:v.createElement(En,(0,U.Z)({},yr,{onKeyDown:Tt,onChange:qe,onCompositionStart:te,onCompositionEnd:Ae,className:re()(Ft?"":rr,Jt==null?void 0:Jt.textarea),style:!Ft&&Xt,disabled:pr,prefixCls:kt,ref:Pn}))});if(Ft){var en=(0,Qe.Z)(vr).length,zn;return(0,pe.Z)(Ft)==="object"?zn=Ft.formatter({value:vr,count:en,maxLength:Xe}):zn="".concat(en).concat(H?" / ".concat(Xe):""),v.createElement("div",{hidden:yr.hidden,className:re()("".concat(kt,"-show-count"),rr,Jt==null?void 0:Jt.countWrapper),style:Xt,"data-count":zn},Fr,v.createElement("span",{className:"".concat(kt,"-data-count")},zn))}return Fr}),ss=ga,To=ss,Ro=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie},ps=(0,v.forwardRef)((w,V)=>{var{prefixCls:Ie,bordered:se=!0,size:st,disabled:Ue,status:Xe,allowClear:Ve}=w,ct=Ro(w,["prefixCls","bordered","size","disabled","status","allowClear"]);const{getPrefixCls:Ct,direction:Bt}=v.useContext(er.E_),kt=v.useContext(fn.Z),Jt=st||kt,Ft=v.useContext(ol.Z),rr=Ue!=null?Ue:Ft,{status:Xt,hasFeedback:pr,feedbackIcon:yr}=v.useContext(lo.aM),Ur=(0,Hi.F)(Xt,Xe),xn=v.useRef(null);v.useImperativeHandle(V,()=>{var ti;return{resizableTextArea:(ti=xn.current)===null||ti===void 0?void 0:ti.resizableTextArea,focus:ii=>{var b,A;ks((A=(b=xn.current)===null||b===void 0?void 0:b.resizableTextArea)===null||A===void 0?void 0:A.textArea,ii)},blur:()=>{var ii;return(ii=xn.current)===null||ii===void 0?void 0:ii.blur()}}});const mn=Ct("input",Ie);let Mn;typeof Ve=="object"&&(Ve!=null&&Ve.clearIcon)?Mn=Ve:Ve&&(Mn={clearIcon:v.createElement(If.Z,null)});const[Pn,Gn]=cf(mn);return Pn(v.createElement(To,Object.assign({},ct,{disabled:rr,allowClear:Mn,classes:{affixWrapper:re()(`${mn}-textarea-affix-wrapper`,{[`${mn}-affix-wrapper-rtl`]:Bt==="rtl",[`${mn}-affix-wrapper-borderless`]:!se,[`${mn}-affix-wrapper-sm`]:Jt==="small",[`${mn}-affix-wrapper-lg`]:Jt==="large"},(0,Hi.Z)(`${mn}-affix-wrapper`,Ur),Gn),countWrapper:re()(`${mn}-textarea`,`${mn}-textarea-show-count`,Gn),textarea:re()({[`${mn}-borderless`]:!se,[`${mn}-sm`]:Jt==="small",[`${mn}-lg`]:Jt==="large"},(0,Hi.Z)(mn,Ur),Gn)},prefixCls:mn,suffix:pr&&v.createElement("span",{className:`${mn}-textarea-suffix`},yr),ref:xn})))});const zo=lu;zo.Group=mh,zo.Search=Kf,zo.TextArea=ps,zo.Password=Bh;var Ds=zo;function xu(w){let{value:V,onChange:Ie,filterSearch:se,tablePrefixCls:st,locale:Ue}=w;return se?v.createElement("div",{className:`${st}-filter-dropdown-search`},v.createElement(Ds,{prefix:v.createElement(vh.Z,null),placeholder:Ue.filterSearchPlaceholder,onChange:Ie,value:V,htmlSize:1,className:`${st}-filter-dropdown-search-input`})):null}var cu=xu;const tf=w=>{const{keyCode:V}=w;V===Vf.Z.ENTER&&w.stopPropagation()};var ac=w=>v.createElement("div",{className:w.className,onClick:V=>V.stopPropagation(),onKeyDown:tf},w.children);function ll(w){return w.some(V=>{let{children:Ie}=V;return Ie})}function wu(w,V){return typeof V=="string"||typeof V=="number"?V==null?void 0:V.toString().toLowerCase().includes(w.trim().toLowerCase()):!1}function Sl(w){let{filters:V,prefixCls:Ie,filteredKeys:se,filterMultiple:st,searchValue:Ue,filterSearch:Xe}=w;return V.map((Ve,ct)=>{const Ct=String(Ve.value);if(Ve.children)return{key:Ct||ct,label:Ve.text,popupClassName:`${Ie}-dropdown-submenu`,children:Sl({filters:Ve.children,prefixCls:Ie,filteredKeys:se,filterMultiple:st,searchValue:Ue,filterSearch:Xe})};const Bt=st?Hf:qa.ZP,kt={key:Ve.value!==void 0?Ct:ct,label:v.createElement(v.Fragment,null,v.createElement(Bt,{checked:se.includes(Ct)}),v.createElement("span",null,Ve.text))};return Ue.trim()?typeof Xe=="function"?Xe(Ue,Ve)?kt:null:wu(Ue,Ve.text)?kt:null:kt})}function Wl(w){var V,Ie;const{tablePrefixCls:se,prefixCls:st,column:Ue,dropdownPrefixCls:Xe,columnKey:Ve,filterMultiple:ct,filterMode:Ct="menu",filterSearch:Bt=!1,filterState:kt,triggerFilter:Jt,locale:Ft,children:rr,getPopupContainer:Xt}=w,{filterDropdownOpen:pr,onFilterDropdownOpenChange:yr,filterResetToDefaultFilteredValue:Ur,defaultFilteredValue:xn,filterDropdownVisible:mn,onFilterDropdownVisibleChange:Mn}=Ue,[Pn,Gn]=v.useState(!1),ti=!!(kt&&(!((V=kt.filteredKeys)===null||V===void 0)&&V.length||kt.forceFiltered)),ii=ua=>{Gn(ua),yr==null||yr(ua),Mn==null||Mn(ua)},b=(Ie=pr!=null?pr:mn)!==null&&Ie!==void 0?Ie:Pn,A=kt==null?void 0:kt.filteredKeys,[I,T]=sh(A||[]),H=ua=>{let{selectedKeys:Lo}=ua;T(Lo)},te=(ua,Lo)=>{let{node:Fa,checked:go}=Lo;H(ct?{selectedKeys:ua}:{selectedKeys:go&&Fa.key?[Fa.key]:[]})};v.useEffect(()=>{Pn&&H({selectedKeys:A||[]})},[A]);const[Ae,qe]=v.useState([]),Tt=ua=>{qe(ua)},[Wt,vr]=v.useState(""),Fr=ua=>{const{value:Lo}=ua.target;vr(Lo)};v.useEffect(()=>{Pn||vr("")},[Pn]);const en=ua=>{const Lo=ua&&ua.length?ua:null;if(Lo===null&&(!kt||!kt.filteredKeys)||(0,Z.Z)(Lo,kt==null?void 0:kt.filteredKeys,!0))return null;Jt({column:Ue,key:Ve,filteredKeys:Lo})},zn=()=>{ii(!1),en(I())},ei=function(){let{confirm:ua,closeDropdown:Lo}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{confirm:!1,closeDropdown:!1};ua&&en([]),Lo&&ii(!1),vr(""),T(Ur?(xn||[]).map(Fa=>String(Fa)):[])},Qn=function(){let{closeDropdown:ua}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0};ua&&ii(!1),en(I())},_n=ua=>{ua&&A!==void 0&&T(A||[]),ii(ua),!ua&&!Ue.filterDropdown&&zn()},Xn=re()({[`${Xe}-menu-without-submenu`]:!ll(Ue.filters||[])}),ai=ua=>{if(ua.target.checked){const Lo=_h(Ue==null?void 0:Ue.filters).map(Fa=>String(Fa));T(Lo)}else T([])},nn=ua=>{let{filters:Lo}=ua;return(Lo||[]).map((Fa,go)=>{const qs=String(Fa.value),e={title:Fa.text,key:Fa.value!==void 0?qs:go};return Fa.children&&(e.children=nn({filters:Fa.children})),e})},hi=ua=>{var Lo;return Object.assign(Object.assign({},ua),{text:ua.title,value:ua.key,children:((Lo=ua.children)===null||Lo===void 0?void 0:Lo.map(Fa=>hi(Fa)))||[]})};let vi;if(typeof Ue.filterDropdown=="function")vi=Ue.filterDropdown({prefixCls:`${Xe}-custom`,setSelectedKeys:ua=>H({selectedKeys:ua}),selectedKeys:I(),confirm:Qn,clearFilters:ei,filters:Ue.filters,visible:b,close:()=>{ii(!1)}});else if(Ue.filterDropdown)vi=Ue.filterDropdown;else{const ua=I()||[],Lo=()=>(Ue.filters||[]).length===0?v.createElement(Vl.Z,{image:Vl.Z.PRESENTED_IMAGE_SIMPLE,description:Ft.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}}):Ct==="tree"?v.createElement(v.Fragment,null,v.createElement(cu,{filterSearch:Bt,value:Wt,onChange:Fr,tablePrefixCls:se,locale:Ft}),v.createElement("div",{className:`${se}-filter-dropdown-tree`},ct?v.createElement(Hf,{checked:ua.length===_h(Ue.filters).length,indeterminate:ua.length>0&&ua.length<_h(Ue.filters).length,className:`${se}-filter-dropdown-checkall`,onChange:ai},Ft.filterCheckall):null,v.createElement(Jc,{checkable:!0,selectable:!1,blockNode:!0,multiple:ct,checkStrictly:!ct,className:`${Xe}-menu`,onCheck:te,checkedKeys:ua,selectedKeys:ua,showIcon:!1,treeData:nn({filters:Ue.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:Wt.trim()?go=>typeof Bt=="function"?Bt(Wt,hi(go)):wu(Wt,go.title):void 0}))):v.createElement(v.Fragment,null,v.createElement(cu,{filterSearch:Bt,value:Wt,onChange:Fr,tablePrefixCls:se,locale:Ft}),v.createElement(Ll.Z,{selectable:!0,multiple:ct,prefixCls:`${Xe}-menu`,className:Xn,onSelect:H,onDeselect:H,selectedKeys:ua,getPopupContainer:Xt,openKeys:Ae,onOpenChange:Tt,items:Sl({filters:Ue.filters||[],filterSearch:Bt,prefixCls:st,filteredKeys:I(),filterMultiple:ct,searchValue:Wt})})),Fa=()=>Ur?(0,Z.Z)((xn||[]).map(go=>String(go)),ua,!0):ua.length===0;vi=v.createElement(v.Fragment,null,Lo(),v.createElement("div",{className:`${st}-dropdown-btns`},v.createElement($i.ZP,{type:"link",size:"small",disabled:Fa(),onClick:()=>ei()},Ft.filterReset),v.createElement($i.ZP,{type:"primary",size:"small",onClick:zn},Ft.filterConfirm)))}Ue.filterDropdown&&(vi=v.createElement(jh.J,{selectable:void 0},vi));const Li=()=>v.createElement(ac,{className:`${st}-dropdown`},vi);let Vi;typeof Ue.filterIcon=="function"?Vi=Ue.filterIcon(ti):Ue.filterIcon?Vi=Ue.filterIcon:Vi=v.createElement(ca,null);const{direction:sa}=v.useContext(er.E_);return v.createElement("div",{className:`${st}-column`},v.createElement("span",{className:`${se}-column-title`},rr),v.createElement(fl.Z,{dropdownRender:Li,trigger:["click"],open:b,onOpenChange:_n,getPopupContainer:Xt,placement:sa==="rtl"?"bottomLeft":"bottomRight"},v.createElement("span",{role:"button",tabIndex:-1,className:re()(`${st}-trigger`,{active:ti}),onClick:ua=>{ua.stopPropagation()}},Vi)))}var Pc=Wl;function jc(w,V,Ie){let se=[];return(w||[]).forEach((st,Ue)=>{var Xe;const Ve=Yh(Ue,Ie);if(st.filters||"filterDropdown"in st||"onFilter"in st)if("filteredValue"in st){let ct=st.filteredValue;"filterDropdown"in st||(ct=(Xe=ct==null?void 0:ct.map(String))!==null&&Xe!==void 0?Xe:ct),se.push({column:st,key:xc(st,Ve),filteredKeys:ct,forceFiltered:st.filtered})}else se.push({column:st,key:xc(st,Ve),filteredKeys:V&&st.defaultFilteredValue?st.defaultFilteredValue:void 0,forceFiltered:st.filtered});"children"in st&&(se=[].concat((0,Qe.Z)(se),(0,Qe.Z)(jc(st.children,V,Ve))))}),se}function hu(w,V,Ie,se,st,Ue,Xe,Ve){return Ie.map((ct,Ct)=>{const Bt=Yh(Ct,Ve),{filterMultiple:kt=!0,filterMode:Jt,filterSearch:Ft}=ct;let rr=ct;if(rr.filters||rr.filterDropdown){const Xt=xc(rr,Bt),pr=se.find(yr=>{let{key:Ur}=yr;return Xt===Ur});rr=Object.assign(Object.assign({},rr),{title:yr=>v.createElement(Pc,{tablePrefixCls:w,prefixCls:`${w}-filter`,dropdownPrefixCls:V,column:rr,columnKey:Xt,filterState:pr,filterMultiple:kt,filterMode:Jt,filterSearch:Ft,triggerFilter:Ue,locale:st,getPopupContainer:Xe},Uh(ct.title,yr))})}return"children"in rr&&(rr=Object.assign(Object.assign({},rr),{children:hu(w,V,rr.children,se,st,Ue,Xe,Bt)})),rr})}function _h(w){let V=[];return(w||[]).forEach(Ie=>{let{value:se,children:st}=Ie;V.push(se),st&&(V=[].concat((0,Qe.Z)(V),(0,Qe.Z)(_h(st))))}),V}function Oc(w){const V={};return w.forEach(Ie=>{let{key:se,filteredKeys:st,column:Ue}=Ie;const{filters:Xe,filterDropdown:Ve}=Ue;if(Ve)V[se]=st||null;else if(Array.isArray(st)){const ct=_h(Xe);V[se]=ct.filter(Ct=>st.includes(String(Ct)))}else V[se]=null}),V}function ud(w,V){return V.reduce((Ie,se)=>{const{column:{onFilter:st,filters:Ue},filteredKeys:Xe}=se;return st&&Xe&&Xe.length?Ie.filter(Ve=>Xe.some(ct=>{const Ct=_h(Ue),Bt=Ct.findIndex(Jt=>String(Jt)===String(ct)),kt=Bt!==-1?Ct[Bt]:ct;return st(kt,Ve)})):Ie},w)}const Hd=w=>w.flatMap(V=>"children"in V?[V].concat((0,Qe.Z)(Hd(V.children||[]))):[V]);function Zu(w){let{prefixCls:V,dropdownPrefixCls:Ie,mergedColumns:se,onFilterChange:st,getPopupContainer:Ue,locale:Xe}=w;const Ve=Hd(se||[]),[ct,Ct]=v.useState(()=>jc(Ve,!0)),Bt=v.useMemo(()=>{const rr=jc(Ve,!1);if(rr.length===0)return rr;let Xt=!0,pr=!0;if(rr.forEach(yr=>{let{filteredKeys:Ur}=yr;Ur!==void 0?Xt=!1:pr=!1}),Xt){const yr=(Ve||[]).map((Ur,xn)=>xc(Ur,Yh(xn)));return ct.filter(Ur=>{let{key:xn}=Ur;return yr.includes(xn)}).map(Ur=>{const xn=Ve[yr.findIndex(mn=>mn===Ur.key)];return Object.assign(Object.assign({},Ur),{column:Object.assign(Object.assign({},Ur.column),xn),forceFiltered:xn.filtered})})}return rr},[Ve,ct]),kt=v.useMemo(()=>Oc(Bt),[Bt]),Jt=rr=>{const Xt=Bt.filter(pr=>{let{key:yr}=pr;return yr!==rr.key});Xt.push(rr),Ct(Xt),st(Oc(Xt),Xt)};return[rr=>hu(V,Ie,rr,Bt,Xe,Jt,Ue),Bt,kt]}var Sd=Zu;function Hc(w,V,Ie){const se=v.useRef({});function st(Ue){if(!se.current||se.current.data!==w||se.current.childrenColumnName!==V||se.current.getRowKey!==Ie){let Ve=function(ct){ct.forEach((Ct,Bt)=>{const kt=Ie(Ct,Bt);Xe.set(kt,Ct),Ct&&typeof Ct=="object"&&V in Ct&&Ve(Ct[V]||[])})};const Xe=new Map;Ve(w),se.current={data:w,childrenColumnName:V,kvMap:Xe,getRowKey:Ie}}return se.current.kvMap.get(Ue)}return[st]}function Nh(){const w=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let V=1;V<arguments.length;V++){const Ie=V<0||arguments.length<=V?void 0:arguments[V];Ie&&Object.keys(Ie).forEach(se=>{const st=Ie[se];st!==void 0&&(w[se]=st)})}return w}var up=Nh,_d=function(w,V){var Ie={};for(var se in w)Object.prototype.hasOwnProperty.call(w,se)&&V.indexOf(se)<0&&(Ie[se]=w[se]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,se=Object.getOwnPropertySymbols(w);st<se.length;st++)V.indexOf(se[st])<0&&Object.prototype.propertyIsEnumerable.call(w,se[st])&&(Ie[se[st]]=w[se[st]]);return Ie};const pp=10;function vp(w,V){const Ie={current:w.current,pageSize:w.pageSize};return Object.keys(V&&typeof V=="object"?V:{}).forEach(st=>{const Ue=w[st];typeof Ue!="function"&&(Ie[st]=Ue)}),Ie}function mp(w,V,Ie){const se=V&&typeof V=="object"?V:{},{total:st=0}=se,Ue=_d(se,["total"]),[Xe,Ve]=(0,v.useState)(()=>({current:"defaultCurrent"in Ue?Ue.defaultCurrent:1,pageSize:"defaultPageSize"in Ue?Ue.defaultPageSize:pp})),ct=up(Xe,Ue,{total:st>0?st:w}),Ct=Math.ceil((st||w)/ct.pageSize);ct.current>Ct&&(ct.current=Ct||1);const Bt=(Jt,Ft)=>{Ve({current:Jt!=null?Jt:1,pageSize:Ft||ct.pageSize})},kt=(Jt,Ft)=>{var rr;V&&((rr=V.onChange)===null||rr===void 0||rr.call(V,Jt,Ft)),Bt(Jt,Ft),Ie(Jt,Ft||(ct==null?void 0:ct.pageSize))};return V===!1?[{},()=>{}]:[Object.assign(Object.assign({},ct),{onChange:kt}),Bt]}var wd=g(55047);const ld={},gp="SELECT_ALL",Ah="SELECT_INVERT",kd="SELECT_NONE",xd=[];function Cd(w,V){let Ie=[];return(V||[]).forEach(se=>{Ie.push(se),se&&typeof se=="object"&&w in se&&(Ie=[].concat((0,Qe.Z)(Ie),(0,Qe.Z)(Cd(w,se[w]))))}),Ie}function vl(w,V){const{preserveSelectedRowKeys:Ie,selectedRowKeys:se,defaultSelectedRowKeys:st,getCheckboxProps:Ue,onChange:Xe,onSelect:Ve,onSelectAll:ct,onSelectInvert:Ct,onSelectNone:Bt,onSelectMultiple:kt,columnWidth:Jt,type:Ft,selections:rr,fixed:Xt,renderCell:pr,hideSelectAll:yr,checkStrictly:Ur=!0}=w||{},{prefixCls:xn,data:mn,pageData:Mn,getRecordByKey:Pn,getRowKey:Gn,expandType:ti,childrenColumnName:ii,locale:b,getPopupContainer:A}=V,[I,T]=(0,ar.Z)(se||st||xd,{value:se}),H=v.useRef(new Map),te=(0,v.useCallback)(hi=>{if(Ie){const vi=new Map;hi.forEach(Li=>{let Vi=Pn(Li);!Vi&&H.current.has(Li)&&(Vi=H.current.get(Li)),vi.set(Li,Vi)}),H.current=vi}},[Pn,Ie]);v.useEffect(()=>{te(I)},[I]);const{keyEntities:Ae}=(0,v.useMemo)(()=>Ur?{keyEntities:null}:Vh(mn,{externalGetKey:Gn,childrenPropName:ii}),[mn,Gn,Ur,ii]),qe=(0,v.useMemo)(()=>Cd(ii,Mn),[Mn,ii]),Tt=(0,v.useMemo)(()=>{const hi=new Map;return qe.forEach((vi,Li)=>{const Vi=Gn(vi,Li),sa=(Ue?Ue(vi):null)||{};hi.set(Vi,sa)}),hi},[qe,Gn,Ue]),Wt=(0,v.useCallback)(hi=>{var vi;return!!(!((vi=Tt.get(Gn(hi)))===null||vi===void 0)&&vi.disabled)},[Tt,Gn]),[vr,Fr]=(0,v.useMemo)(()=>{if(Ur)return[I||[],[]];const{checkedKeys:hi,halfCheckedKeys:vi}=Y(I,!0,Ae,Wt);return[hi||[],vi]},[I,Ur,Ae,Wt]),en=(0,v.useMemo)(()=>{const hi=Ft==="radio"?vr.slice(0,1):vr;return new Set(hi)},[vr,Ft]),zn=(0,v.useMemo)(()=>Ft==="radio"?new Set:new Set(Fr),[Fr,Ft]),[ei,Qn]=(0,v.useState)(null);v.useEffect(()=>{w||T(xd)},[!!w]);const _n=(0,v.useCallback)((hi,vi)=>{let Li,Vi;te(hi),Ie?(Li=hi,Vi=hi.map(sa=>H.current.get(sa))):(Li=[],Vi=[],hi.forEach(sa=>{const ua=Pn(sa);ua!==void 0&&(Li.push(sa),Vi.push(ua))})),T(Li),Xe==null||Xe(Li,Vi,{type:vi})},[T,Pn,Xe,Ie]),Xn=(0,v.useCallback)((hi,vi,Li,Vi)=>{if(Ve){const sa=Li.map(ua=>Pn(ua));Ve(Pn(hi),vi,sa,Vi)}_n(Li,"single")},[Ve,Pn,_n]),ai=(0,v.useMemo)(()=>!rr||yr?null:(rr===!0?[gp,Ah,kd]:rr).map(vi=>vi===gp?{key:"all",text:b.selectionAll,onSelect(){_n(mn.map((Li,Vi)=>Gn(Li,Vi)).filter(Li=>{const Vi=Tt.get(Li);return!(Vi!=null&&Vi.disabled)||en.has(Li)}),"all")}}:vi===Ah?{key:"invert",text:b.selectInvert,onSelect(){const Li=new Set(en);Mn.forEach((sa,ua)=>{const Lo=Gn(sa,ua),Fa=Tt.get(Lo);Fa!=null&&Fa.disabled||(Li.has(Lo)?Li.delete(Lo):Li.add(Lo))});const Vi=Array.from(Li);Ct&&Ct(Vi),_n(Vi,"invert")}}:vi===kd?{key:"none",text:b.selectNone,onSelect(){Bt==null||Bt(),_n(Array.from(en).filter(Li=>{const Vi=Tt.get(Li);return Vi==null?void 0:Vi.disabled}),"none")}}:vi).map(vi=>Object.assign(Object.assign({},vi),{onSelect:function(){for(var Li,Vi,sa=arguments.length,ua=new Array(sa),Lo=0;Lo<sa;Lo++)ua[Lo]=arguments[Lo];(Vi=vi.onSelect)===null||Vi===void 0||(Li=Vi).call.apply(Li,[vi].concat(ua)),Qn(null)}})),[rr,en,Mn,Gn,Ct,_n]);return[(0,v.useCallback)(hi=>{var vi;if(!w)return hi.filter(Q=>Q!==ld);let Li=(0,Qe.Z)(hi);const Vi=new Set(en),sa=qe.map(Gn).filter(Q=>!Tt.get(Q).disabled),ua=sa.every(Q=>Vi.has(Q)),Lo=sa.some(Q=>Vi.has(Q)),Fa=()=>{const Q=[];ua?sa.forEach(ut=>{Vi.delete(ut),Q.push(ut)}):sa.forEach(ut=>{Vi.has(ut)||(Vi.add(ut),Q.push(ut))});const we=Array.from(Vi);ct==null||ct(!ua,we.map(ut=>Pn(ut)),Q.map(ut=>Pn(ut))),_n(we,"all"),Qn(null)};let go;if(Ft!=="radio"){let Q;if(ai){const qt={getPopupContainer:A,items:ai.map((lr,xr)=>{const{key:Kr,text:qr,onSelect:dn}=lr;return{key:Kr||xr,onClick:()=>{dn==null||dn(sa)},label:qr}})};Q=v.createElement("div",{className:`${xn}-selection-extra`},v.createElement(fl.Z,{menu:qt,getPopupContainer:A},v.createElement("span",null,v.createElement(wd.Z,null))))}const we=qe.map((qt,lr)=>{const xr=Gn(qt,lr),Kr=Tt.get(xr)||{};return Object.assign({checked:Vi.has(xr)},Kr)}).filter(qt=>{let{disabled:lr}=qt;return lr}),ut=!!we.length&&we.length===qe.length,Nt=ut&&we.every(qt=>{let{checked:lr}=qt;return lr}),Ut=ut&&we.some(qt=>{let{checked:lr}=qt;return lr});go=!yr&&v.createElement("div",{className:`${xn}-selection`},v.createElement(Hf,{checked:ut?Nt:!!qe.length&&ua,indeterminate:ut?!Nt&&Ut:!ua&&Lo,onChange:Fa,disabled:qe.length===0||ut,"aria-label":Q?"Custom selection":"Select all",skipGroup:!0}),Q)}let qs;Ft==="radio"?qs=(Q,we,ut)=>{const Nt=Gn(we,ut),Ut=Vi.has(Nt);return{node:v.createElement(qa.ZP,Object.assign({},Tt.get(Nt),{checked:Ut,onClick:qt=>qt.stopPropagation(),onChange:qt=>{Vi.has(Nt)||Xn(Nt,!0,[Nt],qt.nativeEvent)}})),checked:Ut}}:qs=(Q,we,ut)=>{var Nt;const Ut=Gn(we,ut),qt=Vi.has(Ut),lr=zn.has(Ut),xr=Tt.get(Ut);let Kr;return ti==="nest"?Kr=lr:Kr=(Nt=xr==null?void 0:xr.indeterminate)!==null&&Nt!==void 0?Nt:lr,{node:v.createElement(Hf,Object.assign({},xr,{indeterminate:Kr,checked:qt,skipGroup:!0,onClick:qr=>qr.stopPropagation(),onChange:qr=>{let{nativeEvent:dn}=qr;const{shiftKey:cn}=dn;let Un=-1,ri=-1;if(cn&&Ur){const gi=new Set([ei,Ut]);sa.some((yi,Ii)=>{if(gi.has(yi))if(Un===-1)Un=Ii;else return ri=Ii,!0;return!1})}if(ri!==-1&&Un!==ri&&Ur){const gi=sa.slice(Un,ri+1),yi=[];qt?gi.forEach(Ji=>{Vi.has(Ji)&&(yi.push(Ji),Vi.delete(Ji))}):gi.forEach(Ji=>{Vi.has(Ji)||(yi.push(Ji),Vi.add(Ji))});const Ii=Array.from(Vi);kt==null||kt(!qt,Ii.map(Ji=>Pn(Ji)),yi.map(Ji=>Pn(Ji))),_n(Ii,"multiple")}else{const gi=vr;if(Ur){const yi=qt?fc(gi,Ut):oo(gi,Ut);Xn(Ut,!qt,yi,dn)}else{const yi=Y([].concat((0,Qe.Z)(gi),[Ut]),!0,Ae,Wt),{checkedKeys:Ii,halfCheckedKeys:Ji}=yi;let Wi=Ii;if(qt){const ja=new Set(Ii);ja.delete(Ut),Wi=Y(Array.from(ja),{checked:!1,halfCheckedKeys:Ji},Ae,Wt).checkedKeys}Xn(Ut,!qt,Wi,dn)}}Qn(qt?null:Ut)}})),checked:qt}};const e=(Q,we,ut)=>{const{node:Nt,checked:Ut}=qs(Q,we,ut);return pr?pr(Ut,we,ut,Nt):Nt};if(!Li.includes(ld))if(Li.findIndex(Q=>{var we;return((we=Q[bt])===null||we===void 0?void 0:we.columnType)==="EXPAND_COLUMN"})===0){const[Q,...we]=Li;Li=[Q,ld].concat((0,Qe.Z)(we))}else Li=[ld].concat((0,Qe.Z)(Li));const i=Li.indexOf(ld);Li=Li.filter((Q,we)=>Q!==ld||we===i);const l=Li[i-1],y=Li[i+1];let P=Xt;P===void 0&&((y==null?void 0:y.fixed)!==void 0?P=y.fixed:(l==null?void 0:l.fixed)!==void 0&&(P=l.fixed)),P&&l&&((vi=l[bt])===null||vi===void 0?void 0:vi.columnType)==="EXPAND_COLUMN"&&l.fixed===void 0&&(l.fixed=P);const j={fixed:P,width:Jt,className:`${xn}-selection-column`,title:w.columnTitle||go,render:e,[bt]:{className:`${xn}-selection-col`}};return Li.map(Q=>Q===ld?j:Q)},[Gn,qe,w,vr,en,zn,Jt,ai,ti,ei,Tt,kt,Xn,Wt]),en]}var Dd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},Fs=Dd,cd=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Fs}))};cd.displayName="CaretDownOutlined";var Vd=v.forwardRef(cd),Gd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},Ht=Gd,Zr=function(V,Ie){return v.createElement(ln.Z,(0,$e.Z)((0,$e.Z)({},V),{},{ref:Ie,icon:Ht}))};Zr.displayName="CaretUpOutlined";var On=v.forwardRef(Zr),wi=g(15335);const ia="ascend",Ai="descend";function ji(w){return typeof w.sorter=="object"&&typeof w.sorter.multiple=="number"?w.sorter.multiple:!1}function Ea(w){return typeof w=="function"?w:w&&typeof w=="object"&&w.compare?w.compare:!1}function Ma(w,V){return V?w[w.indexOf(V)+1]:w[0]}function Ia(w,V,Ie){let se=[];function st(Ue,Xe){se.push({column:Ue,key:xc(Ue,Xe),multiplePriority:ji(Ue),sortOrder:Ue.sortOrder})}return(w||[]).forEach((Ue,Xe)=>{const Ve=Yh(Xe,Ie);Ue.children?("sortOrder"in Ue&&st(Ue,Ve),se=[].concat((0,Qe.Z)(se),(0,Qe.Z)(Ia(Ue.children,V,Ve)))):Ue.sorter&&("sortOrder"in Ue?st(Ue,Ve):V&&Ue.defaultSortOrder&&se.push({column:Ue,key:xc(Ue,Ve),multiplePriority:ji(Ue),sortOrder:Ue.defaultSortOrder}))}),se}function Za(w,V,Ie,se,st,Ue,Xe,Ve){return(V||[]).map((ct,Ct)=>{const Bt=Yh(Ct,Ve);let kt=ct;if(kt.sorter){const Jt=kt.sortDirections||st,Ft=kt.showSorterTooltip===void 0?Xe:kt.showSorterTooltip,rr=xc(kt,Bt),Xt=Ie.find(ii=>{let{key:b}=ii;return b===rr}),pr=Xt?Xt.sortOrder:null,yr=Ma(Jt,pr),Ur=Jt.includes(ia)&&v.createElement(On,{className:re()(`${w}-column-sorter-up`,{active:pr===ia})}),xn=Jt.includes(Ai)&&v.createElement(Vd,{className:re()(`${w}-column-sorter-down`,{active:pr===Ai})}),{cancelSort:mn,triggerAsc:Mn,triggerDesc:Pn}=Ue||{};let Gn=mn;yr===Ai?Gn=Pn:yr===ia&&(Gn=Mn);const ti=typeof Ft=="object"?Ft:{title:Gn};kt=Object.assign(Object.assign({},kt),{className:re()(kt.className,{[`${w}-column-sort`]:pr}),title:ii=>{const b=v.createElement("div",{className:`${w}-column-sorters`},v.createElement("span",{className:`${w}-column-title`},Uh(ct.title,ii)),v.createElement("span",{className:re()(`${w}-column-sorter`,{[`${w}-column-sorter-full`]:!!(Ur&&xn)})},v.createElement("span",{className:`${w}-column-sorter-inner`,"aria-hidden":"true"},Ur,xn)));return Ft?v.createElement(wi.Z,Object.assign({},ti),b):b},onHeaderCell:ii=>{const b=ct.onHeaderCell&&ct.onHeaderCell(ii)||{},A=b.onClick,I=b.onKeyDown;b.onClick=te=>{se({column:ct,key:rr,sortOrder:yr,multiplePriority:ji(ct)}),A==null||A(te)},b.onKeyDown=te=>{te.keyCode===Vf.Z.ENTER&&(se({column:ct,key:rr,sortOrder:yr,multiplePriority:ji(ct)}),I==null||I(te))};const T=Gc(ct.title,{}),H=T==null?void 0:T.toString();return pr?b["aria-sort"]=pr==="ascend"?"ascending":"descending":b["aria-label"]=H||"",b.className=re()(b.className,`${w}-column-has-sorters`),b.tabIndex=0,ct.ellipsis&&(b.title=(T!=null?T:"").toString()),b}})}return"children"in kt&&(kt=Object.assign(Object.assign({},kt),{children:Za(w,kt.children,Ie,se,st,Ue,Xe,Bt)})),kt})}function Ha(w){const{column:V,sortOrder:Ie}=w;return{column:V,order:Ie,field:V.dataIndex,columnKey:V.key}}function $a(w){const V=w.filter(Ie=>{let{sortOrder:se}=Ie;return se}).map(Ha);return V.length===0&&w.length?Object.assign(Object.assign({},Ha(w[w.length-1])),{column:void 0}):V.length<=1?V[0]||{}:V}function ya(w,V,Ie){const se=V.slice().sort((Xe,Ve)=>Ve.multiplePriority-Xe.multiplePriority),st=w.slice(),Ue=se.filter(Xe=>{let{column:{sorter:Ve},sortOrder:ct}=Xe;return Ea(Ve)&&ct});return Ue.length?st.sort((Xe,Ve)=>{for(let ct=0;ct<Ue.length;ct+=1){const Ct=Ue[ct],{column:{sorter:Bt},sortOrder:kt}=Ct,Jt=Ea(Bt);if(Jt&&kt){const Ft=Jt(Xe,Ve,kt);if(Ft!==0)return kt===ia?Ft:-Ft}}return 0}).map(Xe=>{const Ve=Xe[Ie];return Ve?Object.assign(Object.assign({},Xe),{[Ie]:ya(Ve,V,Ie)}):Xe}):st}function Ua(w){let{prefixCls:V,mergedColumns:Ie,onSorterChange:se,sortDirections:st,tableLocale:Ue,showSorterTooltip:Xe}=w;const[Ve,ct]=v.useState(Ia(Ie,!0)),Ct=v.useMemo(()=>{let rr=!0;const Xt=Ia(Ie,!1);if(!Xt.length)return Ve;const pr=[];function yr(xn){rr?pr.push(xn):pr.push(Object.assign(Object.assign({},xn),{sortOrder:null}))}let Ur=null;return Xt.forEach(xn=>{Ur===null?(yr(xn),xn.sortOrder&&(xn.multiplePriority===!1?rr=!1:Ur=!0)):(Ur&&xn.multiplePriority!==!1||(rr=!1),yr(xn))}),pr},[Ie,Ve]),Bt=v.useMemo(()=>{const rr=Ct.map(Xt=>{let{column:pr,sortOrder:yr}=Xt;return{column:pr,order:yr}});return{sortColumns:rr,sortColumn:rr[0]&&rr[0].column,sortOrder:rr[0]&&rr[0].order}},[Ct]);function kt(rr){let Xt;rr.multiplePriority===!1||!Ct.length||Ct[0].multiplePriority===!1?Xt=[rr]:Xt=[].concat((0,Qe.Z)(Ct.filter(pr=>{let{key:yr}=pr;return yr!==rr.key})),[rr]),ct(Xt),se($a(Xt),Xt)}return[rr=>Za(V,rr,Ct,kt,st,Ue,Xe),Ct,Bt,()=>$a(Ct)]}function si(w,V){return w.map(Ie=>{const se=Object.assign({},Ie);return se.title=Uh(Ie.title,V),"children"in se&&(se.children=si(se.children,V)),se})}function Ni(w){return[v.useCallback(Ie=>si(Ie,w),[w])]}var Ra=or((w,V)=>{const{_renderTimes:Ie}=w,{_renderTimes:se}=V;return Ie!==se}),Ya=g(10274),Ga=w=>{const{componentCls:V}=w,Ie=`${w.lineWidth}px ${w.lineType} ${w.tableBorderColor}`,se=(st,Ue,Xe)=>({[`&${V}-${st}`]:{[`> ${V}-container`]:{[`> ${V}-content, > ${V}-body`]:{"> table > tbody > tr > td":{[`> ${V}-expanded-row-fixed`]:{margin:`-${Ue}px -${Xe+w.lineWidth}px`}}}}}});return{[`${V}-wrapper`]:{[`${V}${V}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${V}-title`]:{border:Ie,borderBottom:0},[`> ${V}-container`]:{borderInlineStart:Ie,[`
            > ${V}-content,
            > ${V}-header,
            > ${V}-body,
            > ${V}-summary
          `]:{"> table":{[`
                > thead > tr > th,
                > tbody > tr > td,
                > tfoot > tr > th,
                > tfoot > tr > td
              `]:{borderInlineEnd:Ie},"> thead":{"> tr:not(:last-child) > th":{borderBottom:Ie},"> tr > th::before":{backgroundColor:"transparent !important"}},[`
                > thead > tr,
                > tbody > tr,
                > tfoot > tr
              `]:{[`> ${V}-cell-fix-right-first::after`]:{borderInlineEnd:Ie}},"> tbody > tr > td":{[`> ${V}-expanded-row-fixed`]:{margin:`-${w.tablePaddingVertical}px -${w.tablePaddingHorizontal+w.lineWidth}px`,"&::after":{position:"absolute",top:0,insetInlineEnd:w.lineWidth,bottom:0,borderInlineEnd:Ie,content:'""'}}}}},[`
            > ${V}-content,
            > ${V}-header
          `]:{"> table":{borderTop:Ie}}},[`&${V}-scroll-horizontal`]:{[`> ${V}-container > ${V}-body`]:{"> table > tbody":{[`
                > tr${V}-expanded-row,
                > tr${V}-placeholder
              `]:{"> td":{borderInlineEnd:0}}}}}},se("middle",w.tablePaddingVerticalMiddle,w.tablePaddingHorizontalMiddle)),se("small",w.tablePaddingVerticalSmall,w.tablePaddingHorizontalSmall)),{[`> ${V}-footer`]:{border:Ie,borderTop:0}}),[`${V}-cell`]:{[`${V}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${w.lineWidth}px 0 ${w.lineWidth}px ${w.tableHeaderBg}`}}}}},xs=w=>{const{componentCls:V}=w;return{[`${V}-wrapper`]:{[`${V}-cell-ellipsis`]:Object.assign(Object.assign({},bs.vS),{wordBreak:"keep-all",[`
          &${V}-cell-fix-left-last,
          &${V}-cell-fix-right-first
        `]:{overflow:"visible",[`${V}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${V}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},oa=w=>{const{componentCls:V}=w;return{[`${V}-wrapper`]:{[`${V}-tbody > tr${V}-placeholder`]:{textAlign:"center",color:w.colorTextDisabled,"&:hover > td":{background:w.colorBgContainer}}}}};const Zo=w=>({color:w.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${w.motionDurationSlow}`,"&:focus, &:hover":{color:w.colorLinkHover},"&:active":{color:w.colorLinkActive}});var Pa=w=>{const{componentCls:V,antCls:Ie,controlInteractiveSize:se,motionDurationSlow:st,lineWidth:Ue,paddingXS:Xe,lineType:Ve,tableBorderColor:ct,tableExpandIconBg:Ct,tableExpandColumnWidth:Bt,borderRadius:kt,fontSize:Jt,fontSizeSM:Ft,lineHeight:rr,tablePaddingVertical:Xt,tablePaddingHorizontal:pr,tableExpandedRowBg:yr,paddingXXS:Ur}=w,xn=se/2-Ue,mn=xn*2+Ue*3,Mn=`${Ue}px ${Ve} ${ct}`,Pn=Ur-Ue;return{[`${V}-wrapper`]:{[`${V}-expand-icon-col`]:{width:Bt},[`${V}-row-expand-icon-cell`]:{textAlign:"center",[`${V}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${V}-row-indent`]:{height:1,float:"left"},[`${V}-row-expand-icon`]:Object.assign(Object.assign({},Zo(w)),{position:"relative",float:"left",boxSizing:"border-box",width:mn,height:mn,padding:0,color:"inherit",lineHeight:`${mn}px`,background:Ct,border:Mn,borderRadius:kt,transform:`scale(${se/mn})`,transition:`all ${st}`,userSelect:"none",["&:focus, &:hover, &:active"]:{borderColor:"currentcolor"},["&::before, &::after"]:{position:"absolute",background:"currentcolor",transition:`transform ${st} ease-out`,content:'""'},"&::before":{top:xn,insetInlineEnd:Pn,insetInlineStart:Pn,height:Ue},"&::after":{top:Pn,bottom:Pn,insetInlineStart:xn,width:Ue,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${V}-row-indent + ${V}-row-expand-icon`]:{marginTop:(Jt*rr-Ue*3)/2-Math.ceil((Ft*1.4-Ue*3)/2),marginInlineEnd:Xe},[`tr${V}-expanded-row`]:{"&, &:hover":{"> td":{background:yr}},[`${Ie}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"auto"}}},[`${V}-expanded-row-fixed`]:{position:"relative",margin:`-${Xt}px -${pr}px`,padding:`${Xt}px ${pr}px`}}}},Oa=w=>{const{componentCls:V,antCls:Ie,iconCls:se,tableFilterDropdownWidth:st,tableFilterDropdownSearchWidth:Ue,paddingXXS:Xe,paddingXS:Ve,colorText:ct,lineWidth:Ct,lineType:Bt,tableBorderColor:kt,tableHeaderIconColor:Jt,fontSizeSM:Ft,tablePaddingHorizontal:rr,borderRadius:Xt,motionDurationSlow:pr,colorTextDescription:yr,colorPrimary:Ur,tableHeaderFilterActiveBg:xn,colorTextDisabled:mn,tableFilterDropdownBg:Mn,tableFilterDropdownHeight:Pn,controlItemBgHover:Gn,controlItemBgActive:ti,boxShadowSecondary:ii}=w,b=`${Ie}-dropdown`,A=`${V}-filter-dropdown`,I=`${Ie}-tree`,T=`${Ct}px ${Bt} ${kt}`;return[{[`${V}-wrapper`]:{[`${V}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${V}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:-Xe,marginInline:`${Xe}px ${-rr/2}px`,padding:`0 ${Xe}px`,color:Jt,fontSize:Ft,borderRadius:Xt,cursor:"pointer",transition:`all ${pr}`,"&:hover":{color:yr,background:xn},"&.active":{color:Ur}}}},{[`${Ie}-dropdown`]:{[A]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{minWidth:st,backgroundColor:Mn,borderRadius:Xt,boxShadow:ii,[`${b}-menu`]:{maxHeight:Pn,overflowX:"hidden",border:0,boxShadow:"none","&:empty::after":{display:"block",padding:`${Ve}px 0`,color:mn,fontSize:Ft,textAlign:"center",content:'"Not Found"'}},[`${A}-tree`]:{paddingBlock:`${Ve}px 0`,paddingInline:Ve,[I]:{padding:0},[`${I}-treenode ${I}-node-content-wrapper:hover`]:{backgroundColor:Gn},[`${I}-treenode-checkbox-checked ${I}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:ti}}},[`${A}-search`]:{padding:Ve,borderBottom:T,"&-input":{input:{minWidth:Ue},[se]:{color:mn}}},[`${A}-checkall`]:{width:"100%",marginBottom:Xe,marginInlineStart:Xe},[`${A}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${Ve-Ct}px ${Ve}px`,overflow:"hidden",borderTop:T}})}},{[`${Ie}-dropdown ${A}, ${A}-submenu`]:{[`${Ie}-checkbox-wrapper + span`]:{paddingInlineStart:Ve,color:ct},["> ul"]:{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},Bs=w=>{const{componentCls:V,lineWidth:Ie,colorSplit:se,motionDurationSlow:st,zIndexTableFixed:Ue,tableBg:Xe,zIndexTableSticky:Ve}=w,ct=se;return{[`${V}-wrapper`]:{[`
        ${V}-cell-fix-left,
        ${V}-cell-fix-right
      `]:{position:"sticky !important",zIndex:Ue,background:Xe},[`
        ${V}-cell-fix-left-first::after,
        ${V}-cell-fix-left-last::after
      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:-Ie,width:30,transform:"translateX(100%)",transition:`box-shadow ${st}`,content:'""',pointerEvents:"none"},[`${V}-cell-fix-left-all::after`]:{display:"none"},[`
        ${V}-cell-fix-right-first::after,
        ${V}-cell-fix-right-last::after
      `]:{position:"absolute",top:0,bottom:-Ie,left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${st}`,content:'""',pointerEvents:"none"},[`${V}-container`]:{"&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:Ve+1,width:30,transition:`box-shadow ${st}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${V}-ping-left`]:{[`&:not(${V}-has-fix-left) ${V}-container`]:{position:"relative","&::before":{boxShadow:`inset 10px 0 8px -8px ${ct}`}},[`
          ${V}-cell-fix-left-first::after,
          ${V}-cell-fix-left-last::after
        `]:{boxShadow:`inset 10px 0 8px -8px ${ct}`},[`${V}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${V}-ping-right`]:{[`&:not(${V}-has-fix-right) ${V}-container`]:{position:"relative","&::after":{boxShadow:`inset -10px 0 8px -8px ${ct}`}},[`
          ${V}-cell-fix-right-first::after,
          ${V}-cell-fix-right-last::after
        `]:{boxShadow:`inset -10px 0 8px -8px ${ct}`}}}}},yo=w=>{const{componentCls:V,antCls:Ie}=w;return{[`${V}-wrapper`]:{[`${V}-pagination${Ie}-pagination`]:{margin:`${w.margin}px 0`},[`${V}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:w.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}},zs=w=>{const{componentCls:V,tableRadius:Ie}=w;return{[`${V}-wrapper`]:{[V]:{[`${V}-title, ${V}-header`]:{borderRadius:`${Ie}px ${Ie}px 0 0`},[`${V}-title + ${V}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,table:{borderRadius:0,"> thead > tr:first-child":{"th:first-child":{borderRadius:0},"th:last-child":{borderRadius:0}}}},"&-container":{borderStartStartRadius:Ie,borderStartEndRadius:Ie,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:Ie},"> *:last-child":{borderStartEndRadius:Ie}}},"&-footer":{borderRadius:`0 0 ${Ie}px ${Ie}px`}}}}},Gu=w=>{const{componentCls:V}=w;return{[`${V}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${V}-pagination-left`]:{justifyContent:"flex-end"},[`${V}-pagination-right`]:{justifyContent:"flex-start"},[`${V}-row-expand-icon`]:{"&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${V}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"}}}}},Au=w=>{const{componentCls:V,antCls:Ie,iconCls:se,fontSizeIcon:st,paddingXS:Ue,tableHeaderIconColor:Xe,tableHeaderIconColorHover:Ve}=w;return{[`${V}-wrapper`]:{[`${V}-selection-col`]:{width:w.tableSelectionColumnWidth},[`${V}-bordered ${V}-selection-col`]:{width:w.tableSelectionColumnWidth+Ue*2},[`
        table tr th${V}-selection-column,
        table tr td${V}-selection-column
      `]:{paddingInlineEnd:w.paddingXS,paddingInlineStart:w.paddingXS,textAlign:"center",[`${Ie}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${V}-selection-column${V}-cell-fix-left`]:{zIndex:w.zIndexTableFixed+1},[`table tr th${V}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${V}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${V}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${w.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:`${w.tablePaddingHorizontal/4}px`,[se]:{color:Xe,fontSize:st,verticalAlign:"baseline","&:hover":{color:Ve}}}}}},Xl=w=>{const{componentCls:V}=w,Ie=(se,st,Ue,Xe)=>({[`${V}${V}-${se}`]:{fontSize:Xe,[`
        ${V}-title,
        ${V}-footer,
        ${V}-thead > tr > th,
        ${V}-tbody > tr > td,
        tfoot > tr > th,
        tfoot > tr > td
      `]:{padding:`${st}px ${Ue}px`},[`${V}-filter-trigger`]:{marginInlineEnd:`-${Ue/2}px`},[`${V}-expanded-row-fixed`]:{margin:`-${st}px -${Ue}px`},[`${V}-tbody`]:{[`${V}-wrapper:only-child ${V}`]:{marginBlock:`-${st}px`,marginInline:`${w.tableExpandColumnWidth-Ue}px -${Ue}px`}},[`${V}-selection-column`]:{paddingInlineStart:`${Ue/4}px`}}});return{[`${V}-wrapper`]:Object.assign(Object.assign({},Ie("middle",w.tablePaddingVerticalMiddle,w.tablePaddingHorizontalMiddle,w.tableFontSizeMiddle)),Ie("small",w.tablePaddingVerticalSmall,w.tablePaddingHorizontalSmall,w.tableFontSizeSmall))}},wl=w=>{const{componentCls:V,marginXXS:Ie,fontSizeIcon:se,tableHeaderIconColor:st,tableHeaderIconColorHover:Ue}=w;return{[`${V}-wrapper`]:{[`${V}-thead th${V}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${w.motionDurationSlow}`,"&:hover":{background:w.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:w.colorPrimary},[`
          &${V}-cell-fix-left:hover,
          &${V}-cell-fix-right:hover
        `]:{background:w.tableFixedHeaderSortActiveBg}},[`${V}-thead th${V}-column-sort`]:{background:w.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${V}-column-sort`]:{background:w.tableBodySortBg},[`${V}-column-title`]:{position:"relative",zIndex:1,flex:1},[`${V}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${V}-column-sorter`]:{marginInlineStart:Ie,color:st,fontSize:0,transition:`color ${w.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:se,"&.active":{color:w.colorPrimary}},[`${V}-column-sorter-up + ${V}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${V}-column-sorters:hover ${V}-column-sorter`]:{color:Ue}}}},mf=w=>{const{componentCls:V,opacityLoading:Ie,tableScrollThumbBg:se,tableScrollThumbBgHover:st,tableScrollThumbSize:Ue,tableScrollBg:Xe,zIndexTableSticky:Ve}=w,ct=`${w.lineWidth}px ${w.lineType} ${w.tableBorderColor}`;return{[`${V}-wrapper`]:{[`${V}-sticky`]:{"&-holder":{position:"sticky",zIndex:Ve,background:w.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${Ue}px !important`,zIndex:Ve,display:"flex",alignItems:"center",background:Xe,borderTop:ct,opacity:Ie,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:Ue,backgroundColor:se,borderRadius:100,transition:`all ${w.motionDurationSlow}, transform none`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:st}}}}}}},pc=w=>{const{componentCls:V,lineWidth:Ie,tableBorderColor:se}=w,st=`${Ie}px ${w.lineType} ${se}`;return{[`${V}-wrapper`]:{[`${V}-summary`]:{position:"relative",zIndex:w.zIndexTableFixed,background:w.tableBg,"> tr":{"> th, > td":{borderBottom:st}}},[`div${V}-summary`]:{boxShadow:`0 -${Ie}px 0 ${se}`}}}};const fu=w=>{const{componentCls:V,fontWeightStrong:Ie,tablePaddingVertical:se,tablePaddingHorizontal:st,lineWidth:Ue,lineType:Xe,tableBorderColor:Ve,tableFontSize:ct,tableBg:Ct,tableRadius:Bt,tableHeaderTextColor:kt,motionDurationMid:Jt,tableHeaderBg:Ft,tableHeaderCellSplitColor:rr,tableRowHoverBg:Xt,tableSelectedRowBg:pr,tableSelectedRowHoverBg:yr,tableFooterTextColor:Ur,tableFooterBg:xn,paddingContentVerticalLG:mn}=w,Mn=`${Ue}px ${Xe} ${Ve}`;return{[`${V}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},(0,bs.dF)()),{[V]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{fontSize:ct,background:Ct,borderRadius:`${Bt}px ${Bt}px 0 0`}),table:{width:"100%",textAlign:"start",borderRadius:`${Bt}px ${Bt}px 0 0`,borderCollapse:"separate",borderSpacing:0},[`
          ${V}-thead > tr > th,
          ${V}-tbody > tr > td,
          tfoot > tr > th,
          tfoot > tr > td
        `]:{position:"relative",padding:`${mn}px ${st}px`,overflowWrap:"break-word"},[`${V}-title`]:{padding:`${se}px ${st}px`},[`${V}-thead`]:{[`
          > tr > th,
          > tr > td
        `]:{position:"relative",color:kt,fontWeight:Ie,textAlign:"start",background:Ft,borderBottom:Mn,transition:`background ${Jt} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${V}-selection-column):not(${V}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:rr,transform:"translateY(-50%)",transition:`background-color ${Jt}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${V}-tbody`]:{"> tr":{"> td":{transition:`background ${Jt}, border-color ${Jt}`,borderBottom:Mn,[`
              > ${V}-wrapper:only-child,
              > ${V}-expanded-row-fixed > ${V}-wrapper:only-child
            `]:{[V]:{marginBlock:`-${se}px`,marginInline:`${w.tableExpandColumnWidth-st}px -${st}px`,[`${V}-tbody > tr:last-child > td`]:{borderBottom:0,"&:first-child, &:last-child":{borderRadius:0}}}}},[`
            &${V}-row:hover > td,
            > td${V}-cell-row-hover
          `]:{background:Xt},[`&${V}-row-selected`]:{"> td":{background:pr},"&:hover > td":{background:yr}}}},[`${V}-footer`]:{padding:`${se}px ${st}px`,color:Ur,background:xn}})}};var wf=(0,gl.Z)("Table",w=>{const{controlItemBgActive:V,controlItemBgActiveHover:Ie,colorTextPlaceholder:se,colorTextHeading:st,colorSplit:Ue,colorBorderSecondary:Xe,fontSize:Ve,padding:ct,paddingXS:Ct,paddingSM:Bt,controlHeight:kt,colorFillAlter:Jt,colorIcon:Ft,colorIconHover:rr,opacityLoading:Xt,colorBgContainer:pr,borderRadiusLG:yr,colorFillContent:Ur,colorFillSecondary:xn,controlInteractiveSize:mn}=w,Mn=new Ya.C(Ft),Pn=new Ya.C(rr),Gn=V,ti=2,ii=new Ya.C(xn).onBackground(pr).toHexShortString(),b=new Ya.C(Ur).onBackground(pr).toHexShortString(),A=new Ya.C(Jt).onBackground(pr).toHexShortString(),I=(0,Xs.TS)(w,{tableFontSize:Ve,tableBg:pr,tableRadius:yr,tablePaddingVertical:ct,tablePaddingHorizontal:ct,tablePaddingVerticalMiddle:Bt,tablePaddingHorizontalMiddle:Ct,tablePaddingVerticalSmall:Ct,tablePaddingHorizontalSmall:Ct,tableBorderColor:Xe,tableHeaderTextColor:st,tableHeaderBg:A,tableFooterTextColor:st,tableFooterBg:A,tableHeaderCellSplitColor:Xe,tableHeaderSortBg:ii,tableHeaderSortHoverBg:b,tableHeaderIconColor:Mn.clone().setAlpha(Mn.getAlpha()*Xt).toRgbString(),tableHeaderIconColorHover:Pn.clone().setAlpha(Pn.getAlpha()*Xt).toRgbString(),tableBodySortBg:A,tableFixedHeaderSortActiveBg:ii,tableHeaderFilterActiveBg:Ur,tableFilterDropdownBg:pr,tableRowHoverBg:A,tableSelectedRowBg:Gn,tableSelectedRowHoverBg:Ie,zIndexTableFixed:ti,zIndexTableSticky:ti+1,tableFontSizeMiddle:Ve,tableFontSizeSmall:Ve,tableSelectionColumnWidth:kt,tableExpandIconBg:pr,tableExpandColumnWidth:mn+2*w.padding,tableExpandedRowBg:Jt,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:se,tableScrollThumbBgHover:st,tableScrollBg:Ue});return[fu(I),yo(I),pc(I),wl(I),Oa(I),Ga(I),zs(I),Pa(I),pc(I),oa(I),Au(I),Bs(I),mf(I),xs(I),Xl(I),Gu(I)]});const Uu=[];function qf(w,V){const{prefixCls:Ie,className:se,rootClassName:st,style:Ue,size:Xe,bordered:Ve,dropdownPrefixCls:ct,dataSource:Ct,pagination:Bt,rowSelection:kt,rowKey:Jt="key",rowClassName:Ft,columns:rr,children:Xt,childrenColumnName:pr,onChange:yr,getPopupContainer:Ur,loading:xn,expandIcon:mn,expandable:Mn,expandedRowRender:Pn,expandIconColumnIndex:Gn,indentSize:ti,scroll:ii,sortDirections:b,locale:A,showSorterTooltip:I=!0}=w,T=v.useMemo(()=>rr||Xi(Xt),[rr,Xt]),H=v.useMemo(()=>T.some(Wi=>Wi.responsive),[T]),te=Ei(H),Ae=v.useMemo(()=>{const Wi=new Set(Object.keys(te).filter(ja=>te[ja]));return T.filter(ja=>!ja.responsive||ja.responsive.some(Jn=>Wi.has(Jn)))},[T,te]),qe=(0,ur.Z)(w,["className","style","columns"]),Tt=v.useContext(fn.Z),{locale:Wt=qi.Z,direction:vr,renderEmpty:Fr,getPrefixCls:en}=v.useContext(er.E_),zn=Xe||Tt,ei=Object.assign(Object.assign({},Wt.Table),A),Qn=Ct||Uu,_n=en("table",Ie),Xn=en("dropdown",ct),ai=Object.assign({childrenColumnName:pr,expandIconColumnIndex:Gn},Mn),{childrenColumnName:nn="children"}=ai,hi=v.useMemo(()=>Qn.some(Wi=>Wi==null?void 0:Wi[nn])?"nest":Pn||Mn&&Mn.expandedRowRender?"row":null,[Qn]),vi={body:v.useRef()},Li=v.useMemo(()=>typeof Jt=="function"?Jt:Wi=>Wi==null?void 0:Wi[Jt],[Jt]),[Vi]=Hc(Qn,nn,Li),sa={},ua=function(Wi,ja){let Jn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const la=Object.assign(Object.assign({},sa),Wi);Jn&&(sa.resetPagination(),la.pagination.current&&(la.pagination.current=1),Bt&&Bt.onChange&&Bt.onChange(1,la.pagination.pageSize)),ii&&ii.scrollToFirstRowOnChange!==!1&&vi.body.current&&_c(0,{getContainer:()=>vi.body.current}),yr==null||yr(la.pagination,la.filters,la.sorter,{currentDataSource:ud(ya(Qn,la.sorterStates,nn),la.filterStates),action:ja})},Lo=(Wi,ja)=>{ua({sorter:Wi,sorterStates:ja},"sort",!1)},[Fa,go,qs,e]=Ua({prefixCls:_n,mergedColumns:Ae,onSorterChange:Lo,sortDirections:b||["ascend","descend"],tableLocale:ei,showSorterTooltip:I}),i=v.useMemo(()=>ya(Qn,go,nn),[Qn,go]);sa.sorter=e(),sa.sorterStates=go;const l=(Wi,ja)=>{ua({filters:Wi,filterStates:ja},"filter",!0)},[y,P,j]=Sd({prefixCls:_n,locale:ei,dropdownPrefixCls:Xn,mergedColumns:Ae,onFilterChange:l,getPopupContainer:Ur}),Q=ud(i,P);sa.filters=j,sa.filterStates=P;const we=v.useMemo(()=>{const Wi={};return Object.keys(j).forEach(ja=>{j[ja]!==null&&(Wi[ja]=j[ja])}),Object.assign(Object.assign({},qs),{filters:Wi})},[qs,j]),[ut]=Ni(we),Nt=(Wi,ja)=>{ua({pagination:Object.assign(Object.assign({},sa.pagination),{current:Wi,pageSize:ja})},"paginate")},[Ut,qt]=mp(Q.length,Bt,Nt);sa.pagination=Bt===!1?{}:vp(Ut,Bt),sa.resetPagination=qt;const lr=v.useMemo(()=>{if(Bt===!1||!Ut.pageSize)return Q;const{current:Wi=1,total:ja,pageSize:Jn=pp}=Ut;return Q.length<ja?Q.length>Jn?Q.slice((Wi-1)*Jn,Wi*Jn):Q:Q.slice((Wi-1)*Jn,Wi*Jn)},[!!Bt,Q,Ut&&Ut.current,Ut&&Ut.pageSize,Ut&&Ut.total]),[xr,Kr]=vl(kt,{prefixCls:_n,data:Q,pageData:lr,getRowKey:Li,getRecordByKey:Vi,expandType:hi,childrenColumnName:nn,locale:ei,getPopupContainer:Ur}),qr=(Wi,ja,Jn)=>{let la;return typeof Ft=="function"?la=re()(Ft(Wi,ja,Jn)):la=re()(Ft),re()({[`${_n}-row-selected`]:Kr.has(Li(Wi,ja))},la)};ai.__PARENT_RENDER_ICON__=ai.expandIcon,ai.expandIcon=ai.expandIcon||mn||ff(ei),hi==="nest"&&ai.expandIconColumnIndex===void 0?ai.expandIconColumnIndex=kt?1:0:ai.expandIconColumnIndex>0&&kt&&(ai.expandIconColumnIndex-=1),typeof ai.indentSize!="number"&&(ai.indentSize=typeof ti=="number"?ti:15);const dn=v.useCallback(Wi=>ut(xr(y(Fa(Wi)))),[Fa,y,xr]);let cn,Un;if(Bt!==!1&&(Ut!=null&&Ut.total)){let Wi;Ut.size?Wi=Ut.size:Wi=zn==="small"||zn==="middle"?"small":void 0;const ja=ea=>v.createElement(Kl,Object.assign({},Ut,{className:re()(`${_n}-pagination ${_n}-pagination-${ea}`,Ut.className),size:Wi})),Jn=vr==="rtl"?"left":"right",{position:la}=Ut;if(la!==null&&Array.isArray(la)){const ea=la.find(Ja=>Ja.includes("top")),bo=la.find(Ja=>Ja.includes("bottom")),Eo=la.every(Ja=>`${Ja}`=="none");!ea&&!bo&&!Eo&&(Un=ja(Jn)),ea&&(cn=ja(ea.toLowerCase().replace("top",""))),bo&&(Un=ja(bo.toLowerCase().replace("bottom","")))}else Un=ja(Jn)}let ri;typeof xn=="boolean"?ri={spinning:xn}:typeof xn=="object"&&(ri=Object.assign({spinning:!0},xn));const[gi,yi]=wf(_n),Ii=re()(`${_n}-wrapper`,{[`${_n}-wrapper-rtl`]:vr==="rtl"},se,st,yi),Ji=A&&A.emptyText||(Fr==null?void 0:Fr("Table"))||v.createElement(sn.Z,{componentName:"Table"});return gi(v.createElement("div",{ref:V,className:Ii,style:Ue},v.createElement(dl.Z,Object.assign({spinning:!1},ri),cn,v.createElement(Ra,Object.assign({},qe,{columns:Ae,direction:vr,expandable:ai,prefixCls:_n,className:re()({[`${_n}-middle`]:zn==="middle",[`${_n}-small`]:zn==="small",[`${_n}-bordered`]:Ve,[`${_n}-empty`]:Qn.length===0}),data:lr,rowKey:Li,rowClassName:qr,emptyText:Ji,internalHooks:Rs,internalRefs:vi,transformColumns:dn})),Un)))}var js=v.forwardRef(qf);function Pu(w,V){const Ie=v.useRef(0);return Ie.current+=1,v.createElement(js,Object.assign({},w,{ref:V,_renderTimes:Ie.current}))}const Ru=v.forwardRef(Pu);Ru.SELECTION_COLUMN=ld,Ru.EXPAND_COLUMN=M,Ru.SELECTION_ALL=gp,Ru.SELECTION_INVERT=Ah,Ru.SELECTION_NONE=kd,Ru.Column=Vr,Ru.ColumnGroup=ht,Ru.Summary=D;var nf=Ru,pd=nf},76364:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return It}});var v=g(12057),M=g(16853),c=g(1413),K=g(67294),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Z=N,B=g(42135),L=function(_t,Ye){return K.createElement(B.Z,(0,c.Z)((0,c.Z)({},_t),{},{ref:Ye,icon:Z}))};L.displayName="PlusOutlined";var $=K.forwardRef(L),U=g(94184),ke=g.n(U),We=g(93068),me=g(53124),Le=g(97647),Se=g(33603);const et={motionAppear:!1,motionEnter:!0,motionLeave:!0};function at(fe){let _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},Ye;return _t===!1?Ye={inkBar:!1,tabPane:!1}:_t===!0?Ye={inkBar:!0,tabPane:!0}:Ye=Object.assign({inkBar:!0},typeof _t=="object"?_t:{}),Ye.tabPane&&(Ye.tabPaneMotion=Object.assign(Object.assign({},et),{motionName:(0,Se.mL)(fe,"switch")})),Ye}var Lt=g(50344),Et=function(fe,_t){var Ye={};for(var Ot in fe)Object.prototype.hasOwnProperty.call(fe,Ot)&&_t.indexOf(Ot)<0&&(Ye[Ot]=fe[Ot]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var mt=0,Ot=Object.getOwnPropertySymbols(fe);mt<Ot.length;mt++)_t.indexOf(Ot[mt])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ot[mt])&&(Ye[Ot[mt]]=fe[Ot[mt]]);return Ye};function jt(fe){return fe.filter(_t=>_t)}function pe(fe,_t){if(fe)return fe;const Ye=(0,Lt.Z)(_t).map(Ot=>{if(K.isValidElement(Ot)){const{key:mt,props:Rt}=Ot,pt=Rt||{},{tab:Ge}=pt,wt=Et(pt,["tab"]);return Object.assign(Object.assign({key:String(mt)},wt),{label:Ge})}return null});return jt(Ye)}var ye=()=>null,ie=g(67968),re=g(45503),De=g(14747),le=g(67771),ce=fe=>{const{componentCls:_t,motionDurationSlow:Ye}=fe;return[{[_t]:{[`${_t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${Ye}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${Ye}`}}}}},[(0,le.oN)(fe,"slide-up"),(0,le.oN)(fe,"slide-down")]]};const je=fe=>{const{componentCls:_t,tabsCardHorizontalPadding:Ye,tabsCardHeadBackground:Ot,tabsCardGutter:mt,colorSplit:Rt}=fe;return{[`${_t}-card`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab`]:{margin:0,padding:Ye,background:Ot,border:`${fe.lineWidth}px ${fe.lineType} ${Rt}`,transition:`all ${fe.motionDurationSlow} ${fe.motionEaseInOut}`},[`${_t}-tab-active`]:{color:fe.colorPrimary,background:fe.colorBgContainer},[`${_t}-ink-bar`]:{visibility:"hidden"}},[`&${_t}-top, &${_t}-bottom`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab + ${_t}-tab`]:{marginLeft:{_skip_check_:!0,value:`${mt}px`}}}},[`&${_t}-top`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab`]:{borderRadius:`${fe.borderRadiusLG}px ${fe.borderRadiusLG}px 0 0`},[`${_t}-tab-active`]:{borderBottomColor:fe.colorBgContainer}}},[`&${_t}-bottom`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab`]:{borderRadius:`0 0 ${fe.borderRadiusLG}px ${fe.borderRadiusLG}px`},[`${_t}-tab-active`]:{borderTopColor:fe.colorBgContainer}}},[`&${_t}-left, &${_t}-right`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab + ${_t}-tab`]:{marginTop:`${mt}px`}}},[`&${_t}-left`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${fe.borderRadiusLG}px 0 0 ${fe.borderRadiusLG}px`}},[`${_t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:fe.colorBgContainer}}}},[`&${_t}-right`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${fe.borderRadiusLG}px ${fe.borderRadiusLG}px 0`}},[`${_t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:fe.colorBgContainer}}}}}}},J=fe=>{const{componentCls:_t,tabsHoverColor:Ye,dropdownEdgeChildVerticalPadding:Ot}=fe;return{[`${_t}-dropdown`]:Object.assign(Object.assign({},(0,De.Wf)(fe)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:fe.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${_t}-dropdown-menu`]:{maxHeight:fe.tabsDropdownHeight,margin:0,padding:`${Ot}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:fe.colorBgContainer,backgroundClip:"padding-box",borderRadius:fe.borderRadiusLG,outline:"none",boxShadow:fe.boxShadowSecondary,"&-item":Object.assign(Object.assign({},De.vS),{display:"flex",alignItems:"center",minWidth:fe.tabsDropdownWidth,margin:0,padding:`${fe.paddingXXS}px ${fe.paddingSM}px`,color:fe.colorText,fontWeight:"normal",fontSize:fe.fontSize,lineHeight:fe.lineHeight,cursor:"pointer",transition:`all ${fe.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:fe.marginSM},color:fe.colorTextDescription,fontSize:fe.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:Ye}},"&:hover":{background:fe.controlItemBgHover},"&-disabled":{"&, &:hover":{color:fe.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Me=fe=>{const{componentCls:_t,margin:Ye,colorSplit:Ot}=fe;return{[`${_t}-top, ${_t}-bottom`]:{flexDirection:"column",[`> ${_t}-nav, > div > ${_t}-nav`]:{margin:`0 0 ${Ye}px 0`,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${fe.lineWidth}px ${fe.lineType} ${Ot}`,content:"''"},[`${_t}-ink-bar`]:{height:fe.lineWidthBold,"&-animated":{transition:`width ${fe.motionDurationSlow}, left ${fe.motionDurationSlow},
            right ${fe.motionDurationSlow}`}},[`${_t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:fe.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:fe.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:fe.boxShadowTabsOverflowRight},[`&${_t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${_t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${_t}-top`]:{[`> ${_t}-nav,
        > div > ${_t}-nav`]:{"&::before":{bottom:0},[`${_t}-ink-bar`]:{bottom:0}}},[`${_t}-bottom`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{order:1,marginTop:`${Ye}px`,marginBottom:0,"&::before":{top:0},[`${_t}-ink-bar`]:{top:0}},[`> ${_t}-content-holder, > div > ${_t}-content-holder`]:{order:0}},[`${_t}-left, ${_t}-right`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{flexDirection:"column",minWidth:fe.controlHeight*1.25,[`${_t}-tab`]:{padding:`${fe.paddingXS}px ${fe.paddingLG}px`,textAlign:"center"},[`${_t}-tab + ${_t}-tab`]:{margin:`${fe.margin}px 0 0 0`},[`${_t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:fe.controlHeight},"&::before":{top:0,boxShadow:fe.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:fe.boxShadowTabsOverflowBottom},[`&${_t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${_t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${_t}-ink-bar`]:{width:fe.lineWidthBold,"&-animated":{transition:`height ${fe.motionDurationSlow}, top ${fe.motionDurationSlow}`}},[`${_t}-nav-list, ${_t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${_t}-left`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${_t}-content-holder, > div > ${_t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${fe.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${fe.lineWidth}px ${fe.lineType} ${fe.colorBorder}`},[`> ${_t}-content > ${_t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:fe.paddingLG}}}},[`${_t}-right`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{order:1,[`${_t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${_t}-content-holder, > div > ${_t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-fe.lineWidth},borderRight:{_skip_check_:!0,value:`${fe.lineWidth}px ${fe.lineType} ${fe.colorBorder}`},[`> ${_t}-content > ${_t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:fe.paddingLG}}}}}},ne=fe=>{const{componentCls:_t,padding:Ye}=fe;return{[_t]:{"&-small":{[`> ${_t}-nav`]:{[`${_t}-tab`]:{padding:`${fe.paddingXS}px 0`,fontSize:fe.fontSize}}},"&-large":{[`> ${_t}-nav`]:{[`${_t}-tab`]:{padding:`${Ye}px 0`,fontSize:fe.fontSizeLG}}}},[`${_t}-card`]:{[`&${_t}-small`]:{[`> ${_t}-nav`]:{[`${_t}-tab`]:{padding:`${fe.paddingXXS*1.5}px ${Ye}px`}},[`&${_t}-bottom`]:{[`> ${_t}-nav ${_t}-tab`]:{borderRadius:`0 0 ${fe.borderRadius}px ${fe.borderRadius}px`}},[`&${_t}-top`]:{[`> ${_t}-nav ${_t}-tab`]:{borderRadius:`${fe.borderRadius}px ${fe.borderRadius}px 0 0`}},[`&${_t}-right`]:{[`> ${_t}-nav ${_t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${fe.borderRadius}px ${fe.borderRadius}px 0`}}},[`&${_t}-left`]:{[`> ${_t}-nav ${_t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${fe.borderRadius}px 0 0 ${fe.borderRadius}px`}}}},[`&${_t}-large`]:{[`> ${_t}-nav`]:{[`${_t}-tab`]:{padding:`${fe.paddingXS}px ${Ye}px ${fe.paddingXXS*1.5}px`}}}}}},xe=fe=>{const{componentCls:_t,tabsActiveColor:Ye,tabsHoverColor:Ot,iconCls:mt,tabsHorizontalGutter:Rt}=fe,pt=`${_t}-tab`;return{[pt]:{position:"relative",display:"inline-flex",alignItems:"center",padding:`${fe.paddingSM}px 0`,fontSize:`${fe.fontSize}px`,background:"transparent",border:0,outline:"none",cursor:"pointer","&-btn, &-remove":Object.assign({"&:focus:not(:focus-visible), &:active":{color:Ye}},(0,De.Qy)(fe)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-fe.marginXXS},marginLeft:{_skip_check_:!0,value:fe.marginXS},color:fe.colorTextDescription,fontSize:fe.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${fe.motionDurationSlow}`,"&:hover":{color:fe.colorTextHeading}},"&:hover":{color:Ot},[`&${pt}-active ${pt}-btn`]:{color:fe.colorPrimary,textShadow:fe.tabsActiveTextShadow},[`&${pt}-disabled`]:{color:fe.colorTextDisabled,cursor:"not-allowed"},[`&${pt}-disabled ${pt}-btn, &${pt}-disabled ${_t}-remove`]:{"&:focus, &:active":{color:fe.colorTextDisabled}},[`& ${pt}-remove ${mt}`]:{margin:0},[mt]:{marginRight:{_skip_check_:!0,value:fe.marginSM}}},[`${pt} + ${pt}`]:{margin:{_skip_check_:!0,value:`0 0 0 ${Rt}px`}}}},Ne=fe=>{const{componentCls:_t,tabsHorizontalGutter:Ye,iconCls:Ot,tabsCardGutter:mt}=fe;return{[`${_t}-rtl`]:{direction:"rtl",[`${_t}-nav`]:{[`${_t}-tab`]:{margin:{_skip_check_:!0,value:`0 0 0 ${Ye}px`},[`${_t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[Ot]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${fe.marginSM}px`}},[`${_t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${fe.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${fe.marginXXS}px`},[Ot]:{margin:0}}}},[`&${_t}-left`]:{[`> ${_t}-nav`]:{order:1},[`> ${_t}-content-holder`]:{order:0}},[`&${_t}-right`]:{[`> ${_t}-nav`]:{order:0},[`> ${_t}-content-holder`]:{order:1}},[`&${_t}-card${_t}-top, &${_t}-card${_t}-bottom`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-tab + ${_t}-tab`]:{marginRight:{_skip_check_:!0,value:`${mt}px`},marginLeft:{_skip_check_:!0,value:0}}}}},[`${_t}-dropdown-rtl`]:{direction:"rtl"},[`${_t}-menu-item`]:{[`${_t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Pe=fe=>{const{componentCls:_t,tabsCardHorizontalPadding:Ye,tabsCardHeight:Ot,tabsCardGutter:mt,tabsHoverColor:Rt,tabsActiveColor:pt,colorSplit:Ge}=fe;return{[_t]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,De.Wf)(fe)),{display:"flex",[`> ${_t}-nav, > div > ${_t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${_t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${fe.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${_t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${fe.motionDurationSlow}`},[`${_t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${_t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${_t}-nav-more`]:{position:"relative",padding:Ye,background:"transparent",border:0,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:fe.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${_t}-nav-add`]:Object.assign({minWidth:`${Ot}px`,marginLeft:{_skip_check_:!0,value:`${mt}px`},padding:`0 ${fe.paddingXS}px`,background:"transparent",border:`${fe.lineWidth}px ${fe.lineType} ${Ge}`,borderRadius:`${fe.borderRadiusLG}px ${fe.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:fe.colorText,transition:`all ${fe.motionDurationSlow} ${fe.motionEaseInOut}`,"&:hover":{color:Rt},"&:active, &:focus:not(:focus-visible)":{color:pt}},(0,De.Qy)(fe))},[`${_t}-extra-content`]:{flex:"none"},[`${_t}-ink-bar`]:{position:"absolute",background:fe.colorPrimary,pointerEvents:"none"}}),xe(fe)),{[`${_t}-content`]:{position:"relative",width:"100%"},[`${_t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${_t}-tabpane`]:{outline:"none","&-hidden":{display:"none"}}}),[`${_t}-centered`]:{[`> ${_t}-nav, > div > ${_t}-nav`]:{[`${_t}-nav-wrap`]:{[`&:not([class*='${_t}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}};var He=(0,ie.Z)("Tabs",fe=>{const _t=fe.controlHeightLG,Ye=(0,re.TS)(fe,{tabsHoverColor:fe.colorPrimaryHover,tabsActiveColor:fe.colorPrimaryActive,tabsCardHorizontalPadding:`${(_t-Math.round(fe.fontSize*fe.lineHeight))/2-fe.lineWidth}px ${fe.padding}px`,tabsCardHeight:_t,tabsCardGutter:fe.marginXXS/2,tabsHorizontalGutter:32,tabsCardHeadBackground:fe.colorFillAlter,dropdownEdgeChildVerticalPadding:fe.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120});return[ne(Ye),Ne(Ye),Me(Ye),J(Ye),je(Ye),Pe(Ye),ce(Ye)]},fe=>({zIndexPopup:fe.zIndexPopupBase+50})),lt=function(fe,_t){var Ye={};for(var Ot in fe)Object.prototype.hasOwnProperty.call(fe,Ot)&&_t.indexOf(Ot)<0&&(Ye[Ot]=fe[Ot]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var mt=0,Ot=Object.getOwnPropertySymbols(fe);mt<Ot.length;mt++)_t.indexOf(Ot[mt])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ot[mt])&&(Ye[Ot[mt]]=fe[Ot[mt]]);return Ye};function ft(fe){var{type:_t,className:Ye,rootClassName:Ot,size:mt,onEdit:Rt,hideAdd:pt,centered:Ge,addIcon:wt,popupClassName:ee,children:Re,items:dt,animated:D}=fe,q=lt(fe,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","popupClassName","children","items","animated"]);const{prefixCls:G,moreIcon:O=K.createElement(M.Z,null)}=q,{direction:k,getPrefixCls:X,getPopupContainer:W}=K.useContext(me.E_),ae=X("tabs",G),[Be,ve]=He(ae);let Je;_t==="editable-card"&&(Je={onEdit:(Er,Zt)=>{let{key:Tr,event:pn}=Zt;Rt==null||Rt(Er==="add"?pn:Tr,Er)},removeIcon:K.createElement(v.Z,null),addIcon:wt||K.createElement($,null),showAdd:pt!==!0});const ot=X(),Qe=pe(dt,Re),ir=at(ae,D),mr=K.useContext(Le.Z),Ar=mt!==void 0?mt:mr;return Be(K.createElement(We.Z,Object.assign({direction:k,getPopupContainer:W,moreTransitionName:`${ot}-slide-up`},q,{items:Qe,className:ke()({[`${ae}-${Ar}`]:Ar,[`${ae}-card`]:["card","editable-card"].includes(_t),[`${ae}-editable-card`]:_t==="editable-card",[`${ae}-centered`]:Ge},Ye,Ot,ve),popupClassName:ke()(ee,ve),editable:Je,moreIcon:O,prefixCls:ae,animated:ir})))}ft.TabPane=ye;var It=ft},92195:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Et}});var v=g(48012),M=g(67164),c=g(16397),K=g(2790),N=g(57),Z=g(10274);const B=(jt,pe)=>new Z.C(jt).setAlpha(pe).toRgbString(),L=(jt,pe)=>new Z.C(jt).lighten(pe).toHexString(),$=jt=>{const pe=(0,c.R_)(jt,{theme:"dark"});return{1:pe[0],2:pe[1],3:pe[2],4:pe[3],5:pe[6],6:pe[5],7:pe[4],8:pe[6],9:pe[5],10:pe[4]}},U=(jt,pe)=>{const $e=jt||"#000",ye=pe||"#fff";return{colorBgBase:$e,colorTextBase:ye,colorText:B(ye,.85),colorTextSecondary:B(ye,.65),colorTextTertiary:B(ye,.45),colorTextQuaternary:B(ye,.25),colorFill:B(ye,.18),colorFillSecondary:B(ye,.12),colorFillTertiary:B(ye,.08),colorFillQuaternary:B(ye,.04),colorBgElevated:L($e,12),colorBgContainer:L($e,8),colorBgLayout:L($e,0),colorBgSpotlight:L($e,26),colorBorder:L($e,26),colorBorderSecondary:L($e,19)}};var We=(jt,pe)=>{const $e=Object.keys(K.M).map(ie=>{const re=(0,c.R_)(jt[ie],{theme:"dark"});return new Array(10).fill(1).reduce((De,le,ge)=>(De[`${ie}-${ge+1}`]=re[ge],De),{})}).reduce((ie,re)=>(ie=Object.assign(Object.assign({},ie),re),ie),{}),ye=pe!=null?pe:(0,M.Z)(jt);return Object.assign(Object.assign(Object.assign({},ye),$e),(0,N.Z)(jt,{generateColorPalettes:$,generateNeutralColorPalettes:U}))},me=g(372);function Le(jt){const{sizeUnit:pe,sizeStep:$e}=jt,ye=$e-2;return{sizeXXL:pe*(ye+10),sizeXL:pe*(ye+6),sizeLG:pe*(ye+2),sizeMD:pe*(ye+2),sizeMS:pe*(ye+1),size:pe*ye,sizeSM:pe*ye,sizeXS:pe*(ye-1),sizeXXS:pe*(ye-1)}}var Se=g(98378),at=(jt,pe)=>{const $e=pe!=null?pe:(0,M.Z)(jt),ye=$e.fontSizeSM,ie=$e.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$e),Le(pe!=null?pe:jt)),(0,Se.Z)(ye)),{controlHeight:ie}),(0,me.Z)(Object.assign(Object.assign({},$e),{controlHeight:ie})))};function Lt(){const[jt,pe,$e]=(0,v.dQ)();return{theme:jt,token:pe,hashId:$e}}var Et={defaultConfig:v.u_,defaultSeed:v.u_.token,useToken:Lt,defaultAlgorithm:M.Z,darkAlgorithm:We,compactAlgorithm:at}},48012:function(vt,Ee,g){"use strict";g.d(Ee,{Mj:function(){return Se},u_:function(){return Le},dQ:function(){return et}});var v=g(51222),M=g(67294),c="5.2.2",K=c,N=g(67164),Z=g(2790),B=g(10274);function L(at){return at>=0&&at<=255}function $(at,Lt){const{r:Et,g:jt,b:pe,a:$e}=new B.C(at).toRgb();if($e<1)return at;const{r:ye,g:ie,b:re}=new B.C(Lt).toRgb();for(let De=.01;De<=1;De+=.01){const le=Math.round((Et-ye*(1-De))/De),ge=Math.round((jt-ie*(1-De))/De),ce=Math.round((pe-re*(1-De))/De);if(L(le)&&L(ge)&&L(ce))return new B.C({r:le,g:ge,b:ce,a:Math.round(De*100)/100}).toRgbString()}return new B.C({r:Et,g:jt,b:pe,a:1}).toRgbString()}var U=$,ke=function(at,Lt){var Et={};for(var jt in at)Object.prototype.hasOwnProperty.call(at,jt)&&Lt.indexOf(jt)<0&&(Et[jt]=at[jt]);if(at!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pe=0,jt=Object.getOwnPropertySymbols(at);pe<jt.length;pe++)Lt.indexOf(jt[pe])<0&&Object.prototype.propertyIsEnumerable.call(at,jt[pe])&&(Et[jt[pe]]=at[jt[pe]]);return Et};function We(at){const{override:Lt}=at,Et=ke(at,["override"]),jt=Object.assign({},Lt);Object.keys(Z.Z).forEach(ce=>{delete jt[ce]});const pe=Object.assign(Object.assign({},Et),jt),$e=480,ye=576,ie=768,re=992,De=1200,le=1600;return Object.assign(Object.assign(Object.assign({},pe),{colorLink:pe.colorInfoText,colorLinkHover:pe.colorInfoHover,colorLinkActive:pe.colorInfoActive,colorFillContent:pe.colorFillSecondary,colorFillContentHover:pe.colorFill,colorFillAlter:pe.colorFillQuaternary,colorBgContainerDisabled:pe.colorFillTertiary,colorBorderBg:pe.colorBgContainer,colorSplit:U(pe.colorBorderSecondary,pe.colorBgContainer),colorTextPlaceholder:pe.colorTextQuaternary,colorTextDisabled:pe.colorTextQuaternary,colorTextHeading:pe.colorText,colorTextLabel:pe.colorTextSecondary,colorTextDescription:pe.colorTextTertiary,colorTextLightSolid:pe.colorWhite,colorHighlight:pe.colorError,colorBgTextHover:pe.colorFillSecondary,colorBgTextActive:pe.colorFill,colorIcon:pe.colorTextTertiary,colorIconHover:pe.colorText,colorErrorOutline:U(pe.colorErrorBg,pe.colorBgContainer),colorWarningOutline:U(pe.colorWarningBg,pe.colorBgContainer),fontSizeIcon:pe.fontSizeSM,lineWidth:pe.lineWidth,controlOutlineWidth:pe.lineWidth*2,controlInteractiveSize:pe.controlHeight/2,controlItemBgHover:pe.colorFillTertiary,controlItemBgActive:pe.colorPrimaryBg,controlItemBgActiveHover:pe.colorPrimaryBgHover,controlItemBgActiveDisabled:pe.colorFill,controlTmpOutline:pe.colorFillQuaternary,controlOutline:U(pe.colorPrimaryBg,pe.colorBgContainer),lineType:pe.lineType,borderRadius:pe.borderRadius,borderRadiusXS:pe.borderRadiusXS,borderRadiusSM:pe.borderRadiusSM,borderRadiusLG:pe.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:pe.sizeXXS,paddingXS:pe.sizeXS,paddingSM:pe.sizeSM,padding:pe.size,paddingMD:pe.sizeMD,paddingLG:pe.sizeLG,paddingXL:pe.sizeXL,paddingContentHorizontalLG:pe.sizeLG,paddingContentVerticalLG:pe.sizeMS,paddingContentHorizontal:pe.sizeMS,paddingContentVertical:pe.sizeSM,paddingContentHorizontalSM:pe.size,paddingContentVerticalSM:pe.sizeXS,marginXXS:pe.sizeXXS,marginXS:pe.sizeXS,marginSM:pe.sizeSM,margin:pe.size,marginMD:pe.sizeMD,marginLG:pe.sizeLG,marginXL:pe.sizeXL,marginXXL:pe.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:$e,screenXSMin:$e,screenXSMax:ye-1,screenSM:ye,screenSMMin:ye,screenSMMax:ie-1,screenMD:ie,screenMDMin:ie,screenMDMax:re-1,screenLG:re,screenLGMin:re,screenLGMax:De-1,screenXL:De,screenXLMin:De,screenXLMax:le-1,screenXXL:le,screenXXLMin:le,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new B.C("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new B.C("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new B.C("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),jt)}const me=(0,v.jG)(N.Z),Le={token:Z.Z,hashed:!0},Se=M.createContext(Le);function et(){const{token:at,hashed:Lt,theme:Et,components:jt}=M.useContext(Se),pe=`${K}-${Lt||""}`,$e=Et||me,[ye,ie]=(0,v.fp)($e,[Z.Z,at],{salt:pe,override:Object.assign({override:at},jt),formatToken:We});return[$e,ye,Lt?ie:""]}},67164:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Se}});var v=g(16397),M=g(372);function c(et){const{sizeUnit:at,sizeStep:Lt}=et;return{sizeXXL:at*(Lt+8),sizeXL:at*(Lt+4),sizeLG:at*(Lt+2),sizeMD:at*(Lt+1),sizeMS:at*Lt,size:at*Lt,sizeSM:at*(Lt-1),sizeXS:at*(Lt-2),sizeXXS:at*(Lt-3)}}var K=g(2790),N=g(57),B=et=>{let at=et,Lt=et,Et=et,jt=et;return et<6&&et>=5?at=et+1:et<16&&et>=6?at=et+2:et>=16&&(at=16),et<7&&et>=5?Lt=4:et<8&&et>=7?Lt=5:et<14&&et>=8?Lt=6:et<16&&et>=14?Lt=7:et>=16&&(Lt=8),et<6&&et>=2?Et=1:et>=6&&(Et=2),et>4&&et<8?jt=4:et>=8&&(jt=6),{borderRadius:et>16?16:et,borderRadiusXS:Et,borderRadiusSM:Lt,borderRadiusLG:at,borderRadiusOuter:jt}};function L(et){const{motionUnit:at,motionBase:Lt,borderRadius:Et,lineWidth:jt}=et;return Object.assign({motionDurationFast:`${(Lt+at).toFixed(1)}s`,motionDurationMid:`${(Lt+at*2).toFixed(1)}s`,motionDurationSlow:`${(Lt+at*3).toFixed(1)}s`,lineWidthBold:jt+1},B(Et))}var $=g(10274);const U=(et,at)=>new $.C(et).setAlpha(at).toRgbString(),ke=(et,at)=>new $.C(et).darken(at).toHexString(),We=et=>{const at=(0,v.R_)(et);return{1:at[0],2:at[1],3:at[2],4:at[3],5:at[4],6:at[5],7:at[6],8:at[4],9:at[5],10:at[6]}},me=(et,at)=>{const Lt=et||"#fff",Et=at||"#000";return{colorBgBase:Lt,colorTextBase:Et,colorText:U(Et,.88),colorTextSecondary:U(Et,.65),colorTextTertiary:U(Et,.45),colorTextQuaternary:U(Et,.25),colorFill:U(Et,.15),colorFillSecondary:U(Et,.06),colorFillTertiary:U(Et,.04),colorFillQuaternary:U(Et,.02),colorBgLayout:ke(Lt,4),colorBgContainer:ke(Lt,0),colorBgElevated:ke(Lt,0),colorBgSpotlight:U(Et,.85),colorBorder:ke(Lt,15),colorBorderSecondary:ke(Lt,6)}};var Le=g(98378);function Se(et){const at=Object.keys(K.M).map(Lt=>{const Et=(0,v.R_)(et[Lt]);return new Array(10).fill(1).reduce((jt,pe,$e)=>(jt[`${Lt}-${$e+1}`]=Et[$e],jt),{})}).reduce((Lt,Et)=>(Lt=Object.assign(Object.assign({},Lt),Et),Lt),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},et),at),(0,N.Z)(et,{generateColorPalettes:We,generateNeutralColorPalettes:me})),(0,Le.Z)(et.fontSize)),c(et)),(0,M.Z)(et)),L(et))}},2790:function(vt,Ee,g){"use strict";g.d(Ee,{M:function(){return v}});const v={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},M=Object.assign(Object.assign({},v),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1});Ee.Z=M},57:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return M}});var v=g(10274);function M(c,K){let{generateColorPalettes:N,generateNeutralColorPalettes:Z}=K;const{colorSuccess:B,colorWarning:L,colorError:$,colorInfo:U,colorPrimary:ke,colorBgBase:We,colorTextBase:me}=c,Le=N(ke),Se=N(B),et=N(L),at=N($),Lt=N(U),Et=Z(We,me);return Object.assign(Object.assign({},Et),{colorPrimaryBg:Le[1],colorPrimaryBgHover:Le[2],colorPrimaryBorder:Le[3],colorPrimaryBorderHover:Le[4],colorPrimaryHover:Le[5],colorPrimary:Le[6],colorPrimaryActive:Le[7],colorPrimaryTextHover:Le[8],colorPrimaryText:Le[9],colorPrimaryTextActive:Le[10],colorSuccessBg:Se[1],colorSuccessBgHover:Se[2],colorSuccessBorder:Se[3],colorSuccessBorderHover:Se[4],colorSuccessHover:Se[4],colorSuccess:Se[6],colorSuccessActive:Se[7],colorSuccessTextHover:Se[8],colorSuccessText:Se[9],colorSuccessTextActive:Se[10],colorErrorBg:at[1],colorErrorBgHover:at[2],colorErrorBorder:at[3],colorErrorBorderHover:at[4],colorErrorHover:at[5],colorError:at[6],colorErrorActive:at[7],colorErrorTextHover:at[8],colorErrorText:at[9],colorErrorTextActive:at[10],colorWarningBg:et[1],colorWarningBgHover:et[2],colorWarningBorder:et[3],colorWarningBorderHover:et[4],colorWarningHover:et[4],colorWarning:et[6],colorWarningActive:et[7],colorWarningTextHover:et[8],colorWarningText:et[9],colorWarningTextActive:et[10],colorInfoBg:Lt[1],colorInfoBgHover:Lt[2],colorInfoBorder:Lt[3],colorInfoBorderHover:Lt[4],colorInfoHover:Lt[4],colorInfo:Lt[6],colorInfoActive:Lt[7],colorInfoTextHover:Lt[8],colorInfoText:Lt[9],colorInfoTextActive:Lt[10],colorBgMask:new v.C("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},372:function(vt,Ee){"use strict";const g=v=>{const{controlHeight:M}=v;return{controlHeightSM:M*.75,controlHeightXS:M*.5,controlHeightLG:M*1.25}};Ee.Z=g},98378:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return c}});function v(K){const N=new Array(10).fill(null).map((Z,B)=>{const L=B-1,$=K*Math.pow(2.71828,L/5),U=B>1?Math.floor($):Math.ceil($);return Math.floor(U/2)*2});return N[1]=K,N.map(Z=>{const B=Z+8;return{size:Z,lineHeight:B/Z}})}var c=K=>{const N=v(K),Z=N.map(L=>L.size),B=N.map(L=>L.lineHeight);return{fontSizeSM:Z[0],fontSize:Z[1],fontSizeLG:Z[2],fontSizeXL:Z[3],fontSizeHeading1:Z[6],fontSizeHeading2:Z[5],fontSizeHeading3:Z[4],fontSizeHeading4:Z[3],fontSizeHeading5:Z[2],lineHeight:B[1],lineHeightLG:B[2],lineHeightSM:B[0],lineHeightHeading1:B[6],lineHeightHeading2:B[5],lineHeightHeading3:B[4],lineHeightHeading4:B[3],lineHeightHeading5:B[2]}}},67968:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return B}});var v=g(51222),M=g(67294),c=g(14747),K=g(53124),N=g(48012),Z=g(45503);function B(L,$,U){return ke=>{const[We,me,Le]=(0,N.dQ)(),{getPrefixCls:Se,iconPrefixCls:et}=(0,M.useContext)(K.E_),at=Se();return(0,v.xy)({theme:We,token:me,hashId:Le,path:["Shared",at]},()=>[{"&":(0,c.Lx)(me)}]),[(0,v.xy)({theme:We,token:me,hashId:Le,path:[L,ke,et]},()=>{const{token:Lt,flush:Et}=(0,Z.ZP)(me),jt=typeof U=="function"?U(Lt):U,pe=Object.assign(Object.assign({},jt),me[L]),$e=`.${ke}`,ye=(0,Z.TS)(Lt,{componentCls:$e,prefixCls:ke,iconCls:`.${et}`,antCls:`.${at}`},pe),ie=$(ye,{hashId:Le,prefixCls:ke,rootPrefixCls:at,iconPrefixCls:et,overrideComponentToken:me[L]});return Et(L,pe),[(0,c.du)(me,ke),ie]}),Le]}}},45503:function(vt,Ee,g){"use strict";g.d(Ee,{TS:function(){return c},ZP:function(){return B}});const v=typeof CSSINJS_STATISTIC!="undefined";let M=!0;function c(){for(var L=arguments.length,$=new Array(L),U=0;U<L;U++)$[U]=arguments[U];if(!v)return Object.assign.apply(Object,[{}].concat($));M=!1;const ke={};return $.forEach(We=>{Object.keys(We).forEach(Le=>{Object.defineProperty(ke,Le,{configurable:!0,enumerable:!0,get:()=>We[Le]})})}),M=!0,ke}const K={},N={};function Z(){}function B(L){let $,U=L,ke=Z;return v&&($=new Set,U=new Proxy(L,{get(We,me){return M&&$.add(me),We[me]}}),ke=(We,me)=>{K[We]={global:Array.from($),component:me}}),{token:U,keys:$,flush:ke}}},15335:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return _t}});var v=g(94184),M=g.n(v),c=g(87462),K=g(71002),N=g(1413),Z=g(91),B=g(67294),L=g(81263),$=g(43159);function U(Ye){var Ot=Ye.showArrow,mt=Ye.arrowContent,Rt=Ye.children,pt=Ye.prefixCls,Ge=Ye.id,wt=Ye.overlayInnerStyle,ee=Ye.className,Re=Ye.style;return B.createElement("div",{className:M()("".concat(pt,"-content"),ee),style:Re},Ot!==!1&&B.createElement("div",{className:"".concat(pt,"-arrow"),key:"arrow"},mt),B.createElement("div",{className:"".concat(pt,"-inner"),id:Ge,role:"tooltip",style:wt},typeof Rt=="function"?Rt():Rt))}var ke=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],We=function(Ot,mt){var Rt=Ot.overlayClassName,pt=Ot.trigger,Ge=pt===void 0?["hover"]:pt,wt=Ot.mouseEnterDelay,ee=wt===void 0?0:wt,Re=Ot.mouseLeaveDelay,dt=Re===void 0?.1:Re,D=Ot.overlayStyle,q=Ot.prefixCls,G=q===void 0?"rc-tooltip":q,O=Ot.children,k=Ot.onVisibleChange,X=Ot.afterVisibleChange,W=Ot.transitionName,ae=Ot.animation,Be=Ot.motion,ve=Ot.placement,Je=ve===void 0?"right":ve,ot=Ot.align,Qe=ot===void 0?{}:ot,ir=Ot.destroyTooltipOnHide,mr=ir===void 0?!1:ir,Ar=Ot.defaultVisible,Er=Ot.getTooltipContainer,Zt=Ot.overlayInnerStyle,Tr=Ot.arrowContent,pn=Ot.overlay,un=Ot.id,Zn=Ot.showArrow,Cr=Zn===void 0?!0:Zn,Nr=(0,Z.Z)(Ot,ke),bt=(0,B.useRef)(null);(0,B.useImperativeHandle)(mt,function(){return bt.current});var jn=(0,N.Z)({},Nr);"visible"in Ot&&(jn.popupVisible=Ot.visible);var Pt=function(){return B.createElement(U,{showArrow:Cr,arrowContent:Tr,key:"content",prefixCls:G,id:un,overlayInnerStyle:Zt},pn)},zt=!1,Qt=!1;if(typeof mr=="boolean")zt=mr;else if(mr&&(0,K.Z)(mr)==="object"){var dr=mr.keepParent;zt=dr===!0,Qt=dr===!1}return B.createElement(L.Z,(0,c.Z)({popupClassName:Rt,prefixCls:G,popup:Pt,action:Ge,builtinPlacements:$.C,popupPlacement:Je,ref:bt,popupAlign:Qe,getPopupContainer:Er,onPopupVisibleChange:k,afterPopupVisibleChange:X,popupTransitionName:W,popupAnimation:ae,popupMotion:Be,defaultPopupVisible:Ar,destroyPopupOnHide:zt,autoDestroy:Qt,mouseLeaveDelay:dt,popupStyle:D,mouseEnterDelay:ee},jn),O)},me=(0,B.forwardRef)(We),Le=me,Se=g(21770),et=g(53124),at=g(33603),Lt=g(80636),Et=g(96159),jt=g(50438),pe=g(45503),$e=g(67968),ye=g(14747);const ie=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function re(Ye,Ot){return ie.reduce((mt,Rt)=>{const pt=Ye[`${Rt}-1`],Ge=Ye[`${Rt}-3`],wt=Ye[`${Rt}-6`],ee=Ye[`${Rt}-7`];return Object.assign(Object.assign({},mt),Ot(Rt,{lightColor:pt,lightBorderColor:Ge,darkColor:wt,textColor:ee}))},{})}var De=g(77786);const le=Ye=>{const{componentCls:Ot,tooltipMaxWidth:mt,tooltipColor:Rt,tooltipBg:pt,tooltipBorderRadius:Ge,zIndexPopup:wt,controlHeight:ee,boxShadowSecondary:Re,paddingSM:dt,paddingXS:D,tooltipRadiusOuter:q}=Ye;return[{[Ot]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,ye.Wf)(Ye)),{position:"absolute",zIndex:wt,display:"block","&":[{width:"max-content"},{width:"intrinsic"}],maxWidth:mt,visibility:"visible","&-hidden":{display:"none"},"--antd-arrow-background-color":pt,[`${Ot}-inner`]:{minWidth:ee,minHeight:ee,padding:`${dt/2}px ${D}px`,color:Rt,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:pt,borderRadius:Ge,boxShadow:Re},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${Ot}-inner`]:{borderRadius:Math.min(Ge,De.qN)}},[`${Ot}-content`]:{position:"relative"}}),re(Ye,(G,O)=>{let{darkColor:k}=O;return{[`&${Ot}-${G}`]:{[`${Ot}-inner`]:{backgroundColor:k},[`${Ot}-arrow`]:{"--antd-arrow-background-color":k}}}})),{"&-rtl":{direction:"rtl"}})},(0,De.ZP)((0,pe.TS)(Ye,{borderRadiusOuter:q}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:Ge,limitVerticalRadius:!0}),{[`${Ot}-pure`]:{position:"relative",maxWidth:"none"}}]};var ge=(Ye,Ot)=>(0,$e.Z)("Tooltip",Rt=>{if(Ot===!1)return[];const{borderRadius:pt,colorTextLightSolid:Ge,colorBgDefault:wt,borderRadiusOuter:ee}=Rt,Re=(0,pe.TS)(Rt,{tooltipMaxWidth:250,tooltipColor:Ge,tooltipBorderRadius:pt,tooltipBg:wt,tooltipRadiusOuter:ee>4?4:ee});return[le(Re),(0,jt._y)(Rt,"zoom-big-fast")]},Rt=>{let{zIndexPopupBase:pt,colorBgSpotlight:Ge}=Rt;return{zIndexPopup:pt+70,colorBgDefault:Ge}})(Ye),ce=g(74902);const je=ie.map(Ye=>`${Ye}-inverse`),J=null;function Me(Ye){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,ce.Z)(je),(0,ce.Z)(ie)).includes(Ye):ie.includes(Ye)}function ne(Ye){return J.includes(Ye)}function xe(Ye,Ot){const mt=Me(Ot),Rt=M()({[`${Ye}-${Ot}`]:Ot&&mt}),pt={},Ge={};return Ot&&!mt&&(pt.background=Ot,Ge["--antd-arrow-background-color"]=Ot),{className:Rt,overlayStyle:pt,arrowStyle:Ge}}function Ne(Ye){const{prefixCls:Ot,className:mt,placement:Rt="top",title:pt,color:Ge,overlayInnerStyle:wt}=Ye,{getPrefixCls:ee}=B.useContext(et.E_),Re=ee("tooltip",Ot),[dt,D]=ge(Re,!0),q=xe(Re,Ge),G=Object.assign(Object.assign({},wt),q.overlayStyle),O=q.arrowStyle;return dt(B.createElement("div",{className:M()(D,Re,`${Re}-pure`,`${Re}-placement-${Rt}`,mt,q.className),style:O},B.createElement(U,Object.assign({},Ye,{className:D,prefixCls:Re,overlayInnerStyle:G}),pt)))}var Pe=g(92195),He=function(Ye,Ot){var mt={};for(var Rt in Ye)Object.prototype.hasOwnProperty.call(Ye,Rt)&&Ot.indexOf(Rt)<0&&(mt[Rt]=Ye[Rt]);if(Ye!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pt=0,Rt=Object.getOwnPropertySymbols(Ye);pt<Rt.length;pt++)Ot.indexOf(Rt[pt])<0&&Object.prototype.propertyIsEnumerable.call(Ye,Rt[pt])&&(mt[Rt[pt]]=Ye[Rt[pt]]);return mt};const{useToken:lt}=Pe.Z,ft=(Ye,Ot)=>{const mt={},Rt=Object.assign({},Ye);return Ot.forEach(pt=>{Ye&&pt in Ye&&(mt[pt]=Ye[pt],delete Rt[pt])}),{picked:mt,omitted:Rt}};function It(Ye,Ot){const mt=Ye.type;if((mt.__ANT_BUTTON===!0||Ye.type==="button")&&Ye.props.disabled||mt.__ANT_SWITCH===!0&&(Ye.props.disabled||Ye.props.loading)||mt.__ANT_RADIO===!0&&Ye.props.disabled){const{picked:Rt,omitted:pt}=ft(Ye.props.style,["position","left","right","top","bottom","float","display","zIndex"]),Ge=Object.assign(Object.assign({display:"inline-block"},Rt),{cursor:"not-allowed",width:Ye.props.block?"100%":void 0}),wt=Object.assign(Object.assign({},pt),{pointerEvents:"none"}),ee=(0,Et.Tm)(Ye,{style:wt,className:null});return B.createElement("span",{style:Ge,className:M()(Ye.props.className,`${Ot}-disabled-compatible-wrapper`)},ee)}return Ye}const fe=B.forwardRef((Ye,Ot)=>{var mt,Rt;const{prefixCls:pt,openClassName:Ge,getTooltipContainer:wt,overlayClassName:ee,color:Re,overlayInnerStyle:dt,children:D,afterOpenChange:q,afterVisibleChange:G,arrow:O=!0}=Ye,k=!!O,{token:X}=lt(),{getPopupContainer:W,getPrefixCls:ae,direction:Be}=B.useContext(et.E_),[ve,Je]=(0,Se.Z)(!1,{value:(mt=Ye.open)!==null&&mt!==void 0?mt:Ye.visible,defaultValue:(Rt=Ye.defaultOpen)!==null&&Rt!==void 0?Rt:Ye.defaultVisible}),ot=()=>{const{title:Tn,overlay:wn}=Ye;return!Tn&&!wn&&Tn!==0},Qe=Tn=>{var wn,Nn;Je(ot()?!1:Tn),ot()||((wn=Ye.onOpenChange)===null||wn===void 0||wn.call(Ye,Tn),(Nn=Ye.onVisibleChange)===null||Nn===void 0||Nn.call(Ye,Tn))},ir=()=>{var Tn;const{builtinPlacements:wn,arrowPointAtCenter:Nn=!1,autoAdjustOverflow:Si=!0}=Ye,fa=(Tn=typeof O!="boolean"&&(O==null?void 0:O.arrowPointAtCenter))!==null&&Tn!==void 0?Tn:Nn;return wn||(0,Lt.Z)({arrowPointAtCenter:fa,autoAdjustOverflow:Si,arrowWidth:k?X.sizePopupArrow:0,offset:X.marginXXS})},mr=(Tn,wn)=>{const Nn=ir(),Si=Object.keys(Nn).find(fa=>{var Xi,Ln;return Nn[fa].points[0]===((Xi=wn.points)===null||Xi===void 0?void 0:Xi[0])&&Nn[fa].points[1]===((Ln=wn.points)===null||Ln===void 0?void 0:Ln[1])});if(Si){const fa=Tn.getBoundingClientRect(),Xi={top:"50%",left:"50%"};/top|Bottom/.test(Si)?Xi.top=`${fa.height-wn.offset[1]}px`:/Top|bottom/.test(Si)&&(Xi.top=`${-wn.offset[1]}px`),/left|Right/.test(Si)?Xi.left=`${fa.width-wn.offset[0]}px`:/right|Left/.test(Si)&&(Xi.left=`${-wn.offset[0]}px`),Tn.style.transformOrigin=`${Xi.left} ${Xi.top}`}},Ar=()=>{const{title:Tn,overlay:wn}=Ye;return Tn===0?Tn:wn||Tn||""},{getPopupContainer:Er,placement:Zt="top",mouseEnterDelay:Tr=.1,mouseLeaveDelay:pn=.1,overlayStyle:un,rootClassName:Zn}=Ye,Cr=He(Ye,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Nr=ae("tooltip",pt),bt=ae(),jn=Ye["data-popover-inject"];let Pt=ve;!("open"in Ye)&&!("visible"in Ye)&&ot()&&(Pt=!1);const zt=It((0,Et.l$)(D)&&!(0,Et.M2)(D)?D:B.createElement("span",null,D),Nr),Qt=zt.props,dr=!Qt.className||typeof Qt.className=="string"?M()(Qt.className,{[Ge||`${Nr}-open`]:!0}):Qt.className,[_r,Hr]=ge(Nr,!jn),Qr=xe(Nr,Re),fr=Object.assign(Object.assign({},dt),Qr.overlayStyle),tt=Qr.arrowStyle,Yr=M()(ee,{[`${Nr}-rtl`]:Be==="rtl"},Qr.className,Zn,Hr);return _r(B.createElement(Le,Object.assign({},Cr,{showArrow:k,placement:Zt,mouseEnterDelay:Tr,mouseLeaveDelay:pn,prefixCls:Nr,overlayClassName:Yr,overlayStyle:Object.assign(Object.assign({},tt),un),getTooltipContainer:Er||wt||W,ref:Ot,builtinPlacements:ir(),overlay:Ar(),visible:Pt,onVisibleChange:Qe,afterVisibleChange:q!=null?q:G,onPopupAlign:mr,overlayInnerStyle:fr,arrowContent:B.createElement("span",{className:`${Nr}-arrow-content`}),motion:{motionName:(0,at.mL)(bt,"zoom-big-fast",Ye.transitionName),motionDeadline:1e3}}),Pt?(0,Et.Tm)(zt,{className:dr}):zt))});fe._InternalPanelDoNotUseOrYouWillBeFired=Ne;var _t=fe},48583:function(vt,Ee,g){"use strict";var v=g(27418);function M(le,ge){if(le===ge)return 0;for(var ce=le.length,je=ge.length,J=0,Me=Math.min(ce,je);J<Me;++J)if(le[J]!==ge[J]){ce=le[J],je=ge[J];break}return ce<je?-1:je<ce?1:0}function c(le){return g.g.Buffer&&typeof g.g.Buffer.isBuffer=="function"?g.g.Buffer.isBuffer(le):!!(le!=null&&le._isBuffer)}var K=g(30069),N=Object.prototype.hasOwnProperty,Z=Array.prototype.slice,B=function(){return function(){}.name==="foo"}();function L(le){return Object.prototype.toString.call(le)}function $(le){return c(le)||typeof g.g.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(le):le?!!(le instanceof DataView||le.buffer&&le.buffer instanceof ArrayBuffer):!1}var U=vt.exports=at,ke=/\s*function\s+([^\(\s]*)\s*/;function We(le){if(K.isFunction(le)){if(B)return le.name;var ge=le.toString(),ce=ge.match(ke);return ce&&ce[1]}}U.AssertionError=function(ge){this.name="AssertionError",this.actual=ge.actual,this.expected=ge.expected,this.operator=ge.operator,ge.message?(this.message=ge.message,this.generatedMessage=!1):(this.message=Se(this),this.generatedMessage=!0);var ce=ge.stackStartFunction||et;if(Error.captureStackTrace)Error.captureStackTrace(this,ce);else{var je=new Error;if(je.stack){var J=je.stack,Me=We(ce),ne=J.indexOf(`
`+Me);if(ne>=0){var xe=J.indexOf(`
`,ne+1);J=J.substring(xe+1)}this.stack=J}}},K.inherits(U.AssertionError,Error);function me(le,ge){return typeof le=="string"?le.length<ge?le:le.slice(0,ge):le}function Le(le){if(B||!K.isFunction(le))return K.inspect(le);var ge=We(le),ce=ge?": "+ge:"";return"[Function"+ce+"]"}function Se(le){return me(Le(le.actual),128)+" "+le.operator+" "+me(Le(le.expected),128)}function et(le,ge,ce,je,J){throw new U.AssertionError({message:ce,actual:le,expected:ge,operator:je,stackStartFunction:J})}U.fail=et;function at(le,ge){le||et(le,!0,ge,"==",U.ok)}U.ok=at,U.equal=function(ge,ce,je){ge!=ce&&et(ge,ce,je,"==",U.equal)},U.notEqual=function(ge,ce,je){ge==ce&&et(ge,ce,je,"!=",U.notEqual)},U.deepEqual=function(ge,ce,je){Lt(ge,ce,!1)||et(ge,ce,je,"deepEqual",U.deepEqual)},U.deepStrictEqual=function(ge,ce,je){Lt(ge,ce,!0)||et(ge,ce,je,"deepStrictEqual",U.deepStrictEqual)};function Lt(le,ge,ce,je){if(le===ge)return!0;if(c(le)&&c(ge))return M(le,ge)===0;if(K.isDate(le)&&K.isDate(ge))return le.getTime()===ge.getTime();if(K.isRegExp(le)&&K.isRegExp(ge))return le.source===ge.source&&le.global===ge.global&&le.multiline===ge.multiline&&le.lastIndex===ge.lastIndex&&le.ignoreCase===ge.ignoreCase;if((le===null||typeof le!="object")&&(ge===null||typeof ge!="object"))return ce?le===ge:le==ge;if($(le)&&$(ge)&&L(le)===L(ge)&&!(le instanceof Float32Array||le instanceof Float64Array))return M(new Uint8Array(le.buffer),new Uint8Array(ge.buffer))===0;if(c(le)!==c(ge))return!1;je=je||{actual:[],expected:[]};var J=je.actual.indexOf(le);return J!==-1&&J===je.expected.indexOf(ge)?!0:(je.actual.push(le),je.expected.push(ge),jt(le,ge,ce,je))}function Et(le){return Object.prototype.toString.call(le)=="[object Arguments]"}function jt(le,ge,ce,je){if(le==null||ge===null||ge===void 0)return!1;if(K.isPrimitive(le)||K.isPrimitive(ge))return le===ge;if(ce&&Object.getPrototypeOf(le)!==Object.getPrototypeOf(ge))return!1;var J=Et(le),Me=Et(ge);if(J&&!Me||!J&&Me)return!1;if(J)return le=Z.call(le),ge=Z.call(ge),Lt(le,ge,ce);var ne=De(le),xe=De(ge),Ne,Pe;if(ne.length!==xe.length)return!1;for(ne.sort(),xe.sort(),Pe=ne.length-1;Pe>=0;Pe--)if(ne[Pe]!==xe[Pe])return!1;for(Pe=ne.length-1;Pe>=0;Pe--)if(Ne=ne[Pe],!Lt(le[Ne],ge[Ne],ce,je))return!1;return!0}U.notDeepEqual=function(ge,ce,je){Lt(ge,ce,!1)&&et(ge,ce,je,"notDeepEqual",U.notDeepEqual)},U.notDeepStrictEqual=pe;function pe(le,ge,ce){Lt(le,ge,!0)&&et(le,ge,ce,"notDeepStrictEqual",pe)}U.strictEqual=function(ge,ce,je){ge!==ce&&et(ge,ce,je,"===",U.strictEqual)},U.notStrictEqual=function(ge,ce,je){ge===ce&&et(ge,ce,je,"!==",U.notStrictEqual)};function $e(le,ge){if(!le||!ge)return!1;if(Object.prototype.toString.call(ge)=="[object RegExp]")return ge.test(le);try{if(le instanceof ge)return!0}catch(ce){}return Error.isPrototypeOf(ge)?!1:ge.call({},le)===!0}function ye(le){var ge;try{le()}catch(ce){ge=ce}return ge}function ie(le,ge,ce,je){var J;if(typeof ge!="function")throw new TypeError('"block" argument must be a function');typeof ce=="string"&&(je=ce,ce=null),J=ye(ge),je=(ce&&ce.name?" ("+ce.name+").":".")+(je?" "+je:"."),le&&!J&&et(J,ce,"Missing expected exception"+je);var Me=typeof je=="string",ne=!le&&K.isError(J),xe=!le&&J&&!ce;if((ne&&Me&&$e(J,ce)||xe)&&et(J,ce,"Got unwanted exception"+je),le&&J&&ce&&!$e(J,ce)||!le&&J)throw J}U.throws=function(le,ge,ce){ie(!0,le,ge,ce)},U.doesNotThrow=function(le,ge,ce){ie(!1,le,ge,ce)},U.ifError=function(le){if(le)throw le};function re(le,ge){le||et(le,!0,ge,"==",re)}U.strict=v(re,U,{equal:U.strictEqual,deepEqual:U.deepStrictEqual,notEqual:U.notStrictEqual,notDeepEqual:U.notDeepStrictEqual}),U.strict.strict=U.strict;var De=Object.keys||function(le){var ge=[];for(var ce in le)N.call(le,ce)&&ge.push(ce);return ge}},16076:function(vt){typeof Object.create=="function"?vt.exports=function(g,v){g.super_=v,g.prototype=Object.create(v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:vt.exports=function(g,v){g.super_=v;var M=function(){};M.prototype=v.prototype,g.prototype=new M,g.prototype.constructor=g}},52014:function(vt){vt.exports=function(g){return g&&typeof g=="object"&&typeof g.copy=="function"&&typeof g.fill=="function"&&typeof g.readUInt8=="function"}},30069:function(vt,Ee,g){var v=g(34155),M=/%[sdj%]/g;Ee.format=function(xe){if(!jt(xe)){for(var Ne=[],Pe=0;Pe<arguments.length;Pe++)Ne.push(N(arguments[Pe]));return Ne.join(" ")}for(var Pe=1,He=arguments,lt=He.length,ft=String(xe).replace(M,function(fe){if(fe==="%%")return"%";if(Pe>=lt)return fe;switch(fe){case"%s":return String(He[Pe++]);case"%d":return Number(He[Pe++]);case"%j":try{return JSON.stringify(He[Pe++])}catch(_t){return"[Circular]"}default:return fe}}),It=He[Pe];Pe<lt;It=He[++Pe])at(It)||!ie(It)?ft+=" "+It:ft+=" "+N(It);return ft},Ee.deprecate=function(xe,Ne){if($e(g.g.process))return function(){return Ee.deprecate(xe,Ne).apply(this,arguments)};if(v.noDeprecation===!0)return xe;var Pe=!1;function He(){if(!Pe){if(v.throwDeprecation)throw new Error(Ne);v.traceDeprecation?console.trace(Ne):console.error(Ne),Pe=!0}return xe.apply(this,arguments)}return He};var c={},K;Ee.debuglog=function(xe){if($e(K)&&(K={NODE_ENV:"production",PUBLIC_PATH:"/"}.NODE_DEBUG||""),xe=xe.toUpperCase(),!c[xe])if(new RegExp("\\b"+xe+"\\b","i").test(K)){var Ne=v.pid;c[xe]=function(){var Pe=Ee.format.apply(Ee,arguments);console.error("%s %d: %s",xe,Ne,Pe)}}else c[xe]=function(){};return c[xe]};function N(xe,Ne){var Pe={seen:[],stylize:B};return arguments.length>=3&&(Pe.depth=arguments[2]),arguments.length>=4&&(Pe.colors=arguments[3]),et(Ne)?Pe.showHidden=Ne:Ne&&Ee._extend(Pe,Ne),$e(Pe.showHidden)&&(Pe.showHidden=!1),$e(Pe.depth)&&(Pe.depth=2),$e(Pe.colors)&&(Pe.colors=!1),$e(Pe.customInspect)&&(Pe.customInspect=!0),Pe.colors&&(Pe.stylize=Z),$(Pe,xe,Pe.depth)}Ee.inspect=N,N.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},N.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Z(xe,Ne){var Pe=N.styles[Ne];return Pe?"\x1B["+N.colors[Pe][0]+"m"+xe+"\x1B["+N.colors[Pe][1]+"m":xe}function B(xe,Ne){return xe}function L(xe){var Ne={};return xe.forEach(function(Pe,He){Ne[Pe]=!0}),Ne}function $(xe,Ne,Pe){if(xe.customInspect&&Ne&&le(Ne.inspect)&&Ne.inspect!==Ee.inspect&&!(Ne.constructor&&Ne.constructor.prototype===Ne)){var He=Ne.inspect(Pe,xe);return jt(He)||(He=$(xe,He,Pe)),He}var lt=U(xe,Ne);if(lt)return lt;var ft=Object.keys(Ne),It=L(ft);if(xe.showHidden&&(ft=Object.getOwnPropertyNames(Ne)),De(Ne)&&(ft.indexOf("message")>=0||ft.indexOf("description")>=0))return ke(Ne);if(ft.length===0){if(le(Ne)){var fe=Ne.name?": "+Ne.name:"";return xe.stylize("[Function"+fe+"]","special")}if(ye(Ne))return xe.stylize(RegExp.prototype.toString.call(Ne),"regexp");if(re(Ne))return xe.stylize(Date.prototype.toString.call(Ne),"date");if(De(Ne))return ke(Ne)}var _t="",Ye=!1,Ot=["{","}"];if(Se(Ne)&&(Ye=!0,Ot=["[","]"]),le(Ne)){var mt=Ne.name?": "+Ne.name:"";_t=" [Function"+mt+"]"}if(ye(Ne)&&(_t=" "+RegExp.prototype.toString.call(Ne)),re(Ne)&&(_t=" "+Date.prototype.toUTCString.call(Ne)),De(Ne)&&(_t=" "+ke(Ne)),ft.length===0&&(!Ye||Ne.length==0))return Ot[0]+_t+Ot[1];if(Pe<0)return ye(Ne)?xe.stylize(RegExp.prototype.toString.call(Ne),"regexp"):xe.stylize("[Object]","special");xe.seen.push(Ne);var Rt;return Ye?Rt=We(xe,Ne,Pe,It,ft):Rt=ft.map(function(pt){return me(xe,Ne,Pe,It,pt,Ye)}),xe.seen.pop(),Le(Rt,_t,Ot)}function U(xe,Ne){if($e(Ne))return xe.stylize("undefined","undefined");if(jt(Ne)){var Pe="'"+JSON.stringify(Ne).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return xe.stylize(Pe,"string")}if(Et(Ne))return xe.stylize(""+Ne,"number");if(et(Ne))return xe.stylize(""+Ne,"boolean");if(at(Ne))return xe.stylize("null","null")}function ke(xe){return"["+Error.prototype.toString.call(xe)+"]"}function We(xe,Ne,Pe,He,lt){for(var ft=[],It=0,fe=Ne.length;It<fe;++It)ne(Ne,String(It))?ft.push(me(xe,Ne,Pe,He,String(It),!0)):ft.push("");return lt.forEach(function(_t){_t.match(/^\d+$/)||ft.push(me(xe,Ne,Pe,He,_t,!0))}),ft}function me(xe,Ne,Pe,He,lt,ft){var It,fe,_t;if(_t=Object.getOwnPropertyDescriptor(Ne,lt)||{value:Ne[lt]},_t.get?_t.set?fe=xe.stylize("[Getter/Setter]","special"):fe=xe.stylize("[Getter]","special"):_t.set&&(fe=xe.stylize("[Setter]","special")),ne(He,lt)||(It="["+lt+"]"),fe||(xe.seen.indexOf(_t.value)<0?(at(Pe)?fe=$(xe,_t.value,null):fe=$(xe,_t.value,Pe-1),fe.indexOf(`
`)>-1&&(ft?fe=fe.split(`
`).map(function(Ye){return"  "+Ye}).join(`
`).substr(2):fe=`
`+fe.split(`
`).map(function(Ye){return"   "+Ye}).join(`
`))):fe=xe.stylize("[Circular]","special")),$e(It)){if(ft&&lt.match(/^\d+$/))return fe;It=JSON.stringify(""+lt),It.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(It=It.substr(1,It.length-2),It=xe.stylize(It,"name")):(It=It.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),It=xe.stylize(It,"string"))}return It+": "+fe}function Le(xe,Ne,Pe){var He=0,lt=xe.reduce(function(ft,It){return He++,It.indexOf(`
`)>=0&&He++,ft+It.replace(/\u001b\[\d\d?m/g,"").length+1},0);return lt>60?Pe[0]+(Ne===""?"":Ne+`
 `)+" "+xe.join(`,
  `)+" "+Pe[1]:Pe[0]+Ne+" "+xe.join(", ")+" "+Pe[1]}function Se(xe){return Array.isArray(xe)}Ee.isArray=Se;function et(xe){return typeof xe=="boolean"}Ee.isBoolean=et;function at(xe){return xe===null}Ee.isNull=at;function Lt(xe){return xe==null}Ee.isNullOrUndefined=Lt;function Et(xe){return typeof xe=="number"}Ee.isNumber=Et;function jt(xe){return typeof xe=="string"}Ee.isString=jt;function pe(xe){return typeof xe=="symbol"}Ee.isSymbol=pe;function $e(xe){return xe===void 0}Ee.isUndefined=$e;function ye(xe){return ie(xe)&&ce(xe)==="[object RegExp]"}Ee.isRegExp=ye;function ie(xe){return typeof xe=="object"&&xe!==null}Ee.isObject=ie;function re(xe){return ie(xe)&&ce(xe)==="[object Date]"}Ee.isDate=re;function De(xe){return ie(xe)&&(ce(xe)==="[object Error]"||xe instanceof Error)}Ee.isError=De;function le(xe){return typeof xe=="function"}Ee.isFunction=le;function ge(xe){return xe===null||typeof xe=="boolean"||typeof xe=="number"||typeof xe=="string"||typeof xe=="symbol"||typeof xe=="undefined"}Ee.isPrimitive=ge,Ee.isBuffer=g(52014);function ce(xe){return Object.prototype.toString.call(xe)}function je(xe){return xe<10?"0"+xe.toString(10):xe.toString(10)}var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Me(){var xe=new Date,Ne=[je(xe.getHours()),je(xe.getMinutes()),je(xe.getSeconds())].join(":");return[xe.getDate(),J[xe.getMonth()],Ne].join(" ")}Ee.log=function(){console.log("%s - %s",Me(),Ee.format.apply(Ee,arguments))},Ee.inherits=g(16076),Ee._extend=function(xe,Ne){if(!Ne||!ie(Ne))return xe;for(var Pe=Object.keys(Ne),He=Pe.length;He--;)xe[Pe[He]]=Ne[Pe[He]];return xe};function ne(xe,Ne){return Object.prototype.hasOwnProperty.call(xe,Ne)}},79742:function(vt,Ee){"use strict";Ee.byteLength=B,Ee.toByteArray=$,Ee.fromByteArray=We;for(var g=[],v=[],M=typeof Uint8Array!="undefined"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=0,N=c.length;K<N;++K)g[K]=c[K],v[c.charCodeAt(K)]=K;v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63;function Z(me){var Le=me.length;if(Le%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Se=me.indexOf("=");Se===-1&&(Se=Le);var et=Se===Le?0:4-Se%4;return[Se,et]}function B(me){var Le=Z(me),Se=Le[0],et=Le[1];return(Se+et)*3/4-et}function L(me,Le,Se){return(Le+Se)*3/4-Se}function $(me){var Le,Se=Z(me),et=Se[0],at=Se[1],Lt=new M(L(me,et,at)),Et=0,jt=at>0?et-4:et,pe;for(pe=0;pe<jt;pe+=4)Le=v[me.charCodeAt(pe)]<<18|v[me.charCodeAt(pe+1)]<<12|v[me.charCodeAt(pe+2)]<<6|v[me.charCodeAt(pe+3)],Lt[Et++]=Le>>16&255,Lt[Et++]=Le>>8&255,Lt[Et++]=Le&255;return at===2&&(Le=v[me.charCodeAt(pe)]<<2|v[me.charCodeAt(pe+1)]>>4,Lt[Et++]=Le&255),at===1&&(Le=v[me.charCodeAt(pe)]<<10|v[me.charCodeAt(pe+1)]<<4|v[me.charCodeAt(pe+2)]>>2,Lt[Et++]=Le>>8&255,Lt[Et++]=Le&255),Lt}function U(me){return g[me>>18&63]+g[me>>12&63]+g[me>>6&63]+g[me&63]}function ke(me,Le,Se){for(var et,at=[],Lt=Le;Lt<Se;Lt+=3)et=(me[Lt]<<16&16711680)+(me[Lt+1]<<8&65280)+(me[Lt+2]&255),at.push(U(et));return at.join("")}function We(me){for(var Le,Se=me.length,et=Se%3,at=[],Lt=16383,Et=0,jt=Se-et;Et<jt;Et+=Lt)at.push(ke(me,Et,Et+Lt>jt?jt:Et+Lt));return et===1?(Le=me[Se-1],at.push(g[Le>>2]+g[Le<<4&63]+"==")):et===2&&(Le=(me[Se-2]<<8)+me[Se-1],at.push(g[Le>>10]+g[Le>>4&63]+g[Le<<2&63]+"=")),at.join("")}},48764:function(vt,Ee,g){"use strict";var v;var M=g(79742),c=g(80645),K=g(87300);Ee.lW=L,v=Lt,Ee.h2=50,L.TYPED_ARRAY_SUPPORT=g.g.TYPED_ARRAY_SUPPORT!==void 0?g.g.TYPED_ARRAY_SUPPORT:N(),v=Z();function N(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},G.foo()===42&&typeof G.subarray=="function"&&G.subarray(1,1).byteLength===0}catch(O){return!1}}function Z(){return L.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function B(G,O){if(Z()<O)throw new RangeError("Invalid typed array length");return L.TYPED_ARRAY_SUPPORT?(G=new Uint8Array(O),G.__proto__=L.prototype):(G===null&&(G=new L(O)),G.length=O),G}function L(G,O,k){if(!L.TYPED_ARRAY_SUPPORT&&!(this instanceof L))return new L(G,O,k);if(typeof G=="number"){if(typeof O=="string")throw new Error("If encoding is specified then the first argument must be a string");return We(this,G)}return $(this,G,O,k)}L.poolSize=8192,L._augment=function(G){return G.__proto__=L.prototype,G};function $(G,O,k,X){if(typeof O=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&O instanceof ArrayBuffer?Se(G,O,k,X):typeof O=="string"?me(G,O,k):et(G,O)}L.from=function(G,O,k){return $(null,G,O,k)},L.TYPED_ARRAY_SUPPORT&&(L.prototype.__proto__=Uint8Array.prototype,L.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&L[Symbol.species]===L&&Object.defineProperty(L,Symbol.species,{value:null,configurable:!0}));function U(G){if(typeof G!="number")throw new TypeError('"size" argument must be a number');if(G<0)throw new RangeError('"size" argument must not be negative')}function ke(G,O,k,X){return U(O),O<=0?B(G,O):k!==void 0?typeof X=="string"?B(G,O).fill(k,X):B(G,O).fill(k):B(G,O)}L.alloc=function(G,O,k){return ke(null,G,O,k)};function We(G,O){if(U(O),G=B(G,O<0?0:at(O)|0),!L.TYPED_ARRAY_SUPPORT)for(var k=0;k<O;++k)G[k]=0;return G}L.allocUnsafe=function(G){return We(null,G)},L.allocUnsafeSlow=function(G){return We(null,G)};function me(G,O,k){if((typeof k!="string"||k==="")&&(k="utf8"),!L.isEncoding(k))throw new TypeError('"encoding" must be a valid string encoding');var X=Et(O,k)|0;G=B(G,X);var W=G.write(O,k);return W!==X&&(G=G.slice(0,W)),G}function Le(G,O){var k=O.length<0?0:at(O.length)|0;G=B(G,k);for(var X=0;X<k;X+=1)G[X]=O[X]&255;return G}function Se(G,O,k,X){if(O.byteLength,k<0||O.byteLength<k)throw new RangeError("'offset' is out of bounds");if(O.byteLength<k+(X||0))throw new RangeError("'length' is out of bounds");return k===void 0&&X===void 0?O=new Uint8Array(O):X===void 0?O=new Uint8Array(O,k):O=new Uint8Array(O,k,X),L.TYPED_ARRAY_SUPPORT?(G=O,G.__proto__=L.prototype):G=Le(G,O),G}function et(G,O){if(L.isBuffer(O)){var k=at(O.length)|0;return G=B(G,k),G.length===0||O.copy(G,0,0,k),G}if(O){if(typeof ArrayBuffer!="undefined"&&O.buffer instanceof ArrayBuffer||"length"in O)return typeof O.length!="number"||q(O.length)?B(G,0):Le(G,O);if(O.type==="Buffer"&&K(O.data))return Le(G,O.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function at(G){if(G>=Z())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z().toString(16)+" bytes");return G|0}function Lt(G){return+G!=G&&(G=0),L.alloc(+G)}L.isBuffer=function(O){return!!(O!=null&&O._isBuffer)},L.compare=function(O,k){if(!L.isBuffer(O)||!L.isBuffer(k))throw new TypeError("Arguments must be Buffers");if(O===k)return 0;for(var X=O.length,W=k.length,ae=0,Be=Math.min(X,W);ae<Be;++ae)if(O[ae]!==k[ae]){X=O[ae],W=k[ae];break}return X<W?-1:W<X?1:0},L.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},L.concat=function(O,k){if(!K(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return L.alloc(0);var X;if(k===void 0)for(k=0,X=0;X<O.length;++X)k+=O[X].length;var W=L.allocUnsafe(k),ae=0;for(X=0;X<O.length;++X){var Be=O[X];if(!L.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(W,ae),ae+=Be.length}return W};function Et(G,O){if(L.isBuffer(G))return G.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(G)||G instanceof ArrayBuffer))return G.byteLength;typeof G!="string"&&(G=""+G);var k=G.length;if(k===0)return 0;for(var X=!1;;)switch(O){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":case void 0:return wt(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return dt(G).length;default:if(X)return wt(G).length;O=(""+O).toLowerCase(),X=!0}}L.byteLength=Et;function jt(G,O,k){var X=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,O>>>=0,k<=O))return"";for(G||(G="utf8");;)switch(G){case"hex":return Pe(this,O,k);case"utf8":case"utf-8":return J(this,O,k);case"ascii":return xe(this,O,k);case"latin1":case"binary":return Ne(this,O,k);case"base64":return je(this,O,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,O,k);default:if(X)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),X=!0}}L.prototype._isBuffer=!0;function pe(G,O,k){var X=G[O];G[O]=G[k],G[k]=X}L.prototype.swap16=function(){var O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<O;k+=2)pe(this,k,k+1);return this},L.prototype.swap32=function(){var O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<O;k+=4)pe(this,k,k+3),pe(this,k+1,k+2);return this},L.prototype.swap64=function(){var O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<O;k+=8)pe(this,k,k+7),pe(this,k+1,k+6),pe(this,k+2,k+5),pe(this,k+3,k+4);return this},L.prototype.toString=function(){var O=this.length|0;return O===0?"":arguments.length===0?J(this,0,O):jt.apply(this,arguments)},L.prototype.equals=function(O){if(!L.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:L.compare(this,O)===0},L.prototype.inspect=function(){var O="",k=Ee.h2;return this.length>0&&(O=this.toString("hex",0,k).match(/.{2}/g).join(" "),this.length>k&&(O+=" ... ")),"<Buffer "+O+">"},L.prototype.compare=function(O,k,X,W,ae){if(!L.isBuffer(O))throw new TypeError("Argument must be a Buffer");if(k===void 0&&(k=0),X===void 0&&(X=O?O.length:0),W===void 0&&(W=0),ae===void 0&&(ae=this.length),k<0||X>O.length||W<0||ae>this.length)throw new RangeError("out of range index");if(W>=ae&&k>=X)return 0;if(W>=ae)return-1;if(k>=X)return 1;if(k>>>=0,X>>>=0,W>>>=0,ae>>>=0,this===O)return 0;for(var Be=ae-W,ve=X-k,Je=Math.min(Be,ve),ot=this.slice(W,ae),Qe=O.slice(k,X),ir=0;ir<Je;++ir)if(ot[ir]!==Qe[ir]){Be=ot[ir],ve=Qe[ir];break}return Be<ve?-1:ve<Be?1:0};function $e(G,O,k,X,W){if(G.length===0)return-1;if(typeof k=="string"?(X=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,isNaN(k)&&(k=W?0:G.length-1),k<0&&(k=G.length+k),k>=G.length){if(W)return-1;k=G.length-1}else if(k<0)if(W)k=0;else return-1;if(typeof O=="string"&&(O=L.from(O,X)),L.isBuffer(O))return O.length===0?-1:ye(G,O,k,X,W);if(typeof O=="number")return O=O&255,L.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(G,O,k):Uint8Array.prototype.lastIndexOf.call(G,O,k):ye(G,[O],k,X,W);throw new TypeError("val must be string, number or Buffer")}function ye(G,O,k,X,W){var ae=1,Be=G.length,ve=O.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(G.length<2||O.length<2)return-1;ae=2,Be/=2,ve/=2,k/=2}function Je(Ar,Er){return ae===1?Ar[Er]:Ar.readUInt16BE(Er*ae)}var ot;if(W){var Qe=-1;for(ot=k;ot<Be;ot++)if(Je(G,ot)===Je(O,Qe===-1?0:ot-Qe)){if(Qe===-1&&(Qe=ot),ot-Qe+1===ve)return Qe*ae}else Qe!==-1&&(ot-=ot-Qe),Qe=-1}else for(k+ve>Be&&(k=Be-ve),ot=k;ot>=0;ot--){for(var ir=!0,mr=0;mr<ve;mr++)if(Je(G,ot+mr)!==Je(O,mr)){ir=!1;break}if(ir)return ot}return-1}L.prototype.includes=function(O,k,X){return this.indexOf(O,k,X)!==-1},L.prototype.indexOf=function(O,k,X){return $e(this,O,k,X,!0)},L.prototype.lastIndexOf=function(O,k,X){return $e(this,O,k,X,!1)};function ie(G,O,k,X){k=Number(k)||0;var W=G.length-k;X?(X=Number(X),X>W&&(X=W)):X=W;var ae=O.length;if(ae%2!==0)throw new TypeError("Invalid hex string");X>ae/2&&(X=ae/2);for(var Be=0;Be<X;++Be){var ve=parseInt(O.substr(Be*2,2),16);if(isNaN(ve))return Be;G[k+Be]=ve}return Be}function re(G,O,k,X){return D(wt(O,G.length-k),G,k,X)}function De(G,O,k,X){return D(ee(O),G,k,X)}function le(G,O,k,X){return De(G,O,k,X)}function ge(G,O,k,X){return D(dt(O),G,k,X)}function ce(G,O,k,X){return D(Re(O,G.length-k),G,k,X)}L.prototype.write=function(O,k,X,W){if(k===void 0)W="utf8",X=this.length,k=0;else if(X===void 0&&typeof k=="string")W=k,X=this.length,k=0;else if(isFinite(k))k=k|0,isFinite(X)?(X=X|0,W===void 0&&(W="utf8")):(W=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ae=this.length-k;if((X===void 0||X>ae)&&(X=ae),O.length>0&&(X<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");for(var Be=!1;;)switch(W){case"hex":return ie(this,O,k,X);case"utf8":case"utf-8":return re(this,O,k,X);case"ascii":return De(this,O,k,X);case"latin1":case"binary":return le(this,O,k,X);case"base64":return ge(this,O,k,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,O,k,X);default:if(Be)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),Be=!0}},L.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function je(G,O,k){return O===0&&k===G.length?M.fromByteArray(G):M.fromByteArray(G.slice(O,k))}function J(G,O,k){k=Math.min(G.length,k);for(var X=[],W=O;W<k;){var ae=G[W],Be=null,ve=ae>239?4:ae>223?3:ae>191?2:1;if(W+ve<=k){var Je,ot,Qe,ir;switch(ve){case 1:ae<128&&(Be=ae);break;case 2:Je=G[W+1],(Je&192)===128&&(ir=(ae&31)<<6|Je&63,ir>127&&(Be=ir));break;case 3:Je=G[W+1],ot=G[W+2],(Je&192)===128&&(ot&192)===128&&(ir=(ae&15)<<12|(Je&63)<<6|ot&63,ir>2047&&(ir<55296||ir>57343)&&(Be=ir));break;case 4:Je=G[W+1],ot=G[W+2],Qe=G[W+3],(Je&192)===128&&(ot&192)===128&&(Qe&192)===128&&(ir=(ae&15)<<18|(Je&63)<<12|(ot&63)<<6|Qe&63,ir>65535&&ir<1114112&&(Be=ir))}}Be===null?(Be=65533,ve=1):Be>65535&&(Be-=65536,X.push(Be>>>10&1023|55296),Be=56320|Be&1023),X.push(Be),W+=ve}return ne(X)}var Me=4096;function ne(G){var O=G.length;if(O<=Me)return String.fromCharCode.apply(String,G);for(var k="",X=0;X<O;)k+=String.fromCharCode.apply(String,G.slice(X,X+=Me));return k}function xe(G,O,k){var X="";k=Math.min(G.length,k);for(var W=O;W<k;++W)X+=String.fromCharCode(G[W]&127);return X}function Ne(G,O,k){var X="";k=Math.min(G.length,k);for(var W=O;W<k;++W)X+=String.fromCharCode(G[W]);return X}function Pe(G,O,k){var X=G.length;(!O||O<0)&&(O=0),(!k||k<0||k>X)&&(k=X);for(var W="",ae=O;ae<k;++ae)W+=Ge(G[ae]);return W}function He(G,O,k){for(var X=G.slice(O,k),W="",ae=0;ae<X.length;ae+=2)W+=String.fromCharCode(X[ae]+X[ae+1]*256);return W}L.prototype.slice=function(O,k){var X=this.length;O=~~O,k=k===void 0?X:~~k,O<0?(O+=X,O<0&&(O=0)):O>X&&(O=X),k<0?(k+=X,k<0&&(k=0)):k>X&&(k=X),k<O&&(k=O);var W;if(L.TYPED_ARRAY_SUPPORT)W=this.subarray(O,k),W.__proto__=L.prototype;else{var ae=k-O;W=new L(ae,void 0);for(var Be=0;Be<ae;++Be)W[Be]=this[Be+O]}return W};function lt(G,O,k){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+O>k)throw new RangeError("Trying to access beyond buffer length")}L.prototype.readUIntLE=function(O,k,X){O=O|0,k=k|0,X||lt(O,k,this.length);for(var W=this[O],ae=1,Be=0;++Be<k&&(ae*=256);)W+=this[O+Be]*ae;return W},L.prototype.readUIntBE=function(O,k,X){O=O|0,k=k|0,X||lt(O,k,this.length);for(var W=this[O+--k],ae=1;k>0&&(ae*=256);)W+=this[O+--k]*ae;return W},L.prototype.readUInt8=function(O,k){return k||lt(O,1,this.length),this[O]},L.prototype.readUInt16LE=function(O,k){return k||lt(O,2,this.length),this[O]|this[O+1]<<8},L.prototype.readUInt16BE=function(O,k){return k||lt(O,2,this.length),this[O]<<8|this[O+1]},L.prototype.readUInt32LE=function(O,k){return k||lt(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},L.prototype.readUInt32BE=function(O,k){return k||lt(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},L.prototype.readIntLE=function(O,k,X){O=O|0,k=k|0,X||lt(O,k,this.length);for(var W=this[O],ae=1,Be=0;++Be<k&&(ae*=256);)W+=this[O+Be]*ae;return ae*=128,W>=ae&&(W-=Math.pow(2,8*k)),W},L.prototype.readIntBE=function(O,k,X){O=O|0,k=k|0,X||lt(O,k,this.length);for(var W=k,ae=1,Be=this[O+--W];W>0&&(ae*=256);)Be+=this[O+--W]*ae;return ae*=128,Be>=ae&&(Be-=Math.pow(2,8*k)),Be},L.prototype.readInt8=function(O,k){return k||lt(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},L.prototype.readInt16LE=function(O,k){k||lt(O,2,this.length);var X=this[O]|this[O+1]<<8;return X&32768?X|4294901760:X},L.prototype.readInt16BE=function(O,k){k||lt(O,2,this.length);var X=this[O+1]|this[O]<<8;return X&32768?X|4294901760:X},L.prototype.readInt32LE=function(O,k){return k||lt(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},L.prototype.readInt32BE=function(O,k){return k||lt(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},L.prototype.readFloatLE=function(O,k){return k||lt(O,4,this.length),c.read(this,O,!0,23,4)},L.prototype.readFloatBE=function(O,k){return k||lt(O,4,this.length),c.read(this,O,!1,23,4)},L.prototype.readDoubleLE=function(O,k){return k||lt(O,8,this.length),c.read(this,O,!0,52,8)},L.prototype.readDoubleBE=function(O,k){return k||lt(O,8,this.length),c.read(this,O,!1,52,8)};function ft(G,O,k,X,W,ae){if(!L.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>W||O<ae)throw new RangeError('"value" argument is out of bounds');if(k+X>G.length)throw new RangeError("Index out of range")}L.prototype.writeUIntLE=function(O,k,X,W){if(O=+O,k=k|0,X=X|0,!W){var ae=Math.pow(2,8*X)-1;ft(this,O,k,X,ae,0)}var Be=1,ve=0;for(this[k]=O&255;++ve<X&&(Be*=256);)this[k+ve]=O/Be&255;return k+X},L.prototype.writeUIntBE=function(O,k,X,W){if(O=+O,k=k|0,X=X|0,!W){var ae=Math.pow(2,8*X)-1;ft(this,O,k,X,ae,0)}var Be=X-1,ve=1;for(this[k+Be]=O&255;--Be>=0&&(ve*=256);)this[k+Be]=O/ve&255;return k+X},L.prototype.writeUInt8=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,1,255,0),L.TYPED_ARRAY_SUPPORT||(O=Math.floor(O)),this[k]=O&255,k+1};function It(G,O,k,X){O<0&&(O=65535+O+1);for(var W=0,ae=Math.min(G.length-k,2);W<ae;++W)G[k+W]=(O&255<<8*(X?W:1-W))>>>(X?W:1-W)*8}L.prototype.writeUInt16LE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,2,65535,0),L.TYPED_ARRAY_SUPPORT?(this[k]=O&255,this[k+1]=O>>>8):It(this,O,k,!0),k+2},L.prototype.writeUInt16BE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,2,65535,0),L.TYPED_ARRAY_SUPPORT?(this[k]=O>>>8,this[k+1]=O&255):It(this,O,k,!1),k+2};function fe(G,O,k,X){O<0&&(O=4294967295+O+1);for(var W=0,ae=Math.min(G.length-k,4);W<ae;++W)G[k+W]=O>>>(X?W:3-W)*8&255}L.prototype.writeUInt32LE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,4,4294967295,0),L.TYPED_ARRAY_SUPPORT?(this[k+3]=O>>>24,this[k+2]=O>>>16,this[k+1]=O>>>8,this[k]=O&255):fe(this,O,k,!0),k+4},L.prototype.writeUInt32BE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,4,4294967295,0),L.TYPED_ARRAY_SUPPORT?(this[k]=O>>>24,this[k+1]=O>>>16,this[k+2]=O>>>8,this[k+3]=O&255):fe(this,O,k,!1),k+4},L.prototype.writeIntLE=function(O,k,X,W){if(O=+O,k=k|0,!W){var ae=Math.pow(2,8*X-1);ft(this,O,k,X,ae-1,-ae)}var Be=0,ve=1,Je=0;for(this[k]=O&255;++Be<X&&(ve*=256);)O<0&&Je===0&&this[k+Be-1]!==0&&(Je=1),this[k+Be]=(O/ve>>0)-Je&255;return k+X},L.prototype.writeIntBE=function(O,k,X,W){if(O=+O,k=k|0,!W){var ae=Math.pow(2,8*X-1);ft(this,O,k,X,ae-1,-ae)}var Be=X-1,ve=1,Je=0;for(this[k+Be]=O&255;--Be>=0&&(ve*=256);)O<0&&Je===0&&this[k+Be+1]!==0&&(Je=1),this[k+Be]=(O/ve>>0)-Je&255;return k+X},L.prototype.writeInt8=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,1,127,-128),L.TYPED_ARRAY_SUPPORT||(O=Math.floor(O)),O<0&&(O=255+O+1),this[k]=O&255,k+1},L.prototype.writeInt16LE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,2,32767,-32768),L.TYPED_ARRAY_SUPPORT?(this[k]=O&255,this[k+1]=O>>>8):It(this,O,k,!0),k+2},L.prototype.writeInt16BE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,2,32767,-32768),L.TYPED_ARRAY_SUPPORT?(this[k]=O>>>8,this[k+1]=O&255):It(this,O,k,!1),k+2},L.prototype.writeInt32LE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,4,2147483647,-2147483648),L.TYPED_ARRAY_SUPPORT?(this[k]=O&255,this[k+1]=O>>>8,this[k+2]=O>>>16,this[k+3]=O>>>24):fe(this,O,k,!0),k+4},L.prototype.writeInt32BE=function(O,k,X){return O=+O,k=k|0,X||ft(this,O,k,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),L.TYPED_ARRAY_SUPPORT?(this[k]=O>>>24,this[k+1]=O>>>16,this[k+2]=O>>>8,this[k+3]=O&255):fe(this,O,k,!1),k+4};function _t(G,O,k,X,W,ae){if(k+X>G.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function Ye(G,O,k,X,W){return W||_t(G,O,k,4,34028234663852886e22,-34028234663852886e22),c.write(G,O,k,X,23,4),k+4}L.prototype.writeFloatLE=function(O,k,X){return Ye(this,O,k,!0,X)},L.prototype.writeFloatBE=function(O,k,X){return Ye(this,O,k,!1,X)};function Ot(G,O,k,X,W){return W||_t(G,O,k,8,17976931348623157e292,-17976931348623157e292),c.write(G,O,k,X,52,8),k+8}L.prototype.writeDoubleLE=function(O,k,X){return Ot(this,O,k,!0,X)},L.prototype.writeDoubleBE=function(O,k,X){return Ot(this,O,k,!1,X)},L.prototype.copy=function(O,k,X,W){if(X||(X=0),!W&&W!==0&&(W=this.length),k>=O.length&&(k=O.length),k||(k=0),W>0&&W<X&&(W=X),W===X||O.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("sourceStart out of bounds");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),O.length-k<W-X&&(W=O.length-k+X);var ae=W-X,Be;if(this===O&&X<k&&k<W)for(Be=ae-1;Be>=0;--Be)O[Be+k]=this[Be+X];else if(ae<1e3||!L.TYPED_ARRAY_SUPPORT)for(Be=0;Be<ae;++Be)O[Be+k]=this[Be+X];else Uint8Array.prototype.set.call(O,this.subarray(X,X+ae),k);return ae},L.prototype.fill=function(O,k,X,W){if(typeof O=="string"){if(typeof k=="string"?(W=k,k=0,X=this.length):typeof X=="string"&&(W=X,X=this.length),O.length===1){var ae=O.charCodeAt(0);ae<256&&(O=ae)}if(W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!L.isEncoding(W))throw new TypeError("Unknown encoding: "+W)}else typeof O=="number"&&(O=O&255);if(k<0||this.length<k||this.length<X)throw new RangeError("Out of range index");if(X<=k)return this;k=k>>>0,X=X===void 0?this.length:X>>>0,O||(O=0);var Be;if(typeof O=="number")for(Be=k;Be<X;++Be)this[Be]=O;else{var ve=L.isBuffer(O)?O:wt(new L(O,W).toString()),Je=ve.length;for(Be=0;Be<X-k;++Be)this[Be+k]=ve[Be%Je]}return this};var mt=/[^+\/0-9A-Za-z-_]/g;function Rt(G){if(G=pt(G).replace(mt,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function pt(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}function Ge(G){return G<16?"0"+G.toString(16):G.toString(16)}function wt(G,O){O=O||1/0;for(var k,X=G.length,W=null,ae=[],Be=0;Be<X;++Be){if(k=G.charCodeAt(Be),k>55295&&k<57344){if(!W){if(k>56319){(O-=3)>-1&&ae.push(239,191,189);continue}else if(Be+1===X){(O-=3)>-1&&ae.push(239,191,189);continue}W=k;continue}if(k<56320){(O-=3)>-1&&ae.push(239,191,189),W=k;continue}k=(W-55296<<10|k-56320)+65536}else W&&(O-=3)>-1&&ae.push(239,191,189);if(W=null,k<128){if((O-=1)<0)break;ae.push(k)}else if(k<2048){if((O-=2)<0)break;ae.push(k>>6|192,k&63|128)}else if(k<65536){if((O-=3)<0)break;ae.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((O-=4)<0)break;ae.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return ae}function ee(G){for(var O=[],k=0;k<G.length;++k)O.push(G.charCodeAt(k)&255);return O}function Re(G,O){for(var k,X,W,ae=[],Be=0;Be<G.length&&!((O-=2)<0);++Be)k=G.charCodeAt(Be),X=k>>8,W=k%256,ae.push(W),ae.push(X);return ae}function dt(G){return M.toByteArray(Rt(G))}function D(G,O,k,X){for(var W=0;W<X&&!(W+k>=O.length||W>=G.length);++W)O[W+k]=G[W];return W}function q(G){return G!==G}},87300:function(vt){var Ee={}.toString;vt.exports=Array.isArray||function(g){return Ee.call(g)=="[object Array]"}},48168:function(vt,Ee,g){const v=g(8874),M={};for(const N of Object.keys(v))M[v[N]]=N;const c={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};vt.exports=c;for(const N of Object.keys(c)){if(!("channels"in c[N]))throw new Error("missing channels property: "+N);if(!("labels"in c[N]))throw new Error("missing channel labels property: "+N);if(c[N].labels.length!==c[N].channels)throw new Error("channel and label counts mismatch: "+N);const{channels:Z,labels:B}=c[N];delete c[N].channels,delete c[N].labels,Object.defineProperty(c[N],"channels",{value:Z}),Object.defineProperty(c[N],"labels",{value:B})}c.rgb.hsl=function(N){const Z=N[0]/255,B=N[1]/255,L=N[2]/255,$=Math.min(Z,B,L),U=Math.max(Z,B,L),ke=U-$;let We,me;U===$?We=0:Z===U?We=(B-L)/ke:B===U?We=2+(L-Z)/ke:L===U&&(We=4+(Z-B)/ke),We=Math.min(We*60,360),We<0&&(We+=360);const Le=($+U)/2;return U===$?me=0:Le<=.5?me=ke/(U+$):me=ke/(2-U-$),[We,me*100,Le*100]},c.rgb.hsv=function(N){let Z,B,L,$,U;const ke=N[0]/255,We=N[1]/255,me=N[2]/255,Le=Math.max(ke,We,me),Se=Le-Math.min(ke,We,me),et=function(at){return(Le-at)/6/Se+1/2};return Se===0?($=0,U=0):(U=Se/Le,Z=et(ke),B=et(We),L=et(me),ke===Le?$=L-B:We===Le?$=1/3+Z-L:me===Le&&($=2/3+B-Z),$<0?$+=1:$>1&&($-=1)),[$*360,U*100,Le*100]},c.rgb.hwb=function(N){const Z=N[0],B=N[1];let L=N[2];const $=c.rgb.hsl(N)[0],U=1/255*Math.min(Z,Math.min(B,L));return L=1-1/255*Math.max(Z,Math.max(B,L)),[$,U*100,L*100]},c.rgb.cmyk=function(N){const Z=N[0]/255,B=N[1]/255,L=N[2]/255,$=Math.min(1-Z,1-B,1-L),U=(1-Z-$)/(1-$)||0,ke=(1-B-$)/(1-$)||0,We=(1-L-$)/(1-$)||0;return[U*100,ke*100,We*100,$*100]};function K(N,Z){return jd(N[0]-Z[0],2)+jd(N[1]-Z[1],2)+jd(N[2]-Z[2],2)}c.rgb.keyword=function(N){const Z=M[N];if(Z)return Z;let B=1/0,L;for(const $ of Object.keys(v)){const U=v[$],ke=K(N,U);ke<B&&(B=ke,L=$)}return L},c.keyword.rgb=function(N){return v[N]},c.rgb.xyz=function(N){let Z=N[0]/255,B=N[1]/255,L=N[2]/255;Z=Z>.04045?jd((Z+.055)/1.055,2.4):Z/12.92,B=B>.04045?jd((B+.055)/1.055,2.4):B/12.92,L=L>.04045?jd((L+.055)/1.055,2.4):L/12.92;const $=Z*.4124+B*.3576+L*.1805,U=Z*.2126+B*.7152+L*.0722,ke=Z*.0193+B*.1192+L*.9505;return[$*100,U*100,ke*100]},c.rgb.lab=function(N){const Z=c.rgb.xyz(N);let B=Z[0],L=Z[1],$=Z[2];B/=95.047,L/=100,$/=108.883,B=B>.008856?jd(B,1/3):7.787*B+16/116,L=L>.008856?jd(L,1/3):7.787*L+16/116,$=$>.008856?jd($,1/3):7.787*$+16/116;const U=116*L-16,ke=500*(B-L),We=200*(L-$);return[U,ke,We]},c.hsl.rgb=function(N){const Z=N[0]/360,B=N[1]/100,L=N[2]/100;let $,U,ke;if(B===0)return ke=L*255,[ke,ke,ke];L<.5?$=L*(1+B):$=L+B-L*B;const We=2*L-$,me=[0,0,0];for(let Le=0;Le<3;Le++)U=Z+1/3*-(Le-1),U<0&&U++,U>1&&U--,6*U<1?ke=We+($-We)*6*U:2*U<1?ke=$:3*U<2?ke=We+($-We)*(2/3-U)*6:ke=We,me[Le]=ke*255;return me},c.hsl.hsv=function(N){const Z=N[0];let B=N[1]/100,L=N[2]/100,$=B;const U=Math.max(L,.01);L*=2,B*=L<=1?L:2-L,$*=U<=1?U:2-U;const ke=(L+B)/2,We=L===0?2*$/(U+$):2*B/(L+B);return[Z,We*100,ke*100]},c.hsv.rgb=function(N){const Z=N[0]/60,B=N[1]/100;let L=N[2]/100;const $=Math.floor(Z)%6,U=Z-Math.floor(Z),ke=255*L*(1-B),We=255*L*(1-B*U),me=255*L*(1-B*(1-U));switch(L*=255,$){case 0:return[L,me,ke];case 1:return[We,L,ke];case 2:return[ke,L,me];case 3:return[ke,We,L];case 4:return[me,ke,L];case 5:return[L,ke,We]}},c.hsv.hsl=function(N){const Z=N[0],B=N[1]/100,L=N[2]/100,$=Math.max(L,.01);let U,ke;ke=(2-B)*L;const We=(2-B)*$;return U=B*$,U/=We<=1?We:2-We,U=U||0,ke/=2,[Z,U*100,ke*100]},c.hwb.rgb=function(N){const Z=N[0]/360;let B=N[1]/100,L=N[2]/100;const $=B+L;let U;$>1&&(B/=$,L/=$);const ke=Math.floor(6*Z),We=1-L;U=6*Z-ke,ke&1&&(U=1-U);const me=B+U*(We-B);let Le,Se,et;switch(ke){default:case 6:case 0:Le=We,Se=me,et=B;break;case 1:Le=me,Se=We,et=B;break;case 2:Le=B,Se=We,et=me;break;case 3:Le=B,Se=me,et=We;break;case 4:Le=me,Se=B,et=We;break;case 5:Le=We,Se=B,et=me;break}return[Le*255,Se*255,et*255]},c.cmyk.rgb=function(N){const Z=N[0]/100,B=N[1]/100,L=N[2]/100,$=N[3]/100,U=1-Math.min(1,Z*(1-$)+$),ke=1-Math.min(1,B*(1-$)+$),We=1-Math.min(1,L*(1-$)+$);return[U*255,ke*255,We*255]},c.xyz.rgb=function(N){const Z=N[0]/100,B=N[1]/100,L=N[2]/100;let $,U,ke;return $=Z*3.2406+B*-1.5372+L*-.4986,U=Z*-.9689+B*1.8758+L*.0415,ke=Z*.0557+B*-.204+L*1.057,$=$>.0031308?1.055*jd($,1/2.4)-.055:$*12.92,U=U>.0031308?1.055*jd(U,1/2.4)-.055:U*12.92,ke=ke>.0031308?1.055*jd(ke,1/2.4)-.055:ke*12.92,$=Math.min(Math.max(0,$),1),U=Math.min(Math.max(0,U),1),ke=Math.min(Math.max(0,ke),1),[$*255,U*255,ke*255]},c.xyz.lab=function(N){let Z=N[0],B=N[1],L=N[2];Z/=95.047,B/=100,L/=108.883,Z=Z>.008856?jd(Z,1/3):7.787*Z+16/116,B=B>.008856?jd(B,1/3):7.787*B+16/116,L=L>.008856?jd(L,1/3):7.787*L+16/116;const $=116*B-16,U=500*(Z-B),ke=200*(B-L);return[$,U,ke]},c.lab.xyz=function(N){const Z=N[0],B=N[1],L=N[2];let $,U,ke;U=(Z+16)/116,$=B/500+U,ke=U-L/200;const We=jd(U,3),me=jd($,3),Le=jd(ke,3);return U=We>.008856?We:(U-16/116)/7.787,$=me>.008856?me:($-16/116)/7.787,ke=Le>.008856?Le:(ke-16/116)/7.787,$*=95.047,U*=100,ke*=108.883,[$,U,ke]},c.lab.lch=function(N){const Z=N[0],B=N[1],L=N[2];let $;$=Math.atan2(L,B)*360/2/Math.PI,$<0&&($+=360);const ke=Math.sqrt(B*B+L*L);return[Z,ke,$]},c.lch.lab=function(N){const Z=N[0],B=N[1],$=N[2]/360*2*Math.PI,U=B*Math.cos($),ke=B*Math.sin($);return[Z,U,ke]},c.rgb.ansi16=function(N,Z=null){const[B,L,$]=N;let U=Z===null?c.rgb.hsv(N)[2]:Z;if(U=Math.round(U/50),U===0)return 30;let ke=30+(Math.round($/255)<<2|Math.round(L/255)<<1|Math.round(B/255));return U===2&&(ke+=60),ke},c.hsv.ansi16=function(N){return c.rgb.ansi16(c.hsv.rgb(N),N[2])},c.rgb.ansi256=function(N){const Z=N[0],B=N[1],L=N[2];return Z===B&&B===L?Z<8?16:Z>248?231:Math.round((Z-8)/247*24)+232:16+36*Math.round(Z/255*5)+6*Math.round(B/255*5)+Math.round(L/255*5)},c.ansi16.rgb=function(N){let Z=N%10;if(Z===0||Z===7)return N>50&&(Z+=3.5),Z=Z/10.5*255,[Z,Z,Z];const B=(~~(N>50)+1)*.5,L=(Z&1)*B*255,$=(Z>>1&1)*B*255,U=(Z>>2&1)*B*255;return[L,$,U]},c.ansi256.rgb=function(N){if(N>=232){const U=(N-232)*10+8;return[U,U,U]}N-=16;let Z;const B=Math.floor(N/36)/5*255,L=Math.floor((Z=N%36)/6)/5*255,$=Z%6/5*255;return[B,L,$]},c.rgb.hex=function(N){const B=(((Math.round(N[0])&255)<<16)+((Math.round(N[1])&255)<<8)+(Math.round(N[2])&255)).toString(16).toUpperCase();return"000000".substring(B.length)+B},c.hex.rgb=function(N){const Z=N.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!Z)return[0,0,0];let B=Z[0];Z[0].length===3&&(B=B.split("").map(We=>We+We).join(""));const L=parseInt(B,16),$=L>>16&255,U=L>>8&255,ke=L&255;return[$,U,ke]},c.rgb.hcg=function(N){const Z=N[0]/255,B=N[1]/255,L=N[2]/255,$=Math.max(Math.max(Z,B),L),U=Math.min(Math.min(Z,B),L),ke=$-U;let We,me;return ke<1?We=U/(1-ke):We=0,ke<=0?me=0:$===Z?me=(B-L)/ke%6:$===B?me=2+(L-Z)/ke:me=4+(Z-B)/ke,me/=6,me%=1,[me*360,ke*100,We*100]},c.hsl.hcg=function(N){const Z=N[1]/100,B=N[2]/100,L=B<.5?2*Z*B:2*Z*(1-B);let $=0;return L<1&&($=(B-.5*L)/(1-L)),[N[0],L*100,$*100]},c.hsv.hcg=function(N){const Z=N[1]/100,B=N[2]/100,L=Z*B;let $=0;return L<1&&($=(B-L)/(1-L)),[N[0],L*100,$*100]},c.hcg.rgb=function(N){const Z=N[0]/360,B=N[1]/100,L=N[2]/100;if(B===0)return[L*255,L*255,L*255];const $=[0,0,0],U=Z%1*6,ke=U%1,We=1-ke;let me=0;switch(Math.floor(U)){case 0:$[0]=1,$[1]=ke,$[2]=0;break;case 1:$[0]=We,$[1]=1,$[2]=0;break;case 2:$[0]=0,$[1]=1,$[2]=ke;break;case 3:$[0]=0,$[1]=We,$[2]=1;break;case 4:$[0]=ke,$[1]=0,$[2]=1;break;default:$[0]=1,$[1]=0,$[2]=We}return me=(1-B)*L,[(B*$[0]+me)*255,(B*$[1]+me)*255,(B*$[2]+me)*255]},c.hcg.hsv=function(N){const Z=N[1]/100,B=N[2]/100,L=Z+B*(1-Z);let $=0;return L>0&&($=Z/L),[N[0],$*100,L*100]},c.hcg.hsl=function(N){const Z=N[1]/100,L=N[2]/100*(1-Z)+.5*Z;let $=0;return L>0&&L<.5?$=Z/(2*L):L>=.5&&L<1&&($=Z/(2*(1-L))),[N[0],$*100,L*100]},c.hcg.hwb=function(N){const Z=N[1]/100,B=N[2]/100,L=Z+B*(1-Z);return[N[0],(L-Z)*100,(1-L)*100]},c.hwb.hcg=function(N){const Z=N[1]/100,L=1-N[2]/100,$=L-Z;let U=0;return $<1&&(U=(L-$)/(1-$)),[N[0],$*100,U*100]},c.apple.rgb=function(N){return[N[0]/65535*255,N[1]/65535*255,N[2]/65535*255]},c.rgb.apple=function(N){return[N[0]/255*65535,N[1]/255*65535,N[2]/255*65535]},c.gray.rgb=function(N){return[N[0]/100*255,N[0]/100*255,N[0]/100*255]},c.gray.hsl=function(N){return[0,0,N[0]]},c.gray.hsv=c.gray.hsl,c.gray.hwb=function(N){return[0,100,N[0]]},c.gray.cmyk=function(N){return[0,0,0,N[0]]},c.gray.lab=function(N){return[N[0],0,0]},c.gray.hex=function(N){const Z=Math.round(N[0]/100*255)&255,L=((Z<<16)+(Z<<8)+Z).toString(16).toUpperCase();return"000000".substring(L.length)+L},c.rgb.gray=function(N){return[(N[0]+N[1]+N[2])/3/255*100]}},12085:function(vt,Ee,g){const v=g(48168),M=g(4111),c={},K=Object.keys(v);function N(B){const L=function(...$){const U=$[0];return U==null?U:(U.length>1&&($=U),B($))};return"conversion"in B&&(L.conversion=B.conversion),L}function Z(B){const L=function(...$){const U=$[0];if(U==null)return U;U.length>1&&($=U);const ke=B($);if(typeof ke=="object")for(let We=ke.length,me=0;me<We;me++)ke[me]=Math.round(ke[me]);return ke};return"conversion"in B&&(L.conversion=B.conversion),L}K.forEach(B=>{c[B]={},Object.defineProperty(c[B],"channels",{value:v[B].channels}),Object.defineProperty(c[B],"labels",{value:v[B].labels});const L=M(B);Object.keys(L).forEach(U=>{const ke=L[U];c[B][U]=Z(ke),c[B][U].raw=N(ke)})}),vt.exports=c},4111:function(vt,Ee,g){const v=g(48168);function M(){const Z={},B=Object.keys(v);for(let L=B.length,$=0;$<L;$++)Z[B[$]]={distance:-1,parent:null};return Z}function c(Z){const B=M(),L=[Z];for(B[Z].distance=0;L.length;){const $=L.pop(),U=Object.keys(v[$]);for(let ke=U.length,We=0;We<ke;We++){const me=U[We],Le=B[me];Le.distance===-1&&(Le.distance=B[$].distance+1,Le.parent=$,L.unshift(me))}}return B}function K(Z,B){return function(L){return B(Z(L))}}function N(Z,B){const L=[B[Z].parent,Z];let $=v[B[Z].parent][Z],U=B[Z].parent;for(;B[U].parent;)L.unshift(B[U].parent),$=K(v[B[U].parent][U],$),U=B[U].parent;return $.conversion=L,$}vt.exports=function(Z){const B=c(Z),L={},$=Object.keys(B);for(let U=$.length,ke=0;ke<U;ke++){const We=$[ke];B[We].parent!==null&&(L[We]=N(We,B))}return L}},8874:function(vt){"use strict";vt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(vt,Ee,g){var v=g(8874),M=g(86851),c=Object.hasOwnProperty,K=Object.create(null);for(var N in v)c.call(v,N)&&(K[v[N]]=N);var Z=vt.exports={to:{},get:{}};Z.get=function($){var U=$.substring(0,3).toLowerCase(),ke,We;switch(U){case"hsl":ke=Z.get.hsl($),We="hsl";break;case"hwb":ke=Z.get.hwb($),We="hwb";break;default:ke=Z.get.rgb($),We="rgb";break}return ke?{model:We,value:ke}:null},Z.get.rgb=function($){if(!$)return null;var U=/^#([a-f0-9]{3,4})$/i,ke=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,We=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,me=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Le=/^(\w+)$/,Se=[0,0,0,1],et,at,Lt;if(et=$.match(ke)){for(Lt=et[2],et=et[1],at=0;at<3;at++){var Et=at*2;Se[at]=parseInt(et.slice(Et,Et+2),16)}Lt&&(Se[3]=parseInt(Lt,16)/255)}else if(et=$.match(U)){for(et=et[1],Lt=et[3],at=0;at<3;at++)Se[at]=parseInt(et[at]+et[at],16);Lt&&(Se[3]=parseInt(Lt+Lt,16)/255)}else if(et=$.match(We)){for(at=0;at<3;at++)Se[at]=parseInt(et[at+1],0);et[4]&&(et[5]?Se[3]=parseFloat(et[4])*.01:Se[3]=parseFloat(et[4]))}else if(et=$.match(me)){for(at=0;at<3;at++)Se[at]=Math.round(parseFloat(et[at+1])*2.55);et[4]&&(et[5]?Se[3]=parseFloat(et[4])*.01:Se[3]=parseFloat(et[4]))}else return(et=$.match(Le))?et[1]==="transparent"?[0,0,0,0]:c.call(v,et[1])?(Se=v[et[1]],Se[3]=1,Se):null:null;for(at=0;at<3;at++)Se[at]=B(Se[at],0,255);return Se[3]=B(Se[3],0,1),Se},Z.get.hsl=function($){if(!$)return null;var U=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,ke=$.match(U);if(ke){var We=parseFloat(ke[4]),me=(parseFloat(ke[1])%360+360)%360,Le=B(parseFloat(ke[2]),0,100),Se=B(parseFloat(ke[3]),0,100),et=B(isNaN(We)?1:We,0,1);return[me,Le,Se,et]}return null},Z.get.hwb=function($){if(!$)return null;var U=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,ke=$.match(U);if(ke){var We=parseFloat(ke[4]),me=(parseFloat(ke[1])%360+360)%360,Le=B(parseFloat(ke[2]),0,100),Se=B(parseFloat(ke[3]),0,100),et=B(isNaN(We)?1:We,0,1);return[me,Le,Se,et]}return null},Z.to.hex=function(){var $=M(arguments);return"#"+L($[0])+L($[1])+L($[2])+($[3]<1?L(Math.round($[3]*255)):"")},Z.to.rgb=function(){var $=M(arguments);return $.length<4||$[3]===1?"rgb("+Math.round($[0])+", "+Math.round($[1])+", "+Math.round($[2])+")":"rgba("+Math.round($[0])+", "+Math.round($[1])+", "+Math.round($[2])+", "+$[3]+")"},Z.to.rgb.percent=function(){var $=M(arguments),U=Math.round($[0]/255*100),ke=Math.round($[1]/255*100),We=Math.round($[2]/255*100);return $.length<4||$[3]===1?"rgb("+U+"%, "+ke+"%, "+We+"%)":"rgba("+U+"%, "+ke+"%, "+We+"%, "+$[3]+")"},Z.to.hsl=function(){var $=M(arguments);return $.length<4||$[3]===1?"hsl("+$[0]+", "+$[1]+"%, "+$[2]+"%)":"hsla("+$[0]+", "+$[1]+"%, "+$[2]+"%, "+$[3]+")"},Z.to.hwb=function(){var $=M(arguments),U="";return $.length>=4&&$[3]!==1&&(U=", "+$[3]),"hwb("+$[0]+", "+$[1]+"%, "+$[2]+"%"+U+")"},Z.to.keyword=function($){return K[$.slice(0,3)]};function B($,U,ke){return Math.min(Math.max(U,$),ke)}function L($){var U=Math.round($).toString(16).toUpperCase();return U.length<2?"0"+U:U}},6767:function(vt,Ee,g){const v=g(19818),M=g(12085),c=["keyword","gray","hex"],K={};for(const me of Object.keys(M))K[[...M[me].labels].sort().join("")]=me;const N={};function Z(me,Le){if(!(this instanceof Z))return new Z(me,Le);if(Le&&Le in c&&(Le=null),Le&&!(Le in M))throw new Error("Unknown model: "+Le);let Se,et;if(me==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(me instanceof Z)this.model=me.model,this.color=[...me.color],this.valpha=me.valpha;else if(typeof me=="string"){const at=v.get(me);if(at===null)throw new Error("Unable to parse color from string: "+me);this.model=at.model,et=M[this.model].channels,this.color=at.value.slice(0,et),this.valpha=typeof at.value[et]=="number"?at.value[et]:1}else if(me.length>0){this.model=Le||"rgb",et=M[this.model].channels;const at=Array.prototype.slice.call(me,0,et);this.color=We(at,et),this.valpha=typeof me[et]=="number"?me[et]:1}else if(typeof me=="number")this.model="rgb",this.color=[me>>16&255,me>>8&255,me&255],this.valpha=1;else{this.valpha=1;const at=Object.keys(me);"alpha"in me&&(at.splice(at.indexOf("alpha"),1),this.valpha=typeof me.alpha=="number"?me.alpha:0);const Lt=at.sort().join("");if(!(Lt in K))throw new Error("Unable to parse color from object: "+JSON.stringify(me));this.model=K[Lt];const{labels:Et}=M[this.model],jt=[];for(Se=0;Se<Et.length;Se++)jt.push(me[Et[Se]]);this.color=We(jt)}if(N[this.model])for(et=M[this.model].channels,Se=0;Se<et;Se++){const at=N[this.model][Se];at&&(this.color[Se]=at(this.color[Se]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Z.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(me){let Le=this.model in v.to?this:this.rgb();Le=Le.round(typeof me=="number"?me:1);const Se=Le.valpha===1?Le.color:[...Le.color,this.valpha];return v.to[Le.model](Se)},percentString(me){const Le=this.rgb().round(typeof me=="number"?me:1),Se=Le.valpha===1?Le.color:[...Le.color,this.valpha];return v.to.rgb.percent(Se)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const me={},{channels:Le}=M[this.model],{labels:Se}=M[this.model];for(let et=0;et<Le;et++)me[Se[et]]=this.color[et];return this.valpha!==1&&(me.alpha=this.valpha),me},unitArray(){const me=this.rgb().color;return me[0]/=255,me[1]/=255,me[2]/=255,this.valpha!==1&&me.push(this.valpha),me},unitObject(){const me=this.rgb().object();return me.r/=255,me.g/=255,me.b/=255,this.valpha!==1&&(me.alpha=this.valpha),me},round(me){return me=Math.max(me||0,0),new Z([...this.color.map(L(me)),this.valpha],this.model)},alpha(me){return me!==void 0?new Z([...this.color,Math.max(0,Math.min(1,me))],this.model):this.valpha},red:$("rgb",0,U(255)),green:$("rgb",1,U(255)),blue:$("rgb",2,U(255)),hue:$(["hsl","hsv","hsl","hwb","hcg"],0,me=>(me%360+360)%360),saturationl:$("hsl",1,U(100)),lightness:$("hsl",2,U(100)),saturationv:$("hsv",1,U(100)),value:$("hsv",2,U(100)),chroma:$("hcg",1,U(100)),gray:$("hcg",2,U(100)),white:$("hwb",1,U(100)),wblack:$("hwb",2,U(100)),cyan:$("cmyk",0,U(100)),magenta:$("cmyk",1,U(100)),yellow:$("cmyk",2,U(100)),black:$("cmyk",3,U(100)),x:$("xyz",0,U(95.047)),y:$("xyz",1,U(100)),z:$("xyz",2,U(108.833)),l:$("lab",0,U(100)),a:$("lab",1),b:$("lab",2),keyword(me){return me!==void 0?new Z(me):M[this.model].keyword(this.color)},hex(me){return me!==void 0?new Z(me):v.to.hex(this.rgb().round().color)},hexa(me){if(me!==void 0)return new Z(me);const Le=this.rgb().round().color;let Se=Math.round(this.valpha*255).toString(16).toUpperCase();return Se.length===1&&(Se="0"+Se),v.to.hex(Le)+Se},rgbNumber(){const me=this.rgb().color;return(me[0]&255)<<16|(me[1]&255)<<8|me[2]&255},luminosity(){const me=this.rgb().color,Le=[];for(const[Se,et]of me.entries()){const at=et/255;Le[Se]=at<=.04045?at/12.92:jd((at+.055)/1.055,2.4)}return .2126*Le[0]+.7152*Le[1]+.0722*Le[2]},contrast(me){const Le=this.luminosity(),Se=me.luminosity();return Le>Se?(Le+.05)/(Se+.05):(Se+.05)/(Le+.05)},level(me){const Le=this.contrast(me);return Le>=7?"AAA":Le>=4.5?"AA":""},isDark(){const me=this.rgb().color;return(me[0]*2126+me[1]*7152+me[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const me=this.rgb();for(let Le=0;Le<3;Le++)me.color[Le]=255-me.color[Le];return me},lighten(me){const Le=this.hsl();return Le.color[2]+=Le.color[2]*me,Le},darken(me){const Le=this.hsl();return Le.color[2]-=Le.color[2]*me,Le},saturate(me){const Le=this.hsl();return Le.color[1]+=Le.color[1]*me,Le},desaturate(me){const Le=this.hsl();return Le.color[1]-=Le.color[1]*me,Le},whiten(me){const Le=this.hwb();return Le.color[1]+=Le.color[1]*me,Le},blacken(me){const Le=this.hwb();return Le.color[2]+=Le.color[2]*me,Le},grayscale(){const me=this.rgb().color,Le=me[0]*.3+me[1]*.59+me[2]*.11;return Z.rgb(Le,Le,Le)},fade(me){return this.alpha(this.valpha-this.valpha*me)},opaquer(me){return this.alpha(this.valpha+this.valpha*me)},rotate(me){const Le=this.hsl();let Se=Le.color[0];return Se=(Se+me)%360,Se=Se<0?360+Se:Se,Le.color[0]=Se,Le},mix(me,Le){if(!me||!me.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof me);const Se=me.rgb(),et=this.rgb(),at=Le===void 0?.5:Le,Lt=2*at-1,Et=Se.alpha()-et.alpha(),jt=((Lt*Et===-1?Lt:(Lt+Et)/(1+Lt*Et))+1)/2,pe=1-jt;return Z.rgb(jt*Se.red()+pe*et.red(),jt*Se.green()+pe*et.green(),jt*Se.blue()+pe*et.blue(),Se.alpha()*at+et.alpha()*(1-at))}};for(const me of Object.keys(M)){if(c.includes(me))continue;const{channels:Le}=M[me];Z.prototype[me]=function(...Se){return this.model===me?new Z(this):Se.length>0?new Z(Se,me):new Z([...ke(M[this.model][me].raw(this.color)),this.valpha],me)},Z[me]=function(...Se){let et=Se[0];return typeof et=="number"&&(et=We(Se,Le)),new Z(et,me)}}function B(me,Le){return Number(me.toFixed(Le))}function L(me){return function(Le){return B(Le,me)}}function $(me,Le,Se){me=Array.isArray(me)?me:[me];for(const et of me)(N[et]||(N[et]=[]))[Le]=Se;return me=me[0],function(et){let at;return et!==void 0?(Se&&(et=Se(et)),at=this[me](),at.color[Le]=et,at):(at=this[me]().color[Le],Se&&(at=Se(at)),at)}}function U(me){return function(Le){return Math.max(0,Math.min(me,Le))}}function ke(me){return Array.isArray(me)?me:[me]}function We(me,Le){for(let Se=0;Se<Le;Se++)typeof me[Se]!="number"&&(me[Se]=0);return me}vt.exports=Z},37620:function(vt,Ee,g){"use strict";g.d(Ee,{ZP:function(){return jt},B8:function(){return ie}});function v(xe,Ne,Pe){xe.prototype=Ne.prototype=Pe,Pe.constructor=xe}function M(xe,Ne){var Pe=Object.create(xe.prototype);for(var He in Ne)Pe[He]=Ne[He];return Pe}function c(){}var K=.7,N=1/K,Z="\\s*([+-]?\\d+)\\s*",B="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",L="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$=/^#([0-9a-f]{3,8})$/,U=new RegExp("^rgb\\("+[Z,Z,Z]+"\\)$"),ke=new RegExp("^rgb\\("+[L,L,L]+"\\)$"),We=new RegExp("^rgba\\("+[Z,Z,Z,B]+"\\)$"),me=new RegExp("^rgba\\("+[L,L,L,B]+"\\)$"),Le=new RegExp("^hsl\\("+[B,L,L]+"\\)$"),Se=new RegExp("^hsla\\("+[B,L,L,B]+"\\)$"),et={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};v(c,jt,{copy:function(xe){return Object.assign(new this.constructor,this,xe)},displayable:function(){return this.rgb().displayable()},hex:at,formatHex:at,formatHsl:Lt,formatRgb:Et,toString:Et});function at(){return this.rgb().formatHex()}function Lt(){return je(this).formatHsl()}function Et(){return this.rgb().formatRgb()}function jt(xe){var Ne,Pe;return xe=(xe+"").trim().toLowerCase(),(Ne=$.exec(xe))?(Pe=Ne[1].length,Ne=parseInt(Ne[1],16),Pe===6?pe(Ne):Pe===3?new re(Ne>>8&15|Ne>>4&240,Ne>>4&15|Ne&240,(Ne&15)<<4|Ne&15,1):Pe===8?$e(Ne>>24&255,Ne>>16&255,Ne>>8&255,(Ne&255)/255):Pe===4?$e(Ne>>12&15|Ne>>8&240,Ne>>8&15|Ne>>4&240,Ne>>4&15|Ne&240,((Ne&15)<<4|Ne&15)/255):null):(Ne=U.exec(xe))?new re(Ne[1],Ne[2],Ne[3],1):(Ne=ke.exec(xe))?new re(Ne[1]*255/100,Ne[2]*255/100,Ne[3]*255/100,1):(Ne=We.exec(xe))?$e(Ne[1],Ne[2],Ne[3],Ne[4]):(Ne=me.exec(xe))?$e(Ne[1]*255/100,Ne[2]*255/100,Ne[3]*255/100,Ne[4]):(Ne=Le.exec(xe))?ce(Ne[1],Ne[2]/100,Ne[3]/100,1):(Ne=Se.exec(xe))?ce(Ne[1],Ne[2]/100,Ne[3]/100,Ne[4]):et.hasOwnProperty(xe)?pe(et[xe]):xe==="transparent"?new re(NaN,NaN,NaN,0):null}function pe(xe){return new re(xe>>16&255,xe>>8&255,xe&255,1)}function $e(xe,Ne,Pe,He){return He<=0&&(xe=Ne=Pe=NaN),new re(xe,Ne,Pe,He)}function ye(xe){return xe instanceof c||(xe=jt(xe)),xe?(xe=xe.rgb(),new re(xe.r,xe.g,xe.b,xe.opacity)):new re}function ie(xe,Ne,Pe,He){return arguments.length===1?ye(xe):new re(xe,Ne,Pe,He==null?1:He)}function re(xe,Ne,Pe,He){this.r=+xe,this.g=+Ne,this.b=+Pe,this.opacity=+He}v(re,ie,M(c,{brighter:function(xe){return xe=xe==null?N:Math.pow(N,xe),new re(this.r*xe,this.g*xe,this.b*xe,this.opacity)},darker:function(xe){return xe=xe==null?K:Math.pow(K,xe),new re(this.r*xe,this.g*xe,this.b*xe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:De,formatHex:De,formatRgb:le,toString:le}));function De(){return"#"+ge(this.r)+ge(this.g)+ge(this.b)}function le(){var xe=this.opacity;return xe=isNaN(xe)?1:Math.max(0,Math.min(1,xe)),(xe===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(xe===1?")":", "+xe+")")}function ge(xe){return xe=Math.max(0,Math.min(255,Math.round(xe)||0)),(xe<16?"0":"")+xe.toString(16)}function ce(xe,Ne,Pe,He){return He<=0?xe=Ne=Pe=NaN:Pe<=0||Pe>=1?xe=Ne=NaN:Ne<=0&&(xe=NaN),new Me(xe,Ne,Pe,He)}function je(xe){if(xe instanceof Me)return new Me(xe.h,xe.s,xe.l,xe.opacity);if(xe instanceof c||(xe=jt(xe)),!xe)return new Me;if(xe instanceof Me)return xe;xe=xe.rgb();var Ne=xe.r/255,Pe=xe.g/255,He=xe.b/255,lt=Math.min(Ne,Pe,He),ft=Math.max(Ne,Pe,He),It=NaN,fe=ft-lt,_t=(ft+lt)/2;return fe?(Ne===ft?It=(Pe-He)/fe+(Pe<He)*6:Pe===ft?It=(He-Ne)/fe+2:It=(Ne-Pe)/fe+4,fe/=_t<.5?ft+lt:2-ft-lt,It*=60):fe=_t>0&&_t<1?0:It,new Me(It,fe,_t,xe.opacity)}function J(xe,Ne,Pe,He){return arguments.length===1?je(xe):new Me(xe,Ne,Pe,He==null?1:He)}function Me(xe,Ne,Pe,He){this.h=+xe,this.s=+Ne,this.l=+Pe,this.opacity=+He}v(Me,J,M(c,{brighter:function(xe){return xe=xe==null?N:Math.pow(N,xe),new Me(this.h,this.s,this.l*xe,this.opacity)},darker:function(xe){return xe=xe==null?K:Math.pow(K,xe),new Me(this.h,this.s,this.l*xe,this.opacity)},rgb:function(){var xe=this.h%360+(this.h<0)*360,Ne=isNaN(xe)||isNaN(this.s)?0:this.s,Pe=this.l,He=Pe+(Pe<.5?Pe:1-Pe)*Ne,lt=2*Pe-He;return new re(ne(xe>=240?xe-240:xe+120,lt,He),ne(xe,lt,He),ne(xe<120?xe+240:xe-120,lt,He),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var xe=this.opacity;return xe=isNaN(xe)?1:Math.max(0,Math.min(1,xe)),(xe===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(xe===1?")":", "+xe+")")}}));function ne(xe,Ne,Pe){return(xe<60?Ne+(Pe-Ne)*xe/60:xe<180?Pe:xe<240?Ne+(Pe-Ne)*(240-xe)/60:Ne)*255}},24019:function(vt,Ee,g){vt.exports.structure=g(44590)},30810:function(vt,Ee,g){var v=g(62686),M={string:"C",number:"N",boolean:"L",null:"C"};vt.exports.multi=c,vt.exports.bytesPer=Z,vt.exports.obj=N;function c(B){var L={};B.forEach($);function $(U){K(L,U)}return N(L)}function K(B,L){for(var $ in L){var U=typeof L[$]!="undefined"&&L[$]!==null;(typeof B[$]=="undefined"||U)&&(B[$]=L[$])}return B}function N(B){var L={},$=[];for(var U in B)L[U]=B[U]===null?"null":typeof B[U];for(var ke in L){var We=M[L[ke]];We&&$.push({name:ke,type:We,size:v[We]})}return $}function Z(B){return B.reduce(function(L,$){return L+$.size},1)}},62686:function(vt){vt.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}},80514:function(vt){vt.exports.lpad=function(g,v,M){for(;g.length<v;)g=M+g;return g},vt.exports.rpad=function(g,v,M){for(;g.length<v;)g=g+M;return g},vt.exports.writeField=function(g,v,M,c){for(var K=0;K<v;K++)g.setUint8(c,M.charCodeAt(K)),c++;return c}},44590:function(vt,Ee,g){var v=g(62686),M=g(80514),c=g(30810);vt.exports=function(N,Z){var B=Z||c.multi(N),L=32*B.length+1,$=c.bytesPer(B),U=new ArrayBuffer(L+32+$*N.length+1),ke=new Date,We=new DataView(U);We.setUint8(0,3),We.setUint8(1,ke.getFullYear()-1900),We.setUint8(2,ke.getMonth()),We.setUint8(3,ke.getDate()),We.setUint32(4,N.length,!0);var me=L+32;return We.setUint16(8,me,!0),We.setUint16(10,$,!0),We.setInt8(32+L-1,13),B.forEach(function(Le,Se){Le.name.split("").slice(0,8).forEach(function(et,at){We.setInt8(32+Se*32+at,et.charCodeAt(0))}),We.setInt8(32+Se*32+11,Le.type.charCodeAt(0)),We.setInt8(32+Se*32+16,Le.size),Le.type=="N"&&We.setInt8(32+Se*32+17,3)}),offset=L+32,N.forEach(function(Le,Se){We.setUint8(offset,32),offset++,B.forEach(function(et){var at=Le[et.name];switch((at===null||typeof at=="undefined")&&(at=""),et.type){case"L":We.setUint8(offset,at?84:70),offset++;break;case"D":offset=M.writeField(We,8,M.lpad(at.toString(),8," "),offset);break;case"N":offset=M.writeField(We,et.size,M.lpad(at.toString(),et.size," ").substr(0,18),offset);break;case"C":offset=M.writeField(We,et.size,M.rpad(at.toString(),et.size," "),offset);break;default:throw new Error("Unknown field type")}})}),We.setUint8(offset,26),We}},44020:function(vt){"use strict";var Ee="%[a-f0-9]{2}",g=new RegExp("("+Ee+")|([^%]+?)","gi"),v=new RegExp("("+Ee+")+","gi");function M(N,Z){try{return[decodeURIComponent(N.join(""))]}catch($){}if(N.length===1)return N;Z=Z||1;var B=N.slice(0,Z),L=N.slice(Z);return Array.prototype.concat.call([],M(B),M(L))}function c(N){try{return decodeURIComponent(N)}catch(L){for(var Z=N.match(g)||[],B=1;B<Z.length;B++)N=M(Z,B).join(""),Z=N.match(g)||[];return N}}function K(N){for(var Z={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},B=v.exec(N);B;){try{Z[B[0]]=decodeURIComponent(B[0])}catch(We){var L=c(B[0]);L!==B[0]&&(Z[B[0]]=L)}B=v.exec(N)}Z["%C2"]="\uFFFD";for(var $=Object.keys(Z),U=0;U<$.length;U++){var ke=$[U];N=N.replace(new RegExp(ke,"g"),Z[ke])}return N}vt.exports=function(N){if(typeof N!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof N+"`");try{return N=N.replace(/\+/g," "),decodeURIComponent(N)}catch(Z){return K(N)}}},9187:function(vt){"use strict";vt.exports=Ee,vt.exports.default=Ee;function Ee(J,Me,ne){ne=ne||2;var xe=Me&&Me.length,Ne=xe?Me[0]*ne:J.length,Pe=g(J,0,Ne,ne,!0),He=[];if(!Pe||Pe.next===Pe.prev)return He;var lt,ft,It,fe,_t,Ye,Ot;if(xe&&(Pe=B(J,Me,Pe,ne)),J.length>80*ne){lt=It=J[0],ft=fe=J[1];for(var mt=ne;mt<Ne;mt+=ne)_t=J[mt],Ye=J[mt+1],_t<lt&&(lt=_t),Ye<ft&&(ft=Ye),_t>It&&(It=_t),Ye>fe&&(fe=Ye);Ot=Math.max(It-lt,fe-ft),Ot=Ot!==0?32767/Ot:0}return M(Pe,He,ne,lt,ft,Ot,0),He}function g(J,Me,ne,xe,Ne){var Pe,He;if(Ne===je(J,Me,ne,xe)>0)for(Pe=Me;Pe<ne;Pe+=xe)He=le(Pe,J[Pe],J[Pe+1],He);else for(Pe=ne-xe;Pe>=Me;Pe-=xe)He=le(Pe,J[Pe],J[Pe+1],He);return He&&Et(He,He.next)&&(ge(He),He=He.next),He}function v(J,Me){if(!J)return J;Me||(Me=J);var ne=J,xe;do if(xe=!1,!ne.steiner&&(Et(ne,ne.next)||Lt(ne.prev,ne,ne.next)===0)){if(ge(ne),ne=Me=ne.prev,ne===ne.next)break;xe=!0}else ne=ne.next;while(xe||ne!==Me);return Me}function M(J,Me,ne,xe,Ne,Pe,He){if(J){!He&&Pe&&We(J,xe,Ne,Pe);for(var lt=J,ft,It;J.prev!==J.next;){if(ft=J.prev,It=J.next,Pe?K(J,xe,Ne,Pe):c(J)){Me.push(ft.i/ne|0),Me.push(J.i/ne|0),Me.push(It.i/ne|0),ge(J),J=It.next,lt=It.next;continue}if(J=It,J===lt){He?He===1?(J=N(v(J),Me,ne),M(J,Me,ne,xe,Ne,Pe,2)):He===2&&Z(J,Me,ne,xe,Ne,Pe):M(v(J),Me,ne,xe,Ne,Pe,1);break}}}}function c(J){var Me=J.prev,ne=J,xe=J.next;if(Lt(Me,ne,xe)>=0)return!1;for(var Ne=Me.x,Pe=ne.x,He=xe.x,lt=Me.y,ft=ne.y,It=xe.y,fe=Ne<Pe?Ne<He?Ne:He:Pe<He?Pe:He,_t=lt<ft?lt<It?lt:It:ft<It?ft:It,Ye=Ne>Pe?Ne>He?Ne:He:Pe>He?Pe:He,Ot=lt>ft?lt>It?lt:It:ft>It?ft:It,mt=xe.next;mt!==Me;){if(mt.x>=fe&&mt.x<=Ye&&mt.y>=_t&&mt.y<=Ot&&et(Ne,lt,Pe,ft,He,It,mt.x,mt.y)&&Lt(mt.prev,mt,mt.next)>=0)return!1;mt=mt.next}return!0}function K(J,Me,ne,xe){var Ne=J.prev,Pe=J,He=J.next;if(Lt(Ne,Pe,He)>=0)return!1;for(var lt=Ne.x,ft=Pe.x,It=He.x,fe=Ne.y,_t=Pe.y,Ye=He.y,Ot=lt<ft?lt<It?lt:It:ft<It?ft:It,mt=fe<_t?fe<Ye?fe:Ye:_t<Ye?_t:Ye,Rt=lt>ft?lt>It?lt:It:ft>It?ft:It,pt=fe>_t?fe>Ye?fe:Ye:_t>Ye?_t:Ye,Ge=Le(Ot,mt,Me,ne,xe),wt=Le(Rt,pt,Me,ne,xe),ee=J.prevZ,Re=J.nextZ;ee&&ee.z>=Ge&&Re&&Re.z<=wt;){if(ee.x>=Ot&&ee.x<=Rt&&ee.y>=mt&&ee.y<=pt&&ee!==Ne&&ee!==He&&et(lt,fe,ft,_t,It,Ye,ee.x,ee.y)&&Lt(ee.prev,ee,ee.next)>=0||(ee=ee.prevZ,Re.x>=Ot&&Re.x<=Rt&&Re.y>=mt&&Re.y<=pt&&Re!==Ne&&Re!==He&&et(lt,fe,ft,_t,It,Ye,Re.x,Re.y)&&Lt(Re.prev,Re,Re.next)>=0))return!1;Re=Re.nextZ}for(;ee&&ee.z>=Ge;){if(ee.x>=Ot&&ee.x<=Rt&&ee.y>=mt&&ee.y<=pt&&ee!==Ne&&ee!==He&&et(lt,fe,ft,_t,It,Ye,ee.x,ee.y)&&Lt(ee.prev,ee,ee.next)>=0)return!1;ee=ee.prevZ}for(;Re&&Re.z<=wt;){if(Re.x>=Ot&&Re.x<=Rt&&Re.y>=mt&&Re.y<=pt&&Re!==Ne&&Re!==He&&et(lt,fe,ft,_t,It,Ye,Re.x,Re.y)&&Lt(Re.prev,Re,Re.next)>=0)return!1;Re=Re.nextZ}return!0}function N(J,Me,ne){var xe=J;do{var Ne=xe.prev,Pe=xe.next.next;!Et(Ne,Pe)&&jt(Ne,xe,xe.next,Pe)&&ie(Ne,Pe)&&ie(Pe,Ne)&&(Me.push(Ne.i/ne|0),Me.push(xe.i/ne|0),Me.push(Pe.i/ne|0),ge(xe),ge(xe.next),xe=J=Pe),xe=xe.next}while(xe!==J);return v(xe)}function Z(J,Me,ne,xe,Ne,Pe){var He=J;do{for(var lt=He.next.next;lt!==He.prev;){if(He.i!==lt.i&&at(He,lt)){var ft=De(He,lt);He=v(He,He.next),ft=v(ft,ft.next),M(He,Me,ne,xe,Ne,Pe,0),M(ft,Me,ne,xe,Ne,Pe,0);return}lt=lt.next}He=He.next}while(He!==J)}function B(J,Me,ne,xe){var Ne=[],Pe,He,lt,ft,It;for(Pe=0,He=Me.length;Pe<He;Pe++)lt=Me[Pe]*xe,ft=Pe<He-1?Me[Pe+1]*xe:J.length,It=g(J,lt,ft,xe,!1),It===It.next&&(It.steiner=!0),Ne.push(Se(It));for(Ne.sort(L),Pe=0;Pe<Ne.length;Pe++)ne=$(Ne[Pe],ne);return ne}function L(J,Me){return J.x-Me.x}function $(J,Me){var ne=U(J,Me);if(!ne)return Me;var xe=De(ne,J);return v(xe,xe.next),v(ne,ne.next)}function U(J,Me){var ne=Me,xe=J.x,Ne=J.y,Pe=-1/0,He;do{if(Ne<=ne.y&&Ne>=ne.next.y&&ne.next.y!==ne.y){var lt=ne.x+(Ne-ne.y)*(ne.next.x-ne.x)/(ne.next.y-ne.y);if(lt<=xe&&lt>Pe&&(Pe=lt,He=ne.x<ne.next.x?ne:ne.next,lt===xe))return He}ne=ne.next}while(ne!==Me);if(!He)return null;var ft=He,It=He.x,fe=He.y,_t=1/0,Ye;ne=He;do xe>=ne.x&&ne.x>=It&&xe!==ne.x&&et(Ne<fe?xe:Pe,Ne,It,fe,Ne<fe?Pe:xe,Ne,ne.x,ne.y)&&(Ye=Math.abs(Ne-ne.y)/(xe-ne.x),ie(ne,J)&&(Ye<_t||Ye===_t&&(ne.x>He.x||ne.x===He.x&&ke(He,ne)))&&(He=ne,_t=Ye)),ne=ne.next;while(ne!==ft);return He}function ke(J,Me){return Lt(J.prev,J,Me.prev)<0&&Lt(Me.next,J,J.next)<0}function We(J,Me,ne,xe){var Ne=J;do Ne.z===0&&(Ne.z=Le(Ne.x,Ne.y,Me,ne,xe)),Ne.prevZ=Ne.prev,Ne.nextZ=Ne.next,Ne=Ne.next;while(Ne!==J);Ne.prevZ.nextZ=null,Ne.prevZ=null,me(Ne)}function me(J){var Me,ne,xe,Ne,Pe,He,lt,ft,It=1;do{for(ne=J,J=null,Pe=null,He=0;ne;){for(He++,xe=ne,lt=0,Me=0;Me<It&&(lt++,xe=xe.nextZ,!!xe);Me++);for(ft=It;lt>0||ft>0&&xe;)lt!==0&&(ft===0||!xe||ne.z<=xe.z)?(Ne=ne,ne=ne.nextZ,lt--):(Ne=xe,xe=xe.nextZ,ft--),Pe?Pe.nextZ=Ne:J=Ne,Ne.prevZ=Pe,Pe=Ne;ne=xe}Pe.nextZ=null,It*=2}while(He>1);return J}function Le(J,Me,ne,xe,Ne){return J=(J-ne)*Ne|0,Me=(Me-xe)*Ne|0,J=(J|J<<8)&16711935,J=(J|J<<4)&252645135,J=(J|J<<2)&858993459,J=(J|J<<1)&1431655765,Me=(Me|Me<<8)&16711935,Me=(Me|Me<<4)&252645135,Me=(Me|Me<<2)&858993459,Me=(Me|Me<<1)&1431655765,J|Me<<1}function Se(J){var Me=J,ne=J;do(Me.x<ne.x||Me.x===ne.x&&Me.y<ne.y)&&(ne=Me),Me=Me.next;while(Me!==J);return ne}function et(J,Me,ne,xe,Ne,Pe,He,lt){return(Ne-He)*(Me-lt)>=(J-He)*(Pe-lt)&&(J-He)*(xe-lt)>=(ne-He)*(Me-lt)&&(ne-He)*(Pe-lt)>=(Ne-He)*(xe-lt)}function at(J,Me){return J.next.i!==Me.i&&J.prev.i!==Me.i&&!ye(J,Me)&&(ie(J,Me)&&ie(Me,J)&&re(J,Me)&&(Lt(J.prev,J,Me.prev)||Lt(J,Me.prev,Me))||Et(J,Me)&&Lt(J.prev,J,J.next)>0&&Lt(Me.prev,Me,Me.next)>0)}function Lt(J,Me,ne){return(Me.y-J.y)*(ne.x-Me.x)-(Me.x-J.x)*(ne.y-Me.y)}function Et(J,Me){return J.x===Me.x&&J.y===Me.y}function jt(J,Me,ne,xe){var Ne=$e(Lt(J,Me,ne)),Pe=$e(Lt(J,Me,xe)),He=$e(Lt(ne,xe,J)),lt=$e(Lt(ne,xe,Me));return!!(Ne!==Pe&&He!==lt||Ne===0&&pe(J,ne,Me)||Pe===0&&pe(J,xe,Me)||He===0&&pe(ne,J,xe)||lt===0&&pe(ne,Me,xe))}function pe(J,Me,ne){return Me.x<=Math.max(J.x,ne.x)&&Me.x>=Math.min(J.x,ne.x)&&Me.y<=Math.max(J.y,ne.y)&&Me.y>=Math.min(J.y,ne.y)}function $e(J){return J>0?1:J<0?-1:0}function ye(J,Me){var ne=J;do{if(ne.i!==J.i&&ne.next.i!==J.i&&ne.i!==Me.i&&ne.next.i!==Me.i&&jt(ne,ne.next,J,Me))return!0;ne=ne.next}while(ne!==J);return!1}function ie(J,Me){return Lt(J.prev,J,J.next)<0?Lt(J,Me,J.next)>=0&&Lt(J,J.prev,Me)>=0:Lt(J,Me,J.prev)<0||Lt(J,J.next,Me)<0}function re(J,Me){var ne=J,xe=!1,Ne=(J.x+Me.x)/2,Pe=(J.y+Me.y)/2;do ne.y>Pe!=ne.next.y>Pe&&ne.next.y!==ne.y&&Ne<(ne.next.x-ne.x)*(Pe-ne.y)/(ne.next.y-ne.y)+ne.x&&(xe=!xe),ne=ne.next;while(ne!==J);return xe}function De(J,Me){var ne=new ce(J.i,J.x,J.y),xe=new ce(Me.i,Me.x,Me.y),Ne=J.next,Pe=Me.prev;return J.next=Me,Me.prev=J,ne.next=Ne,Ne.prev=ne,xe.next=ne,ne.prev=xe,Pe.next=xe,xe.prev=Pe,xe}function le(J,Me,ne,xe){var Ne=new ce(J,Me,ne);return xe?(Ne.next=xe.next,Ne.prev=xe,xe.next.prev=Ne,xe.next=Ne):(Ne.prev=Ne,Ne.next=Ne),Ne}function ge(J){J.next.prev=J.prev,J.prev.next=J.next,J.prevZ&&(J.prevZ.nextZ=J.nextZ),J.nextZ&&(J.nextZ.prevZ=J.prevZ)}function ce(J,Me,ne){this.i=J,this.x=Me,this.y=ne,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ee.deviation=function(J,Me,ne,xe){var Ne=Me&&Me.length,Pe=Ne?Me[0]*ne:J.length,He=Math.abs(je(J,0,Pe,ne));if(Ne)for(var lt=0,ft=Me.length;lt<ft;lt++){var It=Me[lt]*ne,fe=lt<ft-1?Me[lt+1]*ne:J.length;He-=Math.abs(je(J,It,fe,ne))}var _t=0;for(lt=0;lt<xe.length;lt+=3){var Ye=xe[lt]*ne,Ot=xe[lt+1]*ne,mt=xe[lt+2]*ne;_t+=Math.abs((J[Ye]-J[mt])*(J[Ot+1]-J[Ye+1])-(J[Ye]-J[Ot])*(J[mt+1]-J[Ye+1]))}return He===0&&_t===0?0:Math.abs((_t-He)/He)};function je(J,Me,ne,xe){for(var Ne=0,Pe=Me,He=ne-xe;Pe<ne;Pe+=xe)Ne+=(J[He]-J[Pe])*(J[Pe+1]+J[He+1]),He=Pe;return Ne}Ee.flatten=function(J){for(var Me=J[0][0].length,ne={vertices:[],holes:[],dimensions:Me},xe=0,Ne=0;Ne<J.length;Ne++){for(var Pe=0;Pe<J[Ne].length;Pe++)for(var He=0;He<Me;He++)ne.vertices.push(J[Ne][Pe][He]);Ne>0&&(xe+=J[Ne-1].length,ne.holes.push(xe))}return ne}},67709:function(vt){function Ee(v){var M=v.target||v.srcElement;M.__resizeRAF__&&cancelAnimationFrame(M.__resizeRAF__),M.__resizeRAF__=requestAnimationFrame(function(){var c=M.__resizeTrigger__,K=c&&c.__resizeListeners__;K&&K.forEach(function(N){N.call(c,v)})})}var g=function(M,c){var K=this,N=K.document,Z,B=N.attachEvent;typeof navigator!="undefined"&&(Z=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function L(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",Ee)}if(!M.__resizeListeners__)if(M.__resizeListeners__=[],B)M.__resizeTrigger__=M,M.attachEvent("onresize",Ee);else{getComputedStyle(M).position==="static"&&(M.style.position="relative");var $=M.__resizeTrigger__=N.createElement("object");$.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),$.setAttribute("class","resize-sensor"),$.setAttribute("tabindex","-1"),$.setAttribute("title",""),$.__resizeElement__=M,$.onload=L,$.type="text/html",Z&&M.appendChild($),$.data="about:blank",Z||M.appendChild($)}M.__resizeListeners__.push(c)};vt.exports=typeof window=="undefined"?g:g.bind(window),vt.exports.unbind=function(v,M){var c=document.attachEvent,K=v.__resizeListeners__||[];if(M){var N=K.indexOf(M);N!==-1&&K.splice(N,1)}else K=v.__resizeListeners__=[];if(!K.length){if(c)v.detachEvent("onresize",Ee);else if(v.__resizeTrigger__){var Z=v.__resizeTrigger__.contentDocument,B=Z&&Z.defaultView;B&&(B.removeEventListener("resize",Ee),delete B.__resizeTrigger__),v.__resizeTrigger__=!v.removeChild(v.__resizeTrigger__)}delete v.__resizeListeners__}}},26729:function(vt){"use strict";var Ee=Object.prototype.hasOwnProperty,g="~";function v(){}Object.create&&(v.prototype=Object.create(null),new v().__proto__||(g=!1));function M(Z,B,L){this.fn=Z,this.context=B,this.once=L||!1}function c(Z,B,L,$,U){if(typeof L!="function")throw new TypeError("The listener must be a function");var ke=new M(L,$||Z,U),We=g?g+B:B;return Z._events[We]?Z._events[We].fn?Z._events[We]=[Z._events[We],ke]:Z._events[We].push(ke):(Z._events[We]=ke,Z._eventsCount++),Z}function K(Z,B){--Z._eventsCount===0?Z._events=new v:delete Z._events[B]}function N(){this._events=new v,this._eventsCount=0}N.prototype.eventNames=function(){var B=[],L,$;if(this._eventsCount===0)return B;for($ in L=this._events)Ee.call(L,$)&&B.push(g?$.slice(1):$);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(L)):B},N.prototype.listeners=function(B){var L=g?g+B:B,$=this._events[L];if(!$)return[];if($.fn)return[$.fn];for(var U=0,ke=$.length,We=new Array(ke);U<ke;U++)We[U]=$[U].fn;return We},N.prototype.listenerCount=function(B){var L=g?g+B:B,$=this._events[L];return $?$.fn?1:$.length:0},N.prototype.emit=function(B,L,$,U,ke,We){var me=g?g+B:B;if(!this._events[me])return!1;var Le=this._events[me],Se=arguments.length,et,at;if(Le.fn){switch(Le.once&&this.removeListener(B,Le.fn,void 0,!0),Se){case 1:return Le.fn.call(Le.context),!0;case 2:return Le.fn.call(Le.context,L),!0;case 3:return Le.fn.call(Le.context,L,$),!0;case 4:return Le.fn.call(Le.context,L,$,U),!0;case 5:return Le.fn.call(Le.context,L,$,U,ke),!0;case 6:return Le.fn.call(Le.context,L,$,U,ke,We),!0}for(at=1,et=new Array(Se-1);at<Se;at++)et[at-1]=arguments[at];Le.fn.apply(Le.context,et)}else{var Lt=Le.length,Et;for(at=0;at<Lt;at++)switch(Le[at].once&&this.removeListener(B,Le[at].fn,void 0,!0),Se){case 1:Le[at].fn.call(Le[at].context);break;case 2:Le[at].fn.call(Le[at].context,L);break;case 3:Le[at].fn.call(Le[at].context,L,$);break;case 4:Le[at].fn.call(Le[at].context,L,$,U);break;default:if(!et)for(Et=1,et=new Array(Se-1);Et<Se;Et++)et[Et-1]=arguments[Et];Le[at].fn.apply(Le[at].context,et)}}return!0},N.prototype.on=function(B,L,$){return c(this,B,L,$,!1)},N.prototype.once=function(B,L,$){return c(this,B,L,$,!0)},N.prototype.removeListener=function(B,L,$,U){var ke=g?g+B:B;if(!this._events[ke])return this;if(!L)return K(this,ke),this;var We=this._events[ke];if(We.fn)We.fn===L&&(!U||We.once)&&(!$||We.context===$)&&K(this,ke);else{for(var me=0,Le=[],Se=We.length;me<Se;me++)(We[me].fn!==L||U&&!We[me].once||$&&We[me].context!==$)&&Le.push(We[me]);Le.length?this._events[ke]=Le.length===1?Le[0]:Le:K(this,ke)}return this},N.prototype.removeAllListeners=function(B){var L;return B?(L=g?g+B:B,this._events[L]&&K(this,L)):(this._events=new v,this._eventsCount=0),this},N.prototype.off=N.prototype.removeListener,N.prototype.addListener=N.prototype.on,N.prefixed=g,N.EventEmitter=N,vt.exports=N},92806:function(vt){"use strict";vt.exports=function(Ee,g){for(var v={},M=Object.keys(Ee),c=Array.isArray(g),K=0;K<M.length;K++){var N=M[K],Z=Ee[N];(c?g.indexOf(N)!==-1:g(N,Z,Ee))&&(v[N]=Z)}return v}},81490:function(vt){"use strict";vt.exports=N;var Ee,g,v,M,c,K=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"];function N(pe){M=2,c=Math.pow(10,6),v=null,Ee=[],g=[];var $e=pe.readFields(Z,{});return Ee=null,$e}function Z(pe,$e,ye){pe===1?Ee.push(ye.readString()):pe===2?M=ye.readVarint():pe===3?c=Math.pow(10,ye.readVarint()):pe===4?B(ye,$e):pe===5?L(ye,$e):pe===6&&$(ye,$e)}function B(pe,$e){return $e.type="FeatureCollection",$e.features=[],pe.readMessage(U,$e)}function L(pe,$e){$e.type="Feature";var ye=pe.readMessage(ke,$e);return"geometry"in ye||(ye.geometry=null),ye}function $(pe,$e){return $e.type="Point",pe.readMessage(We,$e)}function U(pe,$e,ye){pe===1?$e.features.push(L(ye,{})):pe===13?g.push(Le(ye)):pe===15&&Se(ye,$e)}function ke(pe,$e,ye){pe===1?$e.geometry=$(ye,{}):pe===11?$e.id=ye.readString():pe===12?$e.id=ye.readSVarint():pe===13?g.push(Le(ye)):pe===14?$e.properties=Se(ye,{}):pe===15&&Se(ye,$e)}function We(pe,$e,ye){pe===1?$e.type=K[ye.readVarint()]:pe===2?v=ye.readPackedVarint():pe===3?me($e,ye,$e.type):pe===4?($e.geometries=$e.geometries||[],$e.geometries.push($(ye,{}))):pe===13?g.push(Le(ye)):pe===15&&Se(ye,$e)}function me(pe,$e,ye){ye==="Point"?pe.coordinates=et($e):ye==="MultiPoint"?pe.coordinates=Lt($e,!0):ye==="LineString"?pe.coordinates=Lt($e):ye==="MultiLineString"?pe.coordinates=Et($e):ye==="Polygon"?pe.coordinates=Et($e,!0):ye==="MultiPolygon"&&(pe.coordinates=jt($e))}function Le(pe){for(var $e=pe.readVarint()+pe.pos,ye=null;pe.pos<$e;){var ie=pe.readVarint(),re=ie>>3;re===1?ye=pe.readString():re===2?ye=pe.readDouble():re===3?ye=pe.readVarint():re===4?ye=-pe.readVarint():re===5?ye=pe.readBoolean():re===6&&(ye=JSON.parse(pe.readString()))}return ye}function Se(pe,$e){for(var ye=pe.readVarint()+pe.pos;pe.pos<ye;)$e[Ee[pe.readVarint()]]=g[pe.readVarint()];return g=[],$e}function et(pe){for(var $e=pe.readVarint()+pe.pos,ye=[];pe.pos<$e;)ye.push(pe.readSVarint()/c);return ye}function at(pe,$e,ye,ie){var re=0,De=[],le,ge,ce=[];for(ge=0;ge<M;ge++)ce[ge]=0;for(;ye?re<ye:pe.pos<$e;){for(le=[],ge=0;ge<M;ge++)ce[ge]+=pe.readSVarint(),le[ge]=ce[ge]/c;De.push(le),re++}return ie&&De.push(De[0]),De}function Lt(pe){return at(pe,pe.readVarint()+pe.pos)}function Et(pe,$e){var ye=pe.readVarint()+pe.pos;if(!v)return[at(pe,ye,null,$e)];for(var ie=[],re=0;re<v.length;re++)ie.push(at(pe,ye,v[re],$e));return v=null,ie}function jt(pe){var $e=pe.readVarint()+pe.pos;if(!v)return[[at(pe,$e,null,!0)]];for(var ye=[],ie=1,re=0;re<v[0];re++){for(var De=[],le=0;le<v[ie];le++)De.push(at(pe,$e,v[ie+1+le],!0));ie+=v[ie]+1,ye.push(De)}return v=null,ye}},62020:function(vt){"use strict";vt.exports=Z;var Ee,g,v,M,c,K=1e6,N={Point:0,MultiPoint:1,LineString:2,MultiLineString:3,Polygon:4,MultiPolygon:5,GeometryCollection:6};function Z(ye,ie){Ee={},v=[],g=0,M=0,c=1,B(ye),c=Math.min(c,K);for(var re=Math.ceil(Math.log(c)/Math.LN10),De=0;De<v.length;De++)ie.writeStringField(1,v[De]);return M!==2&&ie.writeVarintField(2,M),re!==6&&ie.writeVarintField(3,re),ye.type==="FeatureCollection"?ie.writeMessage(4,We,ye):ye.type==="Feature"?ie.writeMessage(5,me,ye):ie.writeMessage(6,Le,ye),Ee=null,ie.finish()}function B(ye){var ie,re;if(ye.type==="FeatureCollection")for(ie=0;ie<ye.features.length;ie++)B(ye.features[ie]);else if(ye.type==="Feature"){ye.geometry!==null&&B(ye.geometry);for(re in ye.properties)ke(re)}else if(ye.type==="Point")U(ye.coordinates);else if(ye.type==="MultiPoint")$(ye.coordinates);else if(ye.type==="GeometryCollection")for(ie=0;ie<ye.geometries.length;ie++)B(ye.geometries[ie]);else if(ye.type==="LineString")$(ye.coordinates);else if(ye.type==="Polygon"||ye.type==="MultiLineString")L(ye.coordinates);else if(ye.type==="MultiPolygon")for(ie=0;ie<ye.coordinates.length;ie++)L(ye.coordinates[ie]);for(re in ye)$e(re,ye.type)||ke(re)}function L(ye){for(var ie=0;ie<ye.length;ie++)$(ye[ie])}function $(ye){for(var ie=0;ie<ye.length;ie++)U(ye[ie])}function U(ye){M=Math.max(M,ye.length);for(var ie=0;ie<ye.length;ie++)for(;Math.round(ye[ie]*c)/c!==ye[ie]&&c<K;)c*=10}function ke(ye){Ee[ye]===void 0&&(v.push(ye),Ee[ye]=g++)}function We(ye,ie){for(var re=0;re<ye.features.length;re++)ie.writeMessage(1,me,ye.features[re]);Se(ye,ie,!0)}function me(ye,ie){ye.geometry!==null&&ie.writeMessage(1,Le,ye.geometry),ye.id!==void 0&&(typeof ye.id=="number"&&ye.id%1===0?ie.writeSVarintField(12,ye.id):ie.writeStringField(11,ye.id)),ye.properties&&Se(ye.properties,ie),Se(ye,ie,!0)}function Le(ye,ie){ie.writeVarintField(1,N[ye.type]);var re=ye.coordinates;if(ye.type==="Point")at(re,ie);else if(ye.type==="MultiPoint")Lt(re,ie,!0);else if(ye.type==="LineString")Lt(re,ie);else if(ye.type==="MultiLineString")Et(re,ie);else if(ye.type==="Polygon")Et(re,ie,!0);else if(ye.type==="MultiPolygon")jt(re,ie);else if(ye.type==="GeometryCollection")for(var De=0;De<ye.geometries.length;De++)ie.writeMessage(4,Le,ye.geometries[De]);Se(ye,ie,!0)}function Se(ye,ie,re){var De=[],le=0;for(var ge in ye)re&&$e(ge,ye.type)||(ie.writeMessage(13,et,ye[ge]),De.push(Ee[ge]),De.push(le++));ie.writePackedVarint(re?15:14,De)}function et(ye,ie){if(ye!==null){var re=typeof ye;re==="string"?ie.writeStringField(1,ye):re==="boolean"?ie.writeBooleanField(5,ye):re==="object"?ie.writeStringField(6,JSON.stringify(ye)):re==="number"&&(ye%1!==0?ie.writeDoubleField(2,ye):ye>=0?ie.writeVarintField(3,ye):ie.writeVarintField(4,-ye))}}function at(ye,ie){for(var re=[],De=0;De<M;De++)re.push(Math.round(ye[De]*c));ie.writePackedSVarint(3,re)}function Lt(ye,ie){var re=[];pe(re,ye),ie.writePackedSVarint(3,re)}function Et(ye,ie,re){var De=ye.length,le;if(De!==1){var ge=[];for(le=0;le<De;le++)ge.push(ye[le].length-(re?1:0));ie.writePackedVarint(2,ge)}var ce=[];for(le=0;le<De;le++)pe(ce,ye[le],re);ie.writePackedSVarint(3,ce)}function jt(ye,ie){var re=ye.length,De,le;if(re!==1||ye[0].length!==1){var ge=[re];for(De=0;De<re;De++)for(ge.push(ye[De].length),le=0;le<ye[De].length;le++)ge.push(ye[De][le].length-1);ie.writePackedVarint(2,ge)}var ce=[];for(De=0;De<re;De++)for(le=0;le<ye[De].length;le++)pe(ce,ye[De][le],!0);ie.writePackedSVarint(3,ce)}function pe(ye,ie,re){var De,le,ge=ie.length-(re?1:0),ce=new Array(M);for(le=0;le<M;le++)ce[le]=0;for(De=0;De<ge;De++)for(le=0;le<M;le++){var je=Math.round(ie[De][le]*c)-ce[le];ye.push(je),ce[le]+=je}}function $e(ye,ie){if(ye==="type")return!0;if(ie==="FeatureCollection"){if(ye==="features")return!0}else if(ie==="Feature"){if(ye==="id"||ye==="properties"||ye==="geometry")return!0}else if(ie==="GeometryCollection"){if(ye==="geometries")return!0}else if(ye==="coordinates")return!0;return!1}},74951:function(vt,Ee,g){"use strict";Ee.encode=g(62020),Ee.decode=g(81490)},51010:function(vt,Ee,g){var v=g(31710);function M(U,ke,We,me){var Le=U.map(function(et){return[(et[0]-We.x)/ke,(We.y-et[1])/ke]}),Se=Le.map(function(et){return me?et[0].toFixed(me)+","+et[1].toFixed(me):et[0]+","+et[1]});return Se.join(" ")}function c(U,ke){var We=U.split("/>")[0];for(var me in ke)ke[me]&&(We+=" "+me+'="'+ke[me]+'"');return We+" />"}function K(U,ke,We,me){var Le=me&&me.r?me.r:1,Se=me&&me.hasOwnProperty("pointAsCircle")?me.pointAsCircle:!1,et=M([U.coordinates],ke,We,me.precision);return Se?[et]:["M"+et+" m"+-Le+",0 a"+Le+","+Le+" 0 1,1 "+2*Le+","+0+" a"+Le+","+Le+" 0 1,1 "+-2*Le+","+0]}function N(U,ke,We,me){var Le=me&&me.hasOwnProperty("explode")?me.explode:!1,Se=v.explode(U).map(function(et){return K(et,ke,We,me)[0]});return Le?Se:[Se.join(" ")]}function Z(U,ke,We,me){var Le=M(U.coordinates,ke,We,me.precision),Se="M"+Le;return[Se]}function B(U,ke,We,me){var Le=me&&me.hasOwnProperty("explode")?me.explode:!1,Se=v.explode(U).map(function(et){return Z(et,ke,We,me)[0]});return Le?Se:[Se.join(" ")]}function L(U,ke,We,me){var Le,Se,et;Le=M(U.coordinates[0],ke,We,me.precision),U.coordinates.length>1&&(Se=U.coordinates.slice(1,U.coordinates.length));var at="M"+Le;if(Se)for(var Lt=0;Lt<Se.length;Lt++)at+=" M"+M(Se[Lt],ke,We,me.precision);return at+="Z",[at]}function $(U,ke,We,me){var Le=me.hasOwnProperty("explode")?me.explode:!1,Se=v.explode(U).map(function(et){return L(et,ke,We,me)[0]});return Le?Se:[Se.join(" ").replace(/Z/g,"")+"Z"]}vt.exports={Point:K,MultiPoint:N,LineString:Z,MultiLineString:B,Polygon:L,MultiPolygon:$}},85449:function(vt){vt.exports=function(Ee,g){var v={};return Object.keys(Ee).forEach(function(M){v[M]=Ee[M]}),Object.keys(g).forEach(function(M){v[M]=g[M]}),v}},970:function(vt,Ee,g){var v=g(85449),M=g(51010),c=function(B){this.options=B||{},this.viewportSize=this.options.viewportSize||{width:256,height:256},this.mapExtent=this.options.mapExtent||{left:-20037508342789244e-9,right:20037508342789244e-9,bottom:-20037508342789244e-9,top:20037508342789244e-9},this.res=this.calResolution(this.mapExtent,this.viewportSize,this.options.fitTo)};c.prototype.calResolution=function(B,L,$){var U=(B.right-B.left)/L.width,ke=(B.top-B.bottom)/L.height;if($){if($.toLowerCase()==="width")return U;if($.toLowerCase()==="height")return ke;throw new Error('"fitTo" option should be "width" or "height" ')}else return Math.max(U,ke)},c.prototype.convert=function(B,L){var $=v(this.options,L||{}),U=["MultiPoint","MultiLineString","MultiPolygon"],ke=["Point","LineString","Polygon"],We=[];if(B.type=="FeatureCollection")for(var me=0;me<B.features.length;me++)We=We.concat(this.convertFeature(B.features[me],$));else if(B.type=="Feature")We=this.convertFeature(B,$);else if(B.type=="GeometryCollection")for(var me=0;me<B.geometries.length;me++)We=We.concat(this.convertGeometry(B.geometries[me],$));else if(M[B.type])We=this.convertGeometry(B,$);else return;return $.callback&&$.callback.call(this,We),We},c.prototype.convertFeature=function(B,L){if(!(!B&&!B.geometry)){var $=v(this.options,L||{});if($.attributes&&$.attributes instanceof Array){var U=$.attributes;$.attributes=U.reduce(function(We,me){if(typeof me=="string"){var Le,Se=me.split(".").pop();try{Le=Z(B,me)}catch(et){Le=!1}Le&&(We[Se]=Le)}else if(typeof me=="object"&&me.type&&me.property)if(me.type==="dynamic"){var Le,Se=me.key?me.key:me.property.split(".").pop();try{Le=Z(B,me.property)}catch(Lt){Le=!1}Le&&(We[Se]=Le)}else me.type==="static"&&me.value&&(We[me.property]=me.value);return We},{})}else $.attributes=$.attributes||{};var ke=$.attributes.id||B.id||(B.properties&&B.properties.id?B.properties.id:null);return ke&&($.attributes.id=ke),this.convertGeometry(B.geometry,$)}},c.prototype.convertGeometry=function(B,L){if(M[B.type]){var $=v(this.options,L||{}),U=$.output||"svg",ke=M[B.type].call(this,B,this.res,{x:this.mapExtent.left,y:this.mapExtent.top},$),We,me;return U.toLowerCase()=="svg"?(We=ke.map(function(Le){return K(Le,B.type,$.attributes,$)}),me=We.map(function(Le){return N(Le,B.type,$)}),me):ke}else return};function K(B,L,$,U){var ke={},We=U&&U.hasOwnProperty("pointAsCircle")?U.pointAsCircle:!1;(L=="Point"||L=="MultiPoint")&&We?(ke.cx=B.split(",")[0],ke.cy=B.split(",")[1],ke.r=U&&U.r?U.r:"1"):(ke={d:B},(L=="Polygon"||L=="MultiPolygon")&&ke["fill-rule"]=="evenodd");for(var me in $)ke[me]=$[me];return ke}function N(B,L,$){var U=$&&$.hasOwnProperty("pointAsCircle")?$.pointAsCircle:!1,ke="<path";(L=="Point"||L=="MultiPoint")&&U&&(ke="<circle");for(var We in B)ke+=" "+We+'="'+B[We]+'"';return ke+="/>",ke}function Z(B,L){function $(U,ke,We,me){if(U.hasOwnProperty(ke))return U[ke];throw new Error(me.slice(0,We+1).join(".")+" is not a valid property path")}return L.split(".").reduce($,B)}vt.exports=c},67473:function(vt,Ee,g){var v=g(970),M=function(c){return new v(c)};vt.exports=M},49685:function(vt,Ee,g){"use strict";g.d(Ee,{FD:function(){return c},Ib:function(){return v},WT:function(){return M}});var v=1e-6,M=typeof Float32Array!="undefined"?Float32Array:Array,c=Math.random;function K(L){M=L}var N=Math.PI/180;function Z(L){return L*N}function B(L,$){return Math.abs(L-$)<=v*Math.max(1,Math.abs(L),Math.abs($))}Math.hypot||(Math.hypot=function(){for(var L=0,$=arguments.length;$--;)L+=arguments[$]*arguments[$];return Math.sqrt(L)})},85975:function(vt,Ee,g){"use strict";g.r(Ee),g.d(Ee,{add:function(){return mt},adjoint:function(){return U},clone:function(){return c},copy:function(){return K},create:function(){return M},determinant:function(){return ke},equals:function(){return ee},exactEquals:function(){return wt},frob:function(){return Ot},fromQuat:function(){return Me},fromQuat2:function(){return De},fromRotation:function(){return pe},fromRotationTranslation:function(){return re},fromRotationTranslationScale:function(){return je},fromRotationTranslationScaleOrigin:function(){return J},fromScaling:function(){return jt},fromTranslation:function(){return Et},fromValues:function(){return N},fromXRotation:function(){return $e},fromYRotation:function(){return ye},fromZRotation:function(){return ie},frustum:function(){return ne},getRotation:function(){return ce},getScaling:function(){return ge},getTranslation:function(){return le},identity:function(){return B},invert:function(){return $},lookAt:function(){return fe},mul:function(){return Re},multiply:function(){return We},multiplyScalar:function(){return pt},multiplyScalarAndAdd:function(){return Ge},ortho:function(){return ft},orthoNO:function(){return lt},orthoZO:function(){return It},perspective:function(){return Ne},perspectiveFromFieldOfView:function(){return He},perspectiveNO:function(){return xe},perspectiveZO:function(){return Pe},rotate:function(){return Se},rotateX:function(){return et},rotateY:function(){return at},rotateZ:function(){return Lt},scale:function(){return Le},set:function(){return Z},str:function(){return Ye},sub:function(){return dt},subtract:function(){return Rt},targetTo:function(){return _t},translate:function(){return me},transpose:function(){return L}});var v=g(49685);function M(){var D=new v.WT(16);return v.WT!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=0,D[12]=0,D[13]=0,D[14]=0),D[0]=1,D[5]=1,D[10]=1,D[15]=1,D}function c(D){var q=new v.WT(16);return q[0]=D[0],q[1]=D[1],q[2]=D[2],q[3]=D[3],q[4]=D[4],q[5]=D[5],q[6]=D[6],q[7]=D[7],q[8]=D[8],q[9]=D[9],q[10]=D[10],q[11]=D[11],q[12]=D[12],q[13]=D[13],q[14]=D[14],q[15]=D[15],q}function K(D,q){return D[0]=q[0],D[1]=q[1],D[2]=q[2],D[3]=q[3],D[4]=q[4],D[5]=q[5],D[6]=q[6],D[7]=q[7],D[8]=q[8],D[9]=q[9],D[10]=q[10],D[11]=q[11],D[12]=q[12],D[13]=q[13],D[14]=q[14],D[15]=q[15],D}function N(D,q,G,O,k,X,W,ae,Be,ve,Je,ot,Qe,ir,mr,Ar){var Er=new v.WT(16);return Er[0]=D,Er[1]=q,Er[2]=G,Er[3]=O,Er[4]=k,Er[5]=X,Er[6]=W,Er[7]=ae,Er[8]=Be,Er[9]=ve,Er[10]=Je,Er[11]=ot,Er[12]=Qe,Er[13]=ir,Er[14]=mr,Er[15]=Ar,Er}function Z(D,q,G,O,k,X,W,ae,Be,ve,Je,ot,Qe,ir,mr,Ar,Er){return D[0]=q,D[1]=G,D[2]=O,D[3]=k,D[4]=X,D[5]=W,D[6]=ae,D[7]=Be,D[8]=ve,D[9]=Je,D[10]=ot,D[11]=Qe,D[12]=ir,D[13]=mr,D[14]=Ar,D[15]=Er,D}function B(D){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function L(D,q){if(D===q){var G=q[1],O=q[2],k=q[3],X=q[6],W=q[7],ae=q[11];D[1]=q[4],D[2]=q[8],D[3]=q[12],D[4]=G,D[6]=q[9],D[7]=q[13],D[8]=O,D[9]=X,D[11]=q[14],D[12]=k,D[13]=W,D[14]=ae}else D[0]=q[0],D[1]=q[4],D[2]=q[8],D[3]=q[12],D[4]=q[1],D[5]=q[5],D[6]=q[9],D[7]=q[13],D[8]=q[2],D[9]=q[6],D[10]=q[10],D[11]=q[14],D[12]=q[3],D[13]=q[7],D[14]=q[11],D[15]=q[15];return D}function $(D,q){var G=q[0],O=q[1],k=q[2],X=q[3],W=q[4],ae=q[5],Be=q[6],ve=q[7],Je=q[8],ot=q[9],Qe=q[10],ir=q[11],mr=q[12],Ar=q[13],Er=q[14],Zt=q[15],Tr=G*ae-O*W,pn=G*Be-k*W,un=G*ve-X*W,Zn=O*Be-k*ae,Cr=O*ve-X*ae,Nr=k*ve-X*Be,bt=Je*Ar-ot*mr,jn=Je*Er-Qe*mr,Pt=Je*Zt-ir*mr,zt=ot*Er-Qe*Ar,Qt=ot*Zt-ir*Ar,dr=Qe*Zt-ir*Er,_r=Tr*dr-pn*Qt+un*zt+Zn*Pt-Cr*jn+Nr*bt;return _r?(_r=1/_r,D[0]=(ae*dr-Be*Qt+ve*zt)*_r,D[1]=(k*Qt-O*dr-X*zt)*_r,D[2]=(Ar*Nr-Er*Cr+Zt*Zn)*_r,D[3]=(Qe*Cr-ot*Nr-ir*Zn)*_r,D[4]=(Be*Pt-W*dr-ve*jn)*_r,D[5]=(G*dr-k*Pt+X*jn)*_r,D[6]=(Er*un-mr*Nr-Zt*pn)*_r,D[7]=(Je*Nr-Qe*un+ir*pn)*_r,D[8]=(W*Qt-ae*Pt+ve*bt)*_r,D[9]=(O*Pt-G*Qt-X*bt)*_r,D[10]=(mr*Cr-Ar*un+Zt*Tr)*_r,D[11]=(ot*un-Je*Cr-ir*Tr)*_r,D[12]=(ae*jn-W*zt-Be*bt)*_r,D[13]=(G*zt-O*jn+k*bt)*_r,D[14]=(Ar*pn-mr*Zn-Er*Tr)*_r,D[15]=(Je*Zn-ot*pn+Qe*Tr)*_r,D):null}function U(D,q){var G=q[0],O=q[1],k=q[2],X=q[3],W=q[4],ae=q[5],Be=q[6],ve=q[7],Je=q[8],ot=q[9],Qe=q[10],ir=q[11],mr=q[12],Ar=q[13],Er=q[14],Zt=q[15];return D[0]=ae*(Qe*Zt-ir*Er)-ot*(Be*Zt-ve*Er)+Ar*(Be*ir-ve*Qe),D[1]=-(O*(Qe*Zt-ir*Er)-ot*(k*Zt-X*Er)+Ar*(k*ir-X*Qe)),D[2]=O*(Be*Zt-ve*Er)-ae*(k*Zt-X*Er)+Ar*(k*ve-X*Be),D[3]=-(O*(Be*ir-ve*Qe)-ae*(k*ir-X*Qe)+ot*(k*ve-X*Be)),D[4]=-(W*(Qe*Zt-ir*Er)-Je*(Be*Zt-ve*Er)+mr*(Be*ir-ve*Qe)),D[5]=G*(Qe*Zt-ir*Er)-Je*(k*Zt-X*Er)+mr*(k*ir-X*Qe),D[6]=-(G*(Be*Zt-ve*Er)-W*(k*Zt-X*Er)+mr*(k*ve-X*Be)),D[7]=G*(Be*ir-ve*Qe)-W*(k*ir-X*Qe)+Je*(k*ve-X*Be),D[8]=W*(ot*Zt-ir*Ar)-Je*(ae*Zt-ve*Ar)+mr*(ae*ir-ve*ot),D[9]=-(G*(ot*Zt-ir*Ar)-Je*(O*Zt-X*Ar)+mr*(O*ir-X*ot)),D[10]=G*(ae*Zt-ve*Ar)-W*(O*Zt-X*Ar)+mr*(O*ve-X*ae),D[11]=-(G*(ae*ir-ve*ot)-W*(O*ir-X*ot)+Je*(O*ve-X*ae)),D[12]=-(W*(ot*Er-Qe*Ar)-Je*(ae*Er-Be*Ar)+mr*(ae*Qe-Be*ot)),D[13]=G*(ot*Er-Qe*Ar)-Je*(O*Er-k*Ar)+mr*(O*Qe-k*ot),D[14]=-(G*(ae*Er-Be*Ar)-W*(O*Er-k*Ar)+mr*(O*Be-k*ae)),D[15]=G*(ae*Qe-Be*ot)-W*(O*Qe-k*ot)+Je*(O*Be-k*ae),D}function ke(D){var q=D[0],G=D[1],O=D[2],k=D[3],X=D[4],W=D[5],ae=D[6],Be=D[7],ve=D[8],Je=D[9],ot=D[10],Qe=D[11],ir=D[12],mr=D[13],Ar=D[14],Er=D[15],Zt=q*W-G*X,Tr=q*ae-O*X,pn=q*Be-k*X,un=G*ae-O*W,Zn=G*Be-k*W,Cr=O*Be-k*ae,Nr=ve*mr-Je*ir,bt=ve*Ar-ot*ir,jn=ve*Er-Qe*ir,Pt=Je*Ar-ot*mr,zt=Je*Er-Qe*mr,Qt=ot*Er-Qe*Ar;return Zt*Qt-Tr*zt+pn*Pt+un*jn-Zn*bt+Cr*Nr}function We(D,q,G){var O=q[0],k=q[1],X=q[2],W=q[3],ae=q[4],Be=q[5],ve=q[6],Je=q[7],ot=q[8],Qe=q[9],ir=q[10],mr=q[11],Ar=q[12],Er=q[13],Zt=q[14],Tr=q[15],pn=G[0],un=G[1],Zn=G[2],Cr=G[3];return D[0]=pn*O+un*ae+Zn*ot+Cr*Ar,D[1]=pn*k+un*Be+Zn*Qe+Cr*Er,D[2]=pn*X+un*ve+Zn*ir+Cr*Zt,D[3]=pn*W+un*Je+Zn*mr+Cr*Tr,pn=G[4],un=G[5],Zn=G[6],Cr=G[7],D[4]=pn*O+un*ae+Zn*ot+Cr*Ar,D[5]=pn*k+un*Be+Zn*Qe+Cr*Er,D[6]=pn*X+un*ve+Zn*ir+Cr*Zt,D[7]=pn*W+un*Je+Zn*mr+Cr*Tr,pn=G[8],un=G[9],Zn=G[10],Cr=G[11],D[8]=pn*O+un*ae+Zn*ot+Cr*Ar,D[9]=pn*k+un*Be+Zn*Qe+Cr*Er,D[10]=pn*X+un*ve+Zn*ir+Cr*Zt,D[11]=pn*W+un*Je+Zn*mr+Cr*Tr,pn=G[12],un=G[13],Zn=G[14],Cr=G[15],D[12]=pn*O+un*ae+Zn*ot+Cr*Ar,D[13]=pn*k+un*Be+Zn*Qe+Cr*Er,D[14]=pn*X+un*ve+Zn*ir+Cr*Zt,D[15]=pn*W+un*Je+Zn*mr+Cr*Tr,D}function me(D,q,G){var O=G[0],k=G[1],X=G[2],W,ae,Be,ve,Je,ot,Qe,ir,mr,Ar,Er,Zt;return q===D?(D[12]=q[0]*O+q[4]*k+q[8]*X+q[12],D[13]=q[1]*O+q[5]*k+q[9]*X+q[13],D[14]=q[2]*O+q[6]*k+q[10]*X+q[14],D[15]=q[3]*O+q[7]*k+q[11]*X+q[15]):(W=q[0],ae=q[1],Be=q[2],ve=q[3],Je=q[4],ot=q[5],Qe=q[6],ir=q[7],mr=q[8],Ar=q[9],Er=q[10],Zt=q[11],D[0]=W,D[1]=ae,D[2]=Be,D[3]=ve,D[4]=Je,D[5]=ot,D[6]=Qe,D[7]=ir,D[8]=mr,D[9]=Ar,D[10]=Er,D[11]=Zt,D[12]=W*O+Je*k+mr*X+q[12],D[13]=ae*O+ot*k+Ar*X+q[13],D[14]=Be*O+Qe*k+Er*X+q[14],D[15]=ve*O+ir*k+Zt*X+q[15]),D}function Le(D,q,G){var O=G[0],k=G[1],X=G[2];return D[0]=q[0]*O,D[1]=q[1]*O,D[2]=q[2]*O,D[3]=q[3]*O,D[4]=q[4]*k,D[5]=q[5]*k,D[6]=q[6]*k,D[7]=q[7]*k,D[8]=q[8]*X,D[9]=q[9]*X,D[10]=q[10]*X,D[11]=q[11]*X,D[12]=q[12],D[13]=q[13],D[14]=q[14],D[15]=q[15],D}function Se(D,q,G,O){var k=O[0],X=O[1],W=O[2],ae=Math.hypot(k,X,W),Be,ve,Je,ot,Qe,ir,mr,Ar,Er,Zt,Tr,pn,un,Zn,Cr,Nr,bt,jn,Pt,zt,Qt,dr,_r,Hr;return ae<v.Ib?null:(ae=1/ae,k*=ae,X*=ae,W*=ae,Be=Math.sin(G),ve=Math.cos(G),Je=1-ve,ot=q[0],Qe=q[1],ir=q[2],mr=q[3],Ar=q[4],Er=q[5],Zt=q[6],Tr=q[7],pn=q[8],un=q[9],Zn=q[10],Cr=q[11],Nr=k*k*Je+ve,bt=X*k*Je+W*Be,jn=W*k*Je-X*Be,Pt=k*X*Je-W*Be,zt=X*X*Je+ve,Qt=W*X*Je+k*Be,dr=k*W*Je+X*Be,_r=X*W*Je-k*Be,Hr=W*W*Je+ve,D[0]=ot*Nr+Ar*bt+pn*jn,D[1]=Qe*Nr+Er*bt+un*jn,D[2]=ir*Nr+Zt*bt+Zn*jn,D[3]=mr*Nr+Tr*bt+Cr*jn,D[4]=ot*Pt+Ar*zt+pn*Qt,D[5]=Qe*Pt+Er*zt+un*Qt,D[6]=ir*Pt+Zt*zt+Zn*Qt,D[7]=mr*Pt+Tr*zt+Cr*Qt,D[8]=ot*dr+Ar*_r+pn*Hr,D[9]=Qe*dr+Er*_r+un*Hr,D[10]=ir*dr+Zt*_r+Zn*Hr,D[11]=mr*dr+Tr*_r+Cr*Hr,q!==D&&(D[12]=q[12],D[13]=q[13],D[14]=q[14],D[15]=q[15]),D)}function et(D,q,G){var O=Math.sin(G),k=Math.cos(G),X=q[4],W=q[5],ae=q[6],Be=q[7],ve=q[8],Je=q[9],ot=q[10],Qe=q[11];return q!==D&&(D[0]=q[0],D[1]=q[1],D[2]=q[2],D[3]=q[3],D[12]=q[12],D[13]=q[13],D[14]=q[14],D[15]=q[15]),D[4]=X*k+ve*O,D[5]=W*k+Je*O,D[6]=ae*k+ot*O,D[7]=Be*k+Qe*O,D[8]=ve*k-X*O,D[9]=Je*k-W*O,D[10]=ot*k-ae*O,D[11]=Qe*k-Be*O,D}function at(D,q,G){var O=Math.sin(G),k=Math.cos(G),X=q[0],W=q[1],ae=q[2],Be=q[3],ve=q[8],Je=q[9],ot=q[10],Qe=q[11];return q!==D&&(D[4]=q[4],D[5]=q[5],D[6]=q[6],D[7]=q[7],D[12]=q[12],D[13]=q[13],D[14]=q[14],D[15]=q[15]),D[0]=X*k-ve*O,D[1]=W*k-Je*O,D[2]=ae*k-ot*O,D[3]=Be*k-Qe*O,D[8]=X*O+ve*k,D[9]=W*O+Je*k,D[10]=ae*O+ot*k,D[11]=Be*O+Qe*k,D}function Lt(D,q,G){var O=Math.sin(G),k=Math.cos(G),X=q[0],W=q[1],ae=q[2],Be=q[3],ve=q[4],Je=q[5],ot=q[6],Qe=q[7];return q!==D&&(D[8]=q[8],D[9]=q[9],D[10]=q[10],D[11]=q[11],D[12]=q[12],D[13]=q[13],D[14]=q[14],D[15]=q[15]),D[0]=X*k+ve*O,D[1]=W*k+Je*O,D[2]=ae*k+ot*O,D[3]=Be*k+Qe*O,D[4]=ve*k-X*O,D[5]=Je*k-W*O,D[6]=ot*k-ae*O,D[7]=Qe*k-Be*O,D}function Et(D,q){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=q[0],D[13]=q[1],D[14]=q[2],D[15]=1,D}function jt(D,q){return D[0]=q[0],D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=q[1],D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=q[2],D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function pe(D,q,G){var O=G[0],k=G[1],X=G[2],W=Math.hypot(O,k,X),ae,Be,ve;return W<v.Ib?null:(W=1/W,O*=W,k*=W,X*=W,ae=Math.sin(q),Be=Math.cos(q),ve=1-Be,D[0]=O*O*ve+Be,D[1]=k*O*ve+X*ae,D[2]=X*O*ve-k*ae,D[3]=0,D[4]=O*k*ve-X*ae,D[5]=k*k*ve+Be,D[6]=X*k*ve+O*ae,D[7]=0,D[8]=O*X*ve+k*ae,D[9]=k*X*ve-O*ae,D[10]=X*X*ve+Be,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D)}function $e(D,q){var G=Math.sin(q),O=Math.cos(q);return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=O,D[6]=G,D[7]=0,D[8]=0,D[9]=-G,D[10]=O,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function ye(D,q){var G=Math.sin(q),O=Math.cos(q);return D[0]=O,D[1]=0,D[2]=-G,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=G,D[9]=0,D[10]=O,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function ie(D,q){var G=Math.sin(q),O=Math.cos(q);return D[0]=O,D[1]=G,D[2]=0,D[3]=0,D[4]=-G,D[5]=O,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function re(D,q,G){var O=q[0],k=q[1],X=q[2],W=q[3],ae=O+O,Be=k+k,ve=X+X,Je=O*ae,ot=O*Be,Qe=O*ve,ir=k*Be,mr=k*ve,Ar=X*ve,Er=W*ae,Zt=W*Be,Tr=W*ve;return D[0]=1-(ir+Ar),D[1]=ot+Tr,D[2]=Qe-Zt,D[3]=0,D[4]=ot-Tr,D[5]=1-(Je+Ar),D[6]=mr+Er,D[7]=0,D[8]=Qe+Zt,D[9]=mr-Er,D[10]=1-(Je+ir),D[11]=0,D[12]=G[0],D[13]=G[1],D[14]=G[2],D[15]=1,D}function De(D,q){var G=new v.WT(3),O=-q[0],k=-q[1],X=-q[2],W=q[3],ae=q[4],Be=q[5],ve=q[6],Je=q[7],ot=O*O+k*k+X*X+W*W;return ot>0?(G[0]=(ae*W+Je*O+Be*X-ve*k)*2/ot,G[1]=(Be*W+Je*k+ve*O-ae*X)*2/ot,G[2]=(ve*W+Je*X+ae*k-Be*O)*2/ot):(G[0]=(ae*W+Je*O+Be*X-ve*k)*2,G[1]=(Be*W+Je*k+ve*O-ae*X)*2,G[2]=(ve*W+Je*X+ae*k-Be*O)*2),re(D,q,G),D}function le(D,q){return D[0]=q[12],D[1]=q[13],D[2]=q[14],D}function ge(D,q){var G=q[0],O=q[1],k=q[2],X=q[4],W=q[5],ae=q[6],Be=q[8],ve=q[9],Je=q[10];return D[0]=Math.hypot(G,O,k),D[1]=Math.hypot(X,W,ae),D[2]=Math.hypot(Be,ve,Je),D}function ce(D,q){var G=new v.WT(3);ge(G,q);var O=1/G[0],k=1/G[1],X=1/G[2],W=q[0]*O,ae=q[1]*k,Be=q[2]*X,ve=q[4]*O,Je=q[5]*k,ot=q[6]*X,Qe=q[8]*O,ir=q[9]*k,mr=q[10]*X,Ar=W+Je+mr,Er=0;return Ar>0?(Er=Math.sqrt(Ar+1)*2,D[3]=.25*Er,D[0]=(ot-ir)/Er,D[1]=(Qe-Be)/Er,D[2]=(ae-ve)/Er):W>Je&&W>mr?(Er=Math.sqrt(1+W-Je-mr)*2,D[3]=(ot-ir)/Er,D[0]=.25*Er,D[1]=(ae+ve)/Er,D[2]=(Qe+Be)/Er):Je>mr?(Er=Math.sqrt(1+Je-W-mr)*2,D[3]=(Qe-Be)/Er,D[0]=(ae+ve)/Er,D[1]=.25*Er,D[2]=(ot+ir)/Er):(Er=Math.sqrt(1+mr-W-Je)*2,D[3]=(ae-ve)/Er,D[0]=(Qe+Be)/Er,D[1]=(ot+ir)/Er,D[2]=.25*Er),D}function je(D,q,G,O){var k=q[0],X=q[1],W=q[2],ae=q[3],Be=k+k,ve=X+X,Je=W+W,ot=k*Be,Qe=k*ve,ir=k*Je,mr=X*ve,Ar=X*Je,Er=W*Je,Zt=ae*Be,Tr=ae*ve,pn=ae*Je,un=O[0],Zn=O[1],Cr=O[2];return D[0]=(1-(mr+Er))*un,D[1]=(Qe+pn)*un,D[2]=(ir-Tr)*un,D[3]=0,D[4]=(Qe-pn)*Zn,D[5]=(1-(ot+Er))*Zn,D[6]=(Ar+Zt)*Zn,D[7]=0,D[8]=(ir+Tr)*Cr,D[9]=(Ar-Zt)*Cr,D[10]=(1-(ot+mr))*Cr,D[11]=0,D[12]=G[0],D[13]=G[1],D[14]=G[2],D[15]=1,D}function J(D,q,G,O,k){var X=q[0],W=q[1],ae=q[2],Be=q[3],ve=X+X,Je=W+W,ot=ae+ae,Qe=X*ve,ir=X*Je,mr=X*ot,Ar=W*Je,Er=W*ot,Zt=ae*ot,Tr=Be*ve,pn=Be*Je,un=Be*ot,Zn=O[0],Cr=O[1],Nr=O[2],bt=k[0],jn=k[1],Pt=k[2],zt=(1-(Ar+Zt))*Zn,Qt=(ir+un)*Zn,dr=(mr-pn)*Zn,_r=(ir-un)*Cr,Hr=(1-(Qe+Zt))*Cr,Qr=(Er+Tr)*Cr,fr=(mr+pn)*Nr,tt=(Er-Tr)*Nr,Yr=(1-(Qe+Ar))*Nr;return D[0]=zt,D[1]=Qt,D[2]=dr,D[3]=0,D[4]=_r,D[5]=Hr,D[6]=Qr,D[7]=0,D[8]=fr,D[9]=tt,D[10]=Yr,D[11]=0,D[12]=G[0]+bt-(zt*bt+_r*jn+fr*Pt),D[13]=G[1]+jn-(Qt*bt+Hr*jn+tt*Pt),D[14]=G[2]+Pt-(dr*bt+Qr*jn+Yr*Pt),D[15]=1,D}function Me(D,q){var G=q[0],O=q[1],k=q[2],X=q[3],W=G+G,ae=O+O,Be=k+k,ve=G*W,Je=O*W,ot=O*ae,Qe=k*W,ir=k*ae,mr=k*Be,Ar=X*W,Er=X*ae,Zt=X*Be;return D[0]=1-ot-mr,D[1]=Je+Zt,D[2]=Qe-Er,D[3]=0,D[4]=Je-Zt,D[5]=1-ve-mr,D[6]=ir+Ar,D[7]=0,D[8]=Qe+Er,D[9]=ir-Ar,D[10]=1-ve-ot,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function ne(D,q,G,O,k,X,W){var ae=1/(G-q),Be=1/(k-O),ve=1/(X-W);return D[0]=X*2*ae,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=X*2*Be,D[6]=0,D[7]=0,D[8]=(G+q)*ae,D[9]=(k+O)*Be,D[10]=(W+X)*ve,D[11]=-1,D[12]=0,D[13]=0,D[14]=W*X*2*ve,D[15]=0,D}function xe(D,q,G,O,k){var X=1/Math.tan(q/2),W;return D[0]=X/G,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=X,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,k!=null&&k!==1/0?(W=1/(O-k),D[10]=(k+O)*W,D[14]=2*k*O*W):(D[10]=-1,D[14]=-2*O),D}var Ne=xe;function Pe(D,q,G,O,k){var X=1/Math.tan(q/2),W;return D[0]=X/G,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=X,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,k!=null&&k!==1/0?(W=1/(O-k),D[10]=k*W,D[14]=k*O*W):(D[10]=-1,D[14]=-O),D}function He(D,q,G,O){var k=Math.tan(q.upDegrees*Math.PI/180),X=Math.tan(q.downDegrees*Math.PI/180),W=Math.tan(q.leftDegrees*Math.PI/180),ae=Math.tan(q.rightDegrees*Math.PI/180),Be=2/(W+ae),ve=2/(k+X);return D[0]=Be,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ve,D[6]=0,D[7]=0,D[8]=-((W-ae)*Be*.5),D[9]=(k-X)*ve*.5,D[10]=O/(G-O),D[11]=-1,D[12]=0,D[13]=0,D[14]=O*G/(G-O),D[15]=0,D}function lt(D,q,G,O,k,X,W){var ae=1/(q-G),Be=1/(O-k),ve=1/(X-W);return D[0]=-2*ae,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*Be,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=2*ve,D[11]=0,D[12]=(q+G)*ae,D[13]=(k+O)*Be,D[14]=(W+X)*ve,D[15]=1,D}var ft=lt;function It(D,q,G,O,k,X,W){var ae=1/(q-G),Be=1/(O-k),ve=1/(X-W);return D[0]=-2*ae,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*Be,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=ve,D[11]=0,D[12]=(q+G)*ae,D[13]=(k+O)*Be,D[14]=X*ve,D[15]=1,D}function fe(D,q,G,O){var k,X,W,ae,Be,ve,Je,ot,Qe,ir,mr=q[0],Ar=q[1],Er=q[2],Zt=O[0],Tr=O[1],pn=O[2],un=G[0],Zn=G[1],Cr=G[2];return Math.abs(mr-un)<v.Ib&&Math.abs(Ar-Zn)<v.Ib&&Math.abs(Er-Cr)<v.Ib?B(D):(Je=mr-un,ot=Ar-Zn,Qe=Er-Cr,ir=1/Math.hypot(Je,ot,Qe),Je*=ir,ot*=ir,Qe*=ir,k=Tr*Qe-pn*ot,X=pn*Je-Zt*Qe,W=Zt*ot-Tr*Je,ir=Math.hypot(k,X,W),ir?(ir=1/ir,k*=ir,X*=ir,W*=ir):(k=0,X=0,W=0),ae=ot*W-Qe*X,Be=Qe*k-Je*W,ve=Je*X-ot*k,ir=Math.hypot(ae,Be,ve),ir?(ir=1/ir,ae*=ir,Be*=ir,ve*=ir):(ae=0,Be=0,ve=0),D[0]=k,D[1]=ae,D[2]=Je,D[3]=0,D[4]=X,D[5]=Be,D[6]=ot,D[7]=0,D[8]=W,D[9]=ve,D[10]=Qe,D[11]=0,D[12]=-(k*mr+X*Ar+W*Er),D[13]=-(ae*mr+Be*Ar+ve*Er),D[14]=-(Je*mr+ot*Ar+Qe*Er),D[15]=1,D)}function _t(D,q,G,O){var k=q[0],X=q[1],W=q[2],ae=O[0],Be=O[1],ve=O[2],Je=k-G[0],ot=X-G[1],Qe=W-G[2],ir=Je*Je+ot*ot+Qe*Qe;ir>0&&(ir=1/Math.sqrt(ir),Je*=ir,ot*=ir,Qe*=ir);var mr=Be*Qe-ve*ot,Ar=ve*Je-ae*Qe,Er=ae*ot-Be*Je;return ir=mr*mr+Ar*Ar+Er*Er,ir>0&&(ir=1/Math.sqrt(ir),mr*=ir,Ar*=ir,Er*=ir),D[0]=mr,D[1]=Ar,D[2]=Er,D[3]=0,D[4]=ot*Er-Qe*Ar,D[5]=Qe*mr-Je*Er,D[6]=Je*Ar-ot*mr,D[7]=0,D[8]=Je,D[9]=ot,D[10]=Qe,D[11]=0,D[12]=k,D[13]=X,D[14]=W,D[15]=1,D}function Ye(D){return"mat4("+D[0]+", "+D[1]+", "+D[2]+", "+D[3]+", "+D[4]+", "+D[5]+", "+D[6]+", "+D[7]+", "+D[8]+", "+D[9]+", "+D[10]+", "+D[11]+", "+D[12]+", "+D[13]+", "+D[14]+", "+D[15]+")"}function Ot(D){return Math.hypot(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15])}function mt(D,q,G){return D[0]=q[0]+G[0],D[1]=q[1]+G[1],D[2]=q[2]+G[2],D[3]=q[3]+G[3],D[4]=q[4]+G[4],D[5]=q[5]+G[5],D[6]=q[6]+G[6],D[7]=q[7]+G[7],D[8]=q[8]+G[8],D[9]=q[9]+G[9],D[10]=q[10]+G[10],D[11]=q[11]+G[11],D[12]=q[12]+G[12],D[13]=q[13]+G[13],D[14]=q[14]+G[14],D[15]=q[15]+G[15],D}function Rt(D,q,G){return D[0]=q[0]-G[0],D[1]=q[1]-G[1],D[2]=q[2]-G[2],D[3]=q[3]-G[3],D[4]=q[4]-G[4],D[5]=q[5]-G[5],D[6]=q[6]-G[6],D[7]=q[7]-G[7],D[8]=q[8]-G[8],D[9]=q[9]-G[9],D[10]=q[10]-G[10],D[11]=q[11]-G[11],D[12]=q[12]-G[12],D[13]=q[13]-G[13],D[14]=q[14]-G[14],D[15]=q[15]-G[15],D}function pt(D,q,G){return D[0]=q[0]*G,D[1]=q[1]*G,D[2]=q[2]*G,D[3]=q[3]*G,D[4]=q[4]*G,D[5]=q[5]*G,D[6]=q[6]*G,D[7]=q[7]*G,D[8]=q[8]*G,D[9]=q[9]*G,D[10]=q[10]*G,D[11]=q[11]*G,D[12]=q[12]*G,D[13]=q[13]*G,D[14]=q[14]*G,D[15]=q[15]*G,D}function Ge(D,q,G,O){return D[0]=q[0]+G[0]*O,D[1]=q[1]+G[1]*O,D[2]=q[2]+G[2]*O,D[3]=q[3]+G[3]*O,D[4]=q[4]+G[4]*O,D[5]=q[5]+G[5]*O,D[6]=q[6]+G[6]*O,D[7]=q[7]+G[7]*O,D[8]=q[8]+G[8]*O,D[9]=q[9]+G[9]*O,D[10]=q[10]+G[10]*O,D[11]=q[11]+G[11]*O,D[12]=q[12]+G[12]*O,D[13]=q[13]+G[13]*O,D[14]=q[14]+G[14]*O,D[15]=q[15]+G[15]*O,D}function wt(D,q){return D[0]===q[0]&&D[1]===q[1]&&D[2]===q[2]&&D[3]===q[3]&&D[4]===q[4]&&D[5]===q[5]&&D[6]===q[6]&&D[7]===q[7]&&D[8]===q[8]&&D[9]===q[9]&&D[10]===q[10]&&D[11]===q[11]&&D[12]===q[12]&&D[13]===q[13]&&D[14]===q[14]&&D[15]===q[15]}function ee(D,q){var G=D[0],O=D[1],k=D[2],X=D[3],W=D[4],ae=D[5],Be=D[6],ve=D[7],Je=D[8],ot=D[9],Qe=D[10],ir=D[11],mr=D[12],Ar=D[13],Er=D[14],Zt=D[15],Tr=q[0],pn=q[1],un=q[2],Zn=q[3],Cr=q[4],Nr=q[5],bt=q[6],jn=q[7],Pt=q[8],zt=q[9],Qt=q[10],dr=q[11],_r=q[12],Hr=q[13],Qr=q[14],fr=q[15];return Math.abs(G-Tr)<=v.Ib*Math.max(1,Math.abs(G),Math.abs(Tr))&&Math.abs(O-pn)<=v.Ib*Math.max(1,Math.abs(O),Math.abs(pn))&&Math.abs(k-un)<=v.Ib*Math.max(1,Math.abs(k),Math.abs(un))&&Math.abs(X-Zn)<=v.Ib*Math.max(1,Math.abs(X),Math.abs(Zn))&&Math.abs(W-Cr)<=v.Ib*Math.max(1,Math.abs(W),Math.abs(Cr))&&Math.abs(ae-Nr)<=v.Ib*Math.max(1,Math.abs(ae),Math.abs(Nr))&&Math.abs(Be-bt)<=v.Ib*Math.max(1,Math.abs(Be),Math.abs(bt))&&Math.abs(ve-jn)<=v.Ib*Math.max(1,Math.abs(ve),Math.abs(jn))&&Math.abs(Je-Pt)<=v.Ib*Math.max(1,Math.abs(Je),Math.abs(Pt))&&Math.abs(ot-zt)<=v.Ib*Math.max(1,Math.abs(ot),Math.abs(zt))&&Math.abs(Qe-Qt)<=v.Ib*Math.max(1,Math.abs(Qe),Math.abs(Qt))&&Math.abs(ir-dr)<=v.Ib*Math.max(1,Math.abs(ir),Math.abs(dr))&&Math.abs(mr-_r)<=v.Ib*Math.max(1,Math.abs(mr),Math.abs(_r))&&Math.abs(Ar-Hr)<=v.Ib*Math.max(1,Math.abs(Ar),Math.abs(Hr))&&Math.abs(Er-Qr)<=v.Ib*Math.max(1,Math.abs(Er),Math.abs(Qr))&&Math.abs(Zt-fr)<=v.Ib*Math.max(1,Math.abs(Zt),Math.abs(fr))}var Re=We,dt=Rt},31437:function(vt,Ee,g){"use strict";g.d(Ee,{$X:function(){return L},AK:function(){return re},Fv:function(){return ie},IH:function(){return B},JG:function(){return N},Ue:function(){return M},al:function(){return K},lu:function(){return It},t7:function(){return le},t8:function(){return Z},tk:function(){return $e}});var v=g(49685);function M(){var pt=new v.WT(2);return v.WT!=Float32Array&&(pt[0]=0,pt[1]=0),pt}function c(pt){var Ge=new glMatrix.ARRAY_TYPE(2);return Ge[0]=pt[0],Ge[1]=pt[1],Ge}function K(pt,Ge){var wt=new v.WT(2);return wt[0]=pt,wt[1]=Ge,wt}function N(pt,Ge){return pt[0]=Ge[0],pt[1]=Ge[1],pt}function Z(pt,Ge,wt){return pt[0]=Ge,pt[1]=wt,pt}function B(pt,Ge,wt){return pt[0]=Ge[0]+wt[0],pt[1]=Ge[1]+wt[1],pt}function L(pt,Ge,wt){return pt[0]=Ge[0]-wt[0],pt[1]=Ge[1]-wt[1],pt}function $(pt,Ge,wt){return pt[0]=Ge[0]*wt[0],pt[1]=Ge[1]*wt[1],pt}function U(pt,Ge,wt){return pt[0]=Ge[0]/wt[0],pt[1]=Ge[1]/wt[1],pt}function ke(pt,Ge){return pt[0]=Math.ceil(Ge[0]),pt[1]=Math.ceil(Ge[1]),pt}function We(pt,Ge){return pt[0]=Math.floor(Ge[0]),pt[1]=Math.floor(Ge[1]),pt}function me(pt,Ge,wt){return pt[0]=Math.min(Ge[0],wt[0]),pt[1]=Math.min(Ge[1],wt[1]),pt}function Le(pt,Ge,wt){return pt[0]=Math.max(Ge[0],wt[0]),pt[1]=Math.max(Ge[1],wt[1]),pt}function Se(pt,Ge){return pt[0]=Math.round(Ge[0]),pt[1]=Math.round(Ge[1]),pt}function et(pt,Ge,wt){return pt[0]=Ge[0]*wt,pt[1]=Ge[1]*wt,pt}function at(pt,Ge,wt,ee){return pt[0]=Ge[0]+wt[0]*ee,pt[1]=Ge[1]+wt[1]*ee,pt}function Lt(pt,Ge){var wt=Ge[0]-pt[0],ee=Ge[1]-pt[1];return Math.hypot(wt,ee)}function Et(pt,Ge){var wt=Ge[0]-pt[0],ee=Ge[1]-pt[1];return wt*wt+ee*ee}function jt(pt){var Ge=pt[0],wt=pt[1];return Math.hypot(Ge,wt)}function pe(pt){var Ge=pt[0],wt=pt[1];return Ge*Ge+wt*wt}function $e(pt,Ge){return pt[0]=-Ge[0],pt[1]=-Ge[1],pt}function ye(pt,Ge){return pt[0]=1/Ge[0],pt[1]=1/Ge[1],pt}function ie(pt,Ge){var wt=Ge[0],ee=Ge[1],Re=wt*wt+ee*ee;return Re>0&&(Re=1/Math.sqrt(Re)),pt[0]=Ge[0]*Re,pt[1]=Ge[1]*Re,pt}function re(pt,Ge){return pt[0]*Ge[0]+pt[1]*Ge[1]}function De(pt,Ge,wt){var ee=Ge[0]*wt[1]-Ge[1]*wt[0];return pt[0]=pt[1]=0,pt[2]=ee,pt}function le(pt,Ge,wt,ee){var Re=Ge[0],dt=Ge[1];return pt[0]=Re+ee*(wt[0]-Re),pt[1]=dt+ee*(wt[1]-dt),pt}function ge(pt,Ge){Ge=Ge||1;var wt=glMatrix.RANDOM()*2*Math.PI;return pt[0]=Math.cos(wt)*Ge,pt[1]=Math.sin(wt)*Ge,pt}function ce(pt,Ge,wt){var ee=Ge[0],Re=Ge[1];return pt[0]=wt[0]*ee+wt[2]*Re,pt[1]=wt[1]*ee+wt[3]*Re,pt}function je(pt,Ge,wt){var ee=Ge[0],Re=Ge[1];return pt[0]=wt[0]*ee+wt[2]*Re+wt[4],pt[1]=wt[1]*ee+wt[3]*Re+wt[5],pt}function J(pt,Ge,wt){var ee=Ge[0],Re=Ge[1];return pt[0]=wt[0]*ee+wt[3]*Re+wt[6],pt[1]=wt[1]*ee+wt[4]*Re+wt[7],pt}function Me(pt,Ge,wt){var ee=Ge[0],Re=Ge[1];return pt[0]=wt[0]*ee+wt[4]*Re+wt[12],pt[1]=wt[1]*ee+wt[5]*Re+wt[13],pt}function ne(pt,Ge,wt,ee){var Re=Ge[0]-wt[0],dt=Ge[1]-wt[1],D=Math.sin(ee),q=Math.cos(ee);return pt[0]=Re*q-dt*D+wt[0],pt[1]=Re*D+dt*q+wt[1],pt}function xe(pt,Ge){var wt=pt[0],ee=pt[1],Re=Ge[0],dt=Ge[1],D=Math.sqrt(wt*wt+ee*ee)*Math.sqrt(Re*Re+dt*dt),q=D&&(wt*Re+ee*dt)/D;return Math.acos(Math.min(Math.max(q,-1),1))}function Ne(pt){return pt[0]=0,pt[1]=0,pt}function Pe(pt){return"vec2("+pt[0]+", "+pt[1]+")"}function He(pt,Ge){return pt[0]===Ge[0]&&pt[1]===Ge[1]}function lt(pt,Ge){var wt=pt[0],ee=pt[1],Re=Ge[0],dt=Ge[1];return Math.abs(wt-Re)<=glMatrix.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Re))&&Math.abs(ee-dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ee),Math.abs(dt))}var ft=null,It=L,fe=null,_t=null,Ye=null,Ot=null,mt=null,Rt=function(){var pt=M();return function(Ge,wt,ee,Re,dt,D){var q,G;for(wt||(wt=2),ee||(ee=0),Re?G=Math.min(Re*wt+ee,Ge.length):G=Ge.length,q=ee;q<G;q+=wt)pt[0]=Ge[q],pt[1]=Ge[q+1],dt(pt,pt,D),Ge[q]=pt[0],Ge[q+1]=pt[1];return Ge}}()},77160:function(vt,Ee,g){"use strict";g.r(Ee),g.d(Ee,{add:function(){return L},angle:function(){return He},bezier:function(){return ce},ceil:function(){return We},clone:function(){return c},copy:function(){return Z},create:function(){return M},cross:function(){return De},dist:function(){return mt},distance:function(){return Et},div:function(){return Ot},divide:function(){return ke},dot:function(){return re},equals:function(){return fe},exactEquals:function(){return It},floor:function(){return me},forEach:function(){return wt},fromValues:function(){return N},hermite:function(){return ge},inverse:function(){return ye},len:function(){return pt},length:function(){return K},lerp:function(){return le},max:function(){return Se},min:function(){return Le},mul:function(){return Ye},multiply:function(){return U},negate:function(){return $e},normalize:function(){return ie},random:function(){return je},rotateX:function(){return xe},rotateY:function(){return Ne},rotateZ:function(){return Pe},round:function(){return et},scale:function(){return at},scaleAndAdd:function(){return Lt},set:function(){return B},sqrDist:function(){return Rt},sqrLen:function(){return Ge},squaredDistance:function(){return jt},squaredLength:function(){return pe},str:function(){return ft},sub:function(){return _t},subtract:function(){return $},transformMat3:function(){return Me},transformMat4:function(){return J},transformQuat:function(){return ne},zero:function(){return lt}});var v=g(49685);function M(){var ee=new v.WT(3);return v.WT!=Float32Array&&(ee[0]=0,ee[1]=0,ee[2]=0),ee}function c(ee){var Re=new v.WT(3);return Re[0]=ee[0],Re[1]=ee[1],Re[2]=ee[2],Re}function K(ee){var Re=ee[0],dt=ee[1],D=ee[2];return Math.hypot(Re,dt,D)}function N(ee,Re,dt){var D=new v.WT(3);return D[0]=ee,D[1]=Re,D[2]=dt,D}function Z(ee,Re){return ee[0]=Re[0],ee[1]=Re[1],ee[2]=Re[2],ee}function B(ee,Re,dt,D){return ee[0]=Re,ee[1]=dt,ee[2]=D,ee}function L(ee,Re,dt){return ee[0]=Re[0]+dt[0],ee[1]=Re[1]+dt[1],ee[2]=Re[2]+dt[2],ee}function $(ee,Re,dt){return ee[0]=Re[0]-dt[0],ee[1]=Re[1]-dt[1],ee[2]=Re[2]-dt[2],ee}function U(ee,Re,dt){return ee[0]=Re[0]*dt[0],ee[1]=Re[1]*dt[1],ee[2]=Re[2]*dt[2],ee}function ke(ee,Re,dt){return ee[0]=Re[0]/dt[0],ee[1]=Re[1]/dt[1],ee[2]=Re[2]/dt[2],ee}function We(ee,Re){return ee[0]=Math.ceil(Re[0]),ee[1]=Math.ceil(Re[1]),ee[2]=Math.ceil(Re[2]),ee}function me(ee,Re){return ee[0]=Math.floor(Re[0]),ee[1]=Math.floor(Re[1]),ee[2]=Math.floor(Re[2]),ee}function Le(ee,Re,dt){return ee[0]=Math.min(Re[0],dt[0]),ee[1]=Math.min(Re[1],dt[1]),ee[2]=Math.min(Re[2],dt[2]),ee}function Se(ee,Re,dt){return ee[0]=Math.max(Re[0],dt[0]),ee[1]=Math.max(Re[1],dt[1]),ee[2]=Math.max(Re[2],dt[2]),ee}function et(ee,Re){return ee[0]=Math.round(Re[0]),ee[1]=Math.round(Re[1]),ee[2]=Math.round(Re[2]),ee}function at(ee,Re,dt){return ee[0]=Re[0]*dt,ee[1]=Re[1]*dt,ee[2]=Re[2]*dt,ee}function Lt(ee,Re,dt,D){return ee[0]=Re[0]+dt[0]*D,ee[1]=Re[1]+dt[1]*D,ee[2]=Re[2]+dt[2]*D,ee}function Et(ee,Re){var dt=Re[0]-ee[0],D=Re[1]-ee[1],q=Re[2]-ee[2];return Math.hypot(dt,D,q)}function jt(ee,Re){var dt=Re[0]-ee[0],D=Re[1]-ee[1],q=Re[2]-ee[2];return dt*dt+D*D+q*q}function pe(ee){var Re=ee[0],dt=ee[1],D=ee[2];return Re*Re+dt*dt+D*D}function $e(ee,Re){return ee[0]=-Re[0],ee[1]=-Re[1],ee[2]=-Re[2],ee}function ye(ee,Re){return ee[0]=1/Re[0],ee[1]=1/Re[1],ee[2]=1/Re[2],ee}function ie(ee,Re){var dt=Re[0],D=Re[1],q=Re[2],G=dt*dt+D*D+q*q;return G>0&&(G=1/Math.sqrt(G)),ee[0]=Re[0]*G,ee[1]=Re[1]*G,ee[2]=Re[2]*G,ee}function re(ee,Re){return ee[0]*Re[0]+ee[1]*Re[1]+ee[2]*Re[2]}function De(ee,Re,dt){var D=Re[0],q=Re[1],G=Re[2],O=dt[0],k=dt[1],X=dt[2];return ee[0]=q*X-G*k,ee[1]=G*O-D*X,ee[2]=D*k-q*O,ee}function le(ee,Re,dt,D){var q=Re[0],G=Re[1],O=Re[2];return ee[0]=q+D*(dt[0]-q),ee[1]=G+D*(dt[1]-G),ee[2]=O+D*(dt[2]-O),ee}function ge(ee,Re,dt,D,q,G){var O=G*G,k=O*(2*G-3)+1,X=O*(G-2)+G,W=O*(G-1),ae=O*(3-2*G);return ee[0]=Re[0]*k+dt[0]*X+D[0]*W+q[0]*ae,ee[1]=Re[1]*k+dt[1]*X+D[1]*W+q[1]*ae,ee[2]=Re[2]*k+dt[2]*X+D[2]*W+q[2]*ae,ee}function ce(ee,Re,dt,D,q,G){var O=1-G,k=O*O,X=G*G,W=k*O,ae=3*G*k,Be=3*X*O,ve=X*G;return ee[0]=Re[0]*W+dt[0]*ae+D[0]*Be+q[0]*ve,ee[1]=Re[1]*W+dt[1]*ae+D[1]*Be+q[1]*ve,ee[2]=Re[2]*W+dt[2]*ae+D[2]*Be+q[2]*ve,ee}function je(ee,Re){Re=Re||1;var dt=v.FD()*2*Math.PI,D=v.FD()*2-1,q=Math.sqrt(1-D*D)*Re;return ee[0]=Math.cos(dt)*q,ee[1]=Math.sin(dt)*q,ee[2]=D*Re,ee}function J(ee,Re,dt){var D=Re[0],q=Re[1],G=Re[2],O=dt[3]*D+dt[7]*q+dt[11]*G+dt[15];return O=O||1,ee[0]=(dt[0]*D+dt[4]*q+dt[8]*G+dt[12])/O,ee[1]=(dt[1]*D+dt[5]*q+dt[9]*G+dt[13])/O,ee[2]=(dt[2]*D+dt[6]*q+dt[10]*G+dt[14])/O,ee}function Me(ee,Re,dt){var D=Re[0],q=Re[1],G=Re[2];return ee[0]=D*dt[0]+q*dt[3]+G*dt[6],ee[1]=D*dt[1]+q*dt[4]+G*dt[7],ee[2]=D*dt[2]+q*dt[5]+G*dt[8],ee}function ne(ee,Re,dt){var D=dt[0],q=dt[1],G=dt[2],O=dt[3],k=Re[0],X=Re[1],W=Re[2],ae=q*W-G*X,Be=G*k-D*W,ve=D*X-q*k,Je=q*ve-G*Be,ot=G*ae-D*ve,Qe=D*Be-q*ae,ir=O*2;return ae*=ir,Be*=ir,ve*=ir,Je*=2,ot*=2,Qe*=2,ee[0]=k+ae+Je,ee[1]=X+Be+ot,ee[2]=W+ve+Qe,ee}function xe(ee,Re,dt,D){var q=[],G=[];return q[0]=Re[0]-dt[0],q[1]=Re[1]-dt[1],q[2]=Re[2]-dt[2],G[0]=q[0],G[1]=q[1]*Math.cos(D)-q[2]*Math.sin(D),G[2]=q[1]*Math.sin(D)+q[2]*Math.cos(D),ee[0]=G[0]+dt[0],ee[1]=G[1]+dt[1],ee[2]=G[2]+dt[2],ee}function Ne(ee,Re,dt,D){var q=[],G=[];return q[0]=Re[0]-dt[0],q[1]=Re[1]-dt[1],q[2]=Re[2]-dt[2],G[0]=q[2]*Math.sin(D)+q[0]*Math.cos(D),G[1]=q[1],G[2]=q[2]*Math.cos(D)-q[0]*Math.sin(D),ee[0]=G[0]+dt[0],ee[1]=G[1]+dt[1],ee[2]=G[2]+dt[2],ee}function Pe(ee,Re,dt,D){var q=[],G=[];return q[0]=Re[0]-dt[0],q[1]=Re[1]-dt[1],q[2]=Re[2]-dt[2],G[0]=q[0]*Math.cos(D)-q[1]*Math.sin(D),G[1]=q[0]*Math.sin(D)+q[1]*Math.cos(D),G[2]=q[2],ee[0]=G[0]+dt[0],ee[1]=G[1]+dt[1],ee[2]=G[2]+dt[2],ee}function He(ee,Re){var dt=ee[0],D=ee[1],q=ee[2],G=Re[0],O=Re[1],k=Re[2],X=Math.sqrt(dt*dt+D*D+q*q),W=Math.sqrt(G*G+O*O+k*k),ae=X*W,Be=ae&&re(ee,Re)/ae;return Math.acos(Math.min(Math.max(Be,-1),1))}function lt(ee){return ee[0]=0,ee[1]=0,ee[2]=0,ee}function ft(ee){return"vec3("+ee[0]+", "+ee[1]+", "+ee[2]+")"}function It(ee,Re){return ee[0]===Re[0]&&ee[1]===Re[1]&&ee[2]===Re[2]}function fe(ee,Re){var dt=ee[0],D=ee[1],q=ee[2],G=Re[0],O=Re[1],k=Re[2];return Math.abs(dt-G)<=v.Ib*Math.max(1,Math.abs(dt),Math.abs(G))&&Math.abs(D-O)<=v.Ib*Math.max(1,Math.abs(D),Math.abs(O))&&Math.abs(q-k)<=v.Ib*Math.max(1,Math.abs(q),Math.abs(k))}var _t=$,Ye=U,Ot=ke,mt=Et,Rt=jt,pt=K,Ge=pe,wt=function(){var ee=M();return function(Re,dt,D,q,G,O){var k,X;for(dt||(dt=3),D||(D=0),q?X=Math.min(q*dt+D,Re.length):X=Re.length,k=D;k<X;k+=dt)ee[0]=Re[k],ee[1]=Re[k+1],ee[2]=Re[k+2],G(ee,ee,O),Re[k]=ee[0],Re[k+1]=ee[1],Re[k+2]=ee[2];return Re}}()},98333:function(vt,Ee,g){"use strict";g.d(Ee,{Ue:function(){return M},al:function(){return K},bA:function(){return et},fF:function(){return ce}});var v=g(49685);function M(){var Ye=new v.WT(4);return v.WT!=Float32Array&&(Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=0),Ye}function c(Ye){var Ot=new glMatrix.ARRAY_TYPE(4);return Ot[0]=Ye[0],Ot[1]=Ye[1],Ot[2]=Ye[2],Ot[3]=Ye[3],Ot}function K(Ye,Ot,mt,Rt){var pt=new v.WT(4);return pt[0]=Ye,pt[1]=Ot,pt[2]=mt,pt[3]=Rt,pt}function N(Ye,Ot){return Ye[0]=Ot[0],Ye[1]=Ot[1],Ye[2]=Ot[2],Ye[3]=Ot[3],Ye}function Z(Ye,Ot,mt,Rt,pt){return Ye[0]=Ot,Ye[1]=mt,Ye[2]=Rt,Ye[3]=pt,Ye}function B(Ye,Ot,mt){return Ye[0]=Ot[0]+mt[0],Ye[1]=Ot[1]+mt[1],Ye[2]=Ot[2]+mt[2],Ye[3]=Ot[3]+mt[3],Ye}function L(Ye,Ot,mt){return Ye[0]=Ot[0]-mt[0],Ye[1]=Ot[1]-mt[1],Ye[2]=Ot[2]-mt[2],Ye[3]=Ot[3]-mt[3],Ye}function $(Ye,Ot,mt){return Ye[0]=Ot[0]*mt[0],Ye[1]=Ot[1]*mt[1],Ye[2]=Ot[2]*mt[2],Ye[3]=Ot[3]*mt[3],Ye}function U(Ye,Ot,mt){return Ye[0]=Ot[0]/mt[0],Ye[1]=Ot[1]/mt[1],Ye[2]=Ot[2]/mt[2],Ye[3]=Ot[3]/mt[3],Ye}function ke(Ye,Ot){return Ye[0]=Math.ceil(Ot[0]),Ye[1]=Math.ceil(Ot[1]),Ye[2]=Math.ceil(Ot[2]),Ye[3]=Math.ceil(Ot[3]),Ye}function We(Ye,Ot){return Ye[0]=Math.floor(Ot[0]),Ye[1]=Math.floor(Ot[1]),Ye[2]=Math.floor(Ot[2]),Ye[3]=Math.floor(Ot[3]),Ye}function me(Ye,Ot,mt){return Ye[0]=Math.min(Ot[0],mt[0]),Ye[1]=Math.min(Ot[1],mt[1]),Ye[2]=Math.min(Ot[2],mt[2]),Ye[3]=Math.min(Ot[3],mt[3]),Ye}function Le(Ye,Ot,mt){return Ye[0]=Math.max(Ot[0],mt[0]),Ye[1]=Math.max(Ot[1],mt[1]),Ye[2]=Math.max(Ot[2],mt[2]),Ye[3]=Math.max(Ot[3],mt[3]),Ye}function Se(Ye,Ot){return Ye[0]=Math.round(Ot[0]),Ye[1]=Math.round(Ot[1]),Ye[2]=Math.round(Ot[2]),Ye[3]=Math.round(Ot[3]),Ye}function et(Ye,Ot,mt){return Ye[0]=Ot[0]*mt,Ye[1]=Ot[1]*mt,Ye[2]=Ot[2]*mt,Ye[3]=Ot[3]*mt,Ye}function at(Ye,Ot,mt,Rt){return Ye[0]=Ot[0]+mt[0]*Rt,Ye[1]=Ot[1]+mt[1]*Rt,Ye[2]=Ot[2]+mt[2]*Rt,Ye[3]=Ot[3]+mt[3]*Rt,Ye}function Lt(Ye,Ot){var mt=Ot[0]-Ye[0],Rt=Ot[1]-Ye[1],pt=Ot[2]-Ye[2],Ge=Ot[3]-Ye[3];return Math.hypot(mt,Rt,pt,Ge)}function Et(Ye,Ot){var mt=Ot[0]-Ye[0],Rt=Ot[1]-Ye[1],pt=Ot[2]-Ye[2],Ge=Ot[3]-Ye[3];return mt*mt+Rt*Rt+pt*pt+Ge*Ge}function jt(Ye){var Ot=Ye[0],mt=Ye[1],Rt=Ye[2],pt=Ye[3];return Math.hypot(Ot,mt,Rt,pt)}function pe(Ye){var Ot=Ye[0],mt=Ye[1],Rt=Ye[2],pt=Ye[3];return Ot*Ot+mt*mt+Rt*Rt+pt*pt}function $e(Ye,Ot){return Ye[0]=-Ot[0],Ye[1]=-Ot[1],Ye[2]=-Ot[2],Ye[3]=-Ot[3],Ye}function ye(Ye,Ot){return Ye[0]=1/Ot[0],Ye[1]=1/Ot[1],Ye[2]=1/Ot[2],Ye[3]=1/Ot[3],Ye}function ie(Ye,Ot){var mt=Ot[0],Rt=Ot[1],pt=Ot[2],Ge=Ot[3],wt=mt*mt+Rt*Rt+pt*pt+Ge*Ge;return wt>0&&(wt=1/Math.sqrt(wt)),Ye[0]=mt*wt,Ye[1]=Rt*wt,Ye[2]=pt*wt,Ye[3]=Ge*wt,Ye}function re(Ye,Ot){return Ye[0]*Ot[0]+Ye[1]*Ot[1]+Ye[2]*Ot[2]+Ye[3]*Ot[3]}function De(Ye,Ot,mt,Rt){var pt=mt[0]*Rt[1]-mt[1]*Rt[0],Ge=mt[0]*Rt[2]-mt[2]*Rt[0],wt=mt[0]*Rt[3]-mt[3]*Rt[0],ee=mt[1]*Rt[2]-mt[2]*Rt[1],Re=mt[1]*Rt[3]-mt[3]*Rt[1],dt=mt[2]*Rt[3]-mt[3]*Rt[2],D=Ot[0],q=Ot[1],G=Ot[2],O=Ot[3];return Ye[0]=q*dt-G*Re+O*ee,Ye[1]=-(D*dt)+G*wt-O*Ge,Ye[2]=D*Re-q*wt+O*pt,Ye[3]=-(D*ee)+q*Ge-G*pt,Ye}function le(Ye,Ot,mt,Rt){var pt=Ot[0],Ge=Ot[1],wt=Ot[2],ee=Ot[3];return Ye[0]=pt+Rt*(mt[0]-pt),Ye[1]=Ge+Rt*(mt[1]-Ge),Ye[2]=wt+Rt*(mt[2]-wt),Ye[3]=ee+Rt*(mt[3]-ee),Ye}function ge(Ye,Ot){Ot=Ot||1;var mt,Rt,pt,Ge,wt,ee;do mt=glMatrix.RANDOM()*2-1,Rt=glMatrix.RANDOM()*2-1,wt=mt*mt+Rt*Rt;while(wt>=1);do pt=glMatrix.RANDOM()*2-1,Ge=glMatrix.RANDOM()*2-1,ee=pt*pt+Ge*Ge;while(ee>=1);var Re=Math.sqrt((1-wt)/ee);return Ye[0]=Ot*mt,Ye[1]=Ot*Rt,Ye[2]=Ot*pt*Re,Ye[3]=Ot*Ge*Re,Ye}function ce(Ye,Ot,mt){var Rt=Ot[0],pt=Ot[1],Ge=Ot[2],wt=Ot[3];return Ye[0]=mt[0]*Rt+mt[4]*pt+mt[8]*Ge+mt[12]*wt,Ye[1]=mt[1]*Rt+mt[5]*pt+mt[9]*Ge+mt[13]*wt,Ye[2]=mt[2]*Rt+mt[6]*pt+mt[10]*Ge+mt[14]*wt,Ye[3]=mt[3]*Rt+mt[7]*pt+mt[11]*Ge+mt[15]*wt,Ye}function je(Ye,Ot,mt){var Rt=Ot[0],pt=Ot[1],Ge=Ot[2],wt=mt[0],ee=mt[1],Re=mt[2],dt=mt[3],D=dt*Rt+ee*Ge-Re*pt,q=dt*pt+Re*Rt-wt*Ge,G=dt*Ge+wt*pt-ee*Rt,O=-wt*Rt-ee*pt-Re*Ge;return Ye[0]=D*dt+O*-wt+q*-Re-G*-ee,Ye[1]=q*dt+O*-ee+G*-wt-D*-Re,Ye[2]=G*dt+O*-Re+D*-ee-q*-wt,Ye[3]=Ot[3],Ye}function J(Ye){return Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=0,Ye}function Me(Ye){return"vec4("+Ye[0]+", "+Ye[1]+", "+Ye[2]+", "+Ye[3]+")"}function ne(Ye,Ot){return Ye[0]===Ot[0]&&Ye[1]===Ot[1]&&Ye[2]===Ot[2]&&Ye[3]===Ot[3]}function xe(Ye,Ot){var mt=Ye[0],Rt=Ye[1],pt=Ye[2],Ge=Ye[3],wt=Ot[0],ee=Ot[1],Re=Ot[2],dt=Ot[3];return Math.abs(mt-wt)<=glMatrix.EPSILON*Math.max(1,Math.abs(mt),Math.abs(wt))&&Math.abs(Rt-ee)<=glMatrix.EPSILON*Math.max(1,Math.abs(Rt),Math.abs(ee))&&Math.abs(pt-Re)<=glMatrix.EPSILON*Math.max(1,Math.abs(pt),Math.abs(Re))&&Math.abs(Ge-dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ge),Math.abs(dt))}var Ne=null,Pe=null,He=null,lt=null,ft=null,It=null,fe=null,_t=function(){var Ye=M();return function(Ot,mt,Rt,pt,Ge,wt){var ee,Re;for(mt||(mt=4),Rt||(Rt=0),pt?Re=Math.min(pt*mt+Rt,Ot.length):Re=Ot.length,ee=Rt;ee<Re;ee+=mt)Ye[0]=Ot[ee],Ye[1]=Ot[ee+1],Ye[2]=Ot[ee+2],Ye[3]=Ot[ee+3],Ge(Ye,Ye,wt),Ot[ee]=Ye[0],Ot[ee+1]=Ye[1],Ot[ee+2]=Ye[2],Ot[ee+3]=Ye[3];return Ot}}()},80645:function(vt,Ee){Ee.read=function(g,v,M,c,K){var N,Z,B=K*8-c-1,L=(1<<B)-1,$=L>>1,U=-7,ke=M?K-1:0,We=M?-1:1,me=g[v+ke];for(ke+=We,N=me&(1<<-U)-1,me>>=-U,U+=B;U>0;N=N*256+g[v+ke],ke+=We,U-=8);for(Z=N&(1<<-U)-1,N>>=-U,U+=c;U>0;Z=Z*256+g[v+ke],ke+=We,U-=8);if(N===0)N=1-$;else{if(N===L)return Z?NaN:(me?-1:1)*(1/0);Z=Z+Math.pow(2,c),N=N-$}return(me?-1:1)*Z*Math.pow(2,N-c)},Ee.write=function(g,v,M,c,K,N){var Z,B,L,$=N*8-K-1,U=(1<<$)-1,ke=U>>1,We=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=c?0:N-1,Le=c?1:-1,Se=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(B=isNaN(v)?1:0,Z=U):(Z=Math.floor(Math.log(v)/Math.LN2),v*(L=Math.pow(2,-Z))<1&&(Z--,L*=2),Z+ke>=1?v+=We/L:v+=We*Math.pow(2,1-ke),v*L>=2&&(Z++,L/=2),Z+ke>=U?(B=0,Z=U):Z+ke>=1?(B=(v*L-1)*Math.pow(2,K),Z=Z+ke):(B=v*Math.pow(2,ke-1)*Math.pow(2,K),Z=0));K>=8;g[M+me]=B&255,me+=Le,B/=256,K-=8);for(Z=Z<<K|B,$+=K;$>0;g[M+me]=Z&255,me+=Le,Z/=256,$-=8);g[M+me-Le]|=Se*128}},7375:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});var g=Symbol.for("INJECTION");function v(Z,B,L,$){function U(){return $&&!Reflect.hasMetadata(g,this,B)&&Reflect.defineMetadata(g,L(),this,B),Reflect.hasMetadata(g,this,B)?Reflect.getMetadata(g,this,B):L()}function ke(We){Reflect.defineMetadata(g,We,this,B)}Object.defineProperty(Z,B,{configurable:!0,enumerable:!0,get:U,set:ke})}function M(Z,B){return function(L){return function($,U){var ke=function(){return Z.get(L)};v($,U,ke,B)}}}Ee.makePropertyInjectDecorator=M;function c(Z,B){return function(L,$){return function(U,ke){var We=function(){return Z.getNamed(L,$)};v(U,ke,We,B)}}}Ee.makePropertyInjectNamedDecorator=c;function K(Z,B){return function(L,$,U){return function(ke,We){var me=function(){return Z.getTagged(L,$,U)};v(ke,We,me,B)}}}Ee.makePropertyInjectTaggedDecorator=K;function N(Z,B){return function(L){return function($,U){var ke=function(){return Z.getAll(L)};v($,U,ke,B)}}}Ee.makePropertyMultiInjectDecorator=N},84879:function(vt,Ee,g){"use strict";var v;v={value:!0};var M=g(7375);function c(K,N){N===void 0&&(N=!0);var Z=M.makePropertyInjectDecorator(K,N),B=M.makePropertyInjectNamedDecorator(K,N),L=M.makePropertyInjectTaggedDecorator(K,N),$=M.makePropertyMultiInjectDecorator(K,N);return{lazyInject:Z,lazyInjectNamed:B,lazyInjectTagged:L,lazyMultiInject:$}}Ee.Z=c},99934:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.tagProperty=Ee.tagParameter=Ee.decorate=void 0;var v=g(16674),M=g(6867);function c($,U,ke,We){var me=M.TAGGED;N(me,$,U,We,ke)}Ee.tagParameter=c;function K($,U,ke){var We=M.TAGGED_PROP;N(We,$.constructor,U,ke)}Ee.tagProperty=K;function N($,U,ke,We,me){var Le={},Se=typeof me=="number",et=me!==void 0&&Se?me.toString():ke;if(Se&&ke!==void 0)throw new Error(v.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata($,U)&&(Le=Reflect.getMetadata($,U));var at=Le[et];if(!Array.isArray(at))at=[];else for(var Lt=0,Et=at;Lt<Et.length;Lt++){var jt=Et[Lt];if(jt.key===We.key)throw new Error(v.DUPLICATED_METADATA+" "+jt.key.toString())}at.push(We),Le[et]=at,Reflect.defineMetadata($,Le,U)}function Z($,U){Reflect.decorate($,U)}function B($,U){return function(ke,We){U(ke,We,$)}}function L($,U,ke){typeof ke=="number"?Z([B(ke,$)],U):typeof ke=="string"?Reflect.decorate([$],U,ke):Z([$],U)}Ee.decorate=L},5744:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.inject=Ee.LazyServiceIdentifer=void 0;var v=g(16674),M=g(6867),c=g(47738),K=g(99934),N=function(){function B(L){this._cb=L}return B.prototype.unwrap=function(){return this._cb()},B}();Ee.LazyServiceIdentifer=N;function Z(B){return function(L,$,U){if(B===void 0)throw new Error(v.UNDEFINED_INJECT_ANNOTATION(L.name));var ke=new c.Metadata(M.INJECT_TAG,B);typeof U=="number"?K.tagParameter(L,$,U,ke):K.tagProperty(L,$,ke)}}Ee.inject=Z},64315:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.injectable=void 0;var v=g(16674),M=g(6867);function c(){return function(K){if(Reflect.hasOwnMetadata(M.PARAM_TYPES,K))throw new Error(v.DUPLICATED_INJECTABLE_DECORATOR);var N=Reflect.getMetadata(M.DESIGN_PARAM_TYPES,K)||[];return Reflect.defineMetadata(M.PARAM_TYPES,N,K),K}}Ee.injectable=c},71693:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.multiInject=void 0;var v=g(6867),M=g(47738),c=g(99934);function K(N){return function(Z,B,L){var $=new M.Metadata(v.MULTI_INJECT_TAG,N);typeof L=="number"?c.tagParameter(Z,B,L,$):c.tagProperty(Z,B,$)}}Ee.multiInject=K},38085:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.named=void 0;var v=g(6867),M=g(47738),c=g(99934);function K(N){return function(Z,B,L){var $=new M.Metadata(v.NAMED_TAG,N);typeof L=="number"?c.tagParameter(Z,B,L,$):c.tagProperty(Z,B,$)}}Ee.named=K},6515:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.optional=void 0;var v=g(6867),M=g(47738),c=g(99934);function K(){return function(N,Z,B){var L=new M.Metadata(v.OPTIONAL_TAG,!0);typeof B=="number"?c.tagParameter(N,Z,B,L):c.tagProperty(N,Z,L)}}Ee.optional=K},7014:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.postConstruct=void 0;var v=g(16674),M=g(6867),c=g(47738);function K(){return function(N,Z,B){var L=new c.Metadata(M.POST_CONSTRUCT,Z);if(Reflect.hasOwnMetadata(M.POST_CONSTRUCT,N.constructor))throw new Error(v.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(M.POST_CONSTRUCT,L,N.constructor)}}Ee.postConstruct=K},32052:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.tagged=void 0;var v=g(47738),M=g(99934);function c(K,N){return function(Z,B,L){var $=new v.Metadata(K,N);typeof L=="number"?M.tagParameter(Z,B,L,$):M.tagProperty(Z,B,$)}}Ee.tagged=c},55638:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.targetName=void 0;var v=g(6867),M=g(47738),c=g(99934);function K(N){return function(Z,B,L){var $=new M.Metadata(v.NAME_TAG,N);c.tagParameter(Z,B,L,$)}}Ee.targetName=K},86757:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.unmanaged=void 0;var v=g(6867),M=g(47738),c=g(99934);function K(){return function(N,Z,B){var L=new M.Metadata(v.UNMANAGED_TAG,!0);c.tagParameter(N,Z,B,L)}}Ee.unmanaged=K},44290:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Binding=void 0;var v=g(28421),M=g(37791),c=function(){function K(N,Z){this.id=M.id(),this.activated=!1,this.serviceIdentifier=N,this.scope=Z,this.type=v.BindingTypeEnum.Invalid,this.constraint=function(B){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return K.prototype.clone=function(){var N=new K(this.serviceIdentifier,this.scope);return N.activated=N.scope===v.BindingScopeEnum.Singleton?this.activated:!1,N.implementationType=this.implementationType,N.dynamicValue=this.dynamicValue,N.scope=this.scope,N.type=this.type,N.factory=this.factory,N.provider=this.provider,N.constraint=this.constraint,N.onActivation=this.onActivation,N.cache=this.cache,N},K}();Ee.Binding=c},23184:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingCount=void 0;var g={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};Ee.BindingCount=g},16674:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.STACK_OVERFLOW=Ee.CIRCULAR_DEPENDENCY_IN_FACTORY=Ee.POST_CONSTRUCT_ERROR=Ee.MULTIPLE_POST_CONSTRUCT_METHODS=Ee.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=Ee.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=Ee.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=Ee.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=Ee.ARGUMENTS_LENGTH_MISMATCH=Ee.INVALID_DECORATOR_OPERATION=Ee.INVALID_TO_SELF_VALUE=Ee.INVALID_FUNCTION_BINDING=Ee.INVALID_MIDDLEWARE_RETURN=Ee.NO_MORE_SNAPSHOTS_AVAILABLE=Ee.INVALID_BINDING_TYPE=Ee.NOT_IMPLEMENTED=Ee.CIRCULAR_DEPENDENCY=Ee.UNDEFINED_INJECT_ANNOTATION=Ee.MISSING_INJECT_ANNOTATION=Ee.MISSING_INJECTABLE_ANNOTATION=Ee.NOT_REGISTERED=Ee.CANNOT_UNBIND=Ee.AMBIGUOUS_MATCH=Ee.KEY_NOT_FOUND=Ee.NULL_ARGUMENT=Ee.DUPLICATED_METADATA=Ee.DUPLICATED_INJECTABLE_DECORATOR=void 0,Ee.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",Ee.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",Ee.NULL_ARGUMENT="NULL argument",Ee.KEY_NOT_FOUND="Key Not Found",Ee.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",Ee.CANNOT_UNBIND="Could not unbind serviceIdentifier:",Ee.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",Ee.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",Ee.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var g=function(K){return"@inject called with undefined this could mean that the class "+K+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};Ee.UNDEFINED_INJECT_ANNOTATION=g,Ee.CIRCULAR_DEPENDENCY="Circular dependency found:",Ee.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",Ee.INVALID_BINDING_TYPE="Invalid binding type:",Ee.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",Ee.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",Ee.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",Ee.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",Ee.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var v=function(){for(var K=[],N=0;N<arguments.length;N++)K[N]=arguments[N];return"The number of constructor arguments in the derived class "+(K[0]+" must be >= than the number of constructor arguments of its base class.")};Ee.ARGUMENTS_LENGTH_MISMATCH=v,Ee.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",Ee.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",Ee.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",Ee.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",Ee.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var M=function(){for(var K=[],N=0;N<arguments.length;N++)K[N]=arguments[N];return"@postConstruct error in class "+K[0]+": "+K[1]};Ee.POST_CONSTRUCT_ERROR=M;var c=function(){for(var K=[],N=0;N<arguments.length;N++)K[N]=arguments[N];return"It looks like there is a circular dependency "+("in one of the '"+K[0]+"' bindings. Please investigate bindings with")+("service identifier '"+K[1]+"'.")};Ee.CIRCULAR_DEPENDENCY_IN_FACTORY=c,Ee.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.TargetTypeEnum=Ee.BindingTypeEnum=Ee.BindingScopeEnum=void 0;var g={Request:"Request",Singleton:"Singleton",Transient:"Transient"};Ee.BindingScopeEnum=g;var v={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};Ee.BindingTypeEnum=v;var M={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};Ee.TargetTypeEnum=M},6867:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.NON_CUSTOM_TAG_KEYS=Ee.POST_CONSTRUCT=Ee.DESIGN_PARAM_TYPES=Ee.PARAM_TYPES=Ee.TAGGED_PROP=Ee.TAGGED=Ee.MULTI_INJECT_TAG=Ee.INJECT_TAG=Ee.OPTIONAL_TAG=Ee.UNMANAGED_TAG=Ee.NAME_TAG=Ee.NAMED_TAG=void 0,Ee.NAMED_TAG="named",Ee.NAME_TAG="name",Ee.UNMANAGED_TAG="unmanaged",Ee.OPTIONAL_TAG="optional",Ee.INJECT_TAG="inject",Ee.MULTI_INJECT_TAG="multi_inject",Ee.TAGGED="inversify:tagged",Ee.TAGGED_PROP="inversify:tagged_props",Ee.PARAM_TYPES="inversify:paramtypes",Ee.DESIGN_PARAM_TYPES="design:paramtypes",Ee.POST_CONSTRUCT="post_construct";function g(){return[Ee.INJECT_TAG,Ee.MULTI_INJECT_TAG,Ee.NAME_TAG,Ee.UNMANAGED_TAG,Ee.NAMED_TAG,Ee.OPTIONAL_TAG]}Ee.NON_CUSTOM_TAG_KEYS=g()},51389:function(vt,Ee,g){"use strict";var v=this&&this.__awaiter||function(at,Lt,Et,jt){function pe($e){return $e instanceof Et?$e:new Et(function(ye){ye($e)})}return new(Et||(Et=Promise))(function($e,ye){function ie(le){try{De(jt.next(le))}catch(ge){ye(ge)}}function re(le){try{De(jt.throw(le))}catch(ge){ye(ge)}}function De(le){le.done?$e(le.value):pe(le.value).then(ie,re)}De((jt=jt.apply(at,Lt||[])).next())})},M=this&&this.__generator||function(at,Lt){var Et={label:0,sent:function(){if($e[0]&1)throw $e[1];return $e[1]},trys:[],ops:[]},jt,pe,$e,ye;return ye={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(ye[Symbol.iterator]=function(){return this}),ye;function ie(De){return function(le){return re([De,le])}}function re(De){if(jt)throw new TypeError("Generator is already executing.");for(;Et;)try{if(jt=1,pe&&($e=De[0]&2?pe.return:De[0]?pe.throw||(($e=pe.return)&&$e.call(pe),0):pe.next)&&!($e=$e.call(pe,De[1])).done)return $e;switch(pe=0,$e&&(De=[De[0]&2,$e.value]),De[0]){case 0:case 1:$e=De;break;case 4:return Et.label++,{value:De[1],done:!1};case 5:Et.label++,pe=De[1],De=[0];continue;case 7:De=Et.ops.pop(),Et.trys.pop();continue;default:if($e=Et.trys,!($e=$e.length>0&&$e[$e.length-1])&&(De[0]===6||De[0]===2)){Et=0;continue}if(De[0]===3&&(!$e||De[1]>$e[0]&&De[1]<$e[3])){Et.label=De[1];break}if(De[0]===6&&Et.label<$e[1]){Et.label=$e[1],$e=De;break}if($e&&Et.label<$e[2]){Et.label=$e[2],Et.ops.push(De);break}$e[2]&&Et.ops.pop(),Et.trys.pop();continue}De=Lt.call(at,Et)}catch(le){De=[6,le],pe=0}finally{jt=$e=0}if(De[0]&5)throw De[1];return{value:De[0]?De[1]:void 0,done:!0}}},c=this&&this.__spreadArray||function(at,Lt){for(var Et=0,jt=Lt.length,pe=at.length;Et<jt;Et++,pe++)at[pe]=Lt[Et];return at};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Container=void 0;var K=g(44290),N=g(16674),Z=g(28421),B=g(6867),L=g(51377),$=g(86311),U=g(31927),ke=g(51860),We=g(37791),me=g(55800),Le=g(85700),Se=g(80175),et=function(){function at(Lt){this._appliedMiddleware=[];var Et=Lt||{};if(typeof Et!="object")throw new Error(""+N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Et.defaultScope===void 0)Et.defaultScope=Z.BindingScopeEnum.Transient;else if(Et.defaultScope!==Z.BindingScopeEnum.Singleton&&Et.defaultScope!==Z.BindingScopeEnum.Transient&&Et.defaultScope!==Z.BindingScopeEnum.Request)throw new Error(""+N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Et.autoBindInjectable===void 0)Et.autoBindInjectable=!1;else if(typeof Et.autoBindInjectable!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Et.skipBaseClassChecks===void 0)Et.skipBaseClassChecks=!1;else if(typeof Et.skipBaseClassChecks!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Et.autoBindInjectable,defaultScope:Et.defaultScope,skipBaseClassChecks:Et.skipBaseClassChecks},this.id=We.id(),this._bindingDictionary=new Se.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new L.MetadataReader}return at.merge=function(Lt,Et){for(var jt=[],pe=2;pe<arguments.length;pe++)jt[pe-2]=arguments[pe];var $e=new at,ye=c([Lt,Et],jt).map(function(De){return $.getBindingDictionary(De)}),ie=$.getBindingDictionary($e);function re(De,le){De.traverse(function(ge,ce){ce.forEach(function(je){le.add(je.serviceIdentifier,je.clone())})})}return ye.forEach(function(De){re(De,ie)}),$e},at.prototype.load=function(){for(var Lt=[],Et=0;Et<arguments.length;Et++)Lt[Et]=arguments[Et];for(var jt=this._getContainerModuleHelpersFactory(),pe=0,$e=Lt;pe<$e.length;pe++){var ye=$e[pe],ie=jt(ye.id);ye.registry(ie.bindFunction,ie.unbindFunction,ie.isboundFunction,ie.rebindFunction)}},at.prototype.loadAsync=function(){for(var Lt=[],Et=0;Et<arguments.length;Et++)Lt[Et]=arguments[Et];return v(this,void 0,void 0,function(){var jt,pe,$e,ye,ie;return M(this,function(re){switch(re.label){case 0:jt=this._getContainerModuleHelpersFactory(),pe=0,$e=Lt,re.label=1;case 1:return pe<$e.length?(ye=$e[pe],ie=jt(ye.id),[4,ye.registry(ie.bindFunction,ie.unbindFunction,ie.isboundFunction,ie.rebindFunction)]):[3,4];case 2:re.sent(),re.label=3;case 3:return pe++,[3,1];case 4:return[2]}})})},at.prototype.unload=function(){for(var Lt=this,Et=[],jt=0;jt<arguments.length;jt++)Et[jt]=arguments[jt];var pe=function($e){return function(ye){return ye.moduleId===$e}};Et.forEach(function($e){var ye=pe($e.id);Lt._bindingDictionary.removeByCondition(ye)})},at.prototype.bind=function(Lt){var Et=this.options.defaultScope||Z.BindingScopeEnum.Transient,jt=new K.Binding(Lt,Et);return this._bindingDictionary.add(Lt,jt),new ke.BindingToSyntax(jt)},at.prototype.rebind=function(Lt){return this.unbind(Lt),this.bind(Lt)},at.prototype.unbind=function(Lt){try{this._bindingDictionary.remove(Lt)}catch(Et){throw new Error(N.CANNOT_UNBIND+" "+me.getServiceIdentifierAsString(Lt))}},at.prototype.unbindAll=function(){this._bindingDictionary=new Se.Lookup},at.prototype.isBound=function(Lt){var Et=this._bindingDictionary.hasKey(Lt);return!Et&&this.parent&&(Et=this.parent.isBound(Lt)),Et},at.prototype.isBoundNamed=function(Lt,Et){return this.isBoundTagged(Lt,B.NAMED_TAG,Et)},at.prototype.isBoundTagged=function(Lt,Et,jt){var pe=!1;if(this._bindingDictionary.hasKey(Lt)){var $e=this._bindingDictionary.get(Lt),ye=$.createMockRequest(this,Lt,Et,jt);pe=$e.some(function(ie){return ie.constraint(ye)})}return!pe&&this.parent&&(pe=this.parent.isBoundTagged(Lt,Et,jt)),pe},at.prototype.snapshot=function(){this._snapshots.push(Le.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},at.prototype.restore=function(){var Lt=this._snapshots.pop();if(Lt===void 0)throw new Error(N.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=Lt.bindings,this._middleware=Lt.middleware},at.prototype.createChild=function(Lt){var Et=new at(Lt||this.options);return Et.parent=this,Et},at.prototype.applyMiddleware=function(){for(var Lt=[],Et=0;Et<arguments.length;Et++)Lt[Et]=arguments[Et];this._appliedMiddleware=this._appliedMiddleware.concat(Lt);var jt=this._middleware?this._middleware:this._planAndResolve();this._middleware=Lt.reduce(function(pe,$e){return $e(pe)},jt)},at.prototype.applyCustomMetadataReader=function(Lt){this._metadataReader=Lt},at.prototype.get=function(Lt){return this._get(!1,!1,Z.TargetTypeEnum.Variable,Lt)},at.prototype.getTagged=function(Lt,Et,jt){return this._get(!1,!1,Z.TargetTypeEnum.Variable,Lt,Et,jt)},at.prototype.getNamed=function(Lt,Et){return this.getTagged(Lt,B.NAMED_TAG,Et)},at.prototype.getAll=function(Lt){return this._get(!0,!0,Z.TargetTypeEnum.Variable,Lt)},at.prototype.getAllTagged=function(Lt,Et,jt){return this._get(!1,!0,Z.TargetTypeEnum.Variable,Lt,Et,jt)},at.prototype.getAllNamed=function(Lt,Et){return this.getAllTagged(Lt,B.NAMED_TAG,Et)},at.prototype.resolve=function(Lt){var Et=this.createChild();return Et.bind(Lt).toSelf(),this._appliedMiddleware.forEach(function(jt){Et.applyMiddleware(jt)}),Et.get(Lt)},at.prototype._getContainerModuleHelpersFactory=function(){var Lt=this,Et=function(ie,re){ie._binding.moduleId=re},jt=function(ie){return function(re){var De=Lt.bind.bind(Lt),le=De(re);return Et(le,ie),le}},pe=function(ie){return function(re){var De=Lt.unbind.bind(Lt);De(re)}},$e=function(ie){return function(re){var De=Lt.isBound.bind(Lt);return De(re)}},ye=function(ie){return function(re){var De=Lt.rebind.bind(Lt),le=De(re);return Et(le,ie),le}};return function(ie){return{bindFunction:jt(ie),isboundFunction:$e(ie),rebindFunction:ye(ie),unbindFunction:pe(ie)}}},at.prototype._get=function(Lt,Et,jt,pe,$e,ye){var ie=null,re={avoidConstraints:Lt,contextInterceptor:function(De){return De},isMultiInject:Et,key:$e,serviceIdentifier:pe,targetType:jt,value:ye};if(this._middleware){if(ie=this._middleware(re),ie==null)throw new Error(N.INVALID_MIDDLEWARE_RETURN)}else ie=this._planAndResolve()(re);return ie},at.prototype._planAndResolve=function(){var Lt=this;return function(Et){var jt=$.plan(Lt._metadataReader,Lt,Et.isMultiInject,Et.targetType,Et.serviceIdentifier,Et.key,Et.value,Et.avoidConstraints);jt=Et.contextInterceptor(jt);var pe=U.resolve(jt);return pe}},at}();Ee.Container=et},33244:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.AsyncContainerModule=Ee.ContainerModule=void 0;var v=g(37791),M=function(){function K(N){this.id=v.id(),this.registry=N}return K}();Ee.ContainerModule=M;var c=function(){function K(N){this.id=v.id(),this.registry=N}return K}();Ee.AsyncContainerModule=c},85700:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.ContainerSnapshot=void 0;var g=function(){function v(){}return v.of=function(M,c){var K=new v;return K.bindings=M,K.middleware=c,K},v}();Ee.ContainerSnapshot=g},80175:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Lookup=void 0;var v=g(16674),M=function(){function c(){this._map=new Map}return c.prototype.getMap=function(){return this._map},c.prototype.add=function(K,N){if(K==null)throw new Error(v.NULL_ARGUMENT);if(N==null)throw new Error(v.NULL_ARGUMENT);var Z=this._map.get(K);Z!==void 0?(Z.push(N),this._map.set(K,Z)):this._map.set(K,[N])},c.prototype.get=function(K){if(K==null)throw new Error(v.NULL_ARGUMENT);var N=this._map.get(K);if(N!==void 0)return N;throw new Error(v.KEY_NOT_FOUND)},c.prototype.remove=function(K){if(K==null)throw new Error(v.NULL_ARGUMENT);if(!this._map.delete(K))throw new Error(v.KEY_NOT_FOUND)},c.prototype.removeByCondition=function(K){var N=this;this._map.forEach(function(Z,B){var L=Z.filter(function($){return!K($)});L.length>0?N._map.set(B,L):N._map.delete(B)})},c.prototype.hasKey=function(K){if(K==null)throw new Error(v.NULL_ARGUMENT);return this._map.has(K)},c.prototype.clone=function(){var K=new c;return this._map.forEach(function(N,Z){N.forEach(function(B){return K.add(Z,B.clone())})}),K},c.prototype.traverse=function(K){this._map.forEach(function(N,Z){K(Z,N)})},c}();Ee.Lookup=M},86700:function(vt,Ee,g){"use strict";var v;v={value:!0},v=v=v=v=v=v=Ee.GW=v=v=Ee.zY=v=v=v=v=v=Ee.f3=v=v=Ee.b2=v=v=v=v=v=Ee.W2=v=void 0;var M=g(6867);v=M;var c=g(51389);Object.defineProperty(Ee,"W2",{enumerable:!0,get:function(){return c.Container}});var K=g(28421);v={enumerable:!0,get:function(){return K.BindingScopeEnum}},v={enumerable:!0,get:function(){return K.BindingTypeEnum}},v={enumerable:!0,get:function(){return K.TargetTypeEnum}};var N=g(33244);v={enumerable:!0,get:function(){return N.AsyncContainerModule}},v={enumerable:!0,get:function(){return N.ContainerModule}};var Z=g(64315);Object.defineProperty(Ee,"b2",{enumerable:!0,get:function(){return Z.injectable}});var B=g(32052);v={enumerable:!0,get:function(){return B.tagged}};var L=g(38085);v={enumerable:!0,get:function(){return L.named}};var $=g(5744);Object.defineProperty(Ee,"f3",{enumerable:!0,get:function(){return $.inject}}),v={enumerable:!0,get:function(){return $.LazyServiceIdentifer}};var U=g(6515);v={enumerable:!0,get:function(){return U.optional}};var ke=g(86757);v={enumerable:!0,get:function(){return ke.unmanaged}};var We=g(71693);v={enumerable:!0,get:function(){return We.multiInject}};var me=g(55638);v={enumerable:!0,get:function(){return me.targetName}};var Le=g(7014);Object.defineProperty(Ee,"zY",{enumerable:!0,get:function(){return Le.postConstruct}});var Se=g(51377);v={enumerable:!0,get:function(){return Se.MetadataReader}};var et=g(37791);v={enumerable:!0,get:function(){return et.id}};var at=g(99934);Object.defineProperty(Ee,"GW",{enumerable:!0,get:function(){return at.decorate}});var Lt=g(80758);v={enumerable:!0,get:function(){return Lt.traverseAncerstors}},v={enumerable:!0,get:function(){return Lt.taggedConstraint}},v={enumerable:!0,get:function(){return Lt.namedConstraint}},v={enumerable:!0,get:function(){return Lt.typeConstraint}};var Et=g(55800);v={enumerable:!0,get:function(){return Et.getServiceIdentifierAsString}};var jt=g(70600);v={enumerable:!0,get:function(){return jt.multiBindToService}}},95228:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Context=void 0;var v=g(37791),M=function(){function c(K){this.id=v.id(),this.container=K}return c.prototype.addPlan=function(K){this.plan=K},c.prototype.setCurrentRequest=function(K){this.currentRequest=K},c}();Ee.Context=M},47738:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Metadata=void 0;var v=g(6867),M=function(){function c(K,N){this.key=K,this.value=N}return c.prototype.toString=function(){return this.key===v.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},c}();Ee.Metadata=M},51377:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.MetadataReader=void 0;var v=g(6867),M=function(){function c(){}return c.prototype.getConstructorMetadata=function(K){var N=Reflect.getMetadata(v.PARAM_TYPES,K),Z=Reflect.getMetadata(v.TAGGED,K);return{compilerGeneratedMetadata:N,userGeneratedMetadata:Z||{}}},c.prototype.getPropertiesMetadata=function(K){var N=Reflect.getMetadata(v.TAGGED_PROP,K)||[];return N},c}();Ee.MetadataReader=M},55314:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Plan=void 0;var g=function(){function v(M,c){this.parentContext=M,this.rootRequest=c}return v}();Ee.Plan=g},86311:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getBindingDictionary=Ee.createMockRequest=Ee.plan=void 0;var v=g(23184),M=g(16674),c=g(28421),K=g(6867),N=g(85265),Z=g(55800),B=g(95228),L=g(47738),$=g(55314),U=g(6e3),ke=g(6748),We=g(18924);function me(pe){return pe._bindingDictionary}Ee.getBindingDictionary=me;function Le(pe,$e,ye,ie,re,De){var le=pe?K.MULTI_INJECT_TAG:K.INJECT_TAG,ge=new L.Metadata(le,ye),ce=new We.Target($e,ie,ye,ge);if(re!==void 0){var je=new L.Metadata(re,De);ce.metadata.push(je)}return ce}function Se(pe,$e,ye,ie,re){var De=Lt(ye.container,re.serviceIdentifier),le=[];return De.length===v.BindingCount.NoBindingsAvailable&&ye.container.options.autoBindInjectable&&typeof re.serviceIdentifier=="function"&&pe.getConstructorMetadata(re.serviceIdentifier).compilerGeneratedMetadata&&(ye.container.bind(re.serviceIdentifier).toSelf(),De=Lt(ye.container,re.serviceIdentifier)),$e?le=De:le=De.filter(function(ge){var ce=new ke.Request(ge.serviceIdentifier,ye,ie,ge,re);return ge.constraint(ce)}),et(re.serviceIdentifier,le,re,ye.container),le}function et(pe,$e,ye,ie){switch($e.length){case v.BindingCount.NoBindingsAvailable:if(ye.isOptional())return $e;var re=Z.getServiceIdentifierAsString(pe),De=M.NOT_REGISTERED;throw De+=Z.listMetadataForTarget(re,ye),De+=Z.listRegisteredBindingsForServiceIdentifier(ie,re,Lt),new Error(De);case v.BindingCount.OnlyOneBindingAvailable:if(!ye.isArray())return $e;case v.BindingCount.MultipleBindingsAvailable:default:if(ye.isArray())return $e;var re=Z.getServiceIdentifierAsString(pe),De=M.AMBIGUOUS_MATCH+" "+re;throw De+=Z.listRegisteredBindingsForServiceIdentifier(ie,re,Lt),new Error(De)}}function at(pe,$e,ye,ie,re,De){var le,ge;if(re===null){le=Se(pe,$e,ie,null,De),ge=new ke.Request(ye,ie,null,le,De);var ce=new $.Plan(ie,ge);ie.addPlan(ce)}else le=Se(pe,$e,ie,re,De),ge=re.addChildRequest(De.serviceIdentifier,le,De);le.forEach(function(je){var J=null;if(De.isArray())J=ge.addChildRequest(je.serviceIdentifier,je,De);else{if(je.cache)return;J=ge}if(je.type===c.BindingTypeEnum.Instance&&je.implementationType!==null){var Me=U.getDependencies(pe,je.implementationType);if(!ie.container.options.skipBaseClassChecks){var ne=U.getBaseClassDependencyCount(pe,je.implementationType);if(Me.length<ne){var xe=M.ARGUMENTS_LENGTH_MISMATCH(U.getFunctionName(je.implementationType));throw new Error(xe)}}Me.forEach(function(Ne){at(pe,!1,Ne.serviceIdentifier,ie,J,Ne)})}})}function Lt(pe,$e){var ye=[],ie=me(pe);return ie.hasKey($e)?ye=ie.get($e):pe.parent!==null&&(ye=Lt(pe.parent,$e)),ye}function Et(pe,$e,ye,ie,re,De,le,ge){ge===void 0&&(ge=!1);var ce=new B.Context($e),je=Le(ye,ie,re,"",De,le);try{return at(pe,ge,re,ce,null,je),ce}catch(J){throw N.isStackOverflowExeption(J)&&ce.plan&&Z.circularDependencyToException(ce.plan.rootRequest),J}}Ee.plan=Et;function jt(pe,$e,ye,ie){var re=new We.Target(c.TargetTypeEnum.Variable,"",$e,new L.Metadata(ye,ie)),De=new B.Context(pe),le=new ke.Request($e,De,null,[],re);return le}Ee.createMockRequest=jt},88460:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.QueryableString=void 0;var g=function(){function v(M){this.str=M}return v.prototype.startsWith=function(M){return this.str.indexOf(M)===0},v.prototype.endsWith=function(M){var c="",K=M.split("").reverse().join("");return c=this.str.split("").reverse().join(""),this.startsWith.call({str:c},K)},v.prototype.contains=function(M){return this.str.indexOf(M)!==-1},v.prototype.equals=function(M){return this.str===M},v.prototype.value=function(){return this.str},v}();Ee.QueryableString=g},6e3:function(vt,Ee,g){"use strict";var v=this&&this.__spreadArray||function(Se,et){for(var at=0,Lt=et.length,Et=Se.length;at<Lt;at++,Et++)Se[Et]=et[at];return Se};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getFunctionName=Ee.getBaseClassDependencyCount=Ee.getDependencies=void 0;var M=g(5744),c=g(16674),K=g(28421),N=g(6867),Z=g(55800);Object.defineProperty(Ee,"getFunctionName",{enumerable:!0,get:function(){return Z.getFunctionName}});var B=g(18924);function L(Se,et){var at=Z.getFunctionName(et),Lt=$(Se,at,et,!1);return Lt}Ee.getDependencies=L;function $(Se,et,at,Lt){var Et=Se.getConstructorMetadata(at),jt=Et.compilerGeneratedMetadata;if(jt===void 0){var pe=c.MISSING_INJECTABLE_ANNOTATION+" "+et+".";throw new Error(pe)}var $e=Et.userGeneratedMetadata,ye=Object.keys($e),ie=at.length===0&&ye.length>0,re=ye.length>at.length,De=ie||re?ye.length:at.length,le=ke(Lt,et,jt,$e,De),ge=We(Se,at),ce=v(v([],le),ge);return ce}function U(Se,et,at,Lt,Et){var jt=Et[Se.toString()]||[],pe=Le(jt),$e=pe.unmanaged!==!0,ye=Lt[Se],ie=pe.inject||pe.multiInject;if(ye=ie||ye,ye instanceof M.LazyServiceIdentifer&&(ye=ye.unwrap()),$e){var re=ye===Object,De=ye===Function,le=ye===void 0,ge=re||De||le;if(!et&&ge){var ce=c.MISSING_INJECT_ANNOTATION+" argument "+Se+" in class "+at+".";throw new Error(ce)}var je=new B.Target(K.TargetTypeEnum.ConstructorArgument,pe.targetName,ye);return je.metadata=jt,je}return null}function ke(Se,et,at,Lt,Et){for(var jt=[],pe=0;pe<Et;pe++){var $e=pe,ye=U($e,Se,et,at,Lt);ye!==null&&jt.push(ye)}return jt}function We(Se,et){for(var at=Se.getPropertiesMetadata(et),Lt=[],Et=Object.keys(at),jt=0,pe=Et;jt<pe.length;jt++){var $e=pe[jt],ye=at[$e],ie=Le(at[$e]),re=ie.targetName||$e,De=ie.inject||ie.multiInject,le=new B.Target(K.TargetTypeEnum.ClassProperty,re,De);le.metadata=ye,Lt.push(le)}var ge=Object.getPrototypeOf(et.prototype).constructor;if(ge!==Object){var ce=We(Se,ge);Lt=v(v([],Lt),ce)}return Lt}function me(Se,et){var at=Object.getPrototypeOf(et.prototype).constructor;if(at!==Object){var Lt=Z.getFunctionName(at),Et=$(Se,Lt,at,!0),jt=Et.map(function(ye){return ye.metadata.filter(function(ie){return ie.key===N.UNMANAGED_TAG})}),pe=[].concat.apply([],jt).length,$e=Et.length-pe;return $e>0?$e:me(Se,at)}else return 0}Ee.getBaseClassDependencyCount=me;function Le(Se){var et={};return Se.forEach(function(at){et[at.key.toString()]=at.value}),{inject:et[N.INJECT_TAG],multiInject:et[N.MULTI_INJECT_TAG],targetName:et[N.NAME_TAG],unmanaged:et[N.UNMANAGED_TAG]}}},6748:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Request=void 0;var v=g(37791),M=function(){function c(K,N,Z,B,L){this.id=v.id(),this.serviceIdentifier=K,this.parentContext=N,this.parentRequest=Z,this.target=L,this.childRequests=[],this.bindings=Array.isArray(B)?B:[B],this.requestScope=Z===null?new Map:null}return c.prototype.addChildRequest=function(K,N,Z){var B=new c(K,this.parentContext,this,N,Z);return this.childRequests.push(B),B},c}();Ee.Request=M},18924:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.Target=void 0;var v=g(6867),M=g(37791),c=g(47738),K=g(88460),N=function(){function Z(B,L,$,U){this.id=M.id(),this.type=B,this.serviceIdentifier=$,this.name=new K.QueryableString(L||""),this.metadata=new Array;var ke=null;typeof U=="string"?ke=new c.Metadata(v.NAMED_TAG,U):U instanceof c.Metadata&&(ke=U),ke!==null&&this.metadata.push(ke)}return Z.prototype.hasTag=function(B){for(var L=0,$=this.metadata;L<$.length;L++){var U=$[L];if(U.key===B)return!0}return!1},Z.prototype.isArray=function(){return this.hasTag(v.MULTI_INJECT_TAG)},Z.prototype.matchesArray=function(B){return this.matchesTag(v.MULTI_INJECT_TAG)(B)},Z.prototype.isNamed=function(){return this.hasTag(v.NAMED_TAG)},Z.prototype.isTagged=function(){return this.metadata.some(function(B){return v.NON_CUSTOM_TAG_KEYS.every(function(L){return B.key!==L})})},Z.prototype.isOptional=function(){return this.matchesTag(v.OPTIONAL_TAG)(!0)},Z.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(B){return B.key===v.NAMED_TAG})[0]:null},Z.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(B){return v.NON_CUSTOM_TAG_KEYS.every(function(L){return B.key!==L})}):null},Z.prototype.matchesNamedTag=function(B){return this.matchesTag(v.NAMED_TAG)(B)},Z.prototype.matchesTag=function(B){var L=this;return function($){for(var U=0,ke=L.metadata;U<ke.length;U++){var We=ke[U];if(We.key===B&&We.value===$)return!0}return!1}},Z}();Ee.Target=N},52279:function(vt,Ee,g){"use strict";var v=this&&this.__spreadArray||function($,U){for(var ke=0,We=U.length,me=$.length;ke<We;ke++,me++)$[me]=U[ke];return $};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.resolveInstance=void 0;var M=g(16674),c=g(28421),K=g(6867);function N($,U,ke){var We=U.filter(function(Le){return Le.target!==null&&Le.target.type===c.TargetTypeEnum.ClassProperty}),me=We.map(ke);return We.forEach(function(Le,Se){var et="";et=Le.target.name.value();var at=me[Se];$[et]=at}),$}function Z($,U){return new($.bind.apply($,v([void 0],U)))}function B($,U){if(Reflect.hasMetadata(K.POST_CONSTRUCT,$)){var ke=Reflect.getMetadata(K.POST_CONSTRUCT,$);try{U[ke.value]()}catch(We){throw new Error(M.POST_CONSTRUCT_ERROR($.name,We.message))}}}function L($,U,ke){var We=null;if(U.length>0){var me=U.filter(function(Se){return Se.target!==null&&Se.target.type===c.TargetTypeEnum.ConstructorArgument}),Le=me.map(ke);We=Z($,Le),We=N(We,U,ke)}else We=new $;return B($,We),We}Ee.resolveInstance=L},31927:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.resolve=void 0;var v=g(16674),M=g(28421),c=g(85265),K=g(55800),N=g(52279),Z=function($,U,ke){try{return ke()}catch(We){throw c.isStackOverflowExeption(We)?new Error(v.CIRCULAR_DEPENDENCY_IN_FACTORY($,U.toString())):We}},B=function($){return function(U){U.parentContext.setCurrentRequest(U);var ke=U.bindings,We=U.childRequests,me=U.target&&U.target.isArray(),Le=!U.parentRequest||!U.parentRequest.target||!U.target||!U.parentRequest.target.matchesArray(U.target.serviceIdentifier);if(me&&Le)return We.map(function(jt){var pe=B($);return pe(jt)});var Se=null;if(U.target.isOptional()&&ke.length===0)return;var et=ke[0],at=et.scope===M.BindingScopeEnum.Singleton,Lt=et.scope===M.BindingScopeEnum.Request;if(at&&et.activated)return et.cache;if(Lt&&$!==null&&$.has(et.id))return $.get(et.id);if(et.type===M.BindingTypeEnum.ConstantValue)Se=et.cache,et.activated=!0;else if(et.type===M.BindingTypeEnum.Function)Se=et.cache,et.activated=!0;else if(et.type===M.BindingTypeEnum.Constructor)Se=et.implementationType;else if(et.type===M.BindingTypeEnum.DynamicValue&&et.dynamicValue!==null)Se=Z("toDynamicValue",et.serviceIdentifier,function(){return et.dynamicValue(U.parentContext)});else if(et.type===M.BindingTypeEnum.Factory&&et.factory!==null)Se=Z("toFactory",et.serviceIdentifier,function(){return et.factory(U.parentContext)});else if(et.type===M.BindingTypeEnum.Provider&&et.provider!==null)Se=Z("toProvider",et.serviceIdentifier,function(){return et.provider(U.parentContext)});else if(et.type===M.BindingTypeEnum.Instance&&et.implementationType!==null)Se=N.resolveInstance(et.implementationType,We,B($));else{var Et=K.getServiceIdentifierAsString(U.serviceIdentifier);throw new Error(v.INVALID_BINDING_TYPE+" "+Et)}return typeof et.onActivation=="function"&&(Se=et.onActivation(U.parentContext,Se)),at&&(et.cache=Se,et.activated=!0),Lt&&$!==null&&!$.has(et.id)&&$.set(et.id,Se),Se}};function L($){var U=B($.plan.rootRequest.requestScope);return U($.plan.rootRequest)}Ee.resolve=L},83366:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingInSyntax=void 0;var v=g(28421),M=g(71325),c=function(){function K(N){this._binding=N}return K.prototype.inRequestScope=function(){return this._binding.scope=v.BindingScopeEnum.Request,new M.BindingWhenOnSyntax(this._binding)},K.prototype.inSingletonScope=function(){return this._binding.scope=v.BindingScopeEnum.Singleton,new M.BindingWhenOnSyntax(this._binding)},K.prototype.inTransientScope=function(){return this._binding.scope=v.BindingScopeEnum.Transient,new M.BindingWhenOnSyntax(this._binding)},K}();Ee.BindingInSyntax=c},99812:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingInWhenOnSyntax=void 0;var v=g(83366),M=g(51811),c=g(98370),K=function(){function N(Z){this._binding=Z,this._bindingWhenSyntax=new c.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new M.BindingOnSyntax(this._binding),this._bindingInSyntax=new v.BindingInSyntax(Z)}return N.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},N.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},N.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},N.prototype.when=function(Z){return this._bindingWhenSyntax.when(Z)},N.prototype.whenTargetNamed=function(Z){return this._bindingWhenSyntax.whenTargetNamed(Z)},N.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},N.prototype.whenTargetTagged=function(Z,B){return this._bindingWhenSyntax.whenTargetTagged(Z,B)},N.prototype.whenInjectedInto=function(Z){return this._bindingWhenSyntax.whenInjectedInto(Z)},N.prototype.whenParentNamed=function(Z){return this._bindingWhenSyntax.whenParentNamed(Z)},N.prototype.whenParentTagged=function(Z,B){return this._bindingWhenSyntax.whenParentTagged(Z,B)},N.prototype.whenAnyAncestorIs=function(Z){return this._bindingWhenSyntax.whenAnyAncestorIs(Z)},N.prototype.whenNoAncestorIs=function(Z){return this._bindingWhenSyntax.whenNoAncestorIs(Z)},N.prototype.whenAnyAncestorNamed=function(Z){return this._bindingWhenSyntax.whenAnyAncestorNamed(Z)},N.prototype.whenAnyAncestorTagged=function(Z,B){return this._bindingWhenSyntax.whenAnyAncestorTagged(Z,B)},N.prototype.whenNoAncestorNamed=function(Z){return this._bindingWhenSyntax.whenNoAncestorNamed(Z)},N.prototype.whenNoAncestorTagged=function(Z,B){return this._bindingWhenSyntax.whenNoAncestorTagged(Z,B)},N.prototype.whenAnyAncestorMatches=function(Z){return this._bindingWhenSyntax.whenAnyAncestorMatches(Z)},N.prototype.whenNoAncestorMatches=function(Z){return this._bindingWhenSyntax.whenNoAncestorMatches(Z)},N.prototype.onActivation=function(Z){return this._bindingOnSyntax.onActivation(Z)},N}();Ee.BindingInWhenOnSyntax=K},51811:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingOnSyntax=void 0;var v=g(98370),M=function(){function c(K){this._binding=K}return c.prototype.onActivation=function(K){return this._binding.onActivation=K,new v.BindingWhenSyntax(this._binding)},c}();Ee.BindingOnSyntax=M},51860:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingToSyntax=void 0;var v=g(16674),M=g(28421),c=g(99812),K=g(71325),N=function(){function Z(B){this._binding=B}return Z.prototype.to=function(B){return this._binding.type=M.BindingTypeEnum.Instance,this._binding.implementationType=B,new c.BindingInWhenOnSyntax(this._binding)},Z.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+v.INVALID_TO_SELF_VALUE);var B=this._binding.serviceIdentifier;return this.to(B)},Z.prototype.toConstantValue=function(B){return this._binding.type=M.BindingTypeEnum.ConstantValue,this._binding.cache=B,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=M.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},Z.prototype.toDynamicValue=function(B){return this._binding.type=M.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=B,this._binding.implementationType=null,new c.BindingInWhenOnSyntax(this._binding)},Z.prototype.toConstructor=function(B){return this._binding.type=M.BindingTypeEnum.Constructor,this._binding.implementationType=B,this._binding.scope=M.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},Z.prototype.toFactory=function(B){return this._binding.type=M.BindingTypeEnum.Factory,this._binding.factory=B,this._binding.scope=M.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},Z.prototype.toFunction=function(B){if(typeof B!="function")throw new Error(v.INVALID_FUNCTION_BINDING);var L=this.toConstantValue(B);return this._binding.type=M.BindingTypeEnum.Function,this._binding.scope=M.BindingScopeEnum.Singleton,L},Z.prototype.toAutoFactory=function(B){return this._binding.type=M.BindingTypeEnum.Factory,this._binding.factory=function(L){var $=function(){return L.container.get(B)};return $},this._binding.scope=M.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},Z.prototype.toProvider=function(B){return this._binding.type=M.BindingTypeEnum.Provider,this._binding.provider=B,this._binding.scope=M.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},Z.prototype.toService=function(B){this.toDynamicValue(function(L){return L.container.get(B)})},Z}();Ee.BindingToSyntax=N},71325:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingWhenOnSyntax=void 0;var v=g(51811),M=g(98370),c=function(){function K(N){this._binding=N,this._bindingWhenSyntax=new M.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new v.BindingOnSyntax(this._binding)}return K.prototype.when=function(N){return this._bindingWhenSyntax.when(N)},K.prototype.whenTargetNamed=function(N){return this._bindingWhenSyntax.whenTargetNamed(N)},K.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},K.prototype.whenTargetTagged=function(N,Z){return this._bindingWhenSyntax.whenTargetTagged(N,Z)},K.prototype.whenInjectedInto=function(N){return this._bindingWhenSyntax.whenInjectedInto(N)},K.prototype.whenParentNamed=function(N){return this._bindingWhenSyntax.whenParentNamed(N)},K.prototype.whenParentTagged=function(N,Z){return this._bindingWhenSyntax.whenParentTagged(N,Z)},K.prototype.whenAnyAncestorIs=function(N){return this._bindingWhenSyntax.whenAnyAncestorIs(N)},K.prototype.whenNoAncestorIs=function(N){return this._bindingWhenSyntax.whenNoAncestorIs(N)},K.prototype.whenAnyAncestorNamed=function(N){return this._bindingWhenSyntax.whenAnyAncestorNamed(N)},K.prototype.whenAnyAncestorTagged=function(N,Z){return this._bindingWhenSyntax.whenAnyAncestorTagged(N,Z)},K.prototype.whenNoAncestorNamed=function(N){return this._bindingWhenSyntax.whenNoAncestorNamed(N)},K.prototype.whenNoAncestorTagged=function(N,Z){return this._bindingWhenSyntax.whenNoAncestorTagged(N,Z)},K.prototype.whenAnyAncestorMatches=function(N){return this._bindingWhenSyntax.whenAnyAncestorMatches(N)},K.prototype.whenNoAncestorMatches=function(N){return this._bindingWhenSyntax.whenNoAncestorMatches(N)},K.prototype.onActivation=function(N){return this._bindingOnSyntax.onActivation(N)},K}();Ee.BindingWhenOnSyntax=c},98370:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.BindingWhenSyntax=void 0;var v=g(51811),M=g(80758),c=function(){function K(N){this._binding=N}return K.prototype.when=function(N){return this._binding.constraint=N,new v.BindingOnSyntax(this._binding)},K.prototype.whenTargetNamed=function(N){return this._binding.constraint=M.namedConstraint(N),new v.BindingOnSyntax(this._binding)},K.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(N){var Z=N.target!==null&&!N.target.isNamed()&&!N.target.isTagged();return Z},new v.BindingOnSyntax(this._binding)},K.prototype.whenTargetTagged=function(N,Z){return this._binding.constraint=M.taggedConstraint(N)(Z),new v.BindingOnSyntax(this._binding)},K.prototype.whenInjectedInto=function(N){return this._binding.constraint=function(Z){return M.typeConstraint(N)(Z.parentRequest)},new v.BindingOnSyntax(this._binding)},K.prototype.whenParentNamed=function(N){return this._binding.constraint=function(Z){return M.namedConstraint(N)(Z.parentRequest)},new v.BindingOnSyntax(this._binding)},K.prototype.whenParentTagged=function(N,Z){return this._binding.constraint=function(B){return M.taggedConstraint(N)(Z)(B.parentRequest)},new v.BindingOnSyntax(this._binding)},K.prototype.whenAnyAncestorIs=function(N){return this._binding.constraint=function(Z){return M.traverseAncerstors(Z,M.typeConstraint(N))},new v.BindingOnSyntax(this._binding)},K.prototype.whenNoAncestorIs=function(N){return this._binding.constraint=function(Z){return!M.traverseAncerstors(Z,M.typeConstraint(N))},new v.BindingOnSyntax(this._binding)},K.prototype.whenAnyAncestorNamed=function(N){return this._binding.constraint=function(Z){return M.traverseAncerstors(Z,M.namedConstraint(N))},new v.BindingOnSyntax(this._binding)},K.prototype.whenNoAncestorNamed=function(N){return this._binding.constraint=function(Z){return!M.traverseAncerstors(Z,M.namedConstraint(N))},new v.BindingOnSyntax(this._binding)},K.prototype.whenAnyAncestorTagged=function(N,Z){return this._binding.constraint=function(B){return M.traverseAncerstors(B,M.taggedConstraint(N)(Z))},new v.BindingOnSyntax(this._binding)},K.prototype.whenNoAncestorTagged=function(N,Z){return this._binding.constraint=function(B){return!M.traverseAncerstors(B,M.taggedConstraint(N)(Z))},new v.BindingOnSyntax(this._binding)},K.prototype.whenAnyAncestorMatches=function(N){return this._binding.constraint=function(Z){return M.traverseAncerstors(Z,N)},new v.BindingOnSyntax(this._binding)},K.prototype.whenNoAncestorMatches=function(N){return this._binding.constraint=function(Z){return!M.traverseAncerstors(Z,N)},new v.BindingOnSyntax(this._binding)},K}();Ee.BindingWhenSyntax=c},80758:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.typeConstraint=Ee.namedConstraint=Ee.taggedConstraint=Ee.traverseAncerstors=void 0;var v=g(6867),M=g(47738),c=function(B,L){var $=B.parentRequest;return $!==null?L($)?!0:c($,L):!1};Ee.traverseAncerstors=c;var K=function(B){return function(L){var $=function(U){return U!==null&&U.target!==null&&U.target.matchesTag(B)(L)};return $.metaData=new M.Metadata(B,L),$}};Ee.taggedConstraint=K;var N=K(v.NAMED_TAG);Ee.namedConstraint=N;var Z=function(B){return function(L){var $=null;if(L!==null)if($=L.bindings[0],typeof B=="string"){var U=$.serviceIdentifier;return U===B}else{var ke=L.bindings[0].implementationType;return B===ke}return!1}};Ee.typeConstraint=Z},70600:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.multiBindToService=void 0;var g=function(v){return function(M){return function(){for(var c=[],K=0;K<arguments.length;K++)c[K]=arguments[K];return c.forEach(function(N){return v.bind(N).toService(M)})}}};Ee.multiBindToService=g},85265:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.isStackOverflowExeption=void 0;var v=g(16674);function M(c){return c instanceof RangeError||c.message===v.STACK_OVERFLOW}Ee.isStackOverflowExeption=M},37791:function(vt,Ee){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.id=void 0;var g=0;function v(){return g++}Ee.id=v},55800:function(vt,Ee,g){"use strict";Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.circularDependencyToException=Ee.listMetadataForTarget=Ee.listRegisteredBindingsForServiceIdentifier=Ee.getServiceIdentifierAsString=Ee.getFunctionName=void 0;var v=g(16674);function M($){if(typeof $=="function"){var U=$;return U.name}else{if(typeof $=="symbol")return $.toString();var U=$;return U}}Ee.getServiceIdentifierAsString=M;function c($,U,ke){var We="",me=ke($,U);return me.length!==0&&(We=`
Registered bindings:`,me.forEach(function(Le){var Se="Object";Le.implementationType!==null&&(Se=L(Le.implementationType)),We=We+`
 `+Se,Le.constraint.metaData&&(We=We+" - "+Le.constraint.metaData)})),We}Ee.listRegisteredBindingsForServiceIdentifier=c;function K($,U){return $.parentRequest===null?!1:$.parentRequest.serviceIdentifier===U?!0:K($.parentRequest,U)}function N($){function U(We,me){me===void 0&&(me=[]);var Le=M(We.serviceIdentifier);return me.push(Le),We.parentRequest!==null?U(We.parentRequest,me):me}var ke=U($);return ke.reverse().join(" --> ")}function Z($){$.childRequests.forEach(function(U){if(K(U,U.serviceIdentifier)){var ke=N(U);throw new Error(v.CIRCULAR_DEPENDENCY+" "+ke)}else Z(U)})}Ee.circularDependencyToException=Z;function B($,U){if(U.isTagged()||U.isNamed()){var ke="",We=U.getNamedTag(),me=U.getCustomTags();return We!==null&&(ke+=We.toString()+`
`),me!==null&&me.forEach(function(Le){ke+=Le.toString()+`
`})," "+$+`
 `+$+" - "+ke}else return" "+$}Ee.listMetadataForTarget=B;function L($){if($.name)return $.name;var U=$.toString(),ke=U.match(/^function\s*([^\s(]+)/);return ke?ke[1]:"Anonymous function: "+U}Ee.getFunctionName=L},55733:function(vt,Ee,g){var v=g(48764).lW;(function(M){vt.exports=M()})(function(){return function M(c,K,N){function Z($,U){if(!K[$]){if(!c[$]){var ke=void 0;if(!U&&ke)return require($,!0);if(B)return B($,!0);var We=new Error("Cannot find module '"+$+"'");throw We.code="MODULE_NOT_FOUND",We}var me=K[$]={exports:{}};c[$][0].call(me.exports,function(Le){var Se=c[$][1][Le];return Z(Se||Le)},me,me.exports,M,c,K,N)}return K[$].exports}for(var B=void 0,L=0;L<N.length;L++)Z(N[L]);return Z}({1:[function(M,c,K){(function(N){(function(Z){typeof K=="object"&&c!==void 0?c.exports=Z():(typeof window!="undefined"?window:N!==void 0?N:typeof self!="undefined"?self:this).JSZip=Z()})(function(){return function Z(B,L,$){function U(me,Le){if(!L[me]){if(!B[me]){var Se=typeof M=="function"&&M;if(!Le&&Se)return Se(me,!0);if(ke)return ke(me,!0);var et=new Error("Cannot find module '"+me+"'");throw et.code="MODULE_NOT_FOUND",et}var at=L[me]={exports:{}};B[me][0].call(at.exports,function(Lt){return U(B[me][1][Lt]||Lt)},at,at.exports,Z,B,L,$)}return L[me].exports}for(var ke=typeof M=="function"&&M,We=0;We<$.length;We++)U($[We]);return U}({1:[function(Z,B,L){(function($){(function(U){typeof L=="object"&&B!==void 0?B.exports=U():(typeof window!="undefined"?window:$!==void 0?$:typeof self!="undefined"?self:this).JSZip=U()})(function(){return function U(ke,We,me){function Le(at,Lt){if(!We[at]){if(!ke[at]){var Et=typeof Z=="function"&&Z;if(!Lt&&Et)return Et(at,!0);if(Se)return Se(at,!0);var jt=new Error("Cannot find module '"+at+"'");throw jt.code="MODULE_NOT_FOUND",jt}var pe=We[at]={exports:{}};ke[at][0].call(pe.exports,function($e){return Le(ke[at][1][$e]||$e)},pe,pe.exports,U,ke,We,me)}return We[at].exports}for(var Se=typeof Z=="function"&&Z,et=0;et<me.length;et++)Le(me[et]);return Le}({1:[function(U,ke,We){(function(me){(function(Le){typeof We=="object"&&ke!==void 0?ke.exports=Le():(typeof window!="undefined"?window:me!==void 0?me:typeof self!="undefined"?self:this).JSZip=Le()})(function(){return function Le(Se,et,at){function Lt(pe,$e){if(!et[pe]){if(!Se[pe]){var ye=typeof U=="function"&&U;if(!$e&&ye)return ye(pe,!0);if(Et)return Et(pe,!0);var ie=new Error("Cannot find module '"+pe+"'");throw ie.code="MODULE_NOT_FOUND",ie}var re=et[pe]={exports:{}};Se[pe][0].call(re.exports,function(De){return Lt(Se[pe][1][De]||De)},re,re.exports,Le,Se,et,at)}return et[pe].exports}for(var Et=typeof U=="function"&&U,jt=0;jt<at.length;jt++)Lt(at[jt]);return Lt}({1:[function(Le,Se,et){(function(at){(function(Lt){typeof et=="object"&&Se!==void 0?Se.exports=Lt():(typeof window!="undefined"?window:at!==void 0?at:typeof self!="undefined"?self:this).JSZip=Lt()})(function(){return function Lt(Et,jt,pe){function $e(re,De){if(!jt[re]){if(!Et[re]){var le=typeof Le=="function"&&Le;if(!De&&le)return le(re,!0);if(ye)return ye(re,!0);var ge=new Error("Cannot find module '"+re+"'");throw ge.code="MODULE_NOT_FOUND",ge}var ce=jt[re]={exports:{}};Et[re][0].call(ce.exports,function(je){return $e(Et[re][1][je]||je)},ce,ce.exports,Lt,Et,jt,pe)}return jt[re].exports}for(var ye=typeof Le=="function"&&Le,ie=0;ie<pe.length;ie++)$e(pe[ie]);return $e}({1:[function(Lt,Et,jt){(function(pe){(function($e){typeof jt=="object"&&Et!==void 0?Et.exports=$e():(typeof window!="undefined"?window:pe!==void 0?pe:typeof self!="undefined"?self:this).JSZip=$e()})(function(){return function $e(ye,ie,re){function De(ce,je){if(!ie[ce]){if(!ye[ce]){var J=typeof Lt=="function"&&Lt;if(!je&&J)return J(ce,!0);if(le)return le(ce,!0);var Me=new Error("Cannot find module '"+ce+"'");throw Me.code="MODULE_NOT_FOUND",Me}var ne=ie[ce]={exports:{}};ye[ce][0].call(ne.exports,function(xe){return De(ye[ce][1][xe]||xe)},ne,ne.exports,$e,ye,ie,re)}return ie[ce].exports}for(var le=typeof Lt=="function"&&Lt,ge=0;ge<re.length;ge++)De(re[ge]);return De}({1:[function($e,ye,ie){"use strict";var re=$e("./utils"),De=$e("./support"),le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ie.encode=function(ge){for(var ce,je,J,Me,ne,xe,Ne,Pe=[],He=0,lt=ge.length,ft=lt,It=re.getTypeOf(ge)!=="string";He<ge.length;)ft=lt-He,J=It?(ce=ge[He++],je=He<lt?ge[He++]:0,He<lt?ge[He++]:0):(ce=ge.charCodeAt(He++),je=He<lt?ge.charCodeAt(He++):0,He<lt?ge.charCodeAt(He++):0),Me=ce>>2,ne=(3&ce)<<4|je>>4,xe=1<ft?(15&je)<<2|J>>6:64,Ne=2<ft?63&J:64,Pe.push(le.charAt(Me)+le.charAt(ne)+le.charAt(xe)+le.charAt(Ne));return Pe.join("")},ie.decode=function(ge){var ce,je,J,Me,ne,xe,Ne=0,Pe=0;if(ge.substr(0,5)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var He,lt=3*(ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(ge.charAt(ge.length-1)===le.charAt(64)&&lt--,ge.charAt(ge.length-2)===le.charAt(64)&&lt--,lt%1!=0)throw new Error("Invalid base64 input, bad content length.");for(He=De.uint8array?new Uint8Array(0|lt):new Array(0|lt);Ne<ge.length;)ce=le.indexOf(ge.charAt(Ne++))<<2|(Me=le.indexOf(ge.charAt(Ne++)))>>4,je=(15&Me)<<4|(ne=le.indexOf(ge.charAt(Ne++)))>>2,J=(3&ne)<<6|(xe=le.indexOf(ge.charAt(Ne++))),He[Pe++]=ce,ne!==64&&(He[Pe++]=je),xe!==64&&(He[Pe++]=J);return He}},{"./support":30,"./utils":32}],2:[function($e,ye,ie){"use strict";var re=$e("./external"),De=$e("./stream/DataWorker"),le=$e("./stream/Crc32Probe"),ge=$e("./stream/DataLengthProbe");function ce(je,J,Me,ne,xe){this.compressedSize=je,this.uncompressedSize=J,this.crc32=Me,this.compression=ne,this.compressedContent=xe}ce.prototype={getContentWorker:function(){var je=new De(re.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new ge("data_length")),J=this;return je.on("end",function(){if(this.streamInfo.data_length!==J.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),je},getCompressedWorker:function(){return new De(re.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},ce.createWorkerFrom=function(je,J,Me){return je.pipe(new le).pipe(new ge("uncompressedSize")).pipe(J.compressWorker(Me)).pipe(new ge("compressedSize")).withStreamInfo("compression",J)},ye.exports=ce},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function($e,ye,ie){"use strict";var re=$e("./stream/GenericWorker");ie.STORE={magic:"\0\0",compressWorker:function(De){return new re("STORE compression")},uncompressWorker:function(){return new re("STORE decompression")}},ie.DEFLATE=$e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function($e,ye,ie){"use strict";var re=$e("./utils"),De=function(){for(var le,ge=[],ce=0;ce<256;ce++){le=ce;for(var je=0;je<8;je++)le=1&le?3988292384^le>>>1:le>>>1;ge[ce]=le}return ge}();ye.exports=function(le,ge){return le!==void 0&&le.length?re.getTypeOf(le)!=="string"?function(ce,je,J){var Me=De,ne=0+J;ce^=-1;for(var xe=0;xe<ne;xe++)ce=ce>>>8^Me[255&(ce^je[xe])];return-1^ce}(0|ge,le,le.length):function(ce,je,J){var Me=De,ne=0+J;ce^=-1;for(var xe=0;xe<ne;xe++)ce=ce>>>8^Me[255&(ce^je.charCodeAt(xe))];return-1^ce}(0|ge,le,le.length):0}},{"./utils":32}],5:[function($e,ye,ie){"use strict";ie.base64=!1,ie.binary=!1,ie.dir=!1,ie.createFolders=!0,ie.date=null,ie.compression=null,ie.compressionOptions=null,ie.comment=null,ie.unixPermissions=null,ie.dosPermissions=null},{}],6:[function($e,ye,ie){"use strict";var re;re=typeof Promise!="undefined"?Promise:$e("lie"),ye.exports={Promise:re}},{lie:37}],7:[function($e,ye,ie){"use strict";var re=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",De=$e("pako"),le=$e("./utils"),ge=$e("./stream/GenericWorker"),ce=re?"uint8array":"array";function je(J,Me){ge.call(this,"FlateWorker/"+J),this._pako=null,this._pakoAction=J,this._pakoOptions=Me,this.meta={}}ie.magic="\b\0",le.inherits(je,ge),je.prototype.processChunk=function(J){this.meta=J.meta,this._pako===null&&this._createPako(),this._pako.push(le.transformTo(ce,J.data),!1)},je.prototype.flush=function(){ge.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},je.prototype.cleanUp=function(){ge.prototype.cleanUp.call(this),this._pako=null},je.prototype._createPako=function(){this._pako=new De[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var J=this;this._pako.onData=function(Me){J.push({data:Me,meta:J.meta})}},ie.compressWorker=function(J){return new je("Deflate",J)},ie.uncompressWorker=function(){return new je("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function($e,ye,ie){"use strict";function re(ne,xe){var Ne,Pe="";for(Ne=0;Ne<xe;Ne++)Pe+=String.fromCharCode(255&ne),ne>>>=8;return Pe}function De(ne,xe,Ne,Pe,He,lt){var ft,It,fe=ne.file,_t=ne.compression,Ye=lt!==ce.utf8encode,Ot=le.transformTo("string",lt(fe.name)),mt=le.transformTo("string",ce.utf8encode(fe.name)),Rt=fe.comment,pt=le.transformTo("string",lt(Rt)),Ge=le.transformTo("string",ce.utf8encode(Rt)),wt=mt.length!==fe.name.length,ee=Ge.length!==Rt.length,Re="",dt="",D="",q=fe.dir,G=fe.date,O={crc32:0,compressedSize:0,uncompressedSize:0};xe&&!Ne||(O.crc32=ne.crc32,O.compressedSize=ne.compressedSize,O.uncompressedSize=ne.uncompressedSize);var k=0;xe&&(k|=8),Ye||!wt&&!ee||(k|=2048);var X,W=0,ae=0;q&&(W|=16),He==="UNIX"?(ae=798,W|=((X=fe.unixPermissions)||(X=q?16893:33204),(65535&X)<<16)):(ae=20,W|=63&(fe.dosPermissions||0)),ft=G.getUTCHours(),ft<<=6,ft|=G.getUTCMinutes(),ft<<=5,ft|=G.getUTCSeconds()/2,It=G.getUTCFullYear()-1980,It<<=4,It|=G.getUTCMonth()+1,It<<=5,It|=G.getUTCDate(),wt&&(Re+="up"+re((dt=re(1,1)+re(je(Ot),4)+mt).length,2)+dt),ee&&(Re+="uc"+re((D=re(1,1)+re(je(pt),4)+Ge).length,2)+D);var Be="";return Be+=`
\0`,Be+=re(k,2),Be+=_t.magic,Be+=re(ft,2),Be+=re(It,2),Be+=re(O.crc32,4),Be+=re(O.compressedSize,4),Be+=re(O.uncompressedSize,4),Be+=re(Ot.length,2),Be+=re(Re.length,2),{fileRecord:J.LOCAL_FILE_HEADER+Be+Ot+Re,dirRecord:J.CENTRAL_FILE_HEADER+re(ae,2)+Be+re(pt.length,2)+"\0\0\0\0"+re(W,4)+re(Pe,4)+Ot+Re+pt}}var le=$e("../utils"),ge=$e("../stream/GenericWorker"),ce=$e("../utf8"),je=$e("../crc32"),J=$e("../signature");function Me(ne,xe,Ne,Pe){ge.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=xe,this.zipPlatform=Ne,this.encodeFileName=Pe,this.streamFiles=ne,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}le.inherits(Me,ge),Me.prototype.push=function(ne){var xe=ne.meta.percent||0,Ne=this.entriesCount,Pe=this._sources.length;this.accumulate?this.contentBuffer.push(ne):(this.bytesWritten+=ne.data.length,ge.prototype.push.call(this,{data:ne.data,meta:{currentFile:this.currentFile,percent:Ne?(xe+100*(Ne-Pe-1))/Ne:100}}))},Me.prototype.openedSource=function(ne){this.currentSourceOffset=this.bytesWritten,this.currentFile=ne.file.name;var xe=this.streamFiles&&!ne.file.dir;if(xe){var Ne=De(ne,xe,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Ne.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Me.prototype.closedSource=function(ne){this.accumulate=!1;var xe,Ne=this.streamFiles&&!ne.file.dir,Pe=De(ne,Ne,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Pe.dirRecord),Ne)this.push({data:(xe=ne,J.DATA_DESCRIPTOR+re(xe.crc32,4)+re(xe.compressedSize,4)+re(xe.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Pe.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Me.prototype.flush=function(){for(var ne=this.bytesWritten,xe=0;xe<this.dirRecords.length;xe++)this.push({data:this.dirRecords[xe],meta:{percent:100}});var Ne,Pe,He,lt,ft,It,fe=this.bytesWritten-ne,_t=(Ne=this.dirRecords.length,Pe=fe,He=ne,lt=this.zipComment,ft=this.encodeFileName,It=le.transformTo("string",ft(lt)),J.CENTRAL_DIRECTORY_END+"\0\0\0\0"+re(Ne,2)+re(Ne,2)+re(Pe,4)+re(He,4)+re(It.length,2)+It);this.push({data:_t,meta:{percent:100}})},Me.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Me.prototype.registerPrevious=function(ne){this._sources.push(ne);var xe=this;return ne.on("data",function(Ne){xe.processChunk(Ne)}),ne.on("end",function(){xe.closedSource(xe.previous.streamInfo),xe._sources.length?xe.prepareNextSource():xe.end()}),ne.on("error",function(Ne){xe.error(Ne)}),this},Me.prototype.resume=function(){return!!ge.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Me.prototype.error=function(ne){var xe=this._sources;if(!ge.prototype.error.call(this,ne))return!1;for(var Ne=0;Ne<xe.length;Ne++)try{xe[Ne].error(ne)}catch(Pe){}return!0},Me.prototype.lock=function(){ge.prototype.lock.call(this);for(var ne=this._sources,xe=0;xe<ne.length;xe++)ne[xe].lock()},ye.exports=Me},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function($e,ye,ie){"use strict";var re=$e("../compressions"),De=$e("./ZipFileWorker");ie.generateWorker=function(le,ge,ce){var je=new De(ge.streamFiles,ce,ge.platform,ge.encodeFileName),J=0;try{le.forEach(function(Me,ne){J++;var xe=function(lt,ft){var It=lt||ft,fe=re[It];if(!fe)throw new Error(It+" is not a valid compression method !");return fe}(ne.options.compression,ge.compression),Ne=ne.options.compressionOptions||ge.compressionOptions||{},Pe=ne.dir,He=ne.date;ne._compressWorker(xe,Ne).withStreamInfo("file",{name:Me,dir:Pe,date:He,comment:ne.comment||"",unixPermissions:ne.unixPermissions,dosPermissions:ne.dosPermissions}).pipe(je)}),je.entriesCount=J}catch(Me){je.error(Me)}return je}},{"../compressions":3,"./ZipFileWorker":8}],10:[function($e,ye,ie){"use strict";function re(){if(!(this instanceof re))return new re;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var De=new re;for(var le in this)typeof this[le]!="function"&&(De[le]=this[le]);return De}}(re.prototype=$e("./object")).loadAsync=$e("./load"),re.support=$e("./support"),re.defaults=$e("./defaults"),re.version="3.5.0",re.loadAsync=function(De,le){return new re().loadAsync(De,le)},re.external=$e("./external"),ye.exports=re},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function($e,ye,ie){"use strict";var re=$e("./utils"),De=$e("./external"),le=$e("./utf8"),ge=$e("./zipEntries"),ce=$e("./stream/Crc32Probe"),je=$e("./nodejsUtils");function J(Me){return new De.Promise(function(ne,xe){var Ne=Me.decompressed.getContentWorker().pipe(new ce);Ne.on("error",function(Pe){xe(Pe)}).on("end",function(){Ne.streamInfo.crc32!==Me.decompressed.crc32?xe(new Error("Corrupted zip : CRC32 mismatch")):ne()}).resume()})}ye.exports=function(Me,ne){var xe=this;return ne=re.extend(ne||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:le.utf8decode}),je.isNode&&je.isStream(Me)?De.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):re.prepareContent("the loaded zip file",Me,!0,ne.optimizedBinaryString,ne.base64).then(function(Ne){var Pe=new ge(ne);return Pe.load(Ne),Pe}).then(function(Ne){var Pe=[De.Promise.resolve(Ne)],He=Ne.files;if(ne.checkCRC32)for(var lt=0;lt<He.length;lt++)Pe.push(J(He[lt]));return De.Promise.all(Pe)}).then(function(Ne){for(var Pe=Ne.shift(),He=Pe.files,lt=0;lt<He.length;lt++){var ft=He[lt];xe.file(ft.fileNameStr,ft.decompressed,{binary:!0,optimizedBinaryString:!0,date:ft.date,dir:ft.dir,comment:ft.fileCommentStr.length?ft.fileCommentStr:null,unixPermissions:ft.unixPermissions,dosPermissions:ft.dosPermissions,createFolders:ne.createFolders})}return Pe.zipComment.length&&(xe.comment=Pe.zipComment),xe})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function($e,ye,ie){"use strict";var re=$e("../utils"),De=$e("../stream/GenericWorker");function le(ge,ce){De.call(this,"Nodejs stream input adapter for "+ge),this._upstreamEnded=!1,this._bindStream(ce)}re.inherits(le,De),le.prototype._bindStream=function(ge){var ce=this;(this._stream=ge).pause(),ge.on("data",function(je){ce.push({data:je,meta:{percent:0}})}).on("error",function(je){ce.isPaused?this.generatedError=je:ce.error(je)}).on("end",function(){ce.isPaused?ce._upstreamEnded=!0:ce.end()})},le.prototype.pause=function(){return!!De.prototype.pause.call(this)&&(this._stream.pause(),!0)},le.prototype.resume=function(){return!!De.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},ye.exports=le},{"../stream/GenericWorker":28,"../utils":32}],13:[function($e,ye,ie){"use strict";var re=$e("readable-stream").Readable;function De(le,ge,ce){re.call(this,ge),this._helper=le;var je=this;le.on("data",function(J,Me){je.push(J)||je._helper.pause(),ce&&ce(Me)}).on("error",function(J){je.emit("error",J)}).on("end",function(){je.push(null)})}$e("../utils").inherits(De,re),De.prototype._read=function(){this._helper.resume()},ye.exports=De},{"../utils":32,"readable-stream":16}],14:[function($e,ye,ie){"use strict";ye.exports={isNode:typeof v!="undefined",newBufferFrom:function(re,De){if(v.from&&v.from!==Uint8Array.from)return v.from(re,De);if(typeof re=="number")throw new Error('The "data" argument must not be a number');return new v(re,De)},allocBuffer:function(re){if(v.alloc)return v.alloc(re);var De=new v(re);return De.fill(0),De},isBuffer:function(re){return v.isBuffer(re)},isStream:function(re){return re&&typeof re.on=="function"&&typeof re.pause=="function"&&typeof re.resume=="function"}}},{}],15:[function($e,ye,ie){"use strict";function re(It,fe,_t){var Ye,Ot=ge.getTypeOf(fe),mt=ge.extend(_t||{},J);mt.date=mt.date||new Date,mt.compression!==null&&(mt.compression=mt.compression.toUpperCase()),typeof mt.unixPermissions=="string"&&(mt.unixPermissions=parseInt(mt.unixPermissions,8)),mt.unixPermissions&&16384&mt.unixPermissions&&(mt.dir=!0),mt.dosPermissions&&16&mt.dosPermissions&&(mt.dir=!0),mt.dir&&(It=De(It)),mt.createFolders&&(Ye=function(wt){wt.slice(-1)==="/"&&(wt=wt.substring(0,wt.length-1));var ee=wt.lastIndexOf("/");return 0<ee?wt.substring(0,ee):""}(It))&&He.call(this,Ye,!0);var Rt,pt=Ot==="string"&&mt.binary===!1&&mt.base64===!1;_t&&_t.binary!==void 0||(mt.binary=!pt),(fe instanceof Me&&fe.uncompressedSize===0||mt.dir||!fe||fe.length===0)&&(mt.base64=!1,mt.binary=!0,fe="",mt.compression="STORE",Ot="string"),Rt=fe instanceof Me||fe instanceof ce?fe:Ne.isNode&&Ne.isStream(fe)?new Pe(It,fe):ge.prepareContent(It,fe,mt.binary,mt.optimizedBinaryString,mt.base64);var Ge=new ne(It,Rt,mt);this.files[It]=Ge}function De(It){return It.slice(-1)!=="/"&&(It+="/"),It}var le=$e("./utf8"),ge=$e("./utils"),ce=$e("./stream/GenericWorker"),je=$e("./stream/StreamHelper"),J=$e("./defaults"),Me=$e("./compressedObject"),ne=$e("./zipObject"),xe=$e("./generate"),Ne=$e("./nodejsUtils"),Pe=$e("./nodejs/NodejsStreamInputAdapter"),He=function(It,fe){return fe=fe!==void 0?fe:J.createFolders,It=De(It),this.files[It]||re.call(this,It,null,{dir:!0,createFolders:fe}),this.files[It]};function lt(It){return Object.prototype.toString.call(It)==="[object RegExp]"}var ft={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(It){var fe,_t,Ye;for(fe in this.files)this.files.hasOwnProperty(fe)&&(Ye=this.files[fe],(_t=fe.slice(this.root.length,fe.length))&&fe.slice(0,this.root.length)===this.root&&It(_t,Ye))},filter:function(It){var fe=[];return this.forEach(function(_t,Ye){It(_t,Ye)&&fe.push(Ye)}),fe},file:function(It,fe,_t){if(arguments.length!==1)return It=this.root+It,re.call(this,It,fe,_t),this;if(lt(It)){var Ye=It;return this.filter(function(mt,Rt){return!Rt.dir&&Ye.test(mt)})}var Ot=this.files[this.root+It];return Ot&&!Ot.dir?Ot:null},folder:function(It){if(!It)return this;if(lt(It))return this.filter(function(Ot,mt){return mt.dir&&It.test(Ot)});var fe=this.root+It,_t=He.call(this,fe),Ye=this.clone();return Ye.root=_t.name,Ye},remove:function(It){It=this.root+It;var fe=this.files[It];if(fe||(It.slice(-1)!=="/"&&(It+="/"),fe=this.files[It]),fe&&!fe.dir)delete this.files[It];else for(var _t=this.filter(function(Ot,mt){return mt.name.slice(0,It.length)===It}),Ye=0;Ye<_t.length;Ye++)delete this.files[_t[Ye].name];return this},generate:function(It){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(It){var fe,_t={};try{if((_t=ge.extend(It||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:le.utf8encode})).type=_t.type.toLowerCase(),_t.compression=_t.compression.toUpperCase(),_t.type==="binarystring"&&(_t.type="string"),!_t.type)throw new Error("No output type specified.");ge.checkSupport(_t.type),_t.platform!=="darwin"&&_t.platform!=="freebsd"&&_t.platform!=="linux"&&_t.platform!=="sunos"||(_t.platform="UNIX"),_t.platform==="win32"&&(_t.platform="DOS");var Ye=_t.comment||this.comment||"";fe=xe.generateWorker(this,_t,Ye)}catch(Ot){(fe=new ce("error")).error(Ot)}return new je(fe,_t.type||"string",_t.mimeType)},generateAsync:function(It,fe){return this.generateInternalStream(It).accumulate(fe)},generateNodeStream:function(It,fe){return(It=It||{}).type||(It.type="nodebuffer"),this.generateInternalStream(It).toNodejsStream(fe)}};ye.exports=ft},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function($e,ye,ie){ye.exports=$e("stream")},{stream:void 0}],17:[function($e,ye,ie){"use strict";var re=$e("./DataReader");function De(le){re.call(this,le);for(var ge=0;ge<this.data.length;ge++)le[ge]=255&le[ge]}$e("../utils").inherits(De,re),De.prototype.byteAt=function(le){return this.data[this.zero+le]},De.prototype.lastIndexOfSignature=function(le){for(var ge=le.charCodeAt(0),ce=le.charCodeAt(1),je=le.charCodeAt(2),J=le.charCodeAt(3),Me=this.length-4;0<=Me;--Me)if(this.data[Me]===ge&&this.data[Me+1]===ce&&this.data[Me+2]===je&&this.data[Me+3]===J)return Me-this.zero;return-1},De.prototype.readAndCheckSignature=function(le){var ge=le.charCodeAt(0),ce=le.charCodeAt(1),je=le.charCodeAt(2),J=le.charCodeAt(3),Me=this.readData(4);return ge===Me[0]&&ce===Me[1]&&je===Me[2]&&J===Me[3]},De.prototype.readData=function(le){if(this.checkOffset(le),le===0)return[];var ge=this.data.slice(this.zero+this.index,this.zero+this.index+le);return this.index+=le,ge},ye.exports=De},{"../utils":32,"./DataReader":18}],18:[function($e,ye,ie){"use strict";var re=$e("../utils");function De(le){this.data=le,this.length=le.length,this.index=0,this.zero=0}De.prototype={checkOffset:function(le){this.checkIndex(this.index+le)},checkIndex:function(le){if(this.length<this.zero+le||le<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+le+"). Corrupted zip ?")},setIndex:function(le){this.checkIndex(le),this.index=le},skip:function(le){this.setIndex(this.index+le)},byteAt:function(le){},readInt:function(le){var ge,ce=0;for(this.checkOffset(le),ge=this.index+le-1;ge>=this.index;ge--)ce=(ce<<8)+this.byteAt(ge);return this.index+=le,ce},readString:function(le){return re.transformTo("string",this.readData(le))},readData:function(le){},lastIndexOfSignature:function(le){},readAndCheckSignature:function(le){},readDate:function(){var le=this.readInt(4);return new Date(Date.UTC(1980+(le>>25&127),(le>>21&15)-1,le>>16&31,le>>11&31,le>>5&63,(31&le)<<1))}},ye.exports=De},{"../utils":32}],19:[function($e,ye,ie){"use strict";var re=$e("./Uint8ArrayReader");function De(le){re.call(this,le)}$e("../utils").inherits(De,re),De.prototype.readData=function(le){this.checkOffset(le);var ge=this.data.slice(this.zero+this.index,this.zero+this.index+le);return this.index+=le,ge},ye.exports=De},{"../utils":32,"./Uint8ArrayReader":21}],20:[function($e,ye,ie){"use strict";var re=$e("./DataReader");function De(le){re.call(this,le)}$e("../utils").inherits(De,re),De.prototype.byteAt=function(le){return this.data.charCodeAt(this.zero+le)},De.prototype.lastIndexOfSignature=function(le){return this.data.lastIndexOf(le)-this.zero},De.prototype.readAndCheckSignature=function(le){return le===this.readData(4)},De.prototype.readData=function(le){this.checkOffset(le);var ge=this.data.slice(this.zero+this.index,this.zero+this.index+le);return this.index+=le,ge},ye.exports=De},{"../utils":32,"./DataReader":18}],21:[function($e,ye,ie){"use strict";var re=$e("./ArrayReader");function De(le){re.call(this,le)}$e("../utils").inherits(De,re),De.prototype.readData=function(le){if(this.checkOffset(le),le===0)return new Uint8Array(0);var ge=this.data.subarray(this.zero+this.index,this.zero+this.index+le);return this.index+=le,ge},ye.exports=De},{"../utils":32,"./ArrayReader":17}],22:[function($e,ye,ie){"use strict";var re=$e("../utils"),De=$e("../support"),le=$e("./ArrayReader"),ge=$e("./StringReader"),ce=$e("./NodeBufferReader"),je=$e("./Uint8ArrayReader");ye.exports=function(J){var Me=re.getTypeOf(J);return re.checkSupport(Me),Me!=="string"||De.uint8array?Me==="nodebuffer"?new ce(J):De.uint8array?new je(re.transformTo("uint8array",J)):new le(re.transformTo("array",J)):new ge(J)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function($e,ye,ie){"use strict";ie.LOCAL_FILE_HEADER="PK",ie.CENTRAL_FILE_HEADER="PK",ie.CENTRAL_DIRECTORY_END="PK",ie.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",ie.ZIP64_CENTRAL_DIRECTORY_END="PK",ie.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function($e,ye,ie){"use strict";var re=$e("./GenericWorker"),De=$e("../utils");function le(ge){re.call(this,"ConvertWorker to "+ge),this.destType=ge}De.inherits(le,re),le.prototype.processChunk=function(ge){this.push({data:De.transformTo(this.destType,ge.data),meta:ge.meta})},ye.exports=le},{"../utils":32,"./GenericWorker":28}],25:[function($e,ye,ie){"use strict";var re=$e("./GenericWorker"),De=$e("../crc32");function le(){re.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}$e("../utils").inherits(le,re),le.prototype.processChunk=function(ge){this.streamInfo.crc32=De(ge.data,this.streamInfo.crc32||0),this.push(ge)},ye.exports=le},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function($e,ye,ie){"use strict";var re=$e("../utils"),De=$e("./GenericWorker");function le(ge){De.call(this,"DataLengthProbe for "+ge),this.propName=ge,this.withStreamInfo(ge,0)}re.inherits(le,De),le.prototype.processChunk=function(ge){if(ge){var ce=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=ce+ge.data.length}De.prototype.processChunk.call(this,ge)},ye.exports=le},{"../utils":32,"./GenericWorker":28}],27:[function($e,ye,ie){"use strict";var re=$e("../utils"),De=$e("./GenericWorker");function le(ge){De.call(this,"DataWorker");var ce=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,ge.then(function(je){ce.dataIsReady=!0,ce.data=je,ce.max=je&&je.length||0,ce.type=re.getTypeOf(je),ce.isPaused||ce._tickAndRepeat()},function(je){ce.error(je)})}re.inherits(le,De),le.prototype.cleanUp=function(){De.prototype.cleanUp.call(this),this.data=null},le.prototype.resume=function(){return!!De.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,re.delay(this._tickAndRepeat,[],this)),!0)},le.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(re.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},le.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var ge=null,ce=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":ge=this.data.substring(this.index,ce);break;case"uint8array":ge=this.data.subarray(this.index,ce);break;case"array":case"nodebuffer":ge=this.data.slice(this.index,ce)}return this.index=ce,this.push({data:ge,meta:{percent:this.max?this.index/this.max*100:0}})},ye.exports=le},{"../utils":32,"./GenericWorker":28}],28:[function($e,ye,ie){"use strict";function re(De){this.name=De||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}re.prototype={push:function(De){this.emit("data",De)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(De){this.emit("error",De)}return!0},error:function(De){return!this.isFinished&&(this.isPaused?this.generatedError=De:(this.isFinished=!0,this.emit("error",De),this.previous&&this.previous.error(De),this.cleanUp()),!0)},on:function(De,le){return this._listeners[De].push(le),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(De,le){if(this._listeners[De])for(var ge=0;ge<this._listeners[De].length;ge++)this._listeners[De][ge].call(this,le)},pipe:function(De){return De.registerPrevious(this)},registerPrevious:function(De){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=De.streamInfo,this.mergeStreamInfo(),this.previous=De;var le=this;return De.on("data",function(ge){le.processChunk(ge)}),De.on("end",function(){le.end()}),De.on("error",function(ge){le.error(ge)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var De=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),De=!0),this.previous&&this.previous.resume(),!De},flush:function(){},processChunk:function(De){this.push(De)},withStreamInfo:function(De,le){return this.extraStreamInfo[De]=le,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var De in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(De)&&(this.streamInfo[De]=this.extraStreamInfo[De])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var De="Worker "+this.name;return this.previous?this.previous+" -> "+De:De}},ye.exports=re},{}],29:[function($e,ye,ie){"use strict";var re=$e("../utils"),De=$e("./ConvertWorker"),le=$e("./GenericWorker"),ge=$e("../base64"),ce=$e("../support"),je=$e("../external"),J=null;if(ce.nodestream)try{J=$e("../nodejs/NodejsStreamOutputAdapter")}catch(ne){}function Me(ne,xe,Ne){var Pe=xe;switch(xe){case"blob":case"arraybuffer":Pe="uint8array";break;case"base64":Pe="string"}try{this._internalType=Pe,this._outputType=xe,this._mimeType=Ne,re.checkSupport(Pe),this._worker=ne.pipe(new De(Pe)),ne.lock()}catch(He){this._worker=new le("error"),this._worker.error(He)}}Me.prototype={accumulate:function(ne){return xe=this,Ne=ne,new je.Promise(function(Pe,He){var lt=[],ft=xe._internalType,It=xe._outputType,fe=xe._mimeType;xe.on("data",function(_t,Ye){lt.push(_t),Ne&&Ne(Ye)}).on("error",function(_t){lt=[],He(_t)}).on("end",function(){try{var _t=function(Ye,Ot,mt){switch(Ye){case"blob":return re.newBlob(re.transformTo("arraybuffer",Ot),mt);case"base64":return ge.encode(Ot);default:return re.transformTo(Ye,Ot)}}(It,function(Ye,Ot){var mt,Rt=0,pt=null,Ge=0;for(mt=0;mt<Ot.length;mt++)Ge+=Ot[mt].length;switch(Ye){case"string":return Ot.join("");case"array":return Array.prototype.concat.apply([],Ot);case"uint8array":for(pt=new Uint8Array(Ge),mt=0;mt<Ot.length;mt++)pt.set(Ot[mt],Rt),Rt+=Ot[mt].length;return pt;case"nodebuffer":return v.concat(Ot);default:throw new Error("concat : unsupported type '"+Ye+"'")}}(ft,lt),fe);Pe(_t)}catch(Ye){He(Ye)}lt=[]}).resume()});var xe,Ne},on:function(ne,xe){var Ne=this;return ne==="data"?this._worker.on(ne,function(Pe){xe.call(Ne,Pe.data,Pe.meta)}):this._worker.on(ne,function(){re.delay(xe,arguments,Ne)}),this},resume:function(){return re.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(ne){if(re.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new J(this,{objectMode:this._outputType!=="nodebuffer"},ne)}},ye.exports=Me},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function($e,ye,ie){"use strict";if(ie.base64=!0,ie.array=!0,ie.string=!0,ie.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",ie.nodebuffer=typeof v!="undefined",ie.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")ie.blob=!1;else{var re=new ArrayBuffer(0);try{ie.blob=new Blob([re],{type:"application/zip"}).size===0}catch(le){try{var De=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);De.append(re),ie.blob=De.getBlob("application/zip").size===0}catch(ge){ie.blob=!1}}}try{ie.nodestream=!!$e("readable-stream").Readable}catch(le){ie.nodestream=!1}},{"readable-stream":16}],31:[function($e,ye,ie){"use strict";for(var re=$e("./utils"),De=$e("./support"),le=$e("./nodejsUtils"),ge=$e("./stream/GenericWorker"),ce=new Array(256),je=0;je<256;je++)ce[je]=252<=je?6:248<=je?5:240<=je?4:224<=je?3:192<=je?2:1;function J(){ge.call(this,"utf-8 decode"),this.leftOver=null}function Me(){ge.call(this,"utf-8 encode")}ce[254]=ce[254]=1,ie.utf8encode=function(ne){return De.nodebuffer?le.newBufferFrom(ne,"utf-8"):function(xe){var Ne,Pe,He,lt,ft,It=xe.length,fe=0;for(lt=0;lt<It;lt++)(64512&(Pe=xe.charCodeAt(lt)))==55296&&lt+1<It&&(64512&(He=xe.charCodeAt(lt+1)))==56320&&(Pe=65536+(Pe-55296<<10)+(He-56320),lt++),fe+=Pe<128?1:Pe<2048?2:Pe<65536?3:4;for(Ne=De.uint8array?new Uint8Array(fe):new Array(fe),lt=ft=0;ft<fe;lt++)(64512&(Pe=xe.charCodeAt(lt)))==55296&&lt+1<It&&(64512&(He=xe.charCodeAt(lt+1)))==56320&&(Pe=65536+(Pe-55296<<10)+(He-56320),lt++),Pe<128?Ne[ft++]=Pe:(Pe<2048?Ne[ft++]=192|Pe>>>6:(Pe<65536?Ne[ft++]=224|Pe>>>12:(Ne[ft++]=240|Pe>>>18,Ne[ft++]=128|Pe>>>12&63),Ne[ft++]=128|Pe>>>6&63),Ne[ft++]=128|63&Pe);return Ne}(ne)},ie.utf8decode=function(ne){return De.nodebuffer?re.transformTo("nodebuffer",ne).toString("utf-8"):function(xe){var Ne,Pe,He,lt,ft=xe.length,It=new Array(2*ft);for(Ne=Pe=0;Ne<ft;)if((He=xe[Ne++])<128)It[Pe++]=He;else if(4<(lt=ce[He]))It[Pe++]=65533,Ne+=lt-1;else{for(He&=lt===2?31:lt===3?15:7;1<lt&&Ne<ft;)He=He<<6|63&xe[Ne++],lt--;1<lt?It[Pe++]=65533:He<65536?It[Pe++]=He:(He-=65536,It[Pe++]=55296|He>>10&1023,It[Pe++]=56320|1023&He)}return It.length!==Pe&&(It.subarray?It=It.subarray(0,Pe):It.length=Pe),re.applyFromCharCode(It)}(ne=re.transformTo(De.uint8array?"uint8array":"array",ne))},re.inherits(J,ge),J.prototype.processChunk=function(ne){var xe=re.transformTo(De.uint8array?"uint8array":"array",ne.data);if(this.leftOver&&this.leftOver.length){if(De.uint8array){var Ne=xe;(xe=new Uint8Array(Ne.length+this.leftOver.length)).set(this.leftOver,0),xe.set(Ne,this.leftOver.length)}else xe=this.leftOver.concat(xe);this.leftOver=null}var Pe=function(lt,ft){var It;for((ft=ft||lt.length)>lt.length&&(ft=lt.length),It=ft-1;0<=It&&(192&lt[It])==128;)It--;return It<0||It===0?ft:It+ce[lt[It]]>ft?It:ft}(xe),He=xe;Pe!==xe.length&&(De.uint8array?(He=xe.subarray(0,Pe),this.leftOver=xe.subarray(Pe,xe.length)):(He=xe.slice(0,Pe),this.leftOver=xe.slice(Pe,xe.length))),this.push({data:ie.utf8decode(He),meta:ne.meta})},J.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:ie.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},ie.Utf8DecodeWorker=J,re.inherits(Me,ge),Me.prototype.processChunk=function(ne){this.push({data:ie.utf8encode(ne.data),meta:ne.meta})},ie.Utf8EncodeWorker=Me},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function($e,ye,ie){"use strict";var re=$e("./support"),De=$e("./base64"),le=$e("./nodejsUtils"),ge=$e("set-immediate-shim"),ce=$e("./external");function je(Pe){return Pe}function J(Pe,He){for(var lt=0;lt<Pe.length;++lt)He[lt]=255&Pe.charCodeAt(lt);return He}ie.newBlob=function(Pe,He){ie.checkSupport("blob");try{return new Blob([Pe],{type:He})}catch(ft){try{var lt=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return lt.append(Pe),lt.getBlob(He)}catch(It){throw new Error("Bug : can't construct the Blob.")}}};var Me={stringifyByChunk:function(Pe,He,lt){var ft=[],It=0,fe=Pe.length;if(fe<=lt)return String.fromCharCode.apply(null,Pe);for(;It<fe;)He==="array"||He==="nodebuffer"?ft.push(String.fromCharCode.apply(null,Pe.slice(It,Math.min(It+lt,fe)))):ft.push(String.fromCharCode.apply(null,Pe.subarray(It,Math.min(It+lt,fe)))),It+=lt;return ft.join("")},stringifyByChar:function(Pe){for(var He="",lt=0;lt<Pe.length;lt++)He+=String.fromCharCode(Pe[lt]);return He},applyCanBeUsed:{uint8array:function(){try{return re.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(Pe){return!1}}(),nodebuffer:function(){try{return re.nodebuffer&&String.fromCharCode.apply(null,le.allocBuffer(1)).length===1}catch(Pe){return!1}}()}};function ne(Pe){var He=65536,lt=ie.getTypeOf(Pe),ft=!0;if(lt==="uint8array"?ft=Me.applyCanBeUsed.uint8array:lt==="nodebuffer"&&(ft=Me.applyCanBeUsed.nodebuffer),ft)for(;1<He;)try{return Me.stringifyByChunk(Pe,lt,He)}catch(It){He=Math.floor(He/2)}return Me.stringifyByChar(Pe)}function xe(Pe,He){for(var lt=0;lt<Pe.length;lt++)He[lt]=Pe[lt];return He}ie.applyFromCharCode=ne;var Ne={};Ne.string={string:je,array:function(Pe){return J(Pe,new Array(Pe.length))},arraybuffer:function(Pe){return Ne.string.uint8array(Pe).buffer},uint8array:function(Pe){return J(Pe,new Uint8Array(Pe.length))},nodebuffer:function(Pe){return J(Pe,le.allocBuffer(Pe.length))}},Ne.array={string:ne,array:je,arraybuffer:function(Pe){return new Uint8Array(Pe).buffer},uint8array:function(Pe){return new Uint8Array(Pe)},nodebuffer:function(Pe){return le.newBufferFrom(Pe)}},Ne.arraybuffer={string:function(Pe){return ne(new Uint8Array(Pe))},array:function(Pe){return xe(new Uint8Array(Pe),new Array(Pe.byteLength))},arraybuffer:je,uint8array:function(Pe){return new Uint8Array(Pe)},nodebuffer:function(Pe){return le.newBufferFrom(new Uint8Array(Pe))}},Ne.uint8array={string:ne,array:function(Pe){return xe(Pe,new Array(Pe.length))},arraybuffer:function(Pe){return Pe.buffer},uint8array:je,nodebuffer:function(Pe){return le.newBufferFrom(Pe)}},Ne.nodebuffer={string:ne,array:function(Pe){return xe(Pe,new Array(Pe.length))},arraybuffer:function(Pe){return Ne.nodebuffer.uint8array(Pe).buffer},uint8array:function(Pe){return xe(Pe,new Uint8Array(Pe.length))},nodebuffer:je},ie.transformTo=function(Pe,He){if(He=He||"",!Pe)return He;ie.checkSupport(Pe);var lt=ie.getTypeOf(He);return Ne[lt][Pe](He)},ie.getTypeOf=function(Pe){return typeof Pe=="string"?"string":Object.prototype.toString.call(Pe)==="[object Array]"?"array":re.nodebuffer&&le.isBuffer(Pe)?"nodebuffer":re.uint8array&&Pe instanceof Uint8Array?"uint8array":re.arraybuffer&&Pe instanceof ArrayBuffer?"arraybuffer":void 0},ie.checkSupport=function(Pe){if(!re[Pe.toLowerCase()])throw new Error(Pe+" is not supported by this platform")},ie.MAX_VALUE_16BITS=65535,ie.MAX_VALUE_32BITS=-1,ie.pretty=function(Pe){var He,lt,ft="";for(lt=0;lt<(Pe||"").length;lt++)ft+="\\x"+((He=Pe.charCodeAt(lt))<16?"0":"")+He.toString(16).toUpperCase();return ft},ie.delay=function(Pe,He,lt){ge(function(){Pe.apply(lt||null,He||[])})},ie.inherits=function(Pe,He){function lt(){}lt.prototype=He.prototype,Pe.prototype=new lt},ie.extend=function(){var Pe,He,lt={};for(Pe=0;Pe<arguments.length;Pe++)for(He in arguments[Pe])arguments[Pe].hasOwnProperty(He)&&lt[He]===void 0&&(lt[He]=arguments[Pe][He]);return lt},ie.prepareContent=function(Pe,He,lt,ft,It){return ce.Promise.resolve(He).then(function(fe){return re.blob&&(fe instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(fe))!==-1)&&typeof FileReader!="undefined"?new ce.Promise(function(_t,Ye){var Ot=new FileReader;Ot.onload=function(mt){_t(mt.target.result)},Ot.onerror=function(mt){Ye(mt.target.error)},Ot.readAsArrayBuffer(fe)}):fe}).then(function(fe){var _t,Ye=ie.getTypeOf(fe);return Ye?(Ye==="arraybuffer"?fe=ie.transformTo("uint8array",fe):Ye==="string"&&(It?fe=De.decode(fe):lt&&ft!==!0&&(fe=J(_t=fe,re.uint8array?new Uint8Array(_t.length):new Array(_t.length)))),fe):ce.Promise.reject(new Error("Can't read the data of '"+Pe+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function($e,ye,ie){"use strict";var re=$e("./reader/readerFor"),De=$e("./utils"),le=$e("./signature"),ge=$e("./zipEntry"),ce=($e("./utf8"),$e("./support"));function je(J){this.files=[],this.loadOptions=J}je.prototype={checkSignature:function(J){if(!this.reader.readAndCheckSignature(J)){this.reader.index-=4;var Me=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+De.pretty(Me)+", expected "+De.pretty(J)+")")}},isSignature:function(J,Me){var ne=this.reader.index;this.reader.setIndex(J);var xe=this.reader.readString(4)===Me;return this.reader.setIndex(ne),xe},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var J=this.reader.readData(this.zipCommentLength),Me=ce.uint8array?"uint8array":"array",ne=De.transformTo(Me,J);this.zipComment=this.loadOptions.decodeFileName(ne)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var J,Me,ne,xe=this.zip64EndOfCentralSize-44;0<xe;)J=this.reader.readInt(2),Me=this.reader.readInt(4),ne=this.reader.readData(Me),this.zip64ExtensibleData[J]={id:J,length:Me,value:ne}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var J,Me;for(J=0;J<this.files.length;J++)Me=this.files[J],this.reader.setIndex(Me.localHeaderOffset),this.checkSignature(le.LOCAL_FILE_HEADER),Me.readLocalPart(this.reader),Me.handleUTF8(),Me.processAttributes()},readCentralDir:function(){var J;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(le.CENTRAL_FILE_HEADER);)(J=new ge({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(J);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var J=this.reader.lastIndexOfSignature(le.CENTRAL_DIRECTORY_END);if(J<0)throw this.isSignature(0,le.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(J);var Me=J;if(this.checkSignature(le.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===De.MAX_VALUE_16BITS||this.diskWithCentralDirStart===De.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===De.MAX_VALUE_16BITS||this.centralDirRecords===De.MAX_VALUE_16BITS||this.centralDirSize===De.MAX_VALUE_32BITS||this.centralDirOffset===De.MAX_VALUE_32BITS){if(this.zip64=!0,(J=this.reader.lastIndexOfSignature(le.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(J),this.checkSignature(le.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,le.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(le.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(le.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var ne=this.centralDirOffset+this.centralDirSize;this.zip64&&(ne+=20,ne+=12+this.zip64EndOfCentralSize);var xe=Me-ne;if(0<xe)this.isSignature(Me,le.CENTRAL_FILE_HEADER)||(this.reader.zero=xe);else if(xe<0)throw new Error("Corrupted zip: missing "+Math.abs(xe)+" bytes.")},prepareReader:function(J){this.reader=re(J)},load:function(J){this.prepareReader(J),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},ye.exports=je},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function($e,ye,ie){"use strict";var re=$e("./reader/readerFor"),De=$e("./utils"),le=$e("./compressedObject"),ge=$e("./crc32"),ce=$e("./utf8"),je=$e("./compressions"),J=$e("./support");function Me(ne,xe){this.options=ne,this.loadOptions=xe}Me.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(ne){var xe,Ne;if(ne.skip(22),this.fileNameLength=ne.readInt(2),Ne=ne.readInt(2),this.fileName=ne.readData(this.fileNameLength),ne.skip(Ne),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((xe=function(Pe){for(var He in je)if(je.hasOwnProperty(He)&&je[He].magic===Pe)return je[He];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+De.pretty(this.compressionMethod)+" unknown (inner file : "+De.transformTo("string",this.fileName)+")");this.decompressed=new le(this.compressedSize,this.uncompressedSize,this.crc32,xe,ne.readData(this.compressedSize))},readCentralPart:function(ne){this.versionMadeBy=ne.readInt(2),ne.skip(2),this.bitFlag=ne.readInt(2),this.compressionMethod=ne.readString(2),this.date=ne.readDate(),this.crc32=ne.readInt(4),this.compressedSize=ne.readInt(4),this.uncompressedSize=ne.readInt(4);var xe=ne.readInt(2);if(this.extraFieldsLength=ne.readInt(2),this.fileCommentLength=ne.readInt(2),this.diskNumberStart=ne.readInt(2),this.internalFileAttributes=ne.readInt(2),this.externalFileAttributes=ne.readInt(4),this.localHeaderOffset=ne.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");ne.skip(xe),this.readExtraFields(ne),this.parseZIP64ExtraField(ne),this.fileComment=ne.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var ne=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),ne==0&&(this.dosPermissions=63&this.externalFileAttributes),ne==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(ne){if(this.extraFields[1]){var xe=re(this.extraFields[1].value);this.uncompressedSize===De.MAX_VALUE_32BITS&&(this.uncompressedSize=xe.readInt(8)),this.compressedSize===De.MAX_VALUE_32BITS&&(this.compressedSize=xe.readInt(8)),this.localHeaderOffset===De.MAX_VALUE_32BITS&&(this.localHeaderOffset=xe.readInt(8)),this.diskNumberStart===De.MAX_VALUE_32BITS&&(this.diskNumberStart=xe.readInt(4))}},readExtraFields:function(ne){var xe,Ne,Pe,He=ne.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});ne.index+4<He;)xe=ne.readInt(2),Ne=ne.readInt(2),Pe=ne.readData(Ne),this.extraFields[xe]={id:xe,length:Ne,value:Pe};ne.setIndex(He)},handleUTF8:function(){var ne=J.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=ce.utf8decode(this.fileName),this.fileCommentStr=ce.utf8decode(this.fileComment);else{var xe=this.findExtraFieldUnicodePath();if(xe!==null)this.fileNameStr=xe;else{var Ne=De.transformTo(ne,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Ne)}var Pe=this.findExtraFieldUnicodeComment();if(Pe!==null)this.fileCommentStr=Pe;else{var He=De.transformTo(ne,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(He)}}},findExtraFieldUnicodePath:function(){var ne=this.extraFields[28789];if(ne){var xe=re(ne.value);return xe.readInt(1)!==1||ge(this.fileName)!==xe.readInt(4)?null:ce.utf8decode(xe.readData(ne.length-5))}return null},findExtraFieldUnicodeComment:function(){var ne=this.extraFields[25461];if(ne){var xe=re(ne.value);return xe.readInt(1)!==1||ge(this.fileComment)!==xe.readInt(4)?null:ce.utf8decode(xe.readData(ne.length-5))}return null}},ye.exports=Me},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function($e,ye,ie){"use strict";function re(xe,Ne,Pe){this.name=xe,this.dir=Pe.dir,this.date=Pe.date,this.comment=Pe.comment,this.unixPermissions=Pe.unixPermissions,this.dosPermissions=Pe.dosPermissions,this._data=Ne,this._dataBinary=Pe.binary,this.options={compression:Pe.compression,compressionOptions:Pe.compressionOptions}}var De=$e("./stream/StreamHelper"),le=$e("./stream/DataWorker"),ge=$e("./utf8"),ce=$e("./compressedObject"),je=$e("./stream/GenericWorker");re.prototype={internalStream:function(xe){var Ne=null,Pe="string";try{if(!xe)throw new Error("No output type specified.");var He=(Pe=xe.toLowerCase())==="string"||Pe==="text";Pe!=="binarystring"&&Pe!=="text"||(Pe="string"),Ne=this._decompressWorker();var lt=!this._dataBinary;lt&&!He&&(Ne=Ne.pipe(new ge.Utf8EncodeWorker)),!lt&&He&&(Ne=Ne.pipe(new ge.Utf8DecodeWorker))}catch(ft){(Ne=new je("error")).error(ft)}return new De(Ne,Pe,"")},async:function(xe,Ne){return this.internalStream(xe).accumulate(Ne)},nodeStream:function(xe,Ne){return this.internalStream(xe||"nodebuffer").toNodejsStream(Ne)},_compressWorker:function(xe,Ne){if(this._data instanceof ce&&this._data.compression.magic===xe.magic)return this._data.getCompressedWorker();var Pe=this._decompressWorker();return this._dataBinary||(Pe=Pe.pipe(new ge.Utf8EncodeWorker)),ce.createWorkerFrom(Pe,xe,Ne)},_decompressWorker:function(){return this._data instanceof ce?this._data.getContentWorker():this._data instanceof je?this._data:new le(this._data)}};for(var J=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Me=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},ne=0;ne<J.length;ne++)re.prototype[J[ne]]=Me;ye.exports=re},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function($e,ye,ie){(function(re){"use strict";var De,le,ge=re.MutationObserver||re.WebKitMutationObserver;if(ge){var ce=0,je=new ge(xe),J=re.document.createTextNode("");je.observe(J,{characterData:!0}),De=function(){J.data=ce=++ce%2}}else if(re.setImmediate||re.MessageChannel===void 0)De="document"in re&&"onreadystatechange"in re.document.createElement("script")?function(){var Ne=re.document.createElement("script");Ne.onreadystatechange=function(){xe(),Ne.onreadystatechange=null,Ne.parentNode.removeChild(Ne),Ne=null},re.document.documentElement.appendChild(Ne)}:function(){setTimeout(xe,0)};else{var Me=new re.MessageChannel;Me.port1.onmessage=xe,De=function(){Me.port2.postMessage(0)}}var ne=[];function xe(){var Ne,Pe;le=!0;for(var He=ne.length;He;){for(Pe=ne,ne=[],Ne=-1;++Ne<He;)Pe[Ne]();He=ne.length}le=!1}ye.exports=function(Ne){ne.push(Ne)!==1||le||De()}}).call(this,pe!==void 0?pe:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function($e,ye,ie){"use strict";var re=$e("immediate");function De(){}var le={},ge=["REJECTED"],ce=["FULFILLED"],je=["PENDING"];function J(He){if(typeof He!="function")throw new TypeError("resolver must be a function");this.state=je,this.queue=[],this.outcome=void 0,He!==De&&Ne(this,He)}function Me(He,lt,ft){this.promise=He,typeof lt=="function"&&(this.onFulfilled=lt,this.callFulfilled=this.otherCallFulfilled),typeof ft=="function"&&(this.onRejected=ft,this.callRejected=this.otherCallRejected)}function ne(He,lt,ft){re(function(){var It;try{It=lt(ft)}catch(fe){return le.reject(He,fe)}It===He?le.reject(He,new TypeError("Cannot resolve promise with itself")):le.resolve(He,It)})}function xe(He){var lt=He&&He.then;if(He&&(typeof He=="object"||typeof He=="function")&&typeof lt=="function")return function(){lt.apply(He,arguments)}}function Ne(He,lt){var ft=!1;function It(Ye){ft||(ft=!0,le.reject(He,Ye))}function fe(Ye){ft||(ft=!0,le.resolve(He,Ye))}var _t=Pe(function(){lt(fe,It)});_t.status==="error"&&It(_t.value)}function Pe(He,lt){var ft={};try{ft.value=He(lt),ft.status="success"}catch(It){ft.status="error",ft.value=It}return ft}(ye.exports=J).prototype.finally=function(He){if(typeof He!="function")return this;var lt=this.constructor;return this.then(function(ft){return lt.resolve(He()).then(function(){return ft})},function(ft){return lt.resolve(He()).then(function(){throw ft})})},J.prototype.catch=function(He){return this.then(null,He)},J.prototype.then=function(He,lt){if(typeof He!="function"&&this.state===ce||typeof lt!="function"&&this.state===ge)return this;var ft=new this.constructor(De);return this.state!==je?ne(ft,this.state===ce?He:lt,this.outcome):this.queue.push(new Me(ft,He,lt)),ft},Me.prototype.callFulfilled=function(He){le.resolve(this.promise,He)},Me.prototype.otherCallFulfilled=function(He){ne(this.promise,this.onFulfilled,He)},Me.prototype.callRejected=function(He){le.reject(this.promise,He)},Me.prototype.otherCallRejected=function(He){ne(this.promise,this.onRejected,He)},le.resolve=function(He,lt){var ft=Pe(xe,lt);if(ft.status==="error")return le.reject(He,ft.value);var It=ft.value;if(It)Ne(He,It);else{He.state=ce,He.outcome=lt;for(var fe=-1,_t=He.queue.length;++fe<_t;)He.queue[fe].callFulfilled(lt)}return He},le.reject=function(He,lt){He.state=ge,He.outcome=lt;for(var ft=-1,It=He.queue.length;++ft<It;)He.queue[ft].callRejected(lt);return He},J.resolve=function(He){return He instanceof this?He:le.resolve(new this(De),He)},J.reject=function(He){var lt=new this(De);return le.reject(lt,He)},J.all=function(He){var lt=this;if(Object.prototype.toString.call(He)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ft=He.length,It=!1;if(!ft)return this.resolve([]);for(var fe=new Array(ft),_t=0,Ye=-1,Ot=new this(De);++Ye<ft;)mt(He[Ye],Ye);return Ot;function mt(Rt,pt){lt.resolve(Rt).then(function(Ge){fe[pt]=Ge,++_t!==ft||It||(It=!0,le.resolve(Ot,fe))},function(Ge){It||(It=!0,le.reject(Ot,Ge))})}},J.race=function(He){if(Object.prototype.toString.call(He)!=="[object Array]")return this.reject(new TypeError("must be an array"));var lt=He.length,ft=!1;if(!lt)return this.resolve([]);for(var It,fe=-1,_t=new this(De);++fe<lt;)It=He[fe],this.resolve(It).then(function(Ye){ft||(ft=!0,le.resolve(_t,Ye))},function(Ye){ft||(ft=!0,le.reject(_t,Ye))});return _t}},{immediate:36}],38:[function($e,ye,ie){"use strict";var re={};(0,$e("./lib/utils/common").assign)(re,$e("./lib/deflate"),$e("./lib/inflate"),$e("./lib/zlib/constants")),ye.exports=re},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function($e,ye,ie){"use strict";var re=$e("./zlib/deflate"),De=$e("./utils/common"),le=$e("./utils/strings"),ge=$e("./zlib/messages"),ce=$e("./zlib/zstream"),je=Object.prototype.toString,J=0,Me=-1,ne=0,xe=8;function Ne(He){if(!(this instanceof Ne))return new Ne(He);this.options=De.assign({level:Me,method:xe,chunkSize:16384,windowBits:15,memLevel:8,strategy:ne,to:""},He||{});var lt=this.options;lt.raw&&0<lt.windowBits?lt.windowBits=-lt.windowBits:lt.gzip&&0<lt.windowBits&&lt.windowBits<16&&(lt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ce,this.strm.avail_out=0;var ft=re.deflateInit2(this.strm,lt.level,lt.method,lt.windowBits,lt.memLevel,lt.strategy);if(ft!==J)throw new Error(ge[ft]);if(lt.header&&re.deflateSetHeader(this.strm,lt.header),lt.dictionary){var It;if(It=typeof lt.dictionary=="string"?le.string2buf(lt.dictionary):je.call(lt.dictionary)==="[object ArrayBuffer]"?new Uint8Array(lt.dictionary):lt.dictionary,(ft=re.deflateSetDictionary(this.strm,It))!==J)throw new Error(ge[ft]);this._dict_set=!0}}function Pe(He,lt){var ft=new Ne(lt);if(ft.push(He,!0),ft.err)throw ft.msg||ge[ft.err];return ft.result}Ne.prototype.push=function(He,lt){var ft,It,fe=this.strm,_t=this.options.chunkSize;if(this.ended)return!1;It=lt===~~lt?lt:lt===!0?4:0,typeof He=="string"?fe.input=le.string2buf(He):je.call(He)==="[object ArrayBuffer]"?fe.input=new Uint8Array(He):fe.input=He,fe.next_in=0,fe.avail_in=fe.input.length;do{if(fe.avail_out===0&&(fe.output=new De.Buf8(_t),fe.next_out=0,fe.avail_out=_t),(ft=re.deflate(fe,It))!==1&&ft!==J)return this.onEnd(ft),!(this.ended=!0);fe.avail_out!==0&&(fe.avail_in!==0||It!==4&&It!==2)||(this.options.to==="string"?this.onData(le.buf2binstring(De.shrinkBuf(fe.output,fe.next_out))):this.onData(De.shrinkBuf(fe.output,fe.next_out)))}while((0<fe.avail_in||fe.avail_out===0)&&ft!==1);return It===4?(ft=re.deflateEnd(this.strm),this.onEnd(ft),this.ended=!0,ft===J):It!==2||(this.onEnd(J),!(fe.avail_out=0))},Ne.prototype.onData=function(He){this.chunks.push(He)},Ne.prototype.onEnd=function(He){He===J&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=De.flattenChunks(this.chunks)),this.chunks=[],this.err=He,this.msg=this.strm.msg},ie.Deflate=Ne,ie.deflate=Pe,ie.deflateRaw=function(He,lt){return(lt=lt||{}).raw=!0,Pe(He,lt)},ie.gzip=function(He,lt){return(lt=lt||{}).gzip=!0,Pe(He,lt)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function($e,ye,ie){"use strict";var re=$e("./zlib/inflate"),De=$e("./utils/common"),le=$e("./utils/strings"),ge=$e("./zlib/constants"),ce=$e("./zlib/messages"),je=$e("./zlib/zstream"),J=$e("./zlib/gzheader"),Me=Object.prototype.toString;function ne(Ne){if(!(this instanceof ne))return new ne(Ne);this.options=De.assign({chunkSize:16384,windowBits:0,to:""},Ne||{});var Pe=this.options;Pe.raw&&0<=Pe.windowBits&&Pe.windowBits<16&&(Pe.windowBits=-Pe.windowBits,Pe.windowBits===0&&(Pe.windowBits=-15)),!(0<=Pe.windowBits&&Pe.windowBits<16)||Ne&&Ne.windowBits||(Pe.windowBits+=32),15<Pe.windowBits&&Pe.windowBits<48&&!(15&Pe.windowBits)&&(Pe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new je,this.strm.avail_out=0;var He=re.inflateInit2(this.strm,Pe.windowBits);if(He!==ge.Z_OK)throw new Error(ce[He]);this.header=new J,re.inflateGetHeader(this.strm,this.header)}function xe(Ne,Pe){var He=new ne(Pe);if(He.push(Ne,!0),He.err)throw He.msg||ce[He.err];return He.result}ne.prototype.push=function(Ne,Pe){var He,lt,ft,It,fe,_t,Ye=this.strm,Ot=this.options.chunkSize,mt=this.options.dictionary,Rt=!1;if(this.ended)return!1;lt=Pe===~~Pe?Pe:Pe===!0?ge.Z_FINISH:ge.Z_NO_FLUSH,typeof Ne=="string"?Ye.input=le.binstring2buf(Ne):Me.call(Ne)==="[object ArrayBuffer]"?Ye.input=new Uint8Array(Ne):Ye.input=Ne,Ye.next_in=0,Ye.avail_in=Ye.input.length;do{if(Ye.avail_out===0&&(Ye.output=new De.Buf8(Ot),Ye.next_out=0,Ye.avail_out=Ot),(He=re.inflate(Ye,ge.Z_NO_FLUSH))===ge.Z_NEED_DICT&&mt&&(_t=typeof mt=="string"?le.string2buf(mt):Me.call(mt)==="[object ArrayBuffer]"?new Uint8Array(mt):mt,He=re.inflateSetDictionary(this.strm,_t)),He===ge.Z_BUF_ERROR&&Rt===!0&&(He=ge.Z_OK,Rt=!1),He!==ge.Z_STREAM_END&&He!==ge.Z_OK)return this.onEnd(He),!(this.ended=!0);Ye.next_out&&(Ye.avail_out!==0&&He!==ge.Z_STREAM_END&&(Ye.avail_in!==0||lt!==ge.Z_FINISH&&lt!==ge.Z_SYNC_FLUSH)||(this.options.to==="string"?(ft=le.utf8border(Ye.output,Ye.next_out),It=Ye.next_out-ft,fe=le.buf2string(Ye.output,ft),Ye.next_out=It,Ye.avail_out=Ot-It,It&&De.arraySet(Ye.output,Ye.output,ft,It,0),this.onData(fe)):this.onData(De.shrinkBuf(Ye.output,Ye.next_out)))),Ye.avail_in===0&&Ye.avail_out===0&&(Rt=!0)}while((0<Ye.avail_in||Ye.avail_out===0)&&He!==ge.Z_STREAM_END);return He===ge.Z_STREAM_END&&(lt=ge.Z_FINISH),lt===ge.Z_FINISH?(He=re.inflateEnd(this.strm),this.onEnd(He),this.ended=!0,He===ge.Z_OK):lt!==ge.Z_SYNC_FLUSH||(this.onEnd(ge.Z_OK),!(Ye.avail_out=0))},ne.prototype.onData=function(Ne){this.chunks.push(Ne)},ne.prototype.onEnd=function(Ne){Ne===ge.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=De.flattenChunks(this.chunks)),this.chunks=[],this.err=Ne,this.msg=this.strm.msg},ie.Inflate=ne,ie.inflate=xe,ie.inflateRaw=function(Ne,Pe){return(Pe=Pe||{}).raw=!0,xe(Ne,Pe)},ie.ungzip=xe},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function($e,ye,ie){"use strict";var re=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";ie.assign=function(ge){for(var ce=Array.prototype.slice.call(arguments,1);ce.length;){var je=ce.shift();if(je){if(typeof je!="object")throw new TypeError(je+"must be non-object");for(var J in je)je.hasOwnProperty(J)&&(ge[J]=je[J])}}return ge},ie.shrinkBuf=function(ge,ce){return ge.length===ce?ge:ge.subarray?ge.subarray(0,ce):(ge.length=ce,ge)};var De={arraySet:function(ge,ce,je,J,Me){if(ce.subarray&&ge.subarray)ge.set(ce.subarray(je,je+J),Me);else for(var ne=0;ne<J;ne++)ge[Me+ne]=ce[je+ne]},flattenChunks:function(ge){var ce,je,J,Me,ne,xe;for(ce=J=0,je=ge.length;ce<je;ce++)J+=ge[ce].length;for(xe=new Uint8Array(J),ce=Me=0,je=ge.length;ce<je;ce++)ne=ge[ce],xe.set(ne,Me),Me+=ne.length;return xe}},le={arraySet:function(ge,ce,je,J,Me){for(var ne=0;ne<J;ne++)ge[Me+ne]=ce[je+ne]},flattenChunks:function(ge){return[].concat.apply([],ge)}};ie.setTyped=function(ge){ge?(ie.Buf8=Uint8Array,ie.Buf16=Uint16Array,ie.Buf32=Int32Array,ie.assign(ie,De)):(ie.Buf8=Array,ie.Buf16=Array,ie.Buf32=Array,ie.assign(ie,le))},ie.setTyped(re)},{}],42:[function($e,ye,ie){"use strict";var re=$e("./common"),De=!0,le=!0;try{String.fromCharCode.apply(null,[0])}catch(J){De=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(J){le=!1}for(var ge=new re.Buf8(256),ce=0;ce<256;ce++)ge[ce]=252<=ce?6:248<=ce?5:240<=ce?4:224<=ce?3:192<=ce?2:1;function je(J,Me){if(Me<65537&&(J.subarray&&le||!J.subarray&&De))return String.fromCharCode.apply(null,re.shrinkBuf(J,Me));for(var ne="",xe=0;xe<Me;xe++)ne+=String.fromCharCode(J[xe]);return ne}ge[254]=ge[254]=1,ie.string2buf=function(J){var Me,ne,xe,Ne,Pe,He=J.length,lt=0;for(Ne=0;Ne<He;Ne++)(64512&(ne=J.charCodeAt(Ne)))==55296&&Ne+1<He&&(64512&(xe=J.charCodeAt(Ne+1)))==56320&&(ne=65536+(ne-55296<<10)+(xe-56320),Ne++),lt+=ne<128?1:ne<2048?2:ne<65536?3:4;for(Me=new re.Buf8(lt),Ne=Pe=0;Pe<lt;Ne++)(64512&(ne=J.charCodeAt(Ne)))==55296&&Ne+1<He&&(64512&(xe=J.charCodeAt(Ne+1)))==56320&&(ne=65536+(ne-55296<<10)+(xe-56320),Ne++),ne<128?Me[Pe++]=ne:(ne<2048?Me[Pe++]=192|ne>>>6:(ne<65536?Me[Pe++]=224|ne>>>12:(Me[Pe++]=240|ne>>>18,Me[Pe++]=128|ne>>>12&63),Me[Pe++]=128|ne>>>6&63),Me[Pe++]=128|63&ne);return Me},ie.buf2binstring=function(J){return je(J,J.length)},ie.binstring2buf=function(J){for(var Me=new re.Buf8(J.length),ne=0,xe=Me.length;ne<xe;ne++)Me[ne]=J.charCodeAt(ne);return Me},ie.buf2string=function(J,Me){var ne,xe,Ne,Pe,He=Me||J.length,lt=new Array(2*He);for(ne=xe=0;ne<He;)if((Ne=J[ne++])<128)lt[xe++]=Ne;else if(4<(Pe=ge[Ne]))lt[xe++]=65533,ne+=Pe-1;else{for(Ne&=Pe===2?31:Pe===3?15:7;1<Pe&&ne<He;)Ne=Ne<<6|63&J[ne++],Pe--;1<Pe?lt[xe++]=65533:Ne<65536?lt[xe++]=Ne:(Ne-=65536,lt[xe++]=55296|Ne>>10&1023,lt[xe++]=56320|1023&Ne)}return je(lt,xe)},ie.utf8border=function(J,Me){var ne;for((Me=Me||J.length)>J.length&&(Me=J.length),ne=Me-1;0<=ne&&(192&J[ne])==128;)ne--;return ne<0||ne===0?Me:ne+ge[J[ne]]>Me?ne:Me}},{"./common":41}],43:[function($e,ye,ie){"use strict";ye.exports=function(re,De,le,ge){for(var ce=65535&re|0,je=re>>>16&65535|0,J=0;le!==0;){for(le-=J=2e3<le?2e3:le;je=je+(ce=ce+De[ge++]|0)|0,--J;);ce%=65521,je%=65521}return ce|je<<16|0}},{}],44:[function($e,ye,ie){"use strict";ye.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function($e,ye,ie){"use strict";var re=function(){for(var De,le=[],ge=0;ge<256;ge++){De=ge;for(var ce=0;ce<8;ce++)De=1&De?3988292384^De>>>1:De>>>1;le[ge]=De}return le}();ye.exports=function(De,le,ge,ce){var je=re,J=ce+ge;De^=-1;for(var Me=ce;Me<J;Me++)De=De>>>8^je[255&(De^le[Me])];return-1^De}},{}],46:[function($e,ye,ie){"use strict";var re,De=$e("../utils/common"),le=$e("./trees"),ge=$e("./adler32"),ce=$e("./crc32"),je=$e("./messages"),J=0,Me=0,ne=-2,xe=2,Ne=8,Pe=286,He=30,lt=19,ft=2*Pe+1,It=15,fe=3,_t=258,Ye=_t+fe+1,Ot=42,mt=113;function Rt(ve,Je){return ve.msg=je[Je],Je}function pt(ve){return(ve<<1)-(4<ve?9:0)}function Ge(ve){for(var Je=ve.length;0<=--Je;)ve[Je]=0}function wt(ve){var Je=ve.state,ot=Je.pending;ot>ve.avail_out&&(ot=ve.avail_out),ot!==0&&(De.arraySet(ve.output,Je.pending_buf,Je.pending_out,ot,ve.next_out),ve.next_out+=ot,Je.pending_out+=ot,ve.total_out+=ot,ve.avail_out-=ot,Je.pending-=ot,Je.pending===0&&(Je.pending_out=0))}function ee(ve,Je){le._tr_flush_block(ve,0<=ve.block_start?ve.block_start:-1,ve.strstart-ve.block_start,Je),ve.block_start=ve.strstart,wt(ve.strm)}function Re(ve,Je){ve.pending_buf[ve.pending++]=Je}function dt(ve,Je){ve.pending_buf[ve.pending++]=Je>>>8&255,ve.pending_buf[ve.pending++]=255&Je}function D(ve,Je){var ot,Qe,ir=ve.max_chain_length,mr=ve.strstart,Ar=ve.prev_length,Er=ve.nice_match,Zt=ve.strstart>ve.w_size-Ye?ve.strstart-(ve.w_size-Ye):0,Tr=ve.window,pn=ve.w_mask,un=ve.prev,Zn=ve.strstart+_t,Cr=Tr[mr+Ar-1],Nr=Tr[mr+Ar];ve.prev_length>=ve.good_match&&(ir>>=2),Er>ve.lookahead&&(Er=ve.lookahead);do if(Tr[(ot=Je)+Ar]===Nr&&Tr[ot+Ar-1]===Cr&&Tr[ot]===Tr[mr]&&Tr[++ot]===Tr[mr+1]){mr+=2,ot++;do;while(Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&Tr[++mr]===Tr[++ot]&&mr<Zn);if(Qe=_t-(Zn-mr),mr=Zn-_t,Ar<Qe){if(ve.match_start=Je,Er<=(Ar=Qe))break;Cr=Tr[mr+Ar-1],Nr=Tr[mr+Ar]}}while((Je=un[Je&pn])>Zt&&--ir!=0);return Ar<=ve.lookahead?Ar:ve.lookahead}function q(ve){var Je,ot,Qe,ir,mr,Ar,Er,Zt,Tr,pn,un=ve.w_size;do{if(ir=ve.window_size-ve.lookahead-ve.strstart,ve.strstart>=un+(un-Ye)){for(De.arraySet(ve.window,ve.window,un,un,0),ve.match_start-=un,ve.strstart-=un,ve.block_start-=un,Je=ot=ve.hash_size;Qe=ve.head[--Je],ve.head[Je]=un<=Qe?Qe-un:0,--ot;);for(Je=ot=un;Qe=ve.prev[--Je],ve.prev[Je]=un<=Qe?Qe-un:0,--ot;);ir+=un}if(ve.strm.avail_in===0)break;if(Ar=ve.strm,Er=ve.window,Zt=ve.strstart+ve.lookahead,pn=void 0,(Tr=ir)<(pn=Ar.avail_in)&&(pn=Tr),ot=pn===0?0:(Ar.avail_in-=pn,De.arraySet(Er,Ar.input,Ar.next_in,pn,Zt),Ar.state.wrap===1?Ar.adler=ge(Ar.adler,Er,pn,Zt):Ar.state.wrap===2&&(Ar.adler=ce(Ar.adler,Er,pn,Zt)),Ar.next_in+=pn,Ar.total_in+=pn,pn),ve.lookahead+=ot,ve.lookahead+ve.insert>=fe)for(mr=ve.strstart-ve.insert,ve.ins_h=ve.window[mr],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[mr+1])&ve.hash_mask;ve.insert&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[mr+fe-1])&ve.hash_mask,ve.prev[mr&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=mr,mr++,ve.insert--,!(ve.lookahead+ve.insert<fe)););}while(ve.lookahead<Ye&&ve.strm.avail_in!==0)}function G(ve,Je){for(var ot,Qe;;){if(ve.lookahead<Ye){if(q(ve),ve.lookahead<Ye&&Je===J)return 1;if(ve.lookahead===0)break}if(ot=0,ve.lookahead>=fe&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+fe-1])&ve.hash_mask,ot=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),ot!==0&&ve.strstart-ot<=ve.w_size-Ye&&(ve.match_length=D(ve,ot)),ve.match_length>=fe)if(Qe=le._tr_tally(ve,ve.strstart-ve.match_start,ve.match_length-fe),ve.lookahead-=ve.match_length,ve.match_length<=ve.max_lazy_match&&ve.lookahead>=fe){for(ve.match_length--;ve.strstart++,ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+fe-1])&ve.hash_mask,ot=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart,--ve.match_length!=0;);ve.strstart++}else ve.strstart+=ve.match_length,ve.match_length=0,ve.ins_h=ve.window[ve.strstart],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+1])&ve.hash_mask;else Qe=le._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++;if(Qe&&(ee(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=ve.strstart<fe-1?ve.strstart:fe-1,Je===4?(ee(ve,!0),ve.strm.avail_out===0?3:4):ve.last_lit&&(ee(ve,!1),ve.strm.avail_out===0)?1:2}function O(ve,Je){for(var ot,Qe,ir;;){if(ve.lookahead<Ye){if(q(ve),ve.lookahead<Ye&&Je===J)return 1;if(ve.lookahead===0)break}if(ot=0,ve.lookahead>=fe&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+fe-1])&ve.hash_mask,ot=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),ve.prev_length=ve.match_length,ve.prev_match=ve.match_start,ve.match_length=fe-1,ot!==0&&ve.prev_length<ve.max_lazy_match&&ve.strstart-ot<=ve.w_size-Ye&&(ve.match_length=D(ve,ot),ve.match_length<=5&&(ve.strategy===1||ve.match_length===fe&&4096<ve.strstart-ve.match_start)&&(ve.match_length=fe-1)),ve.prev_length>=fe&&ve.match_length<=ve.prev_length){for(ir=ve.strstart+ve.lookahead-fe,Qe=le._tr_tally(ve,ve.strstart-1-ve.prev_match,ve.prev_length-fe),ve.lookahead-=ve.prev_length-1,ve.prev_length-=2;++ve.strstart<=ir&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+fe-1])&ve.hash_mask,ot=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),--ve.prev_length!=0;);if(ve.match_available=0,ve.match_length=fe-1,ve.strstart++,Qe&&(ee(ve,!1),ve.strm.avail_out===0))return 1}else if(ve.match_available){if((Qe=le._tr_tally(ve,0,ve.window[ve.strstart-1]))&&ee(ve,!1),ve.strstart++,ve.lookahead--,ve.strm.avail_out===0)return 1}else ve.match_available=1,ve.strstart++,ve.lookahead--}return ve.match_available&&(Qe=le._tr_tally(ve,0,ve.window[ve.strstart-1]),ve.match_available=0),ve.insert=ve.strstart<fe-1?ve.strstart:fe-1,Je===4?(ee(ve,!0),ve.strm.avail_out===0?3:4):ve.last_lit&&(ee(ve,!1),ve.strm.avail_out===0)?1:2}function k(ve,Je,ot,Qe,ir){this.good_length=ve,this.max_lazy=Je,this.nice_length=ot,this.max_chain=Qe,this.func=ir}function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ne,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new De.Buf16(2*ft),this.dyn_dtree=new De.Buf16(2*(2*He+1)),this.bl_tree=new De.Buf16(2*(2*lt+1)),Ge(this.dyn_ltree),Ge(this.dyn_dtree),Ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new De.Buf16(It+1),this.heap=new De.Buf16(2*Pe+1),Ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new De.Buf16(2*Pe+1),Ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(ve){var Je;return ve&&ve.state?(ve.total_in=ve.total_out=0,ve.data_type=xe,(Je=ve.state).pending=0,Je.pending_out=0,Je.wrap<0&&(Je.wrap=-Je.wrap),Je.status=Je.wrap?Ot:mt,ve.adler=Je.wrap===2?0:1,Je.last_flush=J,le._tr_init(Je),Me):Rt(ve,ne)}function ae(ve){var Je,ot=W(ve);return ot===Me&&((Je=ve.state).window_size=2*Je.w_size,Ge(Je.head),Je.max_lazy_match=re[Je.level].max_lazy,Je.good_match=re[Je.level].good_length,Je.nice_match=re[Je.level].nice_length,Je.max_chain_length=re[Je.level].max_chain,Je.strstart=0,Je.block_start=0,Je.lookahead=0,Je.insert=0,Je.match_length=Je.prev_length=fe-1,Je.match_available=0,Je.ins_h=0),ot}function Be(ve,Je,ot,Qe,ir,mr){if(!ve)return ne;var Ar=1;if(Je===-1&&(Je=6),Qe<0?(Ar=0,Qe=-Qe):15<Qe&&(Ar=2,Qe-=16),ir<1||9<ir||ot!==Ne||Qe<8||15<Qe||Je<0||9<Je||mr<0||4<mr)return Rt(ve,ne);Qe===8&&(Qe=9);var Er=new X;return(ve.state=Er).strm=ve,Er.wrap=Ar,Er.gzhead=null,Er.w_bits=Qe,Er.w_size=1<<Er.w_bits,Er.w_mask=Er.w_size-1,Er.hash_bits=ir+7,Er.hash_size=1<<Er.hash_bits,Er.hash_mask=Er.hash_size-1,Er.hash_shift=~~((Er.hash_bits+fe-1)/fe),Er.window=new De.Buf8(2*Er.w_size),Er.head=new De.Buf16(Er.hash_size),Er.prev=new De.Buf16(Er.w_size),Er.lit_bufsize=1<<ir+6,Er.pending_buf_size=4*Er.lit_bufsize,Er.pending_buf=new De.Buf8(Er.pending_buf_size),Er.d_buf=1*Er.lit_bufsize,Er.l_buf=3*Er.lit_bufsize,Er.level=Je,Er.strategy=mr,Er.method=ot,ae(ve)}re=[new k(0,0,0,0,function(ve,Je){var ot=65535;for(ot>ve.pending_buf_size-5&&(ot=ve.pending_buf_size-5);;){if(ve.lookahead<=1){if(q(ve),ve.lookahead===0&&Je===J)return 1;if(ve.lookahead===0)break}ve.strstart+=ve.lookahead,ve.lookahead=0;var Qe=ve.block_start+ot;if((ve.strstart===0||ve.strstart>=Qe)&&(ve.lookahead=ve.strstart-Qe,ve.strstart=Qe,ee(ve,!1),ve.strm.avail_out===0)||ve.strstart-ve.block_start>=ve.w_size-Ye&&(ee(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,Je===4?(ee(ve,!0),ve.strm.avail_out===0?3:4):(ve.strstart>ve.block_start&&(ee(ve,!1),ve.strm.avail_out),1)}),new k(4,4,8,4,G),new k(4,5,16,8,G),new k(4,6,32,32,G),new k(4,4,16,16,O),new k(8,16,32,32,O),new k(8,16,128,128,O),new k(8,32,128,256,O),new k(32,128,258,1024,O),new k(32,258,258,4096,O)],ie.deflateInit=function(ve,Je){return Be(ve,Je,Ne,15,8,0)},ie.deflateInit2=Be,ie.deflateReset=ae,ie.deflateResetKeep=W,ie.deflateSetHeader=function(ve,Je){return ve&&ve.state?ve.state.wrap!==2?ne:(ve.state.gzhead=Je,Me):ne},ie.deflate=function(ve,Je){var ot,Qe,ir,mr;if(!ve||!ve.state||5<Je||Je<0)return ve?Rt(ve,ne):ne;if(Qe=ve.state,!ve.output||!ve.input&&ve.avail_in!==0||Qe.status===666&&Je!==4)return Rt(ve,ve.avail_out===0?-5:ne);if(Qe.strm=ve,ot=Qe.last_flush,Qe.last_flush=Je,Qe.status===Ot)if(Qe.wrap===2)ve.adler=0,Re(Qe,31),Re(Qe,139),Re(Qe,8),Qe.gzhead?(Re(Qe,(Qe.gzhead.text?1:0)+(Qe.gzhead.hcrc?2:0)+(Qe.gzhead.extra?4:0)+(Qe.gzhead.name?8:0)+(Qe.gzhead.comment?16:0)),Re(Qe,255&Qe.gzhead.time),Re(Qe,Qe.gzhead.time>>8&255),Re(Qe,Qe.gzhead.time>>16&255),Re(Qe,Qe.gzhead.time>>24&255),Re(Qe,Qe.level===9?2:2<=Qe.strategy||Qe.level<2?4:0),Re(Qe,255&Qe.gzhead.os),Qe.gzhead.extra&&Qe.gzhead.extra.length&&(Re(Qe,255&Qe.gzhead.extra.length),Re(Qe,Qe.gzhead.extra.length>>8&255)),Qe.gzhead.hcrc&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending,0)),Qe.gzindex=0,Qe.status=69):(Re(Qe,0),Re(Qe,0),Re(Qe,0),Re(Qe,0),Re(Qe,0),Re(Qe,Qe.level===9?2:2<=Qe.strategy||Qe.level<2?4:0),Re(Qe,3),Qe.status=mt);else{var Ar=Ne+(Qe.w_bits-8<<4)<<8;Ar|=(2<=Qe.strategy||Qe.level<2?0:Qe.level<6?1:Qe.level===6?2:3)<<6,Qe.strstart!==0&&(Ar|=32),Ar+=31-Ar%31,Qe.status=mt,dt(Qe,Ar),Qe.strstart!==0&&(dt(Qe,ve.adler>>>16),dt(Qe,65535&ve.adler)),ve.adler=1}if(Qe.status===69)if(Qe.gzhead.extra){for(ir=Qe.pending;Qe.gzindex<(65535&Qe.gzhead.extra.length)&&(Qe.pending!==Qe.pending_buf_size||(Qe.gzhead.hcrc&&Qe.pending>ir&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending-ir,ir)),wt(ve),ir=Qe.pending,Qe.pending!==Qe.pending_buf_size));)Re(Qe,255&Qe.gzhead.extra[Qe.gzindex]),Qe.gzindex++;Qe.gzhead.hcrc&&Qe.pending>ir&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending-ir,ir)),Qe.gzindex===Qe.gzhead.extra.length&&(Qe.gzindex=0,Qe.status=73)}else Qe.status=73;if(Qe.status===73)if(Qe.gzhead.name){ir=Qe.pending;do{if(Qe.pending===Qe.pending_buf_size&&(Qe.gzhead.hcrc&&Qe.pending>ir&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending-ir,ir)),wt(ve),ir=Qe.pending,Qe.pending===Qe.pending_buf_size)){mr=1;break}mr=Qe.gzindex<Qe.gzhead.name.length?255&Qe.gzhead.name.charCodeAt(Qe.gzindex++):0,Re(Qe,mr)}while(mr!==0);Qe.gzhead.hcrc&&Qe.pending>ir&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending-ir,ir)),mr===0&&(Qe.gzindex=0,Qe.status=91)}else Qe.status=91;if(Qe.status===91)if(Qe.gzhead.comment){ir=Qe.pending;do{if(Qe.pending===Qe.pending_buf_size&&(Qe.gzhead.hcrc&&Qe.pending>ir&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending-ir,ir)),wt(ve),ir=Qe.pending,Qe.pending===Qe.pending_buf_size)){mr=1;break}mr=Qe.gzindex<Qe.gzhead.comment.length?255&Qe.gzhead.comment.charCodeAt(Qe.gzindex++):0,Re(Qe,mr)}while(mr!==0);Qe.gzhead.hcrc&&Qe.pending>ir&&(ve.adler=ce(ve.adler,Qe.pending_buf,Qe.pending-ir,ir)),mr===0&&(Qe.status=103)}else Qe.status=103;if(Qe.status===103&&(Qe.gzhead.hcrc?(Qe.pending+2>Qe.pending_buf_size&&wt(ve),Qe.pending+2<=Qe.pending_buf_size&&(Re(Qe,255&ve.adler),Re(Qe,ve.adler>>8&255),ve.adler=0,Qe.status=mt)):Qe.status=mt),Qe.pending!==0){if(wt(ve),ve.avail_out===0)return Qe.last_flush=-1,Me}else if(ve.avail_in===0&&pt(Je)<=pt(ot)&&Je!==4)return Rt(ve,-5);if(Qe.status===666&&ve.avail_in!==0)return Rt(ve,-5);if(ve.avail_in!==0||Qe.lookahead!==0||Je!==J&&Qe.status!==666){var Er=Qe.strategy===2?function(Zt,Tr){for(var pn;;){if(Zt.lookahead===0&&(q(Zt),Zt.lookahead===0)){if(Tr===J)return 1;break}if(Zt.match_length=0,pn=le._tr_tally(Zt,0,Zt.window[Zt.strstart]),Zt.lookahead--,Zt.strstart++,pn&&(ee(Zt,!1),Zt.strm.avail_out===0))return 1}return Zt.insert=0,Tr===4?(ee(Zt,!0),Zt.strm.avail_out===0?3:4):Zt.last_lit&&(ee(Zt,!1),Zt.strm.avail_out===0)?1:2}(Qe,Je):Qe.strategy===3?function(Zt,Tr){for(var pn,un,Zn,Cr,Nr=Zt.window;;){if(Zt.lookahead<=_t){if(q(Zt),Zt.lookahead<=_t&&Tr===J)return 1;if(Zt.lookahead===0)break}if(Zt.match_length=0,Zt.lookahead>=fe&&0<Zt.strstart&&(un=Nr[Zn=Zt.strstart-1])===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]){Cr=Zt.strstart+_t;do;while(un===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]&&un===Nr[++Zn]&&Zn<Cr);Zt.match_length=_t-(Cr-Zn),Zt.match_length>Zt.lookahead&&(Zt.match_length=Zt.lookahead)}if(Zt.match_length>=fe?(pn=le._tr_tally(Zt,1,Zt.match_length-fe),Zt.lookahead-=Zt.match_length,Zt.strstart+=Zt.match_length,Zt.match_length=0):(pn=le._tr_tally(Zt,0,Zt.window[Zt.strstart]),Zt.lookahead--,Zt.strstart++),pn&&(ee(Zt,!1),Zt.strm.avail_out===0))return 1}return Zt.insert=0,Tr===4?(ee(Zt,!0),Zt.strm.avail_out===0?3:4):Zt.last_lit&&(ee(Zt,!1),Zt.strm.avail_out===0)?1:2}(Qe,Je):re[Qe.level].func(Qe,Je);if(Er!==3&&Er!==4||(Qe.status=666),Er===1||Er===3)return ve.avail_out===0&&(Qe.last_flush=-1),Me;if(Er===2&&(Je===1?le._tr_align(Qe):Je!==5&&(le._tr_stored_block(Qe,0,0,!1),Je===3&&(Ge(Qe.head),Qe.lookahead===0&&(Qe.strstart=0,Qe.block_start=0,Qe.insert=0))),wt(ve),ve.avail_out===0))return Qe.last_flush=-1,Me}return Je!==4?Me:Qe.wrap<=0?1:(Qe.wrap===2?(Re(Qe,255&ve.adler),Re(Qe,ve.adler>>8&255),Re(Qe,ve.adler>>16&255),Re(Qe,ve.adler>>24&255),Re(Qe,255&ve.total_in),Re(Qe,ve.total_in>>8&255),Re(Qe,ve.total_in>>16&255),Re(Qe,ve.total_in>>24&255)):(dt(Qe,ve.adler>>>16),dt(Qe,65535&ve.adler)),wt(ve),0<Qe.wrap&&(Qe.wrap=-Qe.wrap),Qe.pending!==0?Me:1)},ie.deflateEnd=function(ve){var Je;return ve&&ve.state?(Je=ve.state.status)!==Ot&&Je!==69&&Je!==73&&Je!==91&&Je!==103&&Je!==mt&&Je!==666?Rt(ve,ne):(ve.state=null,Je===mt?Rt(ve,-3):Me):ne},ie.deflateSetDictionary=function(ve,Je){var ot,Qe,ir,mr,Ar,Er,Zt,Tr,pn=Je.length;if(!ve||!ve.state||(mr=(ot=ve.state).wrap)===2||mr===1&&ot.status!==Ot||ot.lookahead)return ne;for(mr===1&&(ve.adler=ge(ve.adler,Je,pn,0)),ot.wrap=0,pn>=ot.w_size&&(mr===0&&(Ge(ot.head),ot.strstart=0,ot.block_start=0,ot.insert=0),Tr=new De.Buf8(ot.w_size),De.arraySet(Tr,Je,pn-ot.w_size,ot.w_size,0),Je=Tr,pn=ot.w_size),Ar=ve.avail_in,Er=ve.next_in,Zt=ve.input,ve.avail_in=pn,ve.next_in=0,ve.input=Je,q(ot);ot.lookahead>=fe;){for(Qe=ot.strstart,ir=ot.lookahead-(fe-1);ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[Qe+fe-1])&ot.hash_mask,ot.prev[Qe&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=Qe,Qe++,--ir;);ot.strstart=Qe,ot.lookahead=fe-1,q(ot)}return ot.strstart+=ot.lookahead,ot.block_start=ot.strstart,ot.insert=ot.lookahead,ot.lookahead=0,ot.match_length=ot.prev_length=fe-1,ot.match_available=0,ve.next_in=Er,ve.input=Zt,ve.avail_in=Ar,ot.wrap=mr,Me},ie.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function($e,ye,ie){"use strict";ye.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function($e,ye,ie){"use strict";ye.exports=function(re,De){var le,ge,ce,je,J,Me,ne,xe,Ne,Pe,He,lt,ft,It,fe,_t,Ye,Ot,mt,Rt,pt,Ge,wt,ee,Re;le=re.state,ge=re.next_in,ee=re.input,ce=ge+(re.avail_in-5),je=re.next_out,Re=re.output,J=je-(De-re.avail_out),Me=je+(re.avail_out-257),ne=le.dmax,xe=le.wsize,Ne=le.whave,Pe=le.wnext,He=le.window,lt=le.hold,ft=le.bits,It=le.lencode,fe=le.distcode,_t=(1<<le.lenbits)-1,Ye=(1<<le.distbits)-1;e:do{ft<15&&(lt+=ee[ge++]<<ft,ft+=8,lt+=ee[ge++]<<ft,ft+=8),Ot=It[lt&_t];t:for(;;){if(lt>>>=mt=Ot>>>24,ft-=mt,(mt=Ot>>>16&255)==0)Re[je++]=65535&Ot;else{if(!(16&mt)){if(!(64&mt)){Ot=It[(65535&Ot)+(lt&(1<<mt)-1)];continue t}if(32&mt){le.mode=12;break e}re.msg="invalid literal/length code",le.mode=30;break e}Rt=65535&Ot,(mt&=15)&&(ft<mt&&(lt+=ee[ge++]<<ft,ft+=8),Rt+=lt&(1<<mt)-1,lt>>>=mt,ft-=mt),ft<15&&(lt+=ee[ge++]<<ft,ft+=8,lt+=ee[ge++]<<ft,ft+=8),Ot=fe[lt&Ye];r:for(;;){if(lt>>>=mt=Ot>>>24,ft-=mt,!(16&(mt=Ot>>>16&255))){if(!(64&mt)){Ot=fe[(65535&Ot)+(lt&(1<<mt)-1)];continue r}re.msg="invalid distance code",le.mode=30;break e}if(pt=65535&Ot,ft<(mt&=15)&&(lt+=ee[ge++]<<ft,(ft+=8)<mt&&(lt+=ee[ge++]<<ft,ft+=8)),ne<(pt+=lt&(1<<mt)-1)){re.msg="invalid distance too far back",le.mode=30;break e}if(lt>>>=mt,ft-=mt,(mt=je-J)<pt){if(Ne<(mt=pt-mt)&&le.sane){re.msg="invalid distance too far back",le.mode=30;break e}if(wt=He,(Ge=0)===Pe){if(Ge+=xe-mt,mt<Rt){for(Rt-=mt;Re[je++]=He[Ge++],--mt;);Ge=je-pt,wt=Re}}else if(Pe<mt){if(Ge+=xe+Pe-mt,(mt-=Pe)<Rt){for(Rt-=mt;Re[je++]=He[Ge++],--mt;);if(Ge=0,Pe<Rt){for(Rt-=mt=Pe;Re[je++]=He[Ge++],--mt;);Ge=je-pt,wt=Re}}}else if(Ge+=Pe-mt,mt<Rt){for(Rt-=mt;Re[je++]=He[Ge++],--mt;);Ge=je-pt,wt=Re}for(;2<Rt;)Re[je++]=wt[Ge++],Re[je++]=wt[Ge++],Re[je++]=wt[Ge++],Rt-=3;Rt&&(Re[je++]=wt[Ge++],1<Rt&&(Re[je++]=wt[Ge++]))}else{for(Ge=je-pt;Re[je++]=Re[Ge++],Re[je++]=Re[Ge++],Re[je++]=Re[Ge++],2<(Rt-=3););Rt&&(Re[je++]=Re[Ge++],1<Rt&&(Re[je++]=Re[Ge++]))}break}}break}}while(ge<ce&&je<Me);ge-=Rt=ft>>3,lt&=(1<<(ft-=Rt<<3))-1,re.next_in=ge,re.next_out=je,re.avail_in=ge<ce?ce-ge+5:5-(ge-ce),re.avail_out=je<Me?Me-je+257:257-(je-Me),le.hold=lt,le.bits=ft}},{}],49:[function($e,ye,ie){"use strict";var re=$e("../utils/common"),De=$e("./adler32"),le=$e("./crc32"),ge=$e("./inffast"),ce=$e("./inftrees"),je=1,J=2,Me=0,ne=-2,xe=1,Ne=852,Pe=592;function He(Ge){return(Ge>>>24&255)+(Ge>>>8&65280)+((65280&Ge)<<8)+((255&Ge)<<24)}function lt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new re.Buf16(320),this.work=new re.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ft(Ge){var wt;return Ge&&Ge.state?(wt=Ge.state,Ge.total_in=Ge.total_out=wt.total=0,Ge.msg="",wt.wrap&&(Ge.adler=1&wt.wrap),wt.mode=xe,wt.last=0,wt.havedict=0,wt.dmax=32768,wt.head=null,wt.hold=0,wt.bits=0,wt.lencode=wt.lendyn=new re.Buf32(Ne),wt.distcode=wt.distdyn=new re.Buf32(Pe),wt.sane=1,wt.back=-1,Me):ne}function It(Ge){var wt;return Ge&&Ge.state?((wt=Ge.state).wsize=0,wt.whave=0,wt.wnext=0,ft(Ge)):ne}function fe(Ge,wt){var ee,Re;return Ge&&Ge.state?(Re=Ge.state,wt<0?(ee=0,wt=-wt):(ee=1+(wt>>4),wt<48&&(wt&=15)),wt&&(wt<8||15<wt)?ne:(Re.window!==null&&Re.wbits!==wt&&(Re.window=null),Re.wrap=ee,Re.wbits=wt,It(Ge))):ne}function _t(Ge,wt){var ee,Re;return Ge?(Re=new lt,(Ge.state=Re).window=null,(ee=fe(Ge,wt))!==Me&&(Ge.state=null),ee):ne}var Ye,Ot,mt=!0;function Rt(Ge){if(mt){var wt;for(Ye=new re.Buf32(512),Ot=new re.Buf32(32),wt=0;wt<144;)Ge.lens[wt++]=8;for(;wt<256;)Ge.lens[wt++]=9;for(;wt<280;)Ge.lens[wt++]=7;for(;wt<288;)Ge.lens[wt++]=8;for(ce(je,Ge.lens,0,288,Ye,0,Ge.work,{bits:9}),wt=0;wt<32;)Ge.lens[wt++]=5;ce(J,Ge.lens,0,32,Ot,0,Ge.work,{bits:5}),mt=!1}Ge.lencode=Ye,Ge.lenbits=9,Ge.distcode=Ot,Ge.distbits=5}function pt(Ge,wt,ee,Re){var dt,D=Ge.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new re.Buf8(D.wsize)),Re>=D.wsize?(re.arraySet(D.window,wt,ee-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(Re<(dt=D.wsize-D.wnext)&&(dt=Re),re.arraySet(D.window,wt,ee-Re,dt,D.wnext),(Re-=dt)?(re.arraySet(D.window,wt,ee-Re,Re,0),D.wnext=Re,D.whave=D.wsize):(D.wnext+=dt,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=dt))),0}ie.inflateReset=It,ie.inflateReset2=fe,ie.inflateResetKeep=ft,ie.inflateInit=function(Ge){return _t(Ge,15)},ie.inflateInit2=_t,ie.inflate=function(Ge,wt){var ee,Re,dt,D,q,G,O,k,X,W,ae,Be,ve,Je,ot,Qe,ir,mr,Ar,Er,Zt,Tr,pn,un,Zn=0,Cr=new re.Buf8(4),Nr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ge||!Ge.state||!Ge.output||!Ge.input&&Ge.avail_in!==0)return ne;(ee=Ge.state).mode===12&&(ee.mode=13),q=Ge.next_out,dt=Ge.output,O=Ge.avail_out,D=Ge.next_in,Re=Ge.input,G=Ge.avail_in,k=ee.hold,X=ee.bits,W=G,ae=O,Tr=Me;e:for(;;)switch(ee.mode){case xe:if(ee.wrap===0){ee.mode=13;break}for(;X<16;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(2&ee.wrap&&k===35615){Cr[ee.check=0]=255&k,Cr[1]=k>>>8&255,ee.check=le(ee.check,Cr,2,0),X=k=0,ee.mode=2;break}if(ee.flags=0,ee.head&&(ee.head.done=!1),!(1&ee.wrap)||(((255&k)<<8)+(k>>8))%31){Ge.msg="incorrect header check",ee.mode=30;break}if((15&k)!=8){Ge.msg="unknown compression method",ee.mode=30;break}if(X-=4,Zt=8+(15&(k>>>=4)),ee.wbits===0)ee.wbits=Zt;else if(Zt>ee.wbits){Ge.msg="invalid window size",ee.mode=30;break}ee.dmax=1<<Zt,Ge.adler=ee.check=1,ee.mode=512&k?10:12,X=k=0;break;case 2:for(;X<16;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(ee.flags=k,(255&ee.flags)!=8){Ge.msg="unknown compression method",ee.mode=30;break}if(57344&ee.flags){Ge.msg="unknown header flags set",ee.mode=30;break}ee.head&&(ee.head.text=k>>8&1),512&ee.flags&&(Cr[0]=255&k,Cr[1]=k>>>8&255,ee.check=le(ee.check,Cr,2,0)),X=k=0,ee.mode=3;case 3:for(;X<32;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}ee.head&&(ee.head.time=k),512&ee.flags&&(Cr[0]=255&k,Cr[1]=k>>>8&255,Cr[2]=k>>>16&255,Cr[3]=k>>>24&255,ee.check=le(ee.check,Cr,4,0)),X=k=0,ee.mode=4;case 4:for(;X<16;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}ee.head&&(ee.head.xflags=255&k,ee.head.os=k>>8),512&ee.flags&&(Cr[0]=255&k,Cr[1]=k>>>8&255,ee.check=le(ee.check,Cr,2,0)),X=k=0,ee.mode=5;case 5:if(1024&ee.flags){for(;X<16;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}ee.length=k,ee.head&&(ee.head.extra_len=k),512&ee.flags&&(Cr[0]=255&k,Cr[1]=k>>>8&255,ee.check=le(ee.check,Cr,2,0)),X=k=0}else ee.head&&(ee.head.extra=null);ee.mode=6;case 6:if(1024&ee.flags&&(G<(Be=ee.length)&&(Be=G),Be&&(ee.head&&(Zt=ee.head.extra_len-ee.length,ee.head.extra||(ee.head.extra=new Array(ee.head.extra_len)),re.arraySet(ee.head.extra,Re,D,Be,Zt)),512&ee.flags&&(ee.check=le(ee.check,Re,Be,D)),G-=Be,D+=Be,ee.length-=Be),ee.length))break e;ee.length=0,ee.mode=7;case 7:if(2048&ee.flags){if(G===0)break e;for(Be=0;Zt=Re[D+Be++],ee.head&&Zt&&ee.length<65536&&(ee.head.name+=String.fromCharCode(Zt)),Zt&&Be<G;);if(512&ee.flags&&(ee.check=le(ee.check,Re,Be,D)),G-=Be,D+=Be,Zt)break e}else ee.head&&(ee.head.name=null);ee.length=0,ee.mode=8;case 8:if(4096&ee.flags){if(G===0)break e;for(Be=0;Zt=Re[D+Be++],ee.head&&Zt&&ee.length<65536&&(ee.head.comment+=String.fromCharCode(Zt)),Zt&&Be<G;);if(512&ee.flags&&(ee.check=le(ee.check,Re,Be,D)),G-=Be,D+=Be,Zt)break e}else ee.head&&(ee.head.comment=null);ee.mode=9;case 9:if(512&ee.flags){for(;X<16;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(k!==(65535&ee.check)){Ge.msg="header crc mismatch",ee.mode=30;break}X=k=0}ee.head&&(ee.head.hcrc=ee.flags>>9&1,ee.head.done=!0),Ge.adler=ee.check=0,ee.mode=12;break;case 10:for(;X<32;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}Ge.adler=ee.check=He(k),X=k=0,ee.mode=11;case 11:if(ee.havedict===0)return Ge.next_out=q,Ge.avail_out=O,Ge.next_in=D,Ge.avail_in=G,ee.hold=k,ee.bits=X,2;Ge.adler=ee.check=1,ee.mode=12;case 12:if(wt===5||wt===6)break e;case 13:if(ee.last){k>>>=7&X,X-=7&X,ee.mode=27;break}for(;X<3;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}switch(ee.last=1&k,X-=1,3&(k>>>=1)){case 0:ee.mode=14;break;case 1:if(Rt(ee),ee.mode=20,wt!==6)break;k>>>=2,X-=2;break e;case 2:ee.mode=17;break;case 3:Ge.msg="invalid block type",ee.mode=30}k>>>=2,X-=2;break;case 14:for(k>>>=7&X,X-=7&X;X<32;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if((65535&k)!=(k>>>16^65535)){Ge.msg="invalid stored block lengths",ee.mode=30;break}if(ee.length=65535&k,X=k=0,ee.mode=15,wt===6)break e;case 15:ee.mode=16;case 16:if(Be=ee.length){if(G<Be&&(Be=G),O<Be&&(Be=O),Be===0)break e;re.arraySet(dt,Re,D,Be,q),G-=Be,D+=Be,O-=Be,q+=Be,ee.length-=Be;break}ee.mode=12;break;case 17:for(;X<14;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(ee.nlen=257+(31&k),k>>>=5,X-=5,ee.ndist=1+(31&k),k>>>=5,X-=5,ee.ncode=4+(15&k),k>>>=4,X-=4,286<ee.nlen||30<ee.ndist){Ge.msg="too many length or distance symbols",ee.mode=30;break}ee.have=0,ee.mode=18;case 18:for(;ee.have<ee.ncode;){for(;X<3;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}ee.lens[Nr[ee.have++]]=7&k,k>>>=3,X-=3}for(;ee.have<19;)ee.lens[Nr[ee.have++]]=0;if(ee.lencode=ee.lendyn,ee.lenbits=7,pn={bits:ee.lenbits},Tr=ce(0,ee.lens,0,19,ee.lencode,0,ee.work,pn),ee.lenbits=pn.bits,Tr){Ge.msg="invalid code lengths set",ee.mode=30;break}ee.have=0,ee.mode=19;case 19:for(;ee.have<ee.nlen+ee.ndist;){for(;Qe=(Zn=ee.lencode[k&(1<<ee.lenbits)-1])>>>16&255,ir=65535&Zn,!((ot=Zn>>>24)<=X);){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(ir<16)k>>>=ot,X-=ot,ee.lens[ee.have++]=ir;else{if(ir===16){for(un=ot+2;X<un;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(k>>>=ot,X-=ot,ee.have===0){Ge.msg="invalid bit length repeat",ee.mode=30;break}Zt=ee.lens[ee.have-1],Be=3+(3&k),k>>>=2,X-=2}else if(ir===17){for(un=ot+3;X<un;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}X-=ot,Zt=0,Be=3+(7&(k>>>=ot)),k>>>=3,X-=3}else{for(un=ot+7;X<un;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}X-=ot,Zt=0,Be=11+(127&(k>>>=ot)),k>>>=7,X-=7}if(ee.have+Be>ee.nlen+ee.ndist){Ge.msg="invalid bit length repeat",ee.mode=30;break}for(;Be--;)ee.lens[ee.have++]=Zt}}if(ee.mode===30)break;if(ee.lens[256]===0){Ge.msg="invalid code -- missing end-of-block",ee.mode=30;break}if(ee.lenbits=9,pn={bits:ee.lenbits},Tr=ce(je,ee.lens,0,ee.nlen,ee.lencode,0,ee.work,pn),ee.lenbits=pn.bits,Tr){Ge.msg="invalid literal/lengths set",ee.mode=30;break}if(ee.distbits=6,ee.distcode=ee.distdyn,pn={bits:ee.distbits},Tr=ce(J,ee.lens,ee.nlen,ee.ndist,ee.distcode,0,ee.work,pn),ee.distbits=pn.bits,Tr){Ge.msg="invalid distances set",ee.mode=30;break}if(ee.mode=20,wt===6)break e;case 20:ee.mode=21;case 21:if(6<=G&&258<=O){Ge.next_out=q,Ge.avail_out=O,Ge.next_in=D,Ge.avail_in=G,ee.hold=k,ee.bits=X,ge(Ge,ae),q=Ge.next_out,dt=Ge.output,O=Ge.avail_out,D=Ge.next_in,Re=Ge.input,G=Ge.avail_in,k=ee.hold,X=ee.bits,ee.mode===12&&(ee.back=-1);break}for(ee.back=0;Qe=(Zn=ee.lencode[k&(1<<ee.lenbits)-1])>>>16&255,ir=65535&Zn,!((ot=Zn>>>24)<=X);){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(Qe&&!(240&Qe)){for(mr=ot,Ar=Qe,Er=ir;Qe=(Zn=ee.lencode[Er+((k&(1<<mr+Ar)-1)>>mr)])>>>16&255,ir=65535&Zn,!(mr+(ot=Zn>>>24)<=X);){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}k>>>=mr,X-=mr,ee.back+=mr}if(k>>>=ot,X-=ot,ee.back+=ot,ee.length=ir,Qe===0){ee.mode=26;break}if(32&Qe){ee.back=-1,ee.mode=12;break}if(64&Qe){Ge.msg="invalid literal/length code",ee.mode=30;break}ee.extra=15&Qe,ee.mode=22;case 22:if(ee.extra){for(un=ee.extra;X<un;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}ee.length+=k&(1<<ee.extra)-1,k>>>=ee.extra,X-=ee.extra,ee.back+=ee.extra}ee.was=ee.length,ee.mode=23;case 23:for(;Qe=(Zn=ee.distcode[k&(1<<ee.distbits)-1])>>>16&255,ir=65535&Zn,!((ot=Zn>>>24)<=X);){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(!(240&Qe)){for(mr=ot,Ar=Qe,Er=ir;Qe=(Zn=ee.distcode[Er+((k&(1<<mr+Ar)-1)>>mr)])>>>16&255,ir=65535&Zn,!(mr+(ot=Zn>>>24)<=X);){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}k>>>=mr,X-=mr,ee.back+=mr}if(k>>>=ot,X-=ot,ee.back+=ot,64&Qe){Ge.msg="invalid distance code",ee.mode=30;break}ee.offset=ir,ee.extra=15&Qe,ee.mode=24;case 24:if(ee.extra){for(un=ee.extra;X<un;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}ee.offset+=k&(1<<ee.extra)-1,k>>>=ee.extra,X-=ee.extra,ee.back+=ee.extra}if(ee.offset>ee.dmax){Ge.msg="invalid distance too far back",ee.mode=30;break}ee.mode=25;case 25:if(O===0)break e;if(Be=ae-O,ee.offset>Be){if((Be=ee.offset-Be)>ee.whave&&ee.sane){Ge.msg="invalid distance too far back",ee.mode=30;break}ve=Be>ee.wnext?(Be-=ee.wnext,ee.wsize-Be):ee.wnext-Be,Be>ee.length&&(Be=ee.length),Je=ee.window}else Je=dt,ve=q-ee.offset,Be=ee.length;for(O<Be&&(Be=O),O-=Be,ee.length-=Be;dt[q++]=Je[ve++],--Be;);ee.length===0&&(ee.mode=21);break;case 26:if(O===0)break e;dt[q++]=ee.length,O--,ee.mode=21;break;case 27:if(ee.wrap){for(;X<32;){if(G===0)break e;G--,k|=Re[D++]<<X,X+=8}if(ae-=O,Ge.total_out+=ae,ee.total+=ae,ae&&(Ge.adler=ee.check=ee.flags?le(ee.check,dt,ae,q-ae):De(ee.check,dt,ae,q-ae)),ae=O,(ee.flags?k:He(k))!==ee.check){Ge.msg="incorrect data check",ee.mode=30;break}X=k=0}ee.mode=28;case 28:if(ee.wrap&&ee.flags){for(;X<32;){if(G===0)break e;G--,k+=Re[D++]<<X,X+=8}if(k!==(4294967295&ee.total)){Ge.msg="incorrect length check",ee.mode=30;break}X=k=0}ee.mode=29;case 29:Tr=1;break e;case 30:Tr=-3;break e;case 31:return-4;case 32:default:return ne}return Ge.next_out=q,Ge.avail_out=O,Ge.next_in=D,Ge.avail_in=G,ee.hold=k,ee.bits=X,(ee.wsize||ae!==Ge.avail_out&&ee.mode<30&&(ee.mode<27||wt!==4))&&pt(Ge,Ge.output,Ge.next_out,ae-Ge.avail_out)?(ee.mode=31,-4):(W-=Ge.avail_in,ae-=Ge.avail_out,Ge.total_in+=W,Ge.total_out+=ae,ee.total+=ae,ee.wrap&&ae&&(Ge.adler=ee.check=ee.flags?le(ee.check,dt,ae,Ge.next_out-ae):De(ee.check,dt,ae,Ge.next_out-ae)),Ge.data_type=ee.bits+(ee.last?64:0)+(ee.mode===12?128:0)+(ee.mode===20||ee.mode===15?256:0),(W==0&&ae===0||wt===4)&&Tr===Me&&(Tr=-5),Tr)},ie.inflateEnd=function(Ge){if(!Ge||!Ge.state)return ne;var wt=Ge.state;return wt.window&&(wt.window=null),Ge.state=null,Me},ie.inflateGetHeader=function(Ge,wt){var ee;return Ge&&Ge.state&&2&(ee=Ge.state).wrap?((ee.head=wt).done=!1,Me):ne},ie.inflateSetDictionary=function(Ge,wt){var ee,Re=wt.length;return Ge&&Ge.state?(ee=Ge.state).wrap!==0&&ee.mode!==11?ne:ee.mode===11&&De(1,wt,Re,0)!==ee.check?-3:pt(Ge,wt,Re,Re)?(ee.mode=31,-4):(ee.havedict=1,Me):ne},ie.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function($e,ye,ie){"use strict";var re=$e("../utils/common"),De=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],le=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ce=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ye.exports=function(je,J,Me,ne,xe,Ne,Pe,He){var lt,ft,It,fe,_t,Ye,Ot,mt,Rt,pt=He.bits,Ge=0,wt=0,ee=0,Re=0,dt=0,D=0,q=0,G=0,O=0,k=0,X=null,W=0,ae=new re.Buf16(16),Be=new re.Buf16(16),ve=null,Je=0;for(Ge=0;Ge<=15;Ge++)ae[Ge]=0;for(wt=0;wt<ne;wt++)ae[J[Me+wt]]++;for(dt=pt,Re=15;1<=Re&&ae[Re]===0;Re--);if(Re<dt&&(dt=Re),Re===0)return xe[Ne++]=20971520,xe[Ne++]=20971520,He.bits=1,0;for(ee=1;ee<Re&&ae[ee]===0;ee++);for(dt<ee&&(dt=ee),Ge=G=1;Ge<=15;Ge++)if(G<<=1,(G-=ae[Ge])<0)return-1;if(0<G&&(je===0||Re!==1))return-1;for(Be[1]=0,Ge=1;Ge<15;Ge++)Be[Ge+1]=Be[Ge]+ae[Ge];for(wt=0;wt<ne;wt++)J[Me+wt]!==0&&(Pe[Be[J[Me+wt]]++]=wt);if(Ye=je===0?(X=ve=Pe,19):je===1?(X=De,W-=257,ve=le,Je-=257,256):(X=ge,ve=ce,-1),Ge=ee,_t=Ne,q=wt=k=0,It=-1,fe=(O=1<<(D=dt))-1,je===1&&852<O||je===2&&592<O)return 1;for(;;){for(Ot=Ge-q,Rt=Pe[wt]<Ye?(mt=0,Pe[wt]):Pe[wt]>Ye?(mt=ve[Je+Pe[wt]],X[W+Pe[wt]]):(mt=96,0),lt=1<<Ge-q,ee=ft=1<<D;xe[_t+(k>>q)+(ft-=lt)]=Ot<<24|mt<<16|Rt|0,ft!==0;);for(lt=1<<Ge-1;k&lt;)lt>>=1;if(lt!==0?(k&=lt-1,k+=lt):k=0,wt++,--ae[Ge]==0){if(Ge===Re)break;Ge=J[Me+Pe[wt]]}if(dt<Ge&&(k&fe)!==It){for(q===0&&(q=dt),_t+=ee,G=1<<(D=Ge-q);D+q<Re&&!((G-=ae[D+q])<=0);)D++,G<<=1;if(O+=1<<D,je===1&&852<O||je===2&&592<O)return 1;xe[It=k&fe]=dt<<24|D<<16|_t-Ne|0}}return k!==0&&(xe[_t+k]=Ge-q<<24|64<<16|0),He.bits=dt,0}},{"../utils/common":41}],51:[function($e,ye,ie){"use strict";ye.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function($e,ye,ie){"use strict";var re=$e("../utils/common");function De(ae){for(var Be=ae.length;0<=--Be;)ae[Be]=0}var le=15,ge=16,ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],je=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=new Array(576);De(ne);var xe=new Array(60);De(xe);var Ne=new Array(512);De(Ne);var Pe=new Array(256);De(Pe);var He=new Array(29);De(He);var lt,ft,It,fe=new Array(30);function _t(ae,Be,ve,Je,ot){this.static_tree=ae,this.extra_bits=Be,this.extra_base=ve,this.elems=Je,this.max_length=ot,this.has_stree=ae&&ae.length}function Ye(ae,Be){this.dyn_tree=ae,this.max_code=0,this.stat_desc=Be}function Ot(ae){return ae<256?Ne[ae]:Ne[256+(ae>>>7)]}function mt(ae,Be){ae.pending_buf[ae.pending++]=255&Be,ae.pending_buf[ae.pending++]=Be>>>8&255}function Rt(ae,Be,ve){ae.bi_valid>ge-ve?(ae.bi_buf|=Be<<ae.bi_valid&65535,mt(ae,ae.bi_buf),ae.bi_buf=Be>>ge-ae.bi_valid,ae.bi_valid+=ve-ge):(ae.bi_buf|=Be<<ae.bi_valid&65535,ae.bi_valid+=ve)}function pt(ae,Be,ve){Rt(ae,ve[2*Be],ve[2*Be+1])}function Ge(ae,Be){for(var ve=0;ve|=1&ae,ae>>>=1,ve<<=1,0<--Be;);return ve>>>1}function wt(ae,Be,ve){var Je,ot,Qe=new Array(le+1),ir=0;for(Je=1;Je<=le;Je++)Qe[Je]=ir=ir+ve[Je-1]<<1;for(ot=0;ot<=Be;ot++){var mr=ae[2*ot+1];mr!==0&&(ae[2*ot]=Ge(Qe[mr]++,mr))}}function ee(ae){var Be;for(Be=0;Be<286;Be++)ae.dyn_ltree[2*Be]=0;for(Be=0;Be<30;Be++)ae.dyn_dtree[2*Be]=0;for(Be=0;Be<19;Be++)ae.bl_tree[2*Be]=0;ae.dyn_ltree[512]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function Re(ae){8<ae.bi_valid?mt(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function dt(ae,Be,ve,Je){var ot=2*Be,Qe=2*ve;return ae[ot]<ae[Qe]||ae[ot]===ae[Qe]&&Je[Be]<=Je[ve]}function D(ae,Be,ve){for(var Je=ae.heap[ve],ot=ve<<1;ot<=ae.heap_len&&(ot<ae.heap_len&&dt(Be,ae.heap[ot+1],ae.heap[ot],ae.depth)&&ot++,!dt(Be,Je,ae.heap[ot],ae.depth));)ae.heap[ve]=ae.heap[ot],ve=ot,ot<<=1;ae.heap[ve]=Je}function q(ae,Be,ve){var Je,ot,Qe,ir,mr=0;if(ae.last_lit!==0)for(;Je=ae.pending_buf[ae.d_buf+2*mr]<<8|ae.pending_buf[ae.d_buf+2*mr+1],ot=ae.pending_buf[ae.l_buf+mr],mr++,Je===0?pt(ae,ot,Be):(pt(ae,(Qe=Pe[ot])+256+1,Be),(ir=ce[Qe])!==0&&Rt(ae,ot-=He[Qe],ir),pt(ae,Qe=Ot(--Je),ve),(ir=je[Qe])!==0&&Rt(ae,Je-=fe[Qe],ir)),mr<ae.last_lit;);pt(ae,256,Be)}function G(ae,Be){var ve,Je,ot,Qe=Be.dyn_tree,ir=Be.stat_desc.static_tree,mr=Be.stat_desc.has_stree,Ar=Be.stat_desc.elems,Er=-1;for(ae.heap_len=0,ae.heap_max=573,ve=0;ve<Ar;ve++)Qe[2*ve]!==0?(ae.heap[++ae.heap_len]=Er=ve,ae.depth[ve]=0):Qe[2*ve+1]=0;for(;ae.heap_len<2;)Qe[2*(ot=ae.heap[++ae.heap_len]=Er<2?++Er:0)]=1,ae.depth[ot]=0,ae.opt_len--,mr&&(ae.static_len-=ir[2*ot+1]);for(Be.max_code=Er,ve=ae.heap_len>>1;1<=ve;ve--)D(ae,Qe,ve);for(ot=Ar;ve=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],D(ae,Qe,1),Je=ae.heap[1],ae.heap[--ae.heap_max]=ve,ae.heap[--ae.heap_max]=Je,Qe[2*ot]=Qe[2*ve]+Qe[2*Je],ae.depth[ot]=(ae.depth[ve]>=ae.depth[Je]?ae.depth[ve]:ae.depth[Je])+1,Qe[2*ve+1]=Qe[2*Je+1]=ot,ae.heap[1]=ot++,D(ae,Qe,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],function(Zt,Tr){var pn,un,Zn,Cr,Nr,bt,jn=Tr.dyn_tree,Pt=Tr.max_code,zt=Tr.stat_desc.static_tree,Qt=Tr.stat_desc.has_stree,dr=Tr.stat_desc.extra_bits,_r=Tr.stat_desc.extra_base,Hr=Tr.stat_desc.max_length,Qr=0;for(Cr=0;Cr<=le;Cr++)Zt.bl_count[Cr]=0;for(jn[2*Zt.heap[Zt.heap_max]+1]=0,pn=Zt.heap_max+1;pn<573;pn++)Hr<(Cr=jn[2*jn[2*(un=Zt.heap[pn])+1]+1]+1)&&(Cr=Hr,Qr++),jn[2*un+1]=Cr,Pt<un||(Zt.bl_count[Cr]++,Nr=0,_r<=un&&(Nr=dr[un-_r]),bt=jn[2*un],Zt.opt_len+=bt*(Cr+Nr),Qt&&(Zt.static_len+=bt*(zt[2*un+1]+Nr)));if(Qr!==0){do{for(Cr=Hr-1;Zt.bl_count[Cr]===0;)Cr--;Zt.bl_count[Cr]--,Zt.bl_count[Cr+1]+=2,Zt.bl_count[Hr]--,Qr-=2}while(0<Qr);for(Cr=Hr;Cr!==0;Cr--)for(un=Zt.bl_count[Cr];un!==0;)Pt<(Zn=Zt.heap[--pn])||(jn[2*Zn+1]!==Cr&&(Zt.opt_len+=(Cr-jn[2*Zn+1])*jn[2*Zn],jn[2*Zn+1]=Cr),un--)}}(ae,Be),wt(Qe,Er,ae.bl_count)}function O(ae,Be,ve){var Je,ot,Qe=-1,ir=Be[1],mr=0,Ar=7,Er=4;for(ir===0&&(Ar=138,Er=3),Be[2*(ve+1)+1]=65535,Je=0;Je<=ve;Je++)ot=ir,ir=Be[2*(Je+1)+1],++mr<Ar&&ot===ir||(mr<Er?ae.bl_tree[2*ot]+=mr:ot!==0?(ot!==Qe&&ae.bl_tree[2*ot]++,ae.bl_tree[32]++):mr<=10?ae.bl_tree[34]++:ae.bl_tree[36]++,Qe=ot,Er=(mr=0)===ir?(Ar=138,3):ot===ir?(Ar=6,3):(Ar=7,4))}function k(ae,Be,ve){var Je,ot,Qe=-1,ir=Be[1],mr=0,Ar=7,Er=4;for(ir===0&&(Ar=138,Er=3),Je=0;Je<=ve;Je++)if(ot=ir,ir=Be[2*(Je+1)+1],!(++mr<Ar&&ot===ir)){if(mr<Er)for(;pt(ae,ot,ae.bl_tree),--mr!=0;);else ot!==0?(ot!==Qe&&(pt(ae,ot,ae.bl_tree),mr--),pt(ae,16,ae.bl_tree),Rt(ae,mr-3,2)):mr<=10?(pt(ae,17,ae.bl_tree),Rt(ae,mr-3,3)):(pt(ae,18,ae.bl_tree),Rt(ae,mr-11,7));Qe=ot,Er=(mr=0)===ir?(Ar=138,3):ot===ir?(Ar=6,3):(Ar=7,4)}}De(fe);var X=!1;function W(ae,Be,ve,Je){var ot,Qe,ir;Rt(ae,0+(Je?1:0),3),Qe=Be,ir=ve,Re(ot=ae),mt(ot,ir),mt(ot,~ir),re.arraySet(ot.pending_buf,ot.window,Qe,ir,ot.pending),ot.pending+=ir}ie._tr_init=function(ae){X||(function(){var Be,ve,Je,ot,Qe,ir=new Array(le+1);for(ot=Je=0;ot<28;ot++)for(He[ot]=Je,Be=0;Be<1<<ce[ot];Be++)Pe[Je++]=ot;for(Pe[Je-1]=ot,ot=Qe=0;ot<16;ot++)for(fe[ot]=Qe,Be=0;Be<1<<je[ot];Be++)Ne[Qe++]=ot;for(Qe>>=7;ot<30;ot++)for(fe[ot]=Qe<<7,Be=0;Be<1<<je[ot]-7;Be++)Ne[256+Qe++]=ot;for(ve=0;ve<=le;ve++)ir[ve]=0;for(Be=0;Be<=143;)ne[2*Be+1]=8,Be++,ir[8]++;for(;Be<=255;)ne[2*Be+1]=9,Be++,ir[9]++;for(;Be<=279;)ne[2*Be+1]=7,Be++,ir[7]++;for(;Be<=287;)ne[2*Be+1]=8,Be++,ir[8]++;for(wt(ne,287,ir),Be=0;Be<30;Be++)xe[2*Be+1]=5,xe[2*Be]=Ge(Be,5);lt=new _t(ne,ce,257,286,le),ft=new _t(xe,je,0,30,le),It=new _t(new Array(0),J,0,19,7)}(),X=!0),ae.l_desc=new Ye(ae.dyn_ltree,lt),ae.d_desc=new Ye(ae.dyn_dtree,ft),ae.bl_desc=new Ye(ae.bl_tree,It),ae.bi_buf=0,ae.bi_valid=0,ee(ae)},ie._tr_stored_block=W,ie._tr_flush_block=function(ae,Be,ve,Je){var ot,Qe,ir=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=function(mr){var Ar,Er=4093624447;for(Ar=0;Ar<=31;Ar++,Er>>>=1)if(1&Er&&mr.dyn_ltree[2*Ar]!==0)return 0;if(mr.dyn_ltree[18]!==0||mr.dyn_ltree[20]!==0||mr.dyn_ltree[26]!==0)return 1;for(Ar=32;Ar<256;Ar++)if(mr.dyn_ltree[2*Ar]!==0)return 1;return 0}(ae)),G(ae,ae.l_desc),G(ae,ae.d_desc),ir=function(mr){var Ar;for(O(mr,mr.dyn_ltree,mr.l_desc.max_code),O(mr,mr.dyn_dtree,mr.d_desc.max_code),G(mr,mr.bl_desc),Ar=18;3<=Ar&&mr.bl_tree[2*Me[Ar]+1]===0;Ar--);return mr.opt_len+=3*(Ar+1)+5+5+4,Ar}(ae),ot=ae.opt_len+3+7>>>3,(Qe=ae.static_len+3+7>>>3)<=ot&&(ot=Qe)):ot=Qe=ve+5,ve+4<=ot&&Be!==-1?W(ae,Be,ve,Je):ae.strategy===4||Qe===ot?(Rt(ae,2+(Je?1:0),3),q(ae,ne,xe)):(Rt(ae,4+(Je?1:0),3),function(mr,Ar,Er,Zt){var Tr;for(Rt(mr,Ar-257,5),Rt(mr,Er-1,5),Rt(mr,Zt-4,4),Tr=0;Tr<Zt;Tr++)Rt(mr,mr.bl_tree[2*Me[Tr]+1],3);k(mr,mr.dyn_ltree,Ar-1),k(mr,mr.dyn_dtree,Er-1)}(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,ir+1),q(ae,ae.dyn_ltree,ae.dyn_dtree)),ee(ae),Je&&Re(ae)},ie._tr_tally=function(ae,Be,ve){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=Be>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&Be,ae.pending_buf[ae.l_buf+ae.last_lit]=255&ve,ae.last_lit++,Be===0?ae.dyn_ltree[2*ve]++:(ae.matches++,Be--,ae.dyn_ltree[2*(Pe[ve]+256+1)]++,ae.dyn_dtree[2*Ot(Be)]++),ae.last_lit===ae.lit_bufsize-1},ie._tr_align=function(ae){var Be;Rt(ae,2,3),pt(ae,256,ne),(Be=ae).bi_valid===16?(mt(Be,Be.bi_buf),Be.bi_buf=0,Be.bi_valid=0):8<=Be.bi_valid&&(Be.pending_buf[Be.pending++]=255&Be.bi_buf,Be.bi_buf>>=8,Be.bi_valid-=8)}},{"../utils/common":41}],53:[function($e,ye,ie){"use strict";ye.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function($e,ye,ie){"use strict";ye.exports=typeof setImmediate=="function"?setImmediate:function(){var re=[].slice.apply(arguments);re.splice(1,0,0),setTimeout.apply(null,re)}},{}]},{},[10])(10)})}).call(this,at!==void 0?at:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,me!==void 0?me:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,$!==void 0?$:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,N!==void 0?N:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,typeof g.g!="undefined"?g.g:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})},31745:function(vt){"use strict";vt.exports=g,vt.exports.default=g;var Ee=1e20;function g(N,Z,B,L,$,U){this.fontSize=N||24,this.buffer=Z===void 0?3:Z,this.cutoff=L||.25,this.fontFamily=$||"sans-serif",this.fontWeight=U||"normal",this.radius=B||8;var ke=this.size=this.fontSize+this.buffer*2,We=ke+this.buffer*2,me=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;me?this.canvas=my.createOffscreenCanvas(ke,ke,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ke),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(We*We),this.gridInner=new Float64Array(We*We),this.f=new Float64Array(We),this.z=new Float64Array(We+1),this.v=new Uint16Array(We),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,me?this.middle=Math.round(ke/2*1):this.middle=Math.round(ke/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(N,Z,B,L,$,U,ke){U.fill(Ee,0,Z*B),ke.fill(0,0,Z*B);for(var We=(Z-L)/2,me=0;me<$;me++)for(var Le=0;Le<L;Le++){var Se=(me+We)*Z+Le+We,et=N.data[4*(me*L+Le)+3]/255;if(et===1)U[Se]=0,ke[Se]=Ee;else if(et===0)U[Se]=Ee,ke[Se]=0;else{var at=Math.max(0,.5-et),Lt=Math.max(0,et-.5);U[Se]=at*at,ke[Se]=Lt*Lt}}}function M(N,Z,B,L,$,U,ke){for(var We=0;We<Z*B;We++){var me=Math.sqrt(L[We])-Math.sqrt($[We]);N[We]=Math.round(255-255*(me/U+ke))}}g.prototype._draw=function(N,Z){var B=this.ctx.measureText(N),L=B.width,$=2*this.buffer,U,ke,We,me,Le,Se,et,at;Z&&this.useMetrics?(Le=Math.floor(B.actualBoundingBoxAscent),at=this.buffer+Math.ceil(B.actualBoundingBoxAscent),Se=this.buffer,et=this.buffer,ke=Math.min(this.size,Math.ceil(B.actualBoundingBoxRight-B.actualBoundingBoxLeft)),me=Math.min(this.size-Se,Math.ceil(B.actualBoundingBoxAscent+B.actualBoundingBoxDescent)),U=ke+$,We=me+$,this.ctx.textBaseline="alphabetic"):(U=ke=this.size,We=me=this.size,Le=19*this.fontSize/24,Se=et=0,at=this.middle,this.ctx.textBaseline="middle");var Lt;ke&&me&&(this.ctx.clearRect(et,Se,ke,me),this.ctx.fillText(N,this.buffer,at),Lt=this.ctx.getImageData(et,Se,ke,me));var Et=new Uint8ClampedArray(U*We);return v(Lt,U,We,ke,me,this.gridOuter,this.gridInner),c(this.gridOuter,U,We,this.f,this.v,this.z),c(this.gridInner,U,We,this.f,this.v,this.z),M(Et,U,We,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Et,metrics:{width:ke,height:me,sdfWidth:U,sdfHeight:We,top:Le,left:0,advance:L}}},g.prototype.draw=function(N){return this._draw(N,!1).data},g.prototype.drawWithMetrics=function(N){return this._draw(N,!0)};function c(N,Z,B,L,$,U){for(var ke=0;ke<Z;ke++)K(N,ke,Z,B,L,$,U);for(var We=0;We<B;We++)K(N,We*Z,1,Z,L,$,U)}function K(N,Z,B,L,$,U,ke){var We,me,Le,Se;for(U[0]=0,ke[0]=-Ee,ke[1]=Ee,We=0;We<L;We++)$[We]=N[Z+We*B];for(We=1,me=0,Le=0;We<L;We++){do Se=U[me],Le=($[We]-$[Se]+We*We-Se*Se)/(We-Se)/2;while(Le<=ke[me]&&--me>-1);me++,U[me]=We,ke[me]=Le,ke[me+1]=Ee}for(We=0,me=0;We<L;We++){for(;ke[me+1]<We;)me++;Se=U[me],N[Z+We*B]=$[Se]+(We-Se)*(We-Se)}}},51260:function(vt,Ee,g){"use strict";g.r(Ee),g.d(Ee,{Function:function(){return aa},Interpreter:function(){return Cn},default:function(){return Ta},evaluate:function(){return Gi},vm:function(){return v}});var v={};g.r(v),g.d(v,{Script:function(){return Yi},compileFunction:function(){return bn},createContext:function(){return ln},runInContext:function(){return Kn},runInNewContext:function(){return bi}});var M={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},c="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",K={5:c,"5module":c+" export import",6:c+" const class extends export import super"},N=/^in(stanceof)?$/,Z="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",B="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",L=new RegExp("["+Z+"]"),$=new RegExp("["+Z+B+"]");Z=B=null;var U=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],ke=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function We(R,_e){for(var At=65536,Ke=0;Ke<_e.length;Ke+=2){if(At+=_e[Ke],At>R)return!1;if(At+=_e[Ke+1],At>=R)return!0}}function me(R,_e){return R<65?R===36:R<91?!0:R<97?R===95:R<123?!0:R<=65535?R>=170&&L.test(String.fromCharCode(R)):_e===!1?!1:We(R,U)}function Le(R,_e){return R<48?R===36:R<58?!0:R<65?!1:R<91?!0:R<97?R===95:R<123?!0:R<=65535?R>=170&&$.test(String.fromCharCode(R)):_e===!1?!1:We(R,U)||We(R,ke)}var Se=function(_e,At){At===void 0&&(At={}),this.label=_e,this.keyword=At.keyword,this.beforeExpr=!!At.beforeExpr,this.startsExpr=!!At.startsExpr,this.isLoop=!!At.isLoop,this.isAssign=!!At.isAssign,this.prefix=!!At.prefix,this.postfix=!!At.postfix,this.binop=At.binop||null,this.updateContext=null};function et(R,_e){return new Se(R,{beforeExpr:!0,binop:_e})}var at={beforeExpr:!0},Lt={startsExpr:!0},Et={};function jt(R,_e){return _e===void 0&&(_e={}),_e.keyword=R,Et[R]=new Se(R,_e)}var pe={num:new Se("num",Lt),regexp:new Se("regexp",Lt),string:new Se("string",Lt),name:new Se("name",Lt),eof:new Se("eof"),bracketL:new Se("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Se("]"),braceL:new Se("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Se("}"),parenL:new Se("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Se(")"),comma:new Se(",",at),semi:new Se(";",at),colon:new Se(":",at),dot:new Se("."),question:new Se("?",at),questionDot:new Se("?."),arrow:new Se("=>",at),template:new Se("template"),invalidTemplate:new Se("invalidTemplate"),ellipsis:new Se("...",at),backQuote:new Se("`",Lt),dollarBraceL:new Se("${",{beforeExpr:!0,startsExpr:!0}),eq:new Se("=",{beforeExpr:!0,isAssign:!0}),assign:new Se("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Se("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Se("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:et("||",1),logicalAND:et("&&",2),bitwiseOR:et("|",3),bitwiseXOR:et("^",4),bitwiseAND:et("&",5),equality:et("==/!=/===/!==",6),relational:et("</>/<=/>=",7),bitShift:et("<</>>/>>>",8),plusMin:new Se("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:et("%",10),star:et("*",10),slash:et("/",10),starstar:new Se("**",{beforeExpr:!0}),coalesce:et("??",1),_break:jt("break"),_case:jt("case",at),_catch:jt("catch"),_continue:jt("continue"),_debugger:jt("debugger"),_default:jt("default",at),_do:jt("do",{isLoop:!0,beforeExpr:!0}),_else:jt("else",at),_finally:jt("finally"),_for:jt("for",{isLoop:!0}),_function:jt("function",Lt),_if:jt("if"),_return:jt("return",at),_switch:jt("switch"),_throw:jt("throw",at),_try:jt("try"),_var:jt("var"),_const:jt("const"),_while:jt("while",{isLoop:!0}),_with:jt("with"),_new:jt("new",{beforeExpr:!0,startsExpr:!0}),_this:jt("this",Lt),_super:jt("super",Lt),_class:jt("class",Lt),_extends:jt("extends",at),_export:jt("export"),_import:jt("import",Lt),_null:jt("null",Lt),_true:jt("true",Lt),_false:jt("false",Lt),_in:jt("in",{beforeExpr:!0,binop:7}),_instanceof:jt("instanceof",{beforeExpr:!0,binop:7}),_typeof:jt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:jt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:jt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$e=/\r\n?|\n|\u2028|\u2029/,ye=new RegExp($e.source,"g");function ie(R,_e){return R===10||R===13||!_e&&(R===8232||R===8233)}var re=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,De=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,le=Object.prototype,ge=le.hasOwnProperty,ce=le.toString;function je(R,_e){return ge.call(R,_e)}var J=Array.isArray||function(R){return ce.call(R)==="[object Array]"};function Me(R){return new RegExp("^(?:"+R.replace(/ /g,"|")+")$")}var ne=function(_e,At){this.line=_e,this.column=At};ne.prototype.offset=function(_e){return new ne(this.line,this.column+_e)};var xe=function(_e,At,Ke){this.start=At,this.end=Ke,_e.sourceFile!==null&&(this.source=_e.sourceFile)};function Ne(R,_e){for(var At=1,Ke=0;;){ye.lastIndex=Ke;var nr=ye.exec(R);if(nr&&nr.index<_e)++At,Ke=nr.index+nr[0].length;else return new ne(At,_e-Ke)}}var Pe={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function He(R){var _e={};for(var At in Pe)_e[At]=R&&je(R,At)?R[At]:Pe[At];if(_e.ecmaVersion>=2015&&(_e.ecmaVersion-=2009),_e.allowReserved==null&&(_e.allowReserved=_e.ecmaVersion<5),J(_e.onToken)){var Ke=_e.onToken;_e.onToken=function(nr){return Ke.push(nr)}}return J(_e.onComment)&&(_e.onComment=lt(_e,_e.onComment)),_e}function lt(R,_e){return function(At,Ke,nr,wr,Wr,In){var Dn={type:At?"Block":"Line",value:Ke,start:nr,end:wr};R.locations&&(Dn.loc=new xe(this,Wr,In)),R.ranges&&(Dn.range=[nr,wr]),_e.push(Dn)}}var ft=1,It=2,fe=ft|It,_t=4,Ye=8,Ot=16,mt=32,Rt=64,pt=128;function Ge(R,_e){return It|(R?_t:0)|(_e?Ye:0)}var wt=0,ee=1,Re=2,dt=3,D=4,q=5,G=function(_e,At,Ke){this.options=_e=He(_e),this.sourceFile=_e.sourceFile,this.keywords=Me(K[_e.ecmaVersion>=6?6:_e.sourceType==="module"?"5module":5]);var nr="";if(_e.allowReserved!==!0){for(var wr=_e.ecmaVersion;!(nr=M[wr]);wr--);_e.sourceType==="module"&&(nr+=" await")}this.reservedWords=Me(nr);var Wr=(nr?nr+" ":"")+M.strict;this.reservedWordsStrict=Me(Wr),this.reservedWordsStrictBind=Me(Wr+" "+M.strictBind),this.input=String(At),this.containsEsc=!1,Ke?(this.pos=Ke,this.lineStart=this.input.lastIndexOf(`
`,Ke-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($e).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=pe.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=_e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&_e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ft),this.regexpState=null},O={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};G.prototype.parse=function(){var _e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(_e)},O.inFunction.get=function(){return(this.currentVarScope().flags&It)>0},O.inGenerator.get=function(){return(this.currentVarScope().flags&Ye)>0},O.inAsync.get=function(){return(this.currentVarScope().flags&_t)>0},O.allowSuper.get=function(){return(this.currentThisScope().flags&Rt)>0},O.allowDirectSuper.get=function(){return(this.currentThisScope().flags&pt)>0},O.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},G.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&It)>0},G.extend=function(){for(var _e=[],At=arguments.length;At--;)_e[At]=arguments[At];for(var Ke=this,nr=0;nr<_e.length;nr++)Ke=_e[nr](Ke);return Ke},G.parse=function(_e,At){return new this(At,_e).parse()},G.parseExpressionAt=function(_e,At,Ke){var nr=new this(Ke,_e,At);return nr.nextToken(),nr.parseExpression()},G.tokenizer=function(_e,At){return new this(At,_e)},Object.defineProperties(G.prototype,O);var k=G.prototype,X=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;k.strictDirective=function(R){for(;;){De.lastIndex=R,R+=De.exec(this.input)[0].length;var _e=X.exec(this.input.slice(R));if(!_e)return!1;if((_e[1]||_e[2])==="use strict"){De.lastIndex=R+_e[0].length;var At=De.exec(this.input),Ke=At.index+At[0].length,nr=this.input.charAt(Ke);return nr===";"||nr==="}"||$e.test(At[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(nr)||nr==="!"&&this.input.charAt(Ke+1)==="=")}R+=_e[0].length,De.lastIndex=R,R+=De.exec(this.input)[0].length,this.input[R]===";"&&R++}},k.eat=function(R){return this.type===R?(this.next(),!0):!1},k.isContextual=function(R){return this.type===pe.name&&this.value===R&&!this.containsEsc},k.eatContextual=function(R){return this.isContextual(R)?(this.next(),!0):!1},k.expectContextual=function(R){this.eatContextual(R)||this.unexpected()},k.canInsertSemicolon=function(){return this.type===pe.eof||this.type===pe.braceR||$e.test(this.input.slice(this.lastTokEnd,this.start))},k.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},k.semicolon=function(){!this.eat(pe.semi)&&!this.insertSemicolon()&&this.unexpected()},k.afterTrailingComma=function(R,_e){if(this.type===R)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),_e||this.next(),!0},k.expect=function(R){this.eat(R)||this.unexpected()},k.unexpected=function(R){this.raise(R!=null?R:this.start,"Unexpected token")};function W(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}k.checkPatternErrors=function(R,_e){if(R){R.trailingComma>-1&&this.raiseRecoverable(R.trailingComma,"Comma is not permitted after the rest element");var At=_e?R.parenthesizedAssign:R.parenthesizedBind;At>-1&&this.raiseRecoverable(At,"Parenthesized pattern")}},k.checkExpressionErrors=function(R,_e){if(!R)return!1;var At=R.shorthandAssign,Ke=R.doubleProto;if(!_e)return At>=0||Ke>=0;At>=0&&this.raise(At,"Shorthand property assignments are valid only in destructuring patterns"),Ke>=0&&this.raiseRecoverable(Ke,"Redefinition of __proto__ property")},k.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},k.isSimpleAssignTarget=function(R){return R.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(R.expression):R.type==="Identifier"||R.type==="MemberExpression"};var ae=G.prototype;ae.parseTopLevel=function(R){var _e={};for(R.body||(R.body=[]);this.type!==pe.eof;){var At=this.parseStatement(null,!0,_e);R.body.push(At)}if(this.inModule)for(var Ke=0,nr=Object.keys(this.undefinedExports);Ke<nr.length;Ke+=1){var wr=nr[Ke];this.raiseRecoverable(this.undefinedExports[wr].start,"Export '"+wr+"' is not defined")}return this.adaptDirectivePrologue(R.body),this.next(),R.sourceType=this.options.sourceType,this.finishNode(R,"Program")};var Be={kind:"loop"},ve={kind:"switch"};ae.isLet=function(R){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;De.lastIndex=this.pos;var _e=De.exec(this.input),At=this.pos+_e[0].length,Ke=this.input.charCodeAt(At);if(Ke===91)return!0;if(R)return!1;if(Ke===123)return!0;if(me(Ke,!0)){for(var nr=At+1;Le(this.input.charCodeAt(nr),!0);)++nr;var wr=this.input.slice(At,nr);if(!N.test(wr))return!0}return!1},ae.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;De.lastIndex=this.pos;var R=De.exec(this.input),_e=this.pos+R[0].length;return!$e.test(this.input.slice(this.pos,_e))&&this.input.slice(_e,_e+8)==="function"&&(_e+8===this.input.length||!Le(this.input.charAt(_e+8)))},ae.parseStatement=function(R,_e,At){var Ke=this.type,nr=this.startNode(),wr;switch(this.isLet(R)&&(Ke=pe._var,wr="let"),Ke){case pe._break:case pe._continue:return this.parseBreakContinueStatement(nr,Ke.keyword);case pe._debugger:return this.parseDebuggerStatement(nr);case pe._do:return this.parseDoStatement(nr);case pe._for:return this.parseForStatement(nr);case pe._function:return R&&(this.strict||R!=="if"&&R!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(nr,!1,!R);case pe._class:return R&&this.unexpected(),this.parseClass(nr,!0);case pe._if:return this.parseIfStatement(nr);case pe._return:return this.parseReturnStatement(nr);case pe._switch:return this.parseSwitchStatement(nr);case pe._throw:return this.parseThrowStatement(nr);case pe._try:return this.parseTryStatement(nr);case pe._const:case pe._var:return wr=wr||this.value,R&&wr!=="var"&&this.unexpected(),this.parseVarStatement(nr,wr);case pe._while:return this.parseWhileStatement(nr);case pe._with:return this.parseWithStatement(nr);case pe.braceL:return this.parseBlock(!0,nr);case pe.semi:return this.parseEmptyStatement(nr);case pe._export:case pe._import:if(this.options.ecmaVersion>10&&Ke===pe._import){De.lastIndex=this.pos;var Wr=De.exec(this.input),In=this.pos+Wr[0].length,Dn=this.input.charCodeAt(In);if(Dn===40||Dn===46)return this.parseExpressionStatement(nr,this.parseExpression())}return this.options.allowImportExportEverywhere||(_e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Ke===pe._import?this.parseImport(nr):this.parseExport(nr,At);default:if(this.isAsyncFunction())return R&&this.unexpected(),this.next(),this.parseFunctionStatement(nr,!0,!R);var Mi=this.value,Bi=this.parseExpression();return Ke===pe.name&&Bi.type==="Identifier"&&this.eat(pe.colon)?this.parseLabeledStatement(nr,Mi,Bi,R):this.parseExpressionStatement(nr,Bi)}},ae.parseBreakContinueStatement=function(R,_e){var At=_e==="break";this.next(),this.eat(pe.semi)||this.insertSemicolon()?R.label=null:this.type!==pe.name?this.unexpected():(R.label=this.parseIdent(),this.semicolon());for(var Ke=0;Ke<this.labels.length;++Ke){var nr=this.labels[Ke];if((R.label==null||nr.name===R.label.name)&&(nr.kind!=null&&(At||nr.kind==="loop")||R.label&&At))break}return Ke===this.labels.length&&this.raise(R.start,"Unsyntactic "+_e),this.finishNode(R,At?"BreakStatement":"ContinueStatement")},ae.parseDebuggerStatement=function(R){return this.next(),this.semicolon(),this.finishNode(R,"DebuggerStatement")},ae.parseDoStatement=function(R){return this.next(),this.labels.push(Be),R.body=this.parseStatement("do"),this.labels.pop(),this.expect(pe._while),R.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(pe.semi):this.semicolon(),this.finishNode(R,"DoWhileStatement")},ae.parseForStatement=function(R){this.next();var _e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Be),this.enterScope(0),this.expect(pe.parenL),this.type===pe.semi)return _e>-1&&this.unexpected(_e),this.parseFor(R,null);var At=this.isLet();if(this.type===pe._var||this.type===pe._const||At){var Ke=this.startNode(),nr=At?"let":this.value;return this.next(),this.parseVar(Ke,!0,nr),this.finishNode(Ke,"VariableDeclaration"),(this.type===pe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&Ke.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===pe._in?_e>-1&&this.unexpected(_e):R.await=_e>-1),this.parseForIn(R,Ke)):(_e>-1&&this.unexpected(_e),this.parseFor(R,Ke))}var wr=new W,Wr=this.parseExpression(!0,wr);return this.type===pe._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===pe._in?_e>-1&&this.unexpected(_e):R.await=_e>-1),this.toAssignable(Wr,!1,wr),this.checkLVal(Wr),this.parseForIn(R,Wr)):(this.checkExpressionErrors(wr,!0),_e>-1&&this.unexpected(_e),this.parseFor(R,Wr))},ae.parseFunctionStatement=function(R,_e,At){return this.next(),this.parseFunction(R,ot|(At?0:Qe),!1,_e)},ae.parseIfStatement=function(R){return this.next(),R.test=this.parseParenExpression(),R.consequent=this.parseStatement("if"),R.alternate=this.eat(pe._else)?this.parseStatement("if"):null,this.finishNode(R,"IfStatement")},ae.parseReturnStatement=function(R){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(pe.semi)||this.insertSemicolon()?R.argument=null:(R.argument=this.parseExpression(),this.semicolon()),this.finishNode(R,"ReturnStatement")},ae.parseSwitchStatement=function(R){this.next(),R.discriminant=this.parseParenExpression(),R.cases=[],this.expect(pe.braceL),this.labels.push(ve),this.enterScope(0);for(var _e,At=!1;this.type!==pe.braceR;)if(this.type===pe._case||this.type===pe._default){var Ke=this.type===pe._case;_e&&this.finishNode(_e,"SwitchCase"),R.cases.push(_e=this.startNode()),_e.consequent=[],this.next(),Ke?_e.test=this.parseExpression():(At&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),At=!0,_e.test=null),this.expect(pe.colon)}else _e||this.unexpected(),_e.consequent.push(this.parseStatement(null));return this.exitScope(),_e&&this.finishNode(_e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(R,"SwitchStatement")},ae.parseThrowStatement=function(R){return this.next(),$e.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),R.argument=this.parseExpression(),this.semicolon(),this.finishNode(R,"ThrowStatement")};var Je=[];ae.parseTryStatement=function(R){if(this.next(),R.block=this.parseBlock(),R.handler=null,this.type===pe._catch){var _e=this.startNode();if(this.next(),this.eat(pe.parenL)){_e.param=this.parseBindingAtom();var At=_e.param.type==="Identifier";this.enterScope(At?mt:0),this.checkLVal(_e.param,At?D:Re),this.expect(pe.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),_e.param=null,this.enterScope(0);_e.body=this.parseBlock(!1),this.exitScope(),R.handler=this.finishNode(_e,"CatchClause")}return R.finalizer=this.eat(pe._finally)?this.parseBlock():null,!R.handler&&!R.finalizer&&this.raise(R.start,"Missing catch or finally clause"),this.finishNode(R,"TryStatement")},ae.parseVarStatement=function(R,_e){return this.next(),this.parseVar(R,!1,_e),this.semicolon(),this.finishNode(R,"VariableDeclaration")},ae.parseWhileStatement=function(R){return this.next(),R.test=this.parseParenExpression(),this.labels.push(Be),R.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(R,"WhileStatement")},ae.parseWithStatement=function(R){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),R.object=this.parseParenExpression(),R.body=this.parseStatement("with"),this.finishNode(R,"WithStatement")},ae.parseEmptyStatement=function(R){return this.next(),this.finishNode(R,"EmptyStatement")},ae.parseLabeledStatement=function(R,_e,At,Ke){for(var nr=0,wr=this.labels;nr<wr.length;nr+=1){var Wr=wr[nr];Wr.name===_e&&this.raise(At.start,"Label '"+_e+"' is already declared")}for(var In=this.type.isLoop?"loop":this.type===pe._switch?"switch":null,Dn=this.labels.length-1;Dn>=0;Dn--){var Mi=this.labels[Dn];if(Mi.statementStart===R.start)Mi.statementStart=this.start,Mi.kind=In;else break}return this.labels.push({name:_e,kind:In,statementStart:this.start}),R.body=this.parseStatement(Ke?Ke.indexOf("label")===-1?Ke+"label":Ke:"label"),this.labels.pop(),R.label=At,this.finishNode(R,"LabeledStatement")},ae.parseExpressionStatement=function(R,_e){return R.expression=_e,this.semicolon(),this.finishNode(R,"ExpressionStatement")},ae.parseBlock=function(R,_e,At){for(R===void 0&&(R=!0),_e===void 0&&(_e=this.startNode()),_e.body=[],this.expect(pe.braceL),R&&this.enterScope(0);this.type!==pe.braceR;){var Ke=this.parseStatement(null);_e.body.push(Ke)}return At&&(this.strict=!1),this.next(),R&&this.exitScope(),this.finishNode(_e,"BlockStatement")},ae.parseFor=function(R,_e){return R.init=_e,this.expect(pe.semi),R.test=this.type===pe.semi?null:this.parseExpression(),this.expect(pe.semi),R.update=this.type===pe.parenR?null:this.parseExpression(),this.expect(pe.parenR),R.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(R,"ForStatement")},ae.parseForIn=function(R,_e){var At=this.type===pe._in;return this.next(),_e.type==="VariableDeclaration"&&_e.declarations[0].init!=null&&(!At||this.options.ecmaVersion<8||this.strict||_e.kind!=="var"||_e.declarations[0].id.type!=="Identifier")?this.raise(_e.start,(At?"for-in":"for-of")+" loop variable declaration may not have an initializer"):_e.type==="AssignmentPattern"&&this.raise(_e.start,"Invalid left-hand side in for-loop"),R.left=_e,R.right=At?this.parseExpression():this.parseMaybeAssign(),this.expect(pe.parenR),R.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(R,At?"ForInStatement":"ForOfStatement")},ae.parseVar=function(R,_e,At){for(R.declarations=[],R.kind=At;;){var Ke=this.startNode();if(this.parseVarId(Ke,At),this.eat(pe.eq)?Ke.init=this.parseMaybeAssign(_e):At==="const"&&!(this.type===pe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():Ke.id.type!=="Identifier"&&!(_e&&(this.type===pe._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Ke.init=null,R.declarations.push(this.finishNode(Ke,"VariableDeclarator")),!this.eat(pe.comma))break}return R},ae.parseVarId=function(R,_e){R.id=this.parseBindingAtom(),this.checkLVal(R.id,_e==="var"?ee:Re,!1)};var ot=1,Qe=2,ir=4;ae.parseFunction=function(R,_e,At,Ke){this.initFunction(R),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Ke)&&(this.type===pe.star&&_e&Qe&&this.unexpected(),R.generator=this.eat(pe.star)),this.options.ecmaVersion>=8&&(R.async=!!Ke),_e&ot&&(R.id=_e&ir&&this.type!==pe.name?null:this.parseIdent(),R.id&&!(_e&Qe)&&this.checkLVal(R.id,this.strict||R.generator||R.async?this.treatFunctionsAsVar?ee:Re:dt));var nr=this.yieldPos,wr=this.awaitPos,Wr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ge(R.async,R.generator)),_e&ot||(R.id=this.type===pe.name?this.parseIdent():null),this.parseFunctionParams(R),this.parseFunctionBody(R,At,!1),this.yieldPos=nr,this.awaitPos=wr,this.awaitIdentPos=Wr,this.finishNode(R,_e&ot?"FunctionDeclaration":"FunctionExpression")},ae.parseFunctionParams=function(R){this.expect(pe.parenL),R.params=this.parseBindingList(pe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ae.parseClass=function(R,_e){this.next();var At=this.strict;this.strict=!0,this.parseClassId(R,_e),this.parseClassSuper(R);var Ke=this.startNode(),nr=!1;for(Ke.body=[],this.expect(pe.braceL);this.type!==pe.braceR;){var wr=this.parseClassElement(R.superClass!==null);wr&&(Ke.body.push(wr),wr.type==="MethodDefinition"&&wr.kind==="constructor"&&(nr&&this.raise(wr.start,"Duplicate constructor in the same class"),nr=!0))}return this.strict=At,this.next(),R.body=this.finishNode(Ke,"ClassBody"),this.finishNode(R,_e?"ClassDeclaration":"ClassExpression")},ae.parseClassElement=function(R){var _e=this;if(this.eat(pe.semi))return null;var At=this.startNode(),Ke=function(Dn,Mi){Mi===void 0&&(Mi=!1);var Bi=_e.start,io=_e.startLoc;return _e.eatContextual(Dn)?_e.type!==pe.parenL&&(!Mi||!_e.canInsertSemicolon())?!0:(At.key&&_e.unexpected(),At.computed=!1,At.key=_e.startNodeAt(Bi,io),At.key.name=Dn,_e.finishNode(At.key,"Identifier"),!1):!1};At.kind="method",At.static=Ke("static");var nr=this.eat(pe.star),wr=!1;nr||(this.options.ecmaVersion>=8&&Ke("async",!0)?(wr=!0,nr=this.options.ecmaVersion>=9&&this.eat(pe.star)):Ke("get")?At.kind="get":Ke("set")&&(At.kind="set")),At.key||this.parsePropertyName(At);var Wr=At.key,In=!1;return!At.computed&&!At.static&&(Wr.type==="Identifier"&&Wr.name==="constructor"||Wr.type==="Literal"&&Wr.value==="constructor")?(At.kind!=="method"&&this.raise(Wr.start,"Constructor can't have get/set modifier"),nr&&this.raise(Wr.start,"Constructor can't be a generator"),wr&&this.raise(Wr.start,"Constructor can't be an async method"),At.kind="constructor",In=R):At.static&&Wr.type==="Identifier"&&Wr.name==="prototype"&&this.raise(Wr.start,"Classes may not have a static property named prototype"),this.parseClassMethod(At,nr,wr,In),At.kind==="get"&&At.value.params.length!==0&&this.raiseRecoverable(At.value.start,"getter should have no params"),At.kind==="set"&&At.value.params.length!==1&&this.raiseRecoverable(At.value.start,"setter should have exactly one param"),At.kind==="set"&&At.value.params[0].type==="RestElement"&&this.raiseRecoverable(At.value.params[0].start,"Setter cannot use rest params"),At},ae.parseClassMethod=function(R,_e,At,Ke){return R.value=this.parseMethod(_e,At,Ke),this.finishNode(R,"MethodDefinition")},ae.parseClassId=function(R,_e){this.type===pe.name?(R.id=this.parseIdent(),_e&&this.checkLVal(R.id,Re,!1)):(_e===!0&&this.unexpected(),R.id=null)},ae.parseClassSuper=function(R){R.superClass=this.eat(pe._extends)?this.parseExprSubscripts():null},ae.parseExport=function(R,_e){if(this.next(),this.eat(pe.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(R.exported=this.parseIdent(!0),this.checkExport(_e,R.exported.name,this.lastTokStart)):R.exported=null),this.expectContextual("from"),this.type!==pe.string&&this.unexpected(),R.source=this.parseExprAtom(),this.semicolon(),this.finishNode(R,"ExportAllDeclaration");if(this.eat(pe._default)){this.checkExport(_e,"default",this.lastTokStart);var At;if(this.type===pe._function||(At=this.isAsyncFunction())){var Ke=this.startNode();this.next(),At&&this.next(),R.declaration=this.parseFunction(Ke,ot|ir,!1,At)}else if(this.type===pe._class){var nr=this.startNode();R.declaration=this.parseClass(nr,"nullableID")}else R.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(R,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())R.declaration=this.parseStatement(null),R.declaration.type==="VariableDeclaration"?this.checkVariableExport(_e,R.declaration.declarations):this.checkExport(_e,R.declaration.id.name,R.declaration.id.start),R.specifiers=[],R.source=null;else{if(R.declaration=null,R.specifiers=this.parseExportSpecifiers(_e),this.eatContextual("from"))this.type!==pe.string&&this.unexpected(),R.source=this.parseExprAtom();else{for(var wr=0,Wr=R.specifiers;wr<Wr.length;wr+=1){var In=Wr[wr];this.checkUnreserved(In.local),this.checkLocalExport(In.local)}R.source=null}this.semicolon()}return this.finishNode(R,"ExportNamedDeclaration")},ae.checkExport=function(R,_e,At){R&&(je(R,_e)&&this.raiseRecoverable(At,"Duplicate export '"+_e+"'"),R[_e]=!0)},ae.checkPatternExport=function(R,_e){var At=_e.type;if(At==="Identifier")this.checkExport(R,_e.name,_e.start);else if(At==="ObjectPattern")for(var Ke=0,nr=_e.properties;Ke<nr.length;Ke+=1){var wr=nr[Ke];this.checkPatternExport(R,wr)}else if(At==="ArrayPattern")for(var Wr=0,In=_e.elements;Wr<In.length;Wr+=1){var Dn=In[Wr];Dn&&this.checkPatternExport(R,Dn)}else At==="Property"?this.checkPatternExport(R,_e.value):At==="AssignmentPattern"?this.checkPatternExport(R,_e.left):At==="RestElement"?this.checkPatternExport(R,_e.argument):At==="ParenthesizedExpression"&&this.checkPatternExport(R,_e.expression)},ae.checkVariableExport=function(R,_e){if(R)for(var At=0,Ke=_e;At<Ke.length;At+=1){var nr=Ke[At];this.checkPatternExport(R,nr.id)}},ae.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},ae.parseExportSpecifiers=function(R){var _e=[],At=!0;for(this.expect(pe.braceL);!this.eat(pe.braceR);){if(At)At=!1;else if(this.expect(pe.comma),this.afterTrailingComma(pe.braceR))break;var Ke=this.startNode();Ke.local=this.parseIdent(!0),Ke.exported=this.eatContextual("as")?this.parseIdent(!0):Ke.local,this.checkExport(R,Ke.exported.name,Ke.exported.start),_e.push(this.finishNode(Ke,"ExportSpecifier"))}return _e},ae.parseImport=function(R){return this.next(),this.type===pe.string?(R.specifiers=Je,R.source=this.parseExprAtom()):(R.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),R.source=this.type===pe.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(R,"ImportDeclaration")},ae.parseImportSpecifiers=function(){var R=[],_e=!0;if(this.type===pe.name){var At=this.startNode();if(At.local=this.parseIdent(),this.checkLVal(At.local,Re),R.push(this.finishNode(At,"ImportDefaultSpecifier")),!this.eat(pe.comma))return R}if(this.type===pe.star){var Ke=this.startNode();return this.next(),this.expectContextual("as"),Ke.local=this.parseIdent(),this.checkLVal(Ke.local,Re),R.push(this.finishNode(Ke,"ImportNamespaceSpecifier")),R}for(this.expect(pe.braceL);!this.eat(pe.braceR);){if(_e)_e=!1;else if(this.expect(pe.comma),this.afterTrailingComma(pe.braceR))break;var nr=this.startNode();nr.imported=this.parseIdent(!0),this.eatContextual("as")?nr.local=this.parseIdent():(this.checkUnreserved(nr.imported),nr.local=nr.imported),this.checkLVal(nr.local,Re),R.push(this.finishNode(nr,"ImportSpecifier"))}return R},ae.adaptDirectivePrologue=function(R){for(var _e=0;_e<R.length&&this.isDirectiveCandidate(R[_e]);++_e)R[_e].directive=R[_e].expression.raw.slice(1,-1)},ae.isDirectiveCandidate=function(R){return R.type==="ExpressionStatement"&&R.expression.type==="Literal"&&typeof R.expression.value=="string"&&(this.input[R.start]==='"'||this.input[R.start]==="'")};var mr=G.prototype;mr.toAssignable=function(R,_e,At){if(this.options.ecmaVersion>=6&&R)switch(R.type){case"Identifier":this.inAsync&&R.name==="await"&&this.raise(R.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":R.type="ObjectPattern",At&&this.checkPatternErrors(At,!0);for(var Ke=0,nr=R.properties;Ke<nr.length;Ke+=1){var wr=nr[Ke];this.toAssignable(wr,_e),wr.type==="RestElement"&&(wr.argument.type==="ArrayPattern"||wr.argument.type==="ObjectPattern")&&this.raise(wr.argument.start,"Unexpected token")}break;case"Property":R.kind!=="init"&&this.raise(R.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(R.value,_e);break;case"ArrayExpression":R.type="ArrayPattern",At&&this.checkPatternErrors(At,!0),this.toAssignableList(R.elements,_e);break;case"SpreadElement":R.type="RestElement",this.toAssignable(R.argument,_e),R.argument.type==="AssignmentPattern"&&this.raise(R.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":R.operator!=="="&&this.raise(R.left.end,"Only '=' operator can be used for specifying default value."),R.type="AssignmentPattern",delete R.operator,this.toAssignable(R.left,_e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(R.expression,_e,At);break;case"ChainExpression":this.raiseRecoverable(R.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!_e)break;default:this.raise(R.start,"Assigning to rvalue")}else At&&this.checkPatternErrors(At,!0);return R},mr.toAssignableList=function(R,_e){for(var At=R.length,Ke=0;Ke<At;Ke++){var nr=R[Ke];nr&&this.toAssignable(nr,_e)}if(At){var wr=R[At-1];this.options.ecmaVersion===6&&_e&&wr&&wr.type==="RestElement"&&wr.argument.type!=="Identifier"&&this.unexpected(wr.argument.start)}return R},mr.parseSpread=function(R){var _e=this.startNode();return this.next(),_e.argument=this.parseMaybeAssign(!1,R),this.finishNode(_e,"SpreadElement")},mr.parseRestBinding=function(){var R=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==pe.name&&this.unexpected(),R.argument=this.parseBindingAtom(),this.finishNode(R,"RestElement")},mr.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case pe.bracketL:var R=this.startNode();return this.next(),R.elements=this.parseBindingList(pe.bracketR,!0,!0),this.finishNode(R,"ArrayPattern");case pe.braceL:return this.parseObj(!0)}return this.parseIdent()},mr.parseBindingList=function(R,_e,At){for(var Ke=[],nr=!0;!this.eat(R);)if(nr?nr=!1:this.expect(pe.comma),_e&&this.type===pe.comma)Ke.push(null);else{if(At&&this.afterTrailingComma(R))break;if(this.type===pe.ellipsis){var wr=this.parseRestBinding();this.parseBindingListItem(wr),Ke.push(wr),this.type===pe.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(R);break}else{var Wr=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(Wr),Ke.push(Wr)}}return Ke},mr.parseBindingListItem=function(R){return R},mr.parseMaybeDefault=function(R,_e,At){if(At=At||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(pe.eq))return At;var Ke=this.startNodeAt(R,_e);return Ke.left=At,Ke.right=this.parseMaybeAssign(),this.finishNode(Ke,"AssignmentPattern")},mr.checkLVal=function(R,_e,At){switch(_e===void 0&&(_e=wt),R.type){case"Identifier":_e===Re&&R.name==="let"&&this.raiseRecoverable(R.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(R.name)&&this.raiseRecoverable(R.start,(_e?"Binding ":"Assigning to ")+R.name+" in strict mode"),At&&(je(At,R.name)&&this.raiseRecoverable(R.start,"Argument name clash"),At[R.name]=!0),_e!==wt&&_e!==q&&this.declareName(R.name,_e,R.start);break;case"ChainExpression":this.raiseRecoverable(R.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":_e&&this.raiseRecoverable(R.start,"Binding member expression");break;case"ObjectPattern":for(var Ke=0,nr=R.properties;Ke<nr.length;Ke+=1){var wr=nr[Ke];this.checkLVal(wr,_e,At)}break;case"Property":this.checkLVal(R.value,_e,At);break;case"ArrayPattern":for(var Wr=0,In=R.elements;Wr<In.length;Wr+=1){var Dn=In[Wr];Dn&&this.checkLVal(Dn,_e,At)}break;case"AssignmentPattern":this.checkLVal(R.left,_e,At);break;case"RestElement":this.checkLVal(R.argument,_e,At);break;case"ParenthesizedExpression":this.checkLVal(R.expression,_e,At);break;default:this.raise(R.start,(_e?"Binding":"Assigning to")+" rvalue")}};var Ar=G.prototype;Ar.checkPropClash=function(R,_e,At){if(!(this.options.ecmaVersion>=9&&R.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(R.computed||R.method||R.shorthand))){var Ke=R.key,nr;switch(Ke.type){case"Identifier":nr=Ke.name;break;case"Literal":nr=String(Ke.value);break;default:return}var wr=R.kind;if(this.options.ecmaVersion>=6){nr==="__proto__"&&wr==="init"&&(_e.proto&&(At?At.doubleProto<0&&(At.doubleProto=Ke.start):this.raiseRecoverable(Ke.start,"Redefinition of __proto__ property")),_e.proto=!0);return}nr="$"+nr;var Wr=_e[nr];if(Wr){var In;wr==="init"?In=this.strict&&Wr.init||Wr.get||Wr.set:In=Wr.init||Wr[wr],In&&this.raiseRecoverable(Ke.start,"Redefinition of property")}else Wr=_e[nr]={init:!1,get:!1,set:!1};Wr[wr]=!0}},Ar.parseExpression=function(R,_e){var At=this.start,Ke=this.startLoc,nr=this.parseMaybeAssign(R,_e);if(this.type===pe.comma){var wr=this.startNodeAt(At,Ke);for(wr.expressions=[nr];this.eat(pe.comma);)wr.expressions.push(this.parseMaybeAssign(R,_e));return this.finishNode(wr,"SequenceExpression")}return nr},Ar.parseMaybeAssign=function(R,_e,At){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(R);this.exprAllowed=!1}var Ke=!1,nr=-1,wr=-1;_e?(nr=_e.parenthesizedAssign,wr=_e.trailingComma,_e.parenthesizedAssign=_e.trailingComma=-1):(_e=new W,Ke=!0);var Wr=this.start,In=this.startLoc;(this.type===pe.parenL||this.type===pe.name)&&(this.potentialArrowAt=this.start);var Dn=this.parseMaybeConditional(R,_e);if(At&&(Dn=At.call(this,Dn,Wr,In)),this.type.isAssign){var Mi=this.startNodeAt(Wr,In);return Mi.operator=this.value,Mi.left=this.type===pe.eq?this.toAssignable(Dn,!1,_e):Dn,Ke||(_e.parenthesizedAssign=_e.trailingComma=_e.doubleProto=-1),_e.shorthandAssign>=Mi.left.start&&(_e.shorthandAssign=-1),this.checkLVal(Dn),this.next(),Mi.right=this.parseMaybeAssign(R),this.finishNode(Mi,"AssignmentExpression")}else Ke&&this.checkExpressionErrors(_e,!0);return nr>-1&&(_e.parenthesizedAssign=nr),wr>-1&&(_e.trailingComma=wr),Dn},Ar.parseMaybeConditional=function(R,_e){var At=this.start,Ke=this.startLoc,nr=this.parseExprOps(R,_e);if(this.checkExpressionErrors(_e))return nr;if(this.eat(pe.question)){var wr=this.startNodeAt(At,Ke);return wr.test=nr,wr.consequent=this.parseMaybeAssign(),this.expect(pe.colon),wr.alternate=this.parseMaybeAssign(R),this.finishNode(wr,"ConditionalExpression")}return nr},Ar.parseExprOps=function(R,_e){var At=this.start,Ke=this.startLoc,nr=this.parseMaybeUnary(_e,!1);return this.checkExpressionErrors(_e)||nr.start===At&&nr.type==="ArrowFunctionExpression"?nr:this.parseExprOp(nr,At,Ke,-1,R)},Ar.parseExprOp=function(R,_e,At,Ke,nr){var wr=this.type.binop;if(wr!=null&&(!nr||this.type!==pe._in)&&wr>Ke){var Wr=this.type===pe.logicalOR||this.type===pe.logicalAND,In=this.type===pe.coalesce;In&&(wr=pe.logicalAND.binop);var Dn=this.value;this.next();var Mi=this.start,Bi=this.startLoc,io=this.parseExprOp(this.parseMaybeUnary(null,!1),Mi,Bi,wr,nr),co=this.buildBinary(_e,At,R,io,Dn,Wr||In);return(Wr&&this.type===pe.coalesce||In&&(this.type===pe.logicalOR||this.type===pe.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(co,_e,At,Ke,nr)}return R},Ar.buildBinary=function(R,_e,At,Ke,nr,wr){var Wr=this.startNodeAt(R,_e);return Wr.left=At,Wr.operator=nr,Wr.right=Ke,this.finishNode(Wr,wr?"LogicalExpression":"BinaryExpression")},Ar.parseMaybeUnary=function(R,_e){var At=this.start,Ke=this.startLoc,nr;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))nr=this.parseAwait(),_e=!0;else if(this.type.prefix){var wr=this.startNode(),Wr=this.type===pe.incDec;wr.operator=this.value,wr.prefix=!0,this.next(),wr.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(R,!0),Wr?this.checkLVal(wr.argument):this.strict&&wr.operator==="delete"&&wr.argument.type==="Identifier"?this.raiseRecoverable(wr.start,"Deleting local variable in strict mode"):_e=!0,nr=this.finishNode(wr,Wr?"UpdateExpression":"UnaryExpression")}else{if(nr=this.parseExprSubscripts(R),this.checkExpressionErrors(R))return nr;for(;this.type.postfix&&!this.canInsertSemicolon();){var In=this.startNodeAt(At,Ke);In.operator=this.value,In.prefix=!1,In.argument=nr,this.checkLVal(nr),this.next(),nr=this.finishNode(In,"UpdateExpression")}}return!_e&&this.eat(pe.starstar)?this.buildBinary(At,Ke,nr,this.parseMaybeUnary(null,!1),"**",!1):nr},Ar.parseExprSubscripts=function(R){var _e=this.start,At=this.startLoc,Ke=this.parseExprAtom(R);if(Ke.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Ke;var nr=this.parseSubscripts(Ke,_e,At);return R&&nr.type==="MemberExpression"&&(R.parenthesizedAssign>=nr.start&&(R.parenthesizedAssign=-1),R.parenthesizedBind>=nr.start&&(R.parenthesizedBind=-1)),nr},Ar.parseSubscripts=function(R,_e,At,Ke){for(var nr=this.options.ecmaVersion>=8&&R.type==="Identifier"&&R.name==="async"&&this.lastTokEnd===R.end&&!this.canInsertSemicolon()&&R.end-R.start===5&&this.potentialArrowAt===R.start,wr=!1;;){var Wr=this.parseSubscript(R,_e,At,Ke,nr,wr);if(Wr.optional&&(wr=!0),Wr===R||Wr.type==="ArrowFunctionExpression"){if(wr){var In=this.startNodeAt(_e,At);In.expression=Wr,Wr=this.finishNode(In,"ChainExpression")}return Wr}R=Wr}},Ar.parseSubscript=function(R,_e,At,Ke,nr,wr){var Wr=this.options.ecmaVersion>=11,In=Wr&&this.eat(pe.questionDot);Ke&&In&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Dn=this.eat(pe.bracketL);if(Dn||In&&this.type!==pe.parenL&&this.type!==pe.backQuote||this.eat(pe.dot)){var Mi=this.startNodeAt(_e,At);Mi.object=R,Mi.property=Dn?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),Mi.computed=!!Dn,Dn&&this.expect(pe.bracketR),Wr&&(Mi.optional=In),R=this.finishNode(Mi,"MemberExpression")}else if(!Ke&&this.eat(pe.parenL)){var Bi=new W,io=this.yieldPos,co=this.awaitPos,Sa=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ko=this.parseExprList(pe.parenR,this.options.ecmaVersion>=8,!1,Bi);if(nr&&!In&&!this.canInsertSemicolon()&&this.eat(pe.arrow))return this.checkPatternErrors(Bi,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=io,this.awaitPos=co,this.awaitIdentPos=Sa,this.parseArrowExpression(this.startNodeAt(_e,At),Ko,!0);this.checkExpressionErrors(Bi,!0),this.yieldPos=io||this.yieldPos,this.awaitPos=co||this.awaitPos,this.awaitIdentPos=Sa||this.awaitIdentPos;var Co=this.startNodeAt(_e,At);Co.callee=R,Co.arguments=Ko,Wr&&(Co.optional=In),R=this.finishNode(Co,"CallExpression")}else if(this.type===pe.backQuote){(In||wr)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Oo=this.startNodeAt(_e,At);Oo.tag=R,Oo.quasi=this.parseTemplate({isTagged:!0}),R=this.finishNode(Oo,"TaggedTemplateExpression")}return R},Ar.parseExprAtom=function(R){this.type===pe.slash&&this.readRegexp();var _e,At=this.potentialArrowAt===this.start;switch(this.type){case pe._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),_e=this.startNode(),this.next(),this.type===pe.parenL&&!this.allowDirectSuper&&this.raise(_e.start,"super() call outside constructor of a subclass"),this.type!==pe.dot&&this.type!==pe.bracketL&&this.type!==pe.parenL&&this.unexpected(),this.finishNode(_e,"Super");case pe._this:return _e=this.startNode(),this.next(),this.finishNode(_e,"ThisExpression");case pe.name:var Ke=this.start,nr=this.startLoc,wr=this.containsEsc,Wr=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!wr&&Wr.name==="async"&&!this.canInsertSemicolon()&&this.eat(pe._function))return this.parseFunction(this.startNodeAt(Ke,nr),0,!1,!0);if(At&&!this.canInsertSemicolon()){if(this.eat(pe.arrow))return this.parseArrowExpression(this.startNodeAt(Ke,nr),[Wr],!1);if(this.options.ecmaVersion>=8&&Wr.name==="async"&&this.type===pe.name&&!wr)return Wr=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(pe.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Ke,nr),[Wr],!0)}return Wr;case pe.regexp:var In=this.value;return _e=this.parseLiteral(In.value),_e.regex={pattern:In.pattern,flags:In.flags},_e;case pe.num:case pe.string:return this.parseLiteral(this.value);case pe._null:case pe._true:case pe._false:return _e=this.startNode(),_e.value=this.type===pe._null?null:this.type===pe._true,_e.raw=this.type.keyword,this.next(),this.finishNode(_e,"Literal");case pe.parenL:var Dn=this.start,Mi=this.parseParenAndDistinguishExpression(At);return R&&(R.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Mi)&&(R.parenthesizedAssign=Dn),R.parenthesizedBind<0&&(R.parenthesizedBind=Dn)),Mi;case pe.bracketL:return _e=this.startNode(),this.next(),_e.elements=this.parseExprList(pe.bracketR,!0,!0,R),this.finishNode(_e,"ArrayExpression");case pe.braceL:return this.parseObj(!1,R);case pe._function:return _e=this.startNode(),this.next(),this.parseFunction(_e,0);case pe._class:return this.parseClass(this.startNode(),!1);case pe._new:return this.parseNew();case pe.backQuote:return this.parseTemplate();case pe._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Ar.parseExprImport=function(){var R=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var _e=this.parseIdent(!0);switch(this.type){case pe.parenL:return this.parseDynamicImport(R);case pe.dot:return R.meta=_e,this.parseImportMeta(R);default:this.unexpected()}},Ar.parseDynamicImport=function(R){if(this.next(),R.source=this.parseMaybeAssign(),!this.eat(pe.parenR)){var _e=this.start;this.eat(pe.comma)&&this.eat(pe.parenR)?this.raiseRecoverable(_e,"Trailing comma is not allowed in import()"):this.unexpected(_e)}return this.finishNode(R,"ImportExpression")},Ar.parseImportMeta=function(R){this.next();var _e=this.containsEsc;return R.property=this.parseIdent(!0),R.property.name!=="meta"&&this.raiseRecoverable(R.property.start,"The only valid meta property for import is 'import.meta'"),_e&&this.raiseRecoverable(R.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(R.start,"Cannot use 'import.meta' outside a module"),this.finishNode(R,"MetaProperty")},Ar.parseLiteral=function(R){var _e=this.startNode();return _e.value=R,_e.raw=this.input.slice(this.start,this.end),_e.raw.charCodeAt(_e.raw.length-1)===110&&(_e.bigint=_e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(_e,"Literal")},Ar.parseParenExpression=function(){this.expect(pe.parenL);var R=this.parseExpression();return this.expect(pe.parenR),R},Ar.parseParenAndDistinguishExpression=function(R){var _e=this.start,At=this.startLoc,Ke,nr=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var wr=this.start,Wr=this.startLoc,In=[],Dn=!0,Mi=!1,Bi=new W,io=this.yieldPos,co=this.awaitPos,Sa;for(this.yieldPos=0,this.awaitPos=0;this.type!==pe.parenR;)if(Dn?Dn=!1:this.expect(pe.comma),nr&&this.afterTrailingComma(pe.parenR,!0)){Mi=!0;break}else if(this.type===pe.ellipsis){Sa=this.start,In.push(this.parseParenItem(this.parseRestBinding())),this.type===pe.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else In.push(this.parseMaybeAssign(!1,Bi,this.parseParenItem));var Ko=this.start,Co=this.startLoc;if(this.expect(pe.parenR),R&&!this.canInsertSemicolon()&&this.eat(pe.arrow))return this.checkPatternErrors(Bi,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=io,this.awaitPos=co,this.parseParenArrowList(_e,At,In);(!In.length||Mi)&&this.unexpected(this.lastTokStart),Sa&&this.unexpected(Sa),this.checkExpressionErrors(Bi,!0),this.yieldPos=io||this.yieldPos,this.awaitPos=co||this.awaitPos,In.length>1?(Ke=this.startNodeAt(wr,Wr),Ke.expressions=In,this.finishNodeAt(Ke,"SequenceExpression",Ko,Co)):Ke=In[0]}else Ke=this.parseParenExpression();if(this.options.preserveParens){var Oo=this.startNodeAt(_e,At);return Oo.expression=Ke,this.finishNode(Oo,"ParenthesizedExpression")}else return Ke},Ar.parseParenItem=function(R){return R},Ar.parseParenArrowList=function(R,_e,At){return this.parseArrowExpression(this.startNodeAt(R,_e),At)};var Er=[];Ar.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var R=this.startNode(),_e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(pe.dot)){R.meta=_e;var At=this.containsEsc;return R.property=this.parseIdent(!0),R.property.name!=="target"&&this.raiseRecoverable(R.property.start,"The only valid meta property for new is 'new.target'"),At&&this.raiseRecoverable(R.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(R.start,"'new.target' can only be used in functions"),this.finishNode(R,"MetaProperty")}var Ke=this.start,nr=this.startLoc,wr=this.type===pe._import;return R.callee=this.parseSubscripts(this.parseExprAtom(),Ke,nr,!0),wr&&R.callee.type==="ImportExpression"&&this.raise(Ke,"Cannot use new with import()"),this.eat(pe.parenL)?R.arguments=this.parseExprList(pe.parenR,this.options.ecmaVersion>=8,!1):R.arguments=Er,this.finishNode(R,"NewExpression")},Ar.parseTemplateElement=function(R){var _e=R.isTagged,At=this.startNode();return this.type===pe.invalidTemplate?(_e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),At.value={raw:this.value,cooked:null}):At.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),At.tail=this.type===pe.backQuote,this.finishNode(At,"TemplateElement")},Ar.parseTemplate=function(R){R===void 0&&(R={});var _e=R.isTagged;_e===void 0&&(_e=!1);var At=this.startNode();this.next(),At.expressions=[];var Ke=this.parseTemplateElement({isTagged:_e});for(At.quasis=[Ke];!Ke.tail;)this.type===pe.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(pe.dollarBraceL),At.expressions.push(this.parseExpression()),this.expect(pe.braceR),At.quasis.push(Ke=this.parseTemplateElement({isTagged:_e}));return this.next(),this.finishNode(At,"TemplateLiteral")},Ar.isAsyncProp=function(R){return!R.computed&&R.key.type==="Identifier"&&R.key.name==="async"&&(this.type===pe.name||this.type===pe.num||this.type===pe.string||this.type===pe.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===pe.star)&&!$e.test(this.input.slice(this.lastTokEnd,this.start))},Ar.parseObj=function(R,_e){var At=this.startNode(),Ke=!0,nr={};for(At.properties=[],this.next();!this.eat(pe.braceR);){if(Ke)Ke=!1;else if(this.expect(pe.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(pe.braceR))break;var wr=this.parseProperty(R,_e);R||this.checkPropClash(wr,nr,_e),At.properties.push(wr)}return this.finishNode(At,R?"ObjectPattern":"ObjectExpression")},Ar.parseProperty=function(R,_e){var At=this.startNode(),Ke,nr,wr,Wr;if(this.options.ecmaVersion>=9&&this.eat(pe.ellipsis))return R?(At.argument=this.parseIdent(!1),this.type===pe.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(At,"RestElement")):(this.type===pe.parenL&&_e&&(_e.parenthesizedAssign<0&&(_e.parenthesizedAssign=this.start),_e.parenthesizedBind<0&&(_e.parenthesizedBind=this.start)),At.argument=this.parseMaybeAssign(!1,_e),this.type===pe.comma&&_e&&_e.trailingComma<0&&(_e.trailingComma=this.start),this.finishNode(At,"SpreadElement"));this.options.ecmaVersion>=6&&(At.method=!1,At.shorthand=!1,(R||_e)&&(wr=this.start,Wr=this.startLoc),R||(Ke=this.eat(pe.star)));var In=this.containsEsc;return this.parsePropertyName(At),!R&&!In&&this.options.ecmaVersion>=8&&!Ke&&this.isAsyncProp(At)?(nr=!0,Ke=this.options.ecmaVersion>=9&&this.eat(pe.star),this.parsePropertyName(At,_e)):nr=!1,this.parsePropertyValue(At,R,Ke,nr,wr,Wr,_e,In),this.finishNode(At,"Property")},Ar.parsePropertyValue=function(R,_e,At,Ke,nr,wr,Wr,In){if((At||Ke)&&this.type===pe.colon&&this.unexpected(),this.eat(pe.colon))R.value=_e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Wr),R.kind="init";else if(this.options.ecmaVersion>=6&&this.type===pe.parenL)_e&&this.unexpected(),R.kind="init",R.method=!0,R.value=this.parseMethod(At,Ke);else if(!_e&&!In&&this.options.ecmaVersion>=5&&!R.computed&&R.key.type==="Identifier"&&(R.key.name==="get"||R.key.name==="set")&&this.type!==pe.comma&&this.type!==pe.braceR&&this.type!==pe.eq){(At||Ke)&&this.unexpected(),R.kind=R.key.name,this.parsePropertyName(R),R.value=this.parseMethod(!1);var Dn=R.kind==="get"?0:1;if(R.value.params.length!==Dn){var Mi=R.value.start;R.kind==="get"?this.raiseRecoverable(Mi,"getter should have no params"):this.raiseRecoverable(Mi,"setter should have exactly one param")}else R.kind==="set"&&R.value.params[0].type==="RestElement"&&this.raiseRecoverable(R.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!R.computed&&R.key.type==="Identifier"?((At||Ke)&&this.unexpected(),this.checkUnreserved(R.key),R.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=nr),R.kind="init",_e?R.value=this.parseMaybeDefault(nr,wr,R.key):this.type===pe.eq&&Wr?(Wr.shorthandAssign<0&&(Wr.shorthandAssign=this.start),R.value=this.parseMaybeDefault(nr,wr,R.key)):R.value=R.key,R.shorthand=!0):this.unexpected()},Ar.parsePropertyName=function(R){if(this.options.ecmaVersion>=6){if(this.eat(pe.bracketL))return R.computed=!0,R.key=this.parseMaybeAssign(),this.expect(pe.bracketR),R.key;R.computed=!1}return R.key=this.type===pe.num||this.type===pe.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Ar.initFunction=function(R){R.id=null,this.options.ecmaVersion>=6&&(R.generator=R.expression=!1),this.options.ecmaVersion>=8&&(R.async=!1)},Ar.parseMethod=function(R,_e,At){var Ke=this.startNode(),nr=this.yieldPos,wr=this.awaitPos,Wr=this.awaitIdentPos;return this.initFunction(Ke),this.options.ecmaVersion>=6&&(Ke.generator=R),this.options.ecmaVersion>=8&&(Ke.async=!!_e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ge(_e,Ke.generator)|Rt|(At?pt:0)),this.expect(pe.parenL),Ke.params=this.parseBindingList(pe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Ke,!1,!0),this.yieldPos=nr,this.awaitPos=wr,this.awaitIdentPos=Wr,this.finishNode(Ke,"FunctionExpression")},Ar.parseArrowExpression=function(R,_e,At){var Ke=this.yieldPos,nr=this.awaitPos,wr=this.awaitIdentPos;return this.enterScope(Ge(At,!1)|Ot),this.initFunction(R),this.options.ecmaVersion>=8&&(R.async=!!At),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,R.params=this.toAssignableList(_e,!0),this.parseFunctionBody(R,!0,!1),this.yieldPos=Ke,this.awaitPos=nr,this.awaitIdentPos=wr,this.finishNode(R,"ArrowFunctionExpression")},Ar.parseFunctionBody=function(R,_e,At){var Ke=_e&&this.type!==pe.braceL,nr=this.strict,wr=!1;if(Ke)R.body=this.parseMaybeAssign(),R.expression=!0,this.checkParams(R,!1);else{var Wr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(R.params);(!nr||Wr)&&(wr=this.strictDirective(this.end),wr&&Wr&&this.raiseRecoverable(R.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var In=this.labels;this.labels=[],wr&&(this.strict=!0),this.checkParams(R,!nr&&!wr&&!_e&&!At&&this.isSimpleParamList(R.params)),this.strict&&R.id&&this.checkLVal(R.id,q),R.body=this.parseBlock(!1,void 0,wr&&!nr),R.expression=!1,this.adaptDirectivePrologue(R.body.body),this.labels=In}this.exitScope()},Ar.isSimpleParamList=function(R){for(var _e=0,At=R;_e<At.length;_e+=1){var Ke=At[_e];if(Ke.type!=="Identifier")return!1}return!0},Ar.checkParams=function(R,_e){for(var At={},Ke=0,nr=R.params;Ke<nr.length;Ke+=1){var wr=nr[Ke];this.checkLVal(wr,ee,_e?null:At)}},Ar.parseExprList=function(R,_e,At,Ke){for(var nr=[],wr=!0;!this.eat(R);){if(wr)wr=!1;else if(this.expect(pe.comma),_e&&this.afterTrailingComma(R))break;var Wr=void 0;At&&this.type===pe.comma?Wr=null:this.type===pe.ellipsis?(Wr=this.parseSpread(Ke),Ke&&this.type===pe.comma&&Ke.trailingComma<0&&(Ke.trailingComma=this.start)):Wr=this.parseMaybeAssign(!1,Ke),nr.push(Wr)}return nr},Ar.checkUnreserved=function(R){var _e=R.start,At=R.end,Ke=R.name;if(this.inGenerator&&Ke==="yield"&&this.raiseRecoverable(_e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Ke==="await"&&this.raiseRecoverable(_e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(Ke)&&this.raise(_e,"Unexpected keyword '"+Ke+"'"),!(this.options.ecmaVersion<6&&this.input.slice(_e,At).indexOf("\\")!==-1)){var nr=this.strict?this.reservedWordsStrict:this.reservedWords;nr.test(Ke)&&(!this.inAsync&&Ke==="await"&&this.raiseRecoverable(_e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(_e,"The keyword '"+Ke+"' is reserved"))}},Ar.parseIdent=function(R,_e){var At=this.startNode();return this.type===pe.name?At.name=this.value:this.type.keyword?(At.name=this.type.keyword,(At.name==="class"||At.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!R),this.finishNode(At,"Identifier"),R||(this.checkUnreserved(At),At.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=At.start)),At},Ar.parseYield=function(R){this.yieldPos||(this.yieldPos=this.start);var _e=this.startNode();return this.next(),this.type===pe.semi||this.canInsertSemicolon()||this.type!==pe.star&&!this.type.startsExpr?(_e.delegate=!1,_e.argument=null):(_e.delegate=this.eat(pe.star),_e.argument=this.parseMaybeAssign(R)),this.finishNode(_e,"YieldExpression")},Ar.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var R=this.startNode();return this.next(),R.argument=this.parseMaybeUnary(null,!1),this.finishNode(R,"AwaitExpression")};var Zt=G.prototype;Zt.raise=function(R,_e){var At=Ne(this.input,R);_e+=" ("+At.line+":"+At.column+")";var Ke=new SyntaxError(_e);throw Ke.pos=R,Ke.loc=At,Ke.raisedAt=this.pos,Ke},Zt.raiseRecoverable=Zt.raise,Zt.curPosition=function(){if(this.options.locations)return new ne(this.curLine,this.pos-this.lineStart)};var Tr=G.prototype,pn=function(_e){this.flags=_e,this.var=[],this.lexical=[],this.functions=[]};Tr.enterScope=function(R){this.scopeStack.push(new pn(R))},Tr.exitScope=function(){this.scopeStack.pop()},Tr.treatFunctionsAsVarInScope=function(R){return R.flags&It||!this.inModule&&R.flags&ft},Tr.declareName=function(R,_e,At){var Ke=!1;if(_e===Re){var nr=this.currentScope();Ke=nr.lexical.indexOf(R)>-1||nr.functions.indexOf(R)>-1||nr.var.indexOf(R)>-1,nr.lexical.push(R),this.inModule&&nr.flags&ft&&delete this.undefinedExports[R]}else if(_e===D){var wr=this.currentScope();wr.lexical.push(R)}else if(_e===dt){var Wr=this.currentScope();this.treatFunctionsAsVar?Ke=Wr.lexical.indexOf(R)>-1:Ke=Wr.lexical.indexOf(R)>-1||Wr.var.indexOf(R)>-1,Wr.functions.push(R)}else for(var In=this.scopeStack.length-1;In>=0;--In){var Dn=this.scopeStack[In];if(Dn.lexical.indexOf(R)>-1&&!(Dn.flags&mt&&Dn.lexical[0]===R)||!this.treatFunctionsAsVarInScope(Dn)&&Dn.functions.indexOf(R)>-1){Ke=!0;break}if(Dn.var.push(R),this.inModule&&Dn.flags&ft&&delete this.undefinedExports[R],Dn.flags&fe)break}Ke&&this.raiseRecoverable(At,"Identifier '"+R+"' has already been declared")},Tr.checkLocalExport=function(R){this.scopeStack[0].lexical.indexOf(R.name)===-1&&this.scopeStack[0].var.indexOf(R.name)===-1&&(this.undefinedExports[R.name]=R)},Tr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Tr.currentVarScope=function(){for(var R=this.scopeStack.length-1;;R--){var _e=this.scopeStack[R];if(_e.flags&fe)return _e}},Tr.currentThisScope=function(){for(var R=this.scopeStack.length-1;;R--){var _e=this.scopeStack[R];if(_e.flags&fe&&!(_e.flags&Ot))return _e}};var un=function(_e,At,Ke){this.type="",this.start=At,this.end=0,_e.options.locations&&(this.loc=new xe(_e,Ke)),_e.options.directSourceFile&&(this.sourceFile=_e.options.directSourceFile),_e.options.ranges&&(this.range=[At,0])},Zn=G.prototype;Zn.startNode=function(){return new un(this,this.start,this.startLoc)},Zn.startNodeAt=function(R,_e){return new un(this,R,_e)};function Cr(R,_e,At,Ke){return R.type=_e,R.end=At,this.options.locations&&(R.loc.end=Ke),this.options.ranges&&(R.range[1]=At),R}Zn.finishNode=function(R,_e){return Cr.call(this,R,_e,this.lastTokEnd,this.lastTokEndLoc)},Zn.finishNodeAt=function(R,_e,At,Ke){return Cr.call(this,R,_e,At,Ke)};var Nr=function(_e,At,Ke,nr,wr){this.token=_e,this.isExpr=!!At,this.preserveSpace=!!Ke,this.override=nr,this.generator=!!wr},bt={b_stat:new Nr("{",!1),b_expr:new Nr("{",!0),b_tmpl:new Nr("${",!1),p_stat:new Nr("(",!1),p_expr:new Nr("(",!0),q_tmpl:new Nr("`",!0,!0,function(R){return R.tryReadTemplateToken()}),f_stat:new Nr("function",!1),f_expr:new Nr("function",!0),f_expr_gen:new Nr("function",!0,!1,null,!0),f_gen:new Nr("function",!1,!1,null,!0)},jn=G.prototype;jn.initialContext=function(){return[bt.b_stat]},jn.braceIsBlock=function(R){var _e=this.curContext();return _e===bt.f_expr||_e===bt.f_stat?!0:R===pe.colon&&(_e===bt.b_stat||_e===bt.b_expr)?!_e.isExpr:R===pe._return||R===pe.name&&this.exprAllowed?$e.test(this.input.slice(this.lastTokEnd,this.start)):R===pe._else||R===pe.semi||R===pe.eof||R===pe.parenR||R===pe.arrow?!0:R===pe.braceL?_e===bt.b_stat:R===pe._var||R===pe._const||R===pe.name?!1:!this.exprAllowed},jn.inGeneratorContext=function(){for(var R=this.context.length-1;R>=1;R--){var _e=this.context[R];if(_e.token==="function")return _e.generator}return!1},jn.updateContext=function(R){var _e,At=this.type;At.keyword&&R===pe.dot?this.exprAllowed=!1:(_e=At.updateContext)?_e.call(this,R):this.exprAllowed=At.beforeExpr},pe.parenR.updateContext=pe.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var R=this.context.pop();R===bt.b_stat&&this.curContext().token==="function"&&(R=this.context.pop()),this.exprAllowed=!R.isExpr},pe.braceL.updateContext=function(R){this.context.push(this.braceIsBlock(R)?bt.b_stat:bt.b_expr),this.exprAllowed=!0},pe.dollarBraceL.updateContext=function(){this.context.push(bt.b_tmpl),this.exprAllowed=!0},pe.parenL.updateContext=function(R){var _e=R===pe._if||R===pe._for||R===pe._with||R===pe._while;this.context.push(_e?bt.p_stat:bt.p_expr),this.exprAllowed=!0},pe.incDec.updateContext=function(){},pe._function.updateContext=pe._class.updateContext=function(R){R.beforeExpr&&R!==pe.semi&&R!==pe._else&&!(R===pe._return&&$e.test(this.input.slice(this.lastTokEnd,this.start)))&&!((R===pe.colon||R===pe.braceL)&&this.curContext()===bt.b_stat)?this.context.push(bt.f_expr):this.context.push(bt.f_stat),this.exprAllowed=!1},pe.backQuote.updateContext=function(){this.curContext()===bt.q_tmpl?this.context.pop():this.context.push(bt.q_tmpl),this.exprAllowed=!1},pe.star.updateContext=function(R){if(R===pe._function){var _e=this.context.length-1;this.context[_e]===bt.f_expr?this.context[_e]=bt.f_expr_gen:this.context[_e]=bt.f_gen}this.exprAllowed=!0},pe.name.updateContext=function(R){var _e=!1;this.options.ecmaVersion>=6&&R!==pe.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(_e=!0),this.exprAllowed=_e};var Pt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",zt=Pt+" Extended_Pictographic",Qt=zt,dr={9:Pt,10:zt,11:Qt},_r="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Hr="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Qr=Hr+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",fr=Qr+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",tt={9:Hr,10:Qr,11:fr},Yr={};function Tn(R){var _e=Yr[R]={binary:Me(dr[R]+" "+_r),nonBinary:{General_Category:Me(_r),Script:Me(tt[R])}};_e.nonBinary.Script_Extensions=_e.nonBinary.Script,_e.nonBinary.gc=_e.nonBinary.General_Category,_e.nonBinary.sc=_e.nonBinary.Script,_e.nonBinary.scx=_e.nonBinary.Script_Extensions}Tn(9),Tn(10),Tn(11);var wn=G.prototype,Nn=function(_e){this.parser=_e,this.validFlags="gim"+(_e.options.ecmaVersion>=6?"uy":"")+(_e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Yr[_e.options.ecmaVersion>=11?11:_e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Nn.prototype.reset=function(_e,At,Ke){var nr=Ke.indexOf("u")!==-1;this.start=_e|0,this.source=At+"",this.flags=Ke,this.switchU=nr&&this.parser.options.ecmaVersion>=6,this.switchN=nr&&this.parser.options.ecmaVersion>=9},Nn.prototype.raise=function(_e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+_e)},Nn.prototype.at=function(_e,At){At===void 0&&(At=!1);var Ke=this.source,nr=Ke.length;if(_e>=nr)return-1;var wr=Ke.charCodeAt(_e);if(!(At||this.switchU)||wr<=55295||wr>=57344||_e+1>=nr)return wr;var Wr=Ke.charCodeAt(_e+1);return Wr>=56320&&Wr<=57343?(wr<<10)+Wr-56613888:wr},Nn.prototype.nextIndex=function(_e,At){At===void 0&&(At=!1);var Ke=this.source,nr=Ke.length;if(_e>=nr)return nr;var wr=Ke.charCodeAt(_e),Wr;return!(At||this.switchU)||wr<=55295||wr>=57344||_e+1>=nr||(Wr=Ke.charCodeAt(_e+1))<56320||Wr>57343?_e+1:_e+2},Nn.prototype.current=function(_e){return _e===void 0&&(_e=!1),this.at(this.pos,_e)},Nn.prototype.lookahead=function(_e){return _e===void 0&&(_e=!1),this.at(this.nextIndex(this.pos,_e),_e)},Nn.prototype.advance=function(_e){_e===void 0&&(_e=!1),this.pos=this.nextIndex(this.pos,_e)},Nn.prototype.eat=function(_e,At){return At===void 0&&(At=!1),this.current(At)===_e?(this.advance(At),!0):!1};function Si(R){return R<=65535?String.fromCharCode(R):(R-=65536,String.fromCharCode((R>>10)+55296,(R&1023)+56320))}wn.validateRegExpFlags=function(R){for(var _e=R.validFlags,At=R.flags,Ke=0;Ke<At.length;Ke++){var nr=At.charAt(Ke);_e.indexOf(nr)===-1&&this.raise(R.start,"Invalid regular expression flag"),At.indexOf(nr,Ke+1)>-1&&this.raise(R.start,"Duplicate regular expression flag")}},wn.validateRegExpPattern=function(R){this.regexp_pattern(R),!R.switchN&&this.options.ecmaVersion>=9&&R.groupNames.length>0&&(R.switchN=!0,this.regexp_pattern(R))},wn.regexp_pattern=function(R){R.pos=0,R.lastIntValue=0,R.lastStringValue="",R.lastAssertionIsQuantifiable=!1,R.numCapturingParens=0,R.maxBackReference=0,R.groupNames.length=0,R.backReferenceNames.length=0,this.regexp_disjunction(R),R.pos!==R.source.length&&(R.eat(41)&&R.raise("Unmatched ')'"),(R.eat(93)||R.eat(125))&&R.raise("Lone quantifier brackets")),R.maxBackReference>R.numCapturingParens&&R.raise("Invalid escape");for(var _e=0,At=R.backReferenceNames;_e<At.length;_e+=1){var Ke=At[_e];R.groupNames.indexOf(Ke)===-1&&R.raise("Invalid named capture referenced")}},wn.regexp_disjunction=function(R){for(this.regexp_alternative(R);R.eat(124);)this.regexp_alternative(R);this.regexp_eatQuantifier(R,!0)&&R.raise("Nothing to repeat"),R.eat(123)&&R.raise("Lone quantifier brackets")},wn.regexp_alternative=function(R){for(;R.pos<R.source.length&&this.regexp_eatTerm(R););},wn.regexp_eatTerm=function(R){return this.regexp_eatAssertion(R)?(R.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(R)&&R.switchU&&R.raise("Invalid quantifier"),!0):(R.switchU?this.regexp_eatAtom(R):this.regexp_eatExtendedAtom(R))?(this.regexp_eatQuantifier(R),!0):!1},wn.regexp_eatAssertion=function(R){var _e=R.pos;if(R.lastAssertionIsQuantifiable=!1,R.eat(94)||R.eat(36))return!0;if(R.eat(92)){if(R.eat(66)||R.eat(98))return!0;R.pos=_e}if(R.eat(40)&&R.eat(63)){var At=!1;if(this.options.ecmaVersion>=9&&(At=R.eat(60)),R.eat(61)||R.eat(33))return this.regexp_disjunction(R),R.eat(41)||R.raise("Unterminated group"),R.lastAssertionIsQuantifiable=!At,!0}return R.pos=_e,!1},wn.regexp_eatQuantifier=function(R,_e){return _e===void 0&&(_e=!1),this.regexp_eatQuantifierPrefix(R,_e)?(R.eat(63),!0):!1},wn.regexp_eatQuantifierPrefix=function(R,_e){return R.eat(42)||R.eat(43)||R.eat(63)||this.regexp_eatBracedQuantifier(R,_e)},wn.regexp_eatBracedQuantifier=function(R,_e){var At=R.pos;if(R.eat(123)){var Ke=0,nr=-1;if(this.regexp_eatDecimalDigits(R)&&(Ke=R.lastIntValue,R.eat(44)&&this.regexp_eatDecimalDigits(R)&&(nr=R.lastIntValue),R.eat(125)))return nr!==-1&&nr<Ke&&!_e&&R.raise("numbers out of order in {} quantifier"),!0;R.switchU&&!_e&&R.raise("Incomplete quantifier"),R.pos=At}return!1},wn.regexp_eatAtom=function(R){return this.regexp_eatPatternCharacters(R)||R.eat(46)||this.regexp_eatReverseSolidusAtomEscape(R)||this.regexp_eatCharacterClass(R)||this.regexp_eatUncapturingGroup(R)||this.regexp_eatCapturingGroup(R)},wn.regexp_eatReverseSolidusAtomEscape=function(R){var _e=R.pos;if(R.eat(92)){if(this.regexp_eatAtomEscape(R))return!0;R.pos=_e}return!1},wn.regexp_eatUncapturingGroup=function(R){var _e=R.pos;if(R.eat(40)){if(R.eat(63)&&R.eat(58)){if(this.regexp_disjunction(R),R.eat(41))return!0;R.raise("Unterminated group")}R.pos=_e}return!1},wn.regexp_eatCapturingGroup=function(R){if(R.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(R):R.current()===63&&R.raise("Invalid group"),this.regexp_disjunction(R),R.eat(41))return R.numCapturingParens+=1,!0;R.raise("Unterminated group")}return!1},wn.regexp_eatExtendedAtom=function(R){return R.eat(46)||this.regexp_eatReverseSolidusAtomEscape(R)||this.regexp_eatCharacterClass(R)||this.regexp_eatUncapturingGroup(R)||this.regexp_eatCapturingGroup(R)||this.regexp_eatInvalidBracedQuantifier(R)||this.regexp_eatExtendedPatternCharacter(R)},wn.regexp_eatInvalidBracedQuantifier=function(R){return this.regexp_eatBracedQuantifier(R,!0)&&R.raise("Nothing to repeat"),!1},wn.regexp_eatSyntaxCharacter=function(R){var _e=R.current();return fa(_e)?(R.lastIntValue=_e,R.advance(),!0):!1};function fa(R){return R===36||R>=40&&R<=43||R===46||R===63||R>=91&&R<=94||R>=123&&R<=125}wn.regexp_eatPatternCharacters=function(R){for(var _e=R.pos,At=0;(At=R.current())!==-1&&!fa(At);)R.advance();return R.pos!==_e},wn.regexp_eatExtendedPatternCharacter=function(R){var _e=R.current();return _e!==-1&&_e!==36&&!(_e>=40&&_e<=43)&&_e!==46&&_e!==63&&_e!==91&&_e!==94&&_e!==124?(R.advance(),!0):!1},wn.regexp_groupSpecifier=function(R){if(R.eat(63)){if(this.regexp_eatGroupName(R)){R.groupNames.indexOf(R.lastStringValue)!==-1&&R.raise("Duplicate capture group name"),R.groupNames.push(R.lastStringValue);return}R.raise("Invalid group")}},wn.regexp_eatGroupName=function(R){if(R.lastStringValue="",R.eat(60)){if(this.regexp_eatRegExpIdentifierName(R)&&R.eat(62))return!0;R.raise("Invalid capture group name")}return!1},wn.regexp_eatRegExpIdentifierName=function(R){if(R.lastStringValue="",this.regexp_eatRegExpIdentifierStart(R)){for(R.lastStringValue+=Si(R.lastIntValue);this.regexp_eatRegExpIdentifierPart(R);)R.lastStringValue+=Si(R.lastIntValue);return!0}return!1},wn.regexp_eatRegExpIdentifierStart=function(R){var _e=R.pos,At=this.options.ecmaVersion>=11,Ke=R.current(At);return R.advance(At),Ke===92&&this.regexp_eatRegExpUnicodeEscapeSequence(R,At)&&(Ke=R.lastIntValue),Xi(Ke)?(R.lastIntValue=Ke,!0):(R.pos=_e,!1)};function Xi(R){return me(R,!0)||R===36||R===95}wn.regexp_eatRegExpIdentifierPart=function(R){var _e=R.pos,At=this.options.ecmaVersion>=11,Ke=R.current(At);return R.advance(At),Ke===92&&this.regexp_eatRegExpUnicodeEscapeSequence(R,At)&&(Ke=R.lastIntValue),Ln(Ke)?(R.lastIntValue=Ke,!0):(R.pos=_e,!1)};function Ln(R){return Le(R,!0)||R===36||R===95||R===8204||R===8205}wn.regexp_eatAtomEscape=function(R){return this.regexp_eatBackReference(R)||this.regexp_eatCharacterClassEscape(R)||this.regexp_eatCharacterEscape(R)||R.switchN&&this.regexp_eatKGroupName(R)?!0:(R.switchU&&(R.current()===99&&R.raise("Invalid unicode escape"),R.raise("Invalid escape")),!1)},wn.regexp_eatBackReference=function(R){var _e=R.pos;if(this.regexp_eatDecimalEscape(R)){var At=R.lastIntValue;if(R.switchU)return At>R.maxBackReference&&(R.maxBackReference=At),!0;if(At<=R.numCapturingParens)return!0;R.pos=_e}return!1},wn.regexp_eatKGroupName=function(R){if(R.eat(107)){if(this.regexp_eatGroupName(R))return R.backReferenceNames.push(R.lastStringValue),!0;R.raise("Invalid named reference")}return!1},wn.regexp_eatCharacterEscape=function(R){return this.regexp_eatControlEscape(R)||this.regexp_eatCControlLetter(R)||this.regexp_eatZero(R)||this.regexp_eatHexEscapeSequence(R)||this.regexp_eatRegExpUnicodeEscapeSequence(R,!1)||!R.switchU&&this.regexp_eatLegacyOctalEscapeSequence(R)||this.regexp_eatIdentityEscape(R)},wn.regexp_eatCControlLetter=function(R){var _e=R.pos;if(R.eat(99)){if(this.regexp_eatControlLetter(R))return!0;R.pos=_e}return!1},wn.regexp_eatZero=function(R){return R.current()===48&&!jo(R.lookahead())?(R.lastIntValue=0,R.advance(),!0):!1},wn.regexp_eatControlEscape=function(R){var _e=R.current();return _e===116?(R.lastIntValue=9,R.advance(),!0):_e===110?(R.lastIntValue=10,R.advance(),!0):_e===118?(R.lastIntValue=11,R.advance(),!0):_e===102?(R.lastIntValue=12,R.advance(),!0):_e===114?(R.lastIntValue=13,R.advance(),!0):!1},wn.regexp_eatControlLetter=function(R){var _e=R.current();return na(_e)?(R.lastIntValue=_e%32,R.advance(),!0):!1};function na(R){return R>=65&&R<=90||R>=97&&R<=122}wn.regexp_eatRegExpUnicodeEscapeSequence=function(R,_e){_e===void 0&&(_e=!1);var At=R.pos,Ke=_e||R.switchU;if(R.eat(117)){if(this.regexp_eatFixedHexDigits(R,4)){var nr=R.lastIntValue;if(Ke&&nr>=55296&&nr<=56319){var wr=R.pos;if(R.eat(92)&&R.eat(117)&&this.regexp_eatFixedHexDigits(R,4)){var Wr=R.lastIntValue;if(Wr>=56320&&Wr<=57343)return R.lastIntValue=(nr-55296)*1024+(Wr-56320)+65536,!0}R.pos=wr,R.lastIntValue=nr}return!0}if(Ke&&R.eat(123)&&this.regexp_eatHexDigits(R)&&R.eat(125)&&xi(R.lastIntValue))return!0;Ke&&R.raise("Invalid unicode escape"),R.pos=At}return!1};function xi(R){return R>=0&&R<=1114111}wn.regexp_eatIdentityEscape=function(R){if(R.switchU)return this.regexp_eatSyntaxCharacter(R)?!0:R.eat(47)?(R.lastIntValue=47,!0):!1;var _e=R.current();return _e!==99&&(!R.switchN||_e!==107)?(R.lastIntValue=_e,R.advance(),!0):!1},wn.regexp_eatDecimalEscape=function(R){R.lastIntValue=0;var _e=R.current();if(_e>=49&&_e<=57){do R.lastIntValue=10*R.lastIntValue+(_e-48),R.advance();while((_e=R.current())>=48&&_e<=57);return!0}return!1},wn.regexp_eatCharacterClassEscape=function(R){var _e=R.current();if(ta(_e))return R.lastIntValue=-1,R.advance(),!0;if(R.switchU&&this.options.ecmaVersion>=9&&(_e===80||_e===112)){if(R.lastIntValue=-1,R.advance(),R.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(R)&&R.eat(125))return!0;R.raise("Invalid property name")}return!1};function ta(R){return R===100||R===68||R===115||R===83||R===119||R===87}wn.regexp_eatUnicodePropertyValueExpression=function(R){var _e=R.pos;if(this.regexp_eatUnicodePropertyName(R)&&R.eat(61)){var At=R.lastStringValue;if(this.regexp_eatUnicodePropertyValue(R)){var Ke=R.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(R,At,Ke),!0}}if(R.pos=_e,this.regexp_eatLoneUnicodePropertyNameOrValue(R)){var nr=R.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(R,nr),!0}return!1},wn.regexp_validateUnicodePropertyNameAndValue=function(R,_e,At){je(R.unicodeProperties.nonBinary,_e)||R.raise("Invalid property name"),R.unicodeProperties.nonBinary[_e].test(At)||R.raise("Invalid property value")},wn.regexp_validateUnicodePropertyNameOrValue=function(R,_e){R.unicodeProperties.binary.test(_e)||R.raise("Invalid property name")},wn.regexp_eatUnicodePropertyName=function(R){var _e=0;for(R.lastStringValue="";La(_e=R.current());)R.lastStringValue+=Si(_e),R.advance();return R.lastStringValue!==""};function La(R){return na(R)||R===95}wn.regexp_eatUnicodePropertyValue=function(R){var _e=0;for(R.lastStringValue="";Ki(_e=R.current());)R.lastStringValue+=Si(_e),R.advance();return R.lastStringValue!==""};function Ki(R){return La(R)||jo(R)}wn.regexp_eatLoneUnicodePropertyNameOrValue=function(R){return this.regexp_eatUnicodePropertyValue(R)},wn.regexp_eatCharacterClass=function(R){if(R.eat(91)){if(R.eat(94),this.regexp_classRanges(R),R.eat(93))return!0;R.raise("Unterminated character class")}return!1},wn.regexp_classRanges=function(R){for(;this.regexp_eatClassAtom(R);){var _e=R.lastIntValue;if(R.eat(45)&&this.regexp_eatClassAtom(R)){var At=R.lastIntValue;R.switchU&&(_e===-1||At===-1)&&R.raise("Invalid character class"),_e!==-1&&At!==-1&&_e>At&&R.raise("Range out of order in character class")}}},wn.regexp_eatClassAtom=function(R){var _e=R.pos;if(R.eat(92)){if(this.regexp_eatClassEscape(R))return!0;if(R.switchU){var At=R.current();(At===99||gn(At))&&R.raise("Invalid class escape"),R.raise("Invalid escape")}R.pos=_e}var Ke=R.current();return Ke!==93?(R.lastIntValue=Ke,R.advance(),!0):!1},wn.regexp_eatClassEscape=function(R){var _e=R.pos;if(R.eat(98))return R.lastIntValue=8,!0;if(R.switchU&&R.eat(45))return R.lastIntValue=45,!0;if(!R.switchU&&R.eat(99)){if(this.regexp_eatClassControlLetter(R))return!0;R.pos=_e}return this.regexp_eatCharacterClassEscape(R)||this.regexp_eatCharacterEscape(R)},wn.regexp_eatClassControlLetter=function(R){var _e=R.current();return jo(_e)||_e===95?(R.lastIntValue=_e%32,R.advance(),!0):!1},wn.regexp_eatHexEscapeSequence=function(R){var _e=R.pos;if(R.eat(120)){if(this.regexp_eatFixedHexDigits(R,2))return!0;R.switchU&&R.raise("Invalid escape"),R.pos=_e}return!1},wn.regexp_eatDecimalDigits=function(R){var _e=R.pos,At=0;for(R.lastIntValue=0;jo(At=R.current());)R.lastIntValue=10*R.lastIntValue+(At-48),R.advance();return R.pos!==_e};function jo(R){return R>=48&&R<=57}wn.regexp_eatHexDigits=function(R){var _e=R.pos,At=0;for(R.lastIntValue=0;uo(At=R.current());)R.lastIntValue=16*R.lastIntValue+An(At),R.advance();return R.pos!==_e};function uo(R){return R>=48&&R<=57||R>=65&&R<=70||R>=97&&R<=102}function An(R){return R>=65&&R<=70?10+(R-65):R>=97&&R<=102?10+(R-97):R-48}wn.regexp_eatLegacyOctalEscapeSequence=function(R){if(this.regexp_eatOctalDigit(R)){var _e=R.lastIntValue;if(this.regexp_eatOctalDigit(R)){var At=R.lastIntValue;_e<=3&&this.regexp_eatOctalDigit(R)?R.lastIntValue=_e*64+At*8+R.lastIntValue:R.lastIntValue=_e*8+At}else R.lastIntValue=_e;return!0}return!1},wn.regexp_eatOctalDigit=function(R){var _e=R.current();return gn(_e)?(R.lastIntValue=_e-48,R.advance(),!0):(R.lastIntValue=0,!1)};function gn(R){return R>=48&&R<=55}wn.regexp_eatFixedHexDigits=function(R,_e){var At=R.pos;R.lastIntValue=0;for(var Ke=0;Ke<_e;++Ke){var nr=R.current();if(!uo(nr))return R.pos=At,!1;R.lastIntValue=16*R.lastIntValue+An(nr),R.advance()}return!0};var Oi=function(_e){this.type=_e.type,this.value=_e.value,this.start=_e.start,this.end=_e.end,_e.options.locations&&(this.loc=new xe(_e,_e.startLoc,_e.endLoc)),_e.options.ranges&&(this.range=[_e.start,_e.end])},fi=G.prototype;fi.next=function(R){!R&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Oi(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},fi.getToken=function(){return this.next(),new Oi(this)},typeof Symbol!="undefined"&&(fi[Symbol.iterator]=function(){var R=this;return{next:function(){var _e=R.getToken();return{done:_e.type===pe.eof,value:_e}}}}),fi.curContext=function(){return this.context[this.context.length-1]},fi.nextToken=function(){var R=this.curContext();if((!R||!R.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(pe.eof);if(R.override)return R.override(this);this.readToken(this.fullCharCodeAtPos())},fi.readToken=function(R){return me(R,this.options.ecmaVersion>=6)||R===92?this.readWord():this.getTokenFromCode(R)},fi.fullCharCodeAtPos=function(){var R=this.input.charCodeAt(this.pos);if(R<=55295||R>=57344)return R;var _e=this.input.charCodeAt(this.pos+1);return(R<<10)+_e-56613888},fi.skipBlockComment=function(){var R=this.options.onComment&&this.curPosition(),_e=this.pos,At=this.input.indexOf("*/",this.pos+=2);if(At===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=At+2,this.options.locations){ye.lastIndex=_e;for(var Ke;(Ke=ye.exec(this.input))&&Ke.index<this.pos;)++this.curLine,this.lineStart=Ke.index+Ke[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(_e+2,At),_e,this.pos,R,this.curPosition())},fi.skipLineComment=function(R){for(var _e=this.pos,At=this.options.onComment&&this.curPosition(),Ke=this.input.charCodeAt(this.pos+=R);this.pos<this.input.length&&!ie(Ke);)Ke=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(_e+R,this.pos),_e,this.pos,At,this.curPosition())},fi.skipSpace=function(){e:for(;this.pos<this.input.length;){var R=this.input.charCodeAt(this.pos);switch(R){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(R>8&&R<14||R>=5760&&re.test(String.fromCharCode(R)))++this.pos;else break e}}},fi.finishToken=function(R,_e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var At=this.type;this.type=R,this.value=_e,this.updateContext(At)},fi.readToken_dot=function(){var R=this.input.charCodeAt(this.pos+1);if(R>=48&&R<=57)return this.readNumber(!0);var _e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&R===46&&_e===46?(this.pos+=3,this.finishToken(pe.ellipsis)):(++this.pos,this.finishToken(pe.dot))},fi.readToken_slash=function(){var R=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):R===61?this.finishOp(pe.assign,2):this.finishOp(pe.slash,1)},fi.readToken_mult_modulo_exp=function(R){var _e=this.input.charCodeAt(this.pos+1),At=1,Ke=R===42?pe.star:pe.modulo;return this.options.ecmaVersion>=7&&R===42&&_e===42&&(++At,Ke=pe.starstar,_e=this.input.charCodeAt(this.pos+2)),_e===61?this.finishOp(pe.assign,At+1):this.finishOp(Ke,At)},fi.readToken_pipe_amp=function(R){var _e=this.input.charCodeAt(this.pos+1);if(_e===R){if(this.options.ecmaVersion>=12){var At=this.input.charCodeAt(this.pos+2);if(At===61)return this.finishOp(pe.assign,3)}return this.finishOp(R===124?pe.logicalOR:pe.logicalAND,2)}return _e===61?this.finishOp(pe.assign,2):this.finishOp(R===124?pe.bitwiseOR:pe.bitwiseAND,1)},fi.readToken_caret=function(){var R=this.input.charCodeAt(this.pos+1);return R===61?this.finishOp(pe.assign,2):this.finishOp(pe.bitwiseXOR,1)},fi.readToken_plus_min=function(R){var _e=this.input.charCodeAt(this.pos+1);return _e===R?_e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||$e.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(pe.incDec,2):_e===61?this.finishOp(pe.assign,2):this.finishOp(pe.plusMin,1)},fi.readToken_lt_gt=function(R){var _e=this.input.charCodeAt(this.pos+1),At=1;return _e===R?(At=R===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+At)===61?this.finishOp(pe.assign,At+1):this.finishOp(pe.bitShift,At)):_e===33&&R===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(_e===61&&(At=2),this.finishOp(pe.relational,At))},fi.readToken_eq_excl=function(R){var _e=this.input.charCodeAt(this.pos+1);return _e===61?this.finishOp(pe.equality,this.input.charCodeAt(this.pos+2)===61?3:2):R===61&&_e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(pe.arrow)):this.finishOp(R===61?pe.eq:pe.prefix,1)},fi.readToken_question=function(){var R=this.options.ecmaVersion;if(R>=11){var _e=this.input.charCodeAt(this.pos+1);if(_e===46){var At=this.input.charCodeAt(this.pos+2);if(At<48||At>57)return this.finishOp(pe.questionDot,2)}if(_e===63){if(R>=12){var Ke=this.input.charCodeAt(this.pos+2);if(Ke===61)return this.finishOp(pe.assign,3)}return this.finishOp(pe.coalesce,2)}}return this.finishOp(pe.question,1)},fi.getTokenFromCode=function(R){switch(R){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(pe.parenL);case 41:return++this.pos,this.finishToken(pe.parenR);case 59:return++this.pos,this.finishToken(pe.semi);case 44:return++this.pos,this.finishToken(pe.comma);case 91:return++this.pos,this.finishToken(pe.bracketL);case 93:return++this.pos,this.finishToken(pe.bracketR);case 123:return++this.pos,this.finishToken(pe.braceL);case 125:return++this.pos,this.finishToken(pe.braceR);case 58:return++this.pos,this.finishToken(pe.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(pe.backQuote);case 48:var _e=this.input.charCodeAt(this.pos+1);if(_e===120||_e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(_e===111||_e===79)return this.readRadixNumber(8);if(_e===98||_e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(R);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(R);case 124:case 38:return this.readToken_pipe_amp(R);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(R);case 60:case 62:return this.readToken_lt_gt(R);case 61:case 33:return this.readToken_eq_excl(R);case 63:return this.readToken_question();case 126:return this.finishOp(pe.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ca(R)+"'")},fi.finishOp=function(R,_e){var At=this.input.slice(this.pos,this.pos+_e);return this.pos+=_e,this.finishToken(R,At)},fi.readRegexp=function(){for(var R,_e,At=this.pos;;){this.pos>=this.input.length&&this.raise(At,"Unterminated regular expression");var Ke=this.input.charAt(this.pos);if($e.test(Ke)&&this.raise(At,"Unterminated regular expression"),R)R=!1;else{if(Ke==="[")_e=!0;else if(Ke==="]"&&_e)_e=!1;else if(Ke==="/"&&!_e)break;R=Ke==="\\"}++this.pos}var nr=this.input.slice(At,this.pos);++this.pos;var wr=this.pos,Wr=this.readWord1();this.containsEsc&&this.unexpected(wr);var In=this.regexpState||(this.regexpState=new Nn(this));In.reset(At,nr,Wr),this.validateRegExpFlags(In),this.validateRegExpPattern(In);var Dn=null;try{Dn=new RegExp(nr,Wr)}catch(Mi){}return this.finishToken(pe.regexp,{pattern:nr,flags:Wr,value:Dn})},fi.readInt=function(R,_e,At){for(var Ke=this.options.ecmaVersion>=12&&_e===void 0,nr=At&&this.input.charCodeAt(this.pos)===48,wr=this.pos,Wr=0,In=0,Dn=0,Mi=_e==null?1/0:_e;Dn<Mi;++Dn,++this.pos){var Bi=this.input.charCodeAt(this.pos),io=void 0;if(Ke&&Bi===95){nr&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),In===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Dn===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),In=Bi;continue}if(Bi>=97?io=Bi-97+10:Bi>=65?io=Bi-65+10:Bi>=48&&Bi<=57?io=Bi-48:io=1/0,io>=R)break;In=Bi,Wr=Wr*R+io}return Ke&&In===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===wr||_e!=null&&this.pos-wr!==_e?null:Wr};function va(R,_e){return _e?parseInt(R,8):parseFloat(R.replace(/_/g,""))}function wa(R){return typeof BigInt!="function"?null:BigInt(R.replace(/_/g,""))}fi.readRadixNumber=function(R){var _e=this.pos;this.pos+=2;var At=this.readInt(R);return At==null&&this.raise(this.start+2,"Expected number in radix "+R),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(At=wa(this.input.slice(_e,this.pos)),++this.pos):me(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(pe.num,At)},fi.readNumber=function(R){var _e=this.pos;!R&&this.readInt(10,void 0,!0)===null&&this.raise(_e,"Invalid number");var At=this.pos-_e>=2&&this.input.charCodeAt(_e)===48;At&&this.strict&&this.raise(_e,"Invalid number");var Ke=this.input.charCodeAt(this.pos);if(!At&&!R&&this.options.ecmaVersion>=11&&Ke===110){var nr=wa(this.input.slice(_e,this.pos));return++this.pos,me(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(pe.num,nr)}At&&/[89]/.test(this.input.slice(_e,this.pos))&&(At=!1),Ke===46&&!At&&(++this.pos,this.readInt(10),Ke=this.input.charCodeAt(this.pos)),(Ke===69||Ke===101)&&!At&&(Ke=this.input.charCodeAt(++this.pos),(Ke===43||Ke===45)&&++this.pos,this.readInt(10)===null&&this.raise(_e,"Invalid number")),me(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var wr=va(this.input.slice(_e,this.pos),At);return this.finishToken(pe.num,wr)},fi.readCodePoint=function(){var R=this.input.charCodeAt(this.pos),_e;if(R===123){this.options.ecmaVersion<6&&this.unexpected();var At=++this.pos;_e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,_e>1114111&&this.invalidStringToken(At,"Code point out of bounds")}else _e=this.readHexChar(4);return _e};function Ca(R){return R<=65535?String.fromCharCode(R):(R-=65536,String.fromCharCode((R>>10)+55296,(R&1023)+56320))}fi.readString=function(R){for(var _e="",At=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Ke=this.input.charCodeAt(this.pos);if(Ke===R)break;Ke===92?(_e+=this.input.slice(At,this.pos),_e+=this.readEscapedChar(!1),At=this.pos):(ie(Ke,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return _e+=this.input.slice(At,this.pos++),this.finishToken(pe.string,_e)};var Aa={};fi.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(R){if(R===Aa)this.readInvalidTemplateToken();else throw R}this.inTemplateElement=!1},fi.invalidStringToken=function(R,_e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Aa;this.raise(R,_e)},fi.readTmplToken=function(){for(var R="",_e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var At=this.input.charCodeAt(this.pos);if(At===96||At===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===pe.template||this.type===pe.invalidTemplate)?At===36?(this.pos+=2,this.finishToken(pe.dollarBraceL)):(++this.pos,this.finishToken(pe.backQuote)):(R+=this.input.slice(_e,this.pos),this.finishToken(pe.template,R));if(At===92)R+=this.input.slice(_e,this.pos),R+=this.readEscapedChar(!0),_e=this.pos;else if(ie(At)){switch(R+=this.input.slice(_e,this.pos),++this.pos,At){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:R+=`
`;break;default:R+=String.fromCharCode(At);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),_e=this.pos}else++this.pos}},fi.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(pe.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},fi.readEscapedChar=function(R){var _e=this.input.charCodeAt(++this.pos);switch(++this.pos,_e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ca(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(R){var At=this.pos-1;return this.invalidStringToken(At,"Invalid escape sequence in template string"),null}default:if(_e>=48&&_e<=55){var Ke=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],nr=parseInt(Ke,8);return nr>255&&(Ke=Ke.slice(0,-1),nr=parseInt(Ke,8)),this.pos+=Ke.length-1,_e=this.input.charCodeAt(this.pos),(Ke!=="0"||_e===56||_e===57)&&(this.strict||R)&&this.invalidStringToken(this.pos-1-Ke.length,R?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(nr)}return ie(_e)?"":String.fromCharCode(_e)}},fi.readHexChar=function(R){var _e=this.pos,At=this.readInt(16,R);return At===null&&this.invalidStringToken(_e,"Bad character escape sequence"),At},fi.readWord1=function(){this.containsEsc=!1;for(var R="",_e=!0,At=this.pos,Ke=this.options.ecmaVersion>=6;this.pos<this.input.length;){var nr=this.fullCharCodeAtPos();if(Le(nr,Ke))this.pos+=nr<=65535?1:2;else if(nr===92){this.containsEsc=!0,R+=this.input.slice(At,this.pos);var wr=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Wr=this.readCodePoint();(_e?me:Le)(Wr,Ke)||this.invalidStringToken(wr,"Invalid Unicode escape"),R+=Ca(Wr),At=this.pos}else break;_e=!1}return R+this.input.slice(At,this.pos)},fi.readWord=function(){var R=this.readWord1(),_e=pe.name;return this.keywords.test(R)&&(_e=Et[R]),this.finishToken(_e,R)};var ma="7.4.1";G.acorn={Parser:G,version:ma,defaultOptions:Pe,Position:ne,SourceLocation:xe,getLineInfo:Ne,Node:un,TokenType:Se,tokTypes:pe,keywordTypes:Et,TokContext:Nr,tokContexts:bt,isIdentifierChar:Le,isIdentifierStart:me,Token:Oi,isNewLine:ie,lineBreak:$e,lineBreakG:ye,nonASCIIwhitespace:re};function ka(R,_e){return G.parse(R,_e)}function Uo(R,_e,At){return G.parseExpressionAt(R,_e,At)}function ha(R,_e){return G.tokenizer(R,_e)}function xa(R,_e){R.prototype=Object.create(_e.prototype),R.prototype.constructor=R,R.__proto__=_e}function eo(R){var _e=typeof Map=="function"?new Map:void 0;return eo=function(Ke){if(Ke===null||!Hs(Ke))return Ke;if(typeof Ke!="function")throw new TypeError("Super expression must either be null or a function");if(typeof _e!="undefined"){if(_e.has(Ke))return _e.get(Ke);_e.set(Ke,nr)}function nr(){return Po(Ke,arguments,Jo(this).constructor)}return nr.prototype=Object.create(Ke.prototype,{constructor:{value:nr,enumerable:!1,writable:!0,configurable:!0}}),no(nr,Ke)},eo(R)}function Te(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(R){return!1}}function Po(R,_e,At){return Te()?Po=Reflect.construct:Po=function(nr,wr,Wr){var In=[null];In.push.apply(In,wr);var Dn=Function.bind.apply(nr,In),Mi=new Dn;return Wr&&no(Mi,Wr.prototype),Mi},Po.apply(null,arguments)}function Hs(R){return Function.toString.call(R).indexOf("[native code]")!==-1}function no(R,_e){return no=Object.setPrototypeOf||function(Ke,nr){return Ke.__proto__=nr,Ke},no(R,_e)}function Jo(R){return Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(At){return At.__proto__||Object.getPrototypeOf(At)},Jo(R)}var os=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(eo(Error)),Go=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(eo(SyntaxError)),Wo=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(eo(ReferenceError)),za=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(eo(TypeError)),Tu=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(os),ws=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(Go),Zs=function(R){xa(_e,R);function _e(){return R.apply(this,arguments)||this}return _e}(Wo),ts={UnknownError:[3001,"%0",Tu],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",Tu],NodeTypeSyntaxError:[1001,"Unknown node type: %0",Zs],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",Zs],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",Zs],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",Zs],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",Zs],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",Zs],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",Zs],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",Zs],ParamTypeSyntaxError:[1009,"Unknown param type: %0",Zs],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",Zs],FunctionUndefinedReferenceError:[2001,"%0 is not a function",Wo],VariableUndefinedReferenceError:[2002,"%0 is not defined",Wo],IsNotConstructor:[2003,"%0 is not a constructor",za]};function Vs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(R){return!1}}function ou(R,_e,At){return Vs()?ou=Reflect.construct:ou=function(nr,wr,Wr){var In=[null];In.push.apply(In,wr);var Dn=Function.bind.apply(nr,In),Mi=new Dn;return Wr&&ls(Mi,Wr.prototype),Mi},ou.apply(null,arguments)}function ls(R,_e){return ls=Object.setPrototypeOf||function(Ke,nr){return Ke.__proto__=nr,Ke},ls(R,_e)}var ki="0.0.3";function As(R,_e){Object.defineProperty(R,"name",{value:_e,writable:!1,enumerable:!1,configurable:!0})}var Rs=Object.prototype.hasOwnProperty,hr=Symbol("Break"),Lr=Symbol("Continue"),or=Symbol("DefaultCase"),kr=Symbol("EmptyStatementReturn"),Hn=Symbol("WithScopeName"),zr=Symbol("SuperScopeName"),Bo=Symbol("RootScopeName"),Vr=Symbol("GlobalScopeName");function cr(R){return typeof R=="function"}var ht=function(){function R(At){this.interpreter=At}var _e=R.prototype;return _e.generator=function(){var Ke=this.interpreter;function nr(){return this.getCurrentScope()}function wr(){return this.getGlobalScope()}function Wr(){return this.getCurrentContext()}return{getOptions:Ke.getOptions.bind(Ke),getCurrentScope:nr.bind(Ke),getGlobalScope:wr.bind(Ke),getCurrentContext:Wr.bind(Ke),getExecStartTime:Ke.getExecStartTime.bind(Ke)}},R}();function ur(R,_e,At){if(At===void 0&&(At=!0),!(R instanceof ht))throw new Error("Illegal call");if(typeof _e!="string")return _e;if(_e){var Ke=R.generator(),nr=Ke.getOptions(),wr={timeout:nr.timeout,_initEnv:function(){At||this.setCurrentContext(Ke.getCurrentContext()),this.execStartTime=Ke.getExecStartTime(),this.execEndTime=this.execStartTime}},Wr=At?Ke.getGlobalScope():Ke.getCurrentScope(),In=new Cn(Wr,wr);return In.evaluate(_e)}}Object.defineProperty(ur,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function er(R){if(!(R instanceof ht))throw new Error("Illegal call");for(var _e=R.generator(),At=arguments.length,Ke=new Array(At>1?At-1:0),nr=1;nr<At;nr++)Ke[nr-1]=arguments[nr];var wr=Ke.pop(),Wr=new Cn(_e.getGlobalScope(),_e.getOptions()),In=`
		    (function anonymous(`+Ke.join(",")+`){
		        `+wr+`
		    });
		    `;return Wr.evaluate(In)}Object.defineProperty(er,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var sn=function(_e){this.value=_e},fn=function(_e){this.value=_e},Vn=function(_e){this.value=_e},ni=function(_e,At,Ke){At===void 0&&(At=null),this.name=Ke,this.parent=At,this.data=_e,this.labelStack=[]};function oi(){}function Ei(R,_e){return R===void 0&&(R=null),new ni(Object.create(null),R,_e)}function qi(R){return Object.create(R)}var Pr={NaN:NaN,Infinity:1/0,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:ur,Function:er};typeof JSON!="undefined"&&(Pr.JSON=JSON),typeof Promise!="undefined"&&(Pr.Promise=Promise),typeof Set!="undefined"&&(Pr.Set=Set),typeof Map!="undefined"&&(Pr.Map=Map),typeof Symbol!="undefined"&&(Pr.Symbol=Symbol),typeof Proxy!="undefined"&&(Pr.Proxy=Proxy),typeof WeakMap!="undefined"&&(Pr.WeakMap=WeakMap),typeof WeakSet!="undefined"&&(Pr.WeakSet=WeakSet),typeof Reflect!="undefined"&&(Pr.Reflect=Reflect);var Cn=function(){function R(At,Ke){At===void 0&&(At=R.global),Ke===void 0&&(Ke={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:Ke.ecmaVersion||R.ecmaVersion,timeout:Ke.timeout||0,rootContext:Ke.rootContext,globalContextInFunction:Ke.globalContextInFunction===void 0?R.globalContextInFunction:Ke.globalContextInFunction,_initEnv:Ke._initEnv},this.context=At||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var _e=R.prototype;return _e.initEnvironment=function(Ke){var nr;if(Ke instanceof ni)nr=Ke;else{var wr=null,Wr=this.createSuperScope(Ke);this.options.rootContext&&(wr=new ni(qi(this.options.rootContext),Wr,Bo)),nr=new ni(Ke,wr||Wr,Vr)}this.globalScope=nr,this.currentScope=this.globalScope,this.globalContext=nr.data,this.currentContext=nr.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var In=this.options._initEnv;In&&In.call(this)},_e.getExecStartTime=function(){return this.execStartTime},_e.getExecutionTime=function(){return this.execEndTime-this.execStartTime},_e.setExecTimeout=function(Ke){Ke===void 0&&(Ke=0),this.options.timeout=Ke},_e.getOptions=function(){return this.options},_e.getGlobalScope=function(){return this.globalScope},_e.getCurrentScope=function(){return this.currentScope},_e.getCurrentContext=function(){return this.currentContext},_e.isInterruptThrow=function(Ke){return Ke instanceof Tu||Ke instanceof Zs||Ke instanceof ws},_e.createSuperScope=function(Ke){var nr=Object.assign({},Pr),wr=Object.keys(nr);return wr.forEach(function(Wr){Wr in Ke&&delete nr[Wr]}),new ni(nr,null,zr)},_e.setCurrentContext=function(Ke){this.currentContext=Ke},_e.setCurrentScope=function(Ke){this.currentScope=Ke},_e.evaluate=function(Ke){Ke===void 0&&(Ke="");var nr;if(Ke)return nr=ka(Ke,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||R.ecmaVersion}),this.evaluateNode(nr,Ke)},_e.appendCode=function(Ke){return this.evaluate(Ke)},_e.evaluateNode=function(Ke,nr){var wr=this;nr===void 0&&(nr=""),this.value=void 0,this.source=nr,this.sourceList.push(nr),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var Wr=this.getCurrentScope(),In=this.getCurrentContext(),Dn=Wr.labelStack.concat([]),Mi=this.callStack.concat([]),Bi=function(){wr.setCurrentScope(Wr),wr.setCurrentContext(In),Wr.labelStack=Dn,wr.callStack=Mi};try{var io=this.createClosure(Ke);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),io()}catch(co){throw co}finally{Bi(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},_e.createErrorMessage=function(Ke,nr,wr){var Wr=Ke[1].replace("%0",String(nr));return wr!==null&&(Wr+=this.getNodePosition(wr||this.lastExecNode)),Wr},_e.createError=function(Ke,nr){return new nr(Ke)},_e.createThrowError=function(Ke,nr){return this.createError(Ke,nr)},_e.createInternalThrowError=function(Ke,nr,wr){return this.createError(this.createErrorMessage(Ke,nr,wr),Ke[2])},_e.checkTimeout=function(){if(!this.isRunning)return!1;var Ke=this.options.timeout||0,nr=Date.now();return nr-this.execStartTime>Ke},_e.getNodePosition=function(Ke){if(Ke){var nr="";return Ke.loc?" ["+Ke.loc.start.line+":"+Ke.loc.start.column+"]"+nr:""}return""},_e.createClosure=function(Ke){var nr=this,wr;switch(Ke.type){case"BinaryExpression":wr=this.binaryExpressionHandler(Ke);break;case"LogicalExpression":wr=this.logicalExpressionHandler(Ke);break;case"UnaryExpression":wr=this.unaryExpressionHandler(Ke);break;case"UpdateExpression":wr=this.updateExpressionHandler(Ke);break;case"ObjectExpression":wr=this.objectExpressionHandler(Ke);break;case"ArrayExpression":wr=this.arrayExpressionHandler(Ke);break;case"CallExpression":wr=this.callExpressionHandler(Ke);break;case"NewExpression":wr=this.newExpressionHandler(Ke);break;case"MemberExpression":wr=this.memberExpressionHandler(Ke);break;case"ThisExpression":wr=this.thisExpressionHandler(Ke);break;case"SequenceExpression":wr=this.sequenceExpressionHandler(Ke);break;case"Literal":wr=this.literalHandler(Ke);break;case"Identifier":wr=this.identifierHandler(Ke);break;case"AssignmentExpression":wr=this.assignmentExpressionHandler(Ke);break;case"FunctionDeclaration":wr=this.functionDeclarationHandler(Ke);break;case"VariableDeclaration":wr=this.variableDeclarationHandler(Ke);break;case"BlockStatement":case"Program":wr=this.programHandler(Ke);break;case"ExpressionStatement":wr=this.expressionStatementHandler(Ke);break;case"EmptyStatement":wr=this.emptyStatementHandler(Ke);break;case"ReturnStatement":wr=this.returnStatementHandler(Ke);break;case"FunctionExpression":wr=this.functionExpressionHandler(Ke);break;case"IfStatement":wr=this.ifStatementHandler(Ke);break;case"ConditionalExpression":wr=this.conditionalExpressionHandler(Ke);break;case"ForStatement":wr=this.forStatementHandler(Ke);break;case"WhileStatement":wr=this.whileStatementHandler(Ke);break;case"DoWhileStatement":wr=this.doWhileStatementHandler(Ke);break;case"ForInStatement":wr=this.forInStatementHandler(Ke);break;case"WithStatement":wr=this.withStatementHandler(Ke);break;case"ThrowStatement":wr=this.throwStatementHandler(Ke);break;case"TryStatement":wr=this.tryStatementHandler(Ke);break;case"ContinueStatement":wr=this.continueStatementHandler(Ke);break;case"BreakStatement":wr=this.breakStatementHandler(Ke);break;case"SwitchStatement":wr=this.switchStatementHandler(Ke);break;case"LabeledStatement":wr=this.labeledStatementHandler(Ke);break;case"DebuggerStatement":wr=this.debuggerStatementHandler(Ke);break;default:throw this.createInternalThrowError(ts.NodeTypeSyntaxError,Ke.type,Ke)}return function(){var Wr=nr.options.timeout;if(Wr&&Wr>0&&nr.checkTimeout())throw nr.createInternalThrowError(ts.ExecutionTimeOutError,Wr,null);return nr.lastExecNode=Ke,wr.apply(void 0,arguments)}},_e.binaryExpressionHandler=function(Ke){var nr=this,wr=this.createClosure(Ke.left),Wr=this.createClosure(Ke.right);return function(){var In=wr(),Dn=Wr();switch(Ke.operator){case"==":return In==Dn;case"!=":return In!=Dn;case"===":return In===Dn;case"!==":return In!==Dn;case"<":return In<Dn;case"<=":return In<=Dn;case">":return In>Dn;case">=":return In>=Dn;case"<<":return In<<Dn;case">>":return In>>Dn;case">>>":return In>>>Dn;case"+":return In+Dn;case"-":return In-Dn;case"*":return In*Dn;case"**":return Math.pow(In,Dn);case"/":return In/Dn;case"%":return In%Dn;case"|":return In|Dn;case"^":return In^Dn;case"&":return In&Dn;case"in":return In in Dn;case"instanceof":return In instanceof Dn;default:throw nr.createInternalThrowError(ts.BinaryOperatorSyntaxError,Ke.operator,Ke)}}},_e.logicalExpressionHandler=function(Ke){var nr=this,wr=this.createClosure(Ke.left),Wr=this.createClosure(Ke.right);return function(){switch(Ke.operator){case"||":return wr()||Wr();case"&&":return wr()&&Wr();default:throw nr.createInternalThrowError(ts.LogicalOperatorSyntaxError,Ke.operator,Ke)}}},_e.unaryExpressionHandler=function(Ke){var nr=this;switch(Ke.operator){case"delete":var wr=this.createObjectGetter(Ke.argument),Wr=this.createNameGetter(Ke.argument);return function(){var Bi=wr(),io=Wr();return delete Bi[io]};default:var In;if(Ke.operator==="typeof"&&Ke.argument.type==="Identifier"){var Dn=this.createObjectGetter(Ke.argument),Mi=this.createNameGetter(Ke.argument);In=function(){return Dn()[Mi()]}}else In=this.createClosure(Ke.argument);return function(){var Bi=In();switch(Ke.operator){case"-":return-Bi;case"+":return+Bi;case"!":return!Bi;case"~":return~Bi;case"void":return;case"typeof":return typeof Bi;default:throw nr.createInternalThrowError(ts.UnaryOperatorSyntaxError,Ke.operator,Ke)}}}},_e.updateExpressionHandler=function(Ke){var nr=this,wr=this.createObjectGetter(Ke.argument),Wr=this.createNameGetter(Ke.argument);return function(){var In=wr(),Dn=Wr();switch(nr.assertVariable(In,Dn,Ke),Ke.operator){case"++":return Ke.prefix?++In[Dn]:In[Dn]++;case"--":return Ke.prefix?--In[Dn]:In[Dn]--;default:throw nr.createInternalThrowError(ts.UpdateOperatorSyntaxError,Ke.operator,Ke)}}},_e.objectExpressionHandler=function(Ke){var nr=this,wr=[];function Wr(Dn){return Dn.type==="Identifier"?Dn.name:Dn.type==="Literal"?Dn.value:this.throwError(ts.ObjectStructureSyntaxError,Dn.type,Dn)}var In=Object.create(null);return Ke.properties.forEach(function(Dn){var Mi=Dn.kind,Bi=Wr(Dn.key);(!In[Bi]||Mi==="init")&&(In[Bi]={}),In[Bi][Mi]=nr.createClosure(Dn.value),wr.push({key:Bi,property:Dn})}),function(){for(var Dn={},Mi=wr.length,Bi=0;Bi<Mi;Bi++){var io=wr[Bi],co=io.key,Sa=In[co],Ko=Sa.init?Sa.init():void 0,Co=Sa.get?Sa.get():function(){},Oo=Sa.set?Sa.set():function(Il){};if("set"in Sa||"get"in Sa){var Ho={configurable:!0,enumerable:!0,get:Co,set:Oo};Object.defineProperty(Dn,co,Ho)}else{var Io=io.property,Js=Io.kind;Io.key.type==="Identifier"&&Io.value.type==="FunctionExpression"&&Js==="init"&&!Io.value.id&&As(Ko,Io.key.name),Dn[co]=Ko}}return Dn}},_e.arrayExpressionHandler=function(Ke){var nr=this,wr=Ke.elements.map(function(Wr){return Wr&&nr.createClosure(Wr)});return function(){for(var Wr=wr.length,In=Array(Wr),Dn=0;Dn<Wr;Dn++){var Mi=wr[Dn];Mi&&(In[Dn]=Mi())}return In}},_e.safeObjectGet=function(Ke,nr,wr){return Ke[nr]},_e.createCallFunctionGetter=function(Ke){var nr=this;switch(Ke.type){case"MemberExpression":var wr=this.createClosure(Ke.object),Wr=this.createMemberKeyGetter(Ke),In=this.source;return function(){var Mi=wr(),Bi=Wr(),io=nr.safeObjectGet(Mi,Bi,Ke);if(!io||!cr(io)){var co=In.slice(Ke.start,Ke.end);throw nr.createInternalThrowError(ts.FunctionUndefinedReferenceError,co,Ke)}return io.__IS_EVAL_FUNC?function(Sa){return io(new ht(nr),Sa,!0)}:io.__IS_FUNCTION_FUNC?function(){for(var Sa=arguments.length,Ko=new Array(Sa),Co=0;Co<Sa;Co++)Ko[Co]=arguments[Co];return io.apply(void 0,[new ht(nr)].concat(Ko))}:io.bind(Mi)};default:var Dn=this.createClosure(Ke);return function(){var Mi="";Ke.type==="Identifier"&&(Mi=Ke.name);var Bi=Dn();if(!Bi||!cr(Bi))throw nr.createInternalThrowError(ts.FunctionUndefinedReferenceError,Mi,Ke);if(Ke.type==="Identifier"&&Bi.__IS_EVAL_FUNC&&Mi==="eval")return function(Sa){var Ko=nr.getScopeFromName(Mi,nr.getCurrentScope()),Co=Ko.name===zr||Ko.name===Vr||Ko.name===Bo;return Bi(new ht(nr),Sa,!Co)};if(Bi.__IS_EVAL_FUNC)return function(Sa){return Bi(new ht(nr),Sa,!0)};if(Bi.__IS_FUNCTION_FUNC)return function(){for(var Sa=arguments.length,Ko=new Array(Sa),Co=0;Co<Sa;Co++)Ko[Co]=arguments[Co];return Bi.apply(void 0,[new ht(nr)].concat(Ko))};var io=nr.options.globalContextInFunction;if(Ke.type==="Identifier"){var co=nr.getIdentifierScope(Ke);co.name===Hn&&(io=co.data)}return Bi.bind(io)}}},_e.callExpressionHandler=function(Ke){var nr=this,wr=this.createCallFunctionGetter(Ke.callee),Wr=Ke.arguments.map(function(In){return nr.createClosure(In)});return function(){return wr().apply(void 0,Wr.map(function(In){return In()}))}},_e.functionExpressionHandler=function(Ke){var nr=this,wr=this,Wr=this.source,In=this.collectDeclVars,Dn=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var Mi=Ke.id?Ke.id.name:"",Bi=Ke.params.length,io=Ke.params.map(function(Co){return nr.createParamNameGetter(Co)}),co=this.createClosure(Ke.body),Sa=this.collectDeclVars,Ko=this.collectDeclFuncs;return this.collectDeclVars=In,this.collectDeclFuncs=Dn,function(){var Co=wr.getCurrentScope(),Oo=function Ho(){for(var Io=arguments.length,Js=new Array(Io),Il=0;Il<Io;Il++)Js[Il]=arguments[Il];wr.callStack.push(""+Mi);var Ao=wr.getCurrentScope(),Va=Ei(Co,"FunctionScope("+Mi+")");wr.setCurrentScope(Va),wr.addDeclarationsToScope(Sa,Ko,Va),Mi&&(Va.data[Mi]=Ho),Va.data.arguments=arguments,io.forEach(function(bs,Ps){Va.data[bs()]=Js[Ps]});var gs=wr.getCurrentContext();wr.setCurrentContext(this);var Ws=co();if(wr.setCurrentContext(gs),wr.setCurrentScope(Ao),wr.callStack.pop(),Ws instanceof sn)return Ws.value};return As(Oo,Mi),Object.defineProperty(Oo,"length",{value:Bi,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(Oo,"toString",{value:function(){return Wr.slice(Ke.start,Ke.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Oo,"valueOf",{value:function(){return Wr.slice(Ke.start,Ke.end)},writable:!0,configurable:!0,enumerable:!1}),Oo}},_e.newExpressionHandler=function(Ke){var nr=this,wr=this.source,Wr=this.createClosure(Ke.callee),In=Ke.arguments.map(function(Dn){return nr.createClosure(Dn)});return function(){var Dn=Wr();if(!cr(Dn)||Dn.__IS_EVAL_FUNC){var Mi=Ke.callee,Bi=wr.slice(Mi.start,Mi.end);throw nr.createInternalThrowError(ts.IsNotConstructor,Bi,Ke)}return Dn.__IS_FUNCTION_FUNC?Dn.apply(void 0,[new ht(nr)].concat(In.map(function(io){return io()}))):ou(Dn,In.map(function(io){return io()}))}},_e.memberExpressionHandler=function(Ke){var nr=this.createClosure(Ke.object),wr=this.createMemberKeyGetter(Ke);return function(){var Wr=nr(),In=wr();return Wr[In]}},_e.thisExpressionHandler=function(Ke){var nr=this;return function(){return nr.getCurrentContext()}},_e.sequenceExpressionHandler=function(Ke){var nr=this,wr=Ke.expressions.map(function(Wr){return nr.createClosure(Wr)});return function(){for(var Wr,In=wr.length,Dn=0;Dn<In;Dn++){var Mi=wr[Dn];Wr=Mi()}return Wr}},_e.literalHandler=function(Ke){return function(){return Ke.regex?new RegExp(Ke.regex.pattern,Ke.regex.flags):Ke.value}},_e.identifierHandler=function(Ke){var nr=this;return function(){var wr=nr.getCurrentScope(),Wr=nr.getScopeDataFromName(Ke.name,wr);return nr.assertVariable(Wr,Ke.name,Ke),Wr[Ke.name]}},_e.getIdentifierScope=function(Ke){var nr=this.getCurrentScope(),wr=this.getScopeFromName(Ke.name,nr);return wr},_e.assignmentExpressionHandler=function(Ke){var nr=this;Ke.left.type==="Identifier"&&Ke.right.type==="FunctionExpression"&&!Ke.right.id&&(Ke.right.id={type:"Identifier",name:Ke.left.name});var wr=this.createObjectGetter(Ke.left),Wr=this.createNameGetter(Ke.left),In=this.createClosure(Ke.right);return function(){var Dn=wr(),Mi=Wr(),Bi=In();switch(Ke.operator!=="="&&nr.assertVariable(Dn,Mi,Ke),Ke.operator){case"=":return Dn[Mi]=Bi;case"+=":return Dn[Mi]+=Bi;case"-=":return Dn[Mi]-=Bi;case"*=":return Dn[Mi]*=Bi;case"**=":return Dn[Mi]=Math.pow(Dn[Mi],Bi);case"/=":return Dn[Mi]/=Bi;case"%=":return Dn[Mi]%=Bi;case"<<=":return Dn[Mi]<<=Bi;case">>=":return Dn[Mi]>>=Bi;case">>>=":return Dn[Mi]>>>=Bi;case"&=":return Dn[Mi]&=Bi;case"^=":return Dn[Mi]^=Bi;case"|=":return Dn[Mi]|=Bi;default:throw nr.createInternalThrowError(ts.AssignmentExpressionSyntaxError,Ke.type,Ke)}}},_e.functionDeclarationHandler=function(Ke){if(Ke.id){var nr=this.functionExpressionHandler(Ke);Object.defineProperty(nr,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(Ke.id.name,nr)}return function(){return kr}},_e.getVariableName=function(Ke){if(Ke.type==="Identifier")return Ke.name;throw this.createInternalThrowError(ts.VariableTypeSyntaxError,Ke.type,Ke)},_e.variableDeclarationHandler=function(Ke){for(var nr=this,wr,Wr=[],In=0;In<Ke.declarations.length;In++){var Dn=Ke.declarations[In];this.varDeclaration(this.getVariableName(Dn.id)),Dn.init&&Wr.push({type:"AssignmentExpression",operator:"=",left:Dn.id,right:Dn.init})}return Wr.length&&(wr=this.createClosure({type:"BlockStatement",body:Wr})),function(){if(wr){var Mi=nr.isVarDeclMode;nr.isVarDeclMode=!0,wr(),nr.isVarDeclMode=Mi}return kr}},_e.assertVariable=function(Ke,nr,wr){if(Ke===this.globalScope.data&&!(nr in Ke))throw this.createInternalThrowError(ts.VariableUndefinedReferenceError,nr,wr)},_e.programHandler=function(Ke){var nr=this,wr=Ke.body.map(function(Wr){return nr.createClosure(Wr)});return function(){for(var Wr=kr,In=0;In<wr.length;In++){var Dn=wr[In],Mi=nr.setValue(Dn());if(Mi!==kr&&(Wr=Mi,Wr instanceof sn||Wr instanceof fn||Wr instanceof Vn||Wr===hr||Wr===Lr))break}return Wr}},_e.expressionStatementHandler=function(Ke){return this.createClosure(Ke.expression)},_e.emptyStatementHandler=function(Ke){return function(){return kr}},_e.returnStatementHandler=function(Ke){var nr=Ke.argument?this.createClosure(Ke.argument):oi;return function(){return new sn(nr())}},_e.ifStatementHandler=function(Ke){var nr=this.createClosure(Ke.test),wr=this.createClosure(Ke.consequent),Wr=Ke.alternate?this.createClosure(Ke.alternate):function(){return kr};return function(){return nr()?wr():Wr()}},_e.conditionalExpressionHandler=function(Ke){return this.ifStatementHandler(Ke)},_e.forStatementHandler=function(Ke){var nr=this,wr=oi,Wr=Ke.test?this.createClosure(Ke.test):function(){return!0},In=oi,Dn=this.createClosure(Ke.body);return Ke.type==="ForStatement"&&(wr=Ke.init?this.createClosure(Ke.init):wr,In=Ke.update?this.createClosure(Ke.update):oi),function(Mi){var Bi,io=kr,co=Ke.type==="DoWhileStatement";for(Mi&&Mi.type==="LabeledStatement"&&(Bi=Mi.label.name),wr();co||Wr();In()){co=!1;var Sa=nr.setValue(Dn());if(!(Sa===kr||Sa===Lr)){if(Sa===hr)break;if(io=Sa,io instanceof Vn&&io.value===Bi){io=kr;continue}if(io instanceof sn||io instanceof fn||io instanceof Vn)break}}return io}},_e.whileStatementHandler=function(Ke){return this.forStatementHandler(Ke)},_e.doWhileStatementHandler=function(Ke){return this.forStatementHandler(Ke)},_e.forInStatementHandler=function(Ke){var nr=this,wr=Ke.left,Wr=this.createClosure(Ke.right),In=this.createClosure(Ke.body);return Ke.left.type==="VariableDeclaration"&&(this.createClosure(Ke.left)(),wr=Ke.left.declarations[0].id),function(Dn){var Mi,Bi=kr,io;Dn&&Dn.type==="LabeledStatement"&&(Mi=Dn.label.name);var co=Wr();for(io in co){nr.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:wr,right:{type:"Literal",value:io}})();var Sa=nr.setValue(In());if(!(Sa===kr||Sa===Lr)){if(Sa===hr)break;if(Bi=Sa,Bi instanceof Vn&&Bi.value===Mi){Bi=kr;continue}if(Bi instanceof sn||Bi instanceof fn||Bi instanceof Vn)break}}return Bi}},_e.withStatementHandler=function(Ke){var nr=this,wr=this.createClosure(Ke.object),Wr=this.createClosure(Ke.body);return function(){var In=wr(),Dn=nr.getCurrentScope(),Mi=new ni(In,Dn,Hn);nr.setCurrentScope(Mi);var Bi=nr.setValue(Wr());return nr.setCurrentScope(Dn),Bi}},_e.throwStatementHandler=function(Ke){var nr=this,wr=this.createClosure(Ke.argument);return function(){throw nr.setValue(void 0),wr()}},_e.tryStatementHandler=function(Ke){var nr=this,wr=this.createClosure(Ke.block),Wr=Ke.handler?this.catchClauseHandler(Ke.handler):null,In=Ke.finalizer?this.createClosure(Ke.finalizer):null;return function(){var Dn=nr.getCurrentScope(),Mi=nr.getCurrentContext(),Bi=Dn.labelStack.concat([]),io=nr.callStack.concat([]),co=kr,Sa,Ko,Co=function(){nr.setCurrentScope(Dn),nr.setCurrentContext(Mi),Dn.labelStack=Bi,nr.callStack=io};try{co=nr.setValue(wr()),co instanceof sn&&(Sa=co)}catch(Oo){if(Co(),nr.isInterruptThrow(Oo))throw Oo;if(Wr)try{co=nr.setValue(Wr(Oo)),co instanceof sn&&(Sa=co)}catch(Ho){if(Co(),nr.isInterruptThrow(Ho))throw Ho;Ko=Ho}}if(In)try{co=In(),co instanceof sn&&(Sa=co)}catch(Oo){if(Co(),nr.isInterruptThrow(Oo))throw Oo;Ko=Oo}if(Ko)throw Ko;return Sa||co}},_e.catchClauseHandler=function(Ke){var nr=this,wr=this.createParamNameGetter(Ke.param),Wr=this.createClosure(Ke.body);return function(In){var Dn,Mi=nr.getCurrentScope(),Bi=Mi.data,io=wr(),co=Rs.call(Bi,io),Sa=Bi[io];return Bi[io]=In,Dn=Wr(),co?Bi[io]=Sa:delete Bi[io],Dn}},_e.continueStatementHandler=function(Ke){return function(){return Ke.label?new Vn(Ke.label.name):Lr}},_e.breakStatementHandler=function(Ke){return function(){return Ke.label?new fn(Ke.label.name):hr}},_e.switchStatementHandler=function(Ke){var nr=this,wr=this.createClosure(Ke.discriminant),Wr=Ke.cases.map(function(In){return nr.switchCaseHandler(In)});return function(){for(var In=wr(),Dn=!1,Mi,Bi,io,co=0;co<Wr.length;co++){var Sa=Wr[co](),Ko=Sa.testClosure();if(Ko===or){io=Sa;continue}if(Dn||Ko===In){if(Dn=!0,Bi=nr.setValue(Sa.bodyClosure()),Bi===kr)continue;if(Bi===hr||(Mi=Bi,Mi instanceof sn||Mi instanceof fn||Mi instanceof Vn||Mi===Lr))break}}if(!Dn&&io){Bi=nr.setValue(io.bodyClosure());var Co=Bi===kr||Bi===hr||Bi===Lr;Co||(Mi=Bi)}return Mi}},_e.switchCaseHandler=function(Ke){var nr=Ke.test?this.createClosure(Ke.test):function(){return or},wr=this.createClosure({type:"BlockStatement",body:Ke.consequent});return function(){return{testClosure:nr,bodyClosure:wr}}},_e.labeledStatementHandler=function(Ke){var nr=this,wr=Ke.label.name,Wr=this.createClosure(Ke.body);return function(){var In,Dn=nr.getCurrentScope();return Dn.labelStack.push(wr),In=Wr(Ke),In instanceof fn&&In.value===wr&&(In=kr),Dn.labelStack.pop(),In}},_e.debuggerStatementHandler=function(Ke){return function(){debugger;return kr}},_e.createParamNameGetter=function(Ke){if(Ke.type==="Identifier")return function(){return Ke.name};throw this.createInternalThrowError(ts.ParamTypeSyntaxError,Ke.type,Ke)},_e.createObjectKeyGetter=function(Ke){var nr;return Ke.type==="Identifier"?nr=function(){return Ke.name}:nr=this.createClosure(Ke),function(){return nr()}},_e.createMemberKeyGetter=function(Ke){return Ke.computed?this.createClosure(Ke.property):this.createObjectKeyGetter(Ke.property)},_e.createObjectGetter=function(Ke){var nr=this;switch(Ke.type){case"Identifier":return function(){return nr.getScopeDataFromName(Ke.name,nr.getCurrentScope())};case"MemberExpression":return this.createClosure(Ke.object);default:throw this.createInternalThrowError(ts.AssignmentTypeSyntaxError,Ke.type,Ke)}},_e.createNameGetter=function(Ke){switch(Ke.type){case"Identifier":return function(){return Ke.name};case"MemberExpression":return this.createMemberKeyGetter(Ke);default:throw this.createInternalThrowError(ts.AssignmentTypeSyntaxError,Ke.type,Ke)}},_e.varDeclaration=function(Ke){var nr=this.collectDeclVars;nr[Ke]=void 0},_e.funcDeclaration=function(Ke,nr){var wr=this.collectDeclFuncs;wr[Ke]=nr},_e.addDeclarationsToScope=function(Ke,nr,wr){var Wr=wr.data;for(var In in nr){var Dn=nr[In];Wr[In]=Dn&&Dn()}for(var Mi in Ke)Mi in Wr||(Wr[Mi]=void 0)},_e.getScopeValue=function(Ke,nr){var wr=this.getScopeFromName(Ke,nr);return wr.data[Ke]},_e.getScopeDataFromName=function(Ke,nr){return this.getScopeFromName(Ke,nr).data},_e.getScopeFromName=function(Ke,nr){var wr=nr;do if(Ke in wr.data)return wr;while(wr=wr.parent);return this.globalScope},_e.setValue=function(Ke){var nr=this.callStack.length;return this.isVarDeclMode||nr||Ke===kr||Ke===hr||Ke===Lr||Ke instanceof fn||Ke instanceof Vn||(this.value=Ke instanceof sn?Ke.value:Ke),Ke},_e.getValue=function(){return this.value},R}();Cn.version=ki,Cn.eval=ur,Cn.Function=er,Cn.ecmaVersion=5,Cn.globalContextInFunction=void 0,Cn.global=Object.create(null);function ln(R){return R===void 0&&(R=Object.create(null)),R}function bn(R,_e,At){_e===void 0&&(_e=[]),At===void 0&&(At={});var Ke=At.parsingContext,nr=At.timeout===void 0?0:At.timeout,wr=`
    (function anonymous(`+_e.join(",")+`){
         `+R+`
    });
    `,Wr=new Cn(Ke,{ecmaVersion:At.ecmaVersion,timeout:nr,rootContext:At.rootContext,globalContextInFunction:At.globalContextInFunction});return Wr.evaluate(wr)}function Kn(R,_e,At){var Ke=new Cn(_e,At);return Ke.evaluate(R)}var bi=Kn,Yi=function(){function R(At){this._code=At}var _e=R.prototype;return _e.runInContext=function(Ke){return Kn(this._code,Ke)},_e.runInNewContext=function(Ke){return Kn(this._code,Ke)},R}(),Gi=function(R,_e,At){return Kn(R,_e,At)};function aa(){for(var R=arguments.length,_e=new Array(R),At=0;At<R;At++)_e[At]=arguments[At];var Ke=_e.pop();return bn(Ke||"",_e)}var Ta=Gi},20396:function(vt,Ee,g){var v;(function(M,c,K,N){"use strict";var Z=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,B=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),L=Z||B,$=["","webkit","Moz","MS","ms","o"],U=L?"":c.createElement("div"),ke="function",We=Math.round,me=Math.abs,Le=Date.now;function Se(hr,Lr,or){return setTimeout(ye(hr,or),Lr)}function et(hr,Lr,or){return Array.isArray(hr)?(at(hr,or[Lr],or),!0):!1}function at(hr,Lr,or){var kr;if(hr)if(hr.forEach)hr.forEach(Lr,or);else if(hr.length!==N)for(kr=0;kr<hr.length;)Lr.call(or,hr[kr],kr,hr),kr++;else for(kr in hr)hr.hasOwnProperty(kr)&&Lr.call(or,hr[kr],kr,hr)}function Lt(hr,Lr,or){var kr="DEPRECATED METHOD: "+Lr+`
`+or+` AT 
`;return function(){var Hn=new Error("get-stack-trace"),zr=Hn&&Hn.stack?Hn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Bo=M.console&&(M.console.warn||M.console.log);return Bo&&Bo.call(M.console,kr,zr),hr.apply(this,arguments)}}var Et;typeof Object.assign!="function"?Et=function(Lr){if(Lr===N||Lr===null)throw new TypeError("Cannot convert undefined or null to object");for(var or=Object(Lr),kr=1;kr<arguments.length;kr++){var Hn=arguments[kr];if(Hn!==N&&Hn!==null)for(var zr in Hn)Hn.hasOwnProperty(zr)&&(or[zr]=Hn[zr])}return or}:Et=Object.assign;var jt=Lt(function(Lr,or,kr){for(var Hn=Object.keys(or),zr=0;zr<Hn.length;)(!kr||kr&&Lr[Hn[zr]]===N)&&(Lr[Hn[zr]]=or[Hn[zr]]),zr++;return Lr},"extend","Use `assign`."),pe=Lt(function(Lr,or){return jt(Lr,or,!0)},"merge","Use `assign`.");function $e(hr,Lr,or){var kr=Lr.prototype,Hn;Hn=hr.prototype=Object.create(kr),Hn.constructor=hr,Hn._super=kr,or&&Et(Hn,or)}function ye(hr,Lr){return function(){return hr.apply(Lr,arguments)}}function ie(hr,Lr){return typeof hr==ke?hr.apply(Lr&&Lr[0]||N,Lr):hr}function re(hr,Lr){return hr===N?Lr:hr}function De(hr,Lr,or){at(je(Lr),function(kr){hr.addEventListener(kr,or,!1)})}function le(hr,Lr,or){at(je(Lr),function(kr){hr.removeEventListener(kr,or,!1)})}function ge(hr,Lr){for(;hr;){if(hr==Lr)return!0;hr=hr.parentNode}return!1}function ce(hr,Lr){return hr.indexOf(Lr)>-1}function je(hr){return hr.trim().split(/\s+/g)}function J(hr,Lr,or){if(hr.indexOf&&!or)return hr.indexOf(Lr);for(var kr=0;kr<hr.length;){if(or&&hr[kr][or]==Lr||!or&&hr[kr]===Lr)return kr;kr++}return-1}function Me(hr){return Array.prototype.slice.call(hr,0)}function ne(hr,Lr,or){for(var kr=[],Hn=[],zr=0;zr<hr.length;){var Bo=Lr?hr[zr][Lr]:hr[zr];J(Hn,Bo)<0&&kr.push(hr[zr]),Hn[zr]=Bo,zr++}return or&&(Lr?kr=kr.sort(function(cr,ht){return cr[Lr]>ht[Lr]}):kr=kr.sort()),kr}function xe(hr,Lr){for(var or,kr,Hn=Lr[0].toUpperCase()+Lr.slice(1),zr=0;zr<$.length;){if(or=$[zr],kr=or?or+Hn:Lr,kr in hr)return kr;zr++}return N}var Ne=1;function Pe(){return Ne++}function He(hr){var Lr=hr.ownerDocument||hr;return Lr.defaultView||Lr.parentWindow||M}var lt=/mobile|tablet|ip(ad|hone|od)|android/i,ft="ontouchstart"in M,It=xe(M,"PointerEvent")!==N,fe=ft&&lt.test(navigator.userAgent),_t="touch",Ye="pen",Ot="mouse",mt="kinect",Rt=25,pt=1,Ge=2,wt=4,ee=8,Re=1,dt=2,D=4,q=8,G=16,O=dt|D,k=q|G,X=O|k,W=["x","y"],ae=["clientX","clientY"];function Be(hr,Lr){var or=this;this.manager=hr,this.callback=Lr,this.element=hr.element,this.target=hr.options.inputTarget,this.domHandler=function(kr){ie(hr.options.enable,[hr])&&or.handler(kr)},this.init()}Be.prototype={handler:function(){},init:function(){this.evEl&&De(this.element,this.evEl,this.domHandler),this.evTarget&&De(this.target,this.evTarget,this.domHandler),this.evWin&&De(He(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(He(this.element),this.evWin,this.domHandler)}};function ve(hr){var Lr,or=hr.options.inputClass;return or?Lr=or:It?Lr=_r:fe?Lr=Nn:ft?Lr=Ln:Lr=jn,new Lr(hr,Je)}function Je(hr,Lr,or){var kr=or.pointers.length,Hn=or.changedPointers.length,zr=Lr&pt&&kr-Hn===0,Bo=Lr&(wt|ee)&&kr-Hn===0;or.isFirst=!!zr,or.isFinal=!!Bo,zr&&(hr.session={}),or.eventType=Lr,ot(hr,or),hr.emit("hammer.input",or),hr.recognize(or),hr.session.prevInput=or}function ot(hr,Lr){var or=hr.session,kr=Lr.pointers,Hn=kr.length;or.firstInput||(or.firstInput=mr(Lr)),Hn>1&&!or.firstMultiple?or.firstMultiple=mr(Lr):Hn===1&&(or.firstMultiple=!1);var zr=or.firstInput,Bo=or.firstMultiple,Vr=Bo?Bo.center:zr.center,cr=Lr.center=Ar(kr);Lr.timeStamp=Le(),Lr.deltaTime=Lr.timeStamp-zr.timeStamp,Lr.angle=pn(Vr,cr),Lr.distance=Tr(Vr,cr),Qe(or,Lr),Lr.offsetDirection=Zt(Lr.deltaX,Lr.deltaY);var ht=Er(Lr.deltaTime,Lr.deltaX,Lr.deltaY);Lr.overallVelocityX=ht.x,Lr.overallVelocityY=ht.y,Lr.overallVelocity=me(ht.x)>me(ht.y)?ht.x:ht.y,Lr.scale=Bo?Zn(Bo.pointers,kr):1,Lr.rotation=Bo?un(Bo.pointers,kr):0,Lr.maxPointers=or.prevInput?Lr.pointers.length>or.prevInput.maxPointers?Lr.pointers.length:or.prevInput.maxPointers:Lr.pointers.length,ir(or,Lr);var ur=hr.element;ge(Lr.srcEvent.target,ur)&&(ur=Lr.srcEvent.target),Lr.target=ur}function Qe(hr,Lr){var or=Lr.center,kr=hr.offsetDelta||{},Hn=hr.prevDelta||{},zr=hr.prevInput||{};(Lr.eventType===pt||zr.eventType===wt)&&(Hn=hr.prevDelta={x:zr.deltaX||0,y:zr.deltaY||0},kr=hr.offsetDelta={x:or.x,y:or.y}),Lr.deltaX=Hn.x+(or.x-kr.x),Lr.deltaY=Hn.y+(or.y-kr.y)}function ir(hr,Lr){var or=hr.lastInterval||Lr,kr=Lr.timeStamp-or.timeStamp,Hn,zr,Bo,Vr;if(Lr.eventType!=ee&&(kr>Rt||or.velocity===N)){var cr=Lr.deltaX-or.deltaX,ht=Lr.deltaY-or.deltaY,ur=Er(kr,cr,ht);zr=ur.x,Bo=ur.y,Hn=me(ur.x)>me(ur.y)?ur.x:ur.y,Vr=Zt(cr,ht),hr.lastInterval=Lr}else Hn=or.velocity,zr=or.velocityX,Bo=or.velocityY,Vr=or.direction;Lr.velocity=Hn,Lr.velocityX=zr,Lr.velocityY=Bo,Lr.direction=Vr}function mr(hr){for(var Lr=[],or=0;or<hr.pointers.length;)Lr[or]={clientX:We(hr.pointers[or].clientX),clientY:We(hr.pointers[or].clientY)},or++;return{timeStamp:Le(),pointers:Lr,center:Ar(Lr),deltaX:hr.deltaX,deltaY:hr.deltaY}}function Ar(hr){var Lr=hr.length;if(Lr===1)return{x:We(hr[0].clientX),y:We(hr[0].clientY)};for(var or=0,kr=0,Hn=0;Hn<Lr;)or+=hr[Hn].clientX,kr+=hr[Hn].clientY,Hn++;return{x:We(or/Lr),y:We(kr/Lr)}}function Er(hr,Lr,or){return{x:Lr/hr||0,y:or/hr||0}}function Zt(hr,Lr){return hr===Lr?Re:me(hr)>=me(Lr)?hr<0?dt:D:Lr<0?q:G}function Tr(hr,Lr,or){or||(or=W);var kr=Lr[or[0]]-hr[or[0]],Hn=Lr[or[1]]-hr[or[1]];return Math.sqrt(kr*kr+Hn*Hn)}function pn(hr,Lr,or){or||(or=W);var kr=Lr[or[0]]-hr[or[0]],Hn=Lr[or[1]]-hr[or[1]];return Math.atan2(Hn,kr)*180/Math.PI}function un(hr,Lr){return pn(Lr[1],Lr[0],ae)+pn(hr[1],hr[0],ae)}function Zn(hr,Lr){return Tr(Lr[0],Lr[1],ae)/Tr(hr[0],hr[1],ae)}var Cr={mousedown:pt,mousemove:Ge,mouseup:wt},Nr="mousedown",bt="mousemove mouseup";function jn(){this.evEl=Nr,this.evWin=bt,this.pressed=!1,Be.apply(this,arguments)}$e(jn,Be,{handler:function(Lr){var or=Cr[Lr.type];or&pt&&Lr.button===0&&(this.pressed=!0),or&Ge&&Lr.which!==1&&(or=wt),this.pressed&&(or&wt&&(this.pressed=!1),this.callback(this.manager,or,{pointers:[Lr],changedPointers:[Lr],pointerType:Ot,srcEvent:Lr}))}});var Pt={pointerdown:pt,pointermove:Ge,pointerup:wt,pointercancel:ee,pointerout:ee},zt={2:_t,3:Ye,4:Ot,5:mt},Qt="pointerdown",dr="pointermove pointerup pointercancel";!L&&M.MSPointerEvent&&!M.PointerEvent&&(Qt="MSPointerDown",dr="MSPointerMove MSPointerUp MSPointerCancel");function _r(){this.evEl=Qt,this.evWin=dr,Be.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}$e(_r,Be,{handler:function(Lr){var or=this.store,kr=!1,Hn=Lr.type.toLowerCase().replace("ms",""),zr=Pt[Hn],Bo=zt[Lr.pointerType]||Lr.pointerType,Vr=Bo==_t,cr=J(or,Lr.pointerId,"pointerId");zr&pt&&(Lr.button===0||Vr)?cr<0&&(or.push(Lr),cr=or.length-1):zr&(wt|ee)&&(kr=!0),!(cr<0)&&(or[cr]=Lr,this.callback(this.manager,zr,{pointers:or,changedPointers:[Lr],pointerType:Bo,srcEvent:Lr}),kr&&or.splice(cr,1))}});var Hr={touchstart:pt,touchmove:Ge,touchend:wt,touchcancel:ee},Qr="touchstart",fr="touchstart touchmove touchend touchcancel";function tt(){this.evTarget=Qr,this.evWin=fr,this.started=!1,Be.apply(this,arguments)}$e(tt,Be,{handler:function(Lr){var or=Hr[Lr.type];if(or===pt&&(this.started=!0),!!this.started){var kr=Yr.call(this,Lr,or);or&(wt|ee)&&kr[0].length-kr[1].length===0&&(this.started=!1),this.callback(this.manager,or,{pointers:kr[0],changedPointers:kr[1],pointerType:_t,srcEvent:Lr})}}});function Yr(hr,Lr){var or=Me(hr.touches),kr=Me(hr.changedTouches);return Lr&(wt|ee)&&(or=ne(or.concat(kr),"identifier",!0)),[or,kr]}var Tn={touchstart:pt,touchmove:Ge,touchend:wt,touchcancel:ee},wn="touchstart touchmove touchend touchcancel";function Nn(){this.evTarget=wn,this.targetIds={},Be.apply(this,arguments)}$e(Nn,Be,{handler:function(Lr){var or=Tn[Lr.type],kr=Si.call(this,Lr,or);kr&&this.callback(this.manager,or,{pointers:kr[0],changedPointers:kr[1],pointerType:_t,srcEvent:Lr})}});function Si(hr,Lr){var or=Me(hr.touches),kr=this.targetIds;if(Lr&(pt|Ge)&&or.length===1)return kr[or[0].identifier]=!0,[or,or];var Hn,zr,Bo=Me(hr.changedTouches),Vr=[],cr=this.target;if(zr=or.filter(function(ht){return ge(ht.target,cr)}),Lr===pt)for(Hn=0;Hn<zr.length;)kr[zr[Hn].identifier]=!0,Hn++;for(Hn=0;Hn<Bo.length;)kr[Bo[Hn].identifier]&&Vr.push(Bo[Hn]),Lr&(wt|ee)&&delete kr[Bo[Hn].identifier],Hn++;if(Vr.length)return[ne(zr.concat(Vr),"identifier",!0),Vr]}var fa=2500,Xi=25;function Ln(){Be.apply(this,arguments);var hr=ye(this.handler,this);this.touch=new Nn(this.manager,hr),this.mouse=new jn(this.manager,hr),this.primaryTouch=null,this.lastTouches=[]}$e(Ln,Be,{handler:function(Lr,or,kr){var Hn=kr.pointerType==_t,zr=kr.pointerType==Ot;if(!(zr&&kr.sourceCapabilities&&kr.sourceCapabilities.firesTouchEvents)){if(Hn)na.call(this,or,kr);else if(zr&&ta.call(this,kr))return;this.callback(Lr,or,kr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function na(hr,Lr){hr&pt?(this.primaryTouch=Lr.changedPointers[0].identifier,xi.call(this,Lr)):hr&(wt|ee)&&xi.call(this,Lr)}function xi(hr){var Lr=hr.changedPointers[0];if(Lr.identifier===this.primaryTouch){var or={x:Lr.clientX,y:Lr.clientY};this.lastTouches.push(or);var kr=this.lastTouches,Hn=function(){var zr=kr.indexOf(or);zr>-1&&kr.splice(zr,1)};setTimeout(Hn,fa)}}function ta(hr){for(var Lr=hr.srcEvent.clientX,or=hr.srcEvent.clientY,kr=0;kr<this.lastTouches.length;kr++){var Hn=this.lastTouches[kr],zr=Math.abs(Lr-Hn.x),Bo=Math.abs(or-Hn.y);if(zr<=Xi&&Bo<=Xi)return!0}return!1}var La=L?N:xe(U.style,"touchAction"),Ki=La!==N,jo="compute",uo="auto",An="manipulation",gn="none",Oi="pan-x",fi="pan-y",va=Aa();function wa(hr,Lr){this.manager=hr,this.set(Lr)}wa.prototype={set:function(hr){hr==jo&&(hr=this.compute()),Ki&&this.manager.element.style&&va[hr]&&(this.manager.element.style[La]=hr),this.actions=hr.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var hr=[];return at(this.manager.recognizers,function(Lr){ie(Lr.options.enable,[Lr])&&(hr=hr.concat(Lr.getTouchAction()))}),Ca(hr.join(" "))},preventDefaults:function(hr){var Lr=hr.srcEvent,or=hr.offsetDirection;if(this.manager.session.prevented){Lr.preventDefault();return}var kr=this.actions,Hn=ce(kr,gn)&&!va[gn],zr=ce(kr,fi)&&!va[fi],Bo=ce(kr,Oi)&&!va[Oi];if(Hn){var Vr=hr.pointers.length===1,cr=hr.distance<2,ht=hr.deltaTime<250;if(Vr&&cr&&ht)return}if(!(Bo&&zr)&&(Hn||zr&&or&O||Bo&&or&k))return this.preventSrc(Lr)},preventSrc:function(hr){this.manager.session.prevented=!0,hr.preventDefault()}};function Ca(hr){if(ce(hr,gn))return gn;var Lr=ce(hr,Oi),or=ce(hr,fi);return Lr&&or?gn:Lr||or?Lr?Oi:fi:ce(hr,An)?An:uo}function Aa(){if(!Ki)return!1;var hr={};if(L)return hr;var Lr=M.CSS&&M.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(or){hr[or]=Lr?M.CSS.supports("touch-action",or):!0}),hr}var ma=1,ka=2,Uo=4,ha=8,xa=ha,eo=16,Te=32;function Po(hr){this.options=Et({},this.defaults,hr||{}),this.id=Pe(),this.manager=null,this.options.enable=re(this.options.enable,!0),this.state=ma,this.simultaneous={},this.requireFail=[]}Po.prototype={defaults:{},set:function(hr){return Et(this.options,hr),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(hr){if(et(hr,"recognizeWith",this))return this;var Lr=this.simultaneous;return hr=Jo(hr,this),Lr[hr.id]||(Lr[hr.id]=hr,hr.recognizeWith(this)),this},dropRecognizeWith:function(hr){return et(hr,"dropRecognizeWith",this)?this:(hr=Jo(hr,this),delete this.simultaneous[hr.id],this)},requireFailure:function(hr){if(et(hr,"requireFailure",this))return this;var Lr=this.requireFail;return hr=Jo(hr,this),J(Lr,hr)===-1&&(Lr.push(hr),hr.requireFailure(this)),this},dropRequireFailure:function(hr){if(et(hr,"dropRequireFailure",this))return this;hr=Jo(hr,this);var Lr=J(this.requireFail,hr);return Lr>-1&&this.requireFail.splice(Lr,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(hr){return!!this.simultaneous[hr.id]},emit:function(hr){var Lr=this,or=this.state;function kr(Hn){Lr.manager.emit(Hn,hr)}or<ha&&kr(Lr.options.event+Hs(or)),kr(Lr.options.event),hr.additionalEvent&&kr(hr.additionalEvent),or>=ha&&kr(Lr.options.event+Hs(or))},tryEmit:function(hr){if(this.canEmit())return this.emit(hr);this.state=Te},canEmit:function(){for(var hr=0;hr<this.requireFail.length;){if(!(this.requireFail[hr].state&(Te|ma)))return!1;hr++}return!0},recognize:function(hr){var Lr=Et({},hr);if(!ie(this.options.enable,[this,Lr])){this.reset(),this.state=Te;return}this.state&(xa|eo|Te)&&(this.state=ma),this.state=this.process(Lr),this.state&(ka|Uo|ha|eo)&&this.tryEmit(Lr)},process:function(hr){},getTouchAction:function(){},reset:function(){}};function Hs(hr){return hr&eo?"cancel":hr&ha?"end":hr&Uo?"move":hr&ka?"start":""}function no(hr){return hr==G?"down":hr==q?"up":hr==dt?"left":hr==D?"right":""}function Jo(hr,Lr){var or=Lr.manager;return or?or.get(hr):hr}function os(){Po.apply(this,arguments)}$e(os,Po,{defaults:{pointers:1},attrTest:function(hr){var Lr=this.options.pointers;return Lr===0||hr.pointers.length===Lr},process:function(hr){var Lr=this.state,or=hr.eventType,kr=Lr&(ka|Uo),Hn=this.attrTest(hr);return kr&&(or&ee||!Hn)?Lr|eo:kr||Hn?or&wt?Lr|ha:Lr&ka?Lr|Uo:ka:Te}});function Go(){os.apply(this,arguments),this.pX=null,this.pY=null}$e(Go,os,{defaults:{event:"pan",threshold:10,pointers:1,direction:X},getTouchAction:function(){var hr=this.options.direction,Lr=[];return hr&O&&Lr.push(fi),hr&k&&Lr.push(Oi),Lr},directionTest:function(hr){var Lr=this.options,or=!0,kr=hr.distance,Hn=hr.direction,zr=hr.deltaX,Bo=hr.deltaY;return Hn&Lr.direction||(Lr.direction&O?(Hn=zr===0?Re:zr<0?dt:D,or=zr!=this.pX,kr=Math.abs(hr.deltaX)):(Hn=Bo===0?Re:Bo<0?q:G,or=Bo!=this.pY,kr=Math.abs(hr.deltaY))),hr.direction=Hn,or&&kr>Lr.threshold&&Hn&Lr.direction},attrTest:function(hr){return os.prototype.attrTest.call(this,hr)&&(this.state&ka||!(this.state&ka)&&this.directionTest(hr))},emit:function(hr){this.pX=hr.deltaX,this.pY=hr.deltaY;var Lr=no(hr.direction);Lr&&(hr.additionalEvent=this.options.event+Lr),this._super.emit.call(this,hr)}});function Wo(){os.apply(this,arguments)}$e(Wo,os,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[gn]},attrTest:function(hr){return this._super.attrTest.call(this,hr)&&(Math.abs(hr.scale-1)>this.options.threshold||this.state&ka)},emit:function(hr){if(hr.scale!==1){var Lr=hr.scale<1?"in":"out";hr.additionalEvent=this.options.event+Lr}this._super.emit.call(this,hr)}});function za(){Po.apply(this,arguments),this._timer=null,this._input=null}$e(za,Po,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[uo]},process:function(hr){var Lr=this.options,or=hr.pointers.length===Lr.pointers,kr=hr.distance<Lr.threshold,Hn=hr.deltaTime>Lr.time;if(this._input=hr,!kr||!or||hr.eventType&(wt|ee)&&!Hn)this.reset();else if(hr.eventType&pt)this.reset(),this._timer=Se(function(){this.state=xa,this.tryEmit()},Lr.time,this);else if(hr.eventType&wt)return xa;return Te},reset:function(){clearTimeout(this._timer)},emit:function(hr){this.state===xa&&(hr&&hr.eventType&wt?this.manager.emit(this.options.event+"up",hr):(this._input.timeStamp=Le(),this.manager.emit(this.options.event,this._input)))}});function Tu(){os.apply(this,arguments)}$e(Tu,os,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[gn]},attrTest:function(hr){return this._super.attrTest.call(this,hr)&&(Math.abs(hr.rotation)>this.options.threshold||this.state&ka)}});function ws(){os.apply(this,arguments)}$e(ws,os,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:O|k,pointers:1},getTouchAction:function(){return Go.prototype.getTouchAction.call(this)},attrTest:function(hr){var Lr=this.options.direction,or;return Lr&(O|k)?or=hr.overallVelocity:Lr&O?or=hr.overallVelocityX:Lr&k&&(or=hr.overallVelocityY),this._super.attrTest.call(this,hr)&&Lr&hr.offsetDirection&&hr.distance>this.options.threshold&&hr.maxPointers==this.options.pointers&&me(or)>this.options.velocity&&hr.eventType&wt},emit:function(hr){var Lr=no(hr.offsetDirection);Lr&&this.manager.emit(this.options.event+Lr,hr),this.manager.emit(this.options.event,hr)}});function Zs(){Po.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}$e(Zs,Po,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[An]},process:function(hr){var Lr=this.options,or=hr.pointers.length===Lr.pointers,kr=hr.distance<Lr.threshold,Hn=hr.deltaTime<Lr.time;if(this.reset(),hr.eventType&pt&&this.count===0)return this.failTimeout();if(kr&&Hn&&or){if(hr.eventType!=wt)return this.failTimeout();var zr=this.pTime?hr.timeStamp-this.pTime<Lr.interval:!0,Bo=!this.pCenter||Tr(this.pCenter,hr.center)<Lr.posThreshold;this.pTime=hr.timeStamp,this.pCenter=hr.center,!Bo||!zr?this.count=1:this.count+=1,this._input=hr;var Vr=this.count%Lr.taps;if(Vr===0)return this.hasRequireFailures()?(this._timer=Se(function(){this.state=xa,this.tryEmit()},Lr.interval,this),ka):xa}return Te},failTimeout:function(){return this._timer=Se(function(){this.state=Te},this.options.interval,this),Te},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ts(hr,Lr){return Lr=Lr||{},Lr.recognizers=re(Lr.recognizers,ts.defaults.preset),new ls(hr,Lr)}ts.VERSION="2.0.7",ts.defaults={domEvents:!1,touchAction:jo,enable:!0,inputTarget:null,inputClass:null,preset:[[Tu,{enable:!1}],[Wo,{enable:!1},["rotate"]],[ws,{direction:O}],[Go,{direction:O},["swipe"]],[Zs],[Zs,{event:"doubletap",taps:2},["tap"]],[za]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vs=1,ou=2;function ls(hr,Lr){this.options=Et({},ts.defaults,Lr||{}),this.options.inputTarget=this.options.inputTarget||hr,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=hr,this.input=ve(this),this.touchAction=new wa(this,this.options.touchAction),ki(this,!0),at(this.options.recognizers,function(or){var kr=this.add(new or[0](or[1]));or[2]&&kr.recognizeWith(or[2]),or[3]&&kr.requireFailure(or[3])},this)}ls.prototype={set:function(hr){return Et(this.options,hr),hr.touchAction&&this.touchAction.update(),hr.inputTarget&&(this.input.destroy(),this.input.target=hr.inputTarget,this.input.init()),this},stop:function(hr){this.session.stopped=hr?ou:Vs},recognize:function(hr){var Lr=this.session;if(!Lr.stopped){this.touchAction.preventDefaults(hr);var or,kr=this.recognizers,Hn=Lr.curRecognizer;(!Hn||Hn&&Hn.state&xa)&&(Hn=Lr.curRecognizer=null);for(var zr=0;zr<kr.length;)or=kr[zr],Lr.stopped!==ou&&(!Hn||or==Hn||or.canRecognizeWith(Hn))?or.recognize(hr):or.reset(),!Hn&&or.state&(ka|Uo|ha)&&(Hn=Lr.curRecognizer=or),zr++}},get:function(hr){if(hr instanceof Po)return hr;for(var Lr=this.recognizers,or=0;or<Lr.length;or++)if(Lr[or].options.event==hr)return Lr[or];return null},add:function(hr){if(et(hr,"add",this))return this;var Lr=this.get(hr.options.event);return Lr&&this.remove(Lr),this.recognizers.push(hr),hr.manager=this,this.touchAction.update(),hr},remove:function(hr){if(et(hr,"remove",this))return this;if(hr=this.get(hr),hr){var Lr=this.recognizers,or=J(Lr,hr);or!==-1&&(Lr.splice(or,1),this.touchAction.update())}return this},on:function(hr,Lr){if(hr!==N&&Lr!==N){var or=this.handlers;return at(je(hr),function(kr){or[kr]=or[kr]||[],or[kr].push(Lr)}),this}},off:function(hr,Lr){if(hr!==N){var or=this.handlers;return at(je(hr),function(kr){Lr?or[kr]&&or[kr].splice(J(or[kr],Lr),1):delete or[kr]}),this}},emit:function(hr,Lr){this.options.domEvents&&As(hr,Lr);var or=this.handlers[hr]&&this.handlers[hr].slice();if(!(!or||!or.length)){Lr.type=hr,Lr.preventDefault=function(){Lr.srcEvent.preventDefault()};for(var kr=0;kr<or.length;)or[kr](Lr),kr++}},destroy:function(){this.element&&ki(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ki(hr,Lr){var or=hr.element;if(or.style){var kr;at(hr.options.cssProps,function(Hn,zr){kr=xe(or.style,zr),Lr?(hr.oldCssProps[kr]=or.style[kr],or.style[kr]=Hn):or.style[kr]=hr.oldCssProps[kr]||""}),Lr||(hr.oldCssProps={})}}function As(hr,Lr){if(!L){var or=c.createEvent("Event");or.initEvent(hr,!0,!0),or.gesture=Lr,Lr.target.dispatchEvent(or)}}if(!L){Et(ts,{INPUT_START:pt,INPUT_MOVE:Ge,INPUT_END:wt,INPUT_CANCEL:ee,STATE_POSSIBLE:ma,STATE_BEGAN:ka,STATE_CHANGED:Uo,STATE_ENDED:ha,STATE_RECOGNIZED:xa,STATE_CANCELLED:eo,STATE_FAILED:Te,DIRECTION_NONE:Re,DIRECTION_LEFT:dt,DIRECTION_RIGHT:D,DIRECTION_UP:q,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:O,DIRECTION_VERTICAL:k,DIRECTION_ALL:X,Manager:ls,Input:Be,TouchAction:wa,TouchInput:Nn,MouseInput:jn,PointerEventInput:_r,TouchMouseInput:Ln,SingleTouchInput:tt,Recognizer:Po,AttrRecognizer:os,Tap:Zs,Pan:Go,Swipe:ws,Pinch:Wo,Rotate:Tu,Press:za,on:De,off:le,each:at,merge:pe,extend:jt,assign:Et,inherit:$e,bindFn:ye,prefixed:xe});var Rs=typeof window!="undefined"?window:typeof self!="undefined"?self:{};Rs.Hammer=ts,v=function(){return ts}.call(Ee,g,Ee,vt),v!==N&&(vt.exports=v)}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")},88307:function(vt,Ee,g){(function(v,M){vt.exports=M(g(51260))})(this,function(v){"use strict";var M=function(Ht){return Ht instanceof Uint8Array||Ht instanceof Uint16Array||Ht instanceof Uint32Array||Ht instanceof Int8Array||Ht instanceof Int16Array||Ht instanceof Int32Array||Ht instanceof Float32Array||Ht instanceof Float64Array||Ht instanceof Uint8ClampedArray},c=function(Ht,Zr){for(var On=Object.keys(Zr),wi=0;wi<On.length;++wi)Ht[On[wi]]=Zr[On[wi]];return Ht},K=`
`;function N(Ht){return typeof atob!="undefined"?atob(Ht):"base64:"+Ht}function Z(Ht){var Zr=new Error("(regl) "+Ht);throw console.error(Zr),Zr}function B(Ht,Zr){Ht||Z(Zr)}function L(Ht){return Ht?": "+Ht:""}function $(Ht,Zr,On){Ht in Zr||Z("unknown parameter ("+Ht+")"+L(On)+". possible values: "+Object.keys(Zr).join())}function U(Ht,Zr){M(Ht)||Z("invalid parameter type"+L(Zr)+". must be a typed array")}function ke(Ht,Zr){switch(Zr){case"number":return typeof Ht=="number";case"object":return typeof Ht=="object";case"string":return typeof Ht=="string";case"boolean":return typeof Ht=="boolean";case"function":return typeof Ht=="function";case"undefined":return typeof Ht=="undefined";case"symbol":return typeof Ht=="symbol"}}function We(Ht,Zr,On){ke(Ht,Zr)||Z("invalid parameter type"+L(On)+". expected "+Zr+", got "+typeof Ht)}function me(Ht,Zr){Ht>=0&&(Ht|0)===Ht||Z("invalid parameter type, ("+Ht+")"+L(Zr)+". must be a nonnegative integer")}function Le(Ht,Zr,On){Zr.indexOf(Ht)<0&&Z("invalid value"+L(On)+". must be one of: "+Zr)}var Se=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function et(Ht){Object.keys(Ht).forEach(function(Zr){Se.indexOf(Zr)<0&&Z('invalid regl constructor argument "'+Zr+'". must be one of '+Se)})}function at(Ht,Zr){for(Ht=Ht+"";Ht.length<Zr;)Ht=" "+Ht;return Ht}function Lt(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Et(Ht,Zr){this.number=Ht,this.line=Zr,this.errors=[]}function jt(Ht,Zr,On){this.file=Ht,this.line=Zr,this.message=On}function pe(){var Ht=new Error,Zr=(Ht.stack||Ht).toString(),On=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Zr);if(On)return On[1];var wi=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Zr);return wi?wi[1]:"unknown"}function $e(){var Ht=new Error,Zr=(Ht.stack||Ht).toString(),On=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Zr);if(On)return On[1];var wi=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Zr);return wi?wi[1]:"unknown"}function ye(Ht,Zr){var On=Ht.split(`
`),wi=1,ia=0,Ai={unknown:new Lt,0:new Lt};Ai.unknown.name=Ai[0].name=Zr||pe(),Ai.unknown.lines.push(new Et(0,""));for(var ji=0;ji<On.length;++ji){var Ea=On[ji],Ma=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ea);if(Ma)switch(Ma[1]){case"line":var Ia=/(\d+)(\s+\d+)?/.exec(Ma[2]);Ia&&(wi=Ia[1]|0,Ia[2]&&(ia=Ia[2]|0,ia in Ai||(Ai[ia]=new Lt)));break;case"define":var Za=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ma[2]);Za&&(Ai[ia].name=Za[1]?N(Za[2]):Za[2]);break}Ai[ia].lines.push(new Et(wi++,Ea))}return Object.keys(Ai).forEach(function(Ha){var $a=Ai[Ha];$a.lines.forEach(function(ya){$a.index[ya.number]=ya})}),Ai}function ie(Ht){var Zr=[];return Ht.split(`
`).forEach(function(On){if(!(On.length<5)){var wi=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(On);wi?Zr.push(new jt(wi[1]|0,wi[2]|0,wi[3].trim())):On.length>0&&Zr.push(new jt("unknown",0,On))}}),Zr}function re(Ht,Zr){Zr.forEach(function(On){var wi=Ht[On.file];if(wi){var ia=wi.index[On.line];if(ia){ia.errors.push(On),wi.hasErrors=!0;return}}Ht.unknown.hasErrors=!0,Ht.unknown.lines[0].errors.push(On)})}function De(Ht,Zr,On,wi,ia){if(!Ht.getShaderParameter(Zr,Ht.COMPILE_STATUS)){var Ai=Ht.getShaderInfoLog(Zr),ji=wi===Ht.FRAGMENT_SHADER?"fragment":"vertex";ne(On,"string",ji+" shader source must be a string",ia);var Ea=ye(On,ia),Ma=ie(Ai);re(Ea,Ma),Object.keys(Ea).forEach(function(Ia){var Za=Ea[Ia];if(!Za.hasErrors)return;var Ha=[""],$a=[""];function ya(Ua,si){Ha.push(Ua),$a.push(si||"")}ya("file number "+Ia+": "+Za.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Za.lines.forEach(function(Ua){if(Ua.errors.length>0){ya(at(Ua.number,4)+"|  ","background-color:yellow; font-weight:bold"),ya(Ua.line+K,"color:red; background-color:yellow; font-weight:bold");var si=0;Ua.errors.forEach(function(Ni){var Ra=Ni.message,Ya=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ra);if(Ya){var _a=Ya[1];switch(Ra=Ya[2],_a){case"assign":_a="=";break}si=Math.max(Ua.line.indexOf(_a,si),0)}else si=0;ya(at("| ",6)),ya(at("^^^",si+3)+K,"font-weight:bold"),ya(at("| ",6)),ya(Ra+K,"font-weight:bold")}),ya(at("| ",6)+K)}else ya(at(Ua.number,4)+"|  "),ya(Ua.line+K,"color:red")}),typeof document!="undefined"&&!window.chrome?($a[0]=Ha.join("%c"),console.log.apply(console,$a)):console.log(Ha.join(""))}),B.raise("Error compiling "+ji+" shader, "+Ea[0].name)}}function le(Ht,Zr,On,wi,ia){if(!Ht.getProgramParameter(Zr,Ht.LINK_STATUS)){var Ai=Ht.getProgramInfoLog(Zr),ji=ye(On,ia),Ea=ye(wi,ia),Ma='Error linking program with vertex shader, "'+Ea[0].name+'", and fragment shader "'+ji[0].name+'"';typeof document!="undefined"?console.log("%c"+Ma+K+"%c"+Ai,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ma+K+Ai),B.raise(Ma)}}function ge(Ht){Ht._commandRef=pe()}function ce(Ht,Zr,On,wi){ge(Ht);function ia(Ma){return Ma?wi.id(Ma):0}Ht._fragId=ia(Ht.static.frag),Ht._vertId=ia(Ht.static.vert);function Ai(Ma,Ia){Object.keys(Ia).forEach(function(Za){Ma[wi.id(Za)]=!0})}var ji=Ht._uniformSet={};Ai(ji,Zr.static),Ai(ji,Zr.dynamic);var Ea=Ht._attributeSet={};Ai(Ea,On.static),Ai(Ea,On.dynamic),Ht._hasCount="count"in Ht.static||"count"in Ht.dynamic||"elements"in Ht.static||"elements"in Ht.dynamic}function je(Ht,Zr){var On=$e();Z(Ht+" in command "+(Zr||pe())+(On==="unknown"?"":" called from "+On))}function J(Ht,Zr,On){Ht||je(Zr,On||pe())}function Me(Ht,Zr,On,wi){Ht in Zr||je("unknown parameter ("+Ht+")"+L(On)+". possible values: "+Object.keys(Zr).join(),wi||pe())}function ne(Ht,Zr,On,wi){ke(Ht,Zr)||je("invalid parameter type"+L(On)+". expected "+Zr+", got "+typeof Ht,wi||pe())}function xe(Ht){Ht()}function Ne(Ht,Zr,On){Ht.texture?Le(Ht.texture._texture.internalformat,Zr,"unsupported texture format for attachment"):Le(Ht.renderbuffer._renderbuffer.format,On,"unsupported renderbuffer format for attachment")}var Pe=33071,He=9728,lt=9984,ft=9985,It=9986,fe=9987,_t=5120,Ye=5121,Ot=5122,mt=5123,Rt=5124,pt=5125,Ge=5126,wt=32819,ee=32820,Re=33635,dt=34042,D=36193,q={};q[_t]=q[Ye]=1,q[Ot]=q[mt]=q[D]=q[Re]=q[wt]=q[ee]=2,q[Rt]=q[pt]=q[Ge]=q[dt]=4;function G(Ht,Zr){return Ht===ee||Ht===wt||Ht===Re?2:Ht===dt?4:q[Ht]*Zr}function O(Ht){return!(Ht&Ht-1)&&!!Ht}function k(Ht,Zr,On){var wi,ia=Zr.width,Ai=Zr.height,ji=Zr.channels;B(ia>0&&ia<=On.maxTextureSize&&Ai>0&&Ai<=On.maxTextureSize,"invalid texture shape"),(Ht.wrapS!==Pe||Ht.wrapT!==Pe)&&B(O(ia)&&O(Ai),"incompatible wrap mode for texture, both width and height must be power of 2"),Zr.mipmask===1?ia!==1&&Ai!==1&&B(Ht.minFilter!==lt&&Ht.minFilter!==It&&Ht.minFilter!==ft&&Ht.minFilter!==fe,"min filter requires mipmap"):(B(O(ia)&&O(Ai),"texture must be a square power of 2 to support mipmapping"),B(Zr.mipmask===(ia<<1)-1,"missing or incomplete mipmap data")),Zr.type===Ge&&(On.extensions.indexOf("oes_texture_float_linear")<0&&B(Ht.minFilter===He&&Ht.magFilter===He,"filter not supported, must enable oes_texture_float_linear"),B(!Ht.genMipmaps,"mipmap generation not supported with float textures"));var Ea=Zr.images;for(wi=0;wi<16;++wi)if(Ea[wi]){var Ma=ia>>wi,Ia=Ai>>wi;B(Zr.mipmask&1<<wi,"missing mipmap data");var Za=Ea[wi];if(B(Za.width===Ma&&Za.height===Ia,"invalid shape for mip images"),B(Za.format===Zr.format&&Za.internalformat===Zr.internalformat&&Za.type===Zr.type,"incompatible type for mip image"),!Za.compressed)if(Za.data){var Ha=Math.ceil(G(Za.type,ji)*Ma/Za.unpackAlignment)*Za.unpackAlignment;B(Za.data.byteLength===Ha*Ia,"invalid data for image, buffer size is inconsistent with image format")}else Za.element||Za.copy}else Ht.genMipmaps||B((Zr.mipmask&1<<wi)===0,"extra mipmap data");Zr.compressed&&B(!Ht.genMipmaps,"mipmap generation for compressed images not supported")}function X(Ht,Zr,On,wi){var ia=Ht.width,Ai=Ht.height,ji=Ht.channels;B(ia>0&&ia<=wi.maxTextureSize&&Ai>0&&Ai<=wi.maxTextureSize,"invalid texture shape"),B(ia===Ai,"cube map must be square"),B(Zr.wrapS===Pe&&Zr.wrapT===Pe,"wrap mode not supported by cube map");for(var Ea=0;Ea<On.length;++Ea){var Ma=On[Ea];B(Ma.width===ia&&Ma.height===Ai,"inconsistent cube map face shape"),Zr.genMipmaps&&(B(!Ma.compressed,"can not generate mipmap for compressed textures"),B(Ma.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ia=Ma.images,Za=0;Za<16;++Za){var Ha=Ia[Za];if(Ha){var $a=ia>>Za,ya=Ai>>Za;B(Ma.mipmask&1<<Za,"missing mipmap data"),B(Ha.width===$a&&Ha.height===ya,"invalid shape for mip images"),B(Ha.format===Ht.format&&Ha.internalformat===Ht.internalformat&&Ha.type===Ht.type,"incompatible type for mip image"),Ha.compressed||(Ha.data?B(Ha.data.byteLength===$a*ya*Math.max(G(Ha.type,ji),Ha.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ha.element||Ha.copy)}}}}var W=c(B,{optional:xe,raise:Z,commandRaise:je,command:J,parameter:$,commandParameter:Me,constructor:et,type:We,commandType:ne,isTypedArray:U,nni:me,oneOf:Le,shaderError:De,linkError:le,callSite:$e,saveCommandRef:ge,saveDrawInfo:ce,framebufferFormat:Ne,guessCommand:pe,texture2D:k,textureCube:X}),ae=0,Be=0,ve=5,Je=6;function ot(Ht,Zr){this.id=ae++,this.type=Ht,this.data=Zr}function Qe(Ht){return Ht.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ir(Ht){if(Ht.length===0)return[];var Zr=Ht.charAt(0),On=Ht.charAt(Ht.length-1);if(Ht.length>1&&Zr===On&&(Zr==='"'||Zr==="'"))return['"'+Qe(Ht.substr(1,Ht.length-2))+'"'];var wi=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ht);if(wi)return ir(Ht.substr(0,wi.index)).concat(ir(wi[1])).concat(ir(Ht.substr(wi.index+wi[0].length)));var ia=Ht.split(".");if(ia.length===1)return['"'+Qe(Ht)+'"'];for(var Ai=[],ji=0;ji<ia.length;++ji)Ai=Ai.concat(ir(ia[ji]));return Ai}function mr(Ht){return"["+ir(Ht).join("][")+"]"}function Ar(Ht,Zr){return new ot(Ht,mr(Zr+""))}function Er(Ht){return typeof Ht=="function"&&!Ht._reglType||Ht instanceof ot}function Zt(Ht,Zr){if(typeof Ht=="function")return new ot(Be,Ht);if(typeof Ht=="number"||typeof Ht=="boolean")return new ot(ve,Ht);if(Array.isArray(Ht))return new ot(Je,Ht.map(function(On,wi){return Zt(On,Zr+"["+wi+"]")}));if(Ht instanceof ot)return Ht;W(!1,"invalid option type in uniform "+Zr)}var Tr={DynamicVariable:ot,define:Ar,isDynamic:Er,unbox:Zt,accessor:mr},pn={next:typeof requestAnimationFrame=="function"?function(Ht){return requestAnimationFrame(Ht)}:function(Ht){return setTimeout(Ht,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ht){return cancelAnimationFrame(Ht)}:clearTimeout},un=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Zn=un?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Cr(){var Ht={"":0},Zr=[""];return{id:function(On){var wi=Ht[On];return wi||(wi=Ht[On]=Zr.length,Zr.push(On),wi)},str:function(On){return Zr[On]}}}function Nr(Ht,Zr,On){var wi=document.createElement("canvas");c(wi.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ht.appendChild(wi),Ht===document.body&&(wi.style.position="absolute",c(Ht.style,{margin:0,padding:0}));function ia(){var Ea=window.innerWidth,Ma=window.innerHeight;if(Ht!==document.body){var Ia=wi.getBoundingClientRect();Ea=Ia.right-Ia.left,Ma=Ia.bottom-Ia.top}wi.width=On*Ea,wi.height=On*Ma}var Ai;Ht!==document.body&&typeof ResizeObserver=="function"?(Ai=new ResizeObserver(function(){setTimeout(ia)}),Ai.observe(Ht)):window.addEventListener("resize",ia,!1);function ji(){Ai?Ai.disconnect():window.removeEventListener("resize",ia),Ht.removeChild(wi)}return ia(),{canvas:wi,onDestroy:ji}}function bt(Ht,Zr){function On(wi){try{return Ht.getContext(wi,Zr)}catch(ia){return null}}return On("webgl")||On("experimental-webgl")||On("webgl-experimental")}function jn(Ht){return typeof Ht.nodeName=="string"&&typeof Ht.appendChild=="function"&&typeof Ht.getBoundingClientRect=="function"}function Pt(Ht){return typeof Ht.drawArrays=="function"||typeof Ht.drawElements=="function"}function zt(Ht){return typeof Ht=="string"?Ht.split():(W(Array.isArray(Ht),"invalid extension array"),Ht)}function Qt(Ht){return typeof Ht=="string"?(W(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ht)):Ht}function dr(Ht){var Zr=Ht||{},On,wi,ia,Ai,ji={},Ea=[],Ma=[],Ia=typeof window=="undefined"?1:window.devicePixelRatio,Za=!1,Ha=function(Ua){Ua&&W.raise(Ua)},$a=function(){};if(typeof Zr=="string"?(W(typeof document!="undefined","selector queries only supported in DOM environments"),On=document.querySelector(Zr),W(On,"invalid query string for element")):typeof Zr=="object"?jn(Zr)?On=Zr:Pt(Zr)?(Ai=Zr,ia=Ai.canvas):(W.constructor(Zr),"gl"in Zr?Ai=Zr.gl:"canvas"in Zr?ia=Qt(Zr.canvas):"container"in Zr&&(wi=Qt(Zr.container)),"attributes"in Zr&&(ji=Zr.attributes,W.type(ji,"object","invalid context attributes")),"extensions"in Zr&&(Ea=zt(Zr.extensions)),"optionalExtensions"in Zr&&(Ma=zt(Zr.optionalExtensions)),"onDone"in Zr&&(W.type(Zr.onDone,"function","invalid or missing onDone callback"),Ha=Zr.onDone),"profile"in Zr&&(Za=!!Zr.profile),"pixelRatio"in Zr&&(Ia=+Zr.pixelRatio,W(Ia>0,"invalid pixel ratio"))):W.raise("invalid arguments to regl"),On&&(On.nodeName.toLowerCase()==="canvas"?ia=On:wi=On),!Ai){if(!ia){W(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var ya=Nr(wi||document.body,Ha,Ia);if(!ya)return null;ia=ya.canvas,$a=ya.onDestroy}ji.premultipliedAlpha===void 0&&(ji.premultipliedAlpha=!0),Ai=bt(ia,ji)}return Ai?{gl:Ai,canvas:ia,container:wi,extensions:Ea,optionalExtensions:Ma,pixelRatio:Ia,profile:Za,onDone:Ha,onDestroy:$a}:($a(),Ha("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function _r(Ht,Zr){var On={};function wi(Ea){W.type(Ea,"string","extension name must be string");var Ma=Ea.toLowerCase(),Ia;try{Ia=On[Ma]=ia(Ea)}catch(Za){}return!!Ia}function ia(Ea){return Ht.getExtension(Ea)?Ht.getExtension(Ea):Ht.getExtension(Ea.toLowerCase())?Ht.getExtension(Ea.toLowerCase()):null}for(var Ai=0;Ai<Zr.extensions.length;++Ai){var ji=Zr.extensions[Ai];if(!wi(ji))return Zr.onDestroy(),Zr.onDone('"'+ji+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Zr.optionalExtensions.forEach(wi),{extensions:On,restore:function(){Object.keys(On).forEach(function(Ea){if(On[Ea]&&!wi(Ea))throw new Error("(regl): error restoring extension "+Ea)})}}}function Hr(Ht,Zr){for(var On=Array(Ht),wi=0;wi<Ht;++wi)On[wi]=Zr(wi);return On}var Qr=5120,fr=5121,tt=5122,Yr=5123,Tn=5124,wn=5125,Nn=5126;function Si(Ht){for(var Zr=16;Zr<=1<<28;Zr*=16)if(Ht<=Zr)return Zr;return 0}function fa(Ht){var Zr,On;return Zr=(Ht>65535)<<4,Ht>>>=Zr,On=(Ht>255)<<3,Ht>>>=On,Zr|=On,On=(Ht>15)<<2,Ht>>>=On,Zr|=On,On=(Ht>3)<<1,Ht>>>=On,Zr|=On,Zr|Ht>>1}function Xi(){var Ht=Hr(8,function(){return[]});function Zr(Ai){var ji=Si(Ai),Ea=Ht[fa(ji)>>2];return Ea.length>0?Ea.pop():new ArrayBuffer(ji)}function On(Ai){Ht[fa(Ai.byteLength)>>2].push(Ai)}function wi(Ai,ji){var Ea=null;switch(Ai){case Qr:Ea=new Int8Array(Zr(ji),0,ji);break;case fr:Ea=new Uint8Array(Zr(ji),0,ji);break;case tt:Ea=new Int16Array(Zr(2*ji),0,ji);break;case Yr:Ea=new Uint16Array(Zr(2*ji),0,ji);break;case Tn:Ea=new Int32Array(Zr(4*ji),0,ji);break;case wn:Ea=new Uint32Array(Zr(4*ji),0,ji);break;case Nn:Ea=new Float32Array(Zr(4*ji),0,ji);break;default:return null}return Ea.length!==ji?Ea.subarray(0,ji):Ea}function ia(Ai){On(Ai.buffer)}return{alloc:Zr,free:On,allocType:wi,freeType:ia}}var Ln=Xi();Ln.zero=Xi();var na=3408,xi=3410,ta=3411,La=3412,Ki=3413,jo=3414,uo=3415,An=33901,gn=33902,Oi=3379,fi=3386,va=34921,wa=36347,Ca=36348,Aa=35661,ma=35660,ka=34930,Uo=36349,ha=34076,xa=34024,eo=7936,Te=7937,Po=7938,Hs=35724,no=34047,Jo=36063,os=34852,Go=3553,Wo=34067,za=34069,Tu=33984,ws=6408,Zs=5126,ts=5121,Vs=36160,ou=36053,ls=36064,ki=16384,As=function(Ht,Zr){var On=1;Zr.ext_texture_filter_anisotropic&&(On=Ht.getParameter(no));var wi=1,ia=1;Zr.webgl_draw_buffers&&(wi=Ht.getParameter(os),ia=Ht.getParameter(Jo));var Ai=!!Zr.oes_texture_float;if(Ai){var ji=Ht.createTexture();Ht.bindTexture(Go,ji),Ht.texImage2D(Go,0,ws,1,1,0,ws,Zs,null);var Ea=Ht.createFramebuffer();if(Ht.bindFramebuffer(Vs,Ea),Ht.framebufferTexture2D(Vs,ls,Go,ji,0),Ht.bindTexture(Go,null),Ht.checkFramebufferStatus(Vs)!==ou)Ai=!1;else{Ht.viewport(0,0,1,1),Ht.clearColor(1,0,0,1),Ht.clear(ki);var Ma=Ln.allocType(Zs,4);Ht.readPixels(0,0,1,1,ws,Zs,Ma),Ht.getError()?Ai=!1:(Ht.deleteFramebuffer(Ea),Ht.deleteTexture(ji),Ai=Ma[0]===1),Ln.freeType(Ma)}}var Ia=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Za=!0;if(!Ia){var Ha=Ht.createTexture(),$a=Ln.allocType(ts,36);Ht.activeTexture(Tu),Ht.bindTexture(Wo,Ha),Ht.texImage2D(za,0,ws,3,3,0,ws,ts,$a),Ln.freeType($a),Ht.bindTexture(Wo,null),Ht.deleteTexture(Ha),Za=!Ht.getError()}return{colorBits:[Ht.getParameter(xi),Ht.getParameter(ta),Ht.getParameter(La),Ht.getParameter(Ki)],depthBits:Ht.getParameter(jo),stencilBits:Ht.getParameter(uo),subpixelBits:Ht.getParameter(na),extensions:Object.keys(Zr).filter(function(ya){return!!Zr[ya]}),maxAnisotropic:On,maxDrawbuffers:wi,maxColorAttachments:ia,pointSizeDims:Ht.getParameter(An),lineWidthDims:Ht.getParameter(gn),maxViewportDims:Ht.getParameter(fi),maxCombinedTextureUnits:Ht.getParameter(Aa),maxCubeMapSize:Ht.getParameter(ha),maxRenderbufferSize:Ht.getParameter(xa),maxTextureUnits:Ht.getParameter(ka),maxTextureSize:Ht.getParameter(Oi),maxAttributes:Ht.getParameter(va),maxVertexUniforms:Ht.getParameter(wa),maxVertexTextureUnits:Ht.getParameter(ma),maxVaryingVectors:Ht.getParameter(Ca),maxFragmentUniforms:Ht.getParameter(Uo),glsl:Ht.getParameter(Hs),renderer:Ht.getParameter(Te),vendor:Ht.getParameter(eo),version:Ht.getParameter(Po),readFloat:Ai,npotTextureCube:Za}};function Rs(Ht){return!!Ht&&typeof Ht=="object"&&Array.isArray(Ht.shape)&&Array.isArray(Ht.stride)&&typeof Ht.offset=="number"&&Ht.shape.length===Ht.stride.length&&(Array.isArray(Ht.data)||M(Ht.data))}var hr=function(Ht){return Object.keys(Ht).map(function(Zr){return Ht[Zr]})},Lr={shape:Vr,flatten:Bo};function or(Ht,Zr,On){for(var wi=0;wi<Zr;++wi)On[wi]=Ht[wi]}function kr(Ht,Zr,On,wi){for(var ia=0,Ai=0;Ai<Zr;++Ai)for(var ji=Ht[Ai],Ea=0;Ea<On;++Ea)wi[ia++]=ji[Ea]}function Hn(Ht,Zr,On,wi,ia,Ai){for(var ji=Ai,Ea=0;Ea<Zr;++Ea)for(var Ma=Ht[Ea],Ia=0;Ia<On;++Ia)for(var Za=Ma[Ia],Ha=0;Ha<wi;++Ha)ia[ji++]=Za[Ha]}function zr(Ht,Zr,On,wi,ia){for(var Ai=1,ji=On+1;ji<Zr.length;++ji)Ai*=Zr[ji];var Ea=Zr[On];if(Zr.length-On===4){var Ma=Zr[On+1],Ia=Zr[On+2],Za=Zr[On+3];for(ji=0;ji<Ea;++ji)Hn(Ht[ji],Ma,Ia,Za,wi,ia),ia+=Ai}else for(ji=0;ji<Ea;++ji)zr(Ht[ji],Zr,On+1,wi,ia),ia+=Ai}function Bo(Ht,Zr,On,wi){var ia=1;if(Zr.length)for(var Ai=0;Ai<Zr.length;++Ai)ia*=Zr[Ai];else ia=0;var ji=wi||Ln.allocType(On,ia);switch(Zr.length){case 0:break;case 1:or(Ht,Zr[0],ji);break;case 2:kr(Ht,Zr[0],Zr[1],ji);break;case 3:Hn(Ht,Zr[0],Zr[1],Zr[2],ji,0);break;default:zr(Ht,Zr,0,ji,0)}return ji}function Vr(Ht){for(var Zr=[],On=Ht;On.length;On=On[0])Zr.push(On.length);return Zr}var cr={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ht=5120,ur=5122,er=5124,sn=5121,fn=5123,Vn=5125,ni=5126,oi=5126,Ei={int8:ht,int16:ur,int32:er,uint8:sn,uint16:fn,uint32:Vn,float:ni,float32:oi},qi=35048,Pr=35040,Cn={dynamic:qi,stream:Pr,static:35044},ln=Lr.flatten,bn=Lr.shape,Kn=35044,bi=35040,Yi=5121,Gi=5126,aa=[];aa[5120]=1,aa[5122]=2,aa[5124]=4,aa[5121]=1,aa[5123]=2,aa[5125]=4,aa[5126]=4;function Ta(Ht){return cr[Object.prototype.toString.call(Ht)]|0}function R(Ht,Zr){for(var On=0;On<Zr.length;++On)Ht[On]=Zr[On]}function _e(Ht,Zr,On,wi,ia,Ai,ji){for(var Ea=0,Ma=0;Ma<On;++Ma)for(var Ia=0;Ia<wi;++Ia)Ht[Ea++]=Zr[ia*Ma+Ai*Ia+ji]}function At(Ht,Zr,On,wi){var ia=0,Ai={};function ji(si){this.id=ia++,this.buffer=Ht.createBuffer(),this.type=si,this.usage=Kn,this.byteLength=0,this.dimension=1,this.dtype=Yi,this.persistentData=null,On.profile&&(this.stats={size:0})}ji.prototype.bind=function(){Ht.bindBuffer(this.type,this.buffer)},ji.prototype.destroy=function(){$a(this)};var Ea=[];function Ma(si,Ni){var Ra=Ea.pop();return Ra||(Ra=new ji(si)),Ra.bind(),Ha(Ra,Ni,bi,0,1,!1),Ra}function Ia(si){Ea.push(si)}function Za(si,Ni,Ra){si.byteLength=Ni.byteLength,Ht.bufferData(si.type,Ni,Ra)}function Ha(si,Ni,Ra,Ya,_a,Ga){var xo;if(si.usage=Ra,Array.isArray(Ni)){if(si.dtype=Ya||Gi,Ni.length>0){var xs;if(Array.isArray(Ni[0])){xo=bn(Ni);for(var Qi=1,oa=1;oa<xo.length;++oa)Qi*=xo[oa];si.dimension=Qi,xs=ln(Ni,xo,si.dtype),Za(si,xs,Ra),Ga?si.persistentData=xs:Ln.freeType(xs)}else if(typeof Ni[0]=="number"){si.dimension=_a;var Zo=Ln.allocType(si.dtype,Ni.length);R(Zo,Ni),Za(si,Zo,Ra),Ga?si.persistentData=Zo:Ln.freeType(Zo)}else M(Ni[0])?(si.dimension=Ni[0].length,si.dtype=Ya||Ta(Ni[0])||Gi,xs=ln(Ni,[Ni.length,Ni[0].length],si.dtype),Za(si,xs,Ra),Ga?si.persistentData=xs:Ln.freeType(xs)):W.raise("invalid buffer data")}}else if(M(Ni))si.dtype=Ya||Ta(Ni),si.dimension=_a,Za(si,Ni,Ra),Ga&&(si.persistentData=new Uint8Array(new Uint8Array(Ni.buffer)));else if(Rs(Ni)){xo=Ni.shape;var fo=Ni.stride,Pa=Ni.offset,to=0,Oa=0,Os=0,Bs=0;xo.length===1?(to=xo[0],Oa=1,Os=fo[0],Bs=0):xo.length===2?(to=xo[0],Oa=xo[1],Os=fo[0],Bs=fo[1]):W.raise("invalid shape"),si.dtype=Ya||Ta(Ni.data)||Gi,si.dimension=Oa;var so=Ln.allocType(si.dtype,to*Oa);_e(so,Ni.data,to,Oa,Os,Bs,Pa),Za(si,so,Ra),Ga?si.persistentData=so:Ln.freeType(so)}else Ni instanceof ArrayBuffer?(si.dtype=Yi,si.dimension=_a,Za(si,Ni,Ra),Ga&&(si.persistentData=new Uint8Array(new Uint8Array(Ni)))):W.raise("invalid buffer data")}function $a(si){Zr.bufferCount--,wi(si);var Ni=si.buffer;W(Ni,"buffer must not be deleted already"),Ht.deleteBuffer(Ni),si.buffer=null,delete Ai[si.id]}function ya(si,Ni,Ra,Ya){Zr.bufferCount++;var _a=new ji(Ni);Ai[_a.id]=_a;function Ga(Qi){var oa=Kn,Zo=null,fo=0,Pa=0,to=1;return Array.isArray(Qi)||M(Qi)||Rs(Qi)||Qi instanceof ArrayBuffer?Zo=Qi:typeof Qi=="number"?fo=Qi|0:Qi&&(W.type(Qi,"object","buffer arguments must be an object, a number or an array"),"data"in Qi&&(W(Zo===null||Array.isArray(Zo)||M(Zo)||Rs(Zo),"invalid data for buffer"),Zo=Qi.data),"usage"in Qi&&(W.parameter(Qi.usage,Cn,"invalid buffer usage"),oa=Cn[Qi.usage]),"type"in Qi&&(W.parameter(Qi.type,Ei,"invalid buffer type"),Pa=Ei[Qi.type]),"dimension"in Qi&&(W.type(Qi.dimension,"number","invalid dimension"),to=Qi.dimension|0),"length"in Qi&&(W.nni(fo,"buffer length must be a nonnegative integer"),fo=Qi.length|0)),_a.bind(),Zo?Ha(_a,Zo,oa,Pa,to,Ya):(fo&&Ht.bufferData(_a.type,fo,oa),_a.dtype=Pa||Yi,_a.usage=oa,_a.dimension=to,_a.byteLength=fo),On.profile&&(_a.stats.size=_a.byteLength*aa[_a.dtype]),Ga}function xo(Qi,oa){W(oa+Qi.byteLength<=_a.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qi.byteLength+" starting from offset "+oa+" to a buffer of size "+_a.byteLength),Ht.bufferSubData(_a.type,oa,Qi)}function xs(Qi,oa){var Zo=(oa||0)|0,fo;if(_a.bind(),M(Qi)||Qi instanceof ArrayBuffer)xo(Qi,Zo);else if(Array.isArray(Qi)){if(Qi.length>0)if(typeof Qi[0]=="number"){var Pa=Ln.allocType(_a.dtype,Qi.length);R(Pa,Qi),xo(Pa,Zo),Ln.freeType(Pa)}else if(Array.isArray(Qi[0])||M(Qi[0])){fo=bn(Qi);var to=ln(Qi,fo,_a.dtype);xo(to,Zo),Ln.freeType(to)}else W.raise("invalid buffer data")}else if(Rs(Qi)){fo=Qi.shape;var Oa=Qi.stride,Os=0,Bs=0,so=0,yo=0;fo.length===1?(Os=fo[0],Bs=1,so=Oa[0],yo=0):fo.length===2?(Os=fo[0],Bs=fo[1],so=Oa[0],yo=Oa[1]):W.raise("invalid shape");var hs=Array.isArray(Qi.data)?_a.dtype:Ta(Qi.data),zs=Ln.allocType(hs,Os*Bs);_e(zs,Qi.data,Os,Bs,so,yo,Qi.offset),xo(zs,Zo),Ln.freeType(zs)}else W.raise("invalid data for buffer subdata");return Ga}return Ra||Ga(si),Ga._reglType="buffer",Ga._buffer=_a,Ga.subdata=xs,On.profile&&(Ga.stats=_a.stats),Ga.destroy=function(){$a(_a)},Ga}function Ua(){hr(Ai).forEach(function(si){si.buffer=Ht.createBuffer(),Ht.bindBuffer(si.type,si.buffer),Ht.bufferData(si.type,si.persistentData||si.byteLength,si.usage)})}return On.profile&&(Zr.getTotalBufferSize=function(){var si=0;return Object.keys(Ai).forEach(function(Ni){si+=Ai[Ni].stats.size}),si}),{create:ya,createStream:Ma,destroyStream:Ia,clear:function(){hr(Ai).forEach($a),Ea.forEach($a)},getBuffer:function(si){return si&&si._buffer instanceof ji?si._buffer:null},restore:Ua,_initBuffer:Ha}}var Ke=0,nr=0,wr=1,Wr=1,In=4,Dn=4,Mi={points:Ke,point:nr,lines:wr,line:Wr,triangles:In,triangle:Dn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Bi=0,io=1,co=4,Sa=5120,Ko=5121,Co=5122,Oo=5123,Ho=5124,Io=5125,Js=34963,Il=35040,Ao=35044;function Va(Ht,Zr,On,wi){var ia={},Ai=0,ji={uint8:Ko,uint16:Oo};Zr.oes_element_index_uint&&(ji.uint32=Io);function Ea(Ua){this.id=Ai++,ia[this.id]=this,this.buffer=Ua,this.primType=co,this.vertCount=0,this.type=0}Ea.prototype.bind=function(){this.buffer.bind()};var Ma=[];function Ia(Ua){var si=Ma.pop();return si||(si=new Ea(On.create(null,Js,!0,!1)._buffer)),Ha(si,Ua,Il,-1,-1,0,0),si}function Za(Ua){Ma.push(Ua)}function Ha(Ua,si,Ni,Ra,Ya,_a,Ga){Ua.buffer.bind();var xo;if(si){var xs=Ga;!Ga&&(!M(si)||Rs(si)&&!M(si.data))&&(xs=Zr.oes_element_index_uint?Io:Oo),On._initBuffer(Ua.buffer,si,Ni,xs,3)}else Ht.bufferData(Js,_a,Ni),Ua.buffer.dtype=xo||Ko,Ua.buffer.usage=Ni,Ua.buffer.dimension=3,Ua.buffer.byteLength=_a;if(xo=Ga,!Ga){switch(Ua.buffer.dtype){case Ko:case Sa:xo=Ko;break;case Oo:case Co:xo=Oo;break;case Io:case Ho:xo=Io;break;default:W.raise("unsupported type for element array")}Ua.buffer.dtype=xo}Ua.type=xo,W(xo!==Io||!!Zr.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qi=Ya;Qi<0&&(Qi=Ua.buffer.byteLength,xo===Oo?Qi>>=1:xo===Io&&(Qi>>=2)),Ua.vertCount=Qi;var oa=Ra;if(Ra<0){oa=co;var Zo=Ua.buffer.dimension;Zo===1&&(oa=Bi),Zo===2&&(oa=io),Zo===3&&(oa=co)}Ua.primType=oa}function $a(Ua){wi.elementsCount--,W(Ua.buffer!==null,"must not double destroy elements"),delete ia[Ua.id],Ua.buffer.destroy(),Ua.buffer=null}function ya(Ua,si){var Ni=On.create(null,Js,!0),Ra=new Ea(Ni._buffer);wi.elementsCount++;function Ya(_a){if(!_a)Ni(),Ra.primType=co,Ra.vertCount=0,Ra.type=Ko;else if(typeof _a=="number")Ni(_a),Ra.primType=co,Ra.vertCount=_a|0,Ra.type=Ko;else{var Ga=null,xo=Ao,xs=-1,Qi=-1,oa=0,Zo=0;Array.isArray(_a)||M(_a)||Rs(_a)?Ga=_a:(W.type(_a,"object","invalid arguments for elements"),"data"in _a&&(Ga=_a.data,W(Array.isArray(Ga)||M(Ga)||Rs(Ga),"invalid data for element buffer")),"usage"in _a&&(W.parameter(_a.usage,Cn,"invalid element buffer usage"),xo=Cn[_a.usage]),"primitive"in _a&&(W.parameter(_a.primitive,Mi,"invalid element buffer primitive"),xs=Mi[_a.primitive]),"count"in _a&&(W(typeof _a.count=="number"&&_a.count>=0,"invalid vertex count for elements"),Qi=_a.count|0),"type"in _a&&(W.parameter(_a.type,ji,"invalid buffer type"),Zo=ji[_a.type]),"length"in _a?oa=_a.length|0:(oa=Qi,Zo===Oo||Zo===Co?oa*=2:(Zo===Io||Zo===Ho)&&(oa*=4))),Ha(Ra,Ga,xo,xs,Qi,oa,Zo)}return Ya}return Ya(Ua),Ya._reglType="elements",Ya._elements=Ra,Ya.subdata=function(_a,Ga){return Ni.subdata(_a,Ga),Ya},Ya.destroy=function(){$a(Ra)},Ya}return{create:ya,createStream:Ia,destroyStream:Za,getElements:function(Ua){return typeof Ua=="function"&&Ua._elements instanceof Ea?Ua._elements:null},clear:function(){hr(ia).forEach($a)}}}var gs=new Float32Array(1),Ws=new Uint32Array(gs.buffer),bs=5123;function Ps(Ht){for(var Zr=Ln.allocType(bs,Ht.length),On=0;On<Ht.length;++On)if(isNaN(Ht[On]))Zr[On]=65535;else if(Ht[On]===1/0)Zr[On]=31744;else if(Ht[On]===-1/0)Zr[On]=64512;else{gs[0]=Ht[On];var wi=Ws[0],ia=wi>>>31<<15,Ai=(wi<<1>>>24)-127,ji=wi>>13&(1<<10)-1;if(Ai<-24)Zr[On]=ia;else if(Ai<-14){var Ea=-14-Ai;Zr[On]=ia+(ji+(1<<10)>>Ea)}else Ai>15?Zr[On]=ia+31744:Zr[On]=ia+(Ai+15<<10)+ji}return Zr}function Xs(Ht){return Array.isArray(Ht)||M(Ht)}var gl=function(Ht){return!(Ht&Ht-1)&&!!Ht},jf=34467,Mu=3553,yl=34067,lc=34069,Lc=6408,dh=6406,_l=6407,Us=6409,th=6410,Df=32854,Cf=32855,lf=36194,gd=32819,Kh=32820,yc=33635,Eh=34042,cf=6402,Af=34041,_f=35904,kc=35906,Ff=36193,Zl=33776,Dc=33777,ad=33778,rh=33779,od=35986,Yo=35987,Gs=34798,Kl=35840,dl=35841,su=35842,Fc=35843,tc=36196,Tf=5121,_c=5123,Hl=5125,ff=5126,xc=10242,Yh=10243,Uh=10497,Gc=33071,Mf=33648,nh=10240,qn=10241,ca=9728,$i=9729,$o=9984,lo=9985,Es=9986,tl=9987,al=33170,Tl=4352,Lh=4353,xf=4354,qh=34046,$h=3317,Ul=37440,Rl=37441,ol=37443,uu=37444,Bc=33984,cc=[$o,Es,lo,tl],ao=[0,Us,th,_l,Lc],Ml={};Ml[Us]=Ml[dh]=Ml[cf]=1,Ml[Af]=Ml[th]=2,Ml[_l]=Ml[_f]=3,Ml[Lc]=Ml[kc]=4;function Hf(Ht){return"[object "+Ht+"]"}var fl=Hf("HTMLCanvasElement"),Vl=Hf("OffscreenCanvas"),Ll=Hf("CanvasRenderingContext2D"),jh=Hf("ImageBitmap"),qa=Hf("HTMLImageElement"),Yl=Hf("HTMLVideoElement"),Vf=Object.keys(cr).concat([fl,Vl,Ll,jh,qa,Yl]),ih=[];ih[Tf]=1,ih[ff]=4,ih[Ff]=2,ih[_c]=2,ih[Hl]=4;var Vu=[];Vu[Df]=2,Vu[Cf]=2,Vu[lf]=2,Vu[Af]=4,Vu[Zl]=.5,Vu[Dc]=.5,Vu[ad]=1,Vu[rh]=1,Vu[od]=.5,Vu[Yo]=1,Vu[Gs]=1,Vu[Kl]=.5,Vu[dl]=.25,Vu[su]=.5,Vu[Fc]=.25,Vu[tc]=.5;function hf(Ht){return Array.isArray(Ht)&&(Ht.length===0||typeof Ht[0]=="number")}function Hh(Ht){if(!Array.isArray(Ht))return!1;var Zr=Ht.length;return!(Zr===0||!Xs(Ht[0]))}function bc(Ht){return Object.prototype.toString.call(Ht)}function Ec(Ht){return bc(Ht)===fl}function ah(Ht){return bc(Ht)===Vl}function Wc(Ht){return bc(Ht)===Ll}function kh(Ht){return bc(Ht)===jh}function Sc(Ht){return bc(Ht)===qa}function Vh(Ht){return bc(Ht)===Yl}function ql(Ht){var Zr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(Zr&&Ht&&Ht.getContext)}function gu(Ht){var Zr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(Zr&&Ht&&"src"in Ht&&"crossOrigin"in Ht)}function Ks(Ht){if(!Ht)return!1;if(ql(Ht)||gu(Ht))return!0;var Zr=bc(Ht);return Vf.indexOf(Zr)>=0?!0:hf(Ht)||Hh(Ht)||Rs(Ht)}function Gf(Ht){return cr[Object.prototype.toString.call(Ht)]|0}function Bf(Ht,Zr){var On=Zr.length;switch(Ht.type){case Tf:case _c:case Hl:case ff:var wi=Ln.allocType(Ht.type,On);wi.set(Zr),Ht.data=wi;break;case Ff:Ht.data=Ps(Zr);break;default:W.raise("unsupported texture type, must specify a typed array")}}function eu(Ht,Zr){return Ln.allocType(Ht.type===Ff?ff:Ht.type,Zr)}function Pl(Ht,Zr){Ht.type===Ff?(Ht.data=Ps(Zr),Ln.freeType(Zr)):Ht.data=Zr}function Xc(Ht,Zr,On,wi,ia,Ai){for(var ji=Ht.width,Ea=Ht.height,Ma=Ht.channels,Ia=ji*Ea*Ma,Za=eu(Ht,Ia),Ha=0,$a=0;$a<Ea;++$a)for(var ya=0;ya<ji;++ya)for(var Ua=0;Ua<Ma;++Ua)Za[Ha++]=Zr[On*ya+wi*$a+ia*Ua+Ai];Pl(Ht,Za)}function Nc(Ht,Zr,On,wi,ia,Ai){var ji;if(typeof Vu[Ht]!="undefined"?ji=Vu[Ht]:ji=Ml[Ht]*ih[Zr],Ai&&(ji*=6),ia){for(var Ea=0,Ma=On;Ma>=1;)Ea+=ji*Ma*Ma,Ma/=2;return Ea}else return ji*On*wi}function Ql(Ht,Zr,On,wi,ia,Ai,ji){var Ea={"don't care":Tl,"dont care":Tl,nice:xf,fast:Lh},Ma={repeat:Uh,clamp:Gc,mirror:Mf},Ia={nearest:ca,linear:$i},Za=c({mipmap:tl,"nearest mipmap nearest":$o,"linear mipmap nearest":lo,"nearest mipmap linear":Es,"linear mipmap linear":tl},Ia),Ha={none:0,browser:uu},$a={uint8:Tf,rgba4:gd,rgb565:yc,"rgb5 a1":Kh},ya={alpha:dh,luminance:Us,"luminance alpha":th,rgb:_l,rgba:Lc,rgba4:Df,"rgb5 a1":Cf,rgb565:lf},Ua={};Zr.ext_srgb&&(ya.srgb=_f,ya.srgba=kc),Zr.oes_texture_float&&($a.float32=$a.float=ff),Zr.oes_texture_half_float&&($a.float16=$a["half float"]=Ff),Zr.webgl_depth_texture&&(c(ya,{depth:cf,"depth stencil":Af}),c($a,{uint16:_c,uint32:Hl,"depth stencil":Eh})),Zr.webgl_compressed_texture_s3tc&&c(Ua,{"rgb s3tc dxt1":Zl,"rgba s3tc dxt1":Dc,"rgba s3tc dxt3":ad,"rgba s3tc dxt5":rh}),Zr.webgl_compressed_texture_atc&&c(Ua,{"rgb atc":od,"rgba atc explicit alpha":Yo,"rgba atc interpolated alpha":Gs}),Zr.webgl_compressed_texture_pvrtc&&c(Ua,{"rgb pvrtc 4bppv1":Kl,"rgb pvrtc 2bppv1":dl,"rgba pvrtc 4bppv1":su,"rgba pvrtc 2bppv1":Fc}),Zr.webgl_compressed_texture_etc1&&(Ua["rgb etc1"]=tc);var si=Array.prototype.slice.call(Ht.getParameter(jf)||new Uint32Array(0));Object.keys(Ua).forEach(function(w){var V=Ua[w];si.indexOf(V)>=0&&(ya[w]=V)});var Ni=Object.keys(ya);On.textureFormats=Ni;var Ra=[];Object.keys(ya).forEach(function(w){var V=ya[w];Ra[V]=w});var Ya=[];Object.keys($a).forEach(function(w){var V=$a[w];Ya[V]=w});var _a=[];Object.keys(Ia).forEach(function(w){var V=Ia[w];_a[V]=w});var Ga=[];Object.keys(Za).forEach(function(w){var V=Za[w];Ga[V]=w});var xo=[];Object.keys(Ma).forEach(function(w){var V=Ma[w];xo[V]=w});var xs=Ni.reduce(function(w,V){var Ie=ya[V];return Ie===Us||Ie===dh||Ie===Us||Ie===th||Ie===cf||Ie===Af||Zr.ext_srgb&&(Ie===_f||Ie===kc)?w[Ie]=Ie:Ie===Cf||V.indexOf("rgba")>=0?w[Ie]=Lc:w[Ie]=_l,w},{});function Qi(){this.internalformat=Lc,this.format=Lc,this.type=Tf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=uu,this.width=0,this.height=0,this.channels=0}function oa(w,V){w.internalformat=V.internalformat,w.format=V.format,w.type=V.type,w.compressed=V.compressed,w.premultiplyAlpha=V.premultiplyAlpha,w.flipY=V.flipY,w.unpackAlignment=V.unpackAlignment,w.colorSpace=V.colorSpace,w.width=V.width,w.height=V.height,w.channels=V.channels}function Zo(w,V){if(!(typeof V!="object"||!V)){if("premultiplyAlpha"in V&&(W.type(V.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),w.premultiplyAlpha=V.premultiplyAlpha),"flipY"in V&&(W.type(V.flipY,"boolean","invalid texture flip"),w.flipY=V.flipY),"alignment"in V&&(W.oneOf(V.alignment,[1,2,4,8],"invalid texture unpack alignment"),w.unpackAlignment=V.alignment),"colorSpace"in V&&(W.parameter(V.colorSpace,Ha,"invalid colorSpace"),w.colorSpace=Ha[V.colorSpace]),"type"in V){var Ie=V.type;W(Zr.oes_texture_float||!(Ie==="float"||Ie==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),W(Zr.oes_texture_half_float||!(Ie==="half float"||Ie==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),W(Zr.webgl_depth_texture||!(Ie==="uint16"||Ie==="uint32"||Ie==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),W.parameter(Ie,$a,"invalid texture type"),w.type=$a[Ie]}var se=w.width,st=w.height,Ue=w.channels,Xe=!1;"shape"in V?(W(Array.isArray(V.shape)&&V.shape.length>=2,"shape must be an array"),se=V.shape[0],st=V.shape[1],V.shape.length===3&&(Ue=V.shape[2],W(Ue>0&&Ue<=4,"invalid number of channels"),Xe=!0),W(se>=0&&se<=On.maxTextureSize,"invalid width"),W(st>=0&&st<=On.maxTextureSize,"invalid height")):("radius"in V&&(se=st=V.radius,W(se>=0&&se<=On.maxTextureSize,"invalid radius")),"width"in V&&(se=V.width,W(se>=0&&se<=On.maxTextureSize,"invalid width")),"height"in V&&(st=V.height,W(st>=0&&st<=On.maxTextureSize,"invalid height")),"channels"in V&&(Ue=V.channels,W(Ue>0&&Ue<=4,"invalid number of channels"),Xe=!0)),w.width=se|0,w.height=st|0,w.channels=Ue|0;var Ve=!1;if("format"in V){var ct=V.format;W(Zr.webgl_depth_texture||!(ct==="depth"||ct==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),W.parameter(ct,ya,"invalid texture format");var Ct=w.internalformat=ya[ct];w.format=xs[Ct],ct in $a&&("type"in V||(w.type=$a[ct])),ct in Ua&&(w.compressed=!0),Ve=!0}!Xe&&Ve?w.channels=Ml[w.format]:Xe&&!Ve?w.channels!==ao[w.format]&&(w.format=w.internalformat=ao[w.channels]):Ve&&Xe&&W(w.channels===Ml[w.format],"number of channels inconsistent with specified format")}}function fo(w){Ht.pixelStorei(Ul,w.flipY),Ht.pixelStorei(Rl,w.premultiplyAlpha),Ht.pixelStorei(ol,w.colorSpace),Ht.pixelStorei($h,w.unpackAlignment)}function Pa(){Qi.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function to(w,V){var Ie=null;if(Ks(V)?Ie=V:V&&(W.type(V,"object","invalid pixel data type"),Zo(w,V),"x"in V&&(w.xOffset=V.x|0),"y"in V&&(w.yOffset=V.y|0),Ks(V.data)&&(Ie=V.data)),W(!w.compressed||Ie instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),V.copy){W(!Ie,"can not specify copy and data field for the same texture");var se=ia.viewportWidth,st=ia.viewportHeight;w.width=w.width||se-w.xOffset,w.height=w.height||st-w.yOffset,w.needsCopy=!0,W(w.xOffset>=0&&w.xOffset<se&&w.yOffset>=0&&w.yOffset<st&&w.width>0&&w.width<=se&&w.height>0&&w.height<=st,"copy texture read out of bounds")}else if(!Ie)w.width=w.width||1,w.height=w.height||1,w.channels=w.channels||4;else if(M(Ie))w.channels=w.channels||4,w.data=Ie,!("type"in V)&&w.type===Tf&&(w.type=Gf(Ie));else if(hf(Ie))w.channels=w.channels||4,Bf(w,Ie),w.alignment=1,w.needsFree=!0;else if(Rs(Ie)){var Ue=Ie.data;!Array.isArray(Ue)&&w.type===Tf&&(w.type=Gf(Ue));var Xe=Ie.shape,Ve=Ie.stride,ct,Ct,Bt,kt,Jt,Ft;Xe.length===3?(Bt=Xe[2],Ft=Ve[2]):(W(Xe.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Bt=1,Ft=1),ct=Xe[0],Ct=Xe[1],kt=Ve[0],Jt=Ve[1],w.alignment=1,w.width=ct,w.height=Ct,w.channels=Bt,w.format=w.internalformat=ao[Bt],w.needsFree=!0,Xc(w,Ue,kt,Jt,Ft,Ie.offset)}else if(ql(Ie)||Ec(Ie)||ah(Ie)||Wc(Ie))ql(Ie)||Ec(Ie)||ah(Ie)?w.element=Ie:w.element=Ie.canvas,w.width=w.element.width,w.height=w.element.height,w.channels=4;else if(kh(Ie))w.element=Ie,w.width=Ie.width,w.height=Ie.height,w.channels=4;else if(Sc(Ie))w.element=Ie,w.width=Ie.naturalWidth,w.height=Ie.naturalHeight,w.channels=4;else if(gu(Ie))w.element=Ie,w.width=Ie.width,w.height=Ie.height,w.channels=4;else if(Vh(Ie))w.element=Ie,w.width=Ie.videoWidth,w.height=Ie.videoHeight,w.channels=4;else if(Hh(Ie)){var rr=w.width||Ie[0].length,Xt=w.height||Ie.length,pr=w.channels;Xs(Ie[0][0])?pr=pr||Ie[0][0].length:pr=pr||1;for(var yr=Lr.shape(Ie),Ur=1,xn=0;xn<yr.length;++xn)Ur*=yr[xn];var mn=eu(w,Ur);Lr.flatten(Ie,yr,"",mn),Pl(w,mn),w.alignment=1,w.width=rr,w.height=Xt,w.channels=pr,w.format=w.internalformat=ao[pr],w.needsFree=!0}w.type===ff?W(On.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):w.type===Ff&&W(On.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Oa(w,V,Ie){var se=w.element,st=w.data,Ue=w.internalformat,Xe=w.format,Ve=w.type,ct=w.width,Ct=w.height;fo(w),se?Ht.texImage2D(V,Ie,Xe,Xe,Ve,se):w.compressed?Ht.compressedTexImage2D(V,Ie,Ue,ct,Ct,0,st):w.needsCopy?(wi(),Ht.copyTexImage2D(V,Ie,Xe,w.xOffset,w.yOffset,ct,Ct,0)):Ht.texImage2D(V,Ie,Xe,ct,Ct,0,Xe,Ve,st||null)}function Os(w,V,Ie,se,st){var Ue=w.element,Xe=w.data,Ve=w.internalformat,ct=w.format,Ct=w.type,Bt=w.width,kt=w.height;fo(w),Ue?Ht.texSubImage2D(V,st,Ie,se,ct,Ct,Ue):w.compressed?Ht.compressedTexSubImage2D(V,st,Ie,se,Ve,Bt,kt,Xe):w.needsCopy?(wi(),Ht.copyTexSubImage2D(V,st,Ie,se,w.xOffset,w.yOffset,Bt,kt)):Ht.texSubImage2D(V,st,Ie,se,Bt,kt,ct,Ct,Xe)}var Bs=[];function so(){return Bs.pop()||new Pa}function yo(w){w.needsFree&&Ln.freeType(w.data),Pa.call(w),Bs.push(w)}function hs(){Qi.call(this),this.genMipmaps=!1,this.mipmapHint=Tl,this.mipmask=0,this.images=Array(16)}function zs(w,V,Ie){var se=w.images[0]=so();w.mipmask=1,se.width=w.width=V,se.height=w.height=Ie,se.channels=w.channels=4}function Cu(w,V){var Ie=null;if(Ks(V))Ie=w.images[0]=so(),oa(Ie,w),to(Ie,V),w.mipmask=1;else if(Zo(w,V),Array.isArray(V.mipmap))for(var se=V.mipmap,st=0;st<se.length;++st)Ie=w.images[st]=so(),oa(Ie,w),Ie.width>>=st,Ie.height>>=st,to(Ie,se[st]),w.mipmask|=1<<st;else Ie=w.images[0]=so(),oa(Ie,w),to(Ie,V),w.mipmask=1;oa(w,w.images[0]),w.compressed&&(w.internalformat===Zl||w.internalformat===Dc||w.internalformat===ad||w.internalformat===rh)&&W(w.width%4===0&&w.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Gu(w,V){for(var Ie=w.images,se=0;se<Ie.length;++se){if(!Ie[se])return;Oa(Ie[se],V,se)}}var Bl=[];function Au(){var w=Bl.pop()||new hs;Qi.call(w),w.mipmask=0;for(var V=0;V<16;++V)w.images[V]=null;return w}function Sf(w){for(var V=w.images,Ie=0;Ie<V.length;++Ie)V[Ie]&&yo(V[Ie]),V[Ie]=null;Bl.push(w)}function Xl(){this.minFilter=ca,this.magFilter=ca,this.wrapS=Gc,this.wrapT=Gc,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Tl}function Ic(w,V){if("min"in V){var Ie=V.min;W.parameter(Ie,Za),w.minFilter=Za[Ie],cc.indexOf(w.minFilter)>=0&&!("faces"in V)&&(w.genMipmaps=!0)}if("mag"in V){var se=V.mag;W.parameter(se,Ia),w.magFilter=Ia[se]}var st=w.wrapS,Ue=w.wrapT;if("wrap"in V){var Xe=V.wrap;typeof Xe=="string"?(W.parameter(Xe,Ma),st=Ue=Ma[Xe]):Array.isArray(Xe)&&(W.parameter(Xe[0],Ma),W.parameter(Xe[1],Ma),st=Ma[Xe[0]],Ue=Ma[Xe[1]])}else{if("wrapS"in V){var Ve=V.wrapS;W.parameter(Ve,Ma),st=Ma[Ve]}if("wrapT"in V){var ct=V.wrapT;W.parameter(ct,Ma),Ue=Ma[ct]}}if(w.wrapS=st,w.wrapT=Ue,"anisotropic"in V){var Ct=V.anisotropic;W(typeof Ct=="number"&&Ct>=1&&Ct<=On.maxAnisotropic,"aniso samples must be between 1 and "),w.anisotropic=V.anisotropic}if("mipmap"in V){var Bt=!1;switch(typeof V.mipmap){case"string":W.parameter(V.mipmap,Ea,"invalid mipmap hint"),w.mipmapHint=Ea[V.mipmap],w.genMipmaps=!0,Bt=!0;break;case"boolean":Bt=w.genMipmaps=V.mipmap;break;case"object":W(Array.isArray(V.mipmap),"invalid mipmap type"),w.genMipmaps=!1,Bt=!0;break;default:W.raise("invalid mipmap type")}Bt&&!("min"in V)&&(w.minFilter=$o)}}function wl(w,V){Ht.texParameteri(V,qn,w.minFilter),Ht.texParameteri(V,nh,w.magFilter),Ht.texParameteri(V,xc,w.wrapS),Ht.texParameteri(V,Yh,w.wrapT),Zr.ext_texture_filter_anisotropic&&Ht.texParameteri(V,qh,w.anisotropic),w.genMipmaps&&(Ht.hint(al,w.mipmapHint),Ht.generateMipmap(V))}var rf=0,mf={},lh=On.maxTextureUnits,pc=Array(lh).map(function(){return null});function fu(w){Qi.call(this),this.mipmask=0,this.internalformat=Lc,this.id=rf++,this.refCount=1,this.target=w,this.texture=Ht.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Xl,ji.profile&&(this.stats={size:0})}function wf(w){Ht.activeTexture(Bc),Ht.bindTexture(w.target,w.texture)}function Uu(){var w=pc[0];w?Ht.bindTexture(w.target,w.texture):Ht.bindTexture(Mu,null)}function qf(w){var V=w.texture;W(V,"must not double destroy texture");var Ie=w.unit,se=w.target;Ie>=0&&(Ht.activeTexture(Bc+Ie),Ht.bindTexture(se,null),pc[Ie]=null),Ht.deleteTexture(V),w.texture=null,w.params=null,w.pixels=null,w.refCount=0,delete mf[w.id],Ai.textureCount--}c(fu.prototype,{bind:function(){var w=this;w.bindCount+=1;var V=w.unit;if(V<0){for(var Ie=0;Ie<lh;++Ie){var se=pc[Ie];if(se){if(se.bindCount>0)continue;se.unit=-1}pc[Ie]=w,V=Ie;break}V>=lh&&W.raise("insufficient number of texture units"),ji.profile&&Ai.maxTextureUnits<V+1&&(Ai.maxTextureUnits=V+1),w.unit=V,Ht.activeTexture(Bc+V),Ht.bindTexture(w.target,w.texture)}return V},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&qf(this)}});function js(w,V){var Ie=new fu(Mu);mf[Ie.id]=Ie,Ai.textureCount++;function se(Xe,Ve){var ct=Ie.texInfo;Xl.call(ct);var Ct=Au();return typeof Xe=="number"?typeof Ve=="number"?zs(Ct,Xe|0,Ve|0):zs(Ct,Xe|0,Xe|0):Xe?(W.type(Xe,"object","invalid arguments to regl.texture"),Ic(ct,Xe),Cu(Ct,Xe)):zs(Ct,1,1),ct.genMipmaps&&(Ct.mipmask=(Ct.width<<1)-1),Ie.mipmask=Ct.mipmask,oa(Ie,Ct),W.texture2D(ct,Ct,On),Ie.internalformat=Ct.internalformat,se.width=Ct.width,se.height=Ct.height,wf(Ie),Gu(Ct,Mu),wl(ct,Mu),Uu(),Sf(Ct),ji.profile&&(Ie.stats.size=Nc(Ie.internalformat,Ie.type,Ct.width,Ct.height,ct.genMipmaps,!1)),se.format=Ra[Ie.internalformat],se.type=Ya[Ie.type],se.mag=_a[ct.magFilter],se.min=Ga[ct.minFilter],se.wrapS=xo[ct.wrapS],se.wrapT=xo[ct.wrapT],se}function st(Xe,Ve,ct,Ct){W(!!Xe,"must specify image data");var Bt=Ve|0,kt=ct|0,Jt=Ct|0,Ft=so();return oa(Ft,Ie),Ft.width=0,Ft.height=0,to(Ft,Xe),Ft.width=Ft.width||(Ie.width>>Jt)-Bt,Ft.height=Ft.height||(Ie.height>>Jt)-kt,W(Ie.type===Ft.type&&Ie.format===Ft.format&&Ie.internalformat===Ft.internalformat,"incompatible format for texture.subimage"),W(Bt>=0&&kt>=0&&Bt+Ft.width<=Ie.width&&kt+Ft.height<=Ie.height,"texture.subimage write out of bounds"),W(Ie.mipmask&1<<Jt,"missing mipmap data"),W(Ft.data||Ft.element||Ft.needsCopy,"missing image data"),wf(Ie),Os(Ft,Mu,Bt,kt,Jt),Uu(),yo(Ft),se}function Ue(Xe,Ve){var ct=Xe|0,Ct=Ve|0||ct;if(ct===Ie.width&&Ct===Ie.height)return se;se.width=Ie.width=ct,se.height=Ie.height=Ct,wf(Ie);for(var Bt=0;Ie.mipmask>>Bt;++Bt){var kt=ct>>Bt,Jt=Ct>>Bt;if(!kt||!Jt)break;Ht.texImage2D(Mu,Bt,Ie.format,kt,Jt,0,Ie.format,Ie.type,null)}return Uu(),ji.profile&&(Ie.stats.size=Nc(Ie.internalformat,Ie.type,ct,Ct,!1,!1)),se}return se(w,V),se.subimage=st,se.resize=Ue,se._reglType="texture2d",se._texture=Ie,ji.profile&&(se.stats=Ie.stats),se.destroy=function(){Ie.decRef()},se}function Pu(w,V,Ie,se,st,Ue){var Xe=new fu(yl);mf[Xe.id]=Xe,Ai.cubeCount++;var Ve=new Array(6);function ct(kt,Jt,Ft,rr,Xt,pr){var yr,Ur=Xe.texInfo;for(Xl.call(Ur),yr=0;yr<6;++yr)Ve[yr]=Au();if(typeof kt=="number"||!kt){var xn=kt|0||1;for(yr=0;yr<6;++yr)zs(Ve[yr],xn,xn)}else if(typeof kt=="object")if(Jt)Cu(Ve[0],kt),Cu(Ve[1],Jt),Cu(Ve[2],Ft),Cu(Ve[3],rr),Cu(Ve[4],Xt),Cu(Ve[5],pr);else if(Ic(Ur,kt),Zo(Xe,kt),"faces"in kt){var mn=kt.faces;for(W(Array.isArray(mn)&&mn.length===6,"cube faces must be a length 6 array"),yr=0;yr<6;++yr)W(typeof mn[yr]=="object"&&!!mn[yr],"invalid input for cube map face"),oa(Ve[yr],Xe),Cu(Ve[yr],mn[yr])}else for(yr=0;yr<6;++yr)Cu(Ve[yr],kt);else W.raise("invalid arguments to cube map");for(oa(Xe,Ve[0]),W.optional(function(){On.npotTextureCube||W(gl(Xe.width)&&gl(Xe.height),"your browser does not support non power or two texture dimensions")}),Ur.genMipmaps?Xe.mipmask=(Ve[0].width<<1)-1:Xe.mipmask=Ve[0].mipmask,W.textureCube(Xe,Ur,Ve,On),Xe.internalformat=Ve[0].internalformat,ct.width=Ve[0].width,ct.height=Ve[0].height,wf(Xe),yr=0;yr<6;++yr)Gu(Ve[yr],lc+yr);for(wl(Ur,yl),Uu(),ji.profile&&(Xe.stats.size=Nc(Xe.internalformat,Xe.type,ct.width,ct.height,Ur.genMipmaps,!0)),ct.format=Ra[Xe.internalformat],ct.type=Ya[Xe.type],ct.mag=_a[Ur.magFilter],ct.min=Ga[Ur.minFilter],ct.wrapS=xo[Ur.wrapS],ct.wrapT=xo[Ur.wrapT],yr=0;yr<6;++yr)Sf(Ve[yr]);return ct}function Ct(kt,Jt,Ft,rr,Xt){W(!!Jt,"must specify image data"),W(typeof kt=="number"&&kt===(kt|0)&&kt>=0&&kt<6,"invalid face");var pr=Ft|0,yr=rr|0,Ur=Xt|0,xn=so();return oa(xn,Xe),xn.width=0,xn.height=0,to(xn,Jt),xn.width=xn.width||(Xe.width>>Ur)-pr,xn.height=xn.height||(Xe.height>>Ur)-yr,W(Xe.type===xn.type&&Xe.format===xn.format&&Xe.internalformat===xn.internalformat,"incompatible format for texture.subimage"),W(pr>=0&&yr>=0&&pr+xn.width<=Xe.width&&yr+xn.height<=Xe.height,"texture.subimage write out of bounds"),W(Xe.mipmask&1<<Ur,"missing mipmap data"),W(xn.data||xn.element||xn.needsCopy,"missing image data"),wf(Xe),Os(xn,lc+kt,pr,yr,Ur),Uu(),yo(xn),ct}function Bt(kt){var Jt=kt|0;if(Jt!==Xe.width){ct.width=Xe.width=Jt,ct.height=Xe.height=Jt,wf(Xe);for(var Ft=0;Ft<6;++Ft)for(var rr=0;Xe.mipmask>>rr;++rr)Ht.texImage2D(lc+Ft,rr,Xe.format,Jt>>rr,Jt>>rr,0,Xe.format,Xe.type,null);return Uu(),ji.profile&&(Xe.stats.size=Nc(Xe.internalformat,Xe.type,ct.width,ct.height,!1,!0)),ct}}return ct(w,V,Ie,se,st,Ue),ct.subimage=Ct,ct.resize=Bt,ct._reglType="textureCube",ct._texture=Xe,ji.profile&&(ct.stats=Xe.stats),ct.destroy=function(){Xe.decRef()},ct}function Ru(){for(var w=0;w<lh;++w)Ht.activeTexture(Bc+w),Ht.bindTexture(Mu,null),pc[w]=null;hr(mf).forEach(qf),Ai.cubeCount=0,Ai.textureCount=0}ji.profile&&(Ai.getTotalTextureSize=function(){var w=0;return Object.keys(mf).forEach(function(V){w+=mf[V].stats.size}),w});function nf(){for(var w=0;w<lh;++w){var V=pc[w];V&&(V.bindCount=0,V.unit=-1,pc[w]=null)}hr(mf).forEach(function(Ie){Ie.texture=Ht.createTexture(),Ht.bindTexture(Ie.target,Ie.texture);for(var se=0;se<32;++se)if(Ie.mipmask&1<<se)if(Ie.target===Mu)Ht.texImage2D(Mu,se,Ie.internalformat,Ie.width>>se,Ie.height>>se,0,Ie.internalformat,Ie.type,null);else for(var st=0;st<6;++st)Ht.texImage2D(lc+st,se,Ie.internalformat,Ie.width>>se,Ie.height>>se,0,Ie.internalformat,Ie.type,null);wl(Ie.texInfo,Ie.target)})}function pd(){for(var w=0;w<lh;++w){var V=pc[w];V&&(V.bindCount=0,V.unit=-1,pc[w]=null),Ht.activeTexture(Bc+w),Ht.bindTexture(Mu,null),Ht.bindTexture(yl,null)}}return{create2D:js,createCube:Pu,clear:Ru,getTexture:function(w){return null},restore:nf,refresh:pd}}var fc=36161,oo=32854,Do=32855,nu=36194,Jl=33189,xl=36168,mu=34041,Ku=35907,Kc=34836,Gh=34842,Yu=34843,bl=[];bl[oo]=2,bl[Do]=2,bl[nu]=2,bl[Jl]=2,bl[xl]=1,bl[mu]=4,bl[Ku]=4,bl[Kc]=16,bl[Gh]=8,bl[Yu]=6;function yd(Ht,Zr,On){return bl[Ht]*Zr*On}var ph=function(Ht,Zr,On,wi,ia){var Ai={rgba4:oo,rgb565:nu,"rgb5 a1":Do,depth:Jl,stencil:xl,"depth stencil":mu};Zr.ext_srgb&&(Ai.srgba=Ku),Zr.ext_color_buffer_half_float&&(Ai.rgba16f=Gh,Ai.rgb16f=Yu),Zr.webgl_color_buffer_float&&(Ai.rgba32f=Kc);var ji=[];Object.keys(Ai).forEach(function(ya){var Ua=Ai[ya];ji[Ua]=ya});var Ea=0,Ma={};function Ia(ya){this.id=Ea++,this.refCount=1,this.renderbuffer=ya,this.format=oo,this.width=0,this.height=0,ia.profile&&(this.stats={size:0})}Ia.prototype.decRef=function(){--this.refCount<=0&&Za(this)};function Za(ya){var Ua=ya.renderbuffer;W(Ua,"must not double destroy renderbuffer"),Ht.bindRenderbuffer(fc,null),Ht.deleteRenderbuffer(Ua),ya.renderbuffer=null,ya.refCount=0,delete Ma[ya.id],wi.renderbufferCount--}function Ha(ya,Ua){var si=new Ia(Ht.createRenderbuffer());Ma[si.id]=si,wi.renderbufferCount++;function Ni(Ya,_a){var Ga=0,xo=0,xs=oo;if(typeof Ya=="object"&&Ya){var Qi=Ya;if("shape"in Qi){var oa=Qi.shape;W(Array.isArray(oa)&&oa.length>=2,"invalid renderbuffer shape"),Ga=oa[0]|0,xo=oa[1]|0}else"radius"in Qi&&(Ga=xo=Qi.radius|0),"width"in Qi&&(Ga=Qi.width|0),"height"in Qi&&(xo=Qi.height|0);"format"in Qi&&(W.parameter(Qi.format,Ai,"invalid renderbuffer format"),xs=Ai[Qi.format])}else typeof Ya=="number"?(Ga=Ya|0,typeof _a=="number"?xo=_a|0:xo=Ga):Ya?W.raise("invalid arguments to renderbuffer constructor"):Ga=xo=1;if(W(Ga>0&&xo>0&&Ga<=On.maxRenderbufferSize&&xo<=On.maxRenderbufferSize,"invalid renderbuffer size"),!(Ga===si.width&&xo===si.height&&xs===si.format))return Ni.width=si.width=Ga,Ni.height=si.height=xo,si.format=xs,Ht.bindRenderbuffer(fc,si.renderbuffer),Ht.renderbufferStorage(fc,xs,Ga,xo),W(Ht.getError()===0,"invalid render buffer format"),ia.profile&&(si.stats.size=yd(si.format,si.width,si.height)),Ni.format=ji[si.format],Ni}function Ra(Ya,_a){var Ga=Ya|0,xo=_a|0||Ga;return Ga===si.width&&xo===si.height||(W(Ga>0&&xo>0&&Ga<=On.maxRenderbufferSize&&xo<=On.maxRenderbufferSize,"invalid renderbuffer size"),Ni.width=si.width=Ga,Ni.height=si.height=xo,Ht.bindRenderbuffer(fc,si.renderbuffer),Ht.renderbufferStorage(fc,si.format,Ga,xo),W(Ht.getError()===0,"invalid render buffer format"),ia.profile&&(si.stats.size=yd(si.format,si.width,si.height))),Ni}return Ni(ya,Ua),Ni.resize=Ra,Ni._reglType="renderbuffer",Ni._renderbuffer=si,ia.profile&&(Ni.stats=si.stats),Ni.destroy=function(){si.decRef()},Ni}ia.profile&&(wi.getTotalRenderbufferSize=function(){var ya=0;return Object.keys(Ma).forEach(function(Ua){ya+=Ma[Ua].stats.size}),ya});function $a(){hr(Ma).forEach(function(ya){ya.renderbuffer=Ht.createRenderbuffer(),Ht.bindRenderbuffer(fc,ya.renderbuffer),Ht.renderbufferStorage(fc,ya.format,ya.width,ya.height)}),Ht.bindRenderbuffer(fc,null)}return{create:Ha,clear:function(){hr(Ma).forEach(Za)},restore:$a}},wc=36160,Yc=36161,kl=3553,Dr=34069,Dl=36064,Vo=36096,qo=36128,du=33306,Dh=36053,Wf=36054,zc=36055,df=36057,rc=36061,ys=36193,bf=5121,Xf=5126,rl=6407,Cc=6408,Zc=6402,sd=[rl,Cc],qc=[];qc[Cc]=4,qc[rl]=3;var f=[];f[bf]=1,f[Xf]=4,f[ys]=2;var m=32854,p=32855,E=36194,Y=33189,Ce=36168,ze=34041,gt=35907,Gt=34836,sr=34842,Mr=34843,Or=[m,p,E,gt,sr,Mr,Gt],Br={};Br[Dh]="complete",Br[Wf]="incomplete attachment",Br[df]="incomplete dimensions",Br[zc]="incomplete, missing attachment",Br[rc]="unsupported";function yn(Ht,Zr,On,wi,ia,Ai){var ji={cur:null,next:null,dirty:!1,setFBO:null},Ea=["rgba"],Ma=["rgba4","rgb565","rgb5 a1"];Zr.ext_srgb&&Ma.push("srgba"),Zr.ext_color_buffer_half_float&&Ma.push("rgba16f","rgb16f"),Zr.webgl_color_buffer_float&&Ma.push("rgba32f");var Ia=["uint8"];Zr.oes_texture_half_float&&Ia.push("half float","float16"),Zr.oes_texture_float&&Ia.push("float","float32");function Za(Pa,to,Oa){this.target=Pa,this.texture=to,this.renderbuffer=Oa;var Os=0,Bs=0;to?(Os=to.width,Bs=to.height):Oa&&(Os=Oa.width,Bs=Oa.height),this.width=Os,this.height=Bs}function Ha(Pa){Pa&&(Pa.texture&&Pa.texture._texture.decRef(),Pa.renderbuffer&&Pa.renderbuffer._renderbuffer.decRef())}function $a(Pa,to,Oa){if(Pa)if(Pa.texture){var Os=Pa.texture._texture,Bs=Math.max(1,Os.width),so=Math.max(1,Os.height);W(Bs===to&&so===Oa,"inconsistent width/height for supplied texture"),Os.refCount+=1}else{var yo=Pa.renderbuffer._renderbuffer;W(yo.width===to&&yo.height===Oa,"inconsistent width/height for renderbuffer"),yo.refCount+=1}}function ya(Pa,to){to&&(to.texture?Ht.framebufferTexture2D(wc,Pa,to.target,to.texture._texture.texture,0):Ht.framebufferRenderbuffer(wc,Pa,Yc,to.renderbuffer._renderbuffer.renderbuffer))}function Ua(Pa){var to=kl,Oa=null,Os=null,Bs=Pa;typeof Pa=="object"&&(Bs=Pa.data,"target"in Pa&&(to=Pa.target|0)),W.type(Bs,"function","invalid attachment data");var so=Bs._reglType;return so==="texture2d"?(Oa=Bs,W(to===kl)):so==="textureCube"?(Oa=Bs,W(to>=Dr&&to<Dr+6,"invalid cube map target")):so==="renderbuffer"?(Os=Bs,to=Yc):W.raise("invalid regl object for attachment"),new Za(to,Oa,Os)}function si(Pa,to,Oa,Os,Bs){if(Oa){var so=wi.create2D({width:Pa,height:to,format:Os,type:Bs});return so._texture.refCount=0,new Za(kl,so,null)}else{var yo=ia.create({width:Pa,height:to,format:Os});return yo._renderbuffer.refCount=0,new Za(Yc,null,yo)}}function Ni(Pa){return Pa&&(Pa.texture||Pa.renderbuffer)}function Ra(Pa,to,Oa){Pa&&(Pa.texture?Pa.texture.resize(to,Oa):Pa.renderbuffer&&Pa.renderbuffer.resize(to,Oa),Pa.width=to,Pa.height=Oa)}var Ya=0,_a={};function Ga(){this.id=Ya++,_a[this.id]=this,this.framebuffer=Ht.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function xo(Pa){Pa.colorAttachments.forEach(Ha),Ha(Pa.depthAttachment),Ha(Pa.stencilAttachment),Ha(Pa.depthStencilAttachment)}function xs(Pa){var to=Pa.framebuffer;W(to,"must not double destroy framebuffer"),Ht.deleteFramebuffer(to),Pa.framebuffer=null,Ai.framebufferCount--,delete _a[Pa.id]}function Qi(Pa){var to;Ht.bindFramebuffer(wc,Pa.framebuffer);var Oa=Pa.colorAttachments;for(to=0;to<Oa.length;++to)ya(Dl+to,Oa[to]);for(to=Oa.length;to<On.maxColorAttachments;++to)Ht.framebufferTexture2D(wc,Dl+to,kl,null,0);Ht.framebufferTexture2D(wc,du,kl,null,0),Ht.framebufferTexture2D(wc,Vo,kl,null,0),Ht.framebufferTexture2D(wc,qo,kl,null,0),ya(Vo,Pa.depthAttachment),ya(qo,Pa.stencilAttachment),ya(du,Pa.depthStencilAttachment);var Os=Ht.checkFramebufferStatus(wc);!Ht.isContextLost()&&Os!==Dh&&W.raise("framebuffer configuration not supported, status = "+Br[Os]),Ht.bindFramebuffer(wc,ji.next?ji.next.framebuffer:null),ji.cur=ji.next,Ht.getError()}function oa(Pa,to){var Oa=new Ga;Ai.framebufferCount++;function Os(so,yo){var hs;W(ji.next!==Oa,"can not update framebuffer which is currently in use");var zs=0,Cu=0,Gu=!0,Bl=!0,Au=null,Sf=!0,Xl="rgba",Ic="uint8",wl=1,rf=null,mf=null,lh=null,pc=!1;if(typeof so=="number")zs=so|0,Cu=yo|0||zs;else if(!so)zs=Cu=1;else{W.type(so,"object","invalid arguments for framebuffer");var fu=so;if("shape"in fu){var wf=fu.shape;W(Array.isArray(wf)&&wf.length>=2,"invalid shape for framebuffer"),zs=wf[0],Cu=wf[1]}else"radius"in fu&&(zs=Cu=fu.radius),"width"in fu&&(zs=fu.width),"height"in fu&&(Cu=fu.height);("color"in fu||"colors"in fu)&&(Au=fu.color||fu.colors,Array.isArray(Au)&&W(Au.length===1||Zr.webgl_draw_buffers,"multiple render targets not supported")),Au||("colorCount"in fu&&(wl=fu.colorCount|0,W(wl>0,"invalid color buffer count")),"colorTexture"in fu&&(Sf=!!fu.colorTexture,Xl="rgba4"),"colorType"in fu&&(Ic=fu.colorType,Sf?(W(Zr.oes_texture_float||!(Ic==="float"||Ic==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),W(Zr.oes_texture_half_float||!(Ic==="half float"||Ic==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ic==="half float"||Ic==="float16"?(W(Zr.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Xl="rgba16f"):(Ic==="float"||Ic==="float32")&&(W(Zr.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Xl="rgba32f"),W.oneOf(Ic,Ia,"invalid color type")),"colorFormat"in fu&&(Xl=fu.colorFormat,Ea.indexOf(Xl)>=0?Sf=!0:Ma.indexOf(Xl)>=0?Sf=!1:W.optional(function(){Sf?W.oneOf(fu.colorFormat,Ea,"invalid color format for texture"):W.oneOf(fu.colorFormat,Ma,"invalid color format for renderbuffer")}))),("depthTexture"in fu||"depthStencilTexture"in fu)&&(pc=!!(fu.depthTexture||fu.depthStencilTexture),W(!pc||Zr.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in fu&&(typeof fu.depth=="boolean"?Gu=fu.depth:(rf=fu.depth,Bl=!1)),"stencil"in fu&&(typeof fu.stencil=="boolean"?Bl=fu.stencil:(mf=fu.stencil,Gu=!1)),"depthStencil"in fu&&(typeof fu.depthStencil=="boolean"?Gu=Bl=fu.depthStencil:(lh=fu.depthStencil,Gu=!1,Bl=!1))}var Uu=null,qf=null,js=null,Pu=null;if(Array.isArray(Au))Uu=Au.map(Ua);else if(Au)Uu=[Ua(Au)];else for(Uu=new Array(wl),hs=0;hs<wl;++hs)Uu[hs]=si(zs,Cu,Sf,Xl,Ic);W(Zr.webgl_draw_buffers||Uu.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),W(Uu.length<=On.maxColorAttachments,"too many color attachments, not supported"),zs=zs||Uu[0].width,Cu=Cu||Uu[0].height,rf?qf=Ua(rf):Gu&&!Bl&&(qf=si(zs,Cu,pc,"depth","uint32")),mf?js=Ua(mf):Bl&&!Gu&&(js=si(zs,Cu,!1,"stencil","uint8")),lh?Pu=Ua(lh):!rf&&!mf&&Bl&&Gu&&(Pu=si(zs,Cu,pc,"depth stencil","depth stencil")),W(!!rf+!!mf+!!lh<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Ru=null;for(hs=0;hs<Uu.length;++hs)if($a(Uu[hs],zs,Cu),W(!Uu[hs]||Uu[hs].texture&&sd.indexOf(Uu[hs].texture._texture.format)>=0||Uu[hs].renderbuffer&&Or.indexOf(Uu[hs].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+hs+" is invalid"),Uu[hs]&&Uu[hs].texture){var nf=qc[Uu[hs].texture._texture.format]*f[Uu[hs].texture._texture.type];Ru===null?Ru=nf:W(Ru===nf,"all color attachments much have the same number of bits per pixel.")}return $a(qf,zs,Cu),W(!qf||qf.texture&&qf.texture._texture.format===Zc||qf.renderbuffer&&qf.renderbuffer._renderbuffer.format===Y,"invalid depth attachment for framebuffer object"),$a(js,zs,Cu),W(!js||js.renderbuffer&&js.renderbuffer._renderbuffer.format===Ce,"invalid stencil attachment for framebuffer object"),$a(Pu,zs,Cu),W(!Pu||Pu.texture&&Pu.texture._texture.format===ze||Pu.renderbuffer&&Pu.renderbuffer._renderbuffer.format===ze,"invalid depth-stencil attachment for framebuffer object"),xo(Oa),Oa.width=zs,Oa.height=Cu,Oa.colorAttachments=Uu,Oa.depthAttachment=qf,Oa.stencilAttachment=js,Oa.depthStencilAttachment=Pu,Os.color=Uu.map(Ni),Os.depth=Ni(qf),Os.stencil=Ni(js),Os.depthStencil=Ni(Pu),Os.width=Oa.width,Os.height=Oa.height,Qi(Oa),Os}function Bs(so,yo){W(ji.next!==Oa,"can not resize a framebuffer which is currently in use");var hs=Math.max(so|0,1),zs=Math.max(yo|0||hs,1);if(hs===Oa.width&&zs===Oa.height)return Os;for(var Cu=Oa.colorAttachments,Gu=0;Gu<Cu.length;++Gu)Ra(Cu[Gu],hs,zs);return Ra(Oa.depthAttachment,hs,zs),Ra(Oa.stencilAttachment,hs,zs),Ra(Oa.depthStencilAttachment,hs,zs),Oa.width=Os.width=hs,Oa.height=Os.height=zs,Qi(Oa),Os}return Os(Pa,to),c(Os,{resize:Bs,_reglType:"framebuffer",_framebuffer:Oa,destroy:function(){xs(Oa),xo(Oa)},use:function(so){ji.setFBO({framebuffer:Os},so)}})}function Zo(Pa){var to=Array(6);function Oa(Bs){var so;W(to.indexOf(ji.next)<0,"can not update framebuffer which is currently in use");var yo={color:null},hs=0,zs=null,Cu="rgba",Gu="uint8",Bl=1;if(typeof Bs=="number")hs=Bs|0;else if(!Bs)hs=1;else{W.type(Bs,"object","invalid arguments for framebuffer");var Au=Bs;if("shape"in Au){var Sf=Au.shape;W(Array.isArray(Sf)&&Sf.length>=2,"invalid shape for framebuffer"),W(Sf[0]===Sf[1],"cube framebuffer must be square"),hs=Sf[0]}else"radius"in Au&&(hs=Au.radius|0),"width"in Au?(hs=Au.width|0,"height"in Au&&W(Au.height===hs,"must be square")):"height"in Au&&(hs=Au.height|0);("color"in Au||"colors"in Au)&&(zs=Au.color||Au.colors,Array.isArray(zs)&&W(zs.length===1||Zr.webgl_draw_buffers,"multiple render targets not supported")),zs||("colorCount"in Au&&(Bl=Au.colorCount|0,W(Bl>0,"invalid color buffer count")),"colorType"in Au&&(W.oneOf(Au.colorType,Ia,"invalid color type"),Gu=Au.colorType),"colorFormat"in Au&&(Cu=Au.colorFormat,W.oneOf(Au.colorFormat,Ea,"invalid color format for texture"))),"depth"in Au&&(yo.depth=Au.depth),"stencil"in Au&&(yo.stencil=Au.stencil),"depthStencil"in Au&&(yo.depthStencil=Au.depthStencil)}var Xl;if(zs)if(Array.isArray(zs))for(Xl=[],so=0;so<zs.length;++so)Xl[so]=zs[so];else Xl=[zs];else{Xl=Array(Bl);var Ic={radius:hs,format:Cu,type:Gu};for(so=0;so<Bl;++so)Xl[so]=wi.createCube(Ic)}for(yo.color=Array(Xl.length),so=0;so<Xl.length;++so){var wl=Xl[so];W(typeof wl=="function"&&wl._reglType==="textureCube","invalid cube map"),hs=hs||wl.width,W(wl.width===hs&&wl.height===hs,"invalid cube map shape"),yo.color[so]={target:Dr,data:Xl[so]}}for(so=0;so<6;++so){for(var rf=0;rf<Xl.length;++rf)yo.color[rf].target=Dr+so;so>0&&(yo.depth=to[0].depth,yo.stencil=to[0].stencil,yo.depthStencil=to[0].depthStencil),to[so]?to[so](yo):to[so]=oa(yo)}return c(Oa,{width:hs,height:hs,color:Xl})}function Os(Bs){var so,yo=Bs|0;if(W(yo>0&&yo<=On.maxCubeMapSize,"invalid radius for cube fbo"),yo===Oa.width)return Oa;var hs=Oa.color;for(so=0;so<hs.length;++so)hs[so].resize(yo);for(so=0;so<6;++so)to[so].resize(yo);return Oa.width=Oa.height=yo,Oa}return Oa(Pa),c(Oa,{faces:to,resize:Os,_reglType:"framebufferCube",destroy:function(){to.forEach(function(Bs){Bs.destroy()})}})}function fo(){ji.cur=null,ji.next=null,ji.dirty=!0,hr(_a).forEach(function(Pa){Pa.framebuffer=Ht.createFramebuffer(),Qi(Pa)})}return c(ji,{getFramebuffer:function(Pa){if(typeof Pa=="function"&&Pa._reglType==="framebuffer"){var to=Pa._framebuffer;if(to instanceof Ga)return to}return null},create:oa,createCube:Zo,clear:function(){hr(_a).forEach(xs)},restore:fo})}var hn=5126,kn=34962,an=34963,Rn=["attributes","elements","offset","count","primitive","instances"];function $n(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=hn,this.offset=0,this.stride=0,this.divisor=0}function di(Ht,Zr,On,wi,ia,Ai,ji){for(var Ea=On.maxAttributes,Ma=new Array(Ea),Ia=0;Ia<Ea;++Ia)Ma[Ia]=new $n;var Za=0,Ha={},$a={Record:$n,scope:{},state:Ma,currentVAO:null,targetVAO:null,restore:Ua()?xo:function(){},createVAO:xs,getVAO:Ni,destroyBuffer:ya,setVAO:Ua()?Ra:Ya,clear:Ua()?_a:function(){}};function ya(Qi){for(var oa=0;oa<Ma.length;++oa){var Zo=Ma[oa];Zo.buffer===Qi&&(Ht.disableVertexAttribArray(oa),Zo.buffer=null)}}function Ua(){return Zr.oes_vertex_array_object}function si(){return Zr.angle_instanced_arrays}function Ni(Qi){return typeof Qi=="function"&&Qi._vao?Qi._vao:null}function Ra(Qi){if(Qi!==$a.currentVAO){var oa=Ua();Qi?oa.bindVertexArrayOES(Qi.vao):oa.bindVertexArrayOES(null),$a.currentVAO=Qi}}function Ya(Qi){if(Qi!==$a.currentVAO){if(Qi)Qi.bindAttrs();else{for(var oa=si(),Zo=0;Zo<Ma.length;++Zo){var fo=Ma[Zo];fo.buffer?(Ht.enableVertexAttribArray(Zo),fo.buffer.bind(),Ht.vertexAttribPointer(Zo,fo.size,fo.type,fo.normalized,fo.stride,fo.offfset),oa&&fo.divisor&&oa.vertexAttribDivisorANGLE(Zo,fo.divisor)):(Ht.disableVertexAttribArray(Zo),Ht.vertexAttrib4f(Zo,fo.x,fo.y,fo.z,fo.w))}ji.elements?Ht.bindBuffer(an,ji.elements.buffer.buffer):Ht.bindBuffer(an,null)}$a.currentVAO=Qi}}function _a(){hr(Ha).forEach(function(Qi){Qi.destroy()})}function Ga(){this.id=++Za,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Qi=Ua();Qi?this.vao=Qi.createVertexArrayOES():this.vao=null,Ha[this.id]=this,this.buffers=[]}Ga.prototype.bindAttrs=function(){for(var Qi=si(),oa=this.attributes,Zo=0;Zo<oa.length;++Zo){var fo=oa[Zo];fo.buffer?(Ht.enableVertexAttribArray(Zo),Ht.bindBuffer(kn,fo.buffer.buffer),Ht.vertexAttribPointer(Zo,fo.size,fo.type,fo.normalized,fo.stride,fo.offset),Qi&&fo.divisor&&Qi.vertexAttribDivisorANGLE(Zo,fo.divisor)):(Ht.disableVertexAttribArray(Zo),Ht.vertexAttrib4f(Zo,fo.x,fo.y,fo.z,fo.w))}for(var Pa=oa.length;Pa<Ea;++Pa)Ht.disableVertexAttribArray(Pa);var to=Ai.getElements(this.elements);to?Ht.bindBuffer(an,to.buffer.buffer):Ht.bindBuffer(an,null)},Ga.prototype.refresh=function(){var Qi=Ua();Qi&&(Qi.bindVertexArrayOES(this.vao),this.bindAttrs(),$a.currentVAO=null,Qi.bindVertexArrayOES(null))},Ga.prototype.destroy=function(){if(this.vao){var Qi=Ua();this===$a.currentVAO&&($a.currentVAO=null,Qi.bindVertexArrayOES(null)),Qi.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Ha[this.id]&&(delete Ha[this.id],wi.vaoCount-=1)};function xo(){var Qi=Ua();Qi&&hr(Ha).forEach(function(oa){oa.refresh()})}function xs(Qi){var oa=new Ga;wi.vaoCount+=1;function Zo(fo){var Pa;if(Array.isArray(fo))Pa=fo,oa.elements&&oa.ownsElements&&oa.elements.destroy(),oa.elements=null,oa.ownsElements=!1,oa.offset=0,oa.count=0,oa.instances=-1,oa.primitive=4;else{if(W(typeof fo=="object","invalid arguments for create vao"),W("attributes"in fo,"must specify attributes for vao"),fo.elements){var to=fo.elements;oa.ownsElements?typeof to=="function"&&to._reglType==="elements"?(oa.elements.destroy(),oa.ownsElements=!1):(oa.elements(to),oa.ownsElements=!1):Ai.getElements(fo.elements)?(oa.elements=fo.elements,oa.ownsElements=!1):(oa.elements=Ai.create(fo.elements),oa.ownsElements=!0)}else oa.elements=null,oa.ownsElements=!1;Pa=fo.attributes,oa.offset=0,oa.count=-1,oa.instances=-1,oa.primitive=4,oa.elements&&(oa.count=oa.elements._elements.vertCount,oa.primitive=oa.elements._elements.primType),"offset"in fo&&(oa.offset=fo.offset|0),"count"in fo&&(oa.count=fo.count|0),"instances"in fo&&(oa.instances=fo.instances|0),"primitive"in fo&&(W(fo.primitive in Mi,"bad primitive type: "+fo.primitive),oa.primitive=Mi[fo.primitive]),W.optional(function(){for(var Gu=Object.keys(fo),Bl=0;Bl<Gu.length;++Bl)W(Rn.indexOf(Gu[Bl])>=0,'invalid option for vao: "'+Gu[Bl]+'" valid options are '+Rn)}),W(Array.isArray(Pa),"attributes must be an array")}W(Pa.length<Ea,"too many attributes"),W(Pa.length>0,"must specify at least one attribute");var Oa={},Os=oa.attributes;Os.length=Pa.length;for(var Bs=0;Bs<Pa.length;++Bs){var so=Pa[Bs],yo=Os[Bs]=new $n,hs=so.data||so;if(Array.isArray(hs)||M(hs)||Rs(hs)){var zs;oa.buffers[Bs]&&(zs=oa.buffers[Bs],M(hs)&&zs._buffer.byteLength>=hs.byteLength?zs.subdata(hs):(zs.destroy(),oa.buffers[Bs]=null)),oa.buffers[Bs]||(zs=oa.buffers[Bs]=ia.create(so,kn,!1,!0)),yo.buffer=ia.getBuffer(zs),yo.size=yo.buffer.dimension|0,yo.normalized=!1,yo.type=yo.buffer.dtype,yo.offset=0,yo.stride=0,yo.divisor=0,yo.state=1,Oa[Bs]=1}else ia.getBuffer(so)?(yo.buffer=ia.getBuffer(so),yo.size=yo.buffer.dimension|0,yo.normalized=!1,yo.type=yo.buffer.dtype,yo.offset=0,yo.stride=0,yo.divisor=0,yo.state=1):ia.getBuffer(so.buffer)?(yo.buffer=ia.getBuffer(so.buffer),yo.size=(+so.size||yo.buffer.dimension)|0,yo.normalized=!!so.normalized||!1,"type"in so?(W.parameter(so.type,Ei,"invalid buffer type"),yo.type=Ei[so.type]):yo.type=yo.buffer.dtype,yo.offset=(so.offset||0)|0,yo.stride=(so.stride||0)|0,yo.divisor=(so.divisor||0)|0,yo.state=1,W(yo.size>=1&&yo.size<=4,"size must be between 1 and 4"),W(yo.offset>=0,"invalid offset"),W(yo.stride>=0&&yo.stride<=255,"stride must be between 0 and 255"),W(yo.divisor>=0,"divisor must be positive"),W(!yo.divisor||!!Zr.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in so?(W(Bs>0,"first attribute must not be a constant"),yo.x=+so.x||0,yo.y=+so.y||0,yo.z=+so.z||0,yo.w=+so.w||0,yo.state=2):W(!1,"invalid attribute spec for location "+Bs)}for(var Cu=0;Cu<oa.buffers.length;++Cu)!Oa[Cu]&&oa.buffers[Cu]&&(oa.buffers[Cu].destroy(),oa.buffers[Cu]=null);return oa.refresh(),Zo}return Zo.destroy=function(){for(var fo=0;fo<oa.buffers.length;++fo)oa.buffers[fo]&&oa.buffers[fo].destroy();oa.buffers.length=0,oa.ownsElements&&(oa.elements.destroy(),oa.elements=null,oa.ownsElements=!1),oa.destroy()},Zo._vao=oa,Zo._reglType="vao",Zo(Qi)}return $a}var Di=35632,Ti=35633,Fi=35718,ra=35721;function Da(Ht,Zr,On,wi){var ia={},Ai={};function ji(si,Ni,Ra,Ya){this.name=si,this.id=Ni,this.location=Ra,this.info=Ya}function Ea(si,Ni){for(var Ra=0;Ra<si.length;++Ra)if(si[Ra].id===Ni.id){si[Ra].location=Ni.location;return}si.push(Ni)}function Ma(si,Ni,Ra){var Ya=si===Di?ia:Ai,_a=Ya[Ni];if(!_a){var Ga=Zr.str(Ni);_a=Ht.createShader(si),Ht.shaderSource(_a,Ga),Ht.compileShader(_a),W.shaderError(Ht,_a,Ga,si,Ra),Ya[Ni]=_a}return _a}var Ia={},Za=[],Ha=0;function $a(si,Ni){this.id=Ha++,this.fragId=si,this.vertId=Ni,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,wi.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ya(si,Ni,Ra){var Ya,_a,Ga=Ma(Di,si.fragId),xo=Ma(Ti,si.vertId),xs=si.program=Ht.createProgram();if(Ht.attachShader(xs,Ga),Ht.attachShader(xs,xo),Ra)for(Ya=0;Ya<Ra.length;++Ya){var Qi=Ra[Ya];Ht.bindAttribLocation(xs,Qi[0],Qi[1])}Ht.linkProgram(xs),W.linkError(Ht,xs,Zr.str(si.fragId),Zr.str(si.vertId),Ni);var oa=Ht.getProgramParameter(xs,Fi);wi.profile&&(si.stats.uniformsCount=oa);var Zo=si.uniforms;for(Ya=0;Ya<oa;++Ya)if(_a=Ht.getActiveUniform(xs,Ya),_a)if(_a.size>1)for(var fo=0;fo<_a.size;++fo){var Pa=_a.name.replace("[0]","["+fo+"]");Ea(Zo,new ji(Pa,Zr.id(Pa),Ht.getUniformLocation(xs,Pa),_a))}else Ea(Zo,new ji(_a.name,Zr.id(_a.name),Ht.getUniformLocation(xs,_a.name),_a));var to=Ht.getProgramParameter(xs,ra);wi.profile&&(si.stats.attributesCount=to);var Oa=si.attributes;for(Ya=0;Ya<to;++Ya)_a=Ht.getActiveAttrib(xs,Ya),_a&&Ea(Oa,new ji(_a.name,Zr.id(_a.name),Ht.getAttribLocation(xs,_a.name),_a))}wi.profile&&(On.getMaxUniformsCount=function(){var si=0;return Za.forEach(function(Ni){Ni.stats.uniformsCount>si&&(si=Ni.stats.uniformsCount)}),si},On.getMaxAttributesCount=function(){var si=0;return Za.forEach(function(Ni){Ni.stats.attributesCount>si&&(si=Ni.stats.attributesCount)}),si});function Ua(){ia={},Ai={};for(var si=0;si<Za.length;++si)ya(Za[si],null,Za[si].attributes.map(function(Ni){return[Ni.location,Ni.name]}))}return{clear:function(){var si=Ht.deleteShader.bind(Ht);hr(ia).forEach(si),ia={},hr(Ai).forEach(si),Ai={},Za.forEach(function(Ni){Ht.deleteProgram(Ni.program)}),Za.length=0,Ia={},On.shaderCount=0},program:function(si,Ni,Ra,Ya){W.command(si>=0,"missing vertex shader",Ra),W.command(Ni>=0,"missing fragment shader",Ra);var _a=Ia[Ni];_a||(_a=Ia[Ni]={});var Ga=_a[si];if(Ga&&(Ga.refCount++,!Ya))return Ga;var xo=new $a(Ni,si);return On.shaderCount++,ya(xo,Ra,Ya),Ga||(_a[si]=xo),Za.push(xo),c(xo,{destroy:function(){if(xo.refCount--,xo.refCount<=0){Ht.deleteProgram(xo.program);var xs=Za.indexOf(xo);Za.splice(xs,1),On.shaderCount--}_a[xo.vertId].refCount<=0&&(Ht.deleteShader(Ai[xo.vertId]),delete Ai[xo.vertId],delete Ia[xo.fragId][xo.vertId]),Object.keys(Ia[xo.fragId]).length||(Ht.deleteShader(ia[xo.fragId]),delete ia[xo.fragId],delete Ia[xo.fragId])}})},restore:Ua,shader:Ma,frag:-1,vert:-1}}var Na=6408,po=5121,No=3333,is=5126;function rs(Ht,Zr,On,wi,ia,Ai,ji){function Ea(Za){var Ha;Zr.next===null?(W(ia.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ha=po):(W(Zr.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ha=Zr.next.colorAttachments[0].texture._texture.type,W.optional(function(){Ai.oes_texture_float?(W(Ha===po||Ha===is,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ha===is&&W(ji.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):W(Ha===po,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var $a=0,ya=0,Ua=wi.framebufferWidth,si=wi.framebufferHeight,Ni=null;M(Za)?Ni=Za:Za&&(W.type(Za,"object","invalid arguments to regl.read()"),$a=Za.x|0,ya=Za.y|0,W($a>=0&&$a<wi.framebufferWidth,"invalid x offset for regl.read"),W(ya>=0&&ya<wi.framebufferHeight,"invalid y offset for regl.read"),Ua=(Za.width||wi.framebufferWidth-$a)|0,si=(Za.height||wi.framebufferHeight-ya)|0,Ni=Za.data||null),Ni&&(Ha===po?W(Ni instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ha===is&&W(Ni instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),W(Ua>0&&Ua+$a<=wi.framebufferWidth,"invalid width for read pixels"),W(si>0&&si+ya<=wi.framebufferHeight,"invalid height for read pixels"),On();var Ra=Ua*si*4;return Ni||(Ha===po?Ni=new Uint8Array(Ra):Ha===is&&(Ni=Ni||new Float32Array(Ra))),W.isTypedArray(Ni,"data buffer for regl.read() must be a typedarray"),W(Ni.byteLength>=Ra,"data buffer for regl.read() too small"),Ht.pixelStorei(No,4),Ht.readPixels($a,ya,Ua,si,Na,Ha,Ni),Ni}function Ma(Za){var Ha;return Zr.setFBO({framebuffer:Za.framebuffer},function(){Ha=Ea(Za)}),Ha}function Ia(Za){return!Za||!("framebuffer"in Za)?Ea(Za):Ma(Za)}return Ia}function Ls(Ht){return Array.prototype.slice.call(Ht)}function vo(Ht){return Ls(Ht).join("")}function ds(){var Ht=0,Zr=[],On=[];function wi(Ha){for(var $a=0;$a<On.length;++$a)if(On[$a]===Ha)return Zr[$a];var ya="g"+Ht++;return Zr.push(ya),On.push(Ha),ya}function ia(){var Ha=[];function $a(){Ha.push.apply(Ha,Ls(arguments))}var ya=[];function Ua(){var si="v"+Ht++;return ya.push(si),arguments.length>0&&(Ha.push(si,"="),Ha.push.apply(Ha,Ls(arguments)),Ha.push(";")),si}return c($a,{def:Ua,toString:function(){return vo([ya.length>0?"var "+ya.join(",")+";":"",vo(Ha)])}})}function Ai(){var Ha=ia(),$a=ia(),ya=Ha.toString,Ua=$a.toString;function si(Ni,Ra){$a(Ni,Ra,"=",Ha.def(Ni,Ra),";")}return c(function(){Ha.apply(Ha,Ls(arguments))},{def:Ha.def,entry:Ha,exit:$a,save:si,set:function(Ni,Ra,Ya){si(Ni,Ra),Ha(Ni,Ra,"=",Ya,";")},toString:function(){return ya()+Ua()}})}function ji(){var Ha=vo(arguments),$a=Ai(),ya=Ai(),Ua=$a.toString,si=ya.toString;return c($a,{then:function(){return $a.apply($a,Ls(arguments)),this},else:function(){return ya.apply(ya,Ls(arguments)),this},toString:function(){var Ni=si();return Ni&&(Ni="else{"+Ni+"}"),vo(["if(",Ha,"){",Ua(),"}",Ni])}})}var Ea=ia(),Ma={};function Ia(Ha,$a){var ya=[];function Ua(){var _a="a"+ya.length;return ya.push(_a),_a}$a=$a||0;for(var si=0;si<$a;++si)Ua();var Ni=Ai(),Ra=Ni.toString,Ya=Ma[Ha]=c(Ni,{arg:Ua,toString:function(){return vo(["function(",ya.join(),"){",Ra(),"}"])}});return Ya}function Za(){var Ha=['"use strict";',Ea,"return {"];Object.keys(Ma).forEach(function(si){Ha.push('"',si,'":',Ma[si].toString(),",")}),Ha.push("}");var $a=vo(Ha).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ya=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ua=ya?v.Function.apply(null,Zr.concat($a)):Function.apply(null,Zr.concat($a));return Ua.apply(null,On)}return{global:Ea,link:wi,block:ia,proc:Ia,scope:Ai,cond:ji,compile:Za}}var Ns="xyzw".split(""),cs=5121,Qo=1,$s=2,Cs=0,_s=1,El=2,nl=3,qu=4,Ac=5,Qu=6,Ju="dither",Tc="blend.enable",ec="blend.color",Pf="blend.equation",Ef="blend.func",$l="depth.enable",Uc="depth.func",Qh="depth.range",Jh="depth.mask",Sh="colorMask",Of="cull.enable",wh="cull.face",pf="frontFace",oh="lineWidth",Qc="polygonOffset.enable",nc="polygonOffset.offset",ic="sample.alpha",Ch="sample.enable",Fh="sample.coverage",ku="stencil.enable",yu="stencil.mask",Jc="stencil.func",sh="stencil.opFront",vh="stencil.opBack",Nf="scissor.enable",mh="scissor.box",If="viewport",Rf="profile",vf="framebuffer",ue="vert",Rr="frag",Mt="elements",St="primitive",Vt="count",ar="offset",Xr="instances",vn="vao",Sn="Width",Fn="Height",Ci=vf+Sn,Hi=vf+Fn,ba=If+Sn,mo=If+Fn,Qa="drawingBuffer",ks=Qa+Sn,Ts=Qa+Fn,lu=[Ef,Pf,Jc,sh,vh,Fh,If,mh,nc],Iu=34962,_u=34963,Mc=35632,tu=35633,Fl=3553,Ys=34067,Du=2884,Bu=3042,Gl=3024,ru=2960,pl=2929,ef=3089,Bh=32823,hc=32926,uh=32928,Kf=5126,gh=35664,yh=35665,Yf=35666,dc=5124,oe=35667,Fe=35668,Ze=35669,rt=35670,xt=35671,Dt=35672,$r=35673,En=35674,pi=35675,rn=35676,_i=35678,ga=35680,ss=4,To=1028,Ro=1029,fs=2304,ps=2305,zo=32775,Ds=32776,xu=519,cu=7680,tf=0,$c=1,ac=32774,ll=513,wu=36160,Sl=36064,Wl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],jc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},_h={frag:Mc,vert:tu},Oc={cw:fs,ccw:ps};function ud(Ht){return Array.isArray(Ht)||M(Ht)||Rs(Ht)}function Hd(Ht){return Ht.sort(function(Zr,On){return Zr===If?-1:On===If?1:Zr<On?-1:1})}function Zu(Ht,Zr,On,wi){this.thisDep=Ht,this.contextDep=Zr,this.propDep=On,this.append=wi}function Sd(Ht){return Ht&&!(Ht.thisDep||Ht.contextDep||Ht.propDep)}function Hc(Ht){return new Zu(!1,!1,!1,Ht)}function Nh(Ht,Zr){var On=Ht.type;if(On===Cs){var wi=Ht.data.length;return new Zu(!0,wi>=1,wi>=2,Zr)}else if(On===qu){var ia=Ht.data;return new Zu(ia.thisDep,ia.contextDep,ia.propDep,Zr)}else{if(On===Ac)return new Zu(!1,!1,!1,Zr);if(On===Qu){for(var Ai=!1,ji=!1,Ea=!1,Ma=0;Ma<Ht.data.length;++Ma){var Ia=Ht.data[Ma];if(Ia.type===_s)Ea=!0;else if(Ia.type===El)ji=!0;else if(Ia.type===nl)Ai=!0;else if(Ia.type===Cs){Ai=!0;var Za=Ia.data;Za>=1&&(ji=!0),Za>=2&&(Ea=!0)}else Ia.type===qu&&(Ai=Ai||Ia.data.thisDep,ji=ji||Ia.data.contextDep,Ea=Ea||Ia.data.propDep)}return new Zu(Ai,ji,Ea,Zr)}else return new Zu(On===nl,On===El,On===_s,Zr)}}var up=new Zu(!1,!1,!1,function(){});function _d(Ht,Zr,On,wi,ia,Ai,ji,Ea,Ma,Ia,Za,Ha,$a,ya,Ua){var si=Ia.Record,Ni={add:32774,subtract:32778,"reverse subtract":32779};On.ext_blend_minmax&&(Ni.min=zo,Ni.max=Ds);var Ra=On.angle_instanced_arrays,Ya=On.webgl_draw_buffers,_a=On.oes_vertex_array_object,Ga={dirty:!0,profile:Ua.profile},xo={},xs=[],Qi={},oa={};function Zo(Ue){return Ue.replace(".","_")}function fo(Ue,Xe,Ve){var ct=Zo(Ue);xs.push(Ue),xo[ct]=Ga[ct]=!!Ve,Qi[ct]=Xe}function Pa(Ue,Xe,Ve){var ct=Zo(Ue);xs.push(Ue),Array.isArray(Ve)?(Ga[ct]=Ve.slice(),xo[ct]=Ve.slice()):Ga[ct]=xo[ct]=Ve,oa[ct]=Xe}fo(Ju,Gl),fo(Tc,Bu),Pa(ec,"blendColor",[0,0,0,0]),Pa(Pf,"blendEquationSeparate",[ac,ac]),Pa(Ef,"blendFuncSeparate",[$c,tf,$c,tf]),fo($l,pl,!0),Pa(Uc,"depthFunc",ll),Pa(Qh,"depthRange",[0,1]),Pa(Jh,"depthMask",!0),Pa(Sh,Sh,[!0,!0,!0,!0]),fo(Of,Du),Pa(wh,"cullFace",Ro),Pa(pf,pf,ps),Pa(oh,oh,1),fo(Qc,Bh),Pa(nc,"polygonOffset",[0,0]),fo(ic,hc),fo(Ch,uh),Pa(Fh,"sampleCoverage",[1,!1]),fo(ku,ru),Pa(yu,"stencilMask",-1),Pa(Jc,"stencilFunc",[xu,0,-1]),Pa(sh,"stencilOpSeparate",[To,cu,cu,cu]),Pa(vh,"stencilOpSeparate",[Ro,cu,cu,cu]),fo(Nf,ef),Pa(mh,"scissor",[0,0,Ht.drawingBufferWidth,Ht.drawingBufferHeight]),Pa(If,If,[0,0,Ht.drawingBufferWidth,Ht.drawingBufferHeight]);var to={gl:Ht,context:$a,strings:Zr,next:xo,current:Ga,draw:Ha,elements:Ai,buffer:ia,shader:Za,attributes:Ia.state,vao:Ia,uniforms:Ma,framebuffer:Ea,extensions:On,timer:ya,isBufferArgs:ud},Oa={primTypes:Mi,compareFuncs:jc,blendFuncs:Wl,blendEquations:Ni,stencilOps:hu,glTypes:Ei,orientationType:Oc};W.optional(function(){to.isArrayLike=Xs}),Ya&&(Oa.backBuffer=[Ro],Oa.drawBuffer=Hr(wi.maxDrawbuffers,function(Ue){return Ue===0?[0]:Hr(Ue,function(Xe){return Sl+Xe})}));var Os=0;function Bs(){var Ue=ds(),Xe=Ue.link,Ve=Ue.global;Ue.id=Os++,Ue.batchId="0";var ct=Xe(to),Ct=Ue.shared={props:"a0"};Object.keys(to).forEach(function(rr){Ct[rr]=Ve.def(ct,".",rr)}),W.optional(function(){Ue.CHECK=Xe(W),Ue.commandStr=W.guessCommand(),Ue.command=Xe(Ue.commandStr),Ue.assert=function(rr,Xt,pr){rr("if(!(",Xt,"))",this.CHECK,".commandRaise(",Xe(pr),",",this.command,");")},Oa.invalidBlendCombinations=Pc});var Bt=Ue.next={},kt=Ue.current={};Object.keys(oa).forEach(function(rr){Array.isArray(Ga[rr])&&(Bt[rr]=Ve.def(Ct.next,".",rr),kt[rr]=Ve.def(Ct.current,".",rr))});var Jt=Ue.constants={};Object.keys(Oa).forEach(function(rr){Jt[rr]=Ve.def(JSON.stringify(Oa[rr]))}),Ue.invoke=function(rr,Xt){switch(Xt.type){case Cs:var pr=["this",Ct.context,Ct.props,Ue.batchId];return rr.def(Xe(Xt.data),".call(",pr.slice(0,Math.max(Xt.data.length+1,4)),")");case _s:return rr.def(Ct.props,Xt.data);case El:return rr.def(Ct.context,Xt.data);case nl:return rr.def("this",Xt.data);case qu:return Xt.data.append(Ue,rr),Xt.data.ref;case Ac:return Xt.data.toString();case Qu:return Xt.data.map(function(yr){return Ue.invoke(rr,yr)})}},Ue.attribCache={};var Ft={};return Ue.scopeAttrib=function(rr){var Xt=Zr.id(rr);if(Xt in Ft)return Ft[Xt];var pr=Ia.scope[Xt];pr||(pr=Ia.scope[Xt]=new si);var yr=Ft[Xt]=Xe(pr);return yr},Ue}function so(Ue){var Xe=Ue.static,Ve=Ue.dynamic,ct;if(Rf in Xe){var Ct=!!Xe[Rf];ct=Hc(function(kt,Jt){return Ct}),ct.enable=Ct}else if(Rf in Ve){var Bt=Ve[Rf];ct=Nh(Bt,function(kt,Jt){return kt.invoke(Jt,Bt)})}return ct}function yo(Ue,Xe){var Ve=Ue.static,ct=Ue.dynamic;if(vf in Ve){var Ct=Ve[vf];return Ct?(Ct=Ea.getFramebuffer(Ct),W.command(Ct,"invalid framebuffer object"),Hc(function(kt,Jt){var Ft=kt.link(Ct),rr=kt.shared;Jt.set(rr.framebuffer,".next",Ft);var Xt=rr.context;return Jt.set(Xt,"."+Ci,Ft+".width"),Jt.set(Xt,"."+Hi,Ft+".height"),Ft})):Hc(function(kt,Jt){var Ft=kt.shared;Jt.set(Ft.framebuffer,".next","null");var rr=Ft.context;return Jt.set(rr,"."+Ci,rr+"."+ks),Jt.set(rr,"."+Hi,rr+"."+Ts),"null"})}else if(vf in ct){var Bt=ct[vf];return Nh(Bt,function(kt,Jt){var Ft=kt.invoke(Jt,Bt),rr=kt.shared,Xt=rr.framebuffer,pr=Jt.def(Xt,".getFramebuffer(",Ft,")");W.optional(function(){kt.assert(Jt,"!"+Ft+"||"+pr,"invalid framebuffer object")}),Jt.set(Xt,".next",pr);var yr=rr.context;return Jt.set(yr,"."+Ci,pr+"?"+pr+".width:"+yr+"."+ks),Jt.set(yr,"."+Hi,pr+"?"+pr+".height:"+yr+"."+Ts),pr})}else return null}function hs(Ue,Xe,Ve){var ct=Ue.static,Ct=Ue.dynamic;function Bt(Ft){if(Ft in ct){var rr=ct[Ft];W.commandType(rr,"object","invalid "+Ft,Ve.commandStr);var Xt=!0,pr=rr.x|0,yr=rr.y|0,Ur,xn;return"width"in rr?(Ur=rr.width|0,W.command(Ur>=0,"invalid "+Ft,Ve.commandStr)):Xt=!1,"height"in rr?(xn=rr.height|0,W.command(xn>=0,"invalid "+Ft,Ve.commandStr)):Xt=!1,new Zu(!Xt&&Xe&&Xe.thisDep,!Xt&&Xe&&Xe.contextDep,!Xt&&Xe&&Xe.propDep,function(Pn,Gn){var ti=Pn.shared.context,ii=Ur;"width"in rr||(ii=Gn.def(ti,".",Ci,"-",pr));var b=xn;return"height"in rr||(b=Gn.def(ti,".",Hi,"-",yr)),[pr,yr,ii,b]})}else if(Ft in Ct){var mn=Ct[Ft],Mn=Nh(mn,function(Pn,Gn){var ti=Pn.invoke(Gn,mn);W.optional(function(){Pn.assert(Gn,ti+"&&typeof "+ti+'==="object"',"invalid "+Ft)});var ii=Pn.shared.context,b=Gn.def(ti,".x|0"),A=Gn.def(ti,".y|0"),I=Gn.def('"width" in ',ti,"?",ti,".width|0:","(",ii,".",Ci,"-",b,")"),T=Gn.def('"height" in ',ti,"?",ti,".height|0:","(",ii,".",Hi,"-",A,")");return W.optional(function(){Pn.assert(Gn,I+">=0&&"+T+">=0","invalid "+Ft)}),[b,A,I,T]});return Xe&&(Mn.thisDep=Mn.thisDep||Xe.thisDep,Mn.contextDep=Mn.contextDep||Xe.contextDep,Mn.propDep=Mn.propDep||Xe.propDep),Mn}else return Xe?new Zu(Xe.thisDep,Xe.contextDep,Xe.propDep,function(Pn,Gn){var ti=Pn.shared.context;return[0,0,Gn.def(ti,".",Ci),Gn.def(ti,".",Hi)]}):null}var kt=Bt(If);if(kt){var Jt=kt;kt=new Zu(kt.thisDep,kt.contextDep,kt.propDep,function(Ft,rr){var Xt=Jt.append(Ft,rr),pr=Ft.shared.context;return rr.set(pr,"."+ba,Xt[2]),rr.set(pr,"."+mo,Xt[3]),Xt})}return{viewport:kt,scissor_box:Bt(mh)}}function zs(Ue,Xe){var Ve=Ue.static,ct=typeof Ve[Rr]=="string"&&typeof Ve[ue]=="string";if(ct){if(Object.keys(Xe.dynamic).length>0)return null;var Ct=Xe.static,Bt=Object.keys(Ct);if(Bt.length>0&&typeof Ct[Bt[0]]=="number"){for(var kt=[],Jt=0;Jt<Bt.length;++Jt)W(typeof Ct[Bt[Jt]]=="number","must specify all vertex attribute locations when using vaos"),kt.push([Ct[Bt[Jt]]|0,Bt[Jt]]);return kt}}return null}function Cu(Ue,Xe,Ve){var ct=Ue.static,Ct=Ue.dynamic;function Bt(Xt){if(Xt in ct){var pr=Zr.id(ct[Xt]);W.optional(function(){Za.shader(_h[Xt],pr,W.guessCommand())});var yr=Hc(function(){return pr});return yr.id=pr,yr}else if(Xt in Ct){var Ur=Ct[Xt];return Nh(Ur,function(xn,mn){var Mn=xn.invoke(mn,Ur),Pn=mn.def(xn.shared.strings,".id(",Mn,")");return W.optional(function(){mn(xn.shared.shader,".shader(",_h[Xt],",",Pn,",",xn.command,");")}),Pn})}return null}var kt=Bt(Rr),Jt=Bt(ue),Ft=null,rr;return Sd(kt)&&Sd(Jt)?(Ft=Za.program(Jt.id,kt.id,null,Ve),rr=Hc(function(Xt,pr){return Xt.link(Ft)})):rr=new Zu(kt&&kt.thisDep||Jt&&Jt.thisDep,kt&&kt.contextDep||Jt&&Jt.contextDep,kt&&kt.propDep||Jt&&Jt.propDep,function(Xt,pr){var yr=Xt.shared.shader,Ur;kt?Ur=kt.append(Xt,pr):Ur=pr.def(yr,".",Rr);var xn;Jt?xn=Jt.append(Xt,pr):xn=pr.def(yr,".",ue);var mn=yr+".program("+xn+","+Ur;return W.optional(function(){mn+=","+Xt.command}),pr.def(mn+")")}),{frag:kt,vert:Jt,progVar:rr,program:Ft}}function Gu(Ue,Xe){var Ve=Ue.static,ct=Ue.dynamic,Ct={},Bt=!1;function kt(){if(vn in Ve){var Gn=Ve[vn];return Gn!==null&&Ia.getVAO(Gn)===null&&(Gn=Ia.createVAO(Gn)),Bt=!0,Ct.vao=Gn,Hc(function(ii){var b=Ia.getVAO(Gn);return b?ii.link(b):"null"})}else if(vn in ct){Bt=!0;var ti=ct[vn];return Nh(ti,function(ii,b){var A=ii.invoke(b,ti);return b.def(ii.shared.vao+".getVAO("+A+")")})}return null}var Jt=kt(),Ft=!1;function rr(){if(Mt in Ve){var Gn=Ve[Mt];if(Ct.elements=Gn,ud(Gn)){var ti=Ct.elements=Ai.create(Gn,!0);Gn=Ai.getElements(ti),Ft=!0}else Gn&&(Gn=Ai.getElements(Gn),Ft=!0,W.command(Gn,"invalid elements",Xe.commandStr));var ii=Hc(function(A,I){if(Gn){var T=A.link(Gn);return A.ELEMENTS=T,T}return A.ELEMENTS=null,null});return ii.value=Gn,ii}else if(Mt in ct){Ft=!0;var b=ct[Mt];return Nh(b,function(A,I){var T=A.shared,H=T.isBufferArgs,te=T.elements,Ae=A.invoke(I,b),qe=I.def("null"),Tt=I.def(H,"(",Ae,")"),Wt=A.cond(Tt).then(qe,"=",te,".createStream(",Ae,");").else(qe,"=",te,".getElements(",Ae,");");return W.optional(function(){A.assert(Wt.else,"!"+Ae+"||"+qe,"invalid elements")}),I.entry(Wt),I.exit(A.cond(Tt).then(te,".destroyStream(",qe,");")),A.ELEMENTS=qe,qe})}else if(Bt)return new Zu(Jt.thisDep,Jt.contextDep,Jt.propDep,function(A,I){return I.def(A.shared.vao+".currentVAO?"+A.shared.elements+".getElements("+A.shared.vao+".currentVAO.elements):null")});return null}var Xt=rr();function pr(){if(St in Ve){var Gn=Ve[St];return Ct.primitive=Gn,W.commandParameter(Gn,Mi,"invalid primitve",Xe.commandStr),Hc(function(ii,b){return Mi[Gn]})}else if(St in ct){var ti=ct[St];return Nh(ti,function(ii,b){var A=ii.constants.primTypes,I=ii.invoke(b,ti);return W.optional(function(){ii.assert(b,I+" in "+A,"invalid primitive, must be one of "+Object.keys(Mi))}),b.def(A,"[",I,"]")})}else{if(Ft)return Sd(Xt)?Xt.value?Hc(function(ii,b){return b.def(ii.ELEMENTS,".primType")}):Hc(function(){return ss}):new Zu(Xt.thisDep,Xt.contextDep,Xt.propDep,function(ii,b){var A=ii.ELEMENTS;return b.def(A,"?",A,".primType:",ss)});if(Bt)return new Zu(Jt.thisDep,Jt.contextDep,Jt.propDep,function(ii,b){return b.def(ii.shared.vao+".currentVAO?"+ii.shared.vao+".currentVAO.primitive:"+ss)})}return null}function yr(Gn,ti){if(Gn in Ve){var ii=Ve[Gn]|0;return ti?Ct.offset=ii:Ct.instances=ii,W.command(!ti||ii>=0,"invalid "+Gn,Xe.commandStr),Hc(function(A,I){return ti&&(A.OFFSET=ii),ii})}else if(Gn in ct){var b=ct[Gn];return Nh(b,function(A,I){var T=A.invoke(I,b);return ti&&(A.OFFSET=T,W.optional(function(){A.assert(I,T+">=0","invalid "+Gn)})),T})}else if(ti){if(Ft)return Hc(function(A,I){return A.OFFSET=0,0});if(Bt)return new Zu(Jt.thisDep,Jt.contextDep,Jt.propDep,function(A,I){return I.def(A.shared.vao+".currentVAO?"+A.shared.vao+".currentVAO.offset:0")})}else if(Bt)return new Zu(Jt.thisDep,Jt.contextDep,Jt.propDep,function(A,I){return I.def(A.shared.vao+".currentVAO?"+A.shared.vao+".currentVAO.instances:-1")});return null}var Ur=yr(ar,!0);function xn(){if(Vt in Ve){var Gn=Ve[Vt]|0;return Ct.count=Gn,W.command(typeof Gn=="number"&&Gn>=0,"invalid vertex count",Xe.commandStr),Hc(function(){return Gn})}else if(Vt in ct){var ti=ct[Vt];return Nh(ti,function(I,T){var H=I.invoke(T,ti);return W.optional(function(){I.assert(T,"typeof "+H+'==="number"&&'+H+">=0&&"+H+"===("+H+"|0)","invalid vertex count")}),H})}else if(Ft)if(Sd(Xt)){if(Xt)return Ur?new Zu(Ur.thisDep,Ur.contextDep,Ur.propDep,function(I,T){var H=T.def(I.ELEMENTS,".vertCount-",I.OFFSET);return W.optional(function(){I.assert(T,H+">=0","invalid vertex offset/element buffer too small")}),H}):Hc(function(I,T){return T.def(I.ELEMENTS,".vertCount")});var ii=Hc(function(){return-1});return W.optional(function(){ii.MISSING=!0}),ii}else{var b=new Zu(Xt.thisDep||Ur.thisDep,Xt.contextDep||Ur.contextDep,Xt.propDep||Ur.propDep,function(I,T){var H=I.ELEMENTS;return I.OFFSET?T.def(H,"?",H,".vertCount-",I.OFFSET,":-1"):T.def(H,"?",H,".vertCount:-1")});return W.optional(function(){b.DYNAMIC=!0}),b}else if(Bt){var A=new Zu(Jt.thisDep,Jt.contextDep,Jt.propDep,function(I,T){return T.def(I.shared.vao,".currentVAO?",I.shared.vao,".currentVAO.count:-1")});return A}return null}var mn=pr(),Mn=xn(),Pn=yr(Xr,!1);return{elements:Xt,primitive:mn,count:Mn,instances:Pn,offset:Ur,vao:Jt,vaoActive:Bt,elementsActive:Ft,static:Ct}}function Bl(Ue,Xe){var Ve=Ue.static,ct=Ue.dynamic,Ct={};return xs.forEach(function(Bt){var kt=Zo(Bt);function Jt(Ft,rr){if(Bt in Ve){var Xt=Ft(Ve[Bt]);Ct[kt]=Hc(function(){return Xt})}else if(Bt in ct){var pr=ct[Bt];Ct[kt]=Nh(pr,function(yr,Ur){return rr(yr,Ur,yr.invoke(Ur,pr))})}}switch(Bt){case Of:case Tc:case Ju:case ku:case $l:case Nf:case Qc:case ic:case Ch:case Jh:return Jt(function(Ft){return W.commandType(Ft,"boolean",Bt,Xe.commandStr),Ft},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,"typeof "+Xt+'==="boolean"',"invalid flag "+Bt,Ft.commandStr)}),Xt});case Uc:return Jt(function(Ft){return W.commandParameter(Ft,jc,"invalid "+Bt,Xe.commandStr),jc[Ft]},function(Ft,rr,Xt){var pr=Ft.constants.compareFuncs;return W.optional(function(){Ft.assert(rr,Xt+" in "+pr,"invalid "+Bt+", must be one of "+Object.keys(jc))}),rr.def(pr,"[",Xt,"]")});case Qh:return Jt(function(Ft){return W.command(Xs(Ft)&&Ft.length===2&&typeof Ft[0]=="number"&&typeof Ft[1]=="number"&&Ft[0]<=Ft[1],"depth range is 2d array",Xe.commandStr),Ft},function(Ft,rr,Xt){W.optional(function(){Ft.assert(rr,Ft.shared.isArrayLike+"("+Xt+")&&"+Xt+".length===2&&typeof "+Xt+'[0]==="number"&&typeof '+Xt+'[1]==="number"&&'+Xt+"[0]<="+Xt+"[1]","depth range must be a 2d array")});var pr=rr.def("+",Xt,"[0]"),yr=rr.def("+",Xt,"[1]");return[pr,yr]});case Ef:return Jt(function(Ft){W.commandType(Ft,"object","blend.func",Xe.commandStr);var rr="srcRGB"in Ft?Ft.srcRGB:Ft.src,Xt="srcAlpha"in Ft?Ft.srcAlpha:Ft.src,pr="dstRGB"in Ft?Ft.dstRGB:Ft.dst,yr="dstAlpha"in Ft?Ft.dstAlpha:Ft.dst;return W.commandParameter(rr,Wl,kt+".srcRGB",Xe.commandStr),W.commandParameter(Xt,Wl,kt+".srcAlpha",Xe.commandStr),W.commandParameter(pr,Wl,kt+".dstRGB",Xe.commandStr),W.commandParameter(yr,Wl,kt+".dstAlpha",Xe.commandStr),W.command(Pc.indexOf(rr+", "+pr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+rr+", "+pr+")",Xe.commandStr),[Wl[rr],Wl[pr],Wl[Xt],Wl[yr]]},function(Ft,rr,Xt){var pr=Ft.constants.blendFuncs;W.optional(function(){Ft.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid blend func, must be an object")});function yr(ti,ii){var b=rr.def('"',ti,ii,'" in ',Xt,"?",Xt,".",ti,ii,":",Xt,".",ti);return W.optional(function(){Ft.assert(rr,b+" in "+pr,"invalid "+Bt+"."+ti+ii+", must be one of "+Object.keys(Wl))}),b}var Ur=yr("src","RGB"),xn=yr("dst","RGB");W.optional(function(){var ti=Ft.constants.invalidBlendCombinations;Ft.assert(rr,ti+".indexOf("+Ur+'+", "+'+xn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var mn=rr.def(pr,"[",Ur,"]"),Mn=rr.def(pr,"[",yr("src","Alpha"),"]"),Pn=rr.def(pr,"[",xn,"]"),Gn=rr.def(pr,"[",yr("dst","Alpha"),"]");return[mn,Pn,Mn,Gn]});case Pf:return Jt(function(Ft){if(typeof Ft=="string")return W.commandParameter(Ft,Ni,"invalid "+Bt,Xe.commandStr),[Ni[Ft],Ni[Ft]];if(typeof Ft=="object")return W.commandParameter(Ft.rgb,Ni,Bt+".rgb",Xe.commandStr),W.commandParameter(Ft.alpha,Ni,Bt+".alpha",Xe.commandStr),[Ni[Ft.rgb],Ni[Ft.alpha]];W.commandRaise("invalid blend.equation",Xe.commandStr)},function(Ft,rr,Xt){var pr=Ft.constants.blendEquations,yr=rr.def(),Ur=rr.def(),xn=Ft.cond("typeof ",Xt,'==="string"');return W.optional(function(){function mn(Mn,Pn,Gn){Ft.assert(Mn,Gn+" in "+pr,"invalid "+Pn+", must be one of "+Object.keys(Ni))}mn(xn.then,Bt,Xt),Ft.assert(xn.else,Xt+"&&typeof "+Xt+'==="object"',"invalid "+Bt),mn(xn.else,Bt+".rgb",Xt+".rgb"),mn(xn.else,Bt+".alpha",Xt+".alpha")}),xn.then(yr,"=",Ur,"=",pr,"[",Xt,"];"),xn.else(yr,"=",pr,"[",Xt,".rgb];",Ur,"=",pr,"[",Xt,".alpha];"),rr(xn),[yr,Ur]});case ec:return Jt(function(Ft){return W.command(Xs(Ft)&&Ft.length===4,"blend.color must be a 4d array",Xe.commandStr),Hr(4,function(rr){return+Ft[rr]})},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,Ft.shared.isArrayLike+"("+Xt+")&&"+Xt+".length===4","blend.color must be a 4d array")}),Hr(4,function(pr){return rr.def("+",Xt,"[",pr,"]")})});case yu:return Jt(function(Ft){return W.commandType(Ft,"number",kt,Xe.commandStr),Ft|0},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,"typeof "+Xt+'==="number"',"invalid stencil.mask")}),rr.def(Xt,"|0")});case Jc:return Jt(function(Ft){W.commandType(Ft,"object",kt,Xe.commandStr);var rr=Ft.cmp||"keep",Xt=Ft.ref||0,pr="mask"in Ft?Ft.mask:-1;return W.commandParameter(rr,jc,Bt+".cmp",Xe.commandStr),W.commandType(Xt,"number",Bt+".ref",Xe.commandStr),W.commandType(pr,"number",Bt+".mask",Xe.commandStr),[jc[rr],Xt,pr]},function(Ft,rr,Xt){var pr=Ft.constants.compareFuncs;W.optional(function(){function mn(){Ft.assert(rr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}mn(Xt+"&&typeof ",Xt,'==="object"'),mn('!("cmp" in ',Xt,")||(",Xt,".cmp in ",pr,")")});var yr=rr.def('"cmp" in ',Xt,"?",pr,"[",Xt,".cmp]",":",cu),Ur=rr.def(Xt,".ref|0"),xn=rr.def('"mask" in ',Xt,"?",Xt,".mask|0:-1");return[yr,Ur,xn]});case sh:case vh:return Jt(function(Ft){W.commandType(Ft,"object",kt,Xe.commandStr);var rr=Ft.fail||"keep",Xt=Ft.zfail||"keep",pr=Ft.zpass||"keep";return W.commandParameter(rr,hu,Bt+".fail",Xe.commandStr),W.commandParameter(Xt,hu,Bt+".zfail",Xe.commandStr),W.commandParameter(pr,hu,Bt+".zpass",Xe.commandStr),[Bt===vh?Ro:To,hu[rr],hu[Xt],hu[pr]]},function(Ft,rr,Xt){var pr=Ft.constants.stencilOps;W.optional(function(){Ft.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid "+Bt)});function yr(Ur){return W.optional(function(){Ft.assert(rr,'!("'+Ur+'" in '+Xt+")||("+Xt+"."+Ur+" in "+pr+")","invalid "+Bt+"."+Ur+", must be one of "+Object.keys(hu))}),rr.def('"',Ur,'" in ',Xt,"?",pr,"[",Xt,".",Ur,"]:",cu)}return[Bt===vh?Ro:To,yr("fail"),yr("zfail"),yr("zpass")]});case nc:return Jt(function(Ft){W.commandType(Ft,"object",kt,Xe.commandStr);var rr=Ft.factor|0,Xt=Ft.units|0;return W.commandType(rr,"number",kt+".factor",Xe.commandStr),W.commandType(Xt,"number",kt+".units",Xe.commandStr),[rr,Xt]},function(Ft,rr,Xt){W.optional(function(){Ft.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid "+Bt)});var pr=rr.def(Xt,".factor|0"),yr=rr.def(Xt,".units|0");return[pr,yr]});case wh:return Jt(function(Ft){var rr=0;return Ft==="front"?rr=To:Ft==="back"&&(rr=Ro),W.command(!!rr,kt,Xe.commandStr),rr},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,Xt+'==="front"||'+Xt+'==="back"',"invalid cull.face")}),rr.def(Xt,'==="front"?',To,":",Ro)});case oh:return Jt(function(Ft){return W.command(typeof Ft=="number"&&Ft>=wi.lineWidthDims[0]&&Ft<=wi.lineWidthDims[1],"invalid line width, must be a positive number between "+wi.lineWidthDims[0]+" and "+wi.lineWidthDims[1],Xe.commandStr),Ft},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,"typeof "+Xt+'==="number"&&'+Xt+">="+wi.lineWidthDims[0]+"&&"+Xt+"<="+wi.lineWidthDims[1],"invalid line width")}),Xt});case pf:return Jt(function(Ft){return W.commandParameter(Ft,Oc,kt,Xe.commandStr),Oc[Ft]},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,Xt+'==="cw"||'+Xt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),rr.def(Xt+'==="cw"?'+fs+":"+ps)});case Sh:return Jt(function(Ft){return W.command(Xs(Ft)&&Ft.length===4,"color.mask must be length 4 array",Xe.commandStr),Ft.map(function(rr){return!!rr})},function(Ft,rr,Xt){return W.optional(function(){Ft.assert(rr,Ft.shared.isArrayLike+"("+Xt+")&&"+Xt+".length===4","invalid color.mask")}),Hr(4,function(pr){return"!!"+Xt+"["+pr+"]"})});case Fh:return Jt(function(Ft){W.command(typeof Ft=="object"&&Ft,kt,Xe.commandStr);var rr="value"in Ft?Ft.value:1,Xt=!!Ft.invert;return W.command(typeof rr=="number"&&rr>=0&&rr<=1,"sample.coverage.value must be a number between 0 and 1",Xe.commandStr),[rr,Xt]},function(Ft,rr,Xt){W.optional(function(){Ft.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid sample.coverage")});var pr=rr.def('"value" in ',Xt,"?+",Xt,".value:1"),yr=rr.def("!!",Xt,".invert");return[pr,yr]})}}),Ct}function Au(Ue,Xe){var Ve=Ue.static,ct=Ue.dynamic,Ct={};return Object.keys(Ve).forEach(function(Bt){var kt=Ve[Bt],Jt;if(typeof kt=="number"||typeof kt=="boolean")Jt=Hc(function(){return kt});else if(typeof kt=="function"){var Ft=kt._reglType;Ft==="texture2d"||Ft==="textureCube"?Jt=Hc(function(rr){return rr.link(kt)}):Ft==="framebuffer"||Ft==="framebufferCube"?(W.command(kt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Bt+'"',Xe.commandStr),Jt=Hc(function(rr){return rr.link(kt.color[0])})):W.commandRaise('invalid data for uniform "'+Bt+'"',Xe.commandStr)}else Xs(kt)?Jt=Hc(function(rr){var Xt=rr.global.def("[",Hr(kt.length,function(pr){return W.command(typeof kt[pr]=="number"||typeof kt[pr]=="boolean","invalid uniform "+Bt,rr.commandStr),kt[pr]}),"]");return Xt}):W.commandRaise('invalid or missing data for uniform "'+Bt+'"',Xe.commandStr);Jt.value=kt,Ct[Bt]=Jt}),Object.keys(ct).forEach(function(Bt){var kt=ct[Bt];Ct[Bt]=Nh(kt,function(Jt,Ft){return Jt.invoke(Ft,kt)})}),Ct}function Sf(Ue,Xe){var Ve=Ue.static,ct=Ue.dynamic,Ct={};return Object.keys(Ve).forEach(function(Bt){var kt=Ve[Bt],Jt=Zr.id(Bt),Ft=new si;if(ud(kt))Ft.state=Qo,Ft.buffer=ia.getBuffer(ia.create(kt,Iu,!1,!0)),Ft.type=0;else{var rr=ia.getBuffer(kt);if(rr)Ft.state=Qo,Ft.buffer=rr,Ft.type=0;else if(W.command(typeof kt=="object"&&kt,"invalid data for attribute "+Bt,Xe.commandStr),"constant"in kt){var Xt=kt.constant;Ft.buffer="null",Ft.state=$s,typeof Xt=="number"?Ft.x=Xt:(W.command(Xs(Xt)&&Xt.length>0&&Xt.length<=4,"invalid constant for attribute "+Bt,Xe.commandStr),Ns.forEach(function(Pn,Gn){Gn<Xt.length&&(Ft[Pn]=Xt[Gn])}))}else{ud(kt.buffer)?rr=ia.getBuffer(ia.create(kt.buffer,Iu,!1,!0)):rr=ia.getBuffer(kt.buffer),W.command(!!rr,'missing buffer for attribute "'+Bt+'"',Xe.commandStr);var pr=kt.offset|0;W.command(pr>=0,'invalid offset for attribute "'+Bt+'"',Xe.commandStr);var yr=kt.stride|0;W.command(yr>=0&&yr<256,'invalid stride for attribute "'+Bt+'", must be integer betweeen [0, 255]',Xe.commandStr);var Ur=kt.size|0;W.command(!("size"in kt)||Ur>0&&Ur<=4,'invalid size for attribute "'+Bt+'", must be 1,2,3,4',Xe.commandStr);var xn=!!kt.normalized,mn=0;"type"in kt&&(W.commandParameter(kt.type,Ei,"invalid type for attribute "+Bt,Xe.commandStr),mn=Ei[kt.type]);var Mn=kt.divisor|0;W.optional(function(){"divisor"in kt&&(W.command(Mn===0||Ra,'cannot specify divisor for attribute "'+Bt+'", instancing not supported',Xe.commandStr),W.command(Mn>=0,'invalid divisor for attribute "'+Bt+'"',Xe.commandStr));var Pn=Xe.commandStr,Gn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(kt).forEach(function(ti){W.command(Gn.indexOf(ti)>=0,'unknown parameter "'+ti+'" for attribute pointer "'+Bt+'" (valid parameters are '+Gn+")",Pn)})}),Ft.buffer=rr,Ft.state=Qo,Ft.size=Ur,Ft.normalized=xn,Ft.type=mn||rr.dtype,Ft.offset=pr,Ft.stride=yr,Ft.divisor=Mn}}Ct[Bt]=Hc(function(Pn,Gn){var ti=Pn.attribCache;if(Jt in ti)return ti[Jt];var ii={isStream:!1};return Object.keys(Ft).forEach(function(b){ii[b]=Ft[b]}),Ft.buffer&&(ii.buffer=Pn.link(Ft.buffer),ii.type=ii.type||ii.buffer+".dtype"),ti[Jt]=ii,ii})}),Object.keys(ct).forEach(function(Bt){var kt=ct[Bt];function Jt(Ft,rr){var Xt=Ft.invoke(rr,kt),pr=Ft.shared,yr=Ft.constants,Ur=pr.isBufferArgs,xn=pr.buffer;W.optional(function(){Ft.assert(rr,Xt+"&&(typeof "+Xt+'==="object"||typeof '+Xt+'==="function")&&('+Ur+"("+Xt+")||"+xn+".getBuffer("+Xt+")||"+xn+".getBuffer("+Xt+".buffer)||"+Ur+"("+Xt+'.buffer)||("constant" in '+Xt+"&&(typeof "+Xt+'.constant==="number"||'+pr.isArrayLike+"("+Xt+".constant))))",'invalid dynamic attribute "'+Bt+'"')});var mn={isStream:rr.def(!1)},Mn=new si;Mn.state=Qo,Object.keys(Mn).forEach(function(ii){mn[ii]=rr.def(""+Mn[ii])});var Pn=mn.buffer,Gn=mn.type;rr("if(",Ur,"(",Xt,")){",mn.isStream,"=true;",Pn,"=",xn,".createStream(",Iu,",",Xt,");",Gn,"=",Pn,".dtype;","}else{",Pn,"=",xn,".getBuffer(",Xt,");","if(",Pn,"){",Gn,"=",Pn,".dtype;",'}else if("constant" in ',Xt,"){",mn.state,"=",$s,";","if(typeof "+Xt+'.constant === "number"){',mn[Ns[0]],"=",Xt,".constant;",Ns.slice(1).map(function(ii){return mn[ii]}).join("="),"=0;","}else{",Ns.map(function(ii,b){return mn[ii]+"="+Xt+".constant.length>"+b+"?"+Xt+".constant["+b+"]:0;"}).join(""),"}}else{","if(",Ur,"(",Xt,".buffer)){",Pn,"=",xn,".createStream(",Iu,",",Xt,".buffer);","}else{",Pn,"=",xn,".getBuffer(",Xt,".buffer);","}",Gn,'="type" in ',Xt,"?",yr.glTypes,"[",Xt,".type]:",Pn,".dtype;",mn.normalized,"=!!",Xt,".normalized;");function ti(ii){rr(mn[ii],"=",Xt,".",ii,"|0;")}return ti("size"),ti("offset"),ti("stride"),ti("divisor"),rr("}}"),rr.exit("if(",mn.isStream,"){",xn,".destroyStream(",Pn,");","}"),mn}Ct[Bt]=Nh(kt,Jt)}),Ct}function Xl(Ue){var Xe=Ue.static,Ve=Ue.dynamic,ct={};return Object.keys(Xe).forEach(function(Ct){var Bt=Xe[Ct];ct[Ct]=Hc(function(kt,Jt){return typeof Bt=="number"||typeof Bt=="boolean"?""+Bt:kt.link(Bt)})}),Object.keys(Ve).forEach(function(Ct){var Bt=Ve[Ct];ct[Ct]=Nh(Bt,function(kt,Jt){return kt.invoke(Jt,Bt)})}),ct}function Ic(Ue,Xe,Ve,ct,Ct){var Bt=Ue.static,kt=Ue.dynamic;W.optional(function(){var ti=[vf,ue,Rr,Mt,St,ar,Vt,Xr,Rf,vn].concat(xs);function ii(b){Object.keys(b).forEach(function(A){W.command(ti.indexOf(A)>=0,'unknown parameter "'+A+'"',Ct.commandStr)})}ii(Bt),ii(kt)});var Jt=zs(Ue,Xe),Ft=yo(Ue,Ct),rr=hs(Ue,Ft,Ct),Xt=Gu(Ue,Ct),pr=Bl(Ue,Ct),yr=Cu(Ue,Ct,Jt);function Ur(ti){var ii=rr[ti];ii&&(pr[ti]=ii)}Ur(If),Ur(Zo(mh));var xn=Object.keys(pr).length>0,mn={framebuffer:Ft,draw:Xt,shader:yr,state:pr,dirty:xn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(mn.profile=so(Ue,Ct),mn.uniforms=Au(Ve,Ct),mn.drawVAO=mn.scopeVAO=Xt.vao,!mn.drawVAO&&yr.program&&!Jt&&On.angle_instanced_arrays&&Xt.static.elements){var Mn=!0,Pn=yr.program.attributes.map(function(ti){var ii=Xe.static[ti];return Mn=Mn&&!!ii,ii});if(Mn&&Pn.length>0){var Gn=Ia.getVAO(Ia.createVAO({attributes:Pn,elements:Xt.static.elements}));mn.drawVAO=new Zu(null,null,null,function(ti,ii){return ti.link(Gn)}),mn.useVAO=!0}}return Jt?mn.useVAO=!0:mn.attributes=Sf(Xe,Ct),mn.context=Xl(ct,Ct),mn}function wl(Ue,Xe,Ve){var ct=Ue.shared,Ct=ct.context,Bt=Ue.scope();Object.keys(Ve).forEach(function(kt){Xe.save(Ct,"."+kt);var Jt=Ve[kt],Ft=Jt.append(Ue,Xe);Array.isArray(Ft)?Bt(Ct,".",kt,"=[",Ft.join(),"];"):Bt(Ct,".",kt,"=",Ft,";")}),Xe(Bt)}function rf(Ue,Xe,Ve,ct){var Ct=Ue.shared,Bt=Ct.gl,kt=Ct.framebuffer,Jt;Ya&&(Jt=Xe.def(Ct.extensions,".webgl_draw_buffers"));var Ft=Ue.constants,rr=Ft.drawBuffer,Xt=Ft.backBuffer,pr;Ve?pr=Ve.append(Ue,Xe):pr=Xe.def(kt,".next"),ct||Xe("if(",pr,"!==",kt,".cur){"),Xe("if(",pr,"){",Bt,".bindFramebuffer(",wu,",",pr,".framebuffer);"),Ya&&Xe(Jt,".drawBuffersWEBGL(",rr,"[",pr,".colorAttachments.length]);"),Xe("}else{",Bt,".bindFramebuffer(",wu,",null);"),Ya&&Xe(Jt,".drawBuffersWEBGL(",Xt,");"),Xe("}",kt,".cur=",pr,";"),ct||Xe("}")}function mf(Ue,Xe,Ve){var ct=Ue.shared,Ct=ct.gl,Bt=Ue.current,kt=Ue.next,Jt=ct.current,Ft=ct.next,rr=Ue.cond(Jt,".dirty");xs.forEach(function(Xt){var pr=Zo(Xt);if(!(pr in Ve.state)){var yr,Ur;if(pr in kt){yr=kt[pr],Ur=Bt[pr];var xn=Hr(Ga[pr].length,function(Mn){return rr.def(yr,"[",Mn,"]")});rr(Ue.cond(xn.map(function(Mn,Pn){return Mn+"!=="+Ur+"["+Pn+"]"}).join("||")).then(Ct,".",oa[pr],"(",xn,");",xn.map(function(Mn,Pn){return Ur+"["+Pn+"]="+Mn}).join(";"),";"))}else{yr=rr.def(Ft,".",pr);var mn=Ue.cond(yr,"!==",Jt,".",pr);rr(mn),pr in Qi?mn(Ue.cond(yr).then(Ct,".enable(",Qi[pr],");").else(Ct,".disable(",Qi[pr],");"),Jt,".",pr,"=",yr,";"):mn(Ct,".",oa[pr],"(",yr,");",Jt,".",pr,"=",yr,";")}}}),Object.keys(Ve.state).length===0&&rr(Jt,".dirty=false;"),Xe(rr)}function lh(Ue,Xe,Ve,ct){var Ct=Ue.shared,Bt=Ue.current,kt=Ct.current,Jt=Ct.gl;Hd(Object.keys(Ve)).forEach(function(Ft){var rr=Ve[Ft];if(!(ct&&!ct(rr))){var Xt=rr.append(Ue,Xe);if(Qi[Ft]){var pr=Qi[Ft];Sd(rr)?Xt?Xe(Jt,".enable(",pr,");"):Xe(Jt,".disable(",pr,");"):Xe(Ue.cond(Xt).then(Jt,".enable(",pr,");").else(Jt,".disable(",pr,");")),Xe(kt,".",Ft,"=",Xt,";")}else if(Xs(Xt)){var yr=Bt[Ft];Xe(Jt,".",oa[Ft],"(",Xt,");",Xt.map(function(Ur,xn){return yr+"["+xn+"]="+Ur}).join(";"),";")}else Xe(Jt,".",oa[Ft],"(",Xt,");",kt,".",Ft,"=",Xt,";")}})}function pc(Ue,Xe){Ra&&(Ue.instancing=Xe.def(Ue.shared.extensions,".angle_instanced_arrays"))}function fu(Ue,Xe,Ve,ct,Ct){var Bt=Ue.shared,kt=Ue.stats,Jt=Bt.current,Ft=Bt.timer,rr=Ve.profile;function Xt(){var ti=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return ti||typeof performance=="undefined"?"Date.now()":"performance.now()"}var pr,yr;function Ur(ti){pr=Xe.def(),ti(pr,"=",Xt(),";"),typeof Ct=="string"?ti(kt,".count+=",Ct,";"):ti(kt,".count++;"),ya&&(ct?(yr=Xe.def(),ti(yr,"=",Ft,".getNumPendingQueries();")):ti(Ft,".beginQuery(",kt,");"))}function xn(ti){ti(kt,".cpuTime+=",Xt(),"-",pr,";"),ya&&(ct?ti(Ft,".pushScopeStats(",yr,",",Ft,".getNumPendingQueries(),",kt,");"):ti(Ft,".endQuery();"))}function mn(ti){var ii=Xe.def(Jt,".profile");Xe(Jt,".profile=",ti,";"),Xe.exit(Jt,".profile=",ii,";")}var Mn;if(rr){if(Sd(rr)){rr.enable?(Ur(Xe),xn(Xe.exit),mn("true")):mn("false");return}Mn=rr.append(Ue,Xe),mn(Mn)}else Mn=Xe.def(Jt,".profile");var Pn=Ue.block();Ur(Pn),Xe("if(",Mn,"){",Pn,"}");var Gn=Ue.block();xn(Gn),Xe.exit("if(",Mn,"){",Gn,"}")}function wf(Ue,Xe,Ve,ct,Ct){var Bt=Ue.shared;function kt(Ft){switch(Ft){case gh:case oe:case xt:return 2;case yh:case Fe:case Dt:return 3;case Yf:case Ze:case $r:return 4;default:return 1}}function Jt(Ft,rr,Xt){var pr=Bt.gl,yr=Xe.def(Ft,".location"),Ur=Xe.def(Bt.attributes,"[",yr,"]"),xn=Xt.state,mn=Xt.buffer,Mn=[Xt.x,Xt.y,Xt.z,Xt.w],Pn=["buffer","normalized","offset","stride"];function Gn(){Xe("if(!",Ur,".buffer){",pr,".enableVertexAttribArray(",yr,");}");var ii=Xt.type,b;if(Xt.size?b=Xe.def(Xt.size,"||",rr):b=rr,Xe("if(",Ur,".type!==",ii,"||",Ur,".size!==",b,"||",Pn.map(function(I){return Ur+"."+I+"!=="+Xt[I]}).join("||"),"){",pr,".bindBuffer(",Iu,",",mn,".buffer);",pr,".vertexAttribPointer(",[yr,b,ii,Xt.normalized,Xt.stride,Xt.offset],");",Ur,".type=",ii,";",Ur,".size=",b,";",Pn.map(function(I){return Ur+"."+I+"="+Xt[I]+";"}).join(""),"}"),Ra){var A=Xt.divisor;Xe("if(",Ur,".divisor!==",A,"){",Ue.instancing,".vertexAttribDivisorANGLE(",[yr,A],");",Ur,".divisor=",A,";}")}}function ti(){Xe("if(",Ur,".buffer){",pr,".disableVertexAttribArray(",yr,");",Ur,".buffer=null;","}if(",Ns.map(function(ii,b){return Ur+"."+ii+"!=="+Mn[b]}).join("||"),"){",pr,".vertexAttrib4f(",yr,",",Mn,");",Ns.map(function(ii,b){return Ur+"."+ii+"="+Mn[b]+";"}).join(""),"}")}xn===Qo?Gn():xn===$s?ti():(Xe("if(",xn,"===",Qo,"){"),Gn(),Xe("}else{"),ti(),Xe("}"))}ct.forEach(function(Ft){var rr=Ft.name,Xt=Ve.attributes[rr],pr;if(Xt){if(!Ct(Xt))return;pr=Xt.append(Ue,Xe)}else{if(!Ct(up))return;var yr=Ue.scopeAttrib(rr);W.optional(function(){Ue.assert(Xe,yr+".state","missing attribute "+rr)}),pr={},Object.keys(new si).forEach(function(Ur){pr[Ur]=Xe.def(yr,".",Ur)})}Jt(Ue.link(Ft),kt(Ft.info.type),pr)})}function Uu(Ue,Xe,Ve,ct,Ct,Bt){for(var kt=Ue.shared,Jt=kt.gl,Ft,rr=0;rr<ct.length;++rr){var Xt=ct[rr],pr=Xt.name,yr=Xt.info.type,Ur=Ve.uniforms[pr],xn=Ue.link(Xt),mn=xn+".location",Mn;if(Ur){if(!Ct(Ur))continue;if(Sd(Ur)){var Pn=Ur.value;if(W.command(Pn!==null&&typeof Pn!="undefined",'missing uniform "'+pr+'"',Ue.commandStr),yr===_i||yr===ga){W.command(typeof Pn=="function"&&(yr===_i&&(Pn._reglType==="texture2d"||Pn._reglType==="framebuffer")||yr===ga&&(Pn._reglType==="textureCube"||Pn._reglType==="framebufferCube")),"invalid texture for uniform "+pr,Ue.commandStr);var Gn=Ue.link(Pn._texture||Pn.color[0]._texture);Xe(Jt,".uniform1i(",mn,",",Gn+".bind());"),Xe.exit(Gn,".unbind();")}else if(yr===En||yr===pi||yr===rn){W.optional(function(){W.command(Xs(Pn),"invalid matrix for uniform "+pr,Ue.commandStr),W.command(yr===En&&Pn.length===4||yr===pi&&Pn.length===9||yr===rn&&Pn.length===16,"invalid length for matrix uniform "+pr,Ue.commandStr)});var ti=Ue.global.def("new Float32Array(["+Array.prototype.slice.call(Pn)+"])"),ii=2;yr===pi?ii=3:yr===rn&&(ii=4),Xe(Jt,".uniformMatrix",ii,"fv(",mn,",false,",ti,");")}else{switch(yr){case Kf:W.commandType(Pn,"number","uniform "+pr,Ue.commandStr),Ft="1f";break;case gh:W.command(Xs(Pn)&&Pn.length===2,"uniform "+pr,Ue.commandStr),Ft="2f";break;case yh:W.command(Xs(Pn)&&Pn.length===3,"uniform "+pr,Ue.commandStr),Ft="3f";break;case Yf:W.command(Xs(Pn)&&Pn.length===4,"uniform "+pr,Ue.commandStr),Ft="4f";break;case rt:W.commandType(Pn,"boolean","uniform "+pr,Ue.commandStr),Ft="1i";break;case dc:W.commandType(Pn,"number","uniform "+pr,Ue.commandStr),Ft="1i";break;case xt:W.command(Xs(Pn)&&Pn.length===2,"uniform "+pr,Ue.commandStr),Ft="2i";break;case oe:W.command(Xs(Pn)&&Pn.length===2,"uniform "+pr,Ue.commandStr),Ft="2i";break;case Dt:W.command(Xs(Pn)&&Pn.length===3,"uniform "+pr,Ue.commandStr),Ft="3i";break;case Fe:W.command(Xs(Pn)&&Pn.length===3,"uniform "+pr,Ue.commandStr),Ft="3i";break;case $r:W.command(Xs(Pn)&&Pn.length===4,"uniform "+pr,Ue.commandStr),Ft="4i";break;case Ze:W.command(Xs(Pn)&&Pn.length===4,"uniform "+pr,Ue.commandStr),Ft="4i";break}Xe(Jt,".uniform",Ft,"(",mn,",",Xs(Pn)?Array.prototype.slice.call(Pn):Pn,");")}continue}else Mn=Ur.append(Ue,Xe)}else{if(!Ct(up))continue;Mn=Xe.def(kt.uniforms,"[",Zr.id(pr),"]")}yr===_i?(W(!Array.isArray(Mn),"must specify a scalar prop for textures"),Xe("if(",Mn,"&&",Mn,'._reglType==="framebuffer"){',Mn,"=",Mn,".color[0];","}")):yr===ga&&(W(!Array.isArray(Mn),"must specify a scalar prop for cube maps"),Xe("if(",Mn,"&&",Mn,'._reglType==="framebufferCube"){',Mn,"=",Mn,".color[0];","}")),W.optional(function(){function Tt(en,zn){Ue.assert(Xe,en,'bad data or missing for uniform "'+pr+'".  '+zn)}function Wt(en){W(!Array.isArray(Mn),"must not specify an array type for uniform"),Tt("typeof "+Mn+'==="'+en+'"',"invalid type, expected "+en)}function vr(en,zn){Array.isArray(Mn)?W(Mn.length===en,"must have length "+en):Tt(kt.isArrayLike+"("+Mn+")&&"+Mn+".length==="+en,"invalid vector, should have length "+en,Ue.commandStr)}function Fr(en){W(!Array.isArray(Mn),"must not specify a value type"),Tt("typeof "+Mn+'==="function"&&'+Mn+'._reglType==="texture'+(en===Fl?"2d":"Cube")+'"',"invalid texture type",Ue.commandStr)}switch(yr){case dc:Wt("number");break;case oe:vr(2,"number");break;case Fe:vr(3,"number");break;case Ze:vr(4,"number");break;case Kf:Wt("number");break;case gh:vr(2,"number");break;case yh:vr(3,"number");break;case Yf:vr(4,"number");break;case rt:Wt("boolean");break;case xt:vr(2,"boolean");break;case Dt:vr(3,"boolean");break;case $r:vr(4,"boolean");break;case En:vr(4,"number");break;case pi:vr(9,"number");break;case rn:vr(16,"number");break;case _i:Fr(Fl);break;case ga:Fr(Ys);break}});var b=1;switch(yr){case _i:case ga:var A=Xe.def(Mn,"._texture");Xe(Jt,".uniform1i(",mn,",",A,".bind());"),Xe.exit(A,".unbind();");continue;case dc:case rt:Ft="1i";break;case oe:case xt:Ft="2i",b=2;break;case Fe:case Dt:Ft="3i",b=3;break;case Ze:case $r:Ft="4i",b=4;break;case Kf:Ft="1f";break;case gh:Ft="2f",b=2;break;case yh:Ft="3f",b=3;break;case Yf:Ft="4f",b=4;break;case En:Ft="Matrix2fv";break;case pi:Ft="Matrix3fv";break;case rn:Ft="Matrix4fv";break}if(Ft.charAt(0)==="M"){Xe(Jt,".uniform",Ft,"(",mn,",");var I=Math.pow(yr-En+2,2),T=Ue.global.def("new Float32Array(",I,")");Array.isArray(Mn)?Xe("false,(",Hr(I,function(Tt){return T+"["+Tt+"]="+Mn[Tt]}),",",T,")"):Xe("false,(Array.isArray(",Mn,")||",Mn," instanceof Float32Array)?",Mn,":(",Hr(I,function(Tt){return T+"["+Tt+"]="+Mn+"["+Tt+"]"}),",",T,")"),Xe(");")}else if(b>1){for(var H=[],te=[],Ae=0;Ae<b;++Ae)Array.isArray(Mn)?te.push(Mn[Ae]):te.push(Xe.def(Mn+"["+Ae+"]")),Bt&&H.push(Xe.def());Bt&&Xe("if(!",Ue.batchId,"||",H.map(function(Tt,Wt){return Tt+"!=="+te[Wt]}).join("||"),"){",H.map(function(Tt,Wt){return Tt+"="+te[Wt]+";"}).join("")),Xe(Jt,".uniform",Ft,"(",mn,",",te.join(","),");"),Bt&&Xe("}")}else{if(W(!Array.isArray(Mn),"uniform value must not be an array"),Bt){var qe=Xe.def();Xe("if(!",Ue.batchId,"||",qe,"!==",Mn,"){",qe,"=",Mn,";")}Xe(Jt,".uniform",Ft,"(",mn,",",Mn,");"),Bt&&Xe("}")}}}function qf(Ue,Xe,Ve,ct){var Ct=Ue.shared,Bt=Ct.gl,kt=Ct.draw,Jt=ct.draw;function Ft(){var b=Jt.elements,A,I=Xe;return b?((b.contextDep&&ct.contextDynamic||b.propDep)&&(I=Ve),A=b.append(Ue,I),Jt.elementsActive&&I("if("+A+")"+Bt+".bindBuffer("+_u+","+A+".buffer.buffer);")):(A=I.def(),I(A,"=",kt,".",Mt,";","if(",A,"){",Bt,".bindBuffer(",_u,",",A,".buffer.buffer);}","else if(",Ct.vao,".currentVAO){",A,"=",Ue.shared.elements+".getElements("+Ct.vao,".currentVAO.elements);",_a?"":"if("+A+")"+Bt+".bindBuffer("+_u+","+A+".buffer.buffer);","}")),A}function rr(){var b=Jt.count,A,I=Xe;return b?((b.contextDep&&ct.contextDynamic||b.propDep)&&(I=Ve),A=b.append(Ue,I),W.optional(function(){b.MISSING&&Ue.assert(Xe,"false","missing vertex count"),b.DYNAMIC&&Ue.assert(I,A+">=0","missing vertex count")})):(A=I.def(kt,".",Vt),W.optional(function(){Ue.assert(I,A+">=0","missing vertex count")})),A}var Xt=Ft();function pr(b){var A=Jt[b];return A?A.contextDep&&ct.contextDynamic||A.propDep?A.append(Ue,Ve):A.append(Ue,Xe):Xe.def(kt,".",b)}var yr=pr(St),Ur=pr(ar),xn=rr();if(typeof xn=="number"){if(xn===0)return}else Ve("if(",xn,"){"),Ve.exit("}");var mn,Mn;Ra&&(mn=pr(Xr),Mn=Ue.instancing);var Pn=Xt+".type",Gn=Jt.elements&&Sd(Jt.elements)&&!Jt.vaoActive;function ti(){function b(){Ve(Mn,".drawElementsInstancedANGLE(",[yr,xn,Pn,Ur+"<<(("+Pn+"-"+cs+")>>1)",mn],");")}function A(){Ve(Mn,".drawArraysInstancedANGLE(",[yr,Ur,xn,mn],");")}Xt&&Xt!=="null"?Gn?b():(Ve("if(",Xt,"){"),b(),Ve("}else{"),A(),Ve("}")):A()}function ii(){function b(){Ve(Bt+".drawElements("+[yr,xn,Pn,Ur+"<<(("+Pn+"-"+cs+")>>1)"]+");")}function A(){Ve(Bt+".drawArrays("+[yr,Ur,xn]+");")}Xt&&Xt!=="null"?Gn?b():(Ve("if(",Xt,"){"),b(),Ve("}else{"),A(),Ve("}")):A()}Ra&&(typeof mn!="number"||mn>=0)?typeof mn=="string"?(Ve("if(",mn,">0){"),ti(),Ve("}else if(",mn,"<0){"),ii(),Ve("}")):ti():ii()}function js(Ue,Xe,Ve,ct,Ct){var Bt=Bs(),kt=Bt.proc("body",Ct);return W.optional(function(){Bt.commandStr=Xe.commandStr,Bt.command=Bt.link(Xe.commandStr)}),Ra&&(Bt.instancing=kt.def(Bt.shared.extensions,".angle_instanced_arrays")),Ue(Bt,kt,Ve,ct),Bt.compile().body}function Pu(Ue,Xe,Ve,ct){pc(Ue,Xe),Ve.useVAO?Ve.drawVAO?Xe(Ue.shared.vao,".setVAO(",Ve.drawVAO.append(Ue,Xe),");"):Xe(Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"):(Xe(Ue.shared.vao,".setVAO(null);"),wf(Ue,Xe,Ve,ct.attributes,function(){return!0})),Uu(Ue,Xe,Ve,ct.uniforms,function(){return!0},!1),qf(Ue,Xe,Xe,Ve)}function Ru(Ue,Xe){var Ve=Ue.proc("draw",1);pc(Ue,Ve),wl(Ue,Ve,Xe.context),rf(Ue,Ve,Xe.framebuffer),mf(Ue,Ve,Xe),lh(Ue,Ve,Xe.state),fu(Ue,Ve,Xe,!1,!0);var ct=Xe.shader.progVar.append(Ue,Ve);if(Ve(Ue.shared.gl,".useProgram(",ct,".program);"),Xe.shader.program)Pu(Ue,Ve,Xe,Xe.shader.program);else{Ve(Ue.shared.vao,".setVAO(null);");var Ct=Ue.global.def("{}"),Bt=Ve.def(ct,".id"),kt=Ve.def(Ct,"[",Bt,"]");Ve(Ue.cond(kt).then(kt,".call(this,a0);").else(kt,"=",Ct,"[",Bt,"]=",Ue.link(function(Jt){return js(Pu,Ue,Xe,Jt,1)}),"(",ct,");",kt,".call(this,a0);"))}Object.keys(Xe.state).length>0&&Ve(Ue.shared.current,".dirty=true;"),Ue.shared.vao&&Ve(Ue.shared.vao,".setVAO(null);")}function nf(Ue,Xe,Ve,ct){Ue.batchId="a1",pc(Ue,Xe);function Ct(){return!0}wf(Ue,Xe,Ve,ct.attributes,Ct),Uu(Ue,Xe,Ve,ct.uniforms,Ct,!1),qf(Ue,Xe,Xe,Ve)}function pd(Ue,Xe,Ve,ct){pc(Ue,Xe);var Ct=Ve.contextDep,Bt=Xe.def(),kt="a0",Jt="a1",Ft=Xe.def();Ue.shared.props=Ft,Ue.batchId=Bt;var rr=Ue.scope(),Xt=Ue.scope();Xe(rr.entry,"for(",Bt,"=0;",Bt,"<",Jt,";++",Bt,"){",Ft,"=",kt,"[",Bt,"];",Xt,"}",rr.exit);function pr(Pn){return Pn.contextDep&&Ct||Pn.propDep}function yr(Pn){return!pr(Pn)}if(Ve.needsContext&&wl(Ue,Xt,Ve.context),Ve.needsFramebuffer&&rf(Ue,Xt,Ve.framebuffer),lh(Ue,Xt,Ve.state,pr),Ve.profile&&pr(Ve.profile)&&fu(Ue,Xt,Ve,!1,!0),ct)Ve.useVAO?Ve.drawVAO?pr(Ve.drawVAO)?Xt(Ue.shared.vao,".setVAO(",Ve.drawVAO.append(Ue,Xt),");"):rr(Ue.shared.vao,".setVAO(",Ve.drawVAO.append(Ue,rr),");"):rr(Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"):(rr(Ue.shared.vao,".setVAO(null);"),wf(Ue,rr,Ve,ct.attributes,yr),wf(Ue,Xt,Ve,ct.attributes,pr)),Uu(Ue,rr,Ve,ct.uniforms,yr,!1),Uu(Ue,Xt,Ve,ct.uniforms,pr,!0),qf(Ue,rr,Xt,Ve);else{var Ur=Ue.global.def("{}"),xn=Ve.shader.progVar.append(Ue,Xt),mn=Xt.def(xn,".id"),Mn=Xt.def(Ur,"[",mn,"]");Xt(Ue.shared.gl,".useProgram(",xn,".program);","if(!",Mn,"){",Mn,"=",Ur,"[",mn,"]=",Ue.link(function(Pn){return js(nf,Ue,Ve,Pn,2)}),"(",xn,");}",Mn,".call(this,a0[",Bt,"],",Bt,");")}}function w(Ue,Xe){var Ve=Ue.proc("batch",2);Ue.batchId="0",pc(Ue,Ve);var ct=!1,Ct=!0;Object.keys(Xe.context).forEach(function(Ur){ct=ct||Xe.context[Ur].propDep}),ct||(wl(Ue,Ve,Xe.context),Ct=!1);var Bt=Xe.framebuffer,kt=!1;Bt?(Bt.propDep?ct=kt=!0:Bt.contextDep&&ct&&(kt=!0),kt||rf(Ue,Ve,Bt)):rf(Ue,Ve,null),Xe.state.viewport&&Xe.state.viewport.propDep&&(ct=!0);function Jt(Ur){return Ur.contextDep&&ct||Ur.propDep}mf(Ue,Ve,Xe),lh(Ue,Ve,Xe.state,function(Ur){return!Jt(Ur)}),(!Xe.profile||!Jt(Xe.profile))&&fu(Ue,Ve,Xe,!1,"a1"),Xe.contextDep=ct,Xe.needsContext=Ct,Xe.needsFramebuffer=kt;var Ft=Xe.shader.progVar;if(Ft.contextDep&&ct||Ft.propDep)pd(Ue,Ve,Xe,null);else{var rr=Ft.append(Ue,Ve);if(Ve(Ue.shared.gl,".useProgram(",rr,".program);"),Xe.shader.program)pd(Ue,Ve,Xe,Xe.shader.program);else{Ve(Ue.shared.vao,".setVAO(null);");var Xt=Ue.global.def("{}"),pr=Ve.def(rr,".id"),yr=Ve.def(Xt,"[",pr,"]");Ve(Ue.cond(yr).then(yr,".call(this,a0,a1);").else(yr,"=",Xt,"[",pr,"]=",Ue.link(function(Ur){return js(pd,Ue,Xe,Ur,2)}),"(",rr,");",yr,".call(this,a0,a1);"))}}Object.keys(Xe.state).length>0&&Ve(Ue.shared.current,".dirty=true;"),Ue.shared.vao&&Ve(Ue.shared.vao,".setVAO(null);")}function V(Ue,Xe){var Ve=Ue.proc("scope",3);Ue.batchId="a2";var ct=Ue.shared,Ct=ct.current;wl(Ue,Ve,Xe.context),Xe.framebuffer&&Xe.framebuffer.append(Ue,Ve),Hd(Object.keys(Xe.state)).forEach(function(kt){var Jt=Xe.state[kt],Ft=Jt.append(Ue,Ve);Xs(Ft)?Ft.forEach(function(rr,Xt){Ve.set(Ue.next[kt],"["+Xt+"]",rr)}):Ve.set(ct.next,"."+kt,Ft)}),fu(Ue,Ve,Xe,!0,!0),[Mt,ar,Vt,Xr,St].forEach(function(kt){var Jt=Xe.draw[kt];Jt&&Ve.set(ct.draw,"."+kt,""+Jt.append(Ue,Ve))}),Object.keys(Xe.uniforms).forEach(function(kt){var Jt=Xe.uniforms[kt].append(Ue,Ve);Array.isArray(Jt)&&(Jt="["+Jt.join()+"]"),Ve.set(ct.uniforms,"["+Zr.id(kt)+"]",Jt)}),Object.keys(Xe.attributes).forEach(function(kt){var Jt=Xe.attributes[kt].append(Ue,Ve),Ft=Ue.scopeAttrib(kt);Object.keys(new si).forEach(function(rr){Ve.set(Ft,"."+rr,Jt[rr])})}),Xe.scopeVAO&&Ve.set(ct.vao,".targetVAO",Xe.scopeVAO.append(Ue,Ve));function Bt(kt){var Jt=Xe.shader[kt];Jt&&Ve.set(ct.shader,"."+kt,Jt.append(Ue,Ve))}Bt(ue),Bt(Rr),Object.keys(Xe.state).length>0&&(Ve(Ct,".dirty=true;"),Ve.exit(Ct,".dirty=true;")),Ve("a1(",Ue.shared.context,",a0,",Ue.batchId,");")}function Ie(Ue){if(!(typeof Ue!="object"||Xs(Ue))){for(var Xe=Object.keys(Ue),Ve=0;Ve<Xe.length;++Ve)if(Tr.isDynamic(Ue[Xe[Ve]]))return!0;return!1}}function se(Ue,Xe,Ve){var ct=Xe.static[Ve];if(!ct||!Ie(ct))return;var Ct=Ue.global,Bt=Object.keys(ct),kt=!1,Jt=!1,Ft=!1,rr=Ue.global.def("{}");Bt.forEach(function(pr){var yr=ct[pr];if(Tr.isDynamic(yr)){typeof yr=="function"&&(yr=ct[pr]=Tr.unbox(yr));var Ur=Nh(yr,null);kt=kt||Ur.thisDep,Ft=Ft||Ur.propDep,Jt=Jt||Ur.contextDep}else{switch(Ct(rr,".",pr,"="),typeof yr){case"number":Ct(yr);break;case"string":Ct('"',yr,'"');break;case"object":Array.isArray(yr)&&Ct("[",yr.join(),"]");break;default:Ct(Ue.link(yr));break}Ct(";")}});function Xt(pr,yr){Bt.forEach(function(Ur){var xn=ct[Ur];if(Tr.isDynamic(xn)){var mn=pr.invoke(yr,xn);yr(rr,".",Ur,"=",mn,";")}})}Xe.dynamic[Ve]=new Tr.DynamicVariable(qu,{thisDep:kt,contextDep:Jt,propDep:Ft,ref:rr,append:Xt}),delete Xe.static[Ve]}function st(Ue,Xe,Ve,ct,Ct){var Bt=Bs();Bt.stats=Bt.link(Ct),Object.keys(Xe.static).forEach(function(Jt){se(Bt,Xe,Jt)}),lu.forEach(function(Jt){se(Bt,Ue,Jt)});var kt=Ic(Ue,Xe,Ve,ct,Bt);return Ru(Bt,kt),V(Bt,kt),w(Bt,kt),c(Bt.compile(),{destroy:function(){kt.shader.program.destroy()}})}return{next:xo,current:Ga,procs:function(){var Ue=Bs(),Xe=Ue.proc("poll"),Ve=Ue.proc("refresh"),ct=Ue.block();Xe(ct),Ve(ct);var Ct=Ue.shared,Bt=Ct.gl,kt=Ct.next,Jt=Ct.current;ct(Jt,".dirty=false;"),rf(Ue,Xe),rf(Ue,Ve,null,!0);var Ft;Ra&&(Ft=Ue.link(Ra)),On.oes_vertex_array_object&&Ve(Ue.link(On.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var rr=0;rr<wi.maxAttributes;++rr){var Xt=Ve.def(Ct.attributes,"[",rr,"]"),pr=Ue.cond(Xt,".buffer");pr.then(Bt,".enableVertexAttribArray(",rr,");",Bt,".bindBuffer(",Iu,",",Xt,".buffer.buffer);",Bt,".vertexAttribPointer(",rr,",",Xt,".size,",Xt,".type,",Xt,".normalized,",Xt,".stride,",Xt,".offset);").else(Bt,".disableVertexAttribArray(",rr,");",Bt,".vertexAttrib4f(",rr,",",Xt,".x,",Xt,".y,",Xt,".z,",Xt,".w);",Xt,".buffer=null;"),Ve(pr),Ra&&Ve(Ft,".vertexAttribDivisorANGLE(",rr,",",Xt,".divisor);")}return Ve(Ue.shared.vao,".currentVAO=null;",Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"),Object.keys(Qi).forEach(function(yr){var Ur=Qi[yr],xn=ct.def(kt,".",yr),mn=Ue.block();mn("if(",xn,"){",Bt,".enable(",Ur,")}else{",Bt,".disable(",Ur,")}",Jt,".",yr,"=",xn,";"),Ve(mn),Xe("if(",xn,"!==",Jt,".",yr,"){",mn,"}")}),Object.keys(oa).forEach(function(yr){var Ur=oa[yr],xn=Ga[yr],mn,Mn,Pn=Ue.block();if(Pn(Bt,".",Ur,"("),Xs(xn)){var Gn=xn.length;mn=Ue.global.def(kt,".",yr),Mn=Ue.global.def(Jt,".",yr),Pn(Hr(Gn,function(ti){return mn+"["+ti+"]"}),");",Hr(Gn,function(ti){return Mn+"["+ti+"]="+mn+"["+ti+"];"}).join("")),Xe("if(",Hr(Gn,function(ti){return mn+"["+ti+"]!=="+Mn+"["+ti+"]"}).join("||"),"){",Pn,"}")}else mn=ct.def(kt,".",yr),Mn=ct.def(Jt,".",yr),Pn(mn,");",Jt,".",yr,"=",mn,";"),Xe("if(",mn,"!==",Mn,"){",Pn,"}");Ve(Pn)}),Ue.compile()}(),compile:st}}function pp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var vp=34918,mp=34919,wd=35007,ld=function(Ht,Zr){if(!Zr.ext_disjoint_timer_query)return null;var On=[];function wi(){return On.pop()||Zr.ext_disjoint_timer_query.createQueryEXT()}function ia(Ra){On.push(Ra)}var Ai=[];function ji(Ra){var Ya=wi();Zr.ext_disjoint_timer_query.beginQueryEXT(wd,Ya),Ai.push(Ya),ya(Ai.length-1,Ai.length,Ra)}function Ea(){Zr.ext_disjoint_timer_query.endQueryEXT(wd)}function Ma(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ia=[];function Za(){return Ia.pop()||new Ma}function Ha(Ra){Ia.push(Ra)}var $a=[];function ya(Ra,Ya,_a){var Ga=Za();Ga.startQueryIndex=Ra,Ga.endQueryIndex=Ya,Ga.sum=0,Ga.stats=_a,$a.push(Ga)}var Ua=[],si=[];function Ni(){var Ra,Ya,_a=Ai.length;if(_a!==0){si.length=Math.max(si.length,_a+1),Ua.length=Math.max(Ua.length,_a+1),Ua[0]=0,si[0]=0;var Ga=0;for(Ra=0,Ya=0;Ya<Ai.length;++Ya){var xo=Ai[Ya];Zr.ext_disjoint_timer_query.getQueryObjectEXT(xo,mp)?(Ga+=Zr.ext_disjoint_timer_query.getQueryObjectEXT(xo,vp),ia(xo)):Ai[Ra++]=xo,Ua[Ya+1]=Ga,si[Ya+1]=Ra}for(Ai.length=Ra,Ra=0,Ya=0;Ya<$a.length;++Ya){var xs=$a[Ya],Qi=xs.startQueryIndex,oa=xs.endQueryIndex;xs.sum+=Ua[oa]-Ua[Qi];var Zo=si[Qi],fo=si[oa];fo===Zo?(xs.stats.gpuTime+=xs.sum/1e6,Ha(xs)):(xs.startQueryIndex=Zo,xs.endQueryIndex=fo,$a[Ra++]=xs)}$a.length=Ra}}return{beginQuery:ji,endQuery:Ea,pushScopeStats:ya,update:Ni,getNumPendingQueries:function(){return Ai.length},clear:function(){On.push.apply(On,Ai);for(var Ra=0;Ra<On.length;Ra++)Zr.ext_disjoint_timer_query.deleteQueryEXT(On[Ra]);Ai.length=0,On.length=0},restore:function(){Ai.length=0,On.length=0}}},gp=16384,Ah=256,kd=1024,xd=34962,Cd="webglcontextlost",vl="webglcontextrestored",Dd=1,Fs=2,cd=3;function Vd(Ht,Zr){for(var On=0;On<Ht.length;++On)if(Ht[On]===Zr)return On;return-1}function Gd(Ht){var Zr=dr(Ht);if(!Zr)return null;var On=Zr.gl,wi=On.getContextAttributes(),ia=On.isContextLost(),Ai=_r(On,Zr);if(!Ai)return null;var ji=Cr(),Ea=pp(),Ma=Ai.extensions,Ia=ld(On,Ma),Za=Zn(),Ha=On.drawingBufferWidth,$a=On.drawingBufferHeight,ya={tick:0,time:0,viewportWidth:Ha,viewportHeight:$a,framebufferWidth:Ha,framebufferHeight:$a,drawingBufferWidth:Ha,drawingBufferHeight:$a,pixelRatio:Zr.pixelRatio},Ua={},si={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ni=As(On,Ma),Ra=At(On,Ea,Zr,Ga),Ya=Va(On,Ma,Ra,Ea),_a=di(On,Ma,Ni,Ea,Ra,Ya,si);function Ga(js){return _a.destroyBuffer(js)}var xo=Da(On,ji,Ea,Zr),xs=Ql(On,Ma,Ni,function(){Zo.procs.poll()},ya,Ea,Zr),Qi=ph(On,Ma,Ni,Ea,Zr),oa=yn(On,Ma,Ni,xs,Qi,Ea),Zo=_d(On,ji,Ma,Ni,Ra,Ya,xs,oa,Ua,_a,xo,si,ya,Ia,Zr),fo=rs(On,oa,Zo.procs.poll,ya,wi,Ma,Ni),Pa=Zo.next,to=On.canvas,Oa=[],Os=[],Bs=[],so=[Zr.onDestroy],yo=null;function hs(){if(Oa.length===0){Ia&&Ia.update(),yo=null;return}yo=pn.next(hs),pc();for(var js=Oa.length-1;js>=0;--js){var Pu=Oa[js];Pu&&Pu(ya,null,0)}On.flush(),Ia&&Ia.update()}function zs(){!yo&&Oa.length>0&&(yo=pn.next(hs))}function Cu(){yo&&(pn.cancel(hs),yo=null)}function Gu(js){js.preventDefault(),ia=!0,Cu(),Os.forEach(function(Pu){Pu()})}function Bl(js){On.getError(),ia=!1,Ai.restore(),xo.restore(),Ra.restore(),xs.restore(),Qi.restore(),oa.restore(),_a.restore(),Ia&&Ia.restore(),Zo.procs.refresh(),zs(),Bs.forEach(function(Pu){Pu()})}var Au=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!Au&&to&&(to.addEventListener(Cd,Gu,!1),to.addEventListener(vl,Bl,!1));function Sf(){Oa.length=0,Cu(),!Au&&to&&(to.removeEventListener(Cd,Gu),to.removeEventListener(vl,Bl)),xo.clear(),oa.clear(),Qi.clear(),_a.clear(),xs.clear(),Ya.clear(),Ra.clear(),Ia&&Ia.clear(),so.forEach(function(js){js()})}function Xl(js){W(!!js,"invalid args to regl({...})"),W.type(js,"object","invalid args to regl({...})");function Pu(Bt){var kt=c({},Bt);delete kt.uniforms,delete kt.attributes,delete kt.context,delete kt.vao,"stencil"in kt&&kt.stencil.op&&(kt.stencil.opBack=kt.stencil.opFront=kt.stencil.op,delete kt.stencil.op);function Jt(Ft){if(Ft in kt){var rr=kt[Ft];delete kt[Ft],Object.keys(rr).forEach(function(Xt){kt[Ft+"."+Xt]=rr[Xt]})}}return Jt("blend"),Jt("depth"),Jt("cull"),Jt("stencil"),Jt("polygonOffset"),Jt("scissor"),Jt("sample"),"vao"in Bt&&(kt.vao=Bt.vao),kt}function Ru(Bt,kt){var Jt={},Ft={};return Object.keys(Bt).forEach(function(rr){var Xt=Bt[rr];if(Tr.isDynamic(Xt)){Ft[rr]=Tr.unbox(Xt,rr);return}else if(kt&&Array.isArray(Xt)){for(var pr=0;pr<Xt.length;++pr)if(Tr.isDynamic(Xt[pr])){Ft[rr]=Tr.unbox(Xt,rr);return}}Jt[rr]=Xt}),{dynamic:Ft,static:Jt}}var nf=Ru(js.context||{},!0),pd=Ru(js.uniforms||{},!0),w=Ru(js.attributes||{},!1),V=Ru(Pu(js),!1),Ie={gpuTime:0,cpuTime:0,count:0},se=Zo.compile(V,w,pd,nf,Ie),st=se.draw,Ue=se.batch,Xe=se.scope,Ve=[];function ct(Bt){for(;Ve.length<Bt;)Ve.push(null);return Ve}function Ct(Bt,kt){var Jt;if(ia&&W.raise("context lost"),typeof Bt=="function")return Xe.call(this,null,Bt,0);if(typeof kt=="function")if(typeof Bt=="number")for(Jt=0;Jt<Bt;++Jt)Xe.call(this,null,kt,Jt);else if(Array.isArray(Bt))for(Jt=0;Jt<Bt.length;++Jt)Xe.call(this,Bt[Jt],kt,Jt);else return Xe.call(this,Bt,kt,0);else if(typeof Bt=="number"){if(Bt>0)return Ue.call(this,ct(Bt|0),Bt|0)}else if(Array.isArray(Bt)){if(Bt.length)return Ue.call(this,Bt,Bt.length)}else return st.call(this,Bt)}return c(Ct,{stats:Ie,destroy:function(){se.destroy()}})}var Ic=oa.setFBO=Xl({framebuffer:Tr.define.call(null,Dd,"framebuffer")});function wl(js,Pu){var Ru=0;Zo.procs.poll();var nf=Pu.color;nf&&(On.clearColor(+nf[0]||0,+nf[1]||0,+nf[2]||0,+nf[3]||0),Ru|=gp),"depth"in Pu&&(On.clearDepth(+Pu.depth),Ru|=Ah),"stencil"in Pu&&(On.clearStencil(Pu.stencil|0),Ru|=kd),W(!!Ru,"called regl.clear with no buffer specified"),On.clear(Ru)}function rf(js){if(W(typeof js=="object"&&js,"regl.clear() takes an object as input"),"framebuffer"in js)if(js.framebuffer&&js.framebuffer_reglType==="framebufferCube")for(var Pu=0;Pu<6;++Pu)Ic(c({framebuffer:js.framebuffer.faces[Pu]},js),wl);else Ic(js,wl);else wl(null,js)}function mf(js){W.type(js,"function","regl.frame() callback must be a function"),Oa.push(js);function Pu(){var Ru=Vd(Oa,js);W(Ru>=0,"cannot cancel a frame twice");function nf(){var pd=Vd(Oa,nf);Oa[pd]=Oa[Oa.length-1],Oa.length-=1,Oa.length<=0&&Cu()}Oa[Ru]=nf}return zs(),{cancel:Pu}}function lh(){var js=Pa.viewport,Pu=Pa.scissor_box;js[0]=js[1]=Pu[0]=Pu[1]=0,ya.viewportWidth=ya.framebufferWidth=ya.drawingBufferWidth=js[2]=Pu[2]=On.drawingBufferWidth,ya.viewportHeight=ya.framebufferHeight=ya.drawingBufferHeight=js[3]=Pu[3]=On.drawingBufferHeight}function pc(){ya.tick+=1,ya.time=wf(),lh(),Zo.procs.poll()}function fu(){xs.refresh(),lh(),Zo.procs.refresh(),Ia&&Ia.update()}function wf(){return(Zn()-Za)/1e3}fu();function Uu(js,Pu){W.type(Pu,"function","listener callback must be a function");var Ru;switch(js){case"frame":return mf(Pu);case"lost":Ru=Os;break;case"restore":Ru=Bs;break;case"destroy":Ru=so;break;default:W.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ru.push(Pu),{cancel:function(){for(var nf=0;nf<Ru.length;++nf)if(Ru[nf]===Pu){Ru[nf]=Ru[Ru.length-1],Ru.pop();return}}}}var qf=c(Xl,{clear:rf,prop:Tr.define.bind(null,Dd),context:Tr.define.bind(null,Fs),this:Tr.define.bind(null,cd),draw:Xl({}),buffer:function(js){return Ra.create(js,xd,!1,!1)},elements:function(js){return Ya.create(js,!1)},texture:xs.create2D,cube:xs.createCube,renderbuffer:Qi.create,framebuffer:oa.create,framebufferCube:oa.createCube,vao:_a.createVAO,attributes:wi,frame:mf,on:Uu,limits:Ni,hasExtension:function(js){return Ni.extensions.indexOf(js.toLowerCase())>=0},read:fo,destroy:Sf,_gl:On,_refresh:fu,poll:function(){pc(),Ia&&Ia.update()},now:wf,stats:Ea});return Zr.onDone(null,qf),qf}return Gd})},18552:function(vt,Ee,g){var v=g(10852),M=g(55639),c=v(M,"DataView");vt.exports=c},1989:function(vt,Ee,g){var v=g(51789),M=g(80401),c=g(57667),K=g(21327),N=g(81866);function Z(B){var L=-1,$=B==null?0:B.length;for(this.clear();++L<$;){var U=B[L];this.set(U[0],U[1])}}Z.prototype.clear=v,Z.prototype.delete=M,Z.prototype.get=c,Z.prototype.has=K,Z.prototype.set=N,vt.exports=Z},38407:function(vt,Ee,g){var v=g(27040),M=g(14125),c=g(82117),K=g(67518),N=g(13399);function Z(B){var L=-1,$=B==null?0:B.length;for(this.clear();++L<$;){var U=B[L];this.set(U[0],U[1])}}Z.prototype.clear=v,Z.prototype.delete=M,Z.prototype.get=c,Z.prototype.has=K,Z.prototype.set=N,vt.exports=Z},57071:function(vt,Ee,g){var v=g(10852),M=g(55639),c=v(M,"Map");vt.exports=c},83369:function(vt,Ee,g){var v=g(24785),M=g(11285),c=g(96e3),K=g(49916),N=g(95265);function Z(B){var L=-1,$=B==null?0:B.length;for(this.clear();++L<$;){var U=B[L];this.set(U[0],U[1])}}Z.prototype.clear=v,Z.prototype.delete=M,Z.prototype.get=c,Z.prototype.has=K,Z.prototype.set=N,vt.exports=Z},53818:function(vt,Ee,g){var v=g(10852),M=g(55639),c=v(M,"Promise");vt.exports=c},58525:function(vt,Ee,g){var v=g(10852),M=g(55639),c=v(M,"Set");vt.exports=c},88668:function(vt,Ee,g){var v=g(83369),M=g(90619),c=g(72385);function K(N){var Z=-1,B=N==null?0:N.length;for(this.__data__=new v;++Z<B;)this.add(N[Z])}K.prototype.add=K.prototype.push=M,K.prototype.has=c,vt.exports=K},46384:function(vt,Ee,g){var v=g(38407),M=g(37465),c=g(63779),K=g(67599),N=g(44758),Z=g(34309);function B(L){var $=this.__data__=new v(L);this.size=$.size}B.prototype.clear=M,B.prototype.delete=c,B.prototype.get=K,B.prototype.has=N,B.prototype.set=Z,vt.exports=B},62705:function(vt,Ee,g){var v=g(55639),M=v.Symbol;vt.exports=M},11149:function(vt,Ee,g){var v=g(55639),M=v.Uint8Array;vt.exports=M},70577:function(vt,Ee,g){var v=g(10852),M=g(55639),c=v(M,"WeakMap");vt.exports=c},96874:function(vt){function Ee(g,v,M){switch(M.length){case 0:return g.call(v);case 1:return g.call(v,M[0]);case 2:return g.call(v,M[0],M[1]);case 3:return g.call(v,M[0],M[1],M[2])}return g.apply(v,M)}vt.exports=Ee},34963:function(vt){function Ee(g,v){for(var M=-1,c=g==null?0:g.length,K=0,N=[];++M<c;){var Z=g[M];v(Z,M,g)&&(N[K++]=Z)}return N}vt.exports=Ee},14636:function(vt,Ee,g){var v=g(22545),M=g(35694),c=g(1469),K=g(44144),N=g(65776),Z=g(36719),B=Object.prototype,L=B.hasOwnProperty;function $(U,ke){var We=c(U),me=!We&&M(U),Le=!We&&!me&&K(U),Se=!We&&!me&&!Le&&Z(U),et=We||me||Le||Se,at=et?v(U.length,String):[],Lt=at.length;for(var Et in U)(ke||L.call(U,Et))&&!(et&&(Et=="length"||Le&&(Et=="offset"||Et=="parent")||Se&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||N(Et,Lt)))&&at.push(Et);return at}vt.exports=$},62488:function(vt){function Ee(g,v){for(var M=-1,c=v.length,K=g.length;++M<c;)g[K+M]=v[M];return g}vt.exports=Ee},82908:function(vt){function Ee(g,v){for(var M=-1,c=g==null?0:g.length;++M<c;)if(v(g[M],M,g))return!0;return!1}vt.exports=Ee},86556:function(vt,Ee,g){var v=g(89465),M=g(77813);function c(K,N,Z){(Z!==void 0&&!M(K[N],Z)||Z===void 0&&!(N in K))&&v(K,N,Z)}vt.exports=c},34865:function(vt,Ee,g){var v=g(89465),M=g(77813),c=Object.prototype,K=c.hasOwnProperty;function N(Z,B,L){var $=Z[B];(!(K.call(Z,B)&&M($,L))||L===void 0&&!(B in Z))&&v(Z,B,L)}vt.exports=N},18470:function(vt,Ee,g){var v=g(77813);function M(c,K){for(var N=c.length;N--;)if(v(c[N][0],K))return N;return-1}vt.exports=M},89465:function(vt,Ee,g){var v=g(38777);function M(c,K,N){K=="__proto__"&&v?v(c,K,{configurable:!0,enumerable:!0,value:N,writable:!0}):c[K]=N}vt.exports=M},3118:function(vt,Ee,g){var v=g(13218),M=Object.create,c=function(){function K(){}return function(N){if(!v(N))return{};if(M)return M(N);K.prototype=N;var Z=new K;return K.prototype=void 0,Z}}();vt.exports=c},28483:function(vt,Ee,g){var v=g(25063),M=v();vt.exports=M},68866:function(vt,Ee,g){var v=g(62488),M=g(1469);function c(K,N,Z){var B=N(K);return M(K)?B:v(B,Z(K))}vt.exports=c},44239:function(vt,Ee,g){var v=g(62705),M=g(89607),c=g(2333),K="[object Null]",N="[object Undefined]",Z=v?v.toStringTag:void 0;function B(L){return L==null?L===void 0?N:K:Z&&Z in Object(L)?M(L):c(L)}vt.exports=B},9454:function(vt,Ee,g){var v=g(44239),M=g(37005),c="[object Arguments]";function K(N){return M(N)&&v(N)==c}vt.exports=K},90939:function(vt,Ee,g){var v=g(2492),M=g(37005);function c(K,N,Z,B,L){return K===N?!0:K==null||N==null||!M(K)&&!M(N)?K!==K&&N!==N:v(K,N,Z,B,c,L)}vt.exports=c},2492:function(vt,Ee,g){var v=g(46384),M=g(67114),c=g(18351),K=g(16096),N=g(64160),Z=g(1469),B=g(44144),L=g(36719),$=1,U="[object Arguments]",ke="[object Array]",We="[object Object]",me=Object.prototype,Le=me.hasOwnProperty;function Se(et,at,Lt,Et,jt,pe){var $e=Z(et),ye=Z(at),ie=$e?ke:N(et),re=ye?ke:N(at);ie=ie==U?We:ie,re=re==U?We:re;var De=ie==We,le=re==We,ge=ie==re;if(ge&&B(et)){if(!B(at))return!1;$e=!0,De=!1}if(ge&&!De)return pe||(pe=new v),$e||L(et)?M(et,at,Lt,Et,jt,pe):c(et,at,ie,Lt,Et,jt,pe);if(!(Lt&$)){var ce=De&&Le.call(et,"__wrapped__"),je=le&&Le.call(at,"__wrapped__");if(ce||je){var J=ce?et.value():et,Me=je?at.value():at;return pe||(pe=new v),jt(J,Me,Lt,Et,pe)}}return ge?(pe||(pe=new v),K(et,at,Lt,Et,jt,pe)):!1}vt.exports=Se},28458:function(vt,Ee,g){var v=g(23560),M=g(15346),c=g(13218),K=g(80346),N=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,B=Function.prototype,L=Object.prototype,$=B.toString,U=L.hasOwnProperty,ke=RegExp("^"+$.call(U).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function We(me){if(!c(me)||M(me))return!1;var Le=v(me)?ke:Z;return Le.test(K(me))}vt.exports=We},38749:function(vt,Ee,g){var v=g(44239),M=g(41780),c=g(37005),K="[object Arguments]",N="[object Array]",Z="[object Boolean]",B="[object Date]",L="[object Error]",$="[object Function]",U="[object Map]",ke="[object Number]",We="[object Object]",me="[object RegExp]",Le="[object Set]",Se="[object String]",et="[object WeakMap]",at="[object ArrayBuffer]",Lt="[object DataView]",Et="[object Float32Array]",jt="[object Float64Array]",pe="[object Int8Array]",$e="[object Int16Array]",ye="[object Int32Array]",ie="[object Uint8Array]",re="[object Uint8ClampedArray]",De="[object Uint16Array]",le="[object Uint32Array]",ge={};ge[Et]=ge[jt]=ge[pe]=ge[$e]=ge[ye]=ge[ie]=ge[re]=ge[De]=ge[le]=!0,ge[K]=ge[N]=ge[at]=ge[Z]=ge[Lt]=ge[B]=ge[L]=ge[$]=ge[U]=ge[ke]=ge[We]=ge[me]=ge[Le]=ge[Se]=ge[et]=!1;function ce(je){return c(je)&&M(je.length)&&!!ge[v(je)]}vt.exports=ce},280:function(vt,Ee,g){var v=g(25726),M=g(86916),c=Object.prototype,K=c.hasOwnProperty;function N(Z){if(!v(Z))return M(Z);var B=[];for(var L in Object(Z))K.call(Z,L)&&L!="constructor"&&B.push(L);return B}vt.exports=N},35014:function(vt,Ee,g){var v=g(13218),M=g(25726),c=g(33498),K=Object.prototype,N=K.hasOwnProperty;function Z(B){if(!v(B))return c(B);var L=M(B),$=[];for(var U in B)U=="constructor"&&(L||!N.call(B,U))||$.push(U);return $}vt.exports=Z},42980:function(vt,Ee,g){var v=g(46384),M=g(86556),c=g(28483),K=g(59783),N=g(13218),Z=g(81704),B=g(36390);function L($,U,ke,We,me){$!==U&&c(U,function(Le,Se){if(me||(me=new v),N(Le))K($,U,Se,ke,L,We,me);else{var et=We?We(B($,Se),Le,Se+"",$,U,me):void 0;et===void 0&&(et=Le),M($,Se,et)}},Z)}vt.exports=L},59783:function(vt,Ee,g){var v=g(86556),M=g(64626),c=g(77133),K=g(278),N=g(38517),Z=g(35694),B=g(1469),L=g(29246),$=g(44144),U=g(23560),ke=g(13218),We=g(68630),me=g(36719),Le=g(36390),Se=g(59881);function et(at,Lt,Et,jt,pe,$e,ye){var ie=Le(at,Et),re=Le(Lt,Et),De=ye.get(re);if(De){v(at,Et,De);return}var le=$e?$e(ie,re,Et+"",at,Lt,ye):void 0,ge=le===void 0;if(ge){var ce=B(re),je=!ce&&$(re),J=!ce&&!je&&me(re);le=re,ce||je||J?B(ie)?le=ie:L(ie)?le=K(ie):je?(ge=!1,le=M(re,!0)):J?(ge=!1,le=c(re,!0)):le=[]:We(re)||Z(re)?(le=ie,Z(ie)?le=Se(ie):(!ke(ie)||U(ie))&&(le=N(re))):ge=!1}ge&&(ye.set(re,le),pe(le,re,jt,$e,ye),ye.delete(re)),v(at,Et,le)}vt.exports=et},5976:function(vt,Ee,g){var v=g(6557),M=g(45357),c=g(30061);function K(N,Z){return c(M(N,Z,v),N+"")}vt.exports=K},56560:function(vt,Ee,g){var v=g(75703),M=g(38777),c=g(6557),K=M?function(N,Z){return M(N,"toString",{configurable:!0,enumerable:!1,value:v(Z),writable:!0})}:c;vt.exports=K},22545:function(vt){function Ee(g,v){for(var M=-1,c=Array(g);++M<g;)c[M]=v(M);return c}vt.exports=Ee},4107:function(vt,Ee,g){var v=g(67990),M=/^\s+/;function c(K){return K&&K.slice(0,v(K)+1).replace(M,"")}vt.exports=c},7518:function(vt){function Ee(g){return function(v){return g(v)}}vt.exports=Ee},74757:function(vt){function Ee(g,v){return g.has(v)}vt.exports=Ee},74318:function(vt,Ee,g){var v=g(11149);function M(c){var K=new c.constructor(c.byteLength);return new v(K).set(new v(c)),K}vt.exports=M},64626:function(vt,Ee,g){vt=g.nmd(vt);var v=g(55639),M=Ee&&!Ee.nodeType&&Ee,c=M&&!0&&vt&&!vt.nodeType&&vt,K=c&&c.exports===M,N=K?v.Buffer:void 0,Z=N?N.allocUnsafe:void 0;function B(L,$){if($)return L.slice();var U=L.length,ke=Z?Z(U):new L.constructor(U);return L.copy(ke),ke}vt.exports=B},77133:function(vt,Ee,g){var v=g(74318);function M(c,K){var N=K?v(c.buffer):c.buffer;return new c.constructor(N,c.byteOffset,c.length)}vt.exports=M},278:function(vt){function Ee(g,v){var M=-1,c=g.length;for(v||(v=Array(c));++M<c;)v[M]=g[M];return v}vt.exports=Ee},98363:function(vt,Ee,g){var v=g(34865),M=g(89465);function c(K,N,Z,B){var L=!Z;Z||(Z={});for(var $=-1,U=N.length;++$<U;){var ke=N[$],We=B?B(Z[ke],K[ke],ke,Z,K):void 0;We===void 0&&(We=K[ke]),L?M(Z,ke,We):v(Z,ke,We)}return Z}vt.exports=c},14429:function(vt,Ee,g){var v=g(55639),M=v["__core-js_shared__"];vt.exports=M},21463:function(vt,Ee,g){var v=g(5976),M=g(16612);function c(K){return v(function(N,Z){var B=-1,L=Z.length,$=L>1?Z[L-1]:void 0,U=L>2?Z[2]:void 0;for($=K.length>3&&typeof $=="function"?(L--,$):void 0,U&&M(Z[0],Z[1],U)&&($=L<3?void 0:$,L=1),N=Object(N);++B<L;){var ke=Z[B];ke&&K(N,ke,B,$)}return N})}vt.exports=c},25063:function(vt){function Ee(g){return function(v,M,c){for(var K=-1,N=Object(v),Z=c(v),B=Z.length;B--;){var L=Z[g?B:++K];if(M(N[L],L,N)===!1)break}return v}}vt.exports=Ee},38777:function(vt,Ee,g){var v=g(10852),M=function(){try{var c=v(Object,"defineProperty");return c({},"",{}),c}catch(K){}}();vt.exports=M},67114:function(vt,Ee,g){var v=g(88668),M=g(82908),c=g(74757),K=1,N=2;function Z(B,L,$,U,ke,We){var me=$&K,Le=B.length,Se=L.length;if(Le!=Se&&!(me&&Se>Le))return!1;var et=We.get(B),at=We.get(L);if(et&&at)return et==L&&at==B;var Lt=-1,Et=!0,jt=$&N?new v:void 0;for(We.set(B,L),We.set(L,B);++Lt<Le;){var pe=B[Lt],$e=L[Lt];if(U)var ye=me?U($e,pe,Lt,L,B,We):U(pe,$e,Lt,B,L,We);if(ye!==void 0){if(ye)continue;Et=!1;break}if(jt){if(!M(L,function(ie,re){if(!c(jt,re)&&(pe===ie||ke(pe,ie,$,U,We)))return jt.push(re)})){Et=!1;break}}else if(!(pe===$e||ke(pe,$e,$,U,We))){Et=!1;break}}return We.delete(B),We.delete(L),Et}vt.exports=Z},18351:function(vt,Ee,g){var v=g(62705),M=g(11149),c=g(77813),K=g(67114),N=g(68776),Z=g(21814),B=1,L=2,$="[object Boolean]",U="[object Date]",ke="[object Error]",We="[object Map]",me="[object Number]",Le="[object RegExp]",Se="[object Set]",et="[object String]",at="[object Symbol]",Lt="[object ArrayBuffer]",Et="[object DataView]",jt=v?v.prototype:void 0,pe=jt?jt.valueOf:void 0;function $e(ye,ie,re,De,le,ge,ce){switch(re){case Et:if(ye.byteLength!=ie.byteLength||ye.byteOffset!=ie.byteOffset)return!1;ye=ye.buffer,ie=ie.buffer;case Lt:return!(ye.byteLength!=ie.byteLength||!ge(new M(ye),new M(ie)));case $:case U:case me:return c(+ye,+ie);case ke:return ye.name==ie.name&&ye.message==ie.message;case Le:case et:return ye==ie+"";case We:var je=N;case Se:var J=De&B;if(je||(je=Z),ye.size!=ie.size&&!J)return!1;var Me=ce.get(ye);if(Me)return Me==ie;De|=L,ce.set(ye,ie);var ne=K(je(ye),je(ie),De,le,ge,ce);return ce.delete(ye),ne;case at:if(pe)return pe.call(ye)==pe.call(ie)}return!1}vt.exports=$e},16096:function(vt,Ee,g){var v=g(58234),M=1,c=Object.prototype,K=c.hasOwnProperty;function N(Z,B,L,$,U,ke){var We=L&M,me=v(Z),Le=me.length,Se=v(B),et=Se.length;if(Le!=et&&!We)return!1;for(var at=Le;at--;){var Lt=me[at];if(!(We?Lt in B:K.call(B,Lt)))return!1}var Et=ke.get(Z),jt=ke.get(B);if(Et&&jt)return Et==B&&jt==Z;var pe=!0;ke.set(Z,B),ke.set(B,Z);for(var $e=We;++at<Le;){Lt=me[at];var ye=Z[Lt],ie=B[Lt];if($)var re=We?$(ie,ye,Lt,B,Z,ke):$(ye,ie,Lt,Z,B,ke);if(!(re===void 0?ye===ie||U(ye,ie,L,$,ke):re)){pe=!1;break}$e||($e=Lt=="constructor")}if(pe&&!$e){var De=Z.constructor,le=B.constructor;De!=le&&"constructor"in Z&&"constructor"in B&&!(typeof De=="function"&&De instanceof De&&typeof le=="function"&&le instanceof le)&&(pe=!1)}return ke.delete(Z),ke.delete(B),pe}vt.exports=N},31957:function(vt,Ee,g){var v=typeof g.g=="object"&&g.g&&g.g.Object===Object&&g.g;vt.exports=v},58234:function(vt,Ee,g){var v=g(68866),M=g(99551),c=g(3674);function K(N){return v(N,c,M)}vt.exports=K},45050:function(vt,Ee,g){var v=g(37019);function M(c,K){var N=c.__data__;return v(K)?N[typeof K=="string"?"string":"hash"]:N.map}vt.exports=M},10852:function(vt,Ee,g){var v=g(28458),M=g(47801);function c(K,N){var Z=M(K,N);return v(Z)?Z:void 0}vt.exports=c},85924:function(vt,Ee,g){var v=g(5569),M=v(Object.getPrototypeOf,Object);vt.exports=M},89607:function(vt,Ee,g){var v=g(62705),M=Object.prototype,c=M.hasOwnProperty,K=M.toString,N=v?v.toStringTag:void 0;function Z(B){var L=c.call(B,N),$=B[N];try{B[N]=void 0;var U=!0}catch(We){}var ke=K.call(B);return U&&(L?B[N]=$:delete B[N]),ke}vt.exports=Z},99551:function(vt,Ee,g){var v=g(34963),M=g(70479),c=Object.prototype,K=c.propertyIsEnumerable,N=Object.getOwnPropertySymbols,Z=N?function(B){return B==null?[]:(B=Object(B),v(N(B),function(L){return K.call(B,L)}))}:M;vt.exports=Z},64160:function(vt,Ee,g){var v=g(18552),M=g(57071),c=g(53818),K=g(58525),N=g(70577),Z=g(44239),B=g(80346),L="[object Map]",$="[object Object]",U="[object Promise]",ke="[object Set]",We="[object WeakMap]",me="[object DataView]",Le=B(v),Se=B(M),et=B(c),at=B(K),Lt=B(N),Et=Z;(v&&Et(new v(new ArrayBuffer(1)))!=me||M&&Et(new M)!=L||c&&Et(c.resolve())!=U||K&&Et(new K)!=ke||N&&Et(new N)!=We)&&(Et=function(jt){var pe=Z(jt),$e=pe==$?jt.constructor:void 0,ye=$e?B($e):"";if(ye)switch(ye){case Le:return me;case Se:return L;case et:return U;case at:return ke;case Lt:return We}return pe}),vt.exports=Et},47801:function(vt){function Ee(g,v){return g==null?void 0:g[v]}vt.exports=Ee},51789:function(vt,Ee,g){var v=g(94536);function M(){this.__data__=v?v(null):{},this.size=0}vt.exports=M},80401:function(vt){function Ee(g){var v=this.has(g)&&delete this.__data__[g];return this.size-=v?1:0,v}vt.exports=Ee},57667:function(vt,Ee,g){var v=g(94536),M="__lodash_hash_undefined__",c=Object.prototype,K=c.hasOwnProperty;function N(Z){var B=this.__data__;if(v){var L=B[Z];return L===M?void 0:L}return K.call(B,Z)?B[Z]:void 0}vt.exports=N},21327:function(vt,Ee,g){var v=g(94536),M=Object.prototype,c=M.hasOwnProperty;function K(N){var Z=this.__data__;return v?Z[N]!==void 0:c.call(Z,N)}vt.exports=K},81866:function(vt,Ee,g){var v=g(94536),M="__lodash_hash_undefined__";function c(K,N){var Z=this.__data__;return this.size+=this.has(K)?0:1,Z[K]=v&&N===void 0?M:N,this}vt.exports=c},38517:function(vt,Ee,g){var v=g(3118),M=g(85924),c=g(25726);function K(N){return typeof N.constructor=="function"&&!c(N)?v(M(N)):{}}vt.exports=K},65776:function(vt){var Ee=9007199254740991,g=/^(?:0|[1-9]\d*)$/;function v(M,c){var K=typeof M;return c=c==null?Ee:c,!!c&&(K=="number"||K!="symbol"&&g.test(M))&&M>-1&&M%1==0&&M<c}vt.exports=v},16612:function(vt,Ee,g){var v=g(77813),M=g(98612),c=g(65776),K=g(13218);function N(Z,B,L){if(!K(L))return!1;var $=typeof B;return($=="number"?M(L)&&c(B,L.length):$=="string"&&B in L)?v(L[B],Z):!1}vt.exports=N},37019:function(vt){function Ee(g){var v=typeof g;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?g!=="__proto__":g===null}vt.exports=Ee},15346:function(vt,Ee,g){var v=g(14429),M=function(){var K=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return K?"Symbol(src)_1."+K:""}();function c(K){return!!M&&M in K}vt.exports=c},25726:function(vt){var Ee=Object.prototype;function g(v){var M=v&&v.constructor,c=typeof M=="function"&&M.prototype||Ee;return v===c}vt.exports=g},27040:function(vt){function Ee(){this.__data__=[],this.size=0}vt.exports=Ee},14125:function(vt,Ee,g){var v=g(18470),M=Array.prototype,c=M.splice;function K(N){var Z=this.__data__,B=v(Z,N);if(B<0)return!1;var L=Z.length-1;return B==L?Z.pop():c.call(Z,B,1),--this.size,!0}vt.exports=K},82117:function(vt,Ee,g){var v=g(18470);function M(c){var K=this.__data__,N=v(K,c);return N<0?void 0:K[N][1]}vt.exports=M},67518:function(vt,Ee,g){var v=g(18470);function M(c){return v(this.__data__,c)>-1}vt.exports=M},13399:function(vt,Ee,g){var v=g(18470);function M(c,K){var N=this.__data__,Z=v(N,c);return Z<0?(++this.size,N.push([c,K])):N[Z][1]=K,this}vt.exports=M},24785:function(vt,Ee,g){var v=g(1989),M=g(38407),c=g(57071);function K(){this.size=0,this.__data__={hash:new v,map:new(c||M),string:new v}}vt.exports=K},11285:function(vt,Ee,g){var v=g(45050);function M(c){var K=v(this,c).delete(c);return this.size-=K?1:0,K}vt.exports=M},96e3:function(vt,Ee,g){var v=g(45050);function M(c){return v(this,c).get(c)}vt.exports=M},49916:function(vt,Ee,g){var v=g(45050);function M(c){return v(this,c).has(c)}vt.exports=M},95265:function(vt,Ee,g){var v=g(45050);function M(c,K){var N=v(this,c),Z=N.size;return N.set(c,K),this.size+=N.size==Z?0:1,this}vt.exports=M},68776:function(vt){function Ee(g){var v=-1,M=Array(g.size);return g.forEach(function(c,K){M[++v]=[K,c]}),M}vt.exports=Ee},94536:function(vt,Ee,g){var v=g(10852),M=v(Object,"create");vt.exports=M},86916:function(vt,Ee,g){var v=g(5569),M=v(Object.keys,Object);vt.exports=M},33498:function(vt){function Ee(g){var v=[];if(g!=null)for(var M in Object(g))v.push(M);return v}vt.exports=Ee},31167:function(vt,Ee,g){vt=g.nmd(vt);var v=g(31957),M=Ee&&!Ee.nodeType&&Ee,c=M&&!0&&vt&&!vt.nodeType&&vt,K=c&&c.exports===M,N=K&&v.process,Z=function(){try{var B=c&&c.require&&c.require("util").types;return B||N&&N.binding&&N.binding("util")}catch(L){}}();vt.exports=Z},2333:function(vt){var Ee=Object.prototype,g=Ee.toString;function v(M){return g.call(M)}vt.exports=v},5569:function(vt){function Ee(g,v){return function(M){return g(v(M))}}vt.exports=Ee},45357:function(vt,Ee,g){var v=g(96874),M=Math.max;function c(K,N,Z){return N=M(N===void 0?K.length-1:N,0),function(){for(var B=arguments,L=-1,$=M(B.length-N,0),U=Array($);++L<$;)U[L]=B[N+L];L=-1;for(var ke=Array(N+1);++L<N;)ke[L]=B[L];return ke[N]=Z(U),v(K,this,ke)}}vt.exports=c},55639:function(vt,Ee,g){var v=g(31957),M=typeof self=="object"&&self&&self.Object===Object&&self,c=v||M||Function("return this")();vt.exports=c},36390:function(vt){function Ee(g,v){if(!(v==="constructor"&&typeof g[v]=="function")&&v!="__proto__")return g[v]}vt.exports=Ee},90619:function(vt){var Ee="__lodash_hash_undefined__";function g(v){return this.__data__.set(v,Ee),this}vt.exports=g},72385:function(vt){function Ee(g){return this.__data__.has(g)}vt.exports=Ee},21814:function(vt){function Ee(g){var v=-1,M=Array(g.size);return g.forEach(function(c){M[++v]=c}),M}vt.exports=Ee},30061:function(vt,Ee,g){var v=g(56560),M=g(21275),c=M(v);vt.exports=c},21275:function(vt){var Ee=800,g=16,v=Date.now;function M(c){var K=0,N=0;return function(){var Z=v(),B=g-(Z-N);if(N=Z,B>0){if(++K>=Ee)return arguments[0]}else K=0;return c.apply(void 0,arguments)}}vt.exports=M},37465:function(vt,Ee,g){var v=g(38407);function M(){this.__data__=new v,this.size=0}vt.exports=M},63779:function(vt){function Ee(g){var v=this.__data__,M=v.delete(g);return this.size=v.size,M}vt.exports=Ee},67599:function(vt){function Ee(g){return this.__data__.get(g)}vt.exports=Ee},44758:function(vt){function Ee(g){return this.__data__.has(g)}vt.exports=Ee},34309:function(vt,Ee,g){var v=g(38407),M=g(57071),c=g(83369),K=200;function N(Z,B){var L=this.__data__;if(L instanceof v){var $=L.__data__;if(!M||$.length<K-1)return $.push([Z,B]),this.size=++L.size,this;L=this.__data__=new c($)}return L.set(Z,B),this.size=L.size,this}vt.exports=N},80346:function(vt){var Ee=Function.prototype,g=Ee.toString;function v(M){if(M!=null){try{return g.call(M)}catch(c){}try{return M+""}catch(c){}}return""}vt.exports=v},67990:function(vt){var Ee=/\s/;function g(v){for(var M=v.length;M--&&Ee.test(v.charAt(M)););return M}vt.exports=g},75703:function(vt){function Ee(g){return function(){return g}}vt.exports=Ee},23279:function(vt,Ee,g){var v=g(13218),M=g(7771),c=g(14841),K="Expected a function",N=Math.max,Z=Math.min;function B(L,$,U){var ke,We,me,Le,Se,et,at=0,Lt=!1,Et=!1,jt=!0;if(typeof L!="function")throw new TypeError(K);$=c($)||0,v(U)&&(Lt=!!U.leading,Et="maxWait"in U,me=Et?N(c(U.maxWait)||0,$):me,jt="trailing"in U?!!U.trailing:jt);function pe(je){var J=ke,Me=We;return ke=We=void 0,at=je,Le=L.apply(Me,J),Le}function $e(je){return at=je,Se=setTimeout(re,$),Lt?pe(je):Le}function ye(je){var J=je-et,Me=je-at,ne=$-J;return Et?Z(ne,me-Me):ne}function ie(je){var J=je-et,Me=je-at;return et===void 0||J>=$||J<0||Et&&Me>=me}function re(){var je=M();if(ie(je))return De(je);Se=setTimeout(re,ye(je))}function De(je){return Se=void 0,jt&&ke?pe(je):(ke=We=void 0,Le)}function le(){Se!==void 0&&clearTimeout(Se),at=0,ke=et=We=Se=void 0}function ge(){return Se===void 0?Le:De(M())}function ce(){var je=M(),J=ie(je);if(ke=arguments,We=this,et=je,J){if(Se===void 0)return $e(et);if(Et)return clearTimeout(Se),Se=setTimeout(re,$),pe(et)}return Se===void 0&&(Se=setTimeout(re,$)),Le}return ce.cancel=le,ce.flush=ge,ce}vt.exports=B},77813:function(vt){function Ee(g,v){return g===v||g!==g&&v!==v}vt.exports=Ee},6557:function(vt){function Ee(g){return g}vt.exports=Ee},35694:function(vt,Ee,g){var v=g(9454),M=g(37005),c=Object.prototype,K=c.hasOwnProperty,N=c.propertyIsEnumerable,Z=v(function(){return arguments}())?v:function(B){return M(B)&&K.call(B,"callee")&&!N.call(B,"callee")};vt.exports=Z},1469:function(vt){var Ee=Array.isArray;vt.exports=Ee},98612:function(vt,Ee,g){var v=g(23560),M=g(41780);function c(K){return K!=null&&M(K.length)&&!v(K)}vt.exports=c},29246:function(vt,Ee,g){var v=g(98612),M=g(37005);function c(K){return M(K)&&v(K)}vt.exports=c},44144:function(vt,Ee,g){vt=g.nmd(vt);var v=g(55639),M=g(95062),c=Ee&&!Ee.nodeType&&Ee,K=c&&!0&&vt&&!vt.nodeType&&vt,N=K&&K.exports===c,Z=N?v.Buffer:void 0,B=Z?Z.isBuffer:void 0,L=B||M;vt.exports=L},18446:function(vt,Ee,g){var v=g(90939);function M(c,K){return v(c,K)}vt.exports=M},23560:function(vt,Ee,g){var v=g(44239),M=g(13218),c="[object AsyncFunction]",K="[object Function]",N="[object GeneratorFunction]",Z="[object Proxy]";function B(L){if(!M(L))return!1;var $=v(L);return $==K||$==N||$==c||$==Z}vt.exports=B},41780:function(vt){var Ee=9007199254740991;function g(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=Ee}vt.exports=g},13218:function(vt){function Ee(g){var v=typeof g;return g!=null&&(v=="object"||v=="function")}vt.exports=Ee},37005:function(vt){function Ee(g){return g!=null&&typeof g=="object"}vt.exports=Ee},68630:function(vt,Ee,g){var v=g(44239),M=g(85924),c=g(37005),K="[object Object]",N=Function.prototype,Z=Object.prototype,B=N.toString,L=Z.hasOwnProperty,$=B.call(Object);function U(ke){if(!c(ke)||v(ke)!=K)return!1;var We=M(ke);if(We===null)return!0;var me=L.call(We,"constructor")&&We.constructor;return typeof me=="function"&&me instanceof me&&B.call(me)==$}vt.exports=U},33448:function(vt,Ee,g){var v=g(44239),M=g(37005),c="[object Symbol]";function K(N){return typeof N=="symbol"||M(N)&&v(N)==c}vt.exports=K},36719:function(vt,Ee,g){var v=g(38749),M=g(7518),c=g(31167),K=c&&c.isTypedArray,N=K?M(K):v;vt.exports=N},3674:function(vt,Ee,g){var v=g(14636),M=g(280),c=g(98612);function K(N){return c(N)?v(N):M(N)}vt.exports=K},81704:function(vt,Ee,g){var v=g(14636),M=g(35014),c=g(98612);function K(N){return c(N)?v(N,!0):M(N)}vt.exports=K},96486:function(vt,Ee,g){vt=g.nmd(vt);var v;(function(){var M,c="4.17.21",K=200,N="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Z="Expected a function",B="Invalid `variable` option passed into `_.template`",L="__lodash_hash_undefined__",$=500,U="__lodash_placeholder__",ke=1,We=2,me=4,Le=1,Se=2,et=1,at=2,Lt=4,Et=8,jt=16,pe=32,$e=64,ye=128,ie=256,re=512,De=30,le="...",ge=800,ce=16,je=1,J=2,Me=3,ne=1/0,xe=9007199254740991,Ne=17976931348623157e292,Pe=0/0,He=4294967295,lt=He-1,ft=He>>>1,It=[["ary",ye],["bind",et],["bindKey",at],["curry",Et],["curryRight",jt],["flip",re],["partial",pe],["partialRight",$e],["rearg",ie]],fe="[object Arguments]",_t="[object Array]",Ye="[object AsyncFunction]",Ot="[object Boolean]",mt="[object Date]",Rt="[object DOMException]",pt="[object Error]",Ge="[object Function]",wt="[object GeneratorFunction]",ee="[object Map]",Re="[object Number]",dt="[object Null]",D="[object Object]",q="[object Promise]",G="[object Proxy]",O="[object RegExp]",k="[object Set]",X="[object String]",W="[object Symbol]",ae="[object Undefined]",Be="[object WeakMap]",ve="[object WeakSet]",Je="[object ArrayBuffer]",ot="[object DataView]",Qe="[object Float32Array]",ir="[object Float64Array]",mr="[object Int8Array]",Ar="[object Int16Array]",Er="[object Int32Array]",Zt="[object Uint8Array]",Tr="[object Uint8ClampedArray]",pn="[object Uint16Array]",un="[object Uint32Array]",Zn=/\b__p \+= '';/g,Cr=/\b(__p \+=) '' \+/g,Nr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,jn=/[&<>"']/g,Pt=RegExp(bt.source),zt=RegExp(jn.source),Qt=/<%-([\s\S]+?)%>/g,dr=/<%([\s\S]+?)%>/g,_r=/<%=([\s\S]+?)%>/g,Hr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qr=/^\w*$/,fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,Yr=RegExp(tt.source),Tn=/^\s+/,wn=/\s/,Nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Si=/\{\n\/\* \[wrapped with (.+)\] \*/,fa=/,? & /,Xi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ln=/[()=,{}\[\]\/\s]/,na=/\\(\\)?/g,xi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ta=/\w*$/,La=/^[-+]0x[0-9a-f]+$/i,Ki=/^0b[01]+$/i,jo=/^\[object .+?Constructor\]$/,uo=/^0o[0-7]+$/i,An=/^(?:0|[1-9]\d*)$/,gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oi=/($^)/,fi=/['\n\r\u2028\u2029\\]/g,va="\\ud800-\\udfff",wa="\\u0300-\\u036f",Ca="\\ufe20-\\ufe2f",Aa="\\u20d0-\\u20ff",ma=wa+Ca+Aa,ka="\\u2700-\\u27bf",Uo="a-z\\xdf-\\xf6\\xf8-\\xff",ha="\\xac\\xb1\\xd7\\xf7",xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eo="\\u2000-\\u206f",Te=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Po="A-Z\\xc0-\\xd6\\xd8-\\xde",Hs="\\ufe0e\\ufe0f",no=ha+xa+eo+Te,Jo="['\u2019]",os="["+va+"]",Go="["+no+"]",Wo="["+ma+"]",za="\\d+",Tu="["+ka+"]",ws="["+Uo+"]",Zs="[^"+va+no+za+ka+Uo+Po+"]",ts="\\ud83c[\\udffb-\\udfff]",Vs="(?:"+Wo+"|"+ts+")",ou="[^"+va+"]",ls="(?:\\ud83c[\\udde6-\\uddff]){2}",ki="[\\ud800-\\udbff][\\udc00-\\udfff]",As="["+Po+"]",Rs="\\u200d",hr="(?:"+ws+"|"+Zs+")",Lr="(?:"+As+"|"+Zs+")",or="(?:"+Jo+"(?:d|ll|m|re|s|t|ve))?",kr="(?:"+Jo+"(?:D|LL|M|RE|S|T|VE))?",Hn=Vs+"?",zr="["+Hs+"]?",Bo="(?:"+Rs+"(?:"+[ou,ls,ki].join("|")+")"+zr+Hn+")*",Vr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ht=zr+Hn+Bo,ur="(?:"+[Tu,ls,ki].join("|")+")"+ht,er="(?:"+[ou+Wo+"?",Wo,ls,ki,os].join("|")+")",sn=RegExp(Jo,"g"),fn=RegExp(Wo,"g"),Vn=RegExp(ts+"(?="+ts+")|"+er+ht,"g"),ni=RegExp([As+"?"+ws+"+"+or+"(?="+[Go,As,"$"].join("|")+")",Lr+"+"+kr+"(?="+[Go,As+hr,"$"].join("|")+")",As+"?"+hr+"+"+or,As+"+"+kr,cr,Vr,za,ur].join("|"),"g"),oi=RegExp("["+Rs+va+ma+Hs+"]"),Ei=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pr=-1,Cn={};Cn[Qe]=Cn[ir]=Cn[mr]=Cn[Ar]=Cn[Er]=Cn[Zt]=Cn[Tr]=Cn[pn]=Cn[un]=!0,Cn[fe]=Cn[_t]=Cn[Je]=Cn[Ot]=Cn[ot]=Cn[mt]=Cn[pt]=Cn[Ge]=Cn[ee]=Cn[Re]=Cn[D]=Cn[O]=Cn[k]=Cn[X]=Cn[Be]=!1;var ln={};ln[fe]=ln[_t]=ln[Je]=ln[ot]=ln[Ot]=ln[mt]=ln[Qe]=ln[ir]=ln[mr]=ln[Ar]=ln[Er]=ln[ee]=ln[Re]=ln[D]=ln[O]=ln[k]=ln[X]=ln[W]=ln[Zt]=ln[Tr]=ln[pn]=ln[un]=!0,ln[pt]=ln[Ge]=ln[Be]=!1;var bn={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gi=parseFloat,aa=parseInt,Ta=typeof g.g=="object"&&g.g&&g.g.Object===Object&&g.g,R=typeof self=="object"&&self&&self.Object===Object&&self,_e=Ta||R||Function("return this")(),At=Ee&&!Ee.nodeType&&Ee,Ke=At&&!0&&vt&&!vt.nodeType&&vt,nr=Ke&&Ke.exports===At,wr=nr&&Ta.process,Wr=function(){try{var qn=Ke&&Ke.require&&Ke.require("util").types;return qn||wr&&wr.binding&&wr.binding("util")}catch(ca){}}(),In=Wr&&Wr.isArrayBuffer,Dn=Wr&&Wr.isDate,Mi=Wr&&Wr.isMap,Bi=Wr&&Wr.isRegExp,io=Wr&&Wr.isSet,co=Wr&&Wr.isTypedArray;function Sa(qn,ca,$i){switch($i.length){case 0:return qn.call(ca);case 1:return qn.call(ca,$i[0]);case 2:return qn.call(ca,$i[0],$i[1]);case 3:return qn.call(ca,$i[0],$i[1],$i[2])}return qn.apply(ca,$i)}function Ko(qn,ca,$i,$o){for(var lo=-1,Es=qn==null?0:qn.length;++lo<Es;){var tl=qn[lo];ca($o,tl,$i(tl),qn)}return $o}function Co(qn,ca){for(var $i=-1,$o=qn==null?0:qn.length;++$i<$o&&ca(qn[$i],$i,qn)!==!1;);return qn}function Oo(qn,ca){for(var $i=qn==null?0:qn.length;$i--&&ca(qn[$i],$i,qn)!==!1;);return qn}function Ho(qn,ca){for(var $i=-1,$o=qn==null?0:qn.length;++$i<$o;)if(!ca(qn[$i],$i,qn))return!1;return!0}function Io(qn,ca){for(var $i=-1,$o=qn==null?0:qn.length,lo=0,Es=[];++$i<$o;){var tl=qn[$i];ca(tl,$i,qn)&&(Es[lo++]=tl)}return Es}function Js(qn,ca){var $i=qn==null?0:qn.length;return!!$i&&yl(qn,ca,0)>-1}function Il(qn,ca,$i){for(var $o=-1,lo=qn==null?0:qn.length;++$o<lo;)if($i(ca,qn[$o]))return!0;return!1}function Ao(qn,ca){for(var $i=-1,$o=qn==null?0:qn.length,lo=Array($o);++$i<$o;)lo[$i]=ca(qn[$i],$i,qn);return lo}function Va(qn,ca){for(var $i=-1,$o=ca.length,lo=qn.length;++$i<$o;)qn[lo+$i]=ca[$i];return qn}function gs(qn,ca,$i,$o){var lo=-1,Es=qn==null?0:qn.length;for($o&&Es&&($i=qn[++lo]);++lo<Es;)$i=ca($i,qn[lo],lo,qn);return $i}function Ws(qn,ca,$i,$o){var lo=qn==null?0:qn.length;for($o&&lo&&($i=qn[--lo]);lo--;)$i=ca($i,qn[lo],lo,qn);return $i}function bs(qn,ca){for(var $i=-1,$o=qn==null?0:qn.length;++$i<$o;)if(ca(qn[$i],$i,qn))return!0;return!1}var Ps=_l("length");function Xs(qn){return qn.split("")}function gl(qn){return qn.match(Xi)||[]}function jf(qn,ca,$i){var $o;return $i(qn,function(lo,Es,tl){if(ca(lo,Es,tl))return $o=Es,!1}),$o}function Mu(qn,ca,$i,$o){for(var lo=qn.length,Es=$i+($o?1:-1);$o?Es--:++Es<lo;)if(ca(qn[Es],Es,qn))return Es;return-1}function yl(qn,ca,$i){return ca===ca?tc(qn,ca,$i):Mu(qn,Lc,$i)}function lc(qn,ca,$i,$o){for(var lo=$i-1,Es=qn.length;++lo<Es;)if($o(qn[lo],ca))return lo;return-1}function Lc(qn){return qn!==qn}function dh(qn,ca){var $i=qn==null?0:qn.length;return $i?Cf(qn,ca)/$i:Pe}function _l(qn){return function(ca){return ca==null?M:ca[qn]}}function Us(qn){return function(ca){return qn==null?M:qn[ca]}}function th(qn,ca,$i,$o,lo){return lo(qn,function(Es,tl,al){$i=$o?($o=!1,Es):ca($i,Es,tl,al)}),$i}function Df(qn,ca){var $i=qn.length;for(qn.sort(ca);$i--;)qn[$i]=qn[$i].value;return qn}function Cf(qn,ca){for(var $i,$o=-1,lo=qn.length;++$o<lo;){var Es=ca(qn[$o]);Es!==M&&($i=$i===M?Es:$i+Es)}return $i}function lf(qn,ca){for(var $i=-1,$o=Array(qn);++$i<qn;)$o[$i]=ca($i);return $o}function gd(qn,ca){return Ao(ca,function($i){return[$i,qn[$i]]})}function Kh(qn){return qn&&qn.slice(0,ff(qn)+1).replace(Tn,"")}function yc(qn){return function(ca){return qn(ca)}}function Eh(qn,ca){return Ao(ca,function($i){return qn[$i]})}function cf(qn,ca){return qn.has(ca)}function Af(qn,ca){for(var $i=-1,$o=qn.length;++$i<$o&&yl(ca,qn[$i],0)>-1;);return $i}function _f(qn,ca){for(var $i=qn.length;$i--&&yl(ca,qn[$i],0)>-1;);return $i}function kc(qn,ca){for(var $i=qn.length,$o=0;$i--;)qn[$i]===ca&&++$o;return $o}var Ff=Us(bn),Zl=Us(Kn);function Dc(qn){return"\\"+Yi[qn]}function ad(qn,ca){return qn==null?M:qn[ca]}function rh(qn){return oi.test(qn)}function od(qn){return Ei.test(qn)}function Yo(qn){for(var ca,$i=[];!(ca=qn.next()).done;)$i.push(ca.value);return $i}function Gs(qn){var ca=-1,$i=Array(qn.size);return qn.forEach(function($o,lo){$i[++ca]=[lo,$o]}),$i}function Kl(qn,ca){return function($i){return qn(ca($i))}}function dl(qn,ca){for(var $i=-1,$o=qn.length,lo=0,Es=[];++$i<$o;){var tl=qn[$i];(tl===ca||tl===U)&&(qn[$i]=U,Es[lo++]=$i)}return Es}function su(qn){var ca=-1,$i=Array(qn.size);return qn.forEach(function($o){$i[++ca]=$o}),$i}function Fc(qn){var ca=-1,$i=Array(qn.size);return qn.forEach(function($o){$i[++ca]=[$o,$o]}),$i}function tc(qn,ca,$i){for(var $o=$i-1,lo=qn.length;++$o<lo;)if(qn[$o]===ca)return $o;return-1}function Tf(qn,ca,$i){for(var $o=$i+1;$o--;)if(qn[$o]===ca)return $o;return $o}function _c(qn){return rh(qn)?Yh(qn):Ps(qn)}function Hl(qn){return rh(qn)?Uh(qn):Xs(qn)}function ff(qn){for(var ca=qn.length;ca--&&wn.test(qn.charAt(ca)););return ca}var xc=Us(bi);function Yh(qn){for(var ca=Vn.lastIndex=0;Vn.test(qn);)++ca;return ca}function Uh(qn){return qn.match(Vn)||[]}function Gc(qn){return qn.match(ni)||[]}var Mf=function qn(ca){ca=ca==null?_e:nh.defaults(_e.Object(),ca,nh.pick(_e,qi));var $i=ca.Array,$o=ca.Date,lo=ca.Error,Es=ca.Function,tl=ca.Math,al=ca.Object,Tl=ca.RegExp,Lh=ca.String,xf=ca.TypeError,qh=$i.prototype,$h=Es.prototype,Ul=al.prototype,Rl=ca["__core-js_shared__"],ol=$h.toString,uu=Ul.hasOwnProperty,Bc=0,cc=function(){var _=/[^.]+$/.exec(Rl&&Rl.keys&&Rl.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),ao=Ul.toString,Ml=ol.call(al),Hf=_e._,fl=Tl("^"+ol.call(uu).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=nr?ca.Buffer:M,Ll=ca.Symbol,jh=ca.Uint8Array,qa=Vl?Vl.allocUnsafe:M,Yl=Kl(al.getPrototypeOf,al),Vf=al.create,ih=Ul.propertyIsEnumerable,Vu=qh.splice,hf=Ll?Ll.isConcatSpreadable:M,Hh=Ll?Ll.iterator:M,bc=Ll?Ll.toStringTag:M,Ec=function(){try{var _=Gd(al,"defineProperty");return _({},"",{}),_}catch(F){}}(),ah=ca.clearTimeout!==_e.clearTimeout&&ca.clearTimeout,Wc=$o&&$o.now!==_e.Date.now&&$o.now,kh=ca.setTimeout!==_e.setTimeout&&ca.setTimeout,Sc=tl.ceil,Vh=tl.floor,ql=al.getOwnPropertySymbols,gu=Vl?Vl.isBuffer:M,Ks=ca.isFinite,Gf=qh.join,Bf=Kl(al.keys,al),eu=tl.max,Pl=tl.min,Xc=$o.now,Nc=ca.parseInt,Ql=tl.random,fc=qh.reverse,oo=Gd(ca,"DataView"),Do=Gd(ca,"Map"),nu=Gd(ca,"Promise"),Jl=Gd(ca,"Set"),xl=Gd(ca,"WeakMap"),mu=Gd(al,"create"),Ku=xl&&new xl,Kc={},Gh=Bl(oo),Yu=Bl(Do),bl=Bl(nu),yd=Bl(Jl),ph=Bl(xl),wc=Ll?Ll.prototype:M,Yc=wc?wc.valueOf:M,kl=wc?wc.toString:M;function Dr(_){if(bh(_)&&!Ou(_)&&!(_ instanceof du)){if(_ instanceof qo)return _;if(uu.call(_,"__wrapped__"))return Sf(_)}return new qo(_)}var Dl=function(){function _(){}return function(F){if(!Jf(F))return{};if(Vf)return Vf(F);_.prototype=F;var Oe=new _;return _.prototype=M,Oe}}();function Vo(){}function qo(_,F){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!F,this.__index__=0,this.__values__=M}Dr.templateSettings={escape:Qt,evaluate:dr,interpolate:_r,variable:"",imports:{_:Dr}},Dr.prototype=Vo.prototype,Dr.prototype.constructor=Dr,qo.prototype=Dl(Vo.prototype),qo.prototype.constructor=qo;function du(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function Dh(){var _=new du(this.__wrapped__);return _.__actions__=To(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=To(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=To(this.__views__),_}function Wf(){if(this.__filtered__){var _=new du(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function zc(){var _=this.__wrapped__.value(),F=this.__dir__,Oe=Ou(_),$t=F<0,br=Oe?_.length:0,Jr=ia(0,br,this.__views__),Wn=Jr.start,li=Jr.end,Ri=li-Wn,Xa=$t?li:Wn-1,Ka=this.__iteratees__,So=Ka.length,Ms=0,bu=Pl(Ri,this.__takeCount__);if(!Oe||!$t&&br==Ri&&bu==Ri)return uh(_,this.__actions__);var ju=[];e:for(;Ri--&&Ms<bu;){Xa+=F;for(var zl=-1,Hu=_[Xa];++zl<So;){var jl=Ka[zl],sc=jl.iteratee,fh=jl.type,Ud=sc(Hu);if(fh==J)Hu=Ud;else if(!Ud){if(fh==je)continue e;break e}}ju[Ms++]=Hu}return ju}du.prototype=Dl(Vo.prototype),du.prototype.constructor=du;function df(_){var F=-1,Oe=_==null?0:_.length;for(this.clear();++F<Oe;){var $t=_[F];this.set($t[0],$t[1])}}function rc(){this.__data__=mu?mu(null):{},this.size=0}function ys(_){var F=this.has(_)&&delete this.__data__[_];return this.size-=F?1:0,F}function bf(_){var F=this.__data__;if(mu){var Oe=F[_];return Oe===L?M:Oe}return uu.call(F,_)?F[_]:M}function Xf(_){var F=this.__data__;return mu?F[_]!==M:uu.call(F,_)}function rl(_,F){var Oe=this.__data__;return this.size+=this.has(_)?0:1,Oe[_]=mu&&F===M?L:F,this}df.prototype.clear=rc,df.prototype.delete=ys,df.prototype.get=bf,df.prototype.has=Xf,df.prototype.set=rl;function Cc(_){var F=-1,Oe=_==null?0:_.length;for(this.clear();++F<Oe;){var $t=_[F];this.set($t[0],$t[1])}}function Zc(){this.__data__=[],this.size=0}function sd(_){var F=this.__data__,Oe=ra(F,_);if(Oe<0)return!1;var $t=F.length-1;return Oe==$t?F.pop():Vu.call(F,Oe,1),--this.size,!0}function qc(_){var F=this.__data__,Oe=ra(F,_);return Oe<0?M:F[Oe][1]}function f(_){return ra(this.__data__,_)>-1}function m(_,F){var Oe=this.__data__,$t=ra(Oe,_);return $t<0?(++this.size,Oe.push([_,F])):Oe[$t][1]=F,this}Cc.prototype.clear=Zc,Cc.prototype.delete=sd,Cc.prototype.get=qc,Cc.prototype.has=f,Cc.prototype.set=m;function p(_){var F=-1,Oe=_==null?0:_.length;for(this.clear();++F<Oe;){var $t=_[F];this.set($t[0],$t[1])}}function E(){this.size=0,this.__data__={hash:new df,map:new(Do||Cc),string:new df}}function Y(_){var F=cd(this,_).delete(_);return this.size-=F?1:0,F}function Ce(_){return cd(this,_).get(_)}function ze(_){return cd(this,_).has(_)}function gt(_,F){var Oe=cd(this,_),$t=Oe.size;return Oe.set(_,F),this.size+=Oe.size==$t?0:1,this}p.prototype.clear=E,p.prototype.delete=Y,p.prototype.get=Ce,p.prototype.has=ze,p.prototype.set=gt;function Gt(_){var F=-1,Oe=_==null?0:_.length;for(this.__data__=new p;++F<Oe;)this.add(_[F])}function sr(_){return this.__data__.set(_,L),this}function Mr(_){return this.__data__.has(_)}Gt.prototype.add=Gt.prototype.push=sr,Gt.prototype.has=Mr;function Or(_){var F=this.__data__=new Cc(_);this.size=F.size}function Br(){this.__data__=new Cc,this.size=0}function yn(_){var F=this.__data__,Oe=F.delete(_);return this.size=F.size,Oe}function hn(_){return this.__data__.get(_)}function kn(_){return this.__data__.has(_)}function an(_,F){var Oe=this.__data__;if(Oe instanceof Cc){var $t=Oe.__data__;if(!Do||$t.length<K-1)return $t.push([_,F]),this.size=++Oe.size,this;Oe=this.__data__=new p($t)}return Oe.set(_,F),this.size=Oe.size,this}Or.prototype.clear=Br,Or.prototype.delete=yn,Or.prototype.get=hn,Or.prototype.has=kn,Or.prototype.set=an;function Rn(_,F){var Oe=Ou(_),$t=!Oe&&oc(_),br=!Oe&&!$t&&bd(_),Jr=!Oe&&!$t&&!br&&rp(_),Wn=Oe||$t||br||Jr,li=Wn?lf(_.length,Lh):[],Ri=li.length;for(var Xa in _)(F||uu.call(_,Xa))&&!(Wn&&(Xa=="length"||br&&(Xa=="offset"||Xa=="parent")||Jr&&(Xa=="buffer"||Xa=="byteLength"||Xa=="byteOffset")||$a(Xa,Ri)))&&li.push(Xa);return li}function $n(_){var F=_.length;return F?_[Hi(0,F-1)]:M}function di(_,F){return zs(To(_),rs(F,0,_.length))}function Di(_){return zs(To(_))}function Ti(_,F,Oe){(Oe!==M&&!Mh(_[F],Oe)||Oe===M&&!(F in _))&&No(_,F,Oe)}function Fi(_,F,Oe){var $t=_[F];(!(uu.call(_,F)&&Mh($t,Oe))||Oe===M&&!(F in _))&&No(_,F,Oe)}function ra(_,F){for(var Oe=_.length;Oe--;)if(Mh(_[Oe][0],F))return Oe;return-1}function Da(_,F,Oe,$t){return Qo(_,function(br,Jr,Wn){F($t,br,Oe(br),Wn)}),$t}function Na(_,F){return _&&Ro(F,ch(F),_)}function po(_,F){return _&&Ro(F,Xh(F),_)}function No(_,F,Oe){F=="__proto__"&&Ec?Ec(_,F,{configurable:!0,enumerable:!0,value:Oe,writable:!0}):_[F]=Oe}function is(_,F){for(var Oe=-1,$t=F.length,br=$i($t),Jr=_==null;++Oe<$t;)br[Oe]=Jr?M:Uv(_,F[Oe]);return br}function rs(_,F,Oe){return _===_&&(Oe!==M&&(_=_<=Oe?_:Oe),F!==M&&(_=_>=F?_:F)),_}function Ls(_,F,Oe,$t,br,Jr){var Wn,li=F&ke,Ri=F&We,Xa=F&me;if(Oe&&(Wn=br?Oe(_,$t,br,Jr):Oe(_)),Wn!==M)return Wn;if(!Jf(_))return _;var Ka=Ou(_);if(Ka){if(Wn=Ea(_),!li)return To(_,Wn)}else{var So=wi(_),Ms=So==Ge||So==wt;if(bd(_))return rt(_,li);if(So==D||So==fe||Ms&&!br){if(Wn=Ri||Ms?{}:Ma(_),!li)return Ri?ps(_,po(Wn,_)):fs(_,Na(Wn,_))}else{if(!ln[So])return br?_:{};Wn=Ia(_,So,li)}}Jr||(Jr=new Or);var bu=Jr.get(_);if(bu)return bu;Jr.set(_,Wn),Sp(_)?_.forEach(function(Hu){Wn.add(Ls(Hu,F,Oe,Hu,_,Jr))}):Bv(_)&&_.forEach(function(Hu,jl){Wn.set(jl,Ls(Hu,F,Oe,jl,_,Jr))});var ju=Xa?Ri?xd:kd:Ri?Xh:ch,zl=Ka?M:ju(_);return Co(zl||_,function(Hu,jl){zl&&(jl=Hu,Hu=_[jl]),Fi(Wn,jl,Ls(Hu,F,Oe,jl,_,Jr))}),Wn}function vo(_){var F=ch(_);return function(Oe){return ds(Oe,_,F)}}function ds(_,F,Oe){var $t=Oe.length;if(_==null)return!$t;for(_=al(_);$t--;){var br=Oe[$t],Jr=F[br],Wn=_[br];if(Wn===M&&!(br in _)||!Jr(Wn))return!1}return!0}function Ns(_,F,Oe){if(typeof _!="function")throw new xf(Z);return Bs(function(){_.apply(M,Oe)},F)}function cs(_,F,Oe,$t){var br=-1,Jr=Js,Wn=!0,li=_.length,Ri=[],Xa=F.length;if(!li)return Ri;Oe&&(F=Ao(F,yc(Oe))),$t?(Jr=Il,Wn=!1):F.length>=K&&(Jr=cf,Wn=!1,F=new Gt(F));e:for(;++br<li;){var Ka=_[br],So=Oe==null?Ka:Oe(Ka);if(Ka=$t||Ka!==0?Ka:0,Wn&&So===So){for(var Ms=Xa;Ms--;)if(F[Ms]===So)continue e;Ri.push(Ka)}else Jr(F,So,$t)||Ri.push(Ka)}return Ri}var Qo=xu(Ju),$s=xu(Tc,!0);function Cs(_,F){var Oe=!0;return Qo(_,function($t,br,Jr){return Oe=!!F($t,br,Jr),Oe}),Oe}function _s(_,F,Oe){for(var $t=-1,br=_.length;++$t<br;){var Jr=_[$t],Wn=F(Jr);if(Wn!=null&&(li===M?Wn===Wn&&!Td(Wn):Oe(Wn,li)))var li=Wn,Ri=Jr}return Ri}function El(_,F,Oe,$t){var br=_.length;for(Oe=Qs(Oe),Oe<0&&(Oe=-Oe>br?0:br+Oe),$t=$t===M||$t>br?br:Qs($t),$t<0&&($t+=br),$t=Oe>$t?0:np($t);Oe<$t;)_[Oe++]=F;return _}function nl(_,F){var Oe=[];return Qo(_,function($t,br,Jr){F($t,br,Jr)&&Oe.push($t)}),Oe}function qu(_,F,Oe,$t,br){var Jr=-1,Wn=_.length;for(Oe||(Oe=Ha),br||(br=[]);++Jr<Wn;){var li=_[Jr];F>0&&Oe(li)?F>1?qu(li,F-1,Oe,$t,br):Va(br,li):$t||(br[br.length]=li)}return br}var Ac=cu(),Qu=cu(!0);function Ju(_,F){return _&&Ac(_,F,ch)}function Tc(_,F){return _&&Qu(_,F,ch)}function ec(_,F){return Io(F,function(Oe){return Ed(_[Oe])})}function Pf(_,F){F=dc(F,_);for(var Oe=0,$t=F.length;_!=null&&Oe<$t;)_=_[Gu(F[Oe++])];return Oe&&Oe==$t?_:M}function Ef(_,F,Oe){var $t=F(_);return Ou(_)?$t:Va($t,Oe(_))}function $l(_){return _==null?_===M?ae:dt:bc&&bc in al(_)?Ht(_):Zo(_)}function Uc(_,F){return _>F}function Qh(_,F){return _!=null&&uu.call(_,F)}function Jh(_,F){return _!=null&&F in al(_)}function Sh(_,F,Oe){return _>=Pl(F,Oe)&&_<eu(F,Oe)}function Of(_,F,Oe){for(var $t=Oe?Il:Js,br=_[0].length,Jr=_.length,Wn=Jr,li=$i(Jr),Ri=1/0,Xa=[];Wn--;){var Ka=_[Wn];Wn&&F&&(Ka=Ao(Ka,yc(F))),Ri=Pl(Ka.length,Ri),li[Wn]=!Oe&&(F||br>=120&&Ka.length>=120)?new Gt(Wn&&Ka):M}Ka=_[0];var So=-1,Ms=li[0];e:for(;++So<br&&Xa.length<Ri;){var bu=Ka[So],ju=F?F(bu):bu;if(bu=Oe||bu!==0?bu:0,!(Ms?cf(Ms,ju):$t(Xa,ju,Oe))){for(Wn=Jr;--Wn;){var zl=li[Wn];if(!(zl?cf(zl,ju):$t(_[Wn],ju,Oe)))continue e}Ms&&Ms.push(ju),Xa.push(bu)}}return Xa}function wh(_,F,Oe,$t){return Ju(_,function(br,Jr,Wn){F($t,Oe(br),Jr,Wn)}),$t}function pf(_,F,Oe){F=dc(F,_),_=Pa(_,F);var $t=_==null?_:_[Gu(ct(F))];return $t==null?M:Sa($t,_,Oe)}function oh(_){return bh(_)&&$l(_)==fe}function Qc(_){return bh(_)&&$l(_)==Je}function nc(_){return bh(_)&&$l(_)==mt}function ic(_,F,Oe,$t,br){return _===F?!0:_==null||F==null||!bh(_)&&!bh(F)?_!==_&&F!==F:Ch(_,F,Oe,$t,ic,br)}function Ch(_,F,Oe,$t,br,Jr){var Wn=Ou(_),li=Ou(F),Ri=Wn?_t:wi(_),Xa=li?_t:wi(F);Ri=Ri==fe?D:Ri,Xa=Xa==fe?D:Xa;var Ka=Ri==D,So=Xa==D,Ms=Ri==Xa;if(Ms&&bd(_)){if(!bd(F))return!1;Wn=!0,Ka=!1}if(Ms&&!Ka)return Jr||(Jr=new Or),Wn||rp(_)?wd(_,F,Oe,$t,br,Jr):ld(_,F,Ri,Oe,$t,br,Jr);if(!(Oe&Le)){var bu=Ka&&uu.call(_,"__wrapped__"),ju=So&&uu.call(F,"__wrapped__");if(bu||ju){var zl=bu?_.value():_,Hu=ju?F.value():F;return Jr||(Jr=new Or),br(zl,Hu,Oe,$t,Jr)}}return Ms?(Jr||(Jr=new Or),gp(_,F,Oe,$t,br,Jr)):!1}function Fh(_){return bh(_)&&wi(_)==ee}function ku(_,F,Oe,$t){var br=Oe.length,Jr=br,Wn=!$t;if(_==null)return!Jr;for(_=al(_);br--;){var li=Oe[br];if(Wn&&li[2]?li[1]!==_[li[0]]:!(li[0]in _))return!1}for(;++br<Jr;){li=Oe[br];var Ri=li[0],Xa=_[Ri],Ka=li[1];if(Wn&&li[2]){if(Xa===M&&!(Ri in _))return!1}else{var So=new Or;if($t)var Ms=$t(Xa,Ka,Ri,_,F,So);if(!(Ms===M?ic(Ka,Xa,Le|Se,$t,So):Ms))return!1}}return!0}function yu(_){if(!Jf(_)||Ra(_))return!1;var F=Ed(_)?fl:jo;return F.test(Bl(_))}function Jc(_){return bh(_)&&$l(_)==O}function sh(_){return bh(_)&&wi(_)==k}function vh(_){return bh(_)&&Qd(_.length)&&!!Cn[$l(_)]}function Nf(_){return typeof _=="function"?_:_==null?Zd:typeof _=="object"?Ou(_)?Rr(_[0],_[1]):ue(_):Im(_)}function mh(_){if(!_a(_))return Bf(_);var F=[];for(var Oe in al(_))uu.call(_,Oe)&&Oe!="constructor"&&F.push(Oe);return F}function If(_){if(!Jf(_))return oa(_);var F=_a(_),Oe=[];for(var $t in _)$t=="constructor"&&(F||!uu.call(_,$t))||Oe.push($t);return Oe}function Rf(_,F){return _<F}function vf(_,F){var Oe=-1,$t=Wh(_)?$i(_.length):[];return Qo(_,function(br,Jr,Wn){$t[++Oe]=F(br,Jr,Wn)}),$t}function ue(_){var F=Vd(_);return F.length==1&&F[0][2]?xo(F[0][0],F[0][1]):function(Oe){return Oe===_||ku(Oe,_,F)}}function Rr(_,F){return Ua(_)&&Ga(F)?xo(Gu(_),F):function(Oe){var $t=Uv(Oe,_);return $t===M&&$t===F?vv(Oe,_):ic(F,$t,Le|Se)}}function Mt(_,F,Oe,$t,br){_!==F&&Ac(F,function(Jr,Wn){if(br||(br=new Or),Jf(Jr))St(_,F,Wn,Oe,Mt,$t,br);else{var li=$t?$t(Oa(_,Wn),Jr,Wn+"",_,F,br):M;li===M&&(li=Jr),Ti(_,Wn,li)}},Xh)}function St(_,F,Oe,$t,br,Jr,Wn){var li=Oa(_,Oe),Ri=Oa(F,Oe),Xa=Wn.get(Ri);if(Xa){Ti(_,Oe,Xa);return}var Ka=Jr?Jr(li,Ri,Oe+"",_,F,Wn):M,So=Ka===M;if(So){var Ms=Ou(Ri),bu=!Ms&&bd(Ri),ju=!Ms&&!bu&&rp(Ri);Ka=Ri,Ms||bu||ju?Ou(li)?Ka=li:yf(li)?Ka=To(li):bu?(So=!1,Ka=rt(Ri,!0)):ju?(So=!1,Ka=pi(Ri,!0)):Ka=[]:_p(Ri)||oc(Ri)?(Ka=li,oc(li)?Ka=ip(li):(!Jf(li)||Ed(li))&&(Ka=Ma(Ri))):So=!1}So&&(Wn.set(Ri,Ka),br(Ka,Ri,$t,Jr,Wn),Wn.delete(Ri)),Ti(_,Oe,Ka)}function Vt(_,F){var Oe=_.length;if(Oe)return F+=F<0?Oe:0,$a(F,Oe)?_[F]:M}function ar(_,F,Oe){F.length?F=Ao(F,function(Jr){return Ou(Jr)?function(Wn){return Pf(Wn,Jr.length===1?Jr[0]:Jr)}:Jr}):F=[Zd];var $t=-1;F=Ao(F,yc(Fs()));var br=vf(_,function(Jr,Wn,li){var Ri=Ao(F,function(Xa){return Xa(Jr)});return{criteria:Ri,index:++$t,value:Jr}});return Df(br,function(Jr,Wn){return _i(Jr,Wn,Oe)})}function Xr(_,F){return vn(_,F,function(Oe,$t){return vv(_,$t)})}function vn(_,F,Oe){for(var $t=-1,br=F.length,Jr={};++$t<br;){var Wn=F[$t],li=Pf(_,Wn);Oe(li,Wn)&&lu(Jr,dc(Wn,_),li)}return Jr}function Sn(_){return function(F){return Pf(F,_)}}function Fn(_,F,Oe,$t){var br=$t?lc:yl,Jr=-1,Wn=F.length,li=_;for(_===F&&(F=To(F)),Oe&&(li=Ao(_,yc(Oe)));++Jr<Wn;)for(var Ri=0,Xa=F[Jr],Ka=Oe?Oe(Xa):Xa;(Ri=br(li,Ka,Ri,$t))>-1;)li!==_&&Vu.call(li,Ri,1),Vu.call(_,Ri,1);return _}function Ci(_,F){for(var Oe=_?F.length:0,$t=Oe-1;Oe--;){var br=F[Oe];if(Oe==$t||br!==Jr){var Jr=br;$a(br)?Vu.call(_,br,1):ef(_,br)}}return _}function Hi(_,F){return _+Vh(Ql()*(F-_+1))}function ba(_,F,Oe,$t){for(var br=-1,Jr=eu(Sc((F-_)/(Oe||1)),0),Wn=$i(Jr);Jr--;)Wn[$t?Jr:++br]=_,_+=Oe;return Wn}function mo(_,F){var Oe="";if(!_||F<1||F>xe)return Oe;do F%2&&(Oe+=_),F=Vh(F/2),F&&(_+=_);while(F);return Oe}function Qa(_,F){return so(fo(_,F,Zd),_+"")}function ks(_){return $n(Ol(_))}function Ts(_,F){var Oe=Ol(_);return zs(Oe,rs(F,0,Oe.length))}function lu(_,F,Oe,$t){if(!Jf(_))return _;F=dc(F,_);for(var br=-1,Jr=F.length,Wn=Jr-1,li=_;li!=null&&++br<Jr;){var Ri=Gu(F[br]),Xa=Oe;if(Ri==="__proto__"||Ri==="constructor"||Ri==="prototype")return _;if(br!=Wn){var Ka=li[Ri];Xa=$t?$t(Ka,Ri,li):M,Xa===M&&(Xa=Jf(Ka)?Ka:$a(F[br+1])?[]:{})}Fi(li,Ri,Xa),li=li[Ri]}return _}var Iu=Ku?function(_,F){return Ku.set(_,F),_}:Zd,_u=Ec?function(_,F){return Ec(_,"toString",{configurable:!0,enumerable:!1,value:y0(F),writable:!0})}:Zd;function Mc(_){return zs(Ol(_))}function tu(_,F,Oe){var $t=-1,br=_.length;F<0&&(F=-F>br?0:br+F),Oe=Oe>br?br:Oe,Oe<0&&(Oe+=br),br=F>Oe?0:Oe-F>>>0,F>>>=0;for(var Jr=$i(br);++$t<br;)Jr[$t]=_[$t+F];return Jr}function Fl(_,F){var Oe;return Qo(_,function($t,br,Jr){return Oe=F($t,br,Jr),!Oe}),!!Oe}function Ys(_,F,Oe){var $t=0,br=_==null?$t:_.length;if(typeof F=="number"&&F===F&&br<=ft){for(;$t<br;){var Jr=$t+br>>>1,Wn=_[Jr];Wn!==null&&!Td(Wn)&&(Oe?Wn<=F:Wn<F)?$t=Jr+1:br=Jr}return br}return Du(_,F,Zd,Oe)}function Du(_,F,Oe,$t){var br=0,Jr=_==null?0:_.length;if(Jr===0)return 0;F=Oe(F);for(var Wn=F!==F,li=F===null,Ri=Td(F),Xa=F===M;br<Jr;){var Ka=Vh((br+Jr)/2),So=Oe(_[Ka]),Ms=So!==M,bu=So===null,ju=So===So,zl=Td(So);if(Wn)var Hu=$t||ju;else Xa?Hu=ju&&($t||Ms):li?Hu=ju&&Ms&&($t||!bu):Ri?Hu=ju&&Ms&&!bu&&($t||!zl):bu||zl?Hu=!1:Hu=$t?So<=F:So<F;Hu?br=Ka+1:Jr=Ka}return Pl(Jr,lt)}function Bu(_,F){for(var Oe=-1,$t=_.length,br=0,Jr=[];++Oe<$t;){var Wn=_[Oe],li=F?F(Wn):Wn;if(!Oe||!Mh(li,Ri)){var Ri=li;Jr[br++]=Wn===0?0:Wn}}return Jr}function Gl(_){return typeof _=="number"?_:Td(_)?Pe:+_}function ru(_){if(typeof _=="string")return _;if(Ou(_))return Ao(_,ru)+"";if(Td(_))return kl?kl.call(_):"";var F=_+"";return F=="0"&&1/_==-ne?"-0":F}function pl(_,F,Oe){var $t=-1,br=Js,Jr=_.length,Wn=!0,li=[],Ri=li;if(Oe)Wn=!1,br=Il;else if(Jr>=K){var Xa=F?null:Nh(_);if(Xa)return su(Xa);Wn=!1,br=cf,Ri=new Gt}else Ri=F?[]:li;e:for(;++$t<Jr;){var Ka=_[$t],So=F?F(Ka):Ka;if(Ka=Oe||Ka!==0?Ka:0,Wn&&So===So){for(var Ms=Ri.length;Ms--;)if(Ri[Ms]===So)continue e;F&&Ri.push(So),li.push(Ka)}else br(Ri,So,Oe)||(Ri!==li&&Ri.push(So),li.push(Ka))}return li}function ef(_,F){return F=dc(F,_),_=Pa(_,F),_==null||delete _[Gu(ct(F))]}function Bh(_,F,Oe,$t){return lu(_,F,Oe(Pf(_,F)),$t)}function hc(_,F,Oe,$t){for(var br=_.length,Jr=$t?br:-1;($t?Jr--:++Jr<br)&&F(_[Jr],Jr,_););return Oe?tu(_,$t?0:Jr,$t?Jr+1:br):tu(_,$t?Jr+1:0,$t?br:Jr)}function uh(_,F){var Oe=_;return Oe instanceof du&&(Oe=Oe.value()),gs(F,function($t,br){return br.func.apply(br.thisArg,Va([$t],br.args))},Oe)}function Kf(_,F,Oe){var $t=_.length;if($t<2)return $t?pl(_[0]):[];for(var br=-1,Jr=$i($t);++br<$t;)for(var Wn=_[br],li=-1;++li<$t;)li!=br&&(Jr[br]=cs(Jr[br]||Wn,_[li],F,Oe));return pl(qu(Jr,1),F,Oe)}function gh(_,F,Oe){for(var $t=-1,br=_.length,Jr=F.length,Wn={};++$t<br;){var li=$t<Jr?F[$t]:M;Oe(Wn,_[$t],li)}return Wn}function yh(_){return yf(_)?_:[]}function Yf(_){return typeof _=="function"?_:Zd}function dc(_,F){return Ou(_)?_:Ua(_,F)?[_]:Cu(of(_))}var oe=Qa;function Fe(_,F,Oe){var $t=_.length;return Oe=Oe===M?$t:Oe,!F&&Oe>=$t?_:tu(_,F,Oe)}var Ze=ah||function(_){return _e.clearTimeout(_)};function rt(_,F){if(F)return _.slice();var Oe=_.length,$t=qa?qa(Oe):new _.constructor(Oe);return _.copy($t),$t}function xt(_){var F=new _.constructor(_.byteLength);return new jh(F).set(new jh(_)),F}function Dt(_,F){var Oe=F?xt(_.buffer):_.buffer;return new _.constructor(Oe,_.byteOffset,_.byteLength)}function $r(_){var F=new _.constructor(_.source,ta.exec(_));return F.lastIndex=_.lastIndex,F}function En(_){return Yc?al(Yc.call(_)):{}}function pi(_,F){var Oe=F?xt(_.buffer):_.buffer;return new _.constructor(Oe,_.byteOffset,_.length)}function rn(_,F){if(_!==F){var Oe=_!==M,$t=_===null,br=_===_,Jr=Td(_),Wn=F!==M,li=F===null,Ri=F===F,Xa=Td(F);if(!li&&!Xa&&!Jr&&_>F||Jr&&Wn&&Ri&&!li&&!Xa||$t&&Wn&&Ri||!Oe&&Ri||!br)return 1;if(!$t&&!Jr&&!Xa&&_<F||Xa&&Oe&&br&&!$t&&!Jr||li&&Oe&&br||!Wn&&br||!Ri)return-1}return 0}function _i(_,F,Oe){for(var $t=-1,br=_.criteria,Jr=F.criteria,Wn=br.length,li=Oe.length;++$t<Wn;){var Ri=rn(br[$t],Jr[$t]);if(Ri){if($t>=li)return Ri;var Xa=Oe[$t];return Ri*(Xa=="desc"?-1:1)}}return _.index-F.index}function ga(_,F,Oe,$t){for(var br=-1,Jr=_.length,Wn=Oe.length,li=-1,Ri=F.length,Xa=eu(Jr-Wn,0),Ka=$i(Ri+Xa),So=!$t;++li<Ri;)Ka[li]=F[li];for(;++br<Wn;)(So||br<Jr)&&(Ka[Oe[br]]=_[br]);for(;Xa--;)Ka[li++]=_[br++];return Ka}function ss(_,F,Oe,$t){for(var br=-1,Jr=_.length,Wn=-1,li=Oe.length,Ri=-1,Xa=F.length,Ka=eu(Jr-li,0),So=$i(Ka+Xa),Ms=!$t;++br<Ka;)So[br]=_[br];for(var bu=br;++Ri<Xa;)So[bu+Ri]=F[Ri];for(;++Wn<li;)(Ms||br<Jr)&&(So[bu+Oe[Wn]]=_[br++]);return So}function To(_,F){var Oe=-1,$t=_.length;for(F||(F=$i($t));++Oe<$t;)F[Oe]=_[Oe];return F}function Ro(_,F,Oe,$t){var br=!Oe;Oe||(Oe={});for(var Jr=-1,Wn=F.length;++Jr<Wn;){var li=F[Jr],Ri=$t?$t(Oe[li],_[li],li,Oe,_):M;Ri===M&&(Ri=_[li]),br?No(Oe,li,Ri):Fi(Oe,li,Ri)}return Oe}function fs(_,F){return Ro(_,Zr(_),F)}function ps(_,F){return Ro(_,On(_),F)}function zo(_,F){return function(Oe,$t){var br=Ou(Oe)?Ko:Da,Jr=F?F():{};return br(Oe,_,Fs($t,2),Jr)}}function Ds(_){return Qa(function(F,Oe){var $t=-1,br=Oe.length,Jr=br>1?Oe[br-1]:M,Wn=br>2?Oe[2]:M;for(Jr=_.length>3&&typeof Jr=="function"?(br--,Jr):M,Wn&&ya(Oe[0],Oe[1],Wn)&&(Jr=br<3?M:Jr,br=1),F=al(F);++$t<br;){var li=Oe[$t];li&&_(F,li,$t,Jr)}return F})}function xu(_,F){return function(Oe,$t){if(Oe==null)return Oe;if(!Wh(Oe))return _(Oe,$t);for(var br=Oe.length,Jr=F?br:-1,Wn=al(Oe);(F?Jr--:++Jr<br)&&$t(Wn[Jr],Jr,Wn)!==!1;);return Oe}}function cu(_){return function(F,Oe,$t){for(var br=-1,Jr=al(F),Wn=$t(F),li=Wn.length;li--;){var Ri=Wn[_?li:++br];if(Oe(Jr[Ri],Ri,Jr)===!1)break}return F}}function tf(_,F,Oe){var $t=F&et,br=ll(_);function Jr(){var Wn=this&&this!==_e&&this instanceof Jr?br:_;return Wn.apply($t?Oe:this,arguments)}return Jr}function $c(_){return function(F){F=of(F);var Oe=rh(F)?Hl(F):M,$t=Oe?Oe[0]:F.charAt(0),br=Oe?Fe(Oe,1).join(""):F.slice(1);return $t[_]()+br}}function ac(_){return function(F){return gs(g0(bv(F).replace(sn,"")),_,"")}}function ll(_){return function(){var F=arguments;switch(F.length){case 0:return new _;case 1:return new _(F[0]);case 2:return new _(F[0],F[1]);case 3:return new _(F[0],F[1],F[2]);case 4:return new _(F[0],F[1],F[2],F[3]);case 5:return new _(F[0],F[1],F[2],F[3],F[4]);case 6:return new _(F[0],F[1],F[2],F[3],F[4],F[5]);case 7:return new _(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}var Oe=Dl(_.prototype),$t=_.apply(Oe,F);return Jf($t)?$t:Oe}}function wu(_,F,Oe){var $t=ll(_);function br(){for(var Jr=arguments.length,Wn=$i(Jr),li=Jr,Ri=Dd(br);li--;)Wn[li]=arguments[li];var Xa=Jr<3&&Wn[0]!==Ri&&Wn[Jr-1]!==Ri?[]:dl(Wn,Ri);if(Jr-=Xa.length,Jr<Oe)return Sd(_,F,Pc,br.placeholder,M,Wn,Xa,M,M,Oe-Jr);var Ka=this&&this!==_e&&this instanceof br?$t:_;return Sa(Ka,this,Wn)}return br}function Sl(_){return function(F,Oe,$t){var br=al(F);if(!Wh(F)){var Jr=Fs(Oe,3);F=ch(F),Oe=function(li){return Jr(br[li],li,br)}}var Wn=_(F,Oe,$t);return Wn>-1?br[Jr?F[Wn]:Wn]:M}}function Wl(_){return Ah(function(F){var Oe=F.length,$t=Oe,br=qo.prototype.thru;for(_&&F.reverse();$t--;){var Jr=F[$t];if(typeof Jr!="function")throw new xf(Z);if(br&&!Wn&&vl(Jr)=="wrapper")var Wn=new qo([],!0)}for($t=Wn?$t:Oe;++$t<Oe;){Jr=F[$t];var li=vl(Jr),Ri=li=="wrapper"?Cd(Jr):M;Ri&&Ni(Ri[0])&&Ri[1]==(ye|Et|pe|ie)&&!Ri[4].length&&Ri[9]==1?Wn=Wn[vl(Ri[0])].apply(Wn,Ri[3]):Wn=Jr.length==1&&Ni(Jr)?Wn[li]():Wn.thru(Jr)}return function(){var Xa=arguments,Ka=Xa[0];if(Wn&&Xa.length==1&&Ou(Ka))return Wn.plant(Ka).value();for(var So=0,Ms=Oe?F[So].apply(this,Xa):Ka;++So<Oe;)Ms=F[So].call(this,Ms);return Ms}})}function Pc(_,F,Oe,$t,br,Jr,Wn,li,Ri,Xa){var Ka=F&ye,So=F&et,Ms=F&at,bu=F&(Et|jt),ju=F&re,zl=Ms?M:ll(_);function Hu(){for(var jl=arguments.length,sc=$i(jl),fh=jl;fh--;)sc[fh]=arguments[fh];if(bu)var Ud=Dd(Hu),Rd=kc(sc,Ud);if($t&&(sc=ga(sc,$t,br,bu)),Jr&&(sc=ss(sc,Jr,Wn,bu)),jl-=Rd,bu&&jl<Xa){var dd=dl(sc,Ud);return Sd(_,F,Pc,Hu.placeholder,Oe,sc,dd,li,Ri,Xa-jl)}var cp=So?Oe:this,Lp=Ms?cp[_]:_;return jl=sc.length,li?sc=to(sc,li):ju&&jl>1&&sc.reverse(),Ka&&Ri<jl&&(sc.length=Ri),this&&this!==_e&&this instanceof Hu&&(Lp=zl||ll(Lp)),Lp.apply(cp,sc)}return Hu}function jc(_,F){return function(Oe,$t){return wh(Oe,_,F($t),{})}}function hu(_,F){return function(Oe,$t){var br;if(Oe===M&&$t===M)return F;if(Oe!==M&&(br=Oe),$t!==M){if(br===M)return $t;typeof Oe=="string"||typeof $t=="string"?(Oe=ru(Oe),$t=ru($t)):(Oe=Gl(Oe),$t=Gl($t)),br=_(Oe,$t)}return br}}function _h(_){return Ah(function(F){return F=Ao(F,yc(Fs())),Qa(function(Oe){var $t=this;return _(F,function(br){return Sa(br,$t,Oe)})})})}function Oc(_,F){F=F===M?" ":ru(F);var Oe=F.length;if(Oe<2)return Oe?mo(F,_):F;var $t=mo(F,Sc(_/_c(F)));return rh(F)?Fe(Hl($t),0,_).join(""):$t.slice(0,_)}function ud(_,F,Oe,$t){var br=F&et,Jr=ll(_);function Wn(){for(var li=-1,Ri=arguments.length,Xa=-1,Ka=$t.length,So=$i(Ka+Ri),Ms=this&&this!==_e&&this instanceof Wn?Jr:_;++Xa<Ka;)So[Xa]=$t[Xa];for(;Ri--;)So[Xa++]=arguments[++li];return Sa(Ms,br?Oe:this,So)}return Wn}function Hd(_){return function(F,Oe,$t){return $t&&typeof $t!="number"&&ya(F,Oe,$t)&&(Oe=$t=M),F=Jd(F),Oe===M?(Oe=F,F=0):Oe=Jd(Oe),$t=$t===M?F<Oe?1:-1:Jd($t),ba(F,Oe,$t,_)}}function Zu(_){return function(F,Oe){return typeof F=="string"&&typeof Oe=="string"||(F=Xd(F),Oe=Xd(Oe)),_(F,Oe)}}function Sd(_,F,Oe,$t,br,Jr,Wn,li,Ri,Xa){var Ka=F&Et,So=Ka?Wn:M,Ms=Ka?M:Wn,bu=Ka?Jr:M,ju=Ka?M:Jr;F|=Ka?pe:$e,F&=~(Ka?$e:pe),F&Lt||(F&=~(et|at));var zl=[_,F,br,bu,So,ju,Ms,li,Ri,Xa],Hu=Oe.apply(M,zl);return Ni(_)&&Os(Hu,zl),Hu.placeholder=$t,yo(Hu,_,F)}function Hc(_){var F=tl[_];return function(Oe,$t){if(Oe=Xd(Oe),$t=$t==null?0:Pl(Qs($t),292),$t&&Ks(Oe)){var br=(of(Oe)+"e").split("e"),Jr=F(br[0]+"e"+(+br[1]+$t));return br=(of(Jr)+"e").split("e"),+(br[0]+"e"+(+br[1]-$t))}return F(Oe)}}var Nh=Jl&&1/su(new Jl([,-0]))[1]==ne?function(_){return new Jl(_)}:K0;function up(_){return function(F){var Oe=wi(F);return Oe==ee?Gs(F):Oe==k?Fc(F):gd(F,_(F))}}function _d(_,F,Oe,$t,br,Jr,Wn,li){var Ri=F&at;if(!Ri&&typeof _!="function")throw new xf(Z);var Xa=$t?$t.length:0;if(Xa||(F&=~(pe|$e),$t=br=M),Wn=Wn===M?Wn:eu(Qs(Wn),0),li=li===M?li:Qs(li),Xa-=br?br.length:0,F&$e){var Ka=$t,So=br;$t=br=M}var Ms=Ri?M:Cd(_),bu=[_,F,Oe,$t,br,Ka,So,Jr,Wn,li];if(Ms&&Qi(bu,Ms),_=bu[0],F=bu[1],Oe=bu[2],$t=bu[3],br=bu[4],li=bu[9]=bu[9]===M?Ri?0:_.length:eu(bu[9]-Xa,0),!li&&F&(Et|jt)&&(F&=~(Et|jt)),!F||F==et)var ju=tf(_,F,Oe);else F==Et||F==jt?ju=wu(_,F,li):(F==pe||F==(et|pe))&&!br.length?ju=ud(_,F,Oe,$t):ju=Pc.apply(M,bu);var zl=Ms?Iu:Os;return yo(zl(ju,bu),_,F)}function pp(_,F,Oe,$t){return _===M||Mh(_,Ul[Oe])&&!uu.call($t,Oe)?F:_}function vp(_,F,Oe,$t,br,Jr){return Jf(_)&&Jf(F)&&(Jr.set(F,_),Mt(_,F,M,vp,Jr),Jr.delete(F)),_}function mp(_){return _p(_)?M:_}function wd(_,F,Oe,$t,br,Jr){var Wn=Oe&Le,li=_.length,Ri=F.length;if(li!=Ri&&!(Wn&&Ri>li))return!1;var Xa=Jr.get(_),Ka=Jr.get(F);if(Xa&&Ka)return Xa==F&&Ka==_;var So=-1,Ms=!0,bu=Oe&Se?new Gt:M;for(Jr.set(_,F),Jr.set(F,_);++So<li;){var ju=_[So],zl=F[So];if($t)var Hu=Wn?$t(zl,ju,So,F,_,Jr):$t(ju,zl,So,_,F,Jr);if(Hu!==M){if(Hu)continue;Ms=!1;break}if(bu){if(!bs(F,function(jl,sc){if(!cf(bu,sc)&&(ju===jl||br(ju,jl,Oe,$t,Jr)))return bu.push(sc)})){Ms=!1;break}}else if(!(ju===zl||br(ju,zl,Oe,$t,Jr))){Ms=!1;break}}return Jr.delete(_),Jr.delete(F),Ms}function ld(_,F,Oe,$t,br,Jr,Wn){switch(Oe){case ot:if(_.byteLength!=F.byteLength||_.byteOffset!=F.byteOffset)return!1;_=_.buffer,F=F.buffer;case Je:return!(_.byteLength!=F.byteLength||!Jr(new jh(_),new jh(F)));case Ot:case mt:case Re:return Mh(+_,+F);case pt:return _.name==F.name&&_.message==F.message;case O:case X:return _==F+"";case ee:var li=Gs;case k:var Ri=$t&Le;if(li||(li=su),_.size!=F.size&&!Ri)return!1;var Xa=Wn.get(_);if(Xa)return Xa==F;$t|=Se,Wn.set(_,F);var Ka=wd(li(_),li(F),$t,br,Jr,Wn);return Wn.delete(_),Ka;case W:if(Yc)return Yc.call(_)==Yc.call(F)}return!1}function gp(_,F,Oe,$t,br,Jr){var Wn=Oe&Le,li=kd(_),Ri=li.length,Xa=kd(F),Ka=Xa.length;if(Ri!=Ka&&!Wn)return!1;for(var So=Ri;So--;){var Ms=li[So];if(!(Wn?Ms in F:uu.call(F,Ms)))return!1}var bu=Jr.get(_),ju=Jr.get(F);if(bu&&ju)return bu==F&&ju==_;var zl=!0;Jr.set(_,F),Jr.set(F,_);for(var Hu=Wn;++So<Ri;){Ms=li[So];var jl=_[Ms],sc=F[Ms];if($t)var fh=Wn?$t(sc,jl,Ms,F,_,Jr):$t(jl,sc,Ms,_,F,Jr);if(!(fh===M?jl===sc||br(jl,sc,Oe,$t,Jr):fh)){zl=!1;break}Hu||(Hu=Ms=="constructor")}if(zl&&!Hu){var Ud=_.constructor,Rd=F.constructor;Ud!=Rd&&"constructor"in _&&"constructor"in F&&!(typeof Ud=="function"&&Ud instanceof Ud&&typeof Rd=="function"&&Rd instanceof Rd)&&(zl=!1)}return Jr.delete(_),Jr.delete(F),zl}function Ah(_){return so(fo(_,M,Ru),_+"")}function kd(_){return Ef(_,ch,Zr)}function xd(_){return Ef(_,Xh,On)}var Cd=Ku?function(_){return Ku.get(_)}:K0;function vl(_){for(var F=_.name+"",Oe=Kc[F],$t=uu.call(Kc,F)?Oe.length:0;$t--;){var br=Oe[$t],Jr=br.func;if(Jr==null||Jr==_)return br.name}return F}function Dd(_){var F=uu.call(Dr,"placeholder")?Dr:_;return F.placeholder}function Fs(){var _=Dr.iteratee||Gv;return _=_===Gv?Nf:_,arguments.length?_(arguments[0],arguments[1]):_}function cd(_,F){var Oe=_.__data__;return si(F)?Oe[typeof F=="string"?"string":"hash"]:Oe.map}function Vd(_){for(var F=ch(_),Oe=F.length;Oe--;){var $t=F[Oe],br=_[$t];F[Oe]=[$t,br,Ga(br)]}return F}function Gd(_,F){var Oe=ad(_,F);return yu(Oe)?Oe:M}function Ht(_){var F=uu.call(_,bc),Oe=_[bc];try{_[bc]=M;var $t=!0}catch(Jr){}var br=ao.call(_);return $t&&(F?_[bc]=Oe:delete _[bc]),br}var Zr=ql?function(_){return _==null?[]:(_=al(_),Io(ql(_),function(F){return ih.call(_,F)}))}:_0,On=ql?function(_){for(var F=[];_;)Va(F,Zr(_)),_=Yl(_);return F}:_0,wi=$l;(oo&&wi(new oo(new ArrayBuffer(1)))!=ot||Do&&wi(new Do)!=ee||nu&&wi(nu.resolve())!=q||Jl&&wi(new Jl)!=k||xl&&wi(new xl)!=Be)&&(wi=function(_){var F=$l(_),Oe=F==D?_.constructor:M,$t=Oe?Bl(Oe):"";if($t)switch($t){case Gh:return ot;case Yu:return ee;case bl:return q;case yd:return k;case ph:return Be}return F});function ia(_,F,Oe){for(var $t=-1,br=Oe.length;++$t<br;){var Jr=Oe[$t],Wn=Jr.size;switch(Jr.type){case"drop":_+=Wn;break;case"dropRight":F-=Wn;break;case"take":F=Pl(F,_+Wn);break;case"takeRight":_=eu(_,F-Wn);break}}return{start:_,end:F}}function Ai(_){var F=_.match(Si);return F?F[1].split(fa):[]}function ji(_,F,Oe){F=dc(F,_);for(var $t=-1,br=F.length,Jr=!1;++$t<br;){var Wn=Gu(F[$t]);if(!(Jr=_!=null&&Oe(_,Wn)))break;_=_[Wn]}return Jr||++$t!=br?Jr:(br=_==null?0:_.length,!!br&&Qd(br)&&$a(Wn,br)&&(Ou(_)||oc(_)))}function Ea(_){var F=_.length,Oe=new _.constructor(F);return F&&typeof _[0]=="string"&&uu.call(_,"index")&&(Oe.index=_.index,Oe.input=_.input),Oe}function Ma(_){return typeof _.constructor=="function"&&!_a(_)?Dl(Yl(_)):{}}function Ia(_,F,Oe){var $t=_.constructor;switch(F){case Je:return xt(_);case Ot:case mt:return new $t(+_);case ot:return Dt(_,Oe);case Qe:case ir:case mr:case Ar:case Er:case Zt:case Tr:case pn:case un:return pi(_,Oe);case ee:return new $t;case Re:case X:return new $t(_);case O:return $r(_);case k:return new $t;case W:return En(_)}}function Za(_,F){var Oe=F.length;if(!Oe)return _;var $t=Oe-1;return F[$t]=(Oe>1?"& ":"")+F[$t],F=F.join(Oe>2?", ":" "),_.replace(Nn,`{
/* [wrapped with `+F+`] */
`)}function Ha(_){return Ou(_)||oc(_)||!!(hf&&_&&_[hf])}function $a(_,F){var Oe=typeof _;return F=F==null?xe:F,!!F&&(Oe=="number"||Oe!="symbol"&&An.test(_))&&_>-1&&_%1==0&&_<F}function ya(_,F,Oe){if(!Jf(Oe))return!1;var $t=typeof F;return($t=="number"?Wh(Oe)&&$a(F,Oe.length):$t=="string"&&F in Oe)?Mh(Oe[F],_):!1}function Ua(_,F){if(Ou(_))return!1;var Oe=typeof _;return Oe=="number"||Oe=="symbol"||Oe=="boolean"||_==null||Td(_)?!0:Qr.test(_)||!Hr.test(_)||F!=null&&_ in al(F)}function si(_){var F=typeof _;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?_!=="__proto__":_===null}function Ni(_){var F=vl(_),Oe=Dr[F];if(typeof Oe!="function"||!(F in du.prototype))return!1;if(_===Oe)return!0;var $t=Cd(Oe);return!!$t&&_===$t[0]}function Ra(_){return!!cc&&cc in _}var Ya=Rl?Ed:x0;function _a(_){var F=_&&_.constructor,Oe=typeof F=="function"&&F.prototype||Ul;return _===Oe}function Ga(_){return _===_&&!Jf(_)}function xo(_,F){return function(Oe){return Oe==null?!1:Oe[_]===F&&(F!==M||_ in al(Oe))}}function xs(_){var F=gf(_,function($t){return Oe.size===$&&Oe.clear(),$t}),Oe=F.cache;return F}function Qi(_,F){var Oe=_[1],$t=F[1],br=Oe|$t,Jr=br<(et|at|ye),Wn=$t==ye&&Oe==Et||$t==ye&&Oe==ie&&_[7].length<=F[8]||$t==(ye|ie)&&F[7].length<=F[8]&&Oe==Et;if(!(Jr||Wn))return _;$t&et&&(_[2]=F[2],br|=Oe&et?0:Lt);var li=F[3];if(li){var Ri=_[3];_[3]=Ri?ga(Ri,li,F[4]):li,_[4]=Ri?dl(_[3],U):F[4]}return li=F[5],li&&(Ri=_[5],_[5]=Ri?ss(Ri,li,F[6]):li,_[6]=Ri?dl(_[5],U):F[6]),li=F[7],li&&(_[7]=li),$t&ye&&(_[8]=_[8]==null?F[8]:Pl(_[8],F[8])),_[9]==null&&(_[9]=F[9]),_[0]=F[0],_[1]=br,_}function oa(_){var F=[];if(_!=null)for(var Oe in al(_))F.push(Oe);return F}function Zo(_){return ao.call(_)}function fo(_,F,Oe){return F=eu(F===M?_.length-1:F,0),function(){for(var $t=arguments,br=-1,Jr=eu($t.length-F,0),Wn=$i(Jr);++br<Jr;)Wn[br]=$t[F+br];br=-1;for(var li=$i(F+1);++br<F;)li[br]=$t[br];return li[F]=Oe(Wn),Sa(_,this,li)}}function Pa(_,F){return F.length<2?_:Pf(_,tu(F,0,-1))}function to(_,F){for(var Oe=_.length,$t=Pl(F.length,Oe),br=To(_);$t--;){var Jr=F[$t];_[$t]=$a(Jr,Oe)?br[Jr]:M}return _}function Oa(_,F){if(!(F==="constructor"&&typeof _[F]=="function")&&F!="__proto__")return _[F]}var Os=hs(Iu),Bs=kh||function(_,F){return _e.setTimeout(_,F)},so=hs(_u);function yo(_,F,Oe){var $t=F+"";return so(_,Za($t,Au(Ai($t),Oe)))}function hs(_){var F=0,Oe=0;return function(){var $t=Xc(),br=ce-($t-Oe);if(Oe=$t,br>0){if(++F>=ge)return arguments[0]}else F=0;return _.apply(M,arguments)}}function zs(_,F){var Oe=-1,$t=_.length,br=$t-1;for(F=F===M?$t:F;++Oe<F;){var Jr=Hi(Oe,br),Wn=_[Jr];_[Jr]=_[Oe],_[Oe]=Wn}return _.length=F,_}var Cu=xs(function(_){var F=[];return _.charCodeAt(0)===46&&F.push(""),_.replace(fr,function(Oe,$t,br,Jr){F.push(br?Jr.replace(na,"$1"):$t||Oe)}),F});function Gu(_){if(typeof _=="string"||Td(_))return _;var F=_+"";return F=="0"&&1/_==-ne?"-0":F}function Bl(_){if(_!=null){try{return ol.call(_)}catch(F){}try{return _+""}catch(F){}}return""}function Au(_,F){return Co(It,function(Oe){var $t="_."+Oe[0];F&Oe[1]&&!Js(_,$t)&&_.push($t)}),_.sort()}function Sf(_){if(_ instanceof du)return _.clone();var F=new qo(_.__wrapped__,_.__chain__);return F.__actions__=To(_.__actions__),F.__index__=_.__index__,F.__values__=_.__values__,F}function Xl(_,F,Oe){(Oe?ya(_,F,Oe):F===M)?F=1:F=eu(Qs(F),0);var $t=_==null?0:_.length;if(!$t||F<1)return[];for(var br=0,Jr=0,Wn=$i(Sc($t/F));br<$t;)Wn[Jr++]=tu(_,br,br+=F);return Wn}function Ic(_){for(var F=-1,Oe=_==null?0:_.length,$t=0,br=[];++F<Oe;){var Jr=_[F];Jr&&(br[$t++]=Jr)}return br}function wl(){var _=arguments.length;if(!_)return[];for(var F=$i(_-1),Oe=arguments[0],$t=_;$t--;)F[$t-1]=arguments[$t];return Va(Ou(Oe)?To(Oe):[Oe],qu(F,1))}var rf=Qa(function(_,F){return yf(_)?cs(_,qu(F,1,yf,!0)):[]}),mf=Qa(function(_,F){var Oe=ct(F);return yf(Oe)&&(Oe=M),yf(_)?cs(_,qu(F,1,yf,!0),Fs(Oe,2)):[]}),lh=Qa(function(_,F){var Oe=ct(F);return yf(Oe)&&(Oe=M),yf(_)?cs(_,qu(F,1,yf,!0),M,Oe):[]});function pc(_,F,Oe){var $t=_==null?0:_.length;return $t?(F=Oe||F===M?1:Qs(F),tu(_,F<0?0:F,$t)):[]}function fu(_,F,Oe){var $t=_==null?0:_.length;return $t?(F=Oe||F===M?1:Qs(F),F=$t-F,tu(_,0,F<0?0:F)):[]}function wf(_,F){return _&&_.length?hc(_,Fs(F,3),!0,!0):[]}function Uu(_,F){return _&&_.length?hc(_,Fs(F,3),!0):[]}function qf(_,F,Oe,$t){var br=_==null?0:_.length;return br?(Oe&&typeof Oe!="number"&&ya(_,F,Oe)&&(Oe=0,$t=br),El(_,F,Oe,$t)):[]}function js(_,F,Oe){var $t=_==null?0:_.length;if(!$t)return-1;var br=Oe==null?0:Qs(Oe);return br<0&&(br=eu($t+br,0)),Mu(_,Fs(F,3),br)}function Pu(_,F,Oe){var $t=_==null?0:_.length;if(!$t)return-1;var br=$t-1;return Oe!==M&&(br=Qs(Oe),br=Oe<0?eu($t+br,0):Pl(br,$t-1)),Mu(_,Fs(F,3),br,!0)}function Ru(_){var F=_==null?0:_.length;return F?qu(_,1):[]}function nf(_){var F=_==null?0:_.length;return F?qu(_,ne):[]}function pd(_,F){var Oe=_==null?0:_.length;return Oe?(F=F===M?1:Qs(F),qu(_,F)):[]}function w(_){for(var F=-1,Oe=_==null?0:_.length,$t={};++F<Oe;){var br=_[F];$t[br[0]]=br[1]}return $t}function V(_){return _&&_.length?_[0]:M}function Ie(_,F,Oe){var $t=_==null?0:_.length;if(!$t)return-1;var br=Oe==null?0:Qs(Oe);return br<0&&(br=eu($t+br,0)),yl(_,F,br)}function se(_){var F=_==null?0:_.length;return F?tu(_,0,-1):[]}var st=Qa(function(_){var F=Ao(_,yh);return F.length&&F[0]===_[0]?Of(F):[]}),Ue=Qa(function(_){var F=ct(_),Oe=Ao(_,yh);return F===ct(Oe)?F=M:Oe.pop(),Oe.length&&Oe[0]===_[0]?Of(Oe,Fs(F,2)):[]}),Xe=Qa(function(_){var F=ct(_),Oe=Ao(_,yh);return F=typeof F=="function"?F:M,F&&Oe.pop(),Oe.length&&Oe[0]===_[0]?Of(Oe,M,F):[]});function Ve(_,F){return _==null?"":Gf.call(_,F)}function ct(_){var F=_==null?0:_.length;return F?_[F-1]:M}function Ct(_,F,Oe){var $t=_==null?0:_.length;if(!$t)return-1;var br=$t;return Oe!==M&&(br=Qs(Oe),br=br<0?eu($t+br,0):Pl(br,$t-1)),F===F?Tf(_,F,br):Mu(_,Lc,br,!0)}function Bt(_,F){return _&&_.length?Vt(_,Qs(F)):M}var kt=Qa(Jt);function Jt(_,F){return _&&_.length&&F&&F.length?Fn(_,F):_}function Ft(_,F,Oe){return _&&_.length&&F&&F.length?Fn(_,F,Fs(Oe,2)):_}function rr(_,F,Oe){return _&&_.length&&F&&F.length?Fn(_,F,M,Oe):_}var Xt=Ah(function(_,F){var Oe=_==null?0:_.length,$t=is(_,F);return Ci(_,Ao(F,function(br){return $a(br,Oe)?+br:br}).sort(rn)),$t});function pr(_,F){var Oe=[];if(!(_&&_.length))return Oe;var $t=-1,br=[],Jr=_.length;for(F=Fs(F,3);++$t<Jr;){var Wn=_[$t];F(Wn,$t,_)&&(Oe.push(Wn),br.push($t))}return Ci(_,br),Oe}function yr(_){return _==null?_:fc.call(_)}function Ur(_,F,Oe){var $t=_==null?0:_.length;return $t?(Oe&&typeof Oe!="number"&&ya(_,F,Oe)?(F=0,Oe=$t):(F=F==null?0:Qs(F),Oe=Oe===M?$t:Qs(Oe)),tu(_,F,Oe)):[]}function xn(_,F){return Ys(_,F)}function mn(_,F,Oe){return Du(_,F,Fs(Oe,2))}function Mn(_,F){var Oe=_==null?0:_.length;if(Oe){var $t=Ys(_,F);if($t<Oe&&Mh(_[$t],F))return $t}return-1}function Pn(_,F){return Ys(_,F,!0)}function Gn(_,F,Oe){return Du(_,F,Fs(Oe,2),!0)}function ti(_,F){var Oe=_==null?0:_.length;if(Oe){var $t=Ys(_,F,!0)-1;if(Mh(_[$t],F))return $t}return-1}function ii(_){return _&&_.length?Bu(_):[]}function b(_,F){return _&&_.length?Bu(_,Fs(F,2)):[]}function A(_){var F=_==null?0:_.length;return F?tu(_,1,F):[]}function I(_,F,Oe){return _&&_.length?(F=Oe||F===M?1:Qs(F),tu(_,0,F<0?0:F)):[]}function T(_,F,Oe){var $t=_==null?0:_.length;return $t?(F=Oe||F===M?1:Qs(F),F=$t-F,tu(_,F<0?0:F,$t)):[]}function H(_,F){return _&&_.length?hc(_,Fs(F,3),!1,!0):[]}function te(_,F){return _&&_.length?hc(_,Fs(F,3)):[]}var Ae=Qa(function(_){return pl(qu(_,1,yf,!0))}),qe=Qa(function(_){var F=ct(_);return yf(F)&&(F=M),pl(qu(_,1,yf,!0),Fs(F,2))}),Tt=Qa(function(_){var F=ct(_);return F=typeof F=="function"?F:M,pl(qu(_,1,yf,!0),M,F)});function Wt(_){return _&&_.length?pl(_):[]}function vr(_,F){return _&&_.length?pl(_,Fs(F,2)):[]}function Fr(_,F){return F=typeof F=="function"?F:M,_&&_.length?pl(_,M,F):[]}function en(_){if(!(_&&_.length))return[];var F=0;return _=Io(_,function(Oe){if(yf(Oe))return F=eu(Oe.length,F),!0}),lf(F,function(Oe){return Ao(_,_l(Oe))})}function zn(_,F){if(!(_&&_.length))return[];var Oe=en(_);return F==null?Oe:Ao(Oe,function($t){return Sa(F,M,$t)})}var ei=Qa(function(_,F){return yf(_)?cs(_,F):[]}),Qn=Qa(function(_){return Kf(Io(_,yf))}),_n=Qa(function(_){var F=ct(_);return yf(F)&&(F=M),Kf(Io(_,yf),Fs(F,2))}),Xn=Qa(function(_){var F=ct(_);return F=typeof F=="function"?F:M,Kf(Io(_,yf),M,F)}),ai=Qa(en);function nn(_,F){return gh(_||[],F||[],Fi)}function hi(_,F){return gh(_||[],F||[],lu)}var vi=Qa(function(_){var F=_.length,Oe=F>1?_[F-1]:M;return Oe=typeof Oe=="function"?(_.pop(),Oe):M,zn(_,Oe)});function Li(_){var F=Dr(_);return F.__chain__=!0,F}function Vi(_,F){return F(_),_}function sa(_,F){return F(_)}var ua=Ah(function(_){var F=_.length,Oe=F?_[0]:0,$t=this.__wrapped__,br=function(Jr){return is(Jr,_)};return F>1||this.__actions__.length||!($t instanceof du)||!$a(Oe)?this.thru(br):($t=$t.slice(Oe,+Oe+(F?1:0)),$t.__actions__.push({func:sa,args:[br],thisArg:M}),new qo($t,this.__chain__).thru(function(Jr){return F&&!Jr.length&&Jr.push(M),Jr}))});function Lo(){return Li(this)}function Fa(){return new qo(this.value(),this.__chain__)}function go(){this.__values__===M&&(this.__values__=N0(this.value()));var _=this.__index__>=this.__values__.length,F=_?M:this.__values__[this.__index__++];return{done:_,value:F}}function qs(){return this}function e(_){for(var F,Oe=this;Oe instanceof Vo;){var $t=Sf(Oe);$t.__index__=0,$t.__values__=M,F?br.__wrapped__=$t:F=$t;var br=$t;Oe=Oe.__wrapped__}return br.__wrapped__=_,F}function i(){var _=this.__wrapped__;if(_ instanceof du){var F=_;return this.__actions__.length&&(F=new du(this)),F=F.reverse(),F.__actions__.push({func:sa,args:[yr],thisArg:M}),new qo(F,this.__chain__)}return this.thru(yr)}function l(){return uh(this.__wrapped__,this.__actions__)}var y=zo(function(_,F,Oe){uu.call(_,Oe)?++_[Oe]:No(_,Oe,1)});function P(_,F,Oe){var $t=Ou(_)?Ho:Cs;return Oe&&ya(_,F,Oe)&&(F=M),$t(_,Fs(F,3))}function j(_,F){var Oe=Ou(_)?Io:nl;return Oe(_,Fs(F,3))}var Q=Sl(js),we=Sl(Pu);function ut(_,F){return qu(cn(_,F),1)}function Nt(_,F){return qu(cn(_,F),ne)}function Ut(_,F,Oe){return Oe=Oe===M?1:Qs(Oe),qu(cn(_,F),Oe)}function qt(_,F){var Oe=Ou(_)?Co:Qo;return Oe(_,Fs(F,3))}function lr(_,F){var Oe=Ou(_)?Oo:$s;return Oe(_,Fs(F,3))}var xr=zo(function(_,F,Oe){uu.call(_,Oe)?_[Oe].push(F):No(_,Oe,[F])});function Kr(_,F,Oe,$t){_=Wh(_)?_:Ol(_),Oe=Oe&&!$t?Qs(Oe):0;var br=_.length;return Oe<0&&(Oe=eu(br+Oe,0)),xp(_)?Oe<=br&&_.indexOf(F,Oe)>-1:!!br&&yl(_,F,Oe)>-1}var qr=Qa(function(_,F,Oe){var $t=-1,br=typeof F=="function",Jr=Wh(_)?$i(_.length):[];return Qo(_,function(Wn){Jr[++$t]=br?Sa(F,Wn,Oe):pf(Wn,F,Oe)}),Jr}),dn=zo(function(_,F,Oe){No(_,Oe,F)});function cn(_,F){var Oe=Ou(_)?Ao:vf;return Oe(_,Fs(F,3))}function Un(_,F,Oe,$t){return _==null?[]:(Ou(F)||(F=F==null?[]:[F]),Oe=$t?M:Oe,Ou(Oe)||(Oe=Oe==null?[]:[Oe]),ar(_,F,Oe))}var ri=zo(function(_,F,Oe){_[Oe?0:1].push(F)},function(){return[[],[]]});function gi(_,F,Oe){var $t=Ou(_)?gs:th,br=arguments.length<3;return $t(_,Fs(F,4),Oe,br,Qo)}function yi(_,F,Oe){var $t=Ou(_)?Ws:th,br=arguments.length<3;return $t(_,Fs(F,4),Oe,br,$s)}function Ii(_,F){var Oe=Ou(_)?Io:nl;return Oe(_,zf(Fs(F,3)))}function Ji(_){var F=Ou(_)?$n:ks;return F(_)}function Wi(_,F,Oe){(Oe?ya(_,F,Oe):F===M)?F=1:F=Qs(F);var $t=Ou(_)?di:Ts;return $t(_,F)}function ja(_){var F=Ou(_)?Di:Mc;return F(_)}function Jn(_){if(_==null)return 0;if(Wh(_))return xp(_)?_c(_):_.length;var F=wi(_);return F==ee||F==k?_.size:mh(_).length}function la(_,F,Oe){var $t=Ou(_)?bs:Fl;return Oe&&ya(_,F,Oe)&&(F=M),$t(_,Fs(F,3))}var ea=Qa(function(_,F){if(_==null)return[];var Oe=F.length;return Oe>1&&ya(_,F[0],F[1])?F=[]:Oe>2&&ya(F[0],F[1],F[2])&&(F=[F[0]]),ar(_,qu(F,1),[])}),bo=Wc||function(){return _e.Date.now()};function Eo(_,F){if(typeof F!="function")throw new xf(Z);return _=Qs(_),function(){if(--_<1)return F.apply(this,arguments)}}function Ja(_,F,Oe){return F=Oe?M:F,F=_&&F==null?_.length:F,_d(_,ye,M,M,M,M,F)}function Ss(_,F){var Oe;if(typeof F!="function")throw new xf(Z);return _=Qs(_),function(){return--_>0&&(Oe=F.apply(this,arguments)),_<=1&&(F=M),Oe}}var Is=Qa(function(_,F,Oe){var $t=et;if(Oe.length){var br=dl(Oe,Dd(Is));$t|=pe}return _d(_,$t,F,Oe,br)}),pu=Qa(function(_,F,Oe){var $t=et|at;if(Oe.length){var br=dl(Oe,Dd(pu));$t|=pe}return _d(F,$t,_,Oe,br)});function es(_,F,Oe){F=Oe?M:F;var $t=_d(_,Et,M,M,M,M,M,F);return $t.placeholder=es.placeholder,$t}function $u(_,F,Oe){F=Oe?M:F;var $t=_d(_,jt,M,M,M,M,M,F);return $t.placeholder=$u.placeholder,$t}function hl(_,F,Oe){var $t,br,Jr,Wn,li,Ri,Xa=0,Ka=!1,So=!1,Ms=!0;if(typeof _!="function")throw new xf(Z);F=Xd(F)||0,Jf(Oe)&&(Ka=!!Oe.leading,So="maxWait"in Oe,Jr=So?eu(Xd(Oe.maxWait)||0,F):Jr,Ms="trailing"in Oe?!!Oe.trailing:Ms);function bu(dd){var cp=$t,Lp=br;return $t=br=M,Xa=dd,Wn=_.apply(Lp,cp),Wn}function ju(dd){return Xa=dd,li=Bs(jl,F),Ka?bu(dd):Wn}function zl(dd){var cp=dd-Ri,Lp=dd-Xa,Pg=F-cp;return So?Pl(Pg,Jr-Lp):Pg}function Hu(dd){var cp=dd-Ri,Lp=dd-Xa;return Ri===M||cp>=F||cp<0||So&&Lp>=Jr}function jl(){var dd=bo();if(Hu(dd))return sc(dd);li=Bs(jl,zl(dd))}function sc(dd){return li=M,Ms&&$t?bu(dd):($t=br=M,Wn)}function fh(){li!==M&&Ze(li),Xa=0,$t=Ri=br=li=M}function Ud(){return li===M?Wn:sc(bo())}function Rd(){var dd=bo(),cp=Hu(dd);if($t=arguments,br=this,Ri=dd,cp){if(li===M)return ju(Ri);if(So)return Ze(li),li=Bs(jl,F),bu(Ri)}return li===M&&(li=Bs(jl,F)),Wn}return Rd.cancel=fh,Rd.flush=Ud,Rd}var Nl=Qa(function(_,F){return Ns(_,1,F)}),el=Qa(function(_,F,Oe){return Ns(_,Xd(F)||0,Oe)});function af(_){return _d(_,re)}function gf(_,F){if(typeof _!="function"||F!=null&&typeof F!="function")throw new xf(Z);var Oe=function(){var $t=arguments,br=F?F.apply(this,$t):$t[0],Jr=Oe.cache;if(Jr.has(br))return Jr.get(br);var Wn=_.apply(this,$t);return Oe.cache=Jr.set(br,Wn)||Jr,Wn};return Oe.cache=new(gf.Cache||p),Oe}gf.Cache=p;function zf(_){if(typeof _!="function")throw new xf(Z);return function(){var F=arguments;switch(F.length){case 0:return!_.call(this);case 1:return!_.call(this,F[0]);case 2:return!_.call(this,F[0],F[1]);case 3:return!_.call(this,F[0],F[1],F[2])}return!_.apply(this,F)}}function Th(_){return Ss(2,_)}var ed=oe(function(_,F){F=F.length==1&&Ou(F[0])?Ao(F[0],yc(Fs())):Ao(qu(F,1),yc(Fs()));var Oe=F.length;return Qa(function($t){for(var br=-1,Jr=Pl($t.length,Oe);++br<Jr;)$t[br]=F[br].call(this,$t[br]);return Sa(_,this,$t)})}),Zf=Qa(function(_,F){var Oe=dl(F,Dd(Zf));return _d(_,pe,M,F,Oe)}),iu=Qa(function(_,F){var Oe=dl(F,Dd(iu));return _d(_,$e,M,F,Oe)}),Uf=Ah(function(_,F){return _d(_,ie,M,M,M,F)});function xh(_,F){if(typeof _!="function")throw new xf(Z);return F=F===M?F:Qs(F),Qa(_,F)}function Lu(_,F){if(typeof _!="function")throw new xf(Z);return F=F==null?0:eu(Qs(F),0),Qa(function(Oe){var $t=Oe[F],br=Fe(Oe,0,F);return $t&&Va(br,$t),Sa(_,this,br)})}function cl(_,F,Oe){var $t=!0,br=!0;if(typeof _!="function")throw new xf(Z);return Jf(Oe)&&($t="leading"in Oe?!!Oe.leading:$t,br="trailing"in Oe?!!Oe.trailing:br),hl(_,F,{leading:$t,maxWait:F,trailing:br})}function sl(_){return Ja(_,1)}function Wu(_,F){return Zf(Yf(F),_)}function td(){if(!arguments.length)return[];var _=arguments[0];return Ou(_)?_:[_]}function Qf(_){return Ls(_,me)}function Rc(_,F){return F=typeof F=="function"?F:M,Ls(_,me,F)}function $f(_){return Ls(_,ke|me)}function rd(_,F){return F=typeof F=="function"?F:M,Ls(_,ke|me,F)}function Cl(_,F){return F==null||ds(_,F,ch(F))}function Mh(_,F){return _===F||_!==_&&F!==F}var fd=Zu(Uc),Wd=Zu(function(_,F){return _>=F}),oc=oh(function(){return arguments}())?oh:function(_){return bh(_)&&uu.call(_,"callee")&&!ih.call(_,"callee")},Ou=$i.isArray,Od=In?yc(In):Qc;function Wh(_){return _!=null&&Qd(_.length)&&!Ed(_)}function yf(_){return bh(_)&&Wh(_)}function Ep(_){return _===!0||_===!1||bh(_)&&$l(_)==Ot}var bd=gu||x0,ml=Dn?yc(Dn):nc;function vc(_){return bh(_)&&_.nodeType===1&&!_p(_)}function vd(_){if(_==null)return!0;if(Wh(_)&&(Ou(_)||typeof _=="string"||typeof _.splice=="function"||bd(_)||rp(_)||oc(_)))return!_.length;var F=wi(_);if(F==ee||F==k)return!_.size;if(_a(_))return!mh(_).length;for(var Oe in _)if(uu.call(_,Oe))return!1;return!0}function Ad(_,F){return ic(_,F)}function Fd(_,F,Oe){Oe=typeof Oe=="function"?Oe:M;var $t=Oe?Oe(_,F):M;return $t===M?ic(_,F,M,Oe):!!$t}function yp(_){if(!bh(_))return!1;var F=$l(_);return F==pt||F==Rt||typeof _.message=="string"&&typeof _.name=="string"&&!_p(_)}function Ph(_){return typeof _=="number"&&Ks(_)}function Ed(_){if(!Jf(_))return!1;var F=$l(_);return F==Ge||F==wt||F==Ye||F==G}function Bd(_){return typeof _=="number"&&_==Qs(_)}function Qd(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=xe}function Jf(_){var F=typeof _;return _!=null&&(F=="object"||F=="function")}function bh(_){return _!=null&&typeof _=="object"}var Bv=Mi?yc(Mi):Fh;function nv(_,F){return _===F||ku(_,F,Vd(F))}function iv(_,F,Oe){return Oe=typeof Oe=="function"?Oe:M,ku(_,F,Vd(F),Oe)}function av(_){return uv(_)&&_!=+_}function ov(_){if(Ya(_))throw new lo(N);return yu(_)}function sv(_){return _===null}function Nd(_){return _==null}function uv(_){return typeof _=="number"||bh(_)&&$l(_)==Re}function _p(_){if(!bh(_)||$l(_)!=D)return!1;var F=Yl(_);if(F===null)return!0;var Oe=uu.call(F,"constructor")&&F.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&ol.call(Oe)==Ml}var Np=Bi?yc(Bi):Jc;function zp(_){return Bd(_)&&_>=-xe&&_<=xe}var Sp=io?yc(io):sh;function xp(_){return typeof _=="string"||!Ou(_)&&bh(_)&&$l(_)==X}function Td(_){return typeof _=="symbol"||bh(_)&&$l(_)==W}var rp=co?yc(co):vh;function t0(_){return _===M}function F0(_){return bh(_)&&wi(_)==Be}function Nv(_){return bh(_)&&$l(_)==ve}var B0=Zu(Rf),lv=Zu(function(_,F){return _<=F});function N0(_){if(!_)return[];if(Wh(_))return xp(_)?Hl(_):To(_);if(Hh&&_[Hh])return Yo(_[Hh]());var F=wi(_),Oe=F==ee?Gs:F==k?su:Ol;return Oe(_)}function Jd(_){if(!_)return _===0?_:0;if(_=Xd(_),_===ne||_===-ne){var F=_<0?-1:1;return F*Ne}return _===_?_:0}function Qs(_){var F=Jd(_),Oe=F%1;return F===F?Oe?F-Oe:F:0}function np(_){return _?rs(Qs(_),0,He):0}function Xd(_){if(typeof _=="number")return _;if(Td(_))return Pe;if(Jf(_)){var F=typeof _.valueOf=="function"?_.valueOf():_;_=Jf(F)?F+"":F}if(typeof _!="string")return _===0?_:+_;_=Kh(_);var Oe=Ki.test(_);return Oe||uo.test(_)?aa(_.slice(2),Oe?2:8):La.test(_)?Pe:+_}function ip(_){return Ro(_,Xh(_))}function zv(_){return _?rs(Qs(_),-xe,xe):_===0?_:0}function of(_){return _==null?"":ru(_)}var Zp=Ds(function(_,F){if(_a(F)||Wh(F)){Ro(F,ch(F),_);return}for(var Oe in F)uu.call(F,Oe)&&Fi(_,Oe,F[Oe])}),ap=Ds(function(_,F){Ro(F,Xh(F),_)}),Pp=Ds(function(_,F,Oe,$t){Ro(F,Xh(F),_,$t)}),cv=Ds(function(_,F,Oe,$t){Ro(F,ch(F),_,$t)}),fv=Ah(is);function hv(_,F){var Oe=Dl(_);return F==null?Oe:Na(Oe,F)}var r0=Qa(function(_,F){_=al(_);var Oe=-1,$t=F.length,br=$t>2?F[2]:M;for(br&&ya(F[0],F[1],br)&&($t=1);++Oe<$t;)for(var Jr=F[Oe],Wn=Xh(Jr),li=-1,Ri=Wn.length;++li<Ri;){var Xa=Wn[li],Ka=_[Xa];(Ka===M||Mh(Ka,Ul[Xa])&&!uu.call(_,Xa))&&(_[Xa]=Jr[Xa])}return _}),Zv=Qa(function(_){return _.push(M,vp),Sa(i0,M,_)});function Wp(_,F){return jf(_,Fs(F,3),Ju)}function z0(_,F){return jf(_,Fs(F,3),Tc)}function n0(_,F){return _==null?_:Ac(_,Fs(F,3),Xh)}function Z0(_,F){return _==null?_:Qu(_,Fs(F,3),Xh)}function U0(_,F){return _&&Ju(_,Fs(F,3))}function dv(_,F){return _&&Tc(_,Fs(F,3))}function zd(_){return _==null?[]:ec(_,ch(_))}function pv(_){return _==null?[]:ec(_,Xh(_))}function Uv(_,F,Oe){var $t=_==null?M:Pf(_,F);return $t===M?Oe:$t}function wp(_,F){return _!=null&&ji(_,F,Qh)}function vv(_,F){return _!=null&&ji(_,F,Jh)}var $v=jc(function(_,F,Oe){F!=null&&typeof F.toString!="function"&&(F=ao.call(F)),_[F]=Oe},y0(Zd)),bp=jc(function(_,F,Oe){F!=null&&typeof F.toString!="function"&&(F=ao.call(F)),uu.call(_,F)?_[F].push(Oe):_[F]=[Oe]},Fs),Op=Qa(pf);function ch(_){return Wh(_)?Rn(_):mh(_)}function Xh(_){return Wh(_)?Rn(_,!0):If(_)}function mv(_,F){var Oe={};return F=Fs(F,3),Ju(_,function($t,br,Jr){No(Oe,F($t,br,Jr),$t)}),Oe}function Cm(_,F){var Oe={};return F=Fs(F,3),Ju(_,function($t,br,Jr){No(Oe,br,F($t,br,Jr))}),Oe}var $0=Ds(function(_,F,Oe){Mt(_,F,Oe)}),i0=Ds(function(_,F,Oe,$t){Mt(_,F,Oe,$t)}),jv=Ah(function(_,F){var Oe={};if(_==null)return Oe;var $t=!1;F=Ao(F,function(Jr){return Jr=dc(Jr,_),$t||($t=Jr.length>1),Jr}),Ro(_,xd(_),Oe),$t&&(Oe=Ls(Oe,ke|We|me,mp));for(var br=F.length;br--;)ef(Oe,F[br]);return Oe});function gv(_,F){return op(_,zf(Fs(F)))}var a0=Ah(function(_,F){return _==null?{}:Xr(_,F)});function op(_,F){if(_==null)return{};var Oe=Ao(xd(_),function($t){return[$t]});return F=Fs(F),vn(_,Oe,function($t,br){return F($t,br[0])})}function o0(_,F,Oe){F=dc(F,_);var $t=-1,br=F.length;for(br||(br=1,_=M);++$t<br;){var Jr=_==null?M:_[Gu(F[$t])];Jr===M&&($t=br,Jr=Oe),_=Ed(Jr)?Jr.call(_):Jr}return _}function s0(_,F,Oe){return _==null?_:lu(_,F,Oe)}function j0(_,F,Oe,$t){return $t=typeof $t=="function"?$t:M,_==null?_:lu(_,F,Oe,$t)}var Hv=up(ch),yv=up(Xh);function u0(_,F,Oe){var $t=Ou(_),br=$t||bd(_)||rp(_);if(F=Fs(F,4),Oe==null){var Jr=_&&_.constructor;br?Oe=$t?new Jr:[]:Jf(_)?Oe=Ed(Jr)?Dl(Yl(_)):{}:Oe={}}return(br?Co:Ju)(_,function(Wn,li,Ri){return F(Oe,Wn,li,Ri)}),Oe}function l0(_,F){return _==null?!0:ef(_,F)}function c0(_,F,Oe){return _==null?_:Bh(_,F,Yf(Oe))}function H0(_,F,Oe,$t){return $t=typeof $t=="function"?$t:M,_==null?_:Bh(_,F,Yf(Oe),$t)}function Ol(_){return _==null?[]:Eh(_,ch(_))}function _v(_){return _==null?[]:Eh(_,Xh(_))}function xv(_,F,Oe){return Oe===M&&(Oe=F,F=M),Oe!==M&&(Oe=Xd(Oe),Oe=Oe===Oe?Oe:0),F!==M&&(F=Xd(F),F=F===F?F:0),rs(Xd(_),F,Oe)}function Xp(_,F,Oe){return F=Jd(F),Oe===M?(Oe=F,F=0):Oe=Jd(Oe),_=Xd(_),Sh(_,F,Oe)}function Vv(_,F,Oe){if(Oe&&typeof Oe!="boolean"&&ya(_,F,Oe)&&(F=Oe=M),Oe===M&&(typeof F=="boolean"?(Oe=F,F=M):typeof _=="boolean"&&(Oe=_,_=M)),_===M&&F===M?(_=0,F=1):(_=Jd(_),F===M?(F=_,_=0):F=Jd(F)),_>F){var $t=_;_=F,F=$t}if(Oe||_%1||F%1){var br=Ql();return Pl(_+br*(F-_+Gi("1e-"+((br+"").length-1))),F)}return Hi(_,F)}var V0=ac(function(_,F,Oe){return F=F.toLowerCase(),_+(Oe?f0(F):F)});function f0(_){return m0(of(_).toLowerCase())}function bv(_){return _=of(_),_&&_.replace(gn,Ff).replace(fn,"")}function h0(_,F,Oe){_=of(_),F=ru(F);var $t=_.length;Oe=Oe===M?$t:rs(Qs(Oe),0,$t);var br=Oe;return Oe-=F.length,Oe>=0&&_.slice(Oe,br)==F}function Ev(_){return _=of(_),_&&zt.test(_)?_.replace(jn,Zl):_}function Up(_){return _=of(_),_&&Yr.test(_)?_.replace(tt,"\\$&"):_}var Am=ac(function(_,F,Oe){return _+(Oe?"-":"")+F.toLowerCase()}),Tm=ac(function(_,F,Oe){return _+(Oe?" ":"")+F.toLowerCase()}),lp=$c("toLowerCase");function Sv(_,F,Oe){_=of(_),F=Qs(F);var $t=F?_c(_):0;if(!F||$t>=F)return _;var br=(F-$t)/2;return Oc(Vh(br),Oe)+_+Oc(Sc(br),Oe)}function Cp(_,F,Oe){_=of(_),F=Qs(F);var $t=F?_c(_):0;return F&&$t<F?_+Oc(F-$t,Oe):_}function Kd(_,F,Oe){_=of(_),F=Qs(F);var $t=F?_c(_):0;return F&&$t<F?Oc(F-$t,Oe)+_:_}function Kp(_,F,Oe){return Oe||F==null?F=0:F&&(F=+F),Nc(of(_).replace(Tn,""),F||0)}function Ap(_,F,Oe){return(Oe?ya(_,F,Oe):F===M)?F=1:F=Qs(F),mo(of(_),F)}function G0(){var _=arguments,F=of(_[0]);return _.length<3?F:F.replace(_[1],_[2])}var mg=ac(function(_,F,Oe){return _+(Oe?"_":"")+F.toLowerCase()});function gg(_,F,Oe){return Oe&&typeof Oe!="number"&&ya(_,F,Oe)&&(F=Oe=M),Oe=Oe===M?He:Oe>>>0,Oe?(_=of(_),_&&(typeof F=="string"||F!=null&&!Np(F))&&(F=ru(F),!F&&rh(_))?Fe(Hl(_),0,Oe):_.split(F,Oe)):[]}var py=ac(function(_,F,Oe){return _+(Oe?" ":"")+m0(F)});function M_(_,F,Oe){return _=of(_),Oe=Oe==null?0:rs(Qs(Oe),0,_.length),F=ru(F),_.slice(Oe,Oe+F.length)==F}function W0(_,F,Oe){var $t=Dr.templateSettings;Oe&&ya(_,F,Oe)&&(F=M),_=of(_),F=Pp({},F,$t,pp);var br=Pp({},F.imports,$t.imports,pp),Jr=ch(br),Wn=Eh(br,Jr),li,Ri,Xa=0,Ka=F.interpolate||Oi,So="__p += '",Ms=Tl((F.escape||Oi).source+"|"+Ka.source+"|"+(Ka===_r?xi:Oi).source+"|"+(F.evaluate||Oi).source+"|$","g"),bu="//# sourceURL="+(uu.call(F,"sourceURL")?(F.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pr+"]")+`
`;_.replace(Ms,function(Hu,jl,sc,fh,Ud,Rd){return sc||(sc=fh),So+=_.slice(Xa,Rd).replace(fi,Dc),jl&&(li=!0,So+=`' +
__e(`+jl+`) +
'`),Ud&&(Ri=!0,So+=`';
`+Ud+`;
__p += '`),sc&&(So+=`' +
((__t = (`+sc+`)) == null ? '' : __t) +
'`),Xa=Rd+Hu.length,Hu}),So+=`';
`;var ju=uu.call(F,"variable")&&F.variable;if(!ju)So=`with (obj) {
`+So+`
}
`;else if(Ln.test(ju))throw new lo(B);So=(Ri?So.replace(Zn,""):So).replace(Cr,"$1").replace(Nr,"$1;"),So="function("+(ju||"obj")+`) {
`+(ju?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(li?", __e = _.escape":"")+(Ri?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+So+`return __p
}`;var zl=Ip(function(){return Es(Jr,bu+"return "+So).apply(M,Wn)});if(zl.source=So,yp(zl))throw zl;return zl}function d0(_){return of(_).toLowerCase()}function wv(_){return of(_).toUpperCase()}function p0(_,F,Oe){if(_=of(_),_&&(Oe||F===M))return Kh(_);if(!_||!(F=ru(F)))return _;var $t=Hl(_),br=Hl(F),Jr=Af($t,br),Wn=_f($t,br)+1;return Fe($t,Jr,Wn).join("")}function Mm(_,F,Oe){if(_=of(_),_&&(Oe||F===M))return _.slice(0,ff(_)+1);if(!_||!(F=ru(F)))return _;var $t=Hl(_),br=_f($t,Hl(F))+1;return Fe($t,0,br).join("")}function Pm(_,F,Oe){if(_=of(_),_&&(Oe||F===M))return _.replace(Tn,"");if(!_||!(F=ru(F)))return _;var $t=Hl(_),br=Af($t,Hl(F));return Fe($t,br).join("")}function vy(_,F){var Oe=De,$t=le;if(Jf(F)){var br="separator"in F?F.separator:br;Oe="length"in F?Qs(F.length):Oe,$t="omission"in F?ru(F.omission):$t}_=of(_);var Jr=_.length;if(rh(_)){var Wn=Hl(_);Jr=Wn.length}if(Oe>=Jr)return _;var li=Oe-_c($t);if(li<1)return $t;var Ri=Wn?Fe(Wn,0,li).join(""):_.slice(0,li);if(br===M)return Ri+$t;if(Wn&&(li+=Ri.length-li),Np(br)){if(_.slice(li).search(br)){var Xa,Ka=Ri;for(br.global||(br=Tl(br.source,of(ta.exec(br))+"g")),br.lastIndex=0;Xa=br.exec(Ka);)var So=Xa.index;Ri=Ri.slice(0,So===M?li:So)}}else if(_.indexOf(ru(br),li)!=li){var Ms=Ri.lastIndexOf(br);Ms>-1&&(Ri=Ri.slice(0,Ms))}return Ri+$t}function gy(_){return _=of(_),_&&Pt.test(_)?_.replace(bt,xc):_}var v0=ac(function(_,F,Oe){return _+(Oe?" ":"")+F.toUpperCase()}),m0=$c("toUpperCase");function g0(_,F,Oe){return _=of(_),F=Oe?M:F,F===M?od(_)?Gc(_):gl(_):_.match(F)||[]}var Ip=Qa(function(_,F){try{return Sa(_,M,F)}catch(Oe){return yp(Oe)?Oe:new lo(Oe)}}),$p=Ah(function(_,F){return Co(F,function(Oe){Oe=Gu(Oe),No(_,Oe,Is(_[Oe],_))}),_});function Cv(_){var F=_==null?0:_.length,Oe=Fs();return _=F?Ao(_,function($t){if(typeof $t[1]!="function")throw new xf(Z);return[Oe($t[0]),$t[1]]}):[],Qa(function($t){for(var br=-1;++br<F;){var Jr=_[br];if(Sa(Jr[0],this,$t))return Sa(Jr[1],this,$t)}})}function Av(_){return vo(Ls(_,ke))}function y0(_){return function(){return _}}function Id(_,F){return _==null||_!==_?F:_}var Rp=Wl(),Om=Wl(!0);function Zd(_){return _}function Gv(_){return Nf(typeof _=="function"?_:Ls(_,ke))}function Wv(_){return ue(Ls(_,ke))}function X0(_,F){return Rr(_,Ls(F,ke))}var yg=Qa(function(_,F){return function(Oe){return pf(Oe,_,F)}}),Yp=Qa(function(_,F){return function(Oe){return pf(_,Oe,F)}});function qp(_,F,Oe){var $t=ch(F),br=ec(F,$t);Oe==null&&!(Jf(F)&&(br.length||!$t.length))&&(Oe=F,F=_,_=this,br=ec(F,ch(F)));var Jr=!(Jf(Oe)&&"chain"in Oe)||!!Oe.chain,Wn=Ed(_);return Co(br,function(li){var Ri=F[li];_[li]=Ri,Wn&&(_.prototype[li]=function(){var Xa=this.__chain__;if(Jr||Xa){var Ka=_(this.__wrapped__),So=Ka.__actions__=To(this.__actions__);return So.push({func:Ri,args:arguments,thisArg:_}),Ka.__chain__=Xa,Ka}return Ri.apply(_,Va([this.value()],arguments))})}),_}function hd(){return _e._===this&&(_e._=Hf),this}function K0(){}function Tv(_){return _=Qs(_),Qa(function(F){return Vt(F,_)})}var jp=_h(Ao),_g=_h(Ho),xg=_h(bs);function Im(_){return Ua(_)?_l(Gu(_)):Sn(_)}function Rm(_){return function(F){return _==null?M:Pf(_,F)}}var Y0=Hd(),Lm=Hd(!0);function _0(){return[]}function x0(){return!1}function km(){return{}}function bg(){return""}function Eg(){return!0}function Qp(_,F){if(_=Qs(_),_<1||_>xe)return[];var Oe=He,$t=Pl(_,He);F=Fs(F),_-=He;for(var br=lf($t,F);++Oe<_;)F(Oe);return br}function b0(_){return Ou(_)?Ao(_,Gu):Td(_)?[_]:To(Cu(of(_)))}function q0(_){var F=++Bc;return of(_)+F}var Dm=hu(function(_,F){return _+F},0),Sg=Hc("ceil"),wg=hu(function(_,F){return _/F},1),Cg=Hc("floor");function Q0(_){return _&&_.length?_s(_,Zd,Uc):M}function Mv(_,F){return _&&_.length?_s(_,Fs(F,2),Uc):M}function J0(_){return dh(_,Zd)}function Ag(_,F){return dh(_,Fs(F,2))}function Fm(_){return _&&_.length?_s(_,Zd,Rf):M}function Bm(_,F){return _&&_.length?_s(_,Fs(F,2),Rf):M}var Nm=hu(function(_,F){return _*F},1),zm=Hc("round"),Tg=hu(function(_,F){return _-F},0);function Mg(_){return _&&_.length?Cf(_,Zd):0}function yy(_,F){return _&&_.length?Cf(_,Fs(F,2)):0}return Dr.after=Eo,Dr.ary=Ja,Dr.assign=Zp,Dr.assignIn=ap,Dr.assignInWith=Pp,Dr.assignWith=cv,Dr.at=fv,Dr.before=Ss,Dr.bind=Is,Dr.bindAll=$p,Dr.bindKey=pu,Dr.castArray=td,Dr.chain=Li,Dr.chunk=Xl,Dr.compact=Ic,Dr.concat=wl,Dr.cond=Cv,Dr.conforms=Av,Dr.constant=y0,Dr.countBy=y,Dr.create=hv,Dr.curry=es,Dr.curryRight=$u,Dr.debounce=hl,Dr.defaults=r0,Dr.defaultsDeep=Zv,Dr.defer=Nl,Dr.delay=el,Dr.difference=rf,Dr.differenceBy=mf,Dr.differenceWith=lh,Dr.drop=pc,Dr.dropRight=fu,Dr.dropRightWhile=wf,Dr.dropWhile=Uu,Dr.fill=qf,Dr.filter=j,Dr.flatMap=ut,Dr.flatMapDeep=Nt,Dr.flatMapDepth=Ut,Dr.flatten=Ru,Dr.flattenDeep=nf,Dr.flattenDepth=pd,Dr.flip=af,Dr.flow=Rp,Dr.flowRight=Om,Dr.fromPairs=w,Dr.functions=zd,Dr.functionsIn=pv,Dr.groupBy=xr,Dr.initial=se,Dr.intersection=st,Dr.intersectionBy=Ue,Dr.intersectionWith=Xe,Dr.invert=$v,Dr.invertBy=bp,Dr.invokeMap=qr,Dr.iteratee=Gv,Dr.keyBy=dn,Dr.keys=ch,Dr.keysIn=Xh,Dr.map=cn,Dr.mapKeys=mv,Dr.mapValues=Cm,Dr.matches=Wv,Dr.matchesProperty=X0,Dr.memoize=gf,Dr.merge=$0,Dr.mergeWith=i0,Dr.method=yg,Dr.methodOf=Yp,Dr.mixin=qp,Dr.negate=zf,Dr.nthArg=Tv,Dr.omit=jv,Dr.omitBy=gv,Dr.once=Th,Dr.orderBy=Un,Dr.over=jp,Dr.overArgs=ed,Dr.overEvery=_g,Dr.overSome=xg,Dr.partial=Zf,Dr.partialRight=iu,Dr.partition=ri,Dr.pick=a0,Dr.pickBy=op,Dr.property=Im,Dr.propertyOf=Rm,Dr.pull=kt,Dr.pullAll=Jt,Dr.pullAllBy=Ft,Dr.pullAllWith=rr,Dr.pullAt=Xt,Dr.range=Y0,Dr.rangeRight=Lm,Dr.rearg=Uf,Dr.reject=Ii,Dr.remove=pr,Dr.rest=xh,Dr.reverse=yr,Dr.sampleSize=Wi,Dr.set=s0,Dr.setWith=j0,Dr.shuffle=ja,Dr.slice=Ur,Dr.sortBy=ea,Dr.sortedUniq=ii,Dr.sortedUniqBy=b,Dr.split=gg,Dr.spread=Lu,Dr.tail=A,Dr.take=I,Dr.takeRight=T,Dr.takeRightWhile=H,Dr.takeWhile=te,Dr.tap=Vi,Dr.throttle=cl,Dr.thru=sa,Dr.toArray=N0,Dr.toPairs=Hv,Dr.toPairsIn=yv,Dr.toPath=b0,Dr.toPlainObject=ip,Dr.transform=u0,Dr.unary=sl,Dr.union=Ae,Dr.unionBy=qe,Dr.unionWith=Tt,Dr.uniq=Wt,Dr.uniqBy=vr,Dr.uniqWith=Fr,Dr.unset=l0,Dr.unzip=en,Dr.unzipWith=zn,Dr.update=c0,Dr.updateWith=H0,Dr.values=Ol,Dr.valuesIn=_v,Dr.without=ei,Dr.words=g0,Dr.wrap=Wu,Dr.xor=Qn,Dr.xorBy=_n,Dr.xorWith=Xn,Dr.zip=ai,Dr.zipObject=nn,Dr.zipObjectDeep=hi,Dr.zipWith=vi,Dr.entries=Hv,Dr.entriesIn=yv,Dr.extend=ap,Dr.extendWith=Pp,qp(Dr,Dr),Dr.add=Dm,Dr.attempt=Ip,Dr.camelCase=V0,Dr.capitalize=f0,Dr.ceil=Sg,Dr.clamp=xv,Dr.clone=Qf,Dr.cloneDeep=$f,Dr.cloneDeepWith=rd,Dr.cloneWith=Rc,Dr.conformsTo=Cl,Dr.deburr=bv,Dr.defaultTo=Id,Dr.divide=wg,Dr.endsWith=h0,Dr.eq=Mh,Dr.escape=Ev,Dr.escapeRegExp=Up,Dr.every=P,Dr.find=Q,Dr.findIndex=js,Dr.findKey=Wp,Dr.findLast=we,Dr.findLastIndex=Pu,Dr.findLastKey=z0,Dr.floor=Cg,Dr.forEach=qt,Dr.forEachRight=lr,Dr.forIn=n0,Dr.forInRight=Z0,Dr.forOwn=U0,Dr.forOwnRight=dv,Dr.get=Uv,Dr.gt=fd,Dr.gte=Wd,Dr.has=wp,Dr.hasIn=vv,Dr.head=V,Dr.identity=Zd,Dr.includes=Kr,Dr.indexOf=Ie,Dr.inRange=Xp,Dr.invoke=Op,Dr.isArguments=oc,Dr.isArray=Ou,Dr.isArrayBuffer=Od,Dr.isArrayLike=Wh,Dr.isArrayLikeObject=yf,Dr.isBoolean=Ep,Dr.isBuffer=bd,Dr.isDate=ml,Dr.isElement=vc,Dr.isEmpty=vd,Dr.isEqual=Ad,Dr.isEqualWith=Fd,Dr.isError=yp,Dr.isFinite=Ph,Dr.isFunction=Ed,Dr.isInteger=Bd,Dr.isLength=Qd,Dr.isMap=Bv,Dr.isMatch=nv,Dr.isMatchWith=iv,Dr.isNaN=av,Dr.isNative=ov,Dr.isNil=Nd,Dr.isNull=sv,Dr.isNumber=uv,Dr.isObject=Jf,Dr.isObjectLike=bh,Dr.isPlainObject=_p,Dr.isRegExp=Np,Dr.isSafeInteger=zp,Dr.isSet=Sp,Dr.isString=xp,Dr.isSymbol=Td,Dr.isTypedArray=rp,Dr.isUndefined=t0,Dr.isWeakMap=F0,Dr.isWeakSet=Nv,Dr.join=Ve,Dr.kebabCase=Am,Dr.last=ct,Dr.lastIndexOf=Ct,Dr.lowerCase=Tm,Dr.lowerFirst=lp,Dr.lt=B0,Dr.lte=lv,Dr.max=Q0,Dr.maxBy=Mv,Dr.mean=J0,Dr.meanBy=Ag,Dr.min=Fm,Dr.minBy=Bm,Dr.stubArray=_0,Dr.stubFalse=x0,Dr.stubObject=km,Dr.stubString=bg,Dr.stubTrue=Eg,Dr.multiply=Nm,Dr.nth=Bt,Dr.noConflict=hd,Dr.noop=K0,Dr.now=bo,Dr.pad=Sv,Dr.padEnd=Cp,Dr.padStart=Kd,Dr.parseInt=Kp,Dr.random=Vv,Dr.reduce=gi,Dr.reduceRight=yi,Dr.repeat=Ap,Dr.replace=G0,Dr.result=o0,Dr.round=zm,Dr.runInContext=qn,Dr.sample=Ji,Dr.size=Jn,Dr.snakeCase=mg,Dr.some=la,Dr.sortedIndex=xn,Dr.sortedIndexBy=mn,Dr.sortedIndexOf=Mn,Dr.sortedLastIndex=Pn,Dr.sortedLastIndexBy=Gn,Dr.sortedLastIndexOf=ti,Dr.startCase=py,Dr.startsWith=M_,Dr.subtract=Tg,Dr.sum=Mg,Dr.sumBy=yy,Dr.template=W0,Dr.times=Qp,Dr.toFinite=Jd,Dr.toInteger=Qs,Dr.toLength=np,Dr.toLower=d0,Dr.toNumber=Xd,Dr.toSafeInteger=zv,Dr.toString=of,Dr.toUpper=wv,Dr.trim=p0,Dr.trimEnd=Mm,Dr.trimStart=Pm,Dr.truncate=vy,Dr.unescape=gy,Dr.uniqueId=q0,Dr.upperCase=v0,Dr.upperFirst=m0,Dr.each=qt,Dr.eachRight=lr,Dr.first=V,qp(Dr,function(){var _={};return Ju(Dr,function(F,Oe){uu.call(Dr.prototype,Oe)||(_[Oe]=F)}),_}(),{chain:!1}),Dr.VERSION=c,Co(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){Dr[_].placeholder=Dr}),Co(["drop","take"],function(_,F){du.prototype[_]=function(Oe){Oe=Oe===M?1:eu(Qs(Oe),0);var $t=this.__filtered__&&!F?new du(this):this.clone();return $t.__filtered__?$t.__takeCount__=Pl(Oe,$t.__takeCount__):$t.__views__.push({size:Pl(Oe,He),type:_+($t.__dir__<0?"Right":"")}),$t},du.prototype[_+"Right"]=function(Oe){return this.reverse()[_](Oe).reverse()}}),Co(["filter","map","takeWhile"],function(_,F){var Oe=F+1,$t=Oe==je||Oe==Me;du.prototype[_]=function(br){var Jr=this.clone();return Jr.__iteratees__.push({iteratee:Fs(br,3),type:Oe}),Jr.__filtered__=Jr.__filtered__||$t,Jr}}),Co(["head","last"],function(_,F){var Oe="take"+(F?"Right":"");du.prototype[_]=function(){return this[Oe](1).value()[0]}}),Co(["initial","tail"],function(_,F){var Oe="drop"+(F?"":"Right");du.prototype[_]=function(){return this.__filtered__?new du(this):this[Oe](1)}}),du.prototype.compact=function(){return this.filter(Zd)},du.prototype.find=function(_){return this.filter(_).head()},du.prototype.findLast=function(_){return this.reverse().find(_)},du.prototype.invokeMap=Qa(function(_,F){return typeof _=="function"?new du(this):this.map(function(Oe){return pf(Oe,_,F)})}),du.prototype.reject=function(_){return this.filter(zf(Fs(_)))},du.prototype.slice=function(_,F){_=Qs(_);var Oe=this;return Oe.__filtered__&&(_>0||F<0)?new du(Oe):(_<0?Oe=Oe.takeRight(-_):_&&(Oe=Oe.drop(_)),F!==M&&(F=Qs(F),Oe=F<0?Oe.dropRight(-F):Oe.take(F-_)),Oe)},du.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},du.prototype.toArray=function(){return this.take(He)},Ju(du.prototype,function(_,F){var Oe=/^(?:filter|find|map|reject)|While$/.test(F),$t=/^(?:head|last)$/.test(F),br=Dr[$t?"take"+(F=="last"?"Right":""):F],Jr=$t||/^find/.test(F);br&&(Dr.prototype[F]=function(){var Wn=this.__wrapped__,li=$t?[1]:arguments,Ri=Wn instanceof du,Xa=li[0],Ka=Ri||Ou(Wn),So=function(jl){var sc=br.apply(Dr,Va([jl],li));return $t&&Ms?sc[0]:sc};Ka&&Oe&&typeof Xa=="function"&&Xa.length!=1&&(Ri=Ka=!1);var Ms=this.__chain__,bu=!!this.__actions__.length,ju=Jr&&!Ms,zl=Ri&&!bu;if(!Jr&&Ka){Wn=zl?Wn:new du(this);var Hu=_.apply(Wn,li);return Hu.__actions__.push({func:sa,args:[So],thisArg:M}),new qo(Hu,Ms)}return ju&&zl?_.apply(this,li):(Hu=this.thru(So),ju?$t?Hu.value()[0]:Hu.value():Hu)})}),Co(["pop","push","shift","sort","splice","unshift"],function(_){var F=qh[_],Oe=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",$t=/^(?:pop|shift)$/.test(_);Dr.prototype[_]=function(){var br=arguments;if($t&&!this.__chain__){var Jr=this.value();return F.apply(Ou(Jr)?Jr:[],br)}return this[Oe](function(Wn){return F.apply(Ou(Wn)?Wn:[],br)})}}),Ju(du.prototype,function(_,F){var Oe=Dr[F];if(Oe){var $t=Oe.name+"";uu.call(Kc,$t)||(Kc[$t]=[]),Kc[$t].push({name:F,func:Oe})}}),Kc[Pc(M,at).name]=[{name:"wrapper",func:M}],du.prototype.clone=Dh,du.prototype.reverse=Wf,du.prototype.value=zc,Dr.prototype.at=ua,Dr.prototype.chain=Lo,Dr.prototype.commit=Fa,Dr.prototype.next=go,Dr.prototype.plant=e,Dr.prototype.reverse=i,Dr.prototype.toJSON=Dr.prototype.valueOf=Dr.prototype.value=l,Dr.prototype.first=Dr.prototype.head,Hh&&(Dr.prototype[Hh]=qs),Dr},nh=Mf();_e._=nh,v=function(){return nh}.call(Ee,g,Ee,vt),v!==M&&(vt.exports=v)}).call(this)},82492:function(vt,Ee,g){var v=g(42980),M=g(21463),c=M(function(K,N,Z){v(K,N,Z)});vt.exports=c},7771:function(vt,Ee,g){var v=g(55639),M=function(){return v.Date.now()};vt.exports=M},70479:function(vt){function Ee(){return[]}vt.exports=Ee},95062:function(vt){function Ee(){return!1}vt.exports=Ee},14841:function(vt,Ee,g){var v=g(4107),M=g(13218),c=g(33448),K=0/0,N=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,B=/^0o[0-7]+$/i,L=parseInt;function $(U){if(typeof U=="number")return U;if(c(U))return K;if(M(U)){var ke=typeof U.valueOf=="function"?U.valueOf():U;U=M(ke)?ke+"":ke}if(typeof U!="string")return U===0?U:+U;U=v(U);var We=Z.test(U);return We||B.test(U)?L(U.slice(2),We?2:8):N.test(U)?K:+U}vt.exports=$},59881:function(vt,Ee,g){var v=g(98363),M=g(81704);function c(K){return v(K,M(K))}vt.exports=c},6158:function(vt){(function(Ee,g){vt.exports=g()})(this,function(){"use strict";var Ee,g,v;function M(c,K){if(!Ee)Ee=K;else if(!g)g=K;else{var N="var sharedChunk = {}; ("+Ee+")(sharedChunk); ("+g+")(sharedChunk);",Z={};Ee(Z),v=K(Z),typeof window!="undefined"&&(v.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}}return M(["exports"],function(c){"use strict";function K(e,i){return e(i={exports:{}},i.exports),i.exports}var N=Z;function Z(e,i,l,y){this.cx=3*e,this.bx=3*(l-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(y-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=y,this.p2x=l,this.p2y=y}Z.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Z.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Z.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Z.prototype.solveCurveX=function(e,i){var l,y,P,j,Q;for(i===void 0&&(i=1e-6),P=e,Q=0;Q<8;Q++){if(j=this.sampleCurveX(P)-e,Math.abs(j)<i)return P;var we=this.sampleCurveDerivativeX(P);if(Math.abs(we)<1e-6)break;P-=j/we}if((P=e)<(l=0))return l;if(P>(y=1))return y;for(;l<y;){if(j=this.sampleCurveX(P),Math.abs(j-e)<i)return P;e>j?l=P:y=P,P=.5*(y-l)+l}return P},Z.prototype.solve=function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))};var B=L;function L(e,i){this.x=e,this.y=i}L.prototype={clone:function(){return new L(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,i){return this.clone()._rotateAround(e,i)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var i=e.x-this.x,l=e.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,i){return Math.atan2(this.x*i-this.y*e,this.x*e+this.y*i)},_matMult:function(e){var i=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var i=Math.cos(e),l=Math.sin(e),y=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=y,this},_rotateAround:function(e,i){var l=Math.cos(e),y=Math.sin(e),P=i.y+y*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-y*(this.y-i.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},L.convert=function(e){return e instanceof L?e:Array.isArray(e)?new L(e[0],e[1]):e};var $=typeof self!="undefined"?self:{},U=Math.pow(2,53)-1;function ke(e,i,l,y){var P=new N(e,i,l,y);return function(j){return P.solve(j)}}var We=ke(.25,.1,.25,1);function me(e,i,l){return Math.min(l,Math.max(i,e))}function Le(e,i,l){var y=l-i,P=((e-i)%y+y)%y+i;return P===i?l:P}function Se(e){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];for(var y=0,P=i;y<P.length;y+=1){var j=P[y];for(var Q in j)e[Q]=j[Q]}return e}var et=1;function at(){return et++}function Lt(){return function e(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Et(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function jt(e,i){e.forEach(function(l){i[l]&&(i[l]=i[l].bind(i))})}function pe(e,i){return e.indexOf(i,e.length-i.length)!==-1}function $e(e,i,l){var y={};for(var P in e)y[P]=i.call(l||this,e[P],P,e);return y}function ye(e,i,l){var y={};for(var P in e)i.call(l||this,e[P],P,e)&&(y[P]=e[P]);return y}function ie(e){return Array.isArray(e)?e.map(ie):typeof e=="object"&&e?$e(e,ie):e}var re={};function De(e){re[e]||(typeof console!="undefined"&&console.warn(e),re[e]=!0)}function le(e,i,l){return(l.y-e.y)*(i.x-e.x)>(i.y-e.y)*(l.x-e.x)}function ge(e){for(var i=0,l=0,y=e.length,P=y-1,j=void 0,Q=void 0;l<y;P=l++)i+=((Q=e[P]).x-(j=e[l]).x)*(j.y+Q.y);return i}function ce(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function je(e){var i={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(y,P,j,Q){var we=j||Q;return i[P]=!we||we.toLowerCase(),""}),i["max-age"]){var l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}var J=null;function Me(e){if(J==null){var i=e.navigator?e.navigator.userAgent:null;J=!!e.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return J}function ne(e){try{var i=$[e];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch(l){return!1}}var xe,Ne,Pe,He,lt=$.performance&&$.performance.now?$.performance.now.bind($.performance):Date.now.bind(Date),ft=$.requestAnimationFrame||$.mozRequestAnimationFrame||$.webkitRequestAnimationFrame||$.msRequestAnimationFrame,It=$.cancelAnimationFrame||$.mozCancelAnimationFrame||$.webkitCancelAnimationFrame||$.msCancelAnimationFrame,fe={now:lt,frame:function(e){var i=ft(e);return{cancel:function(){return It(i)}}},getImageData:function(e,i){i===void 0&&(i=0);var l=$.document.createElement("canvas"),y=l.getContext("2d");if(!y)throw new Error("failed to create canvas 2d context");return l.width=e.width,l.height=e.height,y.drawImage(e,0,0,e.width,e.height),y.getImageData(-i,-i,e.width+2*i,e.height+2*i)},resolveURL:function(e){return xe||(xe=$.document.createElement("a")),xe.href=e,xe.href},hardwareConcurrency:$.navigator&&$.navigator.hardwareConcurrency||4,get devicePixelRatio(){return $.devicePixelRatio},get prefersReducedMotion(){return!!$.matchMedia&&(Ne==null&&(Ne=$.matchMedia("(prefers-reduced-motion: reduce)")),Ne.matches)}},_t={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ye={supported:!1,testSupport:function(e){!Ot&&He&&(mt?Rt(e):Pe=e)}},Ot=!1,mt=!1;function Rt(e){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,He),e.isContextLost())return;Ye.supported=!0}catch(l){}e.deleteTexture(i),Ot=!0}$.document&&((He=$.document.createElement("img")).onload=function(){Pe&&Rt(Pe),Pe=null,mt=!0},He.onerror=function(){Ot=!0,Pe=null},He.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var pt="01",Ge=function(e,i){this._transformRequestFn=e,this._customAccessToken=i,this._createSkuToken()};function wt(e){return e.indexOf("mapbox:")===0}Ge.prototype._createSkuToken=function(){var e=function(){for(var i="",l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",pt,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Ge.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ge.prototype.transformRequest=function(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}},Ge.prototype.normalizeStyleURL=function(e,i){if(!wt(e))return e;var l=D(e);return l.path="/styles/v1"+l.path,this._makeAPIURL(l,this._customAccessToken||i)},Ge.prototype.normalizeGlyphsURL=function(e,i){if(!wt(e))return e;var l=D(e);return l.path="/fonts/v1"+l.path,this._makeAPIURL(l,this._customAccessToken||i)},Ge.prototype.normalizeSourceURL=function(e,i){if(!wt(e))return e;var l=D(e);return l.path="/v4/"+l.authority+".json",l.params.push("secure"),this._makeAPIURL(l,this._customAccessToken||i)},Ge.prototype.normalizeSpriteURL=function(e,i,l,y){var P=D(e);return wt(e)?(P.path="/styles/v1"+P.path+"/sprite"+i+l,this._makeAPIURL(P,this._customAccessToken||y)):(P.path+=""+i+l,q(P))},Ge.prototype.normalizeTileURL=function(e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!wt(e))return e;var l=D(e);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,(fe.devicePixelRatio>=2||i===512?"@2x":"")+(Ye.supported?".webp":"$1")),l.path=l.path.replace(/^.+\/v4\//,"/"),l.path="/v4"+l.path;var y=this._customAccessToken||function(P){for(var j=0,Q=P;j<Q.length;j+=1){var we=Q[j].match(/^access_token=(.*)$/);if(we)return we[1]}return null}(l.params)||_t.ACCESS_TOKEN;return _t.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&l.params.push("sku="+this._skuToken),this._makeAPIURL(l,y)},Ge.prototype.canonicalizeTileURL=function(e,i){var l=D(e);if(!l.path.match(/(^\/v4\/)/)||!l.path.match(/\.[\w]+$/))return e;var y="mapbox://tiles/";y+=l.path.replace("/v4/","");var P=l.params;return i&&(P=P.filter(function(j){return!j.match(/^access_token=/)})),P.length&&(y+="?"+P.join("&")),y},Ge.prototype.canonicalizeTileset=function(e,i){for(var l=!!i&&wt(i),y=[],P=0,j=e.tiles||[];P<j.length;P+=1){var Q=j[P];Re(Q)?y.push(this.canonicalizeTileURL(Q,l)):y.push(Q)}return y},Ge.prototype._makeAPIURL=function(e,i){var l="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",y=D(_t.API_URL);if(e.protocol=y.protocol,e.authority=y.authority,e.protocol==="http"){var P=e.params.indexOf("secure");P>=0&&e.params.splice(P,1)}if(y.path!=="/"&&(e.path=""+y.path+e.path),!_t.REQUIRE_ACCESS_TOKEN)return q(e);if(!(i=i||_t.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+l);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return e.params=e.params.filter(function(j){return j.indexOf("access_token")===-1}),e.params.push("access_token="+i),q(e)};var ee=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Re(e){return ee.test(e)}var dt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function D(e){var i=e.match(dt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function q(e){var i=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+i}function G(e){if(!e)return null;var i=e.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent($.atob(i[1]).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(l){return null}}var O=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};O.prototype.getStorageKey=function(e){var i,l=G(_t.ACCESS_TOKEN);return i=l&&l.u?$.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,function(y,P){return String.fromCharCode(Number("0x"+P))})):_t.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+i:"mapbox.eventData:"+i},O.prototype.fetchEventData=function(){var e=ne("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{var y=$.localStorage.getItem(i);y&&(this.eventData=JSON.parse(y));var P=$.localStorage.getItem(l);P&&(this.anonId=P)}catch(j){De("Unable to read from LocalStorage")}},O.prototype.saveEventData=function(){var e=ne("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{$.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&$.localStorage.setItem(i,JSON.stringify(this.eventData))}catch(y){De("Unable to write to LocalStorage")}},O.prototype.processRequests=function(e){},O.prototype.postEvent=function(e,i,l,y){var P=this;if(_t.EVENTS_URL){var j=D(_t.EVENTS_URL);j.params.push("access_token="+(y||_t.ACCESS_TOKEN||""));var Q={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:pt,userId:this.anonId},we=i?Se(Q,i):Q,ut={url:q(j),headers:{"Content-Type":"text/plain"},body:JSON.stringify([we])};this.pendingRequest=jn(ut,function(Nt){P.pendingRequest=null,l(Nt),P.saveEventData(),P.processRequests(y)})}},O.prototype.queueRequest=function(e,i){this.queue.push(e),this.processRequests(i)};var k,X,W=function(e){function i(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(l,y,P,j){this.skuToken=P;var Q=!(!j&&!_t.ACCESS_TOKEN),we=Array.isArray(l)&&l.some(function(ut){return wt(ut)||Re(ut)});_t.EVENTS_URL&&Q&&we&&this.queueRequest({id:y,timestamp:Date.now()},j)},i.prototype.processRequests=function(l){var y=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),j=P.id,Q=P.timestamp;j&&this.success[j]||(this.anonId||this.fetchEventData(),Et(this.anonId)||(this.anonId=Lt()),this.postEvent(Q,{skuToken:this.skuToken},function(we){we||j&&(y.success[j]=!0)},l))}},i}(O),ae=new(function(e){function i(l){e.call(this,"appUserTurnstile"),this._customAccessToken=l}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(l,y){_t.EVENTS_URL&&_t.ACCESS_TOKEN&&Array.isArray(l)&&l.some(function(P){return wt(P)||Re(P)})&&this.queueRequest(Date.now(),y)},i.prototype.processRequests=function(l){var y=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=G(_t.ACCESS_TOKEN),j=P?P.u:_t.ACCESS_TOKEN,Q=j!==this.eventData.tokenU;Et(this.anonId)||(this.anonId=Lt(),Q=!0);var we=this.queue.shift();if(this.eventData.lastSuccess){var ut=new Date(this.eventData.lastSuccess),Nt=new Date(we),Ut=(we-this.eventData.lastSuccess)/864e5;Q=Q||Ut>=1||Ut<-1||ut.getDate()!==Nt.getDate()}else Q=!0;if(!Q)return this.processRequests();this.postEvent(we,{"enabled.telemetry":!1},function(qt){qt||(y.eventData.lastSuccess=we,y.eventData.tokenU=j)},l)}},i}(O)),Be=ae.postTurnstileEvent.bind(ae),ve=new W,Je=ve.postMapLoadEvent.bind(ve),ot=500,Qe=50;function ir(){$.caches&&!k&&(k=$.caches.open("mapbox-tiles"))}function mr(e){var i=e.indexOf("?");return i<0?e:e.slice(0,i)}var Ar,Er=1/0;function Zt(){return Ar==null&&(Ar=$.OffscreenCanvas&&new $.OffscreenCanvas(1,1).getContext("2d")&&typeof $.createImageBitmap=="function"),Ar}var Tr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Tr);var pn=function(e){function i(l,y,P){y===401&&Re(P)&&(l+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,l),this.status=y,this.url=P,this.name=this.constructor.name,this.message=l}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),un=ce()?function(){return self.worker&&self.worker.referrer}:function(){return($.location.protocol==="blob:"?$.parent:$).location.href},Zn,Cr,Nr=function(e,i){if(!(/^file:/.test(l=e.url)||/^file:/.test(un())&&!/^\w+:/.test(l))){if($.fetch&&$.Request&&$.AbortController&&$.Request.prototype.hasOwnProperty("signal"))return function(y,P){var j,Q=new $.AbortController,we=new $.Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:un(),signal:Q.signal}),ut=!1,Nt=!1,Ut=(j=we.url).indexOf("sku=")>0&&Re(j);y.type==="json"&&we.headers.set("Accept","application/json");var qt=function(xr,Kr,qr){if(!Nt){if(xr&&xr.message!=="SecurityError"&&De(xr),Kr&&qr)return lr(Kr);var dn=Date.now();$.fetch(we).then(function(cn){if(cn.ok){var Un=Ut?cn.clone():null;return lr(cn,Un,dn)}return P(new pn(cn.statusText,cn.status,y.url))}).catch(function(cn){cn.code!==20&&P(new Error(cn.message))})}},lr=function(xr,Kr,qr){(y.type==="arrayBuffer"?xr.arrayBuffer():y.type==="json"?xr.json():xr.text()).then(function(dn){Nt||(Kr&&qr&&function(cn,Un,ri){if(ir(),k){var gi={status:Un.status,statusText:Un.statusText,headers:new $.Headers};Un.headers.forEach(function(Ii,Ji){return gi.headers.set(Ji,Ii)});var yi=je(Un.headers.get("Cache-Control")||"");yi["no-store"]||(yi["max-age"]&&gi.headers.set("Expires",new Date(ri+1e3*yi["max-age"]).toUTCString()),new Date(gi.headers.get("Expires")).getTime()-ri<42e4||function(Ii,Ji){if(X===void 0)try{new Response(new ReadableStream),X=!0}catch(Wi){X=!1}X?Ji(Ii.body):Ii.blob().then(Ji)}(Un,function(Ii){var Ji=new $.Response(Ii,gi);ir(),k&&k.then(function(Wi){return Wi.put(mr(cn.url),Ji)}).catch(function(Wi){return De(Wi.message)})}))}}(we,Kr,qr),ut=!0,P(null,dn,xr.headers.get("Cache-Control"),xr.headers.get("Expires")))}).catch(function(dn){Nt||P(new Error(dn.message))})};return Ut?function(xr,Kr){if(ir(),!k)return Kr(null);var qr=mr(xr.url);k.then(function(dn){dn.match(qr).then(function(cn){var Un=function(ri){if(!ri)return!1;var gi=new Date(ri.headers.get("Expires")||0),yi=je(ri.headers.get("Cache-Control")||"");return gi>Date.now()&&!yi["no-cache"]}(cn);dn.delete(qr),Un&&dn.put(qr,cn.clone()),Kr(null,cn,Un)}).catch(Kr)}).catch(Kr)}(we,qt):qt(null,null),{cancel:function(){Nt=!0,ut||Q.abort()}}}(e,i);if(ce()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,i,void 0,!0)}var l;return function(y,P){var j=new $.XMLHttpRequest;for(var Q in j.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(j.responseType="arraybuffer"),y.headers)j.setRequestHeader(Q,y.headers[Q]);return y.type==="json"&&(j.responseType="text",j.setRequestHeader("Accept","application/json")),j.withCredentials=y.credentials==="include",j.onerror=function(){P(new Error(j.statusText))},j.onload=function(){if((j.status>=200&&j.status<300||j.status===0)&&j.response!==null){var we=j.response;if(y.type==="json")try{we=JSON.parse(j.response)}catch(ut){return P(ut)}P(null,we,j.getResponseHeader("Cache-Control"),j.getResponseHeader("Expires"))}else P(new pn(j.statusText,j.status,y.url))},j.send(y.body),{cancel:function(){return j.abort()}}}(e,i)},bt=function(e,i){return Nr(Se(e,{type:"arrayBuffer"}),i)},jn=function(e,i){return Nr(Se(e,{method:"POST"}),i)},Pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Zn=[],Cr=0;var zt=function(e,i){if(Ye.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Cr>=_t.MAX_PARALLEL_IMAGE_REQUESTS){var l={requestParameters:e,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return Zn.push(l),l}Cr++;var y=!1,P=function(){if(!y)for(y=!0,Cr--;Zn.length&&Cr<_t.MAX_PARALLEL_IMAGE_REQUESTS;){var Q=Zn.shift();Q.cancelled||(Q.cancel=zt(Q.requestParameters,Q.callback).cancel)}},j=bt(e,function(Q,we,ut,Nt){P(),Q?i(Q):we&&(Zt()?function(Ut,qt){var lr=new $.Blob([new Uint8Array(Ut)],{type:"image/png"});$.createImageBitmap(lr).then(function(xr){qt(null,xr)}).catch(function(xr){qt(new Error("Could not load image because of "+xr.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(we,i):function(Ut,qt,lr,xr){var Kr=new $.Image,qr=$.URL;Kr.onload=function(){qt(null,Kr),qr.revokeObjectURL(Kr.src),Kr.onload=null,$.requestAnimationFrame(function(){Kr.src=Pt})},Kr.onerror=function(){return qt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var dn=new $.Blob([new Uint8Array(Ut)],{type:"image/png"});Kr.cacheControl=lr,Kr.expires=xr,Kr.src=Ut.byteLength?qr.createObjectURL(dn):Pt}(we,i,ut,Nt))});return{cancel:function(){j.cancel(),P()}}};function Qt(e,i,l){l[e]&&l[e].indexOf(i)!==-1||(l[e]=l[e]||[],l[e].push(i))}function dr(e,i,l){if(l&&l[e]){var y=l[e].indexOf(i);y!==-1&&l[e].splice(y,1)}}var _r=function(e,i){i===void 0&&(i={}),Se(this,i),this.type=e},Hr=function(e){function i(l,y){y===void 0&&(y={}),e.call(this,"error",Se({error:l},y))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(_r),Qr=function(){};Qr.prototype.on=function(e,i){return this._listeners=this._listeners||{},Qt(e,i,this._listeners),this},Qr.prototype.off=function(e,i){return dr(e,i,this._listeners),dr(e,i,this._oneTimeListeners),this},Qr.prototype.once=function(e,i){return this._oneTimeListeners=this._oneTimeListeners||{},Qt(e,i,this._oneTimeListeners),this},Qr.prototype.fire=function(e,i){typeof e=="string"&&(e=new _r(e,i||{}));var l=e.type;if(this.listens(l)){e.target=this;for(var y=0,P=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];y<P.length;y+=1)P[y].call(this,e);for(var j=0,Q=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];j<Q.length;j+=1){var we=Q[j];dr(l,we,this._oneTimeListeners),we.call(this,e)}var ut=this._eventedParent;ut&&(Se(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ut.fire(e))}else e instanceof Hr&&console.error(e.error);return this},Qr.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Qr.prototype.setEventedParent=function(e,i){return this._eventedParent=e,this._eventedParentData=i,this};var fr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},tt=function(e,i,l,y){this.message=(e?e+": ":"")+l,y&&(this.identifier=y),i!=null&&i.__line__&&(this.line=i.__line__)};function Yr(e){var i=e.value;return i?[new tt(e.key,i,"constants have been deprecated as of v8")]:[]}function Tn(e){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];for(var y=0,P=i;y<P.length;y+=1){var j=P[y];for(var Q in j)e[Q]=j[Q]}return e}function wn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Nn(e){if(Array.isArray(e))return e.map(Nn);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var i={};for(var l in e)i[l]=Nn(e[l]);return i}return wn(e)}var Si=function(e){function i(l,y){e.call(this,y),this.message=y,this.key=l}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Error),fa=function(e,i){i===void 0&&(i=[]),this.parent=e,this.bindings={};for(var l=0,y=i;l<y.length;l+=1){var P=y[l];this.bindings[P[0]]=P[1]}};fa.prototype.concat=function(e){return new fa(this,e)},fa.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},fa.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Xi={kind:"null"},Ln={kind:"number"},na={kind:"string"},xi={kind:"boolean"},ta={kind:"color"},La={kind:"object"},Ki={kind:"value"},jo={kind:"collator"},uo={kind:"formatted"},An={kind:"resolvedImage"};function gn(e,i){return{kind:"array",itemType:e,N:i}}function Oi(e){if(e.kind==="array"){var i=Oi(e.itemType);return typeof e.N=="number"?"array<"+i+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+i+">"}return e.kind}var fi=[Xi,Ln,na,xi,ta,uo,La,gn(Ki),An];function va(e,i){if(i.kind==="error")return null;if(e.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!va(e.itemType,i.itemType))&&(typeof e.N!="number"||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if(e.kind==="value"){for(var l=0,y=fi;l<y.length;l+=1)if(!va(y[l],i))return null}}return"Expected "+Oi(e)+" but found "+Oi(i)+" instead."}function wa(e,i){return i.some(function(l){return l.kind===e.kind})}function Ca(e,i){return i.some(function(l){return l==="null"?e===null:l==="array"?Array.isArray(e):l==="object"?e&&!Array.isArray(e)&&typeof e=="object":l===typeof e})}var Aa=K(function(e,i){var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function y(we){return(we=Math.round(we))<0?0:we>255?255:we}function P(we){return y(we[we.length-1]==="%"?parseFloat(we)/100*255:parseInt(we))}function j(we){return(ut=we[we.length-1]==="%"?parseFloat(we)/100:parseFloat(we))<0?0:ut>1?1:ut;var ut}function Q(we,ut,Nt){return Nt<0?Nt+=1:Nt>1&&(Nt-=1),6*Nt<1?we+(ut-we)*Nt*6:2*Nt<1?ut:3*Nt<2?we+(ut-we)*(2/3-Nt)*6:we}try{i.parseCSSColor=function(we){var ut,Nt=we.replace(/ /g,"").toLowerCase();if(Nt in l)return l[Nt].slice();if(Nt[0]==="#")return Nt.length===4?(ut=parseInt(Nt.substr(1),16))>=0&&ut<=4095?[(3840&ut)>>4|(3840&ut)>>8,240&ut|(240&ut)>>4,15&ut|(15&ut)<<4,1]:null:Nt.length===7&&(ut=parseInt(Nt.substr(1),16))>=0&&ut<=16777215?[(16711680&ut)>>16,(65280&ut)>>8,255&ut,1]:null;var Ut=Nt.indexOf("("),qt=Nt.indexOf(")");if(Ut!==-1&&qt+1===Nt.length){var lr=Nt.substr(0,Ut),xr=Nt.substr(Ut+1,qt-(Ut+1)).split(","),Kr=1;switch(lr){case"rgba":if(xr.length!==4)return null;Kr=j(xr.pop());case"rgb":return xr.length!==3?null:[P(xr[0]),P(xr[1]),P(xr[2]),Kr];case"hsla":if(xr.length!==4)return null;Kr=j(xr.pop());case"hsl":if(xr.length!==3)return null;var qr=(parseFloat(xr[0])%360+360)%360/360,dn=j(xr[1]),cn=j(xr[2]),Un=cn<=.5?cn*(dn+1):cn+dn-cn*dn,ri=2*cn-Un;return[y(255*Q(ri,Un,qr+1/3)),y(255*Q(ri,Un,qr)),y(255*Q(ri,Un,qr-1/3)),Kr];default:return null}}return null}}catch(we){}}).parseCSSColor,ma=function(e,i,l,y){y===void 0&&(y=1),this.r=e,this.g=i,this.b=l,this.a=y};ma.parse=function(e){if(e){if(e instanceof ma)return e;if(typeof e=="string"){var i=Aa(e);if(i)return new ma(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},ma.prototype.toString=function(){var e=this.toArray(),i=e[1],l=e[2],y=e[3];return"rgba("+Math.round(e[0])+","+Math.round(i)+","+Math.round(l)+","+y+")"},ma.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},ma.black=new ma(0,0,0,1),ma.white=new ma(1,1,1,1),ma.transparent=new ma(0,0,0,0),ma.red=new ma(1,0,0,1);var ka=function(e,i,l){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ka.prototype.compare=function(e,i){return this.collator.compare(e,i)},ka.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Uo=function(e,i,l,y,P){this.text=e,this.image=i,this.scale=l,this.fontStack=y,this.textColor=P},ha=function(e){this.sections=e};ha.fromString=function(e){return new ha([new Uo(e,null,null,null,null)])},ha.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},ha.factory=function(e){return e instanceof ha?e:ha.fromString(e)},ha.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},ha.prototype.serialize=function(){for(var e=["format"],i=0,l=this.sections;i<l.length;i+=1){var y=l[i];if(y.image)e.push(["image",y.image.name]);else{e.push(y.text);var P={};y.fontStack&&(P["text-font"]=["literal",y.fontStack.split(",")]),y.scale&&(P["font-scale"]=y.scale),y.textColor&&(P["text-color"]=["rgba"].concat(y.textColor.toArray())),e.push(P)}}return e};var xa=function(e){this.name=e.name,this.available=e.available};function eo(e,i,l,y){return typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:"Invalid rgba value ["+[e,i,l,y].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof y=="number"?[e,i,l,y]:[e,i,l]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Te(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ma||e instanceof ka||e instanceof ha||e instanceof xa)return!0;if(Array.isArray(e)){for(var i=0,l=e;i<l.length;i+=1)if(!Te(l[i]))return!1;return!0}if(typeof e=="object"){for(var y in e)if(!Te(e[y]))return!1;return!0}return!1}function Po(e){if(e===null)return Xi;if(typeof e=="string")return na;if(typeof e=="boolean")return xi;if(typeof e=="number")return Ln;if(e instanceof ma)return ta;if(e instanceof ka)return jo;if(e instanceof ha)return uo;if(e instanceof xa)return An;if(Array.isArray(e)){for(var i,l=e.length,y=0,P=e;y<P.length;y+=1){var j=Po(P[y]);if(i){if(i===j)continue;i=Ki;break}i=j}return gn(i||Ki,l)}return La}function Hs(e){var i=typeof e;return e===null?"":i==="string"||i==="number"||i==="boolean"?String(e):e instanceof ma||e instanceof ha||e instanceof xa?e.toString():JSON.stringify(e)}xa.prototype.toString=function(){return this.name},xa.fromString=function(e){return e?new xa({name:e,available:!1}):null},xa.prototype.serialize=function(){return["image",this.name]};var no=function(e,i){this.type=e,this.value=i};no.parse=function(e,i){if(e.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Te(e[1]))return i.error("invalid value");var l=e[1],y=Po(l),P=i.expectedType;return y.kind!=="array"||y.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(y=P),new no(y,l)},no.prototype.evaluate=function(){return this.value},no.prototype.eachChild=function(){},no.prototype.outputDefined=function(){return!0},no.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ma?["rgba"].concat(this.value.toArray()):this.value instanceof ha?this.value.serialize():this.value};var Jo=function(e){this.name="ExpressionEvaluationError",this.message=e};Jo.prototype.toJSON=function(){return this.message};var os={string:na,number:Ln,boolean:xi,object:La},Go=function(e,i){this.type=e,this.args=i};Go.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var l,y=1,P=e[0];if(P==="array"){var j,Q;if(e.length>2){var we=e[1];if(typeof we!="string"||!(we in os)||we==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);j=os[we],y++}else j=Ki;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);Q=e[2],y++}l=gn(j,Q)}else l=os[P];for(var ut=[];y<e.length;y++){var Nt=i.parse(e[y],y,Ki);if(!Nt)return null;ut.push(Nt)}return new Go(l,ut)},Go.prototype.evaluate=function(e){for(var i=0;i<this.args.length;i++){var l=this.args[i].evaluate(e);if(!va(this.type,Po(l)))return l;if(i===this.args.length-1)throw new Jo("Expected value to be of type "+Oi(this.type)+", but found "+Oi(Po(l))+" instead.")}return null},Go.prototype.eachChild=function(e){this.args.forEach(e)},Go.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Go.prototype.serialize=function(){var e=this.type,i=[e.kind];if(e.kind==="array"){var l=e.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){i.push(l.kind);var y=e.N;(typeof y=="number"||this.args.length>1)&&i.push(y)}}return i.concat(this.args.map(function(P){return P.serialize()}))};var Wo=function(e){this.type=uo,this.sections=e};Wo.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var l=e[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");for(var y=[],P=!1,j=1;j<=e.length-1;++j){var Q=e[j];if(P&&typeof Q=="object"&&!Array.isArray(Q)){P=!1;var we=null;if(Q["font-scale"]&&!(we=i.parse(Q["font-scale"],1,Ln)))return null;var ut=null;if(Q["text-font"]&&!(ut=i.parse(Q["text-font"],1,gn(na))))return null;var Nt=null;if(Q["text-color"]&&!(Nt=i.parse(Q["text-color"],1,ta)))return null;var Ut=y[y.length-1];Ut.scale=we,Ut.font=ut,Ut.textColor=Nt}else{var qt=i.parse(e[j],1,Ki);if(!qt)return null;var lr=qt.type.kind;if(lr!=="string"&&lr!=="value"&&lr!=="null"&&lr!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,y.push({content:qt,scale:null,font:null,textColor:null})}}return new Wo(y)},Wo.prototype.evaluate=function(e){return new ha(this.sections.map(function(i){var l=i.content.evaluate(e);return Po(l)===An?new Uo("",l,null,null,null):new Uo(Hs(l),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))},Wo.prototype.eachChild=function(e){for(var i=0,l=this.sections;i<l.length;i+=1){var y=l[i];e(y.content),y.scale&&e(y.scale),y.font&&e(y.font),y.textColor&&e(y.textColor)}},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){for(var e=["format"],i=0,l=this.sections;i<l.length;i+=1){var y=l[i];e.push(y.content.serialize());var P={};y.scale&&(P["font-scale"]=y.scale.serialize()),y.font&&(P["text-font"]=y.font.serialize()),y.textColor&&(P["text-color"]=y.textColor.serialize()),e.push(P)}return e};var za=function(e){this.type=An,this.input=e};za.parse=function(e,i){if(e.length!==2)return i.error("Expected two arguments.");var l=i.parse(e[1],1,na);return l?new za(l):i.error("No image name provided.")},za.prototype.evaluate=function(e){var i=this.input.evaluate(e),l=xa.fromString(i);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(i)>-1),l},za.prototype.eachChild=function(e){e(this.input)},za.prototype.outputDefined=function(){return!1},za.prototype.serialize=function(){return["image",this.input.serialize()]};var Tu={"to-boolean":xi,"to-color":ta,"to-number":Ln,"to-string":na},ws=function(e,i){this.type=e,this.args=i};ws.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var l=e[0];if((l==="to-boolean"||l==="to-string")&&e.length!==2)return i.error("Expected one argument.");for(var y=Tu[l],P=[],j=1;j<e.length;j++){var Q=i.parse(e[j],j,Ki);if(!Q)return null;P.push(Q)}return new ws(y,P)},ws.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var i,l,y=0,P=this.args;y<P.length;y+=1){if(l=null,(i=P[y].evaluate(e))instanceof ma)return i;if(typeof i=="string"){var j=e.parseColor(i);if(j)return j}else if(Array.isArray(i)&&!(l=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":eo(i[0],i[1],i[2],i[3])))return new ma(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Jo(l||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var Q=null,we=0,ut=this.args;we<ut.length;we+=1){if((Q=ut[we].evaluate(e))===null)return 0;var Nt=Number(Q);if(!isNaN(Nt))return Nt}throw new Jo("Could not convert "+JSON.stringify(Q)+" to number.")}return this.type.kind==="formatted"?ha.fromString(Hs(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?xa.fromString(Hs(this.args[0].evaluate(e))):Hs(this.args[0].evaluate(e))},ws.prototype.eachChild=function(e){this.args.forEach(e)},ws.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ws.prototype.serialize=function(){if(this.type.kind==="formatted")return new Wo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new za(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(i){e.push(i.serialize())}),e};var Zs=["Unknown","Point","LineString","Polygon"],ts=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ts.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ts.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zs[this.feature.type]:this.feature.type:null},ts.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ts.prototype.canonicalID=function(){return this.canonical},ts.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ts.prototype.parseColor=function(e){var i=this._parseColorCache[e];return i||(i=this._parseColorCache[e]=ma.parse(e)),i};var Vs=function(e,i,l,y){this.name=e,this.type=i,this._evaluate=l,this.args=y};Vs.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Vs.prototype.eachChild=function(e){this.args.forEach(e)},Vs.prototype.outputDefined=function(){return!1},Vs.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Vs.parse=function(e,i){var l,y=e[0],P=Vs.definitions[y];if(!P)return i.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var j=Array.isArray(P)?P[0]:P.type,Q=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,we=Q.filter(function(la){var ea=la[0];return!Array.isArray(ea)||ea.length===e.length-1}),ut=null,Nt=0,Ut=we;Nt<Ut.length;Nt+=1){var qt=Ut[Nt],lr=qt[0],xr=qt[1];ut=new oi(i.registry,i.path,null,i.scope);for(var Kr=[],qr=!1,dn=1;dn<e.length;dn++){var cn=e[dn],Un=Array.isArray(lr)?lr[dn-1]:lr.type,ri=ut.parse(cn,1+Kr.length,Un);if(!ri){qr=!0;break}Kr.push(ri)}if(!qr)if(Array.isArray(lr)&&lr.length!==Kr.length)ut.error("Expected "+lr.length+" arguments, but found "+Kr.length+" instead.");else{for(var gi=0;gi<Kr.length;gi++){var yi=Array.isArray(lr)?lr[gi]:lr.type,Ii=Kr[gi];ut.concat(gi+1).checkSubtype(yi,Ii.type)}if(ut.errors.length===0)return new Vs(y,j,xr,Kr)}}if(we.length===1)(l=i.errors).push.apply(l,ut.errors);else{for(var Ji=(we.length?we:Q).map(function(la){var ea;return ea=la[0],Array.isArray(ea)?"("+ea.map(Oi).join(", ")+")":"("+Oi(ea.type)+"...)"}).join(" | "),Wi=[],ja=1;ja<e.length;ja++){var Jn=i.parse(e[ja],1+Wi.length);if(!Jn)return null;Wi.push(Oi(Jn.type))}i.error("Expected arguments of type "+Ji+", but found ("+Wi.join(", ")+") instead.")}return null},Vs.register=function(e,i){for(var l in Vs.definitions=i,i)e[l]=Vs};var ou=function(e,i,l){this.type=jo,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=i};function ls(e,i){e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1])}function ki(e,i){return!(e[0]<=i[0]||e[2]>=i[2]||e[1]<=i[1]||e[3]>=i[3])}function As(e,i){var l=(180+e[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,P=Math.pow(2,i.z);return[Math.round(l*P*8192),Math.round(y*P*8192)]}function Rs(e,i,l){return i[1]>e[1]!=l[1]>e[1]&&e[0]<(l[0]-i[0])*(e[1]-i[1])/(l[1]-i[1])+i[0]}function hr(e,i){for(var l,y,P,j,Q,we,ut,Nt=!1,Ut=0,qt=i.length;Ut<qt;Ut++)for(var lr=i[Ut],xr=0,Kr=lr.length;xr<Kr-1;xr++){if((j=(l=e)[0]-(y=lr[xr])[0])*(ut=l[1]-(P=lr[xr+1])[1])-(we=l[0]-P[0])*(Q=l[1]-y[1])==0&&j*we<=0&&Q*ut<=0)return!1;Rs(e,lr[xr],lr[xr+1])&&(Nt=!Nt)}return Nt}function Lr(e,i){for(var l=0;l<i.length;l++)if(hr(e,i[l]))return!0;return!1}function or(e,i,l,y){var P=y[0]-l[0],j=y[1]-l[1],Q=(e[0]-l[0])*j-P*(e[1]-l[1]),we=(i[0]-l[0])*j-P*(i[1]-l[1]);return Q>0&&we<0||Q<0&&we>0}function kr(e,i,l){for(var y=0,P=l;y<P.length;y+=1)for(var j=P[y],Q=0;Q<j.length-1;++Q)if((qt=[(Ut=j[Q+1])[0]-(Nt=j[Q])[0],Ut[1]-Nt[1]])[0]*(lr=[(ut=i)[0]-(we=e)[0],ut[1]-we[1]])[1]-qt[1]*lr[0]!=0&&or(we,ut,Nt,Ut)&&or(Nt,Ut,we,ut))return!0;var we,ut,Nt,Ut,qt,lr;return!1}function Hn(e,i){for(var l=0;l<e.length;++l)if(!hr(e[l],i))return!1;for(var y=0;y<e.length-1;++y)if(kr(e[y],e[y+1],i))return!1;return!0}function zr(e,i){for(var l=0;l<i.length;l++)if(Hn(e,i[l]))return!0;return!1}function Bo(e,i,l){for(var y=[],P=0;P<e.length;P++){for(var j=[],Q=0;Q<e[P].length;Q++){var we=As(e[P][Q],l);ls(i,we),j.push(we)}y.push(j)}return y}function Vr(e,i,l){for(var y=[],P=0;P<e.length;P++){var j=Bo(e[P],i,l);y.push(j)}return y}function cr(e,i,l,y){if(e[0]<l[0]||e[0]>l[2]){var P=.5*y,j=e[0]-l[0]>P?-y:l[0]-e[0]>P?y:0;j===0&&(j=e[0]-l[2]>P?-y:l[2]-e[0]>P?y:0),e[0]+=j}ls(i,e)}function ht(e,i,l,y){for(var P=8192*Math.pow(2,y.z),j=[8192*y.x,8192*y.y],Q=[],we=0,ut=e;we<ut.length;we+=1)for(var Nt=0,Ut=ut[we];Nt<Ut.length;Nt+=1){var qt=Ut[Nt],lr=[qt.x+j[0],qt.y+j[1]];cr(lr,i,l,P),Q.push(lr)}return Q}function ur(e,i,l,y){for(var P,j=8192*Math.pow(2,y.z),Q=[8192*y.x,8192*y.y],we=[],ut=0,Nt=e;ut<Nt.length;ut+=1){for(var Ut=[],qt=0,lr=Nt[ut];qt<lr.length;qt+=1){var xr=lr[qt],Kr=[xr.x+Q[0],xr.y+Q[1]];ls(i,Kr),Ut.push(Kr)}we.push(Ut)}if(i[2]-i[0]<=j/2){(P=i)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var qr=0,dn=we;qr<dn.length;qr+=1)for(var cn=0,Un=dn[qr];cn<Un.length;cn+=1)cr(Un[cn],i,l,j)}return we}ou.parse=function(e,i){if(e.length!==2)return i.error("Expected one argument.");var l=e[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");var y=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,xi);if(!y)return null;var P=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,xi);if(!P)return null;var j=null;return l.locale&&!(j=i.parse(l.locale,1,na))?null:new ou(y,P,j)},ou.prototype.evaluate=function(e){return new ka(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ou.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ou.prototype.outputDefined=function(){return!1},ou.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var er=function(e,i){this.type=xi,this.geojson=e,this.geometries=i};function sn(e){if(e instanceof Vs&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof er)return!1;var i=!0;return e.eachChild(function(l){i&&!sn(l)&&(i=!1)}),i}function fn(e){if(e instanceof Vs&&e.name==="feature-state")return!1;var i=!0;return e.eachChild(function(l){i&&!fn(l)&&(i=!1)}),i}function Vn(e,i){if(e instanceof Vs&&i.indexOf(e.name)>=0)return!1;var l=!0;return e.eachChild(function(y){l&&!Vn(y,i)&&(l=!1)}),l}er.parse=function(e,i){if(e.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Te(e[1])){var l=e[1];if(l.type==="FeatureCollection")for(var y=0;y<l.features.length;++y){var P=l.features[y].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new er(l,l.features[y].geometry)}else if(l.type==="Feature"){var j=l.geometry.type;if(j==="Polygon"||j==="MultiPolygon")return new er(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new er(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},er.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,l){var y=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],j=i.canonicalID();if(l.type==="Polygon"){var Q=Bo(l.coordinates,P,j),we=ht(i.geometry(),y,P,j);if(!ki(y,P))return!1;for(var ut=0,Nt=we;ut<Nt.length;ut+=1)if(!hr(Nt[ut],Q))return!1}if(l.type==="MultiPolygon"){var Ut=Vr(l.coordinates,P,j),qt=ht(i.geometry(),y,P,j);if(!ki(y,P))return!1;for(var lr=0,xr=qt;lr<xr.length;lr+=1)if(!Lr(xr[lr],Ut))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,l){var y=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],j=i.canonicalID();if(l.type==="Polygon"){var Q=Bo(l.coordinates,P,j),we=ur(i.geometry(),y,P,j);if(!ki(y,P))return!1;for(var ut=0,Nt=we;ut<Nt.length;ut+=1)if(!Hn(Nt[ut],Q))return!1}if(l.type==="MultiPolygon"){var Ut=Vr(l.coordinates,P,j),qt=ur(i.geometry(),y,P,j);if(!ki(y,P))return!1;for(var lr=0,xr=qt;lr<xr.length;lr+=1)if(!zr(xr[lr],Ut))return!1}return!0}(e,this.geometries)}return!1},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return["within",this.geojson]};var ni=function(e,i){this.type=i.type,this.name=e,this.boundExpression=i};ni.parse=function(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var l=e[1];return i.scope.has(l)?new ni(l,i.scope.get(l)):i.error('Unknown variable "'+l+'". Make sure "'+l+'" has been bound in an enclosing "let" expression before using it.',1)},ni.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ni.prototype.eachChild=function(){},ni.prototype.outputDefined=function(){return!1},ni.prototype.serialize=function(){return["var",this.name]};var oi=function(e,i,l,y,P){i===void 0&&(i=[]),y===void 0&&(y=new fa),P===void 0&&(P=[]),this.registry=e,this.path=i,this.key=i.map(function(j){return"["+j+"]"}).join(""),this.scope=y,this.errors=P,this.expectedType=l};function Ei(e,i){for(var l,y=e.length-1,P=0,j=y,Q=0;P<=j;)if((l=e[Q=Math.floor((P+j)/2)])<=i){if(Q===y||i<e[Q+1])return Q;P=Q+1}else{if(!(l>i))throw new Jo("Input is not a number.");j=Q-1}return 0}oi.prototype.parse=function(e,i,l,y,P){return P===void 0&&(P={}),i?this.concat(i,l,y)._parse(e,P):this._parse(e,P)},oi.prototype._parse=function(e,i){function l(Nt,Ut,qt){return qt==="assert"?new Go(Ut,[Nt]):qt==="coerce"?new ws(Ut,[Nt]):Nt}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var y=e[0];if(typeof y!="string")return this.error("Expression name must be a string, but found "+typeof y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[y];if(P){var j=P.parse(e,this);if(!j)return null;if(this.expectedType){var Q=this.expectedType,we=j.type;if(Q.kind!=="string"&&Q.kind!=="number"&&Q.kind!=="boolean"&&Q.kind!=="object"&&Q.kind!=="array"||we.kind!=="value")if(Q.kind!=="color"&&Q.kind!=="formatted"&&Q.kind!=="resolvedImage"||we.kind!=="value"&&we.kind!=="string"){if(this.checkSubtype(Q,we))return null}else j=l(j,Q,i.typeAnnotation||"coerce");else j=l(j,Q,i.typeAnnotation||"assert")}if(!(j instanceof no)&&j.type.kind!=="resolvedImage"&&function Nt(Ut){if(Ut instanceof ni)return Nt(Ut.boundExpression);if(Ut instanceof Vs&&Ut.name==="error"||Ut instanceof ou||Ut instanceof er)return!1;var qt=Ut instanceof ws||Ut instanceof Go,lr=!0;return Ut.eachChild(function(xr){lr=qt?lr&&Nt(xr):lr&&xr instanceof no}),!!lr&&sn(Ut)&&Vn(Ut,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(j)){var ut=new ts;try{j=new no(j.type,j.evaluate(ut))}catch(Nt){return this.error(Nt.message),null}}return j}return this.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},oi.prototype.concat=function(e,i,l){var y=typeof e=="number"?this.path.concat(e):this.path,P=l?this.scope.concat(l):this.scope;return new oi(this.registry,y,i||null,P,this.errors)},oi.prototype.error=function(e){for(var i=[],l=arguments.length-1;l-- >0;)i[l]=arguments[l+1];var y=""+this.key+i.map(function(P){return"["+P+"]"}).join("");this.errors.push(new Si(y,e))},oi.prototype.checkSubtype=function(e,i){var l=va(e,i);return l&&this.error(l),l};var qi=function(e,i,l){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(var y=0,P=l;y<P.length;y+=1){var j=P[y],Q=j[1];this.labels.push(j[0]),this.outputs.push(Q)}};function Pr(e,i,l){return e*(1-l)+i*l}qi.parse=function(e,i){if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");var l=i.parse(e[1],1,Ln);if(!l)return null;var y=[],P=null;i.expectedType&&i.expectedType.kind!=="value"&&(P=i.expectedType);for(var j=1;j<e.length;j+=2){var Q=j===1?-1/0:e[j],we=e[j+1],ut=j,Nt=j+1;if(typeof Q!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(y.length&&y[y.length-1][0]>=Q)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ut);var Ut=i.parse(we,Nt,P);if(!Ut)return null;P=P||Ut.type,y.push([Q,Ut])}return new qi(P,l,y)},qi.prototype.evaluate=function(e){var i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(e);var y=this.input.evaluate(e);if(y<=i[0])return l[0].evaluate(e);var P=i.length;return y>=i[P-1]?l[P-1].evaluate(e):l[Ei(i,y)].evaluate(e)},qi.prototype.eachChild=function(e){e(this.input);for(var i=0,l=this.outputs;i<l.length;i+=1)e(l[i])},qi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},qi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e};var Cn=Object.freeze({__proto__:null,number:Pr,color:function(e,i,l){return new ma(Pr(e.r,i.r,l),Pr(e.g,i.g,l),Pr(e.b,i.b,l),Pr(e.a,i.a,l))},array:function(e,i,l){return e.map(function(y,P){return Pr(y,i[P],l)})}}),ln=6/29*3*(6/29),bn=Math.PI/180,Kn=180/Math.PI;function bi(e){return e>.008856451679035631?Math.pow(e,1/3):e/ln+4/29}function Yi(e){return e>6/29?e*e*e:ln*(e-4/29)}function Gi(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function aa(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ta(e){var i=aa(e.r),l=aa(e.g),y=aa(e.b),P=bi((.4124564*i+.3575761*l+.1804375*y)/.95047),j=bi((.2126729*i+.7151522*l+.072175*y)/1);return{l:116*j-16,a:500*(P-j),b:200*(j-bi((.0193339*i+.119192*l+.9503041*y)/1.08883)),alpha:e.a}}function R(e){var i=(e.l+16)/116,l=isNaN(e.a)?i:i+e.a/500,y=isNaN(e.b)?i:i-e.b/200;return i=1*Yi(i),l=.95047*Yi(l),y=1.08883*Yi(y),new ma(Gi(3.2404542*l-1.5371385*i-.4985314*y),Gi(-.969266*l+1.8760108*i+.041556*y),Gi(.0556434*l-.2040259*i+1.0572252*y),e.alpha)}function _e(e,i,l){var y=i-e;return e+l*(y>180||y<-180?y-360*Math.round(y/360):y)}var At={forward:Ta,reverse:R,interpolate:function(e,i,l){return{l:Pr(e.l,i.l,l),a:Pr(e.a,i.a,l),b:Pr(e.b,i.b,l),alpha:Pr(e.alpha,i.alpha,l)}}},Ke={forward:function(e){var i=Ta(e),l=i.l,y=i.a,P=i.b,j=Math.atan2(P,y)*Kn;return{h:j<0?j+360:j,c:Math.sqrt(y*y+P*P),l,alpha:e.a}},reverse:function(e){var i=e.h*bn,l=e.c;return R({l:e.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:e.alpha})},interpolate:function(e,i,l){return{h:_e(e.h,i.h,l),c:Pr(e.c,i.c,l),l:Pr(e.l,i.l,l),alpha:Pr(e.alpha,i.alpha,l)}}},nr=Object.freeze({__proto__:null,lab:At,hcl:Ke}),wr=function(e,i,l,y,P){this.type=e,this.operator=i,this.interpolation=l,this.input=y,this.labels=[],this.outputs=[];for(var j=0,Q=P;j<Q.length;j+=1){var we=Q[j],ut=we[1];this.labels.push(we[0]),this.outputs.push(ut)}};function Wr(e,i,l,y){var P=y-l,j=e-l;return P===0?0:i===1?j/P:(Math.pow(i,j)-1)/(Math.pow(i,P)-1)}wr.interpolationFactor=function(e,i,l,y){var P=0;if(e.name==="exponential")P=Wr(i,e.base,l,y);else if(e.name==="linear")P=Wr(i,1,l,y);else if(e.name==="cubic-bezier"){var j=e.controlPoints;P=new N(j[0],j[1],j[2],j[3]).solve(Wr(i,1,l,y))}return P},wr.parse=function(e,i){var l=e[0],y=e[1],P=e[2],j=e.slice(3);if(!Array.isArray(y)||y.length===0)return i.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){var Q=y[1];if(typeof Q!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:Q}}else{if(y[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(y[0]),1,0);var we=y.slice(1);if(we.length!==4||we.some(function(dn){return typeof dn!="number"||dn<0||dn>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:we}}if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(P=i.parse(P,2,Ln)))return null;var ut=[],Nt=null;l==="interpolate-hcl"||l==="interpolate-lab"?Nt=ta:i.expectedType&&i.expectedType.kind!=="value"&&(Nt=i.expectedType);for(var Ut=0;Ut<j.length;Ut+=2){var qt=j[Ut],lr=j[Ut+1],xr=Ut+3,Kr=Ut+4;if(typeof qt!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xr);if(ut.length&&ut[ut.length-1][0]>=qt)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',xr);var qr=i.parse(lr,Kr,Nt);if(!qr)return null;Nt=Nt||qr.type,ut.push([qt,qr])}return Nt.kind==="number"||Nt.kind==="color"||Nt.kind==="array"&&Nt.itemType.kind==="number"&&typeof Nt.N=="number"?new wr(Nt,l,y,P,ut):i.error("Type "+Oi(Nt)+" is not interpolatable.")},wr.prototype.evaluate=function(e){var i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(e);var y=this.input.evaluate(e);if(y<=i[0])return l[0].evaluate(e);var P=i.length;if(y>=i[P-1])return l[P-1].evaluate(e);var j=Ei(i,y),Q=wr.interpolationFactor(this.interpolation,y,i[j],i[j+1]),we=l[j].evaluate(e),ut=l[j+1].evaluate(e);return this.operator==="interpolate"?Cn[this.type.kind.toLowerCase()](we,ut,Q):this.operator==="interpolate-hcl"?Ke.reverse(Ke.interpolate(Ke.forward(we),Ke.forward(ut),Q)):At.reverse(At.interpolate(At.forward(we),At.forward(ut),Q))},wr.prototype.eachChild=function(e){e(this.input);for(var i=0,l=this.outputs;i<l.length;i+=1)e(l[i])},wr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},wr.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,e,this.input.serialize()],l=0;l<this.labels.length;l++)i.push(this.labels[l],this.outputs[l].serialize());return i};var In=function(e,i){this.type=e,this.args=i};In.parse=function(e,i){if(e.length<2)return i.error("Expectected at least one argument.");var l=null,y=i.expectedType;y&&y.kind!=="value"&&(l=y);for(var P=[],j=0,Q=e.slice(1);j<Q.length;j+=1){var we=i.parse(Q[j],1+P.length,l,void 0,{typeAnnotation:"omit"});if(!we)return null;l=l||we.type,P.push(we)}var ut=y&&P.some(function(Nt){return va(y,Nt.type)});return new In(ut?Ki:l,P)},In.prototype.evaluate=function(e){for(var i,l=null,y=0,P=0,j=this.args;P<j.length&&(y++,(l=j[P].evaluate(e))&&l instanceof xa&&!l.available&&(i||(i=l.name),l=null,y===this.args.length&&(l=i)),l===null);P+=1);return l},In.prototype.eachChild=function(e){this.args.forEach(e)},In.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},In.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Dn=function(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i};Dn.prototype.evaluate=function(e){return this.result.evaluate(e)},Dn.prototype.eachChild=function(e){for(var i=0,l=this.bindings;i<l.length;i+=1)e(l[i][1]);e(this.result)},Dn.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var l=[],y=1;y<e.length-1;y+=2){var P=e[y];if(typeof P!="string")return i.error("Expected string, but found "+typeof P+" instead.",y);if(/[^a-zA-Z0-9_]/.test(P))return i.error("Variable names must contain only alphanumeric characters or '_'.",y);var j=i.parse(e[y+1],y+1);if(!j)return null;l.push([P,j])}var Q=i.parse(e[e.length-1],e.length-1,i.expectedType,l);return Q?new Dn(l,Q):null},Dn.prototype.outputDefined=function(){return this.result.outputDefined()},Dn.prototype.serialize=function(){for(var e=["let"],i=0,l=this.bindings;i<l.length;i+=1){var y=l[i];e.push(y[0],y[1].serialize())}return e.push(this.result.serialize()),e};var Mi=function(e,i,l){this.type=e,this.index=i,this.input=l};Mi.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var l=i.parse(e[1],1,Ln),y=i.parse(e[2],2,gn(i.expectedType||Ki));return l&&y?new Mi(y.type.itemType,l,y):null},Mi.prototype.evaluate=function(e){var i=this.index.evaluate(e),l=this.input.evaluate(e);if(i<0)throw new Jo("Array index out of bounds: "+i+" < 0.");if(i>=l.length)throw new Jo("Array index out of bounds: "+i+" > "+(l.length-1)+".");if(i!==Math.floor(i))throw new Jo("Array index must be an integer, but found "+i+" instead.");return l[i]},Mi.prototype.eachChild=function(e){e(this.index),e(this.input)},Mi.prototype.outputDefined=function(){return!1},Mi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Bi=function(e,i){this.type=xi,this.needle=e,this.haystack=i};Bi.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var l=i.parse(e[1],1,Ki),y=i.parse(e[2],2,Ki);return l&&y?wa(l.type,[xi,na,Ln,Xi,Ki])?new Bi(l,y):i.error("Expected first argument to be of type boolean, string, number or null, but found "+Oi(l.type)+" instead"):null},Bi.prototype.evaluate=function(e){var i=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!l)return!1;if(!Ca(i,["boolean","string","number","null"]))throw new Jo("Expected first argument to be of type boolean, string, number or null, but found "+Oi(Po(i))+" instead.");if(!Ca(l,["string","array"]))throw new Jo("Expected second argument to be of type array or string, but found "+Oi(Po(l))+" instead.");return l.indexOf(i)>=0},Bi.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Bi.prototype.outputDefined=function(){return!0},Bi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var io=function(e,i,l){this.type=Ln,this.needle=e,this.haystack=i,this.fromIndex=l};io.parse=function(e,i){if(e.length<=2||e.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var l=i.parse(e[1],1,Ki),y=i.parse(e[2],2,Ki);if(!l||!y)return null;if(!wa(l.type,[xi,na,Ln,Xi,Ki]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+Oi(l.type)+" instead");if(e.length===4){var P=i.parse(e[3],3,Ln);return P?new io(l,y,P):null}return new io(l,y)},io.prototype.evaluate=function(e){var i=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!Ca(i,["boolean","string","number","null"]))throw new Jo("Expected first argument to be of type boolean, string, number or null, but found "+Oi(Po(i))+" instead.");if(!Ca(l,["string","array"]))throw new Jo("Expected second argument to be of type array or string, but found "+Oi(Po(l))+" instead.");if(this.fromIndex){var y=this.fromIndex.evaluate(e);return l.indexOf(i,y)}return l.indexOf(i)},io.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var co=function(e,i,l,y,P,j){this.inputType=e,this.type=i,this.input=l,this.cases=y,this.outputs=P,this.otherwise=j};co.parse=function(e,i){if(e.length<5)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return i.error("Expected an even number of arguments.");var l,y;i.expectedType&&i.expectedType.kind!=="value"&&(y=i.expectedType);for(var P={},j=[],Q=2;Q<e.length-1;Q+=2){var we=e[Q],ut=e[Q+1];Array.isArray(we)||(we=[we]);var Nt=i.concat(Q);if(we.length===0)return Nt.error("Expected at least one branch label.");for(var Ut=0,qt=we;Ut<qt.length;Ut+=1){var lr=qt[Ut];if(typeof lr!="number"&&typeof lr!="string")return Nt.error("Branch labels must be numbers or strings.");if(typeof lr=="number"&&Math.abs(lr)>Number.MAX_SAFE_INTEGER)return Nt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof lr=="number"&&Math.floor(lr)!==lr)return Nt.error("Numeric branch labels must be integer values.");if(l){if(Nt.checkSubtype(l,Po(lr)))return null}else l=Po(lr);if(P[String(lr)]!==void 0)return Nt.error("Branch labels must be unique.");P[String(lr)]=j.length}var xr=i.parse(ut,Q,y);if(!xr)return null;y=y||xr.type,j.push(xr)}var Kr=i.parse(e[1],1,Ki);if(!Kr)return null;var qr=i.parse(e[e.length-1],e.length-1,y);return qr?Kr.type.kind!=="value"&&i.concat(1).checkSubtype(l,Kr.type)?null:new co(l,y,Kr,P,j,qr):null},co.prototype.evaluate=function(e){var i=this.input.evaluate(e);return(Po(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)},co.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},co.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},co.prototype.serialize=function(){for(var e=this,i=["match",this.input.serialize()],l=[],y={},P=0,j=Object.keys(this.cases).sort();P<j.length;P+=1){var Q=j[P];(qt=y[this.cases[Q]])===void 0?(y[this.cases[Q]]=l.length,l.push([this.cases[Q],[Q]])):l[qt][1].push(Q)}for(var we=function(xr){return e.inputType.kind==="number"?Number(xr):xr},ut=0,Nt=l;ut<Nt.length;ut+=1){var Ut=Nt[ut],qt=Ut[0],lr=Ut[1];i.push(lr.length===1?we(lr[0]):lr.map(we)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var Sa=function(e,i,l){this.type=e,this.branches=i,this.otherwise=l};Sa.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return i.error("Expected an odd number of arguments.");var l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);for(var y=[],P=1;P<e.length-1;P+=2){var j=i.parse(e[P],P,xi);if(!j)return null;var Q=i.parse(e[P+1],P+1,l);if(!Q)return null;y.push([j,Q]),l=l||Q.type}var we=i.parse(e[e.length-1],e.length-1,l);return we?new Sa(l,y,we):null},Sa.prototype.evaluate=function(e){for(var i=0,l=this.branches;i<l.length;i+=1){var y=l[i],P=y[1];if(y[0].evaluate(e))return P.evaluate(e)}return this.otherwise.evaluate(e)},Sa.prototype.eachChild=function(e){for(var i=0,l=this.branches;i<l.length;i+=1){var y=l[i],P=y[1];e(y[0]),e(P)}e(this.otherwise)},Sa.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Sa.prototype.serialize=function(){var e=["case"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Ko=function(e,i,l,y){this.type=e,this.input=i,this.beginIndex=l,this.endIndex=y};function Co(e,i){return e==="=="||e==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Oo(e,i,l,y){return y.compare(i,l)===0}function Ho(e,i,l){var y=e!=="=="&&e!=="!=";return function(){function P(j,Q,we){this.type=xi,this.lhs=j,this.rhs=Q,this.collator=we,this.hasUntypedArgument=j.type.kind==="value"||Q.type.kind==="value"}return P.parse=function(j,Q){if(j.length!==3&&j.length!==4)return Q.error("Expected two or three arguments.");var we=j[0],ut=Q.parse(j[1],1,Ki);if(!ut)return null;if(!Co(we,ut.type))return Q.concat(1).error('"'+we+`" comparisons are not supported for type '`+Oi(ut.type)+"'.");var Nt=Q.parse(j[2],2,Ki);if(!Nt)return null;if(!Co(we,Nt.type))return Q.concat(2).error('"'+we+`" comparisons are not supported for type '`+Oi(Nt.type)+"'.");if(ut.type.kind!==Nt.type.kind&&ut.type.kind!=="value"&&Nt.type.kind!=="value")return Q.error("Cannot compare types '"+Oi(ut.type)+"' and '"+Oi(Nt.type)+"'.");y&&(ut.type.kind==="value"&&Nt.type.kind!=="value"?ut=new Go(Nt.type,[ut]):ut.type.kind!=="value"&&Nt.type.kind==="value"&&(Nt=new Go(ut.type,[Nt])));var Ut=null;if(j.length===4){if(ut.type.kind!=="string"&&Nt.type.kind!=="string"&&ut.type.kind!=="value"&&Nt.type.kind!=="value")return Q.error("Cannot use collator to compare non-string types.");if(!(Ut=Q.parse(j[3],3,jo)))return null}return new P(ut,Nt,Ut)},P.prototype.evaluate=function(j){var Q=this.lhs.evaluate(j),we=this.rhs.evaluate(j);if(y&&this.hasUntypedArgument){var ut=Po(Q),Nt=Po(we);if(ut.kind!==Nt.kind||ut.kind!=="string"&&ut.kind!=="number")throw new Jo('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+ut.kind+", "+Nt.kind+") instead.")}if(this.collator&&!y&&this.hasUntypedArgument){var Ut=Po(Q),qt=Po(we);if(Ut.kind!=="string"||qt.kind!=="string")return i(j,Q,we)}return this.collator?l(j,Q,we,this.collator.evaluate(j)):i(j,Q,we)},P.prototype.eachChild=function(j){j(this.lhs),j(this.rhs),this.collator&&j(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var j=[e];return this.eachChild(function(Q){j.push(Q.serialize())}),j},P}()}Ko.parse=function(e,i){if(e.length<=2||e.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var l=i.parse(e[1],1,Ki),y=i.parse(e[2],2,Ln);if(!l||!y)return null;if(!wa(l.type,[gn(Ki),na,Ki]))return i.error("Expected first argument to be of type array or string, but found "+Oi(l.type)+" instead");if(e.length===4){var P=i.parse(e[3],3,Ln);return P?new Ko(l.type,l,y,P):null}return new Ko(l.type,l,y)},Ko.prototype.evaluate=function(e){var i=this.input.evaluate(e),l=this.beginIndex.evaluate(e);if(!Ca(i,["string","array"]))throw new Jo("Expected first argument to be of type array or string, but found "+Oi(Po(i))+" instead.");if(this.endIndex){var y=this.endIndex.evaluate(e);return i.slice(l,y)}return i.slice(l)},Ko.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Io=Ho("==",function(e,i,l){return i===l},Oo),Js=Ho("!=",function(e,i,l){return i!==l},function(e,i,l,y){return!Oo(0,i,l,y)}),Il=Ho("<",function(e,i,l){return i<l},function(e,i,l,y){return y.compare(i,l)<0}),Ao=Ho(">",function(e,i,l){return i>l},function(e,i,l,y){return y.compare(i,l)>0}),Va=Ho("<=",function(e,i,l){return i<=l},function(e,i,l,y){return y.compare(i,l)<=0}),gs=Ho(">=",function(e,i,l){return i>=l},function(e,i,l,y){return y.compare(i,l)>=0}),Ws=function(e,i,l,y,P){this.type=na,this.number=e,this.locale=i,this.currency=l,this.minFractionDigits=y,this.maxFractionDigits=P};Ws.parse=function(e,i){if(e.length!==3)return i.error("Expected two arguments.");var l=i.parse(e[1],1,Ln);if(!l)return null;var y=e[2];if(typeof y!="object"||Array.isArray(y))return i.error("NumberFormat options argument must be an object.");var P=null;if(y.locale&&!(P=i.parse(y.locale,1,na)))return null;var j=null;if(y.currency&&!(j=i.parse(y.currency,1,na)))return null;var Q=null;if(y["min-fraction-digits"]&&!(Q=i.parse(y["min-fraction-digits"],1,Ln)))return null;var we=null;return y["max-fraction-digits"]&&!(we=i.parse(y["max-fraction-digits"],1,Ln))?null:new Ws(l,P,j,Q,we)},Ws.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Ws.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Ws.prototype.outputDefined=function(){return!1},Ws.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var bs=function(e){this.type=Ln,this.input=e};bs.parse=function(e,i){if(e.length!==2)return i.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var l=i.parse(e[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+Oi(l.type)+" instead."):new bs(l):null},bs.prototype.evaluate=function(e){var i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new Jo("Expected value to be of type string or array, but found "+Oi(Po(i))+" instead.")},bs.prototype.eachChild=function(e){e(this.input)},bs.prototype.outputDefined=function(){return!1},bs.prototype.serialize=function(){var e=["length"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Ps={"==":Io,"!=":Js,">":Ao,"<":Il,">=":gs,"<=":Va,array:Go,at:Mi,boolean:Go,case:Sa,coalesce:In,collator:ou,format:Wo,image:za,in:Bi,"index-of":io,interpolate:wr,"interpolate-hcl":wr,"interpolate-lab":wr,length:bs,let:Dn,literal:no,match:co,number:Go,"number-format":Ws,object:Go,slice:Ko,step:qi,string:Go,"to-boolean":ws,"to-color":ws,"to-number":ws,"to-string":ws,var:ni,within:er};function Xs(e,i){var l=i[0],y=i[1],P=i[2],j=i[3];l=l.evaluate(e),y=y.evaluate(e),P=P.evaluate(e);var Q=j?j.evaluate(e):1,we=eo(l,y,P,Q);if(we)throw new Jo(we);return new ma(l/255*Q,y/255*Q,P/255*Q,Q)}function gl(e,i){return e in i}function jf(e,i){var l=i[e];return l===void 0?null:l}function Mu(e){return{type:e}}function yl(e){return{result:"success",value:e}}function lc(e){return{result:"error",value:e}}function Lc(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function dh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function _l(e){return!!e.expression&&e.expression.interpolated}function Us(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function th(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Df(e){return e}function Cf(e,i,l){return e!==void 0?e:i!==void 0?i:l!==void 0?l:void 0}function lf(e,i,l,y,P){return Cf(typeof l===P?y[l]:void 0,e.default,i.default)}function gd(e,i,l){if(Us(l)!=="number")return Cf(e.default,i.default);var y=e.stops.length;if(y===1||l<=e.stops[0][0])return e.stops[0][1];if(l>=e.stops[y-1][0])return e.stops[y-1][1];var P=Ei(e.stops.map(function(j){return j[0]}),l);return e.stops[P][1]}function Kh(e,i,l){var y=e.base!==void 0?e.base:1;if(Us(l)!=="number")return Cf(e.default,i.default);var P=e.stops.length;if(P===1||l<=e.stops[0][0])return e.stops[0][1];if(l>=e.stops[P-1][0])return e.stops[P-1][1];var j=Ei(e.stops.map(function(qt){return qt[0]}),l),Q=function(qt,lr,xr,Kr){var qr=Kr-xr,dn=qt-xr;return qr===0?0:lr===1?dn/qr:(Math.pow(lr,dn)-1)/(Math.pow(lr,qr)-1)}(l,y,e.stops[j][0],e.stops[j+1][0]),we=e.stops[j][1],ut=e.stops[j+1][1],Nt=Cn[i.type]||Df;if(e.colorSpace&&e.colorSpace!=="rgb"){var Ut=nr[e.colorSpace];Nt=function(qt,lr){return Ut.reverse(Ut.interpolate(Ut.forward(qt),Ut.forward(lr),Q))}}return typeof we.evaluate=="function"?{evaluate:function(){for(var qt=[],lr=arguments.length;lr--;)qt[lr]=arguments[lr];var xr=we.evaluate.apply(void 0,qt),Kr=ut.evaluate.apply(void 0,qt);if(xr!==void 0&&Kr!==void 0)return Nt(xr,Kr,Q)}}:Nt(we,ut,Q)}function yc(e,i,l){return i.type==="color"?l=ma.parse(l):i.type==="formatted"?l=ha.fromString(l.toString()):i.type==="resolvedImage"?l=xa.fromString(l.toString()):Us(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),Cf(l,e.default,i.default)}Vs.register(Ps,{error:[{kind:"error"},[na],function(e,i){throw new Jo(i[0].evaluate(e))}],typeof:[na,[Ki],function(e,i){return Oi(Po(i[0].evaluate(e)))}],"to-rgba":[gn(Ln,4),[ta],function(e,i){return i[0].evaluate(e).toArray()}],rgb:[ta,[Ln,Ln,Ln],Xs],rgba:[ta,[Ln,Ln,Ln,Ln],Xs],has:{type:xi,overloads:[[[na],function(e,i){return gl(i[0].evaluate(e),e.properties())}],[[na,La],function(e,i){var l=i[1];return gl(i[0].evaluate(e),l.evaluate(e))}]]},get:{type:Ki,overloads:[[[na],function(e,i){return jf(i[0].evaluate(e),e.properties())}],[[na,La],function(e,i){var l=i[1];return jf(i[0].evaluate(e),l.evaluate(e))}]]},"feature-state":[Ki,[na],function(e,i){return jf(i[0].evaluate(e),e.featureState||{})}],properties:[La,[],function(e){return e.properties()}],"geometry-type":[na,[],function(e){return e.geometryType()}],id:[Ki,[],function(e){return e.id()}],zoom:[Ln,[],function(e){return e.globals.zoom}],"heatmap-density":[Ln,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ln,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ki,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Ln,Mu(Ln),function(e,i){for(var l=0,y=0,P=i;y<P.length;y+=1)l+=P[y].evaluate(e);return l}],"*":[Ln,Mu(Ln),function(e,i){for(var l=1,y=0,P=i;y<P.length;y+=1)l*=P[y].evaluate(e);return l}],"-":{type:Ln,overloads:[[[Ln,Ln],function(e,i){var l=i[1];return i[0].evaluate(e)-l.evaluate(e)}],[[Ln],function(e,i){return-i[0].evaluate(e)}]]},"/":[Ln,[Ln,Ln],function(e,i){var l=i[1];return i[0].evaluate(e)/l.evaluate(e)}],"%":[Ln,[Ln,Ln],function(e,i){var l=i[1];return i[0].evaluate(e)%l.evaluate(e)}],ln2:[Ln,[],function(){return Math.LN2}],pi:[Ln,[],function(){return Math.PI}],e:[Ln,[],function(){return Math.E}],"^":[Ln,[Ln,Ln],function(e,i){var l=i[1];return Math.pow(i[0].evaluate(e),l.evaluate(e))}],sqrt:[Ln,[Ln],function(e,i){return Math.sqrt(i[0].evaluate(e))}],log10:[Ln,[Ln],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN10}],ln:[Ln,[Ln],function(e,i){return Math.log(i[0].evaluate(e))}],log2:[Ln,[Ln],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN2}],sin:[Ln,[Ln],function(e,i){return Math.sin(i[0].evaluate(e))}],cos:[Ln,[Ln],function(e,i){return Math.cos(i[0].evaluate(e))}],tan:[Ln,[Ln],function(e,i){return Math.tan(i[0].evaluate(e))}],asin:[Ln,[Ln],function(e,i){return Math.asin(i[0].evaluate(e))}],acos:[Ln,[Ln],function(e,i){return Math.acos(i[0].evaluate(e))}],atan:[Ln,[Ln],function(e,i){return Math.atan(i[0].evaluate(e))}],min:[Ln,Mu(Ln),function(e,i){return Math.min.apply(Math,i.map(function(l){return l.evaluate(e)}))}],max:[Ln,Mu(Ln),function(e,i){return Math.max.apply(Math,i.map(function(l){return l.evaluate(e)}))}],abs:[Ln,[Ln],function(e,i){return Math.abs(i[0].evaluate(e))}],round:[Ln,[Ln],function(e,i){var l=i[0].evaluate(e);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ln,[Ln],function(e,i){return Math.floor(i[0].evaluate(e))}],ceil:[Ln,[Ln],function(e,i){return Math.ceil(i[0].evaluate(e))}],"filter-==":[xi,[na,Ki],function(e,i){var l=i[0],y=i[1];return e.properties()[l.value]===y.value}],"filter-id-==":[xi,[Ki],function(e,i){var l=i[0];return e.id()===l.value}],"filter-type-==":[xi,[na],function(e,i){var l=i[0];return e.geometryType()===l.value}],"filter-<":[xi,[na,Ki],function(e,i){var l=i[0],y=i[1],P=e.properties()[l.value],j=y.value;return typeof P==typeof j&&P<j}],"filter-id-<":[xi,[Ki],function(e,i){var l=i[0],y=e.id(),P=l.value;return typeof y==typeof P&&y<P}],"filter->":[xi,[na,Ki],function(e,i){var l=i[0],y=i[1],P=e.properties()[l.value],j=y.value;return typeof P==typeof j&&P>j}],"filter-id->":[xi,[Ki],function(e,i){var l=i[0],y=e.id(),P=l.value;return typeof y==typeof P&&y>P}],"filter-<=":[xi,[na,Ki],function(e,i){var l=i[0],y=i[1],P=e.properties()[l.value],j=y.value;return typeof P==typeof j&&P<=j}],"filter-id-<=":[xi,[Ki],function(e,i){var l=i[0],y=e.id(),P=l.value;return typeof y==typeof P&&y<=P}],"filter->=":[xi,[na,Ki],function(e,i){var l=i[0],y=i[1],P=e.properties()[l.value],j=y.value;return typeof P==typeof j&&P>=j}],"filter-id->=":[xi,[Ki],function(e,i){var l=i[0],y=e.id(),P=l.value;return typeof y==typeof P&&y>=P}],"filter-has":[xi,[Ki],function(e,i){return i[0].value in e.properties()}],"filter-has-id":[xi,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[xi,[gn(na)],function(e,i){return i[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[xi,[gn(Ki)],function(e,i){return i[0].value.indexOf(e.id())>=0}],"filter-in-small":[xi,[na,gn(Ki)],function(e,i){var l=i[0];return i[1].value.indexOf(e.properties()[l.value])>=0}],"filter-in-large":[xi,[na,gn(Ki)],function(e,i){var l=i[0],y=i[1];return function(P,j,Q,we){for(;Q<=we;){var ut=Q+we>>1;if(j[ut]===P)return!0;j[ut]>P?we=ut-1:Q=ut+1}return!1}(e.properties()[l.value],y.value,0,y.value.length-1)}],all:{type:xi,overloads:[[[xi,xi],function(e,i){var l=i[1];return i[0].evaluate(e)&&l.evaluate(e)}],[Mu(xi),function(e,i){for(var l=0,y=i;l<y.length;l+=1)if(!y[l].evaluate(e))return!1;return!0}]]},any:{type:xi,overloads:[[[xi,xi],function(e,i){var l=i[1];return i[0].evaluate(e)||l.evaluate(e)}],[Mu(xi),function(e,i){for(var l=0,y=i;l<y.length;l+=1)if(y[l].evaluate(e))return!0;return!1}]]},"!":[xi,[xi],function(e,i){return!i[0].evaluate(e)}],"is-supported-script":[xi,[na],function(e,i){var l=e.globals&&e.globals.isSupportedScript;return!l||l(i[0].evaluate(e))}],upcase:[na,[na],function(e,i){return i[0].evaluate(e).toUpperCase()}],downcase:[na,[na],function(e,i){return i[0].evaluate(e).toLowerCase()}],concat:[na,Mu(Ki),function(e,i){return i.map(function(l){return Hs(l.evaluate(e))}).join("")}],"resolved-locale":[na,[jo],function(e,i){return i[0].evaluate(e).resolvedLocale()}]});var Eh=function(e,i){this.expression=e,this._warningHistory={},this._evaluator=new ts,this._defaultValue=i?function(l){return l.type==="color"&&th(l.default)?new ma(0,0,0,0):l.type==="color"?ma.parse(l.default)||null:l.default===void 0?null:l.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function cf(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Ps}function Af(e,i){var l=new oi(Ps,[],i?function(P){var j={color:ta,string:na,number:Ln,enum:na,boolean:xi,formatted:uo,resolvedImage:An};return P.type==="array"?gn(j[P.value]||Ki,P.length):j[P.type]}(i):void 0),y=l.parse(e,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?yl(new Eh(y,i)):lc(l.errors)}Eh.prototype.evaluateWithoutErrorHandling=function(e,i,l,y,P,j){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=y,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=j,this.expression.evaluate(this._evaluator)},Eh.prototype.evaluate=function(e,i,l,y,P,j){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=y,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=j||null;try{var Q=this.expression.evaluate(this._evaluator);if(Q==null||typeof Q=="number"&&Q!=Q)return this._defaultValue;if(this._enumValues&&!(Q in this._enumValues))throw new Jo("Expected value to be one of "+Object.keys(this._enumValues).map(function(we){return JSON.stringify(we)}).join(", ")+", but found "+JSON.stringify(Q)+" instead.");return Q}catch(we){return this._warningHistory[we.message]||(this._warningHistory[we.message]=!0,typeof console!="undefined"&&console.warn(we.message)),this._defaultValue}};var _f=function(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!fn(i.expression)};_f.prototype.evaluateWithoutErrorHandling=function(e,i,l,y,P,j){return this._styleExpression.evaluateWithoutErrorHandling(e,i,l,y,P,j)},_f.prototype.evaluate=function(e,i,l,y,P,j){return this._styleExpression.evaluate(e,i,l,y,P,j)};var kc=function(e,i,l,y){this.kind=e,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!fn(i.expression),this.interpolationType=y};function Ff(e,i){if((e=Af(e,i)).result==="error")return e;var l=e.value.expression,y=sn(l);if(!y&&!Lc(i))return lc([new Si("","data expressions not supported")]);var P=Vn(l,["zoom"]);if(!P&&!dh(i))return lc([new Si("","zoom expressions not supported")]);var j=function Q(we){var ut=null;if(we instanceof Dn)ut=Q(we.result);else if(we instanceof In)for(var Nt=0,Ut=we.args;Nt<Ut.length&&!(ut=Q(Ut[Nt]));Nt+=1);else(we instanceof qi||we instanceof wr)&&we.input instanceof Vs&&we.input.name==="zoom"&&(ut=we);return ut instanceof Si||we.eachChild(function(qt){var lr=Q(qt);lr instanceof Si?ut=lr:!ut&&lr?ut=new Si("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ut&&lr&&ut!==lr&&(ut=new Si("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ut}(l);return j||P?j instanceof Si?lc([j]):j instanceof wr&&!_l(i)?lc([new Si("",'"interpolate" expressions cannot be used with this property')]):yl(j?new kc(y?"camera":"composite",e.value,j.labels,j instanceof wr?j.interpolation:void 0):new _f(y?"constant":"source",e.value)):lc([new Si("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}kc.prototype.evaluateWithoutErrorHandling=function(e,i,l,y,P,j){return this._styleExpression.evaluateWithoutErrorHandling(e,i,l,y,P,j)},kc.prototype.evaluate=function(e,i,l,y,P,j){return this._styleExpression.evaluate(e,i,l,y,P,j)},kc.prototype.interpolationFactor=function(e,i,l){return this.interpolationType?wr.interpolationFactor(this.interpolationType,e,i,l):0};var Zl=function(e,i){this._parameters=e,this._specification=i,Tn(this,function l(y,P){var j,Q,we,ut=P.type==="color",Nt=y.stops&&typeof y.stops[0][0]=="object",Ut=Nt||!(Nt||y.property!==void 0),qt=y.type||(_l(P)?"exponential":"interval");if(ut&&((y=Tn({},y)).stops&&(y.stops=y.stops.map(function(Jn){return[Jn[0],ma.parse(Jn[1])]})),y.default=ma.parse(y.default?y.default:P.default)),y.colorSpace&&y.colorSpace!=="rgb"&&!nr[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);if(qt==="exponential")j=Kh;else if(qt==="interval")j=gd;else if(qt==="categorical"){j=lf,Q=Object.create(null);for(var lr=0,xr=y.stops;lr<xr.length;lr+=1){var Kr=xr[lr];Q[Kr[0]]=Kr[1]}we=typeof y.stops[0][0]}else{if(qt!=="identity")throw new Error('Unknown function type "'+qt+'"');j=yc}if(Nt){for(var qr={},dn=[],cn=0;cn<y.stops.length;cn++){var Un=y.stops[cn],ri=Un[0].zoom;qr[ri]===void 0&&(qr[ri]={zoom:ri,type:y.type,property:y.property,default:y.default,stops:[]},dn.push(ri)),qr[ri].stops.push([Un[0].value,Un[1]])}for(var gi=[],yi=0,Ii=dn;yi<Ii.length;yi+=1){var Ji=Ii[yi];gi.push([qr[Ji].zoom,l(qr[Ji],P)])}var Wi={name:"linear"};return{kind:"composite",interpolationType:Wi,interpolationFactor:wr.interpolationFactor.bind(void 0,Wi),zoomStops:gi.map(function(Jn){return Jn[0]}),evaluate:function(Jn,la){var ea=Jn.zoom;return Kh({stops:gi,base:y.base},P,ea).evaluate(ea,la)}}}if(Ut){var ja=qt==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:ja,interpolationFactor:wr.interpolationFactor.bind(void 0,ja),zoomStops:y.stops.map(function(Jn){return Jn[0]}),evaluate:function(Jn){return j(y,P,Jn.zoom,Q,we)}}}return{kind:"source",evaluate:function(Jn,la){var ea=la&&la.properties?la.properties[y.property]:void 0;return ea===void 0?Cf(y.default,P.default):j(y,P,ea,Q,we)}}}(this._parameters,this._specification))};function Dc(e){var i=e.key,l=e.value,y=e.valueSpec||{},P=e.objectElementValidators||{},j=e.style,Q=e.styleSpec,we=[],ut=Us(l);if(ut!=="object")return[new tt(i,l,"object expected, "+ut+" found")];for(var Nt in l){var Ut=Nt.split(".")[0],qt=y[Ut]||y["*"],lr=void 0;if(P[Ut])lr=P[Ut];else if(y[Ut])lr=lo;else if(P["*"])lr=P["*"];else{if(!y["*"]){we.push(new tt(i,l[Nt],'unknown property "'+Nt+'"'));continue}lr=lo}we=we.concat(lr({key:(i&&i+".")+Nt,value:l[Nt],valueSpec:qt,style:j,styleSpec:Q,object:l,objectKey:Nt},l))}for(var xr in y)P[xr]||y[xr].required&&y[xr].default===void 0&&l[xr]===void 0&&we.push(new tt(i,l,'missing required property "'+xr+'"'));return we}function ad(e){var i=e.value,l=e.valueSpec,y=e.style,P=e.styleSpec,j=e.key,Q=e.arrayElementValidator||lo;if(Us(i)!=="array")return[new tt(j,i,"array expected, "+Us(i)+" found")];if(l.length&&i.length!==l.length)return[new tt(j,i,"array length "+l.length+" expected, length "+i.length+" found")];if(l["min-length"]&&i.length<l["min-length"])return[new tt(j,i,"array length at least "+l["min-length"]+" expected, length "+i.length+" found")];var we={type:l.value,values:l.values};P.$version<7&&(we.function=l.function),Us(l.value)==="object"&&(we=l.value);for(var ut=[],Nt=0;Nt<i.length;Nt++)ut=ut.concat(Q({array:i,arrayIndex:Nt,value:i[Nt],valueSpec:we,style:y,styleSpec:P,key:j+"["+Nt+"]"}));return ut}function rh(e){var i=e.key,l=e.value,y=e.valueSpec,P=Us(l);return P==="number"&&l!=l&&(P="NaN"),P!=="number"?[new tt(i,l,"number expected, "+P+" found")]:"minimum"in y&&l<y.minimum?[new tt(i,l,l+" is less than the minimum value "+y.minimum)]:"maximum"in y&&l>y.maximum?[new tt(i,l,l+" is greater than the maximum value "+y.maximum)]:[]}function od(e){var i,l,y,P=e.valueSpec,j=wn(e.value.type),Q={},we=j!=="categorical"&&e.value.property===void 0,ut=!we,Nt=Us(e.value.stops)==="array"&&Us(e.value.stops[0])==="array"&&Us(e.value.stops[0][0])==="object",Ut=Dc({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(xr){if(j==="identity")return[new tt(xr.key,xr.value,'identity function may not have a "stops" property')];var Kr=[],qr=xr.value;return Kr=Kr.concat(ad({key:xr.key,value:qr,valueSpec:xr.valueSpec,style:xr.style,styleSpec:xr.styleSpec,arrayElementValidator:qt})),Us(qr)==="array"&&qr.length===0&&Kr.push(new tt(xr.key,qr,"array must have at least one stop")),Kr},default:function(xr){return lo({key:xr.key,value:xr.value,valueSpec:P,style:xr.style,styleSpec:xr.styleSpec})}}});return j==="identity"&&we&&Ut.push(new tt(e.key,e.value,'missing required property "property"')),j==="identity"||e.value.stops||Ut.push(new tt(e.key,e.value,'missing required property "stops"')),j==="exponential"&&e.valueSpec.expression&&!_l(e.valueSpec)&&Ut.push(new tt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(ut&&!Lc(e.valueSpec)?Ut.push(new tt(e.key,e.value,"property functions not supported")):we&&!dh(e.valueSpec)&&Ut.push(new tt(e.key,e.value,"zoom functions not supported"))),j!=="categorical"&&!Nt||e.value.property!==void 0||Ut.push(new tt(e.key,e.value,'"property" property is required')),Ut;function qt(xr){var Kr=[],qr=xr.value,dn=xr.key;if(Us(qr)!=="array")return[new tt(dn,qr,"array expected, "+Us(qr)+" found")];if(qr.length!==2)return[new tt(dn,qr,"array length 2 expected, length "+qr.length+" found")];if(Nt){if(Us(qr[0])!=="object")return[new tt(dn,qr,"object expected, "+Us(qr[0])+" found")];if(qr[0].zoom===void 0)return[new tt(dn,qr,"object stop key must have zoom")];if(qr[0].value===void 0)return[new tt(dn,qr,"object stop key must have value")];if(y&&y>wn(qr[0].zoom))return[new tt(dn,qr[0].zoom,"stop zoom values must appear in ascending order")];wn(qr[0].zoom)!==y&&(y=wn(qr[0].zoom),l=void 0,Q={}),Kr=Kr.concat(Dc({key:dn+"[0]",value:qr[0],valueSpec:{zoom:{}},style:xr.style,styleSpec:xr.styleSpec,objectElementValidators:{zoom:rh,value:lr}}))}else Kr=Kr.concat(lr({key:dn+"[0]",value:qr[0],valueSpec:{},style:xr.style,styleSpec:xr.styleSpec},qr));return cf(Nn(qr[1]))?Kr.concat([new tt(dn+"[1]",qr[1],"expressions are not allowed in function stops.")]):Kr.concat(lo({key:dn+"[1]",value:qr[1],valueSpec:P,style:xr.style,styleSpec:xr.styleSpec}))}function lr(xr,Kr){var qr=Us(xr.value),dn=wn(xr.value),cn=xr.value!==null?xr.value:Kr;if(i){if(qr!==i)return[new tt(xr.key,cn,qr+" stop domain type must match previous stop domain type "+i)]}else i=qr;if(qr!=="number"&&qr!=="string"&&qr!=="boolean")return[new tt(xr.key,cn,"stop domain value must be a number, string, or boolean")];if(qr!=="number"&&j!=="categorical"){var Un="number expected, "+qr+" found";return Lc(P)&&j===void 0&&(Un+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tt(xr.key,cn,Un)]}return j!=="categorical"||qr!=="number"||isFinite(dn)&&Math.floor(dn)===dn?j!=="categorical"&&qr==="number"&&l!==void 0&&dn<l?[new tt(xr.key,cn,"stop domain values must appear in ascending order")]:(l=dn,j==="categorical"&&dn in Q?[new tt(xr.key,cn,"stop domain values must be unique")]:(Q[dn]=!0,[])):[new tt(xr.key,cn,"integer expected, found "+dn)]}}function Yo(e){var i=(e.expressionContext==="property"?Ff:Af)(Nn(e.value),e.valueSpec);if(i.result==="error")return i.value.map(function(y){return new tt(""+e.key+y.key,e.value,y.message)});var l=i.value.expression||i.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!l.outputDefined())return[new tt(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!fn(l))return[new tt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!fn(l))return[new tt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Vn(l,["zoom","feature-state"]))return[new tt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!sn(l))return[new tt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gs(e){var i=e.key,l=e.value,y=e.valueSpec,P=[];return Array.isArray(y.values)?y.values.indexOf(wn(l))===-1&&P.push(new tt(i,l,"expected one of ["+y.values.join(", ")+"], "+JSON.stringify(l)+" found")):Object.keys(y.values).indexOf(wn(l))===-1&&P.push(new tt(i,l,"expected one of ["+Object.keys(y.values).join(", ")+"], "+JSON.stringify(l)+" found")),P}function Kl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var i=0,l=e.slice(1);i<l.length;i+=1){var y=l[i];if(!Kl(y)&&typeof y!="boolean")return!1}return!0;default:return!0}}Zl.deserialize=function(e){return new Zl(e._parameters,e._specification)},Zl.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var dl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function su(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Kl(e)||(e=tc(e));var i=Af(e,dl);if(i.result==="error")throw new Error(i.value.map(function(l){return l.key+": "+l.message}).join(", "));return{filter:function(l,y,P){return i.value.evaluate(l,y,{},P)},needGeometry:function l(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(var P=1;P<y.length;P++)if(l(y[P]))return!0;return!1}(e)}}function Fc(e,i){return e<i?-1:e>i?1:0}function tc(e){if(!e)return!0;var i,l=e[0];return e.length<=1?l!=="any":l==="=="?Tf(e[1],e[2],"=="):l==="!="?ff(Tf(e[1],e[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Tf(e[1],e[2],l):l==="any"?(i=e.slice(1),["any"].concat(i.map(tc))):l==="all"?["all"].concat(e.slice(1).map(tc)):l==="none"?["all"].concat(e.slice(1).map(tc).map(ff)):l==="in"?_c(e[1],e.slice(2)):l==="!in"?ff(_c(e[1],e.slice(2))):l==="has"?Hl(e[1]):l==="!has"?ff(Hl(e[1])):l!=="within"||e}function Tf(e,i,l){switch(e){case"$type":return["filter-type-"+l,i];case"$id":return["filter-id-"+l,i];default:return["filter-"+l,e,i]}}function _c(e,i){if(i.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(l){return typeof l!=typeof i[0]})?["filter-in-large",e,["literal",i.sort(Fc)]]:["filter-in-small",e,["literal",i]]}}function Hl(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ff(e){return["!",e]}function xc(e){return Kl(Nn(e.value))?Yo(Tn({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(l){var y=l.value,P=l.key;if(Us(y)!=="array")return[new tt(P,y,"array expected, "+Us(y)+" found")];var j,Q=l.styleSpec,we=[];if(y.length<1)return[new tt(P,y,"filter array must have at least 1 element")];switch(we=we.concat(Gs({key:P+"[0]",value:y[0],valueSpec:Q.filter_operator,style:l.style,styleSpec:l.styleSpec})),wn(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&wn(y[1])==="$type"&&we.push(new tt(P,y,'"$type" cannot be use with operator "'+y[0]+'"'));case"==":case"!=":y.length!==3&&we.push(new tt(P,y,'filter array for operator "'+y[0]+'" must have 3 elements'));case"in":case"!in":y.length>=2&&(j=Us(y[1]))!=="string"&&we.push(new tt(P+"[1]",y[1],"string expected, "+j+" found"));for(var ut=2;ut<y.length;ut++)j=Us(y[ut]),wn(y[1])==="$type"?we=we.concat(Gs({key:P+"["+ut+"]",value:y[ut],valueSpec:Q.geometry_type,style:l.style,styleSpec:l.styleSpec})):j!=="string"&&j!=="number"&&j!=="boolean"&&we.push(new tt(P+"["+ut+"]",y[ut],"string, number, or boolean expected, "+j+" found"));break;case"any":case"all":case"none":for(var Nt=1;Nt<y.length;Nt++)we=we.concat(i({key:P+"["+Nt+"]",value:y[Nt],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":j=Us(y[1]),y.length!==2?we.push(new tt(P,y,'filter array for "'+y[0]+'" operator must have 2 elements')):j!=="string"&&we.push(new tt(P+"[1]",y[1],"string expected, "+j+" found"));break;case"within":j=Us(y[1]),y.length!==2?we.push(new tt(P,y,'filter array for "'+y[0]+'" operator must have 2 elements')):j!=="object"&&we.push(new tt(P+"[1]",y[1],"object expected, "+j+" found"))}return we}(e)}function Yh(e,i){var l=e.key,y=e.style,P=e.styleSpec,j=e.value,Q=e.objectKey,we=P[i+"_"+e.layerType];if(!we)return[];var ut=Q.match(/^(.*)-transition$/);if(i==="paint"&&ut&&we[ut[1]]&&we[ut[1]].transition)return lo({key:l,value:j,valueSpec:P.transition,style:y,styleSpec:P});var Nt,Ut=e.valueSpec||we[Q];if(!Ut)return[new tt(l,j,'unknown property "'+Q+'"')];if(Us(j)==="string"&&Lc(Ut)&&!Ut.tokens&&(Nt=/^{([^}]+)}$/.exec(j)))return[new tt(l,j,'"'+Q+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Nt[1])+" }`.")];var qt=[];return e.layerType==="symbol"&&(Q==="text-field"&&y&&!y.glyphs&&qt.push(new tt(l,j,'use of "text-field" requires a style "glyphs" property')),Q==="text-font"&&th(Nn(j))&&wn(j.type)==="identity"&&qt.push(new tt(l,j,'"text-font" does not support identity functions'))),qt.concat(lo({key:e.key,value:j,valueSpec:Ut,style:y,styleSpec:P,expressionContext:"property",propertyType:i,propertyKey:Q}))}function Uh(e){return Yh(e,"paint")}function Gc(e){return Yh(e,"layout")}function Mf(e){var i=[],l=e.value,y=e.key,P=e.style,j=e.styleSpec;l.type||l.ref||i.push(new tt(y,l,'either "type" or "ref" is required'));var Q,we=wn(l.type),ut=wn(l.ref);if(l.id)for(var Nt=wn(l.id),Ut=0;Ut<e.arrayIndex;Ut++){var qt=P.layers[Ut];wn(qt.id)===Nt&&i.push(new tt(y,l.id,'duplicate layer id "'+l.id+'", previously used at line '+qt.id.__line__))}if("ref"in l)["type","source","source-layer","filter","layout"].forEach(function(Kr){Kr in l&&i.push(new tt(y,l[Kr],'"'+Kr+'" is prohibited for ref layers'))}),P.layers.forEach(function(Kr){wn(Kr.id)===ut&&(Q=Kr)}),Q?Q.ref?i.push(new tt(y,l.ref,"ref cannot reference another ref layer")):we=wn(Q.type):i.push(new tt(y,l.ref,'ref layer "'+ut+'" not found'));else if(we!=="background")if(l.source){var lr=P.sources&&P.sources[l.source],xr=lr&&wn(lr.type);lr?xr==="vector"&&we==="raster"?i.push(new tt(y,l.source,'layer "'+l.id+'" requires a raster source')):xr==="raster"&&we!=="raster"?i.push(new tt(y,l.source,'layer "'+l.id+'" requires a vector source')):xr!=="vector"||l["source-layer"]?xr==="raster-dem"&&we!=="hillshade"?i.push(new tt(y,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):we!=="line"||!l.paint||!l.paint["line-gradient"]||xr==="geojson"&&lr.lineMetrics||i.push(new tt(y,l,'layer "'+l.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new tt(y,l,'layer "'+l.id+'" must specify a "source-layer"')):i.push(new tt(y,l.source,'source "'+l.source+'" not found'))}else i.push(new tt(y,l,'missing required property "source"'));return i=i.concat(Dc({key:y,value:l,valueSpec:j.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return lo({key:y+".type",value:l.type,valueSpec:j.layer.type,style:e.style,styleSpec:e.styleSpec,object:l,objectKey:"type"})},filter:xc,layout:function(Kr){return Dc({layer:l,key:Kr.key,value:Kr.value,style:Kr.style,styleSpec:Kr.styleSpec,objectElementValidators:{"*":function(qr){return Gc(Tn({layerType:we},qr))}}})},paint:function(Kr){return Dc({layer:l,key:Kr.key,value:Kr.value,style:Kr.style,styleSpec:Kr.styleSpec,objectElementValidators:{"*":function(qr){return Uh(Tn({layerType:we},qr))}}})}}}))}function nh(e){var i=e.value,l=e.key,y=Us(i);return y!=="string"?[new tt(l,i,"string expected, "+y+" found")]:[]}var qn={promoteId:function(e){var i=e.key,l=e.value;if(Us(l)==="string")return nh({key:i,value:l});var y=[];for(var P in l)y.push.apply(y,nh({key:i+"."+P,value:l[P]}));return y}};function ca(e){var i=e.value,l=e.key,y=e.styleSpec,P=e.style;if(!i.type)return[new tt(l,i,'"type" is required')];var j,Q=wn(i.type);switch(Q){case"vector":case"raster":case"raster-dem":return Dc({key:l,value:i,valueSpec:y["source_"+Q.replace("-","_")],style:e.style,styleSpec:y,objectElementValidators:qn});case"geojson":if(j=Dc({key:l,value:i,valueSpec:y.source_geojson,style:P,styleSpec:y,objectElementValidators:qn}),i.cluster)for(var we in i.clusterProperties){var ut=i.clusterProperties[we],Nt=ut[0],Ut=typeof Nt=="string"?[Nt,["accumulated"],["get",we]]:Nt;j.push.apply(j,Yo({key:l+"."+we+".map",value:ut[1],expressionContext:"cluster-map"})),j.push.apply(j,Yo({key:l+"."+we+".reduce",value:Ut,expressionContext:"cluster-reduce"}))}return j;case"video":return Dc({key:l,value:i,valueSpec:y.source_video,style:P,styleSpec:y});case"image":return Dc({key:l,value:i,valueSpec:y.source_image,style:P,styleSpec:y});case"canvas":return[new tt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gs({key:l+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:y})}}function $i(e){var i=e.value,l=e.styleSpec,y=l.light,P=e.style,j=[],Q=Us(i);if(i===void 0)return j;if(Q!=="object")return j.concat([new tt("light",i,"object expected, "+Q+" found")]);for(var we in i){var ut=we.match(/^(.*)-transition$/);j=j.concat(ut&&y[ut[1]]&&y[ut[1]].transition?lo({key:we,value:i[we],valueSpec:l.transition,style:P,styleSpec:l}):y[we]?lo({key:we,value:i[we],valueSpec:y[we],style:P,styleSpec:l}):[new tt(we,i[we],'unknown property "'+we+'"')])}return j}var $o={"*":function(){return[]},array:ad,boolean:function(e){var i=e.value,l=e.key,y=Us(i);return y!=="boolean"?[new tt(l,i,"boolean expected, "+y+" found")]:[]},number:rh,color:function(e){var i=e.key,l=e.value,y=Us(l);return y!=="string"?[new tt(i,l,"color expected, "+y+" found")]:Aa(l)===null?[new tt(i,l,'color expected, "'+l+'" found')]:[]},constants:Yr,enum:Gs,filter:xc,function:od,layer:Mf,object:Dc,source:ca,light:$i,string:nh,formatted:function(e){return nh(e).length===0?[]:Yo(e)},resolvedImage:function(e){return nh(e).length===0?[]:Yo(e)}};function lo(e){var i=e.value,l=e.valueSpec,y=e.styleSpec;return l.expression&&th(wn(i))?od(e):l.expression&&cf(Nn(i))?Yo(e):l.type&&$o[l.type]?$o[l.type](e):Dc(Tn({},e,{valueSpec:l.type?y[l.type]:l}))}function Es(e){var i=e.value,l=e.key,y=nh(e);return y.length||(i.indexOf("{fontstack}")===-1&&y.push(new tt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&y.push(new tt(l,i,'"glyphs" url must include a "{range}" token'))),y}function tl(e,i){i===void 0&&(i=fr);var l=[];return l=l.concat(lo({key:"",value:e,valueSpec:i.$root,styleSpec:i,style:e,objectElementValidators:{glyphs:Es,"*":function(){return[]}}})),e.constants&&(l=l.concat(Yr({key:"constants",value:e.constants,style:e,styleSpec:i}))),al(l)}function al(e){return[].concat(e).sort(function(i,l){return i.line-l.line})}function Tl(e){return function(){for(var i=[],l=arguments.length;l--;)i[l]=arguments[l];return al(e.apply(this,i))}}tl.source=Tl(ca),tl.light=Tl($i),tl.layer=Tl(Mf),tl.filter=Tl(xc),tl.paintProperty=Tl(Uh),tl.layoutProperty=Tl(Gc);var Lh=tl,xf=Lh.light,qh=Lh.paintProperty,$h=Lh.layoutProperty;function Ul(e,i){var l=!1;if(i&&i.length)for(var y=0,P=i;y<P.length;y+=1)e.fire(new Hr(new Error(P[y].message))),l=!0;return l}var Rl=ol;function ol(e,i,l){var y=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var P=new Int32Array(this.arrayBuffer);e=P[0],this.d=(i=P[1])+2*(l=P[2]);for(var j=0;j<this.d*this.d;j++){var Q=P[3+j],we=P[3+j+1];y.push(Q===we?null:P.subarray(Q,we))}var ut=P[3+y.length+1];this.keys=P.subarray(P[3+y.length],ut),this.bboxes=P.subarray(ut),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var Nt=0;Nt<this.d*this.d;Nt++)y.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=l,this.scale=i/e,this.uid=0;var Ut=l/i*e;this.min=-Ut,this.max=e+Ut}ol.prototype.insert=function(e,i,l,y,P){this._forEachCell(i,l,y,P,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(y),this.bboxes.push(P)},ol.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ol.prototype._insertCell=function(e,i,l,y,P,j){this.cells[P].push(j)},ol.prototype.query=function(e,i,l,y,P){var j=this.min,Q=this.max;if(e<=j&&i<=j&&Q<=l&&Q<=y&&!P)return Array.prototype.slice.call(this.keys);var we=[];return this._forEachCell(e,i,l,y,this._queryCell,we,{},P),we},ol.prototype._queryCell=function(e,i,l,y,P,j,Q,we){var ut=this.cells[P];if(ut!==null)for(var Nt=this.keys,Ut=this.bboxes,qt=0;qt<ut.length;qt++){var lr=ut[qt];if(Q[lr]===void 0){var xr=4*lr;(we?we(Ut[xr+0],Ut[xr+1],Ut[xr+2],Ut[xr+3]):e<=Ut[xr+2]&&i<=Ut[xr+3]&&l>=Ut[xr+0]&&y>=Ut[xr+1])?(Q[lr]=!0,j.push(Nt[lr])):Q[lr]=!1}}},ol.prototype._forEachCell=function(e,i,l,y,P,j,Q,we){for(var ut=this._convertToCellCoord(e),Nt=this._convertToCellCoord(i),Ut=this._convertToCellCoord(l),qt=this._convertToCellCoord(y),lr=ut;lr<=Ut;lr++)for(var xr=Nt;xr<=qt;xr++){var Kr=this.d*xr+lr;if((!we||we(this._convertFromCellCoord(lr),this._convertFromCellCoord(xr),this._convertFromCellCoord(lr+1),this._convertFromCellCoord(xr+1)))&&P.call(this,e,i,l,y,Kr,j,Q,we))return}},ol.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ol.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ol.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,i=3+this.cells.length+1+1,l=0,y=0;y<this.cells.length;y++)l+=this.cells[y].length;var P=new Int32Array(i+l+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var j=i,Q=0;Q<e.length;Q++){var we=e[Q];P[3+Q]=j,P.set(we,j),j+=we.length}return P[3+e.length]=j,P.set(this.keys,j),P[3+e.length+1]=j+=this.keys.length,P.set(this.bboxes,j),j+=this.bboxes.length,P.buffer};var uu=$.ImageData,Bc=$.ImageBitmap,cc={};function ao(e,i,l){l===void 0&&(l={}),Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),cc[e]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}for(var Ml in ao("Object",Object),Rl.serialize=function(e,i){var l=e.toArrayBuffer();return i&&i.push(l),{buffer:l}},Rl.deserialize=function(e){return new Rl(e.buffer)},ao("Grid",Rl),ao("Color",ma),ao("Error",Error),ao("ResolvedImage",xa),ao("StylePropertyFunction",Zl),ao("StyleExpression",Eh,{omit:["_evaluator"]}),ao("ZoomDependentExpression",kc),ao("ZoomConstantExpression",_f),ao("CompoundExpression",Vs,{omit:["_evaluate"]}),Ps)Ps[Ml]._classRegistryKey||ao("Expression_"+Ml,Ps[Ml]);function Hf(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function fl(e){return Bc&&e instanceof Bc}function Vl(e,i){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Hf(e)||fl(e))return i&&i.push(e),e;if(ArrayBuffer.isView(e)){var l=e;return i&&i.push(l.buffer),l}if(e instanceof uu)return i&&i.push(e.data.buffer),e;if(Array.isArray(e)){for(var y=[],P=0,j=e;P<j.length;P+=1)y.push(Vl(j[P],i));return y}if(typeof e=="object"){var Q=e.constructor,we=Q._classRegistryKey;if(!we)throw new Error("can't serialize object of unregistered class");var ut=Q.serialize?Q.serialize(e,i):{};if(!Q.serialize){for(var Nt in e)if(e.hasOwnProperty(Nt)&&!(cc[we].omit.indexOf(Nt)>=0)){var Ut=e[Nt];ut[Nt]=cc[we].shallow.indexOf(Nt)>=0?Ut:Vl(Ut,i)}e instanceof Error&&(ut.message=e.message)}if(ut.$name)throw new Error("$name property is reserved for worker serialization logic.");return we!=="Object"&&(ut.$name=we),ut}throw new Error("can't serialize object of type "+typeof e)}function Ll(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Hf(e)||fl(e)||ArrayBuffer.isView(e)||e instanceof uu)return e;if(Array.isArray(e))return e.map(Ll);if(typeof e=="object"){var i=e.$name||"Object",l=cc[i].klass;if(!l)throw new Error("can't deserialize unregistered class "+i);if(l.deserialize)return l.deserialize(e);for(var y=Object.create(l.prototype),P=0,j=Object.keys(e);P<j.length;P+=1){var Q=j[P];if(Q!=="$name"){var we=e[Q];y[Q]=cc[i].shallow.indexOf(Q)>=0?we:Ll(we)}}return y}throw new Error("can't deserialize object of type "+typeof e)}var jh=function(){this.first=!0};jh.prototype.update=function(e,i){var l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))};var qa={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Yl(e){for(var i=0,l=e;i<l.length;i+=1)if(Vf(l[i].charCodeAt(0)))return!0;return!1}function Vf(e){return!(e!==746&&e!==747&&(e<4352||!(qa["Bopomofo Extended"](e)||qa.Bopomofo(e)||qa["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||qa["CJK Compatibility Ideographs"](e)||qa["CJK Compatibility"](e)||qa["CJK Radicals Supplement"](e)||qa["CJK Strokes"](e)||!(!qa["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||qa["CJK Unified Ideographs Extension A"](e)||qa["CJK Unified Ideographs"](e)||qa["Enclosed CJK Letters and Months"](e)||qa["Hangul Compatibility Jamo"](e)||qa["Hangul Jamo Extended-A"](e)||qa["Hangul Jamo Extended-B"](e)||qa["Hangul Jamo"](e)||qa["Hangul Syllables"](e)||qa.Hiragana(e)||qa["Ideographic Description Characters"](e)||qa.Kanbun(e)||qa["Kangxi Radicals"](e)||qa["Katakana Phonetic Extensions"](e)||qa.Katakana(e)&&e!==12540||!(!qa["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!qa["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||qa["Unified Canadian Aboriginal Syllabics"](e)||qa["Unified Canadian Aboriginal Syllabics Extended"](e)||qa["Vertical Forms"](e)||qa["Yijing Hexagram Symbols"](e)||qa["Yi Syllables"](e)||qa["Yi Radicals"](e))))}function ih(e){return!(Vf(e)||function(i){return!!(qa["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||qa["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||qa["Letterlike Symbols"](i)||qa["Number Forms"](i)||qa["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||qa["Control Pictures"](i)&&i!==9251||qa["Optical Character Recognition"](i)||qa["Enclosed Alphanumerics"](i)||qa["Geometric Shapes"](i)||qa["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||qa["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||qa["CJK Symbols and Punctuation"](i)||qa.Katakana(i)||qa["Private Use Area"](i)||qa["CJK Compatibility Forms"](i)||qa["Small Form Variants"](i)||qa["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(e))}function Vu(e){return e>=1424&&e<=2303||qa["Arabic Presentation Forms-A"](e)||qa["Arabic Presentation Forms-B"](e)}function hf(e,i){return!(!i&&Vu(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||qa.Khmer(e))}function Hh(e){for(var i=0,l=e;i<l.length;i+=1)if(Vu(l[i].charCodeAt(0)))return!0;return!1}var bc=null,Ec="unavailable",ah=null,Wc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Ec="error"),bc&&bc(e)};function kh(){Sc.fire(new _r("pluginStateChange",{pluginStatus:Ec,pluginURL:ah}))}var Sc=new Qr,Vh=function(){return Ec},ql=function(){if(Ec!=="deferred"||!ah)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ec="loading",kh(),ah&&bt({url:ah},function(e){e?Wc(e):(Ec="loaded",kh())})},gu={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ec==="loaded"||gu.applyArabicShaping!=null},isLoading:function(){return Ec==="loading"},setState:function(e){Ec=e.pluginStatus,ah=e.pluginURL},isParsed:function(){return gu.applyArabicShaping!=null&&gu.processBidirectionalText!=null&&gu.processStyledBidirectionalText!=null},getPluginURL:function(){return ah}},Ks=function(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jh,this.transition={})};Ks.prototype.isSupportedScript=function(e){return function(i,l){for(var y=0,P=i;y<P.length;y+=1)if(!hf(P[y].charCodeAt(0),l))return!1;return!0}(e,gu.isLoaded())},Ks.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ks.prototype.getCrossfadeParameters=function(){var e=this.zoom,i=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*i}};var Gf=function(e,i){this.property=e,this.value=i,this.expression=function(l,y){if(th(l))return new Zl(l,y);if(cf(l)){var P=Ff(l,y);if(P.result==="error")throw new Error(P.value.map(function(Q){return Q.key+": "+Q.message}).join(", "));return P.value}var j=l;return typeof l=="string"&&y.type==="color"&&(j=ma.parse(l)),{kind:"constant",evaluate:function(){return j}}}(i===void 0?e.specification.default:i,e.specification)};Gf.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Gf.prototype.possiblyEvaluate=function(e,i,l){return this.property.possiblyEvaluate(this,e,i,l)};var Bf=function(e){this.property=e,this.value=new Gf(e,void 0)};Bf.prototype.transitioned=function(e,i){return new Pl(this.property,this.value,i,Se({},e.transition,this.transition),e.now)},Bf.prototype.untransitioned=function(){return new Pl(this.property,this.value,null,{},0)};var eu=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};eu.prototype.getValue=function(e){return ie(this._values[e].value.value)},eu.prototype.setValue=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Bf(this._values[e].property)),this._values[e].value=new Gf(this._values[e].property,i===null?void 0:ie(i))},eu.prototype.getTransition=function(e){return ie(this._values[e].transition)},eu.prototype.setTransition=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Bf(this._values[e].property)),this._values[e].transition=ie(i)||void 0},eu.prototype.serialize=function(){for(var e={},i=0,l=Object.keys(this._values);i<l.length;i+=1){var y=l[i],P=this.getValue(y);P!==void 0&&(e[y]=P);var j=this.getTransition(y);j!==void 0&&(e[y+"-transition"]=j)}return e},eu.prototype.transitioned=function(e,i){for(var l=new Xc(this._properties),y=0,P=Object.keys(this._values);y<P.length;y+=1){var j=P[y];l._values[j]=this._values[j].transitioned(e,i._values[j])}return l},eu.prototype.untransitioned=function(){for(var e=new Xc(this._properties),i=0,l=Object.keys(this._values);i<l.length;i+=1){var y=l[i];e._values[y]=this._values[y].untransitioned()}return e};var Pl=function(e,i,l,y,P){this.property=e,this.value=i,this.begin=P+y.delay||0,this.end=this.begin+y.duration||0,e.specification.transition&&(y.delay||y.duration)&&(this.prior=l)};Pl.prototype.possiblyEvaluate=function(e,i,l){var y=e.now||0,P=this.value.possiblyEvaluate(e,i,l),j=this.prior;if(j){if(y>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(y<this.begin)return j.possiblyEvaluate(e,i,l);var Q=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(j.possiblyEvaluate(e,i,l),P,function(we){if(we<=0)return 0;if(we>=1)return 1;var ut=we*we,Nt=ut*we;return 4*(we<.5?Nt:3*(we-ut)+Nt-.75)}(Q))}return P};var Xc=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Xc.prototype.possiblyEvaluate=function(e,i,l){for(var y=new fc(this._properties),P=0,j=Object.keys(this._values);P<j.length;P+=1){var Q=j[P];y._values[Q]=this._values[Q].possiblyEvaluate(e,i,l)}return y},Xc.prototype.hasTransition=function(){for(var e=0,i=Object.keys(this._values);e<i.length;e+=1)if(this._values[i[e]].prior)return!0;return!1};var Nc=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Nc.prototype.getValue=function(e){return ie(this._values[e].value)},Nc.prototype.setValue=function(e,i){this._values[e]=new Gf(this._values[e].property,i===null?void 0:ie(i))},Nc.prototype.serialize=function(){for(var e={},i=0,l=Object.keys(this._values);i<l.length;i+=1){var y=l[i],P=this.getValue(y);P!==void 0&&(e[y]=P)}return e},Nc.prototype.possiblyEvaluate=function(e,i,l){for(var y=new fc(this._properties),P=0,j=Object.keys(this._values);P<j.length;P+=1){var Q=j[P];y._values[Q]=this._values[Q].possiblyEvaluate(e,i,l)}return y};var Ql=function(e,i,l){this.property=e,this.value=i,this.parameters=l};Ql.prototype.isConstant=function(){return this.value.kind==="constant"},Ql.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Ql.prototype.evaluate=function(e,i,l,y){return this.property.evaluate(this.value,this.parameters,e,i,l,y)};var fc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};fc.prototype.get=function(e){return this._values[e]};var oo=function(e){this.specification=e};oo.prototype.possiblyEvaluate=function(e,i){return e.expression.evaluate(i)},oo.prototype.interpolate=function(e,i,l){var y=Cn[this.specification.type];return y?y(e,i,l):e};var Do=function(e,i){this.specification=e,this.overrides=i};Do.prototype.possiblyEvaluate=function(e,i,l,y){return new Ql(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},l,y)}:e.expression,i)},Do.prototype.interpolate=function(e,i,l){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Ql(this,{kind:"constant",value:void 0},e.parameters);var y=Cn[this.specification.type];return y?new Ql(this,{kind:"constant",value:y(e.value.value,i.value.value,l)},e.parameters):e},Do.prototype.evaluate=function(e,i,l,y,P,j){return e.kind==="constant"?e.value:e.evaluate(i,l,y,P,j)};var nu=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(l,y,P,j){if(l.value===void 0)return new Ql(this,{kind:"constant",value:void 0},y);if(l.expression.kind==="constant"){var Q=l.expression.evaluate(y,null,{},P,j),we=l.property.specification.type==="resolvedImage"&&typeof Q!="string"?Q.name:Q,ut=this._calculate(we,we,we,y);return new Ql(this,{kind:"constant",value:ut},y)}if(l.expression.kind==="camera"){var Nt=this._calculate(l.expression.evaluate({zoom:y.zoom-1}),l.expression.evaluate({zoom:y.zoom}),l.expression.evaluate({zoom:y.zoom+1}),y);return new Ql(this,{kind:"constant",value:Nt},y)}return new Ql(this,l.expression,y)},i.prototype.evaluate=function(l,y,P,j,Q,we){if(l.kind==="source"){var ut=l.evaluate(y,P,j,Q,we);return this._calculate(ut,ut,ut,y)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(y.zoom)-1},P,j),l.evaluate({zoom:Math.floor(y.zoom)},P,j),l.evaluate({zoom:Math.floor(y.zoom)+1},P,j),y):l.value},i.prototype._calculate=function(l,y,P,j){return j.zoom>j.zoomHistory.lastIntegerZoom?{from:l,to:y}:{from:P,to:y}},i.prototype.interpolate=function(l){return l},i}(Do),Jl=function(e){this.specification=e};Jl.prototype.possiblyEvaluate=function(e,i,l,y){if(e.value!==void 0){if(e.expression.kind==="constant"){var P=e.expression.evaluate(i,null,{},l,y);return this._calculate(P,P,P,i)}return this._calculate(e.expression.evaluate(new Ks(Math.floor(i.zoom-1),i)),e.expression.evaluate(new Ks(Math.floor(i.zoom),i)),e.expression.evaluate(new Ks(Math.floor(i.zoom+1),i)),i)}},Jl.prototype._calculate=function(e,i,l,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:l,to:i}},Jl.prototype.interpolate=function(e){return e};var xl=function(e){this.specification=e};xl.prototype.possiblyEvaluate=function(e,i,l,y){return!!e.expression.evaluate(i,null,{},l,y)},xl.prototype.interpolate=function(){return!1};var mu=function(e){for(var i in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var l=e[i];l.specification.overridable&&this.overridableProperties.push(i);var y=this.defaultPropertyValues[i]=new Gf(l,void 0),P=this.defaultTransitionablePropertyValues[i]=new Bf(l);this.defaultTransitioningPropertyValues[i]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=y.possiblyEvaluate({})}};ao("DataDrivenProperty",Do),ao("DataConstantProperty",oo),ao("CrossFadedDataDrivenProperty",nu),ao("CrossFadedProperty",Jl),ao("ColorRampProperty",xl);var Ku=function(e){function i(l,y){if(e.call(this),this.id=l.id,this.type=l.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},l.type!=="custom"&&(this.metadata=(l=l).metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),y.layout&&(this._unevaluatedLayout=new Nc(y.layout)),y.paint)){for(var P in this._transitionablePaint=new eu(y.paint),l.paint)this.setPaintProperty(P,l.paint[P],{validate:!1});for(var j in l.layout)this.setLayoutProperty(j,l.layout[j],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fc(y.paint)}}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)},i.prototype.setLayoutProperty=function(l,y,P){P===void 0&&(P={}),y!=null&&this._validate($h,"layers."+this.id+".layout."+l,l,y,P)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,y):this.visibility=y)},i.prototype.getPaintProperty=function(l){return pe(l,"-transition")?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)},i.prototype.setPaintProperty=function(l,y,P){if(P===void 0&&(P={}),y!=null&&this._validate(qh,"layers."+this.id+".paint."+l,l,y,P))return!1;if(pe(l,"-transition"))return this._transitionablePaint.setTransition(l.slice(0,-11),y||void 0),!1;var j=this._transitionablePaint._values[l],Q=j.property.specification["property-type"]==="cross-faded-data-driven",we=j.value.isDataDriven(),ut=j.value;this._transitionablePaint.setValue(l,y),this._handleSpecialPaintPropertyUpdate(l);var Nt=this._transitionablePaint._values[l].value;return Nt.isDataDriven()||we||Q||this._handleOverridablePaintPropertyUpdate(l,ut,Nt)},i.prototype._handleSpecialPaintPropertyUpdate=function(l){},i.prototype._handleOverridablePaintPropertyUpdate=function(l,y,P){return!1},i.prototype.isHidden=function(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(l,y){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,y)},i.prototype.serialize=function(){var l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ye(l,function(y,P){return!(y===void 0||P==="layout"&&!Object.keys(y).length||P==="paint"&&!Object.keys(y).length)})},i.prototype._validate=function(l,y,P,j,Q){return Q===void 0&&(Q={}),(!Q||Q.validate!==!1)&&Ul(this,l.call(Lh,{key:y,layerType:this.type,objectKey:P,value:j,styleSpec:fr,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var l in this.paint._values){var y=this.paint.get(l);if(y instanceof Ql&&Lc(y.property.specification)&&(y.value.kind==="source"||y.value.kind==="composite")&&y.value.isStateDependent)return!0}return!1},i}(Qr),Kc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Gh=function(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Yu=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function bl(e,i){i===void 0&&(i=1);var l=0,y=0;return{members:e.map(function(P){var j=Kc[P.type].BYTES_PER_ELEMENT,Q=l=yd(l,Math.max(i,j)),we=P.components||1;return y=Math.max(y,j),l+=j*we,{name:P.name,type:P.type,components:we,offset:Q}}),size:yd(l,Math.max(y,i)),alignment:i}}function yd(e,i){return Math.ceil(e/i)*i}Yu.serialize=function(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Yu.deserialize=function(e){var i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Yu.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Yu.prototype.clear=function(){this.length=0},Yu.prototype.resize=function(e){this.reserve(e),this.length=e},Yu.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Yu.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ph=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y){var P=this.length;return this.resize(P+1),this.emplace(P,l,y)},i.prototype.emplace=function(l,y,P){var j=2*l;return this.int16[j+0]=y,this.int16[j+1]=P,l},i}(Yu);ph.prototype.bytesPerElement=4,ao("StructArrayLayout2i4",ph);var wc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,l,y,P,j)},i.prototype.emplace=function(l,y,P,j,Q){var we=4*l;return this.int16[we+0]=y,this.int16[we+1]=P,this.int16[we+2]=j,this.int16[we+3]=Q,l},i}(Yu);wc.prototype.bytesPerElement=8,ao("StructArrayLayout4i8",wc);var Yc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we){var ut=this.length;return this.resize(ut+1),this.emplace(ut,l,y,P,j,Q,we)},i.prototype.emplace=function(l,y,P,j,Q,we,ut){var Nt=6*l;return this.int16[Nt+0]=y,this.int16[Nt+1]=P,this.int16[Nt+2]=j,this.int16[Nt+3]=Q,this.int16[Nt+4]=we,this.int16[Nt+5]=ut,l},i}(Yu);Yc.prototype.bytesPerElement=12,ao("StructArrayLayout2i4i12",Yc);var kl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we){var ut=this.length;return this.resize(ut+1),this.emplace(ut,l,y,P,j,Q,we)},i.prototype.emplace=function(l,y,P,j,Q,we,ut){var Nt=4*l,Ut=8*l;return this.int16[Nt+0]=y,this.int16[Nt+1]=P,this.uint8[Ut+4]=j,this.uint8[Ut+5]=Q,this.uint8[Ut+6]=we,this.uint8[Ut+7]=ut,l},i}(Yu);kl.prototype.bytesPerElement=8,ao("StructArrayLayout2i4ub8",kl);var Dr=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y){var P=this.length;return this.resize(P+1),this.emplace(P,l,y)},i.prototype.emplace=function(l,y,P){var j=2*l;return this.float32[j+0]=y,this.float32[j+1]=P,l},i}(Yu);Dr.prototype.bytesPerElement=8,ao("StructArrayLayout2f8",Dr);var Dl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we,ut,Nt,Ut,qt){var lr=this.length;return this.resize(lr+1),this.emplace(lr,l,y,P,j,Q,we,ut,Nt,Ut,qt)},i.prototype.emplace=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr){var xr=10*l;return this.uint16[xr+0]=y,this.uint16[xr+1]=P,this.uint16[xr+2]=j,this.uint16[xr+3]=Q,this.uint16[xr+4]=we,this.uint16[xr+5]=ut,this.uint16[xr+6]=Nt,this.uint16[xr+7]=Ut,this.uint16[xr+8]=qt,this.uint16[xr+9]=lr,l},i}(Yu);Dl.prototype.bytesPerElement=20,ao("StructArrayLayout10ui20",Dl);var Vo=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr){var Kr=this.length;return this.resize(Kr+1),this.emplace(Kr,l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr)},i.prototype.emplace=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr){var qr=12*l;return this.int16[qr+0]=y,this.int16[qr+1]=P,this.int16[qr+2]=j,this.int16[qr+3]=Q,this.uint16[qr+4]=we,this.uint16[qr+5]=ut,this.uint16[qr+6]=Nt,this.uint16[qr+7]=Ut,this.int16[qr+8]=qt,this.int16[qr+9]=lr,this.int16[qr+10]=xr,this.int16[qr+11]=Kr,l},i}(Yu);Vo.prototype.bytesPerElement=24,ao("StructArrayLayout4i4ui4i24",Vo);var qo=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P){var j=this.length;return this.resize(j+1),this.emplace(j,l,y,P)},i.prototype.emplace=function(l,y,P,j){var Q=3*l;return this.float32[Q+0]=y,this.float32[Q+1]=P,this.float32[Q+2]=j,l},i}(Yu);qo.prototype.bytesPerElement=12,ao("StructArrayLayout3f12",qo);var du=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var y=this.length;return this.resize(y+1),this.emplace(y,l)},i.prototype.emplace=function(l,y){return this.uint32[1*l+0]=y,l},i}(Yu);du.prototype.bytesPerElement=4,ao("StructArrayLayout1ul4",du);var Dh=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we,ut,Nt,Ut){var qt=this.length;return this.resize(qt+1),this.emplace(qt,l,y,P,j,Q,we,ut,Nt,Ut)},i.prototype.emplace=function(l,y,P,j,Q,we,ut,Nt,Ut,qt){var lr=10*l,xr=5*l;return this.int16[lr+0]=y,this.int16[lr+1]=P,this.int16[lr+2]=j,this.int16[lr+3]=Q,this.int16[lr+4]=we,this.int16[lr+5]=ut,this.uint32[xr+3]=Nt,this.uint16[lr+8]=Ut,this.uint16[lr+9]=qt,l},i}(Yu);Dh.prototype.bytesPerElement=20,ao("StructArrayLayout6i1ul2ui20",Dh);var Wf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we){var ut=this.length;return this.resize(ut+1),this.emplace(ut,l,y,P,j,Q,we)},i.prototype.emplace=function(l,y,P,j,Q,we,ut){var Nt=6*l;return this.int16[Nt+0]=y,this.int16[Nt+1]=P,this.int16[Nt+2]=j,this.int16[Nt+3]=Q,this.int16[Nt+4]=we,this.int16[Nt+5]=ut,l},i}(Yu);Wf.prototype.bytesPerElement=12,ao("StructArrayLayout2i2i2i12",Wf);var zc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q){var we=this.length;return this.resize(we+1),this.emplace(we,l,y,P,j,Q)},i.prototype.emplace=function(l,y,P,j,Q,we){var ut=4*l,Nt=8*l;return this.float32[ut+0]=y,this.float32[ut+1]=P,this.float32[ut+2]=j,this.int16[Nt+6]=Q,this.int16[Nt+7]=we,l},i}(Yu);zc.prototype.bytesPerElement=16,ao("StructArrayLayout2f1f2i16",zc);var df=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,l,y,P,j)},i.prototype.emplace=function(l,y,P,j,Q){var we=12*l,ut=3*l;return this.uint8[we+0]=y,this.uint8[we+1]=P,this.float32[ut+1]=j,this.float32[ut+2]=Q,l},i}(Yu);df.prototype.bytesPerElement=12,ao("StructArrayLayout2ub2f12",df);var rc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P){var j=this.length;return this.resize(j+1),this.emplace(j,l,y,P)},i.prototype.emplace=function(l,y,P,j){var Q=3*l;return this.uint16[Q+0]=y,this.uint16[Q+1]=P,this.uint16[Q+2]=j,l},i}(Yu);rc.prototype.bytesPerElement=6,ao("StructArrayLayout3ui6",rc);var ys=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un){var ri=this.length;return this.resize(ri+1),this.emplace(ri,l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un)},i.prototype.emplace=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un,ri){var gi=24*l,yi=12*l,Ii=48*l;return this.int16[gi+0]=y,this.int16[gi+1]=P,this.uint16[gi+2]=j,this.uint16[gi+3]=Q,this.uint32[yi+2]=we,this.uint32[yi+3]=ut,this.uint32[yi+4]=Nt,this.uint16[gi+10]=Ut,this.uint16[gi+11]=qt,this.uint16[gi+12]=lr,this.float32[yi+7]=xr,this.float32[yi+8]=Kr,this.uint8[Ii+36]=qr,this.uint8[Ii+37]=dn,this.uint8[Ii+38]=cn,this.uint32[yi+10]=Un,this.int16[gi+22]=ri,l},i}(Yu);ys.prototype.bytesPerElement=48,ao("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ys);var bf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un,ri,gi,yi,Ii,Ji,Wi,ja,Jn,la,ea,bo){var Eo=this.length;return this.resize(Eo+1),this.emplace(Eo,l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un,ri,gi,yi,Ii,Ji,Wi,ja,Jn,la,ea,bo)},i.prototype.emplace=function(l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr,dn,cn,Un,ri,gi,yi,Ii,Ji,Wi,ja,Jn,la,ea,bo,Eo){var Ja=34*l,Ss=17*l;return this.int16[Ja+0]=y,this.int16[Ja+1]=P,this.int16[Ja+2]=j,this.int16[Ja+3]=Q,this.int16[Ja+4]=we,this.int16[Ja+5]=ut,this.int16[Ja+6]=Nt,this.int16[Ja+7]=Ut,this.uint16[Ja+8]=qt,this.uint16[Ja+9]=lr,this.uint16[Ja+10]=xr,this.uint16[Ja+11]=Kr,this.uint16[Ja+12]=qr,this.uint16[Ja+13]=dn,this.uint16[Ja+14]=cn,this.uint16[Ja+15]=Un,this.uint16[Ja+16]=ri,this.uint16[Ja+17]=gi,this.uint16[Ja+18]=yi,this.uint16[Ja+19]=Ii,this.uint16[Ja+20]=Ji,this.uint16[Ja+21]=Wi,this.uint16[Ja+22]=ja,this.uint32[Ss+12]=Jn,this.float32[Ss+13]=la,this.float32[Ss+14]=ea,this.float32[Ss+15]=bo,this.float32[Ss+16]=Eo,l},i}(Yu);bf.prototype.bytesPerElement=68,ao("StructArrayLayout8i15ui1ul4f68",bf);var Xf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var y=this.length;return this.resize(y+1),this.emplace(y,l)},i.prototype.emplace=function(l,y){return this.float32[1*l+0]=y,l},i}(Yu);Xf.prototype.bytesPerElement=4,ao("StructArrayLayout1f4",Xf);var rl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P){var j=this.length;return this.resize(j+1),this.emplace(j,l,y,P)},i.prototype.emplace=function(l,y,P,j){var Q=3*l;return this.int16[Q+0]=y,this.int16[Q+1]=P,this.int16[Q+2]=j,l},i}(Yu);rl.prototype.bytesPerElement=6,ao("StructArrayLayout3i6",rl);var Cc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P){var j=this.length;return this.resize(j+1),this.emplace(j,l,y,P)},i.prototype.emplace=function(l,y,P,j){var Q=4*l;return this.uint32[2*l+0]=y,this.uint16[Q+2]=P,this.uint16[Q+3]=j,l},i}(Yu);Cc.prototype.bytesPerElement=8,ao("StructArrayLayout1ul2ui8",Cc);var Zc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y){var P=this.length;return this.resize(P+1),this.emplace(P,l,y)},i.prototype.emplace=function(l,y,P){var j=2*l;return this.uint16[j+0]=y,this.uint16[j+1]=P,l},i}(Yu);Zc.prototype.bytesPerElement=4,ao("StructArrayLayout2ui4",Zc);var sd=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l){var y=this.length;return this.resize(y+1),this.emplace(y,l)},i.prototype.emplace=function(l,y){return this.uint16[1*l+0]=y,l},i}(Yu);sd.prototype.bytesPerElement=2,ao("StructArrayLayout1ui2",sd);var qc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(l,y,P,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,l,y,P,j)},i.prototype.emplace=function(l,y,P,j,Q){var we=4*l;return this.float32[we+0]=y,this.float32[we+1]=P,this.float32[we+2]=j,this.float32[we+3]=Q,l},i}(Yu);qc.prototype.bytesPerElement=16,ao("StructArrayLayout4f16",qc);var f=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var l={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return l.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},l.x1.get=function(){return this._structArray.int16[this._pos2+2]},l.y1.get=function(){return this._structArray.int16[this._pos2+3]},l.x2.get=function(){return this._structArray.int16[this._pos2+4]},l.y2.get=function(){return this._structArray.int16[this._pos2+5]},l.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},l.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},l.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},l.anchorPoint.get=function(){return new B(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,l),i}(Gh);f.prototype.size=20;var m=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(l){return new f(this,l)},i}(Dh);ao("CollisionBoxArray",m);var p=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var l={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return l.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},l.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},l.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},l.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},l.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},l.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},l.segment.get=function(){return this._structArray.uint16[this._pos2+10]},l.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},l.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},l.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},l.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},l.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},l.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},l.placedOrientation.set=function(y){this._structArray.uint8[this._pos1+37]=y},l.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},l.hidden.set=function(y){this._structArray.uint8[this._pos1+38]=y},l.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},l.crossTileID.set=function(y){this._structArray.uint32[this._pos4+10]=y},l.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,l),i}(Gh);p.prototype.size=48;var E=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(l){return new p(this,l)},i}(ys);ao("PlacedSymbolArray",E);var Y=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var l={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return l.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},l.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},l.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},l.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},l.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},l.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},l.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},l.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},l.key.get=function(){return this._structArray.uint16[this._pos2+8]},l.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},l.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},l.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},l.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},l.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},l.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},l.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},l.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},l.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},l.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},l.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},l.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},l.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},l.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},l.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},l.crossTileID.set=function(y){this._structArray.uint32[this._pos4+12]=y},l.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},l.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},l.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},l.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,l),i}(Gh);Y.prototype.size=68;var Ce=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(l){return new Y(this,l)},i}(bf);ao("SymbolInstanceArray",Ce);var ze=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getoffsetX=function(l){return this.float32[1*l+0]},i}(Xf);ao("GlyphOffsetArray",ze);var gt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getx=function(l){return this.int16[3*l+0]},i.prototype.gety=function(l){return this.int16[3*l+1]},i.prototype.gettileUnitDistanceFromAnchor=function(l){return this.int16[3*l+2]},i}(rl);ao("SymbolLineVertexArray",gt);var Gt=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var l={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return l.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},l.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},l.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,l),i}(Gh);Gt.prototype.size=8;var sr=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(l){return new Gt(this,l)},i}(Cc);ao("FeatureIndexArray",sr);var Mr=bl([{name:"a_pos",components:2,type:"Int16"}],4).members,Or=function(e){e===void 0&&(e=[]),this.segments=e};function Br(e,i){return 256*(e=me(Math.floor(e),0,255))+me(Math.floor(i),0,255)}Or.prototype.prepareSegment=function(e,i,l,y){var P=this.segments[this.segments.length-1];return e>Or.MAX_VERTEX_ARRAY_LENGTH&&De("Max vertices per segment is "+Or.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!P||P.vertexLength+e>Or.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==y)&&(P={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},y!==void 0&&(P.sortKey=y),this.segments.push(P)),P},Or.prototype.get=function(){return this.segments},Or.prototype.destroy=function(){for(var e=0,i=this.segments;e<i.length;e+=1){var l=i[e];for(var y in l.vaos)l.vaos[y].destroy()}},Or.simpleSegment=function(e,i,l,y){return new Or([{vertexOffset:e,primitiveOffset:i,vertexLength:l,primitiveLength:y,vaos:{},sortKey:0}])},Or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ao("SegmentVector",Or);var yn=bl([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),hn=K(function(e){e.exports=function(i,l){var y,P,j,Q,we,ut,Nt,Ut;for(P=i.length-(y=3&i.length),j=l,we=3432918353,ut=461845907,Ut=0;Ut<P;)Nt=255&i.charCodeAt(Ut)|(255&i.charCodeAt(++Ut))<<8|(255&i.charCodeAt(++Ut))<<16|(255&i.charCodeAt(++Ut))<<24,++Ut,j=27492+(65535&(Q=5*(65535&(j=(j^=Nt=(65535&(Nt=(Nt=(65535&Nt)*we+(((Nt>>>16)*we&65535)<<16)&4294967295)<<15|Nt>>>17))*ut+(((Nt>>>16)*ut&65535)<<16)&4294967295)<<13|j>>>19))+((5*(j>>>16)&65535)<<16)&4294967295))+((58964+(Q>>>16)&65535)<<16);switch(Nt=0,y){case 3:Nt^=(255&i.charCodeAt(Ut+2))<<16;case 2:Nt^=(255&i.charCodeAt(Ut+1))<<8;case 1:j^=Nt=(65535&(Nt=(Nt=(65535&(Nt^=255&i.charCodeAt(Ut)))*we+(((Nt>>>16)*we&65535)<<16)&4294967295)<<15|Nt>>>17))*ut+(((Nt>>>16)*ut&65535)<<16)&4294967295}return j^=i.length,j=2246822507*(65535&(j^=j>>>16))+((2246822507*(j>>>16)&65535)<<16)&4294967295,j=3266489909*(65535&(j^=j>>>13))+((3266489909*(j>>>16)&65535)<<16)&4294967295,(j^=j>>>16)>>>0}}),kn=K(function(e){e.exports=function(i,l){for(var y,P=i.length,j=l^P,Q=0;P>=4;)y=1540483477*(65535&(y=255&i.charCodeAt(Q)|(255&i.charCodeAt(++Q))<<8|(255&i.charCodeAt(++Q))<<16|(255&i.charCodeAt(++Q))<<24))+((1540483477*(y>>>16)&65535)<<16),j=1540483477*(65535&j)+((1540483477*(j>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),P-=4,++Q;switch(P){case 3:j^=(255&i.charCodeAt(Q+2))<<16;case 2:j^=(255&i.charCodeAt(Q+1))<<8;case 1:j=1540483477*(65535&(j^=255&i.charCodeAt(Q)))+((1540483477*(j>>>16)&65535)<<16)}return j=1540483477*(65535&(j^=j>>>13))+((1540483477*(j>>>16)&65535)<<16),(j^=j>>>15)>>>0}}),an=hn,Rn=kn;an.murmur3=hn,an.murmur2=Rn;var $n=function(){this.ids=[],this.positions=[],this.indexed=!1};$n.prototype.add=function(e,i,l,y){this.ids.push(Di(e)),this.positions.push(i,l,y)},$n.prototype.getPositions=function(e){for(var i=Di(e),l=0,y=this.ids.length-1;l<y;){var P=l+y>>1;this.ids[P]>=i?y=P:l=P+1}for(var j=[];this.ids[l]===i;)j.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return j},$n.serialize=function(e,i){var l=new Float64Array(e.ids),y=new Uint32Array(e.positions);return function P(j,Q,we,ut){for(;we<ut;){for(var Nt=j[we+ut>>1],Ut=we-1,qt=ut+1;;){do Ut++;while(j[Ut]<Nt);do qt--;while(j[qt]>Nt);if(Ut>=qt)break;Ti(j,Ut,qt),Ti(Q,3*Ut,3*qt),Ti(Q,3*Ut+1,3*qt+1),Ti(Q,3*Ut+2,3*qt+2)}qt-we<ut-qt?(P(j,Q,we,qt),we=qt+1):(P(j,Q,qt+1,ut),ut=qt)}}(l,y,0,l.length-1),i&&i.push(l.buffer,y.buffer),{ids:l,positions:y}},$n.deserialize=function(e){var i=new $n;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i};var di=Math.pow(2,53)-1;function Di(e){var i=+e;return!isNaN(i)&&i<=di?i:an(String(e))}function Ti(e,i,l){var y=e[i];e[i]=e[l],e[l]=y}ao("FeaturePositionMap",$n);var Fi=function(e,i){this.gl=e.gl,this.location=i},ra=function(e){function i(l,y){e.call(this,l,y),this.current=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))},i}(Fi),Da=function(e){function i(l,y){e.call(this,l,y),this.current=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))},i}(Fi),Na=function(e){function i(l,y){e.call(this,l,y),this.current=[0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))},i}(Fi),po=function(e){function i(l,y){e.call(this,l,y),this.current=[0,0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))},i}(Fi),No=function(e){function i(l,y){e.call(this,l,y),this.current=[0,0,0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))},i}(Fi),is=function(e){function i(l,y){e.call(this,l,y),this.current=ma.transparent}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))},i}(Fi),rs=new Float32Array(16),Ls=function(e){function i(l,y){e.call(this,l,y),this.current=rs}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(var y=1;y<16;y++)if(l[y]!==this.current[y]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}},i}(Fi);function vo(e){return[Br(255*e.r,255*e.g),Br(255*e.b,255*e.a)]}var ds=function(e,i,l){this.value=e,this.uniformNames=i.map(function(y){return"u_"+y}),this.type=l};ds.prototype.setUniform=function(e,i,l){e.set(l.constantOr(this.value))},ds.prototype.getBinding=function(e,i,l){return this.type==="color"?new is(e,i):new Da(e,i)};var Ns=function(e,i){this.uniformNames=i.map(function(l){return"u_"+l}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ns.prototype.setConstantPatternPositions=function(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr},Ns.prototype.setUniform=function(e,i,l,y){var P=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&e.set(P)},Ns.prototype.getBinding=function(e,i,l){return l.substr(0,9)==="u_pattern"?new No(e,i):new Da(e,i)};var cs=function(e,i,l,y){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map(function(P){return{name:"a_"+P,type:"Float32",components:l==="color"?2:1,offset:0}}),this.paintVertexArray=new y};cs.prototype.populatePaintArray=function(e,i,l,y,P){var j=this.paintVertexArray.length,Q=this.expression.evaluate(new Ks(0),i,{},y,[],P);this.paintVertexArray.resize(e),this._setPaintValue(j,e,Q)},cs.prototype.updatePaintArray=function(e,i,l,y){var P=this.expression.evaluate({zoom:0},l,y);this._setPaintValue(e,i,P)},cs.prototype._setPaintValue=function(e,i,l){if(this.type==="color")for(var y=vo(l),P=e;P<i;P++)this.paintVertexArray.emplace(P,y[0],y[1]);else{for(var j=e;j<i;j++)this.paintVertexArray.emplace(j,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}},cs.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},cs.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Qo=function(e,i,l,y,P,j){this.expression=e,this.uniformNames=i.map(function(Q){return"u_"+Q+"_t"}),this.type=l,this.useIntegerZoom=y,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=i.map(function(Q){return{name:"a_"+Q,type:"Float32",components:l==="color"?4:2,offset:0}}),this.paintVertexArray=new j};Qo.prototype.populatePaintArray=function(e,i,l,y,P){var j=this.expression.evaluate(new Ks(this.zoom),i,{},y,[],P),Q=this.expression.evaluate(new Ks(this.zoom+1),i,{},y,[],P),we=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(we,e,j,Q)},Qo.prototype.updatePaintArray=function(e,i,l,y){var P=this.expression.evaluate({zoom:this.zoom},l,y),j=this.expression.evaluate({zoom:this.zoom+1},l,y);this._setPaintValue(e,i,P,j)},Qo.prototype._setPaintValue=function(e,i,l,y){if(this.type==="color")for(var P=vo(l),j=vo(y),Q=e;Q<i;Q++)this.paintVertexArray.emplace(Q,P[0],P[1],j[0],j[1]);else{for(var we=e;we<i;we++)this.paintVertexArray.emplace(we,l,y);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(y))}},Qo.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Qo.prototype.setUniform=function(e,i){var l=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,y=me(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(y)},Qo.prototype.getBinding=function(e,i,l){return new Da(e,i)};var $s=function(e,i,l,y,P,j){this.expression=e,this.type=i,this.useIntegerZoom=l,this.zoom=y,this.layerId=j,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};$s.prototype.populatePaintArray=function(e,i,l){var y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(y,e,i.patterns&&i.patterns[this.layerId],l)},$s.prototype.updatePaintArray=function(e,i,l,y,P){this._setPaintValues(e,i,l.patterns&&l.patterns[this.layerId],P)},$s.prototype._setPaintValues=function(e,i,l,y){if(y&&l){var P=y[l.min],j=y[l.mid],Q=y[l.max];if(P&&j&&Q)for(var we=e;we<i;we++)this.zoomInPaintVertexArray.emplace(we,j.tl[0],j.tl[1],j.br[0],j.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],j.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(we,j.tl[0],j.tl[1],j.br[0],j.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],j.pixelRatio,Q.pixelRatio)}},$s.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,yn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,yn.members,this.expression.isStateDependent))},$s.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Cs=function(e,i,l){this.binders={},this._buffers=[];var y=[];for(var P in e.paint._values)if(l(P)){var j=e.paint.get(P);if(j instanceof Ql&&Lc(j.property.specification)){var Q=El(P,e.type),we=j.value,ut=j.property.specification.type,Nt=j.property.useIntegerZoom,Ut=j.property.specification["property-type"],qt=Ut==="cross-faded"||Ut==="cross-faded-data-driven";if(we.kind==="constant")this.binders[P]=qt?new Ns(we.value,Q):new ds(we.value,Q,ut),y.push("/u_"+P);else if(we.kind==="source"||qt){var lr=nl(P,ut,"source");this.binders[P]=qt?new $s(we,ut,Nt,i,lr,e.id):new cs(we,Q,ut,lr),y.push("/a_"+P)}else{var xr=nl(P,ut,"composite");this.binders[P]=new Qo(we,Q,ut,Nt,i,xr),y.push("/z_"+P)}}}this.cacheKey=y.sort().join("")};Cs.prototype.getMaxValue=function(e){var i=this.binders[e];return i instanceof cs||i instanceof Qo?i.maxValue:0},Cs.prototype.populatePaintArrays=function(e,i,l,y,P){for(var j in this.binders){var Q=this.binders[j];(Q instanceof cs||Q instanceof Qo||Q instanceof $s)&&Q.populatePaintArray(e,i,l,y,P)}},Cs.prototype.setConstantPatternPositions=function(e,i){for(var l in this.binders){var y=this.binders[l];y instanceof Ns&&y.setConstantPatternPositions(e,i)}},Cs.prototype.updatePaintArrays=function(e,i,l,y,P){var j=!1;for(var Q in e)for(var we=0,ut=i.getPositions(Q);we<ut.length;we+=1){var Nt=ut[we],Ut=l.feature(Nt.index);for(var qt in this.binders){var lr=this.binders[qt];if((lr instanceof cs||lr instanceof Qo||lr instanceof $s)&&lr.expression.isStateDependent===!0){var xr=y.paint.get(qt);lr.expression=xr.value,lr.updatePaintArray(Nt.start,Nt.end,Ut,e[Q],P),j=!0}}}return j},Cs.prototype.defines=function(){var e=[];for(var i in this.binders){var l=this.binders[i];(l instanceof ds||l instanceof Ns)&&e.push.apply(e,l.uniformNames.map(function(y){return"#define HAS_UNIFORM_"+y}))}return e},Cs.prototype.getBinderAttributes=function(){var e=[];for(var i in this.binders){var l=this.binders[i];if(l instanceof cs||l instanceof Qo)for(var y=0;y<l.paintVertexAttributes.length;y++)e.push(l.paintVertexAttributes[y].name);else if(l instanceof $s)for(var P=0;P<yn.members.length;P++)e.push(yn.members[P].name)}return e},Cs.prototype.getBinderUniforms=function(){var e=[];for(var i in this.binders){var l=this.binders[i];if(l instanceof ds||l instanceof Ns||l instanceof Qo)for(var y=0,P=l.uniformNames;y<P.length;y+=1)e.push(P[y])}return e},Cs.prototype.getPaintVertexBuffers=function(){return this._buffers},Cs.prototype.getUniforms=function(e,i){var l=[];for(var y in this.binders){var P=this.binders[y];if(P instanceof ds||P instanceof Ns||P instanceof Qo)for(var j=0,Q=P.uniformNames;j<Q.length;j+=1){var we=Q[j];if(i[we]){var ut=P.getBinding(e,i[we],we);l.push({name:we,property:y,binding:ut})}}}return l},Cs.prototype.setUniforms=function(e,i,l,y){for(var P=0,j=i;P<j.length;P+=1){var Q=j[P],we=Q.name,ut=Q.property;this.binders[ut].setUniform(Q.binding,y,l.get(ut),we)}},Cs.prototype.updatePaintBuffers=function(e){for(var i in this._buffers=[],this.binders){var l=this.binders[i];if(e&&l instanceof $s){var y=e.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(l instanceof cs||l instanceof Qo)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}},Cs.prototype.upload=function(e){for(var i in this.binders){var l=this.binders[i];(l instanceof cs||l instanceof Qo||l instanceof $s)&&l.upload(e)}this.updatePaintBuffers()},Cs.prototype.destroy=function(){for(var e in this.binders){var i=this.binders[e];(i instanceof cs||i instanceof Qo||i instanceof $s)&&i.destroy()}};var _s=function(e,i,l){l===void 0&&(l=function(){return!0}),this.programConfigurations={};for(var y=0,P=e;y<P.length;y+=1){var j=P[y];this.programConfigurations[j.id]=new Cs(j,i,l)}this.needsUpload=!1,this._featureMap=new $n,this._bufferOffset=0};function El(e,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(i+"-","").replace(/-/g,"_")]}function nl(e,i,l){var y={color:{source:Dr,composite:qc},number:{source:Xf,composite:Dr}},P=function(j){return{"line-pattern":{source:Dl,composite:Dl},"fill-pattern":{source:Dl,composite:Dl},"fill-extrusion-pattern":{source:Dl,composite:Dl}}[j]}(e);return P&&P[l]||y[i][l]}_s.prototype.populatePaintArrays=function(e,i,l,y,P,j){for(var Q in this.programConfigurations)this.programConfigurations[Q].populatePaintArrays(e,i,y,P,j);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},_s.prototype.updatePaintArrays=function(e,i,l,y){for(var P=0,j=l;P<j.length;P+=1){var Q=j[P];this.needsUpload=this.programConfigurations[Q.id].updatePaintArrays(e,this._featureMap,i,Q,y)||this.needsUpload}},_s.prototype.get=function(e){return this.programConfigurations[e]},_s.prototype.upload=function(e){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}},_s.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ao("ConstantBinder",ds),ao("CrossFadedConstantBinder",Ns),ao("SourceExpressionBinder",cs),ao("CrossFadedCompositeBinder",$s),ao("CompositeExpressionBinder",Qo),ao("ProgramConfiguration",Cs,{omit:["_buffers"]}),ao("ProgramConfigurationSet",_s);var qu=Math.pow(2,14)-1,Ac=-qu-1;function Qu(e){for(var i=8192/e.extent,l=e.loadGeometry(),y=0;y<l.length;y++)for(var P=l[y],j=0;j<P.length;j++){var Q=P[j],we=Math.round(Q.x*i),ut=Math.round(Q.y*i);Q.x=me(we,Ac,qu),Q.y=me(ut,Ac,qu),(we<Q.x||we>Q.x+1||ut<Q.y||ut>Q.y+1)&&De("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return l}function Ju(e,i){return{type:e.type,id:e.id,properties:e.properties,geometry:i?Qu(e):[]}}function Tc(e,i,l,y,P){e.emplaceBack(2*i+(y+1)/2,2*l+(P+1)/2)}var ec=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ph,this.indexArray=new rc,this.segments=new Or,this.programConfigurations=new _s(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Pf(e,i){for(var l=0;l<e.length;l++)if(pf(i,e[l]))return!0;for(var y=0;y<i.length;y++)if(pf(e,i[y]))return!0;return!!Qh(e,i)}function Ef(e,i,l){return!!pf(e,i)||!!Sh(i,e,l)}function $l(e,i){if(e.length===1)return wh(i,e[0]);for(var l=0;l<i.length;l++)for(var y=i[l],P=0;P<y.length;P++)if(pf(e,y[P]))return!0;for(var j=0;j<e.length;j++)if(wh(i,e[j]))return!0;for(var Q=0;Q<i.length;Q++)if(Qh(e,i[Q]))return!0;return!1}function Uc(e,i,l){if(e.length>1){if(Qh(e,i))return!0;for(var y=0;y<i.length;y++)if(Sh(i[y],e,l))return!0}for(var P=0;P<e.length;P++)if(Sh(e[P],i,l))return!0;return!1}function Qh(e,i){if(e.length===0||i.length===0)return!1;for(var l=0;l<e.length-1;l++)for(var y=e[l],P=e[l+1],j=0;j<i.length-1;j++)if(Jh(y,P,i[j],i[j+1]))return!0;return!1}function Jh(e,i,l,y){return le(e,l,y)!==le(i,l,y)&&le(e,i,l)!==le(e,i,y)}function Sh(e,i,l){var y=l*l;if(i.length===1)return e.distSqr(i[0])<y;for(var P=1;P<i.length;P++)if(Of(e,i[P-1],i[P])<y)return!0;return!1}function Of(e,i,l){var y=i.distSqr(l);if(y===0)return e.distSqr(i);var P=((e.x-i.x)*(l.x-i.x)+(e.y-i.y)*(l.y-i.y))/y;return e.distSqr(P<0?i:P>1?l:l.sub(i)._mult(P)._add(i))}function wh(e,i){for(var l,y,P,j=!1,Q=0;Q<e.length;Q++)for(var we=0,ut=(l=e[Q]).length-1;we<l.length;ut=we++)(y=l[we]).y>i.y!=(P=l[ut]).y>i.y&&i.x<(P.x-y.x)*(i.y-y.y)/(P.y-y.y)+y.x&&(j=!j);return j}function pf(e,i){for(var l=!1,y=0,P=e.length-1;y<e.length;P=y++){var j=e[y],Q=e[P];j.y>i.y!=Q.y>i.y&&i.x<(Q.x-j.x)*(i.y-j.y)/(Q.y-j.y)+j.x&&(l=!l)}return l}function oh(e,i,l){var y=l[0],P=l[2];if(e.x<y.x&&i.x<y.x||e.x>P.x&&i.x>P.x||e.y<y.y&&i.y<y.y||e.y>P.y&&i.y>P.y)return!1;var j=le(e,i,l[0]);return j!==le(e,i,l[1])||j!==le(e,i,l[2])||j!==le(e,i,l[3])}function Qc(e,i,l){var y=i.paint.get(e).value;return y.kind==="constant"?y.value:l.programConfigurations.get(i.id).getMaxValue(e)}function nc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ic(e,i,l,y,P){if(!i[0]&&!i[1])return e;var j=B.convert(i)._mult(P);l==="viewport"&&j._rotate(-y);for(var Q=[],we=0;we<e.length;we++)Q.push(e[we].sub(j));return Q}ec.prototype.populate=function(e,i,l){var y=this.layers[0],P=[],j=null;y.type==="circle"&&(j=y.layout.get("circle-sort-key"));for(var Q=0,we=e;Q<we.length;Q+=1){var ut=we[Q],Nt=ut.feature,Ut=ut.id,qt=ut.index,lr=ut.sourceLayerIndex,xr=this.layers[0]._featureFilter.needGeometry,Kr=Ju(Nt,xr);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),Kr,l)){var qr=j?j.evaluate(Kr,{},l):void 0,dn={id:Ut,properties:Nt.properties,type:Nt.type,sourceLayerIndex:lr,index:qt,geometry:xr?Kr.geometry:Qu(Nt),patterns:{},sortKey:qr};P.push(dn)}}j&&P.sort(function(Wi,ja){return Wi.sortKey-ja.sortKey});for(var cn=0,Un=P;cn<Un.length;cn+=1){var ri=Un[cn],gi=ri.geometry,yi=ri.index,Ii=ri.sourceLayerIndex,Ji=e[yi].feature;this.addFeature(ri,gi,yi,l),i.featureIndex.insert(Ji,gi,yi,Ii,this.index)}},ec.prototype.update=function(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,l)},ec.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ec.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ec.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Mr),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ec.prototype.addFeature=function(e,i,l,y){for(var P=0,j=i;P<j.length;P+=1)for(var Q=0,we=j[P];Q<we.length;Q+=1){var ut=we[Q],Nt=ut.x,Ut=ut.y;if(!(Nt<0||Nt>=8192||Ut<0||Ut>=8192)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),lr=qt.vertexLength;Tc(this.layoutVertexArray,Nt,Ut,-1,-1),Tc(this.layoutVertexArray,Nt,Ut,1,-1),Tc(this.layoutVertexArray,Nt,Ut,1,1),Tc(this.layoutVertexArray,Nt,Ut,-1,1),this.indexArray.emplaceBack(lr,lr+1,lr+2),this.indexArray.emplaceBack(lr,lr+3,lr+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{},y)},ao("CircleBucket",ec,{omit:["layers"]});var Ch=new mu({"circle-sort-key":new Do(fr.layout_circle["circle-sort-key"])}),Fh={paint:new mu({"circle-radius":new Do(fr.paint_circle["circle-radius"]),"circle-color":new Do(fr.paint_circle["circle-color"]),"circle-blur":new Do(fr.paint_circle["circle-blur"]),"circle-opacity":new Do(fr.paint_circle["circle-opacity"]),"circle-translate":new oo(fr.paint_circle["circle-translate"]),"circle-translate-anchor":new oo(fr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oo(fr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oo(fr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Do(fr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Do(fr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Do(fr.paint_circle["circle-stroke-opacity"])}),layout:Ch},ku=typeof Float32Array!="undefined"?Float32Array:Array;function yu(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jc(e,i,l){var y=i[0],P=i[1],j=i[2],Q=i[3],we=i[4],ut=i[5],Nt=i[6],Ut=i[7],qt=i[8],lr=i[9],xr=i[10],Kr=i[11],qr=i[12],dn=i[13],cn=i[14],Un=i[15],ri=l[0],gi=l[1],yi=l[2],Ii=l[3];return e[0]=ri*y+gi*we+yi*qt+Ii*qr,e[1]=ri*P+gi*ut+yi*lr+Ii*dn,e[2]=ri*j+gi*Nt+yi*xr+Ii*cn,e[3]=ri*Q+gi*Ut+yi*Kr+Ii*Un,e[4]=(ri=l[4])*y+(gi=l[5])*we+(yi=l[6])*qt+(Ii=l[7])*qr,e[5]=ri*P+gi*ut+yi*lr+Ii*dn,e[6]=ri*j+gi*Nt+yi*xr+Ii*cn,e[7]=ri*Q+gi*Ut+yi*Kr+Ii*Un,e[8]=(ri=l[8])*y+(gi=l[9])*we+(yi=l[10])*qt+(Ii=l[11])*qr,e[9]=ri*P+gi*ut+yi*lr+Ii*dn,e[10]=ri*j+gi*Nt+yi*xr+Ii*cn,e[11]=ri*Q+gi*Ut+yi*Kr+Ii*Un,e[12]=(ri=l[12])*y+(gi=l[13])*we+(yi=l[14])*qt+(Ii=l[15])*qr,e[13]=ri*P+gi*ut+yi*lr+Ii*dn,e[14]=ri*j+gi*Nt+yi*xr+Ii*cn,e[15]=ri*Q+gi*Ut+yi*Kr+Ii*Un,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,i=0,l=arguments.length;l--;)i+=e[l]*e[l];return Math.sqrt(i)});var sh,vh=Jc;function Nf(e,i,l){var y=i[0],P=i[1],j=i[2],Q=i[3];return e[0]=l[0]*y+l[4]*P+l[8]*j+l[12]*Q,e[1]=l[1]*y+l[5]*P+l[9]*j+l[13]*Q,e[2]=l[2]*y+l[6]*P+l[10]*j+l[14]*Q,e[3]=l[3]*y+l[7]*P+l[11]*j+l[15]*Q,e}sh=new ku(3),ku!=Float32Array&&(sh[0]=0,sh[1]=0,sh[2]=0),function(){var e=new ku(4);ku!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var mh=(function(){var e=new ku(2);ku!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function i(l){e.call(this,l,Fh)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(l){return new ec(l)},i.prototype.queryRadius=function(l){var y=l;return Qc("circle-radius",this,y)+Qc("circle-stroke-width",this,y)+nc(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(l,y,P,j,Q,we,ut,Nt){for(var Ut=ic(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),we.angle,ut),qt=this.paint.get("circle-radius").evaluate(y,P)+this.paint.get("circle-stroke-width").evaluate(y,P),lr=this.paint.get("circle-pitch-alignment")==="map",xr=lr?Ut:function(Ji,Wi){return Ji.map(function(ja){return If(ja,Wi)})}(Ut,Nt),Kr=lr?qt*ut:qt,qr=0,dn=j;qr<dn.length;qr+=1)for(var cn=0,Un=dn[qr];cn<Un.length;cn+=1){var ri=Un[cn],gi=lr?ri:If(ri,Nt),yi=Kr,Ii=Nf([],[ri.x,ri.y,0,1],Nt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?yi*=Ii[3]/we.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(yi*=we.cameraToCenterDistance/Ii[3]),Ef(xr,gi,yi))return!0}return!1},i}(Ku));function If(e,i){var l=Nf([],[e.x,e.y,0,1],i);return new B(l[0]/l[3],l[1]/l[3])}var Rf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(ec);function vf(e,i,l,y){var P=i.width,j=i.height;if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==P*j*l)throw new RangeError("mismatched image size")}else y=new Uint8Array(P*j*l);return e.width=P,e.height=j,e.data=y,e}function ue(e,i,l){var y=i.width,P=i.height;if(y!==e.width||P!==e.height){var j=vf({},{width:y,height:P},l);Rr(e,j,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,y),height:Math.min(e.height,P)},l),e.width=y,e.height=P,e.data=j.data}}function Rr(e,i,l,y,P,j){if(P.width===0||P.height===0)return i;if(P.width>e.width||P.height>e.height||l.x>e.width-P.width||l.y>e.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>i.width||P.height>i.height||y.x>i.width-P.width||y.y>i.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var Q=e.data,we=i.data,ut=0;ut<P.height;ut++)for(var Nt=((l.y+ut)*e.width+l.x)*j,Ut=((y.y+ut)*i.width+y.x)*j,qt=0;qt<P.width*j;qt++)we[Ut+qt]=Q[Nt+qt];return i}ao("HeatmapBucket",Rf,{omit:["layers"]});var Mt=function(e,i){vf(this,e,1,i)};Mt.prototype.resize=function(e){ue(this,e,1)},Mt.prototype.clone=function(){return new Mt({width:this.width,height:this.height},new Uint8Array(this.data))},Mt.copy=function(e,i,l,y,P){Rr(e,i,l,y,P,1)};var St=function(e,i){vf(this,e,4,i)};St.prototype.resize=function(e){ue(this,e,4)},St.prototype.replace=function(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},St.prototype.clone=function(){return new St({width:this.width,height:this.height},new Uint8Array(this.data))},St.copy=function(e,i,l,y,P){Rr(e,i,l,y,P,4)},ao("AlphaImage",Mt),ao("RGBAImage",St);var Vt={paint:new mu({"heatmap-radius":new Do(fr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Do(fr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oo(fr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xl(fr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oo(fr.paint_heatmap["heatmap-opacity"])})};function ar(e){var i={},l=e.resolution||256,y=e.clips?e.clips.length:1,P=e.image||new St({width:l,height:y}),j=function(Kr,qr,dn){i[e.evaluationKey]=dn;var cn=e.expression.evaluate(i);P.data[Kr+qr+0]=Math.floor(255*cn.r/cn.a),P.data[Kr+qr+1]=Math.floor(255*cn.g/cn.a),P.data[Kr+qr+2]=Math.floor(255*cn.b/cn.a),P.data[Kr+qr+3]=Math.floor(255*cn.a)};if(e.clips)for(var Q=0,we=0;Q<y;++Q,we+=4*l)for(var ut=0,Nt=0;ut<l;ut++,Nt+=4){var Ut=ut/(l-1),qt=e.clips[Q];j(we,Nt,qt.start*(1-Ut)+qt.end*Ut)}else for(var lr=0,xr=0;lr<l;lr++,xr+=4)j(0,xr,lr/(l-1));return P}var Xr=function(e){function i(l){e.call(this,l,Vt),this._updateColorRamp()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(l){return new Rf(l)},i.prototype._handleSpecialPaintPropertyUpdate=function(l){l==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=ar({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(Ku),vn={paint:new mu({"hillshade-illumination-direction":new oo(fr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oo(fr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oo(fr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oo(fr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oo(fr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oo(fr.paint_hillshade["hillshade-accent-color"])})},Sn=function(e){function i(l){e.call(this,l,vn)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(Ku),Fn=bl([{name:"a_pos",components:2,type:"Int16"}],4).members,Ci=ba,Hi=ba;function ba(e,i,l){l=l||2;var y,P,j,Q,we,ut,Nt,Ut=i&&i.length,qt=Ut?i[0]*l:e.length,lr=mo(e,0,qt,l,!0),xr=[];if(!lr||lr.next===lr.prev)return xr;if(Ut&&(lr=function(qr,dn,cn,Un){var ri,gi,yi,Ii=[];for(ri=0,gi=dn.length;ri<gi;ri++)(yi=mo(qr,dn[ri]*Un,ri<gi-1?dn[ri+1]*Un:qr.length,Un,!1))===yi.next&&(yi.steiner=!0),Ii.push(Du(yi));for(Ii.sort(Mc),ri=0;ri<Ii.length;ri++)tu(Ii[ri],cn),cn=Qa(cn,cn.next);return cn}(e,i,lr,l)),e.length>80*l){y=j=e[0],P=Q=e[1];for(var Kr=l;Kr<qt;Kr+=l)(we=e[Kr])<y&&(y=we),(ut=e[Kr+1])<P&&(P=ut),we>j&&(j=we),ut>Q&&(Q=ut);Nt=(Nt=Math.max(j-y,Q-P))!==0?1/Nt:0}return ks(lr,xr,l,y,P,Nt),xr}function mo(e,i,l,y,P){var j,Q;if(P===dc(e,i,l,y)>0)for(j=i;j<l;j+=y)Q=gh(j,e[j],e[j+1],Q);else for(j=l-y;j>=i;j-=y)Q=gh(j,e[j],e[j+1],Q);return Q&&pl(Q,Q.next)&&(yh(Q),Q=Q.next),Q}function Qa(e,i){if(!e)return e;i||(i=e);var l,y=e;do if(l=!1,y.steiner||!pl(y,y.next)&&ru(y.prev,y,y.next)!==0)y=y.next;else{if(yh(y),(y=i=y.prev)===y.next)break;l=!0}while(l||y!==i);return i}function ks(e,i,l,y,P,j,Q){if(e){!Q&&j&&function(Ut,qt,lr,xr){var Kr=Ut;do Kr.z===null&&(Kr.z=Ys(Kr.x,Kr.y,qt,lr,xr)),Kr.prevZ=Kr.prev,Kr.nextZ=Kr.next,Kr=Kr.next;while(Kr!==Ut);Kr.prevZ.nextZ=null,Kr.prevZ=null,function(qr){var dn,cn,Un,ri,gi,yi,Ii,Ji,Wi=1;do{for(cn=qr,qr=null,gi=null,yi=0;cn;){for(yi++,Un=cn,Ii=0,dn=0;dn<Wi&&(Ii++,Un=Un.nextZ);dn++);for(Ji=Wi;Ii>0||Ji>0&&Un;)Ii!==0&&(Ji===0||!Un||cn.z<=Un.z)?(ri=cn,cn=cn.nextZ,Ii--):(ri=Un,Un=Un.nextZ,Ji--),gi?gi.nextZ=ri:qr=ri,ri.prevZ=gi,gi=ri;cn=Un}gi.nextZ=null,Wi*=2}while(yi>1)}(Kr)}(e,y,P,j);for(var we,ut,Nt=e;e.prev!==e.next;)if(we=e.prev,ut=e.next,j?lu(e,y,P,j):Ts(e))i.push(we.i/l),i.push(e.i/l),i.push(ut.i/l),yh(e),e=ut.next,Nt=ut.next;else if((e=ut)===Nt){Q?Q===1?ks(e=Iu(Qa(e),i,l),i,l,y,P,j,2):Q===2&&_u(e,i,l,y,P,j):ks(Qa(e),i,l,y,P,j,1);break}}}function Ts(e){var i=e.prev,l=e,y=e.next;if(ru(i,l,y)>=0)return!1;for(var P=e.next.next;P!==e.prev;){if(Bu(i.x,i.y,l.x,l.y,y.x,y.y,P.x,P.y)&&ru(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function lu(e,i,l,y){var P=e.prev,j=e,Q=e.next;if(ru(P,j,Q)>=0)return!1;for(var we=P.x>j.x?P.x>Q.x?P.x:Q.x:j.x>Q.x?j.x:Q.x,ut=P.y>j.y?P.y>Q.y?P.y:Q.y:j.y>Q.y?j.y:Q.y,Nt=Ys(P.x<j.x?P.x<Q.x?P.x:Q.x:j.x<Q.x?j.x:Q.x,P.y<j.y?P.y<Q.y?P.y:Q.y:j.y<Q.y?j.y:Q.y,i,l,y),Ut=Ys(we,ut,i,l,y),qt=e.prevZ,lr=e.nextZ;qt&&qt.z>=Nt&&lr&&lr.z<=Ut;){if(qt!==e.prev&&qt!==e.next&&Bu(P.x,P.y,j.x,j.y,Q.x,Q.y,qt.x,qt.y)&&ru(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,lr!==e.prev&&lr!==e.next&&Bu(P.x,P.y,j.x,j.y,Q.x,Q.y,lr.x,lr.y)&&ru(lr.prev,lr,lr.next)>=0))return!1;lr=lr.nextZ}for(;qt&&qt.z>=Nt;){if(qt!==e.prev&&qt!==e.next&&Bu(P.x,P.y,j.x,j.y,Q.x,Q.y,qt.x,qt.y)&&ru(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;lr&&lr.z<=Ut;){if(lr!==e.prev&&lr!==e.next&&Bu(P.x,P.y,j.x,j.y,Q.x,Q.y,lr.x,lr.y)&&ru(lr.prev,lr,lr.next)>=0)return!1;lr=lr.nextZ}return!0}function Iu(e,i,l){var y=e;do{var P=y.prev,j=y.next.next;!pl(P,j)&&ef(P,y,y.next,j)&&uh(P,j)&&uh(j,P)&&(i.push(P.i/l),i.push(y.i/l),i.push(j.i/l),yh(y),yh(y.next),y=e=j),y=y.next}while(y!==e);return Qa(y)}function _u(e,i,l,y,P,j){var Q=e;do{for(var we=Q.next.next;we!==Q.prev;){if(Q.i!==we.i&&Gl(Q,we)){var ut=Kf(Q,we);return Q=Qa(Q,Q.next),ut=Qa(ut,ut.next),ks(Q,i,l,y,P,j),void ks(ut,i,l,y,P,j)}we=we.next}Q=Q.next}while(Q!==e)}function Mc(e,i){return e.x-i.x}function tu(e,i){if(i=function(y,P){var j,Q=P,we=y.x,ut=y.y,Nt=-1/0;do{if(ut<=Q.y&&ut>=Q.next.y&&Q.next.y!==Q.y){var Ut=Q.x+(ut-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(Ut<=we&&Ut>Nt){if(Nt=Ut,Ut===we){if(ut===Q.y)return Q;if(ut===Q.next.y)return Q.next}j=Q.x<Q.next.x?Q:Q.next}}Q=Q.next}while(Q!==P);if(!j)return null;if(we===Nt)return j;var qt,lr=j,xr=j.x,Kr=j.y,qr=1/0;Q=j;do we>=Q.x&&Q.x>=xr&&we!==Q.x&&Bu(ut<Kr?we:Nt,ut,xr,Kr,ut<Kr?Nt:we,ut,Q.x,Q.y)&&(qt=Math.abs(ut-Q.y)/(we-Q.x),uh(Q,y)&&(qt<qr||qt===qr&&(Q.x>j.x||Q.x===j.x&&Fl(j,Q)))&&(j=Q,qr=qt)),Q=Q.next;while(Q!==lr);return j}(e,i)){var l=Kf(i,e);Qa(i,i.next),Qa(l,l.next)}}function Fl(e,i){return ru(e.prev,e,i.prev)<0&&ru(i.next,e,e.next)<0}function Ys(e,i,l,y,P){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-l)*P)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-y)*P)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Du(e){var i=e,l=e;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==e);return l}function Bu(e,i,l,y,P,j,Q,we){return(P-Q)*(i-we)-(e-Q)*(j-we)>=0&&(e-Q)*(y-we)-(l-Q)*(i-we)>=0&&(l-Q)*(j-we)-(P-Q)*(y-we)>=0}function Gl(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!function(l,y){var P=l;do{if(P.i!==l.i&&P.next.i!==l.i&&P.i!==y.i&&P.next.i!==y.i&&ef(P,P.next,l,y))return!0;P=P.next}while(P!==l);return!1}(e,i)&&(uh(e,i)&&uh(i,e)&&function(l,y){var P=l,j=!1,Q=(l.x+y.x)/2,we=(l.y+y.y)/2;do P.y>we!=P.next.y>we&&P.next.y!==P.y&&Q<(P.next.x-P.x)*(we-P.y)/(P.next.y-P.y)+P.x&&(j=!j),P=P.next;while(P!==l);return j}(e,i)&&(ru(e.prev,e,i.prev)||ru(e,i.prev,i))||pl(e,i)&&ru(e.prev,e,e.next)>0&&ru(i.prev,i,i.next)>0)}function ru(e,i,l){return(i.y-e.y)*(l.x-i.x)-(i.x-e.x)*(l.y-i.y)}function pl(e,i){return e.x===i.x&&e.y===i.y}function ef(e,i,l,y){var P=hc(ru(e,i,l)),j=hc(ru(e,i,y)),Q=hc(ru(l,y,e)),we=hc(ru(l,y,i));return P!==j&&Q!==we||!(P!==0||!Bh(e,l,i))||!(j!==0||!Bh(e,y,i))||!(Q!==0||!Bh(l,e,y))||!(we!==0||!Bh(l,i,y))}function Bh(e,i,l){return i.x<=Math.max(e.x,l.x)&&i.x>=Math.min(e.x,l.x)&&i.y<=Math.max(e.y,l.y)&&i.y>=Math.min(e.y,l.y)}function hc(e){return e>0?1:e<0?-1:0}function uh(e,i){return ru(e.prev,e,e.next)<0?ru(e,i,e.next)>=0&&ru(e,e.prev,i)>=0:ru(e,i,e.prev)<0||ru(e,e.next,i)<0}function Kf(e,i){var l=new Yf(e.i,e.x,e.y),y=new Yf(i.i,i.x,i.y),P=e.next,j=i.prev;return e.next=i,i.prev=e,l.next=P,P.prev=l,y.next=l,l.prev=y,j.next=y,y.prev=j,y}function gh(e,i,l,y){var P=new Yf(e,i,l);return y?(P.next=y.next,P.prev=y,y.next.prev=P,y.next=P):(P.prev=P,P.next=P),P}function yh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Yf(e,i,l){this.i=e,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dc(e,i,l,y){for(var P=0,j=i,Q=l-y;j<l;j+=y)P+=(e[Q]-e[j])*(e[j+1]+e[Q+1]),Q=j;return P}function oe(e,i,l,y,P){(function j(Q,we,ut,Nt,Ut){for(;Nt>ut;){if(Nt-ut>600){var qt=Nt-ut+1,lr=we-ut+1,xr=Math.log(qt),Kr=.5*Math.exp(2*xr/3),qr=.5*Math.sqrt(xr*Kr*(qt-Kr)/qt)*(lr-qt/2<0?-1:1);j(Q,we,Math.max(ut,Math.floor(we-lr*Kr/qt+qr)),Math.min(Nt,Math.floor(we+(qt-lr)*Kr/qt+qr)),Ut)}var dn=Q[we],cn=ut,Un=Nt;for(Fe(Q,ut,we),Ut(Q[Nt],dn)>0&&Fe(Q,ut,Nt);cn<Un;){for(Fe(Q,cn,Un),cn++,Un--;Ut(Q[cn],dn)<0;)cn++;for(;Ut(Q[Un],dn)>0;)Un--}Ut(Q[ut],dn)===0?Fe(Q,ut,Un):Fe(Q,++Un,Nt),Un<=we&&(ut=Un+1),we<=Un&&(Nt=Un-1)}})(e,i,l||0,y||e.length-1,P||Ze)}function Fe(e,i,l){var y=e[i];e[i]=e[l],e[l]=y}function Ze(e,i){return e<i?-1:e>i?1:0}function rt(e,i){var l=e.length;if(l<=1)return[e];for(var y,P,j=[],Q=0;Q<l;Q++){var we=ge(e[Q]);we!==0&&(e[Q].area=Math.abs(we),P===void 0&&(P=we<0),P===we<0?(y&&j.push(y),y=[e[Q]]):y.push(e[Q]))}if(y&&j.push(y),i>1)for(var ut=0;ut<j.length;ut++)j[ut].length<=i||(oe(j[ut],i,1,j[ut].length-1,xt),j[ut]=j[ut].slice(0,i));return j}function xt(e,i){return i.area-e.area}function Dt(e,i,l){for(var y=l.patternDependencies,P=!1,j=0,Q=i;j<Q.length;j+=1){var we=Q[j].paint.get(e+"-pattern");we.isConstant()||(P=!0);var ut=we.constantOr(null);ut&&(P=!0,y[ut.to]=!0,y[ut.from]=!0)}return P}function $r(e,i,l,y,P){for(var j=P.patternDependencies,Q=0,we=i;Q<we.length;Q+=1){var ut=we[Q],Nt=ut.paint.get(e+"-pattern").value;if(Nt.kind!=="constant"){var Ut=Nt.evaluate({zoom:y-1},l,{},P.availableImages),qt=Nt.evaluate({zoom:y},l,{},P.availableImages),lr=Nt.evaluate({zoom:y+1},l,{},P.availableImages);qt=qt&&qt.name?qt.name:qt,lr=lr&&lr.name?lr.name:lr,j[Ut=Ut&&Ut.name?Ut.name:Ut]=!0,j[qt]=!0,j[lr]=!0,l.patterns[ut.id]={min:Ut,mid:qt,max:lr}}}return l}ba.deviation=function(e,i,l,y){var P=i&&i.length,j=Math.abs(dc(e,0,P?i[0]*l:e.length,l));if(P)for(var Q=0,we=i.length;Q<we;Q++)j-=Math.abs(dc(e,i[Q]*l,Q<we-1?i[Q+1]*l:e.length,l));var ut=0;for(Q=0;Q<y.length;Q+=3){var Nt=y[Q]*l,Ut=y[Q+1]*l,qt=y[Q+2]*l;ut+=Math.abs((e[Nt]-e[qt])*(e[Ut+1]-e[Nt+1])-(e[Nt]-e[Ut])*(e[qt+1]-e[Nt+1]))}return j===0&&ut===0?0:Math.abs((ut-j)/j)},ba.flatten=function(e){for(var i=e[0][0].length,l={vertices:[],holes:[],dimensions:i},y=0,P=0;P<e.length;P++){for(var j=0;j<e[P].length;j++)for(var Q=0;Q<i;Q++)l.vertices.push(e[P][j][Q]);P>0&&l.holes.push(y+=e[P-1].length)}return l},Ci.default=Hi;var En=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ph,this.indexArray=new rc,this.indexArray2=new Zc,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Or,this.segments2=new Or,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};En.prototype.populate=function(e,i,l){this.hasPattern=Dt("fill",this.layers,i);for(var y=this.layers[0].layout.get("fill-sort-key"),P=[],j=0,Q=e;j<Q.length;j+=1){var we=Q[j],ut=we.feature,Nt=we.id,Ut=we.index,qt=we.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,xr=Ju(ut,lr);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),xr,l)){var Kr=y?y.evaluate(xr,{},l,i.availableImages):void 0,qr={id:Nt,properties:ut.properties,type:ut.type,sourceLayerIndex:qt,index:Ut,geometry:lr?xr.geometry:Qu(ut),patterns:{},sortKey:Kr};P.push(qr)}}y&&P.sort(function(Ji,Wi){return Ji.sortKey-Wi.sortKey});for(var dn=0,cn=P;dn<cn.length;dn+=1){var Un=cn[dn],ri=Un.geometry,gi=Un.index,yi=Un.sourceLayerIndex;if(this.hasPattern){var Ii=$r("fill",this.layers,Un,this.zoom,i);this.patternFeatures.push(Ii)}else this.addFeature(Un,ri,gi,l,{});i.featureIndex.insert(e[gi].feature,ri,gi,yi,this.index)}},En.prototype.update=function(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,l)},En.prototype.addFeatures=function(e,i,l){for(var y=0,P=this.patternFeatures;y<P.length;y+=1){var j=P[y];this.addFeature(j,j.geometry,j.index,i,l)}},En.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},En.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},En.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fn),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},En.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},En.prototype.addFeature=function(e,i,l,y,P){for(var j=0,Q=rt(i,500);j<Q.length;j+=1){for(var we=Q[j],ut=0,Nt=0,Ut=we;Nt<Ut.length;Nt+=1)ut+=Ut[Nt].length;for(var qt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray),lr=qt.vertexLength,xr=[],Kr=[],qr=0,dn=we;qr<dn.length;qr+=1){var cn=dn[qr];if(cn.length!==0){cn!==we[0]&&Kr.push(xr.length/2);var Un=this.segments2.prepareSegment(cn.length,this.layoutVertexArray,this.indexArray2),ri=Un.vertexLength;this.layoutVertexArray.emplaceBack(cn[0].x,cn[0].y),this.indexArray2.emplaceBack(ri+cn.length-1,ri),xr.push(cn[0].x),xr.push(cn[0].y);for(var gi=1;gi<cn.length;gi++)this.layoutVertexArray.emplaceBack(cn[gi].x,cn[gi].y),this.indexArray2.emplaceBack(ri+gi-1,ri+gi),xr.push(cn[gi].x),xr.push(cn[gi].y);Un.vertexLength+=cn.length,Un.primitiveLength+=cn.length}}for(var yi=Ci(xr,Kr),Ii=0;Ii<yi.length;Ii+=3)this.indexArray.emplaceBack(lr+yi[Ii],lr+yi[Ii+1],lr+yi[Ii+2]);qt.vertexLength+=ut,qt.primitiveLength+=yi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,P,y)},ao("FillBucket",En,{omit:["layers","patternFeatures"]});var pi=new mu({"fill-sort-key":new Do(fr.layout_fill["fill-sort-key"])}),rn={paint:new mu({"fill-antialias":new oo(fr.paint_fill["fill-antialias"]),"fill-opacity":new Do(fr.paint_fill["fill-opacity"]),"fill-color":new Do(fr.paint_fill["fill-color"]),"fill-outline-color":new Do(fr.paint_fill["fill-outline-color"]),"fill-translate":new oo(fr.paint_fill["fill-translate"]),"fill-translate-anchor":new oo(fr.paint_fill["fill-translate-anchor"]),"fill-pattern":new nu(fr.paint_fill["fill-pattern"])}),layout:pi},_i=function(e){function i(l){e.call(this,l,rn)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.recalculate=function(l,y){e.prototype.recalculate.call(this,l,y);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(l){return new En(l)},i.prototype.queryRadius=function(){return nc(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(l,y,P,j,Q,we,ut){return $l(ic(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),we.angle,ut),j)},i.prototype.isTileClipped=function(){return!0},i}(Ku),ga=bl([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ss=To;function To(e,i,l,y,P){this.properties={},this.extent=l,this.type=0,this._pbf=e,this._geometry=-1,this._keys=y,this._values=P,e.readFields(Ro,this,i)}function Ro(e,i,l){e==1?i.id=l.readVarint():e==2?function(y,P){for(var j=y.readVarint()+y.pos;y.pos<j;){var Q=P._keys[y.readVarint()],we=P._values[y.readVarint()];P.properties[Q]=we}}(l,i):e==3?i.type=l.readVarint():e==4&&(i._geometry=l.pos)}function fs(e){for(var i,l,y=0,P=0,j=e.length,Q=j-1;P<j;Q=P++)y+=((l=e[Q]).x-(i=e[P]).x)*(i.y+l.y);return y}To.types=["Unknown","Point","LineString","Polygon"],To.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var i,l=e.readVarint()+e.pos,y=1,P=0,j=0,Q=0,we=[];e.pos<l;){if(P<=0){var ut=e.readVarint();y=7&ut,P=ut>>3}if(P--,y===1||y===2)j+=e.readSVarint(),Q+=e.readSVarint(),y===1&&(i&&we.push(i),i=[]),i.push(new B(j,Q));else{if(y!==7)throw new Error("unknown command "+y);i&&i.push(i[0].clone())}}return i&&we.push(i),we},To.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var i=e.readVarint()+e.pos,l=1,y=0,P=0,j=0,Q=1/0,we=-1/0,ut=1/0,Nt=-1/0;e.pos<i;){if(y<=0){var Ut=e.readVarint();l=7&Ut,y=Ut>>3}if(y--,l===1||l===2)(P+=e.readSVarint())<Q&&(Q=P),P>we&&(we=P),(j+=e.readSVarint())<ut&&(ut=j),j>Nt&&(Nt=j);else if(l!==7)throw new Error("unknown command "+l)}return[Q,ut,we,Nt]},To.prototype.toGeoJSON=function(e,i,l){var y,P,j=this.extent*Math.pow(2,l),Q=this.extent*e,we=this.extent*i,ut=this.loadGeometry(),Nt=To.types[this.type];function Ut(xr){for(var Kr=0;Kr<xr.length;Kr++){var qr=xr[Kr];xr[Kr]=[360*(qr.x+Q)/j-180,360/Math.PI*Math.atan(Math.exp((180-360*(qr.y+we)/j)*Math.PI/180))-90]}}switch(this.type){case 1:var qt=[];for(y=0;y<ut.length;y++)qt[y]=ut[y][0];Ut(ut=qt);break;case 2:for(y=0;y<ut.length;y++)Ut(ut[y]);break;case 3:for(ut=function(xr){var Kr=xr.length;if(Kr<=1)return[xr];for(var qr,dn,cn=[],Un=0;Un<Kr;Un++){var ri=fs(xr[Un]);ri!==0&&(dn===void 0&&(dn=ri<0),dn===ri<0?(qr&&cn.push(qr),qr=[xr[Un]]):qr.push(xr[Un]))}return qr&&cn.push(qr),cn}(ut),y=0;y<ut.length;y++)for(P=0;P<ut[y].length;P++)Ut(ut[y][P])}ut.length===1?ut=ut[0]:Nt="Multi"+Nt;var lr={type:"Feature",geometry:{type:Nt,coordinates:ut},properties:this.properties};return"id"in this&&(lr.id=this.id),lr};var ps=zo;function zo(e,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Ds,this,i),this.length=this._features.length}function Ds(e,i,l){e===15?i.version=l.readVarint():e===1?i.name=l.readString():e===5?i.extent=l.readVarint():e===2?i._features.push(l.pos):e===3?i._keys.push(l.readString()):e===4&&i._values.push(function(y){for(var P=null,j=y.readVarint()+y.pos;y.pos<j;){var Q=y.readVarint()>>3;P=Q===1?y.readString():Q===2?y.readFloat():Q===3?y.readDouble():Q===4?y.readVarint64():Q===5?y.readVarint():Q===6?y.readSVarint():Q===7?y.readBoolean():null}return P}(l))}function xu(e,i,l){if(e===3){var y=new ps(l,l.readVarint()+l.pos);y.length&&(i[y.name]=y)}}zo.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new ss(this._pbf,i,this.extent,this._keys,this._values)};var cu={VectorTile:function(e,i){this.layers=e.readFields(xu,{},i)},VectorTileFeature:ss,VectorTileLayer:ps},tf=cu.VectorTileFeature.types,$c=Math.pow(2,13);function ac(e,i,l,y,P,j,Q,we){e.emplaceBack(i,l,2*Math.floor(y*$c)+Q,P*$c*2,j*$c*2,Math.round(we))}var ll=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Yc,this.indexArray=new rc,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Or,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function wu(e,i){return e.x===i.x&&(e.x<0||e.x>8192)||e.y===i.y&&(e.y<0||e.y>8192)}ll.prototype.populate=function(e,i,l){this.features=[],this.hasPattern=Dt("fill-extrusion",this.layers,i);for(var y=0,P=e;y<P.length;y+=1){var j=P[y],Q=j.feature,we=j.id,ut=j.index,Nt=j.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,qt=Ju(Q,Ut);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),qt,l)){var lr={id:we,sourceLayerIndex:Nt,index:ut,geometry:Ut?qt.geometry:Qu(Q),properties:Q.properties,type:Q.type,patterns:{}};this.hasPattern?this.features.push($r("fill-extrusion",this.layers,lr,this.zoom,i)):this.addFeature(lr,lr.geometry,ut,l,{}),i.featureIndex.insert(Q,lr.geometry,ut,Nt,this.index,!0)}}},ll.prototype.addFeatures=function(e,i,l){for(var y=0,P=this.features;y<P.length;y+=1){var j=P[y];this.addFeature(j,j.geometry,j.index,i,l)}},ll.prototype.update=function(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,l)},ll.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ll.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ll.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ga),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ll.prototype.addFeature=function(e,i,l,y,P){for(var j=0,Q=rt(i,500);j<Q.length;j+=1){for(var we=Q[j],ut=0,Nt=0,Ut=we;Nt<Ut.length;Nt+=1)ut+=Ut[Nt].length;for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),lr=0,xr=we;lr<xr.length;lr+=1){var Kr=xr[lr];if(Kr.length!==0&&!((Ss=Kr).every(function(Is){return Is.x<0})||Ss.every(function(Is){return Is.x>8192})||Ss.every(function(Is){return Is.y<0})||Ss.every(function(Is){return Is.y>8192})))for(var qr=0,dn=0;dn<Kr.length;dn++){var cn=Kr[dn];if(dn>=1){var Un=Kr[dn-1];if(!wu(cn,Un)){qt.vertexLength+4>Or.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ri=cn.sub(Un)._perp()._unit(),gi=Un.dist(cn);qr+gi>32768&&(qr=0),ac(this.layoutVertexArray,cn.x,cn.y,ri.x,ri.y,0,0,qr),ac(this.layoutVertexArray,cn.x,cn.y,ri.x,ri.y,0,1,qr),ac(this.layoutVertexArray,Un.x,Un.y,ri.x,ri.y,0,0,qr+=gi),ac(this.layoutVertexArray,Un.x,Un.y,ri.x,ri.y,0,1,qr);var yi=qt.vertexLength;this.indexArray.emplaceBack(yi,yi+2,yi+1),this.indexArray.emplaceBack(yi+1,yi+2,yi+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+ut>Or.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray)),tf[e.type]==="Polygon"){for(var Ii=[],Ji=[],Wi=qt.vertexLength,ja=0,Jn=we;ja<Jn.length;ja+=1){var la=Jn[ja];if(la.length!==0){la!==we[0]&&Ji.push(Ii.length/2);for(var ea=0;ea<la.length;ea++){var bo=la[ea];ac(this.layoutVertexArray,bo.x,bo.y,0,0,1,1,0),Ii.push(bo.x),Ii.push(bo.y)}}}for(var Eo=Ci(Ii,Ji),Ja=0;Ja<Eo.length;Ja+=3)this.indexArray.emplaceBack(Wi+Eo[Ja],Wi+Eo[Ja+2],Wi+Eo[Ja+1]);qt.primitiveLength+=Eo.length/3,qt.vertexLength+=ut}}var Ss;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,P,y)},ao("FillExtrusionBucket",ll,{omit:["layers","features"]});var Sl={paint:new mu({"fill-extrusion-opacity":new oo(fr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Do(fr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oo(fr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oo(fr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nu(fr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Do(fr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Do(fr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oo(fr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Wl=function(e){function i(l){e.call(this,l,Sl)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(l){return new ll(l)},i.prototype.queryRadius=function(){return nc(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(l,y,P,j,Q,we,ut,Nt){var Ut=ic(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),we.angle,ut),qt=this.paint.get("fill-extrusion-height").evaluate(y,P),lr=this.paint.get("fill-extrusion-base").evaluate(y,P),xr=function(qr,dn,cn,Un){for(var ri=[],gi=0,yi=qr;gi<yi.length;gi+=1){var Ii=yi[gi],Ji=[Ii.x,Ii.y,0,1];Nf(Ji,Ji,dn),ri.push(new B(Ji[0]/Ji[3],Ji[1]/Ji[3]))}return ri}(Ut,Nt),Kr=function(qr,dn,cn,Un){for(var ri=[],gi=[],yi=Un[8]*dn,Ii=Un[9]*dn,Ji=Un[10]*dn,Wi=Un[11]*dn,ja=Un[8]*cn,Jn=Un[9]*cn,la=Un[10]*cn,ea=Un[11]*cn,bo=0,Eo=qr;bo<Eo.length;bo+=1){for(var Ja=[],Ss=[],Is=0,pu=Eo[bo];Is<pu.length;Is+=1){var es=pu[Is],$u=es.x,hl=es.y,Nl=Un[0]*$u+Un[4]*hl+Un[12],el=Un[1]*$u+Un[5]*hl+Un[13],af=Un[2]*$u+Un[6]*hl+Un[14],gf=Un[3]*$u+Un[7]*hl+Un[15],zf=af+Ji,Th=gf+Wi,ed=Nl+ja,Zf=el+Jn,iu=af+la,Uf=gf+ea,xh=new B((Nl+yi)/Th,(el+Ii)/Th);xh.z=zf/Th,Ja.push(xh);var Lu=new B(ed/Uf,Zf/Uf);Lu.z=iu/Uf,Ss.push(Lu)}ri.push(Ja),gi.push(Ss)}return[ri,gi]}(j,lr,qt,Nt);return function(qr,dn,cn){var Un=1/0;$l(cn,dn)&&(Un=jc(cn,dn[0]));for(var ri=0;ri<dn.length;ri++)for(var gi=dn[ri],yi=qr[ri],Ii=0;Ii<gi.length-1;Ii++){var Ji=gi[Ii],Wi=[Ji,gi[Ii+1],yi[Ii+1],yi[Ii],Ji];Pf(cn,Wi)&&(Un=Math.min(Un,jc(cn,Wi)))}return Un!==1/0&&Un}(Kr[0],Kr[1],xr)},i}(Ku);function Pc(e,i){return e.x*i.x+e.y*i.y}function jc(e,i){if(e.length===1){for(var l,y=0,P=i[y++];!l||P.equals(l);)if(!(l=i[y++]))return 1/0;for(;y<i.length;y++){var j=i[y],Q=e[0],we=l.sub(P),ut=j.sub(P),Nt=Q.sub(P),Ut=Pc(we,we),qt=Pc(we,ut),lr=Pc(ut,ut),xr=Pc(Nt,we),Kr=Pc(Nt,ut),qr=Ut*lr-qt*qt,dn=(lr*xr-qt*Kr)/qr,cn=(Ut*Kr-qt*xr)/qr,Un=P.z*(1-dn-cn)+l.z*dn+j.z*cn;if(isFinite(Un))return Un}return 1/0}for(var ri=1/0,gi=0,yi=i;gi<yi.length;gi+=1)ri=Math.min(ri,yi[gi].z);return ri}var hu=bl([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,_h=bl([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Oc=cu.VectorTileFeature.types,ud=Math.cos(Math.PI/180*37.5),Hd=Math.pow(2,14)/.5,Zu=function(e){var i=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(l){i.gradients[l.id]={}}),this.layoutVertexArray=new kl,this.layoutVertexArray2=new Dr,this.indexArray=new rc,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};Zu.prototype.populate=function(e,i,l){this.hasPattern=Dt("line",this.layers,i);for(var y=this.layers[0].layout.get("line-sort-key"),P=[],j=0,Q=e;j<Q.length;j+=1){var we=Q[j],ut=we.feature,Nt=we.id,Ut=we.index,qt=we.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,xr=Ju(ut,lr);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),xr,l)){var Kr=y?y.evaluate(xr,{},l):void 0,qr={id:Nt,properties:ut.properties,type:ut.type,sourceLayerIndex:qt,index:Ut,geometry:lr?xr.geometry:Qu(ut),patterns:{},sortKey:Kr};P.push(qr)}}y&&P.sort(function(Ji,Wi){return Ji.sortKey-Wi.sortKey});for(var dn=0,cn=P;dn<cn.length;dn+=1){var Un=cn[dn],ri=Un.geometry,gi=Un.index,yi=Un.sourceLayerIndex;if(this.hasPattern){var Ii=$r("line",this.layers,Un,this.zoom,i);this.patternFeatures.push(Ii)}else this.addFeature(Un,ri,gi,l,{});i.featureIndex.insert(e[gi].feature,ri,gi,yi,this.index)}},Zu.prototype.update=function(e,i,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,l)},Zu.prototype.addFeatures=function(e,i,l){for(var y=0,P=this.patternFeatures;y<P.length;y+=1){var j=P[y];this.addFeature(j,j.geometry,j.index,i,l)}},Zu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zu.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,_h)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hu),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Zu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zu.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Zu.prototype.addFeature=function(e,i,l,y,P){var j=this.layers[0].layout,Q=j.get("line-join").evaluate(e,{}),we=j.get("line-cap"),ut=j.get("line-miter-limit"),Nt=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var Ut=0,qt=i;Ut<qt.length;Ut+=1)this.addLine(qt[Ut],e,Q,we,ut,Nt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,P,y)},Zu.prototype.addLine=function(e,i,l,y,P,j){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Q=0;Q<e.length-1;Q++)this.totalDistance+=e[Q].dist(e[Q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var we=Oc[i.type]==="Polygon",ut=e.length;ut>=2&&e[ut-1].equals(e[ut-2]);)ut--;for(var Nt=0;Nt<ut-1&&e[Nt].equals(e[Nt+1]);)Nt++;if(!(ut<(we?3:2))){l==="bevel"&&(P=1.05);var Ut,qt=this.overscaling<=16?122880/(512*this.overscaling):0,lr=this.segments.prepareSegment(10*ut,this.layoutVertexArray,this.indexArray),xr=void 0,Kr=void 0,qr=void 0,dn=void 0;this.e1=this.e2=-1,we&&(dn=e[Nt].sub(Ut=e[ut-2])._unit()._perp());for(var cn=Nt;cn<ut;cn++)if(!(Kr=cn===ut-1?we?e[Nt+1]:void 0:e[cn+1])||!e[cn].equals(Kr)){dn&&(qr=dn),Ut&&(xr=Ut),Ut=e[cn],dn=Kr?Kr.sub(Ut)._unit()._perp():qr;var Un=(qr=qr||dn).add(dn);Un.x===0&&Un.y===0||Un._unit();var ri=qr.x*dn.x+qr.y*dn.y,gi=Un.x*dn.x+Un.y*dn.y,yi=gi!==0?1/gi:1/0,Ii=2*Math.sqrt(2-2*gi),Ji=gi<ud&&xr&&Kr,Wi=qr.x*dn.y-qr.y*dn.x>0;if(Ji&&cn>Nt){var ja=Ut.dist(xr);if(ja>2*qt){var Jn=Ut.sub(Ut.sub(xr)._mult(qt/ja)._round());this.updateDistance(xr,Jn),this.addCurrentVertex(Jn,qr,0,0,lr),xr=Jn}}var la=xr&&Kr,ea=la?l:we?"butt":y;if(la&&ea==="round"&&(yi<j?ea="miter":yi<=2&&(ea="fakeround")),ea==="miter"&&yi>P&&(ea="bevel"),ea==="bevel"&&(yi>2&&(ea="flipbevel"),yi<P&&(ea="miter")),xr&&this.updateDistance(xr,Ut),ea==="miter")Un._mult(yi),this.addCurrentVertex(Ut,Un,0,0,lr);else if(ea==="flipbevel"){if(yi>100)Un=dn.mult(-1);else{var bo=yi*qr.add(dn).mag()/qr.sub(dn).mag();Un._perp()._mult(bo*(Wi?-1:1))}this.addCurrentVertex(Ut,Un,0,0,lr),this.addCurrentVertex(Ut,Un.mult(-1),0,0,lr)}else if(ea==="bevel"||ea==="fakeround"){var Eo=-Math.sqrt(yi*yi-1),Ja=Wi?Eo:0,Ss=Wi?0:Eo;if(xr&&this.addCurrentVertex(Ut,qr,Ja,Ss,lr),ea==="fakeround")for(var Is=Math.round(180*Ii/Math.PI/20),pu=1;pu<Is;pu++){var es=pu/Is;if(es!==.5){var $u=es-.5;es+=es*$u*(es-1)*((1.0904+ri*(ri*(3.55645-1.43519*ri)-3.2452))*$u*$u+(.848013+ri*(.215638*ri-1.06021)))}var hl=dn.sub(qr)._mult(es)._add(qr)._unit()._mult(Wi?-1:1);this.addHalfVertex(Ut,hl.x,hl.y,!1,Wi,0,lr)}Kr&&this.addCurrentVertex(Ut,dn,-Ja,-Ss,lr)}else if(ea==="butt")this.addCurrentVertex(Ut,Un,0,0,lr);else if(ea==="square"){var Nl=xr?1:-1;this.addCurrentVertex(Ut,Un,Nl,Nl,lr)}else ea==="round"&&(xr&&(this.addCurrentVertex(Ut,qr,0,0,lr),this.addCurrentVertex(Ut,qr,1,1,lr,!0)),Kr&&(this.addCurrentVertex(Ut,dn,-1,-1,lr,!0),this.addCurrentVertex(Ut,dn,0,0,lr)));if(Ji&&cn<ut-1){var el=Ut.dist(Kr);if(el>2*qt){var af=Ut.add(Kr.sub(Ut)._mult(qt/el)._round());this.updateDistance(Ut,af),this.addCurrentVertex(af,dn,0,0,lr),Ut=af}}}}},Zu.prototype.addCurrentVertex=function(e,i,l,y,P,j){j===void 0&&(j=!1);var Q=i.y*y-i.x,we=-i.y-i.x*y;this.addHalfVertex(e,i.x+i.y*l,i.y-i.x*l,j,!1,l,P),this.addHalfVertex(e,Q,we,j,!0,-y,P),this.distance>Hd/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,i,l,y,P,j))},Zu.prototype.addHalfVertex=function(e,i,l,y,P,j,Q){var we=.5*(this.lineClips?this.scaledDistance*(Hd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(y?1:0),(e.y<<1)+(P?1:0),Math.round(63*i)+128,Math.round(63*l)+128,1+(j===0?0:j<0?-1:1)|(63&we)<<2,we>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var ut=Q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ut),Q.primitiveLength++),P?this.e2=ut:this.e1=ut},Zu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Zu.prototype.updateDistance=function(e,i){this.distance+=e.dist(i),this.updateScaledDistance()},ao("LineBucket",Zu,{omit:["layers","patternFeatures"]});var Sd=new mu({"line-cap":new oo(fr.layout_line["line-cap"]),"line-join":new Do(fr.layout_line["line-join"]),"line-miter-limit":new oo(fr.layout_line["line-miter-limit"]),"line-round-limit":new oo(fr.layout_line["line-round-limit"]),"line-sort-key":new Do(fr.layout_line["line-sort-key"])}),Hc={paint:new mu({"line-opacity":new Do(fr.paint_line["line-opacity"]),"line-color":new Do(fr.paint_line["line-color"]),"line-translate":new oo(fr.paint_line["line-translate"]),"line-translate-anchor":new oo(fr.paint_line["line-translate-anchor"]),"line-width":new Do(fr.paint_line["line-width"]),"line-gap-width":new Do(fr.paint_line["line-gap-width"]),"line-offset":new Do(fr.paint_line["line-offset"]),"line-blur":new Do(fr.paint_line["line-blur"]),"line-dasharray":new Jl(fr.paint_line["line-dasharray"]),"line-pattern":new nu(fr.paint_line["line-pattern"]),"line-gradient":new xl(fr.paint_line["line-gradient"])}),layout:Sd},Nh=new(function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(l,y){return y=new Ks(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),e.prototype.possiblyEvaluate.call(this,l,y)},i.prototype.evaluate=function(l,y,P,j){return y=Se({},y,{zoom:Math.floor(y.zoom)}),e.prototype.evaluate.call(this,l,y,P,j)},i}(Do))(Hc.paint.properties["line-width"].specification);Nh.useIntegerZoom=!0;var up=function(e){function i(l){e.call(this,l,Hc),this.gradientVersion=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(l){l==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qi,this.gradientVersion=(this.gradientVersion+1)%U)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(l,y){e.prototype.recalculate.call(this,l,y),this.paint._values["line-floorwidth"]=Nh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)},i.prototype.createBucket=function(l){return new Zu(l)},i.prototype.queryRadius=function(l){var y=l,P=_d(Qc("line-width",this,y),Qc("line-gap-width",this,y)),j=Qc("line-offset",this,y);return P/2+Math.abs(j)+nc(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(l,y,P,j,Q,we,ut){var Nt=ic(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),we.angle,ut),Ut=ut/2*_d(this.paint.get("line-width").evaluate(y,P),this.paint.get("line-gap-width").evaluate(y,P)),qt=this.paint.get("line-offset").evaluate(y,P);return qt&&(j=function(lr,xr){for(var Kr=[],qr=new B(0,0),dn=0;dn<lr.length;dn++){for(var cn=lr[dn],Un=[],ri=0;ri<cn.length;ri++){var gi=cn[ri],yi=cn[ri+1],Ii=ri===0?qr:gi.sub(cn[ri-1])._unit()._perp(),Ji=ri===cn.length-1?qr:yi.sub(gi)._unit()._perp(),Wi=Ii._add(Ji)._unit();Wi._mult(1/(Wi.x*Ji.x+Wi.y*Ji.y)),Un.push(Wi._mult(xr)._add(gi))}Kr.push(Un)}return Kr}(j,qt*ut)),function(lr,xr,Kr){for(var qr=0;qr<xr.length;qr++){var dn=xr[qr];if(lr.length>=3){for(var cn=0;cn<dn.length;cn++)if(pf(lr,dn[cn]))return!0}if(Uc(lr,dn,Kr))return!0}return!1}(Nt,j,Ut)},i.prototype.isTileClipped=function(){return!0},i}(Ku);function _d(e,i){return i>0?i+2*e:e}var pp=bl([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vp=bl([{name:"a_projected_pos",components:3,type:"Float32"}],4),mp=(bl([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),bl([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),wd=(bl([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),bl([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ld=bl([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gp(e,i,l){return e.sections.forEach(function(y){y.text=function(P,j,Q){var we=j.layout.get("text-transform").evaluate(Q,{});return we==="uppercase"?P=P.toLocaleUpperCase():we==="lowercase"&&(P=P.toLocaleLowerCase()),gu.applyArabicShaping&&(P=gu.applyArabicShaping(P)),P}(y.text,i,l)}),e}bl([{name:"triangle",components:3,type:"Uint16"}]),bl([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bl([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bl([{type:"Float32",name:"offsetX"}]),bl([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ah={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},kd=function(e,i,l,y,P){var j,Q,we=8*P-y-1,ut=(1<<we)-1,Nt=ut>>1,Ut=-7,qt=l?P-1:0,lr=l?-1:1,xr=e[i+qt];for(qt+=lr,j=xr&(1<<-Ut)-1,xr>>=-Ut,Ut+=we;Ut>0;j=256*j+e[i+qt],qt+=lr,Ut-=8);for(Q=j&(1<<-Ut)-1,j>>=-Ut,Ut+=y;Ut>0;Q=256*Q+e[i+qt],qt+=lr,Ut-=8);if(j===0)j=1-Nt;else{if(j===ut)return Q?NaN:1/0*(xr?-1:1);Q+=Math.pow(2,y),j-=Nt}return(xr?-1:1)*Q*Math.pow(2,j-y)},xd=function(e,i,l,y,P,j){var Q,we,ut,Nt=8*j-P-1,Ut=(1<<Nt)-1,qt=Ut>>1,lr=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,xr=y?0:j-1,Kr=y?1:-1,qr=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(we=isNaN(i)?1:0,Q=Ut):(Q=Math.floor(Math.log(i)/Math.LN2),i*(ut=Math.pow(2,-Q))<1&&(Q--,ut*=2),(i+=Q+qt>=1?lr/ut:lr*Math.pow(2,1-qt))*ut>=2&&(Q++,ut/=2),Q+qt>=Ut?(we=0,Q=Ut):Q+qt>=1?(we=(i*ut-1)*Math.pow(2,P),Q+=qt):(we=i*Math.pow(2,qt-1)*Math.pow(2,P),Q=0));P>=8;e[l+xr]=255&we,xr+=Kr,we/=256,P-=8);for(Q=Q<<P|we,Nt+=P;Nt>0;e[l+xr]=255&Q,xr+=Kr,Q/=256,Nt-=8);e[l+xr-Kr]|=128*qr},Cd=vl;function vl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}vl.Varint=0,vl.Fixed64=1,vl.Bytes=2,vl.Fixed32=5;var Dd=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Fs(e){return e.type===vl.Bytes?e.readVarint()+e.pos:e.pos+1}function cd(e,i,l){return l?4294967296*i+(e>>>0):4294967296*(i>>>0)+(e>>>0)}function Vd(e,i,l){var y=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(y);for(var P=l.pos-1;P>=e;P--)l.buf[P+y]=l.buf[P]}function Gd(e,i){for(var l=0;l<e.length;l++)i.writeVarint(e[l])}function Ht(e,i){for(var l=0;l<e.length;l++)i.writeSVarint(e[l])}function Zr(e,i){for(var l=0;l<e.length;l++)i.writeFloat(e[l])}function On(e,i){for(var l=0;l<e.length;l++)i.writeDouble(e[l])}function wi(e,i){for(var l=0;l<e.length;l++)i.writeBoolean(e[l])}function ia(e,i){for(var l=0;l<e.length;l++)i.writeFixed32(e[l])}function Ai(e,i){for(var l=0;l<e.length;l++)i.writeSFixed32(e[l])}function ji(e,i){for(var l=0;l<e.length;l++)i.writeFixed64(e[l])}function Ea(e,i){for(var l=0;l<e.length;l++)i.writeSFixed64(e[l])}function Ma(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]}function Ia(e,i,l){e[l]=i,e[l+1]=i>>>8,e[l+2]=i>>>16,e[l+3]=i>>>24}function Za(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24)}function Ha(e,i,l){e===1&&l.readMessage($a,i)}function $a(e,i,l){if(e===3){var y=l.readMessage(ya,{}),P=y.width,j=y.height,Q=y.left,we=y.top,ut=y.advance;i.push({id:y.id,bitmap:new Mt({width:P+6,height:j+6},y.bitmap),metrics:{width:P,height:j,left:Q,top:we,advance:ut}})}}function ya(e,i,l){e===1?i.id=l.readVarint():e===2?i.bitmap=l.readBytes():e===3?i.width=l.readVarint():e===4?i.height=l.readVarint():e===5?i.left=l.readSVarint():e===6?i.top=l.readSVarint():e===7&&(i.advance=l.readVarint())}function Ua(e){for(var i=0,l=0,y=0,P=e;y<P.length;y+=1){var j=P[y];i+=j.w*j.h,l=Math.max(l,j.w)}e.sort(function(qr,dn){return dn.h-qr.h});for(var Q=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}],we=0,ut=0,Nt=0,Ut=e;Nt<Ut.length;Nt+=1)for(var qt=Ut[Nt],lr=Q.length-1;lr>=0;lr--){var xr=Q[lr];if(!(qt.w>xr.w||qt.h>xr.h)){if(qt.x=xr.x,qt.y=xr.y,ut=Math.max(ut,qt.y+qt.h),we=Math.max(we,qt.x+qt.w),qt.w===xr.w&&qt.h===xr.h){var Kr=Q.pop();lr<Q.length&&(Q[lr]=Kr)}else qt.h===xr.h?(xr.x+=qt.w,xr.w-=qt.w):qt.w===xr.w?(xr.y+=qt.h,xr.h-=qt.h):(Q.push({x:xr.x+qt.w,y:xr.y,w:xr.w-qt.w,h:qt.h}),xr.y+=qt.h,xr.h-=qt.h);break}}return{w:we,h:ut,fill:i/(we*ut)||0}}vl.prototype={destroy:function(){this.buf=null},readFields:function(e,i,l){for(l=l||this.length;this.pos<l;){var y=this.readVarint(),P=y>>3,j=this.pos;this.type=7&y,e(P,i,this),this.pos===j&&this.skip(y)}return i},readMessage:function(e,i){return this.readFields(e,i,this.readVarint()+this.pos)},readFixed32:function(){var e=Ma(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Za(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ma(this.buf,this.pos)+4294967296*Ma(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Ma(this.buf,this.pos)+4294967296*Za(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=kd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=kd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var i,l,y=this.buf;return i=127&(l=y[this.pos++]),l<128?i:(i|=(127&(l=y[this.pos++]))<<7,l<128?i:(i|=(127&(l=y[this.pos++]))<<14,l<128?i:(i|=(127&(l=y[this.pos++]))<<21,l<128?i:function(P,j,Q){var we,ut,Nt=Q.buf;if(we=(112&(ut=Nt[Q.pos++]))>>4,ut<128||(we|=(127&(ut=Nt[Q.pos++]))<<3,ut<128)||(we|=(127&(ut=Nt[Q.pos++]))<<10,ut<128)||(we|=(127&(ut=Nt[Q.pos++]))<<17,ut<128)||(we|=(127&(ut=Nt[Q.pos++]))<<24,ut<128)||(we|=(1&(ut=Nt[Q.pos++]))<<31,ut<128))return cd(P,we,j);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=y[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&Dd?function(l,y,P){return Dd.decode(l.subarray(y,P))}(this.buf,i,e):function(l,y,P){for(var j="",Q=y;Q<P;){var we,ut,Nt,Ut=l[Q],qt=null,lr=Ut>239?4:Ut>223?3:Ut>191?2:1;if(Q+lr>P)break;lr===1?Ut<128&&(qt=Ut):lr===2?(192&(we=l[Q+1]))==128&&(qt=(31&Ut)<<6|63&we)<=127&&(qt=null):lr===3?(ut=l[Q+2],(192&(we=l[Q+1]))==128&&(192&ut)==128&&((qt=(15&Ut)<<12|(63&we)<<6|63&ut)<=2047||qt>=55296&&qt<=57343)&&(qt=null)):lr===4&&(ut=l[Q+2],Nt=l[Q+3],(192&(we=l[Q+1]))==128&&(192&ut)==128&&(192&Nt)==128&&((qt=(15&Ut)<<18|(63&we)<<12|(63&ut)<<6|63&Nt)<=65535||qt>=1114112)&&(qt=null)),qt===null?(qt=65533,lr=1):qt>65535&&(qt-=65536,j+=String.fromCharCode(qt>>>10&1023|55296),qt=56320|1023&qt),j+=String.fromCharCode(qt),Q+=lr}return j}(this.buf,i,e)},readBytes:function(){var e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i},readPackedVarint:function(e,i){if(this.type!==vl.Bytes)return e.push(this.readVarint(i));var l=Fs(this);for(e=e||[];this.pos<l;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==vl.Bytes)return e.push(this.readSVarint());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==vl.Bytes)return e.push(this.readBoolean());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==vl.Bytes)return e.push(this.readFloat());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==vl.Bytes)return e.push(this.readDouble());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==vl.Bytes)return e.push(this.readFixed32());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==vl.Bytes)return e.push(this.readSFixed32());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==vl.Bytes)return e.push(this.readFixed64());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==vl.Bytes)return e.push(this.readSFixed64());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===vl.Varint)for(;this.buf[this.pos++]>127;);else if(i===vl.Bytes)this.pos=this.readVarint()+this.pos;else if(i===vl.Fixed32)this.pos+=4;else{if(i!==vl.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,i){this.writeVarint(e<<3|i)},realloc:function(e){for(var i=this.length||16;i<this.pos+e;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Ia(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Ia(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Ia(this.buf,-1&e,this.pos),Ia(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Ia(this.buf,-1&e,this.pos),Ia(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(i,l){var y,P;if(i>=0?(y=i%4294967296|0,P=i/4294967296|0):(P=~(-i/4294967296),4294967295^(y=~(-i%4294967296))?y=y+1|0:(y=0,P=P+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(j,Q,we){we.buf[we.pos++]=127&j|128,j>>>=7,we.buf[we.pos++]=127&j|128,j>>>=7,we.buf[we.pos++]=127&j|128,j>>>=7,we.buf[we.pos++]=127&j|128,we.buf[we.pos]=127&(j>>>=7)}(y,0,l),function(j,Q){var we=(7&j)<<4;Q.buf[Q.pos++]|=we|((j>>>=3)?128:0),j&&(Q.buf[Q.pos++]=127&j|((j>>>=7)?128:0),j&&(Q.buf[Q.pos++]=127&j|((j>>>=7)?128:0),j&&(Q.buf[Q.pos++]=127&j|((j>>>=7)?128:0),j&&(Q.buf[Q.pos++]=127&j|((j>>>=7)?128:0),j&&(Q.buf[Q.pos++]=127&j)))))}(P,l)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var i=this.pos;this.pos=function(y,P,j){for(var Q,we,ut=0;ut<P.length;ut++){if((Q=P.charCodeAt(ut))>55295&&Q<57344){if(!we){Q>56319||ut+1===P.length?(y[j++]=239,y[j++]=191,y[j++]=189):we=Q;continue}if(Q<56320){y[j++]=239,y[j++]=191,y[j++]=189,we=Q;continue}Q=we-55296<<10|Q-56320|65536,we=null}else we&&(y[j++]=239,y[j++]=191,y[j++]=189,we=null);Q<128?y[j++]=Q:(Q<2048?y[j++]=Q>>6|192:(Q<65536?y[j++]=Q>>12|224:(y[j++]=Q>>18|240,y[j++]=Q>>12&63|128),y[j++]=Q>>6&63|128),y[j++]=63&Q|128)}return j}(this.buf,e,this.pos);var l=this.pos-i;l>=128&&Vd(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(e){this.realloc(4),xd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),xd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var i=e.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=e[l]},writeRawMessage:function(e,i){this.pos++;var l=this.pos;e(i,this);var y=this.pos-l;y>=128&&Vd(l,y,this),this.pos=l-1,this.writeVarint(y),this.pos+=y},writeMessage:function(e,i,l){this.writeTag(e,vl.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(e,i){i.length&&this.writeMessage(e,Gd,i)},writePackedSVarint:function(e,i){i.length&&this.writeMessage(e,Ht,i)},writePackedBoolean:function(e,i){i.length&&this.writeMessage(e,wi,i)},writePackedFloat:function(e,i){i.length&&this.writeMessage(e,Zr,i)},writePackedDouble:function(e,i){i.length&&this.writeMessage(e,On,i)},writePackedFixed32:function(e,i){i.length&&this.writeMessage(e,ia,i)},writePackedSFixed32:function(e,i){i.length&&this.writeMessage(e,Ai,i)},writePackedFixed64:function(e,i){i.length&&this.writeMessage(e,ji,i)},writePackedSFixed64:function(e,i){i.length&&this.writeMessage(e,Ea,i)},writeBytesField:function(e,i){this.writeTag(e,vl.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,vl.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,vl.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,vl.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,vl.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,vl.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,vl.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,vl.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,vl.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,vl.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,Boolean(i))}};var si=function(e,i){var l=i.pixelRatio,y=i.version,P=i.stretchX,j=i.stretchY,Q=i.content;this.paddedRect=e,this.pixelRatio=l,this.stretchX=P,this.stretchY=j,this.content=Q,this.version=y},Ni={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ni.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ni.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ni.tlbr.get=function(){return this.tl.concat(this.br)},Ni.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(si.prototype,Ni);var Ra=function(e,i){var l={},y={};this.haveRenderCallbacks=[];var P=[];this.addImages(e,l,P),this.addImages(i,y,P);var j=Ua(P),Q=new St({width:j.w||1,height:j.h||1});for(var we in e){var ut=e[we],Nt=l[we].paddedRect;St.copy(ut.data,Q,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},ut.data)}for(var Ut in i){var qt=i[Ut],lr=y[Ut].paddedRect,xr=lr.x+1,Kr=lr.y+1,qr=qt.data.width,dn=qt.data.height;St.copy(qt.data,Q,{x:0,y:0},{x:xr,y:Kr},qt.data),St.copy(qt.data,Q,{x:0,y:dn-1},{x:xr,y:Kr-1},{width:qr,height:1}),St.copy(qt.data,Q,{x:0,y:0},{x:xr,y:Kr+dn},{width:qr,height:1}),St.copy(qt.data,Q,{x:qr-1,y:0},{x:xr-1,y:Kr},{width:1,height:dn}),St.copy(qt.data,Q,{x:0,y:0},{x:xr+qr,y:Kr},{width:1,height:dn})}this.image=Q,this.iconPositions=l,this.patternPositions=y};Ra.prototype.addImages=function(e,i,l){for(var y in e){var P=e[y],j={x:0,y:0,w:P.data.width+2,h:P.data.height+2};l.push(j),i[y]=new si(j,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(y)}},Ra.prototype.patchUpdatedImages=function(e,i){for(var l in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),i)},Ra.prototype.patchUpdatedImage=function(e,i,l){if(e&&i&&e.version!==i.version){e.version=i.version;var y=e.tl;l.update(i.data,void 0,{x:y[0],y:y[1]})}},ao("ImagePosition",si),ao("ImageAtlas",Ra);var Ya={horizontal:1,vertical:2,horizontalOnly:3},_a=function(){this.scale=1,this.fontStack="",this.imageName=null};_a.forText=function(e,i){var l=new _a;return l.scale=e||1,l.fontStack=i,l},_a.forImage=function(e){var i=new _a;return i.imageName=e,i};var Ga=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xo(e,i,l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr){var dn,cn=Ga.fromFeature(e,P);qt===Ya.vertical&&cn.verticalizePunctuation();var Un=gu.processBidirectionalText,ri=gu.processStyledBidirectionalText;if(Un&&cn.sections.length===1){dn=[];for(var gi=0,yi=Un(cn.toString(),to(cn,Nt,j,i,y,xr,Kr));gi<yi.length;gi+=1){var Ii=yi[gi],Ji=new Ga;Ji.text=Ii,Ji.sections=cn.sections;for(var Wi=0;Wi<Ii.length;Wi++)Ji.sectionIndex.push(0);dn.push(Ji)}}else if(ri){dn=[];for(var ja=0,Jn=ri(cn.text,cn.sectionIndex,to(cn,Nt,j,i,y,xr,Kr));ja<Jn.length;ja+=1){var la=Jn[ja],ea=new Ga;ea.text=la[0],ea.sectionIndex=la[1],ea.sections=cn.sections,dn.push(ea)}}else dn=function(Ja,Ss){for(var Is=[],pu=Ja.text,es=0,$u=0,hl=Ss;$u<hl.length;$u+=1){var Nl=hl[$u];Is.push(Ja.substring(es,Nl)),es=Nl}return es<pu.length&&Is.push(Ja.substring(es,pu.length)),Is}(cn,to(cn,Nt,j,i,y,xr,Kr));var bo=[],Eo={positionedLines:bo,text:cn.toString(),top:Ut[1],bottom:Ut[1],left:Ut[0],right:Ut[0],writingMode:qt,iconsInText:!1,verticalizable:!1};return function(Ja,Ss,Is,pu,es,$u,hl,Nl,el,af,gf,zf){for(var Th=0,ed=-17,Zf=0,iu=0,Uf=Nl==="right"?1:Nl==="left"?0:.5,xh=0,Lu=0,cl=es;Lu<cl.length;Lu+=1){var sl=cl[Lu];sl.trim();var Wu=sl.getMaxScale(),td=24*(Wu-1),Qf={positionedGlyphs:[],lineOffset:0};Ja.positionedLines[xh]=Qf;var Rc=Qf.positionedGlyphs,$f=0;if(sl.length()){for(var rd=0;rd<sl.length();rd++){var Cl=sl.getSection(rd),Mh=sl.getSectionIndex(rd),fd=sl.getCharCode(rd),Wd=0,oc=null,Ou=null,Od=null,Wh=24,yf=!(el===Ya.horizontal||!gf&&!Vf(fd)||gf&&(xs[fd]||(Ph=fd,qa.Arabic(Ph)||qa["Arabic Supplement"](Ph)||qa["Arabic Extended-A"](Ph)||qa["Arabic Presentation Forms-A"](Ph)||qa["Arabic Presentation Forms-B"](Ph))));if(Cl.imageName){var Ep=pu[Cl.imageName];if(!Ep)continue;Od=Cl.imageName,Ja.iconsInText=Ja.iconsInText||!0,Ou=Ep.paddedRect;var bd=Ep.displaySize;Cl.scale=24*Cl.scale/zf,Wd=td+(24-bd[1]*Cl.scale),Wh=(oc={width:bd[0],height:bd[1],left:1,top:-3,advance:yf?bd[1]:bd[0]}).advance;var ml=yf?bd[0]*Cl.scale-24*Wu:bd[1]*Cl.scale-24*Wu;ml>0&&ml>$f&&($f=ml)}else{var vc=Is[Cl.fontStack],vd=vc&&vc[fd];if(vd&&vd.rect)Ou=vd.rect,oc=vd.metrics;else{var Ad=Ss[Cl.fontStack],Fd=Ad&&Ad[fd];if(!Fd)continue;oc=Fd.metrics}Wd=24*(Wu-Cl.scale)}yf?(Ja.verticalizable=!0,Rc.push({glyph:fd,imageName:Od,x:Th,y:ed+Wd,vertical:yf,scale:Cl.scale,fontStack:Cl.fontStack,sectionIndex:Mh,metrics:oc,rect:Ou}),Th+=Wh*Cl.scale+af):(Rc.push({glyph:fd,imageName:Od,x:Th,y:ed+Wd,vertical:yf,scale:Cl.scale,fontStack:Cl.fontStack,sectionIndex:Mh,metrics:oc,rect:Ou}),Th+=oc.advance*Cl.scale+af)}Rc.length!==0&&(Zf=Math.max(Th-af,Zf),Os(Rc,0,Rc.length-1,Uf,$f)),Th=0;var yp=$u*Wu+$f;Qf.lineOffset=Math.max($f,td),ed+=yp,iu=Math.max(yp,iu),++xh}else ed+=$u,++xh}var Ph,Ed=ed- -17,Bd=Oa(hl),Qd=Bd.horizontalAlign,Jf=Bd.verticalAlign;(function(bh,Bv,nv,iv,av,ov,sv,Nd,uv){var _p,Np=(Bv-nv)*av;_p=ov!==sv?-Nd*iv- -17:(-iv*uv+.5)*sv;for(var zp=0,Sp=bh;zp<Sp.length;zp+=1)for(var xp=0,Td=Sp[zp].positionedGlyphs;xp<Td.length;xp+=1){var rp=Td[xp];rp.x+=Np,rp.y+=_p}})(Ja.positionedLines,Uf,Qd,Jf,Zf,iu,$u,Ed,es.length),Ja.top+=-Jf*Ed,Ja.bottom=Ja.top+Ed,Ja.left+=-Qd*Zf,Ja.right=Ja.left+Zf}(Eo,i,l,y,dn,Q,we,ut,qt,Nt,lr,qr),!function(Ja){for(var Ss=0,Is=Ja;Ss<Is.length;Ss+=1)if(Is[Ss].positionedGlyphs.length!==0)return!1;return!0}(bo)&&Eo}Ga.fromFeature=function(e,i){for(var l=new Ga,y=0;y<e.sections.length;y++){var P=e.sections[y];P.image?l.addImageSection(P):l.addTextSection(P,i)}return l},Ga.prototype.length=function(){return this.text.length},Ga.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Ga.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Ga.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Ga.prototype.verticalizePunctuation=function(){this.text=function(e){for(var i="",l=0;l<e.length;l++){var y=e.charCodeAt(l+1)||null,P=e.charCodeAt(l-1)||null;i+=y&&ih(y)&&!Ah[e[l+1]]||P&&ih(P)&&!Ah[e[l-1]]||!Ah[e[l]]?e[l]:Ah[e[l]]}return i}(this.text)},Ga.prototype.trim=function(){for(var e=0,i=0;i<this.text.length&&xs[this.text.charCodeAt(i)];i++)e++;for(var l=this.text.length,y=this.text.length-1;y>=0&&y>=e&&xs[this.text.charCodeAt(y)];y--)l--;this.text=this.text.substring(e,l),this.sectionIndex=this.sectionIndex.slice(e,l)},Ga.prototype.substring=function(e,i){var l=new Ga;return l.text=this.text.substring(e,i),l.sectionIndex=this.sectionIndex.slice(e,i),l.sections=this.sections,l},Ga.prototype.toString=function(){return this.text},Ga.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(i,l){return Math.max(i,e.sections[l].scale)},0)},Ga.prototype.addTextSection=function(e,i){this.text+=e.text,this.sections.push(_a.forText(e.scale,e.fontStack||i));for(var l=this.sections.length-1,y=0;y<e.text.length;++y)this.sectionIndex.push(l)},Ga.prototype.addImageSection=function(e){var i=e.image?e.image.name:"";if(i.length!==0){var l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(_a.forImage(i)),this.sectionIndex.push(this.sections.length-1)):De("Reached maximum number of images 6401")}else De("Can't add FormattedSection with an empty image.")},Ga.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var xs={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qi={};function oa(e,i,l,y,P,j){if(i.imageName){var Q=y[i.imageName];return Q?Q.displaySize[0]*i.scale*24/j+P:0}var we=l[i.fontStack],ut=we&&we[e];return ut?ut.metrics.advance*i.scale+P:0}function Zo(e,i,l,y){var P=Math.pow(e-i,2);return y?e<i?P/2:2*P:P+Math.abs(l)*l}function fo(e,i,l){var y=0;return e===10&&(y-=1e4),l&&(y+=150),e!==40&&e!==65288||(y+=50),i!==41&&i!==65289||(y+=50),y}function Pa(e,i,l,y,P,j){for(var Q=null,we=Zo(i,l,P,j),ut=0,Nt=y;ut<Nt.length;ut+=1){var Ut=Nt[ut],qt=Zo(i-Ut.x,l,P,j)+Ut.badness;qt<=we&&(Q=Ut,we=qt)}return{index:e,x:i,priorBreak:Q,badness:we}}function to(e,i,l,y,P,j,Q){if(j!=="point")return[];if(!e)return[];for(var we,ut=[],Nt=function(dn,cn,Un,ri,gi,yi){for(var Ii=0,Ji=0;Ji<dn.length();Ji++){var Wi=dn.getSection(Ji);Ii+=oa(dn.getCharCode(Ji),Wi,ri,gi,cn,yi)}return Ii/Math.max(1,Math.ceil(Ii/Un))}(e,i,l,y,P,Q),Ut=e.text.indexOf("\u200B")>=0,qt=0,lr=0;lr<e.length();lr++){var xr=e.getSection(lr),Kr=e.getCharCode(lr);if(xs[Kr]||(qt+=oa(Kr,xr,y,P,i,Q)),lr<e.length()-1){var qr=!((we=Kr)<11904||!(qa["Bopomofo Extended"](we)||qa.Bopomofo(we)||qa["CJK Compatibility Forms"](we)||qa["CJK Compatibility Ideographs"](we)||qa["CJK Compatibility"](we)||qa["CJK Radicals Supplement"](we)||qa["CJK Strokes"](we)||qa["CJK Symbols and Punctuation"](we)||qa["CJK Unified Ideographs Extension A"](we)||qa["CJK Unified Ideographs"](we)||qa["Enclosed CJK Letters and Months"](we)||qa["Halfwidth and Fullwidth Forms"](we)||qa.Hiragana(we)||qa["Ideographic Description Characters"](we)||qa["Kangxi Radicals"](we)||qa["Katakana Phonetic Extensions"](we)||qa.Katakana(we)||qa["Vertical Forms"](we)||qa["Yi Radicals"](we)||qa["Yi Syllables"](we)));(Qi[Kr]||qr||xr.imageName)&&ut.push(Pa(lr+1,qt,Nt,ut,fo(Kr,e.getCharCode(lr+1),qr&&Ut),!1))}}return function dn(cn){return cn?dn(cn.priorBreak).concat(cn.index):[]}(Pa(e.length(),qt,Nt,ut,0,!0))}function Oa(e){var i=.5,l=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function Os(e,i,l,y,P){if(y||P)for(var j=e[l],Q=(e[l].x+j.metrics.advance*j.scale)*y,we=i;we<=l;we++)e[we].x-=Q,e[we].y+=P}function Bs(e,i,l,y,P,j){var Q,we=e.image;if(we.content){var ut=we.content,Nt=we.pixelRatio||1;Q=[ut[0]/Nt,ut[1]/Nt,we.displaySize[0]-ut[2]/Nt,we.displaySize[1]-ut[3]/Nt]}var Ut,qt,lr,xr,Kr=i.left*j,qr=i.right*j;l==="width"||l==="both"?(xr=P[0]+Kr-y[3],qt=P[0]+qr+y[1]):qt=(xr=P[0]+(Kr+qr-we.displaySize[0])/2)+we.displaySize[0];var dn=i.top*j,cn=i.bottom*j;return l==="height"||l==="both"?(Ut=P[1]+dn-y[0],lr=P[1]+cn+y[2]):lr=(Ut=P[1]+(dn+cn-we.displaySize[1])/2)+we.displaySize[1],{image:we,top:Ut,right:qt,bottom:lr,left:xr,collisionPadding:Q}}Qi[10]=!0,Qi[32]=!0,Qi[38]=!0,Qi[40]=!0,Qi[41]=!0,Qi[43]=!0,Qi[45]=!0,Qi[47]=!0,Qi[173]=!0,Qi[183]=!0,Qi[8203]=!0,Qi[8208]=!0,Qi[8211]=!0,Qi[8231]=!0;var so=function(e){function i(l,y,P,j){e.call(this,l,y),this.angle=P,j!==void 0&&(this.segment=j)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(B);function yo(e,i){var l=i.expression;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Ks(e+1))};if(l.kind==="source")return{kind:"source"};for(var y=l.zoomStops,P=l.interpolationType,j=0;j<y.length&&y[j]<=e;)j++;for(var Q=j=Math.max(0,j-1);Q<y.length&&y[Q]<e+1;)Q++;Q=Math.min(y.length-1,Q);var we=y[j],ut=y[Q];return l.kind==="composite"?{kind:"composite",minZoom:we,maxZoom:ut,interpolationType:P}:{kind:"camera",minZoom:we,maxZoom:ut,minSize:l.evaluate(new Ks(we)),maxSize:l.evaluate(new Ks(ut)),interpolationType:P}}function hs(e,i,l){var y=i.uSize,P=l.lowerSize;return e.kind==="source"?P/128:e.kind==="composite"?Pr(P/128,l.upperSize/128,i.uSizeT):y}function zs(e,i){var l=0,y=0;if(e.kind==="constant")y=e.layoutSize;else if(e.kind!=="source"){var P=e.interpolationType,j=P?me(wr.interpolationFactor(P,i,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?y=Pr(e.minSize,e.maxSize,j):l=j}return{uSizeT:l,uSize:y}}ao("Anchor",so);var Cu=Object.freeze({__proto__:null,getSizeData:yo,evaluateSizeForFeature:hs,evaluateSizeForZoom:zs,SIZE_PACK_FACTOR:128});function Gu(e,i,l,y,P){if(i.segment===void 0)return!0;for(var j=i,Q=i.segment+1,we=0;we>-l/2;){if(--Q<0)return!1;we-=e[Q].dist(j),j=e[Q]}we+=e[Q].dist(e[Q+1]),Q++;for(var ut=[],Nt=0;we<l/2;){var Ut=e[Q],qt=e[Q+1];if(!qt)return!1;var lr=e[Q-1].angleTo(Ut)-Ut.angleTo(qt);for(lr=Math.abs((lr+3*Math.PI)%(2*Math.PI)-Math.PI),ut.push({distance:we,angleDelta:lr}),Nt+=lr;we-ut[0].distance>y;)Nt-=ut.shift().angleDelta;if(Nt>P)return!1;Q++,we+=Ut.dist(qt)}return!0}function Bl(e){for(var i=0,l=0;l<e.length-1;l++)i+=e[l].dist(e[l+1]);return i}function Au(e,i,l){return e?.6*i*l:0}function Sf(e,i){return Math.max(e?e.right-e.left:0,i?i.right-i.left:0)}function Xl(e,i,l,y,P,j){for(var Q=Au(l,P,j),we=Sf(l,y)*j,ut=0,Nt=Bl(e)/2,Ut=0;Ut<e.length-1;Ut++){var qt=e[Ut],lr=e[Ut+1],xr=qt.dist(lr);if(ut+xr>Nt){var Kr=(Nt-ut)/xr,qr=Pr(qt.x,lr.x,Kr),dn=Pr(qt.y,lr.y,Kr),cn=new so(qr,dn,lr.angleTo(qt),Ut);return cn._round(),!Q||Gu(e,cn,we,Q,i)?cn:void 0}ut+=xr}}function Ic(e,i,l,y,P,j,Q,we,ut){var Nt=Au(y,j,Q),Ut=Sf(y,P),qt=Ut*Q,lr=e[0].x===0||e[0].x===ut||e[0].y===0||e[0].y===ut;return i-qt<i/4&&(i=qt+i/4),function xr(Kr,qr,dn,cn,Un,ri,gi,yi,Ii){for(var Ji=ri/2,Wi=Bl(Kr),ja=0,Jn=qr-dn,la=[],ea=0;ea<Kr.length-1;ea++){for(var bo=Kr[ea],Eo=Kr[ea+1],Ja=bo.dist(Eo),Ss=Eo.angleTo(bo);Jn+dn<ja+Ja;){var Is=((Jn+=dn)-ja)/Ja,pu=Pr(bo.x,Eo.x,Is),es=Pr(bo.y,Eo.y,Is);if(pu>=0&&pu<Ii&&es>=0&&es<Ii&&Jn-Ji>=0&&Jn+Ji<=Wi){var $u=new so(pu,es,Ss,ea);$u._round(),cn&&!Gu(Kr,$u,ri,cn,Un)||la.push($u)}}ja+=Ja}return yi||la.length||gi||(la=xr(Kr,ja/2,dn,cn,Un,ri,gi,!0,Ii)),la}(e,lr?i/2*we%i:(Ut/2+2*j)*Q*we%i,i,Nt,l,qt,lr,!1,ut)}function wl(e,i,l,y,P){for(var j=[],Q=0;Q<e.length;Q++)for(var we=e[Q],ut=void 0,Nt=0;Nt<we.length-1;Nt++){var Ut=we[Nt],qt=we[Nt+1];Ut.x<i&&qt.x<i||(Ut.x<i?Ut=new B(i,Ut.y+(i-Ut.x)/(qt.x-Ut.x)*(qt.y-Ut.y))._round():qt.x<i&&(qt=new B(i,Ut.y+(i-Ut.x)/(qt.x-Ut.x)*(qt.y-Ut.y))._round()),Ut.y<l&&qt.y<l||(Ut.y<l?Ut=new B(Ut.x+(l-Ut.y)/(qt.y-Ut.y)*(qt.x-Ut.x),l)._round():qt.y<l&&(qt=new B(Ut.x+(l-Ut.y)/(qt.y-Ut.y)*(qt.x-Ut.x),l)._round()),Ut.x>=y&&qt.x>=y||(Ut.x>=y?Ut=new B(y,Ut.y+(y-Ut.x)/(qt.x-Ut.x)*(qt.y-Ut.y))._round():qt.x>=y&&(qt=new B(y,Ut.y+(y-Ut.x)/(qt.x-Ut.x)*(qt.y-Ut.y))._round()),Ut.y>=P&&qt.y>=P||(Ut.y>=P?Ut=new B(Ut.x+(P-Ut.y)/(qt.y-Ut.y)*(qt.x-Ut.x),P)._round():qt.y>=P&&(qt=new B(Ut.x+(P-Ut.y)/(qt.y-Ut.y)*(qt.x-Ut.x),P)._round()),ut&&Ut.equals(ut[ut.length-1])||j.push(ut=[Ut]),ut.push(qt)))))}return j}function rf(e,i,l,y){var P=[],j=e.image,Q=j.pixelRatio,we=j.paddedRect.w-2,ut=j.paddedRect.h-2,Nt=e.right-e.left,Ut=e.bottom-e.top,qt=j.stretchX||[[0,we]],lr=j.stretchY||[[0,ut]],xr=function(pu,es){return pu+es[1]-es[0]},Kr=qt.reduce(xr,0),qr=lr.reduce(xr,0),dn=we-Kr,cn=ut-qr,Un=0,ri=Kr,gi=0,yi=qr,Ii=0,Ji=dn,Wi=0,ja=cn;if(j.content&&y){var Jn=j.content;Un=mf(qt,0,Jn[0]),gi=mf(lr,0,Jn[1]),ri=mf(qt,Jn[0],Jn[2]),yi=mf(lr,Jn[1],Jn[3]),Ii=Jn[0]-Un,Wi=Jn[1]-gi,Ji=Jn[2]-Jn[0]-ri,ja=Jn[3]-Jn[1]-yi}var la=function(pu,es,$u,hl){var Nl=pc(pu.stretch-Un,ri,Nt,e.left),el=fu(pu.fixed-Ii,Ji,pu.stretch,Kr),af=pc(es.stretch-gi,yi,Ut,e.top),gf=fu(es.fixed-Wi,ja,es.stretch,qr),zf=pc($u.stretch-Un,ri,Nt,e.left),Th=fu($u.fixed-Ii,Ji,$u.stretch,Kr),ed=pc(hl.stretch-gi,yi,Ut,e.top),Zf=fu(hl.fixed-Wi,ja,hl.stretch,qr),iu=new B(Nl,af),Uf=new B(zf,af),xh=new B(zf,ed),Lu=new B(Nl,ed),cl=new B(el/Q,gf/Q),sl=new B(Th/Q,Zf/Q),Wu=i*Math.PI/180;if(Wu){var td=Math.sin(Wu),Qf=Math.cos(Wu),Rc=[Qf,-td,td,Qf];iu._matMult(Rc),Uf._matMult(Rc),Lu._matMult(Rc),xh._matMult(Rc)}var $f=pu.stretch+pu.fixed,rd=es.stretch+es.fixed;return{tl:iu,tr:Uf,bl:Lu,br:xh,tex:{x:j.paddedRect.x+1+$f,y:j.paddedRect.y+1+rd,w:$u.stretch+$u.fixed-$f,h:hl.stretch+hl.fixed-rd},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:cl,pixelOffsetBR:sl,minFontScaleX:Ji/Q/Nt,minFontScaleY:ja/Q/Ut,isSDF:l}};if(y&&(j.stretchX||j.stretchY))for(var ea=lh(qt,dn,Kr),bo=lh(lr,cn,qr),Eo=0;Eo<ea.length-1;Eo++)for(var Ja=ea[Eo],Ss=ea[Eo+1],Is=0;Is<bo.length-1;Is++)P.push(la(Ja,bo[Is],Ss,bo[Is+1]));else P.push(la({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:we+1},{fixed:0,stretch:ut+1}));return P}function mf(e,i,l){for(var y=0,P=0,j=e;P<j.length;P+=1){var Q=j[P];y+=Math.max(i,Math.min(l,Q[1]))-Math.max(i,Math.min(l,Q[0]))}return y}function lh(e,i,l){for(var y=[{fixed:-1,stretch:0}],P=0,j=e;P<j.length;P+=1){var Q=j[P],we=Q[0],ut=Q[1],Nt=y[y.length-1];y.push({fixed:we-Nt.stretch,stretch:Nt.stretch}),y.push({fixed:we-Nt.stretch,stretch:Nt.stretch+(ut-we)})}return y.push({fixed:i+1,stretch:l}),y}function pc(e,i,l,y){return e/i*l+y}function fu(e,i,l,y){return e-i*l/y}var wf=function(e,i,l,y,P,j,Q,we,ut,Nt){if(this.boxStartIndex=e.length,ut){var Ut=j.top,qt=j.bottom,lr=j.collisionPadding;lr&&(Ut-=lr[1],qt+=lr[3]);var xr=qt-Ut;xr>0&&(xr=Math.max(10,xr),this.circleDiameter=xr)}else{var Kr=j.top*Q-we,qr=j.bottom*Q+we,dn=j.left*Q-we,cn=j.right*Q+we,Un=j.collisionPadding;if(Un&&(dn-=Un[0]*Q,Kr-=Un[1]*Q,cn+=Un[2]*Q,qr+=Un[3]*Q),Nt){var ri=new B(dn,Kr),gi=new B(cn,Kr),yi=new B(dn,qr),Ii=new B(cn,qr),Ji=Nt*Math.PI/180;ri._rotate(Ji),gi._rotate(Ji),yi._rotate(Ji),Ii._rotate(Ji),dn=Math.min(ri.x,gi.x,yi.x,Ii.x),cn=Math.max(ri.x,gi.x,yi.x,Ii.x),Kr=Math.min(ri.y,gi.y,yi.y,Ii.y),qr=Math.max(ri.y,gi.y,yi.y,Ii.y)}e.emplaceBack(i.x,i.y,dn,Kr,cn,qr,l,y,P)}this.boxEndIndex=e.length},Uu=function(e,i){if(e===void 0&&(e=[]),i===void 0&&(i=qf),this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(var l=(this.length>>1)-1;l>=0;l--)this._down(l)};function qf(e,i){return e<i?-1:e>i?1:0}function js(e,i,l){i===void 0&&(i=1),l===void 0&&(l=!1);for(var y=1/0,P=1/0,j=-1/0,Q=-1/0,we=e[0],ut=0;ut<we.length;ut++){var Nt=we[ut];(!ut||Nt.x<y)&&(y=Nt.x),(!ut||Nt.y<P)&&(P=Nt.y),(!ut||Nt.x>j)&&(j=Nt.x),(!ut||Nt.y>Q)&&(Q=Nt.y)}var Ut=Math.min(j-y,Q-P),qt=Ut/2,lr=new Uu([],Pu);if(Ut===0)return new B(y,P);for(var xr=y;xr<j;xr+=Ut)for(var Kr=P;Kr<Q;Kr+=Ut)lr.push(new Ru(xr+qt,Kr+qt,qt,e));for(var qr=function(Un){for(var ri=0,gi=0,yi=0,Ii=Un[0],Ji=0,Wi=Ii.length,ja=Wi-1;Ji<Wi;ja=Ji++){var Jn=Ii[Ji],la=Ii[ja],ea=Jn.x*la.y-la.x*Jn.y;gi+=(Jn.x+la.x)*ea,yi+=(Jn.y+la.y)*ea,ri+=3*ea}return new Ru(gi/ri,yi/ri,0,Un)}(e),dn=lr.length;lr.length;){var cn=lr.pop();(cn.d>qr.d||!qr.d)&&(qr=cn,l&&console.log("found best %d after %d probes",Math.round(1e4*cn.d)/1e4,dn)),cn.max-qr.d<=i||(lr.push(new Ru(cn.p.x-(qt=cn.h/2),cn.p.y-qt,qt,e)),lr.push(new Ru(cn.p.x+qt,cn.p.y-qt,qt,e)),lr.push(new Ru(cn.p.x-qt,cn.p.y+qt,qt,e)),lr.push(new Ru(cn.p.x+qt,cn.p.y+qt,qt,e)),dn+=4)}return l&&(console.log("num probes: "+dn),console.log("best distance: "+qr.d)),qr.p}function Pu(e,i){return i.max-e.max}function Ru(e,i,l,y){this.p=new B(e,i),this.h=l,this.d=function(P,j){for(var Q=!1,we=1/0,ut=0;ut<j.length;ut++)for(var Nt=j[ut],Ut=0,qt=Nt.length,lr=qt-1;Ut<qt;lr=Ut++){var xr=Nt[Ut],Kr=Nt[lr];xr.y>P.y!=Kr.y>P.y&&P.x<(Kr.x-xr.x)*(P.y-xr.y)/(Kr.y-xr.y)+xr.x&&(Q=!Q),we=Math.min(we,Of(P,xr,Kr))}return(Q?1:-1)*Math.sqrt(we)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}Uu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Uu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),e}},Uu.prototype.peek=function(){return this.data[0]},Uu.prototype._up=function(e){for(var i=this.data,l=this.compare,y=i[e];e>0;){var P=e-1>>1,j=i[P];if(l(y,j)>=0)break;i[e]=j,e=P}i[e]=y},Uu.prototype._down=function(e){for(var i=this.data,l=this.compare,y=this.length>>1,P=i[e];e<y;){var j=1+(e<<1),Q=i[j],we=j+1;if(we<this.length&&l(i[we],Q)<0&&(j=we,Q=i[we]),l(Q,P)>=0)break;i[e]=Q,e=j}i[e]=P};var nf=Number.POSITIVE_INFINITY;function pd(e,i){return i[1]!==nf?function(l,y,P){var j=0,Q=0;switch(y=Math.abs(y),P=Math.abs(P),l){case"top-right":case"top-left":case"top":Q=P-7;break;case"bottom-right":case"bottom-left":case"bottom":Q=7-P}switch(l){case"top-right":case"bottom-right":case"right":j=-y;break;case"top-left":case"bottom-left":case"left":j=y}return[j,Q]}(e,i[0],i[1]):function(l,y){var P=0,j=0;y<0&&(y=0);var Q=y/Math.sqrt(2);switch(l){case"top-right":case"top-left":j=Q-7;break;case"bottom-right":case"bottom-left":j=7-Q;break;case"bottom":j=7-y;break;case"top":j=y-7}switch(l){case"top-right":case"bottom-right":P=-Q;break;case"top-left":case"bottom-left":P=Q;break;case"left":P=y;break;case"right":P=-y}return[P,j]}(e,i[0])}function w(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function V(e,i,l,y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr){var qr=function(gi,yi,Ii,Ji,Wi,ja,Jn,la){for(var ea=Ji.layout.get("text-rotate").evaluate(ja,{})*Math.PI/180,bo=[],Eo=0,Ja=yi.positionedLines;Eo<Ja.length;Eo+=1)for(var Ss=Ja[Eo],Is=0,pu=Ss.positionedGlyphs;Is<pu.length;Is+=1){var es=pu[Is];if(es.rect){var $u=es.rect||{},hl=4,Nl=!0,el=1,af=0,gf=(Wi||la)&&es.vertical,zf=es.metrics.advance*es.scale/2;if(la&&yi.verticalizable&&(af=Ss.lineOffset/2-(es.imageName?-(24-es.metrics.width*es.scale)/2:24*(es.scale-1))),es.imageName){var Th=Jn[es.imageName];Nl=Th.sdf,hl=1/(el=Th.pixelRatio)}var ed=Wi?[es.x+zf,es.y]:[0,0],Zf=Wi?[0,0]:[es.x+zf+Ii[0],es.y+Ii[1]-af],iu=[0,0];gf&&(iu=Zf,Zf=[0,0]);var Uf=(es.metrics.left-hl)*es.scale-zf+Zf[0],xh=(-es.metrics.top-hl)*es.scale+Zf[1],Lu=Uf+$u.w*es.scale/el,cl=xh+$u.h*es.scale/el,sl=new B(Uf,xh),Wu=new B(Lu,xh),td=new B(Uf,cl),Qf=new B(Lu,cl);if(gf){var Rc=new B(-zf,zf- -17),$f=-Math.PI/2,rd=12-zf,Cl=new B(22-rd,-(es.imageName?rd:0)),Mh=new(Function.prototype.bind.apply(B,[null].concat(iu)));sl._rotateAround($f,Rc)._add(Cl)._add(Mh),Wu._rotateAround($f,Rc)._add(Cl)._add(Mh),td._rotateAround($f,Rc)._add(Cl)._add(Mh),Qf._rotateAround($f,Rc)._add(Cl)._add(Mh)}if(ea){var fd=Math.sin(ea),Wd=Math.cos(ea),oc=[Wd,-fd,fd,Wd];sl._matMult(oc),Wu._matMult(oc),td._matMult(oc),Qf._matMult(oc)}var Ou=new B(0,0),Od=new B(0,0);bo.push({tl:sl,tr:Wu,bl:td,br:Qf,tex:$u,writingMode:yi.writingMode,glyphOffset:ed,sectionIndex:es.sectionIndex,isSDF:Nl,pixelOffsetTL:Ou,pixelOffsetBR:Od,minFontScaleX:0,minFontScaleY:0})}}return bo}(0,l,we,P,j,Q,y,e.allowVerticalPlacement),dn=e.textSizeData,cn=null;dn.kind==="source"?(cn=[128*P.layout.get("text-size").evaluate(Q,{})])[0]>32640&&De(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):dn.kind==="composite"&&((cn=[128*xr.compositeTextSizes[0].evaluate(Q,{},Kr),128*xr.compositeTextSizes[1].evaluate(Q,{},Kr)])[0]>32640||cn[1]>32640)&&De(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,qr,cn,we,j,Q,Nt,i,ut.lineStartIndex,ut.lineLength,lr,Kr);for(var Un=0,ri=Ut;Un<ri.length;Un+=1)qt[ri[Un]]=e.text.placedSymbolArray.length-1;return 4*qr.length}function Ie(e){for(var i in e)return e[i];return null}function se(e,i,l,y){var P=e.compareText;if(i in P){for(var j=P[i],Q=j.length-1;Q>=0;Q--)if(y.dist(j[Q])<l)return!0}else P[i]=[];return P[i].push(y),!1}var st=cu.VectorTileFeature.types,Ue=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xe(e,i,l,y,P,j,Q,we,ut,Nt,Ut,qt,lr){var xr=we?Math.min(32640,Math.round(we[0])):0,Kr=we?Math.min(32640,Math.round(we[1])):0;e.emplaceBack(i,l,Math.round(32*y),Math.round(32*P),j,Q,(xr<<1)+(ut?1:0),Kr,16*Nt,16*Ut,256*qt,256*lr)}function Ve(e,i,l){e.emplaceBack(i.x,i.y,l),e.emplaceBack(i.x,i.y,l),e.emplaceBack(i.x,i.y,l),e.emplaceBack(i.x,i.y,l)}function ct(e){for(var i=0,l=e.sections;i<l.length;i+=1)if(Hh(l[i].text))return!0;return!1}var Ct=function(e){this.layoutVertexArray=new Vo,this.indexArray=new rc,this.programConfigurations=e,this.segments=new Or,this.dynamicLayoutVertexArray=new qo,this.opacityVertexArray=new du,this.placedSymbolArray=new E};Ct.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ct.prototype.upload=function(e,i,l,y){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,vp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Ue,!0),this.opacityVertexBuffer.itemSize=1),(l||y)&&this.programConfigurations.upload(e))},Ct.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ao("SymbolBuffers",Ct);var Bt=function(e,i,l){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new l,this.segments=new Or,this.collisionVertexArray=new df};Bt.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,mp.members,!0)},Bt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ao("CollisionBuffers",Bt);var kt=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(j){return j.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yu([]),this.placementViewportMatrix=yu([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yo(this.zoom,i["text-size"]),this.iconSizeData=yo(this.zoom,i["icon-size"]);var l=this.layers[0].layout,y=l.get("symbol-sort-key"),P=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(function(j){return Ya[j]})),this.stateDependentLayerIds=this.layers.filter(function(j){return j.isStateDependent()}).map(function(j){return j.id}),this.sourceID=e.sourceID};kt.prototype.createArrays=function(){this.text=new Ct(new _s(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ct(new _s(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new ze,this.lineVertexArray=new gt,this.symbolInstances=new Ce},kt.prototype.calculateGlyphDependencies=function(e,i,l,y,P){for(var j=0;j<e.length;j++)if(i[e.charCodeAt(j)]=!0,(l||y)&&P){var Q=Ah[e.charAt(j)];Q&&(i[Q.charCodeAt(0)]=!0)}},kt.prototype.populate=function(e,i,l){var y=this.layers[0],P=y.layout,j=P.get("text-font"),Q=P.get("text-field"),we=P.get("icon-image"),ut=(Q.value.kind!=="constant"||Q.value.value instanceof ha&&!Q.value.value.isEmpty()||Q.value.value.toString().length>0)&&(j.value.kind!=="constant"||j.value.value.length>0),Nt=we.value.kind!=="constant"||!!we.value.value||Object.keys(we.parameters).length>0,Ut=P.get("symbol-sort-key");if(this.features=[],ut||Nt){for(var qt=i.iconDependencies,lr=i.glyphDependencies,xr=i.availableImages,Kr=new Ks(this.zoom),qr=0,dn=e;qr<dn.length;qr+=1){var cn=dn[qr],Un=cn.feature,ri=cn.id,gi=cn.index,yi=cn.sourceLayerIndex,Ii=y._featureFilter.needGeometry,Ji=Ju(Un,Ii);if(y._featureFilter.filter(Kr,Ji,l)){Ii||(Ji.geometry=Qu(Un));var Wi=void 0;if(ut){var ja=y.getValueAndResolveTokens("text-field",Ji,l,xr),Jn=ha.factory(ja);ct(Jn)&&(this.hasRTLText=!0),(!this.hasRTLText||Vh()==="unavailable"||this.hasRTLText&&gu.isParsed())&&(Wi=gp(Jn,y,Ji))}var la=void 0;if(Nt){var ea=y.getValueAndResolveTokens("icon-image",Ji,l,xr);la=ea instanceof xa?ea:xa.fromString(ea)}if(Wi||la){var bo=this.sortFeaturesByKey?Ut.evaluate(Ji,{},l):void 0;if(this.features.push({id:ri,text:Wi,icon:la,index:gi,sourceLayerIndex:yi,geometry:Ji.geometry,properties:Un.properties,type:st[Un.type],sortKey:bo}),la&&(qt[la.name]=!0),Wi){var Eo=j.evaluate(Ji,{},l).join(","),Ja=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ya.vertical)>=0;for(var Ss=0,Is=Wi.sections;Ss<Is.length;Ss+=1){var pu=Is[Ss];if(pu.image)qt[pu.image.name]=!0;else{var es=Yl(Wi.toString()),$u=pu.fontStack||Eo,hl=lr[$u]=lr[$u]||{};this.calculateGlyphDependencies(pu.text,hl,Ja,this.allowVerticalPlacement,es)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(Nl){var el={},af={},gf=[],zf=0;function Th(Rc){gf.push(Nl[Rc]),zf++}function ed(Rc,$f,rd){var Cl=af[Rc];return delete af[Rc],af[$f]=Cl,gf[Cl].geometry[0].pop(),gf[Cl].geometry[0]=gf[Cl].geometry[0].concat(rd[0]),Cl}function Zf(Rc,$f,rd){var Cl=el[$f];return delete el[$f],el[Rc]=Cl,gf[Cl].geometry[0].shift(),gf[Cl].geometry[0]=rd[0].concat(gf[Cl].geometry[0]),Cl}function iu(Rc,$f,rd){var Cl=rd?$f[0][$f[0].length-1]:$f[0][0];return Rc+":"+Cl.x+":"+Cl.y}for(var Uf=0;Uf<Nl.length;Uf++){var xh=Nl[Uf],Lu=xh.geometry,cl=xh.text?xh.text.toString():null;if(cl){var sl=iu(cl,Lu),Wu=iu(cl,Lu,!0);if(sl in af&&Wu in el&&af[sl]!==el[Wu]){var td=Zf(sl,Wu,Lu),Qf=ed(sl,Wu,gf[td].geometry);delete el[sl],delete af[Wu],af[iu(cl,gf[Qf].geometry,!0)]=Qf,gf[td].geometry=null}else sl in af?ed(sl,Wu,Lu):Wu in el?Zf(sl,Wu,Lu):(Th(Uf),el[sl]=zf-1,af[Wu]=zf-1)}else Th(Uf)}return gf.filter(function(Rc){return Rc.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Nl,el){return Nl.sortKey-el.sortKey})}},kt.prototype.update=function(e,i,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,l),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,l))},kt.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},kt.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},kt.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},kt.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},kt.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},kt.prototype.addToLineVertexArray=function(e,i){var l=this.lineVertexArray.length;if(e.segment!==void 0){for(var y=e.dist(i[e.segment+1]),P=e.dist(i[e.segment]),j={},Q=e.segment+1;Q<i.length;Q++)j[Q]={x:i[Q].x,y:i[Q].y,tileUnitDistanceFromAnchor:y},Q<i.length-1&&(y+=i[Q+1].dist(i[Q]));for(var we=e.segment||0;we>=0;we--)j[we]={x:i[we].x,y:i[we].y,tileUnitDistanceFromAnchor:P},we>0&&(P+=i[we-1].dist(i[we]));for(var ut=0;ut<i.length;ut++){var Nt=j[ut];this.lineVertexArray.emplaceBack(Nt.x,Nt.y,Nt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}},kt.prototype.addSymbols=function(e,i,l,y,P,j,Q,we,ut,Nt,Ut,qt){for(var lr=e.indexArray,xr=e.layoutVertexArray,Kr=e.segments.prepareSegment(4*i.length,xr,lr,this.canOverlap?j.sortKey:void 0),qr=this.glyphOffsetArray.length,dn=Kr.vertexLength,cn=this.allowVerticalPlacement&&Q===Ya.vertical?Math.PI/2:0,Un=j.text&&j.text.sections,ri=0;ri<i.length;ri++){var gi=i[ri],yi=gi.tl,Ii=gi.tr,Ji=gi.bl,Wi=gi.br,ja=gi.tex,Jn=gi.pixelOffsetTL,la=gi.pixelOffsetBR,ea=gi.minFontScaleX,bo=gi.minFontScaleY,Eo=gi.glyphOffset,Ja=gi.isSDF,Ss=gi.sectionIndex,Is=Kr.vertexLength,pu=Eo[1];Xe(xr,we.x,we.y,yi.x,pu+yi.y,ja.x,ja.y,l,Ja,Jn.x,Jn.y,ea,bo),Xe(xr,we.x,we.y,Ii.x,pu+Ii.y,ja.x+ja.w,ja.y,l,Ja,la.x,Jn.y,ea,bo),Xe(xr,we.x,we.y,Ji.x,pu+Ji.y,ja.x,ja.y+ja.h,l,Ja,Jn.x,la.y,ea,bo),Xe(xr,we.x,we.y,Wi.x,pu+Wi.y,ja.x+ja.w,ja.y+ja.h,l,Ja,la.x,la.y,ea,bo),Ve(e.dynamicLayoutVertexArray,we,cn),lr.emplaceBack(Is,Is+1,Is+2),lr.emplaceBack(Is+1,Is+2,Is+3),Kr.vertexLength+=4,Kr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Eo[0]),ri!==i.length-1&&Ss===i[ri+1].sectionIndex||e.programConfigurations.populatePaintArrays(xr.length,j,j.index,{},qt,Un&&Un[Ss])}e.placedSymbolArray.emplaceBack(we.x,we.y,qr,this.glyphOffsetArray.length-qr,dn,ut,Nt,we.segment,l?l[0]:0,l?l[1]:0,y[0],y[1],Q,0,!1,0,Ut)},kt.prototype._addCollisionDebugVertex=function(e,i,l,y,P,j){return i.emplaceBack(0,0),e.emplaceBack(l.x,l.y,y,P,Math.round(j.x),Math.round(j.y))},kt.prototype.addCollisionDebugVertices=function(e,i,l,y,P,j,Q){var we=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),ut=we.vertexLength,Nt=P.layoutVertexArray,Ut=P.collisionVertexArray,qt=Q.anchorX,lr=Q.anchorY;this._addCollisionDebugVertex(Nt,Ut,j,qt,lr,new B(e,i)),this._addCollisionDebugVertex(Nt,Ut,j,qt,lr,new B(l,i)),this._addCollisionDebugVertex(Nt,Ut,j,qt,lr,new B(l,y)),this._addCollisionDebugVertex(Nt,Ut,j,qt,lr,new B(e,y)),we.vertexLength+=4;var xr=P.indexArray;xr.emplaceBack(ut,ut+1),xr.emplaceBack(ut+1,ut+2),xr.emplaceBack(ut+2,ut+3),xr.emplaceBack(ut+3,ut),we.primitiveLength+=4},kt.prototype.addDebugCollisionBoxes=function(e,i,l,y){for(var P=e;P<i;P++){var j=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(j.x1,j.y1,j.x2,j.y2,y?this.textCollisionBox:this.iconCollisionBox,j.anchorPoint,l)}},kt.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bt(Wf,wd.members,Zc),this.iconCollisionBox=new Bt(Wf,wd.members,Zc);for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},kt.prototype._deserializeCollisionBoxesForSymbol=function(e,i,l,y,P,j,Q,we,ut){for(var Nt={},Ut=i;Ut<l;Ut++){var qt=e.get(Ut);Nt.textBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},Nt.textFeatureIndex=qt.featureIndex;break}for(var lr=y;lr<P;lr++){var xr=e.get(lr);Nt.verticalTextBox={x1:xr.x1,y1:xr.y1,x2:xr.x2,y2:xr.y2,anchorPointX:xr.anchorPointX,anchorPointY:xr.anchorPointY},Nt.verticalTextFeatureIndex=xr.featureIndex;break}for(var Kr=j;Kr<Q;Kr++){var qr=e.get(Kr);Nt.iconBox={x1:qr.x1,y1:qr.y1,x2:qr.x2,y2:qr.y2,anchorPointX:qr.anchorPointX,anchorPointY:qr.anchorPointY},Nt.iconFeatureIndex=qr.featureIndex;break}for(var dn=we;dn<ut;dn++){var cn=e.get(dn);Nt.verticalIconBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},Nt.verticalIconFeatureIndex=cn.featureIndex;break}return Nt},kt.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}},kt.prototype.hasTextData=function(){return this.text.segments.get().length>0},kt.prototype.hasIconData=function(){return this.icon.segments.get().length>0},kt.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},kt.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},kt.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},kt.prototype.addIndicesForPlacedSymbol=function(e,i){for(var l=e.placedSymbolArray.get(i),y=l.vertexStartIndex+4*l.numGlyphs,P=l.vertexStartIndex;P<y;P+=4)e.indexArray.emplaceBack(P,P+1,P+2),e.indexArray.emplaceBack(P+1,P+2,P+3)},kt.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(e),l=Math.cos(e),y=[],P=[],j=[],Q=0;Q<this.symbolInstances.length;++Q){j.push(Q);var we=this.symbolInstances.get(Q);y.push(0|Math.round(i*we.anchorX+l*we.anchorY)),P.push(we.featureIndex)}return j.sort(function(ut,Nt){return y[ut]-y[Nt]||P[Nt]-P[ut]}),j},kt.prototype.addToSortKeyRanges=function(e,i){var l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})},kt.prototype.sortFeatures=function(e){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,y=this.symbolInstanceIndexes;l<y.length;l+=1){var P=this.symbolInstances.get(y[l]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(j,Q,we){j>=0&&we.indexOf(j)===Q&&i.addIndicesForPlacedSymbol(i.text,j)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ao("SymbolBucket",kt,{omit:["layers","collisionBoxArray","features","compareText"]}),kt.MAX_GLYPHS=65535,kt.addDynamicAttributes=Ve;var Jt=new mu({"symbol-placement":new oo(fr.layout_symbol["symbol-placement"]),"symbol-spacing":new oo(fr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oo(fr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Do(fr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oo(fr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oo(fr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new oo(fr.layout_symbol["icon-ignore-placement"]),"icon-optional":new oo(fr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oo(fr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Do(fr.layout_symbol["icon-size"]),"icon-text-fit":new oo(fr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oo(fr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Do(fr.layout_symbol["icon-image"]),"icon-rotate":new Do(fr.layout_symbol["icon-rotate"]),"icon-padding":new oo(fr.layout_symbol["icon-padding"]),"icon-keep-upright":new oo(fr.layout_symbol["icon-keep-upright"]),"icon-offset":new Do(fr.layout_symbol["icon-offset"]),"icon-anchor":new Do(fr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oo(fr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oo(fr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oo(fr.layout_symbol["text-rotation-alignment"]),"text-field":new Do(fr.layout_symbol["text-field"]),"text-font":new Do(fr.layout_symbol["text-font"]),"text-size":new Do(fr.layout_symbol["text-size"]),"text-max-width":new Do(fr.layout_symbol["text-max-width"]),"text-line-height":new oo(fr.layout_symbol["text-line-height"]),"text-letter-spacing":new Do(fr.layout_symbol["text-letter-spacing"]),"text-justify":new Do(fr.layout_symbol["text-justify"]),"text-radial-offset":new Do(fr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oo(fr.layout_symbol["text-variable-anchor"]),"text-anchor":new Do(fr.layout_symbol["text-anchor"]),"text-max-angle":new oo(fr.layout_symbol["text-max-angle"]),"text-writing-mode":new oo(fr.layout_symbol["text-writing-mode"]),"text-rotate":new Do(fr.layout_symbol["text-rotate"]),"text-padding":new oo(fr.layout_symbol["text-padding"]),"text-keep-upright":new oo(fr.layout_symbol["text-keep-upright"]),"text-transform":new Do(fr.layout_symbol["text-transform"]),"text-offset":new Do(fr.layout_symbol["text-offset"]),"text-allow-overlap":new oo(fr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new oo(fr.layout_symbol["text-ignore-placement"]),"text-optional":new oo(fr.layout_symbol["text-optional"])}),Ft={paint:new mu({"icon-opacity":new Do(fr.paint_symbol["icon-opacity"]),"icon-color":new Do(fr.paint_symbol["icon-color"]),"icon-halo-color":new Do(fr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Do(fr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Do(fr.paint_symbol["icon-halo-blur"]),"icon-translate":new oo(fr.paint_symbol["icon-translate"]),"icon-translate-anchor":new oo(fr.paint_symbol["icon-translate-anchor"]),"text-opacity":new Do(fr.paint_symbol["text-opacity"]),"text-color":new Do(fr.paint_symbol["text-color"],{runtimeType:ta,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Do(fr.paint_symbol["text-halo-color"]),"text-halo-width":new Do(fr.paint_symbol["text-halo-width"]),"text-halo-blur":new Do(fr.paint_symbol["text-halo-blur"]),"text-translate":new oo(fr.paint_symbol["text-translate"]),"text-translate-anchor":new oo(fr.paint_symbol["text-translate-anchor"])}),layout:Jt},rr=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Xi,this.defaultValue=e};rr.prototype.evaluate=function(e){if(e.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},rr.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},rr.prototype.outputDefined=function(){return!1},rr.prototype.serialize=function(){return null},ao("FormatSectionOverride",rr,{omit:["defaultValue"]});var Xt=function(e){function i(l){e.call(this,l,Ft)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.recalculate=function(l,y){if(e.prototype.recalculate.call(this,l,y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var j=[],Q=0,we=P;Q<we.length;Q+=1){var ut=we[Q];j.indexOf(ut)<0&&j.push(ut)}this.layout._values["text-writing-mode"]=j}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(l,y,P,j){var Q=this.layout.get(l).evaluate(y,{},P,j),we=this._unevaluatedLayout._values[l];return we.isDataDriven()||cf(we.value)||!Q?Q:function(ut,Nt){return Nt.replace(/{([^{}]+)}/g,function(Ut,qt){return qt in ut?String(ut[qt]):""})}(y.properties,Q)},i.prototype.createBucket=function(l){return new kt(l)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var l=0,y=Ft.paint.overridableProperties;l<y.length;l+=1){var P=y[l];if(i.hasPaintOverride(this.layout,P)){var j,Q=this.paint.get(P),we=new rr(Q),ut=new Eh(we,Q.property.specification);j=Q.value.kind==="constant"||Q.value.kind==="source"?new _f("source",ut):new kc("composite",ut,Q.value.zoomStops,Q.value._interpolationType),this.paint._values[P]=new Ql(Q.property,j,Q.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(l,y,P){return!(!this.layout||y.isDataDriven()||P.isDataDriven())&&i.hasPaintOverride(this.layout,l)},i.hasPaintOverride=function(l,y){var P=l.get("text-field"),j=Ft.paint.properties[y],Q=!1,we=function(Ut){for(var qt=0,lr=Ut;qt<lr.length;qt+=1)if(j.overrides&&j.overrides.hasOverride(lr[qt]))return void(Q=!0)};if(P.value.kind==="constant"&&P.value.value instanceof ha)we(P.value.value.sections);else if(P.value.kind==="source"){var ut=function(Ut){Q||(Ut instanceof no&&Po(Ut.value)===uo?we(Ut.value.sections):Ut instanceof Wo?we(Ut.sections):Ut.eachChild(ut))},Nt=P.value;Nt._styleExpression&&ut(Nt._styleExpression.expression)}return Q},i}(Ku),pr={paint:new mu({"background-color":new oo(fr.paint_background["background-color"]),"background-pattern":new Jl(fr.paint_background["background-pattern"]),"background-opacity":new oo(fr.paint_background["background-opacity"])})},yr=function(e){function i(l){e.call(this,l,pr)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Ku),Ur={paint:new mu({"raster-opacity":new oo(fr.paint_raster["raster-opacity"]),"raster-hue-rotate":new oo(fr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oo(fr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oo(fr.paint_raster["raster-brightness-max"]),"raster-saturation":new oo(fr.paint_raster["raster-saturation"]),"raster-contrast":new oo(fr.paint_raster["raster-contrast"]),"raster-resampling":new oo(fr.paint_raster["raster-resampling"]),"raster-fade-duration":new oo(fr.paint_raster["raster-fade-duration"])})},xn=function(e){function i(l){e.call(this,l,Ur)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Ku),mn=function(e){function i(l){e.call(this,l,{}),this.implementation=l}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(l){this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},i.prototype.onRemove=function(l){this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},i}(Ku),Mn={circle:mh,heatmap:Xr,hillshade:Sn,fill:_i,"fill-extrusion":Wl,line:up,symbol:Xt,background:yr,raster:xn},Pn=$.HTMLImageElement,Gn=$.HTMLCanvasElement,ti=$.HTMLVideoElement,ii=$.ImageData,b=$.ImageBitmap,A=function(e,i,l,y){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(i,y)};A.prototype.update=function(e,i,l){var y=e.width,P=e.height,j=!(this.size&&this.size[0]===y&&this.size[1]===P||l),Q=this.context,we=Q.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),we.bindTexture(we.TEXTURE_2D,this.texture),Q.pixelStoreUnpackFlipY.set(!1),Q.pixelStoreUnpack.set(1),Q.pixelStoreUnpackPremultiplyAlpha.set(this.format===we.RGBA&&(!i||i.premultiply!==!1)),j)this.size=[y,P],e instanceof Pn||e instanceof Gn||e instanceof ti||e instanceof ii||b&&e instanceof b?we.texImage2D(we.TEXTURE_2D,0,this.format,this.format,we.UNSIGNED_BYTE,e):we.texImage2D(we.TEXTURE_2D,0,this.format,y,P,0,this.format,we.UNSIGNED_BYTE,e.data);else{var ut=l||{x:0,y:0},Nt=ut.x,Ut=ut.y;e instanceof Pn||e instanceof Gn||e instanceof ti||e instanceof ii||b&&e instanceof b?we.texSubImage2D(we.TEXTURE_2D,0,Nt,Ut,we.RGBA,we.UNSIGNED_BYTE,e):we.texSubImage2D(we.TEXTURE_2D,0,Nt,Ut,y,P,we.RGBA,we.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&we.generateMipmap(we.TEXTURE_2D)},A.prototype.bind=function(e,i,l){var y=this.context.gl;y.bindTexture(y.TEXTURE_2D,this.texture),l!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(l=y.LINEAR),e!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,e),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,l||e),this.filter=e),i!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,i),this.wrap=i)},A.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},A.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var I=function(e){var i=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};I.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},I.prototype.remove=function(){delete this._channel,this._callback=function(){}};var T=function(e,i,l){this.target=e,this.parent=i,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},jt(["receive","process"],this),this.invoker=new I(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ce()?e:$};function H(e,i,l){var y=2*Math.PI*6378137/256/Math.pow(2,l);return[e*y-2*Math.PI*6378137/2,i*y-2*Math.PI*6378137/2]}T.prototype.send=function(e,i,l,y,P){var j=this;P===void 0&&(P=!1);var Q=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[Q]=l);var we=Me(this.globalScope)?void 0:[];return this.target.postMessage({id:Q,type:e,hasCallback:!!l,targetMapId:y,mustQueue:P,sourceMapId:this.mapId,data:Vl(i,we)},we),{cancel:function(){l&&delete j.callbacks[Q],j.target.postMessage({id:Q,type:"<cancel>",targetMapId:y,sourceMapId:j.mapId})}}},T.prototype.receive=function(e){var i=e.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[l];var y=this.cancelCallbacks[l];delete this.cancelCallbacks[l],y&&y()}else ce()||i.mustQueue?(this.tasks[l]=i,this.taskQueue.push(l),this.invoker.trigger()):this.processTask(l,i)},T.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),i=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(e,i)}},T.prototype.processTask=function(e,i){var l=this;if(i.type==="<response>"){var y=this.callbacks[e];delete this.callbacks[e],y&&(i.error?y(Ll(i.error)):y(null,Ll(i.data)))}else{var P=!1,j=Me(this.globalScope)?void 0:[],Q=i.hasCallback?function(Ut,qt){P=!0,delete l.cancelCallbacks[e],l.target.postMessage({id:e,type:"<response>",sourceMapId:l.mapId,error:Ut?Vl(Ut):null,data:Vl(qt,j)},j)}:function(Ut){P=!0},we=null,ut=Ll(i.data);if(this.parent[i.type])we=this.parent[i.type](i.sourceMapId,ut,Q);else if(this.parent.getWorkerSource){var Nt=i.type.split(".");we=this.parent.getWorkerSource(i.sourceMapId,Nt[0],ut.source)[Nt[1]](ut,Q)}else Q(new Error("Could not find function "+i.type));!P&&we&&we.cancel&&(this.cancelCallbacks[e]=we.cancel)}},T.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var te=function(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};te.prototype.setNorthEast=function(e){return this._ne=e instanceof Ae?new Ae(e.lng,e.lat):Ae.convert(e),this},te.prototype.setSouthWest=function(e){return this._sw=e instanceof Ae?new Ae(e.lng,e.lat):Ae.convert(e),this},te.prototype.extend=function(e){var i,l,y=this._sw,P=this._ne;if(e instanceof Ae)i=e,l=e;else{if(!(e instanceof te))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(te.convert(e)):this.extend(Ae.convert(e)):this;if(l=e._ne,!(i=e._sw)||!l)return this}return y||P?(y.lng=Math.min(i.lng,y.lng),y.lat=Math.min(i.lat,y.lat),P.lng=Math.max(l.lng,P.lng),P.lat=Math.max(l.lat,P.lat)):(this._sw=new Ae(i.lng,i.lat),this._ne=new Ae(l.lng,l.lat)),this},te.prototype.getCenter=function(){return new Ae((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},te.prototype.getSouthWest=function(){return this._sw},te.prototype.getNorthEast=function(){return this._ne},te.prototype.getNorthWest=function(){return new Ae(this.getWest(),this.getNorth())},te.prototype.getSouthEast=function(){return new Ae(this.getEast(),this.getSouth())},te.prototype.getWest=function(){return this._sw.lng},te.prototype.getSouth=function(){return this._sw.lat},te.prototype.getEast=function(){return this._ne.lng},te.prototype.getNorth=function(){return this._ne.lat},te.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},te.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},te.prototype.isEmpty=function(){return!(this._sw&&this._ne)},te.prototype.contains=function(e){var i=Ae.convert(e),l=i.lng,y=i.lat,P=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&P},te.convert=function(e){return!e||e instanceof te?e:new te(e)};var Ae=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid LngLat object: ("+e+", "+i+")");if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ae.prototype.wrap=function(){return new Ae(Le(this.lng,-180,180),this.lat)},Ae.prototype.toArray=function(){return[this.lng,this.lat]},Ae.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ae.prototype.distanceTo=function(e){var i=Math.PI/180,l=this.lat*i,y=e.lat*i,P=Math.sin(l)*Math.sin(y)+Math.cos(l)*Math.cos(y)*Math.cos((e.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(P,1))},Ae.prototype.toBounds=function(e){e===void 0&&(e=0);var i=360*e/40075017,l=i/Math.cos(Math.PI/180*this.lat);return new te(new Ae(this.lng-l,this.lat-i),new Ae(this.lng+l,this.lat+i))},Ae.convert=function(e){if(e instanceof Ae)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ae(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ae(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var qe=2*Math.PI*63710088e-1;function Tt(e){return qe*Math.cos(e*Math.PI/180)}function Wt(e){return(180+e)/360}function vr(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Fr(e,i){return e/Tt(i)}function en(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var zn=function(e,i,l){l===void 0&&(l=0),this.x=+e,this.y=+i,this.z=+l};zn.fromLngLat=function(e,i){i===void 0&&(i=0);var l=Ae.convert(e);return new zn(Wt(l.lng),vr(l.lat),Fr(i,l.lat))},zn.prototype.toLngLat=function(){return new Ae(360*this.x-180,en(this.y))},zn.prototype.toAltitude=function(){return this.z*Tt(en(this.y))},zn.prototype.meterInMercatorCoordinateUnits=function(){return 1/qe*(e=en(this.y),1/Math.cos(e*Math.PI/180));var e};var ei=function(e,i,l){this.z=e,this.x=i,this.y=l,this.key=Xn(0,e,e,i,l)};ei.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ei.prototype.url=function(e,i){var l,y,P,j,Q,we=(y=this.y,P=this.z,j=H(256*(l=this.x),256*(y=Math.pow(2,P)-y-1),P),Q=H(256*(l+1),256*(y+1),P),j[0]+","+j[1]+","+Q[0]+","+Q[1]),ut=function(Nt,Ut,qt){for(var lr,xr="",Kr=Nt;Kr>0;Kr--)xr+=(Ut&(lr=1<<Kr-1)?1:0)+(qt&lr?2:0);return xr}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ut).replace("{bbox-epsg-3857}",we)},ei.prototype.getTilePoint=function(e){var i=Math.pow(2,this.z);return new B(8192*(e.x*i-this.x),8192*(e.y*i-this.y))},ei.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Qn=function(e,i){this.wrap=e,this.canonical=i,this.key=Xn(e,i.z,i.z,i.x,i.y)},_n=function(e,i,l,y,P){this.overscaledZ=e,this.wrap=i,this.canonical=new ei(l,+y,+P),this.key=Xn(i,e,l,y,P)};function Xn(e,i,l,y,P){(e*=2)<0&&(e=-1*e-1);var j=1<<l;return(j*j*e+j*P+y).toString(36)+l.toString(36)+i.toString(36)}_n.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},_n.prototype.scaledTo=function(e){var i=this.canonical.z-e;return e>this.canonical.z?new _n(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _n(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)},_n.prototype.calculateScaledKey=function(e,i){var l=this.canonical.z-e;return e>this.canonical.z?Xn(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y):Xn(this.wrap*+i,e,e,this.canonical.x>>l,this.canonical.y>>l)},_n.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var i=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i},_n.prototype.children=function(e){if(this.overscaledZ>=e)return[new _n(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,l=2*this.canonical.x,y=2*this.canonical.y;return[new _n(i,this.wrap,i,l,y),new _n(i,this.wrap,i,l+1,y),new _n(i,this.wrap,i,l,y+1),new _n(i,this.wrap,i,l+1,y+1)]},_n.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},_n.prototype.wrapped=function(){return new _n(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},_n.prototype.unwrapTo=function(e){return new _n(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},_n.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},_n.prototype.toUnwrapped=function(){return new Qn(this.wrap,this.canonical)},_n.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},_n.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new zn(e.x-this.wrap,e.y))},ao("CanonicalTileID",ei),ao("OverscaledTileID",_n,{omit:["posMatrix"]});var ai=function(e,i,l){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return De('"'+l+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var y=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=l||"mapbox";for(var P=0;P<y;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(y,P)]=this.data[this._idx(y-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,y)]=this.data[this._idx(P,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)]};ai.prototype.get=function(e,i){var l=new Uint8Array(this.data.buffer),y=4*this._idx(e,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(l[y],l[y+1],l[y+2])},ai.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ai.prototype._idx=function(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)},ai.prototype._unpackMapbox=function(e,i,l){return(256*e*256+256*i+l)/10-1e4},ai.prototype._unpackTerrarium=function(e,i,l){return 256*e+i+l/256-32768},ai.prototype.getPixels=function(){return new St({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ai.prototype.backfillBorder=function(e,i,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var y=i*this.dim,P=i*this.dim+this.dim,j=l*this.dim,Q=l*this.dim+this.dim;switch(i){case-1:y=P-1;break;case 1:P=y+1}switch(l){case-1:j=Q-1;break;case 1:Q=j+1}for(var we=-i*this.dim,ut=-l*this.dim,Nt=j;Nt<Q;Nt++)for(var Ut=y;Ut<P;Ut++)this.data[this._idx(Ut,Nt)]=e.data[this._idx(Ut+we,Nt+ut)]},ao("DEMData",ai);var nn=function(e){this._stringToNumber={},this._numberToString=[];for(var i=0;i<e.length;i++){var l=e[i];this._stringToNumber[l]=i,this._numberToString[i]=l}};nn.prototype.encode=function(e){return this._stringToNumber[e]},nn.prototype.decode=function(e){return this._numberToString[e]};var hi=function(e,i,l,y,P){this.type="Feature",this._vectorTileFeature=e,e._z=i,e._x=l,e._y=y,this.properties=e.properties,this.id=P},vi={geometry:{configurable:!0}};vi.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},vi.geometry.set=function(e){this._geometry=e},hi.prototype.toJSON=function(){var e={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(e[i]=this[i]);return e},Object.defineProperties(hi.prototype,vi);var Li=function(){this.state={},this.stateChanges={},this.deletedStates={}};Li.prototype.updateState=function(e,i,l){var y=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][y]=this.stateChanges[e][y]||{},Se(this.stateChanges[e][y],l),this.deletedStates[e]===null)for(var P in this.deletedStates[e]={},this.state[e])P!==y&&(this.deletedStates[e][P]=null);else if(this.deletedStates[e]&&this.deletedStates[e][y]===null)for(var j in this.deletedStates[e][y]={},this.state[e][y])l[j]||(this.deletedStates[e][y][j]=null);else for(var Q in l)this.deletedStates[e]&&this.deletedStates[e][y]&&this.deletedStates[e][y][Q]===null&&delete this.deletedStates[e][y][Q]},Li.prototype.removeFeatureState=function(e,i,l){if(this.deletedStates[e]!==null){var y=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},l&&i!==void 0)this.deletedStates[e][y]!==null&&(this.deletedStates[e][y]=this.deletedStates[e][y]||{},this.deletedStates[e][y][l]=null);else if(i!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][y])for(l in this.deletedStates[e][y]={},this.stateChanges[e][y])this.deletedStates[e][y][l]=null;else this.deletedStates[e][y]=null;else this.deletedStates[e]=null}},Li.prototype.getState=function(e,i){var l=String(i),y=Se({},(this.state[e]||{})[l],(this.stateChanges[e]||{})[l]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var P=this.deletedStates[e][i];if(P===null)return{};for(var j in P)delete y[j]}return y},Li.prototype.initializeTileState=function(e,i){e.setFeatureState(this.state,i)},Li.prototype.coalesceChanges=function(e,i){var l={};for(var y in this.stateChanges){this.state[y]=this.state[y]||{};var P={};for(var j in this.stateChanges[y])this.state[y][j]||(this.state[y][j]={}),Se(this.state[y][j],this.stateChanges[y][j]),P[j]=this.state[y][j];l[y]=P}for(var Q in this.deletedStates){this.state[Q]=this.state[Q]||{};var we={};if(this.deletedStates[Q]===null)for(var ut in this.state[Q])we[ut]={},this.state[Q][ut]={};else for(var Nt in this.deletedStates[Q]){if(this.deletedStates[Q][Nt]===null)this.state[Q][Nt]={};else for(var Ut=0,qt=Object.keys(this.deletedStates[Q][Nt]);Ut<qt.length;Ut+=1)delete this.state[Q][Nt][qt[Ut]];we[Nt]=this.state[Q][Nt]}l[Q]=l[Q]||{},Se(l[Q],we)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(var lr in e)e[lr].setFeatureState(l,i)};var Vi=function(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Rl(8192,16,0),this.grid3D=new Rl(8192,16,0),this.featureIndexArray=new sr,this.promoteId=i};function sa(e,i,l,y,P){return $e(e,function(j,Q){var we=i instanceof fc?i.get(Q):null;return we&&we.evaluate?we.evaluate(l,y,P):we})}function ua(e){for(var i=1/0,l=1/0,y=-1/0,P=-1/0,j=0,Q=e;j<Q.length;j+=1){var we=Q[j];i=Math.min(i,we.x),l=Math.min(l,we.y),y=Math.max(y,we.x),P=Math.max(P,we.y)}return{minX:i,minY:l,maxX:y,maxY:P}}function Lo(e,i){return i-e}Vi.prototype.insert=function(e,i,l,y,P,j){var Q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,y,P);for(var we=j?this.grid3D:this.grid,ut=0;ut<i.length;ut++){for(var Nt=i[ut],Ut=[1/0,1/0,-1/0,-1/0],qt=0;qt<Nt.length;qt++){var lr=Nt[qt];Ut[0]=Math.min(Ut[0],lr.x),Ut[1]=Math.min(Ut[1],lr.y),Ut[2]=Math.max(Ut[2],lr.x),Ut[3]=Math.max(Ut[3],lr.y)}Ut[0]<8192&&Ut[1]<8192&&Ut[2]>=0&&Ut[3]>=0&&we.insert(Q,Ut[0],Ut[1],Ut[2],Ut[3])}},Vi.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new cu.VectorTile(new Cd(this.rawTileData)).layers,this.sourceLayerCoder=new nn(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Vi.prototype.query=function(e,i,l,y){var P=this;this.loadVTLayers();for(var j=e.params||{},Q=8192/e.tileSize/e.scale,we=su(j.filter),ut=e.queryGeometry,Nt=e.queryPadding*Q,Ut=ua(ut),qt=this.grid.query(Ut.minX-Nt,Ut.minY-Nt,Ut.maxX+Nt,Ut.maxY+Nt),lr=ua(e.cameraQueryGeometry),xr=this.grid3D.query(lr.minX-Nt,lr.minY-Nt,lr.maxX+Nt,lr.maxY+Nt,function(gi,yi,Ii,Ji){return function(Wi,ja,Jn,la,ea){for(var bo=0,Eo=Wi;bo<Eo.length;bo+=1){var Ja=Eo[bo];if(ja<=Ja.x&&Jn<=Ja.y&&la>=Ja.x&&ea>=Ja.y)return!0}var Ss=[new B(ja,Jn),new B(ja,ea),new B(la,ea),new B(la,Jn)];if(Wi.length>2){for(var Is=0,pu=Ss;Is<pu.length;Is+=1)if(pf(Wi,pu[Is]))return!0}for(var es=0;es<Wi.length-1;es++)if(oh(Wi[es],Wi[es+1],Ss))return!0;return!1}(e.cameraQueryGeometry,gi-Nt,yi-Nt,Ii+Nt,Ji+Nt)}),Kr=0,qr=xr;Kr<qr.length;Kr+=1)qt.push(qr[Kr]);qt.sort(Lo);for(var dn,cn={},Un=function(gi){var yi=qt[gi];if(yi!==dn){dn=yi;var Ii=P.featureIndexArray.get(yi),Ji=null;P.loadMatchingFeature(cn,Ii.bucketIndex,Ii.sourceLayerIndex,Ii.featureIndex,we,j.layers,j.availableImages,i,l,y,function(Wi,ja,Jn){return Ji||(Ji=Qu(Wi)),ja.queryIntersectsFeature(ut,Wi,Jn,Ji,P.z,e.transform,Q,e.pixelPosMatrix)})}},ri=0;ri<qt.length;ri++)Un(ri);return cn},Vi.prototype.loadMatchingFeature=function(e,i,l,y,P,j,Q,we,ut,Nt,Ut){var qt=this.bucketLayerIDs[i];if(!j||function(Wi,ja){for(var Jn=0;Jn<Wi.length;Jn++)if(ja.indexOf(Wi[Jn])>=0)return!0;return!1}(j,qt)){var lr=this.sourceLayerCoder.decode(l),xr=this.vtLayers[lr].feature(y);if(P.needGeometry){var Kr=Ju(xr,!0);if(!P.filter(new Ks(this.tileID.overscaledZ),Kr,this.tileID.canonical))return}else if(!P.filter(new Ks(this.tileID.overscaledZ),xr))return;for(var qr=this.getId(xr,lr),dn=0;dn<qt.length;dn++){var cn=qt[dn];if(!(j&&j.indexOf(cn)<0)){var Un=we[cn];if(Un){var ri={};qr!==void 0&&Nt&&(ri=Nt.getState(Un.sourceLayer||"_geojsonTileLayer",qr));var gi=Se({},ut[cn]);gi.paint=sa(gi.paint,Un.paint,xr,ri,Q),gi.layout=sa(gi.layout,Un.layout,xr,ri,Q);var yi=!Ut||Ut(xr,Un,ri);if(yi){var Ii=new hi(xr,this.z,this.x,this.y,qr);Ii.layer=gi;var Ji=e[cn];Ji===void 0&&(Ji=e[cn]=[]),Ji.push({featureIndex:y,feature:Ii,intersectionZ:yi})}}}}}},Vi.prototype.lookupSymbolFeatures=function(e,i,l,y,P,j,Q,we){var ut={};this.loadVTLayers();for(var Nt=su(P),Ut=0,qt=e;Ut<qt.length;Ut+=1)this.loadMatchingFeature(ut,l,y,qt[Ut],Nt,j,Q,we,i);return ut},Vi.prototype.hasLayer=function(e){for(var i=0,l=this.bucketLayerIDs;i<l.length;i+=1)for(var y=0,P=l[i];y<P.length;y+=1)if(e===P[y])return!0;return!1},Vi.prototype.getId=function(e,i){var l=e.id;return this.promoteId&&typeof(l=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(l=Number(l)),l},ao("FeatureIndex",Vi,{omit:["rawTileData","sourceLayerCoder"]});var Fa=function(e,i){this.tileID=e,this.uid=at(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Fa.prototype.registerFadeDuration=function(e){var i=e+this.timeAdded;i<fe.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},Fa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Fa.prototype.loadVectorData=function(e,i,l){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var y in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(Nt,Ut){var qt={};if(!Ut)return qt;for(var lr=function(){var qr=Kr[xr],dn=qr.layerIds.map(function(ri){return Ut.getLayer(ri)}).filter(Boolean);if(dn.length!==0){qr.layers=dn,qr.stateDependentLayerIds&&(qr.stateDependentLayers=qr.stateDependentLayerIds.map(function(ri){return dn.filter(function(gi){return gi.id===ri})[0]}));for(var cn=0,Un=dn;cn<Un.length;cn+=1)qt[Un[cn].id]=qr}},xr=0,Kr=Nt;xr<Kr.length;xr+=1)lr();return qt}(e.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[y];if(P instanceof kt){if(this.hasSymbolBuckets=!0,!l)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var j in this.buckets){var Q=this.buckets[j];if(Q instanceof kt&&Q.hasRTLText){this.hasRTLText=!0,gu.isLoading()||gu.isLoaded()||Vh()!=="deferred"||ql();break}}for(var we in this.queryPadding=0,this.buckets){var ut=this.buckets[we];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(we).queryRadius(ut))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new m},Fa.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Fa.prototype.getBucket=function(e){return this.buckets[e.id]},Fa.prototype.upload=function(e){for(var i in this.buckets){var l=this.buckets[i];l.uploadPending()&&l.upload(e)}var y=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new A(e,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new A(e,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)},Fa.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Fa.prototype.queryRenderedFeatures=function(e,i,l,y,P,j,Q,we,ut,Nt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:P,scale:j,tileSize:this.tileSize,pixelPosMatrix:Nt,transform:we,params:Q,queryPadding:this.queryPadding*ut},e,i,l):{}},Fa.prototype.querySourceFeatures=function(e,i){var l=this.latestFeatureIndex;if(l&&l.rawTileData){var y=l.loadVTLayers(),P=i?i.sourceLayer:"",j=y._geojsonTileLayer||y[P];if(j)for(var Q=su(i&&i.filter),we=this.tileID.canonical,ut=we.z,Nt=we.x,Ut=we.y,qt={z:ut,x:Nt,y:Ut},lr=0;lr<j.length;lr++){var xr=j.feature(lr);if(Q.needGeometry){var Kr=Ju(xr,!0);if(!Q.filter(new Ks(this.tileID.overscaledZ),Kr,this.tileID.canonical))continue}else if(!Q.filter(new Ks(this.tileID.overscaledZ),xr))continue;var qr=l.getId(xr,P),dn=new hi(xr,ut,Nt,Ut,qr);dn.tile=qt,e.push(dn)}}},Fa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Fa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Fa.prototype.setExpiryData=function(e){var i=this.expirationTime;if(e.cacheControl){var l=je(e.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var y=Date.now(),P=!1;if(this.expirationTime>y)P=!1;else if(i)if(this.expirationTime<i)P=!0;else{var j=this.expirationTime-i;j?this.expirationTime=y+Math.max(j,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Fa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Fa.prototype.setFeatureState=function(e,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var l=this.latestFeatureIndex.loadVTLayers();for(var y in this.buckets)if(i.style.hasLayer(y)){var P=this.buckets[y],j=P.layers[0].sourceLayer||"_geojsonTileLayer",Q=l[j],we=e[j];if(Q&&we&&Object.keys(we).length!==0){P.update(we,Q,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ut=i&&i.style&&i.style.getLayer(y);ut&&(this.queryPadding=Math.max(this.queryPadding,ut.queryRadius(P)))}}}},Fa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Fa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<fe.now()},Fa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Fa.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=fe.now()+e},Fa.prototype.setDependencies=function(e,i){for(var l={},y=0,P=i;y<P.length;y+=1)l[P[y]]=!0;this.dependencies[e]=l},Fa.prototype.hasDependency=function(e,i){for(var l=0,y=e;l<y.length;l+=1){var P=this.dependencies[y[l]];if(P){for(var j=0,Q=i;j<Q.length;j+=1)if(P[Q[j]])return!0}}return!1};var go=$.performance,qs=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},go.mark(this._marks.start)};qs.prototype.finish=function(){go.mark(this._marks.end);var e=go.getEntriesByName(this._marks.measure);return e.length===0&&(go.measure(this._marks.measure,this._marks.start,this._marks.end),e=go.getEntriesByName(this._marks.measure),go.clearMarks(this._marks.start),go.clearMarks(this._marks.end),go.clearMeasures(this._marks.measure)),e},c.Actor=T,c.AlphaImage=Mt,c.CanonicalTileID=ei,c.CollisionBoxArray=m,c.Color=ma,c.DEMData=ai,c.DataConstantProperty=oo,c.DictionaryCoder=nn,c.EXTENT=8192,c.ErrorEvent=Hr,c.EvaluationParameters=Ks,c.Event=_r,c.Evented=Qr,c.FeatureIndex=Vi,c.FillBucket=En,c.FillExtrusionBucket=ll,c.ImageAtlas=Ra,c.ImagePosition=si,c.LineBucket=Zu,c.LngLat=Ae,c.LngLatBounds=te,c.MercatorCoordinate=zn,c.ONE_EM=24,c.OverscaledTileID=_n,c.Point=B,c.Point$1=B,c.Properties=mu,c.Protobuf=Cd,c.RGBAImage=St,c.RequestManager=Ge,c.RequestPerformance=qs,c.ResourceType=Tr,c.SegmentVector=Or,c.SourceFeatureState=Li,c.StructArrayLayout1ui2=sd,c.StructArrayLayout2f1f2i16=zc,c.StructArrayLayout2i4=ph,c.StructArrayLayout3ui6=rc,c.StructArrayLayout4i8=wc,c.SymbolBucket=kt,c.Texture=A,c.Tile=Fa,c.Transitionable=eu,c.Uniform1f=Da,c.Uniform1i=ra,c.Uniform2f=Na,c.Uniform3f=po,c.Uniform4f=No,c.UniformColor=is,c.UniformMatrix4f=Ls,c.UnwrappedTileID=Qn,c.ValidationError=tt,c.WritingMode=Ya,c.ZoomHistory=jh,c.add=function(e,i,l){return e[0]=i[0]+l[0],e[1]=i[1]+l[1],e[2]=i[2]+l[2],e},c.addDynamicAttributes=Ve,c.asyncAll=function(e,i,l){if(!e.length)return l(null,[]);var y=e.length,P=new Array(e.length),j=null;e.forEach(function(Q,we){i(Q,function(ut,Nt){ut&&(j=ut),P[we]=Nt,--y==0&&l(j,P)})})},c.bezier=ke,c.bindAll=jt,c.browser=fe,c.cacheEntryPossiblyAdded=function(e){++Er>Qe&&(e.getActor().send("enforceCacheSizeLimit",ot),Er=0)},c.clamp=me,c.clearTileCache=function(e){var i=$.caches.delete("mapbox-tiles");e&&i.catch(e).then(function(){return e()})},c.clipLine=wl,c.clone=function(e){var i=new ku(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},c.clone$1=ie,c.clone$2=function(e){var i=new ku(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i},c.collisionCircleLayout=ld,c.config=_t,c.create=function(){var e=new ku(16);return ku!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},c.create$1=function(){var e=new ku(9);return ku!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},c.create$2=function(){var e=new ku(4);return ku!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},c.createCommonjsModule=K,c.createExpression=Af,c.createLayout=bl,c.createStyleLayer=function(e){return e.type==="custom"?new mn(e):new Mn[e.type](e)},c.cross=function(e,i,l){var y=i[0],P=i[1],j=i[2],Q=l[0],we=l[1],ut=l[2];return e[0]=P*ut-j*we,e[1]=j*Q-y*ut,e[2]=y*we-P*Q,e},c.deepEqual=function e(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(var y=0;y<i.length;y++)if(!e(i[y],l[y]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(var P in i)if(!e(i[P],l[P]))return!1;return!0}return i===l},c.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]},c.dot$1=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]},c.ease=We,c.emitValidationErrors=Ul,c.endsWith=pe,c.enforceCacheSizeLimit=function(e){ir(),k&&k.then(function(i){i.keys().then(function(l){for(var y=0;y<l.length-e;y++)i.delete(l[y])})})},c.evaluateSizeForFeature=hs,c.evaluateSizeForZoom=zs,c.evaluateVariableOffset=pd,c.evented=Sc,c.extend=Se,c.featureFilter=su,c.filterObject=ye,c.fromRotation=function(e,i){var l=Math.sin(i),y=Math.cos(i);return e[0]=y,e[1]=l,e[2]=0,e[3]=-l,e[4]=y,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},c.getAnchorAlignment=Oa,c.getAnchorJustification=w,c.getArrayBuffer=bt,c.getImage=zt,c.getJSON=function(e,i){return Nr(Se(e,{type:"json"}),i)},c.getRTLTextPluginStatus=Vh,c.getReferrer=un,c.getVideo=function(e,i){var l,y,P=$.document.createElement("video");P.muted=!0,P.onloadstart=function(){i(null,P)};for(var j=0;j<e.length;j++){var Q=$.document.createElement("source");l=e[j],y=void 0,(y=$.document.createElement("a")).href=l,(y.protocol!==$.document.location.protocol||y.host!==$.document.location.host)&&(P.crossOrigin="Anonymous"),Q.src=e[j],P.appendChild(Q)}return{cancel:function(){}}},c.identity=yu,c.invert=function(e,i){var l=i[0],y=i[1],P=i[2],j=i[3],Q=i[4],we=i[5],ut=i[6],Nt=i[7],Ut=i[8],qt=i[9],lr=i[10],xr=i[11],Kr=i[12],qr=i[13],dn=i[14],cn=i[15],Un=l*we-y*Q,ri=l*ut-P*Q,gi=l*Nt-j*Q,yi=y*ut-P*we,Ii=y*Nt-j*we,Ji=P*Nt-j*ut,Wi=Ut*qr-qt*Kr,ja=Ut*dn-lr*Kr,Jn=Ut*cn-xr*Kr,la=qt*dn-lr*qr,ea=qt*cn-xr*qr,bo=lr*cn-xr*dn,Eo=Un*bo-ri*ea+gi*la+yi*Jn-Ii*ja+Ji*Wi;return Eo?(e[0]=(we*bo-ut*ea+Nt*la)*(Eo=1/Eo),e[1]=(P*ea-y*bo-j*la)*Eo,e[2]=(qr*Ji-dn*Ii+cn*yi)*Eo,e[3]=(lr*Ii-qt*Ji-xr*yi)*Eo,e[4]=(ut*Jn-Q*bo-Nt*ja)*Eo,e[5]=(l*bo-P*Jn+j*ja)*Eo,e[6]=(dn*gi-Kr*Ji-cn*ri)*Eo,e[7]=(Ut*Ji-lr*gi+xr*ri)*Eo,e[8]=(Q*ea-we*Jn+Nt*Wi)*Eo,e[9]=(y*Jn-l*ea-j*Wi)*Eo,e[10]=(Kr*Ii-qr*gi+cn*Un)*Eo,e[11]=(qt*gi-Ut*Ii-xr*Un)*Eo,e[12]=(we*ja-Q*la-ut*Wi)*Eo,e[13]=(l*la-y*ja+P*Wi)*Eo,e[14]=(qr*ri-Kr*yi-dn*Un)*Eo,e[15]=(Ut*yi-qt*ri+lr*Un)*Eo,e):null},c.isChar=qa,c.isMapboxURL=wt,c.keysDifference=function(e,i){var l=[];for(var y in e)y in i||l.push(y);return l},c.makeRequest=Nr,c.mapObject=$e,c.mercatorXfromLng=Wt,c.mercatorYfromLat=vr,c.mercatorZfromAltitude=Fr,c.mul=vh,c.multiply=Jc,c.mvt=cu,c.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},c.normalize=function(e,i){var l=i[0],y=i[1],P=i[2],j=l*l+y*y+P*P;return j>0&&(j=1/Math.sqrt(j)),e[0]=i[0]*j,e[1]=i[1]*j,e[2]=i[2]*j,e},c.number=Pr,c.offscreenCanvasSupported=Zt,c.ortho=function(e,i,l,y,P,j,Q){var we=1/(i-l),ut=1/(y-P),Nt=1/(j-Q);return e[0]=-2*we,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*ut,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*Nt,e[11]=0,e[12]=(i+l)*we,e[13]=(P+y)*ut,e[14]=(Q+j)*Nt,e[15]=1,e},c.parseGlyphPBF=function(e){return new Cd(e).readFields(Ha,[])},c.pbf=Cd,c.performSymbolLayout=function(e,i,l,y,P,j,Q){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var we=e.layers[0].layout,ut=e.layers[0]._unevaluatedLayout._values,Nt={};if(e.textSizeData.kind==="composite"){var Ut=e.textSizeData,qt=Ut.maxZoom;Nt.compositeTextSizes=[ut["text-size"].possiblyEvaluate(new Ks(Ut.minZoom),Q),ut["text-size"].possiblyEvaluate(new Ks(qt),Q)]}if(e.iconSizeData.kind==="composite"){var lr=e.iconSizeData,xr=lr.maxZoom;Nt.compositeIconSizes=[ut["icon-size"].possiblyEvaluate(new Ks(lr.minZoom),Q),ut["icon-size"].possiblyEvaluate(new Ks(xr),Q)]}Nt.layoutTextSize=ut["text-size"].possiblyEvaluate(new Ks(e.zoom+1),Q),Nt.layoutIconSize=ut["icon-size"].possiblyEvaluate(new Ks(e.zoom+1),Q),Nt.textMaxSize=ut["text-size"].possiblyEvaluate(new Ks(18));for(var Kr=24*we.get("text-line-height"),qr=we.get("text-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point",dn=we.get("text-keep-upright"),cn=we.get("text-size"),Un=function(){var yi=gi[ri],Ii=we.get("text-font").evaluate(yi,{},Q).join(","),Ji=cn.evaluate(yi,{},Q),Wi=Nt.layoutTextSize.evaluate(yi,{},Q),ja=Nt.layoutIconSize.evaluate(yi,{},Q),Jn={horizontal:{},vertical:void 0},la=yi.text,ea=[0,0];if(la){var bo=la.toString(),Eo=24*we.get("text-letter-spacing").evaluate(yi,{},Q),Ja=function(Lu){for(var cl=0,sl=Lu;cl<sl.length;cl+=1)if(Wu=sl[cl].charCodeAt(0),qa.Arabic(Wu)||qa["Arabic Supplement"](Wu)||qa["Arabic Extended-A"](Wu)||qa["Arabic Presentation Forms-A"](Wu)||qa["Arabic Presentation Forms-B"](Wu))return!1;var Wu;return!0}(bo)?Eo:0,Ss=we.get("text-anchor").evaluate(yi,{},Q),Is=we.get("text-variable-anchor");if(!Is){var pu=we.get("text-radial-offset").evaluate(yi,{},Q);ea=pu?pd(Ss,[24*pu,nf]):we.get("text-offset").evaluate(yi,{},Q).map(function(Lu){return 24*Lu})}var es=qr?"center":we.get("text-justify").evaluate(yi,{},Q),$u=we.get("symbol-placement"),hl=$u==="point"?24*we.get("text-max-width").evaluate(yi,{},Q):0,Nl=function(){e.allowVerticalPlacement&&Yl(bo)&&(Jn.vertical=xo(la,i,l,P,Ii,hl,Kr,Ss,"left",Ja,ea,Ya.vertical,!0,$u,Wi,Ji))};if(!qr&&Is){for(var el=es==="auto"?Is.map(function(Lu){return w(Lu)}):[es],af=!1,gf=0;gf<el.length;gf++){var zf=el[gf];if(!Jn.horizontal[zf])if(af)Jn.horizontal[zf]=Jn.horizontal[0];else{var Th=xo(la,i,l,P,Ii,hl,Kr,"center",zf,Ja,ea,Ya.horizontal,!1,$u,Wi,Ji);Th&&(Jn.horizontal[zf]=Th,af=Th.positionedLines.length===1)}}Nl()}else{es==="auto"&&(es=w(Ss));var ed=xo(la,i,l,P,Ii,hl,Kr,Ss,es,Ja,ea,Ya.horizontal,!1,$u,Wi,Ji);ed&&(Jn.horizontal[es]=ed),Nl(),Yl(bo)&&qr&&dn&&(Jn.vertical=xo(la,i,l,P,Ii,hl,Kr,Ss,es,Ja,ea,Ya.vertical,!1,$u,Wi,Ji))}}var Zf=void 0,iu=!1;if(yi.icon&&yi.icon.name){var Uf=y[yi.icon.name];Uf&&(Zf=function(Lu,cl,sl){var Wu=Oa(sl),td=cl[0]-Lu.displaySize[0]*Wu.horizontalAlign,Qf=cl[1]-Lu.displaySize[1]*Wu.verticalAlign;return{image:Lu,top:Qf,bottom:Qf+Lu.displaySize[1],left:td,right:td+Lu.displaySize[0]}}(P[yi.icon.name],we.get("icon-offset").evaluate(yi,{},Q),we.get("icon-anchor").evaluate(yi,{},Q)),iu=Uf.sdf,e.sdfIcons===void 0?e.sdfIcons=Uf.sdf:e.sdfIcons!==Uf.sdf&&De("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Uf.pixelRatio!==e.pixelRatio||we.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var xh=Ie(Jn.horizontal)||Jn.vertical;e.iconsInText=!!xh&&xh.iconsInText,(xh||Zf)&&function(Lu,cl,sl,Wu,td,Qf,Rc,$f,rd,Cl,Mh){var fd=Qf.textMaxSize.evaluate(cl,{});fd===void 0&&(fd=Rc);var Wd,oc=Lu.layers[0].layout,Ou=oc.get("icon-offset").evaluate(cl,{},Mh),Od=Ie(sl.horizontal),Wh=Rc/24,yf=Lu.tilePixelRatio*Wh,Ep=Lu.tilePixelRatio*fd/24,bd=Lu.tilePixelRatio*$f,ml=Lu.tilePixelRatio*oc.get("symbol-spacing"),vc=oc.get("text-padding")*Lu.tilePixelRatio,vd=oc.get("icon-padding")*Lu.tilePixelRatio,Ad=oc.get("text-max-angle")/180*Math.PI,Fd=oc.get("text-rotation-alignment")==="map"&&oc.get("symbol-placement")!=="point",yp=oc.get("icon-rotation-alignment")==="map"&&oc.get("symbol-placement")!=="point",Ph=oc.get("symbol-placement"),Ed=ml/2,Bd=oc.get("icon-text-fit");Wu&&Bd!=="none"&&(Lu.allowVerticalPlacement&&sl.vertical&&(Wd=Bs(Wu,sl.vertical,Bd,oc.get("icon-text-fit-padding"),Ou,Wh)),Od&&(Wu=Bs(Wu,Od,Bd,oc.get("icon-text-fit-padding"),Ou,Wh)));var Qd=function(N0,Jd){Jd.x<0||Jd.x>=8192||Jd.y<0||Jd.y>=8192||function(Qs,np,Xd,ip,zv,of,Zp,ap,Pp,cv,fv,hv,r0,Zv,Wp,z0,n0,Z0,U0,dv,zd,pv,Uv,wp,vv){var $v,bp,Op,ch,Xh,mv=Qs.addToLineVertexArray(np,Xd),Cm=0,$0=0,i0=0,jv=0,gv=-1,a0=-1,op={},o0=an(""),s0=0,j0=0;if(ap._unevaluatedLayout.getValue("text-radial-offset")===void 0?(s0=($v=ap.layout.get("text-offset").evaluate(zd,{},wp).map(function(Kd){return 24*Kd}))[0],j0=$v[1]):(s0=24*ap.layout.get("text-radial-offset").evaluate(zd,{},wp),j0=nf),Qs.allowVerticalPlacement&&ip.vertical){var Hv=ap.layout.get("text-rotate").evaluate(zd,{},wp)+90;ch=new wf(Pp,np,cv,fv,hv,ip.vertical,r0,Zv,Wp,Hv),Zp&&(Xh=new wf(Pp,np,cv,fv,hv,Zp,n0,Z0,Wp,Hv))}if(zv){var yv=ap.layout.get("icon-rotate").evaluate(zd,{}),u0=ap.layout.get("icon-text-fit")!=="none",l0=rf(zv,yv,Uv,u0),c0=Zp?rf(Zp,yv,Uv,u0):void 0;Op=new wf(Pp,np,cv,fv,hv,zv,n0,Z0,!1,yv),Cm=4*l0.length;var H0=Qs.iconSizeData,Ol=null;H0.kind==="source"?(Ol=[128*ap.layout.get("icon-size").evaluate(zd,{})])[0]>32640&&De(Qs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):H0.kind==="composite"&&((Ol=[128*pv.compositeIconSizes[0].evaluate(zd,{},wp),128*pv.compositeIconSizes[1].evaluate(zd,{},wp)])[0]>32640||Ol[1]>32640)&&De(Qs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Qs.addSymbols(Qs.icon,l0,Ol,dv,U0,zd,!1,np,mv.lineStartIndex,mv.lineLength,-1,wp),gv=Qs.icon.placedSymbolArray.length-1,c0&&($0=4*c0.length,Qs.addSymbols(Qs.icon,c0,Ol,dv,U0,zd,Ya.vertical,np,mv.lineStartIndex,mv.lineLength,-1,wp),a0=Qs.icon.placedSymbolArray.length-1)}for(var _v in ip.horizontal){var xv=ip.horizontal[_v];if(!bp){o0=an(xv.text);var Xp=ap.layout.get("text-rotate").evaluate(zd,{},wp);bp=new wf(Pp,np,cv,fv,hv,xv,r0,Zv,Wp,Xp)}var Vv=xv.positionedLines.length===1;if(i0+=V(Qs,np,xv,of,ap,Wp,zd,z0,mv,ip.vertical?Ya.horizontal:Ya.horizontalOnly,Vv?Object.keys(ip.horizontal):[_v],op,gv,pv,wp),Vv)break}ip.vertical&&(jv+=V(Qs,np,ip.vertical,of,ap,Wp,zd,z0,mv,Ya.vertical,["vertical"],op,a0,pv,wp));var V0=bp?bp.boxStartIndex:Qs.collisionBoxArray.length,f0=bp?bp.boxEndIndex:Qs.collisionBoxArray.length,bv=ch?ch.boxStartIndex:Qs.collisionBoxArray.length,h0=ch?ch.boxEndIndex:Qs.collisionBoxArray.length,Ev=Op?Op.boxStartIndex:Qs.collisionBoxArray.length,Up=Op?Op.boxEndIndex:Qs.collisionBoxArray.length,Am=Xh?Xh.boxStartIndex:Qs.collisionBoxArray.length,Tm=Xh?Xh.boxEndIndex:Qs.collisionBoxArray.length,lp=-1,Sv=function(Kd,Kp){return Kd&&Kd.circleDiameter?Math.max(Kd.circleDiameter,Kp):Kp};lp=Sv(bp,lp),lp=Sv(ch,lp),lp=Sv(Op,lp);var Cp=(lp=Sv(Xh,lp))>-1?1:0;Cp&&(lp*=vv/24),Qs.glyphOffsetArray.length>=kt.MAX_GLYPHS&&De("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zd.sortKey!==void 0&&Qs.addToSortKeyRanges(Qs.symbolInstances.length,zd.sortKey),Qs.symbolInstances.emplaceBack(np.x,np.y,op.right>=0?op.right:-1,op.center>=0?op.center:-1,op.left>=0?op.left:-1,op.vertical||-1,gv,a0,o0,V0,f0,bv,h0,Ev,Up,Am,Tm,cv,i0,jv,Cm,$0,Cp,0,r0,s0,j0,lp)}(Lu,Jd,N0,sl,Wu,td,Wd,Lu.layers[0],Lu.collisionBoxArray,cl.index,cl.sourceLayerIndex,Lu.index,yf,vc,Fd,rd,bd,vd,yp,Ou,cl,Qf,Cl,Mh,Rc)};if(Ph==="line")for(var Jf=0,bh=wl(cl.geometry,0,0,8192,8192);Jf<bh.length;Jf+=1)for(var Bv=bh[Jf],nv=0,iv=Ic(Bv,ml,Ad,sl.vertical||Od,Wu,24,Ep,Lu.overscaling,8192);nv<iv.length;nv+=1){var av=iv[nv];Od&&se(Lu,Od.text,Ed,av)||Qd(Bv,av)}else if(Ph==="line-center")for(var ov=0,sv=cl.geometry;ov<sv.length;ov+=1){var Nd=sv[ov];if(Nd.length>1){var uv=Xl(Nd,Ad,sl.vertical||Od,Wu,24,Ep);uv&&Qd(Nd,uv)}}else if(cl.type==="Polygon")for(var _p=0,Np=rt(cl.geometry,0);_p<Np.length;_p+=1){var zp=Np[_p],Sp=js(zp,16);Qd(zp[0],new so(Sp.x,Sp.y,0))}else if(cl.type==="LineString")for(var xp=0,Td=cl.geometry;xp<Td.length;xp+=1){var rp=Td[xp];Qd(rp,new so(rp[0].x,rp[0].y,0))}else if(cl.type==="Point")for(var t0=0,F0=cl.geometry;t0<F0.length;t0+=1)for(var Nv=0,B0=F0[t0];Nv<B0.length;Nv+=1){var lv=B0[Nv];Qd([lv],new so(lv.x,lv.y,0))}}(e,yi,Jn,Zf,y,Nt,Wi,ja,ea,iu,Q)},ri=0,gi=e.features;ri<gi.length;ri+=1)Un();j&&e.generateCollisionDebugBuffers()},c.perspective=function(e,i,l,y,P){var j,Q=1/Math.tan(i/2);return e[0]=Q/l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=Q,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,P!=null&&P!==1/0?(e[10]=(P+y)*(j=1/(y-P)),e[14]=2*P*y*j):(e[10]=-1,e[14]=-2*y),e},c.pick=function(e,i){for(var l={},y=0;y<i.length;y++){var P=i[y];P in e&&(l[P]=e[P])}return l},c.plugin=gu,c.polygonIntersectsPolygon=Pf,c.postMapLoadEvent=Je,c.postTurnstileEvent=Be,c.potpack=Ua,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=ao,c.registerForPluginStateChange=function(e){return e({pluginStatus:Ec,pluginURL:ah}),Sc.on("pluginStateChange",e),e},c.renderColorRamp=ar,c.rotate=function(e,i,l){var y=i[0],P=i[1],j=i[2],Q=i[3],we=Math.sin(l),ut=Math.cos(l);return e[0]=y*ut+j*we,e[1]=P*ut+Q*we,e[2]=y*-we+j*ut,e[3]=P*-we+Q*ut,e},c.rotateX=function(e,i,l){var y=Math.sin(l),P=Math.cos(l),j=i[4],Q=i[5],we=i[6],ut=i[7],Nt=i[8],Ut=i[9],qt=i[10],lr=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=j*P+Nt*y,e[5]=Q*P+Ut*y,e[6]=we*P+qt*y,e[7]=ut*P+lr*y,e[8]=Nt*P-j*y,e[9]=Ut*P-Q*y,e[10]=qt*P-we*y,e[11]=lr*P-ut*y,e},c.rotateZ=function(e,i,l){var y=Math.sin(l),P=Math.cos(l),j=i[0],Q=i[1],we=i[2],ut=i[3],Nt=i[4],Ut=i[5],qt=i[6],lr=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=j*P+Nt*y,e[1]=Q*P+Ut*y,e[2]=we*P+qt*y,e[3]=ut*P+lr*y,e[4]=Nt*P-j*y,e[5]=Ut*P-Q*y,e[6]=qt*P-we*y,e[7]=lr*P-ut*y,e},c.scale=function(e,i,l){var y=l[0],P=l[1],j=l[2];return e[0]=i[0]*y,e[1]=i[1]*y,e[2]=i[2]*y,e[3]=i[3]*y,e[4]=i[4]*P,e[5]=i[5]*P,e[6]=i[6]*P,e[7]=i[7]*P,e[8]=i[8]*j,e[9]=i[9]*j,e[10]=i[10]*j,e[11]=i[11]*j,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},c.scale$1=function(e,i,l){return e[0]=i[0]*l,e[1]=i[1]*l,e[2]=i[2]*l,e[3]=i[3]*l,e},c.scale$2=function(e,i,l){return e[0]=i[0]*l,e[1]=i[1]*l,e[2]=i[2]*l,e},c.setCacheLimits=function(e,i){ot=e,Qe=i},c.setRTLTextPlugin=function(e,i,l){if(l===void 0&&(l=!1),Ec==="deferred"||Ec==="loading"||Ec==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");ah=fe.resolveURL(e),Ec="deferred",bc=i,kh(),l||ql()},c.sphericalToCartesian=function(e){var i=e[0],l=e[1],y=e[2];return l+=90,l*=Math.PI/180,y*=Math.PI/180,{x:i*Math.cos(l)*Math.sin(y),y:i*Math.sin(l)*Math.sin(y),z:i*Math.cos(y)}},c.sqrLen=function(e){var i=e[0],l=e[1];return i*i+l*l},c.styleSpec=fr,c.sub=function(e,i,l){return e[0]=i[0]-l[0],e[1]=i[1]-l[1],e[2]=i[2]-l[2],e},c.symbolSize=Cu,c.transformMat3=function(e,i,l){var y=i[0],P=i[1],j=i[2];return e[0]=y*l[0]+P*l[3]+j*l[6],e[1]=y*l[1]+P*l[4]+j*l[7],e[2]=y*l[2]+P*l[5]+j*l[8],e},c.transformMat4=Nf,c.translate=function(e,i,l){var y,P,j,Q,we,ut,Nt,Ut,qt,lr,xr,Kr,qr=l[0],dn=l[1],cn=l[2];return i===e?(e[12]=i[0]*qr+i[4]*dn+i[8]*cn+i[12],e[13]=i[1]*qr+i[5]*dn+i[9]*cn+i[13],e[14]=i[2]*qr+i[6]*dn+i[10]*cn+i[14],e[15]=i[3]*qr+i[7]*dn+i[11]*cn+i[15]):(P=i[1],j=i[2],Q=i[3],we=i[4],ut=i[5],Nt=i[6],Ut=i[7],qt=i[8],lr=i[9],xr=i[10],Kr=i[11],e[0]=y=i[0],e[1]=P,e[2]=j,e[3]=Q,e[4]=we,e[5]=ut,e[6]=Nt,e[7]=Ut,e[8]=qt,e[9]=lr,e[10]=xr,e[11]=Kr,e[12]=y*qr+we*dn+qt*cn+i[12],e[13]=P*qr+ut*dn+lr*cn+i[13],e[14]=j*qr+Nt*dn+xr*cn+i[14],e[15]=Q*qr+Ut*dn+Kr*cn+i[15]),e},c.triggerPluginCompletionEvent=Wc,c.uniqueId=at,c.validateCustomStyleLayer=function(e){var i=[],l=e.id;return l===void 0&&i.push({message:"layers."+l+': missing required property "id"'}),e.render===void 0&&i.push({message:"layers."+l+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&i.push({message:"layers."+l+': property "renderingMode" must be either "2d" or "3d"'}),i},c.validateLight=xf,c.validateStyle=Lh,c.values=function(e){var i=[];for(var l in e)i.push(e[l]);return i},c.vectorTile=cu,c.version="1.13.3",c.warnOnce=De,c.webpSupported=Ye,c.window=$,c.wrap=Le}),M(["./shared"],function(c){"use strict";function K(Pt){var zt=typeof Pt;if(zt==="number"||zt==="boolean"||zt==="string"||Pt==null)return JSON.stringify(Pt);if(Array.isArray(Pt)){for(var Qt="[",dr=0,_r=Pt;dr<_r.length;dr+=1)Qt+=K(_r[dr])+",";return Qt+"]"}for(var Hr=Object.keys(Pt).sort(),Qr="{",fr=0;fr<Hr.length;fr++)Qr+=JSON.stringify(Hr[fr])+":"+K(Pt[Hr[fr]])+",";return Qr+"}"}function N(Pt){for(var zt="",Qt=0,dr=c.refProperties;Qt<dr.length;Qt+=1)zt+="/"+K(Pt[dr[Qt]]);return zt}var Z=function(Pt){this.keyCache={},Pt&&this.replace(Pt)};Z.prototype.replace=function(Pt){this._layerConfigs={},this._layers={},this.update(Pt,[])},Z.prototype.update=function(Pt,zt){for(var Qt=this,dr=0,_r=Pt;dr<_r.length;dr+=1){var Hr=_r[dr];this._layerConfigs[Hr.id]=Hr;var Qr=this._layers[Hr.id]=c.createStyleLayer(Hr);Qr._featureFilter=c.featureFilter(Qr.filter),this.keyCache[Hr.id]&&delete this.keyCache[Hr.id]}for(var fr=0,tt=zt;fr<tt.length;fr+=1){var Yr=tt[fr];delete this.keyCache[Yr],delete this._layerConfigs[Yr],delete this._layers[Yr]}this.familiesBySource={};for(var Tn=0,wn=function(xi,ta){for(var La={},Ki=0;Ki<xi.length;Ki++){var jo=ta&&ta[xi[Ki].id]||N(xi[Ki]);ta&&(ta[xi[Ki].id]=jo);var uo=La[jo];uo||(uo=La[jo]=[]),uo.push(xi[Ki])}var An=[];for(var gn in La)An.push(La[gn]);return An}(c.values(this._layerConfigs),this.keyCache);Tn<wn.length;Tn+=1){var Nn=wn[Tn].map(function(xi){return Qt._layers[xi.id]}),Si=Nn[0];if(Si.visibility!=="none"){var fa=Si.source||"",Xi=this.familiesBySource[fa];Xi||(Xi=this.familiesBySource[fa]={});var Ln=Si.sourceLayer||"_geojsonTileLayer",na=Xi[Ln];na||(na=Xi[Ln]=[]),na.push(Nn)}}};var B=function(Pt){var zt={},Qt=[];for(var dr in Pt){var _r=Pt[dr],Hr=zt[dr]={};for(var Qr in _r){var fr=_r[+Qr];if(fr&&fr.bitmap.width!==0&&fr.bitmap.height!==0){var tt={x:0,y:0,w:fr.bitmap.width+2,h:fr.bitmap.height+2};Qt.push(tt),Hr[Qr]={rect:tt,metrics:fr.metrics}}}}var Yr=c.potpack(Qt),Tn=new c.AlphaImage({width:Yr.w||1,height:Yr.h||1});for(var wn in Pt){var Nn=Pt[wn];for(var Si in Nn){var fa=Nn[+Si];if(fa&&fa.bitmap.width!==0&&fa.bitmap.height!==0){var Xi=zt[wn][Si].rect;c.AlphaImage.copy(fa.bitmap,Tn,{x:0,y:0},{x:Xi.x+1,y:Xi.y+1},fa.bitmap)}}}this.image=Tn,this.positions=zt};c.register("GlyphAtlas",B);var L=function(Pt){this.tileID=new c.OverscaledTileID(Pt.tileID.overscaledZ,Pt.tileID.wrap,Pt.tileID.canonical.z,Pt.tileID.canonical.x,Pt.tileID.canonical.y),this.uid=Pt.uid,this.zoom=Pt.zoom,this.pixelRatio=Pt.pixelRatio,this.tileSize=Pt.tileSize,this.source=Pt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pt.showCollisionBoxes,this.collectResourceTiming=!!Pt.collectResourceTiming,this.returnDependencies=!!Pt.returnDependencies,this.promoteId=Pt.promoteId};function $(Pt,zt,Qt){for(var dr=new c.EvaluationParameters(zt),_r=0,Hr=Pt;_r<Hr.length;_r+=1)Hr[_r].recalculate(dr,Qt)}function U(Pt,zt){var Qt=c.getArrayBuffer(Pt.request,function(dr,_r,Hr,Qr){dr?zt(dr):_r&&zt(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(_r)),rawData:_r,cacheControl:Hr,expires:Qr})});return function(){Qt.cancel(),zt()}}L.prototype.parse=function(Pt,zt,Qt,dr,_r){var Hr=this;this.status="parsing",this.data=Pt,this.collisionBoxArray=new c.CollisionBoxArray;var Qr=new c.DictionaryCoder(Object.keys(Pt.layers).sort()),fr=new c.FeatureIndex(this.tileID,this.promoteId);fr.bucketLayerIDs=[];var tt,Yr,Tn,wn,Nn={},Si={featureIndex:fr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Qt},fa=zt.familiesBySource[this.source];for(var Xi in fa){var Ln=Pt.layers[Xi];if(Ln){Ln.version===1&&c.warnOnce('Vector tile source "'+this.source+'" layer "'+Xi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var na=Qr.encode(Xi),xi=[],ta=0;ta<Ln.length;ta++){var La=Ln.feature(ta),Ki=fr.getId(La,Xi);xi.push({feature:La,id:Ki,index:ta,sourceLayerIndex:na})}for(var jo=0,uo=fa[Xi];jo<uo.length;jo+=1){var An=uo[jo],gn=An[0];gn.minzoom&&this.zoom<Math.floor(gn.minzoom)||gn.maxzoom&&this.zoom>=gn.maxzoom||gn.visibility!=="none"&&($(An,this.zoom,Qt),(Nn[gn.id]=gn.createBucket({index:fr.bucketLayerIDs.length,layers:An,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:na,sourceID:this.source})).populate(xi,Si,this.tileID.canonical),fr.bucketLayerIDs.push(An.map(function(Ca){return Ca.id})))}}}var Oi=c.mapObject(Si.glyphDependencies,function(Ca){return Object.keys(Ca).map(Number)});Object.keys(Oi).length?dr.send("getGlyphs",{uid:this.uid,stacks:Oi},function(Ca,Aa){tt||(tt=Ca,Yr=Aa,wa.call(Hr))}):Yr={};var fi=Object.keys(Si.iconDependencies);fi.length?dr.send("getImages",{icons:fi,source:this.source,tileID:this.tileID,type:"icons"},function(Ca,Aa){tt||(tt=Ca,Tn=Aa,wa.call(Hr))}):Tn={};var va=Object.keys(Si.patternDependencies);function wa(){if(tt)return _r(tt);if(Yr&&Tn&&wn){var Ca=new B(Yr),Aa=new c.ImageAtlas(Tn,wn);for(var ma in Nn){var ka=Nn[ma];ka instanceof c.SymbolBucket?($(ka.layers,this.zoom,Qt),c.performSymbolLayout(ka,Yr,Ca.positions,Tn,Aa.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ka.hasPattern&&(ka instanceof c.LineBucket||ka instanceof c.FillBucket||ka instanceof c.FillExtrusionBucket)&&($(ka.layers,this.zoom,Qt),ka.addFeatures(Si,this.tileID.canonical,Aa.patternPositions))}this.status="done",_r(null,{buckets:c.values(Nn).filter(function(Uo){return!Uo.isEmpty()}),featureIndex:fr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ca.image,imageAtlas:Aa,glyphMap:this.returnDependencies?Yr:null,iconMap:this.returnDependencies?Tn:null,glyphPositions:this.returnDependencies?Ca.positions:null})}}va.length?dr.send("getImages",{icons:va,source:this.source,tileID:this.tileID,type:"patterns"},function(Ca,Aa){tt||(tt=Ca,wn=Aa,wa.call(Hr))}):wn={},wa.call(this)};var ke=function(Pt,zt,Qt,dr){this.actor=Pt,this.layerIndex=zt,this.availableImages=Qt,this.loadVectorData=dr||U,this.loading={},this.loaded={}};ke.prototype.loadTile=function(Pt,zt){var Qt=this,dr=Pt.uid;this.loading||(this.loading={});var _r=!!(Pt&&Pt.request&&Pt.request.collectResourceTiming)&&new c.RequestPerformance(Pt.request),Hr=this.loading[dr]=new L(Pt);Hr.abort=this.loadVectorData(Pt,function(Qr,fr){if(delete Qt.loading[dr],Qr||!fr)return Hr.status="done",Qt.loaded[dr]=Hr,zt(Qr);var tt=fr.rawData,Yr={};fr.expires&&(Yr.expires=fr.expires),fr.cacheControl&&(Yr.cacheControl=fr.cacheControl);var Tn={};if(_r){var wn=_r.finish();wn&&(Tn.resourceTiming=JSON.parse(JSON.stringify(wn)))}Hr.vectorTile=fr.vectorTile,Hr.parse(fr.vectorTile,Qt.layerIndex,Qt.availableImages,Qt.actor,function(Nn,Si){if(Nn||!Si)return zt(Nn);zt(null,c.extend({rawTileData:tt.slice(0)},Si,Yr,Tn))}),Qt.loaded=Qt.loaded||{},Qt.loaded[dr]=Hr})},ke.prototype.reloadTile=function(Pt,zt){var Qt=this,dr=this.loaded,_r=Pt.uid,Hr=this;if(dr&&dr[_r]){var Qr=dr[_r];Qr.showCollisionBoxes=Pt.showCollisionBoxes;var fr=function(tt,Yr){var Tn=Qr.reloadCallback;Tn&&(delete Qr.reloadCallback,Qr.parse(Qr.vectorTile,Hr.layerIndex,Qt.availableImages,Hr.actor,Tn)),zt(tt,Yr)};Qr.status==="parsing"?Qr.reloadCallback=fr:Qr.status==="done"&&(Qr.vectorTile?Qr.parse(Qr.vectorTile,this.layerIndex,this.availableImages,this.actor,fr):fr())}},ke.prototype.abortTile=function(Pt,zt){var Qt=this.loading,dr=Pt.uid;Qt&&Qt[dr]&&Qt[dr].abort&&(Qt[dr].abort(),delete Qt[dr]),zt()},ke.prototype.removeTile=function(Pt,zt){var Qt=this.loaded,dr=Pt.uid;Qt&&Qt[dr]&&delete Qt[dr],zt()};var We=c.window.ImageBitmap,me=function(){this.loaded={}};function Le(Pt,zt){if(Pt.length!==0){Se(Pt[0],zt);for(var Qt=1;Qt<Pt.length;Qt++)Se(Pt[Qt],!zt)}}function Se(Pt,zt){for(var Qt=0,dr=0,_r=0,Hr=Pt.length,Qr=Hr-1;_r<Hr;Qr=_r++){var fr=(Pt[_r][0]-Pt[Qr][0])*(Pt[Qr][1]+Pt[_r][1]),tt=Qt+fr;dr+=Math.abs(Qt)>=Math.abs(fr)?Qt-tt+fr:fr-tt+Qt,Qt=tt}Qt+dr>=0!=!!zt&&Pt.reverse()}me.prototype.loadTile=function(Pt,zt){var Qt=Pt.uid,dr=Pt.encoding,_r=Pt.rawImageData,Hr=We&&_r instanceof We?this.getImageData(_r):_r,Qr=new c.DEMData(Qt,Hr,dr);this.loaded=this.loaded||{},this.loaded[Qt]=Qr,zt(null,Qr)},me.prototype.getImageData=function(Pt){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Pt.width,Pt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Pt.width,this.offscreenCanvas.height=Pt.height,this.offscreenCanvasContext.drawImage(Pt,0,0,Pt.width,Pt.height);var zt=this.offscreenCanvasContext.getImageData(-1,-1,Pt.width+2,Pt.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:zt.width,height:zt.height},zt.data)},me.prototype.removeTile=function(Pt){var zt=this.loaded,Qt=Pt.uid;zt&&zt[Qt]&&delete zt[Qt]};var et=c.vectorTile.VectorTileFeature.prototype.toGeoJSON,at=function(Pt){this._feature=Pt,this.extent=c.EXTENT,this.type=Pt.type,this.properties=Pt.tags,"id"in Pt&&!isNaN(Pt.id)&&(this.id=parseInt(Pt.id,10))};at.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Pt=[],zt=0,Qt=this._feature.geometry;zt<Qt.length;zt+=1){var dr=Qt[zt];Pt.push([new c.Point$1(dr[0],dr[1])])}return Pt}for(var _r=[],Hr=0,Qr=this._feature.geometry;Hr<Qr.length;Hr+=1){for(var fr=[],tt=0,Yr=Qr[Hr];tt<Yr.length;tt+=1){var Tn=Yr[tt];fr.push(new c.Point$1(Tn[0],Tn[1]))}_r.push(fr)}return _r},at.prototype.toGeoJSON=function(Pt,zt,Qt){return et.call(this,Pt,zt,Qt)};var Lt=function(Pt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=Pt.length,this._features=Pt};Lt.prototype.feature=function(Pt){return new at(this._features[Pt])};var Et=c.vectorTile.VectorTileFeature,jt=pe;function pe(Pt,zt){this.options=zt||{},this.features=Pt,this.length=Pt.length}function $e(Pt,zt){this.id=typeof Pt.id=="number"?Pt.id:void 0,this.type=Pt.type,this.rawGeometry=Pt.type===1?[Pt.geometry]:Pt.geometry,this.properties=Pt.tags,this.extent=zt||4096}pe.prototype.feature=function(Pt){return new $e(this.features[Pt],this.options.extent)},$e.prototype.loadGeometry=function(){var Pt=this.rawGeometry;this.geometry=[];for(var zt=0;zt<Pt.length;zt++){for(var Qt=Pt[zt],dr=[],_r=0;_r<Qt.length;_r++)dr.push(new c.Point$1(Qt[_r][0],Qt[_r][1]));this.geometry.push(dr)}return this.geometry},$e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pt=this.geometry,zt=1/0,Qt=-1/0,dr=1/0,_r=-1/0,Hr=0;Hr<Pt.length;Hr++)for(var Qr=Pt[Hr],fr=0;fr<Qr.length;fr++){var tt=Qr[fr];zt=Math.min(zt,tt.x),Qt=Math.max(Qt,tt.x),dr=Math.min(dr,tt.y),_r=Math.max(_r,tt.y)}return[zt,dr,Qt,_r]},$e.prototype.toGeoJSON=Et.prototype.toGeoJSON;var ye=re,ie=jt;function re(Pt){var zt=new c.pbf;return function(Qt,dr){for(var _r in Qt.layers)dr.writeMessage(3,De,Qt.layers[_r])}(Pt,zt),zt.finish()}function De(Pt,zt){var Qt;zt.writeVarintField(15,Pt.version||1),zt.writeStringField(1,Pt.name||""),zt.writeVarintField(5,Pt.extent||4096);var dr={keys:[],values:[],keycache:{},valuecache:{}};for(Qt=0;Qt<Pt.length;Qt++)dr.feature=Pt.feature(Qt),zt.writeMessage(2,le,dr);var _r=dr.keys;for(Qt=0;Qt<_r.length;Qt++)zt.writeStringField(3,_r[Qt]);var Hr=dr.values;for(Qt=0;Qt<Hr.length;Qt++)zt.writeMessage(4,Me,Hr[Qt])}function le(Pt,zt){var Qt=Pt.feature;Qt.id!==void 0&&zt.writeVarintField(1,Qt.id),zt.writeMessage(2,ge,Pt),zt.writeVarintField(3,Qt.type),zt.writeMessage(4,J,Qt)}function ge(Pt,zt){var Qt=Pt.feature,dr=Pt.keys,_r=Pt.values,Hr=Pt.keycache,Qr=Pt.valuecache;for(var fr in Qt.properties){var tt=Hr[fr];tt===void 0&&(dr.push(fr),Hr[fr]=tt=dr.length-1),zt.writeVarint(tt);var Yr=Qt.properties[fr],Tn=typeof Yr;Tn!=="string"&&Tn!=="boolean"&&Tn!=="number"&&(Yr=JSON.stringify(Yr));var wn=Tn+":"+Yr,Nn=Qr[wn];Nn===void 0&&(_r.push(Yr),Qr[wn]=Nn=_r.length-1),zt.writeVarint(Nn)}}function ce(Pt,zt){return(zt<<3)+(7&Pt)}function je(Pt){return Pt<<1^Pt>>31}function J(Pt,zt){for(var Qt=Pt.loadGeometry(),dr=Pt.type,_r=0,Hr=0,Qr=Qt.length,fr=0;fr<Qr;fr++){var tt=Qt[fr],Yr=1;dr===1&&(Yr=tt.length),zt.writeVarint(ce(1,Yr));for(var Tn=dr===3?tt.length-1:tt.length,wn=0;wn<Tn;wn++){wn===1&&dr!==1&&zt.writeVarint(ce(2,Tn-1));var Nn=tt[wn].x-_r,Si=tt[wn].y-Hr;zt.writeVarint(je(Nn)),zt.writeVarint(je(Si)),_r+=Nn,Hr+=Si}dr===3&&zt.writeVarint(ce(7,1))}}function Me(Pt,zt){var Qt=typeof Pt;Qt==="string"?zt.writeStringField(1,Pt):Qt==="boolean"?zt.writeBooleanField(7,Pt):Qt==="number"&&(Pt%1!=0?zt.writeDoubleField(3,Pt):Pt<0?zt.writeSVarintField(6,Pt):zt.writeVarintField(5,Pt))}function ne(Pt,zt,Qt,dr){xe(Pt,Qt,dr),xe(zt,2*Qt,2*dr),xe(zt,2*Qt+1,2*dr+1)}function xe(Pt,zt,Qt){var dr=Pt[zt];Pt[zt]=Pt[Qt],Pt[Qt]=dr}function Ne(Pt,zt,Qt,dr){var _r=Pt-Qt,Hr=zt-dr;return _r*_r+Hr*Hr}ye.fromVectorTileJs=re,ye.fromGeojsonVt=function(Pt,zt){zt=zt||{};var Qt={};for(var dr in Pt)Qt[dr]=new jt(Pt[dr].features,zt),Qt[dr].name=dr,Qt[dr].version=zt.version,Qt[dr].extent=zt.extent;return re({layers:Qt})},ye.GeoJSONWrapper=ie;var Pe=function(Pt){return Pt[0]},He=function(Pt){return Pt[1]},lt=function(Pt,zt,Qt,dr,_r){zt===void 0&&(zt=Pe),Qt===void 0&&(Qt=He),dr===void 0&&(dr=64),_r===void 0&&(_r=Float64Array),this.nodeSize=dr,this.points=Pt;for(var Hr=Pt.length<65536?Uint16Array:Uint32Array,Qr=this.ids=new Hr(Pt.length),fr=this.coords=new _r(2*Pt.length),tt=0;tt<Pt.length;tt++)Qr[tt]=tt,fr[2*tt]=zt(Pt[tt]),fr[2*tt+1]=Qt(Pt[tt]);(function Yr(Tn,wn,Nn,Si,fa,Xi){if(!(fa-Si<=Nn)){var Ln=Si+fa>>1;(function na(xi,ta,La,Ki,jo,uo){for(;jo>Ki;){if(jo-Ki>600){var An=jo-Ki+1,gn=La-Ki+1,Oi=Math.log(An),fi=.5*Math.exp(2*Oi/3),va=.5*Math.sqrt(Oi*fi*(An-fi)/An)*(gn-An/2<0?-1:1);na(xi,ta,La,Math.max(Ki,Math.floor(La-gn*fi/An+va)),Math.min(jo,Math.floor(La+(An-gn)*fi/An+va)),uo)}var wa=ta[2*La+uo],Ca=Ki,Aa=jo;for(ne(xi,ta,Ki,La),ta[2*jo+uo]>wa&&ne(xi,ta,Ki,jo);Ca<Aa;){for(ne(xi,ta,Ca,Aa),Ca++,Aa--;ta[2*Ca+uo]<wa;)Ca++;for(;ta[2*Aa+uo]>wa;)Aa--}ta[2*Ki+uo]===wa?ne(xi,ta,Ki,Aa):ne(xi,ta,++Aa,jo),Aa<=La&&(Ki=Aa+1),La<=Aa&&(jo=Aa-1)}})(Tn,wn,Ln,Si,fa,Xi%2),Yr(Tn,wn,Nn,Si,Ln-1,Xi+1),Yr(Tn,wn,Nn,Ln+1,fa,Xi+1)}})(Qr,fr,dr,0,Qr.length-1,0)};lt.prototype.range=function(Pt,zt,Qt,dr){return function(_r,Hr,Qr,fr,tt,Yr,Tn){for(var wn,Nn,Si=[0,_r.length-1,0],fa=[];Si.length;){var Xi=Si.pop(),Ln=Si.pop(),na=Si.pop();if(Ln-na<=Tn)for(var xi=na;xi<=Ln;xi++)Nn=Hr[2*xi+1],(wn=Hr[2*xi])>=Qr&&wn<=tt&&Nn>=fr&&Nn<=Yr&&fa.push(_r[xi]);else{var ta=Math.floor((na+Ln)/2);Nn=Hr[2*ta+1],(wn=Hr[2*ta])>=Qr&&wn<=tt&&Nn>=fr&&Nn<=Yr&&fa.push(_r[ta]);var La=(Xi+1)%2;(Xi===0?Qr<=wn:fr<=Nn)&&(Si.push(na),Si.push(ta-1),Si.push(La)),(Xi===0?tt>=wn:Yr>=Nn)&&(Si.push(ta+1),Si.push(Ln),Si.push(La))}}return fa}(this.ids,this.coords,Pt,zt,Qt,dr,this.nodeSize)},lt.prototype.within=function(Pt,zt,Qt){return function(dr,_r,Hr,Qr,fr,tt){for(var Yr=[0,dr.length-1,0],Tn=[],wn=fr*fr;Yr.length;){var Nn=Yr.pop(),Si=Yr.pop(),fa=Yr.pop();if(Si-fa<=tt)for(var Xi=fa;Xi<=Si;Xi++)Ne(_r[2*Xi],_r[2*Xi+1],Hr,Qr)<=wn&&Tn.push(dr[Xi]);else{var Ln=Math.floor((fa+Si)/2),na=_r[2*Ln],xi=_r[2*Ln+1];Ne(na,xi,Hr,Qr)<=wn&&Tn.push(dr[Ln]);var ta=(Nn+1)%2;(Nn===0?Hr-fr<=na:Qr-fr<=xi)&&(Yr.push(fa),Yr.push(Ln-1),Yr.push(ta)),(Nn===0?Hr+fr>=na:Qr+fr>=xi)&&(Yr.push(Ln+1),Yr.push(Si),Yr.push(ta))}}return Tn}(this.ids,this.coords,Pt,zt,Qt,this.nodeSize)};var ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Pt){return Pt}},It=function(Pt){this.options=pt(Object.create(ft),Pt),this.trees=new Array(this.options.maxZoom+1)};function fe(Pt,zt,Qt,dr,_r){return{x:Pt,y:zt,zoom:1/0,id:Qt,parentId:-1,numPoints:dr,properties:_r}}function _t(Pt,zt){var Qt=Pt.geometry.coordinates,dr=Qt[1];return{x:mt(Qt[0]),y:Rt(dr),zoom:1/0,index:zt,parentId:-1}}function Ye(Pt){return{type:"Feature",id:Pt.id,properties:Ot(Pt),geometry:{type:"Point",coordinates:[(dr=Pt.x,360*(dr-.5)),(zt=Pt.y,Qt=(180-360*zt)*Math.PI/180,360*Math.atan(Math.exp(Qt))/Math.PI-90)]}};var zt,Qt,dr}function Ot(Pt){var zt=Pt.numPoints,Qt=zt>=1e4?Math.round(zt/1e3)+"k":zt>=1e3?Math.round(zt/100)/10+"k":zt;return pt(pt({},Pt.properties),{cluster:!0,cluster_id:Pt.id,point_count:zt,point_count_abbreviated:Qt})}function mt(Pt){return Pt/360+.5}function Rt(Pt){var zt=Math.sin(Pt*Math.PI/180),Qt=.5-.25*Math.log((1+zt)/(1-zt))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function pt(Pt,zt){for(var Qt in zt)Pt[Qt]=zt[Qt];return Pt}function Ge(Pt){return Pt.x}function wt(Pt){return Pt.y}function ee(Pt,zt,Qt,dr,_r,Hr){var Qr=_r-Qt,fr=Hr-dr;if(Qr!==0||fr!==0){var tt=((Pt-Qt)*Qr+(zt-dr)*fr)/(Qr*Qr+fr*fr);tt>1?(Qt=_r,dr=Hr):tt>0&&(Qt+=Qr*tt,dr+=fr*tt)}return(Qr=Pt-Qt)*Qr+(fr=zt-dr)*fr}function Re(Pt,zt,Qt,dr){var _r={id:Pt===void 0?null:Pt,type:zt,geometry:Qt,tags:dr,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Hr){var Qr=Hr.geometry,fr=Hr.type;if(fr==="Point"||fr==="MultiPoint"||fr==="LineString")dt(Hr,Qr);else if(fr==="Polygon"||fr==="MultiLineString")for(var tt=0;tt<Qr.length;tt++)dt(Hr,Qr[tt]);else if(fr==="MultiPolygon")for(tt=0;tt<Qr.length;tt++)for(var Yr=0;Yr<Qr[tt].length;Yr++)dt(Hr,Qr[tt][Yr])}(_r),_r}function dt(Pt,zt){for(var Qt=0;Qt<zt.length;Qt+=3)Pt.minX=Math.min(Pt.minX,zt[Qt]),Pt.minY=Math.min(Pt.minY,zt[Qt+1]),Pt.maxX=Math.max(Pt.maxX,zt[Qt]),Pt.maxY=Math.max(Pt.maxY,zt[Qt+1])}function D(Pt,zt,Qt,dr){if(zt.geometry){var _r=zt.geometry.coordinates,Hr=zt.geometry.type,Qr=Math.pow(Qt.tolerance/((1<<Qt.maxZoom)*Qt.extent),2),fr=[],tt=zt.id;if(Qt.promoteId?tt=zt.properties[Qt.promoteId]:Qt.generateId&&(tt=dr||0),Hr==="Point")q(_r,fr);else if(Hr==="MultiPoint")for(var Yr=0;Yr<_r.length;Yr++)q(_r[Yr],fr);else if(Hr==="LineString")G(_r,fr,Qr,!1);else if(Hr==="MultiLineString"){if(Qt.lineMetrics){for(Yr=0;Yr<_r.length;Yr++)G(_r[Yr],fr=[],Qr,!1),Pt.push(Re(tt,"LineString",fr,zt.properties));return}O(_r,fr,Qr,!1)}else if(Hr==="Polygon")O(_r,fr,Qr,!0);else{if(Hr!=="MultiPolygon"){if(Hr==="GeometryCollection"){for(Yr=0;Yr<zt.geometry.geometries.length;Yr++)D(Pt,{id:tt,geometry:zt.geometry.geometries[Yr],properties:zt.properties},Qt,dr);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Yr=0;Yr<_r.length;Yr++){var Tn=[];O(_r[Yr],Tn,Qr,!0),fr.push(Tn)}}Pt.push(Re(tt,Hr,fr,zt.properties))}}function q(Pt,zt){zt.push(k(Pt[0])),zt.push(X(Pt[1])),zt.push(0)}function G(Pt,zt,Qt,dr){for(var _r,Hr,Qr=0,fr=0;fr<Pt.length;fr++){var tt=k(Pt[fr][0]),Yr=X(Pt[fr][1]);zt.push(tt),zt.push(Yr),zt.push(0),fr>0&&(Qr+=dr?(_r*Yr-tt*Hr)/2:Math.sqrt(Math.pow(tt-_r,2)+Math.pow(Yr-Hr,2))),_r=tt,Hr=Yr}var Tn=zt.length-3;zt[2]=1,function wn(Nn,Si,fa,Xi){for(var Ln,na=Xi,xi=fa-Si>>1,ta=fa-Si,La=Nn[Si],Ki=Nn[Si+1],jo=Nn[fa],uo=Nn[fa+1],An=Si+3;An<fa;An+=3){var gn=ee(Nn[An],Nn[An+1],La,Ki,jo,uo);if(gn>na)Ln=An,na=gn;else if(gn===na){var Oi=Math.abs(An-xi);Oi<ta&&(Ln=An,ta=Oi)}}na>Xi&&(Ln-Si>3&&wn(Nn,Si,Ln,Xi),Nn[Ln+2]=na,fa-Ln>3&&wn(Nn,Ln,fa,Xi))}(zt,0,Tn,Qt),zt[Tn+2]=1,zt.size=Math.abs(Qr),zt.start=0,zt.end=zt.size}function O(Pt,zt,Qt,dr){for(var _r=0;_r<Pt.length;_r++){var Hr=[];G(Pt[_r],Hr,Qt,dr),zt.push(Hr)}}function k(Pt){return Pt/360+.5}function X(Pt){var zt=Math.sin(Pt*Math.PI/180),Qt=.5-.25*Math.log((1+zt)/(1-zt))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function W(Pt,zt,Qt,dr,_r,Hr,Qr,fr){if(dr/=zt,Hr>=(Qt/=zt)&&Qr<dr)return Pt;if(Qr<Qt||Hr>=dr)return null;for(var tt=[],Yr=0;Yr<Pt.length;Yr++){var Tn=Pt[Yr],wn=Tn.geometry,Nn=Tn.type,Si=_r===0?Tn.minX:Tn.minY,fa=_r===0?Tn.maxX:Tn.maxY;if(Si>=Qt&&fa<dr)tt.push(Tn);else if(!(fa<Qt||Si>=dr)){var Xi=[];if(Nn==="Point"||Nn==="MultiPoint")ae(wn,Xi,Qt,dr,_r);else if(Nn==="LineString")Be(wn,Xi,Qt,dr,_r,!1,fr.lineMetrics);else if(Nn==="MultiLineString")Je(wn,Xi,Qt,dr,_r,!1);else if(Nn==="Polygon")Je(wn,Xi,Qt,dr,_r,!0);else if(Nn==="MultiPolygon")for(var Ln=0;Ln<wn.length;Ln++){var na=[];Je(wn[Ln],na,Qt,dr,_r,!0),na.length&&Xi.push(na)}if(Xi.length){if(fr.lineMetrics&&Nn==="LineString"){for(Ln=0;Ln<Xi.length;Ln++)tt.push(Re(Tn.id,Nn,Xi[Ln],Tn.tags));continue}Nn!=="LineString"&&Nn!=="MultiLineString"||(Xi.length===1?(Nn="LineString",Xi=Xi[0]):Nn="MultiLineString"),Nn!=="Point"&&Nn!=="MultiPoint"||(Nn=Xi.length===3?"Point":"MultiPoint"),tt.push(Re(Tn.id,Nn,Xi,Tn.tags))}}}return tt.length?tt:null}function ae(Pt,zt,Qt,dr,_r){for(var Hr=0;Hr<Pt.length;Hr+=3){var Qr=Pt[Hr+_r];Qr>=Qt&&Qr<=dr&&(zt.push(Pt[Hr]),zt.push(Pt[Hr+1]),zt.push(Pt[Hr+2]))}}function Be(Pt,zt,Qt,dr,_r,Hr,Qr){for(var fr,tt,Yr=ve(Pt),Tn=_r===0?Qe:ir,wn=Pt.start,Nn=0;Nn<Pt.length-3;Nn+=3){var Si=Pt[Nn],fa=Pt[Nn+1],Xi=Pt[Nn+2],Ln=Pt[Nn+3],na=Pt[Nn+4],xi=_r===0?Si:fa,ta=_r===0?Ln:na,La=!1;Qr&&(fr=Math.sqrt(Math.pow(Si-Ln,2)+Math.pow(fa-na,2))),xi<Qt?ta>Qt&&(tt=Tn(Yr,Si,fa,Ln,na,Qt),Qr&&(Yr.start=wn+fr*tt)):xi>dr?ta<dr&&(tt=Tn(Yr,Si,fa,Ln,na,dr),Qr&&(Yr.start=wn+fr*tt)):ot(Yr,Si,fa,Xi),ta<Qt&&xi>=Qt&&(tt=Tn(Yr,Si,fa,Ln,na,Qt),La=!0),ta>dr&&xi<=dr&&(tt=Tn(Yr,Si,fa,Ln,na,dr),La=!0),!Hr&&La&&(Qr&&(Yr.end=wn+fr*tt),zt.push(Yr),Yr=ve(Pt)),Qr&&(wn+=fr)}var Ki=Pt.length-3;Si=Pt[Ki],fa=Pt[Ki+1],Xi=Pt[Ki+2],(xi=_r===0?Si:fa)>=Qt&&xi<=dr&&ot(Yr,Si,fa,Xi),Ki=Yr.length-3,Hr&&Ki>=3&&(Yr[Ki]!==Yr[0]||Yr[Ki+1]!==Yr[1])&&ot(Yr,Yr[0],Yr[1],Yr[2]),Yr.length&&zt.push(Yr)}function ve(Pt){var zt=[];return zt.size=Pt.size,zt.start=Pt.start,zt.end=Pt.end,zt}function Je(Pt,zt,Qt,dr,_r,Hr){for(var Qr=0;Qr<Pt.length;Qr++)Be(Pt[Qr],zt,Qt,dr,_r,Hr,!1)}function ot(Pt,zt,Qt,dr){Pt.push(zt),Pt.push(Qt),Pt.push(dr)}function Qe(Pt,zt,Qt,dr,_r,Hr){var Qr=(Hr-zt)/(dr-zt);return Pt.push(Hr),Pt.push(Qt+(_r-Qt)*Qr),Pt.push(1),Qr}function ir(Pt,zt,Qt,dr,_r,Hr){var Qr=(Hr-Qt)/(_r-Qt);return Pt.push(zt+(dr-zt)*Qr),Pt.push(Hr),Pt.push(1),Qr}function mr(Pt,zt){for(var Qt=[],dr=0;dr<Pt.length;dr++){var _r,Hr=Pt[dr],Qr=Hr.type;if(Qr==="Point"||Qr==="MultiPoint"||Qr==="LineString")_r=Ar(Hr.geometry,zt);else if(Qr==="MultiLineString"||Qr==="Polygon"){_r=[];for(var fr=0;fr<Hr.geometry.length;fr++)_r.push(Ar(Hr.geometry[fr],zt))}else if(Qr==="MultiPolygon")for(_r=[],fr=0;fr<Hr.geometry.length;fr++){for(var tt=[],Yr=0;Yr<Hr.geometry[fr].length;Yr++)tt.push(Ar(Hr.geometry[fr][Yr],zt));_r.push(tt)}Qt.push(Re(Hr.id,Qr,_r,Hr.tags))}return Qt}function Ar(Pt,zt){var Qt=[];Qt.size=Pt.size,Pt.start!==void 0&&(Qt.start=Pt.start,Qt.end=Pt.end);for(var dr=0;dr<Pt.length;dr+=3)Qt.push(Pt[dr]+zt,Pt[dr+1],Pt[dr+2]);return Qt}function Er(Pt,zt){if(Pt.transformed)return Pt;var Qt,dr,_r,Hr=1<<Pt.z,Qr=Pt.x,fr=Pt.y;for(Qt=0;Qt<Pt.features.length;Qt++){var tt=Pt.features[Qt],Yr=tt.geometry,Tn=tt.type;if(tt.geometry=[],Tn===1)for(dr=0;dr<Yr.length;dr+=2)tt.geometry.push(Zt(Yr[dr],Yr[dr+1],zt,Hr,Qr,fr));else for(dr=0;dr<Yr.length;dr++){var wn=[];for(_r=0;_r<Yr[dr].length;_r+=2)wn.push(Zt(Yr[dr][_r],Yr[dr][_r+1],zt,Hr,Qr,fr));tt.geometry.push(wn)}}return Pt.transformed=!0,Pt}function Zt(Pt,zt,Qt,dr,_r,Hr){return[Math.round(Qt*(Pt*dr-_r)),Math.round(Qt*(zt*dr-Hr))]}function Tr(Pt,zt,Qt,dr,_r){for(var Hr=zt===_r.maxZoom?0:_r.tolerance/((1<<zt)*_r.extent),Qr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qt,y:dr,z:zt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fr=0;fr<Pt.length;fr++){Qr.numFeatures++,pn(Qr,Pt[fr],Hr,_r);var tt=Pt[fr].minX,Yr=Pt[fr].minY,Tn=Pt[fr].maxX,wn=Pt[fr].maxY;tt<Qr.minX&&(Qr.minX=tt),Yr<Qr.minY&&(Qr.minY=Yr),Tn>Qr.maxX&&(Qr.maxX=Tn),wn>Qr.maxY&&(Qr.maxY=wn)}return Qr}function pn(Pt,zt,Qt,dr){var _r=zt.geometry,Hr=zt.type,Qr=[];if(Hr==="Point"||Hr==="MultiPoint")for(var fr=0;fr<_r.length;fr+=3)Qr.push(_r[fr]),Qr.push(_r[fr+1]),Pt.numPoints++,Pt.numSimplified++;else if(Hr==="LineString")un(Qr,_r,Pt,Qt,!1,!1);else if(Hr==="MultiLineString"||Hr==="Polygon")for(fr=0;fr<_r.length;fr++)un(Qr,_r[fr],Pt,Qt,Hr==="Polygon",fr===0);else if(Hr==="MultiPolygon")for(var tt=0;tt<_r.length;tt++){var Yr=_r[tt];for(fr=0;fr<Yr.length;fr++)un(Qr,Yr[fr],Pt,Qt,!0,fr===0)}if(Qr.length){var Tn=zt.tags||null;if(Hr==="LineString"&&dr.lineMetrics){for(var wn in Tn={},zt.tags)Tn[wn]=zt.tags[wn];Tn.mapbox_clip_start=_r.start/_r.size,Tn.mapbox_clip_end=_r.end/_r.size}var Nn={geometry:Qr,type:Hr==="Polygon"||Hr==="MultiPolygon"?3:Hr==="LineString"||Hr==="MultiLineString"?2:1,tags:Tn};zt.id!==null&&(Nn.id=zt.id),Pt.features.push(Nn)}}function un(Pt,zt,Qt,dr,_r,Hr){var Qr=dr*dr;if(dr>0&&zt.size<(_r?Qr:dr))Qt.numPoints+=zt.length/3;else{for(var fr=[],tt=0;tt<zt.length;tt+=3)(dr===0||zt[tt+2]>Qr)&&(Qt.numSimplified++,fr.push(zt[tt]),fr.push(zt[tt+1])),Qt.numPoints++;_r&&function(Yr,Tn){for(var wn=0,Nn=0,Si=Yr.length,fa=Si-2;Nn<Si;fa=Nn,Nn+=2)wn+=(Yr[Nn]-Yr[fa])*(Yr[Nn+1]+Yr[fa+1]);if(wn>0===Tn)for(Nn=0,Si=Yr.length;Nn<Si/2;Nn+=2){var Xi=Yr[Nn],Ln=Yr[Nn+1];Yr[Nn]=Yr[Si-2-Nn],Yr[Nn+1]=Yr[Si-1-Nn],Yr[Si-2-Nn]=Xi,Yr[Si-1-Nn]=Ln}}(fr,Hr),Pt.push(fr)}}function Zn(Pt,zt){var Qt=(zt=this.options=function(_r,Hr){for(var Qr in Hr)_r[Qr]=Hr[Qr];return _r}(Object.create(this.options),zt)).debug;if(Qt&&console.time("preprocess data"),zt.maxZoom<0||zt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(zt.promoteId&&zt.generateId)throw new Error("promoteId and generateId cannot be used together.");var dr=function(_r,Hr){var Qr=[];if(_r.type==="FeatureCollection")for(var fr=0;fr<_r.features.length;fr++)D(Qr,_r.features[fr],Hr,fr);else D(Qr,_r.type==="Feature"?_r:{geometry:_r},Hr);return Qr}(Pt,zt);this.tiles={},this.tileCoords=[],Qt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",zt.indexMaxZoom,zt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(dr=function(_r,Hr){var Qr=Hr.buffer/Hr.extent,fr=_r,tt=W(_r,1,-1-Qr,Qr,0,-1,2,Hr),Yr=W(_r,1,1-Qr,2+Qr,0,-1,2,Hr);return(tt||Yr)&&(fr=W(_r,1,-Qr,1+Qr,0,-1,2,Hr)||[],tt&&(fr=mr(tt,1).concat(fr)),Yr&&(fr=fr.concat(mr(Yr,-1)))),fr}(dr,zt)).length&&this.splitTile(dr,0,0,0),Qt&&(dr.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Cr(Pt,zt,Qt){return 32*((1<<Pt)*Qt+zt)+Pt}function Nr(Pt,zt){var Qt=Pt.tileID.canonical;if(!this._geoJSONIndex)return zt(null,null);var dr=this._geoJSONIndex.getTile(Qt.z,Qt.x,Qt.y);if(!dr)return zt(null,null);var _r=new Lt(dr.features),Hr=ye(_r);Hr.byteOffset===0&&Hr.byteLength===Hr.buffer.byteLength||(Hr=new Uint8Array(Hr)),zt(null,{vectorTile:_r,rawData:Hr.buffer})}It.prototype.load=function(Pt){var zt=this.options,Qt=zt.log,dr=zt.minZoom,_r=zt.maxZoom,Hr=zt.nodeSize;Qt&&console.time("total time");var Qr="prepare "+Pt.length+" points";Qt&&console.time(Qr),this.points=Pt;for(var fr=[],tt=0;tt<Pt.length;tt++)Pt[tt].geometry&&fr.push(_t(Pt[tt],tt));this.trees[_r+1]=new lt(fr,Ge,wt,Hr,Float32Array),Qt&&console.timeEnd(Qr);for(var Yr=_r;Yr>=dr;Yr--){var Tn=+Date.now();fr=this._cluster(fr,Yr),this.trees[Yr]=new lt(fr,Ge,wt,Hr,Float32Array),Qt&&console.log("z%d: %d clusters in %dms",Yr,fr.length,+Date.now()-Tn)}return Qt&&console.timeEnd("total time"),this},It.prototype.getClusters=function(Pt,zt){var Qt=((Pt[0]+180)%360+360)%360-180,dr=Math.max(-90,Math.min(90,Pt[1])),_r=Pt[2]===180?180:((Pt[2]+180)%360+360)%360-180,Hr=Math.max(-90,Math.min(90,Pt[3]));if(Pt[2]-Pt[0]>=360)Qt=-180,_r=180;else if(Qt>_r){var Qr=this.getClusters([Qt,dr,180,Hr],zt),fr=this.getClusters([-180,dr,_r,Hr],zt);return Qr.concat(fr)}for(var tt=this.trees[this._limitZoom(zt)],Yr=[],Tn=0,wn=tt.range(mt(Qt),Rt(Hr),mt(_r),Rt(dr));Tn<wn.length;Tn+=1){var Nn=tt.points[wn[Tn]];Yr.push(Nn.numPoints?Ye(Nn):this.points[Nn.index])}return Yr},It.prototype.getChildren=function(Pt){var zt=this._getOriginId(Pt),Qt=this._getOriginZoom(Pt),dr="No cluster with the specified id.",_r=this.trees[Qt];if(!_r)throw new Error(dr);var Hr=_r.points[zt];if(!Hr)throw new Error(dr);for(var Qr=this.options.radius/(this.options.extent*Math.pow(2,Qt-1)),fr=[],tt=0,Yr=_r.within(Hr.x,Hr.y,Qr);tt<Yr.length;tt+=1){var Tn=_r.points[Yr[tt]];Tn.parentId===Pt&&fr.push(Tn.numPoints?Ye(Tn):this.points[Tn.index])}if(fr.length===0)throw new Error(dr);return fr},It.prototype.getLeaves=function(Pt,zt,Qt){var dr=[];return this._appendLeaves(dr,Pt,zt=zt||10,Qt=Qt||0,0),dr},It.prototype.getTile=function(Pt,zt,Qt){var dr=this.trees[this._limitZoom(Pt)],_r=Math.pow(2,Pt),Hr=this.options,Qr=Hr.radius/Hr.extent,fr=(Qt-Qr)/_r,tt=(Qt+1+Qr)/_r,Yr={features:[]};return this._addTileFeatures(dr.range((zt-Qr)/_r,fr,(zt+1+Qr)/_r,tt),dr.points,zt,Qt,_r,Yr),zt===0&&this._addTileFeatures(dr.range(1-Qr/_r,fr,1,tt),dr.points,_r,Qt,_r,Yr),zt===_r-1&&this._addTileFeatures(dr.range(0,fr,Qr/_r,tt),dr.points,-1,Qt,_r,Yr),Yr.features.length?Yr:null},It.prototype.getClusterExpansionZoom=function(Pt){for(var zt=this._getOriginZoom(Pt)-1;zt<=this.options.maxZoom;){var Qt=this.getChildren(Pt);if(zt++,Qt.length!==1)break;Pt=Qt[0].properties.cluster_id}return zt},It.prototype._appendLeaves=function(Pt,zt,Qt,dr,_r){for(var Hr=0,Qr=this.getChildren(zt);Hr<Qr.length;Hr+=1){var fr=Qr[Hr],tt=fr.properties;if(tt&&tt.cluster?_r+tt.point_count<=dr?_r+=tt.point_count:_r=this._appendLeaves(Pt,tt.cluster_id,Qt,dr,_r):_r<dr?_r++:Pt.push(fr),Pt.length===Qt)break}return _r},It.prototype._addTileFeatures=function(Pt,zt,Qt,dr,_r,Hr){for(var Qr=0,fr=Pt;Qr<fr.length;Qr+=1){var tt=zt[fr[Qr]],Yr=tt.numPoints,Tn={type:1,geometry:[[Math.round(this.options.extent*(tt.x*_r-Qt)),Math.round(this.options.extent*(tt.y*_r-dr))]],tags:Yr?Ot(tt):this.points[tt.index].properties},wn=void 0;Yr?wn=tt.id:this.options.generateId?wn=tt.index:this.points[tt.index].id&&(wn=this.points[tt.index].id),wn!==void 0&&(Tn.id=wn),Hr.features.push(Tn)}},It.prototype._limitZoom=function(Pt){return Math.max(this.options.minZoom,Math.min(+Pt,this.options.maxZoom+1))},It.prototype._cluster=function(Pt,zt){for(var Qt=[],dr=this.options,_r=dr.reduce,Hr=dr.minPoints,Qr=dr.radius/(dr.extent*Math.pow(2,zt)),fr=0;fr<Pt.length;fr++){var tt=Pt[fr];if(!(tt.zoom<=zt)){tt.zoom=zt;for(var Yr=this.trees[zt+1],Tn=Yr.within(tt.x,tt.y,Qr),wn=tt.numPoints||1,Nn=wn,Si=0,fa=Tn;Si<fa.length;Si+=1){var Xi=Yr.points[fa[Si]];Xi.zoom>zt&&(Nn+=Xi.numPoints||1)}if(Nn>=Hr){for(var Ln=tt.x*wn,na=tt.y*wn,xi=_r&&wn>1?this._map(tt,!0):null,ta=(fr<<5)+(zt+1)+this.points.length,La=0,Ki=Tn;La<Ki.length;La+=1){var jo=Yr.points[Ki[La]];if(!(jo.zoom<=zt)){jo.zoom=zt;var uo=jo.numPoints||1;Ln+=jo.x*uo,na+=jo.y*uo,jo.parentId=ta,_r&&(xi||(xi=this._map(tt,!0)),_r(xi,this._map(jo)))}}tt.parentId=ta,Qt.push(fe(Ln/Nn,na/Nn,ta,Nn,xi))}else if(Qt.push(tt),Nn>1)for(var An=0,gn=Tn;An<gn.length;An+=1){var Oi=Yr.points[gn[An]];Oi.zoom<=zt||(Oi.zoom=zt,Qt.push(Oi))}}}return Qt},It.prototype._getOriginId=function(Pt){return Pt-this.points.length>>5},It.prototype._getOriginZoom=function(Pt){return(Pt-this.points.length)%32},It.prototype._map=function(Pt,zt){if(Pt.numPoints)return zt?pt({},Pt.properties):Pt.properties;var Qt=this.points[Pt.index].properties,dr=this.options.map(Qt);return zt&&dr===Qt?pt({},dr):dr},Zn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Zn.prototype.splitTile=function(Pt,zt,Qt,dr,_r,Hr,Qr){for(var fr=[Pt,zt,Qt,dr],tt=this.options,Yr=tt.debug;fr.length;){dr=fr.pop(),Qt=fr.pop(),zt=fr.pop(),Pt=fr.pop();var Tn=1<<zt,wn=Cr(zt,Qt,dr),Nn=this.tiles[wn];if(!Nn&&(Yr>1&&console.time("creation"),Nn=this.tiles[wn]=Tr(Pt,zt,Qt,dr,tt),this.tileCoords.push({z:zt,x:Qt,y:dr}),Yr)){Yr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",zt,Qt,dr,Nn.numFeatures,Nn.numPoints,Nn.numSimplified),console.timeEnd("creation"));var Si="z"+zt;this.stats[Si]=(this.stats[Si]||0)+1,this.total++}if(Nn.source=Pt,_r){if(zt===tt.maxZoom||zt===_r)continue;var fa=1<<_r-zt;if(Qt!==Math.floor(Hr/fa)||dr!==Math.floor(Qr/fa))continue}else if(zt===tt.indexMaxZoom||Nn.numPoints<=tt.indexMaxPoints)continue;if(Nn.source=null,Pt.length!==0){Yr>1&&console.time("clipping");var Xi,Ln,na,xi,ta,La,Ki=.5*tt.buffer/tt.extent,jo=.5-Ki,uo=.5+Ki,An=1+Ki;Xi=Ln=na=xi=null,ta=W(Pt,Tn,Qt-Ki,Qt+uo,0,Nn.minX,Nn.maxX,tt),La=W(Pt,Tn,Qt+jo,Qt+An,0,Nn.minX,Nn.maxX,tt),Pt=null,ta&&(Xi=W(ta,Tn,dr-Ki,dr+uo,1,Nn.minY,Nn.maxY,tt),Ln=W(ta,Tn,dr+jo,dr+An,1,Nn.minY,Nn.maxY,tt),ta=null),La&&(na=W(La,Tn,dr-Ki,dr+uo,1,Nn.minY,Nn.maxY,tt),xi=W(La,Tn,dr+jo,dr+An,1,Nn.minY,Nn.maxY,tt),La=null),Yr>1&&console.timeEnd("clipping"),fr.push(Xi||[],zt+1,2*Qt,2*dr),fr.push(Ln||[],zt+1,2*Qt,2*dr+1),fr.push(na||[],zt+1,2*Qt+1,2*dr),fr.push(xi||[],zt+1,2*Qt+1,2*dr+1)}}},Zn.prototype.getTile=function(Pt,zt,Qt){var dr=this.options,_r=dr.extent,Hr=dr.debug;if(Pt<0||Pt>24)return null;var Qr=1<<Pt,fr=Cr(Pt,zt=(zt%Qr+Qr)%Qr,Qt);if(this.tiles[fr])return Er(this.tiles[fr],_r);Hr>1&&console.log("drilling down to z%d-%d-%d",Pt,zt,Qt);for(var tt,Yr=Pt,Tn=zt,wn=Qt;!tt&&Yr>0;)Yr--,Tn=Math.floor(Tn/2),wn=Math.floor(wn/2),tt=this.tiles[Cr(Yr,Tn,wn)];return tt&&tt.source?(Hr>1&&console.log("found parent tile z%d-%d-%d",Yr,Tn,wn),Hr>1&&console.time("drilling down"),this.splitTile(tt.source,Yr,Tn,wn,Pt,zt,Qt),Hr>1&&console.timeEnd("drilling down"),this.tiles[fr]?Er(this.tiles[fr],_r):null):null};var bt=function(Pt){function zt(Qt,dr,_r,Hr){Pt.call(this,Qt,dr,_r,Nr),Hr&&(this.loadGeoJSON=Hr)}return Pt&&(zt.__proto__=Pt),(zt.prototype=Object.create(Pt&&Pt.prototype)).constructor=zt,zt.prototype.loadData=function(Qt,dr){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=dr,this._pendingLoadDataParams=Qt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},zt.prototype._loadData=function(){var Qt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var dr=this._pendingCallback,_r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Hr=!!(_r&&_r.request&&_r.request.collectResourceTiming)&&new c.RequestPerformance(_r.request);this.loadGeoJSON(_r,function(Qr,fr){if(Qr||!fr)return dr(Qr);if(typeof fr!="object")return dr(new Error("Input data given to '"+_r.source+"' is not a valid GeoJSON object."));(function Nn(Si,fa){var Xi,Ln=Si&&Si.type;if(Ln==="FeatureCollection")for(Xi=0;Xi<Si.features.length;Xi++)Nn(Si.features[Xi],fa);else if(Ln==="GeometryCollection")for(Xi=0;Xi<Si.geometries.length;Xi++)Nn(Si.geometries[Xi],fa);else if(Ln==="Feature")Nn(Si.geometry,fa);else if(Ln==="Polygon")Le(Si.coordinates,fa);else if(Ln==="MultiPolygon")for(Xi=0;Xi<Si.coordinates.length;Xi++)Le(Si.coordinates[Xi],fa);return Si})(fr,!0);try{if(_r.filter){var tt=c.createExpression(_r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(tt.result==="error")throw new Error(tt.value.map(function(Nn){return Nn.key+": "+Nn.message}).join(", "));var Yr=fr.features.filter(function(Nn){return tt.value.evaluate({zoom:0},Nn)});fr={type:"FeatureCollection",features:Yr}}Qt._geoJSONIndex=_r.cluster?new It(function(Nn){var Si=Nn.superclusterOptions,fa=Nn.clusterProperties;if(!fa||!Si)return Si;for(var Xi={},Ln={},na={accumulated:null,zoom:0},xi={properties:null},ta=Object.keys(fa),La=0,Ki=ta;La<Ki.length;La+=1){var jo=Ki[La],uo=fa[jo],An=uo[0],gn=c.createExpression(uo[1]),Oi=c.createExpression(typeof An=="string"?[An,["accumulated"],["get",jo]]:An);Xi[jo]=gn.value,Ln[jo]=Oi.value}return Si.map=function(fi){xi.properties=fi;for(var va={},wa=0,Ca=ta;wa<Ca.length;wa+=1){var Aa=Ca[wa];va[Aa]=Xi[Aa].evaluate(na,xi)}return va},Si.reduce=function(fi,va){xi.properties=va;for(var wa=0,Ca=ta;wa<Ca.length;wa+=1){var Aa=Ca[wa];na.accumulated=fi[Aa],fi[Aa]=Ln[Aa].evaluate(na,xi)}},Si}(_r)).load(fr.features):function(Nn,Si){return new Zn(Nn,Si)}(fr,_r.geojsonVtOptions)}catch(Nn){return dr(Nn)}Qt.loaded={};var Tn={};if(Hr){var wn=Hr.finish();wn&&(Tn.resourceTiming={},Tn.resourceTiming[_r.source]=JSON.parse(JSON.stringify(wn)))}dr(null,Tn)})}},zt.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},zt.prototype.reloadTile=function(Qt,dr){var _r=this.loaded;return _r&&_r[Qt.uid]?Pt.prototype.reloadTile.call(this,Qt,dr):this.loadTile(Qt,dr)},zt.prototype.loadGeoJSON=function(Qt,dr){if(Qt.request)c.getJSON(Qt.request,dr);else{if(typeof Qt.data!="string")return dr(new Error("Input data given to '"+Qt.source+"' is not a valid GeoJSON object."));try{return dr(null,JSON.parse(Qt.data))}catch(_r){return dr(new Error("Input data given to '"+Qt.source+"' is not a valid GeoJSON object."))}}},zt.prototype.removeSource=function(Qt,dr){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),dr()},zt.prototype.getClusterExpansionZoom=function(Qt,dr){try{dr(null,this._geoJSONIndex.getClusterExpansionZoom(Qt.clusterId))}catch(_r){dr(_r)}},zt.prototype.getClusterChildren=function(Qt,dr){try{dr(null,this._geoJSONIndex.getChildren(Qt.clusterId))}catch(_r){dr(_r)}},zt.prototype.getClusterLeaves=function(Qt,dr){try{dr(null,this._geoJSONIndex.getLeaves(Qt.clusterId,Qt.limit,Qt.offset))}catch(_r){dr(_r)}},zt}(ke),jn=function(Pt){var zt=this;this.self=Pt,this.actor=new c.Actor(Pt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ke,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Qt,dr){if(zt.workerSourceTypes[Qt])throw new Error('Worker source with name "'+Qt+'" already registered.');zt.workerSourceTypes[Qt]=dr},this.self.registerRTLTextPlugin=function(Qt){if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=Qt.applyArabicShaping,c.plugin.processBidirectionalText=Qt.processBidirectionalText,c.plugin.processStyledBidirectionalText=Qt.processStyledBidirectionalText}};return jn.prototype.setReferrer=function(Pt,zt){this.referrer=zt},jn.prototype.setImages=function(Pt,zt,Qt){for(var dr in this.availableImages[Pt]=zt,this.workerSources[Pt]){var _r=this.workerSources[Pt][dr];for(var Hr in _r)_r[Hr].availableImages=zt}Qt()},jn.prototype.setLayers=function(Pt,zt,Qt){this.getLayerIndex(Pt).replace(zt),Qt()},jn.prototype.updateLayers=function(Pt,zt,Qt){this.getLayerIndex(Pt).update(zt.layers,zt.removedIds),Qt()},jn.prototype.loadTile=function(Pt,zt,Qt){this.getWorkerSource(Pt,zt.type,zt.source).loadTile(zt,Qt)},jn.prototype.loadDEMTile=function(Pt,zt,Qt){this.getDEMWorkerSource(Pt,zt.source).loadTile(zt,Qt)},jn.prototype.reloadTile=function(Pt,zt,Qt){this.getWorkerSource(Pt,zt.type,zt.source).reloadTile(zt,Qt)},jn.prototype.abortTile=function(Pt,zt,Qt){this.getWorkerSource(Pt,zt.type,zt.source).abortTile(zt,Qt)},jn.prototype.removeTile=function(Pt,zt,Qt){this.getWorkerSource(Pt,zt.type,zt.source).removeTile(zt,Qt)},jn.prototype.removeDEMTile=function(Pt,zt){this.getDEMWorkerSource(Pt,zt.source).removeTile(zt)},jn.prototype.removeSource=function(Pt,zt,Qt){if(this.workerSources[Pt]&&this.workerSources[Pt][zt.type]&&this.workerSources[Pt][zt.type][zt.source]){var dr=this.workerSources[Pt][zt.type][zt.source];delete this.workerSources[Pt][zt.type][zt.source],dr.removeSource!==void 0?dr.removeSource(zt,Qt):Qt()}},jn.prototype.loadWorkerSource=function(Pt,zt,Qt){try{this.self.importScripts(zt.url),Qt()}catch(dr){Qt(dr.toString())}},jn.prototype.syncRTLPluginState=function(Pt,zt,Qt){try{c.plugin.setState(zt);var dr=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&dr!=null){this.self.importScripts(dr);var _r=c.plugin.isParsed();Qt(_r?void 0:new Error("RTL Text Plugin failed to import scripts from "+dr),_r)}}catch(Hr){Qt(Hr.toString())}},jn.prototype.getAvailableImages=function(Pt){var zt=this.availableImages[Pt];return zt||(zt=[]),zt},jn.prototype.getLayerIndex=function(Pt){var zt=this.layerIndexes[Pt];return zt||(zt=this.layerIndexes[Pt]=new Z),zt},jn.prototype.getWorkerSource=function(Pt,zt,Qt){var dr=this;return this.workerSources[Pt]||(this.workerSources[Pt]={}),this.workerSources[Pt][zt]||(this.workerSources[Pt][zt]={}),this.workerSources[Pt][zt][Qt]||(this.workerSources[Pt][zt][Qt]=new this.workerSourceTypes[zt]({send:function(_r,Hr,Qr){dr.actor.send(_r,Hr,Qr,Pt)}},this.getLayerIndex(Pt),this.getAvailableImages(Pt))),this.workerSources[Pt][zt][Qt]},jn.prototype.getDEMWorkerSource=function(Pt,zt){return this.demWorkerSources[Pt]||(this.demWorkerSources[Pt]={}),this.demWorkerSources[Pt][zt]||(this.demWorkerSources[Pt][zt]=new me),this.demWorkerSources[Pt][zt]},jn.prototype.enforceCacheSizeLimit=function(Pt,zt){c.enforceCacheSizeLimit(zt)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new jn(self)),jn}),M(["./shared"],function(c){"use strict";var K=c.createCommonjsModule(function(f){function m(Y){return!p(Y)}function p(Y){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ze,gt,Gt=new Blob([""],{type:"text/javascript"}),sr=URL.createObjectURL(Gt);try{gt=new Worker(sr),ze=!0}catch(Mr){ze=!1}return gt&&gt.terminate(),URL.revokeObjectURL(sr),ze}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ze=document.createElement("canvas");ze.width=ze.height=1;var gt=ze.getContext("2d");if(!gt)return!1;var Gt=gt.getImageData(0,0,1,1);return Gt&&Gt.width===ze.width}()?(E[Ce=Y&&Y.failIfMajorPerformanceCaveat]===void 0&&(E[Ce]=function(ze){var gt=function(sr){var Mr=document.createElement("canvas"),Or=Object.create(m.webGLContextAttributes);return Or.failIfMajorPerformanceCaveat=sr,Mr.probablySupportsContext?Mr.probablySupportsContext("webgl",Or)||Mr.probablySupportsContext("experimental-webgl",Or):Mr.supportsContext?Mr.supportsContext("webgl",Or)||Mr.supportsContext("experimental-webgl",Or):Mr.getContext("webgl",Or)||Mr.getContext("experimental-webgl",Or)}(ze);if(!gt)return!1;var Gt=gt.createShader(gt.VERTEX_SHADER);return!(!Gt||gt.isContextLost())&&(gt.shaderSource(Gt,"void main() {}"),gt.compileShader(Gt),gt.getShaderParameter(Gt,gt.COMPILE_STATUS)===!0)}(Ce)),E[Ce]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Ce}f.exports?f.exports=m:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=m,window.mapboxgl.notSupportedReason=p);var E={};m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),N={create:function(f,m,p){var E=c.window.document.createElement(f);return m!==void 0&&(E.className=m),p&&p.appendChild(E),E},createNS:function(f,m){return c.window.document.createElementNS(f,m)}},Z=c.window.document&&c.window.document.documentElement.style;function B(f){if(!Z)return f[0];for(var m=0;m<f.length;m++)if(f[m]in Z)return f[m];return f[0]}var L,$=B(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);N.disableDrag=function(){Z&&$&&(L=Z[$],Z[$]="none")},N.enableDrag=function(){Z&&$&&(Z[$]=L)};var U=B(["transform","WebkitTransform"]);N.setTransform=function(f,m){f.style[U]=m};var ke=!1;try{var We=Object.defineProperty({},"passive",{get:function(){ke=!0}});c.window.addEventListener("test",We,We),c.window.removeEventListener("test",We,We)}catch(f){ke=!1}N.addEventListener=function(f,m,p,E){E===void 0&&(E={}),f.addEventListener(m,p,"passive"in E&&ke?E:E.capture)},N.removeEventListener=function(f,m,p,E){E===void 0&&(E={}),f.removeEventListener(m,p,"passive"in E&&ke?E:E.capture)};var me=function(f){f.preventDefault(),f.stopPropagation(),c.window.removeEventListener("click",me,!0)};function Le(f){var m=f.userImage;return!!(m&&m.render&&m.render())&&(f.data.replace(new Uint8Array(m.data.buffer)),!0)}N.suppressClick=function(){c.window.addEventListener("click",me,!0),c.window.setTimeout(function(){c.window.removeEventListener("click",me,!0)},0)},N.mousePos=function(f,m){var p=f.getBoundingClientRect();return new c.Point(m.clientX-p.left-f.clientLeft,m.clientY-p.top-f.clientTop)},N.touchPos=function(f,m){for(var p=f.getBoundingClientRect(),E=[],Y=0;Y<m.length;Y++)E.push(new c.Point(m[Y].clientX-p.left-f.clientLeft,m[Y].clientY-p.top-f.clientTop));return E},N.mouseButton=function(f){return c.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&c.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},N.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};var Se=function(f){function m(){f.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.isLoaded=function(){return this.loaded},m.prototype.setLoaded=function(p){if(this.loaded!==p&&(this.loaded=p,p)){for(var E=0,Y=this.requestors;E<Y.length;E+=1){var Ce=Y[E];this._notify(Ce.ids,Ce.callback)}this.requestors=[]}},m.prototype.getImage=function(p){return this.images[p]},m.prototype.addImage=function(p,E){this._validate(p,E)&&(this.images[p]=E)},m.prototype._validate=function(p,E){var Y=!0;return this._validateStretch(E.stretchX,E.data&&E.data.width)||(this.fire(new c.ErrorEvent(new Error('Image "'+p+'" has invalid "stretchX" value'))),Y=!1),this._validateStretch(E.stretchY,E.data&&E.data.height)||(this.fire(new c.ErrorEvent(new Error('Image "'+p+'" has invalid "stretchY" value'))),Y=!1),this._validateContent(E.content,E)||(this.fire(new c.ErrorEvent(new Error('Image "'+p+'" has invalid "content" value'))),Y=!1),Y},m.prototype._validateStretch=function(p,E){if(!p)return!0;for(var Y=0,Ce=0,ze=p;Ce<ze.length;Ce+=1){var gt=ze[Ce];if(gt[0]<Y||gt[1]<gt[0]||E<gt[1])return!1;Y=gt[1]}return!0},m.prototype._validateContent=function(p,E){return!(p&&(p.length!==4||p[0]<0||E.data.width<p[0]||p[1]<0||E.data.height<p[1]||p[2]<0||E.data.width<p[2]||p[3]<0||E.data.height<p[3]||p[2]<p[0]||p[3]<p[1]))},m.prototype.updateImage=function(p,E){E.version=this.images[p].version+1,this.images[p]=E,this.updatedImages[p]=!0},m.prototype.removeImage=function(p){var E=this.images[p];delete this.images[p],delete this.patterns[p],E.userImage&&E.userImage.onRemove&&E.userImage.onRemove()},m.prototype.listImages=function(){return Object.keys(this.images)},m.prototype.getImages=function(p,E){var Y=!0;if(!this.isLoaded())for(var Ce=0,ze=p;Ce<ze.length;Ce+=1)this.images[ze[Ce]]||(Y=!1);this.isLoaded()||Y?this._notify(p,E):this.requestors.push({ids:p,callback:E})},m.prototype._notify=function(p,E){for(var Y={},Ce=0,ze=p;Ce<ze.length;Ce+=1){var gt=ze[Ce];this.images[gt]||this.fire(new c.Event("styleimagemissing",{id:gt}));var Gt=this.images[gt];Gt?Y[gt]={data:Gt.data.clone(),pixelRatio:Gt.pixelRatio,sdf:Gt.sdf,version:Gt.version,stretchX:Gt.stretchX,stretchY:Gt.stretchY,content:Gt.content,hasRenderCallback:Boolean(Gt.userImage&&Gt.userImage.render)}:c.warnOnce('Image "'+gt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}E(null,Y)},m.prototype.getPixelSize=function(){var p=this.atlasImage;return{width:p.width,height:p.height}},m.prototype.getPattern=function(p){var E=this.patterns[p],Y=this.getImage(p);if(!Y)return null;if(E&&E.position.version===Y.version)return E.position;if(E)E.position.version=Y.version;else{var Ce={w:Y.data.width+2,h:Y.data.height+2,x:0,y:0},ze=new c.ImagePosition(Ce,Y);this.patterns[p]={bin:Ce,position:ze}}return this._updatePatternAtlas(),this.patterns[p].position},m.prototype.bind=function(p){var E=p.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.Texture(p,this.atlasImage,E.RGBA),this.atlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE)},m.prototype._updatePatternAtlas=function(){var p=[];for(var E in this.patterns)p.push(this.patterns[E].bin);var Y=c.potpack(p),Ce=Y.w,ze=Y.h,gt=this.atlasImage;for(var Gt in gt.resize({width:Ce||1,height:ze||1}),this.patterns){var sr=this.patterns[Gt].bin,Mr=sr.x+1,Or=sr.y+1,Br=this.images[Gt].data,yn=Br.width,hn=Br.height;c.RGBAImage.copy(Br,gt,{x:0,y:0},{x:Mr,y:Or},{width:yn,height:hn}),c.RGBAImage.copy(Br,gt,{x:0,y:hn-1},{x:Mr,y:Or-1},{width:yn,height:1}),c.RGBAImage.copy(Br,gt,{x:0,y:0},{x:Mr,y:Or+hn},{width:yn,height:1}),c.RGBAImage.copy(Br,gt,{x:yn-1,y:0},{x:Mr-1,y:Or},{width:1,height:hn}),c.RGBAImage.copy(Br,gt,{x:0,y:0},{x:Mr+yn,y:Or},{width:1,height:hn})}this.dirty=!0},m.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},m.prototype.dispatchRenderCallbacks=function(p){for(var E=0,Y=p;E<Y.length;E+=1){var Ce=Y[E];if(!this.callbackDispatchedThisFrame[Ce]){this.callbackDispatchedThisFrame[Ce]=!0;var ze=this.images[Ce];Le(ze)&&this.updateImage(Ce,ze)}}},m}(c.Evented),et=Et,at=Et,Lt=1e20;function Et(f,m,p,E,Y,Ce){this.fontSize=f||24,this.buffer=m===void 0?3:m,this.cutoff=E||.25,this.fontFamily=Y||"sans-serif",this.fontWeight=Ce||"normal",this.radius=p||8;var ze=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ze,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ze*ze),this.gridInner=new Float64Array(ze*ze),this.f=new Float64Array(ze),this.d=new Float64Array(ze),this.z=new Float64Array(ze+1),this.v=new Int16Array(ze),this.middle=Math.round(ze/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function jt(f,m,p,E,Y,Ce,ze){for(var gt=0;gt<m;gt++){for(var Gt=0;Gt<p;Gt++)E[Gt]=f[Gt*m+gt];for(pe(E,Y,Ce,ze,p),Gt=0;Gt<p;Gt++)f[Gt*m+gt]=Y[Gt]}for(Gt=0;Gt<p;Gt++){for(gt=0;gt<m;gt++)E[gt]=f[Gt*m+gt];for(pe(E,Y,Ce,ze,m),gt=0;gt<m;gt++)f[Gt*m+gt]=Math.sqrt(Y[gt])}}function pe(f,m,p,E,Y){p[0]=0,E[0]=-Lt,E[1]=+Lt;for(var Ce=1,ze=0;Ce<Y;Ce++){for(var gt=(f[Ce]+Ce*Ce-(f[p[ze]]+p[ze]*p[ze]))/(2*Ce-2*p[ze]);gt<=E[ze];)ze--,gt=(f[Ce]+Ce*Ce-(f[p[ze]]+p[ze]*p[ze]))/(2*Ce-2*p[ze]);p[++ze]=Ce,E[ze]=gt,E[ze+1]=+Lt}for(Ce=0,ze=0;Ce<Y;Ce++){for(;E[ze+1]<Ce;)ze++;m[Ce]=(Ce-p[ze])*(Ce-p[ze])+f[p[ze]]}}Et.prototype.draw=function(f){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(f,this.buffer,this.middle);for(var m=this.ctx.getImageData(0,0,this.size,this.size),p=new Uint8ClampedArray(this.size*this.size),E=0;E<this.size*this.size;E++){var Y=m.data[4*E+3]/255;this.gridOuter[E]=Y===1?0:Y===0?Lt:Math.pow(Math.max(0,.5-Y),2),this.gridInner[E]=Y===1?Lt:Y===0?0:Math.pow(Math.max(0,Y-.5),2)}for(jt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),jt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),E=0;E<this.size*this.size;E++)p[E]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[E]-this.gridInner[E])/this.radius+this.cutoff))));return p},et.default=at;var $e=function(f,m){this.requestManager=f,this.localIdeographFontFamily=m,this.entries={}};$e.prototype.setURL=function(f){this.url=f},$e.prototype.getGlyphs=function(f,m){var p=this,E=[];for(var Y in f)for(var Ce=0,ze=f[Y];Ce<ze.length;Ce+=1)E.push({stack:Y,id:ze[Ce]});c.asyncAll(E,function(gt,Gt){var sr=gt.stack,Mr=gt.id,Or=p.entries[sr];Or||(Or=p.entries[sr]={glyphs:{},requests:{},ranges:{}});var Br=Or.glyphs[Mr];if(Br===void 0){if(Br=p._tinySDF(Or,sr,Mr))return Or.glyphs[Mr]=Br,void Gt(null,{stack:sr,id:Mr,glyph:Br});var yn=Math.floor(Mr/256);if(256*yn>65535)Gt(new Error("glyphs > 65535 not supported"));else if(Or.ranges[yn])Gt(null,{stack:sr,id:Mr,glyph:Br});else{var hn=Or.requests[yn];hn||(hn=Or.requests[yn]=[],$e.loadGlyphRange(sr,yn,p.url,p.requestManager,function(kn,an){if(an){for(var Rn in an)p._doesCharSupportLocalGlyph(+Rn)||(Or.glyphs[+Rn]=an[+Rn]);Or.ranges[yn]=!0}for(var $n=0,di=hn;$n<di.length;$n+=1)(0,di[$n])(kn,an);delete Or.requests[yn]})),hn.push(function(kn,an){kn?Gt(kn):an&&Gt(null,{stack:sr,id:Mr,glyph:an[Mr]||null})})}}else Gt(null,{stack:sr,id:Mr,glyph:Br})},function(gt,Gt){if(gt)m(gt);else if(Gt){for(var sr={},Mr=0,Or=Gt;Mr<Or.length;Mr+=1){var Br=Or[Mr],yn=Br.stack,hn=Br.id,kn=Br.glyph;(sr[yn]||(sr[yn]={}))[hn]=kn&&{id:kn.id,bitmap:kn.bitmap.clone(),metrics:kn.metrics}}m(null,sr)}})},$e.prototype._doesCharSupportLocalGlyph=function(f){return!!this.localIdeographFontFamily&&(c.isChar["CJK Unified Ideographs"](f)||c.isChar["Hangul Syllables"](f)||c.isChar.Hiragana(f)||c.isChar.Katakana(f))},$e.prototype._tinySDF=function(f,m,p){var E=this.localIdeographFontFamily;if(E&&this._doesCharSupportLocalGlyph(p)){var Y=f.tinySDF;if(!Y){var Ce="400";/bold/i.test(m)?Ce="900":/medium/i.test(m)?Ce="500":/light/i.test(m)&&(Ce="200"),Y=f.tinySDF=new $e.TinySDF(24,3,8,.25,E,Ce)}return{id:p,bitmap:new c.AlphaImage({width:30,height:30},Y.draw(String.fromCharCode(p))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},$e.loadGlyphRange=function(f,m,p,E,Y){var Ce=256*m,ze=Ce+255,gt=E.transformRequest(E.normalizeGlyphsURL(p).replace("{fontstack}",f).replace("{range}",Ce+"-"+ze),c.ResourceType.Glyphs);c.getArrayBuffer(gt,function(Gt,sr){if(Gt)Y(Gt);else if(sr){for(var Mr={},Or=0,Br=c.parseGlyphPBF(sr);Or<Br.length;Or+=1){var yn=Br[Or];Mr[yn.id]=yn}Y(null,Mr)}})},$e.TinySDF=et;var ye=function(){this.specification=c.styleSpec.light.position};ye.prototype.possiblyEvaluate=function(f,m){return c.sphericalToCartesian(f.expression.evaluate(m))},ye.prototype.interpolate=function(f,m,p){return{x:c.number(f.x,m.x,p),y:c.number(f.y,m.y,p),z:c.number(f.z,m.z,p)}};var ie=new c.Properties({anchor:new c.DataConstantProperty(c.styleSpec.light.anchor),position:new ye,color:new c.DataConstantProperty(c.styleSpec.light.color),intensity:new c.DataConstantProperty(c.styleSpec.light.intensity)}),re=function(f){function m(p){f.call(this),this._transitionable=new c.Transitionable(ie),this.setLight(p),this._transitioning=this._transitionable.untransitioned()}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getLight=function(){return this._transitionable.serialize()},m.prototype.setLight=function(p,E){if(E===void 0&&(E={}),!this._validate(c.validateLight,p,E))for(var Y in p){var Ce=p[Y];c.endsWith(Y,"-transition")?this._transitionable.setTransition(Y.slice(0,-11),Ce):this._transitionable.setValue(Y,Ce)}},m.prototype.updateTransitions=function(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)},m.prototype.hasTransition=function(){return this._transitioning.hasTransition()},m.prototype.recalculate=function(p){this.properties=this._transitioning.possiblyEvaluate(p)},m.prototype._validate=function(p,E,Y){return(!Y||Y.validate!==!1)&&c.emitValidationErrors(this,p.call(c.validateStyle,c.extend({value:E,style:{glyphs:!0,sprite:!0},styleSpec:c.styleSpec})))},m}(c.Evented),De=function(f,m){this.width=f,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};De.prototype.getDash=function(f,m){var p=f.join(",")+String(m);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(f,m)),this.dashEntry[p]},De.prototype.getDashRanges=function(f,m,p){var E=[],Y=f.length%2==1?-f[f.length-1]*p:0,Ce=f[0]*p,ze=!0;E.push({left:Y,right:Ce,isDash:ze,zeroLength:f[0]===0});for(var gt=f[0],Gt=1;Gt<f.length;Gt++){var sr=f[Gt];E.push({left:Y=gt*p,right:Ce=(gt+=sr)*p,isDash:ze=!ze,zeroLength:sr===0})}return E},De.prototype.addRoundDash=function(f,m,p){for(var E=m/2,Y=-p;Y<=p;Y++)for(var Ce=this.width*(this.nextRow+p+Y),ze=0,gt=f[ze],Gt=0;Gt<this.width;Gt++){Gt/gt.right>1&&(gt=f[++ze]);var sr=Math.abs(Gt-gt.left),Mr=Math.abs(Gt-gt.right),Or=Math.min(sr,Mr),Br=void 0,yn=Y/p*(E+1);if(gt.isDash){var hn=E-Math.abs(yn);Br=Math.sqrt(Or*Or+hn*hn)}else Br=E-Math.sqrt(Or*Or+yn*yn);this.data[Ce+Gt]=Math.max(0,Math.min(255,Br+128))}},De.prototype.addRegularDash=function(f){for(var m=f.length-1;m>=0;--m){var p=f[m],E=f[m+1];p.zeroLength?f.splice(m,1):E&&E.isDash===p.isDash&&(E.left=p.left,f.splice(m,1))}var Y=f[0],Ce=f[f.length-1];Y.isDash===Ce.isDash&&(Y.left=Ce.left-this.width,Ce.right=Y.right+this.width);for(var ze=this.width*this.nextRow,gt=0,Gt=f[gt],sr=0;sr<this.width;sr++){sr/Gt.right>1&&(Gt=f[++gt]);var Mr=Math.abs(sr-Gt.left),Or=Math.abs(sr-Gt.right),Br=Math.min(Mr,Or);this.data[ze+sr]=Math.max(0,Math.min(255,(Gt.isDash?Br:-Br)+128))}},De.prototype.addDash=function(f,m){var p=m?7:0,E=2*p+1;if(this.nextRow+E>this.height)return c.warnOnce("LineAtlas out of space"),null;for(var Y=0,Ce=0;Ce<f.length;Ce++)Y+=f[Ce];if(Y!==0){var ze=this.width/Y,gt=this.getDashRanges(f,this.width,ze);m?this.addRoundDash(gt,ze,p):this.addRegularDash(gt)}var Gt={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:Y};return this.nextRow+=E,this.dirty=!0,Gt},De.prototype.bind=function(f){var m=f.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))};var le=function f(m,p){this.workerPool=m,this.actors=[],this.currentActor=0,this.id=c.uniqueId();for(var E=this.workerPool.acquire(this.id),Y=0;Y<E.length;Y++){var Ce=new f.Actor(E[Y],p,this.id);Ce.name="Worker "+Y,this.actors.push(Ce)}};function ge(f,m,p){var E=function(Y,Ce){if(Y)return p(Y);if(Ce){var ze=c.pick(c.extend(Ce,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(ze.vectorLayers=Ce.vector_layers,ze.vectorLayerIds=ze.vectorLayers.map(function(gt){return gt.id})),ze.tiles=m.canonicalizeTileset(ze,f.url),p(null,ze)}};return f.url?c.getJSON(m.transformRequest(m.normalizeSourceURL(f.url),c.ResourceType.Source),E):c.browser.frame(function(){return E(null,f)})}le.prototype.broadcast=function(f,m,p){c.asyncAll(this.actors,function(E,Y){E.send(f,m,Y)},p=p||function(){})},le.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},le.prototype.remove=function(){this.actors.forEach(function(f){f.remove()}),this.actors=[],this.workerPool.release(this.id)},le.Actor=c.Actor;var ce=function(f,m,p){this.bounds=c.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=m||0,this.maxzoom=p||24};ce.prototype.validateBounds=function(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]},ce.prototype.contains=function(f){var m=Math.pow(2,f.z),p=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*m),E=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*m),Y=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*m),Ce=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*m);return f.x>=p&&f.x<Y&&f.y>=E&&f.y<Ce};var je=function(f){function m(p,E,Y,Ce){if(f.call(this),this.id=p,this.dispatcher=Y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(E,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},E),this._collectResourceTiming=E.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.load=function(){var p=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ge(this._options,this.map._requestManager,function(E,Y){p._tileJSONRequest=null,p._loaded=!0,E?p.fire(new c.ErrorEvent(E)):Y&&(c.extend(p,Y),Y.bounds&&(p.tileBounds=new ce(Y.bounds,p.minzoom,p.maxzoom)),c.postTurnstileEvent(Y.tiles,p.map._requestManager._customAccessToken),c.postMapLoadEvent(Y.tiles,p.map._getMapId(),p.map._requestManager._skuToken,p.map._requestManager._customAccessToken),p.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),p.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},m.prototype.loaded=function(){return this._loaded},m.prototype.hasTile=function(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)},m.prototype.onAdd=function(p){this.map=p,this.load()},m.prototype.setSourceProperty=function(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},m.prototype.setTiles=function(p){var E=this;return this.setSourceProperty(function(){E._options.tiles=p}),this},m.prototype.setUrl=function(p){var E=this;return this.setSourceProperty(function(){E.url=p,E._options.url=p}),this},m.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},m.prototype.serialize=function(){return c.extend({},this._options)},m.prototype.loadTile=function(p,E){var Y=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),Ce={request:this.map._requestManager.transformRequest(Y,c.ResourceType.Tile),uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ze(gt,Gt){return delete p.request,p.aborted?E(null):gt&&gt.status!==404?E(gt):(Gt&&Gt.resourceTiming&&(p.resourceTiming=Gt.resourceTiming),this.map._refreshExpiredTiles&&Gt&&p.setExpiryData(Gt),p.loadVectorData(Gt,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),E(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}Ce.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired"?p.state==="loading"?p.reloadCallback=E:p.request=p.actor.send("reloadTile",Ce,ze.bind(this)):(p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",Ce,ze.bind(this)))},m.prototype.abortTile=function(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id},void 0)},m.prototype.unloadTile=function(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id},void 0)},m.prototype.hasTransition=function(){return!1},m}(c.Evented),J=function(f){function m(p,E,Y,Ce){f.call(this),this.id=p,this.dispatcher=Y,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},E),c.extend(this,c.pick(E,["url","scheme","tileSize"]))}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.load=function(){var p=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ge(this._options,this.map._requestManager,function(E,Y){p._tileJSONRequest=null,p._loaded=!0,E?p.fire(new c.ErrorEvent(E)):Y&&(c.extend(p,Y),Y.bounds&&(p.tileBounds=new ce(Y.bounds,p.minzoom,p.maxzoom)),c.postTurnstileEvent(Y.tiles),c.postMapLoadEvent(Y.tiles,p.map._getMapId(),p.map._requestManager._skuToken),p.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),p.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},m.prototype.loaded=function(){return this._loaded},m.prototype.onAdd=function(p){this.map=p,this.load()},m.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},m.prototype.serialize=function(){return c.extend({},this._options)},m.prototype.hasTile=function(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)},m.prototype.loadTile=function(p,E){var Y=this,Ce=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);p.request=c.getImage(this.map._requestManager.transformRequest(Ce,c.ResourceType.Tile),function(ze,gt){if(delete p.request,p.aborted)p.state="unloaded",E(null);else if(ze)p.state="errored",E(ze);else if(gt){Y.map._refreshExpiredTiles&&p.setExpiryData(gt),delete gt.cacheControl,delete gt.expires;var Gt=Y.map.painter.context,sr=Gt.gl;p.texture=Y.map.painter.getTileTexture(gt.width),p.texture?p.texture.update(gt,{useMipmap:!0}):(p.texture=new c.Texture(Gt,gt,sr.RGBA,{useMipmap:!0}),p.texture.bind(sr.LINEAR,sr.CLAMP_TO_EDGE,sr.LINEAR_MIPMAP_NEAREST),Gt.extTextureFilterAnisotropic&&sr.texParameterf(sr.TEXTURE_2D,Gt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Gt.extTextureFilterAnisotropicMax)),p.state="loaded",c.cacheEntryPossiblyAdded(Y.dispatcher),E(null)}})},m.prototype.abortTile=function(p,E){p.request&&(p.request.cancel(),delete p.request),E()},m.prototype.unloadTile=function(p,E){p.texture&&this.map.painter.saveTileTexture(p.texture),E()},m.prototype.hasTransition=function(){return!1},m}(c.Evented),Me=function(f){function m(p,E,Y,Ce){f.call(this,p,E,Y,Ce),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},E),this.encoding=E.encoding||"mapbox"}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},m.prototype.loadTile=function(p,E){var Y=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Ce(ze,gt){ze&&(p.state="errored",E(ze)),gt&&(p.dem=gt,p.needsHillshadePrepare=!0,p.state="loaded",E(null))}p.request=c.getImage(this.map._requestManager.transformRequest(Y,c.ResourceType.Tile),function(ze,gt){if(delete p.request,p.aborted)p.state="unloaded",E(null);else if(ze)p.state="errored",E(ze);else if(gt){this.map._refreshExpiredTiles&&p.setExpiryData(gt),delete gt.cacheControl,delete gt.expires;var Gt=c.window.ImageBitmap&&gt instanceof c.window.ImageBitmap&&c.offscreenCanvasSupported()?gt:c.browser.getImageData(gt,1),sr={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:Gt,encoding:this.encoding};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",sr,Ce.bind(this)))}}.bind(this)),p.neighboringTiles=this._getNeighboringTiles(p.tileID)},m.prototype._getNeighboringTiles=function(p){var E=p.canonical,Y=Math.pow(2,E.z),Ce=(E.x-1+Y)%Y,ze=E.x===0?p.wrap-1:p.wrap,gt=(E.x+1+Y)%Y,Gt=E.x+1===Y?p.wrap+1:p.wrap,sr={};return sr[new c.OverscaledTileID(p.overscaledZ,ze,E.z,Ce,E.y).key]={backfilled:!1},sr[new c.OverscaledTileID(p.overscaledZ,Gt,E.z,gt,E.y).key]={backfilled:!1},E.y>0&&(sr[new c.OverscaledTileID(p.overscaledZ,ze,E.z,Ce,E.y-1).key]={backfilled:!1},sr[new c.OverscaledTileID(p.overscaledZ,p.wrap,E.z,E.x,E.y-1).key]={backfilled:!1},sr[new c.OverscaledTileID(p.overscaledZ,Gt,E.z,gt,E.y-1).key]={backfilled:!1}),E.y+1<Y&&(sr[new c.OverscaledTileID(p.overscaledZ,ze,E.z,Ce,E.y+1).key]={backfilled:!1},sr[new c.OverscaledTileID(p.overscaledZ,p.wrap,E.z,E.x,E.y+1).key]={backfilled:!1},sr[new c.OverscaledTileID(p.overscaledZ,Gt,E.z,gt,E.y+1).key]={backfilled:!1}),sr},m.prototype.unloadTile=function(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded",p.actor&&p.actor.send("removeDEMTile",{uid:p.uid,source:this.id})},m}(J),ne=function(f){function m(p,E,Y,Ce){f.call(this),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Y.getActor(),this.setEventedParent(Ce),this._data=E.data,this._options=c.extend({},E),this._collectResourceTiming=E.collectResourceTiming,this._resourceTiming=[],E.maxzoom!==void 0&&(this.maxzoom=E.maxzoom),E.type&&(this.type=E.type),E.attribution&&(this.attribution=E.attribution),this.promoteId=E.promoteId;var ze=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:E.cluster||!1,geojsonVtOptions:{buffer:(E.buffer!==void 0?E.buffer:128)*ze,tolerance:(E.tolerance!==void 0?E.tolerance:.375)*ze,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:E.lineMetrics||!1,generateId:E.generateId||!1},superclusterOptions:{maxZoom:E.clusterMaxZoom!==void 0?Math.min(E.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,E.clusterMinPoints||2),extent:c.EXTENT,radius:(E.clusterRadius||50)*ze,log:!1,generateId:E.generateId||!1},clusterProperties:E.clusterProperties,filter:E.filter},E.workerOptions)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.load=function(){var p=this;this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(E){if(E)p.fire(new c.ErrorEvent(E));else{var Y={dataType:"source",sourceDataType:"metadata"};p._collectResourceTiming&&p._resourceTiming&&p._resourceTiming.length>0&&(Y.resourceTiming=p._resourceTiming,p._resourceTiming=[]),p.fire(new c.Event("data",Y))}})},m.prototype.onAdd=function(p){this.map=p,this.load()},m.prototype.setData=function(p){var E=this;return this._data=p,this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Y){if(Y)E.fire(new c.ErrorEvent(Y));else{var Ce={dataType:"source",sourceDataType:"content"};E._collectResourceTiming&&E._resourceTiming&&E._resourceTiming.length>0&&(Ce.resourceTiming=E._resourceTiming,E._resourceTiming=[]),E.fire(new c.Event("data",Ce))}}),this},m.prototype.getClusterExpansionZoom=function(p,E){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},E),this},m.prototype.getClusterChildren=function(p,E){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},E),this},m.prototype.getClusterLeaves=function(p,E,Y,Ce){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:E,offset:Y},Ce),this},m.prototype._updateWorkerData=function(p){var E=this;this._loaded=!1;var Y=c.extend({},this.workerOptions),Ce=this._data;typeof Ce=="string"?(Y.request=this.map._requestManager.transformRequest(c.browser.resolveURL(Ce),c.ResourceType.Source),Y.request.collectResourceTiming=this._collectResourceTiming):Y.data=JSON.stringify(Ce),this.actor.send(this.type+".loadData",Y,function(ze,gt){E._removed||gt&&gt.abandoned||(E._loaded=!0,gt&&gt.resourceTiming&&gt.resourceTiming[E.id]&&(E._resourceTiming=gt.resourceTiming[E.id].slice(0)),E.actor.send(E.type+".coalesce",{source:Y.source},null),p(ze))})},m.prototype.loaded=function(){return this._loaded},m.prototype.loadTile=function(p,E){var Y=this,Ce=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(Ce,{type:this.type,uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ze,gt){return delete p.request,p.unloadVectorData(),p.aborted?E(null):ze?E(ze):(p.loadVectorData(gt,Y.map.painter,Ce==="reloadTile"),E(null))})},m.prototype.abortTile=function(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0},m.prototype.unloadTile=function(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})},m.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},m.prototype.serialize=function(){return c.extend({},this._options,{type:this.type,data:this._data})},m.prototype.hasTransition=function(){return!1},m}(c.Evented),xe=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ne=function(f){function m(p,E,Y,Ce){f.call(this),this.id=p,this.dispatcher=Y,this.coordinates=E.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=E}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.load=function(p,E){var Y=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),function(Ce,ze){Y._loaded=!0,Ce?Y.fire(new c.ErrorEvent(Ce)):ze&&(Y.image=ze,p&&(Y.coordinates=p),E&&E(),Y._finishLoading())})},m.prototype.loaded=function(){return this._loaded},m.prototype.updateImage=function(p){var E=this;return this.image&&p.url?(this.options.url=p.url,this.load(p.coordinates,function(){E.texture=null}),this):this},m.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))},m.prototype.onAdd=function(p){this.map=p,this.load()},m.prototype.setCoordinates=function(p){var E=this;this.coordinates=p;var Y=p.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(ze){for(var gt=1/0,Gt=1/0,sr=-1/0,Mr=-1/0,Or=0,Br=ze;Or<Br.length;Or+=1){var yn=Br[Or];gt=Math.min(gt,yn.x),Gt=Math.min(Gt,yn.y),sr=Math.max(sr,yn.x),Mr=Math.max(Mr,yn.y)}var hn=Math.max(sr-gt,Mr-Gt),kn=Math.max(0,Math.floor(-Math.log(hn)/Math.LN2)),an=Math.pow(2,kn);return new c.CanonicalTileID(kn,Math.floor((gt+sr)/2*an),Math.floor((Gt+Mr)/2*an))}(Y),this.minzoom=this.maxzoom=this.tileID.z;var Ce=Y.map(function(ze){return E.tileID.getTilePoint(ze)._round()});return this._boundsArray=new c.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ce[0].x,Ce[0].y,0,0),this._boundsArray.emplaceBack(Ce[1].x,Ce[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(Ce[3].x,Ce[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(Ce[2].x,Ce[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this},m.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var p=this.map.painter.context,E=p.gl;for(var Y in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new c.Texture(p,this.image,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE)),this.tiles){var Ce=this.tiles[Y];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture)}}},m.prototype.loadTile=function(p,E){this.tileID&&this.tileID.equals(p.tileID.canonical)?(this.tiles[String(p.tileID.wrap)]=p,p.buckets={},E(null)):(p.state="errored",E(null))},m.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},m.prototype.hasTransition=function(){return!1},m}(c.Evented),Pe=function(f){function m(p,E,Y,Ce){f.call(this,p,E,Y,Ce),this.roundZoom=!0,this.type="video",this.options=E}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.load=function(){var p=this;this._loaded=!1;var E=this.options;this.urls=[];for(var Y=0,Ce=E.urls;Y<Ce.length;Y+=1)this.urls.push(this.map._requestManager.transformRequest(Ce[Y],c.ResourceType.Source).url);c.getVideo(this.urls,function(ze,gt){p._loaded=!0,ze?p.fire(new c.ErrorEvent(ze)):gt&&(p.video=gt,p.video.loop=!0,p.video.setAttribute("playsinline",""),p.video.addEventListener("playing",function(){p.map.triggerRepaint()}),p.map&&p.video.play(),p._finishLoading())})},m.prototype.pause=function(){this.video&&this.video.pause()},m.prototype.play=function(){this.video&&this.video.play()},m.prototype.seek=function(p){if(this.video){var E=this.video.seekable;p<E.start(0)||p>E.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+E.start(0)+" and "+E.end(0)+"-second mark."))):this.video.currentTime=p}},m.prototype.getVideo=function(){return this.video},m.prototype.onAdd=function(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},m.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var p=this.map.painter.context,E=p.gl;for(var Y in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.texSubImage2D(E.TEXTURE_2D,0,0,0,E.RGBA,E.UNSIGNED_BYTE,this.video)):(this.texture=new c.Texture(p,this.video,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE)),this.tiles){var Ce=this.tiles[Y];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture)}}},m.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},m.prototype.hasTransition=function(){return this.video&&!this.video.paused},m}(Ne),He=function(f){function m(p,E,Y,Ce){f.call(this,p,E,Y,Ce),E.coordinates?Array.isArray(E.coordinates)&&E.coordinates.length===4&&!E.coordinates.some(function(ze){return!Array.isArray(ze)||ze.length!==2||ze.some(function(gt){return typeof gt!="number"})})||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+p,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+p,null,'missing required property "coordinates"'))),E.animate&&typeof E.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError("sources."+p,null,'optional "animate" property must be a boolean value'))),E.canvas?typeof E.canvas=="string"||E.canvas instanceof c.window.HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+p,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+p,null,'missing required property "canvas"'))),this.options=E,this.animate=E.animate===void 0||E.animate}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof c.window.HTMLCanvasElement?this.options.canvas:c.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},m.prototype.getCanvas=function(){return this.canvas},m.prototype.onAdd=function(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()},m.prototype.onRemove=function(){this.pause()},m.prototype.prepare=function(){var p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var E=this.map.painter.context,Y=E.gl;for(var Ce in this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.Texture(E,this.canvas,Y.RGBA,{premultiply:!0}),this.tiles){var ze=this.tiles[Ce];ze.state!=="loaded"&&(ze.state="loaded",ze.texture=this.texture)}}},m.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},m.prototype.hasTransition=function(){return this._playing},m.prototype._hasInvalidDimensions=function(){for(var p=0,E=[this.canvas.width,this.canvas.height];p<E.length;p+=1){var Y=E[p];if(isNaN(Y)||Y<=0)return!0}return!1},m}(Ne),lt={vector:je,raster:J,"raster-dem":Me,geojson:ne,video:Pe,image:Ne,canvas:He};function ft(f,m){var p=c.identity([]);return c.translate(p,p,[1,1,0]),c.scale(p,p,[.5*f.width,.5*f.height,1]),c.multiply(p,p,f.calculatePosMatrix(m.toUnwrapped()))}function It(f,m,p,E,Y,Ce){var ze=function(kn,an,Rn){if(kn)for(var $n=0,di=kn;$n<di.length;$n+=1){var Di=an[di[$n]];if(Di&&Di.source===Rn&&Di.type==="fill-extrusion")return!0}else for(var Ti in an){var Fi=an[Ti];if(Fi.source===Rn&&Fi.type==="fill-extrusion")return!0}return!1}(Y&&Y.layers,m,f.id),gt=Ce.maxPitchScaleFactor(),Gt=f.tilesIn(E,gt,ze);Gt.sort(fe);for(var sr=[],Mr=0,Or=Gt;Mr<Or.length;Mr+=1){var Br=Or[Mr];sr.push({wrappedTileID:Br.tileID.wrapped().key,queryResults:Br.tile.queryRenderedFeatures(m,p,f._state,Br.queryGeometry,Br.cameraQueryGeometry,Br.scale,Y,Ce,gt,ft(f.transform,Br.tileID))})}var yn=function(kn){for(var an={},Rn={},$n=0,di=kn;$n<di.length;$n+=1){var Di=di[$n],Ti=Di.queryResults,Fi=Di.wrappedTileID,ra=Rn[Fi]=Rn[Fi]||{};for(var Da in Ti)for(var Na=Ti[Da],po=ra[Da]=ra[Da]||{},No=an[Da]=an[Da]||[],is=0,rs=Na;is<rs.length;is+=1){var Ls=rs[is];po[Ls.featureIndex]||(po[Ls.featureIndex]=!0,No.push(Ls))}}return an}(sr);for(var hn in yn)yn[hn].forEach(function(kn){var an=kn.feature,Rn=f.getFeatureState(an.layer["source-layer"],an.id);an.source=an.layer.source,an.layer["source-layer"]&&(an.sourceLayer=an.layer["source-layer"]),an.state=Rn});return yn}function fe(f,m){var p=f.tileID,E=m.tileID;return p.overscaledZ-E.overscaledZ||p.canonical.y-E.canonical.y||p.wrap-E.wrap||p.canonical.x-E.canonical.x}var _t=function(f,m){this.max=f,this.onRemove=m,this.reset()};_t.prototype.reset=function(){for(var f in this.data)for(var m=0,p=this.data[f];m<p.length;m+=1){var E=p[m];E.timeout&&clearTimeout(E.timeout),this.onRemove(E.value)}return this.data={},this.order=[],this},_t.prototype.add=function(f,m,p){var E=this,Y=f.wrapped().key;this.data[Y]===void 0&&(this.data[Y]=[]);var Ce={value:m,timeout:void 0};if(p!==void 0&&(Ce.timeout=setTimeout(function(){E.remove(f,Ce)},p)),this.data[Y].push(Ce),this.order.push(Y),this.order.length>this.max){var ze=this._getAndRemoveByKey(this.order[0]);ze&&this.onRemove(ze)}return this},_t.prototype.has=function(f){return f.wrapped().key in this.data},_t.prototype.getAndRemove=function(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null},_t.prototype._getAndRemoveByKey=function(f){var m=this.data[f].shift();return m.timeout&&clearTimeout(m.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),m.value},_t.prototype.getByKey=function(f){var m=this.data[f];return m?m[0].value:null},_t.prototype.get=function(f){return this.has(f)?this.data[f.wrapped().key][0].value:null},_t.prototype.remove=function(f,m){if(!this.has(f))return this;var p=f.wrapped().key,E=m===void 0?0:this.data[p].indexOf(m),Y=this.data[p][E];return this.data[p].splice(E,1),Y.timeout&&clearTimeout(Y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(Y.value),this.order.splice(this.order.indexOf(p),1),this},_t.prototype.setMaxSize=function(f){for(this.max=f;this.order.length>this.max;){var m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this},_t.prototype.filter=function(f){var m=[];for(var p in this.data)for(var E=0,Y=this.data[p];E<Y.length;E+=1){var Ce=Y[E];f(Ce.value)||m.push(Ce)}for(var ze=0,gt=m;ze<gt.length;ze+=1){var Gt=gt[ze];this.remove(Gt.value.tileID,Gt)}};var Ye=function(f,m,p){this.context=f;var E=f.gl;this.buffer=E.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer};Ye.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ye.prototype.updateData=function(f){var m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)},Ye.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},mt=function(f,m,p,E){this.length=m.length,this.attributes=p,this.itemSize=m.bytesPerElement,this.dynamicDraw=E,this.context=f;var Y=f.gl;this.buffer=Y.createBuffer(),f.bindVertexBuffer.set(this.buffer),Y.bufferData(Y.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer};mt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},mt.prototype.updateData=function(f){var m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,f.arrayBuffer)},mt.prototype.enableAttributes=function(f,m){for(var p=0;p<this.attributes.length;p++){var E=m.attributes[this.attributes[p].name];E!==void 0&&f.enableVertexAttribArray(E)}},mt.prototype.setVertexAttribPointers=function(f,m,p){for(var E=0;E<this.attributes.length;E++){var Y=this.attributes[E],Ce=m.attributes[Y.name];Ce!==void 0&&f.vertexAttribPointer(Ce,Y.components,f[Ot[Y.type]],!1,this.itemSize,Y.offset+this.itemSize*(p||0))}},mt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Rt=function(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Rt.prototype.get=function(){return this.current},Rt.prototype.set=function(f){},Rt.prototype.getDefault=function(){return this.default},Rt.prototype.setDefault=function(){this.set(this.default)};var pt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return c.Color.transparent},m.prototype.set=function(p){var E=this.current;(p.r!==E.r||p.g!==E.g||p.b!==E.b||p.a!==E.a||this.dirty)&&(this.gl.clearColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)},m}(Rt),Ge=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return 1},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.clearDepth(p),this.current=p,this.dirty=!1)},m}(Rt),wt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return 0},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.clearStencil(p),this.current=p,this.dirty=!1)},m}(Rt),ee=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return[!0,!0,!0,!0]},m.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||p[2]!==E[2]||p[3]!==E[3]||this.dirty)&&(this.gl.colorMask(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)},m}(Rt),Re=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!0},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.depthMask(p),this.current=p,this.dirty=!1)},m}(Rt),dt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return 255},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.stencilMask(p),this.current=p,this.dirty=!1)},m}(Rt),D=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},m.prototype.set=function(p){var E=this.current;(p.func!==E.func||p.ref!==E.ref||p.mask!==E.mask||this.dirty)&&(this.gl.stencilFunc(p.func,p.ref,p.mask),this.current=p,this.dirty=!1)},m}(Rt),q=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){var p=this.gl;return[p.KEEP,p.KEEP,p.KEEP]},m.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||p[2]!==E[2]||this.dirty)&&(this.gl.stencilOp(p[0],p[1],p[2]),this.current=p,this.dirty=!1)},m}(Rt),G=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!1},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.STENCIL_TEST):E.disable(E.STENCIL_TEST),this.current=p,this.dirty=!1}},m}(Rt),O=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return[0,1]},m.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||this.dirty)&&(this.gl.depthRange(p[0],p[1]),this.current=p,this.dirty=!1)},m}(Rt),k=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!1},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST),this.current=p,this.dirty=!1}},m}(Rt),X=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return this.gl.LESS},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.depthFunc(p),this.current=p,this.dirty=!1)},m}(Rt),W=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!1},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.BLEND):E.disable(E.BLEND),this.current=p,this.dirty=!1}},m}(Rt),ae=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){var p=this.gl;return[p.ONE,p.ZERO]},m.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||this.dirty)&&(this.gl.blendFunc(p[0],p[1]),this.current=p,this.dirty=!1)},m}(Rt),Be=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return c.Color.transparent},m.prototype.set=function(p){var E=this.current;(p.r!==E.r||p.g!==E.g||p.b!==E.b||p.a!==E.a||this.dirty)&&(this.gl.blendColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)},m}(Rt),ve=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return this.gl.FUNC_ADD},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.blendEquation(p),this.current=p,this.dirty=!1)},m}(Rt),Je=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!1},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE),this.current=p,this.dirty=!1}},m}(Rt),ot=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return this.gl.BACK},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.cullFace(p),this.current=p,this.dirty=!1)},m}(Rt),Qe=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return this.gl.CCW},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.frontFace(p),this.current=p,this.dirty=!1)},m}(Rt),ir=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)},m}(Rt),mr=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return this.gl.TEXTURE0},m.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.activeTexture(p),this.current=p,this.dirty=!1)},m}(Rt),Ar=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){var p=this.gl;return[0,0,p.drawingBufferWidth,p.drawingBufferHeight]},m.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||p[2]!==E[2]||p[3]!==E[3]||this.dirty)&&(this.gl.viewport(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)},m}(Rt),Er=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindFramebuffer(E.FRAMEBUFFER,p),this.current=p,this.dirty=!1}},m}(Rt),Zt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindRenderbuffer(E.RENDERBUFFER,p),this.current=p,this.dirty=!1}},m}(Rt),Tr=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindTexture(E.TEXTURE_2D,p),this.current=p,this.dirty=!1}},m}(Rt),pn=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindBuffer(E.ARRAY_BUFFER,p),this.current=p,this.dirty=!1}},m}(Rt),un=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){var E=this.gl;E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,p),this.current=p,this.dirty=!1},m}(Rt),Zn=function(f){function m(p){f.call(this,p),this.vao=p.extVertexArrayObject}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m.prototype.set=function(p){this.vao&&(p!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(p),this.current=p,this.dirty=!1)},m}(Rt),Cr=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return 4},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.pixelStorei(E.UNPACK_ALIGNMENT,p),this.current=p,this.dirty=!1}},m}(Rt),Nr=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!1},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),this.current=p,this.dirty=!1}},m}(Rt),bt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return!1},m.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,p),this.current=p,this.dirty=!1}},m}(Rt),jn=function(f){function m(p,E){f.call(this,p),this.context=p,this.parent=E}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getDefault=function(){return null},m}(Rt),Pt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.setDirty=function(){this.dirty=!0},m.prototype.set=function(p){if(p!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var E=this.gl;E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,p,0),this.current=p,this.dirty=!1}},m}(jn),zt=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.set=function(p){if(p!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var E=this.gl;E.framebufferRenderbuffer(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,p),this.current=p,this.dirty=!1}},m}(jn),Qt=function(f,m,p,E){this.context=f,this.width=m,this.height=p;var Y=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new Pt(f,Y),E&&(this.depthAttachment=new zt(f,Y))};Qt.prototype.destroy=function(){var f=this.context.gl,m=this.colorAttachment.get();if(m&&f.deleteTexture(m),this.depthAttachment){var p=this.depthAttachment.get();p&&f.deleteRenderbuffer(p)}f.deleteFramebuffer(this.framebuffer)};var dr=function(f,m,p){this.func=f,this.mask=m,this.range=p};dr.ReadOnly=!1,dr.ReadWrite=!0,dr.disabled=new dr(519,dr.ReadOnly,[0,1]);var _r=function(f,m,p,E,Y,Ce){this.test=f,this.ref=m,this.mask=p,this.fail=E,this.depthFail=Y,this.pass=Ce};_r.disabled=new _r({func:519,mask:0},0,0,7680,7680,7680);var Hr=function(f,m,p){this.blendFunction=f,this.blendColor=m,this.mask=p};Hr.disabled=new Hr(Hr.Replace=[1,0],c.Color.transparent,[!1,!1,!1,!1]),Hr.unblended=new Hr(Hr.Replace,c.Color.transparent,[!0,!0,!0,!0]),Hr.alphaBlended=new Hr([1,771],c.Color.transparent,[!0,!0,!0,!0]);var Qr=function(f,m,p){this.enable=f,this.mode=m,this.frontFace=p};Qr.disabled=new Qr(!1,1029,2305),Qr.backCCW=new Qr(!0,1029,2305);var fr=function(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new pt(this),this.clearDepth=new Ge(this),this.clearStencil=new wt(this),this.colorMask=new ee(this),this.depthMask=new Re(this),this.stencilMask=new dt(this),this.stencilFunc=new D(this),this.stencilOp=new q(this),this.stencilTest=new G(this),this.depthRange=new O(this),this.depthTest=new k(this),this.depthFunc=new X(this),this.blend=new W(this),this.blendFunc=new ae(this),this.blendColor=new Be(this),this.blendEquation=new ve(this),this.cullFace=new Je(this),this.cullFaceSide=new ot(this),this.frontFace=new Qe(this),this.program=new ir(this),this.activeTexture=new mr(this),this.viewport=new Ar(this),this.bindFramebuffer=new Er(this),this.bindRenderbuffer=new Zt(this),this.bindTexture=new Tr(this),this.bindVertexBuffer=new pn(this),this.bindElementBuffer=new un(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Zn(this),this.pixelStoreUnpack=new Cr(this),this.pixelStoreUnpackPremultiplyAlpha=new Nr(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)};fr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},fr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},fr.prototype.createIndexBuffer=function(f,m){return new Ye(this,f,m)},fr.prototype.createVertexBuffer=function(f,m,p){return new mt(this,f,m,p)},fr.prototype.createRenderbuffer=function(f,m,p){var E=this.gl,Y=E.createRenderbuffer();return this.bindRenderbuffer.set(Y),E.renderbufferStorage(E.RENDERBUFFER,f,m,p),this.bindRenderbuffer.set(null),Y},fr.prototype.createFramebuffer=function(f,m,p){return new Qt(this,f,m,p)},fr.prototype.clear=function(f){var m=f.color,p=f.depth,E=this.gl,Y=0;m&&(Y|=E.COLOR_BUFFER_BIT,this.clearColor.set(m),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(Y|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),E.clear(Y)},fr.prototype.setCullFace=function(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))},fr.prototype.setDepthMode=function(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)},fr.prototype.setStencilMode=function(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)},fr.prototype.setColorMode=function(f){c.deepEqual(f.blendFunction,Hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)},fr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var tt=function(f){function m(p,E,Y){var Ce=this;f.call(this),this.id=p,this.dispatcher=Y,this.on("data",function(ze){ze.dataType==="source"&&ze.sourceDataType==="metadata"&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&ze.dataType==="source"&&ze.sourceDataType==="content"&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=function(ze,gt,Gt,sr){var Mr=new lt[gt.type](ze,gt,Gt,sr);if(Mr.id!==ze)throw new Error("Expected Source id to be "+ze+" instead of "+Mr.id);return c.bindAll(["load","abort","unload","serialize","prepare"],Mr),Mr}(p,E,Y,this),this._tiles={},this._cache=new _t(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new c.SourceFeatureState}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.onAdd=function(p){this.map=p,this._maxTileCacheSize=p?p._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(p)},m.prototype.onRemove=function(p){this._source&&this._source.onRemove&&this._source.onRemove(p)},m.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var p in this._tiles){var E=this._tiles[p];if(E.state!=="loaded"&&E.state!=="errored")return!1}return!0},m.prototype.getSource=function(){return this._source},m.prototype.pause=function(){this._paused=!0},m.prototype.resume=function(){if(this._paused){var p=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,p&&this.reload(),this.transform&&this.update(this.transform)}},m.prototype._loadTile=function(p,E){return this._source.loadTile(p,E)},m.prototype._unloadTile=function(p){if(this._source.unloadTile)return this._source.unloadTile(p,function(){})},m.prototype._abortTile=function(p){if(this._source.abortTile)return this._source.abortTile(p,function(){})},m.prototype.serialize=function(){return this._source.serialize()},m.prototype.prepare=function(p){for(var E in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Y=this._tiles[E];Y.upload(p),Y.prepare(this.map.style.imageManager)}},m.prototype.getIds=function(){return c.values(this._tiles).map(function(p){return p.tileID}).sort(Yr).map(function(p){return p.key})},m.prototype.getRenderableIds=function(p){var E=this,Y=[];for(var Ce in this._tiles)this._isIdRenderable(Ce,p)&&Y.push(this._tiles[Ce]);return p?Y.sort(function(ze,gt){var Gt=ze.tileID,sr=gt.tileID,Mr=new c.Point(Gt.canonical.x,Gt.canonical.y)._rotate(E.transform.angle),Or=new c.Point(sr.canonical.x,sr.canonical.y)._rotate(E.transform.angle);return Gt.overscaledZ-sr.overscaledZ||Or.y-Mr.y||Or.x-Mr.x}).map(function(ze){return ze.tileID.key}):Y.map(function(ze){return ze.tileID}).sort(Yr).map(function(ze){return ze.key})},m.prototype.hasRenderableParent=function(p){var E=this.findLoadedParent(p,0);return!!E&&this._isIdRenderable(E.tileID.key)},m.prototype._isIdRenderable=function(p,E){return this._tiles[p]&&this._tiles[p].hasData()&&!this._coveredTiles[p]&&(E||!this._tiles[p].holdingForFade())},m.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var p in this._cache.reset(),this._tiles)this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")},m.prototype._reloadTile=function(p,E){var Y=this._tiles[p];Y&&(Y.state!=="loading"&&(Y.state=E),this._loadTile(Y,this._tileLoaded.bind(this,Y,p,E)))},m.prototype._tileLoaded=function(p,E,Y,Ce){if(Ce)return p.state="errored",void(Ce.status!==404?this._source.fire(new c.ErrorEvent(Ce,{tile:p})):this.update(this.transform));p.timeAdded=c.browser.now(),Y==="expired"&&(p.refreshedUponExpiration=!0),this._setTileReloadTimer(E,p),this.getSource().type==="raster-dem"&&p.dem&&this._backfillDEM(p),this._state.initializeTileState(p,this.map?this.map.painter:null),this._source.fire(new c.Event("data",{dataType:"source",tile:p,coord:p.tileID}))},m.prototype._backfillDEM=function(p){for(var E=this.getRenderableIds(),Y=0;Y<E.length;Y++){var Ce=E[Y];if(p.neighboringTiles&&p.neighboringTiles[Ce]){var ze=this.getTileByID(Ce);gt(p,ze),gt(ze,p)}}function gt(Gt,sr){Gt.needsHillshadePrepare=!0;var Mr=sr.tileID.canonical.x-Gt.tileID.canonical.x,Or=sr.tileID.canonical.y-Gt.tileID.canonical.y,Br=Math.pow(2,Gt.tileID.canonical.z),yn=sr.tileID.key;Mr===0&&Or===0||Math.abs(Or)>1||(Math.abs(Mr)>1&&(Math.abs(Mr+Br)===1?Mr+=Br:Math.abs(Mr-Br)===1&&(Mr-=Br)),sr.dem&&Gt.dem&&(Gt.dem.backfillBorder(sr.dem,Mr,Or),Gt.neighboringTiles&&Gt.neighboringTiles[yn]&&(Gt.neighboringTiles[yn].backfilled=!0)))}},m.prototype.getTile=function(p){return this.getTileByID(p.key)},m.prototype.getTileByID=function(p){return this._tiles[p]},m.prototype._retainLoadedChildren=function(p,E,Y,Ce){for(var ze in this._tiles){var gt=this._tiles[ze];if(!(Ce[ze]||!gt.hasData()||gt.tileID.overscaledZ<=E||gt.tileID.overscaledZ>Y)){for(var Gt=gt.tileID;gt&&gt.tileID.overscaledZ>E+1;){var sr=gt.tileID.scaledTo(gt.tileID.overscaledZ-1);(gt=this._tiles[sr.key])&&gt.hasData()&&(Gt=sr)}for(var Mr=Gt;Mr.overscaledZ>E;)if(p[(Mr=Mr.scaledTo(Mr.overscaledZ-1)).key]){Ce[Gt.key]=Gt;break}}}},m.prototype.findLoadedParent=function(p,E){if(p.key in this._loadedParentTiles){var Y=this._loadedParentTiles[p.key];return Y&&Y.tileID.overscaledZ>=E?Y:null}for(var Ce=p.overscaledZ-1;Ce>=E;Ce--){var ze=p.scaledTo(Ce),gt=this._getLoadedTile(ze);if(gt)return gt}},m.prototype._getLoadedTile=function(p){var E=this._tiles[p.key];return E&&E.hasData()?E:this._cache.getByKey(p.wrapped().key)},m.prototype.updateCacheSize=function(p){var E=Math.ceil(p.width/this._source.tileSize)+1,Y=Math.ceil(p.height/this._source.tileSize)+1,Ce=Math.floor(E*Y*5),ze=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Ce):Ce;this._cache.setMaxSize(ze)},m.prototype.handleWrapJump=function(p){var E=Math.round((p-(this._prevLng===void 0?p:this._prevLng))/360);if(this._prevLng=p,E){var Y={};for(var Ce in this._tiles){var ze=this._tiles[Ce];ze.tileID=ze.tileID.unwrapTo(ze.tileID.wrap+E),Y[ze.tileID.key]=ze}for(var gt in this._tiles=Y,this._timers)clearTimeout(this._timers[gt]),delete this._timers[gt];for(var Gt in this._tiles)this._setTileReloadTimer(Gt,this._tiles[Gt])}},m.prototype.update=function(p){var E=this;if(this.transform=p,this._sourceLoaded&&!this._paused){var Y;this.updateCacheSize(p),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Y=p.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ra){return new c.OverscaledTileID(ra.canonical.z,ra.wrap,ra.canonical.z,ra.canonical.x,ra.canonical.y)}):(Y=p.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Y=Y.filter(function(ra){return E._source.hasTile(ra)}))):Y=[];var Ce=p.coveringZoomLevel(this._source),ze=Math.max(Ce-m.maxOverzooming,this._source.minzoom),gt=Math.max(Ce+m.maxUnderzooming,this._source.minzoom),Gt=this._updateRetainedTiles(Y,Ce);if(Tn(this._source.type)){for(var sr={},Mr={},Or=0,Br=Object.keys(Gt);Or<Br.length;Or+=1){var yn=Br[Or],hn=Gt[yn],kn=this._tiles[yn];if(kn&&!(kn.fadeEndTime&&kn.fadeEndTime<=c.browser.now())){var an=this.findLoadedParent(hn,ze);an&&(this._addTile(an.tileID),sr[an.tileID.key]=an.tileID),Mr[yn]=hn}}for(var Rn in this._retainLoadedChildren(Mr,Ce,gt,Gt),sr)Gt[Rn]||(this._coveredTiles[Rn]=!0,Gt[Rn]=sr[Rn])}for(var $n in Gt)this._tiles[$n].clearFadeHold();for(var di=0,Di=c.keysDifference(this._tiles,Gt);di<Di.length;di+=1){var Ti=Di[di],Fi=this._tiles[Ti];Fi.hasSymbolBuckets&&!Fi.holdingForFade()?Fi.setHoldDuration(this.map._fadeDuration):Fi.hasSymbolBuckets&&!Fi.symbolFadeFinished()||this._removeTile(Ti)}this._updateLoadedParentTileCache()}},m.prototype.releaseSymbolFadeTiles=function(){for(var p in this._tiles)this._tiles[p].holdingForFade()&&this._removeTile(p)},m.prototype._updateRetainedTiles=function(p,E){for(var Y={},Ce={},ze=Math.max(E-m.maxOverzooming,this._source.minzoom),gt=Math.max(E+m.maxUnderzooming,this._source.minzoom),Gt={},sr=0,Mr=p;sr<Mr.length;sr+=1){var Or=Mr[sr],Br=this._addTile(Or);Y[Or.key]=Or,Br.hasData()||E<this._source.maxzoom&&(Gt[Or.key]=Or)}this._retainLoadedChildren(Gt,E,gt,Y);for(var yn=0,hn=p;yn<hn.length;yn+=1){var kn=hn[yn],an=this._tiles[kn.key];if(!an.hasData()){if(E+1>this._source.maxzoom){var Rn=kn.children(this._source.maxzoom)[0],$n=this.getTile(Rn);if($n&&$n.hasData()){Y[Rn.key]=Rn;continue}}else{var di=kn.children(this._source.maxzoom);if(Y[di[0].key]&&Y[di[1].key]&&Y[di[2].key]&&Y[di[3].key])continue}for(var Di=an.wasRequested(),Ti=kn.overscaledZ-1;Ti>=ze;--Ti){var Fi=kn.scaledTo(Ti);if(Ce[Fi.key]||(Ce[Fi.key]=!0,!(an=this.getTile(Fi))&&Di&&(an=this._addTile(Fi)),an&&(Y[Fi.key]=Fi,Di=an.wasRequested(),an.hasData())))break}}}return Y},m.prototype._updateLoadedParentTileCache=function(){for(var p in this._loadedParentTiles={},this._tiles){for(var E=[],Y=void 0,Ce=this._tiles[p].tileID;Ce.overscaledZ>0;){if(Ce.key in this._loadedParentTiles){Y=this._loadedParentTiles[Ce.key];break}E.push(Ce.key);var ze=Ce.scaledTo(Ce.overscaledZ-1);if(Y=this._getLoadedTile(ze))break;Ce=ze}for(var gt=0,Gt=E;gt<Gt.length;gt+=1)this._loadedParentTiles[Gt[gt]]=Y}},m.prototype._addTile=function(p){var E=this._tiles[p.key];if(E)return E;(E=this._cache.getAndRemove(p))&&(this._setTileReloadTimer(p.key,E),E.tileID=p,this._state.initializeTileState(E,this.map?this.map.painter:null),this._cacheTimers[p.key]&&(clearTimeout(this._cacheTimers[p.key]),delete this._cacheTimers[p.key],this._setTileReloadTimer(p.key,E)));var Y=Boolean(E);return Y||(E=new c.Tile(p,this._source.tileSize*p.overscaleFactor()),this._loadTile(E,this._tileLoaded.bind(this,E,p.key,E.state))),E?(E.uses++,this._tiles[p.key]=E,Y||this._source.fire(new c.Event("dataloading",{tile:E,coord:E.tileID,dataType:"source"})),E):null},m.prototype._setTileReloadTimer=function(p,E){var Y=this;p in this._timers&&(clearTimeout(this._timers[p]),delete this._timers[p]);var Ce=E.getExpiryTimeout();Ce&&(this._timers[p]=setTimeout(function(){Y._reloadTile(p,"expired"),delete Y._timers[p]},Ce))},m.prototype._removeTile=function(p){var E=this._tiles[p];E&&(E.uses--,delete this._tiles[p],this._timers[p]&&(clearTimeout(this._timers[p]),delete this._timers[p]),E.uses>0||(E.hasData()&&E.state!=="reloading"?this._cache.add(E.tileID,E,E.getExpiryTimeout()):(E.aborted=!0,this._abortTile(E),this._unloadTile(E))))},m.prototype.clearTiles=function(){for(var p in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(p);this._cache.reset()},m.prototype.tilesIn=function(p,E,Y){var Ce=this,ze=[],gt=this.transform;if(!gt)return ze;for(var Gt=Y?gt.getCameraQueryGeometry(p):p,sr=p.map(function(Ti){return gt.pointCoordinate(Ti)}),Mr=Gt.map(function(Ti){return gt.pointCoordinate(Ti)}),Or=this.getIds(),Br=1/0,yn=1/0,hn=-1/0,kn=-1/0,an=0,Rn=Mr;an<Rn.length;an+=1){var $n=Rn[an];Br=Math.min(Br,$n.x),yn=Math.min(yn,$n.y),hn=Math.max(hn,$n.x),kn=Math.max(kn,$n.y)}for(var di=function(Ti){var Fi=Ce._tiles[Or[Ti]];if(!Fi.holdingForFade()){var ra=Fi.tileID,Da=Math.pow(2,gt.zoom-Fi.tileID.overscaledZ),Na=E*Fi.queryPadding*c.EXTENT/Fi.tileSize/Da,po=[ra.getTilePoint(new c.MercatorCoordinate(Br,yn)),ra.getTilePoint(new c.MercatorCoordinate(hn,kn))];if(po[0].x-Na<c.EXTENT&&po[0].y-Na<c.EXTENT&&po[1].x+Na>=0&&po[1].y+Na>=0){var No=sr.map(function(rs){return ra.getTilePoint(rs)}),is=Mr.map(function(rs){return ra.getTilePoint(rs)});ze.push({tile:Fi,tileID:ra,queryGeometry:No,cameraQueryGeometry:is,scale:Da})}}},Di=0;Di<Or.length;Di++)di(Di);return ze},m.prototype.getVisibleCoordinates=function(p){for(var E=this,Y=this.getRenderableIds(p).map(function(Gt){return E._tiles[Gt].tileID}),Ce=0,ze=Y;Ce<ze.length;Ce+=1){var gt=ze[Ce];gt.posMatrix=this.transform.calculatePosMatrix(gt.toUnwrapped())}return Y},m.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Tn(this._source.type))for(var p in this._tiles){var E=this._tiles[p];if(E.fadeEndTime!==void 0&&E.fadeEndTime>=c.browser.now())return!0}return!1},m.prototype.setFeatureState=function(p,E,Y){this._state.updateState(p=p||"_geojsonTileLayer",E,Y)},m.prototype.removeFeatureState=function(p,E,Y){this._state.removeFeatureState(p=p||"_geojsonTileLayer",E,Y)},m.prototype.getFeatureState=function(p,E){return this._state.getState(p=p||"_geojsonTileLayer",E)},m.prototype.setDependencies=function(p,E,Y){var Ce=this._tiles[p];Ce&&Ce.setDependencies(E,Y)},m.prototype.reloadTilesForDependencies=function(p,E){for(var Y in this._tiles)this._tiles[Y].hasDependency(p,E)&&this._reloadTile(Y,"reloading");this._cache.filter(function(Ce){return!Ce.hasDependency(p,E)})},m}(c.Evented);function Yr(f,m){var p=Math.abs(2*f.wrap)-+(f.wrap<0),E=Math.abs(2*m.wrap)-+(m.wrap<0);return f.overscaledZ-m.overscaledZ||E-p||m.canonical.y-f.canonical.y||m.canonical.x-f.canonical.x}function Tn(f){return f==="raster"||f==="image"||f==="video"}function wn(){return new c.window.Worker(qc.workerUrl)}tt.maxOverzooming=10,tt.maxUnderzooming=3;var Nn="mapboxgl_preloaded_worker_pool",Si=function(){this.active={}};Si.prototype.acquire=function(f){if(!this.workers)for(this.workers=[];this.workers.length<Si.workerCount;)this.workers.push(new wn);return this.active[f]=!0,this.workers.slice()},Si.prototype.release=function(f){delete this.active[f],this.numActive()===0&&(this.workers.forEach(function(m){m.terminate()}),this.workers=null)},Si.prototype.isPreloaded=function(){return!!this.active[Nn]},Si.prototype.numActive=function(){return Object.keys(this.active).length};var fa,Xi=Math.floor(c.browser.hardwareConcurrency/2);function Ln(){return fa||(fa=new Si),fa}function na(f,m){var p={};for(var E in f)E!=="ref"&&(p[E]=f[E]);return c.refProperties.forEach(function(Y){Y in m&&(p[Y]=m[Y])}),p}function xi(f){f=f.slice();for(var m=Object.create(null),p=0;p<f.length;p++)m[f[p].id]=f[p];for(var E=0;E<f.length;E++)"ref"in f[E]&&(f[E]=na(f[E],m[f[E].ref]));return f}Si.workerCount=Math.max(Math.min(Xi,6),1);var ta={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function La(f,m,p){p.push({command:ta.addSource,args:[f,m[f]]})}function Ki(f,m,p){m.push({command:ta.removeSource,args:[f]}),p[f]=!0}function jo(f,m,p,E){Ki(f,p,E),La(f,m,p)}function uo(f,m,p){var E;for(E in f[p])if(f[p].hasOwnProperty(E)&&E!=="data"&&!c.deepEqual(f[p][E],m[p][E]))return!1;for(E in m[p])if(m[p].hasOwnProperty(E)&&E!=="data"&&!c.deepEqual(f[p][E],m[p][E]))return!1;return!0}function An(f,m,p,E,Y,Ce){var ze;for(ze in m=m||{},f=f||{})f.hasOwnProperty(ze)&&(c.deepEqual(f[ze],m[ze])||p.push({command:Ce,args:[E,ze,m[ze],Y]}));for(ze in m)m.hasOwnProperty(ze)&&!f.hasOwnProperty(ze)&&(c.deepEqual(f[ze],m[ze])||p.push({command:Ce,args:[E,ze,m[ze],Y]}))}function gn(f){return f.id}function Oi(f,m){return f[m.id]=m,f}var fi=function(f,m){this.reset(f,m)};fi.prototype.reset=function(f,m){this.points=f||[],this._distances=[0];for(var p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding},fi.prototype.lerp=function(f){if(this.points.length===1)return this.points[0];f=c.clamp(f,0,1);for(var m=1,p=this._distances[m],E=f*this.paddedLength+this.padding;p<E&&m<this._distances.length;)p=this._distances[++m];var Y=m-1,Ce=this._distances[Y],ze=p-Ce,gt=ze>0?(E-Ce)/ze:0;return this.points[Y].mult(1-gt).add(this.points[m].mult(gt))};var va=function(f,m,p){var E=this.boxCells=[],Y=this.circleCells=[];this.xCellCount=Math.ceil(f/p),this.yCellCount=Math.ceil(m/p);for(var Ce=0;Ce<this.xCellCount*this.yCellCount;Ce++)E.push([]),Y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=m,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0};function wa(f,m,p,E,Y){var Ce=c.create();return m?(c.scale(Ce,Ce,[1/Y,1/Y,1]),p||c.rotateZ(Ce,Ce,E.angle)):c.multiply(Ce,E.labelPlaneMatrix,f),Ce}function Ca(f,m,p,E,Y){if(m){var Ce=c.clone(f);return c.scale(Ce,Ce,[Y,Y,1]),p||c.rotateZ(Ce,Ce,-E.angle),Ce}return E.glCoordMatrix}function Aa(f,m){var p=[f.x,f.y,0,1];Jo(p,p,m);var E=p[3];return{point:new c.Point(p[0]/E,p[1]/E),signedDistanceFromCamera:E}}function ma(f,m){return .5+f/m*.5}function ka(f,m){var p=f[0]/f[3],E=f[1]/f[3];return p>=-m[0]&&p<=m[0]&&E>=-m[1]&&E<=m[1]}function Uo(f,m,p,E,Y,Ce,ze,gt){var Gt=E?f.textSizeData:f.iconSizeData,sr=c.evaluateSizeForZoom(Gt,p.transform.zoom),Mr=[256/p.width*2+1,256/p.height*2+1],Or=E?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;Or.clear();for(var Br=f.lineVertexArray,yn=E?f.text.placedSymbolArray:f.icon.placedSymbolArray,hn=p.transform.width/p.transform.height,kn=!1,an=0;an<yn.length;an++){var Rn=yn.get(an);if(Rn.hidden||Rn.writingMode===c.WritingMode.vertical&&!kn)no(Rn.numGlyphs,Or);else{kn=!1;var $n=[Rn.anchorX,Rn.anchorY,0,1];if(c.transformMat4($n,$n,m),ka($n,Mr)){var di=ma(p.transform.cameraToCenterDistance,$n[3]),Di=c.evaluateSizeForFeature(Gt,sr,Rn),Ti=ze?Di/di:Di*di,Fi=new c.Point(Rn.anchorX,Rn.anchorY),ra=Aa(Fi,Y).point,Da={},Na=eo(Rn,Ti,!1,gt,m,Y,Ce,f.glyphOffsetArray,Br,Or,ra,Fi,Da,hn);kn=Na.useVertical,(Na.notEnoughRoom||kn||Na.needsFlipping&&eo(Rn,Ti,!0,gt,m,Y,Ce,f.glyphOffsetArray,Br,Or,ra,Fi,Da,hn).notEnoughRoom)&&no(Rn.numGlyphs,Or)}else no(Rn.numGlyphs,Or)}}E?f.text.dynamicLayoutVertexBuffer.updateData(Or):f.icon.dynamicLayoutVertexBuffer.updateData(Or)}function ha(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr){var Or=gt.glyphStartIndex+gt.numGlyphs,Br=gt.lineStartIndex,yn=gt.lineStartIndex+gt.lineLength,hn=m.getoffsetX(gt.glyphStartIndex),kn=m.getoffsetX(Or-1),an=Po(f*hn,p,E,Y,Ce,ze,gt.segment,Br,yn,Gt,sr,Mr);if(!an)return null;var Rn=Po(f*kn,p,E,Y,Ce,ze,gt.segment,Br,yn,Gt,sr,Mr);return Rn?{first:an,last:Rn}:null}function xa(f,m,p,E){return f===c.WritingMode.horizontal&&Math.abs(p.y-m.y)>Math.abs(p.x-m.x)*E?{useVertical:!0}:(f===c.WritingMode.vertical?m.y<p.y:m.x>p.x)?{needsFlipping:!0}:null}function eo(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr,Or,Br,yn){var hn,kn=m/24,an=f.lineOffsetX*kn,Rn=f.lineOffsetY*kn;if(f.numGlyphs>1){var $n=f.glyphStartIndex+f.numGlyphs,di=f.lineStartIndex,Di=f.lineStartIndex+f.lineLength,Ti=ha(kn,gt,an,Rn,p,Mr,Or,f,Gt,Ce,Br);if(!Ti)return{notEnoughRoom:!0};var Fi=Aa(Ti.first.point,ze).point,ra=Aa(Ti.last.point,ze).point;if(E&&!p){var Da=xa(f.writingMode,Fi,ra,yn);if(Da)return Da}hn=[Ti.first];for(var Na=f.glyphStartIndex+1;Na<$n-1;Na++)hn.push(Po(kn*gt.getoffsetX(Na),an,Rn,p,Mr,Or,f.segment,di,Di,Gt,Ce,Br));hn.push(Ti.last)}else{if(E&&!p){var po=Aa(Or,Y).point,No=f.lineStartIndex+f.segment+1,is=new c.Point(Gt.getx(No),Gt.gety(No)),rs=Aa(is,Y),Ls=rs.signedDistanceFromCamera>0?rs.point:Te(Or,is,po,1,Y),vo=xa(f.writingMode,po,Ls,yn);if(vo)return vo}var ds=Po(kn*gt.getoffsetX(f.glyphStartIndex),an,Rn,p,Mr,Or,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,Gt,Ce,Br);if(!ds)return{notEnoughRoom:!0};hn=[ds]}for(var Ns=0,cs=hn;Ns<cs.length;Ns+=1){var Qo=cs[Ns];c.addDynamicAttributes(sr,Qo.point,Qo.angle)}return{}}function Te(f,m,p,E,Y){var Ce=Aa(f.add(f.sub(m)._unit()),Y).point,ze=p.sub(Ce);return p.add(ze._mult(E/ze.mag()))}function Po(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr,Or){var Br=E?f-m:f+m,yn=Br>0?1:-1,hn=0;E&&(yn*=-1,hn=Math.PI),yn<0&&(hn+=Math.PI);for(var kn=yn>0?gt+ze:gt+ze+1,an=Y,Rn=Y,$n=0,di=0,Di=Math.abs(Br),Ti=[];$n+di<=Di;){if((kn+=yn)<gt||kn>=Gt)return null;if(Rn=an,Ti.push(an),(an=Or[kn])===void 0){var Fi=new c.Point(sr.getx(kn),sr.gety(kn)),ra=Aa(Fi,Mr);if(ra.signedDistanceFromCamera>0)an=Or[kn]=ra.point;else{var Da=kn-yn;an=Te($n===0?Ce:new c.Point(sr.getx(Da),sr.gety(Da)),Fi,Rn,Di-$n+1,Mr)}}$n+=di,di=Rn.dist(an)}var Na=(Di-$n)/di,po=an.sub(Rn),No=po.mult(Na)._add(Rn);No._add(po._unit()._perp()._mult(p*yn));var is=hn+Math.atan2(an.y-Rn.y,an.x-Rn.x);return Ti.push(No),{point:No,angle:is,path:Ti}}va.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},va.prototype.insert=function(f,m,p,E,Y){this._forEachCell(m,p,E,Y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(m),this.bboxes.push(p),this.bboxes.push(E),this.bboxes.push(Y)},va.prototype.insertCircle=function(f,m,p,E){this._forEachCell(m-E,p-E,m+E,p+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(m),this.circles.push(p),this.circles.push(E)},va.prototype._insertBoxCell=function(f,m,p,E,Y,Ce){this.boxCells[Y].push(Ce)},va.prototype._insertCircleCell=function(f,m,p,E,Y,Ce){this.circleCells[Y].push(Ce)},va.prototype._query=function(f,m,p,E,Y,Ce){if(p<0||f>this.width||E<0||m>this.height)return!Y&&[];var ze=[];if(f<=0&&m<=0&&this.width<=p&&this.height<=E){if(Y)return!0;for(var gt=0;gt<this.boxKeys.length;gt++)ze.push({key:this.boxKeys[gt],x1:this.bboxes[4*gt],y1:this.bboxes[4*gt+1],x2:this.bboxes[4*gt+2],y2:this.bboxes[4*gt+3]});for(var Gt=0;Gt<this.circleKeys.length;Gt++){var sr=this.circles[3*Gt],Mr=this.circles[3*Gt+1],Or=this.circles[3*Gt+2];ze.push({key:this.circleKeys[Gt],x1:sr-Or,y1:Mr-Or,x2:sr+Or,y2:Mr+Or})}return Ce?ze.filter(Ce):ze}return this._forEachCell(f,m,p,E,this._queryCell,ze,{hitTest:Y,seenUids:{box:{},circle:{}}},Ce),Y?ze.length>0:ze},va.prototype._queryCircle=function(f,m,p,E,Y){var Ce=f-p,ze=f+p,gt=m-p,Gt=m+p;if(ze<0||Ce>this.width||Gt<0||gt>this.height)return!E&&[];var sr=[];return this._forEachCell(Ce,gt,ze,Gt,this._queryCellCircle,sr,{hitTest:E,circle:{x:f,y:m,radius:p},seenUids:{box:{},circle:{}}},Y),E?sr.length>0:sr},va.prototype.query=function(f,m,p,E,Y){return this._query(f,m,p,E,!1,Y)},va.prototype.hitTest=function(f,m,p,E,Y){return this._query(f,m,p,E,!0,Y)},va.prototype.hitTestCircle=function(f,m,p,E){return this._queryCircle(f,m,p,!0,E)},va.prototype._queryCell=function(f,m,p,E,Y,Ce,ze,gt){var Gt=ze.seenUids,sr=this.boxCells[Y];if(sr!==null)for(var Mr=this.bboxes,Or=0,Br=sr;Or<Br.length;Or+=1){var yn=Br[Or];if(!Gt.box[yn]){Gt.box[yn]=!0;var hn=4*yn;if(f<=Mr[hn+2]&&m<=Mr[hn+3]&&p>=Mr[hn+0]&&E>=Mr[hn+1]&&(!gt||gt(this.boxKeys[yn]))){if(ze.hitTest)return Ce.push(!0),!0;Ce.push({key:this.boxKeys[yn],x1:Mr[hn],y1:Mr[hn+1],x2:Mr[hn+2],y2:Mr[hn+3]})}}}var kn=this.circleCells[Y];if(kn!==null)for(var an=this.circles,Rn=0,$n=kn;Rn<$n.length;Rn+=1){var di=$n[Rn];if(!Gt.circle[di]){Gt.circle[di]=!0;var Di=3*di;if(this._circleAndRectCollide(an[Di],an[Di+1],an[Di+2],f,m,p,E)&&(!gt||gt(this.circleKeys[di]))){if(ze.hitTest)return Ce.push(!0),!0;var Ti=an[Di],Fi=an[Di+1],ra=an[Di+2];Ce.push({key:this.circleKeys[di],x1:Ti-ra,y1:Fi-ra,x2:Ti+ra,y2:Fi+ra})}}}},va.prototype._queryCellCircle=function(f,m,p,E,Y,Ce,ze,gt){var Gt=ze.circle,sr=ze.seenUids,Mr=this.boxCells[Y];if(Mr!==null)for(var Or=this.bboxes,Br=0,yn=Mr;Br<yn.length;Br+=1){var hn=yn[Br];if(!sr.box[hn]){sr.box[hn]=!0;var kn=4*hn;if(this._circleAndRectCollide(Gt.x,Gt.y,Gt.radius,Or[kn+0],Or[kn+1],Or[kn+2],Or[kn+3])&&(!gt||gt(this.boxKeys[hn])))return Ce.push(!0),!0}}var an=this.circleCells[Y];if(an!==null)for(var Rn=this.circles,$n=0,di=an;$n<di.length;$n+=1){var Di=di[$n];if(!sr.circle[Di]){sr.circle[Di]=!0;var Ti=3*Di;if(this._circlesCollide(Rn[Ti],Rn[Ti+1],Rn[Ti+2],Gt.x,Gt.y,Gt.radius)&&(!gt||gt(this.circleKeys[Di])))return Ce.push(!0),!0}}},va.prototype._forEachCell=function(f,m,p,E,Y,Ce,ze,gt){for(var Gt=this._convertToXCellCoord(f),sr=this._convertToYCellCoord(m),Mr=this._convertToXCellCoord(p),Or=this._convertToYCellCoord(E),Br=Gt;Br<=Mr;Br++)for(var yn=sr;yn<=Or;yn++)if(Y.call(this,f,m,p,E,this.xCellCount*yn+Br,Ce,ze,gt))return},va.prototype._convertToXCellCoord=function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))},va.prototype._convertToYCellCoord=function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))},va.prototype._circlesCollide=function(f,m,p,E,Y,Ce){var ze=E-f,gt=Y-m,Gt=p+Ce;return Gt*Gt>ze*ze+gt*gt},va.prototype._circleAndRectCollide=function(f,m,p,E,Y,Ce,ze){var gt=(Ce-E)/2,Gt=Math.abs(f-(E+gt));if(Gt>gt+p)return!1;var sr=(ze-Y)/2,Mr=Math.abs(m-(Y+sr));if(Mr>sr+p)return!1;if(Gt<=gt||Mr<=sr)return!0;var Or=Gt-gt,Br=Mr-sr;return Or*Or+Br*Br<=p*p};var Hs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function no(f,m){for(var p=0;p<f;p++){var E=m.length;m.resize(E+4),m.float32.set(Hs,3*E)}}function Jo(f,m,p){var E=m[0],Y=m[1];return f[0]=p[0]*E+p[4]*Y+p[12],f[1]=p[1]*E+p[5]*Y+p[13],f[3]=p[3]*E+p[7]*Y+p[15],f}var os=function(f,m,p){m===void 0&&(m=new va(f.width+200,f.height+200,25)),p===void 0&&(p=new va(f.width+200,f.height+200,25)),this.transform=f,this.grid=m,this.ignoredGrid=p,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+100,this.screenBottomBoundary=f.height+100,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200};function Go(f,m,p){return m*(c.EXTENT/(f.tileSize*Math.pow(2,p-f.tileID.overscaledZ)))}os.prototype.placeCollisionBox=function(f,m,p,E,Y){var Ce=this.projectAndGetPerspectiveRatio(E,f.anchorPointX,f.anchorPointY),ze=p*Ce.perspectiveRatio,gt=f.x1*ze+Ce.point.x,Gt=f.y1*ze+Ce.point.y,sr=f.x2*ze+Ce.point.x,Mr=f.y2*ze+Ce.point.y;return!this.isInsideGrid(gt,Gt,sr,Mr)||!m&&this.grid.hitTest(gt,Gt,sr,Mr,Y)?{box:[],offscreen:!1}:{box:[gt,Gt,sr,Mr],offscreen:this.isOffscreen(gt,Gt,sr,Mr)}},os.prototype.placeCollisionCircles=function(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr,Or,Br){var yn=[],hn=new c.Point(m.anchorX,m.anchorY),kn=Aa(hn,Ce),an=ma(this.transform.cameraToCenterDistance,kn.signedDistanceFromCamera),Rn=(sr?Y/an:Y*an)/c.ONE_EM,$n=Aa(hn,ze).point,di=ha(Rn,E,m.lineOffsetX*Rn,m.lineOffsetY*Rn,!1,$n,hn,m,p,ze,{}),Di=!1,Ti=!1,Fi=!0;if(di){for(var ra=.5*Or*an+Br,Da=new c.Point(-100,-100),Na=new c.Point(this.screenRightBoundary,this.screenBottomBoundary),po=new fi,No=di.first,is=di.last,rs=[],Ls=No.path.length-1;Ls>=1;Ls--)rs.push(No.path[Ls]);for(var vo=1;vo<is.path.length;vo++)rs.push(is.path[vo]);var ds=2.5*ra;if(gt){var Ns=rs.map(function(Uc){return Aa(Uc,gt)});rs=Ns.some(function(Uc){return Uc.signedDistanceFromCamera<=0})?[]:Ns.map(function(Uc){return Uc.point})}var cs=[];if(rs.length>0){for(var Qo=rs[0].clone(),$s=rs[0].clone(),Cs=1;Cs<rs.length;Cs++)Qo.x=Math.min(Qo.x,rs[Cs].x),Qo.y=Math.min(Qo.y,rs[Cs].y),$s.x=Math.max($s.x,rs[Cs].x),$s.y=Math.max($s.y,rs[Cs].y);cs=Qo.x>=Da.x&&$s.x<=Na.x&&Qo.y>=Da.y&&$s.y<=Na.y?[rs]:$s.x<Da.x||Qo.x>Na.x||$s.y<Da.y||Qo.y>Na.y?[]:c.clipLine([rs],Da.x,Da.y,Na.x,Na.y)}for(var _s=0,El=cs;_s<El.length;_s+=1){var nl;po.reset(El[_s],.25*ra),nl=po.length<=.5*ra?1:Math.ceil(po.paddedLength/ds)+1;for(var qu=0;qu<nl;qu++){var Ac=qu/Math.max(nl-1,1),Qu=po.lerp(Ac),Ju=Qu.x+100,Tc=Qu.y+100;yn.push(Ju,Tc,ra,0);var ec=Ju-ra,Pf=Tc-ra,Ef=Ju+ra,$l=Tc+ra;if(Fi=Fi&&this.isOffscreen(ec,Pf,Ef,$l),Ti=Ti||this.isInsideGrid(ec,Pf,Ef,$l),!f&&this.grid.hitTestCircle(Ju,Tc,ra,Mr)&&(Di=!0,!Gt))return{circles:[],offscreen:!1,collisionDetected:Di}}}}return{circles:!Gt&&Di||!Ti?[]:yn,offscreen:Fi,collisionDetected:Di}},os.prototype.queryRenderedSymbols=function(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var m=[],p=1/0,E=1/0,Y=-1/0,Ce=-1/0,ze=0,gt=f;ze<gt.length;ze+=1){var Gt=gt[ze],sr=new c.Point(Gt.x+100,Gt.y+100);p=Math.min(p,sr.x),E=Math.min(E,sr.y),Y=Math.max(Y,sr.x),Ce=Math.max(Ce,sr.y),m.push(sr)}for(var Mr={},Or={},Br=0,yn=this.grid.query(p,E,Y,Ce).concat(this.ignoredGrid.query(p,E,Y,Ce));Br<yn.length;Br+=1){var hn=yn[Br],kn=hn.key;if(Mr[kn.bucketInstanceId]===void 0&&(Mr[kn.bucketInstanceId]={}),!Mr[kn.bucketInstanceId][kn.featureIndex]){var an=[new c.Point(hn.x1,hn.y1),new c.Point(hn.x2,hn.y1),new c.Point(hn.x2,hn.y2),new c.Point(hn.x1,hn.y2)];c.polygonIntersectsPolygon(m,an)&&(Mr[kn.bucketInstanceId][kn.featureIndex]=!0,Or[kn.bucketInstanceId]===void 0&&(Or[kn.bucketInstanceId]=[]),Or[kn.bucketInstanceId].push(kn.featureIndex))}}return Or},os.prototype.insertCollisionBox=function(f,m,p,E,Y){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:E,collisionGroupID:Y},f[0],f[1],f[2],f[3])},os.prototype.insertCollisionCircles=function(f,m,p,E,Y){for(var Ce=m?this.ignoredGrid:this.grid,ze={bucketInstanceId:p,featureIndex:E,collisionGroupID:Y},gt=0;gt<f.length;gt+=4)Ce.insertCircle(ze,f[gt],f[gt+1],f[gt+2])},os.prototype.projectAndGetPerspectiveRatio=function(f,m,p){var E=[m,p,0,1];return Jo(E,E,f),{point:new c.Point((E[0]/E[3]+1)/2*this.transform.width+100,(-E[1]/E[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}},os.prototype.isOffscreen=function(f,m,p,E){return p<100||f>=this.screenRightBoundary||E<100||m>this.screenBottomBoundary},os.prototype.isInsideGrid=function(f,m,p,E){return p>=0&&f<this.gridRightBoundary&&E>=0&&m<this.gridBottomBoundary},os.prototype.getViewportMatrix=function(){var f=c.identity([]);return c.translate(f,f,[-100,-100,0]),f};var Wo=function(f,m,p,E){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?m:-m))):E&&p?1:0,this.placed=p};Wo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var za=function(f,m,p,E,Y){this.text=new Wo(f?f.text:null,m,p,Y),this.icon=new Wo(f?f.icon:null,m,E,Y)};za.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Tu=function(f,m,p){this.text=f,this.icon=m,this.skipFade=p},ws=function(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]},Zs=function(f,m,p,E,Y){this.bucketInstanceId=f,this.featureIndex=m,this.sourceLayerIndex=p,this.bucketIndex=E,this.tileID=Y},ts=function(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}};function Vs(f,m,p,E,Y){var Ce=c.getAnchorAlignment(f),ze=-(Ce.horizontalAlign-.5)*m,gt=-(Ce.verticalAlign-.5)*p,Gt=c.evaluateVariableOffset(f,E);return new c.Point(ze+Gt[0]*Y,gt+Gt[1]*Y)}function ou(f,m,p,E,Y,Ce){var ze=f.x1,gt=f.x2,Gt=f.y1,sr=f.y2,Mr=f.anchorPointX,Or=f.anchorPointY,Br=new c.Point(m,p);return E&&Br._rotate(Y?Ce:-Ce),{x1:ze+Br.x,y1:Gt+Br.y,x2:gt+Br.x,y2:sr+Br.y,anchorPointX:Mr,anchorPointY:Or}}ts.prototype.get=function(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){var m=++this.maxGroupID;this.collisionGroups[f]={ID:m,predicate:function(p){return p.collisionGroupID===m}}}return this.collisionGroups[f]};var ls=function(f,m,p,E){this.transform=f.clone(),this.collisionIndex=new os(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new ts(p),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}};function ki(f,m,p,E,Y){f.emplaceBack(m?1:0,p?1:0,E||0,Y||0),f.emplaceBack(m?1:0,p?1:0,E||0,Y||0),f.emplaceBack(m?1:0,p?1:0,E||0,Y||0),f.emplaceBack(m?1:0,p?1:0,E||0,Y||0)}ls.prototype.getBucketParts=function(f,m,p,E){var Y=p.getBucket(m),Ce=p.latestFeatureIndex;if(Y&&Ce&&m.id===Y.layerIds[0]){var ze=p.collisionBoxArray,gt=Y.layers[0].layout,Gt=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),sr=p.tileSize/c.EXTENT,Mr=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),Or=gt.get("text-pitch-alignment")==="map",Br=gt.get("text-rotation-alignment")==="map",yn=Go(p,1,this.transform.zoom),hn=wa(Mr,Or,Br,this.transform,yn),kn=null;if(Or){var an=Ca(Mr,Or,Br,this.transform,yn);kn=c.multiply([],this.transform.labelPlaneMatrix,an)}this.retainedQueryData[Y.bucketInstanceId]=new Zs(Y.bucketInstanceId,Ce,Y.sourceLayerIndex,Y.index,p.tileID);var Rn={bucket:Y,layout:gt,posMatrix:Mr,textLabelPlaneMatrix:hn,labelToScreenMatrix:kn,scale:Gt,textPixelRatio:sr,holdingForFade:p.holdingForFade(),collisionBoxArray:ze,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(Y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Y.sourceID)};if(E)for(var $n=0,di=Y.sortKeyRanges;$n<di.length;$n+=1){var Di=di[$n];f.push({sortKey:Di.sortKey,symbolInstanceStart:Di.symbolInstanceStart,symbolInstanceEnd:Di.symbolInstanceEnd,parameters:Rn})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:Y.symbolInstances.length,parameters:Rn})}},ls.prototype.attemptAnchorPlacement=function(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr,Or,Br,yn,hn){var kn,an=[Or.textOffset0,Or.textOffset1],Rn=Vs(f,p,E,an,Y),$n=this.collisionIndex.placeCollisionBox(ou(m,Rn.x,Rn.y,Ce,ze,this.transform.angle),Mr,gt,Gt,sr.predicate);if(!hn||this.collisionIndex.placeCollisionBox(ou(hn,Rn.x,Rn.y,Ce,ze,this.transform.angle),Mr,gt,Gt,sr.predicate).box.length!==0)return $n.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Or.crossTileID]&&this.prevPlacement.placements[Or.crossTileID]&&this.prevPlacement.placements[Or.crossTileID].text&&(kn=this.prevPlacement.variableOffsets[Or.crossTileID].anchor),this.variableOffsets[Or.crossTileID]={textOffset:an,width:p,height:E,anchor:f,textBoxScale:Y,prevAnchor:kn},this.markUsedJustification(Br,f,Or,yn),Br.allowVerticalPlacement&&(this.markUsedOrientation(Br,yn,Or),this.placedOrientations[Or.crossTileID]=yn),{shift:Rn,placedGlyphBoxes:$n}):void 0},ls.prototype.placeLayerBucketPart=function(f,m,p){var E=this,Y=f.parameters,Ce=Y.bucket,ze=Y.layout,gt=Y.posMatrix,Gt=Y.textLabelPlaneMatrix,sr=Y.labelToScreenMatrix,Mr=Y.textPixelRatio,Or=Y.holdingForFade,Br=Y.collisionBoxArray,yn=Y.partiallyEvaluatedTextSize,hn=Y.collisionGroup,kn=ze.get("text-optional"),an=ze.get("icon-optional"),Rn=ze.get("text-allow-overlap"),$n=ze.get("icon-allow-overlap"),di=ze.get("text-rotation-alignment")==="map",Di=ze.get("text-pitch-alignment")==="map",Ti=ze.get("icon-text-fit")!=="none",Fi=ze.get("symbol-z-order")==="viewport-y",ra=Rn&&($n||!Ce.hasIconData()||an),Da=$n&&(Rn||!Ce.hasTextData()||kn);!Ce.collisionArrays&&Br&&Ce.deserializeCollisionBoxes(Br);var Na=function(vo,ds){if(!m[vo.crossTileID])if(Or)E.placements[vo.crossTileID]=new Tu(!1,!1,!1);else{var Ns,cs=!1,Qo=!1,$s=!0,Cs=null,_s={box:null,offscreen:null},El={box:null,offscreen:null},nl=null,qu=null,Ac=0,Qu=0,Ju=0;ds.textFeatureIndex?Ac=ds.textFeatureIndex:vo.useRuntimeCollisionCircles&&(Ac=vo.featureIndex),ds.verticalTextFeatureIndex&&(Qu=ds.verticalTextFeatureIndex);var Tc=ds.textBox;if(Tc){var ec=function(ku){var yu=c.WritingMode.horizontal;if(Ce.allowVerticalPlacement&&!ku&&E.prevPlacement){var Jc=E.prevPlacement.placedOrientations[vo.crossTileID];Jc&&(E.placedOrientations[vo.crossTileID]=Jc,E.markUsedOrientation(Ce,yu=Jc,vo))}return yu},Pf=function(ku,yu){if(Ce.allowVerticalPlacement&&vo.numVerticalGlyphVertices>0&&ds.verticalTextBox)for(var Jc=0,sh=Ce.writingModes;Jc<sh.length&&(sh[Jc]===c.WritingMode.vertical?(_s=yu(),El=_s):_s=ku(),!(_s&&_s.box&&_s.box.length));Jc+=1);else _s=ku()};if(ze.get("text-variable-anchor")){var Ef=ze.get("text-variable-anchor");if(E.prevPlacement&&E.prevPlacement.variableOffsets[vo.crossTileID]){var $l=E.prevPlacement.variableOffsets[vo.crossTileID];Ef.indexOf($l.anchor)>0&&(Ef=Ef.filter(function(ku){return ku!==$l.anchor})).unshift($l.anchor)}var Uc=function(ku,yu,Jc){for(var sh=ku.x2-ku.x1,vh=ku.y2-ku.y1,Nf=vo.textBoxScale,mh=Ti&&!$n?yu:null,If={box:[],offscreen:!1},Rf=Rn?2*Ef.length:Ef.length,vf=0;vf<Rf;++vf){var ue=E.attemptAnchorPlacement(Ef[vf%Ef.length],ku,sh,vh,Nf,di,Di,Mr,gt,hn,vf>=Ef.length,vo,Ce,Jc,mh);if(ue&&(If=ue.placedGlyphBoxes)&&If.box&&If.box.length){cs=!0,Cs=ue.shift;break}}return If};Pf(function(){return Uc(Tc,ds.iconBox,c.WritingMode.horizontal)},function(){var ku=ds.verticalTextBox;return Ce.allowVerticalPlacement&&!(_s&&_s.box&&_s.box.length)&&vo.numVerticalGlyphVertices>0&&ku?Uc(ku,ds.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),_s&&(cs=_s.box,$s=_s.offscreen);var Qh=ec(_s&&_s.box);if(!cs&&E.prevPlacement){var Jh=E.prevPlacement.variableOffsets[vo.crossTileID];Jh&&(E.variableOffsets[vo.crossTileID]=Jh,E.markUsedJustification(Ce,Jh.anchor,vo,Qh))}}else{var Sh=function(ku,yu){var Jc=E.collisionIndex.placeCollisionBox(ku,Rn,Mr,gt,hn.predicate);return Jc&&Jc.box&&Jc.box.length&&(E.markUsedOrientation(Ce,yu,vo),E.placedOrientations[vo.crossTileID]=yu),Jc};Pf(function(){return Sh(Tc,c.WritingMode.horizontal)},function(){var ku=ds.verticalTextBox;return Ce.allowVerticalPlacement&&vo.numVerticalGlyphVertices>0&&ku?Sh(ku,c.WritingMode.vertical):{box:null,offscreen:null}}),ec(_s&&_s.box&&_s.box.length)}}if(cs=(Ns=_s)&&Ns.box&&Ns.box.length>0,$s=Ns&&Ns.offscreen,vo.useRuntimeCollisionCircles){var Of=Ce.text.placedSymbolArray.get(vo.centerJustifiedTextSymbolIndex),wh=c.evaluateSizeForFeature(Ce.textSizeData,yn,Of),pf=ze.get("text-padding");nl=E.collisionIndex.placeCollisionCircles(Rn,Of,Ce.lineVertexArray,Ce.glyphOffsetArray,wh,gt,Gt,sr,p,Di,hn.predicate,vo.collisionCircleDiameter,pf),cs=Rn||nl.circles.length>0&&!nl.collisionDetected,$s=$s&&nl.offscreen}if(ds.iconFeatureIndex&&(Ju=ds.iconFeatureIndex),ds.iconBox){var oh=function(ku){var yu=Ti&&Cs?ou(ku,Cs.x,Cs.y,di,Di,E.transform.angle):ku;return E.collisionIndex.placeCollisionBox(yu,$n,Mr,gt,hn.predicate)};Qo=El&&El.box&&El.box.length&&ds.verticalIconBox?(qu=oh(ds.verticalIconBox)).box.length>0:(qu=oh(ds.iconBox)).box.length>0,$s=$s&&qu.offscreen}var Qc=kn||vo.numHorizontalGlyphVertices===0&&vo.numVerticalGlyphVertices===0,nc=an||vo.numIconVertices===0;if(Qc||nc?nc?Qc||(Qo=Qo&&cs):cs=Qo&&cs:Qo=cs=Qo&&cs,cs&&Ns&&Ns.box&&E.collisionIndex.insertCollisionBox(Ns.box,ze.get("text-ignore-placement"),Ce.bucketInstanceId,El&&El.box&&Qu?Qu:Ac,hn.ID),Qo&&qu&&E.collisionIndex.insertCollisionBox(qu.box,ze.get("icon-ignore-placement"),Ce.bucketInstanceId,Ju,hn.ID),nl&&(cs&&E.collisionIndex.insertCollisionCircles(nl.circles,ze.get("text-ignore-placement"),Ce.bucketInstanceId,Ac,hn.ID),p)){var ic=Ce.bucketInstanceId,Ch=E.collisionCircleArrays[ic];Ch===void 0&&(Ch=E.collisionCircleArrays[ic]=new ws);for(var Fh=0;Fh<nl.circles.length;Fh+=4)Ch.circles.push(nl.circles[Fh+0]),Ch.circles.push(nl.circles[Fh+1]),Ch.circles.push(nl.circles[Fh+2]),Ch.circles.push(nl.collisionDetected?1:0)}E.placements[vo.crossTileID]=new Tu(cs||ra,Qo||Da,$s||Ce.justReloaded),m[vo.crossTileID]=!0}};if(Fi)for(var po=Ce.getSortedSymbolIndexes(this.transform.angle),No=po.length-1;No>=0;--No){var is=po[No];Na(Ce.symbolInstances.get(is),Ce.collisionArrays[is])}else for(var rs=f.symbolInstanceStart;rs<f.symbolInstanceEnd;rs++)Na(Ce.symbolInstances.get(rs),Ce.collisionArrays[rs]);if(p&&Ce.bucketInstanceId in this.collisionCircleArrays){var Ls=this.collisionCircleArrays[Ce.bucketInstanceId];c.invert(Ls.invProjMatrix,gt),Ls.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ce.justReloaded=!1},ls.prototype.markUsedJustification=function(f,m,p,E){var Y;Y=E===c.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(m)];for(var Ce=0,ze=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];Ce<ze.length;Ce+=1){var gt=ze[Ce];gt>=0&&(f.text.placedSymbolArray.get(gt).crossTileID=Y>=0&&gt!==Y?0:p.crossTileID)}},ls.prototype.markUsedOrientation=function(f,m,p){for(var E=m===c.WritingMode.horizontal||m===c.WritingMode.horizontalOnly?m:0,Y=m===c.WritingMode.vertical?m:0,Ce=0,ze=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];Ce<ze.length;Ce+=1)f.text.placedSymbolArray.get(ze[Ce]).placedOrientation=E;p.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=Y)},ls.prototype.commit=function(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;var m=this.prevPlacement,p=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;var E=m?m.symbolFadeChange(f):1,Y=m?m.opacities:{},Ce=m?m.variableOffsets:{},ze=m?m.placedOrientations:{};for(var gt in this.placements){var Gt=this.placements[gt],sr=Y[gt];sr?(this.opacities[gt]=new za(sr,E,Gt.text,Gt.icon),p=p||Gt.text!==sr.text.placed||Gt.icon!==sr.icon.placed):(this.opacities[gt]=new za(null,E,Gt.text,Gt.icon,Gt.skipFade),p=p||Gt.text||Gt.icon)}for(var Mr in Y){var Or=Y[Mr];if(!this.opacities[Mr]){var Br=new za(Or,E,!1,!1);Br.isHidden()||(this.opacities[Mr]=Br,p=p||Or.text.placed||Or.icon.placed)}}for(var yn in Ce)this.variableOffsets[yn]||!this.opacities[yn]||this.opacities[yn].isHidden()||(this.variableOffsets[yn]=Ce[yn]);for(var hn in ze)this.placedOrientations[hn]||!this.opacities[hn]||this.opacities[hn].isHidden()||(this.placedOrientations[hn]=ze[hn]);p?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:f)},ls.prototype.updateLayerOpacities=function(f,m){for(var p={},E=0,Y=m;E<Y.length;E+=1){var Ce=Y[E],ze=Ce.getBucket(f);ze&&Ce.latestFeatureIndex&&f.id===ze.layerIds[0]&&this.updateBucketOpacities(ze,p,Ce.collisionBoxArray)}},ls.prototype.updateBucketOpacities=function(f,m,p){var E=this;f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();var Y=f.layers[0].layout,Ce=new za(null,0,!1,!1,!0),ze=Y.get("text-allow-overlap"),gt=Y.get("icon-allow-overlap"),Gt=Y.get("text-variable-anchor"),sr=Y.get("text-rotation-alignment")==="map",Mr=Y.get("text-pitch-alignment")==="map",Or=Y.get("icon-text-fit")!=="none",Br=new za(null,0,ze&&(gt||!f.hasIconData()||Y.get("icon-optional")),gt&&(ze||!f.hasTextData()||Y.get("text-optional")),!0);!f.collisionArrays&&p&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(p);for(var yn=function(Rn,$n,di){for(var Di=0;Di<$n/4;Di++)Rn.opacityVertexArray.emplaceBack(di)},hn=function(Rn){var $n=f.symbolInstances.get(Rn),di=$n.numHorizontalGlyphVertices,Di=$n.numVerticalGlyphVertices,Ti=$n.crossTileID,Fi=E.opacities[Ti];m[Ti]?Fi=Ce:Fi||(E.opacities[Ti]=Fi=Br),m[Ti]=!0;var ra=$n.numIconVertices>0,Da=E.placedOrientations[$n.crossTileID],Na=Da===c.WritingMode.vertical,po=Da===c.WritingMode.horizontal||Da===c.WritingMode.horizontalOnly;if(di>0||Di>0){var No=zr(Fi.text);yn(f.text,di,Na?Bo:No),yn(f.text,Di,po?Bo:No);var is=Fi.text.isHidden();[$n.rightJustifiedTextSymbolIndex,$n.centerJustifiedTextSymbolIndex,$n.leftJustifiedTextSymbolIndex].forEach(function(_s){_s>=0&&(f.text.placedSymbolArray.get(_s).hidden=is||Na?1:0)}),$n.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get($n.verticalPlacedTextSymbolIndex).hidden=is||po?1:0);var rs=E.variableOffsets[$n.crossTileID];rs&&E.markUsedJustification(f,rs.anchor,$n,Da);var Ls=E.placedOrientations[$n.crossTileID];Ls&&(E.markUsedJustification(f,"left",$n,Ls),E.markUsedOrientation(f,Ls,$n))}if(ra){var vo=zr(Fi.icon),ds=!(Or&&$n.verticalPlacedIconSymbolIndex&&Na);$n.placedIconSymbolIndex>=0&&(yn(f.icon,$n.numIconVertices,ds?vo:Bo),f.icon.placedSymbolArray.get($n.placedIconSymbolIndex).hidden=Fi.icon.isHidden()),$n.verticalPlacedIconSymbolIndex>=0&&(yn(f.icon,$n.numVerticalIconVertices,ds?Bo:vo),f.icon.placedSymbolArray.get($n.verticalPlacedIconSymbolIndex).hidden=Fi.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){var Ns=f.collisionArrays[Rn];if(Ns){var cs=new c.Point(0,0);if(Ns.textBox||Ns.verticalTextBox){var Qo=!0;if(Gt){var $s=E.variableOffsets[Ti];$s?(cs=Vs($s.anchor,$s.width,$s.height,$s.textOffset,$s.textBoxScale),sr&&cs._rotate(Mr?E.transform.angle:-E.transform.angle)):Qo=!1}Ns.textBox&&ki(f.textCollisionBox.collisionVertexArray,Fi.text.placed,!Qo||Na,cs.x,cs.y),Ns.verticalTextBox&&ki(f.textCollisionBox.collisionVertexArray,Fi.text.placed,!Qo||po,cs.x,cs.y)}var Cs=Boolean(!po&&Ns.verticalIconBox);Ns.iconBox&&ki(f.iconCollisionBox.collisionVertexArray,Fi.icon.placed,Cs,Or?cs.x:0,Or?cs.y:0),Ns.verticalIconBox&&ki(f.iconCollisionBox.collisionVertexArray,Fi.icon.placed,!Cs,Or?cs.x:0,Or?cs.y:0)}}},kn=0;kn<f.symbolInstances.length;kn++)hn(kn);if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){var an=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=an.invProjMatrix,f.placementViewportMatrix=an.viewportMatrix,f.collisionCircleArray=an.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}},ls.prototype.symbolFadeChange=function(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ls.prototype.zoomAdjustment=function(f){return Math.max(0,(this.transform.zoom-f)/1.5)},ls.prototype.hasTransitions=function(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration},ls.prototype.stillRecent=function(f,m){var p=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*p>f},ls.prototype.setStale=function(){this.stale=!0};var As=Math.pow(2,25),Rs=Math.pow(2,24),hr=Math.pow(2,17),Lr=Math.pow(2,16),or=Math.pow(2,9),kr=Math.pow(2,8),Hn=Math.pow(2,1);function zr(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;var m=f.placed?1:0,p=Math.floor(127*f.opacity);return p*As+m*Rs+p*hr+m*Lr+p*or+m*kr+p*Hn+m}var Bo=0,Vr=function(f){this._sortAcrossTiles=f.layout.get("symbol-z-order")!=="viewport-y"&&f.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Vr.prototype.continuePlacement=function(f,m,p,E,Y){for(var Ce=this._bucketParts;this._currentTileIndex<f.length;)if(m.getBucketParts(Ce,E,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ce.sort(function(ze,gt){return ze.sortKey-gt.sortKey}));this._currentPartIndex<Ce.length;)if(m.placeLayerBucketPart(Ce[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,Y())return!0;return!1};var cr=function(f,m,p,E,Y,Ce,ze){this.placement=new ls(f,Y,Ce,ze),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=E,this._done=!1};cr.prototype.isDone=function(){return this._done},cr.prototype.continuePlacement=function(f,m,p){for(var E=this,Y=c.browser.now(),Ce=function(){var Gt=c.browser.now()-Y;return!E._forceFullPlacement&&Gt>2};this._currentPlacementIndex>=0;){var ze=m[f[this._currentPlacementIndex]],gt=this.placement.collisionIndex.transform.zoom;if(ze.type==="symbol"&&(!ze.minzoom||ze.minzoom<=gt)&&(!ze.maxzoom||ze.maxzoom>gt)){if(this._inProgressLayer||(this._inProgressLayer=new Vr(ze)),this._inProgressLayer.continuePlacement(p[ze.source],this.placement,this._showCollisionBoxes,ze,Ce))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},cr.prototype.commit=function(f){return this.placement.commit(f),this.placement};var ht=512/c.EXTENT/2,ur=function(f,m,p){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(var E=0;E<m.length;E++){var Y=m.get(E),Ce=Y.key;this.indexedSymbolInstances[Ce]||(this.indexedSymbolInstances[Ce]=[]),this.indexedSymbolInstances[Ce].push({crossTileID:Y.crossTileID,coord:this.getScaledCoordinates(Y,f)})}};ur.prototype.getScaledCoordinates=function(f,m){var p=ht/Math.pow(2,m.canonical.z-this.tileID.canonical.z);return{x:Math.floor((m.canonical.x*c.EXTENT+f.anchorX)*p),y:Math.floor((m.canonical.y*c.EXTENT+f.anchorY)*p)}},ur.prototype.findMatches=function(f,m,p){for(var E=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),Y=0;Y<f.length;Y++){var Ce=f.get(Y);if(!Ce.crossTileID){var ze=this.indexedSymbolInstances[Ce.key];if(ze)for(var gt=this.getScaledCoordinates(Ce,m),Gt=0,sr=ze;Gt<sr.length;Gt+=1){var Mr=sr[Gt];if(Math.abs(Mr.coord.x-gt.x)<=E&&Math.abs(Mr.coord.y-gt.y)<=E&&!p[Mr.crossTileID]){p[Mr.crossTileID]=!0,Ce.crossTileID=Mr.crossTileID;break}}}}};var er=function(){this.maxCrossTileID=0};er.prototype.generate=function(){return++this.maxCrossTileID};var sn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};sn.prototype.handleWrapJump=function(f){var m=Math.round((f-this.lng)/360);if(m!==0)for(var p in this.indexes){var E=this.indexes[p],Y={};for(var Ce in E){var ze=E[Ce];ze.tileID=ze.tileID.unwrapTo(ze.tileID.wrap+m),Y[ze.tileID.key]=ze}this.indexes[p]=Y}this.lng=f},sn.prototype.addBucket=function(f,m,p){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(var E=0;E<m.symbolInstances.length;E++)m.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});var Y=this.usedCrossTileIDs[f.overscaledZ];for(var Ce in this.indexes){var ze=this.indexes[Ce];if(Number(Ce)>f.overscaledZ)for(var gt in ze){var Gt=ze[gt];Gt.tileID.isChildOf(f)&&Gt.findMatches(m.symbolInstances,f,Y)}else{var sr=ze[f.scaledTo(Number(Ce)).key];sr&&sr.findMatches(m.symbolInstances,f,Y)}}for(var Mr=0;Mr<m.symbolInstances.length;Mr++){var Or=m.symbolInstances.get(Mr);Or.crossTileID||(Or.crossTileID=p.generate(),Y[Or.crossTileID]=!0)}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new ur(f,m.symbolInstances,m.bucketInstanceId),!0},sn.prototype.removeBucketCrossTileIDs=function(f,m){for(var p in m.indexedSymbolInstances)for(var E=0,Y=m.indexedSymbolInstances[p];E<Y.length;E+=1)delete this.usedCrossTileIDs[f][Y[E].crossTileID]},sn.prototype.removeStaleBuckets=function(f){var m=!1;for(var p in this.indexes){var E=this.indexes[p];for(var Y in E)f[E[Y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,E[Y]),delete E[Y],m=!0)}return m};var fn=function(){this.layerIndexes={},this.crossTileIDs=new er,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};fn.prototype.addLayer=function(f,m,p){var E=this.layerIndexes[f.id];E===void 0&&(E=this.layerIndexes[f.id]=new sn);var Y=!1,Ce={};E.handleWrapJump(p);for(var ze=0,gt=m;ze<gt.length;ze+=1){var Gt=gt[ze],sr=Gt.getBucket(f);sr&&f.id===sr.layerIds[0]&&(sr.bucketInstanceId||(sr.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(Gt.tileID,sr,this.crossTileIDs)&&(Y=!0),Ce[sr.bucketInstanceId]=!0)}return E.removeStaleBuckets(Ce)&&(Y=!0),Y},fn.prototype.pruneUnusedLayers=function(f){var m={};for(var p in f.forEach(function(E){m[E]=!0}),this.layerIndexes)m[p]||delete this.layerIndexes[p]};var Vn=function(f,m){return c.emitValidationErrors(f,m&&m.filter(function(p){return p.identifier!=="source.canvas"}))},ni=c.pick(ta,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),oi=c.pick(ta,["setCenter","setZoom","setBearing","setPitch"]),Ei=function(){var f={},m=c.styleSpec.$version;for(var p in c.styleSpec.$root){var E,Y=c.styleSpec.$root[p];Y.required&&(E=p==="version"?m:Y.type==="array"?[]:{})!=null&&(f[p]=E)}return f}(),qi=function(f){function m(p,E){var Y=this;E===void 0&&(E={}),f.call(this),this.map=p,this.dispatcher=new le(Ln(),this),this.imageManager=new Se,this.imageManager.setEventedParent(this),this.glyphManager=new $e(p._requestManager,E.localIdeographFontFamily),this.lineAtlas=new De(256,512),this.crossTileSymbolIndex=new fn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());var Ce=this;this._rtlTextPluginCallback=m.registerForPluginStateChange(function(ze){Ce.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ze.pluginStatus,pluginURL:ze.pluginURL},function(gt,Gt){if(c.triggerPluginCompletionEvent(gt),Gt&&Gt.every(function(Mr){return Mr}))for(var sr in Ce.sourceCaches)Ce.sourceCaches[sr].reload()})}),this.on("data",function(ze){if(ze.dataType==="source"&&ze.sourceDataType==="metadata"){var gt=Y.sourceCaches[ze.sourceId];if(gt){var Gt=gt.getSource();if(Gt&&Gt.vectorLayerIds)for(var sr in Y._layers){var Mr=Y._layers[sr];Mr.source===Gt.id&&Y._validateLayer(Mr)}}}})}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.loadURL=function(p,E){var Y=this;E===void 0&&(E={}),this.fire(new c.Event("dataloading",{dataType:"style"}));var Ce=typeof E.validate=="boolean"?E.validate:!c.isMapboxURL(p);p=this.map._requestManager.normalizeStyleURL(p,E.accessToken);var ze=this.map._requestManager.transformRequest(p,c.ResourceType.Style);this._request=c.getJSON(ze,function(gt,Gt){Y._request=null,gt?Y.fire(new c.ErrorEvent(gt)):Gt&&Y._load(Gt,Ce)})},m.prototype.loadJSON=function(p,E){var Y=this;E===void 0&&(E={}),this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.browser.frame(function(){Y._request=null,Y._load(p,E.validate!==!1)})},m.prototype.loadEmpty=function(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(Ei,!1)},m.prototype._load=function(p,E){if(!E||!Vn(this,c.validateStyle(p))){for(var Y in this._loaded=!0,this.stylesheet=p,p.sources)this.addSource(Y,p.sources[Y],{validate:!1});p.sprite?this._loadSprite(p.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(p.glyphs);var Ce=xi(this.stylesheet.layers);this._order=Ce.map(function(sr){return sr.id}),this._layers={},this._serializedLayers={};for(var ze=0,gt=Ce;ze<gt.length;ze+=1){var Gt=gt[ze];(Gt=c.createStyleLayer(Gt)).setEventedParent(this,{layer:{id:Gt.id}}),this._layers[Gt.id]=Gt,this._serializedLayers[Gt.id]=Gt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new re(this.stylesheet.light),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}},m.prototype._loadSprite=function(p){var E=this;this._spriteRequest=function(Y,Ce,ze){var gt,Gt,sr,Mr=c.browser.devicePixelRatio>1?"@2x":"",Or=c.getJSON(Ce.transformRequest(Ce.normalizeSpriteURL(Y,Mr,".json"),c.ResourceType.SpriteJSON),function(hn,kn){Or=null,sr||(sr=hn,gt=kn,yn())}),Br=c.getImage(Ce.transformRequest(Ce.normalizeSpriteURL(Y,Mr,".png"),c.ResourceType.SpriteImage),function(hn,kn){Br=null,sr||(sr=hn,Gt=kn,yn())});function yn(){if(sr)ze(sr);else if(gt&&Gt){var hn=c.browser.getImageData(Gt),kn={};for(var an in gt){var Rn=gt[an],$n=Rn.width,di=Rn.height,Di=Rn.x,Ti=Rn.y,Fi=Rn.sdf,ra=Rn.pixelRatio,Da=Rn.stretchX,Na=Rn.stretchY,po=Rn.content,No=new c.RGBAImage({width:$n,height:di});c.RGBAImage.copy(hn,No,{x:Di,y:Ti},{x:0,y:0},{width:$n,height:di}),kn[an]={data:No,pixelRatio:ra,sdf:Fi,stretchX:Da,stretchY:Na,content:po}}ze(null,kn)}}return{cancel:function(){Or&&(Or.cancel(),Or=null),Br&&(Br.cancel(),Br=null)}}}(p,this.map._requestManager,function(Y,Ce){if(E._spriteRequest=null,Y)E.fire(new c.ErrorEvent(Y));else if(Ce)for(var ze in Ce)E.imageManager.addImage(ze,Ce[ze]);E.imageManager.setLoaded(!0),E._availableImages=E.imageManager.listImages(),E.dispatcher.broadcast("setImages",E._availableImages),E.fire(new c.Event("data",{dataType:"style"}))})},m.prototype._validateLayer=function(p){var E=this.sourceCaches[p.source];if(E){var Y=p.sourceLayer;if(Y){var Ce=E.getSource();(Ce.type==="geojson"||Ce.vectorLayerIds&&Ce.vectorLayerIds.indexOf(Y)===-1)&&this.fire(new c.ErrorEvent(new Error('Source layer "'+Y+'" does not exist on source "'+Ce.id+'" as specified by style layer "'+p.id+'"')))}}},m.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var p in this.sourceCaches)if(!this.sourceCaches[p].loaded())return!1;return!!this.imageManager.isLoaded()},m.prototype._serializeLayers=function(p){for(var E=[],Y=0,Ce=p;Y<Ce.length;Y+=1){var ze=this._layers[Ce[Y]];ze.type!=="custom"&&E.push(ze.serialize())}return E},m.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(var E in this._layers)if(this._layers[E].hasTransition())return!0;return!1},m.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},m.prototype.update=function(p){if(this._loaded){var E=this._changed;if(this._changed){var Y=Object.keys(this._updatedLayers),Ce=Object.keys(this._removedLayers);for(var ze in(Y.length||Ce.length)&&this._updateWorkerLayers(Y,Ce),this._updatedSources){var gt=this._updatedSources[ze];gt==="reload"?this._reloadSource(ze):gt==="clear"&&this._clearSource(ze)}for(var Gt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Gt].updateTransitions(p);this.light.updateTransitions(p),this._resetUpdates()}var sr={};for(var Mr in this.sourceCaches){var Or=this.sourceCaches[Mr];sr[Mr]=Or.used,Or.used=!1}for(var Br=0,yn=this._order;Br<yn.length;Br+=1){var hn=this._layers[yn[Br]];hn.recalculate(p,this._availableImages),!hn.isHidden(p.zoom)&&hn.source&&(this.sourceCaches[hn.source].used=!0)}for(var kn in sr){var an=this.sourceCaches[kn];sr[kn]!==an.used&&an.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:kn}))}this.light.recalculate(p),this.z=p.zoom,E&&this.fire(new c.Event("data",{dataType:"style"}))}},m.prototype._updateTilesForChangedImages=function(){var p=Object.keys(this._changedImages);if(p.length){for(var E in this.sourceCaches)this.sourceCaches[E].reloadTilesForDependencies(["icons","patterns"],p);this._changedImages={}}},m.prototype._updateWorkerLayers=function(p,E){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(p),removedIds:E})},m.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},m.prototype.setState=function(p){var E=this;if(this._checkLoaded(),Vn(this,c.validateStyle(p)))return!1;(p=c.clone$1(p)).layers=xi(p.layers);var Y=function(ze,gt){if(!ze)return[{command:ta.setStyle,args:[gt]}];var Gt=[];try{if(!c.deepEqual(ze.version,gt.version))return[{command:ta.setStyle,args:[gt]}];c.deepEqual(ze.center,gt.center)||Gt.push({command:ta.setCenter,args:[gt.center]}),c.deepEqual(ze.zoom,gt.zoom)||Gt.push({command:ta.setZoom,args:[gt.zoom]}),c.deepEqual(ze.bearing,gt.bearing)||Gt.push({command:ta.setBearing,args:[gt.bearing]}),c.deepEqual(ze.pitch,gt.pitch)||Gt.push({command:ta.setPitch,args:[gt.pitch]}),c.deepEqual(ze.sprite,gt.sprite)||Gt.push({command:ta.setSprite,args:[gt.sprite]}),c.deepEqual(ze.glyphs,gt.glyphs)||Gt.push({command:ta.setGlyphs,args:[gt.glyphs]}),c.deepEqual(ze.transition,gt.transition)||Gt.push({command:ta.setTransition,args:[gt.transition]}),c.deepEqual(ze.light,gt.light)||Gt.push({command:ta.setLight,args:[gt.light]});var sr={},Mr=[];(function(Br,yn,hn,kn){var an;for(an in yn=yn||{},Br=Br||{})Br.hasOwnProperty(an)&&(yn.hasOwnProperty(an)||Ki(an,hn,kn));for(an in yn)yn.hasOwnProperty(an)&&(Br.hasOwnProperty(an)?c.deepEqual(Br[an],yn[an])||(Br[an].type==="geojson"&&yn[an].type==="geojson"&&uo(Br,yn,an)?hn.push({command:ta.setGeoJSONSourceData,args:[an,yn[an].data]}):jo(an,yn,hn,kn)):La(an,yn,hn))})(ze.sources,gt.sources,Mr,sr);var Or=[];ze.layers&&ze.layers.forEach(function(Br){sr[Br.source]?Gt.push({command:ta.removeLayer,args:[Br.id]}):Or.push(Br)}),Gt=Gt.concat(Mr),function(Br,yn,hn){yn=yn||[];var kn,an,Rn,$n,di,Di,Ti,Fi=(Br=Br||[]).map(gn),ra=yn.map(gn),Da=Br.reduce(Oi,{}),Na=yn.reduce(Oi,{}),po=Fi.slice(),No=Object.create(null);for(kn=0,an=0;kn<Fi.length;kn++)Na.hasOwnProperty(Rn=Fi[kn])?an++:(hn.push({command:ta.removeLayer,args:[Rn]}),po.splice(po.indexOf(Rn,an),1));for(kn=0,an=0;kn<ra.length;kn++)po[po.length-1-kn]!==(Rn=ra[ra.length-1-kn])&&(Da.hasOwnProperty(Rn)?(hn.push({command:ta.removeLayer,args:[Rn]}),po.splice(po.lastIndexOf(Rn,po.length-an),1)):an++,hn.push({command:ta.addLayer,args:[Na[Rn],Di=po[po.length-kn]]}),po.splice(po.length-kn,0,Rn),No[Rn]=!0);for(kn=0;kn<ra.length;kn++)if($n=Da[Rn=ra[kn]],di=Na[Rn],!No[Rn]&&!c.deepEqual($n,di))if(c.deepEqual($n.source,di.source)&&c.deepEqual($n["source-layer"],di["source-layer"])&&c.deepEqual($n.type,di.type)){for(Ti in An($n.layout,di.layout,hn,Rn,null,ta.setLayoutProperty),An($n.paint,di.paint,hn,Rn,null,ta.setPaintProperty),c.deepEqual($n.filter,di.filter)||hn.push({command:ta.setFilter,args:[Rn,di.filter]}),c.deepEqual($n.minzoom,di.minzoom)&&c.deepEqual($n.maxzoom,di.maxzoom)||hn.push({command:ta.setLayerZoomRange,args:[Rn,di.minzoom,di.maxzoom]}),$n)$n.hasOwnProperty(Ti)&&Ti!=="layout"&&Ti!=="paint"&&Ti!=="filter"&&Ti!=="metadata"&&Ti!=="minzoom"&&Ti!=="maxzoom"&&(Ti.indexOf("paint.")===0?An($n[Ti],di[Ti],hn,Rn,Ti.slice(6),ta.setPaintProperty):c.deepEqual($n[Ti],di[Ti])||hn.push({command:ta.setLayerProperty,args:[Rn,Ti,di[Ti]]}));for(Ti in di)di.hasOwnProperty(Ti)&&!$n.hasOwnProperty(Ti)&&Ti!=="layout"&&Ti!=="paint"&&Ti!=="filter"&&Ti!=="metadata"&&Ti!=="minzoom"&&Ti!=="maxzoom"&&(Ti.indexOf("paint.")===0?An($n[Ti],di[Ti],hn,Rn,Ti.slice(6),ta.setPaintProperty):c.deepEqual($n[Ti],di[Ti])||hn.push({command:ta.setLayerProperty,args:[Rn,Ti,di[Ti]]}))}else hn.push({command:ta.removeLayer,args:[Rn]}),Di=po[po.lastIndexOf(Rn)+1],hn.push({command:ta.addLayer,args:[di,Di]})}(Or,gt.layers,Gt)}catch(Br){console.warn("Unable to compute style diff:",Br),Gt=[{command:ta.setStyle,args:[gt]}]}return Gt}(this.serialize(),p).filter(function(ze){return!(ze.command in oi)});if(Y.length===0)return!1;var Ce=Y.filter(function(ze){return!(ze.command in ni)});if(Ce.length>0)throw new Error("Unimplemented: "+Ce.map(function(ze){return ze.command}).join(", ")+".");return Y.forEach(function(ze){ze.command!=="setTransition"&&E[ze.command].apply(E,ze.args)}),this.stylesheet=p,!0},m.prototype.addImage=function(p,E){if(this.getImage(p))return this.fire(new c.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(p,E),this._afterImageUpdated(p)},m.prototype.updateImage=function(p,E){this.imageManager.updateImage(p,E)},m.prototype.getImage=function(p){return this.imageManager.getImage(p)},m.prototype.removeImage=function(p){if(!this.getImage(p))return this.fire(new c.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(p),this._afterImageUpdated(p)},m.prototype._afterImageUpdated=function(p){this._availableImages=this.imageManager.listImages(),this._changedImages[p]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))},m.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},m.prototype.addSource=function(p,E,Y){var Ce=this;if(Y===void 0&&(Y={}),this._checkLoaded(),this.sourceCaches[p]!==void 0)throw new Error("There is already a source with this ID");if(!E.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(E).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(E.type)>=0&&this._validate(c.validateStyle.source,"sources."+p,E,null,Y))){this.map&&this.map._collectResourceTiming&&(E.collectResourceTiming=!0);var ze=this.sourceCaches[p]=new tt(p,E,this.dispatcher);ze.style=this,ze.setEventedParent(this,function(){return{isSourceLoaded:Ce.loaded(),source:ze.serialize(),sourceId:p}}),ze.onAdd(this.map),this._changed=!0}},m.prototype.removeSource=function(p){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error("There is no source with this ID");for(var E in this._layers)if(this._layers[E].source===p)return this.fire(new c.ErrorEvent(new Error('Source "'+p+'" cannot be removed while layer "'+E+'" is using it.')));var Y=this.sourceCaches[p];delete this.sourceCaches[p],delete this._updatedSources[p],Y.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:p})),Y.setEventedParent(null),Y.clearTiles(),Y.onRemove&&Y.onRemove(this.map),this._changed=!0},m.prototype.setGeoJSONSourceData=function(p,E){this._checkLoaded(),this.sourceCaches[p].getSource().setData(E),this._changed=!0},m.prototype.getSource=function(p){return this.sourceCaches[p]&&this.sourceCaches[p].getSource()},m.prototype.addLayer=function(p,E,Y){Y===void 0&&(Y={}),this._checkLoaded();var Ce=p.id;if(this.getLayer(Ce))this.fire(new c.ErrorEvent(new Error('Layer with id "'+Ce+'" already exists on this map')));else{var ze;if(p.type==="custom"){if(Vn(this,c.validateCustomStyleLayer(p)))return;ze=c.createStyleLayer(p)}else{if(typeof p.source=="object"&&(this.addSource(Ce,p.source),p=c.clone$1(p),p=c.extend(p,{source:Ce})),this._validate(c.validateStyle.layer,"layers."+Ce,p,{arrayIndex:-1},Y))return;ze=c.createStyleLayer(p),this._validateLayer(ze),ze.setEventedParent(this,{layer:{id:Ce}}),this._serializedLayers[ze.id]=ze.serialize()}var gt=E?this._order.indexOf(E):this._order.length;if(E&&gt===-1)this.fire(new c.ErrorEvent(new Error('Layer with id "'+E+'" does not exist on this map.')));else{if(this._order.splice(gt,0,Ce),this._layerOrderChanged=!0,this._layers[Ce]=ze,this._removedLayers[Ce]&&ze.source&&ze.type!=="custom"){var Gt=this._removedLayers[Ce];delete this._removedLayers[Ce],Gt.type!==ze.type?this._updatedSources[ze.source]="clear":(this._updatedSources[ze.source]="reload",this.sourceCaches[ze.source].pause())}this._updateLayer(ze),ze.onAdd&&ze.onAdd(this.map)}}},m.prototype.moveLayer=function(p,E){if(this._checkLoaded(),this._changed=!0,this._layers[p]){if(p!==E){var Y=this._order.indexOf(p);this._order.splice(Y,1);var Ce=E?this._order.indexOf(E):this._order.length;E&&Ce===-1?this.fire(new c.ErrorEvent(new Error('Layer with id "'+E+'" does not exist on this map.'))):(this._order.splice(Ce,0,p),this._layerOrderChanged=!0)}}else this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be moved.")))},m.prototype.removeLayer=function(p){this._checkLoaded();var E=this._layers[p];if(E){E.setEventedParent(null);var Y=this._order.indexOf(p);this._order.splice(Y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[p]=E,delete this._layers[p],delete this._serializedLayers[p],delete this._updatedLayers[p],delete this._updatedPaintProps[p],E.onRemove&&E.onRemove(this.map)}else this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be removed.")))},m.prototype.getLayer=function(p){return this._layers[p]},m.prototype.hasLayer=function(p){return p in this._layers},m.prototype.setLayerZoomRange=function(p,E,Y){this._checkLoaded();var Ce=this.getLayer(p);Ce?Ce.minzoom===E&&Ce.maxzoom===Y||(E!=null&&(Ce.minzoom=E),Y!=null&&(Ce.maxzoom=Y),this._updateLayer(Ce)):this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot have zoom extent.")))},m.prototype.setFilter=function(p,E,Y){Y===void 0&&(Y={}),this._checkLoaded();var Ce=this.getLayer(p);if(Ce){if(!c.deepEqual(Ce.filter,E))return E==null?(Ce.filter=void 0,void this._updateLayer(Ce)):void(this._validate(c.validateStyle.filter,"layers."+Ce.id+".filter",E,null,Y)||(Ce.filter=c.clone$1(E),this._updateLayer(Ce)))}else this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be filtered.")))},m.prototype.getFilter=function(p){return c.clone$1(this.getLayer(p).filter)},m.prototype.setLayoutProperty=function(p,E,Y,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var ze=this.getLayer(p);ze?c.deepEqual(ze.getLayoutProperty(E),Y)||(ze.setLayoutProperty(E,Y,Ce),this._updateLayer(ze)):this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be styled.")))},m.prototype.getLayoutProperty=function(p,E){var Y=this.getLayer(p);if(Y)return Y.getLayoutProperty(E);this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style.")))},m.prototype.setPaintProperty=function(p,E,Y,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var ze=this.getLayer(p);ze?c.deepEqual(ze.getPaintProperty(E),Y)||(ze.setPaintProperty(E,Y,Ce)&&this._updateLayer(ze),this._changed=!0,this._updatedPaintProps[p]=!0):this.fire(new c.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be styled.")))},m.prototype.getPaintProperty=function(p,E){return this.getLayer(p).getPaintProperty(E)},m.prototype.setFeatureState=function(p,E){this._checkLoaded();var Y=p.source,Ce=p.sourceLayer,ze=this.sourceCaches[Y];if(ze!==void 0){var gt=ze.getSource().type;gt==="geojson"&&Ce?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):gt!=="vector"||Ce?(p.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),ze.setFeatureState(Ce,p.id,E)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+Y+"' does not exist in the map's style.")))},m.prototype.removeFeatureState=function(p,E){this._checkLoaded();var Y=p.source,Ce=this.sourceCaches[Y];if(Ce!==void 0){var ze=Ce.getSource().type,gt=ze==="vector"?p.sourceLayer:void 0;ze!=="vector"||gt?E&&typeof p.id!="string"&&typeof p.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Ce.removeFeatureState(gt,p.id,E):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+Y+"' does not exist in the map's style.")))},m.prototype.getFeatureState=function(p){this._checkLoaded();var E=p.source,Y=p.sourceLayer,Ce=this.sourceCaches[E];if(Ce!==void 0){if(Ce.getSource().type!=="vector"||Y)return p.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),Ce.getFeatureState(Y,p.id);this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+E+"' does not exist in the map's style.")))},m.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},m.prototype.serialize=function(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(p){return p.serialize()}),layers:this._serializeLayers(this._order)},function(p){return p!==void 0})},m.prototype._updateLayer=function(p){this._updatedLayers[p.id]=!0,p.source&&!this._updatedSources[p.source]&&this.sourceCaches[p.source].getSource().type!=="raster"&&(this._updatedSources[p.source]="reload",this.sourceCaches[p.source].pause()),this._changed=!0},m.prototype._flattenAndSortRenderedFeatures=function(p){for(var E=this,Y=function(Da){return E._layers[Da].type==="fill-extrusion"},Ce={},ze=[],gt=this._order.length-1;gt>=0;gt--){var Gt=this._order[gt];if(Y(Gt)){Ce[Gt]=gt;for(var sr=0,Mr=p;sr<Mr.length;sr+=1){var Or=Mr[sr][Gt];if(Or)for(var Br=0,yn=Or;Br<yn.length;Br+=1)ze.push(yn[Br])}}}ze.sort(function(Da,Na){return Na.intersectionZ-Da.intersectionZ});for(var hn=[],kn=this._order.length-1;kn>=0;kn--){var an=this._order[kn];if(Y(an))for(var Rn=ze.length-1;Rn>=0;Rn--){var $n=ze[Rn].feature;if(Ce[$n.layer.id]<kn)break;hn.push($n),ze.pop()}else for(var di=0,Di=p;di<Di.length;di+=1){var Ti=Di[di][an];if(Ti)for(var Fi=0,ra=Ti;Fi<ra.length;Fi+=1)hn.push(ra[Fi].feature)}}return hn},m.prototype.queryRenderedFeatures=function(p,E,Y){E&&E.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",E.filter,null,E);var Ce={};if(E&&E.layers){if(!Array.isArray(E.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ze=0,gt=E.layers;ze<gt.length;ze+=1){var Gt=gt[ze],sr=this._layers[Gt];if(!sr)return this.fire(new c.ErrorEvent(new Error("The layer '"+Gt+"' does not exist in the map's style and cannot be queried for features."))),[];Ce[sr.source]=!0}}var Mr=[];for(var Or in E.availableImages=this._availableImages,this.sourceCaches)E.layers&&!Ce[Or]||Mr.push(It(this.sourceCaches[Or],this._layers,this._serializedLayers,p,E,Y));return this.placement&&Mr.push(function(Br,yn,hn,kn,an,Rn,$n){for(var di={},Di=Rn.queryRenderedSymbols(kn),Ti=[],Fi=0,ra=Object.keys(Di).map(Number);Fi<ra.length;Fi+=1)Ti.push($n[ra[Fi]]);Ti.sort(fe);for(var Da=function(){var rs=po[Na],Ls=rs.featureIndex.lookupSymbolFeatures(Di[rs.bucketInstanceId],yn,rs.bucketIndex,rs.sourceLayerIndex,an.filter,an.layers,an.availableImages,Br);for(var vo in Ls){var ds=di[vo]=di[vo]||[],Ns=Ls[vo];Ns.sort(function($s,Cs){var _s=rs.featureSortOrder;if(_s){var El=_s.indexOf($s.featureIndex);return _s.indexOf(Cs.featureIndex)-El}return Cs.featureIndex-$s.featureIndex});for(var cs=0,Qo=Ns;cs<Qo.length;cs+=1)ds.push(Qo[cs])}},Na=0,po=Ti;Na<po.length;Na+=1)Da();var No=function(rs){di[rs].forEach(function(Ls){var vo=Ls.feature,ds=hn[Br[rs].source].getFeatureState(vo.layer["source-layer"],vo.id);vo.source=vo.layer.source,vo.layer["source-layer"]&&(vo.sourceLayer=vo.layer["source-layer"]),vo.state=ds})};for(var is in di)No(is);return di}(this._layers,this._serializedLayers,this.sourceCaches,p,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Mr)},m.prototype.querySourceFeatures=function(p,E){E&&E.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",E.filter,null,E);var Y=this.sourceCaches[p];return Y?function(Ce,ze){for(var gt=Ce.getRenderableIds().map(function(yn){return Ce.getTileByID(yn)}),Gt=[],sr={},Mr=0;Mr<gt.length;Mr++){var Or=gt[Mr],Br=Or.tileID.canonical.key;sr[Br]||(sr[Br]=!0,Or.querySourceFeatures(Gt,ze))}return Gt}(Y,E):[]},m.prototype.addSourceType=function(p,E,Y){return m.getSourceType(p)?Y(new Error('A source type called "'+p+'" already exists.')):(m.setSourceType(p,E),E.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:p,url:E.workerSourceURL},Y):Y(null,null))},m.prototype.getLight=function(){return this.light.getLight()},m.prototype.setLight=function(p,E){E===void 0&&(E={}),this._checkLoaded();var Y=this.light.getLight(),Ce=!1;for(var ze in p)if(!c.deepEqual(p[ze],Y[ze])){Ce=!0;break}if(Ce){var gt={now:c.browser.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(p,E),this.light.updateTransitions(gt)}},m.prototype._validate=function(p,E,Y,Ce,ze){return ze===void 0&&(ze={}),(!ze||ze.validate!==!1)&&Vn(this,p.call(c.validateStyle,c.extend({key:E,style:this.serialize(),value:Y,styleSpec:c.styleSpec},Ce)))},m.prototype._remove=function(){for(var p in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[p].setEventedParent(null);for(var E in this.sourceCaches)this.sourceCaches[E].clearTiles(),this.sourceCaches[E].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},m.prototype._clearSource=function(p){this.sourceCaches[p].clearTiles()},m.prototype._reloadSource=function(p){this.sourceCaches[p].resume(),this.sourceCaches[p].reload()},m.prototype._updateSources=function(p){for(var E in this.sourceCaches)this.sourceCaches[E].update(p)},m.prototype._generateCollisionBoxes=function(){for(var p in this.sourceCaches)this._reloadSource(p)},m.prototype._updatePlacement=function(p,E,Y,Ce,ze){ze===void 0&&(ze=!1);for(var gt=!1,Gt=!1,sr={},Mr=0,Or=this._order;Mr<Or.length;Mr+=1){var Br=this._layers[Or[Mr]];if(Br.type==="symbol"){if(!sr[Br.source]){var yn=this.sourceCaches[Br.source];sr[Br.source]=yn.getRenderableIds(!0).map(function($n){return yn.getTileByID($n)}).sort(function($n,di){return di.tileID.overscaledZ-$n.tileID.overscaledZ||($n.tileID.isLessThan(di.tileID)?-1:1)})}var hn=this.crossTileSymbolIndex.addLayer(Br,sr[Br.source],p.center.lng);gt=gt||hn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ze=ze||this._layerOrderChanged||Y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.browser.now(),p.zoom))&&(this.pauseablePlacement=new cr(p,this._order,ze,E,Y,Ce,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,sr),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.browser.now()),Gt=!0),gt&&this.pauseablePlacement.placement.setStale()),Gt||gt)for(var kn=0,an=this._order;kn<an.length;kn+=1){var Rn=this._layers[an[kn]];Rn.type==="symbol"&&this.placement.updateLayerOpacities(Rn,sr[Rn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.browser.now())},m.prototype._releaseSymbolFadeTiles=function(){for(var p in this.sourceCaches)this.sourceCaches[p].releaseSymbolFadeTiles()},m.prototype.getImages=function(p,E,Y){this.imageManager.getImages(E.icons,Y),this._updateTilesForChangedImages();var Ce=this.sourceCaches[E.source];Ce&&Ce.setDependencies(E.tileID.key,E.type,E.icons)},m.prototype.getGlyphs=function(p,E,Y){this.glyphManager.getGlyphs(E.stacks,Y)},m.prototype.getResource=function(p,E,Y){return c.makeRequest(E,Y)},m}(c.Evented);qi.getSourceType=function(f){return lt[f]},qi.setSourceType=function(f,m){lt[f]=m},qi.registerForPluginStateChange=c.registerForPluginStateChange;var Pr=c.createLayout([{name:"a_pos",type:"Int16",components:2}]),Cn=Ho(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ln=Ho(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),bn=Ho(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Kn=Ho(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),bi=Ho("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Yi=Ho(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gi=Ho(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),aa=Ho("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ta=Ho("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),R=Ho("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),_e=Ho(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),At=Ho(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ke=Ho(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),nr=Ho(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),wr=Ho(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Wr=Ho(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),In=Ho(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Dn=Ho(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Mi=Ho(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Bi=Ho(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),io=Ho(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),co=Ho(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Sa=Ho(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ko=Ho(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Co=Ho(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Oo=Ho(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ho(f,m){var p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,E=m.match(/attribute ([\w]+) ([\w]+)/g),Y=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Ce=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ze=Ce?Ce.concat(Y):Y,gt={};return{fragmentSource:f=f.replace(p,function(Gt,sr,Mr,Or,Br){return gt[Br]=!0,sr==="define"?`
#ifndef HAS_UNIFORM_u_`+Br+`
varying `+Mr+" "+Or+" "+Br+`;
#else
uniform `+Mr+" "+Or+" u_"+Br+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Br+`
    `+Mr+" "+Or+" "+Br+" = u_"+Br+`;
#endif
`}),vertexSource:m=m.replace(p,function(Gt,sr,Mr,Or,Br){var yn=Or==="float"?"vec2":"vec4",hn=Br.match(/color/)?"color":yn;return gt[Br]?sr==="define"?`
#ifndef HAS_UNIFORM_u_`+Br+`
uniform lowp float u_`+Br+`_t;
attribute `+Mr+" "+yn+" a_"+Br+`;
varying `+Mr+" "+Or+" "+Br+`;
#else
uniform `+Mr+" "+Or+" u_"+Br+`;
#endif
`:hn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Br+`
    `+Br+" = a_"+Br+`;
#else
    `+Mr+" "+Or+" "+Br+" = u_"+Br+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Br+`
    `+Br+" = unpack_mix_"+hn+"(a_"+Br+", u_"+Br+`_t);
#else
    `+Mr+" "+Or+" "+Br+" = u_"+Br+`;
#endif
`:sr==="define"?`
#ifndef HAS_UNIFORM_u_`+Br+`
uniform lowp float u_`+Br+`_t;
attribute `+Mr+" "+yn+" a_"+Br+`;
#else
uniform `+Mr+" "+Or+" u_"+Br+`;
#endif
`:hn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Br+`
    `+Mr+" "+Or+" "+Br+" = a_"+Br+`;
#else
    `+Mr+" "+Or+" "+Br+" = u_"+Br+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Br+`
    `+Mr+" "+Or+" "+Br+" = unpack_mix_"+hn+"(a_"+Br+", u_"+Br+`_t);
#else
    `+Mr+" "+Or+" "+Br+" = u_"+Br+`;
#endif
`}),staticAttributes:E,staticUniforms:ze}}var Io=Object.freeze({__proto__:null,prelude:Cn,background:ln,backgroundPattern:bn,circle:Kn,clippingMask:bi,heatmap:Yi,heatmapTexture:Gi,collisionBox:aa,collisionCircle:Ta,debug:R,fill:_e,fillOutline:At,fillOutlinePattern:Ke,fillPattern:nr,fillExtrusion:wr,fillExtrusionPattern:Wr,hillshadePrepare:In,hillshade:Dn,line:Mi,lineGradient:Bi,linePattern:io,lineSDF:co,raster:Sa,symbolIcon:Ko,symbolSDF:Co,symbolTextAndIcon:Oo}),Js=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Il(f){for(var m=[],p=0;p<f.length;p++)if(f[p]!==null){var E=f[p].split(" ");m.push(E.pop())}return m}Js.prototype.bind=function(f,m,p,E,Y,Ce,ze,gt){this.context=f;for(var Gt=this.boundPaintVertexBuffers.length!==E.length,sr=0;!Gt&&sr<E.length;sr++)this.boundPaintVertexBuffers[sr]!==E[sr]&&(Gt=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===m&&this.boundLayoutVertexBuffer===p&&!Gt&&this.boundIndexBuffer===Y&&this.boundVertexOffset===Ce&&this.boundDynamicVertexBuffer===ze&&this.boundDynamicVertexBuffer2===gt?(f.bindVertexArrayOES.set(this.vao),ze&&ze.bind(),Y&&Y.dynamicDraw&&Y.bind(),gt&&gt.bind()):this.freshBind(m,p,E,Y,Ce,ze,gt)},Js.prototype.freshBind=function(f,m,p,E,Y,Ce,ze){var gt,Gt=f.numAttributes,sr=this.context,Mr=sr.gl;if(sr.extVertexArrayObject)this.vao&&this.destroy(),this.vao=sr.extVertexArrayObject.createVertexArrayOES(),sr.bindVertexArrayOES.set(this.vao),gt=0,this.boundProgram=f,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=E,this.boundVertexOffset=Y,this.boundDynamicVertexBuffer=Ce,this.boundDynamicVertexBuffer2=ze;else{gt=sr.currentNumAttributes||0;for(var Or=Gt;Or<gt;Or++)Mr.disableVertexAttribArray(Or)}m.enableAttributes(Mr,f);for(var Br=0,yn=p;Br<yn.length;Br+=1)yn[Br].enableAttributes(Mr,f);Ce&&Ce.enableAttributes(Mr,f),ze&&ze.enableAttributes(Mr,f),m.bind(),m.setVertexAttribPointers(Mr,f,Y);for(var hn=0,kn=p;hn<kn.length;hn+=1){var an=kn[hn];an.bind(),an.setVertexAttribPointers(Mr,f,Y)}Ce&&(Ce.bind(),Ce.setVertexAttribPointers(Mr,f,Y)),E&&E.bind(),ze&&(ze.bind(),ze.setVertexAttribPointers(Mr,f,Y)),sr.currentNumAttributes=Gt},Js.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ao=function(f,m,p,E,Y,Ce){var ze=f.gl;this.program=ze.createProgram();for(var gt=Il(p.staticAttributes),Gt=E?E.getBinderAttributes():[],sr=gt.concat(Gt),Mr=p.staticUniforms?Il(p.staticUniforms):[],Or=E?E.getBinderUniforms():[],Br=[],yn=0,hn=Mr.concat(Or);yn<hn.length;yn+=1){var kn=hn[yn];Br.indexOf(kn)<0&&Br.push(kn)}var an=E?E.defines():[];Ce&&an.push("#define OVERDRAW_INSPECTOR;");var Rn=an.concat(Cn.fragmentSource,p.fragmentSource).join(`
`),$n=an.concat(Cn.vertexSource,p.vertexSource).join(`
`),di=ze.createShader(ze.FRAGMENT_SHADER);if(ze.isContextLost())this.failedToCreate=!0;else{ze.shaderSource(di,Rn),ze.compileShader(di),ze.attachShader(this.program,di);var Di=ze.createShader(ze.VERTEX_SHADER);if(ze.isContextLost())this.failedToCreate=!0;else{ze.shaderSource(Di,$n),ze.compileShader(Di),ze.attachShader(this.program,Di),this.attributes={};var Ti={};this.numAttributes=sr.length;for(var Fi=0;Fi<this.numAttributes;Fi++)sr[Fi]&&(ze.bindAttribLocation(this.program,Fi,sr[Fi]),this.attributes[sr[Fi]]=Fi);ze.linkProgram(this.program),ze.deleteShader(Di),ze.deleteShader(di);for(var ra=0;ra<Br.length;ra++){var Da=Br[ra];if(Da&&!Ti[Da]){var Na=ze.getUniformLocation(this.program,Da);Na&&(Ti[Da]=Na)}}this.fixedUniforms=Y(f,Ti),this.binderUniforms=E?E.getUniforms(f,Ti):[]}}};function Va(f,m,p){var E=1/Go(p,1,m.transform.tileZoom),Y=Math.pow(2,p.tileID.overscaledZ),Ce=p.tileSize*Math.pow(2,m.transform.tileZoom)/Y,ze=Ce*(p.tileID.canonical.x+p.tileID.wrap*Y),gt=Ce*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[E,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[ze>>16,gt>>16],u_pixel_coord_lower:[65535&ze,65535&gt]}}Ao.prototype.draw=function(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr,Or,Br,yn,hn,kn){var an,Rn=f.gl;if(!this.failedToCreate){for(var $n in f.program.set(this.program),f.setDepthMode(p),f.setStencilMode(E),f.setColorMode(Y),f.setCullFace(Ce),this.fixedUniforms)this.fixedUniforms[$n].set(ze[$n]);yn&&yn.setUniforms(f,this.binderUniforms,Or,{zoom:Br});for(var di=(an={},an[Rn.LINES]=2,an[Rn.TRIANGLES]=3,an[Rn.LINE_STRIP]=1,an)[m],Di=0,Ti=Mr.get();Di<Ti.length;Di+=1){var Fi=Ti[Di],ra=Fi.vaos||(Fi.vaos={});(ra[gt]||(ra[gt]=new Js)).bind(f,this,Gt,yn?yn.getPaintVertexBuffers():[],sr,Fi.vertexOffset,hn,kn),Rn.drawElements(m,Fi.primitiveLength*di,Rn.UNSIGNED_SHORT,Fi.primitiveOffset*di*2)}}};var gs=function(f,m,p,E){var Y=m.style.light,Ce=Y.properties.get("position"),ze=[Ce.x,Ce.y,Ce.z],gt=c.create$1();Y.properties.get("anchor")==="viewport"&&c.fromRotation(gt,-m.transform.angle),c.transformMat3(ze,ze,gt);var Gt=Y.properties.get("color");return{u_matrix:f,u_lightpos:ze,u_lightintensity:Y.properties.get("intensity"),u_lightcolor:[Gt.r,Gt.g,Gt.b],u_vertical_gradient:+p,u_opacity:E}},Ws=function(f,m,p,E,Y,Ce,ze){return c.extend(gs(f,m,p,E),Va(Ce,m,ze),{u_height_factor:-Math.pow(2,Y.overscaledZ)/ze.tileSize/8})},bs=function(f){return{u_matrix:f}},Ps=function(f,m,p,E){return c.extend(bs(f),Va(p,m,E))},Xs=function(f,m){return{u_matrix:f,u_world:m}},gl=function(f,m,p,E,Y){return c.extend(Ps(f,m,p,E),{u_world:Y})},jf=function(f,m,p,E){var Y,Ce,ze=f.transform;if(E.paint.get("circle-pitch-alignment")==="map"){var gt=Go(p,1,ze.zoom);Y=!0,Ce=[gt,gt]}else Y=!1,Ce=ze.pixelsToGLUnits;return{u_camera_to_center_distance:ze.cameraToCenterDistance,u_scale_with_map:+(E.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(m.posMatrix,p,E.paint.get("circle-translate"),E.paint.get("circle-translate-anchor")),u_pitch_with_map:+Y,u_device_pixel_ratio:c.browser.devicePixelRatio,u_extrude_scale:Ce}},Mu=function(f,m,p){var E=Go(p,1,m.zoom),Y=Math.pow(2,m.zoom-p.tileID.overscaledZ),Ce=p.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:m.cameraToCenterDistance,u_pixels_to_tile_units:E,u_extrude_scale:[m.pixelsToGLUnits[0]/(E*Y),m.pixelsToGLUnits[1]/(E*Y)],u_overscale_factor:Ce}},yl=function(f,m,p){return{u_matrix:f,u_inv_matrix:m,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}},lc=function(f,m,p){return p===void 0&&(p=1),{u_matrix:f,u_color:m,u_overlay:0,u_overlay_scale:p}},Lc=function(f){return{u_matrix:f}},dh=function(f,m,p,E){return{u_matrix:f,u_extrude_scale:Go(m,1,p),u_intensity:E}},_l=function(f,m,p){var E=f.transform;return{u_matrix:lf(f,m,p),u_ratio:1/Go(m,1,E.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Us=function(f,m,p,E){return c.extend(_l(f,m,p),{u_image:0,u_image_height:E})},th=function(f,m,p,E){var Y=f.transform,Ce=Cf(m,Y);return{u_matrix:lf(f,m,p),u_texsize:m.imageAtlasTexture.size,u_ratio:1/Go(m,1,Y.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_image:0,u_scale:[Ce,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/Y.pixelsToGLUnits[0],1/Y.pixelsToGLUnits[1]]}},Df=function(f,m,p,E,Y){var Ce=f.lineAtlas,ze=Cf(m,f.transform),gt=p.layout.get("line-cap")==="round",Gt=Ce.getDash(E.from,gt),sr=Ce.getDash(E.to,gt),Mr=Gt.width*Y.fromScale,Or=sr.width*Y.toScale;return c.extend(_l(f,m,p),{u_patternscale_a:[ze/Mr,-Gt.height/2],u_patternscale_b:[ze/Or,-sr.height/2],u_sdfgamma:Ce.width/(256*Math.min(Mr,Or)*c.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Gt.y,u_tex_y_b:sr.y,u_mix:Y.t})};function Cf(f,m){return 1/Go(f,1,m.tileZoom)}function lf(f,m,p){return f.translatePosMatrix(m.tileID.posMatrix,m,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}var gd=function(f,m,p,E,Y){return{u_matrix:f,u_tl_parent:m,u_scale_parent:p,u_buffer_scale:1,u_fade_t:E.mix,u_opacity:E.opacity*Y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Y.paint.get("raster-brightness-min"),u_brightness_high:Y.paint.get("raster-brightness-max"),u_saturation_factor:(ze=Y.paint.get("raster-saturation"),ze>0?1-1/(1.001-ze):-ze),u_contrast_factor:(Ce=Y.paint.get("raster-contrast"),Ce>0?1/(1-Ce):1+Ce),u_spin_weights:Kh(Y.paint.get("raster-hue-rotate"))};var Ce,ze};function Kh(f){f*=Math.PI/180;var m=Math.sin(f),p=Math.cos(f);return[(2*p+1)/3,(-Math.sqrt(3)*m-p+1)/3,(Math.sqrt(3)*m-p+1)/3]}var yc,Eh=function(f,m,p,E,Y,Ce,ze,gt,Gt,sr){var Mr=Y.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:m?m.uSizeT:0,u_size:m?m.uSize:0,u_camera_to_center_distance:Mr.cameraToCenterDistance,u_pitch:Mr.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Mr.width/Mr.height,u_fade_change:Y.options.fadeDuration?Y.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:ze,u_coord_matrix:gt,u_is_text:+Gt,u_pitch_with_map:+E,u_texsize:sr,u_texture:0}},cf=function(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr){var Or=Y.transform;return c.extend(Eh(f,m,p,E,Y,Ce,ze,gt,Gt,sr),{u_gamma_scale:E?Math.cos(Or._pitch)*Or.cameraToCenterDistance:1,u_device_pixel_ratio:c.browser.devicePixelRatio,u_is_halo:+Mr})},Af=function(f,m,p,E,Y,Ce,ze,gt,Gt,sr){return c.extend(cf(f,m,p,E,Y,Ce,ze,gt,!0,Gt,!0),{u_texsize_icon:sr,u_texture_icon:1})},_f=function(f,m,p){return{u_matrix:f,u_opacity:m,u_color:p}},kc=function(f,m,p,E,Y,Ce){return c.extend(function(ze,gt,Gt,sr){var Mr=Gt.imageManager.getPattern(ze.from.toString()),Or=Gt.imageManager.getPattern(ze.to.toString()),Br=Gt.imageManager.getPixelSize(),yn=Br.width,hn=Br.height,kn=Math.pow(2,sr.tileID.overscaledZ),an=sr.tileSize*Math.pow(2,Gt.transform.tileZoom)/kn,Rn=an*(sr.tileID.canonical.x+sr.tileID.wrap*kn),$n=an*sr.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Mr.tl,u_pattern_br_a:Mr.br,u_pattern_tl_b:Or.tl,u_pattern_br_b:Or.br,u_texsize:[yn,hn],u_mix:gt.t,u_pattern_size_a:Mr.displaySize,u_pattern_size_b:Or.displaySize,u_scale_a:gt.fromScale,u_scale_b:gt.toScale,u_tile_units_to_pixels:1/Go(sr,1,Gt.transform.tileZoom),u_pixel_coord_upper:[Rn>>16,$n>>16],u_pixel_coord_lower:[65535&Rn,65535&$n]}}(E,Ce,p,Y),{u_matrix:f,u_opacity:m})},Ff={fillExtrusion:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_lightpos:new c.Uniform3f(f,m.u_lightpos),u_lightintensity:new c.Uniform1f(f,m.u_lightintensity),u_lightcolor:new c.Uniform3f(f,m.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,m.u_vertical_gradient),u_opacity:new c.Uniform1f(f,m.u_opacity)}},fillExtrusionPattern:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_lightpos:new c.Uniform3f(f,m.u_lightpos),u_lightintensity:new c.Uniform1f(f,m.u_lightintensity),u_lightcolor:new c.Uniform3f(f,m.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,m.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,m.u_height_factor),u_image:new c.Uniform1i(f,m.u_image),u_texsize:new c.Uniform2f(f,m.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,m.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,m.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,m.u_scale),u_fade:new c.Uniform1f(f,m.u_fade),u_opacity:new c.Uniform1f(f,m.u_opacity)}},fill:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix)}},fillPattern:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_image:new c.Uniform1i(f,m.u_image),u_texsize:new c.Uniform2f(f,m.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,m.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,m.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,m.u_scale),u_fade:new c.Uniform1f(f,m.u_fade)}},fillOutline:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_world:new c.Uniform2f(f,m.u_world)}},fillOutlinePattern:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_world:new c.Uniform2f(f,m.u_world),u_image:new c.Uniform1i(f,m.u_image),u_texsize:new c.Uniform2f(f,m.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,m.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,m.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,m.u_scale),u_fade:new c.Uniform1f(f,m.u_fade)}},circle:function(f,m){return{u_camera_to_center_distance:new c.Uniform1f(f,m.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(f,m.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(f,m.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(f,m.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,m.u_matrix)}},collisionBox:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,m.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(f,m.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(f,m.u_extrude_scale),u_overscale_factor:new c.Uniform1f(f,m.u_overscale_factor)}},collisionCircle:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,m.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,m.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,m.u_viewport_size)}},debug:function(f,m){return{u_color:new c.UniformColor(f,m.u_color),u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_overlay:new c.Uniform1i(f,m.u_overlay),u_overlay_scale:new c.Uniform1f(f,m.u_overlay_scale)}},clippingMask:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix)}},heatmap:function(f,m){return{u_extrude_scale:new c.Uniform1f(f,m.u_extrude_scale),u_intensity:new c.Uniform1f(f,m.u_intensity),u_matrix:new c.UniformMatrix4f(f,m.u_matrix)}},heatmapTexture:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_world:new c.Uniform2f(f,m.u_world),u_image:new c.Uniform1i(f,m.u_image),u_color_ramp:new c.Uniform1i(f,m.u_color_ramp),u_opacity:new c.Uniform1f(f,m.u_opacity)}},hillshade:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_image:new c.Uniform1i(f,m.u_image),u_latrange:new c.Uniform2f(f,m.u_latrange),u_light:new c.Uniform2f(f,m.u_light),u_shadow:new c.UniformColor(f,m.u_shadow),u_highlight:new c.UniformColor(f,m.u_highlight),u_accent:new c.UniformColor(f,m.u_accent)}},hillshadePrepare:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_image:new c.Uniform1i(f,m.u_image),u_dimension:new c.Uniform2f(f,m.u_dimension),u_zoom:new c.Uniform1f(f,m.u_zoom),u_unpack:new c.Uniform4f(f,m.u_unpack)}},line:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_ratio:new c.Uniform1f(f,m.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,m.u_units_to_pixels)}},lineGradient:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_ratio:new c.Uniform1f(f,m.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,m.u_units_to_pixels),u_image:new c.Uniform1i(f,m.u_image),u_image_height:new c.Uniform1f(f,m.u_image_height)}},linePattern:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_texsize:new c.Uniform2f(f,m.u_texsize),u_ratio:new c.Uniform1f(f,m.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_image:new c.Uniform1i(f,m.u_image),u_units_to_pixels:new c.Uniform2f(f,m.u_units_to_pixels),u_scale:new c.Uniform3f(f,m.u_scale),u_fade:new c.Uniform1f(f,m.u_fade)}},lineSDF:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_ratio:new c.Uniform1f(f,m.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,m.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(f,m.u_patternscale_a),u_patternscale_b:new c.Uniform2f(f,m.u_patternscale_b),u_sdfgamma:new c.Uniform1f(f,m.u_sdfgamma),u_image:new c.Uniform1i(f,m.u_image),u_tex_y_a:new c.Uniform1f(f,m.u_tex_y_a),u_tex_y_b:new c.Uniform1f(f,m.u_tex_y_b),u_mix:new c.Uniform1f(f,m.u_mix)}},raster:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_tl_parent:new c.Uniform2f(f,m.u_tl_parent),u_scale_parent:new c.Uniform1f(f,m.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,m.u_buffer_scale),u_fade_t:new c.Uniform1f(f,m.u_fade_t),u_opacity:new c.Uniform1f(f,m.u_opacity),u_image0:new c.Uniform1i(f,m.u_image0),u_image1:new c.Uniform1i(f,m.u_image1),u_brightness_low:new c.Uniform1f(f,m.u_brightness_low),u_brightness_high:new c.Uniform1f(f,m.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,m.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,m.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,m.u_spin_weights)}},symbolIcon:function(f,m){return{u_is_size_zoom_constant:new c.Uniform1i(f,m.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,m.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,m.u_size_t),u_size:new c.Uniform1f(f,m.u_size),u_camera_to_center_distance:new c.Uniform1f(f,m.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,m.u_pitch),u_rotate_symbol:new c.Uniform1i(f,m.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,m.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,m.u_fade_change),u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,m.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,m.u_coord_matrix),u_is_text:new c.Uniform1i(f,m.u_is_text),u_pitch_with_map:new c.Uniform1i(f,m.u_pitch_with_map),u_texsize:new c.Uniform2f(f,m.u_texsize),u_texture:new c.Uniform1i(f,m.u_texture)}},symbolSDF:function(f,m){return{u_is_size_zoom_constant:new c.Uniform1i(f,m.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,m.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,m.u_size_t),u_size:new c.Uniform1f(f,m.u_size),u_camera_to_center_distance:new c.Uniform1f(f,m.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,m.u_pitch),u_rotate_symbol:new c.Uniform1i(f,m.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,m.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,m.u_fade_change),u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,m.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,m.u_coord_matrix),u_is_text:new c.Uniform1i(f,m.u_is_text),u_pitch_with_map:new c.Uniform1i(f,m.u_pitch_with_map),u_texsize:new c.Uniform2f(f,m.u_texsize),u_texture:new c.Uniform1i(f,m.u_texture),u_gamma_scale:new c.Uniform1f(f,m.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,m.u_is_halo)}},symbolTextAndIcon:function(f,m){return{u_is_size_zoom_constant:new c.Uniform1i(f,m.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,m.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,m.u_size_t),u_size:new c.Uniform1f(f,m.u_size),u_camera_to_center_distance:new c.Uniform1f(f,m.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,m.u_pitch),u_rotate_symbol:new c.Uniform1i(f,m.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,m.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,m.u_fade_change),u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,m.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,m.u_coord_matrix),u_is_text:new c.Uniform1i(f,m.u_is_text),u_pitch_with_map:new c.Uniform1i(f,m.u_pitch_with_map),u_texsize:new c.Uniform2f(f,m.u_texsize),u_texsize_icon:new c.Uniform2f(f,m.u_texsize_icon),u_texture:new c.Uniform1i(f,m.u_texture),u_texture_icon:new c.Uniform1i(f,m.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,m.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,m.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,m.u_is_halo)}},background:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_opacity:new c.Uniform1f(f,m.u_opacity),u_color:new c.UniformColor(f,m.u_color)}},backgroundPattern:function(f,m){return{u_matrix:new c.UniformMatrix4f(f,m.u_matrix),u_opacity:new c.Uniform1f(f,m.u_opacity),u_image:new c.Uniform1i(f,m.u_image),u_pattern_tl_a:new c.Uniform2f(f,m.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,m.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,m.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,m.u_pattern_br_b),u_texsize:new c.Uniform2f(f,m.u_texsize),u_mix:new c.Uniform1f(f,m.u_mix),u_pattern_size_a:new c.Uniform2f(f,m.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,m.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,m.u_scale_a),u_scale_b:new c.Uniform1f(f,m.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,m.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,m.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,m.u_tile_units_to_pixels)}}};function Zl(f,m,p,E,Y,Ce,ze){for(var gt=f.context,Gt=gt.gl,sr=f.useProgram("collisionBox"),Mr=[],Or=0,Br=0,yn=0;yn<E.length;yn++){var hn=E[yn],kn=m.getTile(hn),an=kn.getBucket(p);if(an){var Rn=hn.posMatrix;Y[0]===0&&Y[1]===0||(Rn=f.translatePosMatrix(hn.posMatrix,kn,Y,Ce));var $n=ze?an.textCollisionBox:an.iconCollisionBox,di=an.collisionCircleArray;if(di.length>0){var Di=c.create(),Ti=Rn;c.mul(Di,an.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul(Di,Di,an.placementViewportMatrix),Mr.push({circleArray:di,circleOffset:Br,transform:Ti,invTransform:Di}),Br=Or+=di.length/4}$n&&sr.draw(gt,Gt.LINES,dr.disabled,_r.disabled,f.colorModeForRenderPass(),Qr.disabled,Mu(Rn,f.transform,kn),p.id,$n.layoutVertexBuffer,$n.indexBuffer,$n.segments,null,f.transform.zoom,null,null,$n.collisionVertexBuffer)}}if(ze&&Mr.length){var Fi=f.useProgram("collisionCircle"),ra=new c.StructArrayLayout2f1f2i16;ra.resize(4*Or),ra._trim();for(var Da=0,Na=0,po=Mr;Na<po.length;Na+=1)for(var No=po[Na],is=0;is<No.circleArray.length/4;is++){var rs=4*is,Ls=No.circleArray[rs+0],vo=No.circleArray[rs+1],ds=No.circleArray[rs+2],Ns=No.circleArray[rs+3];ra.emplace(Da++,Ls,vo,ds,Ns,0),ra.emplace(Da++,Ls,vo,ds,Ns,1),ra.emplace(Da++,Ls,vo,ds,Ns,2),ra.emplace(Da++,Ls,vo,ds,Ns,3)}(!yc||yc.length<2*Or)&&(yc=function(nl){var qu=2*nl,Ac=new c.StructArrayLayout3ui6;Ac.resize(qu),Ac._trim();for(var Qu=0;Qu<qu;Qu++){var Ju=6*Qu;Ac.uint16[Ju+0]=4*Qu+0,Ac.uint16[Ju+1]=4*Qu+1,Ac.uint16[Ju+2]=4*Qu+2,Ac.uint16[Ju+3]=4*Qu+2,Ac.uint16[Ju+4]=4*Qu+3,Ac.uint16[Ju+5]=4*Qu+0}return Ac}(Or));for(var cs=gt.createIndexBuffer(yc,!0),Qo=gt.createVertexBuffer(ra,c.collisionCircleLayout.members,!0),$s=0,Cs=Mr;$s<Cs.length;$s+=1){var _s=Cs[$s],El=yl(_s.transform,_s.invTransform,f.transform);Fi.draw(gt,Gt.TRIANGLES,dr.disabled,_r.disabled,f.colorModeForRenderPass(),Qr.disabled,El,p.id,Qo,cs,c.SegmentVector.simpleSegment(0,2*_s.circleOffset,_s.circleArray.length,_s.circleArray.length/2),null,f.transform.zoom,null,null,null)}Qo.destroy(),cs.destroy()}}var Dc=c.identity(new Float32Array(16));function ad(f,m,p,E,Y,Ce){var ze=c.getAnchorAlignment(f),gt=-(ze.horizontalAlign-.5)*m,Gt=-(ze.verticalAlign-.5)*p,sr=c.evaluateVariableOffset(f,E);return new c.Point((gt/Y+sr[0])*Ce,(Gt/Y+sr[1])*Ce)}function rh(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr){var Or=f.text.placedSymbolArray,Br=f.text.dynamicLayoutVertexArray,yn=f.icon.dynamicLayoutVertexArray,hn={};Br.clear();for(var kn=0;kn<Or.length;kn++){var an=Or.get(kn),Rn=an.hidden||!an.crossTileID||f.allowVerticalPlacement&&!an.placedOrientation?null:E[an.crossTileID];if(Rn){var $n=new c.Point(an.anchorX,an.anchorY),di=Aa($n,p?gt:ze),Di=ma(Ce.cameraToCenterDistance,di.signedDistanceFromCamera),Ti=Y.evaluateSizeForFeature(f.textSizeData,sr,an)*Di/c.ONE_EM;p&&(Ti*=f.tilePixelRatio/Gt);for(var Fi=ad(Rn.anchor,Rn.width,Rn.height,Rn.textOffset,Rn.textBoxScale,Ti),ra=p?Aa($n.add(Fi),ze).point:di.point.add(m?Fi.rotate(-Ce.angle):Fi),Da=f.allowVerticalPlacement&&an.placedOrientation===c.WritingMode.vertical?Math.PI/2:0,Na=0;Na<an.numGlyphs;Na++)c.addDynamicAttributes(Br,ra,Da);Mr&&an.associatedIconIndex>=0&&(hn[an.associatedIconIndex]={shiftedAnchor:ra,angle:Da})}else no(an.numGlyphs,Br)}if(Mr){yn.clear();for(var po=f.icon.placedSymbolArray,No=0;No<po.length;No++){var is=po.get(No);if(is.hidden)no(is.numGlyphs,yn);else{var rs=hn[No];if(rs)for(var Ls=0;Ls<is.numGlyphs;Ls++)c.addDynamicAttributes(yn,rs.shiftedAnchor,rs.angle);else no(is.numGlyphs,yn)}}f.icon.dynamicLayoutVertexBuffer.updateData(yn)}f.text.dynamicLayoutVertexBuffer.updateData(Br)}function od(f,m,p){return p.iconsInText&&m?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Yo(f,m,p,E,Y,Ce,ze,gt,Gt,sr,Mr,Or){for(var Br=f.context,yn=Br.gl,hn=f.transform,kn=gt==="map",an=Gt==="map",Rn=kn&&p.layout.get("symbol-placement")!=="point",$n=kn&&!an&&!Rn,di=p.layout.get("symbol-sort-key").constantOr(1)!==void 0,Di=!1,Ti=f.depthModeForSublayer(0,dr.ReadOnly),Fi=p.layout.get("text-variable-anchor"),ra=[],Da=0,Na=E;Da<Na.length;Da+=1){var po=Na[Da],No=m.getTile(po),is=No.getBucket(p);if(is){var rs=Y?is.text:is.icon;if(rs&&rs.segments.get().length){var Ls=rs.programConfigurations.get(p.id),vo=Y||is.sdfIcons,ds=Y?is.textSizeData:is.iconSizeData,Ns=an||hn.pitch!==0,cs=f.useProgram(od(vo,Y,is),Ls),Qo=c.evaluateSizeForZoom(ds,hn.zoom),$s=void 0,Cs=[0,0],_s=void 0,El=void 0,nl=null,qu=void 0;if(Y)_s=No.glyphAtlasTexture,El=yn.LINEAR,$s=No.glyphAtlasTexture.size,is.iconsInText&&(Cs=No.imageAtlasTexture.size,nl=No.imageAtlasTexture,qu=Ns||f.options.rotating||f.options.zooming||ds.kind==="composite"||ds.kind==="camera"?yn.LINEAR:yn.NEAREST);else{var Ac=p.layout.get("icon-size").constantOr(0)!==1||is.iconsNeedLinear;_s=No.imageAtlasTexture,El=vo||f.options.rotating||f.options.zooming||Ac||Ns?yn.LINEAR:yn.NEAREST,$s=No.imageAtlasTexture.size}var Qu=Go(No,1,f.transform.zoom),Ju=wa(po.posMatrix,an,kn,f.transform,Qu),Tc=Ca(po.posMatrix,an,kn,f.transform,Qu),ec=Fi&&is.hasTextData(),Pf=p.layout.get("icon-text-fit")!=="none"&&ec&&is.hasIconData();Rn&&Uo(is,po.posMatrix,f,Y,Ju,Tc,an,sr);var Ef=f.translatePosMatrix(po.posMatrix,No,Ce,ze),$l=Rn||Y&&Fi||Pf?Dc:Ju,Uc=f.translatePosMatrix(Tc,No,Ce,ze,!0),Qh=vo&&p.paint.get(Y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Jh={program:cs,buffers:rs,uniformValues:vo?is.iconsInText?Af(ds.kind,Qo,$n,an,f,Ef,$l,Uc,$s,Cs):cf(ds.kind,Qo,$n,an,f,Ef,$l,Uc,Y,$s,!0):Eh(ds.kind,Qo,$n,an,f,Ef,$l,Uc,Y,$s),atlasTexture:_s,atlasTextureIcon:nl,atlasInterpolation:El,atlasInterpolationIcon:qu,isSDF:vo,hasHalo:Qh};if(di&&is.canOverlap){Di=!0;for(var Sh=0,Of=rs.segments.get();Sh<Of.length;Sh+=1){var wh=Of[Sh];ra.push({segments:new c.SegmentVector([wh]),sortKey:wh.sortKey,state:Jh})}}else ra.push({segments:rs.segments,sortKey:0,state:Jh})}}}Di&&ra.sort(function(Ch,Fh){return Ch.sortKey-Fh.sortKey});for(var pf=0,oh=ra;pf<oh.length;pf+=1){var Qc=oh[pf],nc=Qc.state;if(Br.activeTexture.set(yn.TEXTURE0),nc.atlasTexture.bind(nc.atlasInterpolation,yn.CLAMP_TO_EDGE),nc.atlasTextureIcon&&(Br.activeTexture.set(yn.TEXTURE1),nc.atlasTextureIcon&&nc.atlasTextureIcon.bind(nc.atlasInterpolationIcon,yn.CLAMP_TO_EDGE)),nc.isSDF){var ic=nc.uniformValues;nc.hasHalo&&(ic.u_is_halo=1,Gs(nc.buffers,Qc.segments,p,f,nc.program,Ti,Mr,Or,ic)),ic.u_is_halo=0}Gs(nc.buffers,Qc.segments,p,f,nc.program,Ti,Mr,Or,nc.uniformValues)}}function Gs(f,m,p,E,Y,Ce,ze,gt,Gt){var sr=E.context;Y.draw(sr,sr.gl.TRIANGLES,Ce,ze,gt,Qr.disabled,Gt,p.id,f.layoutVertexBuffer,f.indexBuffer,m,p.paint,E.transform.zoom,f.programConfigurations.get(p.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Kl(f,m,p,E,Y,Ce,ze){var gt,Gt,sr,Mr,Or,Br=f.context.gl,yn=p.paint.get("fill-pattern"),hn=yn&&yn.constantOr(1),kn=p.getCrossfadeParameters();ze?(Gt=hn&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",gt=Br.LINES):(Gt=hn?"fillPattern":"fill",gt=Br.TRIANGLES);for(var an=0,Rn=E;an<Rn.length;an+=1){var $n=Rn[an],di=m.getTile($n);if(!hn||di.patternsLoaded()){var Di=di.getBucket(p);if(Di){var Ti=Di.programConfigurations.get(p.id),Fi=f.useProgram(Gt,Ti);hn&&(f.context.activeTexture.set(Br.TEXTURE0),di.imageAtlasTexture.bind(Br.LINEAR,Br.CLAMP_TO_EDGE),Ti.updatePaintBuffers(kn));var ra=yn.constantOr(null);if(ra&&di.imageAtlas){var Da=di.imageAtlas,Na=Da.patternPositions[ra.to.toString()],po=Da.patternPositions[ra.from.toString()];Na&&po&&Ti.setConstantPatternPositions(Na,po)}var No=f.translatePosMatrix($n.posMatrix,di,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(ze){Mr=Di.indexBuffer2,Or=Di.segments2;var is=[Br.drawingBufferWidth,Br.drawingBufferHeight];sr=Gt==="fillOutlinePattern"&&hn?gl(No,f,kn,di,is):Xs(No,is)}else Mr=Di.indexBuffer,Or=Di.segments,sr=hn?Ps(No,f,kn,di):bs(No);Fi.draw(f.context,gt,Y,f.stencilModeForClipping($n),Ce,Qr.disabled,sr,p.id,Di.layoutVertexBuffer,Mr,Or,p.paint,f.transform.zoom,Ti)}}}}function dl(f,m,p,E,Y,Ce,ze){for(var gt=f.context,Gt=gt.gl,sr=p.paint.get("fill-extrusion-pattern"),Mr=sr.constantOr(1),Or=p.getCrossfadeParameters(),Br=p.paint.get("fill-extrusion-opacity"),yn=0,hn=E;yn<hn.length;yn+=1){var kn=hn[yn],an=m.getTile(kn),Rn=an.getBucket(p);if(Rn){var $n=Rn.programConfigurations.get(p.id),di=f.useProgram(Mr?"fillExtrusionPattern":"fillExtrusion",$n);Mr&&(f.context.activeTexture.set(Gt.TEXTURE0),an.imageAtlasTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),$n.updatePaintBuffers(Or));var Di=sr.constantOr(null);if(Di&&an.imageAtlas){var Ti=an.imageAtlas,Fi=Ti.patternPositions[Di.to.toString()],ra=Ti.patternPositions[Di.from.toString()];Fi&&ra&&$n.setConstantPatternPositions(Fi,ra)}var Da=f.translatePosMatrix(kn.posMatrix,an,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Na=p.paint.get("fill-extrusion-vertical-gradient"),po=Mr?Ws(Da,f,Na,Br,kn,Or,an):gs(Da,f,Na,Br);di.draw(gt,gt.gl.TRIANGLES,Y,Ce,ze,Qr.backCCW,po,p.id,Rn.layoutVertexBuffer,Rn.indexBuffer,Rn.segments,p.paint,f.transform.zoom,$n)}}}function su(f,m,p,E,Y,Ce){var ze=f.context,gt=ze.gl,Gt=m.fbo;if(Gt){var sr=f.useProgram("hillshade");ze.activeTexture.set(gt.TEXTURE0),gt.bindTexture(gt.TEXTURE_2D,Gt.colorAttachment.get());var Mr=function(Or,Br,yn){var hn=yn.paint.get("hillshade-shadow-color"),kn=yn.paint.get("hillshade-highlight-color"),an=yn.paint.get("hillshade-accent-color"),Rn=yn.paint.get("hillshade-illumination-direction")*(Math.PI/180);yn.paint.get("hillshade-illumination-anchor")==="viewport"&&(Rn-=Or.transform.angle);var $n,di,Di,Ti=!Or.options.moving;return{u_matrix:Or.transform.calculatePosMatrix(Br.tileID.toUnwrapped(),Ti),u_image:0,u_latrange:($n=Br.tileID,di=Math.pow(2,$n.canonical.z),Di=$n.canonical.y,[new c.MercatorCoordinate(0,Di/di).toLngLat().lat,new c.MercatorCoordinate(0,(Di+1)/di).toLngLat().lat]),u_light:[yn.paint.get("hillshade-exaggeration"),Rn],u_shadow:hn,u_highlight:kn,u_accent:an}}(f,m,p);sr.draw(ze,gt.TRIANGLES,E,Y,Ce,Qr.disabled,Mr,p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}}function Fc(f,m,p,E,Y,Ce){var ze=f.context,gt=ze.gl,Gt=m.dem;if(Gt&&Gt.data){var sr=Gt.dim,Mr=Gt.stride,Or=Gt.getPixels();if(ze.activeTexture.set(gt.TEXTURE1),ze.pixelStoreUnpackPremultiplyAlpha.set(!1),m.demTexture=m.demTexture||f.getTileTexture(Mr),m.demTexture){var Br=m.demTexture;Br.update(Or,{premultiply:!1}),Br.bind(gt.NEAREST,gt.CLAMP_TO_EDGE)}else m.demTexture=new c.Texture(ze,Or,gt.RGBA,{premultiply:!1}),m.demTexture.bind(gt.NEAREST,gt.CLAMP_TO_EDGE);ze.activeTexture.set(gt.TEXTURE0);var yn=m.fbo;if(!yn){var hn=new c.Texture(ze,{width:sr,height:sr,data:null},gt.RGBA);hn.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),(yn=m.fbo=ze.createFramebuffer(sr,sr,!0)).colorAttachment.set(hn.texture)}ze.bindFramebuffer.set(yn.framebuffer),ze.viewport.set([0,0,sr,sr]),f.useProgram("hillshadePrepare").draw(ze,gt.TRIANGLES,E,Y,Ce,Qr.disabled,function(kn,an){var Rn=an.stride,$n=c.create();return c.ortho($n,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate($n,$n,[0,-c.EXTENT,0]),{u_matrix:$n,u_image:1,u_dimension:[Rn,Rn],u_zoom:kn.overscaledZ,u_unpack:an.getUnpackVector()}}(m.tileID,Gt),p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),m.needsHillshadePrepare=!1}}function tc(f,m,p,E,Y){var Ce=E.paint.get("raster-fade-duration");if(Ce>0){var ze=c.browser.now(),gt=(ze-f.timeAdded)/Ce,Gt=m?(ze-m.timeAdded)/Ce:-1,sr=p.getSource(),Mr=Y.coveringZoomLevel({tileSize:sr.tileSize,roundZoom:sr.roundZoom}),Or=!m||Math.abs(m.tileID.overscaledZ-Mr)>Math.abs(f.tileID.overscaledZ-Mr),Br=Or&&f.refreshedUponExpiration?1:c.clamp(Or?gt:1-Gt,0,1);return f.refreshedUponExpiration&&gt>=1&&(f.refreshedUponExpiration=!1),m?{opacity:1,mix:1-Br}:{opacity:Br,mix:0}}return{opacity:1,mix:0}}var Tf=new c.Color(1,0,0,1),_c=new c.Color(0,1,0,1),Hl=new c.Color(0,0,1,1),ff=new c.Color(1,0,1,1),xc=new c.Color(0,1,1,1);function Yh(f,m,p,E){Gc(f,0,m+p/2,f.transform.width,p,E)}function Uh(f,m,p,E){Gc(f,m-p/2,0,p,f.transform.height,E)}function Gc(f,m,p,E,Y,Ce){var ze=f.context,gt=ze.gl;gt.enable(gt.SCISSOR_TEST),gt.scissor(m*c.browser.devicePixelRatio,p*c.browser.devicePixelRatio,E*c.browser.devicePixelRatio,Y*c.browser.devicePixelRatio),ze.clear({color:Ce}),gt.disable(gt.SCISSOR_TEST)}function Mf(f,m,p){var E=f.context,Y=E.gl,Ce=p.posMatrix,ze=f.useProgram("debug"),gt=dr.disabled,Gt=_r.disabled,sr=f.colorModeForRenderPass();E.activeTexture.set(Y.TEXTURE0),f.emptyTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),ze.draw(E,Y.LINE_STRIP,gt,Gt,sr,Qr.disabled,lc(Ce,c.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);var Mr=m.getTileByID(p.key).latestRawTileData,Or=Math.floor((Mr&&Mr.byteLength||0)/1024),Br=m.getTile(p).tileSize,yn=512/Math.min(Br,512)*(p.overscaledZ/f.transform.zoom)*.5,hn=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(hn+=" => "+p.overscaledZ),function(kn,an){kn.initDebugOverlayCanvas();var Rn=kn.debugOverlayCanvas,$n=kn.context.gl,di=kn.debugOverlayCanvas.getContext("2d");di.clearRect(0,0,Rn.width,Rn.height),di.shadowColor="white",di.shadowBlur=2,di.lineWidth=1.5,di.strokeStyle="white",di.textBaseline="top",di.font="bold 36px Open Sans, sans-serif",di.fillText(an,5,5),di.strokeText(an,5,5),kn.debugOverlayTexture.update(Rn),kn.debugOverlayTexture.bind($n.LINEAR,$n.CLAMP_TO_EDGE)}(f,hn+" "+Or+"kb"),ze.draw(E,Y.TRIANGLES,gt,Gt,Hr.alphaBlended,Qr.disabled,lc(Ce,c.Color.transparent,yn),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}var nh={symbol:function(f,m,p,E,Y){if(f.renderPass==="translucent"){var Ce=_r.disabled,ze=f.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(gt,Gt,sr,Mr,Or,Br,yn){for(var hn=Gt.transform,kn=Or==="map",an=Br==="map",Rn=0,$n=gt;Rn<$n.length;Rn+=1){var di=$n[Rn],Di=Mr.getTile(di),Ti=Di.getBucket(sr);if(Ti&&Ti.text&&Ti.text.segments.get().length){var Fi=c.evaluateSizeForZoom(Ti.textSizeData,hn.zoom),ra=Go(Di,1,Gt.transform.zoom),Da=wa(di.posMatrix,an,kn,Gt.transform,ra),Na=sr.layout.get("icon-text-fit")!=="none"&&Ti.hasIconData();if(Fi){var po=Math.pow(2,hn.zoom-Di.tileID.overscaledZ);rh(Ti,kn,an,yn,c.symbolSize,hn,Da,di.posMatrix,po,Fi,Na)}}}}(E,f,p,m,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),Y),p.paint.get("icon-opacity").constantOr(1)!==0&&Yo(f,m,p,E,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),Ce,ze),p.paint.get("text-opacity").constantOr(1)!==0&&Yo(f,m,p,E,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),Ce,ze),m.map.showCollisionBoxes&&(Zl(f,m,p,E,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Zl(f,m,p,E,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))}},circle:function(f,m,p,E){if(f.renderPass==="translucent"){var Y=p.paint.get("circle-opacity"),Ce=p.paint.get("circle-stroke-width"),ze=p.paint.get("circle-stroke-opacity"),gt=p.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Y.constantOr(1)!==0||Ce.constantOr(1)!==0&&ze.constantOr(1)!==0){for(var Gt=f.context,sr=Gt.gl,Mr=f.depthModeForSublayer(0,dr.ReadOnly),Or=_r.disabled,Br=f.colorModeForRenderPass(),yn=[],hn=0;hn<E.length;hn++){var kn=E[hn],an=m.getTile(kn),Rn=an.getBucket(p);if(Rn){var $n=Rn.programConfigurations.get(p.id),di={programConfiguration:$n,program:f.useProgram("circle",$n),layoutVertexBuffer:Rn.layoutVertexBuffer,indexBuffer:Rn.indexBuffer,uniformValues:jf(f,kn,an,p)};if(gt)for(var Di=0,Ti=Rn.segments.get();Di<Ti.length;Di+=1){var Fi=Ti[Di];yn.push({segments:new c.SegmentVector([Fi]),sortKey:Fi.sortKey,state:di})}else yn.push({segments:Rn.segments,sortKey:0,state:di})}}gt&&yn.sort(function(No,is){return No.sortKey-is.sortKey});for(var ra=0,Da=yn;ra<Da.length;ra+=1){var Na=Da[ra],po=Na.state;po.program.draw(Gt,sr.TRIANGLES,Mr,Or,Br,Qr.disabled,po.uniformValues,p.id,po.layoutVertexBuffer,po.indexBuffer,Na.segments,p.paint,f.transform.zoom,po.programConfiguration)}}}},heatmap:function(f,m,p,E){if(p.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){var Y=f.context,Ce=Y.gl,ze=_r.disabled,gt=new Hr([Ce.ONE,Ce.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(yn,hn,kn){var an=yn.gl;yn.activeTexture.set(an.TEXTURE1),yn.viewport.set([0,0,hn.width/4,hn.height/4]);var Rn=kn.heatmapFbo;if(Rn)an.bindTexture(an.TEXTURE_2D,Rn.colorAttachment.get()),yn.bindFramebuffer.set(Rn.framebuffer);else{var $n=an.createTexture();an.bindTexture(an.TEXTURE_2D,$n),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_WRAP_S,an.CLAMP_TO_EDGE),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_WRAP_T,an.CLAMP_TO_EDGE),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_MIN_FILTER,an.LINEAR),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_MAG_FILTER,an.LINEAR),Rn=kn.heatmapFbo=yn.createFramebuffer(hn.width/4,hn.height/4,!1),function(di,Di,Ti,Fi){var ra=di.gl;ra.texImage2D(ra.TEXTURE_2D,0,ra.RGBA,Di.width/4,Di.height/4,0,ra.RGBA,di.extRenderToTextureHalfFloat?di.extTextureHalfFloat.HALF_FLOAT_OES:ra.UNSIGNED_BYTE,null),Fi.colorAttachment.set(Ti)}(yn,hn,$n,Rn)}})(Y,f,p),Y.clear({color:c.Color.transparent});for(var Gt=0;Gt<E.length;Gt++){var sr=E[Gt];if(!m.hasRenderableParent(sr)){var Mr=m.getTile(sr),Or=Mr.getBucket(p);if(Or){var Br=Or.programConfigurations.get(p.id);f.useProgram("heatmap",Br).draw(Y,Ce.TRIANGLES,dr.disabled,ze,gt,Qr.disabled,dh(sr.posMatrix,Mr,f.transform.zoom,p.paint.get("heatmap-intensity")),p.id,Or.layoutVertexBuffer,Or.indexBuffer,Or.segments,p.paint,f.transform.zoom,Br)}}}Y.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(yn,hn){var kn=yn.context,an=kn.gl,Rn=hn.heatmapFbo;if(Rn){kn.activeTexture.set(an.TEXTURE0),an.bindTexture(an.TEXTURE_2D,Rn.colorAttachment.get()),kn.activeTexture.set(an.TEXTURE1);var $n=hn.colorRampTexture;$n||($n=hn.colorRampTexture=new c.Texture(kn,hn.colorRamp,an.RGBA)),$n.bind(an.LINEAR,an.CLAMP_TO_EDGE),yn.useProgram("heatmapTexture").draw(kn,an.TRIANGLES,dr.disabled,_r.disabled,yn.colorModeForRenderPass(),Qr.disabled,function(di,Di,Ti,Fi){var ra=c.create();c.ortho(ra,0,di.width,di.height,0,0,1);var Da=di.context.gl;return{u_matrix:ra,u_world:[Da.drawingBufferWidth,Da.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Di.paint.get("heatmap-opacity")}}(yn,hn),hn.id,yn.viewportBuffer,yn.quadTriangleIndexBuffer,yn.viewportSegments,hn.paint,yn.transform.zoom)}}(f,p))},line:function(f,m,p,E){if(f.renderPass==="translucent"){var Y=p.paint.get("line-opacity"),Ce=p.paint.get("line-width");if(Y.constantOr(1)!==0&&Ce.constantOr(1)!==0)for(var ze=f.depthModeForSublayer(0,dr.ReadOnly),gt=f.colorModeForRenderPass(),Gt=p.paint.get("line-dasharray"),sr=p.paint.get("line-pattern"),Mr=sr.constantOr(1),Or=p.paint.get("line-gradient"),Br=p.getCrossfadeParameters(),yn=Mr?"linePattern":Gt?"lineSDF":Or?"lineGradient":"line",hn=f.context,kn=hn.gl,an=!0,Rn=0,$n=E;Rn<$n.length;Rn+=1){var di=$n[Rn],Di=m.getTile(di);if(!Mr||Di.patternsLoaded()){var Ti=Di.getBucket(p);if(Ti){var Fi=Ti.programConfigurations.get(p.id),ra=f.context.program.get(),Da=f.useProgram(yn,Fi),Na=an||Da.program!==ra,po=sr.constantOr(null);if(po&&Di.imageAtlas){var No=Di.imageAtlas,is=No.patternPositions[po.to.toString()],rs=No.patternPositions[po.from.toString()];is&&rs&&Fi.setConstantPatternPositions(is,rs)}var Ls=Mr?th(f,Di,p,Br):Gt?Df(f,Di,p,Gt,Br):Or?Us(f,Di,p,Ti.lineClipsArray.length):_l(f,Di,p);if(Mr)hn.activeTexture.set(kn.TEXTURE0),Di.imageAtlasTexture.bind(kn.LINEAR,kn.CLAMP_TO_EDGE),Fi.updatePaintBuffers(Br);else if(Gt&&(Na||f.lineAtlas.dirty))hn.activeTexture.set(kn.TEXTURE0),f.lineAtlas.bind(hn);else if(Or){var vo=Ti.gradients[p.id],ds=vo.texture;if(p.gradientVersion!==vo.version){var Ns=256;if(p.stepInterpolant){var cs=m.getSource().maxzoom,Qo=di.canonical.z===cs?Math.ceil(1<<f.transform.maxZoom-di.canonical.z):1;Ns=c.clamp(c.nextPowerOfTwo(Ti.maxLineLength/c.EXTENT*1024*Qo),256,hn.maxTextureSize)}vo.gradient=c.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:Ns,image:vo.gradient||void 0,clips:Ti.lineClipsArray}),vo.texture?vo.texture.update(vo.gradient):vo.texture=new c.Texture(hn,vo.gradient,kn.RGBA),vo.version=p.gradientVersion,ds=vo.texture}hn.activeTexture.set(kn.TEXTURE0),ds.bind(p.stepInterpolant?kn.NEAREST:kn.LINEAR,kn.CLAMP_TO_EDGE)}Da.draw(hn,kn.TRIANGLES,ze,f.stencilModeForClipping(di),gt,Qr.disabled,Ls,p.id,Ti.layoutVertexBuffer,Ti.indexBuffer,Ti.segments,p.paint,f.transform.zoom,Fi,Ti.layoutVertexBuffer2),an=!1}}}}},fill:function(f,m,p,E){var Y=p.paint.get("fill-color"),Ce=p.paint.get("fill-opacity");if(Ce.constantOr(1)!==0){var ze=f.colorModeForRenderPass(),gt=p.paint.get("fill-pattern"),Gt=f.opaquePassEnabledForLayer()&&!gt.constantOr(1)&&Y.constantOr(c.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===Gt){var sr=f.depthModeForSublayer(1,f.renderPass==="opaque"?dr.ReadWrite:dr.ReadOnly);Kl(f,m,p,E,sr,ze,!1)}if(f.renderPass==="translucent"&&p.paint.get("fill-antialias")){var Mr=f.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,dr.ReadOnly);Kl(f,m,p,E,Mr,ze,!0)}}},"fill-extrusion":function(f,m,p,E){var Y=p.paint.get("fill-extrusion-opacity");if(Y!==0&&f.renderPass==="translucent"){var Ce=new dr(f.context.gl.LEQUAL,dr.ReadWrite,f.depthRangeFor3D);if(Y!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))dl(f,m,p,E,Ce,_r.disabled,Hr.disabled),dl(f,m,p,E,Ce,f.stencilModeFor3D(),f.colorModeForRenderPass());else{var ze=f.colorModeForRenderPass();dl(f,m,p,E,Ce,_r.disabled,ze)}}},hillshade:function(f,m,p,E){if(f.renderPass==="offscreen"||f.renderPass==="translucent"){for(var Y=f.context,Ce=f.depthModeForSublayer(0,dr.ReadOnly),ze=f.colorModeForRenderPass(),gt=f.renderPass==="translucent"?f.stencilConfigForOverlap(E):[{},E],Gt=gt[0],sr=0,Mr=gt[1];sr<Mr.length;sr+=1){var Or=Mr[sr],Br=m.getTile(Or);Br.needsHillshadePrepare&&f.renderPass==="offscreen"?Fc(f,Br,p,Ce,_r.disabled,ze):f.renderPass==="translucent"&&su(f,Br,p,Ce,Gt[Or.overscaledZ],ze)}Y.viewport.set([0,0,f.width,f.height])}},raster:function(f,m,p,E){if(f.renderPass==="translucent"&&p.paint.get("raster-opacity")!==0&&E.length)for(var Y=f.context,Ce=Y.gl,ze=m.getSource(),gt=f.useProgram("raster"),Gt=f.colorModeForRenderPass(),sr=ze instanceof Ne?[{},E]:f.stencilConfigForOverlap(E),Mr=sr[0],Or=sr[1],Br=Or[Or.length-1].overscaledZ,yn=!f.options.moving,hn=0,kn=Or;hn<kn.length;hn+=1){var an=kn[hn],Rn=f.depthModeForSublayer(an.overscaledZ-Br,p.paint.get("raster-opacity")===1?dr.ReadWrite:dr.ReadOnly,Ce.LESS),$n=m.getTile(an),di=f.transform.calculatePosMatrix(an.toUnwrapped(),yn);$n.registerFadeDuration(p.paint.get("raster-fade-duration"));var Di=m.findLoadedParent(an,0),Ti=tc($n,Di,m,p,f.transform),Fi=void 0,ra=void 0,Da=p.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;Y.activeTexture.set(Ce.TEXTURE0),$n.texture.bind(Da,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(Ce.TEXTURE1),Di?(Di.texture.bind(Da,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Fi=Math.pow(2,Di.tileID.overscaledZ-$n.tileID.overscaledZ),ra=[$n.tileID.canonical.x*Fi%1,$n.tileID.canonical.y*Fi%1]):$n.texture.bind(Da,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var Na=gd(di,ra||[0,0],Fi||1,Ti,p);ze instanceof Ne?gt.draw(Y,Ce.TRIANGLES,Rn,_r.disabled,Gt,Qr.disabled,Na,p.id,ze.boundsBuffer,f.quadTriangleIndexBuffer,ze.boundsSegments):gt.draw(Y,Ce.TRIANGLES,Rn,Mr[an.overscaledZ],Gt,Qr.disabled,Na,p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,m,p){var E=p.paint.get("background-color"),Y=p.paint.get("background-opacity");if(Y!==0){var Ce=f.context,ze=Ce.gl,gt=f.transform,Gt=gt.tileSize,sr=p.paint.get("background-pattern");if(!f.isPatternMissing(sr)){var Mr=!sr&&E.a===1&&Y===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass===Mr){var Or=_r.disabled,Br=f.depthModeForSublayer(0,Mr==="opaque"?dr.ReadWrite:dr.ReadOnly),yn=f.colorModeForRenderPass(),hn=f.useProgram(sr?"backgroundPattern":"background"),kn=gt.coveringTiles({tileSize:Gt});sr&&(Ce.activeTexture.set(ze.TEXTURE0),f.imageManager.bind(f.context));for(var an=p.getCrossfadeParameters(),Rn=0,$n=kn;Rn<$n.length;Rn+=1){var di=$n[Rn],Di=f.transform.calculatePosMatrix(di.toUnwrapped()),Ti=sr?kc(Di,Y,f,sr,{tileID:di,tileSize:Gt},an):_f(Di,Y,E);hn.draw(Ce,ze.TRIANGLES,Br,Or,yn,Qr.disabled,Ti,p.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}}}},debug:function(f,m,p){for(var E=0;E<p.length;E++)Mf(f,m,p[E])},custom:function(f,m,p){var E=f.context,Y=p.implementation;if(f.renderPass==="offscreen"){var Ce=Y.prerender;Ce&&(f.setCustomLayerDefaults(),E.setColorMode(f.colorModeForRenderPass()),Ce.call(Y,E.gl,f.transform.customLayerMatrix()),E.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),E.setColorMode(f.colorModeForRenderPass()),E.setStencilMode(_r.disabled);var ze=Y.renderingMode==="3d"?new dr(f.context.gl.LEQUAL,dr.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,dr.ReadOnly);E.setDepthMode(ze),Y.render(E.gl,f.transform.customLayerMatrix()),E.setDirty(),f.setBaseState(),E.bindFramebuffer.set(null)}}},qn=function(f,m){this.context=new fr(f),this.transform=m,this._tileTextures={},this.setup(),this.numSublayers=tt.maxUnderzooming+tt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fn,this.gpuTimers={}};qn.prototype.resize=function(f,m){if(this.width=f*c.browser.devicePixelRatio,this.height=m*c.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var p=0,E=this.style._order;p<E.length;p+=1)this.style._layers[E[p]].resize()},qn.prototype.setup=function(){var f=this.context,m=new c.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(c.EXTENT,0),m.emplaceBack(0,c.EXTENT),m.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(m,Pr.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);var p=new c.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(c.EXTENT,0),p.emplaceBack(0,c.EXTENT),p.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=f.createVertexBuffer(p,Pr.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);var E=new c.StructArrayLayout4i8;E.emplaceBack(0,0,0,0),E.emplaceBack(c.EXTENT,0,c.EXTENT,0),E.emplaceBack(0,c.EXTENT,0,c.EXTENT),E.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(E,xe.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);var Y=new c.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(1,0),Y.emplaceBack(0,1),Y.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(Y,Pr.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);var Ce=new c.StructArrayLayout1ui2;Ce.emplaceBack(0),Ce.emplaceBack(1),Ce.emplaceBack(3),Ce.emplaceBack(2),Ce.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(Ce);var ze=new c.StructArrayLayout3ui6;ze.emplaceBack(0,1,2),ze.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(ze),this.emptyTexture=new c.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA);var gt=this.context.gl;this.stencilClearMode=new _r({func:gt.ALWAYS,mask:0},0,255,gt.ZERO,gt.ZERO,gt.ZERO)},qn.prototype.clearStencil=function(){var f=this.context,m=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var p=c.create();c.ortho(p,0,this.width,this.height,0,0,1),c.scale(p,p,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,m.TRIANGLES,dr.disabled,this.stencilClearMode,Hr.disabled,Qr.disabled,Lc(p),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qn.prototype._renderTileClippingMasks=function(f,m){if(this.currentStencilSource!==f.source&&f.isTileClipped()&&m&&m.length){this.currentStencilSource=f.source;var p=this.context,E=p.gl;this.nextStencilID+m.length>256&&this.clearStencil(),p.setColorMode(Hr.disabled),p.setDepthMode(dr.disabled);var Y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ce=0,ze=m;Ce<ze.length;Ce+=1){var gt=ze[Ce],Gt=this._tileClippingMaskIDs[gt.key]=this.nextStencilID++;Y.draw(p,E.TRIANGLES,dr.disabled,new _r({func:E.ALWAYS,mask:0},Gt,255,E.KEEP,E.KEEP,E.REPLACE),Hr.disabled,Qr.disabled,Lc(gt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var f=this.nextStencilID++,m=this.context.gl;return new _r({func:m.NOTEQUAL,mask:255},f,255,m.KEEP,m.KEEP,m.REPLACE)},qn.prototype.stencilModeForClipping=function(f){var m=this.context.gl;return new _r({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,m.KEEP,m.KEEP,m.REPLACE)},qn.prototype.stencilConfigForOverlap=function(f){var m,p=this.context.gl,E=f.sort(function(Gt,sr){return sr.overscaledZ-Gt.overscaledZ}),Y=E[E.length-1].overscaledZ,Ce=E[0].overscaledZ-Y+1;if(Ce>1){this.currentStencilSource=void 0,this.nextStencilID+Ce>256&&this.clearStencil();for(var ze={},gt=0;gt<Ce;gt++)ze[gt+Y]=new _r({func:p.GEQUAL,mask:255},gt+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=Ce,[ze,E]}return[(m={},m[Y]=_r.disabled,m),E]},qn.prototype.colorModeForRenderPass=function(){var f=this.context.gl;return this._showOverdrawInspector?new Hr([f.CONSTANT_COLOR,f.ONE],new c.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hr.unblended:Hr.alphaBlended},qn.prototype.depthModeForSublayer=function(f,m,p){if(!this.opaquePassEnabledForLayer())return dr.disabled;var E=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new dr(p||this.context.gl.LEQUAL,m,[E,E])},qn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qn.prototype.render=function(f,m){var p=this;this.style=f,this.options=m,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(c.browser.now()),this.imageManager.beginFrame();var E=this.style._order,Y=this.style.sourceCaches;for(var Ce in Y){var ze=Y[Ce];ze.used&&ze.prepare(this.context)}var gt,Gt,sr={},Mr={},Or={};for(var Br in Y){var yn=Y[Br];sr[Br]=yn.getVisibleCoordinates(),Mr[Br]=sr[Br].slice().reverse(),Or[Br]=yn.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var hn=0;hn<E.length;hn++)if(this.style._layers[E[hn]].is3D()){this.opaquePassCutoff=hn;break}this.renderPass="offscreen";for(var kn=0,an=E;kn<an.length;kn+=1){var Rn=this.style._layers[an[kn]];if(Rn.hasOffscreenPass()&&!Rn.isHidden(this.transform.zoom)){var $n=Mr[Rn.source];(Rn.type==="custom"||$n.length)&&this.renderLayer(this,Y[Rn.source],Rn,$n)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){var di=this.style._layers[E[this.currentLayer]],Di=Y[di.source],Ti=sr[di.source];this._renderTileClippingMasks(di,Ti),this.renderLayer(this,Di,di,Ti)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){var Fi=this.style._layers[E[this.currentLayer]],ra=Y[Fi.source],Da=(Fi.type==="symbol"?Or:Mr)[Fi.source];this._renderTileClippingMasks(Fi,sr[Fi.source]),this.renderLayer(this,ra,Fi,Da)}this.options.showTileBoundaries&&(c.values(this.style._layers).forEach(function(Na){Na.source&&!Na.isHidden(p.transform.zoom)&&(Na.source!==(Gt&&Gt.id)&&(Gt=p.style.sourceCaches[Na.source]),(!gt||gt.getSource().maxzoom<Gt.getSource().maxzoom)&&(gt=Gt))}),gt&&nh.debug(this,gt,gt.getVisibleCoordinates())),this.options.showPadding&&function(Na){var po=Na.transform.padding;Yh(Na,Na.transform.height-(po.top||0),3,Tf),Yh(Na,po.bottom||0,3,_c),Uh(Na,po.left||0,3,Hl),Uh(Na,Na.transform.width-(po.right||0),3,ff);var No=Na.transform.centerPoint;(function(is,rs,Ls,vo){Gc(is,rs-1,Ls-10,2,20,vo),Gc(is,rs-10,Ls-1,20,2,vo)})(Na,No.x,Na.transform.height-No.y,xc)}(this),this.context.setDefault()},qn.prototype.renderLayer=function(f,m,p,E){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||E.length)&&(this.id=p.id,this.gpuTimingStart(p),nh[p.type](f,m,p,E,this.style.placement.variableOffsets),this.gpuTimingEnd())},qn.prototype.gpuTimingStart=function(f){if(this.options.gpuTiming){var m=this.context.extTimerQuery,p=this.gpuTimers[f.id];p||(p=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),p.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,p.query)}},qn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}},qn.prototype.collectGpuTimers=function(){var f=this.gpuTimers;return this.gpuTimers={},f},qn.prototype.queryGpuTimers=function(f){var m={};for(var p in f){var E=f[p],Y=this.context.extTimerQuery,Ce=Y.getQueryObjectEXT(E.query,Y.QUERY_RESULT_EXT)/1e6;Y.deleteQueryEXT(E.query),m[p]=Ce}return m},qn.prototype.translatePosMatrix=function(f,m,p,E,Y){if(!p[0]&&!p[1])return f;var Ce=Y?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(Ce){var ze=Math.sin(Ce),gt=Math.cos(Ce);p=[p[0]*gt-p[1]*ze,p[0]*ze+p[1]*gt]}var Gt=[Y?p[0]:Go(m,p[0],this.transform.zoom),Y?p[1]:Go(m,p[1],this.transform.zoom),0],sr=new Float32Array(16);return c.translate(sr,f,Gt),sr},qn.prototype.saveTileTexture=function(f){var m=this._tileTextures[f.size[0]];m?m.push(f):this._tileTextures[f.size[0]]=[f]},qn.prototype.getTileTexture=function(f){var m=this._tileTextures[f];return m&&m.length>0?m.pop():null},qn.prototype.isPatternMissing=function(f){if(!f)return!1;if(!f.from||!f.to)return!0;var m=this.imageManager.getPattern(f.from.toString()),p=this.imageManager.getPattern(f.to.toString());return!m||!p},qn.prototype.useProgram=function(f,m){this.cache=this.cache||{};var p=""+f+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[p]||(this.cache[p]=new Ao(this.context,f,Io[f],m,Ff[f],this._showOverdrawInspector)),this.cache[p]},qn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qn.prototype.setBaseState=function(){var f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)},qn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=c.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},qn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ca=function(f,m){this.points=f,this.planes=m};ca.fromInvProjectionMatrix=function(f,m,p){var E=Math.pow(2,p),Y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ze){return c.transformMat4([],ze,f)}).map(function(ze){return c.scale$1([],ze,1/ze[3]/m*E)}),Ce=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ze){var gt=c.sub([],Y[ze[0]],Y[ze[1]]),Gt=c.sub([],Y[ze[2]],Y[ze[1]]),sr=c.normalize([],c.cross([],gt,Gt)),Mr=-c.dot(sr,Y[ze[1]]);return sr.concat(Mr)});return new ca(Y,Ce)};var $i=function(f,m){this.min=f,this.max=m,this.center=c.scale$2([],c.add([],this.min,this.max),.5)};$i.prototype.quadrant=function(f){for(var m=[f%2==0,f<2],p=c.clone$2(this.min),E=c.clone$2(this.max),Y=0;Y<m.length;Y++)p[Y]=m[Y]?this.min[Y]:this.center[Y],E[Y]=m[Y]?this.center[Y]:this.max[Y];return E[2]=this.max[2],new $i(p,E)},$i.prototype.distanceX=function(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]},$i.prototype.distanceY=function(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]},$i.prototype.intersects=function(f){for(var m=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],p=!0,E=0;E<f.planes.length;E++){for(var Y=f.planes[E],Ce=0,ze=0;ze<m.length;ze++)Ce+=c.dot$1(Y,m[ze])>=0;if(Ce===0)return 0;Ce!==m.length&&(p=!1)}if(p)return 2;for(var gt=0;gt<3;gt++){for(var Gt=Number.MAX_VALUE,sr=-Number.MAX_VALUE,Mr=0;Mr<f.points.length;Mr++){var Or=f.points[Mr][gt]-this.min[gt];Gt=Math.min(Gt,Or),sr=Math.max(sr,Or)}if(sr<0||Gt>this.max[gt]-this.min[gt])return 0}return 1};var $o=function(f,m,p,E){if(f===void 0&&(f=0),m===void 0&&(m=0),p===void 0&&(p=0),E===void 0&&(E=0),isNaN(f)||f<0||isNaN(m)||m<0||isNaN(p)||p<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=m,this.left=p,this.right=E};$o.prototype.interpolate=function(f,m,p){return m.top!=null&&f.top!=null&&(this.top=c.number(f.top,m.top,p)),m.bottom!=null&&f.bottom!=null&&(this.bottom=c.number(f.bottom,m.bottom,p)),m.left!=null&&f.left!=null&&(this.left=c.number(f.left,m.left,p)),m.right!=null&&f.right!=null&&(this.right=c.number(f.right,m.right,p)),this},$o.prototype.getCenter=function(f,m){var p=c.clamp((this.left+f-this.right)/2,0,f),E=c.clamp((this.top+m-this.bottom)/2,0,m);return new c.Point(p,E)},$o.prototype.equals=function(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right},$o.prototype.clone=function(){return new $o(this.top,this.bottom,this.left,this.right)},$o.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var lo=function(f,m,p,E,Y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Y===void 0||Y,this._minZoom=f||0,this._maxZoom=m||22,this._minPitch=p==null?0:p,this._maxPitch=E==null?60:E,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $o,this._posMatrixCache={},this._alignedPosMatrixCache={}},Es={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};lo.prototype.clone=function(){var f=new lo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._calcMatrices(),f},Es.minZoom.get=function(){return this._minZoom},Es.minZoom.set=function(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))},Es.maxZoom.get=function(){return this._maxZoom},Es.maxZoom.set=function(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))},Es.minPitch.get=function(){return this._minPitch},Es.minPitch.set=function(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))},Es.maxPitch.get=function(){return this._maxPitch},Es.maxPitch.set=function(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))},Es.renderWorldCopies.get=function(){return this._renderWorldCopies},Es.renderWorldCopies.set=function(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f},Es.worldSize.get=function(){return this.tileSize*this.scale},Es.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Es.size.get=function(){return new c.Point(this.width,this.height)},Es.bearing.get=function(){return-this.angle/Math.PI*180},Es.bearing.set=function(f){var m=-c.wrap(f,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=c.create$2(),c.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Es.pitch.get=function(){return this._pitch/Math.PI*180},Es.pitch.set=function(f){var m=c.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())},Es.fov.get=function(){return this._fov/Math.PI*180},Es.fov.set=function(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())},Es.zoom.get=function(){return this._zoom},Es.zoom.set=function(f){var m=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.scale=this.zoomScale(m),this.tileZoom=Math.floor(m),this.zoomFraction=m-this.tileZoom,this._constrain(),this._calcMatrices())},Es.center.get=function(){return this._center},Es.center.set=function(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())},Es.padding.get=function(){return this._edgeInsets.toJSON()},Es.padding.set=function(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())},Es.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},lo.prototype.isPaddingEqual=function(f){return this._edgeInsets.equals(f)},lo.prototype.interpolatePadding=function(f,m,p){this._unmodified=!1,this._edgeInsets.interpolate(f,m,p),this._constrain(),this._calcMatrices()},lo.prototype.coveringZoomLevel=function(f){var m=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,m)},lo.prototype.getVisibleUnwrappedCoordinates=function(f){var m=[new c.UnwrappedTileID(0,f)];if(this._renderWorldCopies)for(var p=this.pointCoordinate(new c.Point(0,0)),E=this.pointCoordinate(new c.Point(this.width,0)),Y=this.pointCoordinate(new c.Point(this.width,this.height)),Ce=this.pointCoordinate(new c.Point(0,this.height)),ze=Math.floor(Math.min(p.x,E.x,Y.x,Ce.x)),gt=Math.floor(Math.max(p.x,E.x,Y.x,Ce.x)),Gt=ze-1;Gt<=gt+1;Gt++)Gt!==0&&m.push(new c.UnwrappedTileID(Gt,f));return m},lo.prototype.coveringTiles=function(f){var m=this.coveringZoomLevel(f),p=m;if(f.minzoom!==void 0&&m<f.minzoom)return[];f.maxzoom!==void 0&&m>f.maxzoom&&(m=f.maxzoom);var E=c.MercatorCoordinate.fromLngLat(this.center),Y=Math.pow(2,m),Ce=[Y*E.x,Y*E.y,0],ze=ca.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m),gt=f.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(gt=m);var Gt=function(Na){return{aabb:new $i([Na*Y,0,0],[(Na+1)*Y,Y,0]),zoom:0,x:0,y:0,wrap:Na,fullyVisible:!1}},sr=[],Mr=[],Or=m,Br=f.reparseOverscaled?p:m;if(this._renderWorldCopies)for(var yn=1;yn<=3;yn++)sr.push(Gt(-yn)),sr.push(Gt(yn));for(sr.push(Gt(0));sr.length>0;){var hn=sr.pop(),kn=hn.x,an=hn.y,Rn=hn.fullyVisible;if(!Rn){var $n=hn.aabb.intersects(ze);if($n===0)continue;Rn=$n===2}var di=hn.aabb.distanceX(Ce),Di=hn.aabb.distanceY(Ce),Ti=Math.max(Math.abs(di),Math.abs(Di));if(hn.zoom===Or||Ti>3+(1<<Or-hn.zoom)-2&&hn.zoom>=gt)Mr.push({tileID:new c.OverscaledTileID(hn.zoom===Or?Br:hn.zoom,hn.wrap,hn.zoom,kn,an),distanceSq:c.sqrLen([Ce[0]-.5-kn,Ce[1]-.5-an])});else for(var Fi=0;Fi<4;Fi++){var ra=(kn<<1)+Fi%2,Da=(an<<1)+(Fi>>1);sr.push({aabb:hn.aabb.quadrant(Fi),zoom:hn.zoom+1,x:ra,y:Da,wrap:hn.wrap,fullyVisible:Rn})}}return Mr.sort(function(Na,po){return Na.distanceSq-po.distanceSq}).map(function(Na){return Na.tileID})},lo.prototype.resize=function(f,m){this.width=f,this.height=m,this.pixelsToGLUnits=[2/f,-2/m],this._constrain(),this._calcMatrices()},Es.unmodified.get=function(){return this._unmodified},lo.prototype.zoomScale=function(f){return Math.pow(2,f)},lo.prototype.scaleZoom=function(f){return Math.log(f)/Math.LN2},lo.prototype.project=function(f){var m=c.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.Point(c.mercatorXfromLng(f.lng)*this.worldSize,c.mercatorYfromLat(m)*this.worldSize)},lo.prototype.unproject=function(f){return new c.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()},Es.point.get=function(){return this.project(this.center)},lo.prototype.setLocationAtPoint=function(f,m){var p=this.pointCoordinate(m),E=this.pointCoordinate(this.centerPoint),Y=this.locationCoordinate(f),Ce=new c.MercatorCoordinate(Y.x-(p.x-E.x),Y.y-(p.y-E.y));this.center=this.coordinateLocation(Ce),this._renderWorldCopies&&(this.center=this.center.wrap())},lo.prototype.locationPoint=function(f){return this.coordinatePoint(this.locationCoordinate(f))},lo.prototype.pointLocation=function(f){return this.coordinateLocation(this.pointCoordinate(f))},lo.prototype.locationCoordinate=function(f){return c.MercatorCoordinate.fromLngLat(f)},lo.prototype.coordinateLocation=function(f){return f.toLngLat()},lo.prototype.pointCoordinate=function(f){var m=[f.x,f.y,0,1],p=[f.x,f.y,1,1];c.transformMat4(m,m,this.pixelMatrixInverse),c.transformMat4(p,p,this.pixelMatrixInverse);var E=m[3],Y=p[3],Ce=m[1]/E,ze=p[1]/Y,gt=m[2]/E,Gt=p[2]/Y,sr=gt===Gt?0:(0-gt)/(Gt-gt);return new c.MercatorCoordinate(c.number(m[0]/E,p[0]/Y,sr)/this.worldSize,c.number(Ce,ze,sr)/this.worldSize)},lo.prototype.coordinatePoint=function(f){var m=[f.x*this.worldSize,f.y*this.worldSize,0,1];return c.transformMat4(m,m,this.pixelMatrix),new c.Point(m[0]/m[3],m[1]/m[3])},lo.prototype.getBounds=function(){return new c.LngLatBounds().extend(this.pointLocation(new c.Point(0,0))).extend(this.pointLocation(new c.Point(this.width,0))).extend(this.pointLocation(new c.Point(this.width,this.height))).extend(this.pointLocation(new c.Point(0,this.height)))},lo.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},lo.prototype.setMaxBounds=function(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},lo.prototype.calculatePosMatrix=function(f,m){m===void 0&&(m=!1);var p=f.key,E=m?this._alignedPosMatrixCache:this._posMatrixCache;if(E[p])return E[p];var Y=f.canonical,Ce=this.worldSize/this.zoomScale(Y.z),ze=Y.x+Math.pow(2,Y.z)*f.wrap,gt=c.identity(new Float64Array(16));return c.translate(gt,gt,[ze*Ce,Y.y*Ce,0]),c.scale(gt,gt,[Ce/c.EXTENT,Ce/c.EXTENT,1]),c.multiply(gt,m?this.alignedProjMatrix:this.projMatrix,gt),E[p]=new Float32Array(gt),E[p]},lo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},lo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var f,m,p,E,Y=-90,Ce=90,ze=-180,gt=180,Gt=this.size,sr=this._unmodified;if(this.latRange){var Mr=this.latRange;Y=c.mercatorYfromLat(Mr[1])*this.worldSize,f=(Ce=c.mercatorYfromLat(Mr[0])*this.worldSize)-Y<Gt.y?Gt.y/(Ce-Y):0}if(this.lngRange){var Or=this.lngRange;ze=c.mercatorXfromLng(Or[0])*this.worldSize,m=(gt=c.mercatorXfromLng(Or[1])*this.worldSize)-ze<Gt.x?Gt.x/(gt-ze):0}var Br=this.point,yn=Math.max(m||0,f||0);if(yn)return this.center=this.unproject(new c.Point(m?(gt+ze)/2:Br.x,f?(Ce+Y)/2:Br.y)),this.zoom+=this.scaleZoom(yn),this._unmodified=sr,void(this._constraining=!1);if(this.latRange){var hn=Br.y,kn=Gt.y/2;hn-kn<Y&&(E=Y+kn),hn+kn>Ce&&(E=Ce-kn)}if(this.lngRange){var an=Br.x,Rn=Gt.x/2;an-Rn<ze&&(p=ze+Rn),an+Rn>gt&&(p=gt-Rn)}p===void 0&&E===void 0||(this.center=this.unproject(new c.Point(p!==void 0?p:Br.x,E!==void 0?E:Br.y))),this._unmodified=sr,this._constraining=!1}},lo.prototype._calcMatrices=function(){if(this.height){var f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var m=Math.PI/2+this._pitch,p=this._fov*(.5+f.y/this.height),E=Math.sin(p)*this.cameraToCenterDistance/Math.sin(c.clamp(Math.PI-m-p,.01,Math.PI-.01)),Y=this.point,Ce=Y.x,ze=Y.y,gt=1.01*(Math.cos(Math.PI/2-this._pitch)*E+this.cameraToCenterDistance),Gt=this.height/50,sr=new Float64Array(16);c.perspective(sr,this._fov,this.width/this.height,Gt,gt),sr[8]=2*-f.x/this.width,sr[9]=2*f.y/this.height,c.scale(sr,sr,[1,-1,1]),c.translate(sr,sr,[0,0,-this.cameraToCenterDistance]),c.rotateX(sr,sr,this._pitch),c.rotateZ(sr,sr,this.angle),c.translate(sr,sr,[-Ce,-ze,0]),this.mercatorMatrix=c.scale([],sr,[this.worldSize,this.worldSize,this.worldSize]),c.scale(sr,sr,[1,1,c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=sr,this.invProjMatrix=c.invert([],this.projMatrix);var Mr=this.width%2/2,Or=this.height%2/2,Br=Math.cos(this.angle),yn=Math.sin(this.angle),hn=Ce-Math.round(Ce)+Br*Mr+yn*Or,kn=ze-Math.round(ze)+Br*Or+yn*Mr,an=new Float64Array(sr);if(c.translate(an,an,[hn>.5?hn-1:hn,kn>.5?kn-1:kn,0]),this.alignedProjMatrix=an,sr=c.create(),c.scale(sr,sr,[this.width/2,-this.height/2,1]),c.translate(sr,sr,[1,-1,0]),this.labelPlaneMatrix=sr,sr=c.create(),c.scale(sr,sr,[1,-1,1]),c.translate(sr,sr,[-1,-1,0]),c.scale(sr,sr,[2/this.width,2/this.height,1]),this.glCoordMatrix=sr,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(sr=c.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=sr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},lo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var f=this.pointCoordinate(new c.Point(0,0)),m=[f.x*this.worldSize,f.y*this.worldSize,0,1];return c.transformMat4(m,m,this.pixelMatrix)[3]/this.cameraToCenterDistance},lo.prototype.getCameraPoint=function(){var f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.Point(0,f))},lo.prototype.getCameraQueryGeometry=function(f){var m=this.getCameraPoint();if(f.length===1)return[f[0],m];for(var p=m.x,E=m.y,Y=m.x,Ce=m.y,ze=0,gt=f;ze<gt.length;ze+=1){var Gt=gt[ze];p=Math.min(p,Gt.x),E=Math.min(E,Gt.y),Y=Math.max(Y,Gt.x),Ce=Math.max(Ce,Gt.y)}return[new c.Point(p,E),new c.Point(Y,E),new c.Point(Y,Ce),new c.Point(p,Ce),new c.Point(p,E)]},Object.defineProperties(lo.prototype,Es);var tl=function(f){var m,p,E,Y;this._hashName=f&&encodeURIComponent(f),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(m=this._updateHashUnthrottled.bind(this),p=!1,E=null,Y=function(){E=null,p&&(m(),E=setTimeout(Y,300),p=!1)},function(){return p=!0,E||Y(),E})};tl.prototype.addTo=function(f){return this._map=f,c.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},tl.prototype.remove=function(){return c.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},tl.prototype.getHashString=function(f){var m=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,E=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),Y=Math.pow(10,E),Ce=Math.round(m.lng*Y)/Y,ze=Math.round(m.lat*Y)/Y,gt=this._map.getBearing(),Gt=this._map.getPitch(),sr="";if(sr+=f?"/"+Ce+"/"+ze+"/"+p:p+"/"+ze+"/"+Ce,(gt||Gt)&&(sr+="/"+Math.round(10*gt)/10),Gt&&(sr+="/"+Math.round(Gt)),this._hashName){var Mr=this._hashName,Or=!1,Br=c.window.location.hash.slice(1).split("&").map(function(yn){var hn=yn.split("=")[0];return hn===Mr?(Or=!0,hn+"="+sr):yn}).filter(function(yn){return yn});return Or||Br.push(Mr+"="+sr),"#"+Br.join("&")}return"#"+sr},tl.prototype._getCurrentHash=function(){var f,m=this,p=c.window.location.hash.replace("#","");return this._hashName?(p.split("&").map(function(E){return E.split("=")}).forEach(function(E){E[0]===m._hashName&&(f=E)}),(f&&f[1]||"").split("/")):p.split("/")},tl.prototype._onHashChange=function(){var f=this._getCurrentHash();if(f.length>=3&&!f.some(function(p){return isNaN(p)})){var m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:m,pitch:+(f[4]||0)}),!0}return!1},tl.prototype._updateHashUnthrottled=function(){var f=c.window.location.href.replace(/(#.+)?$/,this.getHashString());try{c.window.history.replaceState(c.window.history.state,null,f)}catch(m){}};var al={linearity:.3,easing:c.bezier(0,0,.3,1)},Tl=c.extend({deceleration:2500,maxSpeed:1400},al),Lh=c.extend({deceleration:20,maxSpeed:1400},al),xf=c.extend({deceleration:1e3,maxSpeed:360},al),qh=c.extend({deceleration:1e3,maxSpeed:90},al),$h=function(f){this._map=f,this.clear()};function Ul(f,m){(!f.duration||f.duration<m.duration)&&(f.duration=m.duration,f.easing=m.easing)}function Rl(f,m,p){var E=p.maxSpeed,Y=p.linearity,Ce=p.deceleration,ze=c.clamp(f*Y/(m/1e3),-E,E),gt=Math.abs(ze)/(Ce*Y);return{easing:p.easing,duration:1e3*gt,amount:ze*(gt/2)}}$h.prototype.clear=function(){this._inertiaBuffer=[]},$h.prototype.record=function(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.browser.now(),settings:f})},$h.prototype._drainInertiaBuffer=function(){for(var f=this._inertiaBuffer,m=c.browser.now();f.length>0&&m-f[0].time>160;)f.shift()},$h.prototype._onMoveEnd=function(f){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var m={zoom:0,bearing:0,pitch:0,pan:new c.Point(0,0),pinchAround:void 0,around:void 0},p=0,E=this._inertiaBuffer;p<E.length;p+=1){var Y=E[p].settings;m.zoom+=Y.zoomDelta||0,m.bearing+=Y.bearingDelta||0,m.pitch+=Y.pitchDelta||0,Y.panDelta&&m.pan._add(Y.panDelta),Y.around&&(m.around=Y.around),Y.pinchAround&&(m.pinchAround=Y.pinchAround)}var Ce=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ze={};if(m.pan.mag()){var gt=Rl(m.pan.mag(),Ce,c.extend({},Tl,f||{}));ze.offset=m.pan.mult(gt.amount/m.pan.mag()),ze.center=this._map.transform.center,Ul(ze,gt)}if(m.zoom){var Gt=Rl(m.zoom,Ce,Lh);ze.zoom=this._map.transform.zoom+Gt.amount,Ul(ze,Gt)}if(m.bearing){var sr=Rl(m.bearing,Ce,xf);ze.bearing=this._map.transform.bearing+c.clamp(sr.amount,-179,179),Ul(ze,sr)}if(m.pitch){var Mr=Rl(m.pitch,Ce,qh);ze.pitch=this._map.transform.pitch+Mr.amount,Ul(ze,Mr)}if(ze.zoom||ze.bearing){var Or=m.pinchAround===void 0?m.around:m.pinchAround;ze.around=Or?this._map.unproject(Or):this._map.getCenter()}return this.clear(),c.extend(ze,{noMoveStart:!0})}};var ol=function(f){function m(E,Y,Ce,ze){ze===void 0&&(ze={});var gt=N.mousePos(Y.getCanvasContainer(),Ce),Gt=Y.unproject(gt);f.call(this,E,c.extend({point:gt,lngLat:Gt,originalEvent:Ce},ze)),this._defaultPrevented=!1,this.target=Y}f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m;var p={defaultPrevented:{configurable:!0}};return m.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(m.prototype,p),m}(c.Event),uu=function(f){function m(E,Y,Ce){var ze=E==="touchend"?Ce.changedTouches:Ce.touches,gt=N.touchPos(Y.getCanvasContainer(),ze),Gt=gt.map(function(Or){return Y.unproject(Or)}),sr=gt.reduce(function(Or,Br,yn,hn){return Or.add(Br.div(hn.length))},new c.Point(0,0)),Mr=Y.unproject(sr);f.call(this,E,{points:gt,point:sr,lngLats:Gt,lngLat:Mr,originalEvent:Ce}),this._defaultPrevented=!1}f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m;var p={defaultPrevented:{configurable:!0}};return m.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(m.prototype,p),m}(c.Event),Bc=function(f){function m(E,Y,Ce){f.call(this,E,{originalEvent:Ce}),this._defaultPrevented=!1}f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m;var p={defaultPrevented:{configurable:!0}};return m.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(m.prototype,p),m}(c.Event),cc=function(f,m){this._map=f,this._clickTolerance=m.clickTolerance};cc.prototype.reset=function(){delete this._mousedownPos},cc.prototype.wheel=function(f){return this._firePreventable(new Bc(f.type,this._map,f))},cc.prototype.mousedown=function(f,m){return this._mousedownPos=m,this._firePreventable(new ol(f.type,this._map,f))},cc.prototype.mouseup=function(f){this._map.fire(new ol(f.type,this._map,f))},cc.prototype.click=function(f,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new ol(f.type,this._map,f))},cc.prototype.dblclick=function(f){return this._firePreventable(new ol(f.type,this._map,f))},cc.prototype.mouseover=function(f){this._map.fire(new ol(f.type,this._map,f))},cc.prototype.mouseout=function(f){this._map.fire(new ol(f.type,this._map,f))},cc.prototype.touchstart=function(f){return this._firePreventable(new uu(f.type,this._map,f))},cc.prototype.touchmove=function(f){this._map.fire(new uu(f.type,this._map,f))},cc.prototype.touchend=function(f){this._map.fire(new uu(f.type,this._map,f))},cc.prototype.touchcancel=function(f){this._map.fire(new uu(f.type,this._map,f))},cc.prototype._firePreventable=function(f){if(this._map.fire(f),f.defaultPrevented)return{}},cc.prototype.isEnabled=function(){return!0},cc.prototype.isActive=function(){return!1},cc.prototype.enable=function(){},cc.prototype.disable=function(){};var ao=function(f){this._map=f};ao.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ao.prototype.mousemove=function(f){this._map.fire(new ol(f.type,this._map,f))},ao.prototype.mousedown=function(){this._delayContextMenu=!0},ao.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ol("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ao.prototype.contextmenu=function(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new ol(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()},ao.prototype.isEnabled=function(){return!0},ao.prototype.isActive=function(){return!1},ao.prototype.enable=function(){},ao.prototype.disable=function(){};var Ml=function(f,m){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=m.clickTolerance||1};function Hf(f,m){for(var p={},E=0;E<f.length;E++)p[f[E].identifier]=m[E];return p}Ml.prototype.isEnabled=function(){return!!this._enabled},Ml.prototype.isActive=function(){return!!this._active},Ml.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ml.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ml.prototype.mousedown=function(f,m){this.isEnabled()&&f.shiftKey&&f.button===0&&(N.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)},Ml.prototype.mousemoveWindow=function(f,m){if(this._active){var p=m;if(!(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)){var E=this._startPos;this._lastPos=p,this._box||(this._box=N.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));var Y=Math.min(E.x,p.x),Ce=Math.max(E.x,p.x),ze=Math.min(E.y,p.y),gt=Math.max(E.y,p.y);N.setTransform(this._box,"translate("+Y+"px,"+ze+"px)"),this._box.style.width=Ce-Y+"px",this._box.style.height=gt-ze+"px"}}},Ml.prototype.mouseupWindow=function(f,m){var p=this;if(this._active&&f.button===0){var E=this._startPos,Y=m;if(this.reset(),N.suppressClick(),E.x!==Y.x||E.y!==Y.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:function(Ce){return Ce.fitScreenCoordinates(E,Y,p._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",f)}},Ml.prototype.keydown=function(f){this._active&&f.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",f))},Ml.prototype.blur=function(){this.reset()},Ml.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos},Ml.prototype._fireEvent=function(f,m){return this._map.fire(new c.Event(f,{originalEvent:m}))};var fl=function(f){this.reset(),this.numTouches=f.numTouches};fl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},fl.prototype.touchstart=function(f,m,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=f.timeStamp),p.length===this.numTouches&&(this.centroid=function(E){for(var Y=new c.Point(0,0),Ce=0,ze=E;Ce<ze.length;Ce+=1)Y._add(ze[Ce]);return Y.div(E.length)}(m),this.touches=Hf(p,m)))},fl.prototype.touchmove=function(f,m,p){if(!this.aborted&&this.centroid){var E=Hf(p,m);for(var Y in this.touches){var Ce=E[Y];(!Ce||Ce.dist(this.touches[Y])>30)&&(this.aborted=!0)}}},fl.prototype.touchend=function(f,m,p){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){var E=!this.aborted&&this.centroid;if(this.reset(),E)return E}};var Vl=function(f){this.singleTap=new fl(f),this.numTaps=f.numTaps,this.reset()};Vl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Vl.prototype.touchstart=function(f,m,p){this.singleTap.touchstart(f,m,p)},Vl.prototype.touchmove=function(f,m,p){this.singleTap.touchmove(f,m,p)},Vl.prototype.touchend=function(f,m,p){var E=this.singleTap.touchend(f,m,p);if(E){var Y=f.timeStamp-this.lastTime<500,Ce=!this.lastTap||this.lastTap.dist(E)<30;if(Y&&Ce||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}};var Ll=function(){this._zoomIn=new Vl({numTouches:1,numTaps:2}),this._zoomOut=new Vl({numTouches:2,numTaps:1}),this.reset()};Ll.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ll.prototype.touchstart=function(f,m,p){this._zoomIn.touchstart(f,m,p),this._zoomOut.touchstart(f,m,p)},Ll.prototype.touchmove=function(f,m,p){this._zoomIn.touchmove(f,m,p),this._zoomOut.touchmove(f,m,p)},Ll.prototype.touchend=function(f,m,p){var E=this,Y=this._zoomIn.touchend(f,m,p),Ce=this._zoomOut.touchend(f,m,p);return Y?(this._active=!0,f.preventDefault(),setTimeout(function(){return E.reset()},0),{cameraAnimation:function(ze){return ze.easeTo({duration:300,zoom:ze.getZoom()+1,around:ze.unproject(Y)},{originalEvent:f})}}):Ce?(this._active=!0,f.preventDefault(),setTimeout(function(){return E.reset()},0),{cameraAnimation:function(ze){return ze.easeTo({duration:300,zoom:ze.getZoom()-1,around:ze.unproject(Ce)},{originalEvent:f})}}):void 0},Ll.prototype.touchcancel=function(){this.reset()},Ll.prototype.enable=function(){this._enabled=!0},Ll.prototype.disable=function(){this._enabled=!1,this.reset()},Ll.prototype.isEnabled=function(){return this._enabled},Ll.prototype.isActive=function(){return this._active};var jh={0:1,2:2},qa=function(f){this.reset(),this._clickTolerance=f.clickTolerance||1};qa.prototype.blur=function(){this.reset()},qa.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},qa.prototype._correctButton=function(f,m){return!1},qa.prototype._move=function(f,m){return{}},qa.prototype.mousedown=function(f,m){if(!this._lastPoint){var p=N.mouseButton(f);this._correctButton(f,p)&&(this._lastPoint=m,this._eventButton=p)}},qa.prototype.mousemoveWindow=function(f,m){var p=this._lastPoint;if(p){if(f.preventDefault(),function(E,Y){var Ce=jh[Y];return E.buttons===void 0||(E.buttons&Ce)!==Ce}(f,this._eventButton))this.reset();else if(this._moved||!(m.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(p,m)}},qa.prototype.mouseupWindow=function(f){this._lastPoint&&N.mouseButton(f)===this._eventButton&&(this._moved&&N.suppressClick(),this.reset())},qa.prototype.enable=function(){this._enabled=!0},qa.prototype.disable=function(){this._enabled=!1,this.reset()},qa.prototype.isEnabled=function(){return this._enabled},qa.prototype.isActive=function(){return this._active};var Yl=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.mousedown=function(p,E){f.prototype.mousedown.call(this,p,E),this._lastPoint&&(this._active=!0)},m.prototype._correctButton=function(p,E){return E===0&&!p.ctrlKey},m.prototype._move=function(p,E){return{around:E,panDelta:E.sub(p)}},m}(qa),Vf=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype._correctButton=function(p,E){return E===0&&p.ctrlKey||E===2},m.prototype._move=function(p,E){var Y=.8*(E.x-p.x);if(Y)return this._active=!0,{bearingDelta:Y}},m.prototype.contextmenu=function(p){p.preventDefault()},m}(qa),ih=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype._correctButton=function(p,E){return E===0&&p.ctrlKey||E===2},m.prototype._move=function(p,E){var Y=-.5*(E.y-p.y);if(Y)return this._active=!0,{pitchDelta:Y}},m.prototype.contextmenu=function(p){p.preventDefault()},m}(qa),Vu=function(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()};Vu.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new c.Point(0,0)},Vu.prototype.touchstart=function(f,m,p){return this._calculateTransform(f,m,p)},Vu.prototype.touchmove=function(f,m,p){if(this._active&&!(p.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,m,p)},Vu.prototype.touchend=function(f,m,p){this._calculateTransform(f,m,p),this._active&&p.length<this._minTouches&&this.reset()},Vu.prototype.touchcancel=function(){this.reset()},Vu.prototype._calculateTransform=function(f,m,p){p.length>0&&(this._active=!0);var E=Hf(p,m),Y=new c.Point(0,0),Ce=new c.Point(0,0),ze=0;for(var gt in E){var Gt=E[gt],sr=this._touches[gt];sr&&(Y._add(Gt),Ce._add(Gt.sub(sr)),ze++,E[gt]=Gt)}if(this._touches=E,!(ze<this._minTouches)&&Ce.mag()){var Mr=Ce.div(ze);if(this._sum._add(Mr),!(this._sum.mag()<this._clickTolerance))return{around:Y.div(ze),panDelta:Mr}}},Vu.prototype.enable=function(){this._enabled=!0},Vu.prototype.disable=function(){this._enabled=!1,this.reset()},Vu.prototype.isEnabled=function(){return this._enabled},Vu.prototype.isActive=function(){return this._active};var hf=function(){this.reset()};function Hh(f,m,p){for(var E=0;E<f.length;E++)if(f[E].identifier===p)return m[E]}function bc(f,m){return Math.log(f/m)/Math.LN2}hf.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},hf.prototype._start=function(f){},hf.prototype._move=function(f,m,p){return{}},hf.prototype.touchstart=function(f,m,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([m[0],m[1]]))},hf.prototype.touchmove=function(f,m,p){if(this._firstTwoTouches){f.preventDefault();var E=this._firstTwoTouches,Y=E[1],Ce=Hh(p,m,E[0]),ze=Hh(p,m,Y);if(Ce&&ze){var gt=this._aroundCenter?null:Ce.add(ze).div(2);return this._move([Ce,ze],gt,f)}}},hf.prototype.touchend=function(f,m,p){if(this._firstTwoTouches){var E=this._firstTwoTouches,Y=E[1],Ce=Hh(p,m,E[0]),ze=Hh(p,m,Y);Ce&&ze||(this._active&&N.suppressClick(),this.reset())}},hf.prototype.touchcancel=function(){this.reset()},hf.prototype.enable=function(f){this._enabled=!0,this._aroundCenter=!!f&&f.around==="center"},hf.prototype.disable=function(){this._enabled=!1,this.reset()},hf.prototype.isEnabled=function(){return this._enabled},hf.prototype.isActive=function(){return this._active};var Ec=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.reset=function(){f.prototype.reset.call(this),delete this._distance,delete this._startDistance},m.prototype._start=function(p){this._startDistance=this._distance=p[0].dist(p[1])},m.prototype._move=function(p,E){var Y=this._distance;if(this._distance=p[0].dist(p[1]),this._active||!(Math.abs(bc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bc(this._distance,Y),pinchAround:E}},m}(hf);function ah(f,m){return 180*f.angleWith(m)/Math.PI}var Wc=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.reset=function(){f.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},m.prototype._start=function(p){this._startVector=this._vector=p[0].sub(p[1]),this._minDiameter=p[0].dist(p[1])},m.prototype._move=function(p,E){var Y=this._vector;if(this._vector=p[0].sub(p[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ah(this._vector,Y),pinchAround:E}},m.prototype._isBelowThreshold=function(p){this._minDiameter=Math.min(this._minDiameter,p.mag());var E=25/(Math.PI*this._minDiameter)*360,Y=ah(p,this._startVector);return Math.abs(Y)<E},m}(hf);function kh(f){return Math.abs(f.y)>Math.abs(f.x)}var Sc=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.reset=function(){f.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},m.prototype._start=function(p){this._lastPoints=p,kh(p[0].sub(p[1]))&&(this._valid=!1)},m.prototype._move=function(p,E,Y){var Ce=p[0].sub(this._lastPoints[0]),ze=p[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ce,ze,Y.timeStamp),this._valid)return this._lastPoints=p,this._active=!0,{pitchDelta:(Ce.y+ze.y)/2*-.5}},m.prototype.gestureBeginsVertically=function(p,E,Y){if(this._valid!==void 0)return this._valid;var Ce=p.mag()>=2,ze=E.mag()>=2;if(Ce||ze){if(!Ce||!ze)return this._firstMove===void 0&&(this._firstMove=Y),Y-this._firstMove<100&&void 0;var gt=p.y>0==E.y>0;return kh(p)&&kh(E)&&gt}},m}(hf),Vh={panStep:100,bearingStep:15,pitchStep:10},ql=function(){var f=Vh;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1};function gu(f){return f*(2-f)}ql.prototype.blur=function(){this.reset()},ql.prototype.reset=function(){this._active=!1},ql.prototype.keydown=function(f){var m=this;if(!(f.altKey||f.ctrlKey||f.metaKey)){var p=0,E=0,Y=0,Ce=0,ze=0;switch(f.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:f.shiftKey?E=-1:(f.preventDefault(),Ce=-1);break;case 39:f.shiftKey?E=1:(f.preventDefault(),Ce=1);break;case 38:f.shiftKey?Y=1:(f.preventDefault(),ze=-1);break;case 40:f.shiftKey?Y=-1:(f.preventDefault(),ze=1);break;default:return}return this._rotationDisabled&&(E=0,Y=0),{cameraAnimation:function(gt){var Gt=gt.getZoom();gt.easeTo({duration:300,easeId:"keyboardHandler",easing:gu,zoom:p?Math.round(Gt)+p*(f.shiftKey?2:1):Gt,bearing:gt.getBearing()+E*m._bearingStep,pitch:gt.getPitch()+Y*m._pitchStep,offset:[-Ce*m._panStep,-ze*m._panStep],center:gt.getCenter()},{originalEvent:f})}}}},ql.prototype.enable=function(){this._enabled=!0},ql.prototype.disable=function(){this._enabled=!1,this.reset()},ql.prototype.isEnabled=function(){return this._enabled},ql.prototype.isActive=function(){return this._active},ql.prototype.disableRotation=function(){this._rotationDisabled=!0},ql.prototype.enableRotation=function(){this._rotationDisabled=!1};var Ks=function(f,m){this._map=f,this._el=f.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,c.bindAll(["_onTimeout"],this)};Ks.prototype.setZoomRate=function(f){this._defaultZoomRate=f},Ks.prototype.setWheelZoomRate=function(f){this._wheelZoomRate=f},Ks.prototype.isEnabled=function(){return!!this._enabled},Ks.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ks.prototype.isZooming=function(){return!!this._zooming},Ks.prototype.enable=function(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&f.around==="center")},Ks.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ks.prototype.wheel=function(f){if(this.isEnabled()){var m=f.deltaMode===c.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY,p=c.browser.now(),E=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,m!==0&&m%4.000244140625==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(E*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),f.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=f,this._delta-=m,this._active||this._start(f)),f.preventDefault()}},Ks.prototype._onTimeout=function(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},Ks.prototype._start=function(f){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var m=N.mousePos(this._el,f);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(m)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ks.prototype.renderFrame=function(){var f=this;if(this._frameId&&(this._frameId=null,this.isActive())){var m=this._map.transform;if(this._delta!==0){var p=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,E=2/(1+Math.exp(-Math.abs(this._delta*p)));this._delta<0&&E!==0&&(E=1/E);var Y=typeof this._targetZoom=="number"?m.zoomScale(this._targetZoom):m.scale;this._targetZoom=Math.min(m.maxZoom,Math.max(m.minZoom,m.scaleZoom(Y*E))),this._type==="wheel"&&(this._startZoom=m.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ce,ze=typeof this._targetZoom=="number"?this._targetZoom:m.zoom,gt=this._startZoom,Gt=this._easing,sr=!1;if(this._type==="wheel"&&gt&&Gt){var Mr=Math.min((c.browser.now()-this._lastWheelEventTime)/200,1),Or=Gt(Mr);Ce=c.number(gt,ze,Or),Mr<1?this._frameId||(this._frameId=!0):sr=!0}else Ce=ze,sr=!0;return this._active=!0,sr&&(this._active=!1,this._finishTimeout=setTimeout(function(){f._zooming=!1,f._handler._triggerRenderFrame(),delete f._targetZoom,delete f._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!sr,zoomDelta:Ce-m.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ks.prototype._smoothOutEasing=function(f){var m=c.ease;if(this._prevEase){var p=this._prevEase,E=(c.browser.now()-p.start)/p.duration,Y=p.easing(E+.01)-p.easing(E),Ce=.27/Math.sqrt(Y*Y+1e-4)*.01,ze=Math.sqrt(.0729-Ce*Ce);m=c.bezier(Ce,ze,.25,1)}return this._prevEase={start:c.browser.now(),duration:f,easing:m},m},Ks.prototype.blur=function(){this.reset()},Ks.prototype.reset=function(){this._active=!1};var Gf=function(f,m){this._clickZoom=f,this._tapZoom=m};Gf.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Gf.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Gf.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Gf.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Bf=function(){this.reset()};Bf.prototype.reset=function(){this._active=!1},Bf.prototype.blur=function(){this.reset()},Bf.prototype.dblclick=function(f,m){return f.preventDefault(),{cameraAnimation:function(p){p.easeTo({duration:300,zoom:p.getZoom()+(f.shiftKey?-1:1),around:p.unproject(m)},{originalEvent:f})}}},Bf.prototype.enable=function(){this._enabled=!0},Bf.prototype.disable=function(){this._enabled=!1,this.reset()},Bf.prototype.isEnabled=function(){return this._enabled},Bf.prototype.isActive=function(){return this._active};var eu=function(){this._tap=new Vl({numTouches:1,numTaps:1}),this.reset()};eu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},eu.prototype.touchstart=function(f,m,p){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=m[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(f,m,p))},eu.prototype.touchmove=function(f,m,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;var E=m[0],Y=E.y-this._swipePoint.y;return this._swipePoint=E,f.preventDefault(),this._active=!0,{zoomDelta:Y/128}}}else this._tap.touchmove(f,m,p)},eu.prototype.touchend=function(f,m,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(f,m,p)&&(this._tapTime=f.timeStamp)},eu.prototype.touchcancel=function(){this.reset()},eu.prototype.enable=function(){this._enabled=!0},eu.prototype.disable=function(){this._enabled=!1,this.reset()},eu.prototype.isEnabled=function(){return this._enabled},eu.prototype.isActive=function(){return this._active};var Pl=function(f,m,p){this._el=f,this._mousePan=m,this._touchPan=p};Pl.prototype.enable=function(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Pl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Pl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Pl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Xc=function(f,m,p){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=m,this._mousePitch=p};Xc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Xc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Xc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Xc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Nc=function(f,m,p,E){this._el=f,this._touchZoom=m,this._touchRotate=p,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0};Nc.prototype.enable=function(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Nc.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Nc.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Nc.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Nc.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Nc.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ql=function(f){return f.zoom||f.drag||f.pitch||f.rotate},fc=function(f){function m(){f.apply(this,arguments)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m}(c.Event);function oo(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}var Do=function(f,m){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $h(f),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m),c.bindAll(["handleEvent","handleWindowEvent"],this);var p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[c.window.document,"mousemove",{capture:!0}],[c.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[c.window,"blur",void 0]];for(var E=0,Y=this._listeners;E<Y.length;E+=1){var Ce=Y[E],ze=Ce[0];N.addEventListener(ze,Ce[1],ze===c.window.document?this.handleWindowEvent:this.handleEvent,Ce[2])}};Do.prototype.destroy=function(){for(var f=0,m=this._listeners;f<m.length;f+=1){var p=m[f],E=p[0];N.removeEventListener(E,p[1],E===c.window.document?this.handleWindowEvent:this.handleEvent,p[2])}},Do.prototype._addDefaultHandlers=function(f){var m=this._map,p=m.getCanvasContainer();this._add("mapEvent",new cc(m,f));var E=m.boxZoom=new Ml(m,f);this._add("boxZoom",E);var Y=new Ll,Ce=new Bf;m.doubleClickZoom=new Gf(Ce,Y),this._add("tapZoom",Y),this._add("clickZoom",Ce);var ze=new eu;this._add("tapDragZoom",ze);var gt=m.touchPitch=new Sc;this._add("touchPitch",gt);var Gt=new Vf(f),sr=new ih(f);m.dragRotate=new Xc(f,Gt,sr),this._add("mouseRotate",Gt,["mousePitch"]),this._add("mousePitch",sr,["mouseRotate"]);var Mr=new Yl(f),Or=new Vu(f);m.dragPan=new Pl(p,Mr,Or),this._add("mousePan",Mr),this._add("touchPan",Or,["touchZoom","touchRotate"]);var Br=new Wc,yn=new Ec;m.touchZoomRotate=new Nc(p,yn,Br,ze),this._add("touchRotate",Br,["touchPan","touchZoom"]),this._add("touchZoom",yn,["touchPan","touchRotate"]);var hn=m.scrollZoom=new Ks(m,this);this._add("scrollZoom",hn,["mousePan"]);var kn=m.keyboard=new ql;this._add("keyboard",kn),this._add("blockableMapEvent",new ao(m));for(var an=0,Rn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];an<Rn.length;an+=1){var $n=Rn[an];f.interactive&&f[$n]&&m[$n].enable(f[$n])}},Do.prototype._add=function(f,m,p){this._handlers.push({handlerName:f,handler:m,allowed:p}),this._handlersById[f]=m},Do.prototype.stop=function(f){if(!this._updatingCamera){for(var m=0,p=this._handlers;m<p.length;m+=1)p[m].handler.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}},Do.prototype.isActive=function(){for(var f=0,m=this._handlers;f<m.length;f+=1)if(m[f].handler.isActive())return!0;return!1},Do.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Do.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Do.prototype.isMoving=function(){return Boolean(Ql(this._eventsInProgress))||this.isZooming()},Do.prototype._blockedByActive=function(f,m,p){for(var E in f)if(E!==p&&(!m||m.indexOf(E)<0))return!0;return!1},Do.prototype.handleWindowEvent=function(f){this.handleEvent(f,f.type+"Window")},Do.prototype._getMapTouches=function(f){for(var m=[],p=0,E=f;p<E.length;p+=1){var Y=E[p];this._el.contains(Y.target)&&m.push(Y)}return m},Do.prototype.handleEvent=function(f,m){this._updatingCamera=!0;for(var p=f.type==="renderFrame"?void 0:f,E={needsRenderFrame:!1},Y={},Ce={},ze=f.touches?this._getMapTouches(f.touches):void 0,gt=ze?N.touchPos(this._el,ze):N.mousePos(this._el,f),Gt=0,sr=this._handlers;Gt<sr.length;Gt+=1){var Mr=sr[Gt],Or=Mr.handlerName,Br=Mr.handler,yn=Mr.allowed;if(Br.isEnabled()){var hn=void 0;this._blockedByActive(Ce,yn,Or)?Br.reset():Br[m||f.type]&&(hn=Br[m||f.type](f,gt,ze),this.mergeHandlerResult(E,Y,hn,Or,p),hn&&hn.needsRenderFrame&&this._triggerRenderFrame()),(hn||Br.isActive())&&(Ce[Or]=Br)}}var kn={};for(var an in this._previousActiveHandlers)Ce[an]||(kn[an]=p);this._previousActiveHandlers=Ce,(Object.keys(kn).length||oo(E))&&(this._changes.push([E,Y,kn]),this._triggerRenderFrame()),(Object.keys(Ce).length||oo(E))&&this._map._stop(!0),this._updatingCamera=!1;var Rn=E.cameraAnimation;Rn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Rn(this._map))},Do.prototype.mergeHandlerResult=function(f,m,p,E,Y){if(p){c.extend(f,p);var Ce={handlerName:E,originalEvent:p.originalEvent||Y};p.zoomDelta!==void 0&&(m.zoom=Ce),p.panDelta!==void 0&&(m.drag=Ce),p.pitchDelta!==void 0&&(m.pitch=Ce),p.bearingDelta!==void 0&&(m.rotate=Ce)}},Do.prototype._applyChanges=function(){for(var f={},m={},p={},E=0,Y=this._changes;E<Y.length;E+=1){var Ce=Y[E],ze=Ce[0],gt=Ce[1],Gt=Ce[2];ze.panDelta&&(f.panDelta=(f.panDelta||new c.Point(0,0))._add(ze.panDelta)),ze.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+ze.zoomDelta),ze.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+ze.bearingDelta),ze.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+ze.pitchDelta),ze.around!==void 0&&(f.around=ze.around),ze.pinchAround!==void 0&&(f.pinchAround=ze.pinchAround),ze.noInertia&&(f.noInertia=ze.noInertia),c.extend(m,gt),c.extend(p,Gt)}this._updateMapTransform(f,m,p),this._changes=[]},Do.prototype._updateMapTransform=function(f,m,p){var E=this._map,Y=E.transform;if(!oo(f))return this._fireEvents(m,p,!0);var Ce=f.panDelta,ze=f.zoomDelta,gt=f.bearingDelta,Gt=f.pitchDelta,sr=f.around,Mr=f.pinchAround;Mr!==void 0&&(sr=Mr),E._stop(!0),sr=sr||E.transform.centerPoint;var Or=Y.pointLocation(Ce?sr.sub(Ce):sr);gt&&(Y.bearing+=gt),Gt&&(Y.pitch+=Gt),ze&&(Y.zoom+=ze),Y.setLocationAtPoint(Or,sr),this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(m,p,!0)},Do.prototype._fireEvents=function(f,m,p){var E=this,Y=Ql(this._eventsInProgress),Ce=Ql(f),ze={};for(var gt in f)this._eventsInProgress[gt]||(ze[gt+"start"]=f[gt].originalEvent),this._eventsInProgress[gt]=f[gt];for(var Gt in!Y&&Ce&&this._fireEvent("movestart",Ce.originalEvent),ze)this._fireEvent(Gt,ze[Gt]);for(var sr in Ce&&this._fireEvent("move",Ce.originalEvent),f)this._fireEvent(sr,f[sr].originalEvent);var Mr,Or={};for(var Br in this._eventsInProgress){var yn=this._eventsInProgress[Br],hn=yn.handlerName,kn=yn.originalEvent;this._handlersById[hn].isActive()||(delete this._eventsInProgress[Br],Or[Br+"end"]=Mr=m[hn]||kn)}for(var an in Or)this._fireEvent(an,Or[an]);var Rn=Ql(this._eventsInProgress);if(p&&(Y||Ce)&&!Rn){this._updatingCamera=!0;var $n=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),di=function(Di){return Di!==0&&-E._bearingSnap<Di&&Di<E._bearingSnap};$n?(di($n.bearing||this._map.getBearing())&&($n.bearing=0),this._map.easeTo($n,{originalEvent:Mr})):(this._map.fire(new c.Event("moveend",{originalEvent:Mr})),di(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Do.prototype._fireEvent=function(f,m){this._map.fire(new c.Event(f,m?{originalEvent:m}:{}))},Do.prototype._requestFrame=function(){var f=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(m){delete f._frameId,f.handleEvent(new fc("renderFrame",{timeStamp:m})),f._applyChanges()})},Do.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var nu=function(f){function m(p,E){f.call(this),this._moving=!1,this._zooming=!1,this.transform=p,this._bearingSnap=E.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.getCenter=function(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)},m.prototype.setCenter=function(p,E){return this.jumpTo({center:p},E)},m.prototype.panBy=function(p,E,Y){return p=c.Point.convert(p).mult(-1),this.panTo(this.transform.center,c.extend({offset:p},E),Y)},m.prototype.panTo=function(p,E,Y){return this.easeTo(c.extend({center:p},E),Y)},m.prototype.getZoom=function(){return this.transform.zoom},m.prototype.setZoom=function(p,E){return this.jumpTo({zoom:p},E),this},m.prototype.zoomTo=function(p,E,Y){return this.easeTo(c.extend({zoom:p},E),Y)},m.prototype.zoomIn=function(p,E){return this.zoomTo(this.getZoom()+1,p,E),this},m.prototype.zoomOut=function(p,E){return this.zoomTo(this.getZoom()-1,p,E),this},m.prototype.getBearing=function(){return this.transform.bearing},m.prototype.setBearing=function(p,E){return this.jumpTo({bearing:p},E),this},m.prototype.getPadding=function(){return this.transform.padding},m.prototype.setPadding=function(p,E){return this.jumpTo({padding:p},E),this},m.prototype.rotateTo=function(p,E,Y){return this.easeTo(c.extend({bearing:p},E),Y)},m.prototype.resetNorth=function(p,E){return this.rotateTo(0,c.extend({duration:1e3},p),E),this},m.prototype.resetNorthPitch=function(p,E){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},p),E),this},m.prototype.snapToNorth=function(p,E){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(p,E):this},m.prototype.getPitch=function(){return this.transform.pitch},m.prototype.setPitch=function(p,E){return this.jumpTo({pitch:p},E),this},m.prototype.cameraForBounds=function(p,E){p=c.LngLatBounds.convert(p);var Y=E&&E.bearing||0;return this._cameraForBoxAndBearing(p.getNorthWest(),p.getSouthEast(),Y,E)},m.prototype._cameraForBoxAndBearing=function(p,E,Y,Ce){var ze={top:0,bottom:0,right:0,left:0};if(typeof(Ce=c.extend({padding:ze,offset:[0,0],maxZoom:this.transform.maxZoom},Ce)).padding=="number"){var gt=Ce.padding;Ce.padding={top:gt,bottom:gt,right:gt,left:gt}}Ce.padding=c.extend(ze,Ce.padding);var Gt=this.transform,sr=Gt.padding,Mr=Gt.project(c.LngLat.convert(p)),Or=Gt.project(c.LngLat.convert(E)),Br=Mr.rotate(-Y*Math.PI/180),yn=Or.rotate(-Y*Math.PI/180),hn=new c.Point(Math.max(Br.x,yn.x),Math.max(Br.y,yn.y)),kn=new c.Point(Math.min(Br.x,yn.x),Math.min(Br.y,yn.y)),an=hn.sub(kn),Rn=(Gt.width-(sr.left+sr.right+Ce.padding.left+Ce.padding.right))/an.x,$n=(Gt.height-(sr.top+sr.bottom+Ce.padding.top+Ce.padding.bottom))/an.y;if(!($n<0||Rn<0)){var di=Math.min(Gt.scaleZoom(Gt.scale*Math.min(Rn,$n)),Ce.maxZoom),Di=typeof Ce.offset.x=="number"?new c.Point(Ce.offset.x,Ce.offset.y):c.Point.convert(Ce.offset),Ti=new c.Point((Ce.padding.left-Ce.padding.right)/2,(Ce.padding.top-Ce.padding.bottom)/2).rotate(Y*Math.PI/180),Fi=Di.add(Ti).mult(Gt.scale/Gt.zoomScale(di));return{center:Gt.unproject(Mr.add(Or).div(2).sub(Fi)),zoom:di,bearing:Y}}c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},m.prototype.fitBounds=function(p,E,Y){return this._fitInternal(this.cameraForBounds(p,E),E,Y)},m.prototype.fitScreenCoordinates=function(p,E,Y,Ce,ze){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.Point.convert(p)),this.transform.pointLocation(c.Point.convert(E)),Y,Ce),Ce,ze)},m.prototype._fitInternal=function(p,E,Y){return p?(delete(E=c.extend(p,E)).padding,E.linear?this.easeTo(E,Y):this.flyTo(E,Y)):this},m.prototype.jumpTo=function(p,E){this.stop();var Y=this.transform,Ce=!1,ze=!1,gt=!1;return"zoom"in p&&Y.zoom!==+p.zoom&&(Ce=!0,Y.zoom=+p.zoom),p.center!==void 0&&(Y.center=c.LngLat.convert(p.center)),"bearing"in p&&Y.bearing!==+p.bearing&&(ze=!0,Y.bearing=+p.bearing),"pitch"in p&&Y.pitch!==+p.pitch&&(gt=!0,Y.pitch=+p.pitch),p.padding==null||Y.isPaddingEqual(p.padding)||(Y.padding=p.padding),this.fire(new c.Event("movestart",E)).fire(new c.Event("move",E)),Ce&&this.fire(new c.Event("zoomstart",E)).fire(new c.Event("zoom",E)).fire(new c.Event("zoomend",E)),ze&&this.fire(new c.Event("rotatestart",E)).fire(new c.Event("rotate",E)).fire(new c.Event("rotateend",E)),gt&&this.fire(new c.Event("pitchstart",E)).fire(new c.Event("pitch",E)).fire(new c.Event("pitchend",E)),this.fire(new c.Event("moveend",E))},m.prototype.easeTo=function(p,E){var Y=this;this._stop(!1,p.easeId),((p=c.extend({offset:[0,0],duration:500,easing:c.ease},p)).animate===!1||!p.essential&&c.browser.prefersReducedMotion)&&(p.duration=0);var Ce=this.transform,ze=this.getZoom(),gt=this.getBearing(),Gt=this.getPitch(),sr=this.getPadding(),Mr="zoom"in p?+p.zoom:ze,Or="bearing"in p?this._normalizeBearing(p.bearing,gt):gt,Br="pitch"in p?+p.pitch:Gt,yn="padding"in p?p.padding:Ce.padding,hn=c.Point.convert(p.offset),kn=Ce.centerPoint.add(hn),an=Ce.pointLocation(kn),Rn=c.LngLat.convert(p.center||an);this._normalizeCenter(Rn);var $n,di,Di=Ce.project(an),Ti=Ce.project(Rn).sub(Di),Fi=Ce.zoomScale(Mr-ze);p.around&&($n=c.LngLat.convert(p.around),di=Ce.locationPoint($n));var ra={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Mr!==ze,this._rotating=this._rotating||gt!==Or,this._pitching=this._pitching||Br!==Gt,this._padding=!Ce.isPaddingEqual(yn),this._easeId=p.easeId,this._prepareEase(E,p.noMoveStart,ra),this._ease(function(Da){if(Y._zooming&&(Ce.zoom=c.number(ze,Mr,Da)),Y._rotating&&(Ce.bearing=c.number(gt,Or,Da)),Y._pitching&&(Ce.pitch=c.number(Gt,Br,Da)),Y._padding&&(Ce.interpolatePadding(sr,yn,Da),kn=Ce.centerPoint.add(hn)),$n)Ce.setLocationAtPoint($n,di);else{var Na=Ce.zoomScale(Ce.zoom-ze),po=Mr>ze?Math.min(2,Fi):Math.max(.5,Fi),No=Math.pow(po,1-Da),is=Ce.unproject(Di.add(Ti.mult(Da*No)).mult(Na));Ce.setLocationAtPoint(Ce.renderWorldCopies?is.wrap():is,kn)}Y._fireMoveEvents(E)},function(Da){Y._afterEase(E,Da)},p),this},m.prototype._prepareEase=function(p,E,Y){Y===void 0&&(Y={}),this._moving=!0,E||Y.moving||this.fire(new c.Event("movestart",p)),this._zooming&&!Y.zooming&&this.fire(new c.Event("zoomstart",p)),this._rotating&&!Y.rotating&&this.fire(new c.Event("rotatestart",p)),this._pitching&&!Y.pitching&&this.fire(new c.Event("pitchstart",p))},m.prototype._fireMoveEvents=function(p){this.fire(new c.Event("move",p)),this._zooming&&this.fire(new c.Event("zoom",p)),this._rotating&&this.fire(new c.Event("rotate",p)),this._pitching&&this.fire(new c.Event("pitch",p))},m.prototype._afterEase=function(p,E){if(!this._easeId||!E||this._easeId!==E){delete this._easeId;var Y=this._zooming,Ce=this._rotating,ze=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Y&&this.fire(new c.Event("zoomend",p)),Ce&&this.fire(new c.Event("rotateend",p)),ze&&this.fire(new c.Event("pitchend",p)),this.fire(new c.Event("moveend",p))}},m.prototype.flyTo=function(p,E){var Y=this;if(!p.essential&&c.browser.prefersReducedMotion){var Ce=c.pick(p,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ce,E)}this.stop(),p=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},p);var ze=this.transform,gt=this.getZoom(),Gt=this.getBearing(),sr=this.getPitch(),Mr=this.getPadding(),Or="zoom"in p?c.clamp(+p.zoom,ze.minZoom,ze.maxZoom):gt,Br="bearing"in p?this._normalizeBearing(p.bearing,Gt):Gt,yn="pitch"in p?+p.pitch:sr,hn="padding"in p?p.padding:ze.padding,kn=ze.zoomScale(Or-gt),an=c.Point.convert(p.offset),Rn=ze.centerPoint.add(an),$n=ze.pointLocation(Rn),di=c.LngLat.convert(p.center||$n);this._normalizeCenter(di);var Di=ze.project($n),Ti=ze.project(di).sub(Di),Fi=p.curve,ra=Math.max(ze.width,ze.height),Da=ra/kn,Na=Ti.mag();if("minZoom"in p){var po=c.clamp(Math.min(p.minZoom,gt,Or),ze.minZoom,ze.maxZoom),No=ra/ze.zoomScale(po-gt);Fi=Math.sqrt(No/Na*2)}var is=Fi*Fi;function rs(Cs){var _s=(Da*Da-ra*ra+(Cs?-1:1)*is*is*Na*Na)/(2*(Cs?Da:ra)*is*Na);return Math.log(Math.sqrt(_s*_s+1)-_s)}function Ls(Cs){return(Math.exp(Cs)-Math.exp(-Cs))/2}function vo(Cs){return(Math.exp(Cs)+Math.exp(-Cs))/2}var ds=rs(0),Ns=function(Cs){return vo(ds)/vo(ds+Fi*Cs)},cs=function(Cs){return ra*((vo(ds)*(Ls(_s=ds+Fi*Cs)/vo(_s))-Ls(ds))/is)/Na;var _s},Qo=(rs(1)-ds)/Fi;if(Math.abs(Na)<1e-6||!isFinite(Qo)){if(Math.abs(ra-Da)<1e-6)return this.easeTo(p,E);var $s=Da<ra?-1:1;Qo=Math.abs(Math.log(Da/ra))/Fi,cs=function(){return 0},Ns=function(Cs){return Math.exp($s*Fi*Cs)}}return p.duration="duration"in p?+p.duration:1e3*Qo/("screenSpeed"in p?+p.screenSpeed/Fi:+p.speed),p.maxDuration&&p.duration>p.maxDuration&&(p.duration=0),this._zooming=!0,this._rotating=Gt!==Br,this._pitching=yn!==sr,this._padding=!ze.isPaddingEqual(hn),this._prepareEase(E,!1),this._ease(function(Cs){var _s=Cs*Qo,El=1/Ns(_s);ze.zoom=Cs===1?Or:gt+ze.scaleZoom(El),Y._rotating&&(ze.bearing=c.number(Gt,Br,Cs)),Y._pitching&&(ze.pitch=c.number(sr,yn,Cs)),Y._padding&&(ze.interpolatePadding(Mr,hn,Cs),Rn=ze.centerPoint.add(an));var nl=Cs===1?di:ze.unproject(Di.add(Ti.mult(cs(_s))).mult(El));ze.setLocationAtPoint(ze.renderWorldCopies?nl.wrap():nl,Rn),Y._fireMoveEvents(E)},function(){return Y._afterEase(E)},p),this},m.prototype.isEasing=function(){return!!this._easeFrameId},m.prototype.stop=function(){return this._stop()},m.prototype._stop=function(p,E){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Y=this._onEaseEnd;delete this._onEaseEnd,Y.call(this,E)}if(!p){var Ce=this.handlers;Ce&&Ce.stop(!1)}return this},m.prototype._ease=function(p,E,Y){Y.animate===!1||Y.duration===0?(p(1),E()):(this._easeStart=c.browser.now(),this._easeOptions=Y,this._onEaseFrame=p,this._onEaseEnd=E,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},m.prototype._renderFrameCallback=function(){var p=Math.min((c.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},m.prototype._normalizeBearing=function(p,E){p=c.wrap(p,-180,180);var Y=Math.abs(p-E);return Math.abs(p-360-E)<Y&&(p-=360),Math.abs(p+360-E)<Y&&(p+=360),p},m.prototype._normalizeCenter=function(p){var E=this.transform;if(E.renderWorldCopies&&!E.lngRange){var Y=p.lng-E.center.lng;p.lng+=Y>180?-360:Y<-180?360:0}},m}(c.Evented),Jl=function(f){f===void 0&&(f={}),this.options=f,c.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Jl.prototype.getDefaultPosition=function(){return"bottom-right"},Jl.prototype.onAdd=function(f){var m=this.options&&this.options.compact;return this._map=f,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Jl.prototype.onRemove=function(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Jl.prototype._setElementTitle=function(f,m){var p=this._map._getUIString("AttributionControl."+m);f.title=p,f.setAttribute("aria-label",p)},Jl.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Jl.prototype._updateEditLink=function(){var f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));var m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||c.config.ACCESS_TOKEN}];if(f){var p=m.reduce(function(E,Y,Ce){return Y.value&&(E+=Y.key+"="+Y.value+(Ce<m.length-1?"&":"")),E},"?");f.href=c.config.FEEDBACK_URL+"/"+p+(this._map._hash?this._map._hash.getHashString(!0):""),f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}},Jl.prototype._updateData=function(f){!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Jl.prototype._updateAttributions=function(){if(this._map.style){var f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(function(gt){return typeof gt!="string"?"":gt})):typeof this.options.customAttribution=="string"&&f.push(this.options.customAttribution)),this._map.style.stylesheet){var m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}var p=this._map.style.sourceCaches;for(var E in p){var Y=p[E];if(Y.used){var Ce=Y.getSource();Ce.attribution&&f.indexOf(Ce.attribution)<0&&f.push(Ce.attribution)}}f.sort(function(gt,Gt){return gt.length-Gt.length});var ze=(f=f.filter(function(gt,Gt){for(var sr=Gt+1;sr<f.length;sr++)if(f[sr].indexOf(gt)>=0)return!1;return!0})).join(" | ");ze!==this._attribHTML&&(this._attribHTML=ze,f.length?(this._innerContainer.innerHTML=ze,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Jl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var xl=function(){c.bindAll(["_updateLogo"],this),c.bindAll(["_updateCompact"],this)};xl.prototype.onAdd=function(f){this._map=f,this._container=N.create("div","mapboxgl-ctrl");var m=N.create("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},xl.prototype.onRemove=function(){N.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},xl.prototype.getDefaultPosition=function(){return"bottom-left"},xl.prototype._updateLogo=function(f){f&&f.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},xl.prototype._logoRequired=function(){if(this._map.style){var f=this._map.style.sourceCaches;for(var m in f)if(f[m].getSource().mapbox_logo)return!0;return!1}},xl.prototype._updateCompact=function(){var f=this._container.children;if(f.length){var m=f[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}};var mu=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};mu.prototype.add=function(f){var m=++this._id;return this._queue.push({callback:f,id:m,cancelled:!1}),m},mu.prototype.remove=function(f){for(var m=this._currentlyRunning,p=0,E=m?this._queue.concat(m):this._queue;p<E.length;p+=1){var Y=E[p];if(Y.id===f)return void(Y.cancelled=!0)}},mu.prototype.run=function(f){f===void 0&&(f=0);var m=this._currentlyRunning=this._queue;this._queue=[];for(var p=0,E=m;p<E.length;p+=1){var Y=E[p];if(!Y.cancelled&&(Y.callback(f),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},mu.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ku={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Kc=c.window.HTMLImageElement,Gh=c.window.HTMLElement,Yu=c.window.ImageBitmap,bl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},yd=function(f){function m(E){var Y=this;if((E=c.extend({},bl,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Ce=new lo(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies);if(f.call(this,Ce,E),this._interactive=E.interactive,this._maxTileCacheSize=E.maxTileCacheSize,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new mu,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},Ku,E.locale),this._clickTolerance=E.clickTolerance,this._requestManager=new c.RequestManager(E.transformRequest,E.accessToken),typeof E.container=="string"){if(this._container=c.window.document.getElementById(E.container),!this._container)throw new Error("Container '"+E.container+"' not found.")}else{if(!(E.container instanceof Gh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Y._update(!1)}),this.on("moveend",function(){return Y._update(!1)}),this.on("zoom",function(){return Y._update(!0)}),c.window!==void 0&&(c.window.addEventListener("online",this._onWindowOnline,!1),c.window.addEventListener("resize",this._onWindowResize,!1),c.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Do(this,E),this._hash=E.hash&&new tl(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,c.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new Jl({customAttribution:E.customAttribution})),this.addControl(new xl,E.logoPosition),this.on("style.load",function(){Y.transform.unmodified&&Y.jumpTo(Y.style.stylesheet)}),this.on("data",function(ze){Y._update(ze.dataType==="style"),Y.fire(new c.Event(ze.dataType+"data",ze))}),this.on("dataloading",function(ze){Y.fire(new c.Event(ze.dataType+"dataloading",ze))})}f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m;var p={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return m.prototype._getMapId=function(){return this._mapId},m.prototype.addControl=function(E,Y){if(Y===void 0&&(Y=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=E.onAdd(this);this._controls.push(E);var ze=this._controlPositions[Y];return Y.indexOf("bottom")!==-1?ze.insertBefore(Ce,ze.firstChild):ze.appendChild(Ce),this},m.prototype.removeControl=function(E){if(!E||!E.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Y=this._controls.indexOf(E);return Y>-1&&this._controls.splice(Y,1),E.onRemove(this),this},m.prototype.hasControl=function(E){return this._controls.indexOf(E)>-1},m.prototype.resize=function(E){var Y=this._containerDimensions(),Ce=Y[0],ze=Y[1];if(Ce===this.transform.width&&ze===this.transform.height)return this;this._resizeCanvas(Ce,ze),this.transform.resize(Ce,ze),this.painter.resize(Ce,ze);var gt=!this._moving;return gt&&this.fire(new c.Event("movestart",E)).fire(new c.Event("move",E)),this.fire(new c.Event("resize",E)),gt&&this.fire(new c.Event("moveend",E)),this},m.prototype.getBounds=function(){return this.transform.getBounds()},m.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},m.prototype.setMaxBounds=function(E){return this.transform.setMaxBounds(c.LngLatBounds.convert(E)),this._update()},m.prototype.setMinZoom=function(E){if((E=E==null?-2:E)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},m.prototype.getMinZoom=function(){return this.transform.minZoom},m.prototype.setMaxZoom=function(E){if((E=E==null?22:E)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")},m.prototype.getMaxZoom=function(){return this.transform.maxZoom},m.prototype.setMinPitch=function(E){if((E=E==null?0:E)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},m.prototype.getMinPitch=function(){return this.transform.minPitch},m.prototype.setMaxPitch=function(E){if((E=E==null?60:E)>60)throw new Error("maxPitch must be less than or equal to 60");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")},m.prototype.getMaxPitch=function(){return this.transform.maxPitch},m.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},m.prototype.setRenderWorldCopies=function(E){return this.transform.renderWorldCopies=E,this._update()},m.prototype.project=function(E){return this.transform.locationPoint(c.LngLat.convert(E))},m.prototype.unproject=function(E){return this.transform.pointLocation(c.Point.convert(E))},m.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},m.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},m.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},m.prototype._createDelegatedListener=function(E,Y,Ce){var ze,gt=this;if(E==="mouseenter"||E==="mouseover"){var Gt=!1;return{layer:Y,listener:Ce,delegates:{mousemove:function(Mr){var Or=gt.getLayer(Y)?gt.queryRenderedFeatures(Mr.point,{layers:[Y]}):[];Or.length?Gt||(Gt=!0,Ce.call(gt,new ol(E,gt,Mr.originalEvent,{features:Or}))):Gt=!1},mouseout:function(){Gt=!1}}}}if(E==="mouseleave"||E==="mouseout"){var sr=!1;return{layer:Y,listener:Ce,delegates:{mousemove:function(Mr){(gt.getLayer(Y)?gt.queryRenderedFeatures(Mr.point,{layers:[Y]}):[]).length?sr=!0:sr&&(sr=!1,Ce.call(gt,new ol(E,gt,Mr.originalEvent)))},mouseout:function(Mr){sr&&(sr=!1,Ce.call(gt,new ol(E,gt,Mr.originalEvent)))}}}}return{layer:Y,listener:Ce,delegates:(ze={},ze[E]=function(Mr){var Or=gt.getLayer(Y)?gt.queryRenderedFeatures(Mr.point,{layers:[Y]}):[];Or.length&&(Mr.features=Or,Ce.call(gt,Mr),delete Mr.features)},ze)}},m.prototype.on=function(E,Y,Ce){if(Ce===void 0)return f.prototype.on.call(this,E,Y);var ze=this._createDelegatedListener(E,Y,Ce);for(var gt in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(ze),ze.delegates)this.on(gt,ze.delegates[gt]);return this},m.prototype.once=function(E,Y,Ce){if(Ce===void 0)return f.prototype.once.call(this,E,Y);var ze=this._createDelegatedListener(E,Y,Ce);for(var gt in ze.delegates)this.once(gt,ze.delegates[gt]);return this},m.prototype.off=function(E,Y,Ce){var ze=this;return Ce===void 0?f.prototype.off.call(this,E,Y):(this._delegatedListeners&&this._delegatedListeners[E]&&function(gt){for(var Gt=gt[E],sr=0;sr<Gt.length;sr++){var Mr=Gt[sr];if(Mr.layer===Y&&Mr.listener===Ce){for(var Or in Mr.delegates)ze.off(Or,Mr.delegates[Or]);return Gt.splice(sr,1),ze}}}(this._delegatedListeners),this)},m.prototype.queryRenderedFeatures=function(E,Y){if(!this.style)return[];var Ce;if(Y!==void 0||E===void 0||E instanceof c.Point||Array.isArray(E)||(Y=E,E=void 0),Y=Y||{},(E=E||[[0,0],[this.transform.width,this.transform.height]])instanceof c.Point||typeof E[0]=="number")Ce=[c.Point.convert(E)];else{var ze=c.Point.convert(E[0]),gt=c.Point.convert(E[1]);Ce=[ze,new c.Point(gt.x,ze.y),gt,new c.Point(ze.x,gt.y),ze]}return this.style.queryRenderedFeatures(Ce,Y,this.transform)},m.prototype.querySourceFeatures=function(E,Y){return this.style.querySourceFeatures(E,Y)},m.prototype.setStyle=function(E,Y){return(Y=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Y)).diff!==!1&&Y.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,Y),this):(this._localIdeographFontFamily=Y.localIdeographFontFamily,this._updateStyle(E,Y))},m.prototype._getUIString=function(E){var Y=this._locale[E];if(Y==null)throw new Error("Missing UI string '"+E+"'");return Y},m.prototype._updateStyle=function(E,Y){return this.style&&(this.style.setEventedParent(null),this.style._remove()),E?(this.style=new qi(this,Y||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E):this.style.loadJSON(E),this):(delete this.style,this)},m.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},m.prototype._diffStyle=function(E,Y){var Ce=this;if(typeof E=="string"){var ze=this._requestManager.normalizeStyleURL(E),gt=this._requestManager.transformRequest(ze,c.ResourceType.Style);c.getJSON(gt,function(Gt,sr){Gt?Ce.fire(new c.ErrorEvent(Gt)):sr&&Ce._updateDiff(sr,Y)})}else typeof E=="object"&&this._updateDiff(E,Y)},m.prototype._updateDiff=function(E,Y){try{this.style.setState(E)&&this._update(!0)}catch(Ce){c.warnOnce("Unable to perform style diff: "+(Ce.message||Ce.error||Ce)+".  Rebuilding the style from scratch."),this._updateStyle(E,Y)}},m.prototype.getStyle=function(){if(this.style)return this.style.serialize()},m.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")},m.prototype.addSource=function(E,Y){return this._lazyInitEmptyStyle(),this.style.addSource(E,Y),this._update(!0)},m.prototype.isSourceLoaded=function(E){var Y=this.style&&this.style.sourceCaches[E];if(Y!==void 0)return Y.loaded();this.fire(new c.ErrorEvent(new Error("There is no source with ID '"+E+"'")))},m.prototype.areTilesLoaded=function(){var E=this.style&&this.style.sourceCaches;for(var Y in E){var Ce=E[Y]._tiles;for(var ze in Ce){var gt=Ce[ze];if(gt.state!=="loaded"&&gt.state!=="errored")return!1}}return!0},m.prototype.addSourceType=function(E,Y,Ce){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,Y,Ce)},m.prototype.removeSource=function(E){return this.style.removeSource(E),this._update(!0)},m.prototype.getSource=function(E){return this.style.getSource(E)},m.prototype.addImage=function(E,Y,Ce){Ce===void 0&&(Ce={});var ze=Ce.pixelRatio;ze===void 0&&(ze=1);var gt=Ce.sdf;gt===void 0&&(gt=!1);var Gt=Ce.stretchX,sr=Ce.stretchY,Mr=Ce.content;if(this._lazyInitEmptyStyle(),Y instanceof Kc||Yu&&Y instanceof Yu){var Or=c.browser.getImageData(Y);this.style.addImage(E,{data:new c.RGBAImage({width:Or.width,height:Or.height},Or.data),pixelRatio:ze,stretchX:Gt,stretchY:sr,content:Mr,sdf:gt,version:0})}else{if(Y.width===void 0||Y.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Br=Y;this.style.addImage(E,{data:new c.RGBAImage({width:Y.width,height:Y.height},new Uint8Array(Y.data)),pixelRatio:ze,stretchX:Gt,stretchY:sr,content:Mr,sdf:gt,version:0,userImage:Br}),Br.onAdd&&Br.onAdd(this,E)}},m.prototype.updateImage=function(E,Y){var Ce=this.style.getImage(E);if(!Ce)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ze=Y instanceof Kc||Yu&&Y instanceof Yu?c.browser.getImageData(Y):Y,gt=ze.width,Gt=ze.height,sr=ze.data;return gt===void 0||Gt===void 0?this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):gt!==Ce.data.width||Gt!==Ce.data.height?this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Ce.data.replace(sr,!(Y instanceof Kc||Yu&&Y instanceof Yu)),void this.style.updateImage(E,Ce))},m.prototype.hasImage=function(E){return E?!!this.style.getImage(E):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)},m.prototype.removeImage=function(E){this.style.removeImage(E)},m.prototype.loadImage=function(E,Y){c.getImage(this._requestManager.transformRequest(E,c.ResourceType.Image),Y)},m.prototype.listImages=function(){return this.style.listImages()},m.prototype.addLayer=function(E,Y){return this._lazyInitEmptyStyle(),this.style.addLayer(E,Y),this._update(!0)},m.prototype.moveLayer=function(E,Y){return this.style.moveLayer(E,Y),this._update(!0)},m.prototype.removeLayer=function(E){return this.style.removeLayer(E),this._update(!0)},m.prototype.getLayer=function(E){return this.style.getLayer(E)},m.prototype.setLayerZoomRange=function(E,Y,Ce){return this.style.setLayerZoomRange(E,Y,Ce),this._update(!0)},m.prototype.setFilter=function(E,Y,Ce){return Ce===void 0&&(Ce={}),this.style.setFilter(E,Y,Ce),this._update(!0)},m.prototype.getFilter=function(E){return this.style.getFilter(E)},m.prototype.setPaintProperty=function(E,Y,Ce,ze){return ze===void 0&&(ze={}),this.style.setPaintProperty(E,Y,Ce,ze),this._update(!0)},m.prototype.getPaintProperty=function(E,Y){return this.style.getPaintProperty(E,Y)},m.prototype.setLayoutProperty=function(E,Y,Ce,ze){return ze===void 0&&(ze={}),this.style.setLayoutProperty(E,Y,Ce,ze),this._update(!0)},m.prototype.getLayoutProperty=function(E,Y){return this.style.getLayoutProperty(E,Y)},m.prototype.setLight=function(E,Y){return Y===void 0&&(Y={}),this._lazyInitEmptyStyle(),this.style.setLight(E,Y),this._update(!0)},m.prototype.getLight=function(){return this.style.getLight()},m.prototype.setFeatureState=function(E,Y){return this.style.setFeatureState(E,Y),this._update()},m.prototype.removeFeatureState=function(E,Y){return this.style.removeFeatureState(E,Y),this._update()},m.prototype.getFeatureState=function(E){return this.style.getFeatureState(E)},m.prototype.getContainer=function(){return this._container},m.prototype.getCanvasContainer=function(){return this._canvasContainer},m.prototype.getCanvas=function(){return this._canvas},m.prototype._containerDimensions=function(){var E=0,Y=0;return this._container&&(E=this._container.clientWidth||400,Y=this._container.clientHeight||300),[E,Y]},m.prototype._detectMissingCSS=function(){c.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&c.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},m.prototype._setupContainer=function(){var E=this._container;E.classList.add("mapboxgl-map"),(this._missingCSSCanary=N.create("div","mapboxgl-canary",E)).style.visibility="hidden",this._detectMissingCSS();var Y=this._canvasContainer=N.create("div","mapboxgl-canvas-container",E);this._interactive&&Y.classList.add("mapboxgl-interactive"),this._canvas=N.create("canvas","mapboxgl-canvas",Y),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Ce=this._containerDimensions();this._resizeCanvas(Ce[0],Ce[1]);var ze=this._controlContainer=N.create("div","mapboxgl-control-container",E),gt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Gt){gt[Gt]=N.create("div","mapboxgl-ctrl-"+Gt,ze)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},m.prototype._resizeCanvas=function(E,Y){var Ce=c.browser.devicePixelRatio||1;this._canvas.width=Ce*E,this._canvas.height=Ce*Y,this._canvas.style.width=E+"px",this._canvas.style.height=Y+"px"},m.prototype._setupPainter=function(){var E=c.extend({},K.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Y=this._canvas.getContext("webgl",E)||this._canvas.getContext("experimental-webgl",E);Y?(this.painter=new qn(Y,this.transform),c.webpSupported.testSupport(Y)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))},m.prototype._contextLost=function(E){E.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:E}))},m.prototype._contextRestored=function(E){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:E}))},m.prototype._onMapScroll=function(E){if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},m.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},m.prototype._update=function(E){return this.style?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this},m.prototype._requestRenderFrame=function(E){return this._update(),this._renderTaskQueue.add(E)},m.prototype._cancelRenderFrame=function(E){this._renderTaskQueue.remove(E)},m.prototype._render=function(E){var Y,Ce=this,ze=0,gt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Y=gt.createQueryEXT(),gt.beginQueryEXT(gt.TIME_ELAPSED_EXT,Y),ze=c.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),!this._removed){var Gt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var sr=this.transform.zoom,Mr=c.browser.now();this.style.zoomHistory.update(sr,Mr);var Or=new c.EvaluationParameters(sr,{now:Mr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Br=Or.crossFadingFactor();Br===1&&Br===this._crossFadingFactor||(Gt=!0,this._crossFadingFactor=Br),this.style.update(Or)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||Gt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var yn=c.browser.now()-ze;gt.endQueryEXT(gt.TIME_ELAPSED_EXT,Y),setTimeout(function(){var an=gt.getQueryObjectEXT(Y,gt.QUERY_RESULT_EXT)/1e6;gt.deleteQueryEXT(Y),Ce.fire(new c.Event("gpu-timing-frame",{cpuTime:yn,gpuTime:an}))},50)}if(this.listens("gpu-timing-layer")){var hn=this.painter.collectGpuTimers();setTimeout(function(){var an=Ce.painter.queryGpuTimers(hn);Ce.fire(new c.Event("gpu-timing-layer",{layerTimes:an}))},50)}var kn=this._sourcesDirty||this._styleDirty||this._placementDirty;return kn||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||kn||(this._fullyLoaded=!0),this}},m.prototype.remove=function(){this._hash&&this._hash.remove();for(var E=0,Y=this._controls;E<Y.length;E+=1)Y[E].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),c.window!==void 0&&(c.window.removeEventListener("resize",this._onWindowResize,!1),c.window.removeEventListener("orientationchange",this._onWindowResize,!1),c.window.removeEventListener("online",this._onWindowOnline,!1));var Ce=this.painter.context.gl.getExtension("WEBGL_lose_context");Ce&&Ce.loseContext(),ph(this._canvasContainer),ph(this._controlContainer),ph(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new c.Event("remove"))},m.prototype.triggerRepaint=function(){var E=this;this.style&&!this._frame&&(this._frame=c.browser.frame(function(Y){E._frame=null,E._render(Y)}))},m.prototype._onWindowOnline=function(){this._update()},m.prototype._onWindowResize=function(E){this._trackResize&&this.resize({originalEvent:E})._update()},p.showTileBoundaries.get=function(){return!!this._showTileBoundaries},p.showTileBoundaries.set=function(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())},p.showPadding.get=function(){return!!this._showPadding},p.showPadding.set=function(E){this._showPadding!==E&&(this._showPadding=E,this._update())},p.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},p.showCollisionBoxes.set=function(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())},p.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},p.showOverdrawInspector.set=function(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())},p.repaint.get=function(){return!!this._repaint},p.repaint.set=function(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())},p.vertices.get=function(){return!!this._vertices},p.vertices.set=function(E){this._vertices=E,this._update()},m.prototype._setCacheLimits=function(E,Y){c.setCacheLimits(E,Y)},p.version.get=function(){return c.version},Object.defineProperties(m.prototype,p),m}(nu);function ph(f){f.parentNode&&f.parentNode.removeChild(f)}var wc={showCompass:!0,showZoom:!0,visualizePitch:!1},Yc=function(f){var m=this;this.options=c.extend({},wc,f),this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(p){return p.preventDefault()}),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(p){return m._map.zoomIn({},{originalEvent:p})}),N.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(p){return m._map.zoomOut({},{originalEvent:p})}),N.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(p){m.options.visualizePitch?m._map.resetNorthPitch({},{originalEvent:p}):m._map.resetNorth({},{originalEvent:p})}),this._compassIcon=N.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Yc.prototype._updateZoomButtons=function(){var f=this._map.getZoom(),m=f===this._map.getMaxZoom(),p=f===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},Yc.prototype._rotateCompassArrow=function(){var f=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=f},Yc.prototype.onAdd=function(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new kl(this._map,this._compass,this.options.visualizePitch)),this._container},Yc.prototype.onRemove=function(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Yc.prototype._createButton=function(f,m){var p=N.create("button",f,this._container);return p.type="button",p.addEventListener("click",m),p},Yc.prototype._setButtonTitle=function(f,m){var p=this._map._getUIString("NavigationControl."+m);f.title=p,f.setAttribute("aria-label",p)};var kl=function(f,m,p){p===void 0&&(p=!1),this._clickTolerance=10,this.element=m,this.mouseRotate=new Vf({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,p&&(this.mousePitch=new ih({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),N.addEventListener(m,"mousedown",this.mousedown),N.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(m,"touchmove",this.touchmove),N.addEventListener(m,"touchend",this.touchend),N.addEventListener(m,"touchcancel",this.reset)};function Dr(f,m,p){if(f=new c.LngLat(f.lng,f.lat),m){var E=new c.LngLat(f.lng-360,f.lat),Y=new c.LngLat(f.lng+360,f.lat),Ce=p.locationPoint(f).distSqr(m);p.locationPoint(E).distSqr(m)<Ce?f=E:p.locationPoint(Y).distSqr(m)<Ce&&(f=Y)}for(;Math.abs(f.lng-p.center.lng)>180;){var ze=p.locationPoint(f);if(ze.x>=0&&ze.y>=0&&ze.x<=p.width&&ze.y<=p.height)break;f.lng>p.center.lng?f.lng-=360:f.lng+=360}return f}kl.prototype.down=function(f,m){this.mouseRotate.mousedown(f,m),this.mousePitch&&this.mousePitch.mousedown(f,m),N.disableDrag()},kl.prototype.move=function(f,m){var p=this.map,E=this.mouseRotate.mousemoveWindow(f,m);if(E&&E.bearingDelta&&p.setBearing(p.getBearing()+E.bearingDelta),this.mousePitch){var Y=this.mousePitch.mousemoveWindow(f,m);Y&&Y.pitchDelta&&p.setPitch(p.getPitch()+Y.pitchDelta)}},kl.prototype.off=function(){var f=this.element;N.removeEventListener(f,"mousedown",this.mousedown),N.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(f,"touchmove",this.touchmove),N.removeEventListener(f,"touchend",this.touchend),N.removeEventListener(f,"touchcancel",this.reset),this.offTemp()},kl.prototype.offTemp=function(){N.enableDrag(),N.removeEventListener(c.window,"mousemove",this.mousemove),N.removeEventListener(c.window,"mouseup",this.mouseup)},kl.prototype.mousedown=function(f){this.down(c.extend({},f,{ctrlKey:!0,preventDefault:function(){return f.preventDefault()}}),N.mousePos(this.element,f)),N.addEventListener(c.window,"mousemove",this.mousemove),N.addEventListener(c.window,"mouseup",this.mouseup)},kl.prototype.mousemove=function(f){this.move(f,N.mousePos(this.element,f))},kl.prototype.mouseup=function(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()},kl.prototype.touchstart=function(f){f.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return f.preventDefault()}},this._startPos))},kl.prototype.touchmove=function(f){f.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:function(){return f.preventDefault()}},this._lastPos))},kl.prototype.touchend=function(f){f.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},kl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Dl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Vo(f,m,p){var E=f.classList;for(var Y in Dl)E.remove("mapboxgl-"+p+"-anchor-"+Y);E.add("mapboxgl-"+p+"-anchor-"+m)}var qo,du=function(f){function m(p,E){if(f.call(this),(p instanceof c.window.HTMLElement||E)&&(p=c.extend({element:p},E)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=p&&p.anchor||"center",this._color=p&&p.color||"#3FB1CE",this._scale=p&&p.scale||1,this._draggable=p&&p.draggable||!1,this._clickTolerance=p&&p.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=p&&p.rotation||0,this._rotationAlignment=p&&p.rotationAlignment||"auto",this._pitchAlignment=p&&p.pitchAlignment&&p.pitchAlignment!=="auto"?p.pitchAlignment:this._rotationAlignment,p&&p.element)this._element=p.element,this._offset=c.Point.convert(p&&p.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div"),this._element.setAttribute("aria-label","Map marker");var Y=N.createNS("http://www.w3.org/2000/svg","svg");Y.setAttributeNS(null,"display","block"),Y.setAttributeNS(null,"height","41px"),Y.setAttributeNS(null,"width","27px"),Y.setAttributeNS(null,"viewBox","0 0 27 41");var Ce=N.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"stroke","none"),Ce.setAttributeNS(null,"stroke-width","1"),Ce.setAttributeNS(null,"fill","none"),Ce.setAttributeNS(null,"fill-rule","evenodd");var ze=N.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"fill-rule","nonzero");var gt=N.createNS("http://www.w3.org/2000/svg","g");gt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),gt.setAttributeNS(null,"fill","#000000");for(var Gt=0,sr=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Gt<sr.length;Gt+=1){var Mr=sr[Gt],Or=N.createNS("http://www.w3.org/2000/svg","ellipse");Or.setAttributeNS(null,"opacity","0.04"),Or.setAttributeNS(null,"cx","10.5"),Or.setAttributeNS(null,"cy","5.80029008"),Or.setAttributeNS(null,"rx",Mr.rx),Or.setAttributeNS(null,"ry",Mr.ry),gt.appendChild(Or)}var Br=N.createNS("http://www.w3.org/2000/svg","g");Br.setAttributeNS(null,"fill",this._color);var yn=N.createNS("http://www.w3.org/2000/svg","path");yn.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Br.appendChild(yn);var hn=N.createNS("http://www.w3.org/2000/svg","g");hn.setAttributeNS(null,"opacity","0.25"),hn.setAttributeNS(null,"fill","#000000");var kn=N.createNS("http://www.w3.org/2000/svg","path");kn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),hn.appendChild(kn);var an=N.createNS("http://www.w3.org/2000/svg","g");an.setAttributeNS(null,"transform","translate(6.0, 7.0)"),an.setAttributeNS(null,"fill","#FFFFFF");var Rn=N.createNS("http://www.w3.org/2000/svg","g");Rn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var $n=N.createNS("http://www.w3.org/2000/svg","circle");$n.setAttributeNS(null,"fill","#000000"),$n.setAttributeNS(null,"opacity","0.25"),$n.setAttributeNS(null,"cx","5.5"),$n.setAttributeNS(null,"cy","5.5"),$n.setAttributeNS(null,"r","5.4999962");var di=N.createNS("http://www.w3.org/2000/svg","circle");di.setAttributeNS(null,"fill","#FFFFFF"),di.setAttributeNS(null,"cx","5.5"),di.setAttributeNS(null,"cy","5.5"),di.setAttributeNS(null,"r","5.4999962"),Rn.appendChild($n),Rn.appendChild(di),ze.appendChild(gt),ze.appendChild(Br),ze.appendChild(hn),ze.appendChild(an),ze.appendChild(Rn),Y.appendChild(ze),Y.setAttributeNS(null,"height",41*this._scale+"px"),Y.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(Y),this._offset=c.Point.convert(p&&p.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Di){Di.preventDefault()}),this._element.addEventListener("mousedown",function(Di){Di.preventDefault()}),Vo(this._element,this._anchor,"marker"),this._popup=null}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.addTo=function(p){return this.remove(),this._map=p,p.getCanvasContainer().appendChild(this._element),p.on("move",this._update),p.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},m.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this},m.prototype.getLngLat=function(){return this._lngLat},m.prototype.setLngLat=function(p){return this._lngLat=c.LngLat.convert(p),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},m.prototype.getElement=function(){return this._element},m.prototype.setPopup=function(p){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),p){if(!("offset"in p.options)){var E=Math.sqrt(Math.pow(13.5,2)/2);p.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(24.6+E)],"bottom-right":[-E,-1*(24.6+E)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=p,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},m.prototype._onKeyPress=function(p){var E=p.code,Y=p.charCode||p.keyCode;E!=="Space"&&E!=="Enter"&&Y!==32&&Y!==13||this.togglePopup()},m.prototype._onMapClick=function(p){var E=p.originalEvent.target,Y=this._element;this._popup&&(E===Y||Y.contains(E))&&this.togglePopup()},m.prototype.getPopup=function(){return this._popup},m.prototype.togglePopup=function(){var p=this._popup;return p?(p.isOpen()?p.remove():p.addTo(this._map),this):this},m.prototype._update=function(p){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Dr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(E="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Y="rotateX(0deg)":this._pitchAlignment==="map"&&(Y="rotateX("+this._map.getPitch()+"deg)"),p&&p.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,Dl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Y+" "+E)}},m.prototype.getOffset=function(){return this._offset},m.prototype.setOffset=function(p){return this._offset=c.Point.convert(p),this._update(),this},m.prototype._onMove=function(p){if(!this._isDragging){var E=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=E}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))},m.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"},m.prototype._addDragHandler=function(p){this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},m.prototype.setDraggable=function(p){return this._draggable=!!p,this._map&&(p?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},m.prototype.isDraggable=function(){return this._draggable},m.prototype.setRotation=function(p){return this._rotation=p||0,this._update(),this},m.prototype.getRotation=function(){return this._rotation},m.prototype.setRotationAlignment=function(p){return this._rotationAlignment=p||"auto",this._update(),this},m.prototype.getRotationAlignment=function(){return this._rotationAlignment},m.prototype.setPitchAlignment=function(p){return this._pitchAlignment=p&&p!=="auto"?p:this._rotationAlignment,this._update(),this},m.prototype.getPitchAlignment=function(){return this._pitchAlignment},m}(c.Evented),Dh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Wf=0,zc=!1,df=function(f){function m(p){f.call(this),this.options=c.extend({},Dh,p),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.onAdd=function(p){var E;return this._map=p,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),E=this._setupUI,qo!==void 0?E(qo):c.window.navigator.permissions!==void 0?c.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){E(qo=Y.state!=="denied")}):E(qo=!!c.window.navigator.geolocation),this._container},m.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wf=0,zc=!1},m.prototype._isOutOfMapMaxBounds=function(p){var E=this._map.getMaxBounds(),Y=p.coords;return E&&(Y.longitude<E.getWest()||Y.longitude>E.getEast()||Y.latitude<E.getSouth()||Y.latitude>E.getNorth())},m.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},m.prototype._onSuccess=function(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",p)),this._finish()}},m.prototype._updateCamera=function(p){var E=new c.LngLat(p.coords.longitude,p.coords.latitude),Y=p.coords.accuracy,Ce=this._map.getBearing(),ze=c.extend({bearing:Ce},this.options.fitBoundsOptions);this._map.fitBounds(E.toBounds(Y),ze,{geolocateSource:!0})},m.prototype._updateMarker=function(p){if(p){var E=new c.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(E).addTo(this._map),this._userLocationDotMarker.setLngLat(E).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},m.prototype._updateCircleRadius=function(){var p=this._map._container.clientHeight/2,E=this._map.unproject([0,p]),Y=this._map.unproject([1,p]),Ce=E.distanceTo(Y),ze=Math.ceil(2*this._accuracy/Ce);this._circleElement.style.width=ze+"px",this._circleElement.style.height=ze+"px"},m.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},m.prototype._onError=function(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var E=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&zc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",p)),this._finish()}},m.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},m.prototype._setupUI=function(p){var E=this;if(this._container.addEventListener("contextmenu",function(ze){return ze.preventDefault()}),this._geolocateButton=N.create("button","mapboxgl-ctrl-geolocate",this._container),N.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",p===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Y,this._geolocateButton.setAttribute("aria-label",Y)}else{var Ce=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new du(this._dotElement),this._circleElement=N.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new du({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ze){ze.geolocateSource||E._watchState!=="ACTIVE_LOCK"||ze.originalEvent&&ze.originalEvent.type==="resize"||(E._watchState="BACKGROUND",E._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),E._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),E.fire(new c.Event("trackuserlocationend")))})},m.prototype.trigger=function(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wf--,zc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Wf>1?(p={maximumAge:6e5,timeout:0},zc=!0):(p=this.options.positionOptions,zc=!1),this._geolocationWatchID=c.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else c.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},m.prototype._clearWatch=function(){c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},m}(c.Evented),rc={maxWidth:100,unit:"metric"},ys=function(f){this.options=c.extend({},rc,f),c.bindAll(["_onMove","setUnit"],this)};function bf(f,m,p){var E=p&&p.maxWidth||100,Y=f._container.clientHeight/2,Ce=f.unproject([0,Y]),ze=f.unproject([E,Y]),gt=Ce.distanceTo(ze);if(p&&p.unit==="imperial"){var Gt=3.2808*gt;Gt>5280?Xf(m,E,Gt/5280,f._getUIString("ScaleControl.Miles")):Xf(m,E,Gt,f._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Xf(m,E,gt/1852,f._getUIString("ScaleControl.NauticalMiles")):gt>=1e3?Xf(m,E,gt/1e3,f._getUIString("ScaleControl.Kilometers")):Xf(m,E,gt,f._getUIString("ScaleControl.Meters"))}function Xf(f,m,p,E){var Y,Ce,ze,gt=(Y=p,(Ce=Math.pow(10,(""+Math.floor(Y)).length-1))*(ze=(ze=Y/Ce)>=10?10:ze>=5?5:ze>=3?3:ze>=2?2:ze>=1?1:function(Gt){var sr=Math.pow(10,Math.ceil(-Math.log(Gt)/Math.LN10));return Math.round(Gt*sr)/sr}(ze)));f.style.width=m*(gt/p)+"px",f.innerHTML=gt+"&nbsp;"+E}ys.prototype.getDefaultPosition=function(){return"bottom-left"},ys.prototype._onMove=function(){bf(this._map,this._container,this.options)},ys.prototype.onAdd=function(f){return this._map=f,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ys.prototype.onRemove=function(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ys.prototype.setUnit=function(f){this.options.unit=f,bf(this._map,this._container,this.options)};var rl=function(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof c.window.HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in c.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in c.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in c.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in c.window.document&&(this._fullscreenchange="MSFullscreenChange")};rl.prototype.onAdd=function(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},rl.prototype.onRemove=function(){N.remove(this._controlContainer),this._map=null,c.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},rl.prototype._checkFullscreenSupport=function(){return!!(c.window.document.fullscreenEnabled||c.window.document.mozFullScreenEnabled||c.window.document.msFullscreenEnabled||c.window.document.webkitFullscreenEnabled)},rl.prototype._setupUI=function(){var f=this._fullscreenButton=N.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N.create("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),c.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},rl.prototype._updateTitle=function(){var f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f},rl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},rl.prototype._isFullscreen=function(){return this._fullscreen},rl.prototype._changeIcon=function(){(c.window.document.fullscreenElement||c.window.document.mozFullScreenElement||c.window.document.webkitFullscreenElement||c.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},rl.prototype._onClickFullscreen=function(){this._isFullscreen()?c.window.document.exitFullscreen?c.window.document.exitFullscreen():c.window.document.mozCancelFullScreen?c.window.document.mozCancelFullScreen():c.window.document.msExitFullscreen?c.window.document.msExitFullscreen():c.window.document.webkitCancelFullScreen&&c.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Cc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),sd=function(f){function m(p){f.call(this),this.options=c.extend(Object.create(Cc),p),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return f&&(m.__proto__=f),(m.prototype=Object.create(f&&f.prototype)).constructor=m,m.prototype.addTo=function(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this},m.prototype.isOpen=function(){return!!this._map},m.prototype.remove=function(){return this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this},m.prototype.getLngLat=function(){return this._lngLat},m.prototype.setLngLat=function(p){return this._lngLat=c.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},m.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},m.prototype.getElement=function(){return this._container},m.prototype.setText=function(p){return this.setDOMContent(c.window.document.createTextNode(p))},m.prototype.setHTML=function(p){var E,Y=c.window.document.createDocumentFragment(),Ce=c.window.document.createElement("body");for(Ce.innerHTML=p;E=Ce.firstChild;)Y.appendChild(E);return this.setDOMContent(Y)},m.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},m.prototype.setMaxWidth=function(p){return this.options.maxWidth=p,this._update(),this},m.prototype.setDOMContent=function(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this},m.prototype.addClassName=function(p){this._container&&this._container.classList.add(p)},m.prototype.removeClassName=function(p){this._container&&this._container.classList.remove(p)},m.prototype.setOffset=function(p){return this.options.offset=p,this._update(),this},m.prototype.toggleClassName=function(p){if(this._container)return this._container.classList.toggle(p)},m.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=N.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},m.prototype._onMouseUp=function(p){this._update(p.point)},m.prototype._onMouseMove=function(p){this._update(p.point)},m.prototype._onDrag=function(p){this._update(p.point)},m.prototype._update=function(p){var E=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=N.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=N.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Or){return E._container.classList.add(Or)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Dr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||p)){var Y=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat),Ce=this.options.anchor,ze=function Or(Br){if(Br){if(typeof Br=="number"){var yn=Math.round(Math.sqrt(.5*Math.pow(Br,2)));return{center:new c.Point(0,0),top:new c.Point(0,Br),"top-left":new c.Point(yn,yn),"top-right":new c.Point(-yn,yn),bottom:new c.Point(0,-Br),"bottom-left":new c.Point(yn,-yn),"bottom-right":new c.Point(-yn,-yn),left:new c.Point(Br,0),right:new c.Point(-Br,0)}}if(Br instanceof c.Point||Array.isArray(Br)){var hn=c.Point.convert(Br);return{center:hn,top:hn,"top-left":hn,"top-right":hn,bottom:hn,"bottom-left":hn,"bottom-right":hn,left:hn,right:hn}}return{center:c.Point.convert(Br.center||[0,0]),top:c.Point.convert(Br.top||[0,0]),"top-left":c.Point.convert(Br["top-left"]||[0,0]),"top-right":c.Point.convert(Br["top-right"]||[0,0]),bottom:c.Point.convert(Br.bottom||[0,0]),"bottom-left":c.Point.convert(Br["bottom-left"]||[0,0]),"bottom-right":c.Point.convert(Br["bottom-right"]||[0,0]),left:c.Point.convert(Br.left||[0,0]),right:c.Point.convert(Br.right||[0,0])}}return Or(new c.Point(0,0))}(this.options.offset);if(!Ce){var gt,Gt=this._container.offsetWidth,sr=this._container.offsetHeight;gt=Y.y+ze.bottom.y<sr?["top"]:Y.y>this._map.transform.height-sr?["bottom"]:[],Y.x<Gt/2?gt.push("left"):Y.x>this._map.transform.width-Gt/2&&gt.push("right"),Ce=gt.length===0?"bottom":gt.join("-")}var Mr=Y.add(ze[Ce]).round();N.setTransform(this._container,Dl[Ce]+" translate("+Mr.x+"px,"+Mr.y+"px)"),Vo(this._container,Ce,"popup")}},m.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var p=this._container.querySelector(Zc);p&&p.focus()}},m.prototype._onClose=function(){this.remove()},m}(c.Evented),qc={version:c.version,supported:K,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:yd,NavigationControl:Yc,GeolocateControl:df,AttributionControl:Jl,ScaleControl:ys,FullscreenControl:rl,Popup:sd,Marker:du,Style:qi,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.Point,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,config:c.config,prewarm:function(){Ln().acquire(Nn)},clearPrewarmedResources:function(){var f=fa;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Nn),fa=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return c.config.ACCESS_TOKEN},set accessToken(f){c.config.ACCESS_TOKEN=f},get baseApiUrl(){return c.config.API_URL},set baseApiUrl(f){c.config.API_URL=f},get workerCount(){return Si.workerCount},set workerCount(f){Si.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage:function(f){c.clearTileCache(f)},workerUrl:""};return qc}),v})},31710:function(vt){(function(){var Ee=["Point","LineString","Polygon"],g=["MultiPoint","MultiLineString","MultiPolygon"];function v(K){return g.indexOf(K.type)>-1?K.coordinates.map(function(N){var Z={};return Z.type=K.type.replace("Multi",""),Z.coordinates=N,K.crs&&(Z.crs=K.crs),Z}):!1}function M(K){var N=K.every(function($){return Ee.indexOf($.type)>-1}),Z=K[0].crs||0,B=K.every(function($){var U=$.crs||0;return U==Z});if(N&&B){var L={};return L.type="Multi"+K[0].type,L.coordinates=[],Z!=0&&(L.crs=Z),K.forEach(function($){L.coordinates.push($.coordinates)}),L}else return!1}var c={explode:v,implode:M};vt.exports?vt.exports=c:window&&(window.multigeojson=c)})()},27418:function(vt){"use strict";var Ee=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function M(K){if(K==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(K)}function c(){try{if(!Object.assign)return!1;var K=new String("abc");if(K[5]="de",Object.getOwnPropertyNames(K)[0]==="5")return!1;for(var N={},Z=0;Z<10;Z++)N["_"+String.fromCharCode(Z)]=Z;var B=Object.getOwnPropertyNames(N).map(function($){return N[$]});if(B.join("")!=="0123456789")return!1;var L={};return"abcdefghijklmnopqrst".split("").forEach(function($){L[$]=$}),Object.keys(Object.assign({},L)).join("")==="abcdefghijklmnopqrst"}catch($){return!1}}vt.exports=c()?Object.assign:function(K,N){for(var Z,B=M(K),L,$=1;$<arguments.length;$++){Z=Object(arguments[$]);for(var U in Z)g.call(Z,U)&&(B[U]=Z[U]);if(Ee){L=Ee(Z);for(var ke=0;ke<L.length;ke++)v.call(Z,L[ke])&&(B[L[ke]]=Z[L[ke]])}}return B}},3614:function(vt,Ee,g){"use strict";vt.exports=M;var v=g(80645);function M(ce){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ce)?ce:new Uint8Array(ce||0),this.pos=0,this.type=0,this.length=this.buf.length}M.Varint=0,M.Fixed64=1,M.Bytes=2,M.Fixed32=5;var c=(1<<16)*(1<<16),K=1/c,N=12,Z=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");M.prototype={destroy:function(){this.buf=null},readFields:function(ce,je,J){for(J=J||this.length;this.pos<J;){var Me=this.readVarint(),ne=Me>>3,xe=this.pos;this.type=Me&7,ce(ne,je,this),this.pos===xe&&this.skip(Me)}return je},readMessage:function(ce,je){return this.readFields(ce,je,this.readVarint()+this.pos)},readFixed32:function(){var ce=ye(this.buf,this.pos);return this.pos+=4,ce},readSFixed32:function(){var ce=re(this.buf,this.pos);return this.pos+=4,ce},readFixed64:function(){var ce=ye(this.buf,this.pos)+ye(this.buf,this.pos+4)*c;return this.pos+=8,ce},readSFixed64:function(){var ce=ye(this.buf,this.pos)+re(this.buf,this.pos+4)*c;return this.pos+=8,ce},readFloat:function(){var ce=v.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ce},readDouble:function(){var ce=v.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ce},readVarint:function(ce){var je=this.buf,J,Me;return Me=je[this.pos++],J=Me&127,Me<128||(Me=je[this.pos++],J|=(Me&127)<<7,Me<128)||(Me=je[this.pos++],J|=(Me&127)<<14,Me<128)||(Me=je[this.pos++],J|=(Me&127)<<21,Me<128)?J:(Me=je[this.pos],J|=(Me&15)<<28,B(J,ce,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ce=this.readVarint();return ce%2===1?(ce+1)/-2:ce/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var ce=this.readVarint()+this.pos,je=this.pos;return this.pos=ce,ce-je>=N&&Z?le(this.buf,je,ce):De(this.buf,je,ce)},readBytes:function(){var ce=this.readVarint()+this.pos,je=this.buf.subarray(this.pos,ce);return this.pos=ce,je},readPackedVarint:function(ce,je){if(this.type!==M.Bytes)return ce.push(this.readVarint(je));var J=L(this);for(ce=ce||[];this.pos<J;)ce.push(this.readVarint(je));return ce},readPackedSVarint:function(ce){if(this.type!==M.Bytes)return ce.push(this.readSVarint());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readSVarint());return ce},readPackedBoolean:function(ce){if(this.type!==M.Bytes)return ce.push(this.readBoolean());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readBoolean());return ce},readPackedFloat:function(ce){if(this.type!==M.Bytes)return ce.push(this.readFloat());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readFloat());return ce},readPackedDouble:function(ce){if(this.type!==M.Bytes)return ce.push(this.readDouble());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readDouble());return ce},readPackedFixed32:function(ce){if(this.type!==M.Bytes)return ce.push(this.readFixed32());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readFixed32());return ce},readPackedSFixed32:function(ce){if(this.type!==M.Bytes)return ce.push(this.readSFixed32());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readSFixed32());return ce},readPackedFixed64:function(ce){if(this.type!==M.Bytes)return ce.push(this.readFixed64());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readFixed64());return ce},readPackedSFixed64:function(ce){if(this.type!==M.Bytes)return ce.push(this.readSFixed64());var je=L(this);for(ce=ce||[];this.pos<je;)ce.push(this.readSFixed64());return ce},skip:function(ce){var je=ce&7;if(je===M.Varint)for(;this.buf[this.pos++]>127;);else if(je===M.Bytes)this.pos=this.readVarint()+this.pos;else if(je===M.Fixed32)this.pos+=4;else if(je===M.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+je)},writeTag:function(ce,je){this.writeVarint(ce<<3|je)},realloc:function(ce){for(var je=this.length||16;je<this.pos+ce;)je*=2;if(je!==this.length){var J=new Uint8Array(je);J.set(this.buf),this.buf=J,this.length=je}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ce){this.realloc(4),ie(this.buf,ce,this.pos),this.pos+=4},writeSFixed32:function(ce){this.realloc(4),ie(this.buf,ce,this.pos),this.pos+=4},writeFixed64:function(ce){this.realloc(8),ie(this.buf,ce&-1,this.pos),ie(this.buf,Math.floor(ce*K),this.pos+4),this.pos+=8},writeSFixed64:function(ce){this.realloc(8),ie(this.buf,ce&-1,this.pos),ie(this.buf,Math.floor(ce*K),this.pos+4),this.pos+=8},writeVarint:function(ce){if(ce=+ce||0,ce>268435455||ce<0){U(ce,this);return}this.realloc(4),this.buf[this.pos++]=ce&127|(ce>127?128:0),!(ce<=127)&&(this.buf[this.pos++]=(ce>>>=7)&127|(ce>127?128:0),!(ce<=127)&&(this.buf[this.pos++]=(ce>>>=7)&127|(ce>127?128:0),!(ce<=127)&&(this.buf[this.pos++]=ce>>>7&127)))},writeSVarint:function(ce){this.writeVarint(ce<0?-ce*2-1:ce*2)},writeBoolean:function(ce){this.writeVarint(Boolean(ce))},writeString:function(ce){ce=String(ce),this.realloc(ce.length*4),this.pos++;var je=this.pos;this.pos=ge(this.buf,ce,this.pos);var J=this.pos-je;J>=128&&me(je,J,this),this.pos=je-1,this.writeVarint(J),this.pos+=J},writeFloat:function(ce){this.realloc(4),v.write(this.buf,ce,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ce){this.realloc(8),v.write(this.buf,ce,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ce){var je=ce.length;this.writeVarint(je),this.realloc(je);for(var J=0;J<je;J++)this.buf[this.pos++]=ce[J]},writeRawMessage:function(ce,je){this.pos++;var J=this.pos;ce(je,this);var Me=this.pos-J;Me>=128&&me(J,Me,this),this.pos=J-1,this.writeVarint(Me),this.pos+=Me},writeMessage:function(ce,je,J){this.writeTag(ce,M.Bytes),this.writeRawMessage(je,J)},writePackedVarint:function(ce,je){je.length&&this.writeMessage(ce,Le,je)},writePackedSVarint:function(ce,je){je.length&&this.writeMessage(ce,Se,je)},writePackedBoolean:function(ce,je){je.length&&this.writeMessage(ce,Lt,je)},writePackedFloat:function(ce,je){je.length&&this.writeMessage(ce,et,je)},writePackedDouble:function(ce,je){je.length&&this.writeMessage(ce,at,je)},writePackedFixed32:function(ce,je){je.length&&this.writeMessage(ce,Et,je)},writePackedSFixed32:function(ce,je){je.length&&this.writeMessage(ce,jt,je)},writePackedFixed64:function(ce,je){je.length&&this.writeMessage(ce,pe,je)},writePackedSFixed64:function(ce,je){je.length&&this.writeMessage(ce,$e,je)},writeBytesField:function(ce,je){this.writeTag(ce,M.Bytes),this.writeBytes(je)},writeFixed32Field:function(ce,je){this.writeTag(ce,M.Fixed32),this.writeFixed32(je)},writeSFixed32Field:function(ce,je){this.writeTag(ce,M.Fixed32),this.writeSFixed32(je)},writeFixed64Field:function(ce,je){this.writeTag(ce,M.Fixed64),this.writeFixed64(je)},writeSFixed64Field:function(ce,je){this.writeTag(ce,M.Fixed64),this.writeSFixed64(je)},writeVarintField:function(ce,je){this.writeTag(ce,M.Varint),this.writeVarint(je)},writeSVarintField:function(ce,je){this.writeTag(ce,M.Varint),this.writeSVarint(je)},writeStringField:function(ce,je){this.writeTag(ce,M.Bytes),this.writeString(je)},writeFloatField:function(ce,je){this.writeTag(ce,M.Fixed32),this.writeFloat(je)},writeDoubleField:function(ce,je){this.writeTag(ce,M.Fixed64),this.writeDouble(je)},writeBooleanField:function(ce,je){this.writeVarintField(ce,Boolean(je))}};function B(ce,je,J){var Me=J.buf,ne,xe;if(xe=Me[J.pos++],ne=(xe&112)>>4,xe<128||(xe=Me[J.pos++],ne|=(xe&127)<<3,xe<128)||(xe=Me[J.pos++],ne|=(xe&127)<<10,xe<128)||(xe=Me[J.pos++],ne|=(xe&127)<<17,xe<128)||(xe=Me[J.pos++],ne|=(xe&127)<<24,xe<128)||(xe=Me[J.pos++],ne|=(xe&1)<<31,xe<128))return $(ce,ne,je);throw new Error("Expected varint not more than 10 bytes")}function L(ce){return ce.type===M.Bytes?ce.readVarint()+ce.pos:ce.pos+1}function $(ce,je,J){return J?je*4294967296+(ce>>>0):(je>>>0)*4294967296+(ce>>>0)}function U(ce,je){var J,Me;if(ce>=0?(J=ce%4294967296|0,Me=ce/4294967296|0):(J=~(-ce%4294967296),Me=~(-ce/4294967296),J^4294967295?J=J+1|0:(J=0,Me=Me+1|0)),ce>=18446744073709552e3||ce<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");je.realloc(10),ke(J,Me,je),We(Me,je)}function ke(ce,je,J){J.buf[J.pos++]=ce&127|128,ce>>>=7,J.buf[J.pos++]=ce&127|128,ce>>>=7,J.buf[J.pos++]=ce&127|128,ce>>>=7,J.buf[J.pos++]=ce&127|128,ce>>>=7,J.buf[J.pos]=ce&127}function We(ce,je){var J=(ce&7)<<4;je.buf[je.pos++]|=J|((ce>>>=3)?128:0),ce&&(je.buf[je.pos++]=ce&127|((ce>>>=7)?128:0),ce&&(je.buf[je.pos++]=ce&127|((ce>>>=7)?128:0),ce&&(je.buf[je.pos++]=ce&127|((ce>>>=7)?128:0),ce&&(je.buf[je.pos++]=ce&127|((ce>>>=7)?128:0),ce&&(je.buf[je.pos++]=ce&127)))))}function me(ce,je,J){var Me=je<=16383?1:je<=2097151?2:je<=268435455?3:Math.floor(Math.log(je)/(Math.LN2*7));J.realloc(Me);for(var ne=J.pos-1;ne>=ce;ne--)J.buf[ne+Me]=J.buf[ne]}function Le(ce,je){for(var J=0;J<ce.length;J++)je.writeVarint(ce[J])}function Se(ce,je){for(var J=0;J<ce.length;J++)je.writeSVarint(ce[J])}function et(ce,je){for(var J=0;J<ce.length;J++)je.writeFloat(ce[J])}function at(ce,je){for(var J=0;J<ce.length;J++)je.writeDouble(ce[J])}function Lt(ce,je){for(var J=0;J<ce.length;J++)je.writeBoolean(ce[J])}function Et(ce,je){for(var J=0;J<ce.length;J++)je.writeFixed32(ce[J])}function jt(ce,je){for(var J=0;J<ce.length;J++)je.writeSFixed32(ce[J])}function pe(ce,je){for(var J=0;J<ce.length;J++)je.writeFixed64(ce[J])}function $e(ce,je){for(var J=0;J<ce.length;J++)je.writeSFixed64(ce[J])}function ye(ce,je){return(ce[je]|ce[je+1]<<8|ce[je+2]<<16)+ce[je+3]*16777216}function ie(ce,je,J){ce[J]=je,ce[J+1]=je>>>8,ce[J+2]=je>>>16,ce[J+3]=je>>>24}function re(ce,je){return(ce[je]|ce[je+1]<<8|ce[je+2]<<16)+(ce[je+3]<<24)}function De(ce,je,J){for(var Me="",ne=je;ne<J;){var xe=ce[ne],Ne=null,Pe=xe>239?4:xe>223?3:xe>191?2:1;if(ne+Pe>J)break;var He,lt,ft;Pe===1?xe<128&&(Ne=xe):Pe===2?(He=ce[ne+1],(He&192)===128&&(Ne=(xe&31)<<6|He&63,Ne<=127&&(Ne=null))):Pe===3?(He=ce[ne+1],lt=ce[ne+2],(He&192)===128&&(lt&192)===128&&(Ne=(xe&15)<<12|(He&63)<<6|lt&63,(Ne<=2047||Ne>=55296&&Ne<=57343)&&(Ne=null))):Pe===4&&(He=ce[ne+1],lt=ce[ne+2],ft=ce[ne+3],(He&192)===128&&(lt&192)===128&&(ft&192)===128&&(Ne=(xe&15)<<18|(He&63)<<12|(lt&63)<<6|ft&63,(Ne<=65535||Ne>=1114112)&&(Ne=null))),Ne===null?(Ne=65533,Pe=1):Ne>65535&&(Ne-=65536,Me+=String.fromCharCode(Ne>>>10&1023|55296),Ne=56320|Ne&1023),Me+=String.fromCharCode(Ne),ne+=Pe}return Me}function le(ce,je,J){return Z.decode(ce.subarray(je,J))}function ge(ce,je,J){for(var Me=0,ne,xe;Me<je.length;Me++){if(ne=je.charCodeAt(Me),ne>55295&&ne<57344)if(xe)if(ne<56320){ce[J++]=239,ce[J++]=191,ce[J++]=189,xe=ne;continue}else ne=xe-55296<<10|ne-56320|65536,xe=null;else{ne>56319||Me+1===je.length?(ce[J++]=239,ce[J++]=191,ce[J++]=189):xe=ne;continue}else xe&&(ce[J++]=239,ce[J++]=191,ce[J++]=189,xe=null);ne<128?ce[J++]=ne:(ne<2048?ce[J++]=ne>>6|192:(ne<65536?ce[J++]=ne>>12|224:(ce[J++]=ne>>18|240,ce[J++]=ne>>12&63|128),ce[J++]=ne>>6&63|128),ce[J++]=ne&63|128)}return J}},32676:function(vt,Ee,g){var v=g(34155);(function(M,c){vt.exports=c()})(this,function(){"use strict";function M(G,O){if(!(G instanceof O))throw new TypeError("Cannot call a class as a function")}function c(G,O){for(var k=0;k<O.length;k++){var X=O[k];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(G,X.key,X)}}function K(G,O,k){return O&&c(G.prototype,O),k&&c(G,k),G}var N=function(){function G(O,k){this.next=null,this.key=O,this.data=k,this.left=null,this.right=null}return G}();function Z(G,O){return G>O?1:G<O?-1:0}function B(G,O,k){for(var X=new N(null,null),W=X,ae=X;;){var Be=k(G,O.key);if(Be<0){if(O.left===null)break;if(k(G,O.left.key)<0){var ve=O.left;if(O.left=ve.right,ve.right=O,O=ve,O.left===null)break}ae.left=O,ae=O,O=O.left}else if(Be>0){if(O.right===null)break;if(k(G,O.right.key)>0){var ve=O.right;if(O.right=ve.left,ve.left=O,O=ve,O.right===null)break}W.right=O,W=O,O=O.right}else break}return W.right=O.left,ae.left=O.right,O.left=X.right,O.right=X.left,O}function L(G,O,k,X){var W=new N(G,O);if(k===null)return W.left=W.right=null,W;k=B(G,k,X);var ae=X(G,k.key);return ae<0?(W.left=k.left,W.right=k,k.left=null):ae>=0&&(W.right=k.right,W.left=k,k.right=null),W}function $(G,O,k){var X=null,W=null;if(O){O=B(G,O,k);var ae=k(O.key,G);ae===0?(X=O.left,W=O.right):ae<0?(W=O.right,O.right=null,X=O):(X=O.left,O.left=null,W=O)}return{left:X,right:W}}function U(G,O,k){return O===null?G:(G===null||(O=B(G.key,O,k),O.left=G),O)}function ke(G,O,k,X,W){if(G){X(""+O+(k?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+W(G)+`
`);var ae=O+(k?"    ":"\u2502   ");G.left&&ke(G.left,ae,!1,X,W),G.right&&ke(G.right,ae,!0,X,W)}}var We=function(){function G(O){O===void 0&&(O=Z),this._root=null,this._size=0,this._comparator=O}return G.prototype.insert=function(O,k){return this._size++,this._root=L(O,k,this._root,this._comparator)},G.prototype.add=function(O,k){var X=new N(O,k);this._root===null&&(X.left=X.right=null,this._size++,this._root=X);var W=this._comparator,ae=B(O,this._root,W),Be=W(O,ae.key);return Be===0?this._root=ae:(Be<0?(X.left=ae.left,X.right=ae,ae.left=null):Be>0&&(X.right=ae.right,X.left=ae,ae.right=null),this._size++,this._root=X),this._root},G.prototype.remove=function(O){this._root=this._remove(O,this._root,this._comparator)},G.prototype._remove=function(O,k,X){var W;if(k===null)return null;k=B(O,k,X);var ae=X(O,k.key);return ae===0?(k.left===null?W=k.right:(W=B(O,k.left,X),W.right=k.right),this._size--,W):k},G.prototype.pop=function(){var O=this._root;if(O){for(;O.left;)O=O.left;return this._root=B(O.key,this._root,this._comparator),this._root=this._remove(O.key,this._root,this._comparator),{key:O.key,data:O.data}}return null},G.prototype.findStatic=function(O){for(var k=this._root,X=this._comparator;k;){var W=X(O,k.key);if(W===0)return k;W<0?k=k.left:k=k.right}return null},G.prototype.find=function(O){return this._root&&(this._root=B(O,this._root,this._comparator),this._comparator(O,this._root.key)!==0)?null:this._root},G.prototype.contains=function(O){for(var k=this._root,X=this._comparator;k;){var W=X(O,k.key);if(W===0)return!0;W<0?k=k.left:k=k.right}return!1},G.prototype.forEach=function(O,k){for(var X=this._root,W=[],ae=!1;!ae;)X!==null?(W.push(X),X=X.left):W.length!==0?(X=W.pop(),O.call(k,X),X=X.right):ae=!0;return this},G.prototype.range=function(O,k,X,W){for(var ae=[],Be=this._comparator,ve=this._root,Je;ae.length!==0||ve;)if(ve)ae.push(ve),ve=ve.left;else{if(ve=ae.pop(),Je=Be(ve.key,k),Je>0)break;if(Be(ve.key,O)>=0&&X.call(W,ve))return this;ve=ve.right}return this},G.prototype.keys=function(){var O=[];return this.forEach(function(k){var X=k.key;return O.push(X)}),O},G.prototype.values=function(){var O=[];return this.forEach(function(k){var X=k.data;return O.push(X)}),O},G.prototype.min=function(){return this._root?this.minNode(this._root).key:null},G.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},G.prototype.minNode=function(O){if(O===void 0&&(O=this._root),O)for(;O.left;)O=O.left;return O},G.prototype.maxNode=function(O){if(O===void 0&&(O=this._root),O)for(;O.right;)O=O.right;return O},G.prototype.at=function(O){for(var k=this._root,X=!1,W=0,ae=[];!X;)if(k)ae.push(k),k=k.left;else if(ae.length>0){if(k=ae.pop(),W===O)return k;W++,k=k.right}else X=!0;return null},G.prototype.next=function(O){var k=this._root,X=null;if(O.right){for(X=O.right;X.left;)X=X.left;return X}for(var W=this._comparator;k;){var ae=W(O.key,k.key);if(ae===0)break;ae<0?(X=k,k=k.left):k=k.right}return X},G.prototype.prev=function(O){var k=this._root,X=null;if(O.left!==null){for(X=O.left;X.right;)X=X.right;return X}for(var W=this._comparator;k;){var ae=W(O.key,k.key);if(ae===0)break;ae<0?k=k.left:(X=k,k=k.right)}return X},G.prototype.clear=function(){return this._root=null,this._size=0,this},G.prototype.toList=function(){return Se(this._root)},G.prototype.load=function(O,k,X){k===void 0&&(k=[]),X===void 0&&(X=!1);var W=O.length,ae=this._comparator;if(X&&Lt(O,k,0,W-1,ae),this._root===null)this._root=me(O,k,0,W),this._size=W;else{var Be=at(this.toList(),Le(O,k),ae);W=this._size+W,this._root=et({head:Be},0,W)}return this},G.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(G.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),G.prototype.toString=function(O){O===void 0&&(O=function(W){return String(W.key)});var k=[];return ke(this._root,"",!0,function(X){return k.push(X)},O),k.join("")},G.prototype.update=function(O,k,X){var W=this._comparator,ae=$(O,this._root,W),Be=ae.left,ve=ae.right;W(O,k)<0?ve=L(k,X,ve,W):Be=L(k,X,Be,W),this._root=U(Be,ve,W)},G.prototype.split=function(O){return $(O,this._root,this._comparator)},G}();function me(G,O,k,X){var W=X-k;if(W>0){var ae=k+Math.floor(W/2),Be=G[ae],ve=O[ae],Je=new N(Be,ve);return Je.left=me(G,O,k,ae),Je.right=me(G,O,ae+1,X),Je}return null}function Le(G,O){for(var k=new N(null,null),X=k,W=0;W<G.length;W++)X=X.next=new N(G[W],O[W]);return X.next=null,k.next}function Se(G){for(var O=G,k=[],X=!1,W=new N(null,null),ae=W;!X;)O?(k.push(O),O=O.left):k.length>0?(O=ae=ae.next=k.pop(),O=O.right):X=!0;return ae.next=null,W.next}function et(G,O,k){var X=k-O;if(X>0){var W=O+Math.floor(X/2),ae=et(G,O,W),Be=G.head;return Be.left=ae,G.head=G.head.next,Be.right=et(G,W+1,k),Be}return null}function at(G,O,k){for(var X=new N(null,null),W=X,ae=G,Be=O;ae!==null&&Be!==null;)k(ae.key,Be.key)<0?(W.next=ae,ae=ae.next):(W.next=Be,Be=Be.next),W=W.next;return ae!==null?W.next=ae:Be!==null&&(W.next=Be),X.next}function Lt(G,O,k,X,W){if(!(k>=X)){for(var ae=G[k+X>>1],Be=k-1,ve=X+1;;){do Be++;while(W(G[Be],ae)<0);do ve--;while(W(G[ve],ae)>0);if(Be>=ve)break;var Je=G[Be];G[Be]=G[ve],G[ve]=Je,Je=O[Be],O[Be]=O[ve],O[ve]=Je}Lt(G,O,k,ve,W),Lt(G,O,ve+1,X,W)}}var Et=function(O,k){return O.ll.x<=k.x&&k.x<=O.ur.x&&O.ll.y<=k.y&&k.y<=O.ur.y},jt=function(O,k){if(k.ur.x<O.ll.x||O.ur.x<k.ll.x||k.ur.y<O.ll.y||O.ur.y<k.ll.y)return null;var X=O.ll.x<k.ll.x?k.ll.x:O.ll.x,W=O.ur.x<k.ur.x?O.ur.x:k.ur.x,ae=O.ll.y<k.ll.y?k.ll.y:O.ll.y,Be=O.ur.y<k.ur.y?O.ur.y:k.ur.y;return{ll:{x:X,y:ae},ur:{x:W,y:Be}}},pe=Number.EPSILON;pe===void 0&&(pe=Math.pow(2,-52));var $e=pe*pe,ye=function(O,k){if(-pe<O&&O<pe&&-pe<k&&k<pe)return 0;var X=O-k;return X*X<$e*O*k?0:O<k?-1:1},ie=function(){function G(){M(this,G),this.reset()}return K(G,[{key:"reset",value:function(){this.xRounder=new re,this.yRounder=new re}},{key:"round",value:function(k,X){return{x:this.xRounder.round(k),y:this.yRounder.round(X)}}}]),G}(),re=function(){function G(){M(this,G),this.tree=new We,this.round(0)}return K(G,[{key:"round",value:function(k){var X=this.tree.add(k),W=this.tree.prev(X);if(W!==null&&ye(X.key,W.key)===0)return this.tree.remove(k),W.key;var ae=this.tree.next(X);return ae!==null&&ye(X.key,ae.key)===0?(this.tree.remove(k),ae.key):k}}]),G}(),De=new ie,le=function(O,k){return O.x*k.y-O.y*k.x},ge=function(O,k){return O.x*k.x+O.y*k.y},ce=function(O,k,X){var W={x:k.x-O.x,y:k.y-O.y},ae={x:X.x-O.x,y:X.y-O.y},Be=le(W,ae);return ye(Be,0)},je=function(O){return Math.sqrt(ge(O,O))},J=function(O,k,X){var W={x:k.x-O.x,y:k.y-O.y},ae={x:X.x-O.x,y:X.y-O.y};return le(ae,W)/je(ae)/je(W)},Me=function(O,k,X){var W={x:k.x-O.x,y:k.y-O.y},ae={x:X.x-O.x,y:X.y-O.y};return ge(ae,W)/je(ae)/je(W)},ne=function(O,k,X){return k.y===0?null:{x:O.x+k.x/k.y*(X-O.y),y:X}},xe=function(O,k,X){return k.x===0?null:{x:X,y:O.y+k.y/k.x*(X-O.x)}},Ne=function(O,k,X,W){if(k.x===0)return xe(X,W,O.x);if(W.x===0)return xe(O,k,X.x);if(k.y===0)return ne(X,W,O.y);if(W.y===0)return ne(O,k,X.y);var ae=le(k,W);if(ae==0)return null;var Be={x:X.x-O.x,y:X.y-O.y},ve=le(Be,k)/ae,Je=le(Be,W)/ae,ot=O.x+Je*k.x,Qe=X.x+ve*W.x,ir=O.y+Je*k.y,mr=X.y+ve*W.y,Ar=(ot+Qe)/2,Er=(ir+mr)/2;return{x:Ar,y:Er}},Pe=function(){K(G,null,[{key:"compare",value:function(k,X){var W=G.comparePoints(k.point,X.point);return W!==0?W:(k.point!==X.point&&k.link(X),k.isLeft!==X.isLeft?k.isLeft?1:-1:lt.compare(k.segment,X.segment))}},{key:"comparePoints",value:function(k,X){return k.x<X.x?-1:k.x>X.x?1:k.y<X.y?-1:k.y>X.y?1:0}}]);function G(O,k){M(this,G),O.events===void 0?O.events=[this]:O.events.push(this),this.point=O,this.isLeft=k}return K(G,[{key:"link",value:function(k){if(k.point===this.point)throw new Error("Tried to link already linked events");for(var X=k.point.events,W=0,ae=X.length;W<ae;W++){var Be=X[W];this.point.events.push(Be),Be.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var k=this.point.events.length,X=0;X<k;X++){var W=this.point.events[X];if(W.segment.consumedBy===void 0)for(var ae=X+1;ae<k;ae++){var Be=this.point.events[ae];Be.consumedBy===void 0&&W.otherSE.point.events===Be.otherSE.point.events&&W.segment.consume(Be.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var k=[],X=0,W=this.point.events.length;X<W;X++){var ae=this.point.events[X];ae!==this&&!ae.segment.ringOut&&ae.segment.isInResult()&&k.push(ae)}return k}},{key:"getLeftmostComparator",value:function(k){var X=this,W=new Map,ae=function(ve){var Je=ve.otherSE;W.set(ve,{sine:J(X.point,k.point,Je.point),cosine:Me(X.point,k.point,Je.point)})};return function(Be,ve){W.has(Be)||ae(Be),W.has(ve)||ae(ve);var Je=W.get(Be),ot=Je.sine,Qe=Je.cosine,ir=W.get(ve),mr=ir.sine,Ar=ir.cosine;return ot>=0&&mr>=0?Qe<Ar?1:Qe>Ar?-1:0:ot<0&&mr<0?Qe<Ar?-1:Qe>Ar?1:0:mr<ot?-1:mr>ot?1:0}}}]),G}(),He=0,lt=function(){K(G,null,[{key:"compare",value:function(k,X){var W=k.leftSE.point.x,ae=X.leftSE.point.x,Be=k.rightSE.point.x,ve=X.rightSE.point.x;if(ve<W)return 1;if(Be<ae)return-1;var Je=k.leftSE.point.y,ot=X.leftSE.point.y,Qe=k.rightSE.point.y,ir=X.rightSE.point.y;if(W<ae){if(ot<Je&&ot<Qe)return 1;if(ot>Je&&ot>Qe)return-1;var mr=k.comparePoint(X.leftSE.point);if(mr<0)return 1;if(mr>0)return-1;var Ar=X.comparePoint(k.rightSE.point);return Ar!==0?Ar:-1}if(W>ae){if(Je<ot&&Je<ir)return-1;if(Je>ot&&Je>ir)return 1;var Er=X.comparePoint(k.leftSE.point);if(Er!==0)return Er;var Zt=k.comparePoint(X.rightSE.point);return Zt<0?1:Zt>0?-1:1}if(Je<ot)return-1;if(Je>ot)return 1;if(Be<ve){var Tr=X.comparePoint(k.rightSE.point);if(Tr!==0)return Tr}if(Be>ve){var pn=k.comparePoint(X.rightSE.point);if(pn<0)return 1;if(pn>0)return-1}if(Be!==ve){var un=Qe-Je,Zn=Be-W,Cr=ir-ot,Nr=ve-ae;if(un>Zn&&Cr<Nr)return 1;if(un<Zn&&Cr>Nr)return-1}return Be>ve?1:Be<ve||Qe<ir?-1:Qe>ir?1:k.id<X.id?-1:k.id>X.id?1:0}}]);function G(O,k,X,W){M(this,G),this.id=++He,this.leftSE=O,O.segment=this,O.otherSE=k,this.rightSE=k,k.segment=this,k.otherSE=O,this.rings=X,this.windings=W}return K(G,[{key:"replaceRightSE",value:function(k){this.rightSE=k,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var k=this.leftSE.point.y,X=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:k<X?k:X},ur:{x:this.rightSE.point.x,y:k>X?k:X}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(k){return k.x===this.leftSE.point.x&&k.y===this.leftSE.point.y||k.x===this.rightSE.point.x&&k.y===this.rightSE.point.y}},{key:"comparePoint",value:function(k){if(this.isAnEndpoint(k))return 0;var X=this.leftSE.point,W=this.rightSE.point,ae=this.vector();if(X.x===W.x)return k.x===X.x?0:k.x<X.x?1:-1;var Be=(k.y-X.y)/ae.y,ve=X.x+Be*ae.x;if(k.x===ve)return 0;var Je=(k.x-X.x)/ae.x,ot=X.y+Je*ae.y;return k.y===ot?0:k.y<ot?-1:1}},{key:"getIntersection",value:function(k){var X=this.bbox(),W=k.bbox(),ae=jt(X,W);if(ae===null)return null;var Be=this.leftSE.point,ve=this.rightSE.point,Je=k.leftSE.point,ot=k.rightSE.point,Qe=Et(X,Je)&&this.comparePoint(Je)===0,ir=Et(W,Be)&&k.comparePoint(Be)===0,mr=Et(X,ot)&&this.comparePoint(ot)===0,Ar=Et(W,ve)&&k.comparePoint(ve)===0;if(ir&&Qe)return Ar&&!mr?ve:!Ar&&mr?ot:null;if(ir)return mr&&Be.x===ot.x&&Be.y===ot.y?null:Be;if(Qe)return Ar&&ve.x===Je.x&&ve.y===Je.y?null:Je;if(Ar&&mr)return null;if(Ar)return ve;if(mr)return ot;var Er=Ne(Be,this.vector(),Je,k.vector());return Er===null||!Et(ae,Er)?null:De.round(Er.x,Er.y)}},{key:"split",value:function(k){var X=[],W=k.events!==void 0,ae=new Pe(k,!0),Be=new Pe(k,!1),ve=this.rightSE;this.replaceRightSE(Be),X.push(Be),X.push(ae);var Je=new G(ae,ve,this.rings.slice(),this.windings.slice());return Pe.comparePoints(Je.leftSE.point,Je.rightSE.point)>0&&Je.swapEvents(),Pe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),W&&(ae.checkForConsuming(),Be.checkForConsuming()),X}},{key:"swapEvents",value:function(){var k=this.rightSE;this.rightSE=this.leftSE,this.leftSE=k,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var X=0,W=this.windings.length;X<W;X++)this.windings[X]*=-1}},{key:"consume",value:function(k){for(var X=this,W=k;X.consumedBy;)X=X.consumedBy;for(;W.consumedBy;)W=W.consumedBy;var ae=G.compare(X,W);if(ae!==0){if(ae>0){var Be=X;X=W,W=Be}if(X.prev===W){var ve=X;X=W,W=ve}for(var Je=0,ot=W.rings.length;Je<ot;Je++){var Qe=W.rings[Je],ir=W.windings[Je],mr=X.rings.indexOf(Qe);mr===-1?(X.rings.push(Qe),X.windings.push(ir)):X.windings[mr]+=ir}W.rings=null,W.windings=null,W.consumedBy=X,W.leftSE.consumedBy=X.leftSE,W.rightSE.consumedBy=X.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var k=this.prev.consumedBy||this.prev;this._beforeState=k.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var k=this.beforeState();this._afterState={rings:k.rings.slice(0),windings:k.windings.slice(0),multiPolys:[]};for(var X=this._afterState.rings,W=this._afterState.windings,ae=this._afterState.multiPolys,Be=0,ve=this.rings.length;Be<ve;Be++){var Je=this.rings[Be],ot=this.windings[Be],Qe=X.indexOf(Je);Qe===-1?(X.push(Je),W.push(ot)):W[Qe]+=ot}for(var ir=[],mr=[],Ar=0,Er=X.length;Ar<Er;Ar++)if(W[Ar]!==0){var Zt=X[Ar],Tr=Zt.poly;if(mr.indexOf(Tr)===-1)if(Zt.isExterior)ir.push(Tr);else{mr.indexOf(Tr)===-1&&mr.push(Tr);var pn=ir.indexOf(Zt.poly);pn!==-1&&ir.splice(pn,1)}}for(var un=0,Zn=ir.length;un<Zn;un++){var Cr=ir[un].multiPoly;ae.indexOf(Cr)===-1&&ae.push(Cr)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var k=this.beforeState().multiPolys,X=this.afterState().multiPolys;switch(wt.type){case"union":{var W=k.length===0,ae=X.length===0;this._isInResult=W!==ae;break}case"intersection":{var Be,ve;k.length<X.length?(Be=k.length,ve=X.length):(Be=X.length,ve=k.length),this._isInResult=ve===wt.numMultiPolys&&Be<ve;break}case"xor":{var Je=Math.abs(k.length-X.length);this._isInResult=Je%2===1;break}case"difference":{var ot=function(ir){return ir.length===1&&ir[0].isSubject};this._isInResult=ot(k)!==ot(X);break}default:throw new Error("Unrecognized operation type found ".concat(wt.type))}return this._isInResult}}],[{key:"fromRing",value:function(k,X,W){var ae,Be,ve,Je=Pe.comparePoints(k,X);if(Je<0)ae=k,Be=X,ve=1;else if(Je>0)ae=X,Be=k,ve=-1;else throw new Error("Tried to create degenerate segment at [".concat(k.x,", ").concat(k.y,"]"));var ot=new Pe(ae,!0),Qe=new Pe(Be,!1);return new G(ot,Qe,[W],[ve])}}]),G}(),ft=function(){function G(O,k,X){if(M(this,G),!Array.isArray(O)||O.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=k,this.isExterior=X,this.segments=[],typeof O[0][0]!="number"||typeof O[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var W=De.round(O[0][0],O[0][1]);this.bbox={ll:{x:W.x,y:W.y},ur:{x:W.x,y:W.y}};for(var ae=W,Be=1,ve=O.length;Be<ve;Be++){if(typeof O[Be][0]!="number"||typeof O[Be][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Je=De.round(O[Be][0],O[Be][1]);Je.x===ae.x&&Je.y===ae.y||(this.segments.push(lt.fromRing(ae,Je,this)),Je.x<this.bbox.ll.x&&(this.bbox.ll.x=Je.x),Je.y<this.bbox.ll.y&&(this.bbox.ll.y=Je.y),Je.x>this.bbox.ur.x&&(this.bbox.ur.x=Je.x),Je.y>this.bbox.ur.y&&(this.bbox.ur.y=Je.y),ae=Je)}(W.x!==ae.x||W.y!==ae.y)&&this.segments.push(lt.fromRing(ae,W,this))}return K(G,[{key:"getSweepEvents",value:function(){for(var k=[],X=0,W=this.segments.length;X<W;X++){var ae=this.segments[X];k.push(ae.leftSE),k.push(ae.rightSE)}return k}}]),G}(),It=function(){function G(O,k){if(M(this,G),!Array.isArray(O))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ft(O[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var X=1,W=O.length;X<W;X++){var ae=new ft(O[X],this,!1);ae.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ae.bbox.ll.x),ae.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ae.bbox.ll.y),ae.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ae.bbox.ur.x),ae.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ae.bbox.ur.y),this.interiorRings.push(ae)}this.multiPoly=k}return K(G,[{key:"getSweepEvents",value:function(){for(var k=this.exteriorRing.getSweepEvents(),X=0,W=this.interiorRings.length;X<W;X++)for(var ae=this.interiorRings[X].getSweepEvents(),Be=0,ve=ae.length;Be<ve;Be++)k.push(ae[Be]);return k}}]),G}(),fe=function(){function G(O,k){if(M(this,G),!Array.isArray(O))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof O[0][0][0]=="number"&&(O=[O])}catch(Be){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var X=0,W=O.length;X<W;X++){var ae=new It(O[X],this);ae.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ae.bbox.ll.x),ae.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ae.bbox.ll.y),ae.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ae.bbox.ur.x),ae.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ae.bbox.ur.y),this.polys.push(ae)}this.isSubject=k}return K(G,[{key:"getSweepEvents",value:function(){for(var k=[],X=0,W=this.polys.length;X<W;X++)for(var ae=this.polys[X].getSweepEvents(),Be=0,ve=ae.length;Be<ve;Be++)k.push(ae[Be]);return k}}]),G}(),_t=function(){K(G,null,[{key:"factory",value:function(k){for(var X=[],W=0,ae=k.length;W<ae;W++){var Be=k[W];if(!(!Be.isInResult()||Be.ringOut)){for(var ve=null,Je=Be.leftSE,ot=Be.rightSE,Qe=[Je],ir=Je.point,mr=[];ve=Je,Je=ot,Qe.push(Je),Je.point!==ir;)for(;;){var Ar=Je.getAvailableLinkedEvents();if(Ar.length===0){var Er=Qe[0].point,Zt=Qe[Qe.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Er.x,",")+" ".concat(Er.y,"]. Last matching segment found ends at")+" [".concat(Zt.x,", ").concat(Zt.y,"]."))}if(Ar.length===1){ot=Ar[0].otherSE;break}for(var Tr=null,pn=0,un=mr.length;pn<un;pn++)if(mr[pn].point===Je.point){Tr=pn;break}if(Tr!==null){var Zn=mr.splice(Tr)[0],Cr=Qe.splice(Zn.index);Cr.unshift(Cr[0].otherSE),X.push(new G(Cr.reverse()));continue}mr.push({index:Qe.length,point:Je.point});var Nr=Je.getLeftmostComparator(ve);ot=Ar.sort(Nr)[0].otherSE;break}X.push(new G(Qe))}}return X}}]);function G(O){M(this,G),this.events=O;for(var k=0,X=O.length;k<X;k++)O[k].segment.ringOut=this;this.poly=null}return K(G,[{key:"getGeom",value:function(){for(var k=this.events[0].point,X=[k],W=1,ae=this.events.length-1;W<ae;W++){var Be=this.events[W].point,ve=this.events[W+1].point;ce(Be,k,ve)!==0&&(X.push(Be),k=Be)}if(X.length===1)return null;var Je=X[0],ot=X[1];ce(Je,k,ot)===0&&X.shift(),X.push(X[0]);for(var Qe=this.isExteriorRing()?1:-1,ir=this.isExteriorRing()?0:X.length-1,mr=this.isExteriorRing()?X.length:-1,Ar=[],Er=ir;Er!=mr;Er+=Qe)Ar.push([X[Er].x,X[Er].y]);return Ar}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var k=this.enclosingRing();this._isExteriorRing=k?!k.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var k=this.events[0],X=1,W=this.events.length;X<W;X++){var ae=this.events[X];Pe.compare(k,ae)>0&&(k=ae)}for(var Be=k.segment.prevInResult(),ve=Be?Be.prevInResult():null;;){if(!Be)return null;if(!ve)return Be.ringOut;if(ve.ringOut!==Be.ringOut)return ve.ringOut.enclosingRing()!==Be.ringOut?Be.ringOut:Be.ringOut.enclosingRing();Be=ve.prevInResult(),ve=Be?Be.prevInResult():null}}}]),G}(),Ye=function(){function G(O){M(this,G),this.exteriorRing=O,O.poly=this,this.interiorRings=[]}return K(G,[{key:"addInterior",value:function(k){this.interiorRings.push(k),k.poly=this}},{key:"getGeom",value:function(){var k=[this.exteriorRing.getGeom()];if(k[0]===null)return null;for(var X=0,W=this.interiorRings.length;X<W;X++){var ae=this.interiorRings[X].getGeom();ae!==null&&k.push(ae)}return k}}]),G}(),Ot=function(){function G(O){M(this,G),this.rings=O,this.polys=this._composePolys(O)}return K(G,[{key:"getGeom",value:function(){for(var k=[],X=0,W=this.polys.length;X<W;X++){var ae=this.polys[X].getGeom();ae!==null&&k.push(ae)}return k}},{key:"_composePolys",value:function(k){for(var X=[],W=0,ae=k.length;W<ae;W++){var Be=k[W];if(!Be.poly)if(Be.isExteriorRing())X.push(new Ye(Be));else{var ve=Be.enclosingRing();ve.poly||X.push(new Ye(ve)),ve.poly.addInterior(Be)}}return X}}]),G}(),mt=function(){function G(O){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lt.compare;M(this,G),this.queue=O,this.tree=new We(k),this.segments=[]}return K(G,[{key:"process",value:function(k){var X=k.segment,W=[];if(k.consumedBy)return k.isLeft?this.queue.remove(k.otherSE):this.tree.remove(X),W;var ae=k.isLeft?this.tree.insert(X):this.tree.find(X);if(!ae)throw new Error("Unable to find segment #".concat(X.id," ")+"[".concat(X.leftSE.point.x,", ").concat(X.leftSE.point.y,"] -> ")+"[".concat(X.rightSE.point.x,", ").concat(X.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Be=ae,ve=ae,Je=void 0,ot=void 0;Je===void 0;)Be=this.tree.prev(Be),Be===null?Je=null:Be.key.consumedBy===void 0&&(Je=Be.key);for(;ot===void 0;)ve=this.tree.next(ve),ve===null?ot=null:ve.key.consumedBy===void 0&&(ot=ve.key);if(k.isLeft){var Qe=null;if(Je){var ir=Je.getIntersection(X);if(ir!==null&&(X.isAnEndpoint(ir)||(Qe=ir),!Je.isAnEndpoint(ir)))for(var mr=this._splitSafely(Je,ir),Ar=0,Er=mr.length;Ar<Er;Ar++)W.push(mr[Ar])}var Zt=null;if(ot){var Tr=ot.getIntersection(X);if(Tr!==null&&(X.isAnEndpoint(Tr)||(Zt=Tr),!ot.isAnEndpoint(Tr)))for(var pn=this._splitSafely(ot,Tr),un=0,Zn=pn.length;un<Zn;un++)W.push(pn[un])}if(Qe!==null||Zt!==null){var Cr=null;if(Qe===null)Cr=Zt;else if(Zt===null)Cr=Qe;else{var Nr=Pe.comparePoints(Qe,Zt);Cr=Nr<=0?Qe:Zt}this.queue.remove(X.rightSE),W.push(X.rightSE);for(var bt=X.split(Cr),jn=0,Pt=bt.length;jn<Pt;jn++)W.push(bt[jn])}W.length>0?(this.tree.remove(X),W.push(k)):(this.segments.push(X),X.prev=Je)}else{if(Je&&ot){var zt=Je.getIntersection(ot);if(zt!==null){if(!Je.isAnEndpoint(zt))for(var Qt=this._splitSafely(Je,zt),dr=0,_r=Qt.length;dr<_r;dr++)W.push(Qt[dr]);if(!ot.isAnEndpoint(zt))for(var Hr=this._splitSafely(ot,zt),Qr=0,fr=Hr.length;Qr<fr;Qr++)W.push(Hr[Qr])}}this.tree.remove(X)}return W}},{key:"_splitSafely",value:function(k,X){this.tree.remove(k);var W=k.rightSE;this.queue.remove(W);var ae=k.split(X);return ae.push(W),k.consumedBy===void 0&&this.tree.insert(k),ae}}]),G}(),Rt=typeof v!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,pt=typeof v!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Ge=function(){function G(){M(this,G)}return K(G,[{key:"run",value:function(k,X,W){wt.type=k,De.reset();for(var ae=[new fe(X,!0)],Be=0,ve=W.length;Be<ve;Be++)ae.push(new fe(W[Be],!1));if(wt.numMultiPolys=ae.length,wt.type==="difference")for(var Je=ae[0],ot=1;ot<ae.length;)jt(ae[ot].bbox,Je.bbox)!==null?ot++:ae.splice(ot,1);if(wt.type==="intersection"){for(var Qe=0,ir=ae.length;Qe<ir;Qe++)for(var mr=ae[Qe],Ar=Qe+1,Er=ae.length;Ar<Er;Ar++)if(jt(mr.bbox,ae[Ar].bbox)===null)return[]}for(var Zt=new We(Pe.compare),Tr=0,pn=ae.length;Tr<pn;Tr++)for(var un=ae[Tr].getSweepEvents(),Zn=0,Cr=un.length;Zn<Cr;Zn++)if(Zt.insert(un[Zn]),Zt.size>Rt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Nr=new mt(Zt),bt=Zt.size,jn=Zt.pop();jn;){var Pt=jn.key;if(Zt.size===bt){var zt=Pt.segment;throw new Error("Unable to pop() ".concat(Pt.isLeft?"left":"right"," SweepEvent ")+"[".concat(Pt.point.x,", ").concat(Pt.point.y,"] from segment #").concat(zt.id," ")+"[".concat(zt.leftSE.point.x,", ").concat(zt.leftSE.point.y,"] -> ")+"[".concat(zt.rightSE.point.x,", ").concat(zt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Zt.size>Rt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Nr.segments.length>pt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Qt=Nr.process(Pt),dr=0,_r=Qt.length;dr<_r;dr++){var Hr=Qt[dr];Hr.consumedBy===void 0&&Zt.insert(Hr)}bt=Zt.size,jn=Zt.pop()}De.reset();var Qr=_t.factory(Nr.segments),fr=new Ot(Qr);return fr.getGeom()}}]),G}(),wt=new Ge,ee=function(O){for(var k=arguments.length,X=new Array(k>1?k-1:0),W=1;W<k;W++)X[W-1]=arguments[W];return wt.run("union",O,X)},Re=function(O){for(var k=arguments.length,X=new Array(k>1?k-1:0),W=1;W<k;W++)X[W-1]=arguments[W];return wt.run("intersection",O,X)},dt=function(O){for(var k=arguments.length,X=new Array(k>1?k-1:0),W=1;W<k;W++)X[W-1]=arguments[W];return wt.run("xor",O,X)},D=function(O){for(var k=arguments.length,X=new Array(k>1?k-1:0),W=1;W<k;W++)X[W-1]=arguments[W];return wt.run("difference",O,X)},q={union:ee,intersection:Re,xor:dt,difference:D};return q})},34155:function(vt){var Ee=vt.exports={},g,v;function M(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?g=setTimeout:g=M}catch(Le){g=M}try{typeof clearTimeout=="function"?v=clearTimeout:v=c}catch(Le){v=c}})();function K(Le){if(g===setTimeout)return setTimeout(Le,0);if((g===M||!g)&&setTimeout)return g=setTimeout,setTimeout(Le,0);try{return g(Le,0)}catch(Se){try{return g.call(null,Le,0)}catch(et){return g.call(this,Le,0)}}}function N(Le){if(v===clearTimeout)return clearTimeout(Le);if((v===c||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(Le);try{return v(Le)}catch(Se){try{return v.call(null,Le)}catch(et){return v.call(this,Le)}}}var Z=[],B=!1,L,$=-1;function U(){!B||!L||(B=!1,L.length?Z=L.concat(Z):$=-1,Z.length&&ke())}function ke(){if(!B){var Le=K(U);B=!0;for(var Se=Z.length;Se;){for(L=Z,Z=[];++$<Se;)L&&L[$].run();$=-1,Se=Z.length}L=null,B=!1,N(Le)}}Ee.nextTick=function(Le){var Se=new Array(arguments.length-1);if(arguments.length>1)for(var et=1;et<arguments.length;et++)Se[et-1]=arguments[et];Z.push(new We(Le,Se)),Z.length===1&&!B&&K(ke)};function We(Le,Se){this.fun=Le,this.array=Se}We.prototype.run=function(){this.fun.apply(null,this.array)},Ee.title="browser",Ee.browser=!0,Ee.env={},Ee.argv=[],Ee.version="",Ee.versions={};function me(){}Ee.on=me,Ee.addListener=me,Ee.once=me,Ee.off=me,Ee.removeListener=me,Ee.removeAllListeners=me,Ee.emit=me,Ee.prependListener=me,Ee.prependOnceListener=me,Ee.listeners=function(Le){return[]},Ee.binding=function(Le){throw new Error("process.binding is not supported")},Ee.cwd=function(){return"/"},Ee.chdir=function(Le){throw new Error("process.chdir is not supported")},Ee.umask=function(){return 0}},50132:function(vt,Ee,g){"use strict";var v=g(87462),M=g(4942),c=g(91),K=g(1413),N=g(15671),Z=g(43144),B=g(60136),L=g(29388),$=g(67294),U=g(94184),ke=g.n(U),We=function(me){(0,B.Z)(Se,me);var Le=(0,L.Z)(Se);function Se(et){var at;(0,N.Z)(this,Se),at=Le.call(this,et),at.handleChange=function(Et){var jt=at.props,pe=jt.disabled,$e=jt.onChange;pe||("checked"in at.props||at.setState({checked:Et.target.checked}),$e&&$e({target:(0,K.Z)((0,K.Z)({},at.props),{},{checked:Et.target.checked}),stopPropagation:function(){Et.stopPropagation()},preventDefault:function(){Et.preventDefault()},nativeEvent:Et.nativeEvent}))},at.saveInput=function(Et){at.input=Et};var Lt="checked"in et?et.checked:et.defaultChecked;return at.state={checked:Lt},at}return(0,Z.Z)(Se,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var at,Lt=this.props,Et=Lt.prefixCls,jt=Lt.className,pe=Lt.style,$e=Lt.name,ye=Lt.id,ie=Lt.type,re=Lt.disabled,De=Lt.readOnly,le=Lt.tabIndex,ge=Lt.onClick,ce=Lt.onFocus,je=Lt.onBlur,J=Lt.onKeyDown,Me=Lt.onKeyPress,ne=Lt.onKeyUp,xe=Lt.autoFocus,Ne=Lt.value,Pe=Lt.required,He=(0,c.Z)(Lt,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),lt=Object.keys(He).reduce(function(fe,_t){return(_t.substr(0,5)==="aria-"||_t.substr(0,5)==="data-"||_t==="role")&&(fe[_t]=He[_t]),fe},{}),ft=this.state.checked,It=ke()(Et,jt,(at={},(0,M.Z)(at,"".concat(Et,"-checked"),ft),(0,M.Z)(at,"".concat(Et,"-disabled"),re),at));return $.createElement("span",{className:It,style:pe},$.createElement("input",(0,v.Z)({name:$e,id:ye,type:ie,required:Pe,readOnly:De,disabled:re,tabIndex:le,className:"".concat(Et,"-input"),checked:!!ft,onClick:ge,onFocus:ce,onBlur:je,onKeyUp:ne,onKeyDown:J,onKeyPress:Me,onChange:this.handleChange,autoFocus:xe,ref:this.saveInput,value:Ne},lt)),$.createElement("span",{className:"".concat(Et,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(at,Lt){return"checked"in at?(0,K.Z)((0,K.Z)({},Lt),{},{checked:at.checked}):null}}]),Se}($.Component);We.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},Ee.Z=We},24407:function(vt,Ee,g){"use strict";g.d(Ee,{zb:function(){return at},RV:function(){return ou}});var v=g(67294),M=g(87462),c=g(91),K=g(4942),N=g(1413),Z=g(74902),B=g(15671),L=g(43144),$=g(97326),U=g(60136),ke=g(29388),We=g(50344),me=g(80334),Le="RC_FORM_INTERNAL_HOOKS",Se=function(){(0,me.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},et=v.createContext({getFieldValue:Se,getFieldsValue:Se,getFieldError:Se,getFieldWarning:Se,getFieldsError:Se,isFieldsTouched:Se,isFieldTouched:Se,isFieldValidating:Se,isFieldsValidating:Se,resetFields:Se,setFields:Se,setFieldValue:Se,setFieldsValue:Se,validateFields:Se,submit:Se,getInternalHooks:function(){return Se(),{dispatch:Se,initEntityValue:Se,registerField:Se,useSubscribe:Se,setInitialValues:Se,destroyForm:Se,setCallbacks:Se,registerWatch:Se,getFields:Se,setValidateMessages:Se,setPreserve:Se,getInitialValue:Se}}}),at=et;function Lt(Vr){return Vr==null?[]:Array.isArray(Vr)?Vr:[Vr]}var Et=g(74165),jt=g(15861),pe=g(34155);function $e(){return $e=Object.assign?Object.assign.bind():function(Vr){for(var cr=1;cr<arguments.length;cr++){var ht=arguments[cr];for(var ur in ht)Object.prototype.hasOwnProperty.call(ht,ur)&&(Vr[ur]=ht[ur])}return Vr},$e.apply(this,arguments)}function ye(Vr,cr){Vr.prototype=Object.create(cr.prototype),Vr.prototype.constructor=Vr,re(Vr,cr)}function ie(Vr){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ht){return ht.__proto__||Object.getPrototypeOf(ht)},ie(Vr)}function re(Vr,cr){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ur,er){return ur.__proto__=er,ur},re(Vr,cr)}function De(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Vr){return!1}}function le(Vr,cr,ht){return De()?le=Reflect.construct.bind():le=function(er,sn,fn){var Vn=[null];Vn.push.apply(Vn,sn);var ni=Function.bind.apply(er,Vn),oi=new ni;return fn&&re(oi,fn.prototype),oi},le.apply(null,arguments)}function ge(Vr){return Function.toString.call(Vr).indexOf("[native code]")!==-1}function ce(Vr){var cr=typeof Map=="function"?new Map:void 0;return ce=function(ur){if(ur===null||!ge(ur))return ur;if(typeof ur!="function")throw new TypeError("Super expression must either be null or a function");if(typeof cr!="undefined"){if(cr.has(ur))return cr.get(ur);cr.set(ur,er)}function er(){return le(ur,arguments,ie(this).constructor)}return er.prototype=Object.create(ur.prototype,{constructor:{value:er,enumerable:!1,writable:!0,configurable:!0}}),re(er,ur)},ce(Vr)}var je=/%[sdj%]/g,J=function(){};function Me(Vr){if(!Vr||!Vr.length)return null;var cr={};return Vr.forEach(function(ht){var ur=ht.field;cr[ur]=cr[ur]||[],cr[ur].push(ht)}),cr}function ne(Vr){for(var cr=arguments.length,ht=new Array(cr>1?cr-1:0),ur=1;ur<cr;ur++)ht[ur-1]=arguments[ur];var er=0,sn=ht.length;if(typeof Vr=="function")return Vr.apply(null,ht);if(typeof Vr=="string"){var fn=Vr.replace(je,function(Vn){if(Vn==="%%")return"%";if(er>=sn)return Vn;switch(Vn){case"%s":return String(ht[er++]);case"%d":return Number(ht[er++]);case"%j":try{return JSON.stringify(ht[er++])}catch(ni){return"[Circular]"}break;default:return Vn}});return fn}return Vr}function xe(Vr){return Vr==="string"||Vr==="url"||Vr==="hex"||Vr==="email"||Vr==="date"||Vr==="pattern"}function Ne(Vr,cr){return!!(Vr==null||cr==="array"&&Array.isArray(Vr)&&!Vr.length||xe(cr)&&typeof Vr=="string"&&!Vr)}function Pe(Vr,cr,ht){var ur=[],er=0,sn=Vr.length;function fn(Vn){ur.push.apply(ur,Vn||[]),er++,er===sn&&ht(ur)}Vr.forEach(function(Vn){cr(Vn,fn)})}function He(Vr,cr,ht){var ur=0,er=Vr.length;function sn(fn){if(fn&&fn.length){ht(fn);return}var Vn=ur;ur=ur+1,Vn<er?cr(Vr[Vn],sn):ht([])}sn([])}function lt(Vr){var cr=[];return Object.keys(Vr).forEach(function(ht){cr.push.apply(cr,Vr[ht]||[])}),cr}var ft=function(Vr){ye(cr,Vr);function cr(ht,ur){var er;return er=Vr.call(this,"Async Validation Error")||this,er.errors=ht,er.fields=ur,er}return cr}(ce(Error));function It(Vr,cr,ht,ur,er){if(cr.first){var sn=new Promise(function(Pr,Cn){var ln=function(bi){return ur(bi),bi.length?Cn(new ft(bi,Me(bi))):Pr(er)},bn=lt(Vr);He(bn,ht,ln)});return sn.catch(function(Pr){return Pr}),sn}var fn=cr.firstFields===!0?Object.keys(Vr):cr.firstFields||[],Vn=Object.keys(Vr),ni=Vn.length,oi=0,Ei=[],qi=new Promise(function(Pr,Cn){var ln=function(Kn){if(Ei.push.apply(Ei,Kn),oi++,oi===ni)return ur(Ei),Ei.length?Cn(new ft(Ei,Me(Ei))):Pr(er)};Vn.length||(ur(Ei),Pr(er)),Vn.forEach(function(bn){var Kn=Vr[bn];fn.indexOf(bn)!==-1?He(Kn,ht,ln):Pe(Kn,ht,ln)})});return qi.catch(function(Pr){return Pr}),qi}function fe(Vr){return!!(Vr&&Vr.message!==void 0)}function _t(Vr,cr){for(var ht=Vr,ur=0;ur<cr.length;ur++){if(ht==null)return ht;ht=ht[cr[ur]]}return ht}function Ye(Vr,cr){return function(ht){var ur;return Vr.fullFields?ur=_t(cr,Vr.fullFields):ur=cr[ht.field||Vr.fullField],fe(ht)?(ht.field=ht.field||Vr.fullField,ht.fieldValue=ur,ht):{message:typeof ht=="function"?ht():ht,fieldValue:ur,field:ht.field||Vr.fullField}}}function Ot(Vr,cr){if(cr){for(var ht in cr)if(cr.hasOwnProperty(ht)){var ur=cr[ht];typeof ur=="object"&&typeof Vr[ht]=="object"?Vr[ht]=$e({},Vr[ht],ur):Vr[ht]=ur}}return Vr}var mt=function(cr,ht,ur,er,sn,fn){cr.required&&(!ur.hasOwnProperty(cr.field)||Ne(ht,fn||cr.type))&&er.push(ne(sn.messages.required,cr.fullField))},Rt=function(cr,ht,ur,er,sn){(/^\s+$/.test(ht)||ht==="")&&er.push(ne(sn.messages.whitespace,cr.fullField))},pt,Ge=function(){if(pt)return pt;var Vr="[a-fA-F\\d:]",cr=function(aa){return aa&&aa.includeBoundaries?"(?:(?<=\\s|^)(?="+Vr+")|(?<="+Vr+")(?=\\s|$))":""},ht="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ur="[a-fA-F\\d]{1,4}",er=(`
(?:
(?:`+ur+":){7}(?:"+ur+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+ur+":){6}(?:"+ht+"|:"+ur+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+ur+":){5}(?::"+ht+"|(?::"+ur+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+ur+":){4}(?:(?::"+ur+"){0,1}:"+ht+"|(?::"+ur+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+ur+":){3}(?:(?::"+ur+"){0,2}:"+ht+"|(?::"+ur+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+ur+":){2}(?:(?::"+ur+"){0,3}:"+ht+"|(?::"+ur+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+ur+":){1}(?:(?::"+ur+"){0,4}:"+ht+"|(?::"+ur+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+ur+"){0,5}:"+ht+"|(?::"+ur+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),sn=new RegExp("(?:^"+ht+"$)|(?:^"+er+"$)"),fn=new RegExp("^"+ht+"$"),Vn=new RegExp("^"+er+"$"),ni=function(aa){return aa&&aa.exact?sn:new RegExp("(?:"+cr(aa)+ht+cr(aa)+")|(?:"+cr(aa)+er+cr(aa)+")","g")};ni.v4=function(Gi){return Gi&&Gi.exact?fn:new RegExp(""+cr(Gi)+ht+cr(Gi),"g")},ni.v6=function(Gi){return Gi&&Gi.exact?Vn:new RegExp(""+cr(Gi)+er+cr(Gi),"g")};var oi="(?:(?:[a-z]+:)?//)",Ei="(?:\\S+(?::\\S*)?@)?",qi=ni.v4().source,Pr=ni.v6().source,Cn="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",ln="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",bn="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",Kn="(?::\\d{2,5})?",bi='(?:[/?#][^\\s"]*)?',Yi="(?:"+oi+"|www\\.)"+Ei+"(?:localhost|"+qi+"|"+Pr+"|"+Cn+ln+bn+")"+Kn+bi;return pt=new RegExp("(?:^"+Yi+"$)","i"),pt},wt={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ee={integer:function(cr){return ee.number(cr)&&parseInt(cr,10)===cr},float:function(cr){return ee.number(cr)&&!ee.integer(cr)},array:function(cr){return Array.isArray(cr)},regexp:function(cr){if(cr instanceof RegExp)return!0;try{return!!new RegExp(cr)}catch(ht){return!1}},date:function(cr){return typeof cr.getTime=="function"&&typeof cr.getMonth=="function"&&typeof cr.getYear=="function"&&!isNaN(cr.getTime())},number:function(cr){return isNaN(cr)?!1:typeof cr=="number"},object:function(cr){return typeof cr=="object"&&!ee.array(cr)},method:function(cr){return typeof cr=="function"},email:function(cr){return typeof cr=="string"&&cr.length<=320&&!!cr.match(wt.email)},url:function(cr){return typeof cr=="string"&&cr.length<=2048&&!!cr.match(Ge())},hex:function(cr){return typeof cr=="string"&&!!cr.match(wt.hex)}},Re=function(cr,ht,ur,er,sn){if(cr.required&&ht===void 0){mt(cr,ht,ur,er,sn);return}var fn=["integer","float","array","regexp","object","method","email","number","date","url","hex"],Vn=cr.type;fn.indexOf(Vn)>-1?ee[Vn](ht)||er.push(ne(sn.messages.types[Vn],cr.fullField,cr.type)):Vn&&typeof ht!==cr.type&&er.push(ne(sn.messages.types[Vn],cr.fullField,cr.type))},dt=function(cr,ht,ur,er,sn){var fn=typeof cr.len=="number",Vn=typeof cr.min=="number",ni=typeof cr.max=="number",oi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ei=ht,qi=null,Pr=typeof ht=="number",Cn=typeof ht=="string",ln=Array.isArray(ht);if(Pr?qi="number":Cn?qi="string":ln&&(qi="array"),!qi)return!1;ln&&(Ei=ht.length),Cn&&(Ei=ht.replace(oi,"_").length),fn?Ei!==cr.len&&er.push(ne(sn.messages[qi].len,cr.fullField,cr.len)):Vn&&!ni&&Ei<cr.min?er.push(ne(sn.messages[qi].min,cr.fullField,cr.min)):ni&&!Vn&&Ei>cr.max?er.push(ne(sn.messages[qi].max,cr.fullField,cr.max)):Vn&&ni&&(Ei<cr.min||Ei>cr.max)&&er.push(ne(sn.messages[qi].range,cr.fullField,cr.min,cr.max))},D="enum",q=function(cr,ht,ur,er,sn){cr[D]=Array.isArray(cr[D])?cr[D]:[],cr[D].indexOf(ht)===-1&&er.push(ne(sn.messages[D],cr.fullField,cr[D].join(", ")))},G=function(cr,ht,ur,er,sn){if(cr.pattern){if(cr.pattern instanceof RegExp)cr.pattern.lastIndex=0,cr.pattern.test(ht)||er.push(ne(sn.messages.pattern.mismatch,cr.fullField,ht,cr.pattern));else if(typeof cr.pattern=="string"){var fn=new RegExp(cr.pattern);fn.test(ht)||er.push(ne(sn.messages.pattern.mismatch,cr.fullField,ht,cr.pattern))}}},O={required:mt,whitespace:Rt,type:Re,range:dt,enum:q,pattern:G},k=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht,"string")&&!cr.required)return ur();O.required(cr,ht,er,fn,sn,"string"),Ne(ht,"string")||(O.type(cr,ht,er,fn,sn),O.range(cr,ht,er,fn,sn),O.pattern(cr,ht,er,fn,sn),cr.whitespace===!0&&O.whitespace(cr,ht,er,fn,sn))}ur(fn)},X=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&O.type(cr,ht,er,fn,sn)}ur(fn)},W=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(ht===""&&(ht=void 0),Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&(O.type(cr,ht,er,fn,sn),O.range(cr,ht,er,fn,sn))}ur(fn)},ae=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&O.type(cr,ht,er,fn,sn)}ur(fn)},Be=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),Ne(ht)||O.type(cr,ht,er,fn,sn)}ur(fn)},ve=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&(O.type(cr,ht,er,fn,sn),O.range(cr,ht,er,fn,sn))}ur(fn)},Je=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&(O.type(cr,ht,er,fn,sn),O.range(cr,ht,er,fn,sn))}ur(fn)},ot=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(ht==null&&!cr.required)return ur();O.required(cr,ht,er,fn,sn,"array"),ht!=null&&(O.type(cr,ht,er,fn,sn),O.range(cr,ht,er,fn,sn))}ur(fn)},Qe=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&O.type(cr,ht,er,fn,sn)}ur(fn)},ir="enum",mr=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),ht!==void 0&&O[ir](cr,ht,er,fn,sn)}ur(fn)},Ar=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht,"string")&&!cr.required)return ur();O.required(cr,ht,er,fn,sn),Ne(ht,"string")||O.pattern(cr,ht,er,fn,sn)}ur(fn)},Er=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht,"date")&&!cr.required)return ur();if(O.required(cr,ht,er,fn,sn),!Ne(ht,"date")){var ni;ht instanceof Date?ni=ht:ni=new Date(ht),O.type(cr,ni,er,fn,sn),ni&&O.range(cr,ni.getTime(),er,fn,sn)}}ur(fn)},Zt=function(cr,ht,ur,er,sn){var fn=[],Vn=Array.isArray(ht)?"array":typeof ht;O.required(cr,ht,er,fn,sn,Vn),ur(fn)},Tr=function(cr,ht,ur,er,sn){var fn=cr.type,Vn=[],ni=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(ni){if(Ne(ht,fn)&&!cr.required)return ur();O.required(cr,ht,er,Vn,sn,fn),Ne(ht,fn)||O.type(cr,ht,er,Vn,sn)}ur(Vn)},pn=function(cr,ht,ur,er,sn){var fn=[],Vn=cr.required||!cr.required&&er.hasOwnProperty(cr.field);if(Vn){if(Ne(ht)&&!cr.required)return ur();O.required(cr,ht,er,fn,sn)}ur(fn)},un={string:k,method:X,number:W,boolean:ae,regexp:Be,integer:ve,float:Je,array:ot,object:Qe,enum:mr,pattern:Ar,date:Er,url:Tr,hex:Tr,email:Tr,required:Zt,any:pn};function Zn(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var cr=JSON.parse(JSON.stringify(this));return cr.clone=this.clone,cr}}}var Cr=Zn(),Nr=function(){function Vr(ht){this.rules=null,this._messages=Cr,this.define(ht)}var cr=Vr.prototype;return cr.define=function(ur){var er=this;if(!ur)throw new Error("Cannot configure a schema with no rules");if(typeof ur!="object"||Array.isArray(ur))throw new Error("Rules must be an object");this.rules={},Object.keys(ur).forEach(function(sn){var fn=ur[sn];er.rules[sn]=Array.isArray(fn)?fn:[fn]})},cr.messages=function(ur){return ur&&(this._messages=Ot(Zn(),ur)),this._messages},cr.validate=function(ur,er,sn){var fn=this;er===void 0&&(er={}),sn===void 0&&(sn=function(){});var Vn=ur,ni=er,oi=sn;if(typeof ni=="function"&&(oi=ni,ni={}),!this.rules||Object.keys(this.rules).length===0)return oi&&oi(null,Vn),Promise.resolve(Vn);function Ei(bn){var Kn=[],bi={};function Yi(aa){if(Array.isArray(aa)){var Ta;Kn=(Ta=Kn).concat.apply(Ta,aa)}else Kn.push(aa)}for(var Gi=0;Gi<bn.length;Gi++)Yi(bn[Gi]);Kn.length?(bi=Me(Kn),oi(Kn,bi)):oi(null,Vn)}if(ni.messages){var qi=this.messages();qi===Cr&&(qi=Zn()),Ot(qi,ni.messages),ni.messages=qi}else ni.messages=this.messages();var Pr={},Cn=ni.keys||Object.keys(this.rules);Cn.forEach(function(bn){var Kn=fn.rules[bn],bi=Vn[bn];Kn.forEach(function(Yi){var Gi=Yi;typeof Gi.transform=="function"&&(Vn===ur&&(Vn=$e({},Vn)),bi=Vn[bn]=Gi.transform(bi)),typeof Gi=="function"?Gi={validator:Gi}:Gi=$e({},Gi),Gi.validator=fn.getValidationMethod(Gi),Gi.validator&&(Gi.field=bn,Gi.fullField=Gi.fullField||bn,Gi.type=fn.getType(Gi),Pr[bn]=Pr[bn]||[],Pr[bn].push({rule:Gi,value:bi,source:Vn,field:bn}))})});var ln={};return It(Pr,ni,function(bn,Kn){var bi=bn.rule,Yi=(bi.type==="object"||bi.type==="array")&&(typeof bi.fields=="object"||typeof bi.defaultField=="object");Yi=Yi&&(bi.required||!bi.required&&bn.value),bi.field=bn.field;function Gi(R,_e){return $e({},_e,{fullField:bi.fullField+"."+R,fullFields:bi.fullFields?[].concat(bi.fullFields,[R]):[R]})}function aa(R){R===void 0&&(R=[]);var _e=Array.isArray(R)?R:[R];!ni.suppressWarning&&_e.length&&Vr.warning("async-validator:",_e),_e.length&&bi.message!==void 0&&(_e=[].concat(bi.message));var At=_e.map(Ye(bi,Vn));if(ni.first&&At.length)return ln[bi.field]=1,Kn(At);if(!Yi)Kn(At);else{if(bi.required&&!bn.value)return bi.message!==void 0?At=[].concat(bi.message).map(Ye(bi,Vn)):ni.error&&(At=[ni.error(bi,ne(ni.messages.required,bi.field))]),Kn(At);var Ke={};bi.defaultField&&Object.keys(bn.value).map(function(Wr){Ke[Wr]=bi.defaultField}),Ke=$e({},Ke,bn.rule.fields);var nr={};Object.keys(Ke).forEach(function(Wr){var In=Ke[Wr],Dn=Array.isArray(In)?In:[In];nr[Wr]=Dn.map(Gi.bind(null,Wr))});var wr=new Vr(nr);wr.messages(ni.messages),bn.rule.options&&(bn.rule.options.messages=ni.messages,bn.rule.options.error=ni.error),wr.validate(bn.value,bn.rule.options||ni,function(Wr){var In=[];At&&At.length&&In.push.apply(In,At),Wr&&Wr.length&&In.push.apply(In,Wr),Kn(In.length?In:null)})}}var Ta;if(bi.asyncValidator)Ta=bi.asyncValidator(bi,bn.value,aa,bn.source,ni);else if(bi.validator){try{Ta=bi.validator(bi,bn.value,aa,bn.source,ni)}catch(R){console.error==null||console.error(R),ni.suppressValidatorError||setTimeout(function(){throw R},0),aa(R.message)}Ta===!0?aa():Ta===!1?aa(typeof bi.message=="function"?bi.message(bi.fullField||bi.field):bi.message||(bi.fullField||bi.field)+" fails"):Ta instanceof Array?aa(Ta):Ta instanceof Error&&aa(Ta.message)}Ta&&Ta.then&&Ta.then(function(){return aa()},function(R){return aa(R)})},function(bn){Ei(bn)},Vn)},cr.getType=function(ur){if(ur.type===void 0&&ur.pattern instanceof RegExp&&(ur.type="pattern"),typeof ur.validator!="function"&&ur.type&&!un.hasOwnProperty(ur.type))throw new Error(ne("Unknown rule type %s",ur.type));return ur.type||"string"},cr.getValidationMethod=function(ur){if(typeof ur.validator=="function")return ur.validator;var er=Object.keys(ur),sn=er.indexOf("message");return sn!==-1&&er.splice(sn,1),er.length===1&&er[0]==="required"?un.required:un[this.getType(ur)]||void 0},Vr}();Nr.register=function(cr,ht){if(typeof ht!="function")throw new Error("Cannot register a validator by type, validator is not a function");un[cr]=ht},Nr.warning=J,Nr.messages=Cr,Nr.validators=un;var bt="'${name}' is not a valid ${type}",jn={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:bt,method:bt,array:bt,object:bt,number:bt,date:bt,boolean:bt,integer:bt,float:bt,regexp:bt,email:bt,url:bt,hex:bt},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Pt=g(71002),zt=g(88306),Qt=g(84506);function dr(Vr,cr,ht,ur){if(!cr.length)return ht;var er=(0,Qt.Z)(cr),sn=er[0],fn=er.slice(1),Vn;return!Vr&&typeof sn=="number"?Vn=[]:Array.isArray(Vr)?Vn=(0,Z.Z)(Vr):Vn=(0,N.Z)({},Vr),ur&&ht===void 0&&fn.length===1?delete Vn[sn][fn[0]]:Vn[sn]=dr(Vn[sn],fn,ht,ur),Vn}function _r(Vr,cr,ht){var ur=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return cr.length&&ur&&ht===void 0&&!(0,zt.Z)(Vr,cr.slice(0,-1))?Vr:dr(Vr,cr,ht,ur)}function Hr(Vr){return Array.isArray(Vr)?fr(Vr):(0,Pt.Z)(Vr)==="object"&&Vr!==null?Qr(Vr):Vr}function Qr(Vr){if(Object.getPrototypeOf(Vr)===Object.prototype){var cr={};for(var ht in Vr)cr[ht]=Hr(Vr[ht]);return cr}return Vr}function fr(Vr){return Vr.map(function(cr){return Hr(cr)})}var tt=Hr;function Yr(Vr){return Lt(Vr)}function Tn(Vr,cr){var ht=(0,zt.Z)(Vr,cr);return ht}function wn(Vr,cr,ht){var ur=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,er=_r(Vr,cr,ht,ur);return er}function Nn(Vr,cr){var ht={};return cr.forEach(function(ur){var er=Tn(Vr,ur);ht=wn(ht,ur,er)}),ht}function Si(Vr,cr){return Vr&&Vr.some(function(ht){return na(ht,cr)})}function fa(Vr){return(0,Pt.Z)(Vr)==="object"&&Vr!==null&&Object.getPrototypeOf(Vr)===Object.prototype}function Xi(Vr,cr){var ht=Array.isArray(Vr)?(0,Z.Z)(Vr):(0,N.Z)({},Vr);return cr&&Object.keys(cr).forEach(function(ur){var er=ht[ur],sn=cr[ur],fn=fa(er)&&fa(sn);ht[ur]=fn?Xi(er,sn||{}):tt(sn)}),ht}function Ln(Vr){for(var cr=arguments.length,ht=new Array(cr>1?cr-1:0),ur=1;ur<cr;ur++)ht[ur-1]=arguments[ur];return ht.reduce(function(er,sn){return Xi(er,sn)},Vr)}function na(Vr,cr){return!Vr||!cr||Vr.length!==cr.length?!1:Vr.every(function(ht,ur){return cr[ur]===ht})}function xi(Vr,cr){if(Vr===cr)return!0;if(!Vr&&cr||Vr&&!cr||!Vr||!cr||(0,Pt.Z)(Vr)!=="object"||(0,Pt.Z)(cr)!=="object")return!1;var ht=Object.keys(Vr),ur=Object.keys(cr),er=new Set([].concat(ht,ur));return(0,Z.Z)(er).every(function(sn){var fn=Vr[sn],Vn=cr[sn];return typeof fn=="function"&&typeof Vn=="function"?!0:fn===Vn})}function ta(Vr){var cr=arguments.length<=1?void 0:arguments[1];return cr&&cr.target&&(0,Pt.Z)(cr.target)==="object"&&Vr in cr.target?cr.target[Vr]:cr}function La(Vr,cr,ht){var ur=Vr.length;if(cr<0||cr>=ur||ht<0||ht>=ur)return Vr;var er=Vr[cr],sn=cr-ht;return sn>0?[].concat((0,Z.Z)(Vr.slice(0,ht)),[er],(0,Z.Z)(Vr.slice(ht,cr)),(0,Z.Z)(Vr.slice(cr+1,ur))):sn<0?[].concat((0,Z.Z)(Vr.slice(0,cr)),(0,Z.Z)(Vr.slice(cr+1,ht+1)),[er],(0,Z.Z)(Vr.slice(ht+1,ur))):Vr}var Ki=Nr;function jo(Vr,cr){return Vr.replace(/\$\{\w+\}/g,function(ht){var ur=ht.slice(2,-1);return cr[ur]})}var uo="CODE_LOGIC_ERROR";function An(Vr,cr,ht,ur,er){return gn.apply(this,arguments)}function gn(){return gn=(0,jt.Z)((0,Et.Z)().mark(function Vr(cr,ht,ur,er,sn){var fn,Vn,ni,oi,Ei,qi,Pr,Cn,ln;return(0,Et.Z)().wrap(function(Kn){for(;;)switch(Kn.prev=Kn.next){case 0:return fn=(0,N.Z)({},ur),delete fn.ruleIndex,fn.validator&&(Vn=fn.validator,fn.validator=function(){try{return Vn.apply(void 0,arguments)}catch(bi){return console.error(bi),Promise.reject(uo)}}),ni=null,fn&&fn.type==="array"&&fn.defaultField&&(ni=fn.defaultField,delete fn.defaultField),oi=new Ki((0,K.Z)({},cr,[fn])),Ei=Ln({},jn,er.validateMessages),oi.messages(Ei),qi=[],Kn.prev=9,Kn.next=12,Promise.resolve(oi.validate((0,K.Z)({},cr,ht),(0,N.Z)({},er)));case 12:Kn.next=17;break;case 14:Kn.prev=14,Kn.t0=Kn.catch(9),Kn.t0.errors&&(qi=Kn.t0.errors.map(function(bi,Yi){var Gi=bi.message,aa=Gi===uo?Ei.default:Gi;return v.isValidElement(aa)?v.cloneElement(aa,{key:"error_".concat(Yi)}):aa}));case 17:if(!(!qi.length&&ni)){Kn.next=22;break}return Kn.next=20,Promise.all(ht.map(function(bi,Yi){return An("".concat(cr,".").concat(Yi),bi,ni,er,sn)}));case 20:return Pr=Kn.sent,Kn.abrupt("return",Pr.reduce(function(bi,Yi){return[].concat((0,Z.Z)(bi),(0,Z.Z)(Yi))},[]));case 22:return Cn=(0,N.Z)((0,N.Z)({},ur),{},{name:cr,enum:(ur.enum||[]).join(", ")},sn),ln=qi.map(function(bi){return typeof bi=="string"?jo(bi,Cn):bi}),Kn.abrupt("return",ln);case 25:case"end":return Kn.stop()}},Vr,null,[[9,14]])})),gn.apply(this,arguments)}function Oi(Vr,cr,ht,ur,er,sn){var fn=Vr.join("."),Vn=ht.map(function(Ei,qi){var Pr=Ei.validator,Cn=(0,N.Z)((0,N.Z)({},Ei),{},{ruleIndex:qi});return Pr&&(Cn.validator=function(ln,bn,Kn){var bi=!1,Yi=function(){for(var Ta=arguments.length,R=new Array(Ta),_e=0;_e<Ta;_e++)R[_e]=arguments[_e];Promise.resolve().then(function(){(0,me.ZP)(!bi,"Your validator function has already return a promise. `callback` will be ignored."),bi||Kn.apply(void 0,R)})},Gi=Pr(ln,bn,Yi);bi=Gi&&typeof Gi.then=="function"&&typeof Gi.catch=="function",(0,me.ZP)(bi,"`callback` is deprecated. Please return a promise instead."),bi&&Gi.then(function(){Kn()}).catch(function(aa){Kn(aa||" ")})}),Cn}).sort(function(Ei,qi){var Pr=Ei.warningOnly,Cn=Ei.ruleIndex,ln=qi.warningOnly,bn=qi.ruleIndex;return!!Pr==!!ln?Cn-bn:Pr?1:-1}),ni;if(er===!0)ni=new Promise(function(){var Ei=(0,jt.Z)((0,Et.Z)().mark(function qi(Pr,Cn){var ln,bn,Kn;return(0,Et.Z)().wrap(function(Yi){for(;;)switch(Yi.prev=Yi.next){case 0:ln=0;case 1:if(!(ln<Vn.length)){Yi.next=12;break}return bn=Vn[ln],Yi.next=5,An(fn,cr,bn,ur,sn);case 5:if(Kn=Yi.sent,!Kn.length){Yi.next=9;break}return Cn([{errors:Kn,rule:bn}]),Yi.abrupt("return");case 9:ln+=1,Yi.next=1;break;case 12:Pr([]);case 13:case"end":return Yi.stop()}},qi)}));return function(qi,Pr){return Ei.apply(this,arguments)}}());else{var oi=Vn.map(function(Ei){return An(fn,cr,Ei,ur,sn).then(function(qi){return{errors:qi,rule:Ei}})});ni=(er?wa(oi):fi(oi)).then(function(Ei){return Promise.reject(Ei)})}return ni.catch(function(Ei){return Ei}),ni}function fi(Vr){return va.apply(this,arguments)}function va(){return va=(0,jt.Z)((0,Et.Z)().mark(function Vr(cr){return(0,Et.Z)().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return ur.abrupt("return",Promise.all(cr).then(function(er){var sn,fn=(sn=[]).concat.apply(sn,(0,Z.Z)(er));return fn}));case 1:case"end":return ur.stop()}},Vr)})),va.apply(this,arguments)}function wa(Vr){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,jt.Z)((0,Et.Z)().mark(function Vr(cr){var ht;return(0,Et.Z)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return ht=0,er.abrupt("return",new Promise(function(sn){cr.forEach(function(fn){fn.then(function(Vn){Vn.errors.length&&sn([Vn]),ht+=1,ht===cr.length&&sn([])})})}));case 2:case"end":return er.stop()}},Vr)})),Ca.apply(this,arguments)}var Aa=["name"],ma=[];function ka(Vr,cr,ht,ur,er,sn){return typeof Vr=="function"?Vr(cr,ht,"source"in sn?{source:sn.source}:{}):ur!==er}var Uo=function(Vr){(0,U.Z)(ht,Vr);var cr=(0,ke.Z)(ht);function ht(ur){var er;if((0,B.Z)(this,ht),er=cr.call(this,ur),er.state={resetCount:0},er.cancelRegisterFunc=null,er.mounted=!1,er.touched=!1,er.dirty=!1,er.validatePromise=null,er.prevValidating=void 0,er.errors=ma,er.warnings=ma,er.cancelRegister=function(){var ni=er.props,oi=ni.preserve,Ei=ni.isListField,qi=ni.name;er.cancelRegisterFunc&&er.cancelRegisterFunc(Ei,oi,Yr(qi)),er.cancelRegisterFunc=null},er.getNamePath=function(){var ni=er.props,oi=ni.name,Ei=ni.fieldContext,qi=Ei.prefixName,Pr=qi===void 0?[]:qi;return oi!==void 0?[].concat((0,Z.Z)(Pr),(0,Z.Z)(oi)):[]},er.getRules=function(){var ni=er.props,oi=ni.rules,Ei=oi===void 0?[]:oi,qi=ni.fieldContext;return Ei.map(function(Pr){return typeof Pr=="function"?Pr(qi):Pr})},er.refresh=function(){er.mounted&&er.setState(function(ni){var oi=ni.resetCount;return{resetCount:oi+1}})},er.triggerMetaEvent=function(ni){var oi=er.props.onMetaChange;oi==null||oi((0,N.Z)((0,N.Z)({},er.getMeta()),{},{destroy:ni}))},er.onStoreChange=function(ni,oi,Ei){var qi=er.props,Pr=qi.shouldUpdate,Cn=qi.dependencies,ln=Cn===void 0?[]:Cn,bn=qi.onReset,Kn=Ei.store,bi=er.getNamePath(),Yi=er.getValue(ni),Gi=er.getValue(Kn),aa=oi&&Si(oi,bi);switch(Ei.type==="valueUpdate"&&Ei.source==="external"&&Yi!==Gi&&(er.touched=!0,er.dirty=!0,er.validatePromise=null,er.errors=ma,er.warnings=ma,er.triggerMetaEvent()),Ei.type){case"reset":if(!oi||aa){er.touched=!1,er.dirty=!1,er.validatePromise=null,er.errors=ma,er.warnings=ma,er.triggerMetaEvent(),bn==null||bn(),er.refresh();return}break;case"remove":{if(Pr){er.reRender();return}break}case"setField":{if(aa){var Ta=Ei.data;"touched"in Ta&&(er.touched=Ta.touched),"validating"in Ta&&!("originRCField"in Ta)&&(er.validatePromise=Ta.validating?Promise.resolve([]):null),"errors"in Ta&&(er.errors=Ta.errors||ma),"warnings"in Ta&&(er.warnings=Ta.warnings||ma),er.dirty=!0,er.triggerMetaEvent(),er.reRender();return}if(Pr&&!bi.length&&ka(Pr,ni,Kn,Yi,Gi,Ei)){er.reRender();return}break}case"dependenciesUpdate":{var R=ln.map(Yr);if(R.some(function(_e){return Si(Ei.relatedFields,_e)})){er.reRender();return}break}default:if(aa||(!ln.length||bi.length||Pr)&&ka(Pr,ni,Kn,Yi,Gi,Ei)){er.reRender();return}break}Pr===!0&&er.reRender()},er.validateRules=function(ni){var oi=er.getNamePath(),Ei=er.getValue(),qi=Promise.resolve().then(function(){if(!er.mounted)return[];var Pr=er.props,Cn=Pr.validateFirst,ln=Cn===void 0?!1:Cn,bn=Pr.messageVariables,Kn=ni||{},bi=Kn.triggerName,Yi=er.getRules();bi&&(Yi=Yi.filter(function(aa){return aa}).filter(function(aa){var Ta=aa.validateTrigger;if(!Ta)return!0;var R=Lt(Ta);return R.includes(bi)}));var Gi=Oi(oi,Ei,Yi,ni,ln,bn);return Gi.catch(function(aa){return aa}).then(function(){var aa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ma;if(er.validatePromise===qi){var Ta;er.validatePromise=null;var R=[],_e=[];(Ta=aa.forEach)===null||Ta===void 0||Ta.call(aa,function(At){var Ke=At.rule.warningOnly,nr=At.errors,wr=nr===void 0?ma:nr;Ke?_e.push.apply(_e,(0,Z.Z)(wr)):R.push.apply(R,(0,Z.Z)(wr))}),er.errors=R,er.warnings=_e,er.triggerMetaEvent(),er.reRender()}}),Gi});return er.validatePromise=qi,er.dirty=!0,er.errors=ma,er.warnings=ma,er.triggerMetaEvent(),er.reRender(),qi},er.isFieldValidating=function(){return!!er.validatePromise},er.isFieldTouched=function(){return er.touched},er.isFieldDirty=function(){if(er.dirty||er.props.initialValue!==void 0)return!0;var ni=er.props.fieldContext,oi=ni.getInternalHooks(Le),Ei=oi.getInitialValue;return Ei(er.getNamePath())!==void 0},er.getErrors=function(){return er.errors},er.getWarnings=function(){return er.warnings},er.isListField=function(){return er.props.isListField},er.isList=function(){return er.props.isList},er.isPreserve=function(){return er.props.preserve},er.getMeta=function(){er.prevValidating=er.isFieldValidating();var ni={touched:er.isFieldTouched(),validating:er.prevValidating,errors:er.errors,warnings:er.warnings,name:er.getNamePath()};return ni},er.getOnlyChild=function(ni){if(typeof ni=="function"){var oi=er.getMeta();return(0,N.Z)((0,N.Z)({},er.getOnlyChild(ni(er.getControlled(),oi,er.props.fieldContext))),{},{isFunction:!0})}var Ei=(0,We.Z)(ni);return Ei.length!==1||!v.isValidElement(Ei[0])?{child:Ei,isFunction:!1}:{child:Ei[0],isFunction:!1}},er.getValue=function(ni){var oi=er.props.fieldContext.getFieldsValue,Ei=er.getNamePath();return Tn(ni||oi(!0),Ei)},er.getControlled=function(){var ni=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oi=er.props,Ei=oi.trigger,qi=oi.validateTrigger,Pr=oi.getValueFromEvent,Cn=oi.normalize,ln=oi.valuePropName,bn=oi.getValueProps,Kn=oi.fieldContext,bi=qi!==void 0?qi:Kn.validateTrigger,Yi=er.getNamePath(),Gi=Kn.getInternalHooks,aa=Kn.getFieldsValue,Ta=Gi(Le),R=Ta.dispatch,_e=er.getValue(),At=bn||function(Wr){return(0,K.Z)({},ln,Wr)},Ke=ni[Ei],nr=(0,N.Z)((0,N.Z)({},ni),At(_e));nr[Ei]=function(){er.touched=!0,er.dirty=!0,er.triggerMetaEvent();for(var Wr,In=arguments.length,Dn=new Array(In),Mi=0;Mi<In;Mi++)Dn[Mi]=arguments[Mi];Pr?Wr=Pr.apply(void 0,Dn):Wr=ta.apply(void 0,[ln].concat(Dn)),Cn&&(Wr=Cn(Wr,_e,aa(!0))),R({type:"updateValue",namePath:Yi,value:Wr}),Ke&&Ke.apply(void 0,Dn)};var wr=Lt(bi||[]);return wr.forEach(function(Wr){var In=nr[Wr];nr[Wr]=function(){In&&In.apply(void 0,arguments);var Dn=er.props.rules;Dn&&Dn.length&&R({type:"validateField",namePath:Yi,triggerName:Wr})}}),nr},ur.fieldContext){var sn=ur.fieldContext.getInternalHooks,fn=sn(Le),Vn=fn.initEntityValue;Vn((0,$.Z)(er))}return er}return(0,L.Z)(ht,[{key:"componentDidMount",value:function(){var er=this.props,sn=er.shouldUpdate,fn=er.fieldContext;if(this.mounted=!0,fn){var Vn=fn.getInternalHooks,ni=Vn(Le),oi=ni.registerField;this.cancelRegisterFunc=oi(this)}sn===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var er=this.state.resetCount,sn=this.props.children,fn=this.getOnlyChild(sn),Vn=fn.child,ni=fn.isFunction,oi;return ni?oi=Vn:v.isValidElement(Vn)?oi=v.cloneElement(Vn,this.getControlled(Vn.props)):((0,me.ZP)(!Vn,"`children` of Field is not validate ReactElement."),oi=Vn),v.createElement(v.Fragment,{key:er},oi)}}]),ht}(v.Component);Uo.contextType=at,Uo.defaultProps={trigger:"onChange",valuePropName:"value"};function ha(Vr){var cr=Vr.name,ht=(0,c.Z)(Vr,Aa),ur=v.useContext(at),er=cr!==void 0?Yr(cr):void 0,sn="keep";return ht.isListField||(sn="_".concat((er||[]).join("_"))),v.createElement(Uo,(0,M.Z)({key:sn,name:er},ht,{fieldContext:ur}))}var xa=ha,eo=v.createContext(null),Te=eo,Po=function(cr){var ht=cr.name,ur=cr.initialValue,er=cr.children,sn=cr.rules,fn=cr.validateTrigger,Vn=v.useContext(at),ni=v.useRef({keys:[],id:0}),oi=ni.current,Ei=v.useMemo(function(){var ln=Yr(Vn.prefixName)||[];return[].concat((0,Z.Z)(ln),(0,Z.Z)(Yr(ht)))},[Vn.prefixName,ht]),qi=v.useMemo(function(){return(0,N.Z)((0,N.Z)({},Vn),{},{prefixName:Ei})},[Vn,Ei]),Pr=v.useMemo(function(){return{getKey:function(bn){var Kn=Ei.length,bi=bn[Kn];return[oi.keys[bi],bn.slice(Kn+1)]}}},[Ei]);if(typeof er!="function")return(0,me.ZP)(!1,"Form.List only accepts function as children."),null;var Cn=function(bn,Kn,bi){var Yi=bi.source;return Yi==="internal"?!1:bn!==Kn};return v.createElement(Te.Provider,{value:Pr},v.createElement(at.Provider,{value:qi},v.createElement(xa,{name:[],shouldUpdate:Cn,rules:sn,validateTrigger:fn,initialValue:ur,isList:!0},function(ln,bn){var Kn=ln.value,bi=Kn===void 0?[]:Kn,Yi=ln.onChange,Gi=Vn.getFieldValue,aa=function(){var At=Gi(Ei||[]);return At||[]},Ta={add:function(At,Ke){var nr=aa();Ke>=0&&Ke<=nr.length?(oi.keys=[].concat((0,Z.Z)(oi.keys.slice(0,Ke)),[oi.id],(0,Z.Z)(oi.keys.slice(Ke))),Yi([].concat((0,Z.Z)(nr.slice(0,Ke)),[At],(0,Z.Z)(nr.slice(Ke))))):(oi.keys=[].concat((0,Z.Z)(oi.keys),[oi.id]),Yi([].concat((0,Z.Z)(nr),[At]))),oi.id+=1},remove:function(At){var Ke=aa(),nr=new Set(Array.isArray(At)?At:[At]);nr.size<=0||(oi.keys=oi.keys.filter(function(wr,Wr){return!nr.has(Wr)}),Yi(Ke.filter(function(wr,Wr){return!nr.has(Wr)})))},move:function(At,Ke){if(At!==Ke){var nr=aa();At<0||At>=nr.length||Ke<0||Ke>=nr.length||(oi.keys=La(oi.keys,At,Ke),Yi(La(nr,At,Ke)))}}},R=bi||[];return Array.isArray(R)||(R=[]),er(R.map(function(_e,At){var Ke=oi.keys[At];return Ke===void 0&&(oi.keys[At]=oi.id,Ke=oi.keys[At],oi.id+=1),{name:At,key:Ke,isListField:!0}}),Ta,bn)})))},Hs=Po,no=g(97685);function Jo(Vr){var cr=!1,ht=Vr.length,ur=[];return Vr.length?new Promise(function(er,sn){Vr.forEach(function(fn,Vn){fn.catch(function(ni){return cr=!0,ni}).then(function(ni){ht-=1,ur[Vn]=ni,!(ht>0)&&(cr&&sn(ur),er(ur))})})}):Promise.resolve([])}var os="__@field_split__";function Go(Vr){return Vr.map(function(cr){return"".concat((0,Pt.Z)(cr),":").concat(cr)}).join(os)}var Wo=function(){function Vr(){(0,B.Z)(this,Vr),this.kvs=new Map}return(0,L.Z)(Vr,[{key:"set",value:function(ht,ur){this.kvs.set(Go(ht),ur)}},{key:"get",value:function(ht){return this.kvs.get(Go(ht))}},{key:"update",value:function(ht,ur){var er=this.get(ht),sn=ur(er);sn?this.set(ht,sn):this.delete(ht)}},{key:"delete",value:function(ht){this.kvs.delete(Go(ht))}},{key:"map",value:function(ht){return(0,Z.Z)(this.kvs.entries()).map(function(ur){var er=(0,no.Z)(ur,2),sn=er[0],fn=er[1],Vn=sn.split(os);return ht({key:Vn.map(function(ni){var oi=ni.match(/^([^:]*):(.*)$/),Ei=(0,no.Z)(oi,3),qi=Ei[1],Pr=Ei[2];return qi==="number"?Number(Pr):Pr}),value:fn})})}},{key:"toJSON",value:function(){var ht={};return this.map(function(ur){var er=ur.key,sn=ur.value;return ht[er.join(".")]=sn,null}),ht}}]),Vr}(),za=Wo,Tu=["name","errors"],ws=(0,L.Z)(function Vr(cr){var ht=this;(0,B.Z)(this,Vr),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:ht.getFieldValue,getFieldsValue:ht.getFieldsValue,getFieldError:ht.getFieldError,getFieldWarning:ht.getFieldWarning,getFieldsError:ht.getFieldsError,isFieldsTouched:ht.isFieldsTouched,isFieldTouched:ht.isFieldTouched,isFieldValidating:ht.isFieldValidating,isFieldsValidating:ht.isFieldsValidating,resetFields:ht.resetFields,setFields:ht.setFields,setFieldValue:ht.setFieldValue,setFieldsValue:ht.setFieldsValue,validateFields:ht.validateFields,submit:ht.submit,_init:!0,getInternalHooks:ht.getInternalHooks}},this.getInternalHooks=function(ur){return ur===Le?(ht.formHooked=!0,{dispatch:ht.dispatch,initEntityValue:ht.initEntityValue,registerField:ht.registerField,useSubscribe:ht.useSubscribe,setInitialValues:ht.setInitialValues,destroyForm:ht.destroyForm,setCallbacks:ht.setCallbacks,setValidateMessages:ht.setValidateMessages,getFields:ht.getFields,setPreserve:ht.setPreserve,getInitialValue:ht.getInitialValue,registerWatch:ht.registerWatch}):((0,me.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(ur){ht.subscribable=ur},this.prevWithoutPreserves=null,this.setInitialValues=function(ur,er){if(ht.initialValues=ur||{},er){var sn,fn=Ln({},ur,ht.store);(sn=ht.prevWithoutPreserves)===null||sn===void 0||sn.map(function(Vn){var ni=Vn.key;fn=wn(fn,ni,Tn(ur,ni))}),ht.prevWithoutPreserves=null,ht.updateStore(fn)}},this.destroyForm=function(){var ur=new za;ht.getFieldEntities(!0).forEach(function(er){ht.isMergedPreserve(er.isPreserve())||ur.set(er.getNamePath(),!0)}),ht.prevWithoutPreserves=ur},this.getInitialValue=function(ur){var er=Tn(ht.initialValues,ur);return ur.length?tt(er):er},this.setCallbacks=function(ur){ht.callbacks=ur},this.setValidateMessages=function(ur){ht.validateMessages=ur},this.setPreserve=function(ur){ht.preserve=ur},this.watchList=[],this.registerWatch=function(ur){return ht.watchList.push(ur),function(){ht.watchList=ht.watchList.filter(function(er){return er!==ur})}},this.notifyWatch=function(){var ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(ht.watchList.length){var er=ht.getFieldsValue();ht.watchList.forEach(function(sn){sn(er,ur)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(ur){ht.store=ur},this.getFieldEntities=function(){var ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return ur?ht.fieldEntities.filter(function(er){return er.getNamePath().length}):ht.fieldEntities},this.getFieldsMap=function(){var ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,er=new za;return ht.getFieldEntities(ur).forEach(function(sn){var fn=sn.getNamePath();er.set(fn,sn)}),er},this.getFieldEntitiesForNamePathList=function(ur){if(!ur)return ht.getFieldEntities(!0);var er=ht.getFieldsMap(!0);return ur.map(function(sn){var fn=Yr(sn);return er.get(fn)||{INVALIDATE_NAME_PATH:Yr(sn)}})},this.getFieldsValue=function(ur,er){if(ht.warningUnhooked(),ur===!0&&!er)return ht.store;var sn=ht.getFieldEntitiesForNamePathList(Array.isArray(ur)?ur:null),fn=[];return sn.forEach(function(Vn){var ni,oi="INVALIDATE_NAME_PATH"in Vn?Vn.INVALIDATE_NAME_PATH:Vn.getNamePath();if(!(!ur&&(!((ni=Vn.isListField)===null||ni===void 0)&&ni.call(Vn))))if(!er)fn.push(oi);else{var Ei="getMeta"in Vn?Vn.getMeta():null;er(Ei)&&fn.push(oi)}}),Nn(ht.store,fn.map(Yr))},this.getFieldValue=function(ur){ht.warningUnhooked();var er=Yr(ur);return Tn(ht.store,er)},this.getFieldsError=function(ur){ht.warningUnhooked();var er=ht.getFieldEntitiesForNamePathList(ur);return er.map(function(sn,fn){return sn&&!("INVALIDATE_NAME_PATH"in sn)?{name:sn.getNamePath(),errors:sn.getErrors(),warnings:sn.getWarnings()}:{name:Yr(ur[fn]),errors:[],warnings:[]}})},this.getFieldError=function(ur){ht.warningUnhooked();var er=Yr(ur),sn=ht.getFieldsError([er])[0];return sn.errors},this.getFieldWarning=function(ur){ht.warningUnhooked();var er=Yr(ur),sn=ht.getFieldsError([er])[0];return sn.warnings},this.isFieldsTouched=function(){ht.warningUnhooked();for(var ur=arguments.length,er=new Array(ur),sn=0;sn<ur;sn++)er[sn]=arguments[sn];var fn=er[0],Vn=er[1],ni,oi=!1;er.length===0?ni=null:er.length===1?Array.isArray(fn)?(ni=fn.map(Yr),oi=!1):(ni=null,oi=fn):(ni=fn.map(Yr),oi=Vn);var Ei=ht.getFieldEntities(!0),qi=function(Kn){return Kn.isFieldTouched()};if(!ni)return oi?Ei.every(qi):Ei.some(qi);var Pr=new za;ni.forEach(function(bn){Pr.set(bn,[])}),Ei.forEach(function(bn){var Kn=bn.getNamePath();ni.forEach(function(bi){bi.every(function(Yi,Gi){return Kn[Gi]===Yi})&&Pr.update(bi,function(Yi){return[].concat((0,Z.Z)(Yi),[bn])})})});var Cn=function(Kn){return Kn.some(qi)},ln=Pr.map(function(bn){var Kn=bn.value;return Kn});return oi?ln.every(Cn):ln.some(Cn)},this.isFieldTouched=function(ur){return ht.warningUnhooked(),ht.isFieldsTouched([ur])},this.isFieldsValidating=function(ur){ht.warningUnhooked();var er=ht.getFieldEntities();if(!ur)return er.some(function(fn){return fn.isFieldValidating()});var sn=ur.map(Yr);return er.some(function(fn){var Vn=fn.getNamePath();return Si(sn,Vn)&&fn.isFieldValidating()})},this.isFieldValidating=function(ur){return ht.warningUnhooked(),ht.isFieldsValidating([ur])},this.resetWithFieldInitialValue=function(){var ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},er=new za,sn=ht.getFieldEntities(!0);sn.forEach(function(ni){var oi=ni.props.initialValue,Ei=ni.getNamePath();if(oi!==void 0){var qi=er.get(Ei)||new Set;qi.add({entity:ni,value:oi}),er.set(Ei,qi)}});var fn=function(oi){oi.forEach(function(Ei){var qi=Ei.props.initialValue;if(qi!==void 0){var Pr=Ei.getNamePath(),Cn=ht.getInitialValue(Pr);if(Cn!==void 0)(0,me.ZP)(!1,"Form already set 'initialValues' with path '".concat(Pr.join("."),"'. Field can not overwrite it."));else{var ln=er.get(Pr);if(ln&&ln.size>1)(0,me.ZP)(!1,"Multiple Field with path '".concat(Pr.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(ln){var bn=ht.getFieldValue(Pr);(!ur.skipExist||bn===void 0)&&ht.updateStore(wn(ht.store,Pr,(0,Z.Z)(ln)[0].value))}}}})},Vn;ur.entities?Vn=ur.entities:ur.namePathList?(Vn=[],ur.namePathList.forEach(function(ni){var oi=er.get(ni);if(oi){var Ei;(Ei=Vn).push.apply(Ei,(0,Z.Z)((0,Z.Z)(oi).map(function(qi){return qi.entity})))}})):Vn=sn,fn(Vn)},this.resetFields=function(ur){ht.warningUnhooked();var er=ht.store;if(!ur){ht.updateStore(Ln({},ht.initialValues)),ht.resetWithFieldInitialValue(),ht.notifyObservers(er,null,{type:"reset"}),ht.notifyWatch();return}var sn=ur.map(Yr);sn.forEach(function(fn){var Vn=ht.getInitialValue(fn);ht.updateStore(wn(ht.store,fn,Vn))}),ht.resetWithFieldInitialValue({namePathList:sn}),ht.notifyObservers(er,sn,{type:"reset"}),ht.notifyWatch(sn)},this.setFields=function(ur){ht.warningUnhooked();var er=ht.store,sn=[];ur.forEach(function(fn){var Vn=fn.name,ni=fn.errors,oi=(0,c.Z)(fn,Tu),Ei=Yr(Vn);sn.push(Ei),"value"in oi&&ht.updateStore(wn(ht.store,Ei,oi.value)),ht.notifyObservers(er,[Ei],{type:"setField",data:fn})}),ht.notifyWatch(sn)},this.getFields=function(){var ur=ht.getFieldEntities(!0),er=ur.map(function(sn){var fn=sn.getNamePath(),Vn=sn.getMeta(),ni=(0,N.Z)((0,N.Z)({},Vn),{},{name:fn,value:ht.getFieldValue(fn)});return Object.defineProperty(ni,"originRCField",{value:!0}),ni});return er},this.initEntityValue=function(ur){var er=ur.props.initialValue;if(er!==void 0){var sn=ur.getNamePath(),fn=Tn(ht.store,sn);fn===void 0&&ht.updateStore(wn(ht.store,sn,er))}},this.isMergedPreserve=function(ur){var er=ur!==void 0?ur:ht.preserve;return er!=null?er:!0},this.registerField=function(ur){ht.fieldEntities.push(ur);var er=ur.getNamePath();if(ht.notifyWatch([er]),ur.props.initialValue!==void 0){var sn=ht.store;ht.resetWithFieldInitialValue({entities:[ur],skipExist:!0}),ht.notifyObservers(sn,[ur.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(fn,Vn){var ni=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(ht.fieldEntities=ht.fieldEntities.filter(function(qi){return qi!==ur}),!ht.isMergedPreserve(Vn)&&(!fn||ni.length>1)){var oi=fn?void 0:ht.getInitialValue(er);if(er.length&&ht.getFieldValue(er)!==oi&&ht.fieldEntities.every(function(qi){return!na(qi.getNamePath(),er)})){var Ei=ht.store;ht.updateStore(wn(Ei,er,oi,!0)),ht.notifyObservers(Ei,[er],{type:"remove"}),ht.triggerDependenciesUpdate(Ei,er)}}ht.notifyWatch([er])}},this.dispatch=function(ur){switch(ur.type){case"updateValue":{var er=ur.namePath,sn=ur.value;ht.updateValue(er,sn);break}case"validateField":{var fn=ur.namePath,Vn=ur.triggerName;ht.validateFields([fn],{triggerName:Vn});break}default:}},this.notifyObservers=function(ur,er,sn){if(ht.subscribable){var fn=(0,N.Z)((0,N.Z)({},sn),{},{store:ht.getFieldsValue(!0)});ht.getFieldEntities().forEach(function(Vn){var ni=Vn.onStoreChange;ni(ur,er,fn)})}else ht.forceRootUpdate()},this.triggerDependenciesUpdate=function(ur,er){var sn=ht.getDependencyChildrenFields(er);return sn.length&&ht.validateFields(sn),ht.notifyObservers(ur,sn,{type:"dependenciesUpdate",relatedFields:[er].concat((0,Z.Z)(sn))}),sn},this.updateValue=function(ur,er){var sn=Yr(ur),fn=ht.store;ht.updateStore(wn(ht.store,sn,er)),ht.notifyObservers(fn,[sn],{type:"valueUpdate",source:"internal"}),ht.notifyWatch([sn]);var Vn=ht.triggerDependenciesUpdate(fn,sn),ni=ht.callbacks.onValuesChange;if(ni){var oi=Nn(ht.store,[sn]);ni(oi,ht.getFieldsValue())}ht.triggerOnFieldsChange([sn].concat((0,Z.Z)(Vn)))},this.setFieldsValue=function(ur){ht.warningUnhooked();var er=ht.store;if(ur){var sn=Ln(ht.store,ur);ht.updateStore(sn)}ht.notifyObservers(er,null,{type:"valueUpdate",source:"external"}),ht.notifyWatch()},this.setFieldValue=function(ur,er){ht.setFields([{name:ur,value:er}])},this.getDependencyChildrenFields=function(ur){var er=new Set,sn=[],fn=new za;ht.getFieldEntities().forEach(function(ni){var oi=ni.props.dependencies;(oi||[]).forEach(function(Ei){var qi=Yr(Ei);fn.update(qi,function(){var Pr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return Pr.add(ni),Pr})})});var Vn=function ni(oi){var Ei=fn.get(oi)||new Set;Ei.forEach(function(qi){if(!er.has(qi)){er.add(qi);var Pr=qi.getNamePath();qi.isFieldDirty()&&Pr.length&&(sn.push(Pr),ni(Pr))}})};return Vn(ur),sn},this.triggerOnFieldsChange=function(ur,er){var sn=ht.callbacks.onFieldsChange;if(sn){var fn=ht.getFields();if(er){var Vn=new za;er.forEach(function(oi){var Ei=oi.name,qi=oi.errors;Vn.set(Ei,qi)}),fn.forEach(function(oi){oi.errors=Vn.get(oi.name)||oi.errors})}var ni=fn.filter(function(oi){var Ei=oi.name;return Si(ur,Ei)});sn(ni,fn)}},this.validateFields=function(ur,er){ht.warningUnhooked();var sn=!!ur,fn=sn?ur.map(Yr):[],Vn=[];ht.getFieldEntities(!0).forEach(function(Ei){if(sn||fn.push(Ei.getNamePath()),er!=null&&er.recursive&&sn){var qi=Ei.getNamePath();qi.every(function(ln,bn){return ur[bn]===ln||ur[bn]===void 0})&&fn.push(qi)}if(!(!Ei.props.rules||!Ei.props.rules.length)){var Pr=Ei.getNamePath();if(!sn||Si(fn,Pr)){var Cn=Ei.validateRules((0,N.Z)({validateMessages:(0,N.Z)((0,N.Z)({},jn),ht.validateMessages)},er));Vn.push(Cn.then(function(){return{name:Pr,errors:[],warnings:[]}}).catch(function(ln){var bn,Kn=[],bi=[];return(bn=ln.forEach)===null||bn===void 0||bn.call(ln,function(Yi){var Gi=Yi.rule.warningOnly,aa=Yi.errors;Gi?bi.push.apply(bi,(0,Z.Z)(aa)):Kn.push.apply(Kn,(0,Z.Z)(aa))}),Kn.length?Promise.reject({name:Pr,errors:Kn,warnings:bi}):{name:Pr,errors:Kn,warnings:bi}}))}}});var ni=Jo(Vn);ht.lastValidatePromise=ni,ni.catch(function(Ei){return Ei}).then(function(Ei){var qi=Ei.map(function(Pr){var Cn=Pr.name;return Cn});ht.notifyObservers(ht.store,qi,{type:"validateFinish"}),ht.triggerOnFieldsChange(qi,Ei)});var oi=ni.then(function(){return ht.lastValidatePromise===ni?Promise.resolve(ht.getFieldsValue(fn)):Promise.reject([])}).catch(function(Ei){var qi=Ei.filter(function(Pr){return Pr&&Pr.errors.length});return Promise.reject({values:ht.getFieldsValue(fn),errorFields:qi,outOfDate:ht.lastValidatePromise!==ni})});return oi.catch(function(Ei){return Ei}),oi},this.submit=function(){ht.warningUnhooked(),ht.validateFields().then(function(ur){var er=ht.callbacks.onFinish;if(er)try{er(ur)}catch(sn){console.error(sn)}}).catch(function(ur){var er=ht.callbacks.onFinishFailed;er&&er(ur)})},this.forceRootUpdate=cr});function Zs(Vr){var cr=v.useRef(),ht=v.useState({}),ur=(0,no.Z)(ht,2),er=ur[1];if(!cr.current)if(Vr)cr.current=Vr;else{var sn=function(){er({})},fn=new ws(sn);cr.current=fn.getForm()}return[cr.current]}var ts=Zs,Vs=v.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ou=function(cr){var ht=cr.validateMessages,ur=cr.onFormChange,er=cr.onFormFinish,sn=cr.children,fn=v.useContext(Vs),Vn=v.useRef({});return v.createElement(Vs.Provider,{value:(0,N.Z)((0,N.Z)({},fn),{},{validateMessages:(0,N.Z)((0,N.Z)({},fn.validateMessages),ht),triggerFormChange:function(oi,Ei){ur&&ur(oi,{changedFields:Ei,forms:Vn.current}),fn.triggerFormChange(oi,Ei)},triggerFormFinish:function(oi,Ei){er&&er(oi,{values:Ei,forms:Vn.current}),fn.triggerFormFinish(oi,Ei)},registerForm:function(oi,Ei){oi&&(Vn.current=(0,N.Z)((0,N.Z)({},Vn.current),{},(0,K.Z)({},oi,Ei))),fn.registerForm(oi,Ei)},unregisterForm:function(oi){var Ei=(0,N.Z)({},Vn.current);delete Ei[oi],Vn.current=Ei,fn.unregisterForm(oi)}})},sn)},ls=Vs,ki=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],As=function(cr,ht){var ur=cr.name,er=cr.initialValues,sn=cr.fields,fn=cr.form,Vn=cr.preserve,ni=cr.children,oi=cr.component,Ei=oi===void 0?"form":oi,qi=cr.validateMessages,Pr=cr.validateTrigger,Cn=Pr===void 0?"onChange":Pr,ln=cr.onValuesChange,bn=cr.onFieldsChange,Kn=cr.onFinish,bi=cr.onFinishFailed,Yi=(0,c.Z)(cr,ki),Gi=v.useContext(ls),aa=ts(fn),Ta=(0,no.Z)(aa,1),R=Ta[0],_e=R.getInternalHooks(Le),At=_e.useSubscribe,Ke=_e.setInitialValues,nr=_e.setCallbacks,wr=_e.setValidateMessages,Wr=_e.setPreserve,In=_e.destroyForm;v.useImperativeHandle(ht,function(){return R}),v.useEffect(function(){return Gi.registerForm(ur,R),function(){Gi.unregisterForm(ur)}},[Gi,R,ur]),wr((0,N.Z)((0,N.Z)({},Gi.validateMessages),qi)),nr({onValuesChange:ln,onFieldsChange:function(Oo){if(Gi.triggerFormChange(ur,Oo),bn){for(var Ho=arguments.length,Io=new Array(Ho>1?Ho-1:0),Js=1;Js<Ho;Js++)Io[Js-1]=arguments[Js];bn.apply(void 0,[Oo].concat(Io))}},onFinish:function(Oo){Gi.triggerFormFinish(ur,Oo),Kn&&Kn(Oo)},onFinishFailed:bi}),Wr(Vn);var Dn=v.useRef(null);Ke(er,!Dn.current),Dn.current||(Dn.current=!0),v.useEffect(function(){return In},[]);var Mi,Bi=typeof ni=="function";if(Bi){var io=R.getFieldsValue(!0);Mi=ni(io,R)}else Mi=ni;At(!Bi);var co=v.useRef();v.useEffect(function(){xi(co.current||[],sn||[])||R.setFields(sn||[]),co.current=sn},[sn,R]);var Sa=v.useMemo(function(){return(0,N.Z)((0,N.Z)({},R),{},{validateTrigger:Cn})},[R,Cn]),Ko=v.createElement(at.Provider,{value:Sa},Mi);return Ei===!1?Ko:v.createElement(Ei,(0,M.Z)({},Yi,{onSubmit:function(Oo){Oo.preventDefault(),Oo.stopPropagation(),R.submit()},onReset:function(Oo){var Ho;Oo.preventDefault(),R.resetFields(),(Ho=Yi.onReset)===null||Ho===void 0||Ho.call(Yi,Oo)}}),Ko)},Rs=As;function hr(Vr){try{return JSON.stringify(Vr)}catch(cr){return Math.random()}}var Lr=function(){};function or(){for(var Vr=arguments.length,cr=new Array(Vr),ht=0;ht<Vr;ht++)cr[ht]=arguments[ht];var ur=cr[0],er=ur===void 0?[]:ur,sn=cr[1],fn=(0,v.useState)(),Vn=(0,no.Z)(fn,2),ni=Vn[0],oi=Vn[1],Ei=(0,v.useMemo)(function(){return hr(ni)},[ni]),qi=(0,v.useRef)(Ei);qi.current=Ei;var Pr=(0,v.useContext)(at),Cn=sn||Pr,ln=Cn&&Cn._init,bn=Yr(er),Kn=(0,v.useRef)(bn);return Kn.current=bn,Lr(bn),(0,v.useEffect)(function(){if(ln){var bi=Cn.getFieldsValue,Yi=Cn.getInternalHooks,Gi=Yi(Le),aa=Gi.registerWatch,Ta=aa(function(_e){var At=Tn(_e,Kn.current),Ke=hr(At);qi.current!==Ke&&(qi.current=Ke,oi(At))}),R=Tn(bi(),Kn.current);return oi(R),Ta}},[ln]),ni}var kr=or,Hn=v.forwardRef(Rs),zr=Hn;zr.FormProvider=ou,zr.Field=xa,zr.List=Hs,zr.useForm=ts,zr.useWatch=kr;var Bo=null},62906:function(vt,Ee){"use strict";Ee.Z={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},21990:function(vt,Ee,g){"use strict";g.d(Ee,{Xo:function(){return Pt},Wx:function(){return Qt},ZP:function(){return uo}});var v=g(87462),M=g(74902),c=g(4942),K=g(1413),N=g(97685),Z=g(91),B=g(71002),L=g(21770),$=g(80334),U=g(67294),ke=g(94184),We=g.n(ke),me=g(8410),Le=g(31131),Se=g(15105),et=g(42550),at=U.createContext(null);function Lt(){return U.useContext(at)}function Et(){var An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,gn=U.useState(!1),Oi=(0,N.Z)(gn,2),fi=Oi[0],va=Oi[1],wa=U.useRef(null),Ca=function(){window.clearTimeout(wa.current)};U.useEffect(function(){return Ca},[]);var Aa=function(ka,Uo){Ca(),wa.current=window.setTimeout(function(){va(ka),Uo&&Uo()},An)};return[fi,Aa,Ca]}function jt(){var An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,gn=U.useRef(null),Oi=U.useRef(null);U.useEffect(function(){return function(){window.clearTimeout(Oi.current)}},[]);function fi(va){(va||gn.current===null)&&(gn.current=va),window.clearTimeout(Oi.current),Oi.current=window.setTimeout(function(){gn.current=null},An)}return[function(){return gn.current},fi]}function pe(An,gn,Oi,fi){var va=U.useRef(null);va.current={open:gn,triggerOpen:Oi,customizedTrigger:fi},U.useEffect(function(){function wa(Ca){var Aa;if(!((Aa=va.current)!==null&&Aa!==void 0&&Aa.customizedTrigger)){var ma=Ca.target;ma.shadowRoot&&Ca.composed&&(ma=Ca.composedPath()[0]||ma),va.current.open&&An().filter(function(ka){return ka}).every(function(ka){return!ka.contains(ma)&&ka!==ma})&&va.current.triggerOpen(!1)}}return window.addEventListener("mousedown",wa),function(){return window.removeEventListener("mousedown",wa)}},[])}var $e=g(64217),ye=g(34243),ie=function(gn){var Oi=gn.className,fi=gn.customizeIcon,va=gn.customizeIconProps,wa=gn.onMouseDown,Ca=gn.onClick,Aa=gn.children,ma;return typeof fi=="function"?ma=fi(va):ma=fi,U.createElement("span",{className:Oi,onMouseDown:function(Uo){Uo.preventDefault(),wa&&wa(Uo)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:Ca,"aria-hidden":!0},ma!==void 0?ma:U.createElement("span",{className:We()(Oi.split(/\s+/).map(function(ka){return"".concat(ka,"-icon")}))},Aa))},re=ie,De=function(gn,Oi){var fi,va,wa=gn.prefixCls,Ca=gn.id,Aa=gn.inputElement,ma=gn.disabled,ka=gn.tabIndex,Uo=gn.autoFocus,ha=gn.autoComplete,xa=gn.editable,eo=gn.activeDescendantId,Te=gn.value,Po=gn.maxLength,Hs=gn.onKeyDown,no=gn.onMouseDown,Jo=gn.onChange,os=gn.onPaste,Go=gn.onCompositionStart,Wo=gn.onCompositionEnd,za=gn.open,Tu=gn.attrs,ws=Aa||U.createElement("input",null),Zs=ws,ts=Zs.ref,Vs=Zs.props,ou=Vs.onKeyDown,ls=Vs.onChange,ki=Vs.onMouseDown,As=Vs.onCompositionStart,Rs=Vs.onCompositionEnd,hr=Vs.style;return(0,$.Kp)(!("maxLength"in ws.props),"Passing 'maxLength' to input element directly may not work because input in BaseSelect is controlled."),ws=U.cloneElement(ws,(0,K.Z)((0,K.Z)((0,K.Z)({type:"search"},Vs),{},{id:Ca,ref:(0,et.sQ)(Oi,ts),disabled:ma,tabIndex:ka,autoComplete:ha||"off",autoFocus:Uo,className:We()("".concat(wa,"-selection-search-input"),(fi=ws)===null||fi===void 0||(va=fi.props)===null||va===void 0?void 0:va.className),role:"combobox","aria-expanded":za,"aria-haspopup":"listbox","aria-owns":"".concat(Ca,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(Ca,"_list"),"aria-activedescendant":eo},Tu),{},{value:xa?Te:"",maxLength:Po,readOnly:!xa,unselectable:xa?null:"on",style:(0,K.Z)((0,K.Z)({},hr),{},{opacity:xa?null:0}),onKeyDown:function(or){Hs(or),ou&&ou(or)},onMouseDown:function(or){no(or),ki&&ki(or)},onChange:function(or){Jo(or),ls&&ls(or)},onCompositionStart:function(or){Go(or),As&&As(or)},onCompositionEnd:function(or){Wo(or),Rs&&Rs(or)},onPaste:os})),ws},le=U.forwardRef(De);le.displayName="Input";var ge=le;function ce(An){return Array.isArray(An)?An:An!==void 0?[An]:[]}var je=typeof window!="undefined"&&window.document&&window.document.documentElement,J=je;function Me(An){return An!=null}function ne(An){return["string","number"].includes((0,B.Z)(An))}function xe(An){var gn=void 0;return An&&(ne(An.title)?gn=An.title.toString():ne(An.label)&&(gn=An.label.toString())),gn}function Ne(An,gn){J?U.useLayoutEffect(An,gn):U.useEffect(An,gn)}function Pe(An){var gn;return(gn=An.key)!==null&&gn!==void 0?gn:An.value}var He=function(gn){gn.preventDefault(),gn.stopPropagation()},lt=function(gn){var Oi=gn.id,fi=gn.prefixCls,va=gn.values,wa=gn.open,Ca=gn.searchValue,Aa=gn.autoClearSearchValue,ma=gn.inputRef,ka=gn.placeholder,Uo=gn.disabled,ha=gn.mode,xa=gn.showSearch,eo=gn.autoFocus,Te=gn.autoComplete,Po=gn.activeDescendantId,Hs=gn.tabIndex,no=gn.removeIcon,Jo=gn.maxTagCount,os=gn.maxTagTextLength,Go=gn.maxTagPlaceholder,Wo=Go===void 0?function(oi){return"+ ".concat(oi.length," ...")}:Go,za=gn.tagRender,Tu=gn.onToggleOpen,ws=gn.onRemove,Zs=gn.onInputChange,ts=gn.onInputPaste,Vs=gn.onInputKeyDown,ou=gn.onInputMouseDown,ls=gn.onInputCompositionStart,ki=gn.onInputCompositionEnd,As=U.useRef(null),Rs=(0,U.useState)(0),hr=(0,N.Z)(Rs,2),Lr=hr[0],or=hr[1],kr=(0,U.useState)(!1),Hn=(0,N.Z)(kr,2),zr=Hn[0],Bo=Hn[1],Vr="".concat(fi,"-selection"),cr=wa||ha==="multiple"&&Aa===!1||ha==="tags"?Ca:"",ht=ha==="tags"||ha==="multiple"&&Aa===!1||xa&&(wa||zr);Ne(function(){or(As.current.scrollWidth)},[cr]);function ur(oi,Ei,qi,Pr,Cn){return U.createElement("span",{className:We()("".concat(Vr,"-item"),(0,c.Z)({},"".concat(Vr,"-item-disabled"),qi)),title:xe(oi)},U.createElement("span",{className:"".concat(Vr,"-item-content")},Ei),Pr&&U.createElement(re,{className:"".concat(Vr,"-item-remove"),onMouseDown:He,onClick:Cn,customizeIcon:no},"\xD7"))}function er(oi,Ei,qi,Pr,Cn){var ln=function(Kn){He(Kn),Tu(!wa)};return U.createElement("span",{onMouseDown:ln},za({label:Ei,value:oi,disabled:qi,closable:Pr,onClose:Cn}))}function sn(oi){var Ei=oi.disabled,qi=oi.label,Pr=oi.value,Cn=!Uo&&!Ei,ln=qi;if(typeof os=="number"&&(typeof qi=="string"||typeof qi=="number")){var bn=String(ln);bn.length>os&&(ln="".concat(bn.slice(0,os),"..."))}var Kn=function(Yi){Yi&&Yi.stopPropagation(),ws(oi)};return typeof za=="function"?er(Pr,ln,Ei,Cn,Kn):ur(oi,ln,Ei,Cn,Kn)}function fn(oi){var Ei=typeof Wo=="function"?Wo(oi):Wo;return ur({title:Ei},Ei,!1)}var Vn=U.createElement("div",{className:"".concat(Vr,"-search"),style:{width:Lr},onFocus:function(){Bo(!0)},onBlur:function(){Bo(!1)}},U.createElement(ge,{ref:ma,open:wa,prefixCls:fi,id:Oi,inputElement:null,disabled:Uo,autoFocus:eo,autoComplete:Te,editable:ht,activeDescendantId:Po,value:cr,onKeyDown:Vs,onMouseDown:ou,onChange:Zs,onPaste:ts,onCompositionStart:ls,onCompositionEnd:ki,tabIndex:Hs,attrs:(0,$e.Z)(gn,!0)}),U.createElement("span",{ref:As,className:"".concat(Vr,"-search-mirror"),"aria-hidden":!0},cr,"\xA0")),ni=U.createElement(ye.Z,{prefixCls:"".concat(Vr,"-overflow"),data:va,renderItem:sn,renderRest:fn,suffix:Vn,itemKey:Pe,maxCount:Jo});return U.createElement(U.Fragment,null,ni,!va.length&&!cr&&U.createElement("span",{className:"".concat(Vr,"-placeholder")},ka))},ft=lt,It=function(gn){var Oi=gn.inputElement,fi=gn.prefixCls,va=gn.id,wa=gn.inputRef,Ca=gn.disabled,Aa=gn.autoFocus,ma=gn.autoComplete,ka=gn.activeDescendantId,Uo=gn.mode,ha=gn.open,xa=gn.values,eo=gn.placeholder,Te=gn.tabIndex,Po=gn.showSearch,Hs=gn.searchValue,no=gn.activeValue,Jo=gn.maxLength,os=gn.onInputKeyDown,Go=gn.onInputMouseDown,Wo=gn.onInputChange,za=gn.onInputPaste,Tu=gn.onInputCompositionStart,ws=gn.onInputCompositionEnd,Zs=U.useState(!1),ts=(0,N.Z)(Zs,2),Vs=ts[0],ou=ts[1],ls=Uo==="combobox",ki=ls||Po,As=xa[0],Rs=Hs||"";ls&&no&&!Vs&&(Rs=no),U.useEffect(function(){ls&&ou(!1)},[ls,no]);var hr=Uo!=="combobox"&&!ha&&!Po?!1:!!Rs,Lr=xe(As),or=function(){if(As)return null;var Hn=hr?{visibility:"hidden"}:void 0;return U.createElement("span",{className:"".concat(fi,"-selection-placeholder"),style:Hn},eo)};return U.createElement(U.Fragment,null,U.createElement("span",{className:"".concat(fi,"-selection-search")},U.createElement(ge,{ref:wa,prefixCls:fi,id:va,open:ha,inputElement:Oi,disabled:Ca,autoFocus:Aa,autoComplete:ma,editable:ki,activeDescendantId:ka,value:Rs,onKeyDown:os,onMouseDown:Go,onChange:function(Hn){ou(!0),Wo(Hn)},onPaste:za,onCompositionStart:Tu,onCompositionEnd:ws,tabIndex:Te,attrs:(0,$e.Z)(gn,!0),maxLength:ls?Jo:void 0})),!ls&&As&&!hr&&U.createElement("span",{className:"".concat(fi,"-selection-item"),title:Lr},As.label),or())},fe=It;function _t(An){return![Se.Z.ESC,Se.Z.SHIFT,Se.Z.BACKSPACE,Se.Z.TAB,Se.Z.WIN_KEY,Se.Z.ALT,Se.Z.META,Se.Z.WIN_KEY_RIGHT,Se.Z.CTRL,Se.Z.SEMICOLON,Se.Z.EQUALS,Se.Z.CAPS_LOCK,Se.Z.CONTEXT_MENU,Se.Z.F1,Se.Z.F2,Se.Z.F3,Se.Z.F4,Se.Z.F5,Se.Z.F6,Se.Z.F7,Se.Z.F8,Se.Z.F9,Se.Z.F10,Se.Z.F11,Se.Z.F12].includes(An)}var Ye=function(gn,Oi){var fi=(0,U.useRef)(null),va=(0,U.useRef)(!1),wa=gn.prefixCls,Ca=gn.open,Aa=gn.mode,ma=gn.showSearch,ka=gn.tokenWithEnter,Uo=gn.autoClearSearchValue,ha=gn.onSearch,xa=gn.onSearchSubmit,eo=gn.onToggleOpen,Te=gn.onInputKeyDown,Po=gn.domRef;U.useImperativeHandle(Oi,function(){return{focus:function(){fi.current.focus()},blur:function(){fi.current.blur()}}});var Hs=jt(0),no=(0,N.Z)(Hs,2),Jo=no[0],os=no[1],Go=function(hr){var Lr=hr.which;(Lr===Se.Z.UP||Lr===Se.Z.DOWN)&&hr.preventDefault(),Te&&Te(hr),Lr===Se.Z.ENTER&&Aa==="tags"&&!va.current&&!Ca&&(xa==null||xa(hr.target.value)),_t(Lr)&&eo(!0)},Wo=function(){os(!0)},za=(0,U.useRef)(null),Tu=function(hr){ha(hr,!0,va.current)!==!1&&eo(!0)},ws=function(){va.current=!0},Zs=function(hr){va.current=!1,Aa!=="combobox"&&Tu(hr.target.value)},ts=function(hr){var Lr=hr.target.value;if(ka&&za.current&&/[\r\n]/.test(za.current)){var or=za.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");Lr=Lr.replace(or,za.current)}za.current=null,Tu(Lr)},Vs=function(hr){var Lr=hr.clipboardData,or=Lr.getData("text");za.current=or},ou=function(hr){var Lr=hr.target;if(Lr!==fi.current){var or=document.body.style.msTouchAction!==void 0;or?setTimeout(function(){fi.current.focus()}):fi.current.focus()}},ls=function(hr){var Lr=Jo();hr.target!==fi.current&&!Lr&&Aa!=="combobox"&&hr.preventDefault(),(Aa!=="combobox"&&(!ma||!Lr)||!Ca)&&(Ca&&Uo!==!1&&ha("",!0,!1),eo())},ki={inputRef:fi,onInputKeyDown:Go,onInputMouseDown:Wo,onInputChange:ts,onInputPaste:Vs,onInputCompositionStart:ws,onInputCompositionEnd:Zs},As=Aa==="multiple"||Aa==="tags"?U.createElement(ft,(0,v.Z)({},gn,ki)):U.createElement(fe,(0,v.Z)({},gn,ki));return U.createElement("div",{ref:Po,className:"".concat(wa,"-selector"),onClick:ou,onMouseDown:ls},As)},Ot=U.forwardRef(Ye);Ot.displayName="Selector";var mt=Ot,Rt=g(81263),pt=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Ge=function(gn){var Oi=gn===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:Oi,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:Oi,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:Oi,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:Oi,adjustY:1}}}},wt=function(gn,Oi){var fi=gn.prefixCls,va=gn.disabled,wa=gn.visible,Ca=gn.children,Aa=gn.popupElement,ma=gn.containerWidth,ka=gn.animation,Uo=gn.transitionName,ha=gn.dropdownStyle,xa=gn.dropdownClassName,eo=gn.direction,Te=eo===void 0?"ltr":eo,Po=gn.placement,Hs=gn.dropdownMatchSelectWidth,no=gn.dropdownRender,Jo=gn.dropdownAlign,os=gn.getPopupContainer,Go=gn.empty,Wo=gn.getTriggerDOMNode,za=gn.onPopupVisibleChange,Tu=gn.onPopupMouseEnter,ws=(0,Z.Z)(gn,pt),Zs="".concat(fi,"-dropdown"),ts=Aa;no&&(ts=no(Aa));var Vs=U.useMemo(function(){return Ge(Hs)},[Hs]),ou=ka?"".concat(Zs,"-").concat(ka):Uo,ls=U.useRef(null);U.useImperativeHandle(Oi,function(){return{getPopupElement:function(){return ls.current}}});var ki=(0,K.Z)({minWidth:ma},ha);return typeof Hs=="number"?ki.width=Hs:Hs&&(ki.width=ma),U.createElement(Rt.Z,(0,v.Z)({},ws,{showAction:za?["click"]:[],hideAction:za?["click"]:[],popupPlacement:Po||(Te==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:Vs,prefixCls:Zs,popupTransitionName:ou,popup:U.createElement("div",{ref:ls,onMouseEnter:Tu},ts),popupAlign:Jo,popupVisible:wa,getPopupContainer:os,popupClassName:We()(xa,(0,c.Z)({},"".concat(Zs,"-empty"),Go)),popupStyle:ki,getTriggerDOMNode:Wo,onPopupVisibleChange:za}),Ca)},ee=U.forwardRef(wt);ee.displayName="SelectTrigger";var Re=ee,dt=g(84506);function D(An,gn){var Oi=An.key,fi;return"value"in An&&(fi=An.value),Oi!=null?Oi:fi!==void 0?fi:"rc-index-key-".concat(gn)}function q(An,gn){var Oi=An||{},fi=Oi.label,va=Oi.value,wa=Oi.options;return{label:fi||(gn?"children":"label"),value:va||"value",options:wa||"options"}}function G(An){var gn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oi=gn.fieldNames,fi=gn.childrenAsData,va=[],wa=q(Oi,!1),Ca=wa.label,Aa=wa.value,ma=wa.options;function ka(Uo,ha){Uo.forEach(function(xa){var eo=xa[Ca];if(ha||!(ma in xa)){var Te=xa[Aa];va.push({key:D(xa,va.length),groupOption:ha,data:xa,label:eo,value:Te})}else{var Po=eo;Po===void 0&&fi&&(Po=xa.label),va.push({key:D(xa,va.length),group:!0,data:xa,label:Po}),ka(xa[ma],!0)}})}return ka(An,!1),va}function O(An){var gn=(0,K.Z)({},An);return"props"in gn||Object.defineProperty(gn,"props",{get:function(){return(0,$.ZP)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),gn}}),gn}function k(An,gn){if(!gn||!gn.length)return null;var Oi=!1;function fi(wa,Ca){var Aa=(0,dt.Z)(Ca),ma=Aa[0],ka=Aa.slice(1);if(!ma)return[wa];var Uo=wa.split(ma);return Oi=Oi||Uo.length>1,Uo.reduce(function(ha,xa){return[].concat((0,M.Z)(ha),(0,M.Z)(fi(xa,ka)))},[]).filter(function(ha){return ha})}var va=fi(An,gn);return Oi?va:null}var X=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],W=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function ae(An){return An==="tags"||An==="multiple"}var Be=U.forwardRef(function(An,gn){var Oi,fi,va=An.id,wa=An.prefixCls,Ca=An.className,Aa=An.showSearch,ma=An.tagRender,ka=An.direction,Uo=An.omitDomProps,ha=An.displayValues,xa=An.onDisplayValuesChange,eo=An.emptyOptions,Te=An.notFoundContent,Po=Te===void 0?"Not Found":Te,Hs=An.onClear,no=An.mode,Jo=An.disabled,os=An.loading,Go=An.getInputElement,Wo=An.getRawInputElement,za=An.open,Tu=An.defaultOpen,ws=An.onDropdownVisibleChange,Zs=An.activeValue,ts=An.onActiveValueChange,Vs=An.activeDescendantId,ou=An.searchValue,ls=An.autoClearSearchValue,ki=An.onSearch,As=An.onSearchSplit,Rs=An.tokenSeparators,hr=An.allowClear,Lr=An.showArrow,or=An.inputIcon,kr=An.clearIcon,Hn=An.OptionList,zr=An.animation,Bo=An.transitionName,Vr=An.dropdownStyle,cr=An.dropdownClassName,ht=An.dropdownMatchSelectWidth,ur=An.dropdownRender,er=An.dropdownAlign,sn=An.placement,fn=An.getPopupContainer,Vn=An.showAction,ni=Vn===void 0?[]:Vn,oi=An.onFocus,Ei=An.onBlur,qi=An.onKeyUp,Pr=An.onKeyDown,Cn=An.onMouseDown,ln=(0,Z.Z)(An,X),bn=ae(no),Kn=(Aa!==void 0?Aa:bn)||no==="combobox",bi=(0,K.Z)({},ln);W.forEach(function(Yo){delete bi[Yo]}),Uo==null||Uo.forEach(function(Yo){delete bi[Yo]});var Yi=U.useState(!1),Gi=(0,N.Z)(Yi,2),aa=Gi[0],Ta=Gi[1];U.useEffect(function(){Ta((0,Le.Z)())},[]);var R=U.useRef(null),_e=U.useRef(null),At=U.useRef(null),Ke=U.useRef(null),nr=U.useRef(null),wr=Et(),Wr=(0,N.Z)(wr,3),In=Wr[0],Dn=Wr[1],Mi=Wr[2];U.useImperativeHandle(gn,function(){var Yo,Gs;return{focus:(Yo=Ke.current)===null||Yo===void 0?void 0:Yo.focus,blur:(Gs=Ke.current)===null||Gs===void 0?void 0:Gs.blur,scrollTo:function(dl){var su;return(su=nr.current)===null||su===void 0?void 0:su.scrollTo(dl)}}});var Bi=U.useMemo(function(){var Yo;if(no!=="combobox")return ou;var Gs=(Yo=ha[0])===null||Yo===void 0?void 0:Yo.value;return typeof Gs=="string"||typeof Gs=="number"?String(Gs):""},[ou,no,ha]),io=no==="combobox"&&typeof Go=="function"&&Go()||null,co=typeof Wo=="function"&&Wo(),Sa=(0,et.x1)(_e,co==null||(Oi=co.props)===null||Oi===void 0?void 0:Oi.ref),Ko=(0,L.Z)(void 0,{defaultValue:Tu,value:za}),Co=(0,N.Z)(Ko,2),Oo=Co[0],Ho=Co[1],Io=Oo,Js=!Po&&eo;(Jo||Js&&Io&&no==="combobox")&&(Io=!1);var Il=Js?!1:Io,Ao=U.useCallback(function(Yo){var Gs=Yo!==void 0?Yo:!Io;Jo||(Ho(Gs),Io!==Gs&&(ws==null||ws(Gs)))},[Jo,Io,Ho,ws]),Va=U.useMemo(function(){return(Rs||[]).some(function(Yo){return[`
`,`\r
`].includes(Yo)})},[Rs]),gs=function(Gs,Kl,dl){var su=!0,Fc=Gs;ts==null||ts(null);var tc=dl?null:k(Gs,Rs);return no!=="combobox"&&tc&&(Fc="",As==null||As(tc),Ao(!1),su=!1),ki&&Bi!==Fc&&ki(Fc,{source:Kl?"typing":"effect"}),su},Ws=function(Gs){!Gs||!Gs.trim()||ki(Gs,{source:"submit"})};U.useEffect(function(){!Io&&!bn&&no!=="combobox"&&gs("",!1,!1)},[Io]),U.useEffect(function(){Oo&&Jo&&Ho(!1),Jo&&Dn(!1)},[Jo]);var bs=jt(),Ps=(0,N.Z)(bs,2),Xs=Ps[0],gl=Ps[1],jf=function(Gs){var Kl=Xs(),dl=Gs.which;if(dl===Se.Z.ENTER&&(no!=="combobox"&&Gs.preventDefault(),Io||Ao(!0)),gl(!!Bi),dl===Se.Z.BACKSPACE&&!Kl&&bn&&!Bi&&ha.length){for(var su=(0,M.Z)(ha),Fc=null,tc=su.length-1;tc>=0;tc-=1){var Tf=su[tc];if(!Tf.disabled){su.splice(tc,1),Fc=Tf;break}}Fc&&xa(su,{type:"remove",values:[Fc]})}for(var _c=arguments.length,Hl=new Array(_c>1?_c-1:0),ff=1;ff<_c;ff++)Hl[ff-1]=arguments[ff];if(Io&&nr.current){var xc;(xc=nr.current).onKeyDown.apply(xc,[Gs].concat(Hl))}Pr==null||Pr.apply(void 0,[Gs].concat(Hl))},Mu=function(Gs){for(var Kl=arguments.length,dl=new Array(Kl>1?Kl-1:0),su=1;su<Kl;su++)dl[su-1]=arguments[su];if(Io&&nr.current){var Fc;(Fc=nr.current).onKeyUp.apply(Fc,[Gs].concat(dl))}qi==null||qi.apply(void 0,[Gs].concat(dl))},yl=function(Gs){var Kl=ha.filter(function(dl){return dl!==Gs});xa(Kl,{type:"remove",values:[Gs]})},lc=U.useRef(!1),Lc=function(){Dn(!0),Jo||(oi&&!lc.current&&oi.apply(void 0,arguments),ni.includes("focus")&&Ao(!0)),lc.current=!0},dh=function(){Dn(!1,function(){lc.current=!1,Ao(!1)}),!Jo&&(Bi&&(no==="tags"?ki(Bi,{source:"submit"}):no==="multiple"&&ki("",{source:"blur"})),Ei&&Ei.apply(void 0,arguments))},_l=[];U.useEffect(function(){return function(){_l.forEach(function(Yo){return clearTimeout(Yo)}),_l.splice(0,_l.length)}},[]);var Us=function(Gs){var Kl,dl=Gs.target,su=(Kl=At.current)===null||Kl===void 0?void 0:Kl.getPopupElement();if(su&&su.contains(dl)){var Fc=setTimeout(function(){var Hl=_l.indexOf(Fc);if(Hl!==-1&&_l.splice(Hl,1),Mi(),!aa&&!su.contains(document.activeElement)){var ff;(ff=Ke.current)===null||ff===void 0||ff.focus()}});_l.push(Fc)}for(var tc=arguments.length,Tf=new Array(tc>1?tc-1:0),_c=1;_c<tc;_c++)Tf[_c-1]=arguments[_c];Cn==null||Cn.apply(void 0,[Gs].concat(Tf))},th=U.useState(null),Df=(0,N.Z)(th,2),Cf=Df[0],lf=Df[1],gd=U.useState({}),Kh=(0,N.Z)(gd,2),yc=Kh[1];function Eh(){yc({})}(0,me.Z)(function(){if(Il){var Yo,Gs=Math.ceil((Yo=R.current)===null||Yo===void 0?void 0:Yo.offsetWidth);Cf!==Gs&&!Number.isNaN(Gs)&&lf(Gs)}},[Il]);var cf;co&&(cf=function(Gs){Ao(Gs)}),pe(function(){var Yo;return[R.current,(Yo=At.current)===null||Yo===void 0?void 0:Yo.getPopupElement()]},Il,Ao,!!co);var Af=U.useMemo(function(){return(0,K.Z)((0,K.Z)({},An),{},{notFoundContent:Po,open:Io,triggerOpen:Il,id:va,showSearch:Kn,multiple:bn,toggleOpen:Ao})},[An,Po,Il,Io,va,Kn,bn,Ao]),_f=Lr!==void 0?Lr:os||!bn&&no!=="combobox",kc;_f&&(kc=U.createElement(re,{className:We()("".concat(wa,"-arrow"),(0,c.Z)({},"".concat(wa,"-arrow-loading"),os)),customizeIcon:or,customizeIconProps:{loading:os,searchValue:Bi,open:Io,focused:In,showSearch:Kn}}));var Ff,Zl=function(){var Gs;Hs==null||Hs(),(Gs=Ke.current)===null||Gs===void 0||Gs.focus(),xa([],{type:"clear",values:ha}),gs("",!1,!1)};!Jo&&hr&&(ha.length||Bi)&&!(no==="combobox"&&Bi==="")&&(Ff=U.createElement(re,{className:"".concat(wa,"-clear"),onMouseDown:Zl,customizeIcon:kr},"\xD7"));var Dc=U.createElement(Hn,{ref:nr}),ad=We()(wa,Ca,(fi={},(0,c.Z)(fi,"".concat(wa,"-focused"),In),(0,c.Z)(fi,"".concat(wa,"-multiple"),bn),(0,c.Z)(fi,"".concat(wa,"-single"),!bn),(0,c.Z)(fi,"".concat(wa,"-allow-clear"),hr),(0,c.Z)(fi,"".concat(wa,"-show-arrow"),_f),(0,c.Z)(fi,"".concat(wa,"-disabled"),Jo),(0,c.Z)(fi,"".concat(wa,"-loading"),os),(0,c.Z)(fi,"".concat(wa,"-open"),Io),(0,c.Z)(fi,"".concat(wa,"-customize-input"),io),(0,c.Z)(fi,"".concat(wa,"-show-search"),Kn),fi)),rh=U.createElement(Re,{ref:At,disabled:Jo,prefixCls:wa,visible:Il,popupElement:Dc,containerWidth:Cf,animation:zr,transitionName:Bo,dropdownStyle:Vr,dropdownClassName:cr,direction:ka,dropdownMatchSelectWidth:ht,dropdownRender:ur,dropdownAlign:er,placement:sn,getPopupContainer:fn,empty:eo,getTriggerDOMNode:function(){return _e.current},onPopupVisibleChange:cf,onPopupMouseEnter:Eh},co?U.cloneElement(co,{ref:Sa}):U.createElement(mt,(0,v.Z)({},An,{domRef:_e,prefixCls:wa,inputElement:io,ref:Ke,id:va,showSearch:Kn,autoClearSearchValue:ls,mode:no,activeDescendantId:Vs,tagRender:ma,values:ha,open:Io,onToggleOpen:Ao,activeValue:Zs,searchValue:Bi,onSearch:gs,onSearchSubmit:Ws,onRemove:yl,tokenWithEnter:Va}))),od;return co?od=rh:od=U.createElement("div",(0,v.Z)({className:ad},bi,{ref:R,onMouseDown:Us,onKeyDown:jf,onKeyUp:Mu,onFocus:Lc,onBlur:dh}),In&&!Io&&U.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(ha.map(function(Yo){var Gs=Yo.label,Kl=Yo.value;return["number","string"].includes((0,B.Z)(Gs))?Gs:Kl}).join(", "))),rh,kc,Ff),U.createElement(at.Provider,{value:Af},od)}),ve=Be,Je=function(An,gn){var Oi=U.useRef({values:new Map,options:new Map}),fi=U.useMemo(function(){var wa=Oi.current,Ca=wa.values,Aa=wa.options,ma=An.map(function(ha){if(ha.label===void 0){var xa;return(0,K.Z)((0,K.Z)({},ha),{},{label:(xa=Ca.get(ha.value))===null||xa===void 0?void 0:xa.label})}return ha}),ka=new Map,Uo=new Map;return ma.forEach(function(ha){ka.set(ha.value,ha),Uo.set(ha.value,gn.get(ha.value)||Aa.get(ha.value))}),Oi.current.values=ka,Oi.current.options=Uo,ma},[An,gn]),va=U.useCallback(function(wa){return gn.get(wa)||Oi.current.options.get(wa)},[gn]);return[fi,va]};function ot(An,gn){return ce(An).join("").toUpperCase().includes(gn)}var Qe=function(An,gn,Oi,fi,va){return U.useMemo(function(){if(!Oi||fi===!1)return An;var wa=gn.options,Ca=gn.label,Aa=gn.value,ma=[],ka=typeof fi=="function",Uo=Oi.toUpperCase(),ha=ka?fi:function(eo,Te){return va?ot(Te[va],Uo):Te[wa]?ot(Te[Ca!=="children"?Ca:"label"],Uo):ot(Te[Aa],Uo)},xa=ka?function(eo){return O(eo)}:function(eo){return eo};return An.forEach(function(eo){if(eo[wa]){var Te=ha(Oi,xa(eo));if(Te)ma.push(eo);else{var Po=eo[wa].filter(function(Hs){return ha(Oi,xa(Hs))});Po.length&&ma.push((0,K.Z)((0,K.Z)({},eo),{},(0,c.Z)({},wa,Po)))}return}ha(Oi,xa(eo))&&ma.push(eo)}),ma},[An,fi,va,Oi,gn])},ir=g(98924),mr=0,Ar=(0,ir.Z)();function Er(){var An;return Ar?(An=mr,mr+=1):An="TEST_OR_SSR",An}function Zt(An){var gn=U.useState(),Oi=(0,N.Z)(gn,2),fi=Oi[0],va=Oi[1];return U.useEffect(function(){va("rc_select_".concat(Er()))},[]),An||fi}var Tr=g(50344),pn=["children","value"],un=["children"];function Zn(An){var gn=An,Oi=gn.key,fi=gn.props,va=fi.children,wa=fi.value,Ca=(0,Z.Z)(fi,pn);return(0,K.Z)({key:Oi,value:wa!==void 0?wa:Oi,children:va},Ca)}function Cr(An){var gn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(0,Tr.Z)(An).map(function(Oi,fi){if(!U.isValidElement(Oi)||!Oi.type)return null;var va=Oi,wa=va.type.isSelectOptGroup,Ca=va.key,Aa=va.props,ma=Aa.children,ka=(0,Z.Z)(Aa,un);return gn||!wa?Zn(Oi):(0,K.Z)((0,K.Z)({key:"__RC_SELECT_GRP__".concat(Ca===null?fi:Ca,"__"),label:Ca},ka),{},{options:Cr(ma)})}).filter(function(Oi){return Oi})}function Nr(An,gn,Oi,fi,va){return U.useMemo(function(){var wa=An,Ca=!An;Ca&&(wa=Cr(gn));var Aa=new Map,ma=new Map,ka=function(xa,eo,Te){Te&&typeof Te=="string"&&xa.set(eo[Te],eo)};function Uo(ha){for(var xa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,eo=0;eo<ha.length;eo+=1){var Te=ha[eo];!Te[Oi.options]||xa?(Aa.set(Te[Oi.value],Te),ka(ma,Te,Oi.label),ka(ma,Te,fi),ka(ma,Te,va)):Uo(Te[Oi.options],!0)}}return Uo(wa),{options:wa,valueOptions:Aa,labelOptions:ma}},[An,gn,Oi,fi,va])}function bt(An){var gn=U.useRef();gn.current=An;var Oi=U.useCallback(function(){return gn.current.apply(gn,arguments)},[]);return Oi}var jn=function(){return null};jn.isSelectOptGroup=!0;var Pt=jn,zt=function(){return null};zt.isSelectOption=!0;var Qt=zt,dr=g(56982),_r=g(98423),Hr=g(73453),Qr=U.createContext(null),fr=Qr;function tt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Yr=["disabled","title","children","style","className"];function Tn(An){return typeof An=="string"||typeof An=="number"}var wn=function(gn,Oi){var fi=Lt(),va=fi.prefixCls,wa=fi.id,Ca=fi.open,Aa=fi.multiple,ma=fi.mode,ka=fi.searchValue,Uo=fi.toggleOpen,ha=fi.notFoundContent,xa=fi.onPopupScroll,eo=U.useContext(fr),Te=eo.flattenOptions,Po=eo.onActiveValue,Hs=eo.defaultActiveFirstOption,no=eo.onSelect,Jo=eo.menuItemSelectedIcon,os=eo.rawValues,Go=eo.fieldNames,Wo=eo.virtual,za=eo.listHeight,Tu=eo.listItemHeight,ws="".concat(va,"-item"),Zs=(0,dr.Z)(function(){return Te},[Ca,Te],function(ht,ur){return ur[0]&&ht[1]!==ur[1]}),ts=U.useRef(null),Vs=function(ur){ur.preventDefault()},ou=function(ur){ts.current&&ts.current.scrollTo(typeof ur=="number"?{index:ur}:ur)},ls=function(ur){for(var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,sn=Zs.length,fn=0;fn<sn;fn+=1){var Vn=(ur+fn*er+sn)%sn,ni=Zs[Vn],oi=ni.group,Ei=ni.data;if(!oi&&!Ei.disabled)return Vn}return-1},ki=U.useState(function(){return ls(0)}),As=(0,N.Z)(ki,2),Rs=As[0],hr=As[1],Lr=function(ur){var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;hr(ur);var sn={source:er?"keyboard":"mouse"},fn=Zs[ur];if(!fn){Po(null,-1,sn);return}Po(fn.value,ur,sn)};(0,U.useEffect)(function(){Lr(Hs!==!1?ls(0):-1)},[Zs.length,ka]);var or=U.useCallback(function(ht){return os.has(ht)&&ma!=="combobox"},[ma,(0,M.Z)(os).toString(),os.size]);(0,U.useEffect)(function(){var ht=setTimeout(function(){if(!Aa&&Ca&&os.size===1){var er=Array.from(os)[0],sn=Zs.findIndex(function(fn){var Vn=fn.data;return Vn.value===er});sn!==-1&&(Lr(sn),ou(sn))}});if(Ca){var ur;(ur=ts.current)===null||ur===void 0||ur.scrollTo(void 0)}return function(){return clearTimeout(ht)}},[Ca,ka]);var kr=function(ur){ur!==void 0&&no(ur,{selected:!os.has(ur)}),Aa||Uo(!1)};if(U.useImperativeHandle(Oi,function(){return{onKeyDown:function(ur){var er=ur.which,sn=ur.ctrlKey;switch(er){case Se.Z.N:case Se.Z.P:case Se.Z.UP:case Se.Z.DOWN:{var fn=0;if(er===Se.Z.UP?fn=-1:er===Se.Z.DOWN?fn=1:tt()&&sn&&(er===Se.Z.N?fn=1:er===Se.Z.P&&(fn=-1)),fn!==0){var Vn=ls(Rs+fn,fn);ou(Vn),Lr(Vn,!0)}break}case Se.Z.ENTER:{var ni=Zs[Rs];ni&&!ni.data.disabled?kr(ni.value):kr(void 0),Ca&&ur.preventDefault();break}case Se.Z.ESC:Uo(!1),Ca&&ur.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ur){ou(ur)}}}),Zs.length===0)return U.createElement("div",{role:"listbox",id:"".concat(wa,"_list"),className:"".concat(ws,"-empty"),onMouseDown:Vs},ha);var Hn=Object.keys(Go).map(function(ht){return Go[ht]}),zr=function(ur){return ur.label};function Bo(ht,ur){var er=ht.group;return{role:er?"presentation":"option",id:"".concat(wa,"_list_").concat(ur)}}var Vr=function(ur){var er=Zs[ur];if(!er)return null;var sn=er.data||{},fn=sn.value,Vn=er.group,ni=(0,$e.Z)(sn,!0),oi=zr(er);return er?U.createElement("div",(0,v.Z)({"aria-label":typeof oi=="string"&&!Vn?oi:null},ni,{key:ur},Bo(er,ur),{"aria-selected":or(fn)}),fn):null},cr={role:"listbox",id:"".concat(wa,"_list")};return U.createElement(U.Fragment,null,Wo&&U.createElement("div",(0,v.Z)({},cr,{style:{height:0,width:0,overflow:"hidden"}}),Vr(Rs-1),Vr(Rs),Vr(Rs+1)),U.createElement(Hr.Z,{itemKey:"key",ref:ts,data:Zs,height:za,itemHeight:Tu,fullHeight:!1,onMouseDown:Vs,onScroll:xa,virtual:Wo,innerProps:Wo?null:cr},function(ht,ur){var er,sn=ht.group,fn=ht.groupOption,Vn=ht.data,ni=ht.label,oi=ht.value,Ei=Vn.key;if(sn){var qi,Pr=(qi=Vn.title)!==null&&qi!==void 0?qi:Tn(ni)?ni.toString():void 0;return U.createElement("div",{className:We()(ws,"".concat(ws,"-group")),title:Pr},ni!==void 0?ni:Ei)}var Cn=Vn.disabled,ln=Vn.title,bn=Vn.children,Kn=Vn.style,bi=Vn.className,Yi=(0,Z.Z)(Vn,Yr),Gi=(0,_r.Z)(Yi,Hn),aa=or(oi),Ta="".concat(ws,"-option"),R=We()(ws,Ta,bi,(er={},(0,c.Z)(er,"".concat(Ta,"-grouped"),fn),(0,c.Z)(er,"".concat(Ta,"-active"),Rs===ur&&!Cn),(0,c.Z)(er,"".concat(Ta,"-disabled"),Cn),(0,c.Z)(er,"".concat(Ta,"-selected"),aa),er)),_e=zr(ht),At=!Jo||typeof Jo=="function"||aa,Ke=typeof _e=="number"?_e:_e||oi,nr=Tn(Ke)?Ke.toString():void 0;return ln!==void 0&&(nr=ln),U.createElement("div",(0,v.Z)({},(0,$e.Z)(Gi),Wo?{}:Bo(ht,ur),{"aria-selected":aa,className:R,title:nr,onMouseMove:function(){Rs===ur||Cn||Lr(ur)},onClick:function(){Cn||kr(oi)},style:Kn}),U.createElement("div",{className:"".concat(Ta,"-content")},Ke),U.isValidElement(Jo)||aa,At&&U.createElement(re,{className:"".concat(ws,"-option-state"),customizeIcon:Jo,customizeIconProps:{isSelected:aa}},aa?"\u2713":null))}))},Nn=U.forwardRef(wn);Nn.displayName="OptionList";var Si=Nn;function fa(An){var gn=An.mode,Oi=An.options,fi=An.children,va=An.backfill,wa=An.allowClear,Ca=An.placeholder,Aa=An.getInputElement,ma=An.showSearch,ka=An.onSearch,Uo=An.defaultOpen,ha=An.autoFocus,xa=An.labelInValue,eo=An.value,Te=An.inputValue,Po=An.optionLabelProp,Hs=isMultiple(gn),no=ma!==void 0?ma:Hs||gn==="combobox",Jo=Oi||convertChildrenToData(fi);if(warning(gn!=="tags"||Jo.every(function(za){return!za.disabled}),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),gn==="tags"||gn==="combobox"){var os=Jo.some(function(za){return za.options?za.options.some(function(Tu){return typeof("value"in Tu?Tu.value:Tu.key)=="number"}):typeof("value"in za?za.value:za.key)=="number"});warning(!os,"`value` of Option should not use number type when `mode` is `tags` or `combobox`.")}if(warning(gn!=="combobox"||!Po,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),warning(gn==="combobox"||!va,"`backfill` only works with `combobox` mode."),warning(gn==="combobox"||!Aa,"`getInputElement` only work with `combobox` mode."),noteOnce(gn!=="combobox"||!Aa||!wa||!Ca,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),ka&&!no&&gn!=="combobox"&&gn!=="tags"&&warning(!1,"`onSearch` should work with `showSearch` instead of use alone."),noteOnce(!Uo||ha,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),eo!=null){var Go=toArray(eo);warning(!xa||Go.every(function(za){return _typeof(za)==="object"&&("key"in za||"value"in za)}),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),warning(!Hs||Array.isArray(eo),"`value` should be array when `mode` is `multiple` or `tags`")}if(fi){var Wo=null;toNodeArray(fi).some(function(za){if(!React.isValidElement(za)||!za.type)return!1;var Tu=za,ws=Tu.type;if(ws.isSelectOption)return!1;if(ws.isSelectOptGroup){var Zs=toNodeArray(za.props.children).every(function(ts){return!React.isValidElement(ts)||!za.type||ts.type.isSelectOption?!0:(Wo=ts.type,!1)});return!Zs}return Wo=ws,!0}),Wo&&warning(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(Wo.displayName||Wo.name||Wo,"`.")),warning(Te===void 0,"`inputValue` is deprecated, please use `searchValue` instead.")}}function Xi(An,gn){if(An){var Oi=function fi(va){for(var wa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ca=0;Ca<va.length;Ca++){var Aa=va[Ca];if(Aa[gn==null?void 0:gn.value]===null)return warning(!1,"`value` in Select options should not be `null`."),!0;if(!wa&&Array.isArray(Aa[gn==null?void 0:gn.options])&&fi(Aa[gn==null?void 0:gn.options],!0))break}};Oi(An)}}var Ln=null,na=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],xi=["inputValue"];function ta(An){return!An||(0,B.Z)(An)!=="object"}var La=U.forwardRef(function(An,gn){var Oi=An.id,fi=An.mode,va=An.prefixCls,wa=va===void 0?"rc-select":va,Ca=An.backfill,Aa=An.fieldNames,ma=An.inputValue,ka=An.searchValue,Uo=An.onSearch,ha=An.autoClearSearchValue,xa=ha===void 0?!0:ha,eo=An.onSelect,Te=An.onDeselect,Po=An.dropdownMatchSelectWidth,Hs=Po===void 0?!0:Po,no=An.filterOption,Jo=An.filterSort,os=An.optionFilterProp,Go=An.optionLabelProp,Wo=An.options,za=An.children,Tu=An.defaultActiveFirstOption,ws=An.menuItemSelectedIcon,Zs=An.virtual,ts=An.listHeight,Vs=ts===void 0?200:ts,ou=An.listItemHeight,ls=ou===void 0?20:ou,ki=An.value,As=An.defaultValue,Rs=An.labelInValue,hr=An.onChange,Lr=(0,Z.Z)(An,na),or=Zt(Oi),kr=ae(fi),Hn=!!(!Wo&&za),zr=U.useMemo(function(){return no===void 0&&fi==="combobox"?!1:no},[no,fi]),Bo=U.useMemo(function(){return q(Aa,Hn)},[JSON.stringify(Aa),Hn]),Vr=(0,L.Z)("",{value:ka!==void 0?ka:ma,postState:function(Va){return Va||""}}),cr=(0,N.Z)(Vr,2),ht=cr[0],ur=cr[1],er=Nr(Wo,za,Bo,os,Go),sn=er.valueOptions,fn=er.labelOptions,Vn=er.options,ni=U.useCallback(function(Ao){var Va=ce(Ao);return Va.map(function(gs){var Ws,bs,Ps,Xs,gl;if(ta(gs))Ws=gs;else{var jf;Ps=gs.key,bs=gs.label,Ws=(jf=gs.value)!==null&&jf!==void 0?jf:Ps}var Mu=sn.get(Ws);if(Mu){var yl;if(bs===void 0&&(bs=Mu==null?void 0:Mu[Go||Bo.label]),Ps===void 0&&(Ps=(yl=Mu==null?void 0:Mu.key)!==null&&yl!==void 0?yl:Ws),Xs=Mu==null?void 0:Mu.disabled,gl=Mu==null?void 0:Mu.title,!1)var lc}return{label:bs,value:Ws,key:Ps,disabled:Xs,title:gl}})},[Bo,Go,sn]),oi=(0,L.Z)(As,{value:ki}),Ei=(0,N.Z)(oi,2),qi=Ei[0],Pr=Ei[1],Cn=U.useMemo(function(){var Ao,Va=ni(qi);return fi==="combobox"&&!((Ao=Va[0])!==null&&Ao!==void 0&&Ao.value)?[]:Va},[qi,ni,fi]),ln=Je(Cn,sn),bn=(0,N.Z)(ln,2),Kn=bn[0],bi=bn[1],Yi=U.useMemo(function(){if(!fi&&Kn.length===1){var Ao=Kn[0];if(Ao.value===null&&(Ao.label===null||Ao.label===void 0))return[]}return Kn.map(function(Va){var gs;return(0,K.Z)((0,K.Z)({},Va),{},{label:(gs=Va.label)!==null&&gs!==void 0?gs:Va.value})})},[fi,Kn]),Gi=U.useMemo(function(){return new Set(Kn.map(function(Ao){return Ao.value}))},[Kn]);U.useEffect(function(){if(fi==="combobox"){var Ao,Va=(Ao=Kn[0])===null||Ao===void 0?void 0:Ao.value;ur(Me(Va)?String(Va):"")}},[Kn]);var aa=bt(function(Ao,Va){var gs,Ws=Va!=null?Va:Ao;return gs={},(0,c.Z)(gs,Bo.value,Ao),(0,c.Z)(gs,Bo.label,Ws),gs}),Ta=U.useMemo(function(){if(fi!=="tags")return Vn;var Ao=(0,M.Z)(Vn),Va=function(Ws){return sn.has(Ws)};return(0,M.Z)(Kn).sort(function(gs,Ws){return gs.value<Ws.value?-1:1}).forEach(function(gs){var Ws=gs.value;Va(Ws)||Ao.push(aa(Ws,gs.label))}),Ao},[aa,Vn,sn,Kn,fi]),R=Qe(Ta,Bo,ht,zr,os),_e=U.useMemo(function(){return fi!=="tags"||!ht||R.some(function(Ao){return Ao[os||"value"]===ht})?R:[aa(ht)].concat((0,M.Z)(R))},[aa,os,fi,R,ht]),At=U.useMemo(function(){return Jo?(0,M.Z)(_e).sort(function(Ao,Va){return Jo(Ao,Va)}):_e},[_e,Jo]),Ke=U.useMemo(function(){return G(At,{fieldNames:Bo,childrenAsData:Hn})},[At,Bo,Hn]),nr=function(Va){var gs=ni(Va);if(Pr(gs),hr&&(gs.length!==Kn.length||gs.some(function(Ps,Xs){var gl;return((gl=Kn[Xs])===null||gl===void 0?void 0:gl.value)!==(Ps==null?void 0:Ps.value)}))){var Ws=Rs?gs:gs.map(function(Ps){return Ps.value}),bs=gs.map(function(Ps){return O(bi(Ps.value))});hr(kr?Ws:Ws[0],kr?bs:bs[0])}},wr=U.useState(null),Wr=(0,N.Z)(wr,2),In=Wr[0],Dn=Wr[1],Mi=U.useState(0),Bi=(0,N.Z)(Mi,2),io=Bi[0],co=Bi[1],Sa=Tu!==void 0?Tu:fi!=="combobox",Ko=U.useCallback(function(Ao,Va){var gs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ws=gs.source,bs=Ws===void 0?"keyboard":Ws;co(Va),Ca&&fi==="combobox"&&Ao!==null&&bs==="keyboard"&&Dn(String(Ao))},[Ca,fi]),Co=function(Va,gs,Ws){var bs=function(){var _l,Us=bi(Va);return[Rs?{label:Us==null?void 0:Us[Bo.label],value:Va,key:(_l=Us==null?void 0:Us.key)!==null&&_l!==void 0?_l:Va}:Va,O(Us)]};if(gs&&eo){var Ps=bs(),Xs=(0,N.Z)(Ps,2),gl=Xs[0],jf=Xs[1];eo(gl,jf)}else if(!gs&&Te&&Ws!=="clear"){var Mu=bs(),yl=(0,N.Z)(Mu,2),lc=yl[0],Lc=yl[1];Te(lc,Lc)}},Oo=bt(function(Ao,Va){var gs,Ws=kr?Va.selected:!0;Ws?gs=kr?[].concat((0,M.Z)(Kn),[Ao]):[Ao]:gs=Kn.filter(function(bs){return bs.value!==Ao}),nr(gs),Co(Ao,Ws),fi==="combobox"?Dn(""):(!ae||xa)&&(ur(""),Dn(""))}),Ho=function(Va,gs){nr(Va);var Ws=gs.type,bs=gs.values;(Ws==="remove"||Ws==="clear")&&bs.forEach(function(Ps){Co(Ps.value,!1,Ws)})},Io=function(Va,gs){if(ur(Va),Dn(null),gs.source==="submit"){var Ws=(Va||"").trim();if(Ws){var bs=Array.from(new Set([].concat((0,M.Z)(Gi),[Ws])));nr(bs),Co(Ws,!0),ur("")}return}gs.source!=="blur"&&(fi==="combobox"&&nr(Va),Uo==null||Uo(Va))},Js=function(Va){var gs=Va;fi!=="tags"&&(gs=Va.map(function(bs){var Ps=fn.get(bs);return Ps==null?void 0:Ps.value}).filter(function(bs){return bs!==void 0}));var Ws=Array.from(new Set([].concat((0,M.Z)(Gi),(0,M.Z)(gs))));nr(Ws),Ws.forEach(function(bs){Co(bs,!0)})},Il=U.useMemo(function(){var Ao=Zs!==!1&&Hs!==!1;return(0,K.Z)((0,K.Z)({},er),{},{flattenOptions:Ke,onActiveValue:Ko,defaultActiveFirstOption:Sa,onSelect:Oo,menuItemSelectedIcon:ws,rawValues:Gi,fieldNames:Bo,virtual:Ao,listHeight:Vs,listItemHeight:ls,childrenAsData:Hn})},[er,Ke,Ko,Sa,Oo,ws,Gi,Bo,Zs,Hs,Vs,ls,Hn]);return U.createElement(fr.Provider,{value:Il},U.createElement(ve,(0,v.Z)({},Lr,{id:or,prefixCls:wa,ref:gn,omitDomProps:xi,mode:fi,displayValues:Yi,onDisplayValuesChange:Ho,searchValue:ht,onSearch:Io,autoClearSearchValue:xa,onSearchSplit:Js,dropdownMatchSelectWidth:Hs,OptionList:Si,emptyOptions:!Ke.length,activeValue:In,activeDescendantId:"".concat(or,"_list_").concat(io)})))}),Ki=La;Ki.Option=Qt,Ki.OptGroup=Pt;var jo=Ki,uo=jo},43159:function(vt,Ee,g){"use strict";g.d(Ee,{C:function(){return c}});var v={adjustX:1,adjustY:1},M=[0,0],c={left:{points:["cr","cl"],overflow:v,offset:[-4,0],targetOffset:M},right:{points:["cl","cr"],overflow:v,offset:[4,0],targetOffset:M},top:{points:["bc","tc"],overflow:v,offset:[0,-4],targetOffset:M},bottom:{points:["tc","bc"],overflow:v,offset:[0,4],targetOffset:M},topLeft:{points:["bl","tl"],overflow:v,offset:[0,-4],targetOffset:M},leftTop:{points:["tr","tl"],overflow:v,offset:[-4,0],targetOffset:M},topRight:{points:["br","tr"],overflow:v,offset:[0,-4],targetOffset:M},rightTop:{points:["tl","tr"],overflow:v,offset:[4,0],targetOffset:M},bottomRight:{points:["tr","br"],overflow:v,offset:[0,4],targetOffset:M},rightBottom:{points:["bl","br"],overflow:v,offset:[4,0],targetOffset:M},bottomLeft:{points:["tl","bl"],overflow:v,offset:[0,4],targetOffset:M},leftBottom:{points:["br","bl"],overflow:v,offset:[-4,0],targetOffset:M}},K=null},44958:function(vt,Ee,g){"use strict";g.d(Ee,{hq:function(){return Se},jL:function(){return We}});var v=g(98924),M=g(94999),c="data-rc-order",K="rc-util-key",N=new Map;function Z(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},at=et.mark;return at?at.startsWith("data-")?at:"data-".concat(at):K}function B(et){if(et.attachTo)return et.attachTo;var at=document.querySelector("head");return at||document.body}function L(et){return et==="queue"?"prependQueue":et?"prepend":"append"}function $(et){return Array.from((N.get(et)||et).children).filter(function(at){return at.tagName==="STYLE"})}function U(et){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,v.Z)())return null;var Lt=at.csp,Et=at.prepend,jt=document.createElement("style");jt.setAttribute(c,L(Et)),Lt!=null&&Lt.nonce&&(jt.nonce=Lt==null?void 0:Lt.nonce),jt.innerHTML=et;var pe=B(at),$e=pe.firstChild;if(Et){if(Et==="queue"){var ye=$(pe).filter(function(ie){return["prepend","prependQueue"].includes(ie.getAttribute(c))});if(ye.length)return pe.insertBefore(jt,ye[ye.length-1].nextSibling),jt}pe.insertBefore(jt,$e)}else pe.appendChild(jt);return jt}function ke(et){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=B(at);return $(Lt).find(function(Et){return Et.getAttribute(Z(at))===et})}function We(et){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=ke(et,at);if(Lt){var Et=B(at);Et.removeChild(Lt)}}function me(et,at){var Lt=N.get(et);if(!Lt||!(0,M.Z)(document,Lt)){var Et=U("",at),jt=Et.parentNode;N.set(et,jt),et.removeChild(Et)}}function Le(){N.clear()}function Se(et,at){var Lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Et=B(Lt);me(Et,Lt);var jt=ke(at,Lt);if(jt){var pe,$e;if((pe=Lt.csp)!==null&&pe!==void 0&&pe.nonce&&jt.nonce!==(($e=Lt.csp)===null||$e===void 0?void 0:$e.nonce)){var ye;jt.nonce=(ye=Lt.csp)===null||ye===void 0?void 0:ye.nonce}return jt.innerHTML!==et&&(jt.innerHTML=et),jt}var ie=U(et,Lt);return ie.setAttribute(Z(Lt),at),ie}},38135:function(vt,Ee,g){"use strict";var v;g.d(Ee,{s:function(){return Lt},v:function(){return ye}});var M=g(74165),c=g(15861),K=g(71002),N=g(1413),Z=g(73935),B=(0,N.Z)({},v||(v=g.t(Z,2))),L=B.version,$=B.render,U=B.unmountComponentAtNode,ke;try{var We=Number((L||"").split(".")[0]);We>=18&&(ke=B.createRoot)}catch(re){}function me(re){var De=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;De&&(0,K.Z)(De)==="object"&&(De.usingClientEntryPoint=re)}var Le="__rc_react_root__";function Se(re,De){me(!0);var le=De[Le]||ke(De);me(!1),le.render(re),De[Le]=le}function et(re,De){$(re,De)}function at(re,De){}function Lt(re,De){if(ke){Se(re,De);return}et(re,De)}function Et(re){return jt.apply(this,arguments)}function jt(){return jt=(0,c.Z)((0,M.Z)().mark(function re(De){return(0,M.Z)().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",Promise.resolve().then(function(){var ce;(ce=De[Le])===null||ce===void 0||ce.unmount(),delete De[Le]}));case 1:case"end":return ge.stop()}},re)})),jt.apply(this,arguments)}function pe(re){U(re)}function $e(re){}function ye(re){return ie.apply(this,arguments)}function ie(){return ie=(0,c.Z)((0,M.Z)().mark(function re(De){return(0,M.Z)().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(ke===void 0){ge.next=2;break}return ge.abrupt("return",Et(De));case 2:pe(De);case 3:case"end":return ge.stop()}},re)})),ie.apply(this,arguments)}},64217:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return L}});var v=g(1413),M=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,c=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,K="".concat(M," ").concat(c).split(/[\s\n]+/),N="aria-",Z="data-";function B($,U){return $.indexOf(U)===0}function L($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke;U===!1?ke={aria:!0,data:!0,attr:!0}:U===!0?ke={aria:!0}:ke=(0,v.Z)({},U);var We={};return Object.keys($).forEach(function(me){(ke.aria&&(me==="role"||B(me,N))||ke.data&&B(me,Z)||ke.attr&&K.includes(me))&&(We[me]=$[me])}),We}},88306:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return v}});function v(M,c){for(var K=M,N=0;N<c.length;N+=1){if(K==null)return;K=K[c[N]]}return K}},73453:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return Ot}});var v=g(87462),M=g(4942),c=g(1413),K=g(97685),N=g(91),Z=g(67294),B=g(94184),L=g.n(B),$=g(48555),U=Z.forwardRef(function(mt,Rt){var pt=mt.height,Ge=mt.offset,wt=mt.children,ee=mt.prefixCls,Re=mt.onInnerResize,dt=mt.innerProps,D={},q={display:"flex",flexDirection:"column"};return Ge!==void 0&&(D={height:pt,position:"relative",overflow:"hidden"},q=(0,c.Z)((0,c.Z)({},q),{},{transform:"translateY(".concat(Ge,"px)"),position:"absolute",left:0,right:0,top:0})),Z.createElement("div",{style:D},Z.createElement($.Z,{onResize:function(O){var k=O.offsetHeight;k&&Re&&Re()}},Z.createElement("div",(0,v.Z)({style:q,className:L()((0,M.Z)({},"".concat(ee,"-holder-inner"),ee)),ref:Rt},dt),wt)))});U.displayName="Filler";var ke=U,We=g(15671),me=g(43144),Le=g(60136),Se=g(29388),et=g(75164),at=20;function Lt(mt){return"touches"in mt?mt.touches[0].pageY:mt.pageY}var Et=function(mt){(0,Le.Z)(pt,mt);var Rt=(0,Se.Z)(pt);function pt(){var Ge;(0,We.Z)(this,pt);for(var wt=arguments.length,ee=new Array(wt),Re=0;Re<wt;Re++)ee[Re]=arguments[Re];return Ge=Rt.call.apply(Rt,[this].concat(ee)),Ge.moveRaf=null,Ge.scrollbarRef=Z.createRef(),Ge.thumbRef=Z.createRef(),Ge.visibleTimeout=null,Ge.state={dragging:!1,pageY:null,startTop:null,visible:!1},Ge.delayHidden=function(){clearTimeout(Ge.visibleTimeout),Ge.setState({visible:!0}),Ge.visibleTimeout=setTimeout(function(){Ge.setState({visible:!1})},2e3)},Ge.onScrollbarTouchStart=function(dt){dt.preventDefault()},Ge.onContainerMouseDown=function(dt){dt.stopPropagation(),dt.preventDefault()},Ge.patchEvents=function(){window.addEventListener("mousemove",Ge.onMouseMove),window.addEventListener("mouseup",Ge.onMouseUp),Ge.thumbRef.current.addEventListener("touchmove",Ge.onMouseMove),Ge.thumbRef.current.addEventListener("touchend",Ge.onMouseUp)},Ge.removeEvents=function(){var dt;window.removeEventListener("mousemove",Ge.onMouseMove),window.removeEventListener("mouseup",Ge.onMouseUp),(dt=Ge.scrollbarRef.current)===null||dt===void 0||dt.removeEventListener("touchstart",Ge.onScrollbarTouchStart),Ge.thumbRef.current&&(Ge.thumbRef.current.removeEventListener("touchstart",Ge.onMouseDown),Ge.thumbRef.current.removeEventListener("touchmove",Ge.onMouseMove),Ge.thumbRef.current.removeEventListener("touchend",Ge.onMouseUp)),et.Z.cancel(Ge.moveRaf)},Ge.onMouseDown=function(dt){var D=Ge.props.onStartMove;Ge.setState({dragging:!0,pageY:Lt(dt),startTop:Ge.getTop()}),D(),Ge.patchEvents(),dt.stopPropagation(),dt.preventDefault()},Ge.onMouseMove=function(dt){var D=Ge.state,q=D.dragging,G=D.pageY,O=D.startTop,k=Ge.props.onScroll;if(et.Z.cancel(Ge.moveRaf),q){var X=Lt(dt)-G,W=O+X,ae=Ge.getEnableScrollRange(),Be=Ge.getEnableHeightRange(),ve=Be?W/Be:0,Je=Math.ceil(ve*ae);Ge.moveRaf=(0,et.Z)(function(){k(Je)})}},Ge.onMouseUp=function(){var dt=Ge.props.onStopMove;Ge.setState({dragging:!1}),dt(),Ge.removeEvents()},Ge.getSpinHeight=function(){var dt=Ge.props,D=dt.height,q=dt.count,G=D/q*10;return G=Math.max(G,at),G=Math.min(G,D/2),Math.floor(G)},Ge.getEnableScrollRange=function(){var dt=Ge.props,D=dt.scrollHeight,q=dt.height;return D-q||0},Ge.getEnableHeightRange=function(){var dt=Ge.props.height,D=Ge.getSpinHeight();return dt-D||0},Ge.getTop=function(){var dt=Ge.props.scrollTop,D=Ge.getEnableScrollRange(),q=Ge.getEnableHeightRange();if(dt===0||D===0)return 0;var G=dt/D;return G*q},Ge.showScroll=function(){var dt=Ge.props,D=dt.height,q=dt.scrollHeight;return q>D},Ge}return(0,me.Z)(pt,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(wt){wt.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var wt=this.state,ee=wt.dragging,Re=wt.visible,dt=this.props.prefixCls,D=this.getSpinHeight(),q=this.getTop(),G=this.showScroll(),O=G&&Re;return Z.createElement("div",{ref:this.scrollbarRef,className:L()("".concat(dt,"-scrollbar"),(0,M.Z)({},"".concat(dt,"-scrollbar-show"),G)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:O?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},Z.createElement("div",{ref:this.thumbRef,className:L()("".concat(dt,"-scrollbar-thumb"),(0,M.Z)({},"".concat(dt,"-scrollbar-thumb-moving"),ee)),style:{width:"100%",height:D,top:q,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),pt}(Z.Component);function jt(mt){var Rt=mt.children,pt=mt.setRef,Ge=Z.useCallback(function(wt){pt(wt)},[]);return Z.cloneElement(Rt,{ref:Ge})}function pe(mt,Rt,pt,Ge,wt,ee){var Re=ee.getKey;return mt.slice(Rt,pt+1).map(function(dt,D){var q=Rt+D,G=wt(dt,q,{}),O=Re(dt);return Z.createElement(jt,{key:O,setRef:function(X){return Ge(dt,X)}},G)})}var $e=g(34203),ye=function(){function mt(){(0,We.Z)(this,mt),this.maps=void 0,this.maps=Object.create(null)}return(0,me.Z)(mt,[{key:"set",value:function(pt,Ge){this.maps[pt]=Ge}},{key:"get",value:function(pt){return this.maps[pt]}}]),mt}(),ie=ye;function re(mt,Rt,pt){var Ge=Z.useState(0),wt=(0,K.Z)(Ge,2),ee=wt[0],Re=wt[1],dt=(0,Z.useRef)(new Map),D=(0,Z.useRef)(new ie),q=(0,Z.useRef)();function G(){et.Z.cancel(q.current)}function O(){G(),q.current=(0,et.Z)(function(){dt.current.forEach(function(X,W){if(X&&X.offsetParent){var ae=(0,$e.Z)(X),Be=ae.offsetHeight;D.current.get(W)!==Be&&D.current.set(W,ae.offsetHeight)}}),Re(function(X){return X+1})})}function k(X,W){var ae=mt(X),Be=dt.current.get(ae);W?(dt.current.set(ae,W),O()):dt.current.delete(ae),!Be!=!W&&(W?Rt==null||Rt(X):pt==null||pt(X))}return(0,Z.useEffect)(function(){return G},[]),[k,O,D.current,ee]}var De=g(71002);function le(mt,Rt,pt,Ge,wt,ee,Re,dt){var D=Z.useRef();return function(q){if(q==null){dt();return}if(et.Z.cancel(D.current),typeof q=="number")Re(q);else if(q&&(0,De.Z)(q)==="object"){var G,O=q.align;"index"in q?G=q.index:G=Rt.findIndex(function(ae){return wt(ae)===q.key});var k=q.offset,X=k===void 0?0:k,W=function ae(Be,ve){if(!(Be<0||!mt.current)){var Je=mt.current.clientHeight,ot=!1,Qe=ve;if(Je){for(var ir=ve||O,mr=0,Ar=0,Er=0,Zt=Math.min(Rt.length,G),Tr=0;Tr<=Zt;Tr+=1){var pn=wt(Rt[Tr]);Ar=mr;var un=pt.get(pn);Er=Ar+(un===void 0?Ge:un),mr=Er,Tr===G&&un===void 0&&(ot=!0)}var Zn=null;switch(ir){case"top":Zn=Ar-X;break;case"bottom":Zn=Er-Je+X;break;default:{var Cr=mt.current.scrollTop,Nr=Cr+Je;Ar<Cr?Qe="top":Er>Nr&&(Qe="bottom")}}Zn!==null&&Zn!==mt.current.scrollTop&&Re(Zn)}D.current=(0,et.Z)(function(){ot&&ee(),ae(Be-1,Qe)},2)}};W(3)}}}function ge(mt,Rt,pt,Ge){var wt=pt-mt,ee=Rt-pt,Re=Math.min(wt,ee)*2;if(Ge<=Re){var dt=Math.floor(Ge/2);return Ge%2?pt+dt+1:pt-dt}return wt>ee?pt-(Ge-ee):pt+(Ge-wt)}function ce(mt,Rt,pt){var Ge=mt.length,wt=Rt.length,ee,Re;if(Ge===0&&wt===0)return null;Ge<wt?(ee=mt,Re=Rt):(ee=Rt,Re=mt);var dt={__EMPTY_ITEM__:!0};function D(W){return W!==void 0?pt(W):dt}for(var q=null,G=Math.abs(Ge-wt)!==1,O=0;O<Re.length;O+=1){var k=D(ee[O]),X=D(Re[O]);if(k!==X){q=O,G=G||k!==D(Re[O+1]);break}}return q===null?null:{index:q,multiple:G}}function je(mt,Rt,pt){var Ge=Z.useState(mt),wt=(0,K.Z)(Ge,2),ee=wt[0],Re=wt[1],dt=Z.useState(null),D=(0,K.Z)(dt,2),q=D[0],G=D[1];return Z.useEffect(function(){var O=ce(ee||[],mt||[],Rt);(O==null?void 0:O.index)!==void 0&&(pt==null||pt(O.index),G(mt[O.index])),Re(mt)},[mt]),[q]}var J=(typeof navigator=="undefined"?"undefined":(0,De.Z)(navigator))==="object"&&/Firefox/i.test(navigator.userAgent),Me=J,ne=function(mt,Rt){var pt=(0,Z.useRef)(!1),Ge=(0,Z.useRef)(null);function wt(){clearTimeout(Ge.current),pt.current=!0,Ge.current=setTimeout(function(){pt.current=!1},50)}var ee=(0,Z.useRef)({top:mt,bottom:Rt});return ee.current.top=mt,ee.current.bottom=Rt,function(Re){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,D=Re<0&&ee.current.top||Re>0&&ee.current.bottom;return dt&&D?(clearTimeout(Ge.current),pt.current=!1):(!D||pt.current)&&wt(),!pt.current&&D}};function xe(mt,Rt,pt,Ge){var wt=(0,Z.useRef)(0),ee=(0,Z.useRef)(null),Re=(0,Z.useRef)(null),dt=(0,Z.useRef)(!1),D=ne(Rt,pt);function q(O){if(mt){et.Z.cancel(ee.current);var k=O.deltaY;wt.current+=k,Re.current=k,!D(k)&&(Me||O.preventDefault(),ee.current=(0,et.Z)(function(){var X=dt.current?10:1;Ge(wt.current*X),wt.current=0}))}}function G(O){mt&&(dt.current=O.detail===Re.current)}return[q,G]}var Ne=g(8410),Pe=14/15;function He(mt,Rt,pt){var Ge=(0,Z.useRef)(!1),wt=(0,Z.useRef)(0),ee=(0,Z.useRef)(null),Re=(0,Z.useRef)(null),dt,D=function(k){if(Ge.current){var X=Math.ceil(k.touches[0].pageY),W=wt.current-X;wt.current=X,pt(W)&&k.preventDefault(),clearInterval(Re.current),Re.current=setInterval(function(){W*=Pe,(!pt(W,!0)||Math.abs(W)<=.1)&&clearInterval(Re.current)},16)}},q=function(){Ge.current=!1,dt()},G=function(k){dt(),k.touches.length===1&&!Ge.current&&(Ge.current=!0,wt.current=Math.ceil(k.touches[0].pageY),ee.current=k.target,ee.current.addEventListener("touchmove",D),ee.current.addEventListener("touchend",q))};dt=function(){ee.current&&(ee.current.removeEventListener("touchmove",D),ee.current.removeEventListener("touchend",q))},(0,Ne.Z)(function(){return mt&&Rt.current.addEventListener("touchstart",G),function(){var O;(O=Rt.current)===null||O===void 0||O.removeEventListener("touchstart",G),dt(),clearInterval(Re.current)}},[mt])}var lt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],ft=[],It={overflowY:"auto",overflowAnchor:"none"};function fe(mt,Rt){var pt=mt.prefixCls,Ge=pt===void 0?"rc-virtual-list":pt,wt=mt.className,ee=mt.height,Re=mt.itemHeight,dt=mt.fullHeight,D=dt===void 0?!0:dt,q=mt.style,G=mt.data,O=mt.children,k=mt.itemKey,X=mt.virtual,W=mt.component,ae=W===void 0?"div":W,Be=mt.onScroll,ve=mt.onVisibleChange,Je=mt.innerProps,ot=(0,N.Z)(mt,lt),Qe=!!(X!==!1&&ee&&Re),ir=Qe&&G&&Re*G.length>ee,mr=(0,Z.useState)(0),Ar=(0,K.Z)(mr,2),Er=Ar[0],Zt=Ar[1],Tr=(0,Z.useState)(!1),pn=(0,K.Z)(Tr,2),un=pn[0],Zn=pn[1],Cr=L()(Ge,wt),Nr=G||ft,bt=(0,Z.useRef)(),jn=(0,Z.useRef)(),Pt=(0,Z.useRef)(),zt=Z.useCallback(function(ha){return typeof k=="function"?k(ha):ha==null?void 0:ha[k]},[k]),Qt={getKey:zt};function dr(ha){Zt(function(xa){var eo;typeof ha=="function"?eo=ha(xa):eo=ha;var Te=jo(eo);return bt.current.scrollTop=Te,Te})}var _r=(0,Z.useRef)({start:0,end:Nr.length}),Hr=(0,Z.useRef)(),Qr=je(Nr,zt),fr=(0,K.Z)(Qr,1),tt=fr[0];Hr.current=tt;var Yr=re(zt,null,null),Tn=(0,K.Z)(Yr,4),wn=Tn[0],Nn=Tn[1],Si=Tn[2],fa=Tn[3],Xi=Z.useMemo(function(){if(!Qe)return{scrollHeight:void 0,start:0,end:Nr.length-1,offset:void 0};if(!ir){var ha;return{scrollHeight:((ha=jn.current)===null||ha===void 0?void 0:ha.offsetHeight)||0,start:0,end:Nr.length-1,offset:void 0}}for(var xa=0,eo,Te,Po,Hs=Nr.length,no=0;no<Hs;no+=1){var Jo=Nr[no],os=zt(Jo),Go=Si.get(os),Wo=xa+(Go===void 0?Re:Go);Wo>=Er&&eo===void 0&&(eo=no,Te=xa),Wo>Er+ee&&Po===void 0&&(Po=no),xa=Wo}return eo===void 0&&(eo=0,Te=0,Po=Math.ceil(ee/Re)),Po===void 0&&(Po=Nr.length-1),Po=Math.min(Po+1,Nr.length),{scrollHeight:xa,start:eo,end:Po,offset:Te}},[ir,Qe,Er,Nr,fa,ee]),Ln=Xi.scrollHeight,na=Xi.start,xi=Xi.end,ta=Xi.offset;_r.current.start=na,_r.current.end=xi;var La=Ln-ee,Ki=(0,Z.useRef)(La);Ki.current=La;function jo(ha){var xa=ha;return Number.isNaN(Ki.current)||(xa=Math.min(xa,Ki.current)),xa=Math.max(xa,0),xa}var uo=Er<=0,An=Er>=La,gn=ne(uo,An);function Oi(ha){var xa=ha;dr(xa)}function fi(ha){var xa=ha.currentTarget.scrollTop;xa!==Er&&dr(xa),Be==null||Be(ha)}var va=xe(Qe,uo,An,function(ha){dr(function(xa){var eo=xa+ha;return eo})}),wa=(0,K.Z)(va,2),Ca=wa[0],Aa=wa[1];He(Qe,bt,function(ha,xa){return gn(ha,xa)?!1:(Ca({preventDefault:function(){},deltaY:ha}),!0)}),(0,Ne.Z)(function(){function ha(xa){Qe&&xa.preventDefault()}return bt.current.addEventListener("wheel",Ca),bt.current.addEventListener("DOMMouseScroll",Aa),bt.current.addEventListener("MozMousePixelScroll",ha),function(){bt.current&&(bt.current.removeEventListener("wheel",Ca),bt.current.removeEventListener("DOMMouseScroll",Aa),bt.current.removeEventListener("MozMousePixelScroll",ha))}},[Qe]);var ma=le(bt,Nr,Si,Re,zt,Nn,dr,function(){var ha;(ha=Pt.current)===null||ha===void 0||ha.delayHidden()});Z.useImperativeHandle(Rt,function(){return{scrollTo:ma}}),(0,Ne.Z)(function(){if(ve){var ha=Nr.slice(na,xi+1);ve(ha,Nr)}},[na,xi,Nr]);var ka=pe(Nr,na,xi,wn,O,Qt),Uo=null;return ee&&(Uo=(0,c.Z)((0,M.Z)({},D?"height":"maxHeight",ee),It),Qe&&(Uo.overflowY="hidden",un&&(Uo.pointerEvents="none"))),Z.createElement("div",(0,v.Z)({style:(0,c.Z)((0,c.Z)({},q),{},{position:"relative"}),className:Cr},ot),Z.createElement(ae,{className:"".concat(Ge,"-holder"),style:Uo,ref:bt,onScroll:fi},Z.createElement(ke,{prefixCls:Ge,height:Ln,offset:ta,onInnerResize:Nn,ref:jn,innerProps:Je},ka)),Qe&&Z.createElement(Et,{ref:Pt,prefixCls:Ge,scrollTop:Er,height:ee,scrollHeight:Ln,count:Nr.length,onScroll:Oi,onStartMove:function(){Zn(!0)},onStopMove:function(){Zn(!1)}}))}var _t=Z.forwardRef(fe);_t.displayName="List";var Ye=_t,Ot=Ye},28660:function(vt,Ee,g){var v=g(34155);var M;(function(c){(function(K){var N=typeof g.g=="object"?g.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),Z=B(c);typeof N.Reflect=="undefined"?N.Reflect=c:Z=B(N.Reflect,Z),K(Z);function B(L,$){return function(U,ke){typeof L[U]!="function"&&Object.defineProperty(L,U,{configurable:!0,writable:!0,value:ke}),$&&$(U,ke)}}})(function(K){var N=Object.prototype.hasOwnProperty,Z=typeof Symbol=="function",B=Z&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",L=Z&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",$=typeof Object.create=="function",U={__proto__:[]}instanceof Array,ke=!$&&!U,We={create:$?function(){return ve(Object.create(null))}:U?function(){return ve({__proto__:null})}:function(){return ve({})},has:ke?function(Je,ot){return N.call(Je,ot)}:function(Je,ot){return ot in Je},get:ke?function(Je,ot){return N.call(Je,ot)?Je[ot]:void 0}:function(Je,ot){return Je[ot]}},me=Object.getPrototypeOf(Function),Le=typeof v=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",Se=!Le&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:W(),et=!Le&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ae(),at=!Le&&typeof WeakMap=="function"?WeakMap:Be(),Lt=new at;function Et(Je,ot,Qe,ir){if(It(Qe)){if(!wt(Je))throw new TypeError;if(!Re(ot))throw new TypeError;return ce(Je,ot)}else{if(!wt(Je))throw new TypeError;if(!Ye(ot))throw new TypeError;if(!Ye(ir)&&!It(ir)&&!fe(ir))throw new TypeError;return fe(ir)&&(ir=void 0),Qe=Ge(Qe),je(Je,ot,Qe,ir)}}K("decorate",Et);function jt(Je,ot){function Qe(ir,mr){if(!Ye(ir))throw new TypeError;if(!It(mr)&&!dt(mr))throw new TypeError;Pe(Je,ot,ir,mr)}return Qe}K("metadata",jt);function pe(Je,ot,Qe,ir){if(!Ye(Qe))throw new TypeError;return It(ir)||(ir=Ge(ir)),Pe(Je,ot,Qe,ir)}K("defineMetadata",pe);function $e(Je,ot,Qe){if(!Ye(ot))throw new TypeError;return It(Qe)||(Qe=Ge(Qe)),Me(Je,ot,Qe)}K("hasMetadata",$e);function ye(Je,ot,Qe){if(!Ye(ot))throw new TypeError;return It(Qe)||(Qe=Ge(Qe)),ne(Je,ot,Qe)}K("hasOwnMetadata",ye);function ie(Je,ot,Qe){if(!Ye(ot))throw new TypeError;return It(Qe)||(Qe=Ge(Qe)),xe(Je,ot,Qe)}K("getMetadata",ie);function re(Je,ot,Qe){if(!Ye(ot))throw new TypeError;return It(Qe)||(Qe=Ge(Qe)),Ne(Je,ot,Qe)}K("getOwnMetadata",re);function De(Je,ot){if(!Ye(Je))throw new TypeError;return It(ot)||(ot=Ge(ot)),He(Je,ot)}K("getMetadataKeys",De);function le(Je,ot){if(!Ye(Je))throw new TypeError;return It(ot)||(ot=Ge(ot)),lt(Je,ot)}K("getOwnMetadataKeys",le);function ge(Je,ot,Qe){if(!Ye(ot))throw new TypeError;It(Qe)||(Qe=Ge(Qe));var ir=J(ot,Qe,!1);if(It(ir)||!ir.delete(Je))return!1;if(ir.size>0)return!0;var mr=Lt.get(ot);return mr.delete(Qe),mr.size>0||Lt.delete(ot),!0}K("deleteMetadata",ge);function ce(Je,ot){for(var Qe=Je.length-1;Qe>=0;--Qe){var ir=Je[Qe],mr=ir(ot);if(!It(mr)&&!fe(mr)){if(!Re(mr))throw new TypeError;ot=mr}}return ot}function je(Je,ot,Qe,ir){for(var mr=Je.length-1;mr>=0;--mr){var Ar=Je[mr],Er=Ar(ot,Qe,ir);if(!It(Er)&&!fe(Er)){if(!Ye(Er))throw new TypeError;ir=Er}}return ir}function J(Je,ot,Qe){var ir=Lt.get(Je);if(It(ir)){if(!Qe)return;ir=new Se,Lt.set(Je,ir)}var mr=ir.get(ot);if(It(mr)){if(!Qe)return;mr=new Se,ir.set(ot,mr)}return mr}function Me(Je,ot,Qe){var ir=ne(Je,ot,Qe);if(ir)return!0;var mr=X(ot);return fe(mr)?!1:Me(Je,mr,Qe)}function ne(Je,ot,Qe){var ir=J(ot,Qe,!1);return It(ir)?!1:Rt(ir.has(Je))}function xe(Je,ot,Qe){var ir=ne(Je,ot,Qe);if(ir)return Ne(Je,ot,Qe);var mr=X(ot);if(!fe(mr))return xe(Je,mr,Qe)}function Ne(Je,ot,Qe){var ir=J(ot,Qe,!1);if(!It(ir))return ir.get(Je)}function Pe(Je,ot,Qe,ir){var mr=J(Qe,ir,!0);mr.set(Je,ot)}function He(Je,ot){var Qe=lt(Je,ot),ir=X(Je);if(ir===null)return Qe;var mr=He(ir,ot);if(mr.length<=0)return Qe;if(Qe.length<=0)return mr;for(var Ar=new et,Er=[],Zt=0,Tr=Qe;Zt<Tr.length;Zt++){var pn=Tr[Zt],un=Ar.has(pn);un||(Ar.add(pn),Er.push(pn))}for(var Zn=0,Cr=mr;Zn<Cr.length;Zn++){var pn=Cr[Zn],un=Ar.has(pn);un||(Ar.add(pn),Er.push(pn))}return Er}function lt(Je,ot){var Qe=[],ir=J(Je,ot,!1);if(It(ir))return Qe;for(var mr=ir.keys(),Ar=q(mr),Er=0;;){var Zt=O(Ar);if(!Zt)return Qe.length=Er,Qe;var Tr=G(Zt);try{Qe[Er]=Tr}catch(pn){try{k(Ar)}finally{throw pn}}Er++}}function ft(Je){if(Je===null)return 1;switch(typeof Je){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Je===null?1:6;default:return 6}}function It(Je){return Je===void 0}function fe(Je){return Je===null}function _t(Je){return typeof Je=="symbol"}function Ye(Je){return typeof Je=="object"?Je!==null:typeof Je=="function"}function Ot(Je,ot){switch(ft(Je)){case 0:return Je;case 1:return Je;case 2:return Je;case 3:return Je;case 4:return Je;case 5:return Je}var Qe=ot===3?"string":ot===5?"number":"default",ir=D(Je,B);if(ir!==void 0){var mr=ir.call(Je,Qe);if(Ye(mr))throw new TypeError;return mr}return mt(Je,Qe==="default"?"number":Qe)}function mt(Je,ot){if(ot==="string"){var Qe=Je.toString;if(ee(Qe)){var ir=Qe.call(Je);if(!Ye(ir))return ir}var mr=Je.valueOf;if(ee(mr)){var ir=mr.call(Je);if(!Ye(ir))return ir}}else{var mr=Je.valueOf;if(ee(mr)){var ir=mr.call(Je);if(!Ye(ir))return ir}var Ar=Je.toString;if(ee(Ar)){var ir=Ar.call(Je);if(!Ye(ir))return ir}}throw new TypeError}function Rt(Je){return!!Je}function pt(Je){return""+Je}function Ge(Je){var ot=Ot(Je,3);return _t(ot)?ot:pt(ot)}function wt(Je){return Array.isArray?Array.isArray(Je):Je instanceof Object?Je instanceof Array:Object.prototype.toString.call(Je)==="[object Array]"}function ee(Je){return typeof Je=="function"}function Re(Je){return typeof Je=="function"}function dt(Je){switch(ft(Je)){case 3:return!0;case 4:return!0;default:return!1}}function D(Je,ot){var Qe=Je[ot];if(Qe!=null){if(!ee(Qe))throw new TypeError;return Qe}}function q(Je){var ot=D(Je,L);if(!ee(ot))throw new TypeError;var Qe=ot.call(Je);if(!Ye(Qe))throw new TypeError;return Qe}function G(Je){return Je.value}function O(Je){var ot=Je.next();return ot.done?!1:ot}function k(Je){var ot=Je.return;ot&&ot.call(Je)}function X(Je){var ot=Object.getPrototypeOf(Je);if(typeof Je!="function"||Je===me||ot!==me)return ot;var Qe=Je.prototype,ir=Qe&&Object.getPrototypeOf(Qe);if(ir==null||ir===Object.prototype)return ot;var mr=ir.constructor;return typeof mr!="function"||mr===Je?ot:mr}function W(){var Je={},ot=[],Qe=function(){function Er(Zt,Tr,pn){this._index=0,this._keys=Zt,this._values=Tr,this._selector=pn}return Er.prototype["@@iterator"]=function(){return this},Er.prototype[L]=function(){return this},Er.prototype.next=function(){var Zt=this._index;if(Zt>=0&&Zt<this._keys.length){var Tr=this._selector(this._keys[Zt],this._values[Zt]);return Zt+1>=this._keys.length?(this._index=-1,this._keys=ot,this._values=ot):this._index++,{value:Tr,done:!1}}return{value:void 0,done:!0}},Er.prototype.throw=function(Zt){throw this._index>=0&&(this._index=-1,this._keys=ot,this._values=ot),Zt},Er.prototype.return=function(Zt){return this._index>=0&&(this._index=-1,this._keys=ot,this._values=ot),{value:Zt,done:!0}},Er}();return function(){function Er(){this._keys=[],this._values=[],this._cacheKey=Je,this._cacheIndex=-2}return Object.defineProperty(Er.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Er.prototype.has=function(Zt){return this._find(Zt,!1)>=0},Er.prototype.get=function(Zt){var Tr=this._find(Zt,!1);return Tr>=0?this._values[Tr]:void 0},Er.prototype.set=function(Zt,Tr){var pn=this._find(Zt,!0);return this._values[pn]=Tr,this},Er.prototype.delete=function(Zt){var Tr=this._find(Zt,!1);if(Tr>=0){for(var pn=this._keys.length,un=Tr+1;un<pn;un++)this._keys[un-1]=this._keys[un],this._values[un-1]=this._values[un];return this._keys.length--,this._values.length--,Zt===this._cacheKey&&(this._cacheKey=Je,this._cacheIndex=-2),!0}return!1},Er.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Je,this._cacheIndex=-2},Er.prototype.keys=function(){return new Qe(this._keys,this._values,ir)},Er.prototype.values=function(){return new Qe(this._keys,this._values,mr)},Er.prototype.entries=function(){return new Qe(this._keys,this._values,Ar)},Er.prototype["@@iterator"]=function(){return this.entries()},Er.prototype[L]=function(){return this.entries()},Er.prototype._find=function(Zt,Tr){return this._cacheKey!==Zt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Zt)),this._cacheIndex<0&&Tr&&(this._cacheIndex=this._keys.length,this._keys.push(Zt),this._values.push(void 0)),this._cacheIndex},Er}();function ir(Er,Zt){return Er}function mr(Er,Zt){return Zt}function Ar(Er,Zt){return[Er,Zt]}}function ae(){return function(){function Je(){this._map=new Se}return Object.defineProperty(Je.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Je.prototype.has=function(ot){return this._map.has(ot)},Je.prototype.add=function(ot){return this._map.set(ot,ot),this},Je.prototype.delete=function(ot){return this._map.delete(ot)},Je.prototype.clear=function(){this._map.clear()},Je.prototype.keys=function(){return this._map.keys()},Je.prototype.values=function(){return this._map.values()},Je.prototype.entries=function(){return this._map.entries()},Je.prototype["@@iterator"]=function(){return this.keys()},Je.prototype[L]=function(){return this.keys()},Je}()}function Be(){var Je=16,ot=We.create(),Qe=ir();return function(){function Tr(){this._key=ir()}return Tr.prototype.has=function(pn){var un=mr(pn,!1);return un!==void 0?We.has(un,this._key):!1},Tr.prototype.get=function(pn){var un=mr(pn,!1);return un!==void 0?We.get(un,this._key):void 0},Tr.prototype.set=function(pn,un){var Zn=mr(pn,!0);return Zn[this._key]=un,this},Tr.prototype.delete=function(pn){var un=mr(pn,!1);return un!==void 0?delete un[this._key]:!1},Tr.prototype.clear=function(){this._key=ir()},Tr}();function ir(){var Tr;do Tr="@@WeakMap@@"+Zt();while(We.has(ot,Tr));return ot[Tr]=!0,Tr}function mr(Tr,pn){if(!N.call(Tr,Qe)){if(!pn)return;Object.defineProperty(Tr,Qe,{value:We.create()})}return Tr[Qe]}function Ar(Tr,pn){for(var un=0;un<pn;++un)Tr[un]=Math.random()*255|0;return Tr}function Er(Tr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Tr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Tr)):Ar(new Uint8Array(Tr),Tr):Ar(new Array(Tr),Tr)}function Zt(){var Tr=Er(Je);Tr[6]=Tr[6]&79|64,Tr[8]=Tr[8]&191|128;for(var pn="",un=0;un<Je;++un){var Zn=Tr[un];(un===4||un===6||un===8)&&(pn+="-"),Zn<16&&(pn+="0"),pn+=Zn.toString(16).toLowerCase()}return pn}}function ve(Je){return Je.__=void 0,delete Je.__,Je}})})(M||(M={}))},84893:function(vt,Ee,g){vt.exports.download=g(54709),vt.exports.write=g(4803),vt.exports.zip=g(68447)},54709:function(vt,Ee,g){var v=g(68447);vt.exports=function(M,c){var K=v(M,c);location.href="data:application/zip;base64,"+K}},8452:function(vt){vt.exports.enlarge=function(g,v){return v[0]<g.xmin&&(g.xmin=v[0]),v[0]>g.xmax&&(g.xmax=v[0]),v[1]<g.ymin&&(g.ymin=v[1]),v[1]>g.ymax&&(g.ymax=v[1]),g},vt.exports.enlargeExtent=function(g,v){return v.xmax>g.xmax&&(g.xmax=v.xmax),v.xmin<g.xmin&&(g.xmin=v.xmin),v.ymax>g.ymax&&(g.ymax=v.ymax),v.ymin<g.ymin&&(g.ymin=v.ymin),g},vt.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}},26360:function(vt,Ee,g){var v=g(68694).jstypes;vt.exports.geojson=M,vt.exports.obj=K;function M(N){var Z={};N.forEach(B);function B(L){c(Z,L.properties)}return K(Z)}function c(N,Z){for(var B in Z)N[B]=Z[B];return N}function K(N){var Z={},B=[];for(var L in N)Z[L]=typeof N[L];for(var $ in Z)B.push({name:$,type:v[Z[$]]});return B}},22669:function(vt){vt.exports.point=Ee("Point","POINT"),vt.exports.line=Ee("LineString","POLYLINE"),vt.exports.multiline=Ee("MultiLineString","POLYLINE"),vt.exports.polygon=Ee("Polygon","POLYGON"),vt.exports.multipolygon=Ee("MultiPolygon","POLYGON");function Ee(c,K){return function(N){var Z=N.features.filter(M(c));return{geometries:Z.map(g),properties:Z.map(v),type:K}}}function g(c){return c.geometry.coordinates}function v(c){return c.properties}function M(c){return Array.isArray(c)?function(K){return c.includes(K.geometry.type)}:function(K){return K.geometry.type===c}}},20101:function(vt,Ee,g){var v=g(8452);vt.exports.write=function(c,K,N,Z){var B=28,L=100,$=0,U=0;c.forEach(function(We,me){N.setInt32($,me),N.setInt32($+4,10),N.setInt32($+8,1,!0),N.setFloat64($+12,We[0],!0),N.setFloat64($+20,We[1],!0),Z.setInt32(U,L/2),Z.setInt32(U+4,10),U+=8,$+=B,L+=B})},vt.exports.extent=function(M){return M.reduce(function(c,K){return v.enlarge(c,K)},v.blank())},vt.exports.parts=function(c,K){return c.length},vt.exports.shxLength=function(M){return M.length*8},vt.exports.shpLength=function(M){return M.length*28}},49479:function(vt,Ee,g){var v=g(8452),M=g(68694);vt.exports.write=function(B,L,$,U,ke){var We=0,me=0,Le=100;B.forEach(Se);function Se(et,at){var Lt=N(et),Et=c([et],ke),jt=Lt.length*16+48+(Et-1)*4,pe=Lt.reduce(function(ie,re){return v.enlarge(ie,re)},v.blank());U.setInt32(me,Le/2),U.setInt32(me+4,jt/2),me+=8,Le+=jt+8,$.setInt32(We,at+1),$.setInt32(We+4,jt/2),$.setInt32(We+8,ke,!0),$.setFloat64(We+12,pe.xmin,!0),$.setFloat64(We+20,pe.ymin,!0),$.setFloat64(We+28,pe.xmax,!0),$.setFloat64(We+36,pe.ymax,!0),$.setInt32(We+44,Et,!0),$.setInt32(We+48,Lt.length,!0),$.setInt32(We+52,0,!0);for(var $e=et.reduce(function(ie,re){return Array.isArray(re[0][0])?ie=ie.concat(re):ie.push(re),ie},[]),ye=1;ye<Et;ye++)$.setInt32(We+52+ye*4,$e.reduce(function(ie,re,De){return De<ye?ie+re.length:ie},0),!0);Lt.forEach(function(re,De){$.setFloat64(We+56+De*16+(Et-1)*4,re[0],!0),$.setFloat64(We+56+De*16+(Et-1)*4+8,re[1],!0)}),We+=jt+8}},vt.exports.shpLength=function(Z){return Z.length*56+N(Z).length*16},vt.exports.shxLength=function(Z){return Z.length*8},vt.exports.extent=function(Z){return N(Z).reduce(function(B,L){return v.enlarge(B,L)},v.blank())};function c(Z,B){var L=1;return(B===M.geometries.POLYGON||B===M.geometries.POLYLINE)&&(L=Z.reduce(function($,U){return $+=U.length,Array.isArray(U[0][0][0])&&($+=U.reduce(function(ke,We){return ke+We.length-1},0)),$},0)),L}vt.exports.parts=c;function K(Z){var B=0;return Z.forEach(function(L){B+=L.length}),B}function N(Z,B){return B===void 0&&(B=[]),typeof Z[0][0]=="object"?Z.reduce(function(L,$){return L.concat(N($))},B):Z}},68953:function(vt){vt.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'},68694:function(vt){vt.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},4803:function(vt,Ee,g){var v=g(68694),M=g(24019),c=g(68953),K=g(8452),N=g(26360),Z=g(48583),B=g(20101),L=g(49479),$={1:B,5:L,3:L},U=8;vt.exports=ke;function ke(Le,Se,et,at){var Lt=v.geometries[Se],Et=$[Lt],jt=Et.parts(et,Lt),pe=100+(jt-et.length)*4+Et.shpLength(et),$e=100+Et.shxLength(et),ye=new ArrayBuffer(pe),ie=new DataView(ye),re=new ArrayBuffer($e),De=new DataView(re),le=Et.extent(et);We(ie,Lt),We(De,Lt),me(le,ie),me(le,De),Et.write(et,le,new DataView(ye,100),new DataView(re,100),Lt),ie.setInt32(24,pe/2),De.setInt32(24,50+et.length*4);var ge=M.structure(Le);at(null,{shp:ie,shx:De,dbf:ge,prj:c})}function We(Le,Se){Le.setInt32(0,9994),Le.setInt32(28,1e3,!0),Le.setInt32(32,Se,!0)}function me(Le,Se){Se.setFloat64(36,Le.xmin,!0),Se.setFloat64(44,Le.ymin,!0),Se.setFloat64(52,Le.xmax,!0),Se.setFloat64(60,Le.ymax,!0)}},68447:function(vt,Ee,g){var v=g(34155),M=g(4803),c=g(22669),K=g(68953),N=g(55733);vt.exports=function(Z,B,L=!1){var $=new N,U=$.folder(B&&B.folder?B.folder:"layers");[c.point(Z),c.line(Z),c.polygon(Z),c.multipolygon(Z),c.multiline(Z)].forEach(function(We){We.geometries.length&&We.geometries[0].length&&M(We.properties,We.type,We.geometries,function(me,Le){var Se=B&&B.types[We.type.toLowerCase()]?B.types[We.type.toLowerCase()]:We.type;U.file(Se+".shp",Le.shp.buffer,{binary:!0}),U.file(Se+".shx",Le.shx.buffer,{binary:!0}),U.file(Se+".dbf",Le.dbf.buffer,{binary:!0}),U.file(Se+".prj",K)})});var ke={compression:"STORE"};return v.browser||(ke.type="nodebuffer"),L?$.generateNodeStream(YE(KE({},ke),{streamFiles:!0})):$.generateAsync(ke)}},86851:function(vt,Ee,g){"use strict";var v=g(89594),M=Array.prototype.concat,c=Array.prototype.slice,K=vt.exports=function(Z){for(var B=[],L=0,$=Z.length;L<$;L++){var U=Z[L];v(U)?B=M.call(B,c.call(U)):B.push(U)}return B};K.wrap=function(N){return function(){return N(K(arguments))}}},89594:function(vt){vt.exports=function(g){return!g||typeof g=="string"?!1:g instanceof Array||Array.isArray(g)||g.length>=0&&(g.splice instanceof Function||Object.getOwnPropertyDescriptor(g,g.length-1)&&g.constructor.name!=="String")}},10442:function(vt){vt.exports.attr=Ee,vt.exports.tagClose=g,vt.exports.tag=v,vt.exports.encode=M;function Ee(c){return c&&c.length?" "+c.map(function(K){return K[0]+'="'+K[1]+'"'}).join(" "):""}function g(c,K){return"<"+c+Ee(K)+"/>"}function v(c,K,N){return"<"+c+Ee(N)+">"+K+"</"+c+">"}function M(c){return(c===null?"":c.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},69848:function(vt){(function(Ee,g){vt.exports=g()})(this,function(){"use strict";function Ee(ye,ie,re,De,le,ge){if(!(le-De<=re)){var ce=De+le>>1;g(ye,ie,ce,De,le,ge%2),Ee(ye,ie,re,De,ce-1,ge+1),Ee(ye,ie,re,ce+1,le,ge+1)}}function g(ye,ie,re,De,le,ge){for(;le>De;){if(le-De>600){var ce=le-De+1,je=re-De+1,J=Math.log(ce),Me=.5*Math.exp(2*J/3),ne=.5*Math.sqrt(J*Me*(ce-Me)/ce)*(je-ce/2<0?-1:1),xe=Math.max(De,Math.floor(re-je*Me/ce+ne)),Ne=Math.min(le,Math.floor(re+(ce-je)*Me/ce+ne));g(ye,ie,re,xe,Ne,ge)}var Pe=ie[2*re+ge],He=De,lt=le;for(v(ye,ie,De,re),ie[2*le+ge]>Pe&&v(ye,ie,De,le);He<lt;){for(v(ye,ie,He,lt),He++,lt--;ie[2*He+ge]<Pe;)He++;for(;ie[2*lt+ge]>Pe;)lt--}ie[2*De+ge]===Pe?v(ye,ie,De,lt):(lt++,v(ye,ie,lt,le)),lt<=re&&(De=lt+1),re<=lt&&(le=lt-1)}}function v(ye,ie,re,De){M(ye,re,De),M(ie,2*re,2*De),M(ie,2*re+1,2*De+1)}function M(ye,ie,re){var De=ye[ie];ye[ie]=ye[re],ye[re]=De}function c(ye,ie,re,De,le,ge,ce){for(var je=[0,ye.length-1,0],J=[],Me,ne;je.length;){var xe=je.pop(),Ne=je.pop(),Pe=je.pop();if(Ne-Pe<=ce){for(var He=Pe;He<=Ne;He++)Me=ie[2*He],ne=ie[2*He+1],Me>=re&&Me<=le&&ne>=De&&ne<=ge&&J.push(ye[He]);continue}var lt=Math.floor((Pe+Ne)/2);Me=ie[2*lt],ne=ie[2*lt+1],Me>=re&&Me<=le&&ne>=De&&ne<=ge&&J.push(ye[lt]);var ft=(xe+1)%2;(xe===0?re<=Me:De<=ne)&&(je.push(Pe),je.push(lt-1),je.push(ft)),(xe===0?le>=Me:ge>=ne)&&(je.push(lt+1),je.push(Ne),je.push(ft))}return J}function K(ye,ie,re,De,le,ge){for(var ce=[0,ye.length-1,0],je=[],J=le*le;ce.length;){var Me=ce.pop(),ne=ce.pop(),xe=ce.pop();if(ne-xe<=ge){for(var Ne=xe;Ne<=ne;Ne++)N(ie[2*Ne],ie[2*Ne+1],re,De)<=J&&je.push(ye[Ne]);continue}var Pe=Math.floor((xe+ne)/2),He=ie[2*Pe],lt=ie[2*Pe+1];N(He,lt,re,De)<=J&&je.push(ye[Pe]);var ft=(Me+1)%2;(Me===0?re-le<=He:De-le<=lt)&&(ce.push(xe),ce.push(Pe-1),ce.push(ft)),(Me===0?re+le>=He:De+le>=lt)&&(ce.push(Pe+1),ce.push(ne),ce.push(ft))}return je}function N(ye,ie,re,De){var le=ye-re,ge=ie-De;return le*le+ge*ge}var Z=function(ye){return ye[0]},B=function(ye){return ye[1]},L=function(ie,re,De,le,ge){re===void 0&&(re=Z),De===void 0&&(De=B),le===void 0&&(le=64),ge===void 0&&(ge=Float64Array),this.nodeSize=le,this.points=ie;for(var ce=ie.length<65536?Uint16Array:Uint32Array,je=this.ids=new ce(ie.length),J=this.coords=new ge(ie.length*2),Me=0;Me<ie.length;Me++)je[Me]=Me,J[2*Me]=re(ie[Me]),J[2*Me+1]=De(ie[Me]);Ee(je,J,le,0,je.length-1,0)};L.prototype.range=function(ie,re,De,le){return c(this.ids,this.coords,ie,re,De,le,this.nodeSize)},L.prototype.within=function(ie,re,De){return K(this.ids,this.coords,ie,re,De,this.nodeSize)};var $={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ye){return ye}},U=Math.fround||function(ye){return function(ie){return ye[0]=+ie,ye[0]}}(new Float32Array(1)),ke=function(ie){this.options=jt(Object.create($),ie),this.trees=new Array(this.options.maxZoom+1)};ke.prototype.load=function(ie){var re=this.options,De=re.log,le=re.minZoom,ge=re.maxZoom,ce=re.nodeSize;De&&console.time("total time");var je="prepare "+ie.length+" points";De&&console.time(je),this.points=ie;for(var J=[],Me=0;Me<ie.length;Me++)ie[Me].geometry&&J.push(me(ie[Me],Me));this.trees[ge+1]=new L(J,pe,$e,ce,Float32Array),De&&console.timeEnd(je);for(var ne=ge;ne>=le;ne--){var xe=+Date.now();J=this._cluster(J,ne),this.trees[ne]=new L(J,pe,$e,ce,Float32Array),De&&console.log("z%d: %d clusters in %dms",ne,J.length,+Date.now()-xe)}return De&&console.timeEnd("total time"),this},ke.prototype.getClusters=function(ie,re){var De=((ie[0]+180)%360+360)%360-180,le=Math.max(-90,Math.min(90,ie[1])),ge=ie[2]===180?180:((ie[2]+180)%360+360)%360-180,ce=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)De=-180,ge=180;else if(De>ge){var je=this.getClusters([De,le,180,ce],re),J=this.getClusters([-180,le,ge,ce],re);return je.concat(J)}for(var Me=this.trees[this._limitZoom(re)],ne=Me.range(et(De),at(ce),et(ge),at(le)),xe=[],Ne=0,Pe=ne;Ne<Pe.length;Ne+=1){var He=Pe[Ne],lt=Me.points[He];xe.push(lt.numPoints?Le(lt):this.points[lt.index])}return xe},ke.prototype.getChildren=function(ie){var re=this._getOriginId(ie),De=this._getOriginZoom(ie),le="No cluster with the specified id.",ge=this.trees[De];if(!ge)throw new Error(le);var ce=ge.points[re];if(!ce)throw new Error(le);for(var je=this.options.radius/(this.options.extent*Math.pow(2,De-1)),J=ge.within(ce.x,ce.y,je),Me=[],ne=0,xe=J;ne<xe.length;ne+=1){var Ne=xe[ne],Pe=ge.points[Ne];Pe.parentId===ie&&Me.push(Pe.numPoints?Le(Pe):this.points[Pe.index])}if(Me.length===0)throw new Error(le);return Me},ke.prototype.getLeaves=function(ie,re,De){re=re||10,De=De||0;var le=[];return this._appendLeaves(le,ie,re,De,0),le},ke.prototype.getTile=function(ie,re,De){var le=this.trees[this._limitZoom(ie)],ge=Math.pow(2,ie),ce=this.options,je=ce.extent,J=ce.radius,Me=J/je,ne=(De-Me)/ge,xe=(De+1+Me)/ge,Ne={features:[]};return this._addTileFeatures(le.range((re-Me)/ge,ne,(re+1+Me)/ge,xe),le.points,re,De,ge,Ne),re===0&&this._addTileFeatures(le.range(1-Me/ge,ne,1,xe),le.points,ge,De,ge,Ne),re===ge-1&&this._addTileFeatures(le.range(0,ne,Me/ge,xe),le.points,-1,De,ge,Ne),Ne.features.length?Ne:null},ke.prototype.getClusterExpansionZoom=function(ie){for(var re=this._getOriginZoom(ie)-1;re<=this.options.maxZoom;){var De=this.getChildren(ie);if(re++,De.length!==1)break;ie=De[0].properties.cluster_id}return re},ke.prototype._appendLeaves=function(ie,re,De,le,ge){for(var ce=this.getChildren(re),je=0,J=ce;je<J.length;je+=1){var Me=J[je],ne=Me.properties;if(ne&&ne.cluster?ge+ne.point_count<=le?ge+=ne.point_count:ge=this._appendLeaves(ie,ne.cluster_id,De,le,ge):ge<le?ge++:ie.push(Me),ie.length===De)break}return ge},ke.prototype._addTileFeatures=function(ie,re,De,le,ge,ce){for(var je=0,J=ie;je<J.length;je+=1){var Me=J[je],ne=re[Me],xe=ne.numPoints,Ne=void 0,Pe=void 0,He=void 0;if(xe)Ne=Se(ne),Pe=ne.x,He=ne.y;else{var lt=this.points[ne.index];Ne=lt.properties,Pe=et(lt.geometry.coordinates[0]),He=at(lt.geometry.coordinates[1])}var ft={type:1,geometry:[[Math.round(this.options.extent*(Pe*ge-De)),Math.round(this.options.extent*(He*ge-le))]],tags:Ne},It=void 0;xe?It=ne.id:this.options.generateId?It=ne.index:this.points[ne.index].id&&(It=this.points[ne.index].id),It!==void 0&&(ft.id=It),ce.features.push(ft)}},ke.prototype._limitZoom=function(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))},ke.prototype._cluster=function(ie,re){for(var De=[],le=this.options,ge=le.radius,ce=le.extent,je=le.reduce,J=le.minPoints,Me=ge/(ce*Math.pow(2,re)),ne=0;ne<ie.length;ne++){var xe=ie[ne];if(!(xe.zoom<=re)){xe.zoom=re;for(var Ne=this.trees[re+1],Pe=Ne.within(xe.x,xe.y,Me),He=xe.numPoints||1,lt=He,ft=0,It=Pe;ft<It.length;ft+=1){var fe=It[ft],_t=Ne.points[fe];_t.zoom>re&&(lt+=_t.numPoints||1)}if(lt>He&&lt>=J){for(var Ye=xe.x*He,Ot=xe.y*He,mt=je&&He>1?this._map(xe,!0):null,Rt=(ne<<5)+(re+1)+this.points.length,pt=0,Ge=Pe;pt<Ge.length;pt+=1){var wt=Ge[pt],ee=Ne.points[wt];if(!(ee.zoom<=re)){ee.zoom=re;var Re=ee.numPoints||1;Ye+=ee.x*Re,Ot+=ee.y*Re,ee.parentId=Rt,je&&(mt||(mt=this._map(xe,!0)),je(mt,this._map(ee)))}}xe.parentId=Rt,De.push(We(Ye/lt,Ot/lt,Rt,lt,mt))}else if(De.push(xe),lt>1)for(var dt=0,D=Pe;dt<D.length;dt+=1){var q=D[dt],G=Ne.points[q];G.zoom<=re||(G.zoom=re,De.push(G))}}}return De},ke.prototype._getOriginId=function(ie){return ie-this.points.length>>5},ke.prototype._getOriginZoom=function(ie){return(ie-this.points.length)%32},ke.prototype._map=function(ie,re){if(ie.numPoints)return re?jt({},ie.properties):ie.properties;var De=this.points[ie.index].properties,le=this.options.map(De);return re&&le===De?jt({},le):le};function We(ye,ie,re,De,le){return{x:U(ye),y:U(ie),zoom:1/0,id:re,parentId:-1,numPoints:De,properties:le}}function me(ye,ie){var re=ye.geometry.coordinates,De=re[0],le=re[1];return{x:U(et(De)),y:U(at(le)),zoom:1/0,index:ie,parentId:-1}}function Le(ye){return{type:"Feature",id:ye.id,properties:Se(ye),geometry:{type:"Point",coordinates:[Lt(ye.x),Et(ye.y)]}}}function Se(ye){var ie=ye.numPoints,re=ie>=1e4?Math.round(ie/1e3)+"k":ie>=1e3?Math.round(ie/100)/10+"k":ie;return jt(jt({},ye.properties),{cluster:!0,cluster_id:ye.id,point_count:ie,point_count_abbreviated:re})}function et(ye){return ye/360+.5}function at(ye){var ie=Math.sin(ye*Math.PI/180),re=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return re<0?0:re>1?1:re}function Lt(ye){return(ye-.5)*360}function Et(ye){var ie=(180-ye*360)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function jt(ye,ie){for(var re in ie)ye[re]=ie[re];return ye}function pe(ye){return ye.x}function $e(ye){return ye.y}return ke})},12816:function(vt,Ee,g){var v=g(10442),M=v.tag,c=v.encode;vt.exports=function(re,De){return De=De||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+M("kml",M("Document",Z(De)+B(De)+N(re,De)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function K(ie,re){return function(De){if(!De.properties||!ke.valid(De.geometry))return"";var le=ke.any(De.geometry);if(!le)return"";var ge="",ce="";if(ie.simplestyle){var je=pe(De.properties);je&&(ke.isPoint(De.geometry)&&Se(De.properties)?(re.indexOf(je)===-1&&(ge=et(De.properties,je),re.push(je)),ce=M("styleUrl","#"+je)):(ke.isPolygon(De.geometry)||ke.isLine(De.geometry))&&Et(De.properties)&&(re.indexOf(je)===-1&&(ge=jt(De.properties,je),re.push(je)),ce=M("styleUrl","#"+je)))}return ge+M("Placemark",L(De.properties,ie)+$(De.properties,ie)+me(De.properties)+U(De.properties,ie)+le+ce)}}function N(ie,re){if(!ie.type)return"";var De=[];switch(ie.type){case"FeatureCollection":return ie.features?ie.features.map(K(re,De)).join(""):"";case"Feature":return K(re,De)(ie);default:return K(re,De)({type:"Feature",geometry:ie,properties:{}})}}function Z(ie){return ie.documentName!==void 0?M("name",ie.documentName):""}function B(ie){return ie.documentDescription!==void 0?M("description",ie.documentDescription):""}function L(ie,re){return ie[re.name]?M("name",c(ie[re.name])):""}function $(ie,re){return ie[re.description]?M("description",c(ie[re.description])):""}function U(ie,re){return ie[re.timestamp]?M("TimeStamp",M("when",c(ie[re.timestamp]))):""}var ke={Point:function(ie){return M("Point",M("coordinates",ie.coordinates.join(",")))},LineString:function(ie){return M("LineString",M("coordinates",We(ie.coordinates)))},Polygon:function(ie){if(!ie.coordinates.length)return"";var re=ie.coordinates[0],De=ie.coordinates.slice(1),le=M("outerBoundaryIs",M("LinearRing",M("coordinates",We(re)))),ge=De.map(function(ce){return M("innerBoundaryIs",M("LinearRing",M("coordinates",We(ce))))}).join("");return M("Polygon",le+ge)},MultiPoint:function(ie){return ie.coordinates.length?M("MultiGeometry",ie.coordinates.map(function(re){return ke.Point({coordinates:re})}).join("")):""},MultiPolygon:function(ie){return ie.coordinates.length?M("MultiGeometry",ie.coordinates.map(function(re){return ke.Polygon({coordinates:re})}).join("")):""},MultiLineString:function(ie){return ie.coordinates.length?M("MultiGeometry",ie.coordinates.map(function(re){return ke.LineString({coordinates:re})}).join("")):""},GeometryCollection:function(ie){return M("MultiGeometry",ie.geometries.map(ke.any).join(""))},valid:function(ie){return ie&&ie.type&&(ie.coordinates||ie.type==="GeometryCollection"&&ie.geometries&&ie.geometries.every(ke.valid))},any:function(ie){return ke[ie.type]?ke[ie.type](ie):""},isPoint:function(ie){return ie.type==="Point"||ie.type==="MultiPoint"},isPolygon:function(ie){return ie.type==="Polygon"||ie.type==="MultiPolygon"},isLine:function(ie){return ie.type==="LineString"||ie.type==="MultiLineString"}};function We(ie){return ie.map(function(re){return re.join(",")}).join(" ")}function me(ie){return M("ExtendedData",ye(ie).map(Le).join(""))}function Le(ie){return M("Data",M("value",c(ie[1])),[["name",c(ie[0])]])}function Se(ie){return!!(ie["marker-size"]||ie["marker-symbol"]||ie["marker-color"])}function et(ie,re){return M("Style",M("IconStyle",M("Icon",M("href",at(ie))))+Lt(ie),[["id",re]])}function at(ie){var re=ie["marker-size"]||"medium",De=ie["marker-symbol"]?"-"+ie["marker-symbol"]:"",le=(ie["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+re.charAt(0)+De+"+"+le+".png"}function Lt(ie){return M("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function Et(ie){for(var re in ie)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[re])return!0}function jt(ie,re){var De=M("LineStyle",[M("color",$e(ie.stroke,ie["stroke-opacity"])||"ff555555")+M("width",ie["stroke-width"]===void 0?2:ie["stroke-width"])]),le="";return(ie.fill||ie["fill-opacity"])&&(le=M("PolyStyle",[M("color",$e(ie.fill,ie["fill-opacity"])||"88555555")])),M("Style",De+le,[["id",re]])}function pe(ie){var re="";return ie["marker-symbol"]&&(re=re+"ms"+ie["marker-symbol"]),ie["marker-color"]&&(re=re+"mc"+ie["marker-color"].replace("#","")),ie["marker-size"]&&(re=re+"ms"+ie["marker-size"]),ie.stroke&&(re=re+"s"+ie.stroke.replace("#","")),ie["stroke-width"]&&(re=re+"sw"+ie["stroke-width"].toString().replace(".","")),ie["stroke-opacity"]&&(re=re+"mo"+ie["stroke-opacity"].toString().replace(".","")),ie.fill&&(re=re+"f"+ie.fill.replace("#","")),ie["fill-opacity"]&&(re=re+"fo"+ie["fill-opacity"].toString().replace(".","")),re}function $e(ie,re){if(typeof ie!="string")return"";if(ie=ie.replace("#","").toLowerCase(),ie.length===3)ie=ie[0]+ie[0]+ie[1]+ie[1]+ie[2]+ie[2];else if(ie.length!==6)return"";var De=ie[0]+ie[1],le=ie[2]+ie[3],ge=ie[4]+ie[5],ce="ff";return typeof re=="number"&&re>=0&&re<=1&&(ce=(re*255).toString(16),ce.indexOf(".")>-1&&(ce=ce.substr(0,ce.indexOf("."))),ce.length<2&&(ce="0"+ce)),ce+ge+le+De}function ye(ie){var re=[];for(var De in ie)re.push([De,ie[De]]);return re}},12450:function(vt,Ee,g){"use strict";g.d(Ee,{MM:function(){return $e}});function v(Pe){var He=1/0,lt=1/0,ft=-1/0,It=-1/0;function fe(pt){pt!=null&&_t.hasOwnProperty(pt.type)&&_t[pt.type](pt)}var _t={GeometryCollection:function(pt){pt.geometries.forEach(fe)},Point:function(pt){Ye(pt.coordinates)},MultiPoint:function(pt){pt.coordinates.forEach(Ye)},LineString:function(pt){Ot(pt.arcs)},MultiLineString:function(pt){pt.arcs.forEach(Ot)},Polygon:function(pt){pt.arcs.forEach(Ot)},MultiPolygon:function(pt){pt.arcs.forEach(mt)}};function Ye(pt){var Ge=pt[0],wt=pt[1];Ge<He&&(He=Ge),Ge>ft&&(ft=Ge),wt<lt&&(lt=wt),wt>It&&(It=wt)}function Ot(pt){pt.forEach(Ye)}function mt(pt){pt.forEach(Ot)}for(var Rt in Pe)fe(Pe[Rt]);return ft>=He&&It>=lt?[He,lt,ft,It]:void 0}function M(Pe,He,lt,ft,It){arguments.length===3&&(ft=Array,It=null);for(var fe=new ft(Pe=1<<Math.max(4,Math.ceil(Math.log(Pe)/Math.LN2))),_t=Pe-1,Ye=0;Ye<Pe;++Ye)fe[Ye]=It;function Ot(pt){for(var Ge=He(pt)&_t,wt=fe[Ge],ee=0;wt!=It;){if(lt(wt,pt))return!0;if(++ee>=Pe)throw new Error("full hashset");wt=fe[Ge=Ge+1&_t]}return fe[Ge]=pt,!0}function mt(pt){for(var Ge=He(pt)&_t,wt=fe[Ge],ee=0;wt!=It;){if(lt(wt,pt))return!0;if(++ee>=Pe)break;wt=fe[Ge=Ge+1&_t]}return!1}function Rt(){for(var pt=[],Ge=0,wt=fe.length;Ge<wt;++Ge){var ee=fe[Ge];ee!=It&&pt.push(ee)}return pt}return{add:Ot,has:mt,values:Rt}}function c(Pe,He,lt,ft,It,fe){arguments.length===3&&(ft=fe=Array,It=null);for(var _t=new ft(Pe=1<<Math.max(4,Math.ceil(Math.log(Pe)/Math.LN2))),Ye=new fe(Pe),Ot=Pe-1,mt=0;mt<Pe;++mt)_t[mt]=It;function Rt(ee,Re){for(var dt=He(ee)&Ot,D=_t[dt],q=0;D!=It;){if(lt(D,ee))return Ye[dt]=Re;if(++q>=Pe)throw new Error("full hashmap");D=_t[dt=dt+1&Ot]}return _t[dt]=ee,Ye[dt]=Re,Re}function pt(ee,Re){for(var dt=He(ee)&Ot,D=_t[dt],q=0;D!=It;){if(lt(D,ee))return Ye[dt];if(++q>=Pe)throw new Error("full hashmap");D=_t[dt=dt+1&Ot]}return _t[dt]=ee,Ye[dt]=Re,Re}function Ge(ee,Re){for(var dt=He(ee)&Ot,D=_t[dt],q=0;D!=It;){if(lt(D,ee))return Ye[dt];if(++q>=Pe)break;D=_t[dt=dt+1&Ot]}return Re}function wt(){for(var ee=[],Re=0,dt=_t.length;Re<dt;++Re){var D=_t[Re];D!=It&&ee.push(D)}return ee}return{set:Rt,maybeSet:pt,get:Ge,keys:wt}}function K(Pe,He){return Pe[0]===He[0]&&Pe[1]===He[1]}var N=new ArrayBuffer(16),Z=new Float64Array(N),B=new Uint32Array(N);function L(Pe){Z[0]=Pe[0],Z[1]=Pe[1];var He=B[0]^B[1];return He=He<<5^He>>7^B[2]^B[3],He&2147483647}function $(Pe){var He=Pe.coordinates,lt=Pe.lines,ft=Pe.rings,It=X(),fe=new Int32Array(He.length),_t=new Int32Array(He.length),Ye=new Int32Array(He.length),Ot=new Int8Array(He.length),mt=0,Rt,pt,Ge,wt,ee;for(Rt=0,pt=He.length;Rt<pt;++Rt)fe[Rt]=_t[Rt]=Ye[Rt]=-1;for(Rt=0,pt=lt.length;Rt<pt;++Rt){var Re=lt[Rt],dt=Re[0],D=Re[1];for(wt=It[dt],ee=It[++dt],++mt,Ot[wt]=1;++dt<=D;)k(Rt,Ge=wt,wt=ee,ee=It[dt]);++mt,Ot[ee]=1}for(Rt=0,pt=He.length;Rt<pt;++Rt)fe[Rt]=-1;for(Rt=0,pt=ft.length;Rt<pt;++Rt){var q=ft[Rt],G=q[0]+1,O=q[1];for(Ge=It[O-1],wt=It[G-1],ee=It[G],k(Rt,Ge,wt,ee);++G<=O;)k(Rt,Ge=wt,wt=ee,ee=It[G])}function k(Je,ot,Qe,ir){if(fe[Qe]!==Je){fe[Qe]=Je;var mr=_t[Qe];if(mr>=0){var Ar=Ye[Qe];(mr!==ot||Ar!==ir)&&(mr!==ir||Ar!==ot)&&(++mt,Ot[Qe]=1)}else _t[Qe]=ot,Ye[Qe]=ir}}function X(){for(var Je=c(He.length*1.4,W,ae,Int32Array,-1,Int32Array),ot=new Int32Array(He.length),Qe=0,ir=He.length;Qe<ir;++Qe)ot[Qe]=Je.maybeSet(Qe,Qe);return ot}function W(Je){return L(He[Je])}function ae(Je,ot){return K(He[Je],He[ot])}fe=_t=Ye=null;var Be=M(mt*1.4,L,K),ve;for(Rt=0,pt=He.length;Rt<pt;++Rt)Ot[ve=It[Rt]]&&Be.add(He[ve]);return Be}function U(Pe){var He=$(Pe),lt=Pe.coordinates,ft=Pe.lines,It=Pe.rings,fe,_t,Ye;for(_t=0,Ye=ft.length;_t<Ye;++_t)for(var Ot=ft[_t],mt=Ot[0],Rt=Ot[1];++mt<Rt;)He.has(lt[mt])&&(fe={0:mt,1:Ot[1]},Ot[1]=mt,Ot=Ot.next=fe);for(_t=0,Ye=It.length;_t<Ye;++_t)for(var pt=It[_t],Ge=pt[0],wt=Ge,ee=pt[1],Re=He.has(lt[Ge]);++wt<ee;)He.has(lt[wt])&&(Re?(fe={0:wt,1:pt[1]},pt[1]=wt,pt=pt.next=fe):(ke(lt,Ge,ee,ee-wt),lt[ee]=lt[Ge],Re=!0,wt=Ge));return Pe}function ke(Pe,He,lt,ft){We(Pe,He,lt),We(Pe,He,He+ft),We(Pe,He+ft,lt)}function We(Pe,He,lt){for(var ft=He+(lt---He>>1),It;He<ft;++He,--lt)It=Pe[He],Pe[He]=Pe[lt],Pe[lt]=It}function me(Pe){var He=Pe.coordinates,lt=Pe.lines,ft,It=Pe.rings,fe,_t=lt.length+It.length,Ye,Ot;for(delete Pe.lines,delete Pe.rings,Ye=0,Ot=lt.length;Ye<Ot;++Ye)for(ft=lt[Ye];ft=ft.next;)++_t;for(Ye=0,Ot=It.length;Ye<Ot;++Ye)for(fe=It[Ye];fe=fe.next;)++_t;var mt=c(_t*2*1.4,L,K),Rt=Pe.arcs=[];for(Ye=0,Ot=lt.length;Ye<Ot;++Ye){ft=lt[Ye];do pt(ft);while(ft=ft.next)}for(Ye=0,Ot=It.length;Ye<Ot;++Ye)if(fe=It[Ye],fe.next)do pt(fe);while(fe=fe.next);else Ge(fe);function pt(q){var G,O,k,X,W,ae,Be,ve;if(k=mt.get(G=He[q[0]])){for(Be=0,ve=k.length;Be<ve;++Be)if(X=k[Be],wt(X,q)){q[0]=X[0],q[1]=X[1];return}}if(W=mt.get(O=He[q[1]])){for(Be=0,ve=W.length;Be<ve;++Be)if(ae=W[Be],ee(ae,q)){q[1]=ae[0],q[0]=ae[1];return}}k?k.push(q):mt.set(G,[q]),W?W.push(q):mt.set(O,[q]),Rt.push(q)}function Ge(q){var G,O,k,X,W;if(O=mt.get(G=He[q[0]]))for(X=0,W=O.length;X<W;++X){if(k=O[X],Re(k,q)){q[0]=k[0],q[1]=k[1];return}if(dt(k,q)){q[0]=k[1],q[1]=k[0];return}}if(O=mt.get(G=He[q[0]+D(q)]))for(X=0,W=O.length;X<W;++X){if(k=O[X],Re(k,q)){q[0]=k[0],q[1]=k[1];return}if(dt(k,q)){q[0]=k[1],q[1]=k[0];return}}O?O.push(q):mt.set(G,[q]),Rt.push(q)}function wt(q,G){var O=q[0],k=G[0],X=q[1],W=G[1];if(O-X!==k-W)return!1;for(;O<=X;++O,++k)if(!K(He[O],He[k]))return!1;return!0}function ee(q,G){var O=q[0],k=G[0],X=q[1],W=G[1];if(O-X!==k-W)return!1;for(;O<=X;++O,--W)if(!K(He[O],He[W]))return!1;return!0}function Re(q,G){var O=q[0],k=G[0],X=q[1],W=G[1],ae=X-O;if(ae!==W-k)return!1;for(var Be=D(q),ve=D(G),Je=0;Je<ae;++Je)if(!K(He[O+(Je+Be)%ae],He[k+(Je+ve)%ae]))return!1;return!0}function dt(q,G){var O=q[0],k=G[0],X=q[1],W=G[1],ae=X-O;if(ae!==W-k)return!1;for(var Be=D(q),ve=ae-D(G),Je=0;Je<ae;++Je)if(!K(He[O+(Je+Be)%ae],He[W-(Je+ve)%ae]))return!1;return!0}function D(q){for(var G=q[0],O=q[1],k=G,X=k,W=He[k];++k<O;){var ae=He[k];(ae[0]<W[0]||ae[0]===W[0]&&ae[1]<W[1])&&(X=k,W=ae)}return X-G}return Pe}function Le(Pe){for(var He=-1,lt=Pe.length;++He<lt;){for(var ft=Pe[He],It=0,fe=1,_t=ft.length,Ye=ft[0],Ot=Ye[0],mt=Ye[1],Rt,pt;++It<_t;)Ye=ft[It],Rt=Ye[0],pt=Ye[1],(Rt!==Ot||pt!==mt)&&(ft[fe++]=[Rt-Ot,pt-mt],Ot=Rt,mt=pt);fe===1&&(ft[fe++]=[0,0]),ft.length=fe}return Pe}function Se(Pe){var He=-1,lt=[],ft=[],It=[];function fe(pt){pt&&_t.hasOwnProperty(pt.type)&&_t[pt.type](pt)}var _t={GeometryCollection:function(pt){pt.geometries.forEach(fe)},LineString:function(pt){pt.arcs=Ye(pt.arcs)},MultiLineString:function(pt){pt.arcs=pt.arcs.map(Ye)},Polygon:function(pt){pt.arcs=pt.arcs.map(Ot)},MultiPolygon:function(pt){pt.arcs=pt.arcs.map(mt)}};function Ye(pt){for(var Ge=0,wt=pt.length;Ge<wt;++Ge)It[++He]=pt[Ge];var ee={0:He-wt+1,1:He};return lt.push(ee),ee}function Ot(pt){for(var Ge=0,wt=pt.length;Ge<wt;++Ge)It[++He]=pt[Ge];var ee={0:He-wt+1,1:He};return ft.push(ee),ee}function mt(pt){return pt.map(Ot)}for(var Rt in Pe)fe(Pe[Rt]);return{type:"Topology",coordinates:It,lines:lt,rings:ft,objects:Pe}}function et(Pe){var He={},lt;for(lt in Pe)He[lt]=at(Pe[lt]);return He}function at(Pe){return Pe==null?{type:null}:(Pe.type==="FeatureCollection"?Lt:Pe.type==="Feature"?Et:jt)(Pe)}function Lt(Pe){var He={type:"GeometryCollection",geometries:Pe.features.map(Et)};return Pe.bbox!=null&&(He.bbox=Pe.bbox),He}function Et(Pe){var He=jt(Pe.geometry),lt;Pe.id!=null&&(He.id=Pe.id),Pe.bbox!=null&&(He.bbox=Pe.bbox);for(lt in Pe.properties){He.properties=Pe.properties;break}return He}function jt(Pe){if(Pe==null)return{type:null};var He=Pe.type==="GeometryCollection"?{type:"GeometryCollection",geometries:Pe.geometries.map(jt)}:Pe.type==="Point"||Pe.type==="MultiPoint"?{type:Pe.type,coordinates:Pe.coordinates}:{type:Pe.type,arcs:Pe.coordinates};return Pe.bbox!=null&&(He.bbox=Pe.bbox),He}function pe(Pe,He,lt){var ft=He[0],It=He[1],fe=He[2],_t=He[3],Ye=fe-ft?(lt-1)/(fe-ft):1,Ot=_t-It?(lt-1)/(_t-It):1;function mt(D){return[Math.round((D[0]-ft)*Ye),Math.round((D[1]-It)*Ot)]}function Rt(D,q){for(var G=-1,O=0,k=D.length,X=new Array(k),W,ae,Be,ve,Je;++G<k;)W=D[G],ve=Math.round((W[0]-ft)*Ye),Je=Math.round((W[1]-It)*Ot),(ve!==ae||Je!==Be)&&(X[O++]=[ae=ve,Be=Je]);for(X.length=O;O<q;)O=X.push([X[0][0],X[0][1]]);return X}function pt(D){return Rt(D,2)}function Ge(D){return Rt(D,4)}function wt(D){return D.map(Ge)}function ee(D){D!=null&&Re.hasOwnProperty(D.type)&&Re[D.type](D)}var Re={GeometryCollection:function(D){D.geometries.forEach(ee)},Point:function(D){D.coordinates=mt(D.coordinates)},MultiPoint:function(D){D.coordinates=D.coordinates.map(mt)},LineString:function(D){D.arcs=pt(D.arcs)},MultiLineString:function(D){D.arcs=D.arcs.map(pt)},Polygon:function(D){D.arcs=wt(D.arcs)},MultiPolygon:function(D){D.arcs=D.arcs.map(wt)}};for(var dt in Pe)ee(Pe[dt]);return{scale:[1/Ye,1/Ot],translate:[ft,It]}}function $e(Pe,He){var lt=v(Pe=et(Pe)),ft=He>0&&lt&&pe(Pe,lt,He),It=me(U(Se(Pe))),fe=It.coordinates,_t=c(It.arcs.length*1.4,ye,ie);Pe=It.objects,It.bbox=lt,It.arcs=It.arcs.map(function(Ge,wt){return _t.set(Ge,wt),fe.slice(Ge[0],Ge[1]+1)}),delete It.coordinates,fe=null;function Ye(Ge){Ge&&Ot.hasOwnProperty(Ge.type)&&Ot[Ge.type](Ge)}var Ot={GeometryCollection:function(Ge){Ge.geometries.forEach(Ye)},LineString:function(Ge){Ge.arcs=mt(Ge.arcs)},MultiLineString:function(Ge){Ge.arcs=Ge.arcs.map(mt)},Polygon:function(Ge){Ge.arcs=Ge.arcs.map(mt)},MultiPolygon:function(Ge){Ge.arcs=Ge.arcs.map(Rt)}};function mt(Ge){var wt=[];do{var ee=_t.get(Ge);wt.push(Ge[0]<Ge[1]?ee:~ee)}while(Ge=Ge.next);return wt}function Rt(Ge){return Ge.map(mt)}for(var pt in Pe)Ye(Pe[pt]);return ft&&(It.transform=ft,It.arcs=Le(It.arcs)),It}function ye(Pe){var He=Pe[0],lt=Pe[1],ft;return lt<He&&(ft=He,He=lt,lt=ft),He+31*lt}function ie(Pe,He){var lt=Pe[0],ft=Pe[1],It=He[0],fe=He[1],_t;return ft<lt&&(_t=lt,lt=ft,ft=_t),fe<It&&(_t=It,It=fe,fe=_t),lt===It&&ft===fe}var re=Math.PI,De=2*re,le=re/4,ge=re/180,ce=Math.abs,je=Math.atan2,J=Math.cos,Me=Math.sin;function ne(Pe,He){for(var lt=0,ft=Pe.length,It=0,fe=Pe[He?lt++:ft-1],_t,Ye=fe[0]*ge,Ot=fe[1]*ge/2+le,mt,Rt=J(Ot),pt,Ge=Me(Ot);lt<ft;++lt){fe=Pe[lt],_t=Ye,Ye=fe[0]*ge,Ot=fe[1]*ge/2+le,mt=Rt,Rt=J(Ot),pt=Ge,Ge=Me(Ot);var wt=Ye-_t,ee=wt>=0?1:-1,Re=ee*wt,dt=pt*Ge,D=mt*Rt+dt*J(Re),q=dt*ee*Me(Re);It+=je(q,D)}return It}function xe(Pe,He){var lt=ne(Pe,!0);return He&&(lt*=-1),(lt<0?De+lt:lt)*2}function Ne(Pe){return ce(ne(Pe,!1))*2}},55538:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return ft}});var v=g(15671),M=g(43144),c=g(82963),K=g(61120),N=g(60136),Z=g(97326),B=g(97685),L=g(98333);function $(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function U(It,fe){var _t=L.fF([],fe,It);return L.bA(_t,_t,1/_t[3]),_t}function ke(It,fe){var _t=It%fe;return _t<0?fe+_t:_t}function We(It,fe,_t){return _t*fe+(1-_t)*It}var me=g(85975),Le=g(31437),Se=g(77160);function et(It,fe){if(!It)throw new Error(fe||"viewport-mercator-project: assertion failed.")}var at=Math.PI,Lt=at/4,Et=at/180,jt=180/at,pe=512,$e=4003e4,ye=1.5;function ie(It){return Math.pow(2,It)}function re(It){return Math.log2(It)}function De(It,fe){var _t=(0,B.Z)(It,2),Ye=_t[0],Ot=_t[1];et(Number.isFinite(Ye)&&Number.isFinite(fe)),et(Number.isFinite(Ot)&&Ot>=-90&&Ot<=90,"invalid latitude"),fe*=pe;var mt=Ye*Et,Rt=Ot*Et,pt=fe*(mt+at)/(2*at),Ge=fe*(at-Math.log(Math.tan(Lt+Rt*.5)))/(2*at);return[pt,Ge]}function le(It,fe){var _t=(0,B.Z)(It,2),Ye=_t[0],Ot=_t[1];fe*=pe;var mt=Ye/fe*(2*at)-at,Rt=2*(Math.atan(Math.exp(at-Ot/fe*(2*at)))-Lt);return[mt*jt,Rt*jt]}function ge(It){var fe=It.latitude;assert(Number.isFinite(fe));var _t=Math.cos(fe*Et);return re($e*_t)-9}function ce(It){var fe=It.latitude,_t=It.longitude,Ye=It.zoom,Ot=It.scale,mt=It.highPrecision,Rt=mt===void 0?!1:mt;Ot=Ot!==void 0?Ot:ie(Ye),et(Number.isFinite(fe)&&Number.isFinite(_t)&&Number.isFinite(Ot));var pt={},Ge=pe*Ot,wt=Math.cos(fe*Et),ee=Ge/360,Re=ee/wt,dt=Ge/$e/wt;if(pt.pixelsPerMeter=[dt,-dt,dt],pt.metersPerPixel=[1/dt,-1/dt,1/dt],pt.pixelsPerDegree=[ee,-Re,dt],pt.degreesPerPixel=[1/ee,-1/Re,1/dt],Rt){var D=Et*Math.tan(fe*Et)/wt,q=ee*D/2,G=Ge/$e*D,O=G/Re*dt;pt.pixelsPerDegree2=[0,-q,G],pt.pixelsPerMeter2=[O,0,O]}return pt}function je(It,fe){var _t=_slicedToArray(It,3),Ye=_t[0],Ot=_t[1],mt=_t[2],Rt=_slicedToArray(fe,3),pt=Rt[0],Ge=Rt[1],wt=Rt[2],ee=1,Re=ce({longitude:Ye,latitude:Ot,scale:ee,highPrecision:!0}),dt=Re.pixelsPerMeter,D=Re.pixelsPerMeter2,q=De(It,ee);q[0]+=pt*(dt[0]+D[0]*Ge),q[1]+=Ge*(dt[1]+D[1]*Ge);var G=le(q,ee),O=(mt||0)+(wt||0);return Number.isFinite(mt)||Number.isFinite(wt)?[G[0],G[1],O]:G}function J(It){var fe=It.height,_t=It.pitch,Ye=It.bearing,Ot=It.altitude,mt=It.center,Rt=mt===void 0?null:mt,pt=It.flipY,Ge=pt===void 0?!1:pt,wt=$();return me.translate(wt,wt,[0,0,-Ot]),me.scale(wt,wt,[1,1,1/fe]),me.rotateX(wt,wt,-_t*Et),me.rotateZ(wt,wt,Ye*Et),Ge&&me.scale(wt,wt,[1,-1,1]),Rt&&me.translate(wt,wt,Se.negate([],Rt)),wt}function Me(It){var fe=It.width,_t=It.height,Ye=It.altitude,Ot=Ye===void 0?ye:Ye,mt=It.pitch,Rt=mt===void 0?0:mt,pt=It.nearZMultiplier,Ge=pt===void 0?1:pt,wt=It.farZMultiplier,ee=wt===void 0?1:wt,Re=Rt*Et,dt=Math.atan(.5/Ot),D=Math.sin(dt)*Ot/Math.sin(Math.PI/2-Re-dt),q=Math.cos(Math.PI/2-Re)*D+Ot;return{fov:2*Math.atan(_t/2/Ot),aspect:fe/_t,focalDistance:Ot,near:Ge,far:q*ee}}function ne(It){var fe=It.width,_t=It.height,Ye=It.pitch,Ot=It.altitude,mt=It.nearZMultiplier,Rt=It.farZMultiplier,pt=Me({width:fe,height:_t,altitude:Ot,pitch:Ye,nearZMultiplier:mt,farZMultiplier:Rt}),Ge=pt.fov,wt=pt.aspect,ee=pt.near,Re=pt.far,dt=me.perspective([],Ge,wt,ee,Re);return dt}function xe(It,fe){var _t=(0,B.Z)(It,3),Ye=_t[0],Ot=_t[1],mt=_t[2],Rt=mt===void 0?0:mt;return et(Number.isFinite(Ye)&&Number.isFinite(Ot)&&Number.isFinite(Rt)),U(fe,[Ye,Ot,Rt,1])}function Ne(It,fe){var _t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ye=(0,B.Z)(It,3),Ot=Ye[0],mt=Ye[1],Rt=Ye[2];if(et(Number.isFinite(Ot)&&Number.isFinite(mt),"invalid pixel coordinate"),Number.isFinite(Rt)){var pt=U(fe,[Ot,mt,Rt,1]);return pt}var Ge=U(fe,[Ot,mt,0,1]),wt=U(fe,[Ot,mt,1,1]),ee=Ge[2],Re=wt[2],dt=ee===Re?0:((_t||0)-ee)/(Re-ee);return Le.t7([],Ge,wt,dt)}var Pe=$(),He=function(){function It(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_t=fe.width,Ye=fe.height,Ot=fe.viewMatrix,mt=Ot===void 0?Pe:Ot,Rt=fe.projectionMatrix,pt=Rt===void 0?Pe:Rt;(0,v.Z)(this,It),this.width=_t||1,this.height=Ye||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=mt,this.projectionMatrix=pt;var Ge=$();me.multiply(Ge,Ge,this.projectionMatrix),me.multiply(Ge,Ge,this.viewMatrix),this.viewProjectionMatrix=Ge;var wt=$();me.scale(wt,wt,[this.width/2,-this.height/2,1]),me.translate(wt,wt,[1,-1,0]),me.multiply(wt,wt,this.viewProjectionMatrix);var ee=me.invert($(),wt);if(!ee)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=wt,this.pixelUnprojectionMatrix=ee,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,M.Z)(It,[{key:"equals",value:function(_t){return _t instanceof It?_t.width===this.width&&_t.height===this.height&&me.equals(_t.projectionMatrix,this.projectionMatrix)&&me.equals(_t.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(_t){var Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ot=Ye.topLeft,mt=Ot===void 0?!0:Ot,Rt=this.projectPosition(_t),pt=xe(Rt,this.pixelProjectionMatrix),Ge=(0,B.Z)(pt,2),wt=Ge[0],ee=Ge[1],Re=mt?ee:this.height-ee;return _t.length===2?[wt,Re]:[wt,Re,pt[2]]}},{key:"unproject",value:function(_t){var Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ot=Ye.topLeft,mt=Ot===void 0?!0:Ot,Rt=Ye.targetZ,pt=(0,B.Z)(_t,3),Ge=pt[0],wt=pt[1],ee=pt[2],Re=mt?wt:this.height-wt,dt=Rt&&Rt*this.pixelsPerMeter,D=Ne([Ge,Re,ee],this.pixelUnprojectionMatrix,dt),q=this.unprojectPosition(D),G=(0,B.Z)(q,3),O=G[0],k=G[1],X=G[2];return Number.isFinite(ee)?[O,k,X]:Number.isFinite(Rt)?[O,k,Rt]:[O,k]}},{key:"projectPosition",value:function(_t){var Ye=this.projectFlat(_t),Ot=(0,B.Z)(Ye,2),mt=Ot[0],Rt=Ot[1],pt=(_t[2]||0)*this.pixelsPerMeter;return[mt,Rt,pt]}},{key:"unprojectPosition",value:function(_t){var Ye=this.unprojectFlat(_t),Ot=(0,B.Z)(Ye,2),mt=Ot[0],Rt=Ot[1],pt=(_t[2]||0)/this.pixelsPerMeter;return[mt,Rt,pt]}},{key:"projectFlat",value:function(_t){var Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return _t}},{key:"unprojectFlat",value:function(_t){var Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return _t}}]),It}();function lt(It){var fe=It.width,_t=It.height,Ye=It.bounds,Ot=It.minExtent,mt=Ot===void 0?0:Ot,Rt=It.maxZoom,pt=Rt===void 0?24:Rt,Ge=It.padding,wt=Ge===void 0?0:Ge,ee=It.offset,Re=ee===void 0?[0,0]:ee,dt=(0,B.Z)(Ye,2),D=(0,B.Z)(dt[0],2),q=D[0],G=D[1],O=(0,B.Z)(dt[1],2),k=O[0],X=O[1];if(Number.isFinite(wt)){var W=wt;wt={top:W,bottom:W,left:W,right:W}}else et(Number.isFinite(wt.top)&&Number.isFinite(wt.bottom)&&Number.isFinite(wt.left)&&Number.isFinite(wt.right));var ae=new ft({width:fe,height:_t,longitude:0,latitude:0,zoom:0}),Be=ae.project([q,X]),ve=ae.project([k,G]),Je=[Math.max(Math.abs(ve[0]-Be[0]),mt),Math.max(Math.abs(ve[1]-Be[1]),mt)],ot=[fe-wt.left-wt.right-Math.abs(Re[0])*2,_t-wt.top-wt.bottom-Math.abs(Re[1])*2];et(ot[0]>0&&ot[1]>0);var Qe=ot[0]/Je[0],ir=ot[1]/Je[1],mr=(wt.right-wt.left)/2/Qe,Ar=(wt.bottom-wt.top)/2/ir,Er=[(ve[0]+Be[0])/2+mr,(ve[1]+Be[1])/2+Ar],Zt=ae.unproject(Er),Tr=ae.zoom+Math.log2(Math.abs(Math.min(Qe,ir)));return{longitude:Zt[0],latitude:Zt[1],zoom:Math.min(Tr,pt)}}var ft=function(It){(0,N.Z)(fe,It);function fe(){var _t,Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ot=Ye.width,mt=Ye.height,Rt=Ye.latitude,pt=Rt===void 0?0:Rt,Ge=Ye.longitude,wt=Ge===void 0?0:Ge,ee=Ye.zoom,Re=ee===void 0?0:ee,dt=Ye.pitch,D=dt===void 0?0:dt,q=Ye.bearing,G=q===void 0?0:q,O=Ye.altitude,k=O===void 0?1.5:O,X=Ye.nearZMultiplier,W=Ye.farZMultiplier;(0,v.Z)(this,fe),Ot=Ot||1,mt=mt||1;var ae=ie(Re);k=Math.max(.75,k);var Be=De([wt,pt],ae);Be[2]=0;var ve=ne({width:Ot,height:mt,pitch:D,bearing:G,altitude:k,nearZMultiplier:X||1/mt,farZMultiplier:W||1.01}),Je=J({height:mt,center:Be,pitch:D,bearing:G,altitude:k,flipY:!0});return _t=(0,c.Z)(this,(0,K.Z)(fe).call(this,{width:Ot,height:mt,viewMatrix:Je,projectionMatrix:ve})),_t.latitude=pt,_t.longitude=wt,_t.zoom=Re,_t.pitch=D,_t.bearing=G,_t.altitude=k,_t.scale=ae,_t.center=Be,_t.pixelsPerMeter=ce((0,Z.Z)((0,Z.Z)(_t))).pixelsPerMeter[2],Object.freeze((0,Z.Z)((0,Z.Z)(_t))),_t}return(0,M.Z)(fe,[{key:"projectFlat",value:function(Ye){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return De(Ye,Ot)}},{key:"unprojectFlat",value:function(Ye){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return le(Ye,Ot)}},{key:"getMapCenterByLngLatPosition",value:function(Ye){var Ot=Ye.lngLat,mt=Ye.pos,Rt=Ne(mt,this.pixelUnprojectionMatrix),pt=De(Ot,this.scale),Ge=Le.IH([],pt,Le.tk([],Rt)),wt=Le.IH([],this.center,Ge);return le(wt,this.scale)}},{key:"getLocationAtPoint",value:function(Ye){var Ot=Ye.lngLat,mt=Ye.pos;return this.getMapCenterByLngLatPosition({lngLat:Ot,pos:mt})}},{key:"fitBounds",value:function(Ye){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},mt=this.width,Rt=this.height,pt=lt(Object.assign({width:mt,height:Rt,bounds:Ye},Ot)),Ge=pt.longitude,wt=pt.latitude,ee=pt.zoom;return new fe({width:mt,height:Rt,longitude:Ge,latitude:wt,zoom:ee})}}]),fe}(He)},17061:function(vt,Ee,g){var v=g(18698).default;function M(){"use strict";vt.exports=M=function(){return c},vt.exports.__esModule=!0,vt.exports.default=vt.exports;var c={},K=Object.prototype,N=K.hasOwnProperty,Z=Object.defineProperty||function(J,Me,ne){J[Me]=ne.value},B=typeof Symbol=="function"?Symbol:{},L=B.iterator||"@@iterator",$=B.asyncIterator||"@@asyncIterator",U=B.toStringTag||"@@toStringTag";function ke(J,Me,ne){return Object.defineProperty(J,Me,{value:ne,enumerable:!0,configurable:!0,writable:!0}),J[Me]}try{ke({},"")}catch(J){ke=function(ne,xe,Ne){return ne[xe]=Ne}}function We(J,Me,ne,xe){var Ne=Me&&Me.prototype instanceof Se?Me:Se,Pe=Object.create(Ne.prototype),He=new ge(xe||[]);return Z(Pe,"_invoke",{value:ie(J,ne,He)}),Pe}function me(J,Me,ne){try{return{type:"normal",arg:J.call(Me,ne)}}catch(xe){return{type:"throw",arg:xe}}}c.wrap=We;var Le={};function Se(){}function et(){}function at(){}var Lt={};ke(Lt,L,function(){return this});var Et=Object.getPrototypeOf,jt=Et&&Et(Et(ce([])));jt&&jt!==K&&N.call(jt,L)&&(Lt=jt);var pe=at.prototype=Se.prototype=Object.create(Lt);function $e(J){["next","throw","return"].forEach(function(Me){ke(J,Me,function(ne){return this._invoke(Me,ne)})})}function ye(J,Me){function ne(Ne,Pe,He,lt){var ft=me(J[Ne],J,Pe);if(ft.type!=="throw"){var It=ft.arg,fe=It.value;return fe&&v(fe)=="object"&&N.call(fe,"__await")?Me.resolve(fe.__await).then(function(_t){ne("next",_t,He,lt)},function(_t){ne("throw",_t,He,lt)}):Me.resolve(fe).then(function(_t){It.value=_t,He(It)},function(_t){return ne("throw",_t,He,lt)})}lt(ft.arg)}var xe;Z(this,"_invoke",{value:function(Pe,He){function lt(){return new Me(function(ft,It){ne(Pe,He,ft,It)})}return xe=xe?xe.then(lt,lt):lt()}})}function ie(J,Me,ne){var xe="suspendedStart";return function(Ne,Pe){if(xe==="executing")throw new Error("Generator is already running");if(xe==="completed"){if(Ne==="throw")throw Pe;return je()}for(ne.method=Ne,ne.arg=Pe;;){var He=ne.delegate;if(He){var lt=re(He,ne);if(lt){if(lt===Le)continue;return lt}}if(ne.method==="next")ne.sent=ne._sent=ne.arg;else if(ne.method==="throw"){if(xe==="suspendedStart")throw xe="completed",ne.arg;ne.dispatchException(ne.arg)}else ne.method==="return"&&ne.abrupt("return",ne.arg);xe="executing";var ft=me(J,Me,ne);if(ft.type==="normal"){if(xe=ne.done?"completed":"suspendedYield",ft.arg===Le)continue;return{value:ft.arg,done:ne.done}}ft.type==="throw"&&(xe="completed",ne.method="throw",ne.arg=ft.arg)}}}function re(J,Me){var ne=Me.method,xe=J.iterator[ne];if(xe===void 0)return Me.delegate=null,ne==="throw"&&J.iterator.return&&(Me.method="return",Me.arg=void 0,re(J,Me),Me.method==="throw")||ne!=="return"&&(Me.method="throw",Me.arg=new TypeError("The iterator does not provide a '"+ne+"' method")),Le;var Ne=me(xe,J.iterator,Me.arg);if(Ne.type==="throw")return Me.method="throw",Me.arg=Ne.arg,Me.delegate=null,Le;var Pe=Ne.arg;return Pe?Pe.done?(Me[J.resultName]=Pe.value,Me.next=J.nextLoc,Me.method!=="return"&&(Me.method="next",Me.arg=void 0),Me.delegate=null,Le):Pe:(Me.method="throw",Me.arg=new TypeError("iterator result is not an object"),Me.delegate=null,Le)}function De(J){var Me={tryLoc:J[0]};1 in J&&(Me.catchLoc=J[1]),2 in J&&(Me.finallyLoc=J[2],Me.afterLoc=J[3]),this.tryEntries.push(Me)}function le(J){var Me=J.completion||{};Me.type="normal",delete Me.arg,J.completion=Me}function ge(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(De,this),this.reset(!0)}function ce(J){if(J){var Me=J[L];if(Me)return Me.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var ne=-1,xe=function Ne(){for(;++ne<J.length;)if(N.call(J,ne))return Ne.value=J[ne],Ne.done=!1,Ne;return Ne.value=void 0,Ne.done=!0,Ne};return xe.next=xe}}return{next:je}}function je(){return{value:void 0,done:!0}}return et.prototype=at,Z(pe,"constructor",{value:at,configurable:!0}),Z(at,"constructor",{value:et,configurable:!0}),et.displayName=ke(at,U,"GeneratorFunction"),c.isGeneratorFunction=function(J){var Me=typeof J=="function"&&J.constructor;return!!Me&&(Me===et||(Me.displayName||Me.name)==="GeneratorFunction")},c.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,at):(J.__proto__=at,ke(J,U,"GeneratorFunction")),J.prototype=Object.create(pe),J},c.awrap=function(J){return{__await:J}},$e(ye.prototype),ke(ye.prototype,$,function(){return this}),c.AsyncIterator=ye,c.async=function(J,Me,ne,xe,Ne){Ne===void 0&&(Ne=Promise);var Pe=new ye(We(J,Me,ne,xe),Ne);return c.isGeneratorFunction(Me)?Pe:Pe.next().then(function(He){return He.done?He.value:Pe.next()})},$e(pe),ke(pe,U,"Generator"),ke(pe,L,function(){return this}),ke(pe,"toString",function(){return"[object Generator]"}),c.keys=function(J){var Me=Object(J),ne=[];for(var xe in Me)ne.push(xe);return ne.reverse(),function Ne(){for(;ne.length;){var Pe=ne.pop();if(Pe in Me)return Ne.value=Pe,Ne.done=!1,Ne}return Ne.done=!0,Ne}},c.values=ce,ge.prototype={constructor:ge,reset:function(Me){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(le),!Me)for(var ne in this)ne.charAt(0)==="t"&&N.call(this,ne)&&!isNaN(+ne.slice(1))&&(this[ne]=void 0)},stop:function(){this.done=!0;var Me=this.tryEntries[0].completion;if(Me.type==="throw")throw Me.arg;return this.rval},dispatchException:function(Me){if(this.done)throw Me;var ne=this;function xe(It,fe){return He.type="throw",He.arg=Me,ne.next=It,fe&&(ne.method="next",ne.arg=void 0),!!fe}for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Pe=this.tryEntries[Ne],He=Pe.completion;if(Pe.tryLoc==="root")return xe("end");if(Pe.tryLoc<=this.prev){var lt=N.call(Pe,"catchLoc"),ft=N.call(Pe,"finallyLoc");if(lt&&ft){if(this.prev<Pe.catchLoc)return xe(Pe.catchLoc,!0);if(this.prev<Pe.finallyLoc)return xe(Pe.finallyLoc)}else if(lt){if(this.prev<Pe.catchLoc)return xe(Pe.catchLoc,!0)}else{if(!ft)throw new Error("try statement without catch or finally");if(this.prev<Pe.finallyLoc)return xe(Pe.finallyLoc)}}}},abrupt:function(Me,ne){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Ne=this.tryEntries[xe];if(Ne.tryLoc<=this.prev&&N.call(Ne,"finallyLoc")&&this.prev<Ne.finallyLoc){var Pe=Ne;break}}Pe&&(Me==="break"||Me==="continue")&&Pe.tryLoc<=ne&&ne<=Pe.finallyLoc&&(Pe=null);var He=Pe?Pe.completion:{};return He.type=Me,He.arg=ne,Pe?(this.method="next",this.next=Pe.finallyLoc,Le):this.complete(He)},complete:function(Me,ne){if(Me.type==="throw")throw Me.arg;return Me.type==="break"||Me.type==="continue"?this.next=Me.arg:Me.type==="return"?(this.rval=this.arg=Me.arg,this.method="return",this.next="end"):Me.type==="normal"&&ne&&(this.next=ne),Le},finish:function(Me){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var xe=this.tryEntries[ne];if(xe.finallyLoc===Me)return this.complete(xe.completion,xe.afterLoc),le(xe),Le}},catch:function(Me){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var xe=this.tryEntries[ne];if(xe.tryLoc===Me){var Ne=xe.completion;if(Ne.type==="throw"){var Pe=Ne.arg;le(xe)}return Pe}}throw new Error("illegal catch attempt")},delegateYield:function(Me,ne,xe){return this.delegate={iterator:ce(Me),resultName:ne,nextLoc:xe},this.method==="next"&&(this.arg=void 0),Le}},c}vt.exports=M,vt.exports.__esModule=!0,vt.exports.default=vt.exports},18698:function(vt){function Ee(g){return vt.exports=Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},vt.exports.__esModule=!0,vt.exports.default=vt.exports,Ee(g)}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},64687:function(vt,Ee,g){var v=g(17061)();vt.exports=v;try{regeneratorRuntime=v}catch(M){typeof globalThis=="object"?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}},96446:function(vt,Ee,g){var v=g(37923);function M(c){if(Array.isArray(c))return v(c)}vt.exports=M,vt.exports.__esModule=!0,vt.exports.default=vt.exports},25098:function(vt){function Ee(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},12444:function(vt){function Ee(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},72004:function(vt,Ee,g){var v=g(51883);function M(K,N){for(var Z=0;Z<N.length;Z++){var B=N[Z];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(K,v(B.key),B)}}function c(K,N,Z){return N&&M(K.prototype,N),Z&&M(K,Z),Object.defineProperty(K,"prototype",{writable:!1}),K}vt.exports=c,vt.exports.__esModule=!0,vt.exports.default=vt.exports},96695:function(vt,Ee,g){var v=g(96263);function M(c,K){var N=typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(!N){if(Array.isArray(c)||(N=v(c))||K&&c&&typeof c.length=="number"){N&&(c=N);var Z=0,B=function(){};return{s:B,n:function(){return Z>=c.length?{done:!0}:{done:!1,value:c[Z++]}},e:function(We){throw We},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L=!0,$=!1,U;return{s:function(){N=N.call(c)},n:function(){var We=N.next();return L=We.done,We},e:function(We){$=!0,U=We},f:function(){try{!L&&N.return!=null&&N.return()}finally{if($)throw U}}}}vt.exports=M,vt.exports.__esModule=!0,vt.exports.default=vt.exports},26037:function(vt,Ee,g){var v=g(48374),M=g(21771),c=g(73408);function K(N){var Z=M();return function(){var L=v(N),$;if(Z){var U=v(this).constructor;$=Reflect.construct(L,arguments,U)}else $=L.apply(this,arguments);return c(this,$)}}vt.exports=K,vt.exports.__esModule=!0,vt.exports.default=vt.exports},48374:function(vt){function Ee(g){return vt.exports=Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},vt.exports.__esModule=!0,vt.exports.default=vt.exports,Ee(g)}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},31996:function(vt,Ee,g){var v=g(21314);function M(c,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(K&&K.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),K&&v(c,K)}vt.exports=M,vt.exports.__esModule=!0,vt.exports.default=vt.exports},21771:function(vt){function Ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},96936:function(vt){function Ee(g){if(typeof Symbol!="undefined"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},88619:function(vt){function Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},73408:function(vt,Ee,g){var v=g(52677).default,M=g(25098);function c(K,N){if(N&&(v(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(K)}vt.exports=c,vt.exports.__esModule=!0,vt.exports.default=vt.exports},21314:function(vt){function Ee(g,v){return vt.exports=Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,K){return c.__proto__=K,c},vt.exports.__esModule=!0,vt.exports.default=vt.exports,Ee(g,v)}vt.exports=Ee,vt.exports.__esModule=!0,vt.exports.default=vt.exports},19632:function(vt,Ee,g){var v=g(96446),M=g(96936),c=g(96263),K=g(88619);function N(Z){return v(Z)||M(Z)||c(Z)||K()}vt.exports=N,vt.exports.__esModule=!0,vt.exports.default=vt.exports},53229:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return v}});function v(M,c,K,N,Z){var B={};return Object.keys(N).forEach(function(L){B[L]=N[L]}),B.enumerable=!!B.enumerable,B.configurable=!!B.configurable,("value"in B||B.initializer)&&(B.writable=!0),B=K.slice().reverse().reduce(function(L,$){return $(M,c,L)||L},B),Z&&B.initializer!==void 0&&(B.value=B.initializer?B.initializer.call(Z):void 0,B.initializer=void 0),B.initializer===void 0&&(Object.defineProperty(M,c,B),B=null),B}},5647:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return c}});var v=g(89611),M=g(78814);function c(K,N,Z){return(0,M.Z)()?c=Reflect.construct.bind():c=function(L,$,U){var ke=[null];ke.push.apply(ke,$);var We=Function.bind.apply(L,ke),me=new We;return U&&(0,v.Z)(me,U.prototype),me},c.apply(null,arguments)}},73237:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return c}});var v=g(61120);function M(K,N){for(;!Object.prototype.hasOwnProperty.call(K,N)&&(K=(0,v.Z)(K),K!==null););return K}function c(){return typeof Reflect!="undefined"&&Reflect.get?c=Reflect.get.bind():c=function(N,Z,B){var L=M(N,Z);if(L){var $=Object.getOwnPropertyDescriptor(L,Z);return $.get?$.get.call(arguments.length<3?N:B):$.value}},c.apply(this,arguments)}},43269:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return v}});function v(M,c,K,N){K&&Object.defineProperty(M,c,{enumerable:K.enumerable,configurable:K.configurable,writable:K.writable,value:K.initializer?K.initializer.call(N):void 0})}},84506:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return N}});var v=g(83878),M=g(59199),c=g(40181),K=g(25267);function N(Z){return(0,v.Z)(Z)||(0,M.Z)(Z)||(0,c.Z)(Z)||(0,K.Z)()}},95:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return M}});var v=g(1449);function M(c,K){K===void 0&&(K={});var N=Number(c[0]),Z=Number(c[1]),B=Number(c[2]),L=Number(c[3]);if(c.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var $=[N,Z],U=[N,L],ke=[B,L],We=[B,Z];return(0,v.yu)([[$,We,ke,U,$]],K.properties,{bbox:c,id:K.id})}},62096:function(vt,Ee,g){"use strict";var v=g(39034);function M(c){var K=[1/0,1/0,-1/0,-1/0];return(0,v.pZ)(c,function(N){K[0]>N[0]&&(K[0]=N[0]),K[1]>N[1]&&(K[1]=N[1]),K[2]<N[0]&&(K[2]=N[0]),K[3]<N[1]&&(K[3]=N[1])}),K}M.default=M,Ee.Z=M},78445:function(vt,Ee,g){"use strict";var v=g(62096),M=g(95);function c(K){return(0,M.Z)((0,v.Z)(K))}Ee.Z=c},1449:function(vt,Ee,g){"use strict";g.d(Ee,{DL:function(){return Et},Ht:function(){return ie},Kn:function(){return ge},Tu:function(){return ke},tw:function(){return et},uf:function(){return me},vi:function(){return ye},yu:function(){return $},zL:function(){return N}});var v=63710088e-1,M={centimeters:v*100,centimetres:v*100,degrees:v/111325,feet:v*3.28084,inches:v*39.37,kilometers:v/1e3,kilometres:v/1e3,meters:v,metres:v,miles:v/1609.344,millimeters:v*1e3,millimetres:v*1e3,nauticalmiles:v/1852,radians:1,yards:v*1.0936},c={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/v,yards:1.0936133},K={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function N(J,Me,ne){ne===void 0&&(ne={});var xe={type:"Feature"};return(ne.id===0||ne.id)&&(xe.id=ne.id),ne.bbox&&(xe.bbox=ne.bbox),xe.properties=Me||{},xe.geometry=J,xe}function Z(J,Me,ne){switch(ne===void 0&&(ne={}),J){case"Point":return B(Me).geometry;case"LineString":return ke(Me).geometry;case"Polygon":return $(Me).geometry;case"MultiPoint":return Se(Me).geometry;case"MultiLineString":return Le(Me).geometry;case"MultiPolygon":return et(Me).geometry;default:throw new Error(J+" is invalid")}}function B(J,Me,ne){if(ne===void 0&&(ne={}),!J)throw new Error("coordinates is required");if(!Array.isArray(J))throw new Error("coordinates must be an Array");if(J.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!le(J[0])||!le(J[1]))throw new Error("coordinates must contain numbers");var xe={type:"Point",coordinates:J};return N(xe,Me,ne)}function L(J,Me,ne){return ne===void 0&&(ne={}),me(J.map(function(xe){return B(xe,Me)}),ne)}function $(J,Me,ne){ne===void 0&&(ne={});for(var xe=0,Ne=J;xe<Ne.length;xe++){var Pe=Ne[xe];if(Pe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var He=0;He<Pe[Pe.length-1].length;He++)if(Pe[Pe.length-1][He]!==Pe[0][He])throw new Error("First and last Position are not equivalent.")}var lt={type:"Polygon",coordinates:J};return N(lt,Me,ne)}function U(J,Me,ne){return ne===void 0&&(ne={}),me(J.map(function(xe){return $(xe,Me)}),ne)}function ke(J,Me,ne){if(ne===void 0&&(ne={}),J.length<2)throw new Error("coordinates must be an array of two or more positions");var xe={type:"LineString",coordinates:J};return N(xe,Me,ne)}function We(J,Me,ne){return ne===void 0&&(ne={}),me(J.map(function(xe){return ke(xe,Me)}),ne)}function me(J,Me){Me===void 0&&(Me={});var ne={type:"FeatureCollection"};return Me.id&&(ne.id=Me.id),Me.bbox&&(ne.bbox=Me.bbox),ne.features=J,ne}function Le(J,Me,ne){ne===void 0&&(ne={});var xe={type:"MultiLineString",coordinates:J};return N(xe,Me,ne)}function Se(J,Me,ne){ne===void 0&&(ne={});var xe={type:"MultiPoint",coordinates:J};return N(xe,Me,ne)}function et(J,Me,ne){ne===void 0&&(ne={});var xe={type:"MultiPolygon",coordinates:J};return N(xe,Me,ne)}function at(J,Me,ne){ne===void 0&&(ne={});var xe={type:"GeometryCollection",geometries:J};return N(xe,Me,ne)}function Lt(J,Me){if(Me===void 0&&(Me=0),Me&&!(Me>=0))throw new Error("precision must be a positive number");var ne=Math.pow(10,Me||0);return Math.round(J*ne)/ne}function Et(J,Me){Me===void 0&&(Me="kilometers");var ne=M[Me];if(!ne)throw new Error(Me+" units is invalid");return J*ne}function jt(J,Me){Me===void 0&&(Me="kilometers");var ne=M[Me];if(!ne)throw new Error(Me+" units is invalid");return J/ne}function pe(J,Me){return ye(jt(J,Me))}function $e(J){var Me=J%360;return Me<0&&(Me+=360),Me}function ye(J){var Me=J%(2*Math.PI);return Me*180/Math.PI}function ie(J){var Me=J%360;return Me*Math.PI/180}function re(J,Me,ne){if(Me===void 0&&(Me="kilometers"),ne===void 0&&(ne="kilometers"),!(J>=0))throw new Error("length must be a positive number");return Et(jt(J,Me),ne)}function De(J,Me,ne){if(Me===void 0&&(Me="meters"),ne===void 0&&(ne="kilometers"),!(J>=0))throw new Error("area must be a positive number");var xe=K[Me];if(!xe)throw new Error("invalid original units");var Ne=K[ne];if(!Ne)throw new Error("invalid final units");return J/xe*Ne}function le(J){return!isNaN(J)&&J!==null&&!Array.isArray(J)}function ge(J){return!!J&&J.constructor===Object}function ce(J){if(!J)throw new Error("bbox is required");if(!Array.isArray(J))throw new Error("bbox must be an Array");if(J.length!==4&&J.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");J.forEach(function(Me){if(!le(Me))throw new Error("bbox must only contain numbers")})}function je(J){if(!J)throw new Error("id is required");if(["string","number"].indexOf(typeof J)===-1)throw new Error("id must be a number or a string")}},36987:function(vt,Ee,g){"use strict";g.d(Ee,{oL:function(){return $},r7:function(){return c},wA:function(){return L}});var v=g(1449);function M(U){if(!U)throw new Error("coord is required");if(!Array.isArray(U)){if(U.type==="Feature"&&U.geometry!==null&&U.geometry.type==="Point")return U.geometry.coordinates;if(U.type==="Point")return U.coordinates}if(Array.isArray(U)&&U.length>=2&&!Array.isArray(U[0])&&!Array.isArray(U[1]))return U;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function c(U){if(Array.isArray(U))return U;if(U.type==="Feature"){if(U.geometry!==null)return U.geometry.coordinates}else if(U.coordinates)return U.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function K(U){if(U.length>1&&isNumber(U[0])&&isNumber(U[1]))return!0;if(Array.isArray(U[0])&&U[0].length)return K(U[0]);throw new Error("coordinates must only contain numbers")}function N(U,ke,We){if(!ke||!We)throw new Error("type and name required");if(!U||U.type!==ke)throw new Error("Invalid input to "+We+": must be a "+ke+", given "+U.type)}function Z(U,ke,We){if(!U)throw new Error("No feature passed");if(!We)throw new Error(".featureOf() requires a name");if(!U||U.type!=="Feature"||!U.geometry)throw new Error("Invalid input to "+We+", Feature with geometry required");if(!U.geometry||U.geometry.type!==ke)throw new Error("Invalid input to "+We+": must be a "+ke+", given "+U.geometry.type)}function B(U,ke,We){if(!U)throw new Error("No featureCollection passed");if(!We)throw new Error(".collectionOf() requires a name");if(!U||U.type!=="FeatureCollection")throw new Error("Invalid input to "+We+", FeatureCollection required");for(var me=0,Le=U.features;me<Le.length;me++){var Se=Le[me];if(!Se||Se.type!=="Feature"||!Se.geometry)throw new Error("Invalid input to "+We+", Feature with geometry required");if(!Se.geometry||Se.geometry.type!==ke)throw new Error("Invalid input to "+We+": must be a "+ke+", given "+Se.geometry.type)}}function L(U){return U.type==="Feature"?U.geometry:U}function $(U,ke){return U.type==="FeatureCollection"?"FeatureCollection":U.type==="GeometryCollection"?"GeometryCollection":U.type==="Feature"&&U.geometry!==null?U.geometry.type:U.type}},39034:function(vt,Ee,g){"use strict";g.d(Ee,{nG:function(){return ke},on:function(){return $},pZ:function(){return M}});var v=g(1449);function M(Et,jt,pe){if(Et!==null)for(var $e,ye,ie,re,De,le,ge,ce=0,je=0,J,Me=Et.type,ne=Me==="FeatureCollection",xe=Me==="Feature",Ne=ne?Et.features.length:1,Pe=0;Pe<Ne;Pe++){ge=ne?Et.features[Pe].geometry:xe?Et.geometry:Et,J=ge?ge.type==="GeometryCollection":!1,De=J?ge.geometries.length:1;for(var He=0;He<De;He++){var lt=0,ft=0;if(re=J?ge.geometries[He]:ge,re!==null){le=re.coordinates;var It=re.type;switch(ce=pe&&(It==="Polygon"||It==="MultiPolygon")?1:0,It){case null:break;case"Point":if(jt(le,je,Pe,lt,ft)===!1)return!1;je++,lt++;break;case"LineString":case"MultiPoint":for($e=0;$e<le.length;$e++){if(jt(le[$e],je,Pe,lt,ft)===!1)return!1;je++,It==="MultiPoint"&&lt++}It==="LineString"&&lt++;break;case"Polygon":case"MultiLineString":for($e=0;$e<le.length;$e++){for(ye=0;ye<le[$e].length-ce;ye++){if(jt(le[$e][ye],je,Pe,lt,ft)===!1)return!1;je++}It==="MultiLineString"&&lt++,It==="Polygon"&&ft++}It==="Polygon"&&lt++;break;case"MultiPolygon":for($e=0;$e<le.length;$e++){for(ft=0,ye=0;ye<le[$e].length;ye++){for(ie=0;ie<le[$e][ye].length-ce;ie++){if(jt(le[$e][ye][ie],je,Pe,lt,ft)===!1)return!1;je++}ft++}lt++}break;case"GeometryCollection":for($e=0;$e<re.geometries.length;$e++)if(M(re.geometries[$e],jt,pe)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function c(Et,jt,pe,$e){var ye=pe;return M(Et,function(ie,re,De,le,ge){re===0&&pe===void 0?ye=ie:ye=jt(ye,ie,re,De,le,ge)},$e),ye}function K(Et,jt){var pe;switch(Et.type){case"FeatureCollection":for(pe=0;pe<Et.features.length&&jt(Et.features[pe].properties,pe)!==!1;pe++);break;case"Feature":jt(Et.properties,0);break}}function N(Et,jt,pe){var $e=pe;return K(Et,function(ye,ie){ie===0&&pe===void 0?$e=ye:$e=jt($e,ye,ie)}),$e}function Z(Et,jt){if(Et.type==="Feature")jt(Et,0);else if(Et.type==="FeatureCollection")for(var pe=0;pe<Et.features.length&&jt(Et.features[pe],pe)!==!1;pe++);}function B(Et,jt,pe){var $e=pe;return Z(Et,function(ye,ie){ie===0&&pe===void 0?$e=ye:$e=jt($e,ye,ie)}),$e}function L(Et){var jt=[];return M(Et,function(pe){jt.push(pe)}),jt}function $(Et,jt){var pe,$e,ye,ie,re,De,le,ge,ce,je,J=0,Me=Et.type==="FeatureCollection",ne=Et.type==="Feature",xe=Me?Et.features.length:1;for(pe=0;pe<xe;pe++){for(De=Me?Et.features[pe].geometry:ne?Et.geometry:Et,ge=Me?Et.features[pe].properties:ne?Et.properties:{},ce=Me?Et.features[pe].bbox:ne?Et.bbox:void 0,je=Me?Et.features[pe].id:ne?Et.id:void 0,le=De?De.type==="GeometryCollection":!1,re=le?De.geometries.length:1,ye=0;ye<re;ye++){if(ie=le?De.geometries[ye]:De,ie===null){if(jt(null,J,ge,ce,je)===!1)return!1;continue}switch(ie.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(jt(ie,J,ge,ce,je)===!1)return!1;break}case"GeometryCollection":{for($e=0;$e<ie.geometries.length;$e++)if(jt(ie.geometries[$e],J,ge,ce,je)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}J++}}function U(Et,jt,pe){var $e=pe;return $(Et,function(ye,ie,re,De,le){ie===0&&pe===void 0?$e=ye:$e=jt($e,ye,ie,re,De,le)}),$e}function ke(Et,jt){$(Et,function(pe,$e,ye,ie,re){var De=pe===null?null:pe.type;switch(De){case null:case"Point":case"LineString":case"Polygon":return jt((0,v.zL)(pe,ye,{bbox:ie,id:re}),$e,0)===!1?!1:void 0}var le;switch(De){case"MultiPoint":le="Point";break;case"MultiLineString":le="LineString";break;case"MultiPolygon":le="Polygon";break}for(var ge=0;ge<pe.coordinates.length;ge++){var ce=pe.coordinates[ge],je={type:le,coordinates:ce};if(jt((0,v.zL)(je,ye),$e,ge)===!1)return!1}})}function We(Et,jt,pe){var $e=pe;return ke(Et,function(ye,ie,re){ie===0&&re===0&&pe===void 0?$e=ye:$e=jt($e,ye,ie,re)}),$e}function me(Et,jt){ke(Et,function(pe,$e,ye){var ie=0;if(pe.geometry){var re=pe.geometry.type;if(!(re==="Point"||re==="MultiPoint")){var De,le=0,ge=0,ce=0;if(M(pe,function(je,J,Me,ne,xe){if(De===void 0||$e>le||ne>ge||xe>ce){De=je,le=$e,ge=ne,ce=xe,ie=0;return}var Ne=lineString([De,je],pe.properties);if(jt(Ne,$e,ye,xe,ie)===!1)return!1;ie++,De=je})===!1)return!1}}})}function Le(Et,jt,pe){var $e=pe,ye=!1;return me(Et,function(ie,re,De,le,ge){ye===!1&&pe===void 0?$e=ie:$e=jt($e,ie,re,De,le,ge),ye=!0}),$e}function Se(Et,jt){if(!Et)throw new Error("geojson is required");ke(Et,function(pe,$e,ye){if(pe.geometry!==null){var ie=pe.geometry.type,re=pe.geometry.coordinates;switch(ie){case"LineString":if(jt(pe,$e,ye,0,0)===!1)return!1;break;case"Polygon":for(var De=0;De<re.length;De++)if(jt(lineString(re[De],pe.properties),$e,ye,De)===!1)return!1;break}}})}function et(Et,jt,pe){var $e=pe;return Se(Et,function(ye,ie,re,De){ie===0&&pe===void 0?$e=ye:$e=jt($e,ye,ie,re,De)}),$e}function at(Et,jt){if(jt=jt||{},!isObject(jt))throw new Error("options is invalid");var pe=jt.featureIndex||0,$e=jt.multiFeatureIndex||0,ye=jt.geometryIndex||0,ie=jt.segmentIndex||0,re=jt.properties,De;switch(Et.type){case"FeatureCollection":pe<0&&(pe=Et.features.length+pe),re=re||Et.features[pe].properties,De=Et.features[pe].geometry;break;case"Feature":re=re||Et.properties,De=Et.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":De=Et;break;default:throw new Error("geojson is invalid")}if(De===null)return null;var le=De.coordinates;switch(De.type){case"Point":case"MultiPoint":return null;case"LineString":return ie<0&&(ie=le.length+ie-1),lineString([le[ie],le[ie+1]],re,jt);case"Polygon":return ye<0&&(ye=le.length+ye),ie<0&&(ie=le[ye].length+ie-1),lineString([le[ye][ie],le[ye][ie+1]],re,jt);case"MultiLineString":return $e<0&&($e=le.length+$e),ie<0&&(ie=le[$e].length+ie-1),lineString([le[$e][ie],le[$e][ie+1]],re,jt);case"MultiPolygon":return $e<0&&($e=le.length+$e),ye<0&&(ye=le[$e].length+ye),ie<0&&(ie=le[$e][ye].length-ie-1),lineString([le[$e][ye][ie],le[$e][ye][ie+1]],re,jt)}throw new Error("geojson is invalid")}function Lt(Et,jt){if(jt=jt||{},!isObject(jt))throw new Error("options is invalid");var pe=jt.featureIndex||0,$e=jt.multiFeatureIndex||0,ye=jt.geometryIndex||0,ie=jt.coordIndex||0,re=jt.properties,De;switch(Et.type){case"FeatureCollection":pe<0&&(pe=Et.features.length+pe),re=re||Et.features[pe].properties,De=Et.features[pe].geometry;break;case"Feature":re=re||Et.properties,De=Et.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":De=Et;break;default:throw new Error("geojson is invalid")}if(De===null)return null;var le=De.coordinates;switch(De.type){case"Point":return point(le,re,jt);case"MultiPoint":return $e<0&&($e=le.length+$e),point(le[$e],re,jt);case"LineString":return ie<0&&(ie=le.length+ie),point(le[ie],re,jt);case"Polygon":return ye<0&&(ye=le.length+ye),ie<0&&(ie=le[ye].length+ie),point(le[ye][ie],re,jt);case"MultiLineString":return $e<0&&($e=le.length+$e),ie<0&&(ie=le[$e].length+ie),point(le[$e][ie],re,jt);case"MultiPolygon":return $e<0&&($e=le.length+$e),ye<0&&(ye=le[$e].length+ye),ie<0&&(ie=le[$e][ye].length-ie),point(le[$e][ye][ie],re,jt)}throw new Error("geojson is invalid")}},13365:function(vt,Ee,g){"use strict";g.d(Ee,{Z:function(){return le}});var v=g(1449),M=g(36987);function c(ge,ce){ce===void 0&&(ce={});var je=typeof ce=="object"?ce.mutate:ce;if(!ge)throw new Error("geojson is required");var J=(0,M.oL)(ge),Me=[];switch(J){case"LineString":Me=K(ge);break;case"MultiLineString":case"Polygon":(0,M.r7)(ge).forEach(function(xe){Me.push(K(xe))});break;case"MultiPolygon":(0,M.r7)(ge).forEach(function(xe){var Ne=[];xe.forEach(function(Pe){Ne.push(K(Pe))}),Me.push(Ne)});break;case"Point":return ge;case"MultiPoint":var ne={};(0,M.r7)(ge).forEach(function(xe){var Ne=xe.join("-");Object.prototype.hasOwnProperty.call(ne,Ne)||(Me.push(xe),ne[Ne]=!0)});break;default:throw new Error(J+" geometry not supported")}return ge.coordinates?je===!0?(ge.coordinates=Me,ge):{type:J,coordinates:Me}:je===!0?(ge.geometry.coordinates=Me,ge):(0,v.zL)({type:J,coordinates:Me},ge.properties,{bbox:ge.bbox,id:ge.id})}function K(ge){var ce=(0,M.r7)(ge);if(ce.length===2&&!N(ce[0],ce[1]))return ce;var je=[],J=ce.length-1,Me=je.length;je.push(ce[0]);for(var ne=1;ne<J;ne++){var xe=je[je.length-1];ce[ne][0]===xe[0]&&ce[ne][1]===xe[1]||(je.push(ce[ne]),Me=je.length,Me>2&&Z(je[Me-3],je[Me-1],je[Me-2])&&je.splice(je.length-2,1))}if(je.push(ce[ce.length-1]),Me=je.length,N(ce[0],ce[ce.length-1])&&Me<4)throw new Error("invalid polygon");return Z(je[Me-3],je[Me-1],je[Me-2])&&je.splice(je.length-2,1),je}function N(ge,ce){return ge[0]===ce[0]&&ge[1]===ce[1]}function Z(ge,ce,je){var J=je[0],Me=je[1],ne=ge[0],xe=ge[1],Ne=ce[0],Pe=ce[1],He=J-ne,lt=Me-xe,ft=Ne-ne,It=Pe-xe,fe=He*It-lt*ft;return fe!==0?!1:Math.abs(ft)>=Math.abs(It)?ft>0?ne<=J&&J<=Ne:Ne<=J&&J<=ne:It>0?xe<=Me&&Me<=Pe:Pe<=Me&&Me<=xe}var B=c;function L(ge){if(!ge)throw new Error("geojson is required");switch(ge.type){case"Feature":return $(ge);case"FeatureCollection":return ke(ge);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return We(ge);default:throw new Error("unknown GeoJSON type")}}function $(ge){var ce={type:"Feature"};return Object.keys(ge).forEach(function(je){switch(je){case"type":case"properties":case"geometry":return;default:ce[je]=ge[je]}}),ce.properties=U(ge.properties),ce.geometry=We(ge.geometry),ce}function U(ge){var ce={};return ge&&Object.keys(ge).forEach(function(je){var J=ge[je];typeof J=="object"?J===null?ce[je]=null:Array.isArray(J)?ce[je]=J.map(function(Me){return Me}):ce[je]=U(J):ce[je]=J}),ce}function ke(ge){var ce={type:"FeatureCollection"};return Object.keys(ge).forEach(function(je){switch(je){case"type":case"features":return;default:ce[je]=ge[je]}}),ce.features=ge.features.map(function(je){return $(je)}),ce}function We(ge){var ce={type:ge.type};return ge.bbox&&(ce.bbox=ge.bbox),ge.type==="GeometryCollection"?(ce.geometries=ge.geometries.map(function(je){return We(je)}),ce):(ce.coordinates=me(ge.coordinates),ce)}function me(ge){var ce=ge;return typeof ce[0]!="object"?ce.slice():ce.map(function(je){return me(je)})}var Le=L,Se=g(39034);function et(ge,ce){var je=ge.x-ce.x,J=ge.y-ce.y;return je*je+J*J}function at(ge,ce,je){var J=ce.x,Me=ce.y,ne=je.x-J,xe=je.y-Me;if(ne!==0||xe!==0){var Ne=((ge.x-J)*ne+(ge.y-Me)*xe)/(ne*ne+xe*xe);Ne>1?(J=je.x,Me=je.y):Ne>0&&(J+=ne*Ne,Me+=xe*Ne)}return ne=ge.x-J,xe=ge.y-Me,ne*ne+xe*xe}function Lt(ge,ce){for(var je=ge[0],J=[je],Me,ne=1,xe=ge.length;ne<xe;ne++)Me=ge[ne],et(Me,je)>ce&&(J.push(Me),je=Me);return je!==Me&&J.push(Me),J}function Et(ge,ce,je,J,Me){for(var ne=J,xe,Ne=ce+1;Ne<je;Ne++){var Pe=at(ge[Ne],ge[ce],ge[je]);Pe>ne&&(xe=Ne,ne=Pe)}ne>J&&(xe-ce>1&&Et(ge,ce,xe,J,Me),Me.push(ge[xe]),je-xe>1&&Et(ge,xe,je,J,Me))}function jt(ge,ce){var je=ge.length-1,J=[ge[0]];return Et(ge,0,je,ce,J),J.push(ge[je]),J}function pe(ge,ce,je){if(ge.length<=2)return ge;var J=ce!==void 0?ce*ce:1;return ge=je?ge:Lt(ge,J),ge=jt(ge,J),ge}function $e(ge,ce){if(ce=ce||{},!(0,v.Kn)(ce))throw new Error("options is invalid");var je=ce.tolerance!==void 0?ce.tolerance:1,J=ce.highQuality||!1,Me=ce.mutate||!1;if(!ge)throw new Error("geojson is required");if(je&&je<0)throw new Error("invalid tolerance");return Me!==!0&&(ge=Le(ge)),(0,Se.on)(ge,function(ne){ye(ne,je,J)}),ge}function ye(ge,ce,je){var J=ge.type;if(J==="Point"||J==="MultiPoint")return ge;B(ge,!0);var Me=ge.coordinates;switch(J){case"LineString":ge.coordinates=ie(Me,ce,je);break;case"MultiLineString":ge.coordinates=Me.map(function(ne){return ie(ne,ce,je)});break;case"Polygon":ge.coordinates=re(Me,ce,je);break;case"MultiPolygon":ge.coordinates=Me.map(function(ne){return re(ne,ce,je)})}return ge}function ie(ge,ce,je){return pe(ge.map(function(J){return{x:J[0],y:J[1],z:J[2]}}),ce,je).map(function(J){return J.z?[J.x,J.y,J.z]:[J.x,J.y]})}function re(ge,ce,je){return ge.map(function(J){var Me=J.map(function(xe){return{x:xe[0],y:xe[1]}});if(Me.length<4)throw new Error("invalid polygon");for(var ne=pe(Me,ce,je).map(function(xe){return[xe.x,xe.y]});!De(ne);)ce-=ce*.01,ne=pe(Me,ce,je).map(function(xe){return[xe.x,xe.y]});return(ne[ne.length-1][0]!==ne[0][0]||ne[ne.length-1][1]!==ne[0][1])&&ne.push(ne[0]),ne})}function De(ge){return ge.length<3?!1:!(ge.length===3&&ge[2][0]===ge[0][0]&&ge[2][1]===ge[0][1])}var le=$e}}]);
