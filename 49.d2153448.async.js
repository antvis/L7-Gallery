var jd=Math.pow;(self.webpackChunkdistrict_data=self.webpackChunkdistrict_data||[]).push([[49],{81618:function(Qe){"use strict";(function(te,m){Qe.exports=m()})(this,function(){function te(T){var O=[];return T.AMapUI&&O.push(m(T.AMapUI)),T.Loca&&O.push(v(T.Loca)),Promise.all(O)}function m(T){return new Promise(function(O,F){var ue=[];if(T.plugins)for(var Ae=0;Ae<T.plugins.length;Ae+=1)l.AMapUI.plugins.indexOf(T.plugins[Ae])==-1&&ue.push(T.plugins[Ae]);if($.AMapUI===C.failed)F("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if($.AMapUI===C.notload){$.AMapUI=C.loading,l.AMapUI.version=T.version||l.AMapUI.version,Ae=l.AMapUI.version;var re=document.body||document.head,pe=document.createElement("script");pe.type="text/javascript",pe.src="https://webapi.amap.com/ui/"+Ae+"/main.js",pe.onerror=function(fe){$.AMapUI=C.failed,F("\u8BF7\u6C42 AMapUI \u5931\u8D25")},pe.onload=function(){if($.AMapUI=C.loaded,ue.length)window.AMapUI.loadUI(ue,function(){for(var fe=0,ke=ue.length;fe<ke;fe++){var je=ue[fe].split("/").slice(-1)[0];window.AMapUI[je]=arguments[fe]}for(O();R.AMapUI.length;)R.AMapUI.splice(0,1)[0]()});else for(O();R.AMapUI.length;)R.AMapUI.splice(0,1)[0]()},re.appendChild(pe)}else $.AMapUI===C.loaded?T.version&&T.version!==l.AMapUI.version?F("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):ue.length?window.AMapUI.loadUI(ue,function(){for(var fe=0,ke=ue.length;fe<ke;fe++){var je=ue[fe].split("/").slice(-1)[0];window.AMapUI[je]=arguments[fe]}O()}):O():T.version&&T.version!==l.AMapUI.version?F("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):R.AMapUI.push(function(fe){fe?F(fe):ue.length?window.AMapUI.loadUI(ue,function(){for(var ke=0,je=ue.length;ke<je;ke++){var bt=ue[ke].split("/").slice(-1)[0];window.AMapUI[bt]=arguments[ke]}O()}):O()})})}function v(T){return new Promise(function(O,F){if($.Loca===C.failed)F("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if($.Loca===C.notload){$.Loca=C.loading,l.Loca.version=T.version||l.Loca.version;var ue=l.Loca.version,Ae=l.AMap.version.startsWith("2"),re=ue.startsWith("2");if(Ae&&!re||!Ae&&re)F("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{Ae=l.key,re=document.body||document.head;var pe=document.createElement("script");pe.type="text/javascript",pe.src="https://webapi.amap.com/loca?v="+ue+"&key="+Ae,pe.onerror=function(fe){$.Loca=C.failed,F("\u8BF7\u6C42 AMapUI \u5931\u8D25")},pe.onload=function(){for($.Loca=C.loaded,O();R.Loca.length;)R.Loca.splice(0,1)[0]()},re.appendChild(pe)}}else $.Loca===C.loaded?T.version&&T.version!==l.Loca.version?F("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):O():T.version&&T.version!==l.Loca.version?F("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):R.Loca.push(function(fe){fe?F(fe):F()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var C;(function(T){T.notload="notload",T.loading="loading",T.loaded="loaded",T.failed="failed"})(C||(C={}));var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},$={AMap:C.notload,AMapUI:C.notload,Loca:C.notload},R={AMap:[],AMapUI:[],Loca:[]},z=[],L=function(T){typeof T=="function"&&($.AMap===C.loaded?T(window.AMap):z.push(T))};return{load:function(T){return new Promise(function(O,F){if($.AMap==C.failed)F("");else if($.AMap==C.notload){var ue=T.key,Ae=T.version,re=T.plugins;ue?(window.AMap&&location.host!=="lbs.amap.com"&&F("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),l.key=ue,l.AMap.version=Ae||l.AMap.version,l.AMap.plugins=re||l.AMap.plugins,$.AMap=C.loading,Ae=document.body||document.head,window.___onAPILoaded=function(fe){if(delete window.___onAPILoaded,fe)$.AMap=C.failed,F(fe);else for($.AMap=C.loaded,te(T).then(function(){O(window.AMap)}).catch(F);z.length;)z.splice(0,1)[0]()},re=document.createElement("script"),re.type="text/javascript",re.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+ue+"&plugin="+l.AMap.plugins.join(","),re.onerror=function(fe){$.AMap=C.failed,F(fe)},Ae.appendChild(re)):F("\u8BF7\u586B\u5199key")}else if($.AMap==C.loaded)if(T.key&&T.key!==l.key)F("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(T.version&&T.version!==l.AMap.version)F("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(ue=[],T.plugins)for(Ae=0;Ae<T.plugins.length;Ae+=1)l.AMap.plugins.indexOf(T.plugins[Ae])==-1&&ue.push(T.plugins[Ae]);ue.length?window.AMap.plugin(ue,function(){te(T).then(function(){O(window.AMap)}).catch(F)}):te(T).then(function(){O(window.AMap)}).catch(F)}else if(T.key&&T.key!==l.key)F("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(T.version&&T.version!==l.AMap.version)F("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var pe=[];if(T.plugins)for(Ae=0;Ae<T.plugins.length;Ae+=1)l.AMap.plugins.indexOf(T.plugins[Ae])==-1&&pe.push(T.plugins[Ae]);L(function(){pe.length?window.AMap.plugin(pe,function(){te(T).then(function(){O(window.AMap)}).catch(F)}):te(T).then(function(){O(window.AMap)}).catch(F)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},$={AMap:C.notload,AMapUI:C.notload,Loca:C.notload},R={AMap:[],AMapUI:[],Loca:[]}}}})},16397:function(Qe,te,m){"use strict";m.d(te,{R_:function(){return je}});var v=m(86500),C=m(1350),l=2,$=.16,R=.05,z=.05,L=.15,T=5,O=4,F=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ue(st){var vt=st.r,Dt=st.g,ar=st.b,$t=(0,v.py)(vt,Dt,ar);return{h:$t.h*360,s:$t.s,v:$t.v}}function Ae(st){var vt=st.r,Dt=st.g,ar=st.b;return"#".concat((0,v.vq)(vt,Dt,ar,!1))}function re(st,vt,Dt){var ar=Dt/100,$t={r:(vt.r-st.r)*ar+st.r,g:(vt.g-st.g)*ar+st.g,b:(vt.b-st.b)*ar+st.b};return $t}function pe(st,vt,Dt){var ar;return Math.round(st.h)>=60&&Math.round(st.h)<=240?ar=Dt?Math.round(st.h)-l*vt:Math.round(st.h)+l*vt:ar=Dt?Math.round(st.h)+l*vt:Math.round(st.h)-l*vt,ar<0?ar+=360:ar>=360&&(ar-=360),ar}function fe(st,vt,Dt){if(st.h===0&&st.s===0)return st.s;var ar;return Dt?ar=st.s-$*vt:vt===O?ar=st.s+$:ar=st.s+R*vt,ar>1&&(ar=1),Dt&&vt===T&&ar>.1&&(ar=.1),ar<.06&&(ar=.06),Number(ar.toFixed(2))}function ke(st,vt,Dt){var ar;return Dt?ar=st.v+z*vt:ar=st.v-L*vt,ar>1&&(ar=1),Number(ar.toFixed(2))}function je(st){for(var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=[],ar=(0,C.uA)(st),$t=T;$t>0;$t-=1){var ur=ue(ar),we=Ae((0,C.uA)({h:pe(ur,$t,!0),s:fe(ur,$t,!0),v:ke(ur,$t,!0)}));Dt.push(we)}Dt.push(Ae(ar));for(var At=1;At<=O;At+=1){var nt=ue(ar),Lt=Ae((0,C.uA)({h:pe(nt,At),s:fe(nt,At),v:ke(nt,At)}));Dt.push(Lt)}return vt.theme==="dark"?F.map(function(St){var Ut=St.index,lt=St.opacity,Et=Ae(re((0,C.uA)(vt.backgroundColor||"#141414"),(0,C.uA)(Dt[Ut]),lt*100));return Et}):Dt}var bt={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ut={},wt={};Object.keys(bt).forEach(function(st){ut[st]=je(bt[st]),ut[st].primary=ut[st][5],wt[st]=je(bt[st],{theme:"dark",backgroundColor:"#141414"}),wt[st].primary=wt[st][5]});var se=ut.red,qe=ut.volcano,me=ut.gold,_e=ut.orange,Te=ut.yellow,ht=ut.lime,We=ut.green,Ne=ut.cyan,he=ut.blue,Ve=ut.geekblue,ie=ut.purple,ze=ut.magenta,Le=ut.grey,Re=ut.grey},51222:function(Qe,te,m){"use strict";m.d(te,{E4:function(){return Bo},jG:function(){return dn},fp:function(){return lt},xy:function(){return Zr}});var v=m(1413),C=m(74902),l=m(67294);function $(Rr){for(var Mn=0,pn,wn=0,Kn=Rr.length;Kn>=4;++wn,Kn-=4)pn=Rr.charCodeAt(wn)&255|(Rr.charCodeAt(++wn)&255)<<8|(Rr.charCodeAt(++wn)&255)<<16|(Rr.charCodeAt(++wn)&255)<<24,pn=(pn&65535)*1540483477+((pn>>>16)*59797<<16),pn^=pn>>>24,Mn=(pn&65535)*1540483477+((pn>>>16)*59797<<16)^(Mn&65535)*1540483477+((Mn>>>16)*59797<<16);switch(Kn){case 3:Mn^=(Rr.charCodeAt(wn+2)&255)<<16;case 2:Mn^=(Rr.charCodeAt(wn+1)&255)<<8;case 1:Mn^=Rr.charCodeAt(wn)&255,Mn=(Mn&65535)*1540483477+((Mn>>>16)*59797<<16)}return Mn^=Mn>>>13,Mn=(Mn&65535)*1540483477+((Mn>>>16)*59797<<16),((Mn^Mn>>>15)>>>0).toString(36)}var R=$,z=m(56982),L=m(91881),T=m(15671),O=m(43144),F=m(4942),ue=function(){function Rr(){(0,T.Z)(this,Rr),(0,F.Z)(this,"cache",new Map)}return(0,O.Z)(Rr,[{key:"get",value:function(pn){return this.cache.get(pn.join("%"))||null}},{key:"update",value:function(pn,wn){var Kn=pn.join("%"),Ei=this.cache.get(Kn),Ji=wn(Ei);Ji===null?this.cache.delete(Kn):this.cache.set(Kn,Ji)}}]),Rr}(),Ae=ue,re=null,pe="data-token-hash",fe="data-css-hash",ke="data-dev-cache-path",je="__cssinjs_instance__",bt=Math.random().toString(12).slice(2);function ut(){if(typeof document!="undefined"&&document.head&&document.body){var Rr=document.body.querySelectorAll("style[".concat(fe,"]"))||[],Mn=document.head.firstChild;Array.from(Rr).forEach(function(wn){wn[je]=wn[je]||bt,document.head.insertBefore(wn,Mn)});var pn={};Array.from(document.querySelectorAll("style[".concat(fe,"]"))).forEach(function(wn){var Kn=wn.getAttribute(fe);if(pn[Kn]){if(wn[je]===bt){var Ei;(Ei=wn.parentNode)===null||Ei===void 0||Ei.removeChild(wn)}}else pn[Kn]=!0})}return new Ae}var wt=l.createContext({hashPriority:"low",cache:ut(),defaultCache:!0}),se=function(Mn){var pn=Mn.children,wn=_objectWithoutProperties(Mn,re),Kn=React.useContext(wt),Ei=useMemo(function(){var Ji=_objectSpread({},Kn);Object.keys(wn).forEach(function(oa){var Ma=wn[oa];wn[oa]!==void 0&&(Ji[oa]=Ma)});var Yi=wn.cache;return Ji.cache=Ji.cache||ut(),Ji.defaultCache=!Yi&&Kn.defaultCache,Ji},[Kn,wn],function(Ji,Yi){return!isEqual(Ji[0],Yi[0],!0)||!isEqual(Ji[1],Yi[1],!0)});return React.createElement(wt.Provider,{value:Ei},pn)},qe=wt,me=m(97685);function _e(){return!1}var Te=!1;function ht(){return Te}var We=_e;if(!1)var Ne,he;function Ve(Rr,Mn,pn,wn){var Kn=l.useContext(qe),Ei=Kn.cache,Ji=[Rr].concat((0,C.Z)(Mn)),Yi=We();return l.useMemo(function(){Ei.update(Ji,function(oa){var Ma=oa||[],k=(0,me.Z)(Ma,2),de=k[0],yt=de===void 0?0:de,Ue=k[1],nr=Ue,Mr=nr||pn();return[yt+1,Mr]})},[Ji.join("_")]),l.useEffect(function(){return function(){Ei.update(Ji,function(oa){var Ma=oa||[],k=(0,me.Z)(Ma,2),de=k[0],yt=de===void 0?0:de,Ue=k[1],nr=yt-1;return nr===0?(wn==null||wn(Ue,!1),null):[yt-1,Ue]})}},Ji),Ei.get(Ji)[1]}var ie=m(71002),ze=m(98924),Le=m(44958);function Re(Rr){var Mn="";return Object.keys(Rr).forEach(function(pn){var wn=Rr[pn];Mn+=pn,wn&&(0,ie.Z)(wn)==="object"?Mn+=Re(wn):Mn+=wn}),Mn}function st(Rr,Mn){return R("".concat(Mn,"_").concat(Re(Rr)))}var vt="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),Dt="903px";function ar(Rr,Mn){if((0,ze.Z)()){var pn;(0,Le.hq)(Rr,vt);var wn=document.createElement("div");wn.style.position="fixed",wn.style.left="0",wn.style.top="0",Mn==null||Mn(wn),document.body.appendChild(wn);var Kn=getComputedStyle(wn).width===Dt;return(pn=wn.parentNode)===null||pn===void 0||pn.removeChild(wn),(0,Le.jL)(vt),Kn}return!1}var $t=void 0;function ur(){return $t===void 0&&($t=ar("@layer ".concat(vt," { .").concat(vt," { width: ").concat(Dt,"!important; } }"),function(Rr){Rr.className=vt})),$t}var we={},At="css",nt=new Map;function Lt(Rr){nt.set(Rr,(nt.get(Rr)||0)+1)}function St(Rr){if(typeof document!="undefined"){var Mn=document.querySelectorAll("style[".concat(pe,'="').concat(Rr,'"]'));Mn.forEach(function(pn){if(pn[je]===bt){var wn;(wn=pn.parentNode)===null||wn===void 0||wn.removeChild(pn)}})}}function Ut(Rr){nt.set(Rr,(nt.get(Rr)||0)-1);var Mn=Array.from(nt.keys()),pn=Mn.filter(function(wn){var Kn=nt.get(wn)||0;return Kn<=0});pn.length<Mn.length&&pn.forEach(function(wn){St(wn),nt.delete(wn)})}function lt(Rr,Mn){var pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},wn=pn.salt,Kn=wn===void 0?"":wn,Ei=pn.override,Ji=Ei===void 0?we:Ei,Yi=pn.formatToken,oa=l.useMemo(function(){return Object.assign.apply(Object,[{}].concat((0,C.Z)(Mn)))},[Mn]),Ma=l.useMemo(function(){return Re(oa)},[oa]),k=l.useMemo(function(){return Re(Ji)},[Ji]),de=Ve("token",[Kn,Rr.id,Ma,k],function(){var yt=Rr.getDerivativeToken(oa),Ue=(0,v.Z)((0,v.Z)({},yt),Ji);Yi&&(Ue=Yi(Ue));var nr=st(Ue,Kn);Ue._tokenKey=nr,Lt(nr);var Mr="".concat(At,"-").concat(R(nr));return Ue._hashId=Mr,[Ue,Mr]},function(yt){Ut(yt[0]._tokenKey)});return de}var Et=m(87462),Zt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Be=Zt,He="-ms-",ft="-moz-",Z="-webkit-",J="comm",K="rule",B="decl",j="@page",ee="@media",W="@import",De="@charset",ot="@viewport",Wt="@supports",Ct="@document",Qt="@namespace",ir="@keyframes",Er="@font-face",Qr="@counter-style",Mt="@font-feature-values",br=Math.abs,Nt=String.fromCharCode,Pr=Object.assign;function _r(Rr,Mn){return X(Rr,0)^45?(((Mn<<2^X(Rr,0))<<2^X(Rr,1))<<2^X(Rr,2))<<2^X(Rr,3):0}function kr(Rr){return Rr.trim()}function zt(Rr,Mn){return(Rr=Mn.exec(Rr))?Rr[0]:Rr}function mr(Rr,Mn,pn){return Rr.replace(Mn,pn)}function Or(Rr,Mn){return Rr.indexOf(Mn)}function X(Rr,Mn){return Rr.charCodeAt(Mn)|0}function Nr(Rr,Mn,pn){return Rr.slice(Mn,pn)}function Xe(Rr){return Rr.length}function xe(Rr){return Rr.length}function rt(Rr,Mn){return Mn.push(Rr),Rr}function kt(Rr,Mn){return Rr.map(Mn).join("")}function cr(Rr,Mn){for(var pn="",wn=xe(Rr),Kn=0;Kn<wn;Kn++)pn+=Mn(Rr[Kn],Kn,Rr,Mn)||"";return pn}function Ar(Rr,Mn,pn,wn){switch(Rr.type){case W:case B:return Rr.return=Rr.return||Rr.value;case J:return"";case ir:return Rr.return=Rr.value+"{"+cr(Rr.children,wn)+"}";case K:Rr.value=Rr.props.join(",")}return Xe(pn=cr(Rr.children,wn))?Rr.return=Rr.value+"{"+pn+"}":""}var Lr=1,sr=1,Ge=0,Gr=0,on=0,cn="";function Dn(Rr,Mn,pn,wn,Kn,Ei,Ji){return{value:Rr,root:Mn,parent:pn,type:wn,props:Kn,children:Ei,line:Lr,column:sr,length:Ji,return:""}}function ci(Rr,Mn){return assign(Dn("",null,null,"",null,null,0),Rr,{length:-Rr.length},Mn)}function ia(){return on}function Vi(){return on=Gr>0?X(cn,--Gr):0,sr--,on===10&&(sr=1,Lr--),on}function On(){return on=Gr<Ge?X(cn,Gr++):0,sr++,on===10&&(sr=1,Lr++),on}function ji(){return X(cn,Gr)}function oi(){return Gr}function Hi(Rr,Mn){return Nr(cn,Rr,Mn)}function Ca(Rr){switch(Rr){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wi(Rr){return Lr=sr=1,Ge=Xe(cn=Rr),Gr=0,[]}function jo(Rr){return cn="",Rr}function uo(Rr){return kr(Hi(Gr-1,va(Rr===91?Rr+2:Rr===40?Rr+1:Rr)))}function Pn(Rr){return jo(Oi(Wi(Rr)))}function bn(Rr){for(;(on=ji())&&on<33;)On();return Ca(Rr)>2||Ca(on)>3?"":" "}function Oi(Rr){for(;On();)switch(Ca(on)){case 0:append(Aa(Gr-1),Rr);break;case 2:append(uo(on),Rr);break;default:append(from(on),Rr)}return Rr}function di(Rr,Mn){for(;--Mn&&On()&&!(on<48||on>102||on>57&&on<65||on>70&&on<97););return Hi(Rr,oi()+(Mn<6&&ji()==32&&On()==32))}function va(Rr){for(;On();)switch(on){case Rr:return Gr;case 34:case 39:Rr!==34&&Rr!==39&&va(on);break;case 40:Rr===41&&va(Rr);break;case 92:On();break}return Gr}function wa(Rr,Mn){for(;On()&&Rr+on!==47+10;)if(Rr+on===42+42&&ji()===47)break;return"/*"+Hi(Mn,Gr-1)+"*"+Nt(Rr===47?Rr:On())}function Aa(Rr){for(;!Ca(ji());)On();return Hi(Rr,Gr)}function Ta(Rr){return jo(ma("",null,null,null,[""],Rr=Wi(Rr),0,[0],Rr))}function ma(Rr,Mn,pn,wn,Kn,Ei,Ji,Yi,oa){for(var Ma=0,k=0,de=Ji,yt=0,Ue=0,nr=0,Mr=1,qr=1,kn=1,Nn=0,Mi="",Bi=Kn,io=Ei,co=wn,Sa=Mi;qr;)switch(nr=Nn,Nn=On()){case 40:if(nr!=108&&X(Sa,de-1)==58){Or(Sa+=mr(uo(Nn),"&","&\f"),"&\f")!=-1&&(kn=-1);break}case 34:case 39:case 91:Sa+=uo(Nn);break;case 9:case 10:case 13:case 32:Sa+=bn(nr);break;case 92:Sa+=di(oi()-1,7);continue;case 47:switch(ji()){case 42:case 47:rt(Uo(wa(On(),oi()),Mn,pn),oa);break;default:Sa+="/"}break;case 123*Mr:Yi[Ma++]=Xe(Sa)*kn;case 125*Mr:case 59:case 0:switch(Nn){case 0:case 125:qr=0;case 59+k:Ue>0&&Xe(Sa)-de&&rt(Ue>32?ha(Sa+";",wn,pn,de-1):ha(mr(Sa," ","")+";",wn,pn,de-2),oa);break;case 59:Sa+=";";default:if(rt(co=Da(Sa,Mn,pn,Ma,k,Kn,Yi,Mi,Bi=[],io=[],de),Ei),Nn===123)if(k===0)ma(Sa,Mn,co,co,Bi,Ei,de,Yi,io);else switch(yt===99&&X(Sa,3)===110?100:yt){case 100:case 109:case 115:ma(Rr,co,co,wn&&rt(Da(Rr,co,co,0,0,Kn,Yi,Mi,Kn,Bi=[],de),io),Kn,io,de,Yi,wn?Bi:io);break;default:ma(Sa,co,co,co,[""],io,0,Yi,io)}}Ma=k=Ue=0,Mr=kn=1,Mi=Sa="",de=Ji;break;case 58:de=1+Xe(Sa),Ue=nr;default:if(Mr<1){if(Nn==123)--Mr;else if(Nn==125&&Mr++==0&&Vi()==125)continue}switch(Sa+=Nt(Nn),Nn*Mr){case 38:kn=k>0?1:(Sa+="\f",-1);break;case 44:Yi[Ma++]=(Xe(Sa)-1)*kn,kn=1;break;case 64:ji()===45&&(Sa+=uo(On())),yt=ji(),k=de=Xe(Mi=Sa+=Aa(oi())),Nn++;break;case 45:nr===45&&Xe(Sa)==2&&(Mr=0)}}return Ei}function Da(Rr,Mn,pn,wn,Kn,Ei,Ji,Yi,oa,Ma,k){for(var de=Kn-1,yt=Kn===0?Ei:[""],Ue=xe(yt),nr=0,Mr=0,qr=0;nr<wn;++nr)for(var kn=0,Nn=Nr(Rr,de+1,de=br(Mr=Ji[nr])),Mi=Rr;kn<Ue;++kn)(Mi=kr(Mr>0?yt[kn]+" "+Nn:mr(Nn,/&\f/g,yt[kn])))&&(oa[qr++]=Mi);return Dn(Rr,Mn,pn,Kn===0?K:Yi,oa,Ma,k)}function Uo(Rr,Mn,pn){return Dn(Rr,Mn,pn,J,Nt(ia()),Nr(Rr,2,-2),0)}function ha(Rr,Mn,pn,wn){return Dn(Rr,Mn,pn,B,Nr(Rr,0,wn),Nr(Rr,wn+1,-1),wn)}var xa=m(80334);function eo(Rr,Mn){var pn=Mn.path,wn=Mn.parentSelectors;devWarning(!1,"[Ant Design CSS-in-JS] ".concat(pn?"Error in ".concat(pn,": "):"").concat(Rr).concat(wn.length?" Selector: ".concat(wn.join(" | ")):""))}var Ee=function(Mn,pn,wn){if(Mn==="content"){var Kn=/(attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,Ei=["normal","none","initial","inherit","unset"];(typeof pn!="string"||Ei.indexOf(pn)===-1&&!Kn.test(pn)&&(pn.charAt(0)!==pn.charAt(pn.length-1)||pn.charAt(0)!=='"'&&pn.charAt(0)!=="'"))&&lintWarning("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\"".concat(pn,"\"'`."),wn)}},Po=null,Hs=function(Mn,pn,wn){Mn==="animation"&&wn.hashId&&pn!=="none"&&lintWarning("You seem to be using hashed animation '".concat(pn,"', in which case 'animationName' with Keyframe as value is recommended."),wn)},no=null;function qo(Rr){var Mn,pn=((Mn=Rr.match(/:not\(([^)]*)\)/))===null||Mn===void 0?void 0:Mn[1])||"",wn=pn.split(/(\[[^[]*])|(?=[.#])/).filter(function(Kn){return Kn});return wn.length>1}function os(Rr){return Rr.parentSelectors.reduce(function(Mn,pn){return Mn?pn.includes("&")?pn.replace(/&/g,Mn):"".concat(Mn," ").concat(pn):pn},"")}var Go=function(Mn,pn,wn){var Kn=os(wn),Ei=Kn.match(/:not\([^)]*\)/g)||[];Ei.length>0&&Ei.some(qo)&&lintWarning("Concat ':not' selector not support in legacy browsers.",wn)},Wo=null,za=function(Mn,pn,wn){switch(Mn){case"marginLeft":case"marginRight":case"paddingLeft":case"paddingRight":case"left":case"right":case"borderLeft":case"borderLeftWidth":case"borderLeftStyle":case"borderLeftColor":case"borderRight":case"borderRightWidth":case"borderRightStyle":case"borderRightColor":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":lintWarning("You seem to be using non-logical property '".concat(Mn,"' which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),wn);return;case"margin":case"padding":case"borderWidth":case"borderStyle":if(typeof pn=="string"){var Kn=pn.split(" ").map(function(Yi){return Yi.trim()});Kn.length===4&&Kn[1]!==Kn[3]&&lintWarning("You seem to be using '".concat(Mn,"' property with different left ").concat(Mn," and right ").concat(Mn,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),wn)}return;case"clear":case"textAlign":(pn==="left"||pn==="right")&&lintWarning("You seem to be using non-logical value '".concat(pn,"' of ").concat(Mn,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),wn);return;case"borderRadius":if(typeof pn=="string"){var Ei=pn.split("/").map(function(Yi){return Yi.trim()}),Ji=Ei.reduce(function(Yi,oa){if(Yi)return Yi;var Ma=oa.split(" ").map(function(k){return k.trim()});return Ma.length>=2&&Ma[0]!==Ma[1]||Ma.length===3&&Ma[1]!==Ma[2]||Ma.length===4&&Ma[2]!==Ma[3]?!0:Yi},!1);Ji&&lintWarning("You seem to be using non-logical value '".concat(pn,"' of ").concat(Mn,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),wn)}return;default:}},Tu=null,Cs=function(Mn,pn,wn){wn.parentSelectors.some(function(Kn){var Ei=Kn.split(",");return Ei.some(function(Ji){return Ji.split("&").length>2})})&&lintWarning("Should not use more than one `&` in a selector.",wn)},Zs=null,ts=(0,ze.Z)(),Vs="_skip_check_";function ou(Rr){var Mn=cr(Ta(Rr),Ar);return Mn.replace(/\{%%%\:[^;];}/g,";")}function ls(Rr){return(0,ie.Z)(Rr)==="object"&&Rr&&Vs in Rr}function Di(Rr,Mn,pn){if(!Mn)return Rr;var wn=".".concat(Mn),Kn=pn==="low"?":where(".concat(wn,")"):wn,Ei=Rr.split(",").map(function(Ji){var Yi,oa=Ji.trim().split(/\s+/),Ma=oa[0]||"",k=((Yi=Ma.match(/^\w+/))===null||Yi===void 0?void 0:Yi[0])||"";return Ma="".concat(k).concat(Kn).concat(Ma.slice(k.length)),[Ma].concat((0,C.Z)(oa.slice(1))).join(" ")});return Ei.join(",")}var As=new Set,Rs=null,vr=function Rr(Mn){var pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},Kn=wn.root,Ei=wn.injectHash,Ji=wn.parentSelectors,Yi=pn.hashId,oa=pn.layer,Ma=pn.path,k=pn.hashPriority,de=pn.transformers,yt=de===void 0?[]:de,Ue=pn.linters,nr=Ue===void 0?[]:Ue,Mr="",qr={};function kn(co){var Sa=co.getName(Yi);if(!qr[Sa]){var Ko=Rr(co.style,pn,{root:!1,parentSelectors:Ji}),wo=(0,me.Z)(Ko,1),Oo=wo[0];qr[Sa]="@keyframes ".concat(co.getName(Yi)).concat(Oo)}}function Nn(co){var Sa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return co.forEach(function(Ko){Array.isArray(Ko)?Nn(Ko,Sa):Ko&&Sa.push(Ko)}),Sa}var Mi=Nn(Array.isArray(Mn)?Mn:[Mn]);if(Mi.forEach(function(co){var Sa=typeof co=="string"&&!Kn?{}:co;if(typeof Sa=="string")Mr+="".concat(Sa,`
`);else if(Sa._keyframe)kn(Sa);else{var Ko=yt.reduce(function(wo,Oo){var Ho;return(Oo==null||(Ho=Oo.visit)===null||Ho===void 0?void 0:Ho.call(Oo,wo))||wo},Sa);Object.keys(Ko).forEach(function(wo){var Oo=Ko[wo];if((0,ie.Z)(Oo)==="object"&&Oo&&(wo!=="animationName"||!Oo._keyframe)&&!ls(Oo)){var Ho=!1,Io=wo.trim(),qs=!1;(Kn||Ei)&&Yi?Io.startsWith("@")?Ho=!0:Io=Di(wo,Yi,k):Kn&&!Yi&&(Io==="&"||Io==="")&&(Io="",qs=!0);var Il=Rr(Oo,pn,{root:qs,injectHash:Ho,parentSelectors:[].concat((0,C.Z)(Ji),[Io])}),Ao=(0,me.Z)(Il,2),Va=Ao[0],gs=Ao[1];qr=(0,v.Z)((0,v.Z)({},qr),gs),Mr+="".concat(Io).concat(Va)}else{var Ws,bs=(Ws=Oo==null?void 0:Oo.value)!==null&&Ws!==void 0?Ws:Oo,Ps=wo.replace(/[A-Z]/g,function(gl){return"-".concat(gl.toLowerCase())}),Xs=bs;!Be[wo]&&typeof Xs=="number"&&Xs!==0&&(Xs="".concat(Xs,"px")),wo==="animationName"&&Oo!==null&&Oo!==void 0&&Oo._keyframe&&(kn(Oo),Xs=Oo.getName(Yi)),Mr+="".concat(Ps,":").concat(Xs,";")}})}}),!Kn)Mr="{".concat(Mr,"}");else if(oa&&ur()){var Bi=oa.split(","),io=Bi[Bi.length-1].trim();Mr="@layer ".concat(io," {").concat(Mr,"}"),Bi.length>1&&(Mr="@layer ".concat(oa,"{%%%:%}").concat(Mr))}return[Mr,qr]};function zr(Rr,Mn){return R("".concat(Rr.join("%")).concat(Mn))}function lr(){return null}function Zr(Rr,Mn){var pn=Rr.token,wn=Rr.path,Kn=Rr.hashId,Ei=Rr.layer,Ji=l.useContext(qe),Yi=Ji.autoClear,oa=Ji.mock,Ma=Ji.defaultCache,k=Ji.hashPriority,de=Ji.container,yt=Ji.ssrInline,Ue=Ji.transformers,nr=Ji.linters,Mr=pn._tokenKey,qr=[Mr].concat((0,C.Z)(wn)),kn=ts,Nn=Ve("style",qr,function(){var Sa=Mn(),Ko=vr(Sa,{hashId:Kn,hashPriority:k,layer:Ei,path:wn.join("-"),transformers:Ue,linters:nr}),wo=(0,me.Z)(Ko,2),Oo=wo[0],Ho=wo[1],Io=ou(Oo),qs=zr(qr,Io);if(kn){var Il=(0,Le.hq)(Io,qs,{mark:fe,prepend:"queue",attachTo:de});Il[je]=bt,Il.setAttribute(pe,Mr),Object.keys(Ho).forEach(function(Ao){As.has(Ao)||(As.add(Ao),(0,Le.hq)(ou(Ho[Ao]),"_effect-".concat(Ao),{mark:fe,prepend:"queue",attachTo:de}))})}return[Io,Mr,qs]},function(Sa,Ko){var wo=(0,me.Z)(Sa,3),Oo=wo[2];(Ko||Yi)&&ts&&(0,Le.jL)(Oo,{mark:fe})}),Mi=(0,me.Z)(Nn,3),Bi=Mi[0],io=Mi[1],co=Mi[2];return function(Sa){var Ko;if(!yt||kn||!Ma)Ko=l.createElement(lr,null);else{var wo;Ko=l.createElement("style",(0,Et.Z)({},(wo={},(0,F.Z)(wo,pe,io),(0,F.Z)(wo,fe,co),wo),{dangerouslySetInnerHTML:{__html:Bi}}))}return l.createElement(l.Fragment,null,Ko,Sa)}}function Hn(Rr){var Mn=Array.from(Rr.cache.keys()).filter(function(wn){return wn.startsWith("style%")}),pn="";return Mn.forEach(function(wn){var Kn=_slicedToArray(Rr.cache.get(wn)[1],3),Ei=Kn[0],Ji=Kn[1],Yi=Kn[2];pn+="<style ".concat(ATTR_TOKEN,'="').concat(Ji,'" ').concat(ATTR_MARK,'="').concat(Yi,'">').concat(Ei,"</style>")}),pn}var Hr=function(){function Rr(Mn,pn){(0,T.Z)(this,Rr),(0,F.Z)(this,"name",void 0),(0,F.Z)(this,"style",void 0),(0,F.Z)(this,"_keyframe",!0),this.name=Mn,this.style=pn}return(0,O.Z)(Rr,[{key:"getName",value:function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return pn?"".concat(pn,"-").concat(this.name):this.name}}]),Rr}(),Bo=Hr;function Yr(Rr,Mn){if(Rr.length!==Mn.length)return!1;for(var pn=0;pn<Rr.length;pn++)if(Rr[pn]!==Mn[pn])return!1;return!0}var pr=function(){function Rr(){(0,T.Z)(this,Rr),(0,F.Z)(this,"cache",void 0),(0,F.Z)(this,"keys",void 0),(0,F.Z)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return(0,O.Z)(Rr,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(pn){var wn,Kn,Ei=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ji={map:this.cache};return pn.forEach(function(Yi){if(!Ji)Ji=void 0;else{var oa,Ma;Ji=(oa=Ji)===null||oa===void 0||(Ma=oa.map)===null||Ma===void 0?void 0:Ma.get(Yi)}}),(wn=Ji)!==null&&wn!==void 0&&wn.value&&Ei&&(Ji.value[1]=this.cacheCallTimes++),(Kn=Ji)===null||Kn===void 0?void 0:Kn.value}},{key:"get",value:function(pn){var wn;return(wn=this.internalGet(pn,!0))===null||wn===void 0?void 0:wn[0]}},{key:"has",value:function(pn){return!!this.internalGet(pn)}},{key:"set",value:function(pn,wn){var Kn=this;if(!this.has(pn)){if(this.size()+1>Rr.MAX_CACHE_SIZE+Rr.MAX_CACHE_OFFSET){var Ei=this.keys.reduce(function(Ma,k){var de=(0,me.Z)(Ma,2),yt=de[1];return Kn.internalGet(k)[1]<yt?[k,Kn.internalGet(k)[1]]:Ma},[this.keys[0],this.cacheCallTimes]),Ji=(0,me.Z)(Ei,1),Yi=Ji[0];this.delete(Yi)}this.keys.push(pn)}var oa=this.cache;pn.forEach(function(Ma,k){if(k===pn.length-1)oa.set(Ma,{value:[wn,Kn.cacheCallTimes++]});else{var de=oa.get(Ma);de?de.map||(de.map=new Map):oa.set(Ma,{map:new Map}),oa=oa.get(Ma).map}})}},{key:"deleteByPath",value:function(pn,wn){var Kn=pn.get(wn[0]);if(wn.length===1){var Ei;return Kn.map?pn.set(wn[0],{map:Kn.map}):pn.delete(wn[0]),(Ei=Kn.value)===null||Ei===void 0?void 0:Ei[0]}var Ji=this.deleteByPath(Kn.map,wn.slice(1));return(!Kn.map||Kn.map.size===0)&&!Kn.value&&pn.delete(wn[0]),Ji}},{key:"delete",value:function(pn){if(this.has(pn))return this.keys=this.keys.filter(function(wn){return!Yr(wn,pn)}),this.deleteByPath(this.cache,pn)}}]),Rr}();(0,F.Z)(pr,"MAX_CACHE_SIZE",20),(0,F.Z)(pr,"MAX_CACHE_OFFSET",5);var at=0,hr=function(){function Rr(Mn){(0,T.Z)(this,Rr),(0,F.Z)(this,"derivatives",void 0),(0,F.Z)(this,"id",void 0),this.derivatives=Array.isArray(Mn)?Mn:[Mn],this.id=at,Mn.length===0&&(0,xa.Kp)(Mn.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),at+=1}return(0,O.Z)(Rr,[{key:"getDerivativeToken",value:function(pn){return this.derivatives.reduce(function(wn,Kn){return Kn(pn,wn)},void 0)}}]),Rr}(),er=new pr;function dn(Rr){var Mn=Array.isArray(Rr)?Rr:[Rr];return er.has(Mn)||er.set(Mn,new hr(Mn)),er.get(Mn)}function mn(Rr){if(typeof Rr=="number")return[Rr];var Mn=String(Rr).split(/\s+/),pn="",wn=0;return Mn.reduce(function(Kn,Ei){return Ei.includes("(")?(pn+=Ei,wn+=Ei.split("(").length-1):Ei.includes(")")?(pn+=Ei,wn-=Ei.split(")").length-1,wn===0&&(Kn.push(pn),pn="")):wn>0?pn+=Ei:Kn.push(Ei),Kn},[])}function Vn(Rr){return Rr.notSplit=!0,Rr}var ni={inset:["top","right","bottom","left"],insetBlock:["top","bottom"],insetBlockStart:["top"],insetBlockEnd:["bottom"],insetInline:["left","right"],insetInlineStart:["left"],insetInlineEnd:["right"],marginBlock:["marginTop","marginBottom"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],marginInline:["marginLeft","marginRight"],marginInlineStart:["marginLeft"],marginInlineEnd:["marginRight"],paddingBlock:["paddingTop","paddingBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"],paddingInline:["paddingLeft","paddingRight"],paddingInlineStart:["paddingLeft"],paddingInlineEnd:["paddingRight"],borderBlock:Vn(["borderTop","borderBottom"]),borderBlockStart:Vn(["borderTop"]),borderBlockEnd:Vn(["borderBottom"]),borderInline:Vn(["borderLeft","borderRight"]),borderInlineStart:Vn(["borderLeft"]),borderInlineEnd:Vn(["borderRight"]),borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndWidth:["borderBottomWidth"],borderInlineWidth:["borderLeftWidth","borderRightWidth"],borderInlineStartWidth:["borderLeftWidth"],borderInlineEndWidth:["borderRightWidth"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderBlockStartStyle:["borderTopStyle"],borderBlockEndStyle:["borderBottomStyle"],borderInlineStyle:["borderLeftStyle","borderRightStyle"],borderInlineStartStyle:["borderLeftStyle"],borderInlineEndStyle:["borderRightStyle"],borderBlockColor:["borderTopColor","borderBottomColor"],borderBlockStartColor:["borderTopColor"],borderBlockEndColor:["borderBottomColor"],borderInlineColor:["borderLeftColor","borderRightColor"],borderInlineStartColor:["borderLeftColor"],borderInlineEndColor:["borderRightColor"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"]};function si(Rr){return{_skip_check_:!0,value:Rr}}var Si={visit:function(Mn){var pn={};return Object.keys(Mn).forEach(function(wn){var Kn=Mn[wn],Ei=ni[wn];if(Ei&&(typeof Kn=="number"||typeof Kn=="string")){var Ji=mn(Kn);Ei.length&&Ei.notSplit?Ei.forEach(function(Yi){pn[Yi]=si(Kn)}):Ei.length===1?pn[Ei[0]]=si(Kn):Ei.length===2?Ei.forEach(function(Yi,oa){var Ma;pn[Yi]=si((Ma=Ji[oa])!==null&&Ma!==void 0?Ma:Ji[0])}):Ei.length===4?Ei.forEach(function(Yi,oa){var Ma,k;pn[Yi]=si((Ma=(k=Ji[oa])!==null&&k!==void 0?k:Ji[oa-2])!==null&&Ma!==void 0?Ma:Ji[0])}):pn[wn]=Kn}else pn[wn]=Kn}),pn}},qi=null},42135:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return ze}});var v=m(1413),C=m(97685),l=m(4942),$=m(91),R=m(67294),z=m(94184),L=m.n(z),T=m(63017),O=m(71002),F=m(16397),ue=m(80334),Ae=m(44958);function re(Le,Re){(0,ue.ZP)(Le,"[@ant-design/icons] ".concat(Re))}function pe(Le){return(0,O.Z)(Le)==="object"&&typeof Le.name=="string"&&typeof Le.theme=="string"&&((0,O.Z)(Le.icon)==="object"||typeof Le.icon=="function")}function fe(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Le).reduce(function(Re,st){var vt=Le[st];switch(st){case"class":Re.className=vt,delete Re.class;break;default:Re[st]=vt}return Re},{})}function ke(Le,Re,st){return st?R.createElement(Le.tag,(0,v.Z)((0,v.Z)({key:Re},fe(Le.attrs)),st),(Le.children||[]).map(function(vt,Dt){return ke(vt,"".concat(Re,"-").concat(Le.tag,"-").concat(Dt))})):R.createElement(Le.tag,(0,v.Z)({key:Re},fe(Le.attrs)),(Le.children||[]).map(function(vt,Dt){return ke(vt,"".concat(Re,"-").concat(Le.tag,"-").concat(Dt))}))}function je(Le){return(0,F.R_)(Le)[0]}function bt(Le){return Le?Array.isArray(Le)?Le:[Le]:[]}var ut={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},wt=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,se=function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt,st=(0,R.useContext)(T.Z),vt=st.csp,Dt=st.prefixCls,ar=Re;Dt&&(ar=ar.replace(/anticon/g,Dt)),(0,R.useEffect)(function(){(0,Ae.hq)(ar,"@ant-design-icons",{prepend:!0,csp:vt})},[])},qe=["icon","className","onClick","style","primaryColor","secondaryColor"],me={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function _e(Le){var Re=Le.primaryColor,st=Le.secondaryColor;me.primaryColor=Re,me.secondaryColor=st||je(Re),me.calculated=!!st}function Te(){return(0,v.Z)({},me)}var ht=function(Re){var st=Re.icon,vt=Re.className,Dt=Re.onClick,ar=Re.style,$t=Re.primaryColor,ur=Re.secondaryColor,we=(0,$.Z)(Re,qe),At=me;if($t&&(At={primaryColor:$t,secondaryColor:ur||je($t)}),se(),re(pe(st),"icon should be icon definiton, but got ".concat(st)),!pe(st))return null;var nt=st;return nt&&typeof nt.icon=="function"&&(nt=(0,v.Z)((0,v.Z)({},nt),{},{icon:nt.icon(At.primaryColor,At.secondaryColor)})),ke(nt.icon,"svg-".concat(nt.name),(0,v.Z)({className:vt,onClick:Dt,style:ar,"data-icon":nt.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},we))};ht.displayName="IconReact",ht.getTwoToneColors=Te,ht.setTwoToneColors=_e;var We=ht;function Ne(Le){var Re=bt(Le),st=(0,C.Z)(Re,2),vt=st[0],Dt=st[1];return We.setTwoToneColors({primaryColor:vt,secondaryColor:Dt})}function he(){var Le=We.getTwoToneColors();return Le.calculated?[Le.primaryColor,Le.secondaryColor]:Le.primaryColor}var Ve=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Ne("#1890ff");var ie=R.forwardRef(function(Le,Re){var st,vt=Le.className,Dt=Le.icon,ar=Le.spin,$t=Le.rotate,ur=Le.tabIndex,we=Le.onClick,At=Le.twoToneColor,nt=(0,$.Z)(Le,Ve),Lt=R.useContext(T.Z),St=Lt.prefixCls,Ut=St===void 0?"anticon":St,lt=Lt.rootClassName,Et=L()(lt,Ut,(st={},(0,l.Z)(st,"".concat(Ut,"-").concat(Dt.name),!!Dt.name),(0,l.Z)(st,"".concat(Ut,"-spin"),!!ar||Dt.name==="loading"),st),vt),Zt=ur;Zt===void 0&&we&&(Zt=-1);var Be=$t?{msTransform:"rotate(".concat($t,"deg)"),transform:"rotate(".concat($t,"deg)")}:void 0,He=bt(At),ft=(0,C.Z)(He,2),Z=ft[0],J=ft[1];return R.createElement("span",(0,v.Z)((0,v.Z)({role:"img","aria-label":Dt.name},nt),{},{ref:Re,tabIndex:Zt,onClick:we,className:Et}),R.createElement(We,{icon:Dt,primaryColor:Z,secondaryColor:J,style:Be}))});ie.displayName="AntdIcon",ie.getTwoToneColor=he,ie.setTwoToneColor=Ne;var ze=ie},63017:function(Qe,te,m){"use strict";var v=m(67294),C=(0,v.createContext)({});te.Z=C},86581:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="CloseCircleFilled";var L=C.forwardRef(z)},12057:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="CloseOutlined";var L=C.forwardRef(z)},58093:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="CopyOutlined";var L=C.forwardRef(z)},55047:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="DownOutlined";var L=C.forwardRef(z)},38244:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="DownloadOutlined";var L=C.forwardRef(z)},16853:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="EllipsisOutlined";var L=C.forwardRef(z)},84273:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="LoadingOutlined";var L=C.forwardRef(z)},99290:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="PictureOutlined";var L=C.forwardRef(z)},65793:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(1413),C=m(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},$=l,R=m(42135),z=function(O,F){return C.createElement(R.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:F,icon:$}))};z.displayName="RightOutlined";var L=C.forwardRef(z)},40110:function(Qe,te,m){"use strict";var v=m(1413),C=m(67294),l=m(45191),$=m(42135),R=function(L,T){return C.createElement($.Z,(0,v.Z)((0,v.Z)({},L),{},{ref:T,icon:l.Z}))};R.displayName="SearchOutlined",te.Z=C.forwardRef(R)},46343:function(Qe,te,m){"use strict";m.d(te,{S$:function(){return Et},bf:function(){return Zt},ni:function(){return ar},oI:function(){return Ut},sX:function(){return lt}});var v=m(34155);function C(Be,He,ft,Z){function J(K){return K instanceof ft?K:new ft(function(B){B(K)})}return new(ft||(ft=Promise))(function(K,B){function j(De){try{W(Z.next(De))}catch(ot){B(ot)}}function ee(De){try{W(Z.throw(De))}catch(ot){B(ot)}}function W(De){De.done?K(De.value):J(De.value).then(j,ee)}W((Z=Z.apply(Be,He||[])).next())})}function l(Be,He){var ft={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},Z,J,K,B;return B={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function j(W){return function(De){return ee([W,De])}}function ee(W){if(Z)throw new TypeError("Generator is already executing.");for(;ft;)try{if(Z=1,J&&(K=W[0]&2?J.return:W[0]?J.throw||((K=J.return)&&K.call(J),0):J.next)&&!(K=K.call(J,W[1])).done)return K;switch(J=0,K&&(W=[W[0]&2,K.value]),W[0]){case 0:case 1:K=W;break;case 4:return ft.label++,{value:W[1],done:!1};case 5:ft.label++,J=W[1],W=[0];continue;case 7:W=ft.ops.pop(),ft.trys.pop();continue;default:if(K=ft.trys,!(K=K.length>0&&K[K.length-1])&&(W[0]===6||W[0]===2)){ft=0;continue}if(W[0]===3&&(!K||W[1]>K[0]&&W[1]<K[3])){ft.label=W[1];break}if(W[0]===6&&ft.label<K[1]){ft.label=K[1],K=W;break}if(K&&ft.label<K[2]){ft.label=K[2],ft.ops.push(W);break}K[2]&&ft.ops.pop(),ft.trys.pop();continue}W=He.call(Be,ft)}catch(De){W=[6,De],J=0}finally{Z=K=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}}function $(Be,He){var ft=typeof Symbol=="function"&&Be[Symbol.iterator];if(!ft)return Be;var Z=ft.call(Be),J,K=[],B;try{for(;(He===void 0||He-- >0)&&!(J=Z.next()).done;)K.push(J.value)}catch(j){B={error:j}}finally{try{J&&!J.done&&(ft=Z.return)&&ft.call(Z)}finally{if(B)throw B.error}}return K}function R(Be,He,ft){if(ft||arguments.length===2)for(var Z=0,J=He.length,K;Z<J;Z++)(K||!(Z in He))&&(K||(K=Array.prototype.slice.call(He,0,Z)),K[Z]=He[Z]);return Be.concat(K||Array.prototype.slice.call(He))}function z(Be){return Be&&Be.__esModule&&Object.prototype.hasOwnProperty.call(Be,"default")?Be.default:Be}var L={exports:{}},T={exports:{}},O={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=ft;function ft(Z){return Z&&typeof Z.length=="number"&&Z.length>=0&&Z.length%1===0}Be.exports=He.default})(O,O.exports);var F={},ue={exports:{}},Ae={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=function(ft){return function(){for(var Z=[],J=arguments.length;J--;)Z[J]=arguments[J];var K=Z.pop();return ft.call(this,Z,K)}},Be.exports=He.default})(Ae,Ae.exports);var re={};Object.defineProperty(re,"__esModule",{value:!0}),re.fallback=je,re.wrap=bt;var pe=re.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,fe=re.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,ke=re.hasNextTick=typeof v=="object"&&typeof v.nextTick=="function";function je(Be){setTimeout(Be,0)}function bt(Be){return function(He){for(var ft=[],Z=arguments.length-1;Z-- >0;)ft[Z]=arguments[Z+1];return Be(function(){return He.apply(void 0,ft)})}}var ut;pe?ut=queueMicrotask:fe?ut=setImmediate:ke?ut=v.nextTick:ut=je,re.default=bt(ut),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=ee;var ft=Ae.exports,Z=j(ft),J=re,K=j(J),B=F;function j(ot){return ot&&ot.__esModule?ot:{default:ot}}function ee(ot){return(0,B.isAsync)(ot)?function(){for(var Wt=[],Ct=arguments.length;Ct--;)Wt[Ct]=arguments[Ct];var Qt=Wt.pop(),ir=ot.apply(this,Wt);return W(ir,Qt)}:(0,Z.default)(function(Wt,Ct){var Qt;try{Qt=ot.apply(this,Wt)}catch(ir){return Ct(ir)}if(Qt&&typeof Qt.then=="function")return W(Qt,Ct);Ct(null,Qt)})}function W(ot,Wt){return ot.then(function(Ct){De(Wt,null,Ct)},function(Ct){De(Wt,Ct&&Ct.message?Ct:new Error(Ct))})}function De(ot,Wt,Ct){try{ot(Wt,Ct)}catch(Qt){(0,K.default)(function(ir){throw ir},Qt)}}Be.exports=He.default}(ue,ue.exports),Object.defineProperty(F,"__esModule",{value:!0}),F.isAsyncIterable=F.isAsyncGenerator=F.isAsync=void 0;var wt=ue.exports,se=qe(wt);function qe(Be){return Be&&Be.__esModule?Be:{default:Be}}function me(Be){return Be[Symbol.toStringTag]==="AsyncFunction"}function _e(Be){return Be[Symbol.toStringTag]==="AsyncGenerator"}function Te(Be){return typeof Be[Symbol.asyncIterator]=="function"}function ht(Be){if(typeof Be!="function")throw new Error("expected a function");return me(Be)?(0,se.default)(Be):Be}F.default=ht,F.isAsync=me,F.isAsyncGenerator=_e,F.isAsyncIterable=Te;var We={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=ft;function ft(Z,J){if(J===void 0&&(J=Z.length),!J)throw new Error("arity is undefined");function K(){for(var B=this,j=[],ee=arguments.length;ee--;)j[ee]=arguments[ee];return typeof j[J-1]=="function"?Z.apply(this,j):new Promise(function(W,De){j[J-1]=function(ot){for(var Wt=[],Ct=arguments.length-1;Ct-- >0;)Wt[Ct]=arguments[Ct+1];if(ot)return De(ot);W(Wt.length>1?Wt:Wt[0])},Z.apply(B,j)})}return K}Be.exports=He.default})(We,We.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft=O.exports,Z=ee(ft),J=F,K=ee(J),B=We.exports,j=ee(B);function ee(W){return W&&W.__esModule?W:{default:W}}He.default=(0,j.default)(function(W,De,ot){var Wt=(0,Z.default)(De)?[]:{};W(De,function(Ct,Qt,ir){(0,K.default)(Ct)(function(Er){for(var Qr,Mt=[],br=arguments.length-1;br-- >0;)Mt[br]=arguments[br+1];Mt.length<2&&(Qr=Mt,Mt=Qr[0]),Wt[Qt]=Mt,ir(Er)})},function(Ct){return ot(Ct,Wt)})},3),Be.exports=He.default}(T,T.exports);var Ne={exports:{}},he={exports:{}},Ve={exports:{}},ie={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=ft;function ft(Z){function J(){for(var K=[],B=arguments.length;B--;)K[B]=arguments[B];if(Z!==null){var j=Z;Z=null,j.apply(this,K)}}return Object.assign(J,Z),J}Be.exports=He.default})(ie,ie.exports);var ze={exports:{}},Le={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=function(ft){return ft[Symbol.iterator]&&ft[Symbol.iterator]()},Be.exports=He.default})(Le,Le.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=De;var ft=O.exports,Z=B(ft),J=Le.exports,K=B(J);function B(ot){return ot&&ot.__esModule?ot:{default:ot}}function j(ot){var Wt=-1,Ct=ot.length;return function(){return++Wt<Ct?{value:ot[Wt],key:Wt}:null}}function ee(ot){var Wt=-1;return function(){var Qt=ot.next();return Qt.done?null:(Wt++,{value:Qt.value,key:Wt})}}function W(ot){var Wt=ot?Object.keys(ot):[],Ct=-1,Qt=Wt.length;return function ir(){var Er=Wt[++Ct];return Er==="__proto__"?ir():Ct<Qt?{value:ot[Er],key:Er}:null}}function De(ot){if((0,Z.default)(ot))return j(ot);var Wt=(0,K.default)(ot);return Wt?ee(Wt):W(ot)}Be.exports=He.default}(ze,ze.exports);var Re={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=ft;function ft(Z){return function(){for(var J=[],K=arguments.length;K--;)J[K]=arguments[K];if(Z===null)throw new Error("Callback was already called.");var B=Z;Z=null,B.apply(this,J)}}Be.exports=He.default})(Re,Re.exports);var st={exports:{}},vt={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft={};He.default=ft,Be.exports=He.default})(vt,vt.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=K;var ft=vt.exports,Z=J(ft);function J(B){return B&&B.__esModule?B:{default:B}}function K(B,j,ee,W){var De=!1,ot=!1,Wt=!1,Ct=0,Qt=0;function ir(){Ct>=j||Wt||De||(Wt=!0,B.next().then(function(Mt){var br=Mt.value,Nt=Mt.done;if(!(ot||De)){if(Wt=!1,Nt){De=!0,Ct<=0&&W(null);return}Ct++,ee(br,Qt,Er),Qt++,ir()}}).catch(Qr))}function Er(Mt,br){if(Ct-=1,!ot){if(Mt)return Qr(Mt);if(Mt===!1){De=!0,ot=!0;return}if(br===Z.default||De&&Ct<=0)return De=!0,W(null);ir()}}function Qr(Mt){ot||(Wt=!1,De=!0,W(Mt))}ir()}Be.exports=He.default}(st,st.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft=ie.exports,Z=Ct(ft),J=ze.exports,K=Ct(J),B=Re.exports,j=Ct(B),ee=F,W=st.exports,De=Ct(W),ot=vt.exports,Wt=Ct(ot);function Ct(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}He.default=function(Qt){return function(ir,Er,Qr){if(Qr=(0,Z.default)(Qr),Qt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!ir)return Qr(null);if((0,ee.isAsyncGenerator)(ir))return(0,De.default)(ir,Qt,Er,Qr);if((0,ee.isAsyncIterable)(ir))return(0,De.default)(ir[Symbol.asyncIterator](),Qt,Er,Qr);var Mt=(0,K.default)(ir),br=!1,Nt=!1,Pr=0,_r=!1;function kr(mr,Or){if(!Nt)if(Pr-=1,mr)br=!0,Qr(mr);else if(mr===!1)br=!0,Nt=!0;else{if(Or===Wt.default||br&&Pr<=0)return br=!0,Qr(null);_r||zt()}}function zt(){for(_r=!0;Pr<Qt&&!br;){var mr=Mt();if(mr===null){br=!0,Pr<=0&&Qr(null);return}Pr+=1,Er(mr.value,mr.key,(0,j.default)(kr))}_r=!1}zt()}},Be.exports=He.default}(Ve,Ve.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft=Ve.exports,Z=ee(ft),J=F,K=ee(J),B=We.exports,j=ee(B);function ee(De){return De&&De.__esModule?De:{default:De}}function W(De,ot,Wt,Ct){return(0,Z.default)(ot)(De,(0,K.default)(Wt),Ct)}He.default=(0,j.default)(W,4),Be.exports=He.default}(he,he.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft=he.exports,Z=B(ft),J=We.exports,K=B(J);function B(ee){return ee&&ee.__esModule?ee:{default:ee}}function j(ee,W,De){return(0,Z.default)(ee,1,W,De)}He.default=(0,K.default)(j,3),Be.exports=He.default}(Ne,Ne.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=j;var ft=T.exports,Z=B(ft),J=Ne.exports,K=B(J);function B(ee){return ee&&ee.__esModule?ee:{default:ee}}function j(ee,W){return(0,Z.default)(K.default,ee,W)}Be.exports=He.default}(L,L.exports);var Dt=z(L.exports),ar=function(){function Be(){this.args=[],this.tasks=[]}return Be.prototype.call=function(){for(var He=arguments,ft=[],Z=0;Z<arguments.length;Z++)ft[Z]=He[Z];return this.args=ft,Dt(this.tasks)},Be.prototype.tap=function(He,ft){var Z=this;this.tasks.push(function(J){ft.apply(void 0,R([],$(Z.args),!1)),J(null,He)})},Be}(),$t={exports:{}},ur={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft=O.exports,Z=Er(ft),J=vt.exports,K=Er(J),B=he.exports,j=Er(B),ee=ie.exports,W=Er(ee),De=Re.exports,ot=Er(De),Wt=F,Ct=Er(Wt),Qt=We.exports,ir=Er(Qt);function Er(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}function Qr(Nt,Pr,_r){_r=(0,W.default)(_r);var kr=0,zt=0,mr=Nt.length,Or=!1;mr===0&&_r(null);function X(Nr,Xe){Nr===!1&&(Or=!0),Or!==!0&&(Nr?_r(Nr):(++zt===mr||Xe===K.default)&&_r(null))}for(;kr<mr;kr++)Pr(Nt[kr],kr,(0,ot.default)(X))}function Mt(Nt,Pr,_r){return(0,j.default)(Nt,1/0,Pr,_r)}function br(Nt,Pr,_r){var kr=(0,Z.default)(Nt)?Qr:Mt;return kr(Nt,(0,Ct.default)(Pr),_r)}He.default=(0,ir.default)(br,3),Be.exports=He.default})(ur,ur.exports),function(Be,He){Object.defineProperty(He,"__esModule",{value:!0}),He.default=j;var ft=ur.exports,Z=B(ft),J=T.exports,K=B(J);function B(ee){return ee&&ee.__esModule?ee:{default:ee}}function j(ee,W){return(0,K.default)(Z.default,ee,W)}Be.exports=He.default}($t,$t.exports);var we=z($t.exports),At=function(){function Be(){this.tasks=[]}return Be.prototype.promise=function(){return we(this.tasks)},Be.prototype.tapPromise=function(He,ft){var Z=this;this.tasks.push(function(J){return C(Z,void 0,void 0,function(){return l(this,function(K){switch(K.label){case 0:return[4,ft()];case 1:return K.sent(),J(null,He),[2]}})})})},Be}(),nt={exports:{}};(function(Be,He){Object.defineProperty(He,"__esModule",{value:!0});var ft=ie.exports,Z=De(ft),J=Re.exports,K=De(J),B=F,j=De(B),ee=We.exports,W=De(ee);function De(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}function ot(Wt,Ct){if(Ct=(0,Z.default)(Ct),!Array.isArray(Wt))return Ct(new Error("First argument to waterfall must be an array of functions"));if(!Wt.length)return Ct();var Qt=0;function ir(Qr){var Mt=(0,j.default)(Wt[Qt++]);Mt.apply(void 0,Qr.concat([(0,K.default)(Er)]))}function Er(Qr){for(var Mt=[],br=arguments.length-1;br-- >0;)Mt[br]=arguments[br+1];if(Qr!==!1){if(Qr||Qt===Wt.length)return Ct.apply(void 0,[Qr].concat(Mt));ir(Mt)}}ir([])}He.default=(0,W.default)(ot),Be.exports=He.default})(nt,nt.exports);var Lt=z(nt.exports),St=function(){function Be(){this.tasks=[]}return Be.prototype.call=function(){return Lt(this.tasks)},Be.prototype.tap=function(He,ft){this.tasks.length===0?this.tasks.push(function(Z){var J=ft();Z(J?null:!1,J)}):this.tasks.push(function(Z,J){var K=ft.apply(void 0,R([],$(Z),!1));J(K?null:!1,He)})},Be}(),Ut=function(){function Be(){this.tasks=[]}return Be.prototype.call=function(){return Dt(this.tasks)},Be.prototype.tap=function(He,ft){this.tasks.push(function(Z){var J=ft();Z(J,He)})},Be}(),lt=function(){function Be(){this.args=[],this.tasks=[]}return Be.prototype.promise=function(){for(var He=arguments,ft=[],Z=0;Z<arguments.length;Z++)ft[Z]=He[Z];return this.args=ft,Dt(this.tasks)},Be.prototype.tapPromise=function(He,ft){var Z=this;this.tasks.push(function(J){return C(Z,void 0,void 0,function(){return l(this,function(K){switch(K.label){case 0:return[4,ft.apply(void 0,R([],$(this.args),!1))];case 1:return K.sent(),J(null,He),[2]}})})})},Be}(),Et=function(){function Be(){this.args=[],this.tasks=[]}return Be.prototype.promise=function(){for(var He=arguments,ft=[],Z=0;Z<arguments.length;Z++)ft[Z]=He[Z];return this.args=ft,Dt(this.tasks)},Be.prototype.tapPromise=function(He,ft){var Z=this;this.tasks.push(function(J){return C(Z,void 0,void 0,function(){var K;return l(this,function(B){switch(B.label){case 0:return[4,ft.apply(void 0,R([],$(this.args),!1))];case 1:return K=B.sent(),J(K,He),[2]}})})})},Be}(),Zt=function(){function Be(){this.tasks=[]}return Be.prototype.promise=function(){return Lt(this.tasks)},Be.prototype.tapPromise=function(He,ft){this.tasks.length===0?this.tasks.push(function(Z){ft().then(function(J){Z(null,J)})}):this.tasks.push(function(Z,J){ft(Z).then(function(K){J(null,K)})})},Be}()},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(Qe){try{let O=function(){R||(R=!0,l())},F=function(){try{$.documentElement.doScroll("left")}catch(ue){return void setTimeout(F,50)}O()};var L=O,T=F,m=(m=document.getElementsByTagName("script"))[m.length-1],te=m.getAttribute("data-injectcss"),m=m.getAttribute("data-disable-injectsvg");if(!m){var v,C,l,$,R,z=function(Ae,re){re.parentNode.insertBefore(Ae,re)};if(te&&!Qe.__iconfont__svg__cssinject__){Qe.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(ue){console&&console.log(ue)}}v=function(){var Ae,re=document.createElement("div");re.innerHTML=Qe._iconfont_svg_string_3580659,(re=re.getElementsByTagName("svg")[0])&&(re.setAttribute("aria-hidden","true"),re.style.position="absolute",re.style.width=0,re.style.height=0,re.style.overflow="hidden",re=re,(Ae=document.body).firstChild?z(re,Ae.firstChild):Ae.appendChild(re))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(v,0):(C=function(){document.removeEventListener("DOMContentLoaded",C,!1),v()},document.addEventListener("DOMContentLoaded",C,!1)):document.attachEvent&&(l=v,$=Qe.document,R=!1,F(),$.onreadystatechange=function(){$.readyState=="complete"&&($.onreadystatechange=null,O())})}}catch(O){}}(window)},54095:function(Qe,te,m){"use strict";m.d(te,{GC:function(){return mh},mp:function(){return Yl},h0:function(){return qc},lv:function(){return Du},lo:function(){return On},kw:function(){return ji},Or:function(){return yu},KD:function(){return sh},sm:function(){return Da},I9:function(){return If},GR:function(){return Mf},d:function(){return Er},n3:function(){return vf},vY:function(){return vh},P7:function(){return Rf},ee:function(){return Nf},vK:function(){return z},nC:function(){return Jo},e7:function(){return _s},Hp:function(){return ws},gl:function(){return za},yT:function(){return Ns},yG:function(){return cs},wL:function(){return wh}});var v=m(28660),C=m(26729),l=m.n(C),$=m(86700),R=m(84879),z={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},L=m(1413),T=m(15671),O=m(43144),F=m(97326),ue=m(60136),Ae=m(82963),re=m(61120),pe=m(4942),fe=m(11265),ke=m(31745),je=m.n(ke);function bt(oe,Br){var xt=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!xt){if(Array.isArray(oe)||(xt=ut(oe))||Br&&oe&&typeof oe.length=="number"){xt&&(oe=xt);var mt=0,Ht=function(){};return{s:Ht,n:function(){return mt>=oe.length?{done:!0}:{done:!1,value:oe[mt++]}},e:function(zn){throw zn},f:Ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var or=!0,en=!1,_n;return{s:function(){xt=xt.call(oe)},n:function(){var zn=xt.next();return or=zn.done,zn},e:function(zn){en=!0,_n=zn},f:function(){try{!or&&xt.return!=null&&xt.return()}finally{if(en)throw _n}}}}function ut(oe,Br){if(oe){if(typeof oe=="string")return wt(oe,Br);var xt=Object.prototype.toString.call(oe).slice(8,-1);if(xt==="Object"&&oe.constructor&&(xt=oe.constructor.name),xt==="Map"||xt==="Set")return Array.from(oe);if(xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt))return wt(oe,Br)}}function wt(oe,Br){(Br==null||Br>oe.length)&&(Br=oe.length);for(var xt=0,mt=new Array(Br);xt<Br;xt++)mt[xt]=oe[xt];return mt}var se=30;function qe(oe){var Br=oe.characterSet,xt=oe.getFontWidth,mt=oe.fontHeight,Ht=oe.buffer,or=oe.maxCanvasWidth,en=oe.mapping,_n=en===void 0?{}:en,Tn=oe.xOffset,zn=Tn===void 0?0:Tn,wi=oe.yOffset,Xi=wi===void 0?0:wi,ba=0,mo=zn;Array.from(Br).forEach(function(Ds,Ts){if(!_n[Ds]){var lu=xt(Ds,Ts);mo+se>or&&(mo=0,ba++),_n[Ds]={x:mo,y:Xi+ba*se,width:se,height:se,advance:lu},mo+=se}});var Ja=mt+Ht*2;return{mapping:_n,xOffset:mo,yOffset:Xi+ba*Ja,canvasHeight:Te(Xi+(ba+1)*Ja)}}function me(oe,Br,xt){var mt=0,Ht=0,or=0,en=[],_n={},Tn=bt(oe),zn;try{for(Tn.s();!(zn=Tn.n()).done;){var wi=zn.value;if(!_n[wi.id]){var Xi=wi.size;mt+Xi+Br>xt&&(_e(_n,en,Ht),mt=0,Ht=or+Ht+Br,or=0,en=[]),en.push({icon:wi,xOffset:mt}),mt=mt+Xi+Br,or=Math.max(or,Xi)}}}catch(mo){Tn.e(mo)}finally{Tn.f()}en.length>0&&_e(_n,en,Ht);var ba=Te(or+Ht+Br);return{mapping:_n,canvasHeight:ba}}function _e(oe,Br,xt){var mt=bt(Br),Ht;try{for(mt.s();!(Ht=mt.n()).done;){var or=Ht.value,en=or.icon,_n=or.xOffset;oe[en.id]=(0,L.Z)((0,L.Z)({},en),{},{x:_n,y:xt,image:en.image,width:en.width,height:en.height})}}catch(Tn){mt.e(Tn)}finally{mt.f()}}function Te(oe){return Math.pow(2,Math.ceil(Math.log2(oe)))}var ht,We;function Ne(oe,Br){var xt=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!xt){if(Array.isArray(oe)||(xt=he(oe))||Br&&oe&&typeof oe.length=="number"){xt&&(oe=xt);var mt=0,Ht=function(){};return{s:Ht,n:function(){return mt>=oe.length?{done:!0}:{done:!1,value:oe[mt++]}},e:function(zn){throw zn},f:Ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var or=!0,en=!1,_n;return{s:function(){xt=xt.call(oe)},n:function(){var zn=xt.next();return or=zn.done,zn},e:function(zn){en=!0,_n=zn},f:function(){try{!or&&xt.return!=null&&xt.return()}finally{if(en)throw _n}}}}function he(oe,Br){if(oe){if(typeof oe=="string")return Ve(oe,Br);var xt=Object.prototype.toString.call(oe).slice(8,-1);if(xt==="Object"&&oe.constructor&&(xt=oe.constructor.name),xt==="Map"||xt==="Set")return Array.from(oe);if(xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt))return Ve(oe,Br)}}function Ve(oe,Br){(Br==null||Br>oe.length)&&(Br=oe.length);for(var xt=0,mt=new Array(Br);xt<Br;xt++)mt[xt]=oe[xt];return mt}function ie(oe){var Br=ze();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function ze(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Le=St(),Re="sans-serif",st="normal",vt=24,Dt=3,ar=.25,$t=8,ur=1024,we=1,At=1,nt=3,Lt=null;function St(){for(var oe=[],Br=32;Br<128;Br++)oe.push(String.fromCharCode(Br));return oe}function Ut(oe,Br,xt,mt){oe.font="".concat(mt," ").concat(xt,"px ").concat(Br),oe.fillStyle="black",oe.textBaseline="middle"}function lt(oe,Br){for(var xt=0;xt<oe.length;xt++)Br.data[4*xt+3]=oe[xt]}var Et=(ht=(0,$.b2)(),ht(We=function(oe){(0,ue.Z)(xt,oe);var Br=ie(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,pe.Z)((0,F.Z)(mt),"fontAtlas",void 0),(0,pe.Z)((0,F.Z)(mt),"iconFontMap",void 0),(0,pe.Z)((0,F.Z)(mt),"iconFontGlyphs",{}),(0,pe.Z)((0,F.Z)(mt),"fontOptions",void 0),(0,pe.Z)((0,F.Z)(mt),"key",void 0),(0,pe.Z)((0,F.Z)(mt),"cache",new fe.z6(nt)),mt}return(0,O.Z)(xt,[{key:"scale",get:function(){return At}},{key:"canvas",get:function(){var Ht=this.cache.get(this.key);return Ht&&Ht.data}},{key:"mapping",get:function(){var Ht=this.cache.get(this.key);return Ht&&Ht.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Re,fontWeight:st,characterSet:Le,fontSize:vt,buffer:Dt,sdf:!0,cutoff:ar,radius:$t,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(Ht){var or=this;Ht.forEach(function(en){or.iconFontGlyphs[en.name]=en.unicode})}},{key:"addIconFont",value:function(Ht,or){this.iconFontMap.set(Ht,or)}},{key:"getIconFontKey",value:function(Ht){return this.iconFontMap.get(Ht)||Ht}},{key:"getGlyph",value:function(Ht){return this.iconFontGlyphs[Ht]?String.fromCharCode(parseInt(this.iconFontGlyphs[Ht],16)):""}},{key:"setFontOptions",value:function(Ht){this.fontOptions=(0,L.Z)((0,L.Z)({},this.fontOptions),Ht),this.key=this.getKey();var or=this.getNewChars(this.key,this.fontOptions.characterSet),en=this.cache.get(this.key);if(!(en&&or.length===0)){var _n=this.generateFontAtlas(this.key,or,en);this.fontAtlas=_n,this.cache.set(this.key,_n)}}},{key:"addFontFace",value:function(Ht,or){var en=this,_n=document.createElement("style");_n.type="text/css",_n.innerText=`
        @font-face{
            font-family: '`.concat(Ht,`';
            src: url('`).concat(or,`') format('woff2'),
            url('`).concat(or,`') format('woff'),
            url('`).concat(or,`') format('truetype');
        }`),_n.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(Ht),"L7text"),document.fonts.ready.then(function(){en.emit("fontloaded",{fontFamily:Ht})})}catch(Tn){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(Tn)}},document.getElementsByTagName("head")[0].appendChild(_n)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(Ht,or,en){var _n=this.fontOptions,Tn=_n.fontFamily,zn=_n.fontWeight,wi=_n.fontSize,Xi=_n.buffer,ba=_n.sdf,mo=_n.radius,Ja=_n.cutoff,Ds=_n.iconfont,Ts=en&&en.data;Ts||(Ts=fe.vO.document.createElement("canvas"),Ts.width=ur);var lu=Ts.getContext("2d",{willReadFrequently:!0});Ut(lu,Tn,wi,zn);var Iu=qe((0,L.Z)({getFontWidth:function(yh){return lu.measureText(yh).width},fontHeight:wi*At,buffer:Xi,characterSet:or,maxCanvasWidth:ur},en&&{mapping:en.mapping,xOffset:en.xOffset,yOffset:en.yOffset})),_u=Iu.mapping,Mc=Iu.canvasHeight,tu=Iu.xOffset,Fl=Iu.yOffset,Ys=lu.getImageData(0,0,Ts.width,Ts.height);if(Ts.height=Mc,lu.putImageData(Ys,0,0),Ut(lu,Tn,wi,zn),ba){var ku=new(je())(wi,Xi,mo,Ja,Tn,zn),Bu=lu.getImageData(0,0,ku.size,ku.size),Gl=Ne(or),ru;try{for(Gl.s();!(ru=Gl.n()).done;){var pl=ru.value;if(Ds){var ef=String.fromCharCode(parseInt(pl.replace("&#x","").replace(";",""),16)),Bh=ku.draw(ef);lt(Bh,Bu)}else lt(ku.draw(pl),Bu);lu.putImageData(Bu,_u[pl].x,_u[pl].y)}}catch(gh){Gl.e(gh)}finally{Gl.f()}}else{var hc=Ne(or),uh;try{for(hc.s();!(uh=hc.n()).done;){var Kf=uh.value;lu.fillText(Kf,_u[Kf].x,_u[Kf].y+wi*we)}}catch(gh){hc.e(gh)}finally{hc.f()}}return{xOffset:tu,yOffset:Fl,mapping:_u,data:Ts,width:Ts.width,height:Ts.height}}},{key:"getKey",value:function(){var Ht=this.fontOptions,or=Ht.fontFamily,en=Ht.fontWeight;return"".concat(or,"_").concat(en)}},{key:"getNewChars",value:function(Ht,or){var en=this.cache.get(Ht);if(!en)return or;var _n=[],Tn=en.mapping,zn=new Set(Object.keys(Tn)),wi=new Set(or);return wi.forEach(function(Xi){zn.has(Xi)||_n.push(Xi)}),_n}}]),xt}(C.EventEmitter))||We),Zt=m(15861),Be=m(64687),He=m.n(Be),ft,Z;function J(oe){var Br=K();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function K(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var B=3,j=1024,ee=64,W=(ft=(0,$.b2)(),ft(Z=function(oe){(0,ue.Z)(xt,oe);var Br=J(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,pe.Z)((0,F.Z)(mt),"canvasHeight",128),(0,pe.Z)((0,F.Z)(mt),"texture",void 0),(0,pe.Z)((0,F.Z)(mt),"canvas",void 0),(0,pe.Z)((0,F.Z)(mt),"iconData",void 0),(0,pe.Z)((0,F.Z)(mt),"iconMap",void 0),(0,pe.Z)((0,F.Z)(mt),"ctx",void 0),(0,pe.Z)((0,F.Z)(mt),"loadingImageCount",0),mt}return(0,O.Z)(xt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=fe.vO.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var mt=(0,Zt.Z)(He().mark(function or(en,_n){var Tn,zn;return He().wrap(function(Xi){for(;;)switch(Xi.prev=Xi.next){case 0:return Tn=new Image,this.loadingImageCount++,this.hasImage(en)?console.warn("Image Id already exists"):this.iconData.push({id:en,size:ee}),this.updateIconMap(),Xi.next=6,this.loadImage(_n);case 6:Tn=Xi.sent,zn=this.iconData.find(function(ba){return ba.id===en}),zn&&(zn.image=Tn,zn.width=Tn.width,zn.height=Tn.height),this.update();case 10:case"end":return Xi.stop()}},or,this)}));function Ht(or,en){return mt.apply(this,arguments)}return Ht}()},{key:"addImageMini",value:function(Ht,or,en){var _n=this,Tn=en.getSceneConfig().canvas,zn=Tn.createImage();if(this.loadingImageCount++,this.hasImage(Ht))throw new Error("Image Id already exists");this.iconData.push({id:Ht,size:ee}),this.updateIconMap(),this.loadImageMini(or,Tn).then(function(wi){zn=wi;var Xi=_n.iconData.find(function(ba){return ba.id===Ht});Xi&&(Xi.image=zn,Xi.width=zn.width,Xi.height=zn.height),_n.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(Ht){return this.iconMap.hasOwnProperty(Ht)}},{key:"removeImage",value:function(Ht){this.hasImage(Ht)&&(this.iconData=this.iconData.filter(function(or){return or.id!==Ht}),delete this.iconMap[Ht],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(Ht){return new Promise(function(or,en){if(Ht instanceof HTMLImageElement){or(Ht);return}var _n=new Image;_n.crossOrigin="anonymous",_n.onload=function(){or(_n)},_n.onerror=function(){en(new Error("Could not load image at "+Ht))},_n.src=Ht instanceof File?URL.createObjectURL(Ht):Ht})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var Ht=this;this.canvas.width=j,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(or){var en=Ht.iconMap[or],_n=en.x,Tn=en.y,zn=en.image,wi=en.width,Xi=wi===void 0?64:wi,ba=en.height,mo=ba===void 0?64:ba,Ja=Math.max(Xi,mo),Ds=Ja/ee,Ts=mo/Ds,lu=Xi/Ds;zn&&Ht.ctx.drawImage(zn,_n+(ee-lu)/2,Tn+(ee-Ts)/2,lu,Ts)})}},{key:"updateIconMap",value:function(){var Ht=me(this.iconData,B,j),or=Ht.mapping,en=Ht.canvasHeight;this.iconMap=or,this.canvasHeight=en}},{key:"loadImageMini",value:function(Ht,or){return new Promise(function(en,_n){var Tn=or.createImage();Tn.crossOrigin="anonymous",Tn.onload=function(){en(Tn)},Tn.onerror=function(){_n(new Error("Could not load image at "+Ht))},Tn.src=Ht})}}]),xt}(C.EventEmitter))||Z),De=m(97685),ot=m(85975),Wt,Ct,Qt=(Wt=(0,$.b2)(),Wt(Ct=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"viewport",void 0),(0,pe.Z)(this,"overridedViewProjectionMatrix",void 0),(0,pe.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,pe.Z)(this,"jitteredProjectionMatrix",void 0),(0,pe.Z)(this,"viewMatrixInverse",void 0),(0,pe.Z)(this,"cameraPosition",void 0)}return(0,O.Z)(oe,[{key:"init",value:function(){}},{key:"update",value:function(xt){this.viewport=xt,this.viewMatrixInverse=ot.create(),ot.invert(this.viewMatrixInverse,xt.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var xt=this.viewport.getCenter(),mt=(0,De.Z)(xt,2),Ht=mt[0],or=mt[1];return[Ht,or]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(xt,mt){return this.viewport.projectFlat(xt,mt)}},{key:"setViewProjectionMatrix",value:function(xt){this.overridedViewProjectionMatrix=xt}},{key:"jitterProjectionMatrix",value:function(xt,mt){var Ht=ot.fromTranslation(ot.create(),[xt,mt,0]);this.jitteredProjectionMatrix=ot.multiply(ot.create(),Ht,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=ot.multiply(ot.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),oe}())||Ct),ir=m(74902),Er;(function(oe){oe.TOPRIGHT="topright",oe.TOPLEFT="topleft",oe.BOTTOMRIGHT="bottomright",oe.BOTTOMLEFT="bottomleft",oe.TOPCENTER="topcenter",oe.BOTTOMCENTER="bottomcenter",oe.LEFTCENTER="leftcenter",oe.RIGHTCENTER="rightcenter",oe.LEFTTOP="lefttop",oe.RIGHTTOP="righttop",oe.LEFTBOTTOM="leftbottom",oe.RIGHTBOTTOM="rightbottom"})(Er||(Er={}));var Qr,Mt;function br(oe,Br){var xt=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!xt){if(Array.isArray(oe)||(xt=Nt(oe))||Br&&oe&&typeof oe.length=="number"){xt&&(oe=xt);var mt=0,Ht=function(){};return{s:Ht,n:function(){return mt>=oe.length?{done:!0}:{done:!1,value:oe[mt++]}},e:function(zn){throw zn},f:Ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var or=!0,en=!1,_n;return{s:function(){xt=xt.call(oe)},n:function(){var zn=xt.next();return or=zn.done,zn},e:function(zn){en=!0,_n=zn},f:function(){try{!or&&xt.return!=null&&xt.return()}finally{if(en)throw _n}}}}function Nt(oe,Br){if(oe){if(typeof oe=="string")return Pr(oe,Br);var xt=Object.prototype.toString.call(oe).slice(8,-1);if(xt==="Object"&&oe.constructor&&(xt=oe.constructor.name),xt==="Map"||xt==="Set")return Array.from(oe);if(xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt))return Pr(oe,Br)}}function Pr(oe,Br){(Br==null||Br>oe.length)&&(Br=oe.length);for(var xt=0,mt=new Array(Br);xt<Br;xt++)mt[xt]=oe[xt];return mt}var _r={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},kr=(Qr=(0,$.b2)(),Qr(Mt=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"container",void 0),(0,pe.Z)(this,"controlCorners",void 0),(0,pe.Z)(this,"controlContainer",void 0),(0,pe.Z)(this,"scene",void 0),(0,pe.Z)(this,"mapsService",void 0),(0,pe.Z)(this,"controls",[]),(0,pe.Z)(this,"unAddControls",[])}return(0,O.Z)(oe,[{key:"init",value:function(xt,mt){this.container=xt.container,this.scene=mt,this.mapsService=mt.get(z.IMapService),this.initControlPos()}},{key:"addControl",value:function(xt,mt){var Ht=mt.get(z.IMapService);Ht.map?(xt.addTo(this.scene),this.controls.push(xt)):this.unAddControls.push(xt)}},{key:"getControlByName",value:function(xt){return this.controls.find(function(mt){return mt.controlOption.name===xt})}},{key:"removeControl",value:function(xt){var mt=this.controls.indexOf(xt);return mt>-1&&this.controls.splice(mt,1),xt.remove(),this}},{key:"addControls",value:function(){var xt=this;this.unAddControls.forEach(function(mt){mt.addTo(xt.scene),xt.controls.push(mt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var xt=br(this.controls),mt;try{for(xt.s();!(mt=xt.n()).done;){var Ht=mt.value;Ht.remove()}}catch(or){xt.e(or)}finally{xt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var xt=this.controlCorners={},mt="l7-",Ht=this.controlContainer=fe.SO.create("div",mt+"control-container",this.container);function or(){var _n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Tn=_n.map(function(zn){return mt+zn}).join(" ");xt[_n.filter(function(zn){return!["row","column"].includes(zn)}).join("")]=fe.SO.create("div",Tn,Ht)}function en(_n){var Tn=_n.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,ir.Z)(Tn),[_r[_n]])}Object.values(Er).forEach(function(_n){or(en(_n))})}},{key:"clearControlPos",value:function(){for(var xt in this.controlCorners)this.controlCorners[xt]&&fe.SO.remove(this.controlCorners[xt]);this.controlContainer&&fe.SO.remove(this.controlContainer)}}]),oe}())||Mt),zt,mr,Or=(zt=(0,$.b2)(),zt(mr=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"container",void 0),(0,pe.Z)(this,"scene",void 0),(0,pe.Z)(this,"mapsService",void 0),(0,pe.Z)(this,"markers",[]),(0,pe.Z)(this,"markerLayers",[]),(0,pe.Z)(this,"unAddMarkers",[]),(0,pe.Z)(this,"unAddMarkerLayers",[])}return(0,O.Z)(oe,[{key:"addMarkerLayer",value:function(xt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(xt),xt.addTo(this.scene)):this.unAddMarkerLayers.push(xt)}},{key:"removeMarkerLayer",value:function(xt){xt.destroy(),this.markerLayers.indexOf(xt);var mt=this.markerLayers.indexOf(xt);mt>-1&&this.markerLayers.splice(mt,1)}},{key:"addMarker",value:function(xt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(xt),xt.addTo(this.scene)):this.unAddMarkers.push(xt)}},{key:"addMarkers",value:function(){var xt=this;this.unAddMarkers.forEach(function(mt){mt.addTo(xt.scene),xt.markers.push(mt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var xt=this;this.unAddMarkerLayers.forEach(function(mt){xt.markerLayers.push(mt),mt.addTo(xt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(xt){xt.remove(),this.markers.indexOf(xt);var mt=this.markers.indexOf(xt);mt>-1&&this.markers.splice(mt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(xt){this.scene=xt,this.mapsService=xt.get(z.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(xt){xt.remove()}),this.markers=[],this.markerLayers.forEach(function(xt){xt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(xt){xt.destroy()}}]),oe}())||mr),X,Nr,Xe=(X=(0,$.b2)(),X(Nr=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"scene",void 0),(0,pe.Z)(this,"mapsService",void 0),(0,pe.Z)(this,"popups",[]),(0,pe.Z)(this,"unAddPopups",[])}return(0,O.Z)(oe,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(xt){xt!=null&&xt.isOpen()&&xt.remove();var mt=this.popups.indexOf(xt);mt>-1&&this.popups.splice(mt,1);var Ht=this.unAddPopups.indexOf(xt);Ht>-1&&this.unAddPopups.splice(Ht,1)}},{key:"destroy",value:function(){this.popups.forEach(function(xt){return xt.remove()})}},{key:"addPopup",value:function(xt){var mt=this;xt&&xt.getOptions().autoClose&&[].concat((0,ir.Z)(this.popups),(0,ir.Z)(this.unAddPopups)).forEach(function(Ht){Ht.getOptions().autoClose&&mt.removePopup(Ht)}),this.isMarkerReady?(xt.addTo(this.scene),this.popups.push(xt)):this.unAddPopups.push(xt),xt.on("close",function(){mt.removePopup(xt)})}},{key:"initPopup",value:function(){var xt=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(mt){xt.addPopup(mt),xt.unAddPopups=[]})}},{key:"init",value:function(xt){this.scene=xt,this.mapsService=xt.get(z.IMapService)}}]),oe}())||Nr),xe=m(96486),rt={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},kt=rt,cr,Ar,Lr={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,isMini:!1,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},sr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},Ge=(cr=(0,$.b2)(),cr(Ar=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"sceneConfigCache",{}),(0,pe.Z)(this,"layerConfigCache",{}),(0,pe.Z)(this,"layerAttributeConfigCache",{})}return(0,O.Z)(oe,[{key:"getSceneConfig",value:function(xt){return this.sceneConfigCache[xt]}},{key:"getSceneWarninfo",value:function(xt){return kt[xt]}},{key:"setSceneConfig",value:function(xt,mt){this.sceneConfigCache[xt]=(0,L.Z)((0,L.Z)({},Lr),mt)}},{key:"getLayerConfig",value:function(xt){return this.layerConfigCache[xt]}},{key:"setLayerConfig",value:function(xt,mt,Ht){this.layerConfigCache[mt]=(0,L.Z)({},(0,xe.merge)({},this.sceneConfigCache[xt],sr,Ht))}},{key:"getAttributeConfig",value:function(xt){return this.layerAttributeConfigCache[xt]}},{key:"setAttributeConfig",value:function(xt,mt){this.layerAttributeConfigCache[xt]=(0,L.Z)((0,L.Z)({},this.layerAttributeConfigCache[xt]),mt)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),oe}())||Ar),Gr=m(43269),on=m(53229),cn=m(98333),Dn=Math.PI/180,ci=512,ia=4003e4;function Vi(oe){var Br=oe.latitude,xt=Br===void 0?0:Br,mt=oe.zoom,Ht=mt===void 0?0:mt,or=oe.scale,en=oe.highPrecision,_n=en===void 0?!1:en,Tn=oe.flipY,zn=Tn===void 0?!1:Tn;or=or!==void 0?or:Math.pow(2,Ht);var wi={},Xi=ci*or,ba=Math.cos(xt*Dn),mo=Xi/360,Ja=mo/ba,Ds=Xi/ia/ba;if(wi.pixelsPerMeter=[Ds,-Ds,Ds],wi.metersPerPixel=[1/Ds,-1/Ds,1/Ds],wi.pixelsPerDegree=[mo,-Ja,Ds],wi.degreesPerPixel=[1/mo,-1/Ja,1/Ds],_n){var Ts=Dn*Math.tan(xt*Dn)/ba,lu=mo*Ts/2,Iu=Xi/ia*Ts,_u=Iu/Ja*Ds;wi.pixelsPerDegree2=[0,-lu,Iu],wi.pixelsPerMeter2=[_u,0,_u],zn&&(wi.pixelsPerDegree2[1]=-wi.pixelsPerDegree2[1],wi.pixelsPerMeter2[1]=-wi.pixelsPerMeter2[1])}return zn&&(wi.pixelsPerMeter[1]=-wi.pixelsPerMeter[1],wi.metersPerPixel[1]=-wi.metersPerPixel[1],wi.pixelsPerDegree[1]=-wi.pixelsPerDegree[1],wi.degreesPerPixel[1]=-wi.degreesPerPixel[1]),wi}var On;(function(oe){oe[oe.LNGLAT=1]="LNGLAT",oe[oe.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",oe[oe.VECTOR_TILE=3]="VECTOR_TILE",oe[oe.IDENTITY=4]="IDENTITY",oe[oe.P20=5]="P20",oe[oe.P20_OFFSET=6]="P20_OFFSET",oe[oe.METER_OFFSET=7]="METER_OFFSET",oe[oe.P20_2=8]="P20_2"})(On||(On={}));var ji={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},oi,Hi,Ca,Wi,jo,uo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Pn=(oi=(0,$.b2)(),Hi=(0,$.f3)(z.ICameraService),oi(Ca=(Wi=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"needRefresh",!0),(0,Gr.Z)(this,"cameraService",jo,this),(0,pe.Z)(this,"coordinateSystem",void 0),(0,pe.Z)(this,"viewportCenter",void 0),(0,pe.Z)(this,"viewportCenterProjection",void 0),(0,pe.Z)(this,"pixelsPerDegree",void 0),(0,pe.Z)(this,"pixelsPerDegree2",void 0),(0,pe.Z)(this,"pixelsPerMeter",void 0)}return(0,O.Z)(oe,[{key:"refresh",value:function(xt){var mt=this.cameraService.getZoom(),Ht=this.cameraService.getZoomScale(),or=xt||this.cameraService.getCenter(),en=Vi({latitude:or[1],zoom:mt}),_n=en.pixelsPerMeter,Tn=en.pixelsPerDegree;this.viewportCenter=or,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=_n,this.pixelsPerDegree=Tn,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===On.LNGLAT||this.coordinateSystem===On.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===On.LNGLAT_OFFSET?this.calculateLnglatOffset(or,mt):this.coordinateSystem===On.P20_OFFSET&&this.calculateLnglatOffset(or,mt,Ht,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(xt){this.coordinateSystem=xt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(xt,mt,Ht,or){var en=Vi({latitude:xt[1],zoom:mt,scale:Ht,flipY:or,highPrecision:!0}),_n=en.pixelsPerMeter,Tn=en.pixelsPerDegree,zn=en.pixelsPerDegree2,wi=this.cameraService.getViewMatrix(),Xi=this.cameraService.getProjectionMatrix(),ba=ot.multiply([],Xi,wi),mo=this.cameraService.projectFlat([Math.fround(xt[0]),Math.fround(xt[1])],Math.pow(2,mt));this.viewportCenterProjection=cn.fF([],[mo[0],mo[1],0,1],ba),wi=this.cameraService.getViewMatrixUncentered()||wi,ba=ot.multiply([],Xi,wi),ba=ot.multiply([],ba,uo),this.cameraService.setViewProjectionMatrix(ba),this.pixelsPerMeter=_n,this.pixelsPerDegree=Tn,this.pixelsPerDegree2=zn}}]),oe}(),jo=(0,on.Z)(Wi.prototype,"cameraService",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi))||Ca),bn=m(71002),Oi,di;function va(oe){var Br=wa();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function wa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Aa=(Oi=(0,$.b2)(),Oi(di=function(oe){(0,ue.Z)(xt,oe);var Br=va(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,pe.Z)((0,F.Z)(mt),"renderMap",new Map),(0,pe.Z)((0,F.Z)(mt),"enable",!1),(0,pe.Z)((0,F.Z)(mt),"renderEnable",!1),(0,pe.Z)((0,F.Z)(mt),"cacheLogs",{}),mt}return(0,O.Z)(xt,[{key:"setEnable",value:function(Ht){this.enable=!!Ht}},{key:"log",value:function(Ht,or){var en=this;if(this.enable){var _n=Ht.split("."),Tn=null;_n.forEach(function(zn,wi){Tn!==null?(Tn[zn]||(Tn[zn]={}),wi!==_n.length-1&&(Tn=Tn[zn])):(en.cacheLogs[zn]||(en.cacheLogs[zn]={}),wi!==_n.length-1&&(Tn=en.cacheLogs[zn])),wi===_n.length-1&&(Tn[zn]=(0,L.Z)((0,L.Z)({time:Date.now()},Tn[zn]),or))})}}},{key:"getLog",value:function(Ht){var or=this;switch((0,bn.Z)(Ht)){case"string":return this.cacheLogs[Ht];case"object":return Ht.map(function(en){return or.cacheLogs[en]}).filter(function(en){return en!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(Ht){delete this.cacheLogs[Ht]}},{key:"generateRenderUid",value:function(){return this.renderEnable?(0,fe.M8)():""}},{key:"renderDebug",value:function(Ht){this.renderEnable=Ht}},{key:"renderStart",value:function(Ht){if(!(!this.renderEnable||!this.enable)){var or=this.renderMap.get(Ht)||{};this.renderMap.set(Ht,(0,L.Z)((0,L.Z)({},or),{},{renderUid:Ht,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(Ht){if(!(!this.renderEnable||!this.enable)){var or=this.renderMap.get(Ht);if(or){var en=or.renderStart,_n=Date.now();this.emit("renderEnd",(0,L.Z)((0,L.Z)({},or),{},{renderEnd:_n,renderDuration:_n-en})),this.renderMap.delete(Ht)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),xt}(C.EventEmitter))||di),Ta=m(20396),ma=m.n(Ta),Da;(function(oe){oe.Hover="hover",oe.Click="click",oe.Select="select",oe.Active="active",oe.Drag="drag"})(Da||(Da={}));var Uo,ha,xa,eo,Ee;function Po(oe){var Br=Hs();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Hs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var no={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},qo=(Uo=(0,$.b2)(),ha=(0,$.f3)(z.IMapService),Uo(xa=(eo=function(oe){(0,ue.Z)(xt,oe);var Br=Po(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,pe.Z)((0,F.Z)(mt),"indragging",!1),(0,Gr.Z)((0,F.Z)(mt),"mapService",Ee,(0,F.Z)(mt)),(0,pe.Z)((0,F.Z)(mt),"hammertime",void 0),(0,pe.Z)((0,F.Z)(mt),"lastClickTime",0),(0,pe.Z)((0,F.Z)(mt),"lastClickXY",[-1,-1]),(0,pe.Z)((0,F.Z)(mt),"clickTimer",void 0),(0,pe.Z)((0,F.Z)(mt),"$containter",void 0),(0,pe.Z)((0,F.Z)(mt),"onDrag",function(_n){var Tn=mt.interactionEvent(_n);Tn.type=no[Tn.type],Tn.type==="dragging"?mt.indragging=!0:mt.indragging=!1,mt.emit(Da.Drag,Tn)}),(0,pe.Z)((0,F.Z)(mt),"onHammer",function(_n){_n.srcEvent.stopPropagation();var Tn=mt.interactionEvent(_n);mt.emit(Da.Hover,Tn)}),(0,pe.Z)((0,F.Z)(mt),"onTouch",function(_n){var Tn=_n.touches[0];mt.onHover({x:Tn.pageX,y:Tn.pageY,type:"touch"})}),(0,pe.Z)((0,F.Z)(mt),"onHover",function(_n){var Tn=_n.clientX,zn=_n.clientY,wi=Tn,Xi=zn,ba=_n.type,mo=mt.mapService.getMapContainer();if(mo)if(fe.eW)wi=wi-mo.left-0,Xi=Xi-mo.top-0;else{var Ja=mo.getBoundingClientRect(),Ds=Ja.top,Ts=Ja.left;wi=wi-Ts-mo.clientLeft,Xi=Xi-Ds-mo.clientTop}var lu=mt.mapService.containerToLngLat([wi,Xi]);if(ba==="click"){if(!fe.eW&&"ontouchstart"in document.documentElement)return;mt.isDoubleTap(wi,Xi,lu);return}if(ba==="touch"){mt.isDoubleTap(wi,Xi,lu);return}ba!=="click"&&ba!=="dblclick"&&mt.emit(Da.Hover,{x:wi,y:Xi,lngLat:lu,type:ba,target:_n})}),mt}return(0,O.Z)(xt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Da.Hover)}},{key:"triggerHover",value:function(Ht){var or=Ht.x,en=Ht.y;this.emit(Da.Hover,{x:or,y:en})}},{key:"triggerSelect",value:function(Ht){this.emit(Da.Select,{featureId:Ht})}},{key:"triggerActive",value:function(Ht){this.emit(Da.Active,{featureId:Ht})}},{key:"handleMiniEvent",value:function(Ht){this.onHover({clientX:Ht.touches[0].pageX,clientY:Ht.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var Ht=this.mapService.getMapContainer();if(Ht)if(fe.eW)fe.vO.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var or=new(ma()).Manager(Ht);or.add(new(ma()).Tap({event:"dblclick",taps:2})),or.add(new(ma()).Tap({event:"click"})),or.add(new(ma()).Pan({threshold:0,pointers:0})),or.add(new(ma()).Press({})),or.on("dblclick click",this.onHammer),or.on("panstart panmove panend pancancel",this.onDrag),Ht.addEventListener("mousemove",this.onHover),Ht.addEventListener("mousedown",this.onHover,!0),Ht.addEventListener("mouseup",this.onHover),Ht.addEventListener("contextmenu",this.onHover),this.hammertime=or}}},{key:"removeEventListenerOnMap",value:function(){if(fe.eW)fe.vO.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var Ht=this.mapService.getMapContainer();Ht&&(Ht.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Ht.removeEventListener("mousedown",this.onHover),Ht.removeEventListener("mouseup",this.onHover),Ht.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(Ht){var or=Ht.type,en=Ht.pointerType,_n,Tn;en==="touch"?(Tn=Math.floor(Ht.pointers[0].clientY),_n=Math.floor(Ht.pointers[0].clientX)):(Tn=Math.floor(Ht.srcEvent.y),_n=Math.floor(Ht.srcEvent.x));var zn=this.mapService.getMapContainer();if(zn){var wi=zn.getBoundingClientRect(),Xi=wi.top,ba=wi.left;_n-=ba,Tn-=Xi}var mo=this.mapService.containerToLngLat([_n,Tn]);return{x:_n,y:Tn,lngLat:mo,type:or,target:Ht.srcEvent}}},{key:"isDoubleTap",value:function(Ht,or,en){var _n=this,Tn=new Date().getTime(),zn="click";Tn-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Ht)<10&&Math.abs(this.lastClickXY[1]-or)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),zn="dblclick",this.emit(Da.Hover,{x:Ht,y:or,lngLat:en,type:zn})):(this.lastClickTime=Tn,this.lastClickXY=[Ht,or],this.clickTimer=setTimeout(function(){zn="click",_n.emit(Da.Hover,{x:Ht,y:or,lngLat:en,type:zn})},400))}}]),xt}(l()),Ee=(0,on.Z)(eo.prototype,"mapService",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo))||xa),os=0;function Go(oe){if(fe.eW)return null;var Br=oe;if(typeof oe=="string"&&(Br=document.getElementById(oe)),Br){var xt=document.createElement("div");return xt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,xt.id="l7-scene-".concat(os++),xt.classList.add("l7-scene"),Br.appendChild(xt),xt}return null}function Wo(oe){var Br,xt,mt=!0;return oe==null||(Br=oe.target)===null||Br===void 0||(xt=Br.path)===null||xt===void 0||xt.map(function(Ht){if(Ht!=null&&Ht.classList){var or;Ht==null||(or=Ht.classList)===null||or===void 0||or.forEach(function(en){(en==="l7-marker"||en==="l7-popup")&&(mt=!1)})}}),mt}var za;(function(oe){oe[oe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",oe[oe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",oe[oe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",oe[oe.POINTS=0]="POINTS",oe[oe.LINES=1]="LINES",oe[oe.LINE_LOOP=2]="LINE_LOOP",oe[oe.LINE_STRIP=3]="LINE_STRIP",oe[oe.TRIANGLES=4]="TRIANGLES",oe[oe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",oe[oe.TRIANGLE_FAN=6]="TRIANGLE_FAN",oe[oe.ZERO=0]="ZERO",oe[oe.ONE=1]="ONE",oe[oe.SRC_COLOR=768]="SRC_COLOR",oe[oe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",oe[oe.SRC_ALPHA=770]="SRC_ALPHA",oe[oe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",oe[oe.DST_ALPHA=772]="DST_ALPHA",oe[oe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",oe[oe.DST_COLOR=774]="DST_COLOR",oe[oe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",oe[oe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",oe[oe.FUNC_ADD=32774]="FUNC_ADD",oe[oe.BLEND_EQUATION=32777]="BLEND_EQUATION",oe[oe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",oe[oe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",oe[oe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",oe[oe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",oe[oe.MAX_EXT=32776]="MAX_EXT",oe[oe.MIN_EXT=32775]="MIN_EXT",oe[oe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",oe[oe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",oe[oe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",oe[oe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",oe[oe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",oe[oe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",oe[oe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",oe[oe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",oe[oe.BLEND_COLOR=32773]="BLEND_COLOR",oe[oe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",oe[oe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",oe[oe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",oe[oe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",oe[oe.STREAM_DRAW=35040]="STREAM_DRAW",oe[oe.STATIC_DRAW=35044]="STATIC_DRAW",oe[oe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",oe[oe.BUFFER_SIZE=34660]="BUFFER_SIZE",oe[oe.BUFFER_USAGE=34661]="BUFFER_USAGE",oe[oe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",oe[oe.FRONT=1028]="FRONT",oe[oe.BACK=1029]="BACK",oe[oe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",oe[oe.CULL_FACE=2884]="CULL_FACE",oe[oe.BLEND=3042]="BLEND",oe[oe.DITHER=3024]="DITHER",oe[oe.STENCIL_TEST=2960]="STENCIL_TEST",oe[oe.DEPTH_TEST=2929]="DEPTH_TEST",oe[oe.SCISSOR_TEST=3089]="SCISSOR_TEST",oe[oe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",oe[oe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",oe[oe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",oe[oe.NO_ERROR=0]="NO_ERROR",oe[oe.INVALID_ENUM=1280]="INVALID_ENUM",oe[oe.INVALID_VALUE=1281]="INVALID_VALUE",oe[oe.INVALID_OPERATION=1282]="INVALID_OPERATION",oe[oe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",oe[oe.CW=2304]="CW",oe[oe.CCW=2305]="CCW",oe[oe.LINE_WIDTH=2849]="LINE_WIDTH",oe[oe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",oe[oe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",oe[oe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",oe[oe.FRONT_FACE=2886]="FRONT_FACE",oe[oe.DEPTH_RANGE=2928]="DEPTH_RANGE",oe[oe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",oe[oe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",oe[oe.DEPTH_FUNC=2932]="DEPTH_FUNC",oe[oe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",oe[oe.STENCIL_FUNC=2962]="STENCIL_FUNC",oe[oe.STENCIL_FAIL=2964]="STENCIL_FAIL",oe[oe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",oe[oe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",oe[oe.STENCIL_REF=2967]="STENCIL_REF",oe[oe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",oe[oe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",oe[oe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",oe[oe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",oe[oe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",oe[oe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",oe[oe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",oe[oe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",oe[oe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",oe[oe.VIEWPORT=2978]="VIEWPORT",oe[oe.SCISSOR_BOX=3088]="SCISSOR_BOX",oe[oe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",oe[oe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",oe[oe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",oe[oe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",oe[oe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",oe[oe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",oe[oe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",oe[oe.RED_BITS=3410]="RED_BITS",oe[oe.GREEN_BITS=3411]="GREEN_BITS",oe[oe.BLUE_BITS=3412]="BLUE_BITS",oe[oe.ALPHA_BITS=3413]="ALPHA_BITS",oe[oe.DEPTH_BITS=3414]="DEPTH_BITS",oe[oe.STENCIL_BITS=3415]="STENCIL_BITS",oe[oe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",oe[oe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",oe[oe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",oe[oe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",oe[oe.SAMPLES=32937]="SAMPLES",oe[oe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",oe[oe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",oe[oe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",oe[oe.DONT_CARE=4352]="DONT_CARE",oe[oe.FASTEST=4353]="FASTEST",oe[oe.NICEST=4354]="NICEST",oe[oe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",oe[oe.BYTE=5120]="BYTE",oe[oe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",oe[oe.SHORT=5122]="SHORT",oe[oe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",oe[oe.INT=5124]="INT",oe[oe.UNSIGNED_INT=5125]="UNSIGNED_INT",oe[oe.FLOAT=5126]="FLOAT",oe[oe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",oe[oe.ALPHA=6406]="ALPHA",oe[oe.RGB=6407]="RGB",oe[oe.RGBA=6408]="RGBA",oe[oe.LUMINANCE=6409]="LUMINANCE",oe[oe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",oe[oe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",oe[oe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",oe[oe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",oe[oe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",oe[oe.VERTEX_SHADER=35633]="VERTEX_SHADER",oe[oe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",oe[oe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",oe[oe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",oe[oe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",oe[oe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",oe[oe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",oe[oe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",oe[oe.SHADER_TYPE=35663]="SHADER_TYPE",oe[oe.DELETE_STATUS=35712]="DELETE_STATUS",oe[oe.LINK_STATUS=35714]="LINK_STATUS",oe[oe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",oe[oe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",oe[oe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",oe[oe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",oe[oe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",oe[oe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",oe[oe.NEVER=512]="NEVER",oe[oe.LESS=513]="LESS",oe[oe.EQUAL=514]="EQUAL",oe[oe.LEQUAL=515]="LEQUAL",oe[oe.GREATER=516]="GREATER",oe[oe.NOTEQUAL=517]="NOTEQUAL",oe[oe.GEQUAL=518]="GEQUAL",oe[oe.ALWAYS=519]="ALWAYS",oe[oe.KEEP=7680]="KEEP",oe[oe.REPLACE=7681]="REPLACE",oe[oe.INCR=7682]="INCR",oe[oe.DECR=7683]="DECR",oe[oe.INVERT=5386]="INVERT",oe[oe.INCR_WRAP=34055]="INCR_WRAP",oe[oe.DECR_WRAP=34056]="DECR_WRAP",oe[oe.VENDOR=7936]="VENDOR",oe[oe.RENDERER=7937]="RENDERER",oe[oe.VERSION=7938]="VERSION",oe[oe.NEAREST=9728]="NEAREST",oe[oe.LINEAR=9729]="LINEAR",oe[oe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",oe[oe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",oe[oe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",oe[oe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",oe[oe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",oe[oe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",oe[oe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",oe[oe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",oe[oe.TEXTURE_2D=3553]="TEXTURE_2D",oe[oe.TEXTURE=5890]="TEXTURE",oe[oe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",oe[oe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",oe[oe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",oe[oe.TEXTURE0=33984]="TEXTURE0",oe[oe.TEXTURE1=33985]="TEXTURE1",oe[oe.TEXTURE2=33986]="TEXTURE2",oe[oe.TEXTURE3=33987]="TEXTURE3",oe[oe.TEXTURE4=33988]="TEXTURE4",oe[oe.TEXTURE5=33989]="TEXTURE5",oe[oe.TEXTURE6=33990]="TEXTURE6",oe[oe.TEXTURE7=33991]="TEXTURE7",oe[oe.TEXTURE8=33992]="TEXTURE8",oe[oe.TEXTURE9=33993]="TEXTURE9",oe[oe.TEXTURE10=33994]="TEXTURE10",oe[oe.TEXTURE11=33995]="TEXTURE11",oe[oe.TEXTURE12=33996]="TEXTURE12",oe[oe.TEXTURE13=33997]="TEXTURE13",oe[oe.TEXTURE14=33998]="TEXTURE14",oe[oe.TEXTURE15=33999]="TEXTURE15",oe[oe.TEXTURE16=34e3]="TEXTURE16",oe[oe.TEXTURE17=34001]="TEXTURE17",oe[oe.TEXTURE18=34002]="TEXTURE18",oe[oe.TEXTURE19=34003]="TEXTURE19",oe[oe.TEXTURE20=34004]="TEXTURE20",oe[oe.TEXTURE21=34005]="TEXTURE21",oe[oe.TEXTURE22=34006]="TEXTURE22",oe[oe.TEXTURE23=34007]="TEXTURE23",oe[oe.TEXTURE24=34008]="TEXTURE24",oe[oe.TEXTURE25=34009]="TEXTURE25",oe[oe.TEXTURE26=34010]="TEXTURE26",oe[oe.TEXTURE27=34011]="TEXTURE27",oe[oe.TEXTURE28=34012]="TEXTURE28",oe[oe.TEXTURE29=34013]="TEXTURE29",oe[oe.TEXTURE30=34014]="TEXTURE30",oe[oe.TEXTURE31=34015]="TEXTURE31",oe[oe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",oe[oe.REPEAT=10497]="REPEAT",oe[oe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",oe[oe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",oe[oe.FLOAT_VEC2=35664]="FLOAT_VEC2",oe[oe.FLOAT_VEC3=35665]="FLOAT_VEC3",oe[oe.FLOAT_VEC4=35666]="FLOAT_VEC4",oe[oe.INT_VEC2=35667]="INT_VEC2",oe[oe.INT_VEC3=35668]="INT_VEC3",oe[oe.INT_VEC4=35669]="INT_VEC4",oe[oe.BOOL=35670]="BOOL",oe[oe.BOOL_VEC2=35671]="BOOL_VEC2",oe[oe.BOOL_VEC3=35672]="BOOL_VEC3",oe[oe.BOOL_VEC4=35673]="BOOL_VEC4",oe[oe.FLOAT_MAT2=35674]="FLOAT_MAT2",oe[oe.FLOAT_MAT3=35675]="FLOAT_MAT3",oe[oe.FLOAT_MAT4=35676]="FLOAT_MAT4",oe[oe.SAMPLER_2D=35678]="SAMPLER_2D",oe[oe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",oe[oe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",oe[oe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",oe[oe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",oe[oe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",oe[oe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",oe[oe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",oe[oe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",oe[oe.COMPILE_STATUS=35713]="COMPILE_STATUS",oe[oe.LOW_FLOAT=36336]="LOW_FLOAT",oe[oe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",oe[oe.HIGH_FLOAT=36338]="HIGH_FLOAT",oe[oe.LOW_INT=36339]="LOW_INT",oe[oe.MEDIUM_INT=36340]="MEDIUM_INT",oe[oe.HIGH_INT=36341]="HIGH_INT",oe[oe.FRAMEBUFFER=36160]="FRAMEBUFFER",oe[oe.RENDERBUFFER=36161]="RENDERBUFFER",oe[oe.RGBA4=32854]="RGBA4",oe[oe.RGB5_A1=32855]="RGB5_A1",oe[oe.RGB565=36194]="RGB565",oe[oe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",oe[oe.STENCIL_INDEX=6401]="STENCIL_INDEX",oe[oe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",oe[oe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",oe[oe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",oe[oe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",oe[oe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",oe[oe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",oe[oe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",oe[oe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",oe[oe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",oe[oe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",oe[oe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",oe[oe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",oe[oe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",oe[oe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",oe[oe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",oe[oe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",oe[oe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",oe[oe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",oe[oe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",oe[oe.NONE=0]="NONE",oe[oe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",oe[oe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",oe[oe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",oe[oe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",oe[oe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",oe[oe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",oe[oe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",oe[oe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",oe[oe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",oe[oe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",oe[oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",oe[oe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",oe[oe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",oe[oe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(za||(za={}));var Tu,Cs,Zs,ts,Vs,ou,ls,Di,As,Rs,vr,zr,lr,Zr=(Tu=(0,$.b2)(),Cs=(0,$.f3)(z.IMapService),Zs=(0,$.f3)(z.IRendererService),ts=(0,$.f3)(z.IGlobalConfigService),Vs=(0,$.f3)(z.IInteractionService),ou=(0,$.f3)(z.ILayerService),Tu(ls=(Di=function(){function oe(){var Br=this;(0,T.Z)(this,oe),(0,pe.Z)(this,"pickedColors",void 0),(0,pe.Z)(this,"pickedTileLayers",[]),(0,Gr.Z)(this,"mapService",As,this),(0,Gr.Z)(this,"rendererService",Rs,this),(0,Gr.Z)(this,"configService",vr,this),(0,Gr.Z)(this,"interactionService",zr,this),(0,Gr.Z)(this,"layerService",lr,this),(0,pe.Z)(this,"pickingFBO",void 0),(0,pe.Z)(this,"width",0),(0,pe.Z)(this,"height",0),(0,pe.Z)(this,"alreadyInPicking",!1),(0,pe.Z)(this,"pickBufferScale",1),(0,pe.Z)(this,"pickFromPickingFBO",function(xt,mt){var Ht=mt.x,or=mt.y,en=mt.lngLat,_n=mt.type,Tn=mt.target,zn=!1,wi=Br.rendererService,Xi=wi.readPixels,ba=wi.getContainer,mo=Br.getContainerSize(ba()),Ja=mo.width,Ds=mo.height;Ja*=fe.SO.DPR,Ds*=fe.SO.DPR;var Ts=xt.getLayerConfig(),lu=Ts.enableHighlight,Iu=Ts.enableSelect,_u=Ht*fe.SO.DPR,Mc=or*fe.SO.DPR;if(_u>Ja-1*fe.SO.DPR||_u<0||Mc>Ds-1*fe.SO.DPR||Mc<0)return!1;var tu=Xi({x:Math.floor(_u/Br.pickBufferScale),y:Math.floor((Ds-(or+1)*fe.SO.DPR)/Br.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Br.pickingFBO});if(Br.pickedColors=tu,tu[0]!==0||tu[1]!==0||tu[2]!==0){var Fl=(0,fe.W0)(tu),Ys=xt.layerPickService.getFeatureById(Fl);Fl!==xt.getCurrentPickId()&&_n==="mousemove"&&(_n="mouseenter");var ku={x:Ht,y:or,type:_n,lngLat:en,featureId:Fl,feature:Ys,target:Tn};Ys&&(zn=!0,xt.setCurrentPickId(Fl),Br.triggerHoverOnLayer(xt,ku))}else{var Bu={x:Ht,y:or,lngLat:en,type:xt.getCurrentPickId()!==null&&_n==="mousemove"?"mouseout":"un"+_n,featureId:null,target:Tn,feature:null};Br.triggerHoverOnLayer(xt,(0,L.Z)((0,L.Z)({},Bu),{},{type:"unpick"})),Br.triggerHoverOnLayer(xt,Bu),xt.setCurrentPickId(null)}if(lu&&xt.layerPickService.highlightPickedFeature(tu),Iu&&_n==="click"&&(tu==null?void 0:tu.toString())!==[0,0,0,0].toString()){var Gl=(0,fe.W0)(tu);xt.getCurrentSelectedId()===null||Gl!==xt.getCurrentSelectedId()?(xt.layerPickService.selectFeature(tu),xt.setCurrentSelectedId(Gl)):(xt.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),xt.setCurrentSelectedId(null))}return zn})}return(0,O.Z)(oe,[{key:"init",value:function(xt){var mt=this.rendererService,Ht=mt.createTexture2D,or=mt.createFramebuffer,en=mt.getContainer,_n=this.getContainerSize(en()),Tn=_n.width,zn=_n.height;Tn*=fe.SO.DPR,zn*=fe.SO.DPR,this.pickBufferScale=this.configService.getSceneConfig(xt).pickBufferScale||1,this.pickingFBO=or({color:Ht({width:Math.round(Tn/this.pickBufferScale),height:Math.round(zn/this.pickBufferScale),wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.interactionService.on(Da.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var Br=(0,Zt.Z)(He().mark(function mt(Ht,or,en){var _n=this,Tn,zn,wi;return He().wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:Tn=this.rendererService,zn=Tn.useFramebuffer,wi=Tn.clear,this.resizePickingFBO(),zn(this.pickingFBO,function(){wi({framebuffer:_n.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Ht.hooks.beforePickingEncode.call(),Ht.renderModels(),Ht.hooks.afterPickingEncode.call();var mo=_n.pickBox(Ht,or);en(mo)});case 3:case"end":return ba.stop()}},mt,this)}));function xt(mt,Ht,or){return Br.apply(this,arguments)}return xt}()},{key:"pickBox",value:function(xt,mt){var Ht=this,or=mt.map(function(Gl){var ru=Gl<0?0:Gl;return Math.floor(ru*fe.SO.DPR/Ht.pickBufferScale)}),en=(0,De.Z)(or,4),_n=en[0],Tn=en[1],zn=en[2],wi=en[3],Xi=this.rendererService,ba=Xi.readPixels,mo=Xi.getContainer,Ja=this.getContainerSize(mo()),Ds=Ja.width,Ts=Ja.height;if(Ds*=fe.SO.DPR,Ts*=fe.SO.DPR,_n>(Ds-1)*fe.SO.DPR/this.pickBufferScale||zn<0||Tn>(Ts-1)*fe.SO.DPR/this.pickBufferScale||wi<0)return[];for(var lu=Math.min(Ds/this.pickBufferScale,zn)-_n,Iu=Math.min(Ts/this.pickBufferScale,wi)-Tn,_u=ba({x:_n,y:Math.floor(Ts/this.pickBufferScale-(wi+1)),width:lu,height:Iu,data:new Uint8Array(lu*Iu*4),framebuffer:this.pickingFBO}),Mc=[],tu={},Fl=0;Fl<_u.length/4;Fl=Fl+1){var Ys=_u.slice(Fl*4,Fl*4+4),ku=(0,fe.W0)(Ys);if(ku!==-1&&!tu[ku]){var Bu=xt.layerPickService.getFeatureById(ku);Mc.push((0,L.Z)((0,L.Z)({},Bu),{},{pickedFeatureIdx:ku})),tu[ku]=!0}}return Mc}},{key:"handleCursor",value:function(xt,mt){var Ht=xt.getLayerConfig(),or=Ht.cursor,en=or===void 0?"":or,_n=Ht.cursorEnabled;if(_n){var Tn=this.mapService.version,zn=Tn==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),wi=zn==null?void 0:zn.style.getPropertyValue("cursor");mt==="unmousemove"&&wi!==""?zn==null||zn.style.setProperty("cursor",""):mt==="mousemove"&&(zn==null||zn.style.setProperty("cursor",en))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(xt){return xt.getContext?{width:xt.width/fe.SO.DPR,height:xt.height/fe.SO.DPR}:xt.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var Br=(0,Zt.Z)(He().mark(function mt(Ht){return He().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:if(!(!this.layerService.needPick(Ht.type)||!this.isPickingAllLayer())){en.next=2;break}return en.abrupt("return");case 2:return this.alreadyInPicking=!0,en.next=5,this.pickingLayers(Ht);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return en.stop()}},mt,this)}));function xt(mt){return Br.apply(this,arguments)}return xt}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var xt=this.rendererService.getContainer,mt=this.getContainerSize(xt()),Ht=mt.width,or=mt.height;Ht*=fe.SO.DPR,or*=fe.SO.DPR,(this.width!==Ht||this.height!==or)&&(this.pickingFBO.resize({width:Math.round(Ht/this.pickBufferScale),height:Math.round(or/this.pickBufferScale)}),this.width=Ht,this.height=or)}},{key:"pickingLayers",value:function(){var Br=(0,Zt.Z)(He().mark(function mt(Ht){var or=this,en,_n,Tn;return He().wrap(function(wi){for(;;)switch(wi.prev=wi.next){case 0:en=this.rendererService,_n=en.useFramebuffer,Tn=en.clear,this.resizePickingFBO(),_n(this.pickingFBO,function(){var Xi=or.layerService.getRenderList();Xi.filter(function(ba){return ba.needPick(Ht.type)}).reverse().some(function(ba){Tn({framebuffer:or.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ba.layerPickService.pickRender(Ht);var mo=or.pickFromPickingFBO(ba,Ht);return or.layerService.pickedLayerId=mo?+ba.id:-1,mo&&!ba.getLayerConfig().enablePropagation})});case 3:case"end":return wi.stop()}},mt,this)}));function xt(mt){return Br.apply(this,arguments)}return xt}()},{key:"triggerHoverOnLayer",value:function(xt,mt){Wo(mt)&&(this.handleCursor(xt,mt.type),xt.emit(mt.type,mt))}}]),oe}(),As=(0,on.Z)(Di.prototype,"mapService",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rs=(0,on.Z)(Di.prototype,"rendererService",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vr=(0,on.Z)(Di.prototype,"configService",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr=(0,on.Z)(Di.prototype,"interactionService",[Vs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lr=(0,on.Z)(Di.prototype,"layerService",[ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Di))||ls),Hn=function(){function oe(){var Br=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,T.Z)(this,oe),(0,pe.Z)(this,"autoStart",void 0),(0,pe.Z)(this,"startTime",0),(0,pe.Z)(this,"oldTime",0),(0,pe.Z)(this,"running",!1),(0,pe.Z)(this,"elapsedTime",0),this.autoStart=Br}return(0,O.Z)(oe,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var xt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var mt=(typeof performance=="undefined"?Date:performance).now();xt=(mt-this.oldTime)/1e3,this.oldTime=mt,this.elapsedTime+=xt}return xt}}]),oe}(),Hr,Bo,Yr,pr,at,hr,er,dn,mn;function Vn(oe,Br){var xt=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!xt){if(Array.isArray(oe)||(xt=ni(oe))||Br&&oe&&typeof oe.length=="number"){xt&&(oe=xt);var mt=0,Ht=function(){};return{s:Ht,n:function(){return mt>=oe.length?{done:!0}:{done:!1,value:oe[mt++]}},e:function(zn){throw zn},f:Ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var or=!0,en=!1,_n;return{s:function(){xt=xt.call(oe)},n:function(){var zn=xt.next();return or=zn.done,zn},e:function(zn){en=!0,_n=zn},f:function(){try{!or&&xt.return!=null&&xt.return()}finally{if(en)throw _n}}}}function ni(oe,Br){if(oe){if(typeof oe=="string")return si(oe,Br);var xt=Object.prototype.toString.call(oe).slice(8,-1);if(xt==="Object"&&oe.constructor&&(xt=oe.constructor.name),xt==="Map"||xt==="Set")return Array.from(oe);if(xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt))return si(oe,Br)}}function si(oe,Br){(Br==null||Br>oe.length)&&(Br=oe.length);for(var xt=0,mt=new Array(Br);xt<Br;xt++)mt[xt]=oe[xt];return mt}function Si(oe){var Br=qi();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function qi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Rr=(Hr=(0,$.b2)(),Bo=(0,$.f3)(z.IRendererService),Yr=(0,$.f3)(z.IMapService),pr=(0,$.f3)(z.IDebugService),Hr(at=(hr=function(oe){(0,ue.Z)(xt,oe);var Br=Si(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,pe.Z)((0,F.Z)(mt),"pickedLayerId",-1),(0,pe.Z)((0,F.Z)(mt),"clock",new Hn),(0,pe.Z)((0,F.Z)(mt),"alreadyInRendering",!1),(0,pe.Z)((0,F.Z)(mt),"layers",[]),(0,pe.Z)((0,F.Z)(mt),"layerList",[]),(0,pe.Z)((0,F.Z)(mt),"layerRenderID",void 0),(0,pe.Z)((0,F.Z)(mt),"sceneInited",!1),(0,pe.Z)((0,F.Z)(mt),"animateInstanceCount",0),(0,pe.Z)((0,F.Z)(mt),"shaderPicking",!0),(0,pe.Z)((0,F.Z)(mt),"enableRender",!0),(0,Gr.Z)((0,F.Z)(mt),"renderService",er,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"mapService",dn,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"debugService",mn,(0,F.Z)(mt)),(0,pe.Z)((0,F.Z)(mt),"reRender",(0,xe.throttle)(function(){mt.updateLayerRenderList(),mt.renderLayers()},32)),(0,pe.Z)((0,F.Z)(mt),"throttleRenderLayers",(0,xe.throttle)(function(){mt.renderLayers()},16)),mt}return(0,O.Z)(xt,[{key:"needPick",value:function(Ht){return this.layerList.some(function(or){return or.needPick(Ht)})}},{key:"add",value:function(Ht){var or=this;this.layers.push(Ht),this.sceneInited&&Ht.init().then(function(){or.updateLayerRenderList(),or.renderLayers()})}},{key:"addMask",value:function(Ht){var or=this;this.sceneInited&&Ht.init().then(function(){or.renderLayers()})}},{key:"initLayers",value:function(){var mt=(0,Zt.Z)(He().mark(function or(){var en=this;return He().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var zn=(0,Zt.Z)(He().mark(function wi(Xi){return He().wrap(function(mo){for(;;)switch(mo.prev=mo.next){case 0:if(Xi.startInit){mo.next=4;break}return mo.next=3,Xi.init();case 3:en.updateLayerRenderList();case 4:case"end":return mo.stop()}},wi)}));return function(wi){return zn.apply(this,arguments)}}());case 2:case"end":return Tn.stop()}},or,this)}));function Ht(){return mt.apply(this,arguments)}return Ht}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Ht){return this.layers.find(function(or){return or.id===Ht})}},{key:"getLayerByName",value:function(Ht){return this.layers.find(function(or){return or.name===Ht})}},{key:"remove",value:function(){var mt=(0,Zt.Z)(He().mark(function or(en,_n){var Tn,zn;return He().wrap(function(Xi){for(;;)switch(Xi.prev=Xi.next){case 0:_n?(Tn=_n.layerChildren.indexOf(en),Tn>-1&&_n.layerChildren.splice(Tn,1)):(zn=this.layers.indexOf(en),zn>-1&&this.layers.splice(zn,1)),this.updateLayerRenderList(),en.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 5:case"end":return Xi.stop()}},or,this)}));function Ht(or,en){return mt.apply(this,arguments)}return Ht}()},{key:"removeAllLayers",value:function(){var mt=(0,Zt.Z)(He().mark(function or(){return He().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:this.destroy(),this.reRender();case 2:case"end":return _n.stop()}},or,this)}));function Ht(){return mt.apply(this,arguments)}return Ht}()},{key:"setEnableRender",value:function(Ht){this.enableRender=Ht}},{key:"renderLayers",value:function(){var mt=(0,Zt.Z)(He().mark(function or(){var en,_n,Tn,zn;return He().wrap(function(Xi){for(;;)switch(Xi.prev=Xi.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){Xi.next=2;break}return Xi.abrupt("return");case 2:en=this.debugService.generateRenderUid(),this.debugService.renderStart(en),this.alreadyInRendering=!0,this.clear(),_n=Vn(this.layerList),Xi.prev=7,_n.s();case 9:if((Tn=_n.n()).done){Xi.next=21;break}if(zn=Tn.value,zn.masks.filter(function(ba){return ba.inited}).length>0&&(this.renderService.clear({stencil:0,depth:1,framebuffer:null}),zn.masks.map(function(){var ba=(0,Zt.Z)(He().mark(function mo(Ja){return He().wrap(function(Ts){for(;;)switch(Ts.prev=Ts.next){case 0:Ja.render();case 1:case"end":return Ts.stop()}},mo)}));return function(mo){return ba.apply(this,arguments)}}())),!zn.getLayerConfig().enableMultiPassRenderer){Xi.next=17;break}return Xi.next=15,zn.renderMultiPass();case 15:Xi.next=19;break;case 17:return Xi.next=19,zn.render();case 19:Xi.next=9;break;case 21:Xi.next=26;break;case 23:Xi.prev=23,Xi.t0=Xi.catch(7),_n.e(Xi.t0);case 26:return Xi.prev=26,_n.f(),Xi.finish(26);case 29:this.debugService.renderEnd(en),this.alreadyInRendering=!1;case 31:case"end":return Xi.stop()}},or,this,[[7,23,26,29]])}));function Ht(){return mt.apply(this,arguments)}return Ht}()},{key:"renderMask",value:function(Ht){Ht.filter(function(or){return or.inited}).map(function(or){or.render()})}},{key:"beforeRenderData",value:function(){var mt=(0,Zt.Z)(He().mark(function or(en){var _n;return He().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:return zn.next=2,en.hooks.beforeRenderData.promise();case 2:_n=zn.sent,_n&&this.renderLayers();case 4:case"end":return zn.stop()}},or,this)}));function Ht(or){return mt.apply(this,arguments)}return Ht}()},{key:"renderLayer",value:function(){var mt=(0,Zt.Z)(He().mark(function or(en){var _n=this;return He().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(en.masks.filter(function(wi){return wi.inited}).length>0&&en.masks.map(function(wi){_n.renderService.clear({stencil:0,depth:1,framebuffer:null}),wi.render()}),!en.getLayerConfig().enableMultiPassRenderer){zn.next=6;break}return zn.next=4,en.renderMultiPass();case 4:zn.next=8;break;case 6:return zn.next=8,en.render();case 8:case"end":return zn.stop()}},or)}));function Ht(or){return mt.apply(this,arguments)}return Ht}()},{key:"updateLayerRenderList",value:function(){var Ht=this;this.layerList=[],this.layers.filter(function(or){return or.inited}).filter(function(or){return or.isVisible()}).sort(function(or,en){return or.zIndex-en.zIndex}).forEach(function(or){Ht.layerList.push(or)})}},{key:"destroy",value:function(){this.layers.forEach(function(Ht){Ht.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var Ht=(0,fe.CI)(this.mapService.bgColor);this.renderService.clear({color:Ht,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=fe.vO.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){fe.vO.cancelAnimationFrame(this.layerRenderID)}}]),xt}(C.EventEmitter),er=(0,on.Z)(hr.prototype,"renderService",[Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dn=(0,on.Z)(hr.prototype,"mapService",[Yr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn=(0,on.Z)(hr.prototype,"debugService",[pr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hr))||at),Mn=m(91),pn=function(){function oe(Br){var xt=this;(0,T.Z)(this,oe),(0,pe.Z)(this,"name",void 0),(0,pe.Z)(this,"type",void 0),(0,pe.Z)(this,"scale",void 0),(0,pe.Z)(this,"descriptor",void 0),(0,pe.Z)(this,"featureBufferLayout",[]),(0,pe.Z)(this,"needRescale",!1),(0,pe.Z)(this,"needRemapping",!1),(0,pe.Z)(this,"needRegenerateVertices",!1),(0,pe.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,pe.Z)(this,"vertexAttribute",void 0),(0,pe.Z)(this,"defaultCallback",function(mt){if(mt.length===0){var Ht;return((Ht=xt.scale)===null||Ht===void 0?void 0:Ht.defaultValues)||[]}return mt.map(function(or,en){var _n,Tn=(_n=xt.scale)===null||_n===void 0?void 0:_n.scalers[en].func,zn=Tn(or);return zn})}),this.setProps(Br)}return(0,O.Z)(oe,[{key:"setProps",value:function(xt){Object.assign(this,xt)}},{key:"mapping",value:function(xt){var mt;if((mt=this.scale)!==null&&mt!==void 0&&mt.callback){var Ht,or=(Ht=this.scale)===null||Ht===void 0?void 0:Ht.callback.apply(Ht,(0,ir.Z)(xt));if(!(0,xe.isNil)(or))return[or]}return this.defaultCallback(xt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),oe}(),wn=["modelType"],Kn=["buffer","update","name"],Ei=["buffer","update","name"],Ji=["buffer","update","name"],Yi,oa,Ma,k,de,yt,Ue=(Yi={},(0,pe.Z)(Yi,za.FLOAT,4),(0,pe.Z)(Yi,za.UNSIGNED_BYTE,1),(0,pe.Z)(Yi,za.UNSIGNED_SHORT,2),Yi),nr=(oa=(0,$.b2)(),Ma=(0,$.f3)(z.IRendererService),oa(k=(de=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"attributesAndIndices",void 0),(0,Gr.Z)(this,"rendererService",yt,this),(0,pe.Z)(this,"attributes",[]),(0,pe.Z)(this,"triangulation",void 0),(0,pe.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,O.Z)(oe,[{key:"registerStyleAttribute",value:function(xt){var mt=this.getLayerStyleAttribute(xt.name||"");return mt?mt.setProps(xt):(mt=new pn(xt),this.attributes.push(mt)),mt}},{key:"updateScaleAttribute",value:function(xt){this.attributes.forEach(function(mt){var Ht,or=mt.name,en=(Ht=mt.scale)===null||Ht===void 0?void 0:Ht.field;(xt[or]||en&&xt[en])&&(mt.needRescale=!0,mt.needRemapping=!0,mt.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(xt,mt,Ht){var or=this.getLayerStyleAttribute(xt);or||(or=this.registerStyleAttribute((0,L.Z)((0,L.Z)({},mt),{},{name:xt})));var en=mt.scale;en&&or&&(or.scale=en,or.needRescale=!0,or.needRemapping=!0,or.needRegenerateVertices=!0,Ht&&Ht.featureRange&&(or.featureRange=Ht.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(xt){return this.attributes.find(function(mt){return mt.name===xt})}},{key:"getLayerAttributeScale",value:function(xt){var mt,Ht=this.getLayerStyleAttribute(xt),or=Ht==null||(mt=Ht.scale)===null||mt===void 0?void 0:mt.scalers;return or&&or[0]?or[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(xt,mt){var Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,or=arguments.length>3?arguments[3]:void 0,en=arguments.length>4?arguments[4]:void 0,_n=this.attributes.find(function(tu){return tu.name===xt});if(_n&&_n.descriptor){var Tn=_n.descriptor,zn=Tn.update,wi=Tn.buffer,Xi=Tn.size,ba=Xi===void 0?0:Xi,mo=Ue[wi.type||za.FLOAT];if(zn){var Ja=this.featureLayout,Ds=Ja.elements,Ts=Ja.sizePerElement,lu=Ds.slice(Ht,or);if(!lu.length)return;var Iu=lu[0].offset,_u=Iu*ba*mo,Mc=lu.map(function(tu,Fl){for(var Ys=tu.featureIdx,ku=tu.vertices,Bu=tu.normals,Gl=ku.length/Ts,ru=[],pl=0;pl<Gl;pl++){var ef=Bu?Bu.slice(pl*3,pl*3+3):[];ru.push.apply(ru,(0,ir.Z)(zn(mt[Ys],Ys,ku.slice(pl*Ts,pl*Ts+Ts),Fl,ef)))}return ru}).reduce(function(tu,Fl){return tu.push.apply(tu,(0,ir.Z)(Fl)),tu},[]);_n.vertexAttribute.updateBuffer({data:Mc,offset:_u}),en==null||en.emit("legend:".concat(xt),{type:xt,attr:_n})}}}},{key:"createAttributesAndIndicesAscy",value:function(xt,mt,Ht){var or=this;this.featureLayout={sizePerElement:0,elements:[]};var en=this.attributes.map(function(Ja){return Ja.resetDescriptor(),Ja.descriptor}).filter(function(Ja){return Ja}),_n=Ht.modelType,Tn=(0,Mn.Z)(Ht,wn),zn=this.rendererService,wi=zn.createAttribute,Xi=zn.createBuffer,ba=zn.createElements,mo={};return new Promise(function(Ja,Ds){(0,fe.hH)(_n,(0,L.Z)({descriptors:or.getDescriptorsWithOutFunc(en),features:xt,segmentNumber:mt},Tn)).then(function(Ts){Ts.descriptors.forEach(function(Iu,_u){if(Iu){var Mc=Iu.buffer,tu=Iu.update,Fl=Iu.name,Ys=(0,Mn.Z)(Iu,Kn),ku=wi((0,L.Z)({buffer:Xi(Mc)},Ys));mo[Iu.name||""]=ku,or.attributes[_u].vertexAttribute=ku}}),or.featureLayout=Ts.featureLayout;var lu=ba({data:Ts.indices,type:za.UNSIGNED_INT,count:Ts.indices.length});or.attributesAndIndices={attributes:mo,elements:lu,count:null},Ja(or.attributesAndIndices)}).catch(function(Ts){console.warn(Ts),Ds(Ts)})})}},{key:"createAttributesAndIndices",value:function(xt,mt,Ht){var or=this;this.featureLayout={sizePerElement:0,elements:[]},mt&&(this.triangulation=mt);var en=this.attributes.map(function(_u){return _u.resetDescriptor(),_u.descriptor}),_n=0,Tn=0,zn=[],wi=[],Xi=[],ba=3;xt.forEach(function(_u,Mc){var tu=or.triangulation(_u,Ht),Fl=tu.indices,Ys=tu.vertices,ku=tu.normals,Bu=tu.size,Gl=tu.indexes,ru=tu.count;typeof ru=="number"&&(Tn+=ru),Fl.forEach(function(hc){wi.push(hc+_n)}),ba=Bu;var pl=Ys.length/Bu;or.featureLayout.sizePerElement=ba,or.featureLayout.elements.push({featureIdx:Mc,vertices:Ys,normals:ku,offset:_n}),_n+=pl;for(var ef=function(uh){var Kf=(ku==null?void 0:ku.slice(uh*3,uh*3+3))||[],gh=Ys.slice(uh*Bu,uh*Bu+Bu),yh=0;Gl&&Gl[uh]!==void 0&&(yh=Gl[uh]),en.forEach(function(Yf,dc){if(Yf&&Yf.update){var ne;(ne=Yf.buffer.data).push.apply(ne,(0,ir.Z)(Yf.update(_u,Mc,gh,uh,Kf,yh)))}})},Bh=0;Bh<pl;Bh++)ef(Bh)});var mo=this.rendererService,Ja=mo.createAttribute,Ds=mo.createBuffer,Ts=mo.createElements,lu={};en.forEach(function(_u,Mc){if(_u){var tu=_u.buffer,Fl=_u.update,Ys=_u.name,ku=(0,Mn.Z)(_u,Ei),Bu=Ja((0,L.Z)({buffer:Ds(tu)},ku));lu[_u.name||""]=Bu,or.attributes[Mc].vertexAttribute=Bu}});var Iu=Ts({data:wi,type:za.UNSIGNED_INT,count:wi.length});return this.attributesAndIndices={attributes:lu,elements:Iu,count:Tn},this.attributesAndIndices}},{key:"createAttributes",value:function(xt,mt){var Ht=this;this.featureLayout={sizePerElement:0,elements:[]},mt&&(this.triangulation=mt);var or=this.attributes.map(function(mo){return mo.resetDescriptor(),mo.descriptor}),en=0,_n=[],Tn=3;xt.forEach(function(mo,Ja){var Ds=Ht.triangulation(mo),Ts=Ds.indices,lu=Ds.vertices,Iu=Ds.normals,_u=Ds.size,Mc=Ds.indexes;Ts.forEach(function(ku){_n.push(ku+en)}),Tn=_u;var tu=lu.length/_u;Ht.featureLayout.sizePerElement=Tn,Ht.featureLayout.elements.push({featureIdx:Ja,vertices:lu,normals:Iu,offset:en}),en+=tu;for(var Fl=function(Bu){var Gl=(Iu==null?void 0:Iu.slice(Bu*3,Bu*3+3))||[],ru=lu.slice(Bu*_u,Bu*_u+_u),pl=0;Mc&&Mc[Bu]!==void 0&&(pl=Mc[Bu]),or.forEach(function(ef,Bh){if(ef&&ef.update){var hc;(hc=ef.buffer.data).push.apply(hc,(0,ir.Z)(ef.update(mo,Ja,ru,Bu,Gl,pl)))}})},Ys=0;Ys<tu;Ys++)Fl(Ys)});var zn=this.rendererService,wi=zn.createAttribute,Xi=zn.createBuffer,ba={};return or.forEach(function(mo,Ja){if(mo){var Ds=mo.buffer,Ts=mo.update,lu=mo.name,Iu=(0,Mn.Z)(mo,Ji),_u=wi((0,L.Z)({buffer:Xi(Ds)},Iu));ba[mo.name||""]=_u,Ht.attributes[Ja].vertexAttribute=_u}}),{attributes:ba}}},{key:"clearAllAttributes",value:function(){var xt;this.attributes.forEach(function(mt){mt.vertexAttribute&&mt.vertexAttribute.destroy()}),(xt=this.attributesAndIndices)===null||xt===void 0||xt.elements.destroy(),this.attributes=[]}},{key:"getDescriptorsWithOutFunc",value:function(xt){return xt.map(function(mt){return{buffer:mt.buffer,name:mt.name,size:mt.size}})}}]),oe}(),yt=(0,on.Z)(de.prototype,"rendererService",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de))||k),Mr=m(46343),qr=m(67709),kn=m.n(qr),Nn,Mi,Bi,io,co,Sa,Ko,wo,Oo,Ho,Io,qs,Il,Ao,Va,gs,Ws,bs,Ps,Xs,gl,jf,Mu,yl,lc,Lc,dh,_l,Us,th,kf,wf,lf,gd,Kh;function yc(oe){var Br=Eh();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Eh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var cf=(Nn=(0,$.b2)(),Mi=(0,$.f3)(z.SceneID),Bi=(0,$.f3)(z.IIconService),io=(0,$.f3)(z.IFontService),co=(0,$.f3)(z.IControlService),Sa=(0,$.f3)(z.IGlobalConfigService),Ko=(0,$.f3)(z.IMapService),wo=(0,$.f3)(z.ICoordinateSystemService),Oo=(0,$.f3)(z.IRendererService),Ho=(0,$.f3)(z.ILayerService),Io=(0,$.f3)(z.IDebugService),qs=(0,$.f3)(z.ICameraService),Il=(0,$.f3)(z.IInteractionService),Ao=(0,$.f3)(z.IPickingService),Va=(0,$.f3)(z.IShaderModuleService),gs=(0,$.f3)(z.IMarkerService),Ws=(0,$.f3)(z.IPopupService),Nn(bs=(Ps=function(oe){(0,ue.Z)(xt,oe);var Br=yc(xt);function xt(){var mt;return(0,T.Z)(this,xt),mt=Br.call(this),(0,pe.Z)((0,F.Z)(mt),"destroyed",!1),(0,pe.Z)((0,F.Z)(mt),"loaded",!1),(0,Gr.Z)((0,F.Z)(mt),"id",Xs,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"iconService",gl,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"fontService",jf,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"controlService",Mu,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"configService",yl,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"map",lc,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"coordinateSystemService",Lc,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"rendererService",dh,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"layerService",_l,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"debugService",Us,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"cameraService",th,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"interactionService",kf,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"pickingService",wf,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"shaderModuleService",lf,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"markerService",gd,(0,F.Z)(mt)),(0,Gr.Z)((0,F.Z)(mt),"popupService",Kh,(0,F.Z)(mt)),(0,pe.Z)((0,F.Z)(mt),"inited",!1),(0,pe.Z)((0,F.Z)(mt),"initPromise",void 0),(0,pe.Z)((0,F.Z)(mt),"rendering",!1),(0,pe.Z)((0,F.Z)(mt),"$container",void 0),(0,pe.Z)((0,F.Z)(mt),"canvas",void 0),(0,pe.Z)((0,F.Z)(mt),"markerContainer",void 0),(0,pe.Z)((0,F.Z)(mt),"hooks",void 0),(0,pe.Z)((0,F.Z)(mt),"handleWindowResized",function(){mt.emit("resize"),mt.$container&&(mt.initContainer(),fe.SO.triggerResize(),mt.coordinateSystemService.needRefresh=!0,mt.render())}),(0,pe.Z)((0,F.Z)(mt),"handleMapCameraChanged",function(Ht){mt.cameraService.update(Ht),mt.render()}),mt.hooks={init:new Mr.sX},mt}return(0,O.Z)(xt,[{key:"init",value:function(Ht){var or=this;this.configService.setSceneConfig(this.id,Ht),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return or.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Zt.Z)(He().mark(function en(){return He().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return or.debugService.log("map.mapInitStart",{type:or.map.version}),Tn.next=3,new Promise(function(zn){or.map.onCameraChanged(function(wi){or.cameraService.init(),or.cameraService.update(wi),zn()}),or.map.init()});case 3:or.map.onCameraChanged(or.handleMapCameraChanged),or.map.addMarkerContainer(),or.markerService.addMarkers(),or.markerService.addMarkerLayers(),or.popupService.initPopup(),or.interactionService.init(),or.interactionService.on(Da.Drag,or.addSceneEvent.bind(or));case 10:case"end":return Tn.stop()}},en)}))),this.hooks.init.tapPromise("initRenderer",(0,Zt.Z)(He().mark(function en(){var _n,Tn;return He().wrap(function(wi){for(;;)switch(wi.prev=wi.next){case 0:if(_n=or.map.getOverlayContainer(),_n?or.$container=_n:or.$container=Go(or.configService.getSceneConfig(or.id).id||""),!or.$container){wi.next=13;break}return or.canvas=fe.SO.create("canvas","",or.$container),or.setCanvas(),wi.next=7,or.rendererService.init(or.canvas,or.configService.getSceneConfig(or.id),Ht.gl);case 7:or.registerContextLost(),or.initContainer(),kn()(or.$container,or.handleWindowResized),fe.vO.matchMedia&&((Tn=fe.vO.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||Tn===void 0||Tn.addListener(or.handleWindowResized)),wi.next=14;break;case 13:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 14:or.pickingService.init(or.id);case 15:case"end":return wi.stop()}},en)}))),this.render()}},{key:"registerContextLost",value:function(){var Ht=this,or=this.rendererService.getCanvas();or&&or.addEventListener("webglcontextlost",function(){return Ht.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(Ht){var or=this;this.configService.setSceneConfig(this.id,Ht),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return or.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Zt.Z)(He().mark(function en(){return He().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.next=2,new Promise(function(zn){or.map.onCameraChanged(function(wi){or.cameraService.init(),or.cameraService.update(wi),or.map.version!=="GAODE2.x"&&zn()}),or.map.initMiniMap()});case 2:or.map.onCameraChanged(or.handleMapCameraChanged),or.interactionService.init(),or.interactionService.on(Da.Drag,or.addSceneEvent.bind(or));case 5:case"end":return Tn.stop()}},en)}))),this.hooks.init.tapPromise("initRenderer",(0,Zt.Z)(He().mark(function en(){var _n;return He().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:if(_n=Ht.canvas,or.$container=_n||null,!or.$container){zn.next=7;break}return zn.next=5,or.rendererService.init(Ht.canvas,or.configService.getSceneConfig(or.id),void 0);case 5:zn.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:or.pickingService.init(or.id);case 9:case"end":return zn.stop()}},en)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(Ht){this.layerService.sceneService=this,this.layerService.add(Ht)}},{key:"addMask",value:function(Ht){this.layerService.sceneService=this,this.layerService.addMask(Ht)}},{key:"render",value:function(){var mt=(0,Zt.Z)(He().mark(function or(){return He().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:if(!(this.rendering||this.destroyed)){_n.next=2;break}return _n.abrupt("return");case 2:if(this.rendering=!0,this.inited){_n.next=16;break}return _n.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),_n.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,_n.next=20;break;case 16:return _n.next=18,this.layerService.initLayers();case 18:return _n.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return _n.stop()}},or,this)}));function Ht(){return mt.apply(this,arguments)}return Ht}()},{key:"addFontFace",value:function(Ht,or){this.fontService.addFontFace(Ht,or)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var mt=(0,Zt.Z)(He().mark(function or(en){var _n,Tn,zn;return He().wrap(function(Xi){for(;;)switch(Xi.prev=Xi.next){case 0:return Tn=(_n=this.$container)===null||_n===void 0?void 0:_n.getElementsByTagName("canvas")[0],Xi.next=3,this.render();case 3:return zn=en==="jpg"?Tn==null?void 0:Tn.toDataURL("image/jpeg"):Tn==null?void 0:Tn.toDataURL("image/png"),Xi.abrupt("return",zn);case 5:case"end":return Xi.stop()}},or,this)}));function Ht(or){return mt.apply(this,arguments)}return Ht}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var Ht=this.$container.parentElement;Ht!==null&&(this.markerContainer=fe.SO.create("div","l7-marker-container",Ht))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var Ht=this,or,en;if(!this.inited){this.destroyed=!0;return}if((0,qr.unbind)(this.$container,this.handleWindowResized),fe.vO.matchMedia){var _n;(_n=fe.vO.matchMedia("screen and (min-resolution: 2dppx)"))===null||_n===void 0||_n.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var Tn;(Tn=Ht.$container)===null||Tn===void 0||Tn.removeChild(Ht.canvas),Ht.canvas=null,Ht.rendererService.destroy()}),(or=this.$container)===null||or===void 0||(en=or.parentNode)===null||en===void 0||en.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var Ht,or,en=fe.SO.DPR,_n=((Ht=this.$container)===null||Ht===void 0?void 0:Ht.clientWidth)||400,Tn=((or=this.$container)===null||or===void 0?void 0:or.clientHeight)||300,zn=this.canvas;zn&&(zn.width=_n*en,zn.height=Tn*en),this.rendererService.viewport({x:0,y:0,width:en*_n,height:en*Tn})}},{key:"setCanvas",value:function(){var Ht,or,en=fe.SO.DPR,_n=((Ht=this.$container)===null||Ht===void 0?void 0:Ht.clientWidth)||400,Tn=((or=this.$container)===null||or===void 0?void 0:or.clientHeight)||300,zn=this.canvas;zn.width=_n*en,zn.height=Tn*en,zn.style.width="100%",zn.style.height="100%"}},{key:"addSceneEvent",value:function(Ht){this.emit(Ht.type,Ht)}}]),xt}(C.EventEmitter),Xs=(0,on.Z)(Ps.prototype,"id",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=(0,on.Z)(Ps.prototype,"iconService",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=(0,on.Z)(Ps.prototype,"fontService",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mu=(0,on.Z)(Ps.prototype,"controlService",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=(0,on.Z)(Ps.prototype,"configService",[Sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lc=(0,on.Z)(Ps.prototype,"map",[Ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lc=(0,on.Z)(Ps.prototype,"coordinateSystemService",[wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dh=(0,on.Z)(Ps.prototype,"rendererService",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_l=(0,on.Z)(Ps.prototype,"layerService",[Ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Us=(0,on.Z)(Ps.prototype,"debugService",[Io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),th=(0,on.Z)(Ps.prototype,"cameraService",[qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kf=(0,on.Z)(Ps.prototype,"interactionService",[Il],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=(0,on.Z)(Ps.prototype,"pickingService",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lf=(0,on.Z)(Ps.prototype,"shaderModuleService",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=(0,on.Z)(Ps.prototype,"markerService",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh=(0,on.Z)(Ps.prototype,"popupService",[Ws],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ps))||bs);function Af(oe){var Br=0;switch(oe){case"vec2":case"ivec2":Br=2;break;case"vec3":case"ivec3":Br=3;break;case"vec4":case"ivec4":case"mat2":Br=4;break;case"mat3":Br=9;break;case"mat4":Br=16;break;default:}return Br}var _f=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Dc(oe){var Br={};return oe=oe.replace(_f,function(xt,mt,Ht){var or=Ht.split(":"),en=or[0].trim(),_n="";switch(or.length>1&&(_n=or[1].trim()),mt){case"bool":_n=_n==="true";break;case"float":case"int":_n=Number(_n);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":_n?_n=_n.replace("[","").replace("]","").split(",").reduce(function(Tn,zn){return Tn.push(Number(zn.trim())),Tn},[]):_n=new Array(Af(mt)).fill(0);break;default:}return Br[en]=_n,"uniform ".concat(mt," ").concat(en,`;
`)}),{content:oe,uniforms:Br}}var Ff,Zl,kc="#define PI 3.14159265359",ad=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,rh=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,od=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Yo=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Gs=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,Kl=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,dl=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,su=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Fc=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,tc=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,Tf=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,_c=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,Hl=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,ff=/precision\s+(high|low|medium)p\s+float/,xc=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Yh=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Uh=(Ff=(0,$.b2)(),Ff(Zl=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"moduleCache",{}),(0,pe.Z)(this,"rawContentCache",{})}return(0,O.Z)(oe,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:kc,fs:kc}),this.registerModule("decode",{vs:ad,fs:""}),this.registerModule("projection",{vs:dl,fs:""}),this.registerModule("project",{vs:Kl,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:su}),this.registerModule("lighting",{vs:od,fs:""}),this.registerModule("light",{vs:rh,fs:""}),this.registerModule("picking",{vs:Gs,fs:Yo}),this.registerModule("styleMapping",{vs:Fc,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:Hl,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:tc,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:Tf,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:_c,fs:""})}},{key:"registerModule",value:function(xt,mt){if(!this.rawContentCache[xt]){var Ht=mt.vs,or=mt.fs,en=mt.uniforms,_n=Dc(Ht),Tn=_n.content,zn=_n.uniforms,wi=Dc(or),Xi=wi.content,ba=wi.uniforms;this.rawContentCache[xt]={fs:Xi,uniforms:(0,L.Z)((0,L.Z)((0,L.Z)({},zn),ba),en),vs:Tn}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(xt){var mt=this;if(this.moduleCache[xt])return this.moduleCache[xt];var Ht=this.rawContentCache[xt].vs,or=this.rawContentCache[xt].fs,en=this.processModule(Ht,[],"vs"),_n=en.content,Tn=en.includeList,zn=this.processModule(or,[],"fs"),wi=zn.content,Xi=zn.includeList,ba=wi,mo=(0,xe.uniq)(Tn.concat(Xi).concat(xt)).reduce(function(Ja,Ds){return(0,L.Z)((0,L.Z)({},Ja),mt.rawContentCache[Ds].uniforms)},{});return ff.test(wi)||(ba=xc+wi),this.moduleCache[xt]={fs:ba.trim(),uniforms:mo,vs:_n.trim()},this.moduleCache[xt]}},{key:"processModule",value:function(xt,mt,Ht){var or=this,en=xt.replace(Yh,function(_n,Tn){var zn=Tn.split(" "),wi=zn[0].replace(/"/g,"");if(mt.indexOf(wi)>-1)return"";var Xi=or.rawContentCache[wi][Ht];mt.push(wi);var ba=or.processModule(Xi,mt,Ht),mo=ba.content;return mo});return{content:en,includeList:mt}}}]),oe}())||Zl),Gc=m(73237),Mf;(function(oe){oe.Normal="normal",oe.PostProcessing="post-processing"})(Mf||(Mf={}));var nh,Qn,fa=(nh=(0,$.b2)(),nh(Qn=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"shaderModuleService",void 0),(0,pe.Z)(this,"rendererService",void 0),(0,pe.Z)(this,"cameraService",void 0),(0,pe.Z)(this,"mapService",void 0),(0,pe.Z)(this,"interactionService",void 0),(0,pe.Z)(this,"layerService",void 0),(0,pe.Z)(this,"config",void 0)}return(0,O.Z)(oe,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Mf.Normal}},{key:"init",value:function(xt,mt){this.config=mt,this.rendererService=xt.getContainer().get(z.IRendererService),this.cameraService=xt.getContainer().get(z.ICameraService),this.mapService=xt.getContainer().get(z.IMapService),this.interactionService=xt.getContainer().get(z.IInteractionService),this.layerService=xt.getContainer().get(z.ILayerService),this.shaderModuleService=xt.getContainer().get(z.IShaderModuleService)}},{key:"render",value:function(xt){}}]),oe}())||Qn),$i,$o;function lo(oe){var Br=Es();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var tl=($i=(0,$.b2)(),$i($o=function(oe){(0,ue.Z)(xt,oe);var Br=lo(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(Ht,or){(0,Gc.Z)((0,re.Z)(xt.prototype),"init",this).call(this,Ht,or)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),xt}(fa))||$o),al,Tl,Lh,xf,Qh;function $h(oe,Br){var xt=typeof Symbol!="undefined"&&oe[Symbol.iterator]||oe["@@iterator"];if(!xt){if(Array.isArray(oe)||(xt=Ul(oe))||Br&&oe&&typeof oe.length=="number"){xt&&(oe=xt);var mt=0,Ht=function(){};return{s:Ht,n:function(){return mt>=oe.length?{done:!0}:{done:!1,value:oe[mt++]}},e:function(zn){throw zn},f:Ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var or=!0,en=!1,_n;return{s:function(){xt=xt.call(oe)},n:function(){var zn=xt.next();return or=zn.done,zn},e:function(zn){en=!0,_n=zn},f:function(){try{!or&&xt.return!=null&&xt.return()}finally{if(en)throw _n}}}}function Ul(oe,Br){if(oe){if(typeof oe=="string")return Rl(oe,Br);var xt=Object.prototype.toString.call(oe).slice(8,-1);if(xt==="Object"&&oe.constructor&&(xt=oe.constructor.name),xt==="Map"||xt==="Set")return Array.from(oe);if(xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt))return Rl(oe,Br)}}function Rl(oe,Br){(Br==null||Br>oe.length)&&(Br=oe.length);for(var xt=0,mt=new Array(Br);xt<Br;xt++)mt[xt]=oe[xt];return mt}var ol=(al=(0,$.b2)(),Tl=(0,$.f3)(z.IPostProcessor),al(Lh=(xf=function(){function oe(){(0,T.Z)(this,oe),(0,pe.Z)(this,"passes",[]),(0,Gr.Z)(this,"postProcessor",Qh,this),(0,pe.Z)(this,"layer",void 0),(0,pe.Z)(this,"renderFlag",void 0),(0,pe.Z)(this,"width",0),(0,pe.Z)(this,"height",0)}return(0,O.Z)(oe,[{key:"setLayer",value:function(xt){this.layer=xt}},{key:"setRenderFlag",value:function(xt){this.renderFlag=xt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var Br=(0,Zt.Z)(He().mark(function mt(){var Ht,or,en;return He().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:Ht=$h(this.passes),Tn.prev=1,Ht.s();case 3:if((or=Ht.n()).done){Tn.next=9;break}return en=or.value,Tn.next=7,en.render(this.layer);case 7:Tn.next=3;break;case 9:Tn.next=14;break;case 11:Tn.prev=11,Tn.t0=Tn.catch(1),Ht.e(Tn.t0);case 14:return Tn.prev=14,Ht.f(),Tn.finish(14);case 17:return Tn.next=19,this.postProcessor.render(this.layer);case 19:case"end":return Tn.stop()}},mt,this,[[1,11,14,17]])}));function xt(){return Br.apply(this,arguments)}return xt}()},{key:"resize",value:function(xt,mt){(this.width!==xt||this.height!==mt)&&(this.postProcessor.resize(xt,mt),this.width=xt,this.height=mt)}},{key:"add",value:function(xt,mt){xt.getType()===Mf.PostProcessing?this.postProcessor.add(xt,this.layer,mt):(xt.init(this.layer,mt),this.passes.push(xt))}},{key:"insert",value:function(xt,mt,Ht){xt.init(this.layer,mt),this.passes.splice(Ht,0,xt)}},{key:"destroy",value:function(){this.passes.length=0}}]),oe}(),Qh=(0,on.Z)(xf.prototype,"postProcessor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xf))||Lh),uu,Bc;function cc(oe){var Br=ao();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function ao(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Ml=(uu=(0,$.b2)(),uu(Bc=function(oe){(0,ue.Z)(xt,oe);var Br=cc(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,pe.Z)((0,F.Z)(mt),"pickingFBO",void 0),(0,pe.Z)((0,F.Z)(mt),"layer",void 0),(0,pe.Z)((0,F.Z)(mt),"width",0),(0,pe.Z)((0,F.Z)(mt),"height",0),(0,pe.Z)((0,F.Z)(mt),"alreadyInRendering",!1),(0,pe.Z)((0,F.Z)(mt),"pickFromPickingFBO",function(_n){var Tn=_n.x,zn=_n.y,wi=_n.lngLat,Xi=_n.type;if(!(!mt.layer.isVisible()||!mt.layer.needPick(Xi))){var ba=mt.rendererService,mo=ba.getViewportSize,Ja=ba.readPixels,Ds=ba.useFramebuffer,Ts=mo(),lu=Ts.width,Iu=Ts.height,_u=mt.layer.getLayerConfig(),Mc=_u.enableHighlight,tu=_u.enableSelect,Fl=Tn*fe.SO.DPR,Ys=zn*fe.SO.DPR;if(!(Fl>lu||Fl<0||Ys>Iu||Ys<0)){var ku;Ds(mt.pickingFBO,function(){var Bu;if(ku=Ja({x:Math.round(Fl),y:Math.round(Iu-(zn+1)*fe.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:mt.pickingFBO}),ku[0]!==0||ku[1]!==0||ku[2]!==0){var Gl=(0,fe.W0)(ku),ru=mt.layer.getSource().getFeatureById(Gl),pl={x:Tn,y:zn,type:Xi,lngLat:wi,featureId:Gl,feature:ru};ru&&(mt.layer.setCurrentPickId(Gl),mt.triggerHoverOnLayer(pl))}else{var ef={x:Tn,y:zn,lngLat:wi,type:mt.layer.getCurrentPickId()===null?"un"+Xi:"mouseout",featureId:null,feature:null};mt.triggerHoverOnLayer((0,L.Z)((0,L.Z)({},ef),{},{type:"unpick"})),mt.triggerHoverOnLayer(ef),mt.layer.setCurrentPickId(null)}Mc&&mt.highlightPickedFeature(ku),tu&&Xi==="click"&&((Bu=ku)===null||Bu===void 0?void 0:Bu.toString())!==[0,0,0,0].toString()&&mt.selectFeature(ku)})}}}),mt}return(0,O.Z)(xt,[{key:"getType",value:function(){return Mf.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(Ht,or){(0,Gc.Z)((0,re.Z)(xt.prototype),"init",this).call(this,Ht,or),this.layer=Ht;var en=this.rendererService,_n=en.createTexture2D,Tn=en.createFramebuffer,zn=en.getViewportSize,wi=zn(),Xi=wi.width,ba=wi.height;this.pickingFBO=Tn({color:_n({width:Xi,height:ba,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.interactionService.on(Da.Hover,this.pickFromPickingFBO),this.interactionService.on(Da.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Da.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(Ht){var or=this;if(!this.alreadyInRendering){var en=this.rendererService,_n=en.getViewportSize,Tn=en.useFramebuffer,zn=en.clear,wi=_n(),Xi=wi.width,ba=wi.height;this.alreadyInRendering=!0,(this.width!==Xi||this.height!==ba)&&(this.pickingFBO.resize({width:Xi,height:ba}),this.width=Xi,this.height=ba),Tn(this.pickingFBO,function(){zn({framebuffer:or.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var mo=or.layer.multiPassRenderer.getRenderFlag();or.layer.multiPassRenderer.setRenderFlag(!1),Ht.hooks.beforePickingEncode.call(),Ht.render(),Ht.hooks.afterPickingEncode.call(),or.layer.multiPassRenderer.setRenderFlag(mo),or.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(Ht){this.layer.emit(Ht.type,Ht)}},{key:"highlightPickedFeature",value:function(Ht){var or=(0,De.Z)(Ht,3),en=or[0],_n=or[1],Tn=or[2];this.layer.hooks.beforeHighlight.call([en,_n,Tn]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(Ht){var or=(0,De.Z)(Ht,3),en=or[0],_n=or[1],Tn=or[2];this.layer.hooks.beforeSelect.call([en,_n,Tn]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(Ht){var or=Ht.featureId,en=(0,fe.Z6)(or);this.selectFeature(new Uint8Array(en))}},{key:"highlightFeatureHandle",value:function(Ht){var or=Ht.featureId,en=(0,fe.Z6)(or);this.highlightPickedFeature(new Uint8Array(en))}}]),xt}(fa))||Bc),Hf,fl,Vl,Ll,jh,Qa=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Yl=(Hf=(0,$.b2)(),fl=(0,$.f3)(z.IShaderModuleService),Hf(Vl=(Ll=function(){function oe(){(0,T.Z)(this,oe),(0,Gr.Z)(this,"shaderModuleService",jh,this),(0,pe.Z)(this,"rendererService",void 0),(0,pe.Z)(this,"config",void 0),(0,pe.Z)(this,"quad",Qa),(0,pe.Z)(this,"enabled",!0),(0,pe.Z)(this,"renderToScreen",!1),(0,pe.Z)(this,"model",void 0),(0,pe.Z)(this,"name",void 0),(0,pe.Z)(this,"optionsToUpdate",{})}return(0,O.Z)(oe,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(xt){this.name=xt}},{key:"getType",value:function(){return Mf.PostProcessing}},{key:"init",value:function(xt,mt){this.config=mt,this.rendererService=xt.getContainer().get(z.IRendererService),this.shaderModuleService=xt.getContainer().get(z.IShaderModuleService);var Ht=this.rendererService,or=Ht.createAttribute,en=Ht.createBuffer,_n=Ht.createModel,Tn=this.setupShaders(),zn=Tn.vs,wi=Tn.fs,Xi=Tn.uniforms;this.model=_n({vs:zn,fs:wi,attributes:{a_Position:or({buffer:en({data:[-4,-4,4,-4,0,4],type:za.FLOAT}),size:2})},uniforms:(0,L.Z)((0,L.Z)({u_Texture:null},Xi),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(xt,mt){var Ht=this,or=xt.multiPassRenderer.getPostProcessor(),en=this.rendererService,_n=en.useFramebuffer,Tn=en.getViewportSize,zn=en.clear,wi=Tn(),Xi=wi.width,ba=wi.height;_n(this.renderToScreen?null:or.getWriteFBO(),function(){zn({framebuffer:or.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var mo=(0,L.Z)({u_BloomFinal:0,u_Texture:or.getReadFBO(),u_ViewportSize:[Xi,ba]},Ht.convertOptionsToUniforms(Ht.optionsToUpdate));mt&&(mo.u_BloomFinal=1,mo.u_Texture2=mt),Ht.model.draw({uniforms:mo})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(xt){this.enabled=xt}},{key:"setRenderToScreen",value:function(xt){this.renderToScreen=xt}},{key:"updateOptions",value:function(xt){this.optionsToUpdate=(0,L.Z)((0,L.Z)({},this.optionsToUpdate),xt)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(xt){var mt={};return Object.keys(xt).forEach(function(Ht){(0,xe.isNil)(xt[Ht])||(mt["u_".concat((0,xe.upperFirst)((0,xe.camelCase)(Ht)))]=xt[Ht])}),mt}}]),oe}(),jh=(0,on.Z)(Ll.prototype,"shaderModuleService",[fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ll))||Vl),Vf,ih;function Vu(oe){var Br=hf();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function hf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Hh=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ec=(Vf=(0,$.b2)(),Vf(ih=function(oe){(0,ue.Z)(xt,oe);var Br=Vu(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:bc,fs:Hh});var Ht=this.shaderModuleService.getModule("blur-pass"),or=Ht.vs,en=Ht.fs,_n=Ht.uniforms,Tn=this.rendererService.getViewportSize(),zn=Tn.width,wi=Tn.height;return{vs:or,fs:en,uniforms:(0,L.Z)((0,L.Z)({},_n),{},{u_ViewportSize:[zn,wi]})}}},{key:"convertOptionsToUniforms",value:function(Ht){var or={};return(0,xe.isNil)(Ht.bloomRadius)||(or.u_radius=Ht.bloomRadius),(0,xe.isNil)(Ht.bloomIntensity)||(or.u_intensity=Ht.bloomIntensity),(0,xe.isNil)(Ht.bloomBaseRadio)||(or.u_baseRadio=Ht.bloomBaseRadio),or}}]),xt}(Yl))||ih),ah,Wc;function Dh(oe){var Br=Sc();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Sc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Vh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Ql=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gu=(ah=(0,$.b2)(),ah(Wc=function(oe){(0,ue.Z)(xt,oe);var Br=Dh(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Ql,fs:Vh});var Ht=this.shaderModuleService.getModule("blur-pass"),or=Ht.vs,en=Ht.fs,_n=Ht.uniforms,Tn=this.rendererService.getViewportSize(),zn=Tn.width,wi=Tn.height;return{vs:or,fs:en,uniforms:(0,L.Z)((0,L.Z)({},_n),{},{u_ViewportSize:[zn,wi]})}}},{key:"convertOptionsToUniforms",value:function(Ht){var or={};return(0,xe.isNil)(Ht.blurRadius)||(or.u_BlurDir=[Ht.blurRadius,0]),or}}]),xt}(Yl))||Wc),Ks,Gf;function Bf(oe){var Br=eu();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function eu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Pl=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Xc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Nc=(Ks=(0,$.b2)(),Ks(Gf=function(oe){(0,ue.Z)(xt,oe);var Br=Bf(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Xc,fs:Pl});var Ht=this.shaderModuleService.getModule("blur-pass"),or=Ht.vs,en=Ht.fs,_n=Ht.uniforms,Tn=this.rendererService.getViewportSize(),zn=Tn.width,wi=Tn.height;return{vs:or,fs:en,uniforms:(0,L.Z)((0,L.Z)({},_n),{},{u_ViewportSize:[zn,wi]})}}},{key:"convertOptionsToUniforms",value:function(Ht){var or={};return(0,xe.isNil)(Ht.blurRadius)||(or.u_BlurDir=[0,Ht.blurRadius]),or}}]),xt}(Yl))||Gf),Jl,fc;function oo(oe){var Br=ko();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function ko(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var nu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,ql=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,xl=(Jl=(0,$.b2)(),Jl(fc=function(oe){(0,ue.Z)(xt,oe);var Br=oo(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:ql,fs:nu});var Ht=this.shaderModuleService.getModule("colorhalftone-pass"),or=Ht.vs,en=Ht.fs,_n=Ht.uniforms,Tn=this.rendererService.getViewportSize(),zn=Tn.width,wi=Tn.height;return{vs:or,fs:en,uniforms:(0,L.Z)((0,L.Z)({},_n),{},{u_ViewportSize:[zn,wi]})}}}]),xt}(Yl))||fc),mu,Ku;function Kc(oe){var Br=Gh();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Gh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Yu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,bl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,yd=(mu=(0,$.b2)(),mu(Ku=function(oe){(0,ue.Z)(xt,oe);var Br=Kc(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:bl,fs:Yu}),this.shaderModuleService.getModule("copy-pass")}}]),xt}(Yl))||Ku),ph,Cc;function Yc(oe){var Br=Dl();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Dl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Ur=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,kl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Vo=(ph=(0,$.b2)(),ph(Cc=function(oe){(0,ue.Z)(xt,oe);var Br=Yc(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:kl,fs:Ur});var Ht=this.shaderModuleService.getModule("hexagonalpixelate-pass"),or=Ht.vs,en=Ht.fs,_n=Ht.uniforms,Tn=this.rendererService.getViewportSize(),zn=Tn.width,wi=Tn.height;return{vs:or,fs:en,uniforms:(0,L.Z)((0,L.Z)({},_n),{},{u_ViewportSize:[zn,wi]})}}}]),xt}(Yl))||Cc),Qo,du;function kh(oe){var Br=Wf();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function Wf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var zc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,df=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,rc=(Qo=(0,$.b2)(),Qo(du=function(oe){(0,ue.Z)(xt,oe);var Br=kh(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:df,fs:zc});var Ht=this.shaderModuleService.getModule("ink-pass"),or=Ht.vs,en=Ht.fs,_n=Ht.uniforms,Tn=this.rendererService.getViewportSize(),zn=Tn.width,wi=Tn.height;return{vs:or,fs:en,uniforms:(0,L.Z)((0,L.Z)({},_n),{},{u_ViewportSize:[zn,wi]})}}}]),xt}(Yl))||du),ys,bf;function Xf(oe){var Br=rl();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function rl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var wc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Zc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,sd=(ys=(0,$.b2)(),ys(bf=function(oe){(0,ue.Z)(xt,oe);var Br=Xf(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Zc,fs:wc}),this.shaderModuleService.getModule("noise-pass")}}]),xt}(Yl))||bf),Qc,f;function g(oe){var Br=p();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function p(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var E=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Y=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,ye=(Qc=(0,$.b2)(),Qc(f=function(oe){(0,ue.Z)(xt,oe);var Br=g(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:E,fs:Y}),this.shaderModuleService.getModule("sepia-pass")}}]),xt}(Yl))||f),Pe,ct,Vt,fr,Ir,Dr,jr=(Pe=(0,$.b2)(),ct=(0,$.f3)(z.IRendererService),Vt=(0,$.zY)(),Pe(fr=(Ir=function(){function oe(){(0,T.Z)(this,oe),(0,Gr.Z)(this,"rendererService",Dr,this),(0,pe.Z)(this,"passes",[]),(0,pe.Z)(this,"readFBO",void 0),(0,pe.Z)(this,"writeFBO",void 0)}return(0,O.Z)(oe,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var xt=this.rendererService,mt=xt.getViewportSize,Ht=xt.createTexture2D,or=mt(),en=or.width,_n=or.height;return Ht({x:0,y:0,width:en,height:_n,copy:!0})}},{key:"getReadFBOTex",value:function(){var xt=this,mt=this.rendererService.useFramebuffer;return new Promise(function(Ht){mt(xt.readFBO,(0,Zt.Z)(He().mark(function or(){return He().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:Ht(xt.getCurrentFBOTex());case 1:case"end":return _n.stop()}},or)})))})}},{key:"renderBloomPass",value:function(){var Br=(0,Zt.Z)(He().mark(function mt(Ht,or){var en,_n;return He().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:return zn.next=2,this.getReadFBOTex();case 2:en=zn.sent,_n=0;case 4:if(!(_n<4)){zn.next=11;break}return zn.next=7,or.render(Ht,en);case 7:this.swap(),_n++,zn.next=4;break;case 11:case"end":return zn.stop()}},mt,this)}));function xt(mt,Ht){return Br.apply(this,arguments)}return xt}()},{key:"render",value:function(){var Br=(0,Zt.Z)(He().mark(function mt(Ht){var or,en;return He().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:or=0;case 1:if(!(or<this.passes.length)){Tn.next=15;break}if(en=this.passes[or],en.setRenderToScreen(this.isLastEnabledPass(or)),en.getName()!=="bloom"){Tn.next=9;break}return Tn.next=7,this.renderBloomPass(Ht,en);case 7:Tn.next=12;break;case 9:return Tn.next=11,en.render(Ht);case 11:or!==this.passes.length-1&&this.swap();case 12:or++,Tn.next=1;break;case 15:case"end":return Tn.stop()}},mt,this)}));function xt(mt){return Br.apply(this,arguments)}return xt}()},{key:"resize",value:function(xt,mt){this.readFBO.resize({width:xt,height:mt}),this.writeFBO.resize({width:xt,height:mt})}},{key:"add",value:function(xt,mt,Ht){xt.init(mt,Ht),this.passes.push(xt)}},{key:"insert",value:function(xt,mt,Ht,or){xt.init(Ht,or),this.passes.splice(mt,0,xt)}},{key:"getPostProcessingPassByName",value:function(xt){return this.passes.find(function(mt){return mt.getName()===xt})}},{key:"init",value:function(){var xt=this.rendererService,mt=xt.createFramebuffer,Ht=xt.createTexture2D;this.readFBO=mt({color:Ht({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.writeFBO=mt({color:Ht({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(xt){for(var mt=xt+1;mt<this.passes.length;mt++)if(this.passes[mt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var xt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=xt}}]),oe}(),Dr=(0,on.Z)(Ir.prototype,"rendererService",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,on.Z)(Ir.prototype,"init",[Vt],Object.getOwnPropertyDescriptor(Ir.prototype,"init"),Ir.prototype),Ir))||fr),En,gn;function Bn(oe){var Br=fn();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function fn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Fn=(En=(0,$.b2)(),En(gn=function(oe){(0,ue.Z)(xt,oe);var Br=Bn(xt);function xt(){return(0,T.Z)(this,xt),Br.apply(this,arguments)}return(0,O.Z)(xt,[{key:"getType",value:function(){return Mf.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(Ht,or){(0,Gc.Z)((0,re.Z)(xt.prototype),"init",this).call(this,Ht,or)}},{key:"render",value:function(Ht){var or=this.rendererService,en=or.useFramebuffer,_n=or.clear,Tn=Ht.multiPassRenderer.getPostProcessor().getReadFBO();en(Tn,function(){_n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Tn}),Ht.multiPassRenderer.setRenderFlag(!1),Ht.models.forEach(function(zn){zn.draw({uniforms:Ht.layerModel.getUninforms()})}),Ht.multiPassRenderer.setRenderFlag(!0)})}}]),xt}(fa))||gn),jn,vi,ki,Ti,Fi;function na(oe){var Br=ka();return function(){var mt=(0,re.Z)(oe),Ht;if(Br){var or=(0,re.Z)(this).constructor;Ht=Reflect.construct(mt,arguments,or)}else Ht=mt.apply(this,arguments);return(0,Ae.Z)(this,Ht)}}function ka(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oe){return!1}}var Na=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,po=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,No=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function is(oe,Br){for(var xt=0,mt=1/Br,Ht=oe;Ht>0;)xt=xt+mt*(Ht%Br),Ht=Math.floor(Ht/Br),mt=mt/Br;return xt}var rs=1,Ls=(jn=(0,$.b2)(),vi=(0,$.f3)(z.IShaderModuleService),jn(ki=(Ti=function(oe){(0,ue.Z)(xt,oe);var Br=na(xt);function xt(){var mt;(0,T.Z)(this,xt);for(var Ht=arguments.length,or=new Array(Ht),en=0;en<Ht;en++)or[en]=arguments[en];return mt=Br.call.apply(Br,[this].concat(or)),(0,Gr.Z)((0,F.Z)(mt),"shaderModuleService",Fi,(0,F.Z)(mt)),(0,pe.Z)((0,F.Z)(mt),"haltonSequence",[]),(0,pe.Z)((0,F.Z)(mt),"accumulatingId",0),(0,pe.Z)((0,F.Z)(mt),"frame",0),(0,pe.Z)((0,F.Z)(mt),"timer",void 0),(0,pe.Z)((0,F.Z)(mt),"sampleRenderTarget",void 0),(0,pe.Z)((0,F.Z)(mt),"prevRenderTarget",void 0),(0,pe.Z)((0,F.Z)(mt),"outputRenderTarget",void 0),(0,pe.Z)((0,F.Z)(mt),"copyRenderTarget",void 0),(0,pe.Z)((0,F.Z)(mt),"blendModel",void 0),(0,pe.Z)((0,F.Z)(mt),"outputModel",void 0),(0,pe.Z)((0,F.Z)(mt),"copyModel",void 0),mt}return(0,O.Z)(xt,[{key:"getType",value:function(){return Mf.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(Ht,or){(0,Gc.Z)((0,re.Z)(xt.prototype),"init",this).call(this,Ht,or);var en=this.rendererService,_n=en.createFramebuffer,Tn=en.createTexture2D;this.sampleRenderTarget=_n({color:Tn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.prevRenderTarget=_n({color:Tn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.outputRenderTarget=_n({color:Tn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})}),this.copyRenderTarget=_n({color:Tn({width:1,height:1,wrapS:za.CLAMP_TO_EDGE,wrapT:za.CLAMP_TO_EDGE})});for(var zn=0;zn<30;zn++)this.haltonSequence.push([is(zn,2),is(zn,3)]);this.blendModel=this.createTriangleModel("blend-pass",Na),this.outputModel=this.createTriangleModel("copy-pass",po,{blend:{enable:!0,func:{srcRGB:za.ONE,dstRGB:za.ONE_MINUS_SRC_ALPHA,srcAlpha:za.ONE,dstAlpha:za.ONE_MINUS_SRC_ALPHA},equation:{rgb:za.FUNC_ADD,alpha:za.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",po)}},{key:"render",value:function(Ht){var or=this,en=this.rendererService,_n=en.clear,Tn=en.getViewportSize,zn=en.useFramebuffer,wi=Tn(),Xi=wi.width,ba=wi.height;this.sampleRenderTarget.resize({width:Xi,height:ba}),this.prevRenderTarget.resize({width:Xi,height:ba}),this.outputRenderTarget.resize({width:Xi,height:ba}),this.copyRenderTarget.resize({width:Xi,height:ba}),this.resetFrame(),this.stopAccumulating();var mo=Ht.multiPassRenderer.getPostProcessor().getReadFBO();zn(mo,function(){_n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:mo}),Ht.multiPassRenderer.setRenderFlag(!1),Ht.render(),Ht.multiPassRenderer.setRenderFlag(!0)});var Ja=function Ds(Ts){!or.accumulatingId||Ts!==or.accumulatingId||or.isFinished()||(or.doRender(Ht),fe.vO.requestAnimationFrame(function(){Ds(Ts)}))};this.accumulatingId=rs++,this.timer=fe.vO.setTimeout(function(){Ja(or.accumulatingId)},50)}},{key:"doRender",value:function(Ht){var or=this,en=this.rendererService,_n=en.clear,Tn=en.getViewportSize,zn=en.useFramebuffer,wi=Tn(),Xi=wi.width,ba=wi.height,mo=Ht.getLayerConfig(),Ja=mo.jitterScale,Ds=Ja===void 0?1:Ja,Ts=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Ts[0]*2-1)/Xi*Ds,(Ts[1]*2-1)/ba*Ds),Ht.multiPassRenderer.setRenderFlag(!1),Ht.hooks.beforeRender.call(),zn(this.sampleRenderTarget,function(){_n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:or.sampleRenderTarget}),Ht.render()}),Ht.hooks.afterRender.call(),Ht.multiPassRenderer.setRenderFlag(!0);var lu=Ht.getLayerConfig();zn(this.outputRenderTarget,function(){or.blendModel.draw({uniforms:{u_opacity:lu.opacity||1,u_MixRatio:or.frame===0?1:.9,u_Diffuse1:or.sampleRenderTarget,u_Diffuse2:or.frame===0?Ht.multiPassRenderer.getPostProcessor().getReadFBO():or.prevRenderTarget}})}),this.frame===0&&_n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(zn(this.copyRenderTarget,function(){or.outputModel.draw({uniforms:{u_Texture:or.outputRenderTarget}})}),zn(Ht.multiPassRenderer.getPostProcessor().getReadFBO(),function(){or.copyModel.draw({uniforms:{u_Texture:or.copyRenderTarget}})}),Ht.multiPassRenderer.getPostProcessor().render(Ht));var Iu=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Iu,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,fe.vO.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(Ht,or,en){this.shaderModuleService.registerModule(Ht,{vs:No,fs:or});var _n=this.shaderModuleService.getModule(Ht),Tn=_n.vs,zn=_n.fs,wi=_n.uniforms,Xi=this.rendererService,ba=Xi.createAttribute,mo=Xi.createBuffer,Ja=Xi.createModel;return Ja((0,L.Z)({vs:Tn,fs:zn,attributes:{a_Position:ba({buffer:mo({data:[-4,-4,4,-4,0,4],type:za.FLOAT}),size:2})},uniforms:(0,L.Z)({},wi),depth:{enable:!1},count:3},en))}}]),xt}(fa),Fi=(0,on.Z)(Ti.prototype,"shaderModuleService",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ti))||ki),vo=new $.W2;vo.bind(z.IGlobalConfigService).to(Ge).inSingletonScope(),(0,$.GW)((0,$.b2)(),C.EventEmitter),vo.bind(z.IEventEmitter).to(C.EventEmitter);var ds=(0,R.Z)(vo,!1),Ns=function(Br){var xt=ds.lazyInject(Br);return function(mt,Ht,or){xt.call(this,mt,Ht),or&&(or.initializer=function(){return mt[Ht]})}},cs=function(Br){var xt=ds.lazyMultiInject(Br);return function(mt,Ht,or){xt.call(this,mt,Ht),or&&(or.initializer=function(){return mt[Ht]})}},Jo=vo,$s=0;function ws(){var oe=new $.W2;return oe.parent=vo,oe.bind(z.SceneID).toConstantValue("".concat($s++)),oe.bind(z.IShaderModuleService).to(Uh).inSingletonScope(),oe.bind(z.ILayerService).to(Rr).inSingletonScope(),oe.bind(z.IDebugService).to(Aa).inSingletonScope(),oe.bind(z.ISceneService).to(cf).inSingletonScope(),oe.bind(z.ICameraService).to(Qt).inSingletonScope(),oe.bind(z.ICoordinateSystemService).to(Pn).inSingletonScope(),oe.bind(z.IInteractionService).to(qo).inSingletonScope(),oe.bind(z.IPickingService).to(Zr).inSingletonScope(),oe.bind(z.IControlService).to(kr).inSingletonScope(),oe.bind(z.IMarkerService).to(Or).inSingletonScope(),oe.bind(z.IIconService).to(W).inSingletonScope(),oe.bind(z.IFontService).to(Et).inSingletonScope(),oe.bind(z.IPopupService).to(Xe).inSingletonScope(),oe.bind(z.INormalPass).to(tl).whenTargetNamed("clear"),oe.bind(z.INormalPass).to(Ml).whenTargetNamed("pixelPicking"),oe.bind(z.INormalPass).to(Fn).whenTargetNamed("render"),oe.bind(z.INormalPass).to(Ls).whenTargetNamed("taa"),oe.bind(z.IFactoryNormalPass).toFactory(function(Br){return function(xt){return Br.container.getNamed(z.INormalPass,xt)}}),oe.bind(z.IPostProcessingPass).to(yd).whenTargetNamed("copy"),oe.bind(z.IPostProcessingPass).to(Ec).whenTargetNamed("bloom"),oe.bind(z.IPostProcessingPass).to(gu).whenTargetNamed("blurH"),oe.bind(z.IPostProcessingPass).to(Nc).whenTargetNamed("blurV"),oe.bind(z.IPostProcessingPass).to(sd).whenTargetNamed("noise"),oe.bind(z.IPostProcessingPass).to(ye).whenTargetNamed("sepia"),oe.bind(z.IPostProcessingPass).to(xl).whenTargetNamed("colorHalftone"),oe.bind(z.IPostProcessingPass).to(Vo).whenTargetNamed("hexagonalPixelate"),oe.bind(z.IPostProcessingPass).to(rc).whenTargetNamed("ink"),oe.bind(z.IFactoryPostProcessingPass).toFactory(function(Br){return function(xt){var mt=Br.container.getNamed(z.IPostProcessingPass,xt);return mt.setName(xt),mt}}),oe}function _s(oe){var Br=new $.W2;return Br.parent=oe,Br.bind(z.IStyleAttributeService).to(nr).inSingletonScope(),Br.bind(z.IMultiPassRenderer).to(ol).inSingletonScope(),Br.bind(z.IPostProcessor).to(jr).inSingletonScope(),Br}var El=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function nl(oe){return El.indexOf(oe)}var Qu=2,Ac=4,Ju=64,qu=128,Tc=256,ec=512,Pf=8192,Ef=16384,$l=32768,Uc=null,Jh=131072,qh=262144,Sh=524288,Of=1048576,Ch=2097152,pf=4194304,oh=8388608,Jc=16777216,nc=null;function ic(oe,Br){return oe=(0,xe.clamp)(Math.floor(oe),0,255),Br=(0,xe.clamp)(Math.floor(Br),0,255),256*oe+Br}function wh(oe){var Br=oe.color,xt=oe.radius,mt=oe.tileX,Ht=oe.tileY,or=oe.shape,en=oe.opacity,_n=oe.stroke,Tn=oe.strokeWidth,zn=oe.strokeOpacity,wi=[],Xi=[],ba=[],mo=[ic(Br[0],Br[1]),ic(Br[2],Br[3])],Ja=[ic(_n[0],_n[1]),ic(_n[2],_n[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(Ds){var Ts=(0,De.Z)(Ds,2),lu=Ts[0],Iu=Ts[1];wi.push([].concat(mo,[(lu+1)*oh+(Iu+1)*Ch+nl(or)*Jh+xt,(mt+512)*Sh+(Ht+512)*Ju])),Xi.push([].concat(Ja,[Tn,zn])),ba.push([en,0,0,0])}),{packedBuffer:wi,packedBuffer2:Xi,packedBuffer3:ba}}function Fh(oe,Br){if(oe===0&&!Br)return 0;if(oe===1&&Br)return 4294967295;var xt=Br?1:0,mt=Math.floor(oe*127);return mt*nc+xt*Jc+mt*Jh+xt*Uc+mt*ec+xt*Tc+mt*Qu+xt}var Du={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},yu={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},qc;(function(oe){oe.normal="normal",oe.additive="additive",oe.subtractive="subtractive",oe.min="min",oe.max="max",oe.none="none"})(qc||(qc={}));var sh;(function(oe){oe.INIT="init",oe.UPDATE="update"})(sh||(sh={}));var vh;(function(oe){oe.LINEAR="linear",oe.SEQUENTIAL="sequential",oe.POWER="power",oe.LOG="log",oe.IDENTITY="identity",oe.TIME="time",oe.QUANTILE="quantile",oe.QUANTIZE="quantize",oe.THRESHOLD="threshold",oe.CAT="cat",oe.DIVERGING="diverging"})(vh||(vh={}));var Nf;(function(oe){oe.CONSTANT="constant",oe.VARIABLE="variable"})(Nf||(Nf={}));var mh;(function(oe){oe[oe.Attribute=0]="Attribute",oe[oe.InstancedAttribute=1]="InstancedAttribute",oe[oe.Uniform=2]="Uniform"})(mh||(mh={}));var If=["mapload","mapchange","mapAfterFrameChange"],Rf=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],vf;(function(oe){oe.IMAGE="image",oe.ARRAYBUFFER="arraybuffer",oe.RGB="rgb",oe.CUSTOMRGB="customRGB",oe.CUSTOMARRAYBUFFER="customArrayBuffer"})(vf||(vf={}))},67135:function(Qe,te,m){(function(v,C){C(te,m(70844))})(this,function(v,C){"use strict";var l={draw:"crosshair",pointHover:"pointer",pointDrag:"move",lineHover:"pointer",lineDrag:"move",polygonHover:"pointer",polygonDrag:"move"},$={point:[],line:[],polygon:[],midPoint:[],dashLine:[],text:[]},R="top",z="bottom",L="right",T="left",O="auto",F=[R,z,L,T],ue="start",Ae="end",re="viewport",pe="popper",fe=F.reduce(function(b,M){return b.concat([M+"-"+ue,M+"-"+Ae])},[]),ke=[].concat(F,[O]).reduce(function(b,M){return b.concat([M,M+"-"+ue,M+"-"+Ae])},[]),je=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function bt(b){return b?(b.nodeName||"").toLowerCase():null}function ut(b){if(b==null)return window;if(""+b!="[object Window]"){var M=b.ownerDocument;return M&&M.defaultView||window}return b}function wt(b){return b instanceof ut(b).Element||b instanceof Element}function se(b){return b instanceof ut(b).HTMLElement||b instanceof HTMLElement}function qe(b){return typeof ShadowRoot!="undefined"&&(b instanceof ut(b).ShadowRoot||b instanceof ShadowRoot)}var me={name:"applyStyles",enabled:!0,phase:"write",fn:function(b){var M=b.state;Object.keys(M.elements).forEach(function(D){var P=M.styles[D]||{},V=M.attributes[D]||{},q=M.elements[D];se(q)&&bt(q)&&(Object.assign(q.style,P),Object.keys(V).forEach(function(be){var $e=V[be];$e===!1?q.removeAttribute(be):q.setAttribute(be,$e===!0?"":$e)}))})},effect:function(b){var M=b.state,D={popper:{position:M.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(M.elements.popper.style,D.popper),M.styles=D,M.elements.arrow&&Object.assign(M.elements.arrow.style,D.arrow),function(){Object.keys(M.elements).forEach(function(P){var V=M.elements[P],q=M.attributes[P]||{},be=Object.keys(M.styles.hasOwnProperty(P)?M.styles[P]:D[P]).reduce(function($e,_t){return $e[_t]="",$e},{});se(V)&&bt(V)&&(Object.assign(V.style,be),Object.keys(q).forEach(function($e){V.removeAttribute($e)}))})}},requires:["computeStyles"]};function _e(b){return b.split("-")[0]}var Te=Math.max,ht=Math.min,We=Math.round;function Ne(){var b=navigator.userAgentData;return b!=null&&b.brands?b.brands.map(function(M){return M.brand+"/"+M.version}).join(" "):navigator.userAgent}function he(){return!/^((?!chrome|android).)*safari/i.test(Ne())}function Ve(b,M,D){M===void 0&&(M=!1),D===void 0&&(D=!1);var P=b.getBoundingClientRect(),V=1,q=1;M&&se(b)&&(V=b.offsetWidth>0&&We(P.width)/b.offsetWidth||1,q=b.offsetHeight>0&&We(P.height)/b.offsetHeight||1);var be=(wt(b)?ut(b):window).visualViewport,$e=!he()&&D,_t=(P.left+($e&&be?be.offsetLeft:0))/V,Gt=(P.top+($e&&be?be.offsetTop:0))/q,yr=P.width/V,$r=P.height/q;return{width:yr,height:$r,top:Gt,right:_t+yr,bottom:Gt+$r,left:_t,x:_t,y:Gt}}function ie(b){var M=Ve(b),D=b.offsetWidth,P=b.offsetHeight;return Math.abs(M.width-D)>1||(D=M.width),Math.abs(M.height-P)>1||(P=M.height),{x:b.offsetLeft,y:b.offsetTop,width:D,height:P}}function ze(b,M){var D=M.getRootNode&&M.getRootNode();if(b.contains(M))return!0;if(D&&qe(D)){var P=M;do{if(P&&b.isSameNode(P))return!0;P=P.parentNode||P.host}while(P)}return!1}function Le(b){return ut(b).getComputedStyle(b)}function Re(b){return["table","td","th"].indexOf(bt(b))>=0}function st(b){return((wt(b)?b.ownerDocument:b.document)||window.document).documentElement}function vt(b){return bt(b)==="html"?b:b.assignedSlot||b.parentNode||(qe(b)?b.host:null)||st(b)}function Dt(b){return se(b)&&Le(b).position!=="fixed"?b.offsetParent:null}function ar(b){for(var M=ut(b),D=Dt(b);D&&Re(D)&&Le(D).position==="static";)D=Dt(D);return D&&(bt(D)==="html"||bt(D)==="body"&&Le(D).position==="static")?M:D||function(P){var V=/firefox/i.test(Ne());if(/Trident/i.test(Ne())&&se(P)&&Le(P).position==="fixed")return null;var q=vt(P);for(qe(q)&&(q=q.host);se(q)&&0>["html","body"].indexOf(bt(q));){var be=Le(q);if(be.transform!=="none"||be.perspective!=="none"||be.contain==="paint"||["transform","perspective"].indexOf(be.willChange)!==-1||V&&be.willChange==="filter"||V&&be.filter&&be.filter!=="none")return q;q=q.parentNode}return null}(b)||M}function $t(b){return 0>["top","bottom"].indexOf(b)?"y":"x"}function ur(b,M,D){return Te(b,ht(M,D))}function we(b){return Object.assign({},{top:0,right:0,bottom:0,left:0},b)}function At(b,M){return M.reduce(function(D,P){return D[P]=b,D},{})}var nt={name:"arrow",enabled:!0,phase:"main",fn:function(b){var M,D=b.state,P=b.name,V=b.options,q=D.elements.arrow,be=D.modifiersData.popperOffsets,$e=_e(D.placement),_t=$t($e),Gt=[T,L].indexOf($e)>=0?"height":"width";if(q&&be){var yr=function(pi,gi){return we(typeof(pi=typeof pi=="function"?pi(Object.assign({},gi.rects,{placement:gi.placement})):pi)!="number"?pi:At(pi,F))}(V.padding,D),$r=ie(q),an=_t==="y"?R:T,Un=_t==="y"?z:L,ei=D.rects.reference[Gt]+D.rects.reference[_t]-be[_t]-D.rects.popper[Gt],Jn=be[_t]-D.rects.reference[_t],Sn=ar(q),Xn=Sn?_t==="y"?Sn.clientHeight||0:Sn.clientWidth||0:0,ai=Xn/2-$r[Gt]/2+(ei/2-Jn/2),ln=ur(yr[an],ai,Xn-$r[Gt]-yr[Un]);D.modifiersData[P]=((M={})[_t]=ln,M.centerOffset=ln-ai,M)}},effect:function(b){var M=b.state,D=b.options.element,P=D===void 0?"[data-popper-arrow]":D;P!=null&&(typeof P!="string"||(P=M.elements.popper.querySelector(P)))&&ze(M.elements.popper,P)&&(M.elements.arrow=P)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Lt(b){return b.split("-")[1]}var St={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ut(b){var M,D=b.popper,P=b.popperRect,V=b.placement,q=b.variation,be=b.offsets,$e=b.position,_t=b.gpuAcceleration,Gt=b.adaptive,yr=b.roundOffsets,$r=b.isFixed,an=be.x,Un=an===void 0?0:an,ei=be.y,Jn=ei===void 0?0:ei,Sn=typeof yr=="function"?yr({x:Un,y:Jn}):{x:Un,y:Jn};Un=Sn.x,Jn=Sn.y;var Xn=be.hasOwnProperty("x"),ai=be.hasOwnProperty("y"),ln=T,pi=R,gi=window;if(Gt){var Li=ar(D),Ki="clientHeight",ua="clientWidth";Li===ut(D)&&Le(Li=st(D)).position!=="static"&&$e==="absolute"&&(Ki="scrollHeight",ua="scrollWidth"),(V===R||(V===T||V===L)&&q===Ae)&&(pi=z,Jn-=($r&&Li===gi&&gi.visualViewport?gi.visualViewport.height:Li[Ki])-P.height,Jn*=_t?1:-1),(V===T||(V===R||V===z)&&q===Ae)&&(ln=L,Un-=($r&&Li===gi&&gi.visualViewport?gi.visualViewport.width:Li[ua])-P.width,Un*=_t?1:-1)}var la,Lo=Object.assign({position:$e},Gt&&St),Fa=yr===!0?function(go){var Qs=go.y,e=window.devicePixelRatio||1;return{x:We(go.x*e)/e||0,y:We(Qs*e)/e||0}}({x:Un,y:Jn}):{x:Un,y:Jn};return Un=Fa.x,Jn=Fa.y,Object.assign({},Lo,_t?((la={})[pi]=ai?"0":"",la[ln]=Xn?"0":"",la.transform=(gi.devicePixelRatio||1)>1?"translate3d("+Un+"px, "+Jn+"px, 0)":"translate("+Un+"px, "+Jn+"px)",la):((M={})[pi]=ai?Jn+"px":"",M[ln]=Xn?Un+"px":"",M.transform="",M))}var lt={passive:!0},Et={left:"right",right:"left",bottom:"top",top:"bottom"};function Zt(b){return b.replace(/left|right|bottom|top/g,function(M){return Et[M]})}var Be={start:"end",end:"start"};function He(b){return b.replace(/start|end/g,function(M){return Be[M]})}function ft(b){var M=ut(b);return{scrollLeft:M.pageXOffset,scrollTop:M.pageYOffset}}function Z(b){return Ve(st(b)).left+ft(b).scrollLeft}function J(b){var M=Le(b);return/auto|scroll|overlay|hidden/.test(M.overflow+M.overflowY+M.overflowX)}function K(b){return 0>["html","body","#document"].indexOf(bt(b))?se(b)&&J(b)?b:K(vt(b)):b.ownerDocument.body}function B(b,M){var D;M===void 0&&(M=[]);var P=K(b),V=P===((D=b.ownerDocument)==null?void 0:D.body),q=ut(P),be=V?[q].concat(q.visualViewport||[],J(P)?P:[]):P,$e=M.concat(be);return V?$e:$e.concat(B(vt(be)))}function j(b){return Object.assign({},b,{left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})}function ee(b,M,D){return M===re?j(function(P,V){var q=ut(P),be=st(P),$e=q.visualViewport,_t=be.clientWidth,Gt=be.clientHeight,yr=0,$r=0;if($e){_t=$e.width,Gt=$e.height;var an=he();(an||!an&&V==="fixed")&&(yr=$e.offsetLeft,$r=$e.offsetTop)}return{width:_t,height:Gt,x:yr+Z(P),y:$r}}(b,D)):wt(M)?function(P,V){var q=Ve(P,!1,V==="fixed");return q.top=q.top+P.clientTop,q.left=q.left+P.clientLeft,q.bottom=q.top+P.clientHeight,q.right=q.left+P.clientWidth,q.width=P.clientWidth,q.height=P.clientHeight,q.x=q.left,q.y=q.top,q}(M,D):j(function(P){var V,q=st(P),be=ft(P),$e=(V=P.ownerDocument)==null?void 0:V.body,_t=Te(q.scrollWidth,q.clientWidth,$e?$e.scrollWidth:0,$e?$e.clientWidth:0),Gt=Te(q.scrollHeight,q.clientHeight,$e?$e.scrollHeight:0,$e?$e.clientHeight:0),yr=-be.scrollLeft+Z(P),$r=-be.scrollTop;return Le($e||q).direction==="rtl"&&(yr+=Te(q.clientWidth,$e?$e.clientWidth:0)-_t),{width:_t,height:Gt,x:yr,y:$r}}(st(b)))}function W(b,M,D,P){var V=M==="clippingParents"?function($e){var _t=B(vt($e)),Gt=["absolute","fixed"].indexOf(Le($e).position)>=0&&se($e)?ar($e):$e;return wt(Gt)?_t.filter(function(yr){return wt(yr)&&ze(yr,Gt)&&bt(yr)!=="body"}):[]}(b):[].concat(M),q=[].concat(V,[D]),be=q.reduce(function($e,_t){var Gt=ee(b,_t,P);return $e.top=Te(Gt.top,$e.top),$e.right=ht(Gt.right,$e.right),$e.bottom=ht(Gt.bottom,$e.bottom),$e.left=Te(Gt.left,$e.left),$e},ee(b,q[0],P));return be.width=be.right-be.left,be.height=be.bottom-be.top,be.x=be.left,be.y=be.top,be}function De(b){var M,D=b.reference,P=b.element,V=b.placement,q=V?_e(V):null,be=V?Lt(V):null,$e=D.x+D.width/2-P.width/2,_t=D.y+D.height/2-P.height/2;switch(q){case R:M={x:$e,y:D.y-P.height};break;case z:M={x:$e,y:D.y+D.height};break;case L:M={x:D.x+D.width,y:_t};break;case T:M={x:D.x-P.width,y:_t};break;default:M={x:D.x,y:D.y}}var Gt=q?$t(q):null;if(Gt!=null){var yr=Gt==="y"?"height":"width";switch(be){case ue:M[Gt]=M[Gt]-(D[yr]/2-P[yr]/2);break;case Ae:M[Gt]=M[Gt]+(D[yr]/2-P[yr]/2)}}return M}function ot(b,M){M===void 0&&(M={});var D=M.placement,P=D===void 0?b.placement:D,V=M.strategy,q=V===void 0?b.strategy:V,be=M.boundary,$e=be===void 0?"clippingParents":be,_t=M.rootBoundary,Gt=_t===void 0?re:_t,yr=M.elementContext,$r=yr===void 0?pe:yr,an=M.altBoundary,Un=an!==void 0&&an,ei=M.padding,Jn=ei===void 0?0:ei,Sn=we(typeof Jn!="number"?Jn:At(Jn,F)),Xn=b.rects.popper,ai=b.elements[Un?$r===pe?"reference":pe:$r],ln=W(wt(ai)?ai:ai.contextElement||st(b.elements.popper),$e,Gt,q),pi=Ve(b.elements.reference),gi=De({reference:pi,element:Xn,strategy:"absolute",placement:P}),Li=j(Object.assign({},Xn,gi)),Ki=$r===pe?Li:pi,ua={top:ln.top-Ki.top+Sn.top,bottom:Ki.bottom-ln.bottom+Sn.bottom,left:ln.left-Ki.left+Sn.left,right:Ki.right-ln.right+Sn.right},la=b.modifiersData.offset;if($r===pe&&la){var Lo=la[P];Object.keys(ua).forEach(function(Fa){var go=0>[L,z].indexOf(Fa)?-1:1;ua[Fa]+=Lo[0>[R,z].indexOf(Fa)?"x":"y"]*go})}return ua}function Wt(b,M){M===void 0&&(M={});var D=M.boundary,P=M.rootBoundary,V=M.padding,q=M.flipVariations,be=M.allowedAutoPlacements,$e=be===void 0?ke:be,_t=Lt(M.placement),Gt=_t?q?fe:fe.filter(function(an){return Lt(an)===_t}):F,yr=Gt.filter(function(an){return $e.indexOf(an)>=0});yr.length===0&&(yr=Gt);var $r=yr.reduce(function(an,Un){return an[Un]=ot(b,{placement:Un,boundary:D,rootBoundary:P,padding:V})[_e(Un)],an},{});return Object.keys($r).sort(function(an,Un){return $r[an]-$r[Un]})}var Ct={name:"flip",enabled:!0,phase:"main",fn:function(b){var M=b.state,D=b.options,P=b.name;if(!M.modifiersData[P]._skip){for(var V=D.mainAxis,q=V===void 0||V,be=D.altAxis,$e=be===void 0||be,_t=D.fallbackPlacements,Gt=D.padding,yr=D.boundary,$r=D.rootBoundary,an=D.altBoundary,Un=D.flipVariations,ei=Un===void 0||Un,Jn=D.allowedAutoPlacements,Sn=M.options.placement,Xn=_e(Sn),ai=_t||(Xn===Sn||!ei?[Zt(Sn)]:function(ge){if(_e(ge)===O)return[];var tt=Zt(ge);return[He(ge),tt,He(tt)]}(Sn)),ln=[Sn].concat(ai).reduce(function(ge,tt){return ge.concat(_e(tt)===O?Wt(M,{placement:tt,boundary:yr,rootBoundary:$r,padding:Gt,flipVariations:ei,allowedAutoPlacements:Jn}):tt)},[]),pi=M.rects.reference,gi=M.rects.popper,Li=new Map,Ki=!0,ua=ln[0],la=0;ln.length>la;la++){var Lo=ln[la],Fa=_e(Lo),go=Lt(Lo)===ue,Qs=[R,z].indexOf(Fa)>=0,e=Qs?"width":"height",i=ot(M,{placement:Lo,boundary:yr,rootBoundary:$r,altBoundary:an,padding:Gt}),c=Qs?go?L:T:go?z:R;pi[e]>gi[e]&&(c=Zt(c));var y=Zt(c),I=[];if(q&&I.push(0>=i[Fa]),$e&&I.push(0>=i[c],0>=i[y]),I.every(function(ge){return ge})){ua=Lo,Ki=!1;break}Li.set(Lo,I)}if(Ki)for(var H=function(ge){var tt=ln.find(function(Rt){var Ft=Li.get(Rt);if(Ft)return Ft.slice(0,ge).every(function(Jt){return Jt})});if(tt)return ua=tt,"break"},Q=ei?3:1;Q>0&&H(Q)!=="break";Q--);M.placement!==ua&&(M.modifiersData[P]._skip=!0,M.placement=ua,M.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Qt(b,M,D){return D===void 0&&(D={x:0,y:0}),{top:b.top-M.height-D.y,right:b.right-M.width+D.x,bottom:b.bottom-M.height+D.y,left:b.left-M.width-D.x}}function ir(b){return[R,L,z,T].some(function(M){return b[M]>=0})}var Er={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(b){var M=b.state,D=b.name,P=b.options.offset,V=P===void 0?[0,0]:P,q=ke.reduce(function(_t,Gt){return _t[Gt]=function(yr,$r,an){var Un=_e(yr),ei=0>[T,R].indexOf(Un)?1:-1,Jn=typeof an=="function"?an(Object.assign({},$r,{placement:yr})):an,Sn=Jn[0],Xn=Jn[1];return Sn=Sn||0,Xn=(Xn||0)*ei,0>[T,L].indexOf(Un)?{x:Sn,y:Xn}:{x:Xn,y:Sn}}(Gt,M.rects,V),_t},{}),be=q[M.placement],$e=be.y;M.modifiersData.popperOffsets!=null&&(M.modifiersData.popperOffsets.x+=be.x,M.modifiersData.popperOffsets.y+=$e),M.modifiersData[D]=q}},Qr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(b){var M=b.state,D=b.options,P=b.name,V=D.mainAxis,q=V===void 0||V,be=D.altAxis,$e=be!==void 0&&be,_t=D.tether,Gt=_t===void 0||_t,yr=D.tetherOffset,$r=yr===void 0?0:yr,an=ot(M,{boundary:D.boundary,rootBoundary:D.rootBoundary,padding:D.padding,altBoundary:D.altBoundary}),Un=_e(M.placement),ei=Lt(M.placement),Jn=!ei,Sn=$t(Un),Xn=Sn==="x"?"y":"x",ai=M.modifiersData.popperOffsets,ln=M.rects.reference,pi=M.rects.popper,gi=typeof $r=="function"?$r(Object.assign({},M.rects,{placement:M.placement})):$r,Li=typeof gi=="number"?{mainAxis:gi,altAxis:gi}:Object.assign({mainAxis:0,altAxis:0},gi),Ki=M.modifiersData.offset?M.modifiersData.offset[M.placement]:null,ua={x:0,y:0};if(ai){if(q){var la,Lo=Sn==="y"?R:T,Fa=Sn==="y"?z:L,go=Sn==="y"?"height":"width",Qs=ai[Sn],e=Qs+an[Lo],i=Qs-an[Fa],c=Gt?-pi[go]/2:0,y=ei===ue?ln[go]:pi[go],I=ei===ue?-pi[go]:-ln[go],H=M.elements.arrow,Q=Gt&&H?ie(H):{width:0,height:0},ge=M.modifiersData["arrow#persistent"]?M.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=ge[Lo],Rt=ge[Fa],Ft=ur(0,ln[go],Q[go]),Jt=Jn?ln[go]/2-c-Ft-tt-Li.mainAxis:y-Ft-tt-Li.mainAxis,dr=Jn?-ln[go]/2+c+Ft+Rt+Li.mainAxis:I+Ft+Rt+Li.mainAxis,Cr=M.elements.arrow&&ar(M.elements.arrow),tn=(la=Ki==null?void 0:Ki[Sn])!=null?la:0,rn=Qs+dr-tn,yn=ur(Gt?ht(e,Qs+Jt-tn-(Cr?Sn==="y"?Cr.clientTop||0:Cr.clientLeft||0:0)):e,Qs,Gt?Te(i,rn):i);ai[Sn]=yn,ua[Sn]=yn-Qs}if($e){var vn,$n=ai[Xn],ri=Xn==="y"?"height":"width",_i=$n+an[Sn==="x"?R:T],xi=$n-an[Sn==="x"?z:L],Ii=[R,T].indexOf(Un)!==-1,ta=(vn=Ki==null?void 0:Ki[Xn])!=null?vn:0,Qi=Ii?_i:$n-ln[ri]-pi[ri]-ta+Li.altAxis,ja=Ii?$n+ln[ri]+pi[ri]-ta-Li.altAxis:xi,qn=Gt&&Ii?function(ca,ra,bo){var Eo=ur(ca,ra,bo);return Eo>bo?bo:Eo}(Qi,$n,ja):ur(Gt?Qi:_i,$n,Gt?ja:xi);ai[Xn]=qn,ua[Xn]=qn-$n}M.modifiersData[P]=ua}},requiresIfExists:["offset"]};function Mt(b,M,D){D===void 0&&(D=!1);var P,V,q=se(M),be=se(M)&&function($r){var an=$r.getBoundingClientRect(),Un=We(an.width)/$r.offsetWidth||1,ei=We(an.height)/$r.offsetHeight||1;return Un!==1||ei!==1}(M),$e=st(M),_t=Ve(b,be,D),Gt={scrollLeft:0,scrollTop:0},yr={x:0,y:0};return(q||!q&&!D)&&((bt(M)!=="body"||J($e))&&(Gt=(P=M)!==ut(P)&&se(P)?{scrollLeft:(V=P).scrollLeft,scrollTop:V.scrollTop}:ft(P)),se(M)?((yr=Ve(M,!0)).x+=M.clientLeft,yr.y+=M.clientTop):$e&&(yr.x=Z($e))),{x:_t.left+Gt.scrollLeft-yr.x,y:_t.top+Gt.scrollTop-yr.y,width:_t.width,height:_t.height}}function br(b){var M=new Map,D=new Set,P=[];function V(q){D.add(q.name),[].concat(q.requires||[],q.requiresIfExists||[]).forEach(function(be){if(!D.has(be)){var $e=M.get(be);$e&&V($e)}}),P.push(q)}return b.forEach(function(q){M.set(q.name,q)}),b.forEach(function(q){D.has(q.name)||V(q)}),P}var Nt={placement:"bottom",modifiers:[],strategy:"absolute"};function Pr(){for(var b=arguments.length,M=Array(b),D=0;b>D;D++)M[D]=arguments[D];return!M.some(function(P){return!(P&&typeof P.getBoundingClientRect=="function")})}function _r(b){b===void 0&&(b={});var M=b.defaultModifiers,D=M===void 0?[]:M,P=b.defaultOptions,V=P===void 0?Nt:P;return function(q,be,$e){$e===void 0&&($e=V);var _t,Gt,yr={placement:"bottom",orderedModifiers:[],options:Object.assign({},Nt,V),modifiersData:{},elements:{reference:q,popper:be},attributes:{},styles:{}},$r=[],an=!1,Un={state:yr,setOptions:function(Jn){var Sn=typeof Jn=="function"?Jn(yr.options):Jn;ei(),yr.options=Object.assign({},V,yr.options,Sn),yr.scrollParents={reference:wt(q)?B(q):q.contextElement?B(q.contextElement):[],popper:B(be)};var Xn,ai,ln=function(pi){var gi=br(pi);return je.reduce(function(Li,Ki){return Li.concat(gi.filter(function(ua){return ua.phase===Ki}))},[])}((Xn=[].concat(D,yr.options.modifiers),ai=Xn.reduce(function(pi,gi){var Li=pi[gi.name];return pi[gi.name]=Li?Object.assign({},Li,gi,{options:Object.assign({},Li.options,gi.options),data:Object.assign({},Li.data,gi.data)}):gi,pi},{}),Object.keys(ai).map(function(pi){return ai[pi]})));return yr.orderedModifiers=ln.filter(function(pi){return pi.enabled}),yr.orderedModifiers.forEach(function(pi){var gi=pi.options,Li=pi.effect;if(typeof Li=="function"){var Ki=Li({state:yr,name:pi.name,instance:Un,options:gi===void 0?{}:gi});$r.push(Ki||function(){})}}),Un.update()},forceUpdate:function(){if(!an){var Jn=yr.elements,Sn=Jn.reference,Xn=Jn.popper;if(Pr(Sn,Xn)){yr.rects={reference:Mt(Sn,ar(Xn),yr.options.strategy==="fixed"),popper:ie(Xn)},yr.reset=!1,yr.placement=yr.options.placement,yr.orderedModifiers.forEach(function(Li){return yr.modifiersData[Li.name]=Object.assign({},Li.data)});for(var ai=0;yr.orderedModifiers.length>ai;ai++)if(yr.reset!==!0){var ln=yr.orderedModifiers[ai],pi=ln.fn,gi=ln.options;typeof pi=="function"&&(yr=pi({state:yr,options:gi===void 0?{}:gi,name:ln.name,instance:Un})||yr)}else yr.reset=!1,ai=-1}}},update:(_t=function(){return new Promise(function(Jn){Un.forceUpdate(),Jn(yr)})},function(){return Gt||(Gt=new Promise(function(Jn){Promise.resolve().then(function(){Gt=void 0,Jn(_t())})})),Gt}),destroy:function(){ei(),an=!0}};if(!Pr(q,be))return Un;function ei(){$r.forEach(function(Jn){return Jn()}),$r=[]}return Un.setOptions($e).then(function(Jn){!an&&$e.onFirstUpdate&&$e.onFirstUpdate(Jn)}),Un}}var kr=_r({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(b){var M=b.state,D=b.instance,P=b.options,V=P.scroll,q=V===void 0||V,be=P.resize,$e=be===void 0||be,_t=ut(M.elements.popper),Gt=[].concat(M.scrollParents.reference,M.scrollParents.popper);return q&&Gt.forEach(function(yr){yr.addEventListener("scroll",D.update,lt)}),$e&&_t.addEventListener("resize",D.update,lt),function(){q&&Gt.forEach(function(yr){yr.removeEventListener("scroll",D.update,lt)}),$e&&_t.removeEventListener("resize",D.update,lt)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(b){var M=b.state;M.modifiersData[b.name]=De({reference:M.rects.reference,element:M.rects.popper,strategy:"absolute",placement:M.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(b){var M=b.state,D=b.options,P=D.gpuAcceleration,V=P===void 0||P,q=D.adaptive,be=q===void 0||q,$e=D.roundOffsets,_t=$e===void 0||$e,Gt={placement:_e(M.placement),variation:Lt(M.placement),popper:M.elements.popper,popperRect:M.rects.popper,gpuAcceleration:V,isFixed:M.options.strategy==="fixed"};M.modifiersData.popperOffsets!=null&&(M.styles.popper=Object.assign({},M.styles.popper,Ut(Object.assign({},Gt,{offsets:M.modifiersData.popperOffsets,position:M.options.strategy,adaptive:be,roundOffsets:_t})))),M.modifiersData.arrow!=null&&(M.styles.arrow=Object.assign({},M.styles.arrow,Ut(Object.assign({},Gt,{offsets:M.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_t})))),M.attributes.popper=Object.assign({},M.attributes.popper,{"data-popper-placement":M.placement})},data:{}},me,Er,Ct,Qr,nt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(b){var M=b.state,D=b.name,P=M.rects.reference,V=M.rects.popper,q=M.modifiersData.preventOverflow,be=ot(M,{elementContext:"reference"}),$e=ot(M,{altBoundary:!0}),_t=Qt(be,P),Gt=Qt($e,V,q),yr=ir(_t),$r=ir(Gt);M.modifiersData[D]={referenceClippingOffsets:_t,popperEscapeOffsets:Gt,isReferenceHidden:yr,hasPopperEscaped:$r},M.attributes.popper=Object.assign({},M.attributes.popper,{"data-popper-reference-hidden":yr,"data-popper-escaped":$r})}}]}),zt="tippy-content",mr="tippy-arrow",Or="tippy-svg-arrow",X={passive:!0,capture:!0},Nr=function(){return document.body};function Xe(b,M,D){if(Array.isArray(b)){var P=b[M];return P==null?Array.isArray(D)?D[M]:D:P}return b}function xe(b,M){var D={}.toString.call(b);return D.indexOf("[object")===0&&D.indexOf(M+"]")>-1}function rt(b,M){return typeof b=="function"?b.apply(void 0,M):b}function kt(b,M){return M===0?b:function(P){clearTimeout(D),D=setTimeout(function(){b(P)},M)};var D}function cr(b){return[].concat(b)}function Ar(b,M){b.indexOf(M)===-1&&b.push(M)}function Lr(b){return[].slice.call(b)}function sr(b){return Object.keys(b).reduce(function(M,D){return b[D]!==void 0&&(M[D]=b[D]),M},{})}function Ge(){return document.createElement("div")}function Gr(b){return["Element","Fragment"].some(function(M){return xe(b,M)})}function on(b){return xe(b,"MouseEvent")}function cn(b){return Gr(b)?[b]:function(M){return xe(M,"NodeList")}(b)?Lr(b):Array.isArray(b)?b:Lr(document.querySelectorAll(b))}function Dn(b,M){b.forEach(function(D){D&&(D.style.transitionDuration=M+"ms")})}function ci(b,M){b.forEach(function(D){D&&D.setAttribute("data-state",M)})}function ia(b){var M,D=cr(b)[0];return D!=null&&(M=D.ownerDocument)!=null&&M.body?D.ownerDocument:document}function Vi(b,M,D){var P=M+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(V){b[P](V,D)})}function On(b,M){for(var D=M;D;){var P;if(b.contains(D))return!0;D=D.getRootNode==null||(P=D.getRootNode())==null?void 0:P.host}return!1}var ji={isTouch:!1},oi=0;function Hi(){ji.isTouch||(ji.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ca))}function Ca(){var b=performance.now();20>b-oi&&(ji.isTouch=!1,document.removeEventListener("mousemove",Ca)),oi=b}function Wi(){var b,M=document.activeElement;(b=M)&&b._tippy&&b._tippy.reference===b&&M.blur&&!M._tippy.state.isVisible&&M.blur()}var jo=typeof window!="undefined"&&typeof document!="undefined"&&!!window.msCrypto,uo=Object.assign({appendTo:Nr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Pn=Object.keys(uo);function bn(b){var M=(b.plugins||[]).reduce(function(D,P){var V,q=P.name;return q&&(D[q]=b[q]!==void 0?b[q]:(V=uo[q])!=null?V:P.defaultValue),D},{});return Object.assign({},b,M)}function Oi(b,M){var D=Object.assign({},M,{content:rt(M.content,[b])},M.ignoreAttributes?{}:function(P,V){return(V?Object.keys(bn(Object.assign({},uo,{plugins:V}))):Pn).reduce(function(q,be){var $e=(P.getAttribute("data-tippy-"+be)||"").trim();if(!$e)return q;if(be==="content")q[be]=$e;else try{q[be]=JSON.parse($e)}catch(_t){q[be]=$e}return q},{})}(b,M.plugins));return D.aria=Object.assign({},uo.aria,D.aria),D.aria={expanded:D.aria.expanded==="auto"?M.interactive:D.aria.expanded,content:D.aria.content==="auto"?M.interactive?null:"describedby":D.aria.content},D}function di(b,M){b.innerHTML=M}function va(b){var M=Ge();return b===!0?M.className=mr:(M.className=Or,Gr(b)?M.appendChild(b):di(M,b)),M}function wa(b,M){Gr(M.content)?(di(b,""),b.appendChild(M.content)):typeof M.content!="function"&&(M.allowHTML?di(b,M.content):b.textContent=M.content)}function Aa(b){var M=b.firstElementChild,D=Lr(M.children);return{box:M,content:D.find(function(P){return P.classList.contains(zt)}),arrow:D.find(function(P){return P.classList.contains(mr)||P.classList.contains(Or)}),backdrop:D.find(function(P){return P.classList.contains("tippy-backdrop")})}}function Ta(b){var M=Ge(),D=Ge();D.className="tippy-box",D.setAttribute("data-state","hidden"),D.setAttribute("tabindex","-1");var P=Ge();function V(q,be){var $e=Aa(M),_t=$e.box,Gt=$e.content,yr=$e.arrow;be.theme?_t.setAttribute("data-theme",be.theme):_t.removeAttribute("data-theme"),typeof be.animation=="string"?_t.setAttribute("data-animation",be.animation):_t.removeAttribute("data-animation"),be.inertia?_t.setAttribute("data-inertia",""):_t.removeAttribute("data-inertia"),_t.style.maxWidth=typeof be.maxWidth=="number"?be.maxWidth+"px":be.maxWidth,be.role?_t.setAttribute("role",be.role):_t.removeAttribute("role"),q.content===be.content&&q.allowHTML===be.allowHTML||wa(Gt,b.props),be.arrow?yr?q.arrow!==be.arrow&&(_t.removeChild(yr),_t.appendChild(va(be.arrow))):_t.appendChild(va(be.arrow)):yr&&_t.removeChild(yr)}return P.className=zt,P.setAttribute("data-state","hidden"),wa(P,b.props),M.appendChild(D),D.appendChild(P),V(b.props,b.props),{popper:M,onUpdate:V}}Ta.$$tippy=!0;var ma=1,Da=[],Uo=[];function ha(b,M){var D,P,V,q,be,$e,_t,Gt,yr=Oi(b,Object.assign({},uo,bn(sr(M)))),$r=!1,an=!1,Un=!1,ei=!1,Jn=[],Sn=kt(vn,yr.interactiveDebounce),Xn=ma++,ai=(Gt=yr.plugins).filter(function(qn,ca){return Gt.indexOf(qn)===ca}),ln={id:Xn,reference:b,popper:Ge(),popperInstance:null,props:yr,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:ai,clearDelayTimeouts:function(){clearTimeout(D),clearTimeout(P),cancelAnimationFrame(V)},setProps:function(qn){if(!ln.state.isDestroyed){y("onBeforeUpdate",[ln,qn]),rn();var ca=ln.props,ra=Oi(b,Object.assign({},ca,sr(qn),{ignoreAttributes:!0}));ln.props=ra,tn(),ca.interactiveDebounce!==ra.interactiveDebounce&&(Q(),Sn=kt(vn,ra.interactiveDebounce)),ca.triggerTarget&&!ra.triggerTarget?cr(ca.triggerTarget).forEach(function(bo){bo.removeAttribute("aria-expanded")}):ra.triggerTarget&&b.removeAttribute("aria-expanded"),H(),c(),Li&&Li(ca,ra),ln.popperInstance&&(xi(),ta().forEach(function(bo){requestAnimationFrame(bo._tippy.popperInstance.forceUpdate)})),y("onAfterUpdate",[ln,qn])}},setContent:function(qn){ln.setProps({content:qn})},show:function(){var qn=ln.state.isVisible,ca=ln.state.isDestroyed,ra=!ln.state.isEnabled,bo=ji.isTouch&&!ln.props.touch,Eo=Xe(ln.props.duration,0,uo.duration);if(!(qn||ca||ra||bo)&&!go().hasAttribute("disabled")&&(y("onShow",[ln],!1),ln.props.onShow(ln)!==!1)){if(ln.state.isVisible=!0,Fa()&&(gi.style.visibility="visible"),c(),Ft(),ln.state.isMounted||(gi.style.transition="none"),Fa()){var qa=e();Dn([qa.box,qa.content],0)}$e=function(){var Ss;if(ln.state.isVisible&&!ei){if(ei=!0,gi.style.transition=ln.props.moveTransition,Fa()&&ln.props.animation){var Is=e(),pu=Is.box,es=Is.content;Dn([pu,es],Eo),ci([pu,es],"visible")}I(),H(),Ar(Uo,ln),(Ss=ln.popperInstance)==null||Ss.forceUpdate(),y("onMount",[ln]),ln.props.animation&&Fa()&&function($u,hl){dr($u,hl)}(Eo,function(){ln.state.isShown=!0,y("onShown",[ln])})}},function(){var Ss,Is=ln.props.appendTo,pu=go();Ss=ln.props.interactive&&Is===Nr||Is==="parent"?pu.parentNode:rt(Is,[pu]),Ss.contains(gi)||Ss.appendChild(gi),ln.state.isMounted=!0,xi()}()}},hide:function(){var qn=!ln.state.isVisible,ca=ln.state.isDestroyed,ra=!ln.state.isEnabled,bo=Xe(ln.props.duration,1,uo.duration);if(!(qn||ca||ra)&&(y("onHide",[ln],!1),ln.props.onHide(ln)!==!1)){if(ln.state.isVisible=!1,ln.state.isShown=!1,ei=!1,$r=!1,Fa()&&(gi.style.visibility="hidden"),Q(),Jt(),c(!0),Fa()){var Eo=e(),qa=Eo.box,Ss=Eo.content;ln.props.animation&&(Dn([qa,Ss],bo),ci([qa,Ss],"hidden"))}I(),H(),ln.props.animation?Fa()&&function(Is,pu){dr(Is,function(){!ln.state.isVisible&&gi.parentNode&&gi.parentNode.contains(gi)&&pu()})}(bo,ln.unmount):ln.unmount()}},hideWithInteractivity:function(qn){Qs().addEventListener("mousemove",Sn),Ar(Da,Sn),Sn(qn)},enable:function(){ln.state.isEnabled=!0},disable:function(){ln.hide(),ln.state.isEnabled=!1},unmount:function(){ln.state.isVisible&&ln.hide(),ln.state.isMounted&&(Ii(),ta().forEach(function(qn){qn._tippy.unmount()}),gi.parentNode&&gi.parentNode.removeChild(gi),Uo=Uo.filter(function(qn){return qn!==ln}),ln.state.isMounted=!1,y("onHidden",[ln]))},destroy:function(){ln.state.isDestroyed||(ln.clearDelayTimeouts(),ln.unmount(),rn(),delete b._tippy,ln.state.isDestroyed=!0,y("onDestroy",[ln]))}};if(!yr.render)return ln;var pi=yr.render(ln),gi=pi.popper,Li=pi.onUpdate;gi.setAttribute("data-tippy-root",""),gi.id="tippy-"+ln.id,ln.popper=gi,b._tippy=ln,gi._tippy=ln;var Ki=ai.map(function(qn){return qn.fn(ln)}),ua=b.hasAttribute("aria-expanded");return tn(),H(),c(),y("onCreate",[ln]),yr.showOnCreate&&Qi(),gi.addEventListener("mouseenter",function(){ln.props.interactive&&ln.state.isVisible&&ln.clearDelayTimeouts()}),gi.addEventListener("mouseleave",function(){ln.props.interactive&&ln.props.trigger.indexOf("mouseenter")>=0&&Qs().addEventListener("mousemove",Sn)}),ln;function la(){var qn=ln.props.touch;return Array.isArray(qn)?qn:[qn,0]}function Lo(){return la()[0]==="hold"}function Fa(){var qn;return!((qn=ln.props.render)==null||!qn.$$tippy)}function go(){return _t||b}function Qs(){var qn=go().parentNode;return qn?ia(qn):document}function e(){return Aa(gi)}function i(qn){return ln.state.isMounted&&!ln.state.isVisible||ji.isTouch||q&&q.type==="focus"?0:Xe(ln.props.delay,qn?0:1,uo.delay)}function c(qn){qn===void 0&&(qn=!1),gi.style.pointerEvents=ln.props.interactive&&!qn?"":"none",gi.style.zIndex=""+ln.props.zIndex}function y(qn,ca,ra){var bo;ra===void 0&&(ra=!0),Ki.forEach(function(Eo){Eo[qn]&&Eo[qn].apply(Eo,ca)}),ra&&(bo=ln.props)[qn].apply(bo,ca)}function I(){var qn=ln.props.aria;if(qn.content){var ca="aria-"+qn.content,ra=gi.id;cr(ln.props.triggerTarget||b).forEach(function(bo){var Eo=bo.getAttribute(ca);if(ln.state.isVisible)bo.setAttribute(ca,Eo?Eo+" "+ra:ra);else{var qa=Eo&&Eo.replace(ra,"").trim();qa?bo.setAttribute(ca,qa):bo.removeAttribute(ca)}})}}function H(){!ua&&ln.props.aria.expanded&&cr(ln.props.triggerTarget||b).forEach(function(qn){ln.props.interactive?qn.setAttribute("aria-expanded",ln.state.isVisible&&qn===go()?"true":"false"):qn.removeAttribute("aria-expanded")})}function Q(){Qs().removeEventListener("mousemove",Sn),Da=Da.filter(function(qn){return qn!==Sn})}function ge(qn){if(!ji.isTouch||!Un&&qn.type!=="mousedown"){var ca=qn.composedPath&&qn.composedPath()[0]||qn.target;if(!ln.props.interactive||!On(gi,ca)){if(cr(ln.props.triggerTarget||b).some(function(ra){return On(ra,ca)})){if(ji.isTouch||ln.state.isVisible&&ln.props.trigger.indexOf("click")>=0)return}else y("onClickOutside",[ln,qn]);ln.props.hideOnClick===!0&&(ln.clearDelayTimeouts(),ln.hide(),an=!0,setTimeout(function(){an=!1}),ln.state.isMounted||Jt())}}}function tt(){Un=!0}function Rt(){Un=!1}function Ft(){var qn=Qs();qn.addEventListener("mousedown",ge,!0),qn.addEventListener("touchend",ge,X),qn.addEventListener("touchstart",Rt,X),qn.addEventListener("touchmove",tt,X)}function Jt(){var qn=Qs();qn.removeEventListener("mousedown",ge,!0),qn.removeEventListener("touchend",ge,X),qn.removeEventListener("touchstart",Rt,X),qn.removeEventListener("touchmove",tt,X)}function dr(qn,ca){var ra=e().box;function bo(Eo){Eo.target===ra&&(Vi(ra,"remove",bo),ca())}if(qn===0)return ca();Vi(ra,"remove",be),Vi(ra,"add",bo),be=bo}function Cr(qn,ca,ra){ra===void 0&&(ra=!1),cr(ln.props.triggerTarget||b).forEach(function(bo){bo.addEventListener(qn,ca,ra),Jn.push({node:bo,eventType:qn,handler:ca,options:ra})})}function tn(){var qn;Lo()&&(Cr("touchstart",yn,{passive:!0}),Cr("touchend",$n,{passive:!0})),(qn=ln.props.trigger,qn.split(/\s+/).filter(Boolean)).forEach(function(ca){if(ca!=="manual")switch(Cr(ca,yn),ca){case"mouseenter":Cr("mouseleave",$n);break;case"focus":Cr(jo?"focusout":"blur",ri);break;case"focusin":Cr("focusout",ri)}})}function rn(){Jn.forEach(function(qn){qn.node.removeEventListener(qn.eventType,qn.handler,qn.options)}),Jn=[]}function yn(qn){var ca,ra=!1;if(ln.state.isEnabled&&!_i(qn)&&!an){var bo=((ca=q)==null?void 0:ca.type)==="focus";q=qn,_t=qn.currentTarget,H(),!ln.state.isVisible&&on(qn)&&Da.forEach(function(Eo){return Eo(qn)}),qn.type==="click"&&(0>ln.props.trigger.indexOf("mouseenter")||$r)&&ln.props.hideOnClick!==!1&&ln.state.isVisible?ra=!0:Qi(qn),qn.type==="click"&&($r=!ra),ra&&!bo&&ja(qn)}}function vn(qn){var ca=qn.target,ra=go().contains(ca)||gi.contains(ca);if(qn.type!=="mousemove"||!ra){var bo=ta().concat(gi).map(function(Eo){var qa,Ss=(qa=Eo._tippy.popperInstance)==null?void 0:qa.state;return Ss?{popperRect:Eo.getBoundingClientRect(),popperState:Ss,props:yr}:null}).filter(Boolean);(function(Eo,qa){var Ss=qa.clientX,Is=qa.clientY;return Eo.every(function(pu){var es=pu.popperRect,$u=pu.popperState,hl=pu.props.interactiveBorder,Nl=$u.placement.split("-")[0],el=$u.modifiersData.offset;return!el||es.top-Is+(Nl==="bottom"?el.top.y:0)>hl||Is-es.bottom-(Nl==="top"?el.bottom.y:0)>hl||es.left-Ss+(Nl==="right"?el.left.x:0)>hl||Ss-es.right-(Nl==="left"?el.right.x:0)>hl})})(bo,qn)&&(Q(),ja(qn))}}function $n(qn){_i(qn)||ln.props.trigger.indexOf("click")>=0&&$r||(ln.props.interactive?ln.hideWithInteractivity(qn):ja(qn))}function ri(qn){0>ln.props.trigger.indexOf("focusin")&&qn.target!==go()||ln.props.interactive&&qn.relatedTarget&&gi.contains(qn.relatedTarget)||ja(qn)}function _i(qn){return!!ji.isTouch&&Lo()!==qn.type.indexOf("touch")>=0}function xi(){Ii();var qn=ln.props,ca=qn.popperOptions,ra=qn.placement,bo=qn.offset,Eo=qn.getReferenceClientRect,qa=qn.moveTransition,Ss=Fa()?Aa(gi).arrow:null,Is=Eo?{getBoundingClientRect:Eo,contextElement:Eo.contextElement||go()}:b,pu={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function($u){var hl=$u.state;if(Fa()){var Nl=e().box;["placement","reference-hidden","escaped"].forEach(function(el){el==="placement"?Nl.setAttribute("data-placement",hl.placement):hl.attributes.popper["data-popper-"+el]?Nl.setAttribute("data-"+el,""):Nl.removeAttribute("data-"+el)}),hl.attributes.popper={}}}},es=[{name:"offset",options:{offset:bo}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!qa}},pu];Fa()&&Ss&&es.push({name:"arrow",options:{element:Ss,padding:3}}),es.push.apply(es,(ca==null?void 0:ca.modifiers)||[]),ln.popperInstance=kr(Is,gi,Object.assign({},ca,{placement:ra,onFirstUpdate:$e,modifiers:es}))}function Ii(){ln.popperInstance&&(ln.popperInstance.destroy(),ln.popperInstance=null)}function ta(){return Lr(gi.querySelectorAll("[data-tippy-root]"))}function Qi(qn){ln.clearDelayTimeouts(),qn&&y("onTrigger",[ln,qn]),Ft();var ca=i(!0),ra=la(),bo=ra[1];ji.isTouch&&ra[0]==="hold"&&bo&&(ca=bo),ca?D=setTimeout(function(){ln.show()},ca):ln.show()}function ja(qn){if(ln.clearDelayTimeouts(),y("onUntrigger",[ln,qn]),ln.state.isVisible){if(0>ln.props.trigger.indexOf("mouseenter")||0>ln.props.trigger.indexOf("click")||0>["mouseleave","mousemove"].indexOf(qn.type)||!$r){var ca=i(!1);ca?P=setTimeout(function(){ln.state.isVisible&&ln.hide()},ca):V=requestAnimationFrame(function(){ln.hide()})}}else Jt()}}function xa(b,M){M===void 0&&(M={});var D=uo.plugins.concat(M.plugins||[]);document.addEventListener("touchstart",Hi,X),window.addEventListener("blur",Wi);var P=Object.assign({},M,{plugins:D}),V=cn(b).reduce(function(q,be){var $e=be&&ha(be,P);return $e&&q.push($e),q},[]);return Gr(b)?V[0]:V}xa.defaultProps=uo,xa.setDefaultProps=function(b){Object.keys(b).forEach(function(M){uo[M]=b[M]})},xa.currentInput=ji,Object.assign({},me,{effect:function(b){var M=b.state,D={popper:{position:M.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(M.elements.popper.style,D.popper),M.styles=D,M.elements.arrow&&Object.assign(M.elements.arrow.style,D.arrow)}});var eo={clientX:0,clientY:0},Ee=[];function Po(b){eo={clientX:b.clientX,clientY:b.clientY}}var Hs={name:"followCursor",defaultValue:!1,fn:function(b){var M=b.reference,D=ia(b.props.triggerTarget||M),P=!1,V=!1,q=!0,be=b.props;function $e(){return b.props.followCursor==="initial"&&b.state.isVisible}function _t(){D.addEventListener("mousemove",$r)}function Gt(){D.removeEventListener("mousemove",$r)}function yr(){P=!0,b.setProps({getReferenceClientRect:null}),P=!1}function $r(ei){var Jn=!ei.target||M.contains(ei.target),Sn=b.props.followCursor,Xn=ei.clientX,ai=ei.clientY,ln=M.getBoundingClientRect(),pi=Xn-ln.left,gi=ai-ln.top;!Jn&&b.props.interactive||b.setProps({getReferenceClientRect:function(){var Li=M.getBoundingClientRect(),Ki=Xn,ua=ai;Sn==="initial"&&(Ki=Li.left+pi,ua=Li.top+gi);var la=Sn==="horizontal"?Li.top:ua,Lo=Sn==="vertical"?Li.right:Ki,Fa=Sn==="horizontal"?Li.bottom:ua,go=Sn==="vertical"?Li.left:Ki;return{width:Lo-go,height:Fa-la,top:la,right:Lo,bottom:Fa,left:go}}})}function an(){b.props.followCursor&&(Ee.push({instance:b,doc:D}),function(ei){ei.addEventListener("mousemove",Po)}(D))}function Un(){(Ee=Ee.filter(function(ei){return ei.instance!==b})).filter(function(ei){return ei.doc===D}).length===0&&function(ei){ei.removeEventListener("mousemove",Po)}(D)}return{onCreate:an,onDestroy:Un,onBeforeUpdate:function(){be=b.props},onAfterUpdate:function(ei,Jn){var Sn=Jn.followCursor;P||Sn!==void 0&&be.followCursor!==Sn&&(Un(),Sn?(an(),!b.state.isMounted||V||$e()||_t()):(Gt(),yr()))},onMount:function(){b.props.followCursor&&!V&&(q&&($r(eo),q=!1),$e()||_t())},onTrigger:function(ei,Jn){on(Jn)&&(eo={clientX:Jn.clientX,clientY:Jn.clientY}),V=Jn.type==="focus"},onHidden:function(){b.props.followCursor&&(yr(),Gt(),q=!0)}}}};xa.setDefaultProps({render:Ta});var no,qo,os,Go,Wo,za,Tu={showTotalDistance:!1,showDashDistance:!0,showWhen:["normal","active"],format:function(b){return 1e3>b?+b.toFixed(2)+"m":+(b/1e3).toFixed(2)+"km"}},Cs={showWhen:["normal","active"],format:function(b){return b>1e6?"".concat(+(b/1e6).toFixed(2),"km\xB2"):"".concat(+b.toFixed(2),"m\xB2")}},Zs={maxSize:100},ts={remove:["del","backspace"],revert:["command+z","ctrl+z"],redo:["command+shift+z","ctrl+shift+z"]},Vs={allowHTML:!0,followCursor:!0,placement:"bottom-start",offset:[-10,20],plugins:[Hs],trigger:"manual",hideOnClick:!1,theme:"light"},ou={data:"drawData",pointAdsorbPixel:12,lineAdsorbPixel:10};function ls(b,M){var D=Object.keys(b);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(b);M&&(P=P.filter(function(V){return Object.getOwnPropertyDescriptor(b,V).enumerable})),D.push.apply(D,P)}return D}function Di(b){for(var M=1;arguments.length>M;M++){var D=arguments[M]!=null?arguments[M]:{};M%2?ls(Object(D),!0).forEach(function(P){zr(b,P,D[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(D)):ls(Object(D)).forEach(function(P){Object.defineProperty(b,P,Object.getOwnPropertyDescriptor(D,P))})}return b}function As(b,M){if(!(b instanceof M))throw new TypeError("Cannot call a class as a function")}function Rs(b,M){for(var D=0;M.length>D;D++){var P=M[D];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,Vn(P.key),P)}}function vr(b,M,D){return M&&Rs(b.prototype,M),D&&Rs(b,D),Object.defineProperty(b,"prototype",{writable:!1}),b}function zr(b,M,D){return(M=Vn(M))in b?Object.defineProperty(b,M,{value:D,enumerable:!0,configurable:!0,writable:!0}):b[M]=D,b}function lr(b,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(M&&M.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),M&&Hn(b,M)}function Zr(b){return Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},Zr(b)}function Hn(b,M){return Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,P){return D.__proto__=P,D},Hn(b,M)}function Hr(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function Bo(b,M){if(M&&(typeof M=="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hr(b)}function Yr(b){var M=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(D){return!1}}();return function(){var D,P=Zr(b);if(M){var V=Zr(this).constructor;D=Reflect.construct(P,arguments,V)}else D=P.apply(this,arguments);return Bo(this,D)}}function pr(b,M){for(;!Object.prototype.hasOwnProperty.call(b,M)&&(b=Zr(b))!==null;);return b}function at(){return at=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(b,M,D){var P=pr(b,M);if(P){var V=Object.getOwnPropertyDescriptor(P,M);return V.get?V.get.call(3>arguments.length?b:D):V.value}},at.apply(this,arguments)}function hr(b,M){return function(D){if(Array.isArray(D))return D}(b)||function(D,P){var V=D==null?null:typeof Symbol!="undefined"&&D[Symbol.iterator]||D["@@iterator"];if(V!=null){var q,be,$e,_t,Gt=[],yr=!0,$r=!1;try{if($e=(V=V.call(D)).next,P===0){if(Object(V)!==V)return;yr=!1}else for(;!(yr=(q=$e.call(V)).done)&&(Gt.push(q.value),Gt.length!==P);yr=!0);}catch(an){$r=!0,be=an}finally{try{if(!yr&&V.return!=null&&(_t=V.return(),Object(_t)!==_t))return}finally{if($r)throw be}}return Gt}}(b,M)||dn(b,M)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function er(b){return function(M){if(Array.isArray(M))return mn(M)}(b)||function(M){if(typeof Symbol!="undefined"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}(b)||dn(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dn(b,M){if(b){if(typeof b=="string")return mn(b,M);var D=Object.prototype.toString.call(b).slice(8,-1);return D==="Object"&&b.constructor&&(D=b.constructor.name),D==="Map"||D==="Set"?Array.from(b):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?mn(b,M):void 0}}function mn(b,M){(M==null||M>b.length)&&(M=b.length);for(var D=0,P=Array(M);M>D;D++)P[D]=b[D];return P}function Vn(b){var M=function(D,P){if(typeof D!="object"||D===null)return D;var V=D[Symbol.toPrimitive];if(V!==void 0){var q=V.call(D,P||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(D)}(b,"string");return typeof M=="symbol"?M:M+""}(no=v.DrawEvent||(v.DrawEvent={})).Init="init",no.Destroy="destroy",no.Enable="enable",no.Disable="disable",no.Add="add",no.Edit="edit",no.Remove="remove",no.Clear="clear",no.Change="change",no.DragStart="dragStart",no.Dragging="dragging",no.DragEnd="dragEnd",no.AddNode="addNode",no.RemoveNode="removeNode",(qo=v.SourceEvent||(v.SourceEvent={})).Change="change",qo.Update="update",(os=v.RenderEvent||(v.RenderEvent={})).Click="click",os.UnClick="unclick",os.Dragstart="dragstart",os.Mousemove="mousemove",os.Mouseout="mouseout",os.Dragging="dragging",os.Dragend="dragend",os.DblClick="dblClick",os.Contextmenu="contextmenu",(Go=v.LayerEvent||(v.LayerEvent={})).Mousedown="mousedown",Go.Mouseup="mouseup",Go.Click="click",Go.UnClick="unclick",Go.Dblclick="dblclick",Go.Mousemove="mousemove",Go.Mouseover="mouseover",Go.Mouseenter="mouseenter",Go.Mouseleave="mouseleave",Go.Mouseout="mouseout",Go.Contextmenu="contextmenu",(Wo=v.SceneEvent||(v.SceneEvent={})).Loaded="loaded",Wo.MapMove="mapmove",Wo.MoveStart="movestart",Wo.MoveEnd="moveend",Wo.ZoomChange="zoomchange",Wo.ZoomStart="zoomstart",Wo.ZoomEnd="zoomend",Wo.Click="click",Wo.Dblclick="dblclick",Wo.Mousemove="mousemove",Wo.Mousewheel="mousewheel",Wo.Mouseover="mouseover",Wo.Mouseout="mouseout",Wo.Mouseup="mouseup",Wo.Mousedown="mousedown",Wo.Contextmenu="contextmenu",Wo.Dragstart="dragstart",Wo.Dragging="dragging",Wo.Dragend="dragend",(za=v.ControlEvent||(v.ControlEvent={})).DrawChange="drawchange",za.DataChange="datachange";var ni=63710088e-1,si={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*ni,kilometers:6371.0088,kilometres:6371.0088,meters:ni,metres:ni,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:ni/1852,radians:1,yards:6967335223679999e-9},Si={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function qi(b,M,D){D===void 0&&(D={});var P={type:"Feature"};return(D.id===0||D.id)&&(P.id=D.id),D.bbox&&(P.bbox=D.bbox),P.properties=M||{},P.geometry=b,P}function Rr(b,M,D){if(D===void 0&&(D={}),!b)throw Error("coordinates is required");if(!Array.isArray(b))throw Error("coordinates must be an Array");if(2>b.length)throw Error("coordinates must be at least 2 numbers long");if(!de(b[0])||!de(b[1]))throw Error("coordinates must contain numbers");return qi({type:"Point",coordinates:b},M,D)}function Mn(b,M,D){D===void 0&&(D={});for(var P=0,V=b;V.length>P;P++){var q=V[P];if(4>q.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var be=0;q[q.length-1].length>be;be++)if(q[q.length-1][be]!==q[0][be])throw Error("First and last Position are not equivalent.")}return qi({type:"Polygon",coordinates:b},M,D)}function pn(b,M,D){if(D===void 0&&(D={}),2>b.length)throw Error("coordinates must be an array of two or more positions");return qi({type:"LineString",coordinates:b},M,D)}function wn(b,M){M===void 0&&(M={});var D={type:"FeatureCollection"};return M.id&&(D.id=M.id),M.bbox&&(D.bbox=M.bbox),D.features=b,D}function Kn(b,M,D){return D===void 0&&(D={}),qi({type:"MultiLineString",coordinates:b},M,D)}function Ei(b,M,D){return D===void 0&&(D={}),qi({type:"MultiPoint",coordinates:b},M,D)}function Ji(b,M,D){return D===void 0&&(D={}),qi({type:"MultiPolygon",coordinates:b},M,D)}function Yi(b,M){M===void 0&&(M="kilometers");var D=si[M];if(!D)throw Error(M+" units is invalid");return b*D}function oa(b,M){M===void 0&&(M="kilometers");var D=si[M];if(!D)throw Error(M+" units is invalid");return b/D}function Ma(b){return 180*(b%(2*Math.PI))/Math.PI}function k(b){return b%360*Math.PI/180}function de(b){return!isNaN(b)&&b!==null&&!Array.isArray(b)}function yt(b){return!!b&&b.constructor===Object}var Ue=Object.freeze({__proto__:null,earthRadius:ni,factors:si,unitsFactors:{centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ni,yards:1.0936133},areaFactors:Si,feature:qi,geometry:function(b,M,D){switch(b){case"Point":return Rr(M).geometry;case"LineString":return pn(M).geometry;case"Polygon":return Mn(M).geometry;case"MultiPoint":return Ei(M).geometry;case"MultiLineString":return Kn(M).geometry;case"MultiPolygon":return Ji(M).geometry;default:throw Error(b+" is invalid")}},point:Rr,points:function(b,M,D){return D===void 0&&(D={}),wn(b.map(function(P){return Rr(P,M)}),D)},polygon:Mn,polygons:function(b,M,D){return D===void 0&&(D={}),wn(b.map(function(P){return Mn(P,M)}),D)},lineString:pn,lineStrings:function(b,M,D){return D===void 0&&(D={}),wn(b.map(function(P){return pn(P,M)}),D)},featureCollection:wn,multiLineString:Kn,multiPoint:Ei,multiPolygon:Ji,geometryCollection:function(b,M,D){return D===void 0&&(D={}),qi({type:"GeometryCollection",geometries:b},M,D)},round:function(b,M){if(M===void 0&&(M=0),M&&M<0)throw Error("precision must be a positive number");var D=Math.pow(10,M||0);return Math.round(b*D)/D},radiansToLength:Yi,lengthToRadians:oa,lengthToDegrees:function(b,M){return Ma(oa(b,M))},bearingToAzimuth:function(b){var M=b%360;return 0>M&&(M+=360),M},radiansToDegrees:Ma,degreesToRadians:k,convertLength:function(b,M,D){if(M===void 0&&(M="kilometers"),D===void 0&&(D="kilometers"),b<0)throw Error("length must be a positive number");return Yi(oa(b,M),D)},convertArea:function(b,M,D){if(M===void 0&&(M="meters"),D===void 0&&(D="kilometers"),b<0)throw Error("area must be a positive number");var P=Si[M];if(!P)throw Error("invalid original units");var V=Si[D];if(!V)throw Error("invalid final units");return b/P*V},isNumber:de,isObject:yt,validateBBox:function(b){if(!b)throw Error("bbox is required");if(!Array.isArray(b))throw Error("bbox must be an Array");if(b.length!==4&&b.length!==6)throw Error("bbox must be an Array of 4 or 6 numbers");b.forEach(function(M){if(!de(M))throw Error("bbox must only contain numbers")})},validateId:function(b){if(!b)throw Error("id is required");if(["string","number"].indexOf(typeof b)===-1)throw Error("id must be a number or a string")}});function nr(b,M,D){if(b!==null)for(var P,V,q,be,$e,_t,Gt,yr,$r=0,an=0,Un=b.type,ei=Un==="FeatureCollection",Jn=Un==="Feature",Sn=ei?b.features.length:1,Xn=0;Sn>Xn;Xn++){$e=(yr=!!(Gt=ei?b.features[Xn].geometry:Jn?b.geometry:b)&&Gt.type==="GeometryCollection")?Gt.geometries.length:1;for(var ai=0;$e>ai;ai++){var ln=0,pi=0;if((be=yr?Gt.geometries[ai]:Gt)!==null){_t=be.coordinates;var gi=be.type;switch($r=!D||gi!=="Polygon"&&gi!=="MultiPolygon"?0:1,gi){case null:break;case"Point":if(M(_t,an,Xn,ln,pi)===!1)return!1;an++,ln++;break;case"LineString":case"MultiPoint":for(P=0;_t.length>P;P++){if(M(_t[P],an,Xn,ln,pi)===!1)return!1;an++,gi==="MultiPoint"&&ln++}gi==="LineString"&&ln++;break;case"Polygon":case"MultiLineString":for(P=0;_t.length>P;P++){for(V=0;_t[P].length-$r>V;V++){if(M(_t[P][V],an,Xn,ln,pi)===!1)return!1;an++}gi==="MultiLineString"&&ln++,gi==="Polygon"&&pi++}gi==="Polygon"&&ln++;break;case"MultiPolygon":for(P=0;_t.length>P;P++){for(pi=0,V=0;_t[P].length>V;V++){for(q=0;_t[P][V].length-$r>q;q++){if(M(_t[P][V][q],an,Xn,ln,pi)===!1)return!1;an++}pi++}ln++}break;case"GeometryCollection":for(P=0;be.geometries.length>P;P++)if(nr(be.geometries[P],M,D)===!1)return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function Mr(b,M){var D;switch(b.type){case"FeatureCollection":for(D=0;b.features.length>D&&M(b.features[D].properties,D)!==!1;D++);break;case"Feature":M(b.properties,0)}}function qr(b,M){if(b.type==="Feature")M(b,0);else if(b.type==="FeatureCollection")for(var D=0;b.features.length>D&&M(b.features[D],D)!==!1;D++);}function kn(b){var M=[];return nr(b,function(D){M.push(D)}),M}function Nn(b,M){var D,P,V,q,be,$e,_t,Gt,yr,$r,an=0,Un=b.type==="FeatureCollection",ei=b.type==="Feature",Jn=Un?b.features.length:1;for(D=0;Jn>D;D++){for(Gt=Un?b.features[D].properties:ei?b.properties:{},yr=Un?b.features[D].bbox:ei?b.bbox:void 0,$r=Un?b.features[D].id:ei?b.id:void 0,be=(_t=!!($e=Un?b.features[D].geometry:ei?b.geometry:b)&&$e.type==="GeometryCollection")?$e.geometries.length:1,V=0;be>V;V++)if((q=_t?$e.geometries[V]:$e)!==null)switch(q.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(M(q,an,Gt,yr,$r)===!1)return!1;break;case"GeometryCollection":for(P=0;q.geometries.length>P;P++)if(M(q.geometries[P],an,Gt,yr,$r)===!1)return!1;break;default:throw Error("Unknown Geometry Type")}else if(M(null,an,Gt,yr,$r)===!1)return!1;an++}}function Mi(b,M,D){var P=D;return Nn(b,function(V,q,be,$e,_t){P=q===0&&D===void 0?V:M(P,V,q,be,$e,_t)}),P}function Bi(b,M){Nn(b,function(D,P,V,q,be){var $e,_t=D===null?null:D.type;switch(_t){case null:case"Point":case"LineString":case"Polygon":return M(qi(D,V,{bbox:q,id:be}),P,0)!==!1&&void 0}switch(_t){case"MultiPoint":$e="Point";break;case"MultiLineString":$e="LineString";break;case"MultiPolygon":$e="Polygon"}for(var Gt=0;D.coordinates.length>Gt;Gt++)if(M(qi({type:$e,coordinates:D.coordinates[Gt]},V),P,Gt)===!1)return!1})}function io(b,M){Bi(b,function(D,P,V){var q=0;if(D.geometry){var be=D.geometry.type;if(be!=="Point"&&be!=="MultiPoint"){var $e,_t=0,Gt=0,yr=0;return nr(D,function($r,an,Un,ei,Jn){if($e===void 0||P>_t||ei>Gt||Jn>yr)return $e=$r,_t=P,Gt=ei,yr=Jn,void(q=0);var Sn=pn([$e,$r],D.properties);if(M(Sn,P,V,Jn,q)===!1)return!1;q++,$e=$r})!==!1&&void 0}}})}function co(b,M,D){var P=D,V=!1;return io(b,function(q,be,$e,_t,Gt){P=V===!1&&D===void 0?q:M(P,q,be,$e,_t,Gt),V=!0}),P}function Sa(b,M){if(!b)throw Error("geojson is required");Bi(b,function(D,P,V){if(D.geometry!==null){var q=D.geometry.coordinates;switch(D.geometry.type){case"LineString":if(M(D,P,V,0,0)===!1)return!1;break;case"Polygon":for(var be=0;q.length>be;be++)if(M(pn(q[be],D.properties),P,V,be)===!1)return!1}}})}var Ko=Object.freeze({__proto__:null,coordAll:kn,coordEach:nr,coordReduce:function(b,M,D,P){var V=D;return nr(b,function(q,be,$e,_t,Gt){V=be===0&&D===void 0?q:M(V,q,be,$e,_t,Gt)},P),V},featureEach:qr,featureReduce:function(b,M,D){var P=D;return qr(b,function(V,q){P=q===0&&D===void 0?V:M(P,V,q)}),P},findPoint:function(b,M){if(!yt(M=M||{}))throw Error("options is invalid");var D,P=M.featureIndex||0,V=M.multiFeatureIndex||0,q=M.geometryIndex||0,be=M.coordIndex||0,$e=M.properties;switch(b.type){case"FeatureCollection":0>P&&(P=b.features.length+P),$e=$e||b.features[P].properties,D=b.features[P].geometry;break;case"Feature":$e=$e||b.properties,D=b.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=b;break;default:throw Error("geojson is invalid")}if(D===null)return null;var _t=D.coordinates;switch(D.type){case"Point":return Rr(_t,$e,M);case"MultiPoint":return 0>V&&(V=_t.length+V),Rr(_t[V],$e,M);case"LineString":return 0>be&&(be=_t.length+be),Rr(_t[be],$e,M);case"Polygon":return 0>q&&(q=_t.length+q),0>be&&(be=_t[q].length+be),Rr(_t[q][be],$e,M);case"MultiLineString":return 0>V&&(V=_t.length+V),0>be&&(be=_t[V].length+be),Rr(_t[V][be],$e,M);case"MultiPolygon":return 0>V&&(V=_t.length+V),0>q&&(q=_t[V].length+q),0>be&&(be=_t[V][q].length-be),Rr(_t[V][q][be],$e,M)}throw Error("geojson is invalid")},findSegment:function(b,M){if(!yt(M=M||{}))throw Error("options is invalid");var D,P=M.featureIndex||0,V=M.multiFeatureIndex||0,q=M.geometryIndex||0,be=M.segmentIndex||0,$e=M.properties;switch(b.type){case"FeatureCollection":0>P&&(P=b.features.length+P),$e=$e||b.features[P].properties,D=b.features[P].geometry;break;case"Feature":$e=$e||b.properties,D=b.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=b;break;default:throw Error("geojson is invalid")}if(D===null)return null;var _t=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return 0>be&&(be=_t.length+be-1),pn([_t[be],_t[be+1]],$e,M);case"Polygon":return 0>q&&(q=_t.length+q),0>be&&(be=_t[q].length+be-1),pn([_t[q][be],_t[q][be+1]],$e,M);case"MultiLineString":return 0>V&&(V=_t.length+V),0>be&&(be=_t[V].length+be-1),pn([_t[V][be],_t[V][be+1]],$e,M);case"MultiPolygon":return 0>V&&(V=_t.length+V),0>q&&(q=_t[V].length+q),0>be&&(be=_t[V][q].length-be-1),pn([_t[V][q][be],_t[V][q][be+1]],$e,M)}throw Error("geojson is invalid")},flattenEach:Bi,flattenReduce:function(b,M,D){var P=D;return Bi(b,function(V,q,be){P=q===0&&be===0&&D===void 0?V:M(P,V,q,be)}),P},geomEach:Nn,geomReduce:Mi,lineEach:Sa,lineReduce:function(b,M,D){var P=D;return Sa(b,function(V,q,be,$e){P=q===0&&D===void 0?V:M(P,V,q,be,$e)}),P},propEach:Mr,propReduce:function(b,M,D){var P=D;return Mr(b,function(V,q){P=q===0&&D===void 0?V:M(P,V,q)}),P},segmentEach:io,segmentReduce:co});function wo(b){var M=[1/0,1/0,-1/0,-1/0];return nr(b,function(D){M[0]>D[0]&&(M[0]=D[0]),M[1]>D[1]&&(M[1]=D[1]),D[0]>M[2]&&(M[2]=D[0]),D[1]>M[3]&&(M[3]=D[1])}),M}wo.default=wo;var Oo=Object.freeze({__proto__:null,default:wo});function Ho(b){if(!b)throw Error("coord is required");if(!Array.isArray(b)){if(b.type==="Feature"&&b.geometry!==null&&b.geometry.type==="Point")return b.geometry.coordinates;if(b.type==="Point")return b.coordinates}if(Array.isArray(b)&&b.length>=2&&!Array.isArray(b[0])&&!Array.isArray(b[1]))return b;throw Error("coord must be GeoJSON Point or an Array of numbers")}function Io(b){if(Array.isArray(b))return b;if(b.type==="Feature"){if(b.geometry!==null)return b.geometry.coordinates}else if(b.coordinates)return b.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function qs(b){return b.type==="Feature"?b.geometry:b}function Il(b,M){return b.type==="FeatureCollection"?"FeatureCollection":b.type==="GeometryCollection"?"GeometryCollection":b.type==="Feature"&&b.geometry!==null?b.geometry.type:b.type}function Ao(b,M,D,P,V){Va(b,M,D||0,P||b.length-1,V||Ws)}function Va(b,M,D,P,V){for(;P>D;){if(P-D>600){var q=P-D+1,be=M-D+1,$e=Math.log(q),_t=.5*Math.exp(2*$e/3),Gt=.5*Math.sqrt($e*_t*(q-_t)/q)*(0>be-q/2?-1:1);Va(b,M,Math.max(D,Math.floor(M-be*_t/q+Gt)),Math.min(P,Math.floor(M+(q-be)*_t/q+Gt)),V)}var yr=b[M],$r=D,an=P;for(gs(b,D,M),V(b[P],yr)>0&&gs(b,D,P);an>$r;){for(gs(b,$r,an),$r++,an--;0>V(b[$r],yr);)$r++;for(;V(b[an],yr)>0;)an--}V(b[D],yr)===0?gs(b,D,an):gs(b,++an,P),an>M||(D=an+1),M>an||(P=an-1)}}function gs(b,M,D){var P=b[M];b[M]=b[D],b[D]=P}function Ws(b,M){return M>b?-1:b>M?1:0}function bs(b,M,D){if(!D)return M.indexOf(b);for(let P=0;M.length>P;P++)if(D(b,M[P]))return P;return-1}function Ps(b,M){Xs(b,0,b.children.length,M,b)}function Xs(b,M,D,P,V){V||(V=Us(null)),V.minX=1/0,V.minY=1/0,V.maxX=-1/0,V.maxY=-1/0;for(let q=M;D>q;q++){const be=b.children[q];gl(V,b.leaf?P(be):be)}return V}function gl(b,M){return b.minX=Math.min(b.minX,M.minX),b.minY=Math.min(b.minY,M.minY),b.maxX=Math.max(b.maxX,M.maxX),b.maxY=Math.max(b.maxY,M.maxY),b}function jf(b,M){return b.minX-M.minX}function Mu(b,M){return b.minY-M.minY}function yl(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function lc(b){return b.maxX-b.minX+(b.maxY-b.minY)}function Lc(b,M){const D=Math.max(b.minX,M.minX),P=Math.max(b.minY,M.minY),V=Math.min(b.maxX,M.maxX),q=Math.min(b.maxY,M.maxY);return Math.max(0,V-D)*Math.max(0,q-P)}function dh(b,M){return!(b.minX>M.minX||b.minY>M.minY||M.maxX>b.maxX||M.maxY>b.maxY)}function _l(b,M){return!(M.minX>b.maxX||M.minY>b.maxY||b.minX>M.maxX||b.minY>M.maxY)}function Us(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function th(b,M,D,P,V){const q=[M,D];for(;q.length;){if(P>=(D=q.pop())-(M=q.pop()))continue;const be=M+Math.ceil((D-M)/P/2)*P;Ao(b,be,M,D,V),q.push(M,be,be,D)}}var kf=Object.freeze({__proto__:null,default:class{constructor(b=9){this._maxEntries=Math.max(4,b),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(b){let M=this.data;const D=[];if(!_l(b,M))return D;const P=this.toBBox,V=[];for(;M;){for(let q=0;M.children.length>q;q++){const be=M.children[q],$e=M.leaf?P(be):be;_l(b,$e)&&(M.leaf?D.push(be):dh(b,$e)?this._all(be,D):V.push(be))}M=V.pop()}return D}collides(b){let M=this.data;if(!_l(b,M))return!1;const D=[];for(;M;){for(let P=0;M.children.length>P;P++){const V=M.children[P],q=M.leaf?this.toBBox(V):V;if(_l(b,q)){if(M.leaf||dh(b,q))return!0;D.push(V)}}M=D.pop()}return!1}load(b){if(!b||!b.length)return this;if(this._minEntries>b.length){for(let D=0;b.length>D;D++)this.insert(b[D]);return this}let M=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(M.height>this.data.height){const D=this.data;this.data=M,M=D}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this}insert(b){return b&&this._insert(b,this.data.height-1),this}clear(){return this.data=Us([]),this}remove(b,M){if(!b)return this;let D=this.data;const P=this.toBBox(b),V=[],q=[];let be,$e,_t;for(;D||V.length;){if(D||(D=V.pop(),$e=V[V.length-1],be=q.pop(),_t=!0),D.leaf){const Gt=bs(b,D.children,M);if(Gt!==-1)return D.children.splice(Gt,1),V.push(D),this._condense(V),this}_t||D.leaf||!dh(D,P)?$e?(be++,D=$e.children[be],_t=!1):D=null:(V.push(D),q.push(be),be=0,$e=D,D=D.children[0])}return this}toBBox(b){return b}compareMinX(b,M){return b.minX-M.minX}compareMinY(b,M){return b.minY-M.minY}toJSON(){return this.data}fromJSON(b){return this.data=b,this}_all(b,M){const D=[];for(;b;)b.leaf?M.push(...b.children):D.push(...b.children),b=D.pop();return M}_build(b,M,D,P){const V=D-M+1;let q,be=this._maxEntries;if(be>=V)return q=Us(b.slice(M,D+1)),Ps(q,this.toBBox),q;P||(be=Math.ceil(V/Math.pow(be,(P=Math.ceil(Math.log(V)/Math.log(be)))-1))),q=Us([]),q.leaf=!1,q.height=P;const $e=Math.ceil(V/be),_t=$e*Math.ceil(Math.sqrt(be));th(b,M,D,_t,this.compareMinX);for(let Gt=M;D>=Gt;Gt+=_t){const yr=Math.min(Gt+_t-1,D);th(b,Gt,yr,$e,this.compareMinY);for(let $r=Gt;yr>=$r;$r+=$e)q.children.push(this._build(b,$r,Math.min($r+$e-1,yr),P-1))}return Ps(q,this.toBBox),q}_chooseSubtree(b,M,D,P){for(;P.push(M),!M.leaf&&P.length-1!==D;){let be,$e=1/0,_t=1/0;for(let Gt=0;M.children.length>Gt;Gt++){const yr=M.children[Gt],$r=yl(yr),an=(Math.max((q=yr).maxX,(V=b).maxX)-Math.min(q.minX,V.minX))*(Math.max(q.maxY,V.maxY)-Math.min(q.minY,V.minY))-$r;_t>an?(_t=an,$e=$e>$r?$r:$e,be=yr):an===_t&&$e>$r&&($e=$r,be=yr)}M=be||M.children[0]}var V,q;return M}_insert(b,M,D){const P=D?b:this.toBBox(b),V=[],q=this._chooseSubtree(P,this.data,M,V);for(q.children.push(b),gl(q,P);M>=0&&V[M].children.length>this._maxEntries;)this._split(V,M),M--;this._adjustParentBBoxes(P,V,M)}_split(b,M){const D=b[M],P=D.children.length,V=this._minEntries;this._chooseSplitAxis(D,V,P);const q=this._chooseSplitIndex(D,V,P),be=Us(D.children.splice(q,D.children.length-q));be.height=D.height,be.leaf=D.leaf,Ps(D,this.toBBox),Ps(be,this.toBBox),M?b[M-1].children.push(be):this._splitRoot(D,be)}_splitRoot(b,M){this.data=Us([b,M]),this.data.height=b.height+1,this.data.leaf=!1,Ps(this.data,this.toBBox)}_chooseSplitIndex(b,M,D){let P,V=1/0,q=1/0;for(let be=M;D-M>=be;be++){const $e=Xs(b,0,be,this.toBBox),_t=Xs(b,be,D,this.toBBox),Gt=Lc($e,_t),yr=yl($e)+yl(_t);V>Gt?(V=Gt,P=be,q=q>yr?yr:q):Gt===V&&q>yr&&(q=yr,P=be)}return P||D-M}_chooseSplitAxis(b,M,D){const P=b.leaf?this.compareMinX:jf,V=b.leaf?this.compareMinY:Mu,q=this._allDistMargin(b,M,D,P);this._allDistMargin(b,M,D,V)>q&&b.children.sort(P)}_allDistMargin(b,M,D,P){b.children.sort(P);const V=this.toBBox,q=Xs(b,0,M,V),be=Xs(b,D-M,D,V);let $e=lc(q)+lc(be);for(let _t=M;D-M>_t;_t++){const Gt=b.children[_t];gl(q,b.leaf?V(Gt):Gt),$e+=lc(q)}for(let _t=D-M-1;_t>=M;_t--){const Gt=b.children[_t];gl(be,b.leaf?V(Gt):Gt),$e+=lc(be)}return $e}_adjustParentBBoxes(b,M,D){for(let P=D;P>=0;P--)gl(M[P],b)}_condense(b){for(let M,D=b.length-1;D>=0;D--)b[D].children.length===0?D>0?(M=b[D-1].children,M.splice(M.indexOf(b[D]),1)):this.clear():Ps(b[D],this.toBBox)}}});function wf(b,M){return M>b?-1:b>M?1:0}var lf=Object.freeze({__proto__:null,default:class{constructor(b=[],M=wf){if(this.data=b,this.length=this.data.length,this.compare=M,this.length>0)for(let D=(this.length>>1)-1;D>=0;D--)this._down(D)}push(b){this.data.push(b),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const b=this.data[0],M=this.data.pop();return this.length--,this.length>0&&(this.data[0]=M,this._down(0)),b}peek(){return this.data[0]}_up(b){const{data:M,compare:D}=this,P=M[b];for(;b>0;){const V=b-1>>1,q=M[V];if(D(P,q)>=0)break;M[b]=q,b=V}M[b]=P}_down(b){const{data:M,compare:D}=this,P=this.length>>1,V=M[b];for(;P>b;){let q=1+(b<<1),be=M[q];const $e=q+1;if(this.length>$e&&0>D(M[$e],be)&&(q=$e,be=M[$e]),D(be,V)>=0)break;M[b]=be,b=q}M[b]=V}}}),gd=function(b,M,D,P){var V=b[0],q=b[1],be=!1;D===void 0&&(D=0),P===void 0&&(P=M.length);for(var $e=(P-D)/2,_t=0,Gt=$e-1;$e>_t;Gt=_t++){var yr=M[D+2*_t+0],$r=M[D+2*_t+1],an=M[D+2*Gt+1];$r>q!=an>q&&(M[D+2*Gt+0]-yr)*(q-$r)/(an-$r)+yr>V&&(be=!be)}return be},Kh=function(b,M,D,P){var V=b[0],q=b[1],be=!1;D===void 0&&(D=0),P===void 0&&(P=M.length);for(var $e=P-D,_t=0,Gt=$e-1;$e>_t;Gt=_t++){var yr=M[_t+D][0],$r=M[_t+D][1],an=M[Gt+D][1];$r>q!=an>q&&(M[Gt+D][0]-yr)*(q-$r)/(an-$r)+yr>V&&(be=!be)}return be},yc=function(b,M,D,P){return M.length>0&&Array.isArray(M[0])?Kh(b,M,D,P):gd(b,M,D,P)},Eh=gd;yc.nested=Kh,yc.flat=Eh;var cf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof m.g!="undefined"?m.g:typeof self!="undefined"?self:{};function Af(b,M,D){return b(D={path:M,exports:{},require:function(P,V){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},D.exports),D.exports}function _f(b){if(b.__esModule)return b;var M=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(b).forEach(function(D){var P=Object.getOwnPropertyDescriptor(b,D);Object.defineProperty(M,D,P.get?P:{enumerable:!0,get:function(){return b[D]}})}),M}var Dc=Af(function(b,M){(function(D){const V=33306690738754706e-32;function q(Jn,Sn,Xn,ai,ln){let pi,gi,Li,Ki,ua=Sn[0],la=ai[0],Lo=0,Fa=0;la>ua==la>-ua?(pi=ua,ua=Sn[++Lo]):(pi=la,la=ai[++Fa]);let go=0;if(Jn>Lo&&Xn>Fa)for(la>ua==la>-ua?(Li=pi-((gi=ua+pi)-ua),ua=Sn[++Lo]):(Li=pi-((gi=la+pi)-la),la=ai[++Fa]),pi=gi,Li!==0&&(ln[go++]=Li);Jn>Lo&&Xn>Fa;)la>ua==la>-ua?(Li=pi-((gi=pi+ua)-(Ki=gi-pi))+(ua-Ki),ua=Sn[++Lo]):(Li=pi-((gi=pi+la)-(Ki=gi-pi))+(la-Ki),la=ai[++Fa]),pi=gi,Li!==0&&(ln[go++]=Li);for(;Jn>Lo;)Li=pi-((gi=pi+ua)-(Ki=gi-pi))+(ua-Ki),ua=Sn[++Lo],pi=gi,Li!==0&&(ln[go++]=Li);for(;Xn>Fa;)Li=pi-((gi=pi+la)-(Ki=gi-pi))+(la-Ki),la=ai[++Fa],pi=gi,Li!==0&&(ln[go++]=Li);return pi===0&&go!==0||(ln[go++]=pi),go}function be(Jn){return new Float64Array(Jn)}const $e=33306690738754716e-32,_t=22204460492503146e-32,Gt=11093356479670487e-47,yr=be(4),$r=be(8),an=be(12),Un=be(16),ei=be(4);D.orient2d=function(Jn,Sn,Xn,ai,ln,pi){const gi=(Sn-pi)*(Xn-ln),Li=(Jn-ln)*(ai-pi),Ki=gi-Li;if(gi===0||Li===0||gi>0!=Li>0)return Ki;const ua=Math.abs(gi+Li);return $e*ua>Math.abs(Ki)?-function(la,Lo,Fa,go,Qs,e,i){let c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n,ri;const _i=la-Qs,xi=Fa-Qs,Ii=Lo-e,ta=go-e;Q=(yn=(Rt=_i-(tt=(ge=134217729*_i)-(ge-_i)))*(Jt=ta-(Ft=(ge=134217729*ta)-(ge-ta)))-((rn=_i*ta)-tt*Ft-Rt*Ft-tt*Jt))-(dr=yn-($n=(Rt=Ii-(tt=(ge=134217729*Ii)-(ge-Ii)))*(Jt=xi-(Ft=(ge=134217729*xi)-(ge-xi)))-((vn=Ii*xi)-tt*Ft-Rt*Ft-tt*Jt))),yr[0]=yn-(dr+Q)+(Q-$n),Q=(tn=rn-((Cr=rn+dr)-(Q=Cr-rn))+(dr-Q))-(dr=tn-vn),yr[1]=tn-(dr+Q)+(Q-vn),Q=(ri=Cr+dr)-Cr,yr[2]=Cr-(ri-Q)+(dr-Q),yr[3]=ri;let Qi=function(bo,Eo){let qa=Eo[0];for(let Ss=1;bo>Ss;Ss++)qa+=Eo[Ss];return qa}(4,yr),ja=_t*i;if(Qi>=ja||-Qi>=ja||(c=la-(_i+(Q=la-_i))+(Q-Qs),I=Fa-(xi+(Q=Fa-xi))+(Q-Qs),y=Lo-(Ii+(Q=Lo-Ii))+(Q-e),H=go-(ta+(Q=go-ta))+(Q-e),c===0&&y===0&&I===0&&H===0)||(ja=Gt*i+V*Math.abs(Qi),(Qi+=_i*H+ta*c-(Ii*I+xi*y))>=ja||-Qi>=ja))return Qi;Q=(yn=(Rt=c-(tt=(ge=134217729*c)-(ge-c)))*(Jt=ta-(Ft=(ge=134217729*ta)-(ge-ta)))-((rn=c*ta)-tt*Ft-Rt*Ft-tt*Jt))-(dr=yn-($n=(Rt=y-(tt=(ge=134217729*y)-(ge-y)))*(Jt=xi-(Ft=(ge=134217729*xi)-(ge-xi)))-((vn=y*xi)-tt*Ft-Rt*Ft-tt*Jt))),ei[0]=yn-(dr+Q)+(Q-$n),Q=(tn=rn-((Cr=rn+dr)-(Q=Cr-rn))+(dr-Q))-(dr=tn-vn),ei[1]=tn-(dr+Q)+(Q-vn),Q=(ri=Cr+dr)-Cr,ei[2]=Cr-(ri-Q)+(dr-Q),ei[3]=ri;const qn=q(4,yr,4,ei,$r);Q=(yn=(Rt=_i-(tt=(ge=134217729*_i)-(ge-_i)))*(Jt=H-(Ft=(ge=134217729*H)-(ge-H)))-((rn=_i*H)-tt*Ft-Rt*Ft-tt*Jt))-(dr=yn-($n=(Rt=Ii-(tt=(ge=134217729*Ii)-(ge-Ii)))*(Jt=I-(Ft=(ge=134217729*I)-(ge-I)))-((vn=Ii*I)-tt*Ft-Rt*Ft-tt*Jt))),ei[0]=yn-(dr+Q)+(Q-$n),Q=(tn=rn-((Cr=rn+dr)-(Q=Cr-rn))+(dr-Q))-(dr=tn-vn),ei[1]=tn-(dr+Q)+(Q-vn),Q=(ri=Cr+dr)-Cr,ei[2]=Cr-(ri-Q)+(dr-Q),ei[3]=ri;const ca=q(qn,$r,4,ei,an);Q=(yn=(Rt=c-(tt=(ge=134217729*c)-(ge-c)))*(Jt=H-(Ft=(ge=134217729*H)-(ge-H)))-((rn=c*H)-tt*Ft-Rt*Ft-tt*Jt))-(dr=yn-($n=(Rt=y-(tt=(ge=134217729*y)-(ge-y)))*(Jt=I-(Ft=(ge=134217729*I)-(ge-I)))-((vn=y*I)-tt*Ft-Rt*Ft-tt*Jt))),ei[0]=yn-(dr+Q)+(Q-$n),Q=(tn=rn-((Cr=rn+dr)-(Q=Cr-rn))+(dr-Q))-(dr=tn-vn),ei[1]=tn-(dr+Q)+(Q-vn),Q=(ri=Cr+dr)-Cr,ei[2]=Cr-(ri-Q)+(dr-Q),ei[3]=ri;const ra=q(ca,an,4,ei,Un);return Un[ra-1]}(Jn,Sn,Xn,ai,ln,pi,ua):Ki},D.orient2dfast=function(Jn,Sn,Xn,ai,ln,pi){return(Sn-pi)*(Xn-ln)-(Jn-ln)*(ai-pi)},Object.defineProperty(D,"__esModule",{value:!0})})(M)}),Ff=_f(kf),Zl=_f(lf),kc=Dc.orient2d;Zl.default&&(Zl=Zl.default);var ad=rh;function rh(b,M,D){M=Math.max(0,M===void 0?2:M),D=D||0;var P=function(ai){for(var ln=ai[0],pi=ai[0],gi=ai[0],Li=ai[0],Ki=0;ai.length>Ki;Ki++){var ua=ai[Ki];ln[0]>ua[0]&&(ln=ua),ua[0]>gi[0]&&(gi=ua),pi[1]>ua[1]&&(pi=ua),ua[1]>Li[1]&&(Li=ua)}var la=[ln,pi,gi,Li],Lo=la.slice();for(Ki=0;ai.length>Ki;Ki++)yc(ai[Ki],la)||Lo.push(ai[Ki]);return function(Fa){Fa.sort(ff);for(var go=[],Qs=0;Fa.length>Qs;Qs++){for(;go.length>=2&&0>=su(go[go.length-2],go[go.length-1],Fa[Qs]);)go.pop();go.push(Fa[Qs])}for(var e=[],i=Fa.length-1;i>=0;i--){for(;e.length>=2&&0>=su(e[e.length-2],e[e.length-1],Fa[i]);)e.pop();e.push(Fa[i])}return e.pop(),go.pop(),go.concat(e)}(Lo)}(b),V=new Ff(16);V.toBBox=function(ai){return{minX:ai[0],minY:ai[1],maxX:ai[0],maxY:ai[1]}},V.compareMinX=function(ai,ln){return ai[0]-ln[0]},V.compareMinY=function(ai,ln){return ai[1]-ln[1]},V.load(b);for(var q,be=[],$e=0;P.length>$e;$e++){var _t=P[$e];V.remove(_t),q=tc(_t,q),be.push(q)}var Gt=new Ff(16);for($e=0;be.length>$e;$e++)Gt.insert(Fc(be[$e]));for(var yr=M*M,$r=D*D;be.length;){var an=be.shift(),Un=an.p,ei=an.next.p,Jn=Tf(Un,ei);if(Jn>=$r){var Sn=Jn/yr;(_t=od(V,an.prev.p,Un,ei,an.next.next.p,Sn,Gt))&&Math.min(Tf(_t,Un),Tf(_t,ei))<=Sn&&(be.push(an),be.push(tc(_t,an)),V.remove(_t),Gt.remove(an),Gt.insert(Fc(an)),Gt.insert(Fc(an.next)))}}an=q;var Xn=[];do Xn.push(an.p),an=an.next;while(an!==q);return Xn.push(an.p),Xn}function od(b,M,D,P,V,q,be){for(var $e=new Zl([],Yo),_t=b.data;_t;){for(var Gt=0;_t.children.length>Gt;Gt++){var yr=_t.children[Gt],$r=_t.leaf?_c(yr,D,P):Gs(D,P,yr);q<$r||$e.push({node:yr,dist:$r})}for(;$e.length&&!$e.peek().node.children;){var an=$e.pop(),Un=an.node,ei=_c(Un,M,D),Jn=_c(Un,P,V);if(ei>an.dist&&Jn>an.dist&&dl(D,Un,be)&&dl(P,Un,be))return Un}(_t=$e.pop())&&(_t=_t.node)}return null}function Yo(b,M){return b.dist-M.dist}function Gs(b,M,D){if(Kl(b,D)||Kl(M,D))return 0;var P=Hl(b[0],b[1],M[0],M[1],D.minX,D.minY,D.maxX,D.minY);if(P===0)return 0;var V=Hl(b[0],b[1],M[0],M[1],D.minX,D.minY,D.minX,D.maxY);if(V===0)return 0;var q=Hl(b[0],b[1],M[0],M[1],D.maxX,D.minY,D.maxX,D.maxY);if(q===0)return 0;var be=Hl(b[0],b[1],M[0],M[1],D.minX,D.maxY,D.maxX,D.maxY);return be===0?0:Math.min(P,V,q,be)}function Kl(b,M){return!(M.minX>b[0]||b[0]>M.maxX||M.minY>b[1]||b[1]>M.maxY)}function dl(b,M,D){for(var P,V,q,be,$e=D.search({minX:Math.min(b[0],M[0]),minY:Math.min(b[1],M[1]),maxX:Math.max(b[0],M[0]),maxY:Math.max(b[1],M[1])}),_t=0;$e.length>_t;_t++)if(V=$e[_t].next.p,q=b,(P=$e[_t].p)!==(be=M)&&V!==q&&su(P,V,q)>0!=su(P,V,be)>0&&su(q,be,P)>0!=su(q,be,V)>0)return!1;return!0}function su(b,M,D){return kc(b[0],b[1],M[0],M[1],D[0],D[1])}function Fc(b){var M=b.p,D=b.next.p;return b.minX=Math.min(M[0],D[0]),b.minY=Math.min(M[1],D[1]),b.maxX=Math.max(M[0],D[0]),b.maxY=Math.max(M[1],D[1]),b}function tc(b,M){var D={p:b,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return M?(D.next=M.next,D.prev=M,M.next.prev=D,M.next=D):(D.prev=D,D.next=D),D}function Tf(b,M){var D=b[0]-M[0],P=b[1]-M[1];return D*D+P*P}function _c(b,M,D){var P=M[0],V=M[1],q=D[0]-P,be=D[1]-V;if(q!==0||be!==0){var $e=((b[0]-P)*q+(b[1]-V)*be)/(q*q+be*be);$e>1?(P=D[0],V=D[1]):$e>0&&(P+=q*$e,V+=be*$e)}return(q=b[0]-P)*q+(be=b[1]-V)*be}function Hl(b,M,D,P,V,q,be,$e){var _t,Gt,yr,$r,an=D-b,Un=P-M,ei=be-V,Jn=$e-q,Sn=b-V,Xn=M-q,ai=an*an+Un*Un,ln=an*ei+Un*Jn,pi=ei*ei+Jn*Jn,gi=an*Sn+Un*Xn,Li=ei*Sn+Jn*Xn,Ki=ai*pi-ln*ln,ua=Ki,la=Ki;Ki===0?(Gt=0,ua=1,$r=Li,la=pi):($r=ai*Li-ln*gi,0>(Gt=ln*Li-pi*gi)?(Gt=0,$r=Li,la=pi):Gt>ua&&(Gt=ua,$r=Li+ln,la=pi)),0>$r?($r=0,0>-gi?Gt=0:-gi>ai?Gt=ua:(Gt=-gi,ua=ai)):$r>la&&($r=la,0>-gi+ln?Gt=0:-gi+ln>ai?Gt=ua:(Gt=-gi+ln,ua=ai));var Lo=(1-(yr=$r===0?0:$r/la))*V+yr*be-((1-(_t=Gt===0?0:Gt/ua))*b+_t*D),Fa=(1-yr)*q+yr*$e-((1-_t)*M+_t*P);return Lo*Lo+Fa*Fa}function ff(b,M){return b[0]===M[0]?b[1]-M[1]:b[0]-M[0]}function xc(b,M,D){D===void 0&&(D={});var P=Ho(b),V=Ho(M),q=k(V[1]-P[1]),be=k(V[0]-P[0]),$e=k(P[1]),_t=k(V[1]),Gt=Math.pow(Math.sin(q/2),2)+Math.pow(Math.sin(be/2),2)*Math.cos($e)*Math.cos(_t);return Yi(2*Math.atan2(Math.sqrt(Gt),Math.sqrt(1-Gt)),D.units)}function Yh(b){return function(M,D){D===void 0&&(D={});var P=Number(M[0]),V=Number(M[1]),q=Number(M[2]),be=Number(M[3]);if(M.length===6)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var $e=[P,V];return Mn([[$e,[q,V],[q,be],[P,be],$e]],D.properties,{bbox:M,id:D.id})}(wo(b))}function Uh(b,M,D,P){P===void 0&&(P={});var V=Ho(b),q=k(V[0]),be=k(V[1]),$e=k(D),_t=oa(M,P.units),Gt=Math.asin(Math.sin(be)*Math.cos(_t)+Math.cos(be)*Math.sin(_t)*Math.cos($e));return Rr([Ma(q+Math.atan2(Math.sin($e)*Math.sin(_t)*Math.cos(be),Math.cos(_t)-Math.sin(be)*Math.sin(Gt))),Ma(Gt)],P.properties)}function Gc(b,M,D){if(D===void 0&&(D={}),D.final===!0)return function(Gt,yr){var $r=Gc(yr,Gt);return $r=($r+180)%360}(b,M);var P=Ho(b),V=Ho(M),q=k(P[0]),be=k(V[0]),$e=k(P[1]),_t=k(V[1]);return Ma(Math.atan2(Math.sin(be-q)*Math.cos(_t),Math.cos($e)*Math.sin(_t)-Math.sin($e)*Math.cos(_t)*Math.cos(be-q)))}function Mf(b,M){M===void 0&&(M={});var D=wo(b);return Rr([(D[0]+D[2])/2,(D[1]+D[3])/2],M.properties,M)}function nh(b,M){M===void 0&&(M={});var D=0,P=0,V=0;return nr(b,function(q){D+=q[0],P+=q[1],V++},!0),Rr([D/V,P/V],M.properties)}function Qn(b,M){switch(M===void 0&&(M={}),Il(b)){case"Point":return Rr(Ho(b),M.properties);case"Polygon":var D=[];nr(b,function(ln){D.push(ln)});var P,V,q,be,$e,_t,Gt,yr,$r=nh(b,{properties:M.properties}),an=$r.geometry.coordinates,Un=0,ei=0,Jn=0,Sn=D.map(function(ln){return[ln[0]-an[0],ln[1]-an[1]]});for(P=0;D.length-1>P;P++)Jn+=yr=(be=(V=Sn[P])[0])*(Gt=(q=Sn[P+1])[1])-($e=q[0])*(_t=V[1]),Un+=(be+$e)*yr,ei+=(_t+Gt)*yr;if(Jn===0)return $r;var Xn=1/(6*(.5*Jn));return Rr([an[0]+Xn*Un,an[1]+Xn*ei],M.properties);default:var ai=function(ln,pi){pi===void 0&&(pi={}),pi.concavity=pi.concavity||1/0;var gi=[];if(nr(ln,function(Ki){gi.push([Ki[0],Ki[1]])}),!gi.length)return null;var Li=ad(gi,pi.concavity);return Li.length>3?Mn([Li]):null}(b);return ai?Qn(ai,{properties:M.properties}):nh(b,{properties:M.properties})}}function fa(b){if(!b)throw Error("geojson is required");var M=[];return Bi(b,function(D){(function(P,V){var q=[],be=P.geometry;if(be!==null){switch(be.type){case"Polygon":q=Io(be);break;case"LineString":q=[Io(be)]}q.forEach(function($e){var _t=function(Gt,yr){var $r=[];return Gt.reduce(function(an,Un){var ei,Jn,Sn,Xn,ai,ln,pi=pn([an,Un],yr);return pi.bbox=[(ai=(Jn=Un)[0])>(Sn=(ei=an)[0])?Sn:ai,(ln=Jn[1])>(Xn=ei[1])?Xn:ln,Sn>ai?Sn:ai,Xn>ln?Xn:ln],$r.push(pi),Un}),$r}($e,P.properties);_t.forEach(function(Gt){Gt.id=V.length,V.push(Gt)})})}})(D,M)}),wn(M)}ad.default=rh;function $i(b,M,D){if(!D)return M.indexOf(b);for(let P=0;M.length>P;P++)if(D(b,M[P]))return P;return-1}function $o(b,M){lo(b,0,b.children.length,M,b)}function lo(b,M,D,P,V){V||(V=Ul(null)),V.minX=1/0,V.minY=1/0,V.maxX=-1/0,V.maxY=-1/0;for(let q=M;D>q;q++){const be=b.children[q];Es(V,b.leaf?P(be):be)}return V}function Es(b,M){return b.minX=Math.min(b.minX,M.minX),b.minY=Math.min(b.minY,M.minY),b.maxX=Math.max(b.maxX,M.maxX),b.maxY=Math.max(b.maxY,M.maxY),b}function tl(b,M){return b.minX-M.minX}function al(b,M){return b.minY-M.minY}function Tl(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function Lh(b){return b.maxX-b.minX+(b.maxY-b.minY)}function xf(b,M){const D=Math.max(b.minX,M.minX),P=Math.max(b.minY,M.minY),V=Math.min(b.maxX,M.maxX),q=Math.min(b.maxY,M.maxY);return Math.max(0,V-D)*Math.max(0,q-P)}function Qh(b,M){return!(b.minX>M.minX||b.minY>M.minY||M.maxX>b.maxX||M.maxY>b.maxY)}function $h(b,M){return!(M.minX>b.maxX||M.minY>b.maxY||b.minX>M.maxX||b.minY>M.maxY)}function Ul(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Rl(b,M,D,P,V){const q=[M,D];for(;q.length;){if(P>=(D=q.pop())-(M=q.pop()))continue;const be=M+Math.ceil((D-M)/P/2)*P;Ao(b,be,M,D,V),q.push(M,be,be,D)}}var ol=Object.freeze({__proto__:null,default:class{constructor(b=9){this._maxEntries=Math.max(4,b),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(b){let M=this.data;const D=[];if(!$h(b,M))return D;const P=this.toBBox,V=[];for(;M;){for(let q=0;M.children.length>q;q++){const be=M.children[q],$e=M.leaf?P(be):be;$h(b,$e)&&(M.leaf?D.push(be):Qh(b,$e)?this._all(be,D):V.push(be))}M=V.pop()}return D}collides(b){let M=this.data;if(!$h(b,M))return!1;const D=[];for(;M;){for(let P=0;M.children.length>P;P++){const V=M.children[P],q=M.leaf?this.toBBox(V):V;if($h(b,q)){if(M.leaf||Qh(b,q))return!0;D.push(V)}}M=D.pop()}return!1}load(b){if(!b||!b.length)return this;if(this._minEntries>b.length){for(let D=0;b.length>D;D++)this.insert(b[D]);return this}let M=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(M.height>this.data.height){const D=this.data;this.data=M,M=D}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this}insert(b){return b&&this._insert(b,this.data.height-1),this}clear(){return this.data=Ul([]),this}remove(b,M){if(!b)return this;let D=this.data;const P=this.toBBox(b),V=[],q=[];let be,$e,_t;for(;D||V.length;){if(D||(D=V.pop(),$e=V[V.length-1],be=q.pop(),_t=!0),D.leaf){const Gt=$i(b,D.children,M);if(Gt!==-1)return D.children.splice(Gt,1),V.push(D),this._condense(V),this}_t||D.leaf||!Qh(D,P)?$e?(be++,D=$e.children[be],_t=!1):D=null:(V.push(D),q.push(be),be=0,$e=D,D=D.children[0])}return this}toBBox(b){return b}compareMinX(b,M){return b.minX-M.minX}compareMinY(b,M){return b.minY-M.minY}toJSON(){return this.data}fromJSON(b){return this.data=b,this}_all(b,M){const D=[];for(;b;)b.leaf?M.push(...b.children):D.push(...b.children),b=D.pop();return M}_build(b,M,D,P){const V=D-M+1;let q,be=this._maxEntries;if(be>=V)return q=Ul(b.slice(M,D+1)),$o(q,this.toBBox),q;P||(be=Math.ceil(V/Math.pow(be,(P=Math.ceil(Math.log(V)/Math.log(be)))-1))),q=Ul([]),q.leaf=!1,q.height=P;const $e=Math.ceil(V/be),_t=$e*Math.ceil(Math.sqrt(be));Rl(b,M,D,_t,this.compareMinX);for(let Gt=M;D>=Gt;Gt+=_t){const yr=Math.min(Gt+_t-1,D);Rl(b,Gt,yr,$e,this.compareMinY);for(let $r=Gt;yr>=$r;$r+=$e)q.children.push(this._build(b,$r,Math.min($r+$e-1,yr),P-1))}return $o(q,this.toBBox),q}_chooseSubtree(b,M,D,P){for(;P.push(M),!M.leaf&&P.length-1!==D;){let be,$e=1/0,_t=1/0;for(let Gt=0;M.children.length>Gt;Gt++){const yr=M.children[Gt],$r=Tl(yr),an=(Math.max((q=yr).maxX,(V=b).maxX)-Math.min(q.minX,V.minX))*(Math.max(q.maxY,V.maxY)-Math.min(q.minY,V.minY))-$r;_t>an?(_t=an,$e=$e>$r?$r:$e,be=yr):an===_t&&$e>$r&&($e=$r,be=yr)}M=be||M.children[0]}var V,q;return M}_insert(b,M,D){const P=D?b:this.toBBox(b),V=[],q=this._chooseSubtree(P,this.data,M,V);for(q.children.push(b),Es(q,P);M>=0&&V[M].children.length>this._maxEntries;)this._split(V,M),M--;this._adjustParentBBoxes(P,V,M)}_split(b,M){const D=b[M],P=D.children.length,V=this._minEntries;this._chooseSplitAxis(D,V,P);const q=this._chooseSplitIndex(D,V,P),be=Ul(D.children.splice(q,D.children.length-q));be.height=D.height,be.leaf=D.leaf,$o(D,this.toBBox),$o(be,this.toBBox),M?b[M-1].children.push(be):this._splitRoot(D,be)}_splitRoot(b,M){this.data=Ul([b,M]),this.data.height=b.height+1,this.data.leaf=!1,$o(this.data,this.toBBox)}_chooseSplitIndex(b,M,D){let P,V=1/0,q=1/0;for(let be=M;D-M>=be;be++){const $e=lo(b,0,be,this.toBBox),_t=lo(b,be,D,this.toBBox),Gt=xf($e,_t),yr=Tl($e)+Tl(_t);V>Gt?(V=Gt,P=be,q=q>yr?yr:q):Gt===V&&q>yr&&(q=yr,P=be)}return P||D-M}_chooseSplitAxis(b,M,D){const P=b.leaf?this.compareMinX:tl,V=b.leaf?this.compareMinY:al,q=this._allDistMargin(b,M,D,P);this._allDistMargin(b,M,D,V)>q&&b.children.sort(P)}_allDistMargin(b,M,D,P){b.children.sort(P);const V=this.toBBox,q=lo(b,0,M,V),be=lo(b,D-M,D,V);let $e=Lh(q)+Lh(be);for(let _t=M;D-M>_t;_t++){const Gt=b.children[_t];Es(q,b.leaf?V(Gt):Gt),$e+=Lh(q)}for(let _t=D-M-1;_t>=M;_t--){const Gt=b.children[_t];Es(be,b.leaf?V(Gt):Gt),$e+=Lh(be)}return $e}_adjustParentBBoxes(b,M,D){for(let P=D;P>=0;P--)Es(M[P],b)}_condense(b){for(let M,D=b.length-1;D>=0;D--)b[D].children.length===0?D>0?(M=b[D-1].children,M.splice(M.indexOf(b[D]),1)):this.clear():$o(b[D],this.toBBox)}}}),uu=_f(ol),Bc=_f(Ue),cc=_f(Ko),ao=_f(Oo).default,Ml=cc.featureEach,Hf=Bc.featureCollection;function fl(b){var M=new uu(b);return M.insert=function(D){if(D.type!=="Feature")throw Error("invalid feature");return D.bbox=D.bbox?D.bbox:ao(D),uu.prototype.insert.call(this,D)},M.load=function(D){var P=[];return Array.isArray(D)?D.forEach(function(V){if(V.type!=="Feature")throw Error("invalid features");V.bbox=V.bbox?V.bbox:ao(V),P.push(V)}):Ml(D,function(V){if(V.type!=="Feature")throw Error("invalid features");V.bbox=V.bbox?V.bbox:ao(V),P.push(V)}),uu.prototype.load.call(this,P)},M.remove=function(D,P){if(D.type!=="Feature")throw Error("invalid feature");return D.bbox=D.bbox?D.bbox:ao(D),uu.prototype.remove.call(this,D,P)},M.clear=function(){return uu.prototype.clear.call(this)},M.search=function(D){var P=uu.prototype.search.call(this,this.toBBox(D));return Hf(P)},M.collides=function(D){return uu.prototype.collides.call(this,this.toBBox(D))},M.all=function(){var D=uu.prototype.all.call(this);return Hf(D)},M.toJSON=function(){return uu.prototype.toJSON.call(this)},M.fromJSON=function(D){return uu.prototype.fromJSON.call(this,D)},M.toBBox=function(D){var P;if(D.bbox)P=D.bbox;else if(Array.isArray(D)&&D.length===4)P=D;else if(Array.isArray(D)&&D.length===6)P=[D[0],D[1],D[3],D[4]];else if(D.type==="Feature")P=ao(D);else{if(D.type!=="FeatureCollection")throw Error("invalid geojson");P=ao(D)}return{minX:P[0],minY:P[1],maxX:P[2],maxY:P[3]}},M}var Vl=fl;function Ll(b,M){var D={},P=[];if(b.type==="LineString"&&(b=qi(b)),M.type==="LineString"&&(M=qi(M)),b.type==="Feature"&&M.type==="Feature"&&b.geometry!==null&&M.geometry!==null&&b.geometry.type==="LineString"&&M.geometry.type==="LineString"&&b.geometry.coordinates.length===2&&M.geometry.coordinates.length===2){var V=jh(b,M);return V&&P.push(V),wn(P)}var q=Vl();return q.load(fa(M)),qr(fa(b),function(be){qr(q.search(be),function($e){var _t=jh(be,$e);if(_t){var Gt=Io(_t).join(",");D[Gt]||(D[Gt]=!0,P.push(_t))}})}),wn(P)}function jh(b,M){var D=Io(b),P=Io(M);if(D.length!==2)throw Error("<intersects> line1 must only contain 2 coordinates");if(P.length!==2)throw Error("<intersects> line2 must only contain 2 coordinates");var V=D[0][0],q=D[0][1],be=D[1][0],$e=D[1][1],_t=P[0][0],Gt=P[0][1],yr=P[1][0],$r=P[1][1],an=($r-Gt)*(be-V)-(yr-_t)*($e-q),Un=(yr-_t)*(q-Gt)-($r-Gt)*(V-_t),ei=(be-V)*(q-Gt)-($e-q)*(V-_t);if(an===0)return null;var Jn=Un/an,Sn=ei/an;return 0>Jn||Jn>1||0>Sn||Sn>1?null:Rr([V+Jn*(be-V),q+Jn*($e-q)])}Vl.default=fl;var Qa=6378137;function Yl(b){return Mi(b,function(M,D){return M+function(P){var V,q=0;switch(P.type){case"Polygon":return Vf(P.coordinates);case"MultiPolygon":for(V=0;P.coordinates.length>V;V++)q+=Vf(P.coordinates[V]);return q;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(D)},0)}function Vf(b){var M=0;if(b&&b.length>0){M+=Math.abs(ih(b[0]));for(var D=1;b.length>D;D++)M-=Math.abs(ih(b[D]))}return M}function ih(b){var M,D,P,V,q,be,$e=0,_t=b.length;if(_t>2){for(be=0;_t>be;be++)be===_t-2?(P=_t-2,V=_t-1,q=0):be===_t-1?(P=_t-1,V=0,q=1):(P=be,V=be+1,q=be+2),M=b[P],D=b[V],$e+=(Vu(b[q][0])-Vu(M[0]))*Math.sin(Vu(D[1]));$e=$e*Qa*Qa/2}return $e}function Vu(b){return b*Math.PI/180}function hf(b,M){return M===void 0&&(M={}),co(b,function(D,P){var V=P.geometry.coordinates;return D+xc(V[0],V[1],M)},0)}function Hh(b,M){M===void 0&&(M={});var D=qs(b);switch(M.properties||b.type!=="Feature"||(M.properties=b.properties),D.type){case"Polygon":return function(P,V){V===void 0&&(V={});var q=qs(P),be=q.coordinates,$e=V.properties?V.properties:P.type==="Feature"?P.properties:{};return bc(be,$e)}(D,M);case"MultiPolygon":return function(P,V){V===void 0&&(V={});var q=qs(P),be=q.coordinates,$e=V.properties?V.properties:P.type==="Feature"?P.properties:{},_t=[];return be.forEach(function(Gt){_t.push(bc(Gt,$e))}),wn(_t)}(D,M);default:throw Error("invalid poly")}}function bc(b,M){return b.length>1?Kn(b,M):pn(b[0],M)}function Ec(b){for(var M,D,P=Io(b),V=0,q=1;P.length>q;)M=D||P[0],V+=((D=P[q])[0]-M[0])*(D[1]+M[1]),q++;return V>0}var ah=Af(function(b){var M=Object.prototype.hasOwnProperty,D="~";function P(){}function V(_t,Gt,yr){this.fn=_t,this.context=Gt,this.once=yr||!1}function q(_t,Gt,yr,$r,an){if(typeof yr!="function")throw new TypeError("The listener must be a function");var Un=new V(yr,$r||_t,an),ei=D?D+Gt:Gt;return _t._events[ei]?_t._events[ei].fn?_t._events[ei]=[_t._events[ei],Un]:_t._events[ei].push(Un):(_t._events[ei]=Un,_t._eventsCount++),_t}function be(_t,Gt){--_t._eventsCount==0?_t._events=new P:delete _t._events[Gt]}function $e(){this._events=new P,this._eventsCount=0}Object.create&&(P.prototype=Object.create(null),new P().__proto__||(D=!1)),$e.prototype.eventNames=function(){var _t,Gt,yr=[];if(this._eventsCount===0)return yr;for(Gt in _t=this._events)M.call(_t,Gt)&&yr.push(D?Gt.slice(1):Gt);return Object.getOwnPropertySymbols?yr.concat(Object.getOwnPropertySymbols(_t)):yr},$e.prototype.listeners=function(_t){var Gt=this._events[D?D+_t:_t];if(!Gt)return[];if(Gt.fn)return[Gt.fn];for(var yr=0,$r=Gt.length,an=Array($r);$r>yr;yr++)an[yr]=Gt[yr].fn;return an},$e.prototype.listenerCount=function(_t){var Gt=this._events[D?D+_t:_t];return Gt?Gt.fn?1:Gt.length:0},$e.prototype.emit=function(_t,Gt,yr,$r,an,Un){var ei=D?D+_t:_t;if(!this._events[ei])return!1;var Jn,Sn,Xn=this._events[ei],ai=arguments.length;if(Xn.fn){switch(Xn.once&&this.removeListener(_t,Xn.fn,void 0,!0),ai){case 1:return Xn.fn.call(Xn.context),!0;case 2:return Xn.fn.call(Xn.context,Gt),!0;case 3:return Xn.fn.call(Xn.context,Gt,yr),!0;case 4:return Xn.fn.call(Xn.context,Gt,yr,$r),!0;case 5:return Xn.fn.call(Xn.context,Gt,yr,$r,an),!0;case 6:return Xn.fn.call(Xn.context,Gt,yr,$r,an,Un),!0}for(Sn=1,Jn=Array(ai-1);ai>Sn;Sn++)Jn[Sn-1]=arguments[Sn];Xn.fn.apply(Xn.context,Jn)}else{var ln,pi=Xn.length;for(Sn=0;pi>Sn;Sn++)switch(Xn[Sn].once&&this.removeListener(_t,Xn[Sn].fn,void 0,!0),ai){case 1:Xn[Sn].fn.call(Xn[Sn].context);break;case 2:Xn[Sn].fn.call(Xn[Sn].context,Gt);break;case 3:Xn[Sn].fn.call(Xn[Sn].context,Gt,yr);break;case 4:Xn[Sn].fn.call(Xn[Sn].context,Gt,yr,$r);break;default:if(!Jn)for(ln=1,Jn=Array(ai-1);ai>ln;ln++)Jn[ln-1]=arguments[ln];Xn[Sn].fn.apply(Xn[Sn].context,Jn)}}return!0},$e.prototype.on=function(_t,Gt,yr){return q(this,_t,Gt,yr,!1)},$e.prototype.once=function(_t,Gt,yr){return q(this,_t,Gt,yr,!0)},$e.prototype.removeListener=function(_t,Gt,yr,$r){var an=D?D+_t:_t;if(!this._events[an])return this;if(!Gt)return be(this,an),this;var Un=this._events[an];if(Un.fn)Un.fn!==Gt||$r&&!Un.once||yr&&Un.context!==yr||be(this,an);else{for(var ei=0,Jn=[],Sn=Un.length;Sn>ei;ei++)(Un[ei].fn!==Gt||$r&&!Un[ei].once||yr&&Un[ei].context!==yr)&&Jn.push(Un[ei]);Jn.length?this._events[an]=Jn.length===1?Jn[0]:Jn:be(this,an)}return this},$e.prototype.removeAllListeners=function(_t){var Gt;return _t?this._events[Gt=D?D+_t:_t]&&be(this,Gt):(this._events=new P,this._eventsCount=0),this},$e.prototype.off=$e.prototype.removeListener,$e.prototype.addListener=$e.prototype.on,$e.prefixed=D,$e.EventEmitter=$e,b.exports=$e}),Wc=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q,be=V.style;return As(this,D),(q=M.call(this)).scene=void 0,q.style=void 0,q.layers=void 0,q.data=[],q.scene=P,q.style=be,q.layers=q.getLayers(),q.layers.forEach(function($e){P.addLayer($e)}),be.callback instanceof Function&&be.callback(q.layers),q}return vr(D,[{key:"show",value:function(){this.layers.forEach(function(P){P.show()})}},{key:"hide",value:function(){this.layers.forEach(function(P){P.hide()})}},{key:"setData",value:function(P){this.data=P;var V=wn(P);this.layers.forEach(function(q){q.setData(V)})}},{key:"destroy",value:function(){var P=this;this.layers.forEach(function(V){P.scene.removeLayer(V)})}}]),D}(ah.EventEmitter),Dh=function(b){lr(D,b);var M=Yr(D);function D(){return As(this,D),M.apply(this,arguments)}return vr(D,[{key:"getLayers",value:function(){var P=this.style,V=P.normal,q=P.style,be=P.options;return[new C.LineLayer(be!=null?be:{}).source(wn([])).size(V.size).color(V.color).shape("line").style(q)]}}]),D}(Wc),Sc=function(b){var M=typeof b;return b!=null&&(M=="object"||M=="function")},Vh=typeof cf=="object"&&cf&&cf.Object===Object&&cf,Ql=typeof self=="object"&&self&&self.Object===Object&&self,gu=Vh||Ql||Function("return this")(),Ks=function(){return gu.Date.now()},Gf=/\s/,Bf=function(b){for(var M=b.length;M--&&Gf.test(b.charAt(M)););return M},eu=/^\s+/,Pl=function(b){return b&&b.slice(0,Bf(b)+1).replace(eu,"")},Xc=gu.Symbol,Nc=Object.prototype,Jl=Nc.hasOwnProperty,fc=Nc.toString,oo=Xc?Xc.toStringTag:void 0,ko=function(b){var M=Jl.call(b,oo),D=b[oo];try{b[oo]=void 0;var P=!0}catch(q){}var V=fc.call(b);return P&&(M?b[oo]=D:delete b[oo]),V},nu=Object.prototype.toString,ql=function(b){return nu.call(b)},xl=Xc?Xc.toStringTag:void 0,mu=function(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":xl&&xl in Object(b)?ko(b):ql(b)},Ku=function(b){return b!=null&&typeof b=="object"},Kc=function(b){return typeof b=="symbol"||Ku(b)&&mu(b)=="[object Symbol]"},Gh=/^[-+]0x[0-9a-f]+$/i,Yu=/^0b[01]+$/i,bl=/^0o[0-7]+$/i,yd=parseInt,ph=function(b){if(typeof b=="number")return b;if(Kc(b))return NaN;if(Sc(b)){var M=typeof b.valueOf=="function"?b.valueOf():b;b=Sc(M)?M+"":M}if(typeof b!="string")return b===0?b:+b;b=Pl(b);var D=Yu.test(b);return D||bl.test(b)?yd(b.slice(2),D?2:8):Gh.test(b)?NaN:+b},Cc=Math.max,Yc=Math.min,Dl=function(b,M,D){var P,V,q,be,$e,_t,Gt=0,yr=!1,$r=!1,an=!0;if(typeof b!="function")throw new TypeError("Expected a function");function Un(ln){var pi=P,gi=V;return P=V=void 0,Gt=ln,be=b.apply(gi,pi)}function ei(ln){return Gt=ln,$e=setTimeout(Sn,M),yr?Un(ln):be}function Jn(ln){var pi=ln-_t;return _t===void 0||pi>=M||0>pi||$r&&ln-Gt>=q}function Sn(){var ln=Ks();if(Jn(ln))return Xn(ln);$e=setTimeout(Sn,function(pi){var gi=M-(pi-_t);return $r?Yc(gi,q-(pi-Gt)):gi}(ln))}function Xn(ln){return $e=void 0,an&&P?Un(ln):(P=V=void 0,be)}function ai(){var ln=Ks(),pi=Jn(ln);if(P=arguments,V=this,_t=ln,pi){if($e===void 0)return ei(_t);if($r)return clearTimeout($e),$e=setTimeout(Sn,M),Un(_t)}return $e===void 0&&($e=setTimeout(Sn,M)),be}return M=ph(M)||0,Sc(D)&&(yr=!!D.leading,q=($r="maxWait"in D)?Cc(ph(D.maxWait)||0,M):q,an="trailing"in D?!!D.trailing:an),ai.cancel=function(){$e!==void 0&&clearTimeout($e),Gt=0,P=_t=V=$e=void 0},ai.flush=function(){return $e===void 0?be:Xn(Ks())},ai},Ur=function(b){lr(D,b);var M=Yr(D);function D(){var P;As(this,D);for(var V=arguments.length,q=Array(V),be=0;V>be;be++)q[be]=arguments[be];return(P=M.call.apply(M,[this].concat(q))).onMouseMove=function($e){P.emit(v.RenderEvent.Mousemove,$e)},P.onMouseOut=function($e){P.emit(v.RenderEvent.Mouseout,$e)},P.onMouseDown=function($e){P.emit(v.RenderEvent.Dragstart,$e)},P.onDragging=function($e){P.emit(v.RenderEvent.Dragging,$e)},P.onDragEnd=Dl(function($e){P.emit(v.RenderEvent.Dragend,$e)},0),P.onUnClick=function($e){P.emit(v.RenderEvent.UnClick,$e)},P.enableHover=function(){var $e,_t;P.disableHover(),($e=P.layers[0])===null||$e===void 0||$e.on(v.LayerEvent.Mousemove,P.onMouseMove),(_t=P.layers[0])===null||_t===void 0||_t.on(v.LayerEvent.Mouseout,P.onMouseOut)},P.disableHover=function(){var $e,_t;($e=P.layers[0])===null||$e===void 0||$e.off(v.LayerEvent.Mousemove,P.onMouseMove),(_t=P.layers[0])===null||_t===void 0||_t.off(v.LayerEvent.Mouseout,P.onMouseOut)},P}return vr(D,[{key:"getLayers",value:function(){var P=this.style,V=P.normal,q=P.hover,be=P.active,$e=P.style,_t=P.options;return[new C.LineLayer(_t!=null?_t:{}).source(wn([])).size("isHover*isActive",function(Gt,yr){return yr?be.size:Gt?q.size:V.size}).color("isHover*isActive",function(Gt,yr){return yr?be.color:Gt?q.color:V.color}).shape("line").style($e)]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(v.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(v.LayerEvent.UnClick,this.onUnClick)}}]),D}(Wc),kl=function(b){lr(D,b);var M=Yr(D);function D(){var P;As(this,D);for(var V=arguments.length,q=Array(V),be=0;V>be;be++)q[be]=arguments[be];return(P=M.call.apply(M,[this].concat(q))).onMouseMove=function($e){P.emit(v.RenderEvent.Mousemove,$e)},P.onMouseOut=function($e){P.emit(v.RenderEvent.Mouseout,$e)},P.onMouseDown=function($e){P.emit(v.RenderEvent.Click,$e)},P}return vr(D,[{key:"getLayers",value:function(){var P=this.style,V=P.normal,q=P.style,be=P.options,$e=V.shape,_t=V.size,Gt=V.color,yr=V.stroke;return[new C.PointLayer(be!=null?be:{}).source(wn([])).size(_t).color(Gt).shape($e).style(Di({stroke:yr},q))]}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown)}},{key:"disableClick",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown)}},{key:"enableHover",value:function(){var P,V;this.disableHover(),(P=this.layers[0])===null||P===void 0||P.on(v.LayerEvent.Mousemove,this.onMouseMove),(V=this.layers[0])===null||V===void 0||V.on(v.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var P,V;(P=this.layers[0])===null||P===void 0||P.off(v.LayerEvent.Mousemove,this.onMouseMove),(V=this.layers[0])===null||V===void 0||V.off(v.LayerEvent.Mouseout,this.onMouseOut)}}]),D}(Wc),Vo=function(b){lr(D,b);var M=Yr(D);function D(){var P;As(this,D);for(var V=arguments.length,q=Array(V),be=0;V>be;be++)q[be]=arguments[be];return(P=M.call.apply(M,[this].concat(q))).onCreate=function($e){P.emit(v.RenderEvent.UnClick,$e)},P.onMouseMove=function($e){P.emit(v.RenderEvent.Mousemove,$e)},P.onMouseOut=function($e){P.emit(v.RenderEvent.Mouseout,$e)},P.onMouseDown=function($e){P.emit(v.RenderEvent.Dragstart,$e)},P.onDragging=function($e){P.emit(v.RenderEvent.Dragging,$e)},P.onDragEnd=Dl(function($e){P.emit(v.RenderEvent.Dragend,$e)},0),P.onClick=function($e){P.emit(v.RenderEvent.Click,$e)},P.onContextmenu=function($e){P.emit(v.RenderEvent.Contextmenu,$e)},P}return vr(D,[{key:"getLayers",value:function(){var P=this.style,V=P.normal,q=P.hover,be=P.active,$e=P.style,_t=P.options;return[new C.PointLayer(_t!=null?_t:{}).source(wn([])).size("isHover*isActive",function(Gt,yr){return yr?be.size:Gt?q.size:V.size}).color("isHover*isActive",function(Gt,yr){return yr?be.color:Gt?q.color:V.color}).shape("isHover*isActive",function(Gt,yr){return yr?be.shape:Gt?q.shape:V.shape}).style(Di({stroke:["isHover*isActive",function(Gt,yr){return yr?be.stroke:Gt?q.stroke:V.stroke}]},$e))]}},{key:"enableCreate",value:function(){this.disableCreate(),this.layers[0].on(v.LayerEvent.UnClick,this.onCreate)}},{key:"disableCreate",value:function(){this.layers[0].off(v.LayerEvent.UnClick,this.onCreate)}},{key:"enableHover",value:function(){var P,V;this.disableHover(),(P=this.layers[0])===null||P===void 0||P.on(v.LayerEvent.Mousemove,this.onMouseMove),(V=this.layers[0])===null||V===void 0||V.on(v.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var P,V;(P=this.layers[0])===null||P===void 0||P.off(v.LayerEvent.Mousemove,this.onMouseMove),(V=this.layers[0])===null||V===void 0||V.off(v.LayerEvent.Mouseout,this.onMouseOut)}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(v.LayerEvent.Click,this.onClick)}},{key:"disableClick",value:function(){this.layers[0].off(v.LayerEvent.Click,this.onClick)}},{key:"enableContextMenu",value:function(){this.disableContextMenu(),this.layers[0].on(v.LayerEvent.Contextmenu,this.onContextmenu)}},{key:"disableContextMenu",value:function(){this.layers[0].off(v.LayerEvent.Contextmenu,this.onContextmenu)}}]),D}(Wc),Qo=function(b){lr(D,b);var M=Yr(D);function D(){var P;As(this,D);for(var V=arguments.length,q=Array(V),be=0;V>be;be++)q[be]=arguments[be];return(P=M.call.apply(M,[this].concat(q))).onMouseMove=function($e){P.emit(v.RenderEvent.Mousemove,$e)},P.onMouseOut=function($e){P.emit(v.RenderEvent.Mouseout,$e)},P.onMouseDown=function($e){P.emit(v.RenderEvent.Dragstart,$e)},P.onDragging=function($e){P.emit(v.RenderEvent.Dragging,$e)},P.onDragEnd=Dl(function($e){P.emit(v.RenderEvent.Dragend,$e)},0),P.onUnClick=function($e){P.emit(v.RenderEvent.UnClick,$e)},P.enableHover=function(){var $e,_t;P.disableHover(),($e=P.layers[0])===null||$e===void 0||$e.on(v.LayerEvent.Mousemove,P.onMouseMove),(_t=P.layers[0])===null||_t===void 0||_t.on(v.LayerEvent.Mouseout,P.onMouseOut)},P.disableHover=function(){var $e,_t;($e=P.layers[0])===null||$e===void 0||$e.off(v.LayerEvent.Mousemove,P.onMouseMove),(_t=P.layers[0])===null||_t===void 0||_t.off(v.LayerEvent.Mouseout,P.onMouseOut)},P}return vr(D,[{key:"getLayers",value:function(){var P=this.style,V=P.normal,q=P.hover,be=P.active,$e=P.style,_t=P.options,Gt=new C.PolygonLayer(_t!=null?_t:{});return Gt.source(wn([])).color("isHover*isActive",function(yr,$r){return $r?be.color:yr?q.color:V.color}).style($e),[Gt]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(v.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(v.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(v.LayerEvent.UnClick,this.onUnClick)}}]),D}(Wc),du=function(b){lr(D,b);var M=Yr(D);function D(P){var V;return As(this,D),(V=M.call(this)).scene=void 0,V.previousClick=void 0,V.onDblClick=function(q){var be,$e,_t=(be=($e=q.pixel)!==null&&$e!==void 0?$e:q.point)!==null&&be!==void 0?be:{},Gt=_t.x,yr=Gt===void 0?0:Gt,$r=_t.y,an=$r===void 0?0:$r,Un=Date.now();if(V.previousClick){var ei=V.previousClick,Jn=ei.y;300>Un-ei.time&&5>Math.abs(yr-ei.x)&&5>Math.abs(an-Jn)&&V.emit(v.RenderEvent.DblClick,q)}V.previousClick={x:yr,y:an,time:Un}},V.onMouseMove=function(q){V.emit(v.RenderEvent.Mousemove,q)},V.onMouseDown=function(q){V.emit(v.RenderEvent.Dragstart,q)},V.onDragging=function(q){V.emit(v.RenderEvent.Dragging,q)},V.onDragEnd=Dl(function(q){V.emit(v.RenderEvent.Dragend,q)},0),V.scene=P,V}return vr(D,[{key:"enableDrag",value:function(){this.disableDrag(),this.scene.on(v.SceneEvent.Mousedown,this.onMouseDown),this.scene.on(v.SceneEvent.Dragging,this.onDragging),this.scene.on(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.scene.off(v.SceneEvent.Mousedown,this.onMouseDown),this.scene.off(v.SceneEvent.Dragging,this.onDragging),this.scene.off(v.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(v.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableMouseMove",value:function(){this.disableMouseMove(),this.scene.on(v.SceneEvent.Mousemove,this.onMouseMove)}},{key:"disableMouseMove",value:function(){this.scene.off(v.SceneEvent.Mousemove,this.onMouseMove)}},{key:"enableDblClick",value:function(){this.disableDblClick(),this.scene.on(v.SceneEvent.Mousedown,this.onDblClick)}},{key:"disableDblClick",value:function(){this.scene.off(v.SceneEvent.Mousedown,this.onDblClick)}}]),D}(ah),kh=function(b){lr(D,b);var M=Yr(D);function D(){return As(this,D),M.apply(this,arguments)}return vr(D,[{key:"getLayers",value:function(){var P=this.style,V=P.normal,q=P.active,be=P.style,$e=P.options;return[new C.PointLayer($e!=null?$e:{}).source(wn([])).size("isActive",function(_t){return _t?q.size:V.size}).color("isActive",function(_t){return _t?q.color:V.color}).shape("text","text").style(Di({stroke:["isActive",function(_t){return _t?q.stroke:V.stroke}]},be))]}}]),D}(Wc),Wf={point:Vo,line:Ur,dashLine:Dh,midPoint:kl,text:kh,polygon:Qo},zc="#1990FF",df="#ED9D48",rc={blend:"normal",pickingBuffer:5},ys={color:zc,shape:"circle",size:6,stroke:"#ffffff"},bf={color:df,shape:"circle",size:6,stroke:"#ffffff"},Xf={shape:"circle",size:6,color:df,stroke:"#ffffff"},rl={options:rc,normal:ys,hover:Di(Di({},ys),{},{size:8}),active:Di(Di({},ys),{},{size:8,color:df}),style:{strokeWidth:2}},wc={options:rc,normal:bf,hover:Di(Di({},bf),{},{size:8}),active:Di(Di({},bf),{},{size:8}),style:{strokeWidth:2}},Zc={color:zc,size:12,stroke:"#ffffff"},sd={point:wc,line:{options:rc,normal:{color:zc,size:2},hover:{color:zc,size:2},active:{color:df,size:2},style:{}},polygon:{options:rc,normal:{color:zc},hover:{color:zc},active:{color:df},style:{opacity:.15}},midPoint:{options:rc,normal:Xf},dashLine:{options:rc,normal:{color:df,size:2},style:{lineType:"dash",dashArray:[6,6]}},text:{options:rc,normal:Zc,active:Di(Di({},Zc),{},{color:df}),style:{fontWeight:"800",textOffset:[0,Zc.size+6],textAllowOverlap:!0,strokeWidth:2}}},Qc=function(b,M){return b===M||b!=b&&M!=M},f=function(b,M){for(var D=b.length;D--;)if(Qc(b[D][0],M))return D;return-1},g=Array.prototype.splice,p=function(b){var M=this.__data__,D=f(M,b);return D>=0&&(D==M.length-1?M.pop():g.call(M,D,1),--this.size,!0)},E=function(b){var M=this.__data__,D=f(M,b);return 0>D?void 0:M[D][1]},Y=function(b){return f(this.__data__,b)>-1},ye=function(b,M){var D=this.__data__,P=f(D,b);return 0>P?(++this.size,D.push([b,M])):D[P][1]=M,this};function Pe(b){var M=-1,D=b==null?0:b.length;for(this.clear();++M<D;){var P=b[M];this.set(P[0],P[1])}}Pe.prototype.clear=function(){this.__data__=[],this.size=0},Pe.prototype.delete=p,Pe.prototype.get=E,Pe.prototype.has=Y,Pe.prototype.set=ye;var ct=Pe,Vt=function(){this.__data__=new ct,this.size=0},fr=function(b){var M=this.__data__,D=M.delete(b);return this.size=M.size,D},Ir=function(b){return this.__data__.get(b)},Dr=function(b){return this.__data__.has(b)},jr,En=function(b){if(!Sc(b))return!1;var M=mu(b);return M=="[object Function]"||M=="[object GeneratorFunction]"||M=="[object AsyncFunction]"||M=="[object Proxy]"},gn=gu["__core-js_shared__"],Bn=(jr=/[^.]+$/.exec(gn&&gn.keys&&gn.keys.IE_PROTO||""))?"Symbol(src)_1."+jr:"",fn=function(b){return!!Bn&&Bn in b},Fn=Function.prototype.toString,jn=function(b){if(b!=null){try{return Fn.call(b)}catch(M){}try{return b+""}catch(M){}}return""},vi=/^\[object .+?Constructor\]$/,ki=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ti=function(b){return!(!Sc(b)||fn(b))&&(En(b)?ki:vi).test(jn(b))},Fi=function(b,M){return b==null?void 0:b[M]},na=function(b,M){var D=Fi(b,M);return Ti(D)?D:void 0},ka=na(gu,"Map"),Na=na(Object,"create"),po=function(b){var M=this.has(b)&&delete this.__data__[b];return this.size-=M?1:0,M},No=Object.prototype.hasOwnProperty,is=function(b){var M=this.__data__;if(Na){var D=M[b];return D==="__lodash_hash_undefined__"?void 0:D}return No.call(M,b)?M[b]:void 0},rs=Object.prototype.hasOwnProperty,Ls=function(b){var M=this.__data__;return Na?M[b]!==void 0:rs.call(M,b)},vo=function(b,M){var D=this.__data__;return this.size+=this.has(b)?0:1,D[b]=Na&&M===void 0?"__lodash_hash_undefined__":M,this};function ds(b){var M=-1,D=b==null?0:b.length;for(this.clear();++M<D;){var P=b[M];this.set(P[0],P[1])}}ds.prototype.clear=function(){this.__data__=Na?Na(null):{},this.size=0},ds.prototype.delete=po,ds.prototype.get=is,ds.prototype.has=Ls,ds.prototype.set=vo;var Ns=ds,cs=function(b){var M=typeof b;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?b!=="__proto__":b===null},Jo=function(b,M){var D=b.__data__;return cs(M)?D[typeof M=="string"?"string":"hash"]:D.map},$s=function(b){var M=Jo(this,b).delete(b);return this.size-=M?1:0,M},ws=function(b){return Jo(this,b).get(b)},_s=function(b){return Jo(this,b).has(b)},El=function(b,M){var D=Jo(this,b),P=D.size;return D.set(b,M),this.size+=D.size==P?0:1,this};function nl(b){var M=-1,D=b==null?0:b.length;for(this.clear();++M<D;){var P=b[M];this.set(P[0],P[1])}}nl.prototype.clear=function(){this.size=0,this.__data__={hash:new Ns,map:new(ka||ct),string:new Ns}},nl.prototype.delete=$s,nl.prototype.get=ws,nl.prototype.has=_s,nl.prototype.set=El;var Qu=nl,Ac=function(b,M){var D=this.__data__;if(D instanceof ct){var P=D.__data__;if(!ka||199>P.length)return P.push([b,M]),this.size=++D.size,this;D=this.__data__=new Qu(P)}return D.set(b,M),this.size=D.size,this};function Ju(b){var M=this.__data__=new ct(b);this.size=M.size}Ju.prototype.clear=Vt,Ju.prototype.delete=fr,Ju.prototype.get=Ir,Ju.prototype.has=Dr,Ju.prototype.set=Ac;var qu=Ju,Tc=function(b,M){for(var D=-1,P=b==null?0:b.length;++D<P&&M(b[D],D,b)!==!1;);return b},ec=function(){try{var b=na(Object,"defineProperty");return b({},"",{}),b}catch(M){}}(),Pf=function(b,M,D){M=="__proto__"&&ec?ec(b,M,{configurable:!0,enumerable:!0,value:D,writable:!0}):b[M]=D},Ef=Object.prototype.hasOwnProperty,$l=function(b,M,D){var P=b[M];Ef.call(b,M)&&Qc(P,D)&&(D!==void 0||M in b)||Pf(b,M,D)},Uc=function(b,M,D,P){var V=!D;D||(D={});for(var q=-1,be=M.length;++q<be;){var $e=M[q],_t=P?P(D[$e],b[$e],$e,D,b):void 0;_t===void 0&&(_t=b[$e]),V?Pf(D,$e,_t):$l(D,$e,_t)}return D},Jh=function(b,M){for(var D=-1,P=Array(b);++D<b;)P[D]=M(D);return P},qh=function(b){return Ku(b)&&mu(b)=="[object Arguments]"},Sh=Object.prototype,Of=Sh.hasOwnProperty,Ch=Sh.propertyIsEnumerable,pf=qh(function(){return arguments}())?qh:function(b){return Ku(b)&&Of.call(b,"callee")&&!Ch.call(b,"callee")},oh=pf,Jc=Array.isArray,nc=function(){return!1},ic=Af(function(b,M){var D=M&&!M.nodeType&&M,P=D&&b&&!b.nodeType&&b,V=P&&P.exports===D?gu.Buffer:void 0;b.exports=(V?V.isBuffer:void 0)||nc}),wh=/^(?:0|[1-9]\d*)$/,Fh=function(b,M){var D=typeof b;return!!(M=M==null?9007199254740991:M)&&(D=="number"||D!="symbol"&&wh.test(b))&&b>-1&&b%1==0&&M>b},Du=function(b){return typeof b=="number"&&b>-1&&b%1==0&&9007199254740991>=b},yu={};yu["[object Float32Array]"]=yu["[object Float64Array]"]=yu["[object Int8Array]"]=yu["[object Int16Array]"]=yu["[object Int32Array]"]=yu["[object Uint8Array]"]=yu["[object Uint8ClampedArray]"]=yu["[object Uint16Array]"]=yu["[object Uint32Array]"]=!0,yu["[object Arguments]"]=yu["[object Array]"]=yu["[object ArrayBuffer]"]=yu["[object Boolean]"]=yu["[object DataView]"]=yu["[object Date]"]=yu["[object Error]"]=yu["[object Function]"]=yu["[object Map]"]=yu["[object Number]"]=yu["[object Object]"]=yu["[object RegExp]"]=yu["[object Set]"]=yu["[object String]"]=yu["[object WeakMap]"]=!1;var qc=function(b){return Ku(b)&&Du(b.length)&&!!yu[mu(b)]},sh=function(b){return function(M){return b(M)}},vh=Af(function(b,M){var D=M&&!M.nodeType&&M,P=D&&b&&!b.nodeType&&b,V=P&&P.exports===D&&Vh.process,q=function(){try{var be=P&&P.require&&P.require("util").types;return be||V&&V.binding&&V.binding("util")}catch($e){}}();b.exports=q}),Nf=vh&&vh.isTypedArray,mh=Nf?sh(Nf):qc,If=Object.prototype.hasOwnProperty,Rf=function(b,M){var D=Jc(b),P=!D&&oh(b),V=!D&&!P&&ic(b),q=!D&&!P&&!V&&mh(b),be=D||P||V||q,$e=be?Jh(b.length,String):[],_t=$e.length;for(var Gt in b)!M&&!If.call(b,Gt)||be&&(Gt=="length"||V&&(Gt=="offset"||Gt=="parent")||q&&(Gt=="buffer"||Gt=="byteLength"||Gt=="byteOffset")||Fh(Gt,_t))||$e.push(Gt);return $e},vf=Object.prototype,oe=function(b){var M=b&&b.constructor;return b===(typeof M=="function"&&M.prototype||vf)},Br=function(b,M){return function(D){return b(M(D))}},xt=Br(Object.keys,Object),mt=Object.prototype.hasOwnProperty,Ht=function(b){if(!oe(b))return xt(b);var M=[];for(var D in Object(b))mt.call(b,D)&&D!="constructor"&&M.push(D);return M},or=function(b){return b!=null&&Du(b.length)&&!En(b)},en=function(b){return or(b)?Rf(b):Ht(b)},_n=function(b,M){return b&&Uc(M,en(M),b)},Tn=function(b){var M=[];if(b!=null)for(var D in Object(b))M.push(D);return M},zn=Object.prototype.hasOwnProperty,wi=function(b){if(!Sc(b))return Tn(b);var M=oe(b),D=[];for(var P in b)(P!="constructor"||!M&&zn.call(b,P))&&D.push(P);return D},Xi=function(b){return or(b)?Rf(b,!0):wi(b)},ba=function(b,M){return b&&Uc(M,Xi(M),b)},mo=Af(function(b,M){var D=M&&!M.nodeType&&M,P=D&&b&&!b.nodeType&&b,V=P&&P.exports===D?gu.Buffer:void 0,q=V?V.allocUnsafe:void 0;b.exports=function(be,$e){if($e)return be.slice();var _t=be.length,Gt=q?q(_t):new be.constructor(_t);return be.copy(Gt),Gt}}),Ja=function(b,M){var D=-1,P=b.length;for(M||(M=Array(P));++D<P;)M[D]=b[D];return M},Ds=function(b,M){for(var D=-1,P=b==null?0:b.length,V=0,q=[];++D<P;){var be=b[D];M(be,D,b)&&(q[V++]=be)}return q},Ts=function(){return[]},lu=Object.prototype.propertyIsEnumerable,Iu=Object.getOwnPropertySymbols,_u=Iu?function(b){return b==null?[]:Ds(Iu(b=Object(b)),function(M){return lu.call(b,M)})}:Ts,Mc=function(b,M){return Uc(b,_u(b),M)},tu=function(b,M){for(var D=-1,P=M.length,V=b.length;++D<P;)b[V+D]=M[D];return b},Fl=Br(Object.getPrototypeOf,Object),Ys=Object.getOwnPropertySymbols?function(b){for(var M=[];b;)tu(M,_u(b)),b=Fl(b);return M}:Ts,ku=function(b,M){return Uc(b,Ys(b),M)},Bu=function(b,M,D){var P=M(b);return Jc(b)?P:tu(P,D(b))},Gl=function(b){return Bu(b,en,_u)},ru=function(b){return Bu(b,Xi,Ys)},pl=na(gu,"DataView"),ef=na(gu,"Promise"),Bh=na(gu,"Set"),hc=na(gu,"WeakMap"),uh="[object Map]",Kf="[object Promise]",gh="[object Set]",yh="[object WeakMap]",Yf="[object DataView]",dc=jn(pl),ne=jn(ka),Me=jn(ef),Oe=jn(Bh),Ke=jn(hc),pt=mu;(pl&&pt(new pl(new ArrayBuffer(1)))!=Yf||ka&&pt(new ka)!=uh||ef&&pt(ef.resolve())!=Kf||Bh&&pt(new Bh)!=gh||hc&&pt(new hc)!=yh)&&(pt=function(b){var M=mu(b),D=M=="[object Object]"?b.constructor:void 0,P=D?jn(D):"";if(P)switch(P){case dc:return Yf;case ne:return uh;case Me:return Kf;case Oe:return gh;case Ke:return yh}return M});var Pt=pt,Xr=Object.prototype.hasOwnProperty,An=function(b){var M=b.length,D=new b.constructor(M);return M&&typeof b[0]=="string"&&Xr.call(b,"index")&&(D.index=b.index,D.input=b.input),D},mi=gu.Uint8Array,un=function(b){var M=new b.constructor(b.byteLength);return new mi(M).set(new mi(b)),M},bi=function(b,M){var D=M?un(b.buffer):b.buffer;return new b.constructor(D,b.byteOffset,b.byteLength)},ga=/\w*$/,ss=function(b){var M=new b.constructor(b.source,ga.exec(b));return M.lastIndex=b.lastIndex,M},To=Xc?Xc.prototype:void 0,Ro=To?To.valueOf:void 0,fs=function(b){return Ro?Object(Ro.call(b)):{}},ps=function(b,M){var D=M?un(b.buffer):b.buffer;return new b.constructor(D,b.byteOffset,b.length)},zo=function(b,M,D){var P=b.constructor;switch(M){case"[object ArrayBuffer]":return un(b);case"[object Boolean]":case"[object Date]":return new P(+b);case"[object DataView]":return bi(b,D);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ps(b,D);case"[object Map]":case"[object Set]":return new P;case"[object Number]":case"[object String]":return new P(b);case"[object RegExp]":return ss(b);case"[object Symbol]":return fs(b)}},ks=Object.create,xu=function(){function b(){}return function(M){if(!Sc(M))return{};if(ks)return ks(M);b.prototype=M;var D=new b;return b.prototype=void 0,D}}(),cu=function(b){return typeof b.constructor!="function"||oe(b)?{}:xu(Fl(b))},tf=function(b){return Ku(b)&&Pt(b)=="[object Map]"},$c=vh&&vh.isMap,ac=$c?sh($c):tf,ll=function(b){return Ku(b)&&Pt(b)=="[object Set]"},Cu=vh&&vh.isSet,Sl=Cu?sh(Cu):ll,Wl="[object Arguments]",Pc="[object Function]",jc="[object Object]",hu={};hu[Wl]=hu["[object Array]"]=hu["[object ArrayBuffer]"]=hu["[object DataView]"]=hu["[object Boolean]"]=hu["[object Date]"]=hu["[object Float32Array]"]=hu["[object Float64Array]"]=hu["[object Int8Array]"]=hu["[object Int16Array]"]=hu["[object Int32Array]"]=hu["[object Map]"]=hu["[object Number]"]=hu[jc]=hu["[object RegExp]"]=hu["[object Set]"]=hu["[object String]"]=hu["[object Symbol]"]=hu["[object Uint8Array]"]=hu["[object Uint8ClampedArray]"]=hu["[object Uint16Array]"]=hu["[object Uint32Array]"]=!0,hu["[object Error]"]=hu[Pc]=hu["[object WeakMap]"]=!1;var _h=function b(M,D,P,V,q,be){var $e,_t=1&D,Gt=2&D,yr=4&D;if(P&&($e=q?P(M,V,q,be):P(M)),$e!==void 0)return $e;if(!Sc(M))return M;var $r=Jc(M);if($r){if($e=An(M),!_t)return Ja(M,$e)}else{var an=Pt(M),Un=an==Pc||an=="[object GeneratorFunction]";if(ic(M))return mo(M,_t);if(an==jc||an==Wl||Un&&!q){if($e=Gt||Un?{}:cu(M),!_t)return Gt?ku(M,ba($e,M)):Mc(M,_n($e,M))}else{if(!hu[an])return q?M:{};$e=zo(M,an,_t)}}be||(be=new qu);var ei=be.get(M);if(ei)return ei;be.set(M,$e),Sl(M)?M.forEach(function(Sn){$e.add(b(Sn,D,P,Sn,M,be))}):ac(M)&&M.forEach(function(Sn,Xn){$e.set(Xn,b(Sn,D,P,Xn,M,be))});var Jn=$r?void 0:(yr?Gt?ru:Gl:Gt?Xi:en)(M);return Tc(Jn||M,function(Sn,Xn){Jn&&(Sn=M[Xn=Sn]),$l($e,Xn,b(Sn,D,P,Xn,M,be))}),$e},Oc=function(b){return _h(b,5)},ud=function(b){for(var M=-1,D=b==null?0:b.length,P={};++M<D;){var V=b[M];P[V[0]]=V[1]}return P},Hd=function(b){return this.__data__.has(b)};function Zu(b){var M=-1,D=b==null?0:b.length;for(this.__data__=new Qu;++M<D;)this.add(b[M])}Zu.prototype.add=Zu.prototype.push=function(b){return this.__data__.set(b,"__lodash_hash_undefined__"),this},Zu.prototype.has=Hd;var Sd=Zu,Hc=function(b,M){for(var D=-1,P=b==null?0:b.length;++D<P;)if(M(b[D],D,b))return!0;return!1},Nh=function(b,M){return b.has(M)},up=function(b,M,D,P,V,q){var be=1&D,$e=b.length,_t=M.length;if(!($e==_t||be&&_t>$e))return!1;var Gt=q.get(b),yr=q.get(M);if(Gt&&yr)return Gt==M&&yr==b;var $r=-1,an=!0,Un=2&D?new Sd:void 0;for(q.set(b,M),q.set(M,b);++$r<$e;){var ei=b[$r],Jn=M[$r];if(P)var Sn=be?P(Jn,ei,$r,M,b,q):P(ei,Jn,$r,b,M,q);if(Sn!==void 0){if(Sn)continue;an=!1;break}if(Un){if(!Hc(M,function(Xn,ai){if(!Nh(Un,ai)&&(ei===Xn||V(ei,Xn,D,P,q)))return Un.push(ai)})){an=!1;break}}else if(ei!==Jn&&!V(ei,Jn,D,P,q)){an=!1;break}}return q.delete(b),q.delete(M),an},_d=function(b){var M=-1,D=Array(b.size);return b.forEach(function(P,V){D[++M]=[V,P]}),D},pp=function(b){var M=-1,D=Array(b.size);return b.forEach(function(P){D[++M]=P}),D},vp=Xc?Xc.prototype:void 0,mp=vp?vp.valueOf:void 0,Cd=function(b,M,D,P,V,q,be){switch(D){case"[object DataView]":if(b.byteLength!=M.byteLength||b.byteOffset!=M.byteOffset)return!1;b=b.buffer,M=M.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=M.byteLength||!q(new mi(b),new mi(M)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Qc(+b,+M);case"[object Error]":return b.name==M.name&&b.message==M.message;case"[object RegExp]":case"[object String]":return b==M+"";case"[object Map]":var $e=_d;case"[object Set]":if($e||($e=pp),b.size!=M.size&&!(1&P))return!1;var _t=be.get(b);if(_t)return _t==M;P|=2,be.set(b,M);var Gt=up($e(b),$e(M),P,V,q,be);return be.delete(b),Gt;case"[object Symbol]":if(mp)return mp.call(b)==mp.call(M)}return!1},ld=Object.prototype.hasOwnProperty,gp=function(b,M,D,P,V,q){var be=1&D,$e=Gl(b),_t=$e.length;if(_t!=Gl(M).length&&!be)return!1;for(var Gt=_t;Gt--;){var yr=$e[Gt];if(!(be?yr in M:ld.call(M,yr)))return!1}var $r=q.get(b),an=q.get(M);if($r&&an)return $r==M&&an==b;var Un=!0;q.set(b,M),q.set(M,b);for(var ei=be;++Gt<_t;){var Jn=b[yr=$e[Gt]],Sn=M[yr];if(P)var Xn=be?P(Sn,Jn,yr,M,b,q):P(Jn,Sn,yr,b,M,q);if(!(Xn===void 0?Jn===Sn||V(Jn,Sn,D,P,q):Xn)){Un=!1;break}ei||(ei=yr=="constructor")}if(Un&&!ei){var ai=b.constructor,ln=M.constructor;ai==ln||!("constructor"in b)||!("constructor"in M)||typeof ai=="function"&&ai instanceof ai&&typeof ln=="function"&&ln instanceof ln||(Un=!1)}return q.delete(b),q.delete(M),Un},Ah="[object Arguments]",Dd="[object Array]",xd="[object Object]",wd=Object.prototype.hasOwnProperty,vl=function(b,M,D,P,V,q){var be=Jc(b),$e=Jc(M),_t=be?Dd:Pt(b),Gt=$e?Dd:Pt(M),yr=(_t=_t==Ah?xd:_t)==xd,$r=(Gt=Gt==Ah?xd:Gt)==xd,an=_t==Gt;if(an&&ic(b)){if(!ic(M))return!1;be=!0,yr=!1}if(an&&!yr)return q||(q=new qu),be||mh(b)?up(b,M,D,P,V,q):Cd(b,M,_t,D,P,V,q);if(!(1&D)){var Un=yr&&wd.call(b,"__wrapped__"),ei=$r&&wd.call(M,"__wrapped__");if(Un||ei){var Jn=Un?b.value():b,Sn=ei?M.value():M;return q||(q=new qu),V(Jn,Sn,D,P,q)}}return!!an&&(q||(q=new qu),gp(b,M,D,P,V,q))},kd=function b(M,D,P,V,q){return M===D||(M==null||D==null||!Ku(M)&&!Ku(D)?M!=M&&D!=D:vl(M,D,P,V,b,q))},Fs=function(b,M){return kd(b,M)},cd=function(b,M,D){(D!==void 0&&!Qc(b[M],D)||D===void 0&&!(M in b))&&Pf(b,M,D)},Vd=function(b){return function(M,D,P){for(var V=-1,q=Object(M),be=P(M),$e=be.length;$e--;){var _t=be[b?$e:++V];if(D(q[_t],_t,q)===!1)break}return M}},Gd=Vd(),jt=function(b){return Ku(b)&&or(b)},Vr=Function.prototype.toString,Ln=Object.prototype.hasOwnProperty,Ci=Vr.call(Object),aa=function(b){if(!Ku(b)||mu(b)!="[object Object]")return!1;var M=Fl(b);if(M===null)return!0;var D=Ln.call(M,"constructor")&&M.constructor;return typeof D=="function"&&D instanceof D&&Vr.call(D)==Ci},Ai=function(b,M){if((M!=="constructor"||typeof b[M]!="function")&&M!="__proto__")return b[M]},Gi=function(b){return Uc(b,Xi(b))},Ea=function(b,M,D,P,V,q,be){var $e=Ai(b,D),_t=Ai(M,D),Gt=be.get(_t);if(Gt)cd(b,D,Gt);else{var yr=q?q($e,_t,D+"",b,M,be):void 0,$r=yr===void 0;if($r){var an=Jc(_t),Un=!an&&ic(_t),ei=!an&&!Un&&mh(_t);yr=_t,an||Un||ei?Jc($e)?yr=$e:jt($e)?yr=Ja($e):Un?($r=!1,yr=mo(_t,!0)):ei?($r=!1,yr=ps(_t,!0)):yr=[]:aa(_t)||oh(_t)?(yr=$e,oh($e)?yr=Gi($e):Sc($e)&&!En($e)||(yr=cu(_t))):$r=!1}$r&&(be.set(_t,yr),V(yr,_t,P,q,be),be.delete(_t)),cd(b,D,yr)}},Pa=function b(M,D,P,V,q){M!==D&&Gd(D,function(be,$e){if(q||(q=new qu),Sc(be))Ea(M,D,$e,P,b,V,q);else{var _t=V?V(Ai(M,$e),be,$e+"",M,D,q):void 0;_t===void 0&&(_t=be),cd(M,$e,_t)}},Xi)},Ra=function(b){return b},Za=function(b,M,D){switch(D.length){case 0:return b.call(M);case 1:return b.call(M,D[0]);case 2:return b.call(M,D[0],D[1]);case 3:return b.call(M,D[0],D[1],D[2])}return b.apply(M,D)},Ha=Math.max,$a=function(b,M,D){return M=Ha(M===void 0?b.length-1:M,0),function(){for(var P=arguments,V=-1,q=Ha(P.length-M,0),be=Array(q);++V<q;)be[V]=P[M+V];V=-1;for(var $e=Array(M+1);++V<M;)$e[V]=P[V];return $e[M]=D(be),Za(b,this,$e)}},ya=function(b){return function(){return b}},Ua=Date.now,ui=function(b){var M=0,D=0;return function(){var P=Ua(),V=16-(P-D);if(D=P,V>0){if(++M>=800)return arguments[0]}else M=0;return b.apply(void 0,arguments)}},Ni=ui(ec?function(b,M){return ec(b,"toString",{configurable:!0,enumerable:!1,value:ya(M),writable:!0})}:Ra),La=function(b,M){return Ni($a(b,M,Ra),b+"")},Ya=function(b,M,D){if(!Sc(D))return!1;var P=typeof M;return!!(P=="number"?or(D)&&Fh(M,D.length):P=="string"&&M in D)&&Qc(D[M],b)},_a=function(b){return La(function(M,D){var P=-1,V=D.length,q=V>1?D[V-1]:void 0,be=V>2?D[2]:void 0;for(q=b.length>3&&typeof q=="function"?(V--,q):void 0,be&&Ya(D[0],D[1],be)&&(q=3>V?void 0:q,V=1),M=Object(M);++P<V;){var $e=D[P];$e&&b(M,$e,P,q)}return M})},Ga=_a(function(b,M,D){Pa(b,M,D)}),xo=function(b,M){for(var D=-1,P=b==null?0:b.length,V=Array(P);++D<P;)V[D]=M(b[D],D,b);return V},xs=function(b,M){return xo(M,function(D){return[D,b[D]]})},ea=function(b){var M=-1,D=Array(b.size);return b.forEach(function(P){D[++M]=[P,P]}),D},sa=function(b){return function(M){var D=Pt(M);return D=="[object Map]"?_d(M):D=="[object Set]"?ea(M):xs(M,b(M))}}(en),Zo=Af(function(b){(function(M,D,P){if(M){for(var V,q={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},be={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$e={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},_t={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},Gt=1;20>Gt;++Gt)q[111+Gt]="f"+Gt;for(Gt=0;9>=Gt;++Gt)q[Gt+96]=""+Gt;Sn.prototype.bind=function(Xn,ai,ln){var pi=this;return pi._bindMultiple.call(pi,Xn=Xn instanceof Array?Xn:[Xn],ai,ln),pi},Sn.prototype.unbind=function(Xn,ai){return this.bind.call(this,Xn,function(){},ai)},Sn.prototype.trigger=function(Xn,ai){var ln=this;return ln._directMap[Xn+":"+ai]&&ln._directMap[Xn+":"+ai]({},Xn),ln},Sn.prototype.reset=function(){var Xn=this;return Xn._callbacks={},Xn._directMap={},Xn},Sn.prototype.stopCallback=function(Xn,ai){if((" "+ai.className+" ").indexOf(" mousetrap ")>-1||Jn(ai,this.target))return!1;if("composedPath"in Xn&&typeof Xn.composedPath=="function"){var ln=Xn.composedPath()[0];ln!==Xn.target&&(ai=ln)}return ai.tagName=="INPUT"||ai.tagName=="SELECT"||ai.tagName=="TEXTAREA"||ai.isContentEditable},Sn.prototype.handleKey=function(){var Xn=this;return Xn._handleKey.apply(Xn,arguments)},Sn.addKeycodes=function(Xn){for(var ai in Xn)Xn.hasOwnProperty(ai)&&(q[ai]=Xn[ai]);V=null},Sn.init=function(){var Xn=Sn(D);for(var ai in Xn)ai.charAt(0)!=="_"&&(Sn[ai]=function(ln){return function(){return Xn[ln].apply(Xn,arguments)}}(ai))},Sn.init(),M.Mousetrap=Sn,b.exports&&(b.exports=Sn)}function yr(Xn,ai,ln){Xn.addEventListener?Xn.addEventListener(ai,ln,!1):Xn.attachEvent("on"+ai,ln)}function $r(Xn){if(Xn.type=="keypress"){var ai=String.fromCharCode(Xn.which);return Xn.shiftKey||(ai=ai.toLowerCase()),ai}return q[Xn.which]?q[Xn.which]:be[Xn.which]?be[Xn.which]:String.fromCharCode(Xn.which).toLowerCase()}function an(Xn){return Xn=="shift"||Xn=="ctrl"||Xn=="alt"||Xn=="meta"}function Un(Xn,ai,ln){return ln||(ln=function(){if(!V)for(var pi in V={},q)pi>95&&112>pi||q.hasOwnProperty(pi)&&(V[q[pi]]=pi);return V}()[Xn]?"keydown":"keypress"),ln=="keypress"&&ai.length&&(ln="keydown"),ln}function ei(Xn,ai){var ln,pi,gi,Li=[];for(ln=function(Ki){return Ki==="+"?["+"]:(Ki=Ki.replace(/\+{2}/g,"+plus")).split("+")}(Xn),gi=0;ln.length>gi;++gi)_t[pi=ln[gi]]&&(pi=_t[pi]),ai&&ai!="keypress"&&$e[pi]&&(pi=$e[pi],Li.push("shift")),an(pi)&&Li.push(pi);return{key:pi,modifiers:Li,action:ai=Un(pi,Li,ai)}}function Jn(Xn,ai){return Xn!==null&&Xn!==D&&(Xn===ai||Jn(Xn.parentNode,ai))}function Sn(Xn){var ai=this;if(Xn=Xn||D,!(ai instanceof Sn))return new Sn(Xn);ai.target=Xn,ai._callbacks={},ai._directMap={};var ln,pi={},gi=!1,Li=!1,Ki=!1;function ua(e){e=e||{};var i,c=!1;for(i in pi)e[i]?c=!0:pi[i]=0;c||(Ki=!1)}function la(e,i,c,y,I,H){var Q,ge,tt,Rt=[],Ft=c.type;if(!ai._callbacks[e])return[];for(Ft=="keyup"&&an(e)&&(i=[e]),Q=0;ai._callbacks[e].length>Q;++Q)ge=ai._callbacks[e][Q],(y||!ge.seq||pi[ge.seq]==ge.level)&&Ft==ge.action&&(Ft=="keypress"&&!c.metaKey&&!c.ctrlKey||(tt=ge.modifiers,i.sort().join(",")===tt.sort().join(",")))&&((!y&&ge.combo==I||y&&ge.seq==y&&ge.level==H)&&ai._callbacks[e].splice(Q,1),Rt.push(ge));return Rt}function Lo(e,i,c,y){ai.stopCallback(i,i.target||i.srcElement,c,y)||e(i,c)===!1&&(function(I){I.preventDefault?I.preventDefault():I.returnValue=!1}(i),function(I){I.stopPropagation?I.stopPropagation():I.cancelBubble=!0}(i))}function Fa(e){typeof e.which!="number"&&(e.which=e.keyCode);var i=$r(e);i&&(e.type!="keyup"||gi!==i?ai.handleKey(i,function(c){var y=[];return c.shiftKey&&y.push("shift"),c.altKey&&y.push("alt"),c.ctrlKey&&y.push("ctrl"),c.metaKey&&y.push("meta"),y}(e),e):gi=!1)}function go(e,i,c,y){function I(tt){return function(){Ki=tt,++pi[e],clearTimeout(ln),ln=setTimeout(ua,1e3)}}function H(tt){Lo(c,tt,e),y!=="keyup"&&(gi=$r(tt)),setTimeout(ua,10)}pi[e]=0;for(var Q=0;i.length>Q;++Q){var ge=Q+1===i.length?H:I(y||ei(i[Q+1]).action);Qs(i[Q],ge,y,e,Q)}}function Qs(e,i,c,y,I){ai._directMap[e+":"+c]=i;var H,Q=(e=e.replace(/\s+/g," ")).split(" ");Q.length>1?go(e,Q,i,c):(H=ei(e,c),ai._callbacks[H.key]=ai._callbacks[H.key]||[],la(H.key,H.modifiers,{type:H.action},y,e,I),ai._callbacks[H.key][y?"unshift":"push"]({callback:i,modifiers:H.modifiers,action:H.action,seq:y,level:I,combo:e}))}ai._handleKey=function(e,i,c){var y,I=la(e,i,c),H={},Q=0,ge=!1;for(y=0;I.length>y;++y)I[y].seq&&(Q=Math.max(Q,I[y].level));for(y=0;I.length>y;++y)if(I[y].seq){if(I[y].level!=Q)continue;ge=!0,H[I[y].seq]=1,Lo(I[y].callback,c,I[y].combo,I[y].seq)}else ge||Lo(I[y].callback,c,I[y].combo);var tt=c.type=="keypress"&&Li;c.type!=Ki||an(e)||tt||ua(H),Li=ge&&c.type=="keydown"},ai._bindMultiple=function(e,i,c){for(var y=0;e.length>y;++y)Qs(e[y],i,c)},yr(Xn,"keypress",Fa),yr(Xn,"keydown",Fa),yr(Xn,"keyup",Fa)}})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)}),fo,Oa=function(b){return b&&b.length?b[0]:void 0},to=(fo=1,function(b){return"".concat(b,"-").concat(fo++)}),Ia=function(b,M){var D,P;return!(!b||!M||((D=b.properties)===null||D===void 0?void 0:D.id)!==((P=M.properties)===null||P===void 0?void 0:P.id))},Os=function(b){var M=b.target,D=b.targetHandler,P=b.otherHandler;return b.data.map(function(V,q){var be,$e=Ia(V,M)?D:P;return(be=$e==null?void 0:$e(V,q))!==null&&be!==void 0?be:V})},Bs=function(){return{id:to("point"),isHover:!1,isActive:!1,isDrag:!1,createTime:Date.now()}},so=function(){return{id:to("line"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},yo=function(){return{id:to("polygon"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},hs=function(b){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Rr(b,Di(Di({},Bs()),M))},zs=function(b){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"Feature",properties:Di(Di({},so()),{},{nodes:b},M),geometry:{type:"LineString",coordinates:kn(wn(b))}}},wu=function(b){return pn(b,{id:to("dashLine")})},Gu=function(b){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"Feature",properties:Di(Di({},yo()),{},{nodes:b},M),geometry:{type:"Polygon",coordinates:[kn(wn([].concat(er(b),[Oa(b)])))]}}},Bl=function(b){return function(M,D,P){P===void 0&&(P={});for(var V=qs(M).coordinates,q=0,be=0;V.length>be&&(q>D||be!==V.length-1);be++){if(q>=D){var $e=D-q;if($e){var _t=Gc(V[be],V[be-1])-180;return Uh(V[be],$e,_t,P)}return Rr(V[be])}q+=xc(V[be],V[be+1],P)}return Rr(V[V.length-1])}(b,hf(b,{units:"meters"})/2,{units:"meters"})},Au=function(b,M){var D=M.showTotalDistance,P=M.format,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},q=[];if(D){var be=Bl(b),$e=hf(b,{units:"meters"});be.properties=Di({id:to("text"),isActive:!1,meters:$e,text:P($e),type:"totalDistance"},V),q.push(be)}else for(var _t=b.geometry.coordinates,Gt=0;_t.length-1>Gt;Gt++){var yr=Rr(_t[Gt]),$r=Rr(_t[Gt+1]),an=xc(yr,$r,{units:"meters"}),Un=Mf(wn([yr,$r]));Un.properties=Di({id:to("text"),isActive:!1,meters:an,text:P(an),type:"distance"},V),q.push(Un)}return q},Sf=function(b,M){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=M.format,V=Yl(b);return Qn(b,{properties:Di({meters:V,text:P(V),type:"area",isActive:!1},D)})},Xl=function(b){var M,D,P=b.getContainer();return(M=(D=P==null?void 0:P.querySelector(".l7-marker-container"))!==null&&D!==void 0?D:P==null?void 0:P.querySelector(".amap-maps"))!==null&&M!==void 0?M:null},Ic=function(b){return b.lngLat||b.lnglat},Cl=function(b){var M=Ic(b);return[M.lng,M.lat]},rf=function(b){return[b.lng,b.lat]},mf=function(b){for(var M=Number.MAX_SAFE_INTEGER,D=0,P=b.length,V=0;P>V;V++)M>b[V]&&(M=b[V],D=V);return D},lh=function(b,M){var D=[],P=[];return b.forEach(function(V){Fs(V,M)?P.length&&(D.push(P),P=[]):P.push(V)}),P.length&&D.push(P),D},pc=function(b,M,D){var P=[],V=[],q=[];return(P=b==="drawData"?M.getData():b instanceof Function?b(D):b).length&&(V=P.map(function(be){var $e,_t=($e=be.properties)!==null&&$e!==void 0?$e:{},Gt=_t.nodes,yr=Gt===void 0?[]:Gt,$r=_t.isActive;return $r!==void 0&&$r?yr.filter(function(an){return!Fs(an.geometry.coordinates,D)}):yr}).flat().filter(function(be){return be}),V.length||(V=kn(wn(P)).map(function(be){return Rr(be)})),q=P.map(function(be){var $e,_t,Gt,yr=($e=(_t=be.properties)===null||_t===void 0?void 0:_t.line)!==null&&$e!==void 0?$e:be;return!((Gt=be.properties)===null||Gt===void 0)&&Gt.isActive?lh(yr.properties.nodes.map(function($r){return $r.geometry.coordinates}),D).filter(function($r){return $r.length>1}).map(function($r){return pn($r)}):[yr]}).flat().filter(function(be){return be}),q.length||P.forEach(function(be){var $e=Il(be);if(/linestring/i.test($e)&&q.push(be),/polygon/i.test($e)){var _t,Gt,yr=Hh(be);return(_t=q).push.apply(_t,er((Gt=yr==null?void 0:yr.features)!==null&&Gt!==void 0?Gt:[yr]))}})),{points:V,lines:q}},fu=function(b,M,D,P){var V=D.pointAdsorbPixel,q=hr(b,2),be=P.lngLatToPixel([q[0],q[1]]),$e=be.x,_t=be.y,Gt=M.map(function($r){var an=hr($r.geometry.coordinates,2),Un=P.lngLatToPixel([an[0],an[1]]),ei=Un.y;return Math.pow($e-Un.x,2)+Math.pow(_t-ei,2)}),yr=mf(Gt);return Math.pow(Gt[yr],.5)>V?null:M[yr].geometry.coordinates},Cf=function(b,M,D,P){var V=D.lineAdsorbPixel,q=hr(b,2),be=P.lngLatToPixel([q[0],q[1]]),$e=be.x,_t=be.y,Gt=M.filter(function(an){return kn(an).length>1}).map(function(an){return function(Un,ei,Jn){Jn===void 0&&(Jn={});var Sn=Rr([1/0,1/0],{dist:1/0}),Xn=0;return Bi(Un,function(ai){for(var ln=Io(ai),pi=0;ln.length-1>pi;pi++){var gi=Rr(ln[pi]);gi.properties.dist=xc(ei,gi,Jn);var Li=Rr(ln[pi+1]);Li.properties.dist=xc(ei,Li,Jn);var Ki=xc(gi,Li,Jn),ua=Math.max(gi.properties.dist,Li.properties.dist),la=Gc(gi,Li),Lo=Uh(ei,ua,la+90,Jn),Fa=Uh(ei,ua,la-90,Jn),go=Ll(pn([Lo.geometry.coordinates,Fa.geometry.coordinates]),pn([gi.geometry.coordinates,Li.geometry.coordinates])),Qs=null;go.features.length>0&&((Qs=go.features[0]).properties.dist=xc(ei,Qs,Jn),Qs.properties.location=Xn+xc(gi,Qs,Jn)),Sn.properties.dist>gi.properties.dist&&((Sn=gi).properties.index=pi,Sn.properties.location=Xn),Sn.properties.dist>Li.properties.dist&&((Sn=Li).properties.index=pi+1,Sn.properties.location=Xn+Ki),Qs&&Sn.properties.dist>Qs.properties.dist&&((Sn=Qs).properties.index=pi),Xn+=Ki}}),Sn}(an,b)}),yr=Gt.map(function(an){var Un=hr(an.geometry.coordinates,2),ei=P.lngLatToPixel([Un[0],Un[1]]),Jn=ei.y;return Math.pow($e-ei.x,2)+Math.pow(_t-Jn,2)}),$r=mf(yr);return Math.pow(yr[$r],.5)>V?null:Gt[$r].geometry.coordinates},Uu=function(b,M){var D=hr(M,2),P=D[0],V=D[1];b.lngLat&&(b.lngLat={lng:P,lat:V}),b.lnglat&&(b.lnglat={lng:P,lat:V})},Qf=function(){function b(M,D){As(this,b),this.container=void 0,this.cursor=null,this.options=void 0,this.container=Xl(M),this.options=D}return vr(b,[{key:"setCursor",value:function(M){M!==this.cursor&&this.container&&(this.container.style.cursor=M?this.options[M]:"",this.cursor=M)}},{key:"destroy",value:function(){this.setCursor(null)}}]),b}();function js(b,M){M===void 0&&(M={});var D=M.insertAt;if(b&&typeof document!="undefined"){var P=document.head||document.getElementsByTagName("head")[0],V=document.createElement("style");V.type="text/css",D==="top"&&P.firstChild?P.insertBefore(V,P.firstChild):P.appendChild(V),V.styleSheet?V.styleSheet.cssText=b:V.appendChild(document.createTextNode(b))}}js('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}'),js(".tippy-box[data-theme~=light]{color:#26323d;box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);background-color:#fff}.tippy-box[data-theme~=light][data-placement^=top]>.tippy-arrow:before{border-top-color:#fff}.tippy-box[data-theme~=light][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:#fff}.tippy-box[data-theme~=light][data-placement^=left]>.tippy-arrow:before{border-left-color:#fff}.tippy-box[data-theme~=light][data-placement^=right]>.tippy-arrow:before{border-right-color:#fff}.tippy-box[data-theme~=light]>.tippy-backdrop{background-color:#fff}.tippy-box[data-theme~=light]>.tippy-svg-arrow{fill:#fff}");var Pu=function(){function b(M,D){var P=this;As(this,b),this.content="",this.tippy=void 0,this.scene=void 0,this.isMouseInner=!1,this.onMouseMove=function(){P.isMouseInner=!0,P.checkTippyShow()},this.onMouseOut=function(){P.isMouseInner=!1,P.checkTippyShow()},this.setContent=Dl(function(V){P.content=V!=null?V:"",P.tippy.setContent(V!=null?V:""),P.checkTippyShow()},16,{maxWait:16}),this.tippy=xa(Xl(M),Di(Di({},Vs),D)),this.tippy.hide(),this.scene=M,M.on(v.SceneEvent.Mousemove,this.onMouseMove),M.on(v.SceneEvent.Mouseout,this.onMouseOut)}return vr(b,[{key:"getContent",value:function(){return this.content}},{key:"checkTippyShow",value:function(){this.content&&this.isMouseInner?this.tippy.show():this.tippy.hide()}},{key:"destroy",value:function(){this.scene.off(v.SceneEvent.Mousemove,this.onMouseMove),this.scene.off(v.SceneEvent.Mouseout,this.onMouseOut),this.tippy.destroy()}}]),b}(),Ru=function(){function b(M){var D=M.config;As(this,b),this.historyList=[],this.historyIndex=0,this.config=void 0,this.config=D}return vr(b,[{key:"save",value:function(M){if(this.config){var D=this.config.maxSize;this.historyIndex&&(this.historyList=this.historyList.slice(this.historyIndex),this.historyIndex=0),D>this.historyList.length||this.historyList.pop();var P=Oc(M);return this.historyList.unshift(P),P}}},{key:"revert",value:function(){if(this.historyList.length&&this.historyList.length-1>this.historyIndex){var M=this.historyList[++this.historyIndex];return M?Oc(M):void 0}}},{key:"redo",value:function(){if(this.historyList.length&&this.historyIndex>0){var M=this.historyList[--this.historyIndex];return M?Oc(M):void 0}}}]),b}(),nf=function(b){lr(D,b);var M=Yr(D);function D(P){var V,q=P.data,be=P.render,$e=P.history;return As(this,D),(V=M.call(this)).render=void 0,V.data=Oc($),V.timeout=null,V.diffData={},V.history=void 0,V.render=be,$e&&(V.history=new Ru({config:$e})),q&&V.setData(q),V}return vr(D,[{key:"saveHistory",value:function(){var P;return(P=this.history)===null||P===void 0?void 0:P.save(this.data)}},{key:"revertHistory",value:function(){var P,V=(P=this.history)===null||P===void 0?void 0:P.revert();if(V)return this.setData(V),V}},{key:"redoHistory",value:function(){var P,V=(P=this.history)===null||P===void 0?void 0:P.redo();if(V)return this.setData(V),V}},{key:"setData",value:function(P){var V=this;return Object.keys(P).length&&(this.data=Di(Di({},this.data),P),this.diffData=Di(Di({},this.diffData),P),this.timeout||(this.timeout=requestAnimationFrame(function(){return V.updateDiffData()})),this.emit(v.SourceEvent.Change,{data:this.data})),this.data}},{key:"getData",value:function(){return this.data}},{key:"getRenderData",value:function(P){return this.data[P]}},{key:"setRenderData",value:function(P,V){var q=typeof V=="function"?V(this.getRenderData(P)):V;return this.setData(zr({},P,er(q).sort(function(be,$e){return+be.properties.isActive-+$e.properties.isActive}))),this.emit(v.SourceEvent.Change,this.data),q}},{key:"updateDiffData",value:function(){var P=this,V=Object.entries(this.diffData);V.length&&(V.forEach(function(q){var be,$e=hr(q,2),_t=$e[0],Gt=$e[1];Array.isArray(Gt)&&((be=P.getRender(_t))===null||be===void 0||be.setData(Gt))}),this.emit(v.SourceEvent.Update,this.data,this.diffData),this.diffData={},this.timeout=null)}},{key:"getRender",value:function(P){return this.render[P]}},{key:"clear",value:function(){this.setData(ud(Object.keys(this.render).map(function(P){return[P,[]]})))}}]),D}(ah),pd=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;As(this,D),(q=M.call(this)).scene=void 0,q.source=void 0,q.render=void 0,q.cursor=void 0,q.options=void 0,q.enabled=!1,q.allowCreate=!1,q.sceneRender=void 0,q.mouseLngLat={lng:0,lat:0},q.popup=void 0,q.addCount=0,q.saveMouseLngLat=Dl(function(Gt){q.mouseLngLat=Ic(Gt)},100,{maxWait:100}),q.saveHistory=Dl(function(){q.options.history&&q.source.saveHistory()},100),q.bindThis(),q.scene=P,q.sceneRender=new du(P),q.options=Ga({},q.getDefaultOptions(V),V),q.render=q.initRender(),q.source=new nf({render:q.render,history:q.options.history||void 0}),q.cursor=new Qf(P,q.options.cursor);var be=q.options,$e=be.initialData,_t=be.popup;return $e&&q.setData($e),_t&&(q.popup=new Pu(P,_t instanceof Object?_t:{})),q.saveHistory(),q.bindCommonEvent(),q.emit(v.DrawEvent.Init,Hr(q)),q.bindEnableEvent(),q}return vr(D,[{key:"addable",get:function(){var P=this.getData(),V=this.options,q=V.multiple,be=V.maxCount,$e=P.find(function(_t){return _t.properties.isDraw});return!(!this.enabled||!this.allowCreate)&&(!!(q&&0>=be||$e)||!(!q&&this.addCount>=1)&&(0>=be||be>P.length))}},{key:"getOptions",value:function(){return this.options}},{key:"getEditItem",value:function(){return this.editItem}},{key:"getDragItem",value:function(){return this.dragItem}},{key:"setHelper",value:function(P){var V,q,be=this.options.helper;if(be){var $e=(V=P in be?be[P]:P)!==null&&V!==void 0?V:null;(q=this.popup)===null||q===void 0||q.setContent($e)}}},{key:"isEnable",value:function(){return this.enabled}},{key:"bindThis",value:function(){this.initRender=this.initRender.bind(this),this.getData=this.getData.bind(this),this.setData=this.setData.bind(this),this.emitChangeEvent=this.emitChangeEvent.bind(this),this.saveHistory=this.saveHistory.bind(this),this.onSceneMouseMove=this.onSceneMouseMove.bind(this),this.revertHistory=this.revertHistory.bind(this),this.redoHistory=this.redoHistory.bind(this),this.removeActiveFeature=this.removeActiveFeature.bind(this),this.bindCommonEvent=this.bindCommonEvent.bind(this),this.bindEnableEvent=this.bindEnableEvent.bind(this),this.unbindEnableEvent=this.unbindEnableEvent.bind(this),this.setActiveFeature=this.setActiveFeature.bind(this)}},{key:"bindCommonEvent",value:function(){var P=this;this.on(v.DrawEvent.Add,this.emitChangeEvent),this.on(v.DrawEvent.Add,function(){P.addCount++}),this.on(v.DrawEvent.Edit,this.emitChangeEvent),this.on(v.DrawEvent.Remove,this.emitChangeEvent),this.on(v.DrawEvent.Clear,this.emitChangeEvent),this.on(v.DrawEvent.AddNode,this.saveHistory),this.on(v.DrawEvent.RemoveNode,this.emitChangeEvent)}},{key:"bindEnableEvent",value:function(){this.unbindKeyboardEvent(),this.scene.setMapStatus({doubleClickZoom:!1}),this.scene.on(v.SceneEvent.Mousemove,this.saveMouseLngLat),this.bindKeyboardEvent()}},{key:"unbindEnableEvent",value:function(){this.scene.setMapStatus({doubleClickZoom:!0}),this.scene.off(v.SceneEvent.Mousemove,this.saveMouseLngLat),this.unbindKeyboardEvent()}},{key:"bindKeyboardEvent",value:function(){var P=this,V=this.options.keyboard||{},q=V.revert,be=V.redo,$e=V.remove;$e&&Zo.bind($e,function(){P.removeActiveFeature()}),this.options.history&&(q&&Zo.bind(q,this.revertHistory),be&&Zo.bind(be,this.redoHistory))}},{key:"unbindKeyboardEvent",value:function(){var P=this.options.keyboard||{},V=P.revert,q=P.redo,be=P.remove;be&&Zo.unbind(be),this.options.history&&(V&&Zo.unbind(V),q&&Zo.unbind(q))}},{key:"emitChangeEvent",value:function(){this.emit(v.DrawEvent.Change,this.getData()),this.saveHistory()}},{key:"revertHistory",value:function(){this.enabled&&this.options.history&&this.source.revertHistory()&&this.correctDrawItem()}},{key:"redoHistory",value:function(){this.enabled&&this.options.history&&this.source.redoHistory()&&this.correctDrawItem()}},{key:"getRenderLayers",value:function(){return ud(sa(this.render).map(function(P){var V=hr(P,2);return[V[0],V[1].getLayers()]}))}},{key:"getTargetFeature",value:function(P){var V,q,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getData(),$e=null;return P&&($e=(V=be.find(function(_t){var Gt;return _t.properties.id===(typeof P=="string"?P:(Gt=P.properties)===null||Gt===void 0?void 0:Gt.id)}))!==null&&V!==void 0?V:null,!$e&&P instanceof Object&&($e=(q=be.find(function(_t){return Fs(P.geometry,_t.geometry)}))!==null&&q!==void 0?q:null)),$e}},{key:"removeActiveFeature",value:function(){var P=this.getData().find(function(V){var q=V.properties;return q.isActive||q.isDraw});return P&&this.removeFeature(P),P}},{key:"removeFeature",value:function(P){var V=this.getData(),q=this.getTargetFeature(P);q&&(this.setData(V.filter(function(be){return!Ia(q,be)})),this.emit(v.DrawEvent.Remove,P,this.getData()))}},{key:"correctDrawItem",value:function(){this.getData().find(function(P){return P.properties.isDraw})&&this.onSceneMouseMove({type:"mousemove",lnglat:this.mouseLngLat,lngLat:this.mouseLngLat})}},{key:"initRender",value:function(){var P,V={},q=function($e,_t){var Gt=typeof Symbol!="undefined"&&$e[Symbol.iterator]||$e["@@iterator"];if(!Gt){if(Array.isArray($e)||(Gt=dn($e))||_t&&$e&&typeof $e.length=="number"){Gt&&($e=Gt);var yr=0,$r=function(){};return{s:$r,n:function(){return $e.length>yr?{done:!1,value:$e[yr++]}:{done:!0}},e:function(Jn){throw Jn},f:$r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var an,Un=!0,ei=!1;return{s:function(){Gt=Gt.call($e)},n:function(){var Jn=Gt.next();return Un=Jn.done,Jn},e:function(Jn){ei=!0,an=Jn},f:function(){try{Un||Gt.return==null||Gt.return()}finally{if(ei)throw an}}}}(this.getRenderTypes());try{for(q.s();!(P=q.n()).done;){var be=P.value;V[be]=new Wf[be](this.scene,{style:this.options.style[be]})}}catch($e){q.e($e)}finally{q.f()}return V}},{key:"getCommonOptions",value:function(P){return{initialData:[],autoActive:!0,cursor:Oc(l),editable:!0,style:Oc(sd),multiple:!0,history:Oc(Zs),keyboard:Oc(ts),popup:!0,helper:{},maxCount:-1}}},{key:"setCursor",value:function(P){this.cursor.setCursor(P)}},{key:"resetCursor",value:function(){this.setCursor(this.addable?"draw":null)}},{key:"enable",value:function(){var P=this,V=0>=arguments.length||arguments[0]===void 0||arguments[0];this.allowCreate=V,this.addCount=0,this.enabled=!0,this.bindEnableEvent(),this.resetCursor(),this.setHelper(this.addable?"draw":null),setTimeout(function(){P.emit(v.DrawEvent.Enable,P)},0)}},{key:"disable",value:function(){var P=this;this.resetFeatures(),this.enabled=!1,this.setCursor(null),this.unbindEnableEvent(),this.addCount=0,this.setHelper(null),setTimeout(function(){P.emit(v.DrawEvent.Disable,P)},0)}},{key:"clear",value:function(){var P=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.source.clear(),this.emit(v.DrawEvent.Clear,this),P&&this.disable()}},{key:"show",value:function(){return Object.values(this.render).forEach(function(P){P.show()})}},{key:"hide",value:function(){return Object.values(this.render).forEach(function(P){P.hide()})}},{key:"destroy",value:function(){var P,V=this;Object.values(this.render).forEach(function(q){q.destroy()}),Object.values(v.RenderEvent).forEach(function(q){Object.values(V.render).forEach(function(be){be.removeAllListeners(q)}),V.sceneRender.removeAllListeners(q)}),setTimeout(function(){Object.values(v.DrawEvent).forEach(function(q){V.removeAllListeners(q)})},0),(P=this.popup)===null||P===void 0||P.destroy(),this.cursor.destroy(),this.emit(v.DrawEvent.Destroy,this)}}]),D}(ah),w=function(b){var M=b==null?0:b.length;return M?b[M-1]:void 0},G=function(b){lr(D,b);var M=Yr(D);function D(){return As(this,D),M.apply(this,arguments)}return vr(D,[{key:"pointRender",get:function(){return this.render.point}},{key:"dragPoint",get:function(){return this.getPointData().find(function(P){return P.properties.isDrag})}},{key:"editPoint",get:function(){return this.getPointData().find(function(P){return P.properties.isActive})}},{key:"hoverPoint",get:function(){return this.getPointData().find(function(P){return P.properties.isHover})}},{key:"getDragPoint",value:function(){return this.dragPoint}},{key:"getEditPoint",value:function(){return this.editPoint}},{key:"getPointData",value:function(){return this.source.getRenderData("point")}},{key:"setPointData",value:function(P){return this.source.setRenderData("point",P)}},{key:"bindPointRenderEvent",value:function(){var P,V,q,be,$e,_t;(P=this.pointRender)===null||P===void 0||P.on(v.RenderEvent.UnClick,this.onPointCreate.bind(this)),(V=this.pointRender)===null||V===void 0||V.on(v.RenderEvent.Mousemove,this.onPointMouseMove.bind(this)),(q=this.pointRender)===null||q===void 0||q.on(v.RenderEvent.Mouseout,this.onPointMouseOut.bind(this)),(be=this.pointRender)===null||be===void 0||be.on(v.RenderEvent.Dragstart,this.onPointDragStart.bind(this)),($e=this.pointRender)===null||$e===void 0||$e.on(v.RenderEvent.Dragging,this.onPointDragging.bind(this)),(_t=this.pointRender)===null||_t===void 0||_t.on(v.RenderEvent.Dragend,this.onPointDragEnd.bind(this))}},{key:"handleCreatePoint",value:function(P){var V=this.options,q=V.autoActive,be=V.editable,$e=hs(P);return this.setPointData(function(_t){return Os({target:$e,data:[].concat(er(_t),[$e]),targetHandler:function(Gt){Gt.properties=Di(Di({},Gt.properties),{},{isHover:be,isActive:q&&be})},otherHandler:function(Gt){Gt.properties=Di(Di({},Gt.properties),{},{isHover:!1,isActive:!1,isDrag:!1})}})}),$e}},{key:"handlePointHover",value:function(P){return this.setCursor("pointHover"),Ia(P,this.hoverPoint)||this.setPointData(function(V){return Os({target:P,data:V,targetHandler:function(q){q.properties.isHover=!0},otherHandler:function(q){q.properties.isHover=!1}})}),P}},{key:"handlePointUnHover",value:function(P){return this.resetCursor(),this.setPointData(function(V){return V.map(function(q){return q.properties.isHover=!1,q})}),P}},{key:"handlePointDragStart",value:function(P){return this.setPointData(function(V){return Os({target:P,data:V,targetHandler:function(q){q.properties=Di(Di({},q.properties),{},{isDrag:!0,isActive:!0})},otherHandler:function(q){q.properties=Di(Di({},q.properties),{},{isDrag:!1,isActive:!1})}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),P}},{key:"handlePointDragging",value:function(P,V){return this.setPointData(function(q){return Os({target:P,data:q,targetHandler:function(be){be.geometry.coordinates=rf(V)}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),P}},{key:"handlePointDragEnd",value:function(P){return this.setPointData(function(V){return Os({target:P,data:V,targetHandler:function(q){q.properties.isDrag=!1}})}),this.scene.setMapStatus({dragEnable:!0}),this.setCursor("pointHover"),P}},{key:"onPointCreate",value:function(P){return this.handleCreatePoint(rf(Ic(P)))}},{key:"onPointMouseMove",value:function(P){return this.handlePointHover(P.feature)}},{key:"onPointMouseOut",value:function(P){return this.handlePointUnHover(P.feature)}},{key:"onPointDragStart",value:function(P){if(this.options.editable)return this.handlePointDragStart(P.feature)}},{key:"onPointDragging",value:function(P){var V=this.dragPoint;if(this.options.editable&&V)return this.handlePointDragging(V,Ic(P))}},{key:"onPointDragEnd",value:function(P){var V=this.dragPoint;if(this.options.editable&&V)return this.handlePointDragEnd(V)}},{key:"enablePointRenderAction",value:function(){var P,V,q,be,$e=this.options.editable;this.enabled&&((V=this.pointRender)===null||V===void 0||V.enableCreate()),(P=this.pointRender)===null||P===void 0||P.enableClick(),$e&&((q=this.pointRender)===null||q===void 0||q.enableHover(),(be=this.pointRender)===null||be===void 0||be.enableDrag())}},{key:"disablePointRenderAction",value:function(){var P,V,q,be;(P=this.pointRender)===null||P===void 0||P.disableCreate(),(V=this.pointRender)===null||V===void 0||V.disableHover(),(q=this.pointRender)===null||q===void 0||q.disableDrag(),(be=this.pointRender)===null||be===void 0||be.disableClick()}}]),D}(pd),Ce=function(b){lr(D,b);var M=Yr(D);function D(){return As(this,D),M.apply(this,arguments)}return vr(D,[{key:"midPointRender",get:function(){return this.render.midPoint}},{key:"getCommonOptions",value:function(P){return Di(Di({},at(Zr(D.prototype),"getCommonOptions",this).call(this,P)),{},{showMidPoint:!0})}},{key:"bindMidPointRenderEvent",value:function(){var P,V,q;(P=this.midPointRender)===null||P===void 0||P.on(v.RenderEvent.Click,this.onMidPointClick.bind(this)),(V=this.midPointRender)===null||V===void 0||V.on(v.RenderEvent.Mousemove,this.onMidPointHover.bind(this)),(q=this.midPointRender)===null||q===void 0||q.on(v.RenderEvent.Mouseout,this.onMidPointUnHover.bind(this))}},{key:"getMidPointData",value:function(){return this.source.getRenderData("midPoint")}},{key:"setMidPointData",value:function(P){return this.source.setRenderData("midPoint",P)}},{key:"getMidPointsByLine",value:function(P){var V=P.properties.nodes;if(!this.options.showMidPoint||2>V.length)return[];for(var q=[],be=0;V.length-1>be;be++){var $e,_t,Gt,yr,$r=Mf(wn([V[be],V[be+1]]),{properties:{id:to("midPoint"),startId:($e=(_t=V[be].properties)===null||_t===void 0?void 0:_t.id)!==null&&$e!==void 0?$e:"",endId:(Gt=(yr=V[be+1].properties)===null||yr===void 0?void 0:yr.id)!==null&&Gt!==void 0?Gt:""}});q.push($r)}return q}},{key:"onMidPointHover",value:function(P){this.setCursor("pointHover")}},{key:"onMidPointUnHover",value:function(P){this.resetCursor()}},{key:"enableMidPointRenderAction",value:function(){var P,V;(P=this.midPointRender)===null||P===void 0||P.enableClick(),(V=this.midPointRender)===null||V===void 0||V.enableHover()}},{key:"disableMidPointRenderAction",value:function(){var P,V;(P=this.midPointRender)===null||P===void 0||P.disableClick(),(V=this.midPointRender)===null||V===void 0||V.disableHover()}}]),D}(G),ae={draw:"\u5355\u51FB\u7ED8\u5236\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u70B9\u4F4D\u7F6E",pointDrag:null},et={draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u8282\u70B9\u4F4D\u7F6E",pointDrag:null,lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u7EBF\u4F4D\u7F6E",lineDrag:null,midPointHover:"\u5355\u51FB\u5728\u8BE5\u4F4D\u7F6E\u65B0\u589E\u8282\u70B9",drawFinish:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236\uFF0C\u53CC\u51FB\u7ED3\u675F\u7ED8\u5236"},Ie={draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",drawContinue:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236",drawFinish:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236\uFF0C\u53CC\u51FB\u7ED3\u675F\u7ED8\u5236",midPointHover:"\u5355\u51FB\u5728\u8BE5\u4F4D\u7F6E\u65B0\u589E\u8282\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u8282\u70B9\u4F4D\u7F6E",pointDrag:null,lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u9762\u4F4D\u7F6E",lineDrag:null,polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u9762\u4F4D\u7F6E",polygonDrag:null},Ze=Di(Di({},Ie),{},{draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",drawFinish:"\u5355\u51FB\u7ED3\u675F\u7ED8\u5236"}),Fe={draw:"\u62D6\u62FD\u5F00\u59CB\u7ED8\u5236",drawFinish:"\u677E\u5F00\u9F20\u6807\u7ED3\u675F\u7ED8\u5236"},it={lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u77E9\u5F62\u4F4D\u7F6E",polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u77E9\u5F62\u4F4D\u7F6E"},gt={lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u5706\u4F4D\u7F6E",polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u5706\u4F4D\u7F6E"},It=function(b){lr(D,b);var M=Yr(D);function D(){var P;As(this,D);for(var V=arguments.length,q=Array(V),be=0;V>be;be++)q[be]=arguments[be];return(P=M.call.apply(M,[this].concat(q))).previousPosition=[0,0],P}return vr(D,[{key:"lineRender",get:function(){return this.render.line}},{key:"dragLine",get:function(){return this.getLineData().find(function(P){return P.properties.isDrag})}},{key:"drawLine",get:function(){return this.getLineData().find(function(P){return P.properties.isDraw})}},{key:"editLine",get:function(){return this.getLineData().find(function(P){var V=P.properties;return!V.isDraw&&V.isActive})}},{key:"hoverLine",get:function(){return this.getLineData().find(function(P){return P.properties.isHover})}},{key:"getDragLine",value:function(){return this.dragLine}},{key:"getDrawLine",value:function(){return this.drawLine}},{key:"getEditLine",value:function(){return this.editLine}},{key:"getDefaultOptions",value:function(P){var V=Di(Di({},this.getCommonOptions(P)),{},{showMidPoint:!0,distanceOptions:!1,helper:Oc(et)});return P.distanceOptions&&(V.distanceOptions=Di(Di({},Tu),V.distanceOptions)),P.adsorbOptions&&(V.adsorbOptions=Di(Di({},ou),V.adsorbOptions)),V}},{key:"getAdsorbPosition",value:function(P){var V=this.options.adsorbOptions;if(typeof V=="boolean")return P;var q=this.scene,be=V.pointAdsorbPixel,$e=V.lineAdsorbPixel,_t=null,Gt=pc(V.data,this,P),yr=Gt.points,$r=Gt.lines;return yr.length&&be>0&&(_t=fu(P,yr,V,q)),!_t&&$r.length&&$e>0&&(_t=Cf(P,$r,V,q)),_t}},{key:"bindSceneEvent",value:function(){this.sceneRender.on(v.RenderEvent.Mousemove,this.onSceneMouseMove.bind(this))}},{key:"bindPointRenderEvent",value:function(){var P;at(Zr(D.prototype),"bindPointRenderEvent",this).call(this),(P=this.pointRender)===null||P===void 0||P.on(v.RenderEvent.Click,this.onPointClick.bind(this))}},{key:"bindLineRenderEvent",value:function(){var P,V,q,be,$e,_t;(P=this.lineRender)===null||P===void 0||P.on(v.RenderEvent.UnClick,this.onLineUnClick.bind(this)),(V=this.lineRender)===null||V===void 0||V.on(v.RenderEvent.Mousemove,this.onLineMouseMove.bind(this)),(q=this.lineRender)===null||q===void 0||q.on(v.RenderEvent.Mouseout,this.onLineMouseOut.bind(this)),(be=this.lineRender)===null||be===void 0||be.on(v.RenderEvent.Dragstart,this.onLineDragStart.bind(this)),($e=this.lineRender)===null||$e===void 0||$e.on(v.RenderEvent.Dragging,this.onLineDragging.bind(this)),(_t=this.lineRender)===null||_t===void 0||_t.on(v.RenderEvent.Dragend,this.onLineDragEnd.bind(this))}},{key:"getDashLineDistanceTexts",value:function(P,V){var q=V.showTotalDistance,be=V.format;return V.showDashDistance?P.map(function($e){return Au($e,{showTotalDistance:q,format:be},{isActive:!0,type:"dash"})}).flat():[]}},{key:"getLineDistanceTexts",value:function(P,V){var q=V.showTotalDistance,be=V.format,$e=V.showWhen,_t=[];if($e.includes("active")){var Gt=P.filter(function($r){return $r.properties.isActive&&$r.properties.nodes.length>1});_t.push.apply(_t,er(Gt.map(function($r){return Au($r,{showTotalDistance:q,format:be},{isActive:!0})}).flat()))}if($e.includes("normal")){var yr=P.filter(function($r){return!$r.properties.isActive&&$r.properties.nodes.length>1});_t.push.apply(_t,er(yr.map(function($r){return Au($r,{showTotalDistance:q,format:be})}).flat()))}return _t}},{key:"getDistanceTexts",value:function(){var P=this.options.distanceOptions;if(!P)return[];var V=[],q=P.showWhen,be=P.showDashDistance,$e=P.format,_t=P.showTotalDistance;return V.push.apply(V,er(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!1,format:$e,showDashDistance:be})).concat(er(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:_t,format:$e,showWhen:q})))),V}},{key:"getAllTexts",value:function(){return this.getDistanceTexts()}},{key:"handleCreateLine",value:function(P){var V=zs([P],{isActive:!0,isDraw:!0});return this.setLineData(function(q){return Os({target:V,data:[].concat(er(q),[V]),otherHandler:function(be){be.properties.isActive=!1}})}),this.setPointData([P]),this.setTextData(this.getAllTexts()),V}},{key:"syncLineNodes",value:function(P,V){return P.properties.nodes=V,P.geometry.coordinates=kn(wn(V)),this.setLineData(function(q){return q.map(function(be){return Ia(be,P)?P:be})}),Ia(this.editLine,P)&&this.setMidPointData(this.getMidPointsByLine(P)),this.setPointData(P.properties.nodes),this.setTextData(this.getAllTexts()),P}},{key:"setActiveLine",value:function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setLineData(function(q){return Os({target:P,data:q,targetHandler:function(be){be.properties=Di(Di({},be.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},V)},otherHandler:function(be){be.properties=Di(Di({},be.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(P.properties.nodes.map(function(q){return q.properties=Di(Di({},q.properties),{},{isHover:!1,isActive:!1}),q})),this.setMidPointData(this.getMidPointsByLine(P)),this.setDashLineData([]),this.setTextData(this.getAllTexts()),P}},{key:"clearActiveLine",value:function(){this.source.setData({point:[],line:this.getLineData().map(function(P){return P.properties=Di(Di({},P.properties),{},{isActive:!1,isHover:!1}),P}),midPoint:[],text:this.getAllTexts()})}},{key:"handleLineUnClick",value:function(P){return this.clearActiveLine(),P}},{key:"handleLineHover",value:function(P){if(!this.drawLine)return this.setCursor("lineHover"),Ia(P,this.hoverLine)||this.setLineData(function(V){return Os({target:P,data:V,targetHandler:function(q){q.properties.isHover=!0},otherHandler:function(q){q.properties.isHover=!1}})}),P}},{key:"handleLineUnHover",value:function(P){if(!this.drawLine)return this.resetCursor(),this.setLineData(function(V){return V.map(function(q){return q.properties.isHover=!1,q})}),P}},{key:"handleLineDragStart",value:function(P){return this.setActiveLine(P,{isDrag:!0,isActive:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("lineDrag"),P}},{key:"handleLineDragging",value:function(P,V){var q=V.lng,be=V.lat,$e=P.properties.nodes,_t=hr(this.previousPosition,2),Gt=_t[0],yr=_t[1];return $e.forEach(function($r){var an=$r.geometry.coordinates;$r.geometry.coordinates=[an[0]+q-Gt,an[1]+be-yr]}),this.syncLineNodes(P,$e),this.setActiveLine(P,{isDrag:!0}),this.setCursor("lineDrag"),this.previousPosition=[q,be],P}},{key:"handleLineDragEnd",value:function(P){return P.properties.isDrag=!1,this.setLineData(function(V){return V}),this.scene.setMapStatus({dragEnable:!0}),P}},{key:"resetAdsorbLngLat",value:function(P){if(this.options.adsorbOptions){var V=this.getAdsorbPosition(rf(Ic(P)));return V&&Uu(P,V),V}}},{key:"onPointCreate",value:function(P){if(!this.editLine){this.resetAdsorbLngLat(P);var V=at(Zr(D.prototype),"onPointCreate",this).call(this,P),q=this.drawLine;if(V)return q?(this.syncLineNodes(q,[].concat(er(q.properties.nodes),[V])),this.setDashLineData([])):this.handleCreateLine(V),V}}},{key:"onPointDragStart",value:function(P){if(this.editLine)return this.setHelper("pointDrag"),at(Zr(D.prototype),"onPointDragStart",this).call(this,P)}},{key:"onPointDragging",value:function(P){var V=at(Zr(D.prototype),"onPointDragging",this).call(this,P);if(V){var q=this.resetAdsorbLngLat(P);q&&(V.geometry.coordinates=Oc(q))}var be=this.editLine;return be&&V&&(this.syncLineNodes(be,be.properties.nodes.map(function($e){return Ia(V,$e)?V:$e})),this.setActiveLine(be)),V}},{key:"onPointDragEnd",value:function(P){if(this.editLine){var V=at(Zr(D.prototype),"onPointDragEnd",this).call(this,P);return this.setPointData(function(q){return q.map(function(be){return be.properties.isActive=!1,be})}),this.setHelper("pointHover"),V}}},{key:"onLineUnClick",value:function(P){var V=this.editLine;if(V)return this.handleLineUnClick(V)}},{key:"onLineMouseMove",value:function(P){if(!this.drawLine)return this.dragLine||this.drawLine||!this.options.editable||this.setHelper("lineHover"),this.handleLineHover(P.feature)}},{key:"onLineMouseOut",value:function(P){if(!this.drawLine)return this.dragLine||this.drawLine||this.setHelper(this.addable?"draw":null),this.handleLineUnHover(P.feature)}},{key:"onLineDragStart",value:function(P){if(this.options.editable&&!this.drawLine)return this.previousPosition=Cl(P),this.setHelper("lineDrag"),this.handleLineDragStart(P.feature)}},{key:"onLineDragging",value:function(P){var V=this.dragLine;if(V)return this.handleLineDragging(V,Ic(P))}},{key:"onLineDragEnd",value:function(P){var V=this.dragLine;if(V)return this.setHelper("lineHover"),this.handleLineDragEnd(V)}},{key:"onPointMouseMove",value:function(P){var V=at(Zr(D.prototype),"onPointMouseMove",this).call(this,P);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper("pointHover"),V}},{key:"onPointMouseOut",value:function(P){var V=at(Zr(D.prototype),"onPointMouseOut",this).call(this,P);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper(this.addable?"draw":null),V}},{key:"onMidPointHover",value:function(P){at(Zr(D.prototype),"onMidPointHover",this).call(this,P),this.setHelper("midPointHover")}},{key:"onMidPointUnHover",value:function(P){at(Zr(D.prototype),"onMidPointUnHover",this).call(this,P),this.setHelper(null)}},{key:"onPointClick",value:function(P){}},{key:"getLineData",value:function(){return this.source.getRenderData("line")}},{key:"setLineData",value:function(P){return this.source.setRenderData("line",P)}},{key:"getTextData",value:function(){return this.source.getRenderData("text")}},{key:"setTextData",value:function(P){return this.source.setRenderData("text",P)}},{key:"getDashLineData",value:function(){return this.source.getRenderData("dashLine")}},{key:"setDashLineData",value:function(P){return this.source.setRenderData("dashLine",P)}},{key:"onMidPointClick",value:function(P){var V=this.editLine,q=P.feature;if(V&&q&&!this.dragPoint){var be=V.properties.nodes,$e=q.properties,_t=$e.startId,Gt=$e.endId,yr=be.findIndex(function(Un){return Un.properties.id===_t}),$r=be.findIndex(function(Un){return Un.properties.id===Gt});if(yr>-1&&$r>-1){var an=hs(q.geometry.coordinates,{isDrag:!0,isHover:!0});return this.setHelper("pointDrag"),be.splice($r,0,an),V.geometry.coordinates=kn(wn(be)),this.syncLineNodes(V,be),this.setActiveLine(V),an}}}},{key:"enableSceneRenderAction",value:function(){this.sceneRender.enableDrag(),this.sceneRender.enableMouseMove(),this.sceneRender.enableDblClick()}},{key:"disableSceneRenderAction",value:function(){this.sceneRender.disableDrag(),this.sceneRender.disableMouseMove(),this.sceneRender.disableDblClick()}},{key:"enableLineRenderAction",value:function(){var P,V,q,be=this.options.editable;(P=this.lineRender)===null||P===void 0||P.enableUnClick(),be&&((V=this.lineRender)===null||V===void 0||V.enableHover(),(q=this.lineRender)===null||q===void 0||q.enableDrag())}},{key:"disableLineRenderAction",value:function(){var P,V,q;(P=this.lineRender)===null||P===void 0||P.disableUnClick(),(V=this.lineRender)===null||V===void 0||V.disableHover(),(q=this.lineRender)===null||q===void 0||q.disableDrag()}}]),D}(Ce),Tt=function(b){lr(D,b);var M=Yr(D);function D(){return As(this,D),M.apply(this,arguments)}return vr(D,[{key:"dragItem",get:function(){return this.dragPolygon}},{key:"editItem",get:function(){return this.editPolygon}},{key:"polygonRender",get:function(){return this.render.polygon}},{key:"dragPolygon",get:function(){return this.getPolygonData().find(function(P){return P.properties.isDrag})}},{key:"drawPolygon",get:function(){return this.getPolygonData().find(function(P){return P.properties.isDraw})}},{key:"editPolygon",get:function(){return this.getPolygonData().find(function(P){var V=P.properties;return!V.isDraw&&V.isActive})}},{key:"hoverPolygon",get:function(){return this.getPolygonData().find(function(P){return P.properties.isHover})}},{key:"getDragPolygon",value:function(){return this.dragPolygon}},{key:"getDrawPolygon",value:function(){return this.drawPolygon}},{key:"getEditPolygon",value:function(){return this.editPolygon}},{key:"getRenderTypes",value:function(){return["polygon","line","dashLine","midPoint","point","text"]}},{key:"getData",value:function(){return this.getPolygonData()}},{key:"getDefaultOptions",value:function(P){var V=Di(Di({},at(Zr(D.prototype),"getDefaultOptions",this).call(this,P)),{},{areaOptions:!1,helper:Oc(Ie)});return P.areaOptions&&(V.areaOptions=Di(Di({},Cs),P.areaOptions)),V}},{key:"getAreaTexts",value:function(P){var V=this.options.areaOptions;if(!V)return[];var q=V.format,be=V.showWhen,$e=[],_t=P.filter(function(Gt){return Gt.geometry.coordinates[0].length>=4});return be.includes("active")&&_t.filter(function(Gt){return Gt.properties.isActive}).forEach(function(Gt){$e.push(Sf(Gt,{format:q},{isActive:!0}))}),be.includes("normal")&&_t.filter(function(Gt){return!Gt.properties.isActive}).forEach(function(Gt){$e.push(Sf(Gt,{format:q},{isActive:!1}))}),$e}},{key:"getAllTexts",value:function(){return[].concat(er(at(Zr(D.prototype),"getAllTexts",this).call(this)),er(this.getAreaTexts(this.getPolygonData())))}},{key:"getPolygonData",value:function(){return this.source.getRenderData("polygon")}},{key:"setPolygonData",value:function(P){return this.source.setRenderData("polygon",P)}},{key:"handleCreatePolygon",value:function(P,V){var q=Gu(P,{nodes:P,line:V,isActive:!0,isDraw:!0});return this.setPolygonData(function(be){return Os({target:q,data:[].concat(er(be),[q]),otherHandler:function($e){$e.properties.isActive=!1}})}),q}},{key:"handlePolygonUnClick",value:function(P){return this.clearActivePolygon(),P}},{key:"handlePolygonHover",value:function(P){return this.setCursor("polygonHover"),Ia(P,this.hoverPolygon)||this.setPolygonData(function(V){return Os({target:P,data:V,targetHandler:function(q){q.properties.isHover=!0},otherHandler:function(q){q.properties.isHover=!1}})}),P}},{key:"handlePolygonUnHover",value:function(){this.resetCursor(),this.setPolygonData(function(P){return P.map(function(V){return V.properties.isHover=!1,V})})}},{key:"handlePolygonDragStart",value:function(P){return this.setActivePolygon(P,{isDrag:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("polygonDrag"),P}},{key:"bindPolygonRenderEvent",value:function(){var P,V,q,be;(P=this.polygonRender)===null||P===void 0||P.on(v.RenderEvent.UnClick,this.onPolygonUnClick.bind(this)),(V=this.polygonRender)===null||V===void 0||V.on(v.RenderEvent.Mousemove,this.onPolygonHover.bind(this)),(q=this.polygonRender)===null||q===void 0||q.on(v.RenderEvent.Mouseout,this.onPolygonUnHover.bind(this)),(be=this.polygonRender)===null||be===void 0||be.on(v.RenderEvent.Dragstart,this.onPolygonDragStart.bind(this))}},{key:"syncPolygonNodes",value:function(P,V){var q=kn(wn([].concat(er(V),[Oa(V)]))),be=P.properties,$e=be.line;if(P.properties.nodes=V,P.geometry.coordinates=[Ec(pn(q))?q:q.reverse()],this.setPolygonData(function(an){return an.map(function(Un){return Ia(Un,P)?P:Un})}),!Ia(this.drawPolygon,P)){var _t=$e.properties.nodes,Gt=er(V),yr=Oa(Gt);Gt.push(_t.length===V.length?hs(yr.geometry.coordinates):w(_t));var $r=w(Gt);Fs(yr.geometry.coordinates,$r.geometry.coordinates)||($r.geometry.coordinates=Oc(yr.geometry.coordinates)),this.syncLineNodes($e,Gt)}return P}},{key:"setActivePolygon",value:function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setActiveLine(P.properties.line,V),this.setPolygonData(function(q){return Os({target:P,data:q,targetHandler:function(be){be.properties=Di(Di({},be.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},V)},otherHandler:function(be){be.properties=Di(Di({},be.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setTextData(this.getAllTexts()),P}},{key:"clearActivePolygon",value:function(){this.setPolygonData(function(P){return P.map(function(V){return V.properties=Di(Di({},V.properties),{},{isActive:!1,isHover:!1}),V})}),this.clearActiveLine()}},{key:"onLineDragStart",value:function(P){var V=at(Zr(D.prototype),"onLineDragStart",this).call(this,P),q=this.getPolygonData().find(function(be){return Ia(be.properties.line,V)});return q&&(this.setActivePolygon(q,{isDrag:!0}),this.emit(v.DrawEvent.DragStart,q,this.getPolygonData())),V}},{key:"onLineUnClick",value:function(P){return this.editLine}},{key:"onLineDragEnd",value:function(P){var V=at(Zr(D.prototype),"onLineDragEnd",this).call(this,P),q=this.dragPolygon;return V&&q&&(q.properties.isDrag=!1,this.emit(v.DrawEvent.DragEnd,q,this.getPolygonData()),this.emit(v.DrawEvent.Edit,q,this.getPolygonData())),V}},{key:"onPolygonUnClick",value:function(P){var V=this.editPolygon;if(V)return this.handlePolygonUnClick(V)}},{key:"onPolygonHover",value:function(P){if(!this.drawPolygon)return this.dragPolygon||this.setHelper("polygonHover"),this.handlePolygonHover(P.feature)}},{key:"onPolygonUnHover",value:function(P){if(!this.drawPolygon)return this.setHelper(this.addable?"draw":null),this.handlePolygonUnHover()}},{key:"onPolygonDragStart",value:function(P){if(this.options.editable&&!this.drawPolygon){var V=P.feature;return this.previousPosition=Cl(P),this.setHelper("polygonDrag"),this.emit(v.DrawEvent.DragStart,V,this.getPolygonData()),this.handlePolygonDragStart(V)}}},{key:"onMidPointClick",value:function(P){var V=this.editPolygon,q=at(Zr(D.prototype),"onMidPointClick",this).call(this,P);if(q&&V){var be=V.properties.line.properties.nodes;this.syncPolygonNodes(V,be.slice(0,be.length-1)),this.setActivePolygon(V)}return q}},{key:"onPointDragEnd",value:function(P){var V=this.editPolygon,q=at(Zr(D.prototype),"onPointDragEnd",this).call(this,P);return q&&V&&this.emit(v.DrawEvent.Edit,V,this.getPolygonData()),q}},{key:"enablePolygonRenderAction",value:function(){var P,V,q,be=this.options.editable;(P=this.polygonRender)===null||P===void 0||P.enableUnClick(),be&&((V=this.polygonRender)===null||V===void 0||V.enableHover(),(q=this.polygonRender)===null||q===void 0||q.enableDrag())}},{key:"disablePolygonRenderAction",value:function(){var P,V,q;(P=this.polygonRender)===null||P===void 0||P.disableUnClick(),(V=this.polygonRender)===null||V===void 0||V.disableHover(),(q=this.polygonRender)===null||q===void 0||q.disableDrag()}},{key:"bindEnableEvent",value:function(){at(Zr(D.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.enablePolygonRenderAction()}},{key:"unbindEnableEvent",value:function(){at(Zr(D.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.disablePolygonRenderAction()}},{key:"bindThis",value:function(){at(Zr(D.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this),this.bindPolygonRenderEvent=this.bindPolygonRenderEvent.bind(this)}},{key:"setActiveFeature",value:function(P){var V=this.getTargetFeature(P);V?this.setActivePolygon(V):this.clearActivePolygon()}},{key:"resetFeatures",value:function(){var P=this.getPolygonData();this.drawPolygon&&(P=P.filter(function(V){return!V.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setLineData(function(V){return V.filter(function(q){return!q.properties.isDraw})}),this.setTextData(function(V){return V.filter(function(q){return!q.properties.isActive})})),this.editPolygon&&this.handlePolygonUnClick(this.editPolygon),this.setPolygonData(P.map(function(V){return V.properties=Di(Di({},V.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),V}))}}]),D}(It),qt=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;return As(this,D),(q=M.call(this,P,V)).onSceneDragStart=q.onSceneDragStart.bind(Hr(q)),q.onSceneDragEnd=q.onSceneDragEnd.bind(Hr(q)),q}return vr(D,[{key:"drawLine",get:function(){var P;return(P=this.drawPolygon)===null||P===void 0?void 0:P.properties.line}},{key:"isDragTrigger",get:function(){return this.options.trigger==="drag"}},{key:"isClickTrigger",get:function(){return this.options.trigger==="click"}},{key:"getDefaultOptions",value:function(P){var V=Di(Di({},at(Zr(D.prototype),"getDefaultOptions",this).call(this,P)),{},{showMidPoint:!1,trigger:"click",autoActive:!1,helper:Oc(Ze)});return P.trigger==="drag"&&(V.helper=Di(Di({},V.helper),Fe)),V}},{key:"getMidPointsByLine",value:function(P){return[]}},{key:"handleCreatePolygon",value:function(P,V){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},be=V.properties.nodes;return Gu(be.slice(0,be.length-1),Di({nodes:P,line:V},q))}},{key:"handleFirstNodeCreate",value:function(P){var V=hs(P.geometry.coordinates),q=this.handleCreatePolygonLine(P,V,{isDraw:!0,isActive:!0}),be=this.handleCreatePolygon([P,V],q,{isDraw:!0,isActive:!0});return this.setPolygonData(function($e){return Os({target:be,data:[].concat(er($e),[be]),targetHandler:function(_t){_t.properties=Di(Di({},_t.properties),{},{isDraw:!0,isActive:!0})}})}),this.emit(v.DrawEvent.AddNode,P,this.drawPolygon,this.getPolygonData()),this.setHelper("drawFinish"),P}},{key:"handleLastNodeCreate",value:function(P){var V=this.options,q=V.autoActive,be=V.editable,$e=this.drawPolygon;return $e&&(this.setLineData(function(_t){return[].concat(er(_t),[$e.properties.line])}),this.setActivePolygon($e),q&&be||this.handlePolygonUnClick($e),this.emit(v.DrawEvent.Add,$e,this.getPolygonData()),this.emit(v.DrawEvent.AddNode,$e.properties.nodes[1],this.drawPolygon,this.getPolygonData()),this.setHelper(be?q?"pointHover":"polygonHover":this.addable?"draw":null)),P}},{key:"onPointCreate",value:function(P){var V=this;if(this.addable&&!this.dragPoint&&!this.editLine&&this.isClickTrigger){var q=this.drawPolygon,be=Cl(P),$e=this.handleCreatePoint(be);return q?requestAnimationFrame(function(){V.handleLastNodeCreate($e)}):this.handleFirstNodeCreate($e),$e}}},{key:"setActivePolygon",value:function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.setActiveLine(P.properties.line,V),this.setPolygonData(function(be){return Os({target:P,data:be,targetHandler:function($e){$e.properties=Di(Di({},$e.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},V)},otherHandler:function($e){$e.properties=Di(Di({},$e.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(P.properties.nodes),this.setDashLineData([]);var q=this.getAllTexts();return this.setTextData(q),P}},{key:"onPointDragging",value:function(P){var V=this.dragPoint;if(V){var q=this.handlePointDragging(V,Ic(P)),be=this.editPolygon;return q&&be&&(this.syncPolygonNodes(be,be.properties.nodes.map(function($e){return Ia($e,q)?q:$e})),this.setActivePolygon(be)),q}}},{key:"onSceneDragStart",value:function(P){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&(this.scene.setMapStatus({dragEnable:!1}),this.handleFirstNodeCreate(this.handleCreatePoint(Cl(P))))}},{key:"onSceneDragEnd",value:function(P){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&this.drawPolygon&&(this.scene.setMapStatus({dragEnable:!1}),this.handleLastNodeCreate(this.handleCreatePoint(Cl(P))))}},{key:"onSceneMouseMove",value:function(P){var V=this.drawPolygon;if(V){var q=V.properties.nodes,be=Oa(q),$e=w(q);$e.geometry.coordinates=Cl(P),this.syncPolygonNodes(V,[be,$e]),this.setDashLineData([V.properties.line]),this.setTextData(this.getAllTexts()),this.resetCursor()}}},{key:"bindSceneDragEvent",value:function(){this.unbindSceneDragEvent(),this.sceneRender.on(v.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.on(v.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!1})}},{key:"unbindSceneDragEvent",value:function(){this.sceneRender.off(v.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.off(v.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!0})}},{key:"bindEnableEvent",value:function(){at(Zr(D.prototype),"bindEnableEvent",this).call(this),this.isDragTrigger&&this.bindSceneDragEvent()}},{key:"unbindEnableEvent",value:function(){at(Zr(D.prototype),"unbindEnableEvent",this).call(this),this.isDragTrigger&&this.unbindSceneDragEvent()}},{key:"bindThis",value:function(){at(Zr(D.prototype),"bindThis",this).call(this),this.onSceneDragStart=this.onSceneDragStart.bind(this),this.onSceneDragEnd=this.onSceneDragEnd.bind(this)}}]),D}(Tt),Ot=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;return As(this,D),(q=M.call(this,P,V)).bindPointRenderEvent(),q.bindSceneEvent(),q.bindMidPointRenderEvent(),q.bindLineRenderEvent(),q.bindPolygonRenderEvent(),q}return vr(D,[{key:"getDefaultOptions",value:function(P){var V=Di(Di({},at(Zr(D.prototype),"getDefaultOptions",this).call(this,P)),{},{showMidPoint:!1,circleSteps:60});return V.distanceOptions&&(V.distanceOptions.showTotalDistance=!0,V.distanceOptions.showOnRadius===void 0&&(V.distanceOptions.showOnRadius=!0)),V.helper&&(V.helper=Di(Di({},V.helper),gt)),V}},{key:"getDistanceTexts",value:function(){var P=this.options.distanceOptions;if(!P)return[];var V=[],q=P.showWhen,be=P.showDashDistance,$e=P.format,_t=P.showTotalDistance;return V.push.apply(V,er(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!0,format:$e,showDashDistance:be})).concat(er(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:_t,format:$e,showWhen:q})))),V}},{key:"setData",value:function(P){var V=this,q=P.map(function(be){var $e,_t,Gt;be.properties=Di(Di({},yo()),be.properties);var yr=($e=be.properties)===null||$e===void 0?void 0:$e.nodes;if(((_t=yr)===null||_t===void 0?void 0:_t.length)!==2){var $r=hr(Mf(be).geometry.coordinates,2),an=$r[0],Un=$r[1],ei=wo(be),Jn=ei[2],Sn=(ei[1]+ei[3])/2;yr=[hs([an,Un]),hs([Jn,Sn])],be.properties.nodes=yr}var Xn=yr[0],ai=yr[1],ln=!!(!((Gt=be.properties)===null||Gt===void 0)&&Gt.isActive),pi=be.properties.line;return pi||(pi=V.handleCreatePolygonLine(Xn,ai,{isActive:ln}),be.properties.line=pi),V.handleCreatePolygon([Xn,ai],pi,Di(Di({},be.properties),{},{isActive:ln}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:q,line:q.map(function(be){return be.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(P,V){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},be=this.getBoundaryPositions(P,V),$e=be.map(function(_t){return hs(_t)});return zs($e,q)}},{key:"syncPolygonNodes",value:function(P,V){var q=P.properties.line,be=this.getBoundaryPositions(V[0],V[1]);return P.properties.nodes=V,P.geometry.coordinates=[be],this.setPolygonData(function($e){return $e.map(function(_t){return Ia(_t,P)?P:_t})}),this.setPointData(P.properties.isDraw?[V[0]]:V),q.properties.nodes.forEach(function($e,_t){$e.geometry.coordinates=be[_t]}),q.geometry.coordinates=be,P}},{key:"onLineDragging",value:function(P){var V=this.dragPolygon,q=hr(this.previousPosition,2),be=q[0],$e=q[1],_t=at(Zr(D.prototype),"onLineDragging",this).call(this,P);if(V){var Gt=hr(Cl(P),2),yr=Gt[0],$r=Gt[1];V.properties.nodes.forEach(function(an){var Un=hr(an.geometry.coordinates,2);an.geometry.coordinates=[Un[0]+yr-be,Un[1]+$r-$e]}),this.syncPolygonNodes(V,V.properties.nodes),this.setActivePolygon(V,{isDrag:!0}),this.emit(v.DrawEvent.Dragging,V,this.getPolygonData())}return _t}},{key:"getBoundaryPositions",value:function(P,V){for(var q=this.options.circleSteps,be=xc(P,V,{units:"meters"}),$e=Gc(P,V),_t=360/q,Gt=[er(V.geometry.coordinates)],yr=1;q-1>=yr;yr++)Gt.push(Uh(P,be,$e+_t*yr,{units:"meters"}).geometry.coordinates);return Gt.push(er(V.geometry.coordinates)),Gt}}]),D}(qt),rr=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;return As(this,D),(q=M.call(this,P,V)).drawLineFinish=function(){var be,$e=q.drawLine,_t=(be=$e==null?void 0:$e.properties.nodes)!==null&&be!==void 0?be:[];if($e&&(_t==null?void 0:_t.length)>1){q.setActiveLine($e);var Gt=q.options,yr=Gt.autoActive,$r=Gt.editable;yr&&$r||q.handleLineUnClick($e),q.setHelper($r&&yr?"pointHover":q.addable?"draw":null),q.emit(v.DrawEvent.Add,$e,q.getLineData())}},q.sceneRender.on(v.RenderEvent.DblClick,q.drawLineFinish),q.bindPointRenderEvent(),q.bindSceneEvent(),q.bindMidPointRenderEvent(),q.bindLineRenderEvent(),q}return vr(D,[{key:"dragItem",get:function(){return this.dragLine}},{key:"editItem",get:function(){return this.editLine}},{key:"setData",value:function(P){var V=P.map(function(q){var be,$e;return q.properties=Di(Di({},so()),(be=q.properties)!==null&&be!==void 0?be:{}),!(($e=q.properties.nodes)===null||$e===void 0)&&$e.length||(q.properties.nodes=kn(q).map(function(_t){return hs(_t)})),q});this.source.setData({point:[],midPoint:[],dashLine:[],line:V}),this.setTextData(this.getAllTexts()),this.editLine&&this.setActiveLine(this.editLine)}},{key:"getData",value:function(){return this.getLineData()}},{key:"getRenderTypes",value:function(){return["line","dashLine","midPoint","point","text"]}},{key:"bindPointRenderEvent",value:function(){var P;at(Zr(D.prototype),"bindPointRenderEvent",this).call(this),(P=this.pointRender)===null||P===void 0||P.on(v.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"onPointClick",value:function(P){var V,q=this,be=this.drawLine,$e=(V=be==null?void 0:be.properties.nodes)!==null&&V!==void 0?V:[],_t=P.feature;if(Ia(_t,w($e)))requestAnimationFrame(function(){q.drawLineFinish()});else{var Gt=hr(_t.geometry.coordinates,2);P.lngLat={lng:Gt[0],lat:Gt[1]},this.onPointCreate(P)}}},{key:"removeNode",value:function(P,V){var q,be=this.getTargetFeature(V),$e=this.getTargetFeature(P,(q=be==null?void 0:be.properties.nodes)!==null&&q!==void 0?q:[]);if(be&&$e){var _t,Gt=(_t=be==null?void 0:be.properties.nodes)!==null&&_t!==void 0?_t:[];if(3>Gt.length)return;this.syncLineNodes(be,Gt.filter(function(yr){return!Ia($e,yr)})),this.emit(v.DrawEvent.RemoveNode,$e,be,this.getLineData()),this.emit(v.DrawEvent.Edit,be,this.getLineData())}}},{key:"onPointContextMenu",value:function(P){var V,q=this.editLine,be=P.feature,$e=(V=q==null?void 0:q.properties.nodes)!==null&&V!==void 0?V:[];if(q&&$e.length>=3)return this.removeNode(be,q),be}},{key:"onPointCreate",value:function(P){if(this.addable){var V=at(Zr(D.prototype),"onPointCreate",this).call(this,P);return V&&(this.setHelper("drawFinish"),this.emit(v.DrawEvent.AddNode,V,this.drawLine,this.getLineData())),V}}},{key:"onPointDragEnd",value:function(P){var V=this.editLine,q=at(Zr(D.prototype),"onPointDragEnd",this).call(this,P);return V&&q&&this.emit(v.DrawEvent.Edit,V,this.getLineData()),q}},{key:"onLineDragStart",value:function(P){var V=at(Zr(D.prototype),"onLineDragStart",this).call(this,P);return V&&this.emit(v.DrawEvent.DragStart,V,this.getLineData()),V}},{key:"onLineDragging",value:function(P){var V=at(Zr(D.prototype),"onLineDragging",this).call(this,P);return V&&this.emit(v.DrawEvent.Dragging,V,this.getLineData()),V}},{key:"onLineDragEnd",value:function(P){var V=at(Zr(D.prototype),"onLineDragEnd",this).call(this,P);return V&&(this.emit(v.DrawEvent.DragEnd,V,this.getLineData()),this.emit(v.DrawEvent.Edit,V,this.getLineData())),V}},{key:"onMidPointClick",value:function(P){var V=this.editLine,q=at(Zr(D.prototype),"onMidPointClick",this).call(this,P);return V&&q&&(this.emit(v.DrawEvent.Edit,V,this.getLineData()),this.emit(v.DrawEvent.AddNode,q,V,this.getLineData())),q}},{key:"onSceneMouseMove",value:function(P){var V=this.drawLine;if(V){var q,be=w(V.properties.nodes),$e=Cl(P);this.options.adsorbOptions&&($e=(q=this.getAdsorbPosition($e))!==null&&q!==void 0?q:$e),this.setDashLineData([wu([$e,be.geometry.coordinates])]),this.setTextData(this.getAllTexts())}}},{key:"setActiveFeature",value:function(P){var V=this.getTargetFeature(P);V?this.setActiveLine(V):this.clearActiveLine()}},{key:"resetFeatures",value:function(){var P=this.getLineData();this.drawLine&&(P=P.filter(function(V){return!V.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setTextData(function(V){return V.filter(function(q){return!q.properties.isActive})})),this.editLine&&this.handleLineUnClick(this.editLine),this.setLineData(P.map(function(V){return V.properties=Di(Di({},V.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),V}))}},{key:"enablePointRenderAction",value:function(){var P;at(Zr(D.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&((P=this.pointRender)===null||P===void 0||P.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var P;at(Zr(D.prototype),"disablePointRenderAction",this).call(this),(P=this.pointRender)===null||P===void 0||P.disableContextMenu()}},{key:"bindEnableEvent",value:function(){at(Zr(D.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.sceneRender.enableDblClick()}},{key:"unbindEnableEvent",value:function(){at(Zr(D.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.sceneRender.disableDblClick()}},{key:"bindThis",value:function(){at(Zr(D.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this)}}]),D}(It),Xt=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;return As(this,D),(q=M.call(this,P,V)).bindPointRenderEvent(),q}return vr(D,[{key:"dragItem",get:function(){return this.dragPoint}},{key:"editItem",get:function(){return this.editPoint}},{key:"getDefaultOptions",value:function(P){var V=Di(Di({},this.getCommonOptions(P)),{},{helper:Oc(ae)});return V.style.point=rl,V}},{key:"bindEnableEvent",value:function(){at(Zr(D.prototype),"bindEnableEvent",this).call(this),this.enablePointRenderAction()}},{key:"unbindEnableEvent",value:function(){at(Zr(D.prototype),"unbindEnableEvent",this).call(this),this.disablePointRenderAction()}},{key:"getRenderTypes",value:function(){return["point"]}},{key:"setData",value:function(P){this.setPointData(P.map(function(V){var q;return V.properties=Di(Di({},Bs()),(q=V.properties)!==null&&q!==void 0?q:{}),V}))}},{key:"getData",value:function(){return this.getPointData()}},{key:"onPointCreate",value:function(P){if(this.addable){var V=at(Zr(D.prototype),"onPointCreate",this).call(this,P);if(V)return this.options.editable&&this.setHelper("pointHover"),this.emit(v.DrawEvent.Add,V,this.getData()),V}else this.setPointData(function(q){return q.map(function(be){return be.properties=Di(Di({},be.properties),{},{isHover:!1,isActive:!1}),be})})}},{key:"onPointMouseMove",value:function(P){var V=at(Zr(D.prototype),"onPointMouseMove",this).call(this,P);return this.options.editable&&!this.dragPoint&&this.setHelper("pointHover"),V}},{key:"onPointMouseOut",value:function(P){var V=at(Zr(D.prototype),"onPointMouseOut",this).call(this,P);return this.setHelper(this.addable?"draw":null),V}},{key:"onPointDragStart",value:function(P){var V=at(Zr(D.prototype),"onPointDragStart",this).call(this,P);return this.setHelper("pointDrag"),this.emit(v.DrawEvent.DragStart,V,this.getData()),V}},{key:"onPointDragging",value:function(P){var V=at(Zr(D.prototype),"onPointDragging",this).call(this,P);return V&&this.options.editable&&this.emit(v.DrawEvent.Dragging,V,this.getData()),V}},{key:"onPointDragEnd",value:function(P){var V=at(Zr(D.prototype),"onPointDragEnd",this).call(this,P);return V&&this.options.editable&&(this.setHelper("pointHover"),this.emit(v.DrawEvent.DragEnd,V,this.getData()),this.emit(v.DrawEvent.Edit,V,this.getData())),V}},{key:"bindThis",value:function(){at(Zr(D.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this)}},{key:"onSceneMouseMove",value:function(P){}},{key:"setActiveFeature",value:function(P){var V=this.getTargetFeature(P);this.setPointData(function(q){return q.map(function(be){return be.properties.isActive=Ia(V,be),be})})}},{key:"resetFeatures",value:function(){this.setPointData(function(P){return P.map(function(V){return V.properties=Di(Di({},V.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),V})})}}]),D}(G),gr=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;return As(this,D),(q=M.call(this,P,V)).drawPolygonFinish=function(){var be,$e=q.drawPolygon,_t=(be=$e==null?void 0:$e.properties.nodes)!==null&&be!==void 0?be:[];if($e&&_t.length>=3){$e.properties.isDraw=!1,q.syncPolygonNodes($e,_t),q.setActivePolygon($e);var Gt=q.options,yr=Gt.autoActive,$r=Gt.editable;yr&&$r||q.handlePolygonUnClick($e),q.setHelper($r?yr?"pointHover":"polygonHover":q.addable?"draw":null),q.emit(v.DrawEvent.Add,$e,q.getPolygonData())}},q.sceneRender.on(v.RenderEvent.DblClick,q.drawPolygonFinish),q.bindPointRenderEvent(),q.bindSceneEvent(),q.bindMidPointRenderEvent(),q.bindLineRenderEvent(),q.bindPolygonRenderEvent(),q}return vr(D,[{key:"getDefaultOptions",value:function(P){return Di(Di({},at(Zr(D.prototype),"getDefaultOptions",this).call(this,P)),{},{liveUpdate:!1})}},{key:"setData",value:function(P){var V=P.map(function(q){var be,$e;if(q.properties=Di(Di({},yo()),(be=q.properties)!==null&&be!==void 0?be:{}),!(!(($e=q.properties.nodes)===null||$e===void 0)&&$e.length)){var _t=kn(q);_t=_t.slice(0,_t.length-1),q.properties.nodes=_t.map(function(yr){return hs(yr)})}if(!q.properties.line){var Gt=q.properties.nodes;q.properties.line=zs([].concat(er(Gt),[hs(Oa(Gt).geometry.coordinates)]))}return q});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:V,line:V.map(function(q){return q.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"onPointCreate",value:function(P){if(this.addable&&!this.dragPoint){var V=at(Zr(D.prototype),"onPointCreate",this).call(this,P),q=this.drawPolygon,be=this.drawLine;return V&&(q?(this.syncPolygonNodes(q,[].concat(er(q.properties.nodes),[V])),this.setDashLineData([wu([Cl(P),q.properties.nodes[0].geometry.coordinates])]),q.properties.nodes.length>1&&this.setHelper("drawFinish")):be&&(this.handleCreatePolygon([V],be),this.setHelper("drawContinue")),this.emit(v.DrawEvent.AddNode,V,q,this.getPolygonData())),V}}},{key:"onPointClick",value:function(P){var V=this,q=this.drawPolygon,be=P.feature;if(q){var $e=q.properties.nodes;if($e.length<3||!Ia(Oa($e),be)&&!Ia(w($e),be)){var _t=hr(be.geometry.coordinates,2);P.lngLat={lng:_t[0],lat:_t[1]},this.onPointCreate(P)}else requestAnimationFrame(function(){V.drawPolygonFinish()})}}},{key:"onPointDragging",value:function(P){var V=this.dragPoint,q=this.editPolygon;if(V&&q){var be=q.properties.line;be.properties.nodes=be.properties.nodes.map(function(Un){return Ia(Un,V)?V:Un});var $e=be.properties.nodes,_t=$e.slice(0,$e.length-1),Gt=Oa($e),yr=w($e),$r=Ia(Gt,V)||Ia(yr,V);if($r&&(Gt.geometry.coordinates=yr.geometry.coordinates=Cl(P)),this.options.adsorbOptions&&$r){var an=this.resetAdsorbLngLat(P);an&&(Gt.geometry.coordinates=yr.geometry.coordinates=an)}at(Zr(D.prototype),"onPointDragging",this).call(this,P),this.syncPolygonNodes(q,_t),this.setActivePolygon(q)}return V}},{key:"onLineDragging",value:function(P){var V=this.dragPolygon,q=at(Zr(D.prototype),"onLineDragging",this).call(this,P);if(q&&V){var be=q.properties.nodes;this.syncPolygonNodes(V,be.slice(0,be.length-1)),this.emit(v.DrawEvent.Dragging,V,this.getPolygonData())}return q}},{key:"onMidPointClick",value:function(P){var V=at(Zr(D.prototype),"onMidPointClick",this).call(this,P),q=this.editPolygon;return V&&q&&(this.emit(v.DrawEvent.Edit,q,this.getPolygonData()),this.emit(v.DrawEvent.AddNode,V,q,this.getPolygonData())),V}},{key:"onSceneMouseMove",value:function(P){var V,q=this.drawPolygon,be=(V=q==null?void 0:q.properties.nodes)!==null&&V!==void 0?V:[];if(q&&be.length){this.options.adsorbOptions&&this.resetAdsorbLngLat(P);var $e=Cl(P),_t=[];if(_t.push(wu([$e,Oa(be).geometry.coordinates])),be.length>1&&_t.push(wu([$e,w(be).geometry.coordinates])),this.options.liveUpdate&&be.length>=2){var Gt=kn(wn(be));q.geometry.coordinates=[[].concat(er(Gt),[$e,Gt[0]])],this.setPolygonData(this.getPolygonData())}this.setDashLineData(_t),this.setTextData(this.getAllTexts())}}},{key:"removeNode",value:function(P,V){var q,be=this.getTargetFeature(V),$e=this.getTargetFeature(P,(q=be==null?void 0:be.properties.nodes)!==null&&q!==void 0?q:[]);if(be&&$e){var _t,Gt=(_t=be==null?void 0:be.properties.nodes)!==null&&_t!==void 0?_t:[];if(4>Gt.length)return;this.syncPolygonNodes(be,Gt.filter(function(yr){return!Ia($e,yr)})),this.emit(v.DrawEvent.RemoveNode,$e,be,this.getLineData()),this.emit(v.DrawEvent.Edit,be,this.getPolygonData())}}},{key:"onPointContextMenu",value:function(P){var V,q=this.editPolygon,be=P.feature,$e=(V=q==null?void 0:q.properties.nodes)!==null&&V!==void 0?V:[];if(q&&$e.length>=4)return $e.find(function(_t){return Ia(_t,be)})||(be=$e[0]),this.removeNode(be,q),be}},{key:"bindPointRenderEvent",value:function(){var P;at(Zr(D.prototype),"bindPointRenderEvent",this).call(this),(P=this.pointRender)===null||P===void 0||P.on(v.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"enablePointRenderAction",value:function(){var P;at(Zr(D.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&((P=this.pointRender)===null||P===void 0||P.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var P;at(Zr(D.prototype),"disablePointRenderAction",this).call(this),(P=this.pointRender)===null||P===void 0||P.disableContextMenu()}}]),D}(Tt),Sr=function(b){lr(D,b);var M=Yr(D);function D(P,V){var q;return As(this,D),(q=M.call(this,P,V)).bindPointRenderEvent(),q.bindSceneEvent(),q.bindMidPointRenderEvent(),q.bindLineRenderEvent(),q.bindPolygonRenderEvent(),q}return vr(D,[{key:"getDefaultOptions",value:function(P){var V=at(Zr(D.prototype),"getDefaultOptions",this).call(this,P);return V.helper&&(V.helper=Di(Di({},V.helper),it)),V}},{key:"setData",value:function(P){var V=this,q=P.map(function(be){var $e,_t,Gt;be.properties=Di(Di({},yo()),($e=be.properties)!==null&&$e!==void 0?$e:{});var yr=be.properties.nodes;if(((_t=yr)===null||_t===void 0?void 0:_t.length)!==2){var $r=hr(wo(be),4),an=$r[2],Un=$r[3];yr=[hs([$r[0],$r[1]]),hs([an,Un])],be.properties.nodes=yr}var ei=hr(yr,2),Jn=ei[0],Sn=ei[1],Xn=!!(!((Gt=be.properties)===null||Gt===void 0)&&Gt.isActive),ai=be.properties.line;return ai||(ai=V.handleCreatePolygonLine(Jn,Sn,{isActive:Xn}),be.properties.line=ai),V.handleCreatePolygon([Jn,Sn],ai,Di(Di({},be.properties),{},{isActive:Xn}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:q,line:q.map(function(be){return be.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(P,V){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},be=kn(Yh(wn([P,V]))),$e=be.map(function(_t,Gt){return Gt===0?P:Gt===2?V:hs(_t)});return zs($e,q)}},{key:"syncPolygonNodes",value:function(P,V){var q=P.properties.line,be=kn(Yh(wn(V)));P.properties.nodes=V,P.geometry.coordinates=[be],this.setPolygonData(function(Gt){return Gt.map(function(yr){return Ia(yr,P)?P:yr})}),this.setPointData(P.properties.isDraw?[V[0]]:V);var $e=q.properties.nodes,_t=be.filter(function(Gt){return!Fs(Gt,V[0].geometry.coordinates)&&!Fs(Gt,V[1].geometry.coordinates)});return $e.forEach(function(Gt,yr){var $r=[0,0];switch(yr){case 0:$r=V[0].geometry.coordinates;break;case 1:$r=_t[0];break;case 2:$r=V[1].geometry.coordinates;break;case 3:$r=_t[1];break;case 4:$r=Oc(V[0].geometry.coordinates)}Gt.geometry.coordinates=$r}),q.geometry.coordinates=be,P}},{key:"onLineDragging",value:function(P){var V=at(Zr(D.prototype),"onLineDragging",this).call(this,P),q=this.dragPolygon;if(V&&q){var be=q.properties.line.properties.nodes;this.syncPolygonNodes(q,[be[0],be[2]]),this.setActivePolygon(q,{isDrag:!0}),this.emit(v.DrawEvent.Dragging,q,this.getPolygonData())}return V}}]),D}(qt),Wr=function(b,M){for(var D=b;D&&!Array.from(D.classList).includes(M);)D=D.parentElement;return D},Cn={point:"#l7draw-point",line:"#l7draw-line",polygon:"#l7draw-polygon",rect:"#l7draw-rect",circle:"#l7draw-circle",clear:"#l7draw-qingkong"},xn={point:Xt,line:rr,polygon:gr,rect:Sr,circle:Ot},In="data-draw-type",Rn="l7-draw-control",Gn="".concat(Rn,"__btn"),ti="".concat(Gn,"--active");(function(b){var M,D,P,V,q,be='<svg><symbol id="l7draw-qingkong" viewBox="0 0 1024 1024"><path d="M778.96777344 334.02148437h-148.31542969V284.58300781A71.78466797 71.78466797 0 0 0 556.49462891 215.36914062H467.50537109a71.78466797 71.78466797 0 0 0-74.15771484 69.11499024V334.02148437h-148.31542969a29.66308594 29.66308594 0 1 0 0 59.32617188h29.66308594v326.29394531A88.98925781 88.98925781 0 0 0 363.68457031 808.63085938h296.63085938a88.98925781 88.98925781 0 0 0 88.98925781-88.98925782V393.34765625h29.66308594a29.66308594 29.66308594 0 0 0 0-59.32617188zM452.67382812 284.58300781c0-4.74609375 6.22924805-9.78881836 14.83154297-9.78881836h88.98925782c8.60229492 0 14.83154297 5.04272461 14.83154296 9.78881836V334.02148437H452.67382812V284.53356934z m237.30468751 435.10803223a29.66308594 29.66308594 0 0 1-29.66308594 29.66308593H363.68457031a29.66308594 29.66308594 0 0 1-29.66308593-29.66308594V393.34765625h355.95703124v326.29394531z"  ></path><path d="M437.84228516 660.31542969c6.57531739 0 12.85400391-3.46069336 17.5012207-9.64050294A39.20471192 39.20471192 0 0 0 462.56152344 627.33996582V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 437.84228516 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.50122071 9.64050293A39.20471192 39.20471192 0 0 0 413.12304687 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.50122071 9.64050294zM586.15771484 660.31542969c6.57531739 0 12.85400391-3.46069336 17.50122071-9.64050294a39.20471192 39.20471192 0 0 0 7.21801758-23.33496093V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 586.15771484 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.5012207 9.64050293A39.20471192 39.20471192 0 0 0 561.43847656 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.5012207 9.64050294z"  ></path></symbol><symbol id="l7draw-rect" viewBox="0 0 1024 1024"><path d="M736.14 648.79V330c0-23.16-18.84-42-42-42H375.49c-11.07-19.13-31.74-32.01-55.43-32.01-35.35 0-64.01 28.66-64.01 64.01 0 23.69 12.88 44.36 32.01 55.43v318.8c0 23.16 18.84 42 42 42H648.7c11.07 19.13 31.74 32.01 55.43 32.01 35.35 0 64.01-28.66 64.01-64.01 0.01-23.7-12.87-44.37-32-55.44zM352.06 375.43A64.281 64.281 0 0 0 375.49 352h296.64v296.8a64.357 64.357 0 0 0-23.43 23.43H352.06v-296.8z"  ></path></symbol><symbol id="l7draw-circle" viewBox="0 0 1024 1024"><path d="M467.013228 557.765038a64.01 64.01 0 1 0 90.52223-90.52539 64.01 64.01 0 1 0-90.52223 90.52539Z"  ></path><path d="M832.16 512.22c0-26.06-15.58-48.46-37.93-58.45-11.21-54.67-38.11-104.92-78.48-145.3-54.42-54.42-126.78-84.4-203.75-84.4s-149.33 29.97-203.75 84.4c-54.42 54.42-84.4 126.79-84.4 203.75s29.97 149.33 84.4 203.75c54.42 54.42 126.78 84.4 203.75 84.4s149.33-29.97 203.75-84.4c40.37-40.37 67.28-90.62 78.48-145.3 22.35-9.98 37.93-32.39 37.93-58.45zM670.5 670.72c-42.34 42.34-98.62 65.65-158.5 65.65-59.87 0-116.16-23.32-158.5-65.65-42.34-42.34-65.65-98.62-65.65-158.5s23.32-116.16 65.65-158.5c42.34-42.34 98.62-65.65 158.5-65.65 59.87 0 116.16 23.32 158.5 65.65 29.9 29.9 50.3 66.77 59.71 106.95-15.81 11.66-26.07 30.4-26.07 51.55s10.26 39.9 26.07 51.55c-9.41 40.18-29.81 77.05-59.71 106.95z"  ></path></symbol><symbol id="l7draw-polygon" viewBox="0 0 1024 1024"><path d="M705.97 640.31c-5.79 0-11.39 0.78-16.72 2.22L381.94 336.66a64.079 64.079 0 0 0 2.14-16.43c0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 23.69 12.88 44.36 32.01 55.43V648.8c-19.13 11.07-32.01 31.74-32.01 55.43 0 35.35 28.66 64.01 64.01 64.01 23.69 0 44.35-12.87 55.42-32l275.05 0.07c11.07 19.14 31.74 32.03 55.44 32.03 35.35 0 64.01-28.66 64.01-64.01s-28.66-64.02-64.02-64.02z m-353.91 8.48V397.22L628.44 672.3l-252.94-0.07a64.411 64.411 0 0 0-23.44-23.44z"  ></path></symbol><symbol id="l7draw-line" viewBox="0 0 1024 1024"><path d="M832.16 449.21c0-35.35-28.66-64.01-64.01-64.01-29.2 0-53.81 19.56-61.5 46.28l-390.9 96.82 72.18-144.18c33.56-1.99 60.17-29.83 60.17-63.89 0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 13.04 3.91 25.17 10.61 35.28l-78.42 156.65c-33.58 1.97-60.21 29.81-60.21 63.89 0 35.35 28.66 64.01 64.01 64.01 29.2 0 53.81-19.56 61.5-46.28l390.8-96.79-71.97 143.34c-33.62 1.93-60.28 29.8-60.28 63.9 0 35.35 28.66 64.01 64.01 64.01s64.01-28.66 64.01-64.01c0-13-3.89-25.09-10.54-35.18l78.28-155.93c33.61-1.95 60.28-29.81 60.28-63.91z"  ></path></symbol><symbol id="l7draw-point" viewBox="0 0 1024 1024"><path d="M331.46 330.08m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M384.12 735.84m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M769.11 512.7m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path></symbol></svg>',$e=($e=document.getElementsByTagName("script"))[$e.length-1].getAttribute("data-injectcss");if($e&&!b.__iconfont__svg__cssinject__){b.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(Gt){console&&console.log(Gt)}}function _t(){q||(q=!0,P())}M=function(){var Gt,yr=document.createElement("div");yr.innerHTML=be,be=null,(yr=yr.getElementsByTagName("svg")[0])&&(yr.setAttribute("aria-hidden","true"),yr.style.position="absolute",yr.style.width=0,yr.style.height=0,yr.style.overflow="hidden",(Gt=document.body).firstChild?function($r,an){an.parentNode.insertBefore($r,an)}(yr,Gt.firstChild):Gt.appendChild(yr))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(M,0):(D=function(){document.removeEventListener("DOMContentLoaded",D,!1),M()},document.addEventListener("DOMContentLoaded",D,!1)):document.attachEvent&&(P=M,V=b.document,q=!1,function Gt(){try{V.documentElement.doScroll("left")}catch(yr){return void setTimeout(Gt,50)}_t()}(),V.onreadystatechange=function(){V.readyState=="complete"&&(V.onreadystatechange=null,_t())})})(window),js(".l7-draw-control{display:flex;overflow:hidden;background:#fff;border-radius:2px}.l7-draw-control__btn{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;padding:0;text-align:center;background:transparent;border-width:0;border-right:1px solid #e0e0e0;outline:0;cursor:pointer}.l7-draw-control__btn:hover{background-color:#e5e5e5}.l7-draw-control__btn:last-child{border-bottom:0}.l7-draw-control__btn .l7-draw-icon{width:26px;height:26px;overflow:hidden;fill:currentColor}.l7-draw-control__btn--active svg{color:#0370fe}");var ii=function(b){lr(D,b);var M=Yr(D);function D(P){var V,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return As(this,D),(V=M.call(this,q)).controlOption=void 0,V.sceneInstance=void 0,V.drawMap={},V.btnMap={},V.activeType=null,V.emitDataChange=Dl(function(){V.emit(v.ControlEvent.DataChange,V.getDrawData())},16),V.sceneInstance=P,V.controlOption=Di(Di({},V.getDefault()),q||{}),V.onBtnClick=V.onBtnClick.bind(Hr(V)),V}return vr(D,[{key:"getActiveType",value:function(){return this.activeType}},{key:"getDefault",value:function(){return Di(Di({},at(Zr(D.prototype),"getDefault",this).call(this)),{},{className:"",buttonClassName:"",activeButtonClassName:"",style:"",position:"topleft",commonDrawOptions:{},drawConfig:{point:!0,line:!0,polygon:!0,rect:!0,circle:!0,clear:!0}})}},{key:"addTo",value:function(P){return at(Zr(D.prototype),"addTo",this).call(this,P),this.init(),this}},{key:"onAdd",value:function(){var P=this.controlOption,V=P.className,q=P.style,be=C.DOM.create("div","".concat(Rn," ").concat(V));return q&&be.setAttribute("style",q),be}},{key:"onRemove",value:function(){Object.values(this.drawMap).forEach(function(P){P.clear(!0)})}},{key:"init",value:function(){var P,V=this,q=[];Object.entries(this.controlOption.drawConfig).forEach(function(be){var $e=hr(be,2),_t=$e[0],Gt=$e[1];if(Gt){var yr=V.initBtn(_t);yr.addEventListener("click",V.onBtnClick),q.push(yr),V.btnMap[_t]=yr;var $r=xn[_t];if($r&&V.sceneInstance){var an=new $r(V.sceneInstance,Di(Di({},V.controlOption.commonDrawOptions),typeof Gt=="boolean"?{}:Gt));an.on(v.DrawEvent.Change,V.emitDataChange),V.drawMap[_t]=an}}}),(P=this.container).append.apply(P,q),this.controlOption.defaultActiveType&&this.onDrawClick(this.controlOption.defaultActiveType)}},{key:"getDrawData",value:function(){return ud(sa(this.drawMap).map(function(P){var V=hr(P,2);return[V[0],V[1].getData()]}))}},{key:"getTypeDraw",value:function(P){var V;return(V=this.drawMap[P])!==null&&V!==void 0?V:null}},{key:"onBtnClick",value:function(P){var V=Wr(P.target,Gn);if(V){var q=V.getAttribute(In);q==="clear"?this.clearDrawData():this.onDrawClick(q)}}},{key:"setActiveType",value:function(P){var V=null,q=this.activeType;if(q){var be,$e=this.btnMap[q];if($e){C.DOM.removeClass($e,ti);var _t=this.controlOption.activeButtonClassName;_t&&C.DOM.removeClass($e,_t)}(be=this.drawMap[q])===null||be===void 0||be.disable(),V=null}if(q!==P&&P){var Gt;(Gt=this.drawMap[P])===null||Gt===void 0||Gt.enable();var yr=this.btnMap[P];yr&&C.DOM.addClass(yr,"".concat(ti," ").concat(this.controlOption.activeButtonClassName)),V=P}this.activeType=V,this.emit(v.ControlEvent.DrawChange,V)}},{key:"onDrawClick",value:function(P){this.setActiveType(P)}},{key:"clearDrawData",value:function(){Object.values(this.drawMap).forEach(function(P){P==null||P.clear()})}},{key:"initBtn",value:function(P){var V=C.DOM.create("button","".concat(Gn," ").concat(this.controlOption.buttonClassName));return V.innerHTML=`<svg class="l7-draw-icon" aria-hidden="true">
      <use xlink:href="`.concat(Cn[P],`"></use>
    </svg>`),V.setAttribute(In,P),V}}]),D}(C.Control);v.ACTIVE_COLOR=df,v.BaseMode=pd,v.CircleDrawer=Ot,v.DEFAULT_ADSORB_CONFIG=ou,v.DEFAULT_AREA_OPTIONS=Cs,v.DEFAULT_COMMON_OPTIONS=rc,v.DEFAULT_CURSOR_MAP=l,v.DEFAULT_DISTANCE_OPTIONS=Tu,v.DEFAULT_HISTORY_CONFIG=Zs,v.DEFAULT_KEYBOARD_CONFIG=ts,v.DEFAULT_MID_POINT_STYLE=Xf,v.DEFAULT_NODE_NORMAL_STYLE=bf,v.DEFAULT_NODE_STYLE=wc,v.DEFAULT_POINT_NORMAL_STYLE=ys,v.DEFAULT_POINT_STYLE=rl,v.DEFAULT_POPUP_CONFIG=Vs,v.DEFAULT_SOURCE_DATA=$,v.DEFAULT_STYLE=sd,v.DEFAULT_TEXT_NORMAL_STYLE=Zc,v.DashLineRender=Dh,v.DragPolygonMode=qt,v.DrawCircle=Ot,v.DrawControl=ii,v.DrawLine=rr,v.DrawPoint=Xt,v.DrawPolygon=gr,v.DrawRect=Sr,v.LayerRender=Wc,v.LineDrawer=rr,v.LineMode=It,v.LineRender=Ur,v.MidPointMode=Ce,v.MidPointRender=kl,v.NORMAL_COLOR=zc,v.PointDrawer=Xt,v.PointMode=G,v.PointRender=Vo,v.PolygonDrawer=gr,v.PolygonMode=Tt,v.PolygonRender=Qo,v.RENDER_MAP=Wf,v.RectDrawer=Sr,v.SceneRender=du,v.Source=nf,v.TextRender=kh,v.calcAreaText=Sf,v.calcDistanceTextsByLine=Au,v.createDashLine=wu,v.createLineFeature=zs,v.createPointFeature=hs,v.createPolygonFeature=Gu,v.findMinIndex=mf,v.getAdsorbFeature=pc,v.getAdsorbLine=Cf,v.getAdsorbPoint=fu,v.getDefaultLineProperties=so,v.getDefaultPointProperties=Bs,v.getDefaultPolygonProperties=yo,v.getLineCenterPoint=Bl,v.getLngLat=Ic,v.getMapDom=Xl,v.getParentByClassName=Wr,v.getPosition=Cl,v.getUuid=to,v.isDev=!1,v.isSameFeature=Ia,v.resetEventLngLat=Uu,v.splitByPosition=lh,v.transLngLat2Position=rf,v.updateTargetFeature=Os,Object.defineProperty(v,"__esModule",{value:!0})})},10438:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return we}});var v=m(15671),C=m(43144),l=m(60136),$=m(82963),R=m(61120),z=m(16912),L=m(1413),T=m(91),O=m(15861),F=m(74902),ue=m(97326),Ae=m(4942),re=m(64687),pe=m.n(re),fe=m(81618),ke=m.n(fe),je=m(54095),bt=m(11265),ut=m(85975),wt=m(77160),se=m(86700),qe=m(28660),me=m(58304),_e=m(84859),Te=m(97685),ht=function(){function At(){(0,v.Z)(this,At),(0,Ae.Z)(this,"projectionMatrix",ut.create()),(0,Ae.Z)(this,"viewMatrix",ut.create()),(0,Ae.Z)(this,"viewProjectionMatrix",ut.create()),(0,Ae.Z)(this,"ViewProjectionMatrixUncentered",ut.create()),(0,Ae.Z)(this,"viewUncenteredMatrix",ut.create())}return(0,C.Z)(At,[{key:"syncWithMapCamera",value:function(Lt){var St=Lt.zoom,Ut=St===void 0?1:St,lt=Lt.center,Et=lt===void 0?[0,0]:lt,Zt=Lt.offsetOrigin,Be=Zt===void 0?[0,0]:Zt,He=Lt.cameraPosition,ft=He===void 0?[0,0,0]:He,Z=Lt.up,J=Z===void 0?[0,1,0]:Z,K=Lt.lookAt,B=K===void 0?[0,0,0]:K,j=Lt.aspect,ee=j===void 0?1:j,W=Lt.near,De=W===void 0?.1:W,ot=Lt.far,Wt=ot===void 0?1e3:ot,Ct=Lt.fov,Qt=Ct===void 0?45:Ct;this.zoom=Ut,this.center=Et,ut.perspective(this.projectionMatrix,Qt/180*Math.PI,ee,De,Wt);var ir=wt.fromValues.apply(wt,(0,F.Z)(ft)),Er=wt.fromValues.apply(wt,(0,F.Z)(B)),Qr=wt.fromValues.apply(wt,(0,F.Z)(J));ut.lookAt(this.viewMatrix,ir,Er,Qr),this.viewUncenteredMatrix=ut.clone(this.viewMatrix),ut.translate(this.viewMatrix,this.viewMatrix,wt.fromValues(-Be[0],Be[1],0)),ut.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),ut.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var Lt=(0,Te.Z)(this.center,2),St=Lt[0],Ut=Lt[1];return[St,Ut]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(Lt){var St=85.0511287798,Ut=Math.max(Math.min(St,Lt[1]),-St),lt=256<<20,Et=Math.PI/180,Zt=Lt[0]*Et,Be=Ut*Et;Be=Math.log(Math.tan(Math.PI/4+Be/2));var He=.5/Math.PI,ft=.5,Z=-.5/Math.PI;return Et=.5,Zt=lt*(He*Zt+ft)-215440491,Be=-(lt*(Z*Be+Et)-106744817),[Zt,Be]}}]),At}(),We=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],Ne,he;function Ve(At){var nt=ie();return function(){var St=(0,R.Z)(At),Ut;if(nt){var lt=(0,R.Z)(this).constructor;Ut=Reflect.construct(St,arguments,lt)}else Ut=St.apply(this,arguments);return(0,$.Z)(this,Ut)}}function ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(At){return!1}}function ze(At,nt){var Lt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,St=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Lt||St)&&(nt||(nt=document),!!nt)){var Ut=nt.head||nt.getElementsByTagName("head")[0];if(!Ut){Ut=nt.createElement("head");var lt=nt.body||nt.getElementsByTagName("body")[0];lt?lt.parentNode.insertBefore(Ut,lt):nt.documentElement.appendChild(Ut)}var Et=nt.createElement("style");return Et.type="text/css",Et.styleSheet?Et.styleSheet.cssText=At:Et.appendChild(nt.createTextNode(At)),Ut.appendChild(Et),Et}}ze(`.amap-logo{
 display: none !important;
}
`);var Le=[108.92361,34.54083];window.forceWebGL=!0;var Re="ff533602d57df6f8ab3b0fea226ae52f",st="2.0",vt=!1,Dt=null,ar=(Ne=(0,se.b2)(),Ne(he=function(At){(0,l.Z)(Lt,At);var nt=Ve(Lt);function Lt(){var St;(0,v.Z)(this,Lt);for(var Ut=arguments.length,lt=new Array(Ut),Et=0;Et<Ut;Et++)lt[Et]=arguments[Et];return St=nt.call.apply(nt,[this].concat(lt)),(0,Ae.Z)((0,ue.Z)(St),"version",_e.G["GAODE2.x"]),(0,Ae.Z)((0,ue.Z)(St),"handleViewChanged",function(Zt){var Be=St.map.customCoords.getCameraParams(),He=Be.fov,ft=Be.near,Z=Be.far,J=Be.aspect,K=Be.position,B=Be.lookAt,j=Be.up;St.emit("mapchange");var ee=St.map.customCoords.getCenter();St.cameraChangedCallback&&(St.viewport.syncWithMapCamera({aspect:J,far:Z,fov:He,cameraPosition:K,lookAt:B,up:j,near:ft,zoom:St.map.getZoom()-1,center:ee,offsetOrigin:[K[0],K[1]]}),St.coordinateSystemService.setCoordinateSystem(je.lo.P20_2),St.cameraChangedCallback(St.viewport))}),St}return(0,C.Z)(Lt,[{key:"setCustomCoordCenter",value:function(Ut){this.sceneCenter=Ut,this.sceneCenterMKT=bt.TG.apply(void 0,(0,F.Z)(Ut))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoordByLayer",value:function(Ut,lt){var Et=lt||this.sceneCenter,Zt=bt.TG.apply(void 0,(0,F.Z)(Et)),Be=this._sub((0,bt.TG)(Ut[0],Ut[1]),Zt);return Ut[2]&&Be.push(Ut[2]),Be}},{key:"lngLatToCoordsByLayer",value:function(Ut,lt){var Et=this;return Ut.map(function(Zt){return typeof Zt[0]=="number"?Et.lngLatToCoordByLayer(Zt,lt):Zt.map(function(Be){return Et.lngLatToCoordByLayer(Be,lt)})})}},{key:"setCoordCenter",value:function(Ut){this.map.customCoords.setCenter(Ut||Le),this.setCustomCoordCenter(Ut||Le)}},{key:"lngLatToCoord",value:function(Ut){return this.sceneCenter||(this.map.customCoords.setCenter(Ut),this.setCustomCoordCenter(Ut)),this._sub((0,bt.TG)(Ut[0],Ut[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(Ut){var lt=this;return Ut.map(function(Et){return typeof Et[0]=="number"?lt.lngLatToCoord(Et):Et.map(function(Zt){return lt.lngLatToCoord(Zt)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var Ut=this.map.getContainer();if(Ut!==null){var lt=Ut.getElementsByClassName("amap-maps")[0];lt.style.zIndex="auto",this.markerContainer=bt.SO.create("div","l7-marker-container2",lt)}}}},{key:"updateView",value:function(Ut){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var Ut=this.map.getBounds(),lt=Ut.getNorthEast(),Et=Ut.getSouthWest(),Zt=this.getCenter(),Be=Zt.lng>lt.getLng()||Zt.lng<Et.getLng()?180-lt.getLng():lt.getLng(),He=Zt.lng<Et.getLng()?Et.getLng()-180:Et.getLng();return[[He,Et.getLat()],[Be,lt.getLat()]]}},{key:"getMinZoom",value:function(){var Ut=this.map.getZooms();return Ut[0]-1}},{key:"getMaxZoom",value:function(){var Ut=this.map.getZooms();return Ut[1]-1}},{key:"lngLatToContainer",value:function(Ut){var lt=this.map.lngLatToContainer(Ut);return{x:lt.getX(),y:lt.getY()}}},{key:"getModelMatrix",value:function(Ut,lt,Et){var Zt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],Be=this.map.customCoords.lngLatToCoord(Ut),He=ut.create();return ut.translate(He,He,wt.fromValues(Be[0],Be[1],lt)),ut.scale(He,He,wt.fromValues(Zt[0],Zt[1],Zt[2])),ut.rotateX(He,He,Et[0]),ut.rotateY(He,He,Et[1]),ut.rotateZ(He,He,Et[2]),He}},{key:"init",value:function(){var St=(0,O.Z)(pe().mark(function lt(){var Et,Zt,Be,He,ft,Z,J,K,B,j,ee,W,De,ot,Wt,Ct,Qt,ir,Er,Qr,Mt,br;return pe().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:if(Et=this.config,Zt=Et.id,Be=Et.style,He=Be===void 0?"light":Be,ft=Et.minZoom,Z=ft===void 0?0:ft,J=Et.maxZoom,K=J===void 0?18:J,B=Et.token,j=B===void 0?Re:B,ee=Et.mapInstance,W=Et.plugin,De=W===void 0?[]:W,ot=Et.version,Wt=ot===void 0?st:ot,Ct=(0,T.Z)(Et,We),this.viewport=new ht,window.AMap||ee){Pr.next=6;break}return De.push("Map3D"),Pr.next=6,ke().load({key:j,version:st,plugins:De});case 6:ee?(this.map=ee,this.$mapContainer=this.map.getContainer(),ir=this.map.getCenter(),(Qt=this.map.customCoords)===null||Qt===void 0||Qt.setCenter([ir.lng,ir.lat]),this.setCustomCoordCenter([ir.lng,ir.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(Zt),Qr=(0,L.Z)({mapStyle:this.getMapStyleValue(He),zooms:[Z,K],viewMode:"3D"},Ct),Qr.zoom&&(Qr.zoom+=1),j===Re&&console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),Mt=new AMap.Map(this.$mapContainer,Qr),this.map=Mt,br=Mt.getCenter(),(Er=this.map.customCoords)===null||Er===void 0||Er.setCenter([br.lng,br.lat]),this.setCustomCoordCenter([br.lng,br.lat]),Mt.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return Pr.stop()}},lt,this)}));function Ut(){return St.apply(this,arguments)}return Ut}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(Ut){this.cameraChangedCallback=Ut}},{key:"initViewPort",value:function(){var Ut,lt=(Ut=this.map.customCoords)===null||Ut===void 0?void 0:Ut.getCameraParams(),Et=lt.fov,Zt=lt.near,Be=lt.far,He=lt.aspect,ft=lt.position,Z=lt.lookAt,J=lt.up;this.emit("mapchange");var K=this.map.customCoords.getCenter(),B=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:He,far:Be,fov:Et,cameraPosition:ft,lookAt:Z,near:Zt,up:J,zoom:B-1,center:K,offsetOrigin:[ft[0],ft[1]]}),this.coordinateSystemService.setCoordinateSystem(je.lo.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(Ut,lt){var Et=[0,0];return Et[0]=Ut[0]-lt[0],Et[1]=Ut[1]-lt[1],Et}}]),Lt}(me.Z))||he);function $t(At){var nt=ur();return function(){var St=(0,R.Z)(At),Ut;if(nt){var lt=(0,R.Z)(this).constructor;Ut=Reflect.construct(St,arguments,lt)}else Ut=St.apply(this,arguments);return(0,$.Z)(this,Ut)}}function ur(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(At){return!1}}var we=function(At){(0,l.Z)(Lt,At);var nt=$t(Lt);function Lt(){return(0,v.Z)(this,Lt),nt.apply(this,arguments)}return(0,C.Z)(Lt,[{key:"getServiceConstructor",value:function(){return ar}}]),Lt}(z.Z)},16912:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return F}});var v=m(1413),C=m(43269),l=m(15671),$=m(43144),R=m(53229),z=m(54095),L,T,O,F=(L=(0,z.yT)(z.vK.IGlobalConfigService),T=function(){function ue(Ae){(0,l.Z)(this,ue),(0,C.Z)(this,"configService",O,this),this.config=Ae}return(0,$.Z)(ue,[{key:"setContainer",value:function(re,pe,fe,ke){re.bind(z.vK.MapConfig).toConstantValue((0,v.Z)((0,v.Z)({},this.config),{},{id:pe,canvas:fe,hasBaseMap:ke})),re.bind(z.vK.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),ue}(),O=(0,R.Z)(T.prototype,"configService",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T)},43663:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return R}});var v=m(1413),C=m(15671),l=m(43144),$=m(55538),R=function(){function z(){(0,C.Z)(this,z)}return(0,l.Z)(z,[{key:"syncWithMapCamera",value:function(T){var O=T.center,F=T.zoom,ue=T.pitch,Ae=T.bearing,re=T.viewportHeight,pe=T.viewportWidth,fe=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new $.Z((0,v.Z)((0,v.Z)({},fe),{},{width:pe,height:re,longitude:O&&O[0],latitude:O&&O[1],zoom:F,pitch:ue,bearing:Ae}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(T,O){return this.viewport.projectFlat(T,O)}}]),z}()},58304:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return Et}});var v=m(97685),C=m(5647),l=m(74902),$=m(1413),R=m(91),z=m(15861),L=m(43269),T=m(15671),O=m(43144),F=m(4942),ue=m(53229),Ae=m(64687),re=m.n(Ae),pe=m(81618),fe=m.n(pe),ke=m(54095),je=m(11265),bt=m(85975),ut=m(77160),wt=m(86700),se=m(28660),qe=m(84859),me=m(73900);function _e(){var Zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Be={top:0,right:0,bottom:0,left:0};if(typeof Zt=="number")return{top:Zt,right:Zt,bottom:Zt,left:Zt};if(Array.isArray(Zt)){if(Zt.length===4)return{top:Zt[0],right:Zt[1],bottom:Zt[2],left:Zt[3]};if(Zt.length===2)return{top:Zt[0],right:Zt[1],bottom:Zt[0],left:Zt[1]}}return(0,$.Z)((0,$.Z)({},Be),Zt)}var Te=m(43663),ht={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},We=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],Ne,he,Ve,ie,ze,Le,Re,st,vt,Dt,ar;function $t(Zt,Be){var He=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,ft=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(He||ft)&&(Be||(Be=document),!!Be)){var Z=Be.head||Be.getElementsByTagName("head")[0];if(!Z){Z=Be.createElement("head");var J=Be.body||Be.getElementsByTagName("body")[0];J?J.parentNode.insertBefore(Z,J):Be.documentElement.appendChild(Z)}var K=Be.createElement("style");return K.type="text/css",K.styleSheet?K.styleSheet.cssText=Zt:K.appendChild(Be.createTextNode(Zt)),Z.appendChild(K),K}}$t(`.amap-logo{
 display: none !important;
}
`);var ur={contextmenu:"rightclick"},we=0;window.forceWebGL=!0;var At="15cd8a57710d40c9b7c0e3cc120f1200",nt="1.4.15",Lt="amap-script",St=!1,Ut=[],lt=12,Et=(Ne=(0,wt.b2)(),he=(0,wt.f3)(ke.vK.IGlobalConfigService),Ve=(0,wt.f3)(ke.vK.MapConfig),ie=(0,wt.f3)(ke.vK.ICoordinateSystemService),ze=(0,wt.f3)(ke.vK.IEventEmitter),Ne(Le=(Re=function(){function Zt(){var Be=this;(0,T.Z)(this,Zt),(0,F.Z)(this,"version",qe.G["GAODE1.x"]),(0,F.Z)(this,"simpleMapCoord",new me.D),(0,F.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),(0,L.Z)(this,"configService",st,this),(0,L.Z)(this,"config",vt,this),(0,L.Z)(this,"coordinateSystemService",Dt,this),(0,L.Z)(this,"eventEmitter",ar,this),(0,F.Z)(this,"handleCameraChanged",function(He){var ft=He.camera,Z=ft.fov,J=ft.near,K=ft.far,B=ft.height,j=ft.pitch,ee=ft.rotation,W=ft.aspect,De=ft.position,ot=Be.getCenter(),Wt=ot.lng,Ct=ot.lat;if(Be.emit("mapchange"),Be.cameraChangedCallback){Be.viewport.syncWithMapCamera({aspect:W,bearing:360-ee,far:K,fov:Z,cameraHeight:B,near:J,pitch:j,zoom:Be.map.getZoom()-1,center:[Wt,Ct],offsetOrigin:[De.x,De.y]});var Qt=Be.config.offsetZoom,ir=Qt===void 0?lt:Qt;Be.viewport.getZoom()>ir?Be.coordinateSystemService.setCoordinateSystem(ke.lo.P20_OFFSET):Be.coordinateSystemService.setCoordinateSystem(ke.lo.P20),Be.cameraChangedCallback(Be.viewport)}})}return(0,O.Z)(Zt,[{key:"setBgColor",value:function(He){this.bgColor=He}},{key:"addMarkerContainer",value:function(){var He=this.map.getContainer();if(He!==null){var ft=He.getElementsByClassName("amap-maps")[0];this.markerContainer=je.SO.create("div","l7-marker-container",ft)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(He,ft){ke.I9.indexOf(He)!==-1?this.eventEmitter.on(He,ft):this.map.on(ur[He]||He,ft)}},{key:"off",value:function(He,ft){ke.I9.indexOf(He)!==-1?this.eventEmitter.off(He,ft):this.map.off(ur[He]||He,ft)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var He;return(He=this.map.getContainer())===null||He===void 0?void 0:He.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var He=this.map.getSize();return[He.getWidth(),He.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(He){return this.map.setZoom(He+1)}},{key:"getCenter",value:function(He){if(He!=null&&He.padding){var ft=this.getCenter(),Z=_e(He.padding),J=this.lngLatToPixel([ft.lng,ft.lat]),K=[(Z.right-Z.left)/2,(Z.bottom-Z.top)/2],B=this.pixelToLngLat([J.x-K[0],J.y-K[1]]);return B}var j=this.map.getCenter();return{lng:j.getLng(),lat:j.getLat()}}},{key:"setCenter",value:function(He,ft){if(ft!=null&&ft.padding){var Z=_e(ft.padding),J=this.lngLatToPixel(He),K=[(Z.right-Z.left)/2,(Z.bottom-Z.top)/2],B=this.pixelToLngLat([J.x+K[0],J.y+K[1]]);this.map.setCenter([B.lng,B.lat])}else this.map.setCenter(He)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var He=this.map.getBounds().toBounds(),ft=He.getNorthEast(),Z=He.getSouthWest(),J=this.getCenter(),K=J.lng>ft.getLng()||J.lng<Z.getLng()?180-ft.getLng():ft.getLng(),B=J.lng<Z.getLng()?Z.getLng()-180:Z.getLng();return[[B,Z.getLat()],[K,ft.getLat()]]}},{key:"getMinZoom",value:function(){var He=this.map.get("zooms");return He[0]-1}},{key:"getMaxZoom",value:function(){var He=this.map.get("zooms");return He[1]-1}},{key:"setRotation",value:function(He){return this.map.setRotation(He)}},{key:"setPitch",value:function(He){return this.map.setPitch(He)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(He){this.map.panTo(He)}},{key:"panBy",value:function(){var He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(He,ft)}},{key:"fitBounds",value:function(He){this.map.setBounds(new AMap.Bounds([He[0][0],He[0][1],He[1][0],He[1][1]]))}},{key:"setZoomAndCenter",value:function(He,ft){this.map.setZoomAndCenter(He+1,ft)}},{key:"setMapStyle",value:function(He){this.map.setMapStyle(this.getMapStyleValue(He))}},{key:"setMapStatus",value:function(He){this.map.setStatus(He)}},{key:"getMapStyleConfig",value:function(){return ht}},{key:"getMapStyleValue",value:function(He){return this.getMapStyleConfig()[He]||He}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(He){var ft=this.map.pixelToLngLat(new AMap.Pixel(He[0],He[1]));return{lng:ft.getLng(),lat:ft.getLat()}}},{key:"lngLatToPixel",value:function(He){var ft=this.map.lnglatToPixel(new AMap.LngLat(He[0],He[1]));return{x:ft.getX(),y:ft.getY()}}},{key:"containerToLngLat",value:function(He){var ft=new AMap.Pixel(He[0],He[1]),Z=this.map.containerToLngLat(ft);return{lng:Z==null?void 0:Z.getLng(),lat:Z==null?void 0:Z.getLat()}}},{key:"lngLatToContainer",value:function(He){var ft=new AMap.LngLat(He[0],He[1]),Z=this.map.lngLatToContainer(ft);return{x:Z.getX(),y:Z.getY()}}},{key:"lngLatToCoord",value:function(He){var ft=this.map.lngLatToGeodeticCoord(He),Z=ft.x,J=ft.y;return[Z,-J]}},{key:"lngLatToMercator",value:function(He,ft){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(He,ft,Z){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],K=this.viewport.projectFlat(He),B=bt.create();return bt.translate(B,B,ut.fromValues(K[0],K[1],ft)),bt.scale(B,B,ut.fromValues(J[0],J[1],J[2])),bt.rotateX(B,B,Z[0]),bt.rotateY(B,B,Z[1]),bt.rotateZ(B,B,Z[2]),B}},{key:"init",value:function(){var Be=(0,z.Z)(re().mark(function ft(){var Z=this,J,K,B,j,ee,W,De,ot,Wt,Ct,Qt,ir,Er,Qr;return re().wrap(function(br){for(;;)switch(br.prev=br.next){case 0:return J=this.config,K=J.id,B=J.style,j=B===void 0?"light":B,ee=J.minZoom,W=ee===void 0?0:ee,De=J.maxZoom,ot=De===void 0?18:De,Wt=J.token,Ct=Wt===void 0?At:Wt,Qt=J.mapInstance,ir=J.plugin,Er=ir===void 0?[]:ir,Qr=(0,R.Z)(J,We),br.next=3,new Promise(function(Nt){var Pr=function(){if(Qt)Z.map=Qt,Z.$mapContainer=Z.map.getContainer(),setTimeout(function(){Z.map.on("camerachange",Z.handleCameraChanged),Nt()},30);else{Z.$mapContainer=Z.creatMapContainer(K);var kr=(0,$.Z)({mapStyle:Z.getMapStyleValue(j),zooms:[W,ot],viewMode:"3D"},Qr);kr.zoom&&(kr.zoom+=1);var zt=new AMap.Map(Z.$mapContainer,kr);zt.on("camerachange",Z.handleCameraChanged),zt.on("camerachange",function(){setTimeout(function(){return Z.handleAfterMapChange()})}),Z.map=zt,setTimeout(function(){Nt()},10)}};!St&&!Qt?(Ct===At&&console.warn("%c".concat(Z.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),St=!0,Er.push("Map3D"),fe().load({key:Ct,version:nt,plugins:Er}).then(function(){Pr(),Ut.length&&(Ut.forEach(function(_r){return _r()}),Ut=[])}).catch(function(_r){throw new Error(_r)})):St&&window.AMap||Qt?Pr():Ut.push(Pr)});case 3:this.viewport=new Te.Z;case 4:case"end":return br.stop()}},ft,this)}));function He(){return Be.apply(this,arguments)}return He}()},{key:"meterToCoord",value:function(He,ft){var Z=AMap.GeometryUtil.distance((0,C.Z)(AMap.LngLat,(0,l.Z)(He)),(0,C.Z)(AMap.LngLat,(0,l.Z)(ft))),J=this.lngLatToCoord(He),K=(0,v.Z)(J,2),B=K[0],j=K[1],ee=this.lngLatToCoord(ft),W=(0,v.Z)(ee,2),De=W[0],ot=W[1],Wt=Math.sqrt(Math.pow(B-De,2)+Math.pow(j-ot,2));return Wt/Z}},{key:"updateView",value:function(He){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(He){var ft,Z=(ft=this.getContainer())===null||ft===void 0?void 0:ft.getElementsByClassName("amap-layer")[0],J=He==="jpg"?Z==null?void 0:Z.toDataURL("image/jpeg"):Z==null?void 0:Z.toDataURL("image/png");return J}},{key:"emit",value:function(He){for(var ft,Z=arguments.length,J=new Array(Z>1?Z-1:0),K=1;K<Z;K++)J[K-1]=arguments[K];(ft=this.eventEmitter).emit.apply(ft,[He].concat(J))}},{key:"once",value:function(He){for(var ft,Z=arguments.length,J=new Array(Z>1?Z-1:0),K=1;K<Z;K++)J[K-1]=arguments[K];(ft=this.eventEmitter).once.apply(ft,[He].concat(J))}},{key:"destroy",value:function(){var He,ft;(He=this.$mapContainer)===null||He===void 0||(ft=He.parentNode)===null||ft===void 0||ft.removeChild(this.$mapContainer),delete window.initAMap;var Z=document.getElementById(Lt);Z&&document.head.removeChild(Z),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(He){this.cameraChangedCallback=He}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(He){var ft=He;typeof He=="string"&&(ft=document.getElementById(He));var Z=document.createElement("div");return Z.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,Z.id="l7_amap_div"+we++,ft.appendChild(Z),Z}}]),Zt}(),st=(0,ue.Z)(Re.prototype,"configService",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=(0,ue.Z)(Re.prototype,"config",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=(0,ue.Z)(Re.prototype,"coordinateSystemService",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=(0,ue.Z)(Re.prototype,"eventEmitter",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re))||Le)},73900:function(Qe,te,m){"use strict";m.d(te,{D:function(){return $}});var v=m(15671),C=m(43144),l=m(4942),$=function(){function R(z){(0,v.Z)(this,R),(0,l.Z)(this,"size",1e4),this.size=z||1e4}return(0,C.Z)(R,[{key:"setSize",value:function(L){this.size=L}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(L){return(180+L)/360*this.size}},{key:"mercatorYfromLat",value:function(L){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(L){return L/this.size*360-180}},{key:"latFromMercatorY",value:function(L){var T=180-(1-L/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(T*Math.PI/180))-90}},{key:"project",value:function(L){var T=this.mercatorXfromLng(L[0]),O=this.mercatorYfromLat(L[1]);return[T,O]}},{key:"unproject",value:function(L){var T=this.lngFromMercatorX(L[0]),O=this.latFromMercatorY(L[1]);return[T,O]}}]),R}()},84859:function(Qe,te,m){"use strict";m.d(te,{G:function(){return v}});var v;(function(C){C["GAODE1.x"]="GAODE1.x",C["GAODE2.x"]="GAODE2.x",C.MAPBOX="MAPBOX",C.DEFUALT="DEFUALTMAP",C.SIMPLE="SIMPLE",C.GLOBEL="GLOBEL"})(v||(v={}))},11265:function(Qe,te,m){"use strict";m.d(te,{ft:function(){return Vn},PG:function(){return ni},vO:function(){return mn},Uj:function(){return qi},e2:function(){return ao},SO:function(){return v},iH:function(){return Kl},z6:function(){return Vh},sN:function(){return Ds},Qj:function(){return mu},oX:function(){return Ts},a5:function(){return C},LZ:function(){return Xf},nx:function(){return p},dD:function(){return xl},lN:function(){return Ys},Z:function(){return Qn},TG:function(){return $i},S8:function(){return $o},rQ:function(){return yt},bV:function(){return de},zi:function(){return Ue},ds:function(){return Tl},Ev:function(){return Gs},oO:function(){return al},mt:function(){return Ul},Lw:function(){return xf},SI:function(){return uu},Rx:function(){return Bc},W0:function(){return kn},Gi:function(){return Bo},Dd:function(){return ha},YR:function(){return xa},TS:function(){return eo},fO:function(){return Vs},xr:function(){return ou},VJ:function(){return ls},vJ:function(){return Hr},b0:function(){return Hn},om:function(){return Zr},h8:function(){return Ml},Z6:function(){return Nn},hH:function(){return Yf},Gk:function(){return Y},We:function(){return _c},ls:function(){return ol},hj:function(){return io},Cl:function(){return Mi},Oc:function(){return Sa},M4:function(){return Bi},NJ:function(){return co},_O:function(){return Rl},ks:function(){return Kn},Ol:function(){return cc},fj:function(){return Ho},ZB:function(){return wo},gJ:function(){return k},xA:function(){return wn},Vi:function(){return Nc},an:function(){return Zl},rJ:function(){return df},qD:function(){return rc},z0:function(){return ye},jG:function(){return Pe},M8:function(){return Hf},Dt:function(){return rh},D5:function(){return Mr},fg:function(){return Dc},eW:function(){return er},zh:function(){return at},N_:function(){return Yr},Ro:function(){return od},Xj:function(){return E},FH:function(){return hr},hJ:function(){return Ff},Tt:function(){return ad},pq:function(){return Mf},LT:function(){return Wc},wj:function(){return Dh},if:function(){return Tf},vP:function(){return Yh},yM:function(){return lo},MS:function(){return Gc},LF:function(){return Mn},Uv:function(){return Uh},RH:function(){return dn},Fv:function(){return Lh},RV:function(){return kh},cN:function(){return Wf},yA:function(){return tl},yR:function(){return lu},qC:function(){return Ei},iV:function(){return Es},CI:function(){return qr},_0:function(){return Ji},p3:function(){return gh},a:function(){return pr},Dv:function(){return zc},Jo:function(){return ff},ih:function(){return fa},Fb:function(){return nh}});var v={};m.r(v),m.d(v,{DPR:function(){return kf},addClass:function(){return Xs},addStyle:function(){return wf},appendElementType:function(){return _f},clearChildren:function(){return cf},create:function(){return bs},css2Style:function(){return Kh},empty:function(){return lc},getClass:function(){return yl},getContainer:function(){return Ao},getDiffRect:function(){return yc},getStyleList:function(){return lf},getViewPortScale:function(){return th},hasClass:function(){return jf},printCanvas:function(){return Us},remove:function(){return Ps},removeClass:function(){return gl},removeStyle:function(){return gd},setChecked:function(){return Eh},setClass:function(){return Mu},setTransform:function(){return dh},setUnDraggable:function(){return Af},splitWords:function(){return gs},triggerResize:function(){return _l},trim:function(){return Va}});var C={};m.r(C),m.d(C,{getColumn:function(){return Pl},getSatByColumn:function(){return Xc},max:function(){return Ql},mean:function(){return Gf},min:function(){return gu},mode:function(){return Bf},statMap:function(){return eu},sum:function(){return Ks}});var l=m(1413),$=m(43144),R=m(15671),z=m(60136),L=m(82963),T=m(61120),O=m(89611);function F(ne){return Function.toString.call(ne).indexOf("[native code]")!==-1}var ue=m(5647);function Ae(ne){var Me=typeof Map=="function"?new Map:void 0;return Ae=function(Ke){if(Ke===null||!F(Ke))return Ke;if(typeof Ke!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Me!="undefined"){if(Me.has(Ke))return Me.get(Ke);Me.set(Ke,pt)}function pt(){return(0,ue.Z)(Ke,arguments,(0,T.Z)(this).constructor)}return pt.prototype=Object.create(Ke.prototype,{constructor:{value:pt,enumerable:!1,writable:!0,configurable:!0}}),(0,O.Z)(pt,Ke)},Ae(ne)}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function pe(ne){this.message=ne}pe.prototype=new Error,pe.prototype.name="InvalidCharacterError";function fe(ne){var Me=String(ne).replace(/=+$/,"");if(Me.length%4===1)throw new pe("'atob' failed: The string to be decoded is not correctly encoded.");for(var Oe="",Ke=0,pt,Pt,Xr=0;Pt=Me.charAt(Xr++);~Pt&&(pt=Ke%4?pt*64+Pt:Pt,Ke++%4)?Oe+=String.fromCharCode(255&pt>>(-2*Ke&6)):0)Pt=re.indexOf(Pt);return Oe}function ke(ne){ne=String(ne);for(var Me,Oe,Ke,pt,Pt="",Xr=0,An=ne.length%3;Xr<ne.length;){if((Oe=ne.charCodeAt(Xr++))>255||(Ke=ne.charCodeAt(Xr++))>255||(pt=ne.charCodeAt(Xr++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");Me=Oe<<16|Ke<<8|pt,Pt+=re.charAt(Me>>18&63)+re.charAt(Me>>12&63)+re.charAt(Me>>6&63)+re.charAt(Me&63)}return An?Pt.slice(0,An-3)+"===".substring(An):Pt}var je=function(){function ne(Me,Oe){(0,R.Z)(this,ne),this.buffers=Me,this.type=Oe}return(0,$.Z)(ne,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(Oe,Ke,pt){throw new Error("not implemented")}}]),ne}(),bt,ut=function(){return bt||(bt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof m.g!="undefined"?m.g:{})};bt=ut();var wt;typeof window=="undefined"?wt={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(Me){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(Me){return null},clearMeasures:function(Me){return null},clearMarks:function(Me){return null},measure:function(Me,Oe,Ke){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(Me){return!0},Event:function(Me,Oe){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:wt=window;var se=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,qe=se?my.getSystemInfoSync().pixelRatio:wt.devicePixelRatio,me=(0,$.Z)(function ne(Me,Oe){(0,R.Z)(this,ne),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=Me,this.timeStamp=Date.now()}),_e=m(97326);function Te(ne,Me){var Oe=typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(!Oe){if(Array.isArray(ne)||(Oe=ht(ne))||Me&&ne&&typeof ne.length=="number"){Oe&&(ne=Oe);var Ke=0,pt=function(){};return{s:pt,n:function(){return Ke>=ne.length?{done:!0}:{done:!1,value:ne[Ke++]}},e:function(un){throw un},f:pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pt=!0,Xr=!1,An;return{s:function(){Oe=Oe.call(ne)},n:function(){var un=Oe.next();return Pt=un.done,un},e:function(un){Xr=!0,An=un},f:function(){try{!Pt&&Oe.return!=null&&Oe.return()}finally{if(Xr)throw An}}}}function ht(ne,Me){if(ne){if(typeof ne=="string")return We(ne,Me);var Oe=Object.prototype.toString.call(ne).slice(8,-1);if(Oe==="Object"&&ne.constructor&&(Oe=ne.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(ne);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return We(ne,Me)}}function We(ne,Me){(Me==null||Me>ne.length)&&(Me=ne.length);for(var Oe=0,Ke=new Array(Me);Oe<Me;Oe++)Ke[Oe]=ne[Oe];return Ke}var Ne=new WeakMap,he=function(){function ne(){(0,R.Z)(this,ne),Ne.set(this,{})}return(0,$.Z)(ne,[{key:"addEventListener",value:function(Oe,Ke){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Pt=Ne.get(this);Pt||(Pt={}),Pt[Oe]||(Pt[Oe]=[]),Pt[Oe].push(Ke),Ne.set(this,Pt),pt.capture,pt.once,pt.passive}},{key:"removeEventListener",value:function(Oe,Ke){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Pt=Ne.get(this);if(Pt){var Xr=Pt[Oe];if(Xr&&Xr.length>0){for(var An=Xr.length;An--;An>0)if(Xr[An]===Ke){Xr.splice(An,1);break}}}}},{key:"dispatchEvent",value:function(Oe){var Ke=Ne.get(this)[Oe.type];if(Ke){var pt=Te(Ke),Pt;try{for(pt.s();!(Pt=pt.n()).done;){var Xr=Pt.value;Xr(Oe)}}catch(An){pt.e(An)}finally{pt.f()}}}}]),ne}();function Ve(ne){var Me=ie();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var ze=function(ne){(0,z.Z)(Oe,ne);var Me=Ve(Oe);function Oe(){var Ke;return(0,R.Z)(this,Oe),Ke=Me.call(this),Ke.childNodes=[],Ke}return(0,$.Z)(Oe,[{key:"appendChild",value:function(pt){this.childNodes.push(pt)}},{key:"cloneNode",value:function(){var pt=Object.create(this);return Object.assign(pt,this),pt}},{key:"removeChild",value:function(pt){var Pt=this.childNodes.findIndex(function(Xr){return Xr===pt});return Pt>-1?this.childNodes.splice(Pt,1):null}}]),Oe}(he);function Le(ne){var Me=Re();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function Re(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var st=function(ne){(0,z.Z)(Oe,ne);var Me=Le(Oe);function Oe(){var Ke;return(0,R.Z)(this,Oe),Ke=Me.call(this),Ke.className="",Ke.children=[],Ke}return(0,$.Z)(Oe,[{key:"setAttribute",value:function(pt,Pt){this[pt]=Pt}},{key:"getAttribute",value:function(pt){return this[pt]}},{key:"setAttributeNS",value:function(pt,Pt){this[pt]=Pt}},{key:"getAttributeNS",value:function(pt){return this[pt]}}]),Oe}(ze),vt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Dt,ar,$t,ur;if(vt){var we=my.getSystemInfoSync();Dt=we.screenWidth,ar=we.screenHeight,$t=we.windowWidth,ur=we.windowHeight}else{var At=wt.innerWidth,nt=wt.innerHeight;Dt=At,ar=nt,$t=At,ur=nt}var Lt={width:Dt,height:ar,availWidth:$t,availHeight:ur,availLeft:0,availTop:0},St=Lt.availWidth,Ut=Lt.availHeight,lt={style:[]};function Et(ne,Me){if(!("parentNode"in ne)){var Oe;Me===0?Oe=function(){return null}:Me===1?Oe=function(){return lt}:Oe=function(){return null},Object.defineProperty(ne,"parentNode",{enumerable:!0,get:Oe})}if(!("parentElement"in ne)){var Ke;Me===0?Ke=function(){return null}:Me===1?Ke=function(){return lt}:Ke=function(){return null},Object.defineProperty(ne,"parentElement",{enumerable:!0,get:Ke})}}function Zt(ne){ne.style=ne.style||{},Object.assign(ne.style,{top:"0px",left:"0px",width:St+"px",height:Ut+"px",margin:"0px",padding:"0px"})}function Be(ne){"clientLeft"in ne||(ne.clientLeft=0,ne.clientTop=0),"clientWidth"in ne||(ne.clientWidth=St,ne.clientHeight=Ut),"getBoundingClientRect"in ne||(ne.getBoundingClientRect=function(){var Me={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return Me})}function He(ne){"offsetLeft"in ne||(ne.offsetLeft=0,ne.offsetTop=0),"offsetWidth"in ne||(ne.offsetWidth=St,ne.offsetHeight=Ut)}function ft(ne){"scrollLeft"in ne||(ne.scrollLeft=0,ne.scrollTop=0),"scrollWidth"in ne||(ne.scrollWidth=St,ne.scrollHeight=Ut)}function Z(ne){var Me=function(){return!0};ne.classList=[],ne.classList.add=Me,ne.classList.remove=Me,ne.classList.contains=Me,ne.classList.toggle=Me}function J(ne){var Me=K();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function K(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}function B(){}var j=function(ne){(0,z.Z)(Oe,ne);var Me=J(Oe);function Oe(){var Ke,pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Pt=arguments.length>1?arguments[1]:void 0;return(0,R.Z)(this,Oe),Ke=Me.call(this),Ke.className="",Ke.children=[],Ke.focus=B,Ke.blur=B,Ke.insertBefore=B,Ke.appendChild=B,Ke.removeChild=B,Ke.remove=B,Ke.innerHTML="",Ke.tagName=pt.toUpperCase(),Et((0,_e.Z)(Ke),Pt),Zt((0,_e.Z)(Ke)),Z((0,_e.Z)(Ke)),Be((0,_e.Z)(Ke)),He((0,_e.Z)(Ke)),ft((0,_e.Z)(Ke)),Ke}return(0,$.Z)(Oe)}(st);function ee(ne){var Me=W();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function W(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var De=function(ne){(0,z.Z)(Oe,ne);var Me=ee(Oe);function Oe(Ke){return(0,R.Z)(this,Oe),Me.call(this,Ke)}return(0,$.Z)(Oe,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),Oe}(j);function ot(ne){var Me=Wt();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function Wt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var Ct=function(ne){(0,z.Z)(Oe,ne);var Me=ot(Oe);function Oe(){return(0,R.Z)(this,Oe),Me.call(this,"video")}return(0,$.Z)(Oe)}(De),Qt={},ir={};function Er(ne,Me){Qt=ne,Qt.id=Me,"tagName"in Qt||(Qt.tagName="CANVAS"),Qt.type="canvas",Mixin.parentNode(Qt),Mixin.style(Qt),Mixin.classList(Qt),Mixin.clientRegion(Qt),Mixin.offsetRegion(Qt),Qt.focus=function(){},Qt.blur=function(){}}function Qr(ne,Me){var Oe=1024,Ke=1024;ir={width:Oe,height:Ke,clientWidth:Oe/devicePixelRatio,clientHeight:Ke/devicePixelRatio,id:Me,type:"canvas"},"tagName"in ir||(ir.tagName="CANVAS"),Mixin.parentNode(ir),Mixin.style(ir),Mixin.classList(ir),Mixin.clientRegion(ir),Mixin.offsetRegion(ir),ir.getContext=function(pt){if(pt==="2d")return ne},ir.focus=function(){},ir.blur=function(){}}function Mt(){return Qt}function br(){return ir}var Nt=(0,$.Z)(function ne(){(0,R.Z)(this,ne);var Me=Mt(),Oe=Me.createImage&&Me.createImage()||{};return"tagName"in Oe||(Oe.tagName="IMG",Oe.__proto__=ne.prototype),Et(Oe),Z(Oe),Object.assign(Oe,{addEventListener:function(pt,Pt){Oe["on".concat(pt)]=Pt.bind(Oe)},removeEventListener:function(pt){Oe["on".concat(pt)]=null}}),Oe}),Pr={href:"",protocol:"",host:""};function _r(ne){var Me=kr();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function kr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var zt=function(ne){(0,z.Z)(Oe,ne);var Me=_r(Oe);function Oe(){return(0,R.Z)(this,Oe),Me.call(this,"body",0)}return(0,$.Z)(Oe,[{key:"addEventListener",value:function(pt,Pt){var Xr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(pt,Pt,Xr){}},{key:"dispatchEvent",value:function(pt){}}]),Oe}(j),mr=function(ne){(0,z.Z)(Oe,ne);var Me=_r(Oe);function Oe(){return(0,R.Z)(this,Oe),Me.call(this,"html",0)}return(0,$.Z)(Oe,[{key:"addEventListener",value:function(pt,Pt){var Xr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(pt,Pt){}},{key:"dispatchEvent",value:function(pt){}}]),Oe}(j),Or={},X={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Pr,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(Me){return Me=Me.toLowerCase(),Me==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):Me==="img"?new Nt:Me==="video"?new Ct:new j(Me)},createElementNS:function(Me,Oe){return this.createElement(Oe)},createTextNode:function(Me){return Me},getElementById:function(Me){return null},getElementsByTagName:function(Me){return Me=Me.toLowerCase(),[]},getElementsByTagNameNS:function(Me,Oe){return this.getElementsByTagName(Oe)},getElementsByName:function(Me){return[]},querySelector:function(Me){return null},querySelectorAll:function(Me){return[]},addEventListener:function(Me,Oe,Ke){Or[Me]||(Or[Me]=[]),Or[Me].push(Oe)},removeEventListener:function(Me,Oe){var Ke=Or[Me];if(Ke&&Ke.length>0){for(var pt=Ke.length;pt--;pt>0)if(Ke[pt]===Oe){Ke.splice(pt,1);break}}},dispatchEvent:function(Me){var Oe=Me.type,Ke=Or[Oe];if(Ke)for(var pt=0;pt<Ke.length;pt++)Ke[pt](Me);Me.target&&typeof Me.target["on"+Oe]=="function"&&Me.target["on"+Oe](Me)},createEvent:function(Me){return new me(Me)}};X.documentElement=new mr,X.head=new j("head"),X.body=new zt;var Nr=Object,Xe=m(71002),xe=function(){function ne(){(0,R.Z)(this,ne);var Me=arguments.length;if(Me===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else Me===3&&(0,Xe.Z)(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return(0,$.Z)(ne,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),ne}(),rt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,kt,cr,Ar;if(rt){var Lr=my.getSystemInfoSync();kt=Lr.system,cr=Lr.platform,Ar=Lr.language}else{var sr={versions:function(){var ne=wt.navigator.userAgent;return{trident:ne.indexOf("Trident")>-1,presto:ne.indexOf("Presto")>-1,webKit:ne.indexOf("AppleWebKit")>-1,gecko:ne.indexOf("Gecko")>-1&&ne.indexOf("KHTML")===-1,mobile:!!ne.match(/AppleWebKit.*Mobile.*/),ios:!!ne.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:ne.indexOf("Android")>-1||ne.indexOf("Linux")>-1,iPhone:ne.indexOf("iPhone")>-1,iPad:ne.indexOf("iPad")>-1,webApp:ne.indexOf("Safari")===-1,weixin:ne.indexOf("MicroMessenger")>-1,qq:ne.match(/\sQQ/i)===" qq"}}(),language:(wt.navigator.browserLanguage||wt.navigator.language).toLowerCase()};sr.versions.android?cr="android":sr.versions.trident?cr="IE":sr.versions.presto?cr="Opera":sr.versions.webKit?cr="webKit":sr.versions.gecko?cr="Firefox":sr.versions.mobile?cr="mobile":sr.versions.ios?cr="ios":sr.versions.iPhone?cr="iPhone":sr.versions.iPad?cr="ipad":sr.versions.webApp?cr="webApp":sr.versions.weixin?cr="weixin":sr.versions.qq&&(cr="qq"),kt=wt.navigator.userAgent,Ar=sr.language}var Ge=kt.toLowerCase().indexOf("android")!==-1,Gr=Ge?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",on="Mozilla/5.0 (".concat(Gr,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(Ar),cn={platform:cr,language:Ar,appVersion:"5.0 (".concat(Gr,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:on},Dn={mark:function(Me){return null},clearMeasures:function(Me){return null},clearMarks:function(Me){return null},measure:function(Me,Oe,Ke){return{duration:0}},now:function(){}},ci=0,ia=0;function Vi(ne){var Me=Date.now(),Oe=Math.max(ci+23,Me);return ia=setTimeout(function(){ne(ci=Oe)},Oe-Me),ia}function On(ne){var Me=Mt();return Me.requestAnimationFrame?Me.requestAnimationFrame(ne):Vi(ne)}function ji(ne){var Me=Mt();return Me.cancelAnimationFrame?Me.cancelAnimationFrame(ne):clearTimeout(ne)}var oi=function(){function ne(Me){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,R.Z)(this,ne),Me.indexOf("http://")==0||Me.indexOf("https://")==0){this.href=Me;return}this.href=Oe+Me}return(0,$.Z)(ne,null,[{key:"createObjectURL",value:function(Oe){var Ke=Oe.buffers[0],pt=Oe.type,Pt=Hi(Ke),Xr="data:".concat(pt,";base64, ");return Xr+Pt}}]),ne}();function Hi(ne){for(var Me="",Oe=new Uint8Array(ne),Ke=Oe.byteLength,pt=0;pt<Ke;pt++)Me+=String.fromCharCode(Oe[pt]);return ke(Me)}var Ca={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:18446744073709552e3,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},Wi={};function jo(ne){var Me=uo();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function uo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var Pn=new Map,bn=new Map,Oi=new Map,di={json:"application/json",text:"application/text",arraybuffer:"application/octet-stream"};function va(ne){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:this};typeof this["on".concat(ne)]=="function"&&this["on".concat(ne)].call(this,Me)}function wa(ne){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{readyState:ne};this.readyState=ne,va.call(this,"readystatechange",Me)}var Aa=function(ne){(0,z.Z)(Oe,ne);var Me=jo(Oe);function Oe(){var Ke;return(0,R.Z)(this,Oe),Ke=Me.call(this),Ke.onabort=null,Ke.onerror=null,Ke.onload=null,Ke.onloadstart=null,Ke.onprogress=null,Ke.ontimeout=null,Ke.onloadend=null,Ke.onreadystatechange=null,Ke.readyState=0,Ke.response=null,Ke.responseText=null,Ke._responseType="text",Ke.responseXML=null,Ke.status=0,Ke.statusText="",Ke.upload={},Ke.withCredentials=!1,Pn.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),Ke}return(0,$.Z)(Oe,[{key:"responseType",set:function(pt){this._responseType=pt}},{key:"abort",value:function(){var pt=Oi.get("requestTask");pt&&pt.abort()}},{key:"getAllResponseHeaders",value:function(){var pt=bn.get("responseHeader");return Object.keys(pt).map(function(Pt){return"".concat(Pt,": ").concat(pt[Pt])}).join(`
`)}},{key:"getResponseHeader",value:function(pt){return bn.get("responseHeader")[pt]}},{key:"open",value:function(pt,Pt,Xr){this._method=pt,this._url=Pt}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:""}},{key:"setRequestHeader",value:function(pt,Pt){var Xr=Pn.get("requestHeader");Xr[pt]=Pt,Pn.set("requestHeader",Xr)}},{key:"addEventListener",value:function(pt,Pt){var Xr=this;typeof Pt=="function"&&(this["on"+pt]=function(){var An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};An.target=An.target||Xr,Pt.call(Xr,An)})}},{key:"removeEventListener",value:function(pt,Pt){this["on"+pt]===Pt&&(this["on"+pt]=null)}}]),Oe}(he);Aa.UNSEND=0,Aa.OPENED=1,Aa.HEADERS_RECEIVED=2,Aa.LOADING=3,Aa.DONE=4;function Ta(ne){var Me=ma();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function ma(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var Da=function(ne){(0,z.Z)(Oe,ne);var Me=Ta(Oe);function Oe(Ke){return(0,R.Z)(this,Oe),Me.call(this,Ke)}return(0,$.Z)(Oe)}(me);function Uo(ne){return function(Me){Me.type=ne,X.dispatchEvent(Me)}}var ha=Uo("mousedown"),xa=Uo("mousemove"),eo=Uo("mouseup");function Ee(ne){var Me=Po();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function Po(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var Hs=function(ne){(0,z.Z)(Oe,ne);var Me=Ee(Oe);function Oe(Ke){var pt;return(0,R.Z)(this,Oe),pt=Me.call(this,Ke),pt.target=Mt(),pt.currentTarget=Mt(),pt}return(0,$.Z)(Oe)}(me),no=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],qo=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],os="touch";function Go(ne,Me,Oe){for(var Ke=new Hs(ne),pt=0;pt<no.length;pt++){var Pt=no[pt];Ke[Pt]=Me[Pt]||qo[pt]}return Ke.type=ne,Ke.target=Mt(),Ke.currentTarget=Mt(),Ke.buttons=Wo(ne),Ke.which=Ke.buttons,Ke.pointerId=(Me.identifier||0)+2,Ke.bubbles=!0,Ke.cancelable=!0,Ke.button=0,Ke.width=(Me.radiusX||.5)*2,Ke.height=(Me.radiusY||.5)*2,Ke.pressure=Me.force||.5,Ke.isPrimary=Tu(Me),Ke.pointerType=os,Ke.altKey=Oe.altKey,Ke.ctrlKey=Oe.ctrlKey,Ke.metaKey=Oe.metaKey,Ke.shiftKey=Oe.shiftKey,Oe.preventDefault&&(Ke.preventDefault=function(){Oe.preventDefault()}),Ke}function Wo(ne){var Me=0;return(ne==="touchstart"||ne==="touchmove"||ne==="pointerdown"||ne==="pointermove")&&(Me=1),Me}var za=null;function Tu(ne){return za===ne.identifier}function Cs(ne){za===null&&(za=ne.identifier)}function Zs(ne){za===ne.identifier&&(za=null)}function ts(ne){return function(Me){for(var Oe=Me.changedTouches,Ke=0;Ke<Oe.length;Ke++){var pt=Oe[Ke];Ke===0&&ne==="pointerdown"?Cs(pt):(ne==="pointerup"||ne==="pointercancel")&&Zs(pt);var Pt=Go(ne,pt,Me);X.dispatchEvent(Pt)}}}var Vs=ts("pointerdown"),ou=ts("pointermove"),ls=ts("pointerup");function Di(ne){var Me=As();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function As(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var Rs=function(ne){(0,z.Z)(Oe,ne);var Me=Di(Oe);function Oe(Ke){var pt;return(0,R.Z)(this,Oe),pt=Me.call(this,Ke),pt.touches=[],pt.targetTouches=[],pt.changedTouches=[],pt.target=Mt(),pt.currentTarget=Mt(),pt}return(0,$.Z)(Oe)}(me);function vr(ne){var Me=ne||{},Oe=Me.x,Ke=Oe===void 0?0:Oe,pt=Me.y,Pt=pt===void 0?0:pt,Xr=Me.clientX,An=Xr===void 0?0:Xr,mi=Me.clientY,un=mi===void 0?0:mi;Object.keys(ne).indexOf("x")!==-1?(ne.pageX=ne.clientX=Ke,ne.pageY=ne.clientY=Pt):(ne.x=An,ne.y=un)}function zr(ne){return function(Me){var Oe=new Rs(ne);Oe.changedTouches=Me.changedTouches,Oe.touches=Me.touches,Oe.targetTouches=Array.prototype.slice.call(Me.touches),Oe.timeStamp=Me.timeStamp,Oe.changedTouches.forEach(function(Ke){return vr(Ke)}),Oe.touches.forEach(function(Ke){return vr(Ke)}),Oe.targetTouches.forEach(function(Ke){return vr(Ke)}),X.dispatchEvent(Oe)}}function lr(ne){return function(Me){Me.type=ne,X.dispatchEvent(Me)}}var Zr=zr("touchstart"),Hn=zr("touchmove"),Hr=zr("touchend"),Bo=lr("mapCameaParams"),Yr=!1;function pr(ne){Yr=ne}var at=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,hr=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),er=(at||hr)&&Yr,dn={atob:fe,btoa:ke,devicePixelRatio:qe,Blob:je,document:X,Element:st,Event:me,EventTarget:he,HTMLCanvasElement:Nr,HTMLElement:j,HTMLMediaElement:De,HTMLVideoElement:Ct,Image:Nt,ImageData:xe,navigator:cn,Node:ze,requestAnimationFrame:On,cancelAnimationFrame:ji,screen:Lt,XMLHttpRequest:Aa,performance:Dn,URL:oi,WebGLRenderingContext:Ca,WebGL2RenderingContext:Wi,addEventListener:function(Me,Oe){var Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};X.addEventListener(Me,Oe,Ke)},removeEventListener:function(Me,Oe,Ke){X.removeEventListener(Me,Oe)},dispatchEvent:function(Me){X.dispatchEvent(Me)},innerWidth:Lt.availWidth,innerHeight:Lt.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},mn=er?dn:wt,Vn=er?Aa:wt.XMLHttpRequest,ni=er?Pr:wt.location;function si(ne){var Me=Si();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function Si(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var qi=function(ne){(0,z.Z)(Oe,ne);var Me=si(Oe);function Oe(Ke,pt,Pt,Xr){var An;return(0,R.Z)(this,Oe),An=Me.call(this,"AJAXError: ".concat(pt," (").concat(Ke,"): ").concat(Pt)),An.status=Ke,An.statusText=pt,An.url=Pt,An.body=Xr,An}return(0,$.Z)(Oe)}(Ae(Error));function Rr(ne,Me){var Oe=new Vn,Ke=Array.isArray(ne.url)?ne.url[0]:ne.url;Oe.open(ne.method||"GET",Ke,!0),ne.type==="arrayBuffer"&&(Oe.responseType="arraybuffer");for(var pt in ne.headers)ne.headers.hasOwnProperty(pt)&&Oe.setRequestHeader(pt,ne.headers[pt]);return ne.type==="json"&&(Oe.responseType="text",Oe.setRequestHeader("Accept","application/json")),Oe.withCredentials=ne.credentials==="include",Oe.onerror=function(){Me(new Error(Oe.statusText))},Oe.onload=function(){if((Oe.status>=200&&Oe.status<300||Oe.status===0)&&Oe.response!==null){var Pt=Oe.response;if(ne.type==="json")try{Pt=JSON.parse(Oe.response)}catch(An){return Me(An)}Me(null,Pt,Oe.getResponseHeader("Cache-Control"),Oe.getResponseHeader("Expires"),Oe)}else{var Xr=new Blob([Oe.response],{type:Oe.getResponseHeader("Content-Type")});Me(new qi(Oe.status,Oe.statusText,Ke.toString(),Xr))}},Oe.send(ne.body),Oe}function Mn(ne){return new Promise(function(Me,Oe){Rr(ne,function(Ke,pt,Pt,Xr,An){Ke?Oe({err:Ke,data:null,xhr:An}):Me({err:null,data:pt,cacheControl:Pt,expires:Xr,xhr:An})})})}function pn(ne,Me){return Rr(ne,Me)}var wn=function(Me,Oe){return pn((0,l.Z)((0,l.Z)({},Me),{},{type:"json"}),Oe)},Kn=function(Me,Oe){return pn((0,l.Z)((0,l.Z)({},Me),{},{type:"arrayBuffer"}),Oe)},Ei=function(Me,Oe){return pn((0,l.Z)((0,l.Z)({},Me),{},{method:"POST"}),Oe)};function Ji(ne){var Me=mn.document.createElement("a");return Me.href=ne,Me.protocol===mn.document.location.protocol&&Me.host===mn.document.location.host}var Yi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function oa(ne,Me){var Oe=new mn.Image,Ke=mn.URL||mn.webkitURL;Oe.crossOrigin="anonymous",Oe.onload=function(){Me(null,Oe),Ke.revokeObjectURL(Oe.src),Oe.onload=null,window.requestAnimationFrame(function(){Oe.src=Yi})},Oe.onerror=function(){return Me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var pt=new Blob([new Uint8Array(ne)],{type:"image/png"});Oe.src=ne.byteLength?Ke.createObjectURL(pt):Yi}function Ma(ne,Me){var Oe=new Blob([new Uint8Array(ne)],{type:"image/png"});createImageBitmap(Oe).then(function(Ke){Me(null,Ke)}).catch(function(Ke){Me(new Error("Could not load image because of ".concat(Ke.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var k=function(Me,Oe,Ke){var pt=function(Xr,An){if(Xr)Oe(Xr);else if(An){var mi=typeof createImageBitmap=="function",un=Ke?Ke(An):An;mi?Ma(un,Oe):oa(un,Oe)}};return Me.type==="json"?wn(Me,pt):Kn(Me,pt)},de;(function(ne){ne.CENTER="center",ne.TOP="top",ne["TOP-LEFT"]="top-left",ne["TOP-RIGHT"]="top-right",ne.BOTTOM="bottom",ne["BOTTOM-LEFT"]="bottom-left",ne["BOTTOM-RIGHT"]="bottom-right",ne.LEFT="left",ne.RIGHT="right"})(de||(de={}));var yt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ue(ne,Me,Oe){var Ke=ne.classList;for(var pt in yt)yt.hasOwnProperty(pt)&&Ke.remove("l7-".concat(Oe,"-anchor-").concat(pt));Ke.add("l7-".concat(Oe,"-anchor-").concat(Me))}var nr=m(37620);function Mr(ne){return typeof ne=="string"?!!nr.ZP(ne):!1}function qr(ne){var Me=nr.ZP(ne),Oe=[0,0,0,0];return Me!=null&&(Oe[0]=Me.r/255,Oe[1]=Me.g/255,Oe[2]=Me.b/255,Oe[3]=Me.opacity),Oe}function kn(ne){var Me=ne&&ne[0],Oe=ne&&ne[1],Ke=ne&&ne[2],pt=Me+Oe*256+Ke*65536-1;return pt}function Nn(ne){return[ne+1&255,ne+1>>8&255,ne+1>>8>>8&255]}function Mi(ne){var Me=mn.document.createElement("canvas"),Oe=Me.getContext("2d");Me.width=256,Me.height=1;for(var Ke=null,pt=Oe.createLinearGradient(0,0,256,1),Pt=ne.positions[0],Xr=ne.positions[ne.positions.length-1],An=0;An<ne.colors.length;++An){var mi=(ne.positions[An]-Pt)/(Xr-Pt);pt.addColorStop(mi,ne.colors[An])}if(Oe.fillStyle=pt,Oe.fillRect(0,0,256,1),er)return Ke=new Uint8ClampedArray(Oe.getImageData(0,0,256,1).data),Me=null,Oe=null,{data:Ke,width:256,height:1};Ke=Oe.getImageData(0,0,256,1).data;for(var un=Oe.createImageData(256,1),bi=0;bi<un.data.length;bi+=4)un.data[bi+0]=Ke[bi+0],un.data[bi+1]=Ke[bi+1],un.data[bi+2]=Ke[bi+2],un.data[bi+3]=Ke[bi+3];return Me=null,Oe=null,un}function Bi(ne,Me){var Oe=mn.document.createElement("canvas"),Ke=Oe.getContext("2d");Oe.width=256,Oe.height=1;for(var pt=Ke.createLinearGradient(0,0,256,1),Pt=Me[1]-Me[0],Xr=0;Xr<ne.colors.length;++Xr){var An=Math.max((ne.positions[Xr]-Me[0])/Pt,0);pt.addColorStop(An,ne.colors[Xr])}Ke.fillStyle=pt,Ke.fillRect(0,0,256,1);var mi=Ke.getImageData(0,0,256,1).data,un=Ko(Ke,mi);return Oe=null,Ke=null,un}function io(ne){var Me=mn.document.createElement("canvas"),Oe=Me.getContext("2d");Me.width=256,Me.height=1;var Ke=Oe.createImageData(256,1);return Ke.data.fill(0),ne.positions.forEach(function(pt,Pt){var Xr=qr(ne.colors[Pt]);Ke.data[pt*4+0]=Xr[0]*255,Ke.data[pt*4+1]=Xr[1]*255,Ke.data[pt*4+2]=Xr[2]*255,Ke.data[pt*4+3]=Xr[3]*255}),Me=null,Oe=null,Ke}function co(ne){var Me=mn.document.createElement("canvas"),Oe=Me.getContext("2d");Oe.globalAlpha=1,Me.width=256,Me.height=1;for(var Ke=256/ne.colors.length,pt=0;pt<ne.colors.length;pt++)Oe.beginPath(),Oe.lineWidth=2,Oe.strokeStyle=ne.colors[pt],Oe.moveTo(pt*Ke,0),Oe.lineTo((pt+1)*Ke,0),Oe.stroke();var Pt=Oe.getImageData(0,0,256,1).data,Xr=Ko(Oe,Pt);return Me=null,Oe=null,Xr}function Sa(ne,Me){var Oe=mn.document.createElement("canvas"),Ke=Oe.getContext("2d");Ke.globalAlpha=1,Oe.width=256,Oe.height=1;var pt=Me[1]-Me[0];ne.positions.length-ne.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var Pt=0;Pt<ne.colors.length;Pt++)Ke.beginPath(),Ke.lineWidth=2,Ke.strokeStyle=ne.colors[Pt],Ke.moveTo((ne.positions[Pt]-Me[0])/pt*255,0),Ke.lineTo((ne.positions[Pt+1]-Me[0])/pt*255,0),Ke.stroke();var Xr=Ke.getImageData(0,0,256,1).data,An=Ko(Ke,Xr);return Oe=null,Ke=null,An}function Ko(ne,Me){for(var Oe=ne.createImageData(256,1),Ke=0;Ke<Oe.data.length;Ke+=4)Oe.data[Ke+0]=Me[Ke+0],Oe.data[Ke+1]=Me[Ke+1],Oe.data[Ke+2]=Me[Ke+2],Oe.data[Ke+3]=Me[Ke+3];return Oe}function wo(ne){switch(ne.type){case"cat":return[0,255];default:return[0,1]}}var Oo={BACK:1029,FRONT:1028};function Ho(ne){switch(ne){case"GAODE1.x":return Oo.BACK;case"GAODE2.x":return Oo.BACK;case"MAPBOX":return Oo.FRONT;case"SIMPLE":return Oo.FRONT;case"GLOBEL":return Oo.BACK;case"DEBAULT":return Oo.FRONT;default:return Oo.FRONT}}var Io=m(74902),qs=m(97685),Il=m(96486);function Ao(ne){var Me=ne;return typeof ne=="string"&&(Me=mn.document.getElementById(ne)),Me}function Va(ne){return ne.trim?ne.trim():ne.replace(/^\s+|\s+$/g,"")}function gs(ne){return Va(ne).split(/\s+/)}function Ws(ne){var Me,Oe,Ke=mn==null||(Me=mn.document)===null||Me===void 0||(Oe=Me.documentElement)===null||Oe===void 0?void 0:Oe.style;if(!Ke)return ne[0];for(var pt in ne)if(ne[pt]&&ne[pt]in Ke)return ne[pt];return ne[0]}function bs(ne,Me,Oe){var Ke=mn.document.createElement(ne);return Me&&(Ke.className=Me||""),Oe&&Oe.appendChild(Ke),Ke}function Ps(ne){var Me=ne.parentNode;Me&&Me.removeChild(ne)}function Xs(ne,Me){if(ne.classList!==void 0)for(var Oe=gs(Me),Ke=0,pt=Oe.length;Ke<pt;Ke++)ne.classList.add(Oe[Ke]);else if(!jf(ne,Me)){var Pt=yl(ne);Mu(ne,(Pt?Pt+" ":"")+Me)}}function gl(ne,Me){ne.classList!==void 0?ne.classList.remove(Me):Mu(ne,Va((" "+yl(ne)+" ").replace(" "+Me+" "," ")))}function jf(ne,Me){if(ne.classList!==void 0)return ne.classList.contains(Me);var Oe=yl(ne);return Oe.length>0&&new RegExp("(^|\\s)"+Me+"(\\s|$)").test(Oe)}function Mu(ne,Me){ne instanceof HTMLElement?ne.className=Me:ne.className.baseVal=Me}function yl(ne){return ne instanceof SVGElement&&(ne=ne.correspondingElement),ne.className.baseVal===void 0?ne.className:ne.className.baseVal}function lc(ne){for(;ne&&ne.firstChild;)ne.removeChild(ne.firstChild)}var Lc=Ws(["transform","WebkitTransform"]);function dh(ne,Me){ne.style[Lc]=Me}function _l(){if(typeof Event=="function")mn.dispatchEvent(new Event("resize"));else{var ne=mn.document.createEvent("UIEvents");ne.initUIEvent("resize",!0,!1,mn,0),mn.dispatchEvent(ne)}}function Us(ne){var Me=["padding: "+(ne.height/2-8)+"px "+ne.width/2+"px;","line-height: "+ne.height+"px;","background-image: url("+ne.toDataURL()+");"];console.log(`%c
`,Me.join(""))}function th(){var ne,Me=mn.document.querySelector('meta[name="viewport"]');if(!Me)return 1;var Oe=(ne=Me.content)===null||ne===void 0?void 0:ne.split(","),Ke=Oe.find(function(pt){var Pt=pt.split("="),Xr=(0,qs.Z)(Pt,1),An=Xr[0];return An==="initial-scale"});return Ke?Ke.split("=")[1]*1:1}var kf=th()<1?1:mn.devicePixelRatio;function wf(ne,Me){ne.setAttribute("style","".concat(ne.style.cssText).concat(Me))}function lf(ne){return ne.split(";").map(function(Me){return Me.trim()}).filter(function(Me){return Me})}function gd(ne,Me){var Oe,Ke=lf((Oe=ne.getAttribute("style"))!==null&&Oe!==void 0?Oe:""),pt=lf(Me),Pt=Il.pull.apply(void 0,[Ke].concat((0,Io.Z)(pt)));ne.setAttribute("style",Pt.join(";"))}function Kh(ne){return Object.entries(ne).map(function(Me){var Oe=(0,qs.Z)(Me,2),Ke=Oe[0],pt=Oe[1];return"".concat(Ke,": ").concat(pt)}).join(";")}function yc(ne,Me){return{left:ne.left-Me.left,top:ne.top-Me.top,right:Me.left+Me.width-ne.left-ne.width,bottom:Me.top+Me.height-ne.top-ne.height}}function Eh(ne,Me){ne.checked=Me,Me?ne.setAttribute("checked","true"):ne.removeAttribute("checked")}function cf(ne){ne.innerHTML=""}function Af(ne){ne.setAttribute("draggable","false")}function _f(ne,Me){if(typeof Me=="string"){var Oe=document.createElement("div");for(Oe.innerHTML=Me;Oe.firstChild;)ne.append(Oe.firstChild)}else Array.isArray(Me)?ne.append.apply(ne,(0,Io.Z)(Me)):ne.append(Me)}function Dc(ne){return typeof ImageBitmap!="undefined"&&ne instanceof ImageBitmap}function Ff(){return typeof importScripts=="function"}var Zl=Ff()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},kc=navigator.userAgent,ad=!!kc.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),rh=kc.indexOf("Android")>-1||kc.indexOf("Adr")>-1;function od(){for(var ne=navigator.userAgent,Me=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],Oe=!0,Ke=0,pt=Me;Ke<pt.length;Ke++){var Pt=pt[Ke];if(ne.indexOf(Pt)>0){Oe=!1;break}}return Oe}var Yo=m(4942);function Gs(ne,Me){ne.forEach(function(Oe){Me[Oe]&&(Me[Oe]=Me[Oe].bind(Me))})}var Kl=function(){function ne(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;(0,R.Z)(this,ne),(0,Yo.Z)(this,"duration",16),(0,Yo.Z)(this,"timestamp",new Date().getTime()),this.duration=Me}return(0,$.Z)(ne,[{key:"run",value:function(Oe){var Ke=new Date().getTime(),pt=Ke-this.timestamp;this.timestamp=Ke,pt>=this.duration&&Oe()}}]),ne}(),dl=m(62096),su=m(1449);function Fc(ne){return typeof ne=="number"}var tc=2*Math.PI*6378137/2;function Tf(ne,Me){var Oe=(0,qs.Z)(Me,4),Ke=Oe[0],pt=Oe[1],Pt=Oe[2],Xr=Oe[3];return ne.lng>Ke&&ne.lng<=Pt&&ne.lat>pt&&ne.lat<=Xr}function _c(ne){var Me=[1/0,1/0,-1/0,-1/0];return ne.forEach(function(Oe){var Ke=Oe.coordinates;Hl(Me,Ke)}),Me}function Hl(ne,Me){return Array.isArray(Me[0])?Me.forEach(function(Oe){Hl(ne,Oe)}):(ne[0]>Me[0]&&(ne[0]=Me[0]),ne[1]>Me[1]&&(ne[1]=Me[1]),ne[2]<Me[0]&&(ne[2]=Me[0]),ne[3]<Me[1]&&(ne[3]=Me[1])),ne}function ff(ne,Me){return xc(ne,Me)}function xc(ne,Me){return Array.isArray(ne[0])?ne.map(function(Oe){return xc(Oe,Me)}):Me(ne)}function Yh(ne){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};ne=nh(ne,Me);var Ke=ne[0],pt=ne[1],Pt=Ke*tc/180,Xr=Math.log(Math.tan((90+pt)*Math.PI/360))/(Math.PI/180);return Xr=Xr*tc/180,Oe.enable&&(Pt=Number(Pt.toFixed(Oe.decimal)),Xr=Number(Xr.toFixed(Oe.decimal))),ne.length===3?[Pt,Xr,ne[2]]:[Pt,Xr]}function Uh(ne){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Oe=ne[0],Ke=ne[1],pt=Oe/tc*180,Pt=Ke/tc*180;return Pt=180/Math.PI*(2*Math.atan(Math.exp(Pt*Math.PI/180))-Math.PI/2),Me!=null&&(pt=Number(pt.toFixed(Me)),Pt=Number(Pt.toFixed(Me))),ne.length===3?[pt,Pt,ne[2]]:[pt,Pt]}function Gc(ne){if(ne==null)throw new Error("lng is required");return(ne>180||ne<-180)&&(ne=ne%360,ne>180&&(ne=-360+ne),ne<-180&&(ne=360+ne),ne===0&&(ne=0)),ne}function Mf(ne){if(ne==null)throw new Error("lat is required");return(ne>90||ne<-90)&&(ne=ne%180,ne>90&&(ne=-180+ne),ne<-90&&(ne=180+ne),ne===0&&(ne=0)),ne}function nh(ne,Me){if(Me===!1)return ne;var Oe=Gc(ne[0]),Ke=Mf(ne[1]);return Ke>85&&(Ke=85),Ke<-85&&(Ke=-85),ne.length===3?[Oe,Ke,ne[2]]:[Oe,Ke]}function Qn(ne){var Me=85.0511287798,Oe=Math.max(Math.min(Me,ne[1]),-Me),Ke=256<<20,pt=Math.PI/180,Pt=ne[0]*pt,Xr=Oe*pt;Xr=Math.log(Math.tan(Math.PI/4+Xr/2));var An=.5/Math.PI,mi=.5,un=-.5/Math.PI;return pt=.5,Pt=Ke*(An*Pt+mi),Xr=Ke*(un*Xr+pt),[Math.floor(Pt),Math.floor(Xr)]}function fa(ne){var Me=.5/Math.PI,Oe=.5,Ke=-.5/Math.PI,pt=.5,Pt=256<<20,Xr=(0,qs.Z)(ne,2),An=Xr[0],mi=Xr[1];An=(An/Pt-Oe)/Me,mi=(mi/Pt-pt)/Ke,mi=(Math.atan(Math.pow(Math.E,mi))-Math.PI/4)*2,pt=Math.PI/180;var un=mi/pt,bi=An/pt;return[bi,un]}function $i(ne,Me){var Oe=85.0511287798,Ke=Math.PI/180,pt=6378137;return Me=Math.max(Math.min(Oe,Me),-Oe),ne*=Ke,Me*=Ke,Me=Math.log(Math.tan(Math.PI/4+Me/2)),[ne*pt,Me*pt]}function $o(ne,Me){var Oe=Math.PI/180,Ke=6378137,pt=ne/Ke/Oe,Pt=2*(Math.atan(Math.exp(Me/Ke))-Math.PI/4)/Oe;return[pt,Pt]}function lo(ne,Me,Oe){var Ke=(0,su.Ht)(Me[1]-ne[1]),pt=(0,su.Ht)(Me[0]-ne[0]),Pt=(0,su.Ht)(ne[1]),Xr=(0,su.Ht)(Me[1]),An=Math.pow(Math.sin(Ke/2),2)+Math.pow(Math.sin(pt/2),2)*Math.cos(Pt)*Math.cos(Xr);return(0,su.DL)(2*Math.atan2(Math.sqrt(An),Math.sqrt(1-An)),Oe="meters")}function Es(ne){var Me=Math.PI/180,Oe=85.0511287798,Ke=6378137,pt=Math.max(Math.min(Oe,ne[1]),-Oe),Pt=Math.sin(pt*Me),Xr=Ke*ne[0]*Me,An=Ke*Math.log((1+Pt)/(1-Pt))/2;return[Xr,An]}function tl(ne,Me){var Oe=Math.abs(ne[1][1]-ne[0][1])*Me,Ke=Math.abs(ne[1][0]-ne[0][0])*Me;return[[ne[0][0]-Ke,ne[0][1]-Oe],[ne[1][0]+Ke,ne[1][1]+Oe]]}function al(ne,Me){return ne[0][0]<=Me[0][0]&&ne[0][1]<=Me[0][1]&&ne[1][0]>=Me[1][0]&&ne[1][1]>=Me[1][1]}function Tl(ne){return[[ne[0],ne[1]],[ne[2],ne[3]]]}function Lh(ne){var Me=xf(ne,[0,0]);return[ne[0]/Me,ne[1]/Me]}function xf(ne,Me){return Math.sqrt(Math.pow(ne[0]-Me[0],2)+Math.pow(ne[1]-Me[1],2))}function Qh(ne,Me){return ne[0]*Me[0]+ne[1]*Me[1]}function $h(ne){return Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1])}function Ul(ne,Me){return Math.acos(Qh(ne,Me)/($h(ne)*$h(Me)))*180/Math.PI}function Rl(ne,Me){return Me[0]>0?Me[1]>0?90-Math.atan(Me[1]/Me[0])*180/Math.PI:90+Math.atan(-Me[1]/Me[0])*180/Math.PI:Me[1]<0?180+(90-Math.atan(Me[1]/Me[0])*180/Math.PI):270+Math.atan(Me[1]/-Me[0])*180/Math.PI}function ol(ne){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!ne||ne.length<2)){for(var Oe=[0,1],Ke=0,pt=[],Pt=0;Pt<ne.length-1;Pt++){var Xr=ne[Pt],An=ne[Pt+1],mi=xf(Xr,An);Ke+=mi;var un=[Xr[0]-An[0],Xr[1]-An[1]],bi=Rl(Oe,un);if(Pt>0){var ga=pt[Pt-1].rotation;ga-bi>360-ga+bi&&(bi=bi+360)}pt.push({start:Xr,end:An,dis:mi,rotation:bi,duration:0})}return pt.map(function(ss){ss.duration=Me*(ss.dis/Ke)}),pt}}function uu(ne){if(Fc(ne[0]))return ne;if(Fc(ne[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Fc(ne[0][0][0])){var Me=ne,Oe=0,Ke=0,pt=0;return Me.forEach(function(Pt){Pt.forEach(function(Xr){Oe+=Xr[0],Ke+=Xr[1],pt++})}),[Oe/pt,Ke/pt,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Bc(ne){for(var Me=ne[0],Oe=ne[1],Ke=ne[0],pt=ne[1],Pt=0,Xr=0,An=0,mi=0;mi<ne.length;mi+=2){var un=ne[mi],bi=ne[mi+1];un&&bi&&(Me=Math.max(un,Me),Oe=Math.max(bi,Oe),Ke=Math.min(un,Ke),pt=Math.min(bi,pt),Pt+=un,Xr+=bi,An++)}return{center:[Pt/An,Xr/An],radius:Math.sqrt(Math.pow(Me-Ke,2)+Math.pow(Oe-pt,2))/2}}function cc(ne){return(0,dl.Z)((0,su.uf)([(0,su.Tu)(ne)]))}function ao(ne){var Me=131,Oe=137,Ke=0;ne+="x";for(var pt=Math.floor(9007199254740991/Oe),Pt=0;Pt<ne.length;Pt++)Ke>pt&&(Ke=Math.floor(Ke/Oe)),Ke=Ke*Me+ne.charCodeAt(Pt);return Ke}function Ml(ne){ne=ne.toString();for(var Me=5381,Oe=ne.length;Oe;)Me=Me*33^ne.charCodeAt(--Oe);return Me>>>0}function Hf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ne){var Me=Math.random()*16|0,Oe=ne==="x"?Me:Me&3|8;return Oe.toString(16)})}var fl;(function(ne){ne["GAODE1.x"]="GAODE1.x",ne["GAODE2.x"]="GAODE2.x",ne.MAPBOX="MAPBOX",ne.DEFAULT="DEFAUlTMAP",ne.SIMPLE="SIMPLE",ne.GLOBEL="GLOBEL"})(fl||(fl={}));function Vl(ne,Me,Oe,Ke,pt){var Pt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,Xr=arguments.length>6?arguments[6]:void 0,An=Oe;return Xr&&(An=Math.round(Oe*(Pt-1))/(Pt-1)),Ke?Yl(ne,Me,An,Ke,pt):Yl(ne,Me,An,.314,pt)}function Ll(ne,Me){var Oe=1-Me;return(ne[0]*Oe+ne[1]*Me)*Oe+(ne[1]*Oe+ne[2]*Me)*Me}function jh(ne,Me){return Math.sqrt(Math.pow(ne[0]-Me[0],2)+Math.pow(ne[1]-Me[1],2))}function Qa(ne,Me,Oe){var Ke=[Me[0]-ne[0],Me[1]-ne[1]],pt=jh(Ke,[0,0]),Pt=Math.atan2(Ke[1],Ke[0]),Xr=pt/2/Math.cos(Oe),An=Pt+Oe,mi=[Xr*Math.cos(An)+ne[0],Xr*Math.sin(An)+ne[1]];return mi}function Yl(ne,Me,Oe,Ke,pt){if(pt===fl["GAODE2.x"]){var Pt=$i(ne[0],ne[1]),Xr=$i(Me[0],Me[1]),An=Qa(Pt,Xr,Ke),mi=[Pt[0],An[0],Xr[0]],un=[Pt[1],An[1],Xr[1]];return[].concat((0,Io.Z)($o(Ll(mi,Oe),Ll(un,Oe))),[0])}else{var bi=Qa(ne,Me,Ke),ga=[ne[0],bi[0],Me[0]],ss=[ne[1],bi[1],Me[1]];return[Ll(ga,Oe),Ll(ss,Oe),0]}}function Vf(ne,Me,Oe,Ke,pt){var Pt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,Xr=arguments.length>6?arguments[6]:void 0,An=Oe;return Xr&&(An=Math.round(Oe*29)/29),Hh(ne,Me,An,pt)}function ih(ne,Me){var Oe=[Me[0]-ne[0],Me[1]-ne[1]],Ke=xf(Oe,[0,0]),pt=Math.atan2(Oe[1],Oe[0]),Pt=.314,Xr=Ke/2/Math.cos(Pt),An=pt+Pt,mi=[Xr*Math.cos(An)+ne[0],Xr*Math.sin(An)+ne[1]];return mi}function Vu(ne,Me){var Oe=1-Me;return(ne[0]*Oe+ne[1]*Me)*Oe+(ne[1]*Oe+ne[2]*Me)*Me}function hf(ne,Me){var Oe=[ne[0]-Me[0],ne[1]-Me[1]],Ke=[Math.sin(Oe[0]/2),Math.sin(Oe[1]/2)],pt=Ke[1]*Ke[1]+Math.cos(ne[1])*Math.cos(Me[1])*Ke[0]*Ke[0];return 2*Math.atan2(Math.sqrt(pt),Math.sqrt(1-pt))}function Hh(ne,Me,Oe,Ke){var pt=[(0,su.Ht)(ne[0]),(0,su.Ht)(ne[1])],Pt=[(0,su.Ht)(Me[0]),(0,su.Ht)(Me[1])];if(Ke==="GAODE2.x"){var Xr=ih(pt,Pt),An=[pt[0],Xr[0],Pt[0]],mi=[pt[1],Xr[1],Pt[1]];return[Vu(An,Oe),Vu(mi,Oe),0]}else{var un=hf(pt,Pt);if(Math.abs(un-Math.PI)<.001)return[(1-Oe)*pt[0]+Oe*Pt[0],(1-Oe)*pt[1]+Oe*Pt[1]];var bi=Math.sin((1-Oe)*un)/Math.sin(un),ga=Math.sin(Oe*un)/Math.sin(un),ss=[Math.sin(pt[0]),Math.sin(pt[1])],To=[Math.cos(pt[0]),Math.cos(pt[1])],Ro=[Math.sin(Pt[0]),Math.sin(Pt[1])],fs=[Math.cos(Pt[0]),Math.cos(Pt[1])],ps=bi*To[1]*To[0]+ga*fs[1]*fs[0],zo=bi*To[1]*ss[0]+ga*fs[1]*Ro[0],ks=bi*ss[1]+ga*Ro[1];return[(0,su.vi)(Math.atan2(zo,ps)),(0,su.vi)(Math.atan2(ks,Math.sqrt(ps*ps+zo*zo)))]}}function bc(ne,Me){for(var Oe=0,Ke=[],pt=0;pt<ne.length-1;pt++){var Pt=ne[pt],Xr=ne[pt+1],An=ah(Pt,Xr),mi=Oe;Oe+=An,Ke.push({p1:Pt,p2:Xr,totalDistance:Oe,distance:An,lastTotalDistance:mi})}for(var un=Oe*Me,bi,ga,ss=0,To=Ke;ss<To.length;ss++){var Ro=To[ss],fs=Ro.totalDistance;if(fs>un){var ps=Ro.p1,zo=Ro.p2,ks=(un-Ro.lastTotalDistance)/Ro.distance,xu=Ec(zo,ps,ks);bi=xu[0],ga=xu[1];break}}return{lng:bi,lat:ga,height:0}}function Ec(ne,Me,Oe){return[ne[0]*Oe+Me[0]*(1-Oe),ne[1]*Oe+Me[1]*(1-Oe)]}function ah(ne,Me){return Math.sqrt(Math.pow(ne[0]-Me[0],2)+Math.pow(ne[1]-Me[1],2))}function Wc(ne,Me){var Oe=Me.featureId,Ke=ne.data.dataArray;return typeof Oe=="number"&&(Ke=Ke.filter(function(pt){var Pt=pt.id;return Pt===Oe})),Ke.map(function(pt){var Pt=Sc(pt,Me);return(0,l.Z)((0,l.Z)({},pt),Pt)})}function Dh(ne,Me){return new Promise(function(Oe){ne.inited?Oe(Wc(ne,Me)):ne.once("update",function(){Oe(Wc(ne,Me))})})}function Sc(ne,Me){var Oe=Me.offset,Ke=Me.shape,pt=Me.thetaOffset,Pt=Me.mapVersion,Xr=Me.segmentNumber,An=Xr===void 0?30:Xr,mi=Me.autoFit,un=mi===void 0?!0:mi,bi=ne.coordinates;if(Ke==="line")return bc(bi,Oe);var ga=bi[0],ss=bi[1],To=typeof pt=="string"?ne[pt]||0:pt,Ro;switch(Ke){case"arc":Ro=Vl;break;case"greatcircle":Ro=Vf;break;default:Ro=Vl}var fs=Ro(ga,ss,Oe,To,Pt,An,un),ps=(0,qs.Z)(fs,3),zo=ps[0],ks=ps[1],xu=ps[2];return{lng:zo,lat:ks,height:xu}}var Vh=function(){function ne(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Oe=arguments.length>1?arguments[1]:void 0;(0,R.Z)(this,ne),this.limit=Me,this.destroy=Oe||this.defaultDestroy,this.order=[],this.clear()}return(0,$.Z)(ne,[{key:"clear",value:function(){var Oe=this;this.order.forEach(function(Ke){Oe.delete(Ke)}),this.cache={},this.order=[]}},{key:"get",value:function(Oe){var Ke=this.cache[Oe];return Ke&&(this.deleteOrder(Oe),this.appendOrder(Oe)),Ke}},{key:"set",value:function(Oe,Ke){this.cache[Oe]?(this.delete(Oe),this.cache[Oe]=Ke,this.appendOrder(Oe)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Oe]=Ke,this.appendOrder(Oe))}},{key:"delete",value:function(Oe){var Ke=this.cache[Oe];Ke&&(this.deleteCache(Oe),this.deleteOrder(Oe),this.destroy(Ke,Oe))}},{key:"deleteCache",value:function(Oe){delete this.cache[Oe]}},{key:"deleteOrder",value:function(Oe){var Ke=this.order.findIndex(function(pt){return pt===Oe});Ke>=0&&this.order.splice(Ke,1)}},{key:"appendOrder",value:function(Oe){this.order.push(Oe)}},{key:"defaultDestroy",value:function(Oe,Ke){return null}}]),ne}();function Ql(ne){if(ne.length===0)throw new Error("max requires at least one data point");for(var Me=ne[0],Oe=1;Oe<ne.length;Oe++)ne[Oe]>Me&&(Me=ne[Oe]);return Me*1}function gu(ne){if(ne.length===0)throw new Error("min requires at least one data point");for(var Me=ne[0],Oe=1;Oe<ne.length;Oe++)ne[Oe]<Me&&(Me=ne[Oe]);return Me*1}function Ks(ne){if(ne.length===0)return 0;for(var Me=ne[0]*1,Oe=1;Oe<ne.length;Oe++)Me+=ne[Oe]*1;return Me}function Gf(ne){if(ne.length===0)throw new Error("mean requires at least one data point");return Ks(ne)/ne.length}function Bf(ne){if(ne.length===0)throw new Error("mean requires at least one data point");if(ne.length<3)return ne[0];ne.sort();for(var Me=ne[0],Oe=NaN,Ke=0,pt=1,Pt=1;Pt<ne.length+1;Pt++)ne[Pt]!==Me?(pt>Ke&&(Ke=pt,Oe=Me),pt=1,Me=ne[Pt]):pt++;return Oe*1}var eu={min:gu,max:Ql,mean:Gf,sum:Ks,mode:Bf};function Pl(ne,Me){return ne.map(function(Oe){return Oe[Me]})}function Xc(ne,Me){return eu[ne](Me)}function Nc(ne,Me){return{enable:ne,mask:255,func:{cmp:514,ref:Me?1:0,mask:255}}}var Jl=m(15861),fc=m(64687),oo=m.n(fc),ko=m(95),nu=m(26729),ql=m.n(nu),xl;(function(ne){ne.Realtime="realtime",ne.Overlap="overlap",ne.Replace="replace"})(xl||(xl={}));var mu;(function(ne){ne.Loading="Loading",ne.Loaded="Loaded",ne.Failure="Failure",ne.Cancelled="Cancelled"})(mu||(mu={}));var Ku=0,Kc=1,Gh=2;function Yu(ne){ne.forEach(function(Me){Me.isCurrent&&(Me.isVisible=Me.isLoaded)})}function bl(ne){ne.forEach(function(Me){Me.properties.state=Ku}),ne.forEach(function(Me){Me.isCurrent&&!ph(Me)&&Cc(Me)}),ne.forEach(function(Me){Me.isVisible=Boolean(Me.properties.state&Gh)})}function yd(ne){ne.forEach(function(Oe){Oe.properties.state=Ku}),ne.forEach(function(Oe){Oe.isCurrent&&ph(Oe)});var Me=ne.slice().sort(function(Oe,Ke){return Oe.z-Ke.z});Me.forEach(function(Oe){Oe.isVisible=Boolean(Oe.properties.state&Gh),Oe.children.length&&(Oe.isVisible||Oe.properties.state&Kc)?Oe.children.forEach(function(Ke){Ke.properties.state=Kc}):Oe.isCurrent&&Cc(Oe)})}function ph(ne){for(;ne;){if(ne.isLoaded)return ne.properties.state|=Gh,!0;ne=ne.parent}return!1}function Cc(ne){ne.children.forEach(function(Me){Me.isLoaded?Me.properties.state|=Gh:Cc(Me)})}var Yc,Dl=256,Ur=[-1/0,-1/0,1/0,1/0],kl=.2,Vo=5,Qo=(Yc={},(0,Yo.Z)(Yc,xl.Realtime,Yu),(0,Yo.Z)(Yc,xl.Overlap,bl),(0,Yo.Z)(Yc,xl.Replace,yd),Yc),du=function(){};function kh(ne,Me,Oe){var Ke=Math.floor((ne+180)/360*Math.pow(2,Oe)),pt=Math.floor((1-Math.log(Math.tan(Me*Math.PI/180)+1/Math.cos(Me*Math.PI/180))/Math.PI)/2*Math.pow(2,Oe));return[Ke,pt]}function Wf(ne,Me,Oe){var Ke=ne/Math.pow(2,Oe)*360-180,pt=Math.PI-2*Math.PI*Me/Math.pow(2,Oe),Pt=180/Math.PI*Math.atan(.5*(Math.exp(pt)-Math.exp(-pt)));return[Ke,Pt]}var zc=function(Me,Oe,Ke){var pt=Wf(Me,Oe,Ke),Pt=(0,qs.Z)(pt,2),Xr=Pt[0],An=Pt[1],mi=Wf(Me+1,Oe+1,Ke),un=(0,qs.Z)(mi,2),bi=un[0],ga=un[1];return[Xr,ga,bi,An]};function df(ne){var Me=ne.zoom,Oe=ne.latLonBounds,Ke=ne.maxZoom,pt=Ke===void 0?1/0:Ke,Pt=ne.minZoom,Xr=Pt===void 0?0:Pt,An=ne.zoomOffset,mi=An===void 0?0:An,un=ne.extent,bi=un===void 0?Ur:un,ga=Math.ceil(Me)+mi;if(Number.isFinite(Xr)&&ga<Xr)return[];Number.isFinite(pt)&&ga>pt&&(ga=pt);for(var ss=(0,qs.Z)(Oe,4),To=ss[0],Ro=ss[1],fs=ss[2],ps=ss[3],zo=[Math.max(To,bi[0]),Math.max(Ro,bi[1]),Math.min(fs,bi[2]),Math.min(ps,bi[3])],ks=[],xu=kh(zo[0],zo[1],ga),cu=(0,qs.Z)(xu,2),tf=cu[0],$c=cu[1],ac=kh(zo[2],zo[3],ga),ll=(0,qs.Z)(ac,2),Cu=ll[0],Sl=ll[1],Wl=tf;Wl<=Cu;Wl++)for(var Pc=Sl;Pc<=$c;Pc++)ks.push({x:Wl,y:Pc,z:ga});var jc=(Cu+tf)/2,hu=($c+Sl)/2,_h=function(ud,Hd){return Math.abs(ud-jc)+Math.abs(Hd-hu)};return ks.sort(function(Oc,ud){return _h(Oc.x,Oc.y)-_h(ud.x,ud.y)}),ks}var rc=function(Me,Oe,Ke){var pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,Pt=Math.pow(2,Ke),Xr=Pt-1,An=Pt,mi=Me,un=Oe;return pt&&(mi<0?mi=mi+An:mi>Xr&&(mi=mi%An)),{warpX:mi,warpY:un}};function ys(ne){var Me=bf();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function bf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var Xf=function(ne){(0,z.Z)(Oe,ne);var Me=ys(Oe);function Oe(Ke){var pt;(0,R.Z)(this,Oe),pt=Me.call(this),(0,Yo.Z)((0,_e.Z)(pt),"tileSize",256),(0,Yo.Z)((0,_e.Z)(pt),"isVisible",!1),(0,Yo.Z)((0,_e.Z)(pt),"isCurrent",!1),(0,Yo.Z)((0,_e.Z)(pt),"isVisibleChange",!1),(0,Yo.Z)((0,_e.Z)(pt),"loadedLayers",0),(0,Yo.Z)((0,_e.Z)(pt),"isLayerLoaded",!1),(0,Yo.Z)((0,_e.Z)(pt),"isLoad",!1),(0,Yo.Z)((0,_e.Z)(pt),"isChildLoad",!1),(0,Yo.Z)((0,_e.Z)(pt),"parent",null),(0,Yo.Z)((0,_e.Z)(pt),"children",[]),(0,Yo.Z)((0,_e.Z)(pt),"data",null),(0,Yo.Z)((0,_e.Z)(pt),"properties",{}),(0,Yo.Z)((0,_e.Z)(pt),"loadDataId",0);var Pt=Ke.x,Xr=Ke.y,An=Ke.z,mi=Ke.tileSize,un=Ke.warp,bi=un===void 0?!0:un;return pt.x=Pt,pt.y=Xr,pt.z=An,pt.warp=bi||!0,pt.tileSize=mi,pt}return(0,$.Z)(Oe,[{key:"isLoading",get:function(){return this.loadStatus===mu.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===mu.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===mu.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===mu.Cancelled}},{key:"isDone",get:function(){return[mu.Loaded,mu.Cancelled,mu.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return zc(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var pt=(0,qs.Z)(this.bounds,4),Pt=pt[0],Xr=pt[1],An=pt[2],mi=pt[3],un=[(An-Pt)/2,(mi-Xr)/2],bi=(0,ko.Z)(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:un,meta:`
      `.concat(this.key,`
      `)}});return bi}},{key:"key",get:function(){var pt="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return pt}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var Ke=(0,Jl.Z)(oo().mark(function Pt(Xr){var An,mi,un,bi,ga,ss,To,Ro,fs,ps,zo,ks,xu,cu,tf,$c,ac;return oo().wrap(function(Cu){for(;;)switch(Cu.prev=Cu.next){case 0:return An=Xr.getData,mi=Xr.onLoad,un=Xr.onError,this.loadDataId++,bi=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=mu.Loading,ga=null,Cu.prev=7,To=this.x,Ro=this.y,fs=this.z,ps=this.bounds,zo=this.tileSize,ks=this.warp,xu=rc(To,Ro,fs,ks),cu=xu.warpX,tf=xu.warpY,$c=this.abortController.signal,ac={x:cu,y:tf,z:fs,bounds:ps,tileSize:zo,signal:$c,warp:ks},Cu.next=14,An(ac,this);case 14:ga=Cu.sent,Cu.next=20;break;case 17:Cu.prev=17,Cu.t0=Cu.catch(7),ss=Cu.t0;case 20:if(bi===this.loadDataId){Cu.next=22;break}return Cu.abrupt("return");case 22:if(!(this.isCancelled&&!ga)){Cu.next=24;break}return Cu.abrupt("return");case 24:if(!(ss||!ga)){Cu.next=28;break}return this.loadStatus=mu.Failure,un(ss,this),Cu.abrupt("return");case 28:this.loadStatus=mu.Loaded,this.data=ga,mi(this);case 31:case"end":return Cu.stop()}},Pt,this,[[7,17]])}));function pt(Pt){return Ke.apply(this,arguments)}return pt}()},{key:"reloadData",value:function(pt){this.isLoading&&this.abortLoad(),this.loadData(pt)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=mu.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),Oe}(nu.EventEmitter),rl=function(Me,Oe){var Ke=Tl(Me),pt=tl(Ke,Oe),Pt=360*3-180,Xr=85.0511287798065,An=[Math.max(pt[0][0],-Pt),Math.max(pt[0][1],-Xr),Math.min(pt[1][0],Pt),Math.min(pt[1][1],Xr)];return An},wc=function(Me,Oe){var Ke=Tl(Me),pt=Tl(Oe),Pt=al(Ke,pt);return Pt};function Zc(ne,Me){var Oe=typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(!Oe){if(Array.isArray(ne)||(Oe=sd(ne))||Me&&ne&&typeof ne.length=="number"){Oe&&(ne=Oe);var Ke=0,pt=function(){};return{s:pt,n:function(){return Ke>=ne.length?{done:!0}:{done:!1,value:ne[Ke++]}},e:function(un){throw un},f:pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pt=!0,Xr=!1,An;return{s:function(){Oe=Oe.call(ne)},n:function(){var un=Oe.next();return Pt=un.done,un},e:function(un){Xr=!0,An=un},f:function(){try{!Pt&&Oe.return!=null&&Oe.return()}finally{if(Xr)throw An}}}}function sd(ne,Me){if(ne){if(typeof ne=="string")return Qc(ne,Me);var Oe=Object.prototype.toString.call(ne).slice(8,-1);if(Oe==="Object"&&ne.constructor&&(Oe=ne.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(ne);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return Qc(ne,Me)}}function Qc(ne,Me){(Me==null||Me>ne.length)&&(Me=ne.length);for(var Oe=0,Ke=new Array(Me);Oe<Me;Oe++)Ke[Oe]=ne[Oe];return Ke}function f(ne){var Me=g();return function(){var Ke=(0,T.Z)(ne),pt;if(Me){var Pt=(0,T.Z)(this).constructor;pt=Reflect.construct(Ke,arguments,Pt)}else pt=Ke.apply(this,arguments);return(0,L.Z)(this,pt)}}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}var p=function(ne){(0,z.Z)(Oe,ne);var Me=f(Oe);function Oe(Ke){var pt;return(0,R.Z)(this,Oe),pt=Me.call(this),(0,Yo.Z)((0,_e.Z)(pt),"currentTiles",[]),(0,Yo.Z)((0,_e.Z)(pt),"cacheTiles",new Map),(0,Yo.Z)((0,_e.Z)(pt),"throttleUpdate",(0,Il.throttle)(function(Pt,Xr){pt.update(Pt,Xr)},16)),(0,Yo.Z)((0,_e.Z)(pt),"onTileLoad",function(Pt){pt.emit("tile-loaded",Pt),pt.updateTileVisible()}),(0,Yo.Z)((0,_e.Z)(pt),"onTileError",function(Pt,Xr){pt.emit("tile-error",{error:Pt,tile:Xr}),pt.updateTileVisible()}),(0,Yo.Z)((0,_e.Z)(pt),"onTileUnload",function(Pt){pt.emit("tile-unload",Pt)}),pt.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Ur,getTileData:du,warp:!0,updateStrategy:xl.Overlap},pt.updateOptions(Ke),pt}return(0,$.Z)(Oe,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(pt){return pt.isDone})}},{key:"tiles",get:function(){var pt=Array.from(this.cacheTiles.values()).sort(function(Pt,Xr){return Pt.z-Xr.z});return pt}},{key:"updateOptions",value:function(pt){var Pt=pt.minZoom===void 0?this.options.minZoom:Math.ceil(pt.minZoom),Xr=pt.maxZoom===void 0?this.options.maxZoom:Math.floor(pt.maxZoom);this.options=(0,l.Z)((0,l.Z)((0,l.Z)({},this.options),pt),{},{minZoom:Pt,maxZoom:Xr})}},{key:"update",value:function(pt,Pt){var Xr=this,An=Math.max(0,Math.ceil(pt));if(!(this.lastViewStates&&this.lastViewStates.zoom===An&&wc(this.lastViewStates.latLonBoundsBuffer,Pt))){var mi=rl(Pt,kl);this.lastViewStates={zoom:An,latLonBounds:Pt,latLonBoundsBuffer:mi};var un=!1,bi=this.getTileIndices(An,mi).filter(function(ga){return Xr.options.warp||ga.x>=0&&ga.x<Math.pow(2,An)});this.currentTiles=bi.map(function(ga){var ss=ga.x,To=ga.y,Ro=ga.z,fs=Xr.getTile(ss,To,Ro);if(fs){var ps,zo,ks=((ps=fs)===null||ps===void 0?void 0:ps.isFailure)||((zo=fs)===null||zo===void 0?void 0:zo.isCancelled);return ks&&fs.loadData({getData:Xr.options.getTileData,onLoad:Xr.onTileLoad,onError:Xr.onTileError}),fs}return fs=Xr.createTile(ss,To,Ro),un=!0,fs}),un&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var pt=Zc(this.cacheTiles),Pt;try{for(pt.s();!(Pt=pt.n()).done;){var Xr=(0,qs.Z)(Pt.value,2),An=Xr[0],mi=Xr[1];this.currentTiles.includes(mi)||(this.cacheTiles.delete(An),this.onTileUnload(mi)),this.onTileUnload(mi),mi.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(un){pt.e(un)}finally{pt.f()}}},{key:"pruneRequests",value:function(){var pt=[],Pt=Zc(this.cacheTiles.values()),Xr;try{for(Pt.s();!(Xr=Pt.n()).done;){var An=Xr.value;An.isLoading&&!An.isCurrent&&!An.isVisible&&pt.push(An)}}catch(un){Pt.e(un)}finally{Pt.f()}for(;pt.length>0;){var mi=pt.shift();mi.abortLoad()}}},{key:"getTileByLngLat",value:function(pt,Pt,Xr){var An=this.options.zoomOffset,mi=Math.ceil(Xr)+An,un=kh(pt,Pt,mi),bi=this.tiles.filter(function(ga){return ga.key==="".concat(un[0],"_").concat(un[1],"_").concat(mi)});return bi[0]}},{key:"destroy",value:function(){var pt=Zc(this.cacheTiles.values()),Pt;try{for(pt.s();!(Pt=pt.n()).done;){var Xr=Pt.value;Xr.isLoading&&Xr.abortLoad()}}catch(An){pt.e(An)}finally{pt.f()}this.cacheTiles.clear(),this.currentTiles=[],this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var pt=this.options.updateStrategy,Pt=new Map,Xr=Zc(this.cacheTiles.values()),An;try{for(Xr.s();!(An=Xr.n()).done;){var mi=An.value;Pt.set(mi.key,mi.isVisible),mi.isCurrent=!1,mi.isVisible=!1}}catch(Ro){Xr.e(Ro)}finally{Xr.f()}var un=Zc(this.currentTiles),bi;try{for(un.s();!(bi=un.n()).done;){var ga=bi.value;ga.isCurrent=!0,ga.isVisible=!0}}catch(Ro){un.e(Ro)}finally{un.f()}var ss=Array.from(this.cacheTiles.values());typeof pt=="function"?pt(ss):Qo[pt](ss);var To=!1;Array.from(this.cacheTiles.values()).forEach(function(Ro){Ro.isVisible!==Pt.get(Ro.key)?(Ro.isVisibleChange=!0,To=!0):Ro.isVisibleChange=!1}),To&&this.emit("tile-update")}},{key:"getTileIndices",value:function(pt,Pt){var Xr=this.options,An=Xr.tileSize,mi=Xr.extent,un=Xr.zoomOffset,bi=Math.floor(this.options.maxZoom),ga=Math.ceil(this.options.minZoom),ss=df({maxZoom:bi,minZoom:ga,zoomOffset:un,tileSize:An,zoom:pt,latLonBounds:Pt,extent:mi});return ss}},{key:"getTileId",value:function(pt,Pt,Xr){var An="".concat(pt,",").concat(Pt,",").concat(Xr);return An}},{key:"getTile",value:function(pt,Pt,Xr){var An=this.getTileId(pt,Pt,Xr),mi=this.cacheTiles.get(An);return mi}},{key:"createTile",value:function(pt,Pt,Xr){var An=this.getTileId(pt,Pt,Xr),mi=new Xf({x:pt,y:Pt,z:Xr,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(An,mi),mi.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),mi}},{key:"resizeCacheTiles",value:function(){var pt=Vo*this.currentTiles.length,Pt=this.cacheTiles.size>pt;if(Pt){var Xr=Zc(this.cacheTiles),An;try{for(Xr.s();!(An=Xr.n()).done;){var mi=(0,qs.Z)(An.value,2),un=mi[0],bi=mi[1];if(!bi.isVisible&&!this.currentTiles.includes(bi)&&(this.cacheTiles.delete(un),this.onTileUnload(bi)),this.cacheTiles.size<=pt)break}}catch(ga){Xr.e(ga)}finally{Xr.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var pt=Zc(this.cacheTiles.values()),Pt;try{for(pt.s();!(Pt=pt.n()).done;){var Xr=Pt.value;Xr.parent=null,Xr.children.length=0}}catch(ga){pt.e(ga)}finally{pt.f()}var An=Zc(this.cacheTiles.values()),mi;try{for(An.s();!(mi=An.n()).done;){var un=mi.value,bi=this.getNearestAncestor(un.x,un.y,un.z);un.parent=bi,bi!=null&&bi.children&&bi.children.push(un)}}catch(ga){An.e(ga)}finally{An.f()}}},{key:"getNearestAncestor",value:function(pt,Pt,Xr){for(;Xr>this.options.minZoom;){pt=Math.floor(pt/2),Pt=Math.floor(Pt/2),Xr=Xr-1;var An=this.getTile(pt,Pt,Xr);if(An)return An}return null}}]),Oe}(ql());function E(ne){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(ne)}function Y(ne){var Me=[],Oe=/\{([a-z])-([a-z])\}/.exec(ne);if(Oe){var Ke=Oe[1].charCodeAt(0),pt=Oe[2].charCodeAt(0),Pt;for(Pt=Ke;Pt<=pt;++Pt)Me.push(ne.replace(Oe[0],String.fromCharCode(Pt)));return Me}if(Oe=/\{(\d+)-(\d+)\}/.exec(ne),Oe){for(var Xr=parseInt(Oe[2],10),An=parseInt(Oe[1],10);An<=Xr;An++)Me.push(ne.replace(Oe[0],An.toString()));return Me}return Me.push(ne),Me}function ye(ne,Me){if(!ne||!ne.length)throw new Error("url is not allowed to be empty");var Oe=Me.x,Ke=Me.y,pt=Me.z,Pt=Y(ne),Xr=Math.abs(Oe+Ke)%Pt.length,An=Pt[Xr];return An.replace(/\{x\}/g,Oe.toString()).replace(/\{y\}/g,Ke.toString()).replace(/\{z\}/g,pt.toString()).replace(/\{bbox\}/g,zc(Oe,Ke,pt).join(",")).replace(/\{-y\}/g,(Math.pow(2,pt)-Ke-1).toString())}function Pe(ne,Me){var Oe=Me.x,Ke=Me.y,pt=Me.z,Pt=Me.layer,Xr=Me.version,An=Xr===void 0?"1.0.0":Xr,mi=Me.style,un=mi===void 0?"default":mi,bi=Me.format,ga=Me.service,ss=ga===void 0?"WMTS":ga,To=Me.tileMatrixset,Ro="".concat(ne,"&SERVICE=").concat(ss,"&REQUEST=GetTile&VERSION=").concat(An,"&LAYER=").concat(Pt,"&STYLE=").concat(un,"&TILEMATRIXSET=").concat(To,"&FORMAT=").concat(bi,"&TILECOL=").concat(Oe,"&TILEROW=").concat(Ke,"&TILEMATRIX=").concat(pt);return Ro}function ct(ne,Me){if(!ne)throw new Error(Me||"web worker helper assertion failed.")}var Vt={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},fr=Vt.self||Vt.window||{},Ir=Vt.window||Vt.self||{},Dr=Vt.self||Vt.window||{},jr=Vt.document||{},En=typeof importScripts=="function",gn=typeof window!="undefined"&&typeof window.orientation!="undefined",Bn=function(){function ne(Me,Oe){var Ke=this;this.name=Me,this.workerThread=Oe,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(pt,Pt){Ke.resolve=pt,Ke.reject=Pt})}return ne.prototype.postMessage=function(Me,Oe){this.workerThread.postMessage({source:"Main thread",type:Me,payload:Oe})},ne.prototype.done=function(Me){ct(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(Me)},ne.prototype.error=function(Me){ct(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(Me)},ne}(),fn=Bn,Fn=new Map;function jn(ne){ct(ne.source&&!ne.url||!ne.source&&ne.url);var Me=Fn.get(ne.source||ne.url);return Me||(ne.url&&(Me=vi(ne.url),Fn.set(ne.url,Me)),ne.source&&(Me=ki(ne.source),Fn.set(ne.source,Me))),ct(Me),Me}function vi(ne){if(!ne.startsWith("http"))return ne;var Me=Ti(ne);return ki(Me)}function ki(ne){var Me=new Blob([ne],{type:"application/javascript"});return URL.createObjectURL(Me)}function Ti(ne){return`try {
  importScripts('`+ne+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function Fi(ne,Me,Oe){Me===void 0&&(Me=!0);var Ke=Oe||new Set;if(ne){if(na(ne))Ke.add(ne);else if(na(ne.buffer))Ke.add(ne.buffer);else if(!ArrayBuffer.isView(ne)){if(Me&&typeof ne=="object")for(var pt in ne)Fi(ne[pt],Me,Ke)}}return Oe===void 0?Array.from(Ke):[]}function na(ne){return ne?ne instanceof ArrayBuffer||typeof MessagePort!="undefined"&&ne instanceof MessagePort||typeof ImageBitmap!="undefined"&&ne instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&ne instanceof OffscreenCanvas:!1}var ka=function(){},Na=function(){function ne(Me){this.terminated=!1,this.loadableURL="";var Oe=Me.name,Ke=Me.source,pt=Me.url;ct(Ke||pt),this.name=Oe,this.source=Ke,this.url=pt,this.onMessage=ka,this.onError=function(Pt){return console.log(Pt)},this.worker=this.createBrowserWorker()}return ne.isSupported=function(){return typeof Worker!="undefined"},ne.prototype.destroy=function(){this.onMessage=ka,this.onError=ka,this.worker.terminate(),this.terminated=!0},Object.defineProperty(ne.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),ne.prototype.postMessage=function(Me,Oe){Oe=Oe||Fi(Me),this.worker.postMessage(Me,Oe)},ne.prototype.getErrorFromErrorEvent=function(Me){var Oe="Failed to load ";return Oe+="worker "+this.name+" from "+this.url+". ",Me.message&&(Oe+=Me.message+" in "),Me.lineno&&(Oe+=":"+Me.lineno+":"+Me.colno),new Error(Oe)},ne.prototype.createBrowserWorker=function(){var Me=this;this.loadableURL=jn({source:this.source,url:this.url});var Oe=new Worker(this.loadableURL,{name:this.name});return Oe.onmessage=function(Ke){Ke.data?Me.onMessage(Ke.data):Me.onError(new Error("No data received"))},Oe.onerror=function(Ke){Me.onError(Me.getErrorFromErrorEvent(Ke)),Me.terminated=!0},Oe.onmessageerror=function(Ke){return console.error("worker "+Me.name+", message error: "+Ke)},Oe},ne}(),po=Na,No=function(){return No=Object.assign||function(ne){for(var Me,Oe=1,Ke=arguments.length;Oe<Ke;Oe++){Me=arguments[Oe];for(var pt in Me)Object.prototype.hasOwnProperty.call(Me,pt)&&(ne[pt]=Me[pt])}return ne},No.apply(this,arguments)},is=function(ne,Me,Oe,Ke){function pt(Pt){return Pt instanceof Oe?Pt:new Oe(function(Xr){Xr(Pt)})}return new(Oe||(Oe=Promise))(function(Pt,Xr){function An(bi){try{un(Ke.next(bi))}catch(ga){Xr(ga)}}function mi(bi){try{un(Ke.throw(bi))}catch(ga){Xr(ga)}}function un(bi){bi.done?Pt(bi.value):pt(bi.value).then(An,mi)}un((Ke=Ke.apply(ne,Me||[])).next())})},rs=function(ne,Me){var Oe={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Ke,pt,Pt,Xr;return Xr={next:An(0),throw:An(1),return:An(2)},typeof Symbol=="function"&&(Xr[Symbol.iterator]=function(){return this}),Xr;function An(un){return function(bi){return mi([un,bi])}}function mi(un){if(Ke)throw new TypeError("Generator is already executing.");for(;Oe;)try{if(Ke=1,pt&&(Pt=un[0]&2?pt.return:un[0]?pt.throw||((Pt=pt.return)&&Pt.call(pt),0):pt.next)&&!(Pt=Pt.call(pt,un[1])).done)return Pt;switch(pt=0,Pt&&(un=[un[0]&2,Pt.value]),un[0]){case 0:case 1:Pt=un;break;case 4:return Oe.label++,{value:un[1],done:!1};case 5:Oe.label++,pt=un[1],un=[0];continue;case 7:un=Oe.ops.pop(),Oe.trys.pop();continue;default:if(Pt=Oe.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(un[0]===6||un[0]===2)){Oe=0;continue}if(un[0]===3&&(!Pt||un[1]>Pt[0]&&un[1]<Pt[3])){Oe.label=un[1];break}if(un[0]===6&&Oe.label<Pt[1]){Oe.label=Pt[1],Pt=un;break}if(Pt&&Oe.label<Pt[2]){Oe.label=Pt[2],Oe.ops.push(un);break}Pt[2]&&Oe.ops.pop(),Oe.trys.pop();continue}un=Me.call(ne,Oe)}catch(bi){un=[6,bi],pt=0}finally{Ke=Pt=0}if(un[0]&5)throw un[1];return{value:un[0]?un[1]:void 0,done:!0}}},Ls=function(){function ne(Me){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=Me.source,this.url=Me.url,this.setProps(Me)}return ne.prototype.destroy=function(){this.idleQueue.forEach(function(Me){return Me.destroy()}),this.isDestroyed=!0},ne.prototype.setProps=function(Me){this.props=No(No({},this.props),Me),Me.name!==void 0&&(this.name=Me.name),Me.maxConcurrency!==void 0&&(this.maxConcurrency=Me.maxConcurrency),Me.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=Me.maxMobileConcurrency),Me.reuseWorkers!==void 0&&(this.reuseWorkers=Me.reuseWorkers),Me.onDebug!==void 0&&(this.onDebug=Me.onDebug)},ne.prototype.startJob=function(Me,Oe,Ke){return Oe===void 0&&(Oe=function(pt,Pt,Xr){return pt.done(Xr)}),Ke===void 0&&(Ke=function(pt,Pt){return pt.error(Pt)}),is(this,void 0,void 0,function(){var pt,Pt=this;return rs(this,function(Xr){switch(Xr.label){case 0:return pt=new Promise(function(An){return Pt.jobQueue.push({name:Me,onMessage:Oe,onError:Ke,onStart:An}),Pt}),this.startQueuedJob(),[4,pt];case 1:return[2,Xr.sent()]}})})},ne.prototype.startQueuedJob=function(){return is(this,void 0,void 0,function(){var Me,Oe,Ke;return rs(this,function(pt){switch(pt.label){case 0:if(!this.jobQueue.length)return[2];if(Me=this.getAvailableWorker(),!Me)return[2];if(Oe=this.jobQueue.shift(),!Oe)return[3,4];this.onDebug({message:"Starting job",name:Oe.name,backlog:this.jobQueue.length,workerThread:Me}),Ke=new fn(Oe.name,Me),Me.onMessage=function(Pt){return Oe.onMessage(Ke,Pt.type,Pt.payload)},Me.onError=function(Pt){return Oe.onError(Ke,Pt)},Oe.onStart(Ke),pt.label=1;case 1:return pt.trys.push([1,,3,4]),[4,Ke.result];case 2:return pt.sent(),[3,4];case 3:return this.returnWorkerToQueue(Me),[7];case 4:return[2]}})})},ne.prototype.returnWorkerToQueue=function(Me){var Oe=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();Oe?(Me.destroy(),this.count--):this.idleQueue.push(Me),this.isDestroyed||this.startQueuedJob()},ne.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var Me=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new po({name:Me,source:this.source,url:this.url})}return null},ne.prototype.getMaxConcurrency=function(){return gn?this.maxMobileConcurrency:this.maxConcurrency},ne}(),vo=Ls,ds=function(){return ds=Object.assign||function(ne){for(var Me,Oe=1,Ke=arguments.length;Oe<Ke;Oe++){Me=arguments[Oe];for(var pt in Me)Object.prototype.hasOwnProperty.call(Me,pt)&&(ne[pt]=Me[pt])}return ne},ds.apply(this,arguments)},Ns=function(ne){var Me=typeof Symbol=="function"&&Symbol.iterator,Oe=Me&&ne[Me],Ke=0;if(Oe)return Oe.call(ne);if(ne&&typeof ne.length=="number")return{next:function(){return ne&&Ke>=ne.length&&(ne=void 0),{value:ne&&ne[Ke++],done:!ne}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")},cs={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Jo=function(){function ne(Me){this.workerPools=new Map,this.props=ds({},cs),this.setProps(Me),this.workerPools=new Map}return ne.isSupported=function(){return po.isSupported()},ne.getWorkerFarm=function(Me){return Me===void 0&&(Me={}),ne.workerFarm=ne.workerFarm||new ne({}),ne.workerFarm.setProps(Me),ne.workerFarm},ne.prototype.destroy=function(){var Me,Oe;try{for(var Ke=Ns(this.workerPools.values()),pt=Ke.next();!pt.done;pt=Ke.next()){var Pt=pt.value;Pt.destroy()}}catch(Xr){Me={error:Xr}}finally{try{pt&&!pt.done&&(Oe=Ke.return)&&Oe.call(Ke)}finally{if(Me)throw Me.error}}},ne.prototype.setProps=function(Me){var Oe,Ke;this.props=ds(ds({},this.props),Me);try{for(var pt=Ns(this.workerPools.values()),Pt=pt.next();!Pt.done;Pt=pt.next()){var Xr=Pt.value;Xr.setProps(this.getWorkerPoolProps())}}catch(An){Oe={error:An}}finally{try{Pt&&!Pt.done&&(Ke=pt.return)&&Ke.call(pt)}finally{if(Oe)throw Oe.error}}},ne.prototype.getWorkerPool=function(Me){var Oe=Me.name,Ke=Me.source,pt=Me.url,Pt=this.workerPools.get(Oe);return Pt||(Pt=new vo({name:Oe,source:Ke,url:pt}),Pt.setProps(this.getWorkerPoolProps()),this.workerPools.set(Oe,Pt)),Pt},ne.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},ne}(),$s=Jo,ws=new Map,_s=function(){function ne(){}return Object.defineProperty(ne,"onmessage",{set:function(Me){self.onmessage=function(Oe){if(nl(Oe)){var Ke=Oe.data,pt=Ke.type,Pt=Ke.payload;Me(pt,Pt)}}},enumerable:!1,configurable:!0}),ne.addEventListener=function(Me){var Oe=ws.get(Me);Oe||(Oe=function(Ke){if(nl(Ke)){var pt=Ke.data,Pt=pt.type,Xr=pt.payload;Me(Pt,Xr)}}),self.addEventListener("message",Oe)},ne.removeEventListener=function(Me){var Oe=ws.get(Me);ws.delete(Me),self.removeEventListener("message",Oe)},ne.postMessage=function(Me,Oe){if(self){var Ke={source:"Worker thread",type:Me,payload:Oe},pt=Fi(Oe);self.postMessage(Ke,pt)}},ne}(),El=_s;function nl(ne){var Me=ne.type,Oe=ne.data;return Me==="message"&&Oe&&typeof Oe.source=="string"&&Oe.source==="Main thread"}function Qu(ne){return JSON.parse(Ac(ne))}function Ac(ne){var Me=new Set;return JSON.stringify(ne,function(Oe,Ke){if(typeof Ke=="object"&&Ke!==null){if(Me.has(Ke))try{return JSON.parse(JSON.stringify(Ke))}catch(pt){return}Me.add(Ke)}return Ke})}function Ju(ne){return""+ne.name}function qu(ne,Me){Me===void 0&&(Me={});var Oe=Me[ne.id]||{},Ke=ne.name+".worker.js",pt=Oe.workerUrl;return Me._workerType==="test"&&(pt=ne.module+"/dist/"+Ke),pt||(pt="https://unpkg.com/"+ne.module+"/dist/"+Ke),assert(pt),pt}var Tc=function(ne,Me,Oe,Ke){function pt(Pt){return Pt instanceof Oe?Pt:new Oe(function(Xr){Xr(Pt)})}return new(Oe||(Oe=Promise))(function(Pt,Xr){function An(bi){try{un(Ke.next(bi))}catch(ga){Xr(ga)}}function mi(bi){try{un(Ke.throw(bi))}catch(ga){Xr(ga)}}function un(bi){bi.done?Pt(bi.value):pt(bi.value).then(An,mi)}un((Ke=Ke.apply(ne,Me||[])).next())})},ec=function(ne,Me){var Oe={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Ke,pt,Pt,Xr;return Xr={next:An(0),throw:An(1),return:An(2)},typeof Symbol=="function"&&(Xr[Symbol.iterator]=function(){return this}),Xr;function An(un){return function(bi){return mi([un,bi])}}function mi(un){if(Ke)throw new TypeError("Generator is already executing.");for(;Oe;)try{if(Ke=1,pt&&(Pt=un[0]&2?pt.return:un[0]?pt.throw||((Pt=pt.return)&&Pt.call(pt),0):pt.next)&&!(Pt=Pt.call(pt,un[1])).done)return Pt;switch(pt=0,Pt&&(un=[un[0]&2,Pt.value]),un[0]){case 0:case 1:Pt=un;break;case 4:return Oe.label++,{value:un[1],done:!1};case 5:Oe.label++,pt=un[1],un=[0];continue;case 7:un=Oe.ops.pop(),Oe.trys.pop();continue;default:if(Pt=Oe.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(un[0]===6||un[0]===2)){Oe=0;continue}if(un[0]===3&&(!Pt||un[1]>Pt[0]&&un[1]<Pt[3])){Oe.label=un[1];break}if(un[0]===6&&Oe.label<Pt[1]){Oe.label=Pt[1],Pt=un;break}if(Pt&&Oe.label<Pt[2]){Oe.label=Pt[2],Oe.ops.push(un);break}Pt[2]&&Oe.ops.pop(),Oe.trys.pop();continue}un=Me.call(ne,Oe)}catch(bi){un=[6,bi],pt=0}finally{Ke=Pt=0}if(un[0]&5)throw un[1];return{value:un[0]?un[1]:void 0,done:!0}}};function Pf(ne,Me){return WorkerFarm.isSupported()?ne.worker&&(Me==null?void 0:Me.worker):!1}function Ef(ne,Me,Oe,Ke){return Oe===void 0&&(Oe={}),Ke===void 0&&(Ke={}),Tc(this,void 0,void 0,function(){var pt,Pt,Xr,An,mi,un,bi,ga;return ec(this,function(ss){switch(ss.label){case 0:return pt=getWorkerName(ne),Pt=getWorkerURL(ne,Oe),Xr=WorkerFarm.getWorkerFarm(Oe),An=Xr.getWorkerPool({name:pt,url:Pt}),mi=Oe.jobName||ne.name,[4,An.startJob(mi,$l.bind(null,Ke))];case 1:return un=ss.sent(),bi=removeNontransferableOptions(Oe),un.postMessage("process",{input:Me,options:bi}),[4,un.result];case 2:return ga=ss.sent(),[2,ga.result]}})})}function $l(ne,Me,Oe,Ke){return Tc(this,void 0,void 0,function(){var pt,Pt,Xr,An,mi,un,bi;return ec(this,function(ga){switch(ga.label){case 0:switch(pt=Oe,pt){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return Me.done(Ke),[3,9];case 2:return Me.error(new Error(Ke.error)),[3,9];case 3:Pt=Ke.id,Xr=Ke.input,An=Ke.options,ga.label=4;case 4:return ga.trys.push([4,6,,7]),ne.process?[4,ne.process(Xr,An)]:(Me.postMessage("error",{id:Pt,error:"Worker not set up to process on main thread"}),[2]);case 5:return mi=ga.sent(),Me.postMessage("done",{id:Pt,result:mi}),[3,7];case 6:return un=ga.sent(),bi=un instanceof Error?un.message:"unknown error",Me.postMessage("error",{id:Pt,error:bi}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+Oe),ga.label=9;case 9:return[2]}})})}var Uc=function(){function ne(){this._values=[],this._settlers=[],this._closed=!1}return ne.prototype[Symbol.asyncIterator]=function(){return this},ne.prototype.push=function(Me){return this.enqueue(Me)},ne.prototype.enqueue=function(Me){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var Oe=this._settlers.shift();Me instanceof Error?Oe.reject(Me):Oe.resolve({value:Me})}else this._values.push(Me)},ne.prototype.close=function(){for(;this._settlers.length>0;){var Me=this._settlers.shift();Me.resolve({done:!0})}this._closed=!0},ne.prototype.next=function(){var Me=this;if(this._values.length>0){var Oe=this._values.shift();return Oe instanceof Error?Promise.reject(Oe):Promise.resolve({done:!1,value:Oe})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(Ke,pt){Me._settlers.push({resolve:Ke,reject:pt})})},ne}(),Jh=Uc,qh=function(ne,Me,Oe,Ke){function pt(Pt){return Pt instanceof Oe?Pt:new Oe(function(Xr){Xr(Pt)})}return new(Oe||(Oe=Promise))(function(Pt,Xr){function An(bi){try{un(Ke.next(bi))}catch(ga){Xr(ga)}}function mi(bi){try{un(Ke.throw(bi))}catch(ga){Xr(ga)}}function un(bi){bi.done?Pt(bi.value):pt(bi.value).then(An,mi)}un((Ke=Ke.apply(ne,Me||[])).next())})},Sh=function(ne,Me){var Oe={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Ke,pt,Pt,Xr;return Xr={next:An(0),throw:An(1),return:An(2)},typeof Symbol=="function"&&(Xr[Symbol.iterator]=function(){return this}),Xr;function An(un){return function(bi){return mi([un,bi])}}function mi(un){if(Ke)throw new TypeError("Generator is already executing.");for(;Oe;)try{if(Ke=1,pt&&(Pt=un[0]&2?pt.return:un[0]?pt.throw||((Pt=pt.return)&&Pt.call(pt),0):pt.next)&&!(Pt=Pt.call(pt,un[1])).done)return Pt;switch(pt=0,Pt&&(un=[un[0]&2,Pt.value]),un[0]){case 0:case 1:Pt=un;break;case 4:return Oe.label++,{value:un[1],done:!1};case 5:Oe.label++,pt=un[1],un=[0];continue;case 7:un=Oe.ops.pop(),Oe.trys.pop();continue;default:if(Pt=Oe.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(un[0]===6||un[0]===2)){Oe=0;continue}if(un[0]===3&&(!Pt||un[1]>Pt[0]&&un[1]<Pt[3])){Oe.label=un[1];break}if(un[0]===6&&Oe.label<Pt[1]){Oe.label=Pt[1],Pt=un;break}if(Pt&&Oe.label<Pt[2]){Oe.label=Pt[2],Oe.ops.push(un);break}Pt[2]&&Oe.ops.pop(),Oe.trys.pop();continue}un=Me.call(ne,Oe)}catch(bi){un=[6,bi],pt=0}finally{Ke=Pt=0}if(un[0]&5)throw un[1];return{value:un[0]?un[1]:void 0,done:!0}}},Of=function(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me=ne[Symbol.asyncIterator],Oe;return Me?Me.call(ne):(ne=typeof __values=="function"?__values(ne):ne[Symbol.iterator](),Oe={},Ke("next"),Ke("throw"),Ke("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe);function Ke(Pt){Oe[Pt]=ne[Pt]&&function(Xr){return new Promise(function(An,mi){Xr=ne[Pt](Xr),pt(An,mi,Xr.done,Xr.value)})}}function pt(Pt,Xr,An,mi){Promise.resolve(mi).then(function(un){Pt({value:un,done:An})},Xr)}},Ch=0,pf,oh;function Jc(ne,Me){var Oe=this;if(typeof self!="undefined"){var Ke={process:nc};El.onmessage=function(pt,Pt){return qh(Oe,void 0,void 0,function(){var Xr,An,mi,un,bi,ga,ss,To,Ro,fs,ps;return Sh(this,function(zo){switch(zo.label){case 0:switch(zo.trys.push([0,19,,20]),Xr=pt,Xr){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!ne)throw new Error("Worker does not support atomic processing");return[4,ne(Pt.input,Pt.options||{},Ke)];case 2:return An=zo.sent(),El.postMessage("done",{result:An}),[3,18];case 3:if(!Me)throw new Error("Worker does not support batched processing");pf=new Jh,oh=Pt.options||{},mi=Me(pf,oh,Ke),zo.label=4;case 4:zo.trys.push([4,9,10,15]),un=Of(mi),zo.label=5;case 5:return[4,un.next()];case 6:if(bi=zo.sent(),!!bi.done)return[3,8];ga=bi.value,El.postMessage("output-batch",{result:ga}),zo.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return ss=zo.sent(),fs={error:ss},[3,15];case 10:return zo.trys.push([10,,13,14]),bi&&!bi.done&&(ps=un.return)?[4,ps.call(un)]:[3,12];case 11:zo.sent(),zo.label=12;case 12:return[3,14];case 13:if(fs)throw fs.error;return[7];case 14:return[7];case 15:return El.postMessage("done",{}),[3,18];case 16:return pf.push(Pt.input),[3,18];case 17:return pf.close(),[3,18];case 18:return[3,20];case 19:return To=zo.sent(),Ro=To instanceof Error?To.message:"",El.postMessage("error",{error:Ro}),[3,20];case 20:return[2]}})})}}}function nc(ne,Me){return Me===void 0&&(Me={}),new Promise(function(Oe,Ke){var pt=Ch++,Pt=function(An,mi){if(mi.id===pt)switch(An){case"done":El.removeEventListener(Pt),Oe(mi.result);break;case"error":El.removeEventListener(Pt),Ke(mi.error);break;default:}};El.addEventListener(Pt);var Xr={id:pt,input:ne,options:Me};El.postMessage("process",Xr)})}var ic=function(ne,Me,Oe,Ke){function pt(Pt){return Pt instanceof Oe?Pt:new Oe(function(Xr){Xr(Pt)})}return new(Oe||(Oe=Promise))(function(Pt,Xr){function An(bi){try{un(Ke.next(bi))}catch(ga){Xr(ga)}}function mi(bi){try{un(Ke.throw(bi))}catch(ga){Xr(ga)}}function un(bi){bi.done?Pt(bi.value):pt(bi.value).then(An,mi)}un((Ke=Ke.apply(ne,Me||[])).next())})},wh=function(ne,Me){var Oe={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Ke,pt,Pt,Xr;return Xr={next:An(0),throw:An(1),return:An(2)},typeof Symbol=="function"&&(Xr[Symbol.iterator]=function(){return this}),Xr;function An(un){return function(bi){return mi([un,bi])}}function mi(un){if(Ke)throw new TypeError("Generator is already executing.");for(;Oe;)try{if(Ke=1,pt&&(Pt=un[0]&2?pt.return:un[0]?pt.throw||((Pt=pt.return)&&Pt.call(pt),0):pt.next)&&!(Pt=Pt.call(pt,un[1])).done)return Pt;switch(pt=0,Pt&&(un=[un[0]&2,Pt.value]),un[0]){case 0:case 1:Pt=un;break;case 4:return Oe.label++,{value:un[1],done:!1};case 5:Oe.label++,pt=un[1],un=[0];continue;case 7:un=Oe.ops.pop(),Oe.trys.pop();continue;default:if(Pt=Oe.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(un[0]===6||un[0]===2)){Oe=0;continue}if(un[0]===3&&(!Pt||un[1]>Pt[0]&&un[1]<Pt[3])){Oe.label=un[1];break}if(un[0]===6&&Oe.label<Pt[1]){Oe.label=Pt[1],Pt=un;break}if(Pt&&Oe.label<Pt[2]){Oe.label=Pt[2],Oe.ops.push(un);break}Pt[2]&&Oe.ops.pop(),Oe.trys.pop();continue}un=Me.call(ne,Oe)}catch(bi){un=[6,bi],pt=0}finally{Ke=Pt=0}if(un[0]&5)throw un[1];return{value:un[0]?un[1]:void 0,done:!0}}},Fh={};function Du(ne,Me,Oe){return Me===void 0&&(Me=null),Oe===void 0&&(Oe={}),ic(this,void 0,void 0,function(){return wh(this,function(Ke){switch(Ke.label){case 0:return Me&&(ne=yu(ne,Me,Oe)),Fh[ne]=Fh[ne]||qc(ne),[4,Fh[ne]];case 1:return[2,Ke.sent()]}})})}function yu(ne,Me,Oe){if(ne.startsWith("http"))return ne;var Ke=Oe.modules||{};return Ke[ne]?Ke[ne]:Oe.CDN?(assert(Oe.CDN.startsWith("http")),Oe.CDN+"/"+Me+"/dist/libs/"+ne):isWorker?"../src/libs/"+ne:"modules/"+Me+"/src/libs/"+ne}function qc(ne){return ic(this,void 0,void 0,function(){var Me,Oe,Ke;return wh(this,function(pt){switch(pt.label){case 0:return ne.endsWith("wasm")?[4,fetch(ne)]:[3,3];case 1:return Me=pt.sent(),[4,Me.arrayBuffer()];case 2:return[2,pt.sent()];case 3:return isWorker?[2,importScripts(ne)]:[4,fetch(ne)];case 4:return Oe=pt.sent(),[4,Oe.text()];case 5:return Ke=pt.sent(),[2,sh(Ke,ne)]}})})}function sh(ne,Me){if(isWorker)return eval.call(global,ne),null;var Oe=document.createElement("script");Oe.id=Me;try{Oe.appendChild(document.createTextNode(ne))}catch(Ke){Oe.text=ne}return document.body.appendChild(Oe),null}var vh="0.0.3",Nf={id:"null",name:"null",module:"web-worker-helper",options:{}};function mh(ne){var Me=ne.color;return!Me||!Me.length?[1,1,1,1]:Me}function If(ne,Me,Oe){return Oe.length===2?[Oe[0],Oe[1],0]:[Oe[0],Oe[1],Oe[2]]}function Rf(ne){var Me=ne.filter;return Me?[1]:[0]}function vf(ne,Me){return[Me]}var oe=m(9187),Br=m.n(oe),xt=m(31437),mt=xt.Ue(),Ht=xt.Ue(),or=xt.Ue(),en=xt.Ue(),_n=xt.Ue();function Tn(ne,Me,Oe,Ke,pt){xt.IH(ne,Oe,Ke),xt.Fv(ne,ne),Me=xt.al(-ne[1],ne[0]);var Pt=xt.al(-Oe[1],Oe[0]);return[pt/xt.AK(Me,Pt),Me]}function zn(ne,Me){return xt.t8(ne,-Me[1],Me[0])}function wi(ne,Me,Oe){return xt.lu(ne,Me,Oe),xt.Fv(ne,ne),ne}function Xi(ne,Me){return ne[0]===Me[0]&&ne[1]===Me[1]}function ba(ne){for(var Me=new Map,Oe=0;Oe<ne.length;Oe++){var Ke=ne[0].toString()+"-"+ne[1].toString();Me.get(Ke)?(ne.splice(Oe,1),Oe++):Me.set(Ke,Ke)}return ne}var mo=function(){function ne(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,R.Z)(this,ne),(0,Yo.Z)(this,"lastFlip",-1),(0,Yo.Z)(this,"miter",xt.al(0,0)),(0,Yo.Z)(this,"started",!1),(0,Yo.Z)(this,"dash",!1),(0,Yo.Z)(this,"totalDistance",0),(0,Yo.Z)(this,"currentIndex",0),this.join=Me.join||"miter",this.cap=Me.cap||"butt",this.miterLimit=Me.miterLimit||10,this.thickness=Me.thickness||1,this.dash=Me.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,$.Z)(ne,[{key:"extrude_gaode2",value:function(Oe,Ke){var pt=this.complex;if(Oe.length<=1)return pt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Pt=Oe.length,Xr=pt.startIndex,An=1;An<Pt;An++){var mi,un,bi,ga=Oe[An-1];ga.push((mi=Ke[An-1][2])!==null&&mi!==void 0?mi:0);var ss=Ke[An-1],To=Oe[An];To.push((un=Ke[An][2])!==null&&un!==void 0?un:0);var Ro=Ke[An],fs=An<Oe.length-1?[].concat((0,Io.Z)(Oe[An+1]),[(bi=Ke[An+1][2])!==null&&bi!==void 0?bi:0]):null,ps=An<Ke.length-1?Ke[An+1]:null,zo=this.segment_gaode2(pt,Xr,ga,To,fs,ss,Ro,ps);Xr+=zo}if(this.dash)for(var ks=0;ks<pt.positions.length/6;ks++)pt.positions[ks*6+5]=this.totalDistance;return pt.startIndex=pt.positions.length/6,pt}},{key:"simpleExtrude_gaode2",value:function(Oe,Ke){var pt=this.complex;if(Oe.length<=1)return pt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Pt=Oe.length,Xr=pt.startIndex,An=1;An<Pt;An++){var mi,un,bi,ga=Oe[An-1];ga.push((mi=Ke[An-1][2])!==null&&mi!==void 0?mi:0);var ss=Ke[An-1],To=Oe[An];To.push((un=Ke[An][2])!==null&&un!==void 0?un:0);var Ro=Ke[An],fs=An<Oe.length-1?[].concat((0,Io.Z)(Oe[An+1]),[(bi=Ke[An+1][2])!==null&&bi!==void 0?bi:0]):null,ps=An<Ke.length-1?Ke[An+1]:null,zo=this.simpleSegment(pt,Xr,ga,To,fs,ss,Ro,ps);Xr+=zo}if(this.dash)for(var ks=0;ks<pt.positions.length/6;ks++)pt.positions[ks*6+5]=this.totalDistance;return pt.startIndex=pt.positions.length/6,pt}},{key:"extrude",value:function(Oe){var Ke=this.complex;if(Oe.length<=1)return Ke;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var pt=Oe.length,Pt=Ke.startIndex,Xr=1;Xr<pt;Xr++){var An=Oe[Xr-1],mi=Oe[Xr],un=Xr<Oe.length-1?Oe[Xr+1]:null,bi=this.segment(Ke,Pt,An,mi,un);Pt+=bi}if(this.dash)for(var ga=0;ga<Ke.positions.length/6;ga++)Ke.positions[ga*6+5]=this.totalDistance;return Ke.startIndex=Ke.positions.length/6,Ke}},{key:"simpleExtrude",value:function(Oe){var Ke=this.complex;if(Oe.length<=1)return Ke;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var pt=Oe.length,Pt=Ke.startIndex,Xr=1;Xr<pt;Xr++){var An=Oe[Xr-1],mi=Oe[Xr],un=Xr<Oe.length-1?Oe[Xr+1]:null,bi=this.simpleSegment(Ke,Pt,An,mi,un);Pt+=bi}if(this.dash)for(var ga=0;ga<Ke.positions.length/6;ga++)Ke.positions[ga*6+5]=this.totalDistance;return Ke.startIndex=Ke.positions.length/6,Ke}},{key:"segment_gaode2",value:function(Oe,Ke,pt,Pt,Xr,An,mi,un){var bi=0,ga=Oe.indices,ss=Oe.positions,To=Oe.normals,Ro=this.cap==="square",fs=this.join==="bevel",ps=Qn([mi[0],mi[1]]),zo=Qn([An[0],An[1]]);wi(or,Pt,pt);var ks=0;if(this.dash&&(ks=this.lineSegmentDistance(ps,zo),this.totalDistance+=ks),this.normal||(this.normal=xt.Ue(),zn(this.normal,or)),!this.started)if(this.started=!0,Ro){var xu=xt.Ue(),cu=xt.Ue();xt.IH(xu,this.normal,or),xt.IH(cu,this.normal,or),To.push(cu[0],cu[1],0),To.push(xu[0],xu[1],0),ss.push(pt[0],pt[1],pt[2]|0,this.totalDistance-ks,-this.thickness,pt[2]|0),this.complex.indexes.push(this.currentIndex),ss.push(pt[0],pt[1],pt[2]|0,this.totalDistance-ks,this.thickness,pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(ss,To,pt,this.normal,this.thickness,this.totalDistance-ks);if(ga.push(Ke+0,Ke+1,Ke+2),Xr){Xi(Pt,Xr)&&xt.IH(Xr,Pt,xt.Fv(Xr,xt.$X(Xr,Pt,pt))),wi(en,Xr,Pt);var ac=Tn(_n,xt.Ue(),or,en,this.thickness),ll=(0,qs.Z)(ac,2),Cu=ll[0],Sl=ll[1],Wl=xt.AK(_n,this.normal)<0?-1:1,Pc=fs;if(!Pc&&this.join==="miter"){var jc=Cu;jc>this.miterLimit&&(Pc=!0)}Pc?(To.push(this.normal[0],this.normal[1],0),To.push(Sl[0],Sl[1],0),ss.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,-this.thickness*Wl,Pt[2]|0),this.complex.indexes.push(this.currentIndex),ss.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,this.thickness*Wl,Pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,ga.push.apply(ga,(0,Io.Z)(this.lastFlip!==-Wl?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),ga.push(Ke+2,Ke+3,Ke+4),zn(mt,en),xt.JG(this.normal,mt),To.push(this.normal[0],this.normal[1],0),ss.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,-this.thickness*Wl,Pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,bi+=3):(this.extrusions(ss,To,Pt,Sl,Cu,this.totalDistance),ga.push.apply(ga,(0,Io.Z)(this.lastFlip===1?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),Wl=-1,xt.JG(this.normal,Sl),bi+=2),this.lastFlip=Wl}else{if(zn(this.normal,or),Ro){var tf=xt.Ue(),$c=xt.Ue();xt.lu($c,or,this.normal),xt.IH(tf,or,this.normal),To.push($c[0],$c[1],0),To.push(tf[0],tf[1],0),ss.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,this.thickness,Pt[2]|0),this.complex.indexes.push(this.currentIndex),ss.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,this.thickness,Pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(ss,To,Pt,this.normal,this.thickness,this.totalDistance);ga.push.apply(ga,(0,Io.Z)(this.lastFlip===1?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),bi+=2}return bi}},{key:"simpleSegment",value:function(Oe,Ke,pt,Pt,Xr){var An=0,mi=Oe.indices,un=Oe.positions,bi=Oe.normals,ga=Qn([Pt[0],Pt[1]]),ss=Qn([pt[0],pt[1]]);wi(or,ga,ss);var To=0;if(this.dash&&(To=this.lineSegmentDistance(ga,ss),this.totalDistance+=To),this.normal||(this.normal=xt.Ue(),zn(this.normal,or)),this.started||(this.started=!0,this.extrusions(un,bi,pt,this.normal,this.thickness,this.totalDistance-To)),mi.push(Ke+0,Ke+1,Ke+2),!Xr)zn(this.normal,or),this.extrusions(un,bi,Pt,this.normal,this.thickness,this.totalDistance),mi.push.apply(mi,(0,Io.Z)(this.lastFlip===1?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),An+=2;else{var Ro=Qn([Xr[0],Xr[1]]);Xi(ga,Ro)&&xt.IH(Ro,ga,xt.Fv(Ro,xt.$X(Ro,ga,ss))),wi(en,Ro,ga);var fs=Tn(_n,xt.Ue(),or,en,this.thickness),ps=(0,qs.Z)(fs,2),zo=ps[0],ks=ps[1],xu=xt.AK(_n,this.normal)<0?-1:1;this.extrusions(un,bi,Pt,ks,zo,this.totalDistance),mi.push.apply(mi,(0,Io.Z)(this.lastFlip===1?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),xu=-1,xt.JG(this.normal,ks),An+=2,this.lastFlip=xu}return An}},{key:"segment",value:function(Oe,Ke,pt,Pt,Xr){var An=0,mi=Oe.indices,un=Oe.positions,bi=Oe.normals,ga=this.cap==="square",ss=this.join==="bevel",To=Qn([Pt[0],Pt[1]]),Ro=Qn([pt[0],pt[1]]);wi(or,To,Ro);var fs=0;if(this.dash&&(fs=this.lineSegmentDistance(To,Ro),this.totalDistance+=fs),this.normal||(this.normal=xt.Ue(),zn(this.normal,or)),!this.started)if(this.started=!0,ga){var ps=xt.Ue(),zo=xt.Ue();xt.IH(ps,this.normal,or),xt.IH(zo,this.normal,or),bi.push(zo[0],zo[1],0),bi.push(ps[0],ps[1],0),un.push(pt[0],pt[1],pt[2]|0,this.totalDistance-fs,-this.thickness,pt[2]|0),this.complex.indexes.push(this.currentIndex),un.push(pt[0],pt[1],pt[2]|0,this.totalDistance-fs,this.thickness,pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(un,bi,pt,this.normal,this.thickness,this.totalDistance-fs);if(mi.push(Ke+0,Ke+1,Ke+2),Xr){var cu=Qn([Xr[0],Xr[1]]);Xi(To,cu)&&xt.IH(cu,To,xt.Fv(cu,xt.$X(cu,To,Ro))),wi(en,cu,To);var tf=Tn(_n,xt.Ue(),or,en,this.thickness),$c=(0,qs.Z)(tf,2),ac=$c[0],ll=$c[1],Cu=xt.AK(_n,this.normal)<0?-1:1,Sl=ss;if(!Sl&&this.join==="miter"){var Wl=ac;Wl>this.miterLimit&&(Sl=!0)}Sl?(bi.push(this.normal[0],this.normal[1],0),bi.push(ll[0],ll[1],0),un.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,-this.thickness*Cu,Pt[2]|0),this.complex.indexes.push(this.currentIndex),un.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,this.thickness*Cu,Pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,mi.push.apply(mi,(0,Io.Z)(this.lastFlip!==-Cu?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),mi.push(Ke+2,Ke+3,Ke+4),zn(mt,en),xt.JG(this.normal,mt),bi.push(this.normal[0],this.normal[1],0),un.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,-this.thickness*Cu,Pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,An+=3):(this.extrusions(un,bi,Pt,ll,ac,this.totalDistance),mi.push.apply(mi,(0,Io.Z)(this.lastFlip===1?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),Cu=-1,xt.JG(this.normal,ll),An+=2),this.lastFlip=Cu}else{if(zn(this.normal,or),ga){var ks=xt.Ue(),xu=xt.Ue();xt.lu(xu,or,this.normal),xt.IH(ks,or,this.normal),bi.push(xu[0],xu[1],0),bi.push(ks[0],ks[1],0),un.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,this.thickness,Pt[2]|0),this.complex.indexes.push(this.currentIndex),un.push(Pt[0],Pt[1],Pt[2]|0,this.totalDistance,this.thickness,Pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(un,bi,Pt,this.normal,this.thickness,this.totalDistance);mi.push.apply(mi,(0,Io.Z)(this.lastFlip===1?[Ke,Ke+2,Ke+3]:[Ke+2,Ke+1,Ke+3])),An+=2}return An}},{key:"extrusions",value:function(Oe,Ke,pt,Pt,Xr,An){Ke.push(Pt[0],Pt[1],0),Ke.push(Pt[0],Pt[1],0),Oe.push(pt[0],pt[1],pt[2]|0,An,-Xr,pt[2]|0),this.complex.indexes.push(this.currentIndex),Oe.push(pt[0],pt[1],pt[2]|0,An,Xr,pt[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(Oe,Ke){var pt=Ke[0]-Oe[0],Pt=Ke[1]-Oe[1];return Math.sqrt(pt*pt+Pt*Pt)}}]),ne}(),Ja=85.0511287798;function Ds(ne){var Me=ne.coordinates,Oe=ne.originCoordinates,Ke=ne.version,pt=new mo({dash:!0,join:"bevel"});if(Ke==="GAODE2.x"){var Pt=Me;Array.isArray(Pt[0][0])||(Pt=[Me]);var Xr=Oe;Array.isArray(Xr[0][0])||(Xr=[Oe]);for(var An=0;An<Pt.length;An++){var mi=Pt[An],un=Xr[An];pt.extrude_gaode2(mi,un)}}else{var bi=Me;bi[0]&&!Array.isArray(bi[0][0])&&(bi=[Me]),bi.forEach(function(ss){pt.extrude(ss)})}var ga=pt.complex;return{vertices:ga.positions,indices:ga.indices,normals:ga.normals,indexes:ga.indexes,size:6}}function Ts(ne){var Me=uu(ne.coordinates);return{vertices:[].concat((0,Io.Z)(Me),(0,Io.Z)(Me),(0,Io.Z)(Me),(0,Io.Z)(Me)),indices:[0,1,2,2,3,0],size:Me.length}}function lu(ne){var Me=ne.coordinates,Oe=Br().flatten(Me),Ke=Oe.vertices,pt=Oe.dimensions,Pt=Oe.holes,Xr=Br()(Ke,Pt,pt);return{indices:Xr,vertices:Ke,size:pt}}function Iu(ne,Me){var Oe=Me;return Me>Ja&&(Oe=Ja),Me<-Ja&&(Oe=-Ja),[Math.PI*ne/180+Math.PI,Math.PI-Math.log(Math.tan(Math.PI*.25+Math.PI*Oe/180*.5))]}function _u(ne,Me){return[(ne-Math.PI)*180/Math.PI,(Math.atan(Math.exp(Math.PI-Me))-Math.PI*.25)*2*180/Math.PI]}var Mc=function(){var ne=(0,Jl.Z)(oo().mark(function Me(Oe){var Ke,pt,Pt,Xr,An,mi,un,bi,ga;return oo().wrap(function(To){for(;;)switch(To.prev=To.next){case 0:return Ke=Oe.descriptors,pt=Oe.features,Pt=Oe.enablePicking,Xr=Oe.iconMap,An={a_Color:mh,a_Position:If,filter:Rf,a_vertexId:vf,a_PickingColor:function(fs){var ps=fs.id;return Pt?Nn(ps):[0,0,0]},a_DistanceAndIndex:function(fs,ps,zo,ks,xu,cu){return cu===void 0?[zo[3],10]:[zo[3],cu]},a_Total_Distance:function(fs,ps,zo){return[zo[5]]},a_Size:function(fs){var ps=fs.size,zo=ps===void 0?1:ps;return Array.isArray(zo)?[zo[0],zo[1]]:[zo,0]},a_Normal:function(fs,ps,zo,ks,xu){return xu},a_Miter:function(fs,ps,zo){return[zo[4]]},a_iconMapUV:function(fs){var ps=fs.texture,zo=Xr[ps]||{x:0,y:0},ks=zo.x,xu=zo.y;return[ks,xu]}},mi={sizePerElement:0,elements:[]},un=0,bi=[],ga=3,pt.forEach(function(Ro,fs){var ps=Ds(Ro),zo=ps.indices,ks=ps.vertices,xu=ps.normals,cu=ps.size,tf=ps.indexes;zo.forEach(function(Cu){bi.push(Cu+un)}),ga=cu;var $c=ks.length/cu;mi.sizePerElement=ga,mi.elements.push({featureIdx:fs,vertices:ks,normals:xu,offset:un}),un+=$c;for(var ac=function(Sl){var Wl=(xu==null?void 0:xu.slice(Sl*3,Sl*3+3))||[],Pc=ks.slice(Sl*cu,Sl*cu+cu),jc=0;tf&&tf[Sl]!==void 0&&(jc=tf[Sl]),Ke.forEach(function(hu){if(hu&&An[hu.name]){var _h;(_h=hu.buffer.data).push.apply(_h,(0,Io.Z)(An[hu.name](Ro,fs,Pc,Sl,Wl,jc)))}})},ll=0;ll<$c;ll++)ac(ll)}),To.abrupt("return",{descriptors:Ke,featureLayout:mi,indices:bi});case 8:case"end":return To.stop()}},Me)}));return function(Oe){return ne.apply(this,arguments)}}(),tu=function(){var ne=(0,Jl.Z)(oo().mark(function Me(Oe){var Ke,pt,Pt,Xr,An,mi,un,bi,ga;return oo().wrap(function(To){for(;;)switch(To.prev=To.next){case 0:return Ke=Oe.descriptors,pt=Oe.features,Pt=Oe.enablePicking,Xr=Oe.shape2d,An={a_Color:mh,a_Position:If,filter:Rf,a_vertexId:vf,a_PickingColor:function(fs){var ps=fs.id;return Pt?Nn(ps):[0,0,0]},a_Shape:function(fs){var ps=fs.shape,zo=ps===void 0?2:ps,ks=Xr.indexOf(zo);return[ks]},a_Extrude:function(fs,ps,zo,ks){var xu=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],cu=ks%4*3;return[xu[cu],xu[cu+1],xu[cu+2]]},a_Size:function(fs){var ps=fs.size,zo=ps===void 0?5:ps;return Array.isArray(zo)?[zo[0]]:[zo]}},mi={sizePerElement:0,elements:[]},un=0,bi=[],ga=3,pt.forEach(function(Ro,fs){var ps=Ts(Ro),zo=ps.indices,ks=ps.vertices,xu=ps.normals,cu=ps.size,tf=ps.indexes;zo.forEach(function(Cu){bi.push(Cu+un)}),ga=cu;var $c=ks.length/cu;mi.sizePerElement=ga,mi.elements.push({featureIdx:fs,vertices:ks,normals:xu,offset:un}),un+=$c;for(var ac=function(Sl){var Wl=(xu==null?void 0:xu.slice(Sl*3,Sl*3+3))||[],Pc=ks.slice(Sl*cu,Sl*cu+cu),jc=0;tf&&tf[Sl]!==void 0&&(jc=tf[Sl]),Ke.forEach(function(hu){if(hu&&An[hu.name]){var _h;(_h=hu.buffer.data).push.apply(_h,(0,Io.Z)(An[hu.name](Ro,fs,Pc,Sl,Wl,jc)))}})},ll=0;ll<$c;ll++)ac(ll)}),To.abrupt("return",{descriptors:Ke,featureLayout:mi,indices:bi});case 8:case"end":return To.stop()}},Me)}));return function(Oe){return ne.apply(this,arguments)}}(),Fl=function(){var ne=(0,Jl.Z)(oo().mark(function Me(Oe){var Ke,pt,Pt,Xr,An,mi,un,bi;return oo().wrap(function(ss){for(;;)switch(ss.prev=ss.next){case 0:return Ke=Oe.descriptors,pt=Oe.features,Pt=Oe.enablePicking,Xr={a_Color:mh,a_Position:If,filter:Rf,a_vertexId:vf,a_PickingColor:function(Ro){var fs=Ro.id;return Pt?Nn(fs):[0,0,0]}},An={sizePerElement:0,elements:[]},mi=0,un=[],bi=3,pt.forEach(function(To,Ro){var fs=lu(To),ps=fs.indices,zo=fs.vertices,ks=fs.normals,xu=fs.size,cu=fs.indexes;ps.forEach(function(ll){un.push(ll+mi)}),bi=xu;var tf=zo.length/xu;An.sizePerElement=bi,An.elements.push({featureIdx:Ro,vertices:zo,normals:ks,offset:mi}),mi+=tf;for(var $c=function(Cu){var Sl=(ks==null?void 0:ks.slice(Cu*3,Cu*3+3))||[],Wl=zo.slice(Cu*xu,Cu*xu+xu),Pc=0;cu&&cu[Cu]!==void 0&&(Pc=cu[Cu]),Ke.forEach(function(jc){if(jc&&Xr[jc.name]){var hu;(hu=jc.buffer.data).push.apply(hu,(0,Io.Z)(Xr[jc.name](To,Ro,Wl,Cu,Sl,Pc)))}})},ac=0;ac<tf;ac++)$c(ac)}),ss.abrupt("return",{descriptors:Ke,featureLayout:An,indices:un});case 8:case"end":return ss.stop()}},Me)}));return function(Oe){return ne.apply(this,arguments)}}(),Ys={pointFill:tu,line:Mc,polygonFill:Fl},ku=(0,l.Z)({},Ys);function Bu(ne){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,Jl.Z)(oo().mark(function ne(Me){var Oe,Ke;return oo().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Oe=Me.workerType,Ke=Me.data,!ku[Oe]){Pt.next=3;break}return Pt.abrupt("return",ku[Oe](Ke));case 3:return Pt.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(Oe,'" non-existent.'))));case 4:case"end":return Pt.stop()}},ne)})),Gl.apply(this,arguments)}Jc(Bu);var ru=new Map;function pl(ne,Me){ru.set(ne,Me)}function ef(ne){var Me=ru.get(ne);return Me}var Bh=`var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===l)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=f(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==e&&n.call(g,i)&&(d=g);var m=v.prototype=h.prototype=Object.create(d);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=f(t[o],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=f(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,s(m,"constructor",v),s(v,"constructor",p),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},x(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var w,E,A=function(t){return t&&t.Math==Math&&t},O=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof x&&x)||function(){return this}()||Function("return this")(),S=Object.defineProperty,T=function(t,e){try{S(O,t,{value:e,configurable:!0,writable:!0})}catch(r){O[t]=e}return e},k=O["__core-js_shared__"]||T("__core-js_shared__",{}),I=b((function(t){(t.exports=function(t,e){return k[t]||(k[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})})),j=function(t){try{return!!t()}catch(t){return!0}},P=!j((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),_=Function.prototype,M=_.call,L=P&&_.bind.bind(M,M),R=function(t){return P?L(t):function(){return M.apply(t,arguments)}},C=R({}.toString),N=R("".slice),D=function(t){return N(C(t),8,-1)},F=function(t){if("Function"===D(t))return R(t)},W=function(t){return null==t},z=TypeError,B=function(t){if(W(t))throw z("Can't call method on "+t);return t},U=Object,G=function(t){return U(B(t))},H=F({}.hasOwnProperty),V=Object.hasOwn||function(t,e){return H(G(t),e)},q=0,Z=Math.random(),Y=F(1..toString),$=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Y(++q+Z,36)},K="object"==typeof document&&document.all,Q={all:K,IS_HTMLDDA:void 0===K&&void 0!==K},X=Q.all,J=Q.IS_HTMLDDA?function(t){return"function"==typeof t||t===X}:function(t){return"function"==typeof t},tt=function(t){return J(t)?t:void 0},et=function(t,e){return arguments.length<2?tt(O[t]):O[t]&&O[t][e]},rt=et("navigator","userAgent")||"",nt=O.process,ot=O.Deno,it=nt&&nt.versions||ot&&ot.version,at=it&&it.v8;at&&(E=(w=at.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!E&&rt&&(!(w=rt.match(/Edge\\/(\\d+)/))||w[1]>=74)&&(w=rt.match(/Chrome\\/(\\d+)/))&&(E=+w[1]);var ut=E,st=!!Object.getOwnPropertySymbols&&!j((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ut&&ut<41})),ct=st&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ft=I("wks"),lt=O.Symbol,ht=lt&&lt.for,pt=ct?lt:lt&&lt.withoutSetter||$,vt=function(t){if(!V(ft,t)||!st&&"string"!=typeof ft[t]){var e="Symbol."+t;st&&V(lt,t)?ft[t]=lt[t]:ft[t]=ct&&ht?ht(e):pt(e)}return ft[t]},dt={};dt[vt("toStringTag")]="z";var yt="[object z]"===String(dt),gt=!j((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),mt=Q.all,xt=Q.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:J(t)||t===mt}:function(t){return"object"==typeof t?null!==t:J(t)},bt=O.document,wt=xt(bt)&&xt(bt.createElement),Et=function(t){return wt?bt.createElement(t):{}},At=!gt&&!j((function(){return 7!=Object.defineProperty(Et("div"),"a",{get:function(){return 7}}).a})),Ot=gt&&j((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),St=String,Tt=TypeError,kt=function(t){if(xt(t))return t;throw Tt(St(t)+" is not an object")},It=Function.prototype.call,jt=P?It.bind(It):function(){return It.apply(It,arguments)},Pt=F({}.isPrototypeOf),_t=Object,Mt=ct?function(t){return"symbol"==typeof t}:function(t){var e=et("Symbol");return J(e)&&Pt(e.prototype,_t(t))},Lt=String,Rt=function(t){try{return Lt(t)}catch(t){return"Object"}},Ct=TypeError,Nt=function(t){if(J(t))return t;throw Ct(Rt(t)+" is not a function")},Dt=function(t,e){var r=t[e];return W(r)?void 0:Nt(r)},Ft=TypeError,Wt=TypeError,zt=vt("toPrimitive"),Bt=function(t,e){if(!xt(t)||Mt(t))return t;var r,n=Dt(t,zt);if(n){if(void 0===e&&(e="default"),r=jt(n,t,e),!xt(r)||Mt(r))return r;throw Wt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&J(r=t.toString)&&!xt(n=jt(r,t)))return n;if(J(r=t.valueOf)&&!xt(n=jt(r,t)))return n;if("string"!==e&&J(r=t.toString)&&!xt(n=jt(r,t)))return n;throw Ft("Can't convert object to primitive value")}(t,e)},Ut=function(t){var e=Bt(t,"string");return Mt(e)?e:e+""},Gt=TypeError,Ht=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,qt={f:gt?Ot?function(t,e,r){if(kt(t),e=Ut(e),kt(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Vt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return Ht(t,e,r)}:Ht:function(t,e,r){if(kt(t),e=Ut(e),kt(r),At)try{return Ht(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Gt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Zt=Function.prototype,Yt=gt&&Object.getOwnPropertyDescriptor,$t=V(Zt,"name"),Kt={EXISTS:$t,PROPER:$t&&"something"===function(){}.name,CONFIGURABLE:$t&&(!gt||gt&&Yt(Zt,"name").configurable)},Qt=F(Function.toString);J(k.inspectSource)||(k.inspectSource=function(t){return Qt(t)});var Xt,Jt,te,ee=k.inspectSource,re=O.WeakMap,ne=J(re)&&/native code/.test(String(re)),oe=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ie=gt?function(t,e,r){return qt.f(t,e,oe(1,r))}:function(t,e,r){return t[e]=r,t},ae=I("keys"),ue=function(t){return ae[t]||(ae[t]=$(t))},se={},ce=O.TypeError,fe=O.WeakMap;if(ne||k.state){var le=k.state||(k.state=new fe);le.get=le.get,le.has=le.has,le.set=le.set,Xt=function(t,e){if(le.has(t))throw ce("Object already initialized");return e.facade=t,le.set(t,e),e},Jt=function(t){return le.get(t)||{}},te=function(t){return le.has(t)}}else{var he=ue("state");se[he]=!0,Xt=function(t,e){if(V(t,he))throw ce("Object already initialized");return e.facade=t,ie(t,he,e),e},Jt=function(t){return V(t,he)?t[he]:{}},te=function(t){return V(t,he)}}var pe={set:Xt,get:Jt,has:te,enforce:function(t){return te(t)?Jt(t):Xt(t,{})},getterFor:function(t){return function(e){var r;if(!xt(e)||(r=Jt(e)).type!==t)throw ce("Incompatible receiver, "+t+" required");return r}}},ve=b((function(t){var e=Kt.CONFIGURABLE,r=pe.enforce,n=pe.get,o=Object.defineProperty,i=gt&&!j((function(){return 8!==o((function(){}),"length",{value:8}).length})),a=String(String).split("String"),u=t.exports=function(t,n,u){"Symbol("===String(n).slice(0,7)&&(n="["+String(n).replace(/^Symbol\\(([^)]*)\\)/,"$1")+"]"),u&&u.getter&&(n="get "+n),u&&u.setter&&(n="set "+n),(!V(t,"name")||e&&t.name!==n)&&(gt?o(t,"name",{value:n,configurable:!0}):t.name=n),i&&u&&V(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&V(u,"constructor")&&u.constructor?gt&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=r(t);return V(s,"source")||(s.source=a.join("string"==typeof n?n:"")),t};Function.prototype.toString=u((function(){return J(this)&&n(this).source||ee(this)}),"toString")})),de=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(J(r)&&ve(r,i,n),n.global)o?t[e]=r:T(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:qt.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},ye=vt("toStringTag"),ge=Object,me="Arguments"==D(function(){return arguments}()),xe=yt?D:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ge(t),ye))?r:me?D(e):"Object"==(n=D(e))&&J(e.callee)?"Arguments":n},be=yt?{}.toString:function(){return"[object "+xe(this)+"]"};yt||de(Object.prototype,"toString",be,{unsafe:!0});var we={}.propertyIsEnumerable,Ee=Object.getOwnPropertyDescriptor,Ae={f:Ee&&!we.call({1:2},1)?function(t){var e=Ee(this,t);return!!e&&e.enumerable}:we},Oe=Object,Se=F("".split),Te=j((function(){return!Oe("z").propertyIsEnumerable(0)}))?function(t){return"String"==D(t)?Se(t,""):Oe(t)}:Oe,ke=function(t){return Te(B(t))},Ie=Object.getOwnPropertyDescriptor,je={f:gt?Ie:function(t,e){if(t=ke(t),e=Ut(e),At)try{return Ie(t,e)}catch(t){}if(V(t,e))return oe(!jt(Ae.f,t,e),t[e])}},Pe=Math.ceil,_e=Math.floor,Me=Math.trunc||function(t){var e=+t;return(e>0?_e:Pe)(e)},Le=function(t){var e=+t;return e!=e||0===e?0:Me(e)},Re=Math.max,Ce=Math.min,Ne=function(t,e){var r=Le(t);return r<0?Re(r+e,0):Ce(r,e)},De=Math.min,Fe=function(t){return t>0?De(Le(t),9007199254740991):0},We=function(t){return Fe(t.length)},ze=function(t){return function(e,r,n){var o,i=ke(e),a=We(i),u=Ne(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},Be={includes:ze(!0),indexOf:ze(!1)},Ue=Be.indexOf,Ge=F([].push),He=function(t,e){var r,n=ke(t),o=0,i=[];for(r in n)!V(se,r)&&V(n,r)&&Ge(i,r);for(;e.length>o;)V(n,r=e[o++])&&(~Ue(i,r)||Ge(i,r));return i},Ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qe=Ve.concat("length","prototype"),Ze={f:Object.getOwnPropertyNames||function(t){return He(t,qe)}},Ye={f:Object.getOwnPropertySymbols},$e=F([].concat),Ke=et("Reflect","ownKeys")||function(t){var e=Ze.f(kt(t)),r=Ye.f;return r?$e(e,r(t)):e},Qe=function(t,e,r){for(var n=Ke(e),o=qt.f,i=je.f,a=0;a<n.length;a++){var u=n[a];V(t,u)||r&&V(r,u)||o(t,u,i(e,u))}},Xe=/#|\\.prototype\\./,Je=function(t,e){var r=er[tr(t)];return r==nr||r!=rr&&(J(e)?j(e):!!e)},tr=Je.normalize=function(t){return String(t).replace(Xe,".").toLowerCase()},er=Je.data={},rr=Je.NATIVE="N",nr=Je.POLYFILL="P",or=Je,ir=je.f,ar=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?O:c?O[u]||T(u,{}):(O[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=ir(r,n))&&a.value:r[n],!or(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Qe(i,o)}(t.sham||o&&o.sham)&&ie(i,"sham",!0),de(r,n,i,t)}},ur="process"==D(O.process),sr=String,cr=TypeError,fr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=F(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return kt(r),function(t){if("object"==typeof t||J(t))return t;throw cr("Can't set "+sr(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),lr=qt.f,hr=vt("toStringTag"),pr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!V(t,hr)&&lr(t,hr,{configurable:!0,value:e})},vr=vt("species"),dr=function(t){var e=et(t),r=qt.f;gt&&e&&!e[vr]&&r(e,vr,{configurable:!0,get:function(){return this}})},yr=TypeError,gr=function(t,e){if(Pt(e,t))return t;throw yr("Incorrect invocation")},mr=function(){},xr=[],br=et("Reflect","construct"),wr=/^\\s*(?:class|function)\\b/,Er=F(wr.exec),Ar=!wr.exec(mr),Or=function(t){if(!J(t))return!1;try{return br(mr,xr,t),!0}catch(t){return!1}},Sr=function(t){if(!J(t))return!1;switch(xe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ar||!!Er(wr,ee(t))}catch(t){return!0}};Sr.sham=!0;var Tr,kr,Ir,jr,Pr=!br||j((function(){var t;return Or(Or.call)||!Or(Object)||!Or((function(){t=!0}))||t}))?Sr:Or,_r=TypeError,Mr=function(t){if(Pr(t))return t;throw _r(Rt(t)+" is not a constructor")},Lr=vt("species"),Rr=function(t,e){var r,n=kt(t).constructor;return void 0===n||W(r=kt(n)[Lr])?e:Mr(r)},Cr=Function.prototype,Nr=Cr.apply,Dr=Cr.call,Fr="object"==typeof Reflect&&Reflect.apply||(P?Dr.bind(Nr):function(){return Dr.apply(Nr,arguments)}),Wr=F(F.bind),zr=function(t,e){return Nt(t),void 0===e?t:P?Wr(t,e):function(){return t.apply(e,arguments)}},Br=et("document","documentElement"),Ur=F([].slice),Gr=TypeError,Hr=function(t,e){if(t<e)throw Gr("Not enough arguments");return t},Vr=/(?:ipad|iphone|ipod).*applewebkit/i.test(rt),qr=O.setImmediate,Zr=O.clearImmediate,Yr=O.process,$r=O.Dispatch,Kr=O.Function,Qr=O.MessageChannel,Xr=O.String,Jr=0,tn={};try{Tr=O.location}catch(t){}var en=function(t){if(V(tn,t)){var e=tn[t];delete tn[t],e()}},rn=function(t){return function(){en(t)}},nn=function(t){en(t.data)},on=function(t){O.postMessage(Xr(t),Tr.protocol+"//"+Tr.host)};qr&&Zr||(qr=function(t){Hr(arguments.length,1);var e=J(t)?t:Kr(t),r=Ur(arguments,1);return tn[++Jr]=function(){Fr(e,void 0,r)},kr(Jr),Jr},Zr=function(t){delete tn[t]},ur?kr=function(t){Yr.nextTick(rn(t))}:$r&&$r.now?kr=function(t){$r.now(rn(t))}:Qr&&!Vr?(jr=(Ir=new Qr).port2,Ir.port1.onmessage=nn,kr=zr(jr.postMessage,jr)):O.addEventListener&&J(O.postMessage)&&!O.importScripts&&Tr&&"file:"!==Tr.protocol&&!j(on)?(kr=on,O.addEventListener("message",nn,!1)):kr="onreadystatechange"in Et("script")?function(t){Br.appendChild(Et("script")).onreadystatechange=function(){Br.removeChild(this),en(t)}}:function(t){setTimeout(rn(t),0)});var an,un,sn,cn,fn,ln,hn,pn,vn={set:qr,clear:Zr},dn=/ipad|iphone|ipod/i.test(rt)&&void 0!==O.Pebble,yn=/web0s(?!.*chrome)/i.test(rt),gn=je.f,mn=vn.set,xn=O.MutationObserver||O.WebKitMutationObserver,bn=O.document,wn=O.process,En=O.Promise,An=gn(O,"queueMicrotask"),On=An&&An.value;On||(an=function(){var t,e;for(ur&&(t=wn.domain)&&t.exit();un;){e=un.fn,un=un.next;try{e()}catch(t){throw un?cn():sn=void 0,t}}sn=void 0,t&&t.enter()},Vr||ur||yn||!xn||!bn?!dn&&En&&En.resolve?((hn=En.resolve(void 0)).constructor=En,pn=zr(hn.then,hn),cn=function(){pn(an)}):ur?cn=function(){wn.nextTick(an)}:(mn=zr(mn,O),cn=function(){mn(an)}):(fn=!0,ln=bn.createTextNode(""),new xn(an).observe(ln,{characterData:!0}),cn=function(){ln.data=fn=!fn}));var Sn=On||function(t){var e={fn:t,next:void 0};sn&&(sn.next=e),un||(un=e,cn()),sn=e},Tn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},kn=function(){this.head=null,this.tail=null};kn.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var In,jn,Pn,_n=kn,Mn=O.Promise,Ln="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Rn=!Ln&&!ur&&"object"==typeof window&&"object"==typeof document,Cn=(Mn&&Mn.prototype,vt("species")),Nn=!1,Dn=J(O.PromiseRejectionEvent),Fn={CONSTRUCTOR:or("Promise",(function(){var t=ee(Mn),e=t!==String(Mn);if(!e&&66===ut)return!0;if(!ut||ut<51||!/native code/.test(t)){var r=new Mn((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Cn]=n,!(Nn=r.then((function(){}))instanceof n))return!0}return!e&&(Rn||Ln)&&!Dn})),REJECTION_EVENT:Dn,SUBCLASSING:Nn},Wn=TypeError,zn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Wn("Bad Promise constructor");e=t,r=n})),this.resolve=Nt(e),this.reject=Nt(r)},Bn={f:function(t){return new zn(t)}},Un=vn.set,Gn=Fn.CONSTRUCTOR,Hn=Fn.REJECTION_EVENT,Vn=Fn.SUBCLASSING,qn=pe.getterFor("Promise"),Zn=pe.set,Yn=Mn&&Mn.prototype,$n=Mn,Kn=Yn,Qn=O.TypeError,Xn=O.document,Jn=O.process,to=Bn.f,eo=to,ro=!!(Xn&&Xn.createEvent&&O.dispatchEvent),no=function(t){var e;return!(!xt(t)||!J(e=t.then))&&e},oo=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&co(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Qn("Promise-chain cycle")):(n=no(r))?jt(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},io=function(t,e){t.notified||(t.notified=!0,Sn((function(){for(var r,n=t.reactions;r=n.get();)oo(r,t);t.notified=!1,e&&!t.rejection&&uo(t)})))},ao=function(t,e,r){var n,o;ro?((n=Xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),O.dispatchEvent(n)):n={promise:e,reason:r},!Hn&&(o=O["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){var r=O.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)},uo=function(t){jt(Un,O,(function(){var e,r=t.facade,n=t.value;if(so(t)&&(e=Tn((function(){ur?Jn.emit("unhandledRejection",n,r):ao("unhandledrejection",r,n)})),t.rejection=ur||so(t)?2:1,e.error))throw e.value}))},so=function(t){return 1!==t.rejection&&!t.parent},co=function(t){jt(Un,O,(function(){var e=t.facade;ur?Jn.emit("rejectionHandled",e):ao("rejectionhandled",e,t.value)}))},fo=function(t,e,r){return function(n){t(e,n,r)}},lo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,io(t,!0))},ho=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Qn("Promise can't be resolved itself");var n=no(e);n?Sn((function(){var r={done:!1};try{jt(n,e,fo(ho,r,t),fo(lo,r,t))}catch(e){lo(r,e,t)}})):(t.value=e,t.state=1,io(t,!1))}catch(e){lo({done:!1},e,t)}}};if(Gn&&(Kn=($n=function(t){gr(this,Kn),Nt(t),jt(In,this);var e=qn(this);try{t(fo(ho,e),fo(lo,e))}catch(t){lo(e,t)}}).prototype,(In=function(t){Zn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new _n,rejection:!1,state:0,value:void 0})}).prototype=de(Kn,"then",(function(t,e){var r=qn(this),n=to(Rr(this,$n));return r.parent=!0,n.ok=!J(t)||t,n.fail=J(e)&&e,n.domain=ur?Jn.domain:void 0,0==r.state?r.reactions.add(n):Sn((function(){oo(n,r)})),n.promise})),jn=function(){var t=new In,e=qn(t);this.promise=t,this.resolve=fo(ho,e),this.reject=fo(lo,e)},Bn.f=to=function(t){return t===$n||void 0===t?new jn(t):eo(t)},J(Mn)&&Yn!==Object.prototype)){Pn=Yn.then,Vn||de(Yn,"then",(function(t,e){var r=this;return new $n((function(t,e){jt(Pn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Yn.constructor}catch(t){}fr&&fr(Yn,Kn)}ar({global:!0,constructor:!0,wrap:!0,forced:Gn},{Promise:$n}),pr($n,"Promise",!1),dr("Promise");var po={},vo=vt("iterator"),yo=Array.prototype,go=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},mo=vt("iterator"),xo=function(t){if(!W(t))return Dt(t,mo)||Dt(t,"@@iterator")||po[xe(t)]},bo=TypeError,wo=function(t,e){var r=arguments.length<2?xo(t):e;if(Nt(r))return kt(jt(r,t));throw bo(Rt(t)+" is not iterable")},Eo=function(t,e,r){var n,o;kt(t);try{if(!(n=Dt(t,"return"))){if("throw"===e)throw r;return r}n=jt(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return kt(n),r},Ao=TypeError,Oo=function(t,e){this.stopped=t,this.result=e},So=Oo.prototype,To=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=zr(e,f),y=function(t){return n&&Eo(n,"normal",t),new Oo(!0,t)},g=function(t){return l?(kt(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=xo(t)))throw Ao(Rt(t)+" is not iterable");if(go(o)){for(i=0,a=We(t);a>i;i++)if((u=g(t[i]))&&Pt(So,u))return u;return new Oo(!1)}n=wo(t,o)}for(s=h?t.next:n.next;!(c=jt(s,n)).done;){try{u=g(c.value)}catch(t){Eo(n,"throw",t)}if("object"==typeof u&&u&&Pt(So,u))return u}return new Oo(!1)},ko=vt("iterator"),Io=!1;try{var jo=0,Po={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Po[ko]=function(){return this},Array.from(Po,(function(){throw 2}))}catch(t){}var _o=function(t,e){if(!e&&!Io)return!1;var r=!1;try{var n={};n[ko]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Mo=Fn.CONSTRUCTOR||!_o((function(t){Mn.all(t).then(void 0,(function(){}))}));ar({target:"Promise",stat:!0,forced:Mo},{all:function(t){var e=this,r=Bn.f(e),n=r.resolve,o=r.reject,i=Tn((function(){var r=Nt(e.resolve),i=[],a=0,u=1;To(t,(function(t){var s=a++,c=!1;u++,jt(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Lo=Fn.CONSTRUCTOR,Ro=Mn&&Mn.prototype;if(ar({target:"Promise",proto:!0,forced:Lo,real:!0},{catch:function(t){return this.then(void 0,t)}}),J(Mn)){var Co=et("Promise").prototype.catch;Ro.catch!==Co&&de(Ro,"catch",Co,{unsafe:!0})}ar({target:"Promise",stat:!0,forced:Mo},{race:function(t){var e=this,r=Bn.f(e),n=r.reject,o=Tn((function(){var o=Nt(e.resolve);To(t,(function(t){jt(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ar({target:"Promise",stat:!0,forced:Fn.CONSTRUCTOR},{reject:function(t){var e=Bn.f(this);return jt(e.reject,void 0,t),e.promise}});var No=Fn.CONSTRUCTOR;et("Promise");function Do(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ar({target:"Promise",stat:!0,forced:No},{resolve:function(t){return function(t,e){if(kt(t),xt(e)&&e.constructor===t)return e;var r=Bn.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Fo="undefined"!=typeof window&&void 0!==window.orientation,Wo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),zo=new Map;function Bo(t){Do(t.source&&!t.url||!t.source&&t.url);var e=zo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uo((e=t,"try {\\n  importScripts('"+e+"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),zo.set(t.url,e)),t.source&&(e=Uo(t.source),zo.set(t.source,e))),Do(e),e}function Uo(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Go(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Ho(t))n.add(t);else if(Ho(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Go(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Ho(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Vo=function(){},qo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Do(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=Vo,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=Vo,this.onError=Vo,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Go(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Bo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Zo=self&&self.__assign||function(){return(Zo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yo=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$o=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Zo(Zo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),Yo(this,void 0,void 0,(function(){var n,o=this;return $o(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Yo(this,void 0,void 0,(function(){var t,e,r;return $o(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new Wo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new qo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Fo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Qo=self&&self.__assign||function(){return(Qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ti=(function(){function t(t){this.workerPools=new Map,this.props=Qo({},Jo),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return qo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Xo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Qo(Qo({},this.props),t);try{for(var n=Xo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Ko({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ei=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ti.get(t);e||(e=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ti.get(t);ti.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Go(e);self.postMessage(r,n)}},t}();function ri(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var ni,oi,ii=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ai=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},ui=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},si=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},ci=0;function fi(t,e){var r=this;if("undefined"!=typeof self){var n={process:li};ei.onmessage=function(o,i){return ai(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return ui(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ei.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");ni=new ii,oi=i.options||{},a=e(ni,oi,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=si(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ei.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ei.postMessage("done",{}),[3,18];case 16:return ni.push(i.input),[3,18];case 17:return ni.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ei.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function li(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=ci++,i=function(t,e){if(e.id===o)switch(t){case"done":ei.removeEventListener(i),r(e.result);break;case"error":ei.removeEventListener(i),n(e.error)}};ei.addEventListener(i);var a={id:o,input:t,options:e};ei.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pi=Et("span").classList,vi=pi&&pi.constructor&&pi.constructor.prototype,di=vi===Object.prototype?void 0:vi,yi=Array.isArray||function(t){return"Array"==D(t)},gi=vt("species"),mi=Array,xi=function(t,e){return new(function(t){var e;return yi(t)&&(e=t.constructor,(Pr(e)&&(e===mi||yi(e.prototype))||xt(e)&&null===(e=e[gi]))&&(e=void 0)),void 0===e?mi:e}(t))(0===e?0:e)},bi=F([].push),wi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=G(s),d=Te(v),y=zr(c,f),g=We(d),m=0,x=l||xi,b=e?x(s,g):r||a?x(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)b[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:bi(b,h)}else switch(t){case 4:return!1;case 7:bi(b,h)}return i?-1:n||o?o:b}},Ei={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterReject:wi(7)},Ai=function(t,e){var r=[][t];return!!r&&j((function(){r.call(null,e||function(){return 1},1)}))},Oi=Ei.forEach,Si=Ai("forEach")?[].forEach:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)},Ti=function(t){if(t&&t.forEach!==Si)try{ie(t,"forEach",Si)}catch(e){t.forEach=Si}};for(var ki in hi)hi[ki]&&Ti(O[ki]&&O[ki].prototype);Ti(di);var Ii=function(t,e,r){var n=Ut(e);n in t?qt.f(t,n,oe(0,r)):t[n]=r},ji=vt("species"),Pi=function(t){return ut>=51||!j((function(){var e=[];return(e.constructor={})[ji]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_i=Pi("slice"),Mi=vt("species"),Li=Array,Ri=Math.max;ar({target:"Array",proto:!0,forced:!_i},{slice:function(t,e){var r,n,o,i=ke(this),a=We(i),u=Ne(t,a),s=Ne(void 0===e?a:e,a);if(yi(i)&&(r=i.constructor,(Pr(r)&&(r===Li||yi(r.prototype))||xt(r)&&null===(r=r[Mi]))&&(r=void 0),r===Li||void 0===r))return Ur(i,u,s);for(n=new(void 0===r?Li:r)(Ri(s-u,0)),o=0;u<s;u++,o++)u in i&&Ii(n,o,i[u]);return n.length=o,n}});var Ci=Kt.EXISTS,Ni=qt.f,Di=Function.prototype,Fi=F(Di.toString),Wi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,zi=F(Wi.exec);gt&&!Ci&&Ni(Di,"name",{configurable:!0,get:function(){try{return zi(Wi,Fi(this))[1]}catch(t){return""}}});var Bi=Ei.map,Ui=Pi("map");ar({target:"Array",proto:!0,forced:!Ui},{map:function(t){return Bi(this,t,arguments.length>1?arguments[1]:void 0)}});var Gi,Hi=Object.keys||function(t){return He(t,Ve)},Vi={f:gt&&!Ot?Object.defineProperties:function(t,e){kt(t);for(var r,n=ke(e),o=Hi(e),i=o.length,a=0;i>a;)qt.f(t,r=o[a++],n[r]);return t}},qi=ue("IE_PROTO"),Zi=function(){},Yi=function(t){return"<script>"+t+"<\\/script>"},$i=function(t){t.write(Yi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Ki=function(){try{Gi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ki="undefined"!=typeof document?document.domain&&Gi?$i(Gi):((e=Et("iframe")).style.display="none",Br.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Yi("document.F=Object")),t.close(),t.F):$i(Gi);for(var r=Ve.length;r--;)delete Ki.prototype[Ve[r]];return Ki()};se[qi]=!0;var Qi=Object.create||function(t,e){var r;return null!==t?(Zi.prototype=kt(t),r=new Zi,Zi.prototype=null,r[qi]=t):r=Ki(),void 0===e?r:Vi.f(r,e)},Xi=qt.f,Ji=vt("unscopables"),ta=Array.prototype;null==ta[Ji]&&Xi(ta,Ji,{configurable:!0,value:Qi(null)});var ea,ra,na,oa=function(t){ta[Ji][t]=!0},ia=!j((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),aa=ue("IE_PROTO"),ua=Object,sa=ua.prototype,ca=ia?ua.getPrototypeOf:function(t){var e=G(t);if(V(e,aa))return e[aa];var r=e.constructor;return J(r)&&e instanceof r?r.prototype:e instanceof ua?sa:null},fa=vt("iterator"),la=!1;[].keys&&("next"in(na=[].keys())?(ra=ca(ca(na)))!==Object.prototype&&(ea=ra):la=!0),(!xt(ea)||j((function(){var t={};return ea[fa].call(t)!==t})))&&(ea={}),J(ea[fa])||de(ea,fa,(function(){return this}));var ha={IteratorPrototype:ea,BUGGY_SAFARI_ITERATORS:la},pa=ha.IteratorPrototype,va=function(){return this},da=Kt.PROPER,ya=Kt.CONFIGURABLE,ga=ha.IteratorPrototype,ma=ha.BUGGY_SAFARI_ITERATORS,xa=vt("iterator"),ba=function(){return this},wa=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=Qi(pa,{next:oe(+!n,r)}),pr(t,o,!1),po[o]=va}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!ma&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[xa]||p["@@iterator"]||o&&p[o],d=!ma&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=ca(y.call(new t)))!==Object.prototype&&u.next&&(ca(u)!==ga&&(fr?fr(u,ga):J(u[xa])||de(u,xa,ba)),pr(u,l,!0)),da&&"values"==o&&v&&"values"!==v.name&&(ya?ie(p,"name","values"):(h=!0,d=function(){return jt(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(ma||h||!(c in p))&&de(p,c,s[c]);else ar({target:e,proto:!0,forced:ma||h},s);return p[xa]!==d&&de(p,xa,d,{name:o}),po[e]=d,s},Ea=function(t,e){return{value:t,done:e}},Aa=qt.f,Oa=pe.set,Sa=pe.getterFor("Array Iterator"),Ta=wa(Array,"Array",(function(t,e){Oa(this,{type:"Array Iterator",target:ke(t),index:0,kind:e})}),(function(){var t=Sa(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Ea(void 0,!0)):Ea("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),ka=po.Arguments=po.Array;if(oa("keys"),oa("values"),oa("entries"),gt&&"values"!==ka.name)try{Aa(ka,"name",{value:"values"})}catch(t){}var Ia,ja,Pa,_a="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ma=qt.f,La=pe.enforce,Ra=pe.get,Ca=O.Int8Array,Na=Ca&&Ca.prototype,Da=O.Uint8ClampedArray,Fa=Da&&Da.prototype,Wa=Ca&&ca(Ca),za=Na&&ca(Na),Ba=Object.prototype,Ua=O.TypeError,Ga=vt("toStringTag"),Ha=$("TYPED_ARRAY_TAG"),Va=_a&&!!fr&&"Opera"!==xe(O.opera),qa=!1,Za={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ya={BigInt64Array:8,BigUint64Array:8},$a=function(t){var e=ca(t);if(xt(e)){var r=Ra(e);return r&&V(r,"TypedArrayConstructor")?r.TypedArrayConstructor:$a(e)}},Ka=function(t){if(!xt(t))return!1;var e=xe(t);return V(Za,e)||V(Ya,e)};for(Ia in Za)(Pa=(ja=O[Ia])&&ja.prototype)?La(Pa).TypedArrayConstructor=ja:Va=!1;for(Ia in Ya)(Pa=(ja=O[Ia])&&ja.prototype)&&(La(Pa).TypedArrayConstructor=ja);if((!Va||!J(Wa)||Wa===Function.prototype)&&(Wa=function(){throw Ua("Incorrect invocation")},Va))for(Ia in Za)O[Ia]&&fr(O[Ia],Wa);if((!Va||!za||za===Ba)&&(za=Wa.prototype,Va))for(Ia in Za)O[Ia]&&fr(O[Ia].prototype,za);if(Va&&ca(Fa)!==za&&fr(Fa,za),gt&&!V(za,Ga))for(Ia in qa=!0,Ma(za,Ga,{get:function(){return xt(this)?this[Ha]:void 0}}),Za)O[Ia]&&ie(O[Ia],Ha,Ia);var Qa={NATIVE_ARRAY_BUFFER_VIEWS:Va,TYPED_ARRAY_TAG:qa&&Ha,aTypedArray:function(t){if(Ka(t))return t;throw Ua("Target is not a typed array")},aTypedArrayConstructor:function(t){if(J(t)&&(!fr||Pt(Wa,t)))return t;throw Ua(Rt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(gt){if(r)for(var o in Za){var i=O[o];if(i&&V(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}za[t]&&!r||de(za,t,r?e:Va&&Na[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(gt){if(fr){if(r)for(n in Za)if((o=O[n])&&V(o,t))try{delete o[t]}catch(t){}if(Wa[t]&&!r)return;try{return de(Wa,t,r?e:Va&&Wa[t]||e)}catch(t){}}for(n in Za)!(o=O[n])||o[t]&&!r||de(o,t,e)}},getTypedArrayConstructor:$a,isView:function(t){if(!xt(t))return!1;var e=xe(t);return"DataView"===e||V(Za,e)||V(Ya,e)},isTypedArray:Ka,TypedArray:Wa,TypedArrayPrototype:za},Xa=Qa.NATIVE_ARRAY_BUFFER_VIEWS,Ja=O.ArrayBuffer,tu=O.Int8Array,eu=!Xa||!j((function(){tu(1)}))||!j((function(){new tu(-1)}))||!_o((function(t){new tu,new tu(null),new tu(1.5),new tu(t)}),!0)||j((function(){return 1!==new tu(new Ja(2),1,void 0).length})),ru=function(t,e,r){for(var n in e)de(t,n,e[n],r);return t},nu=RangeError,ou=function(t){if(void 0===t)return 0;var e=Le(t),r=Fe(e);if(e!==r)throw nu("Wrong length or index");return r},iu=Array,au=Math.abs,uu=Math.pow,su=Math.floor,cu=Math.log,fu=Math.LN2,lu=function(t,e,r){var n,o,i,a=iu(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?uu(2,-24)-uu(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=au(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=su(cu(t)/fu),t*(i=uu(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*uu(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*uu(2,e),n+=c):(o=t*uu(2,c-1)*uu(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},hu=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=uu(2,e),f-=a}return(c?-1:1)*r*uu(2,f-e)},pu=function(t){for(var e=G(this),r=We(e),n=arguments.length,o=Ne(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ne(i,r);a>o;)e[o++]=t;return e},vu=Array,du=Math.max,yu=function(t,e,r){for(var n=We(t),o=Ne(e,n),i=Ne(void 0===r?n:r,n),a=vu(du(i-o,0)),u=0;o<i;o++,u++)Ii(a,u,t[o]);return a.length=u,a},gu=Ze.f,mu=qt.f,xu=Kt.PROPER,bu=Kt.CONFIGURABLE,wu=pe.get,Eu=pe.set,Au=O.ArrayBuffer,Ou=Au,Su=Ou&&Ou.prototype,Tu=O.DataView,ku=Tu&&Tu.prototype,Iu=Object.prototype,ju=O.Array,Pu=O.RangeError,_u=F(pu),Mu=F([].reverse),Lu=lu,Ru=hu,Cu=function(t){return[255&t]},Nu=function(t){return[255&t,t>>8&255]},Du=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Fu=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Wu=function(t){return Lu(t,23,4)},zu=function(t){return Lu(t,52,8)},Bu=function(t,e){mu(t.prototype,e,{get:function(){return wu(this)[e]}})},Uu=function(t,e,r,n){var o=ou(r),i=wu(t);if(o+e>i.byteLength)throw Pu("Wrong index");var a=wu(i.buffer).bytes,u=o+i.byteOffset,s=yu(a,u,u+e);return n?s:Mu(s)},Gu=function(t,e,r,n,o,i){var a=ou(r),u=wu(t);if(a+e>u.byteLength)throw Pu("Wrong index");for(var s=wu(u.buffer).bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(_a){var Hu=xu&&"ArrayBuffer"!==Au.name;if(j((function(){Au(1)}))&&j((function(){new Au(-1)}))&&!j((function(){return new Au,new Au(1.5),new Au(NaN),1!=Au.length||Hu&&!bu})))Hu&&bu&&ie(Au,"name","ArrayBuffer");else{(Ou=function(t){return gr(this,Su),new Au(ou(t))}).prototype=Su;for(var Vu,qu=gu(Au),Zu=0;qu.length>Zu;)(Vu=qu[Zu++])in Ou||ie(Ou,Vu,Au[Vu]);Su.constructor=Ou}fr&&ca(ku)!==Iu&&fr(ku,Iu);var Yu=new Tu(new Ou(2)),$u=F(ku.setInt8);Yu.setInt8(0,2147483648),Yu.setInt8(1,2147483649),!Yu.getInt8(0)&&Yu.getInt8(1)||ru(ku,{setInt8:function(t,e){$u(this,t,e<<24>>24)},setUint8:function(t,e){$u(this,t,e<<24>>24)}},{unsafe:!0})}else Su=(Ou=function(t){gr(this,Su);var e=ou(t);Eu(this,{bytes:_u(ju(e),0),byteLength:e}),gt||(this.byteLength=e)}).prototype,ku=(Tu=function(t,e,r){gr(this,ku),gr(t,Su);var n=wu(t).byteLength,o=Le(e);if(o<0||o>n)throw Pu("Wrong offset");if(o+(r=void 0===r?n-o:Fe(r))>n)throw Pu("Wrong length");Eu(this,{buffer:t,byteLength:r,byteOffset:o}),gt||(this.buffer=t,this.byteLength=r,this.byteOffset=o)}).prototype,gt&&(Bu(Ou,"byteLength"),Bu(Tu,"buffer"),Bu(Tu,"byteLength"),Bu(Tu,"byteOffset")),ru(ku,{getInt8:function(t){return Uu(this,1,t)[0]<<24>>24},getUint8:function(t){return Uu(this,1,t)[0]},getInt16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Ru(Uu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Ru(Uu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Gu(this,1,t,Cu,e)},setUint8:function(t,e){Gu(this,1,t,Cu,e)},setInt16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Gu(this,4,t,Wu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Gu(this,8,t,zu,e,arguments.length>2?arguments[2]:void 0)}});pr(Ou,"ArrayBuffer"),pr(Tu,"DataView");var Ku={ArrayBuffer:Ou,DataView:Tu},Qu=Math.floor,Xu=Number.isInteger||function(t){return!xt(t)&&isFinite(t)&&Qu(t)===t},Ju=RangeError,ts=RangeError,es=function(t,e){var r=function(t){var e=Le(t);if(e<0)throw Ju("The argument can't be less than 0");return e}(t);if(r%e)throw ts("Wrong offset");return r},rs=F("".slice),ns=function(t){return"Big"===rs(xe(t),0,3)},os=TypeError,is=function(t){var e=Bt(t,"number");if("number"==typeof e)throw os("Can't convert number to bigint");return BigInt(e)},as=Qa.aTypedArrayConstructor,us=function(t){var e,r,n,o,i,a,u,s,c=Mr(this),f=G(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=xo(f);if(v&&!go(v))for(s=(u=wo(f,v)).next,f=[];!(a=jt(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=zr(h,arguments[2])),r=We(f),n=new(as(c))(r),o=ns(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?is(i):+i;return n},ss=function(t,e,r){var n,o;return fr&&J(n=e.constructor)&&n!==r&&xt(o=n.prototype)&&o!==r.prototype&&fr(t,o),t},cs=b((function(t){var e=Ze.f,r=Ei.forEach,n=pe.get,o=pe.set,i=pe.enforce,a=qt.f,u=je.f,s=Math.round,c=O.RangeError,f=Ku.ArrayBuffer,l=f.prototype,h=Ku.DataView,p=Qa.NATIVE_ARRAY_BUFFER_VIEWS,v=Qa.TYPED_ARRAY_TAG,d=Qa.TypedArray,y=Qa.TypedArrayPrototype,g=Qa.aTypedArrayConstructor,m=Qa.isTypedArray,x=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},b=function(t,e){a(t,e,{get:function(){return n(this)[e]}})},w=function(t){var e;return Pt(l,t)||"ArrayBuffer"==(e=xe(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!Mt(e)&&e in t&&Xu(+e)&&e>=0},A=function(t,e){return e=Ut(e),E(t,e)?oe(2,t[e]):u(t,e)},S=function(t,e,r){return e=Ut(e),!(E(t,e)&&xt(r)&&V(r,"value"))||V(r,"get")||V(r,"set")||r.configurable||V(r,"writable")&&!r.writable||V(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};gt?(p||(je.f=A,qt.f=S,b(y,"buffer"),b(y,"byteOffset"),b(y,"byteLength"),b(y,"length")),ar({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:S}),t.exports=function(t,u,l){var g=t.match(/\\d+$/)[0]/8,b=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,S=O[b],T=S,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?eu&&(T=u((function(t,e,r,n){return gr(t,k),ss(xt(e)?w(e)?void 0!==n?new S(e,es(r,g),n):void 0!==r?new S(e,es(r,g)):new S(e):m(e)?x(T,e):jt(us,T,e):new S(ou(e)),t,T)})),fr&&fr(T,d),r(e(S),(function(t){t in T||ie(T,t,S[t])})),T.prototype=k):(T=u((function(t,e,r,n){gr(t,k);var i,a,u,s=0,l=0;if(xt(e)){if(!w(e))return m(e)?x(T,e):jt(us,T,e);i=e,l=es(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=Fe(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=ou(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),fr&&fr(T,d),k=T.prototype=Qi(y)),k.constructor!==T&&ie(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&ie(k,v,b);var P=T!=S;I[b]=T,ar({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||ie(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||ie(k,"BYTES_PER_ELEMENT",g),dr(b)}):t.exports=function(){}}));cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var fs=TypeError,ls=function(t,e){if(!delete t[e])throw fs("Cannot delete property "+Rt(e)+" of "+Rt(t))},hs=Math.min,ps=F([].copyWithin||function(t,e){var r=G(this),n=We(r),o=Ne(t,n),i=Ne(e,n),a=arguments.length>2?arguments[2]:void 0,u=hs((void 0===a?n:Ne(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:ls(r,o),o+=s,i+=s;return r}),vs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("copyWithin",(function(t,e){return ps(vs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ds=Ei.every,ys=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("every",(function(t){return ds(ys(this),t,arguments.length>1?arguments[1]:void 0)}));var gs=Qa.aTypedArray,ms=Qa.exportTypedArrayMethod,xs=F("".slice);ms("fill",(function(t){var e=arguments.length;gs(this);var r="Big"===xs(xe(this),0,3)?is(t):+t;return jt(pu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),j((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var bs=Qa.aTypedArrayConstructor,ws=Qa.getTypedArrayConstructor,Es=function(t){return bs(Rr(t,ws(t)))},As=function(t,e){return function(t,e){for(var r=0,n=We(e),o=new t(n);n>r;)o[r]=e[r++];return o}(Es(t),e)},Os=Ei.filter,Ss=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("filter",(function(t){var e=Os(Ss(this),t,arguments.length>1?arguments[1]:void 0);return As(this,e)}));var Ts=Ei.find,ks=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("find",(function(t){return Ts(ks(this),t,arguments.length>1?arguments[1]:void 0)}));var Is=Ei.findIndex,js=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("findIndex",(function(t){return Is(js(this),t,arguments.length>1?arguments[1]:void 0)}));var Ps=Ei.forEach,_s=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("forEach",(function(t){Ps(_s(this),t,arguments.length>1?arguments[1]:void 0)}));var Ms=Be.includes,Ls=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("includes",(function(t){return Ms(Ls(this),t,arguments.length>1?arguments[1]:void 0)}));var Rs=Be.indexOf,Cs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("indexOf",(function(t){return Rs(Cs(this),t,arguments.length>1?arguments[1]:void 0)}));var Ns=vt("iterator"),Ds=O.Uint8Array,Fs=F(Ta.values),Ws=F(Ta.keys),zs=F(Ta.entries),Bs=Qa.aTypedArray,Us=Qa.exportTypedArrayMethod,Gs=Ds&&Ds.prototype,Hs=!j((function(){Gs[Ns].call([1])})),Vs=!!Gs&&Gs.values&&Gs[Ns]===Gs.values&&"values"===Gs.values.name,qs=function(){return Fs(Bs(this))};Us("entries",(function(){return zs(Bs(this))}),Hs),Us("keys",(function(){return Ws(Bs(this))}),Hs),Us("values",qs,Hs||!Vs,{name:"values"}),Us(Ns,qs,Hs||!Vs,{name:"values"});var Zs=Qa.aTypedArray,Ys=Qa.exportTypedArrayMethod,$s=F([].join);Ys("join",(function(t){return $s(Zs(this),t)}));var Ks=Math.min,Qs=[].lastIndexOf,Xs=!!Qs&&1/[1].lastIndexOf(1,-0)<0,Js=Ai("lastIndexOf"),tc=Xs||!Js?function(t){if(Xs)return Fr(Qs,this,arguments)||0;var e=ke(this),r=We(e),n=r-1;for(arguments.length>1&&(n=Ks(n,Le(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Qs,ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Fr(tc,ec(this),e>1?[t,arguments[1]]:[t])}));var rc=Ei.map,nc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("map",(function(t){return rc(nc(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(Es(t))(e)}))}));var oc=TypeError,ic=function(t){return function(e,r,n,o){Nt(r);var i=G(e),a=Te(i),u=We(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw oc("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},ac={left:ic(!1),right:ic(!0)},uc=ac.left,sc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return uc(sc(this),t,e,e>1?arguments[1]:void 0)}));var cc=ac.right,fc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return cc(fc(this),t,e,e>1?arguments[1]:void 0)}));var lc=Qa.aTypedArray,hc=Qa.exportTypedArrayMethod,pc=Math.floor;hc("reverse",(function(){for(var t,e=lc(this).length,r=pc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var vc=O.RangeError,dc=O.Int8Array,yc=dc&&dc.prototype,gc=yc&&yc.set,mc=Qa.aTypedArray,xc=Qa.exportTypedArrayMethod,bc=!j((function(){var t=new Uint8ClampedArray(2);return jt(gc,t,{length:1,0:3},1),3!==t[1]})),wc=bc&&Qa.NATIVE_ARRAY_BUFFER_VIEWS&&j((function(){var t=new dc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));xc("set",(function(t){mc(this);var e=es(arguments.length>1?arguments[1]:void 0,1),r=G(t);if(bc)return jt(gc,this,r,e);var n=this.length,o=We(r),i=0;if(o+e>n)throw vc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!bc||wc);var Ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Ur(Ec(this),t,e),n=Es(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),j((function(){new Int8Array(1).slice()})));var Ac=Ei.some,Oc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("some",(function(t){return Ac(Oc(this),t,arguments.length>1?arguments[1]:void 0)}));var Sc=Math.floor,Tc=function(t,e){var r=t.length,n=Sc(r/2);return r<8?kc(t,e):Ic(t,Tc(yu(t,0,n),e),Tc(yu(t,n),e),e)},kc=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Ic=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},jc=Tc,Pc=rt.match(/firefox\\/(\\d+)/i),_c=!!Pc&&+Pc[1],Mc=/MSIE|Trident/.test(rt),Lc=rt.match(/AppleWebKit\\/(\\d+)\\./),Rc=!!Lc&&+Lc[1],Cc=Qa.aTypedArray,Nc=Qa.exportTypedArrayMethod,Dc=O.Uint16Array,Fc=Dc&&F(Dc.prototype.sort),Wc=!(!Fc||j((function(){Fc(new Dc(2),null)}))&&j((function(){Fc(new Dc(2),{})}))),zc=!!Fc&&!j((function(){if(ut)return ut<74;if(_c)return _c<67;if(Mc)return!0;if(Rc)return Rc<602;var t,e,r=new Dc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Fc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Nc("sort",(function(t){return void 0!==t&&Nt(t),zc?Fc(this,t):jc(Cc(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!zc||Wc);var Bc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("subarray",(function(t,e){var r=Bc(this),n=r.length,o=Ne(t,n);return new(Es(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,Fe((void 0===e?n:Ne(e,n))-o))}));var Uc=O.Int8Array,Gc=Qa.aTypedArray,Hc=Qa.exportTypedArrayMethod,Vc=[].toLocaleString,qc=!!Uc&&j((function(){Vc.call(new Uc(1))}));Hc("toLocaleString",(function(){return Fr(Vc,qc?Ur(Gc(this)):Gc(this),Ur(arguments))}),j((function(){return[1,2].toLocaleString()!=new Uc([1,2]).toLocaleString()}))||!j((function(){Uc.prototype.toLocaleString.call([1,2])})));var Zc=Qa.exportTypedArrayMethod,Yc=O.Uint8Array,$c=Yc&&Yc.prototype||{},Kc=[].toString,Qc=F([].join);j((function(){Kc.call({})}))&&(Kc=function(){return Qc(this)});var Xc=$c.toString!=Kc;Zc("toString",Kc,Xc);var Jc,tf,ef=String,rf=function(t){if("Symbol"===xe(t))throw TypeError("Cannot convert a Symbol value to a string");return ef(t)},nf=function(){var t=kt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},of=O.RegExp,af=j((function(){var t=of("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),uf=af||j((function(){return!of("a","y").sticky})),sf={BROKEN_CARET:af||j((function(){var t=of("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:uf,UNSUPPORTED_Y:af},cf=O.RegExp,ff=j((function(){var t=cf(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),lf=O.RegExp,hf=j((function(){var t=lf("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pf=pe.get,vf=I("native-string-replace",String.prototype.replace),df=RegExp.prototype.exec,yf=df,gf=F("".charAt),mf=F("".indexOf),xf=F("".replace),bf=F("".slice),wf=(tf=/b*/g,jt(df,Jc=/a/,"a"),jt(df,tf,"a"),0!==Jc.lastIndex||0!==tf.lastIndex),Ef=sf.BROKEN_CARET,Af=void 0!==/()??/.exec("")[1];(wf||Af||Ef||ff||hf)&&(yf=function(t){var e,r,n,o,i,a,u,s=this,c=pf(s),f=rf(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=jt(yf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=Ef&&s.sticky,v=jt(nf,s),d=s.source,y=0,g=f;if(p&&(v=xf(v,"y",""),-1===mf(v,"g")&&(v+="g"),g=bf(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==gf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),Af&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),wf&&(n=s.lastIndex),o=jt(df,p?r:s,g),p?o?(o.input=bf(o.input,y),o[0]=bf(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:wf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),Af&&o&&o.length>1&&jt(vf,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Qi(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var Of=yf;ar({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Sf,Tf=vt("species"),kf=RegExp.prototype,If=function(t,e,r,n){var o=vt(t),i=!j((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!j((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Tf]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=F(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=F(t),s=e.exec;return s===Of||s===kf.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));de(String.prototype,t,s[0]),de(kf,o,s[1])}n&&ie(kf[o],"sham",!0)},jf=F("".charAt),Pf=F("".charCodeAt),_f=F("".slice),Mf=function(t){return function(e,r){var n,o,i=rf(B(e)),a=Le(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Pf(i,a))<55296||n>56319||a+1===u||(o=Pf(i,a+1))<56320||o>57343?t?jf(i,a):n:t?_f(i,a,a+2):o-56320+(n-55296<<10)+65536}},Lf={codeAt:Mf(!1),charAt:Mf(!0)},Rf=Lf.charAt,Cf=function(t,e,r){return e+(r?Rf(t,e).length:1)},Nf=Math.floor,Df=F("".charAt),Ff=F("".replace),Wf=F("".slice),zf=/\\$([$&'\`]|\\d{1,2}|<[^>]*>)/g,Bf=/\\$([$&'\`]|\\d{1,2})/g,Uf=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Bf;return void 0!==o&&(o=G(o),s=zf),Ff(i,s,(function(i,s){var c;switch(Df(s,0)){case"$":return"$";case"&":return t;case"\`":return Wf(e,0,r);case"'":return Wf(e,a);case"<":c=o[Wf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=Nf(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Df(s,1):n[l-1]+Df(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Gf=TypeError,Hf=function(t,e){var r=t.exec;if(J(r)){var n=jt(r,t,e);return null!==n&&kt(n),n}if("RegExp"===D(t))return jt(Of,t,e);throw Gf("RegExp#exec called on incompatible receiver")},Vf=vt("replace"),qf=Math.max,Zf=Math.min,Yf=F([].concat),$f=F([].push),Kf=F("".indexOf),Qf=F("".slice),Xf="$0"==="a".replace(/./,"$0"),Jf=!!/./[Vf]&&""===/./[Vf]("a","$0");function tl(t){this.message=t}If("replace",(function(t,e,r){var n=Jf?"$":"$0";return[function(t,r){var n=B(this),o=W(t)?void 0:Dt(t,Vf);return o?jt(o,t,n,r):jt(e,rf(n),t,r)},function(t,o){var i=kt(this),a=rf(t);if("string"==typeof o&&-1===Kf(o,n)&&-1===Kf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=J(o);s||(o=rf(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Hf(i,a);if(null===h)break;if($f(l,h),!c)break;""===rf(h[0])&&(i.lastIndex=Cf(a,Fe(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=rf((h=l[y])[0]),m=qf(Zf(Le(h.index),a.length),0),x=[],b=1;b<h.length;b++)$f(x,void 0===(p=h[b])?p:String(p));var w=h.groups;if(s){var E=Yf([g],x,m,a);void 0!==w&&$f(E,w);var A=rf(Fr(o,void 0,E))}else A=Uf(g,a,m,x,w,o);m>=d&&(v+=Qf(a,d,m)+A,d=m+g.length)}return v+Qf(a,d)}]}),!!j((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Xf||Jf),tl.prototype=new Error,tl.prototype.name="InvalidCharacterError",ar({global:!0,forced:O.globalThis!==O},{globalThis:O}),Sf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:Sf.devicePixelRatio;var el=TypeError,rl=Object.getOwnPropertyDescriptor,nl=gt&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(yi(t)&&!rl(t,"length").writable)throw el("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},ol=TypeError,il=function(t){if(t>9007199254740991)throw ol("Maximum allowed index exceeded");return t},al=Pi("splice"),ul=Math.max,sl=Math.min;ar({target:"Array",proto:!0,forced:!al},{splice:function(t,e){var r,n,o,i,a,u,s=G(this),c=We(s),f=Ne(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=sl(ul(Le(e),0),c-f)),il(c+r-n),o=xi(s,n),i=0;i<n;i++)(a=f+i)in s&&Ii(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:ls(s,u);for(i=c;i>c-n+r;i--)ls(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:ls(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return nl(s,c-n+r),o}});var cl=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),fl=Object.assign,ll=Object.defineProperty,hl=F([].concat),pl=!fl||j((function(){if(gt&&1!==fl({b:1},fl(ll({},"a",{enumerable:!0,get:function(){ll(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=fl({},t)[r]||"abcdefghijklmnopqrst"!=Hi(fl({},e)).join("")}))?function(t,e){for(var r=G(t),n=arguments.length,o=1,i=Ye.f,a=Ae.f;n>o;)for(var u,s=Te(arguments[o++]),c=i?hl(Hi(s),i(s)):Hi(s),f=c.length,l=0;f>l;)u=c[l++],gt&&!jt(a,s,u)||(r[u]=s[u]);return r}:fl;ar({target:"Object",stat:!0,arity:2,forced:Object.assign!==pl},{assign:pl});var vl=Ei.findIndex,dl=!0;"findIndex"in[]&&Array(1).findIndex((function(){dl=!1})),ar({target:"Array",proto:!0,forced:dl},{findIndex:function(t){return vl(this,t,arguments.length>1?arguments[1]:void 0)}}),oa("findIndex");var yl=Lf.charAt,gl=pe.set,ml=pe.getterFor("String Iterator");wa(String,"String",(function(t){gl(this,{type:"String Iterator",string:rf(t),index:0})}),(function(){var t,e=ml(this),r=e.string,n=e.index;return n>=r.length?Ea(void 0,!0):(t=yl(r,n),e.index+=t.length,Ea(t,!1))}));var xl=Ze.f,bl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wl={f:function(t){return bl&&"Window"==D(t)?function(t){try{return xl(t)}catch(t){return yu(bl)}}(t):xl(ke(t))}},El=j((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Al=Object.isExtensible,Ol=j((function(){Al(1)}))||El?function(t){return!!xt(t)&&((!El||"ArrayBuffer"!=D(t))&&(!Al||Al(t)))}:Al,Sl=!j((function(){return Object.isExtensible(Object.preventExtensions({}))})),Tl=b((function(t){var e=qt.f,r=!1,n=$("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=Ze.f,e=F([].splice),o={};o[n]=1,t(o).length&&(Ze.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ar({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wl.f}))},fastKey:function(t,e){if(!xt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!V(t,n)){if(!Ol(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!V(t,n)){if(!Ol(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Sl&&r&&Ol(t)&&!V(t,n)&&i(t),t}};se[n]=!0})),kl=(Tl.enable,Tl.fastKey,Tl.getWeakData,Tl.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=O[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=F(u[t]);de(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!xt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!xt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!xt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(or(t,!J(a)||!(o||u.forEach&&!j((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),Tl.enable();else if(or(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=j((function(){l.has(1)})),v=_o((function(t){new a(t)})),d=!o&&j((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){gr(t,u);var r=ss(new a,t,s);return W(e)||To(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ar({global:!0,constructor:!0,forced:s!=a},c),pr(s,t),o||r.setStrong(s,t,n),s}),Il=Tl.getWeakData,jl=pe.set,Pl=pe.getterFor,_l=Ei.find,Ml=Ei.findIndex,Ll=F([].splice),Rl=0,Cl=function(t){return t.frozen||(t.frozen=new Nl)},Nl=function(){this.entries=[]},Dl=function(t,e){return _l(t.entries,(function(t){return t[0]===e}))};Nl.prototype={get:function(t){var e=Dl(this,t);if(e)return e[1]},has:function(t){return!!Dl(this,t)},set:function(t,e){var r=Dl(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Ml(this.entries,(function(e){return e[0]===t}));return~e&&Ll(this.entries,e,1),!!~e}};var Fl,Wl={getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),jl(t,{type:e,id:Rl++,frozen:void 0}),W(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Pl(e),u=function(t,e,r){var n=a(t),o=Il(kt(e),!0);return!0===o?Cl(n).set(e,r):o[n.id]=r,t};return ru(i,{delete:function(t){var e=a(this);if(!xt(t))return!1;var r=Il(t);return!0===r?Cl(e).delete(t):r&&V(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!xt(t))return!1;var r=Il(t);return!0===r?Cl(e).has(t):r&&V(r,e.id)}}),ru(i,r?{get:function(t){var e=a(this);if(xt(t)){var r=Il(t);return!0===r?Cl(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},zl=pe.enforce,Bl=!O.ActiveXObject&&"ActiveXObject"in O,Ul=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Gl=kl("WeakMap",Ul,Wl);if(ne&&Bl){Fl=Wl.getConstructor(Ul,"WeakMap",!0),Tl.enable();var Hl=Gl.prototype,Vl=F(Hl.delete),ql=F(Hl.has),Zl=F(Hl.get),Yl=F(Hl.set);ru(Hl,{delete:function(t){if(xt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),Vl(this,t)||e.frozen.delete(t)}return Vl(this,t)},has:function(t){if(xt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)||e.frozen.has(t)}return ql(this,t)},get:function(t){if(xt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)?Zl(this,t):e.frozen.get(t)}return Zl(this,t)},set:function(t,e){if(xt(t)&&!Ol(t)){var r=zl(this);r.frozen||(r.frozen=new Fl),ql(this,t)?Yl(this,t,e):r.frozen.set(t,e)}else Yl(this,t,e);return this}})}var $l=vt("iterator"),Kl=vt("toStringTag"),Ql=Ta.values,Xl=function(t,e){if(t){if(t[$l]!==Ql)try{ie(t,$l,Ql)}catch(e){t[$l]=Ql}if(t[Kl]||ie(t,Kl,e),hi[e])for(var r in Ta)if(t[r]!==Ta[r])try{ie(t,r,Ta[r])}catch(e){t[r]=Ta[r]}}};for(var Jl in hi)Xl(O[Jl]&&O[Jl].prototype,Jl);Xl(di,"DOMTokenList");var th,eh,rh,nh,oh=new WeakMap,ih=function(){function t(){i(this,t),oh.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=oh.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),oh.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=oh.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=oh.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),ah=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(ih));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var uh=my.getSystemInfoSync();th=uh.screenWidth,eh=uh.screenHeight,rh=uh.windowWidth,nh=uh.windowHeight}else{var sh=Sf.innerWidth,ch=Sf.innerHeight;th=sh,eh=ch,rh=sh,nh=ch}var fh={width:th,height:eh,availWidth:rh,availHeight:nh,availLeft:0,availTop:0},lh=fh.availWidth,hh=fh.availHeight,ph={style:[]};function vh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function dh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:lh+"px",height:hh+"px",margin:"0px",padding:"0px"})}function yh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=lh,t.clientHeight=hh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function gh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=lh,t.offsetHeight=hh)}function mh(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=lh,t.scrollHeight=hh)}function xh(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function bh(){}var wh=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=bh,t.blur=bh,t.insertBefore=bh,t.appendChild=bh,t.removeChild=bh,t.remove=bh,t.innerHTML="",t.tagName=n.toUpperCase(),vh(h(t),o),dh(h(t)),xh(h(t)),yh(h(t)),gh(h(t)),mh(h(t)),t}return u(r)}(ah),Eh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(wh)),Ah={};function Oh(){return Ah}var Sh=u((function t(){i(this,t);var e=Oh(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),vh(r),xh(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),Th={href:"",protocol:"",host:""},kh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),Ih=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),jh={},Ph={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Th,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new Sh:"video"===t?new Eh:new wh(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){jh[t]||(jh[t]=[]),jh[t].push(e)},removeEventListener:function(t,e){var r=jh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=jh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new cl(t)}};Ph.documentElement=new Ih,Ph.head=new wh("head"),Ph.body=new kh,If("match",(function(t,e,r){return[function(e){var r=B(this),n=W(e)?void 0:Dt(e,t);return n?jt(n,e,r):new RegExp(e)[t](rf(r))},function(t){var n=kt(this),o=rf(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return Hf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=Hf(n,o));){var f=rf(u[0]);s[c]=f,""===f&&(n.lastIndex=Cf(o,Fe(n.lastIndex),a)),c++}return 0===c?null:s}]}));var _h,Mh,Lh=vt("isConcatSpreadable"),Rh=ut>=51||!j((function(){var t=[];return t[Lh]=!1,t.concat()[0]!==t})),Ch=Pi("concat"),Nh=function(t){if(!xt(t))return!1;var e=t[Lh];return void 0!==e?!!e:yi(t)};if(ar({target:"Array",proto:!0,arity:1,forced:!Rh||!Ch},{concat:function(t){var e,r,n,o,i,a=G(this),u=xi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Nh(i=-1===e?a:arguments[e]))for(o=We(i),il(s+o),r=0;r<o;r++,s++)r in i&&Ii(u,s,i[r]);else il(s+1),Ii(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Dh=my.getSystemInfoSync();_h=Dh.system,Dh.platform,Dh.language}else{var Fh={versions:(Mh=Sf.navigator.userAgent,{trident:Mh.indexOf("Trident")>-1,presto:Mh.indexOf("Presto")>-1,webKit:Mh.indexOf("AppleWebKit")>-1,gecko:Mh.indexOf("Gecko")>-1&&-1===Mh.indexOf("KHTML"),mobile:!!Mh.match(/AppleWebKit.*Mobile.*/),ios:!!Mh.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Mh.indexOf("Android")>-1||Mh.indexOf("Linux")>-1,iPhone:Mh.indexOf("iPhone")>-1,iPad:Mh.indexOf("iPad")>-1,webApp:-1===Mh.indexOf("Safari"),weixin:Mh.indexOf("MicroMessenger")>-1,qq:" qq"===Mh.match(/\\sQQ/i)}),language:(Sf.navigator.browserLanguage||Sf.navigator.language).toLowerCase()};Fh.versions.android?"android":Fh.versions.trident?"IE":Fh.versions.presto?"Opera":Fh.versions.webKit?"webKit":Fh.versions.gecko?"Firefox":Fh.versions.mobile?"mobile":Fh.versions.ios?"ios":Fh.versions.iPhone?"iPhone":Fh.versions.iPad?"ipad":Fh.versions.webApp?"webApp":Fh.versions.weixin?"weixin":Fh.versions.qq&&"qq",_h=Sf.navigator.userAgent,Fh.language}_h.toLowerCase().indexOf("android");cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Wh=qt.f,zh=Tl.fastKey,Bh=pe.set,Uh=pe.getterFor;kl("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){gr(t,i),Bh(t,{type:e,index:Qi(null),first:void 0,last:void 0,size:0}),gt||(t.size=0),W(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Uh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=zh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),gt?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=zh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return ru(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,gt?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),gt?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=zr(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),ru(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),gt&&Wh(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Uh(e),i=Uh(n);wa(t,e,(function(t,e){Bh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?Ea("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,Ea(void 0,!0))}),r?"entries":"values",!r,!0),dr(e)}});var Gh=F([].join),Hh=Te!=Object,Vh=Ai("join",",");ar({target:"Array",proto:!0,forced:Hh||!Vh},{join:function(t){return Gh(ke(this),void 0===t?",":t)}});var qh=j((function(){Hi(1)}));ar({target:"Object",stat:!0,forced:qh},{keys:function(t){return Hi(G(t))}});var Zh=new Map,Yh=new Map,$h=new Map,Kh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Zh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=$h.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Yh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Yh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Zh.get("requestHeader");r[t]=e,Zh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(ih);s(Kh,"UNSEND",void 0),s(Kh,"OPENED",void 0),s(Kh,"HEADERS_RECEIVED",void 0),s(Kh,"LOADING",void 0),s(Kh,"DONE",void 0),Kh.UNSEND=0,Kh.OPENED=1,Kh.HEADERS_RECEIVED=2,Kh.LOADING=3,Kh.DONE=4;var Qh="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,Xh="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),Jh=Qh||Xh;Jh||Sf.XMLHttpRequest,Jh||Sf.location;function tp(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ep=Ei.filter,rp=Pi("filter");function np(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function op(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function ip(t){return t.filter?[1]:[0]}function ap(t,e){return[e]}ar({target:"Array",proto:!0,forced:!rp},{filter:function(t){return ep(this,t,arguments.length>1?arguments[1]:void 0)}});var up=cp,sp=cp;function cp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=fp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=fp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(wp(s));for(c.sort(gp),o=0;o<c.length;o++)r=mp(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return hp(h,p,r,n,o,c,0),p}function fp(t,e,r,n,o){var i,a;if(o===Rp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=_p(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=_p(i,t[i],t[i+1],a);return a&&Sp(a,a.next)&&(Mp(a),a=a.next),a}function lp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Sp(n,n.next)&&0!==Op(n.prev,n,n.next))n=n.next;else{if(Mp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function hp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=bp(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?vp(t,n,o,i):pp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Mp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?hp(t=dp(lp(t),e,r),e,r,n,o,i,2):2===a&&yp(t,e,r,n,o,i):hp(lp(t),e,r,n,o,i,1);break}}}function pp(t){var e=t.prev,r=t,n=t.next;if(Op(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&Ep(o,u,i,s,a,c,v.x,v.y)&&Op(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function vp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(Op(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=bp(p,v,e,r,n),m=bp(d,y,e,r,n),x=t.prevZ,b=t.nextZ;x&&x.z>=g&&b&&b.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function dp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!Sp(o,i)&&Tp(o,n,n.next,i)&&jp(o,i)&&jp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Mp(n),Mp(n.next),n=t=i),n=n.next}while(n!==t);return lp(n)}function yp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&Ap(a,u)){var s=Pp(a,u);return a=lp(a,a.next),s=lp(s,s.next),hp(a,e,r,n,o,i,0),void hp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function gp(t,e){return t.x-e.x}function mp(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&Ep(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),jp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&xp(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Pp(r,t);return lp(n,n.next),lp(r,r.next)}function xp(t,e){return Op(t.prev,t,e.prev)<0&&Op(e.next,t,t.next)<0}function bp(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Ep(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function Ap(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Tp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(jp(t,e)&&jp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Op(t.prev,t,e.prev)||Op(t,e.prev,e))||Sp(t,e)&&Op(t.prev,t,t.next)>0&&Op(e.prev,e,e.next)>0)}function Op(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Sp(t,e){return t.x===e.x&&t.y===e.y}function Tp(t,e,r,n){var o=Ip(Op(t,e,r)),i=Ip(Op(t,e,n)),a=Ip(Op(r,n,t)),u=Ip(Op(r,n,e));return o!==i&&a!==u||(!(0!==o||!kp(t,r,e))||(!(0!==i||!kp(t,n,e))||(!(0!==a||!kp(r,t,n))||!(0!==u||!kp(r,e,n)))))}function kp(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ip(t){return t>0?1:t<0?-1:0}function jp(t,e){return Op(t.prev,t,t.next)<0?Op(t,e,t.next)>=0&&Op(t,t.prev,e)>=0:Op(t,e,t.prev)<0||Op(t,t.next,e)<0}function Pp(t,e){var r=new Lp(t.i,t.x,t.y),n=new Lp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function _p(t,e,r,n){var o=new Lp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Mp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Rp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}cp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Rp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Rp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},cp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},up.default=sp;var Cp=F(1..valueOf),Np=F("".replace),Dp="[\\t\\n\\v\\f\\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\\u2028\\u2029\\ufeff]",Fp=RegExp("^"+Dp+Dp+"*"),Wp=RegExp(Dp+Dp+"*$"),zp=function(t){return function(e){var r=rf(B(e));return 1&t&&(r=Np(r,Fp,"")),2&t&&(r=Np(r,Wp,"")),r}},Bp={start:zp(1),end:zp(2),trim:zp(3)},Up=Ze.f,Gp=je.f,Hp=qt.f,Vp=Bp.trim,qp=O.Number,Zp=qp.prototype,Yp=O.TypeError,$p=F("".slice),Kp=F("".charCodeAt),Qp=function(t){var e=Bt(t,"number");return"bigint"==typeof e?e:Xp(e)},Xp=function(t){var e,r,n,o,i,a,u,s,c=Bt(t,"number");if(Mt(c))throw Yp("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Vp(c),43===(e=Kp(c,0))||45===e){if(88===(r=Kp(c,2))||120===r)return NaN}else if(48===e){switch(Kp(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=$p(c,2)).length,u=0;u<a;u++)if((s=Kp(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c};if(or("Number",!qp(" 0o1")||!qp("0b1")||qp("+0x1"))){for(var Jp,tv=function(t){var e=arguments.length<1?0:qp(Qp(t)),r=this;return Pt(Zp,r)&&j((function(){Cp(r)}))?ss(Object(e),r,tv):e},ev=gt?Up(qp):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),rv=0;ev.length>rv;rv++)V(qp,Jp=ev[rv])&&!V(tv,Jp)&&Hp(tv,Jp,Gp(qp,Jp));tv.prototype=Zp,Zp.constructor=tv,de(O,"Number",tv,{constructor:!0})}var nv=RangeError,ov=RangeError,iv=String,av=Math.floor,uv=F((function(t){var e=rf(B(this)),r="",n=Le(t);if(n<0||n==1/0)throw nv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),sv=F("".slice),cv=F(1..toFixed),fv=function(t,e,r){return 0===e?r:e%2==1?fv(t,e-1,r*t):fv(t*t,e/2,r)},lv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=av(o/1e7)},hv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=av(n/e),n=n%e*1e7},pv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=iv(t[e]);r=""===r?n:r+uv("0",7-n.length)+n}return r},vv=j((function(){return"0.000"!==cv(8e-5,3)||"1"!==cv(.9,0)||"1.25"!==cv(1.255,2)||"1000000000000000128"!==cv(0xde0b6b3a7640080,0)}))||!j((function(){cv({})}));function dv(t){return"number"==typeof t}function yv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ar({target:"Number",proto:!0,forced:vv},{toFixed:function(t){var e,r,n,o,i=Cp(this),a=Le(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw ov("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return iv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*fv(2,69,1))-69)<0?i*fv(2,-e,1):i/fv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(lv(u,0,r),n=a;n>=7;)lv(u,1e7,0),n-=7;for(lv(u,fv(10,n,1),0),n=e-1;n>=23;)hv(u,1<<23),n-=23;hv(u,1<<n),lv(u,1,1),hv(u,2),c=pv(u)}else lv(u,0,r),lv(u,1<<-e,0),c=pv(u)+uv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+uv("0",a-o)+c:sv(c,0,o-a)+"."+sv(c,o-a)):s+c}});var gv,mv=/"/g,xv=F("".replace);ar({target:"String",proto:!0,forced:(gv="sub",j((function(){var t=""[gv]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{sub:function(){return t="sub",e="",r="",n=rf(B(this)),o="<"+t,""!==e&&(o+=" "+e+'="'+xv(rf(r),mv,"&quot;")+'"'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var bv=RegExp.prototype,wv=Kt.PROPER,Ev=RegExp.prototype.toString,Av=j((function(){return"/a/b"!=Ev.call({source:"a",flags:"b"})})),Ov=wv&&"toString"!=Ev.name;(Av||Ov)&&de(RegExp.prototype,"toString",(function(){var t=kt(this);return"/"+rf(t.source)+"/"+rf(function(t){var e=t.flags;return void 0!==e||"flags"in bv||V(t,"flags")||!Pt(bv,t)?e:jt(nf,t)}(t))}),{unsafe:!0});var Sv="undefined"!=typeof Float32Array?Float32Array:Array;function Tv(){var t=new Sv(2);return Sv!=Float32Array&&(t[0]=0,t[1]=0),t}function kv(t,e){var r=new Sv(2);return r[0]=t,r[1]=e,r}function Iv(t,e){return t[0]=e[0],t[1]=e[1],t}function jv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Pv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function _v(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Mv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Lv,Rv=Pv,Cv=(Lv=Tv(),Tv()),Nv=(Tv(),Tv()),Dv=Tv(),Fv=Tv();function Wv(t,e,r,n,o){return jv(t,r,n),_v(t,t),[o/Mv(e=kv(-t[1],t[0]),kv(-r[1],r[0])),e]}function zv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function Bv(t,e,r){return Rv(t,e,r),_v(t,t),t}function Uv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Gv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",kv(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=yv([a[0],a[1]]),g=yv([i[0],i[1]]);Bv(Nv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,h){var x=Tv(),b=Tv();jv(x,this.normal,Nv),jv(b,this.normal,Nv),l.push(b[0],b[1],0),l.push(x[0],x[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){Uv(n,o)&&jv(o,n,_v(o,Pv(o,n,r))),Bv(Dv,o,n);var w=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),E=w[0],A=w[1],O=Mv(Fv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Iv(this.normal,A),s+=2),this.lastFlip=O}else{if(zv(this.normal,Nv),h){var T=Tv(),k=Tv();Rv(k,Nv,this.normal),jv(T,Nv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=yv([n[0],n[1]]),f=yv([r[0],r[1]]);Bv(Nv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=yv([o[0],o[1]]);Uv(c,h)&&jv(h,c,_v(h,Pv(h,c,f))),Bv(Dv,h,c);var p=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),v=p[0],g=p[1];Mv(Fv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Iv(this.normal,g),i+=2,this.lastFlip=-1}else zv(this.normal,Nv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=yv([n[0],n[1]]),h=yv([r[0],r[1]]);Bv(Nv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,c){var v=Tv(),g=Tv();jv(v,this.normal,Nv),jv(g,this.normal,Nv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=yv([o[0],o[1]]);Uv(l,m)&&jv(m,l,_v(m,Pv(m,l,h))),Bv(Dv,m,l);var x=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),b=x[0],w=x[1],E=Mv(Fv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)b>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,b,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Iv(this.normal,w),i+=2),this.lastFlip=E}else{if(zv(this.normal,Nv),c){var O=Tv(),S=Tv();Rv(S,Nv,this.normal),jv(O,Nv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function Hv(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Gv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function Vv(t){var e=function(t){if(dv(t[0]))return t;if(dv(t[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(dv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function qv(t){var e=t.coordinates,r=up.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:up(n,i,o),vertices:n,size:o}}var Zv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Hv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Vv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Zv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=qv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$v=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Yv);function Kv(t){return Qv.apply(this,arguments)}function Qv(){return(Qv=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!$v[n]){t.next=3;break}return t.abrupt("return",$v[n](o));case 3:return t.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return fi(Kv),t.WorkerSourceMap=Yv,t.createWorker=fi,t.worker=Kv,t}({});
`,hc="l7-worker",uh=3,Kf=!0;function gh(ne){pl(hc,ne)}function yh(){var ne=ef(hc);if(!ne)throw new Error("get worker failed by workerName: ".concat(hc,"."));return ne}function Yf(ne,Me){return dc.apply(this,arguments)}function dc(){return dc=(0,Jl.Z)(oo().mark(function ne(Me,Oe){var Ke,pt,Pt,Xr,An;return oo().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return Ke=yh(),pt=$s.getWorkerFarm({maxConcurrency:uh,reuseWorkers:Kf}),Pt=pt.getWorkerPool({name:hc,source:Ke}),un.next=5,Pt.startJob(hc,function(bi,ga,ss){return bi.done(ss)});case 5:return Xr=un.sent,Xr.postMessage("process",{input:{workerType:Me,data:Oe}}),un.next=9,Xr.result;case 9:return An=un.sent,un.abrupt("return",An.result);case 11:case"end":return un.stop()}},ne)})),dc.apply(this,arguments)}gh(Bh)},70844:function(Qe,te,m){"use strict";m.r(te),m.d(te,{$XMLHttpRequest:function(){return Ge.ft},$location:function(){return Ge.PG},$window:function(){return Ge.vO},AJAXError:function(){return Ge.Uj},AttributeType:function(){return Ee.GC},BKDRHash:function(){return Ge.e2},BaseLayer:function(){return eu},BaseMapService:function(){return C_},BaseMapWrapper:function(){return pm.Z},BaseModel:function(){return nu},BasePostProcessingPass:function(){return Ee.mp},BlendType:function(){return Ee.h0},ButtonControl:function(){return gl},CameraUniform:function(){return Ee.lv},CanvasLayer:function(){return Dl},CanvasUpdateType:function(){return Kc},CityBuildingLayer:function(){return Sh},Control:function(){return bs},CoordinateSystem:function(){return Ee.lo},CoordinateUniform:function(){return Ee.kw},DOM:function(){return Ge.SO},Earth:function(){return bS},EarthLayer:function(){return oc},ExportImage:function(){return yc},FrequencyController:function(){return Ge.iH},Fullscreen:function(){return od},GaodeMap:function(){return G1.Z},GaodeMapV1:function(){return gb},GaodeMapV2:function(){return G1.Z},GeoLocate:function(){return Kl},GeometryLayer:function(){return Br},HeatmapLayer:function(){return yh},IDebugLog:function(){return Ee.Or},ILayerStage:function(){return Ee.KD},ImageLayer:function(){return An},InteractionEvent:function(){return Ee.sm},LRUCache:function(){return Ge.z6},LayerPopup:function(){return Qh},LayerSwitch:function(){return Fc},LineLayer:function(){return La},LineTriangulation:function(){return Ge.sN},LinearDir:function(){return xl},LoadTileDataStatus:function(){return Ge.Qj},Logo:function(){return _c},Map:function(){return OS},MapServiceEvent:function(){return Ee.I9},MapTheme:function(){return Uh},Mapbox:function(){return jS},Marker:function(){return Ho},MarkerLayer:function(){return Il},MaskLayer:function(){return Ad},MouseLocation:function(){return nh},PassType:function(){return Ee.GR},PointFillTriangulation:function(){return Ge.oX},PointLayer:function(){return Sn},PolygonLayer:function(){return vn},PopperControl:function(){return _l},Popup:function(){return Tl},PositionType:function(){return Ee.d},RasterLayer:function(){return el},RasterTileType:function(){return Ee.n3},Satistics:function(){return Ge.a5},Scale:function(){return $i},ScaleTypes:function(){return Ee.vY},Scene:function(){return lC},SceneEventList:function(){return Ee.P7},SelectControl:function(){return wf},SizeUnitType:function(){return Ku},Source:function(){return Ko},SourceTile:function(){return Ge.LZ},StyleScaleType:function(){return Ee.ee},TYPES:function(){return Ee.vK},TextureBlend:function(){return mu},TileDebugLayer:function(){return zf},TilesetManager:function(){return Ge.nx},UpdateTileStrategy:function(){return Ge.dD},Version:function(){return fl.G},Viewport:function(){return n2.Z},WindLayer:function(){return np},WorkerSourceMap:function(){return Ge.lN},Zoom:function(){return Es},aProjectFlat:function(){return Ge.Z},amap2Project:function(){return Ge.TG},amap2UnProject:function(){return Ge.S8},anchorTranslate:function(){return Ge.rQ},anchorType:function(){return Ge.bV},applyAnchorClass:function(){return Ge.zi},bBoxToBounds:function(){return Ge.ds},bindAll:function(){return Ge.Ev},boundsContains:function(){return Ge.oO},calAngle:function(){return Ge.mt},calDistance:function(){return Ge.Lw},calculateCentroid:function(){return Ge.SI},calculatePointsCenterAndRadius:function(){return Ge.Rx},container:function(){return Ee.nC},createLayerContainer:function(){return Ee.e7},createSceneContainer:function(){return Ee.Hp},decodePickingColor:function(){return Ge.W0},dispatchMapCameraParams:function(){return Ge.Gi},dispatchMouseDown:function(){return Ge.Dd},dispatchMouseMove:function(){return Ge.YR},dispatchMouseUp:function(){return Ge.TS},dispatchPointerDown:function(){return Ge.fO},dispatchPointerMove:function(){return Ge.xr},dispatchPointerUp:function(){return Ge.VJ},dispatchTouchEnd:function(){return Ge.vJ},dispatchTouchMove:function(){return Ge.b0},dispatchTouchStart:function(){return Ge.om},djb2hash:function(){return Ge.h8},encodePickingColor:function(){return Ge.Z6},executeWorkerTask:function(){return Ge.hH},expandUrl:function(){return Ge.Gk},extent:function(){return Ge.We},flow:function(){return Ge.ls},generateCatRamp:function(){return Ge.hj},generateColorRamp:function(){return Ge.Cl},generateCustomRamp:function(){return Ge.Oc},generateLinearRamp:function(){return Ge.M4},generateQuantizeRamp:function(){return Ge.NJ},getAngle:function(){return Ge._O},getArrayBuffer:function(){return Ge.ks},getBBoxFromPoints:function(){return Ge.Ol},getCullFace:function(){return Ge.fj},getDefaultDomain:function(){return Ge.ZB},getImage:function(){return Ge.gJ},getJSON:function(){return Ge.xA},getMask:function(){return Ge.Vi},getReferrer:function(){return Ge.an},getTileIndices:function(){return Ge.rJ},getTileWarpXY:function(){return Ge.qD},getURLFromTemplate:function(){return Ge.z0},getWMTSURLFromTemplate:function(){return Ge.jG},gl:function(){return Ee.gl},guid:function(){return Ge.M8},isAndroid:function(){return Ge.Dt},isColor:function(){return Ge.D5},isImageBitmap:function(){return Ge.fg},isMini:function(){return Ge.eW},isMiniAli:function(){return Ge.zh},isMiniScene:function(){return Ge.N_},isPC:function(){return Ge.Ro},isURLTemplate:function(){return Ge.Xj},isWeChatMiniProgram:function(){return Ge.FH},isWorker:function(){return Ge.hJ},isiOS:function(){return Ge.Tt},latitude:function(){return Ge.pq},lazyInject:function(){return Ee.yT},lazyMultiInject:function(){return Ee.yG},lineAtOffset:function(){return Ge.LT},lineAtOffsetAsyc:function(){return Ge.wj},lineStyleType:function(){return ql},lngLatInExtent:function(){return Ge.if},lngLatToMeters:function(){return Ge.vP},lnglatDistance:function(){return Ge.yM},longitude:function(){return Ge.MS},makeXMLHttpRequestPromise:function(){return Ge.LF},metersToLngLat:function(){return Ge.Uv},miniWindow:function(){return Ge.RH},normalize:function(){return Ge.Fv},osmLonLat2TileXY:function(){return Ge.RV},osmTileXY2LonLat:function(){return Ge.cN},packCircleVertex:function(){return Ee.wL},padBounds:function(){return Ge.yA},polygonFillTriangulation:function(){return Ge.yR},postData:function(){return Ge.qC},project:function(){return Ge.iV},rgb2arr:function(){return Ge.CI},sameOrigin:function(){return Ge._0},setL7WorkerSource:function(){return Ge.p3},setMiniScene:function(){return Ge.a},tileToBounds:function(){return Ge.Dv},tranfrormCoord:function(){return Ge.Jo},unProjectFlat:function(){return Ge.ih},validateLngLat:function(){return Ge.Fb},version:function(){return cC}});var v={},C={},l=function(s){return C[s]},$=function(s,n){C[s]=n},R=function(s){return v[s]},z=function(s,n){v[s]=n},L={},T={},O=34,F=10,ue=13;function Ae(a){return new Function("d","return {"+a.map(function(s,n){return JSON.stringify(s)+": d["+n+'] || ""'}).join(",")+"}")}function re(a,s){var n=Ae(a);return function(r,t){return s(n(r),t,a)}}function pe(a){var s=Object.create(null),n=[];return a.forEach(function(r){for(var t in r)t in s||n.push(s[t]=t)}),n}function fe(a,s){var n=a+"",r=n.length;return r<s?new Array(s-r+1).join(0)+n:n}function ke(a){return a<0?"-"+fe(-a,6):a>9999?"+"+fe(a,6):fe(a,4)}function je(a){var s=a.getUTCHours(),n=a.getUTCMinutes(),r=a.getUTCSeconds(),t=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":ke(a.getUTCFullYear(),4)+"-"+fe(a.getUTCMonth()+1,2)+"-"+fe(a.getUTCDate(),2)+(t?"T"+fe(s,2)+":"+fe(n,2)+":"+fe(r,2)+"."+fe(t,3)+"Z":r?"T"+fe(s,2)+":"+fe(n,2)+":"+fe(r,2)+"Z":n||s?"T"+fe(s,2)+":"+fe(n,2)+"Z":"")}function bt(a){var s=new RegExp('["'+a+`
\r]`),n=a.charCodeAt(0);function r(ve,Je){var Ye,Kt,tr=t(ve,function(Fr,Kr){if(Ye)return Ye(Fr,Kr-1);Kt=Fr,Ye=Je?re(Fr,Je):Ae(Fr)});return tr.columns=Kt||[],tr}function t(ve,Je){var Ye=[],Kt=ve.length,tr=0,Fr=0,Kr,hn=Kt<=0,sn=!1;ve.charCodeAt(Kt-1)===F&&--Kt,ve.charCodeAt(Kt-1)===ue&&--Kt;function Yn(){if(hn)return T;if(sn)return sn=!1,L;var Zi,zi=tr,pa;if(ve.charCodeAt(zi)===O){for(;tr++<Kt&&ve.charCodeAt(tr)!==O||ve.charCodeAt(++tr)===O;);return(Zi=tr)>=Kt?hn=!0:(pa=ve.charCodeAt(tr++))===F?sn=!0:pa===ue&&(sn=!0,ve.charCodeAt(tr)===F&&++tr),ve.slice(zi+1,Zi-1).replace(/""/g,'"')}for(;tr<Kt;){if((pa=ve.charCodeAt(Zi=tr++))===F)sn=!0;else if(pa===ue)sn=!0,ve.charCodeAt(tr)===F&&++tr;else if(pa!==n)continue;return ve.slice(zi,Zi)}return hn=!0,ve.slice(zi,Kt)}for(;(Kr=Yn())!==T;){for(var hi=[];Kr!==L&&Kr!==T;)hi.push(Kr),Kr=Yn();Je&&(hi=Je(hi,Fr++))==null||Ye.push(hi)}return Ye}function o(ve,Je){return ve.map(function(Ye){return Je.map(function(Kt){return ce(Ye[Kt])}).join(a)})}function u(ve,Je){return Je==null&&(Je=pe(ve)),[Je.map(ce).join(a)].concat(o(ve,Je)).join(`
`)}function d(ve,Je){return Je==null&&(Je=pe(ve)),o(ve,Je).join(`
`)}function S(ve){return ve.map(U).join(`
`)}function U(ve){return ve.map(ce).join(a)}function ce(ve){return ve==null?"":ve instanceof Date?je(ve):s.test(ve+="")?'"'+ve.replace(/"/g,'""')+'"':ve}return{parse:r,parseRows:t,format:u,formatBody:d,formatRows:S,formatRow:U,formatValue:ce}}var ut=bt(","),wt=ut.parse,se=ut.parseRows,qe=ut.format,me=ut.formatBody,_e=ut.formatRows,Te=ut.formatRow,ht=ut.formatValue,We=m(74902),Ne=m(1413),he=m(38163),Ve=m.n(he),ie=m(36987),ze=m(39034);function Le(a,s){var n=s.x,r=s.y,t=s.x1,o=s.y1,u=s.coordinates,d=s.geometry,S=[];if(!Array.isArray(a))return{dataArray:[]};if(d)return a.filter(function(Kr){return Kr[d]&&Kr[d].type&&Kr[d].coordinates&&Kr[d].coordinates.length>0}).forEach(function(Kr,hn){var sn=Ve()((0,Ne.Z)({},Kr[d]),!0);(0,ze.nG)(sn,function(Yn){var hi=(0,ie.r7)(Yn),Zi=(0,Ne.Z)((0,Ne.Z)({},Kr),{},{_id:hn,coordinates:hi});S.push(Zi)})}),{dataArray:S};for(var U=0;U<a.length;U++){var ce=a[U],ve=[];if(u){var Je="Polygon";Array.isArray(u[0])||(Je="Point"),Array.isArray(u[0])&&!Array.isArray(u[0][0])&&(Je="LineString");var Ye=Ve()({type:Je,coordinates:(0,We.Z)(ce[u])},!0);ve=Ye.coordinates}else if(n&&r&&t&&o){var Kt=[parseFloat(ce[n]),parseFloat(ce[r])],tr=[parseFloat(ce[t]),parseFloat(ce[o])];ve=[Kt,tr]}else n&&r&&(ve=[parseFloat(ce[n]),parseFloat(ce[r])]);var Fr=(0,Ne.Z)((0,Ne.Z)({},ce),{},{_id:U,coordinates:ve});S.push(Fr)}return{dataArray:S}}function Re(a,s){var n=wt(a);return Le(n,s)}var st=m(71002);function vt(a){for(var s=a.toString(),n=5381,r=s.length;r;)n=n*33^s.charCodeAt(--r);return n>>>0}function Dt(a,s){return s===void 0?null:(0,st.Z)(a.properties[s])*1==="number"?a.properties[s]*1:a.properties&&a.properties[s]?vt(a.properties[s]+"")%1000019:null}function ar(a,s){var n=[],r={};return a.features?(a.features=a.features.filter(function(t){var o=t.geometry;return t!=null&&o&&o.type&&o.coordinates&&o.coordinates.length>0}),Ve()(a,!0),a.features.length===0?{dataArray:[],featureKeys:r}:((0,ze.nG)(a,function(t,o){var u=Dt(t,s==null?void 0:s.featureId);u===null&&(u=o);var d=u,S=(0,ie.r7)(t),U=(0,Ne.Z)((0,Ne.Z)({},t.properties),{},{coordinates:S,_id:d});n.push(U)}),{dataArray:n,featureKeys:r})):(a.features=[],{dataArray:[]})}var $t=m(15861),ur=m(64687),we=m.n(ur);function At(a,s,n,r){for(var t=r,o=n-s>>1,u=n-s,d,S=a[s],U=a[s+1],ce=a[n],ve=a[n+1],Je=s+3;Je<n;Je+=3){var Ye=nt(a[Je],a[Je+1],S,U,ce,ve);if(Ye>t)d=Je,t=Ye;else if(Ye===t){var Kt=Math.abs(Je-o);Kt<u&&(d=Je,u=Kt)}}t>r&&(d-s>3&&At(a,s,d,r),a[d+2]=t,n-d>3&&At(a,d,n,r))}function nt(a,s,n,r,t,o){var u=t-n,d=o-r;if(u!==0||d!==0){var S=((a-n)*u+(s-r)*d)/(u*u+d*d);S>1?(n=t,r=o):S>0&&(n+=u*S,r+=d*S)}return u=a-n,d=s-r,u*u+d*d}function Lt(a,s,n,r){var t={id:typeof a=="undefined"?null:a,type:s,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return St(t),t}function St(a){var s=a.geometry,n=a.type;if(n==="Point"||n==="MultiPoint"||n==="LineString")Ut(a,s);else if(n==="Polygon"||n==="MultiLineString")for(var r=0;r<s.length;r++)Ut(a,s[r]);else if(n==="MultiPolygon")for(r=0;r<s.length;r++)for(var t=0;t<s[r].length;t++)Ut(a,s[r][t])}function Ut(a,s){for(var n=0;n<s.length;n+=3)a.minX=Math.min(a.minX,s[n]),a.minY=Math.min(a.minY,s[n+1]),a.maxX=Math.max(a.maxX,s[n]),a.maxY=Math.max(a.maxY,s[n+1])}function lt(a,s){var n=[];if(a.type==="FeatureCollection")for(var r=0;r<a.features.length;r++)Et(n,a.features[r],s,r);else a.type==="Feature"?Et(n,a,s):Et(n,{geometry:a},s);return n}function Et(a,s,n,r){if(s.geometry){var t=s.geometry.coordinates,o=s.geometry.type,u=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),d=[],S=s.id;if(n.promoteId?S=s.properties[n.promoteId]:n.generateId&&(S=r||0),o==="Point")Zt(t,d);else if(o==="MultiPoint")for(var U=0;U<t.length;U++)Zt(t[U],d);else if(o==="LineString")Be(t,d,u,!1);else if(o==="MultiLineString")if(n.lineMetrics){for(U=0;U<t.length;U++)d=[],Be(t[U],d,u,!1),a.push(Lt(S,"LineString",d,s.properties));return}else He(t,d,u,!1);else if(o==="Polygon")He(t,d,u,!0);else if(o==="MultiPolygon")for(U=0;U<t.length;U++){var ce=[];He(t[U],ce,u,!0),d.push(ce)}else if(o==="GeometryCollection"){for(U=0;U<s.geometry.geometries.length;U++)Et(a,{id:S,geometry:s.geometry.geometries[U],properties:s.properties},n,r);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Lt(S,o,d,s.properties))}}function Zt(a,s){s.push(ft(a[0])),s.push(Z(a[1])),s.push(0)}function Be(a,s,n,r){for(var t,o,u=0,d=0;d<a.length;d++){var S=ft(a[d][0]),U=Z(a[d][1]);s.push(S),s.push(U),s.push(0),d>0&&(r?u+=(t*U-S*o)/2:u+=Math.sqrt(Math.pow(S-t,2)+Math.pow(U-o,2))),t=S,o=U}var ce=s.length-3;s[2]=1,At(s,0,ce,n),s[ce+2]=1,s.size=Math.abs(u),s.start=0,s.end=s.size}function He(a,s,n,r){for(var t=0;t<a.length;t++){var o=[];Be(a[t],o,n,r),s.push(o)}}function ft(a){return a/360+.5}function Z(a){var s=Math.sin(a*Math.PI/180),n=.5-.25*Math.log((1+s)/(1-s))/Math.PI;return n<0?0:n>1?1:n}function J(a,s,n,r,t,o,u,d){if(n/=s,r/=s,o>=n&&u<r)return a;if(u<n||o>=r)return null;for(var S=[],U=0;U<a.length;U++){var ce=a[U],ve=ce.geometry,Je=ce.type,Ye=t===0?ce.minX:ce.minY,Kt=t===0?ce.maxX:ce.maxY;if(Ye>=n&&Kt<r){S.push(ce);continue}else if(Kt<n||Ye>=r)continue;var tr=[];if(Je==="Point"||Je==="MultiPoint")K(ve,tr,n,r,t);else if(Je==="LineString")B(ve,tr,n,r,t,!1,d.lineMetrics);else if(Je==="MultiLineString")ee(ve,tr,n,r,t,!1);else if(Je==="Polygon")ee(ve,tr,n,r,t,!0);else if(Je==="MultiPolygon")for(var Fr=0;Fr<ve.length;Fr++){var Kr=[];ee(ve[Fr],Kr,n,r,t,!0),Kr.length&&tr.push(Kr)}if(tr.length){if(d.lineMetrics&&Je==="LineString"){for(Fr=0;Fr<tr.length;Fr++)S.push(Lt(ce.id,Je,tr[Fr],ce.tags));continue}(Je==="LineString"||Je==="MultiLineString")&&(tr.length===1?(Je="LineString",tr=tr[0]):Je="MultiLineString"),(Je==="Point"||Je==="MultiPoint")&&(Je=tr.length===3?"Point":"MultiPoint"),S.push(Lt(ce.id,Je,tr,ce.tags))}}return S.length?S:null}function K(a,s,n,r,t){for(var o=0;o<a.length;o+=3){var u=a[o+t];u>=n&&u<=r&&(s.push(a[o]),s.push(a[o+1]),s.push(a[o+2]))}}function B(a,s,n,r,t,o,u){for(var d=j(a),S=t===0?De:ot,U=a.start,ce,ve,Je=0;Je<a.length-3;Je+=3){var Ye=a[Je],Kt=a[Je+1],tr=a[Je+2],Fr=a[Je+3],Kr=a[Je+4],hn=t===0?Ye:Kt,sn=t===0?Fr:Kr,Yn=!1;u&&(ce=Math.sqrt(Math.pow(Ye-Fr,2)+Math.pow(Kt-Kr,2))),hn<n?sn>n&&(ve=S(d,Ye,Kt,Fr,Kr,n),u&&(d.start=U+ce*ve)):hn>r?sn<r&&(ve=S(d,Ye,Kt,Fr,Kr,r),u&&(d.start=U+ce*ve)):W(d,Ye,Kt,tr),sn<n&&hn>=n&&(ve=S(d,Ye,Kt,Fr,Kr,n),Yn=!0),sn>r&&hn<=r&&(ve=S(d,Ye,Kt,Fr,Kr,r),Yn=!0),!o&&Yn&&(u&&(d.end=U+ce*ve),s.push(d),d=j(a)),u&&(U+=ce)}var hi=a.length-3;Ye=a[hi],Kt=a[hi+1],tr=a[hi+2],hn=t===0?Ye:Kt,hn>=n&&hn<=r&&W(d,Ye,Kt,tr),hi=d.length-3,o&&hi>=3&&(d[hi]!==d[0]||d[hi+1]!==d[1])&&W(d,d[0],d[1],d[2]),d.length&&s.push(d)}function j(a){var s=[];return s.size=a.size,s.start=a.start,s.end=a.end,s}function ee(a,s,n,r,t,o){for(var u=0;u<a.length;u++)B(a[u],s,n,r,t,o,!1)}function W(a,s,n,r){a.push(s),a.push(n),a.push(r)}function De(a,s,n,r,t,o){var u=(o-s)/(r-s);return a.push(o),a.push(n+(t-n)*u),a.push(1),u}function ot(a,s,n,r,t,o){var u=(o-n)/(t-n);return a.push(s+(r-s)*u),a.push(o),a.push(1),u}function Wt(a,s){var n=s.buffer/s.extent,r=a,t=J(a,1,-1-n,n,0,-1,2,s),o=J(a,1,1-n,2+n,0,-1,2,s);return(t||o)&&(r=J(a,1,-n,1+n,0,-1,2,s)||[],t&&(r=Ct(t,1).concat(r)),o&&(r=r.concat(Ct(o,-1)))),r}function Ct(a,s){for(var n=[],r=0;r<a.length;r++){var t=a[r],o=t.type,u;if(o==="Point"||o==="MultiPoint"||o==="LineString")u=Qt(t.geometry,s);else if(o==="MultiLineString"||o==="Polygon"){u=[];for(var d=0;d<t.geometry.length;d++)u.push(Qt(t.geometry[d],s))}else if(o==="MultiPolygon")for(u=[],d=0;d<t.geometry.length;d++){for(var S=[],U=0;U<t.geometry[d].length;U++)S.push(Qt(t.geometry[d][U],s));u.push(S)}n.push(Lt(t.id,o,u,t.tags))}return n}function Qt(a,s){var n=[];n.size=a.size,a.start!==void 0&&(n.start=a.start,n.end=a.end);for(var r=0;r<a.length;r+=3)n.push(a[r]+s,a[r+1],a[r+2]);return n}function ir(a,s){if(a.transformed)return a;var n=1<<a.z,r=a.x,t=a.y,o,u,d;for(o=0;o<a.features.length;o++){var S=a.features[o],U=S.geometry,ce=S.type;if(S.geometry=[],ce===1)for(u=0;u<U.length;u+=2)S.geometry.push(Er(U[u],U[u+1],s,n,r,t));else for(u=0;u<U.length;u++){var ve=[];for(d=0;d<U[u].length;d+=2)ve.push(Er(U[u][d],U[u][d+1],s,n,r,t));S.geometry.push(ve)}}return a.transformed=!0,a}function Er(a,s,n,r,t,o){return[Math.round(n*(a*r-t)),Math.round(n*(s*r-o))]}function Qr(a,s,n,r,t){for(var o=s===t.maxZoom?0:t.tolerance/((1<<s)*t.extent),u={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:s,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},d=0;d<a.length;d++){u.numFeatures++,Mt(u,a[d],o,t);var S=a[d].minX,U=a[d].minY,ce=a[d].maxX,ve=a[d].maxY;S<u.minX&&(u.minX=S),U<u.minY&&(u.minY=U),ce>u.maxX&&(u.maxX=ce),ve>u.maxY&&(u.maxY=ve)}return u}function Mt(a,s,n,r){var t=s.geometry,o=s.type,u=[];if(o==="Point"||o==="MultiPoint")for(var d=0;d<t.length;d+=3)u.push(t[d]),u.push(t[d+1]),a.numPoints++,a.numSimplified++;else if(o==="LineString")br(u,t,a,n,!1,!1);else if(o==="MultiLineString"||o==="Polygon")for(d=0;d<t.length;d++)br(u,t[d],a,n,o==="Polygon",d===0);else if(o==="MultiPolygon")for(var S=0;S<t.length;S++){var U=t[S];for(d=0;d<U.length;d++)br(u,U[d],a,n,!0,d===0)}if(u.length){var ce=s.tags||null;if(o==="LineString"&&r.lineMetrics){ce={};for(var ve in s.tags)ce[ve]=s.tags[ve];ce.mapbox_clip_start=t.start/t.size,ce.mapbox_clip_end=t.end/t.size}var Je={geometry:u,type:o==="Polygon"||o==="MultiPolygon"?3:o==="LineString"||o==="MultiLineString"?2:1,tags:ce};s.id!==null&&(Je.id=s.id),a.features.push(Je)}}function br(a,s,n,r,t,o){var u=r*r;if(r>0&&s.size<(t?u:r)){n.numPoints+=s.length/3;return}for(var d=[],S=0;S<s.length;S+=3)(r===0||s[S+2]>u)&&(n.numSimplified++,d.push(s[S]),d.push(s[S+1])),n.numPoints++;t&&Nt(d,o),a.push(d)}function Nt(a,s){for(var n=0,r=0,t=a.length,o=t-2;r<t;o=r,r+=2)n+=(a[r]-a[o])*(a[r+1]+a[o+1]);if(n>0===s)for(r=0,t=a.length;r<t/2;r+=2){var u=a[r],d=a[r+1];a[r]=a[t-2-r],a[r+1]=a[t-1-r],a[t-2-r]=u,a[t-1-r]=d}}function Pr(a,s){return new _r(a,s)}function _r(a,s){s=this.options=zt(Object.create(this.options),s);var n=s.debug;if(n&&console.time("preprocess data"),s.maxZoom<0||s.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(s.promoteId&&s.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=lt(a,s);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",s.indexMaxZoom,s.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=Wt(r,s),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}_r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_r.prototype.splitTile=function(a,s,n,r,t,o,u){for(var d=[a,s,n,r],S=this.options,U=S.debug;d.length;){r=d.pop(),n=d.pop(),s=d.pop(),a=d.pop();var ce=1<<s,ve=kr(s,n,r),Je=this.tiles[ve];if(!Je&&(U>1&&console.time("creation"),Je=this.tiles[ve]=Qr(a,s,n,r,S),this.tileCoords.push({z:s,x:n,y:r}),U)){U>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",s,n,r,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));var Ye="z"+s;this.stats[Ye]=(this.stats[Ye]||0)+1,this.total++}if(Je.source=a,t){if(s===S.maxZoom||s===t)continue;var Kt=1<<t-s;if(n!==Math.floor(o/Kt)||r!==Math.floor(u/Kt))continue}else if(s===S.indexMaxZoom||Je.numPoints<=S.indexMaxPoints)continue;if(Je.source=null,a.length!==0){U>1&&console.time("clipping");var tr=.5*S.buffer/S.extent,Fr=.5-tr,Kr=.5+tr,hn=1+tr,sn,Yn,hi,Zi,zi,pa;sn=Yn=hi=Zi=null,zi=J(a,ce,n-tr,n+Kr,0,Je.minX,Je.maxX,S),pa=J(a,ce,n+Fr,n+hn,0,Je.minX,Je.maxX,S),a=null,zi&&(sn=J(zi,ce,r-tr,r+Kr,1,Je.minY,Je.maxY,S),Yn=J(zi,ce,r+Fr,r+hn,1,Je.minY,Je.maxY,S),zi=null),pa&&(hi=J(pa,ce,r-tr,r+Kr,1,Je.minY,Je.maxY,S),Zi=J(pa,ce,r+Fr,r+hn,1,Je.minY,Je.maxY,S),pa=null),U>1&&console.timeEnd("clipping"),d.push(sn||[],s+1,n*2,r*2),d.push(Yn||[],s+1,n*2,r*2+1),d.push(hi||[],s+1,n*2+1,r*2),d.push(Zi||[],s+1,n*2+1,r*2+1)}}},_r.prototype.getTile=function(a,s,n){var r=this.options,t=r.extent,o=r.debug;if(a<0||a>24)return null;var u=1<<a;s=(s%u+u)%u;var d=kr(a,s,n);if(this.tiles[d])return ir(this.tiles[d],t);o>1&&console.log("drilling down to z%d-%d-%d",a,s,n);for(var S=a,U=s,ce=n,ve;!ve&&S>0;)S--,U=Math.floor(U/2),ce=Math.floor(ce/2),ve=this.tiles[kr(S,U,ce)];return!ve||!ve.source?null:(o>1&&console.log("found parent tile z%d-%d-%d",S,U,ce),o>1&&console.time("drilling down"),this.splitTile(ve.source,S,U,ce,a,s,n),o>1&&console.timeEnd("drilling down"),this.tiles[d]?ir(this.tiles[d],t):null)};function kr(a,s,n){return((1<<a)*n+s)*32+a}function zt(a,s){for(var n in s)a[n]=s[n];return a}var mr=m(15671),Or=m(43144),X=m(4942),Nr=function(){function a(s,n,r,t){(0,mr.Z)(this,a),(0,X.Z)(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=t,this.vectorTile=s}return(0,Or.Z)(a,[{key:"getTileData",value:function(n){if(!n||!this.vectorTile.layers[n])return[];if(this.vectorLayerCache[n])return this.vectorLayerCache[n];var r=this.vectorTile.layers[n];return r.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),a}(),Xe={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function xe(a){for(var s=0,n=0,r=a.length,t=r-1,o,u;n<r;t=n++)o=a[n],u=a[t],s+=(u.x-o.x)*(o.y+u.y);return s}function rt(a){var s=a.length;if(s<=1)return[a];for(var n=[],r,t,o=0;o<s;o++){var u=xe(a[o]);u!==0&&(t===void 0&&(t=u<0),t===u<0?(r&&n.push(r),r=[a[o]]):r.push(a[o]))}return r&&n.push(r),n}var kt=["Unknown","Point","LineString","Polygon"];function cr(a,s,n,r,t){var o=t.geometry,u=t.type,d=t.tags,S=t.id,U=a*Math.pow(2,r),ce=a*s,ve=a*n,Je=kt[u],Ye,Kt;function tr(hn){for(var sn=0;sn<hn.length;sn++){var Yn=hn[sn];if(Yn[3])break;var hi=180-(Yn[1]+ve)*360/U,Zi=(Yn[0]+ce)*360/U-180,zi=360/Math.PI*Math.atan(Math.exp(hi*Math.PI/180))-90;hn[sn]=[Zi,zi,0,1]}}switch(u){case 1:var Fr=[];for(Ye=0;Ye<o.length;Ye++)Fr[Ye]=o[Ye][0];o=Fr,tr(o);break;case 2:for(Ye=0;Ye<o.length;Ye++)tr(o[Ye]);break;case 3:for(o=rt(o),Ye=0;Ye<o.length;Ye++)for(Kt=0;Kt<o[Ye].length;Kt++)tr(o[Ye][Kt]);break}o.length===1?o=o[0]:Je="Multi"+Je;var Kr={type:"Feature",geometry:{type:Je,coordinates:o},properties:d,id:S,tileOrigin:[0,0],coord:""};return Kr}var Ar=function(){var a=(0,$t.Z)(we().mark(function s(n,r,t,o){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(S){var U=r.getTile(n.z,n.x,n.y),ce=U?U.features.map(function(Ye){return cr(o,t.x,t.y,t.z,Ye)}):[],ve={layers:{defaultLayer:{features:ce}}},Je=new Nr(ve,n.x,n.y,n.z);S(Je)}));case 1:case"end":return d.stop()}},s)}));return function(n,r,t,o){return a.apply(this,arguments)}}();function Lr(a){var s={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?s:(0,Ne.Z)((0,Ne.Z)({},s),a.geojsonvtOptions)}function sr(a,s){var n=Lr(s),r=n.extent||4096,t=Pr(a,n),o=function(S,U){return Ar(U,t,S,r)},u=(0,Ne.Z)((0,Ne.Z)((0,Ne.Z)({},Xe),s),{},{getTileData:o});return{data:a,dataArray:[],tilesetOptions:u,isTile:!0}}var Ge=m(11265);function Gr(a,s){var n=s.extent,r=n===void 0?[121.168,30.2828,121.384,30.4219]:n,t=new Promise(function(u){a instanceof HTMLImageElement||(0,Ge.fg)(a)?u([a]):on(a,function(d){u(d)})}),o={originData:a,images:t,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return o}function on(a,s){var n=a,r=[];if(typeof n=="string")(0,Ge.gJ)({url:n},function(u,d){d&&(r.push(d),s(r))});else{var t=n.length,o=0;n.forEach(function(u){(0,Ge.gJ)({url:u},function(d,S){o++,S&&r.push(S),o===t&&s(r)})})}return Gr}var cn=m(38929),Dn=m(3614),ci=m.n(Dn),ia=function(){function a(s,n,r,t){(0,mr.Z)(this,a),(0,X.Z)(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=t,this.vectorTile=new cn.VectorTile(new(ci())(s))}return(0,Or.Z)(a,[{key:"getTileData",value:function(n){if(!n||!this.vectorTile.layers[n])return[];if(this.vectorLayerCache[n])return this.vectorLayerCache[n];var r=this.vectorTile.layers[n];if(Array.isArray(r.features))return this.vectorLayerCache[n]=r.features,r.features;for(var t=[],o=0;o<r.length;o++){var u=r.feature(o),d=u.toGeoJSON(this.x,this.y,this.z);t.push((0,Ne.Z)((0,Ne.Z)({},d),{},{properties:(0,Ne.Z)({id:d.id},d.properties)}))}return this.vectorLayerCache[n]=t,t}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),a}(),Vi={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},On=function(){var a=(0,$t.Z)(we().mark(function s(n,r,t,o,u){var d;return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return d=(0,Ge.z0)(n,r),U.abrupt("return",new Promise(function(ce){if(u)u({x:t.x,y:t.y,z:t.z},function(Je,Ye){if(Je||!Ye)ce(void 0);else{var Kt=new ia(Ye,t.x,t.y,t.z);ce(Kt)}});else{var ve=(0,Ge.ks)((0,Ne.Z)((0,Ne.Z)({},o),{},{url:d}),function(Je,Ye){if(Je||!Ye)ce(void 0);else{var Kt=new ia(Ye,t.x,t.y,t.z);ce(Kt)}});t.xhrCancel=function(){return ve.abort()}}}));case 2:case"end":return U.stop()}},s)}));return function(n,r,t,o,u){return a.apply(this,arguments)}}();function ji(a,s){var n=Array.isArray(a)?a[0]:a,r=function(u,d){return On(n,u,d,s==null?void 0:s.requestParameters,s==null?void 0:s.getCustomData)},t=(0,Ne.Z)((0,Ne.Z)((0,Ne.Z)({},Vi),s),{},{getTileData:r});return{data:n,dataArray:[],tilesetOptions:t,isTile:!0}}var oi=m(97685);function Hi(a,s,n){switch(a){case"+":return s+n;case"-":return s-n;case"*":return s*n;case"/":return s/n;case"%":return s%n;case"^":return Math.pow(s,n);case"abs":return Math.abs(s);case"floor":return Math.floor(s);case"round":return Math.round(s);case"ceil":return Math.ceil(s);case"sin":return Math.sin(s);case"cos":return Math.cos(s);case"atan":return n===-1?Math.atan(s):Math.atan2(s,n);case"min":return Math.min(s,n);case"max":return Math.max(s,n);case"log10":return Math.log(s);case"log2":return Math.log2(s);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Ca(a,s){for(var n=s[0],r=n.width,t=n.height,o=s.map(function(Ye){return Ye.rasterData}),u=r*t,d=[],S=JSON.stringify(a),U=0;U<u;U++){var ce=JSON.parse(S),ve=Wi(ce,o,U);if(typeof ve=="number")d.push(ve);else{var Je=uo(ce);d.push(Je)}}return d}function Wi(a,s,n){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return s[a[1]][n]}catch(r){return console.warn("Raster Data err!"),0}a.map(function(r,t){if(Array.isArray(r)&&r.length>0)switch(r[0]){case"band":try{a[t]=s[r[1]][n]}catch(o){console.warn("Raster Data err!"),a[t]=0}break;default:Wi(r,s,n)}})}function jo(a){var s=(0,oi.Z)(a,3),n=s[0],r=s[1],t=r===void 0?-1:r,o=s[2],u=o===void 0?-1:o;if(n===void 0)return console.warn("Express err!"),["+",0,0];var d=n.replace(/\s+/g,"");return[d,t,u]}function uo(a){var s=jo(a),n=s[0],r=s[1],t=s[2];return Array.isArray(r)&&(r=uo(a[1])),Array.isArray(t)&&(t=uo(a[2])),Hi(n,r,t)}var Pn={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:bn}};function bn(a,s){for(var n=a[0].rasterData,r=a[1].rasterData,t=a[2].rasterData,o=[],u=(s==null?void 0:s.countCut)||[2,98],d=(0,oi.Z)(u,2),S=d[0],U=d[1],ce=(s==null?void 0:s.RMinMax)||Oi(n,S,U),ve=(s==null?void 0:s.GMinMax)||Oi(r,S,U),Je=(s==null?void 0:s.BMinMax)||Oi(t,S,U),Ye=0;Ye<n.length;Ye++)o.push(Math.max(0,n[Ye]-ce[0])),o.push(Math.max(0,r[Ye]-ve[0])),o.push(Math.max(0,t[Ye]-Je[0]));return{rasterData:o,rMinMax:ce,gMinMax:ve,bMinMax:Je}}function Oi(a,s,n){var r=a.slice().sort(function(d,S){return d-S}),t=r.length,o=r[Math.ceil(t*s/100)],u=r[Math.ceil(t*n/100)];return[o,u]}function di(a,s,n){return va.apply(this,arguments)}function va(){return va=(0,$t.Z)(we().mark(function a(s,n,r){var t,o,u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(s.length!==0){ve.next=2;break}return ve.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return ve.next=4,Promise.all(s.map(function(Je){var Ye=Je.data,Kt=Je.bands,tr=Kt===void 0?[0]:Kt;return n(Ye,tr)}));case 4:t=ve.sent,o=[],t.forEach(function(Je){Array.isArray(Je)?o.push.apply(o,(0,We.Z)(Je)):o.push(Je)}),u=o[0],d=u.width,S=u.height,ve.t0=(0,st.Z)(r),ve.next=ve.t0==="function"?11:ve.t0==="object"?13:15;break;case 11:return U=r(o),ve.abrupt("break",16);case 13:return Array.isArray(r)?U={rasterData:Ca(r,o)}:U=wa(r,o),ve.abrupt("break",16);case 15:U={rasterData:o[0].rasterData};case 16:return ve.abrupt("return",(0,Ne.Z)((0,Ne.Z)({},U),{},{width:d,height:S}));case 17:case"end":return ve.stop()}},a)})),va.apply(this,arguments)}function wa(a,s){var n=Pn[a.type];if(n.type==="function")return n.method(s,a==null?void 0:a.options);if(n.type==="operation")return a.type==="rgb"?Aa(n.expression,s):{rasterData:Ca(n.expression,s)}}function Aa(a,s){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var n=Ca(a.r||["band",0],s),r=Ca(a.g||["band",0],s),t=Ca(a.b||["band",0],s);return[n,r,t]}function Ta(a,s,n,r){return ma.apply(this,arguments)}function ma(){return ma=(0,$t.Z)(we().mark(function a(s,n,r,t){var o;return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,di(s,n,r);case 2:o=d.sent,t(null,{data:o});case 4:case"end":return d.stop()}},a)})),ma.apply(this,arguments)}function Da(a,s){return a.map(function(n){return n[s]*1})}function Uo(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function ha(a){return Array.isArray(a)?a.length===0?!1:!!Uo(a[0]):!1}function xa(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function eo(a,s){var n=s.extent,r=s.width,t=s.height,o=s.min,u=s.max,d=s.format,S=s.operation,U,ce,ve;if(d===void 0||xa(a))U=Array.from(a),ce=r,ve=t;else{var Je=Array.isArray(a)?a:[a];U=di(Je,d,S)}var Ye={_id:1,dataArray:[{_id:1,data:U,width:ce,height:ve,min:o,max:u,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return Ye}var Ee=m(54095),Po=function(){var a=(0,$t.Z)(we().mark(function s(n,r,t,o){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Promise(function(S,U){r({x:n.x,y:n.y,z:n.z},function(ce,ve){if(ce||ve.length===0){U(ce);return}ve&&Ta([{data:ve,bands:[0]}],t,o,function(Je,Ye){Je?U(Je):Ye&&S(Ye)})})}));case 1:case"end":return d.stop()}},s)}));return function(n,r,t,o){return a.apply(this,arguments)}}();function Hs(a,s){return Array.isArray(a)?typeof a[0]=="string"?a.map(function(n){return(0,Ge.z0)(n,s)}):a.map(function(n){return{url:(0,Ge.z0)(n.url,s),bands:n.bands||[0]}}):(0,Ge.z0)(a,s)}function no(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(function(s){return{url:s,bands:[0]}}):a}function qo(a,s){a.xhrCancel=function(){s.map(function(n){n.abort()})}}var os=function(){var a=(0,$t.Z)(we().mark(function s(n,r,t,o,u){var d,S,U,ce,ve,Je;return we().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(d=no(r.url),!(d.length>1)){Kt.next=15;break}return Kt.next=4,Go(d,r);case 4:if(S=Kt.sent,U=S.rasterFiles,ce=S.xhrList,ve=S.errList,qo(n,ce),!(ve.length>0)){Kt.next=12;break}return t(ve,null),Kt.abrupt("return");case 12:Ta(U,o,u,t),Kt.next=17;break;case 15:Je=(0,Ge.ks)(r,function(tr,Fr){if(tr)t(tr);else if(Fr){var Kr=[{data:Fr,bands:d[0].bands}];Ta(Kr,o,u,t)}}),qo(n,[Je]);case 17:case"end":return Kt.stop()}},s)}));return function(n,r,t,o,u){return a.apply(this,arguments)}}();function Go(a,s){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,$t.Z)(we().mark(function a(s,n){var r,t,o,u,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:r=[],t=[],o=[],u=0;case 4:if(!(u<s.length)){tr.next=20;break}return d=s[u],S=(0,Ne.Z)((0,Ne.Z)({},n),{},{url:d.url}),U=d.bands,tr.next=10,(0,Ge.LF)((0,Ne.Z)((0,Ne.Z)({},S),{},{type:"arrayBuffer"}));case 10:ce=tr.sent,ve=ce.err,Je=ce.data,Ye=ce.xhr,ve&&o.push(ve),t.push(Ye),r.push({data:Je,bands:U});case 17:u++,tr.next=4;break;case 20:return tr.abrupt("return",{rasterFiles:r,xhrList:t,errList:o});case 21:case"end":return tr.stop()}},a)})),Wo.apply(this,arguments)}var za=function(){var a=(0,$t.Z)(we().mark(function s(n,r,t,o,u){var d;return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return d={url:Hs(n,r)},U.abrupt("return",new Promise(function(ce,ve){os(t,d,function(Je,Ye){Je?ve(Je):Ye&&ce(Ye)},o,u)}));case 2:case"end":return U.stop()}},s)}));return function(n,r,t,o,u){return a.apply(this,arguments)}}(),Tu=function(){var a=(0,$t.Z)(we().mark(function s(n,r,t,o){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return d=Array.isArray(n)?n[0]:n,o.wmtsOptions?(S=(o==null?void 0:o.getURLFromTemplate)||Ge.jG,u=S(d,(0,Ne.Z)((0,Ne.Z)({},r),o.wmtsOptions))):(U=(o==null?void 0:o.getURLFromTemplate)||Ge.z0,u=U(d,r)),ve.abrupt("return",new Promise(function(Je,Ye){var Kt,tr=(0,Ge.gJ)({url:u,type:(o==null||(Kt=o.requestParameters)===null||Kt===void 0?void 0:Kt.type)||"arrayBuffer"},function(Fr,Kr){Fr?Ye(Fr):Kr&&Je(Kr)},o.transformResponse);t.xhrCancel=function(){return tr.abort()}}));case 3:case"end":return ve.stop()}},s)}));return function(n,r,t,o){return a.apply(this,arguments)}}(),Cs=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},Zs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},ts=[Ee.n3.ARRAYBUFFER,Ee.n3.RGB];function Vs(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function ou(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vs(a))throw new Error("tile server url is error");var n=(s==null?void 0:s.dataType)||Ee.n3.IMAGE;n===Ee.n3.RGB&&(n=Ee.n3.ARRAYBUFFER);var r=function(u,d){switch(n){case Ee.n3.IMAGE:return Tu(a,u,d,s);case Ee.n3.ARRAYBUFFER:return za(a,u,d,(s==null?void 0:s.format)||Cs,s==null?void 0:s.operation);case Ee.n3.CUSTOMARRAYBUFFER:case Ee.n3.CUSTOMRGB:return Po(d,s==null?void 0:s.getCustomData,(s==null?void 0:s.format)||Cs,s==null?void 0:s.operation);default:return Tu(a,u,d,s)}},t=(0,Ne.Z)((0,Ne.Z)((0,Ne.Z)({},Zs),s),{},{getTileData:r});return{data:a,dataArray:[],tilesetOptions:t,isTile:!0}}var ls=m(91),Di=["extent","min","max","width","height","format","operation"];function As(a,s){var n=s.extent,r=s.min,t=s.max,o=s.width,u=s.height,d=s.format,S=s.operation,U=(0,ls.Z)(s,Di),ce;if(d===void 0||xa(a))ce=Array.from(a);else{var ve=Array.isArray(a)?a:[a];ce=di(ve,d,S)}var Je={_id:1,dataArray:[(0,Ne.Z)((0,Ne.Z)({_id:1,data:ce,width:o,height:u},U),{},{min:r,max:t,coordinates:[[n[0],n[1]],[n[2],n[3]]]})]};return Je}var Rs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},vr=function(){var a=(0,$t.Z)(we().mark(function s(n){return we().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(o){var u=(0,oi.Z)(n.bounds,4),d=u[0],S=u[1],U=u[2],ce=u[3],ve={layers:{testTile:{features:[{type:"Feature",properties:{key:n.x+"/"+n.y+"/"+n.z,textLng:(d+U)/2,textLat:(S+ce)/2},geometry:{type:"LineString",coordinates:[[U,ce],[U,S],[d,S],[d,S]]}}]}}};o(ve)}));case 1:case"end":return t.stop()}},s)}));return function(n){return a.apply(this,arguments)}}();function zr(a,s){var n=function(o){return vr(o)},r=(0,Ne.Z)((0,Ne.Z)((0,Ne.Z)({},Rs),s),{},{getTileData:n});return{data:a,dataArray:[],tilesetOptions:r,isTile:!0}}var lr=m(97326),Zr=m(60136),Hn=m(82963),Hr=m(61120),Bo=m(46343),Yr=m(26729),pr=m.n(Yr),at=m(96486),hr=m(69848),er=m.n(hr);function dn(a,s){var n=s.radius,r=n===void 0?40:n,t=s.maxZoom,o=t===void 0?18:t,u=s.minZoom,d=u===void 0?0:u,S=s.zoom,U=S===void 0?2:S;if(a.pointIndex){var ce=a.pointIndex.getClusters(a.extent,Math.floor(U));return a.dataArray=mn(ce),a}var ve=new(er())({radius:r,minZoom:d,maxZoom:o}),Je={type:"FeatureCollection",features:[]};return Je.features=a.dataArray.map(function(Ye){return{type:"Feature",geometry:{type:"Point",coordinates:Ye.coordinates},properties:(0,Ne.Z)({},Ye)}}),ve.load(Je.features),ve}function mn(a){return a.map(function(s,n){return(0,Ne.Z)({coordinates:s.geometry.coordinates,_id:n+1},s.properties)})}function Vn(a){if(a.length===0)throw new Error("max requires at least one data point");for(var s=a[0],n=1;n<a.length;n++)a[n]>s&&(s=a[n]);return s}function ni(a){if(a.length===0)throw new Error("min requires at least one data point");for(var s=a[0],n=1;n<a.length;n++)a[n]<s&&(s=a[n]);return s}function si(a){if(a.length===0)return 0;for(var s=a[0],n=0,r,t=1;t<a.length;t++)r=s+a[t]*1,Math.abs(s)>=Math.abs(a[t])?n+=s-r+a[t]:n+=a[t]-r+s,s=r;return s+n*1}function Si(a){if(a.length===0)throw new Error("mean requires at least one data point");return si(a)/a.length}var qi={min:ni,max:Vn,mean:Si,sum:si};function Rr(a){var s=Mn();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function pn(a,s){if(Array.isArray(s))return s}var wn=function(a){(0,Zr.Z)(n,a);var s=Rr(n);function n(r,t){var o;return(0,mr.Z)(this,n),o=s.call(this),(0,X.Z)((0,lr.Z)(o),"type","source"),(0,X.Z)((0,lr.Z)(o),"isTile",!1),(0,X.Z)((0,lr.Z)(o),"inited",!1),(0,X.Z)((0,lr.Z)(o),"hooks",{init:new Bo.ni}),(0,X.Z)((0,lr.Z)(o),"parser",{type:"geojson"}),(0,X.Z)((0,lr.Z)(o),"transforms",[]),(0,X.Z)((0,lr.Z)(o),"cluster",!1),(0,X.Z)((0,lr.Z)(o),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,X.Z)((0,lr.Z)(o),"invalidExtent",!1),(0,X.Z)((0,lr.Z)(o),"dataArrayChanged",!1),(0,X.Z)((0,lr.Z)(o),"cfg",{autoRender:!0}),o.originData=r,o.initCfg(t),o.init().then(function(){o.inited=!0,o.emit("update",{type:"inited"})}),o}return(0,Or.Z)(n,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(t){return this.clusterIndex.getClusters(this.caculClusterExtent(2),t)}},{key:"getClustersLeaves",value:function(t){return this.clusterIndex.getLeaves(t,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(t){var o=this,u=this.clusterOptions,d=u.method,S=d===void 0?"sum":d,U=u.field,ce=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(t));this.clusterOptions.zoom=t,ce.forEach(function(ve){ve.id||(ve.properties.point_count=1)}),(U||(0,at.isFunction)(S))&&(ce=ce.map(function(ve){var Je=ve.id;if(Je){var Ye=o.clusterIndex.getLeaves(Je,1/0),Kt=Ye.map(function(Kr){return Kr.properties}),tr;if((0,at.isString)(S)&&U){var Fr=Da(Kt,U);tr=qi[S](Fr)}(0,at.isFunction)(S)&&(tr=S(Kt)),ve.properties.stat=tr}else ve.properties.point_count=1;return ve})),this.data=l("geojson")({type:"FeatureCollection",features:ce}),this.executeTrans()}},{key:"getFeatureById",value:function(t){var o=this.parser,u=o.type,d=u===void 0?"geojson":u,S=o.geometry;if(d==="geojson"&&!this.cluster){var U=t<this.originData.features.length?this.originData.features[t]:"null",ce=(0,at.cloneDeep)(U);if(ce!=null&&ce.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var ve=this.data.dataArray.find(function(Je){return Je._id===t});ce.properties=ve}return ce}else return d==="json"&&S?this.data.dataArray.find(function(Je){return Je._id===t}):t<this.data.dataArray.length?this.data.dataArray[t]:"null"}},{key:"updateFeaturePropertiesById",value:function(t,o){this.data.dataArray=this.data.dataArray.map(function(u){return u._id===t?(0,Ne.Z)((0,Ne.Z)({},u),o):u}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(t,o){var u=this.data.dataArray.find(function(d){return d[t]===o});return u==null?void 0:u._id}},{key:"setData",value:function(t,o){var u=this;this.originData=t,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(function(){u.emit("update",{type:"update"})})}},{key:"destroy",value:function(){var t;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(t=this.tileset)===null||t===void 0||t.destroy()}},{key:"processData",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",new Promise(function(U,ce){try{u.excuteParser(),u.initCluster(),u.executeTrans(),U({})}catch(ve){ce(ve)}}));case 1:case"end":return S.stop()}},o)}));function t(){return r.apply(this,arguments)}return t}()},{key:"initCfg",value:function(t){this.cfg=(0,at.mergeWith)(this.cfg,t,pn);var o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,Ne.Z)((0,Ne.Z)({},this.clusterOptions),o.clusterOptions)))}},{key:"init",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.inited=!1,d.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"excuteParser",value:function(){var t=this.parser,o=t.type||"geojson",u=l(o);this.data=u(this.originData,t),this.tileset=this.initTileset(),!t.cancelExtent&&(this.extent=(0,Ge.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(t){this.center=[(t[0]+t[2])/2,(t[1]+t[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var t=this.data.tilesetOptions;if(t){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(t),this.tileset;var o=new Ge.nx((0,Ne.Z)({},t));return o}}},{key:"executeTrans",value:function(){var t=this,o=this.transforms;o.forEach(function(u){var d=u.type,S=R(d)(t.data,u);Object.assign(t.data,S)})}},{key:"initCluster",value:function(){if(this.cluster){var t=this.clusterOptions||{};this.clusterIndex=dn(this.data,t)}}},{key:"caculClusterExtent",value:function(t){var o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,Ge.yA)((0,Ge.ds)(this.extent),t)),o[0].concat(o[1])}}]),n}(Yr.EventEmitter);function Kn(a,s){var n=s.callback;return n&&(a.dataArray=a.dataArray.filter(n)),a}function Ei(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Ji(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Ji(a,s){if(a){if(typeof a=="string")return Yi(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yi(a,s)}}function Yi(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var oa=6378e3;function Ma(a,s){var n=a.dataArray,r=s.size,t=r===void 0?10:r,o=t/(2*Math.PI*oa)*(256<<20)/2,u=k(n,t),d=u.gridHash,S=u.gridOffset,U=nr(d,S,s);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:U}}function k(a,s){var n=1/0,r=-1/0,t,o=Ei(a),u;try{for(o.s();!(u=o.n()).done;){var d=u.value;t=d.coordinates[1],Number.isFinite(t)&&(n=t<n?t:n,r=t>r?t:r)}}catch(sn){o.e(sn)}finally{o.f()}var S=(n+r)/2,U=de(s,S);if(U.xOffset<=0||U.yOffset<=0)return{gridHash:{},gridOffset:U};var ce={},ve=Ei(a),Je;try{for(ve.s();!(Je=ve.n()).done;){var Ye=Je.value,Kt=Ye.coordinates[1],tr=Ye.coordinates[0];if(Number.isFinite(Kt)&&Number.isFinite(tr)){var Fr=Math.floor((Kt+90)/U.yOffset),Kr=Math.floor((tr+180)/U.xOffset),hn="".concat(Fr,"-").concat(Kr);ce[hn]=ce[hn]||{count:0,points:[]},ce[hn].count+=1,ce[hn].points.push(Ye)}}}catch(sn){ve.e(sn)}finally{ve.f()}return{gridHash:ce,gridOffset:U}}function de(a,s){var n=yt(a),r=Ue(s,a);return{yOffset:n,xOffset:r}}function yt(a){return a/oa*(180/Math.PI)}function Ue(a,s){return s/oa*(180/Math.PI)/Math.cos(a*Math.PI/180)}function nr(a,s,n){return Object.keys(a).reduce(function(r,t,o){var u=t.split("-"),d=parseInt(u[0],10),S=parseInt(u[1],10),U={};if(n.field&&n.method){var ce=Ge.a5.getColumn(a[t].points,n.field);U[n.method]=Ge.a5.statMap[n.method](ce)}return Object.assign(U,{_id:o,coordinates:(0,Ge.Z)([-180+s.xOffset*(S+.5),-90+s.yOffset*(d+.5)]),rawData:a[t].points,count:a[t].count}),r.push(U),r},[])}var Mr=Math.PI/3,qr=[0,Mr,2*Mr,3*Mr,4*Mr,5*Mr];function kn(a){return a[0]}function Nn(a){return a[1]}function Mi(){var a=0,s=0,n=1,r=1,t=kn,o=Nn,u,d,S;function U(ve){var Je={},Ye=[],Kt,tr=ve.length;for(Kt=0;Kt<tr;++Kt)if(!(isNaN(Kr=+t.call(null,Fr=ve[Kt],Kt,ve))||isNaN(hn=+o.call(null,Fr,Kt,ve)))){var Fr,Kr,hn,sn=Math.round(hn=hn/S),Yn=Math.round(Kr=Kr/d-(sn&1)/2),hi=hn-sn;if(Math.abs(hi)*3>1){var Zi=Kr-Yn,zi=Yn+(Kr<Yn?-1:1)/2,pa=sn+(hn<sn?-1:1),_o=Kr-zi,Co=hn-pa;Zi*Zi+hi*hi>_o*_o+Co*Co&&(Yn=zi+(sn&1?1:-1)/2,sn=pa)}var Ba=Yn+"-"+sn,ms=Je[Ba];ms?ms.push(Fr):(Ye.push(ms=Je[Ba]=[Fr]),ms.x=(Yn+(sn&1)/2)*d,ms.y=sn*S)}return Ye}function ce(ve){var Je=0,Ye=0;return qr.map(function(Kt){var tr=Math.sin(Kt)*ve,Fr=-Math.cos(Kt)*ve,Kr=tr-Je,hn=Fr-Ye;return Je=tr,Ye=Fr,[Kr,hn]})}return U.hexagon=function(ve){return"m"+ce(ve==null?u:+ve).join("l")+"z"},U.centers=function(){for(var ve=[],Je=Math.round(s/S),Ye=Math.round(a/d),Kt=Je*S;Kt<r+u;Kt+=S,++Je)for(var tr=Ye*d+(Je&1)*d/2;tr<n+d/2;tr+=d)ve.push([tr,Kt]);return ve},U.mesh=function(){var ve=ce(u).slice(0,4).join("l");return U.centers().map(function(Je){return"M"+Je+"m"+ve}).join("")},U.x=function(ve){return arguments.length?(t=ve,U):t},U.y=function(ve){return arguments.length?(o=ve,U):o},U.radius=function(ve){return arguments.length?(u=+ve,d=u*2*Math.sin(Mr),S=u*1.5,U):u},U.size=function(ve){return arguments.length?(a=s=0,n=+ve[0],r=+ve[1],U):[n-a,r-s]},U.extent=function(ve){return arguments.length?(a=+ve[0][0],s=+ve[0][1],n=+ve[1][0],r=+ve[1][1],U):[[a,s],[n,r]]},U.radius(1)}var Bi=6378e3;function io(a,s){var n=a.dataArray,r=s.size,t=r===void 0?10:r,o=s.method,u=o===void 0?"sum":o,d=t/(2*Math.PI*Bi)*(256<<20)/2,S=n.map(function(Je){var Ye=(0,Ge.Z)(Je.coordinates),Kt=(0,oi.Z)(Ye,2),tr=Kt[0],Fr=Kt[1];return(0,Ne.Z)((0,Ne.Z)({},Je),{},{coordinates:[tr,Fr]})}),U=Mi().radius(d).x(function(Je){return Je.coordinates[0]}).y(function(Je){return Je.coordinates[1]}),ce=U(S),ve={dataArray:ce.map(function(Je,Ye){var Kt;if(s.field&&u){var tr=Ge.a5.getColumn(Je,s.field);Je[u]=Ge.a5.statMap[u](tr)}return Kt={},(0,X.Z)(Kt,s.method,Je[u]),(0,X.Z)(Kt,"count",Je.length),(0,X.Z)(Kt,"rawData",Je),(0,X.Z)(Kt,"coordinates",[Je.x,Je.y]),(0,X.Z)(Kt,"_id",Ye),Kt}),radius:d,xOffset:d,yOffset:d,type:"hexagon"};return ve}function co(a,s){var n=s.sourceField,r=s.targetField,t=s.data,o={};return t.forEach(function(u){o[u[n]]=u}),a.dataArray=a.dataArray.map(function(u){var d=u[r];return(0,Ne.Z)((0,Ne.Z)({},u),o[d])}),a}function Sa(a,s){var n=s.callback;return n&&(a.dataArray=a.dataArray.map(n)),a}$("rasterTile",ou),$("mvt",ji),$("geojsonvt",sr),$("testTile",zr),$("geojson",ar),$("image",Gr),$("csv",Re),$("json",Le),$("raster",eo),$("rasterRgb",As),z("cluster",dn),z("filter",Kn),z("join",co),z("map",Sa),z("grid",Ma),z("hexagon",io);var Ko=wn;function wo(a){var s=Oo();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Oo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ho=function(a){(0,Zr.Z)(n,a);var s=wo(n);function n(r){var t;return(0,mr.Z)(this,n),t=s.call(this),(0,X.Z)((0,lr.Z)(t),"added",!1),(0,X.Z)((0,lr.Z)(t),"eventHandle",function(o){t.polyfillEvent(o),t.emit(o.type,{target:o,data:t.markerOption.extData,lngLat:t.lngLat})}),t.markerOption=(0,Ne.Z)((0,Ne.Z)({},t.getDefault()),r),(0,Ge.Ev)(["update","onMove","onMapClick"],(0,lr.Z)(t)),t.init(),t}return(0,Or.Z)(n,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:Ge.bV.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(t){this.scene=t,this.mapsService=t.get(Ee.vK.IMapService),this.sceneSerive=t.get(Ee.vK.ISceneService);var o=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var t=this.markerOption.element;return t&&Ge.SO.remove(t),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(t){var o=this;if(!this.added)return this.once("added",function(){o.setElement(t)}),this;var u=this.markerOption.element;return u&&Ge.SO.remove(u),this.markerOption.element=t,this.init(),this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.update(),this}},{key:"openPopup",value:function(){var t=this;if(!this.added)return this.once("added",function(){t.openPopup()}),this;var o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var t=this;this.added||this.once("added",function(){t.closePopup()});var o=this.popup;return o&&o.remove(),this}},{key:"setPopup",value:function(t){return this.popup=t,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var t=this.popup;if(t)t.isOpen()?t.remove():t.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(t){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(t){this.markerOption.extData=t}},{key:"update",value:function(){if(this.mapsService){var t=this.markerOption,o=t.element,u=t.anchor;this.updatePosition(),Ge.SO.setTransform(o,"".concat(Ge.rQ[u]))}}},{key:"onMapClick",value:function(t){var o=this.markerOption.element;this.popup&&o&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var t=this.mapsService.getContainer();return{containerHeight:(t==null?void 0:t.scrollHeight)||0,containerWidth:(t==null?void 0:t.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.markerOption,o=t.element,u=t.offsets,d=this.lngLat,S=d.lng,U=d.lat,ce=this.mapsService.lngLatToContainer([S,U]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";var ve=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),Je=ve.containerHeight,Ye=ve.containerWidth,Kt=ve.bounds;if(!Kt)return;if(Math.abs(Kt[0][0])>180||Math.abs(Kt[1][0])>180){if(ce.x>Ye){var tr=this.mapsService.lngLatToContainer([S-360,U]);ce.x=tr.x}if(ce.x<0){var Fr=this.mapsService.lngLatToContainer([S+360,U]);ce.x=Fr.x}}(ce.x>Ye||ce.x<0||ce.y>Je||ce.y<0)&&(o.style.display="none"),o.style.left=ce.x+u[0]+"px",o.style.top=ce.y-u[1]+"px"}}}},{key:"init",value:function(){var t=this,o=this.markerOption.element,u=this.markerOption,d=u.color,S=u.anchor;if(!o){this.defaultMarker=!0,o=Ge.SO.create("div"),this.markerOption.element=o;var U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.setAttributeNS(null,"display","block"),U.setAttributeNS(null,"height","48px"),U.setAttributeNS(null,"width","48px"),U.setAttributeNS(null,"viewBox","0 0 1024 1024");var ce=document.createElementNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),ce.setAttributeNS(null,"fill",d),U.appendChild(ce),o.appendChild(U)}Ge.SO.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(ve){var Je,Ye,Kt=((Je=t.markerOption)===null||Je===void 0?void 0:Je.style)&&((Ye=t.markerOption)===null||Ye===void 0?void 0:Ye.style[ve]);o&&(o.style[ve]=Kt)}),o.addEventListener("click",function(ve){t.onMapClick(ve)}),o.addEventListener("click",this.eventHandle),(0,Ge.zi)(o,S,"marker")}},{key:"registerMarkerEvent",value:function(t){t.addEventListener("mousemove",this.eventHandle),t.addEventListener("click",this.eventHandle),t.addEventListener("mousedown",this.eventHandle),t.addEventListener("mouseup",this.eventHandle),t.addEventListener("dblclick",this.eventHandle),t.addEventListener("contextmenu",this.eventHandle),t.addEventListener("mouseover",this.eventHandle),t.addEventListener("mouseout",this.eventHandle),t.addEventListener("touchstart",this.eventHandle),t.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var t=this.getElement();t.removeEventListener("mousemove",this.eventHandle),t.removeEventListener("click",this.eventHandle),t.removeEventListener("mousedown",this.eventHandle),t.removeEventListener("mouseup",this.eventHandle),t.removeEventListener("dblclick",this.eventHandle),t.removeEventListener("contextmenu",this.eventHandle),t.removeEventListener("mouseover",this.eventHandle),t.removeEventListener("mouseout",this.eventHandle),t.removeEventListener("touchstart",this.eventHandle),t.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(t){!this.mapsService||this.mapsService.version!=="GAODE2.x"||!(0,Ge.Ro)()&&Ge.Tt&&(t.type==="touchstart"&&(this.touchStartTime=Date.now()),t.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:t,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(t){return null}},{key:"onUp",value:function(t){throw new Error("Method not implemented.")}}]),n}(Yr.EventEmitter);function Io(a){var s=qs();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function qs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Il=function(a){(0,Zr.Z)(n,a);var s=Io(n);function n(r){var t,o;return(0,mr.Z)(this,n),o=s.call(this),(0,X.Z)((0,lr.Z)(o),"markers",[]),(0,X.Z)((0,lr.Z)(o),"points",[]),(0,X.Z)((0,lr.Z)(o),"clusterMarkers",[]),o.markerLayerOption=(0,at.merge)(o.getDefault(),r),(0,Ge.Ev)(["update"],(0,lr.Z)(o)),o.zoom=((t=o.markerLayerOption.clusterOption)===null||t===void 0?void 0:t.zoom)||-99,o}return(0,Or.Z)(n,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(t){return this.scene=t,this.mapsService=t.get(Ee.vK.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}},{key:"setContainerSize",value:function(){if(this.mapsService){var t=this.mapsService.getContainer();this.containerSize={containerWidth:(t==null?void 0:t.scrollWidth)||0,containerHeight:(t==null?void 0:t.scrollHeight)||0,bounds:this.mapsService.getBounds()}}}},{key:"getContainerSize",value:function(){return this.containerSize}},{key:"addMarker",value:function(t){var o=this.markerLayerOption.cluster;if(t.getMarkerLayerContainerSize=this.getContainerSize.bind(this),o&&(this.addPoint(t,this.markers.length),this.mapsService)){var u=this.mapsService.getZoom(),d=this.mapsService.getBounds();this.bbox=(0,Ge.yA)(d,.5),this.zoom=Math.floor(u),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(t)}},{key:"removeMarker",value:function(t){this.markers.indexOf(t);var o=this.markers.indexOf(t);o>-1&&this.markers.splice(o,1)}},{key:"hide",value:function(){this.markers.map(function(t){t.getElement().style.opacity="0"}),this.clusterMarkers.map(function(t){t.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(t){t.getElement().style.opacity="1"}),this.clusterMarkers.map(function(t){t.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var t=this.markerLayerOption.cluster;return t?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var t=this;this.getMarkers().forEach(function(o){o.addTo(t.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(t){t.remove()}),this.clusterMarkers.forEach(function(t){t.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}},{key:"addPoint",value:function(t,o){var u=t.getLnglat(),d=u.lng,S=u.lat,U={geometry:{type:"Point",coordinates:[d,S]},properties:(0,Ne.Z)((0,Ne.Z)({},t.getExtData()),{},{marker_id:o})};this.points.push(U),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var t=this.markerLayerOption.clusterOption,o=t.radius,u=t.minZoom,d=u===void 0?0:u,S=t.maxZoom;this.clusterIndex=new(er())({radius:o,minZoom:d,maxZoom:S}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(t,o){var u=this,d=t[0].concat(t[1]),S=this.clusterIndex.getClusters(d,o);this.clusterMarkers.forEach(function(U){U.remove()}),this.clusterMarkers=[],S.forEach(function(U){var ce,ve=u.markerLayerOption.clusterOption,Je=ve.field,Ye=ve.method;if((ce=U.properties)!==null&&ce!==void 0&&ce.cluster_id){var Kt,tr=u.getLeaves((Kt=U.properties)===null||Kt===void 0?void 0:Kt.cluster_id);if(U.properties.clusterData=tr,Je&&Ye){var Fr=tr==null?void 0:tr.map(function(hi){var Zi=(0,X.Z)({},Je,hi.properties[Je]);return Zi}),Kr=Ge.a5.getColumn(Fr,Je),hn=Ge.a5.getSatByColumn(Ye,Kr),sn="point_"+Ye;U.properties[sn]=hn.toFixed(2)}}var Yn=u.clusterMarker(U);u.clusterMarkers.push(Yn),Yn.addTo(u.scene)})}},{key:"getLeaves",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t?this.clusterIndex.getLeaves(t,o,u):null}},{key:"clusterMarker",value:function(t){var o=this.markerLayerOption.clusterOption,u=o,d=u.element,S=d===void 0?this.generateElement.bind(this):d,U=new Ho({element:S(t)}).setLnglat({lng:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]});return U}},{key:"normalMarker",value:function(t){var o=t.properties.marker_id;return this.markers[o]}},{key:"update",value:function(){if(this.mapsService&&this.markers.length!==0){var t=this.mapsService.getZoom(),o=this.mapsService.getBounds();(!this.bbox||Math.abs(t-this.zoom)>=1||!(0,Ge.oO)(this.bbox,o))&&(this.bbox=(0,Ge.yA)(o,.5),this.zoom=Math.floor(t),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(t){var o=Ge.SO.create("div","l7-marker-cluster"),u=Ge.SO.create("div","",o),d=Ge.SO.create("span","",u),S=this.markerLayerOption.clusterOption,U=S.field,ce=S.method;t.properties.point_count=t.properties.point_count||1;var ve=U&&ce?t.properties["point_"+ce]||t.properties[U]:t.properties.point_count;return d.textContent=ve,o}}]),n}(Yr.EventEmitter),Ao=m(4157),Va=m(73237);function gs(a){var s=Ws();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ws(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bs=function(a){(0,Zr.Z)(n,a);var s=gs(n);function n(r){var t;return(0,mr.Z)(this,n),t=s.call(this),n.controlCount++,t.controlOption=(0,Ne.Z)((0,Ne.Z)({},t.getDefault(r)),r||{}),t}return(0,Or.Z)(n,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(t){var o=this.getDefault(t);Object.entries(t).forEach(function(u){var d=(0,oi.Z)(u,2),S=d[0],U=d[1];U===void 0&&(t[S]=o[S])}),"position"in t&&this.setPosition(t.position),"className"in t&&this.setClassName(t.className),"style"in t&&this.setStyle(t.style),this.controlOption=(0,Ne.Z)((0,Ne.Z)({},this.controlOption),t)}},{key:"addTo",value:function(t){this.mapsService=t.get(Ee.vK.IMapService),this.renderService=t.get(Ee.vK.IRendererService),this.layerService=t.get(Ee.vK.ILayerService),this.controlService=t.get(Ee.vK.IControlService),this.configService=t.get(Ee.vK.IGlobalConfigService),this.scene=t.get(Ee.vK.ISceneService),this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd(),Ge.SO.addClass(this.container,"l7-control");var o=this.controlOption,u=o.className,d=o.style;return u&&this.setClassName(u),d&&this.setStyle(d),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;Ge.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return Ge.SO.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var t=this.container;Ge.SO.removeClass(t,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var t=this.container;Ge.SO.addClass(t,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(t){return{position:Ee.d.TOPRIGHT,name:"".concat(n.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){var o=this.mapsService.getContainer();o!==null&&o.focus()}}},{key:"setPosition",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee.d.TOPLEFT,o=this.controlService;return o&&o.removeControl(this),this.controlOption.position=t,o&&o.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(t){var o=this.container,u=this.controlOption.className;u&&Ge.SO.removeClass(o,u),t&&Ge.SO.addClass(o,t)}},{key:"setStyle",value:function(t){var o=this.container;t?o.setAttribute("style",t):o.removeAttribute("style")}},{key:"insertContainer",value:function(){var t=this.controlOption.position,o=this.container;if(t instanceof Element)t.appendChild(o);else{var u=this.controlService.controlCorners[t];t.indexOf("bottom")!==-1?u.insertBefore(o,u.firstChild):u.appendChild(o)}}},{key:"checkUpdateOption",value:function(t,o){return o.some(function(u){return u in t})}}]),n}(pr());(0,X.Z)(bs,"controlCount",0);function Ps(a){var s=Xs();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Xs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gl=function(a){(0,Zr.Z)(n,a);var s=Ps(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"isDisable",!1),r}return(0,Or.Z)(n,[{key:"setIsDisable",value:function(t){if(this.isDisable=t,t){var o;(o=this.button)===null||o===void 0||o.setAttribute("disabled","true")}else{var u;(u=this.button)===null||u===void 0||u.removeAttribute("disabled")}}},{key:"createButton",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Ge.SO.create("button","l7-button-control ".concat(t))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var t=this.controlOption,o=t.title,u=t.btnText,d=t.btnIcon;return this.setBtnTitle(o),this.setBtnText(u),this.setBtnIcon(d),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(t){var o=t.title,u=t.btnText,d=t.btnIcon;this.checkUpdateOption(t,["title"])&&this.setBtnTitle(o),this.checkUpdateOption(t,["btnIcon"])&&this.setBtnIcon(d),this.checkUpdateOption(t,["btnText"])&&this.setBtnText(u),(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t)}},{key:"setBtnTitle",value:function(t){var o;(o=this.button)===null||o===void 0||o.setAttribute("title",t!=null?t:"")}},{key:"setBtnIcon",value:function(t){if(this.buttonIcon&&Ge.SO.remove(this.buttonIcon),t){var o,u=(o=this.button)===null||o===void 0?void 0:o.firstChild;if(u){var d;(d=this.button)===null||d===void 0||d.insertBefore(t,u)}else{var S;(S=this.button)===null||S===void 0||S.appendChild(t)}this.buttonIcon=t}}},{key:"setBtnText",value:function(t){if(this.button)if(Ge.SO.removeClass(this.button,"l7-button-control--row"),Ge.SO.removeClass(this.button,"l7-button-control--column"),t){var o=this.buttonText;if(!o){var u;o=Ge.SO.create("div","l7-button-control__text"),(u=this.button)===null||u===void 0||u.appendChild(o),this.buttonText=o}o.innerText=t,Ge.SO.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!t&&this.buttonText&&(Ge.SO.remove(this.buttonText),this.buttonText=void 0)}}]),n}(bs);function jf(a){var s=Mu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yl=function(a){(0,Zr.Z)(n,a);var s=jf(n);function n(r,t){var o;return(0,mr.Z)(this,n),o=s.call(this),(0,X.Z)((0,lr.Z)(o),"isShow",!1),(0,X.Z)((0,lr.Z)(o),"timeout",null),(0,X.Z)((0,lr.Z)(o),"show",function(){return o.isShow||!o.contentDOM.innerHTML||(o.resetPopperPosition(),Ge.SO.removeClass(o.popperDOM,"l7-popper-hide"),o.isShow=!0,o.option.unique&&n.conflictPopperList.forEach(function(u){u!==(0,lr.Z)(o)&&u.isShow&&u.hide()}),o.emit("show")),(0,lr.Z)(o)}),(0,X.Z)((0,lr.Z)(o),"hide",function(){return o.isShow&&(Ge.SO.addClass(o.popperDOM,"l7-popper-hide"),o.isShow=!1,o.emit("hide")),(0,lr.Z)(o)}),(0,X.Z)((0,lr.Z)(o),"setHideTimeout",function(){o.timeout||(o.timeout=window.setTimeout(function(){o.isShow&&(o.hide(),o.timeout=null)},300))}),(0,X.Z)((0,lr.Z)(o),"clearHideTimeout",function(){o.timeout&&(window.clearTimeout(o.timeout),o.timeout=null)}),(0,X.Z)((0,lr.Z)(o),"onBtnClick",function(){o.isShow?o.hide():o.show()}),(0,X.Z)((0,lr.Z)(o),"onBtnMouseLeave",function(){o.setHideTimeout()}),(0,X.Z)((0,lr.Z)(o),"onBtnMouseMove",function(){o.clearHideTimeout(),!o.isShow&&o.show()}),o.button=r,o.option=t,o.init(),t.unique&&n.conflictPopperList.push((0,lr.Z)(o)),o}return(0,Or.Z)(n,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(t){typeof t=="string"?this.contentDOM.innerHTML=t:t instanceof HTMLElement&&(Ge.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(t)),this.content=t}},{key:"init",value:function(){var t=this.option.trigger;this.popperDOM=this.createPopper(),t==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ge.SO.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var t={},o=this.option,u=o.container,d=o.offset,S=d===void 0?[0,0]:d,U=o.placement,ce=(0,oi.Z)(S,2),ve=ce[0],Je=ce[1],Ye=this.button.getBoundingClientRect(),Kt=u.getBoundingClientRect(),tr=Ge.SO.getDiffRect(Ye,Kt),Fr=tr.left,Kr=tr.right,hn=tr.top,sn=tr.bottom,Yn=!1,hi=!1;/^(left|right)/.test(U)?(U.includes("left")?t.right="".concat(Ye.width+Kr,"px"):U.includes("right")&&(t.left="".concat(Ye.width+Fr,"px")),U.includes("start")?t.top="".concat(hn,"px"):U.includes("end")?t.bottom="".concat(sn,"px"):(t.top="".concat(hn+Ye.height/2,"px"),hi=!0,t.transform="translate(".concat(ve,"px, calc(").concat(Je,"px - 50%))"))):/^(top|bottom)/.test(U)&&(U.includes("top")?t.bottom="".concat(Ye.height+sn,"px"):U.includes("bottom")&&(t.top="".concat(Ye.height+hn,"px")),U.includes("start")?t.left="".concat(Fr,"px"):U.includes("end")?t.right="".concat(Kr,"px"):(t.left="".concat(Fr+Ye.width/2,"px"),Yn=!0,t.transform="translate(calc(".concat(ve,"px - 50%), ").concat(Je,"px)"))),t.transform="translate(calc(".concat(ve,"px - ").concat(Yn?"50%":"0%","), calc(").concat(Je,"px - ").concat(hi?"50%":"0%",")");var Zi=U.split("-");Zi.length&&Ge.SO.addClass(this.popperDOM,Zi.map(function(zi){return"l7-popper-".concat(zi)}).join(" ")),Ge.SO.addStyle(this.popperDOM,Ge.SO.css2Style(t))}},{key:"createPopper",value:function(){var t=this.option,o=t.container,u=t.className,d=u===void 0?"":u,S=t.content,U=Ge.SO.create("div","l7-popper l7-popper-hide ".concat(d)),ce=Ge.SO.create("div","l7-popper-content"),ve=Ge.SO.create("div","l7-popper-arrow");return U.appendChild(ce),U.appendChild(ve),o.appendChild(U),this.popperDOM=U,this.contentDOM=ce,S&&this.setContent(S),U}}]),n}(Yr.EventEmitter);(0,X.Z)(yl,"conflictPopperList",[]);function lc(a){var s=Lc();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Lc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var dh={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},_l=function(a){(0,Zr.Z)(n,a);var s=lc(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),(0,Va.Z)((0,Hr.Z)(n.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(t){var o,u=(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t),d=(o=t==null?void 0:t.position)!==null&&o!==void 0?o:u.position;return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{popperPlacement:d instanceof Element?"bottom":dh[d],popperTrigger:"click"})}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this);return this.initPopper(),t}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var t=this,o=this.controlOption,u=o.popperClassName,d=o.popperPlacement,S=o.popperTrigger,U=this.mapsService.getMapContainer();return this.popper=new yl(this.button,{className:u,placement:d,trigger:S,container:U,unique:!0}),this.popper.on("show",function(){t.emit("popperShow",t)}).on("hide",function(){t.emit("popperHide",t)}),this.popper}},{key:"setOptions",value:function(t){if((0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["popperPlacement","popperTrigger","popperClassName"])){var o=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(o)}}}]),n}(gl);function Us(a){var s=th();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function th(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var kf;(function(a){a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index"})(kf||(kf={}));var wf=function(a){(0,Zr.Z)(n,a);var s=Us(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"selectValue",[]),(0,X.Z)((0,lr.Z)(r),"createNormalOption",function(d){var S=r.selectValue.includes(d.value),U=Ge.SO.create("div","l7-select-control-item ".concat(S?kf.ActiveOptionClassName:""));r.getIsMultiple()&&U.appendChild(r.createCheckbox(S)),d.icon&&U.appendChild(d.icon);var ce=Ge.SO.create("span");return ce.innerText=d.text,U.appendChild(ce),U}),(0,X.Z)((0,lr.Z)(r),"onItemClick",function(d){if(r.getIsMultiple()){var S=r.selectValue.findIndex(function(U){return U===d.value});S>-1?r.selectValue.splice(S,1):r.selectValue=[].concat((0,We.Z)(r.selectValue),[d.value])}else r.selectValue=[d.value];r.setSelectValue(r.selectValue)}),r}return(0,Or.Z)(n,[{key:"setOptions",value:function(t){(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t);var o=t.options;o&&this.popper.setContent(this.getPopperContent(o))}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this),o=this.controlOption.defaultValue;return o&&(this.selectValue=this.transSelectValue(o)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),t}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(t){var o=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=this.transSelectValue(t);this.optionDOMList.forEach(function(S){var U=S.getAttribute(kf.OptionValueAttrKey),ce=o.getIsMultiple()?S.querySelector("input[type=checkbox]"):void 0;d.includes(U)?(Ge.SO.addClass(S,kf.ActiveOptionClassName),ce&&Ge.SO.setChecked(ce,!0)):(Ge.SO.removeClass(S,kf.ActiveOptionClassName),ce&&Ge.SO.setChecked(ce,!1))}),this.selectValue=d,u&&this.emit("selectChange",this.getIsMultiple()?d:d[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(t){var o=this,u=this.isImageOptions(),d=Ge.SO.create("div",u?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&Ge.SO.addClass(d,"l7-select-control--multiple");var S=t.map(function(U,ce){var ve=u?o.createImageOption(U):o.createNormalOption(U);return ve.setAttribute(kf.OptionValueAttrKey,U.value),ve.setAttribute(kf.OptionIndexAttrKey,window.String(ce)),ve.addEventListener("click",o.onItemClick.bind(o,U)),ve});return d.append.apply(d,(0,We.Z)(S)),this.optionDOMList=S,d}},{key:"createImageOption",value:function(t){var o=this.selectValue.includes(t.value),u=Ge.SO.create("div","l7-select-control-item ".concat(o?kf.ActiveOptionClassName:"")),d=Ge.SO.create("img");d.setAttribute("src",t.img),Ge.SO.setUnDraggable(d),u.appendChild(d);var S=Ge.SO.create("div","l7-select-control-item-row");this.getIsMultiple()&&u.appendChild(this.createCheckbox(o));var U=Ge.SO.create("span");return U.innerText=t.text,S.appendChild(U),u.appendChild(S),u}},{key:"createCheckbox",value:function(t){var o=Ge.SO.create("input");return o.setAttribute("type","checkbox"),t&&Ge.SO.setChecked(o,!0),o}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find(function(t){return t.img})}},{key:"transSelectValue",value:function(t){return Array.isArray(t)?t:[t]}}]),n}(_l),lf=function(s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add("l7-iconfont"),n.setAttribute("aria-hidden","true");var r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(s)),n.appendChild(r),n};function gd(a){var s=Kh();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Kh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yc=function(a){(0,Zr.Z)(n,a);var s=gd(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"onClick",(0,$t.Z)(we().mark(function d(){var S;return we().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(S=r.controlOption.onExport,S!=null){ce.next=5;break}ce.next=10;break;case 5:return ce.t0=S,ce.next=8,r.getImage();case 8:ce.t1=ce.sent,(0,ce.t0)(ce.t1);case 10:case"end":return ce.stop()}},d)}))),(0,X.Z)((0,lr.Z)(r),"mergeImage",(0,$t.Z)(we().mark(function d(){var S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn,hi,Zi=arguments;return we().wrap(function(pa){for(;;)switch(pa.prev=pa.next){case 0:for(ce=r.controlOption.imageType,ve=(S=(U=r.mapsService.getContainer())===null||U===void 0?void 0:U.getBoundingClientRect())!==null&&S!==void 0?S:{},Je=ve.width,Ye=Je===void 0?0:Je,Kt=ve.height,tr=Kt===void 0?0:Kt,Fr=document.createElement("canvas"),Fr.width=Ye,Fr.height=tr,Kr=Fr.getContext("2d"),hn=Zi.length,sn=new Array(hn),Yn=0;Yn<hn;Yn++)sn[Yn]=Zi[Yn];return pa.next=9,Promise.all(sn.map(function(_o){return new Promise(function(Co){var Ba=new Image;Ba.onload=function(){Co(Ba)},Ba.src=_o})}));case 9:return hi=pa.sent,hi.forEach(function(_o){Kr==null||Kr.drawImage(_o,0,0,Ye,tr)}),pa.abrupt("return",Fr.toDataURL("image/".concat(ce)));case 12:case"end":return pa.stop()}},d)}))),r}return(0,Or.Z)(n,[{key:"onAdd",value:function(){var t=(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this);return t.addEventListener("click",this.onClick),t}},{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:lf("l7-icon-export-picture"),imageType:"png"})}},{key:"getImage",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d;return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.mapsService.exportMap("png");case 2:return u=U.sent,U.next=5,this.scene.exportPng("png");case 5:return d=U.sent,U.abrupt("return",this.mergeImage(u,d));case 7:case"end":return U.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()}]),n}(gl);function Eh(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=cf(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function cf(a,s){if(a){if(typeof a=="string")return Af(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Af(a,s)}}function Af(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var _f=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Dc=function(){if(typeof document=="undefined")return!1;var a=_f[0],s={},n=Eh(_f),r;try{for(n.s();!(r=n.n()).done;){var t=r.value,o=t==null?void 0:t[1];if(o in document){var u=Eh(t.entries()),d;try{for(u.s();!(d=u.n()).done;){var S=(0,oi.Z)(d.value,2),U=S[0],ce=S[1];s[a[U]]=ce}}catch(ve){u.e(ve)}finally{u.f()}return s}}}catch(ve){n.e(ve)}finally{n.f()}return!1}(),Ff={change:Dc.fullscreenchange,error:Dc.fullscreenerror},Zl={request:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,n=arguments.length>1?arguments[1]:void 0;return new Promise(function(r,t){var o=function d(){Zl.off("change",d),r()};Zl.on("change",o);var u=s[Dc.requestFullscreen](n);u instanceof Promise&&u.then(o).catch(t)})},exit:function(){return new Promise(function(s,n){if(!Zl.isFullscreen){s();return}var r=function o(){Zl.off("change",o),s()};Zl.on("change",r);var t=document[Dc.exitFullscreen]();t instanceof Promise&&t.then(r).catch(n)})},toggle:function(s,n){return Zl.isFullscreen?Zl.exit():Zl.request(s,n)},onchange:function(s){Zl.on("change",s)},onerror:function(s){Zl.on("error",s)},on:function(s,n){var r=Ff[s];r&&document.addEventListener(r,n,!1)},off:function(s,n){var r=Ff[s];r&&document.removeEventListener(r,n,!1)},raw:Dc};Object.defineProperties(Zl,{isFullscreen:{get:function(){return Boolean(document[Dc.fullscreenElement])}},element:{enumerable:!0,get:function(){var s;return(s=document[Dc.fullscreenElement])!==null&&s!==void 0?s:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[Dc.fullscreenEnabled])}}}),Dc||(Zl={isEnabled:!1});var kc=Zl;function ad(a){var s=rh();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function rh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var od=function(a){(0,Zr.Z)(n,a);var s=ad(n);function n(r){var t;return(0,mr.Z)(this,n),t=s.call(this,r),(0,X.Z)((0,lr.Z)(t),"isFullscreen",!1),(0,X.Z)((0,lr.Z)(t),"toggleFullscreen",(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!kc.isEnabled){d.next=3;break}return d.next=3,kc.toggle(t.mapContainer);case 3:case"end":return d.stop()}},o)}))),(0,X.Z)((0,lr.Z)(t),"onClick",function(){t.toggleFullscreen()}),(0,X.Z)((0,lr.Z)(t),"onFullscreenChange",function(){t.isFullscreen=!!document.fullscreenElement;var o=t.controlOption,u=o.btnText,d=o.btnIcon,S=o.title,U=o.exitBtnText,ce=o.exitBtnIcon,ve=o.exitTitle;t.isFullscreen?(t.setBtnTitle(ve),t.setBtnText(U),t.setBtnIcon(ce)):(t.setBtnTitle(S),t.setBtnText(u),t.setBtnIcon(d)),t.emit("fullscreenChange",t.isFullscreen)}),kc.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316"),t}return(0,Or.Z)(n,[{key:"setOptions",value:function(t){var o=t.exitBtnText,u=t.exitBtnIcon,d=t.exitTitle;this.isFullscreen&&(this.checkUpdateOption(t,["exitBtnIcon"])&&this.setBtnIcon(u),this.checkUpdateOption(t,["exitBtnText"])&&this.setBtnText(o),this.checkUpdateOption(t,["exitTitle"])&&this.setBtnTitle(d)),(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t)}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this);return t.addEventListener("click",this.onClick),this.mapContainer=Ge.SO.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),t}},{key:"onRemove",value:function(){(0,Va.Z)((0,Hr.Z)(n.prototype),"onRemove",this).call(this),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}},{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5168\u5C4F",btnIcon:lf("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:lf("l7-icon-exit-fullscreen")})}}]),n}(gl);function Yo(a){var s=Gs();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Gs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Kl=function(a){(0,Zr.Z)(n,a);var s=Yo(n);function n(r){var t;return(0,mr.Z)(this,n),t=s.call(this,r),(0,X.Z)((0,lr.Z)(t),"getGeoLocation",function(){return new Promise(function(o,u){window.navigator.geolocation.getCurrentPosition(function(d){var S=d.coords,U=S!=null?S:{},ce=U.longitude,ve=U.latitude;!(0,at.isNaN)(ce)&&!(0,at.isNaN)(ve)?o([ce,ve]):u()},function(d){u(d)})})}),(0,X.Z)((0,lr.Z)(t),"onClick",(0,$t.Z)(we().mark(function o(){var u,d,S;return we().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(window.navigator.geolocation){ce.next=2;break}return ce.abrupt("return");case 2:return u=t.controlOption.transform,ce.next=5,t.getGeoLocation();case 5:if(d=ce.sent,S=t.mapsService.getZoom(),ce.t0=t.mapsService,ce.t1=S>15?S:15,!u){ce.next=15;break}return ce.next=12,u(d);case 12:ce.t2=ce.sent,ce.next=16;break;case 15:ce.t2=d;case 16:ce.t3=ce.t2,ce.t0.setZoomAndCenter.call(ce.t0,ce.t1,ce.t3);case 18:case"end":return ce.stop()}},o)}))),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D"),t}return(0,Or.Z)(n,[{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5B9A\u4F4D",btnIcon:lf("l7-icon-reposition")})}},{key:"onAdd",value:function(){var t=(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this);return t.addEventListener("click",this.onClick),t}}]),n}(gl);function dl(a){var s=su();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function su(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Fc=function(a){(0,Zr.Z)(n,a);var s=dl(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"onLayerChange",function(){var d;(d=r.controlOption.layers)!==null&&d!==void 0&&d.length||(r.selectValue=r.getLayerVisible(),r.setOptions({options:r.getLayerOptions()}))}),(0,X.Z)((0,lr.Z)(r),"onLayerVisibleChane",function(){r.setSelectValue(r.getLayerVisible())}),(0,X.Z)((0,lr.Z)(r),"onSelectChange",function(){r.layers.forEach(function(d){var S=r.selectValue.includes(d.name),U=d.isVisible();S&&!U&&d.show(),!S&&U&&d.hide()})}),r}return(0,Or.Z)(n,[{key:"layers",get:function(){var t=this.layerService,o=this.controlOption.layers;if(Array.isArray(o)&&o.length){var u=[];return o.forEach(function(d){if(d instanceof Object&&u.push(d),typeof d=="string"){var S=t.getLayer(d)||t.getLayerByName(d);S&&u.push(S)}}),u}return t.getLayers()||[]}},{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:lf("l7-icon-layer"),options:[]})}},{key:"getLayerVisible",value:function(){return this.layers.filter(function(t){return t.isVisible()}).map(function(t){return t.name})}},{key:"getLayerOptions",value:function(){return this.layers.map(function(t){return{text:t.name,value:t.name}})}},{key:"setOptions",value:function(t){var o=this.checkUpdateOption(t,["layers"]);(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t),o&&(this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}},{key:"onAdd",value:function(){var t;return(t=this.controlOption.options)!==null&&t!==void 0&&t.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this)}},{key:"onRemove",value:function(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}},{key:"getIsMultiple",value:function(){return!0}}]),n}(wf);function tc(a){var s=Tf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Tf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _c=function(a){(0,Zr.Z)(n,a);var s=tc(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getDefault",value:function(){return{position:Ee.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var t=Ge.SO.create("div","l7-control-logo");return this.setLogoContent(t),t}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(t){(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["img","href"])&&(Ge.SO.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(t){var o=this.controlOption,u=o.href,d=o.img,S=Ge.SO.create("img");if(S.setAttribute("src",d),S.setAttribute("aria-label","AntV logo"),Ge.SO.setUnDraggable(S),u){var U=Ge.SO.create("a","l7-control-logo-link");U.target="_blank",U.href=u,U.rel="noopener nofollow",U.setAttribute("rel","noopener nofollow"),U.appendChild(S),t.appendChild(U)}else t.appendChild(S)}}]),n}(bs),Hl={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},ff={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function xc(a){var s=Yh();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Yh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Uh=function(a){(0,Zr.Z)(n,a);var s=xc(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"onMapThemeChange",function(){r.mapsService.setMapStyle(r.selectValue[0])}),r}return(0,Or.Z)(n,[{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:lf("l7-icon-color"),options:[]})}},{key:"getStyleOptions",value:function(){var t=this.mapsService.getType()==="mapbox"?ff:Hl;return Object.entries(this.mapsService.getMapStyleConfig()).filter(function(o){var u=(0,oi.Z)(o,2),d=u[0],S=u[1];return typeof S=="string"&&d!=="blank"}).map(function(o){var u,d=(0,oi.Z)(o,2),S=d[0],U=d[1],ce=(u=t[S])!==null&&u!==void 0?u:{},ve=ce.text,Je=ce.img;return{text:ve!=null?ve:S,value:U,img:Je,key:S}})}},{key:"getMapStyle",value:function(){return this.mapsService.getMapStyle()}},{key:"onAdd",value:function(){var t,o=this;if((t=this.controlOption.options)!==null&&t!==void 0&&t.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var u,d,S=this.controlOption.defaultValue;this.controlOption.defaultValue=(u=(d=this.controlOption.options.find(function(ce){return ce.key===S}))===null||d===void 0?void 0:d.value)!==null&&u!==void 0?u:S}else{var U=this.getMapStyle();U?this.controlOption.defaultValue=U:this.mapsService.map.once("styledata",function(){var ce=o.mapsService.getMapStyle();o.controlOption.defaultValue=ce,o.setSelectValue(ce,!1)})}return this.on("selectChange",this.onMapThemeChange),(0,Va.Z)((0,Hr.Z)(n.prototype),"onAdd",this).call(this)}},{key:"getIsMultiple",value:function(){return!1}}]),n}(wf);function Gc(a){var s=Mf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var nh=function(a){(0,Zr.Z)(n,a);var s=Gc(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"location",[0,0]),(0,X.Z)((0,lr.Z)(r),"onMouseMove",function(d){var S=r.location,U=d.lngLat||d.lnglat,ce=r.controlOption.transform;U&&(S=[U.lng,U.lat]),r.location=S,ce&&(S=ce(S)),r.insertLocation2HTML(S),r.emit("locationChange",S)}),r}return(0,Or.Z)(n,[{key:"getLocation",value:function(){return this.location}},{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{position:Ee.d.BOTTOMLEFT,transform:function(u){var d=(0,oi.Z)(u,2),S=d[0],U=d[1];return[+(+S).toFixed(6),+(+U).toFixed(6)]}})}},{key:"onAdd",value:function(){var t=Ge.SO.create("div","l7-control-mouse-location");return t.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),t}},{key:"onRemove",value:function(){this.mapsService.off("mousemove",this.onMouseMove)}},{key:"insertLocation2HTML",value:function(t){this.container.innerText=t.join(", ")}}]),n}(bs);function Qn(a){var s=fa();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function fa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var $i=function(a){(0,Zr.Z)(n,a);var s=Qn(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"update",function(){var d=r.mapsService,S=r.controlOption.maxWidth,U=d.getSize()[1]/2,ce=d.containerToLngLat([0,U]),ve=d.containerToLngLat([S,U]),Je=(0,Ge.yM)([ce.lng,ce.lat],[ve.lng,ve.lat]);r.updateScales(Je)}),r}return(0,Or.Z)(n,[{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{name:"scale",position:Ee.d.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var t="l7-control-scale",o=Ge.SO.create("div",t);this.resetScaleLines(o);var u=this.controlOption.updateWhenIdle;return this.mapsService.on(u?"moveend":"mapmove",this.update),this.mapsService.on(u?"zoomend":"zoomchange",this.update),o}},{key:"onRemove",value:function(){var t=this.controlOption.updateWhenIdle;this.mapsService.off(t?"zoomend":"zoomchange",this.update),this.mapsService.off(t?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(t){(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(t){var o=this.controlOption,u=o.metric,d=o.imperial;u&&t&&this.updateMetric(t),d&&t&&this.updateImperial(t)}},{key:"resetScaleLines",value:function(t){Ge.SO.clearChildren(t);var o=this.controlOption,u=o.metric,d=o.imperial,S=o.maxWidth,U=o.lockWidth;U&&Ge.SO.addStyle(t,"width: ".concat(S,"px")),u&&(this.mScale=Ge.SO.create("div","l7-control-scale-line",t)),d&&(this.iScale=Ge.SO.create("div","l7-control-scale-line",t)),this.update()}},{key:"updateScale",value:function(t,o,u){var d=this.controlOption.maxWidth;t.style.width=Math.round(d*u)+"px",t.innerHTML=o}},{key:"getRoundNum",value:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),u=t/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}},{key:"updateMetric",value:function(t){var o=this.getRoundNum(t),u=o<1e3?o+" m":o/1e3+" km";this.updateScale(this.mScale,u,o/t)}},{key:"updateImperial",value:function(t){var o=t*3.2808399,u,d,S;o>5280?(u=o/5280,d=this.getRoundNum(u),this.updateScale(this.iScale,d+" mi",d/u)):(S=this.getRoundNum(o),this.updateScale(this.iScale,S+" ft",S/o))}}]),n}(bs);function $o(a){var s=lo();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function lo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Es=function(a){(0,Zr.Z)(n,a);var s=$o(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"zoomIn",function(){!r.disabled&&r.mapsService.getZoom()<r.mapsService.getMaxZoom()&&r.mapsService.zoomIn()}),(0,X.Z)((0,lr.Z)(r),"zoomOut",function(){!r.disabled&&r.mapsService.getZoom()>r.mapsService.getMinZoom()&&r.mapsService.zoomOut()}),(0,X.Z)((0,lr.Z)(r),"updateDisabled",function(){var d=r.mapsService;r.zoomInButton.removeAttribute("disabled"),r.zoomOutButton.removeAttribute("disabled"),(r.disabled||d.getZoom()<=d.getMinZoom())&&r.zoomOutButton.setAttribute("disabled","true"),(r.disabled||d.getZoom()>=d.getMaxZoom())&&r.zoomInButton.setAttribute("disabled","true")}),r}return(0,Or.Z)(n,[{key:"getDefault",value:function(t){return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{position:Ee.d.BOTTOMRIGHT,name:"zoom",zoomInText:lf("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:lf("l7-icon-narrow"),zoomOutTitle:"Zoom out"})}},{key:"setOptions",value:function(t){(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var t=Ge.SO.create("div","l7-control-zoom");return this.resetButtonGroup(t),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),t}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(t){Ge.SO.clearChildren(t),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",t,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",t,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(t,o,u,d,S){var U=Ge.SO.create("button",u,d);return typeof t=="string"?U.innerHTML=t:U.append(t),U.title=o,U.addEventListener("click",S),U}}]),n}(bs);function tl(a){var s=al();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function al(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Tl=function(a){(0,Zr.Z)(n,a);var s=tl(n);function n(r){var t;(0,mr.Z)(this,n),t=s.call(this),(0,X.Z)((0,lr.Z)(t),"isShow",!0),(0,X.Z)((0,lr.Z)(t),"onMouseMove",function(u){var d,S=t.mapsService.getMapContainer(),U=(d=S==null?void 0:S.getBoundingClientRect())!==null&&d!==void 0?d:{},ce=U.left,ve=ce===void 0?0:ce,Je=U.top,Ye=Je===void 0?0:Je;t.setPopupPosition(u.clientX-ve,u.clientY-Ye)}),(0,X.Z)((0,lr.Z)(t),"updateLngLatPosition",function(){if(!(!t.mapsService||t.popupOption.followCursor)){var u=t.lngLat,d=u.lng,S=u.lat,U=t.mapsService.lngLatToContainer([d,S]),ce=U.x,ve=U.y;t.setPopupPosition(ce,ve)}}),(0,X.Z)((0,lr.Z)(t),"onKeyDown",function(u){u.keyCode===27&&t.remove()}),(0,X.Z)((0,lr.Z)(t),"onCloseButtonClick",function(u){u.stopPropagation&&u.stopPropagation(),t.hide()}),(0,X.Z)((0,lr.Z)(t),"update",function(){var u=!!t.lngLat,d=t.popupOption,S=d.className,U=d.style,ce=d.maxWidth,ve=d.anchor,Je=d.stopPropagation;if(!(!t.mapsService||!u||!t.content)){var Ye=t.mapsService.getMarkerContainer();if(!t.container&&Ye&&(t.container=Ge.SO.create("div","l7-popup ".concat(S!=null?S:""," ").concat(t.isShow?"":"l7-popup-hide"),Ye),U&&t.container.setAttribute("style",U),t.tip=Ge.SO.create("div","l7-popup-tip",t.container),t.container.appendChild(t.content),Je&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Fr){t.container.addEventListener(Fr,function(Kr){Kr.stopPropagation()})}),t.container.style.whiteSpace="nowrap"),t.updateLngLatPosition(),Ge.SO.setTransform(t.container,"".concat(Ge.rQ[ve])),(0,Ge.zi)(t.container,ve,"popup"),ce){var Kt=t.container.getBoundingClientRect(),tr=Kt.width;tr>parseFloat(ce)&&(t.container.style.width=ce)}else t.container.style.removeProperty("width")}}),t.popupOption=(0,Ne.Z)((0,Ne.Z)({},t.getDefault(r!=null?r:{})),r);var o=t.popupOption.lngLat;return o&&(t.lngLat=o),t}return(0,Or.Z)(n,[{key:"lngLat",get:function(){var t;return(t=this.popupOption.lngLat)!==null&&t!==void 0?t:{lng:0,lat:0}},set:function(t){this.popupOption.lngLat=t}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(t){this.mapsService=t.get(Ee.vK.IMapService),this.sceneService=t.get(Ee.vK.ISceneService),this.layerService=t.get(Ee.vK.ILayerService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=t,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var o=this.popupOption,u=o.html,d=o.text,S=o.title;return u?this.setHTML(u):d&&this.setText(d),S&&this.setTitle(S),this.emit("open"),this}},{key:"remove",value:function(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ge.SO.remove(this.content),this.container&&(Ge.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(t){return this.show(),this.popupOption=(0,Ne.Z)((0,Ne.Z)({},this.popupOption),t),this.checkUpdateOption(t,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(Ge.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(t,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(t,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(t,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(t,["html"])&&t.html?this.setHTML(t.html):this.checkUpdateOption(t,["text"])&&t.text&&this.setText(t.text),this.checkUpdateOption(t,["lngLat"])&&t.lngLat&&this.setLnglat(t.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&Ge.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(this.isShow)return this.container&&Ge.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(t){return this.popupOption.html=t,this.setDOMContent(t)}},{key:"setText",value:function(t){return this.popupOption.text=t,this.setDOMContent(window.document.createTextNode(t))}},{key:"setTitle",value:function(t){this.show(),this.popupOption.title=t,t?(this.contentTitle||(this.contentTitle=Ge.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Ge.SO.clearChildren(this.contentTitle),Ge.SO.appendElementType(this.contentTitle,t)):this.contentTitle&&(Ge.SO.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var t=this.lngLat,o=t.lng,u=t.lat;return this.popupOption.autoPan&&this.mapsService.panTo([o,u]),this}},{key:"setLngLat",value:function(t){return this.setLnglat(t)}},{key:"setLnglat",value:function(t){var o=this;return this.show(),this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){o.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(t){return this.popupOption.maxWidth=t,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(t){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Ge.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(t){return this.show(),this.createContent(),Ge.SO.appendElementType(this.contentPanel,t),this.update(),this}},{key:"updateCloseOnClick",value:function(t){var o=this,u=this.mapsService;u&&(u==null||u.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!t&&requestAnimationFrame(function(){u==null||u.on("click",o.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(t){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!t&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(t){var o,u=(o=this.mapsService)===null||o===void 0?void 0:o.getContainer();u&&(u==null||u.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!t&&(u==null||u.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var t=this;if(this.content&&Ge.SO.remove(this.content),this.contentTitle=void 0,this.content=Ge.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var o=lf("l7-icon-guanbi");Ge.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",function(){t.hide()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=Ge.SO.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(t,o){if(this.container){var u=this.popupOption.offsets;this.container.style.left=t+u[0]+"px",this.container.style.top=o-u[1]+"px"}}},{key:"checkUpdateOption",value:function(t,o){return o.some(function(u){return u in t})}}]),n}(Yr.EventEmitter);function Lh(a){var s=xf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function xf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Qh=function(a){(0,Zr.Z)(n,a);var s=Lh(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"layerConfigMap",new WeakMap),r}return(0,Or.Z)(n,[{key:"layerConfigItems",get:function(){var t,o=this.popupOption,u=o.config,d=o.items;return(t=u!=null?u:d)!==null&&t!==void 0?t:[]}},{key:"addTo",value:function(t){return(0,Va.Z)((0,Hr.Z)(n.prototype),"addTo",this).call(this,t),this.bindLayerEvent(),this.hide(),this}},{key:"remove",value:function(){return(0,Va.Z)((0,Hr.Z)(n.prototype),"remove",this).call(this),this.unbindLayerEvent(),this}},{key:"setOptions",value:function(t){return this.unbindLayerEvent(),(0,Va.Z)((0,Hr.Z)(n.prototype),"setOptions",this).call(this,t),this.bindLayerEvent(),this}},{key:"getDefault",value:function(t){var o=t.trigger==="click";return(0,Ne.Z)((0,Ne.Z)({},(0,Va.Z)((0,Hr.Z)(n.prototype),"getDefault",this).call(this,t)),{},{trigger:"hover",followCursor:!o,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!1,autoClose:!1,closeOnEsc:!1})}},{key:"bindLayerEvent",value:function(){var t=this,o=this.popupOption.trigger;this.layerConfigItems.forEach(function(u){var d,S=t.getLayerByConfig(u);if(S){var U=(0,Ne.Z)({},u);if(o==="hover"){var ce=t.onLayerMouseMove.bind(t,S),ve=t.onLayerMouseOut.bind(t,S);U.onMouseMove=ce,U.onMouseOut=ve,S==null||S.on("mousemove",ce),S==null||S.on("mouseout",ve)}else{var Je=t.onLayerClick.bind(t,S);U.onClick=Je,S==null||S.on("click",Je)}var Ye=S==null||(d=S.getSource)===null||d===void 0?void 0:d.call(S),Kt=t.onSourceUpdate.bind(t,S);Ye==null||Ye.on("update",Kt),U.onSourceUpdate=Kt,t.layerConfigMap.set(S,U)}})}},{key:"unbindLayerEvent",value:function(){var t=this;this.layerConfigItems.forEach(function(o){var u=t.getLayerByConfig(o),d=u&&t.layerConfigMap.get(u);if(d){var S=d.onMouseMove,U=d.onMouseOut,ce=d.onClick,ve=d.onSourceUpdate;if(S&&u.off("mousemove",S),U&&u.off("mouseout",U),ce&&u.off("click",ce),ve){var Je;u==null||(Je=u.getSource())===null||Je===void 0||Je.off("update",ve)}}})}},{key:"onLayerMouseMove",value:function(t,o){if(!this.isSameFeature(t,o.featureId)){var u=this.getLayerInfoFrag(t,o),d=u.title,S=u.content;this.setDOMContent(S),this.setTitle(d),this.displayFeatureInfo={layer:t,featureId:o.featureId},this.show()}}},{key:"onLayerMouseOut",value:function(t,o){this.displayFeatureInfo=void 0,this.isShow&&this.hide()}},{key:"onLayerClick",value:function(t,o){if(this.isShow&&this.isSameFeature(t,o.featureId))this.hide();else{var u=this.getLayerInfoFrag(t,o),d=u.title,S=u.content;this.setDOMContent(S),this.setLnglat(o.lngLat),this.setTitle(d),this.displayFeatureInfo={layer:t,featureId:o.featureId},this.show()}}},{key:"onSourceUpdate",value:function(t){var o;((o=this.displayFeatureInfo)===null||o===void 0?void 0:o.layer)===t&&(this.hide(),this.displayFeatureInfo=void 0)}},{key:"getLayerInfoFrag",value:function(t,o){var u=this.layerConfigMap.get(t),d,S=document.createDocumentFragment();if(u){var U=o.feature;U.type==="Feature"&&"properties"in U&&"geometry"in U&&(U=U.properties);var ce=u.title,ve=u.fields,Je=u.customContent;if(ce){d=document.createDocumentFragment();var Ye=ce instanceof Function?ce(U):ce;Ge.SO.appendElementType(d,Ye)}if(Je){var Kt=Je instanceof Function?Je(U):Je;Ge.SO.appendElementType(S,Kt)}else ve!=null&&ve.length&&(ve==null||ve.forEach(function(tr){var Fr,Kr,hn=typeof tr=="string"?{field:tr}:tr,sn=hn.field,Yn=hn.formatField,hi=hn.formatValue,Zi=hn.getValue,zi=Ge.SO.create("div","l7-layer-popup__row"),pa=Zi?Zi(o.feature):(0,at.get)(U,sn),_o=(Fr=Yn instanceof Function?Yn(sn,U):Yn)!==null&&Fr!==void 0?Fr:sn,Co=(Kr=hi instanceof Function?hi(pa,U):hi)!==null&&Kr!==void 0?Kr:pa,Ba=Ge.SO.create("span","l7-layer-popup__key",zi);Ge.SO.appendElementType(Ba,_o),Ge.SO.appendElementType(Ba,document.createTextNode("\uFF1A"));var ms=Ge.SO.create("span","l7-layer-popup__value",zi);Ge.SO.appendElementType(ms,Co),S.appendChild(zi)}))}return{title:d,content:S}}},{key:"getLayerByConfig",value:function(t){var o=t.layer;if(o instanceof Object)return o;if(typeof o=="string")return this.layerService.getLayer(o)||this.layerService.getLayerByName(o)}},{key:"isSameFeature",value:function(t,o){var u=this.displayFeatureInfo;return u&&t===u.layer&&o===u.featureId}}]),n}(Tl);function $h(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}$h(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 1000;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 800;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  height: 24px;
  line-height: 24px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 16px;
  font-size: 12px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  height: 14px;
  width: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  padding: 12px 12px 0 12px;
  width: 474px;
  height: 320px;
  overflow: auto;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-select-control--image .l7-select-control-item {
  margin-right: 12px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid #fff;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  width: calc((100% - 36px) / 3);
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  margin-bottom: 12px;
  position: relative;
  font-size: 12px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 142px;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  right: 0;
  top: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control--image .l7-select-control-item:nth-child(3n) {
  margin-right: 0;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  overflow: hidden;
}
.l7-control-zoom .l7-button-control {
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
  border-radius: 0;
  font-size: 16px;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:first-child {
  border-bottom: 1px solid #f0f0f0;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
`);var Ul=m(43269),Rl=m(53229),ol,uu=(ol={},(0,X.Z)(ol,Ee.h0.additive,{enable:!0,func:{srcRGB:Ee.gl.ONE,dstRGB:Ee.gl.ONE,srcAlpha:1,dstAlpha:1}}),(0,X.Z)(ol,Ee.h0.none,{enable:!1}),(0,X.Z)(ol,Ee.h0.normal,{enable:!0,func:{srcRGB:Ee.gl.SRC_ALPHA,dstRGB:Ee.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,X.Z)(ol,Ee.h0.subtractive,{enable:!0,func:{srcRGB:Ee.gl.ONE,dstRGB:Ee.gl.ONE,srcAlpha:Ee.gl.ZERO,dstAlpha:Ee.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:Ee.gl.FUNC_SUBTRACT,alpha:Ee.gl.FUNC_SUBTRACT}}),(0,X.Z)(ol,Ee.h0.max,{enable:!0,func:{srcRGB:Ee.gl.ONE,dstRGB:Ee.gl.ONE},equation:{rgb:Ee.gl.MAX_EXT}}),(0,X.Z)(ol,Ee.h0.min,{enable:!0,func:{srcRGB:Ee.gl.ONE,dstRGB:Ee.gl.ONE},equation:{rgb:Ee.gl.MIN_EXT}}),ol);function Bc(a,s,n,r,t){s.updateStyleAttribute(a,n,r,t)}function cc(a,s){s.tileLayer||s.isTileLayer||(a.opacity&&ao("opacity",s,a.opacity),a.strokeWidth&&ao("strokeWidth",s,a.strokeWidth),a.strokeOpacity&&ao("strokeOpacity",s,a.strokeOpacity),a.stroke&&Hf("stroke",s,a.stroke),a.offsets&&Ml("offsets",s,a.offsets),a.textOffset&&Ml("textOffset",s,a.textOffset),a.thetaOffset&&ao("thetaOffset",s,a.thetaOffset))}function ao(a,s,n){(0,at.isString)(n)?Bc(a,s,n,function(r){return r}):(0,at.isNumber)(n)||(Array.isArray(n)&&n.length===2?(0,at.isString)(n[0])&&(0,at.isFunction)(n[1])||(0,at.isString)(n[0])&&Array.isArray(n[1])&&(0,at.isNumber)(n[1][0])&&(0,at.isNumber)(n[1][1])?Bc(a,s,n[0],n[1]):Bc(a,s,[1],void 0):Bc(a,s,[1],void 0))}function Ml(a,s,n){(0,at.isString)(n)?Bc(a,s,n,function(r){return r}):Array.isArray(n)&&n.length===2&&(0,at.isString)(n[0])&&(0,at.isFunction)(n[1])?Bc(a,s,n[0],n[1]):Array.isArray(n)&&n.length===2&&(0,at.isNumber)(n[0])&&(0,at.isNumber)(n[1])?Bc(a,s,n,void 0):Bc(a,s,[0,0],void 0)}function Hf(a,s,n){(0,at.isString)(n)||(Array.isArray(n)&&n.length===2&&((0,at.isString)(n[0])&&(0,at.isFunction)(n[1])||(0,at.isString)(n[0])&&Array.isArray(n[1])&&n[1].length>0)?Bc(a,s,n[0],n[1]):Bc(a,s,"#fff",void 0))}var fl=m(84859);function Vl(a,s){var n=[s[0]-a[0],s[1]-a[1]],r=(0,Ge.Fv)(n),t=[a[0]+r[0]*1e-4,a[1]+r[1]*1e-4];return t}function Ll(a,s,n){if(a.length>0&&s.version===fl.G["GAODE2.x"]){var r=n.coordCenter;typeof a[0].coordinates[0]=="number"?a.filter(function(t){return!t.originCoordinates}).map(function(t){t.version=fl.G["GAODE2.x"],t.originCoordinates=(0,at.cloneDeep)(t.coordinates),t.coordinates=s.lngLatToCoordByLayer(t.coordinates,r)}):a.filter(function(t){return!t.originCoordinates}).map(function(t){t.version=fl.G["GAODE2.x"],t.originCoordinates=(0,at.cloneDeep)(t.coordinates),t.coordinates=s.lngLatToCoordsByLayer(t.coordinates,r)})}}function jh(a,s){a.length>0&&s.version===fl.G.SIMPLE&&a.map(function(n){n.simpleCoordinate||(n.coordinates=Qa(n.coordinates,s),n.simpleCoordinate=!0)})}function Qa(a,s){if(typeof a[0]=="number")return s.simpleMapCoord.unproject(a);if(a[0]&&a[0][0]instanceof Array){var n=[];return a.map(function(t){var o=[];t.map(function(u){o.push(s.simpleMapCoord.unproject(u))}),n.push(o)}),n}else{var r=[];return a.map(function(t){r.push(s.simpleMapCoord.unproject(t))}),r}}function Yl(a,s){var n;if(!a.scale)return[];var r=(a==null||(n=a.scale)===null||n===void 0?void 0:n.scalers)||[],t=[];r.forEach(function(u){var d,S=u.field;(s.hasOwnProperty(S)||((d=a.scale)===null||d===void 0?void 0:d.type)==="variable")&&t.push(s[S])});var o=a.mapping?a.mapping(t):[];return o}function Vf(a,s,n,r,t){var o=t==null?void 0:t.getLayerConfig(),u=o.arrow,d=u===void 0?{enable:!1}:u,S=s.map(function(U){var ce={id:U._id,coordinates:U.coordinates};if(a.filter(function(Ye){return Ye.scale!==void 0}).forEach(function(Ye){var Kt=Yl(Ye,U);Ye.needRemapping=!1,Ye.name==="color"&&(Kt=Kt.map(function(tr){return(0,Ge.CI)(tr)})),ce[Ye.name]=Array.isArray(Kt)&&Kt.length===1?Kt[0]:Kt,Ye.name==="shape"&&(ce.shape=n.getIconFontKey(ce[Ye.name]))}),ce.shape==="line"&&d.enable){var ve=ce.coordinates,Je=Vl(ve[0],ve[1]);ce.coordinates.splice(1,0,Je,Je)}return ce});return Ll(S,r,t),jh(S,r),S}function ih(a,s,n,r,t,o){var u=new Ko(t,o),d=r.getLayerStyleAttributes()||[],S=u.data.dataArray,U=S,ce=Vf(d,U,s,n,a);return u.destroy(),ce}function Vu(a){return a.map(function(s){return typeof s=="string"&&(s=[s,{}]),s})}function hf(a,s,n,r){var t=a.multiPassRenderer,o=a.getLayerConfig(),u=o.enableTAA;return u?t.add(r("taa")):t.add(r("render")),Vu(s).forEach(function(d){var S=(0,oi.Z)(d,2),U=S[0],ce=S[1];t.add(n(U),ce)}),t.add(n("copy")),t}var Hh=function(){function a(s){(0,mr.Z)(this,a),this.layer=s}return(0,Or.Z)(a,[{key:"pickRender",value:function(n){var r=this.layer;if(r.tileLayer)return r.tileLayer.pickRender(n);r.hooks.beforePickingEncode.call(),r.masks.length>0&&r.masks.filter(function(t){return t.inited}).forEach(function(){var t=(0,$t.Z)(we().mark(function o(u){return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:u.render();case 1:case"end":return S.stop()}},o)}));return function(o){return t.apply(this,arguments)}}()),r.renderModels(!0),r.hooks.afterPickingEncode.call()}},{key:"pick",value:function(n,r){var t=this.layer.getContainer(),o=t.get(Ee.vK.IPickingService);return n.type==="RasterLayer"?this.pickRasterLayer(n,r):(this.pickRender(r),o.pickFromPickingFBO(n,r))}},{key:"pickRasterLayer",value:function(n,r,t){var o=this.layer.getContainer(),u=o.get(Ee.vK.IPickingService),d=o.get(Ee.vK.IMapService),S=this.layer.getSource().extent,U=(0,Ge.if)(r.lngLat,S),ce={x:r.x,y:r.y,type:r.type,lngLat:r.lngLat,target:r,rasterValue:null},ve=t||n;if(U){var Je=this.readRasterValue(n,S,d,r.x,r.y);return ce.rasterValue=Je,u.triggerHoverOnLayer(ve,ce),!0}else return ce.type=r.type==="mousemove"?"mouseout":"un"+r.type,u.triggerHoverOnLayer(ve,(0,Ne.Z)((0,Ne.Z)({},ce),{},{type:"unpick"})),u.triggerHoverOnLayer(ve,ce),!1}},{key:"readRasterValue",value:function(n,r,t,o,u){var d=n.getSource().data.dataArray[0],S=(0,oi.Z)(r,4),U=S[0],ce=U===void 0?0:U,ve=S[1],Je=ve===void 0?0:ve,Ye=S[2],Kt=Ye===void 0?10:Ye,tr=S[3],Fr=tr===void 0?-10:tr,Kr=t.lngLatToContainer([ce,Je]),hn=t.lngLatToContainer([Kt,Fr]),sn=hn.x-Kr.x,Yn=Kr.y-hn.y,hi=[(o-Kr.x)/sn,(u-hn.y)/Yn],Zi=d.width||1,zi=d.height||1,pa=Math.floor(hi[0]*Zi),_o=Math.floor(hi[1]*zi),Co=Math.max(0,_o-1)*Zi+pa,Ba=d.data[Co];return Ba}},{key:"selectFeature",value:function(n){var r=this.layer,t=(0,oi.Z)(n,3),o=t[0],u=t[1],d=t[2];r.hooks.beforeSelect.call([o,u,d])}},{key:"highlightPickedFeature",value:function(n){var r=(0,oi.Z)(n,3),t=r[0],o=r[1],u=r[2];this.layer.hooks.beforeHighlight.call([t,o,u])}},{key:"getFeatureById",value:function(n){return this.layer.getSource().getFeatureById(n)}}]),a}(),bc=function(){function a(s){(0,mr.Z)(this,a),this.layer=s;var n=this.layer.getContainer();this.rendererService=n.get(Ee.vK.IRendererService)}return(0,Or.Z)(a,[{key:"getColorTexture",value:function(n,r){var t=this.getTextureKey(n,r);return this.key===t?this.colorTexture:(this.createColorTexture(n,r),this.key=t,this.colorTexture)}},{key:"createColorTexture",value:function(n,r){var t=this.rendererService.createTexture2D,o=this.getColorRampBar(n,r),u=t({data:o.data,width:o.width,height:o.height,flipY:!1});return this.colorTexture=u,u}},{key:"setColorTexture",value:function(n,r,t){this.key=this.getTextureKey(r,t),this.colorTexture=n}},{key:"destroy",value:function(){var n;(n=this.colorTexture)===null||n===void 0||n.destroy()}},{key:"getColorRampBar",value:function(n,r){switch(n.type){case"cat":return(0,Ge.hj)(n);case"quantize":return(0,Ge.NJ)(n);case"custom":return(0,Ge.Oc)(n,r);case"linear":return(0,Ge.M4)(n,r);default:return(0,Ge.Cl)(n)}}},{key:"getTextureKey",value:function(n,r){var t;return"".concat(n.colors.join("_"),"_").concat(n==null||(t=n.positions)===null||t===void 0?void 0:t.join("_"),"_").concat(n.type,"_").concat(r==null?void 0:r.join("_"))}}]),a}(),Ec=["passes"],ah=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber","workerEnabled","workerOptions"],Wc,Dh,Sc;function Vh(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Ql(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Ql(a,s){if(a){if(typeof a=="string")return gu(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gu(a,s)}}function gu(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function Ks(a){var s=Gf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Gf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Bf=0,eu=(Wc=(0,Ee.yT)(Ee.vK.IGlobalConfigService),Dh=function(a){(0,Zr.Z)(n,a);var s=Ks(n);function n(){var r,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,mr.Z)(this,n),r=s.call(this),(0,X.Z)((0,lr.Z)(r),"id","".concat(Bf++)),(0,X.Z)((0,lr.Z)(r),"name","".concat(Bf)),(0,X.Z)((0,lr.Z)(r),"visible",!0),(0,X.Z)((0,lr.Z)(r),"zIndex",0),(0,X.Z)((0,lr.Z)(r),"inited",!1),(0,X.Z)((0,lr.Z)(r),"layerModelNeedUpdate",!1),(0,X.Z)((0,lr.Z)(r),"pickedFeatureID",null),(0,X.Z)((0,lr.Z)(r),"selectedFeatureID",null),(0,X.Z)((0,lr.Z)(r),"styleNeedUpdate",!1),(0,X.Z)((0,lr.Z)(r),"forceRender",!1),(0,X.Z)((0,lr.Z)(r),"clusterZoom",0),(0,X.Z)((0,lr.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,X.Z)((0,lr.Z)(r),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,X.Z)((0,lr.Z)(r),"hooks",{init:new Bo.S$,afterInit:new Bo.oI,beforeRender:new Bo.oI,beforeRenderData:new Bo.bf,afterRender:new Bo.ni,beforePickingEncode:new Bo.ni,afterPickingEncode:new Bo.ni,beforeHighlight:new Bo.ni(["pickedColor"]),afterHighlight:new Bo.ni,beforeSelect:new Bo.ni(["pickedColor"]),afterSelect:new Bo.ni,beforeDestroy:new Bo.ni,afterDestroy:new Bo.ni}),(0,X.Z)((0,lr.Z)(r),"models",[]),(0,X.Z)((0,lr.Z)(r),"startInit",!1),(0,X.Z)((0,lr.Z)(r),"layerChildren",[]),(0,X.Z)((0,lr.Z)(r),"masks",[]),(0,Ul.Z)((0,lr.Z)(r),"configService",Sc,(0,lr.Z)(r)),(0,X.Z)((0,lr.Z)(r),"animateOptions",{enable:!1}),(0,X.Z)((0,lr.Z)(r),"currentPickId",null),(0,X.Z)((0,lr.Z)(r),"pendingStyleAttributes",[]),(0,X.Z)((0,lr.Z)(r),"scaleOptions",{}),(0,X.Z)((0,lr.Z)(r),"animateStatus",!1),(0,X.Z)((0,lr.Z)(r),"isDestroyed",!1),(0,X.Z)((0,lr.Z)(r),"encodeDataLength",0),(0,X.Z)((0,lr.Z)(r),"sourceEvent",function(){r.dataState.dataSourceNeedUpdate=!0;var o=r.getLayerConfig();o&&o.autoFit&&r.fitBounds(o.fitBoundsOptions);var u=r.layerSource.getSourceCfg().autoRender;u&&r.reRender()}),r.name=t.name||r.id,r.zIndex=t.zIndex||0,r.rawConfig=t,r}return(0,Or.Z)(n,[{key:"addMaskLayer",value:function(t){this.masks.push(t)}},{key:"removeMaskLayer",value:function(t){var o=this.masks.indexOf(t);o>-1&&this.masks.splice(o,1),t.destroy()}},{key:"getAttribute",value:function(t){return this.styleAttributeService.getLayerStyleAttribute(t)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(t){var o=this;if(Object.keys(t).map(function(d){d in o.rawConfig&&(o.rawConfig[d]=t[d])}),!this.startInit)this.needUpdateConfig=(0,Ne.Z)((0,Ne.Z)({},this.needUpdateConfig),t);else{var u=this.container.get(Ee.vK.SceneID);cc(t,this),this.configService.setLayerConfig(u,this.id,(0,Ne.Z)((0,Ne.Z)((0,Ne.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(t,o){this.container=t,this.sceneContainer=o}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(t){return this.plugins.push(t),this}},{key:"init",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:d=this.container.get(Ee.vK.SceneID),this.startInit=!0,this.configService.setLayerConfig(d,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Ee.vK.IIconService),this.fontService=this.container.get(Ee.vK.IFontService),this.rendererService=this.container.get(Ee.vK.IRendererService),this.layerService=this.container.get(Ee.vK.ILayerService),this.debugService=this.container.get(Ee.vK.IDebugService),this.interactionService=this.container.get(Ee.vK.IInteractionService),this.pickingService=this.container.get(Ee.vK.IPickingService),this.mapService=this.container.get(Ee.vK.IMapService),S=this.getLayerConfig(),U=S.enableMultiPassRenderer,ce=S.passes,U&&ce!==null&&ce!==void 0&&ce.length&&ce.length>0&&this.mapService.on("mapAfterFrameChange",function(){u.renderLayers()}),this.cameraService=this.container.get(Ee.vK.ICameraService),this.coordinateService=this.container.get(Ee.vK.ICoordinateSystemService),this.shaderModuleService=this.container.get(Ee.vK.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Ee.vK.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Ee.vK.IFactoryNormalPass),this.styleAttributeService=this.container.get(Ee.vK.IStyleAttributeService),U&&(this.multiPassRenderer=this.container.get(Ee.vK.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(Fr){var Kr=Fr.attributeName,hn=Fr.attributeField,sn=Fr.attributeValues,Yn=Fr.updateOptions;u.styleAttributeService.updateStyleAttribute(Kr,{scale:(0,Ne.Z)({field:hn},u.splitValuesAndCallbackInAttribute(sn,u.getLayerConfig()[Kr]))},Yn)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Ee.vK.ILayerPlugin),ve=Vh(this.plugins);try{for(ve.s();!(Je=ve.n()).done;)Ye=Je.value,Ye.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(Fr){ve.e(Fr)}finally{ve.f()}return this.layerPickService=new Hh(this),this.textureService=new bc(this),this.log(Ee.Or.LayerInitStart),tr.next=31,this.hooks.init.promise();case 31:this.log(Ee.Or.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"log",value:function(t){var o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var d="".concat(this.id,".").concat(u,".").concat(t),S={id:this.id,type:this.type};(o=this.debugService)===null||o===void 0||o.log(d,S)}}},{key:"updateModelData",value:function(t){t.attributes&&t.elements?this.models.map(function(o){o.updateAttributesAndElements(t.attributes,t.elements)}):console.warn("data error")}},{key:"createModelData",value:function(t,o){var u;if((u=this.layerModel)!==null&&u!==void 0&&u.createModelData)return this.layerModel.createModelData(o);var d=this.calculateEncodeData(t,o),S=this.triangulation;return d&&S?this.styleAttributeService.createAttributesAndIndices(d,S):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(t){this.layerPickService=t}},{key:"calculateEncodeData",value:function(t,o){return this.inited?ih(this,this.fontService,this.mapService,this.styleAttributeService,t,o):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.updateLayerConfig((0,Ne.Z)((0,Ne.Z)((0,Ne.Z)({},this.getDefaultConfig()),this.rawConfig),this.needUpdateConfig));var t=this.getLayerConfig(),o=t.animateOption;o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(t,o,u){return this.updateStyleAttribute("color",t,o,u),this}},{key:"texture",value:function(t,o,u){return this.updateStyleAttribute("texture",t,o,u),this}},{key:"rotate",value:function(t,o,u){return this.updateStyleAttribute("rotate",t,o,u),this}},{key:"size",value:function(t,o,u){return this.updateStyleAttribute("size",t,o,u),this}},{key:"filter",value:function(t,o,u){var d=this.updateStyleAttribute("filter",t,o,u);return this.dataState.dataSourceNeedUpdate=d,this}},{key:"shape",value:function(t,o,u){this.shapeOption={field:t,values:o};var d=this.updateStyleAttribute("shape",t,o,u);return this.dataState.dataSourceNeedUpdate=d,this}},{key:"label",value:function(t,o,u){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:o,updateOptions:u}),this}},{key:"animate",value:function(t){var o={};return(0,at.isObject)(t)?(o.enable=!0,o=(0,Ne.Z)((0,Ne.Z)({},o),t)):o.enable=t,this.updateLayerConfig({animateOption:o}),this}},{key:"source",value:function(t,o){return(t==null?void 0:t.type)==="source"?(this.setSource(t),this):(this.sourceOption={data:t,options:o},this.clusterZoom=0,this)}},{key:"setData",value:function(t,o){var u=this;return this.inited?(this.log(Ee.Or.SourceInitStart,Ee.KD.UPDATE),this.layerSource.setData(t,o),this.log(Ee.Or.SourceInitEnd,Ee.KD.UPDATE)):this.on("inited",function(){u.log(Ee.Or.SourceInitStart,Ee.KD.UPDATE);var d=u.getSource();d?u.layerSource.setData(t,o):u.source(new Ko(t,o)),u.layerSource.once("update",function(){u.log(Ee.Or.SourceInitEnd,Ee.KD.UPDATE)})}),this}},{key:"style",value:function(t){var o=this,u=t.passes,d=(0,ls.Z)(t,Ec);return u&&Vu(u).forEach(function(S){var U=o.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(S[0]);U&&U.updateOptions(S[1])}),this.rawConfig=(0,Ne.Z)((0,Ne.Z)({},this.rawConfig),d),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(t,o){var u=(0,Ne.Z)({},this.scaleOptions);if((0,at.isObject)(t)?this.scaleOptions=(0,Ne.Z)((0,Ne.Z)({},this.scaleOptions),t):this.scaleOptions[t]=o,this.styleAttributeService&&!(0,at.isEqual)(u,this.scaleOptions)){var d=(0,at.isObject)(t)?t:(0,X.Z)({},t,o);this.styleAttributeService.updateScaleAttribute(d)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(),this))}},{key:"renderMultiPass",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){d.next=2;break}return d.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){d.next=7;break}return d.next=5,this.multiPassRenderer.render();case 5:d.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"active",value:function(t){var o={};return o.enableHighlight=(0,at.isObject)(t)?!0:t,(0,at.isObject)(t)?(o.enableHighlight=!0,t.color&&(o.highlightColor=t.color),t.mix&&(o.activeMix=t.mix)):o.enableHighlight=!!t,this.updateLayerConfig(o),this}},{key:"setActive",value:function(t,o){var u=this;if((0,at.isObject)(t)){var d=t.x,S=d===void 0?0:d,U=t.y,ce=U===void 0?0:U;this.updateLayerConfig({highlightColor:(0,at.isObject)(o)?o.color:this.getLayerConfig().highlightColor,activeMix:(0,at.isObject)(o)?o.mix:this.getLayerConfig().activeMix}),this.pick({x:S,y:ce})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:(0,at.isObject)(o)?o.color:this.getLayerConfig().highlightColor,activeMix:(0,at.isObject)(o)?o.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call((0,Ge.Z6)(t)).then(function(){setTimeout(function(){u.reRender()},1)})}},{key:"select",value:function(t){var o={};return o.enableSelect=(0,at.isObject)(t)?!0:t,(0,at.isObject)(t)?(o.enableSelect=!0,t.color&&(o.selectColor=t.color),t.mix&&(o.selectMix=t.mix)):o.enableSelect=!!t,this.updateLayerConfig(o),this}},{key:"setSelect",value:function(t,o){var u=this;if((0,at.isObject)(t)){var d=t.x,S=d===void 0?0:d,U=t.y,ce=U===void 0?0:U;this.updateLayerConfig({selectColor:(0,at.isObject)(o)?o.color:this.getLayerConfig().selectColor,selectMix:(0,at.isObject)(o)?o.mix:this.getLayerConfig().selectMix}),this.pick({x:S,y:ce})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:(0,at.isObject)(o)?o.color:this.getLayerConfig().selectColor,selectMix:(0,at.isObject)(o)?o.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Ge.Z6)(t)).then(function(){setTimeout(function(){u.reRender()},1)})}},{key:"setBlend",value:function(t){return this.updateLayerConfig({blend:t}),this.layerModelNeedUpdate=!0,this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(t){return this.zIndex=t,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(t){this.currentPickId=t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(t){this.selectedFeatureID=t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var t=this.mapService.getZoom(),o=this.getLayerConfig(),u=o.visible,d=o.minZoom,S=d===void 0?-1/0:d,U=o.maxZoom,ce=U===void 0?1/0:U;return!!u&&t>=S&&t<ce}},{key:"setMultiPass",value:function(t,o){if(this.updateLayerConfig({enableMultiPassRenderer:t}),o&&this.updateLayerConfig({passes:o}),t){var u=this.getLayerConfig(),d=u.passes,S=d===void 0?[]:d;this.multiPassRenderer=hf(this,S,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var U=this.rendererService.getViewportSize(),ce=U.width,ve=U.height;this.multiPassRenderer.resize(ce,ve)}return this}},{key:"setMinZoom",value:function(t){return this.updateLayerConfig({minZoom:t}),this}},{key:"getMinZoom",value:function(){var t=this.getLayerConfig(),o=t.minZoom;return o}},{key:"getMaxZoom",value:function(){var t=this.getLayerConfig(),o=t.maxZoom;return o}},{key:"get",value:function(t){var o=this.getLayerConfig();return o[t]}},{key:"setMaxZoom",value:function(t){return this.updateLayerConfig({maxZoom:t}),this}},{key:"setAutoFit",value:function(t){return this.updateLayerConfig({autoFit:t}),this}},{key:"fitBounds",value:function(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var o=this.getSource(),u=o.extent,d=u.some(function(S){return Math.abs(S)===1/0});return d?this:(this.mapService.fitBounds([[u[0],u[1]],[u[2],u[3]]],t),this)}},{key:"destroy",value:function(){var t,o,u,d,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isDestroyed||(this.layerChildren.map(function(U){return U.destroy(!1)}),this.layerChildren=[],this.masks.map(function(U){return U.destroy(!1)}),this.masks=[],this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(t=this.multiPassRenderer)===null||t===void 0||t.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(o=this.layerModel)===null||o===void 0||o.clearModels(S),(u=this.tileLayer)===null||u===void 0||u.destroy(),this.models=[],(d=this.debugService)===null||d===void 0||d.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var t;this.models.forEach(function(o){return o.destroy()}),(t=this.layerModel)===null||t===void 0||t.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(t){return t.needRescale||t.needRemapping||t.needRegenerateVertices}).length}},{key:"setSource",value:function(t){var o=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var u=this.mapService.getZoom();this.layerSource.updateClusterData(u)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(d){var S=d.type;if(o.coordCenter===void 0){var U,ce=o.layerSource.center;o.coordCenter=ce,(U=o.mapService)!==null&&U!==void 0&&U.setCoordCenter&&o.mapService.setCoordCenter(ce)}S==="update"&&o.sourceEvent()})}},{key:"initSource",value:function(t){this.layerSource=t,this.clusterZoom=0,this.addSourceEvent()}},{key:"getSource",value:function(){return this.layerSource}},{key:"addSourceEvent",value:function(){var t=this;this.layerSource.on("update",function(){if(t.coordCenter===void 0){var o,u=t.layerSource.center;t.coordCenter=u,(o=t.mapService)!==null&&o!==void 0&&o.setCoordCenter&&t.mapService.setCoordCenter(u)}t.sourceEvent()})}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(t){this.encodedData=t,this.encodeDataLength=t.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(t){return this.styleAttributeService.getLayerAttributeScale(t)}},{key:"getLegend",value:function(t){var o,u,d,S=this.styleAttributeService.getLayerStyleAttribute(t),U=(S==null||(o=S.scale)===null||o===void 0?void 0:o.scalers)||[];return{type:(u=U[0].option)===null||u===void 0?void 0:u.type,field:S==null||(d=S.scale)===null||d===void 0?void 0:d.field,items:this.getLegendItems(t)}}},{key:"getLegendItems",value:function(t){var o=this.styleAttributeService.getLayerAttributeScale(t);if(!o)return[];if(o.invertExtent){var u=o.range().map(function(U){return(0,X.Z)({value:o.invertExtent(U)},t,U)});return u}else if(o.ticks){var d=o.ticks().map(function(U){return(0,X.Z)({value:U},t,o(U))});return d}else if(o!=null&&o.domain){var S=o.domain().filter(function(U){return!(0,at.isUndefined)(U)}).map(function(U){return(0,X.Z)({value:U},t,o(U))});return S}return[]}},{key:"pick",value:function(t){var o=t.x,u=t.y;this.interactionService.triggerHover({x:o,y:u})}},{key:"boxSelect",value:function(t,o){this.pickingService.boxPickLayer(this,t,o)}},{key:"buildLayerModel",value:function(){var r=(0,$t.Z)(we().mark(function o(u){var d=this,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn,hi;return we().wrap(function(zi){for(;;)switch(zi.prev=zi.next){case 0:return S=u.moduleName,U=u.vertexShader,ce=u.fragmentShader,ve=u.triangulation,Je=u.segmentNumber,Ye=u.workerEnabled,Kt=Ye===void 0?!1:Ye,tr=u.workerOptions,Fr=(0,ls.Z)(u,ah),this.shaderModuleService.registerModule(S,{vs:U,fs:ce}),Kr=this.shaderModuleService.getModule(S),hn=Kr.vs,sn=Kr.fs,Yn=Kr.uniforms,hi=this.rendererService.createModel,zi.abrupt("return",new Promise(function(pa,_o){if(tr&&tr.modelType in Ge.lN&&Kt)d.styleAttributeService.createAttributesAndIndicesAscy(d.encodedData,Je,tr).then(function(Ih){var Rh=Ih.attributes,md=Ih.elements,hh=hi((0,Ne.Z)({attributes:Rh,uniforms:Yn,fs:sn,vs:hn,elements:md,blend:uu[Ee.h0.normal]},Fr));pa(hh)}).catch(function(Ih){return _o(Ih)});else{var Co=d.styleAttributeService.createAttributesAndIndices(d.encodedData,ve,Je),Ba=Co.attributes,ms=Co.elements,au=Co.count,Al=(0,Ne.Z)({attributes:Ba,uniforms:Yn,fs:sn,vs:hn,elements:ms,blend:uu[Ee.h0.normal]},Fr);au&&(Al.count=au);var nd=hi(Al);pa(nd)}}));case 5:case"end":return zi.stop()}},o,this)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"createAttributes",value:function(t){var o=t.triangulation,u=this.styleAttributeService.createAttributes(this.encodedData,o),d=u.attributes;return d}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(t){var o=this.getLayerConfig(),u=o.enableHighlight,d=u===void 0?!0:u,S=o.enableSelect,U=S===void 0?!0:S,ce=this.eventNames().indexOf(t)!==-1||this.eventNames().indexOf("un"+t)!==-1;return(t==="click"||t==="dblclick")&&U&&(ce=!0),t==="mousemove"&&(d||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(ce=!0),this.isVisible()&&ce}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return d.stop()}},o)}));function t(){return r.apply(this,arguments)}return t}()},{key:"rebuildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.buildModels();case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"renderMulPass",value:function(){var r=(0,$t.Z)(we().mark(function o(u){return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,u.render();case 2:case"end":return S.stop()}},o)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"renderModels",value:function(t){var o=this;return this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(u){u.draw({uniforms:o.layerModel.getUninforms()},t)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(t,o,u,d){var S=this.configService.getAttributeConfig(this.id)||{};return(0,at.isEqual)(S[t],{field:o,values:u})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(t)!==-1&&this.configService.setAttributeConfig(this.id,(0,X.Z)({},t,{field:o,values:u})),this.startInit?this.styleAttributeService.updateStyleAttribute(t,{scale:(0,Ne.Z)({field:o},this.splitValuesAndCallbackInAttribute(u,this.getLayerConfig()[o]))},d):this.pendingStyleAttributes.push({attributeName:t,attributeField:o,attributeValues:u,updateOptions:d}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(t){console.warn("empty fn")}},{key:"processData",value:function(t){return t}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.models.forEach(function(S){return S.destroy()}),this.models=[],d.next=4,this.layerModel.initModels();case 4:this.models=d.sent;case 5:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(t,o){return{values:(0,at.isFunction)(t)?void 0:t||o,callback:(0,at.isFunction)(t)?t:void 0}}}]),n}(Yr.EventEmitter),Sc=(0,Rl.Z)(Dh.prototype,"configService",[Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dh),Pl=m(37620),Xc,Nc,Jl;function fc(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=oo(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function oo(a,s){if(a){if(typeof a=="string")return ko(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ko(a,s)}}function ko(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var nu=(Xc=(0,Ee.yT)(Ee.vK.IGlobalConfigService),Nc=function(){function a(s){(0,mr.Z)(this,a),(0,Ul.Z)(this,"configService",Jl,this),this.layer=s,this.rendererService=s.getContainer().get(Ee.vK.IRendererService),this.pickingService=s.getContainer().get(Ee.vK.IPickingService),this.shaderModuleService=s.getContainer().get(Ee.vK.IShaderModuleService),this.styleAttributeService=s.getContainer().get(Ee.vK.IStyleAttributeService),this.mapService=s.getContainer().get(Ee.vK.IMapService),this.iconService=s.getContainer().get(Ee.vK.IIconService),this.fontService=s.getContainer().get(Ee.vK.IFontService),this.cameraService=s.getContainer().get(Ee.vK.ICameraService),this.layerService=s.getContainer().get(Ee.vK.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,width:1,height:1}))}return(0,Or.Z)(a,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertiesExist.hasOpacity,this.stylePropertiesExist.hasStrokeOpacity,this.stylePropertiesExist.hasStrokeWidth,this.stylePropertiesExist.hasStroke,this.stylePropertiesExist.hasOffsets,this.stylePropertiesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(n){var r=!1;return(0,at.isEqual)(n.thetaOffset,this.cacheStyleProperties.thetaOffset)||(r=!0,this.cacheStyleProperties.thetaOffset=n.thetaOffset),(0,at.isEqual)(n.opacity,this.cacheStyleProperties.opacity)||(r=!0,this.cacheStyleProperties.opacity=n.opacity),(0,at.isEqual)(n.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(r=!0,this.cacheStyleProperties.strokeOpacity=n.strokeOpacity),(0,at.isEqual)(n.strokeWidth,this.cacheStyleProperties.strokeWidth)||(r=!0,this.cacheStyleProperties.strokeWidth=n.strokeWidth),(0,at.isEqual)(n.stroke,this.cacheStyleProperties.stroke)||(r=!0,this.cacheStyleProperties.stroke=n.stroke),(0,at.isEqual)(n.offsets,this.cacheStyleProperties.offsets)||(r=!0,this.cacheStyleProperties.offsets=n.offsets),this.dataTexture===void 0&&(r=!0),r}},{key:"judgeStyleAttributes",value:function(n){this.clearLastCalRes(),n.opacity!==void 0&&!(0,at.isNumber)(n.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertiesExist.hasOpacity=1,this.cellLength+=1),n.strokeOpacity!==void 0&&!(0,at.isNumber)(n.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertiesExist.hasStrokeOpacity=1,this.cellLength+=1),n.strokeWidth!==void 0&&!(0,at.isNumber)(n.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertiesExist.hasStrokeWidth=1,this.cellLength+=1),n.stroke!==void 0&&!this.isStaticColor(n.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertiesExist.hasStroke=1,this.cellLength+=4),n.offsets!==void 0&&!this.isOffsetStatic(n.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertiesExist.hasOffsets=1,this.cellLength+=2),n.thetaOffset!==void 0&&!(0,at.isNumber)(n.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertiesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(n){return(0,at.isString)(n)?!!(0,Pl.ZP)(n):!1}},{key:"getStrokeColor",value:function(n){if(this.isStaticColor(n)){var r=(0,Ge.CI)(n);return r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,r[2]=r[2]?r[2]:0,r[3]=r[3]?r[3]:0,r}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(n){return!!(Array.isArray(n)&&n.length===2&&(0,at.isNumber)(n[0])&&(0,at.isNumber)(n[1]))}},{key:"patchMod",value:function(n,r){for(var t=0;t<r;t++)n.push(-1)}},{key:"patchData",value:function(n,r,t){var o=fc(t),u;try{for(o.s();!(u=o.n()).done;){var d=u.value,S=d.attr,U=d.count,ce=r[S];ce!==void 0?S==="stroke"?n.push.apply(n,(0,We.Z)((0,Ge.CI)(ce))):S==="offsets"?this.isOffsetStatic(ce)?n.push(-ce[0],ce[1]):n.push(0,0):n.push((0,at.isNumber)(ce)?ce:1):this.patchMod(n,U)}}catch(ve){o.e(ve)}finally{o.f()}}},{key:"calDataFrame",value:function(n,r,t){for(var o=r.length,u=Math.ceil(o*n/this.DATA_TEXTURE_WIDTH),d=u*this.DATA_TEXTURE_WIDTH,S=[],U=0;U<o;U++){var ce=r[U];this.patchData(S,ce,t)}for(var ve=S.length;ve<d;ve++)S.push(-1);return{data:S,width:this.DATA_TEXTURE_WIDTH,height:u}}},{key:"getBlend",value:function(){var n=this.layer.getLayerConfig(),r=n.blend,t=r===void 0?"normal":r;return uu[Ee.h0[t]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var s=(0,$t.Z)(we().mark(function r(){return we().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",!1);case 1:case"end":return o.stop()}},r)}));function n(){return s.apply(this,arguments)}return n}()},{key:"buildModels",value:function(){var s=(0,$t.Z)(we().mark(function r(){return we().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return o.stop()}},r)}));function n(){return s.apply(this,arguments)}return n}()},{key:"initModels",value:function(){var s=(0,$t.Z)(we().mark(function r(){return we().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return o.stop()}},r)}));function n(){return s.apply(this,arguments)}return n}()},{key:"clearModels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.duration||4,n.interval||.2,n.trailLength||.1]}},{key:"startModelAnimate",value:function(){var n=this.layer.getLayerConfig(),r=n.animateOption;r.enable&&this.layer.setAnimateStartTime()}}]),a}(),Jl=(0,Rl.Z)(Nc.prototype,"configService",[Xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc),ql;(function(a){a[a.solid=0]="solid",a[a.dash=1]="dash"})(ql||(ql={}));var xl;(function(a){a.VERTICAL="vertical",a.HORIZONTAL="horizontal"})(xl||(xl={}));var mu;(function(a){a.NORMAL="normal",a.REPLACE="replace"})(mu||(mu={}));var Ku;(function(a){a[a.pixel=0]="pixel",a[a.meter=1]="meter"})(Ku||(Ku={}));var Kc;(function(a){a.ALWAYS="always",a.DRAGEND="dragend"})(Kc||(Kc={}));function Gh(a){var s=Yu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Yu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bl=function(a){(0,Zr.Z)(n,a);var s=Gh(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateMode",Kc.ALWAYS),(0,X.Z)((0,lr.Z)(r),"renderUpdate",function(){var d=r.layer.getLayerConfig(),S=d.zIndex,U=S===void 0?10:S,ce=d.update,ve=ce===void 0?Kc.ALWAYS:ce,Je=d.animateOption,Ye=Je===void 0?{enable:!1,duration:20}:Je;+r.canvas.style.zIndex===U&&(r.canvas.style.zIndex=U+""),r.updateMode!==ve&&(r.updateMode=ve,r.unBindListener(),r.bindListener()),r.updateMode===Kc.ALWAYS&&Ye.enable&&r.renderCanvas()}),(0,X.Z)((0,lr.Z)(r),"unBindListener",function(){r.mapService.off("mapchange",r.renderCanvas),r.mapService.off("zoomstart",r.clearCanvas),r.mapService.off("zoomend",r.renderCanvas),r.mapService.off("movestart",r.clearCanvas),r.mapService.off("moveend",r.renderCanvas)}),(0,X.Z)((0,lr.Z)(r),"bindListener",function(){r.updateMode===Kc.ALWAYS?r.mapService.on("mapchange",r.renderCanvas):(r.mapService.on("zoomstart",r.clearCanvas),r.mapService.on("zoomend",r.renderCanvas),r.mapService.on("movestart",r.clearCanvas),r.mapService.on("moveend",r.renderCanvas))}),(0,X.Z)((0,lr.Z)(r),"clearCanvas",function(){if(r.ctx){var d=r.rendererService.getViewportSize(),S=d.width,U=d.height;r.ctx.clearRect(0,0,S,U)}}),(0,X.Z)((0,lr.Z)(r),"renderCanvas",function(){var d=r.rendererService.getViewportSize(),S=d.width,U=d.height;if(r.prevSize[0]!==S||r.prevSize[1]!==U){r.prevSize=[S,U];var ce=r.mapService.getSize(),ve=(0,oi.Z)(ce,2),Je=ve[0],Ye=ve[1];r.canvas.width=S,r.canvas.height=U,r.canvas.style.width=Je+"px",r.canvas.style.height=Ye+"px"}var Kt=r.layer.getLayerConfig(),tr=Kt.drawingOnCanvas;r.ctx&&tr({canvas:r.canvas,ctx:r.ctx,mapService:r.mapService,size:[S,U]})}),r}return(0,Or.Z)(n,[{key:"clearModels",value:function(){if(this.canvas){var t;(t=this.mapService.getContainer())===null||t===void 0||t.removeChild(this.canvas),this.canvas=null}this.unBindListener()}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S;return we().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return u=this.layer.getLayerConfig(),d=u.update,S=d===void 0?Kc.ALWAYS:d,this.updateMode=S,this.initCanvas(),this.renderCanvas(),this.bindListener(),this.mapService.getContainer(),ce.abrupt("return",[]);case 7:case"end":return ce.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"initCanvas",value:function(){var t,o=this.layer.getLayerConfig(),u=o.zIndex,d=this.mapService.getSize(),S=(0,oi.Z)(d,2),U=S[0],ce=S[1],ve=this.rendererService.getViewportSize(),Je=ve.width,Ye=ve.height;this.prevSize=[Je,Ye];var Kt=document.createElement("canvas");this.canvas=Kt,Kt.width=Je,Kt.height=Ye,Kt.style.pointerEvents="none",Kt.style.width=U+"px",Kt.style.height=ce+"px",Kt.style.position="absolute",Kt.style.top="0",Kt.style.left="0",Kt.style.zIndex=u+"",(t=this.mapService.getContainer())===null||t===void 0||t.appendChild(Kt);var tr=Kt.getContext("2d");this.ctx=tr}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){}}]),n}(nu),yd={canvas:bl},ph=yd;function Cc(a){var s=Yc();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Yc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Dl=function(a){(0,Zr.Z)(n,a);var s=Cc(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","CanvasLayer"),(0,X.Z)((0,lr.Z)(r),"forceRender",!0),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new ph[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"hide",value:function(){return this.layerModel.clearCanvas&&this.layerModel.clearCanvas(),this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"renderModels",value:function(){var t,o=this;return this!==null&&this!==void 0&&(t=this.layerModel)!==null&&t!==void 0&&t.renderUpdate&&this.layerModel.renderUpdate(),this.models.forEach(function(u){u.draw({uniforms:o.layerModel.getUninforms()},!1)}),this}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={canvas:{}};return o[t]}},{key:"getModelType",value:function(){return"canvas"}}]),n}(eu),Ur=m(9187),kl=m.n(Ur),Vo=m(85975),Qo=m(77160),du=100,kh=36,Wf=40;function zc(a){return a/180*Math.acos(-1)}function df(a){var s=zc(a[0])+Math.PI/2,n=zc(a[1]),r=du+Math.random()*.4,t=r*Math.cos(n)*Math.cos(s),o=r*Math.cos(n)*Math.sin(s),u=r*Math.sin(n);return[o,u,t]}function rc(a,s){var n=Vo.create(),r=Vo.create(),t=Qo.fromValues(0,1,0),o=Qo.fromValues(0,0,0);s=s||{},a=typeof a!="undefined"?a:1;for(var u=typeof s.segments!="undefined"?s.segments:32,d=2+u,S=2*d,U=[],ce=[],ve=[],Je=[],Ye=[],Kt=[],tr=0;tr<=d;tr++){for(var Fr=tr/d,Kr=Fr*Math.PI,hn=0;hn<=S;hn++){var sn=hn/S,Yn=sn*Math.PI*2;Vo.identity(r),Vo.rotateZ(r,r,-Kr),Vo.identity(n),Vo.rotateY(n,n,Yn),Qo.transformMat4(o,t,r),Qo.transformMat4(o,o,n),Qo.scale(o,o,-a),ve.push(o.slice()),Je.push.apply(Je,(0,We.Z)(o.slice())),Qo.normalize(o,o),Ye.push.apply(Ye,(0,We.Z)(o.slice())),Kt.push([sn,1-Fr]),Je.push(sn,1-Fr)}if(tr>0)for(var hi=ve.length,Zi=hi-2*(S+1);Zi+S+2<hi;Zi++)U.push([Zi,Zi+1,Zi+S+1]),ce.push(Zi,Zi+1,Zi+S+1),U.push([Zi+S+1,Zi+1,Zi+S+2]),ce.push(Zi+S+1,Zi+1,Zi+S+2)}return{cells:U,positions:ve,uvs:Kt,positionsArr:Je,indicesArr:ce,normalArr:Ye}}var ys=m(31437),bf=ys.Ue(),Xf=ys.Ue(),rl=ys.Ue(),wc=ys.Ue(),Zc=ys.Ue();function sd(a,s,n,r,t){ys.IH(a,n,r),ys.Fv(a,a),s=ys.al(-a[1],a[0]);var o=ys.al(-n[1],n[0]);return[t/ys.AK(s,o),s]}function Qc(a,s){return ys.t8(a,-s[1],s[0])}function f(a,s,n){return ys.lu(a,s,n),ys.Fv(a,a),a}function g(a,s){return a[0]===s[0]&&a[1]===s[1]}function p(a){for(var s=new Map,n=0;n<a.length;n++){var r=a[0].toString()+"-"+a[1].toString();s.get(r)?(a.splice(n,1),n++):s.set(r,r)}return a}var E=function(){function a(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,mr.Z)(this,a),(0,X.Z)(this,"lastFlip",-1),(0,X.Z)(this,"miter",ys.al(0,0)),(0,X.Z)(this,"started",!1),(0,X.Z)(this,"dash",!1),(0,X.Z)(this,"totalDistance",0),(0,X.Z)(this,"currentIndex",0),this.join=s.join||"miter",this.cap=s.cap||"butt",this.miterLimit=s.miterLimit||10,this.thickness=s.thickness||1,this.dash=s.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,Or.Z)(a,[{key:"simpleExtrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var t=n.length,o=r.startIndex,u=1;u<t;u++){var d=n[u-1],S=n[u],U=u<n.length-1?n[u+1]:null,ce=this.simpleSegment(r,o,d,S,U);o+=ce}if(this.dash)for(var ve=0;ve<r.positions.length/6;ve++)r.positions[ve*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(n,r){var t=this.complex;if(n.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=n.length,u=t.startIndex,d=1;d<o;d++){var S,U,ce,ve=n[d-1];ve.push((S=r[d-1][2])!==null&&S!==void 0?S:0);var Je=r[d-1],Ye=n[d];Ye.push((U=r[d][2])!==null&&U!==void 0?U:0);var Kt=r[d],tr=d<n.length-1?[].concat((0,We.Z)(n[d+1]),[(ce=r[d+1][2])!==null&&ce!==void 0?ce:0]):null,Fr=d<r.length-1?r[d+1]:null,Kr=this.simpleSegment(t,u,ve,Ye,tr,Je,Kt,Fr);u+=Kr}if(this.dash)for(var hn=0;hn<t.positions.length/6;hn++)t.positions[hn*6+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"extrude_gaode2",value:function(n,r){var t=this.complex;if(n.length<=1)return t;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=n.length,u=t.startIndex,d=1;d<o;d++){var S,U,ce,ve=n[d-1];ve.push((S=r[d-1][2])!==null&&S!==void 0?S:0);var Je=r[d-1],Ye=n[d];Ye.push((U=r[d][2])!==null&&U!==void 0?U:0);var Kt=r[d],tr=d<n.length-1?[].concat((0,We.Z)(n[d+1]),[(ce=r[d+1][2])!==null&&ce!==void 0?ce:0]):null,Fr=d<r.length-1?r[d+1]:null,Kr=this.segment_gaode2(t,u,ve,Ye,tr,Je,Kt,Fr);u+=Kr}if(this.dash)for(var hn=0;hn<t.positions.length/6;hn++)t.positions[hn*6+5]=this.totalDistance;return t.startIndex=t.positions.length/6,t}},{key:"extrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var t=n.length,o=r.startIndex,u=1;u<t;u++){var d=n[u-1],S=n[u],U=u<n.length-1?n[u+1]:null,ce=this.segment(r,o,d,S,U);o+=ce}if(this.dash)for(var ve=0;ve<r.positions.length/6;ve++)r.positions[ve*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleSegment",value:function(n,r,t,o,u){var d=0,S=n.indices,U=n.positions,ce=n.normals,ve=(0,Ge.Z)([o[0],o[1]]),Je=(0,Ge.Z)([t[0],t[1]]);f(rl,ve,Je);var Ye=0;if(this.dash&&(Ye=this.lineSegmentDistance(ve,Je),this.totalDistance+=Ye),this.normal||(this.normal=ys.Ue(),Qc(this.normal,rl)),this.started||(this.started=!0,this.extrusions(U,ce,t,this.normal,this.thickness,this.totalDistance-Ye)),S.push(r+0,r+1,r+2),!u)Qc(this.normal,rl),this.extrusions(U,ce,o,this.normal,this.thickness,this.totalDistance),S.push.apply(S,(0,We.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),d+=2;else{var Kt=(0,Ge.Z)([u[0],u[1]]);g(ve,Kt)&&ys.IH(Kt,ve,ys.Fv(Kt,ys.$X(Kt,ve,Je))),f(wc,Kt,ve);var tr=sd(Zc,ys.Ue(),rl,wc,this.thickness),Fr=(0,oi.Z)(tr,2),Kr=Fr[0],hn=Fr[1],sn=ys.AK(Zc,this.normal)<0?-1:1;this.extrusions(U,ce,o,hn,Kr,this.totalDistance),S.push.apply(S,(0,We.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),sn=-1,ys.JG(this.normal,hn),d+=2,this.lastFlip=sn}return d}},{key:"segment_gaode2",value:function(n,r,t,o,u,d,S,U){var ce=0,ve=n.indices,Je=n.positions,Ye=n.normals,Kt=this.cap==="square",tr=this.join==="bevel",Fr=(0,Ge.Z)([S[0],S[1]]),Kr=(0,Ge.Z)([d[0],d[1]]);f(rl,o,t);var hn=0;if(this.dash&&(hn=this.lineSegmentDistance(Fr,Kr),this.totalDistance+=hn),this.normal||(this.normal=ys.Ue(),Qc(this.normal,rl)),!this.started)if(this.started=!0,Kt){var sn=ys.Ue(),Yn=ys.Ue();ys.IH(sn,this.normal,rl),ys.IH(Yn,this.normal,rl),Ye.push(Yn[0],Yn[1],0),Ye.push(sn[0],sn[1],0),Je.push(t[0],t[1],t[2]|0,this.totalDistance-hn,-this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),Je.push(t[0],t[1],t[2]|0,this.totalDistance-hn,this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Je,Ye,t,this.normal,this.thickness,this.totalDistance-hn);if(ve.push(r+0,r+1,r+2),u){g(o,u)&&ys.IH(u,o,ys.Fv(u,ys.$X(u,o,t))),f(wc,u,o);var zi=sd(Zc,ys.Ue(),rl,wc,this.thickness),pa=(0,oi.Z)(zi,2),_o=pa[0],Co=pa[1],Ba=ys.AK(Zc,this.normal)<0?-1:1,ms=tr;if(!ms&&this.join==="miter"){var au=_o;au>this.miterLimit&&(ms=!0)}ms?(Ye.push(this.normal[0],this.normal[1],0),Ye.push(Co[0],Co[1],0),Je.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*Ba,o[2]|0),this.complex.indexes.push(this.currentIndex),Je.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*Ba,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,ve.push.apply(ve,(0,We.Z)(this.lastFlip!==-Ba?[r,r+2,r+3]:[r+2,r+1,r+3])),ve.push(r+2,r+3,r+4),Qc(bf,wc),ys.JG(this.normal,bf),Ye.push(this.normal[0],this.normal[1],0),Je.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*Ba,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,ce+=3):(this.extrusions(Je,Ye,o,Co,_o,this.totalDistance),ve.push.apply(ve,(0,We.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),Ba=-1,ys.JG(this.normal,Co),ce+=2),this.lastFlip=Ba}else{if(Qc(this.normal,rl),Kt){var hi=ys.Ue(),Zi=ys.Ue();ys.lu(Zi,rl,this.normal),ys.IH(hi,rl,this.normal),Ye.push(Zi[0],Zi[1],0),Ye.push(hi[0],hi[1],0),Je.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),Je.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Je,Ye,o,this.normal,this.thickness,this.totalDistance);ve.push.apply(ve,(0,We.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),ce+=2}return ce}},{key:"segment",value:function(n,r,t,o,u){var d=0,S=n.indices,U=n.positions,ce=n.normals,ve=this.cap==="square",Je=this.join==="bevel",Ye=(0,Ge.Z)([o[0],o[1]]),Kt=(0,Ge.Z)([t[0],t[1]]);f(rl,Ye,Kt);var tr=0;if(this.dash&&(tr=this.lineSegmentDistance(Ye,Kt),this.totalDistance+=tr),this.normal||(this.normal=ys.Ue(),Qc(this.normal,rl)),!this.started)if(this.started=!0,ve){var Fr=ys.Ue(),Kr=ys.Ue();ys.IH(Fr,this.normal,rl),ys.IH(Kr,this.normal,rl),ce.push(Kr[0],Kr[1],0),ce.push(Fr[0],Fr[1],0),U.push(t[0],t[1],t[2]|0,this.totalDistance-tr,-this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),U.push(t[0],t[1],t[2]|0,this.totalDistance-tr,this.thickness,t[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(U,ce,t,this.normal,this.thickness,this.totalDistance-tr);if(S.push(r+0,r+1,r+2),u){var Yn=(0,Ge.Z)([u[0],u[1]]);g(Ye,Yn)&&ys.IH(Yn,Ye,ys.Fv(Yn,ys.$X(Yn,Ye,Kt))),f(wc,Yn,Ye);var hi=sd(Zc,ys.Ue(),rl,wc,this.thickness),Zi=(0,oi.Z)(hi,2),zi=Zi[0],pa=Zi[1],_o=ys.AK(Zc,this.normal)<0?-1:1,Co=Je;if(!Co&&this.join==="miter"){var Ba=zi;Ba>this.miterLimit&&(Co=!0)}Co?(ce.push(this.normal[0],this.normal[1],0),ce.push(pa[0],pa[1],0),U.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*_o,o[2]|0),this.complex.indexes.push(this.currentIndex),U.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*_o,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,S.push.apply(S,(0,We.Z)(this.lastFlip!==-_o?[r,r+2,r+3]:[r+2,r+1,r+3])),S.push(r+2,r+3,r+4),Qc(bf,wc),ys.JG(this.normal,bf),ce.push(this.normal[0],this.normal[1],0),U.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*_o,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,d+=3):(this.extrusions(U,ce,o,pa,zi,this.totalDistance),S.push.apply(S,(0,We.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),_o=-1,ys.JG(this.normal,pa),d+=2),this.lastFlip=_o}else{if(Qc(this.normal,rl),ve){var hn=ys.Ue(),sn=ys.Ue();ys.lu(sn,rl,this.normal),ys.IH(hn,rl,this.normal),ce.push(sn[0],sn[1],0),ce.push(hn[0],hn[1],0),U.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),U.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(U,ce,o,this.normal,this.thickness,this.totalDistance);S.push.apply(S,(0,We.Z)(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),d+=2}return d}},{key:"extrusions",value:function(n,r,t,o,u,d){r.push(o[0],o[1],0),r.push(o[0],o[1],0),n.push(t[0],t[1],t[2]|0,d,-u,t[2]|0),this.complex.indexes.push(this.currentIndex),n.push(t[0],t[1],t[2]|0,d,u,t[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(n,r){var t=r[0]-n[0],o=r[1]-n[1];return Math.sqrt(t*t+o*o)}}]),a}();function Y(a){var s=a[0][0],n=a[0][a[0].length-1];s[0]===n[0]&&s[1]===n[1]&&(a[0]=a[0].slice(0,a[0].length-1));for(var r=a[0].length,t=kl().flatten(a),o=t.vertices,u=t.dimensions,d=[],S=[],U=0;U<o.length/u;U++)u===2?d.push(o[U*2],o[U*2+1],1):d.push(o[U*3],o[U*3+1],1);var ce=kl()(t.vertices,t.holes,t.dimensions);S.push.apply(S,(0,We.Z)(ce));for(var ve=function(Kt){var tr=t.vertices.slice(Kt*u,(Kt+1)*u),Fr=t.vertices.slice((Kt+1)*u,(Kt+2)*u);Fr.length===0&&(Fr=t.vertices.slice(0,u));var Kr=d.length/3;d.push(tr[0],tr[1],1,Fr[0],Fr[1],1,tr[0],tr[1],0,Fr[0],Fr[1],0),S.push.apply(S,(0,We.Z)([0,2,1,2,3,1].map(function(hn){return hn+Kr})))},Je=0;Je<r;Je++)ve(Je);return{positions:d,index:S}}function ye(a){var s=kl().flatten(a),n=kl()(s.vertices,s.holes,s.dimensions);return{positions:s.vertices,index:n}}function Pe(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=a[0][0],r=a[0][a[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(a[0]=a[0].slice(0,a[0].length-1));for(var t=a[0].length,o=kl().flatten(a),u=o.vertices,d=o.dimensions,S=[],U=[],ce=[],ve=0;ve<u.length/d;ve++)d===2?S.push(u[ve*2],u[ve*2+1],1,-1,-1):S.push(u[ve*3],u[ve*3+1],1,-1,-1),ce.push(0,0,1);var Je=kl()(o.vertices,o.holes,o.dimensions);U.push.apply(U,(0,We.Z)(Je));for(var Ye=function(Fr){var Kr=o.vertices.slice(Fr*d,(Fr+1)*d),hn=o.vertices.slice((Fr+1)*d,(Fr+2)*d);hn.length===0&&(hn=o.vertices.slice(0,d));var sn=S.length/5;S.push(Kr[0],Kr[1],1,0,0,hn[0],hn[1],1,.1,0,Kr[0],Kr[1],0,0,.8,hn[0],hn[1],0,.1,.8);var Yn=ct([hn[0],hn[1],1],[Kr[0],Kr[1],0],[Kr[0],Kr[1],1],s);ce.push.apply(ce,(0,We.Z)(Yn).concat((0,We.Z)(Yn),(0,We.Z)(Yn),(0,We.Z)(Yn))),U.push.apply(U,(0,We.Z)([1,2,0,3,2,1].map(function(hi){return hi+sn})))},Kt=0;Kt<t;Kt++)Ye(Kt);return{positions:S,index:U,normals:ce}}function ct(a,s,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,t=Qo.create(),o=Qo.create(),u=Qo.create();r&&(a=(0,Ge.vP)(a),s=(0,Ge.vP)(s),n=(0,Ge.vP)(n));var d=Qo.fromValues.apply(Qo,(0,We.Z)(a)),S=Qo.fromValues.apply(Qo,(0,We.Z)(s)),U=Qo.fromValues.apply(Qo,(0,We.Z)(n));Qo.sub(t,U,S),Qo.sub(o,d,S),Qo.cross(u,t,o);var ce=Qo.create();return Qo.normalize(ce,u),ce}var Vt,fr;(function(a){a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn"})(fr||(fr={}));var Ir;(function(a){a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon"})(Ir||(Ir={}));function Dr(a){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=Math.PI*2/a,r=[],t=0;t<a;t++)r.push(n*t+s*Math.PI/12);var o=r.map(function(u){var d=Math.sin(u+Math.PI/4),S=Math.cos(u+Math.PI/4);return[d,S,0]});return o}function jr(){return Dr(30)}function En(){return Dr(4)}function gn(){return Dr(3)}function Bn(){return Dr(6,1)}function fn(){return Dr(5)}var Fn=(Vt={},(0,X.Z)(Vt,Ir.CIRCLE,jr),(0,X.Z)(Vt,Ir.HEXAGON,Bn),(0,X.Z)(Vt,Ir.TRIANGLE,gn),(0,X.Z)(Vt,Ir.SQUARE,En),(0,X.Z)(Vt,Ir.PENTAGON,fn),(0,X.Z)(Vt,fr.CYLINDER,jr),(0,X.Z)(Vt,fr.HEXAGONCOLUMN,Bn),(0,X.Z)(Vt,fr.TRIANGLECOLUMN,gn),(0,X.Z)(Vt,fr.SQUARECOLUMN,En),(0,X.Z)(Vt,fr.PENTAGONCOLUMN,fn),Vt),jn={};function vi(a){var s=(0,Ge.SI)(a.coordinates);return{vertices:[].concat((0,We.Z)(s),(0,We.Z)(s),(0,We.Z)(s),(0,We.Z)(s)),indices:[0,1,2,2,3,0],size:s.length}}function ki(a){var s=(0,Ge.SI)(a.coordinates),n=df(s);return{vertices:[].concat((0,We.Z)(n),(0,We.Z)(n),(0,We.Z)(n),(0,We.Z)(n)),indices:[0,1,2,2,3,0],size:n.length}}function Ti(a){var s=a.shape,n=_s(s,!1),r=n.positions,t=n.index,o=n.normals;return{vertices:r,indices:t,normals:o,size:5}}function Fi(a){var s=(0,Ge.SI)(a.coordinates);return{vertices:(0,We.Z)(s),indices:[0],size:s.length}}function na(a){var s=a.coordinates,n=a.originCoordinates,r=a.version,t=new E({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var o=s;Array.isArray(o[0][0])||(o=[s]);var u=n;Array.isArray(u[0][0])||(u=[n]);for(var d=0;d<o.length;d++){var S=o[d],U=u[d];t.extrude_gaode2(S,U)}}else{var ce=s;ce[0]&&!Array.isArray(ce[0][0])&&(ce=[s]),ce.forEach(function(Je){t.extrude(Je)})}var ve=t.complex;return{vertices:ve.positions,indices:ve.indices,normals:ve.normals,indexes:ve.indexes,size:6}}function ka(a){var s=a.coordinates,n=[];if(!Array.isArray(s[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var r=is(s),t=r.results,o=r.totalDistance;return t.map(function(u){n.push(u[0],u[1],u[2],u[3],0,o)}),{vertices:n,indices:[],normals:[],size:6,count:t.length}}function Na(a){var s=a.coordinates,n=[];if(!Array.isArray(s[0]))return{vertices:[],indices:[],size:4,count:0};var r=rs(s),t=r.results;return t.map(function(o){n.push(o[0],o[1],o[2],o[3])}),{vertices:n,indices:[],size:4,count:t.length}}function po(a,s){var n=s[0]-a[0],r=s[1]-a[1];return Math.sqrt(n*n+r*r)}function No(a,s){return a.length<3&&a.push(0),s!==void 0&&a.push(s),a}function is(a){var s=a;Array.isArray(s)&&Array.isArray(s[0])&&Array.isArray(s[0][0])&&(s=a.flat());var n=0;if(s.length<2)return{results:s,totalDistance:0};var r=[],t=No(s[0],n);r.push(t);for(var o=1;o<s.length-1;o++){var u=po(s[o-1],s[o]);n+=u;var d=No(s[o],n);r.push(d),r.push(d)}var S=po(s[s.length-2],s[s.length-1]);return n+=S,r.push(No(s[s.length-1],n)),{results:r,totalDistance:n}}function rs(a){if(a.length<2)return{results:a};var s=[],n=No(a[0]);s.push(n);for(var r=1;r<a.length-1;r++){var t=No(a[r]);s.push(t),s.push(t)}return s.push(No(a[a.length-1])),{results:s}}function Ls(a){var s=a.coordinates,n=kl().flatten(s),r=n.vertices,t=n.dimensions,o=n.holes;return{indices:kl()(r,o,t),vertices:r,size:t}}function vo(a){var s=a.coordinates,n=kl().flatten(s),r=n.vertices,t=n.dimensions,o=n.holes;return{indices:kl()(r,o,t),vertices:ds(r),size:t+4}}function ds(a){for(var s=[],n=(0,Ge.Rx)(a),r=n.center,t=n.radius,o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];s.push.apply(s,[u,d,0].concat((0,We.Z)(r),[t]))}return s}function Ns(a){var s=a.coordinates,n=Pe(s,!0),r=n.positions,t=n.index,o=n.normals;return{vertices:r,indices:t,normals:o,size:5}}function cs(a){var s=a.shape,n=Ac(s),r=n.positions,t=n.index;return{vertices:r,indices:t,size:3}}function Jo(a){var s=a.coordinates,n=[].concat((0,We.Z)(s[0]),[0,0,1,s[1][0],s[0][1],0,1,1],(0,We.Z)(s[1]),[0,1,0],(0,We.Z)(s[0]),[0,0,1],(0,We.Z)(s[1]),[0,1,0,s[0][0],s[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function $s(a,s){for(var n=s||30,r=a.coordinates,t=[],o=[],u=function(U){t.push(U,1,U,r[0][0],r[0][1],r[1][0],r[1][1],U,-1,U,r[0][0],r[0][1],r[1][0],r[1][1]),U!==n-1&&o.push.apply(o,(0,We.Z)([0,1,2,1,3,2].map(function(ce){return U*2+ce})))},d=0;d<n;d++)u(d);return{vertices:t,indices:o,size:7}}function ws(a){var s=a.coordinates;s.length===2&&s.push(0);var n=Ju(-1,1),r=Ju(1,1),t=Ju(-1,-1),o=Ju(1,-1),u=[].concat((0,We.Z)(s),(0,We.Z)(n),(0,We.Z)(s),(0,We.Z)(t),(0,We.Z)(s),(0,We.Z)(o),(0,We.Z)(s),(0,We.Z)(r)),d=[0,1,2,3,0,2];return{vertices:u,indices:d,size:5}}function _s(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(jn&&jn[a])return jn[a];var n=Fn[a]?Fn[a]():Fn.cylinder(),r=Pe([n],s);return jn[a]=r,r}function El(a,s){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,t=new Float32Array(a.length/n*3),o,u,d,S=vec3.create(),U=vec3.create(),ce=vec3.create(),ve=0,Je=s.length;ve<Je;ve+=3){o=s[ve+0]*3,u=s[ve+1]*3,d=s[ve+2]*3;var Ye=[a[o],a[o+1]],Kt=[a[u],a[u+1]],tr=[a[d],a[d+1]];r&&(Ye=lngLatToMeters(Ye),Kt=lngLatToMeters(Kt),tr=lngLatToMeters(tr));var Fr=Ye,Kr=_slicedToArray(Fr,2),hn=Kr[0],sn=Kr[1],Yn=vec3.fromValues(hn,sn,a[o+2]),hi=Kt,Zi=_slicedToArray(hi,2),zi=Zi[0],pa=Zi[1],_o=vec3.fromValues(zi,pa,a[u+2]),Co=tr,Ba=_slicedToArray(Co,2),ms=Ba[0],au=Ba[1],Al=vec3.fromValues(ms,au,a[d+2]);vec3.sub(S,Al,_o),vec3.sub(U,Yn,_o),vec3.cross(ce,S,U),t[o]+=S[0],t[o+1]+=S[1],t[o+2]+=S[2],t[u]+=S[0],t[u+1]+=S[1],t[u+2]+=S[2],t[d]+=S[0],t[d+1]+=S[1],t[d+2]+=S[2]}return nl(t),t}function nl(a){for(var s=0,n=a.length;s<n;s+=3){var r=vec3.fromValues(a[s],a[s+1],a[s+2]),t=vec3.create();vec3.normalize(t,r),a.set(t,s)}}function Qu(a){var s=a[0][0],n=a[0][a[0].length-1];return s[0]===n[0]&&s[1]===n[1]}function Ac(a){var s=["cylinder","triangleColumn","hexagonColumn","squareColumn"],n=Fn[a]?Fn[a]():Fn.circle(),r=s.indexOf(a)===-1?ye([n]):Y([n]);return r}function Ju(a,s){var n=(a+1)/2,r=(s+1)/2;return[n,r]}function qu(){var a=rc(du,{segments:kh}),s=a.positionsArr,n=a.indicesArr,r=a.normalArr;return{vertices:s,indices:n,size:5,normals:r}}function Tc(){var a=rc(du+Wf,{segments:kh}),s=a.positionsArr,n=a.indicesArr,r=a.normalArr;return{vertices:s,indices:n,size:5,normals:r}}function ec(a){var s=Pf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ef=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

uniform float u_circleSweep;
uniform float u_cityMinSize;
uniform vec3 u_circleSweepColor;
uniform float u_circleSweepSpeed;

varying float v_worldDis;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }


  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {
    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);
    gl_FragColor.rgb += r * r * u_circleSweepColor;
  }
   
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,$l=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;
uniform mat4 u_Mvp;

uniform float u_circleSweep;
uniform vec2 u_cityCenter;

varying float v_worldDis;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"


void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

   v_texCoord = a_Uv;

  if(u_circleSweep > 0.0) {
     vec2 lnglatscale = vec2(0.0);
    if(u_CoordinateSystem != COORDINATE_SYSTEM_P20_2) {
      lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);
    }
    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);
  }
 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,Uc=function(a){(0,Zr.Z)(n,a);var s=ec(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.baseColor,S=d===void 0?"rgb(16,16,16)":d,U=t.brightColor,ce=U===void 0?"rgb(255,176,38)":U,ve=t.windowColor,Je=ve===void 0?"rgb(30,60,89)":ve,Ye=t.time,Kt=Ye===void 0?0:Ye,tr=t.sweep,Fr=tr===void 0?{enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}:tr;return{u_cityCenter:Fr.sweepCenter||this.cityCenter,u_cityMinSize:this.cityMinSize*Fr.sweepRadius,u_circleSweep:Fr.enable?1:0,u_circleSweepColor:(0,Ge.CI)(Fr.sweepColor).slice(0,3),u_circleSweepSpeed:Fr.sweepSpeed,u_opacity:u,u_baseColor:(0,Ge.CI)(S),u_brightColor:(0,Ge.CI)(ce),u_windowColor:(0,Ge.CI)(Je),u_time:this.layer.getLayerAnimateTime()||Kt}}},{key:"calCityGeo",value:function(){var t=(0,oi.Z)(this.layer.getSource().extent,4),o=t[0],u=t[1],d=t[2],S=t[3];if(this.mapService.version==="GAODE2.x"){this.cityCenter=this.mapService.lngLatToCoord([(d+o)/2,(S+u)/2]);var U=this.mapService.lngLatToCoord([d,S]),ce=this.mapService.lngLatToCoord([o,u]);this.cityMinSize=Math.sqrt(Math.pow(U[0]-ce[0],2)+Math.pow(U[1]-ce[1],2))/4}else{var ve=d-o,Je=S-u;this.cityCenter=[(d+o)/2,(S+u)/2],this.cityMinSize=Math.sqrt(Math.pow(ve,2)+Math.pow(Je,2))/4}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.calCityGeo(),this.startModelAnimate(),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:$l,fragmentShader:Ef,triangulation:Ns,depth:{enable:!0},cull:{enable:!0,face:Ee.gl.BACK}});case 2:return u=S.sent,S.abrupt("return",[u]);case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?10:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function Jh(a){var s=qh();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function qh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Sh=function(a){(0,Zr.Z)(n,a);var s=Jh(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","CityBuildingLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.layerModel=new Uc(this),d.next=3,this.initLayerModels();case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"setLight",value:function(t){this.updateLayerConfig({time:t})}},{key:"getModelType",value:function(){return"citybuilding"}}]),n}(eu);function Of(a){var s=Ch();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ch(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var pf=`
uniform sampler2D u_texture;
uniform float u_opacity;

varying vec3 v_Color;
varying vec2 v_uv;

#pragma include "picking"
void main() {
  gl_FragColor = texture2D(u_texture, vec2(v_uv.x, 1.0 - v_uv.y));
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,oh=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform float u_raisingHeight: 0.0;
uniform mat4 u_Mvp;
uniform float u_opacity;
uniform vec2 u_size: [1.0, 1.0];
uniform mat2 u_RotateMatrix;

attribute vec3 a_Extrude;
attribute vec3 a_Position;
attribute vec2 a_Uv;
attribute vec3 a_Color;

varying vec3 v_Color;
varying vec2 v_uv;

#pragma include "projection"
#pragma include "picking"
void main() {
   vec3 extrude = a_Extrude;
   v_Color = a_Color;
   v_uv = a_Uv;

   float raiseHeight = u_raisingHeight;
   if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raiseHeight = u_raisingHeight * mapboxZoomScale;
   }

   // \u8BA1\u7B97\u7ECF\u7EAC\u5EA6\u70B9\u4F4D\u5750\u6807
   vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

   // \u8BA1\u7B97\u7ED5 z \u8F74\u65CB\u8F6C\u540E\u7684\u504F\u79FB
   vec2 offsetXY = project_pixel(u_RotateMatrix * vec2(extrude.x * u_size.x, 0.0));
   // \u7ED5 z \u8F74\u65CB\u8F6C
   float x = project_pos.x + offsetXY.x;
   float y = project_pos.y + offsetXY.y;
   // z \u8F74\u4E0D\u53C2\u4E0E\u65CB\u8F6C
   float z = project_pixel(extrude.y * u_size.y + raiseHeight);


   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      // gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));
      gl_Position = u_Mvp * (vec4(x, y, z, 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(x , y, z , 1.0));
   }

   setPickingColor(a_PickingColor);
}
`,Jc=function(a){(0,Zr.Z)(n,a);var s=Of(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"radian",0),(0,X.Z)((0,lr.Z)(r),"planeGeometryTriangulation",function(){var d=r.layer.getLayerConfig(),S=d.center,U=S===void 0?[120,30]:S;return{size:4,indices:[0,1,2,2,3,0],vertices:[].concat((0,We.Z)(U),[1,1],(0,We.Z)(U),[0,1],(0,We.Z)(U),[0,0],(0,We.Z)(U),[1,0])}}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.width,d=u===void 0?1:u,S=t.height,U=S===void 0?1:S,ce=t.raisingHeight,ve=ce===void 0?0:ce,Je=1;return(this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(Je=-1),this.radian=Je*Math.PI*(this.mapService.getRotation()%360)/180,{u_raisingHeight:Number(ve),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_opacity:o||1,u_texture:this.texture,u_size:[d,U]}}},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.drawCanvas,Je=this.rendererService.createTexture2D,this.texture=Je({height:0,width:0}),ve&&this.updateTexture(ve),tr.next=6,this.layer.buildLayerModel({moduleName:"geometryBillboard",vertexShader:oh,fragmentShader:pf,triangulation:this.planeGeometryTriangulation,primitive:Ee.gl.TRIANGLES,depth:{enable:!0},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 6:return Ye=tr.sent,tr.abrupt("return",[Ye]);case 8:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"updateTexture",value:function(t){var o=this.rendererService.createTexture2D,u=this.layer.getLayerConfig(),d=u.canvasWidth,S=d===void 0?1:d,U=u.canvasHeight,ce=U===void 0?1:U,ve=document.createElement("canvas");ve.width=S,ve.height=ce;var Je=ve.getContext("2d");Je&&(t(ve),this.texture=o({data:ve,width:ve.width,height:ve.height,wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE}),this.layerService.reRender())}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ee.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S){var U=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],ce=S%4*3;return[U[ce],U[ce+1],U[ce+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[2],d[3]]}}})}}]),n}(nu);function nc(a){var s=ic();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var wh=`
uniform sampler2D u_texture;
uniform float u_mapFlag;
uniform float u_opacity;

varying vec3 v_Color;
varying vec2 v_uv;
varying float v_clip;

#pragma include "picking"
void main() {
  // gl_FragColor = vec4(v_Color, u_opacity);
  if(u_mapFlag > 0.0) {
    gl_FragColor = texture2D(u_texture, vec2(v_uv.x, 1.0 - v_uv.y));
    gl_FragColor.a *= u_opacity;
  } else {
    // gl_FragColor = vec4(v_uv, 0.0, u_opacity);
    gl_FragColor = vec4(v_Color, u_opacity);
  }
  gl_FragColor.a *= v_clip;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Fh=`precision highp float;
uniform mat4 u_ModelMatrix;

uniform mat4 u_Mvp;
uniform float u_opacity;
uniform float u_terrainClipHeight;

attribute vec3 a_Position;
attribute vec2 a_Uv;
attribute vec3 a_Color;

varying vec3 v_Color;
varying vec2 v_uv;
varying float v_clip;

#pragma include "projection"
#pragma include "picking"
void main() {
   v_Color = a_Color;
   v_uv = a_Uv;
  
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   v_clip = 1.0;
   if(a_Position.z < u_terrainClipHeight) {
      v_clip = 0.0;
   }
  
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));

   // float x = 1.0;
   // float y = 0.0;
   // float z = 0.0;
   // mat3 translateMatrix = mat3(
   //    1.0, 0.0, 0.0 
   //    0.0, 1.0, 0.0
   //    -project_pos.x,    -project_pos.y,  1.0
   // );
   //  mat4 translateMatrix = mat4(
   //    1.0, 0.0, 0.0, 0.0 ,
   //    0.0, 1.0, 0.0, 0.0,
   //    0.0, 0.0, 1.0, 0.0,
   //    1.0, 0.0, 0.0, 1.0
   // );

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, a_Position.z, 1.0));
   }

   setPickingColor(a_PickingColor);
}
`,Du=function(a){(0,Zr.Z)(n,a);var s=nc(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"terrainImageLoaded",!1),(0,X.Z)((0,lr.Z)(r),"planeGeometryTriangulation",function(){var d,S=r.layer.getLayerConfig(),U=S.width,ce=U===void 0?1:U,ve=S.height,Je=ve===void 0?1:ve,Ye=S.widthSegments,Kt=Ye===void 0?1:Ye,tr=S.heightSegments,Fr=tr===void 0?1:tr,Kr=S.center,hn=Kr===void 0?[120,30]:Kr,sn=S.terrainTexture,Yn=(d=r).initPlane.apply(d,[ce,Je,Kt,Fr].concat((0,We.Z)(hn))),hi=Yn.indices,Zi=Yn.positions;return sn&&r.loadTerrainTexture(Zi,hi),{vertices:Zi,indices:hi,size:5}}),r}return(0,Or.Z)(n,[{key:"initPlane",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:120,U=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,ce=t/2,ve=o/2,Je=Math.floor(u),Ye=Math.floor(d),Kt=Je+1,tr=Ye+1,Fr=t/Je,Kr=o/Ye,hn=[],sn=[],Yn=0;Yn<tr;Yn++)for(var hi=Yn*Kr-ve,Zi=0;Zi<Kt;Zi++){var zi=Zi*Fr-ce;if(this.mapService.version===fl.G["GAODE2.x"]){var pa=this.mapService.lngLatToCoord([zi+S,-hi+U]),_o=(0,oi.Z)(pa,2),Co=_o[0],Ba=_o[1];sn.push(Co,Ba,0)}else sn.push(zi+S,-hi+U,0);sn.push(Zi/Je),sn.push(1-Yn/Ye)}for(var ms=0;ms<Ye;ms++)for(var au=0;au<Je;au++){var Al=au+Kt*ms,nd=au+Kt*(ms+1),Ih=au+1+Kt*(ms+1),Rh=au+1+Kt*ms;hn.push(Al,nd,Rh),hn.push(nd,Ih,Rh)}return{indices:hn,positions:sn}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.mapTexture,d=t.terrainClipHeight,S=d===void 0?0:d,U=t.terrainTexture;if(this.mapTexture!==u){var ce;this.mapTexture=u,(ce=this.texture)===null||ce===void 0||ce.destroy(),this.updateTexture(u)}return{u_opacity:o||1,u_mapFlag:u?1:0,u_terrainClipHeight:U?S:-1,u_texture:this.texture}}},{key:"clearModels",value:function(){var t;this.terrainImage=null,(t=this.texture)===null||t===void 0||t.destroy()}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.mapTexture,this.mapTexture=ve,Je=this.rendererService.createTexture2D,this.texture=Je({height:0,width:0}),this.updateTexture(ve),tr.next=7,this.layer.buildLayerModel({moduleName:"geometryPlane",vertexShader:Fh,fragmentShader:wh,triangulation:this.planeGeometryTriangulation,primitive:Ee.gl.TRIANGLES,depth:{enable:!0},stencil:(0,Ge.Vi)(S,ce),blend:this.getBlend(),cull:{enable:!0,face:Ee.gl.BACK}});case 7:return Ye=tr.sent,tr.abrupt("return",[Ye]);case 9:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"createModelData",value:function(t){if(t){var o=this.layer.getLayerConfig(),u=o.widthSegments,d=o.heightSegments,S=o.width,U=o.height,ce=t,ve=ce.widthSegments,Je=ce.heightSegments,Ye=ce.width,Kt=ce.height;this.layer.style({widthSegments:ve!==void 0?ve:u,heightSegments:Je!==void 0?Je:d,width:Ye!==void 0?Ye:S,height:Kt!==void 0?Kt:U})}var tr=this.layer.getEncodedData(),Fr=this.styleAttributeService.createAttributesAndIndices(tr,this.planeGeometryTriangulation);return Fr}},{key:"updateTexture",value:function(t){var o=this,u=this.rendererService.createTexture2D;if(t){var d=new Image;d.crossOrigin="anonymous",d.onload=function(){o.texture=u({data:d,width:d.width,height:d.height,wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE}),o.layerService.reRender()},d.src=t}else this.texture=u({width:0,height:0})}},{key:"getImageData",value:function(t){var o=document.createElement("canvas"),u=o.getContext("2d"),d=t.width,S=t.height;o.width=d,o.height=S,u.drawImage(t,0,0,d,S);var U=u.getImageData(0,0,d,S);return U}},{key:"translateVertex",value:function(t,o,u,d,S,U){for(var ce=u.width,ve=u.height,Je=this.getImageData(u).data,Ye=Math.floor(d),Kt=Math.floor(S),tr=Ye+1,Fr=Kt+1,Kr=ce/Ye,hn=ve/Kt,sn=0;sn<Fr;sn++)for(var Yn=Math.floor(sn*hn),hi=Yn*ce,Zi=0;Zi<tr;Zi++){var zi=Math.floor(Zi*Kr),pa=(hi+zi)*4,_o=Je[pa],Co=Je[pa+1],Ba=Je[pa+2],ms=(sn*tr+Zi)*5+2;t[ms]=U(_o,Co,Ba)}var au=this.layer.getEncodedData(),Al=this.styleAttributeService.createAttributesAndIndices(au,function(){return{vertices:t,indices:o,size:5}});this.layer.updateModelData(Al),this.layerService.throttleRenderLayers()}},{key:"loadTerrainTexture",value:function(t,o){var u=this,d=this.layer.getLayerConfig(),S=d.widthSegments,U=S===void 0?1:S,ce=d.heightSegments,ve=ce===void 0?1:ce,Je=d.terrainTexture,Ye=d.rgb2height,Kt=Ye===void 0?function(Fr,Kr,hn){return Fr+Kr+hn}:Ye;if(this.terrainImage)this.terrainImageLoaded?this.translateVertex(t,o,this.terrainImage,U,ve,Kt):this.terrainImage.onload=function(){u.translateVertex(t,o,u.terrainImage,U,ve,Kt)};else{var tr=new Image;this.terrainImage=tr,tr.crossOrigin="anonymous",tr.onload=function(){u.terrainImageLoaded=!0,setTimeout(function(){return u.layer.emit("terrainImageLoaded",null)}),u.translateVertex(t,o,tr,U,ve,Kt)},tr.src=Je}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function yu(a){var s=qc();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function qc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var sh=`
uniform sampler2D u_texture;
uniform float u_mapFlag;
uniform float u_opacity;

varying vec3 v_Color;
varying float v_d;

void main() {

  if(v_d < 0.0) {
    discard;
  }

  if(u_mapFlag > 0.0) {
    gl_FragColor = texture2D(u_texture, gl_PointCoord);
    gl_FragColor.a *= u_opacity;
  } else {
    gl_FragColor = vec4(v_Color, u_opacity);
  }
}
`,vh=`precision highp float;

attribute vec3 a_Position;
attribute vec3 a_Color;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_opacity;
uniform float u_Scale;
varying vec3 v_Color;
varying float v_d;

#pragma include "projection"
void main() {
   v_Color = a_Color;
  
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   v_d = a_Position.z;

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, a_Position.z, 1.0));
   }

   gl_PointSize = pow((u_Zoom - 1.0), 2.0) * u_Scale;
}
`,Nf;(function(a){a.UP="up",a.DOWN="down"})(Nf||(Nf={}));var mh=function(a){(0,Zr.Z)(n,a);var s=yu(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"planeGeometryUpdateTriangulation",function(){for(var d=r.layer.getLayerConfig(),S=d.spriteBottom,U=S===void 0?-1e5:S,ce=r.spriteUpdate,ve=U,Je=r.spriteTop,Ye=0;Ye<r.positions.length;Ye+=5)r.spriteAnimate===Nf.UP?(r.positions[Ye+2]+=ce,r.positions[Ye+2]>Je&&(r.positions[Ye+2]=ve)):(r.positions[Ye+2]-=ce,r.positions[Ye+2]<ve&&(r.positions[Ye+2]=Je));return{vertices:r.positions,indices:r.indices,size:5}}),(0,X.Z)((0,lr.Z)(r),"updateModel",function(){var d=r.layer.createAttributes({triangulation:r.planeGeometryUpdateTriangulation});r.layer.models.map(function(S){S.updateAttributes(d)}),r.layerService.throttleRenderLayers(),r.timer=requestAnimationFrame(r.updateModel)}),(0,X.Z)((0,lr.Z)(r),"planeGeometryTriangulation",function(){var d,S=r.layer.getLayerConfig(),U=S.center,ce=U===void 0?[120,30]:U,ve=S.spriteCount,Je=ve===void 0?100:ve,Ye=S.spriteRadius,Kt=Ye===void 0?10:Ye,tr=(d=r).initSprite.apply(d,[Kt,Je].concat((0,We.Z)(ce))),Fr=tr.indices,Kr=tr.positions;return r.positions=Kr,r.indices=Fr,{vertices:Kr,indices:Fr,size:5}}),r}return(0,Or.Z)(n,[{key:"initSprite",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:120,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:30,S=[],U=[],ce=this.mapService,ve=this.spriteAnimate===Nf.UP?-this.spriteTop:this.spriteTop,Je=0;Je<o;Je++){var Ye=Math.random()*ve;U.push.apply(U,(0,We.Z)(tr(Ye)))}for(var Kt=0;Kt<o;Kt++)S.push(Kt);function tr(Fr){var Kr=t*Math.random(),hn=t*Math.random(),sn=-t/2+Kr,Yn=-t/2+hn;if(ce.version===fl.G["GAODE2.x"]){var hi=ce.lngLatToCoord([sn+u,-Yn+d]),Zi=(0,oi.Z)(hi,2),zi=Zi[0],pa=Zi[1];return[zi,pa,Fr,0,0]}else return[sn+u,-Yn+d,Fr,0,0]}return{indices:S,positions:U}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.mapTexture,d=t.spriteScale,S=d===void 0?1:d;if(this.mapTexture!==u){var U;this.mapTexture=u,(U=this.texture)===null||U===void 0||U.destroy(),this.updateTexture(u)}return{u_opacity:o||1,u_mapFlag:u?1:0,u_texture:this.texture,u_Scale:S}}},{key:"clearModels",value:function(){var t;cancelAnimationFrame(this.timer),(t=this.texture)===null||t===void 0||t.destroy()}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr;return we().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return d=this.layer.getLayerConfig(),S=d.mapTexture,U=d.spriteTop,ce=U===void 0?5e6:U,ve=d.spriteUpdate,Je=ve===void 0?1e4:ve,Ye=d.spriteAnimate,Kt=Ye===void 0?Nf.DOWN:Ye,this.mapTexture=S,this.spriteTop=ce,this.spriteUpdate=Je,Kt==="up"?this.spriteAnimate=Nf.UP:this.spriteAnimate=Nf.DOWN,tr=this.rendererService.createTexture2D,this.texture=tr({height:0,width:0}),this.updateTexture(S),setTimeout(function(){u.updateModel()},100),hn.next=11,this.layer.buildLayerModel({moduleName:"geometrySprite",vertexShader:vh,fragmentShader:sh,triangulation:this.planeGeometryTriangulation,primitive:Ee.gl.POINTS,depth:{enable:!1},blend:this.getBlend()});case 11:return Fr=hn.sent,hn.abrupt("return",[Fr]);case 13:case"end":return hn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"updateTexture",value:function(t){var o=this,u=this.rendererService.createTexture2D;if(t){var d=new Image;d.crossOrigin="anonymous",d.onload=function(){o.texture=u({data:d,width:d.width,height:d.height,wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE}),o.layerService.reRender()},d.src=t}else this.texture=u({width:0,height:0})}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(nu),If={plane:Du,sprite:mh,billboard:Jc},Rf=If;function vf(a){var s=oe();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function oe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Br=function(a){(0,Zr.Z)(n,a);var s=vf(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","GeometryLayer"),(0,X.Z)((0,lr.Z)(r),"defaultSourceConfig",{data:[{x:0,y:0}],options:{parser:{type:"json",x:"x",y:"y"}}}),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new Rf[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={plane:{},sprite:{},billboard:{}};return o[t]}},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(t=o.scale)===null||t===void 0?void 0:t.field;return u==="plane"?"plane":u==="sprite"?"sprite":u==="billboard"?"billboard":"plane"}}]),n}(eu);function xt(a){var s=mt();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function mt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ht=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
uniform mat4 u_Mvp;\r
varying vec4 v_color;\r
\r
uniform vec2 u_SceneCenterMKT;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  // gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807\r
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r
    gl_Position = u_Mvp * (project_pos);\r
  } else {\r
     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
    gl_Position = project_common_position_to_clipspace(project_pos);\r
  }\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,or=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,en=function(a){(0,Zr.Z)(n,a);var s=xt(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.coverage,d=t.angle;return{u_opacity:o||1,u_coverage:u||.9,u_angle:d||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:Ht,fragmentShader:or,triangulation:cs,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ee.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=o.version==="GAODE2.x"?o.originCoordinates:o.coordinates;return[u[0],u[1],0]}}})}}]),n}(nu);function _n(a){var s=Tn();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Tn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zn=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"


void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));


  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
 
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ECF\u7EAC\u5EA6
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807
    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));

    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);
  } else {
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
    
    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
    
    gl_Position = project_common_position_to_clipspace(project_pos);
  }



  setPickingColor(a_PickingColor);
}
`,wi=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Xi=function(a){(0,Zr.Z)(n,a);var s=_n(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.coverage,d=t.angle;return{u_opacity:o||1,u_coverage:u||1,u_angle:d||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:zn,fragmentShader:wi,triangulation:Ti,primitive:Ee.gl.TRIANGLES,depth:{enable:!0},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size;return Array.isArray(u)?[u[0]]:[u]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ee.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=o.version==="GAODE2.x"?o.originCoordinates:o.coordinates;return[u[0],u[1],0]}}})}}]),n}(nu),ba=m(86700),mo=m(28660);function Ja(a,s){for(var n=[],r=[],t=[],o=a+1,u=s+1,d=a/2,S=s/2,U=0;U<u;U++)for(var ce=U-S,ve=0;ve<o;ve++){var Je=ve-d;r.push(Je/d,-ce/S,0),t.push(ve/a),t.push(1-U/s)}for(var Ye=0;Ye<s;Ye++)for(var Kt=0;Kt<a;Kt++){var tr=Kt+o*Ye,Fr=Kt+o*(Ye+1),Kr=Kt+1+o*(Ye+1),hn=Kt+1+o*Ye;n.push(tr,Fr,hn),n.push(Fr,Kr,hn)}return{vertices:r,indices:n,uvs:t}}var Ds,Ts;function lu(a){var s=Iu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _u=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,Mc=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;


vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9
	vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);
 
}
`,tu=`uniform sampler2D u_texture;        // \u70ED\u529B\u5F3A\u5EA6\u56FE
uniform sampler2D u_colorTexture;   // \u6839\u636E\u5F3A\u5EA6\u5206\u5E03\u7684\u8272\u5E26
uniform float u_opacity;
varying vec2 v_texCoord;

uniform vec2 u_ViewportSize;

float getBlurIndusty() {
    float vW = 2.0/u_ViewportSize.x;
    float vH = 2.0/u_ViewportSize.y;
    vec2 vUv = v_texCoord;
    float i11 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y + 1.0 * vH) ).r;
    float i12 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y + 1.0 * vH) ).r;
    float i13 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y + 1.0 * vH) ).r;

    float i21 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y) ).r;
    float i22 = texture2D( u_texture, vec2( vUv.x , vUv.y) ).r;
    float i23 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y) ).r;

    float i31 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y-1.0*vH) ).r;
    float i32 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y-1.0*vH) ).r;
    float i33 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y-1.0*vH) ).r;

    return(
        i11 + 
        i12 + 
        i13 + 
        i21 + 
        i21 + 
        i22 + 
        i23 + 
        i31 + 
        i32 + 
        i33
        )/9.0;
}


void main(){
    // float intensity = texture2D(u_texture, v_texCoord).r;
    float intensity = getBlurIndusty();
    vec4 color = texture2D(u_colorTexture, vec2(intensity, 0.0));

    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,Fl=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;

void main() {
  v_texCoord = a_Uv;

  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,Ys=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,ku=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
    } else {
        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
    }
}
`,Bu=(Ds=(0,ba.b2)(),Ds(Ts=function(a){(0,Zr.Z)(n,a);var s=lu(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"render",value:function(){var t=this,o=this.rendererService,u=o.clear,d=o.useFramebuffer;d(this.heatmapFramerBuffer,function(){u({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.heatmapFramerBuffer}),t.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr;return we().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:return d=this.rendererService,S=d.createFramebuffer,U=d.getViewportSize,ce=d.createTexture2D,ve=this.styleAttributeService.getLayerStyleAttribute("shape"),Je=(ve==null||(u=ve.scale)===null||u===void 0?void 0:u.field)||"heatmap",this.shapeType=Je,Kr.next=6,this.buildHeatMapIntensity();case 6:return this.intensityModel=Kr.sent,this.colorModel=Je==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap(),Ye=U(),Kt=Ye.width,tr=Ye.height,this.heatmapFramerBuffer=S({color:ce({width:Math.floor(Kt/4),height:Math.floor(tr/4),wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE,min:Ee.gl.LINEAR,mag:Ee.gl.LINEAR}),depth:!1}),this.updateColorTexture(),Kr.abrupt("return",[this.intensityModel,this.colorModel]);case 12:case"end":return Kr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:Ee.GC.Attribute,descriptor:{name:"a_Dir",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return[d]}}})}},{key:"buildHeatMapIntensity",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.triangulation=ws,S.next=3,this.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:ku,fragmentShader:Ys,triangulation:ws,depth:{enable:!1},cull:{enable:!0,face:(0,Ge.fj)(this.mapService.version)},blend:{enable:!0,func:{srcRGB:Ee.gl.ONE,srcAlpha:1,dstRGB:Ee.gl.ONE,dstAlpha:1}}});case 3:return u=S.sent,S.abrupt("return",u);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildHeatmapColor",value:function(){var t=this.layer.getLayerConfig(),o=t.mask,u=o===void 0?!1:o,d=t.maskInside,S=d===void 0?!0:d;this.shaderModuleService.registerModule("heatmapColor",{vs:Fl,fs:tu});var U=this.shaderModuleService.getModule("heatmapColor"),ce=U.vs,ve=U.fs,Je=U.uniforms,Ye=this.rendererService,Kt=Ye.createAttribute,tr=Ye.createElements,Fr=Ye.createBuffer,Kr=Ye.createModel;return Kr({vs:ce,fs:ve,attributes:{a_Position:Kt({buffer:Fr({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:Ee.gl.FLOAT}),size:3}),a_Uv:Kt({buffer:Fr({data:[0,1,1,1,0,0,1,0],type:Ee.gl.FLOAT}),size:2})},uniforms:(0,Ne.Z)({},Je),depth:{enable:!1},blend:this.getBlend(),elements:tr({data:[0,2,1,2,3,1],type:Ee.gl.UNSIGNED_INT,count:6}),stencil:(0,Ge.Vi)(u,S)})}},{key:"drawIntensityMode",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity,d=o.intensity,S=d===void 0?10:d,U=o.radius,ce=U===void 0?5:U;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),(t=this.intensityModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_radius:ce,u_intensity:S}}),this.layer.hooks.afterRender.call()}},{key:"drawColorMode",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity;(t=this.colorModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity,d=Vo.create();Vo.invert(d,this.cameraService.getViewProjectionMatrixUncentered()),(t=this.colorModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:(0,We.Z)(d)}})}},{key:"build3dHeatMap",value:function(){var t=this.layer.getLayerConfig(),o=t.mask,u=o===void 0?!1:o,d=t.maskInside,S=d===void 0?!0:d,U=this.rendererService.getViewportSize,ce=U(),ve=ce.width,Je=ce.height,Ye=Ja(ve/4,Je/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:Mc,fs:_u});var Kt=this.shaderModuleService.getModule("heatmap3dColor"),tr=Kt.vs,Fr=Kt.fs,Kr=Kt.uniforms,hn=this.rendererService,sn=hn.createAttribute,Yn=hn.createElements,hi=hn.createBuffer,Zi=hn.createModel;return Zi({vs:tr,fs:Fr,attributes:{a_Position:sn({buffer:hi({data:Ye.vertices,type:Ee.gl.FLOAT}),size:3}),a_Uv:sn({buffer:hi({data:Ye.uvs,type:Ee.gl.FLOAT}),size:2})},primitive:Ee.gl.TRIANGLES,uniforms:(0,Ne.Z)({},Kr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:Ee.gl.SRC_ALPHA,srcAlpha:1,dstRGB:Ee.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Yn({data:Ye.indices,type:Ee.gl.UNSIGNED_INT,count:Ye.indices.length}),stencil:(0,Ge.Vi)(u,S)})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var t=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var o=this.layer.getLayerConfig(),u=o.rampColors,d=(0,Ge.Cl)(u);this.colorTexture=t({data:new Uint8Array(d.data),width:d.width,height:d.height,wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE,min:Ee.gl.NEAREST,mag:Ee.gl.NEAREST,flipY:!1})}}]),n}(nu))||Ts);function Gl(a){var s=ru();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ru(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var pl=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,ef=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
 
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));
    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));
    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Bh=function(a){(0,Zr.Z)(n,a);var s=Gl(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.coverage,d=t.angle;return{u_opacity:o||1,u_coverage:u||.9,u_angle:d||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:ef,fragmentShader:pl,triangulation:cs,depth:{enable:!1},primitive:Ee.gl.TRIANGLES,blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ee.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=o.version==="GAODE2.x"?o.originCoordinates:o.coordinates;return[u[0],u[1],0]}}})}}]),n}(nu),hc={heatmap:Bu,heatmap3d:Bu,grid:en,grid3d:Xi,hexagon:Bh},uh=hc;function Kf(a){var s=gh();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function gh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var yh=function(a){(0,Zr.Z)(n,a);var s=Kf(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","HeatMapLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new uh[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"renderModels",value:function(){var t=this,o=this.getModelType();return o==="heatmap"?(this.layerModel&&this.layerModel.render(),this):this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(u){return u.draw({uniforms:t.layerModel.getUninforms()})}),this.hooks.afterRender.call(),this)}},{key:"updateModelData",value:function(t){t.attributes&&t.elements?this.models[0].updateAttributesAndElements(t.attributes,t.elements):console.warn("data error")}},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=this.getLayerConfig(),d=u.shape3d,S=this.getSource(),U=S.data.type,ce=(o==null||(t=o.scale)===null||t===void 0?void 0:t.field)||"heatmap";return ce==="heatmap"||ce==="heatmap3d"?"heatmap":U==="hexagon"?(d==null?void 0:d.indexOf(ce))===-1?"hexagon":"grid3d":U==="grid"?(d==null?void 0:d.indexOf(ce))===-1?"grid":"grid3d":"heatmap"}}]),n}(eu);function Yf(a){var s=dc();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function dc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ne=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,Me=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Oe=function(a){(0,Zr.Z)(n,a);var s=Yf(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity;return{u_opacity:o||1,u_texture:this.texture}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr;return we().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:if(d=this.layer.getLayerConfig(),S=d.mask,U=S===void 0?!1:S,ce=d.maskInside,ve=ce===void 0?!0:ce,Je=this.layer.getSource(),Ye=this.rendererService.createTexture2D,this.texture=Ye({height:0,width:0}),!Ge.eW){sn.next=12;break}Kt=this.layerService.sceneService.getSceneConfig().canvas,tr=Kt.createImage(),tr.crossOrigin="anonymous",tr.src=Je.data.originData,tr.onload=function(){u.texture=Ye({data:tr,width:tr.width,height:tr.height}),u.layerService.reRender()},sn.next=16;break;case 12:return sn.next=14,Je.data.images;case 14:Fr=sn.sent,this.texture=Ye({data:Fr[0],width:Fr[0].width,height:Fr[0].height,mag:Ee.gl.LINEAR,min:Ee.gl.LINEAR});case 16:return sn.next=18,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Me,fragmentShader:ne,triangulation:Jo,primitive:Ee.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},stencil:(0,Ge.Vi)(U,ve)});case 18:return Kr=sn.sent,sn.abrupt("return",[Kr]);case 20:case"end":return sn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu),Ke={image:Oe},pt=Ke;function Pt(a){var s=Xr();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Xr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var An=function(a){(0,Zr.Z)(n,a);var s=Pt(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","ImageLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new pt[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={image:{}};return o[t]}},{key:"getModelType",value:function(){return"image"}}]),n}(eu);function mi(a){var s=un();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function un(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bi=`
uniform float u_opacity;

varying vec4 v_dash_array;
varying vec4 v_color;

uniform float segmentNumber;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;

  float flag = 0.;
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    flag = 1.;
  };
  gl_FragColor.a *=flag;
  
  gl_FragColor = filterColor(gl_FragColor);
}`,ga=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;


uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);

  vec2 s = source;
  vec2 t = target;
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;

  styleMappingMat[3].b = segmentIndex / segmentNumber;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  gl_PointSize = 5.0;
  setPickingColor(a_PickingColor);
}
`,ss=`
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  
  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = styleMappingMat[3].g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = styleMappingMat[3].a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
}`,To=`#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  float arcThetaOffset = styleMappingMat[0][1];
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, arcThetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, arcThetaOffset), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
     styleMappingMat[3].g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Ro=`#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}`,fs=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,ps={solid:0,dash:1},zo=function(a){(0,Zr.Z)(n,a);var s=mi(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.textureBlend,ce=U===void 0?"normal":U,ve=t.lineType,Je=ve===void 0?"solid":ve,Ye=t.dashArray,Kt=Ye===void 0?[10,5]:Ye,tr=t.forward,Fr=tr===void 0?!0:tr,Kr=t.lineTexture,hn=Kr===void 0?!1:Kr,sn=t.iconStep,Yn=sn===void 0?100:sn,hi=t.segmentNumber,Zi=hi===void 0?30:hi,zi=t.thetaOffset,pa=zi===void 0?.314:zi;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,thetaOffset:pa})){this.judgeStyleAttributes({opacity:u,thetaOffset:pa});var _o=this.layer.getEncodedData(),Co=this.calDataFrame(this.cellLength,_o,this.cellProperties),Ba=Co.data,ms=Co.width,au=Co.height;this.rowCount=au,this.dataTexture=this.cellLength>0&&Ba.length>0?this.createTexture2D({flipY:!0,data:Ba,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:ms,height:au}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}Kt.length===2&&Kt.push(0,0);var Al=0,nd=[0,0,0,0],Ih=[0,0,0,0];return d&&S&&(nd=(0,Ge.CI)(d),Ih=(0,Ge.CI)(S),Al=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:(0,at.isNumber)(pa)?pa:0,u_opacity:(0,at.isNumber)(u)?u:1,u_textureBlend:ce==="normal"?0:1,segmentNumber:Zi,u_line_type:ps[Je||"solid"],u_dash_array:Kt,u_blur:.9,u_lineDir:Fr?1:-1,u_texture:this.texture,u_line_texture:hn?1:0,u_icon_step:Yn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Al,u_sourceColor:nd,u_targetColor:Ih}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor,d=t.lineType;return d==="dash"?{frag:bi,vert:ga,type:"Dash"}:o&&u?{frag:Ro,vert:fs,type:"Linear"}:{frag:ss,vert:To,type:""}}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr;return we().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return u=this.layer.getLayerConfig(),d=u.segmentNumber,S=d===void 0?30:d,U=u.mask,ce=U===void 0?!1:U,ve=u.maskInside,Je=ve===void 0?!0:ve,Ye=this.getShaders(),Kt=Ye.frag,tr=Ye.vert,Fr=Ye.type,sn.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+Fr,vertexShader:tr,fragmentShader:Kt,triangulation:$s,depth:{enable:!1},blend:this.getBlend(),segmentNumber:S,stencil:(0,Ge.Vi)(ce,Je)});case 4:return Kr=sn.sent,sn.abrupt("return",[Kr]);case 6:case"end":return sn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ee.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,U=d[S]||{x:0,y:0},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu);function ks(a){var s=xu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function xu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,tf=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,$c=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,ac=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,ll={solid:0,dash:1},Cu=function(a){(0,Zr.Z)(n,a);var s=ks(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.textureBlend,ce=U===void 0?"normal":U,ve=t.lineType,Je=ve===void 0?"solid":ve,Ye=t.dashArray,Kt=Ye===void 0?[10,5]:Ye,tr=t.lineTexture,Fr=tr===void 0?!1:tr,Kr=t.iconStep,hn=Kr===void 0?100:Kr,sn=t.segmentNumber,Yn=sn===void 0?30:sn,hi=t.globalArcHeight,Zi=hi===void 0?10:hi;Kt.length===2&&Kt.push(0,0);var zi=0,pa=[0,0,0,0],_o=[0,0,0,0];if(d&&S&&(pa=(0,Ge.CI)(d),_o=(0,Ge.CI)(S),zi=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Co=this.layer.getEncodedData(),Ba=this.calDataFrame(this.cellLength,Co,this.cellProperties),ms=Ba.data,au=Ba.width,Al=Ba.height;this.rowCount=Al,this.dataTexture=this.cellLength>0&&ms.length>0?this.createTexture2D({flipY:!0,data:ms,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:au,height:Al}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:du,u_global_height:Zi,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_textureBlend:ce==="normal"?0:1,segmentNumber:Yn,u_line_type:ll[Je]||0,u_dash_array:Kt,u_texture:this.texture,u_line_texture:Fr?1:0,u_icon_step:hn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:zi,u_sourceColor:pa,u_targetColor:_o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor;return o&&u?{frag:$c,vert:ac,type:"Linear"}:{frag:cu,vert:tf,type:""}}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr;return we().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return u=this.layer.getLayerConfig(),d=u.segmentNumber,S=d===void 0?30:d,U=u.mask,ce=U===void 0?!1:U,ve=u.maskInside,Je=ve===void 0?!0:ve,Ye=this.getShaders(),Kt=Ye.frag,tr=Ye.vert,Fr=Ye.type,sn.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+Fr,vertexShader:tr,fragmentShader:Kt,triangulation:$s,blend:this.getBlend(),segmentNumber:S,stencil:(0,Ge.Vi)(ce,Je)});case 4:return Kr=sn.sent,sn.abrupt("return",[Kr]);case 6:case"end":return sn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ee.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,U=d[S]||{x:0,y:0},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu);function Sl(a){var s=Wl();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Pc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,jc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,hu=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,_h=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,Oc={solid:0,dash:1},ud=function(a){(0,Zr.Z)(n,a);var s=Sl(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.textureBlend,ce=U===void 0?"normal":U,ve=t.lineType,Je=ve===void 0?"solid":ve,Ye=t.dashArray,Kt=Ye===void 0?[10,5]:Ye,tr=t.lineTexture,Fr=tr===void 0?!1:tr,Kr=t.iconStep,hn=Kr===void 0?100:Kr,sn=t.segmentNumber,Yn=sn===void 0?30:sn,hi=t.globalArcHeight,Zi=hi===void 0?10:hi;Kt.length===2&&Kt.push(0,0);var zi=0,pa=[0,0,0,0],_o=[0,0,0,0];if(d&&S&&(pa=(0,Ge.CI)(d),_o=(0,Ge.CI)(S),zi=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Co=this.layer.getEncodedData(),Ba=this.calDataFrame(this.cellLength,Co,this.cellProperties),ms=Ba.data,au=Ba.width,Al=Ba.height;this.rowCount=Al,this.dataTexture=this.cellLength>0&&ms.length>0?this.createTexture2D({flipY:!0,data:ms,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:au,height:Al}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_globel:1,u_globel_radius:du,u_global_height:Zi,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_textureBlend:ce==="normal"?0:1,segmentNumber:Yn,u_line_type:Oc[Je]||0,u_dash_array:Kt,u_texture:this.texture,u_line_texture:Fr?1:0,u_icon_step:hn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:zi,u_sourceColor:pa,u_targetColor:_o}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor;return o&&u?{frag:hu,vert:_h,type:"Linear"}:{frag:Pc,vert:jc,type:""}}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr;return we().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return u=this.layer.getLayerConfig(),d=u.segmentNumber,S=d===void 0?30:d,U=u.mask,ce=U===void 0?!1:U,ve=u.maskInside,Je=ve===void 0?!0:ve,Ye=this.getShaders(),Kt=Ye.frag,tr=Ye.vert,Fr=Ye.type,sn.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+Fr,vertexShader:tr,fragmentShader:Kt,triangulation:$s,depth:{enable:!0},blend:this.getBlend(),segmentNumber:S,stencil:(0,Ge.Vi)(ce,Je)});case 4:return Kr=sn.sent,sn.abrupt("return",[Kr]);case 6:case"end":return sn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ee.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,U=d[S]||{x:0,y:0},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu);function Hd(a){var s=Zu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Sd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0;
  float d_segmentIndex = styleMappingMat[3].g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = gl_FragColor.a/opacity;
    }

    float v = styleMappingMat[3].a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,Hc=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  styleMappingMat[3].g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}

`,Nh={solid:0,dash:1},up=function(a){(0,Zr.Z)(n,a);var s=Hd(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.textureBlend,ce=U===void 0?"normal":U,ve=t.lineType,Je=ve===void 0?"solid":ve,Ye=t.dashArray,Kt=Ye===void 0?[10,5]:Ye,tr=t.lineTexture,Fr=tr===void 0?!1:tr,Kr=t.iconStep,hn=Kr===void 0?100:Kr,sn=t.segmentNumber,Yn=sn===void 0?30:sn;Kt.length===2&&Kt.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var hi=0,Zi=[0,0,0,0],zi=[0,0,0,0];if(d&&S&&(Zi=(0,Ge.CI)(d),zi=(0,Ge.CI)(S),hi=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var pa=this.layer.getEncodedData(),_o=this.calDataFrame(this.cellLength,pa,this.cellProperties),Co=_o.data,Ba=_o.width,ms=_o.height;this.rowCount=ms,this.dataTexture=this.cellLength>0&&Co.length>0?this.createTexture2D({flipY:!0,data:Co,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Ba,height:ms}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_textureBlend:ce==="normal"?0:1,segmentNumber:Yn,u_line_type:Nh[Je]||0,u_dash_array:Kt,u_texture:this.texture,u_line_texture:Fr?1:0,u_icon_step:hn,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:hi,u_sourceColor:Zi,u_targetColor:zi}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:Hc,fragmentShader:Sd,triangulation:$s,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Ee.GC.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:4,update:function(u,d,S){return[S[3],S[4],S[5],S[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,U=d[S]||{x:0,y:0},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu);function _d(a){var s=pp();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function pp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var vp=`#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
uniform float u_CoordinateSystem;
varying vec4 v_color;
uniform float u_arrow: 0.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

varying mat4 styleMappingMat;
void main() {
  float distanceAndIndex = styleMappingMat[0][3];
  float miter = styleMappingMat[0][2];

  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B


  if(u_arrow > 0.0 && distanceAndIndex < 2.0) { // arrow
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) { 
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z < 0.0) { // amap
        discard;
      }
    } else { // amap2 mapbox map
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z > 0.0) { 
        discard;
      }
    }
  } else { // line body
    if(miter < 0.0) {
      discard;
    }
  }


  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,mp=`attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute vec4 a_dirPoints;
attribute vec3 a_DistanceAndIndex;

uniform vec4 u_lineDir;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - a_Miter - a_DistanceAndIndex
    0.0, 0.0, 0.0, 0.0, // originX - originY - vectorX - vectorY
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );
  styleMappingMat[0][3] = a_DistanceAndIndex.y;
  styleMappingMat[0][2] = a_Miter;

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97


  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  // styleMappingMat[1].rg = a_Position.xy + offset;

  vec2 copyOffset = vec2(offset.x, offset.y);

  float lineDistance = a_DistanceAndIndex.x;
  float total_Distance = a_DistanceAndIndex.z;
  float currentLinePointRatio = lineDistance / total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z); // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }
  
  if(u_arrow > 0.0 && a_DistanceAndIndex.y < 2.0) {
    vec2 startPoint = a_dirPoints.rg;
    vec2 endPoint = a_dirPoints.ba;
    vec4 t1 = project_position(vec4(startPoint, 0, 1.0));
    vec4 t2 = project_position(vec4(endPoint, 0, 1.0));
    // TODO\uFF1A \u540E\u7EED\u4F18\u5316\u53EF\u4EE5\u628A\u4F4D\u7F6E\u8BA1\u7B97\u653E\u5728 cpu \u4E2D\u5B8C\u6210
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      vec2 p1 = (u_Mvp * vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = (u_Mvp * vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    } else {
      vec2 p1 = project_common_position_to_clipspace(vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = project_common_position_to_clipspace(vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    }
  }

  setPickingColor(a_PickingColor);
}
`,Cd=function(a){(0,Zr.Z)(n,a);var s=_d(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.arrow,ce=U===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:U,ve=0,Je=[0,0,0,0],Ye=[0,0,0,0];if(d&&S&&(Je=(0,Ge.CI)(d),Ye=(0,Ge.CI)(S),ve=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Kt=this.layer.getEncodedData(),tr=this.calDataFrame(this.cellLength,Kt,this.cellProperties),Fr=tr.data,Kr=tr.width,hn=tr.height;this.rowCount=hn,this.dataTexture=this.cellLength>0&&Fr.length>0?this.createTexture2D({flipY:!0,data:Fr,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Kr,height:hn}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_linearColor:ve,u_sourceColor:Je,u_targetColor:Ye,u_arrow:Number(ce.enable),u_arrowHeight:ce.arrowHeight||3,u_arrowWidth:ce.arrowWidth||2,u_tailWidth:ce.tailWidth===void 0?1:ce.tailWidth}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr;return we().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.depth,Je=ve===void 0?!1:ve,Ye=this.getShaders(),Kt=Ye.frag,tr=Ye.vert,this.layer.triangulation=na,hn.next=5,this.layer.buildLayerModel({moduleName:"lineHalf",vertexShader:tr,fragmentShader:Kt,triangulation:na,depth:{enable:Je},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 5:return Fr=hn.sent,hn.abrupt("return",[Fr]);case 7:case"end":return hn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){return{frag:vp,vert:mp,type:"normal"}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ee.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U,ce){return ce===void 0?[d[3],10,d[5]]:[d[3],ce,d[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"dirPoints",type:Ee.GC.Attribute,descriptor:{name:"a_dirPoints",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:4,update:function(o){var u=o.coordinates[0]||[0,0],d=o.coordinates[3]||[0,0];return[u[0],u[1],d[0],d[1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0],d[1]]:[d,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ee.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o,u,d){return[d[4]]}}})}}]),n}(nu);function ld(a){var s=gp();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function gp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ah=`#define LineTypeSolid 0.0
uniform float u_opacity : 1.0;

varying vec4 v_color;

// dash
varying vec4 v_dash_array;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
 
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    // \u5B9E\u7EBF\u90E8\u5206
  } else {
    // \u865A\u7EBF\u90E8\u5206
    discard;
  };

  gl_FragColor = filterColor(gl_FragColor);
}
`,Dd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];

uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = a_DistanceAndIndex.x / a_Total_Distance; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = a_DistanceAndIndex.x;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));
  } else {
    float lineHeight = a_Size.y;
 
    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,xd=`#define Animate 0.0
#define LineTexture 1.0
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;

uniform vec3 u_blur;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying vec2 v_iconMapUV;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = styleMappingMat[3].a;
  float borderWidth = min(0.5, u_borderWidth);
  // \u7ED8\u5236 border
  if(borderWidth > 0.01) {
    float borderOuterWidth = borderWidth/2.0;

    if(v >= 1.0 - borderWidth || v <= borderWidth) {
      if(v > borderWidth) {
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
      } else if(v <= borderWidth) {
        float linear = smoothstep(0.0, 1.0, v/borderWidth);
        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = styleMappingMat[3][3];
  if(blurV < 0.5) {
    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  gl_FragColor = filterColor(gl_FragColor);
}
`,wd=`
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,vl=`varying vec4 v_color;
uniform float u_linearDir: 1.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"


varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3][0]; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,kd={solid:0,dash:1},Fs=function(a){(0,Zr.Z)(n,a);var s=ld(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"textureEventFlag",!1),(0,X.Z)((0,lr.Z)(r),"texture",r.createTexture2D({data:[0,0,0,0],mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1,height:1})),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.textureBlend,ce=U===void 0?"normal":U,ve=t.lineType,Je=ve===void 0?"solid":ve,Ye=t.dashArray,Kt=Ye===void 0?[10,5,0,0]:Ye,tr=t.lineTexture,Fr=tr===void 0?!1:tr,Kr=t.iconStep,hn=Kr===void 0?100:Kr,sn=t.vertexHeightScale,Yn=sn===void 0?20:sn,hi=t.borderWidth,Zi=hi===void 0?0:hi,zi=t.borderColor,pa=zi===void 0?"#ccc":zi,_o=t.raisingHeight,Co=_o===void 0?0:_o,Ba=t.heightfixed,ms=Ba===void 0?!1:Ba,au=t.linearDir,Al=au===void 0?xl.VERTICAL:au,nd=t.blur,Ih=nd===void 0?[1,1,1]:nd,Rh=t.arrow,md=Rh===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:Rh;Kt.length===2&&Kt.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var hh=0,tp=[0,0,0,0],Fv=[0,0,0,0];if(d&&S&&(tp=(0,Ge.CI)(d),Fv=(0,Ge.CI)(S),hh=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Gp=this.layer.getEncodedData(),k0=this.calDataFrame(this.cellLength,Gp,this.cellProperties),kp=k0.data,Zh=k0.width,Ld=k0.height;this.rowCount=Ld,this.dataTexture=this.cellLength>0&&kp.length>0?this.createTexture2D({flipY:!0,data:kp,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Zh,height:Ld}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_textureBlend:ce===mu.NORMAL?0:1,u_line_type:kd[Je],u_dash_array:Kt,u_blur:Ih,u_texture:this.texture,u_line_texture:Fr?1:0,u_icon_step:hn,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:Zi,u_borderColor:(0,Ge.CI)(pa),u_linearDir:Al===xl.VERTICAL?1:0,u_linearColor:hh,u_sourceColor:tp,u_targetColor:Fv,u_heightfixed:Number(ms),u_vertexScale:Yn,u_raisingHeight:Number(Co),u_arrow:Number(md.enable),u_arrowHeight:md.arrowHeight||3,u_arrowWidth:md.arrowWidth||2,u_tailWidth:md.tailWidth===void 0?1:md.tailWidth}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn;return we().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.depth,Je=ve===void 0?!1:ve,Ye=u.workerEnabled,Kt=Ye===void 0?!1:Ye,tr=u.enablePicking,Fr=this.getShaders(),Kr=Fr.frag,hn=Fr.vert,sn=Fr.type,this.layer.triangulation=Ge.sN,Zi.next=5,this.layer.buildLayerModel({moduleName:"line"+sn,vertexShader:hn,fragmentShader:Kr,triangulation:Ge.sN,depth:{enable:Je},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce),workerEnabled:Kt,workerOptions:{modelType:"line"+sn,enablePicking:tr,iconMap:this.iconService.getIconMap()}});case 5:return Yn=Zi.sent,Zi.abrupt("return",[Yn]);case 7:case"end":return Zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor,d=t.lineType;return d==="dash"?{frag:Ah,vert:Dd,type:"Dash"}:o&&u?{frag:vl,vert:wd,type:"Linear"}:{frag:xd,vert:wd,type:""}}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ee.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u,d,S,U,ce,ve){return ve===void 0?[S[3],10]:[S[3],ve]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ee.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u,d,S){return[S[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0],S[1]]:[S,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(u,d,S,U,ce){return ce}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ee.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u,d,S){return[S[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,U=d[S]||{x:0,y:0},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu);function cd(a){var s=Vd();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Vd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Gd=`uniform float u_opacity : 1.0;
uniform sampler2D u_texture;
uniform float u_linearDir: 1.0;

#pragma include "picking"

varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  gl_FragColor = texture2D(u_texture, vec2(linearRadio, 0.5));

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,jt=`
attribute float a_Miter;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

uniform float u_opacity: 1.0;

#pragma include "projection"
#pragma include "picking"

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Vr=function(a){(0,Zr.Z)(n,a);var s=cd(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;r.colorTexture&&r.colorTexture.destroy();var S=r.layer.getLayerConfig(),U=S.rampColors,ce=(0,Ge.Cl)(U);r.colorTexture=d({data:new Uint8Array(ce.data),width:ce.width,height:ce.height,wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE,min:Ee.gl.NEAREST,mag:Ee.gl.NEAREST,flipY:!1})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.vertexHeightScale,S=d===void 0?20:d,U=t.raisingHeight,ce=U===void 0?0:U,ve=t.heightfixed,Je=ve===void 0?!1:ve,Ye=t.linearDir,Kt=Ye===void 0?xl.VERTICAL:Ye;if(this.rendererService.getDirty()&&this.colorTexture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var tr=this.layer.getEncodedData(),Fr=this.calDataFrame(this.cellLength,tr,this.cellProperties),Kr=Fr.data,hn=Fr.width,sn=Fr.height;this.rowCount=sn,this.dataTexture=this.cellLength>0&&Kr.length>0?this.createTexture2D({flipY:!0,data:Kr,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:hn,height:sn}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_linearDir:Kt===xl.VERTICAL?1:0,u_opacity:(0,at.isNumber)(u)?u:1,u_texture:this.colorTexture,u_heightfixed:Number(Je),u_vertexScale:S,u_raisingHeight:Number(ce)}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.colorTexture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy()}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.depth,Je=ve===void 0?!1:ve,this.layer.triangulation=na,tr.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:jt,fragmentShader:Gd,triangulation:na,depth:{enable:Je},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 4:return Ye=tr.sent,tr.abrupt("return",[Ye]);case 6:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Ee.GC.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d,S,U,ce){return ce===void 0?[d[3],10]:[d[3],ce]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ee.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o,u,d){return[d[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0],d[1]]:[d,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ee.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o,u,d){return[d[4]]}}})}}]),n}(nu);function Ln(a){var s=Ci();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ci(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var aa=`
varying vec4 v_color;
varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,Ai=`uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];

  // styleMappingMat[3][0] \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = mix(u_sourceColor, u_targetColor, styleMappingMat[3][0]);
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,Gi=`attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Position;

attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_vertexScale: 1.0;

#pragma include "projection"

varying vec4 v_color;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  v_color = a_Color; 
  styleMappingMat[3][0] = a_Distance / a_Total_Distance;

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,Ea=function(a){(0,Zr.Z)(n,a);var s=Ln(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.vertexHeightScale,ce=U===void 0?20:U,ve=0,Je=[0,0,0,0],Ye=[0,0,0,0];if(d&&S&&(Je=(0,Ge.CI)(d),Ye=(0,Ge.CI)(S),ve=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Kt=this.layer.getEncodedData(),tr=this.calDataFrame(this.cellLength,Kt,this.cellProperties),Fr=tr.data,Kr=tr.width,hn=tr.height;this.rowCount=hn,this.dataTexture=this.cellLength>0&&Fr.length>0?this.createTexture2D({flipY:!0,data:Fr,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Kr,height:hn}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_linearColor:ve,u_sourceColor:Je,u_targetColor:Ye,u_vertexScale:ce}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.sourceColor,u=t.targetColor;return o&&u?{frag:Ai,vert:Gi,type:"lineSimpleLinear"}:{frag:aa,vert:Gi,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr;return we().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=this.getShaders(),Je=ve.frag,Ye=ve.vert,Kt=ve.type,Kr.next=4,this.layer.buildLayerModel({moduleName:Kt,vertexShader:Ye,fragmentShader:Je,triangulation:ka,primitive:Ee.gl.LINES,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce),pick:!1});case 4:return tr=Kr.sent,Kr.abrupt("return",[tr]);case 6:case"end":return Kr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:Ee.GC.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o,u,d){return[d[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ee.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o,u,d){return[d[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0],d[1]]:[d,0]}}})}}]),n}(nu);function Pa(a){var s=Ra();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ra(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Za=`#define Animate 0.0
#define LineTexture 1.0

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;
uniform float u_iconStepCount;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying vec2 v_iconMapUV;
varying float v_blur;
varying float v_radio;
varying vec4 v_color;
varying vec4 v_dataset;

#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ha=`#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;
attribute vec2 a_iconMapUV;
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;
uniform float u_heightfixed;
uniform float u_linearColor: 0;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;
varying vec4 v_color;
varying float v_blur;
varying float v_radio;
varying vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    originSize = project_float_pixel(a_Size.x);
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,$a=function(a){(0,Zr.Z)(n,a);var s=Pa(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.NEAREST,min:Ee.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.sourceColor,S=t.targetColor,U=t.textureBlend,ce=U===void 0?"normal":U,ve=t.heightfixed,Je=ve===void 0?!1:ve,Ye=t.lineTexture,Kt=Ye===void 0?!1:Ye,tr=t.iconStep,Fr=tr===void 0?100:tr,Kr=t.iconStepCount,hn=Kr===void 0?1:Kr;this.rendererService.getDirty()&&this.texture.bind();var sn=0,Yn=[0,0,0,0],hi=[0,0,0,0];return d&&S&&(Yn=(0,Ge.CI)(d),hi=(0,Ge.CI)(S),sn=1),{u_heightfixed:Number(Je),u_opacity:(0,at.isNumber)(u)?u:1,u_textureBlend:ce==="normal"?0:1,u_texture:this.texture,u_line_texture:Kt?1:0,u_iconStepCount:hn,u_icon_step:Fr,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:sn,u_sourceColor:Yn,u_targetColor:hi}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Ha,fragmentShader:Za,triangulation:na,depth:{enable:!1},blend:this.getBlend()});case 2:return u=S.sent,S.abrupt("return",[u]);case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:Ee.GC.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u,d,S){return[S[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Ee.GC.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u,d,S){return[S[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=u.size,S=d===void 0?1:d;return Array.isArray(S)?[S[0],S[1]]:[S,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(u,d,S,U,ce){return ce}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Ee.GC.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u,d,S){return[S[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.texture,U=d[S]||{x:0,y:0},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu),ya={arc:zo,arc3d:Cu,greatcircle:up,wall:$a,line:Fs,halfLine:Cd,simple:Ea,linearline:Vr,earthArc3d:ud},Ua=ya;function ui(a){var s=Ni();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ni(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var La=function(a){(0,Zr.Z)(n,a);var s=ui(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","LineLayer"),(0,X.Z)((0,lr.Z)(r),"arrowInsertCount",0),(0,X.Z)((0,lr.Z)(r),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new Ua[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},halfLine:{},earthArc3d:{}};return o[t]}},{key:"getModelType",value:function(){var t;if(this.layerType)return this.layerType;var o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(t=o.scale)===null||t===void 0?void 0:t.field;return u||"line"}},{key:"processData",value:function(t){if(this.getModelType()!=="simple")return t;var o=[];return t.map(function(u){if(Array.isArray(u.coordinates)&&Array.isArray(u.coordinates[0])&&Array.isArray(u.coordinates[0][0])){var d=(0,Ne.Z)({},u);u.coordinates.map(function(S){o.push((0,Ne.Z)((0,Ne.Z)({},d),{},{coordinates:S}))})}else o.push(u)}),o}}]),n}(eu);function Ya(a){var s=_a();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function _a(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ga=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,xo=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,xs=function(a){(0,Zr.Z)(n,a);var s=Ya(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"raiseCount",0),(0,X.Z)((0,lr.Z)(r),"raiseRepeat",0),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1,speed:.01,repeat:!1}:o,d=t.opacity,S=d===void 0?1:d,U=t.sourceColor,ce=t.targetColor,ve=t.pickLight,Je=ve===void 0?!1:ve,Ye=t.heightfixed,Kt=Ye===void 0?!1:Ye,tr=t.opacityLinear,Fr=tr===void 0?{enable:!1,dir:"up"}:tr,Kr=t.lightEnable,hn=Kr===void 0?!0:Kr;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:S})){this.judgeStyleAttributes({opacity:S});var sn=this.layer.getEncodedData(),Yn=this.calDataFrame(this.cellLength,sn,this.cellProperties),hi=Yn.data,Zi=Yn.width,zi=Yn.height;this.rowCount=zi,this.dataTexture=this.cellLength>0&&hi.length>0?this.createTexture2D({flipY:!0,data:hi,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Zi,height:zi}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}var pa=0,_o=[0,0,0,0],Co=[0,0,0,0];if(U&&ce&&(_o=(0,Ge.CI)(U),Co=(0,Ge.CI)(ce),pa=1),this.raiseCount<1&&this.raiseRepeat>0&&u.enable){var Ba=u.speed,ms=Ba===void 0?.01:Ba;this.raiseCount+=ms,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(Je),u_heightfixed:Number(Kt),u_r:u.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(S)?S:1,u_linearColor:pa,u_sourceColor:_o,u_targetColor:Co,u_opacitylinear:Number(Fr.enable),u_opacitylinear_dir:Fr.dir==="up"?1:0,u_lightEnable:Number(hn)}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return u=this.layer.getLayerConfig(),d=u.animateOption.repeat,S=d===void 0?1:d,this.raiseRepeat=S,ve.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:xo,fragmentShader:Ga,triangulation:Ti,depth:{enable:!0},cull:{enable:!0,face:(0,Ge.fj)(this.mapService.version)},blend:this.getBlend()});case 4:return U=ve.sent,ve.abrupt("return",[U]);case 6:case"end":return ve.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=o.size;if(u){var d=[];return Array.isArray(u)&&(d=u.length===2?[u[0],u[0],u[1]]:u),Array.isArray(u)||(d=[u,u,u]),d}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ee.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=(0,Ge.SI)(o.coordinates);return df([u[0],u[1]])}}})}}]),n}(nu);function ea(a){var s=sa();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function sa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Zo=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,fo=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);

  setPickingColor(a_PickingColor);
}
`,Oa=function(a){(0,Zr.Z)(n,a);var s=ea(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.strokeOpacity,S=d===void 0?1:d,U=t.strokeWidth,ce=U===void 0?0:U,ve=t.stroke,Je=ve===void 0?"rgba(0,0,0,0)":ve,Ye=t.offsets,Kt=Ye===void 0?[0,0]:Ye,tr=t.blend,Fr=t.blur,Kr=Fr===void 0?0:Fr;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeOpacity:S,strokeWidth:ce,stroke:Je,offsets:Kt})){this.judgeStyleAttributes({opacity:u,strokeOpacity:S,strokeWidth:ce,stroke:Je,offsets:Kt});var hn=this.layer.getEncodedData(),sn=this.calDataFrame(this.cellLength,hn,this.cellProperties),Yn=sn.data,hi=sn.width,Zi=sn.height;this.rowCount=Zi,this.dataTexture=this.cellLength>0&&Yn.length>0?this.createTexture2D({flipY:!0,data:Yn,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:hi,height:Zi}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_blur:Kr,u_additive:tr==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_stroke_opacity:(0,at.isNumber)(S)?S:1,u_stroke_width:(0,at.isNumber)(ce)?ce:1,u_stroke_color:this.getStrokeColor(Je),u_offsets:this.isOffsetStatic(Kt)?Kt:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.triangulation=ki,S.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:fo,fragmentShader:Zo,triangulation:ki,depth:{enable:!0},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ee.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(u,d,S,U){var ce=(0,oi.Z)(S,3),ve=ce[0],Je=ce[1],Ye=ce[2],Kt=Qo.fromValues(0,0,1),tr=Qo.fromValues(ve,0,Ye),Fr=ve>=0?Qo.angle(Kt,tr):Math.PI*2-Qo.angle(Kt,tr),Kr=Math.PI*2-Math.asin(Je/100),hn=Vo.create();Vo.rotateY(hn,hn,Fr),Vo.rotateX(hn,hn,Kr);var sn=Qo.fromValues(1,1,0);Qo.transformMat4(sn,sn,hn),Qo.normalize(sn,sn);var Yn=Qo.fromValues(-1,1,0);Qo.transformMat4(Yn,Yn,hn),Qo.normalize(Yn,Yn);var hi=Qo.fromValues(-1,-1,0);Qo.transformMat4(hi,hi,hn),Qo.normalize(hi,hi);var Zi=Qo.fromValues(1,-1,0);Qo.transformMat4(Zi,Zi,hn),Qo.normalize(Zi,Zi);var zi=[].concat((0,We.Z)(sn),(0,We.Z)(Yn),(0,We.Z)(hi),(0,We.Z)(Zi)),pa=U%4*3;return[zi[pa],zi[pa+1],zi[pa+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Ee.GC.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.shape,S=d===void 0?2:d,U=t.layer.getLayerConfig().shape2d,ce=U.indexOf(S);return[ce]}}})}}]),n}(nu);function to(a){var s=Ia();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ia(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Os=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Bs=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }

  setPickingColor(a_PickingColor);
}
`,so=function(a){(0,Zr.Z)(n,a);var s=to(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"raiseCount",0),(0,X.Z)((0,lr.Z)(r),"raiseRepeat",0),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1,speed:.01,repeat:!1}:o,d=t.opacity,S=d===void 0?1:d,U=t.sourceColor,ce=t.targetColor,ve=t.pickLight,Je=ve===void 0?!1:ve,Ye=t.heightfixed,Kt=Ye===void 0?!1:Ye,tr=t.opacityLinear,Fr=tr===void 0?{enable:!1,dir:"up"}:tr,Kr=t.lightEnable,hn=Kr===void 0?!0:Kr;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:S})){this.judgeStyleAttributes({opacity:S});var sn=this.layer.getEncodedData(),Yn=this.calDataFrame(this.cellLength,sn,this.cellProperties),hi=Yn.data,Zi=Yn.width,zi=Yn.height;this.rowCount=zi,this.dataTexture=this.cellLength>0&&hi.length>0?this.createTexture2D({flipY:!0,data:hi,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Zi,height:zi}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}var pa=0,_o=[0,0,0,0],Co=[0,0,0,0];if(U&&ce&&(_o=(0,Ge.CI)(U),Co=(0,Ge.CI)(ce),pa=1),this.raiseCount<1&&this.raiseRepeat>0&&u.enable){var Ba=u.speed,ms=Ba===void 0?.01:Ba;this.raiseCount+=ms,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(Je),u_heightfixed:Number(Kt),u_r:u.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(S)?S:1,u_linearColor:pa,u_sourceColor:_o,u_targetColor:Co,u_opacitylinear:Number(Fr.enable),u_opacitylinear_dir:Fr.dir==="up"?1:0,u_lightEnable:Number(hn)}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.depth,S=d===void 0?!0:d,U=u.animateOption.repeat,ce=U===void 0?1:U,this.raiseRepeat=ce,Ye.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:Bs,fragmentShader:Os,triangulation:Ti,blend:this.getBlend(),cull:{enable:!0,face:(0,Ge.fj)(this.mapService.version)},depth:{enable:S}});case 4:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 6:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=o.size;if(u){var d=[];return Array.isArray(u)&&(d=u.length===2?[u[0],u[0],u[1]]:u),Array.isArray(u)||(d=[u,u,u]),d}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ee.GC.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o){var u=(0,Ge.SI)(o.coordinates);return[u[0],u[1],0]}}})}}]),n}(nu);function yo(a){var s=hs();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function hs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zs=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

 gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  
  // \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,wu=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Gu=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform int u_Size_Unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;
if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_raisingHeight;

  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }
 

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position =  u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Bl=function(a){(0,Zr.Z)(n,a);var s=yo(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.strokeOpacity,S=d===void 0?1:d,U=t.strokeWidth,ce=U===void 0?0:U,ve=t.stroke,Je=ve===void 0?"rgba(0,0,0,0)":ve,Ye=t.offsets,Kt=Ye===void 0?[0,0]:Ye,tr=t.blend,Fr=t.blur,Kr=Fr===void 0?0:Fr,hn=t.raisingHeight,sn=hn===void 0?0:hn,Yn=t.heightfixed,hi=Yn===void 0?!1:Yn,Zi=t.unit,zi=Zi===void 0?"pixel":Zi;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeOpacity:S,strokeWidth:ce,stroke:Je,offsets:Kt})){this.judgeStyleAttributes({opacity:u,strokeOpacity:S,strokeWidth:ce,stroke:Je,offsets:Kt});var pa=this.layer.getEncodedData(),_o=this.calDataFrame(this.cellLength,pa,this.cellProperties),Co=_o.data,Ba=_o.width,ms=_o.height;this.rowCount=ms,this.dataTexture=this.cellLength>0&&Co.length>0?this.createTexture2D({flipY:!0,data:Co,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Ba,height:ms}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(sn),u_heightfixed:Number(hi),u_blur:Kr,u_additive:tr==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_stroke_opacity:(0,at.isNumber)(S)?S:1,u_stroke_width:(0,at.isNumber)(ce)?ce:1,u_stroke_color:this.getStrokeColor(Je),u_Size_Unit:Ku[zi],u_offsets:this.isOffsetStatic(Kt)?Kt:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Ge.oX)}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn,hi;return we().wrap(function(zi){for(;;)switch(zi.prev=zi.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.animateOption,Je=ve===void 0?{enable:!1}:ve,Ye=u.workerEnabled,Kt=Ye===void 0?!1:Ye,tr=u.enablePicking,Fr=u.shape2d,Kr=this.getShaders(Je),hn=Kr.frag,sn=Kr.vert,Yn=Kr.type,this.layer.triangulation=Ge.oX,zi.next=5,this.layer.buildLayerModel({moduleName:Yn,vertexShader:sn,fragmentShader:hn,triangulation:Ge.oX,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce),workerEnabled:Kt,workerOptions:{modelType:Yn,enablePicking:tr,shape2d:Fr}});case 5:return hi=zi.sent,zi.abrupt("return",[hi]);case 7:case"end":return zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(t){if(t.enable)switch(t.type){case"wave":return{frag:zs,vert:Gu,type:"pointWave"};default:return{frag:zs,vert:Gu,type:"pointWave"}}else return{frag:wu,vert:Gu,type:"pointFill"}}},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ee.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(u,d,S,U){var ce=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],ve=U%4*3;return[ce[ve],ce[ve+1],ce[ve+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Ee.GC.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.shape,S=d===void 0?2:d,U=t.indexOf(S);return[U]}}})}}]),n}(nu);function Au(a){var s=Sf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Sf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Xl=`uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;

void main() {

  float opacity = styleMappingMat[0][0];

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ic=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;
attribute float a_Rotate;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform mat2 u_RotateMatrix;
uniform int u_Size_Unit;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;
uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;

  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float newSize = a_Size;
  if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (newSize) + textrueOffsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp *vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Cl=function(a){(0,Zr.Z)(n,a);var s=Au(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"meter2coord",1),(0,X.Z)((0,lr.Z)(r),"isMeter",!1),(0,X.Z)((0,lr.Z)(r),"radian",0),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layerService.throttleRenderLayers();return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.LINEAR,min:Ee.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.offsets,S=d===void 0?[0,0]:d,U=t.rotation,ce=t.raisingHeight,ve=ce===void 0?0:ce,Je=t.heightfixed,Ye=Je===void 0?!1:Je,Kt=t.unit,tr=Kt===void 0?"pixel":Kt;this.rendererService.getDirty()&&this.texture.bind();var Fr=1;if((this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(Fr=-1),this.radian=U!==void 0?Fr*Math.PI*U/180:Fr*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:S})){this.judgeStyleAttributes({opacity:u,offsets:S});var Kr=this.layer.getEncodedData(),hn=this.calDataFrame(this.cellLength,Kr,this.cellProperties),sn=hn.data,Yn=hn.width,hi=hn.height;this.rowCount=hi,this.dataTexture=this.cellLength>0&&sn.length>0?this.createTexture2D({flipY:!0,data:sn,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Yn,height:hi}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(ve),u_heightfixed:Number(Ye),u_Size_Unit:Ku[tr],u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,at.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(S)?S:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),vi)}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:Ic,fragmentShader:Xl,triangulation:vi,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce),cull:{enable:!0,face:(0,Ge.fj)(this.mapService.version)}});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;this.iconService.off("imageUpdate",this.updateTexture),(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:Ee.GC.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.rotate,S=d===void 0?0:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.shape,U=d[S]||{x:-64,y:-64},ce=U.x,ve=U.y;return[ce,ve]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ee.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(u,d,S,U){var ce=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],ve=U%4*3;return[ce[ve],ce[ve+1],ce[ve+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}})}}]),n}(nu);function rf(a){var s=mf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function mf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var lh=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,pc=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(textrueOffsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,fu=function(a){(0,Zr.Z)(n,a);var s=rf(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"updateTexture",function(){var d=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){r.layerService.throttleRenderLayers()});return}r.texture=d({data:r.iconService.getCanvas(),mag:Ee.gl.LINEAR,min:Ee.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.offsets,S=d===void 0?[0,0]:d,U=t.raisingHeight,ce=U===void 0?0:U,ve=t.heightfixed,Je=ve===void 0?!1:ve;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:S})){this.judgeStyleAttributes({opacity:u,offsets:S});var Ye=this.layer.getEncodedData(),Kt=this.calDataFrame(this.cellLength,Ye,this.cellProperties),tr=Kt.data,Fr=Kt.width,Kr=Kt.height;this.rowCount=Kr,this.dataTexture=this.cellLength>0&&tr.length>0?this.createTexture2D({flipY:!0,data:tr,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Fr,height:Kr}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(ce),u_heightfixed:Number(Je),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,at.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(S)?S:[0,0]}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),d.abrupt("return",this.buildModels());case 3:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:pc,fragmentShader:lh,triangulation:Fi,depth:{enable:!1},primitive:Ee.gl.POINTS,blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(u){var d=u.size,S=d===void 0?5:d;return Array.isArray(S)?[S[0]]:[S]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(u){var d=t.iconService.getIconMap(),S=u.shape,U=d[S]||{x:-64,y:-64},ce=U.x,ve=U.y;return[ce,ve]}}})}}]),n}(nu);function Cf(a){var s=Uu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Qf=`uniform float u_opacity : 1;
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;
}
`,js=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;

varying vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = a_Color;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
}
`;function Pu(a){var s=a.coordinates;return{vertices:(0,We.Z)(s),indices:[0],size:s.length}}var Ru=function(a){(0,Zr.Z)(n,a);var s=Cf(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o;return{u_opacity:(0,at.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,this.layer.triangulation=Pu,Ye.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:js,fragmentShader:Qf,triangulation:Pu,depth:{enable:!1},primitive:Ee.gl.POINTS,blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce),pick:!1});case 4:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 6:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}})}}]),n}(nu);function nf(a){var s=pd();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function pd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var w=`
uniform float u_additive;
uniform float u_opacity: 1.0;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;
#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  v_exteude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  // full circle
  // float rades = dot(dir, baseDir);
  // float flag = sign(dir.y);
  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;
  
  // half circle
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,G=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
uniform float u_speed: 1.0;
uniform float u_time;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform int u_Size_Unit;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_exteude = rotateMatrix * a_Extrude.xy;

  // unpack color(vec2)
  v_color = a_Color;



  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_Size_Unit == 1) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = (extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
  offset = project_pixel(offset);
  
  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp *vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,Ce=function(a){(0,Zr.Z)(n,a);var s=nf(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.blend,S=t.speed,U=S===void 0?1:S,ce=t.unit,ve=ce===void 0?"pixel":ce;return{u_Size_Unit:Ku[ve],u_speed:U,u_additive:d==="additive"?1:0,u_opacity:(0,at.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),vi)}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:G,fragmentShader:w,triangulation:vi,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Ee.GC.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S){var U=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],ce=S%4*3;return[U[ce],U[ce+1],U[ce+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?5:u;return Array.isArray(d)?[d[0]]:[d]}}})}}]),n}(nu);function ae(a){var s=et();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function et(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ie=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,Ze=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  vec2 offset = project_pixel(textrueOffsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function Fe(a){var s=a.coordinates;return{vertices:(0,We.Z)(s),indices:[0],size:s.length}}var it=function(a){(0,Zr.Z)(n,a);var s=ae(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.offsets,S=d===void 0?[0,0]:d,U=t.blend,ce=t.strokeOpacity,ve=ce===void 0?1:ce,Je=t.strokeWidth,Ye=Je===void 0?0:Je,Kt=t.stroke,tr=Kt===void 0?"#fff":Kt;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:S})){this.judgeStyleAttributes({opacity:u,offsets:S});var Fr=this.layer.getEncodedData(),Kr=this.calDataFrame(this.cellLength,Fr,this.cellProperties),hn=Kr.data,sn=Kr.width,Yn=Kr.height;this.rowCount=Yn,this.dataTexture=this.cellLength>0&&hn.length>0?this.createTexture2D({flipY:!0,data:hn,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:sn,height:Yn}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_additive:U==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,at.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(S)?S:[0,0],u_stroke_opacity:(0,at.isNumber)(ve)?ve:1,u_stroke_width:(0,at.isNumber)(Ye)?Ye:1,u_stroke_color:this.getStrokeColor(tr)}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,this.layer.triangulation=Fe,Ye.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:Ze,fragmentShader:Ie,triangulation:Fe,depth:{enable:!1},primitive:Ee.gl.POINTS,blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 4:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 6:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}})}}]),n}(nu),gt=m(98333);function It(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Tt(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Tt(a,s){if(a){if(typeof a=="string")return qt(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qt(a,s)}}function qt(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var Ot=function(){function a(s,n,r){(0,mr.Z)(this,a),(0,X.Z)(this,"boxCells",[]);var t=this.boxCells;this.xCellCount=Math.ceil(s/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)t.push([]);this.boxKeys=[],this.bboxes=[],this.width=s,this.height=n,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/n,this.boxUid=0}return(0,Or.Z)(a,[{key:"insert",value:function(n,r,t,o,u){this.forEachCell(r,t,o,u,this.insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(t),this.bboxes.push(o),this.bboxes.push(u)}},{key:"query",value:function(n,r,t,o,u){return this.queryHitTest(n,r,t,o,!1,u)}},{key:"hitTest",value:function(n,r,t,o,u){return this.queryHitTest(n,r,t,o,!0,u)}},{key:"insertBoxCell",value:function(n,r,t,o,u,d){this.boxCells[u].push(d)}},{key:"queryHitTest",value:function(n,r,t,o,u,d){if(t<0||n>this.width||o<0||r>this.height)return u?!1:[];var S=[];if(n<=0&&r<=0&&this.width<=t&&this.height<=o){if(u)return!0;for(var U=0;U<this.boxKeys.length;U++)S.push({key:this.boxKeys[U],x1:this.bboxes[U*4],y1:this.bboxes[U*4+1],x2:this.bboxes[U*4+2],y2:this.bboxes[U*4+3]});return d?S.filter(d):S}var ce={hitTest:u,seenUids:{box:{},circle:{}}};return this.forEachCell(n,r,t,o,this.queryCell,S,ce,d),u?S.length>0:S}},{key:"queryCell",value:function(n,r,t,o,u,d,S,U){var ce=S.seenUids,ve=this.boxCells[u];if(ve!==null){var Je=this.bboxes,Ye=It(ve),Kt;try{for(Ye.s();!(Kt=Ye.n()).done;){var tr=Kt.value;if(!ce.box[tr]){ce.box[tr]=!0;var Fr=tr*4;if(n<=Je[Fr+2]&&r<=Je[Fr+3]&&t>=Je[Fr+0]&&o>=Je[Fr+1]&&(!U||U(this.boxKeys[tr]))){if(S.hitTest)return d.push(!0),!0;d.push({key:this.boxKeys[tr],x1:Je[Fr],y1:Je[Fr+1],x2:Je[Fr+2],y2:Je[Fr+3]})}}}}catch(Kr){Ye.e(Kr)}finally{Ye.f()}}return!1}},{key:"forEachCell",value:function(n,r,t,o,u,d,S,U){for(var ce=this.convertToXCellCoord(n),ve=this.convertToYCellCoord(r),Je=this.convertToXCellCoord(t),Ye=this.convertToYCellCoord(o),Kt=ce;Kt<=Je;Kt++)for(var tr=ve;tr<=Ye;tr++){var Fr=this.xCellCount*tr+Kt;if(u.call(this,n,r,t,o,Fr,d,S,U))return}}},{key:"convertToXCellCoord",value:function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}},{key:"convertToYCellCoord",value:function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}}]),a}(),rr=Ot,Xt=function(){function a(s,n){(0,mr.Z)(this,a),(0,X.Z)(this,"viewportPadding",100),this.width=s,this.height=n,this.viewportPadding=Math.max(s,n),this.grid=new rr(s+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=s+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=s+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return(0,Or.Z)(a,[{key:"placeCollisionBox",value:function(n){var r=n.x1+n.anchorPointX+this.viewportPadding,t=n.y1+n.anchorPointY+this.viewportPadding,o=n.x2+n.anchorPointX+this.viewportPadding,u=n.y2+n.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,t,o,u)||this.grid.hitTest(r,t,o,u)?{box:[]}:{box:[r,t,o,u]}}},{key:"insertCollisionBox",value:function(n,r){var t={featureIndex:r};this.grid.insert(t,n[0],n[1],n[2],n[3])}},{key:"project",value:function(n,r,t){var o=gt.al(r,t,0,1),u=gt.Ue(),d=Vo.fromValues.apply(Vo,(0,We.Z)(n));return gt.fF(u,o,d),{x:(u[0]/u[3]+1)/2*this.width+this.viewportPadding,y:(-u[1]/u[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(n,r,t,o){return t>=0&&n<this.gridRightBoundary&&o>=0&&r<this.gridBottomBoundary}}]),a}();function gr(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Sr(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Sr(a,s){if(a){if(typeof a=="string")return Wr(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(a,s)}}function Wr(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function Cn(a){var s=.5,n=.5;switch(a){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0;break;default:s=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:s,verticalAlign:n}}function xn(a,s,n,r,t){if(t){var o=a[r],u=o.glyph;if(u)for(var d=s[u].advance*o.scale,S=(a[r].x+d)*t,U=n;U<=r;U++)a[U].x-=S}}function In(a,s,n,r,t,o,u){var d=(s-n)*t,S=(-r*u+.5)*o,U=gr(a),ce;try{for(U.s();!(ce=U.n()).done;){var ve=ce.value;ve.x+=d,ve.y+=S}}catch(Je){U.e(Je)}finally{U.f()}}function Rn(a,s,n,r,t,o,u){var d=-8,S=0,U=d,ce=0,ve=a.positionedGlyphs,Je=o==="right"?1:o==="left"?0:.5,Ye=ve.length;n.forEach(function(hn){if(hn.split("").forEach(function(Yn){var hi=s[Yn],Zi=0;hi&&(ve.push({glyph:Yn,x:S,y:U+Zi,vertical:!1,scale:1,metrics:hi}),S+=hi.advance+u)}),ve.length!==Ye){var sn=S-u;ce=Math.max(sn,ce),xn(ve,s,Ye,ve.length-1,Je)}S=0,U-=r+5});var Kt=Cn(t),tr=Kt.horizontalAlign,Fr=Kt.verticalAlign;In(ve,Je,tr,Fr,ce,r,n.length);var Kr=U-d;a.top+=-Fr*Kr,a.bottom=a.top-Kr,a.left+=-tr*ce,a.right=a.left+ce}function Gn(a,s,n,r,t,o,u){var d=-8,S=0,U=d,ce=0,ve=a.positionedGlyphs,Je=o==="right"?1:o==="left"?0:.5,Ye=ve.length;n.forEach(function(hn){var sn=s[hn],Yn=0;if(sn&&(ve.push({glyph:hn,x:sn.advance/2,y:U+Yn,vertical:!1,scale:1,metrics:sn}),S+=sn.advance+u),ve.length!==Ye){var hi=S-u;ce=Math.max(hi,ce),xn(ve,s,Ye,ve.length-1,Je)}S=0,U-=r+5});var Kt=Cn(t),tr=Kt.horizontalAlign,Fr=Kt.verticalAlign;In(ve,Je,tr,Fr,ce,r,n.length);var Kr=U-d;a.top+=-Fr*Kr,a.bottom=a.top-Kr,a.left+=-tr*ce,a.right=a.left+ce}function ti(a,s,n,r,t,o){var u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],d=arguments.length>7?arguments[7]:void 0,S=a.split(`
`),U=[],ce={positionedGlyphs:U,top:u[1],bottom:u[1],left:u[0],right:u[0],lineCount:S.length,text:a};return d?Gn(ce,s,S,n,r,t,o):Rn(ce,s,S,n,r,t,o),U.length?ce:!1}function ii(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],n=arguments.length>2?arguments[2]:void 0,r=a.positionedGlyphs,t=r===void 0?[]:r,o=[],u=gr(t),d;try{for(u.s();!(d=u.n()).done;){var S=d.value,U=S.metrics,ce=4,ve=U.advance*S.scale/2,Je=n?[S.x+ve,S.y]:[0,0],Ye=n?[0,0]:[S.x+ve+s[0],S.y+s[1]],Kt=(0-ce)*S.scale-ve+Ye[0],tr=(0-ce)*S.scale+Ye[1],Fr=Kt+U.width*S.scale,Kr=tr+U.height*S.scale,hn={x:Kt,y:tr},sn={x:Fr,y:tr},Yn={x:Kt,y:Kr},hi={x:Fr,y:Kr};o.push({tl:hn,tr:sn,bl:Yn,br:hi,tex:U,glyphOffset:Je})}}catch(Zi){u.e(Zi)}finally{u.f()}return o}function b(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=M(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function M(a,s){if(a){if(typeof a=="string")return D(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(a,s)}}function D(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function P(a){var s=V();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function V(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var q=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,be=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp *(vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function $e(a){var s=this,n=a.id,r=[],t=[];if(!s.glyphInfoMap||!s.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=s.glyphInfoMap[n].centroid,u=o.length===2?[o[0],o[1],0]:o;return s.glyphInfoMap[n].glyphQuads.forEach(function(d,S){r.push.apply(r,(0,We.Z)(u).concat([d.tex.x,d.tex.y+d.tex.height,d.tl.x,d.tl.y],(0,We.Z)(u),[d.tex.x+d.tex.width,d.tex.y+d.tex.height,d.tr.x,d.tr.y],(0,We.Z)(u),[d.tex.x+d.tex.width,d.tex.y,d.br.x,d.br.y],(0,We.Z)(u),[d.tex.x,d.tex.y,d.bl.x,d.bl.y])),t.push(0+S*4,1+S*4,2+S*4,2+S*4,3+S*4,0+S*4)}),{vertices:r,indices:t,size:7}}var _t=function(a){(0,Zr.Z)(n,a);var s=P(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"glyphInfoMap",{}),(0,X.Z)((0,lr.Z)(r),"currentZoom",-1),(0,X.Z)((0,lr.Z)(r),"textureHeight",0),(0,X.Z)((0,lr.Z)(r),"textCount",0),(0,X.Z)((0,lr.Z)(r),"preTextStyle",{}),(0,X.Z)((0,lr.Z)(r),"mapping",(0,$t.Z)(we().mark(function d(){return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return r.initGlyph(),r.updateTexture(),U.next=4,r.reBuildModel();case 4:case"end":return U.stop()}},d)}))),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.stroke,S=d===void 0?"#fff":d,U=t.strokeWidth,ce=U===void 0?0:U,ve=t.halo,Je=ve===void 0?.5:ve,Ye=t.gamma,Kt=Ye===void 0?2:Ye,tr=t.raisingHeight,Fr=tr===void 0?0:tr,Kr=this.fontService,hn=Kr.canvas,sn=Kr.mapping;if(sn&&Object.keys(sn).length!==this.textCount&&hn&&(this.updateTexture(),this.textCount=Object.keys(sn).length),this.preTextStyle=this.getTextStyle(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeWidth:ce,stroke:S})){this.judgeStyleAttributes({opacity:u,strokeWidth:ce,stroke:S});var Yn=this.layer.getEncodedData(),hi=this.calDataFrame(this.cellLength,Yn,this.cellProperties),Zi=hi.data,zi=hi.width,pa=hi.height;this.rowCount=pa,this.dataTexture=this.cellLength>0&&Zi.length>0?this.createTexture2D({flipY:!0,data:Zi,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:zi,height:pa}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(Fr),u_opacity:(0,at.isNumber)(u)?u:1,u_stroke_width:(0,at.isNumber)(ce)?ce:1,u_stroke_color:this.getStrokeColor(S),u_sdf_map:this.texture,u_halo_blur:Je,u_gamma_scale:Kt,u_sdf_map_size:[(hn==null?void 0:hn.width)||1,(hn==null?void 0:hn.height)||1]}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.preTextStyle=this.getTextStyle(),d.abrupt("return",this.buildModels());case 4:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=u.textAllowOverlap,Je=ve===void 0?!1:ve,this.initGlyph(),this.updateTexture(),Je||this.filterGlyphs(),tr.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:be,fragmentShader:q,triangulation:$e.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 6:return Ye=tr.sent,tr.abrupt("return",[Ye]);case 8:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"needUpdate",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr;return we().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:if(u=this.getTextStyle(),d=u.textAllowOverlap,S=d===void 0?!1:d,U=u.textAnchor,ce=U===void 0?"center":U,ve=u.textOffset,Je=u.padding,Ye=u.fontFamily,Kt=u.fontWeight,!(!(0,at.isEqual)(Je,this.preTextStyle.padding)||!(0,at.isEqual)(ve,this.preTextStyle.textOffset)||!(0,at.isEqual)(ce,this.preTextStyle.textAnchor)||!(0,at.isEqual)(Ye,this.preTextStyle.fontFamily)||!(0,at.isEqual)(Kt,this.preTextStyle.fontWeight))){sn.next=5;break}return sn.next=4,this.mapping();case 4:return sn.abrupt("return",!0);case 5:if(!S){sn.next=7;break}return sn.abrupt("return",!1);case 7:if(tr=this.mapService.getZoom(),Fr=this.mapService.getBounds(),Kr=(0,Ge.oO)(this.extent,Fr),!(Math.abs(this.currentZoom-tr)>.5||!Kr||S!==this.preTextStyle.textAllowOverlap)){sn.next=14;break}return sn.next=13,this.reBuildModel();case 13:return sn.abrupt("return",!0);case 14:return sn.abrupt("return",!1);case 15:case"end":return sn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:Ee.GC.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.rotate,d=u===void 0?0:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Ee.GC.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[5],d[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?12:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Ee.GC.Attribute,descriptor:{name:"a_tex",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return(0,Ge.yA)(t,.5)}},{key:"initTextFont",value:function(){var t=this.getTextStyle(),o=t.fontWeight,u=t.fontFamily,d=this.layer.getEncodedData(),S=[];d.forEach(function(U){var ce=U.shape,ve=ce===void 0?"":ce;ve=ve.toString();var Je=b(ve),Ye;try{for(Je.s();!(Ye=Je.n()).done;){var Kt=Ye.value;S.indexOf(Kt)===-1&&S.push(Kt)}}catch(tr){Je.e(tr)}finally{Je.f()}}),this.fontService.setFontOptions({characterSet:S,fontWeight:o,fontFamily:u,iconfont:!1})}},{key:"initIconFontTex",value:function(){var t=this.getTextStyle(),o=t.fontWeight,u=t.fontFamily,d=this.layer.getEncodedData(),S=[];d.forEach(function(U){var ce=U.shape,ve=ce===void 0?"":ce;ve="".concat(ve),S.indexOf(ve)===-1&&S.push(ve)}),this.fontService.setFontOptions({characterSet:S,fontWeight:o,fontFamily:u,iconfont:!0})}},{key:"getTextStyle",value:function(){var t=this.layer.getLayerConfig(),o=t.fontWeight,u=o===void 0?"400":o,d=t.fontFamily,S=d===void 0?"sans-serif":d,U=t.textAllowOverlap,ce=U===void 0?!1:U,ve=t.padding,Je=ve===void 0?[0,0]:ve,Ye=t.textAnchor,Kt=Ye===void 0?"center":Ye,tr=t.textOffset,Fr=tr===void 0?[0,0]:tr,Kr=t.opacity,hn=Kr===void 0?1:Kr,sn=t.strokeOpacity,Yn=sn===void 0?1:sn,hi=t.strokeWidth,Zi=hi===void 0?0:hi,zi=t.stroke,pa=zi===void 0?"#000":zi;return{fontWeight:u,fontFamily:S,textAllowOverlap:ce,padding:Je,textAnchor:Kt,textOffset:Fr,opacity:hn,strokeOpacity:Yn,strokeWidth:Zi,stroke:pa}}},{key:"generateGlyphLayout",value:function(t){var o=this,u=this.fontService.mapping,d=this.layer.getLayerConfig(),S=d.spacing,U=S===void 0?2:S,ce=d.textAnchor,ve=ce===void 0?"center":ce,Je=d.textOffset,Ye=this.layer.getEncodedData();this.glyphInfo=Ye.map(function(Kt){var tr=Kt.shape,Fr=tr===void 0?"":tr,Kr=Kt.id,hn=Kt.size,sn=hn===void 0?1:hn,Yn=ti(Fr.toString(),u,sn,ve,"left",U,Je||Kt.textOffset||[0,0],t),hi=ii(Yn,Je,!1);return Kt.shaping=Yn,Kt.glyphQuads=hi,Kt.centroid=(0,Ge.SI)(Kt.coordinates),Kt.originCentroid=Kt.version==="GAODE2.x"?(0,Ge.SI)(Kt.originCoordinates):Kt.originCentroid=Kt.centroid,o.glyphInfoMap[Kr]={shaping:Yn,glyphQuads:hi,centroid:(0,Ge.SI)(Kt.coordinates)},Kt})}},{key:"filterGlyphs",value:function(){var t=this,o=this.layer.getLayerConfig(),u=o.padding,d=u===void 0?[0,0]:u,S=o.textAllowOverlap,U=S===void 0?!1:S;if(!U){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var ce=this.rendererService.getViewportSize(),ve=ce.width,Je=ce.height,Ye=new Xt(ve,Je),Kt=this.glyphInfo.filter(function(tr){var Fr=tr.shaping,Kr=tr.id,hn=Kr===void 0?0:Kr,sn=tr.version==="GAODE2.x"?tr.originCentroid:tr.centroid,Yn=tr.size,hi=Yn/16,Zi=t.mapService.lngLatToContainer(sn),zi=Ye.placeCollisionBox({x1:Fr.left*hi-d[0],x2:Fr.right*hi+d[0],y1:Fr.top*hi-d[1],y2:Fr.bottom*hi+d[1],anchorPointX:Zi.x,anchorPointY:Zi.y}),pa=zi.box;return pa&&pa.length?(Ye.insertCollisionBox(pa,hn),!0):!1});Kt.forEach(function(tr){t.glyphInfoMap[tr.id]=tr})}}},{key:"initGlyph",value:function(){var t=this.layer.getLayerConfig(),o=t.iconfont,u=o===void 0?!1:o;u?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(u)}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,o=this.fontService.canvas;this.textureHeight=o.height,this.texture&&this.texture.destroy(),this.texture=t({data:o,mag:Ee.gl.LINEAR,min:Ee.gl.LINEAR,width:o.width,height:o.height})}},{key:"reBuildModel",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,this.filterGlyphs(),Ye.next=4,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:be,fragmentShader:q,triangulation:$e.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 4:ve=Ye.sent,this.layer.models=[ve];case 6:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()}]),n}(nu),Gt={fillImage:Cl,fill:Bl,radar:Ce,image:fu,normal:Ru,simplePoint:it,extrude:so,text:_t,earthFill:Oa,earthExtrude:xs},yr=Gt;function $r(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=an(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function an(a,s){if(a){if(typeof a=="string")return Un(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(a,s)}}function Un(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function ei(a){var s=Jn();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Sn=function(a){(0,Zr.Z)(n,a);var s=ei(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","PointLayer"),(0,X.Z)((0,lr.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new yr[u](this),S.next=5,this.initLayerModels();case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"rebuildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.buildModels();case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var t=this.shapeOption,o=t.field,u=t.values,d=this.getLayerConfig(),S=d.shape2d,U=this.iconService.getIconMap();if(o&&(S==null?void 0:S.indexOf(o))!==-1)return"fill";if(u==="text")return"text";if(u&&u instanceof Array){var ce=$r(u),ve;try{for(ce.s();!(ve=ce.n()).done;){var Je=ve.value;if(typeof Je=="string"&&U.hasOwnProperty(Je))return"image"}}catch(Ye){ce.e(Ye)}finally{ce.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return o[t]}},{key:"getModelType",value:function(){var t=this.getEncodedData(),o=this.getLayerConfig(),u=o.shape2d,d=o.shape3d,S=this.iconService.getIconMap(),U=t.find(function(ve){return ve.hasOwnProperty("shape")});if(U){var ce=U.shape;return ce==="dot"?"normal":ce==="simple"?"simplePoint":ce==="radar"?"radar":this.layerType==="fillImage"?"fillImage":(u==null?void 0:u.indexOf(ce))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(d==null?void 0:d.indexOf(ce))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":S.hasOwnProperty(ce)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),n}(eu);function Xn(a){var s=ai();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ai(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ln=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];  
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }

  } else {
     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,pi=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,gi=`uniform sampler2D u_texture;
uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float lightWeight = styleMappingMat[3][1];
  float topU = styleMappingMat[2][2];
  float topV = styleMappingMat[2][3];

  float sidey = styleMappingMat[3][0];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = texture2D(u_texture, vec2(topU, topV));
  }
  

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Li=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_Color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - a_Position.z(judge side by a_Position.z)
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - u - v
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[2][2] = a_uvs[0];
  styleMappingMat[2][3] = 1.0 - a_uvs[1];
  styleMappingMat[3][0] = a_uvs[2];


  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,Ki=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      // side notuse linear
       gl_FragColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
}
`,ua=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,la=function(a){(0,Zr.Z)(n,a);var s=Xn(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.heightfixed,S=d===void 0?!1:d,U=t.raisingHeight,ce=U===void 0?0:U,ve=t.topsurface,Je=ve===void 0?!0:ve,Ye=t.sidesurface,Kt=Ye===void 0?!0:Ye,tr=t.sourceColor,Fr=t.targetColor;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Kr=this.layer.getEncodedData(),hn=this.calDataFrame(this.cellLength,Kr,this.cellProperties),sn=hn.data,Yn=hn.width,hi=hn.height;this.rowCount=hi,this.dataTexture=this.cellLength>0&&sn.length>0?this.createTexture2D({flipY:!0,data:sn,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Yn,height:hi}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}var Zi=0,zi=[1,1,1,1],pa=[1,1,1,1];return tr&&Fr&&(zi=(0,Ge.CI)(tr),pa=(0,Ge.CI)(Fr),Zi=1),{u_topsurface:Number(Je),u_sidesurface:Number(Kt),u_heightfixed:Number(S),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(ce),u_opacity:(0,at.isNumber)(u)?u:1,u_linearColor:Zi,u_sourceColor:zi,u_targetColor:pa,u_texture:this.texture}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr;return we().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=this.getShaders(),Je=ve.frag,Ye=ve.vert,Kt=ve.type,Kr.next=4,this.layer.buildLayerModel({moduleName:Kt,vertexShader:Ye,fragmentShader:Je,triangulation:Ns,stencil:(0,Ge.Vi)(S,ce)});case 4:return tr=Kr.sent,Kr.abrupt("return",[tr]);case 6:case"end":return Kr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),o=t.pickLight,u=t.mapTexture;return u?{frag:gi,vert:Li,type:"polygonExtrudeTexture"}:o?{frag:Ki,vert:ua,type:"polygonExtrudePickLight"}:{frag:ln,vert:pi,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var t,o;(t=this.dataTexture)===null||t===void 0||t.destroy(),(o=this.texture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,o=(0,oi.Z)(t,4),u=o[0],d=o[1],S=o[2],U=o[3],ce=S-u,ve=U-d;this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Ee.GC.Attribute,descriptor:{name:"a_uvs",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(Ye,Kt,tr){var Fr=tr[0],Kr=tr[1];return[(Fr-u)/ce,(Kr-d)/ve,tr[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(Ye,Kt,tr,Fr,Kr){return Kr}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(Ye){var Kt=Ye.size,tr=Kt===void 0?10:Kt;return Array.isArray(tr)?[tr[0]]:[tr]}}})}},{key:"loadTexture",value:function(){var t=this,o=this.layer.getLayerConfig(),u=o.mapTexture,d=this.rendererService.createTexture2D;if(this.texture=d({height:0,width:0}),u){var S=new Image;S.crossOrigin="",S.src=u,S.onload=function(){t.texture=d({data:S,width:S.width,height:S.height,wrapS:Ee.gl.CLAMP_TO_EDGE,wrapT:Ee.gl.CLAMP_TO_EDGE,min:Ee.gl.LINEAR,mag:Ee.gl.LINEAR}),t.layerService.reRender()}}}}]),n}(nu);function Lo(a){var s=Fa();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Fa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var go=`uniform float u_opacity: 1.0;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Qs=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
uniform float u_opacitylinear: 0.0;
uniform float u_dir: 1.0;
varying vec3 v_linear;
varying vec2 v_pos;


void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,e=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

uniform float u_opacitylinear: 0.0;

attribute vec3 a_linear;
varying vec3 v_linear;
varying vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}`,i=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}

`,c=function(a){(0,Zr.Z)(n,a);var s=Lo(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.raisingHeight,u=o===void 0?0:o,d=t.opacity,S=d===void 0?1:d,U=t.opacityLinear,ce=U===void 0?{enable:!1,dir:"in"}:U;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:S})){this.judgeStyleAttributes({opacity:S});var ve=this.layer.getEncodedData(),Je=this.calDataFrame(this.cellLength,ve,this.cellProperties),Ye=Je.data,Kt=Je.width,tr=Je.height;this.rowCount=tr,this.dataTexture=this.cellLength>0&&Ye.length>0?this.createTexture2D({flipY:!0,data:Ye,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:Kt,height:tr}):this.createTexture2D({flipY:!0,data:[1],format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(u),u_opacity:(0,at.isNumber)(S)?S:1,u_opacitylinear:Number(ce.enable),u_dir:ce.dir==="in"?1:0}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn;return we().wrap(function(hi){for(;;)switch(hi.prev=hi.next){case 0:return u=this.getModelParams(),d=u.frag,S=u.vert,U=u.triangulation,ce=u.type,ve=this.layer.getLayerConfig(),Je=ve.mask,Ye=Je===void 0?!1:Je,Kt=ve.maskInside,tr=Kt===void 0?!0:Kt,Fr=ve.workerEnabled,Kr=Fr===void 0?!1:Fr,hn=ve.enablePicking,this.layer.triangulation=U,hi.next=5,this.layer.buildLayerModel({moduleName:ce,vertexShader:S,fragmentShader:d,triangulation:U,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(Ye,tr),workerEnabled:Kr,workerOptions:{modelType:ce,enablePicking:hn}});case 5:return sn=hi.sent,hi.abrupt("return",[sn]);case 7:case"end":return hi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.dataTexture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig(),o=t.opacityLinear,u=o===void 0?{enable:!1,dir:"in"}:o;u.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Ee.GC.Attribute,descriptor:{name:"a_linear",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(S,U,ce){return[ce[3],ce[4],ce[5]]}}})}},{key:"getModelParams",value:function(){var t=this.layer.getLayerConfig(),o=t.opacityLinear,u=o===void 0?{enable:!1}:o;return u.enable?{frag:Qs,vert:e,type:"polygonLinear",triangulation:vo}:{frag:go,vert:i,type:"polygonFill",triangulation:Ge.yR}}}]),n}(nu);function y(a){var s=I();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var H=`
uniform float u_time: 0.0;
uniform float u_opacity: 1.0;

varying vec2 v_uv;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;
// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)
// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)
uniform vec4 u_watercolor;
uniform vec4 u_watercolor2;
vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture2D(u_texture2,p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture2D(u_texture1,fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    

  float opacity = u_opacity;
  gl_FragColor = vec4(col, opacity);  
}
`,Q=`attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,ge=function(a){(0,Zr.Z)(n,a);var s=y(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.watercolor,S=d===void 0?"#6D99A8":d,U=t.watercolor2,ce=U===void 0?"#0F121C":U;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:(0,Ge.CI)(S),u_watercolor2:(0,Ge.CI)(ce),u_opacity:(0,at.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:Q,fragmentShader:H,triangulation:Ls,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o,u;(t=this.texture1)===null||t===void 0||t.destroy(),(o=this.texture2)===null||o===void 0||o.destroy(),(u=this.texture3)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,o=(0,oi.Z)(t,4),u=o[0],d=o[1],S=o[2],U=o[3],ce=S-u,ve=U-d;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Ee.GC.Attribute,descriptor:{name:"a_uv",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(Ye,Kt,tr,Fr){var Kr=Ye.version===fl.G["GAODE2.x"]?Ye.originCoordinates[0][Fr]:tr,hn=(0,oi.Z)(Kr,2),sn=hn[0],Yn=hn[1];return[(sn-u)/ce,(Yn-d)/ve]}}})}},{key:"loadTexture",value:function(){var t=this,o=this.rendererService.createTexture2D,u={height:0,width:0};this.texture1=o(u),this.texture2=o(u),this.texture3=o(u),d(function(U){t.texture1=S(U[0]),t.texture2=S(U[1]),t.texture3=S(U[2]),t.layerService.reRender()});function d(U){var ce=0,ve=[],Je=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];Je.map(function(Ye){var Kt=new Image;Kt.crossOrigin="",Kt.src=Ye,ve.push(Kt),Kt.onload=function(){ce++,ce===3&&U(ve)}})}function S(U){return o({data:U,width:U.width,height:U.height,wrapS:Ee.gl.MIRRORED_REPEAT,wrapT:Ee.gl.MIRRORED_REPEAT,min:Ee.gl.LINEAR,mag:Ee.gl.LINEAR})}}}]),n}(nu);function tt(a){var s=Rt();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Rt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ft=`uniform sampler2D u_texture;
uniform float u_time: 0.0;
uniform float u_speed: 1.0;
uniform float u_opacity: 1.0;

varying vec4 v_Color;
varying vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {
  float opacity = u_opacity;
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;

  float spc = calSpc();
  gl_FragColor += spc * 0.4;
}
`,Jt=`attribute vec4 a_Color;
attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
varying vec2 v_uv;
uniform float u_opacity: 1.0;


#pragma include "projection"

void main() {
  v_uv = a_uv;

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,dr=function(a){(0,Zr.Z)(n,a);var s=tt(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.speed,S=d===void 0?.5:d;return{u_texture:this.texture,u_speed:S,u_opacity:(0,at.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadTexture(),d.abrupt("return",this.buildModels());case 2:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,Ye.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:Jt,fragmentShader:Ft,triangulation:Ls,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},stencil:(0,Ge.Vi)(S,ce)});case 3:return ve=Ye.sent,Ye.abrupt("return",[ve]);case 5:case"end":return Ye.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,o=(0,oi.Z)(t,4),u=o[0],d=o[1],S=o[2],U=o[3],ce=S-u,ve=U-d;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Ee.GC.Attribute,descriptor:{name:"a_uv",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(Ye,Kt,tr,Fr){var Kr=Ye.version===fl.G["GAODE2.x"]?Ye.originCoordinates[0][Fr]:tr,hn=(0,oi.Z)(Kr,2),sn=hn[0],Yn=hn[1];return[(sn-u)/ce,(Yn-d)/ve]}}})}},{key:"loadTexture",value:function(){var t=this,o=this.layer.getLayerConfig(),u=o.waterTexture,d=this.rendererService.createTexture2D;this.texture=d({height:0,width:0});var S=new Image;S.crossOrigin="",u?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),S.src=u):S.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",S.onload=function(){t.texture=d({data:S,width:S.width,height:S.height,wrapS:Ee.gl.MIRRORED_REPEAT,wrapT:Ee.gl.MIRRORED_REPEAT,min:Ee.gl.LINEAR,mag:Ee.gl.LINEAR}),t.layerService.reRender()}}}]),n}(nu),Cr={fill:c,line:Fs,extrude:la,text:_t,point_fill:Bl,point_image:fu,point_normal:Ru,point_extrude:so,water:dr,ocean:ge},tn=Cr;function rn(a){var s=yn();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function yn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var vn=function(a){(0,Zr.Z)(n,a);var s=rn(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","PolygonLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new tn[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(t=o.scale)===null||t===void 0?void 0:t.field;return u==="fill"?"fill":u==="extrude"?"extrude":u==="water"?"water":u==="ocean"?"ocean":u==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var t=this.getEncodedData(),o=this.getLayerConfig(),u=o.shape2d,d=o.shape3d,S=this.iconService.getIconMap(),U=t.find(function(ve){return ve.hasOwnProperty("shape")});if(U){var ce=U.shape;return ce==="dot"?"point_normal":(u==null?void 0:u.indexOf(ce))!==-1?"point_fill":(d==null?void 0:d.indexOf(ce))!==-1?"point_extrude":S.hasOwnProperty(ce)?"point_image":"text"}else return"fill"}}]),n}(eu);function $n(a){var s=ri();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ri(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var _i=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;
bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }


void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value))
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
   
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }
}
`,xi=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Ii=function(a){(0,Zr.Z)(n,a);var s=$n(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.clampLow,S=d===void 0?!0:d,U=t.clampHigh,ce=U===void 0?!0:U,ve=t.noDataValue,Je=ve===void 0?-9999999:ve,Ye=t.domain,Kt=t.rampColors,tr=Ye||(0,Ge.ZB)(Kt);return this.colorTexture=this.layer.textureService.getColorTexture(Kt,tr),{u_opacity:u||1,u_texture:this.texture,u_domain:tr,u_clampLow:S,u_clampHigh:typeof ce!="undefined"?ce:S,u_noDataValue:Je,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var r=(0,$t.Z)(we().mark(function o(u){var d,S,U,ce;return we().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(!Array.isArray(u.data)){Je.next=4;break}return Je.abrupt("return",{data:u.data,width:u.width,height:u.height});case 4:return Je.next=6,u.data;case 6:return d=Je.sent,S=d.rasterData,U=d.width,ce=d.height,Je.abrupt("return",{data:Array.from(S),width:U,height:ce});case 11:case"end":return Je.stop()}},o)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn;return we().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=this.layer.getSource(),Je=this.rendererService.createTexture2D,Ye=ve.data.dataArray[0],Yn.next=6,this.getRasterData(Ye);case 6:return Kt=Yn.sent,tr=Kt.data,Fr=Kt.width,Kr=Kt.height,this.texture=Je({data:tr,width:Fr,height:Kr,format:Ee.gl.LUMINANCE,type:Ee.gl.FLOAT}),Yn.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:xi,fragmentShader:_i,triangulation:Jo,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},stencil:(0,Ge.Vi)(S,ce)});case 13:return hn=Yn.sent,Yn.abrupt("return",[hn]);case 15:case"end":return Yn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.colorTexture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu),ta=["data"],Qi=["rasterData"];function ja(a){var s=qn();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function qn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ca=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,ra=`precision mediump float;
uniform vec2 u_rminmax: vec2(0,255); 
uniform vec2 u_gminmax: vec2(0,255);
uniform vec2 u_bminmax: vec2(0,255);
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform float u_noDataValue : 0.0;
varying vec2 v_texCoord;

void main() {
  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;
  if(rgb == vec3(u_noDataValue)) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
 
}`,bo=function(a){(0,Zr.Z)(n,a);var s=ja(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"dataOption",{}),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o,d=t.noDataValue,S=d===void 0?0:d,U=this.dataOption,ce=U.rMinMax,ve=U.gMinMax,Je=U.bMinMax;return{u_opacity:u||1,u_texture:this.texture,u_noDataValue:S,u_rminmax:ce,u_gminmax:ve,u_bminmax:Je}}},{key:"getRasterData",value:function(){var r=(0,$t.Z)(we().mark(function o(u){var d,S,U,ce,ve;return we().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(!Array.isArray(u.data)){Ye.next=4;break}return d=u.data,S=(0,ls.Z)(u,ta),this.dataOption=S,Ye.abrupt("return",(0,Ne.Z)({data:d},S));case 4:return Ye.next=6,u.data;case 6:if(U=Ye.sent,ce=U.rasterData,ve=(0,ls.Z)(U,Qi),this.dataOption=ve,!Array.isArray(ce)){Ye.next=14;break}return Ye.abrupt("return",(0,Ne.Z)({data:ce},ve));case 14:return Ye.abrupt("return",(0,Ne.Z)({data:Array.from(ce)},ve));case 15:case"end":return Ye.stop()}},o,this)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn;return we().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=this.layer.getSource(),Je=this.rendererService.createTexture2D,Ye=ve.data.dataArray[0],Yn.next=6,this.getRasterData(Ye);case 6:return Kt=Yn.sent,tr=Kt.data,Fr=Kt.width,Kr=Kt.height,this.texture=Je({data:tr,width:Fr,height:Kr,format:Ee.gl.RGB,type:Ee.gl.FLOAT}),Yn.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:ca,fragmentShader:ra,triangulation:Jo,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},stencil:(0,Ge.Vi)(S,ce)});case 13:return hn=Yn.sent,Yn.abrupt("return",[hn]);case 15:case"end":return Yn.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function Eo(a){var s=qa();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function qa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ss=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;

void main() {
  vec4 baseColor = texture2D(u_texture, vec2(v_texCoord.x, v_texCoord.y)) * 256.0;
  float r = baseColor.r * 256.0 * 256.0;
  float g = baseColor.g * 256.0;
  float b = baseColor.b;
  float value =  (r + g + b) * 0.1 - 10000.0;
  
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture2D(u_colorTexture, vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }
}
`,Is=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,pu=function(a){(0,Zr.Z)(n,a);var s=Eo(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=t.clampLow,d=u===void 0?!0:u,S=t.clampHigh,U=S===void 0?!0:S,ce=t.noDataValue,ve=ce===void 0?-9999999:ce,Je=t.domain,Ye=t.rampColors,Kt=t.colorTexture,tr=Je||(0,Ge.ZB)(Ye),Fr=Kt;return Kt?this.layer.textureService.setColorTexture(Kt,Ye,tr):Fr=this.layer.textureService.getColorTexture(Ye,tr),{u_opacity:o||1,u_texture:this.texture,u_domain:tr,u_clampLow:d,u_clampHigh:typeof U!="undefined"?U:d,u_noDataValue:ve,u_colorTexture:Fr}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye,Kt;return we().wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:return u=this.layer.getLayerConfig(),d=u.mask,S=d===void 0?!1:d,U=u.maskInside,ce=U===void 0?!0:U,ve=this.layer.getSource(),Je=this.rendererService.createTexture2D,Fr.next=5,ve.data.images;case 5:return Ye=Fr.sent,this.texture=Je({data:Ye[0],width:Ye[0].width,height:Ye[0].height}),Fr.next=9,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:Is,fragmentShader:Ss,triangulation:Jo,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:(0,Ge.Vi)(S,ce)});case 9:return Kt=Fr.sent,Fr.abrupt("return",[Kt]);case 11:case"end":return Fr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t;(t=this.texture)===null||t===void 0||t.destroy()}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu),es={raster:Ii,rasterRgb:bo,raster3d:Ii,rasterTerrainRgb:pu},$u=es;function hl(a){var s=Nl();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Nl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var el=function(a){(0,Zr.Z)(n,a);var s=hl(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","RasterLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new $u[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return o[t]}},{key:"getModelType",value:function(){var t=this.layerSource.getParserType();switch(t){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),n}(eu);function af(a){var s=gf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function gf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zf=function(a){(0,Zr.Z)(n,a);var s=af(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","TileDebugLayer"),(0,X.Z)((0,lr.Z)(r),"zIndex",1e4),(0,X.Z)((0,lr.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"testTile"}}}),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return");case 1:case"end":return d.stop()}},o)}));function t(){return r.apply(this,arguments)}return t}()}]),n}(eu);function Th(a){var s=ed();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function ed(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Zf=`
uniform float u_opacity;
uniform vec3 u_CameraPosition;

varying vec3 vVertexNormal;
varying float v_offset;
varying vec4 v_Color;
void main() {
    
    
    // float intensity = pow(0.5 + dot(normalize(vVertexNormal), normalize(u_CameraPosition)), 3.0);
    float intensity = pow(v_offset + dot(normalize(vVertexNormal), normalize(u_CameraPosition)), 3.0);
    // \u53BB\u9664\u80CC\u9762
    if(intensity > 1.0) intensity = 0.0;

    gl_FragColor = vec4(v_Color.rgb, v_Color.a * intensity * u_opacity);
}
`,iu=`
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute vec2 a_Uv;
attribute vec4 a_Color;
uniform vec3 u_CameraPosition;
varying float v_CamreaDistance;

uniform mat4 u_ViewProjectionMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_ViewMatrix;

varying vec3 vVertexNormal;
varying vec4 v_Color;
varying float v_offset;

void main() {
    float EARTH_RADIUS = 100.0;
    
    v_Color = a_Color;

    v_offset = min(((length(u_CameraPosition) - EARTH_RADIUS)/600.0) * 0.5 + 0.4, 1.0);
    vVertexNormal = a_Normal;

    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);
}
`,Uf=function(a){(0,Zr.Z)(n,a);var s=Th(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o;return{u_opacity:(0,at.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.zIndex=-997,S.next=3,this.layer.buildLayerModel({moduleName:"earthAtmoSphere",vertexShader:iu,fragmentShader:Zf,triangulation:qu,depth:{enable:!1},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function xh(a){var s=Lu();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Lu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var cl=`
uniform sampler2D u_texture;

varying vec2 v_texCoord;
varying float v_lightWeight;


void main() {

    vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
    color.xyz = color.xyz * v_lightWeight;
    gl_FragColor = color;
}
`,sl=`// attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute vec2 a_Uv;
varying vec2 v_texCoord;

// attribute vec2 a_Extrude;
// attribute float a_Size;
// attribute float a_Shape;

uniform vec3 u_CameraPosition;
uniform mat4 u_ViewProjectionMatrix;
uniform mat4 u_ModelMatrix;
uniform float u_ambientRatio : 0.5;
uniform float u_diffuseRatio : 0.3;
uniform float u_specularRatio : 0.2;
uniform vec3 u_sunLight: [1.0, -10.5, 12.0];



float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;

    // cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(u_sunLight);

    vec3 halfDir = normalize(viewDir+lightDir);
    // lambert
    float lambert = dot(worldNormal, lightDir);
    // specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
    //sum to light weight
    float lightWeight = u_ambientRatio + u_diffuseRatio * lambert + u_specularRatio * specular;

    return lightWeight;
}

varying float v_lightWeight;
void main() {

    v_texCoord = a_Uv;

    float lightWeight = calc_lighting(vec4(a_Position, 1.0));
    v_lightWeight = lightWeight;

    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);
}
`,Wu=function(a){(0,Zr.Z)(n,a);var s=xh(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"earthTime",3.4),(0,X.Z)((0,lr.Z)(r),"sunX",1e3),(0,X.Z)((0,lr.Z)(r),"sunY",1e3),(0,X.Z)((0,lr.Z)(r),"sunZ",1e3),(0,X.Z)((0,lr.Z)(r),"sunRadius",Math.sqrt(r.sunX*r.sunX+r.sunY*r.sunY+r.sunZ*r.sunZ)),r}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.animateOption,u=t.globalOptions;return o!=null&&o.enable&&(this.mapService.rotateY({reg:.002}),this.earthTime+=.02,this.sunY=10,this.sunX=Math.cos(this.earthTime)*(this.sunRadius-this.sunY),this.sunZ=Math.sin(this.earthTime)*(this.sunRadius-this.sunY)),{u_ambientRatio:(u==null?void 0:u.ambientRatio)||.6,u_diffuseRatio:(u==null?void 0:u.diffuseRatio)||.4,u_specularRatio:(u==null?void 0:u.specularRatio)||.1,u_sunLight:[this.sunX,this.sunY,this.sunZ],u_texture:this.texture}}},{key:"setEarthTime",value:function(t){this.earthTime=t,this.sunY=10,this.sunX=Math.cos(this.earthTime)*(this.sunRadius-this.sunY),this.sunZ=Math.sin(this.earthTime)*(this.sunRadius-this.sunY),this.layerService.throttleRenderLayers()}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce;return we().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return d=this.layer.getLayerConfig(),S=d.globalOptions,(S==null?void 0:S.earthTime)!==void 0&&this.setEarthTime(S.earthTime),U=this.layer.getSource(),ce=this.rendererService.createTexture2D,this.texture=ce({height:0,width:0}),U.data.images.then(function(Ye){u.texture=ce({data:Ye[0],width:Ye[0].width,height:Ye[0].height}),u.layerService.reRender()}),Je.abrupt("return",this.buildModels());case 7:case"end":return Je.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.zIndex=-998,S.next=3,this.layer.buildLayerModel({moduleName:"earthBase",vertexShader:sl,fragmentShader:cl,triangulation:qu,depth:{enable:!0},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function td(a){var s=Jf();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Rc=`
uniform float u_opacity;
uniform vec3 u_CameraPosition;
varying vec3 vVertexNormal;

varying vec4 v_Color;
void main() {


    float intensity =  - dot(normalize(vVertexNormal), normalize(u_CameraPosition));
    // \u53BB\u9664\u80CC\u9762
    if(intensity > 1.0) intensity = 0.0;

    gl_FragColor = vec4(v_Color.rgb, v_Color.a * intensity * u_opacity);
}
`,$f=`
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute vec2 a_Uv;
attribute vec4 a_Color;
uniform vec3 u_CameraPosition;
uniform mat4 u_ViewProjectionMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_ViewMatrix;

varying vec3 vVertexNormal;
varying vec4 v_Color;

void main() {
    v_Color = a_Color;

    vVertexNormal = a_Normal;

    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);
}
`,rd=function(a){(0,Zr.Z)(n,a);var s=td(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?1:o;return{u_opacity:(0,at.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return this.layer.zIndex=-999,S.next=3,this.layer.buildLayerModel({moduleName:"earthBloom",vertexShader:$f,fragmentShader:Rc,triangulation:Tc,depth:{enable:!1},blend:this.getBlend()});case 3:return u=S.sent,S.abrupt("return",[u]);case 5:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ee.GC.Attribute,descriptor:{name:"a_Size",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(o){var u=o.size,d=u===void 0?1:u;return Array.isArray(d)?[d[0]]:[d]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ee.GC.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Ee.gl.STATIC_DRAW,data:[],type:Ee.gl.FLOAT},size:3,update:function(o,u,d,S,U){return U}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}}]),n}(nu);function wl(a){var s=Mh();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Mh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var fd={base:Wu,atomSphere:Uf,bloomSphere:rd},Wd=["base","atomSphere","bloomSphere"],oc=function(a){(0,Zr.Z)(n,a);var s=wl(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","EarthLayer"),(0,X.Z)((0,lr.Z)(r),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new fd[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"setEarthTime",value:function(t){this.layerModel&&this.layerModel.setEarthTime?this.layerModel.setEarthTime(t):console.warn("\u8BF7\u5728 scene loaded \u4E4B\u540E\u6267\u884C\u8BE5\u65B9\u6CD5\uFF01")}},{key:"getModelType",value:function(){var t,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=(o==null||(t=o.scale)===null||t===void 0?void 0:t.field)||"base";return Wd.indexOf(u)<0&&(u="base"),u}}]),n}(eu);function Ou(a){var s=Od();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Od(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Wh=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,yf=`attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,Ep=function(a){(0,Zr.Z)(n,a);var s=Ou(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),o=t.opacity,u=o===void 0?0:o,d=t.color,S=d===void 0?"#000":d;return{u_opacity:(0,at.isNumber)(u)?u:0,u_color:(0,Ge.CI)(S)}}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.buildModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:yf,fragmentShader:Wh,triangulation:Ls,depth:{enable:!1},blend:this.getBlend(),stencil:{enable:!0,mask:255,func:{cmp:Ee.gl.ALWAYS,ref:1,mask:255},opFront:{fail:Ee.gl.REPLACE,zfail:Ee.gl.REPLACE,zpass:Ee.gl.REPLACE}},pick:!1});case 2:return u=S.sent,S.abrupt("return",[u]);case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;t&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(nu),bd={fill:Ep},ml=bd;function vc(a){var s=vd();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function vd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Ad=function(a){(0,Zr.Z)(n,a);var s=vc(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","MaskLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new ml[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getModelType",value:function(){return"fill"}}]),n}(eu);function Fd(a,s,n){var r=yp(a,a.VERTEX_SHADER,s),t=yp(a,a.FRAGMENT_SHADER,n);if(!r||!t)return null;var o=a.createProgram();if(!o)return null;a.attachShader(o,r),a.attachShader(o,t),a.linkProgram(o);var u=a.getProgramParameter(o,a.LINK_STATUS);if(!u){var d=a.getProgramInfoLog(o);return console.warn("Failed to link program: "+d),a.deleteProgram(o),a.deleteShader(t),a.deleteShader(r),null}for(var S=a.getProgramParameter(o,a.ACTIVE_ATTRIBUTES),U=0;U<S;U++){var ce=a.getActiveAttrib(o,U);o[ce.name]=a.getAttribLocation(o,ce.name)}for(var ve=a.getProgramParameter(o,a.ACTIVE_UNIFORMS),Je=0;Je<ve;Je++){var Ye=a.getActiveUniform(o,Je);o[Ye.name]=a.getUniformLocation(o,Ye.name)}return o.vertexShader=r,o.fragmentShader=t,o}function yp(a,s,n){var r=a.createShader(s);if(r==null)return console.warn("unable to create shader"),null;a.shaderSource(r,n),a.compileShader(r);var t=a.getShaderParameter(r,a.COMPILE_STATUS);if(!t){var o=a.getShaderInfoLog(r);return console.warn("Failed to compile shader: "+o),a.deleteShader(r),null}return r}function Ph(a,s,n,r,t){var o=a.createTexture();return a.bindTexture(a.TEXTURE_2D,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r,t,0,a.RGBA,a.UNSIGNED_BYTE,n),a.bindTexture(a.TEXTURE_2D,null),o}function Ed(a,s,n){var r=a.createTexture();return a.bindTexture(a.TEXTURE_2D,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,n),a.bindTexture(a.TEXTURE_2D,null),r}function Bd(a,s,n){a.activeTexture(a.TEXTURE0+n),a.bindTexture(a.TEXTURE_2D,s)}function Jd(a,s){var n=a.createBuffer();return a.bindBuffer(a.ARRAY_BUFFER,n),a.bufferData(a.ARRAY_BUFFER,s,a.STATIC_DRAW),n}function qf(a,s,n,r,t){var o=a.createBuffer();o||console.warn("failed create vertex buffer"),a.bindBuffer(a.ARRAY_BUFFER,o),a.bufferData(a.ARRAY_BUFFER,n,a.STATIC_DRAW);var u=a.getAttribLocation(t,s);return a.vertexAttribPointer(u,r,a.FLOAT,!1,0,0),a.enableVertexAttribArray(u),a.bindBuffer(a.ARRAY_BUFFER,null),{buffer:o,attr:u,count:r}}function bh(a,s){var n=a.createBuffer();return n?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n),a.bufferData(a.ELEMENT_ARRAY_BUFFER,s,a.STATIC_DRAW)):console.warn("failed create vertex buffer"),n}function Bv(a,s,n,r,t){var o=a.getUniformLocation(r,s);return o===null||o<0?console.warn("\u65E0\u6CD5\u83B7\u53D6 uniform \u53D8\u91CF\u7684\u5B58\u50A8\u4F4D\u7F6E"):nv(a,o,n,t),o}function nv(a,s,n,r){switch(r){case"float":a.uniform1f(s,n);break;case"vec2":a.uniform2fv(s,n);break;case"vec3":a.uniform3fv(s,n);break;case"vec4":a.uniform4fv(s,n);break;case"bool":a.uniform1i(s,n);break;case"sampler2d":break;case"mat4":a.uniformMatrix4fv(s,!1,n);break}}function iv(a){var s=a.drawingBufferWidth,n=a.drawingBufferHeight,r=s,t=n,o=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,o);var u=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,u),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r,t),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,u);var d=a.createTexture();return o.texture=d,o.width=r,o.height=t,a.bindTexture(a.TEXTURE_2D,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r,t,0,a.RGBA,a.UNSIGNED_BYTE,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,d,0),a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null),{FRAMEBUFFER:o,OFFER_SCREEN_WIDTH:r,OFFER_SCREEN_HEIGHT:t}}var av=`
 precision mediump float;

 attribute float a_index;

 uniform sampler2D u_particles;
 uniform float u_particles_res;

 varying vec2 v_particle_pos;

 void main() {
     vec4 color = texture2D(u_particles, vec2(
         fract(a_index / u_particles_res),
         floor(a_index / u_particles_res) / u_particles_res)
     );

     // decode current particle position from the pixel's RGBA value
     v_particle_pos = vec2( color.r / 255.0 + color.b, color.g / 255.0 + color.a);

     gl_PointSize = 1.0;
     gl_Position = vec4(2.0 * v_particle_pos.x - 1.0, 1.0 - 2.0 * v_particle_pos.y, 0, 1);
 }`,ov=`
 precision mediump float;

 uniform sampler2D u_wind;
 uniform vec2 u_wind_min;
 uniform vec2 u_wind_max;
 uniform sampler2D u_color_ramp;

 varying vec2 v_particle_pos;

 void main() {
     vec2 velocity = mix(u_wind_min, u_wind_max, texture2D(u_wind, v_particle_pos).rg);
     float speed_t = length(velocity) / length(u_wind_max);

     // color ramp is encoded in a 16x16 texture
     vec2 ramp_pos = vec2( fract(16.0 * speed_t), floor(16.0 * speed_t) / 16.0);

     gl_FragColor = texture2D(u_color_ramp, ramp_pos);
 }`,sv=`
 precision mediump float;

 attribute vec2 a_pos;

 varying vec2 v_tex_pos;

 void main() {
     v_tex_pos = a_pos;
     gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);
     // framebuffer \u59CB\u7EC8\u7528\u94FA\u6EE1\u5C4F\u5E55\u7684 texture
 }`,Nd=`
 precision highp float;

 uniform sampler2D u_particles;
 uniform sampler2D u_wind;
 uniform vec2 u_wind_res;
 uniform vec2 u_wind_min;
 uniform vec2 u_wind_max;
 uniform float u_rand_seed;
 uniform float u_speed_factor;
 uniform float u_drop_rate;
 uniform float u_drop_rate_bump;

 varying vec2 v_tex_pos;

 // pseudo-random generator
 const vec3 rand_constants = vec3(12.9898, 78.233, 4375.85453);
 float rand(const vec2 co) {
 float t = dot(rand_constants.xy, co);
     return fract(sin(t) * (rand_constants.z + t));
 }

 // wind speed lookup; use manual bilinear filtering based on 4 adjacent pixels for smooth interpolation
 vec2 lookup_wind(const vec2 uv) {
     // return texture2D(u_wind, uv).rg; // lower-res hardware filtering
     vec2 px = 1.0 / u_wind_res;
     vec2 vc = (floor(uv * u_wind_res)) * px;
     vec2 f = fract(uv * u_wind_res);
     vec2 tl = texture2D(u_wind, vc).rg;
     vec2 tr = texture2D(u_wind, vc + vec2(px.x, 0)).rg;
     vec2 bl = texture2D(u_wind, vc + vec2(0, px.y)).rg;
     vec2 br = texture2D(u_wind, vc + px).rg;
     return mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);
 }

 void main() {
     vec4 color = texture2D(u_particles, v_tex_pos);
     vec2 pos = vec2(
         color.r / 255.0 + color.b,
         color.g / 255.0 + color.a); // decode particle position from pixel RGBA
     vec2 velocity = mix(u_wind_min, u_wind_max, lookup_wind(pos));
     float speed_t = length(velocity) / length(u_wind_max);

     // take EPSG:4236 distortion into account for calculating where the particle moved
     float distortion = cos(radians(pos.y * 180.0 - 90.0));
     vec2 offset = vec2(velocity.x / distortion, -velocity.y) * 0.0001 * u_speed_factor;

     // update particle position, wrapping around the date line
     pos = fract(1.0 + pos + offset);

     // a random seed to use for the particle drop
     vec2 seed = (pos + v_tex_pos) * u_rand_seed;

     // drop rate is a chance a particle will restart at random position, to avoid degeneration
     float drop_rate = u_drop_rate + speed_t * u_drop_rate_bump;
     float drop = step(1.0 - drop_rate, rand(seed));

     vec2 random_pos = vec2(
         rand(seed + 1.3),
         rand(seed + 2.1));
         pos = mix(pos, random_pos, drop);

     // encode the new particle position back into RGBA
     gl_FragColor = vec4(
         fract(pos * 255.0),
         floor(pos * 255.0) / 255.0);
 }`,uv=`
     precision mediump float;

     attribute vec2 a_pos;

     varying vec2 v_tex_pos;

     void main() {
         v_tex_pos = a_pos;
         gl_Position = vec4(1.0 - 2.0 * a_pos, 0.0, 1.0);
         gl_PointSize = 100.0;
 }`,_p=`
 precision mediump float;

 uniform sampler2D u_screen;
 uniform float u_opacity;
 varying vec2 v_tex_pos;

 void main() {
     vec4 color = texture2D(u_screen, 1.0 - v_tex_pos);

     // a hack to guarantee opacity fade out even with a value close to 1.0
     gl_FragColor = vec4(floor(255.0 * color * u_opacity) / 255.0);
 }`;function Np(a){var s=document.createElement("canvas"),n=s.getContext("2d");s.width=256,s.height=1;for(var r=n.createLinearGradient(0,0,256,0),t=0,o=Object.keys(a);t<o.length;t++){var u=o[t];r.addColorStop(+u,a[+u])}return n.fillStyle=r,n.fillRect(0,0,256,1),s=null,new Uint8Array(n.getImageData(0,0,256,1).data)}function zp(a,s,n,r){a.bindBuffer(a.ARRAY_BUFFER,s),a.enableVertexAttribArray(n),a.vertexAttribPointer(n,r,a.FLOAT,!1,0,0)}function Sp(a,s,n){a.bindFramebuffer(a.FRAMEBUFFER,s),n&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,n,0)}var xp=function(){function a(s){(0,mr.Z)(this,a),(0,X.Z)(this,"width",512),(0,X.Z)(this,"height",512),(0,X.Z)(this,"numParticles",65536),this.gl=s.glContext,this.width=s.imageWidth,this.height=s.imageHeight,this.fadeOpacity=s.fadeOpacity,this.speedFactor=s.speedFactor,this.dropRate=s.dropRate,this.dropRateBump=s.dropRateBump,this.rampColors=s.rampColors,this.init()}return(0,Or.Z)(a,[{key:"init",value:function(){var n=this.gl;this.fadeOpacity=.996,this.speedFactor=.25,this.dropRate=.003,this.dropRateBump=.01,this.drawProgram=Fd(n,av,ov),this.fullScreenProgram=Fd(n,uv,_p),this.updateProgram=Fd(n,sv,Nd),this.quadBuffer=Jd(n,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])),this.framebuffer=n.createFramebuffer(),this.colorRampTexture=Ph(this.gl,this.gl.LINEAR,Np(this.rampColors),16,16);var r=new Uint8Array(this.width*this.height*4);this.backgroundTexture=Ph(n,n.NEAREST,r,this.width,this.height),this.screenTexture=Ph(n,n.NEAREST,r,this.width,this.height);var t=this.particleStateResolution=Math.ceil(Math.sqrt(this.numParticles));this.numParticlesSize=t*t;for(var o=new Uint8Array(this.numParticlesSize*4),u=0;u<o.length;u++)o[u]=Math.floor(Math.random()*256);this.particleStateTexture0=Ph(n,n.NEAREST,o,t,t),this.particleStateTexture1=Ph(n,n.NEAREST,o,t,t);for(var d=new Float32Array(this.numParticlesSize),S=0;S<this.numParticlesSize;S++)d[S]=S;this.particleIndexBuffer=Jd(n,d)}},{key:"setWind",value:function(n){this.windData=n,this.windTexture=Ed(this.gl,this.gl.LINEAR,n.image)}},{key:"updateParticelNum",value:function(n){var r=this.gl;if(n!==this.numParticles){this.numParticles=n;var t=this.particleStateResolution=Math.ceil(Math.sqrt(this.numParticles));this.numParticlesSize=t*t;for(var o=new Uint8Array(this.numParticlesSize*4),u=0;u<o.length;u++)o[u]=Math.floor(Math.random()*256);this.particleStateTexture0=Ph(r,r.NEAREST,o,t,t),this.particleStateTexture1=Ph(r,r.NEAREST,o,t,t);for(var d=new Float32Array(this.numParticlesSize),S=0;S<this.numParticlesSize;S++)d[S]=S;this.particleIndexBuffer=Jd(r,d)}}},{key:"updateWindDir",value:function(n,r,t,o){this.windData.uMin=n,this.windData.uMax=r,this.windData.vMin=t,this.windData.vMax=o}},{key:"updateColorRampTexture",value:function(n){if(this.isColorChanged(n)){this.rampColors=n;var r=this.gl;r.deleteTexture(this.colorRampTexture),this.colorRampTexture=Ph(r,r.LINEAR,Np(n),16,16)}}},{key:"isColorChanged",value:function(n){for(var r=Object.keys(n),t=0,o=r;t<o.length;t++){var u=o[t],d=Number(u);if(!this.rampColors[d]||this.rampColors[d]&&this.rampColors[d]!==n[d])return!0}return!1}},{key:"reSize",value:function(n,r){if(n!==this.width||r!==this.height){var t=this.gl;t.deleteTexture(this.backgroundTexture),t.deleteTexture(this.screenTexture),this.width=n,this.height=r;var o=new Uint8Array(n*r*4);this.backgroundTexture=Ph(t,t.NEAREST,o,n,r),this.screenTexture=Ph(t,t.NEAREST,o,n,r)}}},{key:"draw",value:function(){var n;if((n=this.windData)!==null&&n!==void 0&&n.image){var r=this.gl;return Bd(r,this.windTexture,0),Bd(r,this.particleStateTexture0,1),this.drawScreen(),this.updateParticles(),{d:this.pixels,w:this.width,h:this.height}}else return{d:new Uint8Array([0,0,0,0]),w:1,h:1}}},{key:"drawScreen",value:function(){var n=this.gl;Sp(n,this.framebuffer,this.screenTexture),n.viewport(0,0,this.width,this.height),n.disable(n.BLEND),this.drawFullTexture(this.backgroundTexture,this.fadeOpacity),this.drawParticles(),this.pixels=new Uint8Array(4*this.width*this.height),n.readPixels(0,0,this.width,this.height,n.RGBA,n.UNSIGNED_BYTE,this.pixels),Sp(n,null,null),n.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);var r=this.backgroundTexture;this.backgroundTexture=this.screenTexture,this.screenTexture=r}},{key:"drawFullTexture",value:function(n,r){var t=this.gl,o=this.fullScreenProgram;t.useProgram(o),t.bindBuffer(t.ARRAY_BUFFER,this.quadBuffer),t.vertexAttribPointer(o.a_pos,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o.a_pos),t.bindBuffer(t.ARRAY_BUFFER,null),Bd(t,n,2),t.uniform1i(o.u_screen,2),t.uniform1f(o.u_opacity,r),t.drawArrays(t.TRIANGLES,0,6)}},{key:"drawParticles",value:function(){var n=this.gl,r=this.drawProgram;n.useProgram(r),zp(n,this.particleIndexBuffer,r.a_index,1),Bd(n,this.colorRampTexture,2),n.uniform1i(r.u_wind,0),n.uniform1i(r.u_particles,1),n.uniform1i(r.u_color_ramp,2),n.uniform1f(r.u_particles_res,this.particleStateResolution),n.uniform2f(r.u_wind_min,this.windData.uMin,this.windData.vMin),n.uniform2f(r.u_wind_max,this.windData.uMax,this.windData.vMax),n.drawArrays(n.POINTS,0,this.numParticlesSize)}},{key:"updateParticles",value:function(){var n=this.gl;Sp(n,this.framebuffer,this.particleStateTexture1),n.viewport(0,0,this.particleStateResolution,this.particleStateResolution);var r=this.updateProgram;n.useProgram(r),zp(n,this.quadBuffer,r.a_pos,2),n.uniform1i(r.u_wind,0),n.uniform1i(r.u_particles,1),n.uniform1f(r.u_rand_seed,Math.random()),n.uniform2f(r.u_wind_res,this.windData.image.width*2,this.windData.image.height*2),n.uniform2f(r.u_wind_min,this.windData.uMin,this.windData.vMin),n.uniform2f(r.u_wind_max,this.windData.uMax,this.windData.vMax),n.uniform1f(r.u_speed_factor,this.speedFactor),n.uniform1f(r.u_drop_rate,this.dropRate),n.uniform1f(r.u_drop_rate_bump,this.dropRateBump),n.drawArrays(n.TRIANGLES,0,6);var t=this.particleStateTexture0;this.particleStateTexture0=this.particleStateTexture1,this.particleStateTexture1=t,Sp(n,null,null)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.quadBuffer),this.gl.deleteBuffer(this.particleIndexBuffer),this.gl.deleteFramebuffer(this.framebuffer),this.gl.deleteShader(this.drawProgram.vertexShader),this.gl.deleteShader(this.drawProgram.fragmentShader),this.gl.deleteProgram(this.drawProgram),this.gl.deleteShader(this.fullScreenProgram.vertexShader),this.gl.deleteShader(this.fullScreenProgram.fragmentShader),this.gl.deleteProgram(this.fullScreenProgram),this.gl.deleteShader(this.updateProgram.vertexShader),this.gl.deleteShader(this.updateProgram.fragmentShader),this.gl.deleteProgram(this.updateProgram),this.gl.deleteTexture(this.colorRampTexture),this.gl.deleteTexture(this.backgroundTexture),this.gl.deleteTexture(this.screenTexture),this.gl.deleteTexture(this.particleStateTexture0),this.gl.deleteTexture(this.particleStateTexture1),this.gl.deleteTexture(this.windTexture)}}]),a}();function Td(a){var s=rp();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function rp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var t0=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,F0=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Nv={0:"#3288bd",.1:"#66c2a5",.2:"#abdda4",.3:"#e6f598",.4:"#fee08b",.5:"#fdae61",.6:"#f46d43",1:"#d53e4f"},B0=function(a){(0,Zr.Z)(n,a);var s=Td(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"sizeScale",.5),(0,X.Z)((0,lr.Z)(r),"frequency",new Ge.iH(7.2)),r}return(0,Or.Z)(n,[{key:"render",value:function(){var t=this;this.frequency.run(function(){t.drawWind()}),this.drawColorMode()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U=this,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn,hi,Zi,zi,pa,_o,Co,Ba,ms,au,Al,nd,Ih,Rh,md,hh,tp,Fv,Gp;return we().wrap(function(kp){for(;;)switch(kp.prev=kp.next){case 0:return ce=this.layer.getLayerConfig(),ve=ce.uMin,Je=ve===void 0?-21.32:ve,Ye=ce.uMax,Kt=Ye===void 0?26.8:Ye,tr=ce.vMin,Fr=tr===void 0?-21.57:tr,Kr=ce.vMax,hn=Kr===void 0?21.42:Kr,sn=ce.fadeOpacity,Yn=sn===void 0?.996:sn,hi=ce.speedFactor,Zi=hi===void 0?.25:hi,zi=ce.dropRate,pa=zi===void 0?.003:zi,_o=ce.dropRateBump,Co=_o===void 0?.01:_o,Ba=ce.rampColors,ms=Ba===void 0?Nv:Ba,au=ce.sizeScale,Al=au===void 0?.5:au,nd=ce.mask,Ih=nd===void 0?!1:nd,Rh=ce.maskInside,md=Rh===void 0?!0:Rh,hh=this.rendererService.createTexture2D,tp=this.layer.getSource(),this.texture=hh({height:0,width:0}),this.cacheZoom=Math.floor(this.mapService.getZoom()),Fv=this.rendererService.getGLContext(),this.imageCoords=(u=tp.data)===null||u===void 0?void 0:u.dataArray[0].coordinates,(d=tp.data)===null||d===void 0||(S=d.images)===null||S===void 0||S.then(function(Zh){var Ld;U.sizeScale=Al*U.getZoomScale();var Em=U.getWindSize(),Sm=Em.imageWidth,vu=Em.imageHeight,Vc={glContext:Fv,imageWidth:Sm,imageHeight:vu,fadeOpacity:Yn,speedFactor:Zi,dropRate:pa,dropRateBump:Co,rampColors:ms};U.wind=new xp(Vc),U.wind.setWind({uMin:Je,uMax:Kt,vMin:Fr,vMax:hn,image:Zh[0]}),(Ld=U.texture)===null||Ld===void 0||Ld.destroy(),U.texture=hh({width:Sm,height:vu}),U.layerService.reRender()}),kp.next=10,this.layer.buildLayerModel({moduleName:"wind",vertexShader:F0,fragmentShader:t0,triangulation:Jo,primitive:Ee.gl.TRIANGLES,depth:{enable:!1},stencil:(0,Ge.Vi)(Ih,md),blend:this.getBlend()});case 10:return Gp=kp.sent,this.colorModel=Gp,kp.abrupt("return",[Gp]);case 13:case"end":return kp.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getWindSize",value:function(){var t=this.mapService.lngLatToPixel(this.imageCoords[0]),o=this.mapService.lngLatToPixel(this.imageCoords[1]),u=Math.min(Math.floor((o.x-t.x)*this.sizeScale),2048),d=Math.min(Math.floor((t.y-o.y)*this.sizeScale),2048);return{imageWidth:u,imageHeight:d}}},{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.initModels());case 1:case"end":return d.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t,o;(t=this.texture)===null||t===void 0||t.destroy(),(o=this.wind)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Ee.GC.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:2,update:function(o,u,d){return[d[3],d[4]]}}})}},{key:"getZoomScale",value:function(){return Math.min((this.cacheZoom+4)/30*2,2)}},{key:"drawWind",value:function(){if(this.wind){var t=this.layer.getLayerConfig(),o=t.uMin,u=o===void 0?-21.32:o,d=t.uMax,S=d===void 0?26.8:d,U=t.vMin,ce=U===void 0?-21.57:U,ve=t.vMax,Je=ve===void 0?21.42:ve,Ye=t.numParticles,Kt=Ye===void 0?65535:Ye,tr=t.fadeOpacity,Fr=tr===void 0?.996:tr,Kr=t.speedFactor,hn=Kr===void 0?.25:Kr,sn=t.dropRate,Yn=sn===void 0?.003:sn,hi=t.dropRateBump,Zi=hi===void 0?.01:hi,zi=t.rampColors,pa=zi===void 0?Nv:zi,_o=t.sizeScale,Co=_o===void 0?.5:_o,Ba=Kt,ms=Math.floor(this.mapService.getZoom());if(typeof Co=="number"&&Co!==this.sizeScale||ms!==this.cacheZoom){var au=this.getZoomScale();this.sizeScale=Co,Ba*=au;var Al=this.getWindSize(),nd=Al.imageWidth,Ih=Al.imageHeight;this.wind.reSize(nd,Ih),this.cacheZoom=ms}this.wind.updateWindDir(u,S,ce,Je),this.wind.updateParticelNum(Ba),this.wind.updateColorRampTexture(pa),this.wind.fadeOpacity=Fr,this.wind.speedFactor=hn,this.wind.dropRate=Yn,this.wind.dropRateBump=Zi;var Rh=this.wind.draw(),md=Rh.d,hh=Rh.w,tp=Rh.h;this.rendererService.setBaseState(),this.texture.update({data:md,width:hh,height:tp})}}},{key:"drawColorMode",value:function(){var t,o=this.layer.getLayerConfig(),u=o.opacity;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),this.layerService.renderMask(this.layer.masks),(t=this.colorModel)===null||t===void 0||t.draw({uniforms:{u_opacity:u||1,u_texture:this.texture}}),this.layer.hooks.afterRender.call()}}]),n}(nu),lv={wind:B0},N0=lv;function qd(a){var s=Js();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Js(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var np=function(a){(0,Zr.Z)(n,a);var s=qd(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","WindLayer"),r}return(0,Or.Z)(n,[{key:"buildModels",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=this.getModelType(),this.layerModel=new N0[u](this),S.next=4,this.initLayerModels();case 4:case"end":return S.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"renderModels",value:function(){return this.layerModel&&this.layerModel.render(),this}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),o={wind:{}};return o[t]}},{key:"getModelType",value:function(){return"wind"}}]),n}(eu),Xd,ip,zv,of,Zp,ap,Pp,cv=(Xd=(0,ba.b2)(),ip=(0,ba.f3)(Ee.vK.IMapService),zv=(0,ba.f3)(Ee.vK.IFontService),Xd(of=(Zp=function(){function a(){(0,mr.Z)(this,a),(0,Ul.Z)(this,"mapService",ap,this),(0,Ul.Z)(this,"fontService",Pp,this)}return(0,Or.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("DataMappingPlugin",(0,$t.Z)(we().mark(function u(){return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:n.log(Ee.Or.MappingStart,Ee.KD.INIT),t.generateMaping(n,{styleAttributeService:o}),n.log(Ee.Or.MappingEnd,Ee.KD.INIT);case 3:case"end":return S.stop()}},u)}))),n.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var u=(0,$t.Z)(we().mark(function d(S){var U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(S){ve.next=2;break}return ve.abrupt("return",S);case 2:return n.dataState.dataMappingNeedUpdate=!1,n.log(Ee.Or.MappingStart,Ee.KD.UPDATE),U=t.generateMaping(n,{styleAttributeService:o}),n.log(Ee.Or.MappingEnd,Ee.KD.UPDATE),ve.abrupt("return",U);case 7:case"end":return ve.stop()}},d)}));return function(d){return u.apply(this,arguments)}}()),n.hooks.beforeRender.tap("DataMappingPlugin",function(){var u=n.getSource();if(!(n.layerModelNeedUpdate||!u||!u.inited)){var d=o.getLayerStyleAttributes()||[],S=o.getLayerStyleAttribute("filter"),U=u.data.dataArray;if(!(Array.isArray(U)&&U.length===0)){var ce=d.filter(function(Ye){return Ye.needRemapping}),ve=U;if(S!=null&&S.needRemapping&&S!==null&&S!==void 0&&S.scale&&(ve=U.filter(function(Ye){return t.applyAttributeMapping(S,Ye)[0]})),ce.length){var Je=t.mapping(n,ce,ve,n.getEncodedData());n.setEncodedData(Je)}}}})}},{key:"generateMaping",value:function(n,r){var t=this,o=r.styleAttributeService,u=o.getLayerStyleAttributes()||[],d=o.getLayerStyleAttribute("filter"),S=n.getSource().data.dataArray,U=S;d!=null&&d.scale&&(U=S.filter(function(ve){return t.applyAttributeMapping(d,ve)[0]})),U=n.processData(U);var ce=this.mapping(n,u,U,void 0);return n.setEncodedData(ce),S.length===0&&n.encodeDataLength===0?!1:(n.emit("dataUpdate",null),!0)}},{key:"mapping",value:function(n,r,t,o){var u=this,d=n.getLayerConfig(),S=d.arrow,U=S===void 0?{enable:!1}:S,ce=r.filter(function(Je){return Je.scale!==void 0}).filter(function(Je){return Je.name!=="filter"}),ve=t.map(function(Je,Ye){var Kt=o?o[Ye]:{},tr=(0,Ne.Z)({id:Je._id,coordinates:Je.coordinates},Kt);if(ce.forEach(function(hn){var sn=u.applyAttributeMapping(hn,Je);hn.name==="color"&&(sn=sn.map(function(Yn){return(0,Ge.CI)(Yn)})),tr[hn.name]=Array.isArray(sn)&&sn.length===1?sn[0]:sn,hn.name==="shape"&&(tr.shape=u.fontService.getIconFontKey(tr[hn.name]))}),U.enable&&(tr.shape==="line"||tr.shape==="halfLine")){var Fr=tr.coordinates;if(n.arrowInsertCount<n.encodeDataLength){var Kr=u.getArrowPoints(Fr[0],Fr[1]);tr.coordinates.splice(1,0,Kr,Kr),n.arrowInsertCount++}}return tr});return r.forEach(function(Je){Je.needRemapping=!1}),this.adjustData2Amap2Coordinates(ve,n),this.adjustData2SimpleCoordinates(ve),ve}},{key:"adjustData2Amap2Coordinates",value:function(n,r){var t=this;if(n.length>0&&this.mapService.version===fl.G["GAODE2.x"]){var o=r.coordCenter||r.getSource().center;typeof n[0].coordinates[0]=="number"?n.filter(function(u){return!u.originCoordinates}).map(function(u){u.version=fl.G["GAODE2.x"],u.originCoordinates=(0,at.cloneDeep)(u.coordinates),u.coordinates=t.mapService.lngLatToCoordByLayer(u.coordinates,o)}):n.filter(function(u){return!u.originCoordinates}).map(function(u){u.version=fl.G["GAODE2.x"],u.originCoordinates=(0,at.cloneDeep)(u.coordinates),u.coordinates=t.mapService.lngLatToCoordsByLayer(u.coordinates,o)})}}},{key:"adjustData2SimpleCoordinates",value:function(n){var r=this;n.length>0&&this.mapService.version===fl.G.SIMPLE&&n.map(function(t){t.simpleCoordinate||(t.coordinates=r.unProjectCoordinates(t.coordinates),t.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(n){var r=this;if(typeof n[0]=="number")return this.mapService.simpleMapCoord.unproject(n);if(n[0]&&n[0][0]instanceof Array){var t=[];return n.map(function(u){var d=[];u.map(function(S){d.push(r.mapService.simpleMapCoord.unproject(S))}),t.push(d)}),t}else{var o=[];return n.map(function(u){o.push(r.mapService.simpleMapCoord.unproject(u))}),o}}},{key:"applyAttributeMapping",value:function(n,r){var t;if(!n.scale)return[];var o=(n==null||(t=n.scale)===null||t===void 0?void 0:t.scalers)||[],u=[];o.forEach(function(S){var U,ce=S.field;(r.hasOwnProperty(ce)||((U=n.scale)===null||U===void 0?void 0:U.type)==="variable")&&u.push(r[ce])});var d=n.mapping?n.mapping(u):[];return d}},{key:"getArrowPoints",value:function(n,r){var t=[r[0]-n[0],r[1]-n[1]],o=(0,Ge.Fv)(t),u=[n[0]+o[0]*1e-4,n[1]+o[1]*1e-4];return u}}]),a}(),ap=(0,Rl.Z)(Zp.prototype,"mapService",[ip],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pp=(0,Rl.Z)(Zp.prototype,"fontService",[zv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zp))||of),fv,hv,r0=(fv=(0,ba.b2)(),fv(hv=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n){var r=this;this.mapService=n.getContainer().get(Ee.vK.IMapService),n.hooks.init.tapPromise("DataSourcePlugin",(0,$t.Z)(we().mark(function t(){var o,u,d,S;return we().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(n.log(Ee.Or.SourceInitStart,Ee.KD.INIT),o=n.getSource(),o||(u=n.sourceOption||n.defaultSourceConfig,d=u.data,S=u.options,o=new Ko(d,S),n.setSource(o)),!o.inited){ce.next=8;break}r.updateClusterData(n),n.log(Ee.Or.SourceInitEnd,Ee.KD.INIT),ce.next=10;break;case 8:return ce.next=10,new Promise(function(ve){o.on("update",function(Je){Je.type==="inited"&&(r.updateClusterData(n),n.log(Ee.Or.SourceInitEnd,Ee.KD.INIT)),ve(null)})});case 10:case"end":return ce.stop()}},t)}))),n.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,$t.Z)(we().mark(function t(){var o,u,d;return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return o=r.updateClusterData(n),u=n.dataState.dataSourceNeedUpdate,n.dataState.dataSourceNeedUpdate=!1,d=o||u,U.abrupt("return",d);case 5:case"end":return U.stop()}},t)})))}},{key:"updateClusterData",value:function(n){if(n.isTileLayer||n.tileLayer||!n.getSource())return!1;var r=n.getSource(),t=r.cluster,o=r.clusterOptions.zoom,u=o===void 0?0:o,d=this.mapService.getZoom()-1,S=n.dataState.dataSourceNeedUpdate;return t&&S&&r.updateClusterData(Math.floor(d)),t&&Math.abs(n.clusterZoom-d)>=1?(u!==Math.floor(d)&&r.updateClusterData(Math.floor(d)),n.clusterZoom=d,!0):!1}}]),a}())||hv);function Zv(a,s){return a<s?-1:a>s?1:a>=s?0:NaN}function Wp(a){return a.length===1&&(a=z0(a)),{left:function(s,n,r,t){for(r==null&&(r=0),t==null&&(t=s.length);r<t;){var o=r+t>>>1;a(s[o],n)<0?r=o+1:t=o}return r},right:function(s,n,r,t){for(r==null&&(r=0),t==null&&(t=s.length);r<t;){var o=r+t>>>1;a(s[o],n)>0?t=o:r=o+1}return r}}}function z0(a){return function(s,n){return Zv(a(s),n)}}var n0=Wp(Zv),Z0=n0.right,U0=n0.left,dv=Z0;function zd(a,s){var n=a.length,r=-1,t,o,u;if(s==null){for(;++r<n;)if((t=a[r])!=null&&t>=t)for(o=u=t;++r<n;)(t=a[r])!=null&&(o>t&&(o=t),u<t&&(u=t))}else for(;++r<n;)if((t=s(a[r],r,a))!=null&&t>=t)for(o=u=t;++r<n;)(t=s(a[r],r,a))!=null&&(o>t&&(o=t),u<t&&(u=t));return[o,u]}var pv=Array.prototype,Uv=pv.slice,Cp=pv.map,vv=Math.sqrt(50),$v=Math.sqrt(10),bp=Math.sqrt(2);function Op(a,s,n){var r,t=-1,o,u,d;if(s=+s,a=+a,n=+n,a===s&&n>0)return[a];if((r=s<a)&&(o=a,a=s,s=o),(d=ch(a,s,n))===0||!isFinite(d))return[];if(d>0)for(a=Math.ceil(a/d),s=Math.floor(s/d),u=new Array(o=Math.ceil(s-a+1));++t<o;)u[t]=(a+t)*d;else for(a=Math.floor(a*d),s=Math.ceil(s*d),u=new Array(o=Math.ceil(a-s+1));++t<o;)u[t]=(a-t)/d;return r&&u.reverse(),u}function ch(a,s,n){var r=(s-a)/Math.max(0,n),t=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,t);return t>=0?(o>=vv?10:o>=$v?5:o>=bp?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(o>=vv?10:o>=$v?5:o>=bp?2:1)}function Xh(a,s,n){var r=Math.abs(s-a)/Math.max(0,n),t=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/t;return o>=vv?t*=10:o>=$v?t*=5:o>=bp&&(t*=2),s<a?-t:t}function mv(){var a=identity,s=extent,n=sturges;function r(t){var o,u=t.length,d,S=new Array(u);for(o=0;o<u;++o)S[o]=a(t[o],o,t);var U=s(S),ce=U[0],ve=U[1],Je=n(S,ce,ve);Array.isArray(Je)||(Je=tickStep(ce,ve,Je),Je=range(Math.ceil(ce/Je)*Je,ve,Je));for(var Ye=Je.length;Je[0]<=ce;)Je.shift(),--Ye;for(;Je[Ye-1]>ve;)Je.pop(),--Ye;var Kt=new Array(Ye+1),tr;for(o=0;o<=Ye;++o)tr=Kt[o]=[],tr.x0=o>0?Je[o-1]:ce,tr.x1=o<Ye?Je[o]:ve;for(o=0;o<u;++o)d=S[o],ce<=d&&d<=ve&&Kt[bisect(Je,d,0,Ye)].push(t[o]);return Kt}return r.value=function(t){return arguments.length?(a=typeof t=="function"?t:constant(t),r):a},r.domain=function(t){return arguments.length?(s=typeof t=="function"?t:constant([t[0],t[1]]),r):s},r.thresholds=function(t){return arguments.length?(n=typeof t=="function"?t:Array.isArray(t)?constant(slice.call(t)):constant(t),r):n},r}function wm(a,s,n){return a=map.call(a,number).sort(ascending),Math.ceil((n-s)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function $0(a){return a===null?NaN:+a}function i0(a,s,n){if(n==null&&(n=$0),!!(r=a.length)){if((s=+s)<=0||r<2)return+n(a[0],0,a);if(s>=1)return+n(a[r-1],r-1,a);var r,t=(r-1)*s,o=Math.floor(t),u=+n(a[o],o,a),d=+n(a[o+1],o+1,a);return u+(d-u)*(t-o)}}function jv(a,s,n,r,t){var o=a*a,u=o*a;return((1-3*a+3*o-u)*s+(4-6*o+3*u)*n+(1+3*a+3*o-3*u)*r+u*t)/6}function gv(a){var s=a.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,s-1):Math.floor(n*s),t=a[r],o=a[r+1],u=r>0?a[r-1]:2*t-o,d=r<s-1?a[r+2]:2*o-t;return jv((n-r/s)*s,u,t,o,d)}}function a0(a){var s=a.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*s),t=a[(r+s-1)%s],o=a[r%s],u=a[(r+1)%s],d=a[(r+2)%s];return jv((n-r/s)*s,t,o,u,d)}}function op(a){return function(){return a}}function o0(a,s){return function(n){return a+n*s}}function s0(a,s,n){return a=Math.pow(a,n),s=Math.pow(s,n)-a,n=1/n,function(r){return Math.pow(a+r*s,n)}}function j0(a,s){var n=s-a;return n?o0(a,n>180||n<-180?n-360*Math.round(n/360):n):constant(isNaN(a)?s:a)}function Hv(a){return(a=+a)==1?yv:function(s,n){return n-s?s0(s,n,a):op(isNaN(s)?n:s)}}function yv(a,s){var n=s-a;return n?o0(a,n):op(isNaN(a)?s:a)}var u0=function a(s){var n=Hv(s);function r(t,o){var u=n((t=(0,Pl.B8)(t)).r,(o=(0,Pl.B8)(o)).r),d=n(t.g,o.g),S=n(t.b,o.b),U=yv(t.opacity,o.opacity);return function(ce){return t.r=u(ce),t.g=d(ce),t.b=S(ce),t.opacity=U(ce),t+""}}return r.gamma=a,r}(1);function l0(a){return function(s){var n=s.length,r=new Array(n),t=new Array(n),o=new Array(n),u,d;for(u=0;u<n;++u)d=(0,Pl.B8)(s[u]),r[u]=d.r||0,t[u]=d.g||0,o[u]=d.b||0;return r=a(r),t=a(t),o=a(o),d.opacity=1,function(S){return d.r=r(S),d.g=t(S),d.b=o(S),d+""}}}var c0=l0(gv),H0=l0(a0),Ol="$";function _v(){}_v.prototype=xv.prototype={constructor:_v,has:function(a){return Ol+a in this},get:function(a){return this[Ol+a]},set:function(a,s){return this[Ol+a]=s,this},remove:function(a){var s=Ol+a;return s in this&&delete this[s]},clear:function(){for(var a in this)a[0]===Ol&&delete this[a]},keys:function(){var a=[];for(var s in this)s[0]===Ol&&a.push(s.slice(1));return a},values:function(){var a=[];for(var s in this)s[0]===Ol&&a.push(this[s]);return a},entries:function(){var a=[];for(var s in this)s[0]===Ol&&a.push({key:s.slice(1),value:this[s]});return a},size:function(){var a=0;for(var s in this)s[0]===Ol&&++a;return a},empty:function(){for(var a in this)if(a[0]===Ol)return!1;return!0},each:function(a){for(var s in this)s[0]===Ol&&a(this[s],s.slice(1),this)}};function xv(a,s){var n=new _v;if(a instanceof _v)a.each(function(d,S){n.set(S,d)});else if(Array.isArray(a)){var r=-1,t=a.length,o;if(s==null)for(;++r<t;)n.set(r,a[r]);else for(;++r<t;)n.set(s(o=a[r],r,a),o)}else if(a)for(var u in a)n.set(u,a[u]);return n}var Xp=xv;function Vv(){var a=[],s=[],n,r,t;function o(d,S,U,ce){if(S>=a.length)return n!=null&&d.sort(n),r!=null?r(d):d;for(var ve=-1,Je=d.length,Ye=a[S++],Kt,tr,Fr=map(),Kr,hn=U();++ve<Je;)(Kr=Fr.get(Kt=Ye(tr=d[ve])+""))?Kr.push(tr):Fr.set(Kt,[tr]);return Fr.each(function(sn,Yn){ce(hn,Yn,o(sn,S,U,ce))}),hn}function u(d,S){if(++S>a.length)return d;var U,ce=s[S-1];return r!=null&&S>=a.length?U=d.entries():(U=[],d.each(function(ve,Je){U.push({key:Je,values:u(ve,S)})})),ce!=null?U.sort(function(ve,Je){return ce(ve.key,Je.key)}):U}return t={object:function(d){return o(d,0,V0,f0)},map:function(d){return o(d,0,bv,h0)},entries:function(d){return u(o(d,0,bv,h0),0)},key:function(d){return a.push(d),t},sortKeys:function(d){return s[a.length-1]=d,t},sortValues:function(d){return n=d,t},rollup:function(d){return r=d,t}}}function V0(){return{}}function f0(a,s,n){a[s]=n}function bv(){return map()}function h0(a,s,n){a.set(s,n)}function Ev(){}var Up=Xp.prototype;Ev.prototype=Am.prototype={constructor:Ev,has:Up.has,add:function(a){return a+="",this[Ol+a]=a,this},remove:Up.remove,clear:Up.clear,values:Up.keys,size:Up.size,empty:Up.empty,each:Up.each};function Am(a,s){var n=new Ev;if(a instanceof Ev)a.each(function(o){n.add(o)});else if(a){var r=-1,t=a.length;if(s==null)for(;++r<t;)n.add(a[r]);else for(;++r<t;)n.add(s(a[r],r,a))}return n}var Tm=null,lp=Array.prototype,Sv=lp.map,wp=lp.slice;function Kd(a,s){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(s).domain(a);break}return this}function Kp(a,s){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(s).domain(a);break}return this}var Ap={name:"implicit"};function G0(){var a=Xp(),s=[],n=[],r=Ap;function t(o){var u=o+"",d=a.get(u);if(!d){if(r!==Ap)return r;a.set(u,d=s.push(o))}return n[(d-1)%n.length]}return t.domain=function(o){if(!arguments.length)return s.slice();s=[],a=Xp();for(var u=-1,d=o.length,S,U;++u<d;)a.has(U=(S=o[u])+"")||a.set(U,s.push(S));return t},t.range=function(o){return arguments.length?(n=wp.call(o),t):n.slice()},t.unknown=function(o){return arguments.length?(r=o,t):r},t.copy=function(){return G0(s,n).unknown(r)},Kd.apply(t,arguments),t}function mg(){var a=ordinal().unknown(void 0),s=a.domain,n=a.range,r=[0,1],t,o,u=!1,d=0,S=0,U=.5;delete a.unknown;function ce(){var ve=s().length,Je=r[1]<r[0],Ye=r[Je-0],Kt=r[1-Je];t=(Kt-Ye)/Math.max(1,ve-d+S*2),u&&(t=Math.floor(t)),Ye+=(Kt-Ye-t*(ve-d))*U,o=t*(1-d),u&&(Ye=Math.round(Ye),o=Math.round(o));var tr=sequence(ve).map(function(Fr){return Ye+t*Fr});return n(Je?tr.reverse():tr)}return a.domain=function(ve){return arguments.length?(s(ve),ce()):s()},a.range=function(ve){return arguments.length?(r=[+ve[0],+ve[1]],ce()):r.slice()},a.rangeRound=function(ve){return r=[+ve[0],+ve[1]],u=!0,ce()},a.bandwidth=function(){return o},a.step=function(){return t},a.round=function(ve){return arguments.length?(u=!!ve,ce()):u},a.padding=function(ve){return arguments.length?(d=Math.min(1,S=+ve),ce()):d},a.paddingInner=function(ve){return arguments.length?(d=Math.min(1,ve),ce()):d},a.paddingOuter=function(ve){return arguments.length?(S=+ve,ce()):S},a.align=function(ve){return arguments.length?(U=Math.max(0,Math.min(1,ve)),ce()):U},a.copy=function(){return mg(s(),r).round(u).paddingInner(d).paddingOuter(S).align(U)},initRange.apply(ce(),arguments)}function gg(a){var s=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return gg(s())},a}function py(){return gg(mg.apply(null,arguments).paddingInner(1))}function M_(a,s){return(isNumberArray(s)?numberArray:W0)(a,s)}function W0(a,s){var n=s?s.length:0,r=a?Math.min(n,a.length):0,t=new Array(r),o=new Array(n),u;for(u=0;u<r;++u)t[u]=Ip(a[u],s[u]);for(;u<n;++u)o[u]=s[u];return function(d){for(u=0;u<r;++u)o[u]=t[u](d);return o}}function d0(a,s){var n=new Date;return a=+a,s=+s,function(r){return n.setTime(a*(1-r)+s*r),n}}function Cv(a,s){return a=+a,s=+s,function(n){return a*(1-n)+s*n}}function p0(a,s){var n={},r={},t;(a===null||typeof a!="object")&&(a={}),(s===null||typeof s!="object")&&(s={});for(t in s)t in a?n[t]=Ip(a[t],s[t]):r[t]=s[t];return function(o){for(t in n)r[t]=n[t](o);return r}}var Mm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pm=new RegExp(Mm.source,"g");function vy(a){return function(){return a}}function gy(a){return function(s){return a(s)+""}}function v0(a,s){var n=Mm.lastIndex=Pm.lastIndex=0,r,t,o,u=-1,d=[],S=[];for(a=a+"",s=s+"";(r=Mm.exec(a))&&(t=Pm.exec(s));)(o=t.index)>n&&(o=s.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(r=r[0])===(t=t[0])?d[u]?d[u]+=t:d[++u]=t:(d[++u]=null,S.push({i:u,x:Cv(r,t)})),n=Pm.lastIndex;return n<s.length&&(o=s.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?S[0]?gy(S[0].x):vy(s):(s=S.length,function(U){for(var ce=0,ve;ce<s;++ce)d[(ve=S[ce]).i]=ve.x(U);return d.join("")})}function m0(a,s){s||(s=[]);var n=a?Math.min(s.length,a.length):0,r=s.slice(),t;return function(o){for(t=0;t<n;++t)r[t]=a[t]*(1-o)+s[t]*o;return r}}function g0(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Ip(a,s){var n=typeof s,r;return s==null||n==="boolean"?op(s):(n==="number"?Cv:n==="string"?(r=(0,Pl.ZP)(s))?(s=r,u0):v0:s instanceof Pl.ZP?u0:s instanceof Date?d0:g0(s)?m0:Array.isArray(s)?W0:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?p0:Cv)(a,s)}function $p(a,s){return a=+a,s=+s,function(n){return Math.round(a*(1-n)+s*n)}}function wv(a){return function(){return a}}function Av(a){return+a}var y0=[0,1];function Id(a){return a}function Rp(a,s){return(s-=a=+a)?function(n){return(n-a)/s}:wv(isNaN(s)?NaN:.5)}function Om(a){var s=a[0],n=a[a.length-1],r;return s>n&&(r=s,s=n,n=r),function(t){return Math.max(s,Math.min(n,t))}}function Zd(a,s,n){var r=a[0],t=a[1],o=s[0],u=s[1];return t<r?(r=Rp(t,r),o=n(u,o)):(r=Rp(r,t),o=n(o,u)),function(d){return o(r(d))}}function Gv(a,s,n){var r=Math.min(a.length,s.length)-1,t=new Array(r),o=new Array(r),u=-1;for(a[r]<a[0]&&(a=a.slice().reverse(),s=s.slice().reverse());++u<r;)t[u]=Rp(a[u],a[u+1]),o[u]=n(s[u],s[u+1]);return function(d){var S=dv(a,d,1,r)-1;return o[S](t[S](d))}}function Wv(a,s){return s.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function X0(){var a=y0,s=y0,n=Ip,r,t,o,u=Id,d,S,U;function ce(){return d=Math.min(a.length,s.length)>2?Gv:Zd,S=U=null,ve}function ve(Je){return isNaN(Je=+Je)?o:(S||(S=d(a.map(r),s,n)))(r(u(Je)))}return ve.invert=function(Je){return u(t((U||(U=d(s,a.map(r),Cv)))(Je)))},ve.domain=function(Je){return arguments.length?(a=Sv.call(Je,Av),u===Id||(u=Om(a)),ce()):a.slice()},ve.range=function(Je){return arguments.length?(s=wp.call(Je),ce()):s.slice()},ve.rangeRound=function(Je){return s=wp.call(Je),n=$p,ce()},ve.clamp=function(Je){return arguments.length?(u=Je?Om(a):Id,ve):u!==Id},ve.interpolate=function(Je){return arguments.length?(n=Je,ce()):n},ve.unknown=function(Je){return arguments.length?(o=Je,ve):o},function(Je,Ye){return r=Je,t=Ye,ce()}}function yg(a,s){return X0()(a,s)}var Yp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qp(a){if(!(s=Yp.exec(a)))throw new Error("invalid format: "+a);var s;return new hd({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}Qp.prototype=hd.prototype;function hd(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}hd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function K0(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function Tv(a,s){if((n=(a=s?a.toExponential(s-1):a.toExponential()).indexOf("e"))<0)return null;var n,r=a.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+a.slice(n+1)]}function jp(a){return a=Tv(Math.abs(a)),a?a[1]:NaN}function _g(a,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jp(s)/3)))*3-jp(Math.abs(a)))}function xg(a,s){return function(n,r){for(var t=n.length,o=[],u=0,d=a[0],S=0;t>0&&d>0&&(S+d+1>r&&(d=Math.max(1,r-S)),o.push(n.substring(t-=d,t+d)),!((S+=d+1)>r));)d=a[u=(u+1)%a.length];return o.reverse().join(s)}}function Im(a){return function(s){return s.replace(/[0-9]/g,function(n){return a[+n]})}}function Rm(a){e:for(var s=a.length,n=1,r=-1,t;n<s;++n)switch(a[n]){case".":r=t=n;break;case"0":r===0&&(r=n),t=n;break;default:if(!+a[n])break e;r>0&&(r=0);break}return r>0?a.slice(0,r)+a.slice(t+1):a}var Y0;function Lm(a,s){var n=Tv(a,s);if(!n)return a+"";var r=n[0],t=n[1],o=t-(Y0=Math.max(-8,Math.min(8,Math.floor(t/3)))*3)+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Tv(a,Math.max(0,s+o-1))[0]}function _0(a,s){var n=Tv(a,s);if(!n)return a+"";var r=n[0],t=n[1];return t<0?"0."+new Array(-t).join("0")+r:r.length>t+1?r.slice(0,t+1)+"."+r.slice(t+1):r+new Array(t-r.length+2).join("0")}var x0={"%":function(a,s){return(a*100).toFixed(s)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:K0,e:function(a,s){return a.toExponential(s)},f:function(a,s){return a.toFixed(s)},g:function(a,s){return a.toPrecision(s)},o:function(a){return Math.round(a).toString(8)},p:function(a,s){return _0(a*100,s)},r:_0,s:Lm,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function Dm(a){return a}var bg=Array.prototype.map,Eg=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Jp(a){var s=a.grouping===void 0||a.thousands===void 0?Dm:xg(bg.call(a.grouping,Number),a.thousands+""),n=a.currency===void 0?"":a.currency[0]+"",r=a.currency===void 0?"":a.currency[1]+"",t=a.decimal===void 0?".":a.decimal+"",o=a.numerals===void 0?Dm:Im(bg.call(a.numerals,String)),u=a.percent===void 0?"%":a.percent+"",d=a.minus===void 0?"-":a.minus+"",S=a.nan===void 0?"NaN":a.nan+"";function U(ve){ve=Qp(ve);var Je=ve.fill,Ye=ve.align,Kt=ve.sign,tr=ve.symbol,Fr=ve.zero,Kr=ve.width,hn=ve.comma,sn=ve.precision,Yn=ve.trim,hi=ve.type;hi==="n"?(hn=!0,hi="g"):x0[hi]||(sn===void 0&&(sn=12),Yn=!0,hi="g"),(Fr||Je==="0"&&Ye==="=")&&(Fr=!0,Je="0",Ye="=");var Zi=tr==="$"?n:tr==="#"&&/[boxX]/.test(hi)?"0"+hi.toLowerCase():"",zi=tr==="$"?r:/[%p]/.test(hi)?u:"",pa=x0[hi],_o=/[defgprs%]/.test(hi);sn=sn===void 0?6:/[gprs]/.test(hi)?Math.max(1,Math.min(21,sn)):Math.max(0,Math.min(20,sn));function Co(Ba){var ms=Zi,au=zi,Al,nd,Ih;if(hi==="c")au=pa(Ba)+au,Ba="";else{Ba=+Ba;var Rh=Ba<0||1/Ba<0;if(Ba=isNaN(Ba)?S:pa(Math.abs(Ba),sn),Yn&&(Ba=Rm(Ba)),Rh&&+Ba==0&&Kt!=="+"&&(Rh=!1),ms=(Rh?Kt==="("?Kt:d:Kt==="-"||Kt==="("?"":Kt)+ms,au=(hi==="s"?Eg[8+Y0/3]:"")+au+(Rh&&Kt==="("?")":""),_o){for(Al=-1,nd=Ba.length;++Al<nd;)if(Ih=Ba.charCodeAt(Al),48>Ih||Ih>57){au=(Ih===46?t+Ba.slice(Al+1):Ba.slice(Al))+au,Ba=Ba.slice(0,Al);break}}}hn&&!Fr&&(Ba=s(Ba,1/0));var md=ms.length+Ba.length+au.length,hh=md<Kr?new Array(Kr-md+1).join(Je):"";switch(hn&&Fr&&(Ba=s(hh+Ba,hh.length?Kr-au.length:1/0),hh=""),Ye){case"<":Ba=ms+Ba+au+hh;break;case"=":Ba=ms+hh+Ba+au;break;case"^":Ba=hh.slice(0,md=hh.length>>1)+ms+Ba+au+hh.slice(md);break;default:Ba=hh+ms+Ba+au;break}return o(Ba)}return Co.toString=function(){return ve+""},Co}function ce(ve,Je){var Ye=U((ve=Qp(ve),ve.type="f",ve)),Kt=Math.max(-8,Math.min(8,Math.floor(jp(Je)/3)))*3,tr=Math.pow(10,-Kt),Fr=Eg[8+Kt/3];return function(Kr){return Ye(tr*Kr)+Fr}}return{format:U,formatPrefix:ce}}var b0,Q0,km;Sg({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Sg(a){return b0=Jp(a),Q0=b0.format,km=b0.formatPrefix,b0}function Cg(a,s){return a=Math.abs(a),s=Math.abs(s)-a,Math.max(0,jp(s)-jp(a))+1}function wg(a){return Math.max(0,-jp(Math.abs(a)))}function J0(a,s,n,r){var t=Xh(a,s,n),o;switch(r=Qp(r==null?",f":r),r.type){case"s":{var u=Math.max(Math.abs(a),Math.abs(s));return r.precision==null&&!isNaN(o=_g(t,u))&&(r.precision=o),km(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Cg(t,Math.max(Math.abs(a),Math.abs(s))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=wg(t))&&(r.precision=o-(r.type==="%")*2);break}}return Q0(r)}function Mv(a){var s=a.domain;return a.ticks=function(n){var r=s();return Op(r[0],r[r.length-1],n==null?10:n)},a.tickFormat=function(n,r){var t=s();return J0(t[0],t[t.length-1],n==null?10:n,r)},a.nice=function(n){n==null&&(n=10);var r=s(),t=0,o=r.length-1,u=r[t],d=r[o],S;return d<u&&(S=u,u=d,d=S,S=t,t=o,o=S),S=ch(u,d,n),S>0?(u=Math.floor(u/S)*S,d=Math.ceil(d/S)*S,S=ch(u,d,n)):S<0&&(u=Math.ceil(u*S)/S,d=Math.floor(d*S)/S,S=ch(u,d,n)),S>0?(r[t]=Math.floor(u/S)*S,r[o]=Math.ceil(d/S)*S,s(r)):S<0&&(r[t]=Math.ceil(u*S)/S,r[o]=Math.floor(d*S)/S,s(r)),a},a}function q0(){var a=yg(Id,Id);return a.copy=function(){return Wv(a,q0())},Kd.apply(a,arguments),Mv(a)}function Ag(a){var s;function n(r){return isNaN(r=+r)?s:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(a=map.call(r,number),n):a.slice()},n.unknown=function(r){return arguments.length?(s=r,n):s},n.copy=function(){return Ag(a).unknown(s)},a=arguments.length?map.call(a,number):[0,1],linearish(n)}function Fm(a,s){a=a.slice();var n=0,r=a.length-1,t=a[n],o=a[r],u;return o<t&&(u=n,n=r,r=u,u=t,t=o,o=u),a[n]=s.floor(t),a[r]=s.ceil(o),a}function Bm(a){return Math.log(a)}function Nm(a){return Math.exp(a)}function zm(a){return-Math.log(-a)}function Tg(a){return-Math.exp(-a)}function Mg(a){return isFinite(a)?+("1e"+a):a<0?0:a}function yy(a){return a===10?Mg:a===Math.E?Math.exp:function(s){return Math.pow(a,s)}}function _(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(s){return Math.log(s)/a})}function N(a){return function(s){return-a(-s)}}function Se(a){var s=a(Bm,Nm),n=s.domain,r=10,t,o;function u(){return t=_(r),o=yy(r),n()[0]<0?(t=N(t),o=N(o),a(zm,Tg)):a(Bm,Nm),s}return s.base=function(d){return arguments.length?(r=+d,u()):r},s.domain=function(d){return arguments.length?(n(d),u()):n()},s.ticks=function(d){var S=n(),U=S[0],ce=S[S.length-1],ve;(ve=ce<U)&&(Je=U,U=ce,ce=Je);var Je=t(U),Ye=t(ce),Kt,tr,Fr,Kr=d==null?10:+d,hn=[];if(!(r%1)&&Ye-Je<Kr){if(Je=Math.round(Je)-1,Ye=Math.round(Ye)+1,U>0){for(;Je<Ye;++Je)for(tr=1,Kt=o(Je);tr<r;++tr)if(Fr=Kt*tr,!(Fr<U)){if(Fr>ce)break;hn.push(Fr)}}else for(;Je<Ye;++Je)for(tr=r-1,Kt=o(Je);tr>=1;--tr)if(Fr=Kt*tr,!(Fr<U)){if(Fr>ce)break;hn.push(Fr)}}else hn=Op(Je,Ye,Math.min(Ye-Je,Kr)).map(o);return ve?hn.reverse():hn},s.tickFormat=function(d,S){if(S==null&&(S=r===10?".0e":","),typeof S!="function"&&(S=Q0(S)),d===1/0)return S;d==null&&(d=10);var U=Math.max(1,r*d/s.ticks().length);return function(ce){var ve=ce/o(Math.round(t(ce)));return ve*r<r-.5&&(ve*=r),ve<=U?S(ce):""}},s.nice=function(){return n(Fm(n(),{floor:function(d){return o(Math.floor(t(d)))},ceil:function(d){return o(Math.ceil(t(d)))}}))},s}function Bt(){var a=Se(X0()).domain([1,10]);return a.copy=function(){return Wv(a,Bt()).base(a.base())},Kd.apply(a,arguments),a}function wr(a){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/a))}}function nn(a){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*a}}function Wn(a){var s=1,n=a(wr(s),nn(s));return n.constant=function(r){return arguments.length?a(wr(s=+r),nn(s)):s},linearish(n)}function fi(){var a=Wn(transformer());return a.copy=function(){return copy(a,fi()).constant(a.constant())},initRange.apply(a,arguments)}function Ri(a){return function(s){return s<0?-Math.pow(-s,a):Math.pow(s,a)}}function Xa(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function Ka(a){return a<0?-a*a:a*a}function So(a){var s=a(Id,Id),n=1;function r(){return n===1?a(Id,Id):n===.5?a(Xa,Ka):a(Ri(n),Ri(1/n))}return s.exponent=function(t){return arguments.length?(n=+t,r()):n},Mv(s)}function Ms(){var a=So(X0());return a.copy=function(){return Wv(a,Ms()).exponent(a.exponent())},Kd.apply(a,arguments),a}function bu(){return Ms.apply(null,arguments).exponent(.5)}function ju(){var a=[],s=[],n=[],r;function t(){var u=0,d=Math.max(1,s.length);for(n=new Array(d-1);++u<d;)n[u-1]=i0(a,u/d);return o}function o(u){return isNaN(u=+u)?r:s[dv(n,u)]}return o.invertExtent=function(u){var d=s.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:a[0],d<n.length?n[d]:a[a.length-1]]},o.domain=function(u){if(!arguments.length)return a.slice();a=[];for(var d=0,S=u.length,U;d<S;++d)U=u[d],U!=null&&!isNaN(U=+U)&&a.push(U);return a.sort(Zv),t()},o.range=function(u){return arguments.length?(s=wp.call(u),t()):s.slice()},o.unknown=function(u){return arguments.length?(r=u,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return ju().domain(a).range(s).unknown(r)},Kd.apply(o,arguments)}function zl(){var a=0,s=1,n=1,r=[.5],t=[0,1],o;function u(S){return S<=S?t[dv(r,S,0,n)]:o}function d(){var S=-1;for(r=new Array(n);++S<n;)r[S]=((S+1)*s-(S-n)*a)/(n+1);return u}return u.domain=function(S){return arguments.length?(a=+S[0],s=+S[1],d()):[a,s]},u.range=function(S){return arguments.length?(n=(t=wp.call(S)).length-1,d()):t.slice()},u.invertExtent=function(S){var U=t.indexOf(S);return U<0?[NaN,NaN]:U<1?[a,r[0]]:U>=n?[r[n-1],s]:[r[U-1],r[U]]},u.unknown=function(S){return arguments.length&&(o=S),u},u.thresholds=function(){return r.slice()},u.copy=function(){return zl().domain([a,s]).range(t).unknown(o)},Kd.apply(Mv(u),arguments)}function Hu(){var a=[.5],s=[0,1],n,r=1;function t(o){return o<=o?s[dv(a,o,0,r)]:n}return t.domain=function(o){return arguments.length?(a=wp.call(o),r=Math.min(a.length,s.length-1),t):a.slice()},t.range=function(o){return arguments.length?(s=wp.call(o),r=Math.min(a.length,s.length-1),t):s.slice()},t.invertExtent=function(o){var u=s.indexOf(o);return[a[u-1],a[u]]},t.unknown=function(o){return arguments.length?(n=o,t):n},t.copy=function(){return Hu().domain(a).range(s).unknown(n)},Kd.apply(t,arguments)}var jl=new Date,sc=new Date;function fh(a,s,n,r){function t(o){return a(o=arguments.length===0?new Date:new Date(+o)),o}return t.floor=function(o){return a(o=new Date(+o)),o},t.ceil=function(o){return a(o=new Date(o-1)),s(o,1),a(o),o},t.round=function(o){var u=t(o),d=t.ceil(o);return o-u<d-o?u:d},t.offset=function(o,u){return s(o=new Date(+o),u==null?1:Math.floor(u)),o},t.range=function(o,u,d){var S=[],U;if(o=t.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return S;do S.push(U=new Date(+o)),s(o,d),a(o);while(U<o&&o<u);return S},t.filter=function(o){return fh(function(u){if(u>=u)for(;a(u),!o(u);)u.setTime(u-1)},function(u,d){if(u>=u)if(d<0)for(;++d<=0;)for(;s(u,-1),!o(u););else for(;--d>=0;)for(;s(u,1),!o(u););})},n&&(t.count=function(o,u){return jl.setTime(+o),sc.setTime(+u),a(jl),a(sc),Math.floor(n(jl,sc))},t.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?t.filter(r?function(u){return r(u)%o===0}:function(u){return t.count(0,u)%o===0}):t}),t}var Ud=fh(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,s){a.setFullYear(a.getFullYear()+s)},function(a,s){return s.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Ud.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:fh(function(s){s.setFullYear(Math.floor(s.getFullYear()/a)*a),s.setMonth(0,1),s.setHours(0,0,0,0)},function(s,n){s.setFullYear(s.getFullYear()+n*a)})};var Rd=Ud,dd=Ud.range,cp=fh(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,s){a.setMonth(a.getMonth()+s)},function(a,s){return s.getMonth()-a.getMonth()+(s.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),Lp=cp,Pg=cp.range,Zm=1e3,em=6e4,Og=36e5,_y=864e5,xy=6048e5;function Xv(a){return fh(function(s){s.setDate(s.getDate()-(s.getDay()+7-a)%7),s.setHours(0,0,0,0)},function(s,n){s.setDate(s.getDate()+n*7)},function(s,n){return(n-s-(n.getTimezoneOffset()-s.getTimezoneOffset())*em)/xy})}var Um=Xv(0),$m=Xv(1),P_=Xv(2),O_=Xv(3),E0=Xv(4),I_=Xv(5),Ig=Xv(6),o2=Um.range,by=$m.range,s2=P_.range,u2=O_.range,l2=E0.range,c2=I_.range,f2=Ig.range,Ey=fh(function(a){a.setHours(0,0,0,0)},function(a,s){a.setDate(a.getDate()+s)},function(a,s){return(s-a-(s.getTimezoneOffset()-a.getTimezoneOffset())*em)/_y},function(a){return a.getDate()-1}),Rg=Ey,h2=Ey.range,Sy=fh(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Zm-a.getMinutes()*em)},function(a,s){a.setTime(+a+s*Og)},function(a,s){return(s-a)/Og},function(a){return a.getHours()}),S0=Sy,d2=Sy.range,Cy=fh(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Zm)},function(a,s){a.setTime(+a+s*em)},function(a,s){return(s-a)/em},function(a){return a.getMinutes()}),C0=Cy,p2=Cy.range,tm=fh(function(a){a.setTime(a-a.getMilliseconds())},function(a,s){a.setTime(+a+s*Zm)},function(a,s){return(s-a)/Zm},function(a){return a.getUTCSeconds()}),R_=tm,v2=tm.range,jm=fh(function(){},function(a,s){a.setTime(+a+s)},function(a,s){return s-a});jm.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?fh(function(s){s.setTime(Math.floor(s/a)*a)},function(s,n){s.setTime(+s+n*a)},function(s,n){return(n-s)/a}):jm};var L_=jm,m2=jm.range;function Kv(a){return fh(function(s){s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-a)%7),s.setUTCHours(0,0,0,0)},function(s,n){s.setUTCDate(s.getUTCDate()+n*7)},function(s,n){return(n-s)/xy})}var wy=Kv(0),Hm=Kv(1),D_=Kv(2),k_=Kv(3),w0=Kv(4),F_=Kv(5),B_=Kv(6),Ay=wy.range,g2=Hm.range,y2=D_.range,_2=k_.range,x2=w0.range,b2=F_.range,E2=B_.range,Ty=fh(function(a){a.setUTCHours(0,0,0,0)},function(a,s){a.setUTCDate(a.getUTCDate()+s)},function(a,s){return(s-a)/_y},function(a){return a.getUTCDate()-1}),Lg=Ty,S2=Ty.range,Dg=fh(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,s){a.setUTCFullYear(a.getUTCFullYear()+s)},function(a,s){return s.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});Dg.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:fh(function(s){s.setUTCFullYear(Math.floor(s.getUTCFullYear()/a)*a),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},function(s,n){s.setUTCFullYear(s.getUTCFullYear()+n*a)})};var rm=Dg,C2=Dg.range;function kg(a){if(0<=a.y&&a.y<100){var s=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return s.setFullYear(a.y),s}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Fg(a){if(0<=a.y&&a.y<100){var s=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return s.setUTCFullYear(a.y),s}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function nm(a,s,n){return{y:a,m:s,d:n,H:0,M:0,S:0,L:0}}function N_(a){var s=a.dateTime,n=a.date,r=a.time,t=a.periods,o=a.days,u=a.shortDays,d=a.months,S=a.shortMonths,U=A0(t),ce=im(t),ve=A0(o),Je=im(o),Ye=A0(u),Kt=im(u),tr=A0(d),Fr=im(d),Kr=A0(S),hn=im(S),sn={a:Rh,A:md,b:hh,B:tp,c:null,d:Ly,e:Ly,f:rx,g:sx,G:lx,H:ex,I:T2,j:tx,L:Dy,m:ky,M:nx,p:Fv,q:Gp,Q:Hy,s:Vy,S:ix,u:M2,U:P2,V:Fy,w:By,W:ax,x:null,X:null,y:ox,Y:ux,Z:cx,"%":jy},Yn={a:k0,A:kp,b:Zh,B:Ld,c:null,d:Ny,e:Ny,f:Vm,g:bx,G:Ex,H:zy,I:fx,j:hx,L:dx,m:px,M:vx,p:Em,q:Sm,Q:Hy,s:Vy,S:mx,u:gx,U:yx,V:Uy,w:zg,W:_x,x:null,X:null,y:xx,Y:$y,Z:Sx,"%":jy},hi={a:Co,A:Ba,b:ms,B:au,c:Al,d:Iy,e:Iy,f:Q_,g:Oy,G:Bg,H:Ng,I:Ng,j:X_,L:A2,m:W_,M:K_,p:_o,q:w2,Q:q_,s:Ry,S:Y_,u:$_,U:j_,V:H_,w:U_,W:V_,x:nd,X:Ih,y:Oy,Y:Bg,Z:G_,"%":J_};sn.x=Zi(n,sn),sn.X=Zi(r,sn),sn.c=Zi(s,sn),Yn.x=Zi(n,Yn),Yn.X=Zi(r,Yn),Yn.c=Zi(s,Yn);function Zi(vu,Vc){return function(eh){var as=[],Mp=-1,id=0,Fp=vu.length,Bp,Cm,GE;for(eh instanceof Date||(eh=new Date(+eh));++Mp<Fp;)vu.charCodeAt(Mp)===37&&(as.push(vu.slice(id,Mp)),(Cm=My[Bp=vu.charAt(++Mp)])!=null?Bp=vu.charAt(++Mp):Cm=Bp==="e"?" ":"0",(GE=Vc[Bp])&&(Bp=GE(eh,Cm)),as.push(Bp),id=Mp+1);return as.push(vu.slice(id,Mp)),as.join("")}}function zi(vu,Vc){return function(eh){var as=nm(1900,void 0,1),Mp=pa(as,vu,eh+="",0),id,Fp;if(Mp!=eh.length)return null;if("Q"in as)return new Date(as.Q);if("s"in as)return new Date(as.s*1e3+("L"in as?as.L:0));if(Vc&&!("Z"in as)&&(as.Z=0),"p"in as&&(as.H=as.H%12+as.p*12),as.m===void 0&&(as.m="q"in as?as.q:0),"V"in as){if(as.V<1||as.V>53)return null;"w"in as||(as.w=1),"Z"in as?(id=Fg(nm(as.y,0,1)),Fp=id.getUTCDay(),id=Fp>4||Fp===0?Hm.ceil(id):Hm(id),id=Lg.offset(id,(as.V-1)*7),as.y=id.getUTCFullYear(),as.m=id.getUTCMonth(),as.d=id.getUTCDate()+(as.w+6)%7):(id=kg(nm(as.y,0,1)),Fp=id.getDay(),id=Fp>4||Fp===0?$m.ceil(id):$m(id),id=Rg.offset(id,(as.V-1)*7),as.y=id.getFullYear(),as.m=id.getMonth(),as.d=id.getDate()+(as.w+6)%7)}else("W"in as||"U"in as)&&("w"in as||(as.w="u"in as?as.u%7:"W"in as?1:0),Fp="Z"in as?Fg(nm(as.y,0,1)).getUTCDay():kg(nm(as.y,0,1)).getDay(),as.m=0,as.d="W"in as?(as.w+6)%7+as.W*7-(Fp+5)%7:as.w+as.U*7-(Fp+6)%7);return"Z"in as?(as.H+=as.Z/100|0,as.M+=as.Z%100,Fg(as)):kg(as)}}function pa(vu,Vc,eh,as){for(var Mp=0,id=Vc.length,Fp=eh.length,Bp,Cm;Mp<id;){if(as>=Fp)return-1;if(Bp=Vc.charCodeAt(Mp++),Bp===37){if(Bp=Vc.charAt(Mp++),Cm=hi[Bp in My?Vc.charAt(Mp++):Bp],!Cm||(as=Cm(vu,eh,as))<0)return-1}else if(Bp!=eh.charCodeAt(as++))return-1}return as}function _o(vu,Vc,eh){var as=U.exec(Vc.slice(eh));return as?(vu.p=ce[as[0].toLowerCase()],eh+as[0].length):-1}function Co(vu,Vc,eh){var as=Ye.exec(Vc.slice(eh));return as?(vu.w=Kt[as[0].toLowerCase()],eh+as[0].length):-1}function Ba(vu,Vc,eh){var as=ve.exec(Vc.slice(eh));return as?(vu.w=Je[as[0].toLowerCase()],eh+as[0].length):-1}function ms(vu,Vc,eh){var as=Kr.exec(Vc.slice(eh));return as?(vu.m=hn[as[0].toLowerCase()],eh+as[0].length):-1}function au(vu,Vc,eh){var as=tr.exec(Vc.slice(eh));return as?(vu.m=Fr[as[0].toLowerCase()],eh+as[0].length):-1}function Al(vu,Vc,eh){return pa(vu,s,Vc,eh)}function nd(vu,Vc,eh){return pa(vu,n,Vc,eh)}function Ih(vu,Vc,eh){return pa(vu,r,Vc,eh)}function Rh(vu){return u[vu.getDay()]}function md(vu){return o[vu.getDay()]}function hh(vu){return S[vu.getMonth()]}function tp(vu){return d[vu.getMonth()]}function Fv(vu){return t[+(vu.getHours()>=12)]}function Gp(vu){return 1+~~(vu.getMonth()/3)}function k0(vu){return u[vu.getUTCDay()]}function kp(vu){return o[vu.getUTCDay()]}function Zh(vu){return S[vu.getUTCMonth()]}function Ld(vu){return d[vu.getUTCMonth()]}function Em(vu){return t[+(vu.getUTCHours()>=12)]}function Sm(vu){return 1+~~(vu.getUTCMonth()/3)}return{format:function(vu){var Vc=Zi(vu+="",sn);return Vc.toString=function(){return vu},Vc},parse:function(vu){var Vc=zi(vu+="",!1);return Vc.toString=function(){return vu},Vc},utcFormat:function(vu){var Vc=Zi(vu+="",Yn);return Vc.toString=function(){return vu},Vc},utcParse:function(vu){var Vc=zi(vu+="",!0);return Vc.toString=function(){return vu},Vc}}}var My={"-":"",_:" ",0:"0"},$d=/^\s*\d+/,Py=/^%/,z_=/[\\^$*+?|[\]().{}]/g;function Lf(a,s,n){var r=a<0?"-":"",t=(r?-a:a)+"",o=t.length;return r+(o<n?new Array(n-o+1).join(s)+t:t)}function Z_(a){return a.replace(z_,"\\$&")}function A0(a){return new RegExp("^(?:"+a.map(Z_).join("|")+")","i")}function im(a){for(var s={},n=-1,r=a.length;++n<r;)s[a[n].toLowerCase()]=n;return s}function U_(a,s,n){var r=$d.exec(s.slice(n,n+1));return r?(a.w=+r[0],n+r[0].length):-1}function $_(a,s,n){var r=$d.exec(s.slice(n,n+1));return r?(a.u=+r[0],n+r[0].length):-1}function j_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.U=+r[0],n+r[0].length):-1}function H_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.V=+r[0],n+r[0].length):-1}function V_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.W=+r[0],n+r[0].length):-1}function Bg(a,s,n){var r=$d.exec(s.slice(n,n+4));return r?(a.y=+r[0],n+r[0].length):-1}function Oy(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function G_(a,s,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(n,n+6));return r?(a.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function w2(a,s,n){var r=$d.exec(s.slice(n,n+1));return r?(a.q=r[0]*3-3,n+r[0].length):-1}function W_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.m=r[0]-1,n+r[0].length):-1}function Iy(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.d=+r[0],n+r[0].length):-1}function X_(a,s,n){var r=$d.exec(s.slice(n,n+3));return r?(a.m=0,a.d=+r[0],n+r[0].length):-1}function Ng(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.H=+r[0],n+r[0].length):-1}function K_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.M=+r[0],n+r[0].length):-1}function Y_(a,s,n){var r=$d.exec(s.slice(n,n+2));return r?(a.S=+r[0],n+r[0].length):-1}function A2(a,s,n){var r=$d.exec(s.slice(n,n+3));return r?(a.L=+r[0],n+r[0].length):-1}function Q_(a,s,n){var r=$d.exec(s.slice(n,n+6));return r?(a.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function J_(a,s,n){var r=Py.exec(s.slice(n,n+1));return r?n+r[0].length:-1}function q_(a,s,n){var r=$d.exec(s.slice(n));return r?(a.Q=+r[0],n+r[0].length):-1}function Ry(a,s,n){var r=$d.exec(s.slice(n));return r?(a.s=+r[0],n+r[0].length):-1}function Ly(a,s){return Lf(a.getDate(),s,2)}function ex(a,s){return Lf(a.getHours(),s,2)}function T2(a,s){return Lf(a.getHours()%12||12,s,2)}function tx(a,s){return Lf(1+Rg.count(Rd(a),a),s,3)}function Dy(a,s){return Lf(a.getMilliseconds(),s,3)}function rx(a,s){return Dy(a,s)+"000"}function ky(a,s){return Lf(a.getMonth()+1,s,2)}function nx(a,s){return Lf(a.getMinutes(),s,2)}function ix(a,s){return Lf(a.getSeconds(),s,2)}function M2(a){var s=a.getDay();return s===0?7:s}function P2(a,s){return Lf(Um.count(Rd(a)-1,a),s,2)}function T0(a){var s=a.getDay();return s>=4||s===0?E0(a):E0.ceil(a)}function Fy(a,s){return a=T0(a),Lf(E0.count(Rd(a),a)+(Rd(a).getDay()===4),s,2)}function By(a){return a.getDay()}function ax(a,s){return Lf($m.count(Rd(a)-1,a),s,2)}function ox(a,s){return Lf(a.getFullYear()%100,s,2)}function sx(a,s){return a=T0(a),Lf(a.getFullYear()%100,s,2)}function ux(a,s){return Lf(a.getFullYear()%1e4,s,4)}function lx(a,s){var n=a.getDay();return a=n>=4||n===0?E0(a):E0.ceil(a),Lf(a.getFullYear()%1e4,s,4)}function cx(a){var s=a.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+Lf(s/60|0,"0",2)+Lf(s%60,"0",2)}function Ny(a,s){return Lf(a.getUTCDate(),s,2)}function zy(a,s){return Lf(a.getUTCHours(),s,2)}function fx(a,s){return Lf(a.getUTCHours()%12||12,s,2)}function hx(a,s){return Lf(1+Lg.count(rm(a),a),s,3)}function dx(a,s){return Lf(a.getUTCMilliseconds(),s,3)}function Vm(a,s){return dx(a,s)+"000"}function px(a,s){return Lf(a.getUTCMonth()+1,s,2)}function vx(a,s){return Lf(a.getUTCMinutes(),s,2)}function mx(a,s){return Lf(a.getUTCSeconds(),s,2)}function gx(a){var s=a.getUTCDay();return s===0?7:s}function yx(a,s){return Lf(wy.count(rm(a)-1,a),s,2)}function Zy(a){var s=a.getUTCDay();return s>=4||s===0?w0(a):w0.ceil(a)}function Uy(a,s){return a=Zy(a),Lf(w0.count(rm(a),a)+(rm(a).getUTCDay()===4),s,2)}function zg(a){return a.getUTCDay()}function _x(a,s){return Lf(Hm.count(rm(a)-1,a),s,2)}function xx(a,s){return Lf(a.getUTCFullYear()%100,s,2)}function bx(a,s){return a=Zy(a),Lf(a.getUTCFullYear()%100,s,2)}function $y(a,s){return Lf(a.getUTCFullYear()%1e4,s,4)}function Ex(a,s){var n=a.getUTCDay();return a=n>=4||n===0?w0(a):w0.ceil(a),Lf(a.getUTCFullYear()%1e4,s,4)}function Sx(){return"+0000"}function jy(){return"%"}function Hy(a){return+a}function Vy(a){return Math.floor(+a/1e3)}var M0,Gy,Cx,Ax,Tx;Wy({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wy(a){return M0=N_(a),Gy=M0.format,Cx=M0.parse,Ax=M0.utcFormat,Tx=M0.utcParse,M0}var am=1e3,om=am*60,sm=om*60,um=sm*24,Dp=um*7,Xy=um*30,Gm=um*365;function Ky(a){return new Date(a)}function Yy(a){return a instanceof Date?+a:+new Date(+a)}function Qy(a,s,n,r,t,o,u,d,S){var U=yg(Id,Id),ce=U.invert,ve=U.domain,Je=S(".%L"),Ye=S(":%S"),Kt=S("%I:%M"),tr=S("%I %p"),Fr=S("%a %d"),Kr=S("%b %d"),hn=S("%B"),sn=S("%Y"),Yn=[[u,1,am],[u,5,5*am],[u,15,15*am],[u,30,30*am],[o,1,om],[o,5,5*om],[o,15,15*om],[o,30,30*om],[t,1,sm],[t,3,3*sm],[t,6,6*sm],[t,12,12*sm],[r,1,um],[r,2,2*um],[n,1,Dp],[s,1,Xy],[s,3,3*Xy],[a,1,Gm]];function hi(zi){return(u(zi)<zi?Je:o(zi)<zi?Ye:t(zi)<zi?Kt:r(zi)<zi?tr:s(zi)<zi?n(zi)<zi?Fr:Kr:a(zi)<zi?hn:sn)(zi)}function Zi(zi,pa,_o,Co){if(zi==null&&(zi=10),typeof zi=="number"){var Ba=Math.abs(_o-pa)/zi,ms=Wp(function(au){return au[2]}).right(Yn,Ba);ms===Yn.length?(Co=Xh(pa/Gm,_o/Gm,zi),zi=a):ms?(ms=Yn[Ba/Yn[ms-1][2]<Yn[ms][2]/Ba?ms-1:ms],Co=ms[1],zi=ms[0]):(Co=Math.max(Xh(pa,_o,zi),1),zi=d)}return Co==null?zi:zi.every(Co)}return U.invert=function(zi){return new Date(ce(zi))},U.domain=function(zi){return arguments.length?ve(Sv.call(zi,Yy)):ve().map(Ky)},U.ticks=function(zi,pa){var _o=ve(),Co=_o[0],Ba=_o[_o.length-1],ms=Ba<Co,au;return ms&&(au=Co,Co=Ba,Ba=au),au=Zi(zi,Co,Ba,pa),au=au?au.range(Co,Ba+1):[],ms?au.reverse():au},U.tickFormat=function(zi,pa){return pa==null?hi:S(pa)},U.nice=function(zi,pa){var _o=ve();return(zi=Zi(zi,_o[0],_o[_o.length-1],pa))?ve(Fm(_o,zi)):U},U.copy=function(){return Wv(U,Qy(a,s,n,r,t,o,u,d,S))},U}function Jy(){return Kd.apply(Qy(Rd,Lp,Um,Rg,S0,C0,R_,L_,Gy).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mx(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lm(){var a=0,s=1,n,r,t,o,u=Id,d=!1,S;function U(ce){return isNaN(ce=+ce)?S:u(t===0?.5:(ce=(o(ce)-n)*t,d?Math.max(0,Math.min(1,ce)):ce))}return U.domain=function(ce){return arguments.length?(n=o(a=+ce[0]),r=o(s=+ce[1]),t=n===r?0:1/(r-n),U):[a,s]},U.clamp=function(ce){return arguments.length?(d=!!ce,U):d},U.interpolator=function(ce){return arguments.length?(u=ce,U):u},U.unknown=function(ce){return arguments.length?(S=ce,U):S},function(ce){return o=ce,n=ce(a),r=ce(s),t=n===r?0:1/(r-n),U}}function qp(a,s){return s.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function cm(){var a=Mv(lm()(Id));return a.copy=function(){return qp(a,cm())},Kp.apply(a,arguments)}function qy(){var a=loggish(lm()).domain([1,10]);return a.copy=function(){return qp(a,qy()).base(a.base())},initInterpolator.apply(a,arguments)}function Px(){var a=symlogish(lm());return a.copy=function(){return qp(a,Px()).constant(a.constant())},initInterpolator.apply(a,arguments)}function e1(){var a=powish(lm());return a.copy=function(){return qp(a,e1()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function O2(){return e1.apply(null,arguments).exponent(.5)}function t1(){var a=[],s=identity;function n(r){if(!isNaN(r=+r))return s((bisect(a,r)-1)/(a.length-1))}return n.domain=function(r){if(!arguments.length)return a.slice();a=[];for(var t=0,o=r.length,u;t<o;++t)u=r[t],u!=null&&!isNaN(u=+u)&&a.push(u);return a.sort(ascending),n},n.interpolator=function(r){return arguments.length?(s=r,n):s},n.copy=function(){return t1(s).domain(a)},initInterpolator.apply(n,arguments)}function fm(){var a=0,s=.5,n=1,r,t,o,u,d,S=Id,U,ce=!1,ve;function Je(Ye){return isNaN(Ye=+Ye)?ve:(Ye=.5+((Ye=+U(Ye))-t)*(Ye<t?u:d),S(ce?Math.max(0,Math.min(1,Ye)):Ye))}return Je.domain=function(Ye){return arguments.length?(r=U(a=+Ye[0]),t=U(s=+Ye[1]),o=U(n=+Ye[2]),u=r===t?0:.5/(t-r),d=t===o?0:.5/(o-t),Je):[a,s,n]},Je.clamp=function(Ye){return arguments.length?(ce=!!Ye,Je):ce},Je.interpolator=function(Ye){return arguments.length?(S=Ye,Je):S},Je.unknown=function(Ye){return arguments.length?(ve=Ye,Je):ve},function(Ye){return U=Ye,r=Ye(a),t=Ye(s),o=Ye(n),u=r===t?0:.5/(t-r),d=t===o?0:.5/(o-t),Je}}function r1(){var a=Mv(fm()(Id));return a.copy=function(){return qp(a,r1())},Kp.apply(a,arguments)}function n1(){var a=loggish(fm()).domain([.1,1,10]);return a.copy=function(){return copy(a,n1()).base(a.base())},initInterpolator.apply(a,arguments)}function Wm(){var a=symlogish(fm());return a.copy=function(){return copy(a,Wm()).constant(a.constant())},initInterpolator.apply(a,arguments)}function i1(){var a=powish(fm());return a.copy=function(){return copy(a,i1()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Ox(){return i1.apply(null,arguments).exponent(.5)}function Zg(a){var s,n=[];function r(t){return t==null?s:t}return r.invert=r,r.domain=r.range=function(t){return t?(n=t,t):n},r.unknown=function(t){return t?(s=t,t):s},r.copy=function(){return Zg(a).unknown(s)},r}var fp,Xm,Km,ep=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Ug=(fp={},(0,X.Z)(fp,Ee.vY.LINEAR,q0),(0,X.Z)(fp,Ee.vY.POWER,Ms),(0,X.Z)(fp,Ee.vY.LOG,Bt),(0,X.Z)(fp,Ee.vY.IDENTITY,Zg),(0,X.Z)(fp,Ee.vY.SEQUENTIAL,cm),(0,X.Z)(fp,Ee.vY.TIME,Jy),(0,X.Z)(fp,Ee.vY.QUANTILE,ju),(0,X.Z)(fp,Ee.vY.QUANTIZE,zl),(0,X.Z)(fp,Ee.vY.THRESHOLD,Hu),(0,X.Z)(fp,Ee.vY.CAT,G0),(0,X.Z)(fp,Ee.vY.DIVERGING,r1),fp),I2=(Xm=(0,ba.b2)(),Xm(Km=function(){function a(){(0,mr.Z)(this,a),(0,X.Z)(this,"scaleOptions",{})}return(0,Or.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("FeatureScalePlugin",(0,$t.Z)(we().mark(function u(){var d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(n.log(Ee.Or.ScaleInitStart,Ee.KD.INIT),t.scaleOptions=n.getScaleOptions(),S=o.getLayerStyleAttributes(),U=(d=n.getSource())===null||d===void 0?void 0:d.data.dataArray,!(Array.isArray(U)&&U.length===0)){ve.next=8;break}return ve.abrupt("return");case 8:t.caculateScalesForAttributes(S||[],U);case 9:n.log(Ee.Or.ScaleInitEnd,Ee.KD.INIT);case 10:case"end":return ve.stop()}},u)}))),n.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var u=(0,$t.Z)(we().mark(function d(S){var U,ce;return we().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(S){Je.next=2;break}return Je.abrupt("return",S);case 2:if(n.log(Ee.Or.ScaleInitStart,Ee.KD.UPDATE),t.scaleOptions=n.getScaleOptions(),U=o.getLayerStyleAttributes(),ce=n.getSource().data.dataArray,!(Array.isArray(ce)&&ce.length===0)){Je.next=8;break}return Je.abrupt("return",!0);case 8:return t.caculateScalesForAttributes(U||[],ce),n.log(Ee.Or.ScaleInitEnd,Ee.KD.UPDATE),n.layerModelNeedUpdate=!0,Je.abrupt("return",!0);case 12:case"end":return Je.stop()}},d)}));return function(d){return u.apply(this,arguments)}}()),n.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!n.layerModelNeedUpdate){t.scaleOptions=n.getScaleOptions();var u=o.getLayerStyleAttributes(),d=n.getSource().data.dataArray;if(!(Array.isArray(d)&&d.length===0)&&u){var S=u.filter(function(U){return U.needRescale});S.length&&t.caculateScalesForAttributes(S,d)}}})}},{key:"isNumber",value:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},{key:"caculateScalesForAttributes",value:function(n,r){var t=this;n.forEach(function(o){if(o.scale){var u=o.scale;u.names=t.parseFields(o.scale.field||[]);var d=[];u.names.forEach(function(S){var U;d.push(t.createScale(S,o.name,(U=o.scale)===null||U===void 0?void 0:U.values,r))}),d.some(function(S){return S.type===Ee.ee.VARIABLE})?(u.type=Ee.ee.VARIABLE,d.forEach(function(S){var U;if(!u.callback&&u.values!=="text")switch((U=S.option)===null||U===void 0?void 0:U.type){case Ee.vY.LOG:case Ee.vY.LINEAR:case Ee.vY.POWER:if(u.values&&u.values.length>2){var ce=S.scale.ticks(u.values.length);S.scale.domain(ce)}u.values?S.scale.range(u.values):S.scale.range(S.option.domain);break;case Ee.vY.QUANTILE:case Ee.vY.QUANTIZE:case Ee.vY.THRESHOLD:S.scale.range(u.values);break;case Ee.vY.IDENTITY:break;case Ee.vY.CAT:u.values?S.scale.range(u.values):S.scale.range(S.option.domain);break;case Ee.vY.DIVERGING:case Ee.vY.SEQUENTIAL:S.scale.interpolator(c0(u.values));break}if(u.values==="text"){var ve;S.scale.range((ve=S.option)===null||ve===void 0?void 0:ve.domain)}})):(u.type=Ee.ee.CONSTANT,u.defaultValues=d.map(function(S,U){return S.scale(u.names[U])})),u.scalers=d.map(function(S){return{field:S.field,func:S.scale,option:S.option}}),o.needRescale=!1}})}},{key:"parseFields",value:function(n){return Array.isArray(n)?n:(0,at.isString)(n)?n.split("*"):[n]}},{key:"createScale",value:function(n,r,t,o){var u,d,S=this.scaleOptions[r]&&((u=this.scaleOptions[r])===null||u===void 0?void 0:u.field)===n?this.scaleOptions[r]:this.scaleOptions[n],U={field:n,scale:void 0,type:Ee.ee.VARIABLE,option:S};if(!o||!o.length)return S&&S.type?U.scale=this.createDefaultScale(S):(U.scale=G0([n]),U.type=Ee.ee.CONSTANT),U;var ce=(d=o.find(function(Ye){return!(0,at.isNil)(Ye[n])}))===null||d===void 0?void 0:d[n];if(this.isNumber(n)||(0,at.isNil)(ce)&&!S)U.scale=G0([n]),U.type=Ee.ee.CONSTANT;else{var ve=S&&S.type||this.getDefaultType(ce);t==="text"&&(ve=Ee.vY.CAT);var Je=this.createScaleConfig(ve,n,S,o);U.scale=this.createDefaultScale(Je),U.option=Je}return U}},{key:"getDefaultType",value:function(n){var r=Ee.vY.LINEAR;return typeof n=="string"&&(r=ep.test(n)?Ee.vY.TIME:Ee.vY.CAT),r}},{key:"createScaleConfig",value:function(n,r,t,o){var u={type:n},d=(o==null?void 0:o.map(function(ce){return ce[r]}))||[];if(t!=null&&t.domain)u.domain=t==null?void 0:t.domain;else if(n===Ee.vY.CAT||n===Ee.vY.IDENTITY)u.domain=(0,at.uniq)(d);else if(n===Ee.vY.QUANTILE)u.domain=d;else if(n===Ee.vY.DIVERGING){var S=zd(d),U=(t==null?void 0:t.neutral)!==void 0?t==null?void 0:t.neutral:(S[0]+S[1])/2;u.domain=[S[0],U,S[1]]}else u.domain=zd(d);return(0,Ne.Z)((0,Ne.Z)({},u),t)}},{key:"createDefaultScale",value:function(n){var r=n.type,t=n.domain,o=n.unknown,u=n.clamp,d=n.nice,S=Ug[r]();return t&&S.domain&&S.domain(t),o&&S.unknown(o),u!==void 0&&S.clamp&&S.clamp(u),d!==void 0&&S.nice&&S.nice(d),S}}]),a}())||Km),Ix,Rx,R2=(Ix=(0,ba.b2)(),Ix(Rx=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var r=n.animateStatus;r&&n.models.forEach(function(t){t.addUniforms((0,Ne.Z)({},n.layerModel.getAnimateUniforms()))})})}}]),a}())||Rx),L2=function(){function a(s){var n=s.rendererService,r=s.layerService,t=s.parent;(0,mr.Z)(this,a),(0,X.Z)(this,"tileResource",new Map),(0,X.Z)(this,"layerTiles",[]),this.rendererService=n,this.layerService=r,this.parent=t}return(0,Or.Z)(a,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(n){return this.layerTiles.some(function(r){return r.key===n})}},{key:"addTile",value:function(n){this.layerTiles.push(n)}},{key:"getTile",value:function(n){return this.layerTiles.find(function(r){return r.key===n})}},{key:"getVisibleTileBylngLat",value:function(n){return this.layerTiles.find(function(r){return r.isLoaded&&r.visible&&r.lnglatInBounds(n)})}},{key:"removeTile",value:function(n){var r=this.layerTiles.findIndex(function(o){return o.key===n}),t=this.layerTiles.splice(r,1);t[0]&&t[0].destroy()}},{key:"updateTileVisible",value:function(n){var r=this.getTile(n.key);r==null||r.updateVisible(n.isVisible)}},{key:"isParentLoaded",value:function(n){var r=n.parent;if(!r)return!0;var t=this.getTile(r==null?void 0:r.key);return!!(t!=null&&t.isLoaded)}},{key:"isChildrenLoaded",value:function(n){var r=this,t=n==null?void 0:n.children;return t.length===0?!0:t.some(function(o){var u=r.getTile(o==null?void 0:o.key);return(u==null?void 0:u.isLoaded)===!1})}},{key:"render",value:function(){var s=(0,$t.Z)(we().mark(function r(){var t=this,o;return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:o=this.getRenderLayers(),o.map(function(){var S=(0,$t.Z)(we().mark(function U(ce){return we().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=2,t.layerService.renderLayer(ce);case 2:case"end":return Je.stop()}},U)}));return function(U){return S.apply(this,arguments)}}());case 2:case"end":return d.stop()}},r,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"getRenderLayers",value:function(){var n=this.layerTiles.filter(function(t){return t.visible&&t.isLoaded}),r=[];return n.map(function(t){return r.push.apply(r,(0,We.Z)(t.getLayers()))}),r}},{key:"getLayers",value:function(){var n=this.layerTiles.filter(function(t){return t.isLoaded}),r=[];return n.map(function(t){return r.push.apply(r,(0,We.Z)(t.getLayers()))}),r}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(n){return n.destroy()}),this.tileResource.clear()}}]),a}(),a1=m(1449),D2=m(32676);function k2(a,s,n){n===void 0&&(n={});var r=(0,ie.wA)(a),t=(0,ie.wA)(s),o=D2.union(r.coordinates,t.coordinates);return o.length===0?null:o.length===1?(0,a1.yu)(o[0],n.properties):(0,a1.tw)(o,n.properties)}var F2=k2,B2=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"getCombineFeature",value:function(n){var r=null,t=n[0];return n.map(function(o){var u=a1.yu(o.coordinates);r===null?r=u:r=F2(r,u)}),t&&(r.properties=(0,Ne.Z)({},t)),r}}]),a}(),Ym="select",Qm="active",N2=function(){function a(s){var n=s.layerService,r=s.tileLayerService,t=s.parent;(0,mr.Z)(this,a),(0,X.Z)(this,"tilePickID",new Map),this.layerService=n,this.tileLayerService=r,this.parent=t,this.tileSourceService=new B2}return(0,Or.Z)(a,[{key:"pickRender",value:function(n){var r=this.tileLayerService.getVisibleTileBylngLat(n.lngLat);if(r){var t=r.getMainLayer();t==null||t.layerPickService.pickRender(n)}}},{key:"pick",value:function(n,r){var t=this.parent.getContainer(),o=t.get(Ee.vK.IPickingService);if(n.type==="RasterLayer"){var u=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(u&&u.getMainLayer()!==void 0){var d=u.getMainLayer();return d.layerPickService.pickRasterLayer(d,r,this.parent)}return!1}return this.pickRender(r),o.pickFromPickingFBO(n,r)}},{key:"selectFeature",value:function(n){var r=(0,oi.Z)(n,3),t=r[0],o=r[1],u=r[2],d=this.color2PickId(t,o,u);this.tilePickID.set(Ym,d),this.updateHighLight(t,o,u,Ym)}},{key:"highlightPickedFeature",value:function(n){var r=(0,oi.Z)(n,3),t=r[0],o=r[1],u=r[2],d=this.color2PickId(t,o,u);this.tilePickID.set(Qm,d),this.updateHighLight(t,o,u,Qm)}},{key:"updateHighLight",value:function(n,r,t,o){this.tileLayerService.tiles.map(function(u){var d=u.getMainLayer();switch(o){case Ym:d==null||d.hooks.beforeSelect.call([n,r,t]);break;case Qm:d==null||d.hooks.beforeHighlight.call([n,r,t]);break}})}},{key:"setPickState",value:function(){var n=this.tilePickID.get(Ym),r=this.tilePickID.get(Qm);if(n){var t=this.pickId2Color(n),o=(0,oi.Z)(t,3),u=o[0],d=o[1],S=o[2];this.updateHighLight(u,d,S,Ym);return}if(r){var U=this.pickId2Color(r),ce=(0,oi.Z)(U,3),ve=ce[0],Je=ce[1],Ye=ce[2];this.updateHighLight(ve,Je,Ye,Qm);return}}},{key:"color2PickId",value:function(n,r,t){return(0,Ge.W0)(new Uint8Array([n,r,t]))}},{key:"pickId2Color",value:function(n){return(0,Ge.Z6)(n)}},{key:"getFeatureById",value:function(n){var r=this.tileLayerService.getTiles().filter(function(o){return o.visible}),t=[];return r.forEach(function(o){t.push.apply(t,(0,We.Z)(o.getFeatureById(n)))}),t}},{key:"pickRasterLayer",value:function(n,r,t){return!1}}]),a}(),Lx=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive"];function Dx(a){return a==="PolygonLayer"?vn:a==="LineLayer"?La:Sn}function kx(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}var Pv=function(){function a(s,n){(0,mr.Z)(this,a),(0,X.Z)(this,"visible",!0),(0,X.Z)(this,"layers",[]),(0,X.Z)(this,"isLoaded",!1),this.parent=n,this.sourceTile=s,this.x=s.x,this.y=s.y,this.z=s.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return(0,Or.Z)(a,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(n){var r=(0,oi.Z)(this.sourceTile.bounds,4),t=r[0],o=r[1],u=r[2],d=r[3],S=n.lng,U=n.lat;return S>=t&&S<=u&&U>=o&&U<=d}},{key:"getLayerOptions",value:function(){var n=this.parent.getLayerConfig();return(0,Ne.Z)((0,Ne.Z)({},n),{},{autoFit:!1,mask:kx(this.parent.type)||n.mask})}},{key:"addMask",value:function(){var s=(0,$t.Z)(we().mark(function r(t,o){var u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u=(0,Ee.e7)(this.parent.sceneContainer),o.setContainer(u,this.parent.sceneContainer),S.next=4,o.init();case 4:t.addMaskLayer(o);case 5:case"end":return S.stop()}},r,this)}));function n(r,t){return s.apply(this,arguments)}return n}()},{key:"addLayer",value:function(){var s=(0,$t.Z)(we().mark(function r(t){var o;return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t.isTileLayer=!0,o=(0,Ee.e7)(this.parent.sceneContainer),t.setContainer(o,this.parent.sceneContainer),this.layers.push(t),d.next=6,t.init();case 6:case"end":return d.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"updateVisible",value:function(n){this.visible=n,this.updateOptions("visible",n)}},{key:"updateOptions",value:function(n,r){this.layers.forEach(function(t){t.updateLayerConfig((0,X.Z)({},n,r))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(n){return[]}},{key:"getFeatureById",value:function(n){return[]}},{key:"destroy",value:function(){this.layers.forEach(function(n){return n.destroy()})}}]),a}();function o1(a){var s=$g();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function $g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var s1=function(a){(0,Zr.Z)(n,a);var s=o1(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return u=this.getSourceOption(),d=u.data.features[0].properties,S=new La().source(u.data,u.options).size(1).shape("line").color("red"),U=new Sn({minZoom:this.z-1,maxZoom:this.z+1}).source([d],{parser:{type:"json",x:"textLng",y:"textLat"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),ve.next=6,this.addLayer(S);case 6:return ve.next=8,this.addLayer(U);case 8:this.isLoaded=!0;case 9:case"end":return ve.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:o},options:{parser:{type:"geojson"},transforms:t.transforms}}}}]),n}(Pv);function u1(a){var s=z2();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function z2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Fx=function(a){(0,Zr.Z)(n,a);var s=u1(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),U=new An((0,Ne.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(Je){var Ye,Kt,tr=Je;U[tr]((Ye=u[tr])===null||Ye===void 0?void 0:Ye.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),ve.next=7,this.addLayer(U);case 7:this.isLoaded=!0;case 8:case"end":return ve.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),n}(Pv);function Bx(a){var s=Nx();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Nx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var hm=function(a){(0,Zr.Z)(n,a);var s=Bx(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),U=new Ad((0,Ne.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(Je){var Ye,Kt,tr=Je;U[tr]((Ye=u[tr])===null||Ye===void 0?void 0:Ye.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),ve.next=7,this.addLayer(U);case 7:this.isLoaded=!0;case 8:case"end":return ve.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getFeatures",value:function(t){if(!t)return[];var o=this.sourceTile.data;return o.getTileData(t)}},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.parent.getLayerConfig(),u=o.sourceLayer,d=o.featureId,S=this.getFeatures(u);return{data:{type:"FeatureCollection",features:S},options:{parser:{type:"geojson",featureId:d},transforms:t.transforms}}}}]),n}(Pv),zx=["rasterData"];function Zx(a){var s=Jm();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var jg=function(a){(0,Zr.Z)(n,a);var s=Zx(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),U=new el((0,Ne.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(Je){var Ye,Kt,tr=Je;U[tr]((Ye=u[tr])===null||Ye===void 0?void 0:Ye.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),ve.next=7,this.addLayer(U);case 7:this.isLoaded=!0;case 8:case"end":return ve.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.sourceTile.data.data,u=o.rasterData,d=(0,ls.Z)(o,zx);return{data:u,options:{parser:(0,Ne.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},d),transforms:t.transforms}}}}]),n}(Pv);function l1(a){var s=Ux();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ux(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var $x=function(a){(0,Zr.Z)(n,a);var s=l1(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U;return we().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),U=new el((0,Ne.Z)({},d)).source(S.data,S.options),u&&Object.keys(u).forEach(function(Je){var Ye,Kt,tr=Je;U[tr]((Ye=u[tr])===null||Ye===void 0?void 0:Ye.field,(Kt=u[tr])===null||Kt===void 0?void 0:Kt.values)}),ve.next=7,this.addLayer(U);case 7:this.isLoaded=!0;case 8:case"end":return ve.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),n}(Pv),qm=["rasterData"];function jx(a){var s=c1();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function c1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Hx={positions:[0,1],colors:["#000","#fff"]},Vx=function(a){(0,Zr.Z)(n,a);var s=jx(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je;return we().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=this.getSourceOption(),U=this.getLayerOptions(),ce=U.rampColors,ve=U.domain,this.colorTexture=this.parent.textureService.getColorTexture(ce,ve),Je=new el((0,Ne.Z)((0,Ne.Z)({},d),{},{colorTexture:this.colorTexture})).source(S.data,S.options),u&&Object.keys(u).forEach(function(tr){var Fr,Kr,hn=tr;Je[hn]((Fr=u[hn])===null||Fr===void 0?void 0:Fr.field,(Kr=u[hn])===null||Kr===void 0?void 0:Kr.values)}),Kt.next=9,this.addLayer(Je);case 9:this.isLoaded=!0;case 10:case"end":return Kt.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.sourceTile.data.data,u=o.rasterData,d=(0,ls.Z)(o,qm);return{data:u,options:{parser:(0,Ne.Z)({type:"raster",extent:this.sourceTile.bounds},d),transforms:t.transforms}}}},{key:"styleUpdate",value:function(){for(var t=this,o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];var S=u,U=S.rampColors,ce=U===void 0?Hx:U,ve=S.domain;this.colorTexture=this.parent.textureService.getColorTexture(ce,ve||(0,Ge.ZB)(ce)),this.layers.forEach(function(Je){return Je.style({colorTexture:t.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(t){return t.destroy()})}}]),n}(Pv);function Gx(a){var s=Wx();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Wx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var eg=function(a){(0,Zr.Z)(n,a);var s=Gx(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"initTileLayer",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce;return we().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(u=this.parent.getLayerAttributeConfig(),d=this.getLayerOptions(),S=Dx(this.parent.type),U=this.getSourceOption(),U){Je.next=7;break}return this.isLoaded=!0,Je.abrupt("return");case 7:if(ce=new S((0,Ne.Z)({},d)).source(U.data,U.options),Object.keys(u).forEach(function(Ye){var Kt,tr,Fr=Ye;ce[Fr]((Kt=u[Fr])===null||Kt===void 0?void 0:Kt.field,(tr=u[Fr])===null||tr===void 0?void 0:tr.values)}),!d.mask){Je.next=12;break}return Je.next=12,this.addTileMask(ce);case 12:return Je.next=14,this.addLayer(ce);case 14:this.setLayerMinMaxZoom(ce),this.isLoaded=!0;case 16:case"end":return Je.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"addTileMask",value:function(){var r=(0,$t.Z)(we().mark(function o(u){var d;return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return d=new Ad({layerType:"MaskLayer"}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}),U.next=3,this.addMask(u,d);case 3:case"end":return U.stop()}},o,this)}));function t(o){return r.apply(this,arguments)}return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),o=this.parent.getLayerConfig(),u=o.sourceLayer,d=u===void 0?"defaultLayer":u,S=o.featureId,U=S===void 0?"id":S,ce=this.getFeatures(d);return{data:{type:"FeatureCollection",features:ce},options:{parser:{type:"geojson",featureId:U},transforms:t.transforms}}}},{key:"setLayerMinMaxZoom",value:function(t){t.getModelType()==="text"&&t.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(t){var o=this.sourceTile.data;return o.getTileData(t)}},{key:"getFeatureById",value:function(t){var o=this.getMainLayer();if(!o)return[];var u=o.getSource().data.dataArray.filter(function(d){return d._id===t});return u}}]),n}(Pv);function Hg(a){var s=a.type;switch(s){case"PolygonLayer":return eg;case"LineLayer":return eg;case"PointLayer":return eg;case"TileDebugLayer":return s1;case"MaskLayer":return hm;case"RasterLayer":var n=a.getSource().parser.dataType;switch(n){case"rgb":case"customRGB":return jg;case"arraybuffer":case"customArrayBuffer":return Vx;case"terrainRGB":return $x;default:return Fx}default:return eg}}var f1=function(){function a(s){(0,mr.Z)(this,a),(0,X.Z)(this,"initedTileset",!1),(0,X.Z)(this,"viewchange",(0,at.debounce)(this.mapchange,24)),this.parent=s;var n=this.parent.getContainer();this.rendererService=n.get(Ee.vK.IRendererService),this.layerService=n.get(Ee.vK.ILayerService),this.mapService=n.get(Ee.vK.IMapService),this.pickingService=n.get(Ee.vK.IPickingService),this.tileLayerService=new L2({rendererService:this.rendererService,layerService:this.layerService,parent:s}),this.tilePickService=new N2({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:s}),this.parent.setLayerPickService(this.tilePickService),this.proxy(s),this.initTileSetManager()}return(0,Or.Z)(a,[{key:"initTileSetManager",value:function(){var n,r=this.parent.getSource();this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var t=this.getCurrentView(),o=t.latLonBounds,u=t.zoom;(n=this.tilesetManager)===null||n===void 0||n.update(u,o)}},{key:"mapchange",value:function(){var n,r=this.getCurrentView(),t=r.latLonBounds,o=r.zoom;if(this.mapService.version==="GAODE1.x"){var u=this.parent.getLayerConfig(),d=u.visible;o<2&&d?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):o>=2&&!d&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===o&&this.lastViewStates.latLonBounds.toString()===t.toString()||(this.lastViewStates={zoom:o,latLonBounds:t},(n=this.tilesetManager)===null||n===void 0||n.throttleUpdate(o,t))}},{key:"getCurrentView",value:function(){var n=this.mapService.getBounds(),r=[n[0][0],n[0][1],n[1][0],n[1][1]],t=this.mapService.getZoom();return{latLonBounds:r,zoom:t}}},{key:"bindTilesetEvent",value:function(){var n=this;this.tilesetManager.on("tile-loaded",function(r){}),this.tilesetManager.on("tile-unload",function(r){n.tileUnLoad(r)}),this.tilesetManager.on("tile-error",function(r,t){n.tileError(r)}),this.tilesetManager.on("tile-update",function(){n.tileUpdate()}),this.mapService.on("zoomend",function(){return n.mapchange()}),this.mapService.on("moveend",function(){return n.viewchange()})}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"tileLoaded",value:function(n){}},{key:"tileError",value:function(n){console.warn("error:",n)}},{key:"destroy",value:function(){var n;(n=this.tilesetManager)===null||n===void 0||n.destroy(),this.tileLayerService.destroy()}},{key:"tileUnLoad",value:function(n){this.tileLayerService.removeTile(n.key)}},{key:"tileUpdate",value:function(){var s=(0,$t.Z)(we().mark(function r(){var t=this,o,u;return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.tilesetManager){S.next=2;break}return S.abrupt("return");case 2:return o=this.parent.getMinZoom(),u=this.parent.getMaxZoom(),S.next=6,Promise.all(this.tilesetManager.tiles.filter(function(U){return U.isLoaded}).filter(function(U){return U.isVisibleChange}).filter(function(U){return U.data}).filter(function(U){return U.z>=o&&U.z<u}).map(function(){var U=(0,$t.Z)(we().mark(function ce(ve){var Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(t.tileLayerService.hasTile(ve.key)){tr.next=9;break}return Je=Hg(t.parent),Ye=new Je(ve,t.parent),tr.next=5,Ye.initTileLayer();case 5:t.tilePickService.setPickState(),Ye.getLayers().length!==0&&(t.tileLayerService.addTile(Ye),t.tileLayerService.updateTileVisible(ve),t.layerService.reRender()),tr.next=12;break;case 9:t.tileLayerService.updateTileVisible(ve),t.tilePickService.setPickState(),t.layerService.reRender();case 12:case"end":return tr.stop()}},ce)}));return function(ce){return U.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return S.stop()}},r,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"setPickState",value:function(n){}},{key:"pickRender",value:function(n){this.tilePickService.pickRender(n)}},{key:"selectFeature",value:function(n){this.tilePickService.selectFeature(n)}},{key:"highlightPickedFeature",value:function(n){this.tilePickService.highlightPickedFeature(n)}},{key:"proxy",value:function(n){var r=this;Lx.forEach(function(t){var o=n[t].bind(n);n[t]=function(){for(var u=arguments.length,d=new Array(u),S=0;S<u;S++)d[S]=arguments[S];return o.apply(void 0,d),r.getLayers().map(function(U){U[t].apply(U,d)}),t==="style"&&r.getTiles().forEach(function(U){return U.styleUpdate.apply(U,d)}),n}})}}]),a}(),h1,d1,Xx=(h1=(0,ba.b2)(),h1(d1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"build",value:function(){var s=(0,$t.Z)(we().mark(function r(t){return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t.prepareBuildModel(),u.next=3,t.buildModels();case 3:case"end":return u.stop()}},r)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"initLayerModel",value:function(){var s=(0,$t.Z)(we().mark(function r(t){return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.build(t);case 2:t.styleNeedUpdate=!1;case 3:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"prepareLayerModel",value:function(){var s=(0,$t.Z)(we().mark(function r(t){return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.build(t);case 2:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"apply",value:function(n){var r=this;n.hooks.init.tapPromise("LayerModelPlugin",(0,$t.Z)(we().mark(function t(){return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!n.getSource().isTile){u.next=4;break}return n.prepareBuildModel(),n.tileLayer=new f1(n),u.abrupt("return");case 4:return n.log(Ee.Or.BuildModelStart,Ee.KD.INIT),u.next=7,r.initLayerModel(n);case 7:n.log(Ee.Or.BuildModelEnd,Ee.KD.INIT);case 8:case"end":return u.stop()}},t)}))),n.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var t=(0,$t.Z)(we().mark(function o(u){return we().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(u){S.next=2;break}return S.abrupt("return",!1);case 2:if(!n.getSource().isTile){S.next=5;break}return n.tileLayer=new f1(n),S.abrupt("return",!1);case 5:return n.log(Ee.Or.BuildModelStart,Ee.KD.UPDATE),S.next=8,r.prepareLayerModel(n);case 8:return n.log(Ee.Or.BuildModelEnd,Ee.KD.UPDATE),S.abrupt("return",!0);case 10:case"end":return S.stop()}},o)}));return function(o){return t.apply(this,arguments)}}())}}]),a}())||d1),p1,v1,Kx=(p1=(0,ba.b2)(),p1(v1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n){n.hooks.afterInit.tap("LayerStylePlugin",function(){var r=n.getLayerConfig(),t=r.autoFit,o=r.fitBoundsOptions;t&&n.fitBounds(o)})}}]),a}())||v1),m1,g1,Yx=["type"],y1={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},_1={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Qx={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Jx={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function qx(a){var s={u_DirectionalLights:new Array(3).fill((0,Ne.Z)({},Qx)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,Ne.Z)({},Jx)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[_1]),a.forEach(function(n){var r=n.type,t=r===void 0?"directional":r,o=(0,ls.Z)(n,Yx),u=y1[t].lights,d=y1[t].num,S=s[d];s[u][S]=(0,Ne.Z)((0,Ne.Z)({},s[u][S]),o),s[d]++}),s}var eb=(m1=(0,ba.b2)(),m1(g1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LightingPlugin",function(){var r=n.getLayerConfig(),t=r.enableLighting;t&&n.models.forEach(function(o){return o.addUniforms((0,Ne.Z)({},qx()))})})}}]),a}())||g1),x1,b1,E1=(x1=(0,ba.b2)(),x1(b1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.rendererService,u=r.postProcessingPassFactory,d=r.normalPassFactory;n.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var S=n.getLayerConfig(),U=S.enableMultiPassRenderer,ce=S.passes,ve=ce===void 0?[]:ce;t.enabled=!!U&&n.getLayerConfig().enableMultiPassRenderer!==!1,t.enabled&&(n.multiPassRenderer=hf(n,ve,u,d),n.multiPassRenderer.setRenderFlag(!0))}),n.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(t.enabled){var S=o.getViewportSize(),U=S.width,ce=S.height;n.multiPassRenderer.resize(U,ce)}})}}]),a}())||b1),S1,C1,dm={NONE:0,ENCODE:1,HIGHLIGHT:2},tb=(S1=(0,ba.b2)(),S1(C1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n,r){var t=r.styleAttributeService;n.hooks.init.tapPromise("PixelPickingPlugin",function(){var o=n.getLayerConfig(),u=o.enablePicking;t.registerStyleAttribute({name:"pickingColor",type:Ee.GC.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:Ee.gl.FLOAT},size:3,update:function(S){var U=S.id;return u?(0,Ge.Z6)(U):[0,0,0]}}})}),n.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var o=n.getLayerConfig(),u=o.enablePicking;u&&n.isVisible()&&n.models.forEach(function(d){return d.addUniforms({u_PickingStage:dm.ENCODE})})}),n.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var o=n.getLayerConfig(),u=o.enablePicking;u&&n.isVisible()&&n.models.forEach(function(d){return d.addUniforms({u_PickingStage:dm.HIGHLIGHT})})}),n.hooks.beforeHighlight.tap("PixelPickingPlugin",function(o){var u=n.getLayerConfig(),d=u.highlightColor,S=u.activeMix,U=S===void 0?0:S,ce=typeof d=="string"?(0,Ge.CI)(d):d||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:(0,Ge.W0)(new Uint8Array(o))}),n.models.forEach(function(ve){return ve.addUniforms({u_PickingStage:dm.HIGHLIGHT,u_PickingColor:o,u_HighlightColor:ce.map(function(Je){return Je*255}),u_activeMix:U})})}),n.hooks.beforeSelect.tap("PixelPickingPlugin",function(o){var u=n.getLayerConfig(),d=u.selectColor,S=u.selectMix,U=S===void 0?0:S,ce=typeof d=="string"?(0,Ge.CI)(d):d||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:(0,Ge.W0)(new Uint8Array(o))}),n.models.forEach(function(ve){return ve.addUniforms({u_PickingStage:dm.HIGHLIGHT,u_PickingColor:o,u_HighlightColor:ce.map(function(Je){return Je*255}),u_activeMix:U,u_CurrentSelectedId:o,u_SelectColor:ce.map(function(Je){return Je*255}),u_EnableSelect:1})})})}}]),a}())||C1),rb=["mvt","geojsonvt","testTile"];function nb(a){var s=a.getSource();return rb.includes(s.parser.type)}function Z2(a){return a.getContext?{width:a.width/DOM.DPR,height:a.height/DOM.DPR}:a.getBoundingClientRect()}var w1,Vg,ib=(w1=(0,ba.b2)(),w1(Vg=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){nb(n)||t.registerBuiltinAttributes(o,n)})}},{key:"registerBuiltinAttributes",value:function(n,r){if(r.type==="MaskLayer"){this.registerPositionAttribute(n);return}this.registerPositionAttribute(n),this.registerColorAttribute(n),this.registerVertexIdAttribute(n)}},{key:"registerPositionAttribute",value:function(n){n.registerStyleAttribute({name:"position",type:Ee.GC.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:Ee.gl.FLOAT},size:3,update:function(t,o,u){return u.length===2?[u[0],u[1],0]:[u[0],u[1],u[2]]}}})}},{key:"registerFilterAttribute",value:function(n){n.registerStyleAttribute({name:"filter",type:Ee.GC.Attribute,descriptor:{name:"filter",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(t){var o=t.filter;return o?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(n){n.registerStyleAttribute({name:"color",type:Ee.GC.Attribute,descriptor:{name:"a_Color",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:4,update:function(t){var o=t.color;return!o||!o.length?[1,1,1,1]:o}}})}},{key:"registerVertexIdAttribute",value:function(n){n.registerStyleAttribute({name:"vertexId",type:Ee.GC.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:Ee.gl.DYNAMIC_DRAW,data:[],type:Ee.gl.FLOAT},size:1,update:function(t,o){return[o]}}})}}]),a}())||Vg),A1,T1,M1,P1,O1,I1,P0,R1,L1,D1,k1,ab=(A1=(0,ba.b2)(),T1=(0,ba.f3)(Ee.vK.ICameraService),M1=(0,ba.f3)(Ee.vK.ICoordinateSystemService),P1=(0,ba.f3)(Ee.vK.IRendererService),O1=(0,ba.f3)(Ee.vK.IMapService),A1(I1=(P0=function(){function a(){(0,mr.Z)(this,a),(0,Ul.Z)(this,"cameraService",R1,this),(0,Ul.Z)(this,"coordinateSystemService",L1,this),(0,Ul.Z)(this,"rendererService",D1,this),(0,Ul.Z)(this,"mapService",k1,this)}return(0,Or.Z)(a,[{key:"apply",value:function(n){var r=this,t=this.mapService.version,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u=[0,0];n.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var d=n.getLayerConfig().tileOrigin;r.coordinateSystemService.refresh(d),t==="GAODE2.x"&&(r.setLayerCenter(n),o=r.mapService.map.customCoords.getMVPMatrix(),u=r.mapService.getCustomCoordCenter());var S=r.rendererService.getViewportSize(),U=S.width,ce=S.height;n.models.forEach(function(ve){var Je;ve.addUniforms((Je={},(0,X.Z)(Je,Ee.lv.ProjectionMatrix,r.cameraService.getProjectionMatrix()),(0,X.Z)(Je,Ee.lv.ViewMatrix,r.cameraService.getViewMatrix()),(0,X.Z)(Je,Ee.lv.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),(0,X.Z)(Je,Ee.lv.Zoom,r.cameraService.getZoom()),(0,X.Z)(Je,Ee.lv.ZoomScale,r.cameraService.getZoomScale()),(0,X.Z)(Je,Ee.lv.FocalDistance,r.cameraService.getFocalDistance()),(0,X.Z)(Je,Ee.lv.CameraPosition,r.cameraService.getCameraPosition()),(0,X.Z)(Je,Ee.kw.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),(0,X.Z)(Je,Ee.kw.ViewportCenter,r.coordinateSystemService.getViewportCenter()),(0,X.Z)(Je,Ee.kw.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),(0,X.Z)(Je,Ee.kw.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),(0,X.Z)(Je,Ee.kw.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),(0,X.Z)(Je,Ee.kw.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),(0,X.Z)(Je,Ee.kw.Mvp,o),(0,X.Z)(Je,"u_SceneCenterMKT",u),(0,X.Z)(Je,"u_ViewportSize",[U,ce]),(0,X.Z)(Je,"u_ModelMatrix",r.cameraService.getModelMatrix()),(0,X.Z)(Je,"u_DevicePixelRatio",Ge.vO.devicePixelRatio),(0,X.Z)(Je,"u_PickingBuffer",n.getLayerConfig().pickingBuffer||0),(0,X.Z)(Je,"u_shaderPick",Number(n.getShaderPickStat())),Je))})})}},{key:"setLayerCenter",value:function(n){n.coordCenter===void 0&&(n.coordCenter=n.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(n.coordCenter)}}]),a}(),R1=(0,Rl.Z)(P0.prototype,"cameraService",[T1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L1=(0,Rl.Z)(P0.prototype,"coordinateSystemService",[M1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D1=(0,Rl.Z)(P0.prototype,"rendererService",[P1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k1=(0,Rl.Z)(P0.prototype,"mapService",[O1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P0))||I1),F1,B1,ob=(F1=(0,ba.b2)(),F1(B1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("UpdateModelPlugin",function(){n.layerModel&&n.layerModel.needUpdate().then(function(r){r&&n.renderLayers()})}),n.hooks.afterRender.tap("UpdateModelPlugin",function(){n.layerModelNeedUpdate=!1})}}]),a}())||B1),N1,z1,sb=(N1=(0,ba.b2)(),N1(z1=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"apply",value:function(n,r){var t=this,o=r.styleAttributeService;n.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){t.initStyleAttribute(n,{styleAttributeService:o})}),n.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){n.layerModelNeedUpdate||n.inited&&t.updateStyleAttribute(n,{styleAttributeService:o})})}},{key:"updateStyleAttribute",value:function(n,r){var t=r.styleAttributeService,o=t.getLayerStyleAttributes()||[],u=t.getLayerStyleAttribute("filter");if(u&&u.needRegenerateVertices){n.layerModelNeedUpdate=!0,o.forEach(function(d){return d.needRegenerateVertices=!1});return}o.filter(function(d){return d.needRegenerateVertices}).forEach(function(d){t.updateAttributeByFeatureRange(d.name,n.getEncodedData(),d.featureRange.startIndex,d.featureRange.endIndex,n),d.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(n,r){var t=r.styleAttributeService,o=t.getLayerStyleAttributes()||[];o.filter(function(u){return u.needRegenerateVertices}).forEach(function(u){t.updateAttributeByFeatureRange(u.name,n.getEncodedData(),u.featureRange.startIndex,u.featureRange.endIndex),u.needRegenerateVertices=!1})}}]),a}())||z1);Ee.nC.bind(Ee.vK.ILayerPlugin).to(r0).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(ib).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(I2).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(cv).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(Kx).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(sb).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(ob).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(E1).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(ab).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(R2).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(eb).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(tb).inRequestScope(),Ee.nC.bind(Ee.vK.ILayerPlugin).to(Xx).inRequestScope();var pm=m(16912),O0=m(5647),ub=m(58304);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var hp;(function(a){a.notload="notload",a.loading="loading",a.loaded="loaded",a.failed="failed"})(hp||(hp={}));var dp={key:"",AMap:{version:"2.0",plugins:[]}},ev={AMap:hp.notload},lb={AMap:[]},cb=[],fb=function(s){if(typeof s=="function"){if(ev.AMap===hp.loaded){s(window.AMap);return}cb.push(s)}},Z1=function(){var a=(0,$t.Z)(we().mark(function s(n){return we().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(o,u){if(ev.AMap===hp.failed)u("");else if(ev.AMap===hp.notload){var d=n.key,S=n.version,U=n.plugins;if(!d){u("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&u("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),dp.key=d,dp.AMap.version=S||dp.AMap.version,dp.AMap.plugins=U||dp.AMap.plugins,ev.AMap=hp.loading;var ce=document.body||document.head;window._onAPILoaded=function(Kt){Kt?(ev.AMap=hp.failed,u(Kt)):(ev.AMap=hp.loaded,o(null))};var ve=document.createElement("script");ve.type="text/javascript",ve.async=!1,ve.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+dp.AMap.version+"&key="+d+"&plugin="+dp.AMap.plugins.join(","),ve.onerror=function(Kt){ev.AMap=hp.failed,u(Kt)},ce.appendChild(ve)}else if(ev.AMap===hp.loaded){if(n.key&&n.key!==dp.key){u("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(n.version&&n.version!==dp.AMap.version){u("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var Je=[];n.plugins&&n.plugins.forEach(function(Kt){dp.AMap.plugins.indexOf(Kt)===-1&&Je.push(Kt)}),Je.length&&window.AMap.plugin(Je,function(){o(window.AMap)})}else{if(n.key&&n.key!==dp.key){u("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(n.version&&n.version!==dp.AMap.version){u("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var Ye=[];n.plugins&&n.plugins.forEach(function(Kt){dp.AMap.plugins.indexOf(Kt)===-1&&Ye.push(Kt)}),fb(function(){Ye.length&&window.AMap.plugin(Ye,function(){o(window.AMap)})})}}));case 1:case"end":return t.stop()}},s)}));return function(n){return a.apply(this,arguments)}}();function U1(){delete window.AMap,dp={key:"",AMap:{version:"1.4.15",plugins:[]}},ev={AMap:hp.notload},lb={AMap:[]}}var hb={load:Z1,reset:U1},vm=Math.PI/180,$1=function(){function a(){(0,mr.Z)(this,a),(0,X.Z)(this,"projectionMatrix",Vo.create()),(0,X.Z)(this,"viewMatrix",Vo.create()),(0,X.Z)(this,"viewProjectionMatrix",Vo.create()),(0,X.Z)(this,"ViewProjectionMatrixUncentered",Vo.create()),(0,X.Z)(this,"viewUncenteredMatrix",Vo.create())}return(0,Or.Z)(a,[{key:"syncWithMapCamera",value:function(n){var r=n.zoom,t=r===void 0?1:r,o=n.pitch,u=o===void 0?0:o,d=n.bearing,S=d===void 0?0:d,U=n.center,ce=U===void 0?[0,0]:U,ve=n.offsetOrigin,Je=ve===void 0?[0,0]:ve,Ye=n.cameraHeight,Kt=Ye===void 0?1:Ye,tr=n.aspect,Fr=tr===void 0?1:tr,Kr=n.near,hn=Kr===void 0?.1:Kr,sn=n.far,Yn=sn===void 0?1e3:sn,hi=n.fov,Zi=hi===void 0?0:hi;this.zoom=t,this.center=ce;var zi=u*vm,pa=(360-S)*vm;Vo.perspective(this.projectionMatrix,Zi,Fr,hn,Yn);var _o=Qo.fromValues(Kt*Math.sin(zi)*Math.sin(pa),-Kt*Math.sin(zi)*Math.cos(pa),Kt*Math.cos(zi)),Co=Qo.fromValues(-Math.cos(zi)*Math.sin(pa),Math.cos(zi)*Math.cos(pa),Math.sin(zi));Vo.lookAt(this.viewMatrix,_o,Qo.fromValues(0,0,0),Co),this.viewUncenteredMatrix=Vo.clone(this.viewMatrix),Vo.translate(this.viewMatrix,this.viewMatrix,Qo.fromValues(-Je[0],Je[1],0)),Vo.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Vo.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var n=(0,oi.Z)(this.center,2),r=n[0],t=n[1];return[r,t]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n){var r=85.0511287798,t=Math.max(Math.min(r,n[1]),-r),o=256<<20,u=Math.PI/180,d=n[0]*u,S=t*u;S=Math.log(Math.tan(Math.PI/4+S/2));var U=.5/Math.PI,ce=.5,ve=-.5/Math.PI;return u=.5,d=o*(U*d+ce)-215440491,S=-(o*(ve*S+u)-106744817),[d,S]}}]),a}(),Gg=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],j1,Yv;function db(a){var s=Wg();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Wg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}window.forceWebGL=!0;var tg="15cd8a57710d40c9b7c0e3cc120f1200",pb="1.4.15",Xg=!1,rg=[],vb=12,H1=(j1=(0,ba.b2)(),j1(Yv=function(a){(0,Zr.Z)(n,a);var s=db(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"version",fl.G["GAODE1.x"]),(0,X.Z)((0,lr.Z)(r),"handleCameraChanged",function(d){var S=d.camera,U=S.fov,ce=S.near,ve=S.far,Je=S.height,Ye=S.pitch,Kt=S.rotation,tr=S.aspect,Fr=S.position,Kr=r.getCenter(),hn=Kr.lng,sn=Kr.lat;if(r.emit("mapchange"),r.cameraChangedCallback){r.viewport.syncWithMapCamera({aspect:tr,bearing:360-Kt,far:ve,fov:U,cameraHeight:Je,near:ce,pitch:Ye,zoom:r.map.getZoom()-1,center:[hn,sn],offsetOrigin:[Fr.x,Fr.y]});var Yn=r.config.offsetZoom,hi=Yn===void 0?vb:Yn;r.viewport.getZoom()>hi?r.coordinateSystemService.setCoordinateSystem(Ee.lo.P20_OFFSET):r.coordinateSystemService.setCoordinateSystem(Ee.lo.P20),r.cameraChangedCallback(r.viewport)}}),r}return(0,Or.Z)(n,[{key:"getModelMatrix",value:function(t,o,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],S=this.viewport.projectFlat(t),U=Vo.create();return Vo.translate(U,U,Qo.fromValues(S[0],S[1],o)),Vo.scale(U,U,Qo.fromValues(d[0],d[1],d[2])),Vo.rotateX(U,U,u[0]),Vo.rotateY(U,U,u[1]),Vo.rotateZ(U,U,u[2]),U}},{key:"init",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn;return we().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:return d=this.config,S=d.id,U=d.style,ce=U===void 0?"light":U,ve=d.minZoom,Je=ve===void 0?0:ve,Ye=d.maxZoom,Kt=Ye===void 0?18:Ye,tr=d.token,Fr=tr===void 0?tg:tr,Kr=d.mapInstance,hn=d.plugin,sn=hn===void 0?[]:hn,Yn=(0,ls.Z)(d,Gg),Zi.next=3,new Promise(function(zi){var pa=function(){if(Kr)u.map=Kr,u.$mapContainer=u.map.getContainer(),setTimeout(function(){u.map.on("camerachange",u.handleCameraChanged),zi()},30);else{u.$mapContainer=u.creatMapContainer(S);var Co=(0,Ne.Z)({mapStyle:u.getMapStyleValue(ce),zooms:[Je,Kt],viewMode:"3D"},Yn);Co.zoom&&(Co.zoom+=1);var Ba=new AMap.Map(u.$mapContainer,Co);Ba.on("camerachange",u.handleCameraChanged),Ba.on("camerachange",function(){setTimeout(function(){return u.handleAfterMapChange()})}),u.map=Ba,setTimeout(function(){zi()},10)}};!Xg&&!Kr?(Fr===tg&&console.warn(u.configService.getSceneWarninfo("MapToken")),Xg=!0,sn.push("Map3D"),hb.load({key:Fr,version:pb,plugins:sn}).then(function(_o){pa(),rg.length&&(rg.forEach(function(Co){return Co()}),rg=[])}).catch(function(_o){throw new Error(_o)})):Xg&&window.AMap||Kr?pa():rg.push(pa)});case 3:this.viewport=new $1;case 4:case"end":return Zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"meterToCoord",value:function(t,o){var u=AMap.GeometryUtil.distance((0,O0.Z)(AMap.LngLat,(0,We.Z)(t)),(0,O0.Z)(AMap.LngLat,(0,We.Z)(o))),d=this.lngLatToCoord(t),S=(0,oi.Z)(d,2),U=S[0],ce=S[1],ve=this.lngLatToCoord(o),Je=(0,oi.Z)(ve,2),Ye=Je[0],Kt=Je[1],tr=Math.sqrt(Math.pow(U-Ye,2)+Math.pow(ce-Kt,2));return tr/u}},{key:"updateView",value:function(t){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(t){var o,u=(o=this.getContainer())===null||o===void 0?void 0:o.getElementsByClassName("amap-layer")[0],d=t==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return d}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}}]),n}(ub.Z))||Yv);function V1(a){var s=mb();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function mb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var gb=function(a){(0,Zr.Z)(n,a);var s=V1(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getServiceConstructor",value:function(){return H1}}]),n}(pm.Z),G1=m(10438),W1=m(99874),yb=m.n(W1);function X1(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=_b(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function _b(a,s){if(a){if(typeof a=="string")return Kg(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kg(a,s)}}function Kg(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var mm;function Yg(a,s,n){var r=n-s,t=((a-s)%r+r)%r+s;return t===s?n:t}function tv(a,s,n){return Math.min(n,Math.max(s,a))}function Tp(a,s,n){return a*(1-n)+s*n}function Qg(a,s,n,r){var t=new(yb())(a,s,n,r);return function(o){return t.solve(o)}}var Jg=Qg(.25,.1,.25,1);function K1(){return Ge.eW||!Ge.vO.matchMedia?!1:(mm==null&&(mm=Ge.vO.matchMedia("(prefers-reduced-motion: reduce)")),mm.matches)}function qg(a,s){var n={},r=X1(s),t;try{for(r.s();!(t=r.n()).done;){var o=t.value;o in a&&(n[o]=a[o])}}catch(u){r.e(u)}finally{r.f()}return n}var Qv=Ge.eW?Date.now.bind(Date):Ge.vO.performance&&Ge.vO.performance.now?Ge.vO.performance.now.bind(Ge.vO.performance):Date.now.bind(Date),xb=Ge.vO.requestAnimationFrame||Ge.vO.mozRequestAnimationFrame||Ge.vO.webkitRequestAnimationFrame||Ge.vO.msRequestAnimationFrame,Y1=Ge.vO.cancelAnimationFrame||Ge.vO.mozCancelAnimationFrame||Ge.vO.webkitCancelAnimationFrame||Ge.vO.msCancelAnimationFrame;function ng(a){var s=xb(a);return{cancel:function(){return Y1(s)}}}var Q1=63710088e-1,Oh=function(){function a(s,n){if((0,mr.Z)(this,a),isNaN(s)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(s,", ").concat(n,")"));if(this.lng=+s,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,Or.Z)(a,[{key:"wrap",value:function(){return new a(Yg(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(n){var r=Math.PI/180,t=this.lat*r,o=n.lat*r,u=Math.sin(t)*Math.sin(o)+Math.cos(t)*Math.cos(o)*Math.cos((n.lng-this.lng)*r),d=Q1*Math.acos(Math.min(u,1));return d}}],[{key:"convert",value:function(n){if(n instanceof a)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new a(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&(0,st.Z)(n)==="object"&&n!==null){var r="lng"in n?n.lng:n.lon;return new a(Number(r),Number(n.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),a}(),gm=function(){function a(s,n){(0,mr.Z)(this,a),s&&(n?this.setSouthWest(s).setNorthEast(n):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}return(0,Or.Z)(a,[{key:"setNorthEast",value:function(n){return this.ne=n instanceof Oh?new Oh(n.lng,n.lat):Oh.convert(n),this}},{key:"setSouthWest",value:function(n){return this.sw=n instanceof Oh?new Oh(n.lng,n.lat):Oh.convert(n),this}},{key:"extend",value:function(n){var r=this.sw,t=this.ne,o,u;if(n instanceof Oh)o=n,u=n;else if(n instanceof a){if(o=n.sw,u=n.ne,!o||!u)return this}else{if(Array.isArray(n))if(n.length===4||n.every(Array.isArray)){var d=n;return this.extend(a.convert(d))}else{var S=n;return this.extend(Oh.convert(S))}return this}return!r&&!t?(this.sw=new Oh(o.lng,o.lat),this.ne=new Oh(u.lng,u.lat)):(r.lng=Math.min(o.lng,r.lng),r.lat=Math.min(o.lat,r.lat),t.lng=Math.max(u.lng,t.lng),t.lat=Math.max(u.lat,t.lat)),this}},{key:"getCenter",value:function(){return new Oh((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Oh(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Oh(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(n){var r=Oh.convert(n),t=r.lng,o=r.lat,u=this.sw.lat<=o&&o<=this.ne.lat,d=this.sw.lng<=t&&t<=this.ne.lng;return this.sw.lng>this.ne.lng&&(d=this.sw.lng>=t&&t>=this.ne.lng),u&&d}}],[{key:"convert",value:function(n){return n instanceof a?n:new a(n)}}]),a}(),mc=function(){function a(s,n){(0,mr.Z)(this,a),this.x=s,this.y=n}return(0,Or.Z)(a,[{key:"clone",value:function(){return new a(this.x,this.y)}},{key:"_add",value:function(n){return this.x+=n.x,this.y+=n.y,this}},{key:"add",value:function(n){return this.clone()._add(n)}},{key:"_sub",value:function(n){return this.x-=n.x,this.y-=n.y,this}},{key:"sub",value:function(n){return this.clone()._sub(n)}},{key:"_multByPoint",value:function(n){return this.x*=n.x,this.y*=n.y,this}},{key:"multByPoint",value:function(n){return this.clone()._multByPoint(n)}},{key:"_divByPoint",value:function(n){return this.x/=n.x,this.y/=n.y,this}},{key:"divByPoint",value:function(n){return this.clone()._divByPoint(n)}},{key:"_mult",value:function(n){return this.x*=n,this.y*=n,this}},{key:"mult",value:function(n){return this.clone()._mult(n)}},{key:"_div",value:function(n){return this.x/=n,this.y/=n,this}},{key:"div",value:function(n){return this.clone()._div(n)}},{key:"_rotate",value:function(n){var r=Math.cos(n),t=Math.sin(n),o=r*this.x-t*this.y,u=t*this.x+r*this.y;return this.x=o,this.y=u,this}},{key:"rotate",value:function(n){return this.clone()._rotate(n)}},{key:"_rotateAround",value:function(n,r){var t=Math.cos(n),o=Math.sin(n),u=r.x+t*(this.x-r.x)-o*(this.y-r.y),d=r.y+o*(this.x-r.x)+t*(this.y-r.y);return this.x=u,this.y=d,this}},{key:"roateAround",value:function(n,r){return this.clone()._rotateAround(n,r)}},{key:"_matMult",value:function(n){var r=n[0]*this.x+n[1]*this.y,t=n[2]*this.x+n[3]*this.y;return this.x=r,this.y=t,this}},{key:"matMult",value:function(n){return this.clone()._matMult(n)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var n=this.y;return this.y=this.x,this.x=-n,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(n){return this.x===n.x&&this.y===n.y}},{key:"dist",value:function(n){return Math.sqrt(this.distSqr(n))}},{key:"distSqr",value:function(n){var r=n.x-this.x,t=n.y-this.y;return r*r+t*t}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(n){return Math.atan2(this.y-n.y,this.x-n.x)}},{key:"angleWith",value:function(n){return this.angleWithSep(n.x,n.y)}},{key:"angleWithSep",value:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r)}}],[{key:"convert",value:function(n){return n instanceof a?n:Array.isArray(n)?new a(n[0],n[1]):n}}]),a}(),J1=m(49685);function bb(){var a=new J1.WT(4);return J1.WT!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a}function U2(a){var s=new glMatrix.ARRAY_TYPE(4);return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s}function $2(a,s){return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a}function Eb(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a}function q1(a,s,n,r){var t=new glMatrix.ARRAY_TYPE(4);return t[0]=a,t[1]=s,t[2]=n,t[3]=r,t}function j2(a,s,n,r,t){return a[0]=s,a[1]=n,a[2]=r,a[3]=t,a}function H2(a,s){if(a===s){var n=s[1];a[1]=s[2],a[2]=n}else a[0]=s[0],a[1]=s[2],a[2]=s[1],a[3]=s[3];return a}function ey(a,s){var n=s[0],r=s[1],t=s[2],o=s[3],u=n*o-t*r;return u?(u=1/u,a[0]=o*u,a[1]=-r*u,a[2]=-t*u,a[3]=n*u,a):null}function V2(a,s){var n=s[0];return a[0]=s[3],a[1]=-s[1],a[2]=-s[2],a[3]=n,a}function G2(a){return a[0]*a[3]-a[2]*a[1]}function e_(a,s,n){var r=s[0],t=s[1],o=s[2],u=s[3],d=n[0],S=n[1],U=n[2],ce=n[3];return a[0]=r*d+o*S,a[1]=t*d+u*S,a[2]=r*U+o*ce,a[3]=t*U+u*ce,a}function Sb(a,s,n){var r=s[0],t=s[1],o=s[2],u=s[3],d=Math.sin(n),S=Math.cos(n);return a[0]=r*S+o*d,a[1]=t*S+u*d,a[2]=r*-d+o*S,a[3]=t*-d+u*S,a}function W2(a,s,n){var r=s[0],t=s[1],o=s[2],u=s[3],d=n[0],S=n[1];return a[0]=r*d,a[1]=t*d,a[2]=o*S,a[3]=u*S,a}function X2(a,s){var n=Math.sin(s),r=Math.cos(s);return a[0]=r,a[1]=n,a[2]=-n,a[3]=r,a}function K2(a,s){return a[0]=s[0],a[1]=0,a[2]=0,a[3]=s[1],a}function Y2(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function Q2(a){return Math.hypot(a[0],a[1],a[2],a[3])}function J2(a,s,n,r){return a[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-a[2]*n[1],[a,s,n]}function q2(a,s,n){return a[0]=s[0]+n[0],a[1]=s[1]+n[1],a[2]=s[2]+n[2],a[3]=s[3]+n[3],a}function eE(a,s,n){return a[0]=s[0]-n[0],a[1]=s[1]-n[1],a[2]=s[2]-n[2],a[3]=s[3]-n[3],a}function tE(a,s){return a[0]===s[0]&&a[1]===s[1]&&a[2]===s[2]&&a[3]===s[3]}function rE(a,s){var n=a[0],r=a[1],t=a[2],o=a[3],u=s[0],d=s[1],S=s[2],U=s[3];return Math.abs(n-u)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-d)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(t-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(S))&&Math.abs(o-U)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(U))}function nE(a,s,n){return a[0]=s[0]*n,a[1]=s[1]*n,a[2]=s[2]*n,a[3]=s[3]*n,a}function iE(a,s,n,r){return a[0]=s[0]+n[0]*r,a[1]=s[1]+n[1]*r,a[2]=s[2]+n[2]*r,a[3]=s[3]+n[3]*r,a}var aE=null,oE=null,Cb=function(){function a(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,mr.Z)(this,a),isNaN(s)||s<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(t)||t<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=n,this.left=r,this.right=t}return(0,Or.Z)(a,[{key:"interpolate",value:function(n,r,t){return r.top!=null&&n.top!=null&&(this.top=Tp(n.top,r.top,t)),r.bottom!=null&&n.bottom!=null&&(this.bottom=Tp(n.bottom,r.bottom,t)),r.left!=null&&n.left!=null&&(this.left=Tp(n.left,r.left,t)),r.right!=null&&n.right!=null&&(this.right=Tp(n.right,r.right,t)),this}},{key:"getCenter",value:function(n,r){var t=tv((this.left+n-this.right)/2,0,n),o=tv((this.top+r-this.bottom)/2,0,r);return new mc(t,o)}},{key:"equals",value:function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}},{key:"clone",value:function(){return new a(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),a}(),t_=2*Math.PI*Q1;function r_(a){return t_*Math.cos(a*Math.PI/180)}function ig(a){return(180+a)/360}function ag(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function ty(a,s){return a/r_(s)}function wb(a){return a*360-180}function ry(a){var s=180-a*360;return 360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90}function Ab(a,s){return a*r_(ry(s))}function Tb(a){return 1/Math.cos(a*Math.PI/180)}var I0=function(){function a(s,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,mr.Z)(this,a),this.x=+s,this.y=+n,this.z=+r}return(0,Or.Z)(a,[{key:"toLngLat",value:function(){return new Oh(wb(this.x),ry(this.y))}},{key:"toAltitude",value:function(){return Ab(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/t_*Tb(ry(this.y))}}],[{key:"fromLngLat",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=Oh.convert(n);return new a(ig(t.lng),ag(t.lat),ty(r,t.lat))}}]),a}();function n_(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=i_(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function i_(a,s){if(a){if(typeof a=="string")return a_(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a_(a,s)}}function a_(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var sE=8192,Mb=function(){function a(s,n,r,t,o){(0,mr.Z)(this,a),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=o===void 0?!0:o,this._minZoom=s||0,this._maxZoom=n||22,this._minPitch=r==null?0:r,this._maxPitch=t==null?60:t,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Oh(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new Cb,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,Or.Z)(a,[{key:"minZoom",get:function(){return this._minZoom},set:function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}},{key:"minPitch",get:function(){return this._minPitch},set:function(n){this._minPitch!==n&&(this._minPitch=n,this._pitch=Math.max(this._pitch,n))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(n){this._maxPitch!==n&&(this._maxPitch=n,this._pitch=Math.min(this._pitch,n))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new mc(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(n){var r=-Yg(n,-180,180)*Math.PI/180;this.angle!==r&&(this.unmodified=!1,this.angle=r,this.calcMatrices(),this.rotationMatrix=bb(),Sb(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(n){var r=tv(n,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==r&&(this.unmodified=!1,this._pitch=r,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this.unmodified=!1,this._fov=n/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(n){var r=Math.min(Math.max(n,this._minZoom),this._maxZoom);this._zoom!==r&&(this.unmodified=!1,this._zoom=r,this.scale=this.zoomScale(r),this.tileZoom=Math.floor(r),this.zoomFraction=r-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this.unmodified=!1,this._center=n,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(n){this.edgeInsets.equals(n)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,n,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var n=new a(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n.center=this._center,n.zoom=this.zoom,n.angle=this.angle,n.fov=this._fov,n.pitch=this._pitch,n.unmodified=this.unmodified,n.edgeInsets=this.edgeInsets.clone(),n.calcMatrices(),n}},{key:"isPaddingEqual",value:function(n){return this.edgeInsets.equals(n)}},{key:"interpolatePadding",value:function(n,r,t){this.unmodified=!1,this.edgeInsets.interpolate(n,r,t),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(n){var r=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,r)}},{key:"resize",value:function(n,r){this.width=n,this.height=r,this.pixelsToGLUnits=[2/n,-2/r],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(n){return Math.pow(2,n)}},{key:"scaleZoom",value:function(n){return Math.log(n)/Math.LN2}},{key:"project",value:function(n){var r=tv(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new mc(ig(n.lng)*this.worldSize,ag(r)*this.worldSize)}},{key:"unproject",value:function(n){return new I0(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(n,r){var t=this.pointCoordinate(r),o=this.pointCoordinate(this.centerPoint),u=this.locationCoordinate(n),d=new I0(u.x-(t.x-o.x),u.y-(t.y-o.y));this.center=this.coordinateLocation(d),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(n){var r=0,t=new Float64Array([n.x,n.y,0,1]),o=new Float64Array([n.x,n.y,1,1]);gt.fF(t,t,this.pixelMatrixInverse),gt.fF(o,o,this.pixelMatrixInverse);var u=t[3],d=o[3],S=t[0]/u,U=o[0]/d,ce=t[1]/u,ve=o[1]/d,Je=t[2]/u,Ye=o[2]/d,Kt=Je===Ye?0:(r-Je)/(Ye-Je);return new I0(Tp(S,U,Kt)/this.worldSize,Tp(ce,ve,Kt)/this.worldSize)}},{key:"getBounds",value:function(){return new gm().extend(this.pointLocation(new mc(0,0))).extend(this.pointLocation(new mc(this.width,0))).extend(this.pointLocation(new mc(this.width,this.height))).extend(this.pointLocation(new mc(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new gm([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new mc(0,0)),r=new Float32Array([n.x*this.worldSize,n.y*this.worldSize,0,1]),t=gt.fF(r,r,this.pixelMatrix);return t[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var n=this._pitch,r=Math.tan(n)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new mc(0,r))}},{key:"getCameraQueryGeometry",value:function(n){var r=this.getCameraPoint();if(n.length===1)return[n[0],r];var t=r.x,o=r.y,u=r.x,d=r.y,S=n_(n),U;try{for(S.s();!(U=S.n()).done;){var ce=U.value;t=Math.min(t,ce.x),o=Math.min(o,ce.y),u=Math.max(u,ce.x),d=Math.max(d,ce.y)}}catch(ve){S.e(ve)}finally{S.f()}return[new mc(t,o),new mc(u,o),new mc(u,d),new mc(t,d),new mc(t,o)]}},{key:"coordinatePoint",value:function(n){var r=gt.al(n.x*this.worldSize,n.y*this.worldSize,0,1);return gt.fF(r,r,this.pixelMatrix),new mc(r[0]/r[3],r[1]/r[3])}},{key:"locationPoint",value:function(n){return this.coordinatePoint(this.locationCoordinate(n))}},{key:"pointLocation",value:function(n){return this.coordinateLocation(this.pointCoordinate(n))}},{key:"locationCoordinate",value:function(n){return I0.fromLngLat(n)}},{key:"coordinateLocation",value:function(n){return n.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var n=-90,r=90,t=-180,o=180,u,d,S,U,ce=this.size,ve=this.unmodified;if(this.latRange){var Je=this.latRange;n=ag(Je[1])*this.worldSize,r=ag(Je[0])*this.worldSize,u=r-n<ce.y?ce.y/(r-n):0}if(this.lngRange){var Ye=this.lngRange;t=ig(Ye[0])*this.worldSize,o=ig(Ye[1])*this.worldSize,d=o-t<ce.x?ce.x/(o-t):0}var Kt=this.point,tr=Math.max(d||0,u||0);if(tr){this.center=this.unproject(new mc(d?(o+t)/2:Kt.x,u?(r+n)/2:Kt.y)),Ge.eW?this.zoom=Math.max(this.zoom,Math.max(-1,this.minZoom)):this.zoom+=this.scaleZoom(tr),this.unmodified=ve,this.constraining=!1;return}if(this.latRange){var Fr=Kt.y,Kr=ce.y/2;Fr-Kr<n&&(U=n+Kr),Fr+Kr>r&&(U=r-Kr)}if(this.lngRange){var hn=Kt.x,sn=ce.x/2;hn-sn<t&&(S=t+sn),hn+sn>o&&(S=o-sn)}(S!==void 0||U!==void 0)&&(this.center=this.unproject(new mc(S!==void 0?S:Kt.x,U!==void 0?U:Kt.y))),this.unmodified=ve,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var n=this._fov/2,r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(n)*this.height;var t=Math.PI/2+this._pitch,o=this._fov*(.5+r.y/this.height),u=Math.sin(o)*this.cameraToCenterDistance/Math.sin(tv(Math.PI-t-o,.01,Math.PI-.01)),d=this.point,S=d.x,U=d.y,ce=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance,ve=ce*1.01,Je=this.height/50,Ye=new Float64Array(16);Vo.perspective(Ye,this._fov,this.width/this.height,Je,ve),Ye[8]=-r.x*2/this.width,Ye[9]=r.y*2/this.height,Vo.scale(Ye,Ye,[1,-1,1]),Vo.translate(Ye,Ye,[0,0,-this.cameraToCenterDistance]),Vo.rotateX(Ye,Ye,this._pitch),Vo.rotateZ(Ye,Ye,this.angle),Vo.translate(Ye,Ye,[-S,-U,0]),this.mercatorMatrix=Vo.scale([],Ye,[this.worldSize,this.worldSize,this.worldSize]),Vo.scale(Ye,Ye,[1,1,ty(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ye,this.invProjMatrix=Vo.invert([],this.projMatrix);var Kt=this.width%2/2,tr=this.height%2/2,Fr=Math.cos(this.angle),Kr=Math.sin(this.angle),hn=S-Math.round(S)+Fr*Kt+Kr*tr,sn=U-Math.round(U)+Fr*tr+Kr*Kt,Yn=new Float64Array(Ye);if(Vo.translate(Yn,Yn,[hn>.5?hn-1:hn,sn>.5?sn-1:sn,0]),this.alignedProjMatrix=Yn,Ye=Vo.create(),Vo.scale(Ye,Ye,[this.width/2,-this.height/2,1]),Vo.translate(Ye,Ye,[1,-1,0]),this.labelPlaneMatrix=Ye,Ye=Vo.create(),Vo.scale(Ye,Ye,[1,-1,1]),Vo.translate(Ye,Ye,[-1,-1,0]),Vo.scale(Ye,Ye,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ye,this.pixelMatrix=Vo.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),Ye=Vo.invert(new Float64Array(16),this.pixelMatrix),!Ye)throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ye,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),a}(),Pb=m(82492),Ov=m.n(Pb),Df=(0,Or.Z)(function a(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,mr.Z)(this,a),Ov()(this,n),this.type=s});function Ob(a){var s=Ib();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Ib(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var o_=function(a){(0,Zr.Z)(n,a);var s=Ob(n);function n(r){var t;(0,mr.Z)(this,n),t=s.call(this),(0,X.Z)((0,lr.Z)(t),"renderFrameCallback",function(){var ce=Math.min((Qv()-t.easeStart)/t.easeOptions.duration,1);t.onEaseFrame(t.easeOptions.easing(ce)),ce<1?t.easeFrameId=t.requestRenderFrame(t.renderFrameCallback):t.stop()}),t.options=r;var o=r.minZoom,u=r.maxZoom,d=r.minPitch,S=r.maxPitch,U=r.renderWorldCopies;return t.moving=!1,t.zooming=!1,t.bearingSnap=r.bearingSnap,t.pitchEnabled=r.pitchEnabled,t.rotateEnabled=r.rotateEnabled,t.transform=new Mb(o,u,d,S,U),t}return(0,Or.Z)(n,[{key:"requestRenderFrame",value:function(t){return 0}},{key:"cancelRenderFrame",value:function(t){}},{key:"getCenter",value:function(){var t=this.transform.center,o=t.lng,u=t.lat;return new Oh(o,u)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(t,o){return this.jumpTo({center:t},o)}},{key:"setPitch",value:function(t,o){return this.jumpTo({pitch:t},o),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(t,o,u){return this.easeTo((0,at.merge)({center:t},o),u)}},{key:"zoomOut",value:function(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}},{key:"setBearing",value:function(t,o){return this.jumpTo({bearing:t},o),this}},{key:"setZoom",value:function(t,o){return this.jumpTo({zoom:t},o),this}},{key:"zoomIn",value:function(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}},{key:"zoomTo",value:function(t,o,u){return this.easeTo((0,at.merge)({zoom:t},o),u)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,o){return this.jumpTo({padding:t},o),this}},{key:"rotateTo",value:function(t,o,u){return this.easeTo((0,at.merge)({bearing:t},o),u)}},{key:"resetNorth",value:function(t,o){return this.rotateTo(0,(0,at.merge)({duration:1e3},t),o),this}},{key:"resetNorthPitch",value:function(t,o){return this.easeTo((0,at.merge)({bearing:0,pitch:0,duration:1e3},t),o),this}},{key:"fitBounds",value:function(t,o,u){return this.fitInternal(this.cameraForBounds(t,o),o,u)}},{key:"cameraForBounds",value:function(t,o){return t=gm.convert(t),this.cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,o)}},{key:"snapToNorth",value:function(t,o){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(t,o):this}},{key:"jumpTo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;this.stop();var u=this.transform,d=!1,S=!1,U=!1;return t.zoom&&u.zoom!==+t.zoom&&(d=!0,u.zoom=+t.zoom),t.center!==void 0&&(u.center=Oh.convert(t.center)),t.bearing&&u.bearing!==+t.bearing&&(S=!0,u.bearing=+t.bearing),t.pitch&&u.pitch!==+t.pitch&&(U=!0,u.pitch=+t.pitch),t.padding!=null&&!u.isPaddingEqual(t.padding)&&(u.padding=t.padding),this.emit("movestart",new Df("movestart",o)),this.emit("move",new Df("move",o)),d&&(this.emit("zoomstart",new Df("zoomstart",o)),this.emit("zoom",new Df("zoom",o)),this.emit("zoomend",new Df("zoomend",o))),S&&(this.emit("rotatestart",new Df("rotatestart",o)),this.emit("rotate",new Df("rotate",o)),this.emit("rotateend",new Df("rotateend",o))),U&&(this.emit("pitchstart",new Df("pitchstart",o)),this.emit("pitch",new Df("pitch",o)),this.emit("pitchend",new Df("pitchend",o))),this.emit("moveend",new Df("moveend",o))}},{key:"easeTo",value:function(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;o=(0,at.merge)({offset:[0,0],duration:500,easing:Jg},o),(o.animate===!1||!o.essential&&K1())&&(o.duration=0);var d=this.transform,S=this.getZoom(),U=this.getBearing(),ce=this.getPitch(),ve=this.getPadding(),Je=o.zoom?+o.zoom:S,Ye=o.bearing?this.normalizeBearing(o.bearing,U):U,Kt=o.pitch?+o.pitch:ce,tr=o.padding?o.padding:d.padding,Fr=mc.convert(o.offset),Kr=d.centerPoint.add(Fr),hn=d.pointLocation(Kr),sn=Oh.convert(o.center||hn);this.normalizeCenter(sn);var Yn=d.project(hn),hi=d.project(sn).sub(Yn),Zi=d.zoomScale(Je-S),zi,pa;o.around&&(zi=Oh.convert(o.around),pa=d.locationPoint(zi));var _o={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||Je!==S,this.rotating=this.rotating||U!==Ye,this.pitching=this.pitching||Kt!==ce,this.padding=!d.isPaddingEqual(tr),this.easeId=o.easeId,this.prepareEase(u,o.noMoveStart,_o),clearTimeout(this.easeEndTimeoutID),this.ease(function(Co){if(t.zooming&&(d.zoom=Tp(S,Je,Co)),t.rotating&&t.rotateEnabled&&(d.bearing=Tp(U,Ye,Co)),t.pitching&&t.pitchEnabled&&(d.pitch=Tp(ce,Kt,Co)),t.padding&&(d.interpolatePadding(ve,tr,Co),Kr=d.centerPoint.add(Fr)),zi)d.setLocationAtPoint(zi,pa);else{var Ba=d.zoomScale(d.zoom-S),ms=Je>S?Math.min(2,Zi):Math.max(.5,Zi),au=Math.pow(ms,1-Co),Al=d.unproject(Yn.add(hi.mult(Co*au)).mult(Ba));d.setLocationAtPoint(d.renderWorldCopies?Al.wrap():Al,Kr)}t.fireMoveEvents(u)},function(Co){t.afterEase(u,Co)},o),this}},{key:"flyTo",value:function(){var t=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;if(!o.essential&&K1()){var d=qg(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(d,u)}this.stop(),o=(0,at.merge)({offset:[0,0],speed:1.2,curve:1.42,easing:Jg},o);var S=this.transform,U=this.getZoom(),ce=this.getBearing(),ve=this.getPitch(),Je=this.getPadding(),Ye=o.zoom?tv(+o.zoom,S.minZoom,S.maxZoom):U,Kt=o.bearing?this.normalizeBearing(o.bearing,ce):ce,tr=o.pitch?+o.pitch:ve,Fr="padding"in o?o.padding:S.padding,Kr=S.zoomScale(Ye-U),hn=mc.convert(o.offset),sn=S.centerPoint.add(hn),Yn=S.pointLocation(sn),hi=Oh.convert(o.center||Yn);this.normalizeCenter(hi);var Zi=S.project(Yn),zi=S.project(hi).sub(Zi),pa=o.curve,_o=Math.max(S.width,S.height),Co=_o/Kr,Ba=zi.mag();if("minZoom"in o){var ms=tv(Math.min(o.minZoom,U,Ye),S.minZoom,S.maxZoom),au=_o/S.zoomScale(ms-U);pa=Math.sqrt(au/Ba*2)}var Al=pa*pa;function nd(Zh){var Ld=(Co*Co-_o*_o+(Zh?-1:1)*Al*Al*Ba*Ba)/(2*(Zh?Co:_o)*Al*Ba);return Math.log(Math.sqrt(Ld*Ld+1)-Ld)}function Ih(Zh){return(Math.exp(Zh)-Math.exp(-Zh))/2}function Rh(Zh){return(Math.exp(Zh)+Math.exp(-Zh))/2}function md(Zh){return Ih(Zh)/Rh(Zh)}var hh=nd(0),tp=function(Ld){return Rh(hh)/Rh(hh+pa*Ld)},Fv=function(Ld){return _o*((Rh(hh)*md(hh+pa*Ld)-Ih(hh))/Al)/Ba},Gp=(nd(1)-hh)/pa;if(Math.abs(Ba)<1e-6||!isFinite(Gp)){if(Math.abs(_o-Co)<1e-6)return this.easeTo(o,u);var k0=Co<_o?-1:1;Gp=Math.abs(Math.log(Co/_o))/pa,Fv=function(){return 0},tp=function(Ld){return Math.exp(k0*pa*Ld)}}if("duration"in o)o.duration=+o.duration;else{var kp="screenSpeed"in o?+o.screenSpeed/pa:+o.speed;o.duration=1e3*Gp/kp}return o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this.zooming=!0,this.rotating=ce!==Kt,this.pitching=tr!==ve,this.padding=!S.isPaddingEqual(Fr),this.prepareEase(u,!1),this.ease(function(Zh){var Ld=Zh*Gp,Em=1/tp(Ld);S.zoom=Zh===1?Ye:U+S.scaleZoom(Em),t.rotating&&(S.bearing=Tp(ce,Kt,Zh)),t.pitching&&(S.pitch=Tp(ve,tr,Zh)),t.padding&&(S.interpolatePadding(Je,Fr,Zh),sn=S.centerPoint.add(hn));var Sm=Zh===1?hi:S.unproject(Zi.add(zi.mult(Fv(Ld))).mult(Em));S.setLocationAtPoint(S.renderWorldCopies?Sm.wrap():Sm,sn),t.fireMoveEvents(u)},function(){return t.afterEase(u)},o),this}},{key:"fitScreenCoordinates",value:function(t,o,u,d,S){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(mc.convert(t)),this.transform.pointLocation(mc.convert(o)),u,d),d,S)}},{key:"stop",value:function(t,o){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var u=this.onEaseEnd;delete this.onEaseEnd,u.call(this,o)}return this}},{key:"normalizeBearing",value:function(t,o){t=Yg(t,-180,180);var u=Math.abs(t-o);return Math.abs(t-360-o)<u&&(t-=360),Math.abs(t+360-o)<u&&(t+=360),t}},{key:"normalizeCenter",value:function(t){var o=this.transform;if(!(!o.renderWorldCopies||o.lngRange)){var u=t.lng-o.center.lng;t.lng+=u>180?-360:u<-180?360:0}}},{key:"fireMoveEvents",value:function(t){this.emit("move",new Df("move",t)),this.zooming&&this.emit("zoom",new Df("zoom",t)),this.rotating&&this.emit("rotate",new Df("rotate",t)),this.pitching&&this.emit("rotate",new Df("pitch",t))}},{key:"prepareEase",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!o&&!u.moving&&this.emit("movestart",new Df("movestart",t)),this.zooming&&!u.zooming&&this.emit("zoomstart",new Df("zoomstart",t)),this.rotating&&!u.rotating&&this.emit("rotatestart",new Df("rotatestart",t)),this.pitching&&!u.pitching&&this.emit("pitchstart",new Df("pitchstart",t))}},{key:"afterEase",value:function(t,o){if(!(this.easeId&&o&&this.easeId===o)){delete this.easeId;var u=this.zooming,d=this.rotating,S=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,u&&this.emit("zoomend",new Df("zoomend",t)),d&&this.emit("rotateend",new Df("rotateend",t)),S&&this.emit("pitchend",new Df("pitchend",t)),this.emit("moveend",new Df("moveend",t))}}},{key:"ease",value:function(t,o,u){u.animate===!1||u.duration===0?(t(1),o()):(this.easeStart=Qv(),this.easeOptions=u,this.onEaseFrame=t,this.onEaseEnd=o,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(t,o,u,d){var S={top:0,bottom:0,right:0,left:0};if(d=(0,at.merge)({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},d),typeof d.padding=="number"){var U=d.padding;d.padding={top:U,bottom:U,right:U,left:U}}d.padding=(0,at.merge)(S,d.padding);var ce=this.transform,ve=ce.padding,Je=ce.project(Oh.convert(t)),Ye=ce.project(Oh.convert(o)),Kt=Je.rotate(-u*Math.PI/180),tr=Ye.rotate(-u*Math.PI/180),Fr=new mc(Math.max(Kt.x,tr.x),Math.max(Kt.y,tr.y)),Kr=new mc(Math.min(Kt.x,tr.x),Math.min(Kt.y,tr.y)),hn=Fr.sub(Kr),sn=(ce.width-(ve.left+ve.right+d.padding.left+d.padding.right))/hn.x,Yn=(ce.height-(ve.top+ve.bottom+d.padding.top+d.padding.bottom))/hn.y;if(!(Yn<0||sn<0)){var hi=Math.min(ce.scaleZoom(ce.scale*Math.min(sn,Yn)),d.maxZoom),Zi=mc.convert(d.offset),zi=(d.padding.left-d.padding.right)/2,pa=(d.padding.top-d.padding.bottom)/2,_o=new mc(Zi.x+zi,Zi.y+pa),Co=_o.mult(ce.scale/ce.zoomScale(hi)),Ba=ce.unproject(Je.add(Ye).div(2).sub(Co));return{center:Ba,zoom:hi,bearing:u}}}},{key:"fitInternal",value:function(t,o,u){return t?(o=(0,at.merge)(t,o),delete o.padding,o.linear?this.easeTo(o,u):this.flyTo(o,u)):this}}]),n}(Yr.EventEmitter);function ny(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=iy(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function iy(a,s){if(a){if(typeof a=="string")return s_(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(a,s)}}function s_(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var Yd={},Qd=Yd;Yd.create=function(a,s,n){var r=Ge.vO.document.createElement(a);return s!==void 0&&(r.className=s),n&&n.appendChild(r),r},Yd.createNS=function(a,s){var n=Ge.vO.document.createElementNS(a,s);return n};var Jv=Ge.vO.document&&Ge.vO.document.documentElement.style;function u_(a){if(!Jv)return a[0];var s=ny(a),n;try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r in Jv)return r}}catch(t){s.e(t)}finally{s.f()}return a[0]}var rv=u_(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),l_;Yd.disableDrag=function(){Jv&&rv&&(l_=Jv[rv],Jv[rv]="none")},Yd.enableDrag=function(){Jv&&rv&&(Jv[rv]=l_)};var Rb=u_(["transform","WebkitTransform"]);Yd.setTransform=function(a,s){a.style[Rb]=s};var og=!1;try{var sg=Object.defineProperty({},"passive",{get:function(){og=!0}});Ge.vO.addEventListener("test",sg,sg),Ge.vO.removeEventListener("test",sg,sg)}catch(a){og=!1}Yd.addEventListener=function(a,s,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in r&&og?a.addEventListener(s,n,r):a.addEventListener(s,n,r.capture)},Yd.removeEventListener=function(a,s,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in r&&og?a.removeEventListener(s,n,r):a.removeEventListener(s,n,r.capture)};var Lb=function a(s){s.preventDefault(),s.stopPropagation(),Ge.vO.removeEventListener("click",a,!0)};Yd.suppressClick=function(){Ge.eW||(Ge.vO.addEventListener("click",Lb,!0),setTimeout(function(){Ge.vO.removeEventListener("click",Lb,!0)},0))},Yd.mousePos=function(a,s){if(Ge.eW)return new mc(s.clientX-a.left-0,s.clientY-a.top-0);var n=a.getBoundingClientRect();return new mc(s.clientX-n.left-a.clientLeft,s.clientY-n.top-a.clientTop)},Yd.touchPos=function(a,s){if(Ge.eW){var d=[],S=ny(s),U;try{for(S.s();!(U=S.n()).done;){var ce=U.value;d.push(new mc(ce.clientX-a.left,ce.clientY-a.top))}}catch(ve){S.e(ve)}finally{S.f()}return d}else{var n=a.getBoundingClientRect(),r=[],t=ny(s),o;try{for(t.s();!(o=t.n()).done;){var u=o.value;r.push(new mc(u.clientX-n.left-a.clientLeft,u.clientY-n.top-a.clientTop))}}catch(ve){t.e(ve)}finally{t.f()}return r}},Yd.mouseButton=function(a){return Ge.eW&&typeof Ge.vO.InstallTrigger!="undefined"&&a.button===2&&a.ctrlKey&&Ge.vO.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:a.button},Yd.remove=function(a){a.parentNode&&a.parentNode.removeChild(a)};function c_(a){var s=f_();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function f_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Hp=function(a){(0,Zr.Z)(n,a);var s=c_(n);function n(r,t,o){var u,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,mr.Z)(this,n);var S=Qd.mousePos(t.getCanvasContainer(),o),U=t.unproject(S);return u=s.call(this,r,Ov()({point:S,lngLat:U,originalEvent:o},d)),u.defaultPrevented=!1,u.target=t,u}return(0,Or.Z)(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(Df);function uE(a){var s=h_();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function h_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ay=function(a){(0,Zr.Z)(n,a);var s=uE(n);function n(r,t,o){var u;(0,mr.Z)(this,n);var d=r==="touchend"?o.changedTouches:o.touches,S=Qd.touchPos(t.getCanvasContainer(),d),U=S.map(function(Je){return t.unproject(Je)}),ce=S.reduce(function(Je,Ye,Kt,tr){return Je.add(Ye.div(tr.length))},new mc(0,0)),ve=t.unproject(ce);return u=s.call(this,r,{points:S,point:ce,lngLats:U,lngLat:ve,originalEvent:o}),u.defaultPrevented=!1,u}return(0,Or.Z)(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(Df);function Db(a){var s=lE();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function lE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var kb=function(a){(0,Zr.Z)(n,a);var s=Db(n);function n(r,t,o){var u;return(0,mr.Z)(this,n),u=s.call(this,r,{originalEvent:o}),u.defaultPrevented=!1,u}return(0,Or.Z)(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(Df),cE=function(){function a(s){(0,mr.Z)(this,a),this.map=s}return(0,Or.Z)(a,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Hp("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(n){this.delayContextMenu?this.contextMenuEvent=n:this.map.emit(n.type,new Hp(n.type,this.map,n)),this.map.listeners("contextmenu")&&n.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),a}(),Fb=function(){function a(s,n){(0,mr.Z)(this,a),this.map=s,this.el=s.getCanvasContainer(),this.container=s.getContainer(),this.clickTolerance=n.clickTolerance||1}return(0,Or.Z)(a,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(n,r){this.isEnabled()&&n.shiftKey&&n.button===0&&(Qd.disableDrag(),this.startPos=this.lastPos=r,this.active=!0)}},{key:"mousemoveWindow",value:function(n,r){if(this.active){var t=r;if(!(this.lastPos.equals(t)||!this.box&&t.dist(this.startPos)<this.clickTolerance)){var o=this.startPos;this.lastPos=t,this.box||(this.box=Qd.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",n));var u=Math.min(o.x,t.x),d=Math.max(o.x,t.x),S=Math.min(o.y,t.y),U=Math.max(o.y,t.y);Qd.setTransform(this.box,"translate(".concat(u,"px,").concat(S,"px)")),this.box&&(this.box.style.width="".concat(d-u,"px"),this.box.style.height="".concat(U-S,"px"))}}}},{key:"mouseupWindow",value:function(n,r){var t=this;if(this.active&&n.button===0){var o=this.startPos,u=r;if(this.reset(),Qd.suppressClick(),o.x===u.x&&o.y===u.y)this.fireEvent("boxzoomcancel",n);else return this.map.emit("boxzoomend",new Df("boxzoomend",{originalEvent:n})),{cameraAnimation:function(S){return S.fitScreenCoordinates(o,u,t.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(n){this.active&&n.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",n))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(Qd.remove(this.box),this.box=null),Qd.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(n,r){return this.map.emit(n,new Df(n,{originalEvent:r}))}}]),a}(),Bb=Fb,Nb=function(){function a(){(0,mr.Z)(this,a),this.reset()}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(n,r){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(r)},{originalEvent:n})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}();function Iv(a){var s=fE();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function fE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zb=function(a){(0,Zr.Z)(n,a);var s=Iv(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"type","renderFrame"),r}return(0,Or.Z)(n)}(Df);function Zb(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Ub(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Ub(a,s){if(a){if(typeof a=="string")return R0(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R0(a,s)}}function R0(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var oy={linearity:.3,easing:Qg(0,0,.3,1)},ym=Ov()({deceleration:2500,maxSpeed:1400},oy),d_=Ov()({deceleration:20,maxSpeed:1400},oy),sy=Ov()({deceleration:1e3,maxSpeed:360},oy),$b=Ov()({deceleration:1e3,maxSpeed:90},oy),jb=function(){function a(s){(0,mr.Z)(this,a),this.map=s,this.clear()}return(0,Or.Z)(a,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(n){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Qv(),settings:n})}},{key:"drainInertiaBuffer",value:function(){for(var n=this.inertiaBuffer,r=Qv(),t=160;n.length>0&&r-n[0].time>t;)n.shift()}},{key:"onMoveEnd",value:function(n){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var r={zoom:0,bearing:0,pitch:0,pan:new mc(0,0),pinchAround:void 0,around:void 0},t=Zb(this.inertiaBuffer),o;try{for(t.s();!(o=t.n()).done;){var u=o.value.settings;r.zoom+=u.zoomDelta||0,r.bearing+=u.bearingDelta||0,r.pitch+=u.pitchDelta||0,u.panDelta&&r.pan._add(u.panDelta),u.around&&(r.around=u.around),u.pinchAround&&(r.pinchAround=u.pinchAround)}}catch(tr){t.e(tr)}finally{t.f()}var d=this.inertiaBuffer[this.inertiaBuffer.length-1],S=d.time-this.inertiaBuffer[0].time,U={};if(r.pan.mag()){var ce=_m(r.pan.mag(),S,Ov()({},ym,n||{}));U.offset=r.pan.mult(ce.amount/r.pan.mag()),U.center=this.map.transform.center,ug(U,ce)}if(r.zoom){var ve=_m(r.zoom,S,d_);U.zoom=this.map.transform.zoom+ve.amount,ug(U,ve)}if(r.bearing){var Je=_m(r.bearing,S,sy);U.bearing=this.map.transform.bearing+tv(Je.amount,-179,179),ug(U,Je)}if(r.pitch){var Ye=_m(r.pitch,S,$b);U.pitch=this.map.transform.pitch+Ye.amount,ug(U,Ye)}if(U.zoom||U.bearing){var Kt=r.pinchAround===void 0?r.around:r.pinchAround;U.around=Kt?this.map.unproject(Kt):this.map.getCenter()}return this.clear(),Ov()(U,{noMoveStart:!0})}}}]),a}();function ug(a,s){(!a.duration||a.duration<s.duration)&&(a.duration=s.duration,a.easing=s.easing)}function _m(a,s,n){var r=n.maxSpeed,t=n.linearity,o=n.deceleration,u=tv(a*t/(s/1e3),-r,r),d=Math.abs(u)/(o*t);return{easing:n.easing,duration:d*1e3,amount:u*(d/2)}}var Hb={panStep:100,bearingStep:15,pitchStep:10},Vb=function(){function a(){(0,mr.Z)(this,a);var s=Hb;this.panStep=s.panStep,this.bearingStep=s.bearingStep,this.pitchStep=s.pitchStep}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(n){var r=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var t=0,o=0,u=0,d=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:n.shiftKey?o=-1:(n.preventDefault(),d=-1);break;case 39:n.shiftKey?o=1:(n.preventDefault(),d=1);break;case 38:n.shiftKey?u=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?u=-1:(n.preventDefault(),S=1);break;default:return}return{cameraAnimation:function(ce){var ve=ce.getZoom();ce.easeTo({duration:300,easeId:"keyboardHandler",easing:p_,zoom:t?Math.round(ve)+t*(n.shiftKey?2:1):ve,bearing:ce.getBearing()+o*r.bearingStep,pitch:ce.getPitch()+u*r.pitchStep,offset:[-d*r.panStep,-S*r.panStep],center:ce.getCenter()},{originalEvent:n})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}();function p_(a){return a*(2-a)}var Gb=Vb,Wb=function(){function a(s,n){(0,mr.Z)(this,a),this.map=s,this.clickTolerance=n.clickTolerance}return(0,Or.Z)(a,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(n){return this.firePreventable(new kb(n.type,this.map,n))}},{key:"mousedown",value:function(n,r){return this.mousedownPos=r,this.firePreventable(new Hp(n.type,this.map,n))}},{key:"mouseup",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"click",value:function(n,r){this.mousedownPos&&this.mousedownPos.dist(r)>=this.clickTolerance||this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"dblclick",value:function(n){return this.firePreventable(new Hp(n.type,this.map,n))}},{key:"mouseover",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"mouseout",value:function(n){this.map.emit(n.type,new Hp(n.type,this.map,n))}},{key:"touchstart",value:function(n){return this.firePreventable(new ay(n.type,this.map,n))}},{key:"touchmove",value:function(n){this.map.emit(n.type,new ay(n.type,this.map,n))}},{key:"touchend",value:function(n){this.map.emit(n.type,new ay(n.type,this.map,n))}},{key:"touchcancel",value:function(n){this.map.emit(n.type,new ay(n.type,this.map,n))}},{key:"firePreventable",value:function(n){if(this.map.emit(n.type,n),n.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),a}(),uy,Rv=0,L0=2,Xb=(uy={},(0,X.Z)(uy,Rv,1),(0,X.Z)(uy,L0,2),uy);function Kb(a,s){var n=Xb[s];return a.buttons===void 0||(a.buttons&n)!==n}var lg=function(){function a(s){(0,mr.Z)(this,a),this.reset(),this.clickTolerance=s.clickTolerance||1}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(n,r){if(!this.lastPoint){var t=Qd.mouseButton(n);this.correctButton(n,t)&&(this.lastPoint=r,this.eventButton=t)}}},{key:"mousemoveWindow",value:function(n,r){var t=this.lastPoint;if(t){if(n.preventDefault(),Kb(n,this.eventButton)){this.reset();return}if(!(!this.moved&&r.dist(t)<this.clickTolerance))return this.moved=!0,this.lastPoint=r,this.move(t,r)}}},{key:"mouseupWindow",value:function(n){if(this.lastPoint){var r=Qd.mouseButton(n);r===this.eventButton&&(this.moved&&Qd.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(n,r){return!1}},{key:"move",value:function(n,r){}}]),a}();function Yb(a){var s=Qb();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Qb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var v_=function(a){(0,Zr.Z)(n,a);var s=Yb(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"mousedown",value:function(t,o){(0,Va.Z)((0,Hr.Z)(n.prototype),"mousedown",this).call(this,t,o),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(t,o){return{around:o,panDelta:o.sub(t)}}},{key:"correctButton",value:function(t,o){return o===Rv&&!t.ctrlKey}}]),n}(lg);function m_(a){var s=Jb();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Jb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var qb=function(a){(0,Zr.Z)(n,a);var s=m_(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"correctButton",value:function(t,o){return o===Rv&&t.ctrlKey||o===L0}},{key:"move",value:function(t,o){var u=-.5,d=(o.y-t.y)*u;if(d)return this.active=!0,{pitchDelta:d}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(lg);function e2(a){var s=hE();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function hE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var h=function(a){(0,Zr.Z)(n,a);var s=e2(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"contextmenu",value:function(t){t.preventDefault()}},{key:"correctButton",value:function(t,o){return o===Rv&&t.ctrlKey||o===L0}},{key:"move",value:function(t,o){var u=.8,d=(o.x-t.x)*u;if(d)return this.active=!0,{bearingDelta:d}}}]),n}(lg),x=4.000244140625,A=1/100,le=1/450,dt=2,Yt=function(){function a(s,n){var r=this;(0,mr.Z)(this,a),(0,X.Z)(this,"onScrollFrame",function(){if(r.frameId&&(r.frameId=null,!!r.isActive())){var t=r.map.transform;if(r.delta!==0){var o=r.type==="wheel"&&Math.abs(r.delta)>x?r.wheelZoomRate:r.defaultZoomRate,u=dt/(1+Math.exp(-Math.abs(r.delta*o)));r.delta<0&&u!==0&&(u=1/u);var d=typeof r.targetZoom=="number"?t.zoomScale(r.targetZoom):t.scale;r.targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(d*u))),r.type==="wheel"&&(r.startZoom=t.zoom,r.easing=r.smoothOutEasing(200)),r.delta=0}var S=typeof r.targetZoom=="number"?r.targetZoom:t.zoom,U=r.startZoom,ce=r.easing,ve=!1,Je;if(r.type==="wheel"&&U&&ce){var Ye=Math.min((Qv()-r.lastWheelEventTime)/200,1),Kt=ce(Ye);Je=Tp(U,S,Kt),Ye<1?r.frameId||(r.frameId=!0):ve=!0}else Je=S,ve=!0;return r.active=!0,ve&&(r.active=!1,r.finishTimeout=setTimeout(function(){r.zooming=!1,r.handler.triggerRenderFrame(),delete r.targetZoom,delete r.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ve,zoomDelta:Je-t.zoom,around:r.aroundPoint,originalEvent:r.lastWheelEvent}}}),this.map=s,this.el=s.getCanvasContainer(),this.handler=n,this.delta=0,this.defaultZoomRate=A,this.wheelZoomRate=le}return(0,Or.Z)(a,[{key:"setZoomRate",value:function(n){this.defaultZoomRate=n}},{key:"setWheelZoomRate",value:function(n){this.wheelZoomRate=n}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(n){this.isEnabled()||(this.enabled=!0,this.aroundCenter=n&&n.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(n){if(this.isEnabled()){var r=n.deltaMode===window.WheelEvent.DOM_DELTA_LINE?n.deltaY*40:n.deltaY,t=Qv(),o=t-(this.lastWheelEventTime||0);this.lastWheelEventTime=t,r!==0&&r%x===0?this.type="wheel":r!==0&&Math.abs(r)<4?this.type="trackpad":o>400?(this.type=null,this.lastValue=r,this.timeout=setTimeout(this.onTimeout,40,n)):this.type||(this.type=Math.abs(o*r)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,r+=this.lastValue)),n.shiftKey&&r&&(r=r/4),this.type&&(this.lastWheelEvent=n,this.delta-=r,this.active||this.start(n)),n.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(n){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(n)}},{key:"start",value:function(n){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var r=Qd.mousePos(this.el,n);this.around=Oh.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(r)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(n){var r=Jg;if(this.prevEase){var t=this.prevEase,o=(Qv()-t.start)/t.duration,u=t.easing(o+.01)-t.easing(o),d=.27/Math.sqrt(u*u+1e-4)*.01,S=Math.sqrt(.27*.27-d*d);r=Qg(d,S,.25,1)}return this.prevEase={start:Qv(),duration:n,easing:r},r}}]),a}(),xr=Yt,Tr=function(){function a(s,n){(0,mr.Z)(this,a),this.clickZoom=s,this.tapZoom=n}return(0,Or.Z)(a,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),a}(),Jr=function(){function a(s,n,r){(0,mr.Z)(this,a),this.el=s,this.mousePan=n,this.touchPan=r}return(0,Or.Z)(a,[{key:"enable",value:function(n){this.inertiaOptions=n||{},this.mousePan.enable(),this.touchPan.enable(),Ge.eW||this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),Ge.eW||this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),a}(),Zn=function(){function a(s,n,r){(0,mr.Z)(this,a),this.pitchWithRotate=s.pitchWithRotate,this.mouseRotate=n,this.mousePitch=r}return(0,Or.Z)(a,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),a}(),li=function(){function a(s,n,r,t){(0,mr.Z)(this,a),this.el=s,this.touchZoom=n,this.touchRotate=r,this.tapDragZoom=t,this.rotationDisabled=!1,this.enabled=!0}return(0,Or.Z)(a,[{key:"enable",value:function(n){this.touchZoom.enable(n),this.rotationDisabled||this.touchRotate.enable(n),this.tapDragZoom.enable(),Ge.eW||this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),Ge.eW||this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),a}();function da(a,s){for(var n={},r=0;r<a.length;r++)n[a[r].identifier]=s[r];return n}function ro(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=Xo(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function Xo(a,s){if(a){if(typeof a=="string")return Fo(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(a,s)}}function Fo(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}function ho(a){var s=new mc(0,0),n=ro(a),r;try{for(n.s();!(r=n.n()).done;){var t=r.value;s._add(t)}}catch(o){n.e(o)}finally{n.f()}return s.div(a.length)}var ns=500,vs=500,us=30,Eu=function(){function a(s){(0,mr.Z)(this,a),this.reset(),this.numTouches=s.numTouches}return(0,Or.Z)(a,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(n,r,t){(this.centroid||t.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=n.timeStamp),t.length===this.numTouches&&(this.centroid=ho(r),this.touches=da(t,r)))}},{key:"touchmove",value:function(n,r,t){if(!(this.aborted||!this.centroid)){var o=da(t,r);for(var u in this.touches)if(this.touches[u]){var d=this.touches[u],S=o[u];(!S||S.dist(d)>us)&&(this.aborted=!0)}}}},{key:"touchend",value:function(n,r,t){if((!this.centroid||n.timeStamp-this.startTime>vs)&&(this.aborted=!0),t.length===0){var o=!this.aborted&&this.centroid;if(this.reset(),o)return o}}}]),a}(),Nu=function(){function a(s){(0,mr.Z)(this,a),this.singleTap=new Eu(s),this.numTaps=s.numTaps,this.reset()}return(0,Or.Z)(a,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(n,r,t){this.singleTap.touchstart(n,r,t)}},{key:"touchmove",value:function(n,r,t){this.singleTap.touchmove(n,r,t)}},{key:"touchend",value:function(n,r,t){var o=this.singleTap.touchend(n,r,t);if(o){var u=n.timeStamp-this.lastTime<ns,d=!this.lastTap||this.lastTap.dist(o)<us;if((!u||!d)&&this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}]),a}(),ul=function(){function a(){(0,mr.Z)(this,a),this.tap=new Nu({numTouches:1,numTaps:1}),this.reset()}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(n,r,t){this.swipePoint||(this.tapTime&&n.timeStamp-this.tapTime>ns&&this.reset(),this.tapTime?t.length>0&&(this.swipePoint=r[0],this.swipeTouch=t[0].identifier):this.tap.touchstart(n,r,t))}},{key:"touchmove",value:function(n,r,t){if(!this.tapTime)this.tap.touchmove(n,r,t);else if(this.swipePoint){if(t[0].identifier!==this.swipeTouch)return;var o=r[0],u=o.y-this.swipePoint.y;return this.swipePoint=o,n.preventDefault(),this.active=!0,{zoomDelta:u/128}}}},{key:"touchend",value:function(n,r,t){if(this.tapTime)this.swipePoint&&t.length===0&&this.reset();else{var o=this.tap.touchend(n,r,t);o&&(this.tapTime=n.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}(),sf=function(){function a(){(0,mr.Z)(this,a),this.zoomIn=new Nu({numTouches:1,numTaps:2}),this.zoomOut=new Nu({numTouches:2,numTaps:1}),this.reset()}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(n,r,t){this.zoomIn.touchstart(n,r,t),this.zoomOut.touchstart(n,r,t)}},{key:"touchmove",value:function(n,r,t){this.zoomIn.touchmove(n,r,t),this.zoomOut.touchmove(n,r,t)}},{key:"touchend",value:function(n,r,t){var o=this,u=this.zoomIn.touchend(n,r,t),d=this.zoomOut.touchend(n,r,t);if(u)return this.active=!0,n.preventDefault(),setTimeout(function(){return o.reset()},0),{cameraAnimation:function(U){return U.easeTo({duration:300,zoom:U.getZoom()+1,around:U.unproject(u)},{originalEvent:n})}};if(d)return this.active=!0,n.preventDefault(),setTimeout(function(){return o.reset()},0),{cameraAnimation:function(U){return U.easeTo({duration:300,zoom:U.getZoom()-1,around:U.unproject(d)},{originalEvent:n})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}(),Fu=function(){function a(s){(0,mr.Z)(this,a),this.minTouches=1,this.clickTolerance=s.clickTolerance||1,this.reset()}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new mc(0,0)}},{key:"touchstart",value:function(n,r,t){return this.calculateTransform(n,r,t)}},{key:"touchmove",value:function(n,r,t){if(this.active)return n.preventDefault(),this.calculateTransform(n,r,t)}},{key:"touchend",value:function(n,r,t){this.calculateTransform(n,r,t),this.active&&t.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(n,r,t){t.length>0&&(this.active=!0);var o=da(t,r),u=new mc(0,0),d=new mc(0,0),S=0;for(var U in o)if(o[U]){var ce=o[U],ve=this.touches[U];ve&&(u._add(ce),d._add(ce.sub(ve)),S++,o[U]=ce)}if(this.touches=o,!(S<this.minTouches||!d.mag())){var Je=d.div(S);if(this.sum._add(Je),!(this.sum.mag()<this.clickTolerance)){var Ye=u.div(S);return{around:Ye,panDelta:Je}}}}}]),a}(),il=function(){function a(){(0,mr.Z)(this,a),this.reset()}return(0,Or.Z)(a,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(n){}},{key:"move",value:function(n,r,t){}},{key:"touchstart",value:function(n,r,t){this.firstTwoTouches||t.length<2||(this.firstTwoTouches=[t[0].identifier,t[1].identifier],this.start([r[0],r[1]]))}},{key:"touchmove",value:function(n,r,t){if(this.firstTwoTouches){n.preventDefault();var o=(0,oi.Z)(this.firstTwoTouches,2),u=o[0],d=o[1],S=Su(t,r,u),U=Su(t,r,d);if(!(!S||!U)){var ce=this.aroundCenter?null:S.add(U).div(2);return this.move([S,U],ce,n)}}}},{key:"touchend",value:function(n,r,t){if(this.firstTwoTouches){var o=(0,oi.Z)(this.firstTwoTouches,2),u=o[0],d=o[1],S=Su(t,r,u),U=Su(t,r,d);S&&U||(this.active&&Qd.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(n){this.enabled=!0,this.aroundCenter=!!n&&n.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),a}();function Su(a,s,n){for(var r=0;r<a.length;r++)if(a[r].identifier===n)return s[r]}function zu(a){var s=uc();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function uc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Ui(a){return Math.abs(a.y)>Math.abs(a.x)}var yi=100,Pi=function(a){(0,Zr.Z)(n,a);var s=zu(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"reset",value:function(){(0,Va.Z)((0,Hr.Z)(n.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(t){this.lastPoints=t,Ui(t[0].sub(t[1]))&&(this.valid=!1)}},{key:"move",value:function(t,o,u){var d=t[0].sub(this.lastPoints[0]),S=t[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(d,S,u.timeStamp),!!this.valid){this.lastPoints=t,this.active=!0;var U=(d.y+S.y)/2,ce=-.5;return{pitchDelta:U*ce}}}},{key:"gestureBeginsVertically",value:function(t,o,u){if(this.valid!==void 0)return this.valid;var d=2,S=t.mag()>=d,U=o.mag()>=d;if(!(!S&&!U)){if(!S||!U)return this.firstMove===void 0&&(this.firstMove=u),u-this.firstMove<yi?void 0:!1;var ce=t.y>0==o.y>0;return Ui(t)&&Ui(o)&&ce}}}]),n}(il);function Wa(a){var s=Do();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Do(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var Mo=25;function Xu(a,s){return a.angleWith(s)*180/Math.PI}var gc=function(a){(0,Zr.Z)(n,a);var s=Wa(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"reset",value:function(){(0,Va.Z)((0,Hr.Z)(n.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(t){this.startVector=this.vector=t[0].sub(t[1]),this.minDiameter=t[0].dist(t[1])}},{key:"move",value:function(t,o){var u=this.vector;if(this.vector=t[0].sub(t[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Xu(this.vector,u),pinchAround:o}}},{key:"isBelowThreshold",value:function(t){this.minDiameter=Math.min(this.minDiameter,t.mag());var o=Math.PI*this.minDiameter,u=Mo/o*360,d=Xu(t,this.startVector);return Math.abs(d)<u}}]),n}(il);function uf(a){var s=Md();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function Md(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var zh=.1;function Pd(a,s){return Math.log(a/s)/Math.LN2}var WE=function(a){(0,Zr.Z)(n,a);var s=uf(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"reset",value:function(){(0,Va.Z)((0,Hr.Z)(n.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(t){this.startDistance=this.distance=t[0].dist(t[1])}},{key:"move",value:function(t,o){var u=this.distance;if(this.distance=t[0].dist(t[1]),!(!this.active&&Math.abs(Pd(this.distance,this.startDistance))<zh))return this.active=!0,{zoomDelta:Pd(this.distance,u),pinchAround:o}}}]),n}(il);function xm(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=XE(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function XE(a,s){if(a){if(typeof a=="string")return dE(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dE(a,s)}}function dE(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var g_=function(s){return s.zoom||s.drag||s.pitch||s.rotate};function t2(a){return a.panDelta&&a.panDelta.mag()||a.zoomDelta||a.bearingDelta||a.pitchDelta}var KE=function(){function a(s,n){var r=this;(0,mr.Z)(this,a),(0,X.Z)(this,"handleWindowEvent",function(ve){r.handleEvent(ve,"".concat(ve.type,"Window"))}),(0,X.Z)(this,"handleEvent",function(ve,Je){if(ve.type==="blur"){r.stop();return}r.updatingCamera=!0;var Ye=ve.type==="renderFrame"?void 0:ve,Kt={needsRenderFrame:!1},tr={},Fr={},Kr=ve.touches?r.getMapTouches(ve.touches):void 0,hn=Kr?Qd.touchPos(r.el,Kr):Qd.mousePos(r.el,ve),sn=xm(r.handlers),Yn;try{for(sn.s();!(Yn=sn.n()).done;){var hi=Yn.value,Zi=hi.handlerName,zi=hi.handler,pa=hi.allowed;if(zi.isEnabled()){var _o=void 0;if(r.blockedByActive(Fr,pa,Zi))zi.reset();else{var Co=Je||ve.type;zi&&zi[Co]&&(_o=zi[Co](ve,hn,Kr),r.mergeIHandlerResult(Kt,tr,_o,Zi,Ye),_o&&_o.needsRenderFrame&&r.triggerRenderFrame())}(_o||zi.isActive())&&(Fr[Zi]=zi)}}}catch(Al){sn.e(Al)}finally{sn.f()}var Ba={};for(var ms in r.previousActiveHandlers)Fr[ms]||(Ba[ms]=Ye);r.previousActiveHandlers=Fr,(Object.keys(Ba).length||t2(Kt))&&(r.changes.push([Kt,tr,Ba]),r.triggerRenderFrame()),(Object.keys(Fr).length||t2(Kt))&&r.map.stop(!0),r.updatingCamera=!1;var au=Kt.cameraAnimation;au&&(r.inertia.clear(),r.fireEvents({},{}),r.changes=[],au(r.map))}),this.map=s,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new jb(s),this.bearingSnap=n.bearingSnap,this.rotateEnabled=n.rotateEnabled,this.pitchEnabled=n.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(n);var t=this.el;if(this.listeners=[],Ge.eW)Ge.vO.document.addEventListener("touchstart",function(ve){r.handleEvent(ve)},{}),Ge.vO.document.addEventListener("touchmove",function(ve){r.handleEvent(ve)},{}),Ge.vO.document.addEventListener("touchend",function(ve){r.handleEvent(ve)},{}),Ge.vO.document.addEventListener("touchcancel",function(ve){r.handleEvent(ve)},{});else{this.listeners=[[t,"touchstart",{passive:!1}],[t,"touchmove",{passive:!1}],[t,"touchend",void 0],[t,"touchcancel",void 0],[t,"mousedown",void 0],[t,"mousemove",void 0],[t,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[t,"mouseover",void 0],[t,"mouseout",void 0],[t,"dblclick",void 0],[t,"click",void 0],[t,"keydown",{capture:!1}],[t,"keyup",void 0],[t,"wheel",{passive:!1}],[t,"contextmenu",void 0],[window,"blur",void 0]];var o=xm(this.listeners),u;try{for(o.s();!(u=o.n()).done;){var d=(0,oi.Z)(u.value,3),S=d[0],U=d[1],ce=d[2];Qd.addEventListener(S,U,S===window.document?this.handleWindowEvent:this.handleEvent,ce)}}catch(ve){o.e(ve)}finally{o.f()}}}return(0,Or.Z)(a,[{key:"destroy",value:function(){var n=xm(this.listeners),r;try{for(n.s();!(r=n.n()).done;){var t=(0,oi.Z)(r.value,3),o=t[0],u=t[1],d=t[2];Qd.removeEventListener(o,u,o===window.document?this.handleWindowEvent:this.handleEvent,d)}}catch(S){n.e(S)}finally{n.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var n=xm(this.handlers),r;try{for(n.s();!(r=n.n()).done;){var t=r.value.handler;t.reset()}}catch(o){n.e(o)}finally{n.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var n=xm(this.handlers),r;try{for(n.s();!(r=n.n()).done;){var t=r.value.handler;if(t.isActive())return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(g_(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(n,r,t,o,u){if(t){(0,at.merge)(n,t);var d={handlerName:o,originalEvent:t.originalEvent||u};t.zoomDelta!==void 0&&(r.zoom=d),t.panDelta!==void 0&&(r.drag=d),t.pitchDelta!==void 0&&(r.pitch=d),t.bearingDelta!==void 0&&(r.rotate=d)}}},{key:"triggerRenderFrame",value:function(){var n=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(r){delete n.frameId,n.handleEvent(new zb("renderFrame",{timeStamp:r})),n.applyChanges()}))}},{key:"addDefaultHandlers",value:function(n){var r=this.map,t=r.getCanvasContainer();this.add("mapEvent",new Wb(r,n));var o=r.boxZoom=new Bb(r,n);this.add("boxZoom",o);var u=new sf,d=new Nb;r.doubleClickZoom=new Tr(d,u),this.add("tapZoom",u),this.add("clickZoom",d);var S=new ul;this.add("tapDragZoom",S);var U=r.touchPitch=new Pi;this.add("touchPitch",U);var ce=new qb(n),ve=new h(n);r.dragRotate=new Zn(n,ce,ve),this.add("mouseRotate",ce,["mousePitch"]),this.add("mousePitch",ve,["mouseRotate"]);var Je=new v_(n),Ye=new Fu(n);r.dragPan=new Jr(t,Je,Ye),this.add("mousePan",Je),this.add("touchPan",Ye,["touchZoom","touchRotate"]);var Kt=new gc,tr=new WE;r.touchZoomRotate=new li(t,tr,Kt,S),this.add("touchRotate",Kt,["touchPan","touchZoom"]),this.add("touchZoom",tr,["touchPan","touchRotate"]);var Fr=r.scrollZoom=new xr(r,this);this.add("scrollZoom",Fr,["mousePan"]);var Kr=r.keyboard=new Gb;this.add("keyboard",Kr),this.add("blockableMapEvent",new cE(r));for(var hn=0,sn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];hn<sn.length;hn++){var Yn=sn[hn];n.interactive&&n[Yn]&&r[Yn].enable(n[Yn])}}},{key:"add",value:function(n,r,t){this.handlers.push({handlerName:n,handler:r,allowed:t}),this.handlersById[n]=r}},{key:"blockedByActive",value:function(n,r,t){for(var o in n)if(o!==t&&(!r||r.indexOf(o)<0))return!0;return!1}},{key:"getMapTouches",value:function(n){var r=[],t=xm(n),o;try{for(t.s();!(o=t.n()).done;){var u=o.value,d=u.target;(Ge.eW||this.el.contains(d))&&r.push(u)}}catch(S){t.e(S)}finally{t.f()}return r}},{key:"applyChanges",value:function(){var n={},r={},t={},o=xm(this.changes),u;try{for(o.s();!(u=o.n()).done;){var d=(0,oi.Z)(u.value,3),S=d[0],U=d[1],ce=d[2];S.panDelta&&(n.panDelta=(n.panDelta||new mc(0,0))._add(S.panDelta)),S.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(n.around=S.around),S.pinchAround!==void 0&&(n.pinchAround=S.pinchAround),S.noInertia&&(n.noInertia=S.noInertia),(0,at.merge)(r,U),(0,at.merge)(t,ce)}}catch(ve){o.e(ve)}finally{o.f()}this.updateMapTransform(n,r,t),this.changes=[]}},{key:"updateMapTransform",value:function(n,r,t){var o=this.map,u=o.transform;if(!t2(n))return this.fireEvents(r,t);var d=n.panDelta,S=n.zoomDelta,U=n.bearingDelta,ce=n.pitchDelta,ve=n.pinchAround,Je=n.around;ve!==void 0&&(Je=ve),o.stop(!0),Je=Je||o.transform.centerPoint;var Ye=u.pointLocation(d?Je.sub(d):Je);U&&this.rotateEnabled&&(u.bearing+=U),ce&&this.pitchEnabled&&(u.pitch+=ce),S&&(u.zoom+=S),u.setLocationAtPoint(Ye,Je),this.map.update(),n.noInertia||this.inertia.record(n),this.fireEvents(r,t)}},{key:"fireEvents",value:function(n,r){var t=this,o=g_(this.eventsInProgress),u=g_(n),d={};for(var S in n)if(n[S]){var U=n[S].originalEvent;this.eventsInProgress[S]||(d["".concat(S,"start")]=U),this.eventsInProgress[S]=n[S]}!o&&u&&this.fireEvent("movestart",u.originalEvent);for(var ce in d)d[ce]&&this.fireEvent(ce,d[ce]);n.rotate&&(this.bearingChanged=!0),u&&this.fireEvent("move",u.originalEvent);for(var ve in n)if(n[ve]){var Je=n[ve].originalEvent;this.fireEvent(ve,Je)}var Ye={},Kt;for(var tr in this.eventsInProgress)if(this.eventsInProgress[tr]){var Fr=this.eventsInProgress[tr],Kr=Fr.handlerName,hn=Fr.originalEvent;this.handlersById[Kr].isActive()||(delete this.eventsInProgress[tr],Kt=r[Kr]||hn,Ye["".concat(tr,"end")]=Kt)}for(var sn in Ye)Ye[sn]&&this.fireEvent(sn,Ye[sn]);var Yn=g_(this.eventsInProgress);if((o||u)&&!Yn){this.updatingCamera=!0;var hi=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),Zi=function(pa){return pa!==0&&-t.bearingSnap<pa&&pa<t.bearingSnap};hi?(Zi(hi.bearing||this.map.getBearing())&&(hi.bearing=0),this.map.easeTo(hi,{originalEvent:Kt})):(this.map.emit("moveend",new Df("moveend",{originalEvent:Kt})),Zi(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(n,r){this.map.emit(n,new Df(n,r?{originalEvent:r}:{}))}}]),a}(),pE=KE,y_=null,ly=[],YE=30,r2=1e3/YE,cg=Ge.vO.performance,fg={create:"create",load:"load",fullLoad:"fullLoad"},__={mark:function(s){cg.mark(s)},frame:function(s){var n=s;if(y_!=null){var r=n-y_;ly.push(r)}y_=n},clearMetrics:function(){y_=null,ly=[],cg.clearMeasures("loadTime"),cg.clearMeasures("fullLoadTime");for(var s in fg)cg.clearMarks(fg[s])},getPerformanceMetrics:function(){var s=cg.measure("loadTime",fg.create,fg.load).duration,n=cg.measure("fullLoadTime",fg.create,fg.fullLoad).duration,r=ly.length,t=ly.reduce(function(S,U){return S+U},0)/r/1e3,o=1/t,u=ly.filter(function(S){return S>r2}).reduce(function(S,U){return S+(U-r2)/r2},0),d=u/(r+u)*100;return{loadTime:s,fullLoadTime:n,fps:o,percentDroppedFrames:d}}};function vE(a,s){var n=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=QE(a))||s&&a&&typeof a.length=="number"){n&&(a=n);var r=0,t=function(){};return{s:t,n:function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}},e:function(U){throw U},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,d;return{s:function(){n=n.call(a)},n:function(){var U=n.next();return o=U.done,U},e:function(U){u=!0,d=U},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(u)throw d}}}}function QE(a,s){if(a){if(typeof a=="string")return mE(a,s);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mE(a,s)}}function mE(a,s){(s==null||s>a.length)&&(s=a.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=a[n];return r}var JE=function(){function a(){(0,mr.Z)(this,a),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,Or.Z)(a,[{key:"add",value:function(n){var r=++this.id,t=this.queue;return t.push({callback:n,id:r,cancelled:!1}),r}},{key:"remove",value:function(n){var r=this.currentlyRunning,t=r?this.queue.concat(r):this.queue,o=vE(t),u;try{for(o.s();!(u=o.n()).done;){var d=u.value;if(d.id===n){d.cancelled=!0;return}}}catch(S){o.e(S)}finally{o.f()}}},{key:"run",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=this.currentlyRunning=this.queue;this.queue=[];var t=vE(r),o;try{for(t.s();!(o=t.n()).done;){var u=o.value;if(!u.cancelled&&(u.callback(n),this.cleared))break}}catch(d){t.e(d)}finally{t.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),a}(),gE=JE;function qE(a){var s=eS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function eS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function tS(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}tS(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var x_=-2,yE=22,hg=0,b_=60,rS={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:x_,maxZoom:yE,minPitch:hg,maxPitch:b_,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},nS=function(a){(0,Zr.Z)(n,a);var s=qE(n);function n(r){var t;return(0,mr.Z)(this,n),t=s.call(this,(0,at.merge)({},rS,r)),(0,X.Z)((0,lr.Z)(t),"renderTaskQueue",new gE),(0,X.Z)((0,lr.Z)(t),"trackResize",!0),(0,X.Z)((0,lr.Z)(t),"onWindowOnline",function(){t.update()}),(0,X.Z)((0,lr.Z)(t),"onWindowResize",function(o){t.trackResize&&t.resize({originalEvent:o}).update()}),t.initContainer(),t.resize(),t.handlers=new pE((0,lr.Z)(t),t.options),typeof window!="undefined"&&(window.addEventListener("online",t.onWindowOnline,!1),window.addEventListener("resize",t.onWindowResize,!1),window.addEventListener("orientationchange",t.onWindowResize,!1)),t}return(0,Or.Z)(n,[{key:"resize",value:function(t){var o=this.containerDimensions(),u=o[0],d=o[1];this.transform.resize(u,d);var S=!this.moving;return S&&(this.stop(),this.emit("movestart",new Event("movestart",t)),this.emit("move",new Event("move",t))),this.emit("resize",new Event("resize",t)),S&&this.emit("moveend",new Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(Oh.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(mc.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(gm.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if(t=t==null?x_:t,t>=x_&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(x_," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if(t=t==null?yE:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if(t=t==null?hg:t,t<hg)throw new Error("minPitch must be greater than or equal to ".concat(hg));if(t>=hg&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(hg," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if(t=t==null?b_:t,t>b_)throw new Error("maxPitch must be less than or equal to ".concat(b_));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=ng(function(o){__.frame(o),t.frame=null,t.update(o)}))}},{key:"update",value:function(t){var o=this;this.frame||(this.frame=ng(function(u){__.frame(u),o.frame=null,o.renderTaskQueue.run(t)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var t=this.container;t.classList.add("l7-map");var o=this.canvasContainer=Ge.SO.create("div","l7-canvas-container",t);this.options.interactive&&o.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var t=0,o=0;return this.container&&(t=this.container.clientWidth||400,o=this.container.clientHeight||300),[t,o]}},{key:"resizeCanvas",value:function(t,o){var u=Ge.SO.DPR||1;this.canvas.width=u*t,this.canvas.height=u*o,this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(o,"px")}}]),n}(o_),iS=function(){function a(s){var n=this;(0,mr.Z)(this,a),(0,X.Z)(this,"onHashChange",function(){var r=n.getCurrentHash();if(r.length>=3&&!r.some(function(o){return isNaN(+o)})){var t=n.map.dragRotate.isEnabled()&&n.map.touchZoomRotate.isEnabled()?+(r[3]||0):n.map.getBearing();return n.map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:t,pitch:+(r[4]||0)}),!0}return!1}),(0,X.Z)(this,"getCurrentHash",function(){var r=window.location.hash.replace("#","");if(n.hashName){var t;return r.split("&").map(function(o){return o.split("=")}).forEach(function(o){o[0]===n.hashName&&(t=o)}),(t&&t[1]||"").split("/")}return r.split("/")}),(0,X.Z)(this,"updateHashUnthrottled",function(){var r=n.getHashString();try{window.history.replaceState(window.history.state,"",r)}catch(t){}}),this.hashName=s&&encodeURIComponent(s),this.updateHash=(0,at.throttle)(this.updateHashUnthrottled,30*1e3/100)}return(0,Or.Z)(a,[{key:"addTo",value:function(n){return this.map=n,Ge.vO.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return Ge.vO.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(n){var r=this.map.getCenter(),t=Math.round(this.map.getZoom()*100)/100,o=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),u=Math.pow(10,o),d=Math.round(r.lng*u)/u,S=Math.round(r.lat*u)/u,U=this.map.getBearing(),ce=this.map.getPitch(),ve="";if(n?ve+="/".concat(d,"/").concat(S,"/").concat(t):ve+="".concat(t,"/").concat(S,"/").concat(d),(U||ce)&&(ve+="/".concat(Math.round(U*10)/10)),ce&&(ve+="/".concat(Math.round(ce))),this.hashName){var Je=this.hashName,Ye=!1,Kt=window.location.hash.slice(1).split("&").map(function(tr){var Fr=tr.split("=")[0];return Fr===Je?(Ye=!0,"".concat(Fr,"=").concat(ve)):tr}).filter(function(tr){return tr});return Ye||Kt.push("".concat(Je,"=").concat(ve)),"#".concat(Kt.join("&"))}return"#".concat(ve)}}]),a}(),aS=iS;function oS(a){var s=sS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function sS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function uS(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}uS(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var E_=-2,_E=22,dg=0,S_=60,lS={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:E_,maxZoom:_E,minPitch:dg,maxPitch:S_,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},xE=function(a){(0,Zr.Z)(n,a);var s=oS(n);function n(r){var t;if((0,mr.Z)(this,n),t=s.call(this,(0,at.merge)({},lS,r)),(0,X.Z)((0,lr.Z)(t),"renderTaskQueue",new gE),(0,X.Z)((0,lr.Z)(t),"trackResize",!0),(0,X.Z)((0,lr.Z)(t),"onWindowOnline",function(){t.update()}),(0,X.Z)((0,lr.Z)(t),"onWindowResize",function(u){t.trackResize&&t.resize({originalEvent:u}).update()}),Ge.eW?t.initMiniContainer():t.initContainer(),t.resize(),t.handlers=new pE((0,lr.Z)(t),t.options),typeof window!="undefined"&&(window.addEventListener("online",t.onWindowOnline,!1),window.addEventListener("resize",t.onWindowResize,!1),window.addEventListener("orientationchange",t.onWindowResize,!1)),!Ge.eW){var o=typeof r.hash=="string"&&r.hash||void 0;r.hash&&(t.hash=new aS(o).addTo((0,lr.Z)(t)))}return(!t.hash||!t.hash.onHashChange())&&(t.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(t.resize(),t.fitBounds(r.bounds,(0,at.merge)({},r.fitBoundsOptions,{duration:0})))),t}return(0,Or.Z)(n,[{key:"resize",value:function(t){var o=this.containerDimensions(),u=(0,oi.Z)(o,2),d=u[0],S=u[1];if(this.transform.resize(d,S),Ge.eW)return this;var U=!this.moving;return U&&(this.stop(),this.emit("movestart",new Ge.vO.Event("movestart",t)),this.emit("move",new Ge.vO.Event("move",t))),this.emit("resize",new Ge.vO.Event("resize",t)),U&&this.emit("moveend",new Ge.vO.Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(Oh.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(mc.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(gm.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if(t=t==null?E_:t,t>=E_&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(E_," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if(t=t==null?_E:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if(t=t==null?dg:t,t<dg)throw new Error("minPitch must be greater than or equal to ".concat(dg));if(t>=dg&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(dg," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if(t=t==null?S_:t,t>S_)throw new Error("maxPitch must be less than or equal to ".concat(S_));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=ng(function(o){__.frame(o),t.frame=null,t.update(o)}))}},{key:"update",value:function(t){var o=this;this.frame||(this.frame=ng(function(u){__.frame(u),o.frame=null,o.renderTaskQueue.run(t)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var t=this.container;t.classList.add("l7-map");var o=this.canvasContainer=Ge.SO.create("div","l7-canvas-container",t);this.options.interactive&&o.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var t=0,o=0;return this.container&&(Ge.eW?(t=this.container.width/Ge.vO.devicePixelRatio,o=this.container.height/Ge.vO.devicePixelRatio):(t=this.container.clientWidth,o=this.container.clientHeight,t=t===0?400:t,o=o===0?300:o)),[t,o]}}]),n}(o_),cS=m(73900),fS={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},bE,EE,SE,CE,wE,AE,pg,TE,ME,PE,OE,IE={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},hS=12,C_=(bE=(0,ba.b2)(),EE=(0,ba.f3)(Ee.vK.MapConfig),SE=(0,ba.f3)(Ee.vK.IGlobalConfigService),CE=(0,ba.f3)(Ee.vK.ICoordinateSystemService),wE=(0,ba.f3)(Ee.vK.IEventEmitter),bE(AE=(pg=function(){function a(){var s=this;(0,mr.Z)(this,a),(0,X.Z)(this,"version",fl.G.DEFUALT),(0,X.Z)(this,"simpleMapCoord",new cS.D),(0,X.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,Ul.Z)(this,"config",TE,this),(0,Ul.Z)(this,"configService",ME,this),(0,Ul.Z)(this,"coordinateSystemService",PE,this),(0,Ul.Z)(this,"eventEmitter",OE,this),(0,X.Z)(this,"handleCameraChanged",function(n){var r=s.map.getCenter(),t=r.lat,o=r.lng;s.emit("mapchange"),s.viewport.syncWithMapCamera({bearing:s.map.getBearing(),center:[o,t],viewportHeight:s.map.transform.height,pitch:s.map.getPitch(),viewportWidth:s.map.transform.width,zoom:s.map.getZoom(),cameraHeight:0}),s.updateCoordinateSystemService(),s.cameraChangedCallback(s.viewport)})}return(0,Or.Z)(a,[{key:"setBgColor",value:function(n){this.bgColor=n}},{key:"addMarkerContainer",value:function(){var n=this.map.getCanvasContainer();this.markerContainer=Ge.SO.create("div","l7-marker-container",n),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(n,r){Ee.I9.indexOf(n)!==-1?this.eventEmitter.on(n,r):this.map.on(IE[n]||n,r)}},{key:"off",value:function(n,r){this.map.off(IE[n]||n,r),this.eventEmitter.off(n,r)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===fl.G.SIMPLE)return this.simpleMapCoord.getSize();var n=this.map.transform;return[n.width,n.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(n){return this.map.setZoom(n)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(n){this.map.setCenter(n)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(n){this.map.setBearing(n)}},{key:"zoomIn",value:function(n,r){this.map.zoomIn(n,r)}},{key:"zoomOut",value:function(n,r){this.map.zoomOut(n,r)}},{key:"setPitch",value:function(n){return this.map.setPitch(n)}},{key:"panTo",value:function(n){this.map.panTo(n)}},{key:"panBy",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.panTo([n,r])}},{key:"fitBounds",value:function(n,r){this.map.fitBounds(n,r)}},{key:"setMaxZoom",value:function(n){this.map.setMaxZoom(n)}},{key:"setMinZoom",value:function(n){this.map.setMinZoom(n)}},{key:"setMapStatus",value:function(n){n.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),n.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),n.dragEnable===!1&&this.map.dragPan.disable(),n.dragEnable===!0&&this.map.dragPan.enable(),n.rotateEnable===!1&&this.map.dragRotate.disable(),n.dragEnable===!0&&this.map.dragRotate.enable(),n.keyboardEnable===!1&&this.map.keyboard.disable(),n.keyboardEnable===!0&&this.map.keyboard.enable(),n.zoomEnable===!1&&this.map.scrollZoom.disable(),n.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(n,r){this.map.flyTo({zoom:n,center:r})}},{key:"setMapStyle",value:function(n){this.map.setStyle(this.getMapStyleValue(n))}},{key:"meterToCoord",value:function(n,r){return 1}},{key:"pixelToLngLat",value:function(n){return this.map.unproject(n)}},{key:"lngLatToPixel",value:function(n){return this.map.project(n)}},{key:"containerToLngLat",value:function(n){return this.map.unproject(n)}},{key:"lngLatToContainer",value:function(n){return this.map.project(n)}},{key:"getMapStyle",value:function(){try{var n,r=(n=this.map.getStyle().sprite)!==null&&n!==void 0?n:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(r)?r==null?void 0:r.replace(/\/\w+$/,"").replace(/sprites/,"styles"):r}catch(t){return""}}},{key:"getMapStyleConfig",value:function(){return fS}},{key:"getMapStyleValue",value:function(n){var r;return(r=this.getMapStyleConfig()[n])!==null&&r!==void 0?r:n}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(n){for(var r,t=arguments.length,o=new Array(t>1?t-1:0),u=1;u<t;u++)o[u-1]=arguments[u];(r=this.eventEmitter).emit.apply(r,[n].concat(o))}},{key:"once",value:function(n){for(var r,t=arguments.length,o=new Array(t>1?t-1:0),u=1;u<t;u++)o[u-1]=arguments[u];(r=this.eventEmitter).once.apply(r,[n].concat(o))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(n){var r=this.map.getCanvas(),t=n==="jpg"?r==null?void 0:r.toDataURL("image/jpeg"):r==null?void 0:r.toDataURL("image/png");return t}},{key:"onCameraChanged",value:function(n){this.cameraChangedCallback=n}},{key:"creatMapContainer",value:function(n){var r=n;return typeof n=="string"&&(r=document.getElementById(n)),r}},{key:"updateView",value:function(n){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:n.bearing,center:n.center,viewportHeight:n.viewportHeight,pitch:n.pitch,viewportWidth:n.viewportWidth,zoom:n.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var n=this.config.offsetCoordinate,r=n===void 0?!0:n;this.viewport.getZoom()>hS&&r?this.coordinateSystemService.setCoordinateSystem(Ee.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Ee.lo.LNGLAT)}}]),a}(),TE=(0,Rl.Z)(pg.prototype,"config",[EE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ME=(0,Rl.Z)(pg.prototype,"configService",[SE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PE=(0,Rl.Z)(pg.prototype,"coordinateSystemService",[CE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=(0,Rl.Z)(pg.prototype,"eventEmitter",[wE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pg))||AE),dS=function(){function a(){(0,mr.Z)(this,a),(0,X.Z)(this,"xzReg",-Math.PI*.6),(0,X.Z)(this,"yReg",Math.PI*.2),(0,X.Z)(this,"earthCameraRadius",200),(0,X.Z)(this,"earthCameraZoom",1),(0,X.Z)(this,"cameraPosition",Qo.create()),(0,X.Z)(this,"projectionMatrix",Vo.create()),(0,X.Z)(this,"modelMatrix",Vo.create()),(0,X.Z)(this,"viewMatrix",Vo.create()),(0,X.Z)(this,"viewProjectionMatrix",Vo.create()),(0,X.Z)(this,"ViewProjectionMatrixUncentered",Vo.create()),(0,X.Z)(this,"viewUncenteredMatrix",Vo.create())}return(0,Or.Z)(a,[{key:"syncWithMapCamera",value:function(n){var r=n.viewportHeight,t=r===void 0?1:r,o=n.viewportWidth,u=o===void 0?1:o,d=u/t,S=.1,U=1e4,ce=20;Vo.perspective(this.projectionMatrix,ce,d,S,U);var ve=this.earthCameraRadius*Math.cos(this.xzReg),Je=this.earthCameraRadius*Math.sin(this.xzReg),Ye=this.earthCameraRadius*Math.sin(this.yReg);this.cameraPosition=Qo.fromValues(ve,Ye,Je),Qo.normalize(this.cameraPosition,this.cameraPosition),Qo.multiply(this.cameraPosition,this.cameraPosition,Qo.fromValues(this.earthCameraRadius,this.earthCameraRadius,this.earthCameraRadius)),Qo.scale(this.cameraPosition,this.cameraPosition,this.earthCameraZoom);var Kt=Qo.create();Qo.cross(Kt,this.cameraPosition,Qo.fromValues(0,1,0));var tr=Qo.fromValues(0,1,0);Qo.cross(tr,Kt,this.cameraPosition);var Fr=Qo.fromValues(0,0,0);Vo.lookAt(this.viewMatrix,this.cameraPosition,Fr,tr),this.viewUncenteredMatrix=Vo.clone(this.viewMatrix),Vo.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Vo.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"rotateY",value:function(n){this.xzReg+=n*Math.min(this.earthCameraZoom*this.earthCameraZoom,1)}},{key:"rotateX",value:function(n){this.yReg+=n*Math.min(this.earthCameraZoom*this.earthCameraZoom,1)}},{key:"scaleZoom",value:function(n){this.earthCameraZoom+=n,this.earthCameraZoom=Math.max(this.earthCameraZoom,.6)}},{key:"getZoom",value:function(){return 4}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[0,0]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return this.modelMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n,r){return this.viewport.projectFlat(n,r)}}]),a}(),pS=["id","style","rotation"],RE,LE;function vS(a){var s=mS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function mS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var DE={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},gS=12,yS=(RE=(0,ba.b2)(),RE(LE=function(a){(0,Zr.Z)(n,a);var s=vS(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"version",fl.G.GLOBEL),(0,X.Z)((0,lr.Z)(r),"dragging",!1),(0,X.Z)((0,lr.Z)(r),"handleCameraChanged",function(d){r.emit("mapchange");var S=2e3;r.handleCameraChanging=!0,r.handleCameraTimer&&clearTimeout(r.handleCameraTimer),r.handleCameraTimer=setTimeout(function(){r.handleCameraChanging=!1},S);var U=.02;d.type&&d.originalEvent&&(d.originalEvent.type==="wheel"&&r.viewport.scaleZoom(.01*Math.sign(d.originalEvent.wheelDelta)*-1),Math.abs(d.originalEvent.movementX)>Math.abs(d.originalEvent.movementY)?d.originalEvent.movementX>0?r.viewport.rotateY(U):d.originalEvent.movementX<0&&r.viewport.rotateY(-U):d.originalEvent.movementY>0?r.viewport.rotateX(U):d.originalEvent.movementY<0&&r.viewport.rotateX(-U));var ce=r.config.offsetCoordinate,ve=ce===void 0?!0:ce;r.viewport.syncWithMapCamera({viewportHeight:r.map.transform.height,viewportWidth:r.map.transform.width}),r.viewport.getZoom()>gS&&ve?r.coordinateSystemService.setCoordinateSystem(Ee.lo.LNGLAT_OFFSET):r.coordinateSystemService.setCoordinateSystem(Ee.lo.LNGLAT),r.cameraChangedCallback(r.viewport)}),r}return(0,Or.Z)(n,[{key:"lngLatToMercator",value:function(t,o){throw new Error("Method not implemented.")}},{key:"getModelMatrix",value:function(t,o,u,d,S){throw new Error("Method not implemented.")}},{key:"on",value:function(t,o){Ee.I9.indexOf(t)!==-1?this.eventEmitter.on(t,o):this.map.on(DE[t]||t,o)}},{key:"off",value:function(t,o){this.map.off(DE[t]||t,o),this.eventEmitter.off(t,o)}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"earth"}},{key:"init",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u,d,S,U,ce,ve,Je,Ye;return we().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:u=this.config,d=u.id,S=d===void 0?"map":d,U=u.style,ce=U===void 0?"light":U,ve=u.rotation,Je=ve===void 0?0:ve,Ye=(0,ls.Z)(u,pS),this.viewport=new dS,this.$mapContainer=this.creatMapContainer(S),this.map=new nS((0,Ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(ce),bearing:Je},Ye)),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged({});case 7:case"end":return tr.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var t,o;(t=this.$mapContainer)===null||t===void 0||(o=t.parentNode)===null||o===void 0||o.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).emit.apply(o,[t].concat(d))}},{key:"once",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).once.apply(o,[t].concat(d))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"rotateY",value:function(t){var o=t||{},u=o.force,d=u===void 0?!1:u,S=o.reg,U=S===void 0?.01:S;this.handleCameraChanging&&!d||this.viewport&&(this.viewport.rotateY(U),this.viewport.syncWithMapCamera({viewportHeight:this.map.transform.height,viewportWidth:this.map.transform.width}),this.cameraChangedCallback(this.viewport))}}]),n}(C_))||LE);function _S(a){var s=xS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function xS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var bS=function(a){(0,Zr.Z)(n,a);var s=_S(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getServiceConstructor",value:function(){return yS}}]),n}(pm.Z),n2=m(43663),ES=["id","style","rotation","mapInstance","version","mapSize","interactive"],SS=["id","style","rotation","mapInstance","canvas","hasBaseMap"],kE,FE;function CS(a){var s=wS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function wS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var AS=12,TS=(kE=(0,ba.b2)(),kE(FE=function(a){(0,Zr.Z)(n,a);var s=CS(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"version",fl.G.DEFUALT),(0,X.Z)((0,lr.Z)(r),"handleMiniCameraChanged",function(d,S,U,ce,ve){var Je=r.config.offsetCoordinate,Ye=Je===void 0?!0:Je;r.viewport.syncWithMapCamera({bearing:ce,center:[d,S],viewportHeight:r.map.transform.height,pitch:ve,viewportWidth:r.map.transform.width,zoom:U,cameraHeight:0}),r.viewport.getZoom()>AS&&Ye?r.coordinateSystemService.setCoordinateSystem(Ee.lo.LNGLAT_OFFSET):r.coordinateSystemService.setCoordinateSystem(Ee.lo.LNGLAT),r.cameraChangedCallback(r.viewport)}),r}return(0,Or.Z)(n,[{key:"lngLatToCoord",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},u=this.lngLatToMercator(t,0),d=u.x,S=u.y;return[d-o.x,S-o.y]}},{key:"lngLatToMercator",value:function(t,o){var u=I0.fromLngLat(t,o),d=u.x,S=d===void 0?0:d,U=u.y,ce=U===void 0?0:U,ve=u.z,Je=ve===void 0?0:ve;return{x:S,y:ce,z:Je}}},{key:"getModelMatrix",value:function(t,o,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},U=I0.fromLngLat(t,o),ce=U.meterInMercatorCoordinateUnits(),ve=Vo.create();return Vo.translate(ve,ve,Qo.fromValues(U.x-S.x,U.y-S.y,U.z||0-S.z)),Vo.scale(ve,ve,Qo.fromValues(ce*d[0],-ce*d[1],ce*d[2])),Vo.rotateX(ve,ve,u[0]),Vo.rotateY(ve,ve,u[1]),Vo.rotateZ(ve,ve,u[2]),ve}},{key:"init",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn,hi;return we().wrap(function(zi){for(;;)switch(zi.prev=zi.next){case 0:d=this.config,S=d.id,U=S===void 0?"map":S,ce=d.style,ve=ce===void 0?"light":ce,Je=d.rotation,Ye=Je===void 0?0:Je,Kt=d.mapInstance,tr=d.version,Fr=tr===void 0?"DEFAULTMAP":tr,Kr=d.mapSize,hn=Kr===void 0?1e4:Kr,sn=d.interactive,Yn=sn===void 0?!0:sn,hi=(0,ls.Z)(d,ES),this.viewport=new n2.Z,this.version=Fr,this.simpleMapCoord.setSize(hn),Fr===fl.G.SIMPLE&&hi.center&&(hi.center=this.simpleMapCoord.unproject(hi.center)),Kt?(this.map=Kt,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(U),this.map=new xE((0,Ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(ve),bearing:Ye},hi))),this.map.on("load",function(){u.handleCameraChanged()}),Yn&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){u.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"initMiniMap",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn,Yn;return we().wrap(function(Zi){for(;;)switch(Zi.prev=Zi.next){case 0:d=this.config,S=d.id,U=S===void 0?"map":S,ce=d.style,ve=ce===void 0?"light":ce,Je=d.rotation,Ye=Je===void 0?0:Je,Kt=d.mapInstance,tr=d.canvas,Fr=tr===void 0?null:tr,Kr=d.hasBaseMap,hn=Kr===void 0?!1:Kr,sn=(0,ls.Z)(d,SS),this.viewport=new n2.Z,this.$mapContainer=Fr,this.map=new xE((0,Ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(ve),bearing:Ye,canvas:Fr},sn)),hn?(Yn=this.map.getCenter(),this.handleMiniCameraChanged(Yn.lng,Yn.lat,this.map.getZoom(),this.map.getBearing(),this.map.getPitch()),Ge.vO.document.addEventListener("mapCameaParams",function(zi){var pa=zi.e,_o=pa.longitude,Co=pa.latitude,Ba=pa.scale,ms=pa.bearing,au=pa.pitch;u.handleMiniCameraChanged(_o,Co,Ba-1.25,ms,au)})):(this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged());case 5:case"end":return Zi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"exportMap",value:function(t){var o=this.map.getCanvas(),u=t==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}}]),n}(C_))||FE);function MS(a){var s=PS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function PS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var OS=function(a){(0,Zr.Z)(n,a);var s=MS(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getServiceConstructor",value:function(){return TS}}]),n}(pm.Z),IS=m(6158),cy=m.n(IS),RS=m(55538),LS=function(){function a(){(0,mr.Z)(this,a)}return(0,Or.Z)(a,[{key:"syncWithMapCamera",value:function(n){var r=n.center,t=n.zoom,o=n.pitch,u=n.bearing,d=n.viewportHeight,S=n.viewportWidth;this.viewport=new RS.Z({width:S,height:d,longitude:r&&r[0],latitude:r&&r[1],zoom:t,pitch:o,bearing:u})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n,r){return this.viewport.projectFlat(n,r)}}]),a}(),DS=["id","attributionControl","style","token","rotation","mapInstance"],BE,NE;function kS(a){var s=FS();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function FS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function BS(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}BS(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=cy();var NS=0,zE="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",zS=(BE=(0,ba.b2)(),BE(NE=function(a){(0,Zr.Z)(n,a);var s=kS(n);function n(){var r;(0,mr.Z)(this,n);for(var t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=s.call.apply(s,[this].concat(o)),(0,X.Z)((0,lr.Z)(r),"version",fl.G.MAPBOX),r}return(0,Or.Z)(n,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},u=this.lngLatToMercator(t,0),d=u.x,S=u.y;return[d-o.x,S-o.y]}},{key:"lngLatToMercator",value:function(t,o){var u=window.mapboxgl.MercatorCoordinate.fromLngLat(t,o),d=u.x,S=d===void 0?0:d,U=u.y,ce=U===void 0?0:U,ve=u.z,Je=ve===void 0?0:ve;return{x:S,y:ce,z:Je}}},{key:"getModelMatrix",value:function(t,o,u){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},U=window.mapboxgl.MercatorCoordinate.fromLngLat(t,o),ce=U.meterInMercatorCoordinateUnits(),ve=Vo.create();return Vo.translate(ve,ve,Qo.fromValues(U.x-S.x,U.y-S.y,U.z||0-S.z)),Vo.scale(ve,ve,Qo.fromValues(ce*d[0],-ce*d[1],ce*d[2])),Vo.rotateX(ve,ve,u[0]),Vo.rotateY(ve,ve,u[1]),Vo.rotateZ(ve,ve,u[2]),ve}},{key:"init",value:function(){var r=(0,$t.Z)(we().mark(function o(){var u=this,d,S,U,ce,ve,Je,Ye,Kt,tr,Fr,Kr,hn,sn;return we().wrap(function(hi){for(;;)switch(hi.prev=hi.next){case 0:d=this.config,S=d.id,U=S===void 0?"map":S,ce=d.attributionControl,ve=ce===void 0?!1:ce,Je=d.style,Ye=Je===void 0?"light":Je,Kt=d.token,tr=Kt===void 0?zE:Kt,Fr=d.rotation,Kr=Fr===void 0?0:Fr,hn=d.mapInstance,sn=(0,ls.Z)(d,DS),this.viewport=new LS,!hn&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),tr===zE&&Ye!=="blank"&&!window.mapboxgl.accessToken&&!hn&&console.warn(this.configService.getSceneWarninfo("MapToken")),!hn&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=tr),hn?(this.map=hn,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(U),this.map=new window.mapboxgl.Map((0,Ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(Ye),attributionControl:ve,bearing:Kr},sn))),this.map.on("load",function(){u.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return hi.stop()}},o,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var t,o;(t=this.$mapContainer)===null||t===void 0||(o=t.parentNode)===null||o===void 0||o.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).emit.apply(o,[t].concat(d))}},{key:"once",value:function(t){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),S=1;S<u;S++)d[S-1]=arguments[S];(o=this.eventEmitter).once.apply(o,[t].concat(d))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(t,o){var u=new(cy()).LngLat(t[0],t[1]),d=new(cy()).LngLat(o[0],o[1]),S=u.distanceTo(d),U=cy().MercatorCoordinate.fromLngLat({lng:t[0],lat:t[1]}),ce=cy().MercatorCoordinate.fromLngLat({lng:o[0],lat:o[1]}),ve=U.x,Je=U.y,Ye=ce.x,Kt=ce.y,tr=Math.sqrt(Math.pow(ve-Ye,2)+Math.pow(Je-Kt,2))*4194304*2;return tr/S}},{key:"exportMap",value:function(t){var o=this.map.getCanvas(),u=t==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"creatMapContainer",value:function(t){var o=t;typeof t=="string"&&(o=document.getElementById(t));var u=document.createElement("div");return u.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,u.id="l7_mapbox_div"+NS++,o.appendChild(u),u}}]),n}(C_))||NE);function ZS(a){var s=US();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function US(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function $S(a,s){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(s||(s=document),!!s)){var t=s.head||s.getElementsByTagName("head")[0];if(!t){t=s.createElement("head");var o=s.body||s.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(t,o):s.documentElement.appendChild(t)}var u=s.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=a:u.appendChild(s.createTextNode(a)),t.appendChild(u),u}}$S(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var jS=function(a){(0,Zr.Z)(n,a);var s=ZS(n);function n(){return(0,mr.Z)(this,n),s.apply(this,arguments)}return(0,Or.Z)(n,[{key:"getServiceConstructor",value:function(){return zS}}]),n}(pm.Z),HS=m(88307),VS=m.n(HS),GS=function(){function a(s,n){(0,mr.Z)(this,a);var r=n.buffer,t=n.offset,o=n.stride,u=n.normalized,d=n.size,S=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:t||0,stride:o||0,normalized:u||!1,divisor:S||0},d&&(this.attribute.size=d)}return(0,Or.Z)(a,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),a}(),qv,fy,e0,Vp,hy,D0,dy,w_,Lv,bm,sp,Dv,kv,A_,WS=(qv={},(0,X.Z)(qv,Ee.gl.POINTS,"points"),(0,X.Z)(qv,Ee.gl.LINES,"lines"),(0,X.Z)(qv,Ee.gl.LINE_LOOP,"line loop"),(0,X.Z)(qv,Ee.gl.LINE_STRIP,"line strip"),(0,X.Z)(qv,Ee.gl.TRIANGLES,"triangles"),(0,X.Z)(qv,Ee.gl.TRIANGLE_FAN,"triangle fan"),(0,X.Z)(qv,Ee.gl.TRIANGLE_STRIP,"triangle strip"),qv),ZE=(fy={},(0,X.Z)(fy,Ee.gl.STATIC_DRAW,"static"),(0,X.Z)(fy,Ee.gl.DYNAMIC_DRAW,"dynamic"),(0,X.Z)(fy,Ee.gl.STREAM_DRAW,"stream"),fy),i2=(e0={},(0,X.Z)(e0,Ee.gl.BYTE,"int8"),(0,X.Z)(e0,Ee.gl.UNSIGNED_INT,"int16"),(0,X.Z)(e0,Ee.gl.INT,"int32"),(0,X.Z)(e0,Ee.gl.UNSIGNED_BYTE,"uint8"),(0,X.Z)(e0,Ee.gl.UNSIGNED_SHORT,"uint16"),(0,X.Z)(e0,Ee.gl.UNSIGNED_INT,"uint32"),(0,X.Z)(e0,Ee.gl.FLOAT,"float"),e0),XS=(Vp={},(0,X.Z)(Vp,Ee.gl.ALPHA,"alpha"),(0,X.Z)(Vp,Ee.gl.LUMINANCE,"luminance"),(0,X.Z)(Vp,Ee.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,X.Z)(Vp,Ee.gl.RGB,"rgb"),(0,X.Z)(Vp,Ee.gl.RGBA,"rgba"),(0,X.Z)(Vp,Ee.gl.RGBA4,"rgba4"),(0,X.Z)(Vp,Ee.gl.RGB5_A1,"rgb5 a1"),(0,X.Z)(Vp,Ee.gl.RGB565,"rgb565"),(0,X.Z)(Vp,Ee.gl.DEPTH_COMPONENT,"depth"),(0,X.Z)(Vp,Ee.gl.DEPTH_STENCIL,"depth stencil"),Vp),KS=(hy={},(0,X.Z)(hy,Ee.gl.DONT_CARE,"dont care"),(0,X.Z)(hy,Ee.gl.NICEST,"nice"),(0,X.Z)(hy,Ee.gl.FASTEST,"fast"),hy),UE=(D0={},(0,X.Z)(D0,Ee.gl.NEAREST,"nearest"),(0,X.Z)(D0,Ee.gl.LINEAR,"linear"),(0,X.Z)(D0,Ee.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,X.Z)(D0,Ee.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,X.Z)(D0,Ee.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,X.Z)(D0,Ee.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),D0),$E=(dy={},(0,X.Z)(dy,Ee.gl.REPEAT,"repeat"),(0,X.Z)(dy,Ee.gl.CLAMP_TO_EDGE,"clamp"),(0,X.Z)(dy,Ee.gl.MIRRORED_REPEAT,"mirror"),dy),YS=(w_={},(0,X.Z)(w_,Ee.gl.NONE,"none"),(0,X.Z)(w_,Ee.gl.BROWSER_DEFAULT_WEBGL,"browser"),w_),QS=(Lv={},(0,X.Z)(Lv,Ee.gl.NEVER,"never"),(0,X.Z)(Lv,Ee.gl.ALWAYS,"always"),(0,X.Z)(Lv,Ee.gl.LESS,"less"),(0,X.Z)(Lv,Ee.gl.LEQUAL,"lequal"),(0,X.Z)(Lv,Ee.gl.GREATER,"greater"),(0,X.Z)(Lv,Ee.gl.GEQUAL,"gequal"),(0,X.Z)(Lv,Ee.gl.EQUAL,"equal"),(0,X.Z)(Lv,Ee.gl.NOTEQUAL,"notequal"),Lv),jE=(bm={},(0,X.Z)(bm,Ee.gl.FUNC_ADD,"add"),(0,X.Z)(bm,Ee.gl.MIN_EXT,"min"),(0,X.Z)(bm,Ee.gl.MAX_EXT,"max"),(0,X.Z)(bm,Ee.gl.FUNC_SUBTRACT,"subtract"),(0,X.Z)(bm,Ee.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),bm),T_=(sp={},(0,X.Z)(sp,Ee.gl.ZERO,"zero"),(0,X.Z)(sp,Ee.gl.ONE,"one"),(0,X.Z)(sp,Ee.gl.SRC_COLOR,"src color"),(0,X.Z)(sp,Ee.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,X.Z)(sp,Ee.gl.SRC_ALPHA,"src alpha"),(0,X.Z)(sp,Ee.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,X.Z)(sp,Ee.gl.DST_COLOR,"dst color"),(0,X.Z)(sp,Ee.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,X.Z)(sp,Ee.gl.DST_ALPHA,"dst alpha"),(0,X.Z)(sp,Ee.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,X.Z)(sp,Ee.gl.CONSTANT_COLOR,"constant color"),(0,X.Z)(sp,Ee.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,X.Z)(sp,Ee.gl.CONSTANT_ALPHA,"constant alpha"),(0,X.Z)(sp,Ee.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,X.Z)(sp,Ee.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),sp),JS=(Dv={},(0,X.Z)(Dv,Ee.gl.NEVER,"never"),(0,X.Z)(Dv,Ee.gl.ALWAYS,"always"),(0,X.Z)(Dv,Ee.gl.LESS,"less"),(0,X.Z)(Dv,Ee.gl.LEQUAL,"lequal"),(0,X.Z)(Dv,Ee.gl.GREATER,"greater"),(0,X.Z)(Dv,Ee.gl.GEQUAL,"gequal"),(0,X.Z)(Dv,Ee.gl.EQUAL,"equal"),(0,X.Z)(Dv,Ee.gl.NOTEQUAL,"notequal"),Dv),vg=(kv={},(0,X.Z)(kv,Ee.gl.ZERO,"zero"),(0,X.Z)(kv,Ee.gl.KEEP,"keep"),(0,X.Z)(kv,Ee.gl.REPLACE,"replace"),(0,X.Z)(kv,Ee.gl.INVERT,"invert"),(0,X.Z)(kv,Ee.gl.INCR,"increment"),(0,X.Z)(kv,Ee.gl.DECR,"decrement"),(0,X.Z)(kv,Ee.gl.INCR_WRAP,"increment wrap"),(0,X.Z)(kv,Ee.gl.DECR_WRAP,"decrement wrap"),kv),qS=(A_={},(0,X.Z)(A_,Ee.gl.FRONT,"front"),(0,X.Z)(A_,Ee.gl.BACK,"back"),A_),eC=function(){function a(s,n){(0,mr.Z)(this,a);var r=n.data,t=n.usage,o=n.type;this.buffer=s.buffer({data:r,usage:ZE[t||Ee.gl.STATIC_DRAW],type:i2[o||Ee.gl.UNSIGNED_BYTE]})}return(0,Or.Z)(a,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(n){var r=n.data,t=n.offset;this.buffer.subdata(r,t)}}]),a}(),tC=function(){function a(s,n){(0,mr.Z)(this,a);var r=n.data,t=n.usage,o=n.type,u=n.count;this.elements=s.elements({data:r,usage:ZE[t||Ee.gl.STATIC_DRAW],type:i2[o||Ee.gl.UNSIGNED_BYTE],count:u})}return(0,Or.Z)(a,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){}}]),a}(),rC=function(){function a(s,n){(0,mr.Z)(this,a);var r=n.width,t=n.height,o=n.color,u=n.colors,d={width:r,height:t};Array.isArray(u)&&(d.colors=u.map(function(S){return S.get()})),o&&typeof o!="boolean"&&(d.color=o.get()),this.framebuffer=s.framebuffer(d)}return(0,Or.Z)(a,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,t=n.height;this.framebuffer.resize(r,t)}}]),a}(),nC=function(){function a(s,n){(0,mr.Z)(this,a),(0,X.Z)(this,"destroyed",!1),(0,X.Z)(this,"uniforms",{}),this.reGl=s;var r=n.pick,t=r===void 0?!0:r,o=n.vs,u=n.fs,d=n.attributes,S=n.uniforms,U=n.primitive,ce=n.count,ve=n.elements,Je=n.depth,Ye=n.blend,Kt=n.stencil,tr=n.cull,Fr=n.instances,Kr={};this.options=n,S&&(this.uniforms=this.extractUniforms(S),Object.keys(S).forEach(function(hi){Kr[hi]=s.prop(hi)}));var hn={};Object.keys(d).forEach(function(hi){hn[hi]=d[hi].get()});var sn={attributes:hn,frag:u,uniforms:Kr,vert:o,blend:{},primitive:WS[U===void 0?Ee.gl.TRIANGLES:U]};if(Fr&&(sn.instances=Fr),ce?sn.count=ce:ve&&(sn.elements=ve.get()),this.initDepthDrawParams({depth:Je},sn),this.initBlendDrawParams({blend:Ye},sn),this.initStencilDrawParams({stencil:Kt},sn),this.initCullDrawParams({cull:tr},sn),this.drawCommand=s(sn),t){var Yn=(0,at.cloneDeep)(sn);Yn.blend=(0,Ne.Z)((0,Ne.Z)({},Yn.blend),{},{enable:!1}),this.drawPickCommand=s(Yn)}this.drawParams=sn}return(0,Or.Z)(a,[{key:"updateAttributesAndElements",value:function(n,r){var t={};if(Object.keys(n).forEach(function(u){t[u]=n[u].get()}),this.drawParams.attributes=t,this.drawParams.elements=r.get(),this.drawCommand=this.reGl(this.drawParams),this.options.pick){var o=(0,at.cloneDeep)(this.drawParams);o.blend=(0,Ne.Z)((0,Ne.Z)({},o.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(o)}}},{key:"updateAttributes",value:function(n){var r={};if(Object.keys(n).forEach(function(o){r[o]=n[o].get()}),this.drawParams.attributes=r,this.drawCommand=this.reGl(this.drawParams),this.options.pick){var t=(0,at.cloneDeep)(this.drawParams);t.blend=(0,Ne.Z)((0,Ne.Z)({},t.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(t)}}},{key:"addUniforms",value:function(n){this.uniforms=(0,Ne.Z)((0,Ne.Z)({},this.uniforms),this.extractUniforms(n))}},{key:"draw",value:function(n,r){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var t=(0,Ne.Z)((0,Ne.Z)({},this.uniforms),this.extractUniforms(n.uniforms||{})),o={};Object.keys(t).forEach(function(u){var d=(0,st.Z)(t[u]);d==="boolean"||d==="number"||Array.isArray(t[u])||t[u].BYTES_PER_ELEMENT?o[u]=t[u]:o[u]=t[u].get()}),r?this.drawPickCommand&&this.drawPickCommand(o):this.drawCommand(o)}}},{key:"destroy",value:function(){var n,r;(n=this.drawParams)===null||n===void 0||(r=n.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(t){t==null||t.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(n,r){var t=n.depth;t&&(r.depth={enable:t.enable===void 0?!0:!!t.enable,mask:t.mask===void 0?!0:!!t.mask,func:QS[t.func||Ee.gl.LESS],range:t.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var t=n.blend;if(t){var o=t.enable,u=t.func,d=t.equation,S=t.color,U=S===void 0?[0,0,0,0]:S;r.blend={enable:!!o,func:{srcRGB:T_[u&&u.srcRGB||Ee.gl.SRC_ALPHA],srcAlpha:T_[u&&u.srcAlpha||Ee.gl.SRC_ALPHA],dstRGB:T_[u&&u.dstRGB||Ee.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:T_[u&&u.dstAlpha||Ee.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:jE[d&&d.rgb||Ee.gl.FUNC_ADD],alpha:jE[d&&d.alpha||Ee.gl.FUNC_ADD]},color:U}}}},{key:"initStencilDrawParams",value:function(n,r){var t=n.stencil;if(t){var o=t.enable,u=t.mask,d=u===void 0?-1:u,S=t.func,U=S===void 0?{cmp:Ee.gl.ALWAYS,ref:0,mask:-1}:S,ce=t.opFront,ve=ce===void 0?{fail:Ee.gl.KEEP,zfail:Ee.gl.KEEP,zpass:Ee.gl.KEEP}:ce,Je=t.opBack,Ye=Je===void 0?{fail:Ee.gl.KEEP,zfail:Ee.gl.KEEP,zpass:Ee.gl.KEEP}:Je;r.stencil={enable:!!o,mask:d,func:(0,Ne.Z)((0,Ne.Z)({},U),{},{cmp:JS[U.cmp]}),opFront:{fail:vg[ve.fail],zfail:vg[ve.zfail],zpass:vg[ve.zpass]},opBack:{fail:vg[Ye.fail],zfail:vg[Ye.zfail],zpass:vg[Ye.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var t=n.cull;if(t){var o=t.enable,u=t.face,d=u===void 0?Ee.gl.BACK:u;r.cull={enable:!!o,face:qS[d]}}}},{key:"extractUniforms",value:function(n){var r=this,t={};return Object.keys(n).forEach(function(o){r.extractUniformsRecursively(o,n[o],t,"")}),t}},{key:"extractUniformsRecursively",value:function(n,r,t,o){var u=this;if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||(0,at.isTypedArray)(r)||r===""||"resize"in r){t["".concat(o&&o+".").concat(n)]=r;return}(0,at.isPlainObject)(r)&&Object.keys(r).forEach(function(d){u.extractUniformsRecursively(d,r[d],t,"".concat(o&&o+".").concat(n))}),Array.isArray(r)&&r.forEach(function(d,S){Object.keys(d).forEach(function(U){u.extractUniformsRecursively(U,d[U],t,"".concat(o&&o+".").concat(n,"[").concat(S,"]"))})})}}]),a}(),iC=function(){function a(s,n){(0,mr.Z)(this,a),(0,X.Z)(this,"isDestroy",!1);var r=n.data,t=n.type,o=t===void 0?Ee.gl.UNSIGNED_BYTE:t,u=n.width,d=n.height,S=n.flipY,U=S===void 0?!1:S,ce=n.format,ve=ce===void 0?Ee.gl.RGBA:ce,Je=n.mipmap,Ye=Je===void 0?!1:Je,Kt=n.wrapS,tr=Kt===void 0?Ee.gl.CLAMP_TO_EDGE:Kt,Fr=n.wrapT,Kr=Fr===void 0?Ee.gl.CLAMP_TO_EDGE:Fr,hn=n.aniso,sn=hn===void 0?0:hn,Yn=n.alignment,hi=Yn===void 0?1:Yn,Zi=n.premultiplyAlpha,zi=Zi===void 0?!1:Zi,pa=n.mag,_o=pa===void 0?Ee.gl.NEAREST:pa,Co=n.min,Ba=Co===void 0?Ee.gl.NEAREST:Co,ms=n.colorSpace,au=ms===void 0?Ee.gl.BROWSER_DEFAULT_WEBGL:ms,Al=n.x,nd=Al===void 0?0:Al,Ih=n.y,Rh=Ih===void 0?0:Ih,md=n.copy,hh=md===void 0?!1:md;this.width=u,this.height=d;var tp={width:u,height:d,type:i2[o],format:XS[ve],wrapS:$E[tr],wrapT:$E[Kr],mag:UE[_o],min:UE[Ba],alignment:hi,flipY:U,colorSpace:YS[au],premultiplyAlpha:zi,aniso:sn,x:nd,y:Rh,copy:hh};r&&(tp.data=r),typeof Ye=="number"?tp.mipmap=KS[Ye]:typeof Ye=="boolean"&&(tp.mipmap=Ye),this.texture=s.texture(tp)}return(0,Or.Z)(a,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(n)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,t=n.height;this.texture.resize(r,t),this.width=r,this.height=t}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var n;(n=this.texture)===null||n===void 0||n.destroy()}this.isDestroy=!0}}]),a}(),HE,VE,aC=(HE=(0,ba.b2)(),HE(VE=function(){function a(){var s=this;(0,mr.Z)(this,a),(0,X.Z)(this,"createModel",function(n){return new nC(s.gl,n)}),(0,X.Z)(this,"createAttribute",function(n){return new GS(s.gl,n)}),(0,X.Z)(this,"createBuffer",function(n){return new eC(s.gl,n)}),(0,X.Z)(this,"createElements",function(n){return new tC(s.gl,n)}),(0,X.Z)(this,"createTexture2D",function(n){return new iC(s.gl,n)}),(0,X.Z)(this,"createFramebuffer",function(n){return new rC(s.gl,n)}),(0,X.Z)(this,"useFramebuffer",function(n,r){s.gl({framebuffer:n?n.get():null})(r)}),(0,X.Z)(this,"clear",function(n){var r,t=n.color,o=n.depth,u=n.stencil,d=n.framebuffer,S=d===void 0?null:d,U={color:t,depth:o,stencil:u};U.framebuffer=S===null?S:S.get(),(r=s.gl)===null||r===void 0||r.clear(U)}),(0,X.Z)(this,"viewport",function(n){var r=n.x,t=n.y,o=n.width,u=n.height;s.gl._gl.viewport(r,t,o,u),s.width=o,s.height=u,s.gl._refresh()}),(0,X.Z)(this,"readPixels",function(n){var r=n.framebuffer,t=n.x,o=n.y,u=n.width,d=n.height,S={x:t,y:o,width:u,height:d};return r&&(S.framebuffer=r.get()),s.gl.read(S)}),(0,X.Z)(this,"getViewportSize",function(){return{width:s.gl._gl.drawingBufferWidth,height:s.gl._gl.drawingBufferHeight}}),(0,X.Z)(this,"getContainer",function(){if(Ge.eW)return s.canvas;var n;return(n=s.canvas)===null||n===void 0?void 0:n.parentElement}),(0,X.Z)(this,"getCanvas",function(){return s.canvas}),(0,X.Z)(this,"getGLContext",function(){return s.gl._gl}),(0,X.Z)(this,"destroy",function(){var n,r,t;s.canvas=null,(n=s.gl)===null||n===void 0||(r=n._gl)===null||r===void 0||(t=r.getExtension("WEBGL_lose_context"))===null||t===void 0||t.loseContext(),s.gl.destroy(),s.gl=null})}return(0,Or.Z)(a,[{key:"init",value:function(){var s=(0,$t.Z)(we().mark(function r(t,o,u){var d=this;return we().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(this.canvas=t,!u){U.next=5;break}this.gl=u,U.next=8;break;case 5:return U.next=7,new Promise(function(ce,ve){VS()({canvas:d.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(Ye,Kt){(Ye||!Kt)&&ve(Ye),ce(Kt)}})});case 7:this.gl=U.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return U.stop()}},r,this)}));function n(r,t,o){return s.apply(this,arguments)}return n}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(n){return!!this.getGLContext().getExtension(n)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var n=this.getGLContext();n.disable(n.CULL_FACE)}},{key:"setDirty",value:function(n){this.isDirty=n}},{key:"getDirty",value:function(){return this.isDirty}}]),a}())||VE);function oC(a){var s=sC();return function(){var r=(0,Hr.Z)(a),t;if(s){var o=(0,Hr.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,Hn.Z)(this,t)}}function sC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var a2=["selectstart","selecting","selectend"],uC=function(a){(0,Zr.Z)(n,a);var s=oC(n);function n(r){var t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,mr.Z)(this,n),t=s.call(this),(0,X.Z)((0,lr.Z)(t),"isEnable",!1),(0,X.Z)((0,lr.Z)(t),"onDragStart",function(u){t.box.style.display="block",t.startEvent=t.endEvent=u,t.syncBoxBound(),t.emit("selectstart",t.getLngLatBox(),t.startEvent,t.endEvent)}),(0,X.Z)((0,lr.Z)(t),"onDragging",function(u){t.endEvent=u,t.syncBoxBound(),t.emit("selecting",t.getLngLatBox(),t.startEvent,t.endEvent)}),(0,X.Z)((0,lr.Z)(t),"onDragEnd",function(u){t.endEvent=u,t.box.style.display="none",t.emit("selectend",t.getLngLatBox(),t.startEvent,t.endEvent)}),t.scene=r,t.options=o,t}return(0,Or.Z)(n,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var t=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var o=Ge.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),t&&o.classList.add(t),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var t=this.startEvent,o=t.x,u=t.y,d=this.endEvent,S=d.x,U=d.y,ce=Math.min(o,S),ve=Math.min(u,U),Je=Math.abs(o-S),Ye=Math.abs(u-U);this.box.style.top="".concat(ve,"px"),this.box.style.left="".concat(ce,"px"),this.box.style.width="".concat(Je,"px"),this.box.style.height="".concat(Ye,"px")}},{key:"getLngLatBox",value:function(){var t=this.startEvent.lngLat,o=t.lng,u=t.lat,d=this.endEvent.lngLat,S=d.lng,U=d.lat;return(0,Ge.Ol)([[o,u],[S,U]])}}]),n}(Yr.EventEmitter),lC=function(){function a(s){(0,mr.Z)(this,a);var n=s.id,r=s.map,t=s.canvas,o=s.hasBaseMap,u=(0,Ee.Hp)();this.container=u,r.setContainer(u,n,t,o),u.bind(Ee.vK.IRendererService).to(aC).inSingletonScope(),this.sceneService=u.get(Ee.vK.ISceneService),this.mapService=u.get(Ee.vK.IMapService),this.iconService=u.get(Ee.vK.IIconService),this.fontService=u.get(Ee.vK.IFontService),this.controlService=u.get(Ee.vK.IControlService),this.layerService=u.get(Ee.vK.ILayerService),this.debugService=u.get(Ee.vK.IDebugService),this.debugService.setEnable(s.debug),this.markerService=u.get(Ee.vK.IMarkerService),this.interactionService=u.get(Ee.vK.IInteractionService),this.popupService=u.get(Ee.vK.IPopupService),this.boxSelect=new uC(this,{}),(0,Ge.a)((s==null?void 0:s.isMini)||!1),Ge.eW?this.sceneService.initMiniScene(s):(this.initComponent(n),this.sceneService.init(s),this.initControl())}return(0,Or.Z)(a,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var s=(0,$t.Z)(we().mark(function r(t){return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.sceneService.exportPng(t));case 1:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"exportMap",value:function(){var s=(0,$t.Z)(we().mark(function r(t){return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.sceneService.exportPng(t));case 1:case"end":return u.stop()}},r,this)}));function n(r){return s.apply(this,arguments)}return n}()},{key:"registerRenderService",value:function(n){var r=this;if(this.sceneService.loaded){var t=new n(this);t.init()}else this.on("loaded",function(){var o=new n(r);o.init()})}},{key:"setBgColor",value:function(n){this.mapService.setBgColor(n)}},{key:"addLayer",value:function(n){var r=this,t=(0,Ee.e7)(this.container);if(n.setContainer(t,this.container),this.sceneService.addLayer(n),n.inited){var o=this.initMask(n);this.addMask(o,n.id)}else n.on("inited",function(){var u=r.initMask(n);r.addMask(u,n.id)})}},{key:"initMask",value:function(n){var r=n.getLayerConfig(),t=r.mask,o=r.maskfence,u=r.maskColor,d=u===void 0?"#000":u,S=r.maskOpacity,U=S===void 0?0:S;if(!(!t||!o)){var ce=new Ad().source(o).shape("fill").style({color:d,opacity:U});return ce}}},{key:"addMask",value:function(n,r){if(n){var t=this.getLayer(r);if(t){var o=(0,Ee.e7)(this.container);n.setContainer(o,this.container),t.addMaskLayer(n),this.sceneService.addMask(n)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(n){return this.layerService.getLayer(n)}},{key:"getLayerByName",value:function(n){return this.layerService.getLayerByName(n)}},{key:"removeLayer",value:function(){var s=(0,$t.Z)(we().mark(function r(t,o){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.layerService.remove(t,o);case 2:case"end":return d.stop()}},r,this)}));function n(r,t){return s.apply(this,arguments)}return n}()},{key:"removeAllLayer",value:function(){var s=(0,$t.Z)(we().mark(function r(){return we().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.layerService.removeAllLayers();case 2:case"end":return o.stop()}},r,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(n){this.layerService.setEnableRender(n)}},{key:"addIconFont",value:function(n,r){this.fontService.addIconFont(n,r)}},{key:"addIconFonts",value:function(n){var r=this;n.forEach(function(t){var o=(0,oi.Z)(t,2),u=o[0],d=o[1];r.fontService.addIconFont(u,d)})}},{key:"addFontFace",value:function(n,r){var t=this;this.fontService.once("fontloaded",function(o){t.emit("fontloaded",o)}),this.fontService.addFontFace(n,r)}},{key:"addImage",value:function(){var s=(0,$t.Z)(we().mark(function r(t,o){return we().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(Ge.eW){d.next=5;break}return d.next=3,this.iconService.addImage(t,o);case 3:d.next=6;break;case 5:this.iconService.addImageMini(t,o,this.sceneService);case 6:case"end":return d.stop()}},r,this)}));function n(r,t){return s.apply(this,arguments)}return n}()},{key:"hasImage",value:function(n){return this.iconService.hasImage(n)}},{key:"removeImage",value:function(n){this.iconService.removeImage(n)}},{key:"addIconFontGlyphs",value:function(n,r){this.fontService.addIconGlyphs(r)}},{key:"addControl",value:function(n){this.controlService.addControl(n,this.container)}},{key:"removeControl",value:function(n){this.controlService.removeControl(n)}},{key:"getControlByName",value:function(n){return this.controlService.getControlByName(n)}},{key:"addMarker",value:function(n){this.markerService.addMarker(n)}},{key:"addMarkerLayer",value:function(n){this.markerService.addMarkerLayer(n)}},{key:"removeMarkerLayer",value:function(n){this.markerService.removeMarkerLayer(n)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(n){this.popupService.addPopup(n)}},{key:"removePopup",value:function(n){this.popupService.removePopup(n)}},{key:"on",value:function(n,r){if(a2.includes(n)){var t;(t=this.boxSelect)===null||t===void 0||t.on(n,r)}else Ee.P7.includes(n)?this.sceneService.on(n,r):this.mapService.on(n,r)}},{key:"once",value:function(n,r){if(a2.includes(n)){var t;(t=this.boxSelect)===null||t===void 0||t.once(n,r)}else Ee.P7.includes(n)?this.sceneService.once(n,r):this.mapService.once(n,r)}},{key:"emit",value:function(n,r){Ee.P7.indexOf(n)===-1?this.mapService.on(n,r):this.sceneService.emit(n,r)}},{key:"off",value:function(n,r){if(a2.includes(n)){var t;(t=this.boxSelect)===null||t===void 0||t.off(n,r)}else Ee.P7.includes(n)?this.sceneService.off(n,r):this.mapService.off(n,r)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(n){return this.mapService.getCenter(n)}},{key:"setCenter",value:function(n,r){return this.mapService.setCenter(n,r)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(n){return this.mapService.setPitch(n)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(n){this.mapService.setRotation(n)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(n){this.mapService.panTo(n)}},{key:"panBy",value:function(n,r){this.mapService.panBy(n,r)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(n){this.mapService.setZoom(n)}},{key:"fitBounds",value:function(n,r){var t=this.sceneService.getSceneConfig(),o=t.fitBoundsOptions,u=t.animate;this.mapService.fitBounds(n,r||(0,Ne.Z)((0,Ne.Z)({},o),{},{animate:u}))}},{key:"setZoomAndCenter",value:function(n,r){this.mapService.setZoomAndCenter(n,r)}},{key:"setMapStyle",value:function(n){this.mapService.setMapStyle(n)}},{key:"setMapStatus",value:function(n){this.mapService.setMapStatus(n)}},{key:"pixelToLngLat",value:function(n){return this.mapService.pixelToLngLat(n)}},{key:"lngLatToPixel",value:function(n){return this.mapService.lngLatToPixel(n)}},{key:"containerToLngLat",value:function(n){return this.mapService.containerToLngLat(n)}},{key:"lngLatToContainer",value:function(n){return this.mapService.lngLatToContainer(n)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(n,r){this.container.bind(Ee.vK.IPostProcessingPass).to(n).whenTargetNamed(r)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),r&&this.boxSelect.once("selectend",function(){n.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(n){this.controlService.init({container:Ge.SO.getContainer(n)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var n=this.sceneService.getSceneConfig(),r=n.logoVisible,t=n.logoPosition;r&&this.addControl(new _c({position:t}))}}]),a}(),cC="2.13.9"},98163:function(Qe,te,m){"use strict";m.d(te,{Co:function(){return Dm},$2:function(){return lc},Kh:function(){return bx},w3:function(){return $_}});var v=m(70844),C=m(67294),l=m(18446),$=m.n(l);const R=(h=[],x=[])=>$()(h,x);var L=(h=>(x,A)=>{const le=(0,C.useRef)(),dt=(0,C.useRef)(0);(A===void 0||!R(A,le.current))&&(le.current=A,dt.current+=1),h(x,[dt.current])})(C.useEffect),T=m(94184),O=m.n(T),F=typeof global=="object"&&global&&global.Object===Object&&global,ue=F,Ae=typeof self=="object"&&self&&self.Object===Object&&self,re=ue||Ae||Function("return this")(),pe=re,fe=pe.Symbol,ke=fe,je=Object.prototype,bt=je.hasOwnProperty,ut=je.toString,wt=ke?ke.toStringTag:void 0;function se(h){var x=bt.call(h,wt),A=h[wt];try{h[wt]=void 0;var le=!0}catch(Yt){}var dt=ut.call(h);return le&&(x?h[wt]=A:delete h[wt]),dt}var qe=se,me=Object.prototype,_e=me.toString;function Te(h){return _e.call(h)}var ht=Te,We="[object Null]",Ne="[object Undefined]",he=ke?ke.toStringTag:void 0;function Ve(h){return h==null?h===void 0?Ne:We:he&&he in Object(h)?qe(h):ht(h)}var ie=Ve;function ze(h){return h!=null&&typeof h=="object"}var Le=ze,Re="[object Number]";function st(h){return typeof h=="number"||Le(h)&&ie(h)==Re}var vt=st,Dt="*",ar=function(){function h(){this._events={}}return h.prototype.on=function(x,A,le){return this._events[x]||(this._events[x]=[]),this._events[x].push({callback:A,once:!!le}),this},h.prototype.once=function(x,A){return this.on(x,A,!0)},h.prototype.emit=function(x){for(var A=this,le=[],dt=1;dt<arguments.length;dt++)le[dt-1]=arguments[dt];var Yt=this._events[x]||[],xr=this._events[Dt]||[],Tr=function(Jr){for(var Zn=Jr.length,li=0;li<Zn;li++)if(Jr[li]){var da=Jr[li],ro=da.callback,Xo=da.once;Xo&&(Jr.splice(li,1),Jr.length===0&&delete A._events[x],Zn--,li--),ro.apply(A,le)}};Tr(Yt),Tr(xr)},h.prototype.off=function(x,A){if(!x)this._events={};else if(!A)delete this._events[x];else{for(var le=this._events[x]||[],dt=le.length,Yt=0;Yt<dt;Yt++)le[Yt].callback===A&&(le.splice(Yt,1),dt--,Yt--);le.length===0&&delete this._events[x]}return this},h.prototype.getEvents=function(){return this._events},h}(),$t=ar;function ur(h){return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},ur(h)}function we(h,x){var A=typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(!A){if(Array.isArray(h)||(A=At(h))||x&&h&&typeof h.length=="number"){A&&(h=A);var le=0,dt=function(){};return{s:dt,n:function(){return le>=h.length?{done:!0}:{done:!1,value:h[le++]}},e:function(Zn){throw Zn},f:dt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yt=!0,xr=!1,Tr;return{s:function(){A=A.call(h)},n:function(){var Zn=A.next();return Yt=Zn.done,Zn},e:function(Zn){xr=!0,Tr=Zn},f:function(){try{!Yt&&A.return!=null&&A.return()}finally{if(xr)throw Tr}}}}function At(h,x){if(h){if(typeof h=="string")return nt(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return nt(h,x)}}function nt(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Lt(h,x){if(!(h instanceof x))throw new TypeError("Cannot call a class as a function")}function St(h,x){for(var A=0;A<x.length;A++){var le=x[A];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(h,K(le.key),le)}}function Ut(h,x,A){return x&&St(h.prototype,x),A&&St(h,A),Object.defineProperty(h,"prototype",{writable:!1}),h}function lt(h,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(x&&x.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),x&&Et(h,x)}function Et(h,x){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(le,dt){return le.__proto__=dt,le},Et(h,x)}function Zt(h){var x=ft();return function(){var le=Z(h),dt;if(x){var Yt=Z(this).constructor;dt=Reflect.construct(le,arguments,Yt)}else dt=le.apply(this,arguments);return Be(this,dt)}}function Be(h,x){if(x&&(ur(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return He(h)}function He(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function Z(h){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},Z(h)}function J(h,x,A){return x=K(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function K(h){var x=B(h,"string");return ur(x)==="symbol"?x:String(x)}function B(h,x){if(ur(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(ur(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var j=0,ee=function(h){lt(A,h);var x=Zt(A);function A(le){var dt;return Lt(this,A),dt=x.call(this),J(He(dt),"scene",void 0),J(He(dt),"options",void 0),J(He(dt),"layerMap",new Map),dt.scene=le.scene,dt.options=le,dt}return Ut(A,[{key:"hasLayer",value:function(dt){return this.layerMap.has(dt)}},{key:"addLayer",value:function(dt){var Yt=this.getLayerId(dt);this.layerMap.set(Yt,dt),dt.addTo(this.scene),this.emit("add",dt)}},{key:"addLayers",value:function(dt){var Yt=this;dt.forEach(function(xr){Yt.addLayer(xr)})}},{key:"removeLayer",value:function(dt){var Yt=typeof dt=="string"?dt:this.getLayerId(dt),xr=this.layerMap.get(Yt);return xr?(this.layerMap.delete(Yt),xr.remove(),this.emit("remove",Yt),!0):!1}},{key:"getLayers",value:function(){return Array.from(this.layerMap.values())}},{key:"getLayerById",value:function(dt){return this.layerMap.get(dt)}},{key:"getLayer",value:function(dt){return this.getLayerById(dt)}},{key:"removeAllLayer",value:function(){var dt=we(this.layerMap.values()),Yt;try{for(dt.s();!(Yt=dt.n()).done;){var xr=Yt.value;xr.remove()}}catch(Tr){dt.e(Tr)}finally{dt.f()}this.layerMap.clear()}},{key:"isEmpty",value:function(){return this.layerMap.size===0}},{key:"getLayerId",value:function(dt){return"id"in dt?dt.id:"".concat(j++)}},{key:"destroy",value:function(){this.removeAllLayer()}}]),A}($t);function W(h,x,A,le){var dt=-1,Yt=h==null?0:h.length;for(le&&Yt&&(A=h[++dt]);++dt<Yt;)A=x(A,h[dt],dt,h);return A}var De=W;function ot(h){return function(x){return h==null?void 0:h[x]}}var Wt=ot,Ct={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Qt=Wt(Ct),ir=Qt;function Er(h,x){for(var A=-1,le=h==null?0:h.length,dt=Array(le);++A<le;)dt[A]=x(h[A],A,h);return dt}var Qr=Er,Mt=Array.isArray,br=Mt,Nt="[object Symbol]";function Pr(h){return typeof h=="symbol"||Le(h)&&ie(h)==Nt}var _r=Pr,kr=1/0,zt=ke?ke.prototype:void 0,mr=zt?zt.toString:void 0;function Or(h){if(typeof h=="string")return h;if(br(h))return Qr(h,Or)+"";if(_r(h))return mr?mr.call(h):"";var x=h+"";return x=="0"&&1/h==-kr?"-0":x}var X=Or;function Nr(h){return h==null?"":X(h)}var Xe=Nr,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rt="\\u0300-\\u036f",kt="\\ufe20-\\ufe2f",cr="\\u20d0-\\u20ff",Ar=rt+kt+cr,Lr="["+Ar+"]",sr=RegExp(Lr,"g");function Ge(h){return h=Xe(h),h&&h.replace(xe,ir).replace(sr,"")}var Gr=Ge,on=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function cn(h){return h.match(on)||[]}var Dn=cn,ci=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function ia(h){return ci.test(h)}var Vi=ia,On="\\ud800-\\udfff",ji="\\u0300-\\u036f",oi="\\ufe20-\\ufe2f",Hi="\\u20d0-\\u20ff",Ca=ji+oi+Hi,Wi="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",uo="\\xac\\xb1\\xd7\\xf7",Pn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bn="\\u2000-\\u206f",Oi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",di="A-Z\\xc0-\\xd6\\xd8-\\xde",va="\\ufe0e\\ufe0f",wa=uo+Pn+bn+Oi,Aa="['\u2019]",Ta="["+wa+"]",ma="["+Ca+"]",Da="\\d+",Uo="["+Wi+"]",ha="["+jo+"]",xa="[^"+On+wa+Da+Wi+jo+di+"]",eo="\\ud83c[\\udffb-\\udfff]",Ee="(?:"+ma+"|"+eo+")",Po="[^"+On+"]",Hs="(?:\\ud83c[\\udde6-\\uddff]){2}",no="[\\ud800-\\udbff][\\udc00-\\udfff]",qo="["+di+"]",os="\\u200d",Go="(?:"+ha+"|"+xa+")",Wo="(?:"+qo+"|"+xa+")",za="(?:"+Aa+"(?:d|ll|m|re|s|t|ve))?",Tu="(?:"+Aa+"(?:D|LL|M|RE|S|T|VE))?",Cs=Ee+"?",Zs="["+va+"]?",ts="(?:"+os+"(?:"+[Po,Hs,no].join("|")+")"+Zs+Cs+")*",Vs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ou="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ls=Zs+Cs+ts,Di="(?:"+[Uo,Hs,no].join("|")+")"+ls,As=RegExp([qo+"?"+ha+"+"+za+"(?="+[Ta,qo,"$"].join("|")+")",Wo+"+"+Tu+"(?="+[Ta,qo+Go,"$"].join("|")+")",qo+"?"+Go+"+"+za,qo+"+"+Tu,ou,Vs,Da,Di].join("|"),"g");function Rs(h){return h.match(As)||[]}var vr=Rs;function zr(h,x,A){return h=Xe(h),x=A?void 0:x,x===void 0?Vi(h)?vr(h):Dn(h):h.match(x)||[]}var lr=zr,Zr="['\u2019]",Hn=RegExp(Zr,"g");function Hr(h){return function(x){return De(lr(Gr(x).replace(Hn,"")),h,"")}}var Bo=Hr,Yr=Bo(function(h,x,A){return h+(A?"-":"")+x.toLowerCase()}),pr=Yr;function at(h,x){return Vn(h)||mn(h,x)||er(h,x)||hr()}function hr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function er(h,x){if(h){if(typeof h=="string")return dn(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return dn(h,x)}}function dn(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function mn(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Vn(h){if(Array.isArray(h))return h}var ni=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.entries(x!=null?x:{}).map(function(A){var le=at(A,2),dt=le[0],Yt=le[1],xr=pr(dt),Tr=Yt;return typeof Tr=="number"?Tr="".concat(Tr,"px"):typeof Tr=="string"&&(Tr=Tr.replace("'","")),"".concat(xr," :").concat(Tr)}).join("; ")};function si(h){return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},si(h)}function Si(){"use strict";Si=function(){return h};var h={},x=Object.prototype,A=x.hasOwnProperty,le=Object.defineProperty||function(Ui,yi,Pi){Ui[yi]=Pi.value},dt=typeof Symbol=="function"?Symbol:{},Yt=dt.iterator||"@@iterator",xr=dt.asyncIterator||"@@asyncIterator",Tr=dt.toStringTag||"@@toStringTag";function Jr(Ui,yi,Pi){return Object.defineProperty(Ui,yi,{value:Pi,enumerable:!0,configurable:!0,writable:!0}),Ui[yi]}try{Jr({},"")}catch(Ui){Jr=function(Pi,Wa,Do){return Pi[Wa]=Do}}function Zn(Ui,yi,Pi,Wa){var Do=yi&&yi.prototype instanceof ro?yi:ro,Mo=Object.create(Do.prototype),Xu=new Su(Wa||[]);return le(Mo,"_invoke",{value:ul(Ui,Pi,Xu)}),Mo}function li(Ui,yi,Pi){try{return{type:"normal",arg:Ui.call(yi,Pi)}}catch(Wa){return{type:"throw",arg:Wa}}}h.wrap=Zn;var da={};function ro(){}function Xo(){}function Fo(){}var ho={};Jr(ho,Yt,function(){return this});var ns=Object.getPrototypeOf,vs=ns&&ns(ns(zu([])));vs&&vs!==x&&A.call(vs,Yt)&&(ho=vs);var us=Fo.prototype=ro.prototype=Object.create(ho);function Eu(Ui){["next","throw","return"].forEach(function(yi){Jr(Ui,yi,function(Pi){return this._invoke(yi,Pi)})})}function Nu(Ui,yi){function Pi(Do,Mo,Xu,gc){var uf=li(Ui[Do],Ui,Mo);if(uf.type!=="throw"){var Md=uf.arg,zh=Md.value;return zh&&si(zh)=="object"&&A.call(zh,"__await")?yi.resolve(zh.__await).then(function(Pd){Pi("next",Pd,Xu,gc)},function(Pd){Pi("throw",Pd,Xu,gc)}):yi.resolve(zh).then(function(Pd){Md.value=Pd,Xu(Md)},function(Pd){return Pi("throw",Pd,Xu,gc)})}gc(uf.arg)}var Wa;le(this,"_invoke",{value:function(Mo,Xu){function gc(){return new yi(function(uf,Md){Pi(Mo,Xu,uf,Md)})}return Wa=Wa?Wa.then(gc,gc):gc()}})}function ul(Ui,yi,Pi){var Wa="suspendedStart";return function(Do,Mo){if(Wa==="executing")throw new Error("Generator is already running");if(Wa==="completed"){if(Do==="throw")throw Mo;return uc()}for(Pi.method=Do,Pi.arg=Mo;;){var Xu=Pi.delegate;if(Xu){var gc=sf(Xu,Pi);if(gc){if(gc===da)continue;return gc}}if(Pi.method==="next")Pi.sent=Pi._sent=Pi.arg;else if(Pi.method==="throw"){if(Wa==="suspendedStart")throw Wa="completed",Pi.arg;Pi.dispatchException(Pi.arg)}else Pi.method==="return"&&Pi.abrupt("return",Pi.arg);Wa="executing";var uf=li(Ui,yi,Pi);if(uf.type==="normal"){if(Wa=Pi.done?"completed":"suspendedYield",uf.arg===da)continue;return{value:uf.arg,done:Pi.done}}uf.type==="throw"&&(Wa="completed",Pi.method="throw",Pi.arg=uf.arg)}}}function sf(Ui,yi){var Pi=yi.method,Wa=Ui.iterator[Pi];if(Wa===void 0)return yi.delegate=null,Pi==="throw"&&Ui.iterator.return&&(yi.method="return",yi.arg=void 0,sf(Ui,yi),yi.method==="throw")||Pi!=="return"&&(yi.method="throw",yi.arg=new TypeError("The iterator does not provide a '"+Pi+"' method")),da;var Do=li(Wa,Ui.iterator,yi.arg);if(Do.type==="throw")return yi.method="throw",yi.arg=Do.arg,yi.delegate=null,da;var Mo=Do.arg;return Mo?Mo.done?(yi[Ui.resultName]=Mo.value,yi.next=Ui.nextLoc,yi.method!=="return"&&(yi.method="next",yi.arg=void 0),yi.delegate=null,da):Mo:(yi.method="throw",yi.arg=new TypeError("iterator result is not an object"),yi.delegate=null,da)}function Fu(Ui){var yi={tryLoc:Ui[0]};1 in Ui&&(yi.catchLoc=Ui[1]),2 in Ui&&(yi.finallyLoc=Ui[2],yi.afterLoc=Ui[3]),this.tryEntries.push(yi)}function il(Ui){var yi=Ui.completion||{};yi.type="normal",delete yi.arg,Ui.completion=yi}function Su(Ui){this.tryEntries=[{tryLoc:"root"}],Ui.forEach(Fu,this),this.reset(!0)}function zu(Ui){if(Ui){var yi=Ui[Yt];if(yi)return yi.call(Ui);if(typeof Ui.next=="function")return Ui;if(!isNaN(Ui.length)){var Pi=-1,Wa=function Do(){for(;++Pi<Ui.length;)if(A.call(Ui,Pi))return Do.value=Ui[Pi],Do.done=!1,Do;return Do.value=void 0,Do.done=!0,Do};return Wa.next=Wa}}return{next:uc}}function uc(){return{value:void 0,done:!0}}return Xo.prototype=Fo,le(us,"constructor",{value:Fo,configurable:!0}),le(Fo,"constructor",{value:Xo,configurable:!0}),Xo.displayName=Jr(Fo,Tr,"GeneratorFunction"),h.isGeneratorFunction=function(Ui){var yi=typeof Ui=="function"&&Ui.constructor;return!!yi&&(yi===Xo||(yi.displayName||yi.name)==="GeneratorFunction")},h.mark=function(Ui){return Object.setPrototypeOf?Object.setPrototypeOf(Ui,Fo):(Ui.__proto__=Fo,Jr(Ui,Tr,"GeneratorFunction")),Ui.prototype=Object.create(us),Ui},h.awrap=function(Ui){return{__await:Ui}},Eu(Nu.prototype),Jr(Nu.prototype,xr,function(){return this}),h.AsyncIterator=Nu,h.async=function(Ui,yi,Pi,Wa,Do){Do===void 0&&(Do=Promise);var Mo=new Nu(Zn(Ui,yi,Pi,Wa),Do);return h.isGeneratorFunction(yi)?Mo:Mo.next().then(function(Xu){return Xu.done?Xu.value:Mo.next()})},Eu(us),Jr(us,Tr,"Generator"),Jr(us,Yt,function(){return this}),Jr(us,"toString",function(){return"[object Generator]"}),h.keys=function(Ui){var yi=Object(Ui),Pi=[];for(var Wa in yi)Pi.push(Wa);return Pi.reverse(),function Do(){for(;Pi.length;){var Mo=Pi.pop();if(Mo in yi)return Do.value=Mo,Do.done=!1,Do}return Do.done=!0,Do}},h.values=zu,Su.prototype={constructor:Su,reset:function(yi){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(il),!yi)for(var Pi in this)Pi.charAt(0)==="t"&&A.call(this,Pi)&&!isNaN(+Pi.slice(1))&&(this[Pi]=void 0)},stop:function(){this.done=!0;var yi=this.tryEntries[0].completion;if(yi.type==="throw")throw yi.arg;return this.rval},dispatchException:function(yi){if(this.done)throw yi;var Pi=this;function Wa(Md,zh){return Xu.type="throw",Xu.arg=yi,Pi.next=Md,zh&&(Pi.method="next",Pi.arg=void 0),!!zh}for(var Do=this.tryEntries.length-1;Do>=0;--Do){var Mo=this.tryEntries[Do],Xu=Mo.completion;if(Mo.tryLoc==="root")return Wa("end");if(Mo.tryLoc<=this.prev){var gc=A.call(Mo,"catchLoc"),uf=A.call(Mo,"finallyLoc");if(gc&&uf){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0);if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}else if(gc){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0)}else{if(!uf)throw new Error("try statement without catch or finally");if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}}}},abrupt:function(yi,Pi){for(var Wa=this.tryEntries.length-1;Wa>=0;--Wa){var Do=this.tryEntries[Wa];if(Do.tryLoc<=this.prev&&A.call(Do,"finallyLoc")&&this.prev<Do.finallyLoc){var Mo=Do;break}}Mo&&(yi==="break"||yi==="continue")&&Mo.tryLoc<=Pi&&Pi<=Mo.finallyLoc&&(Mo=null);var Xu=Mo?Mo.completion:{};return Xu.type=yi,Xu.arg=Pi,Mo?(this.method="next",this.next=Mo.finallyLoc,da):this.complete(Xu)},complete:function(yi,Pi){if(yi.type==="throw")throw yi.arg;return yi.type==="break"||yi.type==="continue"?this.next=yi.arg:yi.type==="return"?(this.rval=this.arg=yi.arg,this.method="return",this.next="end"):yi.type==="normal"&&Pi&&(this.next=Pi),da},finish:function(yi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.finallyLoc===yi)return this.complete(Wa.completion,Wa.afterLoc),il(Wa),da}},catch:function(yi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.tryLoc===yi){var Do=Wa.completion;if(Do.type==="throw"){var Mo=Do.arg;il(Wa)}return Mo}}throw new Error("illegal catch attempt")},delegateYield:function(yi,Pi,Wa){return this.delegate={iterator:zu(yi),resultName:Pi,nextLoc:Wa},this.method==="next"&&(this.arg=void 0),da}},h}function qi(h,x,A,le,dt,Yt,xr){try{var Tr=h[Yt](xr),Jr=Tr.value}catch(Zn){A(Zn);return}Tr.done?x(Jr):Promise.resolve(Jr).then(le,dt)}function Rr(h){return function(){var x=this,A=arguments;return new Promise(function(le,dt){var Yt=h.apply(x,A);function xr(Jr){qi(Yt,le,dt,xr,Tr,"next",Jr)}function Tr(Jr){qi(Yt,le,dt,xr,Tr,"throw",Jr)}xr(void 0)})}}var Mn=function(){var h=Rr(Si().mark(function x(A,le){return Si().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:if(A!=="Map"){Yt.next=2;break}return Yt.abrupt("return",new v.Map(le));case 2:if(A!=="Gaode"){Yt.next=6;break}return Yt.abrupt("return",new v.GaodeMap(le));case 6:if(A!=="GaodeV1"){Yt.next=10;break}return Yt.abrupt("return",new v.GaodeMapV1(le));case 10:if(A!=="GaodeV2"){Yt.next=12;break}return Yt.abrupt("return",new v.GaodeMapV2(le));case 12:return Yt.abrupt("return",Promise.resolve(Promise.resolve().then(m.bind(m,70844))).then(function(xr){var Tr=xr.Mapbox;return new Tr(le)}));case 13:case"end":return Yt.stop()}},x)}));return function(A,le){return h.apply(this,arguments)}}();const pn=(h,x)=>h?h.map((A,le)=>Object.is(h[le],x==null?void 0:x[le])?-1:le).filter(A=>A>=0):x?x.map((A,le)=>le):[];var Kn=(h,x)=>{const A=(0,C.useRef)();(0,C.useEffect)(()=>{const le=pn(A.current,x),dt=A.current;return A.current=x,h(le,dt,x)},x)};function Ei(h){const x=(0,C.useRef)(h);return x.current=h,x}var Ji=Ei;const Yi=h=>h!==null&&typeof h=="object",oa=h=>typeof h=="function",Ma=h=>typeof h=="string",k=h=>typeof h=="boolean",de=h=>typeof h=="number",yt=h=>typeof h=="undefined";var nr=!1,qr=h=>{nr&&(oa(h)||console.error(`useUnmount expected parameter is a function, got ${typeof h}`));const x=Ji(h);(0,C.useEffect)(()=>()=>{x.current()},[])},kn={onLoaded:"loaded",onDestroy:"destroy",onResize:"resize",onMapMove:"mapmove",onMoveStart:"movestart",onMoveEnd:"moveend",onZoomChange:"zoomchange",onZoomStart:"zoomstart",onZoomEnd:"zoomend",onClick:"click",onDblclick:"dblclick",onContextMenu:"contextmenu",onMouseMove:"mousemove",onMouseWheel:"mousewheel",onMouseDown:"mousedown",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseUp:"mouseup",onDragStart:"dragstart",onDragging:"dragging",onDragEnd:"dragend"},Nn=Object.keys(kn);function Mi(h){return Sa(h)||co(h)||io(h)||Bi()}function Bi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function io(h,x){if(h){if(typeof h=="string")return Ko(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Ko(h,x)}}function co(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function Sa(h){if(Array.isArray(h))return Ko(h)}function Ko(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}var wo=function(x,A){Kn(function(le){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(x){var xr=le.filter(function(Tr){return!!Tr}).map(function(Tr){return Tr-1});le.includes(0)&&(xr=Nn.map(function(Tr,Jr){return Jr})),xr.forEach(function(Tr){var Jr=kn[Nn[Tr]],Zn=dt[Tr+1],li=Yt[Tr+1];Zn&&x.off(Jr,Zn),li&&x.on(Jr,li)})}},[x].concat(Mi(Nn.map(function(le){return A[le]})))),qr(function(){x&&Nn.forEach(function(le){var dt=kn[le],Yt=A[le];dt&&Yt&&x.off(dt,Yt)})})};function Oo(h){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Oo(h)}var Ho=["id","style","className","map","mapType","mapOptions","onLayerManagerCreated","onSceneLoaded","children"];function Io(h,x){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(h);x&&(le=le.filter(function(dt){return Object.getOwnPropertyDescriptor(h,dt).enumerable})),A.push.apply(A,le)}return A}function qs(h){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?Io(Object(A),!0).forEach(function(le){Il(h,le,A[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):Io(Object(A)).forEach(function(le){Object.defineProperty(h,le,Object.getOwnPropertyDescriptor(A,le))})}return h}function Il(h,x,A){return x=Ao(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function Ao(h){var x=Va(h,"string");return Oo(x)==="symbol"?x:String(x)}function Va(h,x){if(Oo(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(Oo(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function gs(h,x){return gl(h)||Xs(h,x)||bs(h,x)||Ws()}function Ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(h,x){if(h){if(typeof h=="string")return Ps(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Ps(h,x)}}function Ps(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Xs(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function gl(h){if(Array.isArray(h))return h}function jf(h,x){if(h==null)return{};var A=Mu(h,x),le,dt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(dt=0;dt<Yt.length;dt++)le=Yt[dt],!(x.indexOf(le)>=0)&&Object.prototype.propertyIsEnumerable.call(h,le)&&(A[le]=h[le])}return A}function Mu(h,x){if(h==null)return{};var A={},le=Object.keys(h),dt,Yt;for(Yt=0;Yt<le.length;Yt++)dt=le[Yt],!(x.indexOf(dt)>=0)&&(A[dt]=h[dt]);return A}var yl=C.createContext(null),lc=(0,C.memo)((0,C.forwardRef)(function(x,A){var le=x.id,dt=x.style,Yt=x.className,xr=x.map,Tr=x.mapType,Jr=Tr===void 0?"Gaode":Tr,Zn=x.mapOptions,li=Zn===void 0?{}:Zn,da=x.onLayerManagerCreated,ro=x.onSceneLoaded,Xo=x.children,Fo=jf(x,Ho),ho=(0,C.useRef)(),ns=(0,C.useState)(null),vs=gs(ns,2),us=vs[0],Eu=vs[1],Nu=(0,C.useRef)({scene:null,layerManager:null}),ul=Nu.current;(0,C.useEffect)(function(){var Fu,il=!0;return Promise.resolve(xr||Mn(Jr,li)).then(function(Su){if(il){Fu=new v.Scene(qs(qs({},Fo),{},{id:ho.current,map:Su}));var zu=new ee({scene:Fu});ul.scene=Fu,ul.layerManager=zu,Fu.once("loaded",function(){ro&&ro(Fu),da&&da(zu),Eu(Fu)})}}).catch(function(Su){console.error(Su)}),function(){il=!1,Fu&&(ul.scene=null,ul.layerManager=null,Fu.destroy())}},[]),wo(us,x),(0,C.useImperativeHandle)(A,function(){return{getScene:function(){return us},getMap:function(){return us.map}}},[us]),(0,C.useEffect)(function(){us&&li.style&&us.setMapStyle(li.style)},[li.style]),(0,C.useEffect)(function(){us&&vt(li.zoom)&&us.setZoom(li.zoom)},[li.zoom]),L(function(){us&&li.center&&us.setCenter(li.center)},[li.center]),(0,C.useEffect)(function(){us&&vt(li.pitch)&&us.setPitch(li.pitch)},[li.pitch]),(0,C.useEffect)(function(){us&&vt(li.rotation)&&us.setRotation(li.rotation)},[li.rotation]);var sf=(0,C.useMemo)(function(){return qs({position:"relative"},dt)},[dt]);return C.createElement("div",{id:le,ref:ho,style:sf,className:O()("larkmap",Yt)},us&&C.createElement(yl.Provider,{value:ul},Xo))}));const Lc=h=>(x,A)=>{const le=(0,C.useRef)(!1);h(()=>()=>{le.current=!1},[]),h(()=>{if(!le.current)le.current=!0;else return x()},A)};var dh=null,_l=Lc(C.useEffect),Us=function(){var x=(0,C.useContext)(yl);if(!x)throw new Error("The useScene must be used in the LarkMap container");var A=x.scene;return A},th=function(x,A,le){var dt=Us(),Yt=(0,C.useRef)();(0,C.useEffect)(function(){var xr=new v.Control(le);return xr.onAdd=function(){return x(dt)},xr.onRemove=function(){},Yt.current=xr,dt.addControl(xr),function(){typeof A=="function"&&A(dt),Yt.current=null,dt.removeControl(xr)}},[]),_l(function(){var xr;(xr=Yt.current)===null||xr===void 0||xr.setOptions(le)},[le])},kf=function(){var x=(0,C.useContext)(yl);if(!x)throw new Error("The useLayerManager must be used in the LarkMap container");var A=x.layerManager;return A};function wf(h,x){return Eh(h)||yc(h,x)||gd(h,x)||lf()}function lf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gd(h,x){if(h){if(typeof h=="string")return Kh(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Kh(h,x)}}function Kh(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function yc(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Eh(h){if(Array.isArray(h))return h}var cf=function(x){var A=useLayerManager(),le=useState(A.getLayer(x)),dt=wf(le,2),Yt=dt[0],xr=dt[1];return useEffect(function(){var Tr=function(da){x===da.id&&xr(da)},Jr=function(da){x===da&&xr(void 0)},Zn=A.getLayer(x);return Zn?xr(Zn):(A.on("add",Tr),A.on("remove",Jr)),function(){Zn===void 0&&(A.off("add",Tr),A.off("remove",Jr))}},[x]),Yt};function Af(h,x){return kc(h)||Zl(h,x)||Dc(h,x)||_f()}function _f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dc(h,x){if(h){if(typeof h=="string")return Ff(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Ff(h,x)}}function Ff(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Zl(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function kc(h){if(Array.isArray(h))return h}var ad=function(){var x=kf(),A=(0,C.useState)((x==null?void 0:x.getLayers())||[]),le=Af(A,2),dt=le[0],Yt=le[1];return(0,C.useEffect)(function(){if(x){var xr=function(){Yt(x.getLayers())};return x.on("add",xr),x.on("remove",xr),function(){x.off("add",xr),x.off("remove",xr)}}},[x]),dt};function rh(){this.__data__=[],this.size=0}var od=rh;function Yo(h,x){return h===x||h!==h&&x!==x}var Gs=Yo;function Kl(h,x){for(var A=h.length;A--;)if(Gs(h[A][0],x))return A;return-1}var dl=Kl,su=Array.prototype,Fc=su.splice;function tc(h){var x=this.__data__,A=dl(x,h);if(A<0)return!1;var le=x.length-1;return A==le?x.pop():Fc.call(x,A,1),--this.size,!0}var Tf=tc;function _c(h){var x=this.__data__,A=dl(x,h);return A<0?void 0:x[A][1]}var Hl=_c;function ff(h){return dl(this.__data__,h)>-1}var xc=ff;function Yh(h,x){var A=this.__data__,le=dl(A,h);return le<0?(++this.size,A.push([h,x])):A[le][1]=x,this}var Uh=Yh;function Gc(h){var x=-1,A=h==null?0:h.length;for(this.clear();++x<A;){var le=h[x];this.set(le[0],le[1])}}Gc.prototype.clear=od,Gc.prototype.delete=Tf,Gc.prototype.get=Hl,Gc.prototype.has=xc,Gc.prototype.set=Uh;var Mf=Gc;function nh(){this.__data__=new Mf,this.size=0}var Qn=nh;function fa(h){var x=this.__data__,A=x.delete(h);return this.size=x.size,A}var $i=fa;function $o(h){return this.__data__.get(h)}var lo=$o;function Es(h){return this.__data__.has(h)}var tl=Es;function al(h){var x=typeof h;return h!=null&&(x=="object"||x=="function")}var Tl=al,Lh="[object AsyncFunction]",xf="[object Function]",Qh="[object GeneratorFunction]",$h="[object Proxy]";function Ul(h){if(!Tl(h))return!1;var x=ie(h);return x==xf||x==Qh||x==Lh||x==$h}var Rl=Ul,ol=pe["__core-js_shared__"],uu=ol,Bc=function(){var h=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}();function cc(h){return!!Bc&&Bc in h}var ao=cc,Ml=Function.prototype,Hf=Ml.toString;function fl(h){if(h!=null){try{return Hf.call(h)}catch(x){}try{return h+""}catch(x){}}return""}var Vl=fl,Ll=/[\\^$.*+?()[\]{}|]/g,jh=/^\[object .+?Constructor\]$/,Qa=Function.prototype,Yl=Object.prototype,Vf=Qa.toString,ih=Yl.hasOwnProperty,Vu=RegExp("^"+Vf.call(ih).replace(Ll,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hf(h){if(!Tl(h)||ao(h))return!1;var x=Rl(h)?Vu:jh;return x.test(Vl(h))}var Hh=hf;function bc(h,x){return h==null?void 0:h[x]}var Ec=bc;function ah(h,x){var A=Ec(h,x);return Hh(A)?A:void 0}var Wc=ah,Dh=Wc(pe,"Map"),Sc=Dh,Vh=Wc(Object,"create"),Ql=Vh;function gu(){this.__data__=Ql?Ql(null):{},this.size=0}var Ks=gu;function Gf(h){var x=this.has(h)&&delete this.__data__[h];return this.size-=x?1:0,x}var Bf=Gf,eu="__lodash_hash_undefined__",Pl=Object.prototype,Xc=Pl.hasOwnProperty;function Nc(h){var x=this.__data__;if(Ql){var A=x[h];return A===eu?void 0:A}return Xc.call(x,h)?x[h]:void 0}var Jl=Nc,fc=Object.prototype,oo=fc.hasOwnProperty;function ko(h){var x=this.__data__;return Ql?x[h]!==void 0:oo.call(x,h)}var nu=ko,ql="__lodash_hash_undefined__";function xl(h,x){var A=this.__data__;return this.size+=this.has(h)?0:1,A[h]=Ql&&x===void 0?ql:x,this}var mu=xl;function Ku(h){var x=-1,A=h==null?0:h.length;for(this.clear();++x<A;){var le=h[x];this.set(le[0],le[1])}}Ku.prototype.clear=Ks,Ku.prototype.delete=Bf,Ku.prototype.get=Jl,Ku.prototype.has=nu,Ku.prototype.set=mu;var Kc=Ku;function Gh(){this.size=0,this.__data__={hash:new Kc,map:new(Sc||Mf),string:new Kc}}var Yu=Gh;function bl(h){var x=typeof h;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?h!=="__proto__":h===null}var yd=bl;function ph(h,x){var A=h.__data__;return yd(x)?A[typeof x=="string"?"string":"hash"]:A.map}var Cc=ph;function Yc(h){var x=Cc(this,h).delete(h);return this.size-=x?1:0,x}var Dl=Yc;function Ur(h){return Cc(this,h).get(h)}var kl=Ur;function Vo(h){return Cc(this,h).has(h)}var Qo=Vo;function du(h,x){var A=Cc(this,h),le=A.size;return A.set(h,x),this.size+=A.size==le?0:1,this}var kh=du;function Wf(h){var x=-1,A=h==null?0:h.length;for(this.clear();++x<A;){var le=h[x];this.set(le[0],le[1])}}Wf.prototype.clear=Yu,Wf.prototype.delete=Dl,Wf.prototype.get=kl,Wf.prototype.has=Qo,Wf.prototype.set=kh;var zc=Wf,df=200;function rc(h,x){var A=this.__data__;if(A instanceof Mf){var le=A.__data__;if(!Sc||le.length<df-1)return le.push([h,x]),this.size=++A.size,this;A=this.__data__=new zc(le)}return A.set(h,x),this.size=A.size,this}var ys=rc;function bf(h){var x=this.__data__=new Mf(h);this.size=x.size}bf.prototype.clear=Qn,bf.prototype.delete=$i,bf.prototype.get=lo,bf.prototype.has=tl,bf.prototype.set=ys;var Xf=bf,rl="__lodash_hash_undefined__";function wc(h){return this.__data__.set(h,rl),this}var Zc=wc;function sd(h){return this.__data__.has(h)}var Qc=sd;function f(h){var x=-1,A=h==null?0:h.length;for(this.__data__=new zc;++x<A;)this.add(h[x])}f.prototype.add=f.prototype.push=Zc,f.prototype.has=Qc;var g=f;function p(h,x){for(var A=-1,le=h==null?0:h.length;++A<le;)if(x(h[A],A,h))return!0;return!1}var E=p;function Y(h,x){return h.has(x)}var ye=Y,Pe=1,ct=2;function Vt(h,x,A,le,dt,Yt){var xr=A&Pe,Tr=h.length,Jr=x.length;if(Tr!=Jr&&!(xr&&Jr>Tr))return!1;var Zn=Yt.get(h),li=Yt.get(x);if(Zn&&li)return Zn==x&&li==h;var da=-1,ro=!0,Xo=A&ct?new g:void 0;for(Yt.set(h,x),Yt.set(x,h);++da<Tr;){var Fo=h[da],ho=x[da];if(le)var ns=xr?le(ho,Fo,da,x,h,Yt):le(Fo,ho,da,h,x,Yt);if(ns!==void 0){if(ns)continue;ro=!1;break}if(Xo){if(!E(x,function(vs,us){if(!ye(Xo,us)&&(Fo===vs||dt(Fo,vs,A,le,Yt)))return Xo.push(us)})){ro=!1;break}}else if(!(Fo===ho||dt(Fo,ho,A,le,Yt))){ro=!1;break}}return Yt.delete(h),Yt.delete(x),ro}var fr=Vt,Ir=pe.Uint8Array,Dr=Ir;function jr(h){var x=-1,A=Array(h.size);return h.forEach(function(le,dt){A[++x]=[dt,le]}),A}var En=jr;function gn(h){var x=-1,A=Array(h.size);return h.forEach(function(le){A[++x]=le}),A}var Bn=gn,fn=1,Fn=2,jn="[object Boolean]",vi="[object Date]",ki="[object Error]",Ti="[object Map]",Fi="[object Number]",na="[object RegExp]",ka="[object Set]",Na="[object String]",po="[object Symbol]",No="[object ArrayBuffer]",is="[object DataView]",rs=ke?ke.prototype:void 0,Ls=rs?rs.valueOf:void 0;function vo(h,x,A,le,dt,Yt,xr){switch(A){case is:if(h.byteLength!=x.byteLength||h.byteOffset!=x.byteOffset)return!1;h=h.buffer,x=x.buffer;case No:return!(h.byteLength!=x.byteLength||!Yt(new Dr(h),new Dr(x)));case jn:case vi:case Fi:return Gs(+h,+x);case ki:return h.name==x.name&&h.message==x.message;case na:case Na:return h==x+"";case Ti:var Tr=En;case ka:var Jr=le&fn;if(Tr||(Tr=Bn),h.size!=x.size&&!Jr)return!1;var Zn=xr.get(h);if(Zn)return Zn==x;le|=Fn,xr.set(h,x);var li=fr(Tr(h),Tr(x),le,dt,Yt,xr);return xr.delete(h),li;case po:if(Ls)return Ls.call(h)==Ls.call(x)}return!1}var ds=vo;function Ns(h,x){for(var A=-1,le=x.length,dt=h.length;++A<le;)h[dt+A]=x[A];return h}var cs=Ns;function Jo(h,x,A){var le=x(h);return br(h)?le:cs(le,A(h))}var $s=Jo;function ws(h,x){for(var A=-1,le=h==null?0:h.length,dt=0,Yt=[];++A<le;){var xr=h[A];x(xr,A,h)&&(Yt[dt++]=xr)}return Yt}var _s=ws;function El(){return[]}var nl=El,Qu=Object.prototype,Ac=Qu.propertyIsEnumerable,Ju=Object.getOwnPropertySymbols,qu=Ju?function(h){return h==null?[]:(h=Object(h),_s(Ju(h),function(x){return Ac.call(h,x)}))}:nl,Tc=qu;function ec(h,x){for(var A=-1,le=Array(h);++A<h;)le[A]=x(A);return le}var Pf=ec,Ef="[object Arguments]";function $l(h){return Le(h)&&ie(h)==Ef}var Uc=$l,Jh=Object.prototype,qh=Jh.hasOwnProperty,Sh=Jh.propertyIsEnumerable,Of=Uc(function(){return arguments}())?Uc:function(h){return Le(h)&&qh.call(h,"callee")&&!Sh.call(h,"callee")},Ch=Of;function pf(){return!1}var oh=pf,Jc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nc=Jc&&typeof module=="object"&&module&&!module.nodeType&&module,ic=nc&&nc.exports===Jc,wh=ic?pe.Buffer:void 0,Fh=wh?wh.isBuffer:void 0,Du=Fh||oh,yu=Du,qc=9007199254740991,sh=/^(?:0|[1-9]\d*)$/;function vh(h,x){var A=typeof h;return x=x==null?qc:x,!!x&&(A=="number"||A!="symbol"&&sh.test(h))&&h>-1&&h%1==0&&h<x}var Nf=vh,mh=9007199254740991;function If(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=mh}var Rf=If,vf="[object Arguments]",oe="[object Array]",Br="[object Boolean]",xt="[object Date]",mt="[object Error]",Ht="[object Function]",or="[object Map]",en="[object Number]",_n="[object Object]",Tn="[object RegExp]",zn="[object Set]",wi="[object String]",Xi="[object WeakMap]",ba="[object ArrayBuffer]",mo="[object DataView]",Ja="[object Float32Array]",Ds="[object Float64Array]",Ts="[object Int8Array]",lu="[object Int16Array]",Iu="[object Int32Array]",_u="[object Uint8Array]",Mc="[object Uint8ClampedArray]",tu="[object Uint16Array]",Fl="[object Uint32Array]",Ys={};Ys[Ja]=Ys[Ds]=Ys[Ts]=Ys[lu]=Ys[Iu]=Ys[_u]=Ys[Mc]=Ys[tu]=Ys[Fl]=!0,Ys[vf]=Ys[oe]=Ys[ba]=Ys[Br]=Ys[mo]=Ys[xt]=Ys[mt]=Ys[Ht]=Ys[or]=Ys[en]=Ys[_n]=Ys[Tn]=Ys[zn]=Ys[wi]=Ys[Xi]=!1;function ku(h){return Le(h)&&Rf(h.length)&&!!Ys[ie(h)]}var Bu=ku;function Gl(h){return function(x){return h(x)}}var ru=Gl,pl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ef=pl&&typeof module=="object"&&module&&!module.nodeType&&module,Bh=ef&&ef.exports===pl,hc=Bh&&ue.process,uh=function(){try{var h=ef&&ef.require&&ef.require("util").types;return h||hc&&hc.binding&&hc.binding("util")}catch(x){}}(),Kf=uh,gh=Kf&&Kf.isTypedArray,yh=gh?ru(gh):Bu,Yf=yh,dc=Object.prototype,ne=dc.hasOwnProperty;function Me(h,x){var A=br(h),le=!A&&Ch(h),dt=!A&&!le&&yu(h),Yt=!A&&!le&&!dt&&Yf(h),xr=A||le||dt||Yt,Tr=xr?Pf(h.length,String):[],Jr=Tr.length;for(var Zn in h)(x||ne.call(h,Zn))&&!(xr&&(Zn=="length"||dt&&(Zn=="offset"||Zn=="parent")||Yt&&(Zn=="buffer"||Zn=="byteLength"||Zn=="byteOffset")||Nf(Zn,Jr)))&&Tr.push(Zn);return Tr}var Oe=Me,Ke=Object.prototype;function pt(h){var x=h&&h.constructor,A=typeof x=="function"&&x.prototype||Ke;return h===A}var Pt=pt;function Xr(h,x){return function(A){return h(x(A))}}var An=Xr,mi=An(Object.keys,Object),un=mi,bi=Object.prototype,ga=bi.hasOwnProperty;function ss(h){if(!Pt(h))return un(h);var x=[];for(var A in Object(h))ga.call(h,A)&&A!="constructor"&&x.push(A);return x}var To=ss;function Ro(h){return h!=null&&Rf(h.length)&&!Rl(h)}var fs=Ro;function ps(h){return fs(h)?Oe(h):To(h)}var zo=ps;function ks(h){return $s(h,zo,Tc)}var xu=ks,cu=1,tf=Object.prototype,$c=tf.hasOwnProperty;function ac(h,x,A,le,dt,Yt){var xr=A&cu,Tr=xu(h),Jr=Tr.length,Zn=xu(x),li=Zn.length;if(Jr!=li&&!xr)return!1;for(var da=Jr;da--;){var ro=Tr[da];if(!(xr?ro in x:$c.call(x,ro)))return!1}var Xo=Yt.get(h),Fo=Yt.get(x);if(Xo&&Fo)return Xo==x&&Fo==h;var ho=!0;Yt.set(h,x),Yt.set(x,h);for(var ns=xr;++da<Jr;){ro=Tr[da];var vs=h[ro],us=x[ro];if(le)var Eu=xr?le(us,vs,ro,x,h,Yt):le(vs,us,ro,h,x,Yt);if(!(Eu===void 0?vs===us||dt(vs,us,A,le,Yt):Eu)){ho=!1;break}ns||(ns=ro=="constructor")}if(ho&&!ns){var Nu=h.constructor,ul=x.constructor;Nu!=ul&&"constructor"in h&&"constructor"in x&&!(typeof Nu=="function"&&Nu instanceof Nu&&typeof ul=="function"&&ul instanceof ul)&&(ho=!1)}return Yt.delete(h),Yt.delete(x),ho}var ll=ac,Cu=Wc(pe,"DataView"),Sl=Cu,Wl=Wc(pe,"Promise"),Pc=Wl,jc=Wc(pe,"Set"),hu=jc,_h=Wc(pe,"WeakMap"),Oc=_h,ud="[object Map]",Hd="[object Object]",Zu="[object Promise]",Sd="[object Set]",Hc="[object WeakMap]",Nh="[object DataView]",up=Vl(Sl),_d=Vl(Sc),pp=Vl(Pc),vp=Vl(hu),mp=Vl(Oc),Cd=ie;(Sl&&Cd(new Sl(new ArrayBuffer(1)))!=Nh||Sc&&Cd(new Sc)!=ud||Pc&&Cd(Pc.resolve())!=Zu||hu&&Cd(new hu)!=Sd||Oc&&Cd(new Oc)!=Hc)&&(Cd=function(h){var x=ie(h),A=x==Hd?h.constructor:void 0,le=A?Vl(A):"";if(le)switch(le){case up:return Nh;case _d:return ud;case pp:return Zu;case vp:return Sd;case mp:return Hc}return x});var ld=Cd,gp=1,Ah="[object Arguments]",Dd="[object Array]",xd="[object Object]",wd=Object.prototype,vl=wd.hasOwnProperty;function kd(h,x,A,le,dt,Yt){var xr=br(h),Tr=br(x),Jr=xr?Dd:ld(h),Zn=Tr?Dd:ld(x);Jr=Jr==Ah?xd:Jr,Zn=Zn==Ah?xd:Zn;var li=Jr==xd,da=Zn==xd,ro=Jr==Zn;if(ro&&yu(h)){if(!yu(x))return!1;xr=!0,li=!1}if(ro&&!li)return Yt||(Yt=new Xf),xr||Yf(h)?fr(h,x,A,le,dt,Yt):ds(h,x,Jr,A,le,dt,Yt);if(!(A&gp)){var Xo=li&&vl.call(h,"__wrapped__"),Fo=da&&vl.call(x,"__wrapped__");if(Xo||Fo){var ho=Xo?h.value():h,ns=Fo?x.value():x;return Yt||(Yt=new Xf),dt(ho,ns,A,le,Yt)}}return ro?(Yt||(Yt=new Xf),ll(h,x,A,le,dt,Yt)):!1}var Fs=kd;function cd(h,x,A,le,dt){return h===x?!0:h==null||x==null||!Le(h)&&!Le(x)?h!==h&&x!==x:Fs(h,x,A,le,cd,dt)}var Vd=cd;function Gd(h,x){return Vd(h,x)}var jt=Gd;function Vr(h,x){for(var A=-1,le=h==null?0:h.length;++A<le&&x(h[A],A,h)!==!1;);return h}var Ln=Vr,Ci=function(){try{var h=Wc(Object,"defineProperty");return h({},"",{}),h}catch(x){}}(),aa=Ci;function Ai(h,x,A){x=="__proto__"&&aa?aa(h,x,{configurable:!0,enumerable:!0,value:A,writable:!0}):h[x]=A}var Gi=Ai,Ea=Object.prototype,Pa=Ea.hasOwnProperty;function Ra(h,x,A){var le=h[x];(!(Pa.call(h,x)&&Gs(le,A))||A===void 0&&!(x in h))&&Gi(h,x,A)}var Za=Ra;function Ha(h,x,A,le){var dt=!A;A||(A={});for(var Yt=-1,xr=x.length;++Yt<xr;){var Tr=x[Yt],Jr=le?le(A[Tr],h[Tr],Tr,A,h):void 0;Jr===void 0&&(Jr=h[Tr]),dt?Gi(A,Tr,Jr):Za(A,Tr,Jr)}return A}var $a=Ha;function ya(h,x){return h&&$a(x,zo(x),h)}var Ua=ya;function ui(h){var x=[];if(h!=null)for(var A in Object(h))x.push(A);return x}var Ni=ui,La=Object.prototype,Ya=La.hasOwnProperty;function _a(h){if(!Tl(h))return Ni(h);var x=Pt(h),A=[];for(var le in h)le=="constructor"&&(x||!Ya.call(h,le))||A.push(le);return A}var Ga=_a;function xo(h){return fs(h)?Oe(h,!0):Ga(h)}var xs=xo;function ea(h,x){return h&&$a(x,xs(x),h)}var sa=ea,Zo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fo=Zo&&typeof module=="object"&&module&&!module.nodeType&&module,Oa=fo&&fo.exports===Zo,to=Oa?pe.Buffer:void 0,Ia=to?to.allocUnsafe:void 0;function Os(h,x){if(x)return h.slice();var A=h.length,le=Ia?Ia(A):new h.constructor(A);return h.copy(le),le}var Bs=Os;function so(h,x){var A=-1,le=h.length;for(x||(x=Array(le));++A<le;)x[A]=h[A];return x}var yo=so;function hs(h,x){return $a(h,Tc(h),x)}var zs=hs,wu=An(Object.getPrototypeOf,Object),Gu=wu,Bl=Object.getOwnPropertySymbols,Au=Bl?function(h){for(var x=[];h;)cs(x,Tc(h)),h=Gu(h);return x}:nl,Sf=Au;function Xl(h,x){return $a(h,Sf(h),x)}var Ic=Xl;function Cl(h){return $s(h,xs,Sf)}var rf=Cl,mf=Object.prototype,lh=mf.hasOwnProperty;function pc(h){var x=h.length,A=new h.constructor(x);return x&&typeof h[0]=="string"&&lh.call(h,"index")&&(A.index=h.index,A.input=h.input),A}var fu=pc;function Cf(h){var x=new h.constructor(h.byteLength);return new Dr(x).set(new Dr(h)),x}var Uu=Cf;function Qf(h,x){var A=x?Uu(h.buffer):h.buffer;return new h.constructor(A,h.byteOffset,h.byteLength)}var js=Qf,Pu=/\w*$/;function Ru(h){var x=new h.constructor(h.source,Pu.exec(h));return x.lastIndex=h.lastIndex,x}var nf=Ru,pd=ke?ke.prototype:void 0,w=pd?pd.valueOf:void 0;function G(h){return w?Object(w.call(h)):{}}var Ce=G;function ae(h,x){var A=x?Uu(h.buffer):h.buffer;return new h.constructor(A,h.byteOffset,h.length)}var et=ae,Ie="[object Boolean]",Ze="[object Date]",Fe="[object Map]",it="[object Number]",gt="[object RegExp]",It="[object Set]",Tt="[object String]",qt="[object Symbol]",Ot="[object ArrayBuffer]",rr="[object DataView]",Xt="[object Float32Array]",gr="[object Float64Array]",Sr="[object Int8Array]",Wr="[object Int16Array]",Cn="[object Int32Array]",xn="[object Uint8Array]",In="[object Uint8ClampedArray]",Rn="[object Uint16Array]",Gn="[object Uint32Array]";function ti(h,x,A){var le=h.constructor;switch(x){case Ot:return Uu(h);case Ie:case Ze:return new le(+h);case rr:return js(h,A);case Xt:case gr:case Sr:case Wr:case Cn:case xn:case In:case Rn:case Gn:return et(h,A);case Fe:return new le;case it:case Tt:return new le(h);case gt:return nf(h);case It:return new le;case qt:return Ce(h)}}var ii=ti,b=Object.create,M=function(){function h(){}return function(x){if(!Tl(x))return{};if(b)return b(x);h.prototype=x;var A=new h;return h.prototype=void 0,A}}(),D=M;function P(h){return typeof h.constructor=="function"&&!Pt(h)?D(Gu(h)):{}}var V=P,q="[object Map]";function be(h){return Le(h)&&ld(h)==q}var $e=be,_t=Kf&&Kf.isMap,Gt=_t?ru(_t):$e,yr=Gt,$r="[object Set]";function an(h){return Le(h)&&ld(h)==$r}var Un=an,ei=Kf&&Kf.isSet,Jn=ei?ru(ei):Un,Sn=Jn,Xn=1,ai=2,ln=4,pi="[object Arguments]",gi="[object Array]",Li="[object Boolean]",Ki="[object Date]",ua="[object Error]",la="[object Function]",Lo="[object GeneratorFunction]",Fa="[object Map]",go="[object Number]",Qs="[object Object]",e="[object RegExp]",i="[object Set]",c="[object String]",y="[object Symbol]",I="[object WeakMap]",H="[object ArrayBuffer]",Q="[object DataView]",ge="[object Float32Array]",tt="[object Float64Array]",Rt="[object Int8Array]",Ft="[object Int16Array]",Jt="[object Int32Array]",dr="[object Uint8Array]",Cr="[object Uint8ClampedArray]",tn="[object Uint16Array]",rn="[object Uint32Array]",yn={};yn[pi]=yn[gi]=yn[H]=yn[Q]=yn[Li]=yn[Ki]=yn[ge]=yn[tt]=yn[Rt]=yn[Ft]=yn[Jt]=yn[Fa]=yn[go]=yn[Qs]=yn[e]=yn[i]=yn[c]=yn[y]=yn[dr]=yn[Cr]=yn[tn]=yn[rn]=!0,yn[ua]=yn[la]=yn[I]=!1;function vn(h,x,A,le,dt,Yt){var xr,Tr=x&Xn,Jr=x&ai,Zn=x&ln;if(A&&(xr=dt?A(h,le,dt,Yt):A(h)),xr!==void 0)return xr;if(!Tl(h))return h;var li=br(h);if(li){if(xr=fu(h),!Tr)return yo(h,xr)}else{var da=ld(h),ro=da==la||da==Lo;if(yu(h))return Bs(h,Tr);if(da==Qs||da==pi||ro&&!dt){if(xr=Jr||ro?{}:V(h),!Tr)return Jr?Ic(h,sa(xr,h)):zs(h,Ua(xr,h))}else{if(!yn[da])return dt?h:{};xr=ii(h,da,Tr)}}Yt||(Yt=new Xf);var Xo=Yt.get(h);if(Xo)return Xo;Yt.set(h,xr),Sn(h)?h.forEach(function(ns){xr.add(vn(ns,x,A,ns,h,Yt))}):yr(h)&&h.forEach(function(ns,vs){xr.set(vs,vn(ns,x,A,vs,h,Yt))});var Fo=Zn?Jr?rf:xu:Jr?xs:zo,ho=li?void 0:Fo(h);return Ln(ho||h,function(ns,vs){ho&&(vs=ns,ns=h[vs]),Za(xr,vs,vn(ns,x,A,vs,h,Yt))}),xr}var $n=vn,ri=1,_i=4;function xi(h){return $n(h,ri|_i)}var Ii=xi;function ta(h){return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},ta(h)}var Qi=["onCreated","source"],ja=["data"],qn=["data"];function ca(h,x){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(h);x&&(le=le.filter(function(dt){return Object.getOwnPropertyDescriptor(h,dt).enumerable})),A.push.apply(A,le)}return A}function ra(h){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?ca(Object(A),!0).forEach(function(le){bo(h,le,A[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):ca(Object(A)).forEach(function(le){Object.defineProperty(h,le,Object.getOwnPropertyDescriptor(A,le))})}return h}function bo(h,x,A){return x=Eo(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function Eo(h){var x=qa(h,"string");return ta(x)==="symbol"?x:String(x)}function qa(h,x){if(ta(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(ta(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function Ss(h,x){if(h==null)return{};var A=Is(h,x),le,dt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(dt=0;dt<Yt.length;dt++)le=Yt[dt],!(x.indexOf(le)>=0)&&Object.prototype.propertyIsEnumerable.call(h,le)&&(A[le]=h[le])}return A}function Is(h,x){if(h==null)return{};var A={},le=Object.keys(h),dt,Yt;for(Yt=0;Yt<le.length;Yt++)dt=le[Yt],!(x.indexOf(dt)>=0)&&(A[dt]=h[dt]);return A}var pu=function(x,A){var le=A.onCreated,dt=A.source,Yt=Ss(A,Qi),xr=kf(),Tr=(0,C.useRef)(),Jr=(0,C.useRef)(Yt),Zn=(0,C.useRef)(dt);return Tr.current||(Tr.current=new x(A),le&&Tr.current.once("inited",function(){return le(Tr.current)}),xr.addLayer(Tr.current)),_l(function(){if(Tr.current){var li=!jt(Jr.current,Yt);li&&(Tr.current.update(Yt),Jr.current=Ii(Yt))}},[Yt]),_l(function(){if(Tr.current){var li=dt.data,da=Ss(dt,ja),ro=Zn.current,Xo=ro.data,Fo=Ss(ro,qn),ho=li!==Xo||!jt(da,Fo);ho&&(Tr.current.changeData(dt),Zn.current=ra({},dt))}},[dt]),(0,C.useEffect)(function(){return function(){Tr.current&&(xr.removeLayer(Tr.current),Tr.current=null)}},[]),Tr},es={onRemove:"remove",onShow:"show",onHide:"hide",onDataUpdate:"dataUpdate",onLegend:"legend",onLegendColor:"legend:color",onLegendSize:"legend:size",onClick:"click",onUnClick:"unclick",onDblClick:"dblclick",onUndblclick:"undblclick",onContextMenu:"contextmenu",onUnContextMenu:"uncontextmenu",onMouseEnter:"mouseenter",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseUp:"mouseup",onMouseDown:"mousedown",onUnMousemove:"unmousemove",onUnMouseup:"unmouseup",onUnMousedown:"unmousedown",onUnPick:"unpick"},$u=function(x,A){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:es,dt=(0,C.useMemo)(function(){return Object.keys(le)},[le]);Kn(function(Yt){var xr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Tr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Yt.forEach(function(Jr){var Zn=le[dt[Jr]],li=xr[Jr],da=Tr[Jr];li&&x.off(Zn,li),da&&x.on(Zn,da)})},dt.map(function(Yt){return A[Yt]})),qr(function(){dt.forEach(function(Yt){var xr=le[Yt],Tr=A[Yt];xr&&Tr&&x.off(xr,Tr)})})},hl=null,Nl=null,el=null,af=null,gf=null,zf=null,Th=null,ed=Object.assign(es,{onSelect:"select",onUnselect:"unselect"}),Zf=null,iu=m(70655),Uf={}.toString,xh=function(h,x){return Uf.call(h)==="[object "+x+"]"},Lu=xh,cl=function(h){return Lu(h,"Function")},sl=function(h){return Array.isArray?Array.isArray(h):Lu(h,"Array")},Wu=function(h){var x=typeof h;return h!==null&&x==="object"||x==="function"};function td(h,x){if(h){var A;if(sl(h))for(var le=0,dt=h.length;le<dt&&(A=x(h[le],le),A!==!1);le++);else if(Wu(h)){for(var Yt in h)if(h.hasOwnProperty(Yt)&&(A=x(h[Yt],Yt),A===!1))break}}}var Jf=td,Rc=Object.keys?function(h){return Object.keys(h)}:function(h){var x=[];return Jf(h,function(A,le){cl(h)&&le==="prototype"||x.push(le)}),x},$f=null;function rd(h,x){var A=keys(x),le=A.length;if(isNil(h))return!le;for(var dt=0;dt<le;dt+=1){var Yt=A[dt];if(x[Yt]!==h[Yt]||!(Yt in h))return!1}return!0}var wl=null,Mh=function(h){return typeof h=="object"&&h!==null},fd=Mh,Wd=function(h){if(!fd(h)||!Lu(h,"Object"))return!1;if(Object.getPrototypeOf(h)===null)return!0;for(var x=h;Object.getPrototypeOf(x)!==null;)x=Object.getPrototypeOf(x);return Object.getPrototypeOf(h)===x},oc=Wd;function Ou(h,x){if(!isArray(h))return null;var A;if(isFunction(x)&&(A=x),isPlainObject(x)&&(A=function(dt){return isMatch(dt,x)}),A){for(var le=0;le<h.length;le+=1)if(A(h[le]))return h[le]}return null}var Od=null,Wh=function(h,x){for(var A=null,le=0;le<h.length;le++){var dt=h[le],Yt=dt[x];if(!isNil(Yt)){isArray(Yt)?A=Yt[0]:A=Yt;break}}return A},yf=null,Ep=function(h){if(!isArray(h))return[];for(var x=[],A=0;A<h.length;A++)x=x.concat(h[A]);return x},bd=null,ml=function(h,x){if(x===void 0&&(x=[]),!isArray(h))x.push(h);else for(var A=0;A<h.length;A+=1)ml(h[A],x);return x},vc=null,vd=function(h){if(isArray(h))return h.reduce(function(x,A){return Math.max(x,A)},h[0])},Ad=function(h){if(isArray(h))return h.reduce(function(x,A){return Math.min(x,A)},h[0])},Fd=function(h){var x=h.filter(function(xr){return!isNaN(xr)});if(!x.length)return{min:0,max:0};if(isArray(h[0])){for(var A=[],le=0;le<h.length;le++)A=A.concat(h[le]);x=A}var dt=getMax(x),Yt=getMin(x);return{min:Yt,max:dt}},yp=null,Ph=Array.prototype,Ed=Ph.splice,Bd=Ph.indexOf,Jd=function(h){for(var x=[],A=1;A<arguments.length;A++)x[A-1]=arguments[A];for(var le=0;le<x.length;le++)for(var dt=x[le],Yt=-1;(Yt=Bd.call(h,dt))>-1;)Ed.call(h,Yt,1);return h},qf=null,bh=Array.prototype.splice,Bv=function(x,A){if(!isArrayLike(x))return[];for(var le=x?A.length:0,dt=le-1;le--;){var Yt=void 0,xr=A[le];(le===dt||xr!==Yt)&&(Yt=xr,bh.call(x,xr,1))}return x},nv=null,iv=function(h,x,A){if(!sl(h)&&!oc(h))return h;var le=A;return Jf(h,function(dt,Yt){le=x(le,dt,Yt)}),le},av=iv,ov=function(h,x){var A=[];if(!isArrayLike(h))return A;for(var le=-1,dt=[],Yt=h.length;++le<Yt;){var xr=h[le];x(xr,le,h)&&(A.push(xr),dt.push(le))}return pullAt(h,dt),A},sv=null,Nd=function(h){return Lu(h,"String")};function uv(h,x){var A;if(isFunction(x))A=function(dt,Yt){return x(dt)-x(Yt)};else{var le=[];isString(x)?le.push(x):isArray(x)&&(le=x),A=function(dt,Yt){for(var xr=0;xr<le.length;xr+=1){var Tr=le[xr];if(dt[Tr]>Yt[Tr])return 1;if(dt[Tr]<Yt[Tr])return-1}return 0}}return h.sort(A),h}var _p=null,Np=function(h,x){for(var A=[],le={},dt=0;dt<h.length;dt++){var Yt=h[dt],xr=Yt[x];if(!isNil(xr)){isArray(xr)||(xr=[xr]);for(var Tr=0;Tr<xr.length;Tr++){var Jr=xr[Tr];le[Jr]||(A.push(Jr),le[Jr]=!0)}}}return A};function zp(h,x){return isArray(h)||isString(h)?h[0]===x:!1}var Sp=null;function xp(h,x){return isArray(h)||isString(h)?h[h.length-1]===x:!1}var Td=null,rp=Object.prototype.hasOwnProperty;function t0(h,x){if(!x||!isArray(h))return{};for(var A={},le=isFunction(x)?x:function(Tr){return Tr[x]},dt,Yt=0;Yt<h.length;Yt++){var xr=h[Yt];dt=le(xr),rp.call(A,dt)?A[dt].push(xr):A[dt]=[xr]}return A}var F0=null;function Nv(h,x){if(!x)return{0:h};if(!isFunction(x)){var A=isArray(x)?x:x.replace(/\s+/g,"").split("*");x=function(le){for(var dt="_",Yt=0,xr=A.length;Yt<xr;Yt++)dt+=le[A[Yt]]&&le[A[Yt]].toString();return dt}}return groupBy(h,x)}var B0=function(h,x){if(!x)return[h];var A=groupToMap(h,x),le=[];for(var dt in A)le.push(A[dt]);return le},lv={};function N0(h){var x=lv[h];if(!x){for(var A=h.toString(16),le=A.length;le<6;le++)A="0"+A;x="#"+A,lv[h]=x}return x}var qd=null;function Js(h){var x=0,A=0,le=0,dt=0;return isArray(h)?h.length===1?x=A=le=dt=h[0]:h.length===2?(x=le=h[0],A=dt=h[1]):h.length===3?(x=h[0],A=dt=h[1],le=h[2]):(x=h[0],A=h[1],le=h[2],dt=h[3]):x=A=le=dt=h,{r1:x,r2:A,r3:le,r4:dt}}var np=null,Xd=function(h){return Lu(h,"Number")},ip=Xd,zv=function(h){return isNumber(h)&&h%1!==0},of=null,Zp=function(h){return isNumber(h)&&h%2===0},ap=null,Pp=Number.isInteger?Number.isInteger:function(h){return ip(h)&&h%1===0},cv=null,fv=function(h){return isNumber(h)&&h<0},hv=null,r0=function(h){return isNumber(h)&&h%2!==0},Zv=null,Wp=function(h){return isNumber(h)&&h>0},z0=null,n0=function(h,x){if(isArray(h)){for(var A,le=-1/0,dt=0;dt<h.length;dt++){var Yt=h[dt],xr=isFunction(x)?x(Yt):Yt[x];xr>le&&(A=Yt,le=xr)}return A}},Z0=function(h,x){if(isArray(h)){for(var A,le=1/0,dt=0;dt<h.length;dt++){var Yt=h[dt],xr=isFunction(x)?x(Yt):Yt[x];xr<le&&(A=Yt,le=xr)}return A}},U0=180/Math.PI,dv=function(h){return U0*h},zd=null,pv=parseInt,Uv=Math.PI/180,Cp=function(h){return Uv*h},vv=null,$v=null,bp=Object.values?function(h){return Object.values(h)}:function(h){var x=[];return Jf(h,function(A,le){cl(h)&&le==="prototype"||x.push(A)}),x},Op=bp,ch=function(h,x){return contains(values(h),x)},Xh={}.toString,mv=function(h){return Xh.call(h).replace(/^\[object /,"").replace(/]$/,"")},wm=null,$0=function(h){return isType(h,"Arguments")},i0=null,jv=function(h){return Lu(h,"Boolean")},gv=jv,a0=function(h){return isType(h,"Date")},op=null,o0=function(h){return isType(h,"Error")},s0=null;function j0(h){return isNumber(h)&&isFinite(h)}var Hv=Object.prototype,yv=function(h){var x=h&&h.constructor,A=typeof x=="function"&&x.prototype||Hv;return h===A},u0=null,l0=function(h){return isType(h,"RegExp")},c0=null,H0=function(h){return h===void 0},Ol=H0,_v=function(){for(var h=[],x=0;x<arguments.length;x++)h[x]=arguments[x];for(var A=h[0],le=1;le<h.length;le++){var dt=h[le];isFunction(dt)&&(dt=dt.prototype),mix(A.prototype,dt)}},xv=null,Xp=function(h){if(typeof h!="object"||h===null)return h;var x;if(sl(h)){x=[];for(var A=0,le=h.length;A<le;A++)typeof h[A]=="object"&&h[A]!=null?x[A]=Xp(h[A]):x[A]=h[A]}else{x={};for(var dt in h)typeof h[dt]=="object"&&h[dt]!=null?x[dt]=Xp(h[dt]):x[dt]=h[dt]}return x},Vv=Xp,V0=function(h,x){if(!cl(h))throw new TypeError("Expected a function");var A=function(){for(var le=[],dt=0;dt<arguments.length;dt++)le[dt]=arguments[dt];var Yt=x?x.apply(this,le):le[0],xr=A.cache;if(xr.has(Yt))return xr.get(Yt);var Tr=h.apply(this,le);return xr.set(Yt,Tr),Tr};return A.cache=new Map,A},f0=5;function bv(h,x,A,le){A=A||0,le=le||f0;for(var dt in x)if(x.hasOwnProperty(dt)){var Yt=x[dt];Yt!==null&&oc(Yt)?(oc(h[dt])||(h[dt]={}),A<le?bv(h[dt],Yt,A+1,le):h[dt]=x[dt]):sl(Yt)?(h[dt]=[],h[dt]=h[dt].concat(Yt)):Yt!==void 0&&(h[dt]=Yt)}}var h0=function(h){for(var x=[],A=1;A<arguments.length;A++)x[A-1]=arguments[A];for(var le=0;le<x.length;le+=1)bv(h,x[le]);return h},Ev=h0,Up=function(h,x,A,le){isFunction(x)||(A=x,x=h,h=function(){});var dt=Object.create?function(xr,Tr){return Object.create(xr,{constructor:{value:Tr}})}:function(xr,Tr){function Jr(){}Jr.prototype=xr;var Zn=new Jr;return Zn.constructor=Tr,Zn},Yt=dt(x.prototype,h);return h.prototype=mix(Yt,h.prototype),h.superclass=dt(x.prototype,x),mix(Yt,A),mix(h,le),h},Am=null,Tm=Object.prototype.hasOwnProperty;function lp(h){if(isNil(h))return!0;if(isArrayLike(h))return!h.length;var x=getType(h);if(x==="Map"||x==="Set")return!h.size;if(isPrototype(h))return!Object.keys(h).length;for(var A in h)if(Tm.call(h,A))return!1;return!0}var Sv=null,wp=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)},Kd=wp,Kp=function(h,x){if(h===x)return!0;if(!h||!x||Nd(h)||Nd(x))return!1;if(Kd(h)||Kd(x)){if(h.length!==x.length)return!1;for(var A=!0,le=0;le<h.length&&(A=Kp(h[le],x[le]),!!A);le++);return A}if(fd(h)||fd(x)){var dt=Object.keys(h),Yt=Object.keys(x);if(dt.length!==Yt.length)return!1;for(var A=!0,le=0;le<dt.length&&(A=Kp(h[dt[le]],x[dt[le]]),!!A);le++);return A}return!1},Ap=Kp,G0=function(h,x,A){return isFunction(A)?!!A(h,x):isEqual(h,x)},mg=function(h,x,A){for(var le=0,dt=isString(x)?x.split("."):x;h&&le<dt.length;)h=h[dt[le++]];return h===void 0||le<dt.length?A:h},gg=function(h,x,A){var le=h,dt=isString(x)?x.split("."):x;return dt.forEach(function(Yt,xr){xr<dt.length-1?(isObject(le[Yt])||(le[Yt]=isNumber(dt[xr+1])?[]:{}),le=le[Yt]):le[Yt]=A}),h},py=Object.prototype.hasOwnProperty,M_=function(h,x){if(h===null||!isPlainObject(h))return{};var A={};return each(x,function(le){py.call(h,le)&&(A[le]=h[le])}),A},W0=function(h,x){return av(h,function(A,le,dt){return x.includes(dt)||(A[dt]=le),A},{})},d0={},Cv=function(h){return h=h||"g",d0[h]?d0[h]+=1:d0[h]=1,h+d0[h]},p0,Mm=V0(function(h,x){x===void 0&&(x={});var A=x.fontSize,le=x.fontFamily,dt=x.fontWeight,Yt=x.fontStyle,xr=x.fontVariant;return p0||(p0=document.createElement("canvas").getContext("2d")),p0.font=[Yt,xr,dt,A+"px",le].join(" "),p0.measureText(Nd(h)?h:"").width},function(h,x){return x===void 0&&(x={}),(0,iu.pr)([h],Op(x)).join("")}),Pm=function(h,x,A,le){le===void 0&&(le="...");var dt=16,Yt=measureTextWidth(le,A),xr=isString(h)?h:toString(h),Tr=x,Jr=[],Zn,li;if(measureTextWidth(h,A)<=x)return h;for(;Zn=xr.substr(0,dt),li=measureTextWidth(Zn,A),!(li+Yt>Tr&&li>Tr);)if(Jr.push(Zn),Tr-=li,xr=xr.substr(dt),!xr)return Jr.join("");for(;Zn=xr.substr(0,1),li=measureTextWidth(Zn,A),!(li+Yt>Tr);)if(Jr.push(Zn),Tr-=li,xr=xr.substr(1),!xr)return Jr.join("");return""+Jr.join("")+le},vy=function(){function h(){this.map={}}return h.prototype.has=function(x){return this.map[x]!==void 0},h.prototype.get=function(x,A){var le=this.map[x];return le===void 0?A:le},h.prototype.set=function(x,A){this.map[x]=A},h.prototype.clear=function(){this.map={}},h.prototype.delete=function(x){delete this.map[x]},h.prototype.size=function(){return Object.keys(this.map).length},h}(),gy=null,v0=function(h,x){var A=h.source,le=(0,iu._T)(h,["source"]),dt=x.source,Yt=(0,iu._T)(x,["source"]),xr=(0,iu.pi)({},Ev({},le,Yt));return dt instanceof v.Source?xr.source=dt:A instanceof v.Source?xr.source=A:xr.source=(0,iu.pi)((0,iu.pi)({},A),dt),xr},m0=function(h,x){if(h instanceof v.Source&&x instanceof v.Source)return h!==x;var A=h.data,le=(0,iu._T)(h,["data"]),dt=x.data,Yt=(0,iu._T)(x,["data"]),xr=A!==dt||!Ap(le,Yt);return xr},g0;(function(h){h.BubbleLayer="bubbleLayer",h.ChoroplethLayer="choroplethLayer",h.IconImageLayer="iconImageLayer",h.IconFontLayer="iconFontLayer"})(g0||(g0={}));var Ip=["show","hide","dataUpdate","destroy","legend","legend:color","legend:size","click","dblclick","unclick","undblclick","contextmenu","uncontextmenu","mouseenter","unmouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","unpick"],$p;(function(h){h.CREATED="created",h.INITED="inited",h.ADD="add",h.REMOVE="remove"})($p||($p={}));var wv;(function(h){h.CREATED="created",h.INITED="inited",h.ADD="add",h.REMOVE="remove"})(wv||(wv={}));var Av;(function(h){h.INITED_LAYER="inited-layer",h.INITED_LAYERS="inited-layers"})(Av||(Av={}));var y0=function(h){(0,iu.ZT)(x,h);function x(A,le){A===void 0&&(A=[]),le===void 0&&(le={});var dt=h.call(this)||this;dt.layerMap=new Map,dt.name=le.name?le.name:Cv("layerGroup");for(var Yt=0;Yt<A.length;Yt++){var xr=A[Yt];dt.addLayer(xr)}return dt}return x.prototype.addTo=function(A){var le,dt,Yt=this;this.scene=A;var xr=0,Tr=this.layerMap.size;try{for(var Jr=(0,iu.XA)(this.layerMap.values()),Zn=Jr.next();!Zn.done;Zn=Jr.next()){var li=Zn.value;li.once("inited",function(da){xr++,Yt.emit(Av.INITED_LAYER,da),xr===Tr&&Yt.emit(Av.INITED_LAYERS)}),li.addTo(A)}}catch(da){le={error:da}}finally{try{Zn&&!Zn.done&&(dt=Jr.return)&&dt.call(Jr)}finally{if(le)throw le.error}}},x.prototype.remove=function(){this.scene&&this.getLayers().forEach(function(A){return A.remove()})},x.prototype.hasLayer=function(A){var le=typeof A=="string"?A:this.getLayerId(A);return this.layerMap.has(le)},x.prototype.addLayer=function(A){var le=this,dt=this.getLayerId(A);this.layerMap.set(dt,A),this.scene&&(A.once("inited",function(Yt){return le.emit(Av.INITED_LAYER,Yt)}),A.addTo(this.scene))},x.prototype.addLayers=function(A){var le=this;A.forEach(function(dt){le.addLayer(dt)})},x.prototype.removeLayer=function(A){var le=typeof A=="string"?A:this.getLayerId(A),dt=this.layerMap.get(le);return dt?(this.layerMap.delete(le),this.scene&&dt.remove(),!0):!1},x.prototype.getLayers=function(){return Array.from(this.layerMap.values())},x.prototype.getLayer=function(A){return this.layerMap.get(A)},x.prototype.getLayerByName=function(A){return this.getLayers().find(function(le){return le.name===A})},x.prototype.removeAllLayer=function(){var A,le;try{for(var dt=(0,iu.XA)(this.layerMap.values()),Yt=dt.next();!Yt.done;Yt=dt.next()){var xr=Yt.value;this.scene&&xr.remove()}}catch(Tr){A={error:Tr}}finally{try{Yt&&!Yt.done&&(le=dt.return)&&le.call(dt)}finally{if(A)throw A.error}}this.layerMap.clear()},x.prototype.isEmpty=function(){return this.layerMap.size===0},x.prototype.setZIndex=function(A){var le,dt;try{for(var Yt=(0,iu.XA)(this.layerMap.values()),xr=Yt.next();!xr.done;xr=Yt.next()){var Tr=xr.value;Tr.setIndex(A)}}catch(Jr){le={error:Jr}}finally{try{xr&&!xr.done&&(dt=Yt.return)&&dt.call(Yt)}finally{if(le)throw le.error}}},x.prototype.getLayerId=function(A){return A.id},x.prototype.destroy=function(){this.remove(),this.off("*")},x}($t),Id=function(h){(0,iu.ZT)(x,h);function x(A){var le=h.call(this)||this;le.isComposite=!0;var dt=A.id,Yt=A.name;le.id=dt||Cv("composite-layer"),le.name=Yt||le.id,le.options=v0(le.getDefaultOptions(),A),le.lastOptions=le.options,le.source=le.createSource();var xr=le.createSubLayers();return le.subLayers=new y0(xr),le.emit(wv.CREATED,le),le}return x.prototype.getDefaultOptions=function(){return x.DefaultOptions},x.prototype.createSource=function(){var A=this.options.source,le=A.data,dt=(0,iu._T)(A,["data"]),Yt=this.isSourceInstance(A)?A:new v.Source(le,dt);return Yt},x.prototype.isSourceInstance=function(A){return A instanceof v.Source},x.prototype.setSubLayersSource=function(A){this.layer.changeData(A)},x.prototype.initSubLayersEvent=function(){},x.prototype.addTo=function(A){var le=this;this.scene=A,this.subLayers.once(Av.INITED_LAYERS,function(){le.emit(wv.INITED,le),le.emit(wv.ADD,le)}),this.subLayers.addTo(A)},x.prototype.remove=function(){this.scene&&(this.subLayers.remove(),this.emit(wv.REMOVE))},x.prototype.update=function(A,le){var dt,Yt;le===void 0&&(le=!0),this.updateOption(A),le&&((dt=this.scene)===null||dt===void 0||dt.setEnableRender(!1)),A.source&&m0(A.source,this.lastOptions.source)&&this.changeData(A.source),this.updateSubLayers(A),le&&((Yt=this.scene)===null||Yt===void 0||Yt.setEnableRender(!0),this.render())},x.prototype.updateOption=function(A){this.lastOptions=this.options,this.options=v0(this.options,A)},x.prototype.render=function(){this.scene&&this.scene.render()},x.prototype.changeData=function(A){this.setSubLayersSource(A)},x.prototype.setIndex=function(A){this.subLayers.setZIndex(A)},x.prototype.setBlend=function(A){this.layer.setBlend(A)},x.prototype.setMinZoom=function(A){this.subLayers.getLayers().forEach(function(le){le.setMinZoom(A)})},x.prototype.setMaxZoom=function(A){this.subLayers.getLayers().forEach(function(le){le.setMaxZoom(A)})},x.prototype.show=function(){this.layer.inited&&this.update({visible:!0})},x.prototype.hide=function(){this.layer.inited&&this.update({visible:!1})},x.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},x.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():Ol(this.options.visible)?!0:this.options.visible},x.prototype.boxSelect=function(A,le){this.layer.boxSelect(A,le)},x.prototype.fitBounds=function(A){this.layer.fitBounds(A)},x.prototype.getLegend=function(A){return this.layer.getLegend(A)},x.prototype.getLegendItems=function(A){return this.layer.getLegendItems(A)},x.prototype.getColorLegendItems=function(){var A=this.layer.getLegendItems("color");if(Array.isArray(A)&&A.length!==0){var le=A;return le}return[]},x.prototype.getInteractionSubLayers=function(){var A=this.subLayers.getLayers().filter(function(le){return le.interaction===!0});return A},x.prototype.destroy=function(){this.subLayers.destroy()},x.prototype.on=function(A,le,dt){return Ip.indexOf(A)!==-1?this.layer.on(A,le):h.prototype.on.call(this,A,le,dt),this},x.prototype.once=function(A,le){return Ip.indexOf(A)!==-1?this.layer.once(A,le):h.prototype.once.call(this,A,le),this},x.prototype.off=function(A,le){return Ip.indexOf(A)!==-1?this.layer.off(A,le):h.prototype.off.call(this,A,le),this},x.LayerType=g0,x.DefaultOptions={},x}($t);function Rp(h,x){return function(){for(var A=[],le=0;le<arguments.length;le++)A[le]=arguments[le];var dt={};return h.forEach(function(Yt,xr){dt[Yt]=A[xr]}),delete dt.undefined,x(dt)}}var Om=function(){function h(){}return h.shape=function(x,A){if(Nd(A))x.shape(A);else if(cl(A)){var le=[];x.shape(le.join("*"),Rp(le,A))}else if(Wu(A)){var dt=A.field?A.field:"";if(cl(A.value)){var le=sl(dt)?dt:dt.split("*");x.shape(dt,Rp(le,A.value))}else x.shape(dt,A.value);Nd(dt)&&A.scale&&h.scale(x,dt,A.scale)}},h.size=function(x,A){if(ip(A))x.size(A);else if(sl(A))x.size(A);else if(cl(A)){var le=[];x.size(le.join("*"),Rp(le,A))}else if(Wu(A)){var dt=A.field?A.field:"";if(cl(A.value)){var le=sl(dt)?dt:dt.split("*");x.size(dt,Rp(le,A.value))}else x.size(dt,A.value);Nd(dt)&&A.scale&&h.scale(x,dt,A.scale)}},h.color=function(x,A){if(Nd(A))x.color(A);else if(cl(A)){var le=[];x.color(le.join("*"),Rp(le,A))}else if(Wu(A)){var dt=A.field?A.field:"";if(cl(A.value)){var le=sl(dt)?dt:dt.split("*");x.color(dt,Rp(le,A.value))}else x.color(dt,A.value);Nd(dt)&&A.scale&&h.scale(x,dt,A.scale)}},h.scale=function(x,A,le){x.scale(A,le)},h.rotate=function(x,A){Nd(A)||cl(A)||Wu(A)},h.texture=function(x,A){Nd(A)&&x.texture(A)},h.animate=function(x,A){(gv(A)||Wu(A))&&x.animate(A)},h.filter=function(x,A){var le=A.field?A.field:"",dt=sl(le)?le:le.split("*");x.filter(dt.join("*"),Rp(dt,A.value))},h.style=function(x,A){A&&x.style(A)},h.state=function(x,A){var le=A.active,dt=A.select;le&&x.active(le),dt&&x.select(dt)},h}(),Zd=function(h){(0,iu.ZT)(x,h);function x(A){var le=h.call(this)||this;le.isComposite=!1;var dt=A.id,Yt=A.name,xr=A.source,Tr=A.interaction,Jr=Tr===void 0?!1:Tr;return le.id=dt||Cv("core-layer"),le.name=Yt||le.id,le.interaction=Jr,le.options=v0(le.getDefaultOptions(),A),le.lastOptions=le.options,le.layer=le.createLayer(),le.adaptorLayerAttr(!1),le.setSource(xr),le.emit($p.CREATED,le),le}return Object.defineProperty(x.prototype,"inited",{get:function(){return this.layer.inited},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"source",{get:function(){return this.layer.getSource()},enumerable:!1,configurable:!0}),x.prototype.getDefaultOptions=function(){return x.DefaultOptions},x.prototype.getLayerConfig=function(){var A=W0(this.options,["source","shape","color","size","scale","texture","style","animate","state"]);return A},x.prototype.adaptorAttrOptions=function(A){return A},x.prototype.adaptorLayerAttr=function(A){A===void 0&&(A=!0);for(var le=["shape","color","size","scale","texture","style","animate","state"],dt=this.adaptorAttrOptions(this.options),Yt=this.adaptorAttrOptions(this.lastOptions),xr=0;xr<le.length;xr++){var Tr=le[xr],Jr=dt[Tr],Zn=Yt[Tr];!Ol(Jr)&&(!A||!Ap(Jr,Zn))&&Om[Tr](this.layer,Jr)}},x.prototype.setSource=function(A){if(A instanceof v.Source)this.layer.setSource(A);else{var le=A.data,dt=(0,iu._T)(A,["data"]),Yt=this.layer.getSource();Yt?this.layer.setData(le,dt):this.layer.source(le,dt)}},x.prototype.getSource=function(){return this.source},x.prototype.addTo=function(A){var le=this;this.scene=A,this.layer.once($p.INITED,function(){le.emit($p.INITED,le)}),this.layer.once($p.ADD,function(){le.emit($p.ADD,le)}),A.addLayer(this.layer)},x.prototype.remove=function(){this.scene&&(this.scene.removeLayer(this.layer),this.emit($p.REMOVE))},x.prototype.update=function(A,le){var dt,Yt;le===void 0&&(le=!0),this.updateOption(A),this.updateConfig(A),le&&((dt=this.scene)===null||dt===void 0||dt.setEnableRender(!1)),(Ol(this.options.visible)||this.options.visible)&&this.adaptorLayerAttr(),A.source&&m0(A.source,this.lastOptions.source)&&this.changeData(A.source),le&&((Yt=this.scene)===null||Yt===void 0||Yt.setEnableRender(!0),this.render())},x.prototype.updateOption=function(A){this.lastOptions=this.options,this.options=v0(this.options,A)},x.prototype.updateConfig=function(A){!Ol(A.zIndex)&&!Ap(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(A.zIndex),!Ol(A.blend)&&!Ap(this.lastOptions.blend,this.options.blend)&&this.setBlend(A.blend),!Ol(A.minZoom)&&!Ap(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(A.minZoom),!Ol(A.maxZoom)&&!Ap(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMaxZoom(A.maxZoom),!Ol(A.visible)&&!Ap(this.lastOptions.visible,this.options.visible)&&(A.visible?this.show():this.hide())},x.prototype.render=function(){this.scene&&this.scene.render()},x.prototype.changeData=function(A){this.setSource(A)},x.prototype.setIndex=function(A){this.layer.setIndex(A)},x.prototype.setBlend=function(A){this.layer.setBlend(A)},x.prototype.setMinZoom=function(A){this.layer.setMinZoom(A)},x.prototype.setMaxZoom=function(A){this.layer.setMaxZoom(A)},x.prototype.show=function(){this.layer.inited&&this.layer.show()},x.prototype.hide=function(){this.layer.inited&&this.layer.hide()},x.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},x.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():Ol(this.options.visible)?!0:this.options.visible},x.prototype.boxSelect=function(A,le){this.layer.boxSelect(A,le)},x.prototype.fitBounds=function(A){this.layer.fitBounds(A)},x.prototype.getLegend=function(A){return this.layer.getLegend(A)},x.prototype.getLegendItems=function(A){return this.layer.getLegendItems(A)},x.prototype.on=function(A,le,dt){return Ip.indexOf(A)!==-1?this.layer.on(A,le):h.prototype.on.call(this,A,le,dt),this},x.prototype.once=function(A,le){return Ip.indexOf(A)!==-1?this.layer.once(A,le):h.prototype.once.call(this,A,le),this},x.prototype.off=function(A,le){return Ip.indexOf(A)!==-1?this.layer.off(A,le):h.prototype.off.call(this,A,le),this},x.prototype.destroy=function(){this.layer.destroy()},x.DefaultOptions={},x}($t),Gv=function(h){(0,iu.ZT)(x,h);function x(){var A=h!==null&&h.apply(this,arguments)||this;return A.type="lineLayer",A}return x.prototype.createLayer=function(){var A=this.getLayerConfig(),le=new v.LineLayer(A);return le},x}(Zd),Wv=function(h){(0,iu.ZT)(x,h);function x(){var A=h!==null&&h.apply(this,arguments)||this;return A.type="polygonLayer",A}return x.prototype.createLayer=function(){var A=this.getLayerConfig(),le=new v.PolygonLayer(A);return le},x}(Zd),X0=function(h){(0,iu.ZT)(x,h);function x(){var A=h!==null&&h.apply(this,arguments)||this;return A.type="textLayer",A}return x.prototype.createLayer=function(){var A=this.getLayerConfig(),le=new v.PointLayer(A);return le},x.prototype.adaptorAttrOptions=function(A){var le=this.options,dt=le.field,Yt=le.style,xr=Yt===void 0?{}:Yt,Tr=xr||{},Jr=Tr.fill,Zn=Tr.fontSize,li={field:dt,value:"text"};return(0,iu.pi)({shape:li,color:Jr,size:Zn},A)},x}(Zd),yg={data:[],parser:{type:"json",x:"x",y:"y"}},Yp={data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}},Qp="#2f54eb",hd={active:{fillColor:!1,strokeColor:Qp,lineWidth:1,lineOpacity:1},select:{fillColor:!1,strokeColor:Qp,lineWidth:1,lineOpacity:1}},K0={visible:!0,source:Yp,lineWidth:1,state:{active:!1,select:!1},enabledMultiSelect:!1,triggerMultiSelectKey:"Shift"},Tv=function(h){return Ol(h)||(h.active===!1?hd.active=Object.assign(hd.active,{fill:!1,stroke:!1}):typeof h.active=="object"&&(h.active.fillColor===!1?hd.active.fillColor=!1:typeof h.active.fillColor=="string"&&(hd.active.fillColor=h.active.fillColor),h.active.strokeColor===!1?hd.active.strokeColor=!1:typeof h.active.strokeColor=="string"&&(hd.active.strokeColor=h.active.strokeColor),typeof h.active.lineWidth=="number"&&(hd.active.lineWidth=h.active.lineWidth),typeof h.active.lineOpacity=="number"&&(hd.active.lineOpacity=h.active.lineOpacity)),h.select===!1?hd.select=Object.assign(hd.select,{fill:!1,stroke:!1}):typeof h.select=="object"&&(h.select.fillColor===!1?hd.select.fillColor=!1:typeof h.select.fillColor=="string"&&(hd.select.fillColor=h.select.fillColor),h.select.strokeColor===!1?hd.select.strokeColor=!1:typeof h.select.strokeColor=="string"&&(hd.select.strokeColor=h.select.strokeColor),typeof h.select.lineWidth=="number"&&(hd.select.lineWidth=h.select.lineWidth),typeof h.select.lineOpacity=="number"&&(hd.select.lineOpacity=h.select.lineOpacity))),hd},jp={};window.addEventListener("keydown",function(h){h.isComposing||h.keyCode===229||(jp[h.key]=!0)}),window.addEventListener("keyup",function(h){jp[h.key]=!1});var _g=function(h){return!!jp[h]},xg=function(h,x){var A=h&&(x?_g(x):!0);return A},Im=function(h){var x=h.visible,A=h.minZoom,le=h.maxZoom,dt=h.zIndex,Yt=dt===void 0?0:dt,xr=h.label,Tr=x&&Boolean(xr)&&(Ol(xr==null?void 0:xr.visible)||(xr==null?void 0:xr.visible)),Jr=(0,iu.pi)((0,iu.pi)({zIndex:Yt+.1,minZoom:A,maxZoom:le},xr),{visible:Tr});return Jr},Rm=function(h){return!(Ol(h)||gv(h)||Ol(h.coordinates)&&(Ol(h.x)||Ol(h.y))&&Ol(h.geometry))},Y0=function(h,x){var A=x==null?void 0:x.position;if(!Rm(A))return h;var le=h.parser.type,dt=h.transforms,Yt=h.originData,xr={data:Yt,transforms:dt};if(A.coordinates){var Tr=A.coordinates;xr.parser={type:le,coordinates:Tr}}else if(A.x&&A.y){var Jr=A.x,Zn=A.y;xr.parser={type:le,x:Jr,y:Zn}}else if(A.geometry){var li=A.geometry;xr.parser={type:le,geometry:li}}return xr},Lm=function(h,x){return(0,iu.pi)((0,iu.pi)({},Im(h)),{source:Y0(x,h.label)})},_0=function(h){(0,iu.ZT)(x,h);function x(A){var le=h.call(this,A)||this;return le.type=Id.LayerType.ChoroplethLayer,le.selectData=[],le.layerState=hd,le.onHighlighHandle=function(dt){var Yt=dt.feature,xr=dt.featureId;le.setHighlightLayerSource(Yt,xr)},le.onUnhighlighHandle=function(){le.setHighlightLayerSource()},le.onSelectHandle=function(dt){var Yt=dt.feature,xr=dt.featureId;le.handleSelectData(xr,Yt)},le.initSubLayersEvent(),le}return Object.defineProperty(x.prototype,"layer",{get:function(){return this.fillLayer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"fillLayer",{get:function(){return this.subLayers.getLayer("fillLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"strokeLayer",{get:function(){return this.subLayers.getLayer("strokeLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"highlightStrokeLayer",{get:function(){return this.subLayers.getLayer("highlightStrokeLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"selectFillLayer",{get:function(){return this.subLayers.getLayer("selectFillLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"selectStrokeLayer",{get:function(){return this.subLayers.getLayer("selectStrokeLayer")},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"labelLayer",{get:function(){return this.subLayers.getLayer("labelLayer")},enumerable:!1,configurable:!0}),x.prototype.getDefaultOptions=function(){return x.DefaultOptions},x.prototype.createSubLayers=function(){var A=this.source;this.layerState=Tv(this.options.state);var le=new Wv((0,iu.pi)((0,iu.pi)({},this.getFillLayerOptions()),{id:"fillLayer",shape:"fill",source:A,interaction:!0})),dt=new Gv((0,iu.pi)((0,iu.pi)({},this.getStrokeLayerOptions()),{id:"strokeLayer",shape:"line",source:A})),Yt=new Gv((0,iu.pi)((0,iu.pi)({},this.getHighlightStrokeLayerOptions()),{id:"highlightStrokeLayer"})),xr=new Wv((0,iu.pi)((0,iu.pi)({},this.getSelectFillLayerOptions()),{id:"selectFillLayer"})),Tr=new Gv((0,iu.pi)((0,iu.pi)({},this.getSelectStrokeLayerOptions()),{id:"selectStrokeLayer"})),Jr=new X0((0,iu.pi)((0,iu.pi)({},Lm(this.options,A)),{id:"labelLayer"})),Zn=[le,dt,Yt,xr,Tr,Jr];return Zn},x.prototype.getFillLayerOptions=function(){var A=W0(this.options,["source"]),le=A.visible,dt=A.minZoom,Yt=A.maxZoom,xr=A.zIndex,Tr=xr===void 0?0:xr,Jr=A.fillColor,Zn=A.opacity,li=(0,iu._T)(A,["visible","minZoom","maxZoom","zIndex","fillColor","opacity"]),da=this.layerState,ro={active:da.active.fillColor===!1?!1:{color:da.active.fillColor},select:!1},Xo={opacity:Zn},Fo=(0,iu.pi)((0,iu.pi)({},li),{visible:le,minZoom:dt,maxZoom:Yt,zIndex:Tr,color:Jr,state:ro,style:Xo});return Fo},x.prototype.getStrokeLayerOptions=function(){var A=this.options,le=A.visible,dt=A.minZoom,Yt=A.maxZoom,xr=A.zIndex,Tr=xr===void 0?0:xr,Jr=A.opacity,Zn=A.strokeColor,li=A.lineWidth,da=A.lineOpacity,ro=A.lineDash,Xo=A.lineType,Fo={opacity:Ol(da)?Jr:da,dashArray:ro,lineType:Xo},ho={visible:le&&Boolean(li)&&Boolean(Zn),zIndex:Tr,minZoom:dt,maxZoom:Yt,size:li,color:Zn,style:Fo};return ho},x.prototype.getHighlightStrokeLayerOptions=function(){var A=this.options,le=A.visible,dt=A.minZoom,Yt=A.maxZoom,xr=A.zIndex,Tr=xr===void 0?0:xr,Jr=A.lineWidth,Zn=this.layerState,li=Zn.active.strokeColor||void 0,da=Zn.active.lineWidth||Jr,ro={visible:le&&Boolean(li),zIndex:Tr+.1,minZoom:dt,maxZoom:Yt,source:Yp,size:da,color:li,style:{opacity:Zn.active.lineOpacity}};return ro},x.prototype.getSelectFillLayerOptions=function(){var A=this.options,le=A.visible,dt=A.minZoom,Yt=A.maxZoom,xr=A.zIndex,Tr=xr===void 0?0:xr,Jr=A.opacity,Zn=this.layerState,li=Zn.select.fillColor||void 0,da={opacity:Jr},ro={visible:le&&Boolean(li),zIndex:Tr+.1,minZoom:dt,maxZoom:Yt,source:Yp,color:li,style:da,state:{select:!1,active:!1}};return ro},x.prototype.getSelectStrokeLayerOptions=function(){var A=this.options,le=A.visible,dt=A.minZoom,Yt=A.maxZoom,xr=A.zIndex,Tr=xr===void 0?0:xr,Jr=A.lineWidth,Zn=this.layerState,li=Zn.select.strokeColor||void 0,da=Zn.select.lineWidth||Jr,ro={visible:le&&Boolean(li),zIndex:Tr+.1,minZoom:dt,maxZoom:Yt,source:Yp,size:da,color:li,style:{opacity:Zn.select.lineOpacity}};return ro},x.prototype.setSubLayersSource=function(A){var le;if(this.isSourceInstance(A))this.source=A,this.fillLayer.setSource(A),this.strokeLayer.setSource(A),this.labelLayer.setSource(A);else{var dt=A.data,Yt=(0,iu._T)(A,["data"]);if(this.source.setData(dt,Yt),Rm((le=this.options.label)===null||le===void 0?void 0:le.position)){var xr=Y0(this.source,this.options.label);this.labelLayer.changeData(xr)}}this.highlightStrokeLayer.changeData(Yp),this.selectFillLayer.changeData(Yp),this.selectStrokeLayer.changeData(Yp)},x.prototype.setHighlightLayerSource=function(A,le){if(le===void 0&&(le=-999),this.highlightData!==le){var dt=A?[A]:[],Yt=this.source.parser,xr=Yt.type==="geojson"?{type:"FeatureCollection",features:dt}:dt;this.highlightStrokeLayer.changeData({data:xr,parser:Yt}),this.highlightData=le}},x.prototype.setSelectLayerSource=function(A){if(A===void 0&&(A=[]),!(this.selectData.length===A.length&&Ap(this.selectData.map(function(xr){var Tr=xr.featureId;return Tr}),A.map(function(xr){var Tr=xr.featureId;return Tr})))){var le=A.map(function(xr){var Tr=xr.feature;return Tr}),dt=this.source.parser,Yt=dt.type==="geojson"?{type:"FeatureCollection",features:le}:le;this.selectFillLayer.changeData({data:Yt,parser:dt}),this.selectStrokeLayer.changeData({data:Yt,parser:dt}),this.selectData=A}},x.prototype.initSubLayersEvent=function(){this.fillLayer.off("mousemove",this.onHighlighHandle),this.fillLayer.off("mouseout",this.onHighlighHandle),this.fillLayer.off("click",this.onSelectHandle),this.selectData=[],this.highlightData=null,this.options.state&&(this.options.state.active&&(this.fillLayer.on("mousemove",this.onHighlighHandle),this.fillLayer.on("mouseout",this.onUnhighlighHandle)),this.options.state.select&&this.fillLayer.on("click",this.onSelectHandle))},x.prototype.handleSelectData=function(A,le,dt){var Yt=this.options,xr=Yt.enabledMultiSelect,Tr=Yt.triggerMultiSelectKey,Jr=xg(xr,Tr)||dt,Zn=Vv(this.selectData),li=Zn.findIndex(function(ro){return ro.featureId===A});if(li===-1)Jr?Zn.push({feature:le,featureId:A}):Zn=[{feature:le,featureId:A}],this.emit("select",le,Vv(Zn));else{var da=Zn[li];Jr?Zn.splice(li,1):Zn=[],this.emit("unselect",da,Vv(Zn))}this.setSelectLayerSource(Zn)},x.prototype.update=function(A){h.prototype.update.call(this,A),this.initSubLayersEvent()},x.prototype.updateOption=function(A){h.prototype.updateOption.call(this,A),this.layerState=Tv(this.options.state)},x.prototype.updateSubLayers=function(A){this.fillLayer.update(this.getFillLayerOptions(),!1),this.strokeLayer.update(this.getStrokeLayerOptions(),!1),this.highlightStrokeLayer.update(this.getHighlightStrokeLayerOptions(),!1),this.selectFillLayer.update(this.getSelectFillLayerOptions(),!1),this.selectStrokeLayer.update(this.getSelectStrokeLayerOptions(),!1),this.labelLayer.update(Lm(this.options,this.source),!1),this.options.visible&&(!Ol(A.state)&&!Ap(this.lastOptions.state,this.options.state)&&this.updateHighlightSubLayers(),this.layerState.active.strokeColor&&this.setHighlightLayerSource(),(this.layerState.select.fillColor||this.layerState.select.strokeColor)&&this.setSelectLayerSource())},x.prototype.updateHighlightSubLayers=function(){var A=this.layerState,le=Tv(this.lastOptions.state);le.active.strokeColor!==A.active.strokeColor&&(A.active.strokeColor?this.highlightStrokeLayer.show():this.highlightStrokeLayer.hide()),le.select.fillColor!==A.select.fillColor&&(A.select.fillColor?this.selectFillLayer.show():this.selectFillLayer.hide()),le.select.strokeColor!==A.select.strokeColor&&(A.select.strokeColor?this.selectStrokeLayer.show():this.selectStrokeLayer.hide())},x.prototype.setIndex=function(A){this.fillLayer.setIndex(A),this.strokeLayer.setIndex(A),this.highlightStrokeLayer.setIndex(A+.1),this.selectFillLayer.setIndex(A+.1),this.selectStrokeLayer.setIndex(A+.1),this.labelLayer.setIndex(A+.1)},x.prototype.setActive=function(A,le){var dt=this.fillLayer.source,Yt=dt.getFeatureId(A,le);if(Ol(Yt)){console.warn("Feature non-existent by field: ".concat(A,",value: ").concat(le));return}if(this.layerState.active.fillColor&&this.fillLayer.layer.setActive(Yt),this.layerState.active.strokeColor){var xr=dt.getFeatureById(Yt);this.setHighlightLayerSource(xr,Yt)}},x.prototype.setSelect=function(A,le){var dt=this.fillLayer.source,Yt=dt.getFeatureId(A,le);if(Ol(Yt)){console.warn("Feature non-existent by field: ".concat(A,",value: ").concat(le));return}if(!(this.layerState.select.strokeColor===!1&&this.layerState.select.fillColor===!1)){var xr=dt.getFeatureById(Yt);this.handleSelectData(Yt,xr,!0)}},x.prototype.boxSelect=function(A,le){this.fillLayer.boxSelect(A,le)},x.DefaultOptions=K0,x}(Id),x0=Object.assign(es,{onSelect:"select",onUnselect:"unselect"}),Dm=(0,C.memo)((0,C.forwardRef)(function(x,A){var le=pu(_0,x);return $u(le.current,x,x0),(0,C.useImperativeHandle)(A,function(){return le.current}),null})),bg=null,Eg=null,Jp=m(73935),b0=function(x){var A=x.className,le=x.style,dt=x.children,Yt=x.position,xr=x.name,Tr=(0,C.useRef)(document.createElement("div")),Jr=ni(le),Zn=(0,C.useCallback)(function(){return Tr.current},[]),li=(0,C.useMemo)(function(){return{position:Yt,name:xr,className:A,style:Jr}},[Yt,xr,A,Jr]);return th(Zn,void 0,li),(0,Jp.createPortal)(dt,Tr.current)};b0.defaultProps={position:"topleft"};function Q0(h){return wg(h)||Cg(h)||Sg(h)||km()}function km(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sg(h,x){if(h){if(typeof h=="string")return J0(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return J0(h,x)}}function Cg(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function wg(h){if(Array.isArray(h))return J0(h)}function J0(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}var Mv=function(x,A){var le=(0,C.useMemo)(function(){return Object.keys(A)},[A]);(0,C.useEffect)(function(){return x&&le.forEach(function(dt){var Yt=A[dt];Yt&&x.on(dt,Yt)}),function(){x&&le.forEach(function(dt){var Yt=A[dt];Yt&&x.off(dt,Yt)})}},[x].concat(Q0(Object.values(A)))),qr(function(){x&&le.forEach(function(dt){var Yt=A[dt];Yt&&x.off(dt,Yt)})})},q0=function(x,A){var le=(0,C.useRef)(!0),dt=(0,C.useMemo)(function(){return Object.keys(A)},[A]);Kn(function(Yt){if(le.current){le.current=!1;return}var xr={};Yt.forEach(function(Tr){var Jr=dt[Tr];xr[Jr]=A[Jr]}),x==null||x.setOptions(xr)},Object.values(A))},Ag=function(x){var A=(0,C.useRef)(document.createElement("span"));return{portal:x?(0,Jp.createPortal)(x,A.current):null,dom:x?A.current:void 0}};function Fm(h,x){return Mg(h)||Tg(h,x)||Nm(h,x)||Bm()}function Bm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nm(h,x){if(h){if(typeof h=="string")return zm(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return zm(h,x)}}function zm(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Tg(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Mg(h){if(Array.isArray(h))return h}var yy=function(x){var A=x.onExport,le=x.onShow,dt=x.onHide,Yt=x.onAdd,xr=x.onRemove,Tr=x.imageType,Jr=x.btnIcon,Zn=x.btnText,li=x.title,da=x.vertical,ro=x.position,Xo=x.className,Fo=x.style,ho=useScene(),ns=useState(),vs=Fm(ns,2),us=vs[0],Eu=vs[1],Nu=useMemo(function(){return getStyleText(Fo)},[Fo]),ul=useL7ComponentPortal(Jr),sf=ul.portal,Fu=ul.dom,il=useMemo(function(){return{btnText:Zn,title:li,vertical:da,position:ro,className:Xo,imageType:Tr,style:Nu,btnIcon:Fu,onExport:A}},[Zn,li,da,ro,Xo,Nu,Tr,A,Fu]);return useMount(function(){var Su=new L7ExportImage(omitBy(il,function(zu){return zu===void 0}));Eu(Su),ho.addControl(Su)}),useUnmount(function(){us&&(ho.removeControl(us),Eu(void 0))}),useL7ComponentUpdate(us,il),useL7ComponentEvent(us,{add:Yt,remove:xr,show:le,hide:dt}),React.createElement(React.Fragment,null,sf)};function _(h,x){return nn(h)||wr(h,x)||Se(h,x)||N()}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(h,x){if(h){if(typeof h=="string")return Bt(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Bt(h,x)}}function Bt(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function wr(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function nn(h){if(Array.isArray(h))return h}var Wn=function(x){var A=x.onShow,le=x.onHide,dt=x.onAdd,Yt=x.onRemove,xr=x.onFullscreenChange,Tr=x.btnIcon,Jr=x.btnText,Zn=x.title,li=x.vertical,da=x.exitBtnIcon,ro=x.exitBtnText,Xo=x.exitTitle,Fo=x.position,ho=x.className,ns=x.style,vs=useScene(),us=useState(),Eu=_(us,2),Nu=Eu[0],ul=Eu[1],sf=useMemo(function(){return getStyleText(ns)},[ns]),Fu=useL7ComponentPortal(Tr),il=Fu.portal,Su=Fu.dom,zu=useL7ComponentPortal(da),uc=zu.portal,Ui=zu.dom,yi=useMemo(function(){return{btnText:Jr,title:Zn,vertical:li,exitBtnText:ro,exitTitle:Xo,position:Fo,className:ho,style:sf,btnIcon:Su,exitBtnIcon:Ui}},[Jr,Zn,li,ro,Xo,Fo,ho,sf,Su,Ui]);return useMount(function(){var Pi=new L7Fullscreen(omitBy(yi,function(Wa){return Wa===void 0}));ul(Pi),vs.addControl(Pi)}),useUnmount(function(){Nu&&(vs.removeControl(Nu),ul(void 0))}),useL7ComponentUpdate(Nu,yi),useL7ComponentEvent(Nu,{add:dt,remove:Yt,show:A,hide:le,fullscreenChange:xr}),React.createElement(React.Fragment,null,il,uc)};function fi(h,x){return Ms(h)||So(h,x)||Xa(h,x)||Ri()}function Ri(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xa(h,x){if(h){if(typeof h=="string")return Ka(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Ka(h,x)}}function Ka(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function So(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Ms(h){if(Array.isArray(h))return h}var bu=function(x){var A=x.transform,le=x.onShow,dt=x.onHide,Yt=x.onAdd,xr=x.onRemove,Tr=x.btnIcon,Jr=x.btnText,Zn=x.title,li=x.vertical,da=x.position,ro=x.className,Xo=x.style,Fo=useScene(),ho=useState(),ns=fi(ho,2),vs=ns[0],us=ns[1],Eu=useMemo(function(){return getStyleText(Xo)},[Xo]),Nu=useL7ComponentPortal(Tr),ul=Nu.portal,sf=Nu.dom,Fu=useMemo(function(){return{btnText:Jr,title:Zn,vertical:li,position:da,className:ro,style:Eu,transform:A,btnIcon:sf}},[Jr,Zn,li,da,ro,Eu,A,sf]);return useMount(function(){var il=new L7GeoLocate(omitBy(Fu,function(Su){return Su===void 0}));us(il),Fo.addControl(il)}),useUnmount(function(){vs&&(Fo.removeControl(vs),us(void 0))}),useL7ComponentUpdate(vs,Fu),useL7ComponentEvent(vs,{add:Yt,remove:xr,show:le,hide:dt}),React.createElement(React.Fragment,null,ul)};function ju(h,x){return fh(h)||sc(h,x)||Hu(h,x)||zl()}function zl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hu(h,x){if(h){if(typeof h=="string")return jl(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return jl(h,x)}}function jl(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function sc(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function fh(h){if(Array.isArray(h))return h}var Ud=function(x){var A=x.layers,le=x.popperPlacement,dt=x.popperTrigger,Yt=x.popperClassName,xr=x.btnIcon,Tr=x.btnText,Jr=x.title,Zn=x.vertical,li=x.position,da=x.className,ro=x.style,Xo=x.onAdd,Fo=x.onRemove,ho=x.onShow,ns=x.onHide,vs=x.onPopperShow,us=x.onPopperHide,Eu=x.onSelectChange,Nu=useScene(),ul=useLayerList(),sf=useState(),Fu=ju(sf,2),il=Fu[0],Su=Fu[1],zu=useMemo(function(){return getStyleText(ro)},[ro]),uc=useL7ComponentPortal(xr),Ui=uc.portal,yi=uc.dom,Pi=useMemo(function(){return A!=null&&A.length?A.map(function(Do){return typeof Do=="string"?ul.find(function(Mo){return Mo.id===Do}):Do}).filter(function(Do){return!!Do}):ul},[A,ul]),Wa=useMemo(function(){return{layers:Pi,popperPlacement:le,popperTrigger:dt,popperClassName:Yt,btnText:Tr,title:Jr,vertical:Zn,position:li,className:da,style:zu,btnIcon:yi}},[Pi,le,dt,Yt,Tr,Jr,Zn,li,da,zu,yi]);return useMount(function(){var Do=new L7LayerSwitch(omitBy(Wa,function(Mo){return Mo===void 0}));Su(Do),Nu.addControl(Do)}),useUnmount(function(){il&&(Nu.removeControl(il),Su(void 0))}),useL7ComponentUpdate(il,Wa),useL7ComponentEvent(il,{add:Xo,remove:Fo,show:ho,hide:ns,popperShow:vs,popperHide:us,selectChange:Eu}),React.createElement(React.Fragment,null,Ui)},dd=h=>{nr&&(oa(h)||console.error(`useMount: parameter \`fn\` expected to be a function, but got "${typeof h}".`)),(0,C.useEffect)(()=>{h==null||h()},[])},cp=1,Lp=2;function Pg(h,x,A,le){var dt=A.length,Yt=dt,xr=!le;if(h==null)return!Yt;for(h=Object(h);dt--;){var Tr=A[dt];if(xr&&Tr[2]?Tr[1]!==h[Tr[0]]:!(Tr[0]in h))return!1}for(;++dt<Yt;){Tr=A[dt];var Jr=Tr[0],Zn=h[Jr],li=Tr[1];if(xr&&Tr[2]){if(Zn===void 0&&!(Jr in h))return!1}else{var da=new Xf;if(le)var ro=le(Zn,li,Jr,h,x,da);if(!(ro===void 0?Vd(li,Zn,cp|Lp,le,da):ro))return!1}}return!0}var Zm=Pg;function em(h){return h===h&&!Tl(h)}var Og=em;function _y(h){for(var x=zo(h),A=x.length;A--;){var le=x[A],dt=h[le];x[A]=[le,dt,Og(dt)]}return x}var xy=_y;function Xv(h,x){return function(A){return A==null?!1:A[h]===x&&(x!==void 0||h in Object(A))}}var Um=Xv;function $m(h){var x=xy(h);return x.length==1&&x[0][2]?Um(x[0][0],x[0][1]):function(A){return A===h||Zm(A,h,x)}}var P_=$m,O_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E0=/^\w*$/;function I_(h,x){if(br(h))return!1;var A=typeof h;return A=="number"||A=="symbol"||A=="boolean"||h==null||_r(h)?!0:E0.test(h)||!O_.test(h)||x!=null&&h in Object(x)}var Ig=I_,o2="Expected a function";function by(h,x){if(typeof h!="function"||x!=null&&typeof x!="function")throw new TypeError(o2);var A=function(){var le=arguments,dt=x?x.apply(this,le):le[0],Yt=A.cache;if(Yt.has(dt))return Yt.get(dt);var xr=h.apply(this,le);return A.cache=Yt.set(dt,xr)||Yt,xr};return A.cache=new(by.Cache||zc),A}by.Cache=zc;var s2=by,u2=500;function l2(h){var x=s2(h,function(le){return A.size===u2&&A.clear(),le}),A=x.cache;return x}var c2=l2,f2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ey=/\\(\\)?/g,Rg=c2(function(h){var x=[];return h.charCodeAt(0)===46&&x.push(""),h.replace(f2,function(A,le,dt,Yt){x.push(dt?Yt.replace(Ey,"$1"):le||A)}),x}),h2=Rg;function Sy(h,x){return br(h)?h:Ig(h,x)?[h]:h2(Xe(h))}var S0=Sy,d2=1/0;function Cy(h){if(typeof h=="string"||_r(h))return h;var x=h+"";return x=="0"&&1/h==-d2?"-0":x}var C0=Cy;function p2(h,x){x=S0(x,h);for(var A=0,le=x.length;h!=null&&A<le;)h=h[C0(x[A++])];return A&&A==le?h:void 0}var tm=p2;function R_(h,x,A){var le=h==null?void 0:tm(h,x);return le===void 0?A:le}var v2=R_;function jm(h,x){return h!=null&&x in Object(h)}var L_=jm;function m2(h,x,A){x=S0(x,h);for(var le=-1,dt=x.length,Yt=!1;++le<dt;){var xr=C0(x[le]);if(!(Yt=h!=null&&A(h,xr)))break;h=h[xr]}return Yt||++le!=dt?Yt:(dt=h==null?0:h.length,!!dt&&Rf(dt)&&Nf(xr,dt)&&(br(h)||Ch(h)))}var Kv=m2;function wy(h,x){return h!=null&&Kv(h,x,L_)}var Hm=wy,D_=1,k_=2;function w0(h,x){return Ig(h)&&Og(x)?Um(C0(h),x):function(A){var le=v2(A,h);return le===void 0&&le===x?Hm(A,h):Vd(x,le,D_|k_)}}var F_=w0;function B_(h){return h}var Ay=B_;function g2(h){return function(x){return x==null?void 0:x[h]}}var y2=g2;function _2(h){return function(x){return tm(x,h)}}var x2=_2;function b2(h){return Ig(h)?y2(C0(h)):x2(h)}var E2=b2;function Ty(h){return typeof h=="function"?h:h==null?Ay:typeof h=="object"?br(h)?F_(h[0],h[1]):P_(h):E2(h)}var Lg=Ty,S2="Expected a function";function Dg(h){if(typeof h!="function")throw new TypeError(S2);return function(){var x=arguments;switch(x.length){case 0:return!h.call(this);case 1:return!h.call(this,x[0]);case 2:return!h.call(this,x[0],x[1]);case 3:return!h.call(this,x[0],x[1],x[2])}return!h.apply(this,x)}}var rm=Dg;function C2(h,x,A,le){if(!Tl(h))return h;x=S0(x,h);for(var dt=-1,Yt=x.length,xr=Yt-1,Tr=h;Tr!=null&&++dt<Yt;){var Jr=C0(x[dt]),Zn=A;if(Jr==="__proto__"||Jr==="constructor"||Jr==="prototype")return h;if(dt!=xr){var li=Tr[Jr];Zn=le?le(li,Jr,Tr):void 0,Zn===void 0&&(Zn=Tl(li)?li:Nf(x[dt+1])?[]:{})}Za(Tr,Jr,Zn),Tr=Tr[Jr]}return h}var kg=C2;function Fg(h,x,A){for(var le=-1,dt=x.length,Yt={};++le<dt;){var xr=x[le],Tr=tm(h,xr);A(Tr,xr)&&kg(Yt,S0(xr,h),Tr)}return Yt}var nm=Fg;function N_(h,x){if(h==null)return{};var A=Qr(rf(h),function(le){return[le]});return x=Lg(x),nm(h,A,function(le,dt){return x(le,dt[0])})}var My=N_;function $d(h,x){return My(h,rm(Lg(x)))}var Py=$d;function z_(h,x){return U_(h)||im(h,x)||Z_(h,x)||Lf()}function Lf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z_(h,x){if(h){if(typeof h=="string")return A0(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return A0(h,x)}}function A0(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function im(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function U_(h){if(Array.isArray(h))return h}var $_=function(x){var A=x.popperPlacement,le=x.btnText,dt=x.title,Yt=x.vertical,xr=x.position,Tr=x.className,Jr=x.options,Zn=x.popperTrigger,li=x.popperClassName,da=x.btnIcon,ro=x.style,Xo=x.onAdd,Fo=x.onRemove,ho=x.onShow,ns=x.onHide,vs=x.onPopperShow,us=x.onPopperHide,Eu=x.onSelectChange,Nu=Us(),ul=(0,C.useState)(),sf=z_(ul,2),Fu=sf[0],il=sf[1],Su=(0,C.useMemo)(function(){return ni(ro)},[ro]),zu=Ag(da),uc=zu.portal,Ui=zu.dom,yi=(0,C.useMemo)(function(){return{popperPlacement:A,popperTrigger:Zn,popperClassName:li,btnText:le,title:dt,vertical:Yt,position:xr,className:Tr,options:Jr,style:Su,btnIcon:Ui}},[Jr,A,Zn,li,le,dt,Yt,xr,Tr,Su,Ui]);return dd(function(){var Pi=new v.MapTheme(Py(yi,function(Wa){return Wa===void 0}));il(Pi),Nu.addControl(Pi)}),qr(function(){Fu&&(Nu.removeControl(Fu),il(void 0))}),q0(Fu,yi),Mv(Fu,{add:Xo,remove:Fo,show:ho,hide:ns,popperShow:vs,popperHide:us,selectChange:Eu}),C.createElement(C.Fragment,null,uc)};function j_(h,x){return G_(h)||Oy(h,x)||V_(h,x)||H_()}function H_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_(h,x){if(h){if(typeof h=="string")return Bg(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Bg(h,x)}}function Bg(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Oy(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function G_(h){if(Array.isArray(h))return h}var w2=function(x){var A=x.position,le=x.className,dt=x.style,Yt=x.onLocationChange,xr=x.transform,Tr=x.onAdd,Jr=x.onRemove,Zn=x.onShow,li=x.onHide,da=useScene(),ro=useState(),Xo=j_(ro,2),Fo=Xo[0],ho=Xo[1],ns=useMemo(function(){return getStyleText(dt)},[dt]),vs=useMemo(function(){return{transform:xr,position:A,className:le,style:ns}},[xr,A,le,ns]);return useMount(function(){var us=new L7MouseLocation(omitBy(vs,function(Eu){return Eu===void 0}));ho(us),da.addControl(us)}),useUnmount(function(){Fo&&(da.removeControl(Fo),ho(void 0))}),useL7ComponentUpdate(Fo,vs),useL7ComponentEvent(Fo,{add:Tr,remove:Jr,show:Zn,hide:li,locationChange:Yt}),null};function W_(h,x){return Y_(h)||K_(h,x)||X_(h,x)||Iy()}function Iy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_(h,x){if(h){if(typeof h=="string")return Ng(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Ng(h,x)}}function Ng(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function K_(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Y_(h){if(Array.isArray(h))return h}var A2=function(x){var A=x.onShow,le=x.onHide,dt=x.onAdd,Yt=x.onRemove,xr=x.position,Tr=x.className,Jr=x.style,Zn=x.lockWidth,li=x.maxWidth,da=x.metric,ro=x.imperial,Xo=x.updateWhenIdle,Fo=useScene(),ho=useState(),ns=W_(ho,2),vs=ns[0],us=ns[1],Eu=useMemo(function(){return getStyleText(Jr)},[Jr]),Nu=useMemo(function(){return{position:xr,className:Tr,style:Eu,lockWidth:Zn,maxWidth:li,metric:da,imperial:ro,updateWhenIdle:Xo}},[xr,Tr,Eu,Zn,li,da,ro,Xo]);return useMount(function(){var ul=new L7Scale(omitBy(Nu,function(sf){return sf===void 0}));us(ul),Fo.addControl(ul)}),useUnmount(function(){vs&&(Fo.removeControl(vs),us(void 0))}),useL7ComponentUpdate(vs,Nu),useL7ComponentEvent(vs,{add:dt,remove:Yt,show:A,hide:le}),null};function Q_(h,x){return ex(h)||Ly(h,x)||q_(h,x)||J_()}function J_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q_(h,x){if(h){if(typeof h=="string")return Ry(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Ry(h,x)}}function Ry(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Ly(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function ex(h){if(Array.isArray(h))return h}var T2=function(x){var A=x.onShow,le=x.onHide,dt=x.onAdd,Yt=x.onRemove,xr=x.position,Tr=x.name,Jr=x.className,Zn=x.style,li=x.zoomInText,da=x.zoomOutText,ro=x.zoomInTitle,Xo=x.zoomOutTitle,Fo=useScene(),ho=useState(),ns=Q_(ho,2),vs=ns[0],us=ns[1],Eu=useMemo(function(){return getStyleText(Zn)},[Zn]),Nu=useL7ComponentPortal(li),ul=Nu.portal,sf=Nu.dom,Fu=useL7ComponentPortal(da),il=Fu.portal,Su=Fu.dom,zu=useMemo(function(){return{position:xr,name:Tr,className:Jr,zoomInTitle:ro,zoomOutTitle:Xo,style:Eu,zoomInText:sf,zoomOutText:Su}},[xr,Tr,Jr,Eu,ro,Xo,sf,Su]);return useMount(function(){var uc=new L7Zoom(omitBy(zu,function(Ui){return Ui===void 0}));us(uc),Fo.addControl(uc)}),useUnmount(function(){vs&&(Fo.removeControl(vs),us(void 0))}),useL7ComponentUpdate(vs,zu),useL7ComponentEvent(vs,{add:dt,remove:Yt,show:A,hide:le}),React.createElement(React.Fragment,null,ul,il)};function tx(h,x){return ix(h)||nx(h,x)||rx(h,x)||Dy()}function Dy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rx(h,x){if(h){if(typeof h=="string")return ky(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return ky(h,x)}}function ky(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function nx(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function ix(h){if(Array.isArray(h))return h}var M2=function(x){var A=x.img,le=x.href,dt=x.position,Yt=x.className,xr=x.style,Tr=x.onShow,Jr=x.onHide,Zn=x.onAdd,li=x.onRemove,da=useScene(),ro=useState(),Xo=tx(ro,2),Fo=Xo[0],ho=Xo[1],ns=useMemo(function(){return getStyleText(xr)},[xr]),vs=useMemo(function(){return{img:A,href:le,position:dt,className:Yt,style:ns}},[A,le,dt,Yt,ns]);return useMount(function(){var us=new L7Logo(omitBy(vs,function(Eu){return Eu===void 0}));ho(us),da.addControl(us)}),useUnmount(function(){Fo&&(da.removeControl(Fo),ho(void 0))}),useL7ComponentUpdate(Fo,vs),useL7ComponentEvent(Fo,{add:Zn,remove:li,show:Tr,hide:Jr}),null},P2=function(x){var A=x.title,le=x.className,dt=x.style;return React.createElement("h1",{className:classNames("".concat(CLS_PREFIX,"_decoration"),le),style:dt},A)};function T0(h){return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},T0(h)}function Fy(h,x){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(h);x&&(le=le.filter(function(dt){return Object.getOwnPropertyDescriptor(h,dt).enumerable})),A.push.apply(A,le)}return A}function By(h){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?Fy(Object(A),!0).forEach(function(le){ax(h,le,A[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):Fy(Object(A)).forEach(function(le){Object.defineProperty(h,le,Object.getOwnPropertyDescriptor(A,le))})}return h}function ax(h,x,A){return x=ox(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function ox(h){var x=sx(h,"string");return T0(x)==="symbol"?x:String(x)}function sx(h,x){if(T0(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(T0(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var ux=(0,C.memo)(function(x){var A=Us(),le=(0,C.useRef)({props:x});le.current.props=x;var dt=(0,C.useMemo)(function(){var Yt=!1;C.Children.forEach(x.children,function(Jr){Jr&&(Yt=!0)});var xr=By(By({},x),{},{element:Yt?document.createElement("div"):null}),Tr=new v.Marker(xr);return Tr.on("click",function(Jr){var Zn,li;(Zn=(li=le.current.props).onClick)===null||Zn===void 0||Zn.call(li,Jr)}),Tr},[]);return L(function(){dt.setLnglat(x.lngLat)},[x.lngLat]),(0,C.useEffect)(function(){return A.addMarker(dt),function(){dt.remove()}},[]),(0,Jp.createPortal)(x.children,dt.getElement())});function lx(h,x){return hx(h)||fx(h,x)||Ny(h,x)||cx()}function cx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ny(h,x){if(h){if(typeof h=="string")return zy(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return zy(h,x)}}function zy(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function fx(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function hx(h){if(Array.isArray(h))return h}var dx=function(x){var A=x.style,le=x.closeButton,dt=x.closeButtonOffsets,Yt=x.closeOnClick,xr=x.closeOnEsc,Tr=x.maxWidth,Jr=x.anchor,Zn=x.offsets,li=x.stopPropagation,da=x.autoPan,ro=x.autoClose,Xo=x.followCursor,Fo=x.className,ho=x.lngLat,ns=x.children,vs=x.title,us=x.onOpen,Eu=x.onClose,Nu=x.onShow,ul=x.onHide,sf=useScene(),Fu=useState(),il=lx(Fu,2),Su=il[0],zu=il[1],uc=useMemo(function(){return getStyleText(A)},[A]),Ui=useL7ComponentPortal(ns),yi=Ui.portal,Pi=Ui.dom,Wa=useL7ComponentPortal(vs),Do=Wa.portal,Mo=Wa.dom,Xu=useMemo(function(){return{style:uc,closeButton:le,closeButtonOffsets:dt,closeOnClick:Yt,closeOnEsc:xr,maxWidth:Tr,anchor:Jr,offsets:Zn,stopPropagation:li,autoPan:da,autoClose:ro,followCursor:Xo,className:Fo,lngLat:ho,html:Pi,title:Mo}},[uc,le,JSON.stringify(dt),Yt,xr,Tr,Jr,JSON.stringify(Zn),li,da,ro,Xo,Fo,Pi,Mo,JSON.stringify(ho)]);return useMount(function(){var gc=new L7Popup(omitBy(Xu,function(uf){return uf===void 0}));zu(gc),sf.addPopup(gc)}),useUnmount(function(){Su&&(sf.removePopup(Su),zu(void 0))}),useL7ComponentUpdate(Su,Xu),useL7ComponentEvent(Su,{open:us,close:Eu,show:Nu,hide:ul}),React.createElement(React.Fragment,null,yi,Do)},Vm=function(x,A){if(x instanceof Function){var le=document.createElement(A);return function(){var xr=x.apply(void 0,arguments),Tr=Jp.createPortal(xr,le);return Jp.render(Tr,le),le}}else{var dt=document.createElement(A),Yt=Jp.createPortal(x,dt);return Jp.render(Yt,dt),dt}};function px(h){return gx(h)||mx(h)||Uy(h)||vx()}function vx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mx(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function gx(h){if(Array.isArray(h))return zg(h)}function yx(h,x){return xx(h)||_x(h,x)||Uy(h,x)||Zy()}function Zy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uy(h,x){if(h){if(typeof h=="string")return zg(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return zg(h,x)}}function zg(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function _x(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function xx(h){if(Array.isArray(h))return h}var bx=function(x){var A=x.style,le=x.closeButton,dt=x.closeButtonOffsets,Yt=x.closeOnClick,xr=x.closeOnEsc,Tr=x.maxWidth,Jr=x.anchor,Zn=x.offsets,li=x.stopPropagation,da=x.autoPan,ro=x.autoClose,Xo=x.className,Fo=x.lngLat,ho=x.items,ns=x.trigger,vs=x.onOpen,us=x.onClose,Eu=x.onShow,Nu=x.onHide,ul=Us(),sf=(0,C.useState)(),Fu=yx(sf,2),il=Fu[0],Su=Fu[1],zu=(0,C.useMemo)(function(){return ni(A)},[A]),uc=ad(),Ui=(0,C.useMemo)(function(){var Pi=[];return ho.forEach(function(Wa){var Do;if(typeof Wa.layer=="string"){var Mo=uc.find(function(gc){return gc.id===Wa.layer});if(Mo)Do=Mo;else return}else Do=Wa.layer;var Xu=[];Do.isComposite?Xu.push.apply(Xu,px(Do.getInteractionSubLayers())):Xu.push(Do),Xu.forEach(function(gc){var uf,Md={layer:gc};Wa.title&&(Md.title=Vm(Wa.title,"div")),Wa.customContent&&(Md.customContent=Vm(Wa.customContent,"div")),(uf=Wa.fields)!==null&&uf!==void 0&&uf.length&&(Md.fields=Wa.fields.map(function(zh){if(typeof zh=="string")return zh;var Pd={field:zh.field,getValue:zh.getValue};return zh.formatField&&(Pd.formatField=Vm(zh.formatField,"span")),zh.formatValue&&(Pd.formatValue=Vm(zh.formatValue,"span")),Pd})),Pi.push(Md)})}),Pi},[uc,ho]),yi=(0,C.useMemo)(function(){return{style:zu,closeButton:le,closeButtonOffsets:dt,closeOnClick:Yt,closeOnEsc:xr,maxWidth:Tr,anchor:Jr,offsets:Zn,stopPropagation:li,autoPan:da,autoClose:ro,followCursor:ns==="hover",className:Xo,lngLat:Fo,items:Ui,trigger:ns}},[zu,le,JSON.stringify(dt),Yt,xr,Tr,Jr,JSON.stringify(Zn),li,da,ro,Xo,ns,JSON.stringify(Fo),Ui]);return dd(function(){var Pi=new v.LayerPopup(Py(yi,function(Wa){return Wa===void 0}));Su(Pi),ul.addPopup(Pi)}),qr(function(){il&&(ul.removePopup(il),Su(void 0))}),q0(il,yi),Mv(il,{open:vs,close:us,show:Eu,hide:Nu}),C.createElement(C.Fragment,null)},$y="larkmap-context-menu",Ex="[object Map]",Sx="[object Set]",jy=Object.prototype,Hy=jy.hasOwnProperty;function Vy(h){if(h==null)return!0;if(fs(h)&&(br(h)||typeof h=="string"||typeof h.splice=="function"||yu(h)||Yf(h)||Ch(h)))return!h.length;var x=ld(h);if(x==Ex||x==Sx)return!h.size;if(Pt(h))return!To(h).length;for(var A in h)if(Hy.call(h,A))return!1;return!0}var M0=Vy,Gy=(0,C.memo)(function(x){var A=x.text,le=A===void 0?"":A,dt=x.onClick;return M0(le)?null:C.createElement("li",{className:O()("".concat($y,"__menu-item"),x==null?void 0:x.className),style:x==null?void 0:x.style,onClick:dt},le)});function Cx(h,x){return om(h)||am(h,x)||Tx(h,x)||Ax()}function Ax(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tx(h,x){if(h){if(typeof h=="string")return Wy(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return Wy(h,x)}}function Wy(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function am(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function om(h){if(Array.isArray(h))return h}var sm=function(x){var A=Us(),le=(0,C.useState)({visible:!1,position:void 0}),dt=Cx(le,2),Yt=dt[0],xr=dt[1],Tr=(0,C.useMemo)(function(){return C.createElement("div",{className:O()("".concat($y),x==null?void 0:x.className),style:x==null?void 0:x.style},x==null?void 0:x.children)},[x]),Jr=function(da){var ro=da.lnglat,Xo=ro.lng,Fo=ro.lat;xr({visible:!0,position:{lng:Xo,lat:Fo}})},Zn=function(){var da=setTimeout(function(){da&&(clearTimeout(da),xr({visible:!1,position:void 0}))},0)};return(0,C.useEffect)(function(){return A&&(A.on("contextmenu",Jr),A.on("click",Zn)),function(){A.off("contextmenu",Jr),A.off("click",Zn)}},[A]),Yt.visible?C.createElement(ux,{lngLat:Yt.position,anchor:"top-left"},Tr):null};sm.Item=Gy;var um=m(38018),Dp=m(1413),Xy=m(45191),Gm=m(97685),Ky=m(4942),Yy=m(91),Qy=(0,C.createContext)({}),Jy=Qy,Mx=m(71002),lm=m(86500),qp=m(1350),cm=2,qy=.16,Px=.05,e1=.05,O2=.15,t1=5,fm=4,r1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function n1(h){var x=h.r,A=h.g,le=h.b,dt=(0,lm.py)(x,A,le);return{h:dt.h*360,s:dt.s,v:dt.v}}function Wm(h){var x=h.r,A=h.g,le=h.b;return"#".concat((0,lm.vq)(x,A,le,!1))}function i1(h,x,A){var le=A/100,dt={r:(x.r-h.r)*le+h.r,g:(x.g-h.g)*le+h.g,b:(x.b-h.b)*le+h.b};return dt}function Ox(h,x,A){var le;return Math.round(h.h)>=60&&Math.round(h.h)<=240?le=A?Math.round(h.h)-cm*x:Math.round(h.h)+cm*x:le=A?Math.round(h.h)+cm*x:Math.round(h.h)-cm*x,le<0?le+=360:le>=360&&(le-=360),le}function Zg(h,x,A){if(h.h===0&&h.s===0)return h.s;var le;return A?le=h.s-qy*x:x===fm?le=h.s+qy:le=h.s+Px*x,le>1&&(le=1),A&&x===t1&&le>.1&&(le=.1),le<.06&&(le=.06),Number(le.toFixed(2))}function fp(h,x,A){var le;return A?le=h.v+e1*x:le=h.v-O2*x,le>1&&(le=1),Number(le.toFixed(2))}function Xm(h){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=[],le=(0,qp.uA)(h),dt=t1;dt>0;dt-=1){var Yt=n1(le),xr=Wm((0,qp.uA)({h:Ox(Yt,dt,!0),s:Zg(Yt,dt,!0),v:fp(Yt,dt,!0)}));A.push(xr)}A.push(Wm(le));for(var Tr=1;Tr<=fm;Tr+=1){var Jr=n1(le),Zn=Wm((0,qp.uA)({h:Ox(Jr,Tr),s:Zg(Jr,Tr),v:fp(Jr,Tr)}));A.push(Zn)}return x.theme==="dark"?r1.map(function(li){var da=li.index,ro=li.opacity,Xo=Wm(i1((0,qp.uA)(x.backgroundColor||"#141414"),(0,qp.uA)(A[da]),ro*100));return Xo}):A}var Km={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ep={},Ug={};Object.keys(Km).forEach(function(h){ep[h]=Xm(Km[h]),ep[h].primary=ep[h][5],Ug[h]=Xm(Km[h],{theme:"dark",backgroundColor:"#141414"}),Ug[h].primary=Ug[h][5]});var I2=ep.red,Ix=ep.volcano,Rx=ep.gold,R2=ep.orange,L2=ep.yellow,a1=ep.lime,D2=ep.green,k2=ep.cyan,F2=ep.blue,B2=ep.geekblue,Ym=ep.purple,Qm=ep.magenta,N2=ep.grey,Lx=m(80334),Dx=m(44958);function kx(h,x){(0,Lx.ZP)(h,"[@ant-design/icons] ".concat(x))}function Pv(h){return(0,Mx.Z)(h)==="object"&&typeof h.name=="string"&&typeof h.theme=="string"&&((0,Mx.Z)(h.icon)==="object"||typeof h.icon=="function")}function o1(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(h).reduce(function(x,A){var le=h[A];switch(A){case"class":x.className=le,delete x.class;break;default:x[A]=le}return x},{})}function $g(h,x,A){return A?C.createElement(h.tag,(0,Dp.Z)((0,Dp.Z)({key:x},o1(h.attrs)),A),(h.children||[]).map(function(le,dt){return $g(le,"".concat(x,"-").concat(h.tag,"-").concat(dt))})):C.createElement(h.tag,(0,Dp.Z)({key:x},o1(h.attrs)),(h.children||[]).map(function(le,dt){return $g(le,"".concat(x,"-").concat(h.tag,"-").concat(dt))}))}function s1(h){return Xm(h)[0]}function u1(h){return h?Array.isArray(h)?h:[h]:[]}var z2={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},Fx=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Bx=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fx,A=(0,C.useContext)(Jy),le=A.csp;(0,C.useEffect)(function(){(0,Dx.hq)(x,"@ant-design-icons",{prepend:!0,csp:le})},[])},Nx=["icon","className","onClick","style","primaryColor","secondaryColor"],hm={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function zx(h){var x=h.primaryColor,A=h.secondaryColor;hm.primaryColor=x,hm.secondaryColor=A||s1(x),hm.calculated=!!A}function Zx(){return(0,Dp.Z)({},hm)}var Jm=function(x){var A=x.icon,le=x.className,dt=x.onClick,Yt=x.style,xr=x.primaryColor,Tr=x.secondaryColor,Jr=(0,Yy.Z)(x,Nx),Zn=hm;if(xr&&(Zn={primaryColor:xr,secondaryColor:Tr||s1(xr)}),Bx(),kx(Pv(A),"icon should be icon definiton, but got ".concat(A)),!Pv(A))return null;var li=A;return li&&typeof li.icon=="function"&&(li=(0,Dp.Z)((0,Dp.Z)({},li),{},{icon:li.icon(Zn.primaryColor,Zn.secondaryColor)})),$g(li.icon,"svg-".concat(li.name),(0,Dp.Z)({className:le,onClick:dt,style:Yt,"data-icon":li.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Jr))};Jm.displayName="IconReact",Jm.getTwoToneColors=Zx,Jm.setTwoToneColors=zx;var jg=Jm;function l1(h){var x=u1(h),A=(0,Gm.Z)(x,2),le=A[0],dt=A[1];return jg.setTwoToneColors({primaryColor:le,secondaryColor:dt})}function Ux(){var h=jg.getTwoToneColors();return h.calculated?[h.primaryColor,h.secondaryColor]:h.primaryColor}var $x=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];l1("#1890ff");var qm=C.forwardRef(function(h,x){var A,le=h.className,dt=h.icon,Yt=h.spin,xr=h.rotate,Tr=h.tabIndex,Jr=h.onClick,Zn=h.twoToneColor,li=(0,Yy.Z)(h,$x),da=C.useContext(Jy),ro=da.prefixCls,Xo=ro===void 0?"anticon":ro,Fo=da.rootClassName,ho=O()(Fo,Xo,(A={},(0,Ky.Z)(A,"".concat(Xo,"-").concat(dt.name),!!dt.name),(0,Ky.Z)(A,"".concat(Xo,"-spin"),!!Yt||dt.name==="loading"),A),le),ns=Tr;ns===void 0&&Jr&&(ns=-1);var vs=xr?{msTransform:"rotate(".concat(xr,"deg)"),transform:"rotate(".concat(xr,"deg)")}:void 0,us=u1(Zn),Eu=(0,Gm.Z)(us,2),Nu=Eu[0],ul=Eu[1];return C.createElement("span",(0,Dp.Z)((0,Dp.Z)({role:"img","aria-label":dt.name},li),{},{ref:x,tabIndex:ns,onClick:Jr,className:ho}),C.createElement(jg,{icon:dt,primaryColor:Nu,secondaryColor:ul,style:vs}))});qm.displayName="AntdIcon",qm.getTwoToneColor=Ux,qm.setTwoToneColor=l1;var jx=qm,c1=function(x,A){return C.createElement(jx,(0,Dp.Z)((0,Dp.Z)({},x),{},{ref:A,icon:Xy.Z}))};c1.displayName="SearchOutlined";var Hx=C.forwardRef(c1),Vx=m(23279),Gx=m.n(Vx);function Wx(h,x){var A;nr&&(oa(h)||console.error(`useDebounceFn expected parameter is a function, got ${typeof h}`));const le=Ji(h),dt=(A=x==null?void 0:x.wait)!==null&&A!==void 0?A:1e3,Yt=(0,C.useMemo)(()=>Gx()((...xr)=>le.current(...xr),dt,x),[]);return qr(()=>{Yt.cancel()}),{run:Yt,cancel:Yt.cancel,flush:Yt.flush}}var eg=Wx,Hg=m(21990);function f1(h){var x=h==null?0:h.length;return x?h[x-1]:void 0}var h1=f1;function d1(h,x,A){var le=-1,dt=h.length;x<0&&(x=-x>dt?0:dt+x),A=A>dt?dt:A,A<0&&(A+=dt),dt=x>A?0:A-x>>>0,x>>>=0;for(var Yt=Array(dt);++le<dt;)Yt[le]=h[le+x];return Yt}var Xx=d1;function p1(h,x){return x.length<2?h:tm(h,Xx(x,0,-1))}var v1=p1;function Kx(h,x){return x=S0(x,h),h=v1(h,x),h==null||delete h[C0(h1(x))]}var m1=Kx,g1="[object Object]",Yx=Function.prototype,y1=Object.prototype,_1=Yx.toString,Qx=y1.hasOwnProperty,Jx=_1.call(Object);function qx(h){if(!Le(h)||ie(h)!=g1)return!1;var x=Gu(h);if(x===null)return!0;var A=Qx.call(x,"constructor")&&x.constructor;return typeof A=="function"&&A instanceof A&&_1.call(A)==Jx}var eb=qx;function x1(h){return eb(h)?void 0:h}var b1=x1,E1=ke?ke.isConcatSpreadable:void 0;function S1(h){return br(h)||Ch(h)||!!(E1&&h&&h[E1])}var C1=S1;function dm(h,x,A,le,dt){var Yt=-1,xr=h.length;for(A||(A=C1),dt||(dt=[]);++Yt<xr;){var Tr=h[Yt];x>0&&A(Tr)?x>1?dm(Tr,x-1,A,le,dt):cs(dt,Tr):le||(dt[dt.length]=Tr)}return dt}var tb=dm;function rb(h){var x=h==null?0:h.length;return x?tb(h,1):[]}var nb=rb;function Z2(h,x,A){switch(A.length){case 0:return h.call(x);case 1:return h.call(x,A[0]);case 2:return h.call(x,A[0],A[1]);case 3:return h.call(x,A[0],A[1],A[2])}return h.apply(x,A)}var w1=Z2,Vg=Math.max;function ib(h,x,A){return x=Vg(x===void 0?h.length-1:x,0),function(){for(var le=arguments,dt=-1,Yt=Vg(le.length-x,0),xr=Array(Yt);++dt<Yt;)xr[dt]=le[x+dt];dt=-1;for(var Tr=Array(x+1);++dt<x;)Tr[dt]=le[dt];return Tr[x]=A(xr),w1(h,this,Tr)}}var A1=ib;function T1(h){return function(){return h}}var M1=T1,P1=aa?function(h,x){return aa(h,"toString",{configurable:!0,enumerable:!1,value:M1(x),writable:!0})}:Ay,O1=P1,I1=800,P0=16,R1=Date.now;function L1(h){var x=0,A=0;return function(){var le=R1(),dt=P0-(le-A);if(A=le,dt>0){if(++x>=I1)return arguments[0]}else x=0;return h.apply(void 0,arguments)}}var D1=L1,k1=D1(O1),ab=k1;function F1(h){return ab(A1(h,void 0,nb),h+"")}var B1=F1,ob=1,N1=2,z1=4,sb=B1(function(h,x){var A={};if(h==null)return A;var le=!1;x=Qr(x,function(Yt){return Yt=S0(Yt,h),le||(le=Yt.length>1),Yt}),$a(h,rf(h),A),le&&(A=$n(A,ob|N1|z1,b1));for(var dt=x.length;dt--;)m1(A,x[dt]);return A}),pm=sb;function O0(h){return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},O0(h)}var ub=["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","disabled","notFoundContent","showArrow"];function hp(){return hp=Object.assign?Object.assign.bind():function(h){for(var x=1;x<arguments.length;x++){var A=arguments[x];for(var le in A)Object.prototype.hasOwnProperty.call(A,le)&&(h[le]=A[le])}return h},hp.apply(this,arguments)}function dp(h,x,A){return x=ev(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function ev(h){var x=lb(h,"string");return O0(x)==="symbol"?x:String(x)}function lb(h,x){if(O0(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(O0(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function cb(h,x){if(h==null)return{};var A=fb(h,x),le,dt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(dt=0;dt<Yt.length;dt++)le=Yt[dt],!(x.indexOf(le)>=0)&&Object.prototype.propertyIsEnumerable.call(h,le)&&(A[le]=h[le])}return A}function fb(h,x){if(h==null)return{};var A={},le=Object.keys(h),dt,Yt;for(Yt=0;Yt<le.length;Yt++)dt=le[Yt],!(x.indexOf(dt)>=0)&&(A[dt]=h[dt]);return A}var Z1="SECRET_COMBOBOX_MODE_DO_NOT_USE",U1="larkmap-select",hb=function(x,A){var le=x.prefixCls,dt=x.bordered,Yt=dt===void 0?!0:dt,xr=x.className,Tr=x.getPopupContainer,Jr=x.dropdownClassName,Zn=x.popupClassName,li=x.listHeight,da=li===void 0?256:li,ro=x.placement,Xo=x.listItemHeight,Fo=Xo===void 0?24:Xo,ho=x.disabled,ns=x.notFoundContent,vs=x.showArrow,us=cb(x,ub),Eu=C.useMemo(function(){var sf=us,Fu=sf.mode;if(Fu!=="combobox")return Fu===Z1?"combobox":Fu},[us]),Nu=pm(us,"suffixIcon","itemIcon"),ul=O()(dp({},"".concat(U1,"-borderless"),!Yt),xr);return C.createElement(Hg.ZP,hp({ref:A},Nu,{listHeight:da,listItemHeight:Fo,mode:Eu,prefixCls:U1,placement:ro,notFoundContent:ns!=null?ns:"\u5F53\u524D\u65E0\u6570\u636E",className:ul,getPopupContainer:Tr,dropdownClassName:Zn,showArrow:vs,disabled:ho}))},vm=C.forwardRef(hb);vm.SECRET_COMBOBOX_MODE_DO_NOT_USE=Z1,vm.Option=Hg.Wx,vm.OptGroup=Hg.Xo;var $1=vm,Gg="larkmap-location-search",j1="https://restapi.amap.com/v3/assistant/inputtips";function Yv(h){return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Yv(h)}var db=["searchParams","showDistrict","showAddress","onSearchFinish","onChange"];function Wg(){return Wg=Object.assign?Object.assign.bind():function(h){for(var x=1;x<arguments.length;x++){var A=arguments[x];for(var le in A)Object.prototype.hasOwnProperty.call(A,le)&&(h[le]=A[le])}return h},Wg.apply(this,arguments)}function tg(){"use strict";tg=function(){return h};var h={},x=Object.prototype,A=x.hasOwnProperty,le=Object.defineProperty||function(Ui,yi,Pi){Ui[yi]=Pi.value},dt=typeof Symbol=="function"?Symbol:{},Yt=dt.iterator||"@@iterator",xr=dt.asyncIterator||"@@asyncIterator",Tr=dt.toStringTag||"@@toStringTag";function Jr(Ui,yi,Pi){return Object.defineProperty(Ui,yi,{value:Pi,enumerable:!0,configurable:!0,writable:!0}),Ui[yi]}try{Jr({},"")}catch(Ui){Jr=function(Pi,Wa,Do){return Pi[Wa]=Do}}function Zn(Ui,yi,Pi,Wa){var Do=yi&&yi.prototype instanceof ro?yi:ro,Mo=Object.create(Do.prototype),Xu=new Su(Wa||[]);return le(Mo,"_invoke",{value:ul(Ui,Pi,Xu)}),Mo}function li(Ui,yi,Pi){try{return{type:"normal",arg:Ui.call(yi,Pi)}}catch(Wa){return{type:"throw",arg:Wa}}}h.wrap=Zn;var da={};function ro(){}function Xo(){}function Fo(){}var ho={};Jr(ho,Yt,function(){return this});var ns=Object.getPrototypeOf,vs=ns&&ns(ns(zu([])));vs&&vs!==x&&A.call(vs,Yt)&&(ho=vs);var us=Fo.prototype=ro.prototype=Object.create(ho);function Eu(Ui){["next","throw","return"].forEach(function(yi){Jr(Ui,yi,function(Pi){return this._invoke(yi,Pi)})})}function Nu(Ui,yi){function Pi(Do,Mo,Xu,gc){var uf=li(Ui[Do],Ui,Mo);if(uf.type!=="throw"){var Md=uf.arg,zh=Md.value;return zh&&Yv(zh)=="object"&&A.call(zh,"__await")?yi.resolve(zh.__await).then(function(Pd){Pi("next",Pd,Xu,gc)},function(Pd){Pi("throw",Pd,Xu,gc)}):yi.resolve(zh).then(function(Pd){Md.value=Pd,Xu(Md)},function(Pd){return Pi("throw",Pd,Xu,gc)})}gc(uf.arg)}var Wa;le(this,"_invoke",{value:function(Mo,Xu){function gc(){return new yi(function(uf,Md){Pi(Mo,Xu,uf,Md)})}return Wa=Wa?Wa.then(gc,gc):gc()}})}function ul(Ui,yi,Pi){var Wa="suspendedStart";return function(Do,Mo){if(Wa==="executing")throw new Error("Generator is already running");if(Wa==="completed"){if(Do==="throw")throw Mo;return uc()}for(Pi.method=Do,Pi.arg=Mo;;){var Xu=Pi.delegate;if(Xu){var gc=sf(Xu,Pi);if(gc){if(gc===da)continue;return gc}}if(Pi.method==="next")Pi.sent=Pi._sent=Pi.arg;else if(Pi.method==="throw"){if(Wa==="suspendedStart")throw Wa="completed",Pi.arg;Pi.dispatchException(Pi.arg)}else Pi.method==="return"&&Pi.abrupt("return",Pi.arg);Wa="executing";var uf=li(Ui,yi,Pi);if(uf.type==="normal"){if(Wa=Pi.done?"completed":"suspendedYield",uf.arg===da)continue;return{value:uf.arg,done:Pi.done}}uf.type==="throw"&&(Wa="completed",Pi.method="throw",Pi.arg=uf.arg)}}}function sf(Ui,yi){var Pi=yi.method,Wa=Ui.iterator[Pi];if(Wa===void 0)return yi.delegate=null,Pi==="throw"&&Ui.iterator.return&&(yi.method="return",yi.arg=void 0,sf(Ui,yi),yi.method==="throw")||Pi!=="return"&&(yi.method="throw",yi.arg=new TypeError("The iterator does not provide a '"+Pi+"' method")),da;var Do=li(Wa,Ui.iterator,yi.arg);if(Do.type==="throw")return yi.method="throw",yi.arg=Do.arg,yi.delegate=null,da;var Mo=Do.arg;return Mo?Mo.done?(yi[Ui.resultName]=Mo.value,yi.next=Ui.nextLoc,yi.method!=="return"&&(yi.method="next",yi.arg=void 0),yi.delegate=null,da):Mo:(yi.method="throw",yi.arg=new TypeError("iterator result is not an object"),yi.delegate=null,da)}function Fu(Ui){var yi={tryLoc:Ui[0]};1 in Ui&&(yi.catchLoc=Ui[1]),2 in Ui&&(yi.finallyLoc=Ui[2],yi.afterLoc=Ui[3]),this.tryEntries.push(yi)}function il(Ui){var yi=Ui.completion||{};yi.type="normal",delete yi.arg,Ui.completion=yi}function Su(Ui){this.tryEntries=[{tryLoc:"root"}],Ui.forEach(Fu,this),this.reset(!0)}function zu(Ui){if(Ui){var yi=Ui[Yt];if(yi)return yi.call(Ui);if(typeof Ui.next=="function")return Ui;if(!isNaN(Ui.length)){var Pi=-1,Wa=function Do(){for(;++Pi<Ui.length;)if(A.call(Ui,Pi))return Do.value=Ui[Pi],Do.done=!1,Do;return Do.value=void 0,Do.done=!0,Do};return Wa.next=Wa}}return{next:uc}}function uc(){return{value:void 0,done:!0}}return Xo.prototype=Fo,le(us,"constructor",{value:Fo,configurable:!0}),le(Fo,"constructor",{value:Xo,configurable:!0}),Xo.displayName=Jr(Fo,Tr,"GeneratorFunction"),h.isGeneratorFunction=function(Ui){var yi=typeof Ui=="function"&&Ui.constructor;return!!yi&&(yi===Xo||(yi.displayName||yi.name)==="GeneratorFunction")},h.mark=function(Ui){return Object.setPrototypeOf?Object.setPrototypeOf(Ui,Fo):(Ui.__proto__=Fo,Jr(Ui,Tr,"GeneratorFunction")),Ui.prototype=Object.create(us),Ui},h.awrap=function(Ui){return{__await:Ui}},Eu(Nu.prototype),Jr(Nu.prototype,xr,function(){return this}),h.AsyncIterator=Nu,h.async=function(Ui,yi,Pi,Wa,Do){Do===void 0&&(Do=Promise);var Mo=new Nu(Zn(Ui,yi,Pi,Wa),Do);return h.isGeneratorFunction(yi)?Mo:Mo.next().then(function(Xu){return Xu.done?Xu.value:Mo.next()})},Eu(us),Jr(us,Tr,"Generator"),Jr(us,Yt,function(){return this}),Jr(us,"toString",function(){return"[object Generator]"}),h.keys=function(Ui){var yi=Object(Ui),Pi=[];for(var Wa in yi)Pi.push(Wa);return Pi.reverse(),function Do(){for(;Pi.length;){var Mo=Pi.pop();if(Mo in yi)return Do.value=Mo,Do.done=!1,Do}return Do.done=!0,Do}},h.values=zu,Su.prototype={constructor:Su,reset:function(yi){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(il),!yi)for(var Pi in this)Pi.charAt(0)==="t"&&A.call(this,Pi)&&!isNaN(+Pi.slice(1))&&(this[Pi]=void 0)},stop:function(){this.done=!0;var yi=this.tryEntries[0].completion;if(yi.type==="throw")throw yi.arg;return this.rval},dispatchException:function(yi){if(this.done)throw yi;var Pi=this;function Wa(Md,zh){return Xu.type="throw",Xu.arg=yi,Pi.next=Md,zh&&(Pi.method="next",Pi.arg=void 0),!!zh}for(var Do=this.tryEntries.length-1;Do>=0;--Do){var Mo=this.tryEntries[Do],Xu=Mo.completion;if(Mo.tryLoc==="root")return Wa("end");if(Mo.tryLoc<=this.prev){var gc=A.call(Mo,"catchLoc"),uf=A.call(Mo,"finallyLoc");if(gc&&uf){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0);if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}else if(gc){if(this.prev<Mo.catchLoc)return Wa(Mo.catchLoc,!0)}else{if(!uf)throw new Error("try statement without catch or finally");if(this.prev<Mo.finallyLoc)return Wa(Mo.finallyLoc)}}}},abrupt:function(yi,Pi){for(var Wa=this.tryEntries.length-1;Wa>=0;--Wa){var Do=this.tryEntries[Wa];if(Do.tryLoc<=this.prev&&A.call(Do,"finallyLoc")&&this.prev<Do.finallyLoc){var Mo=Do;break}}Mo&&(yi==="break"||yi==="continue")&&Mo.tryLoc<=Pi&&Pi<=Mo.finallyLoc&&(Mo=null);var Xu=Mo?Mo.completion:{};return Xu.type=yi,Xu.arg=Pi,Mo?(this.method="next",this.next=Mo.finallyLoc,da):this.complete(Xu)},complete:function(yi,Pi){if(yi.type==="throw")throw yi.arg;return yi.type==="break"||yi.type==="continue"?this.next=yi.arg:yi.type==="return"?(this.rval=this.arg=yi.arg,this.method="return",this.next="end"):yi.type==="normal"&&Pi&&(this.next=Pi),da},finish:function(yi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.finallyLoc===yi)return this.complete(Wa.completion,Wa.afterLoc),il(Wa),da}},catch:function(yi){for(var Pi=this.tryEntries.length-1;Pi>=0;--Pi){var Wa=this.tryEntries[Pi];if(Wa.tryLoc===yi){var Do=Wa.completion;if(Do.type==="throw"){var Mo=Do.arg;il(Wa)}return Mo}}throw new Error("illegal catch attempt")},delegateYield:function(yi,Pi,Wa){return this.delegate={iterator:zu(yi),resultName:Pi,nextLoc:Wa},this.method==="next"&&(this.arg=void 0),da}},h}function pb(h){return vb(h)||rg(h)||Kg(h)||Xg()}function Xg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rg(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function vb(h){if(Array.isArray(h))return mm(h)}function H1(h,x){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(h);x&&(le=le.filter(function(dt){return Object.getOwnPropertyDescriptor(h,dt).enumerable})),A.push.apply(A,le)}return A}function V1(h){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?H1(Object(A),!0).forEach(function(le){mb(h,le,A[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):H1(Object(A)).forEach(function(le){Object.defineProperty(h,le,Object.getOwnPropertyDescriptor(A,le))})}return h}function mb(h,x,A){return x=gb(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function gb(h){var x=G1(h,"string");return Yv(x)==="symbol"?x:String(x)}function G1(h,x){if(Yv(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(Yv(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function W1(h,x,A,le,dt,Yt,xr){try{var Tr=h[Yt](xr),Jr=Tr.value}catch(Zn){A(Zn);return}Tr.done?x(Jr):Promise.resolve(Jr).then(le,dt)}function yb(h){return function(){var x=this,A=arguments;return new Promise(function(le,dt){var Yt=h.apply(x,A);function xr(Jr){W1(Yt,le,dt,xr,Tr,"next",Jr)}function Tr(Jr){W1(Yt,le,dt,xr,Tr,"throw",Jr)}xr(void 0)})}}function X1(h,x){return tv(h)||Yg(h,x)||Kg(h,x)||_b()}function _b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kg(h,x){if(h){if(typeof h=="string")return mm(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return mm(h,x)}}function mm(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Yg(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function tv(h){if(Array.isArray(h))return h}function Tp(h,x){if(h==null)return{};var A=Qg(h,x),le,dt;if(Object.getOwnPropertySymbols){var Yt=Object.getOwnPropertySymbols(h);for(dt=0;dt<Yt.length;dt++)le=Yt[dt],!(x.indexOf(le)>=0)&&Object.prototype.propertyIsEnumerable.call(h,le)&&(A[le]=h[le])}return A}function Qg(h,x){if(h==null)return{};var A={},le=Object.keys(h),dt,Yt;for(Yt=0;Yt<le.length;Yt++)dt=le[Yt],!(x.indexOf(dt)>=0)&&(A[dt]=h[dt]);return A}var Jg=$1.Option,K1=function(x){var A=x.searchParams,le=x.showDistrict,dt=x.showAddress,Yt=x.onSearchFinish,xr=x.onChange,Tr=Tp(x,db),Jr=(0,C.useState)([]),Zn=X1(Jr,2),li=Zn[0],da=Zn[1];(0,C.useEffect)(function(){Yt==null||Yt(li)},[Yt,li]);var ro=eg(function(){var ho=yb(tg().mark(function ns(vs){var us,Eu,Nu,ul;return tg().wrap(function(Fu){for(;;)switch(Fu.prev=Fu.next){case 0:if(vs){Fu.next=3;break}return da([]),Fu.abrupt("return");case 3:return Nu=um.stringifyUrl({url:j1,query:V1(V1({},A),{},{keywords:[].concat(pb(((us=A.keywords)!==null&&us!==void 0?us:"").split("|")),[vs]).filter(function(il){return!!il}).join("|")})}),Fu.next=6,fetch(Nu);case 6:return Fu.next=8,Fu.sent.json();case 8:ul=Fu.sent,da(((Eu=ul==null?void 0:ul.tips)!==null&&Eu!==void 0?Eu:[]).filter(function(il){return il.location&&il.location.length}).map(function(il){var Su=il.location.split(","),zu=X1(Su,2),uc=zu[0],Ui=zu[1];return il.longitude=+uc,il.latitude=+Ui,il}));case 10:case"end":return Fu.stop()}},ns)}));return function(ns){return ho.apply(this,arguments)}}(),{wait:1e3}),Xo=ro.run,Fo=(0,C.useCallback)(function(ho){var ns=ho&&li.find(function(vs){return vs.name===ho});xr==null||xr(ho||void 0,ns||void 0)},[xr,li]);return C.createElement($1,Wg({className:"".concat(Gg),onSearch:Xo,onChange:Fo,clearIcon:function(){return null}},Tr),li.map(function(ho){var ns="".concat(le?ho.district:"").concat(dt?ho.address:"");return C.createElement(Jg,{key:ho.id,value:ho.name},C.createElement("div",{title:ho.name,className:"".concat(Gg,"__option-name")},ho.name),ns&&C.createElement("div",{title:ns,className:"".concat(Gg,"__option-tip")},ns))}))};K1.defaultProps={placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u5730\u540D",showSearch:!0,allowClear:!0,suffixIcon:C.createElement(Hx,null),filterOption:!1,defaultActiveFirstOption:!1,showAddress:!0,showDistrict:!0};var qg="larkmap-legend-icon",Qv=function(x){var A=x.labels,le=x.icons,dt=x.className,Yt=x.style;return React.createElement("div",{className:classnames("".concat(qg),dt),style:Yt},A.map(function(xr,Tr){return React.createElement("div",{key:xr,className:"".concat(qg,"__content")},React.createElement("img",{src:le[Tr],className:"".concat(qg,"__content__icon")}),React.createElement("div",null,xr))}))};function xb(h){return vt(h)&&h!=+h}var Y1=xb,ng=0;function Q1(h){var x=++ng;return Xe(h)+x}var Oh=Q1;function gm(h){return bb(h)||J1(h)||Eb(h)||mc()}function mc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J1(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function bb(h){if(Array.isArray(h))return q1(h)}function U2(h,x){return H2(h)||j2(h,x)||Eb(h,x)||$2()}function $2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eb(h,x){if(h){if(typeof h=="string")return q1(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return q1(h,x)}}function q1(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function j2(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function H2(h){if(Array.isArray(h))return h}var ey="larkmap-legend-proportion",V2=function(x){var A=x.labels,le=x.fillColor,dt=le===void 0?"#f9f9f9":le,Yt=x.className,xr=x.style,Tr=U2(A,2),Jr=Tr[0],Zn=Tr[1],li=[86,62,38,24];function da(ho,ns){var vs=(ns-ho)/4,us=Math.floor(ho+vs),Eu=Math.floor(ns-vs);return[us,Eu]}function ro(){var ho=Jr,ns=Zn;(!vt(ho)||!vt(ho))&&(ho=ns=0),Y1(ho)&&(ho=0),Y1(ns)&&(ns=0);var vs=da(ho,ns),us=[{prefix:"MIN:",val:ho}].concat(gm(vs),[{prefix:"MAX:",val:ns}]);return us}function Xo(){return C.createElement("div",{className:"".concat(ey,"__circlebox"),style:{width:li[0]}},li.map(function(ho){return C.createElement("div",{key:ho,style:{width:ho,height:ho,background:dt},className:"".concat(ey,"__circlebox__item")})}))}function Fo(){return C.createElement("div",{style:{height:li[0]}},ro().reverse().map(function(ho){return C.createElement("div",{key:Oh(),className:"".concat(ey,"__labelitem")},ho==null?void 0:ho.prefix,typeof ho=="number"?ho:ho.val)}))}return C.createElement("div",{className:O()("".concat(ey),Yt),style:xr},C.createElement(Xo,null),C.createElement(Fo,null))};V2.defaultProps={fillColor:"#f9f9f9"};var G2=m(6767),e_=m.n(G2);function Sb(h){return function(x,A,le){for(var dt=-1,Yt=Object(x),xr=le(x),Tr=xr.length;Tr--;){var Jr=xr[h?Tr:++dt];if(A(Yt[Jr],Jr,Yt)===!1)break}return x}}var W2=Sb,X2=W2(),K2=X2;function Y2(h,x){return h&&K2(h,x,zo)}var Q2=Y2;function J2(h,x){return function(A,le){if(A==null)return A;if(!fs(A))return h(A,le);for(var dt=A.length,Yt=x?dt:-1,xr=Object(A);(x?Yt--:++Yt<dt)&&le(xr[Yt],Yt,xr)!==!1;);return A}}var q2=J2,eE=q2(Q2),tE=eE;function rE(h){return typeof h=="function"?h:Ay}var nE=rE;function iE(h,x){var A=br(h)?Ln:tE;return A(h,nE(x))}var aE=iE,oE=/\s/;function Cb(h){for(var x=h.length;x--&&oE.test(h.charAt(x)););return x}var t_=Cb,r_=/^\s+/;function ig(h){return h&&h.slice(0,t_(h)+1).replace(r_,"")}var ag=ig,ty=0/0,wb=/^[-+]0x[0-9a-f]+$/i,ry=/^0b[01]+$/i,Ab=/^0o[0-7]+$/i,Tb=parseInt;function I0(h){if(typeof h=="number")return h;if(_r(h))return ty;if(Tl(h)){var x=typeof h.valueOf=="function"?h.valueOf():h;h=Tl(x)?x+"":x}if(typeof h!="string")return h===0?h:+h;h=ag(h);var A=ry.test(h);return A||Ab.test(h)?Tb(h.slice(2),A?2:8):wb.test(h)?ty:+h}var n_=I0,i_=1/0,a_=17976931348623157e292;function sE(h){if(!h)return h===0?h:0;if(h=n_(h),h===i_||h===-i_){var x=h<0?-1:1;return x*a_}return h===h?h:0}var Mb=sE;function Pb(h){var x=Mb(h),A=x%1;return x===x?A?x-A:x:0}var Ov=Pb,Df=pe.isFinite,Ob=Math.min;function Ib(h){var x=Math[h];return function(A,le){if(A=n_(A),le=le==null?0:Ob(Ov(le),292),le&&Df(A)){var dt=(Xe(A)+"e").split("e"),Yt=x(dt[0]+"e"+(+dt[1]+le));return dt=(Xe(Yt)+"e").split("e"),+(dt[0]+"e"+(+dt[1]-le))}return x(A)}}var o_=Ib,ny=o_("round"),iy=ny,s_=function(x,A){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5,dt=[x],Yt=e_()(x).object(),xr=e_()(A).object();if(le<2)return le<1?[]:dt;var Tr={r:(Yt.r-xr.r)/(le-1),g:(Yt.g-xr.g)/(le-1),b:(Yt.b-xr.b)/(le-1)};return aE(new Array(le-2),function(Jr,Zn){return dt.push(e_()({r:iy(Yt.r-Tr.r*(Zn+1),0),g:iy(Yt.g-Tr.g*(Zn+1),0),b:iy(Yt.b-Tr.b*(Zn+1),0)}).hex())}),dt.push(A),dt};function Yd(h){return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Yd(h)}function Qd(h,x,A){return x=Jv(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function Jv(h){var x=u_(h,"string");return Yd(x)==="symbol"?x:String(x)}function u_(h,x){if(Yd(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(Yd(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var rv="larkmap-legend-category";function l_(h){var x=h.labels,A=h.colors,le=h.geometryType,dt=le===void 0?"circle":le,Yt=h.isStrokeColor,xr=h.style,Tr=h.className;function Jr(da){return Yt?{border:"2px solid ".concat(da)}:{background:da}}function Zn(da){return C.createElement("div",{className:O()(rv,Tr),style:xr},x.map(function(ro,Xo){return C.createElement("div",{className:"".concat(rv,"__content"),key:ro},C.createElement("div",{className:O()("".concat(rv,"__content__shape"),Qd({},"".concat(rv,"__content__").concat(dt),dt)),style:Jr(da[Xo])}),C.createElement("div",{className:"".concat(rv,"labels")},ro))}))}function li(){if(Array.isArray(A))return Zn(A);var da=s_(A.startColor,A.endColor,x.length);return Zn(da)}return C.createElement(li,null)}l_.defaultProps={geometryType:"circle",isStrokeColor:!1};var Rb=m(91033);function og(h){const x=(0,C.useRef)(0),[A,le]=(0,C.useState)(h),dt=(0,C.useCallback)(Yt=>{cancelAnimationFrame(x.current),x.current=requestAnimationFrame(()=>{le(Yt)})},[]);return qr(()=>{cancelAnimationFrame(x.current)}),[A,dt]}var sg=og,c_=!!(typeof window!="undefined"&&window.document&&window.document.createElement);function f_(h,x){if(!c_)return;if(!h)return x;let A;return oa(h)?A=h():"current"in h?A=h.current:A=h,A}function Hp(h,x){if(h===x)return!0;for(let A=0;A<h.length;A++)if(!Object.is(h[A],x[A]))return!1;return!0}var h_=h=>(A,le,dt)=>{const Yt=(0,C.useRef)(!1),xr=(0,C.useRef)([]),Tr=(0,C.useRef)([]),Jr=(0,C.useRef)();h(()=>{var Zn;const da=(Array.isArray(dt)?dt:[dt]).map(ro=>f_(ro));if(!Yt.current){Yt.current=!0,xr.current=da,Tr.current=le,Jr.current=A();return}(da.length!==xr.current.length||!Hp(da,xr.current)||!Hp(le,Tr.current))&&((Zn=Jr.current)===null||Zn===void 0||Zn.call(Jr),xr.current=da,Tr.current=le,Jr.current=A())}),qr(()=>{var Zn;(Zn=Jr.current)===null||Zn===void 0||Zn.call(Jr),Yt.current=!1})},Db=h_(C.useEffect),kb=h_(C.useLayoutEffect),Fb=c_?kb:Db;function Bb(h){const[x,A]=sg();return Fb(()=>{const le=f_(h);if(!le)return;const dt=new Rb.Z(Yt=>{Yt.forEach(xr=>{const{clientWidth:Tr,clientHeight:Jr}=xr.target;A({width:Tr,height:Jr})})});return dt.observe(le),()=>{dt.disconnect()}},[],h),x}var Nb=Bb,Iv="larkmap-legend-ramp",fE=function(x){var A=x[x.length-1],le=x[0];return Number.isFinite(le)||(le=parseInt(le,10)),Number.isFinite(A)||(A=parseInt(A,10)),[le,A]};function zb(h){var x=h.labels,A=h.labelUnit,le=A===void 0?"":A,dt=h.colors,Yt=x[0]+le,xr=x[x.length-1]+le;return C.createElement(C.Fragment,null,C.createElement("div",{className:"".concat(Iv,"__continuous"),style:{background:"linear-gradient(to right,".concat(dt,")")}}),C.createElement("div",{className:"".concat(Iv,"__continuous-labelbar")},C.createElement("span",null,Yt),C.createElement("span",null,xr)))}function Zb(h){var x=h.labels,A=h.labelUnit,le=A===void 0?"":A,dt=h.colors,Yt=(0,C.useRef)(null),xr=Nb(Yt),Tr=(xr==null?void 0:xr.width)/(dt.length+1),Jr=x;if(x.length+1===dt.length){var Zn="< "+x[0],li="\u2265 "+x[x.length-1];Jr.unshift(Zn),Jr.push(li)}var da=function(Xo){var Fo="".concat(x[Xo]).concat(le," - ").concat(x[Xo+1]).concat(le);return Fo};return C.createElement("div",{className:"".concat(Iv,"__dis-continuous"),ref:Yt},Number.isNaN(Tr)?null:C.createElement(C.Fragment,null,C.createElement("div",{className:"".concat(Iv,"__dis-continuous__colors"),style:{paddingLeft:Tr/2}},dt==null?void 0:dt.map(function(ro,Xo){return C.createElement("div",{key:ro,title:da(Xo),className:"".concat(Iv,"__dis-continuous__color"),style:{background:ro,width:Tr}})})),C.createElement("div",{className:"".concat(Iv,"__dis-continuous__labels")},x==null?void 0:x.map(function(ro){var Xo=ro+le;return C.createElement("span",{key:ro,className:"".concat(Iv,"__dis-continuous__label")},Xo)}))))}function Ub(h){var x=h.isContinuous,A=h.labels,le=h.colors,dt=h.labelUnit,Yt=h.className,xr=h.style;return C.createElement("div",{className:O()("".concat(Iv),Yt),style:xr},x?C.createElement(zb,{labels:A,labelUnit:dt,colors:le}):C.createElement(Zb,{labels:A,labelUnit:dt,colors:le}))}Ub.defaultProps={isContinuous:!1,labelUnit:""};var R0=m(67135),oy={point:R0.DrawPoint,line:R0.DrawLine,polygon:R0.DrawPolygon,rect:R0.DrawRect,circle:R0.DrawCircle};function ym(h){return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},ym(h)}function d_(h,x){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(h);x&&(le=le.filter(function(dt){return Object.getOwnPropertyDescriptor(h,dt).enumerable})),A.push.apply(A,le)}return A}function sy(h){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?d_(Object(A),!0).forEach(function(le){$b(h,le,A[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):d_(Object(A)).forEach(function(le){Object.defineProperty(h,le,Object.getOwnPropertyDescriptor(A,le))})}return h}function $b(h,x,A){return x=jb(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function jb(h){var x=ug(h,"string");return ym(x)==="symbol"?x:String(x)}function ug(h,x){if(ym(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(ym(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}function _m(h,x){return Wb(h)||Gb(h,x)||Vb(h,x)||Hb()}function Hb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vb(h,x){if(h){if(typeof h=="string")return p_(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return p_(h,x)}}function p_(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Gb(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Wb(h){if(Array.isArray(h))return h}var uy=function(x){var A=useScene(),le=useState(function(){var Fo,ho;return(Fo=x==null||(ho=x.options)===null||ho===void 0?void 0:ho.initialData)!==null&&Fo!==void 0?Fo:[]}),dt=_m(le,2),Yt=dt[0],xr=dt[1],Tr=useMemo(function(){if(!A)return console.error("useDraw \u53EA\u80FD\u4F7F\u7528\u5728 LarkMap \u5BB9\u5668\u4E2D"),null;var Fo=DRAW_TYPE_MAP[x.type],ho=new Fo(A,sy(sy({},x.options),{},{initialData:Yt}));return ho},[A,JSON.stringify(x.options),x.type]),Jr=useState(Tr.isEnable()),Zn=_m(Jr,2),li=Zn[0],da=Zn[1];useEffect(function(){var Fo=function(){return da(!0)},ho=function(){return da(!1)},ns=function(us){xr(us)};return Tr==null||Tr.setData(Yt),Tr==null||Tr.on(DrawEvent.Enable,Fo),Tr==null||Tr.on(DrawEvent.Disable,ho),Tr==null||Tr.on(DrawEvent.Change,ns),function(){xr(Tr.getData()),Tr==null||Tr.off(DrawEvent.Enable,Fo),Tr==null||Tr.off(DrawEvent.Disable,ho),Tr==null||Tr.off(DrawEvent.Change,ns),Tr==null||Tr.destroy()}},[Tr]);var ro=useCallback(function(Fo){Tr==null||Tr.setData(Fo),xr(Fo)},[Tr]),Xo=useMemo(function(){return{enable:Tr==null?void 0:Tr.enable.bind(Tr),disable:Tr==null?void 0:Tr.disable.bind(Tr),getDrawData:Tr==null?void 0:Tr.getData.bind(Tr)}},[Tr]);return sy({draw:Tr,drawData:Yt,setDrawData:ro,isEnable:li},Xo)};function Rv(h){return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},Rv(h)}function L0(h,x){return Qb(h)||Yb(h,x)||Kb(h,x)||Xb()}function Xb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kb(h,x){if(h){if(typeof h=="string")return lg(h,x);var A=Object.prototype.toString.call(h).slice(8,-1);if(A==="Object"&&h.constructor&&(A=h.constructor.name),A==="Map"||A==="Set")return Array.from(h);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return lg(h,x)}}function lg(h,x){(x==null||x>h.length)&&(x=h.length);for(var A=0,le=new Array(x);A<x;A++)le[A]=h[A];return le}function Yb(h,x){var A=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(A!=null){var le,dt,Yt,xr,Tr=[],Jr=!0,Zn=!1;try{if(Yt=(A=A.call(h)).next,x===0){if(Object(A)!==A)return;Jr=!1}else for(;!(Jr=(le=Yt.call(A)).done)&&(Tr.push(le.value),Tr.length!==x);Jr=!0);}catch(li){Zn=!0,dt=li}finally{try{if(!Jr&&A.return!=null&&(xr=A.return(),Object(xr)!==xr))return}finally{if(Zn)throw dt}}return Tr}}function Qb(h){if(Array.isArray(h))return h}function v_(h,x){var A=Object.keys(h);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(h);x&&(le=le.filter(function(dt){return Object.getOwnPropertyDescriptor(h,dt).enumerable})),A.push.apply(A,le)}return A}function m_(h){for(var x=1;x<arguments.length;x++){var A=arguments[x]!=null?arguments[x]:{};x%2?v_(Object(A),!0).forEach(function(le){Jb(h,le,A[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(A)):v_(Object(A)).forEach(function(le){Object.defineProperty(h,le,Object.getOwnPropertyDescriptor(A,le))})}return h}function Jb(h,x,A){return x=qb(x),x in h?Object.defineProperty(h,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[x]=A,h}function qb(h){var x=e2(h,"string");return Rv(x)==="symbol"?x:String(x)}function e2(h,x){if(Rv(h)!=="object"||h===null)return h;var A=h[Symbol.toPrimitive];if(A!==void 0){var le=A.call(h,x||"default");if(Rv(le)!=="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(h)}var hE=function(x,A){var le=x.point,dt=x.line,Yt=x.polygon,xr=x.rect,Tr=x.circle,Jr=!!le,Zn=!!dt,li=!!Yt,da=!!xr,ro=!!Tr,Xo=useCallback(function(Su){return m_(m_({},A),Su instanceof Object?Su:{})},[A]),Fo=useDraw({type:"point",options:Xo(le)}),ho=useDraw({type:"line",options:Xo(dt)}),ns=useDraw({type:"polygon",options:Xo(Yt)}),vs=useDraw({type:"rect",options:Xo(xr)}),us=useDraw({type:"circle",options:Xo(Tr)}),Eu=useMemo(function(){return fromPairs(toPairs({point:Jr?Fo:void 0,line:Zn?ho:void 0,polygon:li?ns:void 0,rect:da?vs:void 0,circle:ro?us:void 0}).filter(function(Su){var zu=L0(Su,2),uc=zu[1];return!!uc}))},[Fo,ho,ns,vs,us,Jr,Zn,li,da,ro]),Nu=useMemo(function(){return fromPairs(toPairs(Eu).map(function(Su){var zu=L0(Su,2),uc=zu[0],Ui=zu[1];return[uc,Ui.draw]}))},[Eu]),ul=useMemo(function(){return fromPairs(toPairs(Eu).map(function(Su){var zu=L0(Su,2),uc=zu[0],Ui=zu[1];return[uc,Ui.drawData]}))},[Eu]),sf=useCallback(function(Su){Object.entries(Su).forEach(function(zu){var uc,Ui=L0(zu,2),yi=Ui[0],Pi=Ui[1];(uc=Eu[yi])===null||uc===void 0||uc.setDrawData(Pi)})},[Eu]),Fu=useMemo(function(){var Su,zu;return(Su=(zu=Object.values(Eu).find(function(uc){return uc.isEnable}))===null||zu===void 0?void 0:zu.draw)!==null&&Su!==void 0?Su:null},[Eu]),il=useCallback(function(Su){Object.values(Eu).forEach(function(zu){var uc,Ui;if(zu){var yi=typeof Su=="string"?(uc=(Ui=Eu[Su])===null||Ui===void 0?void 0:Ui.draw)!==null&&uc!==void 0?uc:null:Su;if(!yi){zu.disable();return}var Pi=zu.isEnable;yi===zu.draw?Pi||zu.enable():Pi&&zu.disable()}})},[Eu]);return{drawMap:Nu,drawGroupData:ul,setDrawGroupData:sf,activeDraw:Fu,setActiveDraw:il}}},86500:function(Qe,te,m){"use strict";m.d(te,{T6:function(){return Ae},VD:function(){return re},WE:function(){return L},Yt:function(){return pe},lC:function(){return l},py:function(){return z},rW:function(){return C},s:function(){return O},ve:function(){return R},vq:function(){return T}});var v=m(90279);function C(fe,ke,je){return{r:(0,v.sh)(fe,255)*255,g:(0,v.sh)(ke,255)*255,b:(0,v.sh)(je,255)*255}}function l(fe,ke,je){fe=(0,v.sh)(fe,255),ke=(0,v.sh)(ke,255),je=(0,v.sh)(je,255);var bt=Math.max(fe,ke,je),ut=Math.min(fe,ke,je),wt=0,se=0,qe=(bt+ut)/2;if(bt===ut)se=0,wt=0;else{var me=bt-ut;switch(se=qe>.5?me/(2-bt-ut):me/(bt+ut),bt){case fe:wt=(ke-je)/me+(ke<je?6:0);break;case ke:wt=(je-fe)/me+2;break;case je:wt=(fe-ke)/me+4;break;default:break}wt/=6}return{h:wt,s:se,l:qe}}function $(fe,ke,je){return je<0&&(je+=1),je>1&&(je-=1),je<1/6?fe+(ke-fe)*(6*je):je<1/2?ke:je<2/3?fe+(ke-fe)*(2/3-je)*6:fe}function R(fe,ke,je){var bt,ut,wt;if(fe=(0,v.sh)(fe,360),ke=(0,v.sh)(ke,100),je=(0,v.sh)(je,100),ke===0)ut=je,wt=je,bt=je;else{var se=je<.5?je*(1+ke):je+ke-je*ke,qe=2*je-se;bt=$(qe,se,fe+1/3),ut=$(qe,se,fe),wt=$(qe,se,fe-1/3)}return{r:bt*255,g:ut*255,b:wt*255}}function z(fe,ke,je){fe=(0,v.sh)(fe,255),ke=(0,v.sh)(ke,255),je=(0,v.sh)(je,255);var bt=Math.max(fe,ke,je),ut=Math.min(fe,ke,je),wt=0,se=bt,qe=bt-ut,me=bt===0?0:qe/bt;if(bt===ut)wt=0;else{switch(bt){case fe:wt=(ke-je)/qe+(ke<je?6:0);break;case ke:wt=(je-fe)/qe+2;break;case je:wt=(fe-ke)/qe+4;break;default:break}wt/=6}return{h:wt,s:me,v:se}}function L(fe,ke,je){fe=(0,v.sh)(fe,360)*6,ke=(0,v.sh)(ke,100),je=(0,v.sh)(je,100);var bt=Math.floor(fe),ut=fe-bt,wt=je*(1-ke),se=je*(1-ut*ke),qe=je*(1-(1-ut)*ke),me=bt%6,_e=[je,se,wt,wt,qe,je][me],Te=[qe,je,je,se,wt,wt][me],ht=[wt,wt,qe,je,je,se][me];return{r:_e*255,g:Te*255,b:ht*255}}function T(fe,ke,je,bt){var ut=[(0,v.FZ)(Math.round(fe).toString(16)),(0,v.FZ)(Math.round(ke).toString(16)),(0,v.FZ)(Math.round(je).toString(16))];return bt&&ut[0].startsWith(ut[0].charAt(1))&&ut[1].startsWith(ut[1].charAt(1))&&ut[2].startsWith(ut[2].charAt(1))?ut[0].charAt(0)+ut[1].charAt(0)+ut[2].charAt(0):ut.join("")}function O(fe,ke,je,bt,ut){var wt=[(0,v.FZ)(Math.round(fe).toString(16)),(0,v.FZ)(Math.round(ke).toString(16)),(0,v.FZ)(Math.round(je).toString(16)),(0,v.FZ)(ue(bt))];return ut&&wt[0].startsWith(wt[0].charAt(1))&&wt[1].startsWith(wt[1].charAt(1))&&wt[2].startsWith(wt[2].charAt(1))&&wt[3].startsWith(wt[3].charAt(1))?wt[0].charAt(0)+wt[1].charAt(0)+wt[2].charAt(0)+wt[3].charAt(0):wt.join("")}function F(fe,ke,je,bt){var ut=[pad2(ue(bt)),pad2(Math.round(fe).toString(16)),pad2(Math.round(ke).toString(16)),pad2(Math.round(je).toString(16))];return ut.join("")}function ue(fe){return Math.round(parseFloat(fe)*255).toString(16)}function Ae(fe){return re(fe)/255}function re(fe){return parseInt(fe,16)}function pe(fe){return{r:fe>>16,g:(fe&65280)>>8,b:fe&255}}},48701:function(Qe,te,m){"use strict";m.d(te,{R:function(){return v}});var v={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},1350:function(Qe,te,m){"use strict";m.d(te,{uA:function(){return $}});var v=m(86500),C=m(48701),l=m(90279);function $(re){var pe={r:0,g:0,b:0},fe=1,ke=null,je=null,bt=null,ut=!1,wt=!1;return typeof re=="string"&&(re=ue(re)),typeof re=="object"&&(Ae(re.r)&&Ae(re.g)&&Ae(re.b)?(pe=(0,v.rW)(re.r,re.g,re.b),ut=!0,wt=String(re.r).substr(-1)==="%"?"prgb":"rgb"):Ae(re.h)&&Ae(re.s)&&Ae(re.v)?(ke=(0,l.JX)(re.s),je=(0,l.JX)(re.v),pe=(0,v.WE)(re.h,ke,je),ut=!0,wt="hsv"):Ae(re.h)&&Ae(re.s)&&Ae(re.l)&&(ke=(0,l.JX)(re.s),bt=(0,l.JX)(re.l),pe=(0,v.ve)(re.h,ke,bt),ut=!0,wt="hsl"),Object.prototype.hasOwnProperty.call(re,"a")&&(fe=re.a)),fe=(0,l.Yq)(fe),{ok:ut,format:re.format||wt,r:Math.min(255,Math.max(pe.r,0)),g:Math.min(255,Math.max(pe.g,0)),b:Math.min(255,Math.max(pe.b,0)),a:fe}}var R="[-\\+]?\\d+%?",z="[-\\+]?\\d*\\.\\d+%?",L="(?:".concat(z,")|(?:").concat(R,")"),T="[\\s|\\(]+(".concat(L,")[,|\\s]+(").concat(L,")[,|\\s]+(").concat(L,")\\s*\\)?"),O="[\\s|\\(]+(".concat(L,")[,|\\s]+(").concat(L,")[,|\\s]+(").concat(L,")[,|\\s]+(").concat(L,")\\s*\\)?"),F={CSS_UNIT:new RegExp(L),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+O),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ue(re){if(re=re.trim().toLowerCase(),re.length===0)return!1;var pe=!1;if(C.R[re])re=C.R[re],pe=!0;else if(re==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var fe=F.rgb.exec(re);return fe?{r:fe[1],g:fe[2],b:fe[3]}:(fe=F.rgba.exec(re),fe?{r:fe[1],g:fe[2],b:fe[3],a:fe[4]}:(fe=F.hsl.exec(re),fe?{h:fe[1],s:fe[2],l:fe[3]}:(fe=F.hsla.exec(re),fe?{h:fe[1],s:fe[2],l:fe[3],a:fe[4]}:(fe=F.hsv.exec(re),fe?{h:fe[1],s:fe[2],v:fe[3]}:(fe=F.hsva.exec(re),fe?{h:fe[1],s:fe[2],v:fe[3],a:fe[4]}:(fe=F.hex8.exec(re),fe?{r:(0,v.VD)(fe[1]),g:(0,v.VD)(fe[2]),b:(0,v.VD)(fe[3]),a:(0,v.T6)(fe[4]),format:pe?"name":"hex8"}:(fe=F.hex6.exec(re),fe?{r:(0,v.VD)(fe[1]),g:(0,v.VD)(fe[2]),b:(0,v.VD)(fe[3]),format:pe?"name":"hex"}:(fe=F.hex4.exec(re),fe?{r:(0,v.VD)(fe[1]+fe[1]),g:(0,v.VD)(fe[2]+fe[2]),b:(0,v.VD)(fe[3]+fe[3]),a:(0,v.T6)(fe[4]+fe[4]),format:pe?"name":"hex8"}:(fe=F.hex3.exec(re),fe?{r:(0,v.VD)(fe[1]+fe[1]),g:(0,v.VD)(fe[2]+fe[2]),b:(0,v.VD)(fe[3]+fe[3]),format:pe?"name":"hex"}:!1)))))))))}function Ae(re){return Boolean(F.CSS_UNIT.exec(String(re)))}},10274:function(Qe,te,m){"use strict";m.d(te,{C:function(){return R}});var v=m(86500),C=m(48701),l=m(1350),$=m(90279),R=function(){function L(T,O){T===void 0&&(T=""),O===void 0&&(O={});var F;if(T instanceof L)return T;typeof T=="number"&&(T=(0,v.Yt)(T)),this.originalInput=T;var ue=(0,l.uA)(T);this.originalInput=T,this.r=ue.r,this.g=ue.g,this.b=ue.b,this.a=ue.a,this.roundA=Math.round(100*this.a)/100,this.format=(F=O.format)!==null&&F!==void 0?F:ue.format,this.gradientType=O.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=ue.ok}return L.prototype.isDark=function(){return this.getBrightness()<128},L.prototype.isLight=function(){return!this.isDark()},L.prototype.getBrightness=function(){var T=this.toRgb();return(T.r*299+T.g*587+T.b*114)/1e3},L.prototype.getLuminance=function(){var T=this.toRgb(),O,F,ue,Ae=T.r/255,re=T.g/255,pe=T.b/255;return Ae<=.03928?O=Ae/12.92:O=Math.pow((Ae+.055)/1.055,2.4),re<=.03928?F=re/12.92:F=Math.pow((re+.055)/1.055,2.4),pe<=.03928?ue=pe/12.92:ue=Math.pow((pe+.055)/1.055,2.4),.2126*O+.7152*F+.0722*ue},L.prototype.getAlpha=function(){return this.a},L.prototype.setAlpha=function(T){return this.a=(0,$.Yq)(T),this.roundA=Math.round(100*this.a)/100,this},L.prototype.isMonochrome=function(){var T=this.toHsl().s;return T===0},L.prototype.toHsv=function(){var T=(0,v.py)(this.r,this.g,this.b);return{h:T.h*360,s:T.s,v:T.v,a:this.a}},L.prototype.toHsvString=function(){var T=(0,v.py)(this.r,this.g,this.b),O=Math.round(T.h*360),F=Math.round(T.s*100),ue=Math.round(T.v*100);return this.a===1?"hsv(".concat(O,", ").concat(F,"%, ").concat(ue,"%)"):"hsva(".concat(O,", ").concat(F,"%, ").concat(ue,"%, ").concat(this.roundA,")")},L.prototype.toHsl=function(){var T=(0,v.lC)(this.r,this.g,this.b);return{h:T.h*360,s:T.s,l:T.l,a:this.a}},L.prototype.toHslString=function(){var T=(0,v.lC)(this.r,this.g,this.b),O=Math.round(T.h*360),F=Math.round(T.s*100),ue=Math.round(T.l*100);return this.a===1?"hsl(".concat(O,", ").concat(F,"%, ").concat(ue,"%)"):"hsla(".concat(O,", ").concat(F,"%, ").concat(ue,"%, ").concat(this.roundA,")")},L.prototype.toHex=function(T){return T===void 0&&(T=!1),(0,v.vq)(this.r,this.g,this.b,T)},L.prototype.toHexString=function(T){return T===void 0&&(T=!1),"#"+this.toHex(T)},L.prototype.toHex8=function(T){return T===void 0&&(T=!1),(0,v.s)(this.r,this.g,this.b,this.a,T)},L.prototype.toHex8String=function(T){return T===void 0&&(T=!1),"#"+this.toHex8(T)},L.prototype.toHexShortString=function(T){return T===void 0&&(T=!1),this.a===1?this.toHexString(T):this.toHex8String(T)},L.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},L.prototype.toRgbString=function(){var T=Math.round(this.r),O=Math.round(this.g),F=Math.round(this.b);return this.a===1?"rgb(".concat(T,", ").concat(O,", ").concat(F,")"):"rgba(".concat(T,", ").concat(O,", ").concat(F,", ").concat(this.roundA,")")},L.prototype.toPercentageRgb=function(){var T=function(O){return"".concat(Math.round((0,$.sh)(O,255)*100),"%")};return{r:T(this.r),g:T(this.g),b:T(this.b),a:this.a}},L.prototype.toPercentageRgbString=function(){var T=function(O){return Math.round((0,$.sh)(O,255)*100)};return this.a===1?"rgb(".concat(T(this.r),"%, ").concat(T(this.g),"%, ").concat(T(this.b),"%)"):"rgba(".concat(T(this.r),"%, ").concat(T(this.g),"%, ").concat(T(this.b),"%, ").concat(this.roundA,")")},L.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var T="#"+(0,v.vq)(this.r,this.g,this.b,!1),O=0,F=Object.entries(C.R);O<F.length;O++){var ue=F[O],Ae=ue[0],re=ue[1];if(T===re)return Ae}return!1},L.prototype.toString=function(T){var O=Boolean(T);T=T!=null?T:this.format;var F=!1,ue=this.a<1&&this.a>=0,Ae=!O&&ue&&(T.startsWith("hex")||T==="name");return Ae?T==="name"&&this.a===0?this.toName():this.toRgbString():(T==="rgb"&&(F=this.toRgbString()),T==="prgb"&&(F=this.toPercentageRgbString()),(T==="hex"||T==="hex6")&&(F=this.toHexString()),T==="hex3"&&(F=this.toHexString(!0)),T==="hex4"&&(F=this.toHex8String(!0)),T==="hex8"&&(F=this.toHex8String()),T==="name"&&(F=this.toName()),T==="hsl"&&(F=this.toHslString()),T==="hsv"&&(F=this.toHsvString()),F||this.toHexString())},L.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},L.prototype.clone=function(){return new L(this.toString())},L.prototype.lighten=function(T){T===void 0&&(T=10);var O=this.toHsl();return O.l+=T/100,O.l=(0,$.V2)(O.l),new L(O)},L.prototype.brighten=function(T){T===void 0&&(T=10);var O=this.toRgb();return O.r=Math.max(0,Math.min(255,O.r-Math.round(255*-(T/100)))),O.g=Math.max(0,Math.min(255,O.g-Math.round(255*-(T/100)))),O.b=Math.max(0,Math.min(255,O.b-Math.round(255*-(T/100)))),new L(O)},L.prototype.darken=function(T){T===void 0&&(T=10);var O=this.toHsl();return O.l-=T/100,O.l=(0,$.V2)(O.l),new L(O)},L.prototype.tint=function(T){return T===void 0&&(T=10),this.mix("white",T)},L.prototype.shade=function(T){return T===void 0&&(T=10),this.mix("black",T)},L.prototype.desaturate=function(T){T===void 0&&(T=10);var O=this.toHsl();return O.s-=T/100,O.s=(0,$.V2)(O.s),new L(O)},L.prototype.saturate=function(T){T===void 0&&(T=10);var O=this.toHsl();return O.s+=T/100,O.s=(0,$.V2)(O.s),new L(O)},L.prototype.greyscale=function(){return this.desaturate(100)},L.prototype.spin=function(T){var O=this.toHsl(),F=(O.h+T)%360;return O.h=F<0?360+F:F,new L(O)},L.prototype.mix=function(T,O){O===void 0&&(O=50);var F=this.toRgb(),ue=new L(T).toRgb(),Ae=O/100,re={r:(ue.r-F.r)*Ae+F.r,g:(ue.g-F.g)*Ae+F.g,b:(ue.b-F.b)*Ae+F.b,a:(ue.a-F.a)*Ae+F.a};return new L(re)},L.prototype.analogous=function(T,O){T===void 0&&(T=6),O===void 0&&(O=30);var F=this.toHsl(),ue=360/O,Ae=[this];for(F.h=(F.h-(ue*T>>1)+720)%360;--T;)F.h=(F.h+ue)%360,Ae.push(new L(F));return Ae},L.prototype.complement=function(){var T=this.toHsl();return T.h=(T.h+180)%360,new L(T)},L.prototype.monochromatic=function(T){T===void 0&&(T=6);for(var O=this.toHsv(),F=O.h,ue=O.s,Ae=O.v,re=[],pe=1/T;T--;)re.push(new L({h:F,s:ue,v:Ae})),Ae=(Ae+pe)%1;return re},L.prototype.splitcomplement=function(){var T=this.toHsl(),O=T.h;return[this,new L({h:(O+72)%360,s:T.s,l:T.l}),new L({h:(O+216)%360,s:T.s,l:T.l})]},L.prototype.onBackground=function(T){var O=this.toRgb(),F=new L(T).toRgb(),ue=O.a+F.a*(1-O.a);return new L({r:(O.r*O.a+F.r*F.a*(1-O.a))/ue,g:(O.g*O.a+F.g*F.a*(1-O.a))/ue,b:(O.b*O.a+F.b*F.a*(1-O.a))/ue,a:ue})},L.prototype.triad=function(){return this.polyad(3)},L.prototype.tetrad=function(){return this.polyad(4)},L.prototype.polyad=function(T){for(var O=this.toHsl(),F=O.h,ue=[this],Ae=360/T,re=1;re<T;re++)ue.push(new L({h:(F+re*Ae)%360,s:O.s,l:O.l}));return ue},L.prototype.equals=function(T){return this.toRgbString()===new L(T).toRgbString()},L}();function z(L,T){return L===void 0&&(L=""),T===void 0&&(T={}),new R(L,T)}},90279:function(Qe,te,m){"use strict";m.d(te,{FZ:function(){return L},JX:function(){return z},V2:function(){return C},Yq:function(){return R},sh:function(){return v}});function v(T,O){l(T)&&(T="100%");var F=$(T);return T=O===360?T:Math.min(O,Math.max(0,parseFloat(T))),F&&(T=parseInt(String(T*O),10)/100),Math.abs(T-O)<1e-6?1:(O===360?T=(T<0?T%O+O:T%O)/parseFloat(String(O)):T=T%O/parseFloat(String(O)),T)}function C(T){return Math.min(1,Math.max(0,T))}function l(T){return typeof T=="string"&&T.indexOf(".")!==-1&&parseFloat(T)===1}function $(T){return typeof T=="string"&&T.indexOf("%")!==-1}function R(T){return T=parseFloat(T),(isNaN(T)||T<0||T>1)&&(T=1),T}function z(T){return T<=1?"".concat(Number(T)*100,"%"):T}function L(T){return T.length===1?"0"+T:String(T)}},38163:function(Qe){Qe.exports=te;function te(C,l){var $=C&&C.type,R;if($==="FeatureCollection")for(R=0;R<C.features.length;R++)te(C.features[R],l);else if($==="GeometryCollection")for(R=0;R<C.geometries.length;R++)te(C.geometries[R],l);else if($==="Feature")te(C.geometry,l);else if($==="Polygon")m(C.coordinates,l);else if($==="MultiPolygon")for(R=0;R<C.coordinates.length;R++)m(C.coordinates[R],l);return C}function m(C,l){if(C.length!==0){v(C[0],l);for(var $=1;$<C.length;$++)v(C[$],!l)}}function v(C,l){for(var $=0,R=0,z=0,L=C.length,T=L-1;z<L;T=z++){var O=(C[z][0]-C[T][0])*(C[T][1]+C[z][1]),F=$+O;R+=Math.abs($)>=Math.abs(O)?$-F+O:O-F+$,$=F}$+R>=0!=!!l&&C.reverse()}},75550:function(Qe){"use strict";Qe.exports=te;function te(m,v){this.x=m,this.y=v}te.prototype={clone:function(){return new te(this.x,this.y)},add:function(m){return this.clone()._add(m)},sub:function(m){return this.clone()._sub(m)},multByPoint:function(m){return this.clone()._multByPoint(m)},divByPoint:function(m){return this.clone()._divByPoint(m)},mult:function(m){return this.clone()._mult(m)},div:function(m){return this.clone()._div(m)},rotate:function(m){return this.clone()._rotate(m)},rotateAround:function(m,v){return this.clone()._rotateAround(m,v)},matMult:function(m){return this.clone()._matMult(m)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(m){return this.x===m.x&&this.y===m.y},dist:function(m){return Math.sqrt(this.distSqr(m))},distSqr:function(m){var v=m.x-this.x,C=m.y-this.y;return v*v+C*C},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(m){return Math.atan2(this.y-m.y,this.x-m.x)},angleWith:function(m){return this.angleWithSep(m.x,m.y)},angleWithSep:function(m,v){return Math.atan2(this.x*v-this.y*m,this.x*m+this.y*v)},_matMult:function(m){var v=m[0]*this.x+m[1]*this.y,C=m[2]*this.x+m[3]*this.y;return this.x=v,this.y=C,this},_add:function(m){return this.x+=m.x,this.y+=m.y,this},_sub:function(m){return this.x-=m.x,this.y-=m.y,this},_mult:function(m){return this.x*=m,this.y*=m,this},_div:function(m){return this.x/=m,this.y/=m,this},_multByPoint:function(m){return this.x*=m.x,this.y*=m.y,this},_divByPoint:function(m){return this.x/=m.x,this.y/=m.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var m=this.y;return this.y=this.x,this.x=-m,this},_rotate:function(m){var v=Math.cos(m),C=Math.sin(m),l=v*this.x-C*this.y,$=C*this.x+v*this.y;return this.x=l,this.y=$,this},_rotateAround:function(m,v){var C=Math.cos(m),l=Math.sin(m),$=v.x+C*(this.x-v.x)-l*(this.y-v.y),R=v.y+l*(this.x-v.x)+C*(this.y-v.y);return this.x=$,this.y=R,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},te.convert=function(m){return m instanceof te?m:Array.isArray(m)?new te(m[0],m[1]):m}},99874:function(Qe){Qe.exports=te;function te(m,v,C,l){this.cx=3*m,this.bx=3*(C-m)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(l-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=m,this.p1y=l,this.p2x=C,this.p2y=l}te.prototype.sampleCurveX=function(m){return((this.ax*m+this.bx)*m+this.cx)*m},te.prototype.sampleCurveY=function(m){return((this.ay*m+this.by)*m+this.cy)*m},te.prototype.sampleCurveDerivativeX=function(m){return(3*this.ax*m+2*this.bx)*m+this.cx},te.prototype.solveCurveX=function(m,v){typeof v=="undefined"&&(v=1e-6);var C,l,$,R,z;for($=m,z=0;z<8;z++){if(R=this.sampleCurveX($)-m,Math.abs(R)<v)return $;var L=this.sampleCurveDerivativeX($);if(Math.abs(L)<1e-6)break;$=$-R/L}if(C=0,l=1,$=m,$<C)return C;if($>l)return l;for(;C<l;){if(R=this.sampleCurveX($),Math.abs(R-m)<v)return $;m>R?C=$:l=$,$=(l-C)*.5+C}return $},te.prototype.solve=function(m,v){return this.sampleCurveY(this.solveCurveX(m,v))}},38929:function(Qe,te,m){Qe.exports.VectorTile=m(22779),m(66024),m(59701)},22779:function(Qe,te,m){"use strict";var v=m(59701);Qe.exports=C;function C($,R){this.layers=$.readFields(l,{},R)}function l($,R,z){if($===3){var L=new v(z,z.readVarint()+z.pos);L.length&&(R[L.name]=L)}}},66024:function(Qe,te,m){"use strict";var v=m(75550);Qe.exports=C;function C(L,T,O,F,ue){this.properties={},this.extent=O,this.type=0,this._pbf=L,this._geometry=-1,this._keys=F,this._values=ue,L.readFields(l,this,T)}function l(L,T,O){L==1?T.id=O.readVarint():L==2?$(O,T):L==3?T.type=O.readVarint():L==4&&(T._geometry=O.pos)}function $(L,T){for(var O=L.readVarint()+L.pos;L.pos<O;){var F=T._keys[L.readVarint()],ue=T._values[L.readVarint()];T.properties[F]=ue}}C.types=["Unknown","Point","LineString","Polygon"],C.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var T=L.readVarint()+L.pos,O=1,F=0,ue=0,Ae=0,re=[],pe;L.pos<T;){if(F<=0){var fe=L.readVarint();O=fe&7,F=fe>>3}if(F--,O===1||O===2)ue+=L.readSVarint(),Ae+=L.readSVarint(),O===1&&(pe&&re.push(pe),pe=[]),pe.push(new v(ue,Ae));else if(O===7)pe&&pe.push(pe[0].clone());else throw new Error("unknown command "+O)}return pe&&re.push(pe),re},C.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var T=L.readVarint()+L.pos,O=1,F=0,ue=0,Ae=0,re=1/0,pe=-1/0,fe=1/0,ke=-1/0;L.pos<T;){if(F<=0){var je=L.readVarint();O=je&7,F=je>>3}if(F--,O===1||O===2)ue+=L.readSVarint(),Ae+=L.readSVarint(),ue<re&&(re=ue),ue>pe&&(pe=ue),Ae<fe&&(fe=Ae),Ae>ke&&(ke=Ae);else if(O!==7)throw new Error("unknown command "+O)}return[re,fe,pe,ke]},C.prototype.toGeoJSON=function(L,T,O){var F=this.extent*Math.pow(2,O),ue=this.extent*L,Ae=this.extent*T,re=this.loadGeometry(),pe=C.types[this.type],fe,ke;function je(wt){for(var se=0;se<wt.length;se++){var qe=wt[se],me=180-(qe.y+Ae)*360/F;wt[se]=[(qe.x+ue)*360/F-180,360/Math.PI*Math.atan(Math.exp(me*Math.PI/180))-90]}}switch(this.type){case 1:var bt=[];for(fe=0;fe<re.length;fe++)bt[fe]=re[fe][0];re=bt,je(re);break;case 2:for(fe=0;fe<re.length;fe++)je(re[fe]);break;case 3:for(re=R(re),fe=0;fe<re.length;fe++)for(ke=0;ke<re[fe].length;ke++)je(re[fe][ke]);break}re.length===1?re=re[0]:pe="Multi"+pe;var ut={type:"Feature",geometry:{type:pe,coordinates:re},properties:this.properties};return"id"in this&&(ut.id=this.id),ut};function R(L){var T=L.length;if(T<=1)return[L];for(var O=[],F,ue,Ae=0;Ae<T;Ae++){var re=z(L[Ae]);re!==0&&(ue===void 0&&(ue=re<0),ue===re<0?(F&&O.push(F),F=[L[Ae]]):F.push(L[Ae]))}return F&&O.push(F),O}function z(L){for(var T=0,O=0,F=L.length,ue=F-1,Ae,re;O<F;ue=O++)Ae=L[O],re=L[ue],T+=(re.x-Ae.x)*(Ae.y+re.y);return T}},59701:function(Qe,te,m){"use strict";var v=m(66024);Qe.exports=C;function C(R,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=R,this._keys=[],this._values=[],this._features=[],R.readFields(l,this,z),this.length=this._features.length}function l(R,z,L){R===15?z.version=L.readVarint():R===1?z.name=L.readString():R===5?z.extent=L.readVarint():R===2?z._features.push(L.pos):R===3?z._keys.push(L.readString()):R===4&&z._values.push($(L))}function $(R){for(var z=null,L=R.readVarint()+R.pos;R.pos<L;){var T=R.readVarint()>>3;z=T===1?R.readString():T===2?R.readFloat():T===3?R.readDouble():T===4?R.readVarint64():T===5?R.readVarint():T===6?R.readSVarint():T===7?R.readBoolean():null}return z}C.prototype.feature=function(R){if(R<0||R>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[R];var z=this._pbf.readVarint()+this._pbf.pos;return new v(this._pbf,z,this.extent,this._keys,this._values)}},45191:function(Qe,te){"use strict";var m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};te.Z=m},38018:function(Qe,te,m){"use strict";var v=m(9783).default,C=m(5574).default,l=m(96695).default,$=m(52677).default,R=m(19632).default,z=m(62072),L=m(44020),T=m(13615),O=m(92806),F=function(_e){return _e==null},ue=Symbol("encodeFragmentIdentifier");function Ae(me){switch(me.arrayFormat){case"index":return function(Te){return function(ht,We){var Ne=ht.length;return We===void 0||me.skipNull&&We===null||me.skipEmptyString&&We===""?ht:We===null?[].concat(R(ht),[[fe(Te,me),"[",Ne,"]"].join("")]):[].concat(R(ht),[[fe(Te,me),"[",fe(Ne,me),"]=",fe(We,me)].join("")])}};case"bracket":return function(Te){return function(ht,We){return We===void 0||me.skipNull&&We===null||me.skipEmptyString&&We===""?ht:We===null?[].concat(R(ht),[[fe(Te,me),"[]"].join("")]):[].concat(R(ht),[[fe(Te,me),"[]=",fe(We,me)].join("")])}};case"colon-list-separator":return function(Te){return function(ht,We){return We===void 0||me.skipNull&&We===null||me.skipEmptyString&&We===""?ht:We===null?[].concat(R(ht),[[fe(Te,me),":list="].join("")]):[].concat(R(ht),[[fe(Te,me),":list=",fe(We,me)].join("")])}};case"comma":case"separator":case"bracket-separator":{var _e=me.arrayFormat==="bracket-separator"?"[]=":"=";return function(Te){return function(ht,We){return We===void 0||me.skipNull&&We===null||me.skipEmptyString&&We===""?ht:(We=We===null?"":We,ht.length===0?[[fe(Te,me),_e,fe(We,me)].join("")]:[[ht,fe(We,me)].join(me.arrayFormatSeparator)])}}}default:return function(Te){return function(ht,We){return We===void 0||me.skipNull&&We===null||me.skipEmptyString&&We===""?ht:We===null?[].concat(R(ht),[fe(Te,me)]):[].concat(R(ht),[[fe(Te,me),"=",fe(We,me)].join("")])}}}}function re(me){var _e;switch(me.arrayFormat){case"index":return function(Te,ht,We){if(_e=/\[(\d*)\]$/.exec(Te),Te=Te.replace(/\[\d*\]$/,""),!_e){We[Te]=ht;return}We[Te]===void 0&&(We[Te]={}),We[Te][_e[1]]=ht};case"bracket":return function(Te,ht,We){if(_e=/(\[\])$/.exec(Te),Te=Te.replace(/\[\]$/,""),!_e){We[Te]=ht;return}if(We[Te]===void 0){We[Te]=[ht];return}We[Te]=[].concat(We[Te],ht)};case"colon-list-separator":return function(Te,ht,We){if(_e=/(:list)$/.exec(Te),Te=Te.replace(/:list$/,""),!_e){We[Te]=ht;return}if(We[Te]===void 0){We[Te]=[ht];return}We[Te]=[].concat(We[Te],ht)};case"comma":case"separator":return function(Te,ht,We){var Ne=typeof ht=="string"&&ht.includes(me.arrayFormatSeparator),he=typeof ht=="string"&&!Ne&&ke(ht,me).includes(me.arrayFormatSeparator);ht=he?ke(ht,me):ht;var Ve=Ne||he?ht.split(me.arrayFormatSeparator).map(function(ie){return ke(ie,me)}):ht===null?ht:ke(ht,me);We[Te]=Ve};case"bracket-separator":return function(Te,ht,We){var Ne=/(\[\])$/.test(Te);if(Te=Te.replace(/\[\]$/,""),!Ne){We[Te]=ht&&ke(ht,me);return}var he=ht===null?[]:ht.split(me.arrayFormatSeparator).map(function(Ve){return ke(Ve,me)});if(We[Te]===void 0){We[Te]=he;return}We[Te]=[].concat(We[Te],he)};default:return function(Te,ht,We){if(We[Te]===void 0){We[Te]=ht;return}We[Te]=[].concat(We[Te],ht)}}}function pe(me){if(typeof me!="string"||me.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function fe(me,_e){return _e.encode?_e.strict?z(me):encodeURIComponent(me):me}function ke(me,_e){return _e.decode?L(me):me}function je(me){return Array.isArray(me)?me.sort():$(me)==="object"?je(Object.keys(me)).sort(function(_e,Te){return Number(_e)-Number(Te)}).map(function(_e){return me[_e]}):me}function bt(me){var _e=me.indexOf("#");return _e!==-1&&(me=me.slice(0,_e)),me}function ut(me){var _e="",Te=me.indexOf("#");return Te!==-1&&(_e=me.slice(Te)),_e}function wt(me){me=bt(me);var _e=me.indexOf("?");return _e===-1?"":me.slice(_e+1)}function se(me,_e){return _e.parseNumbers&&!Number.isNaN(Number(me))&&typeof me=="string"&&me.trim()!==""?me=Number(me):_e.parseBooleans&&me!==null&&(me.toLowerCase()==="true"||me.toLowerCase()==="false")&&(me=me.toLowerCase()==="true"),me}function qe(me,_e){_e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_e),pe(_e.arrayFormatSeparator);var Te=re(_e),ht=Object.create(null);if(typeof me!="string"||(me=me.trim().replace(/^[?#&]/,""),!me))return ht;var We=l(me.split("&")),Ne;try{for(We.s();!(Ne=We.n()).done;){var he=Ne.value;if(he!==""){var Ve=T(_e.decode?he.replace(/\+/g," "):he,"="),ie=C(Ve,2),ze=ie[0],Le=ie[1];Le=Le===void 0?null:["comma","separator","bracket-separator"].includes(_e.arrayFormat)?Le:ke(Le,_e),Te(ke(ze,_e),Le,ht)}}}catch(we){We.e(we)}finally{We.f()}for(var Re=0,st=Object.keys(ht);Re<st.length;Re++){var vt=st[Re],Dt=ht[vt];if($(Dt)==="object"&&Dt!==null)for(var ar=0,$t=Object.keys(Dt);ar<$t.length;ar++){var ur=$t[ar];Dt[ur]=se(Dt[ur],_e)}else ht[vt]=se(Dt,_e)}return _e.sort===!1?ht:(_e.sort===!0?Object.keys(ht).sort():Object.keys(ht).sort(_e.sort)).reduce(function(we,At){var nt=ht[At];return Boolean(nt)&&$(nt)==="object"&&!Array.isArray(nt)?we[At]=je(nt):we[At]=nt,we},Object.create(null))}te.extract=wt,te.parse=qe,te.stringify=function(me,_e){if(!me)return"";_e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_e),pe(_e.arrayFormatSeparator);for(var Te=function(Le){return _e.skipNull&&F(me[Le])||_e.skipEmptyString&&me[Le]===""},ht=Ae(_e),We={},Ne=0,he=Object.keys(me);Ne<he.length;Ne++){var Ve=he[Ne];Te(Ve)||(We[Ve]=me[Ve])}var ie=Object.keys(We);return _e.sort!==!1&&ie.sort(_e.sort),ie.map(function(ze){var Le=me[ze];return Le===void 0?"":Le===null?fe(ze,_e):Array.isArray(Le)?Le.length===0&&_e.arrayFormat==="bracket-separator"?fe(ze,_e)+"[]":Le.reduce(ht(ze),[]).join("&"):fe(ze,_e)+"="+fe(Le,_e)}).filter(function(ze){return ze.length>0}).join("&")},te.parseUrl=function(me,_e){_e=Object.assign({decode:!0},_e);var Te=T(me,"#"),ht=C(Te,2),We=ht[0],Ne=ht[1];return Object.assign({url:We.split("?")[0]||"",query:qe(wt(me),_e)},_e&&_e.parseFragmentIdentifier&&Ne?{fragmentIdentifier:ke(Ne,_e)}:{})},te.stringifyUrl=function(me,_e){_e=Object.assign(v({encode:!0,strict:!0},ue,!0),_e);var Te=bt(me.url).split("?")[0]||"",ht=te.extract(me.url),We=te.parse(ht,{sort:!1}),Ne=Object.assign(We,me.query),he=te.stringify(Ne,_e);he&&(he="?".concat(he));var Ve=ut(me.url);return me.fragmentIdentifier&&(Ve="#".concat(_e[ue]?fe(me.fragmentIdentifier,_e):me.fragmentIdentifier)),"".concat(Te).concat(he).concat(Ve)},te.pick=function(me,_e,Te){Te=Object.assign(v({parseFragmentIdentifier:!0},ue,!1),Te);var ht=te.parseUrl(me,Te),We=ht.url,Ne=ht.query,he=ht.fragmentIdentifier;return te.stringifyUrl({url:We,query:O(Ne,_e),fragmentIdentifier:he},Te)},te.exclude=function(me,_e,Te){var ht=Array.isArray(_e)?function(We){return!_e.includes(We)}:function(We,Ne){return!_e(We,Ne)};return te.pick(me,ht,Te)}},13615:function(Qe){"use strict";Qe.exports=function(te,m){if(!(typeof te=="string"&&typeof m=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(m==="")return[te];var v=te.indexOf(m);return v===-1?[te]:[te.slice(0,v),te.slice(v+m.length)]}},62072:function(Qe){"use strict";Qe.exports=function(te){return encodeURIComponent(te).replace(/[!'()*]/g,function(m){return"%".concat(m.charCodeAt(0).toString(16).toUpperCase())})}},8745:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return R}});var v=m(21770),C=m(67294),l=m(53124),$=m(32170);function R(z,L,T){return function(F){const{prefixCls:ue,style:Ae}=F,re=C.useRef(null),[pe,fe]=C.useState(0),[ke,je]=C.useState(0),[bt,ut]=(0,v.Z)(!1,{value:F.open}),{getPrefixCls:wt}=C.useContext(l.E_),se=wt(L||"select",ue);return C.useEffect(()=>{if(ut(!0),typeof ResizeObserver!="undefined"){const qe=new ResizeObserver(_e=>{const Te=_e[0].target;fe(Te.offsetHeight+8),je(Te.offsetWidth)}),me=setInterval(()=>{var _e;const Te=T?`.${T(se)}`:`.${se}-dropdown`,ht=(_e=re.current)===null||_e===void 0?void 0:_e.querySelector(Te);ht&&(clearInterval(me),qe.observe(ht))},10);return()=>{clearInterval(me),qe.disconnect()}}},[]),C.createElement($.ZP,{theme:{token:{motionDurationFast:"0.01s",motionDurationMid:"0.01s",motionDurationSlow:"0.01s"}}},C.createElement("div",{ref:re,style:{paddingBottom:pe,position:"relative",width:"fit-content",minWidth:ke}},C.createElement(z,Object.assign({},F,{style:Object.assign(Object.assign({},Ae),{margin:0}),open:bt,visible:bt,getPopupContainer:()=>re.current}))))}}},37193:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return z}});var v=m(67294),C=m(98924);const l=()=>(0,C.Z)()&&window.document.documentElement;let $;const R=()=>{if(!l())return!1;if($!==void 0)return $;const L=document.createElement("div");return L.style.display="flex",L.style.flexDirection="column",L.style.rowGap="1px",L.appendChild(document.createElement("div")),L.appendChild(document.createElement("div")),document.body.appendChild(L),$=L.scrollHeight===1,document.body.removeChild(L),$};var z=()=>{const[L,T]=v.useState(!1);return v.useEffect(()=>{T(R())},[]),L}},33603:function(Qe,te,m){"use strict";m.d(te,{mL:function(){return T},q0:function(){return L}});const v=()=>({height:0,opacity:0}),C=O=>{const{scrollHeight:F}=O;return{height:F,opacity:1}},l=O=>({height:O?O.offsetHeight:0}),$=(O,F)=>(F==null?void 0:F.deadline)===!0||F.propertyName==="height",R=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:v,onEnterStart:v,onAppearActive:C,onEnterActive:C,onLeaveStart:l,onLeaveActive:v,onAppearEnd:$,onEnterEnd:$,onLeaveEnd:$,motionDeadline:500}},z=null,L=O=>O!==void 0&&(O==="topLeft"||O==="topRight")?"slide-down":"slide-up",T=(O,F,ue)=>ue!==void 0?ue:`${O}-${F}`;te.ZP=R},80636:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return T}});var v=m(43159);const C={adjustX:1,adjustY:1},l={adjustX:0,adjustY:0},$=[0,0];function R(O){return typeof O=="boolean"?O?C:l:Object.assign(Object.assign({},l),O)}function z(O,F,ue){switch(O){case"top":case"topLeft":case"topRight":return[0,-(F/2+ue)];case"bottom":case"bottomLeft":case"bottomRight":return[0,F/2+ue];case"left":case"leftTop":case"leftBottom":return[-(F/2+ue),0];case"right":case"rightTop":case"rightBottom":return[F/2+ue,0];default:return[0,0]}}function L(O,F){return[O[0]+F[0],O[1]+F[1]]}function T(O){const{arrowWidth:F,horizontalArrowShift:ue=16,verticalArrowShift:Ae=8,autoAdjustOverflow:re,arrowPointAtCenter:pe,offset:fe}=O,ke=F/2,je={left:{points:["cr","cl"],offset:[-fe,0]},right:{points:["cl","cr"],offset:[fe,0]},top:{points:["bc","tc"],offset:[0,-fe]},bottom:{points:["tc","bc"],offset:[0,fe]},topLeft:{points:["bl","tc"],offset:[-(ue+ke),-fe]},leftTop:{points:["tr","cl"],offset:[-fe,-(Ae+ke)]},topRight:{points:["br","tc"],offset:[ue+ke,-fe]},rightTop:{points:["tl","cr"],offset:[fe,-(Ae+ke)]},bottomRight:{points:["tr","bc"],offset:[ue+ke,fe]},rightBottom:{points:["bl","cr"],offset:[fe,Ae+ke]},bottomLeft:{points:["tl","bc"],offset:[-(ue+ke),fe]},leftBottom:{points:["br","cl"],offset:[-fe,Ae+ke]}};return Object.keys(je).forEach(bt=>{je[bt]=pe?Object.assign(Object.assign({},je[bt]),{offset:L(je[bt].offset,z(bt,F,fe)),overflow:R(re),targetOffset:$}):Object.assign(Object.assign({},v.C[bt]),{offset:L(v.C[bt].offset,z(bt,F,fe)),overflow:R(re)}),je[bt].ignoreShake=!0}),je}},96159:function(Qe,te,m){"use strict";var v;m.d(te,{M2:function(){return $},Tm:function(){return z},l$:function(){return l}});var C=m(67294);const{isValidElement:l}=v||(v=m.t(C,2));function $(L){return L&&l(L)&&L.type===C.Fragment}function R(L,T,O){return l(L)?C.cloneElement(L,typeof O=="function"?O(L.props||{}):O):T}function z(L,T){return R(L,L,T)}},74443:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return z},c:function(){return l}});var v=m(67294),C=m(48012);const l=["xxl","xl","lg","md","sm","xs"],$=L=>({xs:`(max-width: ${L.screenXSMax}px)`,sm:`(min-width: ${L.screenSM}px)`,md:`(min-width: ${L.screenMD}px)`,lg:`(min-width: ${L.screenLG}px)`,xl:`(min-width: ${L.screenXL}px)`,xxl:`(min-width: ${L.screenXXL}px)`}),R=L=>{const T=L,O=[].concat(l).reverse();return O.forEach((F,ue)=>{const Ae=F.toUpperCase(),re=`screen${Ae}Min`,pe=`screen${Ae}`;if(!(T[re]<=T[pe]))throw new Error(`${re}<=${pe} fails : !(${T[re]}<=${T[pe]})`);if(ue<O.length-1){const fe=`screen${Ae}Max`;if(!(T[pe]<=T[fe]))throw new Error(`${pe}<=${fe} fails : !(${T[pe]}<=${T[fe]})`);const je=`screen${O[ue+1].toUpperCase()}Min`;if(!(T[fe]<=T[je]))throw new Error(`${fe}<=${je} fails : !(${T[fe]}<=${T[je]})`)}}),L};function z(){const[,L]=(0,C.dQ)(),T=$(R(L));return v.useMemo(()=>{const O=new Map;let F=-1,ue={};return{matchHandlers:{},dispatch(Ae){return ue=Ae,O.forEach(re=>re(ue)),O.size>=1},subscribe(Ae){return O.size||this.register(),F+=1,O.set(F,Ae),Ae(ue),F},unsubscribe(Ae){O.delete(Ae),O.size||this.unregister()},unregister(){Object.keys(T).forEach(Ae=>{const re=T[Ae],pe=this.matchHandlers[re];pe==null||pe.mql.removeListener(pe==null?void 0:pe.listener)}),O.clear()},register(){Object.keys(T).forEach(Ae=>{const re=T[Ae],pe=ke=>{let{matches:je}=ke;this.dispatch(Object.assign(Object.assign({},ue),{[Ae]:je}))},fe=window.matchMedia(re);fe.addListener(pe),this.matchHandlers[re]={mql:fe,listener:pe},pe(fe)})},responsiveMap:T}},[L])}},9708:function(Qe,te,m){"use strict";m.d(te,{F:function(){return R},Z:function(){return $}});var v=m(94184),C=m.n(v);const l=null;function $(z,L,T){return C()({[`${z}-status-success`]:L==="success",[`${z}-status-warning`]:L==="warning",[`${z}-status-error`]:L==="error",[`${z}-status-validating`]:L==="validating",[`${z}-has-feedback`]:T})}const R=(z,L)=>L||z},45353:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return qe}});var v=m(94184),C=m.n(v),l=m(42550),$=m(5110),R=m(67294),z=m(53124),L=m(96159),T=m(67968);const O=me=>{const{componentCls:_e,colorPrimary:Te}=me;return{[_e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${Te})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${me.motionEaseOutCirc}`,`opacity 2s ${me.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}};var F=(0,T.Z)("Wave",me=>[O(me)]),ue=m(62874),Ae=m(75164),re=m(38135);function pe(me){const _e=(me||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return _e&&_e[1]&&_e[2]&&_e[3]?!(_e[1]===_e[2]&&_e[2]===_e[3]):!0}function fe(me){return me&&me!=="#fff"&&me!=="#ffffff"&&me!=="rgb(255, 255, 255)"&&me!=="rgba(255, 255, 255, 1)"&&pe(me)&&!/rgba\((?:\d*, ){3}0\)/.test(me)&&me!=="transparent"}function ke(me){const{borderTopColor:_e,borderColor:Te,backgroundColor:ht}=getComputedStyle(me);return fe(_e)?_e:fe(Te)?Te:fe(ht)?ht:null}function je(me){return Number.isNaN(me)?0:me}const bt=me=>{const{className:_e,target:Te}=me,ht=R.useRef(null),[We,Ne]=R.useState(null),[he,Ve]=R.useState([]),[ie,ze]=R.useState(0),[Le,Re]=R.useState(0),[st,vt]=R.useState(0),[Dt,ar]=R.useState(0),[$t,ur]=R.useState(!1),we={left:ie,top:Le,width:st,height:Dt,borderRadius:he.map(nt=>`${nt}px`).join(" ")};We&&(we["--wave-color"]=We);function At(){const nt=getComputedStyle(Te);Ne(ke(Te));const Lt=nt.position==="static",{borderLeftWidth:St,borderTopWidth:Ut}=nt;ze(Lt?Te.offsetLeft:je(-parseFloat(St))),Re(Lt?Te.offsetTop:je(-parseFloat(Ut))),vt(Te.offsetWidth),ar(Te.offsetHeight);const{borderTopLeftRadius:lt,borderTopRightRadius:Et,borderBottomLeftRadius:Zt,borderBottomRightRadius:Be}=nt;Ve([lt,Et,Be,Zt].map(He=>je(parseFloat(He))))}return R.useEffect(()=>{if(Te){const nt=(0,Ae.Z)(()=>{At(),ur(!0)});let Lt;return typeof ResizeObserver!="undefined"&&(Lt=new ResizeObserver(At),Lt.observe(Te)),()=>{Ae.Z.cancel(nt),Lt==null||Lt.disconnect()}}},[]),$t?R.createElement(ue.Z,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(nt,Lt)=>{var St;if(Lt.deadline||Lt.propertyName==="opacity"){const Ut=(St=ht.current)===null||St===void 0?void 0:St.parentElement;(0,re.v)(Ut).then(()=>{var lt;(lt=Ut.parentElement)===null||lt===void 0||lt.removeChild(Ut)})}return!1}},nt=>{let{className:Lt}=nt;return R.createElement("div",{ref:ht,className:C()(_e,Lt),style:we})}):null};function ut(me,_e){const Te=document.createElement("div");Te.style.position="absolute",Te.style.left="0px",Te.style.top="0px",me==null||me.insertBefore(Te,me==null?void 0:me.firstChild),(0,re.s)(R.createElement(bt,{target:me,className:_e}),Te)}function wt(me,_e){function Te(){const ht=me.current;ut(ht,_e)}return Te}var qe=me=>{const{children:_e,disabled:Te}=me,{getPrefixCls:ht}=(0,R.useContext)(z.E_),We=(0,R.useRef)(null),Ne=ht("wave"),[,he]=F(Ne),Ve=wt(We,C()(Ne,he));if(R.useEffect(()=>{const ze=We.current;if(!ze||ze.nodeType!==1||Te)return;const Le=Re=>{Re.target.tagName==="INPUT"||!(0,$.Z)(Re.target)||!ze.getAttribute||ze.getAttribute("disabled")||ze.disabled||ze.className.includes("disabled")||ze.className.includes("-leave")||Ve()};return ze.addEventListener("click",Le,!0),()=>{ze.removeEventListener("click",Le,!0)}},[Te]),!R.isValidElement(_e))return _e!=null?_e:null;const ie=(0,l.Yr)(_e)?(0,l.sQ)(_e.ref,We):We;return(0,L.Tm)(_e,{ref:ie})}},18662:function(Qe,te,m){"use strict";m.d(te,{ZP:function(){return br}});var v=m(94184),C=m.n(v),l=m(98423),$=m(67294),R=m(53124),z=m(98866),L=m(97647),T=m(4173),O=m(45353),F=m(48012),ue=function(Nt,Pr){var _r={};for(var kr in Nt)Object.prototype.hasOwnProperty.call(Nt,kr)&&Pr.indexOf(kr)<0&&(_r[kr]=Nt[kr]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var zt=0,kr=Object.getOwnPropertySymbols(Nt);zt<kr.length;zt++)Pr.indexOf(kr[zt])<0&&Object.prototype.propertyIsEnumerable.call(Nt,kr[zt])&&(_r[kr[zt]]=Nt[kr[zt]]);return _r};const Ae=$.createContext(void 0);var pe=Nt=>{const{getPrefixCls:Pr,direction:_r}=$.useContext(R.E_),{prefixCls:kr,size:zt,className:mr}=Nt,Or=ue(Nt,["prefixCls","size","className"]),X=Pr("btn-group",kr),[,,Nr]=(0,F.dQ)();let Xe="";switch(zt){case"large":Xe="lg";break;case"small":Xe="sm";break;case"middle":case void 0:break;default:}const xe=C()(X,{[`${X}-${Xe}`]:Xe,[`${X}-rtl`]:_r==="rtl"},mr,Nr);return $.createElement(Ae.Provider,{value:zt},$.createElement("div",Object.assign({},Or,{className:xe})))},fe=m(96159);const ke=/^[\u4e00-\u9fa5]{2}$/,je=ke.test.bind(ke);function bt(Nt){return typeof Nt=="string"}function ut(Nt){return Nt==="text"||Nt==="link"}function wt(Nt,Pr){if(Nt==null)return;const _r=Pr?" ":"";return typeof Nt!="string"&&typeof Nt!="number"&&bt(Nt.type)&&je(Nt.props.children)?(0,fe.Tm)(Nt,{children:Nt.props.children.split("").join(_r)}):typeof Nt=="string"?je(Nt)?$.createElement("span",null,Nt.split("").join(_r)):$.createElement("span",null,Nt):(0,fe.M2)(Nt)?$.createElement("span",null,Nt):Nt}function se(Nt,Pr){let _r=!1;const kr=[];return $.Children.forEach(Nt,zt=>{const mr=typeof zt,Or=mr==="string"||mr==="number";if(_r&&Or){const X=kr.length-1,Nr=kr[X];kr[X]=`${Nr}${zt}`}else kr.push(zt);_r=Or}),$.Children.map(kr,zt=>wt(zt,Pr))}const qe=null,me=null,_e=null;var Te=m(84273),ht=m(62874);const We=()=>({width:0,opacity:0,transform:"scale(0)"}),Ne=Nt=>({width:Nt.scrollWidth,opacity:1,transform:"scale(1)"});var Ve=Nt=>{let{prefixCls:Pr,loading:_r,existIcon:kr}=Nt;const zt=!!_r;return kr?$.createElement("span",{className:`${Pr}-loading-icon`},$.createElement(Te.Z,null)):$.createElement(ht.Z,{visible:zt,motionName:`${Pr}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:We,onAppearActive:Ne,onEnterStart:We,onEnterActive:Ne,onLeaveStart:Ne,onLeaveActive:We},(mr,Or)=>{let{className:X,style:Nr}=mr;return $.createElement("span",{className:`${Pr}-loading-icon`,style:Nr,ref:Or},$.createElement(Te.Z,{className:X}))})},ie=m(45503),ze=m(67968);const Le=(Nt,Pr)=>({[`> span, > ${Nt}`]:{"&:not(:last-child)":{[`&, & > ${Nt}`]:{"&:not(:disabled)":{borderInlineEndColor:Pr}}},"&:not(:first-child)":{[`&, & > ${Nt}`]:{"&:not(:disabled)":{borderInlineStartColor:Pr}}}}});var st=Nt=>{const{componentCls:Pr,fontSize:_r,lineWidth:kr,colorPrimaryHover:zt,colorErrorHover:mr}=Nt;return{[`${Pr}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${Pr}`]:{"&:not(:last-child)":{[`&, & > ${Pr}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-kr,[`&, & > ${Pr}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[Pr]:{position:"relative",zIndex:1,[`&:hover,
          &:focus,
          &:active`]:{zIndex:2},"&[disabled]":{zIndex:0}},[`${Pr}-icon-only`]:{fontSize:_r}},Le(`${Pr}-primary`,zt),Le(`${Pr}-danger`,mr)]}},vt=m(14747),Dt=m(80110);function ar(Nt,Pr){return{[`&-item:not(${Pr}-last-item)`]:{marginBottom:-Nt.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function $t(Nt,Pr){return{[`&-item:not(${Pr}-first-item):not(${Pr}-last-item)`]:{borderRadius:0},[`&-item${Pr}-first-item:not(${Pr}-last-item)`]:{[`&, &${Nt}-sm, &${Nt}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${Pr}-last-item:not(${Pr}-first-item)`]:{[`&, &${Nt}-sm, &${Nt}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function ur(Nt){const Pr=`${Nt.componentCls}-compact-vertical`;return{[Pr]:Object.assign(Object.assign({},ar(Nt,Pr)),$t(Nt.componentCls,Pr))}}const we=Nt=>{const{componentCls:Pr,iconCls:_r}=Nt;return{[Pr]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${Nt.lineWidth}px ${Nt.lineType} transparent`,cursor:"pointer",transition:`all ${Nt.motionDurationMid} ${Nt.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:Nt.lineHeight,color:Nt.colorText,"> span":{display:"inline-block"},[`> ${_r} + span, > span + ${_r}`]:{marginInlineStart:Nt.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},(0,vt.Qy)(Nt)),[`&-icon-only${Pr}-compact-item`]:{flex:"none"},[`&-compact-item${Pr}-primary`]:{[`&:not([disabled]) + ${Pr}-compact-item${Pr}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-Nt.lineWidth,insetInlineStart:-Nt.lineWidth,display:"inline-block",width:Nt.lineWidth,height:`calc(100% + ${Nt.lineWidth*2}px)`,backgroundColor:Nt.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${Pr}-primary`]:{[`&:not([disabled]) + ${Pr}-compact-vertical-item${Pr}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-Nt.lineWidth,insetInlineStart:-Nt.lineWidth,display:"inline-block",width:`calc(100% + ${Nt.lineWidth*2}px)`,height:Nt.lineWidth,backgroundColor:Nt.colorPrimaryHover,content:'""'}}}}}}},At=(Nt,Pr)=>({"&:not(:disabled)":{"&:hover":Nt,"&:active":Pr}}),nt=Nt=>({minWidth:Nt.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Lt=Nt=>({borderRadius:Nt.controlHeight,paddingInlineStart:Nt.controlHeight/2,paddingInlineEnd:Nt.controlHeight/2}),St=Nt=>({cursor:"not-allowed",borderColor:Nt.colorBorder,color:Nt.colorTextDisabled,backgroundColor:Nt.colorBgContainerDisabled,boxShadow:"none"}),Ut=(Nt,Pr,_r,kr,zt,mr,Or)=>({[`&${Nt}-background-ghost`]:Object.assign(Object.assign({color:Pr||void 0,backgroundColor:"transparent",borderColor:_r||void 0,boxShadow:"none"},At(Object.assign({backgroundColor:"transparent"},mr),Object.assign({backgroundColor:"transparent"},Or))),{"&:disabled":{cursor:"not-allowed",color:kr||void 0,borderColor:zt||void 0}})}),lt=Nt=>({"&:disabled":Object.assign({},St(Nt))}),Et=Nt=>Object.assign({},lt(Nt)),Zt=Nt=>({"&:disabled":{cursor:"not-allowed",color:Nt.colorTextDisabled}}),Be=Nt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Et(Nt)),{backgroundColor:Nt.colorBgContainer,borderColor:Nt.colorBorder,boxShadow:`0 ${Nt.controlOutlineWidth}px 0 ${Nt.controlTmpOutline}`}),At({color:Nt.colorPrimaryHover,borderColor:Nt.colorPrimaryHover},{color:Nt.colorPrimaryActive,borderColor:Nt.colorPrimaryActive})),Ut(Nt.componentCls,Nt.colorBgContainer,Nt.colorBgContainer,Nt.colorTextDisabled,Nt.colorBorder)),{[`&${Nt.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:Nt.colorError,borderColor:Nt.colorError},At({color:Nt.colorErrorHover,borderColor:Nt.colorErrorBorderHover},{color:Nt.colorErrorActive,borderColor:Nt.colorErrorActive})),Ut(Nt.componentCls,Nt.colorError,Nt.colorError,Nt.colorTextDisabled,Nt.colorBorder)),lt(Nt))}),He=Nt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Et(Nt)),{color:Nt.colorTextLightSolid,backgroundColor:Nt.colorPrimary,boxShadow:`0 ${Nt.controlOutlineWidth}px 0 ${Nt.controlOutline}`}),At({color:Nt.colorTextLightSolid,backgroundColor:Nt.colorPrimaryHover},{color:Nt.colorTextLightSolid,backgroundColor:Nt.colorPrimaryActive})),Ut(Nt.componentCls,Nt.colorPrimary,Nt.colorPrimary,Nt.colorTextDisabled,Nt.colorBorder,{color:Nt.colorPrimaryHover,borderColor:Nt.colorPrimaryHover},{color:Nt.colorPrimaryActive,borderColor:Nt.colorPrimaryActive})),{[`&${Nt.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:Nt.colorError,boxShadow:`0 ${Nt.controlOutlineWidth}px 0 ${Nt.colorErrorOutline}`},At({backgroundColor:Nt.colorErrorHover},{backgroundColor:Nt.colorErrorActive})),Ut(Nt.componentCls,Nt.colorError,Nt.colorError,Nt.colorTextDisabled,Nt.colorBorder,{color:Nt.colorErrorHover,borderColor:Nt.colorErrorHover},{color:Nt.colorErrorActive,borderColor:Nt.colorErrorActive})),lt(Nt))}),ft=Nt=>Object.assign(Object.assign({},Be(Nt)),{borderStyle:"dashed"}),Z=Nt=>Object.assign(Object.assign(Object.assign({color:Nt.colorLink},At({color:Nt.colorLinkHover},{color:Nt.colorLinkActive})),Zt(Nt)),{[`&${Nt.componentCls}-dangerous`]:Object.assign(Object.assign({color:Nt.colorError},At({color:Nt.colorErrorHover},{color:Nt.colorErrorActive})),Zt(Nt))}),J=Nt=>Object.assign(Object.assign(Object.assign({},At({color:Nt.colorText,backgroundColor:Nt.colorBgTextHover},{color:Nt.colorText,backgroundColor:Nt.colorBgTextActive})),Zt(Nt)),{[`&${Nt.componentCls}-dangerous`]:Object.assign(Object.assign({color:Nt.colorError},Zt(Nt)),At({color:Nt.colorErrorHover,backgroundColor:Nt.colorErrorBg},{color:Nt.colorErrorHover,backgroundColor:Nt.colorErrorBg}))}),K=Nt=>Object.assign(Object.assign({},St(Nt)),{[`&${Nt.componentCls}:hover`]:Object.assign({},St(Nt))}),B=Nt=>{const{componentCls:Pr}=Nt;return{[`${Pr}-default`]:Be(Nt),[`${Pr}-primary`]:He(Nt),[`${Pr}-dashed`]:ft(Nt),[`${Pr}-link`]:Z(Nt),[`${Pr}-text`]:J(Nt),[`${Pr}-disabled`]:K(Nt)}},j=function(Nt){let Pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:_r,iconCls:kr,controlHeight:zt,fontSize:mr,lineHeight:Or,lineWidth:X,borderRadius:Nr,buttonPaddingHorizontal:Xe}=Nt,xe=Math.max(0,(zt-mr*Or)/2-X),rt=Xe-X,kt=`${_r}-icon-only`;return[{[`${_r}${Pr}`]:{fontSize:mr,height:zt,padding:`${xe}px ${rt}px`,borderRadius:Nr,[`&${kt}`]:{width:zt,paddingInlineStart:0,paddingInlineEnd:0,[`&${_r}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${_r}-loading`]:{opacity:Nt.opacityLoading,cursor:"default"},[`${_r}-loading-icon`]:{transition:`width ${Nt.motionDurationSlow} ${Nt.motionEaseInOut}, opacity ${Nt.motionDurationSlow} ${Nt.motionEaseInOut}`},[`&:not(${kt}) ${_r}-loading-icon > ${kr}`]:{marginInlineEnd:Nt.marginXS}}},{[`${_r}${_r}-circle${Pr}`]:nt(Nt)},{[`${_r}${_r}-round${Pr}`]:Lt(Nt)}]},ee=Nt=>j(Nt),W=Nt=>{const Pr=(0,ie.TS)(Nt,{controlHeight:Nt.controlHeightSM,padding:Nt.paddingXS,buttonPaddingHorizontal:8,borderRadius:Nt.borderRadiusSM});return j(Pr,`${Nt.componentCls}-sm`)},De=Nt=>{const Pr=(0,ie.TS)(Nt,{controlHeight:Nt.controlHeightLG,fontSize:Nt.fontSizeLG,borderRadius:Nt.borderRadiusLG});return j(Pr,`${Nt.componentCls}-lg`)},ot=Nt=>{const{componentCls:Pr}=Nt;return{[Pr]:{[`&${Pr}-block`]:{width:"100%"}}}};var Wt=(0,ze.Z)("Button",Nt=>{const{controlTmpOutline:Pr,paddingContentHorizontal:_r}=Nt,kr=(0,ie.TS)(Nt,{colorOutlineDefault:Pr,buttonPaddingHorizontal:_r});return[we(kr),W(kr),ee(kr),De(kr),ot(kr),B(kr),st(kr),(0,Dt.c)(Nt,{focus:!1}),ur(Nt)]}),Ct=function(Nt,Pr){var _r={};for(var kr in Nt)Object.prototype.hasOwnProperty.call(Nt,kr)&&Pr.indexOf(kr)<0&&(_r[kr]=Nt[kr]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var zt=0,kr=Object.getOwnPropertySymbols(Nt);zt<kr.length;zt++)Pr.indexOf(kr[zt])<0&&Object.prototype.propertyIsEnumerable.call(Nt,kr[zt])&&(_r[kr[zt]]=Nt[kr[zt]]);return _r};function Qt(Nt){return Nt==="danger"?{danger:!0}:{type:Nt}}function ir(Nt){if(typeof Nt=="object"&&Nt){const Pr=Nt==null?void 0:Nt.delay;return{loading:!1,delay:!Number.isNaN(Pr)&&typeof Pr=="number"?Pr:0}}return{loading:!!Nt,delay:0}}const Er=(Nt,Pr)=>{const{loading:_r=!1,prefixCls:kr,type:zt="default",danger:mr,shape:Or="default",size:X,disabled:Nr,className:Xe,rootClassName:xe,children:rt,icon:kt,ghost:cr=!1,block:Ar=!1,htmlType:Lr="button"}=Nt,sr=Ct(Nt,["loading","prefixCls","type","danger","shape","size","disabled","className","rootClassName","children","icon","ghost","block","htmlType"]),{getPrefixCls:Ge,autoInsertSpaceInButton:Gr,direction:on}=$.useContext(R.E_),cn=Ge("btn",kr),[Dn,ci]=Wt(cn),ia=$.useContext(L.Z),Vi=$.useContext(z.Z),On=Nr!=null?Nr:Vi,ji=$.useContext(Ae),oi=$.useMemo(()=>ir(_r),[_r]),[Hi,Ca]=$.useState(oi.loading),[Wi,jo]=$.useState(!1),uo=Pr||$.createRef(),Pn=()=>$.Children.count(rt)===1&&!kt&&!ut(zt),bn=()=>{if(!uo||!uo.current||Gr===!1)return;const Hs=uo.current.textContent;Pn()&&je(Hs)?Wi||jo(!0):Wi&&jo(!1)};$.useEffect(()=>{let Hs=null;oi.delay>0?Hs=window.setTimeout(()=>{Hs=null,Ca(!0)},oi.delay):Ca(oi.loading);function no(){Hs&&(window.clearTimeout(Hs),Hs=null)}return no},[oi]),$.useEffect(bn,[uo]);const Oi=Hs=>{const{onClick:no}=Nt;if(Hi||On){Hs.preventDefault();return}no==null||no(Hs)},di=Gr!==!1,{compactSize:va,compactItemClassnames:wa}=(0,T.ri)(cn,on),Aa={large:"lg",small:"sm",middle:void 0},Ta=va||ji||X||ia,ma=Ta&&Aa[Ta]||"",Da=Hi?"loading":kt,Uo=(0,l.Z)(sr,["navigate"]),ha=Uo.href!==void 0&&On,xa=C()(cn,ci,{[`${cn}-${Or}`]:Or!=="default"&&Or,[`${cn}-${zt}`]:zt,[`${cn}-${ma}`]:ma,[`${cn}-icon-only`]:!rt&&rt!==0&&!!Da,[`${cn}-background-ghost`]:cr&&!ut(zt),[`${cn}-loading`]:Hi,[`${cn}-two-chinese-chars`]:Wi&&di&&!Hi,[`${cn}-block`]:Ar,[`${cn}-dangerous`]:!!mr,[`${cn}-rtl`]:on==="rtl",[`${cn}-disabled`]:ha},wa,Xe,xe),eo=kt&&!Hi?kt:$.createElement(Ve,{existIcon:!!kt,prefixCls:cn,loading:!!Hi}),Ee=rt||rt===0?se(rt,Pn()&&di):null;if(Uo.href!==void 0)return Dn($.createElement("a",Object.assign({},Uo,{className:xa,onClick:Oi,ref:uo}),eo,Ee));let Po=$.createElement("button",Object.assign({},sr,{type:Lr,className:xa,onClick:Oi,disabled:On,ref:uo}),eo,Ee);return ut(zt)||(Po=$.createElement(O.Z,{disabled:!!Hi},Po)),Dn(Po)},Qr=$.forwardRef(Er);Qr.Group=pe,Qr.__ANT_BUTTON=!0;var Mt=Qr,br=Mt},6226:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return Ae}});var v=m(94184),C=m.n(v),l=m(67294),$=m(53124),R=m(99134),z=m(6999),L=function(re,pe){var fe={};for(var ke in re)Object.prototype.hasOwnProperty.call(re,ke)&&pe.indexOf(ke)<0&&(fe[ke]=re[ke]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,ke=Object.getOwnPropertySymbols(re);je<ke.length;je++)pe.indexOf(ke[je])<0&&Object.prototype.propertyIsEnumerable.call(re,ke[je])&&(fe[ke[je]]=re[ke[je]]);return fe};function T(re){return typeof re=="number"?`${re} ${re} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(re)?`0 0 ${re}`:re}const O=["xs","sm","md","lg","xl","xxl"];var ue=l.forwardRef((re,pe)=>{const{getPrefixCls:fe,direction:ke}=l.useContext($.E_),{gutter:je,wrap:bt,supportFlexGap:ut}=l.useContext(R.Z),{prefixCls:wt,span:se,order:qe,offset:me,push:_e,pull:Te,className:ht,children:We,flex:Ne,style:he}=re,Ve=L(re,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),ie=fe("col",wt),[ze,Le]=(0,z.c)(ie);let Re={};O.forEach(Dt=>{let ar={};const $t=re[Dt];typeof $t=="number"?ar.span=$t:typeof $t=="object"&&(ar=$t||{}),delete Ve[Dt],Re=Object.assign(Object.assign({},Re),{[`${ie}-${Dt}-${ar.span}`]:ar.span!==void 0,[`${ie}-${Dt}-order-${ar.order}`]:ar.order||ar.order===0,[`${ie}-${Dt}-offset-${ar.offset}`]:ar.offset||ar.offset===0,[`${ie}-${Dt}-push-${ar.push}`]:ar.push||ar.push===0,[`${ie}-${Dt}-pull-${ar.pull}`]:ar.pull||ar.pull===0,[`${ie}-rtl`]:ke==="rtl"})});const st=C()(ie,{[`${ie}-${se}`]:se!==void 0,[`${ie}-order-${qe}`]:qe,[`${ie}-offset-${me}`]:me,[`${ie}-push-${_e}`]:_e,[`${ie}-pull-${Te}`]:Te},ht,Re,Le),vt={};if(je&&je[0]>0){const Dt=je[0]/2;vt.paddingLeft=Dt,vt.paddingRight=Dt}if(je&&je[1]>0&&!ut){const Dt=je[1]/2;vt.paddingTop=Dt,vt.paddingBottom=Dt}return Ne&&(vt.flex=T(Ne),bt===!1&&!vt.minWidth&&(vt.minWidth=0)),ze(l.createElement("div",Object.assign({},Ve,{style:Object.assign(Object.assign({},vt),he),className:st,ref:pe}),We))}),Ae=ue},98866:function(Qe,te,m){"use strict";m.d(te,{n:function(){return l}});var v=m(67294);const C=v.createContext(!1),l=$=>{let{children:R,disabled:z}=$;const L=v.useContext(C);return v.createElement(C.Provider,{value:z!=null?z:L},R)};te.Z=C},97647:function(Qe,te,m){"use strict";m.d(te,{q:function(){return l}});var v=m(67294);const C=v.createContext(void 0),l=$=>{let{children:R,size:z}=$;const L=v.useContext(C);return v.createElement(C.Provider,{value:z||L},R)};te.Z=C},53124:function(Qe,te,m){"use strict";m.d(te,{C:function(){return R},E_:function(){return $},oR:function(){return C}});var v=m(67294);const C="anticon",l=(z,L)=>L||(z?`ant-${z}`:"ant"),$=v.createContext({getPrefixCls:l,iconPrefixCls:C}),{Consumer:R}=$},88258:function(Qe,te,m){"use strict";var v=m(67294),C=m(53124),l=m(32983);const $=R=>{const{componentName:z}=R,{getPrefixCls:L}=(0,v.useContext)(C.E_),T=L("empty");switch(z){case"Table":case"List":return v.createElement(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return v.createElement(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE,className:`${T}-small`});default:return v.createElement(l.Z,null)}};te.Z=$},32170:function(Qe,te,m){"use strict";m.d(te,{ZP:function(){return Lt},w6:function(){return we}});var v=m(51222),C=m(63017),l=m(24407),$=m(56982),R=m(67294),z=m(88526);let L=Object.assign({},z.Z.Modal);function T(St){St?L=Object.assign(Object.assign({},L),St):L=Object.assign({},z.Z.Modal)}function O(){return L}var F=m(76745);const ue="internalMark";var re=St=>{const{locale:Ut={},children:lt,_ANT_MARK__:Et}=St;R.useEffect(()=>(T(Ut&&Ut.Modal),()=>{T()}),[Ut]);const Zt=R.useMemo(()=>Object.assign(Object.assign({},Ut),{exist:!0}),[Ut]);return R.createElement(F.Z.Provider,{value:Zt},lt)},pe=m(74342),fe=m(48012),ke=m(2790),je=m(53124),bt=m(16397),ut=m(10274),wt=m(98924),se=m(44958);const qe=`-ant-${Date.now()}-${Math.random()}`;function me(St,Ut){const lt={},Et=(He,ft)=>{let Z=He.clone();return Z=(ft==null?void 0:ft(Z))||Z,Z.toRgbString()},Zt=(He,ft)=>{const Z=new ut.C(He),J=(0,bt.R_)(Z.toRgbString());lt[`${ft}-color`]=Et(Z),lt[`${ft}-color-disabled`]=J[1],lt[`${ft}-color-hover`]=J[4],lt[`${ft}-color-active`]=J[6],lt[`${ft}-color-outline`]=Z.clone().setAlpha(.2).toRgbString(),lt[`${ft}-color-deprecated-bg`]=J[0],lt[`${ft}-color-deprecated-border`]=J[2]};if(Ut.primaryColor){Zt(Ut.primaryColor,"primary");const He=new ut.C(Ut.primaryColor),ft=(0,bt.R_)(He.toRgbString());ft.forEach((J,K)=>{lt[`primary-${K+1}`]=J}),lt["primary-color-deprecated-l-35"]=Et(He,J=>J.lighten(35)),lt["primary-color-deprecated-l-20"]=Et(He,J=>J.lighten(20)),lt["primary-color-deprecated-t-20"]=Et(He,J=>J.tint(20)),lt["primary-color-deprecated-t-50"]=Et(He,J=>J.tint(50)),lt["primary-color-deprecated-f-12"]=Et(He,J=>J.setAlpha(J.getAlpha()*.12));const Z=new ut.C(ft[0]);lt["primary-color-active-deprecated-f-30"]=Et(Z,J=>J.setAlpha(J.getAlpha()*.3)),lt["primary-color-active-deprecated-d-02"]=Et(Z,J=>J.darken(2))}return Ut.successColor&&Zt(Ut.successColor,"success"),Ut.warningColor&&Zt(Ut.warningColor,"warning"),Ut.errorColor&&Zt(Ut.errorColor,"error"),Ut.infoColor&&Zt(Ut.infoColor,"info"),`
  :root {
    ${Object.keys(lt).map(He=>`--${St}-${He}: ${lt[He]};`).join(`
`)}
  }
  `.trim()}function _e(St,Ut){const lt=me(St,Ut);(0,wt.Z)()&&(0,se.hq)(lt,`${qe}-dynamic-theme`)}var Te=m(98866),ht=m(91881);function We(St,Ut){const lt=St||{},Et=lt.inherit===!1||!Ut?fe.u_:Ut;return(0,$.Z)(()=>{if(!St)return Ut;const Be=Object.assign({},Et.components);return Object.keys(St.components||{}).forEach(He=>{Be[He]=Object.assign(Object.assign({},Be[He]),St.components[He])}),Object.assign(Object.assign(Object.assign({},Et),lt),{token:Object.assign(Object.assign({},Et.token),lt.token),components:Be})},[lt,Et],(Be,He)=>Be.some((ft,Z)=>{const J=He[Z];return!(0,ht.Z)(ft,J,!0)}))}var Ne=m(97647),he=m(14747),ie=St=>{const[Ut,lt]=(0,fe.dQ)();return(0,v.xy)({theme:Ut,token:lt,hashId:"",path:["ant-design-icons",St]},()=>[{[`.${St}`]:Object.assign(Object.assign({},(0,he.Ro)()),{[`.${St} .${St}-icon`]:{display:"block"}})}])},ze=function(St,Ut){var lt={};for(var Et in St)Object.prototype.hasOwnProperty.call(St,Et)&&Ut.indexOf(Et)<0&&(lt[Et]=St[Et]);if(St!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Zt=0,Et=Object.getOwnPropertySymbols(St);Zt<Et.length;Zt++)Ut.indexOf(Et[Zt])<0&&Object.prototype.propertyIsEnumerable.call(St,Et[Zt])&&(lt[Et[Zt]]=St[Et[Zt]]);return lt};const Le=null,Re=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"],st="ant";let vt,Dt;function ar(){return vt||st}function $t(){return Dt||je.oR}const ur=St=>{let{prefixCls:Ut,iconPrefixCls:lt,theme:Et}=St;Ut!==void 0&&(vt=Ut),lt!==void 0&&(Dt=lt),Et&&_e(ar(),Et)},we=()=>({getPrefixCls:(St,Ut)=>Ut||(St?`${ar()}-${St}`:ar()),getIconPrefixCls:$t,getRootPrefixCls:()=>vt||ar()}),At=St=>{var Ut,lt;const{children:Et,csp:Zt,autoInsertSpaceInButton:Be,form:He,locale:ft,componentSize:Z,direction:J,space:K,virtual:B,dropdownMatchSelectWidth:j,legacyLocale:ee,parentContext:W,iconPrefixCls:De,theme:ot,componentDisabled:Wt}=St,Ct=R.useCallback((Or,X)=>{const{prefixCls:Nr}=St;if(X)return X;const Xe=Nr||W.getPrefixCls("");return Or?`${Xe}-${Or}`:Xe},[W.getPrefixCls,St.prefixCls]),Qt=De||W.iconPrefixCls||je.oR,ir=Qt!==W.iconPrefixCls,Er=Zt||W.csp,Qr=ie(Qt),Mt=We(ot,W.theme),br={csp:Er,autoInsertSpaceInButton:Be,locale:ft||ee,direction:J,space:K,virtual:B,dropdownMatchSelectWidth:j,getPrefixCls:Ct,iconPrefixCls:Qt,theme:Mt},Nt=Object.assign({},W);Object.keys(br).forEach(Or=>{br[Or]!==void 0&&(Nt[Or]=br[Or])}),Re.forEach(Or=>{const X=St[Or];X&&(Nt[Or]=X)});const Pr=(0,$.Z)(()=>Nt,Nt,(Or,X)=>{const Nr=Object.keys(Or),Xe=Object.keys(X);return Nr.length!==Xe.length||Nr.some(xe=>Or[xe]!==X[xe])}),_r=R.useMemo(()=>({prefixCls:Qt,csp:Er}),[Qt,Er]);let kr=ir?Qr(Et):Et,zt={};ft&&(zt=((Ut=ft.Form)===null||Ut===void 0?void 0:Ut.defaultValidateMessages)||((lt=z.Z.Form)===null||lt===void 0?void 0:lt.defaultValidateMessages)||{}),He&&He.validateMessages&&(zt=Object.assign(Object.assign({},zt),He.validateMessages)),Object.keys(zt).length>0&&(kr=R.createElement(l.RV,{validateMessages:zt},Et)),ft&&(kr=R.createElement(re,{locale:ft,_ANT_MARK__:ue},kr)),(Qt||Er)&&(kr=R.createElement(C.Z.Provider,{value:_r},kr)),Z&&(kr=R.createElement(Ne.q,{size:Z},kr));const mr=R.useMemo(()=>{const Or=Mt||{},{algorithm:X,token:Nr}=Or,Xe=ze(Or,["algorithm","token"]),xe=X&&(!Array.isArray(X)||X.length>0)?(0,v.jG)(X):void 0;return Object.assign(Object.assign({},Xe),{theme:xe,token:Object.assign(Object.assign({},ke.Z),Nr)})},[Mt]);return ot&&(kr=R.createElement(fe.Mj.Provider,{value:mr},kr)),Wt!==void 0&&(kr=R.createElement(Te.n,{disabled:Wt},kr)),R.createElement(je.E_.Provider,{value:Pr},kr)},nt=St=>R.createElement(pe.Z,null,(Ut,lt,Et)=>R.createElement(je.C,null,Zt=>R.createElement(At,Object.assign({parentContext:Zt,legacyLocale:Et},St))));nt.ConfigContext=je.E_,nt.SizeContext=Ne.Z,nt.config=ur;var Lt=nt},27511:function(Qe,te,m){"use strict";m.d(te,{K:function(){return qe},Z:function(){return Ne}});var v=m(94184),C=m.n(v),l=m(50344),$=m(67294),R=m(53124),z=m(96159),L=m(74443),O=he=>{let{children:Ve}=he;return Ve};function F(he){return he!=null}var Ae=he=>{let{itemPrefixCls:Ve,component:ie,span:ze,className:Le,style:Re,labelStyle:st,contentStyle:vt,bordered:Dt,label:ar,content:$t,colon:ur}=he;const we=ie;return Dt?$.createElement(we,{className:C()({[`${Ve}-item-label`]:F(ar),[`${Ve}-item-content`]:F($t)},Le),style:Re,colSpan:ze},F(ar)&&$.createElement("span",{style:st},ar),F($t)&&$.createElement("span",{style:vt},$t)):$.createElement(we,{className:C()(`${Ve}-item`,Le),style:Re,colSpan:ze},$.createElement("div",{className:`${Ve}-item-container`},(ar||ar===0)&&$.createElement("span",{className:C()(`${Ve}-item-label`,{[`${Ve}-item-no-colon`]:!ur}),style:st},ar),($t||$t===0)&&$.createElement("span",{className:C()(`${Ve}-item-content`),style:vt},$t)))};function re(he,Ve,ie){let{colon:ze,prefixCls:Le,bordered:Re}=Ve,{component:st,type:vt,showLabel:Dt,showContent:ar,labelStyle:$t,contentStyle:ur}=ie;return he.map((we,At)=>{let{props:{label:nt,children:Lt,prefixCls:St=Le,className:Ut,style:lt,labelStyle:Et,contentStyle:Zt,span:Be=1},key:He}=we;return typeof st=="string"?$.createElement(Ae,{key:`${vt}-${He||At}`,className:Ut,style:lt,labelStyle:Object.assign(Object.assign({},$t),Et),contentStyle:Object.assign(Object.assign({},ur),Zt),span:Be,colon:ze,component:st,itemPrefixCls:St,bordered:Re,label:Dt?nt:null,content:ar?Lt:null}):[$.createElement(Ae,{key:`label-${He||At}`,className:Ut,style:Object.assign(Object.assign(Object.assign({},$t),lt),Et),span:1,colon:ze,component:st[0],itemPrefixCls:St,bordered:Re,label:nt}),$.createElement(Ae,{key:`content-${He||At}`,className:Ut,style:Object.assign(Object.assign(Object.assign({},ur),lt),Zt),span:Be*2-1,component:st[1],itemPrefixCls:St,bordered:Re,content:Lt})]})}var fe=he=>{const Ve=$.useContext(qe),{prefixCls:ie,vertical:ze,row:Le,index:Re,bordered:st}=he;return ze?$.createElement($.Fragment,null,$.createElement("tr",{key:`label-${Re}`,className:`${ie}-row`},re(Le,he,Object.assign({component:"th",type:"label",showLabel:!0},Ve))),$.createElement("tr",{key:`content-${Re}`,className:`${ie}-row`},re(Le,he,Object.assign({component:"td",type:"content",showContent:!0},Ve)))):$.createElement("tr",{key:Re,className:`${ie}-row`},re(Le,he,Object.assign({component:st?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},Ve)))},ke=m(67968),je=m(45503),bt=m(14747);const ut=he=>{const{componentCls:Ve,descriptionsSmallPadding:ie,descriptionsDefaultPadding:ze,descriptionsMiddlePadding:Le,descriptionsBg:Re}=he;return{[`&${Ve}-bordered`]:{[`${Ve}-view`]:{border:`${he.lineWidth}px ${he.lineType} ${he.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${Ve}-item-label, ${Ve}-item-content`]:{padding:ze,borderInlineEnd:`${he.lineWidth}px ${he.lineType} ${he.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${Ve}-item-label`]:{color:he.colorTextSecondary,backgroundColor:Re,"&::after":{display:"none"}},[`${Ve}-row`]:{borderBottom:`${he.lineWidth}px ${he.lineType} ${he.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${Ve}-middle`]:{[`${Ve}-item-label, ${Ve}-item-content`]:{padding:Le}},[`&${Ve}-small`]:{[`${Ve}-item-label, ${Ve}-item-content`]:{padding:ie}}}}},wt=he=>{const{componentCls:Ve,descriptionsExtraColor:ie,descriptionItemPaddingBottom:ze,descriptionsItemLabelColonMarginRight:Le,descriptionsItemLabelColonMarginLeft:Re,descriptionsTitleMarginBottom:st}=he;return{[Ve]:Object.assign(Object.assign(Object.assign({},(0,bt.Wf)(he)),ut(he)),{["&-rtl"]:{direction:"rtl"},[`${Ve}-header`]:{display:"flex",alignItems:"center",marginBottom:st},[`${Ve}-title`]:Object.assign(Object.assign({},bt.vS),{flex:"auto",color:he.colorText,fontWeight:he.fontWeightStrong,fontSize:he.fontSizeLG,lineHeight:he.lineHeightLG}),[`${Ve}-extra`]:{marginInlineStart:"auto",color:ie,fontSize:he.fontSize},[`${Ve}-view`]:{width:"100%",borderRadius:he.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${Ve}-row`]:{"> th, > td":{paddingBottom:ze},"&:last-child":{borderBottom:"none"}},[`${Ve}-item-label`]:{color:he.colorTextTertiary,fontWeight:"normal",fontSize:he.fontSize,lineHeight:he.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${Re}px ${Le}px`},[`&${Ve}-item-no-colon::after`]:{content:'""'}},[`${Ve}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${Ve}-item-content`]:{display:"table-cell",flex:1,color:he.colorText,fontSize:he.fontSize,lineHeight:he.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${Ve}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${Ve}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${Ve}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${Ve}-row`]:{"> th, > td":{paddingBottom:he.paddingSM}}},"&-small":{[`${Ve}-row`]:{"> th, > td":{paddingBottom:he.paddingXS}}}})}};var se=(0,ke.Z)("Descriptions",he=>{const Ve=he.colorFillAlter,ie=he.fontSizeSM*he.lineHeightSM,ze=he.colorText,Le=`${he.paddingXS}px ${he.padding}px`,Re=`${he.padding}px ${he.paddingLG}px`,st=`${he.paddingSM}px ${he.paddingLG}px`,vt=he.padding,Dt=he.marginXS,ar=he.marginXXS/2,$t=(0,je.TS)(he,{descriptionsBg:Ve,descriptionsTitleMarginBottom:ie,descriptionsExtraColor:ze,descriptionItemPaddingBottom:vt,descriptionsSmallPadding:Le,descriptionsDefaultPadding:Re,descriptionsMiddlePadding:st,descriptionsItemLabelColonMarginRight:Dt,descriptionsItemLabelColonMarginLeft:ar});return[wt($t)]});const qe=$.createContext({}),me={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function _e(he,Ve){if(typeof he=="number")return he;if(typeof he=="object")for(let ie=0;ie<L.c.length;ie++){const ze=L.c[ie];if(Ve[ze]&&he[ze]!==void 0)return he[ze]||me[ze]}return 3}function Te(he,Ve,ie){let ze=he;return(ie===void 0||ie>Ve)&&(ze=(0,z.Tm)(he,{span:Ve})),ze}function ht(he,Ve){const ie=(0,l.Z)(he).filter(st=>st),ze=[];let Le=[],Re=Ve;return ie.forEach((st,vt)=>{var Dt;const ar=(Dt=st.props)===null||Dt===void 0?void 0:Dt.span,$t=ar||1;if(vt===ie.length-1){Le.push(Te(st,Re,ar)),ze.push(Le);return}$t<Re?(Re-=$t,Le.push(st)):(Le.push(Te(st,Re,$t)),ze.push(Le),Re=Ve,Le=[])}),ze}function We(he){let{prefixCls:Ve,title:ie,extra:ze,column:Le=me,colon:Re=!0,bordered:st,layout:vt,children:Dt,className:ar,rootClassName:$t,style:ur,size:we,labelStyle:At,contentStyle:nt}=he;const{getPrefixCls:Lt,direction:St}=$.useContext(R.E_),Ut=Lt("descriptions",Ve),[lt,Et]=$.useState({}),Zt=_e(Le,lt),[Be,He]=se(Ut),ft=(0,L.Z)();$.useEffect(()=>{const K=ft.subscribe(B=>{typeof Le=="object"&&Et(B)});return()=>{ft.unsubscribe(K)}},[]);const Z=ht(Dt,Zt),J=$.useMemo(()=>({labelStyle:At,contentStyle:nt}),[At,nt]);return Be($.createElement(qe.Provider,{value:J},$.createElement("div",{className:C()(Ut,{[`${Ut}-${we}`]:we&&we!=="default",[`${Ut}-bordered`]:!!st,[`${Ut}-rtl`]:St==="rtl"},ar,$t,He),style:ur},(ie||ze)&&$.createElement("div",{className:`${Ut}-header`},ie&&$.createElement("div",{className:`${Ut}-title`},ie),ze&&$.createElement("div",{className:`${Ut}-extra`},ze)),$.createElement("div",{className:`${Ut}-view`},$.createElement("table",null,$.createElement("tbody",null,Z.map((K,B)=>$.createElement(fe,{key:B,index:B,colon:Re,prefixCls:Ut,vertical:vt==="vertical",bordered:st,row:K}))))))))}We.Item=O;var Ne=We},96074:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return Ae}});var v=m(94184),C=m.n(v),l=m(67294),$=m(53124),R=m(67968),z=m(45503),L=m(14747);const T=re=>{const{componentCls:pe,sizePaddingEdgeHorizontal:fe,colorSplit:ke,lineWidth:je}=re;return{[pe]:Object.assign(Object.assign({},(0,L.Wf)(re)),{borderBlockStart:`${je}px solid ${ke}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${re.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${je}px solid ${ke}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${re.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${pe}-with-text`]:{display:"flex",alignItems:"center",margin:`${re.dividerHorizontalWithTextGutterMargin}px 0`,color:re.colorTextHeading,fontWeight:500,fontSize:re.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${ke}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${je}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${pe}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${pe}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${pe}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:ke,borderStyle:"dashed",borderWidth:`${je}px 0 0`},[`&-horizontal${pe}-with-text${pe}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${pe}-dashed`]:{borderInlineStart:je,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${pe}-with-text`]:{color:re.colorText,fontWeight:"normal",fontSize:re.fontSize},[`&-horizontal${pe}-with-text-left${pe}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${pe}-inner-text`]:{paddingInlineStart:fe}},[`&-horizontal${pe}-with-text-right${pe}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${pe}-inner-text`]:{paddingInlineEnd:fe}}})}};var O=(0,R.Z)("Divider",re=>{const pe=(0,z.TS)(re,{dividerVerticalGutterMargin:re.marginXS,dividerHorizontalWithTextGutterMargin:re.margin,dividerHorizontalGutterMargin:re.marginLG});return[T(pe)]},{sizePaddingEdgeHorizontal:0}),F=function(re,pe){var fe={};for(var ke in re)Object.prototype.hasOwnProperty.call(re,ke)&&pe.indexOf(ke)<0&&(fe[ke]=re[ke]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,ke=Object.getOwnPropertySymbols(re);je<ke.length;je++)pe.indexOf(ke[je])<0&&Object.prototype.propertyIsEnumerable.call(re,ke[je])&&(fe[ke[je]]=re[ke[je]]);return fe},Ae=re=>{const{getPrefixCls:pe,direction:fe}=l.useContext($.E_),{prefixCls:ke,type:je="horizontal",orientation:bt="center",orientationMargin:ut,className:wt,rootClassName:se,children:qe,dashed:me,plain:_e}=re,Te=F(re,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain"]),ht=pe("divider",ke),[We,Ne]=O(ht),he=bt.length>0?`-${bt}`:bt,Ve=!!qe,ie=bt==="left"&&ut!=null,ze=bt==="right"&&ut!=null,Le=C()(ht,Ne,`${ht}-${je}`,{[`${ht}-with-text`]:Ve,[`${ht}-with-text${he}`]:Ve,[`${ht}-dashed`]:!!me,[`${ht}-plain`]:!!_e,[`${ht}-rtl`]:fe==="rtl",[`${ht}-no-default-orientation-margin-left`]:ie,[`${ht}-no-default-orientation-margin-right`]:ze},wt,se),Re=Object.assign(Object.assign({},ie&&{marginLeft:ut}),ze&&{marginRight:ut});return We(l.createElement("div",Object.assign({className:Le},Te,{role:"separator"}),qe&&je!=="vertical"&&l.createElement("span",{className:`${ht}-inner-text`,style:Re},qe)))}},23672:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return He}});var v=m(65793),C=m(94184),l=m.n(C),$=m(60057),R=m(66680),z=m(21770),L=m(98423),T=m(67294),O=m(53124),F=m(82610),ue=m(76529),Ae=m(4173),re=m(80636),pe=m(8745),fe=m(96159),ke=m(16853),je=m(18662),bt=m(50344),ut=m(37193);function wt(ft){let{className:Z,direction:J,index:K,marginDirection:B,children:j,split:ee,wrap:W}=ft;const{horizontalSize:De,verticalSize:ot,latestIndex:Wt,supportFlexGap:Ct}=T.useContext(me);let Qt={};return Ct||(J==="vertical"?K<Wt&&(Qt={marginBottom:De/(ee?2:1)}):Qt=Object.assign(Object.assign({},K<Wt&&{[B]:De/(ee?2:1)}),W&&{paddingBottom:ot})),j==null?null:T.createElement(T.Fragment,null,T.createElement("div",{className:Z,style:Qt},j),K<Wt&&ee&&T.createElement("span",{className:`${Z}-split`,style:Qt},ee))}var se=m(51916),qe=function(ft,Z){var J={};for(var K in ft)Object.prototype.hasOwnProperty.call(ft,K)&&Z.indexOf(K)<0&&(J[K]=ft[K]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var B=0,K=Object.getOwnPropertySymbols(ft);B<K.length;B++)Z.indexOf(K[B])<0&&Object.prototype.propertyIsEnumerable.call(ft,K[B])&&(J[K[B]]=ft[K[B]]);return J};const me=T.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),_e={small:8,middle:16,large:24};function Te(ft){return typeof ft=="string"?_e[ft]:ft||0}const We=ft=>{const{getPrefixCls:Z,space:J,direction:K}=T.useContext(O.E_),{size:B=(J==null?void 0:J.size)||"small",align:j,className:ee,rootClassName:W,children:De,direction:ot="horizontal",prefixCls:Wt,split:Ct,style:Qt,wrap:ir=!1}=ft,Er=qe(ft,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap"]),Qr=(0,ut.Z)(),[Mt,br]=T.useMemo(()=>(Array.isArray(B)?B:[B,B]).map(kt=>Te(kt)),[B]),Nt=(0,bt.Z)(De,{keepEmpty:!0}),Pr=j===void 0&&ot==="horizontal"?"center":j,_r=Z("space",Wt),[kr,zt]=(0,se.Z)(_r),mr=l()(_r,zt,`${_r}-${ot}`,{[`${_r}-rtl`]:K==="rtl",[`${_r}-align-${Pr}`]:Pr},ee,W),Or=`${_r}-item`,X=K==="rtl"?"marginLeft":"marginRight";let Nr=0;const Xe=Nt.map((kt,cr)=>{kt!=null&&(Nr=cr);const Ar=kt&&kt.key||`${Or}-${cr}`;return T.createElement(wt,{className:Or,key:Ar,direction:ot,index:cr,marginDirection:X,split:Ct,wrap:ir},kt)}),xe=T.useMemo(()=>({horizontalSize:Mt,verticalSize:br,latestIndex:Nr,supportFlexGap:Qr}),[Mt,br,Nr,Qr]);if(Nt.length===0)return null;const rt={};return ir&&(rt.flexWrap="wrap",Qr||(rt.marginBottom=-br)),Qr&&(rt.columnGap=Mt,rt.rowGap=br),kr(T.createElement("div",Object.assign({className:mr,style:Object.assign(Object.assign({},rt),Qt)},Er),T.createElement(me.Provider,{value:xe},Xe)))};We.Compact=Ae.ZP;var Ne=We,he=m(14747),Ve=m(67771),ie=m(33297),ze=m(50438),Le=m(77786),Re=m(67968),st=m(45503),Dt=ft=>{const{componentCls:Z,antCls:J,paddingXS:K,opacityLoading:B}=ft;return{[`${Z}-button`]:{whiteSpace:"nowrap",[`&${J}-btn-group > ${J}-btn`]:{[`&-loading, &-loading + ${J}-btn`]:{cursor:"default",pointerEvents:"none",opacity:B},[`&:last-child:not(:first-child):not(${J}-btn-icon-only)`]:{paddingInline:K}}}}},$t=ft=>{const{componentCls:Z,menuCls:J,colorError:K,colorTextLightSolid:B}=ft,j=`${J}-item`;return{[`${Z}, ${Z}-menu-submenu`]:{[`${J} ${j}`]:{[`&${j}-danger:not(${j}-disabled)`]:{color:K,"&:hover":{color:B,backgroundColor:K}}}}}};const ur=ft=>{const{componentCls:Z,menuCls:J,zIndexPopup:K,dropdownArrowDistance:B,sizePopupArrow:j,antCls:ee,iconCls:W,motionDurationMid:De,dropdownPaddingVertical:ot,fontSize:Wt,dropdownEdgeChildPadding:Ct,colorTextDisabled:Qt,fontSizeIcon:ir,controlPaddingHorizontal:Er,colorBgElevated:Qr}=ft;return[{[Z]:Object.assign(Object.assign({},(0,he.Wf)(ft)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:K,display:"block","&::before":{position:"absolute",insetBlock:-B+j/2,zIndex:-9999,opacity:1e-4,content:'""'},[`${Z}-wrap`]:{position:"relative",[`${ee}-btn > ${W}-down`]:{fontSize:ir},[`${W}-down::before`]:{transition:`transform ${De}`}},[`${Z}-wrap-open`]:{[`${W}-down::before`]:{transform:"rotate(180deg)"}},[`
        &-hidden,
        &-menu-hidden,
        &-menu-submenu-hidden
      `]:{display:"none"},[`&${ee}-slide-down-enter${ee}-slide-down-enter-active${Z}-placement-bottomLeft,
          &${ee}-slide-down-appear${ee}-slide-down-appear-active${Z}-placement-bottomLeft,
          &${ee}-slide-down-enter${ee}-slide-down-enter-active${Z}-placement-bottom,
          &${ee}-slide-down-appear${ee}-slide-down-appear-active${Z}-placement-bottom,
          &${ee}-slide-down-enter${ee}-slide-down-enter-active${Z}-placement-bottomRight,
          &${ee}-slide-down-appear${ee}-slide-down-appear-active${Z}-placement-bottomRight`]:{animationName:Ve.fJ},[`&${ee}-slide-up-enter${ee}-slide-up-enter-active${Z}-placement-topLeft,
          &${ee}-slide-up-appear${ee}-slide-up-appear-active${Z}-placement-topLeft,
          &${ee}-slide-up-enter${ee}-slide-up-enter-active${Z}-placement-top,
          &${ee}-slide-up-appear${ee}-slide-up-appear-active${Z}-placement-top,
          &${ee}-slide-up-enter${ee}-slide-up-enter-active${Z}-placement-topRight,
          &${ee}-slide-up-appear${ee}-slide-up-appear-active${Z}-placement-topRight`]:{animationName:Ve.Qt},[`&${ee}-slide-down-leave${ee}-slide-down-leave-active${Z}-placement-bottomLeft,
          &${ee}-slide-down-leave${ee}-slide-down-leave-active${Z}-placement-bottom,
          &${ee}-slide-down-leave${ee}-slide-down-leave-active${Z}-placement-bottomRight`]:{animationName:Ve.Uw},[`&${ee}-slide-up-leave${ee}-slide-up-leave-active${Z}-placement-topLeft,
          &${ee}-slide-up-leave${ee}-slide-up-leave-active${Z}-placement-top,
          &${ee}-slide-up-leave${ee}-slide-up-leave-active${Z}-placement-topRight`]:{animationName:Ve.ly}})},(0,Le.ZP)(ft,{colorBg:Qr,limitVerticalRadius:!0,arrowPlacement:{top:!0,bottom:!0}}),{[`${Z} ${J}`]:{position:"relative",margin:0},[`${J}-submenu-popup`]:{position:"absolute",zIndex:K,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${Z}, ${Z}-menu-submenu`]:{[J]:Object.assign(Object.assign({padding:Ct,listStyleType:"none",backgroundColor:Qr,backgroundClip:"padding-box",borderRadius:ft.borderRadiusLG,outline:"none",boxShadow:ft.boxShadowSecondary},(0,he.Qy)(ft)),{[`${J}-item-group-title`]:{padding:`${ot}px ${Er}px`,color:ft.colorTextDescription,transition:`all ${De}`},[`${J}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${J}-item-icon`]:{minWidth:Wt,marginInlineEnd:ft.marginXS,fontSize:ft.fontSizeSM},[`${J}-title-content`]:{flex:"auto","> a":{color:"inherit",transition:`all ${De}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}},[`${J}-item, ${J}-submenu-title`]:Object.assign(Object.assign({clear:"both",margin:0,padding:`${ot}px ${Er}px`,color:ft.colorText,fontWeight:"normal",fontSize:Wt,lineHeight:ft.lineHeight,cursor:"pointer",transition:`all ${De}`,borderRadius:ft.borderRadiusSM,["&:hover, &-active"]:{backgroundColor:ft.controlItemBgHover}},(0,he.Qy)(ft)),{"&-selected":{color:ft.colorPrimary,backgroundColor:ft.controlItemBgActive,"&:hover, &-active":{backgroundColor:ft.controlItemBgActiveHover}},"&-disabled":{color:Qt,cursor:"not-allowed","&:hover":{color:Qt,backgroundColor:Qr,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${ft.marginXXS}px 0`,overflow:"hidden",lineHeight:0,backgroundColor:ft.colorSplit},[`${Z}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:ft.paddingXS,[`${Z}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:ft.colorTextDescription,fontSize:ir,fontStyle:"normal"}}}),[`${J}-item-group-list`]:{margin:`0 ${ft.marginXS}px`,padding:0,listStyle:"none"},[`${J}-submenu-title`]:{paddingInlineEnd:Er+ft.fontSizeSM},[`${J}-submenu-vertical`]:{position:"relative"},[`${J}-submenu${J}-submenu-disabled ${Z}-menu-submenu-title`]:{[`&, ${Z}-menu-submenu-arrow-icon`]:{color:Qt,backgroundColor:Qr,cursor:"not-allowed"}},[`${J}-submenu-selected ${Z}-menu-submenu-title`]:{color:ft.colorPrimary}})}},[(0,Ve.oN)(ft,"slide-up"),(0,Ve.oN)(ft,"slide-down"),(0,ie.Fm)(ft,"move-up"),(0,ie.Fm)(ft,"move-down"),(0,ze._y)(ft,"zoom-big")]]};var we=(0,Re.Z)("Dropdown",(ft,Z)=>{let{rootPrefixCls:J}=Z;const{marginXXS:K,sizePopupArrow:B,controlHeight:j,fontSize:ee,lineHeight:W,paddingXXS:De,componentCls:ot,borderRadiusLG:Wt}=ft,Ct=(j-ee*W)/2,{dropdownArrowOffset:Qt}=(0,Le.fS)({contentRadius:Wt}),ir=(0,st.TS)(ft,{menuCls:`${ot}-menu`,rootPrefixCls:J,dropdownArrowDistance:B/2+K,dropdownArrowOffset:Qt,dropdownPaddingVertical:Ct,dropdownEdgeChildPadding:De});return[ur(ir),Dt(ir),$t(ir)]},ft=>({zIndexPopup:ft.zIndexPopupBase+50})),At=function(ft,Z){var J={};for(var K in ft)Object.prototype.hasOwnProperty.call(ft,K)&&Z.indexOf(K)<0&&(J[K]=ft[K]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var B=0,K=Object.getOwnPropertySymbols(ft);B<K.length;B++)Z.indexOf(K[B])<0&&Object.prototype.propertyIsEnumerable.call(ft,K[B])&&(J[K[B]]=ft[K[B]]);return J};const nt=ft=>{const{getPopupContainer:Z,getPrefixCls:J,direction:K}=T.useContext(O.E_),{prefixCls:B,type:j="default",danger:ee,disabled:W,loading:De,onClick:ot,htmlType:Wt,children:Ct,className:Qt,menu:ir,arrow:Er,autoFocus:Qr,overlay:Mt,trigger:br,align:Nt,open:Pr,onOpenChange:_r,placement:kr,getPopupContainer:zt,href:mr,icon:Or=T.createElement(ke.Z,null),title:X,buttonsRender:Nr=Hi=>Hi,mouseEnterDelay:Xe,mouseLeaveDelay:xe,overlayClassName:rt,overlayStyle:kt,destroyPopupOnHide:cr,dropdownRender:Ar}=ft,Lr=At(ft,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),sr=J("dropdown",B),Ge=`${sr}-button`,[Gr,on]=we(sr),cn={menu:ir,arrow:Er,autoFocus:Qr,align:Nt,disabled:W,trigger:W?[]:br,onOpenChange:_r,getPopupContainer:zt||Z,mouseEnterDelay:Xe,mouseLeaveDelay:xe,overlayClassName:rt,overlayStyle:kt,destroyPopupOnHide:cr,dropdownRender:Ar},{compactSize:Dn,compactItemClassnames:ci}=(0,Ae.ri)(sr,K),ia=l()(Ge,ci,Qt,on);"overlay"in ft&&(cn.overlay=Mt),"open"in ft&&(cn.open=Pr),"placement"in ft?cn.placement=kr:cn.placement=K==="rtl"?"bottomLeft":"bottomRight";const Vi=T.createElement(je.ZP,{type:j,danger:ee,disabled:W,loading:De,onClick:ot,htmlType:Wt,href:mr,title:X},Ct),On=T.createElement(je.ZP,{type:j,danger:ee,icon:Or}),[ji,oi]=Nr([Vi,On]);return Gr(T.createElement(Ne.Compact,Object.assign({className:ia,size:Dn,block:!0},Lr),ji,T.createElement(Be,Object.assign({},cn),oi)))};nt.__ANT_BUTTON=!0;var Lt=nt,St=m(92195);const Ut=null,lt=ft=>{const{getPopupContainer:Z,getPrefixCls:J,direction:K}=T.useContext(O.E_),B=()=>{const cn=J(),{placement:Dn="",transitionName:ci}=ft;return ci!==void 0?ci:Dn.includes("top")?`${cn}-slide-down`:`${cn}-slide-up`},j=()=>{const{placement:cn}=ft;return cn?cn.includes("Center")?cn.slice(0,cn.indexOf("Center")):cn:K==="rtl"?"bottomRight":"bottomLeft"},{menu:ee,arrow:W,prefixCls:De,children:ot,trigger:Wt,disabled:Ct,dropdownRender:Qt,getPopupContainer:ir,overlayClassName:Er,rootClassName:Qr,open:Mt,onOpenChange:br,visible:Nt,onVisibleChange:Pr,mouseEnterDelay:_r=.15,mouseLeaveDelay:kr=.1,autoAdjustOverflow:zt=!0}=ft,mr=J("dropdown",De),[Or,X]=we(mr),{token:Nr}=St.Z.useToken(),Xe=T.Children.only(ot),xe=(0,fe.Tm)(Xe,{className:l()(`${mr}-trigger`,{[`${mr}-rtl`]:K==="rtl"},Xe.props.className),disabled:Ct}),rt=Ct?[]:Wt;let kt;rt&&rt.includes("contextMenu")&&(kt=!0);const[cr,Ar]=(0,z.Z)(!1,{value:Mt!=null?Mt:Nt}),Lr=(0,R.Z)(cn=>{br==null||br(cn),Pr==null||Pr(cn),Ar(cn)}),sr=l()(Er,Qr,X,{[`${mr}-rtl`]:K==="rtl"}),Ge=(0,re.Z)({arrowPointAtCenter:typeof W=="object"&&W.pointAtCenter,autoAdjustOverflow:zt,offset:Nr.marginXXS,arrowWidth:W?Nr.sizePopupArrow:0}),Gr=T.useCallback(()=>{Ar(!1)},[]),on=()=>{const{overlay:cn}=ft;let Dn;return ee!=null&&ee.items?Dn=T.createElement(F.Z,Object.assign({},ee)):typeof cn=="function"?Dn=cn():Dn=cn,Qt&&(Dn=Qt(Dn)),Dn=T.Children.only(typeof Dn=="string"?T.createElement("span",null,Dn):Dn),T.createElement(ue.J,{prefixCls:`${mr}-menu`,expandIcon:T.createElement("span",{className:`${mr}-menu-submenu-arrow`},T.createElement(v.Z,{className:`${mr}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:Gr,validator:ci=>{let{mode:ia}=ci}},T.createElement(Ae.BR,null,Dn))};return Or(T.createElement($.Z,Object.assign({alignPoint:kt},(0,L.Z)(ft,["rootClassName"]),{mouseEnterDelay:_r,mouseLeaveDelay:kr,visible:cr,builtinPlacements:Ge,arrow:!!W,overlayClassName:sr,prefixCls:mr,getPopupContainer:ir||Z,transitionName:B(),trigger:rt,overlay:on,placement:j(),onVisibleChange:Lr}),xe))};lt.Button=Lt;const Et=(0,pe.Z)(lt,"dropdown",ft=>ft),Zt=ft=>T.createElement(Et,Object.assign({},ft),T.createElement("span",null));lt._InternalPanelDoNotUseOrYouWillBeFired=Zt;var Be=lt,He=Be},32983:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return wt}});var v=m(94184),C=m.n(v),l=m(67294),$=m(53124),R=m(74342),z=m(10274),L=m(48012),O=()=>{const[,se]=(0,L.dQ)(),qe=new z.C(se.colorBgBase);let me={};return qe.toHsl().l<.5&&(me={opacity:.65}),l.createElement("svg",{style:me,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("g",{transform:"translate(24 31.67)"},l.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),l.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),l.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),l.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),l.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),l.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),l.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},l.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),l.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},ue=()=>{const[,se]=(0,L.dQ)(),{colorFill:qe,colorFillTertiary:me,colorFillQuaternary:_e,colorBgContainer:Te}=se,{borderColor:ht,shadowColor:We,contentColor:Ne}=(0,l.useMemo)(()=>({borderColor:new z.C(qe).onBackground(Te).toHexShortString(),shadowColor:new z.C(me).onBackground(Te).toHexShortString(),contentColor:new z.C(_e).onBackground(Te).toHexShortString()}),[qe,me,_e,Te]);return l.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},l.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},l.createElement("ellipse",{fill:We,cx:"32",cy:"33",rx:"32",ry:"7"}),l.createElement("g",{fillRule:"nonzero",stroke:ht},l.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),l.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:Ne}))))},Ae=m(67968),re=m(45503);const pe=se=>{const{componentCls:qe,margin:me,marginXS:_e,marginXL:Te,fontSize:ht,lineHeight:We}=se;return{[qe]:{marginInline:_e,fontSize:ht,lineHeight:We,textAlign:"center",[`${qe}-image`]:{height:se.emptyImgHeight,marginBottom:_e,opacity:se.opacityImage,img:{height:"100%"},svg:{height:"100%",margin:"auto"}},[`${qe}-description`]:{color:se.colorText},[`${qe}-footer`]:{marginTop:me},"&-normal":{marginBlock:Te,color:se.colorTextDisabled,[`${qe}-description`]:{color:se.colorTextDisabled},[`${qe}-image`]:{height:se.emptyImgHeightMD}},"&-small":{marginBlock:_e,color:se.colorTextDisabled,[`${qe}-image`]:{height:se.emptyImgHeightSM}}}}};var fe=(0,Ae.Z)("Empty",se=>{const{componentCls:qe,controlHeightLG:me}=se,_e=(0,re.TS)(se,{emptyImgCls:`${qe}-img`,emptyImgHeight:me*2.5,emptyImgHeightMD:me,emptyImgHeightSM:me*.875});return[pe(_e)]}),ke=function(se,qe){var me={};for(var _e in se)Object.prototype.hasOwnProperty.call(se,_e)&&qe.indexOf(_e)<0&&(me[_e]=se[_e]);if(se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Te=0,_e=Object.getOwnPropertySymbols(se);Te<_e.length;Te++)qe.indexOf(_e[Te])<0&&Object.prototype.propertyIsEnumerable.call(se,_e[Te])&&(me[_e[Te]]=se[_e[Te]]);return me};const je=l.createElement(O,null),bt=l.createElement(ue,null),ut=se=>{var{className:qe,rootClassName:me,prefixCls:_e,image:Te=je,description:ht,children:We,imageStyle:Ne}=se,he=ke(se,["className","rootClassName","prefixCls","image","description","children","imageStyle"]);const{getPrefixCls:Ve,direction:ie}=l.useContext($.E_),ze=Ve("empty",_e),[Le,Re]=fe(ze);return Le(l.createElement(R.Z,{componentName:"Empty"},st=>{const vt=typeof ht!="undefined"?ht:st.description,Dt=typeof vt=="string"?vt:"empty";let ar=null;return typeof Te=="string"?ar=l.createElement("img",{alt:Dt,src:Te}):ar=Te,l.createElement("div",Object.assign({className:C()(Re,ze,{[`${ze}-normal`]:Te===bt,[`${ze}-rtl`]:ie==="rtl"},qe,me)},he),l.createElement("div",{className:`${ze}-image`,style:Ne},ar),vt&&l.createElement("div",{className:`${ze}-description`},vt),We&&l.createElement("div",{className:`${ze}-footer`},We))}))};ut.PRESENTED_IMAGE_DEFAULT=je,ut.PRESENTED_IMAGE_SIMPLE=bt;var wt=ut},65223:function(Qe,te,m){"use strict";m.d(te,{Ux:function(){return T},aM:function(){return L}});var v=m(24407),C=m(67294);const l=C.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),$=null,R=O=>{const F=omit(O,["prefixCls"]);return React.createElement(RcFormProvider,Object.assign({},F))},z=C.createContext({prefixCls:""}),L=C.createContext({}),T=O=>{let{children:F,status:ue,override:Ae}=O;const re=(0,C.useContext)(L),pe=(0,C.useMemo)(()=>{const fe=Object.assign({},re);return Ae&&delete fe.isFormItemInput,ue&&(delete fe.status,delete fe.hasFeedback,delete fe.feedbackIcon),fe},[ue,Ae,re]);return C.createElement(L.Provider,{value:pe},F)}},99134:function(Qe,te,m){"use strict";var v=m(67294);const C=(0,v.createContext)({});te.Z=C},6999:function(Qe,te,m){"use strict";m.d(te,{V:function(){return T},c:function(){return O}});var v=m(67968),C=m(45503);const l=F=>{const{componentCls:ue}=F;return{[ue]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around ":{justifyContent:"space-around"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},$=F=>{const{componentCls:ue}=F;return{[ue]:{position:"relative",maxWidth:"100%",minHeight:1}}},R=(F,ue)=>{const{componentCls:Ae,gridColumns:re}=F,pe={};for(let fe=re;fe>=0;fe--)fe===0?(pe[`${Ae}${ue}-${fe}`]={display:"none"},pe[`${Ae}-push-${fe}`]={insetInlineStart:"auto"},pe[`${Ae}-pull-${fe}`]={insetInlineEnd:"auto"},pe[`${Ae}${ue}-push-${fe}`]={insetInlineStart:"auto"},pe[`${Ae}${ue}-pull-${fe}`]={insetInlineEnd:"auto"},pe[`${Ae}${ue}-offset-${fe}`]={marginInlineEnd:0},pe[`${Ae}${ue}-order-${fe}`]={order:0}):(pe[`${Ae}${ue}-${fe}`]={display:"block",flex:`0 0 ${fe/re*100}%`,maxWidth:`${fe/re*100}%`},pe[`${Ae}${ue}-push-${fe}`]={insetInlineStart:`${fe/re*100}%`},pe[`${Ae}${ue}-pull-${fe}`]={insetInlineEnd:`${fe/re*100}%`},pe[`${Ae}${ue}-offset-${fe}`]={marginInlineStart:`${fe/re*100}%`},pe[`${Ae}${ue}-order-${fe}`]={order:fe});return pe},z=(F,ue)=>R(F,ue),L=(F,ue,Ae)=>({[`@media (min-width: ${ue}px)`]:Object.assign({},z(F,Ae))}),T=(0,v.Z)("Grid",F=>[l(F)]),O=(0,v.Z)("Grid",F=>{const ue=(0,C.TS)(F,{gridColumns:24}),Ae={"-sm":ue.screenSMMin,"-md":ue.screenMDMin,"-lg":ue.screenLGMin,"-xl":ue.screenXLMin,"-xxl":ue.screenXXLMin};return[$(ue),z(ue,""),z(ue,"-xs"),Object.keys(Ae).map(re=>L(ue,Ae[re],re)).reduce((re,pe)=>Object.assign(Object.assign({},re),pe),{})]})},74342:function(Qe,te,m){"use strict";var v=m(67294),C=m(76745),l=m(88526);const $=z=>{const{componentName:L="global",defaultLocale:T,children:O}=z,F=v.useContext(C.Z),ue=v.useMemo(()=>{var re;const pe=T||l.Z[L],fe=(re=F==null?void 0:F[L])!==null&&re!==void 0?re:{};return Object.assign(Object.assign({},pe instanceof Function?pe():pe),fe||{})},[L,T,F]),Ae=v.useMemo(()=>{const re=F&&F.locale;return F&&F.exist&&!re?l.Z.locale:re},[F]);return O(ue,Ae,F)};te.Z=$;const R=(z,L)=>{const T=React.useContext(LocaleContext);return[React.useMemo(()=>{var F;const ue=L||defaultLocaleData[z],Ae=(F=T==null?void 0:T[z])!==null&&F!==void 0?F:{};return Object.assign(Object.assign({},typeof ue=="function"?ue():ue),Ae||{})},[z,L,T])]}},76745:function(Qe,te,m){"use strict";var v=m(67294);const C=(0,v.createContext)(void 0);te.Z=C},88526:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return ue}});var v=m(62906),C={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},l=C,R={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},L={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},l),timePickerLocale:Object.assign({},R)},T=L;const O="${label} is not a valid ${type}";var ue={locale:"en",Pagination:v.Z,DatePicker:L,TimePicker:R,Calendar:T,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:O,method:O,array:O,object:O,number:O,date:O,boolean:O,integer:O,float:O,regexp:O,email:O,url:O,hex:O},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"}}},76529:function(Qe,te,m){"use strict";m.d(te,{J:function(){return $}});var v=m(67294),C=function(R,z){var L={};for(var T in R)Object.prototype.hasOwnProperty.call(R,T)&&z.indexOf(T)<0&&(L[T]=R[T]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,T=Object.getOwnPropertySymbols(R);O<T.length;O++)z.indexOf(T[O])<0&&Object.prototype.propertyIsEnumerable.call(R,T[O])&&(L[T[O]]=R[T[O]]);return L};const l=v.createContext(null),$=R=>{const{children:z}=R,L=C(R,["children"]),T=v.useContext(l),O=v.useMemo(()=>Object.assign(Object.assign({},T),L),[T,L.prefixCls,L.mode,L.selectable]);return v.createElement(l.Provider,{value:O},z)};te.Z=l},82610:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return j}});var v=m(97868),C=m(67294),l=m(98423),$=m(66680),R=m(94184),z=m.n(R),L=m(16853),T=m(33603),O=m(96159),F=m(53124),ue=m(10274),Ae=m(33507),re=m(67771),pe=m(50438),fe=m(67968),ke=m(45503),bt=ee=>{const{componentCls:W,motionDurationSlow:De,menuHorizontalHeight:ot,colorSplit:Wt,lineWidth:Ct,lineType:Qt,menuItemPaddingInline:ir}=ee;return{[`${W}-horizontal`]:{lineHeight:`${ot}px`,border:0,borderBottom:`${Ct}px ${Qt} ${Wt}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${W}-item, ${W}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:ir},[`> ${W}-item:hover,
        > ${W}-item-active,
        > ${W}-submenu ${W}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${W}-item, ${W}-submenu-title`]:{transition:[`border-color ${De}`,`background ${De}`].join(",")},[`${W}-submenu-arrow`]:{display:"none"}}}},wt=ee=>{let{componentCls:W,menuArrowOffset:De}=ee;return{[`${W}-rtl`]:{direction:"rtl"},[`${W}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${W}-rtl${W}-vertical,
    ${W}-submenu-rtl ${W}-vertical`]:{[`${W}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${De})`},"&::after":{transform:`rotate(45deg) translateY(${De})`}}}}},se=m(14747);const qe=ee=>Object.assign({},(0,se.oN)(ee));var _e=(ee,W)=>{const{componentCls:De,colorItemText:ot,colorItemTextSelected:Wt,colorGroupTitle:Ct,colorItemBg:Qt,colorSubItemBg:ir,colorItemBgSelected:Er,colorActiveBarHeight:Qr,colorActiveBarWidth:Mt,colorActiveBarBorderSize:br,motionDurationSlow:Nt,motionEaseInOut:Pr,motionEaseOut:_r,menuItemPaddingInline:kr,motionDurationMid:zt,colorItemTextHover:mr,lineType:Or,colorSplit:X,colorItemTextDisabled:Nr,colorDangerItemText:Xe,colorDangerItemTextHover:xe,colorDangerItemTextSelected:rt,colorDangerItemBgActive:kt,colorDangerItemBgSelected:cr,colorItemBgHover:Ar,menuSubMenuBg:Lr,colorItemTextSelectedHorizontal:sr,colorItemBgSelectedHorizontal:Ge}=ee;return{[`${De}-${W}`]:{color:ot,background:Qt,[`&${De}-root:focus-visible`]:Object.assign({},qe(ee)),[`${De}-item-group-title`]:{color:Ct},[`${De}-submenu-selected`]:{[`> ${De}-submenu-title`]:{color:Wt}},[`${De}-item-disabled, ${De}-submenu-disabled`]:{color:`${Nr} !important`},[`${De}-item:hover, ${De}-submenu-title:hover`]:{[`&:not(${De}-item-selected):not(${De}-submenu-selected)`]:{color:mr}},[`&:not(${De}-horizontal)`]:{[`${De}-item:not(${De}-item-selected)`]:{"&:hover":{backgroundColor:Ar},"&:active":{backgroundColor:Er}},[`${De}-submenu-title`]:{"&:hover":{backgroundColor:Ar},"&:active":{backgroundColor:Er}}},[`${De}-item-danger`]:{color:Xe,[`&${De}-item:hover`]:{[`&:not(${De}-item-selected):not(${De}-submenu-selected)`]:{color:xe}},[`&${De}-item:active`]:{background:kt}},[`${De}-item a`]:{"&, &:hover":{color:"inherit"}},[`${De}-item-selected`]:{color:Wt,[`&${De}-item-danger`]:{color:rt},["a, a:hover"]:{color:"inherit"}},[`& ${De}-item-selected`]:{backgroundColor:Er,[`&${De}-item-danger`]:{backgroundColor:cr}},[`${De}-item, ${De}-submenu-title`]:{[`&:not(${De}-item-disabled):focus-visible`]:Object.assign({},qe(ee))},[`&${De}-submenu > ${De}`]:{backgroundColor:Lr},[`&${De}-popup > ${De}`]:{backgroundColor:Qt},[`&${De}-horizontal`]:Object.assign(Object.assign({},W==="dark"?{borderBottom:0}:{}),{[`> ${De}-item, > ${De}-submenu`]:{top:br,marginTop:-br,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:kr,bottom:0,borderBottom:`${Qr}px solid transparent`,transition:`border-color ${Nt} ${Pr}`,content:'""'},["&:hover, &-active, &-open"]:{"&::after":{borderBottomWidth:Qr,borderBottomColor:sr}},["&-selected"]:{color:sr,backgroundColor:Ge,"&::after":{borderBottomWidth:Qr,borderBottomColor:sr}}}}),[`&${De}-root`]:{[`&${De}-inline, &${De}-vertical`]:{borderInlineEnd:`${br}px ${Or} ${X}`}},[`&${De}-inline`]:{[`${De}-sub${De}-inline`]:{background:ir},[`${De}-item, ${De}-submenu-title`]:br&&Mt?{width:`calc(100% + ${br}px)`}:{},[`${De}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Mt}px solid ${Wt}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${zt} ${_r}`,`opacity ${zt} ${_r}`].join(","),content:'""'},[`&${De}-item-danger`]:{"&::after":{borderInlineEndColor:rt}}},[`${De}-selected, ${De}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${zt} ${Pr}`,`opacity ${zt} ${Pr}`].join(",")}}}}}};const Te=ee=>{const{componentCls:W,menuItemHeight:De,itemMarginInline:ot,padding:Wt,menuArrowSize:Ct,marginXS:Qt,marginXXS:ir}=ee,Er=Wt+Ct+Qt;return{[`${W}-item`]:{position:"relative"},[`${W}-item, ${W}-submenu-title`]:{height:De,lineHeight:`${De}px`,paddingInline:Wt,overflow:"hidden",textOverflow:"ellipsis",marginInline:ot,marginBlock:ir,width:`calc(100% - ${ot*2}px)`},[`${W}-submenu`]:{paddingBottom:.02},[`> ${W}-item,
            > ${W}-submenu > ${W}-submenu-title`]:{height:De,lineHeight:`${De}px`},[`${W}-item-group-list ${W}-submenu-title,
            ${W}-submenu-title`]:{paddingInlineEnd:Er}}};var We=ee=>{const{componentCls:W,iconCls:De,menuItemHeight:ot,colorTextLightSolid:Wt,dropdownWidth:Ct,controlHeightLG:Qt,motionDurationMid:ir,motionEaseOut:Er,paddingXL:Qr,fontSizeSM:Mt,fontSizeLG:br,motionDurationSlow:Nt,paddingXS:Pr,boxShadowSecondary:_r}=ee,kr={height:ot,lineHeight:`${ot}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[W]:{["&-inline, &-vertical"]:Object.assign({[`&${W}-root`]:{boxShadow:"none"}},Te(ee))},[`${W}-submenu-popup`]:{[`${W}-vertical`]:Object.assign(Object.assign({},Te(ee)),{boxShadow:_r})}},{[`${W}-submenu-popup ${W}-vertical${W}-sub`]:{minWidth:Ct,maxHeight:`calc(100vh - ${Qt*2.5}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${W}-inline`]:{width:"100%",[`&${W}-root`]:{[`${W}-item, ${W}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${Nt}`,`background ${Nt}`,`padding ${ir} ${Er}`].join(","),[`> ${W}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${W}-sub${W}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${W}-submenu > ${W}-submenu-title`]:kr,[`& ${W}-item-group-title`]:{paddingInlineStart:Qr}},[`${W}-item`]:kr}},{[`${W}-inline-collapsed`]:{width:ot*2,[`&${W}-root`]:{[`${W}-item, ${W}-submenu ${W}-submenu-title`]:{[`> ${W}-inline-collapsed-noicon`]:{fontSize:br,textAlign:"center"}}},[`> ${W}-item,
          > ${W}-item-group > ${W}-item-group-list > ${W}-item,
          > ${W}-item-group > ${W}-item-group-list > ${W}-submenu > ${W}-submenu-title,
          > ${W}-submenu > ${W}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Mt}px)`,textOverflow:"clip",[`
            ${W}-submenu-arrow,
            ${W}-submenu-expand-icon
          `]:{opacity:0},[`${W}-item-icon, ${De}`]:{margin:0,fontSize:br,lineHeight:`${ot}px`,"+ span":{display:"inline-block",opacity:0}}},[`${W}-item-icon, ${De}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${W}-item-icon, ${De}`]:{display:"none"},"a, a:hover":{color:Wt}},[`${W}-item-group-title`]:Object.assign(Object.assign({},se.vS),{paddingInline:Pr})}}]};const Ne=ee=>{const{componentCls:W,fontSize:De,motionDurationSlow:ot,motionDurationMid:Wt,motionEaseInOut:Ct,motionEaseOut:Qt,iconCls:ir,controlHeightSM:Er}=ee;return{[`${W}-item, ${W}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${ot}`,`background ${ot}`,`padding ${ot} ${Ct}`].join(","),[`${W}-item-icon, ${ir}`]:{minWidth:De,fontSize:De,transition:[`font-size ${Wt} ${Qt}`,`margin ${ot} ${Ct}`,`color ${ot}`].join(","),"+ span":{marginInlineStart:Er-De,opacity:1,transition:[`opacity ${ot} ${Ct}`,`margin ${ot}`,`color ${ot}`].join(",")}},[`${W}-item-icon`]:Object.assign({},(0,se.Ro)()),[`&${W}-item-only-child`]:{[`> ${ir}, > ${W}-item-icon`]:{marginInlineEnd:0}}},[`${W}-item-disabled, ${W}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${W}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},he=ee=>{const{componentCls:W,motionDurationSlow:De,motionEaseInOut:ot,borderRadius:Wt,menuArrowSize:Ct,menuArrowOffset:Qt}=ee;return{[`${W}-submenu`]:{["&-expand-icon, &-arrow"]:{position:"absolute",top:"50%",insetInlineEnd:ee.margin,width:Ct,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${De} ${ot}, opacity ${De}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:Ct*.6,height:Ct*.15,backgroundColor:"currentcolor",borderRadius:Wt,transition:[`background ${De} ${ot}`,`transform ${De} ${ot}`,`top ${De} ${ot}`,`color ${De} ${ot}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${Qt})`},"&::after":{transform:`rotate(-45deg) translateY(${Qt})`}}}}},Ve=ee=>{const{antCls:W,componentCls:De,fontSize:ot,motionDurationSlow:Wt,motionDurationMid:Ct,motionEaseInOut:Qt,lineHeight:ir,paddingXS:Er,padding:Qr,colorSplit:Mt,lineWidth:br,zIndexPopup:Nt,borderRadiusLG:Pr,radiusSubMenuItem:_r,menuArrowSize:kr,menuArrowOffset:zt,lineType:mr,menuPanelMaskInset:Or}=ee;return[{"":{[`${De}`]:Object.assign(Object.assign({},(0,se.dF)()),{["&-hidden"]:{display:"none"}})},[`${De}-submenu-hidden`]:{display:"none"}},{[De]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,se.Wf)(ee)),(0,se.dF)()),{marginBottom:0,paddingInlineStart:0,fontSize:ot,lineHeight:0,listStyle:"none",outline:"none",transition:[`background ${Wt}`,`width ${Wt} cubic-bezier(0.2, 0, 0, 1) 0s`].join(","),["ul, ol"]:{margin:0,padding:0,listStyle:"none"},["&-overflow"]:{display:"flex",[`${De}-item`]:{flex:"none"}},[`${De}-item, ${De}-submenu, ${De}-submenu-title`]:{borderRadius:ee.radiusItem},[`${De}-item-group-title`]:{padding:`${Er}px ${Qr}px`,fontSize:ot,lineHeight:ir,transition:`all ${Wt}`},[`&-horizontal ${De}-submenu`]:{transition:[`border-color ${Wt} ${Qt}`,`background ${Wt} ${Qt}`].join(",")},[`${De}-submenu, ${De}-submenu-inline`]:{transition:[`border-color ${Wt} ${Qt}`,`background ${Wt} ${Qt}`,`padding ${Ct} ${Qt}`].join(",")},[`${De}-submenu ${De}-sub`]:{cursor:"initial",transition:[`background ${Wt} ${Qt}`,`padding ${Wt} ${Qt}`].join(",")},[`${De}-title-content`]:{transition:`color ${Wt}`},[`${De}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${De}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:Mt,borderStyle:mr,borderWidth:0,borderTopWidth:br,marginBlock:br,padding:0,"&-dashed":{borderStyle:"dashed"}}}),Ne(ee)),{[`${De}-item-group`]:{[`${De}-item-group-list`]:{margin:0,padding:0,[`${De}-item, ${De}-submenu-title`]:{paddingInline:`${ot*2}px ${Qr}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:Nt,background:"transparent",borderRadius:Pr,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:`${Or}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:Or},[`> ${De}`]:Object.assign(Object.assign(Object.assign({borderRadius:Pr},Ne(ee)),he(ee)),{[`${De}-item, ${De}-submenu > ${De}-submenu-title`]:{borderRadius:_r},[`${De}-submenu-title::after`]:{transition:`transform ${Wt} ${Qt}`}})}}),he(ee)),{[`&-inline-collapsed ${De}-submenu-arrow,
        &-inline ${De}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${zt})`},"&::after":{transform:`rotate(45deg) translateX(-${zt})`}},[`${De}-submenu-open${De}-submenu-inline > ${De}-submenu-title > ${De}-submenu-arrow`]:{transform:`translateY(-${kr*.2}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${zt})`},"&::before":{transform:`rotate(45deg) translateX(${zt})`}}})},{[`${W}-layout-header`]:{[De]:{lineHeight:"inherit"}}}]};var ie=(ee,W)=>(0,fe.Z)("Menu",(ot,Wt)=>{let{overrideComponentToken:Ct}=Wt;if(W===!1)return[];const{colorBgElevated:Qt,colorPrimary:ir,colorError:Er,colorErrorHover:Qr,colorTextLightSolid:Mt}=ot,{controlHeightLG:br,fontSize:Nt}=ot,Pr=Nt/7*5,_r=(0,ke.TS)(ot,{menuItemHeight:br,menuItemPaddingInline:ot.margin,menuArrowSize:Pr,menuHorizontalHeight:br*1.15,menuArrowOffset:`${Pr*.25}px`,menuPanelMaskInset:-7,menuSubMenuBg:Qt}),kr=new ue.C(Mt).setAlpha(.65).toRgbString(),zt=(0,ke.TS)(_r,{colorItemText:kr,colorItemTextHover:Mt,colorGroupTitle:kr,colorItemTextSelected:Mt,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:ir,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new ue.C(Mt).setAlpha(.25).toRgbString(),colorDangerItemText:Er,colorDangerItemTextHover:Qr,colorDangerItemTextSelected:Mt,colorDangerItemBgActive:Er,colorDangerItemBgSelected:Er,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:Mt,colorItemBgSelectedHorizontal:ir},Object.assign({},Ct));return[Ve(_r),bt(_r),We(_r),_e(_r,"light"),_e(zt,"dark"),wt(_r),(0,Ae.Z)(_r),(0,re.oN)(_r,"slide-up"),(0,re.oN)(_r,"slide-down"),(0,pe._y)(_r,"zoom-big")]},ot=>{const{colorPrimary:Wt,colorError:Ct,colorTextDisabled:Qt,colorErrorBg:ir,colorText:Er,colorTextDescription:Qr,colorBgContainer:Mt,colorFillAlter:br,colorFillContent:Nt,lineWidth:Pr,lineWidthBold:_r,controlItemBgActive:kr,colorBgTextHover:zt}=ot;return{dropdownWidth:160,zIndexPopup:ot.zIndexPopupBase+50,radiusItem:ot.borderRadiusLG,radiusSubMenuItem:ot.borderRadiusSM,colorItemText:Er,colorItemTextHover:Er,colorItemTextHoverHorizontal:Wt,colorGroupTitle:Qr,colorItemTextSelected:Wt,colorItemTextSelectedHorizontal:Wt,colorItemBg:Mt,colorItemBgHover:zt,colorItemBgActive:Nt,colorSubItemBg:br,colorItemBgSelected:kr,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:_r,colorActiveBarBorderSize:Pr,colorItemTextDisabled:Qt,colorDangerItemText:Ct,colorDangerItemTextHover:Ct,colorDangerItemTextSelected:Ct,colorDangerItemBgActive:ir,colorDangerItemBgSelected:ir,itemMarginInline:ot.marginXXS}})(ee),ze=m(76529),Le=function(ee,W){var De={};for(var ot in ee)Object.prototype.hasOwnProperty.call(ee,ot)&&W.indexOf(ot)<0&&(De[ot]=ee[ot]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,ot=Object.getOwnPropertySymbols(ee);Wt<ot.length;Wt++)W.indexOf(ot[Wt])<0&&Object.prototype.propertyIsEnumerable.call(ee,ot[Wt])&&(De[ot[Wt]]=ee[ot[Wt]]);return De},st=ee=>{const{prefixCls:W,className:De,dashed:ot}=ee,Wt=Le(ee,["prefixCls","className","dashed"]),{getPrefixCls:Ct}=C.useContext(F.E_),Qt=Ct("menu",W),ir=z()({[`${Qt}-item-divider-dashed`]:!!ot},De);return C.createElement(v.iz,Object.assign({className:ir},Wt))},vt=m(50344),Dt=function(ee,W){var De={};for(var ot in ee)Object.prototype.hasOwnProperty.call(ee,ot)&&W.indexOf(ot)<0&&(De[ot]=ee[ot]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,ot=Object.getOwnPropertySymbols(ee);Wt<ot.length;Wt++)W.indexOf(ot[Wt])<0&&Object.prototype.propertyIsEnumerable.call(ee,ot[Wt])&&(De[ot[Wt]]=ee[ot[Wt]]);return De};const ar={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},$t=C.createContext({}),ur=(()=>{let ee=0;return function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ee+=1,`${W}${ee}`}})(),we=null;var At=null,nt=m(15335),St=(0,C.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),lt=ee=>{var W;const{className:De,children:ot,icon:Wt,title:Ct,danger:Qt}=ee,{prefixCls:ir,firstLevel:Er,direction:Qr,disableMenuItemTitleTooltip:Mt,inlineCollapsed:br}=C.useContext(St),Nt=Or=>{const X=C.createElement("span",{className:`${ir}-title-content`},ot);return(!Wt||(0,O.l$)(ot)&&ot.type==="span")&&ot&&Or&&Er&&typeof ot=="string"?C.createElement("div",{className:`${ir}-inline-collapsed-noicon`},ot.charAt(0)):X},{siderCollapsed:Pr}=C.useContext($t);let _r=Ct;typeof Ct=="undefined"?_r=Er?ot:"":Ct===!1&&(_r="");const kr={title:_r};!Pr&&!br&&(kr.title=null,kr.open=!1);const zt=(0,vt.Z)(ot).length;let mr=C.createElement(v.ck,Object.assign({},(0,l.Z)(ee,["title","icon","danger"]),{className:z()({[`${ir}-item-danger`]:Qt,[`${ir}-item-only-child`]:(Wt?zt+1:zt)===1},De),title:typeof Ct=="string"?Ct:void 0}),(0,O.Tm)(Wt,{className:z()((0,O.l$)(Wt)?(W=Wt.props)===null||W===void 0?void 0:W.className:"",`${ir}-item-icon`)}),Nt(br));return Mt||(mr=C.createElement(nt.Z,Object.assign({},kr,{placement:Qr==="rtl"?"left":"right",overlayClassName:`${ir}-inline-collapsed-tooltip`}),mr)),mr},Zt=ee=>{var W;const{popupClassName:De,icon:ot,title:Wt,theme:Ct}=ee,Qt=C.useContext(St),{prefixCls:ir,inlineCollapsed:Er,theme:Qr,mode:Mt}=Qt,br=(0,v.Xl)();let Nt;if(!ot)Nt=Er&&!br.length&&Wt&&typeof Wt=="string"?C.createElement("div",{className:`${ir}-inline-collapsed-noicon`},Wt.charAt(0)):C.createElement("span",{className:`${ir}-title-content`},Wt);else{const kr=(0,O.l$)(Wt)&&Wt.type==="span";Nt=C.createElement(C.Fragment,null,(0,O.Tm)(ot,{className:z()((0,O.l$)(ot)?(W=ot.props)===null||W===void 0?void 0:W.className:"",`${ir}-item-icon`)}),kr?Wt:C.createElement("span",{className:`${ir}-title-content`},Wt))}const Pr=C.useMemo(()=>Object.assign(Object.assign({},Qt),{firstLevel:!1}),[Qt]),_r=Mt==="horizontal"?[0,8]:[10,0];return C.createElement(St.Provider,{value:Pr},C.createElement(v.Wd,Object.assign({popupOffset:_r},(0,l.Z)(ee,["icon"]),{title:Nt,popupClassName:z()(ir,De,`${ir}-${Ct||Qr}`)})))},Be=function(ee,W){var De={};for(var ot in ee)Object.prototype.hasOwnProperty.call(ee,ot)&&W.indexOf(ot)<0&&(De[ot]=ee[ot]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,ot=Object.getOwnPropertySymbols(ee);Wt<ot.length;Wt++)W.indexOf(ot[Wt])<0&&Object.prototype.propertyIsEnumerable.call(ee,ot[Wt])&&(De[ot[Wt]]=ee[ot[Wt]]);return De};function He(ee){return(ee||[]).map((W,De)=>{if(W&&typeof W=="object"){const ot=W,{label:Wt,children:Ct,key:Qt,type:ir}=ot,Er=Be(ot,["label","children","key","type"]),Qr=Qt!=null?Qt:`tmp-${De}`;return Ct||ir==="group"?ir==="group"?C.createElement(v.BW,Object.assign({key:Qr},Er,{title:Wt}),He(Ct)):C.createElement(Zt,Object.assign({key:Qr},Er,{title:Wt}),He(Ct)):ir==="divider"?C.createElement(st,Object.assign({key:Qr},Er)):C.createElement(lt,Object.assign({key:Qr},Er),Wt)}return null}).filter(W=>W)}function ft(ee){return C.useMemo(()=>ee&&He(ee),[ee])}var Z=function(ee,W){var De={};for(var ot in ee)Object.prototype.hasOwnProperty.call(ee,ot)&&W.indexOf(ot)<0&&(De[ot]=ee[ot]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,ot=Object.getOwnPropertySymbols(ee);Wt<ot.length;Wt++)W.indexOf(ot[Wt])<0&&Object.prototype.propertyIsEnumerable.call(ee,ot[Wt])&&(De[ot[Wt]]=ee[ot[Wt]]);return De},K=(0,C.forwardRef)((ee,W)=>{var De,ot;const Wt=C.useContext(ze.Z),Ct=Wt||{},{getPrefixCls:Qt,getPopupContainer:ir,direction:Er}=C.useContext(F.E_),Qr=Qt(),{prefixCls:Mt,className:br,theme:Nt="light",expandIcon:Pr,_internalDisableMenuItemTitleTooltip:_r,inlineCollapsed:kr,siderCollapsed:zt,items:mr,children:Or,rootClassName:X,mode:Nr,selectable:Xe,onClick:xe}=ee,rt=Z(ee,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),kt=(0,l.Z)(rt,["collapsedWidth"]),cr=ft(mr)||Or;(De=Ct.validator)===null||De===void 0||De.call(Ct,{mode:Nr});const Ar=(0,$.Z)(function(){var On;xe==null||xe.apply(void 0,arguments),(On=Ct.onClick)===null||On===void 0||On.call(Ct)}),Lr=Ct.mode||Nr,sr=Xe!=null?Xe:Ct.selectable,Ge=C.useMemo(()=>zt!==void 0?zt:kr,[kr,zt]),Gr={horizontal:{motionName:`${Qr}-slide-up`},inline:(0,T.ZP)(Qr),other:{motionName:`${Qr}-zoom-big`}},on=Qt("menu",Mt||Ct.prefixCls),[cn,Dn]=ie(on,!Wt),ci=z()(`${on}-${Nt}`,br);let ia;if(typeof Pr=="function")ia=Pr;else{const On=Pr||Ct.expandIcon;ia=(0,O.Tm)(On,{className:z()(`${on}-submenu-expand-icon`,(ot=On==null?void 0:On.props)===null||ot===void 0?void 0:ot.className)})}const Vi=C.useMemo(()=>({prefixCls:on,inlineCollapsed:Ge||!1,direction:Er,firstLevel:!0,theme:Nt,mode:Lr,disableMenuItemTitleTooltip:_r}),[on,Ge,Er,_r,Nt]);return cn(C.createElement(ze.Z.Provider,{value:null},C.createElement(St.Provider,{value:Vi},C.createElement(v.ZP,Object.assign({getPopupContainer:ir,overflowedIndicator:C.createElement(L.Z,null),overflowedIndicatorPopupClassName:`${on}-${Nt}`,mode:Lr,selectable:sr,onClick:Ar},kt,{inlineCollapsed:Ge,className:ci,prefixCls:on,direction:Er,defaultMotions:Gr,expandIcon:ia,ref:W,rootClassName:z()(X,Dn)}),cr))))});const B=(0,C.forwardRef)((ee,W)=>{const De=(0,C.useRef)(null),ot=C.useContext($t);return(0,C.useImperativeHandle)(W,()=>({menu:De.current,focus:Wt=>{var Ct;(Ct=De.current)===null||Ct===void 0||Ct.focus(Wt)}})),C.createElement(K,Object.assign({ref:De},ee,ot))});B.Item=lt,B.SubMenu=Zt,B.Divider=st,B.ItemGroup=v.BW;var j=B},247:function(Qe,te,m){"use strict";m.d(te,{ZP:function(){return Or}});var v=m(74902),C=m(38135),l=m(67294),$=m(32170),R=m(84273),z=m(1413),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},T=L,O=m(42135),F=function(Nr,Xe){return l.createElement(O.Z,(0,z.Z)((0,z.Z)({},Nr),{},{ref:Xe,icon:T}))};F.displayName="ExclamationCircleFilled";var ue=l.forwardRef(F),Ae=m(86581),re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},pe=re,fe=function(Nr,Xe){return l.createElement(O.Z,(0,z.Z)((0,z.Z)({},Nr),{},{ref:Xe,icon:pe}))};fe.displayName="CheckCircleFilled";var ke=l.forwardRef(fe),je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},bt=je,ut=function(Nr,Xe){return l.createElement(O.Z,(0,z.Z)((0,z.Z)({},Nr),{},{ref:Xe,icon:bt}))};ut.displayName="InfoCircleFilled";var wt=l.forwardRef(ut),se=m(97685),qe=m(91),me=m(87462),_e=m(73935),Te=m(62874),ht=m(94184),We=m.n(ht),Ne=m(4942),he=l.forwardRef(function(X,Nr){var Xe=X.prefixCls,xe=X.style,rt=X.className,kt=X.duration,cr=kt===void 0?4.5:kt,Ar=X.eventKey,Lr=X.content,sr=X.closable,Ge=X.closeIcon,Gr=Ge===void 0?"x":Ge,on=X.props,cn=X.onClick,Dn=X.onNoticeClose,ci=X.times,ia=l.useState(!1),Vi=(0,se.Z)(ia,2),On=Vi[0],ji=Vi[1],oi=function(){Dn(Ar)};l.useEffect(function(){if(!On&&cr>0){var Ca=setTimeout(function(){oi()},cr*1e3);return function(){clearTimeout(Ca)}}},[cr,On,ci]);var Hi="".concat(Xe,"-notice");return l.createElement("div",(0,me.Z)({},on,{ref:Nr,className:We()(Hi,rt,(0,Ne.Z)({},"".concat(Hi,"-closable"),sr)),style:xe,onMouseEnter:function(){ji(!0)},onMouseLeave:function(){ji(!1)},onClick:cn}),l.createElement("div",{className:"".concat(Hi,"-content")},Lr),sr&&l.createElement("a",{tabIndex:0,className:"".concat(Hi,"-close"),onClick:function(Wi){Wi.preventDefault(),Wi.stopPropagation(),oi()}},Gr))}),Ve=he,ie=l.forwardRef(function(X,Nr){var Xe=X.prefixCls,xe=Xe===void 0?"rc-notification":Xe,rt=X.container,kt=X.motion,cr=X.maxCount,Ar=X.className,Lr=X.style,sr=X.onAllRemoved,Ge=l.useState([]),Gr=(0,se.Z)(Ge,2),on=Gr[0],cn=Gr[1],Dn=function(Wi){var jo,uo=on.find(function(Pn){return Pn.key===Wi});uo==null||(jo=uo.onClose)===null||jo===void 0||jo.call(uo),cn(function(Pn){return Pn.filter(function(bn){return bn.key!==Wi})})};l.useImperativeHandle(Nr,function(){return{open:function(Wi){cn(function(jo){var uo=(0,v.Z)(jo),Pn=uo.findIndex(function(di){return di.key===Wi.key}),bn=(0,z.Z)({},Wi);if(Pn>=0){var Oi;bn.times=(((Oi=jo[Pn])===null||Oi===void 0?void 0:Oi.times)||0)+1,uo[Pn]=bn}else bn.times=0,uo.push(bn);return cr>0&&uo.length>cr&&(uo=uo.slice(-cr)),uo})},close:function(Wi){Dn(Wi)},destroy:function(){cn([])}}});var ci=l.useState({}),ia=(0,se.Z)(ci,2),Vi=ia[0],On=ia[1];l.useEffect(function(){var Ca={};on.forEach(function(Wi){var jo=Wi.placement,uo=jo===void 0?"topRight":jo;uo&&(Ca[uo]=Ca[uo]||[],Ca[uo].push(Wi))}),Object.keys(Vi).forEach(function(Wi){Ca[Wi]=Ca[Wi]||[]}),On(Ca)},[on]);var ji=function(Wi){On(function(jo){var uo=(0,z.Z)({},jo),Pn=uo[Wi]||[];return Pn.length||delete uo[Wi],uo})},oi=l.useRef(!1);if(l.useEffect(function(){Object.keys(Vi).length>0?oi.current=!0:oi.current&&(sr==null||sr(),oi.current=!1)},[Vi]),!rt)return null;var Hi=Object.keys(Vi);return(0,_e.createPortal)(l.createElement(l.Fragment,null,Hi.map(function(Ca){var Wi=Vi[Ca],jo=Wi.map(function(Pn){return{config:Pn,key:Pn.key}}),uo=typeof kt=="function"?kt(Ca):kt;return l.createElement(Te.V,(0,me.Z)({key:Ca,className:We()(xe,"".concat(xe,"-").concat(Ca),Ar==null?void 0:Ar(Ca)),style:Lr==null?void 0:Lr(Ca),keys:jo,motionAppear:!0},uo,{onAllRemoved:function(){ji(Ca)}}),function(Pn,bn){var Oi=Pn.config,di=Pn.className,va=Pn.style,wa=Oi.key,Aa=Oi.times,Ta=Oi.className,ma=Oi.style;return l.createElement(Ve,(0,me.Z)({},Oi,{ref:bn,prefixCls:xe,className:We()(di,Ta),style:(0,z.Z)((0,z.Z)({},va),ma),times:Aa,key:wa,eventKey:wa,onNoticeClose:Dn}))})})),rt)}),ze=ie,Le=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],Re=function(){return document.body},st=0;function vt(){for(var X={},Nr=arguments.length,Xe=new Array(Nr),xe=0;xe<Nr;xe++)Xe[xe]=arguments[xe];return Xe.forEach(function(rt){rt&&Object.keys(rt).forEach(function(kt){var cr=rt[kt];cr!==void 0&&(X[kt]=cr)})}),X}function Dt(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Nr=X.getContainer,Xe=Nr===void 0?Re:Nr,xe=X.motion,rt=X.prefixCls,kt=X.maxCount,cr=X.className,Ar=X.style,Lr=X.onAllRemoved,sr=(0,qe.Z)(X,Le),Ge=l.useState(),Gr=(0,se.Z)(Ge,2),on=Gr[0],cn=Gr[1],Dn=l.useRef(),ci=l.createElement(ze,{container:on,ref:Dn,prefixCls:rt,motion:xe,maxCount:kt,className:cr,style:Ar,onAllRemoved:Lr}),ia=l.useState([]),Vi=(0,se.Z)(ia,2),On=Vi[0],ji=Vi[1],oi=l.useMemo(function(){return{open:function(Ca){var Wi=vt(sr,Ca);(Wi.key===null||Wi.key===void 0)&&(Wi.key="rc-notification-".concat(st),st+=1),ji(function(jo){return[].concat((0,v.Z)(jo),[{type:"open",config:Wi}])})},close:function(Ca){ji(function(Wi){return[].concat((0,v.Z)(Wi),[{type:"close",key:Ca}])})},destroy:function(){ji(function(Ca){return[].concat((0,v.Z)(Ca),[{type:"destroy"}])})}}},[]);return l.useEffect(function(){cn(Xe())}),l.useEffect(function(){Dn.current&&On.length&&(On.forEach(function(Hi){switch(Hi.type){case"open":Dn.current.open(Hi.config);break;case"close":Dn.current.close(Hi.key);break;case"destroy":Dn.current.destroy();break}}),ji([]))},[On]),[oi,ci]}var ar=m(51222),$t=m(67968),ur=m(45503),we=m(14747);const At=X=>{const{componentCls:Nr,iconCls:Xe,boxShadow:xe,colorBgElevated:rt,colorSuccess:kt,colorError:cr,colorWarning:Ar,colorInfo:Lr,fontSizeLG:sr,motionEaseInOutCirc:Ge,motionDurationSlow:Gr,marginXS:on,paddingXS:cn,borderRadiusLG:Dn,zIndexPopup:ci,messageNoticeContentPadding:ia}=X,Vi=new ar.E4("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:cn,transform:"translateY(0)",opacity:1}}),On=new ar.E4("MessageMoveOut",{"0%":{maxHeight:X.height,padding:cn,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}});return[{[Nr]:Object.assign(Object.assign({},(0,we.Wf)(X)),{position:"fixed",top:on,width:"100%",pointerEvents:"none",zIndex:ci,[`${Nr}-move-up`]:{animationFillMode:"forwards"},[`
        ${Nr}-move-up-appear,
        ${Nr}-move-up-enter
      `]:{animationName:Vi,animationDuration:Gr,animationPlayState:"paused",animationTimingFunction:Ge},[`
        ${Nr}-move-up-appear${Nr}-move-up-appear-active,
        ${Nr}-move-up-enter${Nr}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${Nr}-move-up-leave`]:{animationName:On,animationDuration:Gr,animationPlayState:"paused",animationTimingFunction:Ge},[`${Nr}-move-up-leave${Nr}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[`${Nr}-notice`]:{padding:cn,textAlign:"center",[`${Nr}-custom-content > ${Xe}`]:{verticalAlign:"text-bottom",marginInlineEnd:on,fontSize:sr},[`${Nr}-notice-content`]:{display:"inline-block",padding:ia,background:rt,borderRadius:Dn,boxShadow:xe,pointerEvents:"all"},[`${Nr}-success > ${Xe}`]:{color:kt},[`${Nr}-error > ${Xe}`]:{color:cr},[`${Nr}-warning > ${Xe}`]:{color:Ar},[`
        ${Nr}-info > ${Xe},
        ${Nr}-loading > ${Xe}`]:{color:Lr}}},{[`${Nr}-notice-pure-panel`]:{padding:0,textAlign:"start"}}]};var nt=(0,$t.Z)("Message",X=>{const Nr=(0,ur.TS)(X,{messageNoticeContentPadding:`${(X.controlHeightLG-X.fontSize*X.lineHeight)/2}px ${X.paddingSM}px`});return[At(Nr)]},X=>({height:150,zIndexPopup:X.zIndexPopupBase+10})),Lt=m(53124),St=function(X,Nr){var Xe={};for(var xe in X)Object.prototype.hasOwnProperty.call(X,xe)&&Nr.indexOf(xe)<0&&(Xe[xe]=X[xe]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,xe=Object.getOwnPropertySymbols(X);rt<xe.length;rt++)Nr.indexOf(xe[rt])<0&&Object.prototype.propertyIsEnumerable.call(X,xe[rt])&&(Xe[xe[rt]]=X[xe[rt]]);return Xe};const Ut={info:l.createElement(wt,null),success:l.createElement(ke,null),error:l.createElement(Ae.Z,null),warning:l.createElement(ue,null),loading:l.createElement(R.Z,null)};function lt(X){let{prefixCls:Nr,type:Xe,icon:xe,children:rt}=X;return l.createElement("div",{className:We()(`${Nr}-custom-content`,`${Nr}-${Xe}`)},xe||Ut[Xe],l.createElement("span",null,rt))}function Et(X){const{prefixCls:Nr,className:Xe,type:xe,icon:rt,content:kt}=X,cr=St(X,["prefixCls","className","type","icon","content"]),{getPrefixCls:Ar}=l.useContext(Lt.E_),Lr=Nr||Ar("message"),[,sr]=nt(Lr);return l.createElement(Ve,Object.assign({},cr,{prefixCls:Lr,className:We()(Xe,sr,`${Lr}-notice-pure-panel`),eventKey:"pure",duration:null,content:l.createElement(lt,{prefixCls:Lr,type:xe,icon:rt},kt)}))}var Zt=m(12057);function Be(X,Nr){return{motionName:Nr!=null?Nr:`${X}-move-up`}}function He(X){let Nr;const Xe=new Promise(rt=>{Nr=X(()=>{rt(!0)})}),xe=()=>{Nr==null||Nr()};return xe.then=(rt,kt)=>Xe.then(rt,kt),xe.promise=Xe,xe}var ft=function(X,Nr){var Xe={};for(var xe in X)Object.prototype.hasOwnProperty.call(X,xe)&&Nr.indexOf(xe)<0&&(Xe[xe]=X[xe]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,xe=Object.getOwnPropertySymbols(X);rt<xe.length;rt++)Nr.indexOf(xe[rt])<0&&Object.prototype.propertyIsEnumerable.call(X,xe[rt])&&(Xe[xe[rt]]=X[xe[rt]]);return Xe};const Z=8,J=3,K=l.forwardRef((X,Nr)=>{const{top:Xe,prefixCls:xe,getContainer:rt,maxCount:kt,duration:cr=J,rtl:Ar,transitionName:Lr,onAllRemoved:sr}=X,{getPrefixCls:Ge,getPopupContainer:Gr}=l.useContext(Lt.E_),on=xe||Ge("message"),[,cn]=nt(on),Dn=()=>({left:"50%",transform:"translateX(-50%)",top:Xe!=null?Xe:Z}),ci=()=>We()(cn,Ar?`${on}-rtl`:""),ia=()=>Be(on,Lr),Vi=l.createElement("span",{className:`${on}-close-x`},l.createElement(Zt.Z,{className:`${on}-close-icon`})),[On,ji]=Dt({prefixCls:on,style:Dn,className:ci,motion:ia,closable:!1,closeIcon:Vi,duration:cr,getContainer:()=>(rt==null?void 0:rt())||(Gr==null?void 0:Gr())||document.body,maxCount:kt,onAllRemoved:sr});return l.useImperativeHandle(Nr,()=>Object.assign(Object.assign({},On),{prefixCls:on,hashId:cn})),ji});let B=0;function j(X){const Nr=l.useRef(null);return[l.useMemo(()=>{const xe=Lr=>{var sr;(sr=Nr.current)===null||sr===void 0||sr.close(Lr)},rt=Lr=>{if(!Nr.current){const Hi=()=>{};return Hi.then=()=>{},Hi}const{open:sr,prefixCls:Ge,hashId:Gr}=Nr.current,on=`${Ge}-notice`,{content:cn,icon:Dn,type:ci,key:ia,className:Vi,onClose:On}=Lr,ji=ft(Lr,["content","icon","type","key","className","onClose"]);let oi=ia;return oi==null&&(B+=1,oi=`antd-message-${B}`),He(Hi=>(sr(Object.assign(Object.assign({},ji),{key:oi,content:l.createElement(lt,{prefixCls:Ge,type:ci,icon:Dn},cn),placement:"top",className:We()(ci&&`${on}-${ci}`,Gr,Vi),onClose:()=>{On==null||On(),Hi()}})),()=>{xe(oi)}))},cr={open:rt,destroy:Lr=>{var sr;Lr!==void 0?xe(Lr):(sr=Nr.current)===null||sr===void 0||sr.destroy()}};return["info","success","warning","error","loading"].forEach(Lr=>{const sr=(Ge,Gr,on)=>{let cn;Ge&&typeof Ge=="object"&&"content"in Ge?cn=Ge:cn={content:Ge};let Dn,ci;typeof Gr=="function"?ci=Gr:(Dn=Gr,ci=on);const ia=Object.assign(Object.assign({onClose:ci,duration:Dn},cn),{type:Lr});return rt(ia)};cr[Lr]=sr}),cr},[]),l.createElement(K,Object.assign({key:"message-holder"},X,{ref:Nr}))]}function ee(X){return j(X)}const W=["success","info","warning","error","loading"];let De=null,ot=X=>X(),Wt=[],Ct={};function Qt(){const{prefixCls:X,getContainer:Nr,duration:Xe,rtl:xe,maxCount:rt,top:kt}=Ct,cr=X!=null?X:(0,$.w6)().getPrefixCls("message"),Ar=(Nr==null?void 0:Nr())||document.body;return{prefixCls:cr,container:Ar,duration:Xe,rtl:xe,maxCount:rt,top:kt}}const ir=l.forwardRef((X,Nr)=>{const Xe=()=>{const{prefixCls:Gr,container:on,maxCount:cn,duration:Dn,rtl:ci,top:ia}=Qt();return{prefixCls:Gr,getContainer:()=>on,maxCount:cn,duration:Dn,rtl:ci,top:ia}},[xe,rt]=l.useState(Xe),[kt,cr]=j(xe),Ar=(0,$.w6)(),Lr=Ar.getRootPrefixCls(),sr=Ar.getIconPrefixCls(),Ge=()=>{rt(Xe)};return l.useEffect(Ge,[]),l.useImperativeHandle(Nr,()=>{const Gr=Object.assign({},kt);return Object.keys(Gr).forEach(on=>{Gr[on]=function(){return Ge(),kt[on].apply(kt,arguments)}}),{instance:Gr,sync:Ge}}),l.createElement($.ZP,{prefixCls:Lr,iconPrefixCls:sr},cr)});function Er(){if(!De){const X=document.createDocumentFragment(),Nr={fragment:X};De=Nr,ot(()=>{(0,C.s)(l.createElement(ir,{ref:Xe=>{const{instance:xe,sync:rt}=Xe||{};Promise.resolve().then(()=>{!Nr.instance&&xe&&(Nr.instance=xe,Nr.sync=rt,Er())})}}),X)});return}De.instance&&(Wt.forEach(X=>{const{type:Nr,skipped:Xe}=X;if(!Xe)switch(Nr){case"open":{ot(()=>{const xe=De.instance.open(Object.assign(Object.assign({},Ct),X.config));xe==null||xe.then(X.resolve),X.setCloseFn(xe)});break}case"destroy":ot(()=>{De==null||De.instance.destroy(X.key)});break;default:ot(()=>{var xe;const rt=(xe=De.instance)[Nr].apply(xe,(0,v.Z)(X.args));rt==null||rt.then(X.resolve),X.setCloseFn(rt)})}}),Wt=[])}function Qr(X){Ct=Object.assign(Object.assign({},Ct),X),ot(()=>{var Nr;(Nr=De==null?void 0:De.sync)===null||Nr===void 0||Nr.call(De)})}function Mt(X){const Nr=He(Xe=>{let xe;const rt={type:"open",config:X,resolve:Xe,setCloseFn:kt=>{xe=kt}};return Wt.push(rt),()=>{xe?ot(()=>{xe()}):rt.skipped=!0}});return Er(),Nr}function br(X,Nr){const Xe=He(xe=>{let rt;const kt={type:X,args:Nr,resolve:xe,setCloseFn:cr=>{rt=cr}};return Wt.push(kt),()=>{rt?ot(()=>{rt()}):kt.skipped=!0}});return Er(),Xe}function Nt(X){Wt.push({type:"destroy",key:X}),Er()}const _r={open:Mt,destroy:Nt,config:Qr,useMessage:ee,_InternalPanelDoNotUseOrYouWillBeFired:Et};W.forEach(X=>{_r[X]=function(){for(var Nr=arguments.length,Xe=new Array(Nr),xe=0;xe<Nr;xe++)Xe[xe]=arguments[xe];return br(X,Xe)}});const kr=()=>{};let zt=null,mr=null;var Or=_r},33573:function(Qe,te,m){"use strict";m.d(te,{ZP:function(){return vt}});var v=m(94184),C=m.n(v),l=m(21770),$=m(67294),R=m(53124),z=m(97647);function L(Dt){return Object.keys(Dt).reduce((ar,$t)=>(($t.startsWith("data-")||$t.startsWith("aria-")||$t==="role")&&!$t.startsWith("data-__")&&(ar[$t]=Dt[$t]),ar),{})}const T=$.createContext(null),O=T.Provider;var F=T;const ue=$.createContext(null),Ae=ue.Provider;var re=m(50132),pe=m(42550),fe=m(98866),ke=m(65223),je=m(51222),bt=m(67968),ut=m(45503),wt=m(14747);const se=new je.E4("antRadioEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),qe=Dt=>{const{componentCls:ar,antCls:$t}=Dt,ur=`${ar}-group`;return{[ur]:Object.assign(Object.assign({},(0,wt.Wf)(Dt)),{display:"inline-block",fontSize:0,[`&${ur}-rtl`]:{direction:"rtl"},[`${$t}-badge ${$t}-badge-count`]:{zIndex:1},[`> ${$t}-badge:not(:first-child) > ${$t}-button-wrapper`]:{borderInlineStart:"none"}})}},me=Dt=>{const{componentCls:ar,radioWrapperMarginRight:$t,radioCheckedColor:ur,radioSize:we,motionDurationSlow:At,motionDurationMid:nt,motionEaseInOut:Lt,motionEaseInOutCirc:St,radioButtonBg:Ut,colorBorder:lt,lineWidth:Et,radioDotSize:Zt,colorBgContainerDisabled:Be,colorTextDisabled:He,paddingXS:ft,radioDotDisabledColor:Z,lineType:J,radioDotDisabledSize:K,wireframe:B,colorWhite:j}=Dt,ee=`${ar}-inner`;return{[`${ar}-wrapper`]:Object.assign(Object.assign({},(0,wt.Wf)(Dt)),{position:"relative",display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:$t,cursor:"pointer",[`&${ar}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:Dt.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${ar}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${Et}px ${J} ${ur}`,borderRadius:"50%",visibility:"hidden",animationName:se,animationDuration:At,animationTimingFunction:Lt,animationFillMode:"both",content:'""'},[ar]:Object.assign(Object.assign({},(0,wt.Wf)(Dt)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center"}),[`${ar}-wrapper:hover &,
        &:hover ${ee}`]:{borderColor:ur},[`${ar}-input:focus-visible + ${ee}`]:Object.assign({},(0,wt.oN)(Dt)),[`${ar}:hover::after, ${ar}-wrapper:hover &::after`]:{visibility:"visible"},[`${ar}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:we,height:we,marginBlockStart:we/-2,marginInlineStart:we/-2,backgroundColor:B?ur:j,borderBlockStart:0,borderInlineStart:0,borderRadius:we,transform:"scale(0)",opacity:0,transition:`all ${At} ${St}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:we,height:we,backgroundColor:Ut,borderColor:lt,borderStyle:"solid",borderWidth:Et,borderRadius:"50%",transition:`all ${nt}`},[`${ar}-input`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,insetBlockEnd:0,insetInlineStart:0,zIndex:1,cursor:"pointer",opacity:0},[`${ar}-checked`]:{[ee]:{borderColor:ur,backgroundColor:B?Ut:ur,"&::after":{transform:`scale(${Zt/we})`,opacity:1,transition:`all ${At} ${St}`}}},[`${ar}-disabled`]:{cursor:"not-allowed",[ee]:{backgroundColor:Be,borderColor:lt,cursor:"not-allowed","&::after":{backgroundColor:Z}},[`${ar}-input`]:{cursor:"not-allowed"},[`${ar}-disabled + span`]:{color:He,cursor:"not-allowed"},[`&${ar}-checked`]:{[ee]:{"&::after":{transform:`scale(${K/we})`}}}},[`span${ar} + *`]:{paddingInlineStart:ft,paddingInlineEnd:ft}})}},_e=Dt=>{const{radioButtonColor:ar,controlHeight:$t,componentCls:ur,lineWidth:we,lineType:At,colorBorder:nt,motionDurationSlow:Lt,motionDurationMid:St,radioButtonPaddingHorizontal:Ut,fontSize:lt,radioButtonBg:Et,fontSizeLG:Zt,controlHeightLG:Be,controlHeightSM:He,paddingXS:ft,borderRadius:Z,borderRadiusSM:J,borderRadiusLG:K,radioCheckedColor:B,radioButtonCheckedBg:j,radioButtonHoverColor:ee,radioButtonActiveColor:W,radioSolidCheckedColor:De,colorTextDisabled:ot,colorBgContainerDisabled:Wt,radioDisabledButtonCheckedColor:Ct,radioDisabledButtonCheckedBg:Qt}=Dt;return{[`${ur}-button-wrapper`]:{position:"relative",display:"inline-block",height:$t,margin:0,paddingInline:Ut,paddingBlock:0,color:ar,fontSize:lt,lineHeight:`${$t-we*2}px`,background:Et,border:`${we}px ${At} ${nt}`,borderBlockStartWidth:we+.02,borderInlineStartWidth:0,borderInlineEndWidth:we,cursor:"pointer",transition:[`color ${St}`,`background ${St}`,`border-color ${St}`,`box-shadow ${St}`].join(","),a:{color:ar},[`> ${ur}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:-we,insetInlineStart:-we,display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:we,paddingInline:0,backgroundColor:nt,transition:`background-color ${Lt}`,content:'""'}},"&:first-child":{borderInlineStart:`${we}px ${At} ${nt}`,borderStartStartRadius:Z,borderEndStartRadius:Z},"&:last-child":{borderStartEndRadius:Z,borderEndEndRadius:Z},"&:first-child:last-child":{borderRadius:Z},[`${ur}-group-large &`]:{height:Be,fontSize:Zt,lineHeight:`${Be-we*2}px`,"&:first-child":{borderStartStartRadius:K,borderEndStartRadius:K},"&:last-child":{borderStartEndRadius:K,borderEndEndRadius:K}},[`${ur}-group-small &`]:{height:He,paddingInline:ft-we,paddingBlock:0,lineHeight:`${He-we*2}px`,"&:first-child":{borderStartStartRadius:J,borderEndStartRadius:J},"&:last-child":{borderStartEndRadius:J,borderEndEndRadius:J}},"&:hover":{position:"relative",color:B},"&:has(:focus-visible)":Object.assign({},(0,wt.oN)(Dt)),[`${ur}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${ur}-button-wrapper-disabled)`]:{zIndex:1,color:B,background:j,borderColor:B,"&::before":{backgroundColor:B},"&:first-child":{borderColor:B},"&:hover":{color:ee,borderColor:ee,"&::before":{backgroundColor:ee}},"&:active":{color:W,borderColor:W,"&::before":{backgroundColor:W}}},[`${ur}-group-solid &-checked:not(${ur}-button-wrapper-disabled)`]:{color:De,background:B,borderColor:B,"&:hover":{color:De,background:ee,borderColor:ee},"&:active":{color:De,background:W,borderColor:W}},"&-disabled":{color:ot,backgroundColor:Wt,borderColor:nt,cursor:"not-allowed","&:first-child, &:hover":{color:ot,backgroundColor:Wt,borderColor:nt}},[`&-disabled${ur}-button-wrapper-checked`]:{color:Ct,backgroundColor:Qt,borderColor:nt,boxShadow:"none"}}}};var Te=(0,bt.Z)("Radio",Dt=>{const{padding:ar,lineWidth:$t,controlItemBgActiveDisabled:ur,colorTextDisabled:we,colorBgContainer:At,fontSizeLG:nt,controlOutline:Lt,colorPrimaryHover:St,colorPrimaryActive:Ut,colorText:lt,colorPrimary:Et,marginXS:Zt,controlOutlineWidth:Be,colorTextLightSolid:He,wireframe:ft}=Dt,Z=`0 0 0 ${Be}px ${Lt}`,J=Z,K=nt,B=4,j=K-B*2,ee=ft?j:K-(B+$t)*2,W=Et,De=lt,ot=St,Wt=Ut,Ct=ar-$t,Qt=we,ir=Zt,Er=(0,ut.TS)(Dt,{radioFocusShadow:Z,radioButtonFocusShadow:J,radioSize:K,radioDotSize:ee,radioDotDisabledSize:j,radioCheckedColor:W,radioDotDisabledColor:we,radioSolidCheckedColor:He,radioButtonBg:At,radioButtonCheckedBg:At,radioButtonColor:De,radioButtonHoverColor:ot,radioButtonActiveColor:Wt,radioButtonPaddingHorizontal:Ct,radioDisabledButtonCheckedBg:ur,radioDisabledButtonCheckedColor:Qt,radioWrapperMarginRight:ir});return[qe(Er),me(Er),_e(Er)]}),ht=function(Dt,ar){var $t={};for(var ur in Dt)Object.prototype.hasOwnProperty.call(Dt,ur)&&ar.indexOf(ur)<0&&($t[ur]=Dt[ur]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var we=0,ur=Object.getOwnPropertySymbols(Dt);we<ur.length;we++)ar.indexOf(ur[we])<0&&Object.prototype.propertyIsEnumerable.call(Dt,ur[we])&&($t[ur[we]]=Dt[ur[we]]);return $t};const We=(Dt,ar)=>{var $t,ur;const we=$.useContext(F),At=$.useContext(ue),{getPrefixCls:nt,direction:Lt}=$.useContext(R.E_),St=$.useRef(),Ut=(0,pe.sQ)(ar,St),{isFormItemInput:lt}=$.useContext(ke.aM),Et=Wt=>{var Ct,Qt;(Ct=Dt.onChange)===null||Ct===void 0||Ct.call(Dt,Wt),(Qt=we==null?void 0:we.onChange)===null||Qt===void 0||Qt.call(we,Wt)},{prefixCls:Zt,className:Be,rootClassName:He,children:ft,style:Z}=Dt,J=ht(Dt,["prefixCls","className","rootClassName","children","style"]),K=nt("radio",Zt),B=((we==null?void 0:we.optionType)||At)==="button"?`${K}-button`:K,[j,ee]=Te(K),W=Object.assign({},J),De=$.useContext(fe.Z);we&&(W.name=we.name,W.onChange=Et,W.checked=Dt.value===we.value,W.disabled=($t=W.disabled)!==null&&$t!==void 0?$t:we.disabled),W.disabled=(ur=W.disabled)!==null&&ur!==void 0?ur:De;const ot=C()(`${B}-wrapper`,{[`${B}-wrapper-checked`]:W.checked,[`${B}-wrapper-disabled`]:W.disabled,[`${B}-wrapper-rtl`]:Lt==="rtl",[`${B}-wrapper-in-form-item`]:lt},Be,He,ee);return j($.createElement("label",{className:ot,style:Z,onMouseEnter:Dt.onMouseEnter,onMouseLeave:Dt.onMouseLeave},$.createElement(re.Z,Object.assign({},W,{type:"radio",prefixCls:B,ref:Ut})),ft!==void 0?$.createElement("span",null,ft):null))};var he=$.forwardRef(We);const Ve=$.forwardRef((Dt,ar)=>{const{getPrefixCls:$t,direction:ur}=$.useContext(R.E_),we=$.useContext(z.Z),[At,nt]=(0,l.Z)(Dt.defaultValue,{value:Dt.value}),Lt=Er=>{const Qr=At,Mt=Er.target.value;"value"in Dt||nt(Mt);const{onChange:br}=Dt;br&&Mt!==Qr&&br(Er)},{prefixCls:St,className:Ut,rootClassName:lt,options:Et,buttonStyle:Zt="outline",disabled:Be,children:He,size:ft,style:Z,id:J,onMouseEnter:K,onMouseLeave:B,onFocus:j,onBlur:ee}=Dt,W=$t("radio",St),De=`${W}-group`,[ot,Wt]=Te(W);let Ct=He;Et&&Et.length>0&&(Ct=Et.map(Er=>typeof Er=="string"||typeof Er=="number"?$.createElement(he,{key:Er.toString(),prefixCls:W,disabled:Be,value:Er,checked:At===Er},Er):$.createElement(he,{key:`radio-group-value-options-${Er.value}`,prefixCls:W,disabled:Er.disabled||Be,value:Er.value,checked:At===Er.value,style:Er.style},Er.label)));const Qt=ft||we,ir=C()(De,`${De}-${Zt}`,{[`${De}-${Qt}`]:Qt,[`${De}-rtl`]:ur==="rtl"},Ut,lt,Wt);return ot($.createElement("div",Object.assign({},L(Dt),{className:ir,style:Z,onMouseEnter:K,onMouseLeave:B,onFocus:j,onBlur:ee,id:J,ref:ar}),$.createElement(O,{value:{onChange:Lt,value:At,disabled:Dt.disabled,name:Dt.name,optionType:Dt.optionType}},Ct)))});var ie=$.memo(Ve),ze=function(Dt,ar){var $t={};for(var ur in Dt)Object.prototype.hasOwnProperty.call(Dt,ur)&&ar.indexOf(ur)<0&&($t[ur]=Dt[ur]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var we=0,ur=Object.getOwnPropertySymbols(Dt);we<ur.length;we++)ar.indexOf(ur[we])<0&&Object.prototype.propertyIsEnumerable.call(Dt,ur[we])&&($t[ur[we]]=Dt[ur[we]]);return $t};const Le=(Dt,ar)=>{const{getPrefixCls:$t}=$.useContext(R.E_),{prefixCls:ur}=Dt,we=ze(Dt,["prefixCls"]),At=$t("radio",ur);return $.createElement(Ae,{value:"button"},$.createElement(he,Object.assign({prefixCls:At},we,{type:"radio",ref:ar})))};var Re=$.forwardRef(Le);const st=he;st.Button=Re,st.Group=ie,st.__ANT_RADIO=!0;var vt=st},25968:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return fe}});var v=m(94184),C=m.n(v),l=m(67294),$=m(53124),R=m(37193),z=m(74443),L=m(99134),T=m(6999),O=function(ke,je){var bt={};for(var ut in ke)Object.prototype.hasOwnProperty.call(ke,ut)&&je.indexOf(ut)<0&&(bt[ut]=ke[ut]);if(ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,ut=Object.getOwnPropertySymbols(ke);wt<ut.length;wt++)je.indexOf(ut[wt])<0&&Object.prototype.propertyIsEnumerable.call(ke,ut[wt])&&(bt[ut[wt]]=ke[ut[wt]]);return bt};const F=null,ue=null;function Ae(ke,je){const[bt,ut]=l.useState(typeof ke=="string"?ke:""),wt=()=>{if(typeof ke=="string"&&ut(ke),typeof ke=="object")for(let se=0;se<z.c.length;se++){const qe=z.c[se];if(!je[qe])continue;const me=ke[qe];if(me!==void 0){ut(me);return}}};return l.useEffect(()=>{wt()},[JSON.stringify(ke),je]),bt}var pe=l.forwardRef((ke,je)=>{const{prefixCls:bt,justify:ut,align:wt,className:se,style:qe,children:me,gutter:_e=0,wrap:Te}=ke,ht=O(ke,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:We,direction:Ne}=l.useContext($.E_),[he,Ve]=l.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[ie,ze]=l.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),Le=Ae(wt,ie),Re=Ae(ut,ie),st=(0,R.Z)(),vt=l.useRef(_e),Dt=(0,z.Z)();l.useEffect(()=>{const Be=Dt.subscribe(He=>{ze(He);const ft=vt.current||0;(!Array.isArray(ft)&&typeof ft=="object"||Array.isArray(ft)&&(typeof ft[0]=="object"||typeof ft[1]=="object"))&&Ve(He)});return()=>Dt.unsubscribe(Be)},[]);const ar=()=>{const Be=[void 0,void 0];return(Array.isArray(_e)?_e:[_e,void 0]).forEach((ft,Z)=>{if(typeof ft=="object")for(let J=0;J<z.c.length;J++){const K=z.c[J];if(he[K]&&ft[K]!==void 0){Be[Z]=ft[K];break}}else Be[Z]=ft}),Be},$t=We("row",bt),[ur,we]=(0,T.V)($t),At=ar(),nt=C()($t,{[`${$t}-no-wrap`]:Te===!1,[`${$t}-${Re}`]:Re,[`${$t}-${Le}`]:Le,[`${$t}-rtl`]:Ne==="rtl"},se,we),Lt={},St=At[0]!=null&&At[0]>0?At[0]/-2:void 0,Ut=At[1]!=null&&At[1]>0?At[1]/-2:void 0;St&&(Lt.marginLeft=St,Lt.marginRight=St),st?[,Lt.rowGap]=At:Ut&&(Lt.marginTop=Ut,Lt.marginBottom=Ut);const[lt,Et]=At,Zt=l.useMemo(()=>({gutter:[lt,Et],wrap:Te,supportFlexGap:st}),[lt,Et,Te,st]);return ur(l.createElement(L.Z.Provider,{value:Zt},l.createElement("div",Object.assign({},ht,{className:nt,style:Object.assign(Object.assign({},Lt),qe),ref:je}),me)))}),fe=pe},33394:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return Z}});var v=m(94184),C=m.n(v),l=m(21990),$=m(98423),R=m(67294),z=m(53124),L=m(88258),T=m(98866),O=m(97647),F=m(65223),ue=m(33603),Ae=m(9708),re=m(1413),pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},fe=pe,ke=m(42135),je=function(K,B){return R.createElement(ke.Z,(0,re.Z)((0,re.Z)({},K),{},{ref:B,icon:fe}))};je.displayName="CheckOutlined";var bt=R.forwardRef(je),ut=m(86581),wt=m(12057),se=m(55047),qe=m(84273),me=m(40110);function _e(J){let{suffixIcon:K,clearIcon:B,menuItemSelectedIcon:j,removeIcon:ee,loading:W,multiple:De,hasFeedback:ot,prefixCls:Wt,showArrow:Ct,feedbackIcon:Qt}=J;const ir=B!=null?B:R.createElement(ut.Z,null),Er=Nt=>R.createElement(R.Fragment,null,Ct!==!1&&Nt,ot&&Qt);let Qr=null;if(K!==void 0)Qr=Er(K);else if(W)Qr=Er(R.createElement(qe.Z,{spin:!0}));else{const Nt=`${Wt}-suffix`;Qr=Pr=>{let{open:_r,showSearch:kr}=Pr;return Er(_r&&kr?R.createElement(me.Z,{className:Nt}):R.createElement(se.Z,{className:Nt}))}}let Mt=null;j!==void 0?Mt=j:De?Mt=R.createElement(bt,null):Mt=null;let br=null;return ee!==void 0?br=ee:br=R.createElement(wt.Z,null),{clearIcon:ir,suffixIcon:Qr,itemIcon:Mt,removeIcon:br}}var Te=m(4173),ht=m(8745),We=m(45503),Ne=m(67968),he=m(67771),Ve=m(33297),ie=m(14747);const ze=J=>{const{controlPaddingHorizontal:K}=J;return{position:"relative",display:"block",minHeight:J.controlHeight,padding:`${(J.controlHeight-J.fontSize*J.lineHeight)/2}px ${K}px`,color:J.colorText,fontWeight:"normal",fontSize:J.fontSize,lineHeight:J.lineHeight,boxSizing:"border-box"}};var Re=J=>{const{antCls:K,componentCls:B}=J,j=`${B}-item`;return[{[`${B}-dropdown`]:Object.assign(Object.assign({},(0,ie.Wf)(J)),{position:"absolute",top:-9999,zIndex:J.zIndexPopup,boxSizing:"border-box",padding:J.paddingXXS,overflow:"hidden",fontSize:J.fontSize,fontVariant:"initial",backgroundColor:J.colorBgElevated,borderRadius:J.borderRadiusLG,outline:"none",boxShadow:J.boxShadowSecondary,[`
            &${K}-slide-up-enter${K}-slide-up-enter-active${B}-dropdown-placement-bottomLeft,
            &${K}-slide-up-appear${K}-slide-up-appear-active${B}-dropdown-placement-bottomLeft
          `]:{animationName:he.fJ},[`
            &${K}-slide-up-enter${K}-slide-up-enter-active${B}-dropdown-placement-topLeft,
            &${K}-slide-up-appear${K}-slide-up-appear-active${B}-dropdown-placement-topLeft
          `]:{animationName:he.Qt},[`&${K}-slide-up-leave${K}-slide-up-leave-active${B}-dropdown-placement-bottomLeft`]:{animationName:he.Uw},[`&${K}-slide-up-leave${K}-slide-up-leave-active${B}-dropdown-placement-topLeft`]:{animationName:he.ly},"&-hidden":{display:"none"},"&-empty":{color:J.colorTextDisabled},[`${j}-empty`]:Object.assign(Object.assign({},ze(J)),{color:J.colorTextDisabled}),[`${j}`]:Object.assign(Object.assign({},ze(J)),{cursor:"pointer",transition:`background ${J.motionDurationSlow} ease`,borderRadius:J.borderRadiusSM,"&-group":{color:J.colorTextDescription,fontSize:J.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},ie.vS),"&-state":{flex:"none"},[`&-active:not(${j}-option-disabled)`]:{backgroundColor:J.controlItemBgHover},[`&-selected:not(${j}-option-disabled)`]:{color:J.colorText,fontWeight:J.fontWeightStrong,backgroundColor:J.controlItemBgActive,[`${j}-option-state`]:{color:J.colorPrimary}},"&-disabled":{[`&${j}-option-selected`]:{backgroundColor:J.colorBgContainerDisabled},color:J.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:J.controlPaddingHorizontal*2}}}),"&-rtl":{direction:"rtl"}})},(0,he.oN)(J,"slide-up"),(0,he.oN)(J,"slide-down"),(0,Ve.Fm)(J,"move-up"),(0,Ve.Fm)(J,"move-down")]};const st=2;function vt(J){let{controlHeightSM:K,controlHeight:B,lineWidth:j}=J;const ee=(B-K)/2-j,W=Math.ceil(ee/2);return[ee,W]}function Dt(J,K){const{componentCls:B,iconCls:j}=J,ee=`${B}-selection-overflow`,W=J.controlHeightSM,[De]=vt(J),ot=K?`${B}-${K}`:"";return{[`${B}-multiple${ot}`]:{fontSize:J.fontSize,[ee]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${B}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:`${De-st}px ${st*2}px`,borderRadius:J.borderRadius,[`${B}-show-search&`]:{cursor:"text"},[`${B}-disabled&`]:{background:J.colorBgContainerDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${st}px 0`,lineHeight:`${W}px`,content:'"\\a0"'}},[`
        &${B}-show-arrow ${B}-selector,
        &${B}-allow-clear ${B}-selector
      `]:{paddingInlineEnd:J.fontSizeIcon+J.controlPaddingHorizontal},[`${B}-selection-item`]:{position:"relative",display:"flex",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:W,marginTop:st,marginBottom:st,lineHeight:`${W-J.lineWidth*2}px`,background:J.colorFillSecondary,border:`${J.lineWidth}px solid ${J.colorSplit}`,borderRadius:J.borderRadiusSM,cursor:"default",transition:`font-size ${J.motionDurationSlow}, line-height ${J.motionDurationSlow}, height ${J.motionDurationSlow}`,userSelect:"none",marginInlineEnd:st*2,paddingInlineStart:J.paddingXS,paddingInlineEnd:J.paddingXS/2,[`${B}-disabled&`]:{color:J.colorTextDisabled,borderColor:J.colorBorder,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:J.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},(0,ie.Ro)()),{display:"inline-block",color:J.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${j}`]:{verticalAlign:"-0.2em"},"&:hover":{color:J.colorIconHover}})},[`${ee}-item + ${ee}-item`]:{[`${B}-selection-search`]:{marginInlineStart:0}},[`${B}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:J.inputPaddingHorizontalBase-De,[`
          &-input,
          &-mirror
        `]:{height:W,fontFamily:J.fontFamily,lineHeight:`${W}px`,transition:`all ${J.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${B}-selection-placeholder `]:{position:"absolute",top:"50%",insetInlineStart:J.inputPaddingHorizontalBase,insetInlineEnd:J.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${J.motionDurationSlow}`}}}}function ar(J){const{componentCls:K}=J,B=(0,We.TS)(J,{controlHeight:J.controlHeightSM,controlHeightSM:J.controlHeightXS,borderRadius:J.borderRadiusSM,borderRadiusSM:J.borderRadiusXS}),[,j]=vt(J);return[Dt(J),Dt(B,"sm"),{[`${K}-multiple${K}-sm`]:{[`${K}-selection-placeholder`]:{insetInline:J.controlPaddingHorizontalSM-J.lineWidth},[`${K}-selection-search`]:{marginInlineStart:j}}},Dt((0,We.TS)(J,{fontSize:J.fontSizeLG,controlHeight:J.controlHeightLG,controlHeightSM:J.controlHeight,borderRadius:J.borderRadiusLG,borderRadiusSM:J.borderRadius}),"lg")]}function $t(J,K){const{componentCls:B,inputPaddingHorizontalBase:j,borderRadius:ee}=J,W=J.controlHeight-J.lineWidth*2,De=Math.ceil(J.fontSize*1.25),ot=K?`${B}-${K}`:"";return{[`${B}-single${ot}`]:{fontSize:J.fontSize,[`${B}-selector`]:Object.assign(Object.assign({},(0,ie.Wf)(J)),{display:"flex",borderRadius:ee,[`${B}-selection-search`]:{position:"absolute",top:0,insetInlineStart:j,insetInlineEnd:j,bottom:0,"&-input":{width:"100%"}},[`
          ${B}-selection-item,
          ${B}-selection-placeholder
        `]:{padding:0,lineHeight:`${W}px`,transition:`all ${J.motionDurationSlow}`,"@supports (-moz-appearance: meterbar)":{lineHeight:`${W}px`}},[`${B}-selection-item`]:{position:"relative",userSelect:"none"},[`${B}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${B}-selection-item:after`,`${B}-selection-placeholder:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${B}-show-arrow ${B}-selection-item,
        &${B}-show-arrow ${B}-selection-placeholder
      `]:{paddingInlineEnd:De},[`&${B}-open ${B}-selection-item`]:{color:J.colorTextPlaceholder},[`&:not(${B}-customize-input)`]:{[`${B}-selector`]:{width:"100%",height:J.controlHeight,padding:`0 ${j}px`,[`${B}-selection-search-input`]:{height:W},"&:after":{lineHeight:`${W}px`}}},[`&${B}-customize-input`]:{[`${B}-selector`]:{"&:after":{display:"none"},[`${B}-selection-search`]:{position:"static",width:"100%"},[`${B}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${j}px`,"&:after":{display:"none"}}}}}}}function ur(J){const{componentCls:K}=J,B=J.controlPaddingHorizontalSM-J.lineWidth;return[$t(J),$t((0,We.TS)(J,{controlHeight:J.controlHeightSM,borderRadius:J.borderRadiusSM}),"sm"),{[`${K}-single${K}-sm`]:{[`&:not(${K}-customize-input)`]:{[`${K}-selection-search`]:{insetInlineStart:B,insetInlineEnd:B},[`${K}-selector`]:{padding:`0 ${B}px`},[`&${K}-show-arrow ${K}-selection-search`]:{insetInlineEnd:B+J.fontSize*1.5},[`
            &${K}-show-arrow ${K}-selection-item,
            &${K}-show-arrow ${K}-selection-placeholder
          `]:{paddingInlineEnd:J.fontSize*1.5}}}},$t((0,We.TS)(J,{controlHeight:J.controlHeightLG,fontSize:J.fontSizeLG,borderRadius:J.borderRadiusLG}),"lg")]}var we=m(80110);const At=J=>{const{componentCls:K}=J;return{position:"relative",backgroundColor:J.colorBgContainer,border:`${J.lineWidth}px ${J.lineType} ${J.colorBorder}`,transition:`all ${J.motionDurationMid} ${J.motionEaseInOut}`,input:{cursor:"pointer"},[`${K}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit"}},[`${K}-disabled&`]:{color:J.colorTextDisabled,background:J.colorBgContainerDisabled,cursor:"not-allowed",[`${K}-multiple&`]:{background:J.colorBgContainerDisabled},input:{cursor:"not-allowed"}}}},nt=function(J,K){let B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:j,borderHoverColor:ee,outlineColor:W,antCls:De}=K,ot=B?{[`${j}-selector`]:{borderColor:ee}}:{};return{[J]:{[`&:not(${j}-disabled):not(${j}-customize-input):not(${De}-pagination-size-changer)`]:Object.assign(Object.assign({},ot),{[`${j}-focused& ${j}-selector`]:{borderColor:ee,boxShadow:`0 0 0 ${K.controlOutlineWidth}px ${W}`,outline:0},[`&:hover ${j}-selector`]:{borderColor:ee}})}}},Lt=J=>{const{componentCls:K}=J;return{[`${K}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},St=J=>{const{componentCls:K,inputPaddingHorizontalBase:B,iconCls:j}=J;return{[K]:Object.assign(Object.assign({},(0,ie.Wf)(J)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${K}-customize-input) ${K}-selector`]:Object.assign(Object.assign({},At(J)),Lt(J)),[`${K}-selection-item`]:Object.assign({flex:1,fontWeight:"normal"},ie.vS),[`${K}-selection-placeholder`]:Object.assign(Object.assign({},ie.vS),{flex:1,color:J.colorTextPlaceholder,pointerEvents:"none"}),[`${K}-arrow`]:Object.assign(Object.assign({},(0,ie.Ro)()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:B,height:J.fontSizeIcon,marginTop:-J.fontSizeIcon/2,color:J.colorTextQuaternary,fontSize:J.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[j]:{verticalAlign:"top",transition:`transform ${J.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${K}-suffix)`]:{pointerEvents:"auto"}},[`${K}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${K}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:B,zIndex:1,display:"inline-block",width:J.fontSizeIcon,height:J.fontSizeIcon,marginTop:-J.fontSizeIcon/2,color:J.colorTextQuaternary,fontSize:J.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:J.colorBgContainer,cursor:"pointer",opacity:0,transition:`color ${J.motionDurationMid} ease, opacity ${J.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:J.colorTextTertiary}},"&:hover":{[`${K}-clear`]:{opacity:1}}}),[`${K}-has-feedback`]:{[`${K}-clear`]:{insetInlineEnd:B+J.fontSize+J.paddingXXS}}}},Ut=J=>{const{componentCls:K}=J;return[{[K]:{[`&-borderless ${K}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${K}-in-form-item`]:{width:"100%"}}},St(J),ur(J),ar(J),Re(J),{[`${K}-rtl`]:{direction:"rtl"}},nt(K,(0,We.TS)(J,{borderHoverColor:J.colorPrimaryHover,outlineColor:J.controlOutline})),nt(`${K}-status-error`,(0,We.TS)(J,{borderHoverColor:J.colorErrorHover,outlineColor:J.colorErrorOutline}),!0),nt(`${K}-status-warning`,(0,We.TS)(J,{borderHoverColor:J.colorWarningHover,outlineColor:J.colorWarningOutline}),!0),(0,we.c)(J,{borderElCls:`${K}-selector`,focusElCls:`${K}-focused`})]};var lt=(0,Ne.Z)("Select",(J,K)=>{let{rootPrefixCls:B}=K;const j=(0,We.TS)(J,{rootPrefixCls:B,inputPaddingHorizontalBase:J.paddingSM-1});return[Ut(j)]},J=>({zIndexPopup:J.zIndexPopupBase+50})),Et=function(J,K){var B={};for(var j in J)Object.prototype.hasOwnProperty.call(J,j)&&K.indexOf(j)<0&&(B[j]=J[j]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,j=Object.getOwnPropertySymbols(J);ee<j.length;ee++)K.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(J,j[ee])&&(B[j[ee]]=J[j[ee]]);return B};const Zt="SECRET_COMBOBOX_MODE_DO_NOT_USE",Be=(J,K)=>{var{prefixCls:B,bordered:j=!0,className:ee,rootClassName:W,getPopupContainer:De,popupClassName:ot,dropdownClassName:Wt,listHeight:Ct=256,placement:Qt,listItemHeight:ir=24,size:Er,disabled:Qr,notFoundContent:Mt,status:br,showArrow:Nt}=J,Pr=Et(J,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]);const{getPopupContainer:_r,getPrefixCls:kr,renderEmpty:zt,direction:mr,virtual:Or,dropdownMatchSelectWidth:X,select:Nr}=R.useContext(z.E_),Xe=R.useContext(O.Z),xe=kr("select",B),rt=kr(),{compactSize:kt,compactItemClassnames:cr}=(0,Te.ri)(xe,mr),[Ar,Lr]=lt(xe),sr=R.useMemo(()=>{const{mode:di}=Pr;if(di!=="combobox")return di===Zt?"combobox":di},[Pr.mode]),Ge=sr==="multiple"||sr==="tags",Gr=Nt!==void 0?Nt:Pr.loading||!(Ge||sr==="combobox"),{status:on,hasFeedback:cn,isFormItemInput:Dn,feedbackIcon:ci}=R.useContext(F.aM),ia=(0,Ae.F)(on,br);let Vi;Mt!==void 0?Vi=Mt:sr==="combobox"?Vi=null:Vi=(zt==null?void 0:zt("Select"))||R.createElement(L.Z,{componentName:"Select"});const{suffixIcon:On,itemIcon:ji,removeIcon:oi,clearIcon:Hi}=_e(Object.assign(Object.assign({},Pr),{multiple:Ge,hasFeedback:cn,feedbackIcon:ci,showArrow:Gr,prefixCls:xe})),Ca=(0,$.Z)(Pr,["suffixIcon","itemIcon"]),Wi=C()(ot||Wt,{[`${xe}-dropdown-${mr}`]:mr==="rtl"},W,Lr),jo=kt||Er||Xe,uo=R.useContext(T.Z),Pn=Qr!=null?Qr:uo,bn=C()({[`${xe}-lg`]:jo==="large",[`${xe}-sm`]:jo==="small",[`${xe}-rtl`]:mr==="rtl",[`${xe}-borderless`]:!j,[`${xe}-in-form-item`]:Dn},(0,Ae.Z)(xe,ia,cn),cr,ee,W,Lr),Oi=()=>Qt!==void 0?Qt:mr==="rtl"?"bottomRight":"bottomLeft";return Ar(R.createElement(l.ZP,Object.assign({ref:K,virtual:Or,dropdownMatchSelectWidth:X,showSearch:Nr==null?void 0:Nr.showSearch},Ca,{transitionName:(0,ue.mL)(rt,(0,ue.q0)(Qt),Pr.transitionName),listHeight:Ct,listItemHeight:ir,mode:sr,prefixCls:xe,placement:Oi(),direction:mr,inputIcon:On,menuItemSelectedIcon:ji,removeIcon:oi,clearIcon:Hi,notFoundContent:Vi,className:bn,getPopupContainer:De||_r,dropdownClassName:Wi,showArrow:cn||Nt,disabled:Pn})))},He=R.forwardRef(Be),ft=(0,ht.Z)(He);He.SECRET_COMBOBOX_MODE_DO_NOT_USE=Zt,He.Option=l.Wx,He.OptGroup=l.Xo,He._InternalPanelDoNotUseOrYouWillBeFired=ft;var Z=He},4173:function(Qe,te,m){"use strict";m.d(te,{BR:function(){return F},ri:function(){return O}});var v=m(94184),C=m.n(v),l=m(50344),$=m(67294),R=m(53124),z=m(51916),L=function(re,pe){var fe={};for(var ke in re)Object.prototype.hasOwnProperty.call(re,ke)&&pe.indexOf(ke)<0&&(fe[ke]=re[ke]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,ke=Object.getOwnPropertySymbols(re);je<ke.length;je++)pe.indexOf(ke[je])<0&&Object.prototype.propertyIsEnumerable.call(re,ke[je])&&(fe[ke[je]]=re[ke[je]]);return fe};const T=$.createContext(null),O=(re,pe)=>{const fe=$.useContext(T),ke=$.useMemo(()=>{if(!fe)return"";const{compactDirection:je,isFirstItem:bt,isLastItem:ut}=fe,wt=je==="vertical"?"-vertical-":"-";return C()({[`${re}-compact${wt}item`]:!0,[`${re}-compact${wt}first-item`]:bt,[`${re}-compact${wt}last-item`]:ut,[`${re}-compact${wt}item-rtl`]:pe==="rtl"})},[re,pe,fe]);return{compactSize:fe==null?void 0:fe.compactSize,compactDirection:fe==null?void 0:fe.compactDirection,compactItemClassnames:ke}},F=re=>{let{children:pe}=re;return $.createElement(T.Provider,{value:null},pe)},ue=re=>{var{children:pe}=re,fe=L(re,["children"]);return $.createElement(T.Provider,{value:fe},pe)},Ae=re=>{const{getPrefixCls:pe,direction:fe}=$.useContext(R.E_),{size:ke="middle",direction:je,block:bt,prefixCls:ut,className:wt,rootClassName:se,children:qe}=re,me=L(re,["size","direction","block","prefixCls","className","rootClassName","children"]),_e=pe("space-compact",ut),[Te,ht]=(0,z.Z)(_e),We=C()(_e,ht,{[`${_e}-rtl`]:fe==="rtl",[`${_e}-block`]:bt,[`${_e}-vertical`]:je==="vertical"},wt,se),Ne=$.useContext(T),he=(0,l.Z)(qe),Ve=$.useMemo(()=>he.map((ie,ze)=>{const Le=ie&&ie.key||`${_e}-item-${ze}`;return $.createElement(ue,{key:Le,compactSize:ke,compactDirection:je,isFirstItem:ze===0&&(!Ne||(Ne==null?void 0:Ne.isFirstItem)),isLastItem:ze===he.length-1&&(!Ne||(Ne==null?void 0:Ne.isLastItem))},ie)}),[ke,he,Ne]);return he.length===0?null:Te($.createElement("div",Object.assign({className:We},me),Ve))};te.ZP=Ae},51916:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return R}});var v=m(67968),l=z=>{const{componentCls:L}=z;return{[L]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};const $=z=>{const{componentCls:L}=z;return{[L]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${L}-item`]:{"&:empty":{display:"none"}}}}};var R=(0,v.Z)("Space",z=>[$(z),l(z)])},75081:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return _e}});var v=m(94184),C=m.n(v);function l(Te,ht,We){var Ne=We||{},he=Ne.noTrailing,Ve=he===void 0?!1:he,ie=Ne.noLeading,ze=ie===void 0?!1:ie,Le=Ne.debounceMode,Re=Le===void 0?void 0:Le,st,vt=!1,Dt=0;function ar(){st&&clearTimeout(st)}function $t(we){var At=we||{},nt=At.upcomingOnly,Lt=nt===void 0?!1:nt;ar(),vt=!Lt}function ur(){for(var we=arguments.length,At=new Array(we),nt=0;nt<we;nt++)At[nt]=arguments[nt];var Lt=this,St=Date.now()-Dt;if(vt)return;function Ut(){Dt=Date.now(),ht.apply(Lt,At)}function lt(){st=void 0}!ze&&Re&&!st&&Ut(),ar(),Re===void 0&&St>Te?ze?(Dt=Date.now(),Ve||(st=setTimeout(Re?lt:Ut,Te))):Ut():Ve!==!0&&(st=setTimeout(Re?lt:Ut,Re===void 0?Te-St:Te))}return ur.cancel=$t,ur}function $(Te,ht,We){var Ne=We||{},he=Ne.atBegin,Ve=he===void 0?!1:he;return l(Te,ht,{debounceMode:Ve!==!1})}var R=m(98423),z=m(67294),L=m(53124),T=m(96159),O=m(51222),F=m(67968),ue=m(45503),Ae=m(14747);const re=new O.E4("antSpinMove",{to:{opacity:1}}),pe=new O.E4("antRotate",{to:{transform:"rotate(405deg)"}}),fe=Te=>({[`${Te.componentCls}`]:Object.assign(Object.assign({},(0,Ae.Wf)(Te)),{position:"absolute",display:"none",color:Te.colorPrimary,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${Te.motionDurationSlow} ${Te.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${Te.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:Te.contentHeight,[`${Te.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-Te.spinDotSize/2},[`${Te.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(Te.spinDotSize-Te.fontSize)/2+2,textShadow:`0 1px 2px ${Te.colorBgContainer}`},[`&${Te.componentCls}-show-text ${Te.componentCls}-dot`]:{marginTop:-(Te.spinDotSize/2)-10},"&-sm":{[`${Te.componentCls}-dot`]:{margin:-Te.spinDotSizeSM/2},[`${Te.componentCls}-text`]:{paddingTop:(Te.spinDotSizeSM-Te.fontSize)/2+2},[`&${Te.componentCls}-show-text ${Te.componentCls}-dot`]:{marginTop:-(Te.spinDotSizeSM/2)-10}},"&-lg":{[`${Te.componentCls}-dot`]:{margin:-(Te.spinDotSizeLG/2)},[`${Te.componentCls}-text`]:{paddingTop:(Te.spinDotSizeLG-Te.fontSize)/2+2},[`&${Te.componentCls}-show-text ${Te.componentCls}-dot`]:{marginTop:-(Te.spinDotSizeLG/2)-10}}},[`${Te.componentCls}-container`]:{position:"relative",transition:`opacity ${Te.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:Te.colorBgContainer,opacity:0,transition:`all ${Te.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${Te.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:Te.spinDotDefault},[`${Te.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:Te.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(Te.spinDotSize-Te.marginXXS/2)/2,height:(Te.spinDotSize-Te.marginXXS/2)/2,backgroundColor:Te.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:re,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:pe,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${Te.componentCls}-dot`]:{fontSize:Te.spinDotSizeSM,i:{width:(Te.spinDotSizeSM-Te.marginXXS/2)/2,height:(Te.spinDotSizeSM-Te.marginXXS/2)/2}},[`&-lg ${Te.componentCls}-dot`]:{fontSize:Te.spinDotSizeLG,i:{width:(Te.spinDotSizeLG-Te.marginXXS)/2,height:(Te.spinDotSizeLG-Te.marginXXS)/2}},[`&${Te.componentCls}-show-text ${Te.componentCls}-text`]:{display:"block"}})});var ke=(0,F.Z)("Spin",Te=>{const ht=(0,ue.TS)(Te,{spinDotDefault:Te.colorTextDescription,spinDotSize:Te.controlHeightLG/2,spinDotSizeSM:Te.controlHeightLG*.35,spinDotSizeLG:Te.controlHeight});return[fe(ht)]},{contentHeight:400}),je=function(Te,ht){var We={};for(var Ne in Te)Object.prototype.hasOwnProperty.call(Te,Ne)&&ht.indexOf(Ne)<0&&(We[Ne]=Te[Ne]);if(Te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var he=0,Ne=Object.getOwnPropertySymbols(Te);he<Ne.length;he++)ht.indexOf(Ne[he])<0&&Object.prototype.propertyIsEnumerable.call(Te,Ne[he])&&(We[Ne[he]]=Te[Ne[he]]);return We};const bt=null;let ut=null;function wt(Te,ht){const{indicator:We}=ht,Ne=`${Te}-dot`;return We===null?null:(0,T.l$)(We)?(0,T.Tm)(We,{className:C()(We.props.className,Ne)}):(0,T.l$)(ut)?(0,T.Tm)(ut,{className:C()(ut.props.className,Ne)}):z.createElement("span",{className:C()(Ne,`${Te}-dot-spin`)},z.createElement("i",{className:`${Te}-dot-item`}),z.createElement("i",{className:`${Te}-dot-item`}),z.createElement("i",{className:`${Te}-dot-item`}),z.createElement("i",{className:`${Te}-dot-item`}))}function se(Te,ht){return!!Te&&!!ht&&!isNaN(Number(ht))}const qe=Te=>{const{spinPrefixCls:ht,spinning:We=!0,delay:Ne=0,className:he,rootClassName:Ve,size:ie="default",tip:ze,wrapperClassName:Le,style:Re,children:st,hashId:vt}=Te,Dt=je(Te,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[ar,$t]=z.useState(()=>We&&!se(We,Ne));z.useEffect(()=>{if(We){const Ut=$(Ne,()=>{$t(!0)});return Ut(),()=>{var lt;(lt=Ut==null?void 0:Ut.cancel)===null||lt===void 0||lt.call(Ut)}}$t(!1)},[Ne,We]);const ur=z.useMemo(()=>typeof st!="undefined",[st]),{direction:we}=z.useContext(L.E_),At=C()(ht,{[`${ht}-sm`]:ie==="small",[`${ht}-lg`]:ie==="large",[`${ht}-spinning`]:ar,[`${ht}-show-text`]:!!ze,[`${ht}-rtl`]:we==="rtl"},he,Ve,vt),nt=C()(`${ht}-container`,{[`${ht}-blur`]:ar}),Lt=(0,R.Z)(Dt,["indicator","prefixCls"]),St=z.createElement("div",Object.assign({},Lt,{style:Re,className:At,"aria-live":"polite","aria-busy":ar}),wt(ht,Te),ze?z.createElement("div",{className:`${ht}-text`},ze):null);return ur?z.createElement("div",Object.assign({},Lt,{className:C()(`${ht}-nested-loading`,Le,vt)}),ar&&z.createElement("div",{key:"loading"},St),z.createElement("div",{className:nt,key:"container"},st)):St},me=Te=>{const{prefixCls:ht}=Te,{getPrefixCls:We}=z.useContext(L.E_),Ne=We("spin",ht),[he,Ve]=ke(Ne),ie=Object.assign(Object.assign({},Te),{spinPrefixCls:Ne,hashId:Ve});return he(z.createElement(qe,Object.assign({},ie)))};me.setDefaultIndicator=Te=>{ut=Te};var _e=me},80110:function(Qe,te,m){"use strict";m.d(te,{c:function(){return l}});function v($,R,z){const{focusElCls:L,focus:T,borderElCls:O}=z,F=O?"> *":"",ue=["hover",T?"focus":null,"active"].filter(Boolean).map(Ae=>`&:${Ae} ${F}`).join(",");return{[`&-item:not(${R}-last-item)`]:{marginInlineEnd:-$.lineWidth},"&-item":Object.assign(Object.assign({[ue]:{zIndex:2}},L?{[`&${L}`]:{zIndex:2}}:{}),{[`&[disabled] ${F}`]:{zIndex:0}})}}function C($,R,z){const{borderElCls:L}=z,T=L?`> ${L}`:"";return{[`&-item:not(${R}-first-item):not(${R}-last-item) ${T}`]:{borderRadius:0},[`&-item:not(${R}-last-item)${R}-first-item`]:{[`& ${T}, &${$}-sm ${T}, &${$}-lg ${T}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${R}-first-item)${R}-last-item`]:{[`& ${T}, &${$}-sm ${T}, &${$}-lg ${T}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function l($){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:z}=$,L=`${z}-compact`;return{[L]:Object.assign(Object.assign({},v($,L,R)),C(z,L,R))}}},14747:function(Qe,te,m){"use strict";m.d(te,{Lx:function(){return R},Qy:function(){return T},Ro:function(){return l},Wf:function(){return C},dF:function(){return $},du:function(){return z},oN:function(){return L},vS:function(){return v}});const v={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},C=O=>({boxSizing:"border-box",margin:0,padding:0,color:O.colorText,fontSize:O.fontSize,lineHeight:O.lineHeight,listStyle:"none",fontFamily:O.fontFamily}),l=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),$=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),R=O=>({a:{color:O.colorLink,textDecoration:O.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${O.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:O.colorLinkHover},"&:active":{color:O.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:O.linkHoverDecoration,outline:0},"&:focus":{textDecoration:O.linkFocusDecoration,outline:0},"&[disabled]":{color:O.colorTextDisabled,cursor:"not-allowed"}}}),z=(O,F)=>{const{fontFamily:ue,fontSize:Ae}=O,re=`[class^="${F}"], [class*=" ${F}"]`;return{[re]:{fontFamily:ue,fontSize:Ae,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[re]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},L=O=>({outline:`${O.lineWidthBold}px solid ${O.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),T=O=>({"&:focus-visible":Object.assign({},L(O))})},33507:function(Qe,te){"use strict";const m=v=>({[v.componentCls]:{[`${v.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${v.motionDurationMid} ${v.motionEaseInOut},
        opacity ${v.motionDurationMid} ${v.motionEaseInOut} !important`}},[`${v.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${v.motionDurationMid} ${v.motionEaseInOut},
        opacity ${v.motionDurationMid} ${v.motionEaseInOut} !important`}}});te.Z=m},93590:function(Qe,te,m){"use strict";m.d(te,{R:function(){return l}});const v=$=>({animationDuration:$,animationFillMode:"both"}),C=$=>({animationDuration:$,animationFillMode:"both"}),l=function($,R,z,L){const O=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${O}${$}-enter,
      ${O}${$}-appear
    `]:Object.assign(Object.assign({},v(L)),{animationPlayState:"paused"}),[`${O}${$}-leave`]:Object.assign(Object.assign({},C(L)),{animationPlayState:"paused"}),[`
      ${O}${$}-enter${$}-enter-active,
      ${O}${$}-appear${$}-appear-active
    `]:{animationName:R,animationPlayState:"running"},[`${O}${$}-leave${$}-leave-active`]:{animationName:z,animationPlayState:"running",pointerEvents:"none"}}}},33297:function(Qe,te,m){"use strict";m.d(te,{Fm:function(){return Ae}});var v=m(51222),C=m(93590);const l=new v.E4("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),$=new v.E4("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),R=new v.E4("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),z=new v.E4("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),L=new v.E4("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),T=new v.E4("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),O=new v.E4("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),F=new v.E4("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),ue={"move-up":{inKeyframes:O,outKeyframes:F},"move-down":{inKeyframes:l,outKeyframes:$},"move-left":{inKeyframes:R,outKeyframes:z},"move-right":{inKeyframes:L,outKeyframes:T}},Ae=(re,pe)=>{const{antCls:fe}=re,ke=`${fe}-${pe}`,{inKeyframes:je,outKeyframes:bt}=ue[pe];return[(0,C.R)(ke,je,bt,re.motionDurationMid),{[`
        ${ke}-enter,
        ${ke}-appear
      `]:{opacity:0,animationTimingFunction:re.motionEaseOutCirc},[`${ke}-leave`]:{animationTimingFunction:re.motionEaseInOutCirc}}]}},67771:function(Qe,te,m){"use strict";m.d(te,{Qt:function(){return R},Uw:function(){return $},fJ:function(){return l},ly:function(){return z},oN:function(){return Ae}});var v=m(51222),C=m(93590);const l=new v.E4("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),$=new v.E4("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),R=new v.E4("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),z=new v.E4("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),L=new v.E4("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),T=new v.E4("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),O=new v.E4("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),F=new v.E4("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),ue={"slide-up":{inKeyframes:l,outKeyframes:$},"slide-down":{inKeyframes:R,outKeyframes:z},"slide-left":{inKeyframes:L,outKeyframes:T},"slide-right":{inKeyframes:O,outKeyframes:F}},Ae=(re,pe)=>{const{antCls:fe}=re,ke=`${fe}-${pe}`,{inKeyframes:je,outKeyframes:bt}=ue[pe];return[(0,C.R)(ke,je,bt,re.motionDurationMid),{[`
      ${ke}-enter,
      ${ke}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:re.motionEaseOutQuint},[`${ke}-leave`]:{animationTimingFunction:re.motionEaseInQuint}}]}},50438:function(Qe,te,m){"use strict";m.d(te,{_y:function(){return ke}});var v=m(51222),C=m(93590);const l=new v.E4("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),$=new v.E4("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),R=new v.E4("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),z=new v.E4("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),L=new v.E4("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),T=new v.E4("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),O=new v.E4("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),F=new v.E4("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),ue=new v.E4("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Ae=new v.E4("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),re=new v.E4("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),pe=new v.E4("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),fe={zoom:{inKeyframes:l,outKeyframes:$},"zoom-big":{inKeyframes:R,outKeyframes:z},"zoom-big-fast":{inKeyframes:R,outKeyframes:z},"zoom-left":{inKeyframes:O,outKeyframes:F},"zoom-right":{inKeyframes:ue,outKeyframes:Ae},"zoom-up":{inKeyframes:L,outKeyframes:T},"zoom-down":{inKeyframes:re,outKeyframes:pe}},ke=(je,bt)=>{const{antCls:ut}=je,wt=`${ut}-${bt}`,{inKeyframes:se,outKeyframes:qe}=fe[bt];return[(0,C.R)(wt,se,qe,bt==="zoom-big-fast"?je.motionDurationFast:je.motionDurationMid),{[`
        ${wt}-enter,
        ${wt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:je.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${wt}-leave`]:{animationTimingFunction:je.motionEaseInOutCirc}}]}},77786:function(Qe,te,m){"use strict";m.d(te,{qN:function(){return C},ZP:function(){return R},fS:function(){return l}});const v=(z,L,T,O,F)=>{const ue=z/2,Ae=0,re=ue,pe=T*1/Math.sqrt(2),fe=ue-T*(1-1/Math.sqrt(2)),ke=ue-L*(1/Math.sqrt(2)),je=T*(Math.sqrt(2)-1)+L*(1/Math.sqrt(2)),bt=2*ue-ke,ut=je,wt=2*ue-pe,se=fe,qe=2*ue-Ae,me=re,_e=ue*Math.sqrt(2)+T*(Math.sqrt(2)-2);return{borderRadius:{_skip_check_:!0,value:`0 0 ${L}px`},pointerEvents:"none",width:z,height:z,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:z,height:z/2,background:O,clipPath:`path('M ${Ae} ${re} A ${T} ${T} 0 0 0 ${pe} ${fe} L ${ke} ${je} A ${L} ${L} 0 0 1 ${bt} ${ut} L ${wt} ${se} A ${T} ${T} 0 0 0 ${qe} ${me} Z')`,content:'""'},"&::after":{content:'""',position:"absolute",width:_e,height:_e,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${L}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:F,zIndex:0,background:"transparent"}}},C=8;function l(z){const L=C,{contentRadius:T,limitVerticalRadius:O}=z,F=T>12?T+2:12;return{dropdownArrowOffset:F,dropdownArrowOffsetVertical:O?L:F}}function $(z,L){return z?L:{}}function R(z,L){const{componentCls:T,sizePopupArrow:O,borderRadiusXS:F,borderRadiusOuter:ue,boxShadowPopoverArrow:Ae}=z,{colorBg:re,contentRadius:pe=z.borderRadiusLG,limitVerticalRadius:fe,arrowDistance:ke=0,arrowPlacement:je={left:!0,right:!0,top:!0,bottom:!0}}=L,{dropdownArrowOffsetVertical:bt,dropdownArrowOffset:ut}=l({contentRadius:pe,limitVerticalRadius:fe});return{[T]:Object.assign(Object.assign(Object.assign(Object.assign({[`${T}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},v(O,F,ue,re,Ae)),{"&:before":{background:re}})]},$(!!je.top,{[[`&-placement-top ${T}-arrow`,`&-placement-topLeft ${T}-arrow`,`&-placement-topRight ${T}-arrow`].join(",")]:{bottom:ke,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${T}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${T}-arrow`]:{left:{_skip_check_:!0,value:ut}},[`&-placement-topRight ${T}-arrow`]:{right:{_skip_check_:!0,value:ut}}})),$(!!je.bottom,{[[`&-placement-bottom ${T}-arrow`,`&-placement-bottomLeft ${T}-arrow`,`&-placement-bottomRight ${T}-arrow`].join(",")]:{top:ke,transform:"translateY(-100%)"},[`&-placement-bottom ${T}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${T}-arrow`]:{left:{_skip_check_:!0,value:ut}},[`&-placement-bottomRight ${T}-arrow`]:{right:{_skip_check_:!0,value:ut}}})),$(!!je.left,{[[`&-placement-left ${T}-arrow`,`&-placement-leftTop ${T}-arrow`,`&-placement-leftBottom ${T}-arrow`].join(",")]:{right:{_skip_check_:!0,value:ke},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${T}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${T}-arrow`]:{top:bt},[`&-placement-leftBottom ${T}-arrow`]:{bottom:bt}})),$(!!je.right,{[[`&-placement-right ${T}-arrow`,`&-placement-rightTop ${T}-arrow`,`&-placement-rightBottom ${T}-arrow`].join(",")]:{left:{_skip_check_:!0,value:ke},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${T}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${T}-arrow`]:{top:bt},[`&-placement-rightBottom ${T}-arrow`]:{bottom:bt}}))}}},72269:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return Ve}});var v=m(84273),C=m(94184),l=m.n(C),$=m(87462),R=m(4942),z=m(97685),L=m(91),T=m(67294),O=m(21770),F=m(15105),ue=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],Ae=T.forwardRef(function(ie,ze){var Le,Re=ie.prefixCls,st=Re===void 0?"rc-switch":Re,vt=ie.className,Dt=ie.checked,ar=ie.defaultChecked,$t=ie.disabled,ur=ie.loadingIcon,we=ie.checkedChildren,At=ie.unCheckedChildren,nt=ie.onClick,Lt=ie.onChange,St=ie.onKeyDown,Ut=(0,L.Z)(ie,ue),lt=(0,O.Z)(!1,{value:Dt,defaultValue:ar}),Et=(0,z.Z)(lt,2),Zt=Et[0],Be=Et[1];function He(K,B){var j=Zt;return $t||(j=K,Be(j),Lt==null||Lt(j,B)),j}function ft(K){K.which===F.Z.LEFT?He(!1,K):K.which===F.Z.RIGHT&&He(!0,K),St==null||St(K)}function Z(K){var B=He(!Zt,K);nt==null||nt(B,K)}var J=l()(st,vt,(Le={},(0,R.Z)(Le,"".concat(st,"-checked"),Zt),(0,R.Z)(Le,"".concat(st,"-disabled"),$t),Le));return T.createElement("button",(0,$.Z)({},Ut,{type:"button",role:"switch","aria-checked":Zt,disabled:$t,className:J,ref:ze,onKeyDown:ft,onClick:Z}),ur,T.createElement("span",{className:"".concat(st,"-inner")},T.createElement("span",{className:"".concat(st,"-inner-checked")},we),T.createElement("span",{className:"".concat(st,"-inner-unchecked")},At)))});Ae.displayName="Switch";var re=Ae,pe=m(53124),fe=m(98866),ke=m(97647),je=m(45353),bt=m(10274),ut=m(67968),wt=m(45503),se=m(14747);const qe=ie=>{const{componentCls:ze}=ie,Le=`${ze}-inner`;return{[ze]:{[`&${ze}-small`]:{minWidth:ie.switchMinWidthSM,height:ie.switchHeightSM,lineHeight:`${ie.switchHeightSM}px`,[`${ze}-inner`]:{paddingInlineStart:ie.switchInnerMarginMaxSM,paddingInlineEnd:ie.switchInnerMarginMinSM,[`${Le}-checked`]:{marginInlineStart:`calc(-100% + ${ie.switchPinSizeSM+ie.switchPadding*2}px - ${ie.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(100% - ${ie.switchPinSizeSM+ie.switchPadding*2}px + ${ie.switchInnerMarginMaxSM*2}px)`},[`${Le}-unchecked`]:{marginTop:-ie.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}},[`${ze}-handle`]:{width:ie.switchPinSizeSM,height:ie.switchPinSizeSM},[`${ze}-loading-icon`]:{top:(ie.switchPinSizeSM-ie.switchLoadingIconSize)/2,fontSize:ie.switchLoadingIconSize},[`&${ze}-checked`]:{[`${ze}-inner`]:{paddingInlineStart:ie.switchInnerMarginMinSM,paddingInlineEnd:ie.switchInnerMarginMaxSM,[`${Le}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${Le}-unchecked`]:{marginInlineStart:`calc(100% - ${ie.switchPinSizeSM+ie.switchPadding*2}px + ${ie.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(-100% + ${ie.switchPinSizeSM+ie.switchPadding*2}px - ${ie.switchInnerMarginMaxSM*2}px)`}},[`${ze}-handle`]:{insetInlineStart:`calc(100% - ${ie.switchPinSizeSM+ie.switchPadding}px)`}},[`&:not(${ze}-disabled):active`]:{[`&:not(${ze}-checked) ${Le}`]:{[`${Le}-unchecked`]:{marginInlineStart:ie.marginXXS/2,marginInlineEnd:-ie.marginXXS/2}},[`&${ze}-checked ${Le}`]:{[`${Le}-checked`]:{marginInlineStart:-ie.marginXXS/2,marginInlineEnd:ie.marginXXS/2}}}}}}},me=ie=>{const{componentCls:ze}=ie;return{[ze]:{[`${ze}-loading-icon${ie.iconCls}`]:{position:"relative",top:(ie.switchPinSize-ie.fontSize)/2,color:ie.switchLoadingIconColor,verticalAlign:"top"},[`&${ze}-checked ${ze}-loading-icon`]:{color:ie.switchColor}}}},_e=ie=>{const{componentCls:ze}=ie,Le=`${ze}-handle`;return{[ze]:{[Le]:{position:"absolute",top:ie.switchPadding,insetInlineStart:ie.switchPadding,width:ie.switchPinSize,height:ie.switchPinSize,transition:`all ${ie.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:ie.colorWhite,borderRadius:ie.switchPinSize/2,boxShadow:ie.switchHandleShadow,transition:`all ${ie.switchDuration} ease-in-out`,content:'""'}},[`&${ze}-checked ${Le}`]:{insetInlineStart:`calc(100% - ${ie.switchPinSize+ie.switchPadding}px)`},[`&:not(${ze}-disabled):active`]:{[`${Le}::before`]:{insetInlineEnd:ie.switchHandleActiveInset,insetInlineStart:0},[`&${ze}-checked ${Le}::before`]:{insetInlineEnd:0,insetInlineStart:ie.switchHandleActiveInset}}}}},Te=ie=>{const{componentCls:ze}=ie,Le=`${ze}-inner`;return{[ze]:{[Le]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:ie.switchInnerMarginMax,paddingInlineEnd:ie.switchInnerMarginMin,transition:`padding-inline-start ${ie.switchDuration} ease-in-out, padding-inline-end ${ie.switchDuration} ease-in-out`,[`${Le}-checked, ${Le}-unchecked`]:{display:"block",color:ie.colorTextLightSolid,fontSize:ie.fontSizeSM,transition:`margin-inline-start ${ie.switchDuration} ease-in-out, margin-inline-end ${ie.switchDuration} ease-in-out`,pointerEvents:"none"},[`${Le}-checked`]:{marginInlineStart:`calc(-100% + ${ie.switchPinSize+ie.switchPadding*2}px - ${ie.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(100% - ${ie.switchPinSize+ie.switchPadding*2}px + ${ie.switchInnerMarginMax*2}px)`},[`${Le}-unchecked`]:{marginTop:-ie.switchHeight,marginInlineStart:0,marginInlineEnd:0}},[`&${ze}-checked ${Le}`]:{paddingInlineStart:ie.switchInnerMarginMin,paddingInlineEnd:ie.switchInnerMarginMax,[`${Le}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${Le}-unchecked`]:{marginInlineStart:`calc(100% - ${ie.switchPinSize+ie.switchPadding*2}px + ${ie.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(-100% + ${ie.switchPinSize+ie.switchPadding*2}px - ${ie.switchInnerMarginMax*2}px)`}},[`&:not(${ze}-disabled):active`]:{[`&:not(${ze}-checked) ${Le}`]:{[`${Le}-unchecked`]:{marginInlineStart:ie.switchPadding*2,marginInlineEnd:-ie.switchPadding*2}},[`&${ze}-checked ${Le}`]:{[`${Le}-checked`]:{marginInlineStart:-ie.switchPadding*2,marginInlineEnd:ie.switchPadding*2}}}}}},ht=ie=>{const{componentCls:ze}=ie;return{[ze]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,se.Wf)(ie)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:ie.switchMinWidth,height:ie.switchHeight,lineHeight:`${ie.switchHeight}px`,verticalAlign:"middle",background:ie.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${ie.motionDurationMid}`,userSelect:"none",[`&:hover:not(${ze}-disabled)`]:{background:ie.colorTextTertiary}}),(0,se.Qy)(ie)),{[`&${ze}-checked`]:{background:ie.switchColor,[`&:hover:not(${ze}-disabled)`]:{background:ie.colorPrimaryHover}},[`&${ze}-loading, &${ze}-disabled`]:{cursor:"not-allowed",opacity:ie.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${ze}-rtl`]:{direction:"rtl"}})}};var We=(0,ut.Z)("Switch",ie=>{const ze=ie.fontSize*ie.lineHeight,Le=ie.controlHeight/2,Re=2,st=ze-Re*2,vt=Le-Re*2,Dt=(0,wt.TS)(ie,{switchMinWidth:st*2+Re*4,switchHeight:ze,switchDuration:ie.motionDurationMid,switchColor:ie.colorPrimary,switchDisabledOpacity:ie.opacityLoading,switchInnerMarginMin:st/2,switchInnerMarginMax:st+Re+Re*2,switchPadding:Re,switchPinSize:st,switchBg:ie.colorBgContainer,switchMinWidthSM:vt*2+Re*2,switchHeightSM:Le,switchInnerMarginMinSM:vt/2,switchInnerMarginMaxSM:vt+Re+Re*2,switchPinSizeSM:vt,switchHandleShadow:`0 2px 4px 0 ${new bt.C("#00230b").setAlpha(.2).toRgbString()}`,switchLoadingIconSize:ie.fontSizeIcon*.75,switchLoadingIconColor:`rgba(0, 0, 0, ${ie.opacityLoading})`,switchHandleActiveInset:"-30%"});return[ht(Dt),Te(Dt),_e(Dt),me(Dt),qe(Dt)]}),Ne=function(ie,ze){var Le={};for(var Re in ie)Object.prototype.hasOwnProperty.call(ie,Re)&&ze.indexOf(Re)<0&&(Le[Re]=ie[Re]);if(ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,Re=Object.getOwnPropertySymbols(ie);st<Re.length;st++)ze.indexOf(Re[st])<0&&Object.prototype.propertyIsEnumerable.call(ie,Re[st])&&(Le[Re[st]]=ie[Re[st]]);return Le};const he=T.forwardRef((ie,ze)=>{var{prefixCls:Le,size:Re,disabled:st,loading:vt,className:Dt,rootClassName:ar}=ie,$t=Ne(ie,["prefixCls","size","disabled","loading","className","rootClassName"]);const{getPrefixCls:ur,direction:we}=T.useContext(pe.E_),At=T.useContext(ke.Z),nt=T.useContext(fe.Z),Lt=(st!=null?st:nt)||vt,St=ur("switch",Le),Ut=T.createElement("div",{className:`${St}-handle`},vt&&T.createElement(v.Z,{className:`${St}-loading-icon`})),[lt,Et]=We(St),Zt=l()({[`${St}-small`]:(Re||At)==="small",[`${St}-loading`]:vt,[`${St}-rtl`]:we==="rtl"},Dt,ar,Et);return lt(T.createElement(je.Z,null,T.createElement(re,Object.assign({},$t,{prefixCls:St,className:Zt,disabled:Lt,ref:ze,loadingIcon:Ut}))))});he.__ANT_SWITCH=!0;var Ve=he},71721:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return pd}});var v=m(67294),C={},l=m(97685),$=m(66680),R=m(8410),z=m(91881),L=m(73935);function T(w){var G=v.createContext(void 0),Ce=function(et){var Ie=et.value,Ze=et.children,Fe=v.useRef(Ie);Fe.current=Ie;var it=v.useState(function(){return{getValue:function(){return Fe.current},listeners:new Set}}),gt=(0,l.Z)(it,1),It=gt[0];return(0,R.Z)(function(){(0,L.unstable_batchedUpdates)(function(){It.listeners.forEach(function(Tt){Tt(Ie)})})},[Ie]),v.createElement(G.Provider,{value:It},Ze)};return{Context:G,Provider:Ce,defaultValue:w}}function O(w,G){var Ce=(0,$.Z)(typeof G=="function"?G:function(Tt){if(G===void 0)return Tt;if(!Array.isArray(G))return Tt[G];var qt={};return G.forEach(function(Ot){qt[Ot]=Tt[Ot]}),qt}),ae=v.useContext(w==null?void 0:w.Context),et=ae||{},Ie=et.listeners,Ze=et.getValue,Fe=v.useRef();Fe.current=Ce(ae?Ze():w==null?void 0:w.defaultValue);var it=v.useState({}),gt=(0,l.Z)(it,2),It=gt[1];return(0,R.Z)(function(){if(!ae)return;function Tt(qt){var Ot=Ce(qt);(0,z.Z)(Fe.current,Ot,!0)||It({})}return Ie.add(Tt),function(){Ie.delete(Tt)}},[ae]),Fe.current}var F=m(87462),ue=m(42550),Ae=v.createContext(0);function re(){return v.useContext(Ae)}function pe(w,G){var Ce=(0,ue.Yr)(w),ae=function(Ie,Ze){var Fe=Ce?{ref:Ze}:{},it=v.useRef(0),gt=v.useRef(Ie);return(!G||G(gt.current,Ie))&&(it.current+=1),gt.current=Ie,v.createElement(Ae.Provider,{value:it.current},v.createElement(w,(0,F.Z)({},Ie,Fe)))};return Ce?v.forwardRef(ae):ae}function fe(w,G){var Ce=(0,ue.Yr)(w),ae=function(Ie,Ze){var Fe=Ce?{ref:Ze}:{};return re(),v.createElement(w,(0,F.Z)({},Ie,Fe))};return Ce?v.memo(v.forwardRef(ae),G):v.memo(ae,G)}var ke=T(),je=ke;function bt(w,G){var Ce=v.useRef(0);Ce.current+=1;var ae=v.useRef(w),et=[];Object.keys(w||{}).map(function(Ze){var Fe;(w==null?void 0:w[Ze])!==((Fe=ae.current)===null||Fe===void 0?void 0:Fe[Ze])&&et.push(Ze)}),ae.current=w;var Ie=v.useRef([]);return et.length&&(Ie.current=et),v.useDebugValue(Ce.current),v.useDebugValue(Ie.current.join(", ")),G&&console.log("".concat(G,":"),Ce.current,Ie.current),Ce.current}var ut=null,wt=v.memo(function(){var w=bt();return v.createElement("h1",null,"Render Times: ",w)});wt.displayName="RenderBlock";var se=m(71002),qe=m(1413),me=m(4942),_e=m(94184),Te=m.n(_e),ht=m(56982),We=m(88306),Ne=m(80334),he=v.createContext({renderWithProps:!1}),Ve=he,ie="RC_TABLE_KEY";function ze(w){return w==null?[]:Array.isArray(w)?w:[w]}function Le(w){var G=[],Ce={};return w.forEach(function(ae){for(var et=ae||{},Ie=et.key,Ze=et.dataIndex,Fe=Ie||ze(Ze).join("-")||ie;Ce[Fe];)Fe="".concat(Fe,"_next");Ce[Fe]=!0,G.push(Fe)}),G}function Re(w){return w!=null}function st(w){return w&&(0,se.Z)(w)==="object"&&!Array.isArray(w)&&!v.isValidElement(w)}function vt(w,G,Ce,ae,et,Ie){var Ze=v.useContext(Ve),Fe=re(),it=(0,ht.Z)(function(){if(Re(ae))return[ae];var gt=G==null||G===""?[]:Array.isArray(G)?G:[G],It=(0,We.Z)(w,gt),Tt=It,qt=void 0;if(et){var Ot=et(It,w,Ce);st(Ot)?(Tt=Ot.children,qt=Ot.props,Ze.renderWithProps=!0):Tt=Ot}return[Tt,qt]},[Fe,w,ae,G,et,Ce],function(gt,It){if(Ie){var Tt=(0,l.Z)(gt,2),qt=Tt[1],Ot=(0,l.Z)(It,2),rr=Ot[1];return Ie(rr,qt)}return Ze.renderWithProps?!0:!(0,z.Z)(gt,It,!0)});return it}function Dt(w,G,Ce,ae){var et=w+G-1;return w<=ae&&et>=Ce}function ar(w,G){return O(je,function(Ce){var ae=Dt(w,G||1,Ce.hoverStartRow,Ce.hoverEndRow);return[ae,Ce.onHover]})}var $t=function(G){var Ce=G.ellipsis,ae=G.rowType,et=G.children,Ie,Ze=Ce===!0?{showTitle:!0}:Ce;return Ze&&(Ze.showTitle||ae==="header")&&(typeof et=="string"||typeof et=="number"?Ie=et.toString():v.isValidElement(et)&&typeof et.props.children=="string"&&(Ie=et.props.children)),Ie};function ur(w){var G,Ce,ae,et,Ie,Ze,Fe,it,gt=w.component,It=w.children,Tt=w.ellipsis,qt=w.scope,Ot=w.prefixCls,rr=w.className,Xt=w.align,gr=w.record,Sr=w.render,Wr=w.dataIndex,Cn=w.renderIndex,xn=w.shouldCellUpdate,In=w.index,Rn=w.rowType,Gn=w.colSpan,ti=w.rowSpan,ii=w.fixLeft,b=w.fixRight,M=w.firstFixLeft,D=w.lastFixLeft,P=w.firstFixRight,V=w.lastFixRight,q=w.appendNode,be=w.additionalProps,$e=be===void 0?{}:be,_t=w.isSticky,Gt="".concat(Ot,"-cell"),yr=O(je,["supportSticky","allColumnsFixedLeft"]),$r=yr.supportSticky,an=yr.allColumnsFixedLeft,Un=vt(gr,Wr,Cn,It,Sr,xn),ei=(0,l.Z)(Un,2),Jn=ei[0],Sn=ei[1],Xn={},ai=typeof ii=="number"&&$r,ln=typeof b=="number"&&$r;ai&&(Xn.position="sticky",Xn.left=ii),ln&&(Xn.position="sticky",Xn.right=b);var pi=(G=(Ce=(ae=Sn==null?void 0:Sn.colSpan)!==null&&ae!==void 0?ae:Gn)!==null&&Ce!==void 0?Ce:$e.colSpan)!==null&&G!==void 0?G:1,gi=(et=(Ie=(Ze=Sn==null?void 0:Sn.rowSpan)!==null&&Ze!==void 0?Ze:ti)!==null&&Ie!==void 0?Ie:$e.rowSpan)!==null&&et!==void 0?et:1,Li=ar(In,gi),Ki=(0,l.Z)(Li,2),ua=Ki[0],la=Ki[1],Lo=function(I){var H;gr&&la(In,In+gi-1),$e==null||(H=$e.onMouseEnter)===null||H===void 0||H.call($e,I)},Fa=function(I){var H;gr&&la(-1,-1),$e==null||(H=$e.onMouseLeave)===null||H===void 0||H.call($e,I)};if(pi===0||gi===0)return null;var go=(Fe=$e.title)!==null&&Fe!==void 0?Fe:$t({rowType:Rn,ellipsis:Tt,children:Jn}),Qs=Te()(Gt,rr,(it={},(0,me.Z)(it,"".concat(Gt,"-fix-left"),ai&&$r),(0,me.Z)(it,"".concat(Gt,"-fix-left-first"),M&&$r),(0,me.Z)(it,"".concat(Gt,"-fix-left-last"),D&&$r),(0,me.Z)(it,"".concat(Gt,"-fix-left-all"),D&&an&&$r),(0,me.Z)(it,"".concat(Gt,"-fix-right"),ln&&$r),(0,me.Z)(it,"".concat(Gt,"-fix-right-first"),P&&$r),(0,me.Z)(it,"".concat(Gt,"-fix-right-last"),V&&$r),(0,me.Z)(it,"".concat(Gt,"-ellipsis"),Tt),(0,me.Z)(it,"".concat(Gt,"-with-append"),q),(0,me.Z)(it,"".concat(Gt,"-fix-sticky"),(ai||ln)&&_t&&$r),(0,me.Z)(it,"".concat(Gt,"-row-hover"),!Sn&&ua),it),$e.className,Sn==null?void 0:Sn.className),e={};Xt&&(e.textAlign=Xt);var i=(0,qe.Z)((0,qe.Z)((0,qe.Z)((0,qe.Z)({},$e.style),e),Xn),Sn==null?void 0:Sn.style),c=Jn;return(0,se.Z)(c)==="object"&&!Array.isArray(c)&&!v.isValidElement(c)&&(c=null),Tt&&(D||P)&&(c=v.createElement("span",{className:"".concat(Gt,"-content")},c)),v.createElement(gt,(0,F.Z)({},Sn,$e,{className:Qs,style:i,title:go,scope:qt,onMouseEnter:Lo,onMouseLeave:Fa,colSpan:pi!==1?pi:null,rowSpan:gi!==1?gi:null}),q,c)}var we=v.memo(ur);function At(w,G,Ce,ae,et,Ie){var Ze=Ce[w]||{},Fe=Ce[G]||{},it,gt;Ze.fixed==="left"?it=ae.left[w]:Fe.fixed==="right"&&(gt=ae.right[G]);var It=!1,Tt=!1,qt=!1,Ot=!1,rr=Ce[G+1],Xt=Ce[w-1],gr=!(Ie!=null&&Ie.children);if(et==="rtl"){if(it!==void 0){var Sr=Xt&&Xt.fixed==="left";Ot=!Sr&&gr}else if(gt!==void 0){var Wr=rr&&rr.fixed==="right";qt=!Wr&&gr}}else if(it!==void 0){var Cn=rr&&rr.fixed==="left";It=!Cn&&gr}else if(gt!==void 0){var xn=Xt&&Xt.fixed==="right";Tt=!xn&&gr}return{fixLeft:it,fixRight:gt,lastFixLeft:It,firstFixRight:Tt,lastFixRight:qt,firstFixLeft:Ot,isSticky:ae.isSticky}}var nt=v.createContext({}),Lt=nt;function St(w){var G=w.className,Ce=w.index,ae=w.children,et=w.colSpan,Ie=et===void 0?1:et,Ze=w.rowSpan,Fe=w.align,it=O(je,["prefixCls","direction"]),gt=it.prefixCls,It=it.direction,Tt=v.useContext(Lt),qt=Tt.scrollColumnIndex,Ot=Tt.stickyOffsets,rr=Tt.flattenColumns,Xt=Tt.columns,gr=Ce+Ie-1,Sr=gr+1===qt?Ie+1:Ie,Wr=At(Ce,Ce+Sr-1,rr,Ot,It,Xt==null?void 0:Xt[Ce]);return v.createElement(we,(0,F.Z)({className:G,index:Ce,component:"td",prefixCls:gt,record:null,dataIndex:null,align:Fe,colSpan:Sr,rowSpan:Ze,render:function(){return ae}},Wr))}var Ut=m(91),lt=["children"];function Et(w){var G=w.children,Ce=(0,Ut.Z)(w,lt);return v.createElement("tr",Ce,G)}function Zt(w){var G=w.children;return G}Zt.Row=Et,Zt.Cell=St;var Be=Zt;function He(w){var G=w.children,Ce=w.stickyOffsets,ae=w.flattenColumns,et=w.columns,Ie=O(je,"prefixCls"),Ze=ae.length-1,Fe=ae[Ze],it=v.useMemo(function(){return{stickyOffsets:Ce,flattenColumns:ae,scrollColumnIndex:Fe!=null&&Fe.scrollbar?Ze:null,columns:et}},[Fe,ae,Ze,Ce,et]);return v.createElement(Lt.Provider,{value:it},v.createElement("tfoot",{className:"".concat(Ie,"-summary")},G))}var ft=fe(He),Z=Be,J=m(48555),K=m(5110),B=m(98924),j=function(G){if((0,B.Z)()&&window.document.documentElement){var Ce=Array.isArray(G)?G:[G],ae=window.document.documentElement;return Ce.some(function(et){return et in ae.style})}return!1},ee=function(G,Ce){if(!j(G))return!1;var ae=document.createElement("div"),et=ae.style[G];return ae.style[G]=Ce,ae.style[G]!==et};function W(w,G){return!Array.isArray(w)&&G!==void 0?ee(w,G):j(w)}var De;function ot(w){if(typeof document=="undefined")return 0;if(w||De===void 0){var G=document.createElement("div");G.style.width="100%",G.style.height="200px";var Ce=document.createElement("div"),ae=Ce.style;ae.position="absolute",ae.top="0",ae.left="0",ae.pointerEvents="none",ae.visibility="hidden",ae.width="200px",ae.height="150px",ae.overflow="hidden",Ce.appendChild(G),document.body.appendChild(Ce);var et=G.offsetWidth;Ce.style.overflow="scroll";var Ie=G.offsetWidth;et===Ie&&(Ie=Ce.clientWidth),document.body.removeChild(Ce),De=et-Ie}return De}function Wt(w){var G=w.match(/^(.*)px$/),Ce=Number(G==null?void 0:G[1]);return Number.isNaN(Ce)?ot():Ce}function Ct(w){if(typeof document=="undefined"||!w||!(w instanceof Element))return{width:0,height:0};var G=getComputedStyle(w,"::-webkit-scrollbar"),Ce=G.width,ae=G.height;return{width:Wt(Ce),height:Wt(ae)}}var Qt=m(64217),ir=m(74902);function Er(w,G,Ce,ae,et,Ie){var Ze=[];Ze.push({record:w,indent:G,index:Ie});var Fe=et(w),it=ae==null?void 0:ae.has(Fe);if(w&&Array.isArray(w[Ce])&&it)for(var gt=0;gt<w[Ce].length;gt+=1){var It=Er(w[Ce][gt],G+1,Ce,ae,et,gt);Ze.push.apply(Ze,(0,ir.Z)(It))}return Ze}function Qr(w,G,Ce,ae){var et=v.useMemo(function(){if(Ce!=null&&Ce.size){for(var Ie=[],Ze=0;Ze<(w==null?void 0:w.length);Ze+=1){var Fe=w[Ze];Ie.push.apply(Ie,(0,ir.Z)(Er(Fe,0,G,Ce,ae,Ze)))}return Ie}return w==null?void 0:w.map(function(it,gt){return{record:it,indent:0,index:gt}})},[w,G,Ce,ae]);return et}function Mt(w){var G=w.prefixCls,Ce=w.children,ae=w.component,et=w.cellComponent,Ie=w.className,Ze=w.expanded,Fe=w.colSpan,it=w.isEmpty,gt=O(je,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),It=gt.scrollbarSize,Tt=gt.fixHeader,qt=gt.fixColumn,Ot=gt.componentWidth,rr=gt.horizonScroll,Xt=Ce;return(it?rr:qt)&&(Xt=v.createElement("div",{style:{width:Ot-(Tt?It:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(G,"-expanded-row-fixed")},Ot!==0&&Xt)),v.createElement(ae,{className:Ie,style:{display:Ze?null:"none"}},v.createElement(we,{component:et,prefixCls:G,colSpan:Fe},Xt))}var br=Mt;function Nt(w){var G=w.className,Ce=w.style,ae=w.record,et=w.index,Ie=w.renderIndex,Ze=w.rowKey,Fe=w.rowExpandable,it=w.expandedKeys,gt=w.onRow,It=w.indent,Tt=It===void 0?0:It,qt=w.rowComponent,Ot=w.cellComponent,rr=w.scopeCellComponent,Xt=w.childrenColumnName,gr=O(je,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex"]),Sr=gr.prefixCls,Wr=gr.fixedInfoList,Cn=gr.flattenColumns,xn=gr.expandableType,In=gr.expandRowByClick,Rn=gr.onTriggerExpand,Gn=gr.rowClassName,ti=gr.expandedRowClassName,ii=gr.indentSize,b=gr.expandIcon,M=gr.expandedRowRender,D=gr.expandIconColumnIndex,P=v.useState(!1),V=(0,l.Z)(P,2),q=V[0],be=V[1],$e=it&&it.has(Ze);v.useEffect(function(){$e&&be(!0)},[$e]);var _t=xn==="row"&&(!Fe||Fe(ae)),Gt=xn==="nest",yr=Xt&&ae&&ae[Xt],$r=_t||Gt,an=v.useRef(Rn);an.current=Rn;var Un=function(){an.current.apply(an,arguments)},ei=gt==null?void 0:gt(ae,et),Jn=function(Ki){var ua;In&&$r&&Un(ae,Ki);for(var la=arguments.length,Lo=new Array(la>1?la-1:0),Fa=1;Fa<la;Fa++)Lo[Fa-1]=arguments[Fa];ei==null||(ua=ei.onClick)===null||ua===void 0||ua.call.apply(ua,[ei,Ki].concat(Lo))},Sn;typeof Gn=="string"?Sn=Gn:typeof Gn=="function"&&(Sn=Gn(ae,et,Tt));var Xn=Le(Cn),ai=v.createElement(qt,(0,F.Z)({},ei,{"data-row-key":Ze,className:Te()(G,"".concat(Sr,"-row"),"".concat(Sr,"-row-level-").concat(Tt),Sn,ei&&ei.className),style:(0,qe.Z)((0,qe.Z)({},Ce),ei?ei.style:null),onClick:Jn}),Cn.map(function(Li,Ki){var ua=Li.render,la=Li.dataIndex,Lo=Li.className,Fa=Xn[Ki],go=Wr[Ki],Qs;Ki===(D||0)&&Gt&&(Qs=v.createElement(v.Fragment,null,v.createElement("span",{style:{paddingLeft:"".concat(ii*Tt,"px")},className:"".concat(Sr,"-row-indent indent-level-").concat(Tt)}),b({prefixCls:Sr,expanded:$e,expandable:yr,record:ae,onExpand:Un})));var e;return Li.onCell&&(e=Li.onCell(ae,et)),v.createElement(we,(0,F.Z)({className:Lo,ellipsis:Li.ellipsis,align:Li.align,scope:Li.rowScope,component:Li.rowScope?rr:Ot,prefixCls:Sr,key:Fa,record:ae,index:et,renderIndex:Ie,dataIndex:la,render:ua,shouldCellUpdate:Li.shouldCellUpdate,expanded:Qs&&$e},go,{appendNode:Qs,additionalProps:e}))})),ln;if(_t&&(q||$e)){var pi=M(ae,et,Tt+1,$e),gi=ti&&ti(ae,et,Tt);ln=v.createElement(br,{expanded:$e,className:Te()("".concat(Sr,"-expanded-row"),"".concat(Sr,"-expanded-row-level-").concat(Tt+1),gi),prefixCls:Sr,component:qt,cellComponent:Ot,colSpan:Cn.length,isEmpty:!1},pi)}return v.createElement(v.Fragment,null,ai,ln)}Nt.displayName="BodyRow";var Pr=fe(Nt);function _r(w){var G=w.columnKey,Ce=w.onColumnResize,ae=v.useRef();return v.useEffect(function(){ae.current&&Ce(G,ae.current.offsetWidth)},[]),v.createElement(J.Z,{data:G},v.createElement("td",{ref:ae,style:{padding:0,border:0,height:0}},v.createElement("div",{style:{height:0,overflow:"hidden"}},"\xA0")))}function kr(w){var G=w.prefixCls,Ce=w.columnsKey,ae=w.onColumnResize;return v.createElement("tr",{"aria-hidden":"true",className:"".concat(G,"-measure-row"),style:{height:0,fontSize:0}},v.createElement(J.Z.Collection,{onBatchResize:function(Ie){Ie.forEach(function(Ze){var Fe=Ze.data,it=Ze.size;ae(Fe,it.offsetWidth)})}},Ce.map(function(et){return v.createElement(_r,{key:et,columnKey:et,onColumnResize:ae})})))}function zt(w){var G=w.data,Ce=w.getRowKey,ae=w.measureColumnWidth,et=w.expandedKeys,Ie=w.onRow,Ze=w.rowExpandable,Fe=w.emptyNode,it=w.childrenColumnName,gt=O(je,["prefixCls","getComponent","onColumnResize","flattenColumns"]),It=gt.prefixCls,Tt=gt.getComponent,qt=gt.onColumnResize,Ot=gt.flattenColumns,rr=Qr(G,it,et,Ce),Xt=v.useRef({renderWithProps:!1}),gr=Tt(["body","wrapper"],"tbody"),Sr=Tt(["body","row"],"tr"),Wr=Tt(["body","cell"],"td"),Cn=Tt(["body","cell"],"th"),xn;G.length?xn=rr.map(function(Rn,Gn){var ti=Rn.record,ii=Rn.indent,b=Rn.index,M=Ce(ti,Gn);return v.createElement(Pr,{key:M,rowKey:M,record:ti,index:Gn,renderIndex:b,rowComponent:Sr,cellComponent:Wr,scopeCellComponent:Cn,expandedKeys:et,onRow:Ie,getRowKey:Ce,rowExpandable:Ze,childrenColumnName:it,indent:ii})}):xn=v.createElement(br,{expanded:!0,className:"".concat(It,"-placeholder"),prefixCls:It,component:Sr,cellComponent:Wr,colSpan:Ot.length,isEmpty:!0},Fe);var In=Le(Ot);return v.createElement(Ve.Provider,{value:Xt.current},v.createElement(gr,{className:"".concat(It,"-tbody")},ae&&v.createElement(kr,{prefixCls:It,columnsKey:In,onColumnResize:qt}),xn))}zt.displayName="Body";var mr=fe(zt),Or=["expandable"],X="RC_TABLE_INTERNAL_COL_DEFINE";function Nr(w){var G=w.expandable,Ce=(0,Ut.Z)(w,Or),ae;return"expandable"in w?ae=(0,qe.Z)((0,qe.Z)({},Ce),G):ae=Ce,ae.showExpandColumn===!1&&(ae.expandIconColumnIndex=-1),ae}var Xe=["columnType"];function xe(w){for(var G=w.colWidths,Ce=w.columns,ae=w.columCount,et=[],Ie=ae||Ce.length,Ze=!1,Fe=Ie-1;Fe>=0;Fe-=1){var it=G[Fe],gt=Ce&&Ce[Fe],It=gt&&gt[X];if(it||It||Ze){var Tt=It||{},qt=Tt.columnType,Ot=(0,Ut.Z)(Tt,Xe);et.unshift(v.createElement("col",(0,F.Z)({key:Fe,style:{width:it}},Ot))),Ze=!0}}return v.createElement("colgroup",null,et)}var rt=xe,kt=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function cr(w,G){return(0,v.useMemo)(function(){for(var Ce=[],ae=0;ae<G;ae+=1){var et=w[ae];if(et!==void 0)Ce[ae]=et;else return null}return Ce},[w.join("_"),G])}var Ar=v.forwardRef(function(w,G){var Ce=w.className,ae=w.noData,et=w.columns,Ie=w.flattenColumns,Ze=w.colWidths,Fe=w.columCount,it=w.stickyOffsets,gt=w.direction,It=w.fixHeader,Tt=w.stickyTopOffset,qt=w.stickyBottomOffset,Ot=w.stickyClassName,rr=w.onScroll,Xt=w.maxContentScroll,gr=w.children,Sr=(0,Ut.Z)(w,kt),Wr=O(je,["prefixCls","scrollbarSize","isSticky"]),Cn=Wr.prefixCls,xn=Wr.scrollbarSize,In=Wr.isSticky,Rn=In&&!It?0:xn,Gn=v.useRef(null),ti=v.useCallback(function(be){(0,ue.mH)(G,be),(0,ue.mH)(Gn,be)},[]);v.useEffect(function(){var be;function $e(_t){var Gt=_t,yr=Gt.currentTarget,$r=Gt.deltaX;$r&&(rr({currentTarget:yr,scrollLeft:yr.scrollLeft+$r}),_t.preventDefault())}return(be=Gn.current)===null||be===void 0||be.addEventListener("wheel",$e),function(){var _t;(_t=Gn.current)===null||_t===void 0||_t.removeEventListener("wheel",$e)}},[]);var ii=v.useMemo(function(){return Ie.every(function(be){return be.width>=0})},[Ie]),b=Ie[Ie.length-1],M={fixed:b?b.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(Cn,"-cell-scrollbar")}}},D=(0,v.useMemo)(function(){return Rn?[].concat((0,ir.Z)(et),[M]):et},[Rn,et]),P=(0,v.useMemo)(function(){return Rn?[].concat((0,ir.Z)(Ie),[M]):Ie},[Rn,Ie]),V=(0,v.useMemo)(function(){var be=it.right,$e=it.left;return(0,qe.Z)((0,qe.Z)({},it),{},{left:gt==="rtl"?[].concat((0,ir.Z)($e.map(function(_t){return _t+Rn})),[0]):$e,right:gt==="rtl"?be:[].concat((0,ir.Z)(be.map(function(_t){return _t+Rn})),[0]),isSticky:In})},[Rn,it,In]),q=cr(Ze,Fe);return v.createElement("div",{style:(0,qe.Z)({overflow:"hidden"},In?{top:Tt,bottom:qt}:{}),ref:ti,className:Te()(Ce,(0,me.Z)({},Ot,!!Ot))},v.createElement("table",{style:{tableLayout:"fixed",visibility:ae||q?null:"hidden"}},(!ae||!Xt||ii)&&v.createElement(rt,{colWidths:q?[].concat((0,ir.Z)(q),[Rn]):[],columCount:Fe+1,columns:P}),gr((0,qe.Z)((0,qe.Z)({},Sr),{},{stickyOffsets:V,columns:D,flattenColumns:P}))))});Ar.displayName="FixedHolder";var Lr=v.memo(Ar);function sr(w){var G=w.cells,Ce=w.stickyOffsets,ae=w.flattenColumns,et=w.rowComponent,Ie=w.cellComponent,Ze=w.tdCellComponent,Fe=w.onHeaderRow,it=w.index,gt=O(je,["prefixCls","direction"]),It=gt.prefixCls,Tt=gt.direction,qt;Fe&&(qt=Fe(G.map(function(rr){return rr.column}),it));var Ot=Le(G.map(function(rr){return rr.column}));return v.createElement(et,qt,G.map(function(rr,Xt){var gr=rr.column,Sr=At(rr.colStart,rr.colEnd,ae,Ce,Tt,gr),Wr;return gr&&gr.onHeaderCell&&(Wr=rr.column.onHeaderCell(gr)),v.createElement(we,(0,F.Z)({},rr,{scope:gr.title?rr.colSpan>1?"colgroup":"col":null,ellipsis:gr.ellipsis,align:gr.align,component:gr.title?Ie:Ze,prefixCls:It,key:Ot[Xt]},Sr,{additionalProps:Wr,rowType:"header"}))}))}sr.displayName="HeaderRow";var Ge=sr;function Gr(w){var G=[];function Ce(Ze,Fe){var it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;G[it]=G[it]||[];var gt=Fe,It=Ze.filter(Boolean).map(function(Tt){var qt={key:Tt.key,className:Tt.className||"",children:Tt.title,column:Tt,colStart:gt},Ot=1,rr=Tt.children;return rr&&rr.length>0&&(Ot=Ce(rr,gt,it+1).reduce(function(Xt,gr){return Xt+gr},0),qt.hasSubColumns=!0),"colSpan"in Tt&&(Ot=Tt.colSpan),"rowSpan"in Tt&&(qt.rowSpan=Tt.rowSpan),qt.colSpan=Ot,qt.colEnd=qt.colStart+Ot-1,G[it].push(qt),gt+=Ot,Ot});return It}Ce(w,0);for(var ae=G.length,et=function(Fe){G[Fe].forEach(function(it){!("rowSpan"in it)&&!it.hasSubColumns&&(it.rowSpan=ae-Fe)})},Ie=0;Ie<ae;Ie+=1)et(Ie);return G}function on(w){var G=w.stickyOffsets,Ce=w.columns,ae=w.flattenColumns,et=w.onHeaderRow,Ie=O(je,["prefixCls","getComponent"]),Ze=Ie.prefixCls,Fe=Ie.getComponent,it=v.useMemo(function(){return Gr(Ce)},[Ce]),gt=Fe(["header","wrapper"],"thead"),It=Fe(["header","row"],"tr"),Tt=Fe(["header","cell"],"th"),qt=Fe(["header","cell"],"td");return v.createElement(gt,{className:"".concat(Ze,"-thead")},it.map(function(Ot,rr){var Xt=v.createElement(Ge,{key:rr,flattenColumns:ae,cells:Ot,stickyOffsets:G,rowComponent:It,cellComponent:Tt,tdCellComponent:qt,onHeaderRow:et,index:rr});return Xt}))}var cn=fe(on),Dn=m(50344),ci=["children"],ia=["fixed"];function Vi(w){return(0,Dn.Z)(w).filter(function(G){return v.isValidElement(G)}).map(function(G){var Ce=G.key,ae=G.props,et=ae.children,Ie=(0,Ut.Z)(ae,ci),Ze=(0,qe.Z)({key:Ce},Ie);return et&&(Ze.children=Vi(et)),Ze})}function On(w){return w.filter(function(G){return G&&(0,se.Z)(G)==="object"}).reduce(function(G,Ce){var ae=Ce.fixed,et=ae===!0?"left":ae,Ie=Ce.children;return Ie&&Ie.length>0?[].concat((0,ir.Z)(G),(0,ir.Z)(On(Ie).map(function(Ze){return(0,qe.Z)({fixed:et},Ze)}))):[].concat((0,ir.Z)(G),[(0,qe.Z)((0,qe.Z)({},Ce),{},{fixed:et})])},[])}function ji(w){for(var G=!0,Ce=0;Ce<w.length;Ce+=1){var ae=w[Ce];if(G&&ae.fixed!=="left")G=!1;else if(!G&&ae.fixed==="left"){warning(!1,"Index ".concat(Ce-1," of `columns` missing `fixed='left'` prop."));break}}for(var et=!0,Ie=w.length-1;Ie>=0;Ie-=1){var Ze=w[Ie];if(et&&Ze.fixed!=="right")et=!1;else if(!et&&Ze.fixed==="right"){warning(!1,"Index ".concat(Ie+1," of `columns` missing `fixed='right'` prop."));break}}}function oi(w){return w.map(function(G){var Ce=G.fixed,ae=(0,Ut.Z)(G,ia),et=Ce;return Ce==="left"?et="right":Ce==="right"&&(et="left"),(0,qe.Z)({fixed:et},ae)})}function Hi(w,G){var Ce=w.prefixCls,ae=w.columns,et=w.children,Ie=w.expandable,Ze=w.expandedKeys,Fe=w.columnTitle,it=w.getRowKey,gt=w.onTriggerExpand,It=w.expandIcon,Tt=w.rowExpandable,qt=w.expandIconColumnIndex,Ot=w.direction,rr=w.expandRowByClick,Xt=w.columnWidth,gr=w.fixed,Sr=v.useMemo(function(){return ae||Vi(et)},[ae,et]),Wr=v.useMemo(function(){if(Ie){var In,Rn=Sr.slice();if(!Rn.includes(C)){var Gn=qt||0;Gn>=0&&Rn.splice(Gn,0,C)}var ti=Rn.indexOf(C);Rn=Rn.filter(function(D,P){return D!==C||P===ti});var ii=Sr[ti],b;(gr==="left"||gr)&&!qt?b="left":(gr==="right"||gr)&&qt===Sr.length?b="right":b=ii?ii.fixed:null;var M=(In={},(0,me.Z)(In,X,{className:"".concat(Ce,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),(0,me.Z)(In,"title",Fe),(0,me.Z)(In,"fixed",b),(0,me.Z)(In,"className","".concat(Ce,"-row-expand-icon-cell")),(0,me.Z)(In,"width",Xt),(0,me.Z)(In,"render",function(P,V,q){var be=it(V,q),$e=Ze.has(be),_t=Tt?Tt(V):!0,Gt=It({prefixCls:Ce,expanded:$e,expandable:_t,record:V,onExpand:gt});return rr?v.createElement("span",{onClick:function($r){return $r.stopPropagation()}},Gt):Gt}),In);return Rn.map(function(D){return D===C?M:D})}return Sr.filter(function(D){return D!==C})},[Ie,Sr,it,Ze,It,Ot]),Cn=v.useMemo(function(){var In=Wr;return G&&(In=G(In)),In.length||(In=[{render:function(){return null}}]),In},[G,Wr,Ot]),xn=v.useMemo(function(){return Ot==="rtl"?oi(On(Cn)):On(Cn)},[Cn,Ot]);return[Cn,xn]}var Ca=Hi;function Wi(w){var G,Ce=w.prefixCls,ae=w.record,et=w.onExpand,Ie=w.expanded,Ze=w.expandable,Fe="".concat(Ce,"-row-expand-icon");if(!Ze)return v.createElement("span",{className:Te()(Fe,"".concat(Ce,"-row-spaced"))});var it=function(It){et(ae,It),It.stopPropagation()};return v.createElement("span",{className:Te()(Fe,(G={},(0,me.Z)(G,"".concat(Ce,"-row-expanded"),Ie),(0,me.Z)(G,"".concat(Ce,"-row-collapsed"),!Ie),G)),onClick:it})}function jo(w,G,Ce){var ae=[];function et(Ie){(Ie||[]).forEach(function(Ze,Fe){ae.push(G(Ze,Fe)),et(Ze[Ce])})}return et(w),ae}function uo(w,G,Ce){var ae=Nr(w),et=ae.expandIcon,Ie=ae.expandedRowKeys,Ze=ae.defaultExpandedRowKeys,Fe=ae.defaultExpandAllRows,it=ae.expandedRowRender,gt=ae.onExpand,It=ae.onExpandedRowsChange,Tt=ae.childrenColumnName,qt=et||Wi,Ot=Tt||"children",rr=v.useMemo(function(){return it?"row":w.expandable&&w.internalHooks===Rs&&w.expandable.__PARENT_RENDER_ICON__||G.some(function(In){return In&&(0,se.Z)(In)==="object"&&In[Ot]})?"nest":!1},[!!it,G]),Xt=v.useState(function(){return Ze||(Fe?jo(G,Ce,Ot):[])}),gr=(0,l.Z)(Xt,2),Sr=gr[0],Wr=gr[1],Cn=v.useMemo(function(){return new Set(Ie||Sr||[])},[Ie,Sr]),xn=v.useCallback(function(In){var Rn=Ce(In,G.indexOf(In)),Gn,ti=Cn.has(Rn);ti?(Cn.delete(Rn),Gn=(0,ir.Z)(Cn)):Gn=[].concat((0,ir.Z)(Cn),[Rn]),Wr(Gn),gt&&gt(!ti,In),It&&It(Gn)},[Ce,Cn,G,gt,It]);return[ae,rr,Cn,qt,Ot,xn]}function Pn(w,G,Ce,ae){var et=w.map(function(Ie,Ze){return At(Ze,Ze,w,G,Ce,ae==null?void 0:ae[Ze])});return(0,ht.Z)(function(){return et},[et],function(Ie,Ze){return!(0,z.Z)(Ie,Ze)})}function bn(w){var G=(0,v.useRef)(w),Ce=(0,v.useState)({}),ae=(0,l.Z)(Ce,2),et=ae[1],Ie=(0,v.useRef)(null),Ze=(0,v.useRef)([]);function Fe(it){Ze.current.push(it);var gt=Promise.resolve();Ie.current=gt,gt.then(function(){if(Ie.current===gt){var It=Ze.current,Tt=G.current;Ze.current=[],It.forEach(function(qt){G.current=qt(G.current)}),Ie.current=null,Tt!==G.current&&et({})}})}return(0,v.useEffect)(function(){return function(){Ie.current=null}},[]),[G.current,Fe]}function Oi(w){var G=(0,v.useRef)(w||null),Ce=(0,v.useRef)();function ae(){window.clearTimeout(Ce.current)}function et(Ze){G.current=Ze,ae(),Ce.current=window.setTimeout(function(){G.current=null,Ce.current=void 0},100)}function Ie(){return G.current}return(0,v.useEffect)(function(){return ae},[]),[et,Ie]}function di(){var w=v.useState(-1),G=(0,l.Z)(w,2),Ce=G[0],ae=G[1],et=v.useState(-1),Ie=(0,l.Z)(et,2),Ze=Ie[0],Fe=Ie[1],it=v.useCallback(function(gt,It){ae(gt),Fe(It)},[]);return[Ce,Ze,it]}var va=(0,B.Z)()?window:null;function wa(w,G){var Ce=(0,se.Z)(w)==="object"?w:{},ae=Ce.offsetHeader,et=ae===void 0?0:ae,Ie=Ce.offsetSummary,Ze=Ie===void 0?0:Ie,Fe=Ce.offsetScroll,it=Fe===void 0?0:Fe,gt=Ce.getContainer,It=gt===void 0?function(){return va}:gt,Tt=It()||va;return v.useMemo(function(){var qt=!!w;return{isSticky:qt,stickyClassName:qt?"".concat(G,"-sticky-holder"):"",offsetHeader:et,offsetSummary:Ze,offsetScroll:it,container:Tt}},[it,et,Ze,G,Tt])}function Aa(w,G,Ce){var ae=(0,v.useMemo)(function(){for(var et=[],Ie=[],Ze=0,Fe=0,it=0;it<G;it+=1)if(Ce==="rtl"){Ie[it]=Fe,Fe+=w[it]||0;var gt=G-it-1;et[gt]=Ze,Ze+=w[gt]||0}else{et[it]=Ze,Ze+=w[it]||0;var It=G-it-1;Ie[It]=Fe,Fe+=w[It]||0}return{left:et,right:Ie}},[w,G,Ce]);return ae}var Ta=Aa;function ma(w){var G=w.className,Ce=w.children;return v.createElement("div",{className:G},Ce)}var Da=ma,Uo=m(64019),ha=/margin|padding|width|height|max|min|offset/,xa={left:!0,top:!0},eo={cssFloat:1,styleFloat:1,float:1};function Ee(w){return w.nodeType===1?w.ownerDocument.defaultView.getComputedStyle(w,null):{}}function Po(w,G,Ce){if(G=G.toLowerCase(),Ce==="auto"){if(G==="height")return w.offsetHeight;if(G==="width")return w.offsetWidth}return G in xa||(xa[G]=ha.test(G)),xa[G]?parseFloat(Ce)||0:Ce}function Hs(w,G){var Ce=arguments.length,ae=Ee(w);return G=eo[G]?"cssFloat"in w.style?"cssFloat":"styleFloat":G,Ce===1?ae:Po(w,G,ae[G]||w.style[G])}function no(w,G,Ce){var ae=arguments.length;if(G=eo[G]?"cssFloat"in w.style?"cssFloat":"styleFloat":G,ae===3)return typeof Ce=="number"&&ha.test(G)&&(Ce="".concat(Ce,"px")),w.style[G]=Ce,Ce;for(var et in G)G.hasOwnProperty(et)&&no(w,et,G[et]);return Ee(w)}function qo(w){return w===document.body?document.documentElement.clientWidth:w.offsetWidth}function os(w){return w===document.body?window.innerHeight||document.documentElement.clientHeight:w.offsetHeight}function Go(){var w=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),G=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:w,height:G}}function Wo(){var w=document.documentElement.clientWidth,G=window.innerHeight||document.documentElement.clientHeight;return{width:w,height:G}}function za(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function Tu(w){var G=w.getBoundingClientRect(),Ce=document.documentElement;return{left:G.left+(window.pageXOffset||Ce.scrollLeft)-(Ce.clientLeft||document.body.clientLeft||0),top:G.top+(window.pageYOffset||Ce.scrollTop)-(Ce.clientTop||document.body.clientTop||0)}}var Cs=function(G,Ce){var ae,et,Ie=G.scrollBodyRef,Ze=G.onScroll,Fe=G.offsetScroll,it=G.container,gt=O(je,"prefixCls"),It=((ae=Ie.current)===null||ae===void 0?void 0:ae.scrollWidth)||0,Tt=((et=Ie.current)===null||et===void 0?void 0:et.clientWidth)||0,qt=It&&Tt*(Tt/It),Ot=v.useRef(),rr=bn({scrollLeft:0,isHiddenScrollBar:!1}),Xt=(0,l.Z)(rr,2),gr=Xt[0],Sr=Xt[1],Wr=v.useRef({delta:0,x:0}),Cn=v.useState(!1),xn=(0,l.Z)(Cn,2),In=xn[0],Rn=xn[1],Gn=function(){Rn(!1)},ti=function(P){P.persist(),Wr.current.delta=P.pageX-gr.scrollLeft,Wr.current.x=0,Rn(!0),P.preventDefault()},ii=function(P){var V,q=P||((V=window)===null||V===void 0?void 0:V.event),be=q.buttons;if(!In||be===0){In&&Rn(!1);return}var $e=Wr.current.x+P.pageX-Wr.current.x-Wr.current.delta;$e<=0&&($e=0),$e+qt>=Tt&&($e=Tt-qt),Ze({scrollLeft:$e/Tt*(It+2)}),Wr.current.x=P.pageX},b=function(){if(Ie.current){var P=Tu(Ie.current).top,V=P+Ie.current.offsetHeight,q=it===window?document.documentElement.scrollTop+window.innerHeight:Tu(it).top+it.clientHeight;V-ot()<=q||P>=q-Fe?Sr(function(be){return(0,qe.Z)((0,qe.Z)({},be),{},{isHiddenScrollBar:!0})}):Sr(function(be){return(0,qe.Z)((0,qe.Z)({},be),{},{isHiddenScrollBar:!1})})}},M=function(P){Sr(function(V){return(0,qe.Z)((0,qe.Z)({},V),{},{scrollLeft:P/It*Tt||0})})};return v.useImperativeHandle(Ce,function(){return{setScrollLeft:M}}),v.useEffect(function(){var D=(0,Uo.Z)(document.body,"mouseup",Gn,!1),P=(0,Uo.Z)(document.body,"mousemove",ii,!1);return b(),function(){D.remove(),P.remove()}},[qt,In]),v.useEffect(function(){var D=(0,Uo.Z)(it,"scroll",b,!1),P=(0,Uo.Z)(window,"resize",b,!1);return function(){D.remove(),P.remove()}},[it]),v.useEffect(function(){gr.isHiddenScrollBar||Sr(function(D){var P=Ie.current;return P?(0,qe.Z)((0,qe.Z)({},D),{},{scrollLeft:P.scrollLeft/P.scrollWidth*P.clientWidth}):D})},[gr.isHiddenScrollBar]),It<=Tt||!qt||gr.isHiddenScrollBar?null:v.createElement("div",{style:{height:ot(),width:Tt,bottom:Fe},className:"".concat(gt,"-sticky-scroll")},v.createElement("div",{onMouseDown:ti,ref:Ot,className:Te()("".concat(gt,"-sticky-scroll-bar"),(0,me.Z)({},"".concat(gt,"-sticky-scroll-bar-active"),In)),style:{width:"".concat(qt,"px"),transform:"translate3d(".concat(gr.scrollLeft,"px, 0, 0)")}}))},Zs=v.forwardRef(Cs);function ts(w){return null}var Vs=ts;function ou(w){return null}var ls=ou,Di=[],As={},Rs="rc-table-internal-hook";function vr(){return"No Data"}function zr(w){var G,Ce=(0,qe.Z)({rowKey:"key",prefixCls:"rc-table",emptyText:vr},w),ae=Ce.prefixCls,et=Ce.className,Ie=Ce.rowClassName,Ze=Ce.style,Fe=Ce.data,it=Ce.rowKey,gt=Ce.scroll,It=Ce.tableLayout,Tt=Ce.direction,qt=Ce.title,Ot=Ce.footer,rr=Ce.summary,Xt=Ce.caption,gr=Ce.id,Sr=Ce.showHeader,Wr=Ce.components,Cn=Ce.emptyText,xn=Ce.onRow,In=Ce.onHeaderRow,Rn=Ce.internalHooks,Gn=Ce.transformColumns,ti=Ce.internalRefs,ii=Ce.sticky,b=Fe||Di,M=!!b.length,D=v.useCallback(function(ml,vc){return(0,We.Z)(Wr,ml)||vc},[Wr]),P=v.useMemo(function(){return typeof it=="function"?it:function(ml){var vc=ml&&ml[it];return vc}},[it]),V=di(),q=(0,l.Z)(V,3),be=q[0],$e=q[1],_t=q[2],Gt=uo(Ce,b,P),yr=(0,l.Z)(Gt,6),$r=yr[0],an=yr[1],Un=yr[2],ei=yr[3],Jn=yr[4],Sn=yr[5],Xn=v.useState(0),ai=(0,l.Z)(Xn,2),ln=ai[0],pi=ai[1],gi=Ca((0,qe.Z)((0,qe.Z)((0,qe.Z)({},Ce),$r),{},{expandable:!!$r.expandedRowRender,columnTitle:$r.columnTitle,expandedKeys:Un,getRowKey:P,onTriggerExpand:Sn,expandIcon:ei,expandIconColumnIndex:$r.expandIconColumnIndex,direction:Tt}),Rn===Rs?Gn:null),Li=(0,l.Z)(gi,2),Ki=Li[0],ua=Li[1],la=v.useMemo(function(){return{columns:Ki,flattenColumns:ua}},[Ki,ua]),Lo=v.useRef(),Fa=v.useRef(),go=v.useRef(),Qs=v.useRef(),e=v.useRef(),i=v.useState(!1),c=(0,l.Z)(i,2),y=c[0],I=c[1],H=v.useState(!1),Q=(0,l.Z)(H,2),ge=Q[0],tt=Q[1],Rt=bn(new Map),Ft=(0,l.Z)(Rt,2),Jt=Ft[0],dr=Ft[1],Cr=Le(ua),tn=Cr.map(function(ml){return Jt.get(ml)}),rn=v.useMemo(function(){return tn},[tn.join("_")]),yn=Ta(rn,ua.length,Tt),vn=gt&&Re(gt.y),$n=gt&&Re(gt.x)||Boolean($r.fixed),ri=$n&&ua.some(function(ml){var vc=ml.fixed;return vc}),_i=v.useRef(),xi=wa(ii,ae),Ii=xi.isSticky,ta=xi.offsetHeader,Qi=xi.offsetSummary,ja=xi.offsetScroll,qn=xi.stickyClassName,ca=xi.container,ra=v.useMemo(function(){return rr==null?void 0:rr(b)},[rr,b]),bo=(vn||Ii)&&v.isValidElement(ra)&&ra.type===Be&&ra.props.fixed,Eo,qa,Ss;vn&&(qa={overflowY:"scroll",maxHeight:gt.y}),$n&&(Eo={overflowX:"auto"},vn||(qa={overflowY:"hidden"}),Ss={width:(gt==null?void 0:gt.x)===!0?"auto":gt==null?void 0:gt.x,minWidth:"100%"});var Is=v.useCallback(function(ml,vc){(0,K.Z)(Lo.current)&&dr(function(vd){if(vd.get(ml)!==vc){var Ad=new Map(vd);return Ad.set(ml,vc),Ad}return vd})},[]),pu=Oi(null),es=(0,l.Z)(pu,2),$u=es[0],hl=es[1];function Nl(ml,vc){vc&&(typeof vc=="function"?vc(ml):vc.scrollLeft!==ml&&(vc.scrollLeft=ml,vc.scrollLeft!==ml&&setTimeout(function(){vc.scrollLeft=ml},0)))}var el=(0,$.Z)(function(ml){var vc=ml.currentTarget,vd=ml.scrollLeft,Ad=Tt==="rtl",Fd=typeof vd=="number"?vd:vc.scrollLeft,yp=vc||As;if(!hl()||hl()===yp){var Ph;$u(yp),Nl(Fd,Fa.current),Nl(Fd,go.current),Nl(Fd,e.current),Nl(Fd,(Ph=_i.current)===null||Ph===void 0?void 0:Ph.setScrollLeft)}if(vc){var Ed=vc.scrollWidth,Bd=vc.clientWidth;if(Ed===Bd){I(!1),tt(!1);return}Ad?(I(-Fd<Ed-Bd),tt(-Fd>0)):(I(Fd>0),tt(Fd<Ed-Bd))}}),af=function(){$n&&go.current?el({currentTarget:go.current}):(I(!1),tt(!1))},gf=function(vc){var vd=vc.width;vd!==ln&&(af(),pi(Lo.current?Lo.current.offsetWidth:vd))},zf=v.useRef(!1);v.useEffect(function(){zf.current&&af()},[$n,Fe,Ki.length]),v.useEffect(function(){zf.current=!0},[]);var Th=v.useState(0),ed=(0,l.Z)(Th,2),Zf=ed[0],iu=ed[1],Uf=v.useState(!0),xh=(0,l.Z)(Uf,2),Lu=xh[0],cl=xh[1];v.useEffect(function(){go.current instanceof Element?iu(Ct(go.current).width):iu(Ct(Qs.current).width),cl(W("position","sticky"))},[]),v.useEffect(function(){Rn===Rs&&ti&&(ti.body.current=go.current)});var sl=v.useCallback(function(ml){return v.createElement(v.Fragment,null,v.createElement(cn,ml),bo==="top"&&v.createElement(ft,ml,ra))},[bo,ra]),Wu=v.useCallback(function(ml){return v.createElement(ft,ml,ra)},[ra]),td=D(["table"],"table"),Jf=v.useMemo(function(){return It||(ri?(gt==null?void 0:gt.x)==="max-content"?"auto":"fixed":vn||Ii||ua.some(function(ml){var vc=ml.ellipsis;return vc})?"fixed":"auto")},[vn,ri,ua,It,Ii]),Rc,$f={colWidths:rn,columCount:ua.length,stickyOffsets:yn,onHeaderRow:In,fixHeader:vn,scroll:gt},rd=v.useMemo(function(){return M?null:typeof Cn=="function"?Cn():Cn},[M,Cn]),wl=v.createElement(mr,{data:b,measureColumnWidth:vn||$n||Ii,expandedKeys:Un,rowExpandable:$r.rowExpandable,getRowKey:P,onRow:xn,emptyNode:rd,childrenColumnName:Jn}),Mh=v.createElement(rt,{colWidths:ua.map(function(ml){var vc=ml.width;return vc}),columns:ua}),fd=Xt!=null?v.createElement("caption",{className:"".concat(ae,"-caption")},Xt):void 0,Wd=D(["body"]),oc=(0,Qt.Z)(Ce,{data:!0}),Ou=(0,Qt.Z)(Ce,{aria:!0});if(vn||Ii){var Od;typeof Wd=="function"?(Od=Wd(b,{scrollbarSize:Zf,ref:go,onScroll:el}),$f.colWidths=ua.map(function(ml,vc){var vd=ml.width,Ad=vc===Ki.length-1?vd-Zf:vd;return typeof Ad=="number"&&!Number.isNaN(Ad)?Ad:((0,Ne.ZP)(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0)})):Od=v.createElement("div",{style:(0,qe.Z)((0,qe.Z)({},Eo),qa),onScroll:el,ref:go,className:Te()("".concat(ae,"-body"))},v.createElement(td,(0,F.Z)({style:(0,qe.Z)((0,qe.Z)({},Ss),{},{tableLayout:Jf})},Ou),fd,Mh,wl,!bo&&ra&&v.createElement(ft,{stickyOffsets:yn,flattenColumns:ua,columns:Ki},ra)));var Wh=(0,qe.Z)((0,qe.Z)((0,qe.Z)({noData:!b.length,maxContentScroll:$n&&gt.x==="max-content"},$f),la),{},{direction:Tt,stickyClassName:qn,onScroll:el});Rc=v.createElement(v.Fragment,null,Sr!==!1&&v.createElement(Lr,(0,F.Z)({},Wh,{stickyTopOffset:ta,className:"".concat(ae,"-header"),ref:Fa}),sl),Od,bo&&bo!=="top"&&v.createElement(Lr,(0,F.Z)({},Wh,{stickyBottomOffset:Qi,className:"".concat(ae,"-summary"),ref:e}),Wu),Ii&&v.createElement(Zs,{ref:_i,offsetScroll:ja,scrollBodyRef:go,onScroll:el,container:ca}))}else Rc=v.createElement("div",{style:(0,qe.Z)((0,qe.Z)({},Eo),qa),className:Te()("".concat(ae,"-content")),onScroll:el,ref:go},v.createElement(td,(0,F.Z)({style:(0,qe.Z)((0,qe.Z)({},Ss),{},{tableLayout:Jf})},Ou),fd,Mh,Sr!==!1&&v.createElement(cn,(0,F.Z)({},$f,la)),wl,ra&&v.createElement(ft,{stickyOffsets:yn,flattenColumns:ua,columns:Ki},ra)));var yf=v.createElement("div",(0,F.Z)({className:Te()(ae,et,(G={},(0,me.Z)(G,"".concat(ae,"-rtl"),Tt==="rtl"),(0,me.Z)(G,"".concat(ae,"-ping-left"),y),(0,me.Z)(G,"".concat(ae,"-ping-right"),ge),(0,me.Z)(G,"".concat(ae,"-layout-fixed"),It==="fixed"),(0,me.Z)(G,"".concat(ae,"-fixed-header"),vn),(0,me.Z)(G,"".concat(ae,"-fixed-column"),ri),(0,me.Z)(G,"".concat(ae,"-scroll-horizontal"),$n),(0,me.Z)(G,"".concat(ae,"-has-fix-left"),ua[0]&&ua[0].fixed),(0,me.Z)(G,"".concat(ae,"-has-fix-right"),ua[ua.length-1]&&ua[ua.length-1].fixed==="right"),G)),style:Ze,id:gr,ref:Lo},oc),qt&&v.createElement(Da,{className:"".concat(ae,"-title")},qt(b)),v.createElement("div",{ref:Qs,className:"".concat(ae,"-container")},Rc),Ot&&v.createElement(Da,{className:"".concat(ae,"-footer")},Ot(b)));$n&&(yf=v.createElement(J.Z,{onResize:gf},yf));var Ep=Pn(ua,yn,Tt,Ki),bd=v.useMemo(function(){return{prefixCls:ae,getComponent:D,scrollbarSize:Zf,direction:Tt,fixedInfoList:Ep,isSticky:Ii,supportSticky:Lu,componentWidth:ln,fixHeader:vn,fixColumn:ri,horizonScroll:$n,tableLayout:Jf,rowClassName:Ie,expandedRowClassName:$r.expandedRowClassName,expandIcon:ei,expandableType:an,expandRowByClick:$r.expandRowByClick,expandedRowRender:$r.expandedRowRender,onTriggerExpand:Sn,expandIconColumnIndex:$r.expandIconColumnIndex,indentSize:$r.indentSize,allColumnsFixedLeft:ua.every(function(ml){return ml.fixed==="left"}),columns:Ki,flattenColumns:ua,onColumnResize:Is,hoverStartRow:be,hoverEndRow:$e,onHover:_t}},[ae,D,Zf,Tt,Ep,Ii,Lu,ln,vn,ri,$n,Jf,Ie,$r.expandedRowClassName,ei,an,$r.expandRowByClick,$r.expandedRowRender,Sn,$r.expandIconColumnIndex,$r.indentSize,Ki,ua,Is,be,$e,_t]);return v.createElement(je.Provider,{value:bd},yf)}function lr(w){return pe(zr,w)}var Zr=lr();Zr.EXPAND_COLUMN=C,Zr.Column=Vs,Zr.ColumnGroup=ls,Zr.Summary=Z;var Hn=null,Hr=null;function Bo(w){return null}var Yr=Bo;function pr(w){return null}var at=pr,hr=m(98423),er=m(53124),dn=m(88258),mn=m(97647);function Vn(){const[,w]=v.useReducer(G=>G+1,0);return w}var ni=m(74443);function si(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const G=(0,v.useRef)({}),Ce=Vn(),ae=(0,ni.Z)();return(0,v.useEffect)(()=>{const et=ae.subscribe(Ie=>{G.current=Ie,w&&Ce()});return()=>ae.unsubscribe(et)},[]),G.current}var Si=si,qi=m(88526),Rr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},Mn=Rr,pn=m(42135),wn=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Mn}))};wn.displayName="DoubleLeftOutlined";var Kn=v.forwardRef(wn),Ei={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},Ji=Ei,Yi=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Ji}))};Yi.displayName="DoubleRightOutlined";var oa=v.forwardRef(Yi),Ma={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},k=Ma,de=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:k}))};de.displayName="LeftOutlined";var yt=v.forwardRef(de),Ue=m(65793),nr=m(15671),Mr=m(43144),qr=m(60136),kn=m(29388),Nn=function(G){var Ce,ae="".concat(G.rootPrefixCls,"-item"),et=Te()(ae,"".concat(ae,"-").concat(G.page),(Ce={},(0,me.Z)(Ce,"".concat(ae,"-active"),G.active),(0,me.Z)(Ce,"".concat(ae,"-disabled"),!G.page),(0,me.Z)(Ce,G.className,!!G.className),Ce)),Ie=function(){G.onClick(G.page)},Ze=function(it){G.onKeyPress(it,G.onClick,G.page)};return v.createElement("li",{title:G.showTitle?G.page:null,className:et,onClick:Ie,onKeyPress:Ze,tabIndex:"0"},G.itemRender(G.page,"page",v.createElement("a",{rel:"nofollow"},G.page)))},Mi=Nn,Bi={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},io=function(w){(0,qr.Z)(Ce,w);var G=(0,kn.Z)(Ce);function Ce(){var ae;(0,nr.Z)(this,Ce);for(var et=arguments.length,Ie=new Array(et),Ze=0;Ze<et;Ze++)Ie[Ze]=arguments[Ze];return ae=G.call.apply(G,[this].concat(Ie)),ae.state={goInputText:""},ae.buildOptionText=function(Fe){return"".concat(Fe," ").concat(ae.props.locale.items_per_page)},ae.changeSize=function(Fe){ae.props.changeSize(Number(Fe))},ae.handleChange=function(Fe){ae.setState({goInputText:Fe.target.value})},ae.handleBlur=function(Fe){var it=ae.props,gt=it.goButton,It=it.quickGo,Tt=it.rootPrefixCls,qt=ae.state.goInputText;gt||qt===""||(ae.setState({goInputText:""}),!(Fe.relatedTarget&&(Fe.relatedTarget.className.indexOf("".concat(Tt,"-item-link"))>=0||Fe.relatedTarget.className.indexOf("".concat(Tt,"-item"))>=0))&&It(ae.getValidValue()))},ae.go=function(Fe){var it=ae.state.goInputText;it!==""&&(Fe.keyCode===Bi.ENTER||Fe.type==="click")&&(ae.setState({goInputText:""}),ae.props.quickGo(ae.getValidValue()))},ae}return(0,Mr.Z)(Ce,[{key:"getValidValue",value:function(){var et=this.state.goInputText;return!et||isNaN(et)?void 0:Number(et)}},{key:"getPageSizeOptions",value:function(){var et=this.props,Ie=et.pageSize,Ze=et.pageSizeOptions;return Ze.some(function(Fe){return Fe.toString()===Ie.toString()})?Ze:Ze.concat([Ie.toString()]).sort(function(Fe,it){var gt=isNaN(Number(Fe))?0:Number(Fe),It=isNaN(Number(it))?0:Number(it);return gt-It})}},{key:"render",value:function(){var et=this,Ie=this.props,Ze=Ie.pageSize,Fe=Ie.locale,it=Ie.rootPrefixCls,gt=Ie.changeSize,It=Ie.quickGo,Tt=Ie.goButton,qt=Ie.selectComponentClass,Ot=Ie.buildOptionText,rr=Ie.selectPrefixCls,Xt=Ie.disabled,gr=this.state.goInputText,Sr="".concat(it,"-options"),Wr=qt,Cn=null,xn=null,In=null;if(!gt&&!It)return null;var Rn=this.getPageSizeOptions();if(gt&&Wr){var Gn=Rn.map(function(ti,ii){return v.createElement(Wr.Option,{key:ii,value:ti.toString()},(Ot||et.buildOptionText)(ti))});Cn=v.createElement(Wr,{disabled:Xt,prefixCls:rr,showSearch:!1,className:"".concat(Sr,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(Ze||Rn[0]).toString(),onChange:this.changeSize,getPopupContainer:function(ii){return ii.parentNode},"aria-label":Fe.page_size,defaultOpen:!1},Gn)}return It&&(Tt&&(In=typeof Tt=="boolean"?v.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:Xt,className:"".concat(Sr,"-quick-jumper-button")},Fe.jump_to_confirm):v.createElement("span",{onClick:this.go,onKeyUp:this.go},Tt)),xn=v.createElement("div",{className:"".concat(Sr,"-quick-jumper")},Fe.jump_to,v.createElement("input",{disabled:Xt,type:"text",value:gr,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":Fe.page}),Fe.page,In)),v.createElement("li",{className:"".concat(Sr)},Cn,xn)}}]),Ce}(v.Component);io.defaultProps={pageSizeOptions:["10","20","50","100"]};var co=io,Sa={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};function Ko(){}function wo(w){var G=Number(w);return typeof G=="number"&&!isNaN(G)&&isFinite(G)&&Math.floor(G)===G}function Oo(w,G,Ce){return Ce}function Ho(w,G,Ce){var ae=typeof w=="undefined"?G.pageSize:w;return Math.floor((Ce.total-1)/ae)+1}var Io=function(w){(0,qr.Z)(Ce,w);var G=(0,kn.Z)(Ce);function Ce(ae){var et;(0,nr.Z)(this,Ce),et=G.call(this,ae),et.getJumpPrevPage=function(){return Math.max(1,et.state.current-(et.props.showLessItems?3:5))},et.getJumpNextPage=function(){return Math.min(Ho(void 0,et.state,et.props),et.state.current+(et.props.showLessItems?3:5))},et.getItemIcon=function(gt,It){var Tt=et.props.prefixCls,qt=gt||v.createElement("button",{type:"button","aria-label":It,className:"".concat(Tt,"-item-link")});return typeof gt=="function"&&(qt=v.createElement(gt,(0,qe.Z)({},et.props))),qt},et.savePaginationNode=function(gt){et.paginationNode=gt},et.isValid=function(gt){var It=et.props.total;return wo(gt)&&gt!==et.state.current&&wo(It)&&It>0},et.shouldDisplayQuickJumper=function(){var gt=et.props,It=gt.showQuickJumper,Tt=gt.total,qt=et.state.pageSize;return Tt<=qt?!1:It},et.handleKeyDown=function(gt){(gt.keyCode===Bi.ARROW_UP||gt.keyCode===Bi.ARROW_DOWN)&&gt.preventDefault()},et.handleKeyUp=function(gt){var It=et.getValidValue(gt),Tt=et.state.currentInputValue;It!==Tt&&et.setState({currentInputValue:It}),gt.keyCode===Bi.ENTER?et.handleChange(It):gt.keyCode===Bi.ARROW_UP?et.handleChange(It-1):gt.keyCode===Bi.ARROW_DOWN&&et.handleChange(It+1)},et.handleBlur=function(gt){var It=et.getValidValue(gt);et.handleChange(It)},et.changePageSize=function(gt){var It=et.state.current,Tt=Ho(gt,et.state,et.props);It=It>Tt?Tt:It,Tt===0&&(It=et.state.current),typeof gt=="number"&&("pageSize"in et.props||et.setState({pageSize:gt}),"current"in et.props||et.setState({current:It,currentInputValue:It})),et.props.onShowSizeChange(It,gt),"onChange"in et.props&&et.props.onChange&&et.props.onChange(It,gt)},et.handleChange=function(gt){var It=et.props,Tt=It.disabled,qt=It.onChange,Ot=et.state,rr=Ot.pageSize,Xt=Ot.current,gr=Ot.currentInputValue;if(et.isValid(gt)&&!Tt){var Sr=Ho(void 0,et.state,et.props),Wr=gt;return gt>Sr?Wr=Sr:gt<1&&(Wr=1),"current"in et.props||et.setState({current:Wr}),Wr!==gr&&et.setState({currentInputValue:Wr}),qt(Wr,rr),Wr}return Xt},et.prev=function(){et.hasPrev()&&et.handleChange(et.state.current-1)},et.next=function(){et.hasNext()&&et.handleChange(et.state.current+1)},et.jumpPrev=function(){et.handleChange(et.getJumpPrevPage())},et.jumpNext=function(){et.handleChange(et.getJumpNextPage())},et.hasPrev=function(){return et.state.current>1},et.hasNext=function(){return et.state.current<Ho(void 0,et.state,et.props)},et.runIfEnter=function(gt,It){if(gt.key==="Enter"||gt.charCode===13){for(var Tt=arguments.length,qt=new Array(Tt>2?Tt-2:0),Ot=2;Ot<Tt;Ot++)qt[Ot-2]=arguments[Ot];It.apply(void 0,qt)}},et.runIfEnterPrev=function(gt){et.runIfEnter(gt,et.prev)},et.runIfEnterNext=function(gt){et.runIfEnter(gt,et.next)},et.runIfEnterJumpPrev=function(gt){et.runIfEnter(gt,et.jumpPrev)},et.runIfEnterJumpNext=function(gt){et.runIfEnter(gt,et.jumpNext)},et.handleGoTO=function(gt){(gt.keyCode===Bi.ENTER||gt.type==="click")&&et.handleChange(et.state.currentInputValue)};var Ie=ae.onChange!==Ko,Ze="current"in ae;Ze&&!Ie&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var Fe=ae.defaultCurrent;"current"in ae&&(Fe=ae.current);var it=ae.defaultPageSize;return"pageSize"in ae&&(it=ae.pageSize),Fe=Math.min(Fe,Ho(it,void 0,ae)),et.state={current:Fe,currentInputValue:Fe,pageSize:it},et}return(0,Mr.Z)(Ce,[{key:"componentDidUpdate",value:function(et,Ie){var Ze=this.props.prefixCls;if(Ie.current!==this.state.current&&this.paginationNode){var Fe=this.paginationNode.querySelector(".".concat(Ze,"-item-").concat(Ie.current));Fe&&document.activeElement===Fe&&Fe.blur()}}},{key:"getValidValue",value:function(et){var Ie=et.target.value,Ze=Ho(void 0,this.state,this.props),Fe=this.state.currentInputValue,it;return Ie===""?it=Ie:isNaN(Number(Ie))?it=Fe:Ie>=Ze?it=Ze:it=Number(Ie),it}},{key:"getShowSizeChanger",value:function(){var et=this.props,Ie=et.showSizeChanger,Ze=et.total,Fe=et.totalBoundaryShowSizeChanger;return typeof Ie!="undefined"?Ie:Ze>Fe}},{key:"renderPrev",value:function(et){var Ie=this.props,Ze=Ie.prevIcon,Fe=Ie.itemRender,it=Fe(et,"prev",this.getItemIcon(Ze,"prev page")),gt=!this.hasPrev();return(0,v.isValidElement)(it)?(0,v.cloneElement)(it,{disabled:gt}):it}},{key:"renderNext",value:function(et){var Ie=this.props,Ze=Ie.nextIcon,Fe=Ie.itemRender,it=Fe(et,"next",this.getItemIcon(Ze,"next page")),gt=!this.hasNext();return(0,v.isValidElement)(it)?(0,v.cloneElement)(it,{disabled:gt}):it}},{key:"render",value:function(){var et=this,Ie=this.props,Ze=Ie.prefixCls,Fe=Ie.className,it=Ie.style,gt=Ie.disabled,It=Ie.hideOnSinglePage,Tt=Ie.total,qt=Ie.locale,Ot=Ie.showQuickJumper,rr=Ie.showLessItems,Xt=Ie.showTitle,gr=Ie.showTotal,Sr=Ie.simple,Wr=Ie.itemRender,Cn=Ie.showPrevNextJumpers,xn=Ie.jumpPrevIcon,In=Ie.jumpNextIcon,Rn=Ie.selectComponentClass,Gn=Ie.selectPrefixCls,ti=Ie.pageSizeOptions,ii=this.state,b=ii.current,M=ii.pageSize,D=ii.currentInputValue;if(It===!0&&Tt<=M)return null;var P=Ho(void 0,this.state,this.props),V=[],q=null,be=null,$e=null,_t=null,Gt=null,yr=Ot&&Ot.goButton,$r=rr?1:2,an=b-1>0?b-1:0,Un=b+1<P?b+1:P,ei=Object.keys(this.props).reduce(function(Fa,go){return(go.substr(0,5)==="data-"||go.substr(0,5)==="aria-"||go==="role")&&(Fa[go]=et.props[go]),Fa},{}),Jn=gr&&v.createElement("li",{className:"".concat(Ze,"-total-text")},gr(Tt,[Tt===0?0:(b-1)*M+1,b*M>Tt?Tt:b*M]));if(Sr)return yr&&(typeof yr=="boolean"?Gt=v.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},qt.jump_to_confirm):Gt=v.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},yr),Gt=v.createElement("li",{title:Xt?"".concat(qt.jump_to).concat(b,"/").concat(P):null,className:"".concat(Ze,"-simple-pager")},Gt)),v.createElement("ul",(0,F.Z)({className:Te()(Ze,"".concat(Ze,"-simple"),(0,me.Z)({},"".concat(Ze,"-disabled"),gt),Fe),style:it,ref:this.savePaginationNode},ei),Jn,v.createElement("li",{title:Xt?qt.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:Te()("".concat(Ze,"-prev"),(0,me.Z)({},"".concat(Ze,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(an)),v.createElement("li",{title:Xt?"".concat(b,"/").concat(P):null,className:"".concat(Ze,"-simple-pager")},v.createElement("input",{type:"text",value:D,disabled:gt,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),v.createElement("span",{className:"".concat(Ze,"-slash")},"/"),P),v.createElement("li",{title:Xt?qt.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:Te()("".concat(Ze,"-next"),(0,me.Z)({},"".concat(Ze,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(Un)),Gt);if(P<=3+$r*2){var Sn={locale:qt,rootPrefixCls:Ze,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:Xt,itemRender:Wr};P||V.push(v.createElement(Mi,(0,F.Z)({},Sn,{key:"noPager",page:1,className:"".concat(Ze,"-item-disabled")})));for(var Xn=1;Xn<=P;Xn+=1){var ai=b===Xn;V.push(v.createElement(Mi,(0,F.Z)({},Sn,{key:Xn,page:Xn,active:ai})))}}else{var ln=rr?qt.prev_3:qt.prev_5,pi=rr?qt.next_3:qt.next_5;Cn&&(q=v.createElement("li",{title:Xt?ln:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:Te()("".concat(Ze,"-jump-prev"),(0,me.Z)({},"".concat(Ze,"-jump-prev-custom-icon"),!!xn))},Wr(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(xn,"prev page"))),be=v.createElement("li",{title:Xt?pi:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:Te()("".concat(Ze,"-jump-next"),(0,me.Z)({},"".concat(Ze,"-jump-next-custom-icon"),!!In))},Wr(this.getJumpNextPage(),"jump-next",this.getItemIcon(In,"next page")))),_t=v.createElement(Mi,{locale:qt,last:!0,rootPrefixCls:Ze,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:P,page:P,active:!1,showTitle:Xt,itemRender:Wr}),$e=v.createElement(Mi,{locale:qt,rootPrefixCls:Ze,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:Xt,itemRender:Wr});var gi=Math.max(1,b-$r),Li=Math.min(b+$r,P);b-1<=$r&&(Li=1+$r*2),P-b<=$r&&(gi=P-$r*2);for(var Ki=gi;Ki<=Li;Ki+=1){var ua=b===Ki;V.push(v.createElement(Mi,{locale:qt,rootPrefixCls:Ze,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Ki,page:Ki,active:ua,showTitle:Xt,itemRender:Wr}))}b-1>=$r*2&&b!==1+2&&(V[0]=(0,v.cloneElement)(V[0],{className:"".concat(Ze,"-item-after-jump-prev")}),V.unshift(q)),P-b>=$r*2&&b!==P-2&&(V[V.length-1]=(0,v.cloneElement)(V[V.length-1],{className:"".concat(Ze,"-item-before-jump-next")}),V.push(be)),gi!==1&&V.unshift($e),Li!==P&&V.push(_t)}var la=!this.hasPrev()||!P,Lo=!this.hasNext()||!P;return v.createElement("ul",(0,F.Z)({className:Te()(Ze,Fe,(0,me.Z)({},"".concat(Ze,"-disabled"),gt)),style:it,ref:this.savePaginationNode},ei),Jn,v.createElement("li",{title:Xt?qt.prev_page:null,onClick:this.prev,tabIndex:la?null:0,onKeyPress:this.runIfEnterPrev,className:Te()("".concat(Ze,"-prev"),(0,me.Z)({},"".concat(Ze,"-disabled"),la)),"aria-disabled":la},this.renderPrev(an)),V,v.createElement("li",{title:Xt?qt.next_page:null,onClick:this.next,tabIndex:Lo?null:0,onKeyPress:this.runIfEnterNext,className:Te()("".concat(Ze,"-next"),(0,me.Z)({},"".concat(Ze,"-disabled"),Lo)),"aria-disabled":Lo},this.renderNext(Un)),v.createElement(co,{disabled:gt,locale:qt,rootPrefixCls:Ze,selectComponentClass:Rn,selectPrefixCls:Gn,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:b,pageSize:M,pageSizeOptions:ti,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:yr}))}}],[{key:"getDerivedStateFromProps",value:function(et,Ie){var Ze={};if("current"in et&&(Ze.current=et.current,et.current!==Ie.current&&(Ze.currentInputValue=Ze.current)),"pageSize"in et&&et.pageSize!==Ie.pageSize){var Fe=Ie.current,it=Ho(et.pageSize,Ie,et);Fe=Fe>it?it:Fe,"current"in et||(Ze.current=Fe,Ze.currentInputValue=Fe),Ze.pageSize=et.pageSize}return Ze}}]),Ce}(v.Component);Io.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:Ko,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:Ko,locale:Sa,style:{},itemRender:Oo,totalBoundaryShowSizeChanger:50};var qs=Io,Il=m(62906),Ao=m(74342),Va=m(33394);const gs=w=>v.createElement(Va.Z,Object.assign({},w,{size:"small"})),Ws=w=>v.createElement(Va.Z,Object.assign({},w,{size:"middle"}));gs.Option=Va.Z.Option,Ws.Option=Va.Z.Option;var bs=m(14747),Ps=m(80110),Xs=m(45503),gl=m(67968);const jf=w=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:w,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Mu=w=>({borderColor:w.inputBorderHoverColor,borderInlineEndWidth:w.lineWidth}),yl=w=>({borderColor:w.inputBorderHoverColor,boxShadow:`0 0 0 ${w.controlOutlineWidth}px ${w.controlOutline}`,borderInlineEndWidth:w.lineWidth,outline:0}),lc=w=>({color:w.colorTextDisabled,backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},Mu((0,Xs.TS)(w,{inputBorderHoverColor:w.colorBorder})))}),Lc=w=>{const{inputPaddingVerticalLG:G,fontSizeLG:Ce,lineHeightLG:ae,borderRadiusLG:et,inputPaddingHorizontalLG:Ie}=w;return{padding:`${G}px ${Ie}px`,fontSize:Ce,lineHeight:ae,borderRadius:et}},dh=w=>({padding:`${w.inputPaddingVerticalSM}px ${w.controlPaddingHorizontalSM-1}px`,borderRadius:w.borderRadiusSM}),_l=(w,G)=>{const{componentCls:Ce,colorError:ae,colorWarning:et,colorErrorOutline:Ie,colorWarningOutline:Ze,colorErrorBorderHover:Fe,colorWarningBorderHover:it}=w;return{[`&-status-error:not(${G}-disabled):not(${G}-borderless)${G}`]:{borderColor:ae,"&:hover":{borderColor:Fe},"&:focus, &-focused":Object.assign({},yl((0,Xs.TS)(w,{inputBorderActiveColor:ae,inputBorderHoverColor:ae,controlOutline:Ie}))),[`${Ce}-prefix, ${Ce}-suffix`]:{color:ae}},[`&-status-warning:not(${G}-disabled):not(${G}-borderless)${G}`]:{borderColor:et,"&:hover":{borderColor:it},"&:focus, &-focused":Object.assign({},yl((0,Xs.TS)(w,{inputBorderActiveColor:et,inputBorderHoverColor:et,controlOutline:Ze}))),[`${Ce}-prefix, ${Ce}-suffix`]:{color:et}}}},Us=w=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${w.inputPaddingVertical}px ${w.inputPaddingHorizontal}px`,color:w.colorText,fontSize:w.fontSize,lineHeight:w.lineHeight,backgroundColor:w.colorBgContainer,backgroundImage:"none",borderWidth:w.lineWidth,borderStyle:w.lineType,borderColor:w.colorBorder,borderRadius:w.borderRadius,transition:`all ${w.motionDurationMid}`},jf(w.colorTextPlaceholder)),{"&:hover":Object.assign({},Mu(w)),"&:focus, &-focused":Object.assign({},yl(w)),"&-disabled, &[disabled]":Object.assign({},lc(w)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:w.controlHeight,lineHeight:w.lineHeight,verticalAlign:"bottom",transition:`all ${w.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},Lc(w)),"&-sm":Object.assign({},dh(w)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),th=w=>{const{componentCls:G,antCls:Ce}=w;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:w.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${G}, &-lg > ${G}-group-addon`]:Object.assign({},Lc(w)),[`&-sm ${G}, &-sm > ${G}-group-addon`]:Object.assign({},dh(w)),[`&-lg ${Ce}-select-single ${Ce}-select-selector`]:{height:w.controlHeightLG},[`&-sm ${Ce}-select-single ${Ce}-select-selector`]:{height:w.controlHeightSM},[`> ${G}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${G}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${w.inputPaddingHorizontal}px`,color:w.colorText,fontWeight:"normal",fontSize:w.fontSize,textAlign:"center",backgroundColor:w.colorFillAlter,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,borderRadius:w.borderRadius,transition:`all ${w.motionDurationSlow}`,lineHeight:1,[`${Ce}-select`]:{margin:`-${w.inputPaddingVertical+1}px -${w.inputPaddingHorizontal}px`,[`&${Ce}-select-single:not(${Ce}-select-customize-input)`]:{[`${Ce}-select-selector`]:{backgroundColor:"inherit",border:`${w.lineWidth}px ${w.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Ce}-select-selector`]:{color:w.colorPrimary}}},[`${Ce}-cascader-picker`]:{margin:`-9px -${w.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${Ce}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${G}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${G}-search-with-button &`]:{zIndex:0}}},[`> ${G}:first-child, ${G}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Ce}-select ${Ce}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${G}-affix-wrapper`]:{[`&:not(:first-child) ${G}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${G}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${G}:last-child, ${G}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Ce}-select ${Ce}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${G}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${G}-search &`]:{borderStartStartRadius:w.borderRadius,borderEndStartRadius:w.borderRadius}},[`&:not(:first-child), ${G}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${G}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,bs.dF)()),{[`${G}-group-addon, ${G}-group-wrap, > ${G}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:w.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`& > ${G}-affix-wrapper`]:{display:"inline-flex"},[`& > ${Ce}-picker-range`]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-w.lineWidth,borderInlineEndWidth:w.lineWidth},[`${G}`]:{float:"none"},[`& > ${Ce}-select > ${Ce}-select-selector,
      & > ${Ce}-select-auto-complete ${G},
      & > ${Ce}-cascader-picker ${G},
      & > ${G}-group-wrapper ${G}`]:{borderInlineEndWidth:w.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Ce}-select-focused`]:{zIndex:1},[`& > ${Ce}-select > ${Ce}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Ce}-select:first-child > ${Ce}-select-selector,
      & > ${Ce}-select-auto-complete:first-child ${G},
      & > ${Ce}-cascader-picker:first-child ${G}`]:{borderStartStartRadius:w.borderRadius,borderEndStartRadius:w.borderRadius},[`& > *:last-child,
      & > ${Ce}-select:last-child > ${Ce}-select-selector,
      & > ${Ce}-cascader-picker:last-child ${G},
      & > ${Ce}-cascader-picker-focused:last-child ${G}`]:{borderInlineEndWidth:w.lineWidth,borderStartEndRadius:w.borderRadius,borderEndEndRadius:w.borderRadius},[`& > ${Ce}-select-auto-complete ${G}`]:{verticalAlign:"top"},[`${G}-group-wrapper + ${G}-group-wrapper`]:{marginInlineStart:-w.lineWidth,[`${G}-affix-wrapper`]:{borderRadius:0}},[`${G}-group-wrapper:not(:last-child)`]:{[`&${G}-search > ${G}-group`]:{[`& > ${G}-group-addon > ${G}-search-button`]:{borderRadius:0},[`& > ${G}`]:{borderStartStartRadius:w.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:w.borderRadius}}}})}},kf=w=>{const{componentCls:G,controlHeightSM:Ce,lineWidth:ae}=w,et=16,Ie=(Ce-ae*2-et)/2;return{[G]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,bs.Wf)(w)),Us(w)),_l(w,G)),{'&[type="color"]':{height:w.controlHeight,[`&${G}-lg`]:{height:w.controlHeightLG},[`&${G}-sm`]:{height:Ce,paddingTop:Ie,paddingBottom:Ie}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},wf=w=>{const{componentCls:G}=w;return{[`${G}-clear-icon`]:{margin:0,color:w.colorTextQuaternary,fontSize:w.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${w.motionDurationSlow}`,"&:hover":{color:w.colorTextTertiary},"&:active":{color:w.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${w.inputAffixPadding}px`}}}},lf=w=>{const{componentCls:G,inputAffixPadding:Ce,colorTextDescription:ae,motionDurationSlow:et,colorIcon:Ie,colorIconHover:Ze,iconCls:Fe}=w;return{[`${G}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Us(w)),{display:"inline-flex",[`&:not(${G}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},Mu(w)),{zIndex:1,[`${G}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${G}[disabled]`]:{background:"transparent"}},[`> input${G}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&:focus":{boxShadow:"none !important"}},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${G}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:w.paddingXS}},"&-show-count-suffix":{color:ae},"&-show-count-has-suffix":{marginInlineEnd:w.paddingXXS},"&-prefix":{marginInlineEnd:Ce},"&-suffix":{marginInlineStart:Ce}}}),wf(w)),{[`${Fe}${G}-password-icon`]:{color:Ie,cursor:"pointer",transition:`all ${et}`,"&:hover":{color:Ze}}}),_l(w,`${G}-affix-wrapper`))}},gd=w=>{const{componentCls:G,colorError:Ce,colorWarning:ae,borderRadiusLG:et,borderRadiusSM:Ie}=w;return{[`${G}-group`]:Object.assign(Object.assign(Object.assign({},(0,bs.Wf)(w)),th(w)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${G}-group-addon`]:{borderRadius:et}},"&-sm":{[`${G}-group-addon`]:{borderRadius:Ie}},"&-status-error":{[`${G}-group-addon`]:{color:Ce,borderColor:Ce}},"&-status-warning":{[`${G}-group-addon`]:{color:ae,borderColor:ae}},"&-disabled":{[`${G}-group-addon`]:Object.assign({},lc(w))}}})}},Kh=w=>{const{componentCls:G,antCls:Ce}=w,ae=`${G}-search`;return{[ae]:{[`${G}`]:{"&:hover, &:focus":{borderColor:w.colorPrimaryHover,[`+ ${G}-group-addon ${ae}-button:not(${Ce}-btn-primary)`]:{borderInlineStartColor:w.colorPrimaryHover}}},[`${G}-affix-wrapper`]:{borderRadius:0},[`${G}-lg`]:{lineHeight:w.lineHeightLG-2e-4},[`> ${G}-group`]:{[`> ${G}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${ae}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:w.borderRadius,borderEndEndRadius:w.borderRadius,borderEndStartRadius:0},[`${ae}-button:not(${Ce}-btn-primary)`]:{color:w.colorTextDescription,"&:hover":{color:w.colorPrimaryHover},"&:active":{color:w.colorPrimaryActive},[`&${Ce}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${ae}-button`]:{height:w.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${ae}-button`]:{height:w.controlHeightLG},[`&-small ${ae}-button`]:{height:w.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${G}-compact-item`]:{[`&:not(${G}-compact-last-item)`]:{[`${G}-group-addon`]:{[`${G}-search-button`]:{marginInlineEnd:-w.lineWidth,borderRadius:0}}},[`&:not(${G}-compact-first-item)`]:{[`${G},${G}-affix-wrapper`]:{borderRadius:0}},[`> ${G}-group-addon ${G}-search-button,
        > ${G},
        ${G}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${G}-affix-wrapper-focused`]:{zIndex:2}}}}};function yc(w){return(0,Xs.TS)(w,{inputAffixPadding:w.paddingXXS,inputPaddingVertical:Math.max(Math.round((w.controlHeight-w.fontSize*w.lineHeight)/2*10)/10-w.lineWidth,3),inputPaddingVerticalLG:Math.ceil((w.controlHeightLG-w.fontSizeLG*w.lineHeightLG)/2*10)/10-w.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((w.controlHeightSM-w.fontSize*w.lineHeight)/2*10)/10-w.lineWidth,0),inputPaddingHorizontal:w.paddingSM-w.lineWidth,inputPaddingHorizontalSM:w.paddingXS-w.lineWidth,inputPaddingHorizontalLG:w.controlPaddingHorizontal-w.lineWidth,inputBorderHoverColor:w.colorPrimaryHover,inputBorderActiveColor:w.colorPrimaryHover})}const Eh=w=>{const{componentCls:G,paddingLG:Ce}=w,ae=`${G}-textarea`;return{[ae]:{position:"relative","&-show-count":{[`> ${G}`]:{height:"100%"},[`${G}-data-count`]:{color:w.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none",float:"right",marginBottom:-w.fontSize*w.lineHeight},"&-rtl":{[`${G}-data-count`]:{float:"left"}}},[`&-affix-wrapper${ae}-has-feedback`]:{[`${G}`]:{paddingInlineEnd:Ce}},[`&-affix-wrapper${G}-affix-wrapper`]:{padding:0,[`> textarea${G}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${G}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${G}-clear-icon`]:{position:"absolute",insetInlineEnd:w.paddingXS,insetBlockStart:w.paddingXS},[`${ae}-suffix`]:{position:"absolute",top:0,insetInlineEnd:w.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}};var cf=(0,gl.Z)("Input",w=>{const G=yc(w);return[kf(G),Eh(G),lf(G),gd(G),Kh(G),(0,Ps.c)(G)]});const Af=w=>{const{componentCls:G}=w;return{[`${G}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${G}-item-link`]:{color:w.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${G}-item-link`]:{color:w.colorTextDisabled,cursor:"not-allowed"}}},[`&${G}-disabled`]:{cursor:"not-allowed",[`${G}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:w.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:w.colorBorder,backgroundColor:w.paginationItemDisabledBgActive,"&:hover, &:active":{backgroundColor:w.paginationItemDisabledBgActive},a:{color:w.paginationItemDisabledColorActive}}},[`${G}-item-link`]:{color:w.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${G}-simple&`]:{backgroundColor:"transparent"}},[`${G}-item-link-icon`]:{opacity:0},[`${G}-item-ellipsis`]:{opacity:1},[`${G}-simple-pager`]:{color:w.colorTextDisabled}}}},_f=w=>{const{componentCls:G}=w;return{[`&${G}-mini ${G}-total-text, &${G}-mini ${G}-simple-pager`]:{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`},[`&${G}-mini ${G}-item`]:{minWidth:w.paginationItemSizeSM,height:w.paginationItemSizeSM,margin:0,lineHeight:`${w.paginationItemSizeSM-2}px`},[`&${G}-mini ${G}-item:not(${G}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent"},[`&${G}-mini ${G}-prev, &${G}-mini ${G}-next`]:{minWidth:w.paginationItemSizeSM,height:w.paginationItemSizeSM,margin:0,lineHeight:`${w.paginationItemSizeSM}px`},[`
    &${G}-mini ${G}-prev ${G}-item-link,
    &${G}-mini ${G}-next ${G}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`}},[`&${G}-mini ${G}-jump-prev, &${G}-mini ${G}-jump-next`]:{height:w.paginationItemSizeSM,marginInlineEnd:0,lineHeight:`${w.paginationItemSizeSM}px`},[`&${G}-mini ${G}-options`]:{marginInlineStart:w.paginationMiniOptionsMarginInlineStart,["&-size-changer"]:{top:w.paginationMiniOptionsSizeChangerTop},["&-quick-jumper"]:{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`,input:Object.assign(Object.assign({},dh(w)),{width:w.paginationMiniQuickJumperInputWidth,height:w.controlHeightSM})}}}},Dc=w=>{const{componentCls:G}=w;return{[`
    &${G}-simple ${G}-prev,
    &${G}-simple ${G}-next
    `]:{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`,verticalAlign:"top",[`${G}-item-link`]:{height:w.paginationItemSizeSM,backgroundColor:"transparent",border:0,"&::after":{height:w.paginationItemSizeSM,lineHeight:`${w.paginationItemSizeSM}px`}}},[`&${G}-simple ${G}-simple-pager`]:{display:"inline-block",height:w.paginationItemSizeSM,marginInlineEnd:w.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:w.marginXS,padding:`0 ${w.paginationItemPaddingInline}px`,textAlign:"center",backgroundColor:w.paginationItemInputBg,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,borderRadius:w.borderRadius,outline:"none",transition:`border-color ${w.motionDurationMid}`,color:"inherit","&:hover":{borderColor:w.colorPrimary},"&:focus":{borderColor:w.colorPrimaryHover,boxShadow:`${w.inputOutlineOffset}px 0 ${w.controlOutlineWidth}px ${w.controlOutline}`},"&[disabled]":{color:w.colorTextDisabled,backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,cursor:"not-allowed"}}}}},Ff=w=>{const{componentCls:G}=w;return{[`${G}-jump-prev, ${G}-jump-next`]:{outline:0,[`${G}-item-container`]:{position:"relative",[`${G}-item-link-icon`]:{color:w.colorPrimary,fontSize:w.fontSizeSM,opacity:0,transition:`all ${w.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${G}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:w.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:w.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:w.paginationEllipsisTextIndent,opacity:1,transition:`all ${w.motionDurationMid}`}},"&:hover":{[`${G}-item-link-icon`]:{opacity:1},[`${G}-item-ellipsis`]:{opacity:0}},"&:focus-visible":Object.assign({[`${G}-item-link-icon`]:{opacity:1},[`${G}-item-ellipsis`]:{opacity:0}},(0,bs.oN)(w))},[`
    ${G}-prev,
    ${G}-jump-prev,
    ${G}-jump-next
    `]:{marginInlineEnd:w.marginXS},[`
    ${G}-prev,
    ${G}-next,
    ${G}-jump-prev,
    ${G}-jump-next
    `]:{display:"inline-block",minWidth:w.paginationItemSize,height:w.paginationItemSize,color:w.colorText,fontFamily:w.paginationFontFamily,lineHeight:`${w.paginationItemSize}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:w.borderRadius,cursor:"pointer",transition:`all ${w.motionDurationMid}`},[`${G}-prev, ${G}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:w.colorText,cursor:"pointer",userSelect:"none"},[`${G}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:w.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${w.lineWidth}px ${w.lineType} transparent`,borderRadius:w.borderRadius,outline:"none",transition:`border ${w.motionDurationMid}`},[`&:focus-visible ${G}-item-link`]:Object.assign({},(0,bs.oN)(w)),[`&:hover ${G}-item-link`]:{backgroundColor:w.colorBgTextHover},[`&:active ${G}-item-link`]:{backgroundColor:w.colorBgTextActive},[`&${G}-disabled:hover`]:{[`${G}-item-link`]:{backgroundColor:"transparent"}}},[`${G}-slash`]:{marginInlineEnd:w.paginationSlashMarginInlineEnd,marginInlineStart:w.paginationSlashMarginInlineStart},[`${G}-options`]:{display:"inline-block",marginInlineStart:w.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:w.controlHeight,marginInlineStart:w.marginXS,lineHeight:`${w.controlHeight}px`,verticalAlign:"top",input:Object.assign(Object.assign({},Us(w)),{width:w.controlHeightLG*1.25,height:w.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:w.marginXS,marginInlineEnd:w.marginXS})}}}},Zl=w=>{const{componentCls:G}=w;return{[`${G}-item`]:Object.assign(Object.assign({display:"inline-block",minWidth:w.paginationItemSize,height:w.paginationItemSize,marginInlineEnd:w.marginXS,fontFamily:w.paginationFontFamily,lineHeight:`${w.paginationItemSize-2}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${w.lineWidth}px ${w.lineType} transparent`,borderRadius:w.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${w.paginationItemPaddingInline}px`,color:w.colorText,transition:"none","&:hover":{textDecoration:"none"}},[`&:not(${G}-item-active)`]:{"&:hover":{transition:`all ${w.motionDurationMid}`,backgroundColor:w.colorBgTextHover},"&:active":{backgroundColor:w.colorBgTextActive}}},(0,bs.Qy)(w)),{"&-active":{fontWeight:w.paginationFontWeightActive,backgroundColor:w.paginationItemBgActive,borderColor:w.colorPrimary,a:{color:w.colorPrimary},"&:hover":{borderColor:w.colorPrimaryHover},"&:hover a":{color:w.colorPrimaryHover}}})}},kc=w=>{const{componentCls:G}=w;return{[G]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,bs.Wf)(w)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${G}-total-text`]:{display:"inline-block",height:w.paginationItemSize,marginInlineEnd:w.marginXS,lineHeight:`${w.paginationItemSize-2}px`,verticalAlign:"middle"}}),Zl(w)),Ff(w)),Dc(w)),_f(w)),Af(w)),{[`@media only screen and (max-width: ${w.screenLG}px)`]:{[`${G}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${w.screenSM}px)`]:{[`${G}-options`]:{display:"none"}}}),[`&${w.componentCls}-rtl`]:{direction:"rtl"}}},ad=w=>{const{componentCls:G}=w;return{[`${G}${G}-disabled`]:{"&, &:hover":{[`${G}-item-link`]:{borderColor:w.colorBorder}},"&:focus-visible":{[`${G}-item-link`]:{borderColor:w.colorBorder}},[`${G}-item, ${G}-item-link`]:{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,[`&:hover:not(${G}-item-active)`]:{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,a:{color:w.colorTextDisabled}},[`&${G}-item-active`]:{backgroundColor:w.paginationItemDisabledBgActive}},[`${G}-prev, ${G}-next`]:{"&:hover button":{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder,color:w.colorTextDisabled},[`${G}-item-link`]:{backgroundColor:w.colorBgContainerDisabled,borderColor:w.colorBorder}}},[G]:{[`${G}-prev, ${G}-next`]:{"&:hover button":{borderColor:w.colorPrimaryHover,backgroundColor:w.paginationItemBg},[`${G}-item-link`]:{backgroundColor:w.paginationItemLinkBg,borderColor:w.colorBorder},[`&:hover ${G}-item-link`]:{borderColor:w.colorPrimary,backgroundColor:w.paginationItemBg,color:w.colorPrimary},[`&${G}-disabled`]:{[`${G}-item-link`]:{borderColor:w.colorBorder,color:w.colorTextDisabled}}},[`${G}-item`]:{backgroundColor:w.paginationItemBg,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,[`&:hover:not(${G}-item-active)`]:{borderColor:w.colorPrimary,backgroundColor:w.paginationItemBg,a:{color:w.colorPrimary}},"&-active":{borderColor:w.colorPrimary}}}}};var rh=(0,gl.Z)("Pagination",w=>{const G=(0,Xs.TS)(w,{paginationItemSize:w.controlHeight,paginationFontFamily:w.fontFamily,paginationItemBg:w.colorBgContainer,paginationItemBgActive:w.colorBgContainer,paginationFontWeightActive:w.fontWeightStrong,paginationItemSizeSM:w.controlHeightSM,paginationItemInputBg:w.colorBgContainer,paginationMiniOptionsSizeChangerTop:0,paginationItemDisabledBgActive:w.controlItemBgActiveDisabled,paginationItemDisabledColorActive:w.colorTextDisabled,paginationItemLinkBg:w.colorBgContainer,inputOutlineOffset:"0 0",paginationMiniOptionsMarginInlineStart:w.marginXXS/2,paginationMiniQuickJumperInputWidth:w.controlHeightLG*1.1,paginationItemPaddingInline:w.marginXXS*1.5,paginationEllipsisLetterSpacing:w.marginXXS/2,paginationSlashMarginInlineStart:w.marginXXS,paginationSlashMarginInlineEnd:w.marginSM,paginationEllipsisTextIndent:"0.13em"},yc(w));return[kc(G),w.wireframe&&ad(G)]}),od=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce},Gs=w=>{var{prefixCls:G,selectPrefixCls:Ce,className:ae,rootClassName:et,size:Ie,locale:Ze,selectComponentClass:Fe,responsive:it,showSizeChanger:gt}=w,It=od(w,["prefixCls","selectPrefixCls","className","rootClassName","size","locale","selectComponentClass","responsive","showSizeChanger"]);const{xs:Tt}=Si(it),{getPrefixCls:qt,direction:Ot,pagination:rr={}}=v.useContext(er.E_),Xt=qt("pagination",G),[gr,Sr]=rh(Xt),Wr=gt!=null?gt:rr.showSizeChanger,Cn=()=>{const xn=v.createElement("span",{className:`${Xt}-item-ellipsis`},"\u2022\u2022\u2022");let In=v.createElement("button",{className:`${Xt}-item-link`,type:"button",tabIndex:-1},v.createElement(yt,null)),Rn=v.createElement("button",{className:`${Xt}-item-link`,type:"button",tabIndex:-1},v.createElement(Ue.Z,null)),Gn=v.createElement("a",{className:`${Xt}-item-link`},v.createElement("div",{className:`${Xt}-item-container`},v.createElement(Kn,{className:`${Xt}-item-link-icon`}),xn)),ti=v.createElement("a",{className:`${Xt}-item-link`},v.createElement("div",{className:`${Xt}-item-container`},v.createElement(oa,{className:`${Xt}-item-link-icon`}),xn));return Ot==="rtl"&&([In,Rn]=[Rn,In],[Gn,ti]=[ti,Gn]),{prevIcon:In,nextIcon:Rn,jumpPrevIcon:Gn,jumpNextIcon:ti}};return v.createElement(Ao.Z,{componentName:"Pagination",defaultLocale:Il.Z},xn=>{const In=Object.assign(Object.assign({},xn),Ze),Rn=Ie==="small"||!!(Tt&&!Ie&&it),Gn=qt("select",Ce),ti=Te()({[`${Xt}-mini`]:Rn,[`${Xt}-rtl`]:Ot==="rtl"},ae,et,Sr);return gr(v.createElement(qs,Object.assign({},Cn(),It,{prefixCls:Xt,selectPrefixCls:Gn,className:ti,selectComponentClass:Fe||(Rn?gs:Ws),locale:In,showSizeChanger:Wr})))})},Kl=Gs,dl=m(75081),su=m(75164);function Fc(w,G,Ce,ae){const et=Ce-G;return w/=ae/2,w<1?et/2*w*w*w+G:et/2*((w-=2)*w*w+2)+G}function tc(w){return w!=null&&w===w.window}function Tf(w,G){var Ce,ae;if(typeof window=="undefined")return 0;const et=G?"scrollTop":"scrollLeft";let Ie=0;return tc(w)?Ie=w[G?"pageYOffset":"pageXOffset"]:w instanceof Document?Ie=w.documentElement[et]:(w instanceof HTMLElement||w)&&(Ie=w[et]),w&&!tc(w)&&typeof Ie!="number"&&(Ie=(ae=((Ce=w.ownerDocument)!==null&&Ce!==void 0?Ce:w).documentElement)===null||ae===void 0?void 0:ae[et]),Ie}function _c(w){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{getContainer:Ce=()=>window,callback:ae,duration:et=450}=G,Ie=Ce(),Ze=Tf(Ie,!0),Fe=Date.now(),it=()=>{const It=Date.now()-Fe,Tt=Fc(It>et?et:It,Ze,w,et);tc(Ie)?Ie.scrollTo(window.pageXOffset,Tt):Ie instanceof Document||Ie.constructor.name==="HTMLDocument"?Ie.documentElement.scrollTop=Tt:Ie.scrollTop=Tt,It<et?(0,su.Z)(it):typeof ae=="function"&&ae()};(0,su.Z)(it)}function Hl(w){return function(Ce){let{prefixCls:ae,onExpand:et,record:Ie,expanded:Ze,expandable:Fe}=Ce;const it=`${ae}-row-expand-icon`;return v.createElement("button",{type:"button",onClick:gt=>{et(Ie,gt),gt.stopPropagation()},className:Te()(it,{[`${it}-spaced`]:!Fe,[`${it}-expanded`]:Fe&&Ze,[`${it}-collapsed`]:Fe&&!Ze}),"aria-label":Ze?w.collapse:w.expand,"aria-expanded":Ze})}}var ff=Hl;function xc(w,G){return"key"in w&&w.key!==void 0&&w.key!==null?w.key:w.dataIndex?Array.isArray(w.dataIndex)?w.dataIndex.join("."):w.dataIndex:G}function Yh(w,G){return G?`${G}-${w}`:`${w}`}function Uh(w,G){return typeof w=="function"?w(G):w}function Gc(w,G){const Ce=Uh(w,G);return Object.prototype.toString.call(Ce)==="[object Object]"?"":Ce}var Mf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},nh=Mf,Qn=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:nh}))};Qn.displayName="FilterFilled";var fa=v.forwardRef(Qn),$i=m(18662),$o=m(50132),lo=m(65223),Es=m(51222);const tl=new Es.E4("antCheckboxEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),al=w=>{const{checkboxCls:G}=w,Ce=`${G}-wrapper`;return[{[`${G}-group`]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{display:"inline-flex"}),[Ce]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${Ce}`]:{marginInlineStart:w.marginXS},[`&${Ce}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[G]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{top:"0.2em",position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",[`${G}-input`]:{position:"absolute",inset:0,zIndex:1,width:"100%",height:"100%",cursor:"pointer",opacity:0,[`&:focus-visible + ${G}-inner`]:Object.assign({},(0,bs.oN)(w))},[`${G}-inner`]:{boxSizing:"border-box",position:"relative",top:0,insetInlineStart:0,display:"block",width:w.checkboxSize,height:w.checkboxSize,direction:"ltr",backgroundColor:w.colorBgContainer,border:`${w.lineWidth}px ${w.lineType} ${w.colorBorder}`,borderRadius:w.borderRadiusSM,borderCollapse:"separate",transition:`all ${w.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:w.checkboxSize/14*5,height:w.checkboxSize/14*8,border:`${w.lineWidthBold}px solid ${w.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${w.motionDurationFast} ${w.motionEaseInBack}, opacity ${w.motionDurationFast}`}},"& + span":{paddingInlineStart:w.paddingXS,paddingInlineEnd:w.paddingXS}})},{[G]:{"&-indeterminate":{[`${G}-inner`]:{"&:after":{top:"50%",insetInlineStart:"50%",width:w.fontSizeLG/2,height:w.fontSizeLG/2,backgroundColor:w.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}}}}},{[`${Ce}:hover ${G}:after`]:{visibility:"visible"},[`
        ${Ce}:not(${Ce}-disabled),
        ${G}:not(${G}-disabled)
      `]:{[`&:hover ${G}-inner`]:{borderColor:w.colorPrimary}},[`${Ce}:not(${Ce}-disabled)`]:{[`&:hover ${G}-checked:not(${G}-disabled) ${G}-inner`]:{backgroundColor:w.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${G}-checked:not(${G}-disabled):after`]:{borderColor:w.colorPrimaryHover}}},{[`${G}-checked`]:{[`${G}-inner`]:{backgroundColor:w.colorPrimary,borderColor:w.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${w.motionDurationMid} ${w.motionEaseOutBack} ${w.motionDurationFast}`}},"&:after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderRadius:w.borderRadiusSM,visibility:"hidden",border:`${w.lineWidthBold}px solid ${w.colorPrimary}`,animationName:tl,animationDuration:w.motionDurationSlow,animationTimingFunction:"ease-in-out",animationFillMode:"backwards",content:'""',transition:`all ${w.motionDurationSlow}`}},[`
        ${Ce}-checked:not(${Ce}-disabled),
        ${G}-checked:not(${G}-disabled)
      `]:{[`&:hover ${G}-inner`]:{backgroundColor:w.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${G}:after`]:{borderColor:w.colorPrimaryHover}}},{[`${Ce}-disabled`]:{cursor:"not-allowed"},[`${G}-disabled`]:{[`&, ${G}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${G}-inner`]:{background:w.colorBgContainerDisabled,borderColor:w.colorBorder,"&:after":{borderColor:w.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:w.colorTextDisabled},[`&${G}-indeterminate ${G}-inner::after`]:{background:w.colorTextDisabled}}}]};function Tl(w,G){const Ce=(0,Xs.TS)(G,{checkboxCls:`.${w}`,checkboxSize:G.controlInteractiveSize});return[al(Ce)]}var Lh=(0,gl.Z)("Checkbox",(w,G)=>{let{prefixCls:Ce}=G;return[Tl(Ce,w)]}),xf=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce};const Qh=v.createContext(null),$h=(w,G)=>{var{defaultValue:Ce,children:ae,options:et=[],prefixCls:Ie,className:Ze,rootClassName:Fe,style:it,onChange:gt}=w,It=xf(w,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]);const{getPrefixCls:Tt,direction:qt}=v.useContext(er.E_),[Ot,rr]=v.useState(It.value||Ce||[]),[Xt,gr]=v.useState([]);v.useEffect(()=>{"value"in It&&rr(It.value||[])},[It.value]);const Sr=()=>et.map(D=>typeof D=="string"||typeof D=="number"?{label:D,value:D}:D),Wr=D=>{gr(P=>P.filter(V=>V!==D))},Cn=D=>{gr(P=>[].concat((0,ir.Z)(P),[D]))},xn=D=>{const P=Ot.indexOf(D.value),V=(0,ir.Z)(Ot);P===-1?V.push(D.value):V.splice(P,1),"value"in It||rr(V);const q=Sr();gt==null||gt(V.filter(be=>Xt.includes(be)).sort((be,$e)=>{const _t=q.findIndex(yr=>yr.value===be),Gt=q.findIndex(yr=>yr.value===$e);return _t-Gt}))},In=Tt("checkbox",Ie),Rn=`${In}-group`,[Gn,ti]=Lh(In),ii=(0,hr.Z)(It,["value","disabled"]);et&&et.length>0&&(ae=Sr().map(D=>v.createElement(ao,{prefixCls:In,key:D.value.toString(),disabled:"disabled"in D?D.disabled:It.disabled,value:D.value,checked:Ot.includes(D.value),onChange:D.onChange,className:`${Rn}-item`,style:D.style},D.label)));const b={toggleOption:xn,value:Ot,disabled:It.disabled,name:It.name,registerValue:Cn,cancelValue:Wr},M=Te()(Rn,{[`${Rn}-rtl`]:qt==="rtl"},Ze,Fe,ti);return Gn(v.createElement("div",Object.assign({className:M,style:it},ii,{ref:G}),v.createElement(Qh.Provider,{value:b},ae)))},Ul=v.forwardRef($h);var Rl=v.memo(Ul),ol=m(98866),uu=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce};const Bc=(w,G)=>{var Ce,{prefixCls:ae,className:et,rootClassName:Ie,children:Ze,indeterminate:Fe=!1,style:it,onMouseEnter:gt,onMouseLeave:It,skipGroup:Tt=!1,disabled:qt}=w,Ot=uu(w,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]);const{getPrefixCls:rr,direction:Xt}=v.useContext(er.E_),gr=v.useContext(Qh),{isFormItemInput:Sr}=v.useContext(lo.aM),Wr=v.useContext(ol.Z),Cn=(Ce=(gr==null?void 0:gr.disabled)||qt)!==null&&Ce!==void 0?Ce:Wr,xn=v.useRef(Ot.value);v.useEffect(()=>{gr==null||gr.registerValue(Ot.value)},[]),v.useEffect(()=>{if(!Tt)return Ot.value!==xn.current&&(gr==null||gr.cancelValue(xn.current),gr==null||gr.registerValue(Ot.value),xn.current=Ot.value),()=>gr==null?void 0:gr.cancelValue(Ot.value)},[Ot.value]);const In=rr("checkbox",ae),[Rn,Gn]=Lh(In),ti=Object.assign({},Ot);gr&&!Tt&&(ti.onChange=function(){Ot.onChange&&Ot.onChange.apply(Ot,arguments),gr.toggleOption&&gr.toggleOption({label:Ze,value:Ot.value})},ti.name=gr.name,ti.checked=gr.value.includes(Ot.value));const ii=Te()({[`${In}-wrapper`]:!0,[`${In}-rtl`]:Xt==="rtl",[`${In}-wrapper-checked`]:ti.checked,[`${In}-wrapper-disabled`]:Cn,[`${In}-wrapper-in-form-item`]:Sr},et,Ie,Gn),b=Te()({[`${In}-indeterminate`]:Fe},Gn),M=Fe?"mixed":void 0;return Rn(v.createElement("label",{className:ii,style:it,onMouseEnter:gt,onMouseLeave:It},v.createElement($o.Z,Object.assign({"aria-checked":M},ti,{prefixCls:In,className:b,disabled:Cn,ref:G})),Ze!==void 0&&v.createElement("span",null,Ze)))};var ao=v.forwardRef(Bc);const Ml=ao;Ml.Group=Rl,Ml.__ANT_CHECKBOX=!0;var Hf=Ml,fl=m(23672),Vl=m(32983),Ll=m(82610),jh=m(76529),Qa=m(33573),Yl=m(97326),Vf=m(15105),ih=v.createContext(null),Vu=function(G){for(var Ce=G.prefixCls,ae=G.level,et=G.isStart,Ie=G.isEnd,Ze="".concat(Ce,"-indent-unit"),Fe=[],it=0;it<ae;it+=1){var gt;Fe.push(v.createElement("span",{key:it,className:Te()(Ze,(gt={},(0,me.Z)(gt,"".concat(Ze,"-start"),et[it]),(0,me.Z)(gt,"".concat(Ze,"-end"),Ie[it]),gt))}))}return v.createElement("span",{"aria-hidden":"true",className:"".concat(Ce,"-indent")},Fe)},hf=v.memo(Vu),Hh=["children"];function bc(w,G){return w!=null?w:G}function Ec(w){var G=w||{},Ce=G.title,ae=G._title,et=G.key,Ie=G.children,Ze=Ce||"title";return{title:Ze,_title:ae||[Ze],key:et||"key",children:Ie||"children"}}function ah(w,G){var Ce=new Map;function ae(et){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(et||[]).forEach(function(Ze){var Fe=Ze[G.key],it=Ze[G.children];warning(Fe!=null,"Tree node must have a certain key: [".concat(Ie).concat(Fe,"]"));var gt=String(Fe);warning(!Ce.has(gt)||Fe===null||Fe===void 0,"Same 'key' exist in the Tree: ".concat(gt)),Ce.set(gt,!0),ae(it,"".concat(Ie).concat(gt," > "))})}ae(w)}function Wc(w){function G(Ce){var ae=(0,Dn.Z)(Ce);return ae.map(function(et){if(!ql(et))return(0,Ne.ZP)(!et,"Tree/TreeNode can only accept TreeNode as children."),null;var Ie=et.key,Ze=et.props,Fe=Ze.children,it=(0,Ut.Z)(Ze,Hh),gt=(0,qe.Z)({key:Ie},it),It=G(Fe);return It.length&&(gt.children=It),gt}).filter(function(et){return et})}return G(w)}function Dh(w,G,Ce){var ae=Ec(Ce),et=ae._title,Ie=ae.key,Ze=ae.children,Fe=new Set(G===!0?[]:G),it=[];function gt(It){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return It.map(function(qt,Ot){for(var rr=nu(Tt?Tt.pos:"0",Ot),Xt=bc(qt[Ie],rr),gr,Sr=0;Sr<et.length;Sr+=1){var Wr=et[Sr];if(qt[Wr]!==void 0){gr=qt[Wr];break}}var Cn=(0,qe.Z)((0,qe.Z)({},(0,hr.Z)(qt,[].concat((0,ir.Z)(et),[Ie,Ze]))),{},{title:gr,key:Xt,parent:Tt,pos:rr,children:null,data:qt,isStart:[].concat((0,ir.Z)(Tt?Tt.isStart:[]),[Ot===0]),isEnd:[].concat((0,ir.Z)(Tt?Tt.isEnd:[]),[Ot===It.length-1])});return it.push(Cn),G===!0||Fe.has(Xt)?Cn.children=gt(qt[Ze]||[],Cn):Cn.children=[],Cn})}return gt(w),it}function Sc(w,G,Ce){var ae={};(0,se.Z)(Ce)==="object"?ae=Ce:ae={externalGetKey:Ce},ae=ae||{};var et=ae,Ie=et.childrenPropName,Ze=et.externalGetKey,Fe=et.fieldNames,it=Ec(Fe),gt=it.key,It=it.children,Tt=Ie||It,qt;Ze?typeof Ze=="string"?qt=function(Xt){return Xt[Ze]}:typeof Ze=="function"&&(qt=function(Xt){return Ze(Xt)}):qt=function(Xt,gr){return bc(Xt[gt],gr)};function Ot(rr,Xt,gr,Sr){var Wr=rr?rr[Tt]:w,Cn=rr?nu(gr.pos,Xt):"0",xn=rr?[].concat((0,ir.Z)(Sr),[rr]):[];if(rr){var In=qt(rr,Cn),Rn={node:rr,index:Xt,pos:Cn,key:In,parentPos:gr.node?gr.pos:null,level:gr.level+1,nodes:xn};G(Rn)}Wr&&Wr.forEach(function(Gn,ti){Ot(Gn,ti,{node:rr,pos:Cn,level:gr?gr.level+1:-1},xn)})}Ot(null)}function Vh(w){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=G.initWrapper,ae=G.processEntity,et=G.onProcessFinished,Ie=G.externalGetKey,Ze=G.childrenPropName,Fe=G.fieldNames,it=arguments.length>2?arguments[2]:void 0,gt=Ie||it,It={},Tt={},qt={posEntities:It,keyEntities:Tt};return Ce&&(qt=Ce(qt)||qt),Sc(w,function(Ot){var rr=Ot.node,Xt=Ot.index,gr=Ot.pos,Sr=Ot.key,Wr=Ot.parentPos,Cn=Ot.level,xn=Ot.nodes,In={node:rr,nodes:xn,index:Xt,key:Sr,pos:gr,level:Cn},Rn=bc(Sr,gr);It[gr]=In,Tt[Rn]=In,In.parent=It[Wr],In.parent&&(In.parent.children=In.parent.children||[],In.parent.children.push(In)),ae&&ae(In,qt)},{externalGetKey:gt,childrenPropName:Ze,fieldNames:Fe}),et&&et(qt),qt}function Ql(w,G){var Ce=G.expandedKeys,ae=G.selectedKeys,et=G.loadedKeys,Ie=G.loadingKeys,Ze=G.checkedKeys,Fe=G.halfCheckedKeys,it=G.dragOverNodeKey,gt=G.dropPosition,It=G.keyEntities,Tt=It[w],qt={eventKey:w,expanded:Ce.indexOf(w)!==-1,selected:ae.indexOf(w)!==-1,loaded:et.indexOf(w)!==-1,loading:Ie.indexOf(w)!==-1,checked:Ze.indexOf(w)!==-1,halfChecked:Fe.indexOf(w)!==-1,pos:String(Tt?Tt.pos:""),dragOver:it===w&&gt===0,dragOverGapTop:it===w&&gt===-1,dragOverGapBottom:it===w&&gt===1};return qt}function gu(w){var G=w.data,Ce=w.expanded,ae=w.selected,et=w.checked,Ie=w.loaded,Ze=w.loading,Fe=w.halfChecked,it=w.dragOver,gt=w.dragOverGapTop,It=w.dragOverGapBottom,Tt=w.pos,qt=w.active,Ot=w.eventKey,rr=(0,qe.Z)((0,qe.Z)({},G),{},{expanded:Ce,selected:ae,checked:et,loaded:Ie,loading:Ze,halfChecked:Fe,dragOver:it,dragOverGapTop:gt,dragOverGapBottom:It,pos:Tt,active:qt,key:Ot});return"props"in rr||Object.defineProperty(rr,"props",{get:function(){return(0,Ne.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),w}}),rr}var Ks=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Gf="open",Bf="close",eu="---",Pl=function(w){(0,qr.Z)(Ce,w);var G=(0,kn.Z)(Ce);function Ce(){var ae;(0,nr.Z)(this,Ce);for(var et=arguments.length,Ie=new Array(et),Ze=0;Ze<et;Ze++)Ie[Ze]=arguments[Ze];return ae=G.call.apply(G,[this].concat(Ie)),ae.state={dragNodeHighlight:!1},ae.selectHandle=void 0,ae.onSelectorClick=function(Fe){var it=ae.props.context.onNodeClick;it(Fe,gu(ae.props)),ae.isSelectable()?ae.onSelect(Fe):ae.onCheck(Fe)},ae.onSelectorDoubleClick=function(Fe){var it=ae.props.context.onNodeDoubleClick;it(Fe,gu(ae.props))},ae.onSelect=function(Fe){if(!ae.isDisabled()){var it=ae.props.context.onNodeSelect;Fe.preventDefault(),it(Fe,gu(ae.props))}},ae.onCheck=function(Fe){if(!ae.isDisabled()){var it=ae.props,gt=it.disableCheckbox,It=it.checked,Tt=ae.props.context.onNodeCheck;if(!(!ae.isCheckable()||gt)){Fe.preventDefault();var qt=!It;Tt(Fe,gu(ae.props),qt)}}},ae.onMouseEnter=function(Fe){var it=ae.props.context.onNodeMouseEnter;it(Fe,gu(ae.props))},ae.onMouseLeave=function(Fe){var it=ae.props.context.onNodeMouseLeave;it(Fe,gu(ae.props))},ae.onContextMenu=function(Fe){var it=ae.props.context.onNodeContextMenu;it(Fe,gu(ae.props))},ae.onDragStart=function(Fe){var it=ae.props.context.onNodeDragStart;Fe.stopPropagation(),ae.setState({dragNodeHighlight:!0}),it(Fe,(0,Yl.Z)(ae));try{Fe.dataTransfer.setData("text/plain","")}catch(gt){}},ae.onDragEnter=function(Fe){var it=ae.props.context.onNodeDragEnter;Fe.preventDefault(),Fe.stopPropagation(),it(Fe,(0,Yl.Z)(ae))},ae.onDragOver=function(Fe){var it=ae.props.context.onNodeDragOver;Fe.preventDefault(),Fe.stopPropagation(),it(Fe,(0,Yl.Z)(ae))},ae.onDragLeave=function(Fe){var it=ae.props.context.onNodeDragLeave;Fe.stopPropagation(),it(Fe,(0,Yl.Z)(ae))},ae.onDragEnd=function(Fe){var it=ae.props.context.onNodeDragEnd;Fe.stopPropagation(),ae.setState({dragNodeHighlight:!1}),it(Fe,(0,Yl.Z)(ae))},ae.onDrop=function(Fe){var it=ae.props.context.onNodeDrop;Fe.preventDefault(),Fe.stopPropagation(),ae.setState({dragNodeHighlight:!1}),it(Fe,(0,Yl.Z)(ae))},ae.onExpand=function(Fe){var it=ae.props,gt=it.loading,It=it.context.onNodeExpand;gt||It(Fe,gu(ae.props))},ae.setSelectHandle=function(Fe){ae.selectHandle=Fe},ae.getNodeState=function(){var Fe=ae.props.expanded;return ae.isLeaf()?null:Fe?Gf:Bf},ae.hasChildren=function(){var Fe=ae.props.eventKey,it=ae.props.context.keyEntities,gt=it[Fe]||{},It=gt.children;return!!(It||[]).length},ae.isLeaf=function(){var Fe=ae.props,it=Fe.isLeaf,gt=Fe.loaded,It=ae.props.context.loadData,Tt=ae.hasChildren();return it===!1?!1:it||!It&&!Tt||It&&gt&&!Tt},ae.isDisabled=function(){var Fe=ae.props.disabled,it=ae.props.context.disabled;return!!(it||Fe)},ae.isCheckable=function(){var Fe=ae.props.checkable,it=ae.props.context.checkable;return!it||Fe===!1?!1:it},ae.syncLoadData=function(Fe){var it=Fe.expanded,gt=Fe.loading,It=Fe.loaded,Tt=ae.props.context,qt=Tt.loadData,Ot=Tt.onNodeLoad;gt||qt&&it&&!ae.isLeaf()&&!ae.hasChildren()&&!It&&Ot(gu(ae.props))},ae.isDraggable=function(){var Fe=ae.props,it=Fe.data,gt=Fe.context.draggable;return!!(gt&&(!gt.nodeDraggable||gt.nodeDraggable(it)))},ae.renderDragHandler=function(){var Fe=ae.props.context,it=Fe.draggable,gt=Fe.prefixCls;return it!=null&&it.icon?v.createElement("span",{className:"".concat(gt,"-draggable-icon")},it.icon):null},ae.renderSwitcherIconDom=function(Fe){var it=ae.props.switcherIcon,gt=ae.props.context.switcherIcon,It=it||gt;return typeof It=="function"?It((0,qe.Z)((0,qe.Z)({},ae.props),{},{isLeaf:Fe})):It},ae.renderSwitcher=function(){var Fe=ae.props.expanded,it=ae.props.context.prefixCls;if(ae.isLeaf()){var gt=ae.renderSwitcherIconDom(!0);return gt!==!1?v.createElement("span",{className:Te()("".concat(it,"-switcher"),"".concat(it,"-switcher-noop"))},gt):null}var It=Te()("".concat(it,"-switcher"),"".concat(it,"-switcher_").concat(Fe?Gf:Bf)),Tt=ae.renderSwitcherIconDom(!1);return Tt!==!1?v.createElement("span",{onClick:ae.onExpand,className:It},Tt):null},ae.renderCheckbox=function(){var Fe=ae.props,it=Fe.checked,gt=Fe.halfChecked,It=Fe.disableCheckbox,Tt=ae.props.context.prefixCls,qt=ae.isDisabled(),Ot=ae.isCheckable();if(!Ot)return null;var rr=typeof Ot!="boolean"?Ot:null;return v.createElement("span",{className:Te()("".concat(Tt,"-checkbox"),it&&"".concat(Tt,"-checkbox-checked"),!it&&gt&&"".concat(Tt,"-checkbox-indeterminate"),(qt||It)&&"".concat(Tt,"-checkbox-disabled")),onClick:ae.onCheck},rr)},ae.renderIcon=function(){var Fe=ae.props.loading,it=ae.props.context.prefixCls;return v.createElement("span",{className:Te()("".concat(it,"-iconEle"),"".concat(it,"-icon__").concat(ae.getNodeState()||"docu"),Fe&&"".concat(it,"-icon_loading"))})},ae.renderSelector=function(){var Fe=ae.state.dragNodeHighlight,it=ae.props,gt=it.title,It=it.selected,Tt=it.icon,qt=it.loading,Ot=it.data,rr=ae.props.context,Xt=rr.prefixCls,gr=rr.showIcon,Sr=rr.icon,Wr=rr.loadData,Cn=rr.titleRender,xn=ae.isDisabled(),In="".concat(Xt,"-node-content-wrapper"),Rn;if(gr){var Gn=Tt||Sr;Rn=Gn?v.createElement("span",{className:Te()("".concat(Xt,"-iconEle"),"".concat(Xt,"-icon__customize"))},typeof Gn=="function"?Gn(ae.props):Gn):ae.renderIcon()}else Wr&&qt&&(Rn=ae.renderIcon());var ti;typeof gt=="function"?ti=gt(Ot):Cn?ti=Cn(Ot):ti=gt;var ii=v.createElement("span",{className:"".concat(Xt,"-title")},ti);return v.createElement("span",{ref:ae.setSelectHandle,title:typeof gt=="string"?gt:"",className:Te()("".concat(In),"".concat(In,"-").concat(ae.getNodeState()||"normal"),!xn&&(It||Fe)&&"".concat(Xt,"-node-selected")),onMouseEnter:ae.onMouseEnter,onMouseLeave:ae.onMouseLeave,onContextMenu:ae.onContextMenu,onClick:ae.onSelectorClick,onDoubleClick:ae.onSelectorDoubleClick},Rn,ii,ae.renderDropIndicator())},ae.renderDropIndicator=function(){var Fe=ae.props,it=Fe.disabled,gt=Fe.eventKey,It=ae.props.context,Tt=It.draggable,qt=It.dropLevelOffset,Ot=It.dropPosition,rr=It.prefixCls,Xt=It.indent,gr=It.dropIndicatorRender,Sr=It.dragOverNodeKey,Wr=It.direction,Cn=!!Tt,xn=!it&&Cn&&Sr===gt;return xn?gr({dropPosition:Ot,dropLevelOffset:qt,indent:Xt,prefixCls:rr,direction:Wr}):null},ae}return(0,Mr.Z)(Ce,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var et=this.props.selectable,Ie=this.props.context.selectable;return typeof et=="boolean"?et:Ie}},{key:"render",value:function(){var et,Ie=this.props,Ze=Ie.eventKey,Fe=Ie.className,it=Ie.style,gt=Ie.dragOver,It=Ie.dragOverGapTop,Tt=Ie.dragOverGapBottom,qt=Ie.isLeaf,Ot=Ie.isStart,rr=Ie.isEnd,Xt=Ie.expanded,gr=Ie.selected,Sr=Ie.checked,Wr=Ie.halfChecked,Cn=Ie.loading,xn=Ie.domRef,In=Ie.active,Rn=Ie.data,Gn=Ie.onMouseMove,ti=Ie.selectable,ii=(0,Ut.Z)(Ie,Ks),b=this.props.context,M=b.prefixCls,D=b.filterTreeNode,P=b.keyEntities,V=b.dropContainerKey,q=b.dropTargetKey,be=b.draggingNodeKey,$e=this.isDisabled(),_t=(0,Qt.Z)(ii,{aria:!0,data:!0}),Gt=P[Ze]||{},yr=Gt.level,$r=rr[rr.length-1],an=this.isDraggable(),Un=!$e&&an,ei=be===Ze,Jn=ti!==void 0?{"aria-selected":!!ti}:void 0;return v.createElement("div",(0,F.Z)({ref:xn,className:Te()(Fe,"".concat(M,"-treenode"),(et={},(0,me.Z)(et,"".concat(M,"-treenode-disabled"),$e),(0,me.Z)(et,"".concat(M,"-treenode-switcher-").concat(Xt?"open":"close"),!qt),(0,me.Z)(et,"".concat(M,"-treenode-checkbox-checked"),Sr),(0,me.Z)(et,"".concat(M,"-treenode-checkbox-indeterminate"),Wr),(0,me.Z)(et,"".concat(M,"-treenode-selected"),gr),(0,me.Z)(et,"".concat(M,"-treenode-loading"),Cn),(0,me.Z)(et,"".concat(M,"-treenode-active"),In),(0,me.Z)(et,"".concat(M,"-treenode-leaf-last"),$r),(0,me.Z)(et,"".concat(M,"-treenode-draggable"),an),(0,me.Z)(et,"dragging",ei),(0,me.Z)(et,"drop-target",q===Ze),(0,me.Z)(et,"drop-container",V===Ze),(0,me.Z)(et,"drag-over",!$e&&gt),(0,me.Z)(et,"drag-over-gap-top",!$e&&It),(0,me.Z)(et,"drag-over-gap-bottom",!$e&&Tt),(0,me.Z)(et,"filter-node",D&&D(gu(this.props))),et)),style:it,draggable:Un,"aria-grabbed":ei,onDragStart:Un?this.onDragStart:void 0,onDragEnter:an?this.onDragEnter:void 0,onDragOver:an?this.onDragOver:void 0,onDragLeave:an?this.onDragLeave:void 0,onDrop:an?this.onDrop:void 0,onDragEnd:an?this.onDragEnd:void 0,onMouseMove:Gn},Jn,_t),v.createElement(hf,{prefixCls:M,level:yr,isStart:Ot,isEnd:rr}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),Ce}(v.Component),Xc=function(G){return v.createElement(ih.Consumer,null,function(Ce){return v.createElement(Pl,(0,F.Z)({},G,{context:Ce}))})};Xc.displayName="TreeNode",Xc.defaultProps={title:eu},Xc.isTreeNode=1;var Nc=Xc,Jl=null;function fc(w,G){if(!w)return[];var Ce=w.slice(),ae=Ce.indexOf(G);return ae>=0&&Ce.splice(ae,1),Ce}function oo(w,G){var Ce=(w||[]).slice();return Ce.indexOf(G)===-1&&Ce.push(G),Ce}function ko(w){return w.split("-")}function nu(w,G){return"".concat(w,"-").concat(G)}function ql(w){return w&&w.type&&w.type.isTreeNode}function xl(w,G){var Ce=[],ae=G[w];function et(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Ie.forEach(function(Ze){var Fe=Ze.key,it=Ze.children;Ce.push(Fe),et(it)})}return et(ae.children),Ce}function mu(w){if(w.parent){var G=ko(w.pos);return Number(G[G.length-1])===w.parent.children.length-1}return!1}function Ku(w){var G=ko(w.pos);return Number(G[G.length-1])===0}function Kc(w,G,Ce,ae,et,Ie,Ze,Fe,it,gt){var It,Tt=w.clientX,qt=w.clientY,Ot=w.target.getBoundingClientRect(),rr=Ot.top,Xt=Ot.height,gr=(gt==="rtl"?-1:1)*(((et==null?void 0:et.x)||0)-Tt),Sr=(gr-12)/ae,Wr=Fe[Ce.props.eventKey];if(qt<rr+Xt/2){var Cn=Ze.findIndex(function(q){return q.key===Wr.key}),xn=Cn<=0?0:Cn-1,In=Ze[xn].key;Wr=Fe[In]}var Rn=Wr.key,Gn=Wr,ti=Wr.key,ii=0,b=0;if(!it.includes(Rn))for(var M=0;M<Sr&&mu(Wr);M+=1)Wr=Wr.parent,b+=1;var D=G.props.data,P=Wr.node,V=!0;return Ku(Wr)&&Wr.level===0&&qt<rr+Xt/2&&Ie({dragNode:D,dropNode:P,dropPosition:-1})&&Wr.key===Ce.props.eventKey?ii=-1:(Gn.children||[]).length&&it.includes(ti)?Ie({dragNode:D,dropNode:P,dropPosition:0})?ii=0:V=!1:b===0?Sr>-1.5?Ie({dragNode:D,dropNode:P,dropPosition:1})?ii=1:V=!1:Ie({dragNode:D,dropNode:P,dropPosition:0})?ii=0:Ie({dragNode:D,dropNode:P,dropPosition:1})?ii=1:V=!1:Ie({dragNode:D,dropNode:P,dropPosition:1})?ii=1:V=!1,{dropPosition:ii,dropLevelOffset:b,dropTargetKey:Wr.key,dropTargetPos:Wr.pos,dragOverNodeKey:ti,dropContainerKey:ii===0?null:((It=Wr.parent)===null||It===void 0?void 0:It.key)||null,dropAllowed:V}}function Gh(w,G){if(w){var Ce=G.multiple;return Ce?w.slice():w.length?[w[0]]:w}}var Yu=function(G){return G};function bl(w,G){if(!w)return[];var Ce=G||{},ae=Ce.processProps,et=ae===void 0?Yu:ae,Ie=Array.isArray(w)?w:[w];return Ie.map(function(Ze){var Fe=Ze.children,it=_objectWithoutProperties(Ze,Jl),gt=bl(Fe,G);return React.createElement(TreeNode,_extends({key:it.key},et(it)),gt)})}function yd(w){if(!w)return null;var G;if(Array.isArray(w))G={checkedKeys:w,halfCheckedKeys:void 0};else if((0,se.Z)(w)==="object")G={checkedKeys:w.checked||void 0,halfCheckedKeys:w.halfChecked||void 0};else return(0,Ne.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return G}function ph(w,G){var Ce=new Set;function ae(et){if(!Ce.has(et)){var Ie=G[et];if(Ie){Ce.add(et);var Ze=Ie.parent,Fe=Ie.node;Fe.disabled||Ze&&ae(Ze.key)}}}return(w||[]).forEach(function(et){ae(et)}),(0,ir.Z)(Ce)}function Cc(w){if(w==null)throw new TypeError("Cannot destructure "+w)}var Yc=m(73453),Dl=m(62874),Ur=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],kl=function(G,Ce){var ae=G.className,et=G.style,Ie=G.motion,Ze=G.motionNodes,Fe=G.motionType,it=G.onMotionStart,gt=G.onMotionEnd,It=G.active,Tt=G.treeNodeRequiredProps,qt=(0,Ut.Z)(G,Ur),Ot=v.useState(!0),rr=(0,l.Z)(Ot,2),Xt=rr[0],gr=rr[1],Sr=v.useContext(ih),Wr=Sr.prefixCls,Cn=v.useRef(!1),xn=function(){Cn.current||gt(),Cn.current=!0};return(0,v.useEffect)(function(){Ze&&Fe==="hide"&&Xt&&gr(!1)},[Ze]),(0,v.useEffect)(function(){return Ze&&it(),function(){Ze&&xn()}},[]),Ze?v.createElement(Dl.Z,(0,F.Z)({ref:Ce,visible:Xt},Ie,{motionAppear:Fe==="show",onAppearEnd:xn,onLeaveEnd:xn}),function(In,Rn){var Gn=In.className,ti=In.style;return v.createElement("div",{ref:Rn,className:Te()("".concat(Wr,"-treenode-motion"),Gn),style:ti},Ze.map(function(ii){var b=(0,F.Z)({},(Cc(ii.data),ii.data)),M=ii.title,D=ii.key,P=ii.isStart,V=ii.isEnd;delete b.children;var q=Ql(D,Tt);return v.createElement(Nc,(0,F.Z)({},b,q,{title:M,active:It,data:ii.data,key:D,isStart:P,isEnd:V}))}))}):v.createElement(Nc,(0,F.Z)({domRef:Ce,className:ae,style:et},qt,{active:It}))};kl.displayName="MotionTreeNode";var Vo=v.forwardRef(kl),Qo=Vo;function du(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ce=w.length,ae=G.length;if(Math.abs(Ce-ae)!==1)return{add:!1,key:null};function et(Ie,Ze){var Fe=new Map;Ie.forEach(function(gt){Fe.set(gt,!0)});var it=Ze.filter(function(gt){return!Fe.has(gt)});return it.length===1?it[0]:null}return Ce<ae?{add:!0,key:et(w,G)}:{add:!1,key:et(G,w)}}function kh(w,G,Ce){var ae=w.findIndex(function(Fe){return Fe.key===Ce}),et=w[ae+1],Ie=G.findIndex(function(Fe){return Fe.key===Ce});if(et){var Ze=G.findIndex(function(Fe){return Fe.key===et.key});return G.slice(Ie+1,Ze)}return G.slice(Ie+1)}var Wf=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],zc={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},df=function(){},rc="RC_TREE_MOTION_".concat(Math.random()),ys={key:rc},bf={key:rc,level:0,index:0,pos:"0",node:ys,nodes:[ys]},Xf={parent:null,children:[],pos:bf.pos,data:ys,title:null,key:rc,isStart:[],isEnd:[]};function rl(w,G,Ce,ae){return G===!1||!Ce?w:w.slice(0,Math.ceil(Ce/ae)+1)}function wc(w){var G=w.key,Ce=w.pos;return bc(G,Ce)}function Zc(w){for(var G=String(w.data.key),Ce=w;Ce.parent;)Ce=Ce.parent,G="".concat(Ce.data.key," > ").concat(G);return G}var sd=v.forwardRef(function(w,G){var Ce=w.prefixCls,ae=w.data,et=w.selectable,Ie=w.checkable,Ze=w.expandedKeys,Fe=w.selectedKeys,it=w.checkedKeys,gt=w.loadedKeys,It=w.loadingKeys,Tt=w.halfCheckedKeys,qt=w.keyEntities,Ot=w.disabled,rr=w.dragging,Xt=w.dragOverNodeKey,gr=w.dropPosition,Sr=w.motion,Wr=w.height,Cn=w.itemHeight,xn=w.virtual,In=w.focusable,Rn=w.activeItem,Gn=w.focused,ti=w.tabIndex,ii=w.onKeyDown,b=w.onFocus,M=w.onBlur,D=w.onActiveChange,P=w.onListChangeStart,V=w.onListChangeEnd,q=(0,Ut.Z)(w,Wf),be=v.useRef(null),$e=v.useRef(null);v.useImperativeHandle(G,function(){return{scrollTo:function(y){be.current.scrollTo(y)},getIndentWidth:function(){return $e.current.offsetWidth}}});var _t=v.useState(Ze),Gt=(0,l.Z)(_t,2),yr=Gt[0],$r=Gt[1],an=v.useState(ae),Un=(0,l.Z)(an,2),ei=Un[0],Jn=Un[1],Sn=v.useState(ae),Xn=(0,l.Z)(Sn,2),ai=Xn[0],ln=Xn[1],pi=v.useState([]),gi=(0,l.Z)(pi,2),Li=gi[0],Ki=gi[1],ua=v.useState(null),la=(0,l.Z)(ua,2),Lo=la[0],Fa=la[1],go=v.useRef(ae);go.current=ae;function Qs(){var c=go.current;Jn(c),ln(c),Ki([]),Fa(null),V()}v.useEffect(function(){$r(Ze);var c=du(yr,Ze);if(c.key!==null)if(c.add){var y=ei.findIndex(function(Rt){var Ft=Rt.key;return Ft===c.key}),I=rl(kh(ei,ae,c.key),xn,Wr,Cn),H=ei.slice();H.splice(y+1,0,Xf),ln(H),Ki(I),Fa("show")}else{var Q=ae.findIndex(function(Rt){var Ft=Rt.key;return Ft===c.key}),ge=rl(kh(ae,ei,c.key),xn,Wr,Cn),tt=ae.slice();tt.splice(Q+1,0,Xf),ln(tt),Ki(ge),Fa("hide")}else ei!==ae&&(Jn(ae),ln(ae))},[Ze,ae]),v.useEffect(function(){rr||Qs()},[rr]);var e=Sr?ai:ae,i={expandedKeys:Ze,selectedKeys:Fe,loadedKeys:gt,loadingKeys:It,checkedKeys:it,halfCheckedKeys:Tt,dragOverNodeKey:Xt,dropPosition:gr,keyEntities:qt};return v.createElement(v.Fragment,null,Gn&&Rn&&v.createElement("span",{style:zc,"aria-live":"assertive"},Zc(Rn)),v.createElement("div",null,v.createElement("input",{style:zc,disabled:In===!1||Ot,tabIndex:In!==!1?ti:null,onKeyDown:ii,onFocus:b,onBlur:M,value:"",onChange:df,"aria-label":"for screen reader"})),v.createElement("div",{className:"".concat(Ce,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},v.createElement("div",{className:"".concat(Ce,"-indent")},v.createElement("div",{ref:$e,className:"".concat(Ce,"-indent-unit")}))),v.createElement(Yc.Z,(0,F.Z)({},q,{data:e,itemKey:wc,height:Wr,fullHeight:!1,virtual:xn,itemHeight:Cn,prefixCls:"".concat(Ce,"-list"),ref:be,onVisibleChange:function(y,I){var H=new Set(y),Q=I.filter(function(ge){return!H.has(ge)});Q.some(function(ge){return wc(ge)===rc})&&Qs()}}),function(c){var y=c.pos,I=(0,F.Z)({},(Cc(c.data),c.data)),H=c.title,Q=c.key,ge=c.isStart,tt=c.isEnd,Rt=bc(Q,y);delete I.key,delete I.children;var Ft=Ql(Rt,i);return v.createElement(Qo,(0,F.Z)({},I,Ft,{title:H,active:!!Rn&&Q===Rn.key,pos:y,data:c.data,isStart:ge,isEnd:tt,motion:Sr,motionNodes:Q===rc?Li:null,motionType:Lo,onMotionStart:P,onMotionEnd:Qs,treeNodeRequiredProps:i,onMouseMove:function(){D(null)}}))}))});sd.displayName="NodeList";var Qc=sd;function f(w,G){var Ce=new Set;return w.forEach(function(ae){G.has(ae)||Ce.add(ae)}),Ce}function g(w){var G=w||{},Ce=G.disabled,ae=G.disableCheckbox,et=G.checkable;return!!(Ce||ae)||et===!1}function p(w,G,Ce,ae){for(var et=new Set(w),Ie=new Set,Ze=0;Ze<=Ce;Ze+=1){var Fe=G.get(Ze)||new Set;Fe.forEach(function(Tt){var qt=Tt.key,Ot=Tt.node,rr=Tt.children,Xt=rr===void 0?[]:rr;et.has(qt)&&!ae(Ot)&&Xt.filter(function(gr){return!ae(gr.node)}).forEach(function(gr){et.add(gr.key)})})}for(var it=new Set,gt=Ce;gt>=0;gt-=1){var It=G.get(gt)||new Set;It.forEach(function(Tt){var qt=Tt.parent,Ot=Tt.node;if(!(ae(Ot)||!Tt.parent||it.has(Tt.parent.key))){if(ae(Tt.parent.node)){it.add(qt.key);return}var rr=!0,Xt=!1;(qt.children||[]).filter(function(gr){return!ae(gr.node)}).forEach(function(gr){var Sr=gr.key,Wr=et.has(Sr);rr&&!Wr&&(rr=!1),!Xt&&(Wr||Ie.has(Sr))&&(Xt=!0)}),rr&&et.add(qt.key),Xt&&Ie.add(qt.key),it.add(qt.key)}})}return{checkedKeys:Array.from(et),halfCheckedKeys:Array.from(f(Ie,et))}}function E(w,G,Ce,ae,et){for(var Ie=new Set(w),Ze=new Set(G),Fe=0;Fe<=ae;Fe+=1){var it=Ce.get(Fe)||new Set;it.forEach(function(qt){var Ot=qt.key,rr=qt.node,Xt=qt.children,gr=Xt===void 0?[]:Xt;!Ie.has(Ot)&&!Ze.has(Ot)&&!et(rr)&&gr.filter(function(Sr){return!et(Sr.node)}).forEach(function(Sr){Ie.delete(Sr.key)})})}Ze=new Set;for(var gt=new Set,It=ae;It>=0;It-=1){var Tt=Ce.get(It)||new Set;Tt.forEach(function(qt){var Ot=qt.parent,rr=qt.node;if(!(et(rr)||!qt.parent||gt.has(qt.parent.key))){if(et(qt.parent.node)){gt.add(Ot.key);return}var Xt=!0,gr=!1;(Ot.children||[]).filter(function(Sr){return!et(Sr.node)}).forEach(function(Sr){var Wr=Sr.key,Cn=Ie.has(Wr);Xt&&!Cn&&(Xt=!1),!gr&&(Cn||Ze.has(Wr))&&(gr=!0)}),Xt||Ie.delete(Ot.key),gr&&Ze.add(Ot.key),gt.add(Ot.key)}})}return{checkedKeys:Array.from(Ie),halfCheckedKeys:Array.from(f(Ze,Ie))}}function Y(w,G,Ce,ae){var et=[],Ie;ae?Ie=ae:Ie=g;var Ze=new Set(w.filter(function(It){var Tt=!!Ce[It];return Tt||et.push(It),Tt})),Fe=new Map,it=0;Object.keys(Ce).forEach(function(It){var Tt=Ce[It],qt=Tt.level,Ot=Fe.get(qt);Ot||(Ot=new Set,Fe.set(qt,Ot)),Ot.add(Tt),it=Math.max(it,qt)}),(0,Ne.ZP)(!et.length,"Tree missing follow keys: ".concat(et.slice(0,100).map(function(It){return"'".concat(It,"'")}).join(", ")));var gt;return G===!0?gt=p(Ze,Fe,it,Ie):gt=E(Ze,G.halfCheckedKeys,Fe,it,Ie),gt}function ye(w){var G=w.dropPosition,Ce=w.dropLevelOffset,ae=w.indent,et={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(G){case-1:et.top=0,et.left=-Ce*ae;break;case 1:et.bottom=0,et.left=-Ce*ae;break;case 0:et.bottom=0,et.left=ae;break}return v.createElement("div",{style:et})}var Pe=10,ct=function(w){(0,qr.Z)(Ce,w);var G=(0,kn.Z)(Ce);function Ce(){var ae;(0,nr.Z)(this,Ce);for(var et=arguments.length,Ie=new Array(et),Ze=0;Ze<et;Ze++)Ie[Ze]=arguments[Ze];return ae=G.call.apply(G,[this].concat(Ie)),ae.destroyed=!1,ae.delayedDragEnterLogic=void 0,ae.loadingRetryTimes={},ae.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ec()},ae.dragStartMousePosition=null,ae.dragNode=void 0,ae.currentMouseOverDroppableNodeKey=null,ae.listRef=v.createRef(),ae.onNodeDragStart=function(Fe,it){var gt=ae.state,It=gt.expandedKeys,Tt=gt.keyEntities,qt=ae.props.onDragStart,Ot=it.props.eventKey;ae.dragNode=it,ae.dragStartMousePosition={x:Fe.clientX,y:Fe.clientY};var rr=fc(It,Ot);ae.setState({draggingNodeKey:Ot,dragChildrenKeys:xl(Ot,Tt),indent:ae.listRef.current.getIndentWidth()}),ae.setExpandedKeys(rr),window.addEventListener("dragend",ae.onWindowDragEnd),qt==null||qt({event:Fe,node:gu(it.props)})},ae.onNodeDragEnter=function(Fe,it){var gt=ae.state,It=gt.expandedKeys,Tt=gt.keyEntities,qt=gt.dragChildrenKeys,Ot=gt.flattenNodes,rr=gt.indent,Xt=ae.props,gr=Xt.onDragEnter,Sr=Xt.onExpand,Wr=Xt.allowDrop,Cn=Xt.direction,xn=it.props,In=xn.pos,Rn=xn.eventKey,Gn=(0,Yl.Z)(ae),ti=Gn.dragNode;if(ae.currentMouseOverDroppableNodeKey!==Rn&&(ae.currentMouseOverDroppableNodeKey=Rn),!ti){ae.resetDragState();return}var ii=Kc(Fe,ti,it,rr,ae.dragStartMousePosition,Wr,Ot,Tt,It,Cn),b=ii.dropPosition,M=ii.dropLevelOffset,D=ii.dropTargetKey,P=ii.dropContainerKey,V=ii.dropTargetPos,q=ii.dropAllowed,be=ii.dragOverNodeKey;if(qt.indexOf(D)!==-1||!q){ae.resetDragState();return}if(ae.delayedDragEnterLogic||(ae.delayedDragEnterLogic={}),Object.keys(ae.delayedDragEnterLogic).forEach(function($e){clearTimeout(ae.delayedDragEnterLogic[$e])}),ti.props.eventKey!==it.props.eventKey&&(Fe.persist(),ae.delayedDragEnterLogic[In]=window.setTimeout(function(){if(ae.state.draggingNodeKey!==null){var $e=(0,ir.Z)(It),_t=Tt[it.props.eventKey];_t&&(_t.children||[]).length&&($e=oo(It,it.props.eventKey)),"expandedKeys"in ae.props||ae.setExpandedKeys($e),Sr==null||Sr($e,{node:gu(it.props),expanded:!0,nativeEvent:Fe.nativeEvent})}},800)),ti.props.eventKey===D&&M===0){ae.resetDragState();return}ae.setState({dragOverNodeKey:be,dropPosition:b,dropLevelOffset:M,dropTargetKey:D,dropContainerKey:P,dropTargetPos:V,dropAllowed:q}),gr==null||gr({event:Fe,node:gu(it.props),expandedKeys:It})},ae.onNodeDragOver=function(Fe,it){var gt=ae.state,It=gt.dragChildrenKeys,Tt=gt.flattenNodes,qt=gt.keyEntities,Ot=gt.expandedKeys,rr=gt.indent,Xt=ae.props,gr=Xt.onDragOver,Sr=Xt.allowDrop,Wr=Xt.direction,Cn=(0,Yl.Z)(ae),xn=Cn.dragNode;if(xn){var In=Kc(Fe,xn,it,rr,ae.dragStartMousePosition,Sr,Tt,qt,Ot,Wr),Rn=In.dropPosition,Gn=In.dropLevelOffset,ti=In.dropTargetKey,ii=In.dropContainerKey,b=In.dropAllowed,M=In.dropTargetPos,D=In.dragOverNodeKey;It.indexOf(ti)!==-1||!b||(xn.props.eventKey===ti&&Gn===0?ae.state.dropPosition===null&&ae.state.dropLevelOffset===null&&ae.state.dropTargetKey===null&&ae.state.dropContainerKey===null&&ae.state.dropTargetPos===null&&ae.state.dropAllowed===!1&&ae.state.dragOverNodeKey===null||ae.resetDragState():Rn===ae.state.dropPosition&&Gn===ae.state.dropLevelOffset&&ti===ae.state.dropTargetKey&&ii===ae.state.dropContainerKey&&M===ae.state.dropTargetPos&&b===ae.state.dropAllowed&&D===ae.state.dragOverNodeKey||ae.setState({dropPosition:Rn,dropLevelOffset:Gn,dropTargetKey:ti,dropContainerKey:ii,dropTargetPos:M,dropAllowed:b,dragOverNodeKey:D}),gr==null||gr({event:Fe,node:gu(it.props)}))}},ae.onNodeDragLeave=function(Fe,it){ae.currentMouseOverDroppableNodeKey===it.props.eventKey&&!Fe.currentTarget.contains(Fe.relatedTarget)&&(ae.resetDragState(),ae.currentMouseOverDroppableNodeKey=null);var gt=ae.props.onDragLeave;gt==null||gt({event:Fe,node:gu(it.props)})},ae.onWindowDragEnd=function(Fe){ae.onNodeDragEnd(Fe,null,!0),window.removeEventListener("dragend",ae.onWindowDragEnd)},ae.onNodeDragEnd=function(Fe,it){var gt=ae.props.onDragEnd;ae.setState({dragOverNodeKey:null}),ae.cleanDragState(),gt==null||gt({event:Fe,node:gu(it.props)}),ae.dragNode=null,window.removeEventListener("dragend",ae.onWindowDragEnd)},ae.onNodeDrop=function(Fe,it){var gt,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Tt=ae.state,qt=Tt.dragChildrenKeys,Ot=Tt.dropPosition,rr=Tt.dropTargetKey,Xt=Tt.dropTargetPos,gr=Tt.dropAllowed;if(gr){var Sr=ae.props.onDrop;if(ae.setState({dragOverNodeKey:null}),ae.cleanDragState(),rr!==null){var Wr=(0,qe.Z)((0,qe.Z)({},Ql(rr,ae.getTreeNodeRequiredProps())),{},{active:((gt=ae.getActiveItem())===null||gt===void 0?void 0:gt.key)===rr,data:ae.state.keyEntities[rr].node}),Cn=qt.indexOf(rr)!==-1;(0,Ne.ZP)(!Cn,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var xn=ko(Xt),In={event:Fe,node:gu(Wr),dragNode:ae.dragNode?gu(ae.dragNode.props):null,dragNodesKeys:[ae.dragNode.props.eventKey].concat(qt),dropToGap:Ot!==0,dropPosition:Ot+Number(xn[xn.length-1])};It||Sr==null||Sr(In),ae.dragNode=null}}},ae.cleanDragState=function(){var Fe=ae.state.draggingNodeKey;Fe!==null&&ae.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),ae.dragStartMousePosition=null,ae.currentMouseOverDroppableNodeKey=null},ae.triggerExpandActionExpand=function(Fe,it){var gt=ae.state,It=gt.expandedKeys,Tt=gt.flattenNodes,qt=it.expanded,Ot=it.key,rr=it.isLeaf;if(!(rr||Fe.shiftKey||Fe.metaKey||Fe.ctrlKey)){var Xt=Tt.filter(function(Sr){return Sr.key===Ot})[0],gr=gu((0,qe.Z)((0,qe.Z)({},Ql(Ot,ae.getTreeNodeRequiredProps())),{},{data:Xt.data}));ae.setExpandedKeys(qt?fc(It,Ot):oo(It,Ot)),ae.onNodeExpand(Fe,gr)}},ae.onNodeClick=function(Fe,it){var gt=ae.props,It=gt.onClick,Tt=gt.expandAction;Tt==="click"&&ae.triggerExpandActionExpand(Fe,it),It==null||It(Fe,it)},ae.onNodeDoubleClick=function(Fe,it){var gt=ae.props,It=gt.onDoubleClick,Tt=gt.expandAction;Tt==="doubleClick"&&ae.triggerExpandActionExpand(Fe,it),It==null||It(Fe,it)},ae.onNodeSelect=function(Fe,it){var gt=ae.state.selectedKeys,It=ae.state,Tt=It.keyEntities,qt=It.fieldNames,Ot=ae.props,rr=Ot.onSelect,Xt=Ot.multiple,gr=it.selected,Sr=it[qt.key],Wr=!gr;Wr?Xt?gt=oo(gt,Sr):gt=[Sr]:gt=fc(gt,Sr);var Cn=gt.map(function(xn){var In=Tt[xn];return In?In.node:null}).filter(function(xn){return xn});ae.setUncontrolledState({selectedKeys:gt}),rr==null||rr(gt,{event:"select",selected:Wr,node:it,selectedNodes:Cn,nativeEvent:Fe.nativeEvent})},ae.onNodeCheck=function(Fe,it,gt){var It=ae.state,Tt=It.keyEntities,qt=It.checkedKeys,Ot=It.halfCheckedKeys,rr=ae.props,Xt=rr.checkStrictly,gr=rr.onCheck,Sr=it.key,Wr,Cn={event:"check",node:it,checked:gt,nativeEvent:Fe.nativeEvent};if(Xt){var xn=gt?oo(qt,Sr):fc(qt,Sr),In=fc(Ot,Sr);Wr={checked:xn,halfChecked:In},Cn.checkedNodes=xn.map(function(M){return Tt[M]}).filter(function(M){return M}).map(function(M){return M.node}),ae.setUncontrolledState({checkedKeys:xn})}else{var Rn=Y([].concat((0,ir.Z)(qt),[Sr]),!0,Tt),Gn=Rn.checkedKeys,ti=Rn.halfCheckedKeys;if(!gt){var ii=new Set(Gn);ii.delete(Sr);var b=Y(Array.from(ii),{checked:!1,halfCheckedKeys:ti},Tt);Gn=b.checkedKeys,ti=b.halfCheckedKeys}Wr=Gn,Cn.checkedNodes=[],Cn.checkedNodesPositions=[],Cn.halfCheckedKeys=ti,Gn.forEach(function(M){var D=Tt[M];if(D){var P=D.node,V=D.pos;Cn.checkedNodes.push(P),Cn.checkedNodesPositions.push({node:P,pos:V})}}),ae.setUncontrolledState({checkedKeys:Gn},!1,{halfCheckedKeys:ti})}gr==null||gr(Wr,Cn)},ae.onNodeLoad=function(Fe){var it=Fe.key,gt=new Promise(function(It,Tt){ae.setState(function(qt){var Ot=qt.loadedKeys,rr=Ot===void 0?[]:Ot,Xt=qt.loadingKeys,gr=Xt===void 0?[]:Xt,Sr=ae.props,Wr=Sr.loadData,Cn=Sr.onLoad;if(!Wr||rr.indexOf(it)!==-1||gr.indexOf(it)!==-1)return null;var xn=Wr(Fe);return xn.then(function(){var In=ae.state.loadedKeys,Rn=oo(In,it);Cn==null||Cn(Rn,{event:"load",node:Fe}),ae.setUncontrolledState({loadedKeys:Rn}),ae.setState(function(Gn){return{loadingKeys:fc(Gn.loadingKeys,it)}}),It()}).catch(function(In){if(ae.setState(function(Gn){return{loadingKeys:fc(Gn.loadingKeys,it)}}),ae.loadingRetryTimes[it]=(ae.loadingRetryTimes[it]||0)+1,ae.loadingRetryTimes[it]>=Pe){var Rn=ae.state.loadedKeys;(0,Ne.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),ae.setUncontrolledState({loadedKeys:oo(Rn,it)}),It()}Tt(In)}),{loadingKeys:oo(gr,it)}})});return gt.catch(function(){}),gt},ae.onNodeMouseEnter=function(Fe,it){var gt=ae.props.onMouseEnter;gt==null||gt({event:Fe,node:it})},ae.onNodeMouseLeave=function(Fe,it){var gt=ae.props.onMouseLeave;gt==null||gt({event:Fe,node:it})},ae.onNodeContextMenu=function(Fe,it){var gt=ae.props.onRightClick;gt&&(Fe.preventDefault(),gt({event:Fe,node:it}))},ae.onFocus=function(){var Fe=ae.props.onFocus;ae.setState({focused:!0});for(var it=arguments.length,gt=new Array(it),It=0;It<it;It++)gt[It]=arguments[It];Fe==null||Fe.apply(void 0,gt)},ae.onBlur=function(){var Fe=ae.props.onBlur;ae.setState({focused:!1}),ae.onActiveChange(null);for(var it=arguments.length,gt=new Array(it),It=0;It<it;It++)gt[It]=arguments[It];Fe==null||Fe.apply(void 0,gt)},ae.getTreeNodeRequiredProps=function(){var Fe=ae.state,it=Fe.expandedKeys,gt=Fe.selectedKeys,It=Fe.loadedKeys,Tt=Fe.loadingKeys,qt=Fe.checkedKeys,Ot=Fe.halfCheckedKeys,rr=Fe.dragOverNodeKey,Xt=Fe.dropPosition,gr=Fe.keyEntities;return{expandedKeys:it||[],selectedKeys:gt||[],loadedKeys:It||[],loadingKeys:Tt||[],checkedKeys:qt||[],halfCheckedKeys:Ot||[],dragOverNodeKey:rr,dropPosition:Xt,keyEntities:gr}},ae.setExpandedKeys=function(Fe){var it=ae.state,gt=it.treeData,It=it.fieldNames,Tt=Dh(gt,Fe,It);ae.setUncontrolledState({expandedKeys:Fe,flattenNodes:Tt},!0)},ae.onNodeExpand=function(Fe,it){var gt=ae.state.expandedKeys,It=ae.state,Tt=It.listChanging,qt=It.fieldNames,Ot=ae.props,rr=Ot.onExpand,Xt=Ot.loadData,gr=it.expanded,Sr=it[qt.key];if(!Tt){var Wr=gt.indexOf(Sr),Cn=!gr;if((0,Ne.ZP)(gr&&Wr!==-1||!gr&&Wr===-1,"Expand state not sync with index check"),Cn?gt=oo(gt,Sr):gt=fc(gt,Sr),ae.setExpandedKeys(gt),rr==null||rr(gt,{node:it,expanded:Cn,nativeEvent:Fe.nativeEvent}),Cn&&Xt){var xn=ae.onNodeLoad(it);xn&&xn.then(function(){var In=Dh(ae.state.treeData,gt,qt);ae.setUncontrolledState({flattenNodes:In})}).catch(function(){var In=ae.state.expandedKeys,Rn=fc(In,Sr);ae.setExpandedKeys(Rn)})}}},ae.onListChangeStart=function(){ae.setUncontrolledState({listChanging:!0})},ae.onListChangeEnd=function(){setTimeout(function(){ae.setUncontrolledState({listChanging:!1})})},ae.onActiveChange=function(Fe){var it=ae.state.activeKey,gt=ae.props.onActiveChange;it!==Fe&&(ae.setState({activeKey:Fe}),Fe!==null&&ae.scrollTo({key:Fe}),gt==null||gt(Fe))},ae.getActiveItem=function(){var Fe=ae.state,it=Fe.activeKey,gt=Fe.flattenNodes;return it===null?null:gt.find(function(It){var Tt=It.key;return Tt===it})||null},ae.offsetActiveKey=function(Fe){var it=ae.state,gt=it.flattenNodes,It=it.activeKey,Tt=gt.findIndex(function(rr){var Xt=rr.key;return Xt===It});Tt===-1&&Fe<0&&(Tt=gt.length),Tt=(Tt+Fe+gt.length)%gt.length;var qt=gt[Tt];if(qt){var Ot=qt.key;ae.onActiveChange(Ot)}else ae.onActiveChange(null)},ae.onKeyDown=function(Fe){var it=ae.state,gt=it.activeKey,It=it.expandedKeys,Tt=it.checkedKeys,qt=it.fieldNames,Ot=ae.props,rr=Ot.onKeyDown,Xt=Ot.checkable,gr=Ot.selectable;switch(Fe.which){case Vf.Z.UP:{ae.offsetActiveKey(-1),Fe.preventDefault();break}case Vf.Z.DOWN:{ae.offsetActiveKey(1),Fe.preventDefault();break}}var Sr=ae.getActiveItem();if(Sr&&Sr.data){var Wr=ae.getTreeNodeRequiredProps(),Cn=Sr.data.isLeaf===!1||!!(Sr.data[qt.children]||[]).length,xn=gu((0,qe.Z)((0,qe.Z)({},Ql(gt,Wr)),{},{data:Sr.data,active:!0}));switch(Fe.which){case Vf.Z.LEFT:{Cn&&It.includes(gt)?ae.onNodeExpand({},xn):Sr.parent&&ae.onActiveChange(Sr.parent.key),Fe.preventDefault();break}case Vf.Z.RIGHT:{Cn&&!It.includes(gt)?ae.onNodeExpand({},xn):Sr.children&&Sr.children.length&&ae.onActiveChange(Sr.children[0].key),Fe.preventDefault();break}case Vf.Z.ENTER:case Vf.Z.SPACE:{Xt&&!xn.disabled&&xn.checkable!==!1&&!xn.disableCheckbox?ae.onNodeCheck({},xn,!Tt.includes(gt)):!Xt&&gr&&!xn.disabled&&xn.selectable!==!1&&ae.onNodeSelect({},xn);break}}}rr==null||rr(Fe)},ae.setUncontrolledState=function(Fe){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!ae.destroyed){var It=!1,Tt=!0,qt={};Object.keys(Fe).forEach(function(Ot){if(Ot in ae.props){Tt=!1;return}It=!0,qt[Ot]=Fe[Ot]}),It&&(!it||Tt)&&ae.setState((0,qe.Z)((0,qe.Z)({},qt),gt))}},ae.scrollTo=function(Fe){ae.listRef.current.scrollTo(Fe)},ae}return(0,Mr.Z)(Ce,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var et=this.props.activeKey;et!==void 0&&et!==this.state.activeKey&&(this.setState({activeKey:et}),et!==null&&this.scrollTo({key:et}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var et,Ie=this.state,Ze=Ie.focused,Fe=Ie.flattenNodes,it=Ie.keyEntities,gt=Ie.draggingNodeKey,It=Ie.activeKey,Tt=Ie.dropLevelOffset,qt=Ie.dropContainerKey,Ot=Ie.dropTargetKey,rr=Ie.dropPosition,Xt=Ie.dragOverNodeKey,gr=Ie.indent,Sr=this.props,Wr=Sr.prefixCls,Cn=Sr.className,xn=Sr.style,In=Sr.showLine,Rn=Sr.focusable,Gn=Sr.tabIndex,ti=Gn===void 0?0:Gn,ii=Sr.selectable,b=Sr.showIcon,M=Sr.icon,D=Sr.switcherIcon,P=Sr.draggable,V=Sr.checkable,q=Sr.checkStrictly,be=Sr.disabled,$e=Sr.motion,_t=Sr.loadData,Gt=Sr.filterTreeNode,yr=Sr.height,$r=Sr.itemHeight,an=Sr.virtual,Un=Sr.titleRender,ei=Sr.dropIndicatorRender,Jn=Sr.onContextMenu,Sn=Sr.onScroll,Xn=Sr.direction,ai=Sr.rootClassName,ln=Sr.rootStyle,pi=(0,Qt.Z)(this.props,{aria:!0,data:!0}),gi;return P&&((0,se.Z)(P)==="object"?gi=P:typeof P=="function"?gi={nodeDraggable:P}:gi={}),v.createElement(ih.Provider,{value:{prefixCls:Wr,selectable:ii,showIcon:b,icon:M,switcherIcon:D,draggable:gi,draggingNodeKey:gt,checkable:V,checkStrictly:q,disabled:be,keyEntities:it,dropLevelOffset:Tt,dropContainerKey:qt,dropTargetKey:Ot,dropPosition:rr,dragOverNodeKey:Xt,indent:gr,direction:Xn,dropIndicatorRender:ei,loadData:_t,filterTreeNode:Gt,titleRender:Un,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},v.createElement("div",{role:"tree",className:Te()(Wr,Cn,ai,(et={},(0,me.Z)(et,"".concat(Wr,"-show-line"),In),(0,me.Z)(et,"".concat(Wr,"-focused"),Ze),(0,me.Z)(et,"".concat(Wr,"-active-focused"),It!==null),et)),style:ln},v.createElement(Qc,(0,F.Z)({ref:this.listRef,prefixCls:Wr,style:xn,data:Fe,disabled:be,selectable:ii,checkable:!!V,motion:$e,dragging:gt!==null,height:yr,itemHeight:$r,virtual:an,focusable:Rn,focused:Ze,tabIndex:ti,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:Jn,onScroll:Sn},this.getTreeNodeRequiredProps(),pi))))}}],[{key:"getDerivedStateFromProps",value:function(et,Ie){var Ze=Ie.prevProps,Fe={prevProps:et};function it(Rn){return!Ze&&Rn in et||Ze&&Ze[Rn]!==et[Rn]}var gt,It=Ie.fieldNames;if(it("fieldNames")&&(It=Ec(et.fieldNames),Fe.fieldNames=It),it("treeData")?gt=et.treeData:it("children")&&((0,Ne.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),gt=Wc(et.children)),gt){Fe.treeData=gt;var Tt=Vh(gt,{fieldNames:It});Fe.keyEntities=(0,qe.Z)((0,me.Z)({},rc,bf),Tt.keyEntities)}var qt=Fe.keyEntities||Ie.keyEntities;if(it("expandedKeys")||Ze&&it("autoExpandParent"))Fe.expandedKeys=et.autoExpandParent||!Ze&&et.defaultExpandParent?ph(et.expandedKeys,qt):et.expandedKeys;else if(!Ze&&et.defaultExpandAll){var Ot=(0,qe.Z)({},qt);delete Ot[rc],Fe.expandedKeys=Object.keys(Ot).map(function(Rn){return Ot[Rn].key})}else!Ze&&et.defaultExpandedKeys&&(Fe.expandedKeys=et.autoExpandParent||et.defaultExpandParent?ph(et.defaultExpandedKeys,qt):et.defaultExpandedKeys);if(Fe.expandedKeys||delete Fe.expandedKeys,gt||Fe.expandedKeys){var rr=Dh(gt||Ie.treeData,Fe.expandedKeys||Ie.expandedKeys,It);Fe.flattenNodes=rr}if(et.selectable&&(it("selectedKeys")?Fe.selectedKeys=Gh(et.selectedKeys,et):!Ze&&et.defaultSelectedKeys&&(Fe.selectedKeys=Gh(et.defaultSelectedKeys,et))),et.checkable){var Xt;if(it("checkedKeys")?Xt=yd(et.checkedKeys)||{}:!Ze&&et.defaultCheckedKeys?Xt=yd(et.defaultCheckedKeys)||{}:gt&&(Xt=yd(et.checkedKeys)||{checkedKeys:Ie.checkedKeys,halfCheckedKeys:Ie.halfCheckedKeys}),Xt){var gr=Xt,Sr=gr.checkedKeys,Wr=Sr===void 0?[]:Sr,Cn=gr.halfCheckedKeys,xn=Cn===void 0?[]:Cn;if(!et.checkStrictly){var In=Y(Wr,!0,qt);Wr=In.checkedKeys,xn=In.halfCheckedKeys}Fe.checkedKeys=Wr,Fe.halfCheckedKeys=xn}}return it("loadedKeys")&&(Fe.loadedKeys=et.loadedKeys),Fe}}]),Ce}(v.Component);ct.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:ye,allowDrop:function(){return!0},expandAction:!1},ct.TreeNode=Nc;var Vt=ct,fr=Vt,Ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},Dr=Ir,jr=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Dr}))};jr.displayName="HolderOutlined";var En=v.forwardRef(jr),gn=m(33603);const Bn=4;function fn(w){const{dropPosition:G,dropLevelOffset:Ce,prefixCls:ae,indent:et,direction:Ie="ltr"}=w,Ze=Ie==="ltr"?"left":"right",Fe=Ie==="ltr"?"right":"left",it={[Ze]:-Ce*et+Bn,[Fe]:0};switch(G){case-1:it.top=-3;break;case 1:it.bottom=-3;break;default:it.bottom=-3,it[Ze]=et+Bn;break}return v.createElement("div",{style:it,className:`${ae}-drop-indicator`})}var Fn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},jn=Fn,vi=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:jn}))};vi.displayName="CaretDownFilled";var ki=v.forwardRef(vi),Ti={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Fi=Ti,na=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Fi}))};na.displayName="FileOutlined";var ka=v.forwardRef(na),Na=m(84273),po={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},No=po,is=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:No}))};is.displayName="MinusSquareOutlined";var rs=v.forwardRef(is),Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},vo=Ls,ds=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:vo}))};ds.displayName="PlusSquareOutlined";var Ns=v.forwardRef(ds),cs=m(96159);function Jo(w,G,Ce,ae){const{isLeaf:et,expanded:Ie,loading:Ze}=Ce;if(Ze)return v.createElement(Na.Z,{className:`${w}-switcher-loading-icon`});let Fe;if(ae&&typeof ae=="object"&&(Fe=ae.showLeafIcon),et){if(!ae)return null;if(typeof Fe!="boolean"&&Fe){const It=typeof Fe=="function"?Fe(Ce):Fe,Tt=`${w}-switcher-line-custom-icon`;return(0,cs.l$)(It)?(0,cs.Tm)(It,{className:Te()(It.props.className||"",Tt)}):It}return Fe?v.createElement(ka,{className:`${w}-switcher-line-icon`}):v.createElement("span",{className:`${w}-switcher-leaf-line`})}const it=`${w}-switcher-icon`,gt=typeof G=="function"?G(Ce):G;return(0,cs.l$)(gt)?(0,cs.Tm)(gt,{className:Te()(gt.props.className||"",it)}):gt||(ae?Ie?v.createElement(rs,{className:`${w}-switcher-line-icon`}):v.createElement(Ns,{className:`${w}-switcher-line-icon`}):v.createElement(ki,{className:it}))}var $s=m(33507);const ws=new Es.E4("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),_s=(w,G)=>({[`.${w}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${G.motionDurationSlow}`}}}),El=(w,G)=>({[`.${w}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:G.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${G.lineWidthBold}px solid ${G.colorPrimary}`,borderRadius:"50%",content:'""'}}}),nl=(w,G)=>{const{treeCls:Ce,treeNodeCls:ae,treeNodePadding:et,treeTitleHeight:Ie}=G,Ze=(Ie-G.fontSizeLG)/2,Fe=G.paddingXS;return{[Ce]:Object.assign(Object.assign({},(0,bs.Wf)(G)),{background:G.colorBgContainer,borderRadius:G.borderRadius,transition:`background-color ${G.motionDurationSlow}`,[`&${Ce}-rtl`]:{[`${Ce}-switcher`]:{"&_close":{[`${Ce}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${Ce}-active-focused)`]:Object.assign({},(0,bs.oN)(G)),[`${Ce}-list-holder-inner`]:{alignItems:"flex-start"},[`&${Ce}-block-node`]:{[`${Ce}-list-holder-inner`]:{alignItems:"stretch",[`${Ce}-node-content-wrapper`]:{flex:"auto"},[`${ae}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:et,insetInlineStart:0,border:`1px solid ${G.colorPrimary}`,opacity:0,animationName:ws,animationDuration:G.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${ae}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${et}px 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${Ce}-node-content-wrapper`]:{color:G.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${Ce}-node-content-wrapper`]:Object.assign({},(0,bs.oN)(G)),[`&:not(${ae}-disabled).filter-node ${Ce}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${Ce}-draggable-icon`]:{width:Ie,lineHeight:`${Ie}px`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${G.motionDurationSlow}`,[`${ae}:hover &`]:{opacity:.45}},[`&${ae}-disabled`]:{[`${Ce}-draggable-icon`]:{visibility:"hidden"}}}},[`${Ce}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:Ie}},[`${Ce}-draggable-icon`]:{visibility:"hidden"},[`${Ce}-switcher`]:Object.assign(Object.assign({},_s(w,G)),{position:"relative",flex:"none",alignSelf:"stretch",width:Ie,margin:0,lineHeight:`${Ie}px`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${Ce}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:G.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:Ie/2,bottom:-et,marginInlineStart:-1,borderInlineEnd:`1px solid ${G.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:Ie/2*.8,height:Ie/2,borderBottom:`1px solid ${G.colorBorder}`,content:'""'}}}),[`${Ce}-checkbox`]:{top:"initial",marginInlineEnd:Fe,marginBlockStart:Ze},[`${Ce}-node-content-wrapper, ${Ce}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:Ie,margin:0,padding:`0 ${G.paddingXS/2}px`,color:"inherit",lineHeight:`${Ie}px`,background:"transparent",borderRadius:G.borderRadius,cursor:"pointer",transition:`all ${G.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:G.controlItemBgHover},[`&${Ce}-node-selected`]:{backgroundColor:G.controlItemBgActive},[`${Ce}-iconEle`]:{display:"inline-block",width:Ie,height:Ie,lineHeight:`${Ie}px`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${Ce}-unselectable ${Ce}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${Ce}-node-content-wrapper`]:Object.assign({lineHeight:`${Ie}px`,userSelect:"none"},El(w,G)),[`${ae}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${G.colorPrimary}`}},"&-show-line":{[`${Ce}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:Ie/2,bottom:-et,borderInlineEnd:`1px solid ${G.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${Ce}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${ae}-leaf-last`]:{[`${Ce}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${Ie/2}px !important`}}}}})}},Qu=w=>{const{treeCls:G,treeNodeCls:Ce,treeNodePadding:ae}=w;return{[`${G}${G}-directory`]:{[Ce]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:ae,insetInlineStart:0,transition:`background-color ${w.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:w.controlItemBgHover}},"> *":{zIndex:1},[`${G}-switcher`]:{transition:`color ${w.motionDurationMid}`},[`${G}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${G}-node-selected`]:{color:w.colorTextLightSolid,background:"transparent"}},"&-selected":{[`
            &:hover::before,
            &::before
          `]:{background:w.colorPrimary},[`${G}-switcher`]:{color:w.colorTextLightSolid},[`${G}-node-content-wrapper`]:{color:w.colorTextLightSolid,background:"transparent"}}}}}},Ac=(w,G)=>{const Ce=`.${w}`,ae=`${Ce}-treenode`,et=G.paddingXS/2,Ie=G.controlHeightSM,Ze=(0,Xs.TS)(G,{treeCls:Ce,treeNodeCls:ae,treeNodePadding:et,treeTitleHeight:Ie});return[nl(w,Ze),Qu(Ze)]};var Ju=(0,gl.Z)("Tree",(w,G)=>{let{prefixCls:Ce}=G;return[{[w.componentCls]:Tl(`${Ce}-checkbox`,w)},Ac(Ce,w),(0,$s.Z)(w)]}),Tc=v.forwardRef((w,G)=>{const{getPrefixCls:Ce,direction:ae,virtual:et}=v.useContext(er.E_),{prefixCls:Ie,className:Ze,showIcon:Fe=!1,showLine:it,switcherIcon:gt,blockNode:It=!1,children:Tt,checkable:qt=!1,selectable:Ot=!0,draggable:rr,motion:Xt}=w,gr=Ce("tree",Ie),Sr=Ce(),Wr=Xt!=null?Xt:Object.assign(Object.assign({},(0,gn.ZP)(Sr)),{motionAppear:!1}),Cn=Object.assign(Object.assign({},w),{checkable:qt,selectable:Ot,showIcon:Fe,motion:Wr,blockNode:It,showLine:Boolean(it),dropIndicatorRender:fn}),[xn,In]=Ju(gr),Rn=v.useMemo(()=>{if(!rr)return!1;let Gn={};switch(typeof rr){case"function":Gn.nodeDraggable=rr;break;case"object":Gn=Object.assign({},rr);break;default:break}return Gn.icon!==!1&&(Gn.icon=Gn.icon||v.createElement(En,null)),Gn},[rr]);return xn(v.createElement(fr,Object.assign({itemHeight:20,ref:G,virtual:et},Cn,{prefixCls:gr,className:Te()({[`${gr}-icon-hide`]:!Fe,[`${gr}-block-node`]:It,[`${gr}-unselectable`]:!Ot,[`${gr}-rtl`]:ae==="rtl"},Ze,In),direction:ae,checkable:qt&&v.createElement("span",{className:`${gr}-checkbox-inner`}),selectable:Ot,switcherIcon:Gn=>Jo(gr,gt,Gn,it),draggable:Rn}),Tt))}),ec={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},Pf=ec,Ef=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Pf}))};Ef.displayName="FolderOpenOutlined";var $l=v.forwardRef(Ef),Uc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},Jh=Uc,qh=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Jh}))};qh.displayName="FolderOutlined";var Sh=v.forwardRef(qh),Of;(function(w){w[w.None=0]="None",w[w.Start=1]="Start",w[w.End=2]="End"})(Of||(Of={}));function Ch(w,G){function Ce(ae){const{key:et,children:Ie}=ae;G(et,ae)!==!1&&Ch(Ie||[],G)}w.forEach(Ce)}function pf(w){let{treeData:G,expandedKeys:Ce,startKey:ae,endKey:et}=w;const Ie=[];let Ze=Of.None;if(ae&&ae===et)return[ae];if(!ae||!et)return[];function Fe(it){return it===ae||it===et}return Ch(G,it=>{if(Ze===Of.End)return!1;if(Fe(it)){if(Ie.push(it),Ze===Of.None)Ze=Of.Start;else if(Ze===Of.Start)return Ze=Of.End,!1}else Ze===Of.Start&&Ie.push(it);return Ce.includes(it)}),Ie}function oh(w,G){const Ce=(0,ir.Z)(G),ae=[];return Ch(w,(et,Ie)=>{const Ze=Ce.indexOf(et);return Ze!==-1&&(ae.push(Ie),Ce.splice(Ze,1)),!!Ce.length}),ae}var Jc=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce};function nc(w){const{isLeaf:G,expanded:Ce}=w;return G?v.createElement(ka,null):Ce?v.createElement($l,null):v.createElement(Sh,null)}function ic(w){let{treeData:G,children:Ce}=w;return G||Wc(Ce)}const wh=(w,G)=>{var{defaultExpandAll:Ce,defaultExpandParent:ae,defaultExpandedKeys:et}=w,Ie=Jc(w,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const Ze=v.useRef(),Fe=v.useRef(),it=()=>{const{keyEntities:ti}=Vh(ic(Ie));let ii;return Ce?ii=Object.keys(ti):ae?ii=ph(Ie.expandedKeys||et||[],ti):ii=Ie.expandedKeys||et,ii},[gt,It]=v.useState(Ie.selectedKeys||Ie.defaultSelectedKeys||[]),[Tt,qt]=v.useState(()=>it());v.useEffect(()=>{"selectedKeys"in Ie&&It(Ie.selectedKeys)},[Ie.selectedKeys]),v.useEffect(()=>{"expandedKeys"in Ie&&qt(Ie.expandedKeys)},[Ie.expandedKeys]);const Ot=(ti,ii)=>{var b;return"expandedKeys"in Ie||qt(ti),(b=Ie.onExpand)===null||b===void 0?void 0:b.call(Ie,ti,ii)},rr=(ti,ii)=>{var b;const{multiple:M}=Ie,{node:D,nativeEvent:P}=ii,{key:V=""}=D,q=ic(Ie),be=Object.assign(Object.assign({},ii),{selected:!0}),$e=(P==null?void 0:P.ctrlKey)||(P==null?void 0:P.metaKey),_t=P==null?void 0:P.shiftKey;let Gt;M&&$e?(Gt=ti,Ze.current=V,Fe.current=Gt,be.selectedNodes=oh(q,Gt)):M&&_t?(Gt=Array.from(new Set([].concat((0,ir.Z)(Fe.current||[]),(0,ir.Z)(pf({treeData:q,expandedKeys:Tt,startKey:V,endKey:Ze.current}))))),be.selectedNodes=oh(q,Gt)):(Gt=[V],Ze.current=V,Fe.current=Gt,be.selectedNodes=oh(q,Gt)),(b=Ie.onSelect)===null||b===void 0||b.call(Ie,Gt,be),"selectedKeys"in Ie||It(Gt)},{getPrefixCls:Xt,direction:gr}=v.useContext(er.E_),{prefixCls:Sr,className:Wr,showIcon:Cn=!0,expandAction:xn="click"}=Ie,In=Jc(Ie,["prefixCls","className","showIcon","expandAction"]),Rn=Xt("tree",Sr),Gn=Te()(`${Rn}-directory`,{[`${Rn}-directory-rtl`]:gr==="rtl"},Wr);return v.createElement(Tc,Object.assign({icon:nc,ref:G,blockNode:!0},In,{showIcon:Cn,expandAction:xn,prefixCls:Rn,className:Gn,expandedKeys:Tt,selectedKeys:gt,onSelect:rr,onExpand:Ot}))};var Du=v.forwardRef(wh);const yu=Tc;yu.DirectoryTree=Du,yu.TreeNode=Nc;var qc=yu;function sh(w){const G=v.useRef(w),Ce=Vn();return[()=>G.current,ae=>{G.current=ae,Ce()}]}var vh=m(40110),mh=w=>{const{getPrefixCls:G,direction:Ce}=(0,v.useContext)(er.E_),{prefixCls:ae,className:et=""}=w,Ie=G("input-group",ae),Ze=G("input"),[Fe,it]=cf(Ze),gt=Te()(Ie,{[`${Ie}-lg`]:w.size==="large",[`${Ie}-sm`]:w.size==="small",[`${Ie}-compact`]:w.compact,[`${Ie}-rtl`]:Ce==="rtl"},it,et),It=(0,v.useContext)(lo.aM),Tt=(0,v.useMemo)(()=>Object.assign(Object.assign({},It),{isFormItemInput:!1}),[It]);return Fe(v.createElement("span",{className:gt,style:w.style,onMouseEnter:w.onMouseEnter,onMouseLeave:w.onMouseLeave,onFocus:w.onFocus,onBlur:w.onBlur},v.createElement(lo.aM.Provider,{value:Tt},w.children)))},If=m(86581);function Rf(w){return!!(w.addonBefore||w.addonAfter)}function vf(w){return!!(w.prefix||w.suffix||w.allowClear)}function oe(w,G,Ce,ae){if(Ce){var et=G;if(G.type==="click"){var Ie=w.cloneNode(!0);et=Object.create(G,{target:{value:Ie},currentTarget:{value:Ie}}),Ie.value="",Ce(et);return}if(ae!==void 0){et=Object.create(G,{target:{value:w},currentTarget:{value:w}}),w.value=ae,Ce(et);return}Ce(et)}}function Br(w,G){if(w){w.focus(G);var Ce=G||{},ae=Ce.cursor;if(ae){var et=w.value.length;switch(ae){case"start":w.setSelectionRange(0,0);break;case"end":w.setSelectionRange(et,et);break;default:w.setSelectionRange(0,et)}}}}function xt(w){return typeof w=="undefined"||w===null?"":String(w)}var mt=function(G){var Ce,ae=G.inputElement,et=G.prefixCls,Ie=G.prefix,Ze=G.suffix,Fe=G.addonBefore,it=G.addonAfter,gt=G.className,It=G.style,Tt=G.affixWrapperClassName,qt=G.groupClassName,Ot=G.wrapperClassName,rr=G.disabled,Xt=G.readOnly,gr=G.focused,Sr=G.triggerFocus,Wr=G.allowClear,Cn=G.value,xn=G.handleReset,In=G.hidden,Rn=G.inputStyle,Gn=G.classes,ti=(0,v.useRef)(null),ii=function($r){var an;(an=ti.current)!==null&&an!==void 0&&an.contains($r.target)&&(Sr==null||Sr())},b=function(){var $r;if(!Wr)return null;var an=!rr&&!Xt&&Cn,Un="".concat(et,"-clear-icon"),ei=(0,se.Z)(Wr)==="object"&&Wr!==null&&Wr!==void 0&&Wr.clearIcon?Wr.clearIcon:"\u2716";return v.createElement("span",{onClick:xn,onMouseDown:function(Sn){return Sn.preventDefault()},className:Te()(Un,($r={},(0,me.Z)($r,"".concat(Un,"-hidden"),!an),(0,me.Z)($r,"".concat(Un,"-has-suffix"),!!Ze),$r)),role:"button",tabIndex:-1},ei)},M=(0,v.cloneElement)(ae,{value:Cn,hidden:In,style:(0,qe.Z)((0,qe.Z)({},(Ce=ae.props)===null||Ce===void 0?void 0:Ce.style),Rn)});if(vf(G)){var D,P="".concat(et,"-affix-wrapper"),V=Te()(P,(D={},(0,me.Z)(D,"".concat(P,"-disabled"),rr),(0,me.Z)(D,"".concat(P,"-focused"),gr),(0,me.Z)(D,"".concat(P,"-readonly"),Xt),(0,me.Z)(D,"".concat(P,"-input-with-clear-btn"),Ze&&Wr&&Cn),D),!Rf(G)&&gt,Tt,Gn==null?void 0:Gn.affixWrapper),q=(Ze||Wr)&&v.createElement("span",{className:"".concat(et,"-suffix")},b(),Ze);M=v.createElement("span",{className:V,style:It,hidden:!Rf(G)&&In,onClick:ii,ref:ti},Ie&&v.createElement("span",{className:"".concat(et,"-prefix")},Ie),(0,v.cloneElement)(ae,{style:Rn!=null?Rn:null,value:Cn,hidden:null}),q)}if(Rf(G)){var be="".concat(et,"-group"),$e="".concat(be,"-addon"),_t=Te()("".concat(et,"-wrapper"),be,Ot,Gn==null?void 0:Gn.wrapper),Gt=Te()("".concat(et,"-group-wrapper"),gt,qt,Gn==null?void 0:Gn.group);return v.createElement("span",{className:Gt,style:It,hidden:In},v.createElement("span",{className:_t},Fe&&v.createElement("span",{className:$e},Fe),(0,v.cloneElement)(M,{style:Rn!=null?Rn:null,hidden:null}),it&&v.createElement("span",{className:$e},it)))}return M},Ht=mt,or=m(21770),en=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName","classes"],_n=(0,v.forwardRef)(function(w,G){var Ce=w.autoComplete,ae=w.onChange,et=w.onFocus,Ie=w.onBlur,Ze=w.onPressEnter,Fe=w.onKeyDown,it=w.prefixCls,gt=it===void 0?"rc-input":it,It=w.disabled,Tt=w.htmlSize,qt=w.className,Ot=w.maxLength,rr=w.suffix,Xt=w.showCount,gr=w.type,Sr=gr===void 0?"text":gr,Wr=w.inputClassName,Cn=w.classes,xn=(0,Ut.Z)(w,en),In=(0,or.Z)(w.defaultValue,{value:w.value}),Rn=(0,l.Z)(In,2),Gn=Rn[0],ti=Rn[1],ii=(0,v.useState)(!1),b=(0,l.Z)(ii,2),M=b[0],D=b[1],P=(0,v.useRef)(null),V=function(Un){P.current&&Br(P.current,Un)};(0,v.useImperativeHandle)(G,function(){return{focus:V,blur:function(){var Un;(Un=P.current)===null||Un===void 0||Un.blur()},setSelectionRange:function(Un,ei,Jn){var Sn;(Sn=P.current)===null||Sn===void 0||Sn.setSelectionRange(Un,ei,Jn)},select:function(){var Un;(Un=P.current)===null||Un===void 0||Un.select()},input:P.current}}),(0,v.useEffect)(function(){D(function(an){return an&&It?!1:an})},[It]);var q=function(Un){w.value===void 0&&ti(Un.target.value),P.current&&oe(P.current,Un,ae)},be=function(Un){Ze&&Un.key==="Enter"&&Ze(Un),Fe==null||Fe(Un)},$e=function(Un){D(!0),et==null||et(Un)},_t=function(Un){D(!1),Ie==null||Ie(Un)},Gt=function(Un){ti(""),V(),P.current&&oe(P.current,Un,ae)},yr=function(){var Un=(0,hr.Z)(w,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","classes","wrapperClassName","htmlSize"]);return v.createElement("input",(0,F.Z)({autoComplete:Ce},Un,{onChange:q,onFocus:$e,onBlur:_t,onKeyDown:be,className:Te()(gt,(0,me.Z)({},"".concat(gt,"-disabled"),It),Wr,Cn==null?void 0:Cn.input,!Rf(w)&&!vf(w)&&qt),ref:P,size:Tt,type:Sr}))},$r=function(){var Un=Number(Ot)>0;if(rr||Xt){var ei=xt(Gn),Jn=(0,ir.Z)(ei).length,Sn=(0,se.Z)(Xt)==="object"?Xt.formatter({value:ei,count:Jn,maxLength:Ot}):"".concat(Jn).concat(Un?" / ".concat(Ot):"");return v.createElement(v.Fragment,null,!!Xt&&v.createElement("span",{className:Te()("".concat(gt,"-show-count-suffix"),(0,me.Z)({},"".concat(gt,"-show-count-has-suffix"),!!rr))},Sn),rr)}return null};return v.createElement(Ht,(0,F.Z)({},xn,{prefixCls:gt,className:qt,inputElement:yr(),handleReset:Gt,value:xt(Gn),focused:M,triggerFocus:V,suffix:$r(),disabled:It,classes:Cn}))}),Tn=_n,zn=Tn,wi=m(4173),Xi=m(9708);function ba(w,G){const Ce=(0,v.useRef)([]),ae=()=>{Ce.current.push(setTimeout(()=>{var et,Ie,Ze,Fe;!((et=w.current)===null||et===void 0)&&et.input&&((Ie=w.current)===null||Ie===void 0?void 0:Ie.input.getAttribute("type"))==="password"&&(!((Ze=w.current)===null||Ze===void 0)&&Ze.input.hasAttribute("value"))&&((Fe=w.current)===null||Fe===void 0||Fe.input.removeAttribute("value"))}))};return(0,v.useEffect)(()=>(G&&ae(),()=>Ce.current.forEach(et=>{et&&clearTimeout(et)})),[]),ae}function mo(w){return!!(w.prefix||w.suffix||w.allowClear)}var Ja=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce};function Ds(w,G){if(!w)return;w.focus(G);const{cursor:Ce}=G||{};if(Ce){const ae=w.value.length;switch(Ce){case"start":w.setSelectionRange(0,0);break;case"end":w.setSelectionRange(ae,ae);break;default:w.setSelectionRange(0,ae);break}}}var lu=(0,v.forwardRef)((w,G)=>{const{prefixCls:Ce,bordered:ae=!0,status:et,size:Ie,disabled:Ze,onBlur:Fe,onFocus:it,suffix:gt,allowClear:It,addonAfter:Tt,addonBefore:qt,className:Ot,rootClassName:rr,onChange:Xt}=w,gr=Ja(w,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange"]),{getPrefixCls:Sr,direction:Wr,input:Cn}=v.useContext(er.E_),xn=Sr("input",Ce),In=(0,v.useRef)(null),[Rn,Gn]=cf(xn),{compactSize:ti,compactItemClassnames:ii}=(0,wi.ri)(xn,Wr),b=v.useContext(mn.Z),M=ti||Ie||b,D=v.useContext(ol.Z),P=Ze!=null?Ze:D,{status:V,hasFeedback:q,feedbackIcon:be}=(0,v.useContext)(lo.aM),$e=(0,Xi.F)(V,et),_t=mo(w)||!!q,Gt=(0,v.useRef)(_t);(0,v.useEffect)(()=>{var Sn;_t&&Gt.current,Gt.current=_t},[_t]);const yr=ba(In,!0),$r=Sn=>{yr(),Fe==null||Fe(Sn)},an=Sn=>{yr(),it==null||it(Sn)},Un=Sn=>{yr(),Xt==null||Xt(Sn)},ei=(q||gt)&&v.createElement(v.Fragment,null,gt,q&&be);let Jn;return typeof It=="object"&&(It!=null&&It.clearIcon)?Jn=It:It&&(Jn={clearIcon:v.createElement(If.Z,null)}),Rn(v.createElement(zn,Object.assign({ref:(0,ue.sQ)(G,In),prefixCls:xn,autoComplete:Cn==null?void 0:Cn.autoComplete},gr,{disabled:P,onBlur:$r,onFocus:an,suffix:ei,allowClear:Jn,className:Te()(Ot,rr,ii),onChange:Un,addonAfter:Tt&&v.createElement(wi.BR,null,v.createElement(lo.Ux,{override:!0,status:!0},Tt)),addonBefore:qt&&v.createElement(wi.BR,null,v.createElement(lo.Ux,{override:!0,status:!0},qt)),classes:{input:Te()({[`${xn}-sm`]:M==="small",[`${xn}-lg`]:M==="large",[`${xn}-rtl`]:Wr==="rtl",[`${xn}-borderless`]:!ae},!_t&&(0,Xi.Z)(xn,$e),Gn),affixWrapper:Te()({[`${xn}-affix-wrapper-sm`]:M==="small",[`${xn}-affix-wrapper-lg`]:M==="large",[`${xn}-affix-wrapper-rtl`]:Wr==="rtl",[`${xn}-affix-wrapper-borderless`]:!ae},(0,Xi.Z)(`${xn}-affix-wrapper`,$e,q),Gn),wrapper:Te()({[`${xn}-group-rtl`]:Wr==="rtl"},Gn),group:Te()({[`${xn}-group-wrapper-sm`]:M==="small",[`${xn}-group-wrapper-lg`]:M==="large",[`${xn}-group-wrapper-rtl`]:Wr==="rtl",[`${xn}-group-wrapper-disabled`]:P},(0,Xi.Z)(`${xn}-group-wrapper`,$e,q),Gn)}})))}),Iu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},_u=Iu,Mc=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:_u}))};Mc.displayName="EyeInvisibleOutlined";var tu=v.forwardRef(Mc),Fl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Ys=Fl,ku=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Ys}))};ku.displayName="EyeOutlined";var Bu=v.forwardRef(ku),Gl=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce};const ru=w=>w?v.createElement(Bu,null):v.createElement(tu,null),pl={click:"onClick",hover:"onMouseOver"};var Bh=v.forwardRef((w,G)=>{const{visibilityToggle:Ce=!0}=w,ae=typeof Ce=="object"&&Ce.visible!==void 0,[et,Ie]=(0,v.useState)(()=>ae?Ce.visible:!1),Ze=(0,v.useRef)(null);v.useEffect(()=>{ae&&Ie(Ce.visible)},[ae,Ce]);const Fe=ba(Ze),it=()=>{const{disabled:In}=w;In||(et&&Fe(),Ie(Rn=>{var Gn;const ti=!Rn;return typeof Ce=="object"&&((Gn=Ce.onVisibleChange)===null||Gn===void 0||Gn.call(Ce,ti)),ti}))},gt=In=>{const{action:Rn="click",iconRender:Gn=ru}=w,ti=pl[Rn]||"",ii=Gn(et),b={[ti]:it,className:`${In}-icon`,key:"passwordIcon",onMouseDown:M=>{M.preventDefault()},onMouseUp:M=>{M.preventDefault()}};return v.cloneElement(v.isValidElement(ii)?ii:v.createElement("span",null,ii),b)},{className:It,prefixCls:Tt,inputPrefixCls:qt,size:Ot}=w,rr=Gl(w,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:Xt}=v.useContext(er.E_),gr=Xt("input",qt),Sr=Xt("input-password",Tt),Wr=Ce&&gt(Sr),Cn=Te()(Sr,It,{[`${Sr}-${Ot}`]:!!Ot}),xn=Object.assign(Object.assign({},(0,hr.Z)(rr,["suffix","iconRender","visibilityToggle"])),{type:et?"text":"password",className:Cn,prefixCls:gr,suffix:Wr});return Ot&&(xn.size=Ot),v.createElement(lu,Object.assign({ref:(0,ue.sQ)(G,Ze)},xn))}),hc=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce},Kf=v.forwardRef((w,G)=>{const{prefixCls:Ce,inputPrefixCls:ae,className:et,size:Ie,suffix:Ze,enterButton:Fe=!1,addonAfter:it,loading:gt,disabled:It,onSearch:Tt,onChange:qt,onCompositionStart:Ot,onCompositionEnd:rr}=w,Xt=hc(w,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:gr,direction:Sr}=v.useContext(er.E_),Wr=v.useContext(mn.Z),Cn=v.useRef(!1),xn=gr("input-search",Ce),In=gr("input",ae),{compactSize:Rn}=(0,wi.ri)(xn,Sr),Gn=Rn||Ie||Wr,ti=v.useRef(null),ii=$r=>{$r&&$r.target&&$r.type==="click"&&Tt&&Tt($r.target.value,$r),qt&&qt($r)},b=$r=>{var an;document.activeElement===((an=ti.current)===null||an===void 0?void 0:an.input)&&$r.preventDefault()},M=$r=>{var an,Un;Tt&&Tt((Un=(an=ti.current)===null||an===void 0?void 0:an.input)===null||Un===void 0?void 0:Un.value,$r)},D=$r=>{Cn.current||gt||M($r)},P=typeof Fe=="boolean"?v.createElement(vh.Z,null):null,V=`${xn}-button`;let q;const be=Fe||{},$e=be.type&&be.type.__ANT_BUTTON===!0;$e||be.type==="button"?q=(0,cs.Tm)(be,Object.assign({onMouseDown:b,onClick:$r=>{var an,Un;(Un=(an=be==null?void 0:be.props)===null||an===void 0?void 0:an.onClick)===null||Un===void 0||Un.call(an,$r),M($r)},key:"enterButton"},$e?{className:V,size:Gn}:{})):q=v.createElement($i.ZP,{className:V,type:Fe?"primary":void 0,size:Gn,disabled:It,key:"enterButton",onMouseDown:b,onClick:M,loading:gt,icon:P},Fe),it&&(q=[q,(0,cs.Tm)(it,{key:"addonAfter"})]);const _t=Te()(xn,{[`${xn}-rtl`]:Sr==="rtl",[`${xn}-${Gn}`]:!!Gn,[`${xn}-with-button`]:!!Fe},et),Gt=$r=>{Cn.current=!0,Ot==null||Ot($r)},yr=$r=>{Cn.current=!1,rr==null||rr($r)};return v.createElement(lu,Object.assign({ref:(0,ue.sQ)(ti,G),onPressEnter:D},Xt,{size:Gn,onCompositionStart:Gt,onCompositionEnd:yr,prefixCls:In,addonAfter:q,suffix:Ze,onChange:ii,className:_t,disabled:It}))}),gh=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,yh=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Yf={},dc;function ne(w){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ce=w.getAttribute("id")||w.getAttribute("data-reactid")||w.getAttribute("name");if(G&&Yf[Ce])return Yf[Ce];var ae=window.getComputedStyle(w),et=ae.getPropertyValue("box-sizing")||ae.getPropertyValue("-moz-box-sizing")||ae.getPropertyValue("-webkit-box-sizing"),Ie=parseFloat(ae.getPropertyValue("padding-bottom"))+parseFloat(ae.getPropertyValue("padding-top")),Ze=parseFloat(ae.getPropertyValue("border-bottom-width"))+parseFloat(ae.getPropertyValue("border-top-width")),Fe=yh.map(function(gt){return"".concat(gt,":").concat(ae.getPropertyValue(gt))}).join(";"),it={sizingStyle:Fe,paddingSize:Ie,borderSize:Ze,boxSizing:et};return G&&Ce&&(Yf[Ce]=it),it}function Me(w){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;dc||(dc=document.createElement("textarea"),dc.setAttribute("tab-index","-1"),dc.setAttribute("aria-hidden","true"),document.body.appendChild(dc)),w.getAttribute("wrap")?dc.setAttribute("wrap",w.getAttribute("wrap")):dc.removeAttribute("wrap");var et=ne(w,G),Ie=et.paddingSize,Ze=et.borderSize,Fe=et.boxSizing,it=et.sizingStyle;dc.setAttribute("style","".concat(it,";").concat(gh)),dc.value=w.value||w.placeholder||"";var gt=void 0,It=void 0,Tt,qt=dc.scrollHeight;if(Fe==="border-box"?qt+=Ze:Fe==="content-box"&&(qt-=Ie),Ce!==null||ae!==null){dc.value=" ";var Ot=dc.scrollHeight-Ie;Ce!==null&&(gt=Ot*Ce,Fe==="border-box"&&(gt=gt+Ie+Ze),qt=Math.max(gt,qt)),ae!==null&&(It=Ot*ae,Fe==="border-box"&&(It=It+Ie+Ze),Tt=qt>It?"":"hidden",qt=Math.min(It,qt))}var rr={height:qt,overflowY:Tt,resize:"none"};return gt&&(rr.minHeight=gt),It&&(rr.maxHeight=It),rr}var Oe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Ke=0,pt=1,Pt=2,Xr=v.forwardRef(function(w,G){var Ce=w,ae=Ce.prefixCls,et=Ce.onPressEnter,Ie=Ce.defaultValue,Ze=Ce.value,Fe=Ce.autoSize,it=Ce.onResize,gt=Ce.className,It=Ce.style,Tt=Ce.disabled,qt=Ce.onChange,Ot=Ce.onInternalAutoSize,rr=(0,Ut.Z)(Ce,Oe),Xt=(0,or.Z)(Ie,{value:Ze,postState:function(Sn){return Sn!=null?Sn:""}}),gr=(0,l.Z)(Xt,2),Sr=gr[0],Wr=gr[1],Cn=function(Sn){Wr(Sn.target.value),qt==null||qt(Sn)},xn=v.useRef();v.useImperativeHandle(G,function(){return{textArea:xn.current}});var In=v.useMemo(function(){return Fe&&(0,se.Z)(Fe)==="object"?[Fe.minRows,Fe.maxRows]:[]},[Fe]),Rn=(0,l.Z)(In,2),Gn=Rn[0],ti=Rn[1],ii=!!Fe,b=function(){try{if(document.activeElement===xn.current){var Sn=xn.current,Xn=Sn.selectionStart,ai=Sn.selectionEnd,ln=Sn.scrollTop;xn.current.setSelectionRange(Xn,ai),xn.current.scrollTop=ln}}catch(pi){}},M=v.useState(Pt),D=(0,l.Z)(M,2),P=D[0],V=D[1],q=v.useState(),be=(0,l.Z)(q,2),$e=be[0],_t=be[1],Gt=function(){V(Ke)};(0,R.Z)(function(){ii&&Gt()},[Ze,Gn,ti,ii]),(0,R.Z)(function(){if(P===Ke)V(pt);else if(P===pt){var Jn=Me(xn.current,!1,Gn,ti);V(Pt),_t(Jn)}else b()},[P]);var yr=v.useRef(),$r=function(){su.Z.cancel(yr.current)},an=function(Sn){P===Pt&&(it==null||it(Sn),Fe&&($r(),yr.current=(0,su.Z)(function(){Gt()})))};v.useEffect(function(){return $r},[]);var Un=ii?$e:null,ei=(0,qe.Z)((0,qe.Z)({},It),Un);return(P===Ke||P===pt)&&(ei.overflowY="hidden",ei.overflowX="hidden"),v.createElement(J.Z,{onResize:an,disabled:!(Fe||it)},v.createElement("textarea",(0,F.Z)({},rr,{ref:xn,style:ei,className:Te()(ae,gt,(0,me.Z)({},"".concat(ae,"-disabled"),Tt)),disabled:Tt,value:Sr,onChange:Cn})))}),An=Xr,mi=["defaultValue","value","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled"];function un(w,G){return(0,ir.Z)(w||"").slice(0,G).join("")}function bi(w,G,Ce,ae){var et=Ce;return w?et=un(Ce,ae):(0,ir.Z)(G||"").length<Ce.length&&(0,ir.Z)(Ce||"").length>ae&&(et=G),et}var ga=v.forwardRef(function(w,G){var Ce=w.defaultValue,ae=w.value,et=w.onChange,Ie=w.allowClear,Ze=w.maxLength,Fe=w.onCompositionStart,it=w.onCompositionEnd,gt=w.suffix,It=w.prefixCls,Tt=It===void 0?"rc-textarea":It,qt=w.classes,Ot=w.showCount,rr=w.className,Xt=w.style,gr=w.disabled,Sr=(0,Ut.Z)(w,mi),Wr=(0,or.Z)(Ce,{value:ae,defaultValue:Ce}),Cn=(0,l.Z)(Wr,2),xn=Cn[0],In=Cn[1],Rn=(0,v.useRef)(null),Gn=v.useState(!1),ti=(0,l.Z)(Gn,2),ii=ti[0],b=ti[1],M=v.useRef(),D=v.useRef(0),P=function(){Rn.current.textArea.focus()};(0,v.useImperativeHandle)(G,function(){return{resizableTextArea:Rn.current,focus:P,blur:function(){Rn.current.textArea.blur()}}});var V=Number(Ze)>0,q=function(Jn){b(!0),M.current=xn,D.current=Jn.currentTarget.selectionStart,Fe==null||Fe(Jn)},be=function(Jn){b(!1);var Sn=Jn.currentTarget.value;if(V){var Xn,ai=D.current>=Ze+1||D.current===((Xn=M.current)===null||Xn===void 0?void 0:Xn.length);Sn=bi(ai,M.current,Sn,Ze)}Sn!==xn&&(In(Sn),oe(Jn.currentTarget,Jn,et,Sn)),it==null||it(Jn)},$e=function(Jn){var Sn=Jn.target.value;if(!ii&&V){var Xn=Jn.target.selectionStart>=Ze+1||Jn.target.selectionStart===Sn.length||!Jn.target.selectionStart;Sn=bi(Xn,xn,Sn,Ze)}In(Sn),oe(Jn.currentTarget,Jn,et,Sn)},_t=function(Jn){var Sn=Sr.onPressEnter,Xn=Sr.onKeyDown;Jn.key==="Enter"&&Sn&&Sn(Jn),Xn==null||Xn(Jn)},Gt=function(Jn){In(""),P(),oe(Rn.current.textArea,Jn,et)},yr=xt(xn);!ii&&V&&ae==null&&(yr=un(yr,Ze));var $r=v.createElement(Ht,{value:yr,allowClear:Ie,handleReset:Gt,suffix:gt,prefixCls:Tt,classes:{affixWrapper:qt==null?void 0:qt.affixWrapper},disabled:gr,style:Xt,inputStyle:{resize:Xt==null?void 0:Xt.resize},inputElement:v.createElement(An,(0,F.Z)({},Sr,{onKeyDown:_t,onChange:$e,onCompositionStart:q,onCompositionEnd:be,className:Te()(Ot?"":rr,qt==null?void 0:qt.textarea),style:!Ot&&Xt,disabled:gr,prefixCls:Tt,ref:Rn}))});if(Ot){var an=(0,ir.Z)(yr).length,Un;return(0,se.Z)(Ot)==="object"?Un=Ot.formatter({value:yr,count:an,maxLength:Ze}):Un="".concat(an).concat(V?" / ".concat(Ze):""),v.createElement("div",{hidden:Sr.hidden,className:Te()("".concat(Tt,"-show-count"),rr,qt==null?void 0:qt.countWrapper),style:Xt,"data-count":Un},$r,v.createElement("span",{className:"".concat(Tt,"-data-count")},Un))}return $r}),ss=ga,To=ss,Ro=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce},ps=(0,v.forwardRef)((w,G)=>{var{prefixCls:Ce,bordered:ae=!0,size:et,disabled:Ie,status:Ze,allowClear:Fe}=w,it=Ro(w,["prefixCls","bordered","size","disabled","status","allowClear"]);const{getPrefixCls:gt,direction:It}=v.useContext(er.E_),Tt=v.useContext(mn.Z),qt=et||Tt,Ot=v.useContext(ol.Z),rr=Ie!=null?Ie:Ot,{status:Xt,hasFeedback:gr,feedbackIcon:Sr}=v.useContext(lo.aM),Wr=(0,Xi.F)(Xt,Ze),Cn=v.useRef(null);v.useImperativeHandle(G,()=>{var ti;return{resizableTextArea:(ti=Cn.current)===null||ti===void 0?void 0:ti.resizableTextArea,focus:ii=>{var b,M;Ds((M=(b=Cn.current)===null||b===void 0?void 0:b.resizableTextArea)===null||M===void 0?void 0:M.textArea,ii)},blur:()=>{var ii;return(ii=Cn.current)===null||ii===void 0?void 0:ii.blur()}}});const xn=gt("input",Ce);let In;typeof Fe=="object"&&(Fe!=null&&Fe.clearIcon)?In=Fe:Fe&&(In={clearIcon:v.createElement(If.Z,null)});const[Rn,Gn]=cf(xn);return Rn(v.createElement(To,Object.assign({},it,{disabled:rr,allowClear:In,classes:{affixWrapper:Te()(`${xn}-textarea-affix-wrapper`,{[`${xn}-affix-wrapper-rtl`]:It==="rtl",[`${xn}-affix-wrapper-borderless`]:!ae,[`${xn}-affix-wrapper-sm`]:qt==="small",[`${xn}-affix-wrapper-lg`]:qt==="large"},(0,Xi.Z)(`${xn}-affix-wrapper`,Wr),Gn),countWrapper:Te()(`${xn}-textarea`,`${xn}-textarea-show-count`,Gn),textarea:Te()({[`${xn}-borderless`]:!ae,[`${xn}-sm`]:qt==="small",[`${xn}-lg`]:qt==="large"},(0,Xi.Z)(xn,Wr),Gn)},prefixCls:xn,suffix:gr&&v.createElement("span",{className:`${xn}-textarea-suffix`},Sr),ref:Cn})))});const zo=lu;zo.Group=mh,zo.Search=Kf,zo.TextArea=ps,zo.Password=Bh;var ks=zo;function xu(w){let{value:G,onChange:Ce,filterSearch:ae,tablePrefixCls:et,locale:Ie}=w;return ae?v.createElement("div",{className:`${et}-filter-dropdown-search`},v.createElement(ks,{prefix:v.createElement(vh.Z,null),placeholder:Ie.filterSearchPlaceholder,onChange:Ce,value:G,htmlSize:1,className:`${et}-filter-dropdown-search-input`})):null}var cu=xu;const tf=w=>{const{keyCode:G}=w;G===Vf.Z.ENTER&&w.stopPropagation()};var ac=w=>v.createElement("div",{className:w.className,onClick:G=>G.stopPropagation(),onKeyDown:tf},w.children);function ll(w){return w.some(G=>{let{children:Ce}=G;return Ce})}function Cu(w,G){return typeof G=="string"||typeof G=="number"?G==null?void 0:G.toString().toLowerCase().includes(w.trim().toLowerCase()):!1}function Sl(w){let{filters:G,prefixCls:Ce,filteredKeys:ae,filterMultiple:et,searchValue:Ie,filterSearch:Ze}=w;return G.map((Fe,it)=>{const gt=String(Fe.value);if(Fe.children)return{key:gt||it,label:Fe.text,popupClassName:`${Ce}-dropdown-submenu`,children:Sl({filters:Fe.children,prefixCls:Ce,filteredKeys:ae,filterMultiple:et,searchValue:Ie,filterSearch:Ze})};const It=et?Hf:Qa.ZP,Tt={key:Fe.value!==void 0?gt:it,label:v.createElement(v.Fragment,null,v.createElement(It,{checked:ae.includes(gt)}),v.createElement("span",null,Fe.text))};return Ie.trim()?typeof Ze=="function"?Ze(Ie,Fe)?Tt:null:Cu(Ie,Fe.text)?Tt:null:Tt})}function Wl(w){var G,Ce;const{tablePrefixCls:ae,prefixCls:et,column:Ie,dropdownPrefixCls:Ze,columnKey:Fe,filterMultiple:it,filterMode:gt="menu",filterSearch:It=!1,filterState:Tt,triggerFilter:qt,locale:Ot,children:rr,getPopupContainer:Xt}=w,{filterDropdownOpen:gr,onFilterDropdownOpenChange:Sr,filterResetToDefaultFilteredValue:Wr,defaultFilteredValue:Cn,filterDropdownVisible:xn,onFilterDropdownVisibleChange:In}=Ie,[Rn,Gn]=v.useState(!1),ti=!!(Tt&&(!((G=Tt.filteredKeys)===null||G===void 0)&&G.length||Tt.forceFiltered)),ii=la=>{Gn(la),Sr==null||Sr(la),In==null||In(la)},b=(Ce=gr!=null?gr:xn)!==null&&Ce!==void 0?Ce:Rn,M=Tt==null?void 0:Tt.filteredKeys,[D,P]=sh(M||[]),V=la=>{let{selectedKeys:Lo}=la;P(Lo)},q=(la,Lo)=>{let{node:Fa,checked:go}=Lo;V(it?{selectedKeys:la}:{selectedKeys:go&&Fa.key?[Fa.key]:[]})};v.useEffect(()=>{Rn&&V({selectedKeys:M||[]})},[M]);const[be,$e]=v.useState([]),_t=la=>{$e(la)},[Gt,yr]=v.useState(""),$r=la=>{const{value:Lo}=la.target;yr(Lo)};v.useEffect(()=>{Rn||yr("")},[Rn]);const an=la=>{const Lo=la&&la.length?la:null;if(Lo===null&&(!Tt||!Tt.filteredKeys)||(0,z.Z)(Lo,Tt==null?void 0:Tt.filteredKeys,!0))return null;qt({column:Ie,key:Fe,filteredKeys:Lo})},Un=()=>{ii(!1),an(D())},ei=function(){let{confirm:la,closeDropdown:Lo}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{confirm:!1,closeDropdown:!1};la&&an([]),Lo&&ii(!1),yr(""),P(Wr?(Cn||[]).map(Fa=>String(Fa)):[])},Jn=function(){let{closeDropdown:la}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0};la&&ii(!1),an(D())},Sn=la=>{la&&M!==void 0&&P(M||[]),ii(la),!la&&!Ie.filterDropdown&&Un()},Xn=Te()({[`${Ze}-menu-without-submenu`]:!ll(Ie.filters||[])}),ai=la=>{if(la.target.checked){const Lo=_h(Ie==null?void 0:Ie.filters).map(Fa=>String(Fa));P(Lo)}else P([])},ln=la=>{let{filters:Lo}=la;return(Lo||[]).map((Fa,go)=>{const Qs=String(Fa.value),e={title:Fa.text,key:Fa.value!==void 0?Qs:go};return Fa.children&&(e.children=ln({filters:Fa.children})),e})},pi=la=>{var Lo;return Object.assign(Object.assign({},la),{text:la.title,value:la.key,children:((Lo=la.children)===null||Lo===void 0?void 0:Lo.map(Fa=>pi(Fa)))||[]})};let gi;if(typeof Ie.filterDropdown=="function")gi=Ie.filterDropdown({prefixCls:`${Ze}-custom`,setSelectedKeys:la=>V({selectedKeys:la}),selectedKeys:D(),confirm:Jn,clearFilters:ei,filters:Ie.filters,visible:b,close:()=>{ii(!1)}});else if(Ie.filterDropdown)gi=Ie.filterDropdown;else{const la=D()||[],Lo=()=>(Ie.filters||[]).length===0?v.createElement(Vl.Z,{image:Vl.Z.PRESENTED_IMAGE_SIMPLE,description:Ot.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}}):gt==="tree"?v.createElement(v.Fragment,null,v.createElement(cu,{filterSearch:It,value:Gt,onChange:$r,tablePrefixCls:ae,locale:Ot}),v.createElement("div",{className:`${ae}-filter-dropdown-tree`},it?v.createElement(Hf,{checked:la.length===_h(Ie.filters).length,indeterminate:la.length>0&&la.length<_h(Ie.filters).length,className:`${ae}-filter-dropdown-checkall`,onChange:ai},Ot.filterCheckall):null,v.createElement(qc,{checkable:!0,selectable:!1,blockNode:!0,multiple:it,checkStrictly:!it,className:`${Ze}-menu`,onCheck:q,checkedKeys:la,selectedKeys:la,showIcon:!1,treeData:ln({filters:Ie.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:Gt.trim()?go=>typeof It=="function"?It(Gt,pi(go)):Cu(Gt,go.title):void 0}))):v.createElement(v.Fragment,null,v.createElement(cu,{filterSearch:It,value:Gt,onChange:$r,tablePrefixCls:ae,locale:Ot}),v.createElement(Ll.Z,{selectable:!0,multiple:it,prefixCls:`${Ze}-menu`,className:Xn,onSelect:V,onDeselect:V,selectedKeys:la,getPopupContainer:Xt,openKeys:be,onOpenChange:_t,items:Sl({filters:Ie.filters||[],filterSearch:It,prefixCls:et,filteredKeys:D(),filterMultiple:it,searchValue:Gt})})),Fa=()=>Wr?(0,z.Z)((Cn||[]).map(go=>String(go)),la,!0):la.length===0;gi=v.createElement(v.Fragment,null,Lo(),v.createElement("div",{className:`${et}-dropdown-btns`},v.createElement($i.ZP,{type:"link",size:"small",disabled:Fa(),onClick:()=>ei()},Ot.filterReset),v.createElement($i.ZP,{type:"primary",size:"small",onClick:Un},Ot.filterConfirm)))}Ie.filterDropdown&&(gi=v.createElement(jh.J,{selectable:void 0},gi));const Li=()=>v.createElement(ac,{className:`${et}-dropdown`},gi);let Ki;typeof Ie.filterIcon=="function"?Ki=Ie.filterIcon(ti):Ie.filterIcon?Ki=Ie.filterIcon:Ki=v.createElement(fa,null);const{direction:ua}=v.useContext(er.E_);return v.createElement("div",{className:`${et}-column`},v.createElement("span",{className:`${ae}-column-title`},rr),v.createElement(fl.Z,{dropdownRender:Li,trigger:["click"],open:b,onOpenChange:Sn,getPopupContainer:Xt,placement:ua==="rtl"?"bottomLeft":"bottomRight"},v.createElement("span",{role:"button",tabIndex:-1,className:Te()(`${et}-trigger`,{active:ti}),onClick:la=>{la.stopPropagation()}},Ki)))}var Pc=Wl;function jc(w,G,Ce){let ae=[];return(w||[]).forEach((et,Ie)=>{var Ze;const Fe=Yh(Ie,Ce);if(et.filters||"filterDropdown"in et||"onFilter"in et)if("filteredValue"in et){let it=et.filteredValue;"filterDropdown"in et||(it=(Ze=it==null?void 0:it.map(String))!==null&&Ze!==void 0?Ze:it),ae.push({column:et,key:xc(et,Fe),filteredKeys:it,forceFiltered:et.filtered})}else ae.push({column:et,key:xc(et,Fe),filteredKeys:G&&et.defaultFilteredValue?et.defaultFilteredValue:void 0,forceFiltered:et.filtered});"children"in et&&(ae=[].concat((0,ir.Z)(ae),(0,ir.Z)(jc(et.children,G,Fe))))}),ae}function hu(w,G,Ce,ae,et,Ie,Ze,Fe){return Ce.map((it,gt)=>{const It=Yh(gt,Fe),{filterMultiple:Tt=!0,filterMode:qt,filterSearch:Ot}=it;let rr=it;if(rr.filters||rr.filterDropdown){const Xt=xc(rr,It),gr=ae.find(Sr=>{let{key:Wr}=Sr;return Xt===Wr});rr=Object.assign(Object.assign({},rr),{title:Sr=>v.createElement(Pc,{tablePrefixCls:w,prefixCls:`${w}-filter`,dropdownPrefixCls:G,column:rr,columnKey:Xt,filterState:gr,filterMultiple:Tt,filterMode:qt,filterSearch:Ot,triggerFilter:Ie,locale:et,getPopupContainer:Ze},Uh(it.title,Sr))})}return"children"in rr&&(rr=Object.assign(Object.assign({},rr),{children:hu(w,G,rr.children,ae,et,Ie,Ze,It)})),rr})}function _h(w){let G=[];return(w||[]).forEach(Ce=>{let{value:ae,children:et}=Ce;G.push(ae),et&&(G=[].concat((0,ir.Z)(G),(0,ir.Z)(_h(et))))}),G}function Oc(w){const G={};return w.forEach(Ce=>{let{key:ae,filteredKeys:et,column:Ie}=Ce;const{filters:Ze,filterDropdown:Fe}=Ie;if(Fe)G[ae]=et||null;else if(Array.isArray(et)){const it=_h(Ze);G[ae]=it.filter(gt=>et.includes(String(gt)))}else G[ae]=null}),G}function ud(w,G){return G.reduce((Ce,ae)=>{const{column:{onFilter:et,filters:Ie},filteredKeys:Ze}=ae;return et&&Ze&&Ze.length?Ce.filter(Fe=>Ze.some(it=>{const gt=_h(Ie),It=gt.findIndex(qt=>String(qt)===String(it)),Tt=It!==-1?gt[It]:it;return et(Tt,Fe)})):Ce},w)}const Hd=w=>w.flatMap(G=>"children"in G?[G].concat((0,ir.Z)(Hd(G.children||[]))):[G]);function Zu(w){let{prefixCls:G,dropdownPrefixCls:Ce,mergedColumns:ae,onFilterChange:et,getPopupContainer:Ie,locale:Ze}=w;const Fe=Hd(ae||[]),[it,gt]=v.useState(()=>jc(Fe,!0)),It=v.useMemo(()=>{const rr=jc(Fe,!1);if(rr.length===0)return rr;let Xt=!0,gr=!0;if(rr.forEach(Sr=>{let{filteredKeys:Wr}=Sr;Wr!==void 0?Xt=!1:gr=!1}),Xt){const Sr=(Fe||[]).map((Wr,Cn)=>xc(Wr,Yh(Cn)));return it.filter(Wr=>{let{key:Cn}=Wr;return Sr.includes(Cn)}).map(Wr=>{const Cn=Fe[Sr.findIndex(xn=>xn===Wr.key)];return Object.assign(Object.assign({},Wr),{column:Object.assign(Object.assign({},Wr.column),Cn),forceFiltered:Cn.filtered})})}return rr},[Fe,it]),Tt=v.useMemo(()=>Oc(It),[It]),qt=rr=>{const Xt=It.filter(gr=>{let{key:Sr}=gr;return Sr!==rr.key});Xt.push(rr),gt(Xt),et(Oc(Xt),Xt)};return[rr=>hu(G,Ce,rr,It,Ze,qt,Ie),It,Tt]}var Sd=Zu;function Hc(w,G,Ce){const ae=v.useRef({});function et(Ie){if(!ae.current||ae.current.data!==w||ae.current.childrenColumnName!==G||ae.current.getRowKey!==Ce){let Fe=function(it){it.forEach((gt,It)=>{const Tt=Ce(gt,It);Ze.set(Tt,gt),gt&&typeof gt=="object"&&G in gt&&Fe(gt[G]||[])})};const Ze=new Map;Fe(w),ae.current={data:w,childrenColumnName:G,kvMap:Ze,getRowKey:Ce}}return ae.current.kvMap.get(Ie)}return[et]}function Nh(){const w=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let G=1;G<arguments.length;G++){const Ce=G<0||arguments.length<=G?void 0:arguments[G];Ce&&Object.keys(Ce).forEach(ae=>{const et=Ce[ae];et!==void 0&&(w[ae]=et)})}return w}var up=Nh,_d=function(w,G){var Ce={};for(var ae in w)Object.prototype.hasOwnProperty.call(w,ae)&&G.indexOf(ae)<0&&(Ce[ae]=w[ae]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,ae=Object.getOwnPropertySymbols(w);et<ae.length;et++)G.indexOf(ae[et])<0&&Object.prototype.propertyIsEnumerable.call(w,ae[et])&&(Ce[ae[et]]=w[ae[et]]);return Ce};const pp=10;function vp(w,G){const Ce={current:w.current,pageSize:w.pageSize};return Object.keys(G&&typeof G=="object"?G:{}).forEach(et=>{const Ie=w[et];typeof Ie!="function"&&(Ce[et]=Ie)}),Ce}function mp(w,G,Ce){const ae=G&&typeof G=="object"?G:{},{total:et=0}=ae,Ie=_d(ae,["total"]),[Ze,Fe]=(0,v.useState)(()=>({current:"defaultCurrent"in Ie?Ie.defaultCurrent:1,pageSize:"defaultPageSize"in Ie?Ie.defaultPageSize:pp})),it=up(Ze,Ie,{total:et>0?et:w}),gt=Math.ceil((et||w)/it.pageSize);it.current>gt&&(it.current=gt||1);const It=(qt,Ot)=>{Fe({current:qt!=null?qt:1,pageSize:Ot||it.pageSize})},Tt=(qt,Ot)=>{var rr;G&&((rr=G.onChange)===null||rr===void 0||rr.call(G,qt,Ot)),It(qt,Ot),Ce(qt,Ot||(it==null?void 0:it.pageSize))};return G===!1?[{},()=>{}]:[Object.assign(Object.assign({},it),{onChange:Tt}),It]}var Cd=m(55047);const ld={},gp="SELECT_ALL",Ah="SELECT_INVERT",Dd="SELECT_NONE",xd=[];function wd(w,G){let Ce=[];return(G||[]).forEach(ae=>{Ce.push(ae),ae&&typeof ae=="object"&&w in ae&&(Ce=[].concat((0,ir.Z)(Ce),(0,ir.Z)(wd(w,ae[w]))))}),Ce}function vl(w,G){const{preserveSelectedRowKeys:Ce,selectedRowKeys:ae,defaultSelectedRowKeys:et,getCheckboxProps:Ie,onChange:Ze,onSelect:Fe,onSelectAll:it,onSelectInvert:gt,onSelectNone:It,onSelectMultiple:Tt,columnWidth:qt,type:Ot,selections:rr,fixed:Xt,renderCell:gr,hideSelectAll:Sr,checkStrictly:Wr=!0}=w||{},{prefixCls:Cn,data:xn,pageData:In,getRecordByKey:Rn,getRowKey:Gn,expandType:ti,childrenColumnName:ii,locale:b,getPopupContainer:M}=G,[D,P]=(0,or.Z)(ae||et||xd,{value:ae}),V=v.useRef(new Map),q=(0,v.useCallback)(pi=>{if(Ce){const gi=new Map;pi.forEach(Li=>{let Ki=Rn(Li);!Ki&&V.current.has(Li)&&(Ki=V.current.get(Li)),gi.set(Li,Ki)}),V.current=gi}},[Rn,Ce]);v.useEffect(()=>{q(D)},[D]);const{keyEntities:be}=(0,v.useMemo)(()=>Wr?{keyEntities:null}:Vh(xn,{externalGetKey:Gn,childrenPropName:ii}),[xn,Gn,Wr,ii]),$e=(0,v.useMemo)(()=>wd(ii,In),[In,ii]),_t=(0,v.useMemo)(()=>{const pi=new Map;return $e.forEach((gi,Li)=>{const Ki=Gn(gi,Li),ua=(Ie?Ie(gi):null)||{};pi.set(Ki,ua)}),pi},[$e,Gn,Ie]),Gt=(0,v.useCallback)(pi=>{var gi;return!!(!((gi=_t.get(Gn(pi)))===null||gi===void 0)&&gi.disabled)},[_t,Gn]),[yr,$r]=(0,v.useMemo)(()=>{if(Wr)return[D||[],[]];const{checkedKeys:pi,halfCheckedKeys:gi}=Y(D,!0,be,Gt);return[pi||[],gi]},[D,Wr,be,Gt]),an=(0,v.useMemo)(()=>{const pi=Ot==="radio"?yr.slice(0,1):yr;return new Set(pi)},[yr,Ot]),Un=(0,v.useMemo)(()=>Ot==="radio"?new Set:new Set($r),[$r,Ot]),[ei,Jn]=(0,v.useState)(null);v.useEffect(()=>{w||P(xd)},[!!w]);const Sn=(0,v.useCallback)((pi,gi)=>{let Li,Ki;q(pi),Ce?(Li=pi,Ki=pi.map(ua=>V.current.get(ua))):(Li=[],Ki=[],pi.forEach(ua=>{const la=Rn(ua);la!==void 0&&(Li.push(ua),Ki.push(la))})),P(Li),Ze==null||Ze(Li,Ki,{type:gi})},[P,Rn,Ze,Ce]),Xn=(0,v.useCallback)((pi,gi,Li,Ki)=>{if(Fe){const ua=Li.map(la=>Rn(la));Fe(Rn(pi),gi,ua,Ki)}Sn(Li,"single")},[Fe,Rn,Sn]),ai=(0,v.useMemo)(()=>!rr||Sr?null:(rr===!0?[gp,Ah,Dd]:rr).map(gi=>gi===gp?{key:"all",text:b.selectionAll,onSelect(){Sn(xn.map((Li,Ki)=>Gn(Li,Ki)).filter(Li=>{const Ki=_t.get(Li);return!(Ki!=null&&Ki.disabled)||an.has(Li)}),"all")}}:gi===Ah?{key:"invert",text:b.selectInvert,onSelect(){const Li=new Set(an);In.forEach((ua,la)=>{const Lo=Gn(ua,la),Fa=_t.get(Lo);Fa!=null&&Fa.disabled||(Li.has(Lo)?Li.delete(Lo):Li.add(Lo))});const Ki=Array.from(Li);gt&&gt(Ki),Sn(Ki,"invert")}}:gi===Dd?{key:"none",text:b.selectNone,onSelect(){It==null||It(),Sn(Array.from(an).filter(Li=>{const Ki=_t.get(Li);return Ki==null?void 0:Ki.disabled}),"none")}}:gi).map(gi=>Object.assign(Object.assign({},gi),{onSelect:function(){for(var Li,Ki,ua=arguments.length,la=new Array(ua),Lo=0;Lo<ua;Lo++)la[Lo]=arguments[Lo];(Ki=gi.onSelect)===null||Ki===void 0||(Li=Ki).call.apply(Li,[gi].concat(la)),Jn(null)}})),[rr,an,In,Gn,gt,Sn]);return[(0,v.useCallback)(pi=>{var gi;if(!w)return pi.filter(Q=>Q!==ld);let Li=(0,ir.Z)(pi);const Ki=new Set(an),ua=$e.map(Gn).filter(Q=>!_t.get(Q).disabled),la=ua.every(Q=>Ki.has(Q)),Lo=ua.some(Q=>Ki.has(Q)),Fa=()=>{const Q=[];la?ua.forEach(tt=>{Ki.delete(tt),Q.push(tt)}):ua.forEach(tt=>{Ki.has(tt)||(Ki.add(tt),Q.push(tt))});const ge=Array.from(Ki);it==null||it(!la,ge.map(tt=>Rn(tt)),Q.map(tt=>Rn(tt))),Sn(ge,"all"),Jn(null)};let go;if(Ot!=="radio"){let Q;if(ai){const Jt={getPopupContainer:M,items:ai.map((dr,Cr)=>{const{key:tn,text:rn,onSelect:yn}=dr;return{key:tn||Cr,onClick:()=>{yn==null||yn(ua)},label:rn}})};Q=v.createElement("div",{className:`${Cn}-selection-extra`},v.createElement(fl.Z,{menu:Jt,getPopupContainer:M},v.createElement("span",null,v.createElement(Cd.Z,null))))}const ge=$e.map((Jt,dr)=>{const Cr=Gn(Jt,dr),tn=_t.get(Cr)||{};return Object.assign({checked:Ki.has(Cr)},tn)}).filter(Jt=>{let{disabled:dr}=Jt;return dr}),tt=!!ge.length&&ge.length===$e.length,Rt=tt&&ge.every(Jt=>{let{checked:dr}=Jt;return dr}),Ft=tt&&ge.some(Jt=>{let{checked:dr}=Jt;return dr});go=!Sr&&v.createElement("div",{className:`${Cn}-selection`},v.createElement(Hf,{checked:tt?Rt:!!$e.length&&la,indeterminate:tt?!Rt&&Ft:!la&&Lo,onChange:Fa,disabled:$e.length===0||tt,"aria-label":Q?"Custom selection":"Select all",skipGroup:!0}),Q)}let Qs;Ot==="radio"?Qs=(Q,ge,tt)=>{const Rt=Gn(ge,tt),Ft=Ki.has(Rt);return{node:v.createElement(Qa.ZP,Object.assign({},_t.get(Rt),{checked:Ft,onClick:Jt=>Jt.stopPropagation(),onChange:Jt=>{Ki.has(Rt)||Xn(Rt,!0,[Rt],Jt.nativeEvent)}})),checked:Ft}}:Qs=(Q,ge,tt)=>{var Rt;const Ft=Gn(ge,tt),Jt=Ki.has(Ft),dr=Un.has(Ft),Cr=_t.get(Ft);let tn;return ti==="nest"?tn=dr:tn=(Rt=Cr==null?void 0:Cr.indeterminate)!==null&&Rt!==void 0?Rt:dr,{node:v.createElement(Hf,Object.assign({},Cr,{indeterminate:tn,checked:Jt,skipGroup:!0,onClick:rn=>rn.stopPropagation(),onChange:rn=>{let{nativeEvent:yn}=rn;const{shiftKey:vn}=yn;let $n=-1,ri=-1;if(vn&&Wr){const _i=new Set([ei,Ft]);ua.some((xi,Ii)=>{if(_i.has(xi))if($n===-1)$n=Ii;else return ri=Ii,!0;return!1})}if(ri!==-1&&$n!==ri&&Wr){const _i=ua.slice($n,ri+1),xi=[];Jt?_i.forEach(ta=>{Ki.has(ta)&&(xi.push(ta),Ki.delete(ta))}):_i.forEach(ta=>{Ki.has(ta)||(xi.push(ta),Ki.add(ta))});const Ii=Array.from(Ki);Tt==null||Tt(!Jt,Ii.map(ta=>Rn(ta)),xi.map(ta=>Rn(ta))),Sn(Ii,"multiple")}else{const _i=yr;if(Wr){const xi=Jt?fc(_i,Ft):oo(_i,Ft);Xn(Ft,!Jt,xi,yn)}else{const xi=Y([].concat((0,ir.Z)(_i),[Ft]),!0,be,Gt),{checkedKeys:Ii,halfCheckedKeys:ta}=xi;let Qi=Ii;if(Jt){const ja=new Set(Ii);ja.delete(Ft),Qi=Y(Array.from(ja),{checked:!1,halfCheckedKeys:ta},be,Gt).checkedKeys}Xn(Ft,!Jt,Qi,yn)}}Jn(Jt?null:Ft)}})),checked:Jt}};const e=(Q,ge,tt)=>{const{node:Rt,checked:Ft}=Qs(Q,ge,tt);return gr?gr(Ft,ge,tt,Rt):Rt};if(!Li.includes(ld))if(Li.findIndex(Q=>{var ge;return((ge=Q[X])===null||ge===void 0?void 0:ge.columnType)==="EXPAND_COLUMN"})===0){const[Q,...ge]=Li;Li=[Q,ld].concat((0,ir.Z)(ge))}else Li=[ld].concat((0,ir.Z)(Li));const i=Li.indexOf(ld);Li=Li.filter((Q,ge)=>Q!==ld||ge===i);const c=Li[i-1],y=Li[i+1];let I=Xt;I===void 0&&((y==null?void 0:y.fixed)!==void 0?I=y.fixed:(c==null?void 0:c.fixed)!==void 0&&(I=c.fixed)),I&&c&&((gi=c[X])===null||gi===void 0?void 0:gi.columnType)==="EXPAND_COLUMN"&&c.fixed===void 0&&(c.fixed=I);const H={fixed:I,width:qt,className:`${Cn}-selection-column`,title:w.columnTitle||go,render:e,[X]:{className:`${Cn}-selection-col`}};return Li.map(Q=>Q===ld?H:Q)},[Gn,$e,w,yr,an,Un,qt,ai,ti,ei,_t,Tt,Xn,Gt]),an]}var kd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},Fs=kd,cd=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:Fs}))};cd.displayName="CaretDownOutlined";var Vd=v.forwardRef(cd),Gd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},jt=Gd,Vr=function(G,Ce){return v.createElement(pn.Z,(0,qe.Z)((0,qe.Z)({},G),{},{ref:Ce,icon:jt}))};Vr.displayName="CaretUpOutlined";var Ln=v.forwardRef(Vr),Ci=m(15335);const aa="ascend",Ai="descend";function Gi(w){return typeof w.sorter=="object"&&typeof w.sorter.multiple=="number"?w.sorter.multiple:!1}function Ea(w){return typeof w=="function"?w:w&&typeof w=="object"&&w.compare?w.compare:!1}function Pa(w,G){return G?w[w.indexOf(G)+1]:w[0]}function Ra(w,G,Ce){let ae=[];function et(Ie,Ze){ae.push({column:Ie,key:xc(Ie,Ze),multiplePriority:Gi(Ie),sortOrder:Ie.sortOrder})}return(w||[]).forEach((Ie,Ze)=>{const Fe=Yh(Ze,Ce);Ie.children?("sortOrder"in Ie&&et(Ie,Fe),ae=[].concat((0,ir.Z)(ae),(0,ir.Z)(Ra(Ie.children,G,Fe)))):Ie.sorter&&("sortOrder"in Ie?et(Ie,Fe):G&&Ie.defaultSortOrder&&ae.push({column:Ie,key:xc(Ie,Fe),multiplePriority:Gi(Ie),sortOrder:Ie.defaultSortOrder}))}),ae}function Za(w,G,Ce,ae,et,Ie,Ze,Fe){return(G||[]).map((it,gt)=>{const It=Yh(gt,Fe);let Tt=it;if(Tt.sorter){const qt=Tt.sortDirections||et,Ot=Tt.showSorterTooltip===void 0?Ze:Tt.showSorterTooltip,rr=xc(Tt,It),Xt=Ce.find(ii=>{let{key:b}=ii;return b===rr}),gr=Xt?Xt.sortOrder:null,Sr=Pa(qt,gr),Wr=qt.includes(aa)&&v.createElement(Ln,{className:Te()(`${w}-column-sorter-up`,{active:gr===aa})}),Cn=qt.includes(Ai)&&v.createElement(Vd,{className:Te()(`${w}-column-sorter-down`,{active:gr===Ai})}),{cancelSort:xn,triggerAsc:In,triggerDesc:Rn}=Ie||{};let Gn=xn;Sr===Ai?Gn=Rn:Sr===aa&&(Gn=In);const ti=typeof Ot=="object"?Ot:{title:Gn};Tt=Object.assign(Object.assign({},Tt),{className:Te()(Tt.className,{[`${w}-column-sort`]:gr}),title:ii=>{const b=v.createElement("div",{className:`${w}-column-sorters`},v.createElement("span",{className:`${w}-column-title`},Uh(it.title,ii)),v.createElement("span",{className:Te()(`${w}-column-sorter`,{[`${w}-column-sorter-full`]:!!(Wr&&Cn)})},v.createElement("span",{className:`${w}-column-sorter-inner`,"aria-hidden":"true"},Wr,Cn)));return Ot?v.createElement(Ci.Z,Object.assign({},ti),b):b},onHeaderCell:ii=>{const b=it.onHeaderCell&&it.onHeaderCell(ii)||{},M=b.onClick,D=b.onKeyDown;b.onClick=q=>{ae({column:it,key:rr,sortOrder:Sr,multiplePriority:Gi(it)}),M==null||M(q)},b.onKeyDown=q=>{q.keyCode===Vf.Z.ENTER&&(ae({column:it,key:rr,sortOrder:Sr,multiplePriority:Gi(it)}),D==null||D(q))};const P=Gc(it.title,{}),V=P==null?void 0:P.toString();return gr?b["aria-sort"]=gr==="ascend"?"ascending":"descending":b["aria-label"]=V||"",b.className=Te()(b.className,`${w}-column-has-sorters`),b.tabIndex=0,it.ellipsis&&(b.title=(P!=null?P:"").toString()),b}})}return"children"in Tt&&(Tt=Object.assign(Object.assign({},Tt),{children:Za(w,Tt.children,Ce,ae,et,Ie,Ze,It)})),Tt})}function Ha(w){const{column:G,sortOrder:Ce}=w;return{column:G,order:Ce,field:G.dataIndex,columnKey:G.key}}function $a(w){const G=w.filter(Ce=>{let{sortOrder:ae}=Ce;return ae}).map(Ha);return G.length===0&&w.length?Object.assign(Object.assign({},Ha(w[w.length-1])),{column:void 0}):G.length<=1?G[0]||{}:G}function ya(w,G,Ce){const ae=G.slice().sort((Ze,Fe)=>Fe.multiplePriority-Ze.multiplePriority),et=w.slice(),Ie=ae.filter(Ze=>{let{column:{sorter:Fe},sortOrder:it}=Ze;return Ea(Fe)&&it});return Ie.length?et.sort((Ze,Fe)=>{for(let it=0;it<Ie.length;it+=1){const gt=Ie[it],{column:{sorter:It},sortOrder:Tt}=gt,qt=Ea(It);if(qt&&Tt){const Ot=qt(Ze,Fe,Tt);if(Ot!==0)return Tt===aa?Ot:-Ot}}return 0}).map(Ze=>{const Fe=Ze[Ce];return Fe?Object.assign(Object.assign({},Ze),{[Ce]:ya(Fe,G,Ce)}):Ze}):et}function Ua(w){let{prefixCls:G,mergedColumns:Ce,onSorterChange:ae,sortDirections:et,tableLocale:Ie,showSorterTooltip:Ze}=w;const[Fe,it]=v.useState(Ra(Ce,!0)),gt=v.useMemo(()=>{let rr=!0;const Xt=Ra(Ce,!1);if(!Xt.length)return Fe;const gr=[];function Sr(Cn){rr?gr.push(Cn):gr.push(Object.assign(Object.assign({},Cn),{sortOrder:null}))}let Wr=null;return Xt.forEach(Cn=>{Wr===null?(Sr(Cn),Cn.sortOrder&&(Cn.multiplePriority===!1?rr=!1:Wr=!0)):(Wr&&Cn.multiplePriority!==!1||(rr=!1),Sr(Cn))}),gr},[Ce,Fe]),It=v.useMemo(()=>{const rr=gt.map(Xt=>{let{column:gr,sortOrder:Sr}=Xt;return{column:gr,order:Sr}});return{sortColumns:rr,sortColumn:rr[0]&&rr[0].column,sortOrder:rr[0]&&rr[0].order}},[gt]);function Tt(rr){let Xt;rr.multiplePriority===!1||!gt.length||gt[0].multiplePriority===!1?Xt=[rr]:Xt=[].concat((0,ir.Z)(gt.filter(gr=>{let{key:Sr}=gr;return Sr!==rr.key})),[rr]),it(Xt),ae($a(Xt),Xt)}return[rr=>Za(G,rr,gt,Tt,et,Ie,Ze),gt,It,()=>$a(gt)]}function ui(w,G){return w.map(Ce=>{const ae=Object.assign({},Ce);return ae.title=Uh(Ce.title,G),"children"in ae&&(ae.children=ui(ae.children,G)),ae})}function Ni(w){return[v.useCallback(Ce=>ui(Ce,w),[w])]}var La=lr((w,G)=>{const{_renderTimes:Ce}=w,{_renderTimes:ae}=G;return Ce!==ae}),Ya=m(10274),Ga=w=>{const{componentCls:G}=w,Ce=`${w.lineWidth}px ${w.lineType} ${w.tableBorderColor}`,ae=(et,Ie,Ze)=>({[`&${G}-${et}`]:{[`> ${G}-container`]:{[`> ${G}-content, > ${G}-body`]:{"> table > tbody > tr > td":{[`> ${G}-expanded-row-fixed`]:{margin:`-${Ie}px -${Ze+w.lineWidth}px`}}}}}});return{[`${G}-wrapper`]:{[`${G}${G}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${G}-title`]:{border:Ce,borderBottom:0},[`> ${G}-container`]:{borderInlineStart:Ce,[`
            > ${G}-content,
            > ${G}-header,
            > ${G}-body,
            > ${G}-summary
          `]:{"> table":{[`
                > thead > tr > th,
                > tbody > tr > td,
                > tfoot > tr > th,
                > tfoot > tr > td
              `]:{borderInlineEnd:Ce},"> thead":{"> tr:not(:last-child) > th":{borderBottom:Ce},"> tr > th::before":{backgroundColor:"transparent !important"}},[`
                > thead > tr,
                > tbody > tr,
                > tfoot > tr
              `]:{[`> ${G}-cell-fix-right-first::after`]:{borderInlineEnd:Ce}},"> tbody > tr > td":{[`> ${G}-expanded-row-fixed`]:{margin:`-${w.tablePaddingVertical}px -${w.tablePaddingHorizontal+w.lineWidth}px`,"&::after":{position:"absolute",top:0,insetInlineEnd:w.lineWidth,bottom:0,borderInlineEnd:Ce,content:'""'}}}}},[`
            > ${G}-content,
            > ${G}-header
          `]:{"> table":{borderTop:Ce}}},[`&${G}-scroll-horizontal`]:{[`> ${G}-container > ${G}-body`]:{"> table > tbody":{[`
                > tr${G}-expanded-row,
                > tr${G}-placeholder
              `]:{"> td":{borderInlineEnd:0}}}}}},ae("middle",w.tablePaddingVerticalMiddle,w.tablePaddingHorizontalMiddle)),ae("small",w.tablePaddingVerticalSmall,w.tablePaddingHorizontalSmall)),{[`> ${G}-footer`]:{border:Ce,borderTop:0}}),[`${G}-cell`]:{[`${G}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${w.lineWidth}px 0 ${w.lineWidth}px ${w.tableHeaderBg}`}}}}},xs=w=>{const{componentCls:G}=w;return{[`${G}-wrapper`]:{[`${G}-cell-ellipsis`]:Object.assign(Object.assign({},bs.vS),{wordBreak:"keep-all",[`
          &${G}-cell-fix-left-last,
          &${G}-cell-fix-right-first
        `]:{overflow:"visible",[`${G}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${G}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},sa=w=>{const{componentCls:G}=w;return{[`${G}-wrapper`]:{[`${G}-tbody > tr${G}-placeholder`]:{textAlign:"center",color:w.colorTextDisabled,"&:hover > td":{background:w.colorBgContainer}}}}};const Zo=w=>({color:w.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${w.motionDurationSlow}`,"&:focus, &:hover":{color:w.colorLinkHover},"&:active":{color:w.colorLinkActive}});var Oa=w=>{const{componentCls:G,antCls:Ce,controlInteractiveSize:ae,motionDurationSlow:et,lineWidth:Ie,paddingXS:Ze,lineType:Fe,tableBorderColor:it,tableExpandIconBg:gt,tableExpandColumnWidth:It,borderRadius:Tt,fontSize:qt,fontSizeSM:Ot,lineHeight:rr,tablePaddingVertical:Xt,tablePaddingHorizontal:gr,tableExpandedRowBg:Sr,paddingXXS:Wr}=w,Cn=ae/2-Ie,xn=Cn*2+Ie*3,In=`${Ie}px ${Fe} ${it}`,Rn=Wr-Ie;return{[`${G}-wrapper`]:{[`${G}-expand-icon-col`]:{width:It},[`${G}-row-expand-icon-cell`]:{textAlign:"center",[`${G}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${G}-row-indent`]:{height:1,float:"left"},[`${G}-row-expand-icon`]:Object.assign(Object.assign({},Zo(w)),{position:"relative",float:"left",boxSizing:"border-box",width:xn,height:xn,padding:0,color:"inherit",lineHeight:`${xn}px`,background:gt,border:In,borderRadius:Tt,transform:`scale(${ae/xn})`,transition:`all ${et}`,userSelect:"none",["&:focus, &:hover, &:active"]:{borderColor:"currentcolor"},["&::before, &::after"]:{position:"absolute",background:"currentcolor",transition:`transform ${et} ease-out`,content:'""'},"&::before":{top:Cn,insetInlineEnd:Rn,insetInlineStart:Rn,height:Ie},"&::after":{top:Rn,bottom:Rn,insetInlineStart:Cn,width:Ie,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${G}-row-indent + ${G}-row-expand-icon`]:{marginTop:(qt*rr-Ie*3)/2-Math.ceil((Ot*1.4-Ie*3)/2),marginInlineEnd:Ze},[`tr${G}-expanded-row`]:{"&, &:hover":{"> td":{background:Sr}},[`${Ce}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"auto"}}},[`${G}-expanded-row-fixed`]:{position:"relative",margin:`-${Xt}px -${gr}px`,padding:`${Xt}px ${gr}px`}}}},Ia=w=>{const{componentCls:G,antCls:Ce,iconCls:ae,tableFilterDropdownWidth:et,tableFilterDropdownSearchWidth:Ie,paddingXXS:Ze,paddingXS:Fe,colorText:it,lineWidth:gt,lineType:It,tableBorderColor:Tt,tableHeaderIconColor:qt,fontSizeSM:Ot,tablePaddingHorizontal:rr,borderRadius:Xt,motionDurationSlow:gr,colorTextDescription:Sr,colorPrimary:Wr,tableHeaderFilterActiveBg:Cn,colorTextDisabled:xn,tableFilterDropdownBg:In,tableFilterDropdownHeight:Rn,controlItemBgHover:Gn,controlItemBgActive:ti,boxShadowSecondary:ii}=w,b=`${Ce}-dropdown`,M=`${G}-filter-dropdown`,D=`${Ce}-tree`,P=`${gt}px ${It} ${Tt}`;return[{[`${G}-wrapper`]:{[`${G}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${G}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:-Ze,marginInline:`${Ze}px ${-rr/2}px`,padding:`0 ${Ze}px`,color:qt,fontSize:Ot,borderRadius:Xt,cursor:"pointer",transition:`all ${gr}`,"&:hover":{color:Sr,background:Cn},"&.active":{color:Wr}}}},{[`${Ce}-dropdown`]:{[M]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{minWidth:et,backgroundColor:In,borderRadius:Xt,boxShadow:ii,[`${b}-menu`]:{maxHeight:Rn,overflowX:"hidden",border:0,boxShadow:"none","&:empty::after":{display:"block",padding:`${Fe}px 0`,color:xn,fontSize:Ot,textAlign:"center",content:'"Not Found"'}},[`${M}-tree`]:{paddingBlock:`${Fe}px 0`,paddingInline:Fe,[D]:{padding:0},[`${D}-treenode ${D}-node-content-wrapper:hover`]:{backgroundColor:Gn},[`${D}-treenode-checkbox-checked ${D}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:ti}}},[`${M}-search`]:{padding:Fe,borderBottom:P,"&-input":{input:{minWidth:Ie},[ae]:{color:xn}}},[`${M}-checkall`]:{width:"100%",marginBottom:Ze,marginInlineStart:Ze},[`${M}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${Fe-gt}px ${Fe}px`,overflow:"hidden",borderTop:P}})}},{[`${Ce}-dropdown ${M}, ${M}-submenu`]:{[`${Ce}-checkbox-wrapper + span`]:{paddingInlineStart:Fe,color:it},["> ul"]:{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},Bs=w=>{const{componentCls:G,lineWidth:Ce,colorSplit:ae,motionDurationSlow:et,zIndexTableFixed:Ie,tableBg:Ze,zIndexTableSticky:Fe}=w,it=ae;return{[`${G}-wrapper`]:{[`
        ${G}-cell-fix-left,
        ${G}-cell-fix-right
      `]:{position:"sticky !important",zIndex:Ie,background:Ze},[`
        ${G}-cell-fix-left-first::after,
        ${G}-cell-fix-left-last::after
      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:-Ce,width:30,transform:"translateX(100%)",transition:`box-shadow ${et}`,content:'""',pointerEvents:"none"},[`${G}-cell-fix-left-all::after`]:{display:"none"},[`
        ${G}-cell-fix-right-first::after,
        ${G}-cell-fix-right-last::after
      `]:{position:"absolute",top:0,bottom:-Ce,left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${et}`,content:'""',pointerEvents:"none"},[`${G}-container`]:{"&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:Fe+1,width:30,transition:`box-shadow ${et}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${G}-ping-left`]:{[`&:not(${G}-has-fix-left) ${G}-container`]:{position:"relative","&::before":{boxShadow:`inset 10px 0 8px -8px ${it}`}},[`
          ${G}-cell-fix-left-first::after,
          ${G}-cell-fix-left-last::after
        `]:{boxShadow:`inset 10px 0 8px -8px ${it}`},[`${G}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${G}-ping-right`]:{[`&:not(${G}-has-fix-right) ${G}-container`]:{position:"relative","&::after":{boxShadow:`inset -10px 0 8px -8px ${it}`}},[`
          ${G}-cell-fix-right-first::after,
          ${G}-cell-fix-right-last::after
        `]:{boxShadow:`inset -10px 0 8px -8px ${it}`}}}}},yo=w=>{const{componentCls:G,antCls:Ce}=w;return{[`${G}-wrapper`]:{[`${G}-pagination${Ce}-pagination`]:{margin:`${w.margin}px 0`},[`${G}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:w.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}},zs=w=>{const{componentCls:G,tableRadius:Ce}=w;return{[`${G}-wrapper`]:{[G]:{[`${G}-title, ${G}-header`]:{borderRadius:`${Ce}px ${Ce}px 0 0`},[`${G}-title + ${G}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,table:{borderRadius:0,"> thead > tr:first-child":{"th:first-child":{borderRadius:0},"th:last-child":{borderRadius:0}}}},"&-container":{borderStartStartRadius:Ce,borderStartEndRadius:Ce,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:Ce},"> *:last-child":{borderStartEndRadius:Ce}}},"&-footer":{borderRadius:`0 0 ${Ce}px ${Ce}px`}}}}},Gu=w=>{const{componentCls:G}=w;return{[`${G}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${G}-pagination-left`]:{justifyContent:"flex-end"},[`${G}-pagination-right`]:{justifyContent:"flex-start"},[`${G}-row-expand-icon`]:{"&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${G}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"}}}}},Au=w=>{const{componentCls:G,antCls:Ce,iconCls:ae,fontSizeIcon:et,paddingXS:Ie,tableHeaderIconColor:Ze,tableHeaderIconColorHover:Fe}=w;return{[`${G}-wrapper`]:{[`${G}-selection-col`]:{width:w.tableSelectionColumnWidth},[`${G}-bordered ${G}-selection-col`]:{width:w.tableSelectionColumnWidth+Ie*2},[`
        table tr th${G}-selection-column,
        table tr td${G}-selection-column
      `]:{paddingInlineEnd:w.paddingXS,paddingInlineStart:w.paddingXS,textAlign:"center",[`${Ce}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${G}-selection-column${G}-cell-fix-left`]:{zIndex:w.zIndexTableFixed+1},[`table tr th${G}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${G}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${G}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${w.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:`${w.tablePaddingHorizontal/4}px`,[ae]:{color:Ze,fontSize:et,verticalAlign:"baseline","&:hover":{color:Fe}}}}}},Xl=w=>{const{componentCls:G}=w,Ce=(ae,et,Ie,Ze)=>({[`${G}${G}-${ae}`]:{fontSize:Ze,[`
        ${G}-title,
        ${G}-footer,
        ${G}-thead > tr > th,
        ${G}-tbody > tr > td,
        tfoot > tr > th,
        tfoot > tr > td
      `]:{padding:`${et}px ${Ie}px`},[`${G}-filter-trigger`]:{marginInlineEnd:`-${Ie/2}px`},[`${G}-expanded-row-fixed`]:{margin:`-${et}px -${Ie}px`},[`${G}-tbody`]:{[`${G}-wrapper:only-child ${G}`]:{marginBlock:`-${et}px`,marginInline:`${w.tableExpandColumnWidth-Ie}px -${Ie}px`}},[`${G}-selection-column`]:{paddingInlineStart:`${Ie/4}px`}}});return{[`${G}-wrapper`]:Object.assign(Object.assign({},Ce("middle",w.tablePaddingVerticalMiddle,w.tablePaddingHorizontalMiddle,w.tableFontSizeMiddle)),Ce("small",w.tablePaddingVerticalSmall,w.tablePaddingHorizontalSmall,w.tableFontSizeSmall))}},Cl=w=>{const{componentCls:G,marginXXS:Ce,fontSizeIcon:ae,tableHeaderIconColor:et,tableHeaderIconColorHover:Ie}=w;return{[`${G}-wrapper`]:{[`${G}-thead th${G}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${w.motionDurationSlow}`,"&:hover":{background:w.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:w.colorPrimary},[`
          &${G}-cell-fix-left:hover,
          &${G}-cell-fix-right:hover
        `]:{background:w.tableFixedHeaderSortActiveBg}},[`${G}-thead th${G}-column-sort`]:{background:w.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${G}-column-sort`]:{background:w.tableBodySortBg},[`${G}-column-title`]:{position:"relative",zIndex:1,flex:1},[`${G}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${G}-column-sorter`]:{marginInlineStart:Ce,color:et,fontSize:0,transition:`color ${w.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:ae,"&.active":{color:w.colorPrimary}},[`${G}-column-sorter-up + ${G}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${G}-column-sorters:hover ${G}-column-sorter`]:{color:Ie}}}},mf=w=>{const{componentCls:G,opacityLoading:Ce,tableScrollThumbBg:ae,tableScrollThumbBgHover:et,tableScrollThumbSize:Ie,tableScrollBg:Ze,zIndexTableSticky:Fe}=w,it=`${w.lineWidth}px ${w.lineType} ${w.tableBorderColor}`;return{[`${G}-wrapper`]:{[`${G}-sticky`]:{"&-holder":{position:"sticky",zIndex:Fe,background:w.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${Ie}px !important`,zIndex:Fe,display:"flex",alignItems:"center",background:Ze,borderTop:it,opacity:Ce,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:Ie,backgroundColor:ae,borderRadius:100,transition:`all ${w.motionDurationSlow}, transform none`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:et}}}}}}},pc=w=>{const{componentCls:G,lineWidth:Ce,tableBorderColor:ae}=w,et=`${Ce}px ${w.lineType} ${ae}`;return{[`${G}-wrapper`]:{[`${G}-summary`]:{position:"relative",zIndex:w.zIndexTableFixed,background:w.tableBg,"> tr":{"> th, > td":{borderBottom:et}}},[`div${G}-summary`]:{boxShadow:`0 -${Ce}px 0 ${ae}`}}}};const fu=w=>{const{componentCls:G,fontWeightStrong:Ce,tablePaddingVertical:ae,tablePaddingHorizontal:et,lineWidth:Ie,lineType:Ze,tableBorderColor:Fe,tableFontSize:it,tableBg:gt,tableRadius:It,tableHeaderTextColor:Tt,motionDurationMid:qt,tableHeaderBg:Ot,tableHeaderCellSplitColor:rr,tableRowHoverBg:Xt,tableSelectedRowBg:gr,tableSelectedRowHoverBg:Sr,tableFooterTextColor:Wr,tableFooterBg:Cn,paddingContentVerticalLG:xn}=w,In=`${Ie}px ${Ze} ${Fe}`;return{[`${G}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},(0,bs.dF)()),{[G]:Object.assign(Object.assign({},(0,bs.Wf)(w)),{fontSize:it,background:gt,borderRadius:`${It}px ${It}px 0 0`}),table:{width:"100%",textAlign:"start",borderRadius:`${It}px ${It}px 0 0`,borderCollapse:"separate",borderSpacing:0},[`
          ${G}-thead > tr > th,
          ${G}-tbody > tr > td,
          tfoot > tr > th,
          tfoot > tr > td
        `]:{position:"relative",padding:`${xn}px ${et}px`,overflowWrap:"break-word"},[`${G}-title`]:{padding:`${ae}px ${et}px`},[`${G}-thead`]:{[`
          > tr > th,
          > tr > td
        `]:{position:"relative",color:Tt,fontWeight:Ce,textAlign:"start",background:Ot,borderBottom:In,transition:`background ${qt} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${G}-selection-column):not(${G}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:rr,transform:"translateY(-50%)",transition:`background-color ${qt}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${G}-tbody`]:{"> tr":{"> td":{transition:`background ${qt}, border-color ${qt}`,borderBottom:In,[`
              > ${G}-wrapper:only-child,
              > ${G}-expanded-row-fixed > ${G}-wrapper:only-child
            `]:{[G]:{marginBlock:`-${ae}px`,marginInline:`${w.tableExpandColumnWidth-et}px -${et}px`,[`${G}-tbody > tr:last-child > td`]:{borderBottom:0,"&:first-child, &:last-child":{borderRadius:0}}}}},[`
            &${G}-row:hover > td,
            > td${G}-cell-row-hover
          `]:{background:Xt},[`&${G}-row-selected`]:{"> td":{background:gr},"&:hover > td":{background:Sr}}}},[`${G}-footer`]:{padding:`${ae}px ${et}px`,color:Wr,background:Cn}})}};var Cf=(0,gl.Z)("Table",w=>{const{controlItemBgActive:G,controlItemBgActiveHover:Ce,colorTextPlaceholder:ae,colorTextHeading:et,colorSplit:Ie,colorBorderSecondary:Ze,fontSize:Fe,padding:it,paddingXS:gt,paddingSM:It,controlHeight:Tt,colorFillAlter:qt,colorIcon:Ot,colorIconHover:rr,opacityLoading:Xt,colorBgContainer:gr,borderRadiusLG:Sr,colorFillContent:Wr,colorFillSecondary:Cn,controlInteractiveSize:xn}=w,In=new Ya.C(Ot),Rn=new Ya.C(rr),Gn=G,ti=2,ii=new Ya.C(Cn).onBackground(gr).toHexShortString(),b=new Ya.C(Wr).onBackground(gr).toHexShortString(),M=new Ya.C(qt).onBackground(gr).toHexShortString(),D=(0,Xs.TS)(w,{tableFontSize:Fe,tableBg:gr,tableRadius:Sr,tablePaddingVertical:it,tablePaddingHorizontal:it,tablePaddingVerticalMiddle:It,tablePaddingHorizontalMiddle:gt,tablePaddingVerticalSmall:gt,tablePaddingHorizontalSmall:gt,tableBorderColor:Ze,tableHeaderTextColor:et,tableHeaderBg:M,tableFooterTextColor:et,tableFooterBg:M,tableHeaderCellSplitColor:Ze,tableHeaderSortBg:ii,tableHeaderSortHoverBg:b,tableHeaderIconColor:In.clone().setAlpha(In.getAlpha()*Xt).toRgbString(),tableHeaderIconColorHover:Rn.clone().setAlpha(Rn.getAlpha()*Xt).toRgbString(),tableBodySortBg:M,tableFixedHeaderSortActiveBg:ii,tableHeaderFilterActiveBg:Wr,tableFilterDropdownBg:gr,tableRowHoverBg:M,tableSelectedRowBg:Gn,tableSelectedRowHoverBg:Ce,zIndexTableFixed:ti,zIndexTableSticky:ti+1,tableFontSizeMiddle:Fe,tableFontSizeSmall:Fe,tableSelectionColumnWidth:Tt,tableExpandIconBg:gr,tableExpandColumnWidth:xn+2*w.padding,tableExpandedRowBg:qt,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:ae,tableScrollThumbBgHover:et,tableScrollBg:Ie});return[fu(D),yo(D),pc(D),Cl(D),Ia(D),Ga(D),zs(D),Oa(D),pc(D),sa(D),Au(D),Bs(D),mf(D),xs(D),Xl(D),Gu(D)]});const Uu=[];function Qf(w,G){const{prefixCls:Ce,className:ae,rootClassName:et,style:Ie,size:Ze,bordered:Fe,dropdownPrefixCls:it,dataSource:gt,pagination:It,rowSelection:Tt,rowKey:qt="key",rowClassName:Ot,columns:rr,children:Xt,childrenColumnName:gr,onChange:Sr,getPopupContainer:Wr,loading:Cn,expandIcon:xn,expandable:In,expandedRowRender:Rn,expandIconColumnIndex:Gn,indentSize:ti,scroll:ii,sortDirections:b,locale:M,showSorterTooltip:D=!0}=w,P=v.useMemo(()=>rr||Vi(Xt),[rr,Xt]),V=v.useMemo(()=>P.some(Qi=>Qi.responsive),[P]),q=Si(V),be=v.useMemo(()=>{const Qi=new Set(Object.keys(q).filter(ja=>q[ja]));return P.filter(ja=>!ja.responsive||ja.responsive.some(qn=>Qi.has(qn)))},[P,q]),$e=(0,hr.Z)(w,["className","style","columns"]),_t=v.useContext(mn.Z),{locale:Gt=qi.Z,direction:yr,renderEmpty:$r,getPrefixCls:an}=v.useContext(er.E_),Un=Ze||_t,ei=Object.assign(Object.assign({},Gt.Table),M),Jn=gt||Uu,Sn=an("table",Ce),Xn=an("dropdown",it),ai=Object.assign({childrenColumnName:gr,expandIconColumnIndex:Gn},In),{childrenColumnName:ln="children"}=ai,pi=v.useMemo(()=>Jn.some(Qi=>Qi==null?void 0:Qi[ln])?"nest":Rn||In&&In.expandedRowRender?"row":null,[Jn]),gi={body:v.useRef()},Li=v.useMemo(()=>typeof qt=="function"?qt:Qi=>Qi==null?void 0:Qi[qt],[qt]),[Ki]=Hc(Jn,ln,Li),ua={},la=function(Qi,ja){let qn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const ca=Object.assign(Object.assign({},ua),Qi);qn&&(ua.resetPagination(),ca.pagination.current&&(ca.pagination.current=1),It&&It.onChange&&It.onChange(1,ca.pagination.pageSize)),ii&&ii.scrollToFirstRowOnChange!==!1&&gi.body.current&&_c(0,{getContainer:()=>gi.body.current}),Sr==null||Sr(ca.pagination,ca.filters,ca.sorter,{currentDataSource:ud(ya(Jn,ca.sorterStates,ln),ca.filterStates),action:ja})},Lo=(Qi,ja)=>{la({sorter:Qi,sorterStates:ja},"sort",!1)},[Fa,go,Qs,e]=Ua({prefixCls:Sn,mergedColumns:be,onSorterChange:Lo,sortDirections:b||["ascend","descend"],tableLocale:ei,showSorterTooltip:D}),i=v.useMemo(()=>ya(Jn,go,ln),[Jn,go]);ua.sorter=e(),ua.sorterStates=go;const c=(Qi,ja)=>{la({filters:Qi,filterStates:ja},"filter",!0)},[y,I,H]=Sd({prefixCls:Sn,locale:ei,dropdownPrefixCls:Xn,mergedColumns:be,onFilterChange:c,getPopupContainer:Wr}),Q=ud(i,I);ua.filters=H,ua.filterStates=I;const ge=v.useMemo(()=>{const Qi={};return Object.keys(H).forEach(ja=>{H[ja]!==null&&(Qi[ja]=H[ja])}),Object.assign(Object.assign({},Qs),{filters:Qi})},[Qs,H]),[tt]=Ni(ge),Rt=(Qi,ja)=>{la({pagination:Object.assign(Object.assign({},ua.pagination),{current:Qi,pageSize:ja})},"paginate")},[Ft,Jt]=mp(Q.length,It,Rt);ua.pagination=It===!1?{}:vp(Ft,It),ua.resetPagination=Jt;const dr=v.useMemo(()=>{if(It===!1||!Ft.pageSize)return Q;const{current:Qi=1,total:ja,pageSize:qn=pp}=Ft;return Q.length<ja?Q.length>qn?Q.slice((Qi-1)*qn,Qi*qn):Q:Q.slice((Qi-1)*qn,Qi*qn)},[!!It,Q,Ft&&Ft.current,Ft&&Ft.pageSize,Ft&&Ft.total]),[Cr,tn]=vl(Tt,{prefixCls:Sn,data:Q,pageData:dr,getRowKey:Li,getRecordByKey:Ki,expandType:pi,childrenColumnName:ln,locale:ei,getPopupContainer:Wr}),rn=(Qi,ja,qn)=>{let ca;return typeof Ot=="function"?ca=Te()(Ot(Qi,ja,qn)):ca=Te()(Ot),Te()({[`${Sn}-row-selected`]:tn.has(Li(Qi,ja))},ca)};ai.__PARENT_RENDER_ICON__=ai.expandIcon,ai.expandIcon=ai.expandIcon||xn||ff(ei),pi==="nest"&&ai.expandIconColumnIndex===void 0?ai.expandIconColumnIndex=Tt?1:0:ai.expandIconColumnIndex>0&&Tt&&(ai.expandIconColumnIndex-=1),typeof ai.indentSize!="number"&&(ai.indentSize=typeof ti=="number"?ti:15);const yn=v.useCallback(Qi=>tt(Cr(y(Fa(Qi)))),[Fa,y,Cr]);let vn,$n;if(It!==!1&&(Ft!=null&&Ft.total)){let Qi;Ft.size?Qi=Ft.size:Qi=Un==="small"||Un==="middle"?"small":void 0;const ja=ra=>v.createElement(Kl,Object.assign({},Ft,{className:Te()(`${Sn}-pagination ${Sn}-pagination-${ra}`,Ft.className),size:Qi})),qn=yr==="rtl"?"left":"right",{position:ca}=Ft;if(ca!==null&&Array.isArray(ca)){const ra=ca.find(qa=>qa.includes("top")),bo=ca.find(qa=>qa.includes("bottom")),Eo=ca.every(qa=>`${qa}`=="none");!ra&&!bo&&!Eo&&($n=ja(qn)),ra&&(vn=ja(ra.toLowerCase().replace("top",""))),bo&&($n=ja(bo.toLowerCase().replace("bottom","")))}else $n=ja(qn)}let ri;typeof Cn=="boolean"?ri={spinning:Cn}:typeof Cn=="object"&&(ri=Object.assign({spinning:!0},Cn));const[_i,xi]=Cf(Sn),Ii=Te()(`${Sn}-wrapper`,{[`${Sn}-wrapper-rtl`]:yr==="rtl"},ae,et,xi),ta=M&&M.emptyText||($r==null?void 0:$r("Table"))||v.createElement(dn.Z,{componentName:"Table"});return _i(v.createElement("div",{ref:G,className:Ii,style:Ie},v.createElement(dl.Z,Object.assign({spinning:!1},ri),vn,v.createElement(La,Object.assign({},$e,{columns:be,direction:yr,expandable:ai,prefixCls:Sn,className:Te()({[`${Sn}-middle`]:Un==="middle",[`${Sn}-small`]:Un==="small",[`${Sn}-bordered`]:Fe,[`${Sn}-empty`]:Jn.length===0}),data:dr,rowKey:Li,rowClassName:rn,emptyText:ta,internalHooks:Rs,internalRefs:gi,transformColumns:yn})),$n)))}var js=v.forwardRef(Qf);function Pu(w,G){const Ce=v.useRef(0);return Ce.current+=1,v.createElement(js,Object.assign({},w,{ref:G,_renderTimes:Ce.current}))}const Ru=v.forwardRef(Pu);Ru.SELECTION_COLUMN=ld,Ru.EXPAND_COLUMN=C,Ru.SELECTION_ALL=gp,Ru.SELECTION_INVERT=Ah,Ru.SELECTION_NONE=Dd,Ru.Column=Yr,Ru.ColumnGroup=at,Ru.Summary=Z;var nf=Ru,pd=nf},76364:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return ur}});var v=m(12057),C=m(16853),l=m(1413),$=m(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},z=R,L=m(42135),T=function(At,nt){return $.createElement(L.Z,(0,l.Z)((0,l.Z)({},At),{},{ref:nt,icon:z}))};T.displayName="PlusOutlined";var O=$.forwardRef(T),F=m(94184),ue=m.n(F),Ae=m(93068),re=m(53124),pe=m(97647),fe=m(33603);const ke={motionAppear:!1,motionEnter:!0,motionLeave:!0};function je(we){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},nt;return At===!1?nt={inkBar:!1,tabPane:!1}:At===!0?nt={inkBar:!0,tabPane:!0}:nt=Object.assign({inkBar:!0},typeof At=="object"?At:{}),nt.tabPane&&(nt.tabPaneMotion=Object.assign(Object.assign({},ke),{motionName:(0,fe.mL)(we,"switch")})),nt}var bt=m(50344),ut=function(we,At){var nt={};for(var Lt in we)Object.prototype.hasOwnProperty.call(we,Lt)&&At.indexOf(Lt)<0&&(nt[Lt]=we[Lt]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,Lt=Object.getOwnPropertySymbols(we);St<Lt.length;St++)At.indexOf(Lt[St])<0&&Object.prototype.propertyIsEnumerable.call(we,Lt[St])&&(nt[Lt[St]]=we[Lt[St]]);return nt};function wt(we){return we.filter(At=>At)}function se(we,At){if(we)return we;const nt=(0,bt.Z)(At).map(Lt=>{if($.isValidElement(Lt)){const{key:St,props:Ut}=Lt,lt=Ut||{},{tab:Et}=lt,Zt=ut(lt,["tab"]);return Object.assign(Object.assign({key:String(St)},Zt),{label:Et})}return null});return wt(nt)}var me=()=>null,_e=m(67968),Te=m(45503),ht=m(14747),We=m(67771),he=we=>{const{componentCls:At,motionDurationSlow:nt}=we;return[{[At]:{[`${At}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${nt}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${nt}`}}}}},[(0,We.oN)(we,"slide-up"),(0,We.oN)(we,"slide-down")]]};const Ve=we=>{const{componentCls:At,tabsCardHorizontalPadding:nt,tabsCardHeadBackground:Lt,tabsCardGutter:St,colorSplit:Ut}=we;return{[`${At}-card`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab`]:{margin:0,padding:nt,background:Lt,border:`${we.lineWidth}px ${we.lineType} ${Ut}`,transition:`all ${we.motionDurationSlow} ${we.motionEaseInOut}`},[`${At}-tab-active`]:{color:we.colorPrimary,background:we.colorBgContainer},[`${At}-ink-bar`]:{visibility:"hidden"}},[`&${At}-top, &${At}-bottom`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab + ${At}-tab`]:{marginLeft:{_skip_check_:!0,value:`${St}px`}}}},[`&${At}-top`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab`]:{borderRadius:`${we.borderRadiusLG}px ${we.borderRadiusLG}px 0 0`},[`${At}-tab-active`]:{borderBottomColor:we.colorBgContainer}}},[`&${At}-bottom`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab`]:{borderRadius:`0 0 ${we.borderRadiusLG}px ${we.borderRadiusLG}px`},[`${At}-tab-active`]:{borderTopColor:we.colorBgContainer}}},[`&${At}-left, &${At}-right`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab + ${At}-tab`]:{marginTop:`${St}px`}}},[`&${At}-left`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab`]:{borderRadius:{_skip_check_:!0,value:`${we.borderRadiusLG}px 0 0 ${we.borderRadiusLG}px`}},[`${At}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:we.colorBgContainer}}}},[`&${At}-right`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${we.borderRadiusLG}px ${we.borderRadiusLG}px 0`}},[`${At}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:we.colorBgContainer}}}}}}},ie=we=>{const{componentCls:At,tabsHoverColor:nt,dropdownEdgeChildVerticalPadding:Lt}=we;return{[`${At}-dropdown`]:Object.assign(Object.assign({},(0,ht.Wf)(we)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:we.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${At}-dropdown-menu`]:{maxHeight:we.tabsDropdownHeight,margin:0,padding:`${Lt}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:we.colorBgContainer,backgroundClip:"padding-box",borderRadius:we.borderRadiusLG,outline:"none",boxShadow:we.boxShadowSecondary,"&-item":Object.assign(Object.assign({},ht.vS),{display:"flex",alignItems:"center",minWidth:we.tabsDropdownWidth,margin:0,padding:`${we.paddingXXS}px ${we.paddingSM}px`,color:we.colorText,fontWeight:"normal",fontSize:we.fontSize,lineHeight:we.lineHeight,cursor:"pointer",transition:`all ${we.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:we.marginSM},color:we.colorTextDescription,fontSize:we.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:nt}},"&:hover":{background:we.controlItemBgHover},"&-disabled":{"&, &:hover":{color:we.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},ze=we=>{const{componentCls:At,margin:nt,colorSplit:Lt}=we;return{[`${At}-top, ${At}-bottom`]:{flexDirection:"column",[`> ${At}-nav, > div > ${At}-nav`]:{margin:`0 0 ${nt}px 0`,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${we.lineWidth}px ${we.lineType} ${Lt}`,content:"''"},[`${At}-ink-bar`]:{height:we.lineWidthBold,"&-animated":{transition:`width ${we.motionDurationSlow}, left ${we.motionDurationSlow},
            right ${we.motionDurationSlow}`}},[`${At}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:we.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:we.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:we.boxShadowTabsOverflowRight},[`&${At}-nav-wrap-ping-left::before`]:{opacity:1},[`&${At}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${At}-top`]:{[`> ${At}-nav,
        > div > ${At}-nav`]:{"&::before":{bottom:0},[`${At}-ink-bar`]:{bottom:0}}},[`${At}-bottom`]:{[`> ${At}-nav, > div > ${At}-nav`]:{order:1,marginTop:`${nt}px`,marginBottom:0,"&::before":{top:0},[`${At}-ink-bar`]:{top:0}},[`> ${At}-content-holder, > div > ${At}-content-holder`]:{order:0}},[`${At}-left, ${At}-right`]:{[`> ${At}-nav, > div > ${At}-nav`]:{flexDirection:"column",minWidth:we.controlHeight*1.25,[`${At}-tab`]:{padding:`${we.paddingXS}px ${we.paddingLG}px`,textAlign:"center"},[`${At}-tab + ${At}-tab`]:{margin:`${we.margin}px 0 0 0`},[`${At}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:we.controlHeight},"&::before":{top:0,boxShadow:we.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:we.boxShadowTabsOverflowBottom},[`&${At}-nav-wrap-ping-top::before`]:{opacity:1},[`&${At}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${At}-ink-bar`]:{width:we.lineWidthBold,"&-animated":{transition:`height ${we.motionDurationSlow}, top ${we.motionDurationSlow}`}},[`${At}-nav-list, ${At}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${At}-left`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${At}-content-holder, > div > ${At}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${we.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${we.lineWidth}px ${we.lineType} ${we.colorBorder}`},[`> ${At}-content > ${At}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:we.paddingLG}}}},[`${At}-right`]:{[`> ${At}-nav, > div > ${At}-nav`]:{order:1,[`${At}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${At}-content-holder, > div > ${At}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-we.lineWidth},borderRight:{_skip_check_:!0,value:`${we.lineWidth}px ${we.lineType} ${we.colorBorder}`},[`> ${At}-content > ${At}-tabpane`]:{paddingRight:{_skip_check_:!0,value:we.paddingLG}}}}}},Le=we=>{const{componentCls:At,padding:nt}=we;return{[At]:{"&-small":{[`> ${At}-nav`]:{[`${At}-tab`]:{padding:`${we.paddingXS}px 0`,fontSize:we.fontSize}}},"&-large":{[`> ${At}-nav`]:{[`${At}-tab`]:{padding:`${nt}px 0`,fontSize:we.fontSizeLG}}}},[`${At}-card`]:{[`&${At}-small`]:{[`> ${At}-nav`]:{[`${At}-tab`]:{padding:`${we.paddingXXS*1.5}px ${nt}px`}},[`&${At}-bottom`]:{[`> ${At}-nav ${At}-tab`]:{borderRadius:`0 0 ${we.borderRadius}px ${we.borderRadius}px`}},[`&${At}-top`]:{[`> ${At}-nav ${At}-tab`]:{borderRadius:`${we.borderRadius}px ${we.borderRadius}px 0 0`}},[`&${At}-right`]:{[`> ${At}-nav ${At}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${we.borderRadius}px ${we.borderRadius}px 0`}}},[`&${At}-left`]:{[`> ${At}-nav ${At}-tab`]:{borderRadius:{_skip_check_:!0,value:`${we.borderRadius}px 0 0 ${we.borderRadius}px`}}}},[`&${At}-large`]:{[`> ${At}-nav`]:{[`${At}-tab`]:{padding:`${we.paddingXS}px ${nt}px ${we.paddingXXS*1.5}px`}}}}}},Re=we=>{const{componentCls:At,tabsActiveColor:nt,tabsHoverColor:Lt,iconCls:St,tabsHorizontalGutter:Ut}=we,lt=`${At}-tab`;return{[lt]:{position:"relative",display:"inline-flex",alignItems:"center",padding:`${we.paddingSM}px 0`,fontSize:`${we.fontSize}px`,background:"transparent",border:0,outline:"none",cursor:"pointer","&-btn, &-remove":Object.assign({"&:focus:not(:focus-visible), &:active":{color:nt}},(0,ht.Qy)(we)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-we.marginXXS},marginLeft:{_skip_check_:!0,value:we.marginXS},color:we.colorTextDescription,fontSize:we.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${we.motionDurationSlow}`,"&:hover":{color:we.colorTextHeading}},"&:hover":{color:Lt},[`&${lt}-active ${lt}-btn`]:{color:we.colorPrimary,textShadow:we.tabsActiveTextShadow},[`&${lt}-disabled`]:{color:we.colorTextDisabled,cursor:"not-allowed"},[`&${lt}-disabled ${lt}-btn, &${lt}-disabled ${At}-remove`]:{"&:focus, &:active":{color:we.colorTextDisabled}},[`& ${lt}-remove ${St}`]:{margin:0},[St]:{marginRight:{_skip_check_:!0,value:we.marginSM}}},[`${lt} + ${lt}`]:{margin:{_skip_check_:!0,value:`0 0 0 ${Ut}px`}}}},st=we=>{const{componentCls:At,tabsHorizontalGutter:nt,iconCls:Lt,tabsCardGutter:St}=we;return{[`${At}-rtl`]:{direction:"rtl",[`${At}-nav`]:{[`${At}-tab`]:{margin:{_skip_check_:!0,value:`0 0 0 ${nt}px`},[`${At}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[Lt]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${we.marginSM}px`}},[`${At}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${we.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${we.marginXXS}px`},[Lt]:{margin:0}}}},[`&${At}-left`]:{[`> ${At}-nav`]:{order:1},[`> ${At}-content-holder`]:{order:0}},[`&${At}-right`]:{[`> ${At}-nav`]:{order:0},[`> ${At}-content-holder`]:{order:1}},[`&${At}-card${At}-top, &${At}-card${At}-bottom`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-tab + ${At}-tab`]:{marginRight:{_skip_check_:!0,value:`${St}px`},marginLeft:{_skip_check_:!0,value:0}}}}},[`${At}-dropdown-rtl`]:{direction:"rtl"},[`${At}-menu-item`]:{[`${At}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},vt=we=>{const{componentCls:At,tabsCardHorizontalPadding:nt,tabsCardHeight:Lt,tabsCardGutter:St,tabsHoverColor:Ut,tabsActiveColor:lt,colorSplit:Et}=we;return{[At]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,ht.Wf)(we)),{display:"flex",[`> ${At}-nav, > div > ${At}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${At}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${we.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${At}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${we.motionDurationSlow}`},[`${At}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${At}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${At}-nav-more`]:{position:"relative",padding:nt,background:"transparent",border:0,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:we.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${At}-nav-add`]:Object.assign({minWidth:`${Lt}px`,marginLeft:{_skip_check_:!0,value:`${St}px`},padding:`0 ${we.paddingXS}px`,background:"transparent",border:`${we.lineWidth}px ${we.lineType} ${Et}`,borderRadius:`${we.borderRadiusLG}px ${we.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:we.colorText,transition:`all ${we.motionDurationSlow} ${we.motionEaseInOut}`,"&:hover":{color:Ut},"&:active, &:focus:not(:focus-visible)":{color:lt}},(0,ht.Qy)(we))},[`${At}-extra-content`]:{flex:"none"},[`${At}-ink-bar`]:{position:"absolute",background:we.colorPrimary,pointerEvents:"none"}}),Re(we)),{[`${At}-content`]:{position:"relative",width:"100%"},[`${At}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${At}-tabpane`]:{outline:"none","&-hidden":{display:"none"}}}),[`${At}-centered`]:{[`> ${At}-nav, > div > ${At}-nav`]:{[`${At}-nav-wrap`]:{[`&:not([class*='${At}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}};var Dt=(0,_e.Z)("Tabs",we=>{const At=we.controlHeightLG,nt=(0,Te.TS)(we,{tabsHoverColor:we.colorPrimaryHover,tabsActiveColor:we.colorPrimaryActive,tabsCardHorizontalPadding:`${(At-Math.round(we.fontSize*we.lineHeight))/2-we.lineWidth}px ${we.padding}px`,tabsCardHeight:At,tabsCardGutter:we.marginXXS/2,tabsHorizontalGutter:32,tabsCardHeadBackground:we.colorFillAlter,dropdownEdgeChildVerticalPadding:we.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120});return[Le(nt),st(nt),ze(nt),ie(nt),Ve(nt),vt(nt),he(nt)]},we=>({zIndexPopup:we.zIndexPopupBase+50})),ar=function(we,At){var nt={};for(var Lt in we)Object.prototype.hasOwnProperty.call(we,Lt)&&At.indexOf(Lt)<0&&(nt[Lt]=we[Lt]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,Lt=Object.getOwnPropertySymbols(we);St<Lt.length;St++)At.indexOf(Lt[St])<0&&Object.prototype.propertyIsEnumerable.call(we,Lt[St])&&(nt[Lt[St]]=we[Lt[St]]);return nt};function $t(we){var{type:At,className:nt,rootClassName:Lt,size:St,onEdit:Ut,hideAdd:lt,centered:Et,addIcon:Zt,popupClassName:Be,children:He,items:ft,animated:Z}=we,J=ar(we,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","popupClassName","children","items","animated"]);const{prefixCls:K,moreIcon:B=$.createElement(C.Z,null)}=J,{direction:j,getPrefixCls:ee,getPopupContainer:W}=$.useContext(re.E_),De=ee("tabs",K),[ot,Wt]=Dt(De);let Ct;At==="editable-card"&&(Ct={onEdit:(br,Nt)=>{let{key:Pr,event:_r}=Nt;Ut==null||Ut(br==="add"?_r:Pr,br)},removeIcon:$.createElement(v.Z,null),addIcon:Zt||$.createElement(O,null),showAdd:lt!==!0});const Qt=ee(),ir=se(ft,He),Er=je(De,Z),Qr=$.useContext(pe.Z),Mt=St!==void 0?St:Qr;return ot($.createElement(Ae.Z,Object.assign({direction:j,getPopupContainer:W,moreTransitionName:`${Qt}-slide-up`},J,{items:ir,className:ue()({[`${De}-${Mt}`]:Mt,[`${De}-card`]:["card","editable-card"].includes(At),[`${De}-editable-card`]:At==="editable-card",[`${De}-centered`]:Et},nt,Lt,Wt),popupClassName:ue()(Be,Wt),editable:Ct,moreIcon:B,prefixCls:De,animated:Er})))}$t.TabPane=me;var ur=$t},92195:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return ut}});var v=m(48012),C=m(67164),l=m(16397),$=m(2790),R=m(57),z=m(10274);const L=(wt,se)=>new z.C(wt).setAlpha(se).toRgbString(),T=(wt,se)=>new z.C(wt).lighten(se).toHexString(),O=wt=>{const se=(0,l.R_)(wt,{theme:"dark"});return{1:se[0],2:se[1],3:se[2],4:se[3],5:se[6],6:se[5],7:se[4],8:se[6],9:se[5],10:se[4]}},F=(wt,se)=>{const qe=wt||"#000",me=se||"#fff";return{colorBgBase:qe,colorTextBase:me,colorText:L(me,.85),colorTextSecondary:L(me,.65),colorTextTertiary:L(me,.45),colorTextQuaternary:L(me,.25),colorFill:L(me,.18),colorFillSecondary:L(me,.12),colorFillTertiary:L(me,.08),colorFillQuaternary:L(me,.04),colorBgElevated:T(qe,12),colorBgContainer:T(qe,8),colorBgLayout:T(qe,0),colorBgSpotlight:T(qe,26),colorBorder:T(qe,26),colorBorderSecondary:T(qe,19)}};var Ae=(wt,se)=>{const qe=Object.keys($.M).map(_e=>{const Te=(0,l.R_)(wt[_e],{theme:"dark"});return new Array(10).fill(1).reduce((ht,We,Ne)=>(ht[`${_e}-${Ne+1}`]=Te[Ne],ht),{})}).reduce((_e,Te)=>(_e=Object.assign(Object.assign({},_e),Te),_e),{}),me=se!=null?se:(0,C.Z)(wt);return Object.assign(Object.assign(Object.assign({},me),qe),(0,R.Z)(wt,{generateColorPalettes:O,generateNeutralColorPalettes:F}))},re=m(372);function pe(wt){const{sizeUnit:se,sizeStep:qe}=wt,me=qe-2;return{sizeXXL:se*(me+10),sizeXL:se*(me+6),sizeLG:se*(me+2),sizeMD:se*(me+2),sizeMS:se*(me+1),size:se*me,sizeSM:se*me,sizeXS:se*(me-1),sizeXXS:se*(me-1)}}var fe=m(98378),je=(wt,se)=>{const qe=se!=null?se:(0,C.Z)(wt),me=qe.fontSizeSM,_e=qe.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qe),pe(se!=null?se:wt)),(0,fe.Z)(me)),{controlHeight:_e}),(0,re.Z)(Object.assign(Object.assign({},qe),{controlHeight:_e})))};function bt(){const[wt,se,qe]=(0,v.dQ)();return{theme:wt,token:se,hashId:qe}}var ut={defaultConfig:v.u_,defaultSeed:v.u_.token,useToken:bt,defaultAlgorithm:C.Z,darkAlgorithm:Ae,compactAlgorithm:je}},48012:function(Qe,te,m){"use strict";m.d(te,{Mj:function(){return fe},u_:function(){return pe},dQ:function(){return ke}});var v=m(51222),C=m(67294),l="5.2.2",$=l,R=m(67164),z=m(2790),L=m(10274);function T(je){return je>=0&&je<=255}function O(je,bt){const{r:ut,g:wt,b:se,a:qe}=new L.C(je).toRgb();if(qe<1)return je;const{r:me,g:_e,b:Te}=new L.C(bt).toRgb();for(let ht=.01;ht<=1;ht+=.01){const We=Math.round((ut-me*(1-ht))/ht),Ne=Math.round((wt-_e*(1-ht))/ht),he=Math.round((se-Te*(1-ht))/ht);if(T(We)&&T(Ne)&&T(he))return new L.C({r:We,g:Ne,b:he,a:Math.round(ht*100)/100}).toRgbString()}return new L.C({r:ut,g:wt,b:se,a:1}).toRgbString()}var F=O,ue=function(je,bt){var ut={};for(var wt in je)Object.prototype.hasOwnProperty.call(je,wt)&&bt.indexOf(wt)<0&&(ut[wt]=je[wt]);if(je!=null&&typeof Object.getOwnPropertySymbols=="function")for(var se=0,wt=Object.getOwnPropertySymbols(je);se<wt.length;se++)bt.indexOf(wt[se])<0&&Object.prototype.propertyIsEnumerable.call(je,wt[se])&&(ut[wt[se]]=je[wt[se]]);return ut};function Ae(je){const{override:bt}=je,ut=ue(je,["override"]),wt=Object.assign({},bt);Object.keys(z.Z).forEach(he=>{delete wt[he]});const se=Object.assign(Object.assign({},ut),wt),qe=480,me=576,_e=768,Te=992,ht=1200,We=1600;return Object.assign(Object.assign(Object.assign({},se),{colorLink:se.colorInfoText,colorLinkHover:se.colorInfoHover,colorLinkActive:se.colorInfoActive,colorFillContent:se.colorFillSecondary,colorFillContentHover:se.colorFill,colorFillAlter:se.colorFillQuaternary,colorBgContainerDisabled:se.colorFillTertiary,colorBorderBg:se.colorBgContainer,colorSplit:F(se.colorBorderSecondary,se.colorBgContainer),colorTextPlaceholder:se.colorTextQuaternary,colorTextDisabled:se.colorTextQuaternary,colorTextHeading:se.colorText,colorTextLabel:se.colorTextSecondary,colorTextDescription:se.colorTextTertiary,colorTextLightSolid:se.colorWhite,colorHighlight:se.colorError,colorBgTextHover:se.colorFillSecondary,colorBgTextActive:se.colorFill,colorIcon:se.colorTextTertiary,colorIconHover:se.colorText,colorErrorOutline:F(se.colorErrorBg,se.colorBgContainer),colorWarningOutline:F(se.colorWarningBg,se.colorBgContainer),fontSizeIcon:se.fontSizeSM,lineWidth:se.lineWidth,controlOutlineWidth:se.lineWidth*2,controlInteractiveSize:se.controlHeight/2,controlItemBgHover:se.colorFillTertiary,controlItemBgActive:se.colorPrimaryBg,controlItemBgActiveHover:se.colorPrimaryBgHover,controlItemBgActiveDisabled:se.colorFill,controlTmpOutline:se.colorFillQuaternary,controlOutline:F(se.colorPrimaryBg,se.colorBgContainer),lineType:se.lineType,borderRadius:se.borderRadius,borderRadiusXS:se.borderRadiusXS,borderRadiusSM:se.borderRadiusSM,borderRadiusLG:se.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:se.sizeXXS,paddingXS:se.sizeXS,paddingSM:se.sizeSM,padding:se.size,paddingMD:se.sizeMD,paddingLG:se.sizeLG,paddingXL:se.sizeXL,paddingContentHorizontalLG:se.sizeLG,paddingContentVerticalLG:se.sizeMS,paddingContentHorizontal:se.sizeMS,paddingContentVertical:se.sizeSM,paddingContentHorizontalSM:se.size,paddingContentVerticalSM:se.sizeXS,marginXXS:se.sizeXXS,marginXS:se.sizeXS,marginSM:se.sizeSM,margin:se.size,marginMD:se.sizeMD,marginLG:se.sizeLG,marginXL:se.sizeXL,marginXXL:se.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:qe,screenXSMin:qe,screenXSMax:me-1,screenSM:me,screenSMMin:me,screenSMMax:_e-1,screenMD:_e,screenMDMin:_e,screenMDMax:Te-1,screenLG:Te,screenLGMin:Te,screenLGMax:ht-1,screenXL:ht,screenXLMin:ht,screenXLMax:We-1,screenXXL:We,screenXXLMin:We,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new L.C("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new L.C("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new L.C("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),wt)}const re=(0,v.jG)(R.Z),pe={token:z.Z,hashed:!0},fe=C.createContext(pe);function ke(){const{token:je,hashed:bt,theme:ut,components:wt}=C.useContext(fe),se=`${$}-${bt||""}`,qe=ut||re,[me,_e]=(0,v.fp)(qe,[z.Z,je],{salt:se,override:Object.assign({override:je},wt),formatToken:Ae});return[qe,me,bt?_e:""]}},67164:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return fe}});var v=m(16397),C=m(372);function l(ke){const{sizeUnit:je,sizeStep:bt}=ke;return{sizeXXL:je*(bt+8),sizeXL:je*(bt+4),sizeLG:je*(bt+2),sizeMD:je*(bt+1),sizeMS:je*bt,size:je*bt,sizeSM:je*(bt-1),sizeXS:je*(bt-2),sizeXXS:je*(bt-3)}}var $=m(2790),R=m(57),L=ke=>{let je=ke,bt=ke,ut=ke,wt=ke;return ke<6&&ke>=5?je=ke+1:ke<16&&ke>=6?je=ke+2:ke>=16&&(je=16),ke<7&&ke>=5?bt=4:ke<8&&ke>=7?bt=5:ke<14&&ke>=8?bt=6:ke<16&&ke>=14?bt=7:ke>=16&&(bt=8),ke<6&&ke>=2?ut=1:ke>=6&&(ut=2),ke>4&&ke<8?wt=4:ke>=8&&(wt=6),{borderRadius:ke>16?16:ke,borderRadiusXS:ut,borderRadiusSM:bt,borderRadiusLG:je,borderRadiusOuter:wt}};function T(ke){const{motionUnit:je,motionBase:bt,borderRadius:ut,lineWidth:wt}=ke;return Object.assign({motionDurationFast:`${(bt+je).toFixed(1)}s`,motionDurationMid:`${(bt+je*2).toFixed(1)}s`,motionDurationSlow:`${(bt+je*3).toFixed(1)}s`,lineWidthBold:wt+1},L(ut))}var O=m(10274);const F=(ke,je)=>new O.C(ke).setAlpha(je).toRgbString(),ue=(ke,je)=>new O.C(ke).darken(je).toHexString(),Ae=ke=>{const je=(0,v.R_)(ke);return{1:je[0],2:je[1],3:je[2],4:je[3],5:je[4],6:je[5],7:je[6],8:je[4],9:je[5],10:je[6]}},re=(ke,je)=>{const bt=ke||"#fff",ut=je||"#000";return{colorBgBase:bt,colorTextBase:ut,colorText:F(ut,.88),colorTextSecondary:F(ut,.65),colorTextTertiary:F(ut,.45),colorTextQuaternary:F(ut,.25),colorFill:F(ut,.15),colorFillSecondary:F(ut,.06),colorFillTertiary:F(ut,.04),colorFillQuaternary:F(ut,.02),colorBgLayout:ue(bt,4),colorBgContainer:ue(bt,0),colorBgElevated:ue(bt,0),colorBgSpotlight:F(ut,.85),colorBorder:ue(bt,15),colorBorderSecondary:ue(bt,6)}};var pe=m(98378);function fe(ke){const je=Object.keys($.M).map(bt=>{const ut=(0,v.R_)(ke[bt]);return new Array(10).fill(1).reduce((wt,se,qe)=>(wt[`${bt}-${qe+1}`]=ut[qe],wt),{})}).reduce((bt,ut)=>(bt=Object.assign(Object.assign({},bt),ut),bt),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ke),je),(0,R.Z)(ke,{generateColorPalettes:Ae,generateNeutralColorPalettes:re})),(0,pe.Z)(ke.fontSize)),l(ke)),(0,C.Z)(ke)),T(ke))}},2790:function(Qe,te,m){"use strict";m.d(te,{M:function(){return v}});const v={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},C=Object.assign(Object.assign({},v),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1});te.Z=C},57:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return C}});var v=m(10274);function C(l,$){let{generateColorPalettes:R,generateNeutralColorPalettes:z}=$;const{colorSuccess:L,colorWarning:T,colorError:O,colorInfo:F,colorPrimary:ue,colorBgBase:Ae,colorTextBase:re}=l,pe=R(ue),fe=R(L),ke=R(T),je=R(O),bt=R(F),ut=z(Ae,re);return Object.assign(Object.assign({},ut),{colorPrimaryBg:pe[1],colorPrimaryBgHover:pe[2],colorPrimaryBorder:pe[3],colorPrimaryBorderHover:pe[4],colorPrimaryHover:pe[5],colorPrimary:pe[6],colorPrimaryActive:pe[7],colorPrimaryTextHover:pe[8],colorPrimaryText:pe[9],colorPrimaryTextActive:pe[10],colorSuccessBg:fe[1],colorSuccessBgHover:fe[2],colorSuccessBorder:fe[3],colorSuccessBorderHover:fe[4],colorSuccessHover:fe[4],colorSuccess:fe[6],colorSuccessActive:fe[7],colorSuccessTextHover:fe[8],colorSuccessText:fe[9],colorSuccessTextActive:fe[10],colorErrorBg:je[1],colorErrorBgHover:je[2],colorErrorBorder:je[3],colorErrorBorderHover:je[4],colorErrorHover:je[5],colorError:je[6],colorErrorActive:je[7],colorErrorTextHover:je[8],colorErrorText:je[9],colorErrorTextActive:je[10],colorWarningBg:ke[1],colorWarningBgHover:ke[2],colorWarningBorder:ke[3],colorWarningBorderHover:ke[4],colorWarningHover:ke[4],colorWarning:ke[6],colorWarningActive:ke[7],colorWarningTextHover:ke[8],colorWarningText:ke[9],colorWarningTextActive:ke[10],colorInfoBg:bt[1],colorInfoBgHover:bt[2],colorInfoBorder:bt[3],colorInfoBorderHover:bt[4],colorInfoHover:bt[4],colorInfo:bt[6],colorInfoActive:bt[7],colorInfoTextHover:bt[8],colorInfoText:bt[9],colorInfoTextActive:bt[10],colorBgMask:new v.C("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},372:function(Qe,te){"use strict";const m=v=>{const{controlHeight:C}=v;return{controlHeightSM:C*.75,controlHeightXS:C*.5,controlHeightLG:C*1.25}};te.Z=m},98378:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return l}});function v($){const R=new Array(10).fill(null).map((z,L)=>{const T=L-1,O=$*Math.pow(2.71828,T/5),F=L>1?Math.floor(O):Math.ceil(O);return Math.floor(F/2)*2});return R[1]=$,R.map(z=>{const L=z+8;return{size:z,lineHeight:L/z}})}var l=$=>{const R=v($),z=R.map(T=>T.size),L=R.map(T=>T.lineHeight);return{fontSizeSM:z[0],fontSize:z[1],fontSizeLG:z[2],fontSizeXL:z[3],fontSizeHeading1:z[6],fontSizeHeading2:z[5],fontSizeHeading3:z[4],fontSizeHeading4:z[3],fontSizeHeading5:z[2],lineHeight:L[1],lineHeightLG:L[2],lineHeightSM:L[0],lineHeightHeading1:L[6],lineHeightHeading2:L[5],lineHeightHeading3:L[4],lineHeightHeading4:L[3],lineHeightHeading5:L[2]}}},67968:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return L}});var v=m(51222),C=m(67294),l=m(14747),$=m(53124),R=m(48012),z=m(45503);function L(T,O,F){return ue=>{const[Ae,re,pe]=(0,R.dQ)(),{getPrefixCls:fe,iconPrefixCls:ke}=(0,C.useContext)($.E_),je=fe();return(0,v.xy)({theme:Ae,token:re,hashId:pe,path:["Shared",je]},()=>[{"&":(0,l.Lx)(re)}]),[(0,v.xy)({theme:Ae,token:re,hashId:pe,path:[T,ue,ke]},()=>{const{token:bt,flush:ut}=(0,z.ZP)(re),wt=typeof F=="function"?F(bt):F,se=Object.assign(Object.assign({},wt),re[T]),qe=`.${ue}`,me=(0,z.TS)(bt,{componentCls:qe,prefixCls:ue,iconCls:`.${ke}`,antCls:`.${je}`},se),_e=O(me,{hashId:pe,prefixCls:ue,rootPrefixCls:je,iconPrefixCls:ke,overrideComponentToken:re[T]});return ut(T,se),[(0,l.du)(re,ue),_e]}),pe]}}},45503:function(Qe,te,m){"use strict";m.d(te,{TS:function(){return l},ZP:function(){return L}});const v=typeof CSSINJS_STATISTIC!="undefined";let C=!0;function l(){for(var T=arguments.length,O=new Array(T),F=0;F<T;F++)O[F]=arguments[F];if(!v)return Object.assign.apply(Object,[{}].concat(O));C=!1;const ue={};return O.forEach(Ae=>{Object.keys(Ae).forEach(pe=>{Object.defineProperty(ue,pe,{configurable:!0,enumerable:!0,get:()=>Ae[pe]})})}),C=!0,ue}const $={},R={};function z(){}function L(T){let O,F=T,ue=z;return v&&(O=new Set,F=new Proxy(T,{get(Ae,re){return C&&O.add(re),Ae[re]}}),ue=(Ae,re)=>{$[Ae]={global:Array.from(O),component:re}}),{token:F,keys:O,flush:ue}}},15335:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return At}});var v=m(94184),C=m.n(v),l=m(87462),$=m(71002),R=m(1413),z=m(91),L=m(67294),T=m(81263),O=m(43159);function F(nt){var Lt=nt.showArrow,St=nt.arrowContent,Ut=nt.children,lt=nt.prefixCls,Et=nt.id,Zt=nt.overlayInnerStyle,Be=nt.className,He=nt.style;return L.createElement("div",{className:C()("".concat(lt,"-content"),Be),style:He},Lt!==!1&&L.createElement("div",{className:"".concat(lt,"-arrow"),key:"arrow"},St),L.createElement("div",{className:"".concat(lt,"-inner"),id:Et,role:"tooltip",style:Zt},typeof Ut=="function"?Ut():Ut))}var ue=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Ae=function(Lt,St){var Ut=Lt.overlayClassName,lt=Lt.trigger,Et=lt===void 0?["hover"]:lt,Zt=Lt.mouseEnterDelay,Be=Zt===void 0?0:Zt,He=Lt.mouseLeaveDelay,ft=He===void 0?.1:He,Z=Lt.overlayStyle,J=Lt.prefixCls,K=J===void 0?"rc-tooltip":J,B=Lt.children,j=Lt.onVisibleChange,ee=Lt.afterVisibleChange,W=Lt.transitionName,De=Lt.animation,ot=Lt.motion,Wt=Lt.placement,Ct=Wt===void 0?"right":Wt,Qt=Lt.align,ir=Qt===void 0?{}:Qt,Er=Lt.destroyTooltipOnHide,Qr=Er===void 0?!1:Er,Mt=Lt.defaultVisible,br=Lt.getTooltipContainer,Nt=Lt.overlayInnerStyle,Pr=Lt.arrowContent,_r=Lt.overlay,kr=Lt.id,zt=Lt.showArrow,mr=zt===void 0?!0:zt,Or=(0,z.Z)(Lt,ue),X=(0,L.useRef)(null);(0,L.useImperativeHandle)(St,function(){return X.current});var Nr=(0,R.Z)({},Or);"visible"in Lt&&(Nr.popupVisible=Lt.visible);var Xe=function(){return L.createElement(F,{showArrow:mr,arrowContent:Pr,key:"content",prefixCls:K,id:kr,overlayInnerStyle:Nt},_r)},xe=!1,rt=!1;if(typeof Qr=="boolean")xe=Qr;else if(Qr&&(0,$.Z)(Qr)==="object"){var kt=Qr.keepParent;xe=kt===!0,rt=kt===!1}return L.createElement(T.Z,(0,l.Z)({popupClassName:Ut,prefixCls:K,popup:Xe,action:Et,builtinPlacements:O.C,popupPlacement:Ct,ref:X,popupAlign:ir,getPopupContainer:br,onPopupVisibleChange:j,afterPopupVisibleChange:ee,popupTransitionName:W,popupAnimation:De,popupMotion:ot,defaultPopupVisible:Mt,destroyPopupOnHide:xe,autoDestroy:rt,mouseLeaveDelay:ft,popupStyle:Z,mouseEnterDelay:Be},Nr),B)},re=(0,L.forwardRef)(Ae),pe=re,fe=m(21770),ke=m(53124),je=m(33603),bt=m(80636),ut=m(96159),wt=m(50438),se=m(45503),qe=m(67968),me=m(14747);const _e=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Te(nt,Lt){return _e.reduce((St,Ut)=>{const lt=nt[`${Ut}-1`],Et=nt[`${Ut}-3`],Zt=nt[`${Ut}-6`],Be=nt[`${Ut}-7`];return Object.assign(Object.assign({},St),Lt(Ut,{lightColor:lt,lightBorderColor:Et,darkColor:Zt,textColor:Be}))},{})}var ht=m(77786);const We=nt=>{const{componentCls:Lt,tooltipMaxWidth:St,tooltipColor:Ut,tooltipBg:lt,tooltipBorderRadius:Et,zIndexPopup:Zt,controlHeight:Be,boxShadowSecondary:He,paddingSM:ft,paddingXS:Z,tooltipRadiusOuter:J}=nt;return[{[Lt]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,me.Wf)(nt)),{position:"absolute",zIndex:Zt,display:"block","&":[{width:"max-content"},{width:"intrinsic"}],maxWidth:St,visibility:"visible","&-hidden":{display:"none"},"--antd-arrow-background-color":lt,[`${Lt}-inner`]:{minWidth:Be,minHeight:Be,padding:`${ft/2}px ${Z}px`,color:Ut,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:lt,borderRadius:Et,boxShadow:He},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${Lt}-inner`]:{borderRadius:Math.min(Et,ht.qN)}},[`${Lt}-content`]:{position:"relative"}}),Te(nt,(K,B)=>{let{darkColor:j}=B;return{[`&${Lt}-${K}`]:{[`${Lt}-inner`]:{backgroundColor:j},[`${Lt}-arrow`]:{"--antd-arrow-background-color":j}}}})),{"&-rtl":{direction:"rtl"}})},(0,ht.ZP)((0,se.TS)(nt,{borderRadiusOuter:J}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:Et,limitVerticalRadius:!0}),{[`${Lt}-pure`]:{position:"relative",maxWidth:"none"}}]};var Ne=(nt,Lt)=>(0,qe.Z)("Tooltip",Ut=>{if(Lt===!1)return[];const{borderRadius:lt,colorTextLightSolid:Et,colorBgDefault:Zt,borderRadiusOuter:Be}=Ut,He=(0,se.TS)(Ut,{tooltipMaxWidth:250,tooltipColor:Et,tooltipBorderRadius:lt,tooltipBg:Zt,tooltipRadiusOuter:Be>4?4:Be});return[We(He),(0,wt._y)(Ut,"zoom-big-fast")]},Ut=>{let{zIndexPopupBase:lt,colorBgSpotlight:Et}=Ut;return{zIndexPopup:lt+70,colorBgDefault:Et}})(nt),he=m(74902);const Ve=_e.map(nt=>`${nt}-inverse`),ie=null;function ze(nt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,he.Z)(Ve),(0,he.Z)(_e)).includes(nt):_e.includes(nt)}function Le(nt){return ie.includes(nt)}function Re(nt,Lt){const St=ze(Lt),Ut=C()({[`${nt}-${Lt}`]:Lt&&St}),lt={},Et={};return Lt&&!St&&(lt.background=Lt,Et["--antd-arrow-background-color"]=Lt),{className:Ut,overlayStyle:lt,arrowStyle:Et}}function st(nt){const{prefixCls:Lt,className:St,placement:Ut="top",title:lt,color:Et,overlayInnerStyle:Zt}=nt,{getPrefixCls:Be}=L.useContext(ke.E_),He=Be("tooltip",Lt),[ft,Z]=Ne(He,!0),J=Re(He,Et),K=Object.assign(Object.assign({},Zt),J.overlayStyle),B=J.arrowStyle;return ft(L.createElement("div",{className:C()(Z,He,`${He}-pure`,`${He}-placement-${Ut}`,St,J.className),style:B},L.createElement(F,Object.assign({},nt,{className:Z,prefixCls:He,overlayInnerStyle:K}),lt)))}var vt=m(92195),Dt=function(nt,Lt){var St={};for(var Ut in nt)Object.prototype.hasOwnProperty.call(nt,Ut)&&Lt.indexOf(Ut)<0&&(St[Ut]=nt[Ut]);if(nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,Ut=Object.getOwnPropertySymbols(nt);lt<Ut.length;lt++)Lt.indexOf(Ut[lt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Ut[lt])&&(St[Ut[lt]]=nt[Ut[lt]]);return St};const{useToken:ar}=vt.Z,$t=(nt,Lt)=>{const St={},Ut=Object.assign({},nt);return Lt.forEach(lt=>{nt&&lt in nt&&(St[lt]=nt[lt],delete Ut[lt])}),{picked:St,omitted:Ut}};function ur(nt,Lt){const St=nt.type;if((St.__ANT_BUTTON===!0||nt.type==="button")&&nt.props.disabled||St.__ANT_SWITCH===!0&&(nt.props.disabled||nt.props.loading)||St.__ANT_RADIO===!0&&nt.props.disabled){const{picked:Ut,omitted:lt}=$t(nt.props.style,["position","left","right","top","bottom","float","display","zIndex"]),Et=Object.assign(Object.assign({display:"inline-block"},Ut),{cursor:"not-allowed",width:nt.props.block?"100%":void 0}),Zt=Object.assign(Object.assign({},lt),{pointerEvents:"none"}),Be=(0,ut.Tm)(nt,{style:Zt,className:null});return L.createElement("span",{style:Et,className:C()(nt.props.className,`${Lt}-disabled-compatible-wrapper`)},Be)}return nt}const we=L.forwardRef((nt,Lt)=>{var St,Ut;const{prefixCls:lt,openClassName:Et,getTooltipContainer:Zt,overlayClassName:Be,color:He,overlayInnerStyle:ft,children:Z,afterOpenChange:J,afterVisibleChange:K,arrow:B=!0}=nt,j=!!B,{token:ee}=ar(),{getPopupContainer:W,getPrefixCls:De,direction:ot}=L.useContext(ke.E_),[Wt,Ct]=(0,fe.Z)(!1,{value:(St=nt.open)!==null&&St!==void 0?St:nt.visible,defaultValue:(Ut=nt.defaultOpen)!==null&&Ut!==void 0?Ut:nt.defaultVisible}),Qt=()=>{const{title:on,overlay:cn}=nt;return!on&&!cn&&on!==0},ir=on=>{var cn,Dn;Ct(Qt()?!1:on),Qt()||((cn=nt.onOpenChange)===null||cn===void 0||cn.call(nt,on),(Dn=nt.onVisibleChange)===null||Dn===void 0||Dn.call(nt,on))},Er=()=>{var on;const{builtinPlacements:cn,arrowPointAtCenter:Dn=!1,autoAdjustOverflow:ci=!0}=nt,ia=(on=typeof B!="boolean"&&(B==null?void 0:B.arrowPointAtCenter))!==null&&on!==void 0?on:Dn;return cn||(0,bt.Z)({arrowPointAtCenter:ia,autoAdjustOverflow:ci,arrowWidth:j?ee.sizePopupArrow:0,offset:ee.marginXXS})},Qr=(on,cn)=>{const Dn=Er(),ci=Object.keys(Dn).find(ia=>{var Vi,On;return Dn[ia].points[0]===((Vi=cn.points)===null||Vi===void 0?void 0:Vi[0])&&Dn[ia].points[1]===((On=cn.points)===null||On===void 0?void 0:On[1])});if(ci){const ia=on.getBoundingClientRect(),Vi={top:"50%",left:"50%"};/top|Bottom/.test(ci)?Vi.top=`${ia.height-cn.offset[1]}px`:/Top|bottom/.test(ci)&&(Vi.top=`${-cn.offset[1]}px`),/left|Right/.test(ci)?Vi.left=`${ia.width-cn.offset[0]}px`:/right|Left/.test(ci)&&(Vi.left=`${-cn.offset[0]}px`),on.style.transformOrigin=`${Vi.left} ${Vi.top}`}},Mt=()=>{const{title:on,overlay:cn}=nt;return on===0?on:cn||on||""},{getPopupContainer:br,placement:Nt="top",mouseEnterDelay:Pr=.1,mouseLeaveDelay:_r=.1,overlayStyle:kr,rootClassName:zt}=nt,mr=Dt(nt,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Or=De("tooltip",lt),X=De(),Nr=nt["data-popover-inject"];let Xe=Wt;!("open"in nt)&&!("visible"in nt)&&Qt()&&(Xe=!1);const xe=ur((0,ut.l$)(Z)&&!(0,ut.M2)(Z)?Z:L.createElement("span",null,Z),Or),rt=xe.props,kt=!rt.className||typeof rt.className=="string"?C()(rt.className,{[Et||`${Or}-open`]:!0}):rt.className,[cr,Ar]=Ne(Or,!Nr),Lr=Re(Or,He),sr=Object.assign(Object.assign({},ft),Lr.overlayStyle),Ge=Lr.arrowStyle,Gr=C()(Be,{[`${Or}-rtl`]:ot==="rtl"},Lr.className,zt,Ar);return cr(L.createElement(pe,Object.assign({},mr,{showArrow:j,placement:Nt,mouseEnterDelay:Pr,mouseLeaveDelay:_r,prefixCls:Or,overlayClassName:Gr,overlayStyle:Object.assign(Object.assign({},Ge),kr),getTooltipContainer:br||Zt||W,ref:Lt,builtinPlacements:Er(),overlay:Mt(),visible:Xe,onVisibleChange:ir,afterVisibleChange:J!=null?J:K,onPopupAlign:Qr,overlayInnerStyle:sr,arrowContent:L.createElement("span",{className:`${Or}-arrow-content`}),motion:{motionName:(0,je.mL)(X,"zoom-big-fast",nt.transitionName),motionDeadline:1e3}}),Xe?(0,ut.Tm)(xe,{className:kt}):xe))});we._InternalPanelDoNotUseOrYouWillBeFired=st;var At=we},48583:function(Qe,te,m){"use strict";var v=m(27418);function C(We,Ne){if(We===Ne)return 0;for(var he=We.length,Ve=Ne.length,ie=0,ze=Math.min(he,Ve);ie<ze;++ie)if(We[ie]!==Ne[ie]){he=We[ie],Ve=Ne[ie];break}return he<Ve?-1:Ve<he?1:0}function l(We){return m.g.Buffer&&typeof m.g.Buffer.isBuffer=="function"?m.g.Buffer.isBuffer(We):!!(We!=null&&We._isBuffer)}var $=m(30069),R=Object.prototype.hasOwnProperty,z=Array.prototype.slice,L=function(){return function(){}.name==="foo"}();function T(We){return Object.prototype.toString.call(We)}function O(We){return l(We)||typeof m.g.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(We):We?!!(We instanceof DataView||We.buffer&&We.buffer instanceof ArrayBuffer):!1}var F=Qe.exports=je,ue=/\s*function\s+([^\(\s]*)\s*/;function Ae(We){if($.isFunction(We)){if(L)return We.name;var Ne=We.toString(),he=Ne.match(ue);return he&&he[1]}}F.AssertionError=function(Ne){this.name="AssertionError",this.actual=Ne.actual,this.expected=Ne.expected,this.operator=Ne.operator,Ne.message?(this.message=Ne.message,this.generatedMessage=!1):(this.message=fe(this),this.generatedMessage=!0);var he=Ne.stackStartFunction||ke;if(Error.captureStackTrace)Error.captureStackTrace(this,he);else{var Ve=new Error;if(Ve.stack){var ie=Ve.stack,ze=Ae(he),Le=ie.indexOf(`
`+ze);if(Le>=0){var Re=ie.indexOf(`
`,Le+1);ie=ie.substring(Re+1)}this.stack=ie}}},$.inherits(F.AssertionError,Error);function re(We,Ne){return typeof We=="string"?We.length<Ne?We:We.slice(0,Ne):We}function pe(We){if(L||!$.isFunction(We))return $.inspect(We);var Ne=Ae(We),he=Ne?": "+Ne:"";return"[Function"+he+"]"}function fe(We){return re(pe(We.actual),128)+" "+We.operator+" "+re(pe(We.expected),128)}function ke(We,Ne,he,Ve,ie){throw new F.AssertionError({message:he,actual:We,expected:Ne,operator:Ve,stackStartFunction:ie})}F.fail=ke;function je(We,Ne){We||ke(We,!0,Ne,"==",F.ok)}F.ok=je,F.equal=function(Ne,he,Ve){Ne!=he&&ke(Ne,he,Ve,"==",F.equal)},F.notEqual=function(Ne,he,Ve){Ne==he&&ke(Ne,he,Ve,"!=",F.notEqual)},F.deepEqual=function(Ne,he,Ve){bt(Ne,he,!1)||ke(Ne,he,Ve,"deepEqual",F.deepEqual)},F.deepStrictEqual=function(Ne,he,Ve){bt(Ne,he,!0)||ke(Ne,he,Ve,"deepStrictEqual",F.deepStrictEqual)};function bt(We,Ne,he,Ve){if(We===Ne)return!0;if(l(We)&&l(Ne))return C(We,Ne)===0;if($.isDate(We)&&$.isDate(Ne))return We.getTime()===Ne.getTime();if($.isRegExp(We)&&$.isRegExp(Ne))return We.source===Ne.source&&We.global===Ne.global&&We.multiline===Ne.multiline&&We.lastIndex===Ne.lastIndex&&We.ignoreCase===Ne.ignoreCase;if((We===null||typeof We!="object")&&(Ne===null||typeof Ne!="object"))return he?We===Ne:We==Ne;if(O(We)&&O(Ne)&&T(We)===T(Ne)&&!(We instanceof Float32Array||We instanceof Float64Array))return C(new Uint8Array(We.buffer),new Uint8Array(Ne.buffer))===0;if(l(We)!==l(Ne))return!1;Ve=Ve||{actual:[],expected:[]};var ie=Ve.actual.indexOf(We);return ie!==-1&&ie===Ve.expected.indexOf(Ne)?!0:(Ve.actual.push(We),Ve.expected.push(Ne),wt(We,Ne,he,Ve))}function ut(We){return Object.prototype.toString.call(We)=="[object Arguments]"}function wt(We,Ne,he,Ve){if(We==null||Ne===null||Ne===void 0)return!1;if($.isPrimitive(We)||$.isPrimitive(Ne))return We===Ne;if(he&&Object.getPrototypeOf(We)!==Object.getPrototypeOf(Ne))return!1;var ie=ut(We),ze=ut(Ne);if(ie&&!ze||!ie&&ze)return!1;if(ie)return We=z.call(We),Ne=z.call(Ne),bt(We,Ne,he);var Le=ht(We),Re=ht(Ne),st,vt;if(Le.length!==Re.length)return!1;for(Le.sort(),Re.sort(),vt=Le.length-1;vt>=0;vt--)if(Le[vt]!==Re[vt])return!1;for(vt=Le.length-1;vt>=0;vt--)if(st=Le[vt],!bt(We[st],Ne[st],he,Ve))return!1;return!0}F.notDeepEqual=function(Ne,he,Ve){bt(Ne,he,!1)&&ke(Ne,he,Ve,"notDeepEqual",F.notDeepEqual)},F.notDeepStrictEqual=se;function se(We,Ne,he){bt(We,Ne,!0)&&ke(We,Ne,he,"notDeepStrictEqual",se)}F.strictEqual=function(Ne,he,Ve){Ne!==he&&ke(Ne,he,Ve,"===",F.strictEqual)},F.notStrictEqual=function(Ne,he,Ve){Ne===he&&ke(Ne,he,Ve,"!==",F.notStrictEqual)};function qe(We,Ne){if(!We||!Ne)return!1;if(Object.prototype.toString.call(Ne)=="[object RegExp]")return Ne.test(We);try{if(We instanceof Ne)return!0}catch(he){}return Error.isPrototypeOf(Ne)?!1:Ne.call({},We)===!0}function me(We){var Ne;try{We()}catch(he){Ne=he}return Ne}function _e(We,Ne,he,Ve){var ie;if(typeof Ne!="function")throw new TypeError('"block" argument must be a function');typeof he=="string"&&(Ve=he,he=null),ie=me(Ne),Ve=(he&&he.name?" ("+he.name+").":".")+(Ve?" "+Ve:"."),We&&!ie&&ke(ie,he,"Missing expected exception"+Ve);var ze=typeof Ve=="string",Le=!We&&$.isError(ie),Re=!We&&ie&&!he;if((Le&&ze&&qe(ie,he)||Re)&&ke(ie,he,"Got unwanted exception"+Ve),We&&ie&&he&&!qe(ie,he)||!We&&ie)throw ie}F.throws=function(We,Ne,he){_e(!0,We,Ne,he)},F.doesNotThrow=function(We,Ne,he){_e(!1,We,Ne,he)},F.ifError=function(We){if(We)throw We};function Te(We,Ne){We||ke(We,!0,Ne,"==",Te)}F.strict=v(Te,F,{equal:F.strictEqual,deepEqual:F.deepStrictEqual,notEqual:F.notStrictEqual,notDeepEqual:F.notDeepStrictEqual}),F.strict.strict=F.strict;var ht=Object.keys||function(We){var Ne=[];for(var he in We)R.call(We,he)&&Ne.push(he);return Ne}},16076:function(Qe){typeof Object.create=="function"?Qe.exports=function(m,v){m.super_=v,m.prototype=Object.create(v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:Qe.exports=function(m,v){m.super_=v;var C=function(){};C.prototype=v.prototype,m.prototype=new C,m.prototype.constructor=m}},52014:function(Qe){Qe.exports=function(m){return m&&typeof m=="object"&&typeof m.copy=="function"&&typeof m.fill=="function"&&typeof m.readUInt8=="function"}},30069:function(Qe,te,m){var v=m(34155),C=/%[sdj%]/g;te.format=function(Re){if(!wt(Re)){for(var st=[],vt=0;vt<arguments.length;vt++)st.push(R(arguments[vt]));return st.join(" ")}for(var vt=1,Dt=arguments,ar=Dt.length,$t=String(Re).replace(C,function(we){if(we==="%%")return"%";if(vt>=ar)return we;switch(we){case"%s":return String(Dt[vt++]);case"%d":return Number(Dt[vt++]);case"%j":try{return JSON.stringify(Dt[vt++])}catch(At){return"[Circular]"}default:return we}}),ur=Dt[vt];vt<ar;ur=Dt[++vt])je(ur)||!_e(ur)?$t+=" "+ur:$t+=" "+R(ur);return $t},te.deprecate=function(Re,st){if(qe(m.g.process))return function(){return te.deprecate(Re,st).apply(this,arguments)};if(v.noDeprecation===!0)return Re;var vt=!1;function Dt(){if(!vt){if(v.throwDeprecation)throw new Error(st);v.traceDeprecation?console.trace(st):console.error(st),vt=!0}return Re.apply(this,arguments)}return Dt};var l={},$;te.debuglog=function(Re){if(qe($)&&($={NODE_ENV:"production",PUBLIC_PATH:"/"}.NODE_DEBUG||""),Re=Re.toUpperCase(),!l[Re])if(new RegExp("\\b"+Re+"\\b","i").test($)){var st=v.pid;l[Re]=function(){var vt=te.format.apply(te,arguments);console.error("%s %d: %s",Re,st,vt)}}else l[Re]=function(){};return l[Re]};function R(Re,st){var vt={seen:[],stylize:L};return arguments.length>=3&&(vt.depth=arguments[2]),arguments.length>=4&&(vt.colors=arguments[3]),ke(st)?vt.showHidden=st:st&&te._extend(vt,st),qe(vt.showHidden)&&(vt.showHidden=!1),qe(vt.depth)&&(vt.depth=2),qe(vt.colors)&&(vt.colors=!1),qe(vt.customInspect)&&(vt.customInspect=!0),vt.colors&&(vt.stylize=z),O(vt,Re,vt.depth)}te.inspect=R,R.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},R.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function z(Re,st){var vt=R.styles[st];return vt?"\x1B["+R.colors[vt][0]+"m"+Re+"\x1B["+R.colors[vt][1]+"m":Re}function L(Re,st){return Re}function T(Re){var st={};return Re.forEach(function(vt,Dt){st[vt]=!0}),st}function O(Re,st,vt){if(Re.customInspect&&st&&We(st.inspect)&&st.inspect!==te.inspect&&!(st.constructor&&st.constructor.prototype===st)){var Dt=st.inspect(vt,Re);return wt(Dt)||(Dt=O(Re,Dt,vt)),Dt}var ar=F(Re,st);if(ar)return ar;var $t=Object.keys(st),ur=T($t);if(Re.showHidden&&($t=Object.getOwnPropertyNames(st)),ht(st)&&($t.indexOf("message")>=0||$t.indexOf("description")>=0))return ue(st);if($t.length===0){if(We(st)){var we=st.name?": "+st.name:"";return Re.stylize("[Function"+we+"]","special")}if(me(st))return Re.stylize(RegExp.prototype.toString.call(st),"regexp");if(Te(st))return Re.stylize(Date.prototype.toString.call(st),"date");if(ht(st))return ue(st)}var At="",nt=!1,Lt=["{","}"];if(fe(st)&&(nt=!0,Lt=["[","]"]),We(st)){var St=st.name?": "+st.name:"";At=" [Function"+St+"]"}if(me(st)&&(At=" "+RegExp.prototype.toString.call(st)),Te(st)&&(At=" "+Date.prototype.toUTCString.call(st)),ht(st)&&(At=" "+ue(st)),$t.length===0&&(!nt||st.length==0))return Lt[0]+At+Lt[1];if(vt<0)return me(st)?Re.stylize(RegExp.prototype.toString.call(st),"regexp"):Re.stylize("[Object]","special");Re.seen.push(st);var Ut;return nt?Ut=Ae(Re,st,vt,ur,$t):Ut=$t.map(function(lt){return re(Re,st,vt,ur,lt,nt)}),Re.seen.pop(),pe(Ut,At,Lt)}function F(Re,st){if(qe(st))return Re.stylize("undefined","undefined");if(wt(st)){var vt="'"+JSON.stringify(st).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Re.stylize(vt,"string")}if(ut(st))return Re.stylize(""+st,"number");if(ke(st))return Re.stylize(""+st,"boolean");if(je(st))return Re.stylize("null","null")}function ue(Re){return"["+Error.prototype.toString.call(Re)+"]"}function Ae(Re,st,vt,Dt,ar){for(var $t=[],ur=0,we=st.length;ur<we;++ur)Le(st,String(ur))?$t.push(re(Re,st,vt,Dt,String(ur),!0)):$t.push("");return ar.forEach(function(At){At.match(/^\d+$/)||$t.push(re(Re,st,vt,Dt,At,!0))}),$t}function re(Re,st,vt,Dt,ar,$t){var ur,we,At;if(At=Object.getOwnPropertyDescriptor(st,ar)||{value:st[ar]},At.get?At.set?we=Re.stylize("[Getter/Setter]","special"):we=Re.stylize("[Getter]","special"):At.set&&(we=Re.stylize("[Setter]","special")),Le(Dt,ar)||(ur="["+ar+"]"),we||(Re.seen.indexOf(At.value)<0?(je(vt)?we=O(Re,At.value,null):we=O(Re,At.value,vt-1),we.indexOf(`
`)>-1&&($t?we=we.split(`
`).map(function(nt){return"  "+nt}).join(`
`).substr(2):we=`
`+we.split(`
`).map(function(nt){return"   "+nt}).join(`
`))):we=Re.stylize("[Circular]","special")),qe(ur)){if($t&&ar.match(/^\d+$/))return we;ur=JSON.stringify(""+ar),ur.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ur=ur.substr(1,ur.length-2),ur=Re.stylize(ur,"name")):(ur=ur.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ur=Re.stylize(ur,"string"))}return ur+": "+we}function pe(Re,st,vt){var Dt=0,ar=Re.reduce(function($t,ur){return Dt++,ur.indexOf(`
`)>=0&&Dt++,$t+ur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ar>60?vt[0]+(st===""?"":st+`
 `)+" "+Re.join(`,
  `)+" "+vt[1]:vt[0]+st+" "+Re.join(", ")+" "+vt[1]}function fe(Re){return Array.isArray(Re)}te.isArray=fe;function ke(Re){return typeof Re=="boolean"}te.isBoolean=ke;function je(Re){return Re===null}te.isNull=je;function bt(Re){return Re==null}te.isNullOrUndefined=bt;function ut(Re){return typeof Re=="number"}te.isNumber=ut;function wt(Re){return typeof Re=="string"}te.isString=wt;function se(Re){return typeof Re=="symbol"}te.isSymbol=se;function qe(Re){return Re===void 0}te.isUndefined=qe;function me(Re){return _e(Re)&&he(Re)==="[object RegExp]"}te.isRegExp=me;function _e(Re){return typeof Re=="object"&&Re!==null}te.isObject=_e;function Te(Re){return _e(Re)&&he(Re)==="[object Date]"}te.isDate=Te;function ht(Re){return _e(Re)&&(he(Re)==="[object Error]"||Re instanceof Error)}te.isError=ht;function We(Re){return typeof Re=="function"}te.isFunction=We;function Ne(Re){return Re===null||typeof Re=="boolean"||typeof Re=="number"||typeof Re=="string"||typeof Re=="symbol"||typeof Re=="undefined"}te.isPrimitive=Ne,te.isBuffer=m(52014);function he(Re){return Object.prototype.toString.call(Re)}function Ve(Re){return Re<10?"0"+Re.toString(10):Re.toString(10)}var ie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ze(){var Re=new Date,st=[Ve(Re.getHours()),Ve(Re.getMinutes()),Ve(Re.getSeconds())].join(":");return[Re.getDate(),ie[Re.getMonth()],st].join(" ")}te.log=function(){console.log("%s - %s",ze(),te.format.apply(te,arguments))},te.inherits=m(16076),te._extend=function(Re,st){if(!st||!_e(st))return Re;for(var vt=Object.keys(st),Dt=vt.length;Dt--;)Re[vt[Dt]]=st[vt[Dt]];return Re};function Le(Re,st){return Object.prototype.hasOwnProperty.call(Re,st)}},79742:function(Qe,te){"use strict";te.byteLength=L,te.toByteArray=O,te.fromByteArray=Ae;for(var m=[],v=[],C=typeof Uint8Array!="undefined"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$=0,R=l.length;$<R;++$)m[$]=l[$],v[l.charCodeAt($)]=$;v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63;function z(re){var pe=re.length;if(pe%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var fe=re.indexOf("=");fe===-1&&(fe=pe);var ke=fe===pe?0:4-fe%4;return[fe,ke]}function L(re){var pe=z(re),fe=pe[0],ke=pe[1];return(fe+ke)*3/4-ke}function T(re,pe,fe){return(pe+fe)*3/4-fe}function O(re){var pe,fe=z(re),ke=fe[0],je=fe[1],bt=new C(T(re,ke,je)),ut=0,wt=je>0?ke-4:ke,se;for(se=0;se<wt;se+=4)pe=v[re.charCodeAt(se)]<<18|v[re.charCodeAt(se+1)]<<12|v[re.charCodeAt(se+2)]<<6|v[re.charCodeAt(se+3)],bt[ut++]=pe>>16&255,bt[ut++]=pe>>8&255,bt[ut++]=pe&255;return je===2&&(pe=v[re.charCodeAt(se)]<<2|v[re.charCodeAt(se+1)]>>4,bt[ut++]=pe&255),je===1&&(pe=v[re.charCodeAt(se)]<<10|v[re.charCodeAt(se+1)]<<4|v[re.charCodeAt(se+2)]>>2,bt[ut++]=pe>>8&255,bt[ut++]=pe&255),bt}function F(re){return m[re>>18&63]+m[re>>12&63]+m[re>>6&63]+m[re&63]}function ue(re,pe,fe){for(var ke,je=[],bt=pe;bt<fe;bt+=3)ke=(re[bt]<<16&16711680)+(re[bt+1]<<8&65280)+(re[bt+2]&255),je.push(F(ke));return je.join("")}function Ae(re){for(var pe,fe=re.length,ke=fe%3,je=[],bt=16383,ut=0,wt=fe-ke;ut<wt;ut+=bt)je.push(ue(re,ut,ut+bt>wt?wt:ut+bt));return ke===1?(pe=re[fe-1],je.push(m[pe>>2]+m[pe<<4&63]+"==")):ke===2&&(pe=(re[fe-2]<<8)+re[fe-1],je.push(m[pe>>10]+m[pe>>4&63]+m[pe<<2&63]+"=")),je.join("")}},48764:function(Qe,te,m){"use strict";var v;var C=m(79742),l=m(80645),$=m(87300);te.lW=T,v=bt,te.h2=50,T.TYPED_ARRAY_SUPPORT=m.g.TYPED_ARRAY_SUPPORT!==void 0?m.g.TYPED_ARRAY_SUPPORT:R(),v=z();function R(){try{var K=new Uint8Array(1);return K.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},K.foo()===42&&typeof K.subarray=="function"&&K.subarray(1,1).byteLength===0}catch(B){return!1}}function z(){return T.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function L(K,B){if(z()<B)throw new RangeError("Invalid typed array length");return T.TYPED_ARRAY_SUPPORT?(K=new Uint8Array(B),K.__proto__=T.prototype):(K===null&&(K=new T(B)),K.length=B),K}function T(K,B,j){if(!T.TYPED_ARRAY_SUPPORT&&!(this instanceof T))return new T(K,B,j);if(typeof K=="number"){if(typeof B=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ae(this,K)}return O(this,K,B,j)}T.poolSize=8192,T._augment=function(K){return K.__proto__=T.prototype,K};function O(K,B,j,ee){if(typeof B=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&B instanceof ArrayBuffer?fe(K,B,j,ee):typeof B=="string"?re(K,B,j):ke(K,B)}T.from=function(K,B,j){return O(null,K,B,j)},T.TYPED_ARRAY_SUPPORT&&(T.prototype.__proto__=Uint8Array.prototype,T.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&T[Symbol.species]===T&&Object.defineProperty(T,Symbol.species,{value:null,configurable:!0}));function F(K){if(typeof K!="number")throw new TypeError('"size" argument must be a number');if(K<0)throw new RangeError('"size" argument must not be negative')}function ue(K,B,j,ee){return F(B),B<=0?L(K,B):j!==void 0?typeof ee=="string"?L(K,B).fill(j,ee):L(K,B).fill(j):L(K,B)}T.alloc=function(K,B,j){return ue(null,K,B,j)};function Ae(K,B){if(F(B),K=L(K,B<0?0:je(B)|0),!T.TYPED_ARRAY_SUPPORT)for(var j=0;j<B;++j)K[j]=0;return K}T.allocUnsafe=function(K){return Ae(null,K)},T.allocUnsafeSlow=function(K){return Ae(null,K)};function re(K,B,j){if((typeof j!="string"||j==="")&&(j="utf8"),!T.isEncoding(j))throw new TypeError('"encoding" must be a valid string encoding');var ee=ut(B,j)|0;K=L(K,ee);var W=K.write(B,j);return W!==ee&&(K=K.slice(0,W)),K}function pe(K,B){var j=B.length<0?0:je(B.length)|0;K=L(K,j);for(var ee=0;ee<j;ee+=1)K[ee]=B[ee]&255;return K}function fe(K,B,j,ee){if(B.byteLength,j<0||B.byteLength<j)throw new RangeError("'offset' is out of bounds");if(B.byteLength<j+(ee||0))throw new RangeError("'length' is out of bounds");return j===void 0&&ee===void 0?B=new Uint8Array(B):ee===void 0?B=new Uint8Array(B,j):B=new Uint8Array(B,j,ee),T.TYPED_ARRAY_SUPPORT?(K=B,K.__proto__=T.prototype):K=pe(K,B),K}function ke(K,B){if(T.isBuffer(B)){var j=je(B.length)|0;return K=L(K,j),K.length===0||B.copy(K,0,0,j),K}if(B){if(typeof ArrayBuffer!="undefined"&&B.buffer instanceof ArrayBuffer||"length"in B)return typeof B.length!="number"||J(B.length)?L(K,0):pe(K,B);if(B.type==="Buffer"&&$(B.data))return pe(K,B.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function je(K){if(K>=z())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z().toString(16)+" bytes");return K|0}function bt(K){return+K!=K&&(K=0),T.alloc(+K)}T.isBuffer=function(B){return!!(B!=null&&B._isBuffer)},T.compare=function(B,j){if(!T.isBuffer(B)||!T.isBuffer(j))throw new TypeError("Arguments must be Buffers");if(B===j)return 0;for(var ee=B.length,W=j.length,De=0,ot=Math.min(ee,W);De<ot;++De)if(B[De]!==j[De]){ee=B[De],W=j[De];break}return ee<W?-1:W<ee?1:0},T.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(B,j){if(!$(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return T.alloc(0);var ee;if(j===void 0)for(j=0,ee=0;ee<B.length;++ee)j+=B[ee].length;var W=T.allocUnsafe(j),De=0;for(ee=0;ee<B.length;++ee){var ot=B[ee];if(!T.isBuffer(ot))throw new TypeError('"list" argument must be an Array of Buffers');ot.copy(W,De),De+=ot.length}return W};function ut(K,B){if(T.isBuffer(K))return K.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(K)||K instanceof ArrayBuffer))return K.byteLength;typeof K!="string"&&(K=""+K);var j=K.length;if(j===0)return 0;for(var ee=!1;;)switch(B){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":case void 0:return Zt(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return ft(K).length;default:if(ee)return Zt(K).length;B=(""+B).toLowerCase(),ee=!0}}T.byteLength=ut;function wt(K,B,j){var ee=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,B>>>=0,j<=B))return"";for(K||(K="utf8");;)switch(K){case"hex":return vt(this,B,j);case"utf8":case"utf-8":return ie(this,B,j);case"ascii":return Re(this,B,j);case"latin1":case"binary":return st(this,B,j);case"base64":return Ve(this,B,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,B,j);default:if(ee)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),ee=!0}}T.prototype._isBuffer=!0;function se(K,B,j){var ee=K[B];K[B]=K[j],K[j]=ee}T.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var j=0;j<B;j+=2)se(this,j,j+1);return this},T.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var j=0;j<B;j+=4)se(this,j,j+3),se(this,j+1,j+2);return this},T.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var j=0;j<B;j+=8)se(this,j,j+7),se(this,j+1,j+6),se(this,j+2,j+5),se(this,j+3,j+4);return this},T.prototype.toString=function(){var B=this.length|0;return B===0?"":arguments.length===0?ie(this,0,B):wt.apply(this,arguments)},T.prototype.equals=function(B){if(!T.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:T.compare(this,B)===0},T.prototype.inspect=function(){var B="",j=te.h2;return this.length>0&&(B=this.toString("hex",0,j).match(/.{2}/g).join(" "),this.length>j&&(B+=" ... ")),"<Buffer "+B+">"},T.prototype.compare=function(B,j,ee,W,De){if(!T.isBuffer(B))throw new TypeError("Argument must be a Buffer");if(j===void 0&&(j=0),ee===void 0&&(ee=B?B.length:0),W===void 0&&(W=0),De===void 0&&(De=this.length),j<0||ee>B.length||W<0||De>this.length)throw new RangeError("out of range index");if(W>=De&&j>=ee)return 0;if(W>=De)return-1;if(j>=ee)return 1;if(j>>>=0,ee>>>=0,W>>>=0,De>>>=0,this===B)return 0;for(var ot=De-W,Wt=ee-j,Ct=Math.min(ot,Wt),Qt=this.slice(W,De),ir=B.slice(j,ee),Er=0;Er<Ct;++Er)if(Qt[Er]!==ir[Er]){ot=Qt[Er],Wt=ir[Er];break}return ot<Wt?-1:Wt<ot?1:0};function qe(K,B,j,ee,W){if(K.length===0)return-1;if(typeof j=="string"?(ee=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,isNaN(j)&&(j=W?0:K.length-1),j<0&&(j=K.length+j),j>=K.length){if(W)return-1;j=K.length-1}else if(j<0)if(W)j=0;else return-1;if(typeof B=="string"&&(B=T.from(B,ee)),T.isBuffer(B))return B.length===0?-1:me(K,B,j,ee,W);if(typeof B=="number")return B=B&255,T.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(K,B,j):Uint8Array.prototype.lastIndexOf.call(K,B,j):me(K,[B],j,ee,W);throw new TypeError("val must be string, number or Buffer")}function me(K,B,j,ee,W){var De=1,ot=K.length,Wt=B.length;if(ee!==void 0&&(ee=String(ee).toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(K.length<2||B.length<2)return-1;De=2,ot/=2,Wt/=2,j/=2}function Ct(Mt,br){return De===1?Mt[br]:Mt.readUInt16BE(br*De)}var Qt;if(W){var ir=-1;for(Qt=j;Qt<ot;Qt++)if(Ct(K,Qt)===Ct(B,ir===-1?0:Qt-ir)){if(ir===-1&&(ir=Qt),Qt-ir+1===Wt)return ir*De}else ir!==-1&&(Qt-=Qt-ir),ir=-1}else for(j+Wt>ot&&(j=ot-Wt),Qt=j;Qt>=0;Qt--){for(var Er=!0,Qr=0;Qr<Wt;Qr++)if(Ct(K,Qt+Qr)!==Ct(B,Qr)){Er=!1;break}if(Er)return Qt}return-1}T.prototype.includes=function(B,j,ee){return this.indexOf(B,j,ee)!==-1},T.prototype.indexOf=function(B,j,ee){return qe(this,B,j,ee,!0)},T.prototype.lastIndexOf=function(B,j,ee){return qe(this,B,j,ee,!1)};function _e(K,B,j,ee){j=Number(j)||0;var W=K.length-j;ee?(ee=Number(ee),ee>W&&(ee=W)):ee=W;var De=B.length;if(De%2!==0)throw new TypeError("Invalid hex string");ee>De/2&&(ee=De/2);for(var ot=0;ot<ee;++ot){var Wt=parseInt(B.substr(ot*2,2),16);if(isNaN(Wt))return ot;K[j+ot]=Wt}return ot}function Te(K,B,j,ee){return Z(Zt(B,K.length-j),K,j,ee)}function ht(K,B,j,ee){return Z(Be(B),K,j,ee)}function We(K,B,j,ee){return ht(K,B,j,ee)}function Ne(K,B,j,ee){return Z(ft(B),K,j,ee)}function he(K,B,j,ee){return Z(He(B,K.length-j),K,j,ee)}T.prototype.write=function(B,j,ee,W){if(j===void 0)W="utf8",ee=this.length,j=0;else if(ee===void 0&&typeof j=="string")W=j,ee=this.length,j=0;else if(isFinite(j))j=j|0,isFinite(ee)?(ee=ee|0,W===void 0&&(W="utf8")):(W=ee,ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var De=this.length-j;if((ee===void 0||ee>De)&&(ee=De),B.length>0&&(ee<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");for(var ot=!1;;)switch(W){case"hex":return _e(this,B,j,ee);case"utf8":case"utf-8":return Te(this,B,j,ee);case"ascii":return ht(this,B,j,ee);case"latin1":case"binary":return We(this,B,j,ee);case"base64":return Ne(this,B,j,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,B,j,ee);default:if(ot)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),ot=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ve(K,B,j){return B===0&&j===K.length?C.fromByteArray(K):C.fromByteArray(K.slice(B,j))}function ie(K,B,j){j=Math.min(K.length,j);for(var ee=[],W=B;W<j;){var De=K[W],ot=null,Wt=De>239?4:De>223?3:De>191?2:1;if(W+Wt<=j){var Ct,Qt,ir,Er;switch(Wt){case 1:De<128&&(ot=De);break;case 2:Ct=K[W+1],(Ct&192)===128&&(Er=(De&31)<<6|Ct&63,Er>127&&(ot=Er));break;case 3:Ct=K[W+1],Qt=K[W+2],(Ct&192)===128&&(Qt&192)===128&&(Er=(De&15)<<12|(Ct&63)<<6|Qt&63,Er>2047&&(Er<55296||Er>57343)&&(ot=Er));break;case 4:Ct=K[W+1],Qt=K[W+2],ir=K[W+3],(Ct&192)===128&&(Qt&192)===128&&(ir&192)===128&&(Er=(De&15)<<18|(Ct&63)<<12|(Qt&63)<<6|ir&63,Er>65535&&Er<1114112&&(ot=Er))}}ot===null?(ot=65533,Wt=1):ot>65535&&(ot-=65536,ee.push(ot>>>10&1023|55296),ot=56320|ot&1023),ee.push(ot),W+=Wt}return Le(ee)}var ze=4096;function Le(K){var B=K.length;if(B<=ze)return String.fromCharCode.apply(String,K);for(var j="",ee=0;ee<B;)j+=String.fromCharCode.apply(String,K.slice(ee,ee+=ze));return j}function Re(K,B,j){var ee="";j=Math.min(K.length,j);for(var W=B;W<j;++W)ee+=String.fromCharCode(K[W]&127);return ee}function st(K,B,j){var ee="";j=Math.min(K.length,j);for(var W=B;W<j;++W)ee+=String.fromCharCode(K[W]);return ee}function vt(K,B,j){var ee=K.length;(!B||B<0)&&(B=0),(!j||j<0||j>ee)&&(j=ee);for(var W="",De=B;De<j;++De)W+=Et(K[De]);return W}function Dt(K,B,j){for(var ee=K.slice(B,j),W="",De=0;De<ee.length;De+=2)W+=String.fromCharCode(ee[De]+ee[De+1]*256);return W}T.prototype.slice=function(B,j){var ee=this.length;B=~~B,j=j===void 0?ee:~~j,B<0?(B+=ee,B<0&&(B=0)):B>ee&&(B=ee),j<0?(j+=ee,j<0&&(j=0)):j>ee&&(j=ee),j<B&&(j=B);var W;if(T.TYPED_ARRAY_SUPPORT)W=this.subarray(B,j),W.__proto__=T.prototype;else{var De=j-B;W=new T(De,void 0);for(var ot=0;ot<De;++ot)W[ot]=this[ot+B]}return W};function ar(K,B,j){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+B>j)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUIntLE=function(B,j,ee){B=B|0,j=j|0,ee||ar(B,j,this.length);for(var W=this[B],De=1,ot=0;++ot<j&&(De*=256);)W+=this[B+ot]*De;return W},T.prototype.readUIntBE=function(B,j,ee){B=B|0,j=j|0,ee||ar(B,j,this.length);for(var W=this[B+--j],De=1;j>0&&(De*=256);)W+=this[B+--j]*De;return W},T.prototype.readUInt8=function(B,j){return j||ar(B,1,this.length),this[B]},T.prototype.readUInt16LE=function(B,j){return j||ar(B,2,this.length),this[B]|this[B+1]<<8},T.prototype.readUInt16BE=function(B,j){return j||ar(B,2,this.length),this[B]<<8|this[B+1]},T.prototype.readUInt32LE=function(B,j){return j||ar(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},T.prototype.readUInt32BE=function(B,j){return j||ar(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},T.prototype.readIntLE=function(B,j,ee){B=B|0,j=j|0,ee||ar(B,j,this.length);for(var W=this[B],De=1,ot=0;++ot<j&&(De*=256);)W+=this[B+ot]*De;return De*=128,W>=De&&(W-=Math.pow(2,8*j)),W},T.prototype.readIntBE=function(B,j,ee){B=B|0,j=j|0,ee||ar(B,j,this.length);for(var W=j,De=1,ot=this[B+--W];W>0&&(De*=256);)ot+=this[B+--W]*De;return De*=128,ot>=De&&(ot-=Math.pow(2,8*j)),ot},T.prototype.readInt8=function(B,j){return j||ar(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},T.prototype.readInt16LE=function(B,j){j||ar(B,2,this.length);var ee=this[B]|this[B+1]<<8;return ee&32768?ee|4294901760:ee},T.prototype.readInt16BE=function(B,j){j||ar(B,2,this.length);var ee=this[B+1]|this[B]<<8;return ee&32768?ee|4294901760:ee},T.prototype.readInt32LE=function(B,j){return j||ar(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},T.prototype.readInt32BE=function(B,j){return j||ar(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},T.prototype.readFloatLE=function(B,j){return j||ar(B,4,this.length),l.read(this,B,!0,23,4)},T.prototype.readFloatBE=function(B,j){return j||ar(B,4,this.length),l.read(this,B,!1,23,4)},T.prototype.readDoubleLE=function(B,j){return j||ar(B,8,this.length),l.read(this,B,!0,52,8)},T.prototype.readDoubleBE=function(B,j){return j||ar(B,8,this.length),l.read(this,B,!1,52,8)};function $t(K,B,j,ee,W,De){if(!T.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>W||B<De)throw new RangeError('"value" argument is out of bounds');if(j+ee>K.length)throw new RangeError("Index out of range")}T.prototype.writeUIntLE=function(B,j,ee,W){if(B=+B,j=j|0,ee=ee|0,!W){var De=Math.pow(2,8*ee)-1;$t(this,B,j,ee,De,0)}var ot=1,Wt=0;for(this[j]=B&255;++Wt<ee&&(ot*=256);)this[j+Wt]=B/ot&255;return j+ee},T.prototype.writeUIntBE=function(B,j,ee,W){if(B=+B,j=j|0,ee=ee|0,!W){var De=Math.pow(2,8*ee)-1;$t(this,B,j,ee,De,0)}var ot=ee-1,Wt=1;for(this[j+ot]=B&255;--ot>=0&&(Wt*=256);)this[j+ot]=B/Wt&255;return j+ee},T.prototype.writeUInt8=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,1,255,0),T.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),this[j]=B&255,j+1};function ur(K,B,j,ee){B<0&&(B=65535+B+1);for(var W=0,De=Math.min(K.length-j,2);W<De;++W)K[j+W]=(B&255<<8*(ee?W:1-W))>>>(ee?W:1-W)*8}T.prototype.writeUInt16LE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[j]=B&255,this[j+1]=B>>>8):ur(this,B,j,!0),j+2},T.prototype.writeUInt16BE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[j]=B>>>8,this[j+1]=B&255):ur(this,B,j,!1),j+2};function we(K,B,j,ee){B<0&&(B=4294967295+B+1);for(var W=0,De=Math.min(K.length-j,4);W<De;++W)K[j+W]=B>>>(ee?W:3-W)*8&255}T.prototype.writeUInt32LE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[j+3]=B>>>24,this[j+2]=B>>>16,this[j+1]=B>>>8,this[j]=B&255):we(this,B,j,!0),j+4},T.prototype.writeUInt32BE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[j]=B>>>24,this[j+1]=B>>>16,this[j+2]=B>>>8,this[j+3]=B&255):we(this,B,j,!1),j+4},T.prototype.writeIntLE=function(B,j,ee,W){if(B=+B,j=j|0,!W){var De=Math.pow(2,8*ee-1);$t(this,B,j,ee,De-1,-De)}var ot=0,Wt=1,Ct=0;for(this[j]=B&255;++ot<ee&&(Wt*=256);)B<0&&Ct===0&&this[j+ot-1]!==0&&(Ct=1),this[j+ot]=(B/Wt>>0)-Ct&255;return j+ee},T.prototype.writeIntBE=function(B,j,ee,W){if(B=+B,j=j|0,!W){var De=Math.pow(2,8*ee-1);$t(this,B,j,ee,De-1,-De)}var ot=ee-1,Wt=1,Ct=0;for(this[j+ot]=B&255;--ot>=0&&(Wt*=256);)B<0&&Ct===0&&this[j+ot+1]!==0&&(Ct=1),this[j+ot]=(B/Wt>>0)-Ct&255;return j+ee},T.prototype.writeInt8=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,1,127,-128),T.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),B<0&&(B=255+B+1),this[j]=B&255,j+1},T.prototype.writeInt16LE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[j]=B&255,this[j+1]=B>>>8):ur(this,B,j,!0),j+2},T.prototype.writeInt16BE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[j]=B>>>8,this[j+1]=B&255):ur(this,B,j,!1),j+2},T.prototype.writeInt32LE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,4,2147483647,-2147483648),T.TYPED_ARRAY_SUPPORT?(this[j]=B&255,this[j+1]=B>>>8,this[j+2]=B>>>16,this[j+3]=B>>>24):we(this,B,j,!0),j+4},T.prototype.writeInt32BE=function(B,j,ee){return B=+B,j=j|0,ee||$t(this,B,j,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),T.TYPED_ARRAY_SUPPORT?(this[j]=B>>>24,this[j+1]=B>>>16,this[j+2]=B>>>8,this[j+3]=B&255):we(this,B,j,!1),j+4};function At(K,B,j,ee,W,De){if(j+ee>K.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function nt(K,B,j,ee,W){return W||At(K,B,j,4,34028234663852886e22,-34028234663852886e22),l.write(K,B,j,ee,23,4),j+4}T.prototype.writeFloatLE=function(B,j,ee){return nt(this,B,j,!0,ee)},T.prototype.writeFloatBE=function(B,j,ee){return nt(this,B,j,!1,ee)};function Lt(K,B,j,ee,W){return W||At(K,B,j,8,17976931348623157e292,-17976931348623157e292),l.write(K,B,j,ee,52,8),j+8}T.prototype.writeDoubleLE=function(B,j,ee){return Lt(this,B,j,!0,ee)},T.prototype.writeDoubleBE=function(B,j,ee){return Lt(this,B,j,!1,ee)},T.prototype.copy=function(B,j,ee,W){if(ee||(ee=0),!W&&W!==0&&(W=this.length),j>=B.length&&(j=B.length),j||(j=0),W>0&&W<ee&&(W=ee),W===ee||B.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("sourceStart out of bounds");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),B.length-j<W-ee&&(W=B.length-j+ee);var De=W-ee,ot;if(this===B&&ee<j&&j<W)for(ot=De-1;ot>=0;--ot)B[ot+j]=this[ot+ee];else if(De<1e3||!T.TYPED_ARRAY_SUPPORT)for(ot=0;ot<De;++ot)B[ot+j]=this[ot+ee];else Uint8Array.prototype.set.call(B,this.subarray(ee,ee+De),j);return De},T.prototype.fill=function(B,j,ee,W){if(typeof B=="string"){if(typeof j=="string"?(W=j,j=0,ee=this.length):typeof ee=="string"&&(W=ee,ee=this.length),B.length===1){var De=B.charCodeAt(0);De<256&&(B=De)}if(W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!T.isEncoding(W))throw new TypeError("Unknown encoding: "+W)}else typeof B=="number"&&(B=B&255);if(j<0||this.length<j||this.length<ee)throw new RangeError("Out of range index");if(ee<=j)return this;j=j>>>0,ee=ee===void 0?this.length:ee>>>0,B||(B=0);var ot;if(typeof B=="number")for(ot=j;ot<ee;++ot)this[ot]=B;else{var Wt=T.isBuffer(B)?B:Zt(new T(B,W).toString()),Ct=Wt.length;for(ot=0;ot<ee-j;++ot)this[ot+j]=Wt[ot%Ct]}return this};var St=/[^+\/0-9A-Za-z-_]/g;function Ut(K){if(K=lt(K).replace(St,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function lt(K){return K.trim?K.trim():K.replace(/^\s+|\s+$/g,"")}function Et(K){return K<16?"0"+K.toString(16):K.toString(16)}function Zt(K,B){B=B||1/0;for(var j,ee=K.length,W=null,De=[],ot=0;ot<ee;++ot){if(j=K.charCodeAt(ot),j>55295&&j<57344){if(!W){if(j>56319){(B-=3)>-1&&De.push(239,191,189);continue}else if(ot+1===ee){(B-=3)>-1&&De.push(239,191,189);continue}W=j;continue}if(j<56320){(B-=3)>-1&&De.push(239,191,189),W=j;continue}j=(W-55296<<10|j-56320)+65536}else W&&(B-=3)>-1&&De.push(239,191,189);if(W=null,j<128){if((B-=1)<0)break;De.push(j)}else if(j<2048){if((B-=2)<0)break;De.push(j>>6|192,j&63|128)}else if(j<65536){if((B-=3)<0)break;De.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((B-=4)<0)break;De.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return De}function Be(K){for(var B=[],j=0;j<K.length;++j)B.push(K.charCodeAt(j)&255);return B}function He(K,B){for(var j,ee,W,De=[],ot=0;ot<K.length&&!((B-=2)<0);++ot)j=K.charCodeAt(ot),ee=j>>8,W=j%256,De.push(W),De.push(ee);return De}function ft(K){return C.toByteArray(Ut(K))}function Z(K,B,j,ee){for(var W=0;W<ee&&!(W+j>=B.length||W>=K.length);++W)B[W+j]=K[W];return W}function J(K){return K!==K}},87300:function(Qe){var te={}.toString;Qe.exports=Array.isArray||function(m){return te.call(m)=="[object Array]"}},48168:function(Qe,te,m){const v=m(8874),C={};for(const R of Object.keys(v))C[v[R]]=R;const l={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Qe.exports=l;for(const R of Object.keys(l)){if(!("channels"in l[R]))throw new Error("missing channels property: "+R);if(!("labels"in l[R]))throw new Error("missing channel labels property: "+R);if(l[R].labels.length!==l[R].channels)throw new Error("channel and label counts mismatch: "+R);const{channels:z,labels:L}=l[R];delete l[R].channels,delete l[R].labels,Object.defineProperty(l[R],"channels",{value:z}),Object.defineProperty(l[R],"labels",{value:L})}l.rgb.hsl=function(R){const z=R[0]/255,L=R[1]/255,T=R[2]/255,O=Math.min(z,L,T),F=Math.max(z,L,T),ue=F-O;let Ae,re;F===O?Ae=0:z===F?Ae=(L-T)/ue:L===F?Ae=2+(T-z)/ue:T===F&&(Ae=4+(z-L)/ue),Ae=Math.min(Ae*60,360),Ae<0&&(Ae+=360);const pe=(O+F)/2;return F===O?re=0:pe<=.5?re=ue/(F+O):re=ue/(2-F-O),[Ae,re*100,pe*100]},l.rgb.hsv=function(R){let z,L,T,O,F;const ue=R[0]/255,Ae=R[1]/255,re=R[2]/255,pe=Math.max(ue,Ae,re),fe=pe-Math.min(ue,Ae,re),ke=function(je){return(pe-je)/6/fe+1/2};return fe===0?(O=0,F=0):(F=fe/pe,z=ke(ue),L=ke(Ae),T=ke(re),ue===pe?O=T-L:Ae===pe?O=1/3+z-T:re===pe&&(O=2/3+L-z),O<0?O+=1:O>1&&(O-=1)),[O*360,F*100,pe*100]},l.rgb.hwb=function(R){const z=R[0],L=R[1];let T=R[2];const O=l.rgb.hsl(R)[0],F=1/255*Math.min(z,Math.min(L,T));return T=1-1/255*Math.max(z,Math.max(L,T)),[O,F*100,T*100]},l.rgb.cmyk=function(R){const z=R[0]/255,L=R[1]/255,T=R[2]/255,O=Math.min(1-z,1-L,1-T),F=(1-z-O)/(1-O)||0,ue=(1-L-O)/(1-O)||0,Ae=(1-T-O)/(1-O)||0;return[F*100,ue*100,Ae*100,O*100]};function $(R,z){return jd(R[0]-z[0],2)+jd(R[1]-z[1],2)+jd(R[2]-z[2],2)}l.rgb.keyword=function(R){const z=C[R];if(z)return z;let L=1/0,T;for(const O of Object.keys(v)){const F=v[O],ue=$(R,F);ue<L&&(L=ue,T=O)}return T},l.keyword.rgb=function(R){return v[R]},l.rgb.xyz=function(R){let z=R[0]/255,L=R[1]/255,T=R[2]/255;z=z>.04045?jd((z+.055)/1.055,2.4):z/12.92,L=L>.04045?jd((L+.055)/1.055,2.4):L/12.92,T=T>.04045?jd((T+.055)/1.055,2.4):T/12.92;const O=z*.4124+L*.3576+T*.1805,F=z*.2126+L*.7152+T*.0722,ue=z*.0193+L*.1192+T*.9505;return[O*100,F*100,ue*100]},l.rgb.lab=function(R){const z=l.rgb.xyz(R);let L=z[0],T=z[1],O=z[2];L/=95.047,T/=100,O/=108.883,L=L>.008856?jd(L,1/3):7.787*L+16/116,T=T>.008856?jd(T,1/3):7.787*T+16/116,O=O>.008856?jd(O,1/3):7.787*O+16/116;const F=116*T-16,ue=500*(L-T),Ae=200*(T-O);return[F,ue,Ae]},l.hsl.rgb=function(R){const z=R[0]/360,L=R[1]/100,T=R[2]/100;let O,F,ue;if(L===0)return ue=T*255,[ue,ue,ue];T<.5?O=T*(1+L):O=T+L-T*L;const Ae=2*T-O,re=[0,0,0];for(let pe=0;pe<3;pe++)F=z+1/3*-(pe-1),F<0&&F++,F>1&&F--,6*F<1?ue=Ae+(O-Ae)*6*F:2*F<1?ue=O:3*F<2?ue=Ae+(O-Ae)*(2/3-F)*6:ue=Ae,re[pe]=ue*255;return re},l.hsl.hsv=function(R){const z=R[0];let L=R[1]/100,T=R[2]/100,O=L;const F=Math.max(T,.01);T*=2,L*=T<=1?T:2-T,O*=F<=1?F:2-F;const ue=(T+L)/2,Ae=T===0?2*O/(F+O):2*L/(T+L);return[z,Ae*100,ue*100]},l.hsv.rgb=function(R){const z=R[0]/60,L=R[1]/100;let T=R[2]/100;const O=Math.floor(z)%6,F=z-Math.floor(z),ue=255*T*(1-L),Ae=255*T*(1-L*F),re=255*T*(1-L*(1-F));switch(T*=255,O){case 0:return[T,re,ue];case 1:return[Ae,T,ue];case 2:return[ue,T,re];case 3:return[ue,Ae,T];case 4:return[re,ue,T];case 5:return[T,ue,Ae]}},l.hsv.hsl=function(R){const z=R[0],L=R[1]/100,T=R[2]/100,O=Math.max(T,.01);let F,ue;ue=(2-L)*T;const Ae=(2-L)*O;return F=L*O,F/=Ae<=1?Ae:2-Ae,F=F||0,ue/=2,[z,F*100,ue*100]},l.hwb.rgb=function(R){const z=R[0]/360;let L=R[1]/100,T=R[2]/100;const O=L+T;let F;O>1&&(L/=O,T/=O);const ue=Math.floor(6*z),Ae=1-T;F=6*z-ue,ue&1&&(F=1-F);const re=L+F*(Ae-L);let pe,fe,ke;switch(ue){default:case 6:case 0:pe=Ae,fe=re,ke=L;break;case 1:pe=re,fe=Ae,ke=L;break;case 2:pe=L,fe=Ae,ke=re;break;case 3:pe=L,fe=re,ke=Ae;break;case 4:pe=re,fe=L,ke=Ae;break;case 5:pe=Ae,fe=L,ke=re;break}return[pe*255,fe*255,ke*255]},l.cmyk.rgb=function(R){const z=R[0]/100,L=R[1]/100,T=R[2]/100,O=R[3]/100,F=1-Math.min(1,z*(1-O)+O),ue=1-Math.min(1,L*(1-O)+O),Ae=1-Math.min(1,T*(1-O)+O);return[F*255,ue*255,Ae*255]},l.xyz.rgb=function(R){const z=R[0]/100,L=R[1]/100,T=R[2]/100;let O,F,ue;return O=z*3.2406+L*-1.5372+T*-.4986,F=z*-.9689+L*1.8758+T*.0415,ue=z*.0557+L*-.204+T*1.057,O=O>.0031308?1.055*jd(O,1/2.4)-.055:O*12.92,F=F>.0031308?1.055*jd(F,1/2.4)-.055:F*12.92,ue=ue>.0031308?1.055*jd(ue,1/2.4)-.055:ue*12.92,O=Math.min(Math.max(0,O),1),F=Math.min(Math.max(0,F),1),ue=Math.min(Math.max(0,ue),1),[O*255,F*255,ue*255]},l.xyz.lab=function(R){let z=R[0],L=R[1],T=R[2];z/=95.047,L/=100,T/=108.883,z=z>.008856?jd(z,1/3):7.787*z+16/116,L=L>.008856?jd(L,1/3):7.787*L+16/116,T=T>.008856?jd(T,1/3):7.787*T+16/116;const O=116*L-16,F=500*(z-L),ue=200*(L-T);return[O,F,ue]},l.lab.xyz=function(R){const z=R[0],L=R[1],T=R[2];let O,F,ue;F=(z+16)/116,O=L/500+F,ue=F-T/200;const Ae=jd(F,3),re=jd(O,3),pe=jd(ue,3);return F=Ae>.008856?Ae:(F-16/116)/7.787,O=re>.008856?re:(O-16/116)/7.787,ue=pe>.008856?pe:(ue-16/116)/7.787,O*=95.047,F*=100,ue*=108.883,[O,F,ue]},l.lab.lch=function(R){const z=R[0],L=R[1],T=R[2];let O;O=Math.atan2(T,L)*360/2/Math.PI,O<0&&(O+=360);const ue=Math.sqrt(L*L+T*T);return[z,ue,O]},l.lch.lab=function(R){const z=R[0],L=R[1],O=R[2]/360*2*Math.PI,F=L*Math.cos(O),ue=L*Math.sin(O);return[z,F,ue]},l.rgb.ansi16=function(R,z=null){const[L,T,O]=R;let F=z===null?l.rgb.hsv(R)[2]:z;if(F=Math.round(F/50),F===0)return 30;let ue=30+(Math.round(O/255)<<2|Math.round(T/255)<<1|Math.round(L/255));return F===2&&(ue+=60),ue},l.hsv.ansi16=function(R){return l.rgb.ansi16(l.hsv.rgb(R),R[2])},l.rgb.ansi256=function(R){const z=R[0],L=R[1],T=R[2];return z===L&&L===T?z<8?16:z>248?231:Math.round((z-8)/247*24)+232:16+36*Math.round(z/255*5)+6*Math.round(L/255*5)+Math.round(T/255*5)},l.ansi16.rgb=function(R){let z=R%10;if(z===0||z===7)return R>50&&(z+=3.5),z=z/10.5*255,[z,z,z];const L=(~~(R>50)+1)*.5,T=(z&1)*L*255,O=(z>>1&1)*L*255,F=(z>>2&1)*L*255;return[T,O,F]},l.ansi256.rgb=function(R){if(R>=232){const F=(R-232)*10+8;return[F,F,F]}R-=16;let z;const L=Math.floor(R/36)/5*255,T=Math.floor((z=R%36)/6)/5*255,O=z%6/5*255;return[L,T,O]},l.rgb.hex=function(R){const L=(((Math.round(R[0])&255)<<16)+((Math.round(R[1])&255)<<8)+(Math.round(R[2])&255)).toString(16).toUpperCase();return"000000".substring(L.length)+L},l.hex.rgb=function(R){const z=R.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!z)return[0,0,0];let L=z[0];z[0].length===3&&(L=L.split("").map(Ae=>Ae+Ae).join(""));const T=parseInt(L,16),O=T>>16&255,F=T>>8&255,ue=T&255;return[O,F,ue]},l.rgb.hcg=function(R){const z=R[0]/255,L=R[1]/255,T=R[2]/255,O=Math.max(Math.max(z,L),T),F=Math.min(Math.min(z,L),T),ue=O-F;let Ae,re;return ue<1?Ae=F/(1-ue):Ae=0,ue<=0?re=0:O===z?re=(L-T)/ue%6:O===L?re=2+(T-z)/ue:re=4+(z-L)/ue,re/=6,re%=1,[re*360,ue*100,Ae*100]},l.hsl.hcg=function(R){const z=R[1]/100,L=R[2]/100,T=L<.5?2*z*L:2*z*(1-L);let O=0;return T<1&&(O=(L-.5*T)/(1-T)),[R[0],T*100,O*100]},l.hsv.hcg=function(R){const z=R[1]/100,L=R[2]/100,T=z*L;let O=0;return T<1&&(O=(L-T)/(1-T)),[R[0],T*100,O*100]},l.hcg.rgb=function(R){const z=R[0]/360,L=R[1]/100,T=R[2]/100;if(L===0)return[T*255,T*255,T*255];const O=[0,0,0],F=z%1*6,ue=F%1,Ae=1-ue;let re=0;switch(Math.floor(F)){case 0:O[0]=1,O[1]=ue,O[2]=0;break;case 1:O[0]=Ae,O[1]=1,O[2]=0;break;case 2:O[0]=0,O[1]=1,O[2]=ue;break;case 3:O[0]=0,O[1]=Ae,O[2]=1;break;case 4:O[0]=ue,O[1]=0,O[2]=1;break;default:O[0]=1,O[1]=0,O[2]=Ae}return re=(1-L)*T,[(L*O[0]+re)*255,(L*O[1]+re)*255,(L*O[2]+re)*255]},l.hcg.hsv=function(R){const z=R[1]/100,L=R[2]/100,T=z+L*(1-z);let O=0;return T>0&&(O=z/T),[R[0],O*100,T*100]},l.hcg.hsl=function(R){const z=R[1]/100,T=R[2]/100*(1-z)+.5*z;let O=0;return T>0&&T<.5?O=z/(2*T):T>=.5&&T<1&&(O=z/(2*(1-T))),[R[0],O*100,T*100]},l.hcg.hwb=function(R){const z=R[1]/100,L=R[2]/100,T=z+L*(1-z);return[R[0],(T-z)*100,(1-T)*100]},l.hwb.hcg=function(R){const z=R[1]/100,T=1-R[2]/100,O=T-z;let F=0;return O<1&&(F=(T-O)/(1-O)),[R[0],O*100,F*100]},l.apple.rgb=function(R){return[R[0]/65535*255,R[1]/65535*255,R[2]/65535*255]},l.rgb.apple=function(R){return[R[0]/255*65535,R[1]/255*65535,R[2]/255*65535]},l.gray.rgb=function(R){return[R[0]/100*255,R[0]/100*255,R[0]/100*255]},l.gray.hsl=function(R){return[0,0,R[0]]},l.gray.hsv=l.gray.hsl,l.gray.hwb=function(R){return[0,100,R[0]]},l.gray.cmyk=function(R){return[0,0,0,R[0]]},l.gray.lab=function(R){return[R[0],0,0]},l.gray.hex=function(R){const z=Math.round(R[0]/100*255)&255,T=((z<<16)+(z<<8)+z).toString(16).toUpperCase();return"000000".substring(T.length)+T},l.rgb.gray=function(R){return[(R[0]+R[1]+R[2])/3/255*100]}},12085:function(Qe,te,m){const v=m(48168),C=m(4111),l={},$=Object.keys(v);function R(L){const T=function(...O){const F=O[0];return F==null?F:(F.length>1&&(O=F),L(O))};return"conversion"in L&&(T.conversion=L.conversion),T}function z(L){const T=function(...O){const F=O[0];if(F==null)return F;F.length>1&&(O=F);const ue=L(O);if(typeof ue=="object")for(let Ae=ue.length,re=0;re<Ae;re++)ue[re]=Math.round(ue[re]);return ue};return"conversion"in L&&(T.conversion=L.conversion),T}$.forEach(L=>{l[L]={},Object.defineProperty(l[L],"channels",{value:v[L].channels}),Object.defineProperty(l[L],"labels",{value:v[L].labels});const T=C(L);Object.keys(T).forEach(F=>{const ue=T[F];l[L][F]=z(ue),l[L][F].raw=R(ue)})}),Qe.exports=l},4111:function(Qe,te,m){const v=m(48168);function C(){const z={},L=Object.keys(v);for(let T=L.length,O=0;O<T;O++)z[L[O]]={distance:-1,parent:null};return z}function l(z){const L=C(),T=[z];for(L[z].distance=0;T.length;){const O=T.pop(),F=Object.keys(v[O]);for(let ue=F.length,Ae=0;Ae<ue;Ae++){const re=F[Ae],pe=L[re];pe.distance===-1&&(pe.distance=L[O].distance+1,pe.parent=O,T.unshift(re))}}return L}function $(z,L){return function(T){return L(z(T))}}function R(z,L){const T=[L[z].parent,z];let O=v[L[z].parent][z],F=L[z].parent;for(;L[F].parent;)T.unshift(L[F].parent),O=$(v[L[F].parent][F],O),F=L[F].parent;return O.conversion=T,O}Qe.exports=function(z){const L=l(z),T={},O=Object.keys(L);for(let F=O.length,ue=0;ue<F;ue++){const Ae=O[ue];L[Ae].parent!==null&&(T[Ae]=R(Ae,L))}return T}},8874:function(Qe){"use strict";Qe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Qe,te,m){var v=m(8874),C=m(86851),l=Object.hasOwnProperty,$=Object.create(null);for(var R in v)l.call(v,R)&&($[v[R]]=R);var z=Qe.exports={to:{},get:{}};z.get=function(O){var F=O.substring(0,3).toLowerCase(),ue,Ae;switch(F){case"hsl":ue=z.get.hsl(O),Ae="hsl";break;case"hwb":ue=z.get.hwb(O),Ae="hwb";break;default:ue=z.get.rgb(O),Ae="rgb";break}return ue?{model:Ae,value:ue}:null},z.get.rgb=function(O){if(!O)return null;var F=/^#([a-f0-9]{3,4})$/i,ue=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,Ae=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,re=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,pe=/^(\w+)$/,fe=[0,0,0,1],ke,je,bt;if(ke=O.match(ue)){for(bt=ke[2],ke=ke[1],je=0;je<3;je++){var ut=je*2;fe[je]=parseInt(ke.slice(ut,ut+2),16)}bt&&(fe[3]=parseInt(bt,16)/255)}else if(ke=O.match(F)){for(ke=ke[1],bt=ke[3],je=0;je<3;je++)fe[je]=parseInt(ke[je]+ke[je],16);bt&&(fe[3]=parseInt(bt+bt,16)/255)}else if(ke=O.match(Ae)){for(je=0;je<3;je++)fe[je]=parseInt(ke[je+1],0);ke[4]&&(ke[5]?fe[3]=parseFloat(ke[4])*.01:fe[3]=parseFloat(ke[4]))}else if(ke=O.match(re)){for(je=0;je<3;je++)fe[je]=Math.round(parseFloat(ke[je+1])*2.55);ke[4]&&(ke[5]?fe[3]=parseFloat(ke[4])*.01:fe[3]=parseFloat(ke[4]))}else return(ke=O.match(pe))?ke[1]==="transparent"?[0,0,0,0]:l.call(v,ke[1])?(fe=v[ke[1]],fe[3]=1,fe):null:null;for(je=0;je<3;je++)fe[je]=L(fe[je],0,255);return fe[3]=L(fe[3],0,1),fe},z.get.hsl=function(O){if(!O)return null;var F=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,ue=O.match(F);if(ue){var Ae=parseFloat(ue[4]),re=(parseFloat(ue[1])%360+360)%360,pe=L(parseFloat(ue[2]),0,100),fe=L(parseFloat(ue[3]),0,100),ke=L(isNaN(Ae)?1:Ae,0,1);return[re,pe,fe,ke]}return null},z.get.hwb=function(O){if(!O)return null;var F=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,ue=O.match(F);if(ue){var Ae=parseFloat(ue[4]),re=(parseFloat(ue[1])%360+360)%360,pe=L(parseFloat(ue[2]),0,100),fe=L(parseFloat(ue[3]),0,100),ke=L(isNaN(Ae)?1:Ae,0,1);return[re,pe,fe,ke]}return null},z.to.hex=function(){var O=C(arguments);return"#"+T(O[0])+T(O[1])+T(O[2])+(O[3]<1?T(Math.round(O[3]*255)):"")},z.to.rgb=function(){var O=C(arguments);return O.length<4||O[3]===1?"rgb("+Math.round(O[0])+", "+Math.round(O[1])+", "+Math.round(O[2])+")":"rgba("+Math.round(O[0])+", "+Math.round(O[1])+", "+Math.round(O[2])+", "+O[3]+")"},z.to.rgb.percent=function(){var O=C(arguments),F=Math.round(O[0]/255*100),ue=Math.round(O[1]/255*100),Ae=Math.round(O[2]/255*100);return O.length<4||O[3]===1?"rgb("+F+"%, "+ue+"%, "+Ae+"%)":"rgba("+F+"%, "+ue+"%, "+Ae+"%, "+O[3]+")"},z.to.hsl=function(){var O=C(arguments);return O.length<4||O[3]===1?"hsl("+O[0]+", "+O[1]+"%, "+O[2]+"%)":"hsla("+O[0]+", "+O[1]+"%, "+O[2]+"%, "+O[3]+")"},z.to.hwb=function(){var O=C(arguments),F="";return O.length>=4&&O[3]!==1&&(F=", "+O[3]),"hwb("+O[0]+", "+O[1]+"%, "+O[2]+"%"+F+")"},z.to.keyword=function(O){return $[O.slice(0,3)]};function L(O,F,ue){return Math.min(Math.max(F,O),ue)}function T(O){var F=Math.round(O).toString(16).toUpperCase();return F.length<2?"0"+F:F}},6767:function(Qe,te,m){const v=m(19818),C=m(12085),l=["keyword","gray","hex"],$={};for(const re of Object.keys(C))$[[...C[re].labels].sort().join("")]=re;const R={};function z(re,pe){if(!(this instanceof z))return new z(re,pe);if(pe&&pe in l&&(pe=null),pe&&!(pe in C))throw new Error("Unknown model: "+pe);let fe,ke;if(re==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(re instanceof z)this.model=re.model,this.color=[...re.color],this.valpha=re.valpha;else if(typeof re=="string"){const je=v.get(re);if(je===null)throw new Error("Unable to parse color from string: "+re);this.model=je.model,ke=C[this.model].channels,this.color=je.value.slice(0,ke),this.valpha=typeof je.value[ke]=="number"?je.value[ke]:1}else if(re.length>0){this.model=pe||"rgb",ke=C[this.model].channels;const je=Array.prototype.slice.call(re,0,ke);this.color=Ae(je,ke),this.valpha=typeof re[ke]=="number"?re[ke]:1}else if(typeof re=="number")this.model="rgb",this.color=[re>>16&255,re>>8&255,re&255],this.valpha=1;else{this.valpha=1;const je=Object.keys(re);"alpha"in re&&(je.splice(je.indexOf("alpha"),1),this.valpha=typeof re.alpha=="number"?re.alpha:0);const bt=je.sort().join("");if(!(bt in $))throw new Error("Unable to parse color from object: "+JSON.stringify(re));this.model=$[bt];const{labels:ut}=C[this.model],wt=[];for(fe=0;fe<ut.length;fe++)wt.push(re[ut[fe]]);this.color=Ae(wt)}if(R[this.model])for(ke=C[this.model].channels,fe=0;fe<ke;fe++){const je=R[this.model][fe];je&&(this.color[fe]=je(this.color[fe]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}z.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(re){let pe=this.model in v.to?this:this.rgb();pe=pe.round(typeof re=="number"?re:1);const fe=pe.valpha===1?pe.color:[...pe.color,this.valpha];return v.to[pe.model](fe)},percentString(re){const pe=this.rgb().round(typeof re=="number"?re:1),fe=pe.valpha===1?pe.color:[...pe.color,this.valpha];return v.to.rgb.percent(fe)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const re={},{channels:pe}=C[this.model],{labels:fe}=C[this.model];for(let ke=0;ke<pe;ke++)re[fe[ke]]=this.color[ke];return this.valpha!==1&&(re.alpha=this.valpha),re},unitArray(){const re=this.rgb().color;return re[0]/=255,re[1]/=255,re[2]/=255,this.valpha!==1&&re.push(this.valpha),re},unitObject(){const re=this.rgb().object();return re.r/=255,re.g/=255,re.b/=255,this.valpha!==1&&(re.alpha=this.valpha),re},round(re){return re=Math.max(re||0,0),new z([...this.color.map(T(re)),this.valpha],this.model)},alpha(re){return re!==void 0?new z([...this.color,Math.max(0,Math.min(1,re))],this.model):this.valpha},red:O("rgb",0,F(255)),green:O("rgb",1,F(255)),blue:O("rgb",2,F(255)),hue:O(["hsl","hsv","hsl","hwb","hcg"],0,re=>(re%360+360)%360),saturationl:O("hsl",1,F(100)),lightness:O("hsl",2,F(100)),saturationv:O("hsv",1,F(100)),value:O("hsv",2,F(100)),chroma:O("hcg",1,F(100)),gray:O("hcg",2,F(100)),white:O("hwb",1,F(100)),wblack:O("hwb",2,F(100)),cyan:O("cmyk",0,F(100)),magenta:O("cmyk",1,F(100)),yellow:O("cmyk",2,F(100)),black:O("cmyk",3,F(100)),x:O("xyz",0,F(95.047)),y:O("xyz",1,F(100)),z:O("xyz",2,F(108.833)),l:O("lab",0,F(100)),a:O("lab",1),b:O("lab",2),keyword(re){return re!==void 0?new z(re):C[this.model].keyword(this.color)},hex(re){return re!==void 0?new z(re):v.to.hex(this.rgb().round().color)},hexa(re){if(re!==void 0)return new z(re);const pe=this.rgb().round().color;let fe=Math.round(this.valpha*255).toString(16).toUpperCase();return fe.length===1&&(fe="0"+fe),v.to.hex(pe)+fe},rgbNumber(){const re=this.rgb().color;return(re[0]&255)<<16|(re[1]&255)<<8|re[2]&255},luminosity(){const re=this.rgb().color,pe=[];for(const[fe,ke]of re.entries()){const je=ke/255;pe[fe]=je<=.04045?je/12.92:jd((je+.055)/1.055,2.4)}return .2126*pe[0]+.7152*pe[1]+.0722*pe[2]},contrast(re){const pe=this.luminosity(),fe=re.luminosity();return pe>fe?(pe+.05)/(fe+.05):(fe+.05)/(pe+.05)},level(re){const pe=this.contrast(re);return pe>=7?"AAA":pe>=4.5?"AA":""},isDark(){const re=this.rgb().color;return(re[0]*2126+re[1]*7152+re[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const re=this.rgb();for(let pe=0;pe<3;pe++)re.color[pe]=255-re.color[pe];return re},lighten(re){const pe=this.hsl();return pe.color[2]+=pe.color[2]*re,pe},darken(re){const pe=this.hsl();return pe.color[2]-=pe.color[2]*re,pe},saturate(re){const pe=this.hsl();return pe.color[1]+=pe.color[1]*re,pe},desaturate(re){const pe=this.hsl();return pe.color[1]-=pe.color[1]*re,pe},whiten(re){const pe=this.hwb();return pe.color[1]+=pe.color[1]*re,pe},blacken(re){const pe=this.hwb();return pe.color[2]+=pe.color[2]*re,pe},grayscale(){const re=this.rgb().color,pe=re[0]*.3+re[1]*.59+re[2]*.11;return z.rgb(pe,pe,pe)},fade(re){return this.alpha(this.valpha-this.valpha*re)},opaquer(re){return this.alpha(this.valpha+this.valpha*re)},rotate(re){const pe=this.hsl();let fe=pe.color[0];return fe=(fe+re)%360,fe=fe<0?360+fe:fe,pe.color[0]=fe,pe},mix(re,pe){if(!re||!re.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof re);const fe=re.rgb(),ke=this.rgb(),je=pe===void 0?.5:pe,bt=2*je-1,ut=fe.alpha()-ke.alpha(),wt=((bt*ut===-1?bt:(bt+ut)/(1+bt*ut))+1)/2,se=1-wt;return z.rgb(wt*fe.red()+se*ke.red(),wt*fe.green()+se*ke.green(),wt*fe.blue()+se*ke.blue(),fe.alpha()*je+ke.alpha()*(1-je))}};for(const re of Object.keys(C)){if(l.includes(re))continue;const{channels:pe}=C[re];z.prototype[re]=function(...fe){return this.model===re?new z(this):fe.length>0?new z(fe,re):new z([...ue(C[this.model][re].raw(this.color)),this.valpha],re)},z[re]=function(...fe){let ke=fe[0];return typeof ke=="number"&&(ke=Ae(fe,pe)),new z(ke,re)}}function L(re,pe){return Number(re.toFixed(pe))}function T(re){return function(pe){return L(pe,re)}}function O(re,pe,fe){re=Array.isArray(re)?re:[re];for(const ke of re)(R[ke]||(R[ke]=[]))[pe]=fe;return re=re[0],function(ke){let je;return ke!==void 0?(fe&&(ke=fe(ke)),je=this[re](),je.color[pe]=ke,je):(je=this[re]().color[pe],fe&&(je=fe(je)),je)}}function F(re){return function(pe){return Math.max(0,Math.min(re,pe))}}function ue(re){return Array.isArray(re)?re:[re]}function Ae(re,pe){for(let fe=0;fe<pe;fe++)typeof re[fe]!="number"&&(re[fe]=0);return re}Qe.exports=z},37620:function(Qe,te,m){"use strict";m.d(te,{ZP:function(){return wt},B8:function(){return _e}});function v(Re,st,vt){Re.prototype=st.prototype=vt,vt.constructor=Re}function C(Re,st){var vt=Object.create(Re.prototype);for(var Dt in st)vt[Dt]=st[Dt];return vt}function l(){}var $=.7,R=1/$,z="\\s*([+-]?\\d+)\\s*",L="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",T="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O=/^#([0-9a-f]{3,8})$/,F=new RegExp("^rgb\\("+[z,z,z]+"\\)$"),ue=new RegExp("^rgb\\("+[T,T,T]+"\\)$"),Ae=new RegExp("^rgba\\("+[z,z,z,L]+"\\)$"),re=new RegExp("^rgba\\("+[T,T,T,L]+"\\)$"),pe=new RegExp("^hsl\\("+[L,T,T]+"\\)$"),fe=new RegExp("^hsla\\("+[L,T,T,L]+"\\)$"),ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};v(l,wt,{copy:function(Re){return Object.assign(new this.constructor,this,Re)},displayable:function(){return this.rgb().displayable()},hex:je,formatHex:je,formatHsl:bt,formatRgb:ut,toString:ut});function je(){return this.rgb().formatHex()}function bt(){return Ve(this).formatHsl()}function ut(){return this.rgb().formatRgb()}function wt(Re){var st,vt;return Re=(Re+"").trim().toLowerCase(),(st=O.exec(Re))?(vt=st[1].length,st=parseInt(st[1],16),vt===6?se(st):vt===3?new Te(st>>8&15|st>>4&240,st>>4&15|st&240,(st&15)<<4|st&15,1):vt===8?qe(st>>24&255,st>>16&255,st>>8&255,(st&255)/255):vt===4?qe(st>>12&15|st>>8&240,st>>8&15|st>>4&240,st>>4&15|st&240,((st&15)<<4|st&15)/255):null):(st=F.exec(Re))?new Te(st[1],st[2],st[3],1):(st=ue.exec(Re))?new Te(st[1]*255/100,st[2]*255/100,st[3]*255/100,1):(st=Ae.exec(Re))?qe(st[1],st[2],st[3],st[4]):(st=re.exec(Re))?qe(st[1]*255/100,st[2]*255/100,st[3]*255/100,st[4]):(st=pe.exec(Re))?he(st[1],st[2]/100,st[3]/100,1):(st=fe.exec(Re))?he(st[1],st[2]/100,st[3]/100,st[4]):ke.hasOwnProperty(Re)?se(ke[Re]):Re==="transparent"?new Te(NaN,NaN,NaN,0):null}function se(Re){return new Te(Re>>16&255,Re>>8&255,Re&255,1)}function qe(Re,st,vt,Dt){return Dt<=0&&(Re=st=vt=NaN),new Te(Re,st,vt,Dt)}function me(Re){return Re instanceof l||(Re=wt(Re)),Re?(Re=Re.rgb(),new Te(Re.r,Re.g,Re.b,Re.opacity)):new Te}function _e(Re,st,vt,Dt){return arguments.length===1?me(Re):new Te(Re,st,vt,Dt==null?1:Dt)}function Te(Re,st,vt,Dt){this.r=+Re,this.g=+st,this.b=+vt,this.opacity=+Dt}v(Te,_e,C(l,{brighter:function(Re){return Re=Re==null?R:Math.pow(R,Re),new Te(this.r*Re,this.g*Re,this.b*Re,this.opacity)},darker:function(Re){return Re=Re==null?$:Math.pow($,Re),new Te(this.r*Re,this.g*Re,this.b*Re,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ht,formatHex:ht,formatRgb:We,toString:We}));function ht(){return"#"+Ne(this.r)+Ne(this.g)+Ne(this.b)}function We(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Re===1?")":", "+Re+")")}function Ne(Re){return Re=Math.max(0,Math.min(255,Math.round(Re)||0)),(Re<16?"0":"")+Re.toString(16)}function he(Re,st,vt,Dt){return Dt<=0?Re=st=vt=NaN:vt<=0||vt>=1?Re=st=NaN:st<=0&&(Re=NaN),new ze(Re,st,vt,Dt)}function Ve(Re){if(Re instanceof ze)return new ze(Re.h,Re.s,Re.l,Re.opacity);if(Re instanceof l||(Re=wt(Re)),!Re)return new ze;if(Re instanceof ze)return Re;Re=Re.rgb();var st=Re.r/255,vt=Re.g/255,Dt=Re.b/255,ar=Math.min(st,vt,Dt),$t=Math.max(st,vt,Dt),ur=NaN,we=$t-ar,At=($t+ar)/2;return we?(st===$t?ur=(vt-Dt)/we+(vt<Dt)*6:vt===$t?ur=(Dt-st)/we+2:ur=(st-vt)/we+4,we/=At<.5?$t+ar:2-$t-ar,ur*=60):we=At>0&&At<1?0:ur,new ze(ur,we,At,Re.opacity)}function ie(Re,st,vt,Dt){return arguments.length===1?Ve(Re):new ze(Re,st,vt,Dt==null?1:Dt)}function ze(Re,st,vt,Dt){this.h=+Re,this.s=+st,this.l=+vt,this.opacity=+Dt}v(ze,ie,C(l,{brighter:function(Re){return Re=Re==null?R:Math.pow(R,Re),new ze(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?$:Math.pow($,Re),new ze(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=this.h%360+(this.h<0)*360,st=isNaN(Re)||isNaN(this.s)?0:this.s,vt=this.l,Dt=vt+(vt<.5?vt:1-vt)*st,ar=2*vt-Dt;return new Te(Le(Re>=240?Re-240:Re+120,ar,Dt),Le(Re,ar,Dt),Le(Re<120?Re+240:Re-120,ar,Dt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Re===1?")":", "+Re+")")}}));function Le(Re,st,vt){return(Re<60?st+(vt-st)*Re/60:Re<180?vt:Re<240?st+(vt-st)*(240-Re)/60:st)*255}},24019:function(Qe,te,m){Qe.exports.structure=m(44590)},30810:function(Qe,te,m){var v=m(62686),C={string:"C",number:"N",boolean:"L",null:"C"};Qe.exports.multi=l,Qe.exports.bytesPer=z,Qe.exports.obj=R;function l(L){var T={};L.forEach(O);function O(F){$(T,F)}return R(T)}function $(L,T){for(var O in T){var F=typeof T[O]!="undefined"&&T[O]!==null;(typeof L[O]=="undefined"||F)&&(L[O]=T[O])}return L}function R(L){var T={},O=[];for(var F in L)T[F]=L[F]===null?"null":typeof L[F];for(var ue in T){var Ae=C[T[ue]];Ae&&O.push({name:ue,type:Ae,size:v[Ae]})}return O}function z(L){return L.reduce(function(T,O){return T+O.size},1)}},62686:function(Qe){Qe.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}},80514:function(Qe){Qe.exports.lpad=function(m,v,C){for(;m.length<v;)m=C+m;return m},Qe.exports.rpad=function(m,v,C){for(;m.length<v;)m=m+C;return m},Qe.exports.writeField=function(m,v,C,l){for(var $=0;$<v;$++)m.setUint8(l,C.charCodeAt($)),l++;return l}},44590:function(Qe,te,m){var v=m(62686),C=m(80514),l=m(30810);Qe.exports=function(R,z){var L=z||l.multi(R),T=32*L.length+1,O=l.bytesPer(L),F=new ArrayBuffer(T+32+O*R.length+1),ue=new Date,Ae=new DataView(F);Ae.setUint8(0,3),Ae.setUint8(1,ue.getFullYear()-1900),Ae.setUint8(2,ue.getMonth()),Ae.setUint8(3,ue.getDate()),Ae.setUint32(4,R.length,!0);var re=T+32;return Ae.setUint16(8,re,!0),Ae.setUint16(10,O,!0),Ae.setInt8(32+T-1,13),L.forEach(function(pe,fe){pe.name.split("").slice(0,8).forEach(function(ke,je){Ae.setInt8(32+fe*32+je,ke.charCodeAt(0))}),Ae.setInt8(32+fe*32+11,pe.type.charCodeAt(0)),Ae.setInt8(32+fe*32+16,pe.size),pe.type=="N"&&Ae.setInt8(32+fe*32+17,3)}),offset=T+32,R.forEach(function(pe,fe){Ae.setUint8(offset,32),offset++,L.forEach(function(ke){var je=pe[ke.name];switch((je===null||typeof je=="undefined")&&(je=""),ke.type){case"L":Ae.setUint8(offset,je?84:70),offset++;break;case"D":offset=C.writeField(Ae,8,C.lpad(je.toString(),8," "),offset);break;case"N":offset=C.writeField(Ae,ke.size,C.lpad(je.toString(),ke.size," ").substr(0,18),offset);break;case"C":offset=C.writeField(Ae,ke.size,C.rpad(je.toString(),ke.size," "),offset);break;default:throw new Error("Unknown field type")}})}),Ae.setUint8(offset,26),Ae}},44020:function(Qe){"use strict";var te="%[a-f0-9]{2}",m=new RegExp("("+te+")|([^%]+?)","gi"),v=new RegExp("("+te+")+","gi");function C(R,z){try{return[decodeURIComponent(R.join(""))]}catch(O){}if(R.length===1)return R;z=z||1;var L=R.slice(0,z),T=R.slice(z);return Array.prototype.concat.call([],C(L),C(T))}function l(R){try{return decodeURIComponent(R)}catch(T){for(var z=R.match(m)||[],L=1;L<z.length;L++)R=C(z,L).join(""),z=R.match(m)||[];return R}}function $(R){for(var z={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},L=v.exec(R);L;){try{z[L[0]]=decodeURIComponent(L[0])}catch(Ae){var T=l(L[0]);T!==L[0]&&(z[L[0]]=T)}L=v.exec(R)}z["%C2"]="\uFFFD";for(var O=Object.keys(z),F=0;F<O.length;F++){var ue=O[F];R=R.replace(new RegExp(ue,"g"),z[ue])}return R}Qe.exports=function(R){if(typeof R!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof R+"`");try{return R=R.replace(/\+/g," "),decodeURIComponent(R)}catch(z){return $(R)}}},9187:function(Qe){"use strict";Qe.exports=te,Qe.exports.default=te;function te(ie,ze,Le){Le=Le||2;var Re=ze&&ze.length,st=Re?ze[0]*Le:ie.length,vt=m(ie,0,st,Le,!0),Dt=[];if(!vt||vt.next===vt.prev)return Dt;var ar,$t,ur,we,At,nt,Lt;if(Re&&(vt=L(ie,ze,vt,Le)),ie.length>80*Le){ar=ur=ie[0],$t=we=ie[1];for(var St=Le;St<st;St+=Le)At=ie[St],nt=ie[St+1],At<ar&&(ar=At),nt<$t&&($t=nt),At>ur&&(ur=At),nt>we&&(we=nt);Lt=Math.max(ur-ar,we-$t),Lt=Lt!==0?32767/Lt:0}return C(vt,Dt,Le,ar,$t,Lt,0),Dt}function m(ie,ze,Le,Re,st){var vt,Dt;if(st===Ve(ie,ze,Le,Re)>0)for(vt=ze;vt<Le;vt+=Re)Dt=We(vt,ie[vt],ie[vt+1],Dt);else for(vt=Le-Re;vt>=ze;vt-=Re)Dt=We(vt,ie[vt],ie[vt+1],Dt);return Dt&&ut(Dt,Dt.next)&&(Ne(Dt),Dt=Dt.next),Dt}function v(ie,ze){if(!ie)return ie;ze||(ze=ie);var Le=ie,Re;do if(Re=!1,!Le.steiner&&(ut(Le,Le.next)||bt(Le.prev,Le,Le.next)===0)){if(Ne(Le),Le=ze=Le.prev,Le===Le.next)break;Re=!0}else Le=Le.next;while(Re||Le!==ze);return ze}function C(ie,ze,Le,Re,st,vt,Dt){if(ie){!Dt&&vt&&Ae(ie,Re,st,vt);for(var ar=ie,$t,ur;ie.prev!==ie.next;){if($t=ie.prev,ur=ie.next,vt?$(ie,Re,st,vt):l(ie)){ze.push($t.i/Le|0),ze.push(ie.i/Le|0),ze.push(ur.i/Le|0),Ne(ie),ie=ur.next,ar=ur.next;continue}if(ie=ur,ie===ar){Dt?Dt===1?(ie=R(v(ie),ze,Le),C(ie,ze,Le,Re,st,vt,2)):Dt===2&&z(ie,ze,Le,Re,st,vt):C(v(ie),ze,Le,Re,st,vt,1);break}}}}function l(ie){var ze=ie.prev,Le=ie,Re=ie.next;if(bt(ze,Le,Re)>=0)return!1;for(var st=ze.x,vt=Le.x,Dt=Re.x,ar=ze.y,$t=Le.y,ur=Re.y,we=st<vt?st<Dt?st:Dt:vt<Dt?vt:Dt,At=ar<$t?ar<ur?ar:ur:$t<ur?$t:ur,nt=st>vt?st>Dt?st:Dt:vt>Dt?vt:Dt,Lt=ar>$t?ar>ur?ar:ur:$t>ur?$t:ur,St=Re.next;St!==ze;){if(St.x>=we&&St.x<=nt&&St.y>=At&&St.y<=Lt&&ke(st,ar,vt,$t,Dt,ur,St.x,St.y)&&bt(St.prev,St,St.next)>=0)return!1;St=St.next}return!0}function $(ie,ze,Le,Re){var st=ie.prev,vt=ie,Dt=ie.next;if(bt(st,vt,Dt)>=0)return!1;for(var ar=st.x,$t=vt.x,ur=Dt.x,we=st.y,At=vt.y,nt=Dt.y,Lt=ar<$t?ar<ur?ar:ur:$t<ur?$t:ur,St=we<At?we<nt?we:nt:At<nt?At:nt,Ut=ar>$t?ar>ur?ar:ur:$t>ur?$t:ur,lt=we>At?we>nt?we:nt:At>nt?At:nt,Et=pe(Lt,St,ze,Le,Re),Zt=pe(Ut,lt,ze,Le,Re),Be=ie.prevZ,He=ie.nextZ;Be&&Be.z>=Et&&He&&He.z<=Zt;){if(Be.x>=Lt&&Be.x<=Ut&&Be.y>=St&&Be.y<=lt&&Be!==st&&Be!==Dt&&ke(ar,we,$t,At,ur,nt,Be.x,Be.y)&&bt(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,He.x>=Lt&&He.x<=Ut&&He.y>=St&&He.y<=lt&&He!==st&&He!==Dt&&ke(ar,we,$t,At,ur,nt,He.x,He.y)&&bt(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Be&&Be.z>=Et;){if(Be.x>=Lt&&Be.x<=Ut&&Be.y>=St&&Be.y<=lt&&Be!==st&&Be!==Dt&&ke(ar,we,$t,At,ur,nt,Be.x,Be.y)&&bt(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;He&&He.z<=Zt;){if(He.x>=Lt&&He.x<=Ut&&He.y>=St&&He.y<=lt&&He!==st&&He!==Dt&&ke(ar,we,$t,At,ur,nt,He.x,He.y)&&bt(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function R(ie,ze,Le){var Re=ie;do{var st=Re.prev,vt=Re.next.next;!ut(st,vt)&&wt(st,Re,Re.next,vt)&&_e(st,vt)&&_e(vt,st)&&(ze.push(st.i/Le|0),ze.push(Re.i/Le|0),ze.push(vt.i/Le|0),Ne(Re),Ne(Re.next),Re=ie=vt),Re=Re.next}while(Re!==ie);return v(Re)}function z(ie,ze,Le,Re,st,vt){var Dt=ie;do{for(var ar=Dt.next.next;ar!==Dt.prev;){if(Dt.i!==ar.i&&je(Dt,ar)){var $t=ht(Dt,ar);Dt=v(Dt,Dt.next),$t=v($t,$t.next),C(Dt,ze,Le,Re,st,vt,0),C($t,ze,Le,Re,st,vt,0);return}ar=ar.next}Dt=Dt.next}while(Dt!==ie)}function L(ie,ze,Le,Re){var st=[],vt,Dt,ar,$t,ur;for(vt=0,Dt=ze.length;vt<Dt;vt++)ar=ze[vt]*Re,$t=vt<Dt-1?ze[vt+1]*Re:ie.length,ur=m(ie,ar,$t,Re,!1),ur===ur.next&&(ur.steiner=!0),st.push(fe(ur));for(st.sort(T),vt=0;vt<st.length;vt++)Le=O(st[vt],Le);return Le}function T(ie,ze){return ie.x-ze.x}function O(ie,ze){var Le=F(ie,ze);if(!Le)return ze;var Re=ht(Le,ie);return v(Re,Re.next),v(Le,Le.next)}function F(ie,ze){var Le=ze,Re=ie.x,st=ie.y,vt=-1/0,Dt;do{if(st<=Le.y&&st>=Le.next.y&&Le.next.y!==Le.y){var ar=Le.x+(st-Le.y)*(Le.next.x-Le.x)/(Le.next.y-Le.y);if(ar<=Re&&ar>vt&&(vt=ar,Dt=Le.x<Le.next.x?Le:Le.next,ar===Re))return Dt}Le=Le.next}while(Le!==ze);if(!Dt)return null;var $t=Dt,ur=Dt.x,we=Dt.y,At=1/0,nt;Le=Dt;do Re>=Le.x&&Le.x>=ur&&Re!==Le.x&&ke(st<we?Re:vt,st,ur,we,st<we?vt:Re,st,Le.x,Le.y)&&(nt=Math.abs(st-Le.y)/(Re-Le.x),_e(Le,ie)&&(nt<At||nt===At&&(Le.x>Dt.x||Le.x===Dt.x&&ue(Dt,Le)))&&(Dt=Le,At=nt)),Le=Le.next;while(Le!==$t);return Dt}function ue(ie,ze){return bt(ie.prev,ie,ze.prev)<0&&bt(ze.next,ie,ie.next)<0}function Ae(ie,ze,Le,Re){var st=ie;do st.z===0&&(st.z=pe(st.x,st.y,ze,Le,Re)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next;while(st!==ie);st.prevZ.nextZ=null,st.prevZ=null,re(st)}function re(ie){var ze,Le,Re,st,vt,Dt,ar,$t,ur=1;do{for(Le=ie,ie=null,vt=null,Dt=0;Le;){for(Dt++,Re=Le,ar=0,ze=0;ze<ur&&(ar++,Re=Re.nextZ,!!Re);ze++);for($t=ur;ar>0||$t>0&&Re;)ar!==0&&($t===0||!Re||Le.z<=Re.z)?(st=Le,Le=Le.nextZ,ar--):(st=Re,Re=Re.nextZ,$t--),vt?vt.nextZ=st:ie=st,st.prevZ=vt,vt=st;Le=Re}vt.nextZ=null,ur*=2}while(Dt>1);return ie}function pe(ie,ze,Le,Re,st){return ie=(ie-Le)*st|0,ze=(ze-Re)*st|0,ie=(ie|ie<<8)&16711935,ie=(ie|ie<<4)&252645135,ie=(ie|ie<<2)&858993459,ie=(ie|ie<<1)&1431655765,ze=(ze|ze<<8)&16711935,ze=(ze|ze<<4)&252645135,ze=(ze|ze<<2)&858993459,ze=(ze|ze<<1)&1431655765,ie|ze<<1}function fe(ie){var ze=ie,Le=ie;do(ze.x<Le.x||ze.x===Le.x&&ze.y<Le.y)&&(Le=ze),ze=ze.next;while(ze!==ie);return Le}function ke(ie,ze,Le,Re,st,vt,Dt,ar){return(st-Dt)*(ze-ar)>=(ie-Dt)*(vt-ar)&&(ie-Dt)*(Re-ar)>=(Le-Dt)*(ze-ar)&&(Le-Dt)*(vt-ar)>=(st-Dt)*(Re-ar)}function je(ie,ze){return ie.next.i!==ze.i&&ie.prev.i!==ze.i&&!me(ie,ze)&&(_e(ie,ze)&&_e(ze,ie)&&Te(ie,ze)&&(bt(ie.prev,ie,ze.prev)||bt(ie,ze.prev,ze))||ut(ie,ze)&&bt(ie.prev,ie,ie.next)>0&&bt(ze.prev,ze,ze.next)>0)}function bt(ie,ze,Le){return(ze.y-ie.y)*(Le.x-ze.x)-(ze.x-ie.x)*(Le.y-ze.y)}function ut(ie,ze){return ie.x===ze.x&&ie.y===ze.y}function wt(ie,ze,Le,Re){var st=qe(bt(ie,ze,Le)),vt=qe(bt(ie,ze,Re)),Dt=qe(bt(Le,Re,ie)),ar=qe(bt(Le,Re,ze));return!!(st!==vt&&Dt!==ar||st===0&&se(ie,Le,ze)||vt===0&&se(ie,Re,ze)||Dt===0&&se(Le,ie,Re)||ar===0&&se(Le,ze,Re))}function se(ie,ze,Le){return ze.x<=Math.max(ie.x,Le.x)&&ze.x>=Math.min(ie.x,Le.x)&&ze.y<=Math.max(ie.y,Le.y)&&ze.y>=Math.min(ie.y,Le.y)}function qe(ie){return ie>0?1:ie<0?-1:0}function me(ie,ze){var Le=ie;do{if(Le.i!==ie.i&&Le.next.i!==ie.i&&Le.i!==ze.i&&Le.next.i!==ze.i&&wt(Le,Le.next,ie,ze))return!0;Le=Le.next}while(Le!==ie);return!1}function _e(ie,ze){return bt(ie.prev,ie,ie.next)<0?bt(ie,ze,ie.next)>=0&&bt(ie,ie.prev,ze)>=0:bt(ie,ze,ie.prev)<0||bt(ie,ie.next,ze)<0}function Te(ie,ze){var Le=ie,Re=!1,st=(ie.x+ze.x)/2,vt=(ie.y+ze.y)/2;do Le.y>vt!=Le.next.y>vt&&Le.next.y!==Le.y&&st<(Le.next.x-Le.x)*(vt-Le.y)/(Le.next.y-Le.y)+Le.x&&(Re=!Re),Le=Le.next;while(Le!==ie);return Re}function ht(ie,ze){var Le=new he(ie.i,ie.x,ie.y),Re=new he(ze.i,ze.x,ze.y),st=ie.next,vt=ze.prev;return ie.next=ze,ze.prev=ie,Le.next=st,st.prev=Le,Re.next=Le,Le.prev=Re,vt.next=Re,Re.prev=vt,Re}function We(ie,ze,Le,Re){var st=new he(ie,ze,Le);return Re?(st.next=Re.next,st.prev=Re,Re.next.prev=st,Re.next=st):(st.prev=st,st.next=st),st}function Ne(ie){ie.next.prev=ie.prev,ie.prev.next=ie.next,ie.prevZ&&(ie.prevZ.nextZ=ie.nextZ),ie.nextZ&&(ie.nextZ.prevZ=ie.prevZ)}function he(ie,ze,Le){this.i=ie,this.x=ze,this.y=Le,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}te.deviation=function(ie,ze,Le,Re){var st=ze&&ze.length,vt=st?ze[0]*Le:ie.length,Dt=Math.abs(Ve(ie,0,vt,Le));if(st)for(var ar=0,$t=ze.length;ar<$t;ar++){var ur=ze[ar]*Le,we=ar<$t-1?ze[ar+1]*Le:ie.length;Dt-=Math.abs(Ve(ie,ur,we,Le))}var At=0;for(ar=0;ar<Re.length;ar+=3){var nt=Re[ar]*Le,Lt=Re[ar+1]*Le,St=Re[ar+2]*Le;At+=Math.abs((ie[nt]-ie[St])*(ie[Lt+1]-ie[nt+1])-(ie[nt]-ie[Lt])*(ie[St+1]-ie[nt+1]))}return Dt===0&&At===0?0:Math.abs((At-Dt)/Dt)};function Ve(ie,ze,Le,Re){for(var st=0,vt=ze,Dt=Le-Re;vt<Le;vt+=Re)st+=(ie[Dt]-ie[vt])*(ie[vt+1]+ie[Dt+1]),Dt=vt;return st}te.flatten=function(ie){for(var ze=ie[0][0].length,Le={vertices:[],holes:[],dimensions:ze},Re=0,st=0;st<ie.length;st++){for(var vt=0;vt<ie[st].length;vt++)for(var Dt=0;Dt<ze;Dt++)Le.vertices.push(ie[st][vt][Dt]);st>0&&(Re+=ie[st-1].length,Le.holes.push(Re))}return Le}},67709:function(Qe){function te(v){var C=v.target||v.srcElement;C.__resizeRAF__&&cancelAnimationFrame(C.__resizeRAF__),C.__resizeRAF__=requestAnimationFrame(function(){var l=C.__resizeTrigger__,$=l&&l.__resizeListeners__;$&&$.forEach(function(R){R.call(l,v)})})}var m=function(C,l){var $=this,R=$.document,z,L=R.attachEvent;typeof navigator!="undefined"&&(z=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function T(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",te)}if(!C.__resizeListeners__)if(C.__resizeListeners__=[],L)C.__resizeTrigger__=C,C.attachEvent("onresize",te);else{getComputedStyle(C).position==="static"&&(C.style.position="relative");var O=C.__resizeTrigger__=R.createElement("object");O.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),O.setAttribute("class","resize-sensor"),O.setAttribute("tabindex","-1"),O.setAttribute("title",""),O.__resizeElement__=C,O.onload=T,O.type="text/html",z&&C.appendChild(O),O.data="about:blank",z||C.appendChild(O)}C.__resizeListeners__.push(l)};Qe.exports=typeof window=="undefined"?m:m.bind(window),Qe.exports.unbind=function(v,C){var l=document.attachEvent,$=v.__resizeListeners__||[];if(C){var R=$.indexOf(C);R!==-1&&$.splice(R,1)}else $=v.__resizeListeners__=[];if(!$.length){if(l)v.detachEvent("onresize",te);else if(v.__resizeTrigger__){var z=v.__resizeTrigger__.contentDocument,L=z&&z.defaultView;L&&(L.removeEventListener("resize",te),delete L.__resizeTrigger__),v.__resizeTrigger__=!v.removeChild(v.__resizeTrigger__)}delete v.__resizeListeners__}}},26729:function(Qe){"use strict";var te=Object.prototype.hasOwnProperty,m="~";function v(){}Object.create&&(v.prototype=Object.create(null),new v().__proto__||(m=!1));function C(z,L,T){this.fn=z,this.context=L,this.once=T||!1}function l(z,L,T,O,F){if(typeof T!="function")throw new TypeError("The listener must be a function");var ue=new C(T,O||z,F),Ae=m?m+L:L;return z._events[Ae]?z._events[Ae].fn?z._events[Ae]=[z._events[Ae],ue]:z._events[Ae].push(ue):(z._events[Ae]=ue,z._eventsCount++),z}function $(z,L){--z._eventsCount===0?z._events=new v:delete z._events[L]}function R(){this._events=new v,this._eventsCount=0}R.prototype.eventNames=function(){var L=[],T,O;if(this._eventsCount===0)return L;for(O in T=this._events)te.call(T,O)&&L.push(m?O.slice(1):O);return Object.getOwnPropertySymbols?L.concat(Object.getOwnPropertySymbols(T)):L},R.prototype.listeners=function(L){var T=m?m+L:L,O=this._events[T];if(!O)return[];if(O.fn)return[O.fn];for(var F=0,ue=O.length,Ae=new Array(ue);F<ue;F++)Ae[F]=O[F].fn;return Ae},R.prototype.listenerCount=function(L){var T=m?m+L:L,O=this._events[T];return O?O.fn?1:O.length:0},R.prototype.emit=function(L,T,O,F,ue,Ae){var re=m?m+L:L;if(!this._events[re])return!1;var pe=this._events[re],fe=arguments.length,ke,je;if(pe.fn){switch(pe.once&&this.removeListener(L,pe.fn,void 0,!0),fe){case 1:return pe.fn.call(pe.context),!0;case 2:return pe.fn.call(pe.context,T),!0;case 3:return pe.fn.call(pe.context,T,O),!0;case 4:return pe.fn.call(pe.context,T,O,F),!0;case 5:return pe.fn.call(pe.context,T,O,F,ue),!0;case 6:return pe.fn.call(pe.context,T,O,F,ue,Ae),!0}for(je=1,ke=new Array(fe-1);je<fe;je++)ke[je-1]=arguments[je];pe.fn.apply(pe.context,ke)}else{var bt=pe.length,ut;for(je=0;je<bt;je++)switch(pe[je].once&&this.removeListener(L,pe[je].fn,void 0,!0),fe){case 1:pe[je].fn.call(pe[je].context);break;case 2:pe[je].fn.call(pe[je].context,T);break;case 3:pe[je].fn.call(pe[je].context,T,O);break;case 4:pe[je].fn.call(pe[je].context,T,O,F);break;default:if(!ke)for(ut=1,ke=new Array(fe-1);ut<fe;ut++)ke[ut-1]=arguments[ut];pe[je].fn.apply(pe[je].context,ke)}}return!0},R.prototype.on=function(L,T,O){return l(this,L,T,O,!1)},R.prototype.once=function(L,T,O){return l(this,L,T,O,!0)},R.prototype.removeListener=function(L,T,O,F){var ue=m?m+L:L;if(!this._events[ue])return this;if(!T)return $(this,ue),this;var Ae=this._events[ue];if(Ae.fn)Ae.fn===T&&(!F||Ae.once)&&(!O||Ae.context===O)&&$(this,ue);else{for(var re=0,pe=[],fe=Ae.length;re<fe;re++)(Ae[re].fn!==T||F&&!Ae[re].once||O&&Ae[re].context!==O)&&pe.push(Ae[re]);pe.length?this._events[ue]=pe.length===1?pe[0]:pe:$(this,ue)}return this},R.prototype.removeAllListeners=function(L){var T;return L?(T=m?m+L:L,this._events[T]&&$(this,T)):(this._events=new v,this._eventsCount=0),this},R.prototype.off=R.prototype.removeListener,R.prototype.addListener=R.prototype.on,R.prefixed=m,R.EventEmitter=R,Qe.exports=R},92806:function(Qe){"use strict";Qe.exports=function(te,m){for(var v={},C=Object.keys(te),l=Array.isArray(m),$=0;$<C.length;$++){var R=C[$],z=te[R];(l?m.indexOf(R)!==-1:m(R,z,te))&&(v[R]=z)}return v}},81490:function(Qe){"use strict";Qe.exports=R;var te,m,v,C,l,$=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"];function R(se){C=2,l=Math.pow(10,6),v=null,te=[],m=[];var qe=se.readFields(z,{});return te=null,qe}function z(se,qe,me){se===1?te.push(me.readString()):se===2?C=me.readVarint():se===3?l=Math.pow(10,me.readVarint()):se===4?L(me,qe):se===5?T(me,qe):se===6&&O(me,qe)}function L(se,qe){return qe.type="FeatureCollection",qe.features=[],se.readMessage(F,qe)}function T(se,qe){qe.type="Feature";var me=se.readMessage(ue,qe);return"geometry"in me||(me.geometry=null),me}function O(se,qe){return qe.type="Point",se.readMessage(Ae,qe)}function F(se,qe,me){se===1?qe.features.push(T(me,{})):se===13?m.push(pe(me)):se===15&&fe(me,qe)}function ue(se,qe,me){se===1?qe.geometry=O(me,{}):se===11?qe.id=me.readString():se===12?qe.id=me.readSVarint():se===13?m.push(pe(me)):se===14?qe.properties=fe(me,{}):se===15&&fe(me,qe)}function Ae(se,qe,me){se===1?qe.type=$[me.readVarint()]:se===2?v=me.readPackedVarint():se===3?re(qe,me,qe.type):se===4?(qe.geometries=qe.geometries||[],qe.geometries.push(O(me,{}))):se===13?m.push(pe(me)):se===15&&fe(me,qe)}function re(se,qe,me){me==="Point"?se.coordinates=ke(qe):me==="MultiPoint"?se.coordinates=bt(qe,!0):me==="LineString"?se.coordinates=bt(qe):me==="MultiLineString"?se.coordinates=ut(qe):me==="Polygon"?se.coordinates=ut(qe,!0):me==="MultiPolygon"&&(se.coordinates=wt(qe))}function pe(se){for(var qe=se.readVarint()+se.pos,me=null;se.pos<qe;){var _e=se.readVarint(),Te=_e>>3;Te===1?me=se.readString():Te===2?me=se.readDouble():Te===3?me=se.readVarint():Te===4?me=-se.readVarint():Te===5?me=se.readBoolean():Te===6&&(me=JSON.parse(se.readString()))}return me}function fe(se,qe){for(var me=se.readVarint()+se.pos;se.pos<me;)qe[te[se.readVarint()]]=m[se.readVarint()];return m=[],qe}function ke(se){for(var qe=se.readVarint()+se.pos,me=[];se.pos<qe;)me.push(se.readSVarint()/l);return me}function je(se,qe,me,_e){var Te=0,ht=[],We,Ne,he=[];for(Ne=0;Ne<C;Ne++)he[Ne]=0;for(;me?Te<me:se.pos<qe;){for(We=[],Ne=0;Ne<C;Ne++)he[Ne]+=se.readSVarint(),We[Ne]=he[Ne]/l;ht.push(We),Te++}return _e&&ht.push(ht[0]),ht}function bt(se){return je(se,se.readVarint()+se.pos)}function ut(se,qe){var me=se.readVarint()+se.pos;if(!v)return[je(se,me,null,qe)];for(var _e=[],Te=0;Te<v.length;Te++)_e.push(je(se,me,v[Te],qe));return v=null,_e}function wt(se){var qe=se.readVarint()+se.pos;if(!v)return[[je(se,qe,null,!0)]];for(var me=[],_e=1,Te=0;Te<v[0];Te++){for(var ht=[],We=0;We<v[_e];We++)ht.push(je(se,qe,v[_e+1+We],!0));_e+=v[_e]+1,me.push(ht)}return v=null,me}},62020:function(Qe){"use strict";Qe.exports=z;var te,m,v,C,l,$=1e6,R={Point:0,MultiPoint:1,LineString:2,MultiLineString:3,Polygon:4,MultiPolygon:5,GeometryCollection:6};function z(me,_e){te={},v=[],m=0,C=0,l=1,L(me),l=Math.min(l,$);for(var Te=Math.ceil(Math.log(l)/Math.LN10),ht=0;ht<v.length;ht++)_e.writeStringField(1,v[ht]);return C!==2&&_e.writeVarintField(2,C),Te!==6&&_e.writeVarintField(3,Te),me.type==="FeatureCollection"?_e.writeMessage(4,Ae,me):me.type==="Feature"?_e.writeMessage(5,re,me):_e.writeMessage(6,pe,me),te=null,_e.finish()}function L(me){var _e,Te;if(me.type==="FeatureCollection")for(_e=0;_e<me.features.length;_e++)L(me.features[_e]);else if(me.type==="Feature"){me.geometry!==null&&L(me.geometry);for(Te in me.properties)ue(Te)}else if(me.type==="Point")F(me.coordinates);else if(me.type==="MultiPoint")O(me.coordinates);else if(me.type==="GeometryCollection")for(_e=0;_e<me.geometries.length;_e++)L(me.geometries[_e]);else if(me.type==="LineString")O(me.coordinates);else if(me.type==="Polygon"||me.type==="MultiLineString")T(me.coordinates);else if(me.type==="MultiPolygon")for(_e=0;_e<me.coordinates.length;_e++)T(me.coordinates[_e]);for(Te in me)qe(Te,me.type)||ue(Te)}function T(me){for(var _e=0;_e<me.length;_e++)O(me[_e])}function O(me){for(var _e=0;_e<me.length;_e++)F(me[_e])}function F(me){C=Math.max(C,me.length);for(var _e=0;_e<me.length;_e++)for(;Math.round(me[_e]*l)/l!==me[_e]&&l<$;)l*=10}function ue(me){te[me]===void 0&&(v.push(me),te[me]=m++)}function Ae(me,_e){for(var Te=0;Te<me.features.length;Te++)_e.writeMessage(1,re,me.features[Te]);fe(me,_e,!0)}function re(me,_e){me.geometry!==null&&_e.writeMessage(1,pe,me.geometry),me.id!==void 0&&(typeof me.id=="number"&&me.id%1===0?_e.writeSVarintField(12,me.id):_e.writeStringField(11,me.id)),me.properties&&fe(me.properties,_e),fe(me,_e,!0)}function pe(me,_e){_e.writeVarintField(1,R[me.type]);var Te=me.coordinates;if(me.type==="Point")je(Te,_e);else if(me.type==="MultiPoint")bt(Te,_e,!0);else if(me.type==="LineString")bt(Te,_e);else if(me.type==="MultiLineString")ut(Te,_e);else if(me.type==="Polygon")ut(Te,_e,!0);else if(me.type==="MultiPolygon")wt(Te,_e);else if(me.type==="GeometryCollection")for(var ht=0;ht<me.geometries.length;ht++)_e.writeMessage(4,pe,me.geometries[ht]);fe(me,_e,!0)}function fe(me,_e,Te){var ht=[],We=0;for(var Ne in me)Te&&qe(Ne,me.type)||(_e.writeMessage(13,ke,me[Ne]),ht.push(te[Ne]),ht.push(We++));_e.writePackedVarint(Te?15:14,ht)}function ke(me,_e){if(me!==null){var Te=typeof me;Te==="string"?_e.writeStringField(1,me):Te==="boolean"?_e.writeBooleanField(5,me):Te==="object"?_e.writeStringField(6,JSON.stringify(me)):Te==="number"&&(me%1!==0?_e.writeDoubleField(2,me):me>=0?_e.writeVarintField(3,me):_e.writeVarintField(4,-me))}}function je(me,_e){for(var Te=[],ht=0;ht<C;ht++)Te.push(Math.round(me[ht]*l));_e.writePackedSVarint(3,Te)}function bt(me,_e){var Te=[];se(Te,me),_e.writePackedSVarint(3,Te)}function ut(me,_e,Te){var ht=me.length,We;if(ht!==1){var Ne=[];for(We=0;We<ht;We++)Ne.push(me[We].length-(Te?1:0));_e.writePackedVarint(2,Ne)}var he=[];for(We=0;We<ht;We++)se(he,me[We],Te);_e.writePackedSVarint(3,he)}function wt(me,_e){var Te=me.length,ht,We;if(Te!==1||me[0].length!==1){var Ne=[Te];for(ht=0;ht<Te;ht++)for(Ne.push(me[ht].length),We=0;We<me[ht].length;We++)Ne.push(me[ht][We].length-1);_e.writePackedVarint(2,Ne)}var he=[];for(ht=0;ht<Te;ht++)for(We=0;We<me[ht].length;We++)se(he,me[ht][We],!0);_e.writePackedSVarint(3,he)}function se(me,_e,Te){var ht,We,Ne=_e.length-(Te?1:0),he=new Array(C);for(We=0;We<C;We++)he[We]=0;for(ht=0;ht<Ne;ht++)for(We=0;We<C;We++){var Ve=Math.round(_e[ht][We]*l)-he[We];me.push(Ve),he[We]+=Ve}}function qe(me,_e){if(me==="type")return!0;if(_e==="FeatureCollection"){if(me==="features")return!0}else if(_e==="Feature"){if(me==="id"||me==="properties"||me==="geometry")return!0}else if(_e==="GeometryCollection"){if(me==="geometries")return!0}else if(me==="coordinates")return!0;return!1}},74951:function(Qe,te,m){"use strict";te.encode=m(62020),te.decode=m(81490)},51010:function(Qe,te,m){var v=m(31710);function C(F,ue,Ae,re){var pe=F.map(function(ke){return[(ke[0]-Ae.x)/ue,(Ae.y-ke[1])/ue]}),fe=pe.map(function(ke){return re?ke[0].toFixed(re)+","+ke[1].toFixed(re):ke[0]+","+ke[1]});return fe.join(" ")}function l(F,ue){var Ae=F.split("/>")[0];for(var re in ue)ue[re]&&(Ae+=" "+re+'="'+ue[re]+'"');return Ae+" />"}function $(F,ue,Ae,re){var pe=re&&re.r?re.r:1,fe=re&&re.hasOwnProperty("pointAsCircle")?re.pointAsCircle:!1,ke=C([F.coordinates],ue,Ae,re.precision);return fe?[ke]:["M"+ke+" m"+-pe+",0 a"+pe+","+pe+" 0 1,1 "+2*pe+","+0+" a"+pe+","+pe+" 0 1,1 "+-2*pe+","+0]}function R(F,ue,Ae,re){var pe=re&&re.hasOwnProperty("explode")?re.explode:!1,fe=v.explode(F).map(function(ke){return $(ke,ue,Ae,re)[0]});return pe?fe:[fe.join(" ")]}function z(F,ue,Ae,re){var pe=C(F.coordinates,ue,Ae,re.precision),fe="M"+pe;return[fe]}function L(F,ue,Ae,re){var pe=re&&re.hasOwnProperty("explode")?re.explode:!1,fe=v.explode(F).map(function(ke){return z(ke,ue,Ae,re)[0]});return pe?fe:[fe.join(" ")]}function T(F,ue,Ae,re){var pe,fe,ke;pe=C(F.coordinates[0],ue,Ae,re.precision),F.coordinates.length>1&&(fe=F.coordinates.slice(1,F.coordinates.length));var je="M"+pe;if(fe)for(var bt=0;bt<fe.length;bt++)je+=" M"+C(fe[bt],ue,Ae,re.precision);return je+="Z",[je]}function O(F,ue,Ae,re){var pe=re.hasOwnProperty("explode")?re.explode:!1,fe=v.explode(F).map(function(ke){return T(ke,ue,Ae,re)[0]});return pe?fe:[fe.join(" ").replace(/Z/g,"")+"Z"]}Qe.exports={Point:$,MultiPoint:R,LineString:z,MultiLineString:L,Polygon:T,MultiPolygon:O}},85449:function(Qe){Qe.exports=function(te,m){var v={};return Object.keys(te).forEach(function(C){v[C]=te[C]}),Object.keys(m).forEach(function(C){v[C]=m[C]}),v}},970:function(Qe,te,m){var v=m(85449),C=m(51010),l=function(L){this.options=L||{},this.viewportSize=this.options.viewportSize||{width:256,height:256},this.mapExtent=this.options.mapExtent||{left:-20037508342789244e-9,right:20037508342789244e-9,bottom:-20037508342789244e-9,top:20037508342789244e-9},this.res=this.calResolution(this.mapExtent,this.viewportSize,this.options.fitTo)};l.prototype.calResolution=function(L,T,O){var F=(L.right-L.left)/T.width,ue=(L.top-L.bottom)/T.height;if(O){if(O.toLowerCase()==="width")return F;if(O.toLowerCase()==="height")return ue;throw new Error('"fitTo" option should be "width" or "height" ')}else return Math.max(F,ue)},l.prototype.convert=function(L,T){var O=v(this.options,T||{}),F=["MultiPoint","MultiLineString","MultiPolygon"],ue=["Point","LineString","Polygon"],Ae=[];if(L.type=="FeatureCollection")for(var re=0;re<L.features.length;re++)Ae=Ae.concat(this.convertFeature(L.features[re],O));else if(L.type=="Feature")Ae=this.convertFeature(L,O);else if(L.type=="GeometryCollection")for(var re=0;re<L.geometries.length;re++)Ae=Ae.concat(this.convertGeometry(L.geometries[re],O));else if(C[L.type])Ae=this.convertGeometry(L,O);else return;return O.callback&&O.callback.call(this,Ae),Ae},l.prototype.convertFeature=function(L,T){if(!(!L&&!L.geometry)){var O=v(this.options,T||{});if(O.attributes&&O.attributes instanceof Array){var F=O.attributes;O.attributes=F.reduce(function(Ae,re){if(typeof re=="string"){var pe,fe=re.split(".").pop();try{pe=z(L,re)}catch(ke){pe=!1}pe&&(Ae[fe]=pe)}else if(typeof re=="object"&&re.type&&re.property)if(re.type==="dynamic"){var pe,fe=re.key?re.key:re.property.split(".").pop();try{pe=z(L,re.property)}catch(bt){pe=!1}pe&&(Ae[fe]=pe)}else re.type==="static"&&re.value&&(Ae[re.property]=re.value);return Ae},{})}else O.attributes=O.attributes||{};var ue=O.attributes.id||L.id||(L.properties&&L.properties.id?L.properties.id:null);return ue&&(O.attributes.id=ue),this.convertGeometry(L.geometry,O)}},l.prototype.convertGeometry=function(L,T){if(C[L.type]){var O=v(this.options,T||{}),F=O.output||"svg",ue=C[L.type].call(this,L,this.res,{x:this.mapExtent.left,y:this.mapExtent.top},O),Ae,re;return F.toLowerCase()=="svg"?(Ae=ue.map(function(pe){return $(pe,L.type,O.attributes,O)}),re=Ae.map(function(pe){return R(pe,L.type,O)}),re):ue}else return};function $(L,T,O,F){var ue={},Ae=F&&F.hasOwnProperty("pointAsCircle")?F.pointAsCircle:!1;(T=="Point"||T=="MultiPoint")&&Ae?(ue.cx=L.split(",")[0],ue.cy=L.split(",")[1],ue.r=F&&F.r?F.r:"1"):(ue={d:L},(T=="Polygon"||T=="MultiPolygon")&&ue["fill-rule"]=="evenodd");for(var re in O)ue[re]=O[re];return ue}function R(L,T,O){var F=O&&O.hasOwnProperty("pointAsCircle")?O.pointAsCircle:!1,ue="<path";(T=="Point"||T=="MultiPoint")&&F&&(ue="<circle");for(var Ae in L)ue+=" "+Ae+'="'+L[Ae]+'"';return ue+="/>",ue}function z(L,T){function O(F,ue,Ae,re){if(F.hasOwnProperty(ue))return F[ue];throw new Error(re.slice(0,Ae+1).join(".")+" is not a valid property path")}return T.split(".").reduce(O,L)}Qe.exports=l},67473:function(Qe,te,m){var v=m(970),C=function(l){return new v(l)};Qe.exports=C},49685:function(Qe,te,m){"use strict";m.d(te,{FD:function(){return l},Ib:function(){return v},WT:function(){return C}});var v=1e-6,C=typeof Float32Array!="undefined"?Float32Array:Array,l=Math.random;function $(T){C=T}var R=Math.PI/180;function z(T){return T*R}function L(T,O){return Math.abs(T-O)<=v*Math.max(1,Math.abs(T),Math.abs(O))}Math.hypot||(Math.hypot=function(){for(var T=0,O=arguments.length;O--;)T+=arguments[O]*arguments[O];return Math.sqrt(T)})},85975:function(Qe,te,m){"use strict";m.r(te),m.d(te,{add:function(){return St},adjoint:function(){return F},clone:function(){return l},copy:function(){return $},create:function(){return C},determinant:function(){return ue},equals:function(){return Be},exactEquals:function(){return Zt},frob:function(){return Lt},fromQuat:function(){return ze},fromQuat2:function(){return ht},fromRotation:function(){return se},fromRotationTranslation:function(){return Te},fromRotationTranslationScale:function(){return Ve},fromRotationTranslationScaleOrigin:function(){return ie},fromScaling:function(){return wt},fromTranslation:function(){return ut},fromValues:function(){return R},fromXRotation:function(){return qe},fromYRotation:function(){return me},fromZRotation:function(){return _e},frustum:function(){return Le},getRotation:function(){return he},getScaling:function(){return Ne},getTranslation:function(){return We},identity:function(){return L},invert:function(){return O},lookAt:function(){return we},mul:function(){return He},multiply:function(){return Ae},multiplyScalar:function(){return lt},multiplyScalarAndAdd:function(){return Et},ortho:function(){return $t},orthoNO:function(){return ar},orthoZO:function(){return ur},perspective:function(){return st},perspectiveFromFieldOfView:function(){return Dt},perspectiveNO:function(){return Re},perspectiveZO:function(){return vt},rotate:function(){return fe},rotateX:function(){return ke},rotateY:function(){return je},rotateZ:function(){return bt},scale:function(){return pe},set:function(){return z},str:function(){return nt},sub:function(){return ft},subtract:function(){return Ut},targetTo:function(){return At},translate:function(){return re},transpose:function(){return T}});var v=m(49685);function C(){var Z=new v.WT(16);return v.WT!=Float32Array&&(Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0),Z[0]=1,Z[5]=1,Z[10]=1,Z[15]=1,Z}function l(Z){var J=new v.WT(16);return J[0]=Z[0],J[1]=Z[1],J[2]=Z[2],J[3]=Z[3],J[4]=Z[4],J[5]=Z[5],J[6]=Z[6],J[7]=Z[7],J[8]=Z[8],J[9]=Z[9],J[10]=Z[10],J[11]=Z[11],J[12]=Z[12],J[13]=Z[13],J[14]=Z[14],J[15]=Z[15],J}function $(Z,J){return Z[0]=J[0],Z[1]=J[1],Z[2]=J[2],Z[3]=J[3],Z[4]=J[4],Z[5]=J[5],Z[6]=J[6],Z[7]=J[7],Z[8]=J[8],Z[9]=J[9],Z[10]=J[10],Z[11]=J[11],Z[12]=J[12],Z[13]=J[13],Z[14]=J[14],Z[15]=J[15],Z}function R(Z,J,K,B,j,ee,W,De,ot,Wt,Ct,Qt,ir,Er,Qr,Mt){var br=new v.WT(16);return br[0]=Z,br[1]=J,br[2]=K,br[3]=B,br[4]=j,br[5]=ee,br[6]=W,br[7]=De,br[8]=ot,br[9]=Wt,br[10]=Ct,br[11]=Qt,br[12]=ir,br[13]=Er,br[14]=Qr,br[15]=Mt,br}function z(Z,J,K,B,j,ee,W,De,ot,Wt,Ct,Qt,ir,Er,Qr,Mt,br){return Z[0]=J,Z[1]=K,Z[2]=B,Z[3]=j,Z[4]=ee,Z[5]=W,Z[6]=De,Z[7]=ot,Z[8]=Wt,Z[9]=Ct,Z[10]=Qt,Z[11]=ir,Z[12]=Er,Z[13]=Qr,Z[14]=Mt,Z[15]=br,Z}function L(Z){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=1,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=1,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z}function T(Z,J){if(Z===J){var K=J[1],B=J[2],j=J[3],ee=J[6],W=J[7],De=J[11];Z[1]=J[4],Z[2]=J[8],Z[3]=J[12],Z[4]=K,Z[6]=J[9],Z[7]=J[13],Z[8]=B,Z[9]=ee,Z[11]=J[14],Z[12]=j,Z[13]=W,Z[14]=De}else Z[0]=J[0],Z[1]=J[4],Z[2]=J[8],Z[3]=J[12],Z[4]=J[1],Z[5]=J[5],Z[6]=J[9],Z[7]=J[13],Z[8]=J[2],Z[9]=J[6],Z[10]=J[10],Z[11]=J[14],Z[12]=J[3],Z[13]=J[7],Z[14]=J[11],Z[15]=J[15];return Z}function O(Z,J){var K=J[0],B=J[1],j=J[2],ee=J[3],W=J[4],De=J[5],ot=J[6],Wt=J[7],Ct=J[8],Qt=J[9],ir=J[10],Er=J[11],Qr=J[12],Mt=J[13],br=J[14],Nt=J[15],Pr=K*De-B*W,_r=K*ot-j*W,kr=K*Wt-ee*W,zt=B*ot-j*De,mr=B*Wt-ee*De,Or=j*Wt-ee*ot,X=Ct*Mt-Qt*Qr,Nr=Ct*br-ir*Qr,Xe=Ct*Nt-Er*Qr,xe=Qt*br-ir*Mt,rt=Qt*Nt-Er*Mt,kt=ir*Nt-Er*br,cr=Pr*kt-_r*rt+kr*xe+zt*Xe-mr*Nr+Or*X;return cr?(cr=1/cr,Z[0]=(De*kt-ot*rt+Wt*xe)*cr,Z[1]=(j*rt-B*kt-ee*xe)*cr,Z[2]=(Mt*Or-br*mr+Nt*zt)*cr,Z[3]=(ir*mr-Qt*Or-Er*zt)*cr,Z[4]=(ot*Xe-W*kt-Wt*Nr)*cr,Z[5]=(K*kt-j*Xe+ee*Nr)*cr,Z[6]=(br*kr-Qr*Or-Nt*_r)*cr,Z[7]=(Ct*Or-ir*kr+Er*_r)*cr,Z[8]=(W*rt-De*Xe+Wt*X)*cr,Z[9]=(B*Xe-K*rt-ee*X)*cr,Z[10]=(Qr*mr-Mt*kr+Nt*Pr)*cr,Z[11]=(Qt*kr-Ct*mr-Er*Pr)*cr,Z[12]=(De*Nr-W*xe-ot*X)*cr,Z[13]=(K*xe-B*Nr+j*X)*cr,Z[14]=(Mt*_r-Qr*zt-br*Pr)*cr,Z[15]=(Ct*zt-Qt*_r+ir*Pr)*cr,Z):null}function F(Z,J){var K=J[0],B=J[1],j=J[2],ee=J[3],W=J[4],De=J[5],ot=J[6],Wt=J[7],Ct=J[8],Qt=J[9],ir=J[10],Er=J[11],Qr=J[12],Mt=J[13],br=J[14],Nt=J[15];return Z[0]=De*(ir*Nt-Er*br)-Qt*(ot*Nt-Wt*br)+Mt*(ot*Er-Wt*ir),Z[1]=-(B*(ir*Nt-Er*br)-Qt*(j*Nt-ee*br)+Mt*(j*Er-ee*ir)),Z[2]=B*(ot*Nt-Wt*br)-De*(j*Nt-ee*br)+Mt*(j*Wt-ee*ot),Z[3]=-(B*(ot*Er-Wt*ir)-De*(j*Er-ee*ir)+Qt*(j*Wt-ee*ot)),Z[4]=-(W*(ir*Nt-Er*br)-Ct*(ot*Nt-Wt*br)+Qr*(ot*Er-Wt*ir)),Z[5]=K*(ir*Nt-Er*br)-Ct*(j*Nt-ee*br)+Qr*(j*Er-ee*ir),Z[6]=-(K*(ot*Nt-Wt*br)-W*(j*Nt-ee*br)+Qr*(j*Wt-ee*ot)),Z[7]=K*(ot*Er-Wt*ir)-W*(j*Er-ee*ir)+Ct*(j*Wt-ee*ot),Z[8]=W*(Qt*Nt-Er*Mt)-Ct*(De*Nt-Wt*Mt)+Qr*(De*Er-Wt*Qt),Z[9]=-(K*(Qt*Nt-Er*Mt)-Ct*(B*Nt-ee*Mt)+Qr*(B*Er-ee*Qt)),Z[10]=K*(De*Nt-Wt*Mt)-W*(B*Nt-ee*Mt)+Qr*(B*Wt-ee*De),Z[11]=-(K*(De*Er-Wt*Qt)-W*(B*Er-ee*Qt)+Ct*(B*Wt-ee*De)),Z[12]=-(W*(Qt*br-ir*Mt)-Ct*(De*br-ot*Mt)+Qr*(De*ir-ot*Qt)),Z[13]=K*(Qt*br-ir*Mt)-Ct*(B*br-j*Mt)+Qr*(B*ir-j*Qt),Z[14]=-(K*(De*br-ot*Mt)-W*(B*br-j*Mt)+Qr*(B*ot-j*De)),Z[15]=K*(De*ir-ot*Qt)-W*(B*ir-j*Qt)+Ct*(B*ot-j*De),Z}function ue(Z){var J=Z[0],K=Z[1],B=Z[2],j=Z[3],ee=Z[4],W=Z[5],De=Z[6],ot=Z[7],Wt=Z[8],Ct=Z[9],Qt=Z[10],ir=Z[11],Er=Z[12],Qr=Z[13],Mt=Z[14],br=Z[15],Nt=J*W-K*ee,Pr=J*De-B*ee,_r=J*ot-j*ee,kr=K*De-B*W,zt=K*ot-j*W,mr=B*ot-j*De,Or=Wt*Qr-Ct*Er,X=Wt*Mt-Qt*Er,Nr=Wt*br-ir*Er,Xe=Ct*Mt-Qt*Qr,xe=Ct*br-ir*Qr,rt=Qt*br-ir*Mt;return Nt*rt-Pr*xe+_r*Xe+kr*Nr-zt*X+mr*Or}function Ae(Z,J,K){var B=J[0],j=J[1],ee=J[2],W=J[3],De=J[4],ot=J[5],Wt=J[6],Ct=J[7],Qt=J[8],ir=J[9],Er=J[10],Qr=J[11],Mt=J[12],br=J[13],Nt=J[14],Pr=J[15],_r=K[0],kr=K[1],zt=K[2],mr=K[3];return Z[0]=_r*B+kr*De+zt*Qt+mr*Mt,Z[1]=_r*j+kr*ot+zt*ir+mr*br,Z[2]=_r*ee+kr*Wt+zt*Er+mr*Nt,Z[3]=_r*W+kr*Ct+zt*Qr+mr*Pr,_r=K[4],kr=K[5],zt=K[6],mr=K[7],Z[4]=_r*B+kr*De+zt*Qt+mr*Mt,Z[5]=_r*j+kr*ot+zt*ir+mr*br,Z[6]=_r*ee+kr*Wt+zt*Er+mr*Nt,Z[7]=_r*W+kr*Ct+zt*Qr+mr*Pr,_r=K[8],kr=K[9],zt=K[10],mr=K[11],Z[8]=_r*B+kr*De+zt*Qt+mr*Mt,Z[9]=_r*j+kr*ot+zt*ir+mr*br,Z[10]=_r*ee+kr*Wt+zt*Er+mr*Nt,Z[11]=_r*W+kr*Ct+zt*Qr+mr*Pr,_r=K[12],kr=K[13],zt=K[14],mr=K[15],Z[12]=_r*B+kr*De+zt*Qt+mr*Mt,Z[13]=_r*j+kr*ot+zt*ir+mr*br,Z[14]=_r*ee+kr*Wt+zt*Er+mr*Nt,Z[15]=_r*W+kr*Ct+zt*Qr+mr*Pr,Z}function re(Z,J,K){var B=K[0],j=K[1],ee=K[2],W,De,ot,Wt,Ct,Qt,ir,Er,Qr,Mt,br,Nt;return J===Z?(Z[12]=J[0]*B+J[4]*j+J[8]*ee+J[12],Z[13]=J[1]*B+J[5]*j+J[9]*ee+J[13],Z[14]=J[2]*B+J[6]*j+J[10]*ee+J[14],Z[15]=J[3]*B+J[7]*j+J[11]*ee+J[15]):(W=J[0],De=J[1],ot=J[2],Wt=J[3],Ct=J[4],Qt=J[5],ir=J[6],Er=J[7],Qr=J[8],Mt=J[9],br=J[10],Nt=J[11],Z[0]=W,Z[1]=De,Z[2]=ot,Z[3]=Wt,Z[4]=Ct,Z[5]=Qt,Z[6]=ir,Z[7]=Er,Z[8]=Qr,Z[9]=Mt,Z[10]=br,Z[11]=Nt,Z[12]=W*B+Ct*j+Qr*ee+J[12],Z[13]=De*B+Qt*j+Mt*ee+J[13],Z[14]=ot*B+ir*j+br*ee+J[14],Z[15]=Wt*B+Er*j+Nt*ee+J[15]),Z}function pe(Z,J,K){var B=K[0],j=K[1],ee=K[2];return Z[0]=J[0]*B,Z[1]=J[1]*B,Z[2]=J[2]*B,Z[3]=J[3]*B,Z[4]=J[4]*j,Z[5]=J[5]*j,Z[6]=J[6]*j,Z[7]=J[7]*j,Z[8]=J[8]*ee,Z[9]=J[9]*ee,Z[10]=J[10]*ee,Z[11]=J[11]*ee,Z[12]=J[12],Z[13]=J[13],Z[14]=J[14],Z[15]=J[15],Z}function fe(Z,J,K,B){var j=B[0],ee=B[1],W=B[2],De=Math.hypot(j,ee,W),ot,Wt,Ct,Qt,ir,Er,Qr,Mt,br,Nt,Pr,_r,kr,zt,mr,Or,X,Nr,Xe,xe,rt,kt,cr,Ar;return De<v.Ib?null:(De=1/De,j*=De,ee*=De,W*=De,ot=Math.sin(K),Wt=Math.cos(K),Ct=1-Wt,Qt=J[0],ir=J[1],Er=J[2],Qr=J[3],Mt=J[4],br=J[5],Nt=J[6],Pr=J[7],_r=J[8],kr=J[9],zt=J[10],mr=J[11],Or=j*j*Ct+Wt,X=ee*j*Ct+W*ot,Nr=W*j*Ct-ee*ot,Xe=j*ee*Ct-W*ot,xe=ee*ee*Ct+Wt,rt=W*ee*Ct+j*ot,kt=j*W*Ct+ee*ot,cr=ee*W*Ct-j*ot,Ar=W*W*Ct+Wt,Z[0]=Qt*Or+Mt*X+_r*Nr,Z[1]=ir*Or+br*X+kr*Nr,Z[2]=Er*Or+Nt*X+zt*Nr,Z[3]=Qr*Or+Pr*X+mr*Nr,Z[4]=Qt*Xe+Mt*xe+_r*rt,Z[5]=ir*Xe+br*xe+kr*rt,Z[6]=Er*Xe+Nt*xe+zt*rt,Z[7]=Qr*Xe+Pr*xe+mr*rt,Z[8]=Qt*kt+Mt*cr+_r*Ar,Z[9]=ir*kt+br*cr+kr*Ar,Z[10]=Er*kt+Nt*cr+zt*Ar,Z[11]=Qr*kt+Pr*cr+mr*Ar,J!==Z&&(Z[12]=J[12],Z[13]=J[13],Z[14]=J[14],Z[15]=J[15]),Z)}function ke(Z,J,K){var B=Math.sin(K),j=Math.cos(K),ee=J[4],W=J[5],De=J[6],ot=J[7],Wt=J[8],Ct=J[9],Qt=J[10],ir=J[11];return J!==Z&&(Z[0]=J[0],Z[1]=J[1],Z[2]=J[2],Z[3]=J[3],Z[12]=J[12],Z[13]=J[13],Z[14]=J[14],Z[15]=J[15]),Z[4]=ee*j+Wt*B,Z[5]=W*j+Ct*B,Z[6]=De*j+Qt*B,Z[7]=ot*j+ir*B,Z[8]=Wt*j-ee*B,Z[9]=Ct*j-W*B,Z[10]=Qt*j-De*B,Z[11]=ir*j-ot*B,Z}function je(Z,J,K){var B=Math.sin(K),j=Math.cos(K),ee=J[0],W=J[1],De=J[2],ot=J[3],Wt=J[8],Ct=J[9],Qt=J[10],ir=J[11];return J!==Z&&(Z[4]=J[4],Z[5]=J[5],Z[6]=J[6],Z[7]=J[7],Z[12]=J[12],Z[13]=J[13],Z[14]=J[14],Z[15]=J[15]),Z[0]=ee*j-Wt*B,Z[1]=W*j-Ct*B,Z[2]=De*j-Qt*B,Z[3]=ot*j-ir*B,Z[8]=ee*B+Wt*j,Z[9]=W*B+Ct*j,Z[10]=De*B+Qt*j,Z[11]=ot*B+ir*j,Z}function bt(Z,J,K){var B=Math.sin(K),j=Math.cos(K),ee=J[0],W=J[1],De=J[2],ot=J[3],Wt=J[4],Ct=J[5],Qt=J[6],ir=J[7];return J!==Z&&(Z[8]=J[8],Z[9]=J[9],Z[10]=J[10],Z[11]=J[11],Z[12]=J[12],Z[13]=J[13],Z[14]=J[14],Z[15]=J[15]),Z[0]=ee*j+Wt*B,Z[1]=W*j+Ct*B,Z[2]=De*j+Qt*B,Z[3]=ot*j+ir*B,Z[4]=Wt*j-ee*B,Z[5]=Ct*j-W*B,Z[6]=Qt*j-De*B,Z[7]=ir*j-ot*B,Z}function ut(Z,J){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=1,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=1,Z[11]=0,Z[12]=J[0],Z[13]=J[1],Z[14]=J[2],Z[15]=1,Z}function wt(Z,J){return Z[0]=J[0],Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=J[1],Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=J[2],Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z}function se(Z,J,K){var B=K[0],j=K[1],ee=K[2],W=Math.hypot(B,j,ee),De,ot,Wt;return W<v.Ib?null:(W=1/W,B*=W,j*=W,ee*=W,De=Math.sin(J),ot=Math.cos(J),Wt=1-ot,Z[0]=B*B*Wt+ot,Z[1]=j*B*Wt+ee*De,Z[2]=ee*B*Wt-j*De,Z[3]=0,Z[4]=B*j*Wt-ee*De,Z[5]=j*j*Wt+ot,Z[6]=ee*j*Wt+B*De,Z[7]=0,Z[8]=B*ee*Wt+j*De,Z[9]=j*ee*Wt-B*De,Z[10]=ee*ee*Wt+ot,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z)}function qe(Z,J){var K=Math.sin(J),B=Math.cos(J);return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=B,Z[6]=K,Z[7]=0,Z[8]=0,Z[9]=-K,Z[10]=B,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z}function me(Z,J){var K=Math.sin(J),B=Math.cos(J);return Z[0]=B,Z[1]=0,Z[2]=-K,Z[3]=0,Z[4]=0,Z[5]=1,Z[6]=0,Z[7]=0,Z[8]=K,Z[9]=0,Z[10]=B,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z}function _e(Z,J){var K=Math.sin(J),B=Math.cos(J);return Z[0]=B,Z[1]=K,Z[2]=0,Z[3]=0,Z[4]=-K,Z[5]=B,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=1,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z}function Te(Z,J,K){var B=J[0],j=J[1],ee=J[2],W=J[3],De=B+B,ot=j+j,Wt=ee+ee,Ct=B*De,Qt=B*ot,ir=B*Wt,Er=j*ot,Qr=j*Wt,Mt=ee*Wt,br=W*De,Nt=W*ot,Pr=W*Wt;return Z[0]=1-(Er+Mt),Z[1]=Qt+Pr,Z[2]=ir-Nt,Z[3]=0,Z[4]=Qt-Pr,Z[5]=1-(Ct+Mt),Z[6]=Qr+br,Z[7]=0,Z[8]=ir+Nt,Z[9]=Qr-br,Z[10]=1-(Ct+Er),Z[11]=0,Z[12]=K[0],Z[13]=K[1],Z[14]=K[2],Z[15]=1,Z}function ht(Z,J){var K=new v.WT(3),B=-J[0],j=-J[1],ee=-J[2],W=J[3],De=J[4],ot=J[5],Wt=J[6],Ct=J[7],Qt=B*B+j*j+ee*ee+W*W;return Qt>0?(K[0]=(De*W+Ct*B+ot*ee-Wt*j)*2/Qt,K[1]=(ot*W+Ct*j+Wt*B-De*ee)*2/Qt,K[2]=(Wt*W+Ct*ee+De*j-ot*B)*2/Qt):(K[0]=(De*W+Ct*B+ot*ee-Wt*j)*2,K[1]=(ot*W+Ct*j+Wt*B-De*ee)*2,K[2]=(Wt*W+Ct*ee+De*j-ot*B)*2),Te(Z,J,K),Z}function We(Z,J){return Z[0]=J[12],Z[1]=J[13],Z[2]=J[14],Z}function Ne(Z,J){var K=J[0],B=J[1],j=J[2],ee=J[4],W=J[5],De=J[6],ot=J[8],Wt=J[9],Ct=J[10];return Z[0]=Math.hypot(K,B,j),Z[1]=Math.hypot(ee,W,De),Z[2]=Math.hypot(ot,Wt,Ct),Z}function he(Z,J){var K=new v.WT(3);Ne(K,J);var B=1/K[0],j=1/K[1],ee=1/K[2],W=J[0]*B,De=J[1]*j,ot=J[2]*ee,Wt=J[4]*B,Ct=J[5]*j,Qt=J[6]*ee,ir=J[8]*B,Er=J[9]*j,Qr=J[10]*ee,Mt=W+Ct+Qr,br=0;return Mt>0?(br=Math.sqrt(Mt+1)*2,Z[3]=.25*br,Z[0]=(Qt-Er)/br,Z[1]=(ir-ot)/br,Z[2]=(De-Wt)/br):W>Ct&&W>Qr?(br=Math.sqrt(1+W-Ct-Qr)*2,Z[3]=(Qt-Er)/br,Z[0]=.25*br,Z[1]=(De+Wt)/br,Z[2]=(ir+ot)/br):Ct>Qr?(br=Math.sqrt(1+Ct-W-Qr)*2,Z[3]=(ir-ot)/br,Z[0]=(De+Wt)/br,Z[1]=.25*br,Z[2]=(Qt+Er)/br):(br=Math.sqrt(1+Qr-W-Ct)*2,Z[3]=(De-Wt)/br,Z[0]=(ir+ot)/br,Z[1]=(Qt+Er)/br,Z[2]=.25*br),Z}function Ve(Z,J,K,B){var j=J[0],ee=J[1],W=J[2],De=J[3],ot=j+j,Wt=ee+ee,Ct=W+W,Qt=j*ot,ir=j*Wt,Er=j*Ct,Qr=ee*Wt,Mt=ee*Ct,br=W*Ct,Nt=De*ot,Pr=De*Wt,_r=De*Ct,kr=B[0],zt=B[1],mr=B[2];return Z[0]=(1-(Qr+br))*kr,Z[1]=(ir+_r)*kr,Z[2]=(Er-Pr)*kr,Z[3]=0,Z[4]=(ir-_r)*zt,Z[5]=(1-(Qt+br))*zt,Z[6]=(Mt+Nt)*zt,Z[7]=0,Z[8]=(Er+Pr)*mr,Z[9]=(Mt-Nt)*mr,Z[10]=(1-(Qt+Qr))*mr,Z[11]=0,Z[12]=K[0],Z[13]=K[1],Z[14]=K[2],Z[15]=1,Z}function ie(Z,J,K,B,j){var ee=J[0],W=J[1],De=J[2],ot=J[3],Wt=ee+ee,Ct=W+W,Qt=De+De,ir=ee*Wt,Er=ee*Ct,Qr=ee*Qt,Mt=W*Ct,br=W*Qt,Nt=De*Qt,Pr=ot*Wt,_r=ot*Ct,kr=ot*Qt,zt=B[0],mr=B[1],Or=B[2],X=j[0],Nr=j[1],Xe=j[2],xe=(1-(Mt+Nt))*zt,rt=(Er+kr)*zt,kt=(Qr-_r)*zt,cr=(Er-kr)*mr,Ar=(1-(ir+Nt))*mr,Lr=(br+Pr)*mr,sr=(Qr+_r)*Or,Ge=(br-Pr)*Or,Gr=(1-(ir+Mt))*Or;return Z[0]=xe,Z[1]=rt,Z[2]=kt,Z[3]=0,Z[4]=cr,Z[5]=Ar,Z[6]=Lr,Z[7]=0,Z[8]=sr,Z[9]=Ge,Z[10]=Gr,Z[11]=0,Z[12]=K[0]+X-(xe*X+cr*Nr+sr*Xe),Z[13]=K[1]+Nr-(rt*X+Ar*Nr+Ge*Xe),Z[14]=K[2]+Xe-(kt*X+Lr*Nr+Gr*Xe),Z[15]=1,Z}function ze(Z,J){var K=J[0],B=J[1],j=J[2],ee=J[3],W=K+K,De=B+B,ot=j+j,Wt=K*W,Ct=B*W,Qt=B*De,ir=j*W,Er=j*De,Qr=j*ot,Mt=ee*W,br=ee*De,Nt=ee*ot;return Z[0]=1-Qt-Qr,Z[1]=Ct+Nt,Z[2]=ir-br,Z[3]=0,Z[4]=Ct-Nt,Z[5]=1-Wt-Qr,Z[6]=Er+Mt,Z[7]=0,Z[8]=ir+br,Z[9]=Er-Mt,Z[10]=1-Wt-Qt,Z[11]=0,Z[12]=0,Z[13]=0,Z[14]=0,Z[15]=1,Z}function Le(Z,J,K,B,j,ee,W){var De=1/(K-J),ot=1/(j-B),Wt=1/(ee-W);return Z[0]=ee*2*De,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=ee*2*ot,Z[6]=0,Z[7]=0,Z[8]=(K+J)*De,Z[9]=(j+B)*ot,Z[10]=(W+ee)*Wt,Z[11]=-1,Z[12]=0,Z[13]=0,Z[14]=W*ee*2*Wt,Z[15]=0,Z}function Re(Z,J,K,B,j){var ee=1/Math.tan(J/2),W;return Z[0]=ee/K,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=ee,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[11]=-1,Z[12]=0,Z[13]=0,Z[15]=0,j!=null&&j!==1/0?(W=1/(B-j),Z[10]=(j+B)*W,Z[14]=2*j*B*W):(Z[10]=-1,Z[14]=-2*B),Z}var st=Re;function vt(Z,J,K,B,j){var ee=1/Math.tan(J/2),W;return Z[0]=ee/K,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=ee,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[11]=-1,Z[12]=0,Z[13]=0,Z[15]=0,j!=null&&j!==1/0?(W=1/(B-j),Z[10]=j*W,Z[14]=j*B*W):(Z[10]=-1,Z[14]=-B),Z}function Dt(Z,J,K,B){var j=Math.tan(J.upDegrees*Math.PI/180),ee=Math.tan(J.downDegrees*Math.PI/180),W=Math.tan(J.leftDegrees*Math.PI/180),De=Math.tan(J.rightDegrees*Math.PI/180),ot=2/(W+De),Wt=2/(j+ee);return Z[0]=ot,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=Wt,Z[6]=0,Z[7]=0,Z[8]=-((W-De)*ot*.5),Z[9]=(j-ee)*Wt*.5,Z[10]=B/(K-B),Z[11]=-1,Z[12]=0,Z[13]=0,Z[14]=B*K/(K-B),Z[15]=0,Z}function ar(Z,J,K,B,j,ee,W){var De=1/(J-K),ot=1/(B-j),Wt=1/(ee-W);return Z[0]=-2*De,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=-2*ot,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=2*Wt,Z[11]=0,Z[12]=(J+K)*De,Z[13]=(j+B)*ot,Z[14]=(W+ee)*Wt,Z[15]=1,Z}var $t=ar;function ur(Z,J,K,B,j,ee,W){var De=1/(J-K),ot=1/(B-j),Wt=1/(ee-W);return Z[0]=-2*De,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=-2*ot,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=Wt,Z[11]=0,Z[12]=(J+K)*De,Z[13]=(j+B)*ot,Z[14]=ee*Wt,Z[15]=1,Z}function we(Z,J,K,B){var j,ee,W,De,ot,Wt,Ct,Qt,ir,Er,Qr=J[0],Mt=J[1],br=J[2],Nt=B[0],Pr=B[1],_r=B[2],kr=K[0],zt=K[1],mr=K[2];return Math.abs(Qr-kr)<v.Ib&&Math.abs(Mt-zt)<v.Ib&&Math.abs(br-mr)<v.Ib?L(Z):(Ct=Qr-kr,Qt=Mt-zt,ir=br-mr,Er=1/Math.hypot(Ct,Qt,ir),Ct*=Er,Qt*=Er,ir*=Er,j=Pr*ir-_r*Qt,ee=_r*Ct-Nt*ir,W=Nt*Qt-Pr*Ct,Er=Math.hypot(j,ee,W),Er?(Er=1/Er,j*=Er,ee*=Er,W*=Er):(j=0,ee=0,W=0),De=Qt*W-ir*ee,ot=ir*j-Ct*W,Wt=Ct*ee-Qt*j,Er=Math.hypot(De,ot,Wt),Er?(Er=1/Er,De*=Er,ot*=Er,Wt*=Er):(De=0,ot=0,Wt=0),Z[0]=j,Z[1]=De,Z[2]=Ct,Z[3]=0,Z[4]=ee,Z[5]=ot,Z[6]=Qt,Z[7]=0,Z[8]=W,Z[9]=Wt,Z[10]=ir,Z[11]=0,Z[12]=-(j*Qr+ee*Mt+W*br),Z[13]=-(De*Qr+ot*Mt+Wt*br),Z[14]=-(Ct*Qr+Qt*Mt+ir*br),Z[15]=1,Z)}function At(Z,J,K,B){var j=J[0],ee=J[1],W=J[2],De=B[0],ot=B[1],Wt=B[2],Ct=j-K[0],Qt=ee-K[1],ir=W-K[2],Er=Ct*Ct+Qt*Qt+ir*ir;Er>0&&(Er=1/Math.sqrt(Er),Ct*=Er,Qt*=Er,ir*=Er);var Qr=ot*ir-Wt*Qt,Mt=Wt*Ct-De*ir,br=De*Qt-ot*Ct;return Er=Qr*Qr+Mt*Mt+br*br,Er>0&&(Er=1/Math.sqrt(Er),Qr*=Er,Mt*=Er,br*=Er),Z[0]=Qr,Z[1]=Mt,Z[2]=br,Z[3]=0,Z[4]=Qt*br-ir*Mt,Z[5]=ir*Qr-Ct*br,Z[6]=Ct*Mt-Qt*Qr,Z[7]=0,Z[8]=Ct,Z[9]=Qt,Z[10]=ir,Z[11]=0,Z[12]=j,Z[13]=ee,Z[14]=W,Z[15]=1,Z}function nt(Z){return"mat4("+Z[0]+", "+Z[1]+", "+Z[2]+", "+Z[3]+", "+Z[4]+", "+Z[5]+", "+Z[6]+", "+Z[7]+", "+Z[8]+", "+Z[9]+", "+Z[10]+", "+Z[11]+", "+Z[12]+", "+Z[13]+", "+Z[14]+", "+Z[15]+")"}function Lt(Z){return Math.hypot(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15])}function St(Z,J,K){return Z[0]=J[0]+K[0],Z[1]=J[1]+K[1],Z[2]=J[2]+K[2],Z[3]=J[3]+K[3],Z[4]=J[4]+K[4],Z[5]=J[5]+K[5],Z[6]=J[6]+K[6],Z[7]=J[7]+K[7],Z[8]=J[8]+K[8],Z[9]=J[9]+K[9],Z[10]=J[10]+K[10],Z[11]=J[11]+K[11],Z[12]=J[12]+K[12],Z[13]=J[13]+K[13],Z[14]=J[14]+K[14],Z[15]=J[15]+K[15],Z}function Ut(Z,J,K){return Z[0]=J[0]-K[0],Z[1]=J[1]-K[1],Z[2]=J[2]-K[2],Z[3]=J[3]-K[3],Z[4]=J[4]-K[4],Z[5]=J[5]-K[5],Z[6]=J[6]-K[6],Z[7]=J[7]-K[7],Z[8]=J[8]-K[8],Z[9]=J[9]-K[9],Z[10]=J[10]-K[10],Z[11]=J[11]-K[11],Z[12]=J[12]-K[12],Z[13]=J[13]-K[13],Z[14]=J[14]-K[14],Z[15]=J[15]-K[15],Z}function lt(Z,J,K){return Z[0]=J[0]*K,Z[1]=J[1]*K,Z[2]=J[2]*K,Z[3]=J[3]*K,Z[4]=J[4]*K,Z[5]=J[5]*K,Z[6]=J[6]*K,Z[7]=J[7]*K,Z[8]=J[8]*K,Z[9]=J[9]*K,Z[10]=J[10]*K,Z[11]=J[11]*K,Z[12]=J[12]*K,Z[13]=J[13]*K,Z[14]=J[14]*K,Z[15]=J[15]*K,Z}function Et(Z,J,K,B){return Z[0]=J[0]+K[0]*B,Z[1]=J[1]+K[1]*B,Z[2]=J[2]+K[2]*B,Z[3]=J[3]+K[3]*B,Z[4]=J[4]+K[4]*B,Z[5]=J[5]+K[5]*B,Z[6]=J[6]+K[6]*B,Z[7]=J[7]+K[7]*B,Z[8]=J[8]+K[8]*B,Z[9]=J[9]+K[9]*B,Z[10]=J[10]+K[10]*B,Z[11]=J[11]+K[11]*B,Z[12]=J[12]+K[12]*B,Z[13]=J[13]+K[13]*B,Z[14]=J[14]+K[14]*B,Z[15]=J[15]+K[15]*B,Z}function Zt(Z,J){return Z[0]===J[0]&&Z[1]===J[1]&&Z[2]===J[2]&&Z[3]===J[3]&&Z[4]===J[4]&&Z[5]===J[5]&&Z[6]===J[6]&&Z[7]===J[7]&&Z[8]===J[8]&&Z[9]===J[9]&&Z[10]===J[10]&&Z[11]===J[11]&&Z[12]===J[12]&&Z[13]===J[13]&&Z[14]===J[14]&&Z[15]===J[15]}function Be(Z,J){var K=Z[0],B=Z[1],j=Z[2],ee=Z[3],W=Z[4],De=Z[5],ot=Z[6],Wt=Z[7],Ct=Z[8],Qt=Z[9],ir=Z[10],Er=Z[11],Qr=Z[12],Mt=Z[13],br=Z[14],Nt=Z[15],Pr=J[0],_r=J[1],kr=J[2],zt=J[3],mr=J[4],Or=J[5],X=J[6],Nr=J[7],Xe=J[8],xe=J[9],rt=J[10],kt=J[11],cr=J[12],Ar=J[13],Lr=J[14],sr=J[15];return Math.abs(K-Pr)<=v.Ib*Math.max(1,Math.abs(K),Math.abs(Pr))&&Math.abs(B-_r)<=v.Ib*Math.max(1,Math.abs(B),Math.abs(_r))&&Math.abs(j-kr)<=v.Ib*Math.max(1,Math.abs(j),Math.abs(kr))&&Math.abs(ee-zt)<=v.Ib*Math.max(1,Math.abs(ee),Math.abs(zt))&&Math.abs(W-mr)<=v.Ib*Math.max(1,Math.abs(W),Math.abs(mr))&&Math.abs(De-Or)<=v.Ib*Math.max(1,Math.abs(De),Math.abs(Or))&&Math.abs(ot-X)<=v.Ib*Math.max(1,Math.abs(ot),Math.abs(X))&&Math.abs(Wt-Nr)<=v.Ib*Math.max(1,Math.abs(Wt),Math.abs(Nr))&&Math.abs(Ct-Xe)<=v.Ib*Math.max(1,Math.abs(Ct),Math.abs(Xe))&&Math.abs(Qt-xe)<=v.Ib*Math.max(1,Math.abs(Qt),Math.abs(xe))&&Math.abs(ir-rt)<=v.Ib*Math.max(1,Math.abs(ir),Math.abs(rt))&&Math.abs(Er-kt)<=v.Ib*Math.max(1,Math.abs(Er),Math.abs(kt))&&Math.abs(Qr-cr)<=v.Ib*Math.max(1,Math.abs(Qr),Math.abs(cr))&&Math.abs(Mt-Ar)<=v.Ib*Math.max(1,Math.abs(Mt),Math.abs(Ar))&&Math.abs(br-Lr)<=v.Ib*Math.max(1,Math.abs(br),Math.abs(Lr))&&Math.abs(Nt-sr)<=v.Ib*Math.max(1,Math.abs(Nt),Math.abs(sr))}var He=Ae,ft=Ut},31437:function(Qe,te,m){"use strict";m.d(te,{$X:function(){return T},AK:function(){return Te},Fv:function(){return _e},IH:function(){return L},JG:function(){return R},Ue:function(){return C},al:function(){return $},lu:function(){return ur},t7:function(){return We},t8:function(){return z},tk:function(){return qe}});var v=m(49685);function C(){var lt=new v.WT(2);return v.WT!=Float32Array&&(lt[0]=0,lt[1]=0),lt}function l(lt){var Et=new glMatrix.ARRAY_TYPE(2);return Et[0]=lt[0],Et[1]=lt[1],Et}function $(lt,Et){var Zt=new v.WT(2);return Zt[0]=lt,Zt[1]=Et,Zt}function R(lt,Et){return lt[0]=Et[0],lt[1]=Et[1],lt}function z(lt,Et,Zt){return lt[0]=Et,lt[1]=Zt,lt}function L(lt,Et,Zt){return lt[0]=Et[0]+Zt[0],lt[1]=Et[1]+Zt[1],lt}function T(lt,Et,Zt){return lt[0]=Et[0]-Zt[0],lt[1]=Et[1]-Zt[1],lt}function O(lt,Et,Zt){return lt[0]=Et[0]*Zt[0],lt[1]=Et[1]*Zt[1],lt}function F(lt,Et,Zt){return lt[0]=Et[0]/Zt[0],lt[1]=Et[1]/Zt[1],lt}function ue(lt,Et){return lt[0]=Math.ceil(Et[0]),lt[1]=Math.ceil(Et[1]),lt}function Ae(lt,Et){return lt[0]=Math.floor(Et[0]),lt[1]=Math.floor(Et[1]),lt}function re(lt,Et,Zt){return lt[0]=Math.min(Et[0],Zt[0]),lt[1]=Math.min(Et[1],Zt[1]),lt}function pe(lt,Et,Zt){return lt[0]=Math.max(Et[0],Zt[0]),lt[1]=Math.max(Et[1],Zt[1]),lt}function fe(lt,Et){return lt[0]=Math.round(Et[0]),lt[1]=Math.round(Et[1]),lt}function ke(lt,Et,Zt){return lt[0]=Et[0]*Zt,lt[1]=Et[1]*Zt,lt}function je(lt,Et,Zt,Be){return lt[0]=Et[0]+Zt[0]*Be,lt[1]=Et[1]+Zt[1]*Be,lt}function bt(lt,Et){var Zt=Et[0]-lt[0],Be=Et[1]-lt[1];return Math.hypot(Zt,Be)}function ut(lt,Et){var Zt=Et[0]-lt[0],Be=Et[1]-lt[1];return Zt*Zt+Be*Be}function wt(lt){var Et=lt[0],Zt=lt[1];return Math.hypot(Et,Zt)}function se(lt){var Et=lt[0],Zt=lt[1];return Et*Et+Zt*Zt}function qe(lt,Et){return lt[0]=-Et[0],lt[1]=-Et[1],lt}function me(lt,Et){return lt[0]=1/Et[0],lt[1]=1/Et[1],lt}function _e(lt,Et){var Zt=Et[0],Be=Et[1],He=Zt*Zt+Be*Be;return He>0&&(He=1/Math.sqrt(He)),lt[0]=Et[0]*He,lt[1]=Et[1]*He,lt}function Te(lt,Et){return lt[0]*Et[0]+lt[1]*Et[1]}function ht(lt,Et,Zt){var Be=Et[0]*Zt[1]-Et[1]*Zt[0];return lt[0]=lt[1]=0,lt[2]=Be,lt}function We(lt,Et,Zt,Be){var He=Et[0],ft=Et[1];return lt[0]=He+Be*(Zt[0]-He),lt[1]=ft+Be*(Zt[1]-ft),lt}function Ne(lt,Et){Et=Et||1;var Zt=glMatrix.RANDOM()*2*Math.PI;return lt[0]=Math.cos(Zt)*Et,lt[1]=Math.sin(Zt)*Et,lt}function he(lt,Et,Zt){var Be=Et[0],He=Et[1];return lt[0]=Zt[0]*Be+Zt[2]*He,lt[1]=Zt[1]*Be+Zt[3]*He,lt}function Ve(lt,Et,Zt){var Be=Et[0],He=Et[1];return lt[0]=Zt[0]*Be+Zt[2]*He+Zt[4],lt[1]=Zt[1]*Be+Zt[3]*He+Zt[5],lt}function ie(lt,Et,Zt){var Be=Et[0],He=Et[1];return lt[0]=Zt[0]*Be+Zt[3]*He+Zt[6],lt[1]=Zt[1]*Be+Zt[4]*He+Zt[7],lt}function ze(lt,Et,Zt){var Be=Et[0],He=Et[1];return lt[0]=Zt[0]*Be+Zt[4]*He+Zt[12],lt[1]=Zt[1]*Be+Zt[5]*He+Zt[13],lt}function Le(lt,Et,Zt,Be){var He=Et[0]-Zt[0],ft=Et[1]-Zt[1],Z=Math.sin(Be),J=Math.cos(Be);return lt[0]=He*J-ft*Z+Zt[0],lt[1]=He*Z+ft*J+Zt[1],lt}function Re(lt,Et){var Zt=lt[0],Be=lt[1],He=Et[0],ft=Et[1],Z=Math.sqrt(Zt*Zt+Be*Be)*Math.sqrt(He*He+ft*ft),J=Z&&(Zt*He+Be*ft)/Z;return Math.acos(Math.min(Math.max(J,-1),1))}function st(lt){return lt[0]=0,lt[1]=0,lt}function vt(lt){return"vec2("+lt[0]+", "+lt[1]+")"}function Dt(lt,Et){return lt[0]===Et[0]&&lt[1]===Et[1]}function ar(lt,Et){var Zt=lt[0],Be=lt[1],He=Et[0],ft=Et[1];return Math.abs(Zt-He)<=glMatrix.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(He))&&Math.abs(Be-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(Be),Math.abs(ft))}var $t=null,ur=T,we=null,At=null,nt=null,Lt=null,St=null,Ut=function(){var lt=C();return function(Et,Zt,Be,He,ft,Z){var J,K;for(Zt||(Zt=2),Be||(Be=0),He?K=Math.min(He*Zt+Be,Et.length):K=Et.length,J=Be;J<K;J+=Zt)lt[0]=Et[J],lt[1]=Et[J+1],ft(lt,lt,Z),Et[J]=lt[0],Et[J+1]=lt[1];return Et}}()},77160:function(Qe,te,m){"use strict";m.r(te),m.d(te,{add:function(){return T},angle:function(){return Dt},bezier:function(){return he},ceil:function(){return Ae},clone:function(){return l},copy:function(){return z},create:function(){return C},cross:function(){return ht},dist:function(){return St},distance:function(){return ut},div:function(){return Lt},divide:function(){return ue},dot:function(){return Te},equals:function(){return we},exactEquals:function(){return ur},floor:function(){return re},forEach:function(){return Zt},fromValues:function(){return R},hermite:function(){return Ne},inverse:function(){return me},len:function(){return lt},length:function(){return $},lerp:function(){return We},max:function(){return fe},min:function(){return pe},mul:function(){return nt},multiply:function(){return F},negate:function(){return qe},normalize:function(){return _e},random:function(){return Ve},rotateX:function(){return Re},rotateY:function(){return st},rotateZ:function(){return vt},round:function(){return ke},scale:function(){return je},scaleAndAdd:function(){return bt},set:function(){return L},sqrDist:function(){return Ut},sqrLen:function(){return Et},squaredDistance:function(){return wt},squaredLength:function(){return se},str:function(){return $t},sub:function(){return At},subtract:function(){return O},transformMat3:function(){return ze},transformMat4:function(){return ie},transformQuat:function(){return Le},zero:function(){return ar}});var v=m(49685);function C(){var Be=new v.WT(3);return v.WT!=Float32Array&&(Be[0]=0,Be[1]=0,Be[2]=0),Be}function l(Be){var He=new v.WT(3);return He[0]=Be[0],He[1]=Be[1],He[2]=Be[2],He}function $(Be){var He=Be[0],ft=Be[1],Z=Be[2];return Math.hypot(He,ft,Z)}function R(Be,He,ft){var Z=new v.WT(3);return Z[0]=Be,Z[1]=He,Z[2]=ft,Z}function z(Be,He){return Be[0]=He[0],Be[1]=He[1],Be[2]=He[2],Be}function L(Be,He,ft,Z){return Be[0]=He,Be[1]=ft,Be[2]=Z,Be}function T(Be,He,ft){return Be[0]=He[0]+ft[0],Be[1]=He[1]+ft[1],Be[2]=He[2]+ft[2],Be}function O(Be,He,ft){return Be[0]=He[0]-ft[0],Be[1]=He[1]-ft[1],Be[2]=He[2]-ft[2],Be}function F(Be,He,ft){return Be[0]=He[0]*ft[0],Be[1]=He[1]*ft[1],Be[2]=He[2]*ft[2],Be}function ue(Be,He,ft){return Be[0]=He[0]/ft[0],Be[1]=He[1]/ft[1],Be[2]=He[2]/ft[2],Be}function Ae(Be,He){return Be[0]=Math.ceil(He[0]),Be[1]=Math.ceil(He[1]),Be[2]=Math.ceil(He[2]),Be}function re(Be,He){return Be[0]=Math.floor(He[0]),Be[1]=Math.floor(He[1]),Be[2]=Math.floor(He[2]),Be}function pe(Be,He,ft){return Be[0]=Math.min(He[0],ft[0]),Be[1]=Math.min(He[1],ft[1]),Be[2]=Math.min(He[2],ft[2]),Be}function fe(Be,He,ft){return Be[0]=Math.max(He[0],ft[0]),Be[1]=Math.max(He[1],ft[1]),Be[2]=Math.max(He[2],ft[2]),Be}function ke(Be,He){return Be[0]=Math.round(He[0]),Be[1]=Math.round(He[1]),Be[2]=Math.round(He[2]),Be}function je(Be,He,ft){return Be[0]=He[0]*ft,Be[1]=He[1]*ft,Be[2]=He[2]*ft,Be}function bt(Be,He,ft,Z){return Be[0]=He[0]+ft[0]*Z,Be[1]=He[1]+ft[1]*Z,Be[2]=He[2]+ft[2]*Z,Be}function ut(Be,He){var ft=He[0]-Be[0],Z=He[1]-Be[1],J=He[2]-Be[2];return Math.hypot(ft,Z,J)}function wt(Be,He){var ft=He[0]-Be[0],Z=He[1]-Be[1],J=He[2]-Be[2];return ft*ft+Z*Z+J*J}function se(Be){var He=Be[0],ft=Be[1],Z=Be[2];return He*He+ft*ft+Z*Z}function qe(Be,He){return Be[0]=-He[0],Be[1]=-He[1],Be[2]=-He[2],Be}function me(Be,He){return Be[0]=1/He[0],Be[1]=1/He[1],Be[2]=1/He[2],Be}function _e(Be,He){var ft=He[0],Z=He[1],J=He[2],K=ft*ft+Z*Z+J*J;return K>0&&(K=1/Math.sqrt(K)),Be[0]=He[0]*K,Be[1]=He[1]*K,Be[2]=He[2]*K,Be}function Te(Be,He){return Be[0]*He[0]+Be[1]*He[1]+Be[2]*He[2]}function ht(Be,He,ft){var Z=He[0],J=He[1],K=He[2],B=ft[0],j=ft[1],ee=ft[2];return Be[0]=J*ee-K*j,Be[1]=K*B-Z*ee,Be[2]=Z*j-J*B,Be}function We(Be,He,ft,Z){var J=He[0],K=He[1],B=He[2];return Be[0]=J+Z*(ft[0]-J),Be[1]=K+Z*(ft[1]-K),Be[2]=B+Z*(ft[2]-B),Be}function Ne(Be,He,ft,Z,J,K){var B=K*K,j=B*(2*K-3)+1,ee=B*(K-2)+K,W=B*(K-1),De=B*(3-2*K);return Be[0]=He[0]*j+ft[0]*ee+Z[0]*W+J[0]*De,Be[1]=He[1]*j+ft[1]*ee+Z[1]*W+J[1]*De,Be[2]=He[2]*j+ft[2]*ee+Z[2]*W+J[2]*De,Be}function he(Be,He,ft,Z,J,K){var B=1-K,j=B*B,ee=K*K,W=j*B,De=3*K*j,ot=3*ee*B,Wt=ee*K;return Be[0]=He[0]*W+ft[0]*De+Z[0]*ot+J[0]*Wt,Be[1]=He[1]*W+ft[1]*De+Z[1]*ot+J[1]*Wt,Be[2]=He[2]*W+ft[2]*De+Z[2]*ot+J[2]*Wt,Be}function Ve(Be,He){He=He||1;var ft=v.FD()*2*Math.PI,Z=v.FD()*2-1,J=Math.sqrt(1-Z*Z)*He;return Be[0]=Math.cos(ft)*J,Be[1]=Math.sin(ft)*J,Be[2]=Z*He,Be}function ie(Be,He,ft){var Z=He[0],J=He[1],K=He[2],B=ft[3]*Z+ft[7]*J+ft[11]*K+ft[15];return B=B||1,Be[0]=(ft[0]*Z+ft[4]*J+ft[8]*K+ft[12])/B,Be[1]=(ft[1]*Z+ft[5]*J+ft[9]*K+ft[13])/B,Be[2]=(ft[2]*Z+ft[6]*J+ft[10]*K+ft[14])/B,Be}function ze(Be,He,ft){var Z=He[0],J=He[1],K=He[2];return Be[0]=Z*ft[0]+J*ft[3]+K*ft[6],Be[1]=Z*ft[1]+J*ft[4]+K*ft[7],Be[2]=Z*ft[2]+J*ft[5]+K*ft[8],Be}function Le(Be,He,ft){var Z=ft[0],J=ft[1],K=ft[2],B=ft[3],j=He[0],ee=He[1],W=He[2],De=J*W-K*ee,ot=K*j-Z*W,Wt=Z*ee-J*j,Ct=J*Wt-K*ot,Qt=K*De-Z*Wt,ir=Z*ot-J*De,Er=B*2;return De*=Er,ot*=Er,Wt*=Er,Ct*=2,Qt*=2,ir*=2,Be[0]=j+De+Ct,Be[1]=ee+ot+Qt,Be[2]=W+Wt+ir,Be}function Re(Be,He,ft,Z){var J=[],K=[];return J[0]=He[0]-ft[0],J[1]=He[1]-ft[1],J[2]=He[2]-ft[2],K[0]=J[0],K[1]=J[1]*Math.cos(Z)-J[2]*Math.sin(Z),K[2]=J[1]*Math.sin(Z)+J[2]*Math.cos(Z),Be[0]=K[0]+ft[0],Be[1]=K[1]+ft[1],Be[2]=K[2]+ft[2],Be}function st(Be,He,ft,Z){var J=[],K=[];return J[0]=He[0]-ft[0],J[1]=He[1]-ft[1],J[2]=He[2]-ft[2],K[0]=J[2]*Math.sin(Z)+J[0]*Math.cos(Z),K[1]=J[1],K[2]=J[2]*Math.cos(Z)-J[0]*Math.sin(Z),Be[0]=K[0]+ft[0],Be[1]=K[1]+ft[1],Be[2]=K[2]+ft[2],Be}function vt(Be,He,ft,Z){var J=[],K=[];return J[0]=He[0]-ft[0],J[1]=He[1]-ft[1],J[2]=He[2]-ft[2],K[0]=J[0]*Math.cos(Z)-J[1]*Math.sin(Z),K[1]=J[0]*Math.sin(Z)+J[1]*Math.cos(Z),K[2]=J[2],Be[0]=K[0]+ft[0],Be[1]=K[1]+ft[1],Be[2]=K[2]+ft[2],Be}function Dt(Be,He){var ft=Be[0],Z=Be[1],J=Be[2],K=He[0],B=He[1],j=He[2],ee=Math.sqrt(ft*ft+Z*Z+J*J),W=Math.sqrt(K*K+B*B+j*j),De=ee*W,ot=De&&Te(Be,He)/De;return Math.acos(Math.min(Math.max(ot,-1),1))}function ar(Be){return Be[0]=0,Be[1]=0,Be[2]=0,Be}function $t(Be){return"vec3("+Be[0]+", "+Be[1]+", "+Be[2]+")"}function ur(Be,He){return Be[0]===He[0]&&Be[1]===He[1]&&Be[2]===He[2]}function we(Be,He){var ft=Be[0],Z=Be[1],J=Be[2],K=He[0],B=He[1],j=He[2];return Math.abs(ft-K)<=v.Ib*Math.max(1,Math.abs(ft),Math.abs(K))&&Math.abs(Z-B)<=v.Ib*Math.max(1,Math.abs(Z),Math.abs(B))&&Math.abs(J-j)<=v.Ib*Math.max(1,Math.abs(J),Math.abs(j))}var At=O,nt=F,Lt=ue,St=ut,Ut=wt,lt=$,Et=se,Zt=function(){var Be=C();return function(He,ft,Z,J,K,B){var j,ee;for(ft||(ft=3),Z||(Z=0),J?ee=Math.min(J*ft+Z,He.length):ee=He.length,j=Z;j<ee;j+=ft)Be[0]=He[j],Be[1]=He[j+1],Be[2]=He[j+2],K(Be,Be,B),He[j]=Be[0],He[j+1]=Be[1],He[j+2]=Be[2];return He}}()},98333:function(Qe,te,m){"use strict";m.d(te,{Ue:function(){return C},al:function(){return $},bA:function(){return ke},fF:function(){return he}});var v=m(49685);function C(){var nt=new v.WT(4);return v.WT!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=0),nt}function l(nt){var Lt=new glMatrix.ARRAY_TYPE(4);return Lt[0]=nt[0],Lt[1]=nt[1],Lt[2]=nt[2],Lt[3]=nt[3],Lt}function $(nt,Lt,St,Ut){var lt=new v.WT(4);return lt[0]=nt,lt[1]=Lt,lt[2]=St,lt[3]=Ut,lt}function R(nt,Lt){return nt[0]=Lt[0],nt[1]=Lt[1],nt[2]=Lt[2],nt[3]=Lt[3],nt}function z(nt,Lt,St,Ut,lt){return nt[0]=Lt,nt[1]=St,nt[2]=Ut,nt[3]=lt,nt}function L(nt,Lt,St){return nt[0]=Lt[0]+St[0],nt[1]=Lt[1]+St[1],nt[2]=Lt[2]+St[2],nt[3]=Lt[3]+St[3],nt}function T(nt,Lt,St){return nt[0]=Lt[0]-St[0],nt[1]=Lt[1]-St[1],nt[2]=Lt[2]-St[2],nt[3]=Lt[3]-St[3],nt}function O(nt,Lt,St){return nt[0]=Lt[0]*St[0],nt[1]=Lt[1]*St[1],nt[2]=Lt[2]*St[2],nt[3]=Lt[3]*St[3],nt}function F(nt,Lt,St){return nt[0]=Lt[0]/St[0],nt[1]=Lt[1]/St[1],nt[2]=Lt[2]/St[2],nt[3]=Lt[3]/St[3],nt}function ue(nt,Lt){return nt[0]=Math.ceil(Lt[0]),nt[1]=Math.ceil(Lt[1]),nt[2]=Math.ceil(Lt[2]),nt[3]=Math.ceil(Lt[3]),nt}function Ae(nt,Lt){return nt[0]=Math.floor(Lt[0]),nt[1]=Math.floor(Lt[1]),nt[2]=Math.floor(Lt[2]),nt[3]=Math.floor(Lt[3]),nt}function re(nt,Lt,St){return nt[0]=Math.min(Lt[0],St[0]),nt[1]=Math.min(Lt[1],St[1]),nt[2]=Math.min(Lt[2],St[2]),nt[3]=Math.min(Lt[3],St[3]),nt}function pe(nt,Lt,St){return nt[0]=Math.max(Lt[0],St[0]),nt[1]=Math.max(Lt[1],St[1]),nt[2]=Math.max(Lt[2],St[2]),nt[3]=Math.max(Lt[3],St[3]),nt}function fe(nt,Lt){return nt[0]=Math.round(Lt[0]),nt[1]=Math.round(Lt[1]),nt[2]=Math.round(Lt[2]),nt[3]=Math.round(Lt[3]),nt}function ke(nt,Lt,St){return nt[0]=Lt[0]*St,nt[1]=Lt[1]*St,nt[2]=Lt[2]*St,nt[3]=Lt[3]*St,nt}function je(nt,Lt,St,Ut){return nt[0]=Lt[0]+St[0]*Ut,nt[1]=Lt[1]+St[1]*Ut,nt[2]=Lt[2]+St[2]*Ut,nt[3]=Lt[3]+St[3]*Ut,nt}function bt(nt,Lt){var St=Lt[0]-nt[0],Ut=Lt[1]-nt[1],lt=Lt[2]-nt[2],Et=Lt[3]-nt[3];return Math.hypot(St,Ut,lt,Et)}function ut(nt,Lt){var St=Lt[0]-nt[0],Ut=Lt[1]-nt[1],lt=Lt[2]-nt[2],Et=Lt[3]-nt[3];return St*St+Ut*Ut+lt*lt+Et*Et}function wt(nt){var Lt=nt[0],St=nt[1],Ut=nt[2],lt=nt[3];return Math.hypot(Lt,St,Ut,lt)}function se(nt){var Lt=nt[0],St=nt[1],Ut=nt[2],lt=nt[3];return Lt*Lt+St*St+Ut*Ut+lt*lt}function qe(nt,Lt){return nt[0]=-Lt[0],nt[1]=-Lt[1],nt[2]=-Lt[2],nt[3]=-Lt[3],nt}function me(nt,Lt){return nt[0]=1/Lt[0],nt[1]=1/Lt[1],nt[2]=1/Lt[2],nt[3]=1/Lt[3],nt}function _e(nt,Lt){var St=Lt[0],Ut=Lt[1],lt=Lt[2],Et=Lt[3],Zt=St*St+Ut*Ut+lt*lt+Et*Et;return Zt>0&&(Zt=1/Math.sqrt(Zt)),nt[0]=St*Zt,nt[1]=Ut*Zt,nt[2]=lt*Zt,nt[3]=Et*Zt,nt}function Te(nt,Lt){return nt[0]*Lt[0]+nt[1]*Lt[1]+nt[2]*Lt[2]+nt[3]*Lt[3]}function ht(nt,Lt,St,Ut){var lt=St[0]*Ut[1]-St[1]*Ut[0],Et=St[0]*Ut[2]-St[2]*Ut[0],Zt=St[0]*Ut[3]-St[3]*Ut[0],Be=St[1]*Ut[2]-St[2]*Ut[1],He=St[1]*Ut[3]-St[3]*Ut[1],ft=St[2]*Ut[3]-St[3]*Ut[2],Z=Lt[0],J=Lt[1],K=Lt[2],B=Lt[3];return nt[0]=J*ft-K*He+B*Be,nt[1]=-(Z*ft)+K*Zt-B*Et,nt[2]=Z*He-J*Zt+B*lt,nt[3]=-(Z*Be)+J*Et-K*lt,nt}function We(nt,Lt,St,Ut){var lt=Lt[0],Et=Lt[1],Zt=Lt[2],Be=Lt[3];return nt[0]=lt+Ut*(St[0]-lt),nt[1]=Et+Ut*(St[1]-Et),nt[2]=Zt+Ut*(St[2]-Zt),nt[3]=Be+Ut*(St[3]-Be),nt}function Ne(nt,Lt){Lt=Lt||1;var St,Ut,lt,Et,Zt,Be;do St=glMatrix.RANDOM()*2-1,Ut=glMatrix.RANDOM()*2-1,Zt=St*St+Ut*Ut;while(Zt>=1);do lt=glMatrix.RANDOM()*2-1,Et=glMatrix.RANDOM()*2-1,Be=lt*lt+Et*Et;while(Be>=1);var He=Math.sqrt((1-Zt)/Be);return nt[0]=Lt*St,nt[1]=Lt*Ut,nt[2]=Lt*lt*He,nt[3]=Lt*Et*He,nt}function he(nt,Lt,St){var Ut=Lt[0],lt=Lt[1],Et=Lt[2],Zt=Lt[3];return nt[0]=St[0]*Ut+St[4]*lt+St[8]*Et+St[12]*Zt,nt[1]=St[1]*Ut+St[5]*lt+St[9]*Et+St[13]*Zt,nt[2]=St[2]*Ut+St[6]*lt+St[10]*Et+St[14]*Zt,nt[3]=St[3]*Ut+St[7]*lt+St[11]*Et+St[15]*Zt,nt}function Ve(nt,Lt,St){var Ut=Lt[0],lt=Lt[1],Et=Lt[2],Zt=St[0],Be=St[1],He=St[2],ft=St[3],Z=ft*Ut+Be*Et-He*lt,J=ft*lt+He*Ut-Zt*Et,K=ft*Et+Zt*lt-Be*Ut,B=-Zt*Ut-Be*lt-He*Et;return nt[0]=Z*ft+B*-Zt+J*-He-K*-Be,nt[1]=J*ft+B*-Be+K*-Zt-Z*-He,nt[2]=K*ft+B*-He+Z*-Be-J*-Zt,nt[3]=Lt[3],nt}function ie(nt){return nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=0,nt}function ze(nt){return"vec4("+nt[0]+", "+nt[1]+", "+nt[2]+", "+nt[3]+")"}function Le(nt,Lt){return nt[0]===Lt[0]&&nt[1]===Lt[1]&&nt[2]===Lt[2]&&nt[3]===Lt[3]}function Re(nt,Lt){var St=nt[0],Ut=nt[1],lt=nt[2],Et=nt[3],Zt=Lt[0],Be=Lt[1],He=Lt[2],ft=Lt[3];return Math.abs(St-Zt)<=glMatrix.EPSILON*Math.max(1,Math.abs(St),Math.abs(Zt))&&Math.abs(Ut-Be)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(Be))&&Math.abs(lt-He)<=glMatrix.EPSILON*Math.max(1,Math.abs(lt),Math.abs(He))&&Math.abs(Et-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ft))}var st=null,vt=null,Dt=null,ar=null,$t=null,ur=null,we=null,At=function(){var nt=C();return function(Lt,St,Ut,lt,Et,Zt){var Be,He;for(St||(St=4),Ut||(Ut=0),lt?He=Math.min(lt*St+Ut,Lt.length):He=Lt.length,Be=Ut;Be<He;Be+=St)nt[0]=Lt[Be],nt[1]=Lt[Be+1],nt[2]=Lt[Be+2],nt[3]=Lt[Be+3],Et(nt,nt,Zt),Lt[Be]=nt[0],Lt[Be+1]=nt[1],Lt[Be+2]=nt[2],Lt[Be+3]=nt[3];return Lt}}()},80645:function(Qe,te){te.read=function(m,v,C,l,$){var R,z,L=$*8-l-1,T=(1<<L)-1,O=T>>1,F=-7,ue=C?$-1:0,Ae=C?-1:1,re=m[v+ue];for(ue+=Ae,R=re&(1<<-F)-1,re>>=-F,F+=L;F>0;R=R*256+m[v+ue],ue+=Ae,F-=8);for(z=R&(1<<-F)-1,R>>=-F,F+=l;F>0;z=z*256+m[v+ue],ue+=Ae,F-=8);if(R===0)R=1-O;else{if(R===T)return z?NaN:(re?-1:1)*(1/0);z=z+Math.pow(2,l),R=R-O}return(re?-1:1)*z*Math.pow(2,R-l)},te.write=function(m,v,C,l,$,R){var z,L,T,O=R*8-$-1,F=(1<<O)-1,ue=F>>1,Ae=$===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=l?0:R-1,pe=l?1:-1,fe=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(L=isNaN(v)?1:0,z=F):(z=Math.floor(Math.log(v)/Math.LN2),v*(T=Math.pow(2,-z))<1&&(z--,T*=2),z+ue>=1?v+=Ae/T:v+=Ae*Math.pow(2,1-ue),v*T>=2&&(z++,T/=2),z+ue>=F?(L=0,z=F):z+ue>=1?(L=(v*T-1)*Math.pow(2,$),z=z+ue):(L=v*Math.pow(2,ue-1)*Math.pow(2,$),z=0));$>=8;m[C+re]=L&255,re+=pe,L/=256,$-=8);for(z=z<<$|L,O+=$;O>0;m[C+re]=z&255,re+=pe,z/=256,O-=8);m[C+re-pe]|=fe*128}},7375:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0});var m=Symbol.for("INJECTION");function v(z,L,T,O){function F(){return O&&!Reflect.hasMetadata(m,this,L)&&Reflect.defineMetadata(m,T(),this,L),Reflect.hasMetadata(m,this,L)?Reflect.getMetadata(m,this,L):T()}function ue(Ae){Reflect.defineMetadata(m,Ae,this,L)}Object.defineProperty(z,L,{configurable:!0,enumerable:!0,get:F,set:ue})}function C(z,L){return function(T){return function(O,F){var ue=function(){return z.get(T)};v(O,F,ue,L)}}}te.makePropertyInjectDecorator=C;function l(z,L){return function(T,O){return function(F,ue){var Ae=function(){return z.getNamed(T,O)};v(F,ue,Ae,L)}}}te.makePropertyInjectNamedDecorator=l;function $(z,L){return function(T,O,F){return function(ue,Ae){var re=function(){return z.getTagged(T,O,F)};v(ue,Ae,re,L)}}}te.makePropertyInjectTaggedDecorator=$;function R(z,L){return function(T){return function(O,F){var ue=function(){return z.getAll(T)};v(O,F,ue,L)}}}te.makePropertyMultiInjectDecorator=R},84879:function(Qe,te,m){"use strict";var v;v={value:!0};var C=m(7375);function l($,R){R===void 0&&(R=!0);var z=C.makePropertyInjectDecorator($,R),L=C.makePropertyInjectNamedDecorator($,R),T=C.makePropertyInjectTaggedDecorator($,R),O=C.makePropertyMultiInjectDecorator($,R);return{lazyInject:z,lazyInjectNamed:L,lazyInjectTagged:T,lazyMultiInject:O}}te.Z=l},99934:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.tagProperty=te.tagParameter=te.decorate=void 0;var v=m(16674),C=m(6867);function l(O,F,ue,Ae){var re=C.TAGGED;R(re,O,F,Ae,ue)}te.tagParameter=l;function $(O,F,ue){var Ae=C.TAGGED_PROP;R(Ae,O.constructor,F,ue)}te.tagProperty=$;function R(O,F,ue,Ae,re){var pe={},fe=typeof re=="number",ke=re!==void 0&&fe?re.toString():ue;if(fe&&ue!==void 0)throw new Error(v.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(O,F)&&(pe=Reflect.getMetadata(O,F));var je=pe[ke];if(!Array.isArray(je))je=[];else for(var bt=0,ut=je;bt<ut.length;bt++){var wt=ut[bt];if(wt.key===Ae.key)throw new Error(v.DUPLICATED_METADATA+" "+wt.key.toString())}je.push(Ae),pe[ke]=je,Reflect.defineMetadata(O,pe,F)}function z(O,F){Reflect.decorate(O,F)}function L(O,F){return function(ue,Ae){F(ue,Ae,O)}}function T(O,F,ue){typeof ue=="number"?z([L(ue,O)],F):typeof ue=="string"?Reflect.decorate([O],F,ue):z([O],F)}te.decorate=T},5744:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.inject=te.LazyServiceIdentifer=void 0;var v=m(16674),C=m(6867),l=m(47738),$=m(99934),R=function(){function L(T){this._cb=T}return L.prototype.unwrap=function(){return this._cb()},L}();te.LazyServiceIdentifer=R;function z(L){return function(T,O,F){if(L===void 0)throw new Error(v.UNDEFINED_INJECT_ANNOTATION(T.name));var ue=new l.Metadata(C.INJECT_TAG,L);typeof F=="number"?$.tagParameter(T,O,F,ue):$.tagProperty(T,O,ue)}}te.inject=z},64315:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.injectable=void 0;var v=m(16674),C=m(6867);function l(){return function($){if(Reflect.hasOwnMetadata(C.PARAM_TYPES,$))throw new Error(v.DUPLICATED_INJECTABLE_DECORATOR);var R=Reflect.getMetadata(C.DESIGN_PARAM_TYPES,$)||[];return Reflect.defineMetadata(C.PARAM_TYPES,R,$),$}}te.injectable=l},71693:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.multiInject=void 0;var v=m(6867),C=m(47738),l=m(99934);function $(R){return function(z,L,T){var O=new C.Metadata(v.MULTI_INJECT_TAG,R);typeof T=="number"?l.tagParameter(z,L,T,O):l.tagProperty(z,L,O)}}te.multiInject=$},38085:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.named=void 0;var v=m(6867),C=m(47738),l=m(99934);function $(R){return function(z,L,T){var O=new C.Metadata(v.NAMED_TAG,R);typeof T=="number"?l.tagParameter(z,L,T,O):l.tagProperty(z,L,O)}}te.named=$},6515:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.optional=void 0;var v=m(6867),C=m(47738),l=m(99934);function $(){return function(R,z,L){var T=new C.Metadata(v.OPTIONAL_TAG,!0);typeof L=="number"?l.tagParameter(R,z,L,T):l.tagProperty(R,z,T)}}te.optional=$},7014:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.postConstruct=void 0;var v=m(16674),C=m(6867),l=m(47738);function $(){return function(R,z,L){var T=new l.Metadata(C.POST_CONSTRUCT,z);if(Reflect.hasOwnMetadata(C.POST_CONSTRUCT,R.constructor))throw new Error(v.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(C.POST_CONSTRUCT,T,R.constructor)}}te.postConstruct=$},32052:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.tagged=void 0;var v=m(47738),C=m(99934);function l($,R){return function(z,L,T){var O=new v.Metadata($,R);typeof T=="number"?C.tagParameter(z,L,T,O):C.tagProperty(z,L,O)}}te.tagged=l},55638:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.targetName=void 0;var v=m(6867),C=m(47738),l=m(99934);function $(R){return function(z,L,T){var O=new C.Metadata(v.NAME_TAG,R);l.tagParameter(z,L,T,O)}}te.targetName=$},86757:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.unmanaged=void 0;var v=m(6867),C=m(47738),l=m(99934);function $(){return function(R,z,L){var T=new C.Metadata(v.UNMANAGED_TAG,!0);l.tagParameter(R,z,L,T)}}te.unmanaged=$},44290:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Binding=void 0;var v=m(28421),C=m(37791),l=function(){function $(R,z){this.id=C.id(),this.activated=!1,this.serviceIdentifier=R,this.scope=z,this.type=v.BindingTypeEnum.Invalid,this.constraint=function(L){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return $.prototype.clone=function(){var R=new $(this.serviceIdentifier,this.scope);return R.activated=R.scope===v.BindingScopeEnum.Singleton?this.activated:!1,R.implementationType=this.implementationType,R.dynamicValue=this.dynamicValue,R.scope=this.scope,R.type=this.type,R.factory=this.factory,R.provider=this.provider,R.constraint=this.constraint,R.onActivation=this.onActivation,R.cache=this.cache,R},$}();te.Binding=l},23184:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingCount=void 0;var m={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};te.BindingCount=m},16674:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.STACK_OVERFLOW=te.CIRCULAR_DEPENDENCY_IN_FACTORY=te.POST_CONSTRUCT_ERROR=te.MULTIPLE_POST_CONSTRUCT_METHODS=te.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=te.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=te.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=te.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=te.ARGUMENTS_LENGTH_MISMATCH=te.INVALID_DECORATOR_OPERATION=te.INVALID_TO_SELF_VALUE=te.INVALID_FUNCTION_BINDING=te.INVALID_MIDDLEWARE_RETURN=te.NO_MORE_SNAPSHOTS_AVAILABLE=te.INVALID_BINDING_TYPE=te.NOT_IMPLEMENTED=te.CIRCULAR_DEPENDENCY=te.UNDEFINED_INJECT_ANNOTATION=te.MISSING_INJECT_ANNOTATION=te.MISSING_INJECTABLE_ANNOTATION=te.NOT_REGISTERED=te.CANNOT_UNBIND=te.AMBIGUOUS_MATCH=te.KEY_NOT_FOUND=te.NULL_ARGUMENT=te.DUPLICATED_METADATA=te.DUPLICATED_INJECTABLE_DECORATOR=void 0,te.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",te.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",te.NULL_ARGUMENT="NULL argument",te.KEY_NOT_FOUND="Key Not Found",te.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",te.CANNOT_UNBIND="Could not unbind serviceIdentifier:",te.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",te.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",te.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var m=function($){return"@inject called with undefined this could mean that the class "+$+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};te.UNDEFINED_INJECT_ANNOTATION=m,te.CIRCULAR_DEPENDENCY="Circular dependency found:",te.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",te.INVALID_BINDING_TYPE="Invalid binding type:",te.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",te.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",te.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",te.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",te.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var v=function(){for(var $=[],R=0;R<arguments.length;R++)$[R]=arguments[R];return"The number of constructor arguments in the derived class "+($[0]+" must be >= than the number of constructor arguments of its base class.")};te.ARGUMENTS_LENGTH_MISMATCH=v,te.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",te.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",te.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",te.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",te.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var C=function(){for(var $=[],R=0;R<arguments.length;R++)$[R]=arguments[R];return"@postConstruct error in class "+$[0]+": "+$[1]};te.POST_CONSTRUCT_ERROR=C;var l=function(){for(var $=[],R=0;R<arguments.length;R++)$[R]=arguments[R];return"It looks like there is a circular dependency "+("in one of the '"+$[0]+"' bindings. Please investigate bindings with")+("service identifier '"+$[1]+"'.")};te.CIRCULAR_DEPENDENCY_IN_FACTORY=l,te.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.TargetTypeEnum=te.BindingTypeEnum=te.BindingScopeEnum=void 0;var m={Request:"Request",Singleton:"Singleton",Transient:"Transient"};te.BindingScopeEnum=m;var v={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};te.BindingTypeEnum=v;var C={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};te.TargetTypeEnum=C},6867:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.NON_CUSTOM_TAG_KEYS=te.POST_CONSTRUCT=te.DESIGN_PARAM_TYPES=te.PARAM_TYPES=te.TAGGED_PROP=te.TAGGED=te.MULTI_INJECT_TAG=te.INJECT_TAG=te.OPTIONAL_TAG=te.UNMANAGED_TAG=te.NAME_TAG=te.NAMED_TAG=void 0,te.NAMED_TAG="named",te.NAME_TAG="name",te.UNMANAGED_TAG="unmanaged",te.OPTIONAL_TAG="optional",te.INJECT_TAG="inject",te.MULTI_INJECT_TAG="multi_inject",te.TAGGED="inversify:tagged",te.TAGGED_PROP="inversify:tagged_props",te.PARAM_TYPES="inversify:paramtypes",te.DESIGN_PARAM_TYPES="design:paramtypes",te.POST_CONSTRUCT="post_construct";function m(){return[te.INJECT_TAG,te.MULTI_INJECT_TAG,te.NAME_TAG,te.UNMANAGED_TAG,te.NAMED_TAG,te.OPTIONAL_TAG]}te.NON_CUSTOM_TAG_KEYS=m()},51389:function(Qe,te,m){"use strict";var v=this&&this.__awaiter||function(je,bt,ut,wt){function se(qe){return qe instanceof ut?qe:new ut(function(me){me(qe)})}return new(ut||(ut=Promise))(function(qe,me){function _e(We){try{ht(wt.next(We))}catch(Ne){me(Ne)}}function Te(We){try{ht(wt.throw(We))}catch(Ne){me(Ne)}}function ht(We){We.done?qe(We.value):se(We.value).then(_e,Te)}ht((wt=wt.apply(je,bt||[])).next())})},C=this&&this.__generator||function(je,bt){var ut={label:0,sent:function(){if(qe[0]&1)throw qe[1];return qe[1]},trys:[],ops:[]},wt,se,qe,me;return me={next:_e(0),throw:_e(1),return:_e(2)},typeof Symbol=="function"&&(me[Symbol.iterator]=function(){return this}),me;function _e(ht){return function(We){return Te([ht,We])}}function Te(ht){if(wt)throw new TypeError("Generator is already executing.");for(;ut;)try{if(wt=1,se&&(qe=ht[0]&2?se.return:ht[0]?se.throw||((qe=se.return)&&qe.call(se),0):se.next)&&!(qe=qe.call(se,ht[1])).done)return qe;switch(se=0,qe&&(ht=[ht[0]&2,qe.value]),ht[0]){case 0:case 1:qe=ht;break;case 4:return ut.label++,{value:ht[1],done:!1};case 5:ut.label++,se=ht[1],ht=[0];continue;case 7:ht=ut.ops.pop(),ut.trys.pop();continue;default:if(qe=ut.trys,!(qe=qe.length>0&&qe[qe.length-1])&&(ht[0]===6||ht[0]===2)){ut=0;continue}if(ht[0]===3&&(!qe||ht[1]>qe[0]&&ht[1]<qe[3])){ut.label=ht[1];break}if(ht[0]===6&&ut.label<qe[1]){ut.label=qe[1],qe=ht;break}if(qe&&ut.label<qe[2]){ut.label=qe[2],ut.ops.push(ht);break}qe[2]&&ut.ops.pop(),ut.trys.pop();continue}ht=bt.call(je,ut)}catch(We){ht=[6,We],se=0}finally{wt=qe=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}},l=this&&this.__spreadArray||function(je,bt){for(var ut=0,wt=bt.length,se=je.length;ut<wt;ut++,se++)je[se]=bt[ut];return je};Object.defineProperty(te,"__esModule",{value:!0}),te.Container=void 0;var $=m(44290),R=m(16674),z=m(28421),L=m(6867),T=m(51377),O=m(86311),F=m(31927),ue=m(51860),Ae=m(37791),re=m(55800),pe=m(85700),fe=m(80175),ke=function(){function je(bt){this._appliedMiddleware=[];var ut=bt||{};if(typeof ut!="object")throw new Error(""+R.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(ut.defaultScope===void 0)ut.defaultScope=z.BindingScopeEnum.Transient;else if(ut.defaultScope!==z.BindingScopeEnum.Singleton&&ut.defaultScope!==z.BindingScopeEnum.Transient&&ut.defaultScope!==z.BindingScopeEnum.Request)throw new Error(""+R.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(ut.autoBindInjectable===void 0)ut.autoBindInjectable=!1;else if(typeof ut.autoBindInjectable!="boolean")throw new Error(""+R.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(ut.skipBaseClassChecks===void 0)ut.skipBaseClassChecks=!1;else if(typeof ut.skipBaseClassChecks!="boolean")throw new Error(""+R.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:ut.autoBindInjectable,defaultScope:ut.defaultScope,skipBaseClassChecks:ut.skipBaseClassChecks},this.id=Ae.id(),this._bindingDictionary=new fe.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new T.MetadataReader}return je.merge=function(bt,ut){for(var wt=[],se=2;se<arguments.length;se++)wt[se-2]=arguments[se];var qe=new je,me=l([bt,ut],wt).map(function(ht){return O.getBindingDictionary(ht)}),_e=O.getBindingDictionary(qe);function Te(ht,We){ht.traverse(function(Ne,he){he.forEach(function(Ve){We.add(Ve.serviceIdentifier,Ve.clone())})})}return me.forEach(function(ht){Te(ht,_e)}),qe},je.prototype.load=function(){for(var bt=[],ut=0;ut<arguments.length;ut++)bt[ut]=arguments[ut];for(var wt=this._getContainerModuleHelpersFactory(),se=0,qe=bt;se<qe.length;se++){var me=qe[se],_e=wt(me.id);me.registry(_e.bindFunction,_e.unbindFunction,_e.isboundFunction,_e.rebindFunction)}},je.prototype.loadAsync=function(){for(var bt=[],ut=0;ut<arguments.length;ut++)bt[ut]=arguments[ut];return v(this,void 0,void 0,function(){var wt,se,qe,me,_e;return C(this,function(Te){switch(Te.label){case 0:wt=this._getContainerModuleHelpersFactory(),se=0,qe=bt,Te.label=1;case 1:return se<qe.length?(me=qe[se],_e=wt(me.id),[4,me.registry(_e.bindFunction,_e.unbindFunction,_e.isboundFunction,_e.rebindFunction)]):[3,4];case 2:Te.sent(),Te.label=3;case 3:return se++,[3,1];case 4:return[2]}})})},je.prototype.unload=function(){for(var bt=this,ut=[],wt=0;wt<arguments.length;wt++)ut[wt]=arguments[wt];var se=function(qe){return function(me){return me.moduleId===qe}};ut.forEach(function(qe){var me=se(qe.id);bt._bindingDictionary.removeByCondition(me)})},je.prototype.bind=function(bt){var ut=this.options.defaultScope||z.BindingScopeEnum.Transient,wt=new $.Binding(bt,ut);return this._bindingDictionary.add(bt,wt),new ue.BindingToSyntax(wt)},je.prototype.rebind=function(bt){return this.unbind(bt),this.bind(bt)},je.prototype.unbind=function(bt){try{this._bindingDictionary.remove(bt)}catch(ut){throw new Error(R.CANNOT_UNBIND+" "+re.getServiceIdentifierAsString(bt))}},je.prototype.unbindAll=function(){this._bindingDictionary=new fe.Lookup},je.prototype.isBound=function(bt){var ut=this._bindingDictionary.hasKey(bt);return!ut&&this.parent&&(ut=this.parent.isBound(bt)),ut},je.prototype.isBoundNamed=function(bt,ut){return this.isBoundTagged(bt,L.NAMED_TAG,ut)},je.prototype.isBoundTagged=function(bt,ut,wt){var se=!1;if(this._bindingDictionary.hasKey(bt)){var qe=this._bindingDictionary.get(bt),me=O.createMockRequest(this,bt,ut,wt);se=qe.some(function(_e){return _e.constraint(me)})}return!se&&this.parent&&(se=this.parent.isBoundTagged(bt,ut,wt)),se},je.prototype.snapshot=function(){this._snapshots.push(pe.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},je.prototype.restore=function(){var bt=this._snapshots.pop();if(bt===void 0)throw new Error(R.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=bt.bindings,this._middleware=bt.middleware},je.prototype.createChild=function(bt){var ut=new je(bt||this.options);return ut.parent=this,ut},je.prototype.applyMiddleware=function(){for(var bt=[],ut=0;ut<arguments.length;ut++)bt[ut]=arguments[ut];this._appliedMiddleware=this._appliedMiddleware.concat(bt);var wt=this._middleware?this._middleware:this._planAndResolve();this._middleware=bt.reduce(function(se,qe){return qe(se)},wt)},je.prototype.applyCustomMetadataReader=function(bt){this._metadataReader=bt},je.prototype.get=function(bt){return this._get(!1,!1,z.TargetTypeEnum.Variable,bt)},je.prototype.getTagged=function(bt,ut,wt){return this._get(!1,!1,z.TargetTypeEnum.Variable,bt,ut,wt)},je.prototype.getNamed=function(bt,ut){return this.getTagged(bt,L.NAMED_TAG,ut)},je.prototype.getAll=function(bt){return this._get(!0,!0,z.TargetTypeEnum.Variable,bt)},je.prototype.getAllTagged=function(bt,ut,wt){return this._get(!1,!0,z.TargetTypeEnum.Variable,bt,ut,wt)},je.prototype.getAllNamed=function(bt,ut){return this.getAllTagged(bt,L.NAMED_TAG,ut)},je.prototype.resolve=function(bt){var ut=this.createChild();return ut.bind(bt).toSelf(),this._appliedMiddleware.forEach(function(wt){ut.applyMiddleware(wt)}),ut.get(bt)},je.prototype._getContainerModuleHelpersFactory=function(){var bt=this,ut=function(_e,Te){_e._binding.moduleId=Te},wt=function(_e){return function(Te){var ht=bt.bind.bind(bt),We=ht(Te);return ut(We,_e),We}},se=function(_e){return function(Te){var ht=bt.unbind.bind(bt);ht(Te)}},qe=function(_e){return function(Te){var ht=bt.isBound.bind(bt);return ht(Te)}},me=function(_e){return function(Te){var ht=bt.rebind.bind(bt),We=ht(Te);return ut(We,_e),We}};return function(_e){return{bindFunction:wt(_e),isboundFunction:qe(_e),rebindFunction:me(_e),unbindFunction:se(_e)}}},je.prototype._get=function(bt,ut,wt,se,qe,me){var _e=null,Te={avoidConstraints:bt,contextInterceptor:function(ht){return ht},isMultiInject:ut,key:qe,serviceIdentifier:se,targetType:wt,value:me};if(this._middleware){if(_e=this._middleware(Te),_e==null)throw new Error(R.INVALID_MIDDLEWARE_RETURN)}else _e=this._planAndResolve()(Te);return _e},je.prototype._planAndResolve=function(){var bt=this;return function(ut){var wt=O.plan(bt._metadataReader,bt,ut.isMultiInject,ut.targetType,ut.serviceIdentifier,ut.key,ut.value,ut.avoidConstraints);wt=ut.contextInterceptor(wt);var se=F.resolve(wt);return se}},je}();te.Container=ke},33244:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.AsyncContainerModule=te.ContainerModule=void 0;var v=m(37791),C=function(){function $(R){this.id=v.id(),this.registry=R}return $}();te.ContainerModule=C;var l=function(){function $(R){this.id=v.id(),this.registry=R}return $}();te.AsyncContainerModule=l},85700:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.ContainerSnapshot=void 0;var m=function(){function v(){}return v.of=function(C,l){var $=new v;return $.bindings=C,$.middleware=l,$},v}();te.ContainerSnapshot=m},80175:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Lookup=void 0;var v=m(16674),C=function(){function l(){this._map=new Map}return l.prototype.getMap=function(){return this._map},l.prototype.add=function($,R){if($==null)throw new Error(v.NULL_ARGUMENT);if(R==null)throw new Error(v.NULL_ARGUMENT);var z=this._map.get($);z!==void 0?(z.push(R),this._map.set($,z)):this._map.set($,[R])},l.prototype.get=function($){if($==null)throw new Error(v.NULL_ARGUMENT);var R=this._map.get($);if(R!==void 0)return R;throw new Error(v.KEY_NOT_FOUND)},l.prototype.remove=function($){if($==null)throw new Error(v.NULL_ARGUMENT);if(!this._map.delete($))throw new Error(v.KEY_NOT_FOUND)},l.prototype.removeByCondition=function($){var R=this;this._map.forEach(function(z,L){var T=z.filter(function(O){return!$(O)});T.length>0?R._map.set(L,T):R._map.delete(L)})},l.prototype.hasKey=function($){if($==null)throw new Error(v.NULL_ARGUMENT);return this._map.has($)},l.prototype.clone=function(){var $=new l;return this._map.forEach(function(R,z){R.forEach(function(L){return $.add(z,L.clone())})}),$},l.prototype.traverse=function($){this._map.forEach(function(R,z){$(z,R)})},l}();te.Lookup=C},86700:function(Qe,te,m){"use strict";var v;v={value:!0},v=v=v=v=v=v=te.GW=v=v=te.zY=v=v=v=v=v=te.f3=v=v=te.b2=v=v=v=v=v=te.W2=v=void 0;var C=m(6867);v=C;var l=m(51389);Object.defineProperty(te,"W2",{enumerable:!0,get:function(){return l.Container}});var $=m(28421);v={enumerable:!0,get:function(){return $.BindingScopeEnum}},v={enumerable:!0,get:function(){return $.BindingTypeEnum}},v={enumerable:!0,get:function(){return $.TargetTypeEnum}};var R=m(33244);v={enumerable:!0,get:function(){return R.AsyncContainerModule}},v={enumerable:!0,get:function(){return R.ContainerModule}};var z=m(64315);Object.defineProperty(te,"b2",{enumerable:!0,get:function(){return z.injectable}});var L=m(32052);v={enumerable:!0,get:function(){return L.tagged}};var T=m(38085);v={enumerable:!0,get:function(){return T.named}};var O=m(5744);Object.defineProperty(te,"f3",{enumerable:!0,get:function(){return O.inject}}),v={enumerable:!0,get:function(){return O.LazyServiceIdentifer}};var F=m(6515);v={enumerable:!0,get:function(){return F.optional}};var ue=m(86757);v={enumerable:!0,get:function(){return ue.unmanaged}};var Ae=m(71693);v={enumerable:!0,get:function(){return Ae.multiInject}};var re=m(55638);v={enumerable:!0,get:function(){return re.targetName}};var pe=m(7014);Object.defineProperty(te,"zY",{enumerable:!0,get:function(){return pe.postConstruct}});var fe=m(51377);v={enumerable:!0,get:function(){return fe.MetadataReader}};var ke=m(37791);v={enumerable:!0,get:function(){return ke.id}};var je=m(99934);Object.defineProperty(te,"GW",{enumerable:!0,get:function(){return je.decorate}});var bt=m(80758);v={enumerable:!0,get:function(){return bt.traverseAncerstors}},v={enumerable:!0,get:function(){return bt.taggedConstraint}},v={enumerable:!0,get:function(){return bt.namedConstraint}},v={enumerable:!0,get:function(){return bt.typeConstraint}};var ut=m(55800);v={enumerable:!0,get:function(){return ut.getServiceIdentifierAsString}};var wt=m(70600);v={enumerable:!0,get:function(){return wt.multiBindToService}}},95228:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Context=void 0;var v=m(37791),C=function(){function l($){this.id=v.id(),this.container=$}return l.prototype.addPlan=function($){this.plan=$},l.prototype.setCurrentRequest=function($){this.currentRequest=$},l}();te.Context=C},47738:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Metadata=void 0;var v=m(6867),C=function(){function l($,R){this.key=$,this.value=R}return l.prototype.toString=function(){return this.key===v.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},l}();te.Metadata=C},51377:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.MetadataReader=void 0;var v=m(6867),C=function(){function l(){}return l.prototype.getConstructorMetadata=function($){var R=Reflect.getMetadata(v.PARAM_TYPES,$),z=Reflect.getMetadata(v.TAGGED,$);return{compilerGeneratedMetadata:R,userGeneratedMetadata:z||{}}},l.prototype.getPropertiesMetadata=function($){var R=Reflect.getMetadata(v.TAGGED_PROP,$)||[];return R},l}();te.MetadataReader=C},55314:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Plan=void 0;var m=function(){function v(C,l){this.parentContext=C,this.rootRequest=l}return v}();te.Plan=m},86311:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.getBindingDictionary=te.createMockRequest=te.plan=void 0;var v=m(23184),C=m(16674),l=m(28421),$=m(6867),R=m(85265),z=m(55800),L=m(95228),T=m(47738),O=m(55314),F=m(6e3),ue=m(6748),Ae=m(18924);function re(se){return se._bindingDictionary}te.getBindingDictionary=re;function pe(se,qe,me,_e,Te,ht){var We=se?$.MULTI_INJECT_TAG:$.INJECT_TAG,Ne=new T.Metadata(We,me),he=new Ae.Target(qe,_e,me,Ne);if(Te!==void 0){var Ve=new T.Metadata(Te,ht);he.metadata.push(Ve)}return he}function fe(se,qe,me,_e,Te){var ht=bt(me.container,Te.serviceIdentifier),We=[];return ht.length===v.BindingCount.NoBindingsAvailable&&me.container.options.autoBindInjectable&&typeof Te.serviceIdentifier=="function"&&se.getConstructorMetadata(Te.serviceIdentifier).compilerGeneratedMetadata&&(me.container.bind(Te.serviceIdentifier).toSelf(),ht=bt(me.container,Te.serviceIdentifier)),qe?We=ht:We=ht.filter(function(Ne){var he=new ue.Request(Ne.serviceIdentifier,me,_e,Ne,Te);return Ne.constraint(he)}),ke(Te.serviceIdentifier,We,Te,me.container),We}function ke(se,qe,me,_e){switch(qe.length){case v.BindingCount.NoBindingsAvailable:if(me.isOptional())return qe;var Te=z.getServiceIdentifierAsString(se),ht=C.NOT_REGISTERED;throw ht+=z.listMetadataForTarget(Te,me),ht+=z.listRegisteredBindingsForServiceIdentifier(_e,Te,bt),new Error(ht);case v.BindingCount.OnlyOneBindingAvailable:if(!me.isArray())return qe;case v.BindingCount.MultipleBindingsAvailable:default:if(me.isArray())return qe;var Te=z.getServiceIdentifierAsString(se),ht=C.AMBIGUOUS_MATCH+" "+Te;throw ht+=z.listRegisteredBindingsForServiceIdentifier(_e,Te,bt),new Error(ht)}}function je(se,qe,me,_e,Te,ht){var We,Ne;if(Te===null){We=fe(se,qe,_e,null,ht),Ne=new ue.Request(me,_e,null,We,ht);var he=new O.Plan(_e,Ne);_e.addPlan(he)}else We=fe(se,qe,_e,Te,ht),Ne=Te.addChildRequest(ht.serviceIdentifier,We,ht);We.forEach(function(Ve){var ie=null;if(ht.isArray())ie=Ne.addChildRequest(Ve.serviceIdentifier,Ve,ht);else{if(Ve.cache)return;ie=Ne}if(Ve.type===l.BindingTypeEnum.Instance&&Ve.implementationType!==null){var ze=F.getDependencies(se,Ve.implementationType);if(!_e.container.options.skipBaseClassChecks){var Le=F.getBaseClassDependencyCount(se,Ve.implementationType);if(ze.length<Le){var Re=C.ARGUMENTS_LENGTH_MISMATCH(F.getFunctionName(Ve.implementationType));throw new Error(Re)}}ze.forEach(function(st){je(se,!1,st.serviceIdentifier,_e,ie,st)})}})}function bt(se,qe){var me=[],_e=re(se);return _e.hasKey(qe)?me=_e.get(qe):se.parent!==null&&(me=bt(se.parent,qe)),me}function ut(se,qe,me,_e,Te,ht,We,Ne){Ne===void 0&&(Ne=!1);var he=new L.Context(qe),Ve=pe(me,_e,Te,"",ht,We);try{return je(se,Ne,Te,he,null,Ve),he}catch(ie){throw R.isStackOverflowExeption(ie)&&he.plan&&z.circularDependencyToException(he.plan.rootRequest),ie}}te.plan=ut;function wt(se,qe,me,_e){var Te=new Ae.Target(l.TargetTypeEnum.Variable,"",qe,new T.Metadata(me,_e)),ht=new L.Context(se),We=new ue.Request(qe,ht,null,[],Te);return We}te.createMockRequest=wt},88460:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.QueryableString=void 0;var m=function(){function v(C){this.str=C}return v.prototype.startsWith=function(C){return this.str.indexOf(C)===0},v.prototype.endsWith=function(C){var l="",$=C.split("").reverse().join("");return l=this.str.split("").reverse().join(""),this.startsWith.call({str:l},$)},v.prototype.contains=function(C){return this.str.indexOf(C)!==-1},v.prototype.equals=function(C){return this.str===C},v.prototype.value=function(){return this.str},v}();te.QueryableString=m},6e3:function(Qe,te,m){"use strict";var v=this&&this.__spreadArray||function(fe,ke){for(var je=0,bt=ke.length,ut=fe.length;je<bt;je++,ut++)fe[ut]=ke[je];return fe};Object.defineProperty(te,"__esModule",{value:!0}),te.getFunctionName=te.getBaseClassDependencyCount=te.getDependencies=void 0;var C=m(5744),l=m(16674),$=m(28421),R=m(6867),z=m(55800);Object.defineProperty(te,"getFunctionName",{enumerable:!0,get:function(){return z.getFunctionName}});var L=m(18924);function T(fe,ke){var je=z.getFunctionName(ke),bt=O(fe,je,ke,!1);return bt}te.getDependencies=T;function O(fe,ke,je,bt){var ut=fe.getConstructorMetadata(je),wt=ut.compilerGeneratedMetadata;if(wt===void 0){var se=l.MISSING_INJECTABLE_ANNOTATION+" "+ke+".";throw new Error(se)}var qe=ut.userGeneratedMetadata,me=Object.keys(qe),_e=je.length===0&&me.length>0,Te=me.length>je.length,ht=_e||Te?me.length:je.length,We=ue(bt,ke,wt,qe,ht),Ne=Ae(fe,je),he=v(v([],We),Ne);return he}function F(fe,ke,je,bt,ut){var wt=ut[fe.toString()]||[],se=pe(wt),qe=se.unmanaged!==!0,me=bt[fe],_e=se.inject||se.multiInject;if(me=_e||me,me instanceof C.LazyServiceIdentifer&&(me=me.unwrap()),qe){var Te=me===Object,ht=me===Function,We=me===void 0,Ne=Te||ht||We;if(!ke&&Ne){var he=l.MISSING_INJECT_ANNOTATION+" argument "+fe+" in class "+je+".";throw new Error(he)}var Ve=new L.Target($.TargetTypeEnum.ConstructorArgument,se.targetName,me);return Ve.metadata=wt,Ve}return null}function ue(fe,ke,je,bt,ut){for(var wt=[],se=0;se<ut;se++){var qe=se,me=F(qe,fe,ke,je,bt);me!==null&&wt.push(me)}return wt}function Ae(fe,ke){for(var je=fe.getPropertiesMetadata(ke),bt=[],ut=Object.keys(je),wt=0,se=ut;wt<se.length;wt++){var qe=se[wt],me=je[qe],_e=pe(je[qe]),Te=_e.targetName||qe,ht=_e.inject||_e.multiInject,We=new L.Target($.TargetTypeEnum.ClassProperty,Te,ht);We.metadata=me,bt.push(We)}var Ne=Object.getPrototypeOf(ke.prototype).constructor;if(Ne!==Object){var he=Ae(fe,Ne);bt=v(v([],bt),he)}return bt}function re(fe,ke){var je=Object.getPrototypeOf(ke.prototype).constructor;if(je!==Object){var bt=z.getFunctionName(je),ut=O(fe,bt,je,!0),wt=ut.map(function(me){return me.metadata.filter(function(_e){return _e.key===R.UNMANAGED_TAG})}),se=[].concat.apply([],wt).length,qe=ut.length-se;return qe>0?qe:re(fe,je)}else return 0}te.getBaseClassDependencyCount=re;function pe(fe){var ke={};return fe.forEach(function(je){ke[je.key.toString()]=je.value}),{inject:ke[R.INJECT_TAG],multiInject:ke[R.MULTI_INJECT_TAG],targetName:ke[R.NAME_TAG],unmanaged:ke[R.UNMANAGED_TAG]}}},6748:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Request=void 0;var v=m(37791),C=function(){function l($,R,z,L,T){this.id=v.id(),this.serviceIdentifier=$,this.parentContext=R,this.parentRequest=z,this.target=T,this.childRequests=[],this.bindings=Array.isArray(L)?L:[L],this.requestScope=z===null?new Map:null}return l.prototype.addChildRequest=function($,R,z){var L=new l($,this.parentContext,this,R,z);return this.childRequests.push(L),L},l}();te.Request=C},18924:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.Target=void 0;var v=m(6867),C=m(37791),l=m(47738),$=m(88460),R=function(){function z(L,T,O,F){this.id=C.id(),this.type=L,this.serviceIdentifier=O,this.name=new $.QueryableString(T||""),this.metadata=new Array;var ue=null;typeof F=="string"?ue=new l.Metadata(v.NAMED_TAG,F):F instanceof l.Metadata&&(ue=F),ue!==null&&this.metadata.push(ue)}return z.prototype.hasTag=function(L){for(var T=0,O=this.metadata;T<O.length;T++){var F=O[T];if(F.key===L)return!0}return!1},z.prototype.isArray=function(){return this.hasTag(v.MULTI_INJECT_TAG)},z.prototype.matchesArray=function(L){return this.matchesTag(v.MULTI_INJECT_TAG)(L)},z.prototype.isNamed=function(){return this.hasTag(v.NAMED_TAG)},z.prototype.isTagged=function(){return this.metadata.some(function(L){return v.NON_CUSTOM_TAG_KEYS.every(function(T){return L.key!==T})})},z.prototype.isOptional=function(){return this.matchesTag(v.OPTIONAL_TAG)(!0)},z.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(L){return L.key===v.NAMED_TAG})[0]:null},z.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(L){return v.NON_CUSTOM_TAG_KEYS.every(function(T){return L.key!==T})}):null},z.prototype.matchesNamedTag=function(L){return this.matchesTag(v.NAMED_TAG)(L)},z.prototype.matchesTag=function(L){var T=this;return function(O){for(var F=0,ue=T.metadata;F<ue.length;F++){var Ae=ue[F];if(Ae.key===L&&Ae.value===O)return!0}return!1}},z}();te.Target=R},52279:function(Qe,te,m){"use strict";var v=this&&this.__spreadArray||function(O,F){for(var ue=0,Ae=F.length,re=O.length;ue<Ae;ue++,re++)O[re]=F[ue];return O};Object.defineProperty(te,"__esModule",{value:!0}),te.resolveInstance=void 0;var C=m(16674),l=m(28421),$=m(6867);function R(O,F,ue){var Ae=F.filter(function(pe){return pe.target!==null&&pe.target.type===l.TargetTypeEnum.ClassProperty}),re=Ae.map(ue);return Ae.forEach(function(pe,fe){var ke="";ke=pe.target.name.value();var je=re[fe];O[ke]=je}),O}function z(O,F){return new(O.bind.apply(O,v([void 0],F)))}function L(O,F){if(Reflect.hasMetadata($.POST_CONSTRUCT,O)){var ue=Reflect.getMetadata($.POST_CONSTRUCT,O);try{F[ue.value]()}catch(Ae){throw new Error(C.POST_CONSTRUCT_ERROR(O.name,Ae.message))}}}function T(O,F,ue){var Ae=null;if(F.length>0){var re=F.filter(function(fe){return fe.target!==null&&fe.target.type===l.TargetTypeEnum.ConstructorArgument}),pe=re.map(ue);Ae=z(O,pe),Ae=R(Ae,F,ue)}else Ae=new O;return L(O,Ae),Ae}te.resolveInstance=T},31927:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.resolve=void 0;var v=m(16674),C=m(28421),l=m(85265),$=m(55800),R=m(52279),z=function(O,F,ue){try{return ue()}catch(Ae){throw l.isStackOverflowExeption(Ae)?new Error(v.CIRCULAR_DEPENDENCY_IN_FACTORY(O,F.toString())):Ae}},L=function(O){return function(F){F.parentContext.setCurrentRequest(F);var ue=F.bindings,Ae=F.childRequests,re=F.target&&F.target.isArray(),pe=!F.parentRequest||!F.parentRequest.target||!F.target||!F.parentRequest.target.matchesArray(F.target.serviceIdentifier);if(re&&pe)return Ae.map(function(wt){var se=L(O);return se(wt)});var fe=null;if(F.target.isOptional()&&ue.length===0)return;var ke=ue[0],je=ke.scope===C.BindingScopeEnum.Singleton,bt=ke.scope===C.BindingScopeEnum.Request;if(je&&ke.activated)return ke.cache;if(bt&&O!==null&&O.has(ke.id))return O.get(ke.id);if(ke.type===C.BindingTypeEnum.ConstantValue)fe=ke.cache,ke.activated=!0;else if(ke.type===C.BindingTypeEnum.Function)fe=ke.cache,ke.activated=!0;else if(ke.type===C.BindingTypeEnum.Constructor)fe=ke.implementationType;else if(ke.type===C.BindingTypeEnum.DynamicValue&&ke.dynamicValue!==null)fe=z("toDynamicValue",ke.serviceIdentifier,function(){return ke.dynamicValue(F.parentContext)});else if(ke.type===C.BindingTypeEnum.Factory&&ke.factory!==null)fe=z("toFactory",ke.serviceIdentifier,function(){return ke.factory(F.parentContext)});else if(ke.type===C.BindingTypeEnum.Provider&&ke.provider!==null)fe=z("toProvider",ke.serviceIdentifier,function(){return ke.provider(F.parentContext)});else if(ke.type===C.BindingTypeEnum.Instance&&ke.implementationType!==null)fe=R.resolveInstance(ke.implementationType,Ae,L(O));else{var ut=$.getServiceIdentifierAsString(F.serviceIdentifier);throw new Error(v.INVALID_BINDING_TYPE+" "+ut)}return typeof ke.onActivation=="function"&&(fe=ke.onActivation(F.parentContext,fe)),je&&(ke.cache=fe,ke.activated=!0),bt&&O!==null&&!O.has(ke.id)&&O.set(ke.id,fe),fe}};function T(O){var F=L(O.plan.rootRequest.requestScope);return F(O.plan.rootRequest)}te.resolve=T},83366:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingInSyntax=void 0;var v=m(28421),C=m(71325),l=function(){function $(R){this._binding=R}return $.prototype.inRequestScope=function(){return this._binding.scope=v.BindingScopeEnum.Request,new C.BindingWhenOnSyntax(this._binding)},$.prototype.inSingletonScope=function(){return this._binding.scope=v.BindingScopeEnum.Singleton,new C.BindingWhenOnSyntax(this._binding)},$.prototype.inTransientScope=function(){return this._binding.scope=v.BindingScopeEnum.Transient,new C.BindingWhenOnSyntax(this._binding)},$}();te.BindingInSyntax=l},99812:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingInWhenOnSyntax=void 0;var v=m(83366),C=m(51811),l=m(98370),$=function(){function R(z){this._binding=z,this._bindingWhenSyntax=new l.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new C.BindingOnSyntax(this._binding),this._bindingInSyntax=new v.BindingInSyntax(z)}return R.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},R.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},R.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},R.prototype.when=function(z){return this._bindingWhenSyntax.when(z)},R.prototype.whenTargetNamed=function(z){return this._bindingWhenSyntax.whenTargetNamed(z)},R.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},R.prototype.whenTargetTagged=function(z,L){return this._bindingWhenSyntax.whenTargetTagged(z,L)},R.prototype.whenInjectedInto=function(z){return this._bindingWhenSyntax.whenInjectedInto(z)},R.prototype.whenParentNamed=function(z){return this._bindingWhenSyntax.whenParentNamed(z)},R.prototype.whenParentTagged=function(z,L){return this._bindingWhenSyntax.whenParentTagged(z,L)},R.prototype.whenAnyAncestorIs=function(z){return this._bindingWhenSyntax.whenAnyAncestorIs(z)},R.prototype.whenNoAncestorIs=function(z){return this._bindingWhenSyntax.whenNoAncestorIs(z)},R.prototype.whenAnyAncestorNamed=function(z){return this._bindingWhenSyntax.whenAnyAncestorNamed(z)},R.prototype.whenAnyAncestorTagged=function(z,L){return this._bindingWhenSyntax.whenAnyAncestorTagged(z,L)},R.prototype.whenNoAncestorNamed=function(z){return this._bindingWhenSyntax.whenNoAncestorNamed(z)},R.prototype.whenNoAncestorTagged=function(z,L){return this._bindingWhenSyntax.whenNoAncestorTagged(z,L)},R.prototype.whenAnyAncestorMatches=function(z){return this._bindingWhenSyntax.whenAnyAncestorMatches(z)},R.prototype.whenNoAncestorMatches=function(z){return this._bindingWhenSyntax.whenNoAncestorMatches(z)},R.prototype.onActivation=function(z){return this._bindingOnSyntax.onActivation(z)},R}();te.BindingInWhenOnSyntax=$},51811:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingOnSyntax=void 0;var v=m(98370),C=function(){function l($){this._binding=$}return l.prototype.onActivation=function($){return this._binding.onActivation=$,new v.BindingWhenSyntax(this._binding)},l}();te.BindingOnSyntax=C},51860:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingToSyntax=void 0;var v=m(16674),C=m(28421),l=m(99812),$=m(71325),R=function(){function z(L){this._binding=L}return z.prototype.to=function(L){return this._binding.type=C.BindingTypeEnum.Instance,this._binding.implementationType=L,new l.BindingInWhenOnSyntax(this._binding)},z.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+v.INVALID_TO_SELF_VALUE);var L=this._binding.serviceIdentifier;return this.to(L)},z.prototype.toConstantValue=function(L){return this._binding.type=C.BindingTypeEnum.ConstantValue,this._binding.cache=L,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=C.BindingScopeEnum.Singleton,new $.BindingWhenOnSyntax(this._binding)},z.prototype.toDynamicValue=function(L){return this._binding.type=C.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=L,this._binding.implementationType=null,new l.BindingInWhenOnSyntax(this._binding)},z.prototype.toConstructor=function(L){return this._binding.type=C.BindingTypeEnum.Constructor,this._binding.implementationType=L,this._binding.scope=C.BindingScopeEnum.Singleton,new $.BindingWhenOnSyntax(this._binding)},z.prototype.toFactory=function(L){return this._binding.type=C.BindingTypeEnum.Factory,this._binding.factory=L,this._binding.scope=C.BindingScopeEnum.Singleton,new $.BindingWhenOnSyntax(this._binding)},z.prototype.toFunction=function(L){if(typeof L!="function")throw new Error(v.INVALID_FUNCTION_BINDING);var T=this.toConstantValue(L);return this._binding.type=C.BindingTypeEnum.Function,this._binding.scope=C.BindingScopeEnum.Singleton,T},z.prototype.toAutoFactory=function(L){return this._binding.type=C.BindingTypeEnum.Factory,this._binding.factory=function(T){var O=function(){return T.container.get(L)};return O},this._binding.scope=C.BindingScopeEnum.Singleton,new $.BindingWhenOnSyntax(this._binding)},z.prototype.toProvider=function(L){return this._binding.type=C.BindingTypeEnum.Provider,this._binding.provider=L,this._binding.scope=C.BindingScopeEnum.Singleton,new $.BindingWhenOnSyntax(this._binding)},z.prototype.toService=function(L){this.toDynamicValue(function(T){return T.container.get(L)})},z}();te.BindingToSyntax=R},71325:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingWhenOnSyntax=void 0;var v=m(51811),C=m(98370),l=function(){function $(R){this._binding=R,this._bindingWhenSyntax=new C.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new v.BindingOnSyntax(this._binding)}return $.prototype.when=function(R){return this._bindingWhenSyntax.when(R)},$.prototype.whenTargetNamed=function(R){return this._bindingWhenSyntax.whenTargetNamed(R)},$.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},$.prototype.whenTargetTagged=function(R,z){return this._bindingWhenSyntax.whenTargetTagged(R,z)},$.prototype.whenInjectedInto=function(R){return this._bindingWhenSyntax.whenInjectedInto(R)},$.prototype.whenParentNamed=function(R){return this._bindingWhenSyntax.whenParentNamed(R)},$.prototype.whenParentTagged=function(R,z){return this._bindingWhenSyntax.whenParentTagged(R,z)},$.prototype.whenAnyAncestorIs=function(R){return this._bindingWhenSyntax.whenAnyAncestorIs(R)},$.prototype.whenNoAncestorIs=function(R){return this._bindingWhenSyntax.whenNoAncestorIs(R)},$.prototype.whenAnyAncestorNamed=function(R){return this._bindingWhenSyntax.whenAnyAncestorNamed(R)},$.prototype.whenAnyAncestorTagged=function(R,z){return this._bindingWhenSyntax.whenAnyAncestorTagged(R,z)},$.prototype.whenNoAncestorNamed=function(R){return this._bindingWhenSyntax.whenNoAncestorNamed(R)},$.prototype.whenNoAncestorTagged=function(R,z){return this._bindingWhenSyntax.whenNoAncestorTagged(R,z)},$.prototype.whenAnyAncestorMatches=function(R){return this._bindingWhenSyntax.whenAnyAncestorMatches(R)},$.prototype.whenNoAncestorMatches=function(R){return this._bindingWhenSyntax.whenNoAncestorMatches(R)},$.prototype.onActivation=function(R){return this._bindingOnSyntax.onActivation(R)},$}();te.BindingWhenOnSyntax=l},98370:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.BindingWhenSyntax=void 0;var v=m(51811),C=m(80758),l=function(){function $(R){this._binding=R}return $.prototype.when=function(R){return this._binding.constraint=R,new v.BindingOnSyntax(this._binding)},$.prototype.whenTargetNamed=function(R){return this._binding.constraint=C.namedConstraint(R),new v.BindingOnSyntax(this._binding)},$.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(R){var z=R.target!==null&&!R.target.isNamed()&&!R.target.isTagged();return z},new v.BindingOnSyntax(this._binding)},$.prototype.whenTargetTagged=function(R,z){return this._binding.constraint=C.taggedConstraint(R)(z),new v.BindingOnSyntax(this._binding)},$.prototype.whenInjectedInto=function(R){return this._binding.constraint=function(z){return C.typeConstraint(R)(z.parentRequest)},new v.BindingOnSyntax(this._binding)},$.prototype.whenParentNamed=function(R){return this._binding.constraint=function(z){return C.namedConstraint(R)(z.parentRequest)},new v.BindingOnSyntax(this._binding)},$.prototype.whenParentTagged=function(R,z){return this._binding.constraint=function(L){return C.taggedConstraint(R)(z)(L.parentRequest)},new v.BindingOnSyntax(this._binding)},$.prototype.whenAnyAncestorIs=function(R){return this._binding.constraint=function(z){return C.traverseAncerstors(z,C.typeConstraint(R))},new v.BindingOnSyntax(this._binding)},$.prototype.whenNoAncestorIs=function(R){return this._binding.constraint=function(z){return!C.traverseAncerstors(z,C.typeConstraint(R))},new v.BindingOnSyntax(this._binding)},$.prototype.whenAnyAncestorNamed=function(R){return this._binding.constraint=function(z){return C.traverseAncerstors(z,C.namedConstraint(R))},new v.BindingOnSyntax(this._binding)},$.prototype.whenNoAncestorNamed=function(R){return this._binding.constraint=function(z){return!C.traverseAncerstors(z,C.namedConstraint(R))},new v.BindingOnSyntax(this._binding)},$.prototype.whenAnyAncestorTagged=function(R,z){return this._binding.constraint=function(L){return C.traverseAncerstors(L,C.taggedConstraint(R)(z))},new v.BindingOnSyntax(this._binding)},$.prototype.whenNoAncestorTagged=function(R,z){return this._binding.constraint=function(L){return!C.traverseAncerstors(L,C.taggedConstraint(R)(z))},new v.BindingOnSyntax(this._binding)},$.prototype.whenAnyAncestorMatches=function(R){return this._binding.constraint=function(z){return C.traverseAncerstors(z,R)},new v.BindingOnSyntax(this._binding)},$.prototype.whenNoAncestorMatches=function(R){return this._binding.constraint=function(z){return!C.traverseAncerstors(z,R)},new v.BindingOnSyntax(this._binding)},$}();te.BindingWhenSyntax=l},80758:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.typeConstraint=te.namedConstraint=te.taggedConstraint=te.traverseAncerstors=void 0;var v=m(6867),C=m(47738),l=function(L,T){var O=L.parentRequest;return O!==null?T(O)?!0:l(O,T):!1};te.traverseAncerstors=l;var $=function(L){return function(T){var O=function(F){return F!==null&&F.target!==null&&F.target.matchesTag(L)(T)};return O.metaData=new C.Metadata(L,T),O}};te.taggedConstraint=$;var R=$(v.NAMED_TAG);te.namedConstraint=R;var z=function(L){return function(T){var O=null;if(T!==null)if(O=T.bindings[0],typeof L=="string"){var F=O.serviceIdentifier;return F===L}else{var ue=T.bindings[0].implementationType;return L===ue}return!1}};te.typeConstraint=z},70600:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.multiBindToService=void 0;var m=function(v){return function(C){return function(){for(var l=[],$=0;$<arguments.length;$++)l[$]=arguments[$];return l.forEach(function(R){return v.bind(R).toService(C)})}}};te.multiBindToService=m},85265:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.isStackOverflowExeption=void 0;var v=m(16674);function C(l){return l instanceof RangeError||l.message===v.STACK_OVERFLOW}te.isStackOverflowExeption=C},37791:function(Qe,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.id=void 0;var m=0;function v(){return m++}te.id=v},55800:function(Qe,te,m){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.circularDependencyToException=te.listMetadataForTarget=te.listRegisteredBindingsForServiceIdentifier=te.getServiceIdentifierAsString=te.getFunctionName=void 0;var v=m(16674);function C(O){if(typeof O=="function"){var F=O;return F.name}else{if(typeof O=="symbol")return O.toString();var F=O;return F}}te.getServiceIdentifierAsString=C;function l(O,F,ue){var Ae="",re=ue(O,F);return re.length!==0&&(Ae=`
Registered bindings:`,re.forEach(function(pe){var fe="Object";pe.implementationType!==null&&(fe=T(pe.implementationType)),Ae=Ae+`
 `+fe,pe.constraint.metaData&&(Ae=Ae+" - "+pe.constraint.metaData)})),Ae}te.listRegisteredBindingsForServiceIdentifier=l;function $(O,F){return O.parentRequest===null?!1:O.parentRequest.serviceIdentifier===F?!0:$(O.parentRequest,F)}function R(O){function F(Ae,re){re===void 0&&(re=[]);var pe=C(Ae.serviceIdentifier);return re.push(pe),Ae.parentRequest!==null?F(Ae.parentRequest,re):re}var ue=F(O);return ue.reverse().join(" --> ")}function z(O){O.childRequests.forEach(function(F){if($(F,F.serviceIdentifier)){var ue=R(F);throw new Error(v.CIRCULAR_DEPENDENCY+" "+ue)}else z(F)})}te.circularDependencyToException=z;function L(O,F){if(F.isTagged()||F.isNamed()){var ue="",Ae=F.getNamedTag(),re=F.getCustomTags();return Ae!==null&&(ue+=Ae.toString()+`
`),re!==null&&re.forEach(function(pe){ue+=pe.toString()+`
`})," "+O+`
 `+O+" - "+ue}else return" "+O}te.listMetadataForTarget=L;function T(O){if(O.name)return O.name;var F=O.toString(),ue=F.match(/^function\s*([^\s(]+)/);return ue?ue[1]:"Anonymous function: "+F}te.getFunctionName=T},78458:function(Qe,te){"use strict";var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";te.encode=function(v,C){for(var l="",$,R,z,L,T,O,F,ue=0;ue<v.length;)$=v.charCodeAt(ue++),R=v.charCodeAt(ue++),z=v.charCodeAt(ue++),L=$>>2,T=($&3)<<4|R>>4,O=(R&15)<<2|z>>6,F=z&63,isNaN(R)?O=F=64:isNaN(z)&&(F=64),l=l+m.charAt(L)+m.charAt(T)+m.charAt(O)+m.charAt(F);return l},te.decode=function(v,C){var l="",$,R,z,L,T,O,F,ue=0;for(v=v.replace(/[^A-Za-z0-9\+\/\=]/g,"");ue<v.length;)L=m.indexOf(v.charAt(ue++)),T=m.indexOf(v.charAt(ue++)),O=m.indexOf(v.charAt(ue++)),F=m.indexOf(v.charAt(ue++)),$=L<<2|T>>4,R=(T&15)<<4|O>>2,z=(O&3)<<6|F,l=l+String.fromCharCode($),O!=64&&(l=l+String.fromCharCode(R)),F!=64&&(l=l+String.fromCharCode(z));return l}},37326:function(Qe){"use strict";function te(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}te.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},Qe.exports=te},61678:function(Qe,te,m){"use strict";te.STORE={magic:"\0\0",compress:function(v,C){return v},uncompress:function(v){return v},compressInputType:null,uncompressInputType:null},te.DEFLATE=m(51033)},86988:function(Qe,te,m){"use strict";var v=m(58910),C=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];Qe.exports=function($,R){if(typeof $=="undefined"||!$.length)return 0;var z=v.getTypeOf($)!=="string";typeof R=="undefined"&&(R=0);var L=0,T=0,O=0;R=R^-1;for(var F=0,ue=$.length;F<ue;F++)O=z?$[F]:$.charCodeAt(F),T=(R^O)&255,L=C[T],R=R>>>8^L;return R^-1}},32640:function(Qe,te,m){"use strict";var v=m(58910);function C(l){this.data=null,this.length=0,this.index=0}C.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(l){},readInt:function(l){var $=0,R;for(this.checkOffset(l),R=this.index+l-1;R>=this.index;R--)$=($<<8)+this.byteAt(R);return this.index+=l,$},readString:function(l){return v.transformTo("string",this.readData(l))},readData:function(l){},lastIndexOfSignature:function(l){},readDate:function(){var l=this.readInt(4);return new Date((l>>25&127)+1980,(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(l&31)<<1)}},Qe.exports=C},26032:function(Qe,te){"use strict";te.base64=!1,te.binary=!1,te.dir=!1,te.createFolders=!1,te.date=null,te.compression=null,te.compressionOptions=null,te.comment=null,te.unixPermissions=null,te.dosPermissions=null},60172:function(Qe,te,m){"use strict";var v=m(58910);te.string2binary=function(C){return v.string2binary(C)},te.string2Uint8Array=function(C){return v.transformTo("uint8array",C)},te.uint8Array2String=function(C){return v.transformTo("string",C)},te.string2Blob=function(C){var l=v.transformTo("arraybuffer",C);return v.arrayBuffer2Blob(l)},te.arrayBuffer2Blob=function(C){return v.arrayBuffer2Blob(C)},te.transformTo=function(C,l){return v.transformTo(C,l)},te.getTypeOf=function(C){return v.getTypeOf(C)},te.checkSupport=function(C){return v.checkSupport(C)},te.MAX_VALUE_16BITS=v.MAX_VALUE_16BITS,te.MAX_VALUE_32BITS=v.MAX_VALUE_32BITS,te.pretty=function(C){return v.pretty(C)},te.findCompression=function(C){return v.findCompression(C)},te.isRegExp=function(C){return v.isRegExp(C)}},51033:function(Qe,te,m){"use strict";var v=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",C=m(99591);te.uncompressInputType=v?"uint8array":"array",te.compressInputType=v?"uint8array":"array",te.magic="\b\0",te.compress=function(l,$){return C.deflateRaw(l,{level:$.level||-1})},te.uncompress=function(l){return C.inflateRaw(l)}},66085:function(Qe,te,m){"use strict";var v=m(78458);function C(l,$){if(!(this instanceof C))return new C(l,$);this.files={},this.comment=null,this.root="",l&&this.load(l,$),this.clone=function(){var R=new C;for(var z in this)typeof this[z]!="function"&&(R[z]=this[z]);return R}}C.prototype=m(17132),C.prototype.load=m(81062),C.support=m(53790),C.defaults=m(26032),C.utils=m(60172),C.base64={encode:function(l){return v.encode(l)},decode:function(l){return v.decode(l)}},C.compressions=m(61678),Qe.exports=C},81062:function(Qe,te,m){"use strict";var v=m(78458),C=m(6624);Qe.exports=function(l,$){var R,z,L,T;for($=$||{},$.base64&&(l=v.decode(l)),z=new C(l,$),R=z.files,L=0;L<R.length;L++)T=R[L],this.file(T.fileName,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileComment.length?T.fileComment:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:$.createFolders});return z.zipComment.length&&(this.comment=z.zipComment),this}},49939:function(Qe,te,m){"use strict";var v=m(48764).lW;Qe.exports=function(C,l){return new v(C,l)},Qe.exports.test=function(C){return v.isBuffer(C)}},60696:function(Qe,te,m){"use strict";var v=m(82123);function C(l){this.data=l,this.length=this.data.length,this.index=0}C.prototype=new v,C.prototype.readData=function(l){this.checkOffset(l);var $=this.data.slice(this.index,this.index+l);return this.index+=l,$},Qe.exports=C},17132:function(Qe,te,m){"use strict";var v=m(53790),C=m(58910),l=m(86988),$=m(71141),R=m(26032),z=m(78458),L=m(61678),T=m(37326),O=m(49939),F=m(83600),ue=m(86175),Ae=m(6378),re=function(he){if(he._data instanceof T&&(he._data=he._data.getContent(),he.options.binary=!0,he.options.base64=!1,C.getTypeOf(he._data)==="uint8array")){var Ve=he._data;he._data=new Uint8Array(Ve.length),Ve.length!==0&&he._data.set(Ve,0)}return he._data},pe=function(he){var Ve=re(he),ie=C.getTypeOf(Ve);return ie==="string"?!he.options.binary&&v.nodebuffer?O(Ve,"utf-8"):he.asBinary():Ve},fe=function(he){var Ve=re(this);return Ve===null||typeof Ve=="undefined"?"":(this.options.base64&&(Ve=z.decode(Ve)),he&&this.options.binary?Ve=Ne.utf8decode(Ve):Ve=C.transformTo("string",Ve),!he&&!this.options.binary&&(Ve=C.transformTo("string",Ne.utf8encode(Ve))),Ve)},ke=function(he,Ve,ie){this.name=he,this.dir=ie.dir,this.date=ie.date,this.comment=ie.comment,this.unixPermissions=ie.unixPermissions,this.dosPermissions=ie.dosPermissions,this._data=Ve,this.options=ie,this._initialMetadata={dir:ie.dir,date:ie.date}};ke.prototype={asText:function(){return fe.call(this,!0)},asBinary:function(){return fe.call(this,!1)},asNodeBuffer:function(){var he=pe(this);return C.transformTo("nodebuffer",he)},asUint8Array:function(){var he=pe(this);return C.transformTo("uint8array",he)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var je=function(he,Ve){var ie="",ze;for(ze=0;ze<Ve;ze++)ie+=String.fromCharCode(he&255),he=he>>>8;return ie},bt=function(){var he={},Ve,ie;for(Ve=0;Ve<arguments.length;Ve++)for(ie in arguments[Ve])arguments[Ve].hasOwnProperty(ie)&&typeof he[ie]=="undefined"&&(he[ie]=arguments[Ve][ie]);return he},ut=function(he){return he=he||{},he.base64===!0&&(he.binary===null||he.binary===void 0)&&(he.binary=!0),he=bt(he,R),he.date=he.date||new Date,he.compression!==null&&(he.compression=he.compression.toUpperCase()),he},wt=function(he,Ve,ie){var ze=C.getTypeOf(Ve),Le;if(ie=ut(ie),typeof ie.unixPermissions=="string"&&(ie.unixPermissions=parseInt(ie.unixPermissions,8)),ie.unixPermissions&&ie.unixPermissions&16384&&(ie.dir=!0),ie.dosPermissions&&ie.dosPermissions&16&&(ie.dir=!0),ie.dir&&(he=qe(he)),ie.createFolders&&(Le=se(he))&&me.call(this,Le,!0),ie.dir||Ve===null||typeof Ve=="undefined")ie.base64=!1,ie.binary=!1,Ve=null,ze=null;else if(ze==="string")ie.binary&&!ie.base64&&ie.optimizedBinaryString!==!0&&(Ve=C.string2binary(Ve));else{if(ie.base64=!1,ie.binary=!0,!ze&&!(Ve instanceof T))throw new Error("The data of '"+he+"' is in an unsupported format !");ze==="arraybuffer"&&(Ve=C.transformTo("uint8array",Ve))}var Re=new ke(he,Ve,ie);return this.files[he]=Re,Re},se=function(he){he.slice(-1)=="/"&&(he=he.substring(0,he.length-1));var Ve=he.lastIndexOf("/");return Ve>0?he.substring(0,Ve):""},qe=function(he){return he.slice(-1)!="/"&&(he+="/"),he},me=function(he,Ve){return Ve=typeof Ve!="undefined"?Ve:!1,he=qe(he),this.files[he]||wt.call(this,he,null,{dir:!0,createFolders:Ve}),this.files[he]},_e=function(he,Ve,ie){var ze=new T,Le;return he._data instanceof T?(ze.uncompressedSize=he._data.uncompressedSize,ze.crc32=he._data.crc32,ze.uncompressedSize===0||he.dir?(Ve=L.STORE,ze.compressedContent="",ze.crc32=0):he._data.compressionMethod===Ve.magic?ze.compressedContent=he._data.getCompressedContent():(Le=he._data.getContent(),ze.compressedContent=Ve.compress(C.transformTo(Ve.compressInputType,Le),ie))):(Le=pe(he),(!Le||Le.length===0||he.dir)&&(Ve=L.STORE,Le=""),ze.uncompressedSize=Le.length,ze.crc32=l(Le),ze.compressedContent=Ve.compress(C.transformTo(Ve.compressInputType,Le),ie)),ze.compressedSize=ze.compressedContent.length,ze.compressionMethod=Ve.magic,ze},Te=function(he,Ve){var ie=he;return he||(ie=Ve?16893:33204),(ie&65535)<<16},ht=function(he,Ve){return(he||0)&63},We=function(he,Ve,ie,ze,Le){var Re=ie.compressedContent,st=C.transformTo("string",F.utf8encode(Ve.name)),vt=Ve.comment||"",Dt=C.transformTo("string",F.utf8encode(vt)),ar=st.length!==Ve.name.length,$t=Dt.length!==vt.length,ur=Ve.options,we,At,nt="",Lt="",St="",Ut,lt;Ve._initialMetadata.dir!==Ve.dir?Ut=Ve.dir:Ut=ur.dir,Ve._initialMetadata.date!==Ve.date?lt=Ve.date:lt=ur.date;var Et=0,Zt=0;Ut&&(Et|=16),Le==="UNIX"?(Zt=798,Et|=Te(Ve.unixPermissions,Ut)):(Zt=20,Et|=ht(Ve.dosPermissions,Ut)),we=lt.getHours(),we=we<<6,we=we|lt.getMinutes(),we=we<<5,we=we|lt.getSeconds()/2,At=lt.getFullYear()-1980,At=At<<4,At=At|lt.getMonth()+1,At=At<<5,At=At|lt.getDate(),ar&&(Lt=je(1,1)+je(l(st),4)+st,nt+="up"+je(Lt.length,2)+Lt),$t&&(St=je(1,1)+je(this.crc32(Dt),4)+Dt,nt+="uc"+je(St.length,2)+St);var Be="";Be+=`
\0`,Be+=ar||$t?"\0\b":"\0\0",Be+=ie.compressionMethod,Be+=je(we,2),Be+=je(At,2),Be+=je(ie.crc32,4),Be+=je(ie.compressedSize,4),Be+=je(ie.uncompressedSize,4),Be+=je(st.length,2),Be+=je(nt.length,2);var He=$.LOCAL_FILE_HEADER+Be+st+nt,ft=$.CENTRAL_FILE_HEADER+je(Zt,2)+Be+je(Dt.length,2)+"\0\0\0\0"+je(Et,4)+je(ze,4)+st+nt+Dt;return{fileRecord:He,dirRecord:ft,compressedObject:ie}},Ne={load:function(he,Ve){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(he){var Ve=[],ie,ze,Le,Re;for(ie in this.files)this.files.hasOwnProperty(ie)&&(Le=this.files[ie],Re=new ke(Le.name,Le._data,bt(Le.options)),ze=ie.slice(this.root.length,ie.length),ie.slice(0,this.root.length)===this.root&&he(ze,Re)&&Ve.push(Re));return Ve},file:function(he,Ve,ie){if(arguments.length===1)if(C.isRegExp(he)){var ze=he;return this.filter(function(Le,Re){return!Re.dir&&ze.test(Le)})}else return this.filter(function(Le,Re){return!Re.dir&&Le===he})[0]||null;else he=this.root+he,wt.call(this,he,Ve,ie);return this},folder:function(he){if(!he)return this;if(C.isRegExp(he))return this.filter(function(Le,Re){return Re.dir&&he.test(Le)});var Ve=this.root+he,ie=me.call(this,Ve),ze=this.clone();return ze.root=ie.name,ze},remove:function(he){he=this.root+he;var Ve=this.files[he];if(Ve||(he.slice(-1)!="/"&&(he+="/"),Ve=this.files[he]),Ve&&!Ve.dir)delete this.files[he];else for(var ie=this.filter(function(Le,Re){return Re.name.slice(0,he.length)===he}),ze=0;ze<ie.length;ze++)delete this.files[ie[ze].name];return this},generate:function(he){he=bt(he||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),C.checkSupport(he.type),(he.platform==="darwin"||he.platform==="freebsd"||he.platform==="linux"||he.platform==="sunos")&&(he.platform="UNIX"),he.platform==="win32"&&(he.platform="DOS");var Ve=[],ie=0,ze=0,Le,Re,st=C.transformTo("string",this.utf8encode(he.comment||this.comment||""));for(var vt in this.files)if(this.files.hasOwnProperty(vt)){var Dt=this.files[vt],ar=Dt.options.compression||he.compression.toUpperCase(),$t=L[ar];if(!$t)throw new Error(ar+" is not a valid compression method !");var ur=Dt.options.compressionOptions||he.compressionOptions||{},we=_e.call(this,Dt,$t,ur),At=We.call(this,vt,Dt,we,ie,he.platform);ie+=At.fileRecord.length+we.compressedSize,ze+=At.dirRecord.length,Ve.push(At)}var nt="";nt=$.CENTRAL_DIRECTORY_END+"\0\0\0\0"+je(Ve.length,2)+je(Ve.length,2)+je(ze,4)+je(ie,4)+je(st.length,2)+st;var Lt=he.type.toLowerCase();for(Lt==="uint8array"||Lt==="arraybuffer"||Lt==="blob"||Lt==="nodebuffer"?Le=new Ae(ie+ze+nt.length):Le=new ue(ie+ze+nt.length),Re=0;Re<Ve.length;Re++)Le.append(Ve[Re].fileRecord),Le.append(Ve[Re].compressedObject.compressedContent);for(Re=0;Re<Ve.length;Re++)Le.append(Ve[Re].dirRecord);Le.append(nt);var St=Le.finalize();switch(he.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return C.transformTo(he.type.toLowerCase(),St);case"blob":return C.arrayBuffer2Blob(C.transformTo("arraybuffer",St),he.mimeType);case"base64":return he.base64?z.encode(St):St;default:return St}},crc32:function(he,Ve){return l(he,Ve)},utf8encode:function(he){return C.transformTo("string",F.utf8encode(he))},utf8decode:function(he){return F.utf8decode(he)}};Qe.exports=Ne},71141:function(Qe,te){"use strict";te.LOCAL_FILE_HEADER="PK",te.CENTRAL_FILE_HEADER="PK",te.CENTRAL_DIRECTORY_END="PK",te.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",te.ZIP64_CENTRAL_DIRECTORY_END="PK",te.DATA_DESCRIPTOR="PK\x07\b"},69001:function(Qe,te,m){"use strict";var v=m(32640),C=m(58910);function l($,R){this.data=$,R||(this.data=C.string2binary(this.data)),this.length=this.data.length,this.index=0}l.prototype=new v,l.prototype.byteAt=function($){return this.data.charCodeAt($)},l.prototype.lastIndexOfSignature=function($){return this.data.lastIndexOf($)},l.prototype.readData=function($){this.checkOffset($);var R=this.data.slice(this.index,this.index+$);return this.index+=$,R},Qe.exports=l},86175:function(Qe,te,m){"use strict";var v=m(58910),C=function(){this.data=[]};C.prototype={append:function(l){l=v.transformTo("string",l),this.data.push(l)},finalize:function(){return this.data.join("")}},Qe.exports=C},53790:function(Qe,te,m){"use strict";var v=m(48764).lW;if(te.base64=!0,te.array=!0,te.string=!0,te.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",te.nodebuffer=typeof v!="undefined",te.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")te.blob=!1;else{var C=new ArrayBuffer(0);try{te.blob=new Blob([C],{type:"application/zip"}).size===0}catch(R){try{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,$=new l;$.append(C),te.blob=$.getBlob("application/zip").size===0}catch(z){te.blob=!1}}}},82123:function(Qe,te,m){"use strict";var v=m(32640);function C(l){l&&(this.data=l,this.length=this.data.length,this.index=0)}C.prototype=new v,C.prototype.byteAt=function(l){return this.data[l]},C.prototype.lastIndexOfSignature=function(l){for(var $=l.charCodeAt(0),R=l.charCodeAt(1),z=l.charCodeAt(2),L=l.charCodeAt(3),T=this.length-4;T>=0;--T)if(this.data[T]===$&&this.data[T+1]===R&&this.data[T+2]===z&&this.data[T+3]===L)return T;return-1},C.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var $=this.data.subarray(this.index,this.index+l);return this.index+=l,$},Qe.exports=C},6378:function(Qe,te,m){"use strict";var v=m(58910),C=function(l){this.data=new Uint8Array(l),this.index=0};C.prototype={append:function(l){l.length!==0&&(l=v.transformTo("uint8array",l),this.data.set(l,this.index),this.index+=l.length)},finalize:function(){return this.data}},Qe.exports=C},83600:function(Qe,te,m){"use strict";for(var v=m(58910),C=m(53790),l=m(49939),$=new Array(256),R=0;R<256;R++)$[R]=R>=252?6:R>=248?5:R>=240?4:R>=224?3:R>=192?2:1;$[254]=$[254]=1;var z=function(O){var F,ue,Ae,re,pe,fe=O.length,ke=0;for(re=0;re<fe;re++)ue=O.charCodeAt(re),(ue&64512)===55296&&re+1<fe&&(Ae=O.charCodeAt(re+1),(Ae&64512)===56320&&(ue=65536+(ue-55296<<10)+(Ae-56320),re++)),ke+=ue<128?1:ue<2048?2:ue<65536?3:4;for(C.uint8array?F=new Uint8Array(ke):F=new Array(ke),pe=0,re=0;pe<ke;re++)ue=O.charCodeAt(re),(ue&64512)===55296&&re+1<fe&&(Ae=O.charCodeAt(re+1),(Ae&64512)===56320&&(ue=65536+(ue-55296<<10)+(Ae-56320),re++)),ue<128?F[pe++]=ue:ue<2048?(F[pe++]=192|ue>>>6,F[pe++]=128|ue&63):ue<65536?(F[pe++]=224|ue>>>12,F[pe++]=128|ue>>>6&63,F[pe++]=128|ue&63):(F[pe++]=240|ue>>>18,F[pe++]=128|ue>>>12&63,F[pe++]=128|ue>>>6&63,F[pe++]=128|ue&63);return F},L=function(O,F){var ue;for(F=F||O.length,F>O.length&&(F=O.length),ue=F-1;ue>=0&&(O[ue]&192)===128;)ue--;return ue<0||ue===0?F:ue+$[O[ue]]>F?ue:F},T=function(O){var F,ue,Ae,re,pe,fe=O.length,ke=new Array(fe*2);for(Ae=0,ue=0;ue<fe;){if(re=O[ue++],re<128){ke[Ae++]=re;continue}if(pe=$[re],pe>4){ke[Ae++]=65533,ue+=pe-1;continue}for(re&=pe===2?31:pe===3?15:7;pe>1&&ue<fe;)re=re<<6|O[ue++]&63,pe--;if(pe>1){ke[Ae++]=65533;continue}re<65536?ke[Ae++]=re:(re-=65536,ke[Ae++]=55296|re>>10&1023,ke[Ae++]=56320|re&1023)}return ke.length!==Ae&&(ke.subarray?ke=ke.subarray(0,Ae):ke.length=Ae),v.applyFromCharCode(ke)};te.utf8encode=function(F){return C.nodebuffer?l(F,"utf-8"):z(F)},te.utf8decode=function(F){if(C.nodebuffer)return v.transformTo("nodebuffer",F).toString("utf-8");F=v.transformTo(C.uint8array?"uint8array":"array",F);for(var ue=[],Ae=0,re=F.length,pe=65536;Ae<re;){var fe=L(F,Math.min(Ae+pe,re));C.uint8array?ue.push(T(F.subarray(Ae,fe))):ue.push(T(F.slice(Ae,fe))),Ae=fe}return ue.join("")}},58910:function(Qe,te,m){"use strict";var v=m(53790),C=m(61678),l=m(49939);te.string2binary=function(O){for(var F="",ue=0;ue<O.length;ue++)F+=String.fromCharCode(O.charCodeAt(ue)&255);return F},te.arrayBuffer2Blob=function(O,F){te.checkSupport("blob"),F=F||"application/zip";try{return new Blob([O],{type:F})}catch(re){try{var ue=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Ae=new ue;return Ae.append(O),Ae.getBlob(F)}catch(pe){throw new Error("Bug : can't construct the Blob.")}}};function $(O){return O}function R(O,F){for(var ue=0;ue<O.length;++ue)F[ue]=O.charCodeAt(ue)&255;return F}function z(O){var F=65536,ue=[],Ae=O.length,re=te.getTypeOf(O),pe=0,fe=!0;try{switch(re){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0));break}}catch(bt){fe=!1}if(!fe){for(var ke="",je=0;je<O.length;je++)ke+=String.fromCharCode(O[je]);return ke}for(;pe<Ae&&F>1;)try{re==="array"||re==="nodebuffer"?ue.push(String.fromCharCode.apply(null,O.slice(pe,Math.min(pe+F,Ae)))):ue.push(String.fromCharCode.apply(null,O.subarray(pe,Math.min(pe+F,Ae)))),pe+=F}catch(bt){F=Math.floor(F/2)}return ue.join("")}te.applyFromCharCode=z;function L(O,F){for(var ue=0;ue<O.length;ue++)F[ue]=O[ue];return F}var T={};T.string={string:$,array:function(O){return R(O,new Array(O.length))},arraybuffer:function(O){return T.string.uint8array(O).buffer},uint8array:function(O){return R(O,new Uint8Array(O.length))},nodebuffer:function(O){return R(O,l(O.length))}},T.array={string:z,array:$,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return l(O)}},T.arraybuffer={string:function(O){return z(new Uint8Array(O))},array:function(O){return L(new Uint8Array(O),new Array(O.byteLength))},arraybuffer:$,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return l(new Uint8Array(O))}},T.uint8array={string:z,array:function(O){return L(O,new Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:$,nodebuffer:function(O){return l(O)}},T.nodebuffer={string:z,array:function(O){return L(O,new Array(O.length))},arraybuffer:function(O){return T.nodebuffer.uint8array(O).buffer},uint8array:function(O){return L(O,new Uint8Array(O.length))},nodebuffer:$},te.transformTo=function(O,F){if(F||(F=""),!O)return F;te.checkSupport(O);var ue=te.getTypeOf(F),Ae=T[ue][O](F);return Ae},te.getTypeOf=function(O){if(typeof O=="string")return"string";if(Object.prototype.toString.call(O)==="[object Array]")return"array";if(v.nodebuffer&&l.test(O))return"nodebuffer";if(v.uint8array&&O instanceof Uint8Array)return"uint8array";if(v.arraybuffer&&O instanceof ArrayBuffer)return"arraybuffer"},te.checkSupport=function(O){var F=v[O.toLowerCase()];if(!F)throw new Error(O+" is not supported by this browser")},te.MAX_VALUE_16BITS=65535,te.MAX_VALUE_32BITS=-1,te.pretty=function(O){var F="",ue,Ae;for(Ae=0;Ae<(O||"").length;Ae++)ue=O.charCodeAt(Ae),F+="\\x"+(ue<16?"0":"")+ue.toString(16).toUpperCase();return F},te.findCompression=function(O){for(var F in C)if(C.hasOwnProperty(F)&&C[F].magic===O)return C[F];return null},te.isRegExp=function(O){return Object.prototype.toString.call(O)==="[object RegExp]"}},6624:function(Qe,te,m){"use strict";var v=m(69001),C=m(60696),l=m(82123),$=m(58910),R=m(71141),z=m(39392),L=m(53790),T=m(17132);function O(F,ue){this.files=[],this.loadOptions=ue,F&&this.load(F)}O.prototype={checkSignature:function(F){var ue=this.reader.readString(4);if(ue!==F)throw new Error("Corrupted zip or bug : unexpected signature ("+$.pretty(ue)+", expected "+$.pretty(F)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=T.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var F=this.zip64EndOfCentralSize-44,ue=0,Ae,re,pe;ue<F;)Ae=this.reader.readInt(2),re=this.reader.readInt(4),pe=this.reader.readString(re),this.zip64ExtensibleData[Ae]={id:Ae,length:re,value:pe}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var F,ue;for(F=0;F<this.files.length;F++)ue=this.files[F],this.reader.setIndex(ue.localHeaderOffset),this.checkSignature(R.LOCAL_FILE_HEADER),ue.readLocalPart(this.reader),ue.handleUTF8(),ue.processAttributes()},readCentralDir:function(){var F;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===R.CENTRAL_FILE_HEADER;)F=new z({zip64:this.zip64},this.loadOptions),F.readCentralPart(this.reader),this.files.push(F)},readEndOfCentral:function(){var F=this.reader.lastIndexOfSignature(R.CENTRAL_DIRECTORY_END);if(F===-1){var ue=!0;try{this.reader.setIndex(0),this.checkSignature(R.LOCAL_FILE_HEADER),ue=!1}catch(Ae){}throw ue?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(F),this.checkSignature(R.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===$.MAX_VALUE_16BITS||this.diskWithCentralDirStart===$.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===$.MAX_VALUE_16BITS||this.centralDirRecords===$.MAX_VALUE_16BITS||this.centralDirSize===$.MAX_VALUE_32BITS||this.centralDirOffset===$.MAX_VALUE_32BITS){if(this.zip64=!0,F=this.reader.lastIndexOfSignature(R.ZIP64_CENTRAL_DIRECTORY_LOCATOR),F===-1)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(F),this.checkSignature(R.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(R.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(F){var ue=$.getTypeOf(F);ue==="string"&&!L.uint8array?this.reader=new v(F,this.loadOptions.optimizedBinaryString):ue==="nodebuffer"?this.reader=new C(F):this.reader=new l($.transformTo("uint8array",F))},load:function(F){this.prepareReader(F),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Qe.exports=O},39392:function(Qe,te,m){"use strict";var v=m(69001),C=m(58910),l=m(37326),$=m(17132),R=0,z=3;function L(T,O){this.options=T,this.loadOptions=O}L.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},prepareCompressedContent:function(T,O,F){return function(){var ue=T.index;T.setIndex(O);var Ae=T.readData(F);return T.setIndex(ue),Ae}},prepareContent:function(T,O,F,ue,Ae){return function(){var re=C.transformTo(ue.uncompressInputType,this.getCompressedContent()),pe=ue.uncompress(re);if(pe.length!==Ae)throw new Error("Bug : uncompressed data size mismatch");return pe}},readLocalPart:function(T){var O,F;if(T.skip(22),this.fileNameLength=T.readInt(2),F=T.readInt(2),this.fileName=T.readString(this.fileNameLength),T.skip(F),this.compressedSize==-1||this.uncompressedSize==-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(O=C.findCompression(this.compressionMethod),O===null)throw new Error("Corrupted zip : compression "+C.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new l,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(T,T.index,this.compressedSize,O),this.decompressed.getContent=this.prepareContent(T,T.index,this.compressedSize,O,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=C.transformTo("string",this.decompressed.getContent()),$.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(T){if(this.versionMadeBy=T.readInt(2),this.versionNeeded=T.readInt(2),this.bitFlag=T.readInt(2),this.compressionMethod=T.readString(2),this.date=T.readDate(),this.crc32=T.readInt(4),this.compressedSize=T.readInt(4),this.uncompressedSize=T.readInt(4),this.fileNameLength=T.readInt(2),this.extraFieldsLength=T.readInt(2),this.fileCommentLength=T.readInt(2),this.diskNumberStart=T.readInt(2),this.internalFileAttributes=T.readInt(2),this.externalFileAttributes=T.readInt(4),this.localHeaderOffset=T.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=T.readString(this.fileNameLength),this.readExtraFields(T),this.parseZIP64ExtraField(T),this.fileComment=T.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var T=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),T===R&&(this.dosPermissions=this.externalFileAttributes&63),T===z&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileName.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(T){if(this.extraFields[1]){var O=new v(this.extraFields[1].value);this.uncompressedSize===C.MAX_VALUE_32BITS&&(this.uncompressedSize=O.readInt(8)),this.compressedSize===C.MAX_VALUE_32BITS&&(this.compressedSize=O.readInt(8)),this.localHeaderOffset===C.MAX_VALUE_32BITS&&(this.localHeaderOffset=O.readInt(8)),this.diskNumberStart===C.MAX_VALUE_32BITS&&(this.diskNumberStart=O.readInt(4))}},readExtraFields:function(T){var O=T.index,F,ue,Ae;for(this.extraFields=this.extraFields||{};T.index<O+this.extraFieldsLength;)F=T.readInt(2),ue=T.readInt(2),Ae=T.readString(ue),this.extraFields[F]={id:F,length:ue,value:Ae}},handleUTF8:function(){if(this.useUTF8())this.fileName=$.utf8decode(this.fileName),this.fileComment=$.utf8decode(this.fileComment);else{var T=this.findExtraFieldUnicodePath();T!==null&&(this.fileName=T);var O=this.findExtraFieldUnicodeComment();O!==null&&(this.fileComment=O)}},findExtraFieldUnicodePath:function(){var T=this.extraFields[28789];if(T){var O=new v(T.value);return O.readInt(1)!==1||$.crc32(this.fileName)!==O.readInt(4)?null:$.utf8decode(O.readString(T.length-5))}return null},findExtraFieldUnicodeComment:function(){var T=this.extraFields[25461];if(T){var O=new v(T.value);return O.readInt(1)!==1||$.crc32(this.fileComment)!==O.readInt(4)?null:$.utf8decode(O.readString(T.length-5))}return null}},Qe.exports=L},31745:function(Qe){"use strict";Qe.exports=m,Qe.exports.default=m;var te=1e20;function m(R,z,L,T,O,F){this.fontSize=R||24,this.buffer=z===void 0?3:z,this.cutoff=T||.25,this.fontFamily=O||"sans-serif",this.fontWeight=F||"normal",this.radius=L||8;var ue=this.size=this.fontSize+this.buffer*2,Ae=ue+this.buffer*2,re=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;re?this.canvas=my.createOffscreenCanvas(ue,ue,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ue),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ae*Ae),this.gridInner=new Float64Array(Ae*Ae),this.f=new Float64Array(Ae),this.z=new Float64Array(Ae+1),this.v=new Uint16Array(Ae),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,re?this.middle=Math.round(ue/2*1):this.middle=Math.round(ue/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(R,z,L,T,O,F,ue){F.fill(te,0,z*L),ue.fill(0,0,z*L);for(var Ae=(z-T)/2,re=0;re<O;re++)for(var pe=0;pe<T;pe++){var fe=(re+Ae)*z+pe+Ae,ke=R.data[4*(re*T+pe)+3]/255;if(ke===1)F[fe]=0,ue[fe]=te;else if(ke===0)F[fe]=te,ue[fe]=0;else{var je=Math.max(0,.5-ke),bt=Math.max(0,ke-.5);F[fe]=je*je,ue[fe]=bt*bt}}}function C(R,z,L,T,O,F,ue){for(var Ae=0;Ae<z*L;Ae++){var re=Math.sqrt(T[Ae])-Math.sqrt(O[Ae]);R[Ae]=Math.round(255-255*(re/F+ue))}}m.prototype._draw=function(R,z){var L=this.ctx.measureText(R),T=L.width,O=2*this.buffer,F,ue,Ae,re,pe,fe,ke,je;z&&this.useMetrics?(pe=Math.floor(L.actualBoundingBoxAscent),je=this.buffer+Math.ceil(L.actualBoundingBoxAscent),fe=this.buffer,ke=this.buffer,ue=Math.min(this.size,Math.ceil(L.actualBoundingBoxRight-L.actualBoundingBoxLeft)),re=Math.min(this.size-fe,Math.ceil(L.actualBoundingBoxAscent+L.actualBoundingBoxDescent)),F=ue+O,Ae=re+O,this.ctx.textBaseline="alphabetic"):(F=ue=this.size,Ae=re=this.size,pe=19*this.fontSize/24,fe=ke=0,je=this.middle,this.ctx.textBaseline="middle");var bt;ue&&re&&(this.ctx.clearRect(ke,fe,ue,re),this.ctx.fillText(R,this.buffer,je),bt=this.ctx.getImageData(ke,fe,ue,re));var ut=new Uint8ClampedArray(F*Ae);return v(bt,F,Ae,ue,re,this.gridOuter,this.gridInner),l(this.gridOuter,F,Ae,this.f,this.v,this.z),l(this.gridInner,F,Ae,this.f,this.v,this.z),C(ut,F,Ae,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:ut,metrics:{width:ue,height:re,sdfWidth:F,sdfHeight:Ae,top:pe,left:0,advance:T}}},m.prototype.draw=function(R){return this._draw(R,!1).data},m.prototype.drawWithMetrics=function(R){return this._draw(R,!0)};function l(R,z,L,T,O,F){for(var ue=0;ue<z;ue++)$(R,ue,z,L,T,O,F);for(var Ae=0;Ae<L;Ae++)$(R,Ae*z,1,z,T,O,F)}function $(R,z,L,T,O,F,ue){var Ae,re,pe,fe;for(F[0]=0,ue[0]=-te,ue[1]=te,Ae=0;Ae<T;Ae++)O[Ae]=R[z+Ae*L];for(Ae=1,re=0,pe=0;Ae<T;Ae++){do fe=F[re],pe=(O[Ae]-O[fe]+Ae*Ae-fe*fe)/(Ae-fe)/2;while(pe<=ue[re]&&--re>-1);re++,F[re]=Ae,ue[re]=pe,ue[re+1]=te}for(Ae=0,re=0;Ae<T;Ae++){for(;ue[re+1]<Ae;)re++;fe=F[re],R[z+Ae*L]=O[fe]+(Ae-fe)*(Ae-fe)}}},51260:function(Qe,te,m){"use strict";m.r(te),m.d(te,{Function:function(){return oa},Interpreter:function(){return Mn},default:function(){return Ma},evaluate:function(){return Yi},vm:function(){return v}});var v={};m.r(v),m.d(v,{Script:function(){return Ji},compileFunction:function(){return wn},createContext:function(){return pn},runInContext:function(){return Kn},runInNewContext:function(){return Ei}});var C={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},l="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",$={5:l,"5module":l+" export import",6:l+" const class extends export import super"},R=/^in(stanceof)?$/,z="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",L="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",T=new RegExp("["+z+"]"),O=new RegExp("["+z+L+"]");z=L=null;var F=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],ue=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Ae(k,de){for(var yt=65536,Ue=0;Ue<de.length;Ue+=2){if(yt+=de[Ue],yt>k)return!1;if(yt+=de[Ue+1],yt>=k)return!0}}function re(k,de){return k<65?k===36:k<91?!0:k<97?k===95:k<123?!0:k<=65535?k>=170&&T.test(String.fromCharCode(k)):de===!1?!1:Ae(k,F)}function pe(k,de){return k<48?k===36:k<58?!0:k<65?!1:k<91?!0:k<97?k===95:k<123?!0:k<=65535?k>=170&&O.test(String.fromCharCode(k)):de===!1?!1:Ae(k,F)||Ae(k,ue)}var fe=function(de,yt){yt===void 0&&(yt={}),this.label=de,this.keyword=yt.keyword,this.beforeExpr=!!yt.beforeExpr,this.startsExpr=!!yt.startsExpr,this.isLoop=!!yt.isLoop,this.isAssign=!!yt.isAssign,this.prefix=!!yt.prefix,this.postfix=!!yt.postfix,this.binop=yt.binop||null,this.updateContext=null};function ke(k,de){return new fe(k,{beforeExpr:!0,binop:de})}var je={beforeExpr:!0},bt={startsExpr:!0},ut={};function wt(k,de){return de===void 0&&(de={}),de.keyword=k,ut[k]=new fe(k,de)}var se={num:new fe("num",bt),regexp:new fe("regexp",bt),string:new fe("string",bt),name:new fe("name",bt),eof:new fe("eof"),bracketL:new fe("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new fe("]"),braceL:new fe("{",{beforeExpr:!0,startsExpr:!0}),braceR:new fe("}"),parenL:new fe("(",{beforeExpr:!0,startsExpr:!0}),parenR:new fe(")"),comma:new fe(",",je),semi:new fe(";",je),colon:new fe(":",je),dot:new fe("."),question:new fe("?",je),questionDot:new fe("?."),arrow:new fe("=>",je),template:new fe("template"),invalidTemplate:new fe("invalidTemplate"),ellipsis:new fe("...",je),backQuote:new fe("`",bt),dollarBraceL:new fe("${",{beforeExpr:!0,startsExpr:!0}),eq:new fe("=",{beforeExpr:!0,isAssign:!0}),assign:new fe("_=",{beforeExpr:!0,isAssign:!0}),incDec:new fe("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new fe("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ke("||",1),logicalAND:ke("&&",2),bitwiseOR:ke("|",3),bitwiseXOR:ke("^",4),bitwiseAND:ke("&",5),equality:ke("==/!=/===/!==",6),relational:ke("</>/<=/>=",7),bitShift:ke("<</>>/>>>",8),plusMin:new fe("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ke("%",10),star:ke("*",10),slash:ke("/",10),starstar:new fe("**",{beforeExpr:!0}),coalesce:ke("??",1),_break:wt("break"),_case:wt("case",je),_catch:wt("catch"),_continue:wt("continue"),_debugger:wt("debugger"),_default:wt("default",je),_do:wt("do",{isLoop:!0,beforeExpr:!0}),_else:wt("else",je),_finally:wt("finally"),_for:wt("for",{isLoop:!0}),_function:wt("function",bt),_if:wt("if"),_return:wt("return",je),_switch:wt("switch"),_throw:wt("throw",je),_try:wt("try"),_var:wt("var"),_const:wt("const"),_while:wt("while",{isLoop:!0}),_with:wt("with"),_new:wt("new",{beforeExpr:!0,startsExpr:!0}),_this:wt("this",bt),_super:wt("super",bt),_class:wt("class",bt),_extends:wt("extends",je),_export:wt("export"),_import:wt("import",bt),_null:wt("null",bt),_true:wt("true",bt),_false:wt("false",bt),_in:wt("in",{beforeExpr:!0,binop:7}),_instanceof:wt("instanceof",{beforeExpr:!0,binop:7}),_typeof:wt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:wt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:wt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},qe=/\r\n?|\n|\u2028|\u2029/,me=new RegExp(qe.source,"g");function _e(k,de){return k===10||k===13||!de&&(k===8232||k===8233)}var Te=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ht=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,We=Object.prototype,Ne=We.hasOwnProperty,he=We.toString;function Ve(k,de){return Ne.call(k,de)}var ie=Array.isArray||function(k){return he.call(k)==="[object Array]"};function ze(k){return new RegExp("^(?:"+k.replace(/ /g,"|")+")$")}var Le=function(de,yt){this.line=de,this.column=yt};Le.prototype.offset=function(de){return new Le(this.line,this.column+de)};var Re=function(de,yt,Ue){this.start=yt,this.end=Ue,de.sourceFile!==null&&(this.source=de.sourceFile)};function st(k,de){for(var yt=1,Ue=0;;){me.lastIndex=Ue;var nr=me.exec(k);if(nr&&nr.index<de)++yt,Ue=nr.index+nr[0].length;else return new Le(yt,de-Ue)}}var vt={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function Dt(k){var de={};for(var yt in vt)de[yt]=k&&Ve(k,yt)?k[yt]:vt[yt];if(de.ecmaVersion>=2015&&(de.ecmaVersion-=2009),de.allowReserved==null&&(de.allowReserved=de.ecmaVersion<5),ie(de.onToken)){var Ue=de.onToken;de.onToken=function(nr){return Ue.push(nr)}}return ie(de.onComment)&&(de.onComment=ar(de,de.onComment)),de}function ar(k,de){return function(yt,Ue,nr,Mr,qr,kn){var Nn={type:yt?"Block":"Line",value:Ue,start:nr,end:Mr};k.locations&&(Nn.loc=new Re(this,qr,kn)),k.ranges&&(Nn.range=[nr,Mr]),de.push(Nn)}}var $t=1,ur=2,we=$t|ur,At=4,nt=8,Lt=16,St=32,Ut=64,lt=128;function Et(k,de){return ur|(k?At:0)|(de?nt:0)}var Zt=0,Be=1,He=2,ft=3,Z=4,J=5,K=function(de,yt,Ue){this.options=de=Dt(de),this.sourceFile=de.sourceFile,this.keywords=ze($[de.ecmaVersion>=6?6:de.sourceType==="module"?"5module":5]);var nr="";if(de.allowReserved!==!0){for(var Mr=de.ecmaVersion;!(nr=C[Mr]);Mr--);de.sourceType==="module"&&(nr+=" await")}this.reservedWords=ze(nr);var qr=(nr?nr+" ":"")+C.strict;this.reservedWordsStrict=ze(qr),this.reservedWordsStrictBind=ze(qr+" "+C.strictBind),this.input=String(yt),this.containsEsc=!1,Ue?(this.pos=Ue,this.lineStart=this.input.lastIndexOf(`
`,Ue-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(qe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=se.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=de.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&de.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope($t),this.regexpState=null},B={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};K.prototype.parse=function(){var de=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(de)},B.inFunction.get=function(){return(this.currentVarScope().flags&ur)>0},B.inGenerator.get=function(){return(this.currentVarScope().flags&nt)>0},B.inAsync.get=function(){return(this.currentVarScope().flags&At)>0},B.allowSuper.get=function(){return(this.currentThisScope().flags&Ut)>0},B.allowDirectSuper.get=function(){return(this.currentThisScope().flags&lt)>0},B.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},K.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&ur)>0},K.extend=function(){for(var de=[],yt=arguments.length;yt--;)de[yt]=arguments[yt];for(var Ue=this,nr=0;nr<de.length;nr++)Ue=de[nr](Ue);return Ue},K.parse=function(de,yt){return new this(yt,de).parse()},K.parseExpressionAt=function(de,yt,Ue){var nr=new this(Ue,de,yt);return nr.nextToken(),nr.parseExpression()},K.tokenizer=function(de,yt){return new this(yt,de)},Object.defineProperties(K.prototype,B);var j=K.prototype,ee=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;j.strictDirective=function(k){for(;;){ht.lastIndex=k,k+=ht.exec(this.input)[0].length;var de=ee.exec(this.input.slice(k));if(!de)return!1;if((de[1]||de[2])==="use strict"){ht.lastIndex=k+de[0].length;var yt=ht.exec(this.input),Ue=yt.index+yt[0].length,nr=this.input.charAt(Ue);return nr===";"||nr==="}"||qe.test(yt[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(nr)||nr==="!"&&this.input.charAt(Ue+1)==="=")}k+=de[0].length,ht.lastIndex=k,k+=ht.exec(this.input)[0].length,this.input[k]===";"&&k++}},j.eat=function(k){return this.type===k?(this.next(),!0):!1},j.isContextual=function(k){return this.type===se.name&&this.value===k&&!this.containsEsc},j.eatContextual=function(k){return this.isContextual(k)?(this.next(),!0):!1},j.expectContextual=function(k){this.eatContextual(k)||this.unexpected()},j.canInsertSemicolon=function(){return this.type===se.eof||this.type===se.braceR||qe.test(this.input.slice(this.lastTokEnd,this.start))},j.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},j.semicolon=function(){!this.eat(se.semi)&&!this.insertSemicolon()&&this.unexpected()},j.afterTrailingComma=function(k,de){if(this.type===k)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),de||this.next(),!0},j.expect=function(k){this.eat(k)||this.unexpected()},j.unexpected=function(k){this.raise(k!=null?k:this.start,"Unexpected token")};function W(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}j.checkPatternErrors=function(k,de){if(k){k.trailingComma>-1&&this.raiseRecoverable(k.trailingComma,"Comma is not permitted after the rest element");var yt=de?k.parenthesizedAssign:k.parenthesizedBind;yt>-1&&this.raiseRecoverable(yt,"Parenthesized pattern")}},j.checkExpressionErrors=function(k,de){if(!k)return!1;var yt=k.shorthandAssign,Ue=k.doubleProto;if(!de)return yt>=0||Ue>=0;yt>=0&&this.raise(yt,"Shorthand property assignments are valid only in destructuring patterns"),Ue>=0&&this.raiseRecoverable(Ue,"Redefinition of __proto__ property")},j.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},j.isSimpleAssignTarget=function(k){return k.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(k.expression):k.type==="Identifier"||k.type==="MemberExpression"};var De=K.prototype;De.parseTopLevel=function(k){var de={};for(k.body||(k.body=[]);this.type!==se.eof;){var yt=this.parseStatement(null,!0,de);k.body.push(yt)}if(this.inModule)for(var Ue=0,nr=Object.keys(this.undefinedExports);Ue<nr.length;Ue+=1){var Mr=nr[Ue];this.raiseRecoverable(this.undefinedExports[Mr].start,"Export '"+Mr+"' is not defined")}return this.adaptDirectivePrologue(k.body),this.next(),k.sourceType=this.options.sourceType,this.finishNode(k,"Program")};var ot={kind:"loop"},Wt={kind:"switch"};De.isLet=function(k){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ht.lastIndex=this.pos;var de=ht.exec(this.input),yt=this.pos+de[0].length,Ue=this.input.charCodeAt(yt);if(Ue===91)return!0;if(k)return!1;if(Ue===123)return!0;if(re(Ue,!0)){for(var nr=yt+1;pe(this.input.charCodeAt(nr),!0);)++nr;var Mr=this.input.slice(yt,nr);if(!R.test(Mr))return!0}return!1},De.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ht.lastIndex=this.pos;var k=ht.exec(this.input),de=this.pos+k[0].length;return!qe.test(this.input.slice(this.pos,de))&&this.input.slice(de,de+8)==="function"&&(de+8===this.input.length||!pe(this.input.charAt(de+8)))},De.parseStatement=function(k,de,yt){var Ue=this.type,nr=this.startNode(),Mr;switch(this.isLet(k)&&(Ue=se._var,Mr="let"),Ue){case se._break:case se._continue:return this.parseBreakContinueStatement(nr,Ue.keyword);case se._debugger:return this.parseDebuggerStatement(nr);case se._do:return this.parseDoStatement(nr);case se._for:return this.parseForStatement(nr);case se._function:return k&&(this.strict||k!=="if"&&k!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(nr,!1,!k);case se._class:return k&&this.unexpected(),this.parseClass(nr,!0);case se._if:return this.parseIfStatement(nr);case se._return:return this.parseReturnStatement(nr);case se._switch:return this.parseSwitchStatement(nr);case se._throw:return this.parseThrowStatement(nr);case se._try:return this.parseTryStatement(nr);case se._const:case se._var:return Mr=Mr||this.value,k&&Mr!=="var"&&this.unexpected(),this.parseVarStatement(nr,Mr);case se._while:return this.parseWhileStatement(nr);case se._with:return this.parseWithStatement(nr);case se.braceL:return this.parseBlock(!0,nr);case se.semi:return this.parseEmptyStatement(nr);case se._export:case se._import:if(this.options.ecmaVersion>10&&Ue===se._import){ht.lastIndex=this.pos;var qr=ht.exec(this.input),kn=this.pos+qr[0].length,Nn=this.input.charCodeAt(kn);if(Nn===40||Nn===46)return this.parseExpressionStatement(nr,this.parseExpression())}return this.options.allowImportExportEverywhere||(de||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Ue===se._import?this.parseImport(nr):this.parseExport(nr,yt);default:if(this.isAsyncFunction())return k&&this.unexpected(),this.next(),this.parseFunctionStatement(nr,!0,!k);var Mi=this.value,Bi=this.parseExpression();return Ue===se.name&&Bi.type==="Identifier"&&this.eat(se.colon)?this.parseLabeledStatement(nr,Mi,Bi,k):this.parseExpressionStatement(nr,Bi)}},De.parseBreakContinueStatement=function(k,de){var yt=de==="break";this.next(),this.eat(se.semi)||this.insertSemicolon()?k.label=null:this.type!==se.name?this.unexpected():(k.label=this.parseIdent(),this.semicolon());for(var Ue=0;Ue<this.labels.length;++Ue){var nr=this.labels[Ue];if((k.label==null||nr.name===k.label.name)&&(nr.kind!=null&&(yt||nr.kind==="loop")||k.label&&yt))break}return Ue===this.labels.length&&this.raise(k.start,"Unsyntactic "+de),this.finishNode(k,yt?"BreakStatement":"ContinueStatement")},De.parseDebuggerStatement=function(k){return this.next(),this.semicolon(),this.finishNode(k,"DebuggerStatement")},De.parseDoStatement=function(k){return this.next(),this.labels.push(ot),k.body=this.parseStatement("do"),this.labels.pop(),this.expect(se._while),k.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(se.semi):this.semicolon(),this.finishNode(k,"DoWhileStatement")},De.parseForStatement=function(k){this.next();var de=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ot),this.enterScope(0),this.expect(se.parenL),this.type===se.semi)return de>-1&&this.unexpected(de),this.parseFor(k,null);var yt=this.isLet();if(this.type===se._var||this.type===se._const||yt){var Ue=this.startNode(),nr=yt?"let":this.value;return this.next(),this.parseVar(Ue,!0,nr),this.finishNode(Ue,"VariableDeclaration"),(this.type===se._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&Ue.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===se._in?de>-1&&this.unexpected(de):k.await=de>-1),this.parseForIn(k,Ue)):(de>-1&&this.unexpected(de),this.parseFor(k,Ue))}var Mr=new W,qr=this.parseExpression(!0,Mr);return this.type===se._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===se._in?de>-1&&this.unexpected(de):k.await=de>-1),this.toAssignable(qr,!1,Mr),this.checkLVal(qr),this.parseForIn(k,qr)):(this.checkExpressionErrors(Mr,!0),de>-1&&this.unexpected(de),this.parseFor(k,qr))},De.parseFunctionStatement=function(k,de,yt){return this.next(),this.parseFunction(k,Qt|(yt?0:ir),!1,de)},De.parseIfStatement=function(k){return this.next(),k.test=this.parseParenExpression(),k.consequent=this.parseStatement("if"),k.alternate=this.eat(se._else)?this.parseStatement("if"):null,this.finishNode(k,"IfStatement")},De.parseReturnStatement=function(k){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(se.semi)||this.insertSemicolon()?k.argument=null:(k.argument=this.parseExpression(),this.semicolon()),this.finishNode(k,"ReturnStatement")},De.parseSwitchStatement=function(k){this.next(),k.discriminant=this.parseParenExpression(),k.cases=[],this.expect(se.braceL),this.labels.push(Wt),this.enterScope(0);for(var de,yt=!1;this.type!==se.braceR;)if(this.type===se._case||this.type===se._default){var Ue=this.type===se._case;de&&this.finishNode(de,"SwitchCase"),k.cases.push(de=this.startNode()),de.consequent=[],this.next(),Ue?de.test=this.parseExpression():(yt&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),yt=!0,de.test=null),this.expect(se.colon)}else de||this.unexpected(),de.consequent.push(this.parseStatement(null));return this.exitScope(),de&&this.finishNode(de,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(k,"SwitchStatement")},De.parseThrowStatement=function(k){return this.next(),qe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),k.argument=this.parseExpression(),this.semicolon(),this.finishNode(k,"ThrowStatement")};var Ct=[];De.parseTryStatement=function(k){if(this.next(),k.block=this.parseBlock(),k.handler=null,this.type===se._catch){var de=this.startNode();if(this.next(),this.eat(se.parenL)){de.param=this.parseBindingAtom();var yt=de.param.type==="Identifier";this.enterScope(yt?St:0),this.checkLVal(de.param,yt?Z:He),this.expect(se.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),de.param=null,this.enterScope(0);de.body=this.parseBlock(!1),this.exitScope(),k.handler=this.finishNode(de,"CatchClause")}return k.finalizer=this.eat(se._finally)?this.parseBlock():null,!k.handler&&!k.finalizer&&this.raise(k.start,"Missing catch or finally clause"),this.finishNode(k,"TryStatement")},De.parseVarStatement=function(k,de){return this.next(),this.parseVar(k,!1,de),this.semicolon(),this.finishNode(k,"VariableDeclaration")},De.parseWhileStatement=function(k){return this.next(),k.test=this.parseParenExpression(),this.labels.push(ot),k.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(k,"WhileStatement")},De.parseWithStatement=function(k){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),k.object=this.parseParenExpression(),k.body=this.parseStatement("with"),this.finishNode(k,"WithStatement")},De.parseEmptyStatement=function(k){return this.next(),this.finishNode(k,"EmptyStatement")},De.parseLabeledStatement=function(k,de,yt,Ue){for(var nr=0,Mr=this.labels;nr<Mr.length;nr+=1){var qr=Mr[nr];qr.name===de&&this.raise(yt.start,"Label '"+de+"' is already declared")}for(var kn=this.type.isLoop?"loop":this.type===se._switch?"switch":null,Nn=this.labels.length-1;Nn>=0;Nn--){var Mi=this.labels[Nn];if(Mi.statementStart===k.start)Mi.statementStart=this.start,Mi.kind=kn;else break}return this.labels.push({name:de,kind:kn,statementStart:this.start}),k.body=this.parseStatement(Ue?Ue.indexOf("label")===-1?Ue+"label":Ue:"label"),this.labels.pop(),k.label=yt,this.finishNode(k,"LabeledStatement")},De.parseExpressionStatement=function(k,de){return k.expression=de,this.semicolon(),this.finishNode(k,"ExpressionStatement")},De.parseBlock=function(k,de,yt){for(k===void 0&&(k=!0),de===void 0&&(de=this.startNode()),de.body=[],this.expect(se.braceL),k&&this.enterScope(0);this.type!==se.braceR;){var Ue=this.parseStatement(null);de.body.push(Ue)}return yt&&(this.strict=!1),this.next(),k&&this.exitScope(),this.finishNode(de,"BlockStatement")},De.parseFor=function(k,de){return k.init=de,this.expect(se.semi),k.test=this.type===se.semi?null:this.parseExpression(),this.expect(se.semi),k.update=this.type===se.parenR?null:this.parseExpression(),this.expect(se.parenR),k.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(k,"ForStatement")},De.parseForIn=function(k,de){var yt=this.type===se._in;return this.next(),de.type==="VariableDeclaration"&&de.declarations[0].init!=null&&(!yt||this.options.ecmaVersion<8||this.strict||de.kind!=="var"||de.declarations[0].id.type!=="Identifier")?this.raise(de.start,(yt?"for-in":"for-of")+" loop variable declaration may not have an initializer"):de.type==="AssignmentPattern"&&this.raise(de.start,"Invalid left-hand side in for-loop"),k.left=de,k.right=yt?this.parseExpression():this.parseMaybeAssign(),this.expect(se.parenR),k.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(k,yt?"ForInStatement":"ForOfStatement")},De.parseVar=function(k,de,yt){for(k.declarations=[],k.kind=yt;;){var Ue=this.startNode();if(this.parseVarId(Ue,yt),this.eat(se.eq)?Ue.init=this.parseMaybeAssign(de):yt==="const"&&!(this.type===se._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():Ue.id.type!=="Identifier"&&!(de&&(this.type===se._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Ue.init=null,k.declarations.push(this.finishNode(Ue,"VariableDeclarator")),!this.eat(se.comma))break}return k},De.parseVarId=function(k,de){k.id=this.parseBindingAtom(),this.checkLVal(k.id,de==="var"?Be:He,!1)};var Qt=1,ir=2,Er=4;De.parseFunction=function(k,de,yt,Ue){this.initFunction(k),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Ue)&&(this.type===se.star&&de&ir&&this.unexpected(),k.generator=this.eat(se.star)),this.options.ecmaVersion>=8&&(k.async=!!Ue),de&Qt&&(k.id=de&Er&&this.type!==se.name?null:this.parseIdent(),k.id&&!(de&ir)&&this.checkLVal(k.id,this.strict||k.generator||k.async?this.treatFunctionsAsVar?Be:He:ft));var nr=this.yieldPos,Mr=this.awaitPos,qr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Et(k.async,k.generator)),de&Qt||(k.id=this.type===se.name?this.parseIdent():null),this.parseFunctionParams(k),this.parseFunctionBody(k,yt,!1),this.yieldPos=nr,this.awaitPos=Mr,this.awaitIdentPos=qr,this.finishNode(k,de&Qt?"FunctionDeclaration":"FunctionExpression")},De.parseFunctionParams=function(k){this.expect(se.parenL),k.params=this.parseBindingList(se.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},De.parseClass=function(k,de){this.next();var yt=this.strict;this.strict=!0,this.parseClassId(k,de),this.parseClassSuper(k);var Ue=this.startNode(),nr=!1;for(Ue.body=[],this.expect(se.braceL);this.type!==se.braceR;){var Mr=this.parseClassElement(k.superClass!==null);Mr&&(Ue.body.push(Mr),Mr.type==="MethodDefinition"&&Mr.kind==="constructor"&&(nr&&this.raise(Mr.start,"Duplicate constructor in the same class"),nr=!0))}return this.strict=yt,this.next(),k.body=this.finishNode(Ue,"ClassBody"),this.finishNode(k,de?"ClassDeclaration":"ClassExpression")},De.parseClassElement=function(k){var de=this;if(this.eat(se.semi))return null;var yt=this.startNode(),Ue=function(Nn,Mi){Mi===void 0&&(Mi=!1);var Bi=de.start,io=de.startLoc;return de.eatContextual(Nn)?de.type!==se.parenL&&(!Mi||!de.canInsertSemicolon())?!0:(yt.key&&de.unexpected(),yt.computed=!1,yt.key=de.startNodeAt(Bi,io),yt.key.name=Nn,de.finishNode(yt.key,"Identifier"),!1):!1};yt.kind="method",yt.static=Ue("static");var nr=this.eat(se.star),Mr=!1;nr||(this.options.ecmaVersion>=8&&Ue("async",!0)?(Mr=!0,nr=this.options.ecmaVersion>=9&&this.eat(se.star)):Ue("get")?yt.kind="get":Ue("set")&&(yt.kind="set")),yt.key||this.parsePropertyName(yt);var qr=yt.key,kn=!1;return!yt.computed&&!yt.static&&(qr.type==="Identifier"&&qr.name==="constructor"||qr.type==="Literal"&&qr.value==="constructor")?(yt.kind!=="method"&&this.raise(qr.start,"Constructor can't have get/set modifier"),nr&&this.raise(qr.start,"Constructor can't be a generator"),Mr&&this.raise(qr.start,"Constructor can't be an async method"),yt.kind="constructor",kn=k):yt.static&&qr.type==="Identifier"&&qr.name==="prototype"&&this.raise(qr.start,"Classes may not have a static property named prototype"),this.parseClassMethod(yt,nr,Mr,kn),yt.kind==="get"&&yt.value.params.length!==0&&this.raiseRecoverable(yt.value.start,"getter should have no params"),yt.kind==="set"&&yt.value.params.length!==1&&this.raiseRecoverable(yt.value.start,"setter should have exactly one param"),yt.kind==="set"&&yt.value.params[0].type==="RestElement"&&this.raiseRecoverable(yt.value.params[0].start,"Setter cannot use rest params"),yt},De.parseClassMethod=function(k,de,yt,Ue){return k.value=this.parseMethod(de,yt,Ue),this.finishNode(k,"MethodDefinition")},De.parseClassId=function(k,de){this.type===se.name?(k.id=this.parseIdent(),de&&this.checkLVal(k.id,He,!1)):(de===!0&&this.unexpected(),k.id=null)},De.parseClassSuper=function(k){k.superClass=this.eat(se._extends)?this.parseExprSubscripts():null},De.parseExport=function(k,de){if(this.next(),this.eat(se.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(k.exported=this.parseIdent(!0),this.checkExport(de,k.exported.name,this.lastTokStart)):k.exported=null),this.expectContextual("from"),this.type!==se.string&&this.unexpected(),k.source=this.parseExprAtom(),this.semicolon(),this.finishNode(k,"ExportAllDeclaration");if(this.eat(se._default)){this.checkExport(de,"default",this.lastTokStart);var yt;if(this.type===se._function||(yt=this.isAsyncFunction())){var Ue=this.startNode();this.next(),yt&&this.next(),k.declaration=this.parseFunction(Ue,Qt|Er,!1,yt)}else if(this.type===se._class){var nr=this.startNode();k.declaration=this.parseClass(nr,"nullableID")}else k.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(k,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())k.declaration=this.parseStatement(null),k.declaration.type==="VariableDeclaration"?this.checkVariableExport(de,k.declaration.declarations):this.checkExport(de,k.declaration.id.name,k.declaration.id.start),k.specifiers=[],k.source=null;else{if(k.declaration=null,k.specifiers=this.parseExportSpecifiers(de),this.eatContextual("from"))this.type!==se.string&&this.unexpected(),k.source=this.parseExprAtom();else{for(var Mr=0,qr=k.specifiers;Mr<qr.length;Mr+=1){var kn=qr[Mr];this.checkUnreserved(kn.local),this.checkLocalExport(kn.local)}k.source=null}this.semicolon()}return this.finishNode(k,"ExportNamedDeclaration")},De.checkExport=function(k,de,yt){k&&(Ve(k,de)&&this.raiseRecoverable(yt,"Duplicate export '"+de+"'"),k[de]=!0)},De.checkPatternExport=function(k,de){var yt=de.type;if(yt==="Identifier")this.checkExport(k,de.name,de.start);else if(yt==="ObjectPattern")for(var Ue=0,nr=de.properties;Ue<nr.length;Ue+=1){var Mr=nr[Ue];this.checkPatternExport(k,Mr)}else if(yt==="ArrayPattern")for(var qr=0,kn=de.elements;qr<kn.length;qr+=1){var Nn=kn[qr];Nn&&this.checkPatternExport(k,Nn)}else yt==="Property"?this.checkPatternExport(k,de.value):yt==="AssignmentPattern"?this.checkPatternExport(k,de.left):yt==="RestElement"?this.checkPatternExport(k,de.argument):yt==="ParenthesizedExpression"&&this.checkPatternExport(k,de.expression)},De.checkVariableExport=function(k,de){if(k)for(var yt=0,Ue=de;yt<Ue.length;yt+=1){var nr=Ue[yt];this.checkPatternExport(k,nr.id)}},De.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},De.parseExportSpecifiers=function(k){var de=[],yt=!0;for(this.expect(se.braceL);!this.eat(se.braceR);){if(yt)yt=!1;else if(this.expect(se.comma),this.afterTrailingComma(se.braceR))break;var Ue=this.startNode();Ue.local=this.parseIdent(!0),Ue.exported=this.eatContextual("as")?this.parseIdent(!0):Ue.local,this.checkExport(k,Ue.exported.name,Ue.exported.start),de.push(this.finishNode(Ue,"ExportSpecifier"))}return de},De.parseImport=function(k){return this.next(),this.type===se.string?(k.specifiers=Ct,k.source=this.parseExprAtom()):(k.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),k.source=this.type===se.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(k,"ImportDeclaration")},De.parseImportSpecifiers=function(){var k=[],de=!0;if(this.type===se.name){var yt=this.startNode();if(yt.local=this.parseIdent(),this.checkLVal(yt.local,He),k.push(this.finishNode(yt,"ImportDefaultSpecifier")),!this.eat(se.comma))return k}if(this.type===se.star){var Ue=this.startNode();return this.next(),this.expectContextual("as"),Ue.local=this.parseIdent(),this.checkLVal(Ue.local,He),k.push(this.finishNode(Ue,"ImportNamespaceSpecifier")),k}for(this.expect(se.braceL);!this.eat(se.braceR);){if(de)de=!1;else if(this.expect(se.comma),this.afterTrailingComma(se.braceR))break;var nr=this.startNode();nr.imported=this.parseIdent(!0),this.eatContextual("as")?nr.local=this.parseIdent():(this.checkUnreserved(nr.imported),nr.local=nr.imported),this.checkLVal(nr.local,He),k.push(this.finishNode(nr,"ImportSpecifier"))}return k},De.adaptDirectivePrologue=function(k){for(var de=0;de<k.length&&this.isDirectiveCandidate(k[de]);++de)k[de].directive=k[de].expression.raw.slice(1,-1)},De.isDirectiveCandidate=function(k){return k.type==="ExpressionStatement"&&k.expression.type==="Literal"&&typeof k.expression.value=="string"&&(this.input[k.start]==='"'||this.input[k.start]==="'")};var Qr=K.prototype;Qr.toAssignable=function(k,de,yt){if(this.options.ecmaVersion>=6&&k)switch(k.type){case"Identifier":this.inAsync&&k.name==="await"&&this.raise(k.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":k.type="ObjectPattern",yt&&this.checkPatternErrors(yt,!0);for(var Ue=0,nr=k.properties;Ue<nr.length;Ue+=1){var Mr=nr[Ue];this.toAssignable(Mr,de),Mr.type==="RestElement"&&(Mr.argument.type==="ArrayPattern"||Mr.argument.type==="ObjectPattern")&&this.raise(Mr.argument.start,"Unexpected token")}break;case"Property":k.kind!=="init"&&this.raise(k.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(k.value,de);break;case"ArrayExpression":k.type="ArrayPattern",yt&&this.checkPatternErrors(yt,!0),this.toAssignableList(k.elements,de);break;case"SpreadElement":k.type="RestElement",this.toAssignable(k.argument,de),k.argument.type==="AssignmentPattern"&&this.raise(k.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":k.operator!=="="&&this.raise(k.left.end,"Only '=' operator can be used for specifying default value."),k.type="AssignmentPattern",delete k.operator,this.toAssignable(k.left,de);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(k.expression,de,yt);break;case"ChainExpression":this.raiseRecoverable(k.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!de)break;default:this.raise(k.start,"Assigning to rvalue")}else yt&&this.checkPatternErrors(yt,!0);return k},Qr.toAssignableList=function(k,de){for(var yt=k.length,Ue=0;Ue<yt;Ue++){var nr=k[Ue];nr&&this.toAssignable(nr,de)}if(yt){var Mr=k[yt-1];this.options.ecmaVersion===6&&de&&Mr&&Mr.type==="RestElement"&&Mr.argument.type!=="Identifier"&&this.unexpected(Mr.argument.start)}return k},Qr.parseSpread=function(k){var de=this.startNode();return this.next(),de.argument=this.parseMaybeAssign(!1,k),this.finishNode(de,"SpreadElement")},Qr.parseRestBinding=function(){var k=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==se.name&&this.unexpected(),k.argument=this.parseBindingAtom(),this.finishNode(k,"RestElement")},Qr.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case se.bracketL:var k=this.startNode();return this.next(),k.elements=this.parseBindingList(se.bracketR,!0,!0),this.finishNode(k,"ArrayPattern");case se.braceL:return this.parseObj(!0)}return this.parseIdent()},Qr.parseBindingList=function(k,de,yt){for(var Ue=[],nr=!0;!this.eat(k);)if(nr?nr=!1:this.expect(se.comma),de&&this.type===se.comma)Ue.push(null);else{if(yt&&this.afterTrailingComma(k))break;if(this.type===se.ellipsis){var Mr=this.parseRestBinding();this.parseBindingListItem(Mr),Ue.push(Mr),this.type===se.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(k);break}else{var qr=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(qr),Ue.push(qr)}}return Ue},Qr.parseBindingListItem=function(k){return k},Qr.parseMaybeDefault=function(k,de,yt){if(yt=yt||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(se.eq))return yt;var Ue=this.startNodeAt(k,de);return Ue.left=yt,Ue.right=this.parseMaybeAssign(),this.finishNode(Ue,"AssignmentPattern")},Qr.checkLVal=function(k,de,yt){switch(de===void 0&&(de=Zt),k.type){case"Identifier":de===He&&k.name==="let"&&this.raiseRecoverable(k.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(k.name)&&this.raiseRecoverable(k.start,(de?"Binding ":"Assigning to ")+k.name+" in strict mode"),yt&&(Ve(yt,k.name)&&this.raiseRecoverable(k.start,"Argument name clash"),yt[k.name]=!0),de!==Zt&&de!==J&&this.declareName(k.name,de,k.start);break;case"ChainExpression":this.raiseRecoverable(k.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":de&&this.raiseRecoverable(k.start,"Binding member expression");break;case"ObjectPattern":for(var Ue=0,nr=k.properties;Ue<nr.length;Ue+=1){var Mr=nr[Ue];this.checkLVal(Mr,de,yt)}break;case"Property":this.checkLVal(k.value,de,yt);break;case"ArrayPattern":for(var qr=0,kn=k.elements;qr<kn.length;qr+=1){var Nn=kn[qr];Nn&&this.checkLVal(Nn,de,yt)}break;case"AssignmentPattern":this.checkLVal(k.left,de,yt);break;case"RestElement":this.checkLVal(k.argument,de,yt);break;case"ParenthesizedExpression":this.checkLVal(k.expression,de,yt);break;default:this.raise(k.start,(de?"Binding":"Assigning to")+" rvalue")}};var Mt=K.prototype;Mt.checkPropClash=function(k,de,yt){if(!(this.options.ecmaVersion>=9&&k.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(k.computed||k.method||k.shorthand))){var Ue=k.key,nr;switch(Ue.type){case"Identifier":nr=Ue.name;break;case"Literal":nr=String(Ue.value);break;default:return}var Mr=k.kind;if(this.options.ecmaVersion>=6){nr==="__proto__"&&Mr==="init"&&(de.proto&&(yt?yt.doubleProto<0&&(yt.doubleProto=Ue.start):this.raiseRecoverable(Ue.start,"Redefinition of __proto__ property")),de.proto=!0);return}nr="$"+nr;var qr=de[nr];if(qr){var kn;Mr==="init"?kn=this.strict&&qr.init||qr.get||qr.set:kn=qr.init||qr[Mr],kn&&this.raiseRecoverable(Ue.start,"Redefinition of property")}else qr=de[nr]={init:!1,get:!1,set:!1};qr[Mr]=!0}},Mt.parseExpression=function(k,de){var yt=this.start,Ue=this.startLoc,nr=this.parseMaybeAssign(k,de);if(this.type===se.comma){var Mr=this.startNodeAt(yt,Ue);for(Mr.expressions=[nr];this.eat(se.comma);)Mr.expressions.push(this.parseMaybeAssign(k,de));return this.finishNode(Mr,"SequenceExpression")}return nr},Mt.parseMaybeAssign=function(k,de,yt){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(k);this.exprAllowed=!1}var Ue=!1,nr=-1,Mr=-1;de?(nr=de.parenthesizedAssign,Mr=de.trailingComma,de.parenthesizedAssign=de.trailingComma=-1):(de=new W,Ue=!0);var qr=this.start,kn=this.startLoc;(this.type===se.parenL||this.type===se.name)&&(this.potentialArrowAt=this.start);var Nn=this.parseMaybeConditional(k,de);if(yt&&(Nn=yt.call(this,Nn,qr,kn)),this.type.isAssign){var Mi=this.startNodeAt(qr,kn);return Mi.operator=this.value,Mi.left=this.type===se.eq?this.toAssignable(Nn,!1,de):Nn,Ue||(de.parenthesizedAssign=de.trailingComma=de.doubleProto=-1),de.shorthandAssign>=Mi.left.start&&(de.shorthandAssign=-1),this.checkLVal(Nn),this.next(),Mi.right=this.parseMaybeAssign(k),this.finishNode(Mi,"AssignmentExpression")}else Ue&&this.checkExpressionErrors(de,!0);return nr>-1&&(de.parenthesizedAssign=nr),Mr>-1&&(de.trailingComma=Mr),Nn},Mt.parseMaybeConditional=function(k,de){var yt=this.start,Ue=this.startLoc,nr=this.parseExprOps(k,de);if(this.checkExpressionErrors(de))return nr;if(this.eat(se.question)){var Mr=this.startNodeAt(yt,Ue);return Mr.test=nr,Mr.consequent=this.parseMaybeAssign(),this.expect(se.colon),Mr.alternate=this.parseMaybeAssign(k),this.finishNode(Mr,"ConditionalExpression")}return nr},Mt.parseExprOps=function(k,de){var yt=this.start,Ue=this.startLoc,nr=this.parseMaybeUnary(de,!1);return this.checkExpressionErrors(de)||nr.start===yt&&nr.type==="ArrowFunctionExpression"?nr:this.parseExprOp(nr,yt,Ue,-1,k)},Mt.parseExprOp=function(k,de,yt,Ue,nr){var Mr=this.type.binop;if(Mr!=null&&(!nr||this.type!==se._in)&&Mr>Ue){var qr=this.type===se.logicalOR||this.type===se.logicalAND,kn=this.type===se.coalesce;kn&&(Mr=se.logicalAND.binop);var Nn=this.value;this.next();var Mi=this.start,Bi=this.startLoc,io=this.parseExprOp(this.parseMaybeUnary(null,!1),Mi,Bi,Mr,nr),co=this.buildBinary(de,yt,k,io,Nn,qr||kn);return(qr&&this.type===se.coalesce||kn&&(this.type===se.logicalOR||this.type===se.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(co,de,yt,Ue,nr)}return k},Mt.buildBinary=function(k,de,yt,Ue,nr,Mr){var qr=this.startNodeAt(k,de);return qr.left=yt,qr.operator=nr,qr.right=Ue,this.finishNode(qr,Mr?"LogicalExpression":"BinaryExpression")},Mt.parseMaybeUnary=function(k,de){var yt=this.start,Ue=this.startLoc,nr;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))nr=this.parseAwait(),de=!0;else if(this.type.prefix){var Mr=this.startNode(),qr=this.type===se.incDec;Mr.operator=this.value,Mr.prefix=!0,this.next(),Mr.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(k,!0),qr?this.checkLVal(Mr.argument):this.strict&&Mr.operator==="delete"&&Mr.argument.type==="Identifier"?this.raiseRecoverable(Mr.start,"Deleting local variable in strict mode"):de=!0,nr=this.finishNode(Mr,qr?"UpdateExpression":"UnaryExpression")}else{if(nr=this.parseExprSubscripts(k),this.checkExpressionErrors(k))return nr;for(;this.type.postfix&&!this.canInsertSemicolon();){var kn=this.startNodeAt(yt,Ue);kn.operator=this.value,kn.prefix=!1,kn.argument=nr,this.checkLVal(nr),this.next(),nr=this.finishNode(kn,"UpdateExpression")}}return!de&&this.eat(se.starstar)?this.buildBinary(yt,Ue,nr,this.parseMaybeUnary(null,!1),"**",!1):nr},Mt.parseExprSubscripts=function(k){var de=this.start,yt=this.startLoc,Ue=this.parseExprAtom(k);if(Ue.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Ue;var nr=this.parseSubscripts(Ue,de,yt);return k&&nr.type==="MemberExpression"&&(k.parenthesizedAssign>=nr.start&&(k.parenthesizedAssign=-1),k.parenthesizedBind>=nr.start&&(k.parenthesizedBind=-1)),nr},Mt.parseSubscripts=function(k,de,yt,Ue){for(var nr=this.options.ecmaVersion>=8&&k.type==="Identifier"&&k.name==="async"&&this.lastTokEnd===k.end&&!this.canInsertSemicolon()&&k.end-k.start===5&&this.potentialArrowAt===k.start,Mr=!1;;){var qr=this.parseSubscript(k,de,yt,Ue,nr,Mr);if(qr.optional&&(Mr=!0),qr===k||qr.type==="ArrowFunctionExpression"){if(Mr){var kn=this.startNodeAt(de,yt);kn.expression=qr,qr=this.finishNode(kn,"ChainExpression")}return qr}k=qr}},Mt.parseSubscript=function(k,de,yt,Ue,nr,Mr){var qr=this.options.ecmaVersion>=11,kn=qr&&this.eat(se.questionDot);Ue&&kn&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Nn=this.eat(se.bracketL);if(Nn||kn&&this.type!==se.parenL&&this.type!==se.backQuote||this.eat(se.dot)){var Mi=this.startNodeAt(de,yt);Mi.object=k,Mi.property=Nn?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),Mi.computed=!!Nn,Nn&&this.expect(se.bracketR),qr&&(Mi.optional=kn),k=this.finishNode(Mi,"MemberExpression")}else if(!Ue&&this.eat(se.parenL)){var Bi=new W,io=this.yieldPos,co=this.awaitPos,Sa=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ko=this.parseExprList(se.parenR,this.options.ecmaVersion>=8,!1,Bi);if(nr&&!kn&&!this.canInsertSemicolon()&&this.eat(se.arrow))return this.checkPatternErrors(Bi,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=io,this.awaitPos=co,this.awaitIdentPos=Sa,this.parseArrowExpression(this.startNodeAt(de,yt),Ko,!0);this.checkExpressionErrors(Bi,!0),this.yieldPos=io||this.yieldPos,this.awaitPos=co||this.awaitPos,this.awaitIdentPos=Sa||this.awaitIdentPos;var wo=this.startNodeAt(de,yt);wo.callee=k,wo.arguments=Ko,qr&&(wo.optional=kn),k=this.finishNode(wo,"CallExpression")}else if(this.type===se.backQuote){(kn||Mr)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Oo=this.startNodeAt(de,yt);Oo.tag=k,Oo.quasi=this.parseTemplate({isTagged:!0}),k=this.finishNode(Oo,"TaggedTemplateExpression")}return k},Mt.parseExprAtom=function(k){this.type===se.slash&&this.readRegexp();var de,yt=this.potentialArrowAt===this.start;switch(this.type){case se._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),de=this.startNode(),this.next(),this.type===se.parenL&&!this.allowDirectSuper&&this.raise(de.start,"super() call outside constructor of a subclass"),this.type!==se.dot&&this.type!==se.bracketL&&this.type!==se.parenL&&this.unexpected(),this.finishNode(de,"Super");case se._this:return de=this.startNode(),this.next(),this.finishNode(de,"ThisExpression");case se.name:var Ue=this.start,nr=this.startLoc,Mr=this.containsEsc,qr=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Mr&&qr.name==="async"&&!this.canInsertSemicolon()&&this.eat(se._function))return this.parseFunction(this.startNodeAt(Ue,nr),0,!1,!0);if(yt&&!this.canInsertSemicolon()){if(this.eat(se.arrow))return this.parseArrowExpression(this.startNodeAt(Ue,nr),[qr],!1);if(this.options.ecmaVersion>=8&&qr.name==="async"&&this.type===se.name&&!Mr)return qr=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(se.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Ue,nr),[qr],!0)}return qr;case se.regexp:var kn=this.value;return de=this.parseLiteral(kn.value),de.regex={pattern:kn.pattern,flags:kn.flags},de;case se.num:case se.string:return this.parseLiteral(this.value);case se._null:case se._true:case se._false:return de=this.startNode(),de.value=this.type===se._null?null:this.type===se._true,de.raw=this.type.keyword,this.next(),this.finishNode(de,"Literal");case se.parenL:var Nn=this.start,Mi=this.parseParenAndDistinguishExpression(yt);return k&&(k.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Mi)&&(k.parenthesizedAssign=Nn),k.parenthesizedBind<0&&(k.parenthesizedBind=Nn)),Mi;case se.bracketL:return de=this.startNode(),this.next(),de.elements=this.parseExprList(se.bracketR,!0,!0,k),this.finishNode(de,"ArrayExpression");case se.braceL:return this.parseObj(!1,k);case se._function:return de=this.startNode(),this.next(),this.parseFunction(de,0);case se._class:return this.parseClass(this.startNode(),!1);case se._new:return this.parseNew();case se.backQuote:return this.parseTemplate();case se._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Mt.parseExprImport=function(){var k=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var de=this.parseIdent(!0);switch(this.type){case se.parenL:return this.parseDynamicImport(k);case se.dot:return k.meta=de,this.parseImportMeta(k);default:this.unexpected()}},Mt.parseDynamicImport=function(k){if(this.next(),k.source=this.parseMaybeAssign(),!this.eat(se.parenR)){var de=this.start;this.eat(se.comma)&&this.eat(se.parenR)?this.raiseRecoverable(de,"Trailing comma is not allowed in import()"):this.unexpected(de)}return this.finishNode(k,"ImportExpression")},Mt.parseImportMeta=function(k){this.next();var de=this.containsEsc;return k.property=this.parseIdent(!0),k.property.name!=="meta"&&this.raiseRecoverable(k.property.start,"The only valid meta property for import is 'import.meta'"),de&&this.raiseRecoverable(k.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(k.start,"Cannot use 'import.meta' outside a module"),this.finishNode(k,"MetaProperty")},Mt.parseLiteral=function(k){var de=this.startNode();return de.value=k,de.raw=this.input.slice(this.start,this.end),de.raw.charCodeAt(de.raw.length-1)===110&&(de.bigint=de.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(de,"Literal")},Mt.parseParenExpression=function(){this.expect(se.parenL);var k=this.parseExpression();return this.expect(se.parenR),k},Mt.parseParenAndDistinguishExpression=function(k){var de=this.start,yt=this.startLoc,Ue,nr=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Mr=this.start,qr=this.startLoc,kn=[],Nn=!0,Mi=!1,Bi=new W,io=this.yieldPos,co=this.awaitPos,Sa;for(this.yieldPos=0,this.awaitPos=0;this.type!==se.parenR;)if(Nn?Nn=!1:this.expect(se.comma),nr&&this.afterTrailingComma(se.parenR,!0)){Mi=!0;break}else if(this.type===se.ellipsis){Sa=this.start,kn.push(this.parseParenItem(this.parseRestBinding())),this.type===se.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else kn.push(this.parseMaybeAssign(!1,Bi,this.parseParenItem));var Ko=this.start,wo=this.startLoc;if(this.expect(se.parenR),k&&!this.canInsertSemicolon()&&this.eat(se.arrow))return this.checkPatternErrors(Bi,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=io,this.awaitPos=co,this.parseParenArrowList(de,yt,kn);(!kn.length||Mi)&&this.unexpected(this.lastTokStart),Sa&&this.unexpected(Sa),this.checkExpressionErrors(Bi,!0),this.yieldPos=io||this.yieldPos,this.awaitPos=co||this.awaitPos,kn.length>1?(Ue=this.startNodeAt(Mr,qr),Ue.expressions=kn,this.finishNodeAt(Ue,"SequenceExpression",Ko,wo)):Ue=kn[0]}else Ue=this.parseParenExpression();if(this.options.preserveParens){var Oo=this.startNodeAt(de,yt);return Oo.expression=Ue,this.finishNode(Oo,"ParenthesizedExpression")}else return Ue},Mt.parseParenItem=function(k){return k},Mt.parseParenArrowList=function(k,de,yt){return this.parseArrowExpression(this.startNodeAt(k,de),yt)};var br=[];Mt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var k=this.startNode(),de=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(se.dot)){k.meta=de;var yt=this.containsEsc;return k.property=this.parseIdent(!0),k.property.name!=="target"&&this.raiseRecoverable(k.property.start,"The only valid meta property for new is 'new.target'"),yt&&this.raiseRecoverable(k.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(k.start,"'new.target' can only be used in functions"),this.finishNode(k,"MetaProperty")}var Ue=this.start,nr=this.startLoc,Mr=this.type===se._import;return k.callee=this.parseSubscripts(this.parseExprAtom(),Ue,nr,!0),Mr&&k.callee.type==="ImportExpression"&&this.raise(Ue,"Cannot use new with import()"),this.eat(se.parenL)?k.arguments=this.parseExprList(se.parenR,this.options.ecmaVersion>=8,!1):k.arguments=br,this.finishNode(k,"NewExpression")},Mt.parseTemplateElement=function(k){var de=k.isTagged,yt=this.startNode();return this.type===se.invalidTemplate?(de||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),yt.value={raw:this.value,cooked:null}):yt.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),yt.tail=this.type===se.backQuote,this.finishNode(yt,"TemplateElement")},Mt.parseTemplate=function(k){k===void 0&&(k={});var de=k.isTagged;de===void 0&&(de=!1);var yt=this.startNode();this.next(),yt.expressions=[];var Ue=this.parseTemplateElement({isTagged:de});for(yt.quasis=[Ue];!Ue.tail;)this.type===se.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(se.dollarBraceL),yt.expressions.push(this.parseExpression()),this.expect(se.braceR),yt.quasis.push(Ue=this.parseTemplateElement({isTagged:de}));return this.next(),this.finishNode(yt,"TemplateLiteral")},Mt.isAsyncProp=function(k){return!k.computed&&k.key.type==="Identifier"&&k.key.name==="async"&&(this.type===se.name||this.type===se.num||this.type===se.string||this.type===se.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===se.star)&&!qe.test(this.input.slice(this.lastTokEnd,this.start))},Mt.parseObj=function(k,de){var yt=this.startNode(),Ue=!0,nr={};for(yt.properties=[],this.next();!this.eat(se.braceR);){if(Ue)Ue=!1;else if(this.expect(se.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(se.braceR))break;var Mr=this.parseProperty(k,de);k||this.checkPropClash(Mr,nr,de),yt.properties.push(Mr)}return this.finishNode(yt,k?"ObjectPattern":"ObjectExpression")},Mt.parseProperty=function(k,de){var yt=this.startNode(),Ue,nr,Mr,qr;if(this.options.ecmaVersion>=9&&this.eat(se.ellipsis))return k?(yt.argument=this.parseIdent(!1),this.type===se.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(yt,"RestElement")):(this.type===se.parenL&&de&&(de.parenthesizedAssign<0&&(de.parenthesizedAssign=this.start),de.parenthesizedBind<0&&(de.parenthesizedBind=this.start)),yt.argument=this.parseMaybeAssign(!1,de),this.type===se.comma&&de&&de.trailingComma<0&&(de.trailingComma=this.start),this.finishNode(yt,"SpreadElement"));this.options.ecmaVersion>=6&&(yt.method=!1,yt.shorthand=!1,(k||de)&&(Mr=this.start,qr=this.startLoc),k||(Ue=this.eat(se.star)));var kn=this.containsEsc;return this.parsePropertyName(yt),!k&&!kn&&this.options.ecmaVersion>=8&&!Ue&&this.isAsyncProp(yt)?(nr=!0,Ue=this.options.ecmaVersion>=9&&this.eat(se.star),this.parsePropertyName(yt,de)):nr=!1,this.parsePropertyValue(yt,k,Ue,nr,Mr,qr,de,kn),this.finishNode(yt,"Property")},Mt.parsePropertyValue=function(k,de,yt,Ue,nr,Mr,qr,kn){if((yt||Ue)&&this.type===se.colon&&this.unexpected(),this.eat(se.colon))k.value=de?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,qr),k.kind="init";else if(this.options.ecmaVersion>=6&&this.type===se.parenL)de&&this.unexpected(),k.kind="init",k.method=!0,k.value=this.parseMethod(yt,Ue);else if(!de&&!kn&&this.options.ecmaVersion>=5&&!k.computed&&k.key.type==="Identifier"&&(k.key.name==="get"||k.key.name==="set")&&this.type!==se.comma&&this.type!==se.braceR&&this.type!==se.eq){(yt||Ue)&&this.unexpected(),k.kind=k.key.name,this.parsePropertyName(k),k.value=this.parseMethod(!1);var Nn=k.kind==="get"?0:1;if(k.value.params.length!==Nn){var Mi=k.value.start;k.kind==="get"?this.raiseRecoverable(Mi,"getter should have no params"):this.raiseRecoverable(Mi,"setter should have exactly one param")}else k.kind==="set"&&k.value.params[0].type==="RestElement"&&this.raiseRecoverable(k.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!k.computed&&k.key.type==="Identifier"?((yt||Ue)&&this.unexpected(),this.checkUnreserved(k.key),k.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=nr),k.kind="init",de?k.value=this.parseMaybeDefault(nr,Mr,k.key):this.type===se.eq&&qr?(qr.shorthandAssign<0&&(qr.shorthandAssign=this.start),k.value=this.parseMaybeDefault(nr,Mr,k.key)):k.value=k.key,k.shorthand=!0):this.unexpected()},Mt.parsePropertyName=function(k){if(this.options.ecmaVersion>=6){if(this.eat(se.bracketL))return k.computed=!0,k.key=this.parseMaybeAssign(),this.expect(se.bracketR),k.key;k.computed=!1}return k.key=this.type===se.num||this.type===se.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Mt.initFunction=function(k){k.id=null,this.options.ecmaVersion>=6&&(k.generator=k.expression=!1),this.options.ecmaVersion>=8&&(k.async=!1)},Mt.parseMethod=function(k,de,yt){var Ue=this.startNode(),nr=this.yieldPos,Mr=this.awaitPos,qr=this.awaitIdentPos;return this.initFunction(Ue),this.options.ecmaVersion>=6&&(Ue.generator=k),this.options.ecmaVersion>=8&&(Ue.async=!!de),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Et(de,Ue.generator)|Ut|(yt?lt:0)),this.expect(se.parenL),Ue.params=this.parseBindingList(se.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Ue,!1,!0),this.yieldPos=nr,this.awaitPos=Mr,this.awaitIdentPos=qr,this.finishNode(Ue,"FunctionExpression")},Mt.parseArrowExpression=function(k,de,yt){var Ue=this.yieldPos,nr=this.awaitPos,Mr=this.awaitIdentPos;return this.enterScope(Et(yt,!1)|Lt),this.initFunction(k),this.options.ecmaVersion>=8&&(k.async=!!yt),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,k.params=this.toAssignableList(de,!0),this.parseFunctionBody(k,!0,!1),this.yieldPos=Ue,this.awaitPos=nr,this.awaitIdentPos=Mr,this.finishNode(k,"ArrowFunctionExpression")},Mt.parseFunctionBody=function(k,de,yt){var Ue=de&&this.type!==se.braceL,nr=this.strict,Mr=!1;if(Ue)k.body=this.parseMaybeAssign(),k.expression=!0,this.checkParams(k,!1);else{var qr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(k.params);(!nr||qr)&&(Mr=this.strictDirective(this.end),Mr&&qr&&this.raiseRecoverable(k.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var kn=this.labels;this.labels=[],Mr&&(this.strict=!0),this.checkParams(k,!nr&&!Mr&&!de&&!yt&&this.isSimpleParamList(k.params)),this.strict&&k.id&&this.checkLVal(k.id,J),k.body=this.parseBlock(!1,void 0,Mr&&!nr),k.expression=!1,this.adaptDirectivePrologue(k.body.body),this.labels=kn}this.exitScope()},Mt.isSimpleParamList=function(k){for(var de=0,yt=k;de<yt.length;de+=1){var Ue=yt[de];if(Ue.type!=="Identifier")return!1}return!0},Mt.checkParams=function(k,de){for(var yt={},Ue=0,nr=k.params;Ue<nr.length;Ue+=1){var Mr=nr[Ue];this.checkLVal(Mr,Be,de?null:yt)}},Mt.parseExprList=function(k,de,yt,Ue){for(var nr=[],Mr=!0;!this.eat(k);){if(Mr)Mr=!1;else if(this.expect(se.comma),de&&this.afterTrailingComma(k))break;var qr=void 0;yt&&this.type===se.comma?qr=null:this.type===se.ellipsis?(qr=this.parseSpread(Ue),Ue&&this.type===se.comma&&Ue.trailingComma<0&&(Ue.trailingComma=this.start)):qr=this.parseMaybeAssign(!1,Ue),nr.push(qr)}return nr},Mt.checkUnreserved=function(k){var de=k.start,yt=k.end,Ue=k.name;if(this.inGenerator&&Ue==="yield"&&this.raiseRecoverable(de,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Ue==="await"&&this.raiseRecoverable(de,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(Ue)&&this.raise(de,"Unexpected keyword '"+Ue+"'"),!(this.options.ecmaVersion<6&&this.input.slice(de,yt).indexOf("\\")!==-1)){var nr=this.strict?this.reservedWordsStrict:this.reservedWords;nr.test(Ue)&&(!this.inAsync&&Ue==="await"&&this.raiseRecoverable(de,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(de,"The keyword '"+Ue+"' is reserved"))}},Mt.parseIdent=function(k,de){var yt=this.startNode();return this.type===se.name?yt.name=this.value:this.type.keyword?(yt.name=this.type.keyword,(yt.name==="class"||yt.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!k),this.finishNode(yt,"Identifier"),k||(this.checkUnreserved(yt),yt.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=yt.start)),yt},Mt.parseYield=function(k){this.yieldPos||(this.yieldPos=this.start);var de=this.startNode();return this.next(),this.type===se.semi||this.canInsertSemicolon()||this.type!==se.star&&!this.type.startsExpr?(de.delegate=!1,de.argument=null):(de.delegate=this.eat(se.star),de.argument=this.parseMaybeAssign(k)),this.finishNode(de,"YieldExpression")},Mt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var k=this.startNode();return this.next(),k.argument=this.parseMaybeUnary(null,!1),this.finishNode(k,"AwaitExpression")};var Nt=K.prototype;Nt.raise=function(k,de){var yt=st(this.input,k);de+=" ("+yt.line+":"+yt.column+")";var Ue=new SyntaxError(de);throw Ue.pos=k,Ue.loc=yt,Ue.raisedAt=this.pos,Ue},Nt.raiseRecoverable=Nt.raise,Nt.curPosition=function(){if(this.options.locations)return new Le(this.curLine,this.pos-this.lineStart)};var Pr=K.prototype,_r=function(de){this.flags=de,this.var=[],this.lexical=[],this.functions=[]};Pr.enterScope=function(k){this.scopeStack.push(new _r(k))},Pr.exitScope=function(){this.scopeStack.pop()},Pr.treatFunctionsAsVarInScope=function(k){return k.flags&ur||!this.inModule&&k.flags&$t},Pr.declareName=function(k,de,yt){var Ue=!1;if(de===He){var nr=this.currentScope();Ue=nr.lexical.indexOf(k)>-1||nr.functions.indexOf(k)>-1||nr.var.indexOf(k)>-1,nr.lexical.push(k),this.inModule&&nr.flags&$t&&delete this.undefinedExports[k]}else if(de===Z){var Mr=this.currentScope();Mr.lexical.push(k)}else if(de===ft){var qr=this.currentScope();this.treatFunctionsAsVar?Ue=qr.lexical.indexOf(k)>-1:Ue=qr.lexical.indexOf(k)>-1||qr.var.indexOf(k)>-1,qr.functions.push(k)}else for(var kn=this.scopeStack.length-1;kn>=0;--kn){var Nn=this.scopeStack[kn];if(Nn.lexical.indexOf(k)>-1&&!(Nn.flags&St&&Nn.lexical[0]===k)||!this.treatFunctionsAsVarInScope(Nn)&&Nn.functions.indexOf(k)>-1){Ue=!0;break}if(Nn.var.push(k),this.inModule&&Nn.flags&$t&&delete this.undefinedExports[k],Nn.flags&we)break}Ue&&this.raiseRecoverable(yt,"Identifier '"+k+"' has already been declared")},Pr.checkLocalExport=function(k){this.scopeStack[0].lexical.indexOf(k.name)===-1&&this.scopeStack[0].var.indexOf(k.name)===-1&&(this.undefinedExports[k.name]=k)},Pr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Pr.currentVarScope=function(){for(var k=this.scopeStack.length-1;;k--){var de=this.scopeStack[k];if(de.flags&we)return de}},Pr.currentThisScope=function(){for(var k=this.scopeStack.length-1;;k--){var de=this.scopeStack[k];if(de.flags&we&&!(de.flags&Lt))return de}};var kr=function(de,yt,Ue){this.type="",this.start=yt,this.end=0,de.options.locations&&(this.loc=new Re(de,Ue)),de.options.directSourceFile&&(this.sourceFile=de.options.directSourceFile),de.options.ranges&&(this.range=[yt,0])},zt=K.prototype;zt.startNode=function(){return new kr(this,this.start,this.startLoc)},zt.startNodeAt=function(k,de){return new kr(this,k,de)};function mr(k,de,yt,Ue){return k.type=de,k.end=yt,this.options.locations&&(k.loc.end=Ue),this.options.ranges&&(k.range[1]=yt),k}zt.finishNode=function(k,de){return mr.call(this,k,de,this.lastTokEnd,this.lastTokEndLoc)},zt.finishNodeAt=function(k,de,yt,Ue){return mr.call(this,k,de,yt,Ue)};var Or=function(de,yt,Ue,nr,Mr){this.token=de,this.isExpr=!!yt,this.preserveSpace=!!Ue,this.override=nr,this.generator=!!Mr},X={b_stat:new Or("{",!1),b_expr:new Or("{",!0),b_tmpl:new Or("${",!1),p_stat:new Or("(",!1),p_expr:new Or("(",!0),q_tmpl:new Or("`",!0,!0,function(k){return k.tryReadTemplateToken()}),f_stat:new Or("function",!1),f_expr:new Or("function",!0),f_expr_gen:new Or("function",!0,!1,null,!0),f_gen:new Or("function",!1,!1,null,!0)},Nr=K.prototype;Nr.initialContext=function(){return[X.b_stat]},Nr.braceIsBlock=function(k){var de=this.curContext();return de===X.f_expr||de===X.f_stat?!0:k===se.colon&&(de===X.b_stat||de===X.b_expr)?!de.isExpr:k===se._return||k===se.name&&this.exprAllowed?qe.test(this.input.slice(this.lastTokEnd,this.start)):k===se._else||k===se.semi||k===se.eof||k===se.parenR||k===se.arrow?!0:k===se.braceL?de===X.b_stat:k===se._var||k===se._const||k===se.name?!1:!this.exprAllowed},Nr.inGeneratorContext=function(){for(var k=this.context.length-1;k>=1;k--){var de=this.context[k];if(de.token==="function")return de.generator}return!1},Nr.updateContext=function(k){var de,yt=this.type;yt.keyword&&k===se.dot?this.exprAllowed=!1:(de=yt.updateContext)?de.call(this,k):this.exprAllowed=yt.beforeExpr},se.parenR.updateContext=se.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var k=this.context.pop();k===X.b_stat&&this.curContext().token==="function"&&(k=this.context.pop()),this.exprAllowed=!k.isExpr},se.braceL.updateContext=function(k){this.context.push(this.braceIsBlock(k)?X.b_stat:X.b_expr),this.exprAllowed=!0},se.dollarBraceL.updateContext=function(){this.context.push(X.b_tmpl),this.exprAllowed=!0},se.parenL.updateContext=function(k){var de=k===se._if||k===se._for||k===se._with||k===se._while;this.context.push(de?X.p_stat:X.p_expr),this.exprAllowed=!0},se.incDec.updateContext=function(){},se._function.updateContext=se._class.updateContext=function(k){k.beforeExpr&&k!==se.semi&&k!==se._else&&!(k===se._return&&qe.test(this.input.slice(this.lastTokEnd,this.start)))&&!((k===se.colon||k===se.braceL)&&this.curContext()===X.b_stat)?this.context.push(X.f_expr):this.context.push(X.f_stat),this.exprAllowed=!1},se.backQuote.updateContext=function(){this.curContext()===X.q_tmpl?this.context.pop():this.context.push(X.q_tmpl),this.exprAllowed=!1},se.star.updateContext=function(k){if(k===se._function){var de=this.context.length-1;this.context[de]===X.f_expr?this.context[de]=X.f_expr_gen:this.context[de]=X.f_gen}this.exprAllowed=!0},se.name.updateContext=function(k){var de=!1;this.options.ecmaVersion>=6&&k!==se.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(de=!0),this.exprAllowed=de};var Xe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",xe=Xe+" Extended_Pictographic",rt=xe,kt={9:Xe,10:xe,11:rt},cr="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ar="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Lr=Ar+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",sr=Lr+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ge={9:Ar,10:Lr,11:sr},Gr={};function on(k){var de=Gr[k]={binary:ze(kt[k]+" "+cr),nonBinary:{General_Category:ze(cr),Script:ze(Ge[k])}};de.nonBinary.Script_Extensions=de.nonBinary.Script,de.nonBinary.gc=de.nonBinary.General_Category,de.nonBinary.sc=de.nonBinary.Script,de.nonBinary.scx=de.nonBinary.Script_Extensions}on(9),on(10),on(11);var cn=K.prototype,Dn=function(de){this.parser=de,this.validFlags="gim"+(de.options.ecmaVersion>=6?"uy":"")+(de.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Gr[de.options.ecmaVersion>=11?11:de.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Dn.prototype.reset=function(de,yt,Ue){var nr=Ue.indexOf("u")!==-1;this.start=de|0,this.source=yt+"",this.flags=Ue,this.switchU=nr&&this.parser.options.ecmaVersion>=6,this.switchN=nr&&this.parser.options.ecmaVersion>=9},Dn.prototype.raise=function(de){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+de)},Dn.prototype.at=function(de,yt){yt===void 0&&(yt=!1);var Ue=this.source,nr=Ue.length;if(de>=nr)return-1;var Mr=Ue.charCodeAt(de);if(!(yt||this.switchU)||Mr<=55295||Mr>=57344||de+1>=nr)return Mr;var qr=Ue.charCodeAt(de+1);return qr>=56320&&qr<=57343?(Mr<<10)+qr-56613888:Mr},Dn.prototype.nextIndex=function(de,yt){yt===void 0&&(yt=!1);var Ue=this.source,nr=Ue.length;if(de>=nr)return nr;var Mr=Ue.charCodeAt(de),qr;return!(yt||this.switchU)||Mr<=55295||Mr>=57344||de+1>=nr||(qr=Ue.charCodeAt(de+1))<56320||qr>57343?de+1:de+2},Dn.prototype.current=function(de){return de===void 0&&(de=!1),this.at(this.pos,de)},Dn.prototype.lookahead=function(de){return de===void 0&&(de=!1),this.at(this.nextIndex(this.pos,de),de)},Dn.prototype.advance=function(de){de===void 0&&(de=!1),this.pos=this.nextIndex(this.pos,de)},Dn.prototype.eat=function(de,yt){return yt===void 0&&(yt=!1),this.current(yt)===de?(this.advance(yt),!0):!1};function ci(k){return k<=65535?String.fromCharCode(k):(k-=65536,String.fromCharCode((k>>10)+55296,(k&1023)+56320))}cn.validateRegExpFlags=function(k){for(var de=k.validFlags,yt=k.flags,Ue=0;Ue<yt.length;Ue++){var nr=yt.charAt(Ue);de.indexOf(nr)===-1&&this.raise(k.start,"Invalid regular expression flag"),yt.indexOf(nr,Ue+1)>-1&&this.raise(k.start,"Duplicate regular expression flag")}},cn.validateRegExpPattern=function(k){this.regexp_pattern(k),!k.switchN&&this.options.ecmaVersion>=9&&k.groupNames.length>0&&(k.switchN=!0,this.regexp_pattern(k))},cn.regexp_pattern=function(k){k.pos=0,k.lastIntValue=0,k.lastStringValue="",k.lastAssertionIsQuantifiable=!1,k.numCapturingParens=0,k.maxBackReference=0,k.groupNames.length=0,k.backReferenceNames.length=0,this.regexp_disjunction(k),k.pos!==k.source.length&&(k.eat(41)&&k.raise("Unmatched ')'"),(k.eat(93)||k.eat(125))&&k.raise("Lone quantifier brackets")),k.maxBackReference>k.numCapturingParens&&k.raise("Invalid escape");for(var de=0,yt=k.backReferenceNames;de<yt.length;de+=1){var Ue=yt[de];k.groupNames.indexOf(Ue)===-1&&k.raise("Invalid named capture referenced")}},cn.regexp_disjunction=function(k){for(this.regexp_alternative(k);k.eat(124);)this.regexp_alternative(k);this.regexp_eatQuantifier(k,!0)&&k.raise("Nothing to repeat"),k.eat(123)&&k.raise("Lone quantifier brackets")},cn.regexp_alternative=function(k){for(;k.pos<k.source.length&&this.regexp_eatTerm(k););},cn.regexp_eatTerm=function(k){return this.regexp_eatAssertion(k)?(k.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(k)&&k.switchU&&k.raise("Invalid quantifier"),!0):(k.switchU?this.regexp_eatAtom(k):this.regexp_eatExtendedAtom(k))?(this.regexp_eatQuantifier(k),!0):!1},cn.regexp_eatAssertion=function(k){var de=k.pos;if(k.lastAssertionIsQuantifiable=!1,k.eat(94)||k.eat(36))return!0;if(k.eat(92)){if(k.eat(66)||k.eat(98))return!0;k.pos=de}if(k.eat(40)&&k.eat(63)){var yt=!1;if(this.options.ecmaVersion>=9&&(yt=k.eat(60)),k.eat(61)||k.eat(33))return this.regexp_disjunction(k),k.eat(41)||k.raise("Unterminated group"),k.lastAssertionIsQuantifiable=!yt,!0}return k.pos=de,!1},cn.regexp_eatQuantifier=function(k,de){return de===void 0&&(de=!1),this.regexp_eatQuantifierPrefix(k,de)?(k.eat(63),!0):!1},cn.regexp_eatQuantifierPrefix=function(k,de){return k.eat(42)||k.eat(43)||k.eat(63)||this.regexp_eatBracedQuantifier(k,de)},cn.regexp_eatBracedQuantifier=function(k,de){var yt=k.pos;if(k.eat(123)){var Ue=0,nr=-1;if(this.regexp_eatDecimalDigits(k)&&(Ue=k.lastIntValue,k.eat(44)&&this.regexp_eatDecimalDigits(k)&&(nr=k.lastIntValue),k.eat(125)))return nr!==-1&&nr<Ue&&!de&&k.raise("numbers out of order in {} quantifier"),!0;k.switchU&&!de&&k.raise("Incomplete quantifier"),k.pos=yt}return!1},cn.regexp_eatAtom=function(k){return this.regexp_eatPatternCharacters(k)||k.eat(46)||this.regexp_eatReverseSolidusAtomEscape(k)||this.regexp_eatCharacterClass(k)||this.regexp_eatUncapturingGroup(k)||this.regexp_eatCapturingGroup(k)},cn.regexp_eatReverseSolidusAtomEscape=function(k){var de=k.pos;if(k.eat(92)){if(this.regexp_eatAtomEscape(k))return!0;k.pos=de}return!1},cn.regexp_eatUncapturingGroup=function(k){var de=k.pos;if(k.eat(40)){if(k.eat(63)&&k.eat(58)){if(this.regexp_disjunction(k),k.eat(41))return!0;k.raise("Unterminated group")}k.pos=de}return!1},cn.regexp_eatCapturingGroup=function(k){if(k.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(k):k.current()===63&&k.raise("Invalid group"),this.regexp_disjunction(k),k.eat(41))return k.numCapturingParens+=1,!0;k.raise("Unterminated group")}return!1},cn.regexp_eatExtendedAtom=function(k){return k.eat(46)||this.regexp_eatReverseSolidusAtomEscape(k)||this.regexp_eatCharacterClass(k)||this.regexp_eatUncapturingGroup(k)||this.regexp_eatCapturingGroup(k)||this.regexp_eatInvalidBracedQuantifier(k)||this.regexp_eatExtendedPatternCharacter(k)},cn.regexp_eatInvalidBracedQuantifier=function(k){return this.regexp_eatBracedQuantifier(k,!0)&&k.raise("Nothing to repeat"),!1},cn.regexp_eatSyntaxCharacter=function(k){var de=k.current();return ia(de)?(k.lastIntValue=de,k.advance(),!0):!1};function ia(k){return k===36||k>=40&&k<=43||k===46||k===63||k>=91&&k<=94||k>=123&&k<=125}cn.regexp_eatPatternCharacters=function(k){for(var de=k.pos,yt=0;(yt=k.current())!==-1&&!ia(yt);)k.advance();return k.pos!==de},cn.regexp_eatExtendedPatternCharacter=function(k){var de=k.current();return de!==-1&&de!==36&&!(de>=40&&de<=43)&&de!==46&&de!==63&&de!==91&&de!==94&&de!==124?(k.advance(),!0):!1},cn.regexp_groupSpecifier=function(k){if(k.eat(63)){if(this.regexp_eatGroupName(k)){k.groupNames.indexOf(k.lastStringValue)!==-1&&k.raise("Duplicate capture group name"),k.groupNames.push(k.lastStringValue);return}k.raise("Invalid group")}},cn.regexp_eatGroupName=function(k){if(k.lastStringValue="",k.eat(60)){if(this.regexp_eatRegExpIdentifierName(k)&&k.eat(62))return!0;k.raise("Invalid capture group name")}return!1},cn.regexp_eatRegExpIdentifierName=function(k){if(k.lastStringValue="",this.regexp_eatRegExpIdentifierStart(k)){for(k.lastStringValue+=ci(k.lastIntValue);this.regexp_eatRegExpIdentifierPart(k);)k.lastStringValue+=ci(k.lastIntValue);return!0}return!1},cn.regexp_eatRegExpIdentifierStart=function(k){var de=k.pos,yt=this.options.ecmaVersion>=11,Ue=k.current(yt);return k.advance(yt),Ue===92&&this.regexp_eatRegExpUnicodeEscapeSequence(k,yt)&&(Ue=k.lastIntValue),Vi(Ue)?(k.lastIntValue=Ue,!0):(k.pos=de,!1)};function Vi(k){return re(k,!0)||k===36||k===95}cn.regexp_eatRegExpIdentifierPart=function(k){var de=k.pos,yt=this.options.ecmaVersion>=11,Ue=k.current(yt);return k.advance(yt),Ue===92&&this.regexp_eatRegExpUnicodeEscapeSequence(k,yt)&&(Ue=k.lastIntValue),On(Ue)?(k.lastIntValue=Ue,!0):(k.pos=de,!1)};function On(k){return pe(k,!0)||k===36||k===95||k===8204||k===8205}cn.regexp_eatAtomEscape=function(k){return this.regexp_eatBackReference(k)||this.regexp_eatCharacterClassEscape(k)||this.regexp_eatCharacterEscape(k)||k.switchN&&this.regexp_eatKGroupName(k)?!0:(k.switchU&&(k.current()===99&&k.raise("Invalid unicode escape"),k.raise("Invalid escape")),!1)},cn.regexp_eatBackReference=function(k){var de=k.pos;if(this.regexp_eatDecimalEscape(k)){var yt=k.lastIntValue;if(k.switchU)return yt>k.maxBackReference&&(k.maxBackReference=yt),!0;if(yt<=k.numCapturingParens)return!0;k.pos=de}return!1},cn.regexp_eatKGroupName=function(k){if(k.eat(107)){if(this.regexp_eatGroupName(k))return k.backReferenceNames.push(k.lastStringValue),!0;k.raise("Invalid named reference")}return!1},cn.regexp_eatCharacterEscape=function(k){return this.regexp_eatControlEscape(k)||this.regexp_eatCControlLetter(k)||this.regexp_eatZero(k)||this.regexp_eatHexEscapeSequence(k)||this.regexp_eatRegExpUnicodeEscapeSequence(k,!1)||!k.switchU&&this.regexp_eatLegacyOctalEscapeSequence(k)||this.regexp_eatIdentityEscape(k)},cn.regexp_eatCControlLetter=function(k){var de=k.pos;if(k.eat(99)){if(this.regexp_eatControlLetter(k))return!0;k.pos=de}return!1},cn.regexp_eatZero=function(k){return k.current()===48&&!jo(k.lookahead())?(k.lastIntValue=0,k.advance(),!0):!1},cn.regexp_eatControlEscape=function(k){var de=k.current();return de===116?(k.lastIntValue=9,k.advance(),!0):de===110?(k.lastIntValue=10,k.advance(),!0):de===118?(k.lastIntValue=11,k.advance(),!0):de===102?(k.lastIntValue=12,k.advance(),!0):de===114?(k.lastIntValue=13,k.advance(),!0):!1},cn.regexp_eatControlLetter=function(k){var de=k.current();return ji(de)?(k.lastIntValue=de%32,k.advance(),!0):!1};function ji(k){return k>=65&&k<=90||k>=97&&k<=122}cn.regexp_eatRegExpUnicodeEscapeSequence=function(k,de){de===void 0&&(de=!1);var yt=k.pos,Ue=de||k.switchU;if(k.eat(117)){if(this.regexp_eatFixedHexDigits(k,4)){var nr=k.lastIntValue;if(Ue&&nr>=55296&&nr<=56319){var Mr=k.pos;if(k.eat(92)&&k.eat(117)&&this.regexp_eatFixedHexDigits(k,4)){var qr=k.lastIntValue;if(qr>=56320&&qr<=57343)return k.lastIntValue=(nr-55296)*1024+(qr-56320)+65536,!0}k.pos=Mr,k.lastIntValue=nr}return!0}if(Ue&&k.eat(123)&&this.regexp_eatHexDigits(k)&&k.eat(125)&&oi(k.lastIntValue))return!0;Ue&&k.raise("Invalid unicode escape"),k.pos=yt}return!1};function oi(k){return k>=0&&k<=1114111}cn.regexp_eatIdentityEscape=function(k){if(k.switchU)return this.regexp_eatSyntaxCharacter(k)?!0:k.eat(47)?(k.lastIntValue=47,!0):!1;var de=k.current();return de!==99&&(!k.switchN||de!==107)?(k.lastIntValue=de,k.advance(),!0):!1},cn.regexp_eatDecimalEscape=function(k){k.lastIntValue=0;var de=k.current();if(de>=49&&de<=57){do k.lastIntValue=10*k.lastIntValue+(de-48),k.advance();while((de=k.current())>=48&&de<=57);return!0}return!1},cn.regexp_eatCharacterClassEscape=function(k){var de=k.current();if(Hi(de))return k.lastIntValue=-1,k.advance(),!0;if(k.switchU&&this.options.ecmaVersion>=9&&(de===80||de===112)){if(k.lastIntValue=-1,k.advance(),k.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(k)&&k.eat(125))return!0;k.raise("Invalid property name")}return!1};function Hi(k){return k===100||k===68||k===115||k===83||k===119||k===87}cn.regexp_eatUnicodePropertyValueExpression=function(k){var de=k.pos;if(this.regexp_eatUnicodePropertyName(k)&&k.eat(61)){var yt=k.lastStringValue;if(this.regexp_eatUnicodePropertyValue(k)){var Ue=k.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(k,yt,Ue),!0}}if(k.pos=de,this.regexp_eatLoneUnicodePropertyNameOrValue(k)){var nr=k.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(k,nr),!0}return!1},cn.regexp_validateUnicodePropertyNameAndValue=function(k,de,yt){Ve(k.unicodeProperties.nonBinary,de)||k.raise("Invalid property name"),k.unicodeProperties.nonBinary[de].test(yt)||k.raise("Invalid property value")},cn.regexp_validateUnicodePropertyNameOrValue=function(k,de){k.unicodeProperties.binary.test(de)||k.raise("Invalid property name")},cn.regexp_eatUnicodePropertyName=function(k){var de=0;for(k.lastStringValue="";Ca(de=k.current());)k.lastStringValue+=ci(de),k.advance();return k.lastStringValue!==""};function Ca(k){return ji(k)||k===95}cn.regexp_eatUnicodePropertyValue=function(k){var de=0;for(k.lastStringValue="";Wi(de=k.current());)k.lastStringValue+=ci(de),k.advance();return k.lastStringValue!==""};function Wi(k){return Ca(k)||jo(k)}cn.regexp_eatLoneUnicodePropertyNameOrValue=function(k){return this.regexp_eatUnicodePropertyValue(k)},cn.regexp_eatCharacterClass=function(k){if(k.eat(91)){if(k.eat(94),this.regexp_classRanges(k),k.eat(93))return!0;k.raise("Unterminated character class")}return!1},cn.regexp_classRanges=function(k){for(;this.regexp_eatClassAtom(k);){var de=k.lastIntValue;if(k.eat(45)&&this.regexp_eatClassAtom(k)){var yt=k.lastIntValue;k.switchU&&(de===-1||yt===-1)&&k.raise("Invalid character class"),de!==-1&&yt!==-1&&de>yt&&k.raise("Range out of order in character class")}}},cn.regexp_eatClassAtom=function(k){var de=k.pos;if(k.eat(92)){if(this.regexp_eatClassEscape(k))return!0;if(k.switchU){var yt=k.current();(yt===99||bn(yt))&&k.raise("Invalid class escape"),k.raise("Invalid escape")}k.pos=de}var Ue=k.current();return Ue!==93?(k.lastIntValue=Ue,k.advance(),!0):!1},cn.regexp_eatClassEscape=function(k){var de=k.pos;if(k.eat(98))return k.lastIntValue=8,!0;if(k.switchU&&k.eat(45))return k.lastIntValue=45,!0;if(!k.switchU&&k.eat(99)){if(this.regexp_eatClassControlLetter(k))return!0;k.pos=de}return this.regexp_eatCharacterClassEscape(k)||this.regexp_eatCharacterEscape(k)},cn.regexp_eatClassControlLetter=function(k){var de=k.current();return jo(de)||de===95?(k.lastIntValue=de%32,k.advance(),!0):!1},cn.regexp_eatHexEscapeSequence=function(k){var de=k.pos;if(k.eat(120)){if(this.regexp_eatFixedHexDigits(k,2))return!0;k.switchU&&k.raise("Invalid escape"),k.pos=de}return!1},cn.regexp_eatDecimalDigits=function(k){var de=k.pos,yt=0;for(k.lastIntValue=0;jo(yt=k.current());)k.lastIntValue=10*k.lastIntValue+(yt-48),k.advance();return k.pos!==de};function jo(k){return k>=48&&k<=57}cn.regexp_eatHexDigits=function(k){var de=k.pos,yt=0;for(k.lastIntValue=0;uo(yt=k.current());)k.lastIntValue=16*k.lastIntValue+Pn(yt),k.advance();return k.pos!==de};function uo(k){return k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102}function Pn(k){return k>=65&&k<=70?10+(k-65):k>=97&&k<=102?10+(k-97):k-48}cn.regexp_eatLegacyOctalEscapeSequence=function(k){if(this.regexp_eatOctalDigit(k)){var de=k.lastIntValue;if(this.regexp_eatOctalDigit(k)){var yt=k.lastIntValue;de<=3&&this.regexp_eatOctalDigit(k)?k.lastIntValue=de*64+yt*8+k.lastIntValue:k.lastIntValue=de*8+yt}else k.lastIntValue=de;return!0}return!1},cn.regexp_eatOctalDigit=function(k){var de=k.current();return bn(de)?(k.lastIntValue=de-48,k.advance(),!0):(k.lastIntValue=0,!1)};function bn(k){return k>=48&&k<=55}cn.regexp_eatFixedHexDigits=function(k,de){var yt=k.pos;k.lastIntValue=0;for(var Ue=0;Ue<de;++Ue){var nr=k.current();if(!uo(nr))return k.pos=yt,!1;k.lastIntValue=16*k.lastIntValue+Pn(nr),k.advance()}return!0};var Oi=function(de){this.type=de.type,this.value=de.value,this.start=de.start,this.end=de.end,de.options.locations&&(this.loc=new Re(de,de.startLoc,de.endLoc)),de.options.ranges&&(this.range=[de.start,de.end])},di=K.prototype;di.next=function(k){!k&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Oi(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},di.getToken=function(){return this.next(),new Oi(this)},typeof Symbol!="undefined"&&(di[Symbol.iterator]=function(){var k=this;return{next:function(){var de=k.getToken();return{done:de.type===se.eof,value:de}}}}),di.curContext=function(){return this.context[this.context.length-1]},di.nextToken=function(){var k=this.curContext();if((!k||!k.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(se.eof);if(k.override)return k.override(this);this.readToken(this.fullCharCodeAtPos())},di.readToken=function(k){return re(k,this.options.ecmaVersion>=6)||k===92?this.readWord():this.getTokenFromCode(k)},di.fullCharCodeAtPos=function(){var k=this.input.charCodeAt(this.pos);if(k<=55295||k>=57344)return k;var de=this.input.charCodeAt(this.pos+1);return(k<<10)+de-56613888},di.skipBlockComment=function(){var k=this.options.onComment&&this.curPosition(),de=this.pos,yt=this.input.indexOf("*/",this.pos+=2);if(yt===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=yt+2,this.options.locations){me.lastIndex=de;for(var Ue;(Ue=me.exec(this.input))&&Ue.index<this.pos;)++this.curLine,this.lineStart=Ue.index+Ue[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(de+2,yt),de,this.pos,k,this.curPosition())},di.skipLineComment=function(k){for(var de=this.pos,yt=this.options.onComment&&this.curPosition(),Ue=this.input.charCodeAt(this.pos+=k);this.pos<this.input.length&&!_e(Ue);)Ue=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(de+k,this.pos),de,this.pos,yt,this.curPosition())},di.skipSpace=function(){e:for(;this.pos<this.input.length;){var k=this.input.charCodeAt(this.pos);switch(k){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(k>8&&k<14||k>=5760&&Te.test(String.fromCharCode(k)))++this.pos;else break e}}},di.finishToken=function(k,de){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var yt=this.type;this.type=k,this.value=de,this.updateContext(yt)},di.readToken_dot=function(){var k=this.input.charCodeAt(this.pos+1);if(k>=48&&k<=57)return this.readNumber(!0);var de=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&k===46&&de===46?(this.pos+=3,this.finishToken(se.ellipsis)):(++this.pos,this.finishToken(se.dot))},di.readToken_slash=function(){var k=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):k===61?this.finishOp(se.assign,2):this.finishOp(se.slash,1)},di.readToken_mult_modulo_exp=function(k){var de=this.input.charCodeAt(this.pos+1),yt=1,Ue=k===42?se.star:se.modulo;return this.options.ecmaVersion>=7&&k===42&&de===42&&(++yt,Ue=se.starstar,de=this.input.charCodeAt(this.pos+2)),de===61?this.finishOp(se.assign,yt+1):this.finishOp(Ue,yt)},di.readToken_pipe_amp=function(k){var de=this.input.charCodeAt(this.pos+1);if(de===k){if(this.options.ecmaVersion>=12){var yt=this.input.charCodeAt(this.pos+2);if(yt===61)return this.finishOp(se.assign,3)}return this.finishOp(k===124?se.logicalOR:se.logicalAND,2)}return de===61?this.finishOp(se.assign,2):this.finishOp(k===124?se.bitwiseOR:se.bitwiseAND,1)},di.readToken_caret=function(){var k=this.input.charCodeAt(this.pos+1);return k===61?this.finishOp(se.assign,2):this.finishOp(se.bitwiseXOR,1)},di.readToken_plus_min=function(k){var de=this.input.charCodeAt(this.pos+1);return de===k?de===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||qe.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(se.incDec,2):de===61?this.finishOp(se.assign,2):this.finishOp(se.plusMin,1)},di.readToken_lt_gt=function(k){var de=this.input.charCodeAt(this.pos+1),yt=1;return de===k?(yt=k===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+yt)===61?this.finishOp(se.assign,yt+1):this.finishOp(se.bitShift,yt)):de===33&&k===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(de===61&&(yt=2),this.finishOp(se.relational,yt))},di.readToken_eq_excl=function(k){var de=this.input.charCodeAt(this.pos+1);return de===61?this.finishOp(se.equality,this.input.charCodeAt(this.pos+2)===61?3:2):k===61&&de===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(se.arrow)):this.finishOp(k===61?se.eq:se.prefix,1)},di.readToken_question=function(){var k=this.options.ecmaVersion;if(k>=11){var de=this.input.charCodeAt(this.pos+1);if(de===46){var yt=this.input.charCodeAt(this.pos+2);if(yt<48||yt>57)return this.finishOp(se.questionDot,2)}if(de===63){if(k>=12){var Ue=this.input.charCodeAt(this.pos+2);if(Ue===61)return this.finishOp(se.assign,3)}return this.finishOp(se.coalesce,2)}}return this.finishOp(se.question,1)},di.getTokenFromCode=function(k){switch(k){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(se.parenL);case 41:return++this.pos,this.finishToken(se.parenR);case 59:return++this.pos,this.finishToken(se.semi);case 44:return++this.pos,this.finishToken(se.comma);case 91:return++this.pos,this.finishToken(se.bracketL);case 93:return++this.pos,this.finishToken(se.bracketR);case 123:return++this.pos,this.finishToken(se.braceL);case 125:return++this.pos,this.finishToken(se.braceR);case 58:return++this.pos,this.finishToken(se.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(se.backQuote);case 48:var de=this.input.charCodeAt(this.pos+1);if(de===120||de===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(de===111||de===79)return this.readRadixNumber(8);if(de===98||de===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(k);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(k);case 124:case 38:return this.readToken_pipe_amp(k);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(k);case 60:case 62:return this.readToken_lt_gt(k);case 61:case 33:return this.readToken_eq_excl(k);case 63:return this.readToken_question();case 126:return this.finishOp(se.prefix,1)}this.raise(this.pos,"Unexpected character '"+Aa(k)+"'")},di.finishOp=function(k,de){var yt=this.input.slice(this.pos,this.pos+de);return this.pos+=de,this.finishToken(k,yt)},di.readRegexp=function(){for(var k,de,yt=this.pos;;){this.pos>=this.input.length&&this.raise(yt,"Unterminated regular expression");var Ue=this.input.charAt(this.pos);if(qe.test(Ue)&&this.raise(yt,"Unterminated regular expression"),k)k=!1;else{if(Ue==="[")de=!0;else if(Ue==="]"&&de)de=!1;else if(Ue==="/"&&!de)break;k=Ue==="\\"}++this.pos}var nr=this.input.slice(yt,this.pos);++this.pos;var Mr=this.pos,qr=this.readWord1();this.containsEsc&&this.unexpected(Mr);var kn=this.regexpState||(this.regexpState=new Dn(this));kn.reset(yt,nr,qr),this.validateRegExpFlags(kn),this.validateRegExpPattern(kn);var Nn=null;try{Nn=new RegExp(nr,qr)}catch(Mi){}return this.finishToken(se.regexp,{pattern:nr,flags:qr,value:Nn})},di.readInt=function(k,de,yt){for(var Ue=this.options.ecmaVersion>=12&&de===void 0,nr=yt&&this.input.charCodeAt(this.pos)===48,Mr=this.pos,qr=0,kn=0,Nn=0,Mi=de==null?1/0:de;Nn<Mi;++Nn,++this.pos){var Bi=this.input.charCodeAt(this.pos),io=void 0;if(Ue&&Bi===95){nr&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),kn===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Nn===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),kn=Bi;continue}if(Bi>=97?io=Bi-97+10:Bi>=65?io=Bi-65+10:Bi>=48&&Bi<=57?io=Bi-48:io=1/0,io>=k)break;kn=Bi,qr=qr*k+io}return Ue&&kn===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Mr||de!=null&&this.pos-Mr!==de?null:qr};function va(k,de){return de?parseInt(k,8):parseFloat(k.replace(/_/g,""))}function wa(k){return typeof BigInt!="function"?null:BigInt(k.replace(/_/g,""))}di.readRadixNumber=function(k){var de=this.pos;this.pos+=2;var yt=this.readInt(k);return yt==null&&this.raise(this.start+2,"Expected number in radix "+k),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(yt=wa(this.input.slice(de,this.pos)),++this.pos):re(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(se.num,yt)},di.readNumber=function(k){var de=this.pos;!k&&this.readInt(10,void 0,!0)===null&&this.raise(de,"Invalid number");var yt=this.pos-de>=2&&this.input.charCodeAt(de)===48;yt&&this.strict&&this.raise(de,"Invalid number");var Ue=this.input.charCodeAt(this.pos);if(!yt&&!k&&this.options.ecmaVersion>=11&&Ue===110){var nr=wa(this.input.slice(de,this.pos));return++this.pos,re(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(se.num,nr)}yt&&/[89]/.test(this.input.slice(de,this.pos))&&(yt=!1),Ue===46&&!yt&&(++this.pos,this.readInt(10),Ue=this.input.charCodeAt(this.pos)),(Ue===69||Ue===101)&&!yt&&(Ue=this.input.charCodeAt(++this.pos),(Ue===43||Ue===45)&&++this.pos,this.readInt(10)===null&&this.raise(de,"Invalid number")),re(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Mr=va(this.input.slice(de,this.pos),yt);return this.finishToken(se.num,Mr)},di.readCodePoint=function(){var k=this.input.charCodeAt(this.pos),de;if(k===123){this.options.ecmaVersion<6&&this.unexpected();var yt=++this.pos;de=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,de>1114111&&this.invalidStringToken(yt,"Code point out of bounds")}else de=this.readHexChar(4);return de};function Aa(k){return k<=65535?String.fromCharCode(k):(k-=65536,String.fromCharCode((k>>10)+55296,(k&1023)+56320))}di.readString=function(k){for(var de="",yt=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Ue=this.input.charCodeAt(this.pos);if(Ue===k)break;Ue===92?(de+=this.input.slice(yt,this.pos),de+=this.readEscapedChar(!1),yt=this.pos):(_e(Ue,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return de+=this.input.slice(yt,this.pos++),this.finishToken(se.string,de)};var Ta={};di.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(k){if(k===Ta)this.readInvalidTemplateToken();else throw k}this.inTemplateElement=!1},di.invalidStringToken=function(k,de){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ta;this.raise(k,de)},di.readTmplToken=function(){for(var k="",de=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var yt=this.input.charCodeAt(this.pos);if(yt===96||yt===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===se.template||this.type===se.invalidTemplate)?yt===36?(this.pos+=2,this.finishToken(se.dollarBraceL)):(++this.pos,this.finishToken(se.backQuote)):(k+=this.input.slice(de,this.pos),this.finishToken(se.template,k));if(yt===92)k+=this.input.slice(de,this.pos),k+=this.readEscapedChar(!0),de=this.pos;else if(_e(yt)){switch(k+=this.input.slice(de,this.pos),++this.pos,yt){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:k+=`
`;break;default:k+=String.fromCharCode(yt);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),de=this.pos}else++this.pos}},di.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(se.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},di.readEscapedChar=function(k){var de=this.input.charCodeAt(++this.pos);switch(++this.pos,de){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Aa(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(k){var yt=this.pos-1;return this.invalidStringToken(yt,"Invalid escape sequence in template string"),null}default:if(de>=48&&de<=55){var Ue=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],nr=parseInt(Ue,8);return nr>255&&(Ue=Ue.slice(0,-1),nr=parseInt(Ue,8)),this.pos+=Ue.length-1,de=this.input.charCodeAt(this.pos),(Ue!=="0"||de===56||de===57)&&(this.strict||k)&&this.invalidStringToken(this.pos-1-Ue.length,k?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(nr)}return _e(de)?"":String.fromCharCode(de)}},di.readHexChar=function(k){var de=this.pos,yt=this.readInt(16,k);return yt===null&&this.invalidStringToken(de,"Bad character escape sequence"),yt},di.readWord1=function(){this.containsEsc=!1;for(var k="",de=!0,yt=this.pos,Ue=this.options.ecmaVersion>=6;this.pos<this.input.length;){var nr=this.fullCharCodeAtPos();if(pe(nr,Ue))this.pos+=nr<=65535?1:2;else if(nr===92){this.containsEsc=!0,k+=this.input.slice(yt,this.pos);var Mr=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var qr=this.readCodePoint();(de?re:pe)(qr,Ue)||this.invalidStringToken(Mr,"Invalid Unicode escape"),k+=Aa(qr),yt=this.pos}else break;de=!1}return k+this.input.slice(yt,this.pos)},di.readWord=function(){var k=this.readWord1(),de=se.name;return this.keywords.test(k)&&(de=ut[k]),this.finishToken(de,k)};var ma="7.4.1";K.acorn={Parser:K,version:ma,defaultOptions:vt,Position:Le,SourceLocation:Re,getLineInfo:st,Node:kr,TokenType:fe,tokTypes:se,keywordTypes:ut,TokContext:Or,tokContexts:X,isIdentifierChar:pe,isIdentifierStart:re,Token:Oi,isNewLine:_e,lineBreak:qe,lineBreakG:me,nonASCIIwhitespace:Te};function Da(k,de){return K.parse(k,de)}function Uo(k,de,yt){return K.parseExpressionAt(k,de,yt)}function ha(k,de){return K.tokenizer(k,de)}function xa(k,de){k.prototype=Object.create(de.prototype),k.prototype.constructor=k,k.__proto__=de}function eo(k){var de=typeof Map=="function"?new Map:void 0;return eo=function(Ue){if(Ue===null||!Hs(Ue))return Ue;if(typeof Ue!="function")throw new TypeError("Super expression must either be null or a function");if(typeof de!="undefined"){if(de.has(Ue))return de.get(Ue);de.set(Ue,nr)}function nr(){return Po(Ue,arguments,qo(this).constructor)}return nr.prototype=Object.create(Ue.prototype,{constructor:{value:nr,enumerable:!1,writable:!0,configurable:!0}}),no(nr,Ue)},eo(k)}function Ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(k){return!1}}function Po(k,de,yt){return Ee()?Po=Reflect.construct:Po=function(nr,Mr,qr){var kn=[null];kn.push.apply(kn,Mr);var Nn=Function.bind.apply(nr,kn),Mi=new Nn;return qr&&no(Mi,qr.prototype),Mi},Po.apply(null,arguments)}function Hs(k){return Function.toString.call(k).indexOf("[native code]")!==-1}function no(k,de){return no=Object.setPrototypeOf||function(Ue,nr){return Ue.__proto__=nr,Ue},no(k,de)}function qo(k){return qo=Object.setPrototypeOf?Object.getPrototypeOf:function(yt){return yt.__proto__||Object.getPrototypeOf(yt)},qo(k)}var os=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(eo(Error)),Go=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(eo(SyntaxError)),Wo=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(eo(ReferenceError)),za=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(eo(TypeError)),Tu=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(os),Cs=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(Go),Zs=function(k){xa(de,k);function de(){return k.apply(this,arguments)||this}return de}(Wo),ts={UnknownError:[3001,"%0",Tu],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",Tu],NodeTypeSyntaxError:[1001,"Unknown node type: %0",Zs],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",Zs],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",Zs],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",Zs],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",Zs],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",Zs],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",Zs],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",Zs],ParamTypeSyntaxError:[1009,"Unknown param type: %0",Zs],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",Zs],FunctionUndefinedReferenceError:[2001,"%0 is not a function",Wo],VariableUndefinedReferenceError:[2002,"%0 is not defined",Wo],IsNotConstructor:[2003,"%0 is not a constructor",za]};function Vs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(k){return!1}}function ou(k,de,yt){return Vs()?ou=Reflect.construct:ou=function(nr,Mr,qr){var kn=[null];kn.push.apply(kn,Mr);var Nn=Function.bind.apply(nr,kn),Mi=new Nn;return qr&&ls(Mi,qr.prototype),Mi},ou.apply(null,arguments)}function ls(k,de){return ls=Object.setPrototypeOf||function(Ue,nr){return Ue.__proto__=nr,Ue},ls(k,de)}var Di="0.0.3";function As(k,de){Object.defineProperty(k,"name",{value:de,writable:!1,enumerable:!1,configurable:!0})}var Rs=Object.prototype.hasOwnProperty,vr=Symbol("Break"),zr=Symbol("Continue"),lr=Symbol("DefaultCase"),Zr=Symbol("EmptyStatementReturn"),Hn=Symbol("WithScopeName"),Hr=Symbol("SuperScopeName"),Bo=Symbol("RootScopeName"),Yr=Symbol("GlobalScopeName");function pr(k){return typeof k=="function"}var at=function(){function k(yt){this.interpreter=yt}var de=k.prototype;return de.generator=function(){var Ue=this.interpreter;function nr(){return this.getCurrentScope()}function Mr(){return this.getGlobalScope()}function qr(){return this.getCurrentContext()}return{getOptions:Ue.getOptions.bind(Ue),getCurrentScope:nr.bind(Ue),getGlobalScope:Mr.bind(Ue),getCurrentContext:qr.bind(Ue),getExecStartTime:Ue.getExecStartTime.bind(Ue)}},k}();function hr(k,de,yt){if(yt===void 0&&(yt=!0),!(k instanceof at))throw new Error("Illegal call");if(typeof de!="string")return de;if(de){var Ue=k.generator(),nr=Ue.getOptions(),Mr={timeout:nr.timeout,_initEnv:function(){yt||this.setCurrentContext(Ue.getCurrentContext()),this.execStartTime=Ue.getExecStartTime(),this.execEndTime=this.execStartTime}},qr=yt?Ue.getGlobalScope():Ue.getCurrentScope(),kn=new Mn(qr,Mr);return kn.evaluate(de)}}Object.defineProperty(hr,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function er(k){if(!(k instanceof at))throw new Error("Illegal call");for(var de=k.generator(),yt=arguments.length,Ue=new Array(yt>1?yt-1:0),nr=1;nr<yt;nr++)Ue[nr-1]=arguments[nr];var Mr=Ue.pop(),qr=new Mn(de.getGlobalScope(),de.getOptions()),kn=`
		    (function anonymous(`+Ue.join(",")+`){
		        `+Mr+`
		    });
		    `;return qr.evaluate(kn)}Object.defineProperty(er,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var dn=function(de){this.value=de},mn=function(de){this.value=de},Vn=function(de){this.value=de},ni=function(de,yt,Ue){yt===void 0&&(yt=null),this.name=Ue,this.parent=yt,this.data=de,this.labelStack=[]};function si(){}function Si(k,de){return k===void 0&&(k=null),new ni(Object.create(null),k,de)}function qi(k){return Object.create(k)}var Rr={NaN:NaN,Infinity:1/0,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:hr,Function:er};typeof JSON!="undefined"&&(Rr.JSON=JSON),typeof Promise!="undefined"&&(Rr.Promise=Promise),typeof Set!="undefined"&&(Rr.Set=Set),typeof Map!="undefined"&&(Rr.Map=Map),typeof Symbol!="undefined"&&(Rr.Symbol=Symbol),typeof Proxy!="undefined"&&(Rr.Proxy=Proxy),typeof WeakMap!="undefined"&&(Rr.WeakMap=WeakMap),typeof WeakSet!="undefined"&&(Rr.WeakSet=WeakSet),typeof Reflect!="undefined"&&(Rr.Reflect=Reflect);var Mn=function(){function k(yt,Ue){yt===void 0&&(yt=k.global),Ue===void 0&&(Ue={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:Ue.ecmaVersion||k.ecmaVersion,timeout:Ue.timeout||0,rootContext:Ue.rootContext,globalContextInFunction:Ue.globalContextInFunction===void 0?k.globalContextInFunction:Ue.globalContextInFunction,_initEnv:Ue._initEnv},this.context=yt||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var de=k.prototype;return de.initEnvironment=function(Ue){var nr;if(Ue instanceof ni)nr=Ue;else{var Mr=null,qr=this.createSuperScope(Ue);this.options.rootContext&&(Mr=new ni(qi(this.options.rootContext),qr,Bo)),nr=new ni(Ue,Mr||qr,Yr)}this.globalScope=nr,this.currentScope=this.globalScope,this.globalContext=nr.data,this.currentContext=nr.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var kn=this.options._initEnv;kn&&kn.call(this)},de.getExecStartTime=function(){return this.execStartTime},de.getExecutionTime=function(){return this.execEndTime-this.execStartTime},de.setExecTimeout=function(Ue){Ue===void 0&&(Ue=0),this.options.timeout=Ue},de.getOptions=function(){return this.options},de.getGlobalScope=function(){return this.globalScope},de.getCurrentScope=function(){return this.currentScope},de.getCurrentContext=function(){return this.currentContext},de.isInterruptThrow=function(Ue){return Ue instanceof Tu||Ue instanceof Zs||Ue instanceof Cs},de.createSuperScope=function(Ue){var nr=Object.assign({},Rr),Mr=Object.keys(nr);return Mr.forEach(function(qr){qr in Ue&&delete nr[qr]}),new ni(nr,null,Hr)},de.setCurrentContext=function(Ue){this.currentContext=Ue},de.setCurrentScope=function(Ue){this.currentScope=Ue},de.evaluate=function(Ue){Ue===void 0&&(Ue="");var nr;if(Ue)return nr=Da(Ue,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||k.ecmaVersion}),this.evaluateNode(nr,Ue)},de.appendCode=function(Ue){return this.evaluate(Ue)},de.evaluateNode=function(Ue,nr){var Mr=this;nr===void 0&&(nr=""),this.value=void 0,this.source=nr,this.sourceList.push(nr),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var qr=this.getCurrentScope(),kn=this.getCurrentContext(),Nn=qr.labelStack.concat([]),Mi=this.callStack.concat([]),Bi=function(){Mr.setCurrentScope(qr),Mr.setCurrentContext(kn),qr.labelStack=Nn,Mr.callStack=Mi};try{var io=this.createClosure(Ue);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),io()}catch(co){throw co}finally{Bi(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},de.createErrorMessage=function(Ue,nr,Mr){var qr=Ue[1].replace("%0",String(nr));return Mr!==null&&(qr+=this.getNodePosition(Mr||this.lastExecNode)),qr},de.createError=function(Ue,nr){return new nr(Ue)},de.createThrowError=function(Ue,nr){return this.createError(Ue,nr)},de.createInternalThrowError=function(Ue,nr,Mr){return this.createError(this.createErrorMessage(Ue,nr,Mr),Ue[2])},de.checkTimeout=function(){if(!this.isRunning)return!1;var Ue=this.options.timeout||0,nr=Date.now();return nr-this.execStartTime>Ue},de.getNodePosition=function(Ue){if(Ue){var nr="";return Ue.loc?" ["+Ue.loc.start.line+":"+Ue.loc.start.column+"]"+nr:""}return""},de.createClosure=function(Ue){var nr=this,Mr;switch(Ue.type){case"BinaryExpression":Mr=this.binaryExpressionHandler(Ue);break;case"LogicalExpression":Mr=this.logicalExpressionHandler(Ue);break;case"UnaryExpression":Mr=this.unaryExpressionHandler(Ue);break;case"UpdateExpression":Mr=this.updateExpressionHandler(Ue);break;case"ObjectExpression":Mr=this.objectExpressionHandler(Ue);break;case"ArrayExpression":Mr=this.arrayExpressionHandler(Ue);break;case"CallExpression":Mr=this.callExpressionHandler(Ue);break;case"NewExpression":Mr=this.newExpressionHandler(Ue);break;case"MemberExpression":Mr=this.memberExpressionHandler(Ue);break;case"ThisExpression":Mr=this.thisExpressionHandler(Ue);break;case"SequenceExpression":Mr=this.sequenceExpressionHandler(Ue);break;case"Literal":Mr=this.literalHandler(Ue);break;case"Identifier":Mr=this.identifierHandler(Ue);break;case"AssignmentExpression":Mr=this.assignmentExpressionHandler(Ue);break;case"FunctionDeclaration":Mr=this.functionDeclarationHandler(Ue);break;case"VariableDeclaration":Mr=this.variableDeclarationHandler(Ue);break;case"BlockStatement":case"Program":Mr=this.programHandler(Ue);break;case"ExpressionStatement":Mr=this.expressionStatementHandler(Ue);break;case"EmptyStatement":Mr=this.emptyStatementHandler(Ue);break;case"ReturnStatement":Mr=this.returnStatementHandler(Ue);break;case"FunctionExpression":Mr=this.functionExpressionHandler(Ue);break;case"IfStatement":Mr=this.ifStatementHandler(Ue);break;case"ConditionalExpression":Mr=this.conditionalExpressionHandler(Ue);break;case"ForStatement":Mr=this.forStatementHandler(Ue);break;case"WhileStatement":Mr=this.whileStatementHandler(Ue);break;case"DoWhileStatement":Mr=this.doWhileStatementHandler(Ue);break;case"ForInStatement":Mr=this.forInStatementHandler(Ue);break;case"WithStatement":Mr=this.withStatementHandler(Ue);break;case"ThrowStatement":Mr=this.throwStatementHandler(Ue);break;case"TryStatement":Mr=this.tryStatementHandler(Ue);break;case"ContinueStatement":Mr=this.continueStatementHandler(Ue);break;case"BreakStatement":Mr=this.breakStatementHandler(Ue);break;case"SwitchStatement":Mr=this.switchStatementHandler(Ue);break;case"LabeledStatement":Mr=this.labeledStatementHandler(Ue);break;case"DebuggerStatement":Mr=this.debuggerStatementHandler(Ue);break;default:throw this.createInternalThrowError(ts.NodeTypeSyntaxError,Ue.type,Ue)}return function(){var qr=nr.options.timeout;if(qr&&qr>0&&nr.checkTimeout())throw nr.createInternalThrowError(ts.ExecutionTimeOutError,qr,null);return nr.lastExecNode=Ue,Mr.apply(void 0,arguments)}},de.binaryExpressionHandler=function(Ue){var nr=this,Mr=this.createClosure(Ue.left),qr=this.createClosure(Ue.right);return function(){var kn=Mr(),Nn=qr();switch(Ue.operator){case"==":return kn==Nn;case"!=":return kn!=Nn;case"===":return kn===Nn;case"!==":return kn!==Nn;case"<":return kn<Nn;case"<=":return kn<=Nn;case">":return kn>Nn;case">=":return kn>=Nn;case"<<":return kn<<Nn;case">>":return kn>>Nn;case">>>":return kn>>>Nn;case"+":return kn+Nn;case"-":return kn-Nn;case"*":return kn*Nn;case"**":return Math.pow(kn,Nn);case"/":return kn/Nn;case"%":return kn%Nn;case"|":return kn|Nn;case"^":return kn^Nn;case"&":return kn&Nn;case"in":return kn in Nn;case"instanceof":return kn instanceof Nn;default:throw nr.createInternalThrowError(ts.BinaryOperatorSyntaxError,Ue.operator,Ue)}}},de.logicalExpressionHandler=function(Ue){var nr=this,Mr=this.createClosure(Ue.left),qr=this.createClosure(Ue.right);return function(){switch(Ue.operator){case"||":return Mr()||qr();case"&&":return Mr()&&qr();default:throw nr.createInternalThrowError(ts.LogicalOperatorSyntaxError,Ue.operator,Ue)}}},de.unaryExpressionHandler=function(Ue){var nr=this;switch(Ue.operator){case"delete":var Mr=this.createObjectGetter(Ue.argument),qr=this.createNameGetter(Ue.argument);return function(){var Bi=Mr(),io=qr();return delete Bi[io]};default:var kn;if(Ue.operator==="typeof"&&Ue.argument.type==="Identifier"){var Nn=this.createObjectGetter(Ue.argument),Mi=this.createNameGetter(Ue.argument);kn=function(){return Nn()[Mi()]}}else kn=this.createClosure(Ue.argument);return function(){var Bi=kn();switch(Ue.operator){case"-":return-Bi;case"+":return+Bi;case"!":return!Bi;case"~":return~Bi;case"void":return;case"typeof":return typeof Bi;default:throw nr.createInternalThrowError(ts.UnaryOperatorSyntaxError,Ue.operator,Ue)}}}},de.updateExpressionHandler=function(Ue){var nr=this,Mr=this.createObjectGetter(Ue.argument),qr=this.createNameGetter(Ue.argument);return function(){var kn=Mr(),Nn=qr();switch(nr.assertVariable(kn,Nn,Ue),Ue.operator){case"++":return Ue.prefix?++kn[Nn]:kn[Nn]++;case"--":return Ue.prefix?--kn[Nn]:kn[Nn]--;default:throw nr.createInternalThrowError(ts.UpdateOperatorSyntaxError,Ue.operator,Ue)}}},de.objectExpressionHandler=function(Ue){var nr=this,Mr=[];function qr(Nn){return Nn.type==="Identifier"?Nn.name:Nn.type==="Literal"?Nn.value:this.throwError(ts.ObjectStructureSyntaxError,Nn.type,Nn)}var kn=Object.create(null);return Ue.properties.forEach(function(Nn){var Mi=Nn.kind,Bi=qr(Nn.key);(!kn[Bi]||Mi==="init")&&(kn[Bi]={}),kn[Bi][Mi]=nr.createClosure(Nn.value),Mr.push({key:Bi,property:Nn})}),function(){for(var Nn={},Mi=Mr.length,Bi=0;Bi<Mi;Bi++){var io=Mr[Bi],co=io.key,Sa=kn[co],Ko=Sa.init?Sa.init():void 0,wo=Sa.get?Sa.get():function(){},Oo=Sa.set?Sa.set():function(Il){};if("set"in Sa||"get"in Sa){var Ho={configurable:!0,enumerable:!0,get:wo,set:Oo};Object.defineProperty(Nn,co,Ho)}else{var Io=io.property,qs=Io.kind;Io.key.type==="Identifier"&&Io.value.type==="FunctionExpression"&&qs==="init"&&!Io.value.id&&As(Ko,Io.key.name),Nn[co]=Ko}}return Nn}},de.arrayExpressionHandler=function(Ue){var nr=this,Mr=Ue.elements.map(function(qr){return qr&&nr.createClosure(qr)});return function(){for(var qr=Mr.length,kn=Array(qr),Nn=0;Nn<qr;Nn++){var Mi=Mr[Nn];Mi&&(kn[Nn]=Mi())}return kn}},de.safeObjectGet=function(Ue,nr,Mr){return Ue[nr]},de.createCallFunctionGetter=function(Ue){var nr=this;switch(Ue.type){case"MemberExpression":var Mr=this.createClosure(Ue.object),qr=this.createMemberKeyGetter(Ue),kn=this.source;return function(){var Mi=Mr(),Bi=qr(),io=nr.safeObjectGet(Mi,Bi,Ue);if(!io||!pr(io)){var co=kn.slice(Ue.start,Ue.end);throw nr.createInternalThrowError(ts.FunctionUndefinedReferenceError,co,Ue)}return io.__IS_EVAL_FUNC?function(Sa){return io(new at(nr),Sa,!0)}:io.__IS_FUNCTION_FUNC?function(){for(var Sa=arguments.length,Ko=new Array(Sa),wo=0;wo<Sa;wo++)Ko[wo]=arguments[wo];return io.apply(void 0,[new at(nr)].concat(Ko))}:io.bind(Mi)};default:var Nn=this.createClosure(Ue);return function(){var Mi="";Ue.type==="Identifier"&&(Mi=Ue.name);var Bi=Nn();if(!Bi||!pr(Bi))throw nr.createInternalThrowError(ts.FunctionUndefinedReferenceError,Mi,Ue);if(Ue.type==="Identifier"&&Bi.__IS_EVAL_FUNC&&Mi==="eval")return function(Sa){var Ko=nr.getScopeFromName(Mi,nr.getCurrentScope()),wo=Ko.name===Hr||Ko.name===Yr||Ko.name===Bo;return Bi(new at(nr),Sa,!wo)};if(Bi.__IS_EVAL_FUNC)return function(Sa){return Bi(new at(nr),Sa,!0)};if(Bi.__IS_FUNCTION_FUNC)return function(){for(var Sa=arguments.length,Ko=new Array(Sa),wo=0;wo<Sa;wo++)Ko[wo]=arguments[wo];return Bi.apply(void 0,[new at(nr)].concat(Ko))};var io=nr.options.globalContextInFunction;if(Ue.type==="Identifier"){var co=nr.getIdentifierScope(Ue);co.name===Hn&&(io=co.data)}return Bi.bind(io)}}},de.callExpressionHandler=function(Ue){var nr=this,Mr=this.createCallFunctionGetter(Ue.callee),qr=Ue.arguments.map(function(kn){return nr.createClosure(kn)});return function(){return Mr().apply(void 0,qr.map(function(kn){return kn()}))}},de.functionExpressionHandler=function(Ue){var nr=this,Mr=this,qr=this.source,kn=this.collectDeclVars,Nn=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var Mi=Ue.id?Ue.id.name:"",Bi=Ue.params.length,io=Ue.params.map(function(wo){return nr.createParamNameGetter(wo)}),co=this.createClosure(Ue.body),Sa=this.collectDeclVars,Ko=this.collectDeclFuncs;return this.collectDeclVars=kn,this.collectDeclFuncs=Nn,function(){var wo=Mr.getCurrentScope(),Oo=function Ho(){for(var Io=arguments.length,qs=new Array(Io),Il=0;Il<Io;Il++)qs[Il]=arguments[Il];Mr.callStack.push(""+Mi);var Ao=Mr.getCurrentScope(),Va=Si(wo,"FunctionScope("+Mi+")");Mr.setCurrentScope(Va),Mr.addDeclarationsToScope(Sa,Ko,Va),Mi&&(Va.data[Mi]=Ho),Va.data.arguments=arguments,io.forEach(function(bs,Ps){Va.data[bs()]=qs[Ps]});var gs=Mr.getCurrentContext();Mr.setCurrentContext(this);var Ws=co();if(Mr.setCurrentContext(gs),Mr.setCurrentScope(Ao),Mr.callStack.pop(),Ws instanceof dn)return Ws.value};return As(Oo,Mi),Object.defineProperty(Oo,"length",{value:Bi,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(Oo,"toString",{value:function(){return qr.slice(Ue.start,Ue.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Oo,"valueOf",{value:function(){return qr.slice(Ue.start,Ue.end)},writable:!0,configurable:!0,enumerable:!1}),Oo}},de.newExpressionHandler=function(Ue){var nr=this,Mr=this.source,qr=this.createClosure(Ue.callee),kn=Ue.arguments.map(function(Nn){return nr.createClosure(Nn)});return function(){var Nn=qr();if(!pr(Nn)||Nn.__IS_EVAL_FUNC){var Mi=Ue.callee,Bi=Mr.slice(Mi.start,Mi.end);throw nr.createInternalThrowError(ts.IsNotConstructor,Bi,Ue)}return Nn.__IS_FUNCTION_FUNC?Nn.apply(void 0,[new at(nr)].concat(kn.map(function(io){return io()}))):ou(Nn,kn.map(function(io){return io()}))}},de.memberExpressionHandler=function(Ue){var nr=this.createClosure(Ue.object),Mr=this.createMemberKeyGetter(Ue);return function(){var qr=nr(),kn=Mr();return qr[kn]}},de.thisExpressionHandler=function(Ue){var nr=this;return function(){return nr.getCurrentContext()}},de.sequenceExpressionHandler=function(Ue){var nr=this,Mr=Ue.expressions.map(function(qr){return nr.createClosure(qr)});return function(){for(var qr,kn=Mr.length,Nn=0;Nn<kn;Nn++){var Mi=Mr[Nn];qr=Mi()}return qr}},de.literalHandler=function(Ue){return function(){return Ue.regex?new RegExp(Ue.regex.pattern,Ue.regex.flags):Ue.value}},de.identifierHandler=function(Ue){var nr=this;return function(){var Mr=nr.getCurrentScope(),qr=nr.getScopeDataFromName(Ue.name,Mr);return nr.assertVariable(qr,Ue.name,Ue),qr[Ue.name]}},de.getIdentifierScope=function(Ue){var nr=this.getCurrentScope(),Mr=this.getScopeFromName(Ue.name,nr);return Mr},de.assignmentExpressionHandler=function(Ue){var nr=this;Ue.left.type==="Identifier"&&Ue.right.type==="FunctionExpression"&&!Ue.right.id&&(Ue.right.id={type:"Identifier",name:Ue.left.name});var Mr=this.createObjectGetter(Ue.left),qr=this.createNameGetter(Ue.left),kn=this.createClosure(Ue.right);return function(){var Nn=Mr(),Mi=qr(),Bi=kn();switch(Ue.operator!=="="&&nr.assertVariable(Nn,Mi,Ue),Ue.operator){case"=":return Nn[Mi]=Bi;case"+=":return Nn[Mi]+=Bi;case"-=":return Nn[Mi]-=Bi;case"*=":return Nn[Mi]*=Bi;case"**=":return Nn[Mi]=Math.pow(Nn[Mi],Bi);case"/=":return Nn[Mi]/=Bi;case"%=":return Nn[Mi]%=Bi;case"<<=":return Nn[Mi]<<=Bi;case">>=":return Nn[Mi]>>=Bi;case">>>=":return Nn[Mi]>>>=Bi;case"&=":return Nn[Mi]&=Bi;case"^=":return Nn[Mi]^=Bi;case"|=":return Nn[Mi]|=Bi;default:throw nr.createInternalThrowError(ts.AssignmentExpressionSyntaxError,Ue.type,Ue)}}},de.functionDeclarationHandler=function(Ue){if(Ue.id){var nr=this.functionExpressionHandler(Ue);Object.defineProperty(nr,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(Ue.id.name,nr)}return function(){return Zr}},de.getVariableName=function(Ue){if(Ue.type==="Identifier")return Ue.name;throw this.createInternalThrowError(ts.VariableTypeSyntaxError,Ue.type,Ue)},de.variableDeclarationHandler=function(Ue){for(var nr=this,Mr,qr=[],kn=0;kn<Ue.declarations.length;kn++){var Nn=Ue.declarations[kn];this.varDeclaration(this.getVariableName(Nn.id)),Nn.init&&qr.push({type:"AssignmentExpression",operator:"=",left:Nn.id,right:Nn.init})}return qr.length&&(Mr=this.createClosure({type:"BlockStatement",body:qr})),function(){if(Mr){var Mi=nr.isVarDeclMode;nr.isVarDeclMode=!0,Mr(),nr.isVarDeclMode=Mi}return Zr}},de.assertVariable=function(Ue,nr,Mr){if(Ue===this.globalScope.data&&!(nr in Ue))throw this.createInternalThrowError(ts.VariableUndefinedReferenceError,nr,Mr)},de.programHandler=function(Ue){var nr=this,Mr=Ue.body.map(function(qr){return nr.createClosure(qr)});return function(){for(var qr=Zr,kn=0;kn<Mr.length;kn++){var Nn=Mr[kn],Mi=nr.setValue(Nn());if(Mi!==Zr&&(qr=Mi,qr instanceof dn||qr instanceof mn||qr instanceof Vn||qr===vr||qr===zr))break}return qr}},de.expressionStatementHandler=function(Ue){return this.createClosure(Ue.expression)},de.emptyStatementHandler=function(Ue){return function(){return Zr}},de.returnStatementHandler=function(Ue){var nr=Ue.argument?this.createClosure(Ue.argument):si;return function(){return new dn(nr())}},de.ifStatementHandler=function(Ue){var nr=this.createClosure(Ue.test),Mr=this.createClosure(Ue.consequent),qr=Ue.alternate?this.createClosure(Ue.alternate):function(){return Zr};return function(){return nr()?Mr():qr()}},de.conditionalExpressionHandler=function(Ue){return this.ifStatementHandler(Ue)},de.forStatementHandler=function(Ue){var nr=this,Mr=si,qr=Ue.test?this.createClosure(Ue.test):function(){return!0},kn=si,Nn=this.createClosure(Ue.body);return Ue.type==="ForStatement"&&(Mr=Ue.init?this.createClosure(Ue.init):Mr,kn=Ue.update?this.createClosure(Ue.update):si),function(Mi){var Bi,io=Zr,co=Ue.type==="DoWhileStatement";for(Mi&&Mi.type==="LabeledStatement"&&(Bi=Mi.label.name),Mr();co||qr();kn()){co=!1;var Sa=nr.setValue(Nn());if(!(Sa===Zr||Sa===zr)){if(Sa===vr)break;if(io=Sa,io instanceof Vn&&io.value===Bi){io=Zr;continue}if(io instanceof dn||io instanceof mn||io instanceof Vn)break}}return io}},de.whileStatementHandler=function(Ue){return this.forStatementHandler(Ue)},de.doWhileStatementHandler=function(Ue){return this.forStatementHandler(Ue)},de.forInStatementHandler=function(Ue){var nr=this,Mr=Ue.left,qr=this.createClosure(Ue.right),kn=this.createClosure(Ue.body);return Ue.left.type==="VariableDeclaration"&&(this.createClosure(Ue.left)(),Mr=Ue.left.declarations[0].id),function(Nn){var Mi,Bi=Zr,io;Nn&&Nn.type==="LabeledStatement"&&(Mi=Nn.label.name);var co=qr();for(io in co){nr.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:Mr,right:{type:"Literal",value:io}})();var Sa=nr.setValue(kn());if(!(Sa===Zr||Sa===zr)){if(Sa===vr)break;if(Bi=Sa,Bi instanceof Vn&&Bi.value===Mi){Bi=Zr;continue}if(Bi instanceof dn||Bi instanceof mn||Bi instanceof Vn)break}}return Bi}},de.withStatementHandler=function(Ue){var nr=this,Mr=this.createClosure(Ue.object),qr=this.createClosure(Ue.body);return function(){var kn=Mr(),Nn=nr.getCurrentScope(),Mi=new ni(kn,Nn,Hn);nr.setCurrentScope(Mi);var Bi=nr.setValue(qr());return nr.setCurrentScope(Nn),Bi}},de.throwStatementHandler=function(Ue){var nr=this,Mr=this.createClosure(Ue.argument);return function(){throw nr.setValue(void 0),Mr()}},de.tryStatementHandler=function(Ue){var nr=this,Mr=this.createClosure(Ue.block),qr=Ue.handler?this.catchClauseHandler(Ue.handler):null,kn=Ue.finalizer?this.createClosure(Ue.finalizer):null;return function(){var Nn=nr.getCurrentScope(),Mi=nr.getCurrentContext(),Bi=Nn.labelStack.concat([]),io=nr.callStack.concat([]),co=Zr,Sa,Ko,wo=function(){nr.setCurrentScope(Nn),nr.setCurrentContext(Mi),Nn.labelStack=Bi,nr.callStack=io};try{co=nr.setValue(Mr()),co instanceof dn&&(Sa=co)}catch(Oo){if(wo(),nr.isInterruptThrow(Oo))throw Oo;if(qr)try{co=nr.setValue(qr(Oo)),co instanceof dn&&(Sa=co)}catch(Ho){if(wo(),nr.isInterruptThrow(Ho))throw Ho;Ko=Ho}}if(kn)try{co=kn(),co instanceof dn&&(Sa=co)}catch(Oo){if(wo(),nr.isInterruptThrow(Oo))throw Oo;Ko=Oo}if(Ko)throw Ko;return Sa||co}},de.catchClauseHandler=function(Ue){var nr=this,Mr=this.createParamNameGetter(Ue.param),qr=this.createClosure(Ue.body);return function(kn){var Nn,Mi=nr.getCurrentScope(),Bi=Mi.data,io=Mr(),co=Rs.call(Bi,io),Sa=Bi[io];return Bi[io]=kn,Nn=qr(),co?Bi[io]=Sa:delete Bi[io],Nn}},de.continueStatementHandler=function(Ue){return function(){return Ue.label?new Vn(Ue.label.name):zr}},de.breakStatementHandler=function(Ue){return function(){return Ue.label?new mn(Ue.label.name):vr}},de.switchStatementHandler=function(Ue){var nr=this,Mr=this.createClosure(Ue.discriminant),qr=Ue.cases.map(function(kn){return nr.switchCaseHandler(kn)});return function(){for(var kn=Mr(),Nn=!1,Mi,Bi,io,co=0;co<qr.length;co++){var Sa=qr[co](),Ko=Sa.testClosure();if(Ko===lr){io=Sa;continue}if(Nn||Ko===kn){if(Nn=!0,Bi=nr.setValue(Sa.bodyClosure()),Bi===Zr)continue;if(Bi===vr||(Mi=Bi,Mi instanceof dn||Mi instanceof mn||Mi instanceof Vn||Mi===zr))break}}if(!Nn&&io){Bi=nr.setValue(io.bodyClosure());var wo=Bi===Zr||Bi===vr||Bi===zr;wo||(Mi=Bi)}return Mi}},de.switchCaseHandler=function(Ue){var nr=Ue.test?this.createClosure(Ue.test):function(){return lr},Mr=this.createClosure({type:"BlockStatement",body:Ue.consequent});return function(){return{testClosure:nr,bodyClosure:Mr}}},de.labeledStatementHandler=function(Ue){var nr=this,Mr=Ue.label.name,qr=this.createClosure(Ue.body);return function(){var kn,Nn=nr.getCurrentScope();return Nn.labelStack.push(Mr),kn=qr(Ue),kn instanceof mn&&kn.value===Mr&&(kn=Zr),Nn.labelStack.pop(),kn}},de.debuggerStatementHandler=function(Ue){return function(){debugger;return Zr}},de.createParamNameGetter=function(Ue){if(Ue.type==="Identifier")return function(){return Ue.name};throw this.createInternalThrowError(ts.ParamTypeSyntaxError,Ue.type,Ue)},de.createObjectKeyGetter=function(Ue){var nr;return Ue.type==="Identifier"?nr=function(){return Ue.name}:nr=this.createClosure(Ue),function(){return nr()}},de.createMemberKeyGetter=function(Ue){return Ue.computed?this.createClosure(Ue.property):this.createObjectKeyGetter(Ue.property)},de.createObjectGetter=function(Ue){var nr=this;switch(Ue.type){case"Identifier":return function(){return nr.getScopeDataFromName(Ue.name,nr.getCurrentScope())};case"MemberExpression":return this.createClosure(Ue.object);default:throw this.createInternalThrowError(ts.AssignmentTypeSyntaxError,Ue.type,Ue)}},de.createNameGetter=function(Ue){switch(Ue.type){case"Identifier":return function(){return Ue.name};case"MemberExpression":return this.createMemberKeyGetter(Ue);default:throw this.createInternalThrowError(ts.AssignmentTypeSyntaxError,Ue.type,Ue)}},de.varDeclaration=function(Ue){var nr=this.collectDeclVars;nr[Ue]=void 0},de.funcDeclaration=function(Ue,nr){var Mr=this.collectDeclFuncs;Mr[Ue]=nr},de.addDeclarationsToScope=function(Ue,nr,Mr){var qr=Mr.data;for(var kn in nr){var Nn=nr[kn];qr[kn]=Nn&&Nn()}for(var Mi in Ue)Mi in qr||(qr[Mi]=void 0)},de.getScopeValue=function(Ue,nr){var Mr=this.getScopeFromName(Ue,nr);return Mr.data[Ue]},de.getScopeDataFromName=function(Ue,nr){return this.getScopeFromName(Ue,nr).data},de.getScopeFromName=function(Ue,nr){var Mr=nr;do if(Ue in Mr.data)return Mr;while(Mr=Mr.parent);return this.globalScope},de.setValue=function(Ue){var nr=this.callStack.length;return this.isVarDeclMode||nr||Ue===Zr||Ue===vr||Ue===zr||Ue instanceof mn||Ue instanceof Vn||(this.value=Ue instanceof dn?Ue.value:Ue),Ue},de.getValue=function(){return this.value},k}();Mn.version=Di,Mn.eval=hr,Mn.Function=er,Mn.ecmaVersion=5,Mn.globalContextInFunction=void 0,Mn.global=Object.create(null);function pn(k){return k===void 0&&(k=Object.create(null)),k}function wn(k,de,yt){de===void 0&&(de=[]),yt===void 0&&(yt={});var Ue=yt.parsingContext,nr=yt.timeout===void 0?0:yt.timeout,Mr=`
    (function anonymous(`+de.join(",")+`){
         `+k+`
    });
    `,qr=new Mn(Ue,{ecmaVersion:yt.ecmaVersion,timeout:nr,rootContext:yt.rootContext,globalContextInFunction:yt.globalContextInFunction});return qr.evaluate(Mr)}function Kn(k,de,yt){var Ue=new Mn(de,yt);return Ue.evaluate(k)}var Ei=Kn,Ji=function(){function k(yt){this._code=yt}var de=k.prototype;return de.runInContext=function(Ue){return Kn(this._code,Ue)},de.runInNewContext=function(Ue){return Kn(this._code,Ue)},k}(),Yi=function(k,de,yt){return Kn(k,de,yt)};function oa(){for(var k=arguments.length,de=new Array(k),yt=0;yt<k;yt++)de[yt]=arguments[yt];var Ue=de.pop();return wn(Ue||"",de)}var Ma=Yi},20396:function(Qe,te,m){var v;(function(C,l,$,R){"use strict";var z=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,L=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),T=z||L,O=["","webkit","Moz","MS","ms","o"],F=T?"":l.createElement("div"),ue="function",Ae=Math.round,re=Math.abs,pe=Date.now;function fe(vr,zr,lr){return setTimeout(me(vr,lr),zr)}function ke(vr,zr,lr){return Array.isArray(vr)?(je(vr,lr[zr],lr),!0):!1}function je(vr,zr,lr){var Zr;if(vr)if(vr.forEach)vr.forEach(zr,lr);else if(vr.length!==R)for(Zr=0;Zr<vr.length;)zr.call(lr,vr[Zr],Zr,vr),Zr++;else for(Zr in vr)vr.hasOwnProperty(Zr)&&zr.call(lr,vr[Zr],Zr,vr)}function bt(vr,zr,lr){var Zr="DEPRECATED METHOD: "+zr+`
`+lr+` AT 
`;return function(){var Hn=new Error("get-stack-trace"),Hr=Hn&&Hn.stack?Hn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Bo=C.console&&(C.console.warn||C.console.log);return Bo&&Bo.call(C.console,Zr,Hr),vr.apply(this,arguments)}}var ut;typeof Object.assign!="function"?ut=function(zr){if(zr===R||zr===null)throw new TypeError("Cannot convert undefined or null to object");for(var lr=Object(zr),Zr=1;Zr<arguments.length;Zr++){var Hn=arguments[Zr];if(Hn!==R&&Hn!==null)for(var Hr in Hn)Hn.hasOwnProperty(Hr)&&(lr[Hr]=Hn[Hr])}return lr}:ut=Object.assign;var wt=bt(function(zr,lr,Zr){for(var Hn=Object.keys(lr),Hr=0;Hr<Hn.length;)(!Zr||Zr&&zr[Hn[Hr]]===R)&&(zr[Hn[Hr]]=lr[Hn[Hr]]),Hr++;return zr},"extend","Use `assign`."),se=bt(function(zr,lr){return wt(zr,lr,!0)},"merge","Use `assign`.");function qe(vr,zr,lr){var Zr=zr.prototype,Hn;Hn=vr.prototype=Object.create(Zr),Hn.constructor=vr,Hn._super=Zr,lr&&ut(Hn,lr)}function me(vr,zr){return function(){return vr.apply(zr,arguments)}}function _e(vr,zr){return typeof vr==ue?vr.apply(zr&&zr[0]||R,zr):vr}function Te(vr,zr){return vr===R?zr:vr}function ht(vr,zr,lr){je(Ve(zr),function(Zr){vr.addEventListener(Zr,lr,!1)})}function We(vr,zr,lr){je(Ve(zr),function(Zr){vr.removeEventListener(Zr,lr,!1)})}function Ne(vr,zr){for(;vr;){if(vr==zr)return!0;vr=vr.parentNode}return!1}function he(vr,zr){return vr.indexOf(zr)>-1}function Ve(vr){return vr.trim().split(/\s+/g)}function ie(vr,zr,lr){if(vr.indexOf&&!lr)return vr.indexOf(zr);for(var Zr=0;Zr<vr.length;){if(lr&&vr[Zr][lr]==zr||!lr&&vr[Zr]===zr)return Zr;Zr++}return-1}function ze(vr){return Array.prototype.slice.call(vr,0)}function Le(vr,zr,lr){for(var Zr=[],Hn=[],Hr=0;Hr<vr.length;){var Bo=zr?vr[Hr][zr]:vr[Hr];ie(Hn,Bo)<0&&Zr.push(vr[Hr]),Hn[Hr]=Bo,Hr++}return lr&&(zr?Zr=Zr.sort(function(pr,at){return pr[zr]>at[zr]}):Zr=Zr.sort()),Zr}function Re(vr,zr){for(var lr,Zr,Hn=zr[0].toUpperCase()+zr.slice(1),Hr=0;Hr<O.length;){if(lr=O[Hr],Zr=lr?lr+Hn:zr,Zr in vr)return Zr;Hr++}return R}var st=1;function vt(){return st++}function Dt(vr){var zr=vr.ownerDocument||vr;return zr.defaultView||zr.parentWindow||C}var ar=/mobile|tablet|ip(ad|hone|od)|android/i,$t="ontouchstart"in C,ur=Re(C,"PointerEvent")!==R,we=$t&&ar.test(navigator.userAgent),At="touch",nt="pen",Lt="mouse",St="kinect",Ut=25,lt=1,Et=2,Zt=4,Be=8,He=1,ft=2,Z=4,J=8,K=16,B=ft|Z,j=J|K,ee=B|j,W=["x","y"],De=["clientX","clientY"];function ot(vr,zr){var lr=this;this.manager=vr,this.callback=zr,this.element=vr.element,this.target=vr.options.inputTarget,this.domHandler=function(Zr){_e(vr.options.enable,[vr])&&lr.handler(Zr)},this.init()}ot.prototype={handler:function(){},init:function(){this.evEl&&ht(this.element,this.evEl,this.domHandler),this.evTarget&&ht(this.target,this.evTarget,this.domHandler),this.evWin&&ht(Dt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&We(this.element,this.evEl,this.domHandler),this.evTarget&&We(this.target,this.evTarget,this.domHandler),this.evWin&&We(Dt(this.element),this.evWin,this.domHandler)}};function Wt(vr){var zr,lr=vr.options.inputClass;return lr?zr=lr:ur?zr=cr:we?zr=Dn:$t?zr=On:zr=Nr,new zr(vr,Ct)}function Ct(vr,zr,lr){var Zr=lr.pointers.length,Hn=lr.changedPointers.length,Hr=zr&lt&&Zr-Hn===0,Bo=zr&(Zt|Be)&&Zr-Hn===0;lr.isFirst=!!Hr,lr.isFinal=!!Bo,Hr&&(vr.session={}),lr.eventType=zr,Qt(vr,lr),vr.emit("hammer.input",lr),vr.recognize(lr),vr.session.prevInput=lr}function Qt(vr,zr){var lr=vr.session,Zr=zr.pointers,Hn=Zr.length;lr.firstInput||(lr.firstInput=Qr(zr)),Hn>1&&!lr.firstMultiple?lr.firstMultiple=Qr(zr):Hn===1&&(lr.firstMultiple=!1);var Hr=lr.firstInput,Bo=lr.firstMultiple,Yr=Bo?Bo.center:Hr.center,pr=zr.center=Mt(Zr);zr.timeStamp=pe(),zr.deltaTime=zr.timeStamp-Hr.timeStamp,zr.angle=_r(Yr,pr),zr.distance=Pr(Yr,pr),ir(lr,zr),zr.offsetDirection=Nt(zr.deltaX,zr.deltaY);var at=br(zr.deltaTime,zr.deltaX,zr.deltaY);zr.overallVelocityX=at.x,zr.overallVelocityY=at.y,zr.overallVelocity=re(at.x)>re(at.y)?at.x:at.y,zr.scale=Bo?zt(Bo.pointers,Zr):1,zr.rotation=Bo?kr(Bo.pointers,Zr):0,zr.maxPointers=lr.prevInput?zr.pointers.length>lr.prevInput.maxPointers?zr.pointers.length:lr.prevInput.maxPointers:zr.pointers.length,Er(lr,zr);var hr=vr.element;Ne(zr.srcEvent.target,hr)&&(hr=zr.srcEvent.target),zr.target=hr}function ir(vr,zr){var lr=zr.center,Zr=vr.offsetDelta||{},Hn=vr.prevDelta||{},Hr=vr.prevInput||{};(zr.eventType===lt||Hr.eventType===Zt)&&(Hn=vr.prevDelta={x:Hr.deltaX||0,y:Hr.deltaY||0},Zr=vr.offsetDelta={x:lr.x,y:lr.y}),zr.deltaX=Hn.x+(lr.x-Zr.x),zr.deltaY=Hn.y+(lr.y-Zr.y)}function Er(vr,zr){var lr=vr.lastInterval||zr,Zr=zr.timeStamp-lr.timeStamp,Hn,Hr,Bo,Yr;if(zr.eventType!=Be&&(Zr>Ut||lr.velocity===R)){var pr=zr.deltaX-lr.deltaX,at=zr.deltaY-lr.deltaY,hr=br(Zr,pr,at);Hr=hr.x,Bo=hr.y,Hn=re(hr.x)>re(hr.y)?hr.x:hr.y,Yr=Nt(pr,at),vr.lastInterval=zr}else Hn=lr.velocity,Hr=lr.velocityX,Bo=lr.velocityY,Yr=lr.direction;zr.velocity=Hn,zr.velocityX=Hr,zr.velocityY=Bo,zr.direction=Yr}function Qr(vr){for(var zr=[],lr=0;lr<vr.pointers.length;)zr[lr]={clientX:Ae(vr.pointers[lr].clientX),clientY:Ae(vr.pointers[lr].clientY)},lr++;return{timeStamp:pe(),pointers:zr,center:Mt(zr),deltaX:vr.deltaX,deltaY:vr.deltaY}}function Mt(vr){var zr=vr.length;if(zr===1)return{x:Ae(vr[0].clientX),y:Ae(vr[0].clientY)};for(var lr=0,Zr=0,Hn=0;Hn<zr;)lr+=vr[Hn].clientX,Zr+=vr[Hn].clientY,Hn++;return{x:Ae(lr/zr),y:Ae(Zr/zr)}}function br(vr,zr,lr){return{x:zr/vr||0,y:lr/vr||0}}function Nt(vr,zr){return vr===zr?He:re(vr)>=re(zr)?vr<0?ft:Z:zr<0?J:K}function Pr(vr,zr,lr){lr||(lr=W);var Zr=zr[lr[0]]-vr[lr[0]],Hn=zr[lr[1]]-vr[lr[1]];return Math.sqrt(Zr*Zr+Hn*Hn)}function _r(vr,zr,lr){lr||(lr=W);var Zr=zr[lr[0]]-vr[lr[0]],Hn=zr[lr[1]]-vr[lr[1]];return Math.atan2(Hn,Zr)*180/Math.PI}function kr(vr,zr){return _r(zr[1],zr[0],De)+_r(vr[1],vr[0],De)}function zt(vr,zr){return Pr(zr[0],zr[1],De)/Pr(vr[0],vr[1],De)}var mr={mousedown:lt,mousemove:Et,mouseup:Zt},Or="mousedown",X="mousemove mouseup";function Nr(){this.evEl=Or,this.evWin=X,this.pressed=!1,ot.apply(this,arguments)}qe(Nr,ot,{handler:function(zr){var lr=mr[zr.type];lr&lt&&zr.button===0&&(this.pressed=!0),lr&Et&&zr.which!==1&&(lr=Zt),this.pressed&&(lr&Zt&&(this.pressed=!1),this.callback(this.manager,lr,{pointers:[zr],changedPointers:[zr],pointerType:Lt,srcEvent:zr}))}});var Xe={pointerdown:lt,pointermove:Et,pointerup:Zt,pointercancel:Be,pointerout:Be},xe={2:At,3:nt,4:Lt,5:St},rt="pointerdown",kt="pointermove pointerup pointercancel";!T&&C.MSPointerEvent&&!C.PointerEvent&&(rt="MSPointerDown",kt="MSPointerMove MSPointerUp MSPointerCancel");function cr(){this.evEl=rt,this.evWin=kt,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}qe(cr,ot,{handler:function(zr){var lr=this.store,Zr=!1,Hn=zr.type.toLowerCase().replace("ms",""),Hr=Xe[Hn],Bo=xe[zr.pointerType]||zr.pointerType,Yr=Bo==At,pr=ie(lr,zr.pointerId,"pointerId");Hr&lt&&(zr.button===0||Yr)?pr<0&&(lr.push(zr),pr=lr.length-1):Hr&(Zt|Be)&&(Zr=!0),!(pr<0)&&(lr[pr]=zr,this.callback(this.manager,Hr,{pointers:lr,changedPointers:[zr],pointerType:Bo,srcEvent:zr}),Zr&&lr.splice(pr,1))}});var Ar={touchstart:lt,touchmove:Et,touchend:Zt,touchcancel:Be},Lr="touchstart",sr="touchstart touchmove touchend touchcancel";function Ge(){this.evTarget=Lr,this.evWin=sr,this.started=!1,ot.apply(this,arguments)}qe(Ge,ot,{handler:function(zr){var lr=Ar[zr.type];if(lr===lt&&(this.started=!0),!!this.started){var Zr=Gr.call(this,zr,lr);lr&(Zt|Be)&&Zr[0].length-Zr[1].length===0&&(this.started=!1),this.callback(this.manager,lr,{pointers:Zr[0],changedPointers:Zr[1],pointerType:At,srcEvent:zr})}}});function Gr(vr,zr){var lr=ze(vr.touches),Zr=ze(vr.changedTouches);return zr&(Zt|Be)&&(lr=Le(lr.concat(Zr),"identifier",!0)),[lr,Zr]}var on={touchstart:lt,touchmove:Et,touchend:Zt,touchcancel:Be},cn="touchstart touchmove touchend touchcancel";function Dn(){this.evTarget=cn,this.targetIds={},ot.apply(this,arguments)}qe(Dn,ot,{handler:function(zr){var lr=on[zr.type],Zr=ci.call(this,zr,lr);Zr&&this.callback(this.manager,lr,{pointers:Zr[0],changedPointers:Zr[1],pointerType:At,srcEvent:zr})}});function ci(vr,zr){var lr=ze(vr.touches),Zr=this.targetIds;if(zr&(lt|Et)&&lr.length===1)return Zr[lr[0].identifier]=!0,[lr,lr];var Hn,Hr,Bo=ze(vr.changedTouches),Yr=[],pr=this.target;if(Hr=lr.filter(function(at){return Ne(at.target,pr)}),zr===lt)for(Hn=0;Hn<Hr.length;)Zr[Hr[Hn].identifier]=!0,Hn++;for(Hn=0;Hn<Bo.length;)Zr[Bo[Hn].identifier]&&Yr.push(Bo[Hn]),zr&(Zt|Be)&&delete Zr[Bo[Hn].identifier],Hn++;if(Yr.length)return[Le(Hr.concat(Yr),"identifier",!0),Yr]}var ia=2500,Vi=25;function On(){ot.apply(this,arguments);var vr=me(this.handler,this);this.touch=new Dn(this.manager,vr),this.mouse=new Nr(this.manager,vr),this.primaryTouch=null,this.lastTouches=[]}qe(On,ot,{handler:function(zr,lr,Zr){var Hn=Zr.pointerType==At,Hr=Zr.pointerType==Lt;if(!(Hr&&Zr.sourceCapabilities&&Zr.sourceCapabilities.firesTouchEvents)){if(Hn)ji.call(this,lr,Zr);else if(Hr&&Hi.call(this,Zr))return;this.callback(zr,lr,Zr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ji(vr,zr){vr&lt?(this.primaryTouch=zr.changedPointers[0].identifier,oi.call(this,zr)):vr&(Zt|Be)&&oi.call(this,zr)}function oi(vr){var zr=vr.changedPointers[0];if(zr.identifier===this.primaryTouch){var lr={x:zr.clientX,y:zr.clientY};this.lastTouches.push(lr);var Zr=this.lastTouches,Hn=function(){var Hr=Zr.indexOf(lr);Hr>-1&&Zr.splice(Hr,1)};setTimeout(Hn,ia)}}function Hi(vr){for(var zr=vr.srcEvent.clientX,lr=vr.srcEvent.clientY,Zr=0;Zr<this.lastTouches.length;Zr++){var Hn=this.lastTouches[Zr],Hr=Math.abs(zr-Hn.x),Bo=Math.abs(lr-Hn.y);if(Hr<=Vi&&Bo<=Vi)return!0}return!1}var Ca=T?R:Re(F.style,"touchAction"),Wi=Ca!==R,jo="compute",uo="auto",Pn="manipulation",bn="none",Oi="pan-x",di="pan-y",va=Ta();function wa(vr,zr){this.manager=vr,this.set(zr)}wa.prototype={set:function(vr){vr==jo&&(vr=this.compute()),Wi&&this.manager.element.style&&va[vr]&&(this.manager.element.style[Ca]=vr),this.actions=vr.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var vr=[];return je(this.manager.recognizers,function(zr){_e(zr.options.enable,[zr])&&(vr=vr.concat(zr.getTouchAction()))}),Aa(vr.join(" "))},preventDefaults:function(vr){var zr=vr.srcEvent,lr=vr.offsetDirection;if(this.manager.session.prevented){zr.preventDefault();return}var Zr=this.actions,Hn=he(Zr,bn)&&!va[bn],Hr=he(Zr,di)&&!va[di],Bo=he(Zr,Oi)&&!va[Oi];if(Hn){var Yr=vr.pointers.length===1,pr=vr.distance<2,at=vr.deltaTime<250;if(Yr&&pr&&at)return}if(!(Bo&&Hr)&&(Hn||Hr&&lr&B||Bo&&lr&j))return this.preventSrc(zr)},preventSrc:function(vr){this.manager.session.prevented=!0,vr.preventDefault()}};function Aa(vr){if(he(vr,bn))return bn;var zr=he(vr,Oi),lr=he(vr,di);return zr&&lr?bn:zr||lr?zr?Oi:di:he(vr,Pn)?Pn:uo}function Ta(){if(!Wi)return!1;var vr={};if(T)return vr;var zr=C.CSS&&C.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(lr){vr[lr]=zr?C.CSS.supports("touch-action",lr):!0}),vr}var ma=1,Da=2,Uo=4,ha=8,xa=ha,eo=16,Ee=32;function Po(vr){this.options=ut({},this.defaults,vr||{}),this.id=vt(),this.manager=null,this.options.enable=Te(this.options.enable,!0),this.state=ma,this.simultaneous={},this.requireFail=[]}Po.prototype={defaults:{},set:function(vr){return ut(this.options,vr),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(vr){if(ke(vr,"recognizeWith",this))return this;var zr=this.simultaneous;return vr=qo(vr,this),zr[vr.id]||(zr[vr.id]=vr,vr.recognizeWith(this)),this},dropRecognizeWith:function(vr){return ke(vr,"dropRecognizeWith",this)?this:(vr=qo(vr,this),delete this.simultaneous[vr.id],this)},requireFailure:function(vr){if(ke(vr,"requireFailure",this))return this;var zr=this.requireFail;return vr=qo(vr,this),ie(zr,vr)===-1&&(zr.push(vr),vr.requireFailure(this)),this},dropRequireFailure:function(vr){if(ke(vr,"dropRequireFailure",this))return this;vr=qo(vr,this);var zr=ie(this.requireFail,vr);return zr>-1&&this.requireFail.splice(zr,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(vr){return!!this.simultaneous[vr.id]},emit:function(vr){var zr=this,lr=this.state;function Zr(Hn){zr.manager.emit(Hn,vr)}lr<ha&&Zr(zr.options.event+Hs(lr)),Zr(zr.options.event),vr.additionalEvent&&Zr(vr.additionalEvent),lr>=ha&&Zr(zr.options.event+Hs(lr))},tryEmit:function(vr){if(this.canEmit())return this.emit(vr);this.state=Ee},canEmit:function(){for(var vr=0;vr<this.requireFail.length;){if(!(this.requireFail[vr].state&(Ee|ma)))return!1;vr++}return!0},recognize:function(vr){var zr=ut({},vr);if(!_e(this.options.enable,[this,zr])){this.reset(),this.state=Ee;return}this.state&(xa|eo|Ee)&&(this.state=ma),this.state=this.process(zr),this.state&(Da|Uo|ha|eo)&&this.tryEmit(zr)},process:function(vr){},getTouchAction:function(){},reset:function(){}};function Hs(vr){return vr&eo?"cancel":vr&ha?"end":vr&Uo?"move":vr&Da?"start":""}function no(vr){return vr==K?"down":vr==J?"up":vr==ft?"left":vr==Z?"right":""}function qo(vr,zr){var lr=zr.manager;return lr?lr.get(vr):vr}function os(){Po.apply(this,arguments)}qe(os,Po,{defaults:{pointers:1},attrTest:function(vr){var zr=this.options.pointers;return zr===0||vr.pointers.length===zr},process:function(vr){var zr=this.state,lr=vr.eventType,Zr=zr&(Da|Uo),Hn=this.attrTest(vr);return Zr&&(lr&Be||!Hn)?zr|eo:Zr||Hn?lr&Zt?zr|ha:zr&Da?zr|Uo:Da:Ee}});function Go(){os.apply(this,arguments),this.pX=null,this.pY=null}qe(Go,os,{defaults:{event:"pan",threshold:10,pointers:1,direction:ee},getTouchAction:function(){var vr=this.options.direction,zr=[];return vr&B&&zr.push(di),vr&j&&zr.push(Oi),zr},directionTest:function(vr){var zr=this.options,lr=!0,Zr=vr.distance,Hn=vr.direction,Hr=vr.deltaX,Bo=vr.deltaY;return Hn&zr.direction||(zr.direction&B?(Hn=Hr===0?He:Hr<0?ft:Z,lr=Hr!=this.pX,Zr=Math.abs(vr.deltaX)):(Hn=Bo===0?He:Bo<0?J:K,lr=Bo!=this.pY,Zr=Math.abs(vr.deltaY))),vr.direction=Hn,lr&&Zr>zr.threshold&&Hn&zr.direction},attrTest:function(vr){return os.prototype.attrTest.call(this,vr)&&(this.state&Da||!(this.state&Da)&&this.directionTest(vr))},emit:function(vr){this.pX=vr.deltaX,this.pY=vr.deltaY;var zr=no(vr.direction);zr&&(vr.additionalEvent=this.options.event+zr),this._super.emit.call(this,vr)}});function Wo(){os.apply(this,arguments)}qe(Wo,os,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bn]},attrTest:function(vr){return this._super.attrTest.call(this,vr)&&(Math.abs(vr.scale-1)>this.options.threshold||this.state&Da)},emit:function(vr){if(vr.scale!==1){var zr=vr.scale<1?"in":"out";vr.additionalEvent=this.options.event+zr}this._super.emit.call(this,vr)}});function za(){Po.apply(this,arguments),this._timer=null,this._input=null}qe(za,Po,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[uo]},process:function(vr){var zr=this.options,lr=vr.pointers.length===zr.pointers,Zr=vr.distance<zr.threshold,Hn=vr.deltaTime>zr.time;if(this._input=vr,!Zr||!lr||vr.eventType&(Zt|Be)&&!Hn)this.reset();else if(vr.eventType&lt)this.reset(),this._timer=fe(function(){this.state=xa,this.tryEmit()},zr.time,this);else if(vr.eventType&Zt)return xa;return Ee},reset:function(){clearTimeout(this._timer)},emit:function(vr){this.state===xa&&(vr&&vr.eventType&Zt?this.manager.emit(this.options.event+"up",vr):(this._input.timeStamp=pe(),this.manager.emit(this.options.event,this._input)))}});function Tu(){os.apply(this,arguments)}qe(Tu,os,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bn]},attrTest:function(vr){return this._super.attrTest.call(this,vr)&&(Math.abs(vr.rotation)>this.options.threshold||this.state&Da)}});function Cs(){os.apply(this,arguments)}qe(Cs,os,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:B|j,pointers:1},getTouchAction:function(){return Go.prototype.getTouchAction.call(this)},attrTest:function(vr){var zr=this.options.direction,lr;return zr&(B|j)?lr=vr.overallVelocity:zr&B?lr=vr.overallVelocityX:zr&j&&(lr=vr.overallVelocityY),this._super.attrTest.call(this,vr)&&zr&vr.offsetDirection&&vr.distance>this.options.threshold&&vr.maxPointers==this.options.pointers&&re(lr)>this.options.velocity&&vr.eventType&Zt},emit:function(vr){var zr=no(vr.offsetDirection);zr&&this.manager.emit(this.options.event+zr,vr),this.manager.emit(this.options.event,vr)}});function Zs(){Po.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}qe(Zs,Po,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pn]},process:function(vr){var zr=this.options,lr=vr.pointers.length===zr.pointers,Zr=vr.distance<zr.threshold,Hn=vr.deltaTime<zr.time;if(this.reset(),vr.eventType&lt&&this.count===0)return this.failTimeout();if(Zr&&Hn&&lr){if(vr.eventType!=Zt)return this.failTimeout();var Hr=this.pTime?vr.timeStamp-this.pTime<zr.interval:!0,Bo=!this.pCenter||Pr(this.pCenter,vr.center)<zr.posThreshold;this.pTime=vr.timeStamp,this.pCenter=vr.center,!Bo||!Hr?this.count=1:this.count+=1,this._input=vr;var Yr=this.count%zr.taps;if(Yr===0)return this.hasRequireFailures()?(this._timer=fe(function(){this.state=xa,this.tryEmit()},zr.interval,this),Da):xa}return Ee},failTimeout:function(){return this._timer=fe(function(){this.state=Ee},this.options.interval,this),Ee},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ts(vr,zr){return zr=zr||{},zr.recognizers=Te(zr.recognizers,ts.defaults.preset),new ls(vr,zr)}ts.VERSION="2.0.7",ts.defaults={domEvents:!1,touchAction:jo,enable:!0,inputTarget:null,inputClass:null,preset:[[Tu,{enable:!1}],[Wo,{enable:!1},["rotate"]],[Cs,{direction:B}],[Go,{direction:B},["swipe"]],[Zs],[Zs,{event:"doubletap",taps:2},["tap"]],[za]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vs=1,ou=2;function ls(vr,zr){this.options=ut({},ts.defaults,zr||{}),this.options.inputTarget=this.options.inputTarget||vr,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=vr,this.input=Wt(this),this.touchAction=new wa(this,this.options.touchAction),Di(this,!0),je(this.options.recognizers,function(lr){var Zr=this.add(new lr[0](lr[1]));lr[2]&&Zr.recognizeWith(lr[2]),lr[3]&&Zr.requireFailure(lr[3])},this)}ls.prototype={set:function(vr){return ut(this.options,vr),vr.touchAction&&this.touchAction.update(),vr.inputTarget&&(this.input.destroy(),this.input.target=vr.inputTarget,this.input.init()),this},stop:function(vr){this.session.stopped=vr?ou:Vs},recognize:function(vr){var zr=this.session;if(!zr.stopped){this.touchAction.preventDefaults(vr);var lr,Zr=this.recognizers,Hn=zr.curRecognizer;(!Hn||Hn&&Hn.state&xa)&&(Hn=zr.curRecognizer=null);for(var Hr=0;Hr<Zr.length;)lr=Zr[Hr],zr.stopped!==ou&&(!Hn||lr==Hn||lr.canRecognizeWith(Hn))?lr.recognize(vr):lr.reset(),!Hn&&lr.state&(Da|Uo|ha)&&(Hn=zr.curRecognizer=lr),Hr++}},get:function(vr){if(vr instanceof Po)return vr;for(var zr=this.recognizers,lr=0;lr<zr.length;lr++)if(zr[lr].options.event==vr)return zr[lr];return null},add:function(vr){if(ke(vr,"add",this))return this;var zr=this.get(vr.options.event);return zr&&this.remove(zr),this.recognizers.push(vr),vr.manager=this,this.touchAction.update(),vr},remove:function(vr){if(ke(vr,"remove",this))return this;if(vr=this.get(vr),vr){var zr=this.recognizers,lr=ie(zr,vr);lr!==-1&&(zr.splice(lr,1),this.touchAction.update())}return this},on:function(vr,zr){if(vr!==R&&zr!==R){var lr=this.handlers;return je(Ve(vr),function(Zr){lr[Zr]=lr[Zr]||[],lr[Zr].push(zr)}),this}},off:function(vr,zr){if(vr!==R){var lr=this.handlers;return je(Ve(vr),function(Zr){zr?lr[Zr]&&lr[Zr].splice(ie(lr[Zr],zr),1):delete lr[Zr]}),this}},emit:function(vr,zr){this.options.domEvents&&As(vr,zr);var lr=this.handlers[vr]&&this.handlers[vr].slice();if(!(!lr||!lr.length)){zr.type=vr,zr.preventDefault=function(){zr.srcEvent.preventDefault()};for(var Zr=0;Zr<lr.length;)lr[Zr](zr),Zr++}},destroy:function(){this.element&&Di(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Di(vr,zr){var lr=vr.element;if(lr.style){var Zr;je(vr.options.cssProps,function(Hn,Hr){Zr=Re(lr.style,Hr),zr?(vr.oldCssProps[Zr]=lr.style[Zr],lr.style[Zr]=Hn):lr.style[Zr]=vr.oldCssProps[Zr]||""}),zr||(vr.oldCssProps={})}}function As(vr,zr){if(!T){var lr=l.createEvent("Event");lr.initEvent(vr,!0,!0),lr.gesture=zr,zr.target.dispatchEvent(lr)}}if(!T){ut(ts,{INPUT_START:lt,INPUT_MOVE:Et,INPUT_END:Zt,INPUT_CANCEL:Be,STATE_POSSIBLE:ma,STATE_BEGAN:Da,STATE_CHANGED:Uo,STATE_ENDED:ha,STATE_RECOGNIZED:xa,STATE_CANCELLED:eo,STATE_FAILED:Ee,DIRECTION_NONE:He,DIRECTION_LEFT:ft,DIRECTION_RIGHT:Z,DIRECTION_UP:J,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:B,DIRECTION_VERTICAL:j,DIRECTION_ALL:ee,Manager:ls,Input:ot,TouchAction:wa,TouchInput:Dn,MouseInput:Nr,PointerEventInput:cr,TouchMouseInput:On,SingleTouchInput:Ge,Recognizer:Po,AttrRecognizer:os,Tap:Zs,Pan:Go,Swipe:Cs,Pinch:Wo,Rotate:Tu,Press:za,on:ht,off:We,each:je,merge:se,extend:wt,assign:ut,inherit:qe,bindFn:me,prefixed:Re});var Rs=typeof window!="undefined"?window:typeof self!="undefined"?self:{};Rs.Hammer=ts,v=function(){return ts}.call(te,m,te,Qe),v!==R&&(Qe.exports=v)}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")},88307:function(Qe,te,m){(function(v,C){Qe.exports=C(m(51260))})(this,function(v){"use strict";var C=function(jt){return jt instanceof Uint8Array||jt instanceof Uint16Array||jt instanceof Uint32Array||jt instanceof Int8Array||jt instanceof Int16Array||jt instanceof Int32Array||jt instanceof Float32Array||jt instanceof Float64Array||jt instanceof Uint8ClampedArray},l=function(jt,Vr){for(var Ln=Object.keys(Vr),Ci=0;Ci<Ln.length;++Ci)jt[Ln[Ci]]=Vr[Ln[Ci]];return jt},$=`
`;function R(jt){return typeof atob!="undefined"?atob(jt):"base64:"+jt}function z(jt){var Vr=new Error("(regl) "+jt);throw console.error(Vr),Vr}function L(jt,Vr){jt||z(Vr)}function T(jt){return jt?": "+jt:""}function O(jt,Vr,Ln){jt in Vr||z("unknown parameter ("+jt+")"+T(Ln)+". possible values: "+Object.keys(Vr).join())}function F(jt,Vr){C(jt)||z("invalid parameter type"+T(Vr)+". must be a typed array")}function ue(jt,Vr){switch(Vr){case"number":return typeof jt=="number";case"object":return typeof jt=="object";case"string":return typeof jt=="string";case"boolean":return typeof jt=="boolean";case"function":return typeof jt=="function";case"undefined":return typeof jt=="undefined";case"symbol":return typeof jt=="symbol"}}function Ae(jt,Vr,Ln){ue(jt,Vr)||z("invalid parameter type"+T(Ln)+". expected "+Vr+", got "+typeof jt)}function re(jt,Vr){jt>=0&&(jt|0)===jt||z("invalid parameter type, ("+jt+")"+T(Vr)+". must be a nonnegative integer")}function pe(jt,Vr,Ln){Vr.indexOf(jt)<0&&z("invalid value"+T(Ln)+". must be one of: "+Vr)}var fe=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function ke(jt){Object.keys(jt).forEach(function(Vr){fe.indexOf(Vr)<0&&z('invalid regl constructor argument "'+Vr+'". must be one of '+fe)})}function je(jt,Vr){for(jt=jt+"";jt.length<Vr;)jt=" "+jt;return jt}function bt(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ut(jt,Vr){this.number=jt,this.line=Vr,this.errors=[]}function wt(jt,Vr,Ln){this.file=jt,this.line=Vr,this.message=Ln}function se(){var jt=new Error,Vr=(jt.stack||jt).toString(),Ln=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Vr);if(Ln)return Ln[1];var Ci=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Vr);return Ci?Ci[1]:"unknown"}function qe(){var jt=new Error,Vr=(jt.stack||jt).toString(),Ln=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Vr);if(Ln)return Ln[1];var Ci=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Vr);return Ci?Ci[1]:"unknown"}function me(jt,Vr){var Ln=jt.split(`
`),Ci=1,aa=0,Ai={unknown:new bt,0:new bt};Ai.unknown.name=Ai[0].name=Vr||se(),Ai.unknown.lines.push(new ut(0,""));for(var Gi=0;Gi<Ln.length;++Gi){var Ea=Ln[Gi],Pa=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ea);if(Pa)switch(Pa[1]){case"line":var Ra=/(\d+)(\s+\d+)?/.exec(Pa[2]);Ra&&(Ci=Ra[1]|0,Ra[2]&&(aa=Ra[2]|0,aa in Ai||(Ai[aa]=new bt)));break;case"define":var Za=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Pa[2]);Za&&(Ai[aa].name=Za[1]?R(Za[2]):Za[2]);break}Ai[aa].lines.push(new ut(Ci++,Ea))}return Object.keys(Ai).forEach(function(Ha){var $a=Ai[Ha];$a.lines.forEach(function(ya){$a.index[ya.number]=ya})}),Ai}function _e(jt){var Vr=[];return jt.split(`
`).forEach(function(Ln){if(!(Ln.length<5)){var Ci=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ln);Ci?Vr.push(new wt(Ci[1]|0,Ci[2]|0,Ci[3].trim())):Ln.length>0&&Vr.push(new wt("unknown",0,Ln))}}),Vr}function Te(jt,Vr){Vr.forEach(function(Ln){var Ci=jt[Ln.file];if(Ci){var aa=Ci.index[Ln.line];if(aa){aa.errors.push(Ln),Ci.hasErrors=!0;return}}jt.unknown.hasErrors=!0,jt.unknown.lines[0].errors.push(Ln)})}function ht(jt,Vr,Ln,Ci,aa){if(!jt.getShaderParameter(Vr,jt.COMPILE_STATUS)){var Ai=jt.getShaderInfoLog(Vr),Gi=Ci===jt.FRAGMENT_SHADER?"fragment":"vertex";Le(Ln,"string",Gi+" shader source must be a string",aa);var Ea=me(Ln,aa),Pa=_e(Ai);Te(Ea,Pa),Object.keys(Ea).forEach(function(Ra){var Za=Ea[Ra];if(!Za.hasErrors)return;var Ha=[""],$a=[""];function ya(Ua,ui){Ha.push(Ua),$a.push(ui||"")}ya("file number "+Ra+": "+Za.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Za.lines.forEach(function(Ua){if(Ua.errors.length>0){ya(je(Ua.number,4)+"|  ","background-color:yellow; font-weight:bold"),ya(Ua.line+$,"color:red; background-color:yellow; font-weight:bold");var ui=0;Ua.errors.forEach(function(Ni){var La=Ni.message,Ya=/^\s*'(.*)'\s*:\s*(.*)$/.exec(La);if(Ya){var _a=Ya[1];switch(La=Ya[2],_a){case"assign":_a="=";break}ui=Math.max(Ua.line.indexOf(_a,ui),0)}else ui=0;ya(je("| ",6)),ya(je("^^^",ui+3)+$,"font-weight:bold"),ya(je("| ",6)),ya(La+$,"font-weight:bold")}),ya(je("| ",6)+$)}else ya(je(Ua.number,4)+"|  "),ya(Ua.line+$,"color:red")}),typeof document!="undefined"&&!window.chrome?($a[0]=Ha.join("%c"),console.log.apply(console,$a)):console.log(Ha.join(""))}),L.raise("Error compiling "+Gi+" shader, "+Ea[0].name)}}function We(jt,Vr,Ln,Ci,aa){if(!jt.getProgramParameter(Vr,jt.LINK_STATUS)){var Ai=jt.getProgramInfoLog(Vr),Gi=me(Ln,aa),Ea=me(Ci,aa),Pa='Error linking program with vertex shader, "'+Ea[0].name+'", and fragment shader "'+Gi[0].name+'"';typeof document!="undefined"?console.log("%c"+Pa+$+"%c"+Ai,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Pa+$+Ai),L.raise(Pa)}}function Ne(jt){jt._commandRef=se()}function he(jt,Vr,Ln,Ci){Ne(jt);function aa(Pa){return Pa?Ci.id(Pa):0}jt._fragId=aa(jt.static.frag),jt._vertId=aa(jt.static.vert);function Ai(Pa,Ra){Object.keys(Ra).forEach(function(Za){Pa[Ci.id(Za)]=!0})}var Gi=jt._uniformSet={};Ai(Gi,Vr.static),Ai(Gi,Vr.dynamic);var Ea=jt._attributeSet={};Ai(Ea,Ln.static),Ai(Ea,Ln.dynamic),jt._hasCount="count"in jt.static||"count"in jt.dynamic||"elements"in jt.static||"elements"in jt.dynamic}function Ve(jt,Vr){var Ln=qe();z(jt+" in command "+(Vr||se())+(Ln==="unknown"?"":" called from "+Ln))}function ie(jt,Vr,Ln){jt||Ve(Vr,Ln||se())}function ze(jt,Vr,Ln,Ci){jt in Vr||Ve("unknown parameter ("+jt+")"+T(Ln)+". possible values: "+Object.keys(Vr).join(),Ci||se())}function Le(jt,Vr,Ln,Ci){ue(jt,Vr)||Ve("invalid parameter type"+T(Ln)+". expected "+Vr+", got "+typeof jt,Ci||se())}function Re(jt){jt()}function st(jt,Vr,Ln){jt.texture?pe(jt.texture._texture.internalformat,Vr,"unsupported texture format for attachment"):pe(jt.renderbuffer._renderbuffer.format,Ln,"unsupported renderbuffer format for attachment")}var vt=33071,Dt=9728,ar=9984,$t=9985,ur=9986,we=9987,At=5120,nt=5121,Lt=5122,St=5123,Ut=5124,lt=5125,Et=5126,Zt=32819,Be=32820,He=33635,ft=34042,Z=36193,J={};J[At]=J[nt]=1,J[Lt]=J[St]=J[Z]=J[He]=J[Zt]=J[Be]=2,J[Ut]=J[lt]=J[Et]=J[ft]=4;function K(jt,Vr){return jt===Be||jt===Zt||jt===He?2:jt===ft?4:J[jt]*Vr}function B(jt){return!(jt&jt-1)&&!!jt}function j(jt,Vr,Ln){var Ci,aa=Vr.width,Ai=Vr.height,Gi=Vr.channels;L(aa>0&&aa<=Ln.maxTextureSize&&Ai>0&&Ai<=Ln.maxTextureSize,"invalid texture shape"),(jt.wrapS!==vt||jt.wrapT!==vt)&&L(B(aa)&&B(Ai),"incompatible wrap mode for texture, both width and height must be power of 2"),Vr.mipmask===1?aa!==1&&Ai!==1&&L(jt.minFilter!==ar&&jt.minFilter!==ur&&jt.minFilter!==$t&&jt.minFilter!==we,"min filter requires mipmap"):(L(B(aa)&&B(Ai),"texture must be a square power of 2 to support mipmapping"),L(Vr.mipmask===(aa<<1)-1,"missing or incomplete mipmap data")),Vr.type===Et&&(Ln.extensions.indexOf("oes_texture_float_linear")<0&&L(jt.minFilter===Dt&&jt.magFilter===Dt,"filter not supported, must enable oes_texture_float_linear"),L(!jt.genMipmaps,"mipmap generation not supported with float textures"));var Ea=Vr.images;for(Ci=0;Ci<16;++Ci)if(Ea[Ci]){var Pa=aa>>Ci,Ra=Ai>>Ci;L(Vr.mipmask&1<<Ci,"missing mipmap data");var Za=Ea[Ci];if(L(Za.width===Pa&&Za.height===Ra,"invalid shape for mip images"),L(Za.format===Vr.format&&Za.internalformat===Vr.internalformat&&Za.type===Vr.type,"incompatible type for mip image"),!Za.compressed)if(Za.data){var Ha=Math.ceil(K(Za.type,Gi)*Pa/Za.unpackAlignment)*Za.unpackAlignment;L(Za.data.byteLength===Ha*Ra,"invalid data for image, buffer size is inconsistent with image format")}else Za.element||Za.copy}else jt.genMipmaps||L((Vr.mipmask&1<<Ci)===0,"extra mipmap data");Vr.compressed&&L(!jt.genMipmaps,"mipmap generation for compressed images not supported")}function ee(jt,Vr,Ln,Ci){var aa=jt.width,Ai=jt.height,Gi=jt.channels;L(aa>0&&aa<=Ci.maxTextureSize&&Ai>0&&Ai<=Ci.maxTextureSize,"invalid texture shape"),L(aa===Ai,"cube map must be square"),L(Vr.wrapS===vt&&Vr.wrapT===vt,"wrap mode not supported by cube map");for(var Ea=0;Ea<Ln.length;++Ea){var Pa=Ln[Ea];L(Pa.width===aa&&Pa.height===Ai,"inconsistent cube map face shape"),Vr.genMipmaps&&(L(!Pa.compressed,"can not generate mipmap for compressed textures"),L(Pa.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ra=Pa.images,Za=0;Za<16;++Za){var Ha=Ra[Za];if(Ha){var $a=aa>>Za,ya=Ai>>Za;L(Pa.mipmask&1<<Za,"missing mipmap data"),L(Ha.width===$a&&Ha.height===ya,"invalid shape for mip images"),L(Ha.format===jt.format&&Ha.internalformat===jt.internalformat&&Ha.type===jt.type,"incompatible type for mip image"),Ha.compressed||(Ha.data?L(Ha.data.byteLength===$a*ya*Math.max(K(Ha.type,Gi),Ha.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ha.element||Ha.copy)}}}}var W=l(L,{optional:Re,raise:z,commandRaise:Ve,command:ie,parameter:O,commandParameter:ze,constructor:ke,type:Ae,commandType:Le,isTypedArray:F,nni:re,oneOf:pe,shaderError:ht,linkError:We,callSite:qe,saveCommandRef:Ne,saveDrawInfo:he,framebufferFormat:st,guessCommand:se,texture2D:j,textureCube:ee}),De=0,ot=0,Wt=5,Ct=6;function Qt(jt,Vr){this.id=De++,this.type=jt,this.data=Vr}function ir(jt){return jt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Er(jt){if(jt.length===0)return[];var Vr=jt.charAt(0),Ln=jt.charAt(jt.length-1);if(jt.length>1&&Vr===Ln&&(Vr==='"'||Vr==="'"))return['"'+ir(jt.substr(1,jt.length-2))+'"'];var Ci=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(jt);if(Ci)return Er(jt.substr(0,Ci.index)).concat(Er(Ci[1])).concat(Er(jt.substr(Ci.index+Ci[0].length)));var aa=jt.split(".");if(aa.length===1)return['"'+ir(jt)+'"'];for(var Ai=[],Gi=0;Gi<aa.length;++Gi)Ai=Ai.concat(Er(aa[Gi]));return Ai}function Qr(jt){return"["+Er(jt).join("][")+"]"}function Mt(jt,Vr){return new Qt(jt,Qr(Vr+""))}function br(jt){return typeof jt=="function"&&!jt._reglType||jt instanceof Qt}function Nt(jt,Vr){if(typeof jt=="function")return new Qt(ot,jt);if(typeof jt=="number"||typeof jt=="boolean")return new Qt(Wt,jt);if(Array.isArray(jt))return new Qt(Ct,jt.map(function(Ln,Ci){return Nt(Ln,Vr+"["+Ci+"]")}));if(jt instanceof Qt)return jt;W(!1,"invalid option type in uniform "+Vr)}var Pr={DynamicVariable:Qt,define:Mt,isDynamic:br,unbox:Nt,accessor:Qr},_r={next:typeof requestAnimationFrame=="function"?function(jt){return requestAnimationFrame(jt)}:function(jt){return setTimeout(jt,16)},cancel:typeof cancelAnimationFrame=="function"?function(jt){return cancelAnimationFrame(jt)}:clearTimeout},kr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,zt=kr?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function mr(){var jt={"":0},Vr=[""];return{id:function(Ln){var Ci=jt[Ln];return Ci||(Ci=jt[Ln]=Vr.length,Vr.push(Ln),Ci)},str:function(Ln){return Vr[Ln]}}}function Or(jt,Vr,Ln){var Ci=document.createElement("canvas");l(Ci.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),jt.appendChild(Ci),jt===document.body&&(Ci.style.position="absolute",l(jt.style,{margin:0,padding:0}));function aa(){var Ea=window.innerWidth,Pa=window.innerHeight;if(jt!==document.body){var Ra=Ci.getBoundingClientRect();Ea=Ra.right-Ra.left,Pa=Ra.bottom-Ra.top}Ci.width=Ln*Ea,Ci.height=Ln*Pa}var Ai;jt!==document.body&&typeof ResizeObserver=="function"?(Ai=new ResizeObserver(function(){setTimeout(aa)}),Ai.observe(jt)):window.addEventListener("resize",aa,!1);function Gi(){Ai?Ai.disconnect():window.removeEventListener("resize",aa),jt.removeChild(Ci)}return aa(),{canvas:Ci,onDestroy:Gi}}function X(jt,Vr){function Ln(Ci){try{return jt.getContext(Ci,Vr)}catch(aa){return null}}return Ln("webgl")||Ln("experimental-webgl")||Ln("webgl-experimental")}function Nr(jt){return typeof jt.nodeName=="string"&&typeof jt.appendChild=="function"&&typeof jt.getBoundingClientRect=="function"}function Xe(jt){return typeof jt.drawArrays=="function"||typeof jt.drawElements=="function"}function xe(jt){return typeof jt=="string"?jt.split():(W(Array.isArray(jt),"invalid extension array"),jt)}function rt(jt){return typeof jt=="string"?(W(typeof document!="undefined","not supported outside of DOM"),document.querySelector(jt)):jt}function kt(jt){var Vr=jt||{},Ln,Ci,aa,Ai,Gi={},Ea=[],Pa=[],Ra=typeof window=="undefined"?1:window.devicePixelRatio,Za=!1,Ha=function(Ua){Ua&&W.raise(Ua)},$a=function(){};if(typeof Vr=="string"?(W(typeof document!="undefined","selector queries only supported in DOM environments"),Ln=document.querySelector(Vr),W(Ln,"invalid query string for element")):typeof Vr=="object"?Nr(Vr)?Ln=Vr:Xe(Vr)?(Ai=Vr,aa=Ai.canvas):(W.constructor(Vr),"gl"in Vr?Ai=Vr.gl:"canvas"in Vr?aa=rt(Vr.canvas):"container"in Vr&&(Ci=rt(Vr.container)),"attributes"in Vr&&(Gi=Vr.attributes,W.type(Gi,"object","invalid context attributes")),"extensions"in Vr&&(Ea=xe(Vr.extensions)),"optionalExtensions"in Vr&&(Pa=xe(Vr.optionalExtensions)),"onDone"in Vr&&(W.type(Vr.onDone,"function","invalid or missing onDone callback"),Ha=Vr.onDone),"profile"in Vr&&(Za=!!Vr.profile),"pixelRatio"in Vr&&(Ra=+Vr.pixelRatio,W(Ra>0,"invalid pixel ratio"))):W.raise("invalid arguments to regl"),Ln&&(Ln.nodeName.toLowerCase()==="canvas"?aa=Ln:Ci=Ln),!Ai){if(!aa){W(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var ya=Or(Ci||document.body,Ha,Ra);if(!ya)return null;aa=ya.canvas,$a=ya.onDestroy}Gi.premultipliedAlpha===void 0&&(Gi.premultipliedAlpha=!0),Ai=X(aa,Gi)}return Ai?{gl:Ai,canvas:aa,container:Ci,extensions:Ea,optionalExtensions:Pa,pixelRatio:Ra,profile:Za,onDone:Ha,onDestroy:$a}:($a(),Ha("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function cr(jt,Vr){var Ln={};function Ci(Ea){W.type(Ea,"string","extension name must be string");var Pa=Ea.toLowerCase(),Ra;try{Ra=Ln[Pa]=aa(Ea)}catch(Za){}return!!Ra}function aa(Ea){return jt.getExtension(Ea)?jt.getExtension(Ea):jt.getExtension(Ea.toLowerCase())?jt.getExtension(Ea.toLowerCase()):null}for(var Ai=0;Ai<Vr.extensions.length;++Ai){var Gi=Vr.extensions[Ai];if(!Ci(Gi))return Vr.onDestroy(),Vr.onDone('"'+Gi+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Vr.optionalExtensions.forEach(Ci),{extensions:Ln,restore:function(){Object.keys(Ln).forEach(function(Ea){if(Ln[Ea]&&!Ci(Ea))throw new Error("(regl): error restoring extension "+Ea)})}}}function Ar(jt,Vr){for(var Ln=Array(jt),Ci=0;Ci<jt;++Ci)Ln[Ci]=Vr(Ci);return Ln}var Lr=5120,sr=5121,Ge=5122,Gr=5123,on=5124,cn=5125,Dn=5126;function ci(jt){for(var Vr=16;Vr<=1<<28;Vr*=16)if(jt<=Vr)return Vr;return 0}function ia(jt){var Vr,Ln;return Vr=(jt>65535)<<4,jt>>>=Vr,Ln=(jt>255)<<3,jt>>>=Ln,Vr|=Ln,Ln=(jt>15)<<2,jt>>>=Ln,Vr|=Ln,Ln=(jt>3)<<1,jt>>>=Ln,Vr|=Ln,Vr|jt>>1}function Vi(){var jt=Ar(8,function(){return[]});function Vr(Ai){var Gi=ci(Ai),Ea=jt[ia(Gi)>>2];return Ea.length>0?Ea.pop():new ArrayBuffer(Gi)}function Ln(Ai){jt[ia(Ai.byteLength)>>2].push(Ai)}function Ci(Ai,Gi){var Ea=null;switch(Ai){case Lr:Ea=new Int8Array(Vr(Gi),0,Gi);break;case sr:Ea=new Uint8Array(Vr(Gi),0,Gi);break;case Ge:Ea=new Int16Array(Vr(2*Gi),0,Gi);break;case Gr:Ea=new Uint16Array(Vr(2*Gi),0,Gi);break;case on:Ea=new Int32Array(Vr(4*Gi),0,Gi);break;case cn:Ea=new Uint32Array(Vr(4*Gi),0,Gi);break;case Dn:Ea=new Float32Array(Vr(4*Gi),0,Gi);break;default:return null}return Ea.length!==Gi?Ea.subarray(0,Gi):Ea}function aa(Ai){Ln(Ai.buffer)}return{alloc:Vr,free:Ln,allocType:Ci,freeType:aa}}var On=Vi();On.zero=Vi();var ji=3408,oi=3410,Hi=3411,Ca=3412,Wi=3413,jo=3414,uo=3415,Pn=33901,bn=33902,Oi=3379,di=3386,va=34921,wa=36347,Aa=36348,Ta=35661,ma=35660,Da=34930,Uo=36349,ha=34076,xa=34024,eo=7936,Ee=7937,Po=7938,Hs=35724,no=34047,qo=36063,os=34852,Go=3553,Wo=34067,za=34069,Tu=33984,Cs=6408,Zs=5126,ts=5121,Vs=36160,ou=36053,ls=36064,Di=16384,As=function(jt,Vr){var Ln=1;Vr.ext_texture_filter_anisotropic&&(Ln=jt.getParameter(no));var Ci=1,aa=1;Vr.webgl_draw_buffers&&(Ci=jt.getParameter(os),aa=jt.getParameter(qo));var Ai=!!Vr.oes_texture_float;if(Ai){var Gi=jt.createTexture();jt.bindTexture(Go,Gi),jt.texImage2D(Go,0,Cs,1,1,0,Cs,Zs,null);var Ea=jt.createFramebuffer();if(jt.bindFramebuffer(Vs,Ea),jt.framebufferTexture2D(Vs,ls,Go,Gi,0),jt.bindTexture(Go,null),jt.checkFramebufferStatus(Vs)!==ou)Ai=!1;else{jt.viewport(0,0,1,1),jt.clearColor(1,0,0,1),jt.clear(Di);var Pa=On.allocType(Zs,4);jt.readPixels(0,0,1,1,Cs,Zs,Pa),jt.getError()?Ai=!1:(jt.deleteFramebuffer(Ea),jt.deleteTexture(Gi),Ai=Pa[0]===1),On.freeType(Pa)}}var Ra=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Za=!0;if(!Ra){var Ha=jt.createTexture(),$a=On.allocType(ts,36);jt.activeTexture(Tu),jt.bindTexture(Wo,Ha),jt.texImage2D(za,0,Cs,3,3,0,Cs,ts,$a),On.freeType($a),jt.bindTexture(Wo,null),jt.deleteTexture(Ha),Za=!jt.getError()}return{colorBits:[jt.getParameter(oi),jt.getParameter(Hi),jt.getParameter(Ca),jt.getParameter(Wi)],depthBits:jt.getParameter(jo),stencilBits:jt.getParameter(uo),subpixelBits:jt.getParameter(ji),extensions:Object.keys(Vr).filter(function(ya){return!!Vr[ya]}),maxAnisotropic:Ln,maxDrawbuffers:Ci,maxColorAttachments:aa,pointSizeDims:jt.getParameter(Pn),lineWidthDims:jt.getParameter(bn),maxViewportDims:jt.getParameter(di),maxCombinedTextureUnits:jt.getParameter(Ta),maxCubeMapSize:jt.getParameter(ha),maxRenderbufferSize:jt.getParameter(xa),maxTextureUnits:jt.getParameter(Da),maxTextureSize:jt.getParameter(Oi),maxAttributes:jt.getParameter(va),maxVertexUniforms:jt.getParameter(wa),maxVertexTextureUnits:jt.getParameter(ma),maxVaryingVectors:jt.getParameter(Aa),maxFragmentUniforms:jt.getParameter(Uo),glsl:jt.getParameter(Hs),renderer:jt.getParameter(Ee),vendor:jt.getParameter(eo),version:jt.getParameter(Po),readFloat:Ai,npotTextureCube:Za}};function Rs(jt){return!!jt&&typeof jt=="object"&&Array.isArray(jt.shape)&&Array.isArray(jt.stride)&&typeof jt.offset=="number"&&jt.shape.length===jt.stride.length&&(Array.isArray(jt.data)||C(jt.data))}var vr=function(jt){return Object.keys(jt).map(function(Vr){return jt[Vr]})},zr={shape:Yr,flatten:Bo};function lr(jt,Vr,Ln){for(var Ci=0;Ci<Vr;++Ci)Ln[Ci]=jt[Ci]}function Zr(jt,Vr,Ln,Ci){for(var aa=0,Ai=0;Ai<Vr;++Ai)for(var Gi=jt[Ai],Ea=0;Ea<Ln;++Ea)Ci[aa++]=Gi[Ea]}function Hn(jt,Vr,Ln,Ci,aa,Ai){for(var Gi=Ai,Ea=0;Ea<Vr;++Ea)for(var Pa=jt[Ea],Ra=0;Ra<Ln;++Ra)for(var Za=Pa[Ra],Ha=0;Ha<Ci;++Ha)aa[Gi++]=Za[Ha]}function Hr(jt,Vr,Ln,Ci,aa){for(var Ai=1,Gi=Ln+1;Gi<Vr.length;++Gi)Ai*=Vr[Gi];var Ea=Vr[Ln];if(Vr.length-Ln===4){var Pa=Vr[Ln+1],Ra=Vr[Ln+2],Za=Vr[Ln+3];for(Gi=0;Gi<Ea;++Gi)Hn(jt[Gi],Pa,Ra,Za,Ci,aa),aa+=Ai}else for(Gi=0;Gi<Ea;++Gi)Hr(jt[Gi],Vr,Ln+1,Ci,aa),aa+=Ai}function Bo(jt,Vr,Ln,Ci){var aa=1;if(Vr.length)for(var Ai=0;Ai<Vr.length;++Ai)aa*=Vr[Ai];else aa=0;var Gi=Ci||On.allocType(Ln,aa);switch(Vr.length){case 0:break;case 1:lr(jt,Vr[0],Gi);break;case 2:Zr(jt,Vr[0],Vr[1],Gi);break;case 3:Hn(jt,Vr[0],Vr[1],Vr[2],Gi,0);break;default:Hr(jt,Vr,0,Gi,0)}return Gi}function Yr(jt){for(var Vr=[],Ln=jt;Ln.length;Ln=Ln[0])Vr.push(Ln.length);return Vr}var pr={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},at=5120,hr=5122,er=5124,dn=5121,mn=5123,Vn=5125,ni=5126,si=5126,Si={int8:at,int16:hr,int32:er,uint8:dn,uint16:mn,uint32:Vn,float:ni,float32:si},qi=35048,Rr=35040,Mn={dynamic:qi,stream:Rr,static:35044},pn=zr.flatten,wn=zr.shape,Kn=35044,Ei=35040,Ji=5121,Yi=5126,oa=[];oa[5120]=1,oa[5122]=2,oa[5124]=4,oa[5121]=1,oa[5123]=2,oa[5125]=4,oa[5126]=4;function Ma(jt){return pr[Object.prototype.toString.call(jt)]|0}function k(jt,Vr){for(var Ln=0;Ln<Vr.length;++Ln)jt[Ln]=Vr[Ln]}function de(jt,Vr,Ln,Ci,aa,Ai,Gi){for(var Ea=0,Pa=0;Pa<Ln;++Pa)for(var Ra=0;Ra<Ci;++Ra)jt[Ea++]=Vr[aa*Pa+Ai*Ra+Gi]}function yt(jt,Vr,Ln,Ci){var aa=0,Ai={};function Gi(ui){this.id=aa++,this.buffer=jt.createBuffer(),this.type=ui,this.usage=Kn,this.byteLength=0,this.dimension=1,this.dtype=Ji,this.persistentData=null,Ln.profile&&(this.stats={size:0})}Gi.prototype.bind=function(){jt.bindBuffer(this.type,this.buffer)},Gi.prototype.destroy=function(){$a(this)};var Ea=[];function Pa(ui,Ni){var La=Ea.pop();return La||(La=new Gi(ui)),La.bind(),Ha(La,Ni,Ei,0,1,!1),La}function Ra(ui){Ea.push(ui)}function Za(ui,Ni,La){ui.byteLength=Ni.byteLength,jt.bufferData(ui.type,Ni,La)}function Ha(ui,Ni,La,Ya,_a,Ga){var xo;if(ui.usage=La,Array.isArray(Ni)){if(ui.dtype=Ya||Yi,Ni.length>0){var xs;if(Array.isArray(Ni[0])){xo=wn(Ni);for(var ea=1,sa=1;sa<xo.length;++sa)ea*=xo[sa];ui.dimension=ea,xs=pn(Ni,xo,ui.dtype),Za(ui,xs,La),Ga?ui.persistentData=xs:On.freeType(xs)}else if(typeof Ni[0]=="number"){ui.dimension=_a;var Zo=On.allocType(ui.dtype,Ni.length);k(Zo,Ni),Za(ui,Zo,La),Ga?ui.persistentData=Zo:On.freeType(Zo)}else C(Ni[0])?(ui.dimension=Ni[0].length,ui.dtype=Ya||Ma(Ni[0])||Yi,xs=pn(Ni,[Ni.length,Ni[0].length],ui.dtype),Za(ui,xs,La),Ga?ui.persistentData=xs:On.freeType(xs)):W.raise("invalid buffer data")}}else if(C(Ni))ui.dtype=Ya||Ma(Ni),ui.dimension=_a,Za(ui,Ni,La),Ga&&(ui.persistentData=new Uint8Array(new Uint8Array(Ni.buffer)));else if(Rs(Ni)){xo=Ni.shape;var fo=Ni.stride,Oa=Ni.offset,to=0,Ia=0,Os=0,Bs=0;xo.length===1?(to=xo[0],Ia=1,Os=fo[0],Bs=0):xo.length===2?(to=xo[0],Ia=xo[1],Os=fo[0],Bs=fo[1]):W.raise("invalid shape"),ui.dtype=Ya||Ma(Ni.data)||Yi,ui.dimension=Ia;var so=On.allocType(ui.dtype,to*Ia);de(so,Ni.data,to,Ia,Os,Bs,Oa),Za(ui,so,La),Ga?ui.persistentData=so:On.freeType(so)}else Ni instanceof ArrayBuffer?(ui.dtype=Ji,ui.dimension=_a,Za(ui,Ni,La),Ga&&(ui.persistentData=new Uint8Array(new Uint8Array(Ni)))):W.raise("invalid buffer data")}function $a(ui){Vr.bufferCount--,Ci(ui);var Ni=ui.buffer;W(Ni,"buffer must not be deleted already"),jt.deleteBuffer(Ni),ui.buffer=null,delete Ai[ui.id]}function ya(ui,Ni,La,Ya){Vr.bufferCount++;var _a=new Gi(Ni);Ai[_a.id]=_a;function Ga(ea){var sa=Kn,Zo=null,fo=0,Oa=0,to=1;return Array.isArray(ea)||C(ea)||Rs(ea)||ea instanceof ArrayBuffer?Zo=ea:typeof ea=="number"?fo=ea|0:ea&&(W.type(ea,"object","buffer arguments must be an object, a number or an array"),"data"in ea&&(W(Zo===null||Array.isArray(Zo)||C(Zo)||Rs(Zo),"invalid data for buffer"),Zo=ea.data),"usage"in ea&&(W.parameter(ea.usage,Mn,"invalid buffer usage"),sa=Mn[ea.usage]),"type"in ea&&(W.parameter(ea.type,Si,"invalid buffer type"),Oa=Si[ea.type]),"dimension"in ea&&(W.type(ea.dimension,"number","invalid dimension"),to=ea.dimension|0),"length"in ea&&(W.nni(fo,"buffer length must be a nonnegative integer"),fo=ea.length|0)),_a.bind(),Zo?Ha(_a,Zo,sa,Oa,to,Ya):(fo&&jt.bufferData(_a.type,fo,sa),_a.dtype=Oa||Ji,_a.usage=sa,_a.dimension=to,_a.byteLength=fo),Ln.profile&&(_a.stats.size=_a.byteLength*oa[_a.dtype]),Ga}function xo(ea,sa){W(sa+ea.byteLength<=_a.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ea.byteLength+" starting from offset "+sa+" to a buffer of size "+_a.byteLength),jt.bufferSubData(_a.type,sa,ea)}function xs(ea,sa){var Zo=(sa||0)|0,fo;if(_a.bind(),C(ea)||ea instanceof ArrayBuffer)xo(ea,Zo);else if(Array.isArray(ea)){if(ea.length>0)if(typeof ea[0]=="number"){var Oa=On.allocType(_a.dtype,ea.length);k(Oa,ea),xo(Oa,Zo),On.freeType(Oa)}else if(Array.isArray(ea[0])||C(ea[0])){fo=wn(ea);var to=pn(ea,fo,_a.dtype);xo(to,Zo),On.freeType(to)}else W.raise("invalid buffer data")}else if(Rs(ea)){fo=ea.shape;var Ia=ea.stride,Os=0,Bs=0,so=0,yo=0;fo.length===1?(Os=fo[0],Bs=1,so=Ia[0],yo=0):fo.length===2?(Os=fo[0],Bs=fo[1],so=Ia[0],yo=Ia[1]):W.raise("invalid shape");var hs=Array.isArray(ea.data)?_a.dtype:Ma(ea.data),zs=On.allocType(hs,Os*Bs);de(zs,ea.data,Os,Bs,so,yo,ea.offset),xo(zs,Zo),On.freeType(zs)}else W.raise("invalid data for buffer subdata");return Ga}return La||Ga(ui),Ga._reglType="buffer",Ga._buffer=_a,Ga.subdata=xs,Ln.profile&&(Ga.stats=_a.stats),Ga.destroy=function(){$a(_a)},Ga}function Ua(){vr(Ai).forEach(function(ui){ui.buffer=jt.createBuffer(),jt.bindBuffer(ui.type,ui.buffer),jt.bufferData(ui.type,ui.persistentData||ui.byteLength,ui.usage)})}return Ln.profile&&(Vr.getTotalBufferSize=function(){var ui=0;return Object.keys(Ai).forEach(function(Ni){ui+=Ai[Ni].stats.size}),ui}),{create:ya,createStream:Pa,destroyStream:Ra,clear:function(){vr(Ai).forEach($a),Ea.forEach($a)},getBuffer:function(ui){return ui&&ui._buffer instanceof Gi?ui._buffer:null},restore:Ua,_initBuffer:Ha}}var Ue=0,nr=0,Mr=1,qr=1,kn=4,Nn=4,Mi={points:Ue,point:nr,lines:Mr,line:qr,triangles:kn,triangle:Nn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Bi=0,io=1,co=4,Sa=5120,Ko=5121,wo=5122,Oo=5123,Ho=5124,Io=5125,qs=34963,Il=35040,Ao=35044;function Va(jt,Vr,Ln,Ci){var aa={},Ai=0,Gi={uint8:Ko,uint16:Oo};Vr.oes_element_index_uint&&(Gi.uint32=Io);function Ea(Ua){this.id=Ai++,aa[this.id]=this,this.buffer=Ua,this.primType=co,this.vertCount=0,this.type=0}Ea.prototype.bind=function(){this.buffer.bind()};var Pa=[];function Ra(Ua){var ui=Pa.pop();return ui||(ui=new Ea(Ln.create(null,qs,!0,!1)._buffer)),Ha(ui,Ua,Il,-1,-1,0,0),ui}function Za(Ua){Pa.push(Ua)}function Ha(Ua,ui,Ni,La,Ya,_a,Ga){Ua.buffer.bind();var xo;if(ui){var xs=Ga;!Ga&&(!C(ui)||Rs(ui)&&!C(ui.data))&&(xs=Vr.oes_element_index_uint?Io:Oo),Ln._initBuffer(Ua.buffer,ui,Ni,xs,3)}else jt.bufferData(qs,_a,Ni),Ua.buffer.dtype=xo||Ko,Ua.buffer.usage=Ni,Ua.buffer.dimension=3,Ua.buffer.byteLength=_a;if(xo=Ga,!Ga){switch(Ua.buffer.dtype){case Ko:case Sa:xo=Ko;break;case Oo:case wo:xo=Oo;break;case Io:case Ho:xo=Io;break;default:W.raise("unsupported type for element array")}Ua.buffer.dtype=xo}Ua.type=xo,W(xo!==Io||!!Vr.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ea=Ya;ea<0&&(ea=Ua.buffer.byteLength,xo===Oo?ea>>=1:xo===Io&&(ea>>=2)),Ua.vertCount=ea;var sa=La;if(La<0){sa=co;var Zo=Ua.buffer.dimension;Zo===1&&(sa=Bi),Zo===2&&(sa=io),Zo===3&&(sa=co)}Ua.primType=sa}function $a(Ua){Ci.elementsCount--,W(Ua.buffer!==null,"must not double destroy elements"),delete aa[Ua.id],Ua.buffer.destroy(),Ua.buffer=null}function ya(Ua,ui){var Ni=Ln.create(null,qs,!0),La=new Ea(Ni._buffer);Ci.elementsCount++;function Ya(_a){if(!_a)Ni(),La.primType=co,La.vertCount=0,La.type=Ko;else if(typeof _a=="number")Ni(_a),La.primType=co,La.vertCount=_a|0,La.type=Ko;else{var Ga=null,xo=Ao,xs=-1,ea=-1,sa=0,Zo=0;Array.isArray(_a)||C(_a)||Rs(_a)?Ga=_a:(W.type(_a,"object","invalid arguments for elements"),"data"in _a&&(Ga=_a.data,W(Array.isArray(Ga)||C(Ga)||Rs(Ga),"invalid data for element buffer")),"usage"in _a&&(W.parameter(_a.usage,Mn,"invalid element buffer usage"),xo=Mn[_a.usage]),"primitive"in _a&&(W.parameter(_a.primitive,Mi,"invalid element buffer primitive"),xs=Mi[_a.primitive]),"count"in _a&&(W(typeof _a.count=="number"&&_a.count>=0,"invalid vertex count for elements"),ea=_a.count|0),"type"in _a&&(W.parameter(_a.type,Gi,"invalid buffer type"),Zo=Gi[_a.type]),"length"in _a?sa=_a.length|0:(sa=ea,Zo===Oo||Zo===wo?sa*=2:(Zo===Io||Zo===Ho)&&(sa*=4))),Ha(La,Ga,xo,xs,ea,sa,Zo)}return Ya}return Ya(Ua),Ya._reglType="elements",Ya._elements=La,Ya.subdata=function(_a,Ga){return Ni.subdata(_a,Ga),Ya},Ya.destroy=function(){$a(La)},Ya}return{create:ya,createStream:Ra,destroyStream:Za,getElements:function(Ua){return typeof Ua=="function"&&Ua._elements instanceof Ea?Ua._elements:null},clear:function(){vr(aa).forEach($a)}}}var gs=new Float32Array(1),Ws=new Uint32Array(gs.buffer),bs=5123;function Ps(jt){for(var Vr=On.allocType(bs,jt.length),Ln=0;Ln<jt.length;++Ln)if(isNaN(jt[Ln]))Vr[Ln]=65535;else if(jt[Ln]===1/0)Vr[Ln]=31744;else if(jt[Ln]===-1/0)Vr[Ln]=64512;else{gs[0]=jt[Ln];var Ci=Ws[0],aa=Ci>>>31<<15,Ai=(Ci<<1>>>24)-127,Gi=Ci>>13&(1<<10)-1;if(Ai<-24)Vr[Ln]=aa;else if(Ai<-14){var Ea=-14-Ai;Vr[Ln]=aa+(Gi+(1<<10)>>Ea)}else Ai>15?Vr[Ln]=aa+31744:Vr[Ln]=aa+(Ai+15<<10)+Gi}return Vr}function Xs(jt){return Array.isArray(jt)||C(jt)}var gl=function(jt){return!(jt&jt-1)&&!!jt},jf=34467,Mu=3553,yl=34067,lc=34069,Lc=6408,dh=6406,_l=6407,Us=6409,th=6410,kf=32854,wf=32855,lf=36194,gd=32819,Kh=32820,yc=33635,Eh=34042,cf=6402,Af=34041,_f=35904,Dc=35906,Ff=36193,Zl=33776,kc=33777,ad=33778,rh=33779,od=35986,Yo=35987,Gs=34798,Kl=35840,dl=35841,su=35842,Fc=35843,tc=36196,Tf=5121,_c=5123,Hl=5125,ff=5126,xc=10242,Yh=10243,Uh=10497,Gc=33071,Mf=33648,nh=10240,Qn=10241,fa=9728,$i=9729,$o=9984,lo=9985,Es=9986,tl=9987,al=33170,Tl=4352,Lh=4353,xf=4354,Qh=34046,$h=3317,Ul=37440,Rl=37441,ol=37443,uu=37444,Bc=33984,cc=[$o,Es,lo,tl],ao=[0,Us,th,_l,Lc],Ml={};Ml[Us]=Ml[dh]=Ml[cf]=1,Ml[Af]=Ml[th]=2,Ml[_l]=Ml[_f]=3,Ml[Lc]=Ml[Dc]=4;function Hf(jt){return"[object "+jt+"]"}var fl=Hf("HTMLCanvasElement"),Vl=Hf("OffscreenCanvas"),Ll=Hf("CanvasRenderingContext2D"),jh=Hf("ImageBitmap"),Qa=Hf("HTMLImageElement"),Yl=Hf("HTMLVideoElement"),Vf=Object.keys(pr).concat([fl,Vl,Ll,jh,Qa,Yl]),ih=[];ih[Tf]=1,ih[ff]=4,ih[Ff]=2,ih[_c]=2,ih[Hl]=4;var Vu=[];Vu[kf]=2,Vu[wf]=2,Vu[lf]=2,Vu[Af]=4,Vu[Zl]=.5,Vu[kc]=.5,Vu[ad]=1,Vu[rh]=1,Vu[od]=.5,Vu[Yo]=1,Vu[Gs]=1,Vu[Kl]=.5,Vu[dl]=.25,Vu[su]=.5,Vu[Fc]=.25,Vu[tc]=.5;function hf(jt){return Array.isArray(jt)&&(jt.length===0||typeof jt[0]=="number")}function Hh(jt){if(!Array.isArray(jt))return!1;var Vr=jt.length;return!(Vr===0||!Xs(jt[0]))}function bc(jt){return Object.prototype.toString.call(jt)}function Ec(jt){return bc(jt)===fl}function ah(jt){return bc(jt)===Vl}function Wc(jt){return bc(jt)===Ll}function Dh(jt){return bc(jt)===jh}function Sc(jt){return bc(jt)===Qa}function Vh(jt){return bc(jt)===Yl}function Ql(jt){var Vr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(Vr&&jt&&jt.getContext)}function gu(jt){var Vr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(Vr&&jt&&"src"in jt&&"crossOrigin"in jt)}function Ks(jt){if(!jt)return!1;if(Ql(jt)||gu(jt))return!0;var Vr=bc(jt);return Vf.indexOf(Vr)>=0?!0:hf(jt)||Hh(jt)||Rs(jt)}function Gf(jt){return pr[Object.prototype.toString.call(jt)]|0}function Bf(jt,Vr){var Ln=Vr.length;switch(jt.type){case Tf:case _c:case Hl:case ff:var Ci=On.allocType(jt.type,Ln);Ci.set(Vr),jt.data=Ci;break;case Ff:jt.data=Ps(Vr);break;default:W.raise("unsupported texture type, must specify a typed array")}}function eu(jt,Vr){return On.allocType(jt.type===Ff?ff:jt.type,Vr)}function Pl(jt,Vr){jt.type===Ff?(jt.data=Ps(Vr),On.freeType(Vr)):jt.data=Vr}function Xc(jt,Vr,Ln,Ci,aa,Ai){for(var Gi=jt.width,Ea=jt.height,Pa=jt.channels,Ra=Gi*Ea*Pa,Za=eu(jt,Ra),Ha=0,$a=0;$a<Ea;++$a)for(var ya=0;ya<Gi;++ya)for(var Ua=0;Ua<Pa;++Ua)Za[Ha++]=Vr[Ln*ya+Ci*$a+aa*Ua+Ai];Pl(jt,Za)}function Nc(jt,Vr,Ln,Ci,aa,Ai){var Gi;if(typeof Vu[jt]!="undefined"?Gi=Vu[jt]:Gi=Ml[jt]*ih[Vr],Ai&&(Gi*=6),aa){for(var Ea=0,Pa=Ln;Pa>=1;)Ea+=Gi*Pa*Pa,Pa/=2;return Ea}else return Gi*Ln*Ci}function Jl(jt,Vr,Ln,Ci,aa,Ai,Gi){var Ea={"don't care":Tl,"dont care":Tl,nice:xf,fast:Lh},Pa={repeat:Uh,clamp:Gc,mirror:Mf},Ra={nearest:fa,linear:$i},Za=l({mipmap:tl,"nearest mipmap nearest":$o,"linear mipmap nearest":lo,"nearest mipmap linear":Es,"linear mipmap linear":tl},Ra),Ha={none:0,browser:uu},$a={uint8:Tf,rgba4:gd,rgb565:yc,"rgb5 a1":Kh},ya={alpha:dh,luminance:Us,"luminance alpha":th,rgb:_l,rgba:Lc,rgba4:kf,"rgb5 a1":wf,rgb565:lf},Ua={};Vr.ext_srgb&&(ya.srgb=_f,ya.srgba=Dc),Vr.oes_texture_float&&($a.float32=$a.float=ff),Vr.oes_texture_half_float&&($a.float16=$a["half float"]=Ff),Vr.webgl_depth_texture&&(l(ya,{depth:cf,"depth stencil":Af}),l($a,{uint16:_c,uint32:Hl,"depth stencil":Eh})),Vr.webgl_compressed_texture_s3tc&&l(Ua,{"rgb s3tc dxt1":Zl,"rgba s3tc dxt1":kc,"rgba s3tc dxt3":ad,"rgba s3tc dxt5":rh}),Vr.webgl_compressed_texture_atc&&l(Ua,{"rgb atc":od,"rgba atc explicit alpha":Yo,"rgba atc interpolated alpha":Gs}),Vr.webgl_compressed_texture_pvrtc&&l(Ua,{"rgb pvrtc 4bppv1":Kl,"rgb pvrtc 2bppv1":dl,"rgba pvrtc 4bppv1":su,"rgba pvrtc 2bppv1":Fc}),Vr.webgl_compressed_texture_etc1&&(Ua["rgb etc1"]=tc);var ui=Array.prototype.slice.call(jt.getParameter(jf)||new Uint32Array(0));Object.keys(Ua).forEach(function(w){var G=Ua[w];ui.indexOf(G)>=0&&(ya[w]=G)});var Ni=Object.keys(ya);Ln.textureFormats=Ni;var La=[];Object.keys(ya).forEach(function(w){var G=ya[w];La[G]=w});var Ya=[];Object.keys($a).forEach(function(w){var G=$a[w];Ya[G]=w});var _a=[];Object.keys(Ra).forEach(function(w){var G=Ra[w];_a[G]=w});var Ga=[];Object.keys(Za).forEach(function(w){var G=Za[w];Ga[G]=w});var xo=[];Object.keys(Pa).forEach(function(w){var G=Pa[w];xo[G]=w});var xs=Ni.reduce(function(w,G){var Ce=ya[G];return Ce===Us||Ce===dh||Ce===Us||Ce===th||Ce===cf||Ce===Af||Vr.ext_srgb&&(Ce===_f||Ce===Dc)?w[Ce]=Ce:Ce===wf||G.indexOf("rgba")>=0?w[Ce]=Lc:w[Ce]=_l,w},{});function ea(){this.internalformat=Lc,this.format=Lc,this.type=Tf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=uu,this.width=0,this.height=0,this.channels=0}function sa(w,G){w.internalformat=G.internalformat,w.format=G.format,w.type=G.type,w.compressed=G.compressed,w.premultiplyAlpha=G.premultiplyAlpha,w.flipY=G.flipY,w.unpackAlignment=G.unpackAlignment,w.colorSpace=G.colorSpace,w.width=G.width,w.height=G.height,w.channels=G.channels}function Zo(w,G){if(!(typeof G!="object"||!G)){if("premultiplyAlpha"in G&&(W.type(G.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),w.premultiplyAlpha=G.premultiplyAlpha),"flipY"in G&&(W.type(G.flipY,"boolean","invalid texture flip"),w.flipY=G.flipY),"alignment"in G&&(W.oneOf(G.alignment,[1,2,4,8],"invalid texture unpack alignment"),w.unpackAlignment=G.alignment),"colorSpace"in G&&(W.parameter(G.colorSpace,Ha,"invalid colorSpace"),w.colorSpace=Ha[G.colorSpace]),"type"in G){var Ce=G.type;W(Vr.oes_texture_float||!(Ce==="float"||Ce==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),W(Vr.oes_texture_half_float||!(Ce==="half float"||Ce==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),W(Vr.webgl_depth_texture||!(Ce==="uint16"||Ce==="uint32"||Ce==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),W.parameter(Ce,$a,"invalid texture type"),w.type=$a[Ce]}var ae=w.width,et=w.height,Ie=w.channels,Ze=!1;"shape"in G?(W(Array.isArray(G.shape)&&G.shape.length>=2,"shape must be an array"),ae=G.shape[0],et=G.shape[1],G.shape.length===3&&(Ie=G.shape[2],W(Ie>0&&Ie<=4,"invalid number of channels"),Ze=!0),W(ae>=0&&ae<=Ln.maxTextureSize,"invalid width"),W(et>=0&&et<=Ln.maxTextureSize,"invalid height")):("radius"in G&&(ae=et=G.radius,W(ae>=0&&ae<=Ln.maxTextureSize,"invalid radius")),"width"in G&&(ae=G.width,W(ae>=0&&ae<=Ln.maxTextureSize,"invalid width")),"height"in G&&(et=G.height,W(et>=0&&et<=Ln.maxTextureSize,"invalid height")),"channels"in G&&(Ie=G.channels,W(Ie>0&&Ie<=4,"invalid number of channels"),Ze=!0)),w.width=ae|0,w.height=et|0,w.channels=Ie|0;var Fe=!1;if("format"in G){var it=G.format;W(Vr.webgl_depth_texture||!(it==="depth"||it==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),W.parameter(it,ya,"invalid texture format");var gt=w.internalformat=ya[it];w.format=xs[gt],it in $a&&("type"in G||(w.type=$a[it])),it in Ua&&(w.compressed=!0),Fe=!0}!Ze&&Fe?w.channels=Ml[w.format]:Ze&&!Fe?w.channels!==ao[w.format]&&(w.format=w.internalformat=ao[w.channels]):Fe&&Ze&&W(w.channels===Ml[w.format],"number of channels inconsistent with specified format")}}function fo(w){jt.pixelStorei(Ul,w.flipY),jt.pixelStorei(Rl,w.premultiplyAlpha),jt.pixelStorei(ol,w.colorSpace),jt.pixelStorei($h,w.unpackAlignment)}function Oa(){ea.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function to(w,G){var Ce=null;if(Ks(G)?Ce=G:G&&(W.type(G,"object","invalid pixel data type"),Zo(w,G),"x"in G&&(w.xOffset=G.x|0),"y"in G&&(w.yOffset=G.y|0),Ks(G.data)&&(Ce=G.data)),W(!w.compressed||Ce instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),G.copy){W(!Ce,"can not specify copy and data field for the same texture");var ae=aa.viewportWidth,et=aa.viewportHeight;w.width=w.width||ae-w.xOffset,w.height=w.height||et-w.yOffset,w.needsCopy=!0,W(w.xOffset>=0&&w.xOffset<ae&&w.yOffset>=0&&w.yOffset<et&&w.width>0&&w.width<=ae&&w.height>0&&w.height<=et,"copy texture read out of bounds")}else if(!Ce)w.width=w.width||1,w.height=w.height||1,w.channels=w.channels||4;else if(C(Ce))w.channels=w.channels||4,w.data=Ce,!("type"in G)&&w.type===Tf&&(w.type=Gf(Ce));else if(hf(Ce))w.channels=w.channels||4,Bf(w,Ce),w.alignment=1,w.needsFree=!0;else if(Rs(Ce)){var Ie=Ce.data;!Array.isArray(Ie)&&w.type===Tf&&(w.type=Gf(Ie));var Ze=Ce.shape,Fe=Ce.stride,it,gt,It,Tt,qt,Ot;Ze.length===3?(It=Ze[2],Ot=Fe[2]):(W(Ze.length===2,"invalid ndarray pixel data, must be 2 or 3D"),It=1,Ot=1),it=Ze[0],gt=Ze[1],Tt=Fe[0],qt=Fe[1],w.alignment=1,w.width=it,w.height=gt,w.channels=It,w.format=w.internalformat=ao[It],w.needsFree=!0,Xc(w,Ie,Tt,qt,Ot,Ce.offset)}else if(Ql(Ce)||Ec(Ce)||ah(Ce)||Wc(Ce))Ql(Ce)||Ec(Ce)||ah(Ce)?w.element=Ce:w.element=Ce.canvas,w.width=w.element.width,w.height=w.element.height,w.channels=4;else if(Dh(Ce))w.element=Ce,w.width=Ce.width,w.height=Ce.height,w.channels=4;else if(Sc(Ce))w.element=Ce,w.width=Ce.naturalWidth,w.height=Ce.naturalHeight,w.channels=4;else if(gu(Ce))w.element=Ce,w.width=Ce.width,w.height=Ce.height,w.channels=4;else if(Vh(Ce))w.element=Ce,w.width=Ce.videoWidth,w.height=Ce.videoHeight,w.channels=4;else if(Hh(Ce)){var rr=w.width||Ce[0].length,Xt=w.height||Ce.length,gr=w.channels;Xs(Ce[0][0])?gr=gr||Ce[0][0].length:gr=gr||1;for(var Sr=zr.shape(Ce),Wr=1,Cn=0;Cn<Sr.length;++Cn)Wr*=Sr[Cn];var xn=eu(w,Wr);zr.flatten(Ce,Sr,"",xn),Pl(w,xn),w.alignment=1,w.width=rr,w.height=Xt,w.channels=gr,w.format=w.internalformat=ao[gr],w.needsFree=!0}w.type===ff?W(Ln.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):w.type===Ff&&W(Ln.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ia(w,G,Ce){var ae=w.element,et=w.data,Ie=w.internalformat,Ze=w.format,Fe=w.type,it=w.width,gt=w.height;fo(w),ae?jt.texImage2D(G,Ce,Ze,Ze,Fe,ae):w.compressed?jt.compressedTexImage2D(G,Ce,Ie,it,gt,0,et):w.needsCopy?(Ci(),jt.copyTexImage2D(G,Ce,Ze,w.xOffset,w.yOffset,it,gt,0)):jt.texImage2D(G,Ce,Ze,it,gt,0,Ze,Fe,et||null)}function Os(w,G,Ce,ae,et){var Ie=w.element,Ze=w.data,Fe=w.internalformat,it=w.format,gt=w.type,It=w.width,Tt=w.height;fo(w),Ie?jt.texSubImage2D(G,et,Ce,ae,it,gt,Ie):w.compressed?jt.compressedTexSubImage2D(G,et,Ce,ae,Fe,It,Tt,Ze):w.needsCopy?(Ci(),jt.copyTexSubImage2D(G,et,Ce,ae,w.xOffset,w.yOffset,It,Tt)):jt.texSubImage2D(G,et,Ce,ae,It,Tt,it,gt,Ze)}var Bs=[];function so(){return Bs.pop()||new Oa}function yo(w){w.needsFree&&On.freeType(w.data),Oa.call(w),Bs.push(w)}function hs(){ea.call(this),this.genMipmaps=!1,this.mipmapHint=Tl,this.mipmask=0,this.images=Array(16)}function zs(w,G,Ce){var ae=w.images[0]=so();w.mipmask=1,ae.width=w.width=G,ae.height=w.height=Ce,ae.channels=w.channels=4}function wu(w,G){var Ce=null;if(Ks(G))Ce=w.images[0]=so(),sa(Ce,w),to(Ce,G),w.mipmask=1;else if(Zo(w,G),Array.isArray(G.mipmap))for(var ae=G.mipmap,et=0;et<ae.length;++et)Ce=w.images[et]=so(),sa(Ce,w),Ce.width>>=et,Ce.height>>=et,to(Ce,ae[et]),w.mipmask|=1<<et;else Ce=w.images[0]=so(),sa(Ce,w),to(Ce,G),w.mipmask=1;sa(w,w.images[0]),w.compressed&&(w.internalformat===Zl||w.internalformat===kc||w.internalformat===ad||w.internalformat===rh)&&W(w.width%4===0&&w.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Gu(w,G){for(var Ce=w.images,ae=0;ae<Ce.length;++ae){if(!Ce[ae])return;Ia(Ce[ae],G,ae)}}var Bl=[];function Au(){var w=Bl.pop()||new hs;ea.call(w),w.mipmask=0;for(var G=0;G<16;++G)w.images[G]=null;return w}function Sf(w){for(var G=w.images,Ce=0;Ce<G.length;++Ce)G[Ce]&&yo(G[Ce]),G[Ce]=null;Bl.push(w)}function Xl(){this.minFilter=fa,this.magFilter=fa,this.wrapS=Gc,this.wrapT=Gc,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Tl}function Ic(w,G){if("min"in G){var Ce=G.min;W.parameter(Ce,Za),w.minFilter=Za[Ce],cc.indexOf(w.minFilter)>=0&&!("faces"in G)&&(w.genMipmaps=!0)}if("mag"in G){var ae=G.mag;W.parameter(ae,Ra),w.magFilter=Ra[ae]}var et=w.wrapS,Ie=w.wrapT;if("wrap"in G){var Ze=G.wrap;typeof Ze=="string"?(W.parameter(Ze,Pa),et=Ie=Pa[Ze]):Array.isArray(Ze)&&(W.parameter(Ze[0],Pa),W.parameter(Ze[1],Pa),et=Pa[Ze[0]],Ie=Pa[Ze[1]])}else{if("wrapS"in G){var Fe=G.wrapS;W.parameter(Fe,Pa),et=Pa[Fe]}if("wrapT"in G){var it=G.wrapT;W.parameter(it,Pa),Ie=Pa[it]}}if(w.wrapS=et,w.wrapT=Ie,"anisotropic"in G){var gt=G.anisotropic;W(typeof gt=="number"&&gt>=1&&gt<=Ln.maxAnisotropic,"aniso samples must be between 1 and "),w.anisotropic=G.anisotropic}if("mipmap"in G){var It=!1;switch(typeof G.mipmap){case"string":W.parameter(G.mipmap,Ea,"invalid mipmap hint"),w.mipmapHint=Ea[G.mipmap],w.genMipmaps=!0,It=!0;break;case"boolean":It=w.genMipmaps=G.mipmap;break;case"object":W(Array.isArray(G.mipmap),"invalid mipmap type"),w.genMipmaps=!1,It=!0;break;default:W.raise("invalid mipmap type")}It&&!("min"in G)&&(w.minFilter=$o)}}function Cl(w,G){jt.texParameteri(G,Qn,w.minFilter),jt.texParameteri(G,nh,w.magFilter),jt.texParameteri(G,xc,w.wrapS),jt.texParameteri(G,Yh,w.wrapT),Vr.ext_texture_filter_anisotropic&&jt.texParameteri(G,Qh,w.anisotropic),w.genMipmaps&&(jt.hint(al,w.mipmapHint),jt.generateMipmap(G))}var rf=0,mf={},lh=Ln.maxTextureUnits,pc=Array(lh).map(function(){return null});function fu(w){ea.call(this),this.mipmask=0,this.internalformat=Lc,this.id=rf++,this.refCount=1,this.target=w,this.texture=jt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Xl,Gi.profile&&(this.stats={size:0})}function Cf(w){jt.activeTexture(Bc),jt.bindTexture(w.target,w.texture)}function Uu(){var w=pc[0];w?jt.bindTexture(w.target,w.texture):jt.bindTexture(Mu,null)}function Qf(w){var G=w.texture;W(G,"must not double destroy texture");var Ce=w.unit,ae=w.target;Ce>=0&&(jt.activeTexture(Bc+Ce),jt.bindTexture(ae,null),pc[Ce]=null),jt.deleteTexture(G),w.texture=null,w.params=null,w.pixels=null,w.refCount=0,delete mf[w.id],Ai.textureCount--}l(fu.prototype,{bind:function(){var w=this;w.bindCount+=1;var G=w.unit;if(G<0){for(var Ce=0;Ce<lh;++Ce){var ae=pc[Ce];if(ae){if(ae.bindCount>0)continue;ae.unit=-1}pc[Ce]=w,G=Ce;break}G>=lh&&W.raise("insufficient number of texture units"),Gi.profile&&Ai.maxTextureUnits<G+1&&(Ai.maxTextureUnits=G+1),w.unit=G,jt.activeTexture(Bc+G),jt.bindTexture(w.target,w.texture)}return G},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Qf(this)}});function js(w,G){var Ce=new fu(Mu);mf[Ce.id]=Ce,Ai.textureCount++;function ae(Ze,Fe){var it=Ce.texInfo;Xl.call(it);var gt=Au();return typeof Ze=="number"?typeof Fe=="number"?zs(gt,Ze|0,Fe|0):zs(gt,Ze|0,Ze|0):Ze?(W.type(Ze,"object","invalid arguments to regl.texture"),Ic(it,Ze),wu(gt,Ze)):zs(gt,1,1),it.genMipmaps&&(gt.mipmask=(gt.width<<1)-1),Ce.mipmask=gt.mipmask,sa(Ce,gt),W.texture2D(it,gt,Ln),Ce.internalformat=gt.internalformat,ae.width=gt.width,ae.height=gt.height,Cf(Ce),Gu(gt,Mu),Cl(it,Mu),Uu(),Sf(gt),Gi.profile&&(Ce.stats.size=Nc(Ce.internalformat,Ce.type,gt.width,gt.height,it.genMipmaps,!1)),ae.format=La[Ce.internalformat],ae.type=Ya[Ce.type],ae.mag=_a[it.magFilter],ae.min=Ga[it.minFilter],ae.wrapS=xo[it.wrapS],ae.wrapT=xo[it.wrapT],ae}function et(Ze,Fe,it,gt){W(!!Ze,"must specify image data");var It=Fe|0,Tt=it|0,qt=gt|0,Ot=so();return sa(Ot,Ce),Ot.width=0,Ot.height=0,to(Ot,Ze),Ot.width=Ot.width||(Ce.width>>qt)-It,Ot.height=Ot.height||(Ce.height>>qt)-Tt,W(Ce.type===Ot.type&&Ce.format===Ot.format&&Ce.internalformat===Ot.internalformat,"incompatible format for texture.subimage"),W(It>=0&&Tt>=0&&It+Ot.width<=Ce.width&&Tt+Ot.height<=Ce.height,"texture.subimage write out of bounds"),W(Ce.mipmask&1<<qt,"missing mipmap data"),W(Ot.data||Ot.element||Ot.needsCopy,"missing image data"),Cf(Ce),Os(Ot,Mu,It,Tt,qt),Uu(),yo(Ot),ae}function Ie(Ze,Fe){var it=Ze|0,gt=Fe|0||it;if(it===Ce.width&&gt===Ce.height)return ae;ae.width=Ce.width=it,ae.height=Ce.height=gt,Cf(Ce);for(var It=0;Ce.mipmask>>It;++It){var Tt=it>>It,qt=gt>>It;if(!Tt||!qt)break;jt.texImage2D(Mu,It,Ce.format,Tt,qt,0,Ce.format,Ce.type,null)}return Uu(),Gi.profile&&(Ce.stats.size=Nc(Ce.internalformat,Ce.type,it,gt,!1,!1)),ae}return ae(w,G),ae.subimage=et,ae.resize=Ie,ae._reglType="texture2d",ae._texture=Ce,Gi.profile&&(ae.stats=Ce.stats),ae.destroy=function(){Ce.decRef()},ae}function Pu(w,G,Ce,ae,et,Ie){var Ze=new fu(yl);mf[Ze.id]=Ze,Ai.cubeCount++;var Fe=new Array(6);function it(Tt,qt,Ot,rr,Xt,gr){var Sr,Wr=Ze.texInfo;for(Xl.call(Wr),Sr=0;Sr<6;++Sr)Fe[Sr]=Au();if(typeof Tt=="number"||!Tt){var Cn=Tt|0||1;for(Sr=0;Sr<6;++Sr)zs(Fe[Sr],Cn,Cn)}else if(typeof Tt=="object")if(qt)wu(Fe[0],Tt),wu(Fe[1],qt),wu(Fe[2],Ot),wu(Fe[3],rr),wu(Fe[4],Xt),wu(Fe[5],gr);else if(Ic(Wr,Tt),Zo(Ze,Tt),"faces"in Tt){var xn=Tt.faces;for(W(Array.isArray(xn)&&xn.length===6,"cube faces must be a length 6 array"),Sr=0;Sr<6;++Sr)W(typeof xn[Sr]=="object"&&!!xn[Sr],"invalid input for cube map face"),sa(Fe[Sr],Ze),wu(Fe[Sr],xn[Sr])}else for(Sr=0;Sr<6;++Sr)wu(Fe[Sr],Tt);else W.raise("invalid arguments to cube map");for(sa(Ze,Fe[0]),W.optional(function(){Ln.npotTextureCube||W(gl(Ze.width)&&gl(Ze.height),"your browser does not support non power or two texture dimensions")}),Wr.genMipmaps?Ze.mipmask=(Fe[0].width<<1)-1:Ze.mipmask=Fe[0].mipmask,W.textureCube(Ze,Wr,Fe,Ln),Ze.internalformat=Fe[0].internalformat,it.width=Fe[0].width,it.height=Fe[0].height,Cf(Ze),Sr=0;Sr<6;++Sr)Gu(Fe[Sr],lc+Sr);for(Cl(Wr,yl),Uu(),Gi.profile&&(Ze.stats.size=Nc(Ze.internalformat,Ze.type,it.width,it.height,Wr.genMipmaps,!0)),it.format=La[Ze.internalformat],it.type=Ya[Ze.type],it.mag=_a[Wr.magFilter],it.min=Ga[Wr.minFilter],it.wrapS=xo[Wr.wrapS],it.wrapT=xo[Wr.wrapT],Sr=0;Sr<6;++Sr)Sf(Fe[Sr]);return it}function gt(Tt,qt,Ot,rr,Xt){W(!!qt,"must specify image data"),W(typeof Tt=="number"&&Tt===(Tt|0)&&Tt>=0&&Tt<6,"invalid face");var gr=Ot|0,Sr=rr|0,Wr=Xt|0,Cn=so();return sa(Cn,Ze),Cn.width=0,Cn.height=0,to(Cn,qt),Cn.width=Cn.width||(Ze.width>>Wr)-gr,Cn.height=Cn.height||(Ze.height>>Wr)-Sr,W(Ze.type===Cn.type&&Ze.format===Cn.format&&Ze.internalformat===Cn.internalformat,"incompatible format for texture.subimage"),W(gr>=0&&Sr>=0&&gr+Cn.width<=Ze.width&&Sr+Cn.height<=Ze.height,"texture.subimage write out of bounds"),W(Ze.mipmask&1<<Wr,"missing mipmap data"),W(Cn.data||Cn.element||Cn.needsCopy,"missing image data"),Cf(Ze),Os(Cn,lc+Tt,gr,Sr,Wr),Uu(),yo(Cn),it}function It(Tt){var qt=Tt|0;if(qt!==Ze.width){it.width=Ze.width=qt,it.height=Ze.height=qt,Cf(Ze);for(var Ot=0;Ot<6;++Ot)for(var rr=0;Ze.mipmask>>rr;++rr)jt.texImage2D(lc+Ot,rr,Ze.format,qt>>rr,qt>>rr,0,Ze.format,Ze.type,null);return Uu(),Gi.profile&&(Ze.stats.size=Nc(Ze.internalformat,Ze.type,it.width,it.height,!1,!0)),it}}return it(w,G,Ce,ae,et,Ie),it.subimage=gt,it.resize=It,it._reglType="textureCube",it._texture=Ze,Gi.profile&&(it.stats=Ze.stats),it.destroy=function(){Ze.decRef()},it}function Ru(){for(var w=0;w<lh;++w)jt.activeTexture(Bc+w),jt.bindTexture(Mu,null),pc[w]=null;vr(mf).forEach(Qf),Ai.cubeCount=0,Ai.textureCount=0}Gi.profile&&(Ai.getTotalTextureSize=function(){var w=0;return Object.keys(mf).forEach(function(G){w+=mf[G].stats.size}),w});function nf(){for(var w=0;w<lh;++w){var G=pc[w];G&&(G.bindCount=0,G.unit=-1,pc[w]=null)}vr(mf).forEach(function(Ce){Ce.texture=jt.createTexture(),jt.bindTexture(Ce.target,Ce.texture);for(var ae=0;ae<32;++ae)if(Ce.mipmask&1<<ae)if(Ce.target===Mu)jt.texImage2D(Mu,ae,Ce.internalformat,Ce.width>>ae,Ce.height>>ae,0,Ce.internalformat,Ce.type,null);else for(var et=0;et<6;++et)jt.texImage2D(lc+et,ae,Ce.internalformat,Ce.width>>ae,Ce.height>>ae,0,Ce.internalformat,Ce.type,null);Cl(Ce.texInfo,Ce.target)})}function pd(){for(var w=0;w<lh;++w){var G=pc[w];G&&(G.bindCount=0,G.unit=-1,pc[w]=null),jt.activeTexture(Bc+w),jt.bindTexture(Mu,null),jt.bindTexture(yl,null)}}return{create2D:js,createCube:Pu,clear:Ru,getTexture:function(w){return null},restore:nf,refresh:pd}}var fc=36161,oo=32854,ko=32855,nu=36194,ql=33189,xl=36168,mu=34041,Ku=35907,Kc=34836,Gh=34842,Yu=34843,bl=[];bl[oo]=2,bl[ko]=2,bl[nu]=2,bl[ql]=2,bl[xl]=1,bl[mu]=4,bl[Ku]=4,bl[Kc]=16,bl[Gh]=8,bl[Yu]=6;function yd(jt,Vr,Ln){return bl[jt]*Vr*Ln}var ph=function(jt,Vr,Ln,Ci,aa){var Ai={rgba4:oo,rgb565:nu,"rgb5 a1":ko,depth:ql,stencil:xl,"depth stencil":mu};Vr.ext_srgb&&(Ai.srgba=Ku),Vr.ext_color_buffer_half_float&&(Ai.rgba16f=Gh,Ai.rgb16f=Yu),Vr.webgl_color_buffer_float&&(Ai.rgba32f=Kc);var Gi=[];Object.keys(Ai).forEach(function(ya){var Ua=Ai[ya];Gi[Ua]=ya});var Ea=0,Pa={};function Ra(ya){this.id=Ea++,this.refCount=1,this.renderbuffer=ya,this.format=oo,this.width=0,this.height=0,aa.profile&&(this.stats={size:0})}Ra.prototype.decRef=function(){--this.refCount<=0&&Za(this)};function Za(ya){var Ua=ya.renderbuffer;W(Ua,"must not double destroy renderbuffer"),jt.bindRenderbuffer(fc,null),jt.deleteRenderbuffer(Ua),ya.renderbuffer=null,ya.refCount=0,delete Pa[ya.id],Ci.renderbufferCount--}function Ha(ya,Ua){var ui=new Ra(jt.createRenderbuffer());Pa[ui.id]=ui,Ci.renderbufferCount++;function Ni(Ya,_a){var Ga=0,xo=0,xs=oo;if(typeof Ya=="object"&&Ya){var ea=Ya;if("shape"in ea){var sa=ea.shape;W(Array.isArray(sa)&&sa.length>=2,"invalid renderbuffer shape"),Ga=sa[0]|0,xo=sa[1]|0}else"radius"in ea&&(Ga=xo=ea.radius|0),"width"in ea&&(Ga=ea.width|0),"height"in ea&&(xo=ea.height|0);"format"in ea&&(W.parameter(ea.format,Ai,"invalid renderbuffer format"),xs=Ai[ea.format])}else typeof Ya=="number"?(Ga=Ya|0,typeof _a=="number"?xo=_a|0:xo=Ga):Ya?W.raise("invalid arguments to renderbuffer constructor"):Ga=xo=1;if(W(Ga>0&&xo>0&&Ga<=Ln.maxRenderbufferSize&&xo<=Ln.maxRenderbufferSize,"invalid renderbuffer size"),!(Ga===ui.width&&xo===ui.height&&xs===ui.format))return Ni.width=ui.width=Ga,Ni.height=ui.height=xo,ui.format=xs,jt.bindRenderbuffer(fc,ui.renderbuffer),jt.renderbufferStorage(fc,xs,Ga,xo),W(jt.getError()===0,"invalid render buffer format"),aa.profile&&(ui.stats.size=yd(ui.format,ui.width,ui.height)),Ni.format=Gi[ui.format],Ni}function La(Ya,_a){var Ga=Ya|0,xo=_a|0||Ga;return Ga===ui.width&&xo===ui.height||(W(Ga>0&&xo>0&&Ga<=Ln.maxRenderbufferSize&&xo<=Ln.maxRenderbufferSize,"invalid renderbuffer size"),Ni.width=ui.width=Ga,Ni.height=ui.height=xo,jt.bindRenderbuffer(fc,ui.renderbuffer),jt.renderbufferStorage(fc,ui.format,Ga,xo),W(jt.getError()===0,"invalid render buffer format"),aa.profile&&(ui.stats.size=yd(ui.format,ui.width,ui.height))),Ni}return Ni(ya,Ua),Ni.resize=La,Ni._reglType="renderbuffer",Ni._renderbuffer=ui,aa.profile&&(Ni.stats=ui.stats),Ni.destroy=function(){ui.decRef()},Ni}aa.profile&&(Ci.getTotalRenderbufferSize=function(){var ya=0;return Object.keys(Pa).forEach(function(Ua){ya+=Pa[Ua].stats.size}),ya});function $a(){vr(Pa).forEach(function(ya){ya.renderbuffer=jt.createRenderbuffer(),jt.bindRenderbuffer(fc,ya.renderbuffer),jt.renderbufferStorage(fc,ya.format,ya.width,ya.height)}),jt.bindRenderbuffer(fc,null)}return{create:Ha,clear:function(){vr(Pa).forEach(Za)},restore:$a}},Cc=36160,Yc=36161,Dl=3553,Ur=34069,kl=36064,Vo=36096,Qo=36128,du=33306,kh=36053,Wf=36054,zc=36055,df=36057,rc=36061,ys=36193,bf=5121,Xf=5126,rl=6407,wc=6408,Zc=6402,sd=[rl,wc],Qc=[];Qc[wc]=4,Qc[rl]=3;var f=[];f[bf]=1,f[Xf]=4,f[ys]=2;var g=32854,p=32855,E=36194,Y=33189,ye=36168,Pe=34041,ct=35907,Vt=34836,fr=34842,Ir=34843,Dr=[g,p,E,ct,fr,Ir,Vt],jr={};jr[kh]="complete",jr[Wf]="incomplete attachment",jr[df]="incomplete dimensions",jr[zc]="incomplete, missing attachment",jr[rc]="unsupported";function En(jt,Vr,Ln,Ci,aa,Ai){var Gi={cur:null,next:null,dirty:!1,setFBO:null},Ea=["rgba"],Pa=["rgba4","rgb565","rgb5 a1"];Vr.ext_srgb&&Pa.push("srgba"),Vr.ext_color_buffer_half_float&&Pa.push("rgba16f","rgb16f"),Vr.webgl_color_buffer_float&&Pa.push("rgba32f");var Ra=["uint8"];Vr.oes_texture_half_float&&Ra.push("half float","float16"),Vr.oes_texture_float&&Ra.push("float","float32");function Za(Oa,to,Ia){this.target=Oa,this.texture=to,this.renderbuffer=Ia;var Os=0,Bs=0;to?(Os=to.width,Bs=to.height):Ia&&(Os=Ia.width,Bs=Ia.height),this.width=Os,this.height=Bs}function Ha(Oa){Oa&&(Oa.texture&&Oa.texture._texture.decRef(),Oa.renderbuffer&&Oa.renderbuffer._renderbuffer.decRef())}function $a(Oa,to,Ia){if(Oa)if(Oa.texture){var Os=Oa.texture._texture,Bs=Math.max(1,Os.width),so=Math.max(1,Os.height);W(Bs===to&&so===Ia,"inconsistent width/height for supplied texture"),Os.refCount+=1}else{var yo=Oa.renderbuffer._renderbuffer;W(yo.width===to&&yo.height===Ia,"inconsistent width/height for renderbuffer"),yo.refCount+=1}}function ya(Oa,to){to&&(to.texture?jt.framebufferTexture2D(Cc,Oa,to.target,to.texture._texture.texture,0):jt.framebufferRenderbuffer(Cc,Oa,Yc,to.renderbuffer._renderbuffer.renderbuffer))}function Ua(Oa){var to=Dl,Ia=null,Os=null,Bs=Oa;typeof Oa=="object"&&(Bs=Oa.data,"target"in Oa&&(to=Oa.target|0)),W.type(Bs,"function","invalid attachment data");var so=Bs._reglType;return so==="texture2d"?(Ia=Bs,W(to===Dl)):so==="textureCube"?(Ia=Bs,W(to>=Ur&&to<Ur+6,"invalid cube map target")):so==="renderbuffer"?(Os=Bs,to=Yc):W.raise("invalid regl object for attachment"),new Za(to,Ia,Os)}function ui(Oa,to,Ia,Os,Bs){if(Ia){var so=Ci.create2D({width:Oa,height:to,format:Os,type:Bs});return so._texture.refCount=0,new Za(Dl,so,null)}else{var yo=aa.create({width:Oa,height:to,format:Os});return yo._renderbuffer.refCount=0,new Za(Yc,null,yo)}}function Ni(Oa){return Oa&&(Oa.texture||Oa.renderbuffer)}function La(Oa,to,Ia){Oa&&(Oa.texture?Oa.texture.resize(to,Ia):Oa.renderbuffer&&Oa.renderbuffer.resize(to,Ia),Oa.width=to,Oa.height=Ia)}var Ya=0,_a={};function Ga(){this.id=Ya++,_a[this.id]=this,this.framebuffer=jt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function xo(Oa){Oa.colorAttachments.forEach(Ha),Ha(Oa.depthAttachment),Ha(Oa.stencilAttachment),Ha(Oa.depthStencilAttachment)}function xs(Oa){var to=Oa.framebuffer;W(to,"must not double destroy framebuffer"),jt.deleteFramebuffer(to),Oa.framebuffer=null,Ai.framebufferCount--,delete _a[Oa.id]}function ea(Oa){var to;jt.bindFramebuffer(Cc,Oa.framebuffer);var Ia=Oa.colorAttachments;for(to=0;to<Ia.length;++to)ya(kl+to,Ia[to]);for(to=Ia.length;to<Ln.maxColorAttachments;++to)jt.framebufferTexture2D(Cc,kl+to,Dl,null,0);jt.framebufferTexture2D(Cc,du,Dl,null,0),jt.framebufferTexture2D(Cc,Vo,Dl,null,0),jt.framebufferTexture2D(Cc,Qo,Dl,null,0),ya(Vo,Oa.depthAttachment),ya(Qo,Oa.stencilAttachment),ya(du,Oa.depthStencilAttachment);var Os=jt.checkFramebufferStatus(Cc);!jt.isContextLost()&&Os!==kh&&W.raise("framebuffer configuration not supported, status = "+jr[Os]),jt.bindFramebuffer(Cc,Gi.next?Gi.next.framebuffer:null),Gi.cur=Gi.next,jt.getError()}function sa(Oa,to){var Ia=new Ga;Ai.framebufferCount++;function Os(so,yo){var hs;W(Gi.next!==Ia,"can not update framebuffer which is currently in use");var zs=0,wu=0,Gu=!0,Bl=!0,Au=null,Sf=!0,Xl="rgba",Ic="uint8",Cl=1,rf=null,mf=null,lh=null,pc=!1;if(typeof so=="number")zs=so|0,wu=yo|0||zs;else if(!so)zs=wu=1;else{W.type(so,"object","invalid arguments for framebuffer");var fu=so;if("shape"in fu){var Cf=fu.shape;W(Array.isArray(Cf)&&Cf.length>=2,"invalid shape for framebuffer"),zs=Cf[0],wu=Cf[1]}else"radius"in fu&&(zs=wu=fu.radius),"width"in fu&&(zs=fu.width),"height"in fu&&(wu=fu.height);("color"in fu||"colors"in fu)&&(Au=fu.color||fu.colors,Array.isArray(Au)&&W(Au.length===1||Vr.webgl_draw_buffers,"multiple render targets not supported")),Au||("colorCount"in fu&&(Cl=fu.colorCount|0,W(Cl>0,"invalid color buffer count")),"colorTexture"in fu&&(Sf=!!fu.colorTexture,Xl="rgba4"),"colorType"in fu&&(Ic=fu.colorType,Sf?(W(Vr.oes_texture_float||!(Ic==="float"||Ic==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),W(Vr.oes_texture_half_float||!(Ic==="half float"||Ic==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ic==="half float"||Ic==="float16"?(W(Vr.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Xl="rgba16f"):(Ic==="float"||Ic==="float32")&&(W(Vr.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Xl="rgba32f"),W.oneOf(Ic,Ra,"invalid color type")),"colorFormat"in fu&&(Xl=fu.colorFormat,Ea.indexOf(Xl)>=0?Sf=!0:Pa.indexOf(Xl)>=0?Sf=!1:W.optional(function(){Sf?W.oneOf(fu.colorFormat,Ea,"invalid color format for texture"):W.oneOf(fu.colorFormat,Pa,"invalid color format for renderbuffer")}))),("depthTexture"in fu||"depthStencilTexture"in fu)&&(pc=!!(fu.depthTexture||fu.depthStencilTexture),W(!pc||Vr.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in fu&&(typeof fu.depth=="boolean"?Gu=fu.depth:(rf=fu.depth,Bl=!1)),"stencil"in fu&&(typeof fu.stencil=="boolean"?Bl=fu.stencil:(mf=fu.stencil,Gu=!1)),"depthStencil"in fu&&(typeof fu.depthStencil=="boolean"?Gu=Bl=fu.depthStencil:(lh=fu.depthStencil,Gu=!1,Bl=!1))}var Uu=null,Qf=null,js=null,Pu=null;if(Array.isArray(Au))Uu=Au.map(Ua);else if(Au)Uu=[Ua(Au)];else for(Uu=new Array(Cl),hs=0;hs<Cl;++hs)Uu[hs]=ui(zs,wu,Sf,Xl,Ic);W(Vr.webgl_draw_buffers||Uu.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),W(Uu.length<=Ln.maxColorAttachments,"too many color attachments, not supported"),zs=zs||Uu[0].width,wu=wu||Uu[0].height,rf?Qf=Ua(rf):Gu&&!Bl&&(Qf=ui(zs,wu,pc,"depth","uint32")),mf?js=Ua(mf):Bl&&!Gu&&(js=ui(zs,wu,!1,"stencil","uint8")),lh?Pu=Ua(lh):!rf&&!mf&&Bl&&Gu&&(Pu=ui(zs,wu,pc,"depth stencil","depth stencil")),W(!!rf+!!mf+!!lh<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Ru=null;for(hs=0;hs<Uu.length;++hs)if($a(Uu[hs],zs,wu),W(!Uu[hs]||Uu[hs].texture&&sd.indexOf(Uu[hs].texture._texture.format)>=0||Uu[hs].renderbuffer&&Dr.indexOf(Uu[hs].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+hs+" is invalid"),Uu[hs]&&Uu[hs].texture){var nf=Qc[Uu[hs].texture._texture.format]*f[Uu[hs].texture._texture.type];Ru===null?Ru=nf:W(Ru===nf,"all color attachments much have the same number of bits per pixel.")}return $a(Qf,zs,wu),W(!Qf||Qf.texture&&Qf.texture._texture.format===Zc||Qf.renderbuffer&&Qf.renderbuffer._renderbuffer.format===Y,"invalid depth attachment for framebuffer object"),$a(js,zs,wu),W(!js||js.renderbuffer&&js.renderbuffer._renderbuffer.format===ye,"invalid stencil attachment for framebuffer object"),$a(Pu,zs,wu),W(!Pu||Pu.texture&&Pu.texture._texture.format===Pe||Pu.renderbuffer&&Pu.renderbuffer._renderbuffer.format===Pe,"invalid depth-stencil attachment for framebuffer object"),xo(Ia),Ia.width=zs,Ia.height=wu,Ia.colorAttachments=Uu,Ia.depthAttachment=Qf,Ia.stencilAttachment=js,Ia.depthStencilAttachment=Pu,Os.color=Uu.map(Ni),Os.depth=Ni(Qf),Os.stencil=Ni(js),Os.depthStencil=Ni(Pu),Os.width=Ia.width,Os.height=Ia.height,ea(Ia),Os}function Bs(so,yo){W(Gi.next!==Ia,"can not resize a framebuffer which is currently in use");var hs=Math.max(so|0,1),zs=Math.max(yo|0||hs,1);if(hs===Ia.width&&zs===Ia.height)return Os;for(var wu=Ia.colorAttachments,Gu=0;Gu<wu.length;++Gu)La(wu[Gu],hs,zs);return La(Ia.depthAttachment,hs,zs),La(Ia.stencilAttachment,hs,zs),La(Ia.depthStencilAttachment,hs,zs),Ia.width=Os.width=hs,Ia.height=Os.height=zs,ea(Ia),Os}return Os(Oa,to),l(Os,{resize:Bs,_reglType:"framebuffer",_framebuffer:Ia,destroy:function(){xs(Ia),xo(Ia)},use:function(so){Gi.setFBO({framebuffer:Os},so)}})}function Zo(Oa){var to=Array(6);function Ia(Bs){var so;W(to.indexOf(Gi.next)<0,"can not update framebuffer which is currently in use");var yo={color:null},hs=0,zs=null,wu="rgba",Gu="uint8",Bl=1;if(typeof Bs=="number")hs=Bs|0;else if(!Bs)hs=1;else{W.type(Bs,"object","invalid arguments for framebuffer");var Au=Bs;if("shape"in Au){var Sf=Au.shape;W(Array.isArray(Sf)&&Sf.length>=2,"invalid shape for framebuffer"),W(Sf[0]===Sf[1],"cube framebuffer must be square"),hs=Sf[0]}else"radius"in Au&&(hs=Au.radius|0),"width"in Au?(hs=Au.width|0,"height"in Au&&W(Au.height===hs,"must be square")):"height"in Au&&(hs=Au.height|0);("color"in Au||"colors"in Au)&&(zs=Au.color||Au.colors,Array.isArray(zs)&&W(zs.length===1||Vr.webgl_draw_buffers,"multiple render targets not supported")),zs||("colorCount"in Au&&(Bl=Au.colorCount|0,W(Bl>0,"invalid color buffer count")),"colorType"in Au&&(W.oneOf(Au.colorType,Ra,"invalid color type"),Gu=Au.colorType),"colorFormat"in Au&&(wu=Au.colorFormat,W.oneOf(Au.colorFormat,Ea,"invalid color format for texture"))),"depth"in Au&&(yo.depth=Au.depth),"stencil"in Au&&(yo.stencil=Au.stencil),"depthStencil"in Au&&(yo.depthStencil=Au.depthStencil)}var Xl;if(zs)if(Array.isArray(zs))for(Xl=[],so=0;so<zs.length;++so)Xl[so]=zs[so];else Xl=[zs];else{Xl=Array(Bl);var Ic={radius:hs,format:wu,type:Gu};for(so=0;so<Bl;++so)Xl[so]=Ci.createCube(Ic)}for(yo.color=Array(Xl.length),so=0;so<Xl.length;++so){var Cl=Xl[so];W(typeof Cl=="function"&&Cl._reglType==="textureCube","invalid cube map"),hs=hs||Cl.width,W(Cl.width===hs&&Cl.height===hs,"invalid cube map shape"),yo.color[so]={target:Ur,data:Xl[so]}}for(so=0;so<6;++so){for(var rf=0;rf<Xl.length;++rf)yo.color[rf].target=Ur+so;so>0&&(yo.depth=to[0].depth,yo.stencil=to[0].stencil,yo.depthStencil=to[0].depthStencil),to[so]?to[so](yo):to[so]=sa(yo)}return l(Ia,{width:hs,height:hs,color:Xl})}function Os(Bs){var so,yo=Bs|0;if(W(yo>0&&yo<=Ln.maxCubeMapSize,"invalid radius for cube fbo"),yo===Ia.width)return Ia;var hs=Ia.color;for(so=0;so<hs.length;++so)hs[so].resize(yo);for(so=0;so<6;++so)to[so].resize(yo);return Ia.width=Ia.height=yo,Ia}return Ia(Oa),l(Ia,{faces:to,resize:Os,_reglType:"framebufferCube",destroy:function(){to.forEach(function(Bs){Bs.destroy()})}})}function fo(){Gi.cur=null,Gi.next=null,Gi.dirty=!0,vr(_a).forEach(function(Oa){Oa.framebuffer=jt.createFramebuffer(),ea(Oa)})}return l(Gi,{getFramebuffer:function(Oa){if(typeof Oa=="function"&&Oa._reglType==="framebuffer"){var to=Oa._framebuffer;if(to instanceof Ga)return to}return null},create:sa,createCube:Zo,clear:function(){vr(_a).forEach(xs)},restore:fo})}var gn=5126,Bn=34962,fn=34963,Fn=["attributes","elements","offset","count","primitive","instances"];function jn(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=gn,this.offset=0,this.stride=0,this.divisor=0}function vi(jt,Vr,Ln,Ci,aa,Ai,Gi){for(var Ea=Ln.maxAttributes,Pa=new Array(Ea),Ra=0;Ra<Ea;++Ra)Pa[Ra]=new jn;var Za=0,Ha={},$a={Record:jn,scope:{},state:Pa,currentVAO:null,targetVAO:null,restore:Ua()?xo:function(){},createVAO:xs,getVAO:Ni,destroyBuffer:ya,setVAO:Ua()?La:Ya,clear:Ua()?_a:function(){}};function ya(ea){for(var sa=0;sa<Pa.length;++sa){var Zo=Pa[sa];Zo.buffer===ea&&(jt.disableVertexAttribArray(sa),Zo.buffer=null)}}function Ua(){return Vr.oes_vertex_array_object}function ui(){return Vr.angle_instanced_arrays}function Ni(ea){return typeof ea=="function"&&ea._vao?ea._vao:null}function La(ea){if(ea!==$a.currentVAO){var sa=Ua();ea?sa.bindVertexArrayOES(ea.vao):sa.bindVertexArrayOES(null),$a.currentVAO=ea}}function Ya(ea){if(ea!==$a.currentVAO){if(ea)ea.bindAttrs();else{for(var sa=ui(),Zo=0;Zo<Pa.length;++Zo){var fo=Pa[Zo];fo.buffer?(jt.enableVertexAttribArray(Zo),fo.buffer.bind(),jt.vertexAttribPointer(Zo,fo.size,fo.type,fo.normalized,fo.stride,fo.offfset),sa&&fo.divisor&&sa.vertexAttribDivisorANGLE(Zo,fo.divisor)):(jt.disableVertexAttribArray(Zo),jt.vertexAttrib4f(Zo,fo.x,fo.y,fo.z,fo.w))}Gi.elements?jt.bindBuffer(fn,Gi.elements.buffer.buffer):jt.bindBuffer(fn,null)}$a.currentVAO=ea}}function _a(){vr(Ha).forEach(function(ea){ea.destroy()})}function Ga(){this.id=++Za,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var ea=Ua();ea?this.vao=ea.createVertexArrayOES():this.vao=null,Ha[this.id]=this,this.buffers=[]}Ga.prototype.bindAttrs=function(){for(var ea=ui(),sa=this.attributes,Zo=0;Zo<sa.length;++Zo){var fo=sa[Zo];fo.buffer?(jt.enableVertexAttribArray(Zo),jt.bindBuffer(Bn,fo.buffer.buffer),jt.vertexAttribPointer(Zo,fo.size,fo.type,fo.normalized,fo.stride,fo.offset),ea&&fo.divisor&&ea.vertexAttribDivisorANGLE(Zo,fo.divisor)):(jt.disableVertexAttribArray(Zo),jt.vertexAttrib4f(Zo,fo.x,fo.y,fo.z,fo.w))}for(var Oa=sa.length;Oa<Ea;++Oa)jt.disableVertexAttribArray(Oa);var to=Ai.getElements(this.elements);to?jt.bindBuffer(fn,to.buffer.buffer):jt.bindBuffer(fn,null)},Ga.prototype.refresh=function(){var ea=Ua();ea&&(ea.bindVertexArrayOES(this.vao),this.bindAttrs(),$a.currentVAO=null,ea.bindVertexArrayOES(null))},Ga.prototype.destroy=function(){if(this.vao){var ea=Ua();this===$a.currentVAO&&($a.currentVAO=null,ea.bindVertexArrayOES(null)),ea.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Ha[this.id]&&(delete Ha[this.id],Ci.vaoCount-=1)};function xo(){var ea=Ua();ea&&vr(Ha).forEach(function(sa){sa.refresh()})}function xs(ea){var sa=new Ga;Ci.vaoCount+=1;function Zo(fo){var Oa;if(Array.isArray(fo))Oa=fo,sa.elements&&sa.ownsElements&&sa.elements.destroy(),sa.elements=null,sa.ownsElements=!1,sa.offset=0,sa.count=0,sa.instances=-1,sa.primitive=4;else{if(W(typeof fo=="object","invalid arguments for create vao"),W("attributes"in fo,"must specify attributes for vao"),fo.elements){var to=fo.elements;sa.ownsElements?typeof to=="function"&&to._reglType==="elements"?(sa.elements.destroy(),sa.ownsElements=!1):(sa.elements(to),sa.ownsElements=!1):Ai.getElements(fo.elements)?(sa.elements=fo.elements,sa.ownsElements=!1):(sa.elements=Ai.create(fo.elements),sa.ownsElements=!0)}else sa.elements=null,sa.ownsElements=!1;Oa=fo.attributes,sa.offset=0,sa.count=-1,sa.instances=-1,sa.primitive=4,sa.elements&&(sa.count=sa.elements._elements.vertCount,sa.primitive=sa.elements._elements.primType),"offset"in fo&&(sa.offset=fo.offset|0),"count"in fo&&(sa.count=fo.count|0),"instances"in fo&&(sa.instances=fo.instances|0),"primitive"in fo&&(W(fo.primitive in Mi,"bad primitive type: "+fo.primitive),sa.primitive=Mi[fo.primitive]),W.optional(function(){for(var Gu=Object.keys(fo),Bl=0;Bl<Gu.length;++Bl)W(Fn.indexOf(Gu[Bl])>=0,'invalid option for vao: "'+Gu[Bl]+'" valid options are '+Fn)}),W(Array.isArray(Oa),"attributes must be an array")}W(Oa.length<Ea,"too many attributes"),W(Oa.length>0,"must specify at least one attribute");var Ia={},Os=sa.attributes;Os.length=Oa.length;for(var Bs=0;Bs<Oa.length;++Bs){var so=Oa[Bs],yo=Os[Bs]=new jn,hs=so.data||so;if(Array.isArray(hs)||C(hs)||Rs(hs)){var zs;sa.buffers[Bs]&&(zs=sa.buffers[Bs],C(hs)&&zs._buffer.byteLength>=hs.byteLength?zs.subdata(hs):(zs.destroy(),sa.buffers[Bs]=null)),sa.buffers[Bs]||(zs=sa.buffers[Bs]=aa.create(so,Bn,!1,!0)),yo.buffer=aa.getBuffer(zs),yo.size=yo.buffer.dimension|0,yo.normalized=!1,yo.type=yo.buffer.dtype,yo.offset=0,yo.stride=0,yo.divisor=0,yo.state=1,Ia[Bs]=1}else aa.getBuffer(so)?(yo.buffer=aa.getBuffer(so),yo.size=yo.buffer.dimension|0,yo.normalized=!1,yo.type=yo.buffer.dtype,yo.offset=0,yo.stride=0,yo.divisor=0,yo.state=1):aa.getBuffer(so.buffer)?(yo.buffer=aa.getBuffer(so.buffer),yo.size=(+so.size||yo.buffer.dimension)|0,yo.normalized=!!so.normalized||!1,"type"in so?(W.parameter(so.type,Si,"invalid buffer type"),yo.type=Si[so.type]):yo.type=yo.buffer.dtype,yo.offset=(so.offset||0)|0,yo.stride=(so.stride||0)|0,yo.divisor=(so.divisor||0)|0,yo.state=1,W(yo.size>=1&&yo.size<=4,"size must be between 1 and 4"),W(yo.offset>=0,"invalid offset"),W(yo.stride>=0&&yo.stride<=255,"stride must be between 0 and 255"),W(yo.divisor>=0,"divisor must be positive"),W(!yo.divisor||!!Vr.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in so?(W(Bs>0,"first attribute must not be a constant"),yo.x=+so.x||0,yo.y=+so.y||0,yo.z=+so.z||0,yo.w=+so.w||0,yo.state=2):W(!1,"invalid attribute spec for location "+Bs)}for(var wu=0;wu<sa.buffers.length;++wu)!Ia[wu]&&sa.buffers[wu]&&(sa.buffers[wu].destroy(),sa.buffers[wu]=null);return sa.refresh(),Zo}return Zo.destroy=function(){for(var fo=0;fo<sa.buffers.length;++fo)sa.buffers[fo]&&sa.buffers[fo].destroy();sa.buffers.length=0,sa.ownsElements&&(sa.elements.destroy(),sa.elements=null,sa.ownsElements=!1),sa.destroy()},Zo._vao=sa,Zo._reglType="vao",Zo(ea)}return $a}var ki=35632,Ti=35633,Fi=35718,na=35721;function ka(jt,Vr,Ln,Ci){var aa={},Ai={};function Gi(ui,Ni,La,Ya){this.name=ui,this.id=Ni,this.location=La,this.info=Ya}function Ea(ui,Ni){for(var La=0;La<ui.length;++La)if(ui[La].id===Ni.id){ui[La].location=Ni.location;return}ui.push(Ni)}function Pa(ui,Ni,La){var Ya=ui===ki?aa:Ai,_a=Ya[Ni];if(!_a){var Ga=Vr.str(Ni);_a=jt.createShader(ui),jt.shaderSource(_a,Ga),jt.compileShader(_a),W.shaderError(jt,_a,Ga,ui,La),Ya[Ni]=_a}return _a}var Ra={},Za=[],Ha=0;function $a(ui,Ni){this.id=Ha++,this.fragId=ui,this.vertId=Ni,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ci.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ya(ui,Ni,La){var Ya,_a,Ga=Pa(ki,ui.fragId),xo=Pa(Ti,ui.vertId),xs=ui.program=jt.createProgram();if(jt.attachShader(xs,Ga),jt.attachShader(xs,xo),La)for(Ya=0;Ya<La.length;++Ya){var ea=La[Ya];jt.bindAttribLocation(xs,ea[0],ea[1])}jt.linkProgram(xs),W.linkError(jt,xs,Vr.str(ui.fragId),Vr.str(ui.vertId),Ni);var sa=jt.getProgramParameter(xs,Fi);Ci.profile&&(ui.stats.uniformsCount=sa);var Zo=ui.uniforms;for(Ya=0;Ya<sa;++Ya)if(_a=jt.getActiveUniform(xs,Ya),_a)if(_a.size>1)for(var fo=0;fo<_a.size;++fo){var Oa=_a.name.replace("[0]","["+fo+"]");Ea(Zo,new Gi(Oa,Vr.id(Oa),jt.getUniformLocation(xs,Oa),_a))}else Ea(Zo,new Gi(_a.name,Vr.id(_a.name),jt.getUniformLocation(xs,_a.name),_a));var to=jt.getProgramParameter(xs,na);Ci.profile&&(ui.stats.attributesCount=to);var Ia=ui.attributes;for(Ya=0;Ya<to;++Ya)_a=jt.getActiveAttrib(xs,Ya),_a&&Ea(Ia,new Gi(_a.name,Vr.id(_a.name),jt.getAttribLocation(xs,_a.name),_a))}Ci.profile&&(Ln.getMaxUniformsCount=function(){var ui=0;return Za.forEach(function(Ni){Ni.stats.uniformsCount>ui&&(ui=Ni.stats.uniformsCount)}),ui},Ln.getMaxAttributesCount=function(){var ui=0;return Za.forEach(function(Ni){Ni.stats.attributesCount>ui&&(ui=Ni.stats.attributesCount)}),ui});function Ua(){aa={},Ai={};for(var ui=0;ui<Za.length;++ui)ya(Za[ui],null,Za[ui].attributes.map(function(Ni){return[Ni.location,Ni.name]}))}return{clear:function(){var ui=jt.deleteShader.bind(jt);vr(aa).forEach(ui),aa={},vr(Ai).forEach(ui),Ai={},Za.forEach(function(Ni){jt.deleteProgram(Ni.program)}),Za.length=0,Ra={},Ln.shaderCount=0},program:function(ui,Ni,La,Ya){W.command(ui>=0,"missing vertex shader",La),W.command(Ni>=0,"missing fragment shader",La);var _a=Ra[Ni];_a||(_a=Ra[Ni]={});var Ga=_a[ui];if(Ga&&(Ga.refCount++,!Ya))return Ga;var xo=new $a(Ni,ui);return Ln.shaderCount++,ya(xo,La,Ya),Ga||(_a[ui]=xo),Za.push(xo),l(xo,{destroy:function(){if(xo.refCount--,xo.refCount<=0){jt.deleteProgram(xo.program);var xs=Za.indexOf(xo);Za.splice(xs,1),Ln.shaderCount--}_a[xo.vertId].refCount<=0&&(jt.deleteShader(Ai[xo.vertId]),delete Ai[xo.vertId],delete Ra[xo.fragId][xo.vertId]),Object.keys(Ra[xo.fragId]).length||(jt.deleteShader(aa[xo.fragId]),delete aa[xo.fragId],delete Ra[xo.fragId])}})},restore:Ua,shader:Pa,frag:-1,vert:-1}}var Na=6408,po=5121,No=3333,is=5126;function rs(jt,Vr,Ln,Ci,aa,Ai,Gi){function Ea(Za){var Ha;Vr.next===null?(W(aa.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ha=po):(W(Vr.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ha=Vr.next.colorAttachments[0].texture._texture.type,W.optional(function(){Ai.oes_texture_float?(W(Ha===po||Ha===is,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ha===is&&W(Gi.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):W(Ha===po,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var $a=0,ya=0,Ua=Ci.framebufferWidth,ui=Ci.framebufferHeight,Ni=null;C(Za)?Ni=Za:Za&&(W.type(Za,"object","invalid arguments to regl.read()"),$a=Za.x|0,ya=Za.y|0,W($a>=0&&$a<Ci.framebufferWidth,"invalid x offset for regl.read"),W(ya>=0&&ya<Ci.framebufferHeight,"invalid y offset for regl.read"),Ua=(Za.width||Ci.framebufferWidth-$a)|0,ui=(Za.height||Ci.framebufferHeight-ya)|0,Ni=Za.data||null),Ni&&(Ha===po?W(Ni instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ha===is&&W(Ni instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),W(Ua>0&&Ua+$a<=Ci.framebufferWidth,"invalid width for read pixels"),W(ui>0&&ui+ya<=Ci.framebufferHeight,"invalid height for read pixels"),Ln();var La=Ua*ui*4;return Ni||(Ha===po?Ni=new Uint8Array(La):Ha===is&&(Ni=Ni||new Float32Array(La))),W.isTypedArray(Ni,"data buffer for regl.read() must be a typedarray"),W(Ni.byteLength>=La,"data buffer for regl.read() too small"),jt.pixelStorei(No,4),jt.readPixels($a,ya,Ua,ui,Na,Ha,Ni),Ni}function Pa(Za){var Ha;return Vr.setFBO({framebuffer:Za.framebuffer},function(){Ha=Ea(Za)}),Ha}function Ra(Za){return!Za||!("framebuffer"in Za)?Ea(Za):Pa(Za)}return Ra}function Ls(jt){return Array.prototype.slice.call(jt)}function vo(jt){return Ls(jt).join("")}function ds(){var jt=0,Vr=[],Ln=[];function Ci(Ha){for(var $a=0;$a<Ln.length;++$a)if(Ln[$a]===Ha)return Vr[$a];var ya="g"+jt++;return Vr.push(ya),Ln.push(Ha),ya}function aa(){var Ha=[];function $a(){Ha.push.apply(Ha,Ls(arguments))}var ya=[];function Ua(){var ui="v"+jt++;return ya.push(ui),arguments.length>0&&(Ha.push(ui,"="),Ha.push.apply(Ha,Ls(arguments)),Ha.push(";")),ui}return l($a,{def:Ua,toString:function(){return vo([ya.length>0?"var "+ya.join(",")+";":"",vo(Ha)])}})}function Ai(){var Ha=aa(),$a=aa(),ya=Ha.toString,Ua=$a.toString;function ui(Ni,La){$a(Ni,La,"=",Ha.def(Ni,La),";")}return l(function(){Ha.apply(Ha,Ls(arguments))},{def:Ha.def,entry:Ha,exit:$a,save:ui,set:function(Ni,La,Ya){ui(Ni,La),Ha(Ni,La,"=",Ya,";")},toString:function(){return ya()+Ua()}})}function Gi(){var Ha=vo(arguments),$a=Ai(),ya=Ai(),Ua=$a.toString,ui=ya.toString;return l($a,{then:function(){return $a.apply($a,Ls(arguments)),this},else:function(){return ya.apply(ya,Ls(arguments)),this},toString:function(){var Ni=ui();return Ni&&(Ni="else{"+Ni+"}"),vo(["if(",Ha,"){",Ua(),"}",Ni])}})}var Ea=aa(),Pa={};function Ra(Ha,$a){var ya=[];function Ua(){var _a="a"+ya.length;return ya.push(_a),_a}$a=$a||0;for(var ui=0;ui<$a;++ui)Ua();var Ni=Ai(),La=Ni.toString,Ya=Pa[Ha]=l(Ni,{arg:Ua,toString:function(){return vo(["function(",ya.join(),"){",La(),"}"])}});return Ya}function Za(){var Ha=['"use strict";',Ea,"return {"];Object.keys(Pa).forEach(function(ui){Ha.push('"',ui,'":',Pa[ui].toString(),",")}),Ha.push("}");var $a=vo(Ha).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ya=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ua=ya?v.Function.apply(null,Vr.concat($a)):Function.apply(null,Vr.concat($a));return Ua.apply(null,Ln)}return{global:Ea,link:Ci,block:aa,proc:Ra,scope:Ai,cond:Gi,compile:Za}}var Ns="xyzw".split(""),cs=5121,Jo=1,$s=2,ws=0,_s=1,El=2,nl=3,Qu=4,Ac=5,Ju=6,qu="dither",Tc="blend.enable",ec="blend.color",Pf="blend.equation",Ef="blend.func",$l="depth.enable",Uc="depth.func",Jh="depth.range",qh="depth.mask",Sh="colorMask",Of="cull.enable",Ch="cull.face",pf="frontFace",oh="lineWidth",Jc="polygonOffset.enable",nc="polygonOffset.offset",ic="sample.alpha",wh="sample.enable",Fh="sample.coverage",Du="stencil.enable",yu="stencil.mask",qc="stencil.func",sh="stencil.opFront",vh="stencil.opBack",Nf="scissor.enable",mh="scissor.box",If="viewport",Rf="profile",vf="framebuffer",oe="vert",Br="frag",xt="elements",mt="primitive",Ht="count",or="offset",en="instances",_n="vao",Tn="Width",zn="Height",wi=vf+Tn,Xi=vf+zn,ba=If+Tn,mo=If+zn,Ja="drawingBuffer",Ds=Ja+Tn,Ts=Ja+zn,lu=[Ef,Pf,qc,sh,vh,Fh,If,mh,nc],Iu=34962,_u=34963,Mc=35632,tu=35633,Fl=3553,Ys=34067,ku=2884,Bu=3042,Gl=3024,ru=2960,pl=2929,ef=3089,Bh=32823,hc=32926,uh=32928,Kf=5126,gh=35664,yh=35665,Yf=35666,dc=5124,ne=35667,Me=35668,Oe=35669,Ke=35670,pt=35671,Pt=35672,Xr=35673,An=35674,mi=35675,un=35676,bi=35678,ga=35680,ss=4,To=1028,Ro=1029,fs=2304,ps=2305,zo=32775,ks=32776,xu=519,cu=7680,tf=0,$c=1,ac=32774,ll=513,Cu=36160,Sl=36064,Wl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],jc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},_h={frag:Mc,vert:tu},Oc={cw:fs,ccw:ps};function ud(jt){return Array.isArray(jt)||C(jt)||Rs(jt)}function Hd(jt){return jt.sort(function(Vr,Ln){return Vr===If?-1:Ln===If?1:Vr<Ln?-1:1})}function Zu(jt,Vr,Ln,Ci){this.thisDep=jt,this.contextDep=Vr,this.propDep=Ln,this.append=Ci}function Sd(jt){return jt&&!(jt.thisDep||jt.contextDep||jt.propDep)}function Hc(jt){return new Zu(!1,!1,!1,jt)}function Nh(jt,Vr){var Ln=jt.type;if(Ln===ws){var Ci=jt.data.length;return new Zu(!0,Ci>=1,Ci>=2,Vr)}else if(Ln===Qu){var aa=jt.data;return new Zu(aa.thisDep,aa.contextDep,aa.propDep,Vr)}else{if(Ln===Ac)return new Zu(!1,!1,!1,Vr);if(Ln===Ju){for(var Ai=!1,Gi=!1,Ea=!1,Pa=0;Pa<jt.data.length;++Pa){var Ra=jt.data[Pa];if(Ra.type===_s)Ea=!0;else if(Ra.type===El)Gi=!0;else if(Ra.type===nl)Ai=!0;else if(Ra.type===ws){Ai=!0;var Za=Ra.data;Za>=1&&(Gi=!0),Za>=2&&(Ea=!0)}else Ra.type===Qu&&(Ai=Ai||Ra.data.thisDep,Gi=Gi||Ra.data.contextDep,Ea=Ea||Ra.data.propDep)}return new Zu(Ai,Gi,Ea,Vr)}else return new Zu(Ln===nl,Ln===El,Ln===_s,Vr)}}var up=new Zu(!1,!1,!1,function(){});function _d(jt,Vr,Ln,Ci,aa,Ai,Gi,Ea,Pa,Ra,Za,Ha,$a,ya,Ua){var ui=Ra.Record,Ni={add:32774,subtract:32778,"reverse subtract":32779};Ln.ext_blend_minmax&&(Ni.min=zo,Ni.max=ks);var La=Ln.angle_instanced_arrays,Ya=Ln.webgl_draw_buffers,_a=Ln.oes_vertex_array_object,Ga={dirty:!0,profile:Ua.profile},xo={},xs=[],ea={},sa={};function Zo(Ie){return Ie.replace(".","_")}function fo(Ie,Ze,Fe){var it=Zo(Ie);xs.push(Ie),xo[it]=Ga[it]=!!Fe,ea[it]=Ze}function Oa(Ie,Ze,Fe){var it=Zo(Ie);xs.push(Ie),Array.isArray(Fe)?(Ga[it]=Fe.slice(),xo[it]=Fe.slice()):Ga[it]=xo[it]=Fe,sa[it]=Ze}fo(qu,Gl),fo(Tc,Bu),Oa(ec,"blendColor",[0,0,0,0]),Oa(Pf,"blendEquationSeparate",[ac,ac]),Oa(Ef,"blendFuncSeparate",[$c,tf,$c,tf]),fo($l,pl,!0),Oa(Uc,"depthFunc",ll),Oa(Jh,"depthRange",[0,1]),Oa(qh,"depthMask",!0),Oa(Sh,Sh,[!0,!0,!0,!0]),fo(Of,ku),Oa(Ch,"cullFace",Ro),Oa(pf,pf,ps),Oa(oh,oh,1),fo(Jc,Bh),Oa(nc,"polygonOffset",[0,0]),fo(ic,hc),fo(wh,uh),Oa(Fh,"sampleCoverage",[1,!1]),fo(Du,ru),Oa(yu,"stencilMask",-1),Oa(qc,"stencilFunc",[xu,0,-1]),Oa(sh,"stencilOpSeparate",[To,cu,cu,cu]),Oa(vh,"stencilOpSeparate",[Ro,cu,cu,cu]),fo(Nf,ef),Oa(mh,"scissor",[0,0,jt.drawingBufferWidth,jt.drawingBufferHeight]),Oa(If,If,[0,0,jt.drawingBufferWidth,jt.drawingBufferHeight]);var to={gl:jt,context:$a,strings:Vr,next:xo,current:Ga,draw:Ha,elements:Ai,buffer:aa,shader:Za,attributes:Ra.state,vao:Ra,uniforms:Pa,framebuffer:Ea,extensions:Ln,timer:ya,isBufferArgs:ud},Ia={primTypes:Mi,compareFuncs:jc,blendFuncs:Wl,blendEquations:Ni,stencilOps:hu,glTypes:Si,orientationType:Oc};W.optional(function(){to.isArrayLike=Xs}),Ya&&(Ia.backBuffer=[Ro],Ia.drawBuffer=Ar(Ci.maxDrawbuffers,function(Ie){return Ie===0?[0]:Ar(Ie,function(Ze){return Sl+Ze})}));var Os=0;function Bs(){var Ie=ds(),Ze=Ie.link,Fe=Ie.global;Ie.id=Os++,Ie.batchId="0";var it=Ze(to),gt=Ie.shared={props:"a0"};Object.keys(to).forEach(function(rr){gt[rr]=Fe.def(it,".",rr)}),W.optional(function(){Ie.CHECK=Ze(W),Ie.commandStr=W.guessCommand(),Ie.command=Ze(Ie.commandStr),Ie.assert=function(rr,Xt,gr){rr("if(!(",Xt,"))",this.CHECK,".commandRaise(",Ze(gr),",",this.command,");")},Ia.invalidBlendCombinations=Pc});var It=Ie.next={},Tt=Ie.current={};Object.keys(sa).forEach(function(rr){Array.isArray(Ga[rr])&&(It[rr]=Fe.def(gt.next,".",rr),Tt[rr]=Fe.def(gt.current,".",rr))});var qt=Ie.constants={};Object.keys(Ia).forEach(function(rr){qt[rr]=Fe.def(JSON.stringify(Ia[rr]))}),Ie.invoke=function(rr,Xt){switch(Xt.type){case ws:var gr=["this",gt.context,gt.props,Ie.batchId];return rr.def(Ze(Xt.data),".call(",gr.slice(0,Math.max(Xt.data.length+1,4)),")");case _s:return rr.def(gt.props,Xt.data);case El:return rr.def(gt.context,Xt.data);case nl:return rr.def("this",Xt.data);case Qu:return Xt.data.append(Ie,rr),Xt.data.ref;case Ac:return Xt.data.toString();case Ju:return Xt.data.map(function(Sr){return Ie.invoke(rr,Sr)})}},Ie.attribCache={};var Ot={};return Ie.scopeAttrib=function(rr){var Xt=Vr.id(rr);if(Xt in Ot)return Ot[Xt];var gr=Ra.scope[Xt];gr||(gr=Ra.scope[Xt]=new ui);var Sr=Ot[Xt]=Ze(gr);return Sr},Ie}function so(Ie){var Ze=Ie.static,Fe=Ie.dynamic,it;if(Rf in Ze){var gt=!!Ze[Rf];it=Hc(function(Tt,qt){return gt}),it.enable=gt}else if(Rf in Fe){var It=Fe[Rf];it=Nh(It,function(Tt,qt){return Tt.invoke(qt,It)})}return it}function yo(Ie,Ze){var Fe=Ie.static,it=Ie.dynamic;if(vf in Fe){var gt=Fe[vf];return gt?(gt=Ea.getFramebuffer(gt),W.command(gt,"invalid framebuffer object"),Hc(function(Tt,qt){var Ot=Tt.link(gt),rr=Tt.shared;qt.set(rr.framebuffer,".next",Ot);var Xt=rr.context;return qt.set(Xt,"."+wi,Ot+".width"),qt.set(Xt,"."+Xi,Ot+".height"),Ot})):Hc(function(Tt,qt){var Ot=Tt.shared;qt.set(Ot.framebuffer,".next","null");var rr=Ot.context;return qt.set(rr,"."+wi,rr+"."+Ds),qt.set(rr,"."+Xi,rr+"."+Ts),"null"})}else if(vf in it){var It=it[vf];return Nh(It,function(Tt,qt){var Ot=Tt.invoke(qt,It),rr=Tt.shared,Xt=rr.framebuffer,gr=qt.def(Xt,".getFramebuffer(",Ot,")");W.optional(function(){Tt.assert(qt,"!"+Ot+"||"+gr,"invalid framebuffer object")}),qt.set(Xt,".next",gr);var Sr=rr.context;return qt.set(Sr,"."+wi,gr+"?"+gr+".width:"+Sr+"."+Ds),qt.set(Sr,"."+Xi,gr+"?"+gr+".height:"+Sr+"."+Ts),gr})}else return null}function hs(Ie,Ze,Fe){var it=Ie.static,gt=Ie.dynamic;function It(Ot){if(Ot in it){var rr=it[Ot];W.commandType(rr,"object","invalid "+Ot,Fe.commandStr);var Xt=!0,gr=rr.x|0,Sr=rr.y|0,Wr,Cn;return"width"in rr?(Wr=rr.width|0,W.command(Wr>=0,"invalid "+Ot,Fe.commandStr)):Xt=!1,"height"in rr?(Cn=rr.height|0,W.command(Cn>=0,"invalid "+Ot,Fe.commandStr)):Xt=!1,new Zu(!Xt&&Ze&&Ze.thisDep,!Xt&&Ze&&Ze.contextDep,!Xt&&Ze&&Ze.propDep,function(Rn,Gn){var ti=Rn.shared.context,ii=Wr;"width"in rr||(ii=Gn.def(ti,".",wi,"-",gr));var b=Cn;return"height"in rr||(b=Gn.def(ti,".",Xi,"-",Sr)),[gr,Sr,ii,b]})}else if(Ot in gt){var xn=gt[Ot],In=Nh(xn,function(Rn,Gn){var ti=Rn.invoke(Gn,xn);W.optional(function(){Rn.assert(Gn,ti+"&&typeof "+ti+'==="object"',"invalid "+Ot)});var ii=Rn.shared.context,b=Gn.def(ti,".x|0"),M=Gn.def(ti,".y|0"),D=Gn.def('"width" in ',ti,"?",ti,".width|0:","(",ii,".",wi,"-",b,")"),P=Gn.def('"height" in ',ti,"?",ti,".height|0:","(",ii,".",Xi,"-",M,")");return W.optional(function(){Rn.assert(Gn,D+">=0&&"+P+">=0","invalid "+Ot)}),[b,M,D,P]});return Ze&&(In.thisDep=In.thisDep||Ze.thisDep,In.contextDep=In.contextDep||Ze.contextDep,In.propDep=In.propDep||Ze.propDep),In}else return Ze?new Zu(Ze.thisDep,Ze.contextDep,Ze.propDep,function(Rn,Gn){var ti=Rn.shared.context;return[0,0,Gn.def(ti,".",wi),Gn.def(ti,".",Xi)]}):null}var Tt=It(If);if(Tt){var qt=Tt;Tt=new Zu(Tt.thisDep,Tt.contextDep,Tt.propDep,function(Ot,rr){var Xt=qt.append(Ot,rr),gr=Ot.shared.context;return rr.set(gr,"."+ba,Xt[2]),rr.set(gr,"."+mo,Xt[3]),Xt})}return{viewport:Tt,scissor_box:It(mh)}}function zs(Ie,Ze){var Fe=Ie.static,it=typeof Fe[Br]=="string"&&typeof Fe[oe]=="string";if(it){if(Object.keys(Ze.dynamic).length>0)return null;var gt=Ze.static,It=Object.keys(gt);if(It.length>0&&typeof gt[It[0]]=="number"){for(var Tt=[],qt=0;qt<It.length;++qt)W(typeof gt[It[qt]]=="number","must specify all vertex attribute locations when using vaos"),Tt.push([gt[It[qt]]|0,It[qt]]);return Tt}}return null}function wu(Ie,Ze,Fe){var it=Ie.static,gt=Ie.dynamic;function It(Xt){if(Xt in it){var gr=Vr.id(it[Xt]);W.optional(function(){Za.shader(_h[Xt],gr,W.guessCommand())});var Sr=Hc(function(){return gr});return Sr.id=gr,Sr}else if(Xt in gt){var Wr=gt[Xt];return Nh(Wr,function(Cn,xn){var In=Cn.invoke(xn,Wr),Rn=xn.def(Cn.shared.strings,".id(",In,")");return W.optional(function(){xn(Cn.shared.shader,".shader(",_h[Xt],",",Rn,",",Cn.command,");")}),Rn})}return null}var Tt=It(Br),qt=It(oe),Ot=null,rr;return Sd(Tt)&&Sd(qt)?(Ot=Za.program(qt.id,Tt.id,null,Fe),rr=Hc(function(Xt,gr){return Xt.link(Ot)})):rr=new Zu(Tt&&Tt.thisDep||qt&&qt.thisDep,Tt&&Tt.contextDep||qt&&qt.contextDep,Tt&&Tt.propDep||qt&&qt.propDep,function(Xt,gr){var Sr=Xt.shared.shader,Wr;Tt?Wr=Tt.append(Xt,gr):Wr=gr.def(Sr,".",Br);var Cn;qt?Cn=qt.append(Xt,gr):Cn=gr.def(Sr,".",oe);var xn=Sr+".program("+Cn+","+Wr;return W.optional(function(){xn+=","+Xt.command}),gr.def(xn+")")}),{frag:Tt,vert:qt,progVar:rr,program:Ot}}function Gu(Ie,Ze){var Fe=Ie.static,it=Ie.dynamic,gt={},It=!1;function Tt(){if(_n in Fe){var Gn=Fe[_n];return Gn!==null&&Ra.getVAO(Gn)===null&&(Gn=Ra.createVAO(Gn)),It=!0,gt.vao=Gn,Hc(function(ii){var b=Ra.getVAO(Gn);return b?ii.link(b):"null"})}else if(_n in it){It=!0;var ti=it[_n];return Nh(ti,function(ii,b){var M=ii.invoke(b,ti);return b.def(ii.shared.vao+".getVAO("+M+")")})}return null}var qt=Tt(),Ot=!1;function rr(){if(xt in Fe){var Gn=Fe[xt];if(gt.elements=Gn,ud(Gn)){var ti=gt.elements=Ai.create(Gn,!0);Gn=Ai.getElements(ti),Ot=!0}else Gn&&(Gn=Ai.getElements(Gn),Ot=!0,W.command(Gn,"invalid elements",Ze.commandStr));var ii=Hc(function(M,D){if(Gn){var P=M.link(Gn);return M.ELEMENTS=P,P}return M.ELEMENTS=null,null});return ii.value=Gn,ii}else if(xt in it){Ot=!0;var b=it[xt];return Nh(b,function(M,D){var P=M.shared,V=P.isBufferArgs,q=P.elements,be=M.invoke(D,b),$e=D.def("null"),_t=D.def(V,"(",be,")"),Gt=M.cond(_t).then($e,"=",q,".createStream(",be,");").else($e,"=",q,".getElements(",be,");");return W.optional(function(){M.assert(Gt.else,"!"+be+"||"+$e,"invalid elements")}),D.entry(Gt),D.exit(M.cond(_t).then(q,".destroyStream(",$e,");")),M.ELEMENTS=$e,$e})}else if(It)return new Zu(qt.thisDep,qt.contextDep,qt.propDep,function(M,D){return D.def(M.shared.vao+".currentVAO?"+M.shared.elements+".getElements("+M.shared.vao+".currentVAO.elements):null")});return null}var Xt=rr();function gr(){if(mt in Fe){var Gn=Fe[mt];return gt.primitive=Gn,W.commandParameter(Gn,Mi,"invalid primitve",Ze.commandStr),Hc(function(ii,b){return Mi[Gn]})}else if(mt in it){var ti=it[mt];return Nh(ti,function(ii,b){var M=ii.constants.primTypes,D=ii.invoke(b,ti);return W.optional(function(){ii.assert(b,D+" in "+M,"invalid primitive, must be one of "+Object.keys(Mi))}),b.def(M,"[",D,"]")})}else{if(Ot)return Sd(Xt)?Xt.value?Hc(function(ii,b){return b.def(ii.ELEMENTS,".primType")}):Hc(function(){return ss}):new Zu(Xt.thisDep,Xt.contextDep,Xt.propDep,function(ii,b){var M=ii.ELEMENTS;return b.def(M,"?",M,".primType:",ss)});if(It)return new Zu(qt.thisDep,qt.contextDep,qt.propDep,function(ii,b){return b.def(ii.shared.vao+".currentVAO?"+ii.shared.vao+".currentVAO.primitive:"+ss)})}return null}function Sr(Gn,ti){if(Gn in Fe){var ii=Fe[Gn]|0;return ti?gt.offset=ii:gt.instances=ii,W.command(!ti||ii>=0,"invalid "+Gn,Ze.commandStr),Hc(function(M,D){return ti&&(M.OFFSET=ii),ii})}else if(Gn in it){var b=it[Gn];return Nh(b,function(M,D){var P=M.invoke(D,b);return ti&&(M.OFFSET=P,W.optional(function(){M.assert(D,P+">=0","invalid "+Gn)})),P})}else if(ti){if(Ot)return Hc(function(M,D){return M.OFFSET=0,0});if(It)return new Zu(qt.thisDep,qt.contextDep,qt.propDep,function(M,D){return D.def(M.shared.vao+".currentVAO?"+M.shared.vao+".currentVAO.offset:0")})}else if(It)return new Zu(qt.thisDep,qt.contextDep,qt.propDep,function(M,D){return D.def(M.shared.vao+".currentVAO?"+M.shared.vao+".currentVAO.instances:-1")});return null}var Wr=Sr(or,!0);function Cn(){if(Ht in Fe){var Gn=Fe[Ht]|0;return gt.count=Gn,W.command(typeof Gn=="number"&&Gn>=0,"invalid vertex count",Ze.commandStr),Hc(function(){return Gn})}else if(Ht in it){var ti=it[Ht];return Nh(ti,function(D,P){var V=D.invoke(P,ti);return W.optional(function(){D.assert(P,"typeof "+V+'==="number"&&'+V+">=0&&"+V+"===("+V+"|0)","invalid vertex count")}),V})}else if(Ot)if(Sd(Xt)){if(Xt)return Wr?new Zu(Wr.thisDep,Wr.contextDep,Wr.propDep,function(D,P){var V=P.def(D.ELEMENTS,".vertCount-",D.OFFSET);return W.optional(function(){D.assert(P,V+">=0","invalid vertex offset/element buffer too small")}),V}):Hc(function(D,P){return P.def(D.ELEMENTS,".vertCount")});var ii=Hc(function(){return-1});return W.optional(function(){ii.MISSING=!0}),ii}else{var b=new Zu(Xt.thisDep||Wr.thisDep,Xt.contextDep||Wr.contextDep,Xt.propDep||Wr.propDep,function(D,P){var V=D.ELEMENTS;return D.OFFSET?P.def(V,"?",V,".vertCount-",D.OFFSET,":-1"):P.def(V,"?",V,".vertCount:-1")});return W.optional(function(){b.DYNAMIC=!0}),b}else if(It){var M=new Zu(qt.thisDep,qt.contextDep,qt.propDep,function(D,P){return P.def(D.shared.vao,".currentVAO?",D.shared.vao,".currentVAO.count:-1")});return M}return null}var xn=gr(),In=Cn(),Rn=Sr(en,!1);return{elements:Xt,primitive:xn,count:In,instances:Rn,offset:Wr,vao:qt,vaoActive:It,elementsActive:Ot,static:gt}}function Bl(Ie,Ze){var Fe=Ie.static,it=Ie.dynamic,gt={};return xs.forEach(function(It){var Tt=Zo(It);function qt(Ot,rr){if(It in Fe){var Xt=Ot(Fe[It]);gt[Tt]=Hc(function(){return Xt})}else if(It in it){var gr=it[It];gt[Tt]=Nh(gr,function(Sr,Wr){return rr(Sr,Wr,Sr.invoke(Wr,gr))})}}switch(It){case Of:case Tc:case qu:case Du:case $l:case Nf:case Jc:case ic:case wh:case qh:return qt(function(Ot){return W.commandType(Ot,"boolean",It,Ze.commandStr),Ot},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,"typeof "+Xt+'==="boolean"',"invalid flag "+It,Ot.commandStr)}),Xt});case Uc:return qt(function(Ot){return W.commandParameter(Ot,jc,"invalid "+It,Ze.commandStr),jc[Ot]},function(Ot,rr,Xt){var gr=Ot.constants.compareFuncs;return W.optional(function(){Ot.assert(rr,Xt+" in "+gr,"invalid "+It+", must be one of "+Object.keys(jc))}),rr.def(gr,"[",Xt,"]")});case Jh:return qt(function(Ot){return W.command(Xs(Ot)&&Ot.length===2&&typeof Ot[0]=="number"&&typeof Ot[1]=="number"&&Ot[0]<=Ot[1],"depth range is 2d array",Ze.commandStr),Ot},function(Ot,rr,Xt){W.optional(function(){Ot.assert(rr,Ot.shared.isArrayLike+"("+Xt+")&&"+Xt+".length===2&&typeof "+Xt+'[0]==="number"&&typeof '+Xt+'[1]==="number"&&'+Xt+"[0]<="+Xt+"[1]","depth range must be a 2d array")});var gr=rr.def("+",Xt,"[0]"),Sr=rr.def("+",Xt,"[1]");return[gr,Sr]});case Ef:return qt(function(Ot){W.commandType(Ot,"object","blend.func",Ze.commandStr);var rr="srcRGB"in Ot?Ot.srcRGB:Ot.src,Xt="srcAlpha"in Ot?Ot.srcAlpha:Ot.src,gr="dstRGB"in Ot?Ot.dstRGB:Ot.dst,Sr="dstAlpha"in Ot?Ot.dstAlpha:Ot.dst;return W.commandParameter(rr,Wl,Tt+".srcRGB",Ze.commandStr),W.commandParameter(Xt,Wl,Tt+".srcAlpha",Ze.commandStr),W.commandParameter(gr,Wl,Tt+".dstRGB",Ze.commandStr),W.commandParameter(Sr,Wl,Tt+".dstAlpha",Ze.commandStr),W.command(Pc.indexOf(rr+", "+gr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+rr+", "+gr+")",Ze.commandStr),[Wl[rr],Wl[gr],Wl[Xt],Wl[Sr]]},function(Ot,rr,Xt){var gr=Ot.constants.blendFuncs;W.optional(function(){Ot.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid blend func, must be an object")});function Sr(ti,ii){var b=rr.def('"',ti,ii,'" in ',Xt,"?",Xt,".",ti,ii,":",Xt,".",ti);return W.optional(function(){Ot.assert(rr,b+" in "+gr,"invalid "+It+"."+ti+ii+", must be one of "+Object.keys(Wl))}),b}var Wr=Sr("src","RGB"),Cn=Sr("dst","RGB");W.optional(function(){var ti=Ot.constants.invalidBlendCombinations;Ot.assert(rr,ti+".indexOf("+Wr+'+", "+'+Cn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var xn=rr.def(gr,"[",Wr,"]"),In=rr.def(gr,"[",Sr("src","Alpha"),"]"),Rn=rr.def(gr,"[",Cn,"]"),Gn=rr.def(gr,"[",Sr("dst","Alpha"),"]");return[xn,Rn,In,Gn]});case Pf:return qt(function(Ot){if(typeof Ot=="string")return W.commandParameter(Ot,Ni,"invalid "+It,Ze.commandStr),[Ni[Ot],Ni[Ot]];if(typeof Ot=="object")return W.commandParameter(Ot.rgb,Ni,It+".rgb",Ze.commandStr),W.commandParameter(Ot.alpha,Ni,It+".alpha",Ze.commandStr),[Ni[Ot.rgb],Ni[Ot.alpha]];W.commandRaise("invalid blend.equation",Ze.commandStr)},function(Ot,rr,Xt){var gr=Ot.constants.blendEquations,Sr=rr.def(),Wr=rr.def(),Cn=Ot.cond("typeof ",Xt,'==="string"');return W.optional(function(){function xn(In,Rn,Gn){Ot.assert(In,Gn+" in "+gr,"invalid "+Rn+", must be one of "+Object.keys(Ni))}xn(Cn.then,It,Xt),Ot.assert(Cn.else,Xt+"&&typeof "+Xt+'==="object"',"invalid "+It),xn(Cn.else,It+".rgb",Xt+".rgb"),xn(Cn.else,It+".alpha",Xt+".alpha")}),Cn.then(Sr,"=",Wr,"=",gr,"[",Xt,"];"),Cn.else(Sr,"=",gr,"[",Xt,".rgb];",Wr,"=",gr,"[",Xt,".alpha];"),rr(Cn),[Sr,Wr]});case ec:return qt(function(Ot){return W.command(Xs(Ot)&&Ot.length===4,"blend.color must be a 4d array",Ze.commandStr),Ar(4,function(rr){return+Ot[rr]})},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,Ot.shared.isArrayLike+"("+Xt+")&&"+Xt+".length===4","blend.color must be a 4d array")}),Ar(4,function(gr){return rr.def("+",Xt,"[",gr,"]")})});case yu:return qt(function(Ot){return W.commandType(Ot,"number",Tt,Ze.commandStr),Ot|0},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,"typeof "+Xt+'==="number"',"invalid stencil.mask")}),rr.def(Xt,"|0")});case qc:return qt(function(Ot){W.commandType(Ot,"object",Tt,Ze.commandStr);var rr=Ot.cmp||"keep",Xt=Ot.ref||0,gr="mask"in Ot?Ot.mask:-1;return W.commandParameter(rr,jc,It+".cmp",Ze.commandStr),W.commandType(Xt,"number",It+".ref",Ze.commandStr),W.commandType(gr,"number",It+".mask",Ze.commandStr),[jc[rr],Xt,gr]},function(Ot,rr,Xt){var gr=Ot.constants.compareFuncs;W.optional(function(){function xn(){Ot.assert(rr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}xn(Xt+"&&typeof ",Xt,'==="object"'),xn('!("cmp" in ',Xt,")||(",Xt,".cmp in ",gr,")")});var Sr=rr.def('"cmp" in ',Xt,"?",gr,"[",Xt,".cmp]",":",cu),Wr=rr.def(Xt,".ref|0"),Cn=rr.def('"mask" in ',Xt,"?",Xt,".mask|0:-1");return[Sr,Wr,Cn]});case sh:case vh:return qt(function(Ot){W.commandType(Ot,"object",Tt,Ze.commandStr);var rr=Ot.fail||"keep",Xt=Ot.zfail||"keep",gr=Ot.zpass||"keep";return W.commandParameter(rr,hu,It+".fail",Ze.commandStr),W.commandParameter(Xt,hu,It+".zfail",Ze.commandStr),W.commandParameter(gr,hu,It+".zpass",Ze.commandStr),[It===vh?Ro:To,hu[rr],hu[Xt],hu[gr]]},function(Ot,rr,Xt){var gr=Ot.constants.stencilOps;W.optional(function(){Ot.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid "+It)});function Sr(Wr){return W.optional(function(){Ot.assert(rr,'!("'+Wr+'" in '+Xt+")||("+Xt+"."+Wr+" in "+gr+")","invalid "+It+"."+Wr+", must be one of "+Object.keys(hu))}),rr.def('"',Wr,'" in ',Xt,"?",gr,"[",Xt,".",Wr,"]:",cu)}return[It===vh?Ro:To,Sr("fail"),Sr("zfail"),Sr("zpass")]});case nc:return qt(function(Ot){W.commandType(Ot,"object",Tt,Ze.commandStr);var rr=Ot.factor|0,Xt=Ot.units|0;return W.commandType(rr,"number",Tt+".factor",Ze.commandStr),W.commandType(Xt,"number",Tt+".units",Ze.commandStr),[rr,Xt]},function(Ot,rr,Xt){W.optional(function(){Ot.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid "+It)});var gr=rr.def(Xt,".factor|0"),Sr=rr.def(Xt,".units|0");return[gr,Sr]});case Ch:return qt(function(Ot){var rr=0;return Ot==="front"?rr=To:Ot==="back"&&(rr=Ro),W.command(!!rr,Tt,Ze.commandStr),rr},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,Xt+'==="front"||'+Xt+'==="back"',"invalid cull.face")}),rr.def(Xt,'==="front"?',To,":",Ro)});case oh:return qt(function(Ot){return W.command(typeof Ot=="number"&&Ot>=Ci.lineWidthDims[0]&&Ot<=Ci.lineWidthDims[1],"invalid line width, must be a positive number between "+Ci.lineWidthDims[0]+" and "+Ci.lineWidthDims[1],Ze.commandStr),Ot},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,"typeof "+Xt+'==="number"&&'+Xt+">="+Ci.lineWidthDims[0]+"&&"+Xt+"<="+Ci.lineWidthDims[1],"invalid line width")}),Xt});case pf:return qt(function(Ot){return W.commandParameter(Ot,Oc,Tt,Ze.commandStr),Oc[Ot]},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,Xt+'==="cw"||'+Xt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),rr.def(Xt+'==="cw"?'+fs+":"+ps)});case Sh:return qt(function(Ot){return W.command(Xs(Ot)&&Ot.length===4,"color.mask must be length 4 array",Ze.commandStr),Ot.map(function(rr){return!!rr})},function(Ot,rr,Xt){return W.optional(function(){Ot.assert(rr,Ot.shared.isArrayLike+"("+Xt+")&&"+Xt+".length===4","invalid color.mask")}),Ar(4,function(gr){return"!!"+Xt+"["+gr+"]"})});case Fh:return qt(function(Ot){W.command(typeof Ot=="object"&&Ot,Tt,Ze.commandStr);var rr="value"in Ot?Ot.value:1,Xt=!!Ot.invert;return W.command(typeof rr=="number"&&rr>=0&&rr<=1,"sample.coverage.value must be a number between 0 and 1",Ze.commandStr),[rr,Xt]},function(Ot,rr,Xt){W.optional(function(){Ot.assert(rr,Xt+"&&typeof "+Xt+'==="object"',"invalid sample.coverage")});var gr=rr.def('"value" in ',Xt,"?+",Xt,".value:1"),Sr=rr.def("!!",Xt,".invert");return[gr,Sr]})}}),gt}function Au(Ie,Ze){var Fe=Ie.static,it=Ie.dynamic,gt={};return Object.keys(Fe).forEach(function(It){var Tt=Fe[It],qt;if(typeof Tt=="number"||typeof Tt=="boolean")qt=Hc(function(){return Tt});else if(typeof Tt=="function"){var Ot=Tt._reglType;Ot==="texture2d"||Ot==="textureCube"?qt=Hc(function(rr){return rr.link(Tt)}):Ot==="framebuffer"||Ot==="framebufferCube"?(W.command(Tt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+It+'"',Ze.commandStr),qt=Hc(function(rr){return rr.link(Tt.color[0])})):W.commandRaise('invalid data for uniform "'+It+'"',Ze.commandStr)}else Xs(Tt)?qt=Hc(function(rr){var Xt=rr.global.def("[",Ar(Tt.length,function(gr){return W.command(typeof Tt[gr]=="number"||typeof Tt[gr]=="boolean","invalid uniform "+It,rr.commandStr),Tt[gr]}),"]");return Xt}):W.commandRaise('invalid or missing data for uniform "'+It+'"',Ze.commandStr);qt.value=Tt,gt[It]=qt}),Object.keys(it).forEach(function(It){var Tt=it[It];gt[It]=Nh(Tt,function(qt,Ot){return qt.invoke(Ot,Tt)})}),gt}function Sf(Ie,Ze){var Fe=Ie.static,it=Ie.dynamic,gt={};return Object.keys(Fe).forEach(function(It){var Tt=Fe[It],qt=Vr.id(It),Ot=new ui;if(ud(Tt))Ot.state=Jo,Ot.buffer=aa.getBuffer(aa.create(Tt,Iu,!1,!0)),Ot.type=0;else{var rr=aa.getBuffer(Tt);if(rr)Ot.state=Jo,Ot.buffer=rr,Ot.type=0;else if(W.command(typeof Tt=="object"&&Tt,"invalid data for attribute "+It,Ze.commandStr),"constant"in Tt){var Xt=Tt.constant;Ot.buffer="null",Ot.state=$s,typeof Xt=="number"?Ot.x=Xt:(W.command(Xs(Xt)&&Xt.length>0&&Xt.length<=4,"invalid constant for attribute "+It,Ze.commandStr),Ns.forEach(function(Rn,Gn){Gn<Xt.length&&(Ot[Rn]=Xt[Gn])}))}else{ud(Tt.buffer)?rr=aa.getBuffer(aa.create(Tt.buffer,Iu,!1,!0)):rr=aa.getBuffer(Tt.buffer),W.command(!!rr,'missing buffer for attribute "'+It+'"',Ze.commandStr);var gr=Tt.offset|0;W.command(gr>=0,'invalid offset for attribute "'+It+'"',Ze.commandStr);var Sr=Tt.stride|0;W.command(Sr>=0&&Sr<256,'invalid stride for attribute "'+It+'", must be integer betweeen [0, 255]',Ze.commandStr);var Wr=Tt.size|0;W.command(!("size"in Tt)||Wr>0&&Wr<=4,'invalid size for attribute "'+It+'", must be 1,2,3,4',Ze.commandStr);var Cn=!!Tt.normalized,xn=0;"type"in Tt&&(W.commandParameter(Tt.type,Si,"invalid type for attribute "+It,Ze.commandStr),xn=Si[Tt.type]);var In=Tt.divisor|0;W.optional(function(){"divisor"in Tt&&(W.command(In===0||La,'cannot specify divisor for attribute "'+It+'", instancing not supported',Ze.commandStr),W.command(In>=0,'invalid divisor for attribute "'+It+'"',Ze.commandStr));var Rn=Ze.commandStr,Gn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Tt).forEach(function(ti){W.command(Gn.indexOf(ti)>=0,'unknown parameter "'+ti+'" for attribute pointer "'+It+'" (valid parameters are '+Gn+")",Rn)})}),Ot.buffer=rr,Ot.state=Jo,Ot.size=Wr,Ot.normalized=Cn,Ot.type=xn||rr.dtype,Ot.offset=gr,Ot.stride=Sr,Ot.divisor=In}}gt[It]=Hc(function(Rn,Gn){var ti=Rn.attribCache;if(qt in ti)return ti[qt];var ii={isStream:!1};return Object.keys(Ot).forEach(function(b){ii[b]=Ot[b]}),Ot.buffer&&(ii.buffer=Rn.link(Ot.buffer),ii.type=ii.type||ii.buffer+".dtype"),ti[qt]=ii,ii})}),Object.keys(it).forEach(function(It){var Tt=it[It];function qt(Ot,rr){var Xt=Ot.invoke(rr,Tt),gr=Ot.shared,Sr=Ot.constants,Wr=gr.isBufferArgs,Cn=gr.buffer;W.optional(function(){Ot.assert(rr,Xt+"&&(typeof "+Xt+'==="object"||typeof '+Xt+'==="function")&&('+Wr+"("+Xt+")||"+Cn+".getBuffer("+Xt+")||"+Cn+".getBuffer("+Xt+".buffer)||"+Wr+"("+Xt+'.buffer)||("constant" in '+Xt+"&&(typeof "+Xt+'.constant==="number"||'+gr.isArrayLike+"("+Xt+".constant))))",'invalid dynamic attribute "'+It+'"')});var xn={isStream:rr.def(!1)},In=new ui;In.state=Jo,Object.keys(In).forEach(function(ii){xn[ii]=rr.def(""+In[ii])});var Rn=xn.buffer,Gn=xn.type;rr("if(",Wr,"(",Xt,")){",xn.isStream,"=true;",Rn,"=",Cn,".createStream(",Iu,",",Xt,");",Gn,"=",Rn,".dtype;","}else{",Rn,"=",Cn,".getBuffer(",Xt,");","if(",Rn,"){",Gn,"=",Rn,".dtype;",'}else if("constant" in ',Xt,"){",xn.state,"=",$s,";","if(typeof "+Xt+'.constant === "number"){',xn[Ns[0]],"=",Xt,".constant;",Ns.slice(1).map(function(ii){return xn[ii]}).join("="),"=0;","}else{",Ns.map(function(ii,b){return xn[ii]+"="+Xt+".constant.length>"+b+"?"+Xt+".constant["+b+"]:0;"}).join(""),"}}else{","if(",Wr,"(",Xt,".buffer)){",Rn,"=",Cn,".createStream(",Iu,",",Xt,".buffer);","}else{",Rn,"=",Cn,".getBuffer(",Xt,".buffer);","}",Gn,'="type" in ',Xt,"?",Sr.glTypes,"[",Xt,".type]:",Rn,".dtype;",xn.normalized,"=!!",Xt,".normalized;");function ti(ii){rr(xn[ii],"=",Xt,".",ii,"|0;")}return ti("size"),ti("offset"),ti("stride"),ti("divisor"),rr("}}"),rr.exit("if(",xn.isStream,"){",Cn,".destroyStream(",Rn,");","}"),xn}gt[It]=Nh(Tt,qt)}),gt}function Xl(Ie){var Ze=Ie.static,Fe=Ie.dynamic,it={};return Object.keys(Ze).forEach(function(gt){var It=Ze[gt];it[gt]=Hc(function(Tt,qt){return typeof It=="number"||typeof It=="boolean"?""+It:Tt.link(It)})}),Object.keys(Fe).forEach(function(gt){var It=Fe[gt];it[gt]=Nh(It,function(Tt,qt){return Tt.invoke(qt,It)})}),it}function Ic(Ie,Ze,Fe,it,gt){var It=Ie.static,Tt=Ie.dynamic;W.optional(function(){var ti=[vf,oe,Br,xt,mt,or,Ht,en,Rf,_n].concat(xs);function ii(b){Object.keys(b).forEach(function(M){W.command(ti.indexOf(M)>=0,'unknown parameter "'+M+'"',gt.commandStr)})}ii(It),ii(Tt)});var qt=zs(Ie,Ze),Ot=yo(Ie,gt),rr=hs(Ie,Ot,gt),Xt=Gu(Ie,gt),gr=Bl(Ie,gt),Sr=wu(Ie,gt,qt);function Wr(ti){var ii=rr[ti];ii&&(gr[ti]=ii)}Wr(If),Wr(Zo(mh));var Cn=Object.keys(gr).length>0,xn={framebuffer:Ot,draw:Xt,shader:Sr,state:gr,dirty:Cn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(xn.profile=so(Ie,gt),xn.uniforms=Au(Fe,gt),xn.drawVAO=xn.scopeVAO=Xt.vao,!xn.drawVAO&&Sr.program&&!qt&&Ln.angle_instanced_arrays&&Xt.static.elements){var In=!0,Rn=Sr.program.attributes.map(function(ti){var ii=Ze.static[ti];return In=In&&!!ii,ii});if(In&&Rn.length>0){var Gn=Ra.getVAO(Ra.createVAO({attributes:Rn,elements:Xt.static.elements}));xn.drawVAO=new Zu(null,null,null,function(ti,ii){return ti.link(Gn)}),xn.useVAO=!0}}return qt?xn.useVAO=!0:xn.attributes=Sf(Ze,gt),xn.context=Xl(it,gt),xn}function Cl(Ie,Ze,Fe){var it=Ie.shared,gt=it.context,It=Ie.scope();Object.keys(Fe).forEach(function(Tt){Ze.save(gt,"."+Tt);var qt=Fe[Tt],Ot=qt.append(Ie,Ze);Array.isArray(Ot)?It(gt,".",Tt,"=[",Ot.join(),"];"):It(gt,".",Tt,"=",Ot,";")}),Ze(It)}function rf(Ie,Ze,Fe,it){var gt=Ie.shared,It=gt.gl,Tt=gt.framebuffer,qt;Ya&&(qt=Ze.def(gt.extensions,".webgl_draw_buffers"));var Ot=Ie.constants,rr=Ot.drawBuffer,Xt=Ot.backBuffer,gr;Fe?gr=Fe.append(Ie,Ze):gr=Ze.def(Tt,".next"),it||Ze("if(",gr,"!==",Tt,".cur){"),Ze("if(",gr,"){",It,".bindFramebuffer(",Cu,",",gr,".framebuffer);"),Ya&&Ze(qt,".drawBuffersWEBGL(",rr,"[",gr,".colorAttachments.length]);"),Ze("}else{",It,".bindFramebuffer(",Cu,",null);"),Ya&&Ze(qt,".drawBuffersWEBGL(",Xt,");"),Ze("}",Tt,".cur=",gr,";"),it||Ze("}")}function mf(Ie,Ze,Fe){var it=Ie.shared,gt=it.gl,It=Ie.current,Tt=Ie.next,qt=it.current,Ot=it.next,rr=Ie.cond(qt,".dirty");xs.forEach(function(Xt){var gr=Zo(Xt);if(!(gr in Fe.state)){var Sr,Wr;if(gr in Tt){Sr=Tt[gr],Wr=It[gr];var Cn=Ar(Ga[gr].length,function(In){return rr.def(Sr,"[",In,"]")});rr(Ie.cond(Cn.map(function(In,Rn){return In+"!=="+Wr+"["+Rn+"]"}).join("||")).then(gt,".",sa[gr],"(",Cn,");",Cn.map(function(In,Rn){return Wr+"["+Rn+"]="+In}).join(";"),";"))}else{Sr=rr.def(Ot,".",gr);var xn=Ie.cond(Sr,"!==",qt,".",gr);rr(xn),gr in ea?xn(Ie.cond(Sr).then(gt,".enable(",ea[gr],");").else(gt,".disable(",ea[gr],");"),qt,".",gr,"=",Sr,";"):xn(gt,".",sa[gr],"(",Sr,");",qt,".",gr,"=",Sr,";")}}}),Object.keys(Fe.state).length===0&&rr(qt,".dirty=false;"),Ze(rr)}function lh(Ie,Ze,Fe,it){var gt=Ie.shared,It=Ie.current,Tt=gt.current,qt=gt.gl;Hd(Object.keys(Fe)).forEach(function(Ot){var rr=Fe[Ot];if(!(it&&!it(rr))){var Xt=rr.append(Ie,Ze);if(ea[Ot]){var gr=ea[Ot];Sd(rr)?Xt?Ze(qt,".enable(",gr,");"):Ze(qt,".disable(",gr,");"):Ze(Ie.cond(Xt).then(qt,".enable(",gr,");").else(qt,".disable(",gr,");")),Ze(Tt,".",Ot,"=",Xt,";")}else if(Xs(Xt)){var Sr=It[Ot];Ze(qt,".",sa[Ot],"(",Xt,");",Xt.map(function(Wr,Cn){return Sr+"["+Cn+"]="+Wr}).join(";"),";")}else Ze(qt,".",sa[Ot],"(",Xt,");",Tt,".",Ot,"=",Xt,";")}})}function pc(Ie,Ze){La&&(Ie.instancing=Ze.def(Ie.shared.extensions,".angle_instanced_arrays"))}function fu(Ie,Ze,Fe,it,gt){var It=Ie.shared,Tt=Ie.stats,qt=It.current,Ot=It.timer,rr=Fe.profile;function Xt(){var ti=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return ti||typeof performance=="undefined"?"Date.now()":"performance.now()"}var gr,Sr;function Wr(ti){gr=Ze.def(),ti(gr,"=",Xt(),";"),typeof gt=="string"?ti(Tt,".count+=",gt,";"):ti(Tt,".count++;"),ya&&(it?(Sr=Ze.def(),ti(Sr,"=",Ot,".getNumPendingQueries();")):ti(Ot,".beginQuery(",Tt,");"))}function Cn(ti){ti(Tt,".cpuTime+=",Xt(),"-",gr,";"),ya&&(it?ti(Ot,".pushScopeStats(",Sr,",",Ot,".getNumPendingQueries(),",Tt,");"):ti(Ot,".endQuery();"))}function xn(ti){var ii=Ze.def(qt,".profile");Ze(qt,".profile=",ti,";"),Ze.exit(qt,".profile=",ii,";")}var In;if(rr){if(Sd(rr)){rr.enable?(Wr(Ze),Cn(Ze.exit),xn("true")):xn("false");return}In=rr.append(Ie,Ze),xn(In)}else In=Ze.def(qt,".profile");var Rn=Ie.block();Wr(Rn),Ze("if(",In,"){",Rn,"}");var Gn=Ie.block();Cn(Gn),Ze.exit("if(",In,"){",Gn,"}")}function Cf(Ie,Ze,Fe,it,gt){var It=Ie.shared;function Tt(Ot){switch(Ot){case gh:case ne:case pt:return 2;case yh:case Me:case Pt:return 3;case Yf:case Oe:case Xr:return 4;default:return 1}}function qt(Ot,rr,Xt){var gr=It.gl,Sr=Ze.def(Ot,".location"),Wr=Ze.def(It.attributes,"[",Sr,"]"),Cn=Xt.state,xn=Xt.buffer,In=[Xt.x,Xt.y,Xt.z,Xt.w],Rn=["buffer","normalized","offset","stride"];function Gn(){Ze("if(!",Wr,".buffer){",gr,".enableVertexAttribArray(",Sr,");}");var ii=Xt.type,b;if(Xt.size?b=Ze.def(Xt.size,"||",rr):b=rr,Ze("if(",Wr,".type!==",ii,"||",Wr,".size!==",b,"||",Rn.map(function(D){return Wr+"."+D+"!=="+Xt[D]}).join("||"),"){",gr,".bindBuffer(",Iu,",",xn,".buffer);",gr,".vertexAttribPointer(",[Sr,b,ii,Xt.normalized,Xt.stride,Xt.offset],");",Wr,".type=",ii,";",Wr,".size=",b,";",Rn.map(function(D){return Wr+"."+D+"="+Xt[D]+";"}).join(""),"}"),La){var M=Xt.divisor;Ze("if(",Wr,".divisor!==",M,"){",Ie.instancing,".vertexAttribDivisorANGLE(",[Sr,M],");",Wr,".divisor=",M,";}")}}function ti(){Ze("if(",Wr,".buffer){",gr,".disableVertexAttribArray(",Sr,");",Wr,".buffer=null;","}if(",Ns.map(function(ii,b){return Wr+"."+ii+"!=="+In[b]}).join("||"),"){",gr,".vertexAttrib4f(",Sr,",",In,");",Ns.map(function(ii,b){return Wr+"."+ii+"="+In[b]+";"}).join(""),"}")}Cn===Jo?Gn():Cn===$s?ti():(Ze("if(",Cn,"===",Jo,"){"),Gn(),Ze("}else{"),ti(),Ze("}"))}it.forEach(function(Ot){var rr=Ot.name,Xt=Fe.attributes[rr],gr;if(Xt){if(!gt(Xt))return;gr=Xt.append(Ie,Ze)}else{if(!gt(up))return;var Sr=Ie.scopeAttrib(rr);W.optional(function(){Ie.assert(Ze,Sr+".state","missing attribute "+rr)}),gr={},Object.keys(new ui).forEach(function(Wr){gr[Wr]=Ze.def(Sr,".",Wr)})}qt(Ie.link(Ot),Tt(Ot.info.type),gr)})}function Uu(Ie,Ze,Fe,it,gt,It){for(var Tt=Ie.shared,qt=Tt.gl,Ot,rr=0;rr<it.length;++rr){var Xt=it[rr],gr=Xt.name,Sr=Xt.info.type,Wr=Fe.uniforms[gr],Cn=Ie.link(Xt),xn=Cn+".location",In;if(Wr){if(!gt(Wr))continue;if(Sd(Wr)){var Rn=Wr.value;if(W.command(Rn!==null&&typeof Rn!="undefined",'missing uniform "'+gr+'"',Ie.commandStr),Sr===bi||Sr===ga){W.command(typeof Rn=="function"&&(Sr===bi&&(Rn._reglType==="texture2d"||Rn._reglType==="framebuffer")||Sr===ga&&(Rn._reglType==="textureCube"||Rn._reglType==="framebufferCube")),"invalid texture for uniform "+gr,Ie.commandStr);var Gn=Ie.link(Rn._texture||Rn.color[0]._texture);Ze(qt,".uniform1i(",xn,",",Gn+".bind());"),Ze.exit(Gn,".unbind();")}else if(Sr===An||Sr===mi||Sr===un){W.optional(function(){W.command(Xs(Rn),"invalid matrix for uniform "+gr,Ie.commandStr),W.command(Sr===An&&Rn.length===4||Sr===mi&&Rn.length===9||Sr===un&&Rn.length===16,"invalid length for matrix uniform "+gr,Ie.commandStr)});var ti=Ie.global.def("new Float32Array(["+Array.prototype.slice.call(Rn)+"])"),ii=2;Sr===mi?ii=3:Sr===un&&(ii=4),Ze(qt,".uniformMatrix",ii,"fv(",xn,",false,",ti,");")}else{switch(Sr){case Kf:W.commandType(Rn,"number","uniform "+gr,Ie.commandStr),Ot="1f";break;case gh:W.command(Xs(Rn)&&Rn.length===2,"uniform "+gr,Ie.commandStr),Ot="2f";break;case yh:W.command(Xs(Rn)&&Rn.length===3,"uniform "+gr,Ie.commandStr),Ot="3f";break;case Yf:W.command(Xs(Rn)&&Rn.length===4,"uniform "+gr,Ie.commandStr),Ot="4f";break;case Ke:W.commandType(Rn,"boolean","uniform "+gr,Ie.commandStr),Ot="1i";break;case dc:W.commandType(Rn,"number","uniform "+gr,Ie.commandStr),Ot="1i";break;case pt:W.command(Xs(Rn)&&Rn.length===2,"uniform "+gr,Ie.commandStr),Ot="2i";break;case ne:W.command(Xs(Rn)&&Rn.length===2,"uniform "+gr,Ie.commandStr),Ot="2i";break;case Pt:W.command(Xs(Rn)&&Rn.length===3,"uniform "+gr,Ie.commandStr),Ot="3i";break;case Me:W.command(Xs(Rn)&&Rn.length===3,"uniform "+gr,Ie.commandStr),Ot="3i";break;case Xr:W.command(Xs(Rn)&&Rn.length===4,"uniform "+gr,Ie.commandStr),Ot="4i";break;case Oe:W.command(Xs(Rn)&&Rn.length===4,"uniform "+gr,Ie.commandStr),Ot="4i";break}Ze(qt,".uniform",Ot,"(",xn,",",Xs(Rn)?Array.prototype.slice.call(Rn):Rn,");")}continue}else In=Wr.append(Ie,Ze)}else{if(!gt(up))continue;In=Ze.def(Tt.uniforms,"[",Vr.id(gr),"]")}Sr===bi?(W(!Array.isArray(In),"must specify a scalar prop for textures"),Ze("if(",In,"&&",In,'._reglType==="framebuffer"){',In,"=",In,".color[0];","}")):Sr===ga&&(W(!Array.isArray(In),"must specify a scalar prop for cube maps"),Ze("if(",In,"&&",In,'._reglType==="framebufferCube"){',In,"=",In,".color[0];","}")),W.optional(function(){function _t(an,Un){Ie.assert(Ze,an,'bad data or missing for uniform "'+gr+'".  '+Un)}function Gt(an){W(!Array.isArray(In),"must not specify an array type for uniform"),_t("typeof "+In+'==="'+an+'"',"invalid type, expected "+an)}function yr(an,Un){Array.isArray(In)?W(In.length===an,"must have length "+an):_t(Tt.isArrayLike+"("+In+")&&"+In+".length==="+an,"invalid vector, should have length "+an,Ie.commandStr)}function $r(an){W(!Array.isArray(In),"must not specify a value type"),_t("typeof "+In+'==="function"&&'+In+'._reglType==="texture'+(an===Fl?"2d":"Cube")+'"',"invalid texture type",Ie.commandStr)}switch(Sr){case dc:Gt("number");break;case ne:yr(2,"number");break;case Me:yr(3,"number");break;case Oe:yr(4,"number");break;case Kf:Gt("number");break;case gh:yr(2,"number");break;case yh:yr(3,"number");break;case Yf:yr(4,"number");break;case Ke:Gt("boolean");break;case pt:yr(2,"boolean");break;case Pt:yr(3,"boolean");break;case Xr:yr(4,"boolean");break;case An:yr(4,"number");break;case mi:yr(9,"number");break;case un:yr(16,"number");break;case bi:$r(Fl);break;case ga:$r(Ys);break}});var b=1;switch(Sr){case bi:case ga:var M=Ze.def(In,"._texture");Ze(qt,".uniform1i(",xn,",",M,".bind());"),Ze.exit(M,".unbind();");continue;case dc:case Ke:Ot="1i";break;case ne:case pt:Ot="2i",b=2;break;case Me:case Pt:Ot="3i",b=3;break;case Oe:case Xr:Ot="4i",b=4;break;case Kf:Ot="1f";break;case gh:Ot="2f",b=2;break;case yh:Ot="3f",b=3;break;case Yf:Ot="4f",b=4;break;case An:Ot="Matrix2fv";break;case mi:Ot="Matrix3fv";break;case un:Ot="Matrix4fv";break}if(Ot.charAt(0)==="M"){Ze(qt,".uniform",Ot,"(",xn,",");var D=Math.pow(Sr-An+2,2),P=Ie.global.def("new Float32Array(",D,")");Array.isArray(In)?Ze("false,(",Ar(D,function(_t){return P+"["+_t+"]="+In[_t]}),",",P,")"):Ze("false,(Array.isArray(",In,")||",In," instanceof Float32Array)?",In,":(",Ar(D,function(_t){return P+"["+_t+"]="+In+"["+_t+"]"}),",",P,")"),Ze(");")}else if(b>1){for(var V=[],q=[],be=0;be<b;++be)Array.isArray(In)?q.push(In[be]):q.push(Ze.def(In+"["+be+"]")),It&&V.push(Ze.def());It&&Ze("if(!",Ie.batchId,"||",V.map(function(_t,Gt){return _t+"!=="+q[Gt]}).join("||"),"){",V.map(function(_t,Gt){return _t+"="+q[Gt]+";"}).join("")),Ze(qt,".uniform",Ot,"(",xn,",",q.join(","),");"),It&&Ze("}")}else{if(W(!Array.isArray(In),"uniform value must not be an array"),It){var $e=Ze.def();Ze("if(!",Ie.batchId,"||",$e,"!==",In,"){",$e,"=",In,";")}Ze(qt,".uniform",Ot,"(",xn,",",In,");"),It&&Ze("}")}}}function Qf(Ie,Ze,Fe,it){var gt=Ie.shared,It=gt.gl,Tt=gt.draw,qt=it.draw;function Ot(){var b=qt.elements,M,D=Ze;return b?((b.contextDep&&it.contextDynamic||b.propDep)&&(D=Fe),M=b.append(Ie,D),qt.elementsActive&&D("if("+M+")"+It+".bindBuffer("+_u+","+M+".buffer.buffer);")):(M=D.def(),D(M,"=",Tt,".",xt,";","if(",M,"){",It,".bindBuffer(",_u,",",M,".buffer.buffer);}","else if(",gt.vao,".currentVAO){",M,"=",Ie.shared.elements+".getElements("+gt.vao,".currentVAO.elements);",_a?"":"if("+M+")"+It+".bindBuffer("+_u+","+M+".buffer.buffer);","}")),M}function rr(){var b=qt.count,M,D=Ze;return b?((b.contextDep&&it.contextDynamic||b.propDep)&&(D=Fe),M=b.append(Ie,D),W.optional(function(){b.MISSING&&Ie.assert(Ze,"false","missing vertex count"),b.DYNAMIC&&Ie.assert(D,M+">=0","missing vertex count")})):(M=D.def(Tt,".",Ht),W.optional(function(){Ie.assert(D,M+">=0","missing vertex count")})),M}var Xt=Ot();function gr(b){var M=qt[b];return M?M.contextDep&&it.contextDynamic||M.propDep?M.append(Ie,Fe):M.append(Ie,Ze):Ze.def(Tt,".",b)}var Sr=gr(mt),Wr=gr(or),Cn=rr();if(typeof Cn=="number"){if(Cn===0)return}else Fe("if(",Cn,"){"),Fe.exit("}");var xn,In;La&&(xn=gr(en),In=Ie.instancing);var Rn=Xt+".type",Gn=qt.elements&&Sd(qt.elements)&&!qt.vaoActive;function ti(){function b(){Fe(In,".drawElementsInstancedANGLE(",[Sr,Cn,Rn,Wr+"<<(("+Rn+"-"+cs+")>>1)",xn],");")}function M(){Fe(In,".drawArraysInstancedANGLE(",[Sr,Wr,Cn,xn],");")}Xt&&Xt!=="null"?Gn?b():(Fe("if(",Xt,"){"),b(),Fe("}else{"),M(),Fe("}")):M()}function ii(){function b(){Fe(It+".drawElements("+[Sr,Cn,Rn,Wr+"<<(("+Rn+"-"+cs+")>>1)"]+");")}function M(){Fe(It+".drawArrays("+[Sr,Wr,Cn]+");")}Xt&&Xt!=="null"?Gn?b():(Fe("if(",Xt,"){"),b(),Fe("}else{"),M(),Fe("}")):M()}La&&(typeof xn!="number"||xn>=0)?typeof xn=="string"?(Fe("if(",xn,">0){"),ti(),Fe("}else if(",xn,"<0){"),ii(),Fe("}")):ti():ii()}function js(Ie,Ze,Fe,it,gt){var It=Bs(),Tt=It.proc("body",gt);return W.optional(function(){It.commandStr=Ze.commandStr,It.command=It.link(Ze.commandStr)}),La&&(It.instancing=Tt.def(It.shared.extensions,".angle_instanced_arrays")),Ie(It,Tt,Fe,it),It.compile().body}function Pu(Ie,Ze,Fe,it){pc(Ie,Ze),Fe.useVAO?Fe.drawVAO?Ze(Ie.shared.vao,".setVAO(",Fe.drawVAO.append(Ie,Ze),");"):Ze(Ie.shared.vao,".setVAO(",Ie.shared.vao,".targetVAO);"):(Ze(Ie.shared.vao,".setVAO(null);"),Cf(Ie,Ze,Fe,it.attributes,function(){return!0})),Uu(Ie,Ze,Fe,it.uniforms,function(){return!0},!1),Qf(Ie,Ze,Ze,Fe)}function Ru(Ie,Ze){var Fe=Ie.proc("draw",1);pc(Ie,Fe),Cl(Ie,Fe,Ze.context),rf(Ie,Fe,Ze.framebuffer),mf(Ie,Fe,Ze),lh(Ie,Fe,Ze.state),fu(Ie,Fe,Ze,!1,!0);var it=Ze.shader.progVar.append(Ie,Fe);if(Fe(Ie.shared.gl,".useProgram(",it,".program);"),Ze.shader.program)Pu(Ie,Fe,Ze,Ze.shader.program);else{Fe(Ie.shared.vao,".setVAO(null);");var gt=Ie.global.def("{}"),It=Fe.def(it,".id"),Tt=Fe.def(gt,"[",It,"]");Fe(Ie.cond(Tt).then(Tt,".call(this,a0);").else(Tt,"=",gt,"[",It,"]=",Ie.link(function(qt){return js(Pu,Ie,Ze,qt,1)}),"(",it,");",Tt,".call(this,a0);"))}Object.keys(Ze.state).length>0&&Fe(Ie.shared.current,".dirty=true;"),Ie.shared.vao&&Fe(Ie.shared.vao,".setVAO(null);")}function nf(Ie,Ze,Fe,it){Ie.batchId="a1",pc(Ie,Ze);function gt(){return!0}Cf(Ie,Ze,Fe,it.attributes,gt),Uu(Ie,Ze,Fe,it.uniforms,gt,!1),Qf(Ie,Ze,Ze,Fe)}function pd(Ie,Ze,Fe,it){pc(Ie,Ze);var gt=Fe.contextDep,It=Ze.def(),Tt="a0",qt="a1",Ot=Ze.def();Ie.shared.props=Ot,Ie.batchId=It;var rr=Ie.scope(),Xt=Ie.scope();Ze(rr.entry,"for(",It,"=0;",It,"<",qt,";++",It,"){",Ot,"=",Tt,"[",It,"];",Xt,"}",rr.exit);function gr(Rn){return Rn.contextDep&&gt||Rn.propDep}function Sr(Rn){return!gr(Rn)}if(Fe.needsContext&&Cl(Ie,Xt,Fe.context),Fe.needsFramebuffer&&rf(Ie,Xt,Fe.framebuffer),lh(Ie,Xt,Fe.state,gr),Fe.profile&&gr(Fe.profile)&&fu(Ie,Xt,Fe,!1,!0),it)Fe.useVAO?Fe.drawVAO?gr(Fe.drawVAO)?Xt(Ie.shared.vao,".setVAO(",Fe.drawVAO.append(Ie,Xt),");"):rr(Ie.shared.vao,".setVAO(",Fe.drawVAO.append(Ie,rr),");"):rr(Ie.shared.vao,".setVAO(",Ie.shared.vao,".targetVAO);"):(rr(Ie.shared.vao,".setVAO(null);"),Cf(Ie,rr,Fe,it.attributes,Sr),Cf(Ie,Xt,Fe,it.attributes,gr)),Uu(Ie,rr,Fe,it.uniforms,Sr,!1),Uu(Ie,Xt,Fe,it.uniforms,gr,!0),Qf(Ie,rr,Xt,Fe);else{var Wr=Ie.global.def("{}"),Cn=Fe.shader.progVar.append(Ie,Xt),xn=Xt.def(Cn,".id"),In=Xt.def(Wr,"[",xn,"]");Xt(Ie.shared.gl,".useProgram(",Cn,".program);","if(!",In,"){",In,"=",Wr,"[",xn,"]=",Ie.link(function(Rn){return js(nf,Ie,Fe,Rn,2)}),"(",Cn,");}",In,".call(this,a0[",It,"],",It,");")}}function w(Ie,Ze){var Fe=Ie.proc("batch",2);Ie.batchId="0",pc(Ie,Fe);var it=!1,gt=!0;Object.keys(Ze.context).forEach(function(Wr){it=it||Ze.context[Wr].propDep}),it||(Cl(Ie,Fe,Ze.context),gt=!1);var It=Ze.framebuffer,Tt=!1;It?(It.propDep?it=Tt=!0:It.contextDep&&it&&(Tt=!0),Tt||rf(Ie,Fe,It)):rf(Ie,Fe,null),Ze.state.viewport&&Ze.state.viewport.propDep&&(it=!0);function qt(Wr){return Wr.contextDep&&it||Wr.propDep}mf(Ie,Fe,Ze),lh(Ie,Fe,Ze.state,function(Wr){return!qt(Wr)}),(!Ze.profile||!qt(Ze.profile))&&fu(Ie,Fe,Ze,!1,"a1"),Ze.contextDep=it,Ze.needsContext=gt,Ze.needsFramebuffer=Tt;var Ot=Ze.shader.progVar;if(Ot.contextDep&&it||Ot.propDep)pd(Ie,Fe,Ze,null);else{var rr=Ot.append(Ie,Fe);if(Fe(Ie.shared.gl,".useProgram(",rr,".program);"),Ze.shader.program)pd(Ie,Fe,Ze,Ze.shader.program);else{Fe(Ie.shared.vao,".setVAO(null);");var Xt=Ie.global.def("{}"),gr=Fe.def(rr,".id"),Sr=Fe.def(Xt,"[",gr,"]");Fe(Ie.cond(Sr).then(Sr,".call(this,a0,a1);").else(Sr,"=",Xt,"[",gr,"]=",Ie.link(function(Wr){return js(pd,Ie,Ze,Wr,2)}),"(",rr,");",Sr,".call(this,a0,a1);"))}}Object.keys(Ze.state).length>0&&Fe(Ie.shared.current,".dirty=true;"),Ie.shared.vao&&Fe(Ie.shared.vao,".setVAO(null);")}function G(Ie,Ze){var Fe=Ie.proc("scope",3);Ie.batchId="a2";var it=Ie.shared,gt=it.current;Cl(Ie,Fe,Ze.context),Ze.framebuffer&&Ze.framebuffer.append(Ie,Fe),Hd(Object.keys(Ze.state)).forEach(function(Tt){var qt=Ze.state[Tt],Ot=qt.append(Ie,Fe);Xs(Ot)?Ot.forEach(function(rr,Xt){Fe.set(Ie.next[Tt],"["+Xt+"]",rr)}):Fe.set(it.next,"."+Tt,Ot)}),fu(Ie,Fe,Ze,!0,!0),[xt,or,Ht,en,mt].forEach(function(Tt){var qt=Ze.draw[Tt];qt&&Fe.set(it.draw,"."+Tt,""+qt.append(Ie,Fe))}),Object.keys(Ze.uniforms).forEach(function(Tt){var qt=Ze.uniforms[Tt].append(Ie,Fe);Array.isArray(qt)&&(qt="["+qt.join()+"]"),Fe.set(it.uniforms,"["+Vr.id(Tt)+"]",qt)}),Object.keys(Ze.attributes).forEach(function(Tt){var qt=Ze.attributes[Tt].append(Ie,Fe),Ot=Ie.scopeAttrib(Tt);Object.keys(new ui).forEach(function(rr){Fe.set(Ot,"."+rr,qt[rr])})}),Ze.scopeVAO&&Fe.set(it.vao,".targetVAO",Ze.scopeVAO.append(Ie,Fe));function It(Tt){var qt=Ze.shader[Tt];qt&&Fe.set(it.shader,"."+Tt,qt.append(Ie,Fe))}It(oe),It(Br),Object.keys(Ze.state).length>0&&(Fe(gt,".dirty=true;"),Fe.exit(gt,".dirty=true;")),Fe("a1(",Ie.shared.context,",a0,",Ie.batchId,");")}function Ce(Ie){if(!(typeof Ie!="object"||Xs(Ie))){for(var Ze=Object.keys(Ie),Fe=0;Fe<Ze.length;++Fe)if(Pr.isDynamic(Ie[Ze[Fe]]))return!0;return!1}}function ae(Ie,Ze,Fe){var it=Ze.static[Fe];if(!it||!Ce(it))return;var gt=Ie.global,It=Object.keys(it),Tt=!1,qt=!1,Ot=!1,rr=Ie.global.def("{}");It.forEach(function(gr){var Sr=it[gr];if(Pr.isDynamic(Sr)){typeof Sr=="function"&&(Sr=it[gr]=Pr.unbox(Sr));var Wr=Nh(Sr,null);Tt=Tt||Wr.thisDep,Ot=Ot||Wr.propDep,qt=qt||Wr.contextDep}else{switch(gt(rr,".",gr,"="),typeof Sr){case"number":gt(Sr);break;case"string":gt('"',Sr,'"');break;case"object":Array.isArray(Sr)&&gt("[",Sr.join(),"]");break;default:gt(Ie.link(Sr));break}gt(";")}});function Xt(gr,Sr){It.forEach(function(Wr){var Cn=it[Wr];if(Pr.isDynamic(Cn)){var xn=gr.invoke(Sr,Cn);Sr(rr,".",Wr,"=",xn,";")}})}Ze.dynamic[Fe]=new Pr.DynamicVariable(Qu,{thisDep:Tt,contextDep:qt,propDep:Ot,ref:rr,append:Xt}),delete Ze.static[Fe]}function et(Ie,Ze,Fe,it,gt){var It=Bs();It.stats=It.link(gt),Object.keys(Ze.static).forEach(function(qt){ae(It,Ze,qt)}),lu.forEach(function(qt){ae(It,Ie,qt)});var Tt=Ic(Ie,Ze,Fe,it,It);return Ru(It,Tt),G(It,Tt),w(It,Tt),l(It.compile(),{destroy:function(){Tt.shader.program.destroy()}})}return{next:xo,current:Ga,procs:function(){var Ie=Bs(),Ze=Ie.proc("poll"),Fe=Ie.proc("refresh"),it=Ie.block();Ze(it),Fe(it);var gt=Ie.shared,It=gt.gl,Tt=gt.next,qt=gt.current;it(qt,".dirty=false;"),rf(Ie,Ze),rf(Ie,Fe,null,!0);var Ot;La&&(Ot=Ie.link(La)),Ln.oes_vertex_array_object&&Fe(Ie.link(Ln.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var rr=0;rr<Ci.maxAttributes;++rr){var Xt=Fe.def(gt.attributes,"[",rr,"]"),gr=Ie.cond(Xt,".buffer");gr.then(It,".enableVertexAttribArray(",rr,");",It,".bindBuffer(",Iu,",",Xt,".buffer.buffer);",It,".vertexAttribPointer(",rr,",",Xt,".size,",Xt,".type,",Xt,".normalized,",Xt,".stride,",Xt,".offset);").else(It,".disableVertexAttribArray(",rr,");",It,".vertexAttrib4f(",rr,",",Xt,".x,",Xt,".y,",Xt,".z,",Xt,".w);",Xt,".buffer=null;"),Fe(gr),La&&Fe(Ot,".vertexAttribDivisorANGLE(",rr,",",Xt,".divisor);")}return Fe(Ie.shared.vao,".currentVAO=null;",Ie.shared.vao,".setVAO(",Ie.shared.vao,".targetVAO);"),Object.keys(ea).forEach(function(Sr){var Wr=ea[Sr],Cn=it.def(Tt,".",Sr),xn=Ie.block();xn("if(",Cn,"){",It,".enable(",Wr,")}else{",It,".disable(",Wr,")}",qt,".",Sr,"=",Cn,";"),Fe(xn),Ze("if(",Cn,"!==",qt,".",Sr,"){",xn,"}")}),Object.keys(sa).forEach(function(Sr){var Wr=sa[Sr],Cn=Ga[Sr],xn,In,Rn=Ie.block();if(Rn(It,".",Wr,"("),Xs(Cn)){var Gn=Cn.length;xn=Ie.global.def(Tt,".",Sr),In=Ie.global.def(qt,".",Sr),Rn(Ar(Gn,function(ti){return xn+"["+ti+"]"}),");",Ar(Gn,function(ti){return In+"["+ti+"]="+xn+"["+ti+"];"}).join("")),Ze("if(",Ar(Gn,function(ti){return xn+"["+ti+"]!=="+In+"["+ti+"]"}).join("||"),"){",Rn,"}")}else xn=it.def(Tt,".",Sr),In=it.def(qt,".",Sr),Rn(xn,");",qt,".",Sr,"=",xn,";"),Ze("if(",xn,"!==",In,"){",Rn,"}");Fe(Rn)}),Ie.compile()}(),compile:et}}function pp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var vp=34918,mp=34919,Cd=35007,ld=function(jt,Vr){if(!Vr.ext_disjoint_timer_query)return null;var Ln=[];function Ci(){return Ln.pop()||Vr.ext_disjoint_timer_query.createQueryEXT()}function aa(La){Ln.push(La)}var Ai=[];function Gi(La){var Ya=Ci();Vr.ext_disjoint_timer_query.beginQueryEXT(Cd,Ya),Ai.push(Ya),ya(Ai.length-1,Ai.length,La)}function Ea(){Vr.ext_disjoint_timer_query.endQueryEXT(Cd)}function Pa(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ra=[];function Za(){return Ra.pop()||new Pa}function Ha(La){Ra.push(La)}var $a=[];function ya(La,Ya,_a){var Ga=Za();Ga.startQueryIndex=La,Ga.endQueryIndex=Ya,Ga.sum=0,Ga.stats=_a,$a.push(Ga)}var Ua=[],ui=[];function Ni(){var La,Ya,_a=Ai.length;if(_a!==0){ui.length=Math.max(ui.length,_a+1),Ua.length=Math.max(Ua.length,_a+1),Ua[0]=0,ui[0]=0;var Ga=0;for(La=0,Ya=0;Ya<Ai.length;++Ya){var xo=Ai[Ya];Vr.ext_disjoint_timer_query.getQueryObjectEXT(xo,mp)?(Ga+=Vr.ext_disjoint_timer_query.getQueryObjectEXT(xo,vp),aa(xo)):Ai[La++]=xo,Ua[Ya+1]=Ga,ui[Ya+1]=La}for(Ai.length=La,La=0,Ya=0;Ya<$a.length;++Ya){var xs=$a[Ya],ea=xs.startQueryIndex,sa=xs.endQueryIndex;xs.sum+=Ua[sa]-Ua[ea];var Zo=ui[ea],fo=ui[sa];fo===Zo?(xs.stats.gpuTime+=xs.sum/1e6,Ha(xs)):(xs.startQueryIndex=Zo,xs.endQueryIndex=fo,$a[La++]=xs)}$a.length=La}}return{beginQuery:Gi,endQuery:Ea,pushScopeStats:ya,update:Ni,getNumPendingQueries:function(){return Ai.length},clear:function(){Ln.push.apply(Ln,Ai);for(var La=0;La<Ln.length;La++)Vr.ext_disjoint_timer_query.deleteQueryEXT(Ln[La]);Ai.length=0,Ln.length=0},restore:function(){Ai.length=0,Ln.length=0}}},gp=16384,Ah=256,Dd=1024,xd=34962,wd="webglcontextlost",vl="webglcontextrestored",kd=1,Fs=2,cd=3;function Vd(jt,Vr){for(var Ln=0;Ln<jt.length;++Ln)if(jt[Ln]===Vr)return Ln;return-1}function Gd(jt){var Vr=kt(jt);if(!Vr)return null;var Ln=Vr.gl,Ci=Ln.getContextAttributes(),aa=Ln.isContextLost(),Ai=cr(Ln,Vr);if(!Ai)return null;var Gi=mr(),Ea=pp(),Pa=Ai.extensions,Ra=ld(Ln,Pa),Za=zt(),Ha=Ln.drawingBufferWidth,$a=Ln.drawingBufferHeight,ya={tick:0,time:0,viewportWidth:Ha,viewportHeight:$a,framebufferWidth:Ha,framebufferHeight:$a,drawingBufferWidth:Ha,drawingBufferHeight:$a,pixelRatio:Vr.pixelRatio},Ua={},ui={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ni=As(Ln,Pa),La=yt(Ln,Ea,Vr,Ga),Ya=Va(Ln,Pa,La,Ea),_a=vi(Ln,Pa,Ni,Ea,La,Ya,ui);function Ga(js){return _a.destroyBuffer(js)}var xo=ka(Ln,Gi,Ea,Vr),xs=Jl(Ln,Pa,Ni,function(){Zo.procs.poll()},ya,Ea,Vr),ea=ph(Ln,Pa,Ni,Ea,Vr),sa=En(Ln,Pa,Ni,xs,ea,Ea),Zo=_d(Ln,Gi,Pa,Ni,La,Ya,xs,sa,Ua,_a,xo,ui,ya,Ra,Vr),fo=rs(Ln,sa,Zo.procs.poll,ya,Ci,Pa,Ni),Oa=Zo.next,to=Ln.canvas,Ia=[],Os=[],Bs=[],so=[Vr.onDestroy],yo=null;function hs(){if(Ia.length===0){Ra&&Ra.update(),yo=null;return}yo=_r.next(hs),pc();for(var js=Ia.length-1;js>=0;--js){var Pu=Ia[js];Pu&&Pu(ya,null,0)}Ln.flush(),Ra&&Ra.update()}function zs(){!yo&&Ia.length>0&&(yo=_r.next(hs))}function wu(){yo&&(_r.cancel(hs),yo=null)}function Gu(js){js.preventDefault(),aa=!0,wu(),Os.forEach(function(Pu){Pu()})}function Bl(js){Ln.getError(),aa=!1,Ai.restore(),xo.restore(),La.restore(),xs.restore(),ea.restore(),sa.restore(),_a.restore(),Ra&&Ra.restore(),Zo.procs.refresh(),zs(),Bs.forEach(function(Pu){Pu()})}var Au=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!Au&&to&&(to.addEventListener(wd,Gu,!1),to.addEventListener(vl,Bl,!1));function Sf(){Ia.length=0,wu(),!Au&&to&&(to.removeEventListener(wd,Gu),to.removeEventListener(vl,Bl)),xo.clear(),sa.clear(),ea.clear(),_a.clear(),xs.clear(),Ya.clear(),La.clear(),Ra&&Ra.clear(),so.forEach(function(js){js()})}function Xl(js){W(!!js,"invalid args to regl({...})"),W.type(js,"object","invalid args to regl({...})");function Pu(It){var Tt=l({},It);delete Tt.uniforms,delete Tt.attributes,delete Tt.context,delete Tt.vao,"stencil"in Tt&&Tt.stencil.op&&(Tt.stencil.opBack=Tt.stencil.opFront=Tt.stencil.op,delete Tt.stencil.op);function qt(Ot){if(Ot in Tt){var rr=Tt[Ot];delete Tt[Ot],Object.keys(rr).forEach(function(Xt){Tt[Ot+"."+Xt]=rr[Xt]})}}return qt("blend"),qt("depth"),qt("cull"),qt("stencil"),qt("polygonOffset"),qt("scissor"),qt("sample"),"vao"in It&&(Tt.vao=It.vao),Tt}function Ru(It,Tt){var qt={},Ot={};return Object.keys(It).forEach(function(rr){var Xt=It[rr];if(Pr.isDynamic(Xt)){Ot[rr]=Pr.unbox(Xt,rr);return}else if(Tt&&Array.isArray(Xt)){for(var gr=0;gr<Xt.length;++gr)if(Pr.isDynamic(Xt[gr])){Ot[rr]=Pr.unbox(Xt,rr);return}}qt[rr]=Xt}),{dynamic:Ot,static:qt}}var nf=Ru(js.context||{},!0),pd=Ru(js.uniforms||{},!0),w=Ru(js.attributes||{},!1),G=Ru(Pu(js),!1),Ce={gpuTime:0,cpuTime:0,count:0},ae=Zo.compile(G,w,pd,nf,Ce),et=ae.draw,Ie=ae.batch,Ze=ae.scope,Fe=[];function it(It){for(;Fe.length<It;)Fe.push(null);return Fe}function gt(It,Tt){var qt;if(aa&&W.raise("context lost"),typeof It=="function")return Ze.call(this,null,It,0);if(typeof Tt=="function")if(typeof It=="number")for(qt=0;qt<It;++qt)Ze.call(this,null,Tt,qt);else if(Array.isArray(It))for(qt=0;qt<It.length;++qt)Ze.call(this,It[qt],Tt,qt);else return Ze.call(this,It,Tt,0);else if(typeof It=="number"){if(It>0)return Ie.call(this,it(It|0),It|0)}else if(Array.isArray(It)){if(It.length)return Ie.call(this,It,It.length)}else return et.call(this,It)}return l(gt,{stats:Ce,destroy:function(){ae.destroy()}})}var Ic=sa.setFBO=Xl({framebuffer:Pr.define.call(null,kd,"framebuffer")});function Cl(js,Pu){var Ru=0;Zo.procs.poll();var nf=Pu.color;nf&&(Ln.clearColor(+nf[0]||0,+nf[1]||0,+nf[2]||0,+nf[3]||0),Ru|=gp),"depth"in Pu&&(Ln.clearDepth(+Pu.depth),Ru|=Ah),"stencil"in Pu&&(Ln.clearStencil(Pu.stencil|0),Ru|=Dd),W(!!Ru,"called regl.clear with no buffer specified"),Ln.clear(Ru)}function rf(js){if(W(typeof js=="object"&&js,"regl.clear() takes an object as input"),"framebuffer"in js)if(js.framebuffer&&js.framebuffer_reglType==="framebufferCube")for(var Pu=0;Pu<6;++Pu)Ic(l({framebuffer:js.framebuffer.faces[Pu]},js),Cl);else Ic(js,Cl);else Cl(null,js)}function mf(js){W.type(js,"function","regl.frame() callback must be a function"),Ia.push(js);function Pu(){var Ru=Vd(Ia,js);W(Ru>=0,"cannot cancel a frame twice");function nf(){var pd=Vd(Ia,nf);Ia[pd]=Ia[Ia.length-1],Ia.length-=1,Ia.length<=0&&wu()}Ia[Ru]=nf}return zs(),{cancel:Pu}}function lh(){var js=Oa.viewport,Pu=Oa.scissor_box;js[0]=js[1]=Pu[0]=Pu[1]=0,ya.viewportWidth=ya.framebufferWidth=ya.drawingBufferWidth=js[2]=Pu[2]=Ln.drawingBufferWidth,ya.viewportHeight=ya.framebufferHeight=ya.drawingBufferHeight=js[3]=Pu[3]=Ln.drawingBufferHeight}function pc(){ya.tick+=1,ya.time=Cf(),lh(),Zo.procs.poll()}function fu(){xs.refresh(),lh(),Zo.procs.refresh(),Ra&&Ra.update()}function Cf(){return(zt()-Za)/1e3}fu();function Uu(js,Pu){W.type(Pu,"function","listener callback must be a function");var Ru;switch(js){case"frame":return mf(Pu);case"lost":Ru=Os;break;case"restore":Ru=Bs;break;case"destroy":Ru=so;break;default:W.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ru.push(Pu),{cancel:function(){for(var nf=0;nf<Ru.length;++nf)if(Ru[nf]===Pu){Ru[nf]=Ru[Ru.length-1],Ru.pop();return}}}}var Qf=l(Xl,{clear:rf,prop:Pr.define.bind(null,kd),context:Pr.define.bind(null,Fs),this:Pr.define.bind(null,cd),draw:Xl({}),buffer:function(js){return La.create(js,xd,!1,!1)},elements:function(js){return Ya.create(js,!1)},texture:xs.create2D,cube:xs.createCube,renderbuffer:ea.create,framebuffer:sa.create,framebufferCube:sa.createCube,vao:_a.createVAO,attributes:Ci,frame:mf,on:Uu,limits:Ni,hasExtension:function(js){return Ni.extensions.indexOf(js.toLowerCase())>=0},read:fo,destroy:Sf,_gl:Ln,_refresh:fu,poll:function(){pc(),Ra&&Ra.update()},now:Cf,stats:Ea});return Vr.onDone(null,Qf),Qf}return Gd})},18552:function(Qe,te,m){var v=m(10852),C=m(55639),l=v(C,"DataView");Qe.exports=l},1989:function(Qe,te,m){var v=m(51789),C=m(80401),l=m(57667),$=m(21327),R=m(81866);function z(L){var T=-1,O=L==null?0:L.length;for(this.clear();++T<O;){var F=L[T];this.set(F[0],F[1])}}z.prototype.clear=v,z.prototype.delete=C,z.prototype.get=l,z.prototype.has=$,z.prototype.set=R,Qe.exports=z},38407:function(Qe,te,m){var v=m(27040),C=m(14125),l=m(82117),$=m(67518),R=m(13399);function z(L){var T=-1,O=L==null?0:L.length;for(this.clear();++T<O;){var F=L[T];this.set(F[0],F[1])}}z.prototype.clear=v,z.prototype.delete=C,z.prototype.get=l,z.prototype.has=$,z.prototype.set=R,Qe.exports=z},57071:function(Qe,te,m){var v=m(10852),C=m(55639),l=v(C,"Map");Qe.exports=l},83369:function(Qe,te,m){var v=m(24785),C=m(11285),l=m(96e3),$=m(49916),R=m(95265);function z(L){var T=-1,O=L==null?0:L.length;for(this.clear();++T<O;){var F=L[T];this.set(F[0],F[1])}}z.prototype.clear=v,z.prototype.delete=C,z.prototype.get=l,z.prototype.has=$,z.prototype.set=R,Qe.exports=z},53818:function(Qe,te,m){var v=m(10852),C=m(55639),l=v(C,"Promise");Qe.exports=l},58525:function(Qe,te,m){var v=m(10852),C=m(55639),l=v(C,"Set");Qe.exports=l},88668:function(Qe,te,m){var v=m(83369),C=m(90619),l=m(72385);function $(R){var z=-1,L=R==null?0:R.length;for(this.__data__=new v;++z<L;)this.add(R[z])}$.prototype.add=$.prototype.push=C,$.prototype.has=l,Qe.exports=$},46384:function(Qe,te,m){var v=m(38407),C=m(37465),l=m(63779),$=m(67599),R=m(44758),z=m(34309);function L(T){var O=this.__data__=new v(T);this.size=O.size}L.prototype.clear=C,L.prototype.delete=l,L.prototype.get=$,L.prototype.has=R,L.prototype.set=z,Qe.exports=L},62705:function(Qe,te,m){var v=m(55639),C=v.Symbol;Qe.exports=C},11149:function(Qe,te,m){var v=m(55639),C=v.Uint8Array;Qe.exports=C},70577:function(Qe,te,m){var v=m(10852),C=m(55639),l=v(C,"WeakMap");Qe.exports=l},96874:function(Qe){function te(m,v,C){switch(C.length){case 0:return m.call(v);case 1:return m.call(v,C[0]);case 2:return m.call(v,C[0],C[1]);case 3:return m.call(v,C[0],C[1],C[2])}return m.apply(v,C)}Qe.exports=te},34963:function(Qe){function te(m,v){for(var C=-1,l=m==null?0:m.length,$=0,R=[];++C<l;){var z=m[C];v(z,C,m)&&(R[$++]=z)}return R}Qe.exports=te},14636:function(Qe,te,m){var v=m(22545),C=m(35694),l=m(1469),$=m(44144),R=m(65776),z=m(36719),L=Object.prototype,T=L.hasOwnProperty;function O(F,ue){var Ae=l(F),re=!Ae&&C(F),pe=!Ae&&!re&&$(F),fe=!Ae&&!re&&!pe&&z(F),ke=Ae||re||pe||fe,je=ke?v(F.length,String):[],bt=je.length;for(var ut in F)(ue||T.call(F,ut))&&!(ke&&(ut=="length"||pe&&(ut=="offset"||ut=="parent")||fe&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||R(ut,bt)))&&je.push(ut);return je}Qe.exports=O},62488:function(Qe){function te(m,v){for(var C=-1,l=v.length,$=m.length;++C<l;)m[$+C]=v[C];return m}Qe.exports=te},82908:function(Qe){function te(m,v){for(var C=-1,l=m==null?0:m.length;++C<l;)if(v(m[C],C,m))return!0;return!1}Qe.exports=te},86556:function(Qe,te,m){var v=m(89465),C=m(77813);function l($,R,z){(z!==void 0&&!C($[R],z)||z===void 0&&!(R in $))&&v($,R,z)}Qe.exports=l},34865:function(Qe,te,m){var v=m(89465),C=m(77813),l=Object.prototype,$=l.hasOwnProperty;function R(z,L,T){var O=z[L];(!($.call(z,L)&&C(O,T))||T===void 0&&!(L in z))&&v(z,L,T)}Qe.exports=R},18470:function(Qe,te,m){var v=m(77813);function C(l,$){for(var R=l.length;R--;)if(v(l[R][0],$))return R;return-1}Qe.exports=C},89465:function(Qe,te,m){var v=m(38777);function C(l,$,R){$=="__proto__"&&v?v(l,$,{configurable:!0,enumerable:!0,value:R,writable:!0}):l[$]=R}Qe.exports=C},3118:function(Qe,te,m){var v=m(13218),C=Object.create,l=function(){function $(){}return function(R){if(!v(R))return{};if(C)return C(R);$.prototype=R;var z=new $;return $.prototype=void 0,z}}();Qe.exports=l},28483:function(Qe,te,m){var v=m(25063),C=v();Qe.exports=C},68866:function(Qe,te,m){var v=m(62488),C=m(1469);function l($,R,z){var L=R($);return C($)?L:v(L,z($))}Qe.exports=l},44239:function(Qe,te,m){var v=m(62705),C=m(89607),l=m(2333),$="[object Null]",R="[object Undefined]",z=v?v.toStringTag:void 0;function L(T){return T==null?T===void 0?R:$:z&&z in Object(T)?C(T):l(T)}Qe.exports=L},9454:function(Qe,te,m){var v=m(44239),C=m(37005),l="[object Arguments]";function $(R){return C(R)&&v(R)==l}Qe.exports=$},90939:function(Qe,te,m){var v=m(2492),C=m(37005);function l($,R,z,L,T){return $===R?!0:$==null||R==null||!C($)&&!C(R)?$!==$&&R!==R:v($,R,z,L,l,T)}Qe.exports=l},2492:function(Qe,te,m){var v=m(46384),C=m(67114),l=m(18351),$=m(16096),R=m(64160),z=m(1469),L=m(44144),T=m(36719),O=1,F="[object Arguments]",ue="[object Array]",Ae="[object Object]",re=Object.prototype,pe=re.hasOwnProperty;function fe(ke,je,bt,ut,wt,se){var qe=z(ke),me=z(je),_e=qe?ue:R(ke),Te=me?ue:R(je);_e=_e==F?Ae:_e,Te=Te==F?Ae:Te;var ht=_e==Ae,We=Te==Ae,Ne=_e==Te;if(Ne&&L(ke)){if(!L(je))return!1;qe=!0,ht=!1}if(Ne&&!ht)return se||(se=new v),qe||T(ke)?C(ke,je,bt,ut,wt,se):l(ke,je,_e,bt,ut,wt,se);if(!(bt&O)){var he=ht&&pe.call(ke,"__wrapped__"),Ve=We&&pe.call(je,"__wrapped__");if(he||Ve){var ie=he?ke.value():ke,ze=Ve?je.value():je;return se||(se=new v),wt(ie,ze,bt,ut,se)}}return Ne?(se||(se=new v),$(ke,je,bt,ut,wt,se)):!1}Qe.exports=fe},28458:function(Qe,te,m){var v=m(23560),C=m(15346),l=m(13218),$=m(80346),R=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,L=Function.prototype,T=Object.prototype,O=L.toString,F=T.hasOwnProperty,ue=RegExp("^"+O.call(F).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ae(re){if(!l(re)||C(re))return!1;var pe=v(re)?ue:z;return pe.test($(re))}Qe.exports=Ae},38749:function(Qe,te,m){var v=m(44239),C=m(41780),l=m(37005),$="[object Arguments]",R="[object Array]",z="[object Boolean]",L="[object Date]",T="[object Error]",O="[object Function]",F="[object Map]",ue="[object Number]",Ae="[object Object]",re="[object RegExp]",pe="[object Set]",fe="[object String]",ke="[object WeakMap]",je="[object ArrayBuffer]",bt="[object DataView]",ut="[object Float32Array]",wt="[object Float64Array]",se="[object Int8Array]",qe="[object Int16Array]",me="[object Int32Array]",_e="[object Uint8Array]",Te="[object Uint8ClampedArray]",ht="[object Uint16Array]",We="[object Uint32Array]",Ne={};Ne[ut]=Ne[wt]=Ne[se]=Ne[qe]=Ne[me]=Ne[_e]=Ne[Te]=Ne[ht]=Ne[We]=!0,Ne[$]=Ne[R]=Ne[je]=Ne[z]=Ne[bt]=Ne[L]=Ne[T]=Ne[O]=Ne[F]=Ne[ue]=Ne[Ae]=Ne[re]=Ne[pe]=Ne[fe]=Ne[ke]=!1;function he(Ve){return l(Ve)&&C(Ve.length)&&!!Ne[v(Ve)]}Qe.exports=he},280:function(Qe,te,m){var v=m(25726),C=m(86916),l=Object.prototype,$=l.hasOwnProperty;function R(z){if(!v(z))return C(z);var L=[];for(var T in Object(z))$.call(z,T)&&T!="constructor"&&L.push(T);return L}Qe.exports=R},35014:function(Qe,te,m){var v=m(13218),C=m(25726),l=m(33498),$=Object.prototype,R=$.hasOwnProperty;function z(L){if(!v(L))return l(L);var T=C(L),O=[];for(var F in L)F=="constructor"&&(T||!R.call(L,F))||O.push(F);return O}Qe.exports=z},42980:function(Qe,te,m){var v=m(46384),C=m(86556),l=m(28483),$=m(59783),R=m(13218),z=m(81704),L=m(36390);function T(O,F,ue,Ae,re){O!==F&&l(F,function(pe,fe){if(re||(re=new v),R(pe))$(O,F,fe,ue,T,Ae,re);else{var ke=Ae?Ae(L(O,fe),pe,fe+"",O,F,re):void 0;ke===void 0&&(ke=pe),C(O,fe,ke)}},z)}Qe.exports=T},59783:function(Qe,te,m){var v=m(86556),C=m(64626),l=m(77133),$=m(278),R=m(38517),z=m(35694),L=m(1469),T=m(29246),O=m(44144),F=m(23560),ue=m(13218),Ae=m(68630),re=m(36719),pe=m(36390),fe=m(59881);function ke(je,bt,ut,wt,se,qe,me){var _e=pe(je,ut),Te=pe(bt,ut),ht=me.get(Te);if(ht){v(je,ut,ht);return}var We=qe?qe(_e,Te,ut+"",je,bt,me):void 0,Ne=We===void 0;if(Ne){var he=L(Te),Ve=!he&&O(Te),ie=!he&&!Ve&&re(Te);We=Te,he||Ve||ie?L(_e)?We=_e:T(_e)?We=$(_e):Ve?(Ne=!1,We=C(Te,!0)):ie?(Ne=!1,We=l(Te,!0)):We=[]:Ae(Te)||z(Te)?(We=_e,z(_e)?We=fe(_e):(!ue(_e)||F(_e))&&(We=R(Te))):Ne=!1}Ne&&(me.set(Te,We),se(We,Te,wt,qe,me),me.delete(Te)),v(je,ut,We)}Qe.exports=ke},5976:function(Qe,te,m){var v=m(6557),C=m(45357),l=m(30061);function $(R,z){return l(C(R,z,v),R+"")}Qe.exports=$},56560:function(Qe,te,m){var v=m(75703),C=m(38777),l=m(6557),$=C?function(R,z){return C(R,"toString",{configurable:!0,enumerable:!1,value:v(z),writable:!0})}:l;Qe.exports=$},22545:function(Qe){function te(m,v){for(var C=-1,l=Array(m);++C<m;)l[C]=v(C);return l}Qe.exports=te},4107:function(Qe,te,m){var v=m(67990),C=/^\s+/;function l($){return $&&$.slice(0,v($)+1).replace(C,"")}Qe.exports=l},7518:function(Qe){function te(m){return function(v){return m(v)}}Qe.exports=te},74757:function(Qe){function te(m,v){return m.has(v)}Qe.exports=te},74318:function(Qe,te,m){var v=m(11149);function C(l){var $=new l.constructor(l.byteLength);return new v($).set(new v(l)),$}Qe.exports=C},64626:function(Qe,te,m){Qe=m.nmd(Qe);var v=m(55639),C=te&&!te.nodeType&&te,l=C&&!0&&Qe&&!Qe.nodeType&&Qe,$=l&&l.exports===C,R=$?v.Buffer:void 0,z=R?R.allocUnsafe:void 0;function L(T,O){if(O)return T.slice();var F=T.length,ue=z?z(F):new T.constructor(F);return T.copy(ue),ue}Qe.exports=L},77133:function(Qe,te,m){var v=m(74318);function C(l,$){var R=$?v(l.buffer):l.buffer;return new l.constructor(R,l.byteOffset,l.length)}Qe.exports=C},278:function(Qe){function te(m,v){var C=-1,l=m.length;for(v||(v=Array(l));++C<l;)v[C]=m[C];return v}Qe.exports=te},98363:function(Qe,te,m){var v=m(34865),C=m(89465);function l($,R,z,L){var T=!z;z||(z={});for(var O=-1,F=R.length;++O<F;){var ue=R[O],Ae=L?L(z[ue],$[ue],ue,z,$):void 0;Ae===void 0&&(Ae=$[ue]),T?C(z,ue,Ae):v(z,ue,Ae)}return z}Qe.exports=l},14429:function(Qe,te,m){var v=m(55639),C=v["__core-js_shared__"];Qe.exports=C},21463:function(Qe,te,m){var v=m(5976),C=m(16612);function l($){return v(function(R,z){var L=-1,T=z.length,O=T>1?z[T-1]:void 0,F=T>2?z[2]:void 0;for(O=$.length>3&&typeof O=="function"?(T--,O):void 0,F&&C(z[0],z[1],F)&&(O=T<3?void 0:O,T=1),R=Object(R);++L<T;){var ue=z[L];ue&&$(R,ue,L,O)}return R})}Qe.exports=l},25063:function(Qe){function te(m){return function(v,C,l){for(var $=-1,R=Object(v),z=l(v),L=z.length;L--;){var T=z[m?L:++$];if(C(R[T],T,R)===!1)break}return v}}Qe.exports=te},38777:function(Qe,te,m){var v=m(10852),C=function(){try{var l=v(Object,"defineProperty");return l({},"",{}),l}catch($){}}();Qe.exports=C},67114:function(Qe,te,m){var v=m(88668),C=m(82908),l=m(74757),$=1,R=2;function z(L,T,O,F,ue,Ae){var re=O&$,pe=L.length,fe=T.length;if(pe!=fe&&!(re&&fe>pe))return!1;var ke=Ae.get(L),je=Ae.get(T);if(ke&&je)return ke==T&&je==L;var bt=-1,ut=!0,wt=O&R?new v:void 0;for(Ae.set(L,T),Ae.set(T,L);++bt<pe;){var se=L[bt],qe=T[bt];if(F)var me=re?F(qe,se,bt,T,L,Ae):F(se,qe,bt,L,T,Ae);if(me!==void 0){if(me)continue;ut=!1;break}if(wt){if(!C(T,function(_e,Te){if(!l(wt,Te)&&(se===_e||ue(se,_e,O,F,Ae)))return wt.push(Te)})){ut=!1;break}}else if(!(se===qe||ue(se,qe,O,F,Ae))){ut=!1;break}}return Ae.delete(L),Ae.delete(T),ut}Qe.exports=z},18351:function(Qe,te,m){var v=m(62705),C=m(11149),l=m(77813),$=m(67114),R=m(68776),z=m(21814),L=1,T=2,O="[object Boolean]",F="[object Date]",ue="[object Error]",Ae="[object Map]",re="[object Number]",pe="[object RegExp]",fe="[object Set]",ke="[object String]",je="[object Symbol]",bt="[object ArrayBuffer]",ut="[object DataView]",wt=v?v.prototype:void 0,se=wt?wt.valueOf:void 0;function qe(me,_e,Te,ht,We,Ne,he){switch(Te){case ut:if(me.byteLength!=_e.byteLength||me.byteOffset!=_e.byteOffset)return!1;me=me.buffer,_e=_e.buffer;case bt:return!(me.byteLength!=_e.byteLength||!Ne(new C(me),new C(_e)));case O:case F:case re:return l(+me,+_e);case ue:return me.name==_e.name&&me.message==_e.message;case pe:case ke:return me==_e+"";case Ae:var Ve=R;case fe:var ie=ht&L;if(Ve||(Ve=z),me.size!=_e.size&&!ie)return!1;var ze=he.get(me);if(ze)return ze==_e;ht|=T,he.set(me,_e);var Le=$(Ve(me),Ve(_e),ht,We,Ne,he);return he.delete(me),Le;case je:if(se)return se.call(me)==se.call(_e)}return!1}Qe.exports=qe},16096:function(Qe,te,m){var v=m(58234),C=1,l=Object.prototype,$=l.hasOwnProperty;function R(z,L,T,O,F,ue){var Ae=T&C,re=v(z),pe=re.length,fe=v(L),ke=fe.length;if(pe!=ke&&!Ae)return!1;for(var je=pe;je--;){var bt=re[je];if(!(Ae?bt in L:$.call(L,bt)))return!1}var ut=ue.get(z),wt=ue.get(L);if(ut&&wt)return ut==L&&wt==z;var se=!0;ue.set(z,L),ue.set(L,z);for(var qe=Ae;++je<pe;){bt=re[je];var me=z[bt],_e=L[bt];if(O)var Te=Ae?O(_e,me,bt,L,z,ue):O(me,_e,bt,z,L,ue);if(!(Te===void 0?me===_e||F(me,_e,T,O,ue):Te)){se=!1;break}qe||(qe=bt=="constructor")}if(se&&!qe){var ht=z.constructor,We=L.constructor;ht!=We&&"constructor"in z&&"constructor"in L&&!(typeof ht=="function"&&ht instanceof ht&&typeof We=="function"&&We instanceof We)&&(se=!1)}return ue.delete(z),ue.delete(L),se}Qe.exports=R},31957:function(Qe,te,m){var v=typeof m.g=="object"&&m.g&&m.g.Object===Object&&m.g;Qe.exports=v},58234:function(Qe,te,m){var v=m(68866),C=m(99551),l=m(3674);function $(R){return v(R,l,C)}Qe.exports=$},45050:function(Qe,te,m){var v=m(37019);function C(l,$){var R=l.__data__;return v($)?R[typeof $=="string"?"string":"hash"]:R.map}Qe.exports=C},10852:function(Qe,te,m){var v=m(28458),C=m(47801);function l($,R){var z=C($,R);return v(z)?z:void 0}Qe.exports=l},85924:function(Qe,te,m){var v=m(5569),C=v(Object.getPrototypeOf,Object);Qe.exports=C},89607:function(Qe,te,m){var v=m(62705),C=Object.prototype,l=C.hasOwnProperty,$=C.toString,R=v?v.toStringTag:void 0;function z(L){var T=l.call(L,R),O=L[R];try{L[R]=void 0;var F=!0}catch(Ae){}var ue=$.call(L);return F&&(T?L[R]=O:delete L[R]),ue}Qe.exports=z},99551:function(Qe,te,m){var v=m(34963),C=m(70479),l=Object.prototype,$=l.propertyIsEnumerable,R=Object.getOwnPropertySymbols,z=R?function(L){return L==null?[]:(L=Object(L),v(R(L),function(T){return $.call(L,T)}))}:C;Qe.exports=z},64160:function(Qe,te,m){var v=m(18552),C=m(57071),l=m(53818),$=m(58525),R=m(70577),z=m(44239),L=m(80346),T="[object Map]",O="[object Object]",F="[object Promise]",ue="[object Set]",Ae="[object WeakMap]",re="[object DataView]",pe=L(v),fe=L(C),ke=L(l),je=L($),bt=L(R),ut=z;(v&&ut(new v(new ArrayBuffer(1)))!=re||C&&ut(new C)!=T||l&&ut(l.resolve())!=F||$&&ut(new $)!=ue||R&&ut(new R)!=Ae)&&(ut=function(wt){var se=z(wt),qe=se==O?wt.constructor:void 0,me=qe?L(qe):"";if(me)switch(me){case pe:return re;case fe:return T;case ke:return F;case je:return ue;case bt:return Ae}return se}),Qe.exports=ut},47801:function(Qe){function te(m,v){return m==null?void 0:m[v]}Qe.exports=te},51789:function(Qe,te,m){var v=m(94536);function C(){this.__data__=v?v(null):{},this.size=0}Qe.exports=C},80401:function(Qe){function te(m){var v=this.has(m)&&delete this.__data__[m];return this.size-=v?1:0,v}Qe.exports=te},57667:function(Qe,te,m){var v=m(94536),C="__lodash_hash_undefined__",l=Object.prototype,$=l.hasOwnProperty;function R(z){var L=this.__data__;if(v){var T=L[z];return T===C?void 0:T}return $.call(L,z)?L[z]:void 0}Qe.exports=R},21327:function(Qe,te,m){var v=m(94536),C=Object.prototype,l=C.hasOwnProperty;function $(R){var z=this.__data__;return v?z[R]!==void 0:l.call(z,R)}Qe.exports=$},81866:function(Qe,te,m){var v=m(94536),C="__lodash_hash_undefined__";function l($,R){var z=this.__data__;return this.size+=this.has($)?0:1,z[$]=v&&R===void 0?C:R,this}Qe.exports=l},38517:function(Qe,te,m){var v=m(3118),C=m(85924),l=m(25726);function $(R){return typeof R.constructor=="function"&&!l(R)?v(C(R)):{}}Qe.exports=$},65776:function(Qe){var te=9007199254740991,m=/^(?:0|[1-9]\d*)$/;function v(C,l){var $=typeof C;return l=l==null?te:l,!!l&&($=="number"||$!="symbol"&&m.test(C))&&C>-1&&C%1==0&&C<l}Qe.exports=v},16612:function(Qe,te,m){var v=m(77813),C=m(98612),l=m(65776),$=m(13218);function R(z,L,T){if(!$(T))return!1;var O=typeof L;return(O=="number"?C(T)&&l(L,T.length):O=="string"&&L in T)?v(T[L],z):!1}Qe.exports=R},37019:function(Qe){function te(m){var v=typeof m;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?m!=="__proto__":m===null}Qe.exports=te},15346:function(Qe,te,m){var v=m(14429),C=function(){var $=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}();function l($){return!!C&&C in $}Qe.exports=l},25726:function(Qe){var te=Object.prototype;function m(v){var C=v&&v.constructor,l=typeof C=="function"&&C.prototype||te;return v===l}Qe.exports=m},27040:function(Qe){function te(){this.__data__=[],this.size=0}Qe.exports=te},14125:function(Qe,te,m){var v=m(18470),C=Array.prototype,l=C.splice;function $(R){var z=this.__data__,L=v(z,R);if(L<0)return!1;var T=z.length-1;return L==T?z.pop():l.call(z,L,1),--this.size,!0}Qe.exports=$},82117:function(Qe,te,m){var v=m(18470);function C(l){var $=this.__data__,R=v($,l);return R<0?void 0:$[R][1]}Qe.exports=C},67518:function(Qe,te,m){var v=m(18470);function C(l){return v(this.__data__,l)>-1}Qe.exports=C},13399:function(Qe,te,m){var v=m(18470);function C(l,$){var R=this.__data__,z=v(R,l);return z<0?(++this.size,R.push([l,$])):R[z][1]=$,this}Qe.exports=C},24785:function(Qe,te,m){var v=m(1989),C=m(38407),l=m(57071);function $(){this.size=0,this.__data__={hash:new v,map:new(l||C),string:new v}}Qe.exports=$},11285:function(Qe,te,m){var v=m(45050);function C(l){var $=v(this,l).delete(l);return this.size-=$?1:0,$}Qe.exports=C},96e3:function(Qe,te,m){var v=m(45050);function C(l){return v(this,l).get(l)}Qe.exports=C},49916:function(Qe,te,m){var v=m(45050);function C(l){return v(this,l).has(l)}Qe.exports=C},95265:function(Qe,te,m){var v=m(45050);function C(l,$){var R=v(this,l),z=R.size;return R.set(l,$),this.size+=R.size==z?0:1,this}Qe.exports=C},68776:function(Qe){function te(m){var v=-1,C=Array(m.size);return m.forEach(function(l,$){C[++v]=[$,l]}),C}Qe.exports=te},94536:function(Qe,te,m){var v=m(10852),C=v(Object,"create");Qe.exports=C},86916:function(Qe,te,m){var v=m(5569),C=v(Object.keys,Object);Qe.exports=C},33498:function(Qe){function te(m){var v=[];if(m!=null)for(var C in Object(m))v.push(C);return v}Qe.exports=te},31167:function(Qe,te,m){Qe=m.nmd(Qe);var v=m(31957),C=te&&!te.nodeType&&te,l=C&&!0&&Qe&&!Qe.nodeType&&Qe,$=l&&l.exports===C,R=$&&v.process,z=function(){try{var L=l&&l.require&&l.require("util").types;return L||R&&R.binding&&R.binding("util")}catch(T){}}();Qe.exports=z},2333:function(Qe){var te=Object.prototype,m=te.toString;function v(C){return m.call(C)}Qe.exports=v},5569:function(Qe){function te(m,v){return function(C){return m(v(C))}}Qe.exports=te},45357:function(Qe,te,m){var v=m(96874),C=Math.max;function l($,R,z){return R=C(R===void 0?$.length-1:R,0),function(){for(var L=arguments,T=-1,O=C(L.length-R,0),F=Array(O);++T<O;)F[T]=L[R+T];T=-1;for(var ue=Array(R+1);++T<R;)ue[T]=L[T];return ue[R]=z(F),v($,this,ue)}}Qe.exports=l},55639:function(Qe,te,m){var v=m(31957),C=typeof self=="object"&&self&&self.Object===Object&&self,l=v||C||Function("return this")();Qe.exports=l},36390:function(Qe){function te(m,v){if(!(v==="constructor"&&typeof m[v]=="function")&&v!="__proto__")return m[v]}Qe.exports=te},90619:function(Qe){var te="__lodash_hash_undefined__";function m(v){return this.__data__.set(v,te),this}Qe.exports=m},72385:function(Qe){function te(m){return this.__data__.has(m)}Qe.exports=te},21814:function(Qe){function te(m){var v=-1,C=Array(m.size);return m.forEach(function(l){C[++v]=l}),C}Qe.exports=te},30061:function(Qe,te,m){var v=m(56560),C=m(21275),l=C(v);Qe.exports=l},21275:function(Qe){var te=800,m=16,v=Date.now;function C(l){var $=0,R=0;return function(){var z=v(),L=m-(z-R);if(R=z,L>0){if(++$>=te)return arguments[0]}else $=0;return l.apply(void 0,arguments)}}Qe.exports=C},37465:function(Qe,te,m){var v=m(38407);function C(){this.__data__=new v,this.size=0}Qe.exports=C},63779:function(Qe){function te(m){var v=this.__data__,C=v.delete(m);return this.size=v.size,C}Qe.exports=te},67599:function(Qe){function te(m){return this.__data__.get(m)}Qe.exports=te},44758:function(Qe){function te(m){return this.__data__.has(m)}Qe.exports=te},34309:function(Qe,te,m){var v=m(38407),C=m(57071),l=m(83369),$=200;function R(z,L){var T=this.__data__;if(T instanceof v){var O=T.__data__;if(!C||O.length<$-1)return O.push([z,L]),this.size=++T.size,this;T=this.__data__=new l(O)}return T.set(z,L),this.size=T.size,this}Qe.exports=R},80346:function(Qe){var te=Function.prototype,m=te.toString;function v(C){if(C!=null){try{return m.call(C)}catch(l){}try{return C+""}catch(l){}}return""}Qe.exports=v},67990:function(Qe){var te=/\s/;function m(v){for(var C=v.length;C--&&te.test(v.charAt(C)););return C}Qe.exports=m},75703:function(Qe){function te(m){return function(){return m}}Qe.exports=te},23279:function(Qe,te,m){var v=m(13218),C=m(7771),l=m(14841),$="Expected a function",R=Math.max,z=Math.min;function L(T,O,F){var ue,Ae,re,pe,fe,ke,je=0,bt=!1,ut=!1,wt=!0;if(typeof T!="function")throw new TypeError($);O=l(O)||0,v(F)&&(bt=!!F.leading,ut="maxWait"in F,re=ut?R(l(F.maxWait)||0,O):re,wt="trailing"in F?!!F.trailing:wt);function se(Ve){var ie=ue,ze=Ae;return ue=Ae=void 0,je=Ve,pe=T.apply(ze,ie),pe}function qe(Ve){return je=Ve,fe=setTimeout(Te,O),bt?se(Ve):pe}function me(Ve){var ie=Ve-ke,ze=Ve-je,Le=O-ie;return ut?z(Le,re-ze):Le}function _e(Ve){var ie=Ve-ke,ze=Ve-je;return ke===void 0||ie>=O||ie<0||ut&&ze>=re}function Te(){var Ve=C();if(_e(Ve))return ht(Ve);fe=setTimeout(Te,me(Ve))}function ht(Ve){return fe=void 0,wt&&ue?se(Ve):(ue=Ae=void 0,pe)}function We(){fe!==void 0&&clearTimeout(fe),je=0,ue=ke=Ae=fe=void 0}function Ne(){return fe===void 0?pe:ht(C())}function he(){var Ve=C(),ie=_e(Ve);if(ue=arguments,Ae=this,ke=Ve,ie){if(fe===void 0)return qe(ke);if(ut)return clearTimeout(fe),fe=setTimeout(Te,O),se(ke)}return fe===void 0&&(fe=setTimeout(Te,O)),pe}return he.cancel=We,he.flush=Ne,he}Qe.exports=L},77813:function(Qe){function te(m,v){return m===v||m!==m&&v!==v}Qe.exports=te},6557:function(Qe){function te(m){return m}Qe.exports=te},35694:function(Qe,te,m){var v=m(9454),C=m(37005),l=Object.prototype,$=l.hasOwnProperty,R=l.propertyIsEnumerable,z=v(function(){return arguments}())?v:function(L){return C(L)&&$.call(L,"callee")&&!R.call(L,"callee")};Qe.exports=z},1469:function(Qe){var te=Array.isArray;Qe.exports=te},98612:function(Qe,te,m){var v=m(23560),C=m(41780);function l($){return $!=null&&C($.length)&&!v($)}Qe.exports=l},29246:function(Qe,te,m){var v=m(98612),C=m(37005);function l($){return C($)&&v($)}Qe.exports=l},44144:function(Qe,te,m){Qe=m.nmd(Qe);var v=m(55639),C=m(95062),l=te&&!te.nodeType&&te,$=l&&!0&&Qe&&!Qe.nodeType&&Qe,R=$&&$.exports===l,z=R?v.Buffer:void 0,L=z?z.isBuffer:void 0,T=L||C;Qe.exports=T},18446:function(Qe,te,m){var v=m(90939);function C(l,$){return v(l,$)}Qe.exports=C},23560:function(Qe,te,m){var v=m(44239),C=m(13218),l="[object AsyncFunction]",$="[object Function]",R="[object GeneratorFunction]",z="[object Proxy]";function L(T){if(!C(T))return!1;var O=v(T);return O==$||O==R||O==l||O==z}Qe.exports=L},41780:function(Qe){var te=9007199254740991;function m(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=te}Qe.exports=m},13218:function(Qe){function te(m){var v=typeof m;return m!=null&&(v=="object"||v=="function")}Qe.exports=te},37005:function(Qe){function te(m){return m!=null&&typeof m=="object"}Qe.exports=te},68630:function(Qe,te,m){var v=m(44239),C=m(85924),l=m(37005),$="[object Object]",R=Function.prototype,z=Object.prototype,L=R.toString,T=z.hasOwnProperty,O=L.call(Object);function F(ue){if(!l(ue)||v(ue)!=$)return!1;var Ae=C(ue);if(Ae===null)return!0;var re=T.call(Ae,"constructor")&&Ae.constructor;return typeof re=="function"&&re instanceof re&&L.call(re)==O}Qe.exports=F},33448:function(Qe,te,m){var v=m(44239),C=m(37005),l="[object Symbol]";function $(R){return typeof R=="symbol"||C(R)&&v(R)==l}Qe.exports=$},36719:function(Qe,te,m){var v=m(38749),C=m(7518),l=m(31167),$=l&&l.isTypedArray,R=$?C($):v;Qe.exports=R},3674:function(Qe,te,m){var v=m(14636),C=m(280),l=m(98612);function $(R){return l(R)?v(R):C(R)}Qe.exports=$},81704:function(Qe,te,m){var v=m(14636),C=m(35014),l=m(98612);function $(R){return l(R)?v(R,!0):C(R)}Qe.exports=$},96486:function(Qe,te,m){Qe=m.nmd(Qe);var v;(function(){var C,l="4.17.21",$=200,R="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",z="Expected a function",L="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",O=500,F="__lodash_placeholder__",ue=1,Ae=2,re=4,pe=1,fe=2,ke=1,je=2,bt=4,ut=8,wt=16,se=32,qe=64,me=128,_e=256,Te=512,ht=30,We="...",Ne=800,he=16,Ve=1,ie=2,ze=3,Le=1/0,Re=9007199254740991,st=17976931348623157e292,vt=0/0,Dt=4294967295,ar=Dt-1,$t=Dt>>>1,ur=[["ary",me],["bind",ke],["bindKey",je],["curry",ut],["curryRight",wt],["flip",Te],["partial",se],["partialRight",qe],["rearg",_e]],we="[object Arguments]",At="[object Array]",nt="[object AsyncFunction]",Lt="[object Boolean]",St="[object Date]",Ut="[object DOMException]",lt="[object Error]",Et="[object Function]",Zt="[object GeneratorFunction]",Be="[object Map]",He="[object Number]",ft="[object Null]",Z="[object Object]",J="[object Promise]",K="[object Proxy]",B="[object RegExp]",j="[object Set]",ee="[object String]",W="[object Symbol]",De="[object Undefined]",ot="[object WeakMap]",Wt="[object WeakSet]",Ct="[object ArrayBuffer]",Qt="[object DataView]",ir="[object Float32Array]",Er="[object Float64Array]",Qr="[object Int8Array]",Mt="[object Int16Array]",br="[object Int32Array]",Nt="[object Uint8Array]",Pr="[object Uint8ClampedArray]",_r="[object Uint16Array]",kr="[object Uint32Array]",zt=/\b__p \+= '';/g,mr=/\b(__p \+=) '' \+/g,Or=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Nr=/[&<>"']/g,Xe=RegExp(X.source),xe=RegExp(Nr.source),rt=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,cr=/<%=([\s\S]+?)%>/g,Ar=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lr=/^\w*$/,sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/[\\^$.*+?()[\]{}|]/g,Gr=RegExp(Ge.source),on=/^\s+/,cn=/\s/,Dn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ci=/\{\n\/\* \[wrapped with (.+)\] \*/,ia=/,? & /,Vi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,On=/[()=,{}\[\]\/\s]/,ji=/\\(\\)?/g,oi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hi=/\w*$/,Ca=/^[-+]0x[0-9a-f]+$/i,Wi=/^0b[01]+$/i,jo=/^\[object .+?Constructor\]$/,uo=/^0o[0-7]+$/i,Pn=/^(?:0|[1-9]\d*)$/,bn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oi=/($^)/,di=/['\n\r\u2028\u2029\\]/g,va="\\ud800-\\udfff",wa="\\u0300-\\u036f",Aa="\\ufe20-\\ufe2f",Ta="\\u20d0-\\u20ff",ma=wa+Aa+Ta,Da="\\u2700-\\u27bf",Uo="a-z\\xdf-\\xf6\\xf8-\\xff",ha="\\xac\\xb1\\xd7\\xf7",xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eo="\\u2000-\\u206f",Ee=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Po="A-Z\\xc0-\\xd6\\xd8-\\xde",Hs="\\ufe0e\\ufe0f",no=ha+xa+eo+Ee,qo="['\u2019]",os="["+va+"]",Go="["+no+"]",Wo="["+ma+"]",za="\\d+",Tu="["+Da+"]",Cs="["+Uo+"]",Zs="[^"+va+no+za+Da+Uo+Po+"]",ts="\\ud83c[\\udffb-\\udfff]",Vs="(?:"+Wo+"|"+ts+")",ou="[^"+va+"]",ls="(?:\\ud83c[\\udde6-\\uddff]){2}",Di="[\\ud800-\\udbff][\\udc00-\\udfff]",As="["+Po+"]",Rs="\\u200d",vr="(?:"+Cs+"|"+Zs+")",zr="(?:"+As+"|"+Zs+")",lr="(?:"+qo+"(?:d|ll|m|re|s|t|ve))?",Zr="(?:"+qo+"(?:D|LL|M|RE|S|T|VE))?",Hn=Vs+"?",Hr="["+Hs+"]?",Bo="(?:"+Rs+"(?:"+[ou,ls,Di].join("|")+")"+Hr+Hn+")*",Yr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",at=Hr+Hn+Bo,hr="(?:"+[Tu,ls,Di].join("|")+")"+at,er="(?:"+[ou+Wo+"?",Wo,ls,Di,os].join("|")+")",dn=RegExp(qo,"g"),mn=RegExp(Wo,"g"),Vn=RegExp(ts+"(?="+ts+")|"+er+at,"g"),ni=RegExp([As+"?"+Cs+"+"+lr+"(?="+[Go,As,"$"].join("|")+")",zr+"+"+Zr+"(?="+[Go,As+vr,"$"].join("|")+")",As+"?"+vr+"+"+lr,As+"+"+Zr,pr,Yr,za,hr].join("|"),"g"),si=RegExp("["+Rs+va+ma+Hs+"]"),Si=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rr=-1,Mn={};Mn[ir]=Mn[Er]=Mn[Qr]=Mn[Mt]=Mn[br]=Mn[Nt]=Mn[Pr]=Mn[_r]=Mn[kr]=!0,Mn[we]=Mn[At]=Mn[Ct]=Mn[Lt]=Mn[Qt]=Mn[St]=Mn[lt]=Mn[Et]=Mn[Be]=Mn[He]=Mn[Z]=Mn[B]=Mn[j]=Mn[ee]=Mn[ot]=!1;var pn={};pn[we]=pn[At]=pn[Ct]=pn[Qt]=pn[Lt]=pn[St]=pn[ir]=pn[Er]=pn[Qr]=pn[Mt]=pn[br]=pn[Be]=pn[He]=pn[Z]=pn[B]=pn[j]=pn[ee]=pn[W]=pn[Nt]=pn[Pr]=pn[_r]=pn[kr]=!0,pn[lt]=pn[Et]=pn[ot]=!1;var wn={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ei={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ji={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yi=parseFloat,oa=parseInt,Ma=typeof m.g=="object"&&m.g&&m.g.Object===Object&&m.g,k=typeof self=="object"&&self&&self.Object===Object&&self,de=Ma||k||Function("return this")(),yt=te&&!te.nodeType&&te,Ue=yt&&!0&&Qe&&!Qe.nodeType&&Qe,nr=Ue&&Ue.exports===yt,Mr=nr&&Ma.process,qr=function(){try{var Qn=Ue&&Ue.require&&Ue.require("util").types;return Qn||Mr&&Mr.binding&&Mr.binding("util")}catch(fa){}}(),kn=qr&&qr.isArrayBuffer,Nn=qr&&qr.isDate,Mi=qr&&qr.isMap,Bi=qr&&qr.isRegExp,io=qr&&qr.isSet,co=qr&&qr.isTypedArray;function Sa(Qn,fa,$i){switch($i.length){case 0:return Qn.call(fa);case 1:return Qn.call(fa,$i[0]);case 2:return Qn.call(fa,$i[0],$i[1]);case 3:return Qn.call(fa,$i[0],$i[1],$i[2])}return Qn.apply(fa,$i)}function Ko(Qn,fa,$i,$o){for(var lo=-1,Es=Qn==null?0:Qn.length;++lo<Es;){var tl=Qn[lo];fa($o,tl,$i(tl),Qn)}return $o}function wo(Qn,fa){for(var $i=-1,$o=Qn==null?0:Qn.length;++$i<$o&&fa(Qn[$i],$i,Qn)!==!1;);return Qn}function Oo(Qn,fa){for(var $i=Qn==null?0:Qn.length;$i--&&fa(Qn[$i],$i,Qn)!==!1;);return Qn}function Ho(Qn,fa){for(var $i=-1,$o=Qn==null?0:Qn.length;++$i<$o;)if(!fa(Qn[$i],$i,Qn))return!1;return!0}function Io(Qn,fa){for(var $i=-1,$o=Qn==null?0:Qn.length,lo=0,Es=[];++$i<$o;){var tl=Qn[$i];fa(tl,$i,Qn)&&(Es[lo++]=tl)}return Es}function qs(Qn,fa){var $i=Qn==null?0:Qn.length;return!!$i&&yl(Qn,fa,0)>-1}function Il(Qn,fa,$i){for(var $o=-1,lo=Qn==null?0:Qn.length;++$o<lo;)if($i(fa,Qn[$o]))return!0;return!1}function Ao(Qn,fa){for(var $i=-1,$o=Qn==null?0:Qn.length,lo=Array($o);++$i<$o;)lo[$i]=fa(Qn[$i],$i,Qn);return lo}function Va(Qn,fa){for(var $i=-1,$o=fa.length,lo=Qn.length;++$i<$o;)Qn[lo+$i]=fa[$i];return Qn}function gs(Qn,fa,$i,$o){var lo=-1,Es=Qn==null?0:Qn.length;for($o&&Es&&($i=Qn[++lo]);++lo<Es;)$i=fa($i,Qn[lo],lo,Qn);return $i}function Ws(Qn,fa,$i,$o){var lo=Qn==null?0:Qn.length;for($o&&lo&&($i=Qn[--lo]);lo--;)$i=fa($i,Qn[lo],lo,Qn);return $i}function bs(Qn,fa){for(var $i=-1,$o=Qn==null?0:Qn.length;++$i<$o;)if(fa(Qn[$i],$i,Qn))return!0;return!1}var Ps=_l("length");function Xs(Qn){return Qn.split("")}function gl(Qn){return Qn.match(Vi)||[]}function jf(Qn,fa,$i){var $o;return $i(Qn,function(lo,Es,tl){if(fa(lo,Es,tl))return $o=Es,!1}),$o}function Mu(Qn,fa,$i,$o){for(var lo=Qn.length,Es=$i+($o?1:-1);$o?Es--:++Es<lo;)if(fa(Qn[Es],Es,Qn))return Es;return-1}function yl(Qn,fa,$i){return fa===fa?tc(Qn,fa,$i):Mu(Qn,Lc,$i)}function lc(Qn,fa,$i,$o){for(var lo=$i-1,Es=Qn.length;++lo<Es;)if($o(Qn[lo],fa))return lo;return-1}function Lc(Qn){return Qn!==Qn}function dh(Qn,fa){var $i=Qn==null?0:Qn.length;return $i?wf(Qn,fa)/$i:vt}function _l(Qn){return function(fa){return fa==null?C:fa[Qn]}}function Us(Qn){return function(fa){return Qn==null?C:Qn[fa]}}function th(Qn,fa,$i,$o,lo){return lo(Qn,function(Es,tl,al){$i=$o?($o=!1,Es):fa($i,Es,tl,al)}),$i}function kf(Qn,fa){var $i=Qn.length;for(Qn.sort(fa);$i--;)Qn[$i]=Qn[$i].value;return Qn}function wf(Qn,fa){for(var $i,$o=-1,lo=Qn.length;++$o<lo;){var Es=fa(Qn[$o]);Es!==C&&($i=$i===C?Es:$i+Es)}return $i}function lf(Qn,fa){for(var $i=-1,$o=Array(Qn);++$i<Qn;)$o[$i]=fa($i);return $o}function gd(Qn,fa){return Ao(fa,function($i){return[$i,Qn[$i]]})}function Kh(Qn){return Qn&&Qn.slice(0,ff(Qn)+1).replace(on,"")}function yc(Qn){return function(fa){return Qn(fa)}}function Eh(Qn,fa){return Ao(fa,function($i){return Qn[$i]})}function cf(Qn,fa){return Qn.has(fa)}function Af(Qn,fa){for(var $i=-1,$o=Qn.length;++$i<$o&&yl(fa,Qn[$i],0)>-1;);return $i}function _f(Qn,fa){for(var $i=Qn.length;$i--&&yl(fa,Qn[$i],0)>-1;);return $i}function Dc(Qn,fa){for(var $i=Qn.length,$o=0;$i--;)Qn[$i]===fa&&++$o;return $o}var Ff=Us(wn),Zl=Us(Kn);function kc(Qn){return"\\"+Ji[Qn]}function ad(Qn,fa){return Qn==null?C:Qn[fa]}function rh(Qn){return si.test(Qn)}function od(Qn){return Si.test(Qn)}function Yo(Qn){for(var fa,$i=[];!(fa=Qn.next()).done;)$i.push(fa.value);return $i}function Gs(Qn){var fa=-1,$i=Array(Qn.size);return Qn.forEach(function($o,lo){$i[++fa]=[lo,$o]}),$i}function Kl(Qn,fa){return function($i){return Qn(fa($i))}}function dl(Qn,fa){for(var $i=-1,$o=Qn.length,lo=0,Es=[];++$i<$o;){var tl=Qn[$i];(tl===fa||tl===F)&&(Qn[$i]=F,Es[lo++]=$i)}return Es}function su(Qn){var fa=-1,$i=Array(Qn.size);return Qn.forEach(function($o){$i[++fa]=$o}),$i}function Fc(Qn){var fa=-1,$i=Array(Qn.size);return Qn.forEach(function($o){$i[++fa]=[$o,$o]}),$i}function tc(Qn,fa,$i){for(var $o=$i-1,lo=Qn.length;++$o<lo;)if(Qn[$o]===fa)return $o;return-1}function Tf(Qn,fa,$i){for(var $o=$i+1;$o--;)if(Qn[$o]===fa)return $o;return $o}function _c(Qn){return rh(Qn)?Yh(Qn):Ps(Qn)}function Hl(Qn){return rh(Qn)?Uh(Qn):Xs(Qn)}function ff(Qn){for(var fa=Qn.length;fa--&&cn.test(Qn.charAt(fa)););return fa}var xc=Us(Ei);function Yh(Qn){for(var fa=Vn.lastIndex=0;Vn.test(Qn);)++fa;return fa}function Uh(Qn){return Qn.match(Vn)||[]}function Gc(Qn){return Qn.match(ni)||[]}var Mf=function Qn(fa){fa=fa==null?de:nh.defaults(de.Object(),fa,nh.pick(de,qi));var $i=fa.Array,$o=fa.Date,lo=fa.Error,Es=fa.Function,tl=fa.Math,al=fa.Object,Tl=fa.RegExp,Lh=fa.String,xf=fa.TypeError,Qh=$i.prototype,$h=Es.prototype,Ul=al.prototype,Rl=fa["__core-js_shared__"],ol=$h.toString,uu=Ul.hasOwnProperty,Bc=0,cc=function(){var _=/[^.]+$/.exec(Rl&&Rl.keys&&Rl.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),ao=Ul.toString,Ml=ol.call(al),Hf=de._,fl=Tl("^"+ol.call(uu).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=nr?fa.Buffer:C,Ll=fa.Symbol,jh=fa.Uint8Array,Qa=Vl?Vl.allocUnsafe:C,Yl=Kl(al.getPrototypeOf,al),Vf=al.create,ih=Ul.propertyIsEnumerable,Vu=Qh.splice,hf=Ll?Ll.isConcatSpreadable:C,Hh=Ll?Ll.iterator:C,bc=Ll?Ll.toStringTag:C,Ec=function(){try{var _=Gd(al,"defineProperty");return _({},"",{}),_}catch(N){}}(),ah=fa.clearTimeout!==de.clearTimeout&&fa.clearTimeout,Wc=$o&&$o.now!==de.Date.now&&$o.now,Dh=fa.setTimeout!==de.setTimeout&&fa.setTimeout,Sc=tl.ceil,Vh=tl.floor,Ql=al.getOwnPropertySymbols,gu=Vl?Vl.isBuffer:C,Ks=fa.isFinite,Gf=Qh.join,Bf=Kl(al.keys,al),eu=tl.max,Pl=tl.min,Xc=$o.now,Nc=fa.parseInt,Jl=tl.random,fc=Qh.reverse,oo=Gd(fa,"DataView"),ko=Gd(fa,"Map"),nu=Gd(fa,"Promise"),ql=Gd(fa,"Set"),xl=Gd(fa,"WeakMap"),mu=Gd(al,"create"),Ku=xl&&new xl,Kc={},Gh=Bl(oo),Yu=Bl(ko),bl=Bl(nu),yd=Bl(ql),ph=Bl(xl),Cc=Ll?Ll.prototype:C,Yc=Cc?Cc.valueOf:C,Dl=Cc?Cc.toString:C;function Ur(_){if(bh(_)&&!Ou(_)&&!(_ instanceof du)){if(_ instanceof Qo)return _;if(uu.call(_,"__wrapped__"))return Sf(_)}return new Qo(_)}var kl=function(){function _(){}return function(N){if(!qf(N))return{};if(Vf)return Vf(N);_.prototype=N;var Se=new _;return _.prototype=C,Se}}();function Vo(){}function Qo(_,N){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!N,this.__index__=0,this.__values__=C}Ur.templateSettings={escape:rt,evaluate:kt,interpolate:cr,variable:"",imports:{_:Ur}},Ur.prototype=Vo.prototype,Ur.prototype.constructor=Ur,Qo.prototype=kl(Vo.prototype),Qo.prototype.constructor=Qo;function du(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function kh(){var _=new du(this.__wrapped__);return _.__actions__=To(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=To(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=To(this.__views__),_}function Wf(){if(this.__filtered__){var _=new du(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function zc(){var _=this.__wrapped__.value(),N=this.__dir__,Se=Ou(_),Bt=N<0,wr=Se?_.length:0,nn=aa(0,wr,this.__views__),Wn=nn.start,fi=nn.end,Ri=fi-Wn,Xa=Bt?fi:Wn-1,Ka=this.__iteratees__,So=Ka.length,Ms=0,bu=Pl(Ri,this.__takeCount__);if(!Se||!Bt&&wr==Ri&&bu==Ri)return uh(_,this.__actions__);var ju=[];e:for(;Ri--&&Ms<bu;){Xa+=N;for(var zl=-1,Hu=_[Xa];++zl<So;){var jl=Ka[zl],sc=jl.iteratee,fh=jl.type,Ud=sc(Hu);if(fh==ie)Hu=Ud;else if(!Ud){if(fh==Ve)continue e;break e}}ju[Ms++]=Hu}return ju}du.prototype=kl(Vo.prototype),du.prototype.constructor=du;function df(_){var N=-1,Se=_==null?0:_.length;for(this.clear();++N<Se;){var Bt=_[N];this.set(Bt[0],Bt[1])}}function rc(){this.__data__=mu?mu(null):{},this.size=0}function ys(_){var N=this.has(_)&&delete this.__data__[_];return this.size-=N?1:0,N}function bf(_){var N=this.__data__;if(mu){var Se=N[_];return Se===T?C:Se}return uu.call(N,_)?N[_]:C}function Xf(_){var N=this.__data__;return mu?N[_]!==C:uu.call(N,_)}function rl(_,N){var Se=this.__data__;return this.size+=this.has(_)?0:1,Se[_]=mu&&N===C?T:N,this}df.prototype.clear=rc,df.prototype.delete=ys,df.prototype.get=bf,df.prototype.has=Xf,df.prototype.set=rl;function wc(_){var N=-1,Se=_==null?0:_.length;for(this.clear();++N<Se;){var Bt=_[N];this.set(Bt[0],Bt[1])}}function Zc(){this.__data__=[],this.size=0}function sd(_){var N=this.__data__,Se=na(N,_);if(Se<0)return!1;var Bt=N.length-1;return Se==Bt?N.pop():Vu.call(N,Se,1),--this.size,!0}function Qc(_){var N=this.__data__,Se=na(N,_);return Se<0?C:N[Se][1]}function f(_){return na(this.__data__,_)>-1}function g(_,N){var Se=this.__data__,Bt=na(Se,_);return Bt<0?(++this.size,Se.push([_,N])):Se[Bt][1]=N,this}wc.prototype.clear=Zc,wc.prototype.delete=sd,wc.prototype.get=Qc,wc.prototype.has=f,wc.prototype.set=g;function p(_){var N=-1,Se=_==null?0:_.length;for(this.clear();++N<Se;){var Bt=_[N];this.set(Bt[0],Bt[1])}}function E(){this.size=0,this.__data__={hash:new df,map:new(ko||wc),string:new df}}function Y(_){var N=cd(this,_).delete(_);return this.size-=N?1:0,N}function ye(_){return cd(this,_).get(_)}function Pe(_){return cd(this,_).has(_)}function ct(_,N){var Se=cd(this,_),Bt=Se.size;return Se.set(_,N),this.size+=Se.size==Bt?0:1,this}p.prototype.clear=E,p.prototype.delete=Y,p.prototype.get=ye,p.prototype.has=Pe,p.prototype.set=ct;function Vt(_){var N=-1,Se=_==null?0:_.length;for(this.__data__=new p;++N<Se;)this.add(_[N])}function fr(_){return this.__data__.set(_,T),this}function Ir(_){return this.__data__.has(_)}Vt.prototype.add=Vt.prototype.push=fr,Vt.prototype.has=Ir;function Dr(_){var N=this.__data__=new wc(_);this.size=N.size}function jr(){this.__data__=new wc,this.size=0}function En(_){var N=this.__data__,Se=N.delete(_);return this.size=N.size,Se}function gn(_){return this.__data__.get(_)}function Bn(_){return this.__data__.has(_)}function fn(_,N){var Se=this.__data__;if(Se instanceof wc){var Bt=Se.__data__;if(!ko||Bt.length<$-1)return Bt.push([_,N]),this.size=++Se.size,this;Se=this.__data__=new p(Bt)}return Se.set(_,N),this.size=Se.size,this}Dr.prototype.clear=jr,Dr.prototype.delete=En,Dr.prototype.get=gn,Dr.prototype.has=Bn,Dr.prototype.set=fn;function Fn(_,N){var Se=Ou(_),Bt=!Se&&oc(_),wr=!Se&&!Bt&&bd(_),nn=!Se&&!Bt&&!wr&&rp(_),Wn=Se||Bt||wr||nn,fi=Wn?lf(_.length,Lh):[],Ri=fi.length;for(var Xa in _)(N||uu.call(_,Xa))&&!(Wn&&(Xa=="length"||wr&&(Xa=="offset"||Xa=="parent")||nn&&(Xa=="buffer"||Xa=="byteLength"||Xa=="byteOffset")||$a(Xa,Ri)))&&fi.push(Xa);return fi}function jn(_){var N=_.length;return N?_[Xi(0,N-1)]:C}function vi(_,N){return zs(To(_),rs(N,0,_.length))}function ki(_){return zs(To(_))}function Ti(_,N,Se){(Se!==C&&!Mh(_[N],Se)||Se===C&&!(N in _))&&No(_,N,Se)}function Fi(_,N,Se){var Bt=_[N];(!(uu.call(_,N)&&Mh(Bt,Se))||Se===C&&!(N in _))&&No(_,N,Se)}function na(_,N){for(var Se=_.length;Se--;)if(Mh(_[Se][0],N))return Se;return-1}function ka(_,N,Se,Bt){return Jo(_,function(wr,nn,Wn){N(Bt,wr,Se(wr),Wn)}),Bt}function Na(_,N){return _&&Ro(N,ch(N),_)}function po(_,N){return _&&Ro(N,Xh(N),_)}function No(_,N,Se){N=="__proto__"&&Ec?Ec(_,N,{configurable:!0,enumerable:!0,value:Se,writable:!0}):_[N]=Se}function is(_,N){for(var Se=-1,Bt=N.length,wr=$i(Bt),nn=_==null;++Se<Bt;)wr[Se]=nn?C:Uv(_,N[Se]);return wr}function rs(_,N,Se){return _===_&&(Se!==C&&(_=_<=Se?_:Se),N!==C&&(_=_>=N?_:N)),_}function Ls(_,N,Se,Bt,wr,nn){var Wn,fi=N&ue,Ri=N&Ae,Xa=N&re;if(Se&&(Wn=wr?Se(_,Bt,wr,nn):Se(_)),Wn!==C)return Wn;if(!qf(_))return _;var Ka=Ou(_);if(Ka){if(Wn=Ea(_),!fi)return To(_,Wn)}else{var So=Ci(_),Ms=So==Et||So==Zt;if(bd(_))return Ke(_,fi);if(So==Z||So==we||Ms&&!wr){if(Wn=Ri||Ms?{}:Pa(_),!fi)return Ri?ps(_,po(Wn,_)):fs(_,Na(Wn,_))}else{if(!pn[So])return wr?_:{};Wn=Ra(_,So,fi)}}nn||(nn=new Dr);var bu=nn.get(_);if(bu)return bu;nn.set(_,Wn),Sp(_)?_.forEach(function(Hu){Wn.add(Ls(Hu,N,Se,Hu,_,nn))}):Bv(_)&&_.forEach(function(Hu,jl){Wn.set(jl,Ls(Hu,N,Se,jl,_,nn))});var ju=Xa?Ri?xd:Dd:Ri?Xh:ch,zl=Ka?C:ju(_);return wo(zl||_,function(Hu,jl){zl&&(jl=Hu,Hu=_[jl]),Fi(Wn,jl,Ls(Hu,N,Se,jl,_,nn))}),Wn}function vo(_){var N=ch(_);return function(Se){return ds(Se,_,N)}}function ds(_,N,Se){var Bt=Se.length;if(_==null)return!Bt;for(_=al(_);Bt--;){var wr=Se[Bt],nn=N[wr],Wn=_[wr];if(Wn===C&&!(wr in _)||!nn(Wn))return!1}return!0}function Ns(_,N,Se){if(typeof _!="function")throw new xf(z);return Bs(function(){_.apply(C,Se)},N)}function cs(_,N,Se,Bt){var wr=-1,nn=qs,Wn=!0,fi=_.length,Ri=[],Xa=N.length;if(!fi)return Ri;Se&&(N=Ao(N,yc(Se))),Bt?(nn=Il,Wn=!1):N.length>=$&&(nn=cf,Wn=!1,N=new Vt(N));e:for(;++wr<fi;){var Ka=_[wr],So=Se==null?Ka:Se(Ka);if(Ka=Bt||Ka!==0?Ka:0,Wn&&So===So){for(var Ms=Xa;Ms--;)if(N[Ms]===So)continue e;Ri.push(Ka)}else nn(N,So,Bt)||Ri.push(Ka)}return Ri}var Jo=xu(qu),$s=xu(Tc,!0);function ws(_,N){var Se=!0;return Jo(_,function(Bt,wr,nn){return Se=!!N(Bt,wr,nn),Se}),Se}function _s(_,N,Se){for(var Bt=-1,wr=_.length;++Bt<wr;){var nn=_[Bt],Wn=N(nn);if(Wn!=null&&(fi===C?Wn===Wn&&!Td(Wn):Se(Wn,fi)))var fi=Wn,Ri=nn}return Ri}function El(_,N,Se,Bt){var wr=_.length;for(Se=Js(Se),Se<0&&(Se=-Se>wr?0:wr+Se),Bt=Bt===C||Bt>wr?wr:Js(Bt),Bt<0&&(Bt+=wr),Bt=Se>Bt?0:np(Bt);Se<Bt;)_[Se++]=N;return _}function nl(_,N){var Se=[];return Jo(_,function(Bt,wr,nn){N(Bt,wr,nn)&&Se.push(Bt)}),Se}function Qu(_,N,Se,Bt,wr){var nn=-1,Wn=_.length;for(Se||(Se=Ha),wr||(wr=[]);++nn<Wn;){var fi=_[nn];N>0&&Se(fi)?N>1?Qu(fi,N-1,Se,Bt,wr):Va(wr,fi):Bt||(wr[wr.length]=fi)}return wr}var Ac=cu(),Ju=cu(!0);function qu(_,N){return _&&Ac(_,N,ch)}function Tc(_,N){return _&&Ju(_,N,ch)}function ec(_,N){return Io(N,function(Se){return Ed(_[Se])})}function Pf(_,N){N=dc(N,_);for(var Se=0,Bt=N.length;_!=null&&Se<Bt;)_=_[Gu(N[Se++])];return Se&&Se==Bt?_:C}function Ef(_,N,Se){var Bt=N(_);return Ou(_)?Bt:Va(Bt,Se(_))}function $l(_){return _==null?_===C?De:ft:bc&&bc in al(_)?jt(_):Zo(_)}function Uc(_,N){return _>N}function Jh(_,N){return _!=null&&uu.call(_,N)}function qh(_,N){return _!=null&&N in al(_)}function Sh(_,N,Se){return _>=Pl(N,Se)&&_<eu(N,Se)}function Of(_,N,Se){for(var Bt=Se?Il:qs,wr=_[0].length,nn=_.length,Wn=nn,fi=$i(nn),Ri=1/0,Xa=[];Wn--;){var Ka=_[Wn];Wn&&N&&(Ka=Ao(Ka,yc(N))),Ri=Pl(Ka.length,Ri),fi[Wn]=!Se&&(N||wr>=120&&Ka.length>=120)?new Vt(Wn&&Ka):C}Ka=_[0];var So=-1,Ms=fi[0];e:for(;++So<wr&&Xa.length<Ri;){var bu=Ka[So],ju=N?N(bu):bu;if(bu=Se||bu!==0?bu:0,!(Ms?cf(Ms,ju):Bt(Xa,ju,Se))){for(Wn=nn;--Wn;){var zl=fi[Wn];if(!(zl?cf(zl,ju):Bt(_[Wn],ju,Se)))continue e}Ms&&Ms.push(ju),Xa.push(bu)}}return Xa}function Ch(_,N,Se,Bt){return qu(_,function(wr,nn,Wn){N(Bt,Se(wr),nn,Wn)}),Bt}function pf(_,N,Se){N=dc(N,_),_=Oa(_,N);var Bt=_==null?_:_[Gu(it(N))];return Bt==null?C:Sa(Bt,_,Se)}function oh(_){return bh(_)&&$l(_)==we}function Jc(_){return bh(_)&&$l(_)==Ct}function nc(_){return bh(_)&&$l(_)==St}function ic(_,N,Se,Bt,wr){return _===N?!0:_==null||N==null||!bh(_)&&!bh(N)?_!==_&&N!==N:wh(_,N,Se,Bt,ic,wr)}function wh(_,N,Se,Bt,wr,nn){var Wn=Ou(_),fi=Ou(N),Ri=Wn?At:Ci(_),Xa=fi?At:Ci(N);Ri=Ri==we?Z:Ri,Xa=Xa==we?Z:Xa;var Ka=Ri==Z,So=Xa==Z,Ms=Ri==Xa;if(Ms&&bd(_)){if(!bd(N))return!1;Wn=!0,Ka=!1}if(Ms&&!Ka)return nn||(nn=new Dr),Wn||rp(_)?Cd(_,N,Se,Bt,wr,nn):ld(_,N,Ri,Se,Bt,wr,nn);if(!(Se&pe)){var bu=Ka&&uu.call(_,"__wrapped__"),ju=So&&uu.call(N,"__wrapped__");if(bu||ju){var zl=bu?_.value():_,Hu=ju?N.value():N;return nn||(nn=new Dr),wr(zl,Hu,Se,Bt,nn)}}return Ms?(nn||(nn=new Dr),gp(_,N,Se,Bt,wr,nn)):!1}function Fh(_){return bh(_)&&Ci(_)==Be}function Du(_,N,Se,Bt){var wr=Se.length,nn=wr,Wn=!Bt;if(_==null)return!nn;for(_=al(_);wr--;){var fi=Se[wr];if(Wn&&fi[2]?fi[1]!==_[fi[0]]:!(fi[0]in _))return!1}for(;++wr<nn;){fi=Se[wr];var Ri=fi[0],Xa=_[Ri],Ka=fi[1];if(Wn&&fi[2]){if(Xa===C&&!(Ri in _))return!1}else{var So=new Dr;if(Bt)var Ms=Bt(Xa,Ka,Ri,_,N,So);if(!(Ms===C?ic(Ka,Xa,pe|fe,Bt,So):Ms))return!1}}return!0}function yu(_){if(!qf(_)||La(_))return!1;var N=Ed(_)?fl:jo;return N.test(Bl(_))}function qc(_){return bh(_)&&$l(_)==B}function sh(_){return bh(_)&&Ci(_)==j}function vh(_){return bh(_)&&Jd(_.length)&&!!Mn[$l(_)]}function Nf(_){return typeof _=="function"?_:_==null?Zd:typeof _=="object"?Ou(_)?Br(_[0],_[1]):oe(_):Im(_)}function mh(_){if(!_a(_))return Bf(_);var N=[];for(var Se in al(_))uu.call(_,Se)&&Se!="constructor"&&N.push(Se);return N}function If(_){if(!qf(_))return sa(_);var N=_a(_),Se=[];for(var Bt in _)Bt=="constructor"&&(N||!uu.call(_,Bt))||Se.push(Bt);return Se}function Rf(_,N){return _<N}function vf(_,N){var Se=-1,Bt=Wh(_)?$i(_.length):[];return Jo(_,function(wr,nn,Wn){Bt[++Se]=N(wr,nn,Wn)}),Bt}function oe(_){var N=Vd(_);return N.length==1&&N[0][2]?xo(N[0][0],N[0][1]):function(Se){return Se===_||Du(Se,_,N)}}function Br(_,N){return Ua(_)&&Ga(N)?xo(Gu(_),N):function(Se){var Bt=Uv(Se,_);return Bt===C&&Bt===N?vv(Se,_):ic(N,Bt,pe|fe)}}function xt(_,N,Se,Bt,wr){_!==N&&Ac(N,function(nn,Wn){if(wr||(wr=new Dr),qf(nn))mt(_,N,Wn,Se,xt,Bt,wr);else{var fi=Bt?Bt(Ia(_,Wn),nn,Wn+"",_,N,wr):C;fi===C&&(fi=nn),Ti(_,Wn,fi)}},Xh)}function mt(_,N,Se,Bt,wr,nn,Wn){var fi=Ia(_,Se),Ri=Ia(N,Se),Xa=Wn.get(Ri);if(Xa){Ti(_,Se,Xa);return}var Ka=nn?nn(fi,Ri,Se+"",_,N,Wn):C,So=Ka===C;if(So){var Ms=Ou(Ri),bu=!Ms&&bd(Ri),ju=!Ms&&!bu&&rp(Ri);Ka=Ri,Ms||bu||ju?Ou(fi)?Ka=fi:yf(fi)?Ka=To(fi):bu?(So=!1,Ka=Ke(Ri,!0)):ju?(So=!1,Ka=mi(Ri,!0)):Ka=[]:_p(Ri)||oc(Ri)?(Ka=fi,oc(fi)?Ka=ip(fi):(!qf(fi)||Ed(fi))&&(Ka=Pa(Ri))):So=!1}So&&(Wn.set(Ri,Ka),wr(Ka,Ri,Bt,nn,Wn),Wn.delete(Ri)),Ti(_,Se,Ka)}function Ht(_,N){var Se=_.length;if(Se)return N+=N<0?Se:0,$a(N,Se)?_[N]:C}function or(_,N,Se){N.length?N=Ao(N,function(nn){return Ou(nn)?function(Wn){return Pf(Wn,nn.length===1?nn[0]:nn)}:nn}):N=[Zd];var Bt=-1;N=Ao(N,yc(Fs()));var wr=vf(_,function(nn,Wn,fi){var Ri=Ao(N,function(Xa){return Xa(nn)});return{criteria:Ri,index:++Bt,value:nn}});return kf(wr,function(nn,Wn){return bi(nn,Wn,Se)})}function en(_,N){return _n(_,N,function(Se,Bt){return vv(_,Bt)})}function _n(_,N,Se){for(var Bt=-1,wr=N.length,nn={};++Bt<wr;){var Wn=N[Bt],fi=Pf(_,Wn);Se(fi,Wn)&&lu(nn,dc(Wn,_),fi)}return nn}function Tn(_){return function(N){return Pf(N,_)}}function zn(_,N,Se,Bt){var wr=Bt?lc:yl,nn=-1,Wn=N.length,fi=_;for(_===N&&(N=To(N)),Se&&(fi=Ao(_,yc(Se)));++nn<Wn;)for(var Ri=0,Xa=N[nn],Ka=Se?Se(Xa):Xa;(Ri=wr(fi,Ka,Ri,Bt))>-1;)fi!==_&&Vu.call(fi,Ri,1),Vu.call(_,Ri,1);return _}function wi(_,N){for(var Se=_?N.length:0,Bt=Se-1;Se--;){var wr=N[Se];if(Se==Bt||wr!==nn){var nn=wr;$a(wr)?Vu.call(_,wr,1):ef(_,wr)}}return _}function Xi(_,N){return _+Vh(Jl()*(N-_+1))}function ba(_,N,Se,Bt){for(var wr=-1,nn=eu(Sc((N-_)/(Se||1)),0),Wn=$i(nn);nn--;)Wn[Bt?nn:++wr]=_,_+=Se;return Wn}function mo(_,N){var Se="";if(!_||N<1||N>Re)return Se;do N%2&&(Se+=_),N=Vh(N/2),N&&(_+=_);while(N);return Se}function Ja(_,N){return so(fo(_,N,Zd),_+"")}function Ds(_){return jn(Ol(_))}function Ts(_,N){var Se=Ol(_);return zs(Se,rs(N,0,Se.length))}function lu(_,N,Se,Bt){if(!qf(_))return _;N=dc(N,_);for(var wr=-1,nn=N.length,Wn=nn-1,fi=_;fi!=null&&++wr<nn;){var Ri=Gu(N[wr]),Xa=Se;if(Ri==="__proto__"||Ri==="constructor"||Ri==="prototype")return _;if(wr!=Wn){var Ka=fi[Ri];Xa=Bt?Bt(Ka,Ri,fi):C,Xa===C&&(Xa=qf(Ka)?Ka:$a(N[wr+1])?[]:{})}Fi(fi,Ri,Xa),fi=fi[Ri]}return _}var Iu=Ku?function(_,N){return Ku.set(_,N),_}:Zd,_u=Ec?function(_,N){return Ec(_,"toString",{configurable:!0,enumerable:!1,value:y0(N),writable:!0})}:Zd;function Mc(_){return zs(Ol(_))}function tu(_,N,Se){var Bt=-1,wr=_.length;N<0&&(N=-N>wr?0:wr+N),Se=Se>wr?wr:Se,Se<0&&(Se+=wr),wr=N>Se?0:Se-N>>>0,N>>>=0;for(var nn=$i(wr);++Bt<wr;)nn[Bt]=_[Bt+N];return nn}function Fl(_,N){var Se;return Jo(_,function(Bt,wr,nn){return Se=N(Bt,wr,nn),!Se}),!!Se}function Ys(_,N,Se){var Bt=0,wr=_==null?Bt:_.length;if(typeof N=="number"&&N===N&&wr<=$t){for(;Bt<wr;){var nn=Bt+wr>>>1,Wn=_[nn];Wn!==null&&!Td(Wn)&&(Se?Wn<=N:Wn<N)?Bt=nn+1:wr=nn}return wr}return ku(_,N,Zd,Se)}function ku(_,N,Se,Bt){var wr=0,nn=_==null?0:_.length;if(nn===0)return 0;N=Se(N);for(var Wn=N!==N,fi=N===null,Ri=Td(N),Xa=N===C;wr<nn;){var Ka=Vh((wr+nn)/2),So=Se(_[Ka]),Ms=So!==C,bu=So===null,ju=So===So,zl=Td(So);if(Wn)var Hu=Bt||ju;else Xa?Hu=ju&&(Bt||Ms):fi?Hu=ju&&Ms&&(Bt||!bu):Ri?Hu=ju&&Ms&&!bu&&(Bt||!zl):bu||zl?Hu=!1:Hu=Bt?So<=N:So<N;Hu?wr=Ka+1:nn=Ka}return Pl(nn,ar)}function Bu(_,N){for(var Se=-1,Bt=_.length,wr=0,nn=[];++Se<Bt;){var Wn=_[Se],fi=N?N(Wn):Wn;if(!Se||!Mh(fi,Ri)){var Ri=fi;nn[wr++]=Wn===0?0:Wn}}return nn}function Gl(_){return typeof _=="number"?_:Td(_)?vt:+_}function ru(_){if(typeof _=="string")return _;if(Ou(_))return Ao(_,ru)+"";if(Td(_))return Dl?Dl.call(_):"";var N=_+"";return N=="0"&&1/_==-Le?"-0":N}function pl(_,N,Se){var Bt=-1,wr=qs,nn=_.length,Wn=!0,fi=[],Ri=fi;if(Se)Wn=!1,wr=Il;else if(nn>=$){var Xa=N?null:Nh(_);if(Xa)return su(Xa);Wn=!1,wr=cf,Ri=new Vt}else Ri=N?[]:fi;e:for(;++Bt<nn;){var Ka=_[Bt],So=N?N(Ka):Ka;if(Ka=Se||Ka!==0?Ka:0,Wn&&So===So){for(var Ms=Ri.length;Ms--;)if(Ri[Ms]===So)continue e;N&&Ri.push(So),fi.push(Ka)}else wr(Ri,So,Se)||(Ri!==fi&&Ri.push(So),fi.push(Ka))}return fi}function ef(_,N){return N=dc(N,_),_=Oa(_,N),_==null||delete _[Gu(it(N))]}function Bh(_,N,Se,Bt){return lu(_,N,Se(Pf(_,N)),Bt)}function hc(_,N,Se,Bt){for(var wr=_.length,nn=Bt?wr:-1;(Bt?nn--:++nn<wr)&&N(_[nn],nn,_););return Se?tu(_,Bt?0:nn,Bt?nn+1:wr):tu(_,Bt?nn+1:0,Bt?wr:nn)}function uh(_,N){var Se=_;return Se instanceof du&&(Se=Se.value()),gs(N,function(Bt,wr){return wr.func.apply(wr.thisArg,Va([Bt],wr.args))},Se)}function Kf(_,N,Se){var Bt=_.length;if(Bt<2)return Bt?pl(_[0]):[];for(var wr=-1,nn=$i(Bt);++wr<Bt;)for(var Wn=_[wr],fi=-1;++fi<Bt;)fi!=wr&&(nn[wr]=cs(nn[wr]||Wn,_[fi],N,Se));return pl(Qu(nn,1),N,Se)}function gh(_,N,Se){for(var Bt=-1,wr=_.length,nn=N.length,Wn={};++Bt<wr;){var fi=Bt<nn?N[Bt]:C;Se(Wn,_[Bt],fi)}return Wn}function yh(_){return yf(_)?_:[]}function Yf(_){return typeof _=="function"?_:Zd}function dc(_,N){return Ou(_)?_:Ua(_,N)?[_]:wu(of(_))}var ne=Ja;function Me(_,N,Se){var Bt=_.length;return Se=Se===C?Bt:Se,!N&&Se>=Bt?_:tu(_,N,Se)}var Oe=ah||function(_){return de.clearTimeout(_)};function Ke(_,N){if(N)return _.slice();var Se=_.length,Bt=Qa?Qa(Se):new _.constructor(Se);return _.copy(Bt),Bt}function pt(_){var N=new _.constructor(_.byteLength);return new jh(N).set(new jh(_)),N}function Pt(_,N){var Se=N?pt(_.buffer):_.buffer;return new _.constructor(Se,_.byteOffset,_.byteLength)}function Xr(_){var N=new _.constructor(_.source,Hi.exec(_));return N.lastIndex=_.lastIndex,N}function An(_){return Yc?al(Yc.call(_)):{}}function mi(_,N){var Se=N?pt(_.buffer):_.buffer;return new _.constructor(Se,_.byteOffset,_.length)}function un(_,N){if(_!==N){var Se=_!==C,Bt=_===null,wr=_===_,nn=Td(_),Wn=N!==C,fi=N===null,Ri=N===N,Xa=Td(N);if(!fi&&!Xa&&!nn&&_>N||nn&&Wn&&Ri&&!fi&&!Xa||Bt&&Wn&&Ri||!Se&&Ri||!wr)return 1;if(!Bt&&!nn&&!Xa&&_<N||Xa&&Se&&wr&&!Bt&&!nn||fi&&Se&&wr||!Wn&&wr||!Ri)return-1}return 0}function bi(_,N,Se){for(var Bt=-1,wr=_.criteria,nn=N.criteria,Wn=wr.length,fi=Se.length;++Bt<Wn;){var Ri=un(wr[Bt],nn[Bt]);if(Ri){if(Bt>=fi)return Ri;var Xa=Se[Bt];return Ri*(Xa=="desc"?-1:1)}}return _.index-N.index}function ga(_,N,Se,Bt){for(var wr=-1,nn=_.length,Wn=Se.length,fi=-1,Ri=N.length,Xa=eu(nn-Wn,0),Ka=$i(Ri+Xa),So=!Bt;++fi<Ri;)Ka[fi]=N[fi];for(;++wr<Wn;)(So||wr<nn)&&(Ka[Se[wr]]=_[wr]);for(;Xa--;)Ka[fi++]=_[wr++];return Ka}function ss(_,N,Se,Bt){for(var wr=-1,nn=_.length,Wn=-1,fi=Se.length,Ri=-1,Xa=N.length,Ka=eu(nn-fi,0),So=$i(Ka+Xa),Ms=!Bt;++wr<Ka;)So[wr]=_[wr];for(var bu=wr;++Ri<Xa;)So[bu+Ri]=N[Ri];for(;++Wn<fi;)(Ms||wr<nn)&&(So[bu+Se[Wn]]=_[wr++]);return So}function To(_,N){var Se=-1,Bt=_.length;for(N||(N=$i(Bt));++Se<Bt;)N[Se]=_[Se];return N}function Ro(_,N,Se,Bt){var wr=!Se;Se||(Se={});for(var nn=-1,Wn=N.length;++nn<Wn;){var fi=N[nn],Ri=Bt?Bt(Se[fi],_[fi],fi,Se,_):C;Ri===C&&(Ri=_[fi]),wr?No(Se,fi,Ri):Fi(Se,fi,Ri)}return Se}function fs(_,N){return Ro(_,Vr(_),N)}function ps(_,N){return Ro(_,Ln(_),N)}function zo(_,N){return function(Se,Bt){var wr=Ou(Se)?Ko:ka,nn=N?N():{};return wr(Se,_,Fs(Bt,2),nn)}}function ks(_){return Ja(function(N,Se){var Bt=-1,wr=Se.length,nn=wr>1?Se[wr-1]:C,Wn=wr>2?Se[2]:C;for(nn=_.length>3&&typeof nn=="function"?(wr--,nn):C,Wn&&ya(Se[0],Se[1],Wn)&&(nn=wr<3?C:nn,wr=1),N=al(N);++Bt<wr;){var fi=Se[Bt];fi&&_(N,fi,Bt,nn)}return N})}function xu(_,N){return function(Se,Bt){if(Se==null)return Se;if(!Wh(Se))return _(Se,Bt);for(var wr=Se.length,nn=N?wr:-1,Wn=al(Se);(N?nn--:++nn<wr)&&Bt(Wn[nn],nn,Wn)!==!1;);return Se}}function cu(_){return function(N,Se,Bt){for(var wr=-1,nn=al(N),Wn=Bt(N),fi=Wn.length;fi--;){var Ri=Wn[_?fi:++wr];if(Se(nn[Ri],Ri,nn)===!1)break}return N}}function tf(_,N,Se){var Bt=N&ke,wr=ll(_);function nn(){var Wn=this&&this!==de&&this instanceof nn?wr:_;return Wn.apply(Bt?Se:this,arguments)}return nn}function $c(_){return function(N){N=of(N);var Se=rh(N)?Hl(N):C,Bt=Se?Se[0]:N.charAt(0),wr=Se?Me(Se,1).join(""):N.slice(1);return Bt[_]()+wr}}function ac(_){return function(N){return gs(g0(bv(N).replace(dn,"")),_,"")}}function ll(_){return function(){var N=arguments;switch(N.length){case 0:return new _;case 1:return new _(N[0]);case 2:return new _(N[0],N[1]);case 3:return new _(N[0],N[1],N[2]);case 4:return new _(N[0],N[1],N[2],N[3]);case 5:return new _(N[0],N[1],N[2],N[3],N[4]);case 6:return new _(N[0],N[1],N[2],N[3],N[4],N[5]);case 7:return new _(N[0],N[1],N[2],N[3],N[4],N[5],N[6])}var Se=kl(_.prototype),Bt=_.apply(Se,N);return qf(Bt)?Bt:Se}}function Cu(_,N,Se){var Bt=ll(_);function wr(){for(var nn=arguments.length,Wn=$i(nn),fi=nn,Ri=kd(wr);fi--;)Wn[fi]=arguments[fi];var Xa=nn<3&&Wn[0]!==Ri&&Wn[nn-1]!==Ri?[]:dl(Wn,Ri);if(nn-=Xa.length,nn<Se)return Sd(_,N,Pc,wr.placeholder,C,Wn,Xa,C,C,Se-nn);var Ka=this&&this!==de&&this instanceof wr?Bt:_;return Sa(Ka,this,Wn)}return wr}function Sl(_){return function(N,Se,Bt){var wr=al(N);if(!Wh(N)){var nn=Fs(Se,3);N=ch(N),Se=function(fi){return nn(wr[fi],fi,wr)}}var Wn=_(N,Se,Bt);return Wn>-1?wr[nn?N[Wn]:Wn]:C}}function Wl(_){return Ah(function(N){var Se=N.length,Bt=Se,wr=Qo.prototype.thru;for(_&&N.reverse();Bt--;){var nn=N[Bt];if(typeof nn!="function")throw new xf(z);if(wr&&!Wn&&vl(nn)=="wrapper")var Wn=new Qo([],!0)}for(Bt=Wn?Bt:Se;++Bt<Se;){nn=N[Bt];var fi=vl(nn),Ri=fi=="wrapper"?wd(nn):C;Ri&&Ni(Ri[0])&&Ri[1]==(me|ut|se|_e)&&!Ri[4].length&&Ri[9]==1?Wn=Wn[vl(Ri[0])].apply(Wn,Ri[3]):Wn=nn.length==1&&Ni(nn)?Wn[fi]():Wn.thru(nn)}return function(){var Xa=arguments,Ka=Xa[0];if(Wn&&Xa.length==1&&Ou(Ka))return Wn.plant(Ka).value();for(var So=0,Ms=Se?N[So].apply(this,Xa):Ka;++So<Se;)Ms=N[So].call(this,Ms);return Ms}})}function Pc(_,N,Se,Bt,wr,nn,Wn,fi,Ri,Xa){var Ka=N&me,So=N&ke,Ms=N&je,bu=N&(ut|wt),ju=N&Te,zl=Ms?C:ll(_);function Hu(){for(var jl=arguments.length,sc=$i(jl),fh=jl;fh--;)sc[fh]=arguments[fh];if(bu)var Ud=kd(Hu),Rd=Dc(sc,Ud);if(Bt&&(sc=ga(sc,Bt,wr,bu)),nn&&(sc=ss(sc,nn,Wn,bu)),jl-=Rd,bu&&jl<Xa){var dd=dl(sc,Ud);return Sd(_,N,Pc,Hu.placeholder,Se,sc,dd,fi,Ri,Xa-jl)}var cp=So?Se:this,Lp=Ms?cp[_]:_;return jl=sc.length,fi?sc=to(sc,fi):ju&&jl>1&&sc.reverse(),Ka&&Ri<jl&&(sc.length=Ri),this&&this!==de&&this instanceof Hu&&(Lp=zl||ll(Lp)),Lp.apply(cp,sc)}return Hu}function jc(_,N){return function(Se,Bt){return Ch(Se,_,N(Bt),{})}}function hu(_,N){return function(Se,Bt){var wr;if(Se===C&&Bt===C)return N;if(Se!==C&&(wr=Se),Bt!==C){if(wr===C)return Bt;typeof Se=="string"||typeof Bt=="string"?(Se=ru(Se),Bt=ru(Bt)):(Se=Gl(Se),Bt=Gl(Bt)),wr=_(Se,Bt)}return wr}}function _h(_){return Ah(function(N){return N=Ao(N,yc(Fs())),Ja(function(Se){var Bt=this;return _(N,function(wr){return Sa(wr,Bt,Se)})})})}function Oc(_,N){N=N===C?" ":ru(N);var Se=N.length;if(Se<2)return Se?mo(N,_):N;var Bt=mo(N,Sc(_/_c(N)));return rh(N)?Me(Hl(Bt),0,_).join(""):Bt.slice(0,_)}function ud(_,N,Se,Bt){var wr=N&ke,nn=ll(_);function Wn(){for(var fi=-1,Ri=arguments.length,Xa=-1,Ka=Bt.length,So=$i(Ka+Ri),Ms=this&&this!==de&&this instanceof Wn?nn:_;++Xa<Ka;)So[Xa]=Bt[Xa];for(;Ri--;)So[Xa++]=arguments[++fi];return Sa(Ms,wr?Se:this,So)}return Wn}function Hd(_){return function(N,Se,Bt){return Bt&&typeof Bt!="number"&&ya(N,Se,Bt)&&(Se=Bt=C),N=qd(N),Se===C?(Se=N,N=0):Se=qd(Se),Bt=Bt===C?N<Se?1:-1:qd(Bt),ba(N,Se,Bt,_)}}function Zu(_){return function(N,Se){return typeof N=="string"&&typeof Se=="string"||(N=Xd(N),Se=Xd(Se)),_(N,Se)}}function Sd(_,N,Se,Bt,wr,nn,Wn,fi,Ri,Xa){var Ka=N&ut,So=Ka?Wn:C,Ms=Ka?C:Wn,bu=Ka?nn:C,ju=Ka?C:nn;N|=Ka?se:qe,N&=~(Ka?qe:se),N&bt||(N&=~(ke|je));var zl=[_,N,wr,bu,So,ju,Ms,fi,Ri,Xa],Hu=Se.apply(C,zl);return Ni(_)&&Os(Hu,zl),Hu.placeholder=Bt,yo(Hu,_,N)}function Hc(_){var N=tl[_];return function(Se,Bt){if(Se=Xd(Se),Bt=Bt==null?0:Pl(Js(Bt),292),Bt&&Ks(Se)){var wr=(of(Se)+"e").split("e"),nn=N(wr[0]+"e"+(+wr[1]+Bt));return wr=(of(nn)+"e").split("e"),+(wr[0]+"e"+(+wr[1]-Bt))}return N(Se)}}var Nh=ql&&1/su(new ql([,-0]))[1]==Le?function(_){return new ql(_)}:K0;function up(_){return function(N){var Se=Ci(N);return Se==Be?Gs(N):Se==j?Fc(N):gd(N,_(N))}}function _d(_,N,Se,Bt,wr,nn,Wn,fi){var Ri=N&je;if(!Ri&&typeof _!="function")throw new xf(z);var Xa=Bt?Bt.length:0;if(Xa||(N&=~(se|qe),Bt=wr=C),Wn=Wn===C?Wn:eu(Js(Wn),0),fi=fi===C?fi:Js(fi),Xa-=wr?wr.length:0,N&qe){var Ka=Bt,So=wr;Bt=wr=C}var Ms=Ri?C:wd(_),bu=[_,N,Se,Bt,wr,Ka,So,nn,Wn,fi];if(Ms&&ea(bu,Ms),_=bu[0],N=bu[1],Se=bu[2],Bt=bu[3],wr=bu[4],fi=bu[9]=bu[9]===C?Ri?0:_.length:eu(bu[9]-Xa,0),!fi&&N&(ut|wt)&&(N&=~(ut|wt)),!N||N==ke)var ju=tf(_,N,Se);else N==ut||N==wt?ju=Cu(_,N,fi):(N==se||N==(ke|se))&&!wr.length?ju=ud(_,N,Se,Bt):ju=Pc.apply(C,bu);var zl=Ms?Iu:Os;return yo(zl(ju,bu),_,N)}function pp(_,N,Se,Bt){return _===C||Mh(_,Ul[Se])&&!uu.call(Bt,Se)?N:_}function vp(_,N,Se,Bt,wr,nn){return qf(_)&&qf(N)&&(nn.set(N,_),xt(_,N,C,vp,nn),nn.delete(N)),_}function mp(_){return _p(_)?C:_}function Cd(_,N,Se,Bt,wr,nn){var Wn=Se&pe,fi=_.length,Ri=N.length;if(fi!=Ri&&!(Wn&&Ri>fi))return!1;var Xa=nn.get(_),Ka=nn.get(N);if(Xa&&Ka)return Xa==N&&Ka==_;var So=-1,Ms=!0,bu=Se&fe?new Vt:C;for(nn.set(_,N),nn.set(N,_);++So<fi;){var ju=_[So],zl=N[So];if(Bt)var Hu=Wn?Bt(zl,ju,So,N,_,nn):Bt(ju,zl,So,_,N,nn);if(Hu!==C){if(Hu)continue;Ms=!1;break}if(bu){if(!bs(N,function(jl,sc){if(!cf(bu,sc)&&(ju===jl||wr(ju,jl,Se,Bt,nn)))return bu.push(sc)})){Ms=!1;break}}else if(!(ju===zl||wr(ju,zl,Se,Bt,nn))){Ms=!1;break}}return nn.delete(_),nn.delete(N),Ms}function ld(_,N,Se,Bt,wr,nn,Wn){switch(Se){case Qt:if(_.byteLength!=N.byteLength||_.byteOffset!=N.byteOffset)return!1;_=_.buffer,N=N.buffer;case Ct:return!(_.byteLength!=N.byteLength||!nn(new jh(_),new jh(N)));case Lt:case St:case He:return Mh(+_,+N);case lt:return _.name==N.name&&_.message==N.message;case B:case ee:return _==N+"";case Be:var fi=Gs;case j:var Ri=Bt&pe;if(fi||(fi=su),_.size!=N.size&&!Ri)return!1;var Xa=Wn.get(_);if(Xa)return Xa==N;Bt|=fe,Wn.set(_,N);var Ka=Cd(fi(_),fi(N),Bt,wr,nn,Wn);return Wn.delete(_),Ka;case W:if(Yc)return Yc.call(_)==Yc.call(N)}return!1}function gp(_,N,Se,Bt,wr,nn){var Wn=Se&pe,fi=Dd(_),Ri=fi.length,Xa=Dd(N),Ka=Xa.length;if(Ri!=Ka&&!Wn)return!1;for(var So=Ri;So--;){var Ms=fi[So];if(!(Wn?Ms in N:uu.call(N,Ms)))return!1}var bu=nn.get(_),ju=nn.get(N);if(bu&&ju)return bu==N&&ju==_;var zl=!0;nn.set(_,N),nn.set(N,_);for(var Hu=Wn;++So<Ri;){Ms=fi[So];var jl=_[Ms],sc=N[Ms];if(Bt)var fh=Wn?Bt(sc,jl,Ms,N,_,nn):Bt(jl,sc,Ms,_,N,nn);if(!(fh===C?jl===sc||wr(jl,sc,Se,Bt,nn):fh)){zl=!1;break}Hu||(Hu=Ms=="constructor")}if(zl&&!Hu){var Ud=_.constructor,Rd=N.constructor;Ud!=Rd&&"constructor"in _&&"constructor"in N&&!(typeof Ud=="function"&&Ud instanceof Ud&&typeof Rd=="function"&&Rd instanceof Rd)&&(zl=!1)}return nn.delete(_),nn.delete(N),zl}function Ah(_){return so(fo(_,C,Ru),_+"")}function Dd(_){return Ef(_,ch,Vr)}function xd(_){return Ef(_,Xh,Ln)}var wd=Ku?function(_){return Ku.get(_)}:K0;function vl(_){for(var N=_.name+"",Se=Kc[N],Bt=uu.call(Kc,N)?Se.length:0;Bt--;){var wr=Se[Bt],nn=wr.func;if(nn==null||nn==_)return wr.name}return N}function kd(_){var N=uu.call(Ur,"placeholder")?Ur:_;return N.placeholder}function Fs(){var _=Ur.iteratee||Gv;return _=_===Gv?Nf:_,arguments.length?_(arguments[0],arguments[1]):_}function cd(_,N){var Se=_.__data__;return ui(N)?Se[typeof N=="string"?"string":"hash"]:Se.map}function Vd(_){for(var N=ch(_),Se=N.length;Se--;){var Bt=N[Se],wr=_[Bt];N[Se]=[Bt,wr,Ga(wr)]}return N}function Gd(_,N){var Se=ad(_,N);return yu(Se)?Se:C}function jt(_){var N=uu.call(_,bc),Se=_[bc];try{_[bc]=C;var Bt=!0}catch(nn){}var wr=ao.call(_);return Bt&&(N?_[bc]=Se:delete _[bc]),wr}var Vr=Ql?function(_){return _==null?[]:(_=al(_),Io(Ql(_),function(N){return ih.call(_,N)}))}:_0,Ln=Ql?function(_){for(var N=[];_;)Va(N,Vr(_)),_=Yl(_);return N}:_0,Ci=$l;(oo&&Ci(new oo(new ArrayBuffer(1)))!=Qt||ko&&Ci(new ko)!=Be||nu&&Ci(nu.resolve())!=J||ql&&Ci(new ql)!=j||xl&&Ci(new xl)!=ot)&&(Ci=function(_){var N=$l(_),Se=N==Z?_.constructor:C,Bt=Se?Bl(Se):"";if(Bt)switch(Bt){case Gh:return Qt;case Yu:return Be;case bl:return J;case yd:return j;case ph:return ot}return N});function aa(_,N,Se){for(var Bt=-1,wr=Se.length;++Bt<wr;){var nn=Se[Bt],Wn=nn.size;switch(nn.type){case"drop":_+=Wn;break;case"dropRight":N-=Wn;break;case"take":N=Pl(N,_+Wn);break;case"takeRight":_=eu(_,N-Wn);break}}return{start:_,end:N}}function Ai(_){var N=_.match(ci);return N?N[1].split(ia):[]}function Gi(_,N,Se){N=dc(N,_);for(var Bt=-1,wr=N.length,nn=!1;++Bt<wr;){var Wn=Gu(N[Bt]);if(!(nn=_!=null&&Se(_,Wn)))break;_=_[Wn]}return nn||++Bt!=wr?nn:(wr=_==null?0:_.length,!!wr&&Jd(wr)&&$a(Wn,wr)&&(Ou(_)||oc(_)))}function Ea(_){var N=_.length,Se=new _.constructor(N);return N&&typeof _[0]=="string"&&uu.call(_,"index")&&(Se.index=_.index,Se.input=_.input),Se}function Pa(_){return typeof _.constructor=="function"&&!_a(_)?kl(Yl(_)):{}}function Ra(_,N,Se){var Bt=_.constructor;switch(N){case Ct:return pt(_);case Lt:case St:return new Bt(+_);case Qt:return Pt(_,Se);case ir:case Er:case Qr:case Mt:case br:case Nt:case Pr:case _r:case kr:return mi(_,Se);case Be:return new Bt;case He:case ee:return new Bt(_);case B:return Xr(_);case j:return new Bt;case W:return An(_)}}function Za(_,N){var Se=N.length;if(!Se)return _;var Bt=Se-1;return N[Bt]=(Se>1?"& ":"")+N[Bt],N=N.join(Se>2?", ":" "),_.replace(Dn,`{
/* [wrapped with `+N+`] */
`)}function Ha(_){return Ou(_)||oc(_)||!!(hf&&_&&_[hf])}function $a(_,N){var Se=typeof _;return N=N==null?Re:N,!!N&&(Se=="number"||Se!="symbol"&&Pn.test(_))&&_>-1&&_%1==0&&_<N}function ya(_,N,Se){if(!qf(Se))return!1;var Bt=typeof N;return(Bt=="number"?Wh(Se)&&$a(N,Se.length):Bt=="string"&&N in Se)?Mh(Se[N],_):!1}function Ua(_,N){if(Ou(_))return!1;var Se=typeof _;return Se=="number"||Se=="symbol"||Se=="boolean"||_==null||Td(_)?!0:Lr.test(_)||!Ar.test(_)||N!=null&&_ in al(N)}function ui(_){var N=typeof _;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?_!=="__proto__":_===null}function Ni(_){var N=vl(_),Se=Ur[N];if(typeof Se!="function"||!(N in du.prototype))return!1;if(_===Se)return!0;var Bt=wd(Se);return!!Bt&&_===Bt[0]}function La(_){return!!cc&&cc in _}var Ya=Rl?Ed:x0;function _a(_){var N=_&&_.constructor,Se=typeof N=="function"&&N.prototype||Ul;return _===Se}function Ga(_){return _===_&&!qf(_)}function xo(_,N){return function(Se){return Se==null?!1:Se[_]===N&&(N!==C||_ in al(Se))}}function xs(_){var N=gf(_,function(Bt){return Se.size===O&&Se.clear(),Bt}),Se=N.cache;return N}function ea(_,N){var Se=_[1],Bt=N[1],wr=Se|Bt,nn=wr<(ke|je|me),Wn=Bt==me&&Se==ut||Bt==me&&Se==_e&&_[7].length<=N[8]||Bt==(me|_e)&&N[7].length<=N[8]&&Se==ut;if(!(nn||Wn))return _;Bt&ke&&(_[2]=N[2],wr|=Se&ke?0:bt);var fi=N[3];if(fi){var Ri=_[3];_[3]=Ri?ga(Ri,fi,N[4]):fi,_[4]=Ri?dl(_[3],F):N[4]}return fi=N[5],fi&&(Ri=_[5],_[5]=Ri?ss(Ri,fi,N[6]):fi,_[6]=Ri?dl(_[5],F):N[6]),fi=N[7],fi&&(_[7]=fi),Bt&me&&(_[8]=_[8]==null?N[8]:Pl(_[8],N[8])),_[9]==null&&(_[9]=N[9]),_[0]=N[0],_[1]=wr,_}function sa(_){var N=[];if(_!=null)for(var Se in al(_))N.push(Se);return N}function Zo(_){return ao.call(_)}function fo(_,N,Se){return N=eu(N===C?_.length-1:N,0),function(){for(var Bt=arguments,wr=-1,nn=eu(Bt.length-N,0),Wn=$i(nn);++wr<nn;)Wn[wr]=Bt[N+wr];wr=-1;for(var fi=$i(N+1);++wr<N;)fi[wr]=Bt[wr];return fi[N]=Se(Wn),Sa(_,this,fi)}}function Oa(_,N){return N.length<2?_:Pf(_,tu(N,0,-1))}function to(_,N){for(var Se=_.length,Bt=Pl(N.length,Se),wr=To(_);Bt--;){var nn=N[Bt];_[Bt]=$a(nn,Se)?wr[nn]:C}return _}function Ia(_,N){if(!(N==="constructor"&&typeof _[N]=="function")&&N!="__proto__")return _[N]}var Os=hs(Iu),Bs=Dh||function(_,N){return de.setTimeout(_,N)},so=hs(_u);function yo(_,N,Se){var Bt=N+"";return so(_,Za(Bt,Au(Ai(Bt),Se)))}function hs(_){var N=0,Se=0;return function(){var Bt=Xc(),wr=he-(Bt-Se);if(Se=Bt,wr>0){if(++N>=Ne)return arguments[0]}else N=0;return _.apply(C,arguments)}}function zs(_,N){var Se=-1,Bt=_.length,wr=Bt-1;for(N=N===C?Bt:N;++Se<N;){var nn=Xi(Se,wr),Wn=_[nn];_[nn]=_[Se],_[Se]=Wn}return _.length=N,_}var wu=xs(function(_){var N=[];return _.charCodeAt(0)===46&&N.push(""),_.replace(sr,function(Se,Bt,wr,nn){N.push(wr?nn.replace(ji,"$1"):Bt||Se)}),N});function Gu(_){if(typeof _=="string"||Td(_))return _;var N=_+"";return N=="0"&&1/_==-Le?"-0":N}function Bl(_){if(_!=null){try{return ol.call(_)}catch(N){}try{return _+""}catch(N){}}return""}function Au(_,N){return wo(ur,function(Se){var Bt="_."+Se[0];N&Se[1]&&!qs(_,Bt)&&_.push(Bt)}),_.sort()}function Sf(_){if(_ instanceof du)return _.clone();var N=new Qo(_.__wrapped__,_.__chain__);return N.__actions__=To(_.__actions__),N.__index__=_.__index__,N.__values__=_.__values__,N}function Xl(_,N,Se){(Se?ya(_,N,Se):N===C)?N=1:N=eu(Js(N),0);var Bt=_==null?0:_.length;if(!Bt||N<1)return[];for(var wr=0,nn=0,Wn=$i(Sc(Bt/N));wr<Bt;)Wn[nn++]=tu(_,wr,wr+=N);return Wn}function Ic(_){for(var N=-1,Se=_==null?0:_.length,Bt=0,wr=[];++N<Se;){var nn=_[N];nn&&(wr[Bt++]=nn)}return wr}function Cl(){var _=arguments.length;if(!_)return[];for(var N=$i(_-1),Se=arguments[0],Bt=_;Bt--;)N[Bt-1]=arguments[Bt];return Va(Ou(Se)?To(Se):[Se],Qu(N,1))}var rf=Ja(function(_,N){return yf(_)?cs(_,Qu(N,1,yf,!0)):[]}),mf=Ja(function(_,N){var Se=it(N);return yf(Se)&&(Se=C),yf(_)?cs(_,Qu(N,1,yf,!0),Fs(Se,2)):[]}),lh=Ja(function(_,N){var Se=it(N);return yf(Se)&&(Se=C),yf(_)?cs(_,Qu(N,1,yf,!0),C,Se):[]});function pc(_,N,Se){var Bt=_==null?0:_.length;return Bt?(N=Se||N===C?1:Js(N),tu(_,N<0?0:N,Bt)):[]}function fu(_,N,Se){var Bt=_==null?0:_.length;return Bt?(N=Se||N===C?1:Js(N),N=Bt-N,tu(_,0,N<0?0:N)):[]}function Cf(_,N){return _&&_.length?hc(_,Fs(N,3),!0,!0):[]}function Uu(_,N){return _&&_.length?hc(_,Fs(N,3),!0):[]}function Qf(_,N,Se,Bt){var wr=_==null?0:_.length;return wr?(Se&&typeof Se!="number"&&ya(_,N,Se)&&(Se=0,Bt=wr),El(_,N,Se,Bt)):[]}function js(_,N,Se){var Bt=_==null?0:_.length;if(!Bt)return-1;var wr=Se==null?0:Js(Se);return wr<0&&(wr=eu(Bt+wr,0)),Mu(_,Fs(N,3),wr)}function Pu(_,N,Se){var Bt=_==null?0:_.length;if(!Bt)return-1;var wr=Bt-1;return Se!==C&&(wr=Js(Se),wr=Se<0?eu(Bt+wr,0):Pl(wr,Bt-1)),Mu(_,Fs(N,3),wr,!0)}function Ru(_){var N=_==null?0:_.length;return N?Qu(_,1):[]}function nf(_){var N=_==null?0:_.length;return N?Qu(_,Le):[]}function pd(_,N){var Se=_==null?0:_.length;return Se?(N=N===C?1:Js(N),Qu(_,N)):[]}function w(_){for(var N=-1,Se=_==null?0:_.length,Bt={};++N<Se;){var wr=_[N];Bt[wr[0]]=wr[1]}return Bt}function G(_){return _&&_.length?_[0]:C}function Ce(_,N,Se){var Bt=_==null?0:_.length;if(!Bt)return-1;var wr=Se==null?0:Js(Se);return wr<0&&(wr=eu(Bt+wr,0)),yl(_,N,wr)}function ae(_){var N=_==null?0:_.length;return N?tu(_,0,-1):[]}var et=Ja(function(_){var N=Ao(_,yh);return N.length&&N[0]===_[0]?Of(N):[]}),Ie=Ja(function(_){var N=it(_),Se=Ao(_,yh);return N===it(Se)?N=C:Se.pop(),Se.length&&Se[0]===_[0]?Of(Se,Fs(N,2)):[]}),Ze=Ja(function(_){var N=it(_),Se=Ao(_,yh);return N=typeof N=="function"?N:C,N&&Se.pop(),Se.length&&Se[0]===_[0]?Of(Se,C,N):[]});function Fe(_,N){return _==null?"":Gf.call(_,N)}function it(_){var N=_==null?0:_.length;return N?_[N-1]:C}function gt(_,N,Se){var Bt=_==null?0:_.length;if(!Bt)return-1;var wr=Bt;return Se!==C&&(wr=Js(Se),wr=wr<0?eu(Bt+wr,0):Pl(wr,Bt-1)),N===N?Tf(_,N,wr):Mu(_,Lc,wr,!0)}function It(_,N){return _&&_.length?Ht(_,Js(N)):C}var Tt=Ja(qt);function qt(_,N){return _&&_.length&&N&&N.length?zn(_,N):_}function Ot(_,N,Se){return _&&_.length&&N&&N.length?zn(_,N,Fs(Se,2)):_}function rr(_,N,Se){return _&&_.length&&N&&N.length?zn(_,N,C,Se):_}var Xt=Ah(function(_,N){var Se=_==null?0:_.length,Bt=is(_,N);return wi(_,Ao(N,function(wr){return $a(wr,Se)?+wr:wr}).sort(un)),Bt});function gr(_,N){var Se=[];if(!(_&&_.length))return Se;var Bt=-1,wr=[],nn=_.length;for(N=Fs(N,3);++Bt<nn;){var Wn=_[Bt];N(Wn,Bt,_)&&(Se.push(Wn),wr.push(Bt))}return wi(_,wr),Se}function Sr(_){return _==null?_:fc.call(_)}function Wr(_,N,Se){var Bt=_==null?0:_.length;return Bt?(Se&&typeof Se!="number"&&ya(_,N,Se)?(N=0,Se=Bt):(N=N==null?0:Js(N),Se=Se===C?Bt:Js(Se)),tu(_,N,Se)):[]}function Cn(_,N){return Ys(_,N)}function xn(_,N,Se){return ku(_,N,Fs(Se,2))}function In(_,N){var Se=_==null?0:_.length;if(Se){var Bt=Ys(_,N);if(Bt<Se&&Mh(_[Bt],N))return Bt}return-1}function Rn(_,N){return Ys(_,N,!0)}function Gn(_,N,Se){return ku(_,N,Fs(Se,2),!0)}function ti(_,N){var Se=_==null?0:_.length;if(Se){var Bt=Ys(_,N,!0)-1;if(Mh(_[Bt],N))return Bt}return-1}function ii(_){return _&&_.length?Bu(_):[]}function b(_,N){return _&&_.length?Bu(_,Fs(N,2)):[]}function M(_){var N=_==null?0:_.length;return N?tu(_,1,N):[]}function D(_,N,Se){return _&&_.length?(N=Se||N===C?1:Js(N),tu(_,0,N<0?0:N)):[]}function P(_,N,Se){var Bt=_==null?0:_.length;return Bt?(N=Se||N===C?1:Js(N),N=Bt-N,tu(_,N<0?0:N,Bt)):[]}function V(_,N){return _&&_.length?hc(_,Fs(N,3),!1,!0):[]}function q(_,N){return _&&_.length?hc(_,Fs(N,3)):[]}var be=Ja(function(_){return pl(Qu(_,1,yf,!0))}),$e=Ja(function(_){var N=it(_);return yf(N)&&(N=C),pl(Qu(_,1,yf,!0),Fs(N,2))}),_t=Ja(function(_){var N=it(_);return N=typeof N=="function"?N:C,pl(Qu(_,1,yf,!0),C,N)});function Gt(_){return _&&_.length?pl(_):[]}function yr(_,N){return _&&_.length?pl(_,Fs(N,2)):[]}function $r(_,N){return N=typeof N=="function"?N:C,_&&_.length?pl(_,C,N):[]}function an(_){if(!(_&&_.length))return[];var N=0;return _=Io(_,function(Se){if(yf(Se))return N=eu(Se.length,N),!0}),lf(N,function(Se){return Ao(_,_l(Se))})}function Un(_,N){if(!(_&&_.length))return[];var Se=an(_);return N==null?Se:Ao(Se,function(Bt){return Sa(N,C,Bt)})}var ei=Ja(function(_,N){return yf(_)?cs(_,N):[]}),Jn=Ja(function(_){return Kf(Io(_,yf))}),Sn=Ja(function(_){var N=it(_);return yf(N)&&(N=C),Kf(Io(_,yf),Fs(N,2))}),Xn=Ja(function(_){var N=it(_);return N=typeof N=="function"?N:C,Kf(Io(_,yf),C,N)}),ai=Ja(an);function ln(_,N){return gh(_||[],N||[],Fi)}function pi(_,N){return gh(_||[],N||[],lu)}var gi=Ja(function(_){var N=_.length,Se=N>1?_[N-1]:C;return Se=typeof Se=="function"?(_.pop(),Se):C,Un(_,Se)});function Li(_){var N=Ur(_);return N.__chain__=!0,N}function Ki(_,N){return N(_),_}function ua(_,N){return N(_)}var la=Ah(function(_){var N=_.length,Se=N?_[0]:0,Bt=this.__wrapped__,wr=function(nn){return is(nn,_)};return N>1||this.__actions__.length||!(Bt instanceof du)||!$a(Se)?this.thru(wr):(Bt=Bt.slice(Se,+Se+(N?1:0)),Bt.__actions__.push({func:ua,args:[wr],thisArg:C}),new Qo(Bt,this.__chain__).thru(function(nn){return N&&!nn.length&&nn.push(C),nn}))});function Lo(){return Li(this)}function Fa(){return new Qo(this.value(),this.__chain__)}function go(){this.__values__===C&&(this.__values__=N0(this.value()));var _=this.__index__>=this.__values__.length,N=_?C:this.__values__[this.__index__++];return{done:_,value:N}}function Qs(){return this}function e(_){for(var N,Se=this;Se instanceof Vo;){var Bt=Sf(Se);Bt.__index__=0,Bt.__values__=C,N?wr.__wrapped__=Bt:N=Bt;var wr=Bt;Se=Se.__wrapped__}return wr.__wrapped__=_,N}function i(){var _=this.__wrapped__;if(_ instanceof du){var N=_;return this.__actions__.length&&(N=new du(this)),N=N.reverse(),N.__actions__.push({func:ua,args:[Sr],thisArg:C}),new Qo(N,this.__chain__)}return this.thru(Sr)}function c(){return uh(this.__wrapped__,this.__actions__)}var y=zo(function(_,N,Se){uu.call(_,Se)?++_[Se]:No(_,Se,1)});function I(_,N,Se){var Bt=Ou(_)?Ho:ws;return Se&&ya(_,N,Se)&&(N=C),Bt(_,Fs(N,3))}function H(_,N){var Se=Ou(_)?Io:nl;return Se(_,Fs(N,3))}var Q=Sl(js),ge=Sl(Pu);function tt(_,N){return Qu(vn(_,N),1)}function Rt(_,N){return Qu(vn(_,N),Le)}function Ft(_,N,Se){return Se=Se===C?1:Js(Se),Qu(vn(_,N),Se)}function Jt(_,N){var Se=Ou(_)?wo:Jo;return Se(_,Fs(N,3))}function dr(_,N){var Se=Ou(_)?Oo:$s;return Se(_,Fs(N,3))}var Cr=zo(function(_,N,Se){uu.call(_,Se)?_[Se].push(N):No(_,Se,[N])});function tn(_,N,Se,Bt){_=Wh(_)?_:Ol(_),Se=Se&&!Bt?Js(Se):0;var wr=_.length;return Se<0&&(Se=eu(wr+Se,0)),xp(_)?Se<=wr&&_.indexOf(N,Se)>-1:!!wr&&yl(_,N,Se)>-1}var rn=Ja(function(_,N,Se){var Bt=-1,wr=typeof N=="function",nn=Wh(_)?$i(_.length):[];return Jo(_,function(Wn){nn[++Bt]=wr?Sa(N,Wn,Se):pf(Wn,N,Se)}),nn}),yn=zo(function(_,N,Se){No(_,Se,N)});function vn(_,N){var Se=Ou(_)?Ao:vf;return Se(_,Fs(N,3))}function $n(_,N,Se,Bt){return _==null?[]:(Ou(N)||(N=N==null?[]:[N]),Se=Bt?C:Se,Ou(Se)||(Se=Se==null?[]:[Se]),or(_,N,Se))}var ri=zo(function(_,N,Se){_[Se?0:1].push(N)},function(){return[[],[]]});function _i(_,N,Se){var Bt=Ou(_)?gs:th,wr=arguments.length<3;return Bt(_,Fs(N,4),Se,wr,Jo)}function xi(_,N,Se){var Bt=Ou(_)?Ws:th,wr=arguments.length<3;return Bt(_,Fs(N,4),Se,wr,$s)}function Ii(_,N){var Se=Ou(_)?Io:nl;return Se(_,zf(Fs(N,3)))}function ta(_){var N=Ou(_)?jn:Ds;return N(_)}function Qi(_,N,Se){(Se?ya(_,N,Se):N===C)?N=1:N=Js(N);var Bt=Ou(_)?vi:Ts;return Bt(_,N)}function ja(_){var N=Ou(_)?ki:Mc;return N(_)}function qn(_){if(_==null)return 0;if(Wh(_))return xp(_)?_c(_):_.length;var N=Ci(_);return N==Be||N==j?_.size:mh(_).length}function ca(_,N,Se){var Bt=Ou(_)?bs:Fl;return Se&&ya(_,N,Se)&&(N=C),Bt(_,Fs(N,3))}var ra=Ja(function(_,N){if(_==null)return[];var Se=N.length;return Se>1&&ya(_,N[0],N[1])?N=[]:Se>2&&ya(N[0],N[1],N[2])&&(N=[N[0]]),or(_,Qu(N,1),[])}),bo=Wc||function(){return de.Date.now()};function Eo(_,N){if(typeof N!="function")throw new xf(z);return _=Js(_),function(){if(--_<1)return N.apply(this,arguments)}}function qa(_,N,Se){return N=Se?C:N,N=_&&N==null?_.length:N,_d(_,me,C,C,C,C,N)}function Ss(_,N){var Se;if(typeof N!="function")throw new xf(z);return _=Js(_),function(){return--_>0&&(Se=N.apply(this,arguments)),_<=1&&(N=C),Se}}var Is=Ja(function(_,N,Se){var Bt=ke;if(Se.length){var wr=dl(Se,kd(Is));Bt|=se}return _d(_,Bt,N,Se,wr)}),pu=Ja(function(_,N,Se){var Bt=ke|je;if(Se.length){var wr=dl(Se,kd(pu));Bt|=se}return _d(N,Bt,_,Se,wr)});function es(_,N,Se){N=Se?C:N;var Bt=_d(_,ut,C,C,C,C,C,N);return Bt.placeholder=es.placeholder,Bt}function $u(_,N,Se){N=Se?C:N;var Bt=_d(_,wt,C,C,C,C,C,N);return Bt.placeholder=$u.placeholder,Bt}function hl(_,N,Se){var Bt,wr,nn,Wn,fi,Ri,Xa=0,Ka=!1,So=!1,Ms=!0;if(typeof _!="function")throw new xf(z);N=Xd(N)||0,qf(Se)&&(Ka=!!Se.leading,So="maxWait"in Se,nn=So?eu(Xd(Se.maxWait)||0,N):nn,Ms="trailing"in Se?!!Se.trailing:Ms);function bu(dd){var cp=Bt,Lp=wr;return Bt=wr=C,Xa=dd,Wn=_.apply(Lp,cp),Wn}function ju(dd){return Xa=dd,fi=Bs(jl,N),Ka?bu(dd):Wn}function zl(dd){var cp=dd-Ri,Lp=dd-Xa,Pg=N-cp;return So?Pl(Pg,nn-Lp):Pg}function Hu(dd){var cp=dd-Ri,Lp=dd-Xa;return Ri===C||cp>=N||cp<0||So&&Lp>=nn}function jl(){var dd=bo();if(Hu(dd))return sc(dd);fi=Bs(jl,zl(dd))}function sc(dd){return fi=C,Ms&&Bt?bu(dd):(Bt=wr=C,Wn)}function fh(){fi!==C&&Oe(fi),Xa=0,Bt=Ri=wr=fi=C}function Ud(){return fi===C?Wn:sc(bo())}function Rd(){var dd=bo(),cp=Hu(dd);if(Bt=arguments,wr=this,Ri=dd,cp){if(fi===C)return ju(Ri);if(So)return Oe(fi),fi=Bs(jl,N),bu(Ri)}return fi===C&&(fi=Bs(jl,N)),Wn}return Rd.cancel=fh,Rd.flush=Ud,Rd}var Nl=Ja(function(_,N){return Ns(_,1,N)}),el=Ja(function(_,N,Se){return Ns(_,Xd(N)||0,Se)});function af(_){return _d(_,Te)}function gf(_,N){if(typeof _!="function"||N!=null&&typeof N!="function")throw new xf(z);var Se=function(){var Bt=arguments,wr=N?N.apply(this,Bt):Bt[0],nn=Se.cache;if(nn.has(wr))return nn.get(wr);var Wn=_.apply(this,Bt);return Se.cache=nn.set(wr,Wn)||nn,Wn};return Se.cache=new(gf.Cache||p),Se}gf.Cache=p;function zf(_){if(typeof _!="function")throw new xf(z);return function(){var N=arguments;switch(N.length){case 0:return!_.call(this);case 1:return!_.call(this,N[0]);case 2:return!_.call(this,N[0],N[1]);case 3:return!_.call(this,N[0],N[1],N[2])}return!_.apply(this,N)}}function Th(_){return Ss(2,_)}var ed=ne(function(_,N){N=N.length==1&&Ou(N[0])?Ao(N[0],yc(Fs())):Ao(Qu(N,1),yc(Fs()));var Se=N.length;return Ja(function(Bt){for(var wr=-1,nn=Pl(Bt.length,Se);++wr<nn;)Bt[wr]=N[wr].call(this,Bt[wr]);return Sa(_,this,Bt)})}),Zf=Ja(function(_,N){var Se=dl(N,kd(Zf));return _d(_,se,C,N,Se)}),iu=Ja(function(_,N){var Se=dl(N,kd(iu));return _d(_,qe,C,N,Se)}),Uf=Ah(function(_,N){return _d(_,_e,C,C,C,N)});function xh(_,N){if(typeof _!="function")throw new xf(z);return N=N===C?N:Js(N),Ja(_,N)}function Lu(_,N){if(typeof _!="function")throw new xf(z);return N=N==null?0:eu(Js(N),0),Ja(function(Se){var Bt=Se[N],wr=Me(Se,0,N);return Bt&&Va(wr,Bt),Sa(_,this,wr)})}function cl(_,N,Se){var Bt=!0,wr=!0;if(typeof _!="function")throw new xf(z);return qf(Se)&&(Bt="leading"in Se?!!Se.leading:Bt,wr="trailing"in Se?!!Se.trailing:wr),hl(_,N,{leading:Bt,maxWait:N,trailing:wr})}function sl(_){return qa(_,1)}function Wu(_,N){return Zf(Yf(N),_)}function td(){if(!arguments.length)return[];var _=arguments[0];return Ou(_)?_:[_]}function Jf(_){return Ls(_,re)}function Rc(_,N){return N=typeof N=="function"?N:C,Ls(_,re,N)}function $f(_){return Ls(_,ue|re)}function rd(_,N){return N=typeof N=="function"?N:C,Ls(_,ue|re,N)}function wl(_,N){return N==null||ds(_,N,ch(N))}function Mh(_,N){return _===N||_!==_&&N!==N}var fd=Zu(Uc),Wd=Zu(function(_,N){return _>=N}),oc=oh(function(){return arguments}())?oh:function(_){return bh(_)&&uu.call(_,"callee")&&!ih.call(_,"callee")},Ou=$i.isArray,Od=kn?yc(kn):Jc;function Wh(_){return _!=null&&Jd(_.length)&&!Ed(_)}function yf(_){return bh(_)&&Wh(_)}function Ep(_){return _===!0||_===!1||bh(_)&&$l(_)==Lt}var bd=gu||x0,ml=Nn?yc(Nn):nc;function vc(_){return bh(_)&&_.nodeType===1&&!_p(_)}function vd(_){if(_==null)return!0;if(Wh(_)&&(Ou(_)||typeof _=="string"||typeof _.splice=="function"||bd(_)||rp(_)||oc(_)))return!_.length;var N=Ci(_);if(N==Be||N==j)return!_.size;if(_a(_))return!mh(_).length;for(var Se in _)if(uu.call(_,Se))return!1;return!0}function Ad(_,N){return ic(_,N)}function Fd(_,N,Se){Se=typeof Se=="function"?Se:C;var Bt=Se?Se(_,N):C;return Bt===C?ic(_,N,C,Se):!!Bt}function yp(_){if(!bh(_))return!1;var N=$l(_);return N==lt||N==Ut||typeof _.message=="string"&&typeof _.name=="string"&&!_p(_)}function Ph(_){return typeof _=="number"&&Ks(_)}function Ed(_){if(!qf(_))return!1;var N=$l(_);return N==Et||N==Zt||N==nt||N==K}function Bd(_){return typeof _=="number"&&_==Js(_)}function Jd(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Re}function qf(_){var N=typeof _;return _!=null&&(N=="object"||N=="function")}function bh(_){return _!=null&&typeof _=="object"}var Bv=Mi?yc(Mi):Fh;function nv(_,N){return _===N||Du(_,N,Vd(N))}function iv(_,N,Se){return Se=typeof Se=="function"?Se:C,Du(_,N,Vd(N),Se)}function av(_){return uv(_)&&_!=+_}function ov(_){if(Ya(_))throw new lo(R);return yu(_)}function sv(_){return _===null}function Nd(_){return _==null}function uv(_){return typeof _=="number"||bh(_)&&$l(_)==He}function _p(_){if(!bh(_)||$l(_)!=Z)return!1;var N=Yl(_);if(N===null)return!0;var Se=uu.call(N,"constructor")&&N.constructor;return typeof Se=="function"&&Se instanceof Se&&ol.call(Se)==Ml}var Np=Bi?yc(Bi):qc;function zp(_){return Bd(_)&&_>=-Re&&_<=Re}var Sp=io?yc(io):sh;function xp(_){return typeof _=="string"||!Ou(_)&&bh(_)&&$l(_)==ee}function Td(_){return typeof _=="symbol"||bh(_)&&$l(_)==W}var rp=co?yc(co):vh;function t0(_){return _===C}function F0(_){return bh(_)&&Ci(_)==ot}function Nv(_){return bh(_)&&$l(_)==Wt}var B0=Zu(Rf),lv=Zu(function(_,N){return _<=N});function N0(_){if(!_)return[];if(Wh(_))return xp(_)?Hl(_):To(_);if(Hh&&_[Hh])return Yo(_[Hh]());var N=Ci(_),Se=N==Be?Gs:N==j?su:Ol;return Se(_)}function qd(_){if(!_)return _===0?_:0;if(_=Xd(_),_===Le||_===-Le){var N=_<0?-1:1;return N*st}return _===_?_:0}function Js(_){var N=qd(_),Se=N%1;return N===N?Se?N-Se:N:0}function np(_){return _?rs(Js(_),0,Dt):0}function Xd(_){if(typeof _=="number")return _;if(Td(_))return vt;if(qf(_)){var N=typeof _.valueOf=="function"?_.valueOf():_;_=qf(N)?N+"":N}if(typeof _!="string")return _===0?_:+_;_=Kh(_);var Se=Wi.test(_);return Se||uo.test(_)?oa(_.slice(2),Se?2:8):Ca.test(_)?vt:+_}function ip(_){return Ro(_,Xh(_))}function zv(_){return _?rs(Js(_),-Re,Re):_===0?_:0}function of(_){return _==null?"":ru(_)}var Zp=ks(function(_,N){if(_a(N)||Wh(N)){Ro(N,ch(N),_);return}for(var Se in N)uu.call(N,Se)&&Fi(_,Se,N[Se])}),ap=ks(function(_,N){Ro(N,Xh(N),_)}),Pp=ks(function(_,N,Se,Bt){Ro(N,Xh(N),_,Bt)}),cv=ks(function(_,N,Se,Bt){Ro(N,ch(N),_,Bt)}),fv=Ah(is);function hv(_,N){var Se=kl(_);return N==null?Se:Na(Se,N)}var r0=Ja(function(_,N){_=al(_);var Se=-1,Bt=N.length,wr=Bt>2?N[2]:C;for(wr&&ya(N[0],N[1],wr)&&(Bt=1);++Se<Bt;)for(var nn=N[Se],Wn=Xh(nn),fi=-1,Ri=Wn.length;++fi<Ri;){var Xa=Wn[fi],Ka=_[Xa];(Ka===C||Mh(Ka,Ul[Xa])&&!uu.call(_,Xa))&&(_[Xa]=nn[Xa])}return _}),Zv=Ja(function(_){return _.push(C,vp),Sa(i0,C,_)});function Wp(_,N){return jf(_,Fs(N,3),qu)}function z0(_,N){return jf(_,Fs(N,3),Tc)}function n0(_,N){return _==null?_:Ac(_,Fs(N,3),Xh)}function Z0(_,N){return _==null?_:Ju(_,Fs(N,3),Xh)}function U0(_,N){return _&&qu(_,Fs(N,3))}function dv(_,N){return _&&Tc(_,Fs(N,3))}function zd(_){return _==null?[]:ec(_,ch(_))}function pv(_){return _==null?[]:ec(_,Xh(_))}function Uv(_,N,Se){var Bt=_==null?C:Pf(_,N);return Bt===C?Se:Bt}function Cp(_,N){return _!=null&&Gi(_,N,Jh)}function vv(_,N){return _!=null&&Gi(_,N,qh)}var $v=jc(function(_,N,Se){N!=null&&typeof N.toString!="function"&&(N=ao.call(N)),_[N]=Se},y0(Zd)),bp=jc(function(_,N,Se){N!=null&&typeof N.toString!="function"&&(N=ao.call(N)),uu.call(_,N)?_[N].push(Se):_[N]=[Se]},Fs),Op=Ja(pf);function ch(_){return Wh(_)?Fn(_):mh(_)}function Xh(_){return Wh(_)?Fn(_,!0):If(_)}function mv(_,N){var Se={};return N=Fs(N,3),qu(_,function(Bt,wr,nn){No(Se,N(Bt,wr,nn),Bt)}),Se}function wm(_,N){var Se={};return N=Fs(N,3),qu(_,function(Bt,wr,nn){No(Se,wr,N(Bt,wr,nn))}),Se}var $0=ks(function(_,N,Se){xt(_,N,Se)}),i0=ks(function(_,N,Se,Bt){xt(_,N,Se,Bt)}),jv=Ah(function(_,N){var Se={};if(_==null)return Se;var Bt=!1;N=Ao(N,function(nn){return nn=dc(nn,_),Bt||(Bt=nn.length>1),nn}),Ro(_,xd(_),Se),Bt&&(Se=Ls(Se,ue|Ae|re,mp));for(var wr=N.length;wr--;)ef(Se,N[wr]);return Se});function gv(_,N){return op(_,zf(Fs(N)))}var a0=Ah(function(_,N){return _==null?{}:en(_,N)});function op(_,N){if(_==null)return{};var Se=Ao(xd(_),function(Bt){return[Bt]});return N=Fs(N),_n(_,Se,function(Bt,wr){return N(Bt,wr[0])})}function o0(_,N,Se){N=dc(N,_);var Bt=-1,wr=N.length;for(wr||(wr=1,_=C);++Bt<wr;){var nn=_==null?C:_[Gu(N[Bt])];nn===C&&(Bt=wr,nn=Se),_=Ed(nn)?nn.call(_):nn}return _}function s0(_,N,Se){return _==null?_:lu(_,N,Se)}function j0(_,N,Se,Bt){return Bt=typeof Bt=="function"?Bt:C,_==null?_:lu(_,N,Se,Bt)}var Hv=up(ch),yv=up(Xh);function u0(_,N,Se){var Bt=Ou(_),wr=Bt||bd(_)||rp(_);if(N=Fs(N,4),Se==null){var nn=_&&_.constructor;wr?Se=Bt?new nn:[]:qf(_)?Se=Ed(nn)?kl(Yl(_)):{}:Se={}}return(wr?wo:qu)(_,function(Wn,fi,Ri){return N(Se,Wn,fi,Ri)}),Se}function l0(_,N){return _==null?!0:ef(_,N)}function c0(_,N,Se){return _==null?_:Bh(_,N,Yf(Se))}function H0(_,N,Se,Bt){return Bt=typeof Bt=="function"?Bt:C,_==null?_:Bh(_,N,Yf(Se),Bt)}function Ol(_){return _==null?[]:Eh(_,ch(_))}function _v(_){return _==null?[]:Eh(_,Xh(_))}function xv(_,N,Se){return Se===C&&(Se=N,N=C),Se!==C&&(Se=Xd(Se),Se=Se===Se?Se:0),N!==C&&(N=Xd(N),N=N===N?N:0),rs(Xd(_),N,Se)}function Xp(_,N,Se){return N=qd(N),Se===C?(Se=N,N=0):Se=qd(Se),_=Xd(_),Sh(_,N,Se)}function Vv(_,N,Se){if(Se&&typeof Se!="boolean"&&ya(_,N,Se)&&(N=Se=C),Se===C&&(typeof N=="boolean"?(Se=N,N=C):typeof _=="boolean"&&(Se=_,_=C)),_===C&&N===C?(_=0,N=1):(_=qd(_),N===C?(N=_,_=0):N=qd(N)),_>N){var Bt=_;_=N,N=Bt}if(Se||_%1||N%1){var wr=Jl();return Pl(_+wr*(N-_+Yi("1e-"+((wr+"").length-1))),N)}return Xi(_,N)}var V0=ac(function(_,N,Se){return N=N.toLowerCase(),_+(Se?f0(N):N)});function f0(_){return m0(of(_).toLowerCase())}function bv(_){return _=of(_),_&&_.replace(bn,Ff).replace(mn,"")}function h0(_,N,Se){_=of(_),N=ru(N);var Bt=_.length;Se=Se===C?Bt:rs(Js(Se),0,Bt);var wr=Se;return Se-=N.length,Se>=0&&_.slice(Se,wr)==N}function Ev(_){return _=of(_),_&&xe.test(_)?_.replace(Nr,Zl):_}function Up(_){return _=of(_),_&&Gr.test(_)?_.replace(Ge,"\\$&"):_}var Am=ac(function(_,N,Se){return _+(Se?"-":"")+N.toLowerCase()}),Tm=ac(function(_,N,Se){return _+(Se?" ":"")+N.toLowerCase()}),lp=$c("toLowerCase");function Sv(_,N,Se){_=of(_),N=Js(N);var Bt=N?_c(_):0;if(!N||Bt>=N)return _;var wr=(N-Bt)/2;return Oc(Vh(wr),Se)+_+Oc(Sc(wr),Se)}function wp(_,N,Se){_=of(_),N=Js(N);var Bt=N?_c(_):0;return N&&Bt<N?_+Oc(N-Bt,Se):_}function Kd(_,N,Se){_=of(_),N=Js(N);var Bt=N?_c(_):0;return N&&Bt<N?Oc(N-Bt,Se)+_:_}function Kp(_,N,Se){return Se||N==null?N=0:N&&(N=+N),Nc(of(_).replace(on,""),N||0)}function Ap(_,N,Se){return(Se?ya(_,N,Se):N===C)?N=1:N=Js(N),mo(of(_),N)}function G0(){var _=arguments,N=of(_[0]);return _.length<3?N:N.replace(_[1],_[2])}var mg=ac(function(_,N,Se){return _+(Se?"_":"")+N.toLowerCase()});function gg(_,N,Se){return Se&&typeof Se!="number"&&ya(_,N,Se)&&(N=Se=C),Se=Se===C?Dt:Se>>>0,Se?(_=of(_),_&&(typeof N=="string"||N!=null&&!Np(N))&&(N=ru(N),!N&&rh(_))?Me(Hl(_),0,Se):_.split(N,Se)):[]}var py=ac(function(_,N,Se){return _+(Se?" ":"")+m0(N)});function M_(_,N,Se){return _=of(_),Se=Se==null?0:rs(Js(Se),0,_.length),N=ru(N),_.slice(Se,Se+N.length)==N}function W0(_,N,Se){var Bt=Ur.templateSettings;Se&&ya(_,N,Se)&&(N=C),_=of(_),N=Pp({},N,Bt,pp);var wr=Pp({},N.imports,Bt.imports,pp),nn=ch(wr),Wn=Eh(wr,nn),fi,Ri,Xa=0,Ka=N.interpolate||Oi,So="__p += '",Ms=Tl((N.escape||Oi).source+"|"+Ka.source+"|"+(Ka===cr?oi:Oi).source+"|"+(N.evaluate||Oi).source+"|$","g"),bu="//# sourceURL="+(uu.call(N,"sourceURL")?(N.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rr+"]")+`
`;_.replace(Ms,function(Hu,jl,sc,fh,Ud,Rd){return sc||(sc=fh),So+=_.slice(Xa,Rd).replace(di,kc),jl&&(fi=!0,So+=`' +
__e(`+jl+`) +
'`),Ud&&(Ri=!0,So+=`';
`+Ud+`;
__p += '`),sc&&(So+=`' +
((__t = (`+sc+`)) == null ? '' : __t) +
'`),Xa=Rd+Hu.length,Hu}),So+=`';
`;var ju=uu.call(N,"variable")&&N.variable;if(!ju)So=`with (obj) {
`+So+`
}
`;else if(On.test(ju))throw new lo(L);So=(Ri?So.replace(zt,""):So).replace(mr,"$1").replace(Or,"$1;"),So="function("+(ju||"obj")+`) {
`+(ju?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fi?", __e = _.escape":"")+(Ri?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+So+`return __p
}`;var zl=Ip(function(){return Es(nn,bu+"return "+So).apply(C,Wn)});if(zl.source=So,yp(zl))throw zl;return zl}function d0(_){return of(_).toLowerCase()}function Cv(_){return of(_).toUpperCase()}function p0(_,N,Se){if(_=of(_),_&&(Se||N===C))return Kh(_);if(!_||!(N=ru(N)))return _;var Bt=Hl(_),wr=Hl(N),nn=Af(Bt,wr),Wn=_f(Bt,wr)+1;return Me(Bt,nn,Wn).join("")}function Mm(_,N,Se){if(_=of(_),_&&(Se||N===C))return _.slice(0,ff(_)+1);if(!_||!(N=ru(N)))return _;var Bt=Hl(_),wr=_f(Bt,Hl(N))+1;return Me(Bt,0,wr).join("")}function Pm(_,N,Se){if(_=of(_),_&&(Se||N===C))return _.replace(on,"");if(!_||!(N=ru(N)))return _;var Bt=Hl(_),wr=Af(Bt,Hl(N));return Me(Bt,wr).join("")}function vy(_,N){var Se=ht,Bt=We;if(qf(N)){var wr="separator"in N?N.separator:wr;Se="length"in N?Js(N.length):Se,Bt="omission"in N?ru(N.omission):Bt}_=of(_);var nn=_.length;if(rh(_)){var Wn=Hl(_);nn=Wn.length}if(Se>=nn)return _;var fi=Se-_c(Bt);if(fi<1)return Bt;var Ri=Wn?Me(Wn,0,fi).join(""):_.slice(0,fi);if(wr===C)return Ri+Bt;if(Wn&&(fi+=Ri.length-fi),Np(wr)){if(_.slice(fi).search(wr)){var Xa,Ka=Ri;for(wr.global||(wr=Tl(wr.source,of(Hi.exec(wr))+"g")),wr.lastIndex=0;Xa=wr.exec(Ka);)var So=Xa.index;Ri=Ri.slice(0,So===C?fi:So)}}else if(_.indexOf(ru(wr),fi)!=fi){var Ms=Ri.lastIndexOf(wr);Ms>-1&&(Ri=Ri.slice(0,Ms))}return Ri+Bt}function gy(_){return _=of(_),_&&Xe.test(_)?_.replace(X,xc):_}var v0=ac(function(_,N,Se){return _+(Se?" ":"")+N.toUpperCase()}),m0=$c("toUpperCase");function g0(_,N,Se){return _=of(_),N=Se?C:N,N===C?od(_)?Gc(_):gl(_):_.match(N)||[]}var Ip=Ja(function(_,N){try{return Sa(_,C,N)}catch(Se){return yp(Se)?Se:new lo(Se)}}),$p=Ah(function(_,N){return wo(N,function(Se){Se=Gu(Se),No(_,Se,Is(_[Se],_))}),_});function wv(_){var N=_==null?0:_.length,Se=Fs();return _=N?Ao(_,function(Bt){if(typeof Bt[1]!="function")throw new xf(z);return[Se(Bt[0]),Bt[1]]}):[],Ja(function(Bt){for(var wr=-1;++wr<N;){var nn=_[wr];if(Sa(nn[0],this,Bt))return Sa(nn[1],this,Bt)}})}function Av(_){return vo(Ls(_,ue))}function y0(_){return function(){return _}}function Id(_,N){return _==null||_!==_?N:_}var Rp=Wl(),Om=Wl(!0);function Zd(_){return _}function Gv(_){return Nf(typeof _=="function"?_:Ls(_,ue))}function Wv(_){return oe(Ls(_,ue))}function X0(_,N){return Br(_,Ls(N,ue))}var yg=Ja(function(_,N){return function(Se){return pf(Se,_,N)}}),Yp=Ja(function(_,N){return function(Se){return pf(_,Se,N)}});function Qp(_,N,Se){var Bt=ch(N),wr=ec(N,Bt);Se==null&&!(qf(N)&&(wr.length||!Bt.length))&&(Se=N,N=_,_=this,wr=ec(N,ch(N)));var nn=!(qf(Se)&&"chain"in Se)||!!Se.chain,Wn=Ed(_);return wo(wr,function(fi){var Ri=N[fi];_[fi]=Ri,Wn&&(_.prototype[fi]=function(){var Xa=this.__chain__;if(nn||Xa){var Ka=_(this.__wrapped__),So=Ka.__actions__=To(this.__actions__);return So.push({func:Ri,args:arguments,thisArg:_}),Ka.__chain__=Xa,Ka}return Ri.apply(_,Va([this.value()],arguments))})}),_}function hd(){return de._===this&&(de._=Hf),this}function K0(){}function Tv(_){return _=Js(_),Ja(function(N){return Ht(N,_)})}var jp=_h(Ao),_g=_h(Ho),xg=_h(bs);function Im(_){return Ua(_)?_l(Gu(_)):Tn(_)}function Rm(_){return function(N){return _==null?C:Pf(_,N)}}var Y0=Hd(),Lm=Hd(!0);function _0(){return[]}function x0(){return!1}function Dm(){return{}}function bg(){return""}function Eg(){return!0}function Jp(_,N){if(_=Js(_),_<1||_>Re)return[];var Se=Dt,Bt=Pl(_,Dt);N=Fs(N),_-=Dt;for(var wr=lf(Bt,N);++Se<_;)N(Se);return wr}function b0(_){return Ou(_)?Ao(_,Gu):Td(_)?[_]:To(wu(of(_)))}function Q0(_){var N=++Bc;return of(_)+N}var km=hu(function(_,N){return _+N},0),Sg=Hc("ceil"),Cg=hu(function(_,N){return _/N},1),wg=Hc("floor");function J0(_){return _&&_.length?_s(_,Zd,Uc):C}function Mv(_,N){return _&&_.length?_s(_,Fs(N,2),Uc):C}function q0(_){return dh(_,Zd)}function Ag(_,N){return dh(_,Fs(N,2))}function Fm(_){return _&&_.length?_s(_,Zd,Rf):C}function Bm(_,N){return _&&_.length?_s(_,Fs(N,2),Rf):C}var Nm=hu(function(_,N){return _*N},1),zm=Hc("round"),Tg=hu(function(_,N){return _-N},0);function Mg(_){return _&&_.length?wf(_,Zd):0}function yy(_,N){return _&&_.length?wf(_,Fs(N,2)):0}return Ur.after=Eo,Ur.ary=qa,Ur.assign=Zp,Ur.assignIn=ap,Ur.assignInWith=Pp,Ur.assignWith=cv,Ur.at=fv,Ur.before=Ss,Ur.bind=Is,Ur.bindAll=$p,Ur.bindKey=pu,Ur.castArray=td,Ur.chain=Li,Ur.chunk=Xl,Ur.compact=Ic,Ur.concat=Cl,Ur.cond=wv,Ur.conforms=Av,Ur.constant=y0,Ur.countBy=y,Ur.create=hv,Ur.curry=es,Ur.curryRight=$u,Ur.debounce=hl,Ur.defaults=r0,Ur.defaultsDeep=Zv,Ur.defer=Nl,Ur.delay=el,Ur.difference=rf,Ur.differenceBy=mf,Ur.differenceWith=lh,Ur.drop=pc,Ur.dropRight=fu,Ur.dropRightWhile=Cf,Ur.dropWhile=Uu,Ur.fill=Qf,Ur.filter=H,Ur.flatMap=tt,Ur.flatMapDeep=Rt,Ur.flatMapDepth=Ft,Ur.flatten=Ru,Ur.flattenDeep=nf,Ur.flattenDepth=pd,Ur.flip=af,Ur.flow=Rp,Ur.flowRight=Om,Ur.fromPairs=w,Ur.functions=zd,Ur.functionsIn=pv,Ur.groupBy=Cr,Ur.initial=ae,Ur.intersection=et,Ur.intersectionBy=Ie,Ur.intersectionWith=Ze,Ur.invert=$v,Ur.invertBy=bp,Ur.invokeMap=rn,Ur.iteratee=Gv,Ur.keyBy=yn,Ur.keys=ch,Ur.keysIn=Xh,Ur.map=vn,Ur.mapKeys=mv,Ur.mapValues=wm,Ur.matches=Wv,Ur.matchesProperty=X0,Ur.memoize=gf,Ur.merge=$0,Ur.mergeWith=i0,Ur.method=yg,Ur.methodOf=Yp,Ur.mixin=Qp,Ur.negate=zf,Ur.nthArg=Tv,Ur.omit=jv,Ur.omitBy=gv,Ur.once=Th,Ur.orderBy=$n,Ur.over=jp,Ur.overArgs=ed,Ur.overEvery=_g,Ur.overSome=xg,Ur.partial=Zf,Ur.partialRight=iu,Ur.partition=ri,Ur.pick=a0,Ur.pickBy=op,Ur.property=Im,Ur.propertyOf=Rm,Ur.pull=Tt,Ur.pullAll=qt,Ur.pullAllBy=Ot,Ur.pullAllWith=rr,Ur.pullAt=Xt,Ur.range=Y0,Ur.rangeRight=Lm,Ur.rearg=Uf,Ur.reject=Ii,Ur.remove=gr,Ur.rest=xh,Ur.reverse=Sr,Ur.sampleSize=Qi,Ur.set=s0,Ur.setWith=j0,Ur.shuffle=ja,Ur.slice=Wr,Ur.sortBy=ra,Ur.sortedUniq=ii,Ur.sortedUniqBy=b,Ur.split=gg,Ur.spread=Lu,Ur.tail=M,Ur.take=D,Ur.takeRight=P,Ur.takeRightWhile=V,Ur.takeWhile=q,Ur.tap=Ki,Ur.throttle=cl,Ur.thru=ua,Ur.toArray=N0,Ur.toPairs=Hv,Ur.toPairsIn=yv,Ur.toPath=b0,Ur.toPlainObject=ip,Ur.transform=u0,Ur.unary=sl,Ur.union=be,Ur.unionBy=$e,Ur.unionWith=_t,Ur.uniq=Gt,Ur.uniqBy=yr,Ur.uniqWith=$r,Ur.unset=l0,Ur.unzip=an,Ur.unzipWith=Un,Ur.update=c0,Ur.updateWith=H0,Ur.values=Ol,Ur.valuesIn=_v,Ur.without=ei,Ur.words=g0,Ur.wrap=Wu,Ur.xor=Jn,Ur.xorBy=Sn,Ur.xorWith=Xn,Ur.zip=ai,Ur.zipObject=ln,Ur.zipObjectDeep=pi,Ur.zipWith=gi,Ur.entries=Hv,Ur.entriesIn=yv,Ur.extend=ap,Ur.extendWith=Pp,Qp(Ur,Ur),Ur.add=km,Ur.attempt=Ip,Ur.camelCase=V0,Ur.capitalize=f0,Ur.ceil=Sg,Ur.clamp=xv,Ur.clone=Jf,Ur.cloneDeep=$f,Ur.cloneDeepWith=rd,Ur.cloneWith=Rc,Ur.conformsTo=wl,Ur.deburr=bv,Ur.defaultTo=Id,Ur.divide=Cg,Ur.endsWith=h0,Ur.eq=Mh,Ur.escape=Ev,Ur.escapeRegExp=Up,Ur.every=I,Ur.find=Q,Ur.findIndex=js,Ur.findKey=Wp,Ur.findLast=ge,Ur.findLastIndex=Pu,Ur.findLastKey=z0,Ur.floor=wg,Ur.forEach=Jt,Ur.forEachRight=dr,Ur.forIn=n0,Ur.forInRight=Z0,Ur.forOwn=U0,Ur.forOwnRight=dv,Ur.get=Uv,Ur.gt=fd,Ur.gte=Wd,Ur.has=Cp,Ur.hasIn=vv,Ur.head=G,Ur.identity=Zd,Ur.includes=tn,Ur.indexOf=Ce,Ur.inRange=Xp,Ur.invoke=Op,Ur.isArguments=oc,Ur.isArray=Ou,Ur.isArrayBuffer=Od,Ur.isArrayLike=Wh,Ur.isArrayLikeObject=yf,Ur.isBoolean=Ep,Ur.isBuffer=bd,Ur.isDate=ml,Ur.isElement=vc,Ur.isEmpty=vd,Ur.isEqual=Ad,Ur.isEqualWith=Fd,Ur.isError=yp,Ur.isFinite=Ph,Ur.isFunction=Ed,Ur.isInteger=Bd,Ur.isLength=Jd,Ur.isMap=Bv,Ur.isMatch=nv,Ur.isMatchWith=iv,Ur.isNaN=av,Ur.isNative=ov,Ur.isNil=Nd,Ur.isNull=sv,Ur.isNumber=uv,Ur.isObject=qf,Ur.isObjectLike=bh,Ur.isPlainObject=_p,Ur.isRegExp=Np,Ur.isSafeInteger=zp,Ur.isSet=Sp,Ur.isString=xp,Ur.isSymbol=Td,Ur.isTypedArray=rp,Ur.isUndefined=t0,Ur.isWeakMap=F0,Ur.isWeakSet=Nv,Ur.join=Fe,Ur.kebabCase=Am,Ur.last=it,Ur.lastIndexOf=gt,Ur.lowerCase=Tm,Ur.lowerFirst=lp,Ur.lt=B0,Ur.lte=lv,Ur.max=J0,Ur.maxBy=Mv,Ur.mean=q0,Ur.meanBy=Ag,Ur.min=Fm,Ur.minBy=Bm,Ur.stubArray=_0,Ur.stubFalse=x0,Ur.stubObject=Dm,Ur.stubString=bg,Ur.stubTrue=Eg,Ur.multiply=Nm,Ur.nth=It,Ur.noConflict=hd,Ur.noop=K0,Ur.now=bo,Ur.pad=Sv,Ur.padEnd=wp,Ur.padStart=Kd,Ur.parseInt=Kp,Ur.random=Vv,Ur.reduce=_i,Ur.reduceRight=xi,Ur.repeat=Ap,Ur.replace=G0,Ur.result=o0,Ur.round=zm,Ur.runInContext=Qn,Ur.sample=ta,Ur.size=qn,Ur.snakeCase=mg,Ur.some=ca,Ur.sortedIndex=Cn,Ur.sortedIndexBy=xn,Ur.sortedIndexOf=In,Ur.sortedLastIndex=Rn,Ur.sortedLastIndexBy=Gn,Ur.sortedLastIndexOf=ti,Ur.startCase=py,Ur.startsWith=M_,Ur.subtract=Tg,Ur.sum=Mg,Ur.sumBy=yy,Ur.template=W0,Ur.times=Jp,Ur.toFinite=qd,Ur.toInteger=Js,Ur.toLength=np,Ur.toLower=d0,Ur.toNumber=Xd,Ur.toSafeInteger=zv,Ur.toString=of,Ur.toUpper=Cv,Ur.trim=p0,Ur.trimEnd=Mm,Ur.trimStart=Pm,Ur.truncate=vy,Ur.unescape=gy,Ur.uniqueId=Q0,Ur.upperCase=v0,Ur.upperFirst=m0,Ur.each=Jt,Ur.eachRight=dr,Ur.first=G,Qp(Ur,function(){var _={};return qu(Ur,function(N,Se){uu.call(Ur.prototype,Se)||(_[Se]=N)}),_}(),{chain:!1}),Ur.VERSION=l,wo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){Ur[_].placeholder=Ur}),wo(["drop","take"],function(_,N){du.prototype[_]=function(Se){Se=Se===C?1:eu(Js(Se),0);var Bt=this.__filtered__&&!N?new du(this):this.clone();return Bt.__filtered__?Bt.__takeCount__=Pl(Se,Bt.__takeCount__):Bt.__views__.push({size:Pl(Se,Dt),type:_+(Bt.__dir__<0?"Right":"")}),Bt},du.prototype[_+"Right"]=function(Se){return this.reverse()[_](Se).reverse()}}),wo(["filter","map","takeWhile"],function(_,N){var Se=N+1,Bt=Se==Ve||Se==ze;du.prototype[_]=function(wr){var nn=this.clone();return nn.__iteratees__.push({iteratee:Fs(wr,3),type:Se}),nn.__filtered__=nn.__filtered__||Bt,nn}}),wo(["head","last"],function(_,N){var Se="take"+(N?"Right":"");du.prototype[_]=function(){return this[Se](1).value()[0]}}),wo(["initial","tail"],function(_,N){var Se="drop"+(N?"":"Right");du.prototype[_]=function(){return this.__filtered__?new du(this):this[Se](1)}}),du.prototype.compact=function(){return this.filter(Zd)},du.prototype.find=function(_){return this.filter(_).head()},du.prototype.findLast=function(_){return this.reverse().find(_)},du.prototype.invokeMap=Ja(function(_,N){return typeof _=="function"?new du(this):this.map(function(Se){return pf(Se,_,N)})}),du.prototype.reject=function(_){return this.filter(zf(Fs(_)))},du.prototype.slice=function(_,N){_=Js(_);var Se=this;return Se.__filtered__&&(_>0||N<0)?new du(Se):(_<0?Se=Se.takeRight(-_):_&&(Se=Se.drop(_)),N!==C&&(N=Js(N),Se=N<0?Se.dropRight(-N):Se.take(N-_)),Se)},du.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},du.prototype.toArray=function(){return this.take(Dt)},qu(du.prototype,function(_,N){var Se=/^(?:filter|find|map|reject)|While$/.test(N),Bt=/^(?:head|last)$/.test(N),wr=Ur[Bt?"take"+(N=="last"?"Right":""):N],nn=Bt||/^find/.test(N);wr&&(Ur.prototype[N]=function(){var Wn=this.__wrapped__,fi=Bt?[1]:arguments,Ri=Wn instanceof du,Xa=fi[0],Ka=Ri||Ou(Wn),So=function(jl){var sc=wr.apply(Ur,Va([jl],fi));return Bt&&Ms?sc[0]:sc};Ka&&Se&&typeof Xa=="function"&&Xa.length!=1&&(Ri=Ka=!1);var Ms=this.__chain__,bu=!!this.__actions__.length,ju=nn&&!Ms,zl=Ri&&!bu;if(!nn&&Ka){Wn=zl?Wn:new du(this);var Hu=_.apply(Wn,fi);return Hu.__actions__.push({func:ua,args:[So],thisArg:C}),new Qo(Hu,Ms)}return ju&&zl?_.apply(this,fi):(Hu=this.thru(So),ju?Bt?Hu.value()[0]:Hu.value():Hu)})}),wo(["pop","push","shift","sort","splice","unshift"],function(_){var N=Qh[_],Se=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",Bt=/^(?:pop|shift)$/.test(_);Ur.prototype[_]=function(){var wr=arguments;if(Bt&&!this.__chain__){var nn=this.value();return N.apply(Ou(nn)?nn:[],wr)}return this[Se](function(Wn){return N.apply(Ou(Wn)?Wn:[],wr)})}}),qu(du.prototype,function(_,N){var Se=Ur[N];if(Se){var Bt=Se.name+"";uu.call(Kc,Bt)||(Kc[Bt]=[]),Kc[Bt].push({name:N,func:Se})}}),Kc[Pc(C,je).name]=[{name:"wrapper",func:C}],du.prototype.clone=kh,du.prototype.reverse=Wf,du.prototype.value=zc,Ur.prototype.at=la,Ur.prototype.chain=Lo,Ur.prototype.commit=Fa,Ur.prototype.next=go,Ur.prototype.plant=e,Ur.prototype.reverse=i,Ur.prototype.toJSON=Ur.prototype.valueOf=Ur.prototype.value=c,Ur.prototype.first=Ur.prototype.head,Hh&&(Ur.prototype[Hh]=Qs),Ur},nh=Mf();de._=nh,v=function(){return nh}.call(te,m,te,Qe),v!==C&&(Qe.exports=v)}).call(this)},82492:function(Qe,te,m){var v=m(42980),C=m(21463),l=C(function($,R,z){v($,R,z)});Qe.exports=l},7771:function(Qe,te,m){var v=m(55639),C=function(){return v.Date.now()};Qe.exports=C},70479:function(Qe){function te(){return[]}Qe.exports=te},95062:function(Qe){function te(){return!1}Qe.exports=te},14841:function(Qe,te,m){var v=m(4107),C=m(13218),l=m(33448),$=0/0,R=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,L=/^0o[0-7]+$/i,T=parseInt;function O(F){if(typeof F=="number")return F;if(l(F))return $;if(C(F)){var ue=typeof F.valueOf=="function"?F.valueOf():F;F=C(ue)?ue+"":ue}if(typeof F!="string")return F===0?F:+F;F=v(F);var Ae=z.test(F);return Ae||L.test(F)?T(F.slice(2),Ae?2:8):R.test(F)?$:+F}Qe.exports=O},59881:function(Qe,te,m){var v=m(98363),C=m(81704);function l($){return v($,C($))}Qe.exports=l},6158:function(Qe){(function(te,m){Qe.exports=m()})(this,function(){"use strict";var te,m,v;function C(l,$){if(!te)te=$;else if(!m)m=$;else{var R="var sharedChunk = {}; ("+te+")(sharedChunk); ("+m+")(sharedChunk);",z={};te(z),v=$(z),typeof window!="undefined"&&(v.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}return C(["exports"],function(l){"use strict";function $(e,i){return e(i={exports:{}},i.exports),i.exports}var R=z;function z(e,i,c,y){this.cx=3*e,this.bx=3*(c-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(y-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=y,this.p2x=c,this.p2y=y}z.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},z.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},z.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},z.prototype.solveCurveX=function(e,i){var c,y,I,H,Q;for(i===void 0&&(i=1e-6),I=e,Q=0;Q<8;Q++){if(H=this.sampleCurveX(I)-e,Math.abs(H)<i)return I;var ge=this.sampleCurveDerivativeX(I);if(Math.abs(ge)<1e-6)break;I-=H/ge}if((I=e)<(c=0))return c;if(I>(y=1))return y;for(;c<y;){if(H=this.sampleCurveX(I),Math.abs(H-e)<i)return I;e>H?c=I:y=I,I=.5*(y-c)+c}return I},z.prototype.solve=function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))};var L=T;function T(e,i){this.x=e,this.y=i}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,i){return this.clone()._rotateAround(e,i)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var i=e.x-this.x,c=e.y-this.y;return i*i+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,i){return Math.atan2(this.x*i-this.y*e,this.x*e+this.y*i)},_matMult:function(e){var i=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var i=Math.cos(e),c=Math.sin(e),y=c*this.x+i*this.y;return this.x=i*this.x-c*this.y,this.y=y,this},_rotateAround:function(e,i){var c=Math.cos(e),y=Math.sin(e),I=i.y+y*(this.x-i.x)+c*(this.y-i.y);return this.x=i.x+c*(this.x-i.x)-y*(this.y-i.y),this.y=I,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},T.convert=function(e){return e instanceof T?e:Array.isArray(e)?new T(e[0],e[1]):e};var O=typeof self!="undefined"?self:{},F=Math.pow(2,53)-1;function ue(e,i,c,y){var I=new R(e,i,c,y);return function(H){return I.solve(H)}}var Ae=ue(.25,.1,.25,1);function re(e,i,c){return Math.min(c,Math.max(i,e))}function pe(e,i,c){var y=c-i,I=((e-i)%y+y)%y+i;return I===i?c:I}function fe(e){for(var i=[],c=arguments.length-1;c-- >0;)i[c]=arguments[c+1];for(var y=0,I=i;y<I.length;y+=1){var H=I[y];for(var Q in H)e[Q]=H[Q]}return e}var ke=1;function je(){return ke++}function bt(){return function e(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function ut(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function wt(e,i){e.forEach(function(c){i[c]&&(i[c]=i[c].bind(i))})}function se(e,i){return e.indexOf(i,e.length-i.length)!==-1}function qe(e,i,c){var y={};for(var I in e)y[I]=i.call(c||this,e[I],I,e);return y}function me(e,i,c){var y={};for(var I in e)i.call(c||this,e[I],I,e)&&(y[I]=e[I]);return y}function _e(e){return Array.isArray(e)?e.map(_e):typeof e=="object"&&e?qe(e,_e):e}var Te={};function ht(e){Te[e]||(typeof console!="undefined"&&console.warn(e),Te[e]=!0)}function We(e,i,c){return(c.y-e.y)*(i.x-e.x)>(i.y-e.y)*(c.x-e.x)}function Ne(e){for(var i=0,c=0,y=e.length,I=y-1,H=void 0,Q=void 0;c<y;I=c++)i+=((Q=e[I]).x-(H=e[c]).x)*(H.y+Q.y);return i}function he(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Ve(e){var i={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(y,I,H,Q){var ge=H||Q;return i[I]=!ge||ge.toLowerCase(),""}),i["max-age"]){var c=parseInt(i["max-age"],10);isNaN(c)?delete i["max-age"]:i["max-age"]=c}return i}var ie=null;function ze(e){if(ie==null){var i=e.navigator?e.navigator.userAgent:null;ie=!!e.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ie}function Le(e){try{var i=O[e];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch(c){return!1}}var Re,st,vt,Dt,ar=O.performance&&O.performance.now?O.performance.now.bind(O.performance):Date.now.bind(Date),$t=O.requestAnimationFrame||O.mozRequestAnimationFrame||O.webkitRequestAnimationFrame||O.msRequestAnimationFrame,ur=O.cancelAnimationFrame||O.mozCancelAnimationFrame||O.webkitCancelAnimationFrame||O.msCancelAnimationFrame,we={now:ar,frame:function(e){var i=$t(e);return{cancel:function(){return ur(i)}}},getImageData:function(e,i){i===void 0&&(i=0);var c=O.document.createElement("canvas"),y=c.getContext("2d");if(!y)throw new Error("failed to create canvas 2d context");return c.width=e.width,c.height=e.height,y.drawImage(e,0,0,e.width,e.height),y.getImageData(-i,-i,e.width+2*i,e.height+2*i)},resolveURL:function(e){return Re||(Re=O.document.createElement("a")),Re.href=e,Re.href},hardwareConcurrency:O.navigator&&O.navigator.hardwareConcurrency||4,get devicePixelRatio(){return O.devicePixelRatio},get prefersReducedMotion(){return!!O.matchMedia&&(st==null&&(st=O.matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}},At={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},nt={supported:!1,testSupport:function(e){!Lt&&Dt&&(St?Ut(e):vt=e)}},Lt=!1,St=!1;function Ut(e){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Dt),e.isContextLost())return;nt.supported=!0}catch(c){}e.deleteTexture(i),Lt=!0}O.document&&((Dt=O.document.createElement("img")).onload=function(){vt&&Ut(vt),vt=null,St=!0},Dt.onerror=function(){Lt=!0,vt=null},Dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var lt="01",Et=function(e,i){this._transformRequestFn=e,this._customAccessToken=i,this._createSkuToken()};function Zt(e){return e.indexOf("mapbox:")===0}Et.prototype._createSkuToken=function(){var e=function(){for(var i="",c=0;c<10;c++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",lt,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Et.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Et.prototype.transformRequest=function(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}},Et.prototype.normalizeStyleURL=function(e,i){if(!Zt(e))return e;var c=Z(e);return c.path="/styles/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||i)},Et.prototype.normalizeGlyphsURL=function(e,i){if(!Zt(e))return e;var c=Z(e);return c.path="/fonts/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||i)},Et.prototype.normalizeSourceURL=function(e,i){if(!Zt(e))return e;var c=Z(e);return c.path="/v4/"+c.authority+".json",c.params.push("secure"),this._makeAPIURL(c,this._customAccessToken||i)},Et.prototype.normalizeSpriteURL=function(e,i,c,y){var I=Z(e);return Zt(e)?(I.path="/styles/v1"+I.path+"/sprite"+i+c,this._makeAPIURL(I,this._customAccessToken||y)):(I.path+=""+i+c,J(I))},Et.prototype.normalizeTileURL=function(e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Zt(e))return e;var c=Z(e);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,(we.devicePixelRatio>=2||i===512?"@2x":"")+(nt.supported?".webp":"$1")),c.path=c.path.replace(/^.+\/v4\//,"/"),c.path="/v4"+c.path;var y=this._customAccessToken||function(I){for(var H=0,Q=I;H<Q.length;H+=1){var ge=Q[H].match(/^access_token=(.*)$/);if(ge)return ge[1]}return null}(c.params)||At.ACCESS_TOKEN;return At.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&c.params.push("sku="+this._skuToken),this._makeAPIURL(c,y)},Et.prototype.canonicalizeTileURL=function(e,i){var c=Z(e);if(!c.path.match(/(^\/v4\/)/)||!c.path.match(/\.[\w]+$/))return e;var y="mapbox://tiles/";y+=c.path.replace("/v4/","");var I=c.params;return i&&(I=I.filter(function(H){return!H.match(/^access_token=/)})),I.length&&(y+="?"+I.join("&")),y},Et.prototype.canonicalizeTileset=function(e,i){for(var c=!!i&&Zt(i),y=[],I=0,H=e.tiles||[];I<H.length;I+=1){var Q=H[I];He(Q)?y.push(this.canonicalizeTileURL(Q,c)):y.push(Q)}return y},Et.prototype._makeAPIURL=function(e,i){var c="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",y=Z(At.API_URL);if(e.protocol=y.protocol,e.authority=y.authority,e.protocol==="http"){var I=e.params.indexOf("secure");I>=0&&e.params.splice(I,1)}if(y.path!=="/"&&(e.path=""+y.path+e.path),!At.REQUIRE_ACCESS_TOKEN)return J(e);if(!(i=i||At.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params=e.params.filter(function(H){return H.indexOf("access_token")===-1}),e.params.push("access_token="+i),J(e)};var Be=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function He(e){return Be.test(e)}var ft=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Z(e){var i=e.match(ft);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function J(e){var i=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+i}function K(e){if(!e)return null;var i=e.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(O.atob(i[1]).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(c){return null}}var B=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};B.prototype.getStorageKey=function(e){var i,c=K(At.ACCESS_TOKEN);return i=c&&c.u?O.btoa(encodeURIComponent(c.u).replace(/%([0-9A-F]{2})/g,function(y,I){return String.fromCharCode(Number("0x"+I))})):At.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+i:"mapbox.eventData:"+i},B.prototype.fetchEventData=function(){var e=Le("localStorage"),i=this.getStorageKey(),c=this.getStorageKey("uuid");if(e)try{var y=O.localStorage.getItem(i);y&&(this.eventData=JSON.parse(y));var I=O.localStorage.getItem(c);I&&(this.anonId=I)}catch(H){ht("Unable to read from LocalStorage")}},B.prototype.saveEventData=function(){var e=Le("localStorage"),i=this.getStorageKey(),c=this.getStorageKey("uuid");if(e)try{O.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&O.localStorage.setItem(i,JSON.stringify(this.eventData))}catch(y){ht("Unable to write to LocalStorage")}},B.prototype.processRequests=function(e){},B.prototype.postEvent=function(e,i,c,y){var I=this;if(At.EVENTS_URL){var H=Z(At.EVENTS_URL);H.params.push("access_token="+(y||At.ACCESS_TOKEN||""));var Q={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:lt,userId:this.anonId},ge=i?fe(Q,i):Q,tt={url:J(H),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ge])};this.pendingRequest=Nr(tt,function(Rt){I.pendingRequest=null,c(Rt),I.saveEventData(),I.processRequests(y)})}},B.prototype.queueRequest=function(e,i){this.queue.push(e),this.processRequests(i)};var j,ee,W=function(e){function i(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(c,y,I,H){this.skuToken=I;var Q=!(!H&&!At.ACCESS_TOKEN),ge=Array.isArray(c)&&c.some(function(tt){return Zt(tt)||He(tt)});At.EVENTS_URL&&Q&&ge&&this.queueRequest({id:y,timestamp:Date.now()},H)},i.prototype.processRequests=function(c){var y=this;if(!this.pendingRequest&&this.queue.length!==0){var I=this.queue.shift(),H=I.id,Q=I.timestamp;H&&this.success[H]||(this.anonId||this.fetchEventData(),ut(this.anonId)||(this.anonId=bt()),this.postEvent(Q,{skuToken:this.skuToken},function(ge){ge||H&&(y.success[H]=!0)},c))}},i}(B),De=new(function(e){function i(c){e.call(this,"appUserTurnstile"),this._customAccessToken=c}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(c,y){At.EVENTS_URL&&At.ACCESS_TOKEN&&Array.isArray(c)&&c.some(function(I){return Zt(I)||He(I)})&&this.queueRequest(Date.now(),y)},i.prototype.processRequests=function(c){var y=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var I=K(At.ACCESS_TOKEN),H=I?I.u:At.ACCESS_TOKEN,Q=H!==this.eventData.tokenU;ut(this.anonId)||(this.anonId=bt(),Q=!0);var ge=this.queue.shift();if(this.eventData.lastSuccess){var tt=new Date(this.eventData.lastSuccess),Rt=new Date(ge),Ft=(ge-this.eventData.lastSuccess)/864e5;Q=Q||Ft>=1||Ft<-1||tt.getDate()!==Rt.getDate()}else Q=!0;if(!Q)return this.processRequests();this.postEvent(ge,{"enabled.telemetry":!1},function(Jt){Jt||(y.eventData.lastSuccess=ge,y.eventData.tokenU=H)},c)}},i}(B)),ot=De.postTurnstileEvent.bind(De),Wt=new W,Ct=Wt.postMapLoadEvent.bind(Wt),Qt=500,ir=50;function Er(){O.caches&&!j&&(j=O.caches.open("mapbox-tiles"))}function Qr(e){var i=e.indexOf("?");return i<0?e:e.slice(0,i)}var Mt,br=1/0;function Nt(){return Mt==null&&(Mt=O.OffscreenCanvas&&new O.OffscreenCanvas(1,1).getContext("2d")&&typeof O.createImageBitmap=="function"),Mt}var Pr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Pr);var _r=function(e){function i(c,y,I){y===401&&He(I)&&(c+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,c),this.status=y,this.url=I,this.name=this.constructor.name,this.message=c}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),kr=he()?function(){return self.worker&&self.worker.referrer}:function(){return(O.location.protocol==="blob:"?O.parent:O).location.href},zt,mr,Or=function(e,i){if(!(/^file:/.test(c=e.url)||/^file:/.test(kr())&&!/^\w+:/.test(c))){if(O.fetch&&O.Request&&O.AbortController&&O.Request.prototype.hasOwnProperty("signal"))return function(y,I){var H,Q=new O.AbortController,ge=new O.Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:kr(),signal:Q.signal}),tt=!1,Rt=!1,Ft=(H=ge.url).indexOf("sku=")>0&&He(H);y.type==="json"&&ge.headers.set("Accept","application/json");var Jt=function(Cr,tn,rn){if(!Rt){if(Cr&&Cr.message!=="SecurityError"&&ht(Cr),tn&&rn)return dr(tn);var yn=Date.now();O.fetch(ge).then(function(vn){if(vn.ok){var $n=Ft?vn.clone():null;return dr(vn,$n,yn)}return I(new _r(vn.statusText,vn.status,y.url))}).catch(function(vn){vn.code!==20&&I(new Error(vn.message))})}},dr=function(Cr,tn,rn){(y.type==="arrayBuffer"?Cr.arrayBuffer():y.type==="json"?Cr.json():Cr.text()).then(function(yn){Rt||(tn&&rn&&function(vn,$n,ri){if(Er(),j){var _i={status:$n.status,statusText:$n.statusText,headers:new O.Headers};$n.headers.forEach(function(Ii,ta){return _i.headers.set(ta,Ii)});var xi=Ve($n.headers.get("Cache-Control")||"");xi["no-store"]||(xi["max-age"]&&_i.headers.set("Expires",new Date(ri+1e3*xi["max-age"]).toUTCString()),new Date(_i.headers.get("Expires")).getTime()-ri<42e4||function(Ii,ta){if(ee===void 0)try{new Response(new ReadableStream),ee=!0}catch(Qi){ee=!1}ee?ta(Ii.body):Ii.blob().then(ta)}($n,function(Ii){var ta=new O.Response(Ii,_i);Er(),j&&j.then(function(Qi){return Qi.put(Qr(vn.url),ta)}).catch(function(Qi){return ht(Qi.message)})}))}}(ge,tn,rn),tt=!0,I(null,yn,Cr.headers.get("Cache-Control"),Cr.headers.get("Expires")))}).catch(function(yn){Rt||I(new Error(yn.message))})};return Ft?function(Cr,tn){if(Er(),!j)return tn(null);var rn=Qr(Cr.url);j.then(function(yn){yn.match(rn).then(function(vn){var $n=function(ri){if(!ri)return!1;var _i=new Date(ri.headers.get("Expires")||0),xi=Ve(ri.headers.get("Cache-Control")||"");return _i>Date.now()&&!xi["no-cache"]}(vn);yn.delete(rn),$n&&yn.put(rn,vn.clone()),tn(null,vn,$n)}).catch(tn)}).catch(tn)}(ge,Jt):Jt(null,null),{cancel:function(){Rt=!0,tt||Q.abort()}}}(e,i);if(he()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,i,void 0,!0)}var c;return function(y,I){var H=new O.XMLHttpRequest;for(var Q in H.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(H.responseType="arraybuffer"),y.headers)H.setRequestHeader(Q,y.headers[Q]);return y.type==="json"&&(H.responseType="text",H.setRequestHeader("Accept","application/json")),H.withCredentials=y.credentials==="include",H.onerror=function(){I(new Error(H.statusText))},H.onload=function(){if((H.status>=200&&H.status<300||H.status===0)&&H.response!==null){var ge=H.response;if(y.type==="json")try{ge=JSON.parse(H.response)}catch(tt){return I(tt)}I(null,ge,H.getResponseHeader("Cache-Control"),H.getResponseHeader("Expires"))}else I(new _r(H.statusText,H.status,y.url))},H.send(y.body),{cancel:function(){return H.abort()}}}(e,i)},X=function(e,i){return Or(fe(e,{type:"arrayBuffer"}),i)},Nr=function(e,i){return Or(fe(e,{method:"POST"}),i)},Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";zt=[],mr=0;var xe=function(e,i){if(nt.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),mr>=At.MAX_PARALLEL_IMAGE_REQUESTS){var c={requestParameters:e,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return zt.push(c),c}mr++;var y=!1,I=function(){if(!y)for(y=!0,mr--;zt.length&&mr<At.MAX_PARALLEL_IMAGE_REQUESTS;){var Q=zt.shift();Q.cancelled||(Q.cancel=xe(Q.requestParameters,Q.callback).cancel)}},H=X(e,function(Q,ge,tt,Rt){I(),Q?i(Q):ge&&(Nt()?function(Ft,Jt){var dr=new O.Blob([new Uint8Array(Ft)],{type:"image/png"});O.createImageBitmap(dr).then(function(Cr){Jt(null,Cr)}).catch(function(Cr){Jt(new Error("Could not load image because of "+Cr.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ge,i):function(Ft,Jt,dr,Cr){var tn=new O.Image,rn=O.URL;tn.onload=function(){Jt(null,tn),rn.revokeObjectURL(tn.src),tn.onload=null,O.requestAnimationFrame(function(){tn.src=Xe})},tn.onerror=function(){return Jt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var yn=new O.Blob([new Uint8Array(Ft)],{type:"image/png"});tn.cacheControl=dr,tn.expires=Cr,tn.src=Ft.byteLength?rn.createObjectURL(yn):Xe}(ge,i,tt,Rt))});return{cancel:function(){H.cancel(),I()}}};function rt(e,i,c){c[e]&&c[e].indexOf(i)!==-1||(c[e]=c[e]||[],c[e].push(i))}function kt(e,i,c){if(c&&c[e]){var y=c[e].indexOf(i);y!==-1&&c[e].splice(y,1)}}var cr=function(e,i){i===void 0&&(i={}),fe(this,i),this.type=e},Ar=function(e){function i(c,y){y===void 0&&(y={}),e.call(this,"error",fe({error:c},y))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(cr),Lr=function(){};Lr.prototype.on=function(e,i){return this._listeners=this._listeners||{},rt(e,i,this._listeners),this},Lr.prototype.off=function(e,i){return kt(e,i,this._listeners),kt(e,i,this._oneTimeListeners),this},Lr.prototype.once=function(e,i){return this._oneTimeListeners=this._oneTimeListeners||{},rt(e,i,this._oneTimeListeners),this},Lr.prototype.fire=function(e,i){typeof e=="string"&&(e=new cr(e,i||{}));var c=e.type;if(this.listens(c)){e.target=this;for(var y=0,I=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];y<I.length;y+=1)I[y].call(this,e);for(var H=0,Q=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];H<Q.length;H+=1){var ge=Q[H];kt(c,ge,this._oneTimeListeners),ge.call(this,e)}var tt=this._eventedParent;tt&&(fe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),tt.fire(e))}else e instanceof Ar&&console.error(e.error);return this},Lr.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Lr.prototype.setEventedParent=function(e,i){return this._eventedParent=e,this._eventedParentData=i,this};var sr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ge=function(e,i,c,y){this.message=(e?e+": ":"")+c,y&&(this.identifier=y),i!=null&&i.__line__&&(this.line=i.__line__)};function Gr(e){var i=e.value;return i?[new Ge(e.key,i,"constants have been deprecated as of v8")]:[]}function on(e){for(var i=[],c=arguments.length-1;c-- >0;)i[c]=arguments[c+1];for(var y=0,I=i;y<I.length;y+=1){var H=I[y];for(var Q in H)e[Q]=H[Q]}return e}function cn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Dn(e){if(Array.isArray(e))return e.map(Dn);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var i={};for(var c in e)i[c]=Dn(e[c]);return i}return cn(e)}var ci=function(e){function i(c,y){e.call(this,y),this.message=y,this.key=c}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Error),ia=function(e,i){i===void 0&&(i=[]),this.parent=e,this.bindings={};for(var c=0,y=i;c<y.length;c+=1){var I=y[c];this.bindings[I[0]]=I[1]}};ia.prototype.concat=function(e){return new ia(this,e)},ia.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},ia.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Vi={kind:"null"},On={kind:"number"},ji={kind:"string"},oi={kind:"boolean"},Hi={kind:"color"},Ca={kind:"object"},Wi={kind:"value"},jo={kind:"collator"},uo={kind:"formatted"},Pn={kind:"resolvedImage"};function bn(e,i){return{kind:"array",itemType:e,N:i}}function Oi(e){if(e.kind==="array"){var i=Oi(e.itemType);return typeof e.N=="number"?"array<"+i+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+i+">"}return e.kind}var di=[Vi,On,ji,oi,Hi,uo,Ca,bn(Wi),Pn];function va(e,i){if(i.kind==="error")return null;if(e.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!va(e.itemType,i.itemType))&&(typeof e.N!="number"||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if(e.kind==="value"){for(var c=0,y=di;c<y.length;c+=1)if(!va(y[c],i))return null}}return"Expected "+Oi(e)+" but found "+Oi(i)+" instead."}function wa(e,i){return i.some(function(c){return c.kind===e.kind})}function Aa(e,i){return i.some(function(c){return c==="null"?e===null:c==="array"?Array.isArray(e):c==="object"?e&&!Array.isArray(e)&&typeof e=="object":c===typeof e})}var Ta=$(function(e,i){var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function y(ge){return(ge=Math.round(ge))<0?0:ge>255?255:ge}function I(ge){return y(ge[ge.length-1]==="%"?parseFloat(ge)/100*255:parseInt(ge))}function H(ge){return(tt=ge[ge.length-1]==="%"?parseFloat(ge)/100:parseFloat(ge))<0?0:tt>1?1:tt;var tt}function Q(ge,tt,Rt){return Rt<0?Rt+=1:Rt>1&&(Rt-=1),6*Rt<1?ge+(tt-ge)*Rt*6:2*Rt<1?tt:3*Rt<2?ge+(tt-ge)*(2/3-Rt)*6:ge}try{i.parseCSSColor=function(ge){var tt,Rt=ge.replace(/ /g,"").toLowerCase();if(Rt in c)return c[Rt].slice();if(Rt[0]==="#")return Rt.length===4?(tt=parseInt(Rt.substr(1),16))>=0&&tt<=4095?[(3840&tt)>>4|(3840&tt)>>8,240&tt|(240&tt)>>4,15&tt|(15&tt)<<4,1]:null:Rt.length===7&&(tt=parseInt(Rt.substr(1),16))>=0&&tt<=16777215?[(16711680&tt)>>16,(65280&tt)>>8,255&tt,1]:null;var Ft=Rt.indexOf("("),Jt=Rt.indexOf(")");if(Ft!==-1&&Jt+1===Rt.length){var dr=Rt.substr(0,Ft),Cr=Rt.substr(Ft+1,Jt-(Ft+1)).split(","),tn=1;switch(dr){case"rgba":if(Cr.length!==4)return null;tn=H(Cr.pop());case"rgb":return Cr.length!==3?null:[I(Cr[0]),I(Cr[1]),I(Cr[2]),tn];case"hsla":if(Cr.length!==4)return null;tn=H(Cr.pop());case"hsl":if(Cr.length!==3)return null;var rn=(parseFloat(Cr[0])%360+360)%360/360,yn=H(Cr[1]),vn=H(Cr[2]),$n=vn<=.5?vn*(yn+1):vn+yn-vn*yn,ri=2*vn-$n;return[y(255*Q(ri,$n,rn+1/3)),y(255*Q(ri,$n,rn)),y(255*Q(ri,$n,rn-1/3)),tn];default:return null}}return null}}catch(ge){}}).parseCSSColor,ma=function(e,i,c,y){y===void 0&&(y=1),this.r=e,this.g=i,this.b=c,this.a=y};ma.parse=function(e){if(e){if(e instanceof ma)return e;if(typeof e=="string"){var i=Ta(e);if(i)return new ma(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},ma.prototype.toString=function(){var e=this.toArray(),i=e[1],c=e[2],y=e[3];return"rgba("+Math.round(e[0])+","+Math.round(i)+","+Math.round(c)+","+y+")"},ma.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},ma.black=new ma(0,0,0,1),ma.white=new ma(1,1,1,1),ma.transparent=new ma(0,0,0,0),ma.red=new ma(1,0,0,1);var Da=function(e,i,c){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Da.prototype.compare=function(e,i){return this.collator.compare(e,i)},Da.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Uo=function(e,i,c,y,I){this.text=e,this.image=i,this.scale=c,this.fontStack=y,this.textColor=I},ha=function(e){this.sections=e};ha.fromString=function(e){return new ha([new Uo(e,null,null,null,null)])},ha.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},ha.factory=function(e){return e instanceof ha?e:ha.fromString(e)},ha.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},ha.prototype.serialize=function(){for(var e=["format"],i=0,c=this.sections;i<c.length;i+=1){var y=c[i];if(y.image)e.push(["image",y.image.name]);else{e.push(y.text);var I={};y.fontStack&&(I["text-font"]=["literal",y.fontStack.split(",")]),y.scale&&(I["font-scale"]=y.scale),y.textColor&&(I["text-color"]=["rgba"].concat(y.textColor.toArray())),e.push(I)}}return e};var xa=function(e){this.name=e.name,this.available=e.available};function eo(e,i,c,y){return typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof c=="number"&&c>=0&&c<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:"Invalid rgba value ["+[e,i,c,y].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof y=="number"?[e,i,c,y]:[e,i,c]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ee(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ma||e instanceof Da||e instanceof ha||e instanceof xa)return!0;if(Array.isArray(e)){for(var i=0,c=e;i<c.length;i+=1)if(!Ee(c[i]))return!1;return!0}if(typeof e=="object"){for(var y in e)if(!Ee(e[y]))return!1;return!0}return!1}function Po(e){if(e===null)return Vi;if(typeof e=="string")return ji;if(typeof e=="boolean")return oi;if(typeof e=="number")return On;if(e instanceof ma)return Hi;if(e instanceof Da)return jo;if(e instanceof ha)return uo;if(e instanceof xa)return Pn;if(Array.isArray(e)){for(var i,c=e.length,y=0,I=e;y<I.length;y+=1){var H=Po(I[y]);if(i){if(i===H)continue;i=Wi;break}i=H}return bn(i||Wi,c)}return Ca}function Hs(e){var i=typeof e;return e===null?"":i==="string"||i==="number"||i==="boolean"?String(e):e instanceof ma||e instanceof ha||e instanceof xa?e.toString():JSON.stringify(e)}xa.prototype.toString=function(){return this.name},xa.fromString=function(e){return e?new xa({name:e,available:!1}):null},xa.prototype.serialize=function(){return["image",this.name]};var no=function(e,i){this.type=e,this.value=i};no.parse=function(e,i){if(e.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Ee(e[1]))return i.error("invalid value");var c=e[1],y=Po(c),I=i.expectedType;return y.kind!=="array"||y.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(y=I),new no(y,c)},no.prototype.evaluate=function(){return this.value},no.prototype.eachChild=function(){},no.prototype.outputDefined=function(){return!0},no.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ma?["rgba"].concat(this.value.toArray()):this.value instanceof ha?this.value.serialize():this.value};var qo=function(e){this.name="ExpressionEvaluationError",this.message=e};qo.prototype.toJSON=function(){return this.message};var os={string:ji,number:On,boolean:oi,object:Ca},Go=function(e,i){this.type=e,this.args=i};Go.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var c,y=1,I=e[0];if(I==="array"){var H,Q;if(e.length>2){var ge=e[1];if(typeof ge!="string"||!(ge in os)||ge==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);H=os[ge],y++}else H=Wi;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);Q=e[2],y++}c=bn(H,Q)}else c=os[I];for(var tt=[];y<e.length;y++){var Rt=i.parse(e[y],y,Wi);if(!Rt)return null;tt.push(Rt)}return new Go(c,tt)},Go.prototype.evaluate=function(e){for(var i=0;i<this.args.length;i++){var c=this.args[i].evaluate(e);if(!va(this.type,Po(c)))return c;if(i===this.args.length-1)throw new qo("Expected value to be of type "+Oi(this.type)+", but found "+Oi(Po(c))+" instead.")}return null},Go.prototype.eachChild=function(e){this.args.forEach(e)},Go.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Go.prototype.serialize=function(){var e=this.type,i=[e.kind];if(e.kind==="array"){var c=e.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){i.push(c.kind);var y=e.N;(typeof y=="number"||this.args.length>1)&&i.push(y)}}return i.concat(this.args.map(function(I){return I.serialize()}))};var Wo=function(e){this.type=uo,this.sections=e};Wo.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var c=e[1];if(!Array.isArray(c)&&typeof c=="object")return i.error("First argument must be an image or text section.");for(var y=[],I=!1,H=1;H<=e.length-1;++H){var Q=e[H];if(I&&typeof Q=="object"&&!Array.isArray(Q)){I=!1;var ge=null;if(Q["font-scale"]&&!(ge=i.parse(Q["font-scale"],1,On)))return null;var tt=null;if(Q["text-font"]&&!(tt=i.parse(Q["text-font"],1,bn(ji))))return null;var Rt=null;if(Q["text-color"]&&!(Rt=i.parse(Q["text-color"],1,Hi)))return null;var Ft=y[y.length-1];Ft.scale=ge,Ft.font=tt,Ft.textColor=Rt}else{var Jt=i.parse(e[H],1,Wi);if(!Jt)return null;var dr=Jt.type.kind;if(dr!=="string"&&dr!=="value"&&dr!=="null"&&dr!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,y.push({content:Jt,scale:null,font:null,textColor:null})}}return new Wo(y)},Wo.prototype.evaluate=function(e){return new ha(this.sections.map(function(i){var c=i.content.evaluate(e);return Po(c)===Pn?new Uo("",c,null,null,null):new Uo(Hs(c),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))},Wo.prototype.eachChild=function(e){for(var i=0,c=this.sections;i<c.length;i+=1){var y=c[i];e(y.content),y.scale&&e(y.scale),y.font&&e(y.font),y.textColor&&e(y.textColor)}},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){for(var e=["format"],i=0,c=this.sections;i<c.length;i+=1){var y=c[i];e.push(y.content.serialize());var I={};y.scale&&(I["font-scale"]=y.scale.serialize()),y.font&&(I["text-font"]=y.font.serialize()),y.textColor&&(I["text-color"]=y.textColor.serialize()),e.push(I)}return e};var za=function(e){this.type=Pn,this.input=e};za.parse=function(e,i){if(e.length!==2)return i.error("Expected two arguments.");var c=i.parse(e[1],1,ji);return c?new za(c):i.error("No image name provided.")},za.prototype.evaluate=function(e){var i=this.input.evaluate(e),c=xa.fromString(i);return c&&e.availableImages&&(c.available=e.availableImages.indexOf(i)>-1),c},za.prototype.eachChild=function(e){e(this.input)},za.prototype.outputDefined=function(){return!1},za.prototype.serialize=function(){return["image",this.input.serialize()]};var Tu={"to-boolean":oi,"to-color":Hi,"to-number":On,"to-string":ji},Cs=function(e,i){this.type=e,this.args=i};Cs.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var c=e[0];if((c==="to-boolean"||c==="to-string")&&e.length!==2)return i.error("Expected one argument.");for(var y=Tu[c],I=[],H=1;H<e.length;H++){var Q=i.parse(e[H],H,Wi);if(!Q)return null;I.push(Q)}return new Cs(y,I)},Cs.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var i,c,y=0,I=this.args;y<I.length;y+=1){if(c=null,(i=I[y].evaluate(e))instanceof ma)return i;if(typeof i=="string"){var H=e.parseColor(i);if(H)return H}else if(Array.isArray(i)&&!(c=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":eo(i[0],i[1],i[2],i[3])))return new ma(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new qo(c||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var Q=null,ge=0,tt=this.args;ge<tt.length;ge+=1){if((Q=tt[ge].evaluate(e))===null)return 0;var Rt=Number(Q);if(!isNaN(Rt))return Rt}throw new qo("Could not convert "+JSON.stringify(Q)+" to number.")}return this.type.kind==="formatted"?ha.fromString(Hs(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?xa.fromString(Hs(this.args[0].evaluate(e))):Hs(this.args[0].evaluate(e))},Cs.prototype.eachChild=function(e){this.args.forEach(e)},Cs.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Cs.prototype.serialize=function(){if(this.type.kind==="formatted")return new Wo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new za(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(i){e.push(i.serialize())}),e};var Zs=["Unknown","Point","LineString","Polygon"],ts=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ts.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ts.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zs[this.feature.type]:this.feature.type:null},ts.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ts.prototype.canonicalID=function(){return this.canonical},ts.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ts.prototype.parseColor=function(e){var i=this._parseColorCache[e];return i||(i=this._parseColorCache[e]=ma.parse(e)),i};var Vs=function(e,i,c,y){this.name=e,this.type=i,this._evaluate=c,this.args=y};Vs.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Vs.prototype.eachChild=function(e){this.args.forEach(e)},Vs.prototype.outputDefined=function(){return!1},Vs.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Vs.parse=function(e,i){var c,y=e[0],I=Vs.definitions[y];if(!I)return i.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var H=Array.isArray(I)?I[0]:I.type,Q=Array.isArray(I)?[[I[1],I[2]]]:I.overloads,ge=Q.filter(function(ca){var ra=ca[0];return!Array.isArray(ra)||ra.length===e.length-1}),tt=null,Rt=0,Ft=ge;Rt<Ft.length;Rt+=1){var Jt=Ft[Rt],dr=Jt[0],Cr=Jt[1];tt=new si(i.registry,i.path,null,i.scope);for(var tn=[],rn=!1,yn=1;yn<e.length;yn++){var vn=e[yn],$n=Array.isArray(dr)?dr[yn-1]:dr.type,ri=tt.parse(vn,1+tn.length,$n);if(!ri){rn=!0;break}tn.push(ri)}if(!rn)if(Array.isArray(dr)&&dr.length!==tn.length)tt.error("Expected "+dr.length+" arguments, but found "+tn.length+" instead.");else{for(var _i=0;_i<tn.length;_i++){var xi=Array.isArray(dr)?dr[_i]:dr.type,Ii=tn[_i];tt.concat(_i+1).checkSubtype(xi,Ii.type)}if(tt.errors.length===0)return new Vs(y,H,Cr,tn)}}if(ge.length===1)(c=i.errors).push.apply(c,tt.errors);else{for(var ta=(ge.length?ge:Q).map(function(ca){var ra;return ra=ca[0],Array.isArray(ra)?"("+ra.map(Oi).join(", ")+")":"("+Oi(ra.type)+"...)"}).join(" | "),Qi=[],ja=1;ja<e.length;ja++){var qn=i.parse(e[ja],1+Qi.length);if(!qn)return null;Qi.push(Oi(qn.type))}i.error("Expected arguments of type "+ta+", but found ("+Qi.join(", ")+") instead.")}return null},Vs.register=function(e,i){for(var c in Vs.definitions=i,i)e[c]=Vs};var ou=function(e,i,c){this.type=jo,this.locale=c,this.caseSensitive=e,this.diacriticSensitive=i};function ls(e,i){e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1])}function Di(e,i){return!(e[0]<=i[0]||e[2]>=i[2]||e[1]<=i[1]||e[3]>=i[3])}function As(e,i){var c=(180+e[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,I=Math.pow(2,i.z);return[Math.round(c*I*8192),Math.round(y*I*8192)]}function Rs(e,i,c){return i[1]>e[1]!=c[1]>e[1]&&e[0]<(c[0]-i[0])*(e[1]-i[1])/(c[1]-i[1])+i[0]}function vr(e,i){for(var c,y,I,H,Q,ge,tt,Rt=!1,Ft=0,Jt=i.length;Ft<Jt;Ft++)for(var dr=i[Ft],Cr=0,tn=dr.length;Cr<tn-1;Cr++){if((H=(c=e)[0]-(y=dr[Cr])[0])*(tt=c[1]-(I=dr[Cr+1])[1])-(ge=c[0]-I[0])*(Q=c[1]-y[1])==0&&H*ge<=0&&Q*tt<=0)return!1;Rs(e,dr[Cr],dr[Cr+1])&&(Rt=!Rt)}return Rt}function zr(e,i){for(var c=0;c<i.length;c++)if(vr(e,i[c]))return!0;return!1}function lr(e,i,c,y){var I=y[0]-c[0],H=y[1]-c[1],Q=(e[0]-c[0])*H-I*(e[1]-c[1]),ge=(i[0]-c[0])*H-I*(i[1]-c[1]);return Q>0&&ge<0||Q<0&&ge>0}function Zr(e,i,c){for(var y=0,I=c;y<I.length;y+=1)for(var H=I[y],Q=0;Q<H.length-1;++Q)if((Jt=[(Ft=H[Q+1])[0]-(Rt=H[Q])[0],Ft[1]-Rt[1]])[0]*(dr=[(tt=i)[0]-(ge=e)[0],tt[1]-ge[1]])[1]-Jt[1]*dr[0]!=0&&lr(ge,tt,Rt,Ft)&&lr(Rt,Ft,ge,tt))return!0;var ge,tt,Rt,Ft,Jt,dr;return!1}function Hn(e,i){for(var c=0;c<e.length;++c)if(!vr(e[c],i))return!1;for(var y=0;y<e.length-1;++y)if(Zr(e[y],e[y+1],i))return!1;return!0}function Hr(e,i){for(var c=0;c<i.length;c++)if(Hn(e,i[c]))return!0;return!1}function Bo(e,i,c){for(var y=[],I=0;I<e.length;I++){for(var H=[],Q=0;Q<e[I].length;Q++){var ge=As(e[I][Q],c);ls(i,ge),H.push(ge)}y.push(H)}return y}function Yr(e,i,c){for(var y=[],I=0;I<e.length;I++){var H=Bo(e[I],i,c);y.push(H)}return y}function pr(e,i,c,y){if(e[0]<c[0]||e[0]>c[2]){var I=.5*y,H=e[0]-c[0]>I?-y:c[0]-e[0]>I?y:0;H===0&&(H=e[0]-c[2]>I?-y:c[2]-e[0]>I?y:0),e[0]+=H}ls(i,e)}function at(e,i,c,y){for(var I=8192*Math.pow(2,y.z),H=[8192*y.x,8192*y.y],Q=[],ge=0,tt=e;ge<tt.length;ge+=1)for(var Rt=0,Ft=tt[ge];Rt<Ft.length;Rt+=1){var Jt=Ft[Rt],dr=[Jt.x+H[0],Jt.y+H[1]];pr(dr,i,c,I),Q.push(dr)}return Q}function hr(e,i,c,y){for(var I,H=8192*Math.pow(2,y.z),Q=[8192*y.x,8192*y.y],ge=[],tt=0,Rt=e;tt<Rt.length;tt+=1){for(var Ft=[],Jt=0,dr=Rt[tt];Jt<dr.length;Jt+=1){var Cr=dr[Jt],tn=[Cr.x+Q[0],Cr.y+Q[1]];ls(i,tn),Ft.push(tn)}ge.push(Ft)}if(i[2]-i[0]<=H/2){(I=i)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(var rn=0,yn=ge;rn<yn.length;rn+=1)for(var vn=0,$n=yn[rn];vn<$n.length;vn+=1)pr($n[vn],i,c,H)}return ge}ou.parse=function(e,i){if(e.length!==2)return i.error("Expected one argument.");var c=e[1];if(typeof c!="object"||Array.isArray(c))return i.error("Collator options argument must be an object.");var y=i.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,oi);if(!y)return null;var I=i.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,oi);if(!I)return null;var H=null;return c.locale&&!(H=i.parse(c.locale,1,ji))?null:new ou(y,I,H)},ou.prototype.evaluate=function(e){return new Da(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ou.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ou.prototype.outputDefined=function(){return!1},ou.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var er=function(e,i){this.type=oi,this.geojson=e,this.geometries=i};function dn(e){if(e instanceof Vs&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof er)return!1;var i=!0;return e.eachChild(function(c){i&&!dn(c)&&(i=!1)}),i}function mn(e){if(e instanceof Vs&&e.name==="feature-state")return!1;var i=!0;return e.eachChild(function(c){i&&!mn(c)&&(i=!1)}),i}function Vn(e,i){if(e instanceof Vs&&i.indexOf(e.name)>=0)return!1;var c=!0;return e.eachChild(function(y){c&&!Vn(y,i)&&(c=!1)}),c}er.parse=function(e,i){if(e.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Ee(e[1])){var c=e[1];if(c.type==="FeatureCollection")for(var y=0;y<c.features.length;++y){var I=c.features[y].geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new er(c,c.features[y].geometry)}else if(c.type==="Feature"){var H=c.geometry.type;if(H==="Polygon"||H==="MultiPolygon")return new er(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new er(c,c)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},er.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,c){var y=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],H=i.canonicalID();if(c.type==="Polygon"){var Q=Bo(c.coordinates,I,H),ge=at(i.geometry(),y,I,H);if(!Di(y,I))return!1;for(var tt=0,Rt=ge;tt<Rt.length;tt+=1)if(!vr(Rt[tt],Q))return!1}if(c.type==="MultiPolygon"){var Ft=Yr(c.coordinates,I,H),Jt=at(i.geometry(),y,I,H);if(!Di(y,I))return!1;for(var dr=0,Cr=Jt;dr<Cr.length;dr+=1)if(!zr(Cr[dr],Ft))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,c){var y=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],H=i.canonicalID();if(c.type==="Polygon"){var Q=Bo(c.coordinates,I,H),ge=hr(i.geometry(),y,I,H);if(!Di(y,I))return!1;for(var tt=0,Rt=ge;tt<Rt.length;tt+=1)if(!Hn(Rt[tt],Q))return!1}if(c.type==="MultiPolygon"){var Ft=Yr(c.coordinates,I,H),Jt=hr(i.geometry(),y,I,H);if(!Di(y,I))return!1;for(var dr=0,Cr=Jt;dr<Cr.length;dr+=1)if(!Hr(Cr[dr],Ft))return!1}return!0}(e,this.geometries)}return!1},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return["within",this.geojson]};var ni=function(e,i){this.type=i.type,this.name=e,this.boundExpression=i};ni.parse=function(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var c=e[1];return i.scope.has(c)?new ni(c,i.scope.get(c)):i.error('Unknown variable "'+c+'". Make sure "'+c+'" has been bound in an enclosing "let" expression before using it.',1)},ni.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ni.prototype.eachChild=function(){},ni.prototype.outputDefined=function(){return!1},ni.prototype.serialize=function(){return["var",this.name]};var si=function(e,i,c,y,I){i===void 0&&(i=[]),y===void 0&&(y=new ia),I===void 0&&(I=[]),this.registry=e,this.path=i,this.key=i.map(function(H){return"["+H+"]"}).join(""),this.scope=y,this.errors=I,this.expectedType=c};function Si(e,i){for(var c,y=e.length-1,I=0,H=y,Q=0;I<=H;)if((c=e[Q=Math.floor((I+H)/2)])<=i){if(Q===y||i<e[Q+1])return Q;I=Q+1}else{if(!(c>i))throw new qo("Input is not a number.");H=Q-1}return 0}si.prototype.parse=function(e,i,c,y,I){return I===void 0&&(I={}),i?this.concat(i,c,y)._parse(e,I):this._parse(e,I)},si.prototype._parse=function(e,i){function c(Rt,Ft,Jt){return Jt==="assert"?new Go(Ft,[Rt]):Jt==="coerce"?new Cs(Ft,[Rt]):Rt}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var y=e[0];if(typeof y!="string")return this.error("Expression name must be a string, but found "+typeof y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var I=this.registry[y];if(I){var H=I.parse(e,this);if(!H)return null;if(this.expectedType){var Q=this.expectedType,ge=H.type;if(Q.kind!=="string"&&Q.kind!=="number"&&Q.kind!=="boolean"&&Q.kind!=="object"&&Q.kind!=="array"||ge.kind!=="value")if(Q.kind!=="color"&&Q.kind!=="formatted"&&Q.kind!=="resolvedImage"||ge.kind!=="value"&&ge.kind!=="string"){if(this.checkSubtype(Q,ge))return null}else H=c(H,Q,i.typeAnnotation||"coerce");else H=c(H,Q,i.typeAnnotation||"assert")}if(!(H instanceof no)&&H.type.kind!=="resolvedImage"&&function Rt(Ft){if(Ft instanceof ni)return Rt(Ft.boundExpression);if(Ft instanceof Vs&&Ft.name==="error"||Ft instanceof ou||Ft instanceof er)return!1;var Jt=Ft instanceof Cs||Ft instanceof Go,dr=!0;return Ft.eachChild(function(Cr){dr=Jt?dr&&Rt(Cr):dr&&Cr instanceof no}),!!dr&&dn(Ft)&&Vn(Ft,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(H)){var tt=new ts;try{H=new no(H.type,H.evaluate(tt))}catch(Rt){return this.error(Rt.message),null}}return H}return this.error('Unknown expression "'+y+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},si.prototype.concat=function(e,i,c){var y=typeof e=="number"?this.path.concat(e):this.path,I=c?this.scope.concat(c):this.scope;return new si(this.registry,y,i||null,I,this.errors)},si.prototype.error=function(e){for(var i=[],c=arguments.length-1;c-- >0;)i[c]=arguments[c+1];var y=""+this.key+i.map(function(I){return"["+I+"]"}).join("");this.errors.push(new ci(y,e))},si.prototype.checkSubtype=function(e,i){var c=va(e,i);return c&&this.error(c),c};var qi=function(e,i,c){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(var y=0,I=c;y<I.length;y+=1){var H=I[y],Q=H[1];this.labels.push(H[0]),this.outputs.push(Q)}};function Rr(e,i,c){return e*(1-c)+i*c}qi.parse=function(e,i){if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");var c=i.parse(e[1],1,On);if(!c)return null;var y=[],I=null;i.expectedType&&i.expectedType.kind!=="value"&&(I=i.expectedType);for(var H=1;H<e.length;H+=2){var Q=H===1?-1/0:e[H],ge=e[H+1],tt=H,Rt=H+1;if(typeof Q!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tt);if(y.length&&y[y.length-1][0]>=Q)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',tt);var Ft=i.parse(ge,Rt,I);if(!Ft)return null;I=I||Ft.type,y.push([Q,Ft])}return new qi(I,c,y)},qi.prototype.evaluate=function(e){var i=this.labels,c=this.outputs;if(i.length===1)return c[0].evaluate(e);var y=this.input.evaluate(e);if(y<=i[0])return c[0].evaluate(e);var I=i.length;return y>=i[I-1]?c[I-1].evaluate(e):c[Si(i,y)].evaluate(e)},qi.prototype.eachChild=function(e){e(this.input);for(var i=0,c=this.outputs;i<c.length;i+=1)e(c[i])},qi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},qi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e};var Mn=Object.freeze({__proto__:null,number:Rr,color:function(e,i,c){return new ma(Rr(e.r,i.r,c),Rr(e.g,i.g,c),Rr(e.b,i.b,c),Rr(e.a,i.a,c))},array:function(e,i,c){return e.map(function(y,I){return Rr(y,i[I],c)})}}),pn=6/29*3*(6/29),wn=Math.PI/180,Kn=180/Math.PI;function Ei(e){return e>.008856451679035631?Math.pow(e,1/3):e/pn+4/29}function Ji(e){return e>6/29?e*e*e:pn*(e-4/29)}function Yi(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function oa(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ma(e){var i=oa(e.r),c=oa(e.g),y=oa(e.b),I=Ei((.4124564*i+.3575761*c+.1804375*y)/.95047),H=Ei((.2126729*i+.7151522*c+.072175*y)/1);return{l:116*H-16,a:500*(I-H),b:200*(H-Ei((.0193339*i+.119192*c+.9503041*y)/1.08883)),alpha:e.a}}function k(e){var i=(e.l+16)/116,c=isNaN(e.a)?i:i+e.a/500,y=isNaN(e.b)?i:i-e.b/200;return i=1*Ji(i),c=.95047*Ji(c),y=1.08883*Ji(y),new ma(Yi(3.2404542*c-1.5371385*i-.4985314*y),Yi(-.969266*c+1.8760108*i+.041556*y),Yi(.0556434*c-.2040259*i+1.0572252*y),e.alpha)}function de(e,i,c){var y=i-e;return e+c*(y>180||y<-180?y-360*Math.round(y/360):y)}var yt={forward:Ma,reverse:k,interpolate:function(e,i,c){return{l:Rr(e.l,i.l,c),a:Rr(e.a,i.a,c),b:Rr(e.b,i.b,c),alpha:Rr(e.alpha,i.alpha,c)}}},Ue={forward:function(e){var i=Ma(e),c=i.l,y=i.a,I=i.b,H=Math.atan2(I,y)*Kn;return{h:H<0?H+360:H,c:Math.sqrt(y*y+I*I),l:c,alpha:e.a}},reverse:function(e){var i=e.h*wn,c=e.c;return k({l:e.l,a:Math.cos(i)*c,b:Math.sin(i)*c,alpha:e.alpha})},interpolate:function(e,i,c){return{h:de(e.h,i.h,c),c:Rr(e.c,i.c,c),l:Rr(e.l,i.l,c),alpha:Rr(e.alpha,i.alpha,c)}}},nr=Object.freeze({__proto__:null,lab:yt,hcl:Ue}),Mr=function(e,i,c,y,I){this.type=e,this.operator=i,this.interpolation=c,this.input=y,this.labels=[],this.outputs=[];for(var H=0,Q=I;H<Q.length;H+=1){var ge=Q[H],tt=ge[1];this.labels.push(ge[0]),this.outputs.push(tt)}};function qr(e,i,c,y){var I=y-c,H=e-c;return I===0?0:i===1?H/I:(Math.pow(i,H)-1)/(Math.pow(i,I)-1)}Mr.interpolationFactor=function(e,i,c,y){var I=0;if(e.name==="exponential")I=qr(i,e.base,c,y);else if(e.name==="linear")I=qr(i,1,c,y);else if(e.name==="cubic-bezier"){var H=e.controlPoints;I=new R(H[0],H[1],H[2],H[3]).solve(qr(i,1,c,y))}return I},Mr.parse=function(e,i){var c=e[0],y=e[1],I=e[2],H=e.slice(3);if(!Array.isArray(y)||y.length===0)return i.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){var Q=y[1];if(typeof Q!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:Q}}else{if(y[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(y[0]),1,0);var ge=y.slice(1);if(ge.length!==4||ge.some(function(yn){return typeof yn!="number"||yn<0||yn>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:ge}}if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(I=i.parse(I,2,On)))return null;var tt=[],Rt=null;c==="interpolate-hcl"||c==="interpolate-lab"?Rt=Hi:i.expectedType&&i.expectedType.kind!=="value"&&(Rt=i.expectedType);for(var Ft=0;Ft<H.length;Ft+=2){var Jt=H[Ft],dr=H[Ft+1],Cr=Ft+3,tn=Ft+4;if(typeof Jt!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Cr);if(tt.length&&tt[tt.length-1][0]>=Jt)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Cr);var rn=i.parse(dr,tn,Rt);if(!rn)return null;Rt=Rt||rn.type,tt.push([Jt,rn])}return Rt.kind==="number"||Rt.kind==="color"||Rt.kind==="array"&&Rt.itemType.kind==="number"&&typeof Rt.N=="number"?new Mr(Rt,c,y,I,tt):i.error("Type "+Oi(Rt)+" is not interpolatable.")},Mr.prototype.evaluate=function(e){var i=this.labels,c=this.outputs;if(i.length===1)return c[0].evaluate(e);var y=this.input.evaluate(e);if(y<=i[0])return c[0].evaluate(e);var I=i.length;if(y>=i[I-1])return c[I-1].evaluate(e);var H=Si(i,y),Q=Mr.interpolationFactor(this.interpolation,y,i[H],i[H+1]),ge=c[H].evaluate(e),tt=c[H+1].evaluate(e);return this.operator==="interpolate"?Mn[this.type.kind.toLowerCase()](ge,tt,Q):this.operator==="interpolate-hcl"?Ue.reverse(Ue.interpolate(Ue.forward(ge),Ue.forward(tt),Q)):yt.reverse(yt.interpolate(yt.forward(ge),yt.forward(tt),Q))},Mr.prototype.eachChild=function(e){e(this.input);for(var i=0,c=this.outputs;i<c.length;i+=1)e(c[i])},Mr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Mr.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,e,this.input.serialize()],c=0;c<this.labels.length;c++)i.push(this.labels[c],this.outputs[c].serialize());return i};var kn=function(e,i){this.type=e,this.args=i};kn.parse=function(e,i){if(e.length<2)return i.error("Expectected at least one argument.");var c=null,y=i.expectedType;y&&y.kind!=="value"&&(c=y);for(var I=[],H=0,Q=e.slice(1);H<Q.length;H+=1){var ge=i.parse(Q[H],1+I.length,c,void 0,{typeAnnotation:"omit"});if(!ge)return null;c=c||ge.type,I.push(ge)}var tt=y&&I.some(function(Rt){return va(y,Rt.type)});return new kn(tt?Wi:c,I)},kn.prototype.evaluate=function(e){for(var i,c=null,y=0,I=0,H=this.args;I<H.length&&(y++,(c=H[I].evaluate(e))&&c instanceof xa&&!c.available&&(i||(i=c.name),c=null,y===this.args.length&&(c=i)),c===null);I+=1);return c},kn.prototype.eachChild=function(e){this.args.forEach(e)},kn.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},kn.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Nn=function(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i};Nn.prototype.evaluate=function(e){return this.result.evaluate(e)},Nn.prototype.eachChild=function(e){for(var i=0,c=this.bindings;i<c.length;i+=1)e(c[i][1]);e(this.result)},Nn.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var c=[],y=1;y<e.length-1;y+=2){var I=e[y];if(typeof I!="string")return i.error("Expected string, but found "+typeof I+" instead.",y);if(/[^a-zA-Z0-9_]/.test(I))return i.error("Variable names must contain only alphanumeric characters or '_'.",y);var H=i.parse(e[y+1],y+1);if(!H)return null;c.push([I,H])}var Q=i.parse(e[e.length-1],e.length-1,i.expectedType,c);return Q?new Nn(c,Q):null},Nn.prototype.outputDefined=function(){return this.result.outputDefined()},Nn.prototype.serialize=function(){for(var e=["let"],i=0,c=this.bindings;i<c.length;i+=1){var y=c[i];e.push(y[0],y[1].serialize())}return e.push(this.result.serialize()),e};var Mi=function(e,i,c){this.type=e,this.index=i,this.input=c};Mi.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var c=i.parse(e[1],1,On),y=i.parse(e[2],2,bn(i.expectedType||Wi));return c&&y?new Mi(y.type.itemType,c,y):null},Mi.prototype.evaluate=function(e){var i=this.index.evaluate(e),c=this.input.evaluate(e);if(i<0)throw new qo("Array index out of bounds: "+i+" < 0.");if(i>=c.length)throw new qo("Array index out of bounds: "+i+" > "+(c.length-1)+".");if(i!==Math.floor(i))throw new qo("Array index must be an integer, but found "+i+" instead.");return c[i]},Mi.prototype.eachChild=function(e){e(this.index),e(this.input)},Mi.prototype.outputDefined=function(){return!1},Mi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Bi=function(e,i){this.type=oi,this.needle=e,this.haystack=i};Bi.parse=function(e,i){if(e.length!==3)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var c=i.parse(e[1],1,Wi),y=i.parse(e[2],2,Wi);return c&&y?wa(c.type,[oi,ji,On,Vi,Wi])?new Bi(c,y):i.error("Expected first argument to be of type boolean, string, number or null, but found "+Oi(c.type)+" instead"):null},Bi.prototype.evaluate=function(e){var i=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!c)return!1;if(!Aa(i,["boolean","string","number","null"]))throw new qo("Expected first argument to be of type boolean, string, number or null, but found "+Oi(Po(i))+" instead.");if(!Aa(c,["string","array"]))throw new qo("Expected second argument to be of type array or string, but found "+Oi(Po(c))+" instead.");return c.indexOf(i)>=0},Bi.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Bi.prototype.outputDefined=function(){return!0},Bi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var io=function(e,i,c){this.type=On,this.needle=e,this.haystack=i,this.fromIndex=c};io.parse=function(e,i){if(e.length<=2||e.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var c=i.parse(e[1],1,Wi),y=i.parse(e[2],2,Wi);if(!c||!y)return null;if(!wa(c.type,[oi,ji,On,Vi,Wi]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+Oi(c.type)+" instead");if(e.length===4){var I=i.parse(e[3],3,On);return I?new io(c,y,I):null}return new io(c,y)},io.prototype.evaluate=function(e){var i=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!Aa(i,["boolean","string","number","null"]))throw new qo("Expected first argument to be of type boolean, string, number or null, but found "+Oi(Po(i))+" instead.");if(!Aa(c,["string","array"]))throw new qo("Expected second argument to be of type array or string, but found "+Oi(Po(c))+" instead.");if(this.fromIndex){var y=this.fromIndex.evaluate(e);return c.indexOf(i,y)}return c.indexOf(i)},io.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var co=function(e,i,c,y,I,H){this.inputType=e,this.type=i,this.input=c,this.cases=y,this.outputs=I,this.otherwise=H};co.parse=function(e,i){if(e.length<5)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return i.error("Expected an even number of arguments.");var c,y;i.expectedType&&i.expectedType.kind!=="value"&&(y=i.expectedType);for(var I={},H=[],Q=2;Q<e.length-1;Q+=2){var ge=e[Q],tt=e[Q+1];Array.isArray(ge)||(ge=[ge]);var Rt=i.concat(Q);if(ge.length===0)return Rt.error("Expected at least one branch label.");for(var Ft=0,Jt=ge;Ft<Jt.length;Ft+=1){var dr=Jt[Ft];if(typeof dr!="number"&&typeof dr!="string")return Rt.error("Branch labels must be numbers or strings.");if(typeof dr=="number"&&Math.abs(dr)>Number.MAX_SAFE_INTEGER)return Rt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof dr=="number"&&Math.floor(dr)!==dr)return Rt.error("Numeric branch labels must be integer values.");if(c){if(Rt.checkSubtype(c,Po(dr)))return null}else c=Po(dr);if(I[String(dr)]!==void 0)return Rt.error("Branch labels must be unique.");I[String(dr)]=H.length}var Cr=i.parse(tt,Q,y);if(!Cr)return null;y=y||Cr.type,H.push(Cr)}var tn=i.parse(e[1],1,Wi);if(!tn)return null;var rn=i.parse(e[e.length-1],e.length-1,y);return rn?tn.type.kind!=="value"&&i.concat(1).checkSubtype(c,tn.type)?null:new co(c,y,tn,I,H,rn):null},co.prototype.evaluate=function(e){var i=this.input.evaluate(e);return(Po(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)},co.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},co.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},co.prototype.serialize=function(){for(var e=this,i=["match",this.input.serialize()],c=[],y={},I=0,H=Object.keys(this.cases).sort();I<H.length;I+=1){var Q=H[I];(Jt=y[this.cases[Q]])===void 0?(y[this.cases[Q]]=c.length,c.push([this.cases[Q],[Q]])):c[Jt][1].push(Q)}for(var ge=function(Cr){return e.inputType.kind==="number"?Number(Cr):Cr},tt=0,Rt=c;tt<Rt.length;tt+=1){var Ft=Rt[tt],Jt=Ft[0],dr=Ft[1];i.push(dr.length===1?ge(dr[0]):dr.map(ge)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var Sa=function(e,i,c){this.type=e,this.branches=i,this.otherwise=c};Sa.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return i.error("Expected an odd number of arguments.");var c;i.expectedType&&i.expectedType.kind!=="value"&&(c=i.expectedType);for(var y=[],I=1;I<e.length-1;I+=2){var H=i.parse(e[I],I,oi);if(!H)return null;var Q=i.parse(e[I+1],I+1,c);if(!Q)return null;y.push([H,Q]),c=c||Q.type}var ge=i.parse(e[e.length-1],e.length-1,c);return ge?new Sa(c,y,ge):null},Sa.prototype.evaluate=function(e){for(var i=0,c=this.branches;i<c.length;i+=1){var y=c[i],I=y[1];if(y[0].evaluate(e))return I.evaluate(e)}return this.otherwise.evaluate(e)},Sa.prototype.eachChild=function(e){for(var i=0,c=this.branches;i<c.length;i+=1){var y=c[i],I=y[1];e(y[0]),e(I)}e(this.otherwise)},Sa.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Sa.prototype.serialize=function(){var e=["case"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Ko=function(e,i,c,y){this.type=e,this.input=i,this.beginIndex=c,this.endIndex=y};function wo(e,i){return e==="=="||e==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Oo(e,i,c,y){return y.compare(i,c)===0}function Ho(e,i,c){var y=e!=="=="&&e!=="!=";return function(){function I(H,Q,ge){this.type=oi,this.lhs=H,this.rhs=Q,this.collator=ge,this.hasUntypedArgument=H.type.kind==="value"||Q.type.kind==="value"}return I.parse=function(H,Q){if(H.length!==3&&H.length!==4)return Q.error("Expected two or three arguments.");var ge=H[0],tt=Q.parse(H[1],1,Wi);if(!tt)return null;if(!wo(ge,tt.type))return Q.concat(1).error('"'+ge+`" comparisons are not supported for type '`+Oi(tt.type)+"'.");var Rt=Q.parse(H[2],2,Wi);if(!Rt)return null;if(!wo(ge,Rt.type))return Q.concat(2).error('"'+ge+`" comparisons are not supported for type '`+Oi(Rt.type)+"'.");if(tt.type.kind!==Rt.type.kind&&tt.type.kind!=="value"&&Rt.type.kind!=="value")return Q.error("Cannot compare types '"+Oi(tt.type)+"' and '"+Oi(Rt.type)+"'.");y&&(tt.type.kind==="value"&&Rt.type.kind!=="value"?tt=new Go(Rt.type,[tt]):tt.type.kind!=="value"&&Rt.type.kind==="value"&&(Rt=new Go(tt.type,[Rt])));var Ft=null;if(H.length===4){if(tt.type.kind!=="string"&&Rt.type.kind!=="string"&&tt.type.kind!=="value"&&Rt.type.kind!=="value")return Q.error("Cannot use collator to compare non-string types.");if(!(Ft=Q.parse(H[3],3,jo)))return null}return new I(tt,Rt,Ft)},I.prototype.evaluate=function(H){var Q=this.lhs.evaluate(H),ge=this.rhs.evaluate(H);if(y&&this.hasUntypedArgument){var tt=Po(Q),Rt=Po(ge);if(tt.kind!==Rt.kind||tt.kind!=="string"&&tt.kind!=="number")throw new qo('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+tt.kind+", "+Rt.kind+") instead.")}if(this.collator&&!y&&this.hasUntypedArgument){var Ft=Po(Q),Jt=Po(ge);if(Ft.kind!=="string"||Jt.kind!=="string")return i(H,Q,ge)}return this.collator?c(H,Q,ge,this.collator.evaluate(H)):i(H,Q,ge)},I.prototype.eachChild=function(H){H(this.lhs),H(this.rhs),this.collator&&H(this.collator)},I.prototype.outputDefined=function(){return!0},I.prototype.serialize=function(){var H=[e];return this.eachChild(function(Q){H.push(Q.serialize())}),H},I}()}Ko.parse=function(e,i){if(e.length<=2||e.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var c=i.parse(e[1],1,Wi),y=i.parse(e[2],2,On);if(!c||!y)return null;if(!wa(c.type,[bn(Wi),ji,Wi]))return i.error("Expected first argument to be of type array or string, but found "+Oi(c.type)+" instead");if(e.length===4){var I=i.parse(e[3],3,On);return I?new Ko(c.type,c,y,I):null}return new Ko(c.type,c,y)},Ko.prototype.evaluate=function(e){var i=this.input.evaluate(e),c=this.beginIndex.evaluate(e);if(!Aa(i,["string","array"]))throw new qo("Expected first argument to be of type array or string, but found "+Oi(Po(i))+" instead.");if(this.endIndex){var y=this.endIndex.evaluate(e);return i.slice(c,y)}return i.slice(c)},Ko.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Io=Ho("==",function(e,i,c){return i===c},Oo),qs=Ho("!=",function(e,i,c){return i!==c},function(e,i,c,y){return!Oo(0,i,c,y)}),Il=Ho("<",function(e,i,c){return i<c},function(e,i,c,y){return y.compare(i,c)<0}),Ao=Ho(">",function(e,i,c){return i>c},function(e,i,c,y){return y.compare(i,c)>0}),Va=Ho("<=",function(e,i,c){return i<=c},function(e,i,c,y){return y.compare(i,c)<=0}),gs=Ho(">=",function(e,i,c){return i>=c},function(e,i,c,y){return y.compare(i,c)>=0}),Ws=function(e,i,c,y,I){this.type=ji,this.number=e,this.locale=i,this.currency=c,this.minFractionDigits=y,this.maxFractionDigits=I};Ws.parse=function(e,i){if(e.length!==3)return i.error("Expected two arguments.");var c=i.parse(e[1],1,On);if(!c)return null;var y=e[2];if(typeof y!="object"||Array.isArray(y))return i.error("NumberFormat options argument must be an object.");var I=null;if(y.locale&&!(I=i.parse(y.locale,1,ji)))return null;var H=null;if(y.currency&&!(H=i.parse(y.currency,1,ji)))return null;var Q=null;if(y["min-fraction-digits"]&&!(Q=i.parse(y["min-fraction-digits"],1,On)))return null;var ge=null;return y["max-fraction-digits"]&&!(ge=i.parse(y["max-fraction-digits"],1,On))?null:new Ws(c,I,H,Q,ge)},Ws.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Ws.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Ws.prototype.outputDefined=function(){return!1},Ws.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var bs=function(e){this.type=On,this.input=e};bs.parse=function(e,i){if(e.length!==2)return i.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var c=i.parse(e[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+Oi(c.type)+" instead."):new bs(c):null},bs.prototype.evaluate=function(e){var i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new qo("Expected value to be of type string or array, but found "+Oi(Po(i))+" instead.")},bs.prototype.eachChild=function(e){e(this.input)},bs.prototype.outputDefined=function(){return!1},bs.prototype.serialize=function(){var e=["length"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Ps={"==":Io,"!=":qs,">":Ao,"<":Il,">=":gs,"<=":Va,array:Go,at:Mi,boolean:Go,case:Sa,coalesce:kn,collator:ou,format:Wo,image:za,in:Bi,"index-of":io,interpolate:Mr,"interpolate-hcl":Mr,"interpolate-lab":Mr,length:bs,let:Nn,literal:no,match:co,number:Go,"number-format":Ws,object:Go,slice:Ko,step:qi,string:Go,"to-boolean":Cs,"to-color":Cs,"to-number":Cs,"to-string":Cs,var:ni,within:er};function Xs(e,i){var c=i[0],y=i[1],I=i[2],H=i[3];c=c.evaluate(e),y=y.evaluate(e),I=I.evaluate(e);var Q=H?H.evaluate(e):1,ge=eo(c,y,I,Q);if(ge)throw new qo(ge);return new ma(c/255*Q,y/255*Q,I/255*Q,Q)}function gl(e,i){return e in i}function jf(e,i){var c=i[e];return c===void 0?null:c}function Mu(e){return{type:e}}function yl(e){return{result:"success",value:e}}function lc(e){return{result:"error",value:e}}function Lc(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function dh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function _l(e){return!!e.expression&&e.expression.interpolated}function Us(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function th(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function kf(e){return e}function wf(e,i,c){return e!==void 0?e:i!==void 0?i:c!==void 0?c:void 0}function lf(e,i,c,y,I){return wf(typeof c===I?y[c]:void 0,e.default,i.default)}function gd(e,i,c){if(Us(c)!=="number")return wf(e.default,i.default);var y=e.stops.length;if(y===1||c<=e.stops[0][0])return e.stops[0][1];if(c>=e.stops[y-1][0])return e.stops[y-1][1];var I=Si(e.stops.map(function(H){return H[0]}),c);return e.stops[I][1]}function Kh(e,i,c){var y=e.base!==void 0?e.base:1;if(Us(c)!=="number")return wf(e.default,i.default);var I=e.stops.length;if(I===1||c<=e.stops[0][0])return e.stops[0][1];if(c>=e.stops[I-1][0])return e.stops[I-1][1];var H=Si(e.stops.map(function(Jt){return Jt[0]}),c),Q=function(Jt,dr,Cr,tn){var rn=tn-Cr,yn=Jt-Cr;return rn===0?0:dr===1?yn/rn:(Math.pow(dr,yn)-1)/(Math.pow(dr,rn)-1)}(c,y,e.stops[H][0],e.stops[H+1][0]),ge=e.stops[H][1],tt=e.stops[H+1][1],Rt=Mn[i.type]||kf;if(e.colorSpace&&e.colorSpace!=="rgb"){var Ft=nr[e.colorSpace];Rt=function(Jt,dr){return Ft.reverse(Ft.interpolate(Ft.forward(Jt),Ft.forward(dr),Q))}}return typeof ge.evaluate=="function"?{evaluate:function(){for(var Jt=[],dr=arguments.length;dr--;)Jt[dr]=arguments[dr];var Cr=ge.evaluate.apply(void 0,Jt),tn=tt.evaluate.apply(void 0,Jt);if(Cr!==void 0&&tn!==void 0)return Rt(Cr,tn,Q)}}:Rt(ge,tt,Q)}function yc(e,i,c){return i.type==="color"?c=ma.parse(c):i.type==="formatted"?c=ha.fromString(c.toString()):i.type==="resolvedImage"?c=xa.fromString(c.toString()):Us(c)===i.type||i.type==="enum"&&i.values[c]||(c=void 0),wf(c,e.default,i.default)}Vs.register(Ps,{error:[{kind:"error"},[ji],function(e,i){throw new qo(i[0].evaluate(e))}],typeof:[ji,[Wi],function(e,i){return Oi(Po(i[0].evaluate(e)))}],"to-rgba":[bn(On,4),[Hi],function(e,i){return i[0].evaluate(e).toArray()}],rgb:[Hi,[On,On,On],Xs],rgba:[Hi,[On,On,On,On],Xs],has:{type:oi,overloads:[[[ji],function(e,i){return gl(i[0].evaluate(e),e.properties())}],[[ji,Ca],function(e,i){var c=i[1];return gl(i[0].evaluate(e),c.evaluate(e))}]]},get:{type:Wi,overloads:[[[ji],function(e,i){return jf(i[0].evaluate(e),e.properties())}],[[ji,Ca],function(e,i){var c=i[1];return jf(i[0].evaluate(e),c.evaluate(e))}]]},"feature-state":[Wi,[ji],function(e,i){return jf(i[0].evaluate(e),e.featureState||{})}],properties:[Ca,[],function(e){return e.properties()}],"geometry-type":[ji,[],function(e){return e.geometryType()}],id:[Wi,[],function(e){return e.id()}],zoom:[On,[],function(e){return e.globals.zoom}],"heatmap-density":[On,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[On,[],function(e){return e.globals.lineProgress||0}],accumulated:[Wi,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[On,Mu(On),function(e,i){for(var c=0,y=0,I=i;y<I.length;y+=1)c+=I[y].evaluate(e);return c}],"*":[On,Mu(On),function(e,i){for(var c=1,y=0,I=i;y<I.length;y+=1)c*=I[y].evaluate(e);return c}],"-":{type:On,overloads:[[[On,On],function(e,i){var c=i[1];return i[0].evaluate(e)-c.evaluate(e)}],[[On],function(e,i){return-i[0].evaluate(e)}]]},"/":[On,[On,On],function(e,i){var c=i[1];return i[0].evaluate(e)/c.evaluate(e)}],"%":[On,[On,On],function(e,i){var c=i[1];return i[0].evaluate(e)%c.evaluate(e)}],ln2:[On,[],function(){return Math.LN2}],pi:[On,[],function(){return Math.PI}],e:[On,[],function(){return Math.E}],"^":[On,[On,On],function(e,i){var c=i[1];return Math.pow(i[0].evaluate(e),c.evaluate(e))}],sqrt:[On,[On],function(e,i){return Math.sqrt(i[0].evaluate(e))}],log10:[On,[On],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN10}],ln:[On,[On],function(e,i){return Math.log(i[0].evaluate(e))}],log2:[On,[On],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN2}],sin:[On,[On],function(e,i){return Math.sin(i[0].evaluate(e))}],cos:[On,[On],function(e,i){return Math.cos(i[0].evaluate(e))}],tan:[On,[On],function(e,i){return Math.tan(i[0].evaluate(e))}],asin:[On,[On],function(e,i){return Math.asin(i[0].evaluate(e))}],acos:[On,[On],function(e,i){return Math.acos(i[0].evaluate(e))}],atan:[On,[On],function(e,i){return Math.atan(i[0].evaluate(e))}],min:[On,Mu(On),function(e,i){return Math.min.apply(Math,i.map(function(c){return c.evaluate(e)}))}],max:[On,Mu(On),function(e,i){return Math.max.apply(Math,i.map(function(c){return c.evaluate(e)}))}],abs:[On,[On],function(e,i){return Math.abs(i[0].evaluate(e))}],round:[On,[On],function(e,i){var c=i[0].evaluate(e);return c<0?-Math.round(-c):Math.round(c)}],floor:[On,[On],function(e,i){return Math.floor(i[0].evaluate(e))}],ceil:[On,[On],function(e,i){return Math.ceil(i[0].evaluate(e))}],"filter-==":[oi,[ji,Wi],function(e,i){var c=i[0],y=i[1];return e.properties()[c.value]===y.value}],"filter-id-==":[oi,[Wi],function(e,i){var c=i[0];return e.id()===c.value}],"filter-type-==":[oi,[ji],function(e,i){var c=i[0];return e.geometryType()===c.value}],"filter-<":[oi,[ji,Wi],function(e,i){var c=i[0],y=i[1],I=e.properties()[c.value],H=y.value;return typeof I==typeof H&&I<H}],"filter-id-<":[oi,[Wi],function(e,i){var c=i[0],y=e.id(),I=c.value;return typeof y==typeof I&&y<I}],"filter->":[oi,[ji,Wi],function(e,i){var c=i[0],y=i[1],I=e.properties()[c.value],H=y.value;return typeof I==typeof H&&I>H}],"filter-id->":[oi,[Wi],function(e,i){var c=i[0],y=e.id(),I=c.value;return typeof y==typeof I&&y>I}],"filter-<=":[oi,[ji,Wi],function(e,i){var c=i[0],y=i[1],I=e.properties()[c.value],H=y.value;return typeof I==typeof H&&I<=H}],"filter-id-<=":[oi,[Wi],function(e,i){var c=i[0],y=e.id(),I=c.value;return typeof y==typeof I&&y<=I}],"filter->=":[oi,[ji,Wi],function(e,i){var c=i[0],y=i[1],I=e.properties()[c.value],H=y.value;return typeof I==typeof H&&I>=H}],"filter-id->=":[oi,[Wi],function(e,i){var c=i[0],y=e.id(),I=c.value;return typeof y==typeof I&&y>=I}],"filter-has":[oi,[Wi],function(e,i){return i[0].value in e.properties()}],"filter-has-id":[oi,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[oi,[bn(ji)],function(e,i){return i[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[oi,[bn(Wi)],function(e,i){return i[0].value.indexOf(e.id())>=0}],"filter-in-small":[oi,[ji,bn(Wi)],function(e,i){var c=i[0];return i[1].value.indexOf(e.properties()[c.value])>=0}],"filter-in-large":[oi,[ji,bn(Wi)],function(e,i){var c=i[0],y=i[1];return function(I,H,Q,ge){for(;Q<=ge;){var tt=Q+ge>>1;if(H[tt]===I)return!0;H[tt]>I?ge=tt-1:Q=tt+1}return!1}(e.properties()[c.value],y.value,0,y.value.length-1)}],all:{type:oi,overloads:[[[oi,oi],function(e,i){var c=i[1];return i[0].evaluate(e)&&c.evaluate(e)}],[Mu(oi),function(e,i){for(var c=0,y=i;c<y.length;c+=1)if(!y[c].evaluate(e))return!1;return!0}]]},any:{type:oi,overloads:[[[oi,oi],function(e,i){var c=i[1];return i[0].evaluate(e)||c.evaluate(e)}],[Mu(oi),function(e,i){for(var c=0,y=i;c<y.length;c+=1)if(y[c].evaluate(e))return!0;return!1}]]},"!":[oi,[oi],function(e,i){return!i[0].evaluate(e)}],"is-supported-script":[oi,[ji],function(e,i){var c=e.globals&&e.globals.isSupportedScript;return!c||c(i[0].evaluate(e))}],upcase:[ji,[ji],function(e,i){return i[0].evaluate(e).toUpperCase()}],downcase:[ji,[ji],function(e,i){return i[0].evaluate(e).toLowerCase()}],concat:[ji,Mu(Wi),function(e,i){return i.map(function(c){return Hs(c.evaluate(e))}).join("")}],"resolved-locale":[ji,[jo],function(e,i){return i[0].evaluate(e).resolvedLocale()}]});var Eh=function(e,i){this.expression=e,this._warningHistory={},this._evaluator=new ts,this._defaultValue=i?function(c){return c.type==="color"&&th(c.default)?new ma(0,0,0,0):c.type==="color"?ma.parse(c.default)||null:c.default===void 0?null:c.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function cf(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Ps}function Af(e,i){var c=new si(Ps,[],i?function(I){var H={color:Hi,string:ji,number:On,enum:ji,boolean:oi,formatted:uo,resolvedImage:Pn};return I.type==="array"?bn(H[I.value]||Wi,I.length):H[I.type]}(i):void 0),y=c.parse(e,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?yl(new Eh(y,i)):lc(c.errors)}Eh.prototype.evaluateWithoutErrorHandling=function(e,i,c,y,I,H){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=c,this._evaluator.canonical=y,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=H,this.expression.evaluate(this._evaluator)},Eh.prototype.evaluate=function(e,i,c,y,I,H){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=c||null,this._evaluator.canonical=y,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=H||null;try{var Q=this.expression.evaluate(this._evaluator);if(Q==null||typeof Q=="number"&&Q!=Q)return this._defaultValue;if(this._enumValues&&!(Q in this._enumValues))throw new qo("Expected value to be one of "+Object.keys(this._enumValues).map(function(ge){return JSON.stringify(ge)}).join(", ")+", but found "+JSON.stringify(Q)+" instead.");return Q}catch(ge){return this._warningHistory[ge.message]||(this._warningHistory[ge.message]=!0,typeof console!="undefined"&&console.warn(ge.message)),this._defaultValue}};var _f=function(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!mn(i.expression)};_f.prototype.evaluateWithoutErrorHandling=function(e,i,c,y,I,H){return this._styleExpression.evaluateWithoutErrorHandling(e,i,c,y,I,H)},_f.prototype.evaluate=function(e,i,c,y,I,H){return this._styleExpression.evaluate(e,i,c,y,I,H)};var Dc=function(e,i,c,y){this.kind=e,this.zoomStops=c,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!mn(i.expression),this.interpolationType=y};function Ff(e,i){if((e=Af(e,i)).result==="error")return e;var c=e.value.expression,y=dn(c);if(!y&&!Lc(i))return lc([new ci("","data expressions not supported")]);var I=Vn(c,["zoom"]);if(!I&&!dh(i))return lc([new ci("","zoom expressions not supported")]);var H=function Q(ge){var tt=null;if(ge instanceof Nn)tt=Q(ge.result);else if(ge instanceof kn)for(var Rt=0,Ft=ge.args;Rt<Ft.length&&!(tt=Q(Ft[Rt]));Rt+=1);else(ge instanceof qi||ge instanceof Mr)&&ge.input instanceof Vs&&ge.input.name==="zoom"&&(tt=ge);return tt instanceof ci||ge.eachChild(function(Jt){var dr=Q(Jt);dr instanceof ci?tt=dr:!tt&&dr?tt=new ci("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):tt&&dr&&tt!==dr&&(tt=new ci("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),tt}(c);return H||I?H instanceof ci?lc([H]):H instanceof Mr&&!_l(i)?lc([new ci("",'"interpolate" expressions cannot be used with this property')]):yl(H?new Dc(y?"camera":"composite",e.value,H.labels,H instanceof Mr?H.interpolation:void 0):new _f(y?"constant":"source",e.value)):lc([new ci("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Dc.prototype.evaluateWithoutErrorHandling=function(e,i,c,y,I,H){return this._styleExpression.evaluateWithoutErrorHandling(e,i,c,y,I,H)},Dc.prototype.evaluate=function(e,i,c,y,I,H){return this._styleExpression.evaluate(e,i,c,y,I,H)},Dc.prototype.interpolationFactor=function(e,i,c){return this.interpolationType?Mr.interpolationFactor(this.interpolationType,e,i,c):0};var Zl=function(e,i){this._parameters=e,this._specification=i,on(this,function c(y,I){var H,Q,ge,tt=I.type==="color",Rt=y.stops&&typeof y.stops[0][0]=="object",Ft=Rt||!(Rt||y.property!==void 0),Jt=y.type||(_l(I)?"exponential":"interval");if(tt&&((y=on({},y)).stops&&(y.stops=y.stops.map(function(qn){return[qn[0],ma.parse(qn[1])]})),y.default=ma.parse(y.default?y.default:I.default)),y.colorSpace&&y.colorSpace!=="rgb"&&!nr[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);if(Jt==="exponential")H=Kh;else if(Jt==="interval")H=gd;else if(Jt==="categorical"){H=lf,Q=Object.create(null);for(var dr=0,Cr=y.stops;dr<Cr.length;dr+=1){var tn=Cr[dr];Q[tn[0]]=tn[1]}ge=typeof y.stops[0][0]}else{if(Jt!=="identity")throw new Error('Unknown function type "'+Jt+'"');H=yc}if(Rt){for(var rn={},yn=[],vn=0;vn<y.stops.length;vn++){var $n=y.stops[vn],ri=$n[0].zoom;rn[ri]===void 0&&(rn[ri]={zoom:ri,type:y.type,property:y.property,default:y.default,stops:[]},yn.push(ri)),rn[ri].stops.push([$n[0].value,$n[1]])}for(var _i=[],xi=0,Ii=yn;xi<Ii.length;xi+=1){var ta=Ii[xi];_i.push([rn[ta].zoom,c(rn[ta],I)])}var Qi={name:"linear"};return{kind:"composite",interpolationType:Qi,interpolationFactor:Mr.interpolationFactor.bind(void 0,Qi),zoomStops:_i.map(function(qn){return qn[0]}),evaluate:function(qn,ca){var ra=qn.zoom;return Kh({stops:_i,base:y.base},I,ra).evaluate(ra,ca)}}}if(Ft){var ja=Jt==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:ja,interpolationFactor:Mr.interpolationFactor.bind(void 0,ja),zoomStops:y.stops.map(function(qn){return qn[0]}),evaluate:function(qn){return H(y,I,qn.zoom,Q,ge)}}}return{kind:"source",evaluate:function(qn,ca){var ra=ca&&ca.properties?ca.properties[y.property]:void 0;return ra===void 0?wf(y.default,I.default):H(y,I,ra,Q,ge)}}}(this._parameters,this._specification))};function kc(e){var i=e.key,c=e.value,y=e.valueSpec||{},I=e.objectElementValidators||{},H=e.style,Q=e.styleSpec,ge=[],tt=Us(c);if(tt!=="object")return[new Ge(i,c,"object expected, "+tt+" found")];for(var Rt in c){var Ft=Rt.split(".")[0],Jt=y[Ft]||y["*"],dr=void 0;if(I[Ft])dr=I[Ft];else if(y[Ft])dr=lo;else if(I["*"])dr=I["*"];else{if(!y["*"]){ge.push(new Ge(i,c[Rt],'unknown property "'+Rt+'"'));continue}dr=lo}ge=ge.concat(dr({key:(i&&i+".")+Rt,value:c[Rt],valueSpec:Jt,style:H,styleSpec:Q,object:c,objectKey:Rt},c))}for(var Cr in y)I[Cr]||y[Cr].required&&y[Cr].default===void 0&&c[Cr]===void 0&&ge.push(new Ge(i,c,'missing required property "'+Cr+'"'));return ge}function ad(e){var i=e.value,c=e.valueSpec,y=e.style,I=e.styleSpec,H=e.key,Q=e.arrayElementValidator||lo;if(Us(i)!=="array")return[new Ge(H,i,"array expected, "+Us(i)+" found")];if(c.length&&i.length!==c.length)return[new Ge(H,i,"array length "+c.length+" expected, length "+i.length+" found")];if(c["min-length"]&&i.length<c["min-length"])return[new Ge(H,i,"array length at least "+c["min-length"]+" expected, length "+i.length+" found")];var ge={type:c.value,values:c.values};I.$version<7&&(ge.function=c.function),Us(c.value)==="object"&&(ge=c.value);for(var tt=[],Rt=0;Rt<i.length;Rt++)tt=tt.concat(Q({array:i,arrayIndex:Rt,value:i[Rt],valueSpec:ge,style:y,styleSpec:I,key:H+"["+Rt+"]"}));return tt}function rh(e){var i=e.key,c=e.value,y=e.valueSpec,I=Us(c);return I==="number"&&c!=c&&(I="NaN"),I!=="number"?[new Ge(i,c,"number expected, "+I+" found")]:"minimum"in y&&c<y.minimum?[new Ge(i,c,c+" is less than the minimum value "+y.minimum)]:"maximum"in y&&c>y.maximum?[new Ge(i,c,c+" is greater than the maximum value "+y.maximum)]:[]}function od(e){var i,c,y,I=e.valueSpec,H=cn(e.value.type),Q={},ge=H!=="categorical"&&e.value.property===void 0,tt=!ge,Rt=Us(e.value.stops)==="array"&&Us(e.value.stops[0])==="array"&&Us(e.value.stops[0][0])==="object",Ft=kc({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(Cr){if(H==="identity")return[new Ge(Cr.key,Cr.value,'identity function may not have a "stops" property')];var tn=[],rn=Cr.value;return tn=tn.concat(ad({key:Cr.key,value:rn,valueSpec:Cr.valueSpec,style:Cr.style,styleSpec:Cr.styleSpec,arrayElementValidator:Jt})),Us(rn)==="array"&&rn.length===0&&tn.push(new Ge(Cr.key,rn,"array must have at least one stop")),tn},default:function(Cr){return lo({key:Cr.key,value:Cr.value,valueSpec:I,style:Cr.style,styleSpec:Cr.styleSpec})}}});return H==="identity"&&ge&&Ft.push(new Ge(e.key,e.value,'missing required property "property"')),H==="identity"||e.value.stops||Ft.push(new Ge(e.key,e.value,'missing required property "stops"')),H==="exponential"&&e.valueSpec.expression&&!_l(e.valueSpec)&&Ft.push(new Ge(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(tt&&!Lc(e.valueSpec)?Ft.push(new Ge(e.key,e.value,"property functions not supported")):ge&&!dh(e.valueSpec)&&Ft.push(new Ge(e.key,e.value,"zoom functions not supported"))),H!=="categorical"&&!Rt||e.value.property!==void 0||Ft.push(new Ge(e.key,e.value,'"property" property is required')),Ft;function Jt(Cr){var tn=[],rn=Cr.value,yn=Cr.key;if(Us(rn)!=="array")return[new Ge(yn,rn,"array expected, "+Us(rn)+" found")];if(rn.length!==2)return[new Ge(yn,rn,"array length 2 expected, length "+rn.length+" found")];if(Rt){if(Us(rn[0])!=="object")return[new Ge(yn,rn,"object expected, "+Us(rn[0])+" found")];if(rn[0].zoom===void 0)return[new Ge(yn,rn,"object stop key must have zoom")];if(rn[0].value===void 0)return[new Ge(yn,rn,"object stop key must have value")];if(y&&y>cn(rn[0].zoom))return[new Ge(yn,rn[0].zoom,"stop zoom values must appear in ascending order")];cn(rn[0].zoom)!==y&&(y=cn(rn[0].zoom),c=void 0,Q={}),tn=tn.concat(kc({key:yn+"[0]",value:rn[0],valueSpec:{zoom:{}},style:Cr.style,styleSpec:Cr.styleSpec,objectElementValidators:{zoom:rh,value:dr}}))}else tn=tn.concat(dr({key:yn+"[0]",value:rn[0],valueSpec:{},style:Cr.style,styleSpec:Cr.styleSpec},rn));return cf(Dn(rn[1]))?tn.concat([new Ge(yn+"[1]",rn[1],"expressions are not allowed in function stops.")]):tn.concat(lo({key:yn+"[1]",value:rn[1],valueSpec:I,style:Cr.style,styleSpec:Cr.styleSpec}))}function dr(Cr,tn){var rn=Us(Cr.value),yn=cn(Cr.value),vn=Cr.value!==null?Cr.value:tn;if(i){if(rn!==i)return[new Ge(Cr.key,vn,rn+" stop domain type must match previous stop domain type "+i)]}else i=rn;if(rn!=="number"&&rn!=="string"&&rn!=="boolean")return[new Ge(Cr.key,vn,"stop domain value must be a number, string, or boolean")];if(rn!=="number"&&H!=="categorical"){var $n="number expected, "+rn+" found";return Lc(I)&&H===void 0&&($n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(Cr.key,vn,$n)]}return H!=="categorical"||rn!=="number"||isFinite(yn)&&Math.floor(yn)===yn?H!=="categorical"&&rn==="number"&&c!==void 0&&yn<c?[new Ge(Cr.key,vn,"stop domain values must appear in ascending order")]:(c=yn,H==="categorical"&&yn in Q?[new Ge(Cr.key,vn,"stop domain values must be unique")]:(Q[yn]=!0,[])):[new Ge(Cr.key,vn,"integer expected, found "+yn)]}}function Yo(e){var i=(e.expressionContext==="property"?Ff:Af)(Dn(e.value),e.valueSpec);if(i.result==="error")return i.value.map(function(y){return new Ge(""+e.key+y.key,e.value,y.message)});var c=i.value.expression||i.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!c.outputDefined())return[new Ge(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!mn(c))return[new Ge(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!mn(c))return[new Ge(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Vn(c,["zoom","feature-state"]))return[new Ge(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!dn(c))return[new Ge(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gs(e){var i=e.key,c=e.value,y=e.valueSpec,I=[];return Array.isArray(y.values)?y.values.indexOf(cn(c))===-1&&I.push(new Ge(i,c,"expected one of ["+y.values.join(", ")+"], "+JSON.stringify(c)+" found")):Object.keys(y.values).indexOf(cn(c))===-1&&I.push(new Ge(i,c,"expected one of ["+Object.keys(y.values).join(", ")+"], "+JSON.stringify(c)+" found")),I}function Kl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var i=0,c=e.slice(1);i<c.length;i+=1){var y=c[i];if(!Kl(y)&&typeof y!="boolean")return!1}return!0;default:return!0}}Zl.deserialize=function(e){return new Zl(e._parameters,e._specification)},Zl.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var dl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function su(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Kl(e)||(e=tc(e));var i=Af(e,dl);if(i.result==="error")throw new Error(i.value.map(function(c){return c.key+": "+c.message}).join(", "));return{filter:function(c,y,I){return i.value.evaluate(c,y,{},I)},needGeometry:function c(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(var I=1;I<y.length;I++)if(c(y[I]))return!0;return!1}(e)}}function Fc(e,i){return e<i?-1:e>i?1:0}function tc(e){if(!e)return!0;var i,c=e[0];return e.length<=1?c!=="any":c==="=="?Tf(e[1],e[2],"=="):c==="!="?ff(Tf(e[1],e[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Tf(e[1],e[2],c):c==="any"?(i=e.slice(1),["any"].concat(i.map(tc))):c==="all"?["all"].concat(e.slice(1).map(tc)):c==="none"?["all"].concat(e.slice(1).map(tc).map(ff)):c==="in"?_c(e[1],e.slice(2)):c==="!in"?ff(_c(e[1],e.slice(2))):c==="has"?Hl(e[1]):c==="!has"?ff(Hl(e[1])):c!=="within"||e}function Tf(e,i,c){switch(e){case"$type":return["filter-type-"+c,i];case"$id":return["filter-id-"+c,i];default:return["filter-"+c,e,i]}}function _c(e,i){if(i.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(c){return typeof c!=typeof i[0]})?["filter-in-large",e,["literal",i.sort(Fc)]]:["filter-in-small",e,["literal",i]]}}function Hl(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ff(e){return["!",e]}function xc(e){return Kl(Dn(e.value))?Yo(on({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(c){var y=c.value,I=c.key;if(Us(y)!=="array")return[new Ge(I,y,"array expected, "+Us(y)+" found")];var H,Q=c.styleSpec,ge=[];if(y.length<1)return[new Ge(I,y,"filter array must have at least 1 element")];switch(ge=ge.concat(Gs({key:I+"[0]",value:y[0],valueSpec:Q.filter_operator,style:c.style,styleSpec:c.styleSpec})),cn(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&cn(y[1])==="$type"&&ge.push(new Ge(I,y,'"$type" cannot be use with operator "'+y[0]+'"'));case"==":case"!=":y.length!==3&&ge.push(new Ge(I,y,'filter array for operator "'+y[0]+'" must have 3 elements'));case"in":case"!in":y.length>=2&&(H=Us(y[1]))!=="string"&&ge.push(new Ge(I+"[1]",y[1],"string expected, "+H+" found"));for(var tt=2;tt<y.length;tt++)H=Us(y[tt]),cn(y[1])==="$type"?ge=ge.concat(Gs({key:I+"["+tt+"]",value:y[tt],valueSpec:Q.geometry_type,style:c.style,styleSpec:c.styleSpec})):H!=="string"&&H!=="number"&&H!=="boolean"&&ge.push(new Ge(I+"["+tt+"]",y[tt],"string, number, or boolean expected, "+H+" found"));break;case"any":case"all":case"none":for(var Rt=1;Rt<y.length;Rt++)ge=ge.concat(i({key:I+"["+Rt+"]",value:y[Rt],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":H=Us(y[1]),y.length!==2?ge.push(new Ge(I,y,'filter array for "'+y[0]+'" operator must have 2 elements')):H!=="string"&&ge.push(new Ge(I+"[1]",y[1],"string expected, "+H+" found"));break;case"within":H=Us(y[1]),y.length!==2?ge.push(new Ge(I,y,'filter array for "'+y[0]+'" operator must have 2 elements')):H!=="object"&&ge.push(new Ge(I+"[1]",y[1],"object expected, "+H+" found"))}return ge}(e)}function Yh(e,i){var c=e.key,y=e.style,I=e.styleSpec,H=e.value,Q=e.objectKey,ge=I[i+"_"+e.layerType];if(!ge)return[];var tt=Q.match(/^(.*)-transition$/);if(i==="paint"&&tt&&ge[tt[1]]&&ge[tt[1]].transition)return lo({key:c,value:H,valueSpec:I.transition,style:y,styleSpec:I});var Rt,Ft=e.valueSpec||ge[Q];if(!Ft)return[new Ge(c,H,'unknown property "'+Q+'"')];if(Us(H)==="string"&&Lc(Ft)&&!Ft.tokens&&(Rt=/^{([^}]+)}$/.exec(H)))return[new Ge(c,H,'"'+Q+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Rt[1])+" }`.")];var Jt=[];return e.layerType==="symbol"&&(Q==="text-field"&&y&&!y.glyphs&&Jt.push(new Ge(c,H,'use of "text-field" requires a style "glyphs" property')),Q==="text-font"&&th(Dn(H))&&cn(H.type)==="identity"&&Jt.push(new Ge(c,H,'"text-font" does not support identity functions'))),Jt.concat(lo({key:e.key,value:H,valueSpec:Ft,style:y,styleSpec:I,expressionContext:"property",propertyType:i,propertyKey:Q}))}function Uh(e){return Yh(e,"paint")}function Gc(e){return Yh(e,"layout")}function Mf(e){var i=[],c=e.value,y=e.key,I=e.style,H=e.styleSpec;c.type||c.ref||i.push(new Ge(y,c,'either "type" or "ref" is required'));var Q,ge=cn(c.type),tt=cn(c.ref);if(c.id)for(var Rt=cn(c.id),Ft=0;Ft<e.arrayIndex;Ft++){var Jt=I.layers[Ft];cn(Jt.id)===Rt&&i.push(new Ge(y,c.id,'duplicate layer id "'+c.id+'", previously used at line '+Jt.id.__line__))}if("ref"in c)["type","source","source-layer","filter","layout"].forEach(function(tn){tn in c&&i.push(new Ge(y,c[tn],'"'+tn+'" is prohibited for ref layers'))}),I.layers.forEach(function(tn){cn(tn.id)===tt&&(Q=tn)}),Q?Q.ref?i.push(new Ge(y,c.ref,"ref cannot reference another ref layer")):ge=cn(Q.type):i.push(new Ge(y,c.ref,'ref layer "'+tt+'" not found'));else if(ge!=="background")if(c.source){var dr=I.sources&&I.sources[c.source],Cr=dr&&cn(dr.type);dr?Cr==="vector"&&ge==="raster"?i.push(new Ge(y,c.source,'layer "'+c.id+'" requires a raster source')):Cr==="raster"&&ge!=="raster"?i.push(new Ge(y,c.source,'layer "'+c.id+'" requires a vector source')):Cr!=="vector"||c["source-layer"]?Cr==="raster-dem"&&ge!=="hillshade"?i.push(new Ge(y,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):ge!=="line"||!c.paint||!c.paint["line-gradient"]||Cr==="geojson"&&dr.lineMetrics||i.push(new Ge(y,c,'layer "'+c.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new Ge(y,c,'layer "'+c.id+'" must specify a "source-layer"')):i.push(new Ge(y,c.source,'source "'+c.source+'" not found'))}else i.push(new Ge(y,c,'missing required property "source"'));return i=i.concat(kc({key:y,value:c,valueSpec:H.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return lo({key:y+".type",value:c.type,valueSpec:H.layer.type,style:e.style,styleSpec:e.styleSpec,object:c,objectKey:"type"})},filter:xc,layout:function(tn){return kc({layer:c,key:tn.key,value:tn.value,style:tn.style,styleSpec:tn.styleSpec,objectElementValidators:{"*":function(rn){return Gc(on({layerType:ge},rn))}}})},paint:function(tn){return kc({layer:c,key:tn.key,value:tn.value,style:tn.style,styleSpec:tn.styleSpec,objectElementValidators:{"*":function(rn){return Uh(on({layerType:ge},rn))}}})}}}))}function nh(e){var i=e.value,c=e.key,y=Us(i);return y!=="string"?[new Ge(c,i,"string expected, "+y+" found")]:[]}var Qn={promoteId:function(e){var i=e.key,c=e.value;if(Us(c)==="string")return nh({key:i,value:c});var y=[];for(var I in c)y.push.apply(y,nh({key:i+"."+I,value:c[I]}));return y}};function fa(e){var i=e.value,c=e.key,y=e.styleSpec,I=e.style;if(!i.type)return[new Ge(c,i,'"type" is required')];var H,Q=cn(i.type);switch(Q){case"vector":case"raster":case"raster-dem":return kc({key:c,value:i,valueSpec:y["source_"+Q.replace("-","_")],style:e.style,styleSpec:y,objectElementValidators:Qn});case"geojson":if(H=kc({key:c,value:i,valueSpec:y.source_geojson,style:I,styleSpec:y,objectElementValidators:Qn}),i.cluster)for(var ge in i.clusterProperties){var tt=i.clusterProperties[ge],Rt=tt[0],Ft=typeof Rt=="string"?[Rt,["accumulated"],["get",ge]]:Rt;H.push.apply(H,Yo({key:c+"."+ge+".map",value:tt[1],expressionContext:"cluster-map"})),H.push.apply(H,Yo({key:c+"."+ge+".reduce",value:Ft,expressionContext:"cluster-reduce"}))}return H;case"video":return kc({key:c,value:i,valueSpec:y.source_video,style:I,styleSpec:y});case"image":return kc({key:c,value:i,valueSpec:y.source_image,style:I,styleSpec:y});case"canvas":return[new Ge(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gs({key:c+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:I,styleSpec:y})}}function $i(e){var i=e.value,c=e.styleSpec,y=c.light,I=e.style,H=[],Q=Us(i);if(i===void 0)return H;if(Q!=="object")return H.concat([new Ge("light",i,"object expected, "+Q+" found")]);for(var ge in i){var tt=ge.match(/^(.*)-transition$/);H=H.concat(tt&&y[tt[1]]&&y[tt[1]].transition?lo({key:ge,value:i[ge],valueSpec:c.transition,style:I,styleSpec:c}):y[ge]?lo({key:ge,value:i[ge],valueSpec:y[ge],style:I,styleSpec:c}):[new Ge(ge,i[ge],'unknown property "'+ge+'"')])}return H}var $o={"*":function(){return[]},array:ad,boolean:function(e){var i=e.value,c=e.key,y=Us(i);return y!=="boolean"?[new Ge(c,i,"boolean expected, "+y+" found")]:[]},number:rh,color:function(e){var i=e.key,c=e.value,y=Us(c);return y!=="string"?[new Ge(i,c,"color expected, "+y+" found")]:Ta(c)===null?[new Ge(i,c,'color expected, "'+c+'" found')]:[]},constants:Gr,enum:Gs,filter:xc,function:od,layer:Mf,object:kc,source:fa,light:$i,string:nh,formatted:function(e){return nh(e).length===0?[]:Yo(e)},resolvedImage:function(e){return nh(e).length===0?[]:Yo(e)}};function lo(e){var i=e.value,c=e.valueSpec,y=e.styleSpec;return c.expression&&th(cn(i))?od(e):c.expression&&cf(Dn(i))?Yo(e):c.type&&$o[c.type]?$o[c.type](e):kc(on({},e,{valueSpec:c.type?y[c.type]:c}))}function Es(e){var i=e.value,c=e.key,y=nh(e);return y.length||(i.indexOf("{fontstack}")===-1&&y.push(new Ge(c,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&y.push(new Ge(c,i,'"glyphs" url must include a "{range}" token'))),y}function tl(e,i){i===void 0&&(i=sr);var c=[];return c=c.concat(lo({key:"",value:e,valueSpec:i.$root,styleSpec:i,style:e,objectElementValidators:{glyphs:Es,"*":function(){return[]}}})),e.constants&&(c=c.concat(Gr({key:"constants",value:e.constants,style:e,styleSpec:i}))),al(c)}function al(e){return[].concat(e).sort(function(i,c){return i.line-c.line})}function Tl(e){return function(){for(var i=[],c=arguments.length;c--;)i[c]=arguments[c];return al(e.apply(this,i))}}tl.source=Tl(fa),tl.light=Tl($i),tl.layer=Tl(Mf),tl.filter=Tl(xc),tl.paintProperty=Tl(Uh),tl.layoutProperty=Tl(Gc);var Lh=tl,xf=Lh.light,Qh=Lh.paintProperty,$h=Lh.layoutProperty;function Ul(e,i){var c=!1;if(i&&i.length)for(var y=0,I=i;y<I.length;y+=1)e.fire(new Ar(new Error(I[y].message))),c=!0;return c}var Rl=ol;function ol(e,i,c){var y=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var I=new Int32Array(this.arrayBuffer);e=I[0],this.d=(i=I[1])+2*(c=I[2]);for(var H=0;H<this.d*this.d;H++){var Q=I[3+H],ge=I[3+H+1];y.push(Q===ge?null:I.subarray(Q,ge))}var tt=I[3+y.length+1];this.keys=I.subarray(I[3+y.length],tt),this.bboxes=I.subarray(tt),this.insert=this._insertReadonly}else{this.d=i+2*c;for(var Rt=0;Rt<this.d*this.d;Rt++)y.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=c,this.scale=i/e,this.uid=0;var Ft=c/i*e;this.min=-Ft,this.max=e+Ft}ol.prototype.insert=function(e,i,c,y,I){this._forEachCell(i,c,y,I,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(I)},ol.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ol.prototype._insertCell=function(e,i,c,y,I,H){this.cells[I].push(H)},ol.prototype.query=function(e,i,c,y,I){var H=this.min,Q=this.max;if(e<=H&&i<=H&&Q<=c&&Q<=y&&!I)return Array.prototype.slice.call(this.keys);var ge=[];return this._forEachCell(e,i,c,y,this._queryCell,ge,{},I),ge},ol.prototype._queryCell=function(e,i,c,y,I,H,Q,ge){var tt=this.cells[I];if(tt!==null)for(var Rt=this.keys,Ft=this.bboxes,Jt=0;Jt<tt.length;Jt++){var dr=tt[Jt];if(Q[dr]===void 0){var Cr=4*dr;(ge?ge(Ft[Cr+0],Ft[Cr+1],Ft[Cr+2],Ft[Cr+3]):e<=Ft[Cr+2]&&i<=Ft[Cr+3]&&c>=Ft[Cr+0]&&y>=Ft[Cr+1])?(Q[dr]=!0,H.push(Rt[dr])):Q[dr]=!1}}},ol.prototype._forEachCell=function(e,i,c,y,I,H,Q,ge){for(var tt=this._convertToCellCoord(e),Rt=this._convertToCellCoord(i),Ft=this._convertToCellCoord(c),Jt=this._convertToCellCoord(y),dr=tt;dr<=Ft;dr++)for(var Cr=Rt;Cr<=Jt;Cr++){var tn=this.d*Cr+dr;if((!ge||ge(this._convertFromCellCoord(dr),this._convertFromCellCoord(Cr),this._convertFromCellCoord(dr+1),this._convertFromCellCoord(Cr+1)))&&I.call(this,e,i,c,y,tn,H,Q,ge))return}},ol.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ol.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ol.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,i=3+this.cells.length+1+1,c=0,y=0;y<this.cells.length;y++)c+=this.cells[y].length;var I=new Int32Array(i+c+this.keys.length+this.bboxes.length);I[0]=this.extent,I[1]=this.n,I[2]=this.padding;for(var H=i,Q=0;Q<e.length;Q++){var ge=e[Q];I[3+Q]=H,I.set(ge,H),H+=ge.length}return I[3+e.length]=H,I.set(this.keys,H),I[3+e.length+1]=H+=this.keys.length,I.set(this.bboxes,H),H+=this.bboxes.length,I.buffer};var uu=O.ImageData,Bc=O.ImageBitmap,cc={};function ao(e,i,c){c===void 0&&(c={}),Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),cc[e]={klass:i,omit:c.omit||[],shallow:c.shallow||[]}}for(var Ml in ao("Object",Object),Rl.serialize=function(e,i){var c=e.toArrayBuffer();return i&&i.push(c),{buffer:c}},Rl.deserialize=function(e){return new Rl(e.buffer)},ao("Grid",Rl),ao("Color",ma),ao("Error",Error),ao("ResolvedImage",xa),ao("StylePropertyFunction",Zl),ao("StyleExpression",Eh,{omit:["_evaluator"]}),ao("ZoomDependentExpression",Dc),ao("ZoomConstantExpression",_f),ao("CompoundExpression",Vs,{omit:["_evaluate"]}),Ps)Ps[Ml]._classRegistryKey||ao("Expression_"+Ml,Ps[Ml]);function Hf(e){return e&&typeof ArrayBuffer!="undefined"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function fl(e){return Bc&&e instanceof Bc}function Vl(e,i){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Hf(e)||fl(e))return i&&i.push(e),e;if(ArrayBuffer.isView(e)){var c=e;return i&&i.push(c.buffer),c}if(e instanceof uu)return i&&i.push(e.data.buffer),e;if(Array.isArray(e)){for(var y=[],I=0,H=e;I<H.length;I+=1)y.push(Vl(H[I],i));return y}if(typeof e=="object"){var Q=e.constructor,ge=Q._classRegistryKey;if(!ge)throw new Error("can't serialize object of unregistered class");var tt=Q.serialize?Q.serialize(e,i):{};if(!Q.serialize){for(var Rt in e)if(e.hasOwnProperty(Rt)&&!(cc[ge].omit.indexOf(Rt)>=0)){var Ft=e[Rt];tt[Rt]=cc[ge].shallow.indexOf(Rt)>=0?Ft:Vl(Ft,i)}e instanceof Error&&(tt.message=e.message)}if(tt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ge!=="Object"&&(tt.$name=ge),tt}throw new Error("can't serialize object of type "+typeof e)}function Ll(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Hf(e)||fl(e)||ArrayBuffer.isView(e)||e instanceof uu)return e;if(Array.isArray(e))return e.map(Ll);if(typeof e=="object"){var i=e.$name||"Object",c=cc[i].klass;if(!c)throw new Error("can't deserialize unregistered class "+i);if(c.deserialize)return c.deserialize(e);for(var y=Object.create(c.prototype),I=0,H=Object.keys(e);I<H.length;I+=1){var Q=H[I];if(Q!=="$name"){var ge=e[Q];y[Q]=cc[i].shallow.indexOf(Q)>=0?ge:Ll(ge)}}return y}throw new Error("can't deserialize object of type "+typeof e)}var jh=function(){this.first=!0};jh.prototype.update=function(e,i){var c=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=c,!0))};var Qa={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Yl(e){for(var i=0,c=e;i<c.length;i+=1)if(Vf(c[i].charCodeAt(0)))return!0;return!1}function Vf(e){return!(e!==746&&e!==747&&(e<4352||!(Qa["Bopomofo Extended"](e)||Qa.Bopomofo(e)||Qa["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Qa["CJK Compatibility Ideographs"](e)||Qa["CJK Compatibility"](e)||Qa["CJK Radicals Supplement"](e)||Qa["CJK Strokes"](e)||!(!Qa["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||Qa["CJK Unified Ideographs Extension A"](e)||Qa["CJK Unified Ideographs"](e)||Qa["Enclosed CJK Letters and Months"](e)||Qa["Hangul Compatibility Jamo"](e)||Qa["Hangul Jamo Extended-A"](e)||Qa["Hangul Jamo Extended-B"](e)||Qa["Hangul Jamo"](e)||Qa["Hangul Syllables"](e)||Qa.Hiragana(e)||Qa["Ideographic Description Characters"](e)||Qa.Kanbun(e)||Qa["Kangxi Radicals"](e)||Qa["Katakana Phonetic Extensions"](e)||Qa.Katakana(e)&&e!==12540||!(!Qa["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!Qa["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Qa["Unified Canadian Aboriginal Syllabics"](e)||Qa["Unified Canadian Aboriginal Syllabics Extended"](e)||Qa["Vertical Forms"](e)||Qa["Yijing Hexagram Symbols"](e)||Qa["Yi Syllables"](e)||Qa["Yi Radicals"](e))))}function ih(e){return!(Vf(e)||function(i){return!!(Qa["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Qa["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Qa["Letterlike Symbols"](i)||Qa["Number Forms"](i)||Qa["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Qa["Control Pictures"](i)&&i!==9251||Qa["Optical Character Recognition"](i)||Qa["Enclosed Alphanumerics"](i)||Qa["Geometric Shapes"](i)||Qa["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Qa["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Qa["CJK Symbols and Punctuation"](i)||Qa.Katakana(i)||Qa["Private Use Area"](i)||Qa["CJK Compatibility Forms"](i)||Qa["Small Form Variants"](i)||Qa["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(e))}function Vu(e){return e>=1424&&e<=2303||Qa["Arabic Presentation Forms-A"](e)||Qa["Arabic Presentation Forms-B"](e)}function hf(e,i){return!(!i&&Vu(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Qa.Khmer(e))}function Hh(e){for(var i=0,c=e;i<c.length;i+=1)if(Vu(c[i].charCodeAt(0)))return!0;return!1}var bc=null,Ec="unavailable",ah=null,Wc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Ec="error"),bc&&bc(e)};function Dh(){Sc.fire(new cr("pluginStateChange",{pluginStatus:Ec,pluginURL:ah}))}var Sc=new Lr,Vh=function(){return Ec},Ql=function(){if(Ec!=="deferred"||!ah)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ec="loading",Dh(),ah&&X({url:ah},function(e){e?Wc(e):(Ec="loaded",Dh())})},gu={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ec==="loaded"||gu.applyArabicShaping!=null},isLoading:function(){return Ec==="loading"},setState:function(e){Ec=e.pluginStatus,ah=e.pluginURL},isParsed:function(){return gu.applyArabicShaping!=null&&gu.processBidirectionalText!=null&&gu.processStyledBidirectionalText!=null},getPluginURL:function(){return ah}},Ks=function(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jh,this.transition={})};Ks.prototype.isSupportedScript=function(e){return function(i,c){for(var y=0,I=i;y<I.length;y+=1)if(!hf(I[y].charCodeAt(0),c))return!1;return!0}(e,gu.isLoaded())},Ks.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ks.prototype.getCrossfadeParameters=function(){var e=this.zoom,i=e-Math.floor(e),c=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*i}};var Gf=function(e,i){this.property=e,this.value=i,this.expression=function(c,y){if(th(c))return new Zl(c,y);if(cf(c)){var I=Ff(c,y);if(I.result==="error")throw new Error(I.value.map(function(Q){return Q.key+": "+Q.message}).join(", "));return I.value}var H=c;return typeof c=="string"&&y.type==="color"&&(H=ma.parse(c)),{kind:"constant",evaluate:function(){return H}}}(i===void 0?e.specification.default:i,e.specification)};Gf.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Gf.prototype.possiblyEvaluate=function(e,i,c){return this.property.possiblyEvaluate(this,e,i,c)};var Bf=function(e){this.property=e,this.value=new Gf(e,void 0)};Bf.prototype.transitioned=function(e,i){return new Pl(this.property,this.value,i,fe({},e.transition,this.transition),e.now)},Bf.prototype.untransitioned=function(){return new Pl(this.property,this.value,null,{},0)};var eu=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};eu.prototype.getValue=function(e){return _e(this._values[e].value.value)},eu.prototype.setValue=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Bf(this._values[e].property)),this._values[e].value=new Gf(this._values[e].property,i===null?void 0:_e(i))},eu.prototype.getTransition=function(e){return _e(this._values[e].transition)},eu.prototype.setTransition=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Bf(this._values[e].property)),this._values[e].transition=_e(i)||void 0},eu.prototype.serialize=function(){for(var e={},i=0,c=Object.keys(this._values);i<c.length;i+=1){var y=c[i],I=this.getValue(y);I!==void 0&&(e[y]=I);var H=this.getTransition(y);H!==void 0&&(e[y+"-transition"]=H)}return e},eu.prototype.transitioned=function(e,i){for(var c=new Xc(this._properties),y=0,I=Object.keys(this._values);y<I.length;y+=1){var H=I[y];c._values[H]=this._values[H].transitioned(e,i._values[H])}return c},eu.prototype.untransitioned=function(){for(var e=new Xc(this._properties),i=0,c=Object.keys(this._values);i<c.length;i+=1){var y=c[i];e._values[y]=this._values[y].untransitioned()}return e};var Pl=function(e,i,c,y,I){this.property=e,this.value=i,this.begin=I+y.delay||0,this.end=this.begin+y.duration||0,e.specification.transition&&(y.delay||y.duration)&&(this.prior=c)};Pl.prototype.possiblyEvaluate=function(e,i,c){var y=e.now||0,I=this.value.possiblyEvaluate(e,i,c),H=this.prior;if(H){if(y>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(y<this.begin)return H.possiblyEvaluate(e,i,c);var Q=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(H.possiblyEvaluate(e,i,c),I,function(ge){if(ge<=0)return 0;if(ge>=1)return 1;var tt=ge*ge,Rt=tt*ge;return 4*(ge<.5?Rt:3*(ge-tt)+Rt-.75)}(Q))}return I};var Xc=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Xc.prototype.possiblyEvaluate=function(e,i,c){for(var y=new fc(this._properties),I=0,H=Object.keys(this._values);I<H.length;I+=1){var Q=H[I];y._values[Q]=this._values[Q].possiblyEvaluate(e,i,c)}return y},Xc.prototype.hasTransition=function(){for(var e=0,i=Object.keys(this._values);e<i.length;e+=1)if(this._values[i[e]].prior)return!0;return!1};var Nc=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Nc.prototype.getValue=function(e){return _e(this._values[e].value)},Nc.prototype.setValue=function(e,i){this._values[e]=new Gf(this._values[e].property,i===null?void 0:_e(i))},Nc.prototype.serialize=function(){for(var e={},i=0,c=Object.keys(this._values);i<c.length;i+=1){var y=c[i],I=this.getValue(y);I!==void 0&&(e[y]=I)}return e},Nc.prototype.possiblyEvaluate=function(e,i,c){for(var y=new fc(this._properties),I=0,H=Object.keys(this._values);I<H.length;I+=1){var Q=H[I];y._values[Q]=this._values[Q].possiblyEvaluate(e,i,c)}return y};var Jl=function(e,i,c){this.property=e,this.value=i,this.parameters=c};Jl.prototype.isConstant=function(){return this.value.kind==="constant"},Jl.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Jl.prototype.evaluate=function(e,i,c,y){return this.property.evaluate(this.value,this.parameters,e,i,c,y)};var fc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};fc.prototype.get=function(e){return this._values[e]};var oo=function(e){this.specification=e};oo.prototype.possiblyEvaluate=function(e,i){return e.expression.evaluate(i)},oo.prototype.interpolate=function(e,i,c){var y=Mn[this.specification.type];return y?y(e,i,c):e};var ko=function(e,i){this.specification=e,this.overrides=i};ko.prototype.possiblyEvaluate=function(e,i,c,y){return new Jl(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},c,y)}:e.expression,i)},ko.prototype.interpolate=function(e,i,c){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Jl(this,{kind:"constant",value:void 0},e.parameters);var y=Mn[this.specification.type];return y?new Jl(this,{kind:"constant",value:y(e.value.value,i.value.value,c)},e.parameters):e},ko.prototype.evaluate=function(e,i,c,y,I,H){return e.kind==="constant"?e.value:e.evaluate(i,c,y,I,H)};var nu=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(c,y,I,H){if(c.value===void 0)return new Jl(this,{kind:"constant",value:void 0},y);if(c.expression.kind==="constant"){var Q=c.expression.evaluate(y,null,{},I,H),ge=c.property.specification.type==="resolvedImage"&&typeof Q!="string"?Q.name:Q,tt=this._calculate(ge,ge,ge,y);return new Jl(this,{kind:"constant",value:tt},y)}if(c.expression.kind==="camera"){var Rt=this._calculate(c.expression.evaluate({zoom:y.zoom-1}),c.expression.evaluate({zoom:y.zoom}),c.expression.evaluate({zoom:y.zoom+1}),y);return new Jl(this,{kind:"constant",value:Rt},y)}return new Jl(this,c.expression,y)},i.prototype.evaluate=function(c,y,I,H,Q,ge){if(c.kind==="source"){var tt=c.evaluate(y,I,H,Q,ge);return this._calculate(tt,tt,tt,y)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(y.zoom)-1},I,H),c.evaluate({zoom:Math.floor(y.zoom)},I,H),c.evaluate({zoom:Math.floor(y.zoom)+1},I,H),y):c.value},i.prototype._calculate=function(c,y,I,H){return H.zoom>H.zoomHistory.lastIntegerZoom?{from:c,to:y}:{from:I,to:y}},i.prototype.interpolate=function(c){return c},i}(ko),ql=function(e){this.specification=e};ql.prototype.possiblyEvaluate=function(e,i,c,y){if(e.value!==void 0){if(e.expression.kind==="constant"){var I=e.expression.evaluate(i,null,{},c,y);return this._calculate(I,I,I,i)}return this._calculate(e.expression.evaluate(new Ks(Math.floor(i.zoom-1),i)),e.expression.evaluate(new Ks(Math.floor(i.zoom),i)),e.expression.evaluate(new Ks(Math.floor(i.zoom+1),i)),i)}},ql.prototype._calculate=function(e,i,c,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:c,to:i}},ql.prototype.interpolate=function(e){return e};var xl=function(e){this.specification=e};xl.prototype.possiblyEvaluate=function(e,i,c,y){return!!e.expression.evaluate(i,null,{},c,y)},xl.prototype.interpolate=function(){return!1};var mu=function(e){for(var i in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var c=e[i];c.specification.overridable&&this.overridableProperties.push(i);var y=this.defaultPropertyValues[i]=new Gf(c,void 0),I=this.defaultTransitionablePropertyValues[i]=new Bf(c);this.defaultTransitioningPropertyValues[i]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=y.possiblyEvaluate({})}};ao("DataDrivenProperty",ko),ao("DataConstantProperty",oo),ao("CrossFadedDataDrivenProperty",nu),ao("CrossFadedProperty",ql),ao("ColorRampProperty",xl);var Ku=function(e){function i(c,y){if(e.call(this),this.id=c.id,this.type=c.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},c.type!=="custom"&&(this.metadata=(c=c).metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),y.layout&&(this._unevaluatedLayout=new Nc(y.layout)),y.paint)){for(var I in this._transitionablePaint=new eu(y.paint),c.paint)this.setPaintProperty(I,c.paint[I],{validate:!1});for(var H in c.layout)this.setLayoutProperty(H,c.layout[H],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fc(y.paint)}}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)},i.prototype.setLayoutProperty=function(c,y,I){I===void 0&&(I={}),y!=null&&this._validate($h,"layers."+this.id+".layout."+c,c,y,I)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,y):this.visibility=y)},i.prototype.getPaintProperty=function(c){return se(c,"-transition")?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)},i.prototype.setPaintProperty=function(c,y,I){if(I===void 0&&(I={}),y!=null&&this._validate(Qh,"layers."+this.id+".paint."+c,c,y,I))return!1;if(se(c,"-transition"))return this._transitionablePaint.setTransition(c.slice(0,-11),y||void 0),!1;var H=this._transitionablePaint._values[c],Q=H.property.specification["property-type"]==="cross-faded-data-driven",ge=H.value.isDataDriven(),tt=H.value;this._transitionablePaint.setValue(c,y),this._handleSpecialPaintPropertyUpdate(c);var Rt=this._transitionablePaint._values[c].value;return Rt.isDataDriven()||ge||Q||this._handleOverridablePaintPropertyUpdate(c,tt,Rt)},i.prototype._handleSpecialPaintPropertyUpdate=function(c){},i.prototype._handleOverridablePaintPropertyUpdate=function(c,y,I){return!1},i.prototype.isHidden=function(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(c,y){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,y)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,y)},i.prototype.serialize=function(){var c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),me(c,function(y,I){return!(y===void 0||I==="layout"&&!Object.keys(y).length||I==="paint"&&!Object.keys(y).length)})},i.prototype._validate=function(c,y,I,H,Q){return Q===void 0&&(Q={}),(!Q||Q.validate!==!1)&&Ul(this,c.call(Lh,{key:y,layerType:this.type,objectKey:I,value:H,styleSpec:sr,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var c in this.paint._values){var y=this.paint.get(c);if(y instanceof Jl&&Lc(y.property.specification)&&(y.value.kind==="source"||y.value.kind==="composite")&&y.value.isStateDependent)return!0}return!1},i}(Lr),Kc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Gh=function(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Yu=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function bl(e,i){i===void 0&&(i=1);var c=0,y=0;return{members:e.map(function(I){var H=Kc[I.type].BYTES_PER_ELEMENT,Q=c=yd(c,Math.max(i,H)),ge=I.components||1;return y=Math.max(y,H),c+=H*ge,{name:I.name,type:I.type,components:ge,offset:Q}}),size:yd(c,Math.max(y,i)),alignment:i}}function yd(e,i){return Math.ceil(e/i)*i}Yu.serialize=function(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Yu.deserialize=function(e){var i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Yu.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Yu.prototype.clear=function(){this.length=0},Yu.prototype.resize=function(e){this.reserve(e),this.length=e},Yu.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Yu.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ph=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y){var I=this.length;return this.resize(I+1),this.emplace(I,c,y)},i.prototype.emplace=function(c,y,I){var H=2*c;return this.int16[H+0]=y,this.int16[H+1]=I,c},i}(Yu);ph.prototype.bytesPerElement=4,ao("StructArrayLayout2i4",ph);var Cc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H){var Q=this.length;return this.resize(Q+1),this.emplace(Q,c,y,I,H)},i.prototype.emplace=function(c,y,I,H,Q){var ge=4*c;return this.int16[ge+0]=y,this.int16[ge+1]=I,this.int16[ge+2]=H,this.int16[ge+3]=Q,c},i}(Yu);Cc.prototype.bytesPerElement=8,ao("StructArrayLayout4i8",Cc);var Yc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge){var tt=this.length;return this.resize(tt+1),this.emplace(tt,c,y,I,H,Q,ge)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt){var Rt=6*c;return this.int16[Rt+0]=y,this.int16[Rt+1]=I,this.int16[Rt+2]=H,this.int16[Rt+3]=Q,this.int16[Rt+4]=ge,this.int16[Rt+5]=tt,c},i}(Yu);Yc.prototype.bytesPerElement=12,ao("StructArrayLayout2i4i12",Yc);var Dl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge){var tt=this.length;return this.resize(tt+1),this.emplace(tt,c,y,I,H,Q,ge)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt){var Rt=4*c,Ft=8*c;return this.int16[Rt+0]=y,this.int16[Rt+1]=I,this.uint8[Ft+4]=H,this.uint8[Ft+5]=Q,this.uint8[Ft+6]=ge,this.uint8[Ft+7]=tt,c},i}(Yu);Dl.prototype.bytesPerElement=8,ao("StructArrayLayout2i4ub8",Dl);var Ur=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y){var I=this.length;return this.resize(I+1),this.emplace(I,c,y)},i.prototype.emplace=function(c,y,I){var H=2*c;return this.float32[H+0]=y,this.float32[H+1]=I,c},i}(Yu);Ur.prototype.bytesPerElement=8,ao("StructArrayLayout2f8",Ur);var kl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt){var dr=this.length;return this.resize(dr+1),this.emplace(dr,c,y,I,H,Q,ge,tt,Rt,Ft,Jt)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr){var Cr=10*c;return this.uint16[Cr+0]=y,this.uint16[Cr+1]=I,this.uint16[Cr+2]=H,this.uint16[Cr+3]=Q,this.uint16[Cr+4]=ge,this.uint16[Cr+5]=tt,this.uint16[Cr+6]=Rt,this.uint16[Cr+7]=Ft,this.uint16[Cr+8]=Jt,this.uint16[Cr+9]=dr,c},i}(Yu);kl.prototype.bytesPerElement=20,ao("StructArrayLayout10ui20",kl);var Vo=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr){var tn=this.length;return this.resize(tn+1),this.emplace(tn,c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn){var rn=12*c;return this.int16[rn+0]=y,this.int16[rn+1]=I,this.int16[rn+2]=H,this.int16[rn+3]=Q,this.uint16[rn+4]=ge,this.uint16[rn+5]=tt,this.uint16[rn+6]=Rt,this.uint16[rn+7]=Ft,this.int16[rn+8]=Jt,this.int16[rn+9]=dr,this.int16[rn+10]=Cr,this.int16[rn+11]=tn,c},i}(Yu);Vo.prototype.bytesPerElement=24,ao("StructArrayLayout4i4ui4i24",Vo);var Qo=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I){var H=this.length;return this.resize(H+1),this.emplace(H,c,y,I)},i.prototype.emplace=function(c,y,I,H){var Q=3*c;return this.float32[Q+0]=y,this.float32[Q+1]=I,this.float32[Q+2]=H,c},i}(Yu);Qo.prototype.bytesPerElement=12,ao("StructArrayLayout3f12",Qo);var du=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},i.prototype.emplace=function(c,y){return this.uint32[1*c+0]=y,c},i}(Yu);du.prototype.bytesPerElement=4,ao("StructArrayLayout1ul4",du);var kh=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge,tt,Rt,Ft){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,c,y,I,H,Q,ge,tt,Rt,Ft)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt){var dr=10*c,Cr=5*c;return this.int16[dr+0]=y,this.int16[dr+1]=I,this.int16[dr+2]=H,this.int16[dr+3]=Q,this.int16[dr+4]=ge,this.int16[dr+5]=tt,this.uint32[Cr+3]=Rt,this.uint16[dr+8]=Ft,this.uint16[dr+9]=Jt,c},i}(Yu);kh.prototype.bytesPerElement=20,ao("StructArrayLayout6i1ul2ui20",kh);var Wf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge){var tt=this.length;return this.resize(tt+1),this.emplace(tt,c,y,I,H,Q,ge)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt){var Rt=6*c;return this.int16[Rt+0]=y,this.int16[Rt+1]=I,this.int16[Rt+2]=H,this.int16[Rt+3]=Q,this.int16[Rt+4]=ge,this.int16[Rt+5]=tt,c},i}(Yu);Wf.prototype.bytesPerElement=12,ao("StructArrayLayout2i2i2i12",Wf);var zc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q){var ge=this.length;return this.resize(ge+1),this.emplace(ge,c,y,I,H,Q)},i.prototype.emplace=function(c,y,I,H,Q,ge){var tt=4*c,Rt=8*c;return this.float32[tt+0]=y,this.float32[tt+1]=I,this.float32[tt+2]=H,this.int16[Rt+6]=Q,this.int16[Rt+7]=ge,c},i}(Yu);zc.prototype.bytesPerElement=16,ao("StructArrayLayout2f1f2i16",zc);var df=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H){var Q=this.length;return this.resize(Q+1),this.emplace(Q,c,y,I,H)},i.prototype.emplace=function(c,y,I,H,Q){var ge=12*c,tt=3*c;return this.uint8[ge+0]=y,this.uint8[ge+1]=I,this.float32[tt+1]=H,this.float32[tt+2]=Q,c},i}(Yu);df.prototype.bytesPerElement=12,ao("StructArrayLayout2ub2f12",df);var rc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I){var H=this.length;return this.resize(H+1),this.emplace(H,c,y,I)},i.prototype.emplace=function(c,y,I,H){var Q=3*c;return this.uint16[Q+0]=y,this.uint16[Q+1]=I,this.uint16[Q+2]=H,c},i}(Yu);rc.prototype.bytesPerElement=6,ao("StructArrayLayout3ui6",rc);var ys=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n){var ri=this.length;return this.resize(ri+1),this.emplace(ri,c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n,ri){var _i=24*c,xi=12*c,Ii=48*c;return this.int16[_i+0]=y,this.int16[_i+1]=I,this.uint16[_i+2]=H,this.uint16[_i+3]=Q,this.uint32[xi+2]=ge,this.uint32[xi+3]=tt,this.uint32[xi+4]=Rt,this.uint16[_i+10]=Ft,this.uint16[_i+11]=Jt,this.uint16[_i+12]=dr,this.float32[xi+7]=Cr,this.float32[xi+8]=tn,this.uint8[Ii+36]=rn,this.uint8[Ii+37]=yn,this.uint8[Ii+38]=vn,this.uint32[xi+10]=$n,this.int16[_i+22]=ri,c},i}(Yu);ys.prototype.bytesPerElement=48,ao("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ys);var bf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n,ri,_i,xi,Ii,ta,Qi,ja,qn,ca,ra,bo){var Eo=this.length;return this.resize(Eo+1),this.emplace(Eo,c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n,ri,_i,xi,Ii,ta,Qi,ja,qn,ca,ra,bo)},i.prototype.emplace=function(c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn,yn,vn,$n,ri,_i,xi,Ii,ta,Qi,ja,qn,ca,ra,bo,Eo){var qa=34*c,Ss=17*c;return this.int16[qa+0]=y,this.int16[qa+1]=I,this.int16[qa+2]=H,this.int16[qa+3]=Q,this.int16[qa+4]=ge,this.int16[qa+5]=tt,this.int16[qa+6]=Rt,this.int16[qa+7]=Ft,this.uint16[qa+8]=Jt,this.uint16[qa+9]=dr,this.uint16[qa+10]=Cr,this.uint16[qa+11]=tn,this.uint16[qa+12]=rn,this.uint16[qa+13]=yn,this.uint16[qa+14]=vn,this.uint16[qa+15]=$n,this.uint16[qa+16]=ri,this.uint16[qa+17]=_i,this.uint16[qa+18]=xi,this.uint16[qa+19]=Ii,this.uint16[qa+20]=ta,this.uint16[qa+21]=Qi,this.uint16[qa+22]=ja,this.uint32[Ss+12]=qn,this.float32[Ss+13]=ca,this.float32[Ss+14]=ra,this.float32[Ss+15]=bo,this.float32[Ss+16]=Eo,c},i}(Yu);bf.prototype.bytesPerElement=68,ao("StructArrayLayout8i15ui1ul4f68",bf);var Xf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},i.prototype.emplace=function(c,y){return this.float32[1*c+0]=y,c},i}(Yu);Xf.prototype.bytesPerElement=4,ao("StructArrayLayout1f4",Xf);var rl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I){var H=this.length;return this.resize(H+1),this.emplace(H,c,y,I)},i.prototype.emplace=function(c,y,I,H){var Q=3*c;return this.int16[Q+0]=y,this.int16[Q+1]=I,this.int16[Q+2]=H,c},i}(Yu);rl.prototype.bytesPerElement=6,ao("StructArrayLayout3i6",rl);var wc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I){var H=this.length;return this.resize(H+1),this.emplace(H,c,y,I)},i.prototype.emplace=function(c,y,I,H){var Q=4*c;return this.uint32[2*c+0]=y,this.uint16[Q+2]=I,this.uint16[Q+3]=H,c},i}(Yu);wc.prototype.bytesPerElement=8,ao("StructArrayLayout1ul2ui8",wc);var Zc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y){var I=this.length;return this.resize(I+1),this.emplace(I,c,y)},i.prototype.emplace=function(c,y,I){var H=2*c;return this.uint16[H+0]=y,this.uint16[H+1]=I,c},i}(Yu);Zc.prototype.bytesPerElement=4,ao("StructArrayLayout2ui4",Zc);var sd=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c){var y=this.length;return this.resize(y+1),this.emplace(y,c)},i.prototype.emplace=function(c,y){return this.uint16[1*c+0]=y,c},i}(Yu);sd.prototype.bytesPerElement=2,ao("StructArrayLayout1ui2",sd);var Qc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(c,y,I,H){var Q=this.length;return this.resize(Q+1),this.emplace(Q,c,y,I,H)},i.prototype.emplace=function(c,y,I,H,Q){var ge=4*c;return this.float32[ge+0]=y,this.float32[ge+1]=I,this.float32[ge+2]=H,this.float32[ge+3]=Q,c},i}(Yu);Qc.prototype.bytesPerElement=16,ao("StructArrayLayout4f16",Qc);var f=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var c={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return c.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},c.x1.get=function(){return this._structArray.int16[this._pos2+2]},c.y1.get=function(){return this._structArray.int16[this._pos2+3]},c.x2.get=function(){return this._structArray.int16[this._pos2+4]},c.y2.get=function(){return this._structArray.int16[this._pos2+5]},c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.anchorPoint.get=function(){return new L(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,c),i}(Gh);f.prototype.size=20;var g=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(c){return new f(this,c)},i}(kh);ao("CollisionBoxArray",g);var p=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},c.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},c.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},c.segment.get=function(){return this._structArray.uint16[this._pos2+10]},c.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},c.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},c.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},c.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},c.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},c.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},c.placedOrientation.set=function(y){this._structArray.uint8[this._pos1+37]=y},c.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},c.hidden.set=function(y){this._structArray.uint8[this._pos1+38]=y},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},c.crossTileID.set=function(y){this._structArray.uint32[this._pos4+10]=y},c.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,c),i}(Gh);p.prototype.size=48;var E=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(c){return new p(this,c)},i}(ys);ao("PlacedSymbolArray",E);var Y=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},c.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},c.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},c.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},c.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},c.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},c.key.get=function(){return this._structArray.uint16[this._pos2+8]},c.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},c.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},c.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},c.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},c.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},c.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},c.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},c.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},c.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},c.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},c.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},c.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},c.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},c.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},c.crossTileID.set=function(y){this._structArray.uint32[this._pos4+12]=y},c.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},c.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},c.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},c.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,c),i}(Gh);Y.prototype.size=68;var ye=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(c){return new Y(this,c)},i}(bf);ao("SymbolInstanceArray",ye);var Pe=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getoffsetX=function(c){return this.float32[1*c+0]},i}(Xf);ao("GlyphOffsetArray",Pe);var ct=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getx=function(c){return this.int16[3*c+0]},i.prototype.gety=function(c){return this.int16[3*c+1]},i.prototype.gettileUnitDistanceFromAnchor=function(c){return this.int16[3*c+2]},i}(rl);ao("SymbolLineVertexArray",ct);var Vt=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var c={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,c),i}(Gh);Vt.prototype.size=8;var fr=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(c){return new Vt(this,c)},i}(wc);ao("FeatureIndexArray",fr);var Ir=bl([{name:"a_pos",components:2,type:"Int16"}],4).members,Dr=function(e){e===void 0&&(e=[]),this.segments=e};function jr(e,i){return 256*(e=re(Math.floor(e),0,255))+re(Math.floor(i),0,255)}Dr.prototype.prepareSegment=function(e,i,c,y){var I=this.segments[this.segments.length-1];return e>Dr.MAX_VERTEX_ARRAY_LENGTH&&ht("Max vertices per segment is "+Dr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!I||I.vertexLength+e>Dr.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==y)&&(I={vertexOffset:i.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},y!==void 0&&(I.sortKey=y),this.segments.push(I)),I},Dr.prototype.get=function(){return this.segments},Dr.prototype.destroy=function(){for(var e=0,i=this.segments;e<i.length;e+=1){var c=i[e];for(var y in c.vaos)c.vaos[y].destroy()}},Dr.simpleSegment=function(e,i,c,y){return new Dr([{vertexOffset:e,primitiveOffset:i,vertexLength:c,primitiveLength:y,vaos:{},sortKey:0}])},Dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ao("SegmentVector",Dr);var En=bl([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),gn=$(function(e){e.exports=function(i,c){var y,I,H,Q,ge,tt,Rt,Ft;for(I=i.length-(y=3&i.length),H=c,ge=3432918353,tt=461845907,Ft=0;Ft<I;)Rt=255&i.charCodeAt(Ft)|(255&i.charCodeAt(++Ft))<<8|(255&i.charCodeAt(++Ft))<<16|(255&i.charCodeAt(++Ft))<<24,++Ft,H=27492+(65535&(Q=5*(65535&(H=(H^=Rt=(65535&(Rt=(Rt=(65535&Rt)*ge+(((Rt>>>16)*ge&65535)<<16)&4294967295)<<15|Rt>>>17))*tt+(((Rt>>>16)*tt&65535)<<16)&4294967295)<<13|H>>>19))+((5*(H>>>16)&65535)<<16)&4294967295))+((58964+(Q>>>16)&65535)<<16);switch(Rt=0,y){case 3:Rt^=(255&i.charCodeAt(Ft+2))<<16;case 2:Rt^=(255&i.charCodeAt(Ft+1))<<8;case 1:H^=Rt=(65535&(Rt=(Rt=(65535&(Rt^=255&i.charCodeAt(Ft)))*ge+(((Rt>>>16)*ge&65535)<<16)&4294967295)<<15|Rt>>>17))*tt+(((Rt>>>16)*tt&65535)<<16)&4294967295}return H^=i.length,H=2246822507*(65535&(H^=H>>>16))+((2246822507*(H>>>16)&65535)<<16)&4294967295,H=3266489909*(65535&(H^=H>>>13))+((3266489909*(H>>>16)&65535)<<16)&4294967295,(H^=H>>>16)>>>0}}),Bn=$(function(e){e.exports=function(i,c){for(var y,I=i.length,H=c^I,Q=0;I>=4;)y=1540483477*(65535&(y=255&i.charCodeAt(Q)|(255&i.charCodeAt(++Q))<<8|(255&i.charCodeAt(++Q))<<16|(255&i.charCodeAt(++Q))<<24))+((1540483477*(y>>>16)&65535)<<16),H=1540483477*(65535&H)+((1540483477*(H>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),I-=4,++Q;switch(I){case 3:H^=(255&i.charCodeAt(Q+2))<<16;case 2:H^=(255&i.charCodeAt(Q+1))<<8;case 1:H=1540483477*(65535&(H^=255&i.charCodeAt(Q)))+((1540483477*(H>>>16)&65535)<<16)}return H=1540483477*(65535&(H^=H>>>13))+((1540483477*(H>>>16)&65535)<<16),(H^=H>>>15)>>>0}}),fn=gn,Fn=Bn;fn.murmur3=gn,fn.murmur2=Fn;var jn=function(){this.ids=[],this.positions=[],this.indexed=!1};jn.prototype.add=function(e,i,c,y){this.ids.push(ki(e)),this.positions.push(i,c,y)},jn.prototype.getPositions=function(e){for(var i=ki(e),c=0,y=this.ids.length-1;c<y;){var I=c+y>>1;this.ids[I]>=i?y=I:c=I+1}for(var H=[];this.ids[c]===i;)H.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return H},jn.serialize=function(e,i){var c=new Float64Array(e.ids),y=new Uint32Array(e.positions);return function I(H,Q,ge,tt){for(;ge<tt;){for(var Rt=H[ge+tt>>1],Ft=ge-1,Jt=tt+1;;){do Ft++;while(H[Ft]<Rt);do Jt--;while(H[Jt]>Rt);if(Ft>=Jt)break;Ti(H,Ft,Jt),Ti(Q,3*Ft,3*Jt),Ti(Q,3*Ft+1,3*Jt+1),Ti(Q,3*Ft+2,3*Jt+2)}Jt-ge<tt-Jt?(I(H,Q,ge,Jt),ge=Jt+1):(I(H,Q,Jt+1,tt),tt=Jt)}}(c,y,0,c.length-1),i&&i.push(c.buffer,y.buffer),{ids:c,positions:y}},jn.deserialize=function(e){var i=new jn;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i};var vi=Math.pow(2,53)-1;function ki(e){var i=+e;return!isNaN(i)&&i<=vi?i:fn(String(e))}function Ti(e,i,c){var y=e[i];e[i]=e[c],e[c]=y}ao("FeaturePositionMap",jn);var Fi=function(e,i){this.gl=e.gl,this.location=i},na=function(e){function i(c,y){e.call(this,c,y),this.current=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))},i}(Fi),ka=function(e){function i(c,y){e.call(this,c,y),this.current=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))},i}(Fi),Na=function(e){function i(c,y){e.call(this,c,y),this.current=[0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))},i}(Fi),po=function(e){function i(c,y){e.call(this,c,y),this.current=[0,0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))},i}(Fi),No=function(e){function i(c,y){e.call(this,c,y),this.current=[0,0,0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))},i}(Fi),is=function(e){function i(c,y){e.call(this,c,y),this.current=ma.transparent}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))},i}(Fi),rs=new Float32Array(16),Ls=function(e){function i(c,y){e.call(this,c,y),this.current=rs}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(var y=1;y<16;y++)if(c[y]!==this.current[y]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}},i}(Fi);function vo(e){return[jr(255*e.r,255*e.g),jr(255*e.b,255*e.a)]}var ds=function(e,i,c){this.value=e,this.uniformNames=i.map(function(y){return"u_"+y}),this.type=c};ds.prototype.setUniform=function(e,i,c){e.set(c.constantOr(this.value))},ds.prototype.getBinding=function(e,i,c){return this.type==="color"?new is(e,i):new ka(e,i)};var Ns=function(e,i){this.uniformNames=i.map(function(c){return"u_"+c}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ns.prototype.setConstantPatternPositions=function(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr},Ns.prototype.setUniform=function(e,i,c,y){var I=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&e.set(I)},Ns.prototype.getBinding=function(e,i,c){return c.substr(0,9)==="u_pattern"?new No(e,i):new ka(e,i)};var cs=function(e,i,c,y){this.expression=e,this.type=c,this.maxValue=0,this.paintVertexAttributes=i.map(function(I){return{name:"a_"+I,type:"Float32",components:c==="color"?2:1,offset:0}}),this.paintVertexArray=new y};cs.prototype.populatePaintArray=function(e,i,c,y,I){var H=this.paintVertexArray.length,Q=this.expression.evaluate(new Ks(0),i,{},y,[],I);this.paintVertexArray.resize(e),this._setPaintValue(H,e,Q)},cs.prototype.updatePaintArray=function(e,i,c,y){var I=this.expression.evaluate({zoom:0},c,y);this._setPaintValue(e,i,I)},cs.prototype._setPaintValue=function(e,i,c){if(this.type==="color")for(var y=vo(c),I=e;I<i;I++)this.paintVertexArray.emplace(I,y[0],y[1]);else{for(var H=e;H<i;H++)this.paintVertexArray.emplace(H,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}},cs.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},cs.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Jo=function(e,i,c,y,I,H){this.expression=e,this.uniformNames=i.map(function(Q){return"u_"+Q+"_t"}),this.type=c,this.useIntegerZoom=y,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=i.map(function(Q){return{name:"a_"+Q,type:"Float32",components:c==="color"?4:2,offset:0}}),this.paintVertexArray=new H};Jo.prototype.populatePaintArray=function(e,i,c,y,I){var H=this.expression.evaluate(new Ks(this.zoom),i,{},y,[],I),Q=this.expression.evaluate(new Ks(this.zoom+1),i,{},y,[],I),ge=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(ge,e,H,Q)},Jo.prototype.updatePaintArray=function(e,i,c,y){var I=this.expression.evaluate({zoom:this.zoom},c,y),H=this.expression.evaluate({zoom:this.zoom+1},c,y);this._setPaintValue(e,i,I,H)},Jo.prototype._setPaintValue=function(e,i,c,y){if(this.type==="color")for(var I=vo(c),H=vo(y),Q=e;Q<i;Q++)this.paintVertexArray.emplace(Q,I[0],I[1],H[0],H[1]);else{for(var ge=e;ge<i;ge++)this.paintVertexArray.emplace(ge,c,y);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(y))}},Jo.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Jo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Jo.prototype.setUniform=function(e,i){var c=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,y=re(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);e.set(y)},Jo.prototype.getBinding=function(e,i,c){return new ka(e,i)};var $s=function(e,i,c,y,I,H){this.expression=e,this.type=i,this.useIntegerZoom=c,this.zoom=y,this.layerId=H,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I};$s.prototype.populatePaintArray=function(e,i,c){var y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(y,e,i.patterns&&i.patterns[this.layerId],c)},$s.prototype.updatePaintArray=function(e,i,c,y,I){this._setPaintValues(e,i,c.patterns&&c.patterns[this.layerId],I)},$s.prototype._setPaintValues=function(e,i,c,y){if(y&&c){var I=y[c.min],H=y[c.mid],Q=y[c.max];if(I&&H&&Q)for(var ge=e;ge<i;ge++)this.zoomInPaintVertexArray.emplace(ge,H.tl[0],H.tl[1],H.br[0],H.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],H.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(ge,H.tl[0],H.tl[1],H.br[0],H.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],H.pixelRatio,Q.pixelRatio)}},$s.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,En.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,En.members,this.expression.isStateDependent))},$s.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ws=function(e,i,c){this.binders={},this._buffers=[];var y=[];for(var I in e.paint._values)if(c(I)){var H=e.paint.get(I);if(H instanceof Jl&&Lc(H.property.specification)){var Q=El(I,e.type),ge=H.value,tt=H.property.specification.type,Rt=H.property.useIntegerZoom,Ft=H.property.specification["property-type"],Jt=Ft==="cross-faded"||Ft==="cross-faded-data-driven";if(ge.kind==="constant")this.binders[I]=Jt?new Ns(ge.value,Q):new ds(ge.value,Q,tt),y.push("/u_"+I);else if(ge.kind==="source"||Jt){var dr=nl(I,tt,"source");this.binders[I]=Jt?new $s(ge,tt,Rt,i,dr,e.id):new cs(ge,Q,tt,dr),y.push("/a_"+I)}else{var Cr=nl(I,tt,"composite");this.binders[I]=new Jo(ge,Q,tt,Rt,i,Cr),y.push("/z_"+I)}}}this.cacheKey=y.sort().join("")};ws.prototype.getMaxValue=function(e){var i=this.binders[e];return i instanceof cs||i instanceof Jo?i.maxValue:0},ws.prototype.populatePaintArrays=function(e,i,c,y,I){for(var H in this.binders){var Q=this.binders[H];(Q instanceof cs||Q instanceof Jo||Q instanceof $s)&&Q.populatePaintArray(e,i,c,y,I)}},ws.prototype.setConstantPatternPositions=function(e,i){for(var c in this.binders){var y=this.binders[c];y instanceof Ns&&y.setConstantPatternPositions(e,i)}},ws.prototype.updatePaintArrays=function(e,i,c,y,I){var H=!1;for(var Q in e)for(var ge=0,tt=i.getPositions(Q);ge<tt.length;ge+=1){var Rt=tt[ge],Ft=c.feature(Rt.index);for(var Jt in this.binders){var dr=this.binders[Jt];if((dr instanceof cs||dr instanceof Jo||dr instanceof $s)&&dr.expression.isStateDependent===!0){var Cr=y.paint.get(Jt);dr.expression=Cr.value,dr.updatePaintArray(Rt.start,Rt.end,Ft,e[Q],I),H=!0}}}return H},ws.prototype.defines=function(){var e=[];for(var i in this.binders){var c=this.binders[i];(c instanceof ds||c instanceof Ns)&&e.push.apply(e,c.uniformNames.map(function(y){return"#define HAS_UNIFORM_"+y}))}return e},ws.prototype.getBinderAttributes=function(){var e=[];for(var i in this.binders){var c=this.binders[i];if(c instanceof cs||c instanceof Jo)for(var y=0;y<c.paintVertexAttributes.length;y++)e.push(c.paintVertexAttributes[y].name);else if(c instanceof $s)for(var I=0;I<En.members.length;I++)e.push(En.members[I].name)}return e},ws.prototype.getBinderUniforms=function(){var e=[];for(var i in this.binders){var c=this.binders[i];if(c instanceof ds||c instanceof Ns||c instanceof Jo)for(var y=0,I=c.uniformNames;y<I.length;y+=1)e.push(I[y])}return e},ws.prototype.getPaintVertexBuffers=function(){return this._buffers},ws.prototype.getUniforms=function(e,i){var c=[];for(var y in this.binders){var I=this.binders[y];if(I instanceof ds||I instanceof Ns||I instanceof Jo)for(var H=0,Q=I.uniformNames;H<Q.length;H+=1){var ge=Q[H];if(i[ge]){var tt=I.getBinding(e,i[ge],ge);c.push({name:ge,property:y,binding:tt})}}}return c},ws.prototype.setUniforms=function(e,i,c,y){for(var I=0,H=i;I<H.length;I+=1){var Q=H[I],ge=Q.name,tt=Q.property;this.binders[tt].setUniform(Q.binding,y,c.get(tt),ge)}},ws.prototype.updatePaintBuffers=function(e){for(var i in this._buffers=[],this.binders){var c=this.binders[i];if(e&&c instanceof $s){var y=e.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(c instanceof cs||c instanceof Jo)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}},ws.prototype.upload=function(e){for(var i in this.binders){var c=this.binders[i];(c instanceof cs||c instanceof Jo||c instanceof $s)&&c.upload(e)}this.updatePaintBuffers()},ws.prototype.destroy=function(){for(var e in this.binders){var i=this.binders[e];(i instanceof cs||i instanceof Jo||i instanceof $s)&&i.destroy()}};var _s=function(e,i,c){c===void 0&&(c=function(){return!0}),this.programConfigurations={};for(var y=0,I=e;y<I.length;y+=1){var H=I[y];this.programConfigurations[H.id]=new ws(H,i,c)}this.needsUpload=!1,this._featureMap=new jn,this._bufferOffset=0};function El(e,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(i+"-","").replace(/-/g,"_")]}function nl(e,i,c){var y={color:{source:Ur,composite:Qc},number:{source:Xf,composite:Ur}},I=function(H){return{"line-pattern":{source:kl,composite:kl},"fill-pattern":{source:kl,composite:kl},"fill-extrusion-pattern":{source:kl,composite:kl}}[H]}(e);return I&&I[c]||y[i][c]}_s.prototype.populatePaintArrays=function(e,i,c,y,I,H){for(var Q in this.programConfigurations)this.programConfigurations[Q].populatePaintArrays(e,i,y,I,H);i.id!==void 0&&this._featureMap.add(i.id,c,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},_s.prototype.updatePaintArrays=function(e,i,c,y){for(var I=0,H=c;I<H.length;I+=1){var Q=H[I];this.needsUpload=this.programConfigurations[Q.id].updatePaintArrays(e,this._featureMap,i,Q,y)||this.needsUpload}},_s.prototype.get=function(e){return this.programConfigurations[e]},_s.prototype.upload=function(e){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}},_s.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ao("ConstantBinder",ds),ao("CrossFadedConstantBinder",Ns),ao("SourceExpressionBinder",cs),ao("CrossFadedCompositeBinder",$s),ao("CompositeExpressionBinder",Jo),ao("ProgramConfiguration",ws,{omit:["_buffers"]}),ao("ProgramConfigurationSet",_s);var Qu=Math.pow(2,14)-1,Ac=-Qu-1;function Ju(e){for(var i=8192/e.extent,c=e.loadGeometry(),y=0;y<c.length;y++)for(var I=c[y],H=0;H<I.length;H++){var Q=I[H],ge=Math.round(Q.x*i),tt=Math.round(Q.y*i);Q.x=re(ge,Ac,Qu),Q.y=re(tt,Ac,Qu),(ge<Q.x||ge>Q.x+1||tt<Q.y||tt>Q.y+1)&&ht("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return c}function qu(e,i){return{type:e.type,id:e.id,properties:e.properties,geometry:i?Ju(e):[]}}function Tc(e,i,c,y,I){e.emplaceBack(2*i+(y+1)/2,2*c+(I+1)/2)}var ec=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ph,this.indexArray=new rc,this.segments=new Dr,this.programConfigurations=new _s(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Pf(e,i){for(var c=0;c<e.length;c++)if(pf(i,e[c]))return!0;for(var y=0;y<i.length;y++)if(pf(e,i[y]))return!0;return!!Jh(e,i)}function Ef(e,i,c){return!!pf(e,i)||!!Sh(i,e,c)}function $l(e,i){if(e.length===1)return Ch(i,e[0]);for(var c=0;c<i.length;c++)for(var y=i[c],I=0;I<y.length;I++)if(pf(e,y[I]))return!0;for(var H=0;H<e.length;H++)if(Ch(i,e[H]))return!0;for(var Q=0;Q<i.length;Q++)if(Jh(e,i[Q]))return!0;return!1}function Uc(e,i,c){if(e.length>1){if(Jh(e,i))return!0;for(var y=0;y<i.length;y++)if(Sh(i[y],e,c))return!0}for(var I=0;I<e.length;I++)if(Sh(e[I],i,c))return!0;return!1}function Jh(e,i){if(e.length===0||i.length===0)return!1;for(var c=0;c<e.length-1;c++)for(var y=e[c],I=e[c+1],H=0;H<i.length-1;H++)if(qh(y,I,i[H],i[H+1]))return!0;return!1}function qh(e,i,c,y){return We(e,c,y)!==We(i,c,y)&&We(e,i,c)!==We(e,i,y)}function Sh(e,i,c){var y=c*c;if(i.length===1)return e.distSqr(i[0])<y;for(var I=1;I<i.length;I++)if(Of(e,i[I-1],i[I])<y)return!0;return!1}function Of(e,i,c){var y=i.distSqr(c);if(y===0)return e.distSqr(i);var I=((e.x-i.x)*(c.x-i.x)+(e.y-i.y)*(c.y-i.y))/y;return e.distSqr(I<0?i:I>1?c:c.sub(i)._mult(I)._add(i))}function Ch(e,i){for(var c,y,I,H=!1,Q=0;Q<e.length;Q++)for(var ge=0,tt=(c=e[Q]).length-1;ge<c.length;tt=ge++)(y=c[ge]).y>i.y!=(I=c[tt]).y>i.y&&i.x<(I.x-y.x)*(i.y-y.y)/(I.y-y.y)+y.x&&(H=!H);return H}function pf(e,i){for(var c=!1,y=0,I=e.length-1;y<e.length;I=y++){var H=e[y],Q=e[I];H.y>i.y!=Q.y>i.y&&i.x<(Q.x-H.x)*(i.y-H.y)/(Q.y-H.y)+H.x&&(c=!c)}return c}function oh(e,i,c){var y=c[0],I=c[2];if(e.x<y.x&&i.x<y.x||e.x>I.x&&i.x>I.x||e.y<y.y&&i.y<y.y||e.y>I.y&&i.y>I.y)return!1;var H=We(e,i,c[0]);return H!==We(e,i,c[1])||H!==We(e,i,c[2])||H!==We(e,i,c[3])}function Jc(e,i,c){var y=i.paint.get(e).value;return y.kind==="constant"?y.value:c.programConfigurations.get(i.id).getMaxValue(e)}function nc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ic(e,i,c,y,I){if(!i[0]&&!i[1])return e;var H=L.convert(i)._mult(I);c==="viewport"&&H._rotate(-y);for(var Q=[],ge=0;ge<e.length;ge++)Q.push(e[ge].sub(H));return Q}ec.prototype.populate=function(e,i,c){var y=this.layers[0],I=[],H=null;y.type==="circle"&&(H=y.layout.get("circle-sort-key"));for(var Q=0,ge=e;Q<ge.length;Q+=1){var tt=ge[Q],Rt=tt.feature,Ft=tt.id,Jt=tt.index,dr=tt.sourceLayerIndex,Cr=this.layers[0]._featureFilter.needGeometry,tn=qu(Rt,Cr);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),tn,c)){var rn=H?H.evaluate(tn,{},c):void 0,yn={id:Ft,properties:Rt.properties,type:Rt.type,sourceLayerIndex:dr,index:Jt,geometry:Cr?tn.geometry:Ju(Rt),patterns:{},sortKey:rn};I.push(yn)}}H&&I.sort(function(Qi,ja){return Qi.sortKey-ja.sortKey});for(var vn=0,$n=I;vn<$n.length;vn+=1){var ri=$n[vn],_i=ri.geometry,xi=ri.index,Ii=ri.sourceLayerIndex,ta=e[xi].feature;this.addFeature(ri,_i,xi,c),i.featureIndex.insert(ta,_i,xi,Ii,this.index)}},ec.prototype.update=function(e,i,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,c)},ec.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ec.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ec.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ir),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ec.prototype.addFeature=function(e,i,c,y){for(var I=0,H=i;I<H.length;I+=1)for(var Q=0,ge=H[I];Q<ge.length;Q+=1){var tt=ge[Q],Rt=tt.x,Ft=tt.y;if(!(Rt<0||Rt>=8192||Ft<0||Ft>=8192)){var Jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),dr=Jt.vertexLength;Tc(this.layoutVertexArray,Rt,Ft,-1,-1),Tc(this.layoutVertexArray,Rt,Ft,1,-1),Tc(this.layoutVertexArray,Rt,Ft,1,1),Tc(this.layoutVertexArray,Rt,Ft,-1,1),this.indexArray.emplaceBack(dr,dr+1,dr+2),this.indexArray.emplaceBack(dr,dr+3,dr+2),Jt.vertexLength+=4,Jt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,{},y)},ao("CircleBucket",ec,{omit:["layers"]});var wh=new mu({"circle-sort-key":new ko(sr.layout_circle["circle-sort-key"])}),Fh={paint:new mu({"circle-radius":new ko(sr.paint_circle["circle-radius"]),"circle-color":new ko(sr.paint_circle["circle-color"]),"circle-blur":new ko(sr.paint_circle["circle-blur"]),"circle-opacity":new ko(sr.paint_circle["circle-opacity"]),"circle-translate":new oo(sr.paint_circle["circle-translate"]),"circle-translate-anchor":new oo(sr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oo(sr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oo(sr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ko(sr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ko(sr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ko(sr.paint_circle["circle-stroke-opacity"])}),layout:wh},Du=typeof Float32Array!="undefined"?Float32Array:Array;function yu(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qc(e,i,c){var y=i[0],I=i[1],H=i[2],Q=i[3],ge=i[4],tt=i[5],Rt=i[6],Ft=i[7],Jt=i[8],dr=i[9],Cr=i[10],tn=i[11],rn=i[12],yn=i[13],vn=i[14],$n=i[15],ri=c[0],_i=c[1],xi=c[2],Ii=c[3];return e[0]=ri*y+_i*ge+xi*Jt+Ii*rn,e[1]=ri*I+_i*tt+xi*dr+Ii*yn,e[2]=ri*H+_i*Rt+xi*Cr+Ii*vn,e[3]=ri*Q+_i*Ft+xi*tn+Ii*$n,e[4]=(ri=c[4])*y+(_i=c[5])*ge+(xi=c[6])*Jt+(Ii=c[7])*rn,e[5]=ri*I+_i*tt+xi*dr+Ii*yn,e[6]=ri*H+_i*Rt+xi*Cr+Ii*vn,e[7]=ri*Q+_i*Ft+xi*tn+Ii*$n,e[8]=(ri=c[8])*y+(_i=c[9])*ge+(xi=c[10])*Jt+(Ii=c[11])*rn,e[9]=ri*I+_i*tt+xi*dr+Ii*yn,e[10]=ri*H+_i*Rt+xi*Cr+Ii*vn,e[11]=ri*Q+_i*Ft+xi*tn+Ii*$n,e[12]=(ri=c[12])*y+(_i=c[13])*ge+(xi=c[14])*Jt+(Ii=c[15])*rn,e[13]=ri*I+_i*tt+xi*dr+Ii*yn,e[14]=ri*H+_i*Rt+xi*Cr+Ii*vn,e[15]=ri*Q+_i*Ft+xi*tn+Ii*$n,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,i=0,c=arguments.length;c--;)i+=e[c]*e[c];return Math.sqrt(i)});var sh,vh=qc;function Nf(e,i,c){var y=i[0],I=i[1],H=i[2],Q=i[3];return e[0]=c[0]*y+c[4]*I+c[8]*H+c[12]*Q,e[1]=c[1]*y+c[5]*I+c[9]*H+c[13]*Q,e[2]=c[2]*y+c[6]*I+c[10]*H+c[14]*Q,e[3]=c[3]*y+c[7]*I+c[11]*H+c[15]*Q,e}sh=new Du(3),Du!=Float32Array&&(sh[0]=0,sh[1]=0,sh[2]=0),function(){var e=new Du(4);Du!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var mh=(function(){var e=new Du(2);Du!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function i(c){e.call(this,c,Fh)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(c){return new ec(c)},i.prototype.queryRadius=function(c){var y=c;return Jc("circle-radius",this,y)+Jc("circle-stroke-width",this,y)+nc(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(c,y,I,H,Q,ge,tt,Rt){for(var Ft=ic(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ge.angle,tt),Jt=this.paint.get("circle-radius").evaluate(y,I)+this.paint.get("circle-stroke-width").evaluate(y,I),dr=this.paint.get("circle-pitch-alignment")==="map",Cr=dr?Ft:function(ta,Qi){return ta.map(function(ja){return If(ja,Qi)})}(Ft,Rt),tn=dr?Jt*tt:Jt,rn=0,yn=H;rn<yn.length;rn+=1)for(var vn=0,$n=yn[rn];vn<$n.length;vn+=1){var ri=$n[vn],_i=dr?ri:If(ri,Rt),xi=tn,Ii=Nf([],[ri.x,ri.y,0,1],Rt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xi*=Ii[3]/ge.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xi*=ge.cameraToCenterDistance/Ii[3]),Ef(Cr,_i,xi))return!0}return!1},i}(Ku));function If(e,i){var c=Nf([],[e.x,e.y,0,1],i);return new L(c[0]/c[3],c[1]/c[3])}var Rf=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(ec);function vf(e,i,c,y){var I=i.width,H=i.height;if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==I*H*c)throw new RangeError("mismatched image size")}else y=new Uint8Array(I*H*c);return e.width=I,e.height=H,e.data=y,e}function oe(e,i,c){var y=i.width,I=i.height;if(y!==e.width||I!==e.height){var H=vf({},{width:y,height:I},c);Br(e,H,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,y),height:Math.min(e.height,I)},c),e.width=y,e.height=I,e.data=H.data}}function Br(e,i,c,y,I,H){if(I.width===0||I.height===0)return i;if(I.width>e.width||I.height>e.height||c.x>e.width-I.width||c.y>e.height-I.height)throw new RangeError("out of range source coordinates for image copy");if(I.width>i.width||I.height>i.height||y.x>i.width-I.width||y.y>i.height-I.height)throw new RangeError("out of range destination coordinates for image copy");for(var Q=e.data,ge=i.data,tt=0;tt<I.height;tt++)for(var Rt=((c.y+tt)*e.width+c.x)*H,Ft=((y.y+tt)*i.width+y.x)*H,Jt=0;Jt<I.width*H;Jt++)ge[Ft+Jt]=Q[Rt+Jt];return i}ao("HeatmapBucket",Rf,{omit:["layers"]});var xt=function(e,i){vf(this,e,1,i)};xt.prototype.resize=function(e){oe(this,e,1)},xt.prototype.clone=function(){return new xt({width:this.width,height:this.height},new Uint8Array(this.data))},xt.copy=function(e,i,c,y,I){Br(e,i,c,y,I,1)};var mt=function(e,i){vf(this,e,4,i)};mt.prototype.resize=function(e){oe(this,e,4)},mt.prototype.replace=function(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},mt.prototype.clone=function(){return new mt({width:this.width,height:this.height},new Uint8Array(this.data))},mt.copy=function(e,i,c,y,I){Br(e,i,c,y,I,4)},ao("AlphaImage",xt),ao("RGBAImage",mt);var Ht={paint:new mu({"heatmap-radius":new ko(sr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ko(sr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oo(sr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xl(sr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oo(sr.paint_heatmap["heatmap-opacity"])})};function or(e){var i={},c=e.resolution||256,y=e.clips?e.clips.length:1,I=e.image||new mt({width:c,height:y}),H=function(tn,rn,yn){i[e.evaluationKey]=yn;var vn=e.expression.evaluate(i);I.data[tn+rn+0]=Math.floor(255*vn.r/vn.a),I.data[tn+rn+1]=Math.floor(255*vn.g/vn.a),I.data[tn+rn+2]=Math.floor(255*vn.b/vn.a),I.data[tn+rn+3]=Math.floor(255*vn.a)};if(e.clips)for(var Q=0,ge=0;Q<y;++Q,ge+=4*c)for(var tt=0,Rt=0;tt<c;tt++,Rt+=4){var Ft=tt/(c-1),Jt=e.clips[Q];H(ge,Rt,Jt.start*(1-Ft)+Jt.end*Ft)}else for(var dr=0,Cr=0;dr<c;dr++,Cr+=4)H(0,Cr,dr/(c-1));return I}var en=function(e){function i(c){e.call(this,c,Ht),this._updateColorRamp()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(c){return new Rf(c)},i.prototype._handleSpecialPaintPropertyUpdate=function(c){c==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=or({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(Ku),_n={paint:new mu({"hillshade-illumination-direction":new oo(sr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oo(sr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oo(sr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oo(sr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oo(sr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oo(sr.paint_hillshade["hillshade-accent-color"])})},Tn=function(e){function i(c){e.call(this,c,_n)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(Ku),zn=bl([{name:"a_pos",components:2,type:"Int16"}],4).members,wi=ba,Xi=ba;function ba(e,i,c){c=c||2;var y,I,H,Q,ge,tt,Rt,Ft=i&&i.length,Jt=Ft?i[0]*c:e.length,dr=mo(e,0,Jt,c,!0),Cr=[];if(!dr||dr.next===dr.prev)return Cr;if(Ft&&(dr=function(rn,yn,vn,$n){var ri,_i,xi,Ii=[];for(ri=0,_i=yn.length;ri<_i;ri++)(xi=mo(rn,yn[ri]*$n,ri<_i-1?yn[ri+1]*$n:rn.length,$n,!1))===xi.next&&(xi.steiner=!0),Ii.push(ku(xi));for(Ii.sort(Mc),ri=0;ri<Ii.length;ri++)tu(Ii[ri],vn),vn=Ja(vn,vn.next);return vn}(e,i,dr,c)),e.length>80*c){y=H=e[0],I=Q=e[1];for(var tn=c;tn<Jt;tn+=c)(ge=e[tn])<y&&(y=ge),(tt=e[tn+1])<I&&(I=tt),ge>H&&(H=ge),tt>Q&&(Q=tt);Rt=(Rt=Math.max(H-y,Q-I))!==0?1/Rt:0}return Ds(dr,Cr,c,y,I,Rt),Cr}function mo(e,i,c,y,I){var H,Q;if(I===dc(e,i,c,y)>0)for(H=i;H<c;H+=y)Q=gh(H,e[H],e[H+1],Q);else for(H=c-y;H>=i;H-=y)Q=gh(H,e[H],e[H+1],Q);return Q&&pl(Q,Q.next)&&(yh(Q),Q=Q.next),Q}function Ja(e,i){if(!e)return e;i||(i=e);var c,y=e;do if(c=!1,y.steiner||!pl(y,y.next)&&ru(y.prev,y,y.next)!==0)y=y.next;else{if(yh(y),(y=i=y.prev)===y.next)break;c=!0}while(c||y!==i);return i}function Ds(e,i,c,y,I,H,Q){if(e){!Q&&H&&function(Ft,Jt,dr,Cr){var tn=Ft;do tn.z===null&&(tn.z=Ys(tn.x,tn.y,Jt,dr,Cr)),tn.prevZ=tn.prev,tn.nextZ=tn.next,tn=tn.next;while(tn!==Ft);tn.prevZ.nextZ=null,tn.prevZ=null,function(rn){var yn,vn,$n,ri,_i,xi,Ii,ta,Qi=1;do{for(vn=rn,rn=null,_i=null,xi=0;vn;){for(xi++,$n=vn,Ii=0,yn=0;yn<Qi&&(Ii++,$n=$n.nextZ);yn++);for(ta=Qi;Ii>0||ta>0&&$n;)Ii!==0&&(ta===0||!$n||vn.z<=$n.z)?(ri=vn,vn=vn.nextZ,Ii--):(ri=$n,$n=$n.nextZ,ta--),_i?_i.nextZ=ri:rn=ri,ri.prevZ=_i,_i=ri;vn=$n}_i.nextZ=null,Qi*=2}while(xi>1)}(tn)}(e,y,I,H);for(var ge,tt,Rt=e;e.prev!==e.next;)if(ge=e.prev,tt=e.next,H?lu(e,y,I,H):Ts(e))i.push(ge.i/c),i.push(e.i/c),i.push(tt.i/c),yh(e),e=tt.next,Rt=tt.next;else if((e=tt)===Rt){Q?Q===1?Ds(e=Iu(Ja(e),i,c),i,c,y,I,H,2):Q===2&&_u(e,i,c,y,I,H):Ds(Ja(e),i,c,y,I,H,1);break}}}function Ts(e){var i=e.prev,c=e,y=e.next;if(ru(i,c,y)>=0)return!1;for(var I=e.next.next;I!==e.prev;){if(Bu(i.x,i.y,c.x,c.y,y.x,y.y,I.x,I.y)&&ru(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function lu(e,i,c,y){var I=e.prev,H=e,Q=e.next;if(ru(I,H,Q)>=0)return!1;for(var ge=I.x>H.x?I.x>Q.x?I.x:Q.x:H.x>Q.x?H.x:Q.x,tt=I.y>H.y?I.y>Q.y?I.y:Q.y:H.y>Q.y?H.y:Q.y,Rt=Ys(I.x<H.x?I.x<Q.x?I.x:Q.x:H.x<Q.x?H.x:Q.x,I.y<H.y?I.y<Q.y?I.y:Q.y:H.y<Q.y?H.y:Q.y,i,c,y),Ft=Ys(ge,tt,i,c,y),Jt=e.prevZ,dr=e.nextZ;Jt&&Jt.z>=Rt&&dr&&dr.z<=Ft;){if(Jt!==e.prev&&Jt!==e.next&&Bu(I.x,I.y,H.x,H.y,Q.x,Q.y,Jt.x,Jt.y)&&ru(Jt.prev,Jt,Jt.next)>=0||(Jt=Jt.prevZ,dr!==e.prev&&dr!==e.next&&Bu(I.x,I.y,H.x,H.y,Q.x,Q.y,dr.x,dr.y)&&ru(dr.prev,dr,dr.next)>=0))return!1;dr=dr.nextZ}for(;Jt&&Jt.z>=Rt;){if(Jt!==e.prev&&Jt!==e.next&&Bu(I.x,I.y,H.x,H.y,Q.x,Q.y,Jt.x,Jt.y)&&ru(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.prevZ}for(;dr&&dr.z<=Ft;){if(dr!==e.prev&&dr!==e.next&&Bu(I.x,I.y,H.x,H.y,Q.x,Q.y,dr.x,dr.y)&&ru(dr.prev,dr,dr.next)>=0)return!1;dr=dr.nextZ}return!0}function Iu(e,i,c){var y=e;do{var I=y.prev,H=y.next.next;!pl(I,H)&&ef(I,y,y.next,H)&&uh(I,H)&&uh(H,I)&&(i.push(I.i/c),i.push(y.i/c),i.push(H.i/c),yh(y),yh(y.next),y=e=H),y=y.next}while(y!==e);return Ja(y)}function _u(e,i,c,y,I,H){var Q=e;do{for(var ge=Q.next.next;ge!==Q.prev;){if(Q.i!==ge.i&&Gl(Q,ge)){var tt=Kf(Q,ge);return Q=Ja(Q,Q.next),tt=Ja(tt,tt.next),Ds(Q,i,c,y,I,H),void Ds(tt,i,c,y,I,H)}ge=ge.next}Q=Q.next}while(Q!==e)}function Mc(e,i){return e.x-i.x}function tu(e,i){if(i=function(y,I){var H,Q=I,ge=y.x,tt=y.y,Rt=-1/0;do{if(tt<=Q.y&&tt>=Q.next.y&&Q.next.y!==Q.y){var Ft=Q.x+(tt-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(Ft<=ge&&Ft>Rt){if(Rt=Ft,Ft===ge){if(tt===Q.y)return Q;if(tt===Q.next.y)return Q.next}H=Q.x<Q.next.x?Q:Q.next}}Q=Q.next}while(Q!==I);if(!H)return null;if(ge===Rt)return H;var Jt,dr=H,Cr=H.x,tn=H.y,rn=1/0;Q=H;do ge>=Q.x&&Q.x>=Cr&&ge!==Q.x&&Bu(tt<tn?ge:Rt,tt,Cr,tn,tt<tn?Rt:ge,tt,Q.x,Q.y)&&(Jt=Math.abs(tt-Q.y)/(ge-Q.x),uh(Q,y)&&(Jt<rn||Jt===rn&&(Q.x>H.x||Q.x===H.x&&Fl(H,Q)))&&(H=Q,rn=Jt)),Q=Q.next;while(Q!==dr);return H}(e,i)){var c=Kf(i,e);Ja(i,i.next),Ja(c,c.next)}}function Fl(e,i){return ru(e.prev,e,i.prev)<0&&ru(i.next,e,e.next)<0}function Ys(e,i,c,y,I){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-c)*I)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-y)*I)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function ku(e){var i=e,c=e;do(i.x<c.x||i.x===c.x&&i.y<c.y)&&(c=i),i=i.next;while(i!==e);return c}function Bu(e,i,c,y,I,H,Q,ge){return(I-Q)*(i-ge)-(e-Q)*(H-ge)>=0&&(e-Q)*(y-ge)-(c-Q)*(i-ge)>=0&&(c-Q)*(H-ge)-(I-Q)*(y-ge)>=0}function Gl(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!function(c,y){var I=c;do{if(I.i!==c.i&&I.next.i!==c.i&&I.i!==y.i&&I.next.i!==y.i&&ef(I,I.next,c,y))return!0;I=I.next}while(I!==c);return!1}(e,i)&&(uh(e,i)&&uh(i,e)&&function(c,y){var I=c,H=!1,Q=(c.x+y.x)/2,ge=(c.y+y.y)/2;do I.y>ge!=I.next.y>ge&&I.next.y!==I.y&&Q<(I.next.x-I.x)*(ge-I.y)/(I.next.y-I.y)+I.x&&(H=!H),I=I.next;while(I!==c);return H}(e,i)&&(ru(e.prev,e,i.prev)||ru(e,i.prev,i))||pl(e,i)&&ru(e.prev,e,e.next)>0&&ru(i.prev,i,i.next)>0)}function ru(e,i,c){return(i.y-e.y)*(c.x-i.x)-(i.x-e.x)*(c.y-i.y)}function pl(e,i){return e.x===i.x&&e.y===i.y}function ef(e,i,c,y){var I=hc(ru(e,i,c)),H=hc(ru(e,i,y)),Q=hc(ru(c,y,e)),ge=hc(ru(c,y,i));return I!==H&&Q!==ge||!(I!==0||!Bh(e,c,i))||!(H!==0||!Bh(e,y,i))||!(Q!==0||!Bh(c,e,y))||!(ge!==0||!Bh(c,i,y))}function Bh(e,i,c){return i.x<=Math.max(e.x,c.x)&&i.x>=Math.min(e.x,c.x)&&i.y<=Math.max(e.y,c.y)&&i.y>=Math.min(e.y,c.y)}function hc(e){return e>0?1:e<0?-1:0}function uh(e,i){return ru(e.prev,e,e.next)<0?ru(e,i,e.next)>=0&&ru(e,e.prev,i)>=0:ru(e,i,e.prev)<0||ru(e,e.next,i)<0}function Kf(e,i){var c=new Yf(e.i,e.x,e.y),y=new Yf(i.i,i.x,i.y),I=e.next,H=i.prev;return e.next=i,i.prev=e,c.next=I,I.prev=c,y.next=c,c.prev=y,H.next=y,y.prev=H,y}function gh(e,i,c,y){var I=new Yf(e,i,c);return y?(I.next=y.next,I.prev=y,y.next.prev=I,y.next=I):(I.prev=I,I.next=I),I}function yh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Yf(e,i,c){this.i=e,this.x=i,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dc(e,i,c,y){for(var I=0,H=i,Q=c-y;H<c;H+=y)I+=(e[Q]-e[H])*(e[H+1]+e[Q+1]),Q=H;return I}function ne(e,i,c,y,I){(function H(Q,ge,tt,Rt,Ft){for(;Rt>tt;){if(Rt-tt>600){var Jt=Rt-tt+1,dr=ge-tt+1,Cr=Math.log(Jt),tn=.5*Math.exp(2*Cr/3),rn=.5*Math.sqrt(Cr*tn*(Jt-tn)/Jt)*(dr-Jt/2<0?-1:1);H(Q,ge,Math.max(tt,Math.floor(ge-dr*tn/Jt+rn)),Math.min(Rt,Math.floor(ge+(Jt-dr)*tn/Jt+rn)),Ft)}var yn=Q[ge],vn=tt,$n=Rt;for(Me(Q,tt,ge),Ft(Q[Rt],yn)>0&&Me(Q,tt,Rt);vn<$n;){for(Me(Q,vn,$n),vn++,$n--;Ft(Q[vn],yn)<0;)vn++;for(;Ft(Q[$n],yn)>0;)$n--}Ft(Q[tt],yn)===0?Me(Q,tt,$n):Me(Q,++$n,Rt),$n<=ge&&(tt=$n+1),ge<=$n&&(Rt=$n-1)}})(e,i,c||0,y||e.length-1,I||Oe)}function Me(e,i,c){var y=e[i];e[i]=e[c],e[c]=y}function Oe(e,i){return e<i?-1:e>i?1:0}function Ke(e,i){var c=e.length;if(c<=1)return[e];for(var y,I,H=[],Q=0;Q<c;Q++){var ge=Ne(e[Q]);ge!==0&&(e[Q].area=Math.abs(ge),I===void 0&&(I=ge<0),I===ge<0?(y&&H.push(y),y=[e[Q]]):y.push(e[Q]))}if(y&&H.push(y),i>1)for(var tt=0;tt<H.length;tt++)H[tt].length<=i||(ne(H[tt],i,1,H[tt].length-1,pt),H[tt]=H[tt].slice(0,i));return H}function pt(e,i){return i.area-e.area}function Pt(e,i,c){for(var y=c.patternDependencies,I=!1,H=0,Q=i;H<Q.length;H+=1){var ge=Q[H].paint.get(e+"-pattern");ge.isConstant()||(I=!0);var tt=ge.constantOr(null);tt&&(I=!0,y[tt.to]=!0,y[tt.from]=!0)}return I}function Xr(e,i,c,y,I){for(var H=I.patternDependencies,Q=0,ge=i;Q<ge.length;Q+=1){var tt=ge[Q],Rt=tt.paint.get(e+"-pattern").value;if(Rt.kind!=="constant"){var Ft=Rt.evaluate({zoom:y-1},c,{},I.availableImages),Jt=Rt.evaluate({zoom:y},c,{},I.availableImages),dr=Rt.evaluate({zoom:y+1},c,{},I.availableImages);Jt=Jt&&Jt.name?Jt.name:Jt,dr=dr&&dr.name?dr.name:dr,H[Ft=Ft&&Ft.name?Ft.name:Ft]=!0,H[Jt]=!0,H[dr]=!0,c.patterns[tt.id]={min:Ft,mid:Jt,max:dr}}}return c}ba.deviation=function(e,i,c,y){var I=i&&i.length,H=Math.abs(dc(e,0,I?i[0]*c:e.length,c));if(I)for(var Q=0,ge=i.length;Q<ge;Q++)H-=Math.abs(dc(e,i[Q]*c,Q<ge-1?i[Q+1]*c:e.length,c));var tt=0;for(Q=0;Q<y.length;Q+=3){var Rt=y[Q]*c,Ft=y[Q+1]*c,Jt=y[Q+2]*c;tt+=Math.abs((e[Rt]-e[Jt])*(e[Ft+1]-e[Rt+1])-(e[Rt]-e[Ft])*(e[Jt+1]-e[Rt+1]))}return H===0&&tt===0?0:Math.abs((tt-H)/H)},ba.flatten=function(e){for(var i=e[0][0].length,c={vertices:[],holes:[],dimensions:i},y=0,I=0;I<e.length;I++){for(var H=0;H<e[I].length;H++)for(var Q=0;Q<i;Q++)c.vertices.push(e[I][H][Q]);I>0&&c.holes.push(y+=e[I-1].length)}return c},wi.default=Xi;var An=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ph,this.indexArray=new rc,this.indexArray2=new Zc,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Dr,this.segments2=new Dr,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};An.prototype.populate=function(e,i,c){this.hasPattern=Pt("fill",this.layers,i);for(var y=this.layers[0].layout.get("fill-sort-key"),I=[],H=0,Q=e;H<Q.length;H+=1){var ge=Q[H],tt=ge.feature,Rt=ge.id,Ft=ge.index,Jt=ge.sourceLayerIndex,dr=this.layers[0]._featureFilter.needGeometry,Cr=qu(tt,dr);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),Cr,c)){var tn=y?y.evaluate(Cr,{},c,i.availableImages):void 0,rn={id:Rt,properties:tt.properties,type:tt.type,sourceLayerIndex:Jt,index:Ft,geometry:dr?Cr.geometry:Ju(tt),patterns:{},sortKey:tn};I.push(rn)}}y&&I.sort(function(ta,Qi){return ta.sortKey-Qi.sortKey});for(var yn=0,vn=I;yn<vn.length;yn+=1){var $n=vn[yn],ri=$n.geometry,_i=$n.index,xi=$n.sourceLayerIndex;if(this.hasPattern){var Ii=Xr("fill",this.layers,$n,this.zoom,i);this.patternFeatures.push(Ii)}else this.addFeature($n,ri,_i,c,{});i.featureIndex.insert(e[_i].feature,ri,_i,xi,this.index)}},An.prototype.update=function(e,i,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,c)},An.prototype.addFeatures=function(e,i,c){for(var y=0,I=this.patternFeatures;y<I.length;y+=1){var H=I[y];this.addFeature(H,H.geometry,H.index,i,c)}},An.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},An.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},An.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zn),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},An.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},An.prototype.addFeature=function(e,i,c,y,I){for(var H=0,Q=Ke(i,500);H<Q.length;H+=1){for(var ge=Q[H],tt=0,Rt=0,Ft=ge;Rt<Ft.length;Rt+=1)tt+=Ft[Rt].length;for(var Jt=this.segments.prepareSegment(tt,this.layoutVertexArray,this.indexArray),dr=Jt.vertexLength,Cr=[],tn=[],rn=0,yn=ge;rn<yn.length;rn+=1){var vn=yn[rn];if(vn.length!==0){vn!==ge[0]&&tn.push(Cr.length/2);var $n=this.segments2.prepareSegment(vn.length,this.layoutVertexArray,this.indexArray2),ri=$n.vertexLength;this.layoutVertexArray.emplaceBack(vn[0].x,vn[0].y),this.indexArray2.emplaceBack(ri+vn.length-1,ri),Cr.push(vn[0].x),Cr.push(vn[0].y);for(var _i=1;_i<vn.length;_i++)this.layoutVertexArray.emplaceBack(vn[_i].x,vn[_i].y),this.indexArray2.emplaceBack(ri+_i-1,ri+_i),Cr.push(vn[_i].x),Cr.push(vn[_i].y);$n.vertexLength+=vn.length,$n.primitiveLength+=vn.length}}for(var xi=wi(Cr,tn),Ii=0;Ii<xi.length;Ii+=3)this.indexArray.emplaceBack(dr+xi[Ii],dr+xi[Ii+1],dr+xi[Ii+2]);Jt.vertexLength+=tt,Jt.primitiveLength+=xi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,I,y)},ao("FillBucket",An,{omit:["layers","patternFeatures"]});var mi=new mu({"fill-sort-key":new ko(sr.layout_fill["fill-sort-key"])}),un={paint:new mu({"fill-antialias":new oo(sr.paint_fill["fill-antialias"]),"fill-opacity":new ko(sr.paint_fill["fill-opacity"]),"fill-color":new ko(sr.paint_fill["fill-color"]),"fill-outline-color":new ko(sr.paint_fill["fill-outline-color"]),"fill-translate":new oo(sr.paint_fill["fill-translate"]),"fill-translate-anchor":new oo(sr.paint_fill["fill-translate-anchor"]),"fill-pattern":new nu(sr.paint_fill["fill-pattern"])}),layout:mi},bi=function(e){function i(c){e.call(this,c,un)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.recalculate=function(c,y){e.prototype.recalculate.call(this,c,y);var I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(c){return new An(c)},i.prototype.queryRadius=function(){return nc(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(c,y,I,H,Q,ge,tt){return $l(ic(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ge.angle,tt),H)},i.prototype.isTileClipped=function(){return!0},i}(Ku),ga=bl([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ss=To;function To(e,i,c,y,I){this.properties={},this.extent=c,this.type=0,this._pbf=e,this._geometry=-1,this._keys=y,this._values=I,e.readFields(Ro,this,i)}function Ro(e,i,c){e==1?i.id=c.readVarint():e==2?function(y,I){for(var H=y.readVarint()+y.pos;y.pos<H;){var Q=I._keys[y.readVarint()],ge=I._values[y.readVarint()];I.properties[Q]=ge}}(c,i):e==3?i.type=c.readVarint():e==4&&(i._geometry=c.pos)}function fs(e){for(var i,c,y=0,I=0,H=e.length,Q=H-1;I<H;Q=I++)y+=((c=e[Q]).x-(i=e[I]).x)*(i.y+c.y);return y}To.types=["Unknown","Point","LineString","Polygon"],To.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var i,c=e.readVarint()+e.pos,y=1,I=0,H=0,Q=0,ge=[];e.pos<c;){if(I<=0){var tt=e.readVarint();y=7&tt,I=tt>>3}if(I--,y===1||y===2)H+=e.readSVarint(),Q+=e.readSVarint(),y===1&&(i&&ge.push(i),i=[]),i.push(new L(H,Q));else{if(y!==7)throw new Error("unknown command "+y);i&&i.push(i[0].clone())}}return i&&ge.push(i),ge},To.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var i=e.readVarint()+e.pos,c=1,y=0,I=0,H=0,Q=1/0,ge=-1/0,tt=1/0,Rt=-1/0;e.pos<i;){if(y<=0){var Ft=e.readVarint();c=7&Ft,y=Ft>>3}if(y--,c===1||c===2)(I+=e.readSVarint())<Q&&(Q=I),I>ge&&(ge=I),(H+=e.readSVarint())<tt&&(tt=H),H>Rt&&(Rt=H);else if(c!==7)throw new Error("unknown command "+c)}return[Q,tt,ge,Rt]},To.prototype.toGeoJSON=function(e,i,c){var y,I,H=this.extent*Math.pow(2,c),Q=this.extent*e,ge=this.extent*i,tt=this.loadGeometry(),Rt=To.types[this.type];function Ft(Cr){for(var tn=0;tn<Cr.length;tn++){var rn=Cr[tn];Cr[tn]=[360*(rn.x+Q)/H-180,360/Math.PI*Math.atan(Math.exp((180-360*(rn.y+ge)/H)*Math.PI/180))-90]}}switch(this.type){case 1:var Jt=[];for(y=0;y<tt.length;y++)Jt[y]=tt[y][0];Ft(tt=Jt);break;case 2:for(y=0;y<tt.length;y++)Ft(tt[y]);break;case 3:for(tt=function(Cr){var tn=Cr.length;if(tn<=1)return[Cr];for(var rn,yn,vn=[],$n=0;$n<tn;$n++){var ri=fs(Cr[$n]);ri!==0&&(yn===void 0&&(yn=ri<0),yn===ri<0?(rn&&vn.push(rn),rn=[Cr[$n]]):rn.push(Cr[$n]))}return rn&&vn.push(rn),vn}(tt),y=0;y<tt.length;y++)for(I=0;I<tt[y].length;I++)Ft(tt[y][I])}tt.length===1?tt=tt[0]:Rt="Multi"+Rt;var dr={type:"Feature",geometry:{type:Rt,coordinates:tt},properties:this.properties};return"id"in this&&(dr.id=this.id),dr};var ps=zo;function zo(e,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ks,this,i),this.length=this._features.length}function ks(e,i,c){e===15?i.version=c.readVarint():e===1?i.name=c.readString():e===5?i.extent=c.readVarint():e===2?i._features.push(c.pos):e===3?i._keys.push(c.readString()):e===4&&i._values.push(function(y){for(var I=null,H=y.readVarint()+y.pos;y.pos<H;){var Q=y.readVarint()>>3;I=Q===1?y.readString():Q===2?y.readFloat():Q===3?y.readDouble():Q===4?y.readVarint64():Q===5?y.readVarint():Q===6?y.readSVarint():Q===7?y.readBoolean():null}return I}(c))}function xu(e,i,c){if(e===3){var y=new ps(c,c.readVarint()+c.pos);y.length&&(i[y.name]=y)}}zo.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new ss(this._pbf,i,this.extent,this._keys,this._values)};var cu={VectorTile:function(e,i){this.layers=e.readFields(xu,{},i)},VectorTileFeature:ss,VectorTileLayer:ps},tf=cu.VectorTileFeature.types,$c=Math.pow(2,13);function ac(e,i,c,y,I,H,Q,ge){e.emplaceBack(i,c,2*Math.floor(y*$c)+Q,I*$c*2,H*$c*2,Math.round(ge))}var ll=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Yc,this.indexArray=new rc,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Dr,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Cu(e,i){return e.x===i.x&&(e.x<0||e.x>8192)||e.y===i.y&&(e.y<0||e.y>8192)}ll.prototype.populate=function(e,i,c){this.features=[],this.hasPattern=Pt("fill-extrusion",this.layers,i);for(var y=0,I=e;y<I.length;y+=1){var H=I[y],Q=H.feature,ge=H.id,tt=H.index,Rt=H.sourceLayerIndex,Ft=this.layers[0]._featureFilter.needGeometry,Jt=qu(Q,Ft);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),Jt,c)){var dr={id:ge,sourceLayerIndex:Rt,index:tt,geometry:Ft?Jt.geometry:Ju(Q),properties:Q.properties,type:Q.type,patterns:{}};this.hasPattern?this.features.push(Xr("fill-extrusion",this.layers,dr,this.zoom,i)):this.addFeature(dr,dr.geometry,tt,c,{}),i.featureIndex.insert(Q,dr.geometry,tt,Rt,this.index,!0)}}},ll.prototype.addFeatures=function(e,i,c){for(var y=0,I=this.features;y<I.length;y+=1){var H=I[y];this.addFeature(H,H.geometry,H.index,i,c)}},ll.prototype.update=function(e,i,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,c)},ll.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ll.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ll.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ga),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ll.prototype.addFeature=function(e,i,c,y,I){for(var H=0,Q=Ke(i,500);H<Q.length;H+=1){for(var ge=Q[H],tt=0,Rt=0,Ft=ge;Rt<Ft.length;Rt+=1)tt+=Ft[Rt].length;for(var Jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),dr=0,Cr=ge;dr<Cr.length;dr+=1){var tn=Cr[dr];if(tn.length!==0&&!((Ss=tn).every(function(Is){return Is.x<0})||Ss.every(function(Is){return Is.x>8192})||Ss.every(function(Is){return Is.y<0})||Ss.every(function(Is){return Is.y>8192})))for(var rn=0,yn=0;yn<tn.length;yn++){var vn=tn[yn];if(yn>=1){var $n=tn[yn-1];if(!Cu(vn,$n)){Jt.vertexLength+4>Dr.MAX_VERTEX_ARRAY_LENGTH&&(Jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ri=vn.sub($n)._perp()._unit(),_i=$n.dist(vn);rn+_i>32768&&(rn=0),ac(this.layoutVertexArray,vn.x,vn.y,ri.x,ri.y,0,0,rn),ac(this.layoutVertexArray,vn.x,vn.y,ri.x,ri.y,0,1,rn),ac(this.layoutVertexArray,$n.x,$n.y,ri.x,ri.y,0,0,rn+=_i),ac(this.layoutVertexArray,$n.x,$n.y,ri.x,ri.y,0,1,rn);var xi=Jt.vertexLength;this.indexArray.emplaceBack(xi,xi+2,xi+1),this.indexArray.emplaceBack(xi+1,xi+2,xi+3),Jt.vertexLength+=4,Jt.primitiveLength+=2}}}}if(Jt.vertexLength+tt>Dr.MAX_VERTEX_ARRAY_LENGTH&&(Jt=this.segments.prepareSegment(tt,this.layoutVertexArray,this.indexArray)),tf[e.type]==="Polygon"){for(var Ii=[],ta=[],Qi=Jt.vertexLength,ja=0,qn=ge;ja<qn.length;ja+=1){var ca=qn[ja];if(ca.length!==0){ca!==ge[0]&&ta.push(Ii.length/2);for(var ra=0;ra<ca.length;ra++){var bo=ca[ra];ac(this.layoutVertexArray,bo.x,bo.y,0,0,1,1,0),Ii.push(bo.x),Ii.push(bo.y)}}}for(var Eo=wi(Ii,ta),qa=0;qa<Eo.length;qa+=3)this.indexArray.emplaceBack(Qi+Eo[qa],Qi+Eo[qa+2],Qi+Eo[qa+1]);Jt.primitiveLength+=Eo.length/3,Jt.vertexLength+=tt}}var Ss;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,I,y)},ao("FillExtrusionBucket",ll,{omit:["layers","features"]});var Sl={paint:new mu({"fill-extrusion-opacity":new oo(sr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ko(sr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oo(sr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oo(sr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nu(sr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ko(sr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ko(sr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oo(sr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Wl=function(e){function i(c){e.call(this,c,Sl)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(c){return new ll(c)},i.prototype.queryRadius=function(){return nc(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(c,y,I,H,Q,ge,tt,Rt){var Ft=ic(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ge.angle,tt),Jt=this.paint.get("fill-extrusion-height").evaluate(y,I),dr=this.paint.get("fill-extrusion-base").evaluate(y,I),Cr=function(rn,yn,vn,$n){for(var ri=[],_i=0,xi=rn;_i<xi.length;_i+=1){var Ii=xi[_i],ta=[Ii.x,Ii.y,0,1];Nf(ta,ta,yn),ri.push(new L(ta[0]/ta[3],ta[1]/ta[3]))}return ri}(Ft,Rt),tn=function(rn,yn,vn,$n){for(var ri=[],_i=[],xi=$n[8]*yn,Ii=$n[9]*yn,ta=$n[10]*yn,Qi=$n[11]*yn,ja=$n[8]*vn,qn=$n[9]*vn,ca=$n[10]*vn,ra=$n[11]*vn,bo=0,Eo=rn;bo<Eo.length;bo+=1){for(var qa=[],Ss=[],Is=0,pu=Eo[bo];Is<pu.length;Is+=1){var es=pu[Is],$u=es.x,hl=es.y,Nl=$n[0]*$u+$n[4]*hl+$n[12],el=$n[1]*$u+$n[5]*hl+$n[13],af=$n[2]*$u+$n[6]*hl+$n[14],gf=$n[3]*$u+$n[7]*hl+$n[15],zf=af+ta,Th=gf+Qi,ed=Nl+ja,Zf=el+qn,iu=af+ca,Uf=gf+ra,xh=new L((Nl+xi)/Th,(el+Ii)/Th);xh.z=zf/Th,qa.push(xh);var Lu=new L(ed/Uf,Zf/Uf);Lu.z=iu/Uf,Ss.push(Lu)}ri.push(qa),_i.push(Ss)}return[ri,_i]}(H,dr,Jt,Rt);return function(rn,yn,vn){var $n=1/0;$l(vn,yn)&&($n=jc(vn,yn[0]));for(var ri=0;ri<yn.length;ri++)for(var _i=yn[ri],xi=rn[ri],Ii=0;Ii<_i.length-1;Ii++){var ta=_i[Ii],Qi=[ta,_i[Ii+1],xi[Ii+1],xi[Ii],ta];Pf(vn,Qi)&&($n=Math.min($n,jc(vn,Qi)))}return $n!==1/0&&$n}(tn[0],tn[1],Cr)},i}(Ku);function Pc(e,i){return e.x*i.x+e.y*i.y}function jc(e,i){if(e.length===1){for(var c,y=0,I=i[y++];!c||I.equals(c);)if(!(c=i[y++]))return 1/0;for(;y<i.length;y++){var H=i[y],Q=e[0],ge=c.sub(I),tt=H.sub(I),Rt=Q.sub(I),Ft=Pc(ge,ge),Jt=Pc(ge,tt),dr=Pc(tt,tt),Cr=Pc(Rt,ge),tn=Pc(Rt,tt),rn=Ft*dr-Jt*Jt,yn=(dr*Cr-Jt*tn)/rn,vn=(Ft*tn-Jt*Cr)/rn,$n=I.z*(1-yn-vn)+c.z*yn+H.z*vn;if(isFinite($n))return $n}return 1/0}for(var ri=1/0,_i=0,xi=i;_i<xi.length;_i+=1)ri=Math.min(ri,xi[_i].z);return ri}var hu=bl([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,_h=bl([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Oc=cu.VectorTileFeature.types,ud=Math.cos(Math.PI/180*37.5),Hd=Math.pow(2,14)/.5,Zu=function(e){var i=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(c){return c.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(c){i.gradients[c.id]={}}),this.layoutVertexArray=new Dl,this.layoutVertexArray2=new Ur,this.indexArray=new rc,this.programConfigurations=new _s(e.layers,e.zoom),this.segments=new Dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(c){return c.isStateDependent()}).map(function(c){return c.id})};Zu.prototype.populate=function(e,i,c){this.hasPattern=Pt("line",this.layers,i);for(var y=this.layers[0].layout.get("line-sort-key"),I=[],H=0,Q=e;H<Q.length;H+=1){var ge=Q[H],tt=ge.feature,Rt=ge.id,Ft=ge.index,Jt=ge.sourceLayerIndex,dr=this.layers[0]._featureFilter.needGeometry,Cr=qu(tt,dr);if(this.layers[0]._featureFilter.filter(new Ks(this.zoom),Cr,c)){var tn=y?y.evaluate(Cr,{},c):void 0,rn={id:Rt,properties:tt.properties,type:tt.type,sourceLayerIndex:Jt,index:Ft,geometry:dr?Cr.geometry:Ju(tt),patterns:{},sortKey:tn};I.push(rn)}}y&&I.sort(function(ta,Qi){return ta.sortKey-Qi.sortKey});for(var yn=0,vn=I;yn<vn.length;yn+=1){var $n=vn[yn],ri=$n.geometry,_i=$n.index,xi=$n.sourceLayerIndex;if(this.hasPattern){var Ii=Xr("line",this.layers,$n,this.zoom,i);this.patternFeatures.push(Ii)}else this.addFeature($n,ri,_i,c,{});i.featureIndex.insert(e[_i].feature,ri,_i,xi,this.index)}},Zu.prototype.update=function(e,i,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,c)},Zu.prototype.addFeatures=function(e,i,c){for(var y=0,I=this.patternFeatures;y<I.length;y+=1){var H=I[y];this.addFeature(H,H.geometry,H.index,i,c)}},Zu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zu.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,_h)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hu),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Zu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zu.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Zu.prototype.addFeature=function(e,i,c,y,I){var H=this.layers[0].layout,Q=H.get("line-join").evaluate(e,{}),ge=H.get("line-cap"),tt=H.get("line-miter-limit"),Rt=H.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var Ft=0,Jt=i;Ft<Jt.length;Ft+=1)this.addLine(Jt[Ft],e,Q,ge,tt,Rt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,I,y)},Zu.prototype.addLine=function(e,i,c,y,I,H){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Q=0;Q<e.length-1;Q++)this.totalDistance+=e[Q].dist(e[Q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ge=Oc[i.type]==="Polygon",tt=e.length;tt>=2&&e[tt-1].equals(e[tt-2]);)tt--;for(var Rt=0;Rt<tt-1&&e[Rt].equals(e[Rt+1]);)Rt++;if(!(tt<(ge?3:2))){c==="bevel"&&(I=1.05);var Ft,Jt=this.overscaling<=16?122880/(512*this.overscaling):0,dr=this.segments.prepareSegment(10*tt,this.layoutVertexArray,this.indexArray),Cr=void 0,tn=void 0,rn=void 0,yn=void 0;this.e1=this.e2=-1,ge&&(yn=e[Rt].sub(Ft=e[tt-2])._unit()._perp());for(var vn=Rt;vn<tt;vn++)if(!(tn=vn===tt-1?ge?e[Rt+1]:void 0:e[vn+1])||!e[vn].equals(tn)){yn&&(rn=yn),Ft&&(Cr=Ft),Ft=e[vn],yn=tn?tn.sub(Ft)._unit()._perp():rn;var $n=(rn=rn||yn).add(yn);$n.x===0&&$n.y===0||$n._unit();var ri=rn.x*yn.x+rn.y*yn.y,_i=$n.x*yn.x+$n.y*yn.y,xi=_i!==0?1/_i:1/0,Ii=2*Math.sqrt(2-2*_i),ta=_i<ud&&Cr&&tn,Qi=rn.x*yn.y-rn.y*yn.x>0;if(ta&&vn>Rt){var ja=Ft.dist(Cr);if(ja>2*Jt){var qn=Ft.sub(Ft.sub(Cr)._mult(Jt/ja)._round());this.updateDistance(Cr,qn),this.addCurrentVertex(qn,rn,0,0,dr),Cr=qn}}var ca=Cr&&tn,ra=ca?c:ge?"butt":y;if(ca&&ra==="round"&&(xi<H?ra="miter":xi<=2&&(ra="fakeround")),ra==="miter"&&xi>I&&(ra="bevel"),ra==="bevel"&&(xi>2&&(ra="flipbevel"),xi<I&&(ra="miter")),Cr&&this.updateDistance(Cr,Ft),ra==="miter")$n._mult(xi),this.addCurrentVertex(Ft,$n,0,0,dr);else if(ra==="flipbevel"){if(xi>100)$n=yn.mult(-1);else{var bo=xi*rn.add(yn).mag()/rn.sub(yn).mag();$n._perp()._mult(bo*(Qi?-1:1))}this.addCurrentVertex(Ft,$n,0,0,dr),this.addCurrentVertex(Ft,$n.mult(-1),0,0,dr)}else if(ra==="bevel"||ra==="fakeround"){var Eo=-Math.sqrt(xi*xi-1),qa=Qi?Eo:0,Ss=Qi?0:Eo;if(Cr&&this.addCurrentVertex(Ft,rn,qa,Ss,dr),ra==="fakeround")for(var Is=Math.round(180*Ii/Math.PI/20),pu=1;pu<Is;pu++){var es=pu/Is;if(es!==.5){var $u=es-.5;es+=es*$u*(es-1)*((1.0904+ri*(ri*(3.55645-1.43519*ri)-3.2452))*$u*$u+(.848013+ri*(.215638*ri-1.06021)))}var hl=yn.sub(rn)._mult(es)._add(rn)._unit()._mult(Qi?-1:1);this.addHalfVertex(Ft,hl.x,hl.y,!1,Qi,0,dr)}tn&&this.addCurrentVertex(Ft,yn,-qa,-Ss,dr)}else if(ra==="butt")this.addCurrentVertex(Ft,$n,0,0,dr);else if(ra==="square"){var Nl=Cr?1:-1;this.addCurrentVertex(Ft,$n,Nl,Nl,dr)}else ra==="round"&&(Cr&&(this.addCurrentVertex(Ft,rn,0,0,dr),this.addCurrentVertex(Ft,rn,1,1,dr,!0)),tn&&(this.addCurrentVertex(Ft,yn,-1,-1,dr,!0),this.addCurrentVertex(Ft,yn,0,0,dr)));if(ta&&vn<tt-1){var el=Ft.dist(tn);if(el>2*Jt){var af=Ft.add(tn.sub(Ft)._mult(Jt/el)._round());this.updateDistance(Ft,af),this.addCurrentVertex(af,yn,0,0,dr),Ft=af}}}}},Zu.prototype.addCurrentVertex=function(e,i,c,y,I,H){H===void 0&&(H=!1);var Q=i.y*y-i.x,ge=-i.y-i.x*y;this.addHalfVertex(e,i.x+i.y*c,i.y-i.x*c,H,!1,c,I),this.addHalfVertex(e,Q,ge,H,!0,-y,I),this.distance>Hd/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,i,c,y,I,H))},Zu.prototype.addHalfVertex=function(e,i,c,y,I,H,Q){var ge=.5*(this.lineClips?this.scaledDistance*(Hd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(y?1:0),(e.y<<1)+(I?1:0),Math.round(63*i)+128,Math.round(63*c)+128,1+(H===0?0:H<0?-1:1)|(63&ge)<<2,ge>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var tt=Q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,tt),Q.primitiveLength++),I?this.e2=tt:this.e1=tt},Zu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Zu.prototype.updateDistance=function(e,i){this.distance+=e.dist(i),this.updateScaledDistance()},ao("LineBucket",Zu,{omit:["layers","patternFeatures"]});var Sd=new mu({"line-cap":new oo(sr.layout_line["line-cap"]),"line-join":new ko(sr.layout_line["line-join"]),"line-miter-limit":new oo(sr.layout_line["line-miter-limit"]),"line-round-limit":new oo(sr.layout_line["line-round-limit"]),"line-sort-key":new ko(sr.layout_line["line-sort-key"])}),Hc={paint:new mu({"line-opacity":new ko(sr.paint_line["line-opacity"]),"line-color":new ko(sr.paint_line["line-color"]),"line-translate":new oo(sr.paint_line["line-translate"]),"line-translate-anchor":new oo(sr.paint_line["line-translate-anchor"]),"line-width":new ko(sr.paint_line["line-width"]),"line-gap-width":new ko(sr.paint_line["line-gap-width"]),"line-offset":new ko(sr.paint_line["line-offset"]),"line-blur":new ko(sr.paint_line["line-blur"]),"line-dasharray":new ql(sr.paint_line["line-dasharray"]),"line-pattern":new nu(sr.paint_line["line-pattern"]),"line-gradient":new xl(sr.paint_line["line-gradient"])}),layout:Sd},Nh=new(function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(c,y){return y=new Ks(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),e.prototype.possiblyEvaluate.call(this,c,y)},i.prototype.evaluate=function(c,y,I,H){return y=fe({},y,{zoom:Math.floor(y.zoom)}),e.prototype.evaluate.call(this,c,y,I,H)},i}(ko))(Hc.paint.properties["line-width"].specification);Nh.useIntegerZoom=!0;var up=function(e){function i(c){e.call(this,c,Hc),this.gradientVersion=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qi,this.gradientVersion=(this.gradientVersion+1)%F)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(c,y){e.prototype.recalculate.call(this,c,y),this.paint._values["line-floorwidth"]=Nh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)},i.prototype.createBucket=function(c){return new Zu(c)},i.prototype.queryRadius=function(c){var y=c,I=_d(Jc("line-width",this,y),Jc("line-gap-width",this,y)),H=Jc("line-offset",this,y);return I/2+Math.abs(H)+nc(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(c,y,I,H,Q,ge,tt){var Rt=ic(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ge.angle,tt),Ft=tt/2*_d(this.paint.get("line-width").evaluate(y,I),this.paint.get("line-gap-width").evaluate(y,I)),Jt=this.paint.get("line-offset").evaluate(y,I);return Jt&&(H=function(dr,Cr){for(var tn=[],rn=new L(0,0),yn=0;yn<dr.length;yn++){for(var vn=dr[yn],$n=[],ri=0;ri<vn.length;ri++){var _i=vn[ri],xi=vn[ri+1],Ii=ri===0?rn:_i.sub(vn[ri-1])._unit()._perp(),ta=ri===vn.length-1?rn:xi.sub(_i)._unit()._perp(),Qi=Ii._add(ta)._unit();Qi._mult(1/(Qi.x*ta.x+Qi.y*ta.y)),$n.push(Qi._mult(Cr)._add(_i))}tn.push($n)}return tn}(H,Jt*tt)),function(dr,Cr,tn){for(var rn=0;rn<Cr.length;rn++){var yn=Cr[rn];if(dr.length>=3){for(var vn=0;vn<yn.length;vn++)if(pf(dr,yn[vn]))return!0}if(Uc(dr,yn,tn))return!0}return!1}(Rt,H,Ft)},i.prototype.isTileClipped=function(){return!0},i}(Ku);function _d(e,i){return i>0?i+2*e:e}var pp=bl([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vp=bl([{name:"a_projected_pos",components:3,type:"Float32"}],4),mp=(bl([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),bl([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Cd=(bl([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),bl([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ld=bl([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gp(e,i,c){return e.sections.forEach(function(y){y.text=function(I,H,Q){var ge=H.layout.get("text-transform").evaluate(Q,{});return ge==="uppercase"?I=I.toLocaleUpperCase():ge==="lowercase"&&(I=I.toLocaleLowerCase()),gu.applyArabicShaping&&(I=gu.applyArabicShaping(I)),I}(y.text,i,c)}),e}bl([{name:"triangle",components:3,type:"Uint16"}]),bl([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bl([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bl([{type:"Float32",name:"offsetX"}]),bl([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ah={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Dd=function(e,i,c,y,I){var H,Q,ge=8*I-y-1,tt=(1<<ge)-1,Rt=tt>>1,Ft=-7,Jt=c?I-1:0,dr=c?-1:1,Cr=e[i+Jt];for(Jt+=dr,H=Cr&(1<<-Ft)-1,Cr>>=-Ft,Ft+=ge;Ft>0;H=256*H+e[i+Jt],Jt+=dr,Ft-=8);for(Q=H&(1<<-Ft)-1,H>>=-Ft,Ft+=y;Ft>0;Q=256*Q+e[i+Jt],Jt+=dr,Ft-=8);if(H===0)H=1-Rt;else{if(H===tt)return Q?NaN:1/0*(Cr?-1:1);Q+=Math.pow(2,y),H-=Rt}return(Cr?-1:1)*Q*Math.pow(2,H-y)},xd=function(e,i,c,y,I,H){var Q,ge,tt,Rt=8*H-I-1,Ft=(1<<Rt)-1,Jt=Ft>>1,dr=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,Cr=y?0:H-1,tn=y?1:-1,rn=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(ge=isNaN(i)?1:0,Q=Ft):(Q=Math.floor(Math.log(i)/Math.LN2),i*(tt=Math.pow(2,-Q))<1&&(Q--,tt*=2),(i+=Q+Jt>=1?dr/tt:dr*Math.pow(2,1-Jt))*tt>=2&&(Q++,tt/=2),Q+Jt>=Ft?(ge=0,Q=Ft):Q+Jt>=1?(ge=(i*tt-1)*Math.pow(2,I),Q+=Jt):(ge=i*Math.pow(2,Jt-1)*Math.pow(2,I),Q=0));I>=8;e[c+Cr]=255&ge,Cr+=tn,ge/=256,I-=8);for(Q=Q<<I|ge,Rt+=I;Rt>0;e[c+Cr]=255&Q,Cr+=tn,Q/=256,Rt-=8);e[c+Cr-tn]|=128*rn},wd=vl;function vl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}vl.Varint=0,vl.Fixed64=1,vl.Bytes=2,vl.Fixed32=5;var kd=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Fs(e){return e.type===vl.Bytes?e.readVarint()+e.pos:e.pos+1}function cd(e,i,c){return c?4294967296*i+(e>>>0):4294967296*(i>>>0)+(e>>>0)}function Vd(e,i,c){var y=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));c.realloc(y);for(var I=c.pos-1;I>=e;I--)c.buf[I+y]=c.buf[I]}function Gd(e,i){for(var c=0;c<e.length;c++)i.writeVarint(e[c])}function jt(e,i){for(var c=0;c<e.length;c++)i.writeSVarint(e[c])}function Vr(e,i){for(var c=0;c<e.length;c++)i.writeFloat(e[c])}function Ln(e,i){for(var c=0;c<e.length;c++)i.writeDouble(e[c])}function Ci(e,i){for(var c=0;c<e.length;c++)i.writeBoolean(e[c])}function aa(e,i){for(var c=0;c<e.length;c++)i.writeFixed32(e[c])}function Ai(e,i){for(var c=0;c<e.length;c++)i.writeSFixed32(e[c])}function Gi(e,i){for(var c=0;c<e.length;c++)i.writeFixed64(e[c])}function Ea(e,i){for(var c=0;c<e.length;c++)i.writeSFixed64(e[c])}function Pa(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]}function Ra(e,i,c){e[c]=i,e[c+1]=i>>>8,e[c+2]=i>>>16,e[c+3]=i>>>24}function Za(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24)}function Ha(e,i,c){e===1&&c.readMessage($a,i)}function $a(e,i,c){if(e===3){var y=c.readMessage(ya,{}),I=y.width,H=y.height,Q=y.left,ge=y.top,tt=y.advance;i.push({id:y.id,bitmap:new xt({width:I+6,height:H+6},y.bitmap),metrics:{width:I,height:H,left:Q,top:ge,advance:tt}})}}function ya(e,i,c){e===1?i.id=c.readVarint():e===2?i.bitmap=c.readBytes():e===3?i.width=c.readVarint():e===4?i.height=c.readVarint():e===5?i.left=c.readSVarint():e===6?i.top=c.readSVarint():e===7&&(i.advance=c.readVarint())}function Ua(e){for(var i=0,c=0,y=0,I=e;y<I.length;y+=1){var H=I[y];i+=H.w*H.h,c=Math.max(c,H.w)}e.sort(function(rn,yn){return yn.h-rn.h});for(var Q=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),c),h:1/0}],ge=0,tt=0,Rt=0,Ft=e;Rt<Ft.length;Rt+=1)for(var Jt=Ft[Rt],dr=Q.length-1;dr>=0;dr--){var Cr=Q[dr];if(!(Jt.w>Cr.w||Jt.h>Cr.h)){if(Jt.x=Cr.x,Jt.y=Cr.y,tt=Math.max(tt,Jt.y+Jt.h),ge=Math.max(ge,Jt.x+Jt.w),Jt.w===Cr.w&&Jt.h===Cr.h){var tn=Q.pop();dr<Q.length&&(Q[dr]=tn)}else Jt.h===Cr.h?(Cr.x+=Jt.w,Cr.w-=Jt.w):Jt.w===Cr.w?(Cr.y+=Jt.h,Cr.h-=Jt.h):(Q.push({x:Cr.x+Jt.w,y:Cr.y,w:Cr.w-Jt.w,h:Jt.h}),Cr.y+=Jt.h,Cr.h-=Jt.h);break}}return{w:ge,h:tt,fill:i/(ge*tt)||0}}vl.prototype={destroy:function(){this.buf=null},readFields:function(e,i,c){for(c=c||this.length;this.pos<c;){var y=this.readVarint(),I=y>>3,H=this.pos;this.type=7&y,e(I,i,this),this.pos===H&&this.skip(y)}return i},readMessage:function(e,i){return this.readFields(e,i,this.readVarint()+this.pos)},readFixed32:function(){var e=Pa(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Za(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Pa(this.buf,this.pos)+4294967296*Pa(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Pa(this.buf,this.pos)+4294967296*Za(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Dd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Dd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var i,c,y=this.buf;return i=127&(c=y[this.pos++]),c<128?i:(i|=(127&(c=y[this.pos++]))<<7,c<128?i:(i|=(127&(c=y[this.pos++]))<<14,c<128?i:(i|=(127&(c=y[this.pos++]))<<21,c<128?i:function(I,H,Q){var ge,tt,Rt=Q.buf;if(ge=(112&(tt=Rt[Q.pos++]))>>4,tt<128||(ge|=(127&(tt=Rt[Q.pos++]))<<3,tt<128)||(ge|=(127&(tt=Rt[Q.pos++]))<<10,tt<128)||(ge|=(127&(tt=Rt[Q.pos++]))<<17,tt<128)||(ge|=(127&(tt=Rt[Q.pos++]))<<24,tt<128)||(ge|=(1&(tt=Rt[Q.pos++]))<<31,tt<128))return cd(I,ge,H);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(c=y[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&kd?function(c,y,I){return kd.decode(c.subarray(y,I))}(this.buf,i,e):function(c,y,I){for(var H="",Q=y;Q<I;){var ge,tt,Rt,Ft=c[Q],Jt=null,dr=Ft>239?4:Ft>223?3:Ft>191?2:1;if(Q+dr>I)break;dr===1?Ft<128&&(Jt=Ft):dr===2?(192&(ge=c[Q+1]))==128&&(Jt=(31&Ft)<<6|63&ge)<=127&&(Jt=null):dr===3?(tt=c[Q+2],(192&(ge=c[Q+1]))==128&&(192&tt)==128&&((Jt=(15&Ft)<<12|(63&ge)<<6|63&tt)<=2047||Jt>=55296&&Jt<=57343)&&(Jt=null)):dr===4&&(tt=c[Q+2],Rt=c[Q+3],(192&(ge=c[Q+1]))==128&&(192&tt)==128&&(192&Rt)==128&&((Jt=(15&Ft)<<18|(63&ge)<<12|(63&tt)<<6|63&Rt)<=65535||Jt>=1114112)&&(Jt=null)),Jt===null?(Jt=65533,dr=1):Jt>65535&&(Jt-=65536,H+=String.fromCharCode(Jt>>>10&1023|55296),Jt=56320|1023&Jt),H+=String.fromCharCode(Jt),Q+=dr}return H}(this.buf,i,e)},readBytes:function(){var e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i},readPackedVarint:function(e,i){if(this.type!==vl.Bytes)return e.push(this.readVarint(i));var c=Fs(this);for(e=e||[];this.pos<c;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==vl.Bytes)return e.push(this.readSVarint());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==vl.Bytes)return e.push(this.readBoolean());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==vl.Bytes)return e.push(this.readFloat());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==vl.Bytes)return e.push(this.readDouble());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==vl.Bytes)return e.push(this.readFixed32());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==vl.Bytes)return e.push(this.readSFixed32());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==vl.Bytes)return e.push(this.readFixed64());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==vl.Bytes)return e.push(this.readSFixed64());var i=Fs(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===vl.Varint)for(;this.buf[this.pos++]>127;);else if(i===vl.Bytes)this.pos=this.readVarint()+this.pos;else if(i===vl.Fixed32)this.pos+=4;else{if(i!==vl.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,i){this.writeVarint(e<<3|i)},realloc:function(e){for(var i=this.length||16;i<this.pos+e;)i*=2;if(i!==this.length){var c=new Uint8Array(i);c.set(this.buf),this.buf=c,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Ra(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Ra(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Ra(this.buf,-1&e,this.pos),Ra(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Ra(this.buf,-1&e,this.pos),Ra(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(i,c){var y,I;if(i>=0?(y=i%4294967296|0,I=i/4294967296|0):(I=~(-i/4294967296),4294967295^(y=~(-i%4294967296))?y=y+1|0:(y=0,I=I+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(H,Q,ge){ge.buf[ge.pos++]=127&H|128,H>>>=7,ge.buf[ge.pos++]=127&H|128,H>>>=7,ge.buf[ge.pos++]=127&H|128,H>>>=7,ge.buf[ge.pos++]=127&H|128,ge.buf[ge.pos]=127&(H>>>=7)}(y,0,c),function(H,Q){var ge=(7&H)<<4;Q.buf[Q.pos++]|=ge|((H>>>=3)?128:0),H&&(Q.buf[Q.pos++]=127&H|((H>>>=7)?128:0),H&&(Q.buf[Q.pos++]=127&H|((H>>>=7)?128:0),H&&(Q.buf[Q.pos++]=127&H|((H>>>=7)?128:0),H&&(Q.buf[Q.pos++]=127&H|((H>>>=7)?128:0),H&&(Q.buf[Q.pos++]=127&H)))))}(I,c)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var i=this.pos;this.pos=function(y,I,H){for(var Q,ge,tt=0;tt<I.length;tt++){if((Q=I.charCodeAt(tt))>55295&&Q<57344){if(!ge){Q>56319||tt+1===I.length?(y[H++]=239,y[H++]=191,y[H++]=189):ge=Q;continue}if(Q<56320){y[H++]=239,y[H++]=191,y[H++]=189,ge=Q;continue}Q=ge-55296<<10|Q-56320|65536,ge=null}else ge&&(y[H++]=239,y[H++]=191,y[H++]=189,ge=null);Q<128?y[H++]=Q:(Q<2048?y[H++]=Q>>6|192:(Q<65536?y[H++]=Q>>12|224:(y[H++]=Q>>18|240,y[H++]=Q>>12&63|128),y[H++]=Q>>6&63|128),y[H++]=63&Q|128)}return H}(this.buf,e,this.pos);var c=this.pos-i;c>=128&&Vd(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeFloat:function(e){this.realloc(4),xd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),xd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var i=e.length;this.writeVarint(i),this.realloc(i);for(var c=0;c<i;c++)this.buf[this.pos++]=e[c]},writeRawMessage:function(e,i){this.pos++;var c=this.pos;e(i,this);var y=this.pos-c;y>=128&&Vd(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y},writeMessage:function(e,i,c){this.writeTag(e,vl.Bytes),this.writeRawMessage(i,c)},writePackedVarint:function(e,i){i.length&&this.writeMessage(e,Gd,i)},writePackedSVarint:function(e,i){i.length&&this.writeMessage(e,jt,i)},writePackedBoolean:function(e,i){i.length&&this.writeMessage(e,Ci,i)},writePackedFloat:function(e,i){i.length&&this.writeMessage(e,Vr,i)},writePackedDouble:function(e,i){i.length&&this.writeMessage(e,Ln,i)},writePackedFixed32:function(e,i){i.length&&this.writeMessage(e,aa,i)},writePackedSFixed32:function(e,i){i.length&&this.writeMessage(e,Ai,i)},writePackedFixed64:function(e,i){i.length&&this.writeMessage(e,Gi,i)},writePackedSFixed64:function(e,i){i.length&&this.writeMessage(e,Ea,i)},writeBytesField:function(e,i){this.writeTag(e,vl.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,vl.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,vl.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,vl.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,vl.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,vl.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,vl.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,vl.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,vl.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,vl.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,Boolean(i))}};var ui=function(e,i){var c=i.pixelRatio,y=i.version,I=i.stretchX,H=i.stretchY,Q=i.content;this.paddedRect=e,this.pixelRatio=c,this.stretchX=I,this.stretchY=H,this.content=Q,this.version=y},Ni={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ni.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ni.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ni.tlbr.get=function(){return this.tl.concat(this.br)},Ni.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ui.prototype,Ni);var La=function(e,i){var c={},y={};this.haveRenderCallbacks=[];var I=[];this.addImages(e,c,I),this.addImages(i,y,I);var H=Ua(I),Q=new mt({width:H.w||1,height:H.h||1});for(var ge in e){var tt=e[ge],Rt=c[ge].paddedRect;mt.copy(tt.data,Q,{x:0,y:0},{x:Rt.x+1,y:Rt.y+1},tt.data)}for(var Ft in i){var Jt=i[Ft],dr=y[Ft].paddedRect,Cr=dr.x+1,tn=dr.y+1,rn=Jt.data.width,yn=Jt.data.height;mt.copy(Jt.data,Q,{x:0,y:0},{x:Cr,y:tn},Jt.data),mt.copy(Jt.data,Q,{x:0,y:yn-1},{x:Cr,y:tn-1},{width:rn,height:1}),mt.copy(Jt.data,Q,{x:0,y:0},{x:Cr,y:tn+yn},{width:rn,height:1}),mt.copy(Jt.data,Q,{x:rn-1,y:0},{x:Cr-1,y:tn},{width:1,height:yn}),mt.copy(Jt.data,Q,{x:0,y:0},{x:Cr+rn,y:tn},{width:1,height:yn})}this.image=Q,this.iconPositions=c,this.patternPositions=y};La.prototype.addImages=function(e,i,c){for(var y in e){var I=e[y],H={x:0,y:0,w:I.data.width+2,h:I.data.height+2};c.push(H),i[y]=new ui(H,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(y)}},La.prototype.patchUpdatedImages=function(e,i){for(var c in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[c],e.getImage(c),i),this.patchUpdatedImage(this.patternPositions[c],e.getImage(c),i)},La.prototype.patchUpdatedImage=function(e,i,c){if(e&&i&&e.version!==i.version){e.version=i.version;var y=e.tl;c.update(i.data,void 0,{x:y[0],y:y[1]})}},ao("ImagePosition",ui),ao("ImageAtlas",La);var Ya={horizontal:1,vertical:2,horizontalOnly:3},_a=function(){this.scale=1,this.fontStack="",this.imageName=null};_a.forText=function(e,i){var c=new _a;return c.scale=e||1,c.fontStack=i,c},_a.forImage=function(e){var i=new _a;return i.imageName=e,i};var Ga=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xo(e,i,c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn){var yn,vn=Ga.fromFeature(e,I);Jt===Ya.vertical&&vn.verticalizePunctuation();var $n=gu.processBidirectionalText,ri=gu.processStyledBidirectionalText;if($n&&vn.sections.length===1){yn=[];for(var _i=0,xi=$n(vn.toString(),to(vn,Rt,H,i,y,Cr,tn));_i<xi.length;_i+=1){var Ii=xi[_i],ta=new Ga;ta.text=Ii,ta.sections=vn.sections;for(var Qi=0;Qi<Ii.length;Qi++)ta.sectionIndex.push(0);yn.push(ta)}}else if(ri){yn=[];for(var ja=0,qn=ri(vn.text,vn.sectionIndex,to(vn,Rt,H,i,y,Cr,tn));ja<qn.length;ja+=1){var ca=qn[ja],ra=new Ga;ra.text=ca[0],ra.sectionIndex=ca[1],ra.sections=vn.sections,yn.push(ra)}}else yn=function(qa,Ss){for(var Is=[],pu=qa.text,es=0,$u=0,hl=Ss;$u<hl.length;$u+=1){var Nl=hl[$u];Is.push(qa.substring(es,Nl)),es=Nl}return es<pu.length&&Is.push(qa.substring(es,pu.length)),Is}(vn,to(vn,Rt,H,i,y,Cr,tn));var bo=[],Eo={positionedLines:bo,text:vn.toString(),top:Ft[1],bottom:Ft[1],left:Ft[0],right:Ft[0],writingMode:Jt,iconsInText:!1,verticalizable:!1};return function(qa,Ss,Is,pu,es,$u,hl,Nl,el,af,gf,zf){for(var Th=0,ed=-17,Zf=0,iu=0,Uf=Nl==="right"?1:Nl==="left"?0:.5,xh=0,Lu=0,cl=es;Lu<cl.length;Lu+=1){var sl=cl[Lu];sl.trim();var Wu=sl.getMaxScale(),td=24*(Wu-1),Jf={positionedGlyphs:[],lineOffset:0};qa.positionedLines[xh]=Jf;var Rc=Jf.positionedGlyphs,$f=0;if(sl.length()){for(var rd=0;rd<sl.length();rd++){var wl=sl.getSection(rd),Mh=sl.getSectionIndex(rd),fd=sl.getCharCode(rd),Wd=0,oc=null,Ou=null,Od=null,Wh=24,yf=!(el===Ya.horizontal||!gf&&!Vf(fd)||gf&&(xs[fd]||(Ph=fd,Qa.Arabic(Ph)||Qa["Arabic Supplement"](Ph)||Qa["Arabic Extended-A"](Ph)||Qa["Arabic Presentation Forms-A"](Ph)||Qa["Arabic Presentation Forms-B"](Ph))));if(wl.imageName){var Ep=pu[wl.imageName];if(!Ep)continue;Od=wl.imageName,qa.iconsInText=qa.iconsInText||!0,Ou=Ep.paddedRect;var bd=Ep.displaySize;wl.scale=24*wl.scale/zf,Wd=td+(24-bd[1]*wl.scale),Wh=(oc={width:bd[0],height:bd[1],left:1,top:-3,advance:yf?bd[1]:bd[0]}).advance;var ml=yf?bd[0]*wl.scale-24*Wu:bd[1]*wl.scale-24*Wu;ml>0&&ml>$f&&($f=ml)}else{var vc=Is[wl.fontStack],vd=vc&&vc[fd];if(vd&&vd.rect)Ou=vd.rect,oc=vd.metrics;else{var Ad=Ss[wl.fontStack],Fd=Ad&&Ad[fd];if(!Fd)continue;oc=Fd.metrics}Wd=24*(Wu-wl.scale)}yf?(qa.verticalizable=!0,Rc.push({glyph:fd,imageName:Od,x:Th,y:ed+Wd,vertical:yf,scale:wl.scale,fontStack:wl.fontStack,sectionIndex:Mh,metrics:oc,rect:Ou}),Th+=Wh*wl.scale+af):(Rc.push({glyph:fd,imageName:Od,x:Th,y:ed+Wd,vertical:yf,scale:wl.scale,fontStack:wl.fontStack,sectionIndex:Mh,metrics:oc,rect:Ou}),Th+=oc.advance*wl.scale+af)}Rc.length!==0&&(Zf=Math.max(Th-af,Zf),Os(Rc,0,Rc.length-1,Uf,$f)),Th=0;var yp=$u*Wu+$f;Jf.lineOffset=Math.max($f,td),ed+=yp,iu=Math.max(yp,iu),++xh}else ed+=$u,++xh}var Ph,Ed=ed- -17,Bd=Ia(hl),Jd=Bd.horizontalAlign,qf=Bd.verticalAlign;(function(bh,Bv,nv,iv,av,ov,sv,Nd,uv){var _p,Np=(Bv-nv)*av;_p=ov!==sv?-Nd*iv- -17:(-iv*uv+.5)*sv;for(var zp=0,Sp=bh;zp<Sp.length;zp+=1)for(var xp=0,Td=Sp[zp].positionedGlyphs;xp<Td.length;xp+=1){var rp=Td[xp];rp.x+=Np,rp.y+=_p}})(qa.positionedLines,Uf,Jd,qf,Zf,iu,$u,Ed,es.length),qa.top+=-qf*Ed,qa.bottom=qa.top+Ed,qa.left+=-Jd*Zf,qa.right=qa.left+Zf}(Eo,i,c,y,yn,Q,ge,tt,Jt,Rt,dr,rn),!function(qa){for(var Ss=0,Is=qa;Ss<Is.length;Ss+=1)if(Is[Ss].positionedGlyphs.length!==0)return!1;return!0}(bo)&&Eo}Ga.fromFeature=function(e,i){for(var c=new Ga,y=0;y<e.sections.length;y++){var I=e.sections[y];I.image?c.addImageSection(I):c.addTextSection(I,i)}return c},Ga.prototype.length=function(){return this.text.length},Ga.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Ga.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Ga.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Ga.prototype.verticalizePunctuation=function(){this.text=function(e){for(var i="",c=0;c<e.length;c++){var y=e.charCodeAt(c+1)||null,I=e.charCodeAt(c-1)||null;i+=y&&ih(y)&&!Ah[e[c+1]]||I&&ih(I)&&!Ah[e[c-1]]||!Ah[e[c]]?e[c]:Ah[e[c]]}return i}(this.text)},Ga.prototype.trim=function(){for(var e=0,i=0;i<this.text.length&&xs[this.text.charCodeAt(i)];i++)e++;for(var c=this.text.length,y=this.text.length-1;y>=0&&y>=e&&xs[this.text.charCodeAt(y)];y--)c--;this.text=this.text.substring(e,c),this.sectionIndex=this.sectionIndex.slice(e,c)},Ga.prototype.substring=function(e,i){var c=new Ga;return c.text=this.text.substring(e,i),c.sectionIndex=this.sectionIndex.slice(e,i),c.sections=this.sections,c},Ga.prototype.toString=function(){return this.text},Ga.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(i,c){return Math.max(i,e.sections[c].scale)},0)},Ga.prototype.addTextSection=function(e,i){this.text+=e.text,this.sections.push(_a.forText(e.scale,e.fontStack||i));for(var c=this.sections.length-1,y=0;y<e.text.length;++y)this.sectionIndex.push(c)},Ga.prototype.addImageSection=function(e){var i=e.image?e.image.name:"";if(i.length!==0){var c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(_a.forImage(i)),this.sectionIndex.push(this.sections.length-1)):ht("Reached maximum number of images 6401")}else ht("Can't add FormattedSection with an empty image.")},Ga.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var xs={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ea={};function sa(e,i,c,y,I,H){if(i.imageName){var Q=y[i.imageName];return Q?Q.displaySize[0]*i.scale*24/H+I:0}var ge=c[i.fontStack],tt=ge&&ge[e];return tt?tt.metrics.advance*i.scale+I:0}function Zo(e,i,c,y){var I=Math.pow(e-i,2);return y?e<i?I/2:2*I:I+Math.abs(c)*c}function fo(e,i,c){var y=0;return e===10&&(y-=1e4),c&&(y+=150),e!==40&&e!==65288||(y+=50),i!==41&&i!==65289||(y+=50),y}function Oa(e,i,c,y,I,H){for(var Q=null,ge=Zo(i,c,I,H),tt=0,Rt=y;tt<Rt.length;tt+=1){var Ft=Rt[tt],Jt=Zo(i-Ft.x,c,I,H)+Ft.badness;Jt<=ge&&(Q=Ft,ge=Jt)}return{index:e,x:i,priorBreak:Q,badness:ge}}function to(e,i,c,y,I,H,Q){if(H!=="point")return[];if(!e)return[];for(var ge,tt=[],Rt=function(yn,vn,$n,ri,_i,xi){for(var Ii=0,ta=0;ta<yn.length();ta++){var Qi=yn.getSection(ta);Ii+=sa(yn.getCharCode(ta),Qi,ri,_i,vn,xi)}return Ii/Math.max(1,Math.ceil(Ii/$n))}(e,i,c,y,I,Q),Ft=e.text.indexOf("\u200B")>=0,Jt=0,dr=0;dr<e.length();dr++){var Cr=e.getSection(dr),tn=e.getCharCode(dr);if(xs[tn]||(Jt+=sa(tn,Cr,y,I,i,Q)),dr<e.length()-1){var rn=!((ge=tn)<11904||!(Qa["Bopomofo Extended"](ge)||Qa.Bopomofo(ge)||Qa["CJK Compatibility Forms"](ge)||Qa["CJK Compatibility Ideographs"](ge)||Qa["CJK Compatibility"](ge)||Qa["CJK Radicals Supplement"](ge)||Qa["CJK Strokes"](ge)||Qa["CJK Symbols and Punctuation"](ge)||Qa["CJK Unified Ideographs Extension A"](ge)||Qa["CJK Unified Ideographs"](ge)||Qa["Enclosed CJK Letters and Months"](ge)||Qa["Halfwidth and Fullwidth Forms"](ge)||Qa.Hiragana(ge)||Qa["Ideographic Description Characters"](ge)||Qa["Kangxi Radicals"](ge)||Qa["Katakana Phonetic Extensions"](ge)||Qa.Katakana(ge)||Qa["Vertical Forms"](ge)||Qa["Yi Radicals"](ge)||Qa["Yi Syllables"](ge)));(ea[tn]||rn||Cr.imageName)&&tt.push(Oa(dr+1,Jt,Rt,tt,fo(tn,e.getCharCode(dr+1),rn&&Ft),!1))}}return function yn(vn){return vn?yn(vn.priorBreak).concat(vn.index):[]}(Oa(e.length(),Jt,Rt,tt,0,!0))}function Ia(e){var i=.5,c=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:i,verticalAlign:c}}function Os(e,i,c,y,I){if(y||I)for(var H=e[c],Q=(e[c].x+H.metrics.advance*H.scale)*y,ge=i;ge<=c;ge++)e[ge].x-=Q,e[ge].y+=I}function Bs(e,i,c,y,I,H){var Q,ge=e.image;if(ge.content){var tt=ge.content,Rt=ge.pixelRatio||1;Q=[tt[0]/Rt,tt[1]/Rt,ge.displaySize[0]-tt[2]/Rt,ge.displaySize[1]-tt[3]/Rt]}var Ft,Jt,dr,Cr,tn=i.left*H,rn=i.right*H;c==="width"||c==="both"?(Cr=I[0]+tn-y[3],Jt=I[0]+rn+y[1]):Jt=(Cr=I[0]+(tn+rn-ge.displaySize[0])/2)+ge.displaySize[0];var yn=i.top*H,vn=i.bottom*H;return c==="height"||c==="both"?(Ft=I[1]+yn-y[0],dr=I[1]+vn+y[2]):dr=(Ft=I[1]+(yn+vn-ge.displaySize[1])/2)+ge.displaySize[1],{image:ge,top:Ft,right:Jt,bottom:dr,left:Cr,collisionPadding:Q}}ea[10]=!0,ea[32]=!0,ea[38]=!0,ea[40]=!0,ea[41]=!0,ea[43]=!0,ea[45]=!0,ea[47]=!0,ea[173]=!0,ea[183]=!0,ea[8203]=!0,ea[8208]=!0,ea[8211]=!0,ea[8231]=!0;var so=function(e){function i(c,y,I,H){e.call(this,c,y),this.angle=I,H!==void 0&&(this.segment=H)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(L);function yo(e,i){var c=i.expression;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Ks(e+1))};if(c.kind==="source")return{kind:"source"};for(var y=c.zoomStops,I=c.interpolationType,H=0;H<y.length&&y[H]<=e;)H++;for(var Q=H=Math.max(0,H-1);Q<y.length&&y[Q]<e+1;)Q++;Q=Math.min(y.length-1,Q);var ge=y[H],tt=y[Q];return c.kind==="composite"?{kind:"composite",minZoom:ge,maxZoom:tt,interpolationType:I}:{kind:"camera",minZoom:ge,maxZoom:tt,minSize:c.evaluate(new Ks(ge)),maxSize:c.evaluate(new Ks(tt)),interpolationType:I}}function hs(e,i,c){var y=i.uSize,I=c.lowerSize;return e.kind==="source"?I/128:e.kind==="composite"?Rr(I/128,c.upperSize/128,i.uSizeT):y}function zs(e,i){var c=0,y=0;if(e.kind==="constant")y=e.layoutSize;else if(e.kind!=="source"){var I=e.interpolationType,H=I?re(Mr.interpolationFactor(I,i,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?y=Rr(e.minSize,e.maxSize,H):c=H}return{uSizeT:c,uSize:y}}ao("Anchor",so);var wu=Object.freeze({__proto__:null,getSizeData:yo,evaluateSizeForFeature:hs,evaluateSizeForZoom:zs,SIZE_PACK_FACTOR:128});function Gu(e,i,c,y,I){if(i.segment===void 0)return!0;for(var H=i,Q=i.segment+1,ge=0;ge>-c/2;){if(--Q<0)return!1;ge-=e[Q].dist(H),H=e[Q]}ge+=e[Q].dist(e[Q+1]),Q++;for(var tt=[],Rt=0;ge<c/2;){var Ft=e[Q],Jt=e[Q+1];if(!Jt)return!1;var dr=e[Q-1].angleTo(Ft)-Ft.angleTo(Jt);for(dr=Math.abs((dr+3*Math.PI)%(2*Math.PI)-Math.PI),tt.push({distance:ge,angleDelta:dr}),Rt+=dr;ge-tt[0].distance>y;)Rt-=tt.shift().angleDelta;if(Rt>I)return!1;Q++,ge+=Ft.dist(Jt)}return!0}function Bl(e){for(var i=0,c=0;c<e.length-1;c++)i+=e[c].dist(e[c+1]);return i}function Au(e,i,c){return e?.6*i*c:0}function Sf(e,i){return Math.max(e?e.right-e.left:0,i?i.right-i.left:0)}function Xl(e,i,c,y,I,H){for(var Q=Au(c,I,H),ge=Sf(c,y)*H,tt=0,Rt=Bl(e)/2,Ft=0;Ft<e.length-1;Ft++){var Jt=e[Ft],dr=e[Ft+1],Cr=Jt.dist(dr);if(tt+Cr>Rt){var tn=(Rt-tt)/Cr,rn=Rr(Jt.x,dr.x,tn),yn=Rr(Jt.y,dr.y,tn),vn=new so(rn,yn,dr.angleTo(Jt),Ft);return vn._round(),!Q||Gu(e,vn,ge,Q,i)?vn:void 0}tt+=Cr}}function Ic(e,i,c,y,I,H,Q,ge,tt){var Rt=Au(y,H,Q),Ft=Sf(y,I),Jt=Ft*Q,dr=e[0].x===0||e[0].x===tt||e[0].y===0||e[0].y===tt;return i-Jt<i/4&&(i=Jt+i/4),function Cr(tn,rn,yn,vn,$n,ri,_i,xi,Ii){for(var ta=ri/2,Qi=Bl(tn),ja=0,qn=rn-yn,ca=[],ra=0;ra<tn.length-1;ra++){for(var bo=tn[ra],Eo=tn[ra+1],qa=bo.dist(Eo),Ss=Eo.angleTo(bo);qn+yn<ja+qa;){var Is=((qn+=yn)-ja)/qa,pu=Rr(bo.x,Eo.x,Is),es=Rr(bo.y,Eo.y,Is);if(pu>=0&&pu<Ii&&es>=0&&es<Ii&&qn-ta>=0&&qn+ta<=Qi){var $u=new so(pu,es,Ss,ra);$u._round(),vn&&!Gu(tn,$u,ri,vn,$n)||ca.push($u)}}ja+=qa}return xi||ca.length||_i||(ca=Cr(tn,ja/2,yn,vn,$n,ri,_i,!0,Ii)),ca}(e,dr?i/2*ge%i:(Ft/2+2*H)*Q*ge%i,i,Rt,c,Jt,dr,!1,tt)}function Cl(e,i,c,y,I){for(var H=[],Q=0;Q<e.length;Q++)for(var ge=e[Q],tt=void 0,Rt=0;Rt<ge.length-1;Rt++){var Ft=ge[Rt],Jt=ge[Rt+1];Ft.x<i&&Jt.x<i||(Ft.x<i?Ft=new L(i,Ft.y+(i-Ft.x)/(Jt.x-Ft.x)*(Jt.y-Ft.y))._round():Jt.x<i&&(Jt=new L(i,Ft.y+(i-Ft.x)/(Jt.x-Ft.x)*(Jt.y-Ft.y))._round()),Ft.y<c&&Jt.y<c||(Ft.y<c?Ft=new L(Ft.x+(c-Ft.y)/(Jt.y-Ft.y)*(Jt.x-Ft.x),c)._round():Jt.y<c&&(Jt=new L(Ft.x+(c-Ft.y)/(Jt.y-Ft.y)*(Jt.x-Ft.x),c)._round()),Ft.x>=y&&Jt.x>=y||(Ft.x>=y?Ft=new L(y,Ft.y+(y-Ft.x)/(Jt.x-Ft.x)*(Jt.y-Ft.y))._round():Jt.x>=y&&(Jt=new L(y,Ft.y+(y-Ft.x)/(Jt.x-Ft.x)*(Jt.y-Ft.y))._round()),Ft.y>=I&&Jt.y>=I||(Ft.y>=I?Ft=new L(Ft.x+(I-Ft.y)/(Jt.y-Ft.y)*(Jt.x-Ft.x),I)._round():Jt.y>=I&&(Jt=new L(Ft.x+(I-Ft.y)/(Jt.y-Ft.y)*(Jt.x-Ft.x),I)._round()),tt&&Ft.equals(tt[tt.length-1])||H.push(tt=[Ft]),tt.push(Jt)))))}return H}function rf(e,i,c,y){var I=[],H=e.image,Q=H.pixelRatio,ge=H.paddedRect.w-2,tt=H.paddedRect.h-2,Rt=e.right-e.left,Ft=e.bottom-e.top,Jt=H.stretchX||[[0,ge]],dr=H.stretchY||[[0,tt]],Cr=function(pu,es){return pu+es[1]-es[0]},tn=Jt.reduce(Cr,0),rn=dr.reduce(Cr,0),yn=ge-tn,vn=tt-rn,$n=0,ri=tn,_i=0,xi=rn,Ii=0,ta=yn,Qi=0,ja=vn;if(H.content&&y){var qn=H.content;$n=mf(Jt,0,qn[0]),_i=mf(dr,0,qn[1]),ri=mf(Jt,qn[0],qn[2]),xi=mf(dr,qn[1],qn[3]),Ii=qn[0]-$n,Qi=qn[1]-_i,ta=qn[2]-qn[0]-ri,ja=qn[3]-qn[1]-xi}var ca=function(pu,es,$u,hl){var Nl=pc(pu.stretch-$n,ri,Rt,e.left),el=fu(pu.fixed-Ii,ta,pu.stretch,tn),af=pc(es.stretch-_i,xi,Ft,e.top),gf=fu(es.fixed-Qi,ja,es.stretch,rn),zf=pc($u.stretch-$n,ri,Rt,e.left),Th=fu($u.fixed-Ii,ta,$u.stretch,tn),ed=pc(hl.stretch-_i,xi,Ft,e.top),Zf=fu(hl.fixed-Qi,ja,hl.stretch,rn),iu=new L(Nl,af),Uf=new L(zf,af),xh=new L(zf,ed),Lu=new L(Nl,ed),cl=new L(el/Q,gf/Q),sl=new L(Th/Q,Zf/Q),Wu=i*Math.PI/180;if(Wu){var td=Math.sin(Wu),Jf=Math.cos(Wu),Rc=[Jf,-td,td,Jf];iu._matMult(Rc),Uf._matMult(Rc),Lu._matMult(Rc),xh._matMult(Rc)}var $f=pu.stretch+pu.fixed,rd=es.stretch+es.fixed;return{tl:iu,tr:Uf,bl:Lu,br:xh,tex:{x:H.paddedRect.x+1+$f,y:H.paddedRect.y+1+rd,w:$u.stretch+$u.fixed-$f,h:hl.stretch+hl.fixed-rd},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:cl,pixelOffsetBR:sl,minFontScaleX:ta/Q/Rt,minFontScaleY:ja/Q/Ft,isSDF:c}};if(y&&(H.stretchX||H.stretchY))for(var ra=lh(Jt,yn,tn),bo=lh(dr,vn,rn),Eo=0;Eo<ra.length-1;Eo++)for(var qa=ra[Eo],Ss=ra[Eo+1],Is=0;Is<bo.length-1;Is++)I.push(ca(qa,bo[Is],Ss,bo[Is+1]));else I.push(ca({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ge+1},{fixed:0,stretch:tt+1}));return I}function mf(e,i,c){for(var y=0,I=0,H=e;I<H.length;I+=1){var Q=H[I];y+=Math.max(i,Math.min(c,Q[1]))-Math.max(i,Math.min(c,Q[0]))}return y}function lh(e,i,c){for(var y=[{fixed:-1,stretch:0}],I=0,H=e;I<H.length;I+=1){var Q=H[I],ge=Q[0],tt=Q[1],Rt=y[y.length-1];y.push({fixed:ge-Rt.stretch,stretch:Rt.stretch}),y.push({fixed:ge-Rt.stretch,stretch:Rt.stretch+(tt-ge)})}return y.push({fixed:i+1,stretch:c}),y}function pc(e,i,c,y){return e/i*c+y}function fu(e,i,c,y){return e-i*c/y}var Cf=function(e,i,c,y,I,H,Q,ge,tt,Rt){if(this.boxStartIndex=e.length,tt){var Ft=H.top,Jt=H.bottom,dr=H.collisionPadding;dr&&(Ft-=dr[1],Jt+=dr[3]);var Cr=Jt-Ft;Cr>0&&(Cr=Math.max(10,Cr),this.circleDiameter=Cr)}else{var tn=H.top*Q-ge,rn=H.bottom*Q+ge,yn=H.left*Q-ge,vn=H.right*Q+ge,$n=H.collisionPadding;if($n&&(yn-=$n[0]*Q,tn-=$n[1]*Q,vn+=$n[2]*Q,rn+=$n[3]*Q),Rt){var ri=new L(yn,tn),_i=new L(vn,tn),xi=new L(yn,rn),Ii=new L(vn,rn),ta=Rt*Math.PI/180;ri._rotate(ta),_i._rotate(ta),xi._rotate(ta),Ii._rotate(ta),yn=Math.min(ri.x,_i.x,xi.x,Ii.x),vn=Math.max(ri.x,_i.x,xi.x,Ii.x),tn=Math.min(ri.y,_i.y,xi.y,Ii.y),rn=Math.max(ri.y,_i.y,xi.y,Ii.y)}e.emplaceBack(i.x,i.y,yn,tn,vn,rn,c,y,I)}this.boxEndIndex=e.length},Uu=function(e,i){if(e===void 0&&(e=[]),i===void 0&&(i=Qf),this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)};function Qf(e,i){return e<i?-1:e>i?1:0}function js(e,i,c){i===void 0&&(i=1),c===void 0&&(c=!1);for(var y=1/0,I=1/0,H=-1/0,Q=-1/0,ge=e[0],tt=0;tt<ge.length;tt++){var Rt=ge[tt];(!tt||Rt.x<y)&&(y=Rt.x),(!tt||Rt.y<I)&&(I=Rt.y),(!tt||Rt.x>H)&&(H=Rt.x),(!tt||Rt.y>Q)&&(Q=Rt.y)}var Ft=Math.min(H-y,Q-I),Jt=Ft/2,dr=new Uu([],Pu);if(Ft===0)return new L(y,I);for(var Cr=y;Cr<H;Cr+=Ft)for(var tn=I;tn<Q;tn+=Ft)dr.push(new Ru(Cr+Jt,tn+Jt,Jt,e));for(var rn=function($n){for(var ri=0,_i=0,xi=0,Ii=$n[0],ta=0,Qi=Ii.length,ja=Qi-1;ta<Qi;ja=ta++){var qn=Ii[ta],ca=Ii[ja],ra=qn.x*ca.y-ca.x*qn.y;_i+=(qn.x+ca.x)*ra,xi+=(qn.y+ca.y)*ra,ri+=3*ra}return new Ru(_i/ri,xi/ri,0,$n)}(e),yn=dr.length;dr.length;){var vn=dr.pop();(vn.d>rn.d||!rn.d)&&(rn=vn,c&&console.log("found best %d after %d probes",Math.round(1e4*vn.d)/1e4,yn)),vn.max-rn.d<=i||(dr.push(new Ru(vn.p.x-(Jt=vn.h/2),vn.p.y-Jt,Jt,e)),dr.push(new Ru(vn.p.x+Jt,vn.p.y-Jt,Jt,e)),dr.push(new Ru(vn.p.x-Jt,vn.p.y+Jt,Jt,e)),dr.push(new Ru(vn.p.x+Jt,vn.p.y+Jt,Jt,e)),yn+=4)}return c&&(console.log("num probes: "+yn),console.log("best distance: "+rn.d)),rn.p}function Pu(e,i){return i.max-e.max}function Ru(e,i,c,y){this.p=new L(e,i),this.h=c,this.d=function(I,H){for(var Q=!1,ge=1/0,tt=0;tt<H.length;tt++)for(var Rt=H[tt],Ft=0,Jt=Rt.length,dr=Jt-1;Ft<Jt;dr=Ft++){var Cr=Rt[Ft],tn=Rt[dr];Cr.y>I.y!=tn.y>I.y&&I.x<(tn.x-Cr.x)*(I.y-Cr.y)/(tn.y-Cr.y)+Cr.x&&(Q=!Q),ge=Math.min(ge,Of(I,Cr,tn))}return(Q?1:-1)*Math.sqrt(ge)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}Uu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Uu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),e}},Uu.prototype.peek=function(){return this.data[0]},Uu.prototype._up=function(e){for(var i=this.data,c=this.compare,y=i[e];e>0;){var I=e-1>>1,H=i[I];if(c(y,H)>=0)break;i[e]=H,e=I}i[e]=y},Uu.prototype._down=function(e){for(var i=this.data,c=this.compare,y=this.length>>1,I=i[e];e<y;){var H=1+(e<<1),Q=i[H],ge=H+1;if(ge<this.length&&c(i[ge],Q)<0&&(H=ge,Q=i[ge]),c(Q,I)>=0)break;i[e]=Q,e=H}i[e]=I};var nf=Number.POSITIVE_INFINITY;function pd(e,i){return i[1]!==nf?function(c,y,I){var H=0,Q=0;switch(y=Math.abs(y),I=Math.abs(I),c){case"top-right":case"top-left":case"top":Q=I-7;break;case"bottom-right":case"bottom-left":case"bottom":Q=7-I}switch(c){case"top-right":case"bottom-right":case"right":H=-y;break;case"top-left":case"bottom-left":case"left":H=y}return[H,Q]}(e,i[0],i[1]):function(c,y){var I=0,H=0;y<0&&(y=0);var Q=y/Math.sqrt(2);switch(c){case"top-right":case"top-left":H=Q-7;break;case"bottom-right":case"bottom-left":H=7-Q;break;case"bottom":H=7-y;break;case"top":H=y-7}switch(c){case"top-right":case"bottom-right":I=-Q;break;case"top-left":case"bottom-left":I=Q;break;case"left":I=y;break;case"right":I=-y}return[I,H]}(e,i[0])}function w(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function G(e,i,c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn){var rn=function(_i,xi,Ii,ta,Qi,ja,qn,ca){for(var ra=ta.layout.get("text-rotate").evaluate(ja,{})*Math.PI/180,bo=[],Eo=0,qa=xi.positionedLines;Eo<qa.length;Eo+=1)for(var Ss=qa[Eo],Is=0,pu=Ss.positionedGlyphs;Is<pu.length;Is+=1){var es=pu[Is];if(es.rect){var $u=es.rect||{},hl=4,Nl=!0,el=1,af=0,gf=(Qi||ca)&&es.vertical,zf=es.metrics.advance*es.scale/2;if(ca&&xi.verticalizable&&(af=Ss.lineOffset/2-(es.imageName?-(24-es.metrics.width*es.scale)/2:24*(es.scale-1))),es.imageName){var Th=qn[es.imageName];Nl=Th.sdf,hl=1/(el=Th.pixelRatio)}var ed=Qi?[es.x+zf,es.y]:[0,0],Zf=Qi?[0,0]:[es.x+zf+Ii[0],es.y+Ii[1]-af],iu=[0,0];gf&&(iu=Zf,Zf=[0,0]);var Uf=(es.metrics.left-hl)*es.scale-zf+Zf[0],xh=(-es.metrics.top-hl)*es.scale+Zf[1],Lu=Uf+$u.w*es.scale/el,cl=xh+$u.h*es.scale/el,sl=new L(Uf,xh),Wu=new L(Lu,xh),td=new L(Uf,cl),Jf=new L(Lu,cl);if(gf){var Rc=new L(-zf,zf- -17),$f=-Math.PI/2,rd=12-zf,wl=new L(22-rd,-(es.imageName?rd:0)),Mh=new(Function.prototype.bind.apply(L,[null].concat(iu)));sl._rotateAround($f,Rc)._add(wl)._add(Mh),Wu._rotateAround($f,Rc)._add(wl)._add(Mh),td._rotateAround($f,Rc)._add(wl)._add(Mh),Jf._rotateAround($f,Rc)._add(wl)._add(Mh)}if(ra){var fd=Math.sin(ra),Wd=Math.cos(ra),oc=[Wd,-fd,fd,Wd];sl._matMult(oc),Wu._matMult(oc),td._matMult(oc),Jf._matMult(oc)}var Ou=new L(0,0),Od=new L(0,0);bo.push({tl:sl,tr:Wu,bl:td,br:Jf,tex:$u,writingMode:xi.writingMode,glyphOffset:ed,sectionIndex:es.sectionIndex,isSDF:Nl,pixelOffsetTL:Ou,pixelOffsetBR:Od,minFontScaleX:0,minFontScaleY:0})}}return bo}(0,c,ge,I,H,Q,y,e.allowVerticalPlacement),yn=e.textSizeData,vn=null;yn.kind==="source"?(vn=[128*I.layout.get("text-size").evaluate(Q,{})])[0]>32640&&ht(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):yn.kind==="composite"&&((vn=[128*Cr.compositeTextSizes[0].evaluate(Q,{},tn),128*Cr.compositeTextSizes[1].evaluate(Q,{},tn)])[0]>32640||vn[1]>32640)&&ht(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,rn,vn,ge,H,Q,Rt,i,tt.lineStartIndex,tt.lineLength,dr,tn);for(var $n=0,ri=Ft;$n<ri.length;$n+=1)Jt[ri[$n]]=e.text.placedSymbolArray.length-1;return 4*rn.length}function Ce(e){for(var i in e)return e[i];return null}function ae(e,i,c,y){var I=e.compareText;if(i in I){for(var H=I[i],Q=H.length-1;Q>=0;Q--)if(y.dist(H[Q])<c)return!0}else I[i]=[];return I[i].push(y),!1}var et=cu.VectorTileFeature.types,Ie=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ze(e,i,c,y,I,H,Q,ge,tt,Rt,Ft,Jt,dr){var Cr=ge?Math.min(32640,Math.round(ge[0])):0,tn=ge?Math.min(32640,Math.round(ge[1])):0;e.emplaceBack(i,c,Math.round(32*y),Math.round(32*I),H,Q,(Cr<<1)+(tt?1:0),tn,16*Rt,16*Ft,256*Jt,256*dr)}function Fe(e,i,c){e.emplaceBack(i.x,i.y,c),e.emplaceBack(i.x,i.y,c),e.emplaceBack(i.x,i.y,c),e.emplaceBack(i.x,i.y,c)}function it(e){for(var i=0,c=e.sections;i<c.length;i+=1)if(Hh(c[i].text))return!0;return!1}var gt=function(e){this.layoutVertexArray=new Vo,this.indexArray=new rc,this.programConfigurations=e,this.segments=new Dr,this.dynamicLayoutVertexArray=new Qo,this.opacityVertexArray=new du,this.placedSymbolArray=new E};gt.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},gt.prototype.upload=function(e,i,c,y){this.isEmpty()||(c&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,vp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Ie,!0),this.opacityVertexBuffer.itemSize=1),(c||y)&&this.programConfigurations.upload(e))},gt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ao("SymbolBuffers",gt);var It=function(e,i,c){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new c,this.segments=new Dr,this.collisionVertexArray=new df};It.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,mp.members,!0)},It.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ao("CollisionBuffers",It);var Tt=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yu([]),this.placementViewportMatrix=yu([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yo(this.zoom,i["text-size"]),this.iconSizeData=yo(this.zoom,i["icon-size"]);var c=this.layers[0].layout,y=c.get("symbol-sort-key"),I=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(function(H){return Ya[H]})),this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id}),this.sourceID=e.sourceID};Tt.prototype.createArrays=function(){this.text=new gt(new _s(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new gt(new _s(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new Pe,this.lineVertexArray=new ct,this.symbolInstances=new ye},Tt.prototype.calculateGlyphDependencies=function(e,i,c,y,I){for(var H=0;H<e.length;H++)if(i[e.charCodeAt(H)]=!0,(c||y)&&I){var Q=Ah[e.charAt(H)];Q&&(i[Q.charCodeAt(0)]=!0)}},Tt.prototype.populate=function(e,i,c){var y=this.layers[0],I=y.layout,H=I.get("text-font"),Q=I.get("text-field"),ge=I.get("icon-image"),tt=(Q.value.kind!=="constant"||Q.value.value instanceof ha&&!Q.value.value.isEmpty()||Q.value.value.toString().length>0)&&(H.value.kind!=="constant"||H.value.value.length>0),Rt=ge.value.kind!=="constant"||!!ge.value.value||Object.keys(ge.parameters).length>0,Ft=I.get("symbol-sort-key");if(this.features=[],tt||Rt){for(var Jt=i.iconDependencies,dr=i.glyphDependencies,Cr=i.availableImages,tn=new Ks(this.zoom),rn=0,yn=e;rn<yn.length;rn+=1){var vn=yn[rn],$n=vn.feature,ri=vn.id,_i=vn.index,xi=vn.sourceLayerIndex,Ii=y._featureFilter.needGeometry,ta=qu($n,Ii);if(y._featureFilter.filter(tn,ta,c)){Ii||(ta.geometry=Ju($n));var Qi=void 0;if(tt){var ja=y.getValueAndResolveTokens("text-field",ta,c,Cr),qn=ha.factory(ja);it(qn)&&(this.hasRTLText=!0),(!this.hasRTLText||Vh()==="unavailable"||this.hasRTLText&&gu.isParsed())&&(Qi=gp(qn,y,ta))}var ca=void 0;if(Rt){var ra=y.getValueAndResolveTokens("icon-image",ta,c,Cr);ca=ra instanceof xa?ra:xa.fromString(ra)}if(Qi||ca){var bo=this.sortFeaturesByKey?Ft.evaluate(ta,{},c):void 0;if(this.features.push({id:ri,text:Qi,icon:ca,index:_i,sourceLayerIndex:xi,geometry:ta.geometry,properties:$n.properties,type:et[$n.type],sortKey:bo}),ca&&(Jt[ca.name]=!0),Qi){var Eo=H.evaluate(ta,{},c).join(","),qa=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ya.vertical)>=0;for(var Ss=0,Is=Qi.sections;Ss<Is.length;Ss+=1){var pu=Is[Ss];if(pu.image)Jt[pu.image.name]=!0;else{var es=Yl(Qi.toString()),$u=pu.fontStack||Eo,hl=dr[$u]=dr[$u]||{};this.calculateGlyphDependencies(pu.text,hl,qa,this.allowVerticalPlacement,es)}}}}}}I.get("symbol-placement")==="line"&&(this.features=function(Nl){var el={},af={},gf=[],zf=0;function Th(Rc){gf.push(Nl[Rc]),zf++}function ed(Rc,$f,rd){var wl=af[Rc];return delete af[Rc],af[$f]=wl,gf[wl].geometry[0].pop(),gf[wl].geometry[0]=gf[wl].geometry[0].concat(rd[0]),wl}function Zf(Rc,$f,rd){var wl=el[$f];return delete el[$f],el[Rc]=wl,gf[wl].geometry[0].shift(),gf[wl].geometry[0]=rd[0].concat(gf[wl].geometry[0]),wl}function iu(Rc,$f,rd){var wl=rd?$f[0][$f[0].length-1]:$f[0][0];return Rc+":"+wl.x+":"+wl.y}for(var Uf=0;Uf<Nl.length;Uf++){var xh=Nl[Uf],Lu=xh.geometry,cl=xh.text?xh.text.toString():null;if(cl){var sl=iu(cl,Lu),Wu=iu(cl,Lu,!0);if(sl in af&&Wu in el&&af[sl]!==el[Wu]){var td=Zf(sl,Wu,Lu),Jf=ed(sl,Wu,gf[td].geometry);delete el[sl],delete af[Wu],af[iu(cl,gf[Jf].geometry,!0)]=Jf,gf[td].geometry=null}else sl in af?ed(sl,Wu,Lu):Wu in el?Zf(sl,Wu,Lu):(Th(Uf),el[sl]=zf-1,af[Wu]=zf-1)}else Th(Uf)}return gf.filter(function(Rc){return Rc.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Nl,el){return Nl.sortKey-el.sortKey})}},Tt.prototype.update=function(e,i,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,c),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,c))},Tt.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Tt.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Tt.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Tt.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Tt.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Tt.prototype.addToLineVertexArray=function(e,i){var c=this.lineVertexArray.length;if(e.segment!==void 0){for(var y=e.dist(i[e.segment+1]),I=e.dist(i[e.segment]),H={},Q=e.segment+1;Q<i.length;Q++)H[Q]={x:i[Q].x,y:i[Q].y,tileUnitDistanceFromAnchor:y},Q<i.length-1&&(y+=i[Q+1].dist(i[Q]));for(var ge=e.segment||0;ge>=0;ge--)H[ge]={x:i[ge].x,y:i[ge].y,tileUnitDistanceFromAnchor:I},ge>0&&(I+=i[ge-1].dist(i[ge]));for(var tt=0;tt<i.length;tt++){var Rt=H[tt];this.lineVertexArray.emplaceBack(Rt.x,Rt.y,Rt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}},Tt.prototype.addSymbols=function(e,i,c,y,I,H,Q,ge,tt,Rt,Ft,Jt){for(var dr=e.indexArray,Cr=e.layoutVertexArray,tn=e.segments.prepareSegment(4*i.length,Cr,dr,this.canOverlap?H.sortKey:void 0),rn=this.glyphOffsetArray.length,yn=tn.vertexLength,vn=this.allowVerticalPlacement&&Q===Ya.vertical?Math.PI/2:0,$n=H.text&&H.text.sections,ri=0;ri<i.length;ri++){var _i=i[ri],xi=_i.tl,Ii=_i.tr,ta=_i.bl,Qi=_i.br,ja=_i.tex,qn=_i.pixelOffsetTL,ca=_i.pixelOffsetBR,ra=_i.minFontScaleX,bo=_i.minFontScaleY,Eo=_i.glyphOffset,qa=_i.isSDF,Ss=_i.sectionIndex,Is=tn.vertexLength,pu=Eo[1];Ze(Cr,ge.x,ge.y,xi.x,pu+xi.y,ja.x,ja.y,c,qa,qn.x,qn.y,ra,bo),Ze(Cr,ge.x,ge.y,Ii.x,pu+Ii.y,ja.x+ja.w,ja.y,c,qa,ca.x,qn.y,ra,bo),Ze(Cr,ge.x,ge.y,ta.x,pu+ta.y,ja.x,ja.y+ja.h,c,qa,qn.x,ca.y,ra,bo),Ze(Cr,ge.x,ge.y,Qi.x,pu+Qi.y,ja.x+ja.w,ja.y+ja.h,c,qa,ca.x,ca.y,ra,bo),Fe(e.dynamicLayoutVertexArray,ge,vn),dr.emplaceBack(Is,Is+1,Is+2),dr.emplaceBack(Is+1,Is+2,Is+3),tn.vertexLength+=4,tn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Eo[0]),ri!==i.length-1&&Ss===i[ri+1].sectionIndex||e.programConfigurations.populatePaintArrays(Cr.length,H,H.index,{},Jt,$n&&$n[Ss])}e.placedSymbolArray.emplaceBack(ge.x,ge.y,rn,this.glyphOffsetArray.length-rn,yn,tt,Rt,ge.segment,c?c[0]:0,c?c[1]:0,y[0],y[1],Q,0,!1,0,Ft)},Tt.prototype._addCollisionDebugVertex=function(e,i,c,y,I,H){return i.emplaceBack(0,0),e.emplaceBack(c.x,c.y,y,I,Math.round(H.x),Math.round(H.y))},Tt.prototype.addCollisionDebugVertices=function(e,i,c,y,I,H,Q){var ge=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),tt=ge.vertexLength,Rt=I.layoutVertexArray,Ft=I.collisionVertexArray,Jt=Q.anchorX,dr=Q.anchorY;this._addCollisionDebugVertex(Rt,Ft,H,Jt,dr,new L(e,i)),this._addCollisionDebugVertex(Rt,Ft,H,Jt,dr,new L(c,i)),this._addCollisionDebugVertex(Rt,Ft,H,Jt,dr,new L(c,y)),this._addCollisionDebugVertex(Rt,Ft,H,Jt,dr,new L(e,y)),ge.vertexLength+=4;var Cr=I.indexArray;Cr.emplaceBack(tt,tt+1),Cr.emplaceBack(tt+1,tt+2),Cr.emplaceBack(tt+2,tt+3),Cr.emplaceBack(tt+3,tt),ge.primitiveLength+=4},Tt.prototype.addDebugCollisionBoxes=function(e,i,c,y){for(var I=e;I<i;I++){var H=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(H.x1,H.y1,H.x2,H.y2,y?this.textCollisionBox:this.iconCollisionBox,H.anchorPoint,c)}},Tt.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new It(Wf,Cd.members,Zc),this.iconCollisionBox=new It(Wf,Cd.members,Zc);for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Tt.prototype._deserializeCollisionBoxesForSymbol=function(e,i,c,y,I,H,Q,ge,tt){for(var Rt={},Ft=i;Ft<c;Ft++){var Jt=e.get(Ft);Rt.textBox={x1:Jt.x1,y1:Jt.y1,x2:Jt.x2,y2:Jt.y2,anchorPointX:Jt.anchorPointX,anchorPointY:Jt.anchorPointY},Rt.textFeatureIndex=Jt.featureIndex;break}for(var dr=y;dr<I;dr++){var Cr=e.get(dr);Rt.verticalTextBox={x1:Cr.x1,y1:Cr.y1,x2:Cr.x2,y2:Cr.y2,anchorPointX:Cr.anchorPointX,anchorPointY:Cr.anchorPointY},Rt.verticalTextFeatureIndex=Cr.featureIndex;break}for(var tn=H;tn<Q;tn++){var rn=e.get(tn);Rt.iconBox={x1:rn.x1,y1:rn.y1,x2:rn.x2,y2:rn.y2,anchorPointX:rn.anchorPointX,anchorPointY:rn.anchorPointY},Rt.iconFeatureIndex=rn.featureIndex;break}for(var yn=ge;yn<tt;yn++){var vn=e.get(yn);Rt.verticalIconBox={x1:vn.x1,y1:vn.y1,x2:vn.x2,y2:vn.y2,anchorPointX:vn.anchorPointX,anchorPointY:vn.anchorPointY},Rt.verticalIconFeatureIndex=vn.featureIndex;break}return Rt},Tt.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var c=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}},Tt.prototype.hasTextData=function(){return this.text.segments.get().length>0},Tt.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Tt.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Tt.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Tt.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Tt.prototype.addIndicesForPlacedSymbol=function(e,i){for(var c=e.placedSymbolArray.get(i),y=c.vertexStartIndex+4*c.numGlyphs,I=c.vertexStartIndex;I<y;I+=4)e.indexArray.emplaceBack(I,I+1,I+2),e.indexArray.emplaceBack(I+1,I+2,I+3)},Tt.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(e),c=Math.cos(e),y=[],I=[],H=[],Q=0;Q<this.symbolInstances.length;++Q){H.push(Q);var ge=this.symbolInstances.get(Q);y.push(0|Math.round(i*ge.anchorX+c*ge.anchorY)),I.push(ge.featureIndex)}return H.sort(function(tt,Rt){return y[tt]-y[Rt]||I[Rt]-I[tt]}),H},Tt.prototype.addToSortKeyRanges=function(e,i){var c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===i?c.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Tt.prototype.sortFeatures=function(e){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var c=0,y=this.symbolInstanceIndexes;c<y.length;c+=1){var I=this.symbolInstances.get(y[c]);this.featureSortOrder.push(I.featureIndex),[I.rightJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.leftJustifiedTextSymbolIndex].forEach(function(H,Q,ge){H>=0&&ge.indexOf(H)===Q&&i.addIndicesForPlacedSymbol(i.text,H)}),I.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,I.verticalPlacedTextSymbolIndex),I.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.placedIconSymbolIndex),I.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ao("SymbolBucket",Tt,{omit:["layers","collisionBoxArray","features","compareText"]}),Tt.MAX_GLYPHS=65535,Tt.addDynamicAttributes=Fe;var qt=new mu({"symbol-placement":new oo(sr.layout_symbol["symbol-placement"]),"symbol-spacing":new oo(sr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oo(sr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ko(sr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oo(sr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oo(sr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new oo(sr.layout_symbol["icon-ignore-placement"]),"icon-optional":new oo(sr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oo(sr.layout_symbol["icon-rotation-alignment"]),"icon-size":new ko(sr.layout_symbol["icon-size"]),"icon-text-fit":new oo(sr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oo(sr.layout_symbol["icon-text-fit-padding"]),"icon-image":new ko(sr.layout_symbol["icon-image"]),"icon-rotate":new ko(sr.layout_symbol["icon-rotate"]),"icon-padding":new oo(sr.layout_symbol["icon-padding"]),"icon-keep-upright":new oo(sr.layout_symbol["icon-keep-upright"]),"icon-offset":new ko(sr.layout_symbol["icon-offset"]),"icon-anchor":new ko(sr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oo(sr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oo(sr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oo(sr.layout_symbol["text-rotation-alignment"]),"text-field":new ko(sr.layout_symbol["text-field"]),"text-font":new ko(sr.layout_symbol["text-font"]),"text-size":new ko(sr.layout_symbol["text-size"]),"text-max-width":new ko(sr.layout_symbol["text-max-width"]),"text-line-height":new oo(sr.layout_symbol["text-line-height"]),"text-letter-spacing":new ko(sr.layout_symbol["text-letter-spacing"]),"text-justify":new ko(sr.layout_symbol["text-justify"]),"text-radial-offset":new ko(sr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oo(sr.layout_symbol["text-variable-anchor"]),"text-anchor":new ko(sr.layout_symbol["text-anchor"]),"text-max-angle":new oo(sr.layout_symbol["text-max-angle"]),"text-writing-mode":new oo(sr.layout_symbol["text-writing-mode"]),"text-rotate":new ko(sr.layout_symbol["text-rotate"]),"text-padding":new oo(sr.layout_symbol["text-padding"]),"text-keep-upright":new oo(sr.layout_symbol["text-keep-upright"]),"text-transform":new ko(sr.layout_symbol["text-transform"]),"text-offset":new ko(sr.layout_symbol["text-offset"]),"text-allow-overlap":new oo(sr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new oo(sr.layout_symbol["text-ignore-placement"]),"text-optional":new oo(sr.layout_symbol["text-optional"])}),Ot={paint:new mu({"icon-opacity":new ko(sr.paint_symbol["icon-opacity"]),"icon-color":new ko(sr.paint_symbol["icon-color"]),"icon-halo-color":new ko(sr.paint_symbol["icon-halo-color"]),"icon-halo-width":new ko(sr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ko(sr.paint_symbol["icon-halo-blur"]),"icon-translate":new oo(sr.paint_symbol["icon-translate"]),"icon-translate-anchor":new oo(sr.paint_symbol["icon-translate-anchor"]),"text-opacity":new ko(sr.paint_symbol["text-opacity"]),"text-color":new ko(sr.paint_symbol["text-color"],{runtimeType:Hi,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ko(sr.paint_symbol["text-halo-color"]),"text-halo-width":new ko(sr.paint_symbol["text-halo-width"]),"text-halo-blur":new ko(sr.paint_symbol["text-halo-blur"]),"text-translate":new oo(sr.paint_symbol["text-translate"]),"text-translate-anchor":new oo(sr.paint_symbol["text-translate-anchor"])}),layout:qt},rr=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Vi,this.defaultValue=e};rr.prototype.evaluate=function(e){if(e.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},rr.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},rr.prototype.outputDefined=function(){return!1},rr.prototype.serialize=function(){return null},ao("FormatSectionOverride",rr,{omit:["defaultValue"]});var Xt=function(e){function i(c){e.call(this,c,Ot)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.recalculate=function(c,y){if(e.prototype.recalculate.call(this,c,y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var I=this.layout.get("text-writing-mode");if(I){for(var H=[],Q=0,ge=I;Q<ge.length;Q+=1){var tt=ge[Q];H.indexOf(tt)<0&&H.push(tt)}this.layout._values["text-writing-mode"]=H}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(c,y,I,H){var Q=this.layout.get(c).evaluate(y,{},I,H),ge=this._unevaluatedLayout._values[c];return ge.isDataDriven()||cf(ge.value)||!Q?Q:function(tt,Rt){return Rt.replace(/{([^{}]+)}/g,function(Ft,Jt){return Jt in tt?String(tt[Jt]):""})}(y.properties,Q)},i.prototype.createBucket=function(c){return new Tt(c)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var c=0,y=Ot.paint.overridableProperties;c<y.length;c+=1){var I=y[c];if(i.hasPaintOverride(this.layout,I)){var H,Q=this.paint.get(I),ge=new rr(Q),tt=new Eh(ge,Q.property.specification);H=Q.value.kind==="constant"||Q.value.kind==="source"?new _f("source",tt):new Dc("composite",tt,Q.value.zoomStops,Q.value._interpolationType),this.paint._values[I]=new Jl(Q.property,H,Q.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(c,y,I){return!(!this.layout||y.isDataDriven()||I.isDataDriven())&&i.hasPaintOverride(this.layout,c)},i.hasPaintOverride=function(c,y){var I=c.get("text-field"),H=Ot.paint.properties[y],Q=!1,ge=function(Ft){for(var Jt=0,dr=Ft;Jt<dr.length;Jt+=1)if(H.overrides&&H.overrides.hasOverride(dr[Jt]))return void(Q=!0)};if(I.value.kind==="constant"&&I.value.value instanceof ha)ge(I.value.value.sections);else if(I.value.kind==="source"){var tt=function(Ft){Q||(Ft instanceof no&&Po(Ft.value)===uo?ge(Ft.value.sections):Ft instanceof Wo?ge(Ft.sections):Ft.eachChild(tt))},Rt=I.value;Rt._styleExpression&&tt(Rt._styleExpression.expression)}return Q},i}(Ku),gr={paint:new mu({"background-color":new oo(sr.paint_background["background-color"]),"background-pattern":new ql(sr.paint_background["background-pattern"]),"background-opacity":new oo(sr.paint_background["background-opacity"])})},Sr=function(e){function i(c){e.call(this,c,gr)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Ku),Wr={paint:new mu({"raster-opacity":new oo(sr.paint_raster["raster-opacity"]),"raster-hue-rotate":new oo(sr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oo(sr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oo(sr.paint_raster["raster-brightness-max"]),"raster-saturation":new oo(sr.paint_raster["raster-saturation"]),"raster-contrast":new oo(sr.paint_raster["raster-contrast"]),"raster-resampling":new oo(sr.paint_raster["raster-resampling"]),"raster-fade-duration":new oo(sr.paint_raster["raster-fade-duration"])})},Cn=function(e){function i(c){e.call(this,c,Wr)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Ku),xn=function(e){function i(c){e.call(this,c,{}),this.implementation=c}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(c){this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},i.prototype.onRemove=function(c){this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},i}(Ku),In={circle:mh,heatmap:en,hillshade:Tn,fill:bi,"fill-extrusion":Wl,line:up,symbol:Xt,background:Sr,raster:Cn},Rn=O.HTMLImageElement,Gn=O.HTMLCanvasElement,ti=O.HTMLVideoElement,ii=O.ImageData,b=O.ImageBitmap,M=function(e,i,c,y){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(i,y)};M.prototype.update=function(e,i,c){var y=e.width,I=e.height,H=!(this.size&&this.size[0]===y&&this.size[1]===I||c),Q=this.context,ge=Q.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),ge.bindTexture(ge.TEXTURE_2D,this.texture),Q.pixelStoreUnpackFlipY.set(!1),Q.pixelStoreUnpack.set(1),Q.pixelStoreUnpackPremultiplyAlpha.set(this.format===ge.RGBA&&(!i||i.premultiply!==!1)),H)this.size=[y,I],e instanceof Rn||e instanceof Gn||e instanceof ti||e instanceof ii||b&&e instanceof b?ge.texImage2D(ge.TEXTURE_2D,0,this.format,this.format,ge.UNSIGNED_BYTE,e):ge.texImage2D(ge.TEXTURE_2D,0,this.format,y,I,0,this.format,ge.UNSIGNED_BYTE,e.data);else{var tt=c||{x:0,y:0},Rt=tt.x,Ft=tt.y;e instanceof Rn||e instanceof Gn||e instanceof ti||e instanceof ii||b&&e instanceof b?ge.texSubImage2D(ge.TEXTURE_2D,0,Rt,Ft,ge.RGBA,ge.UNSIGNED_BYTE,e):ge.texSubImage2D(ge.TEXTURE_2D,0,Rt,Ft,y,I,ge.RGBA,ge.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ge.generateMipmap(ge.TEXTURE_2D)},M.prototype.bind=function(e,i,c){var y=this.context.gl;y.bindTexture(y.TEXTURE_2D,this.texture),c!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=y.LINEAR),e!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,e),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,c||e),this.filter=e),i!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,i),this.wrap=i)},M.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},M.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var D=function(e){var i=this;this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};D.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},D.prototype.remove=function(){delete this._channel,this._callback=function(){}};var P=function(e,i,c){this.target=e,this.parent=i,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},wt(["receive","process"],this),this.invoker=new D(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=he()?e:O};function V(e,i,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[e*y-2*Math.PI*6378137/2,i*y-2*Math.PI*6378137/2]}P.prototype.send=function(e,i,c,y,I){var H=this;I===void 0&&(I=!1);var Q=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[Q]=c);var ge=ze(this.globalScope)?void 0:[];return this.target.postMessage({id:Q,type:e,hasCallback:!!c,targetMapId:y,mustQueue:I,sourceMapId:this.mapId,data:Vl(i,ge)},ge),{cancel:function(){c&&delete H.callbacks[Q],H.target.postMessage({id:Q,type:"<cancel>",targetMapId:y,sourceMapId:H.mapId})}}},P.prototype.receive=function(e){var i=e.data,c=i.id;if(c&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[c];var y=this.cancelCallbacks[c];delete this.cancelCallbacks[c],y&&y()}else he()||i.mustQueue?(this.tasks[c]=i,this.taskQueue.push(c),this.invoker.trigger()):this.processTask(c,i)},P.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),i=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(e,i)}},P.prototype.processTask=function(e,i){var c=this;if(i.type==="<response>"){var y=this.callbacks[e];delete this.callbacks[e],y&&(i.error?y(Ll(i.error)):y(null,Ll(i.data)))}else{var I=!1,H=ze(this.globalScope)?void 0:[],Q=i.hasCallback?function(Ft,Jt){I=!0,delete c.cancelCallbacks[e],c.target.postMessage({id:e,type:"<response>",sourceMapId:c.mapId,error:Ft?Vl(Ft):null,data:Vl(Jt,H)},H)}:function(Ft){I=!0},ge=null,tt=Ll(i.data);if(this.parent[i.type])ge=this.parent[i.type](i.sourceMapId,tt,Q);else if(this.parent.getWorkerSource){var Rt=i.type.split(".");ge=this.parent.getWorkerSource(i.sourceMapId,Rt[0],tt.source)[Rt[1]](tt,Q)}else Q(new Error("Could not find function "+i.type));!I&&ge&&ge.cancel&&(this.cancelCallbacks[e]=ge.cancel)}},P.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var q=function(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};q.prototype.setNorthEast=function(e){return this._ne=e instanceof be?new be(e.lng,e.lat):be.convert(e),this},q.prototype.setSouthWest=function(e){return this._sw=e instanceof be?new be(e.lng,e.lat):be.convert(e),this},q.prototype.extend=function(e){var i,c,y=this._sw,I=this._ne;if(e instanceof be)i=e,c=e;else{if(!(e instanceof q))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(q.convert(e)):this.extend(be.convert(e)):this;if(c=e._ne,!(i=e._sw)||!c)return this}return y||I?(y.lng=Math.min(i.lng,y.lng),y.lat=Math.min(i.lat,y.lat),I.lng=Math.max(c.lng,I.lng),I.lat=Math.max(c.lat,I.lat)):(this._sw=new be(i.lng,i.lat),this._ne=new be(c.lng,c.lat)),this},q.prototype.getCenter=function(){return new be((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},q.prototype.getSouthWest=function(){return this._sw},q.prototype.getNorthEast=function(){return this._ne},q.prototype.getNorthWest=function(){return new be(this.getWest(),this.getNorth())},q.prototype.getSouthEast=function(){return new be(this.getEast(),this.getSouth())},q.prototype.getWest=function(){return this._sw.lng},q.prototype.getSouth=function(){return this._sw.lat},q.prototype.getEast=function(){return this._ne.lng},q.prototype.getNorth=function(){return this._ne.lat},q.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},q.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},q.prototype.isEmpty=function(){return!(this._sw&&this._ne)},q.prototype.contains=function(e){var i=be.convert(e),c=i.lng,y=i.lat,I=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(I=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&I},q.convert=function(e){return!e||e instanceof q?e:new q(e)};var be=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid LngLat object: ("+e+", "+i+")");if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};be.prototype.wrap=function(){return new be(pe(this.lng,-180,180),this.lat)},be.prototype.toArray=function(){return[this.lng,this.lat]},be.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},be.prototype.distanceTo=function(e){var i=Math.PI/180,c=this.lat*i,y=e.lat*i,I=Math.sin(c)*Math.sin(y)+Math.cos(c)*Math.cos(y)*Math.cos((e.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(I,1))},be.prototype.toBounds=function(e){e===void 0&&(e=0);var i=360*e/40075017,c=i/Math.cos(Math.PI/180*this.lat);return new q(new be(this.lng-c,this.lat-i),new be(this.lng+c,this.lat+i))},be.convert=function(e){if(e instanceof be)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new be(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new be(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $e=2*Math.PI*63710088e-1;function _t(e){return $e*Math.cos(e*Math.PI/180)}function Gt(e){return(180+e)/360}function yr(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function $r(e,i){return e/_t(i)}function an(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Un=function(e,i,c){c===void 0&&(c=0),this.x=+e,this.y=+i,this.z=+c};Un.fromLngLat=function(e,i){i===void 0&&(i=0);var c=be.convert(e);return new Un(Gt(c.lng),yr(c.lat),$r(i,c.lat))},Un.prototype.toLngLat=function(){return new be(360*this.x-180,an(this.y))},Un.prototype.toAltitude=function(){return this.z*_t(an(this.y))},Un.prototype.meterInMercatorCoordinateUnits=function(){return 1/$e*(e=an(this.y),1/Math.cos(e*Math.PI/180));var e};var ei=function(e,i,c){this.z=e,this.x=i,this.y=c,this.key=Xn(0,e,e,i,c)};ei.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ei.prototype.url=function(e,i){var c,y,I,H,Q,ge=(y=this.y,I=this.z,H=V(256*(c=this.x),256*(y=Math.pow(2,I)-y-1),I),Q=V(256*(c+1),256*(y+1),I),H[0]+","+H[1]+","+Q[0]+","+Q[1]),tt=function(Rt,Ft,Jt){for(var dr,Cr="",tn=Rt;tn>0;tn--)Cr+=(Ft&(dr=1<<tn-1)?1:0)+(Jt&dr?2:0);return Cr}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",tt).replace("{bbox-epsg-3857}",ge)},ei.prototype.getTilePoint=function(e){var i=Math.pow(2,this.z);return new L(8192*(e.x*i-this.x),8192*(e.y*i-this.y))},ei.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Jn=function(e,i){this.wrap=e,this.canonical=i,this.key=Xn(e,i.z,i.z,i.x,i.y)},Sn=function(e,i,c,y,I){this.overscaledZ=e,this.wrap=i,this.canonical=new ei(c,+y,+I),this.key=Xn(i,e,c,y,I)};function Xn(e,i,c,y,I){(e*=2)<0&&(e=-1*e-1);var H=1<<c;return(H*H*e+H*I+y).toString(36)+c.toString(36)+i.toString(36)}Sn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Sn.prototype.scaledTo=function(e){var i=this.canonical.z-e;return e>this.canonical.z?new Sn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sn(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)},Sn.prototype.calculateScaledKey=function(e,i){var c=this.canonical.z-e;return e>this.canonical.z?Xn(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y):Xn(this.wrap*+i,e,e,this.canonical.x>>c,this.canonical.y>>c)},Sn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var i=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i},Sn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Sn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,c=2*this.canonical.x,y=2*this.canonical.y;return[new Sn(i,this.wrap,i,c,y),new Sn(i,this.wrap,i,c+1,y),new Sn(i,this.wrap,i,c,y+1),new Sn(i,this.wrap,i,c+1,y+1)]},Sn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Sn.prototype.wrapped=function(){return new Sn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Sn.prototype.unwrapTo=function(e){return new Sn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Sn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Sn.prototype.toUnwrapped=function(){return new Jn(this.wrap,this.canonical)},Sn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Sn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Un(e.x-this.wrap,e.y))},ao("CanonicalTileID",ei),ao("OverscaledTileID",Sn,{omit:["posMatrix"]});var ai=function(e,i,c){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return ht('"'+c+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var y=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=c||"mapbox";for(var I=0;I<y;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(y,I)]=this.data[this._idx(y-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,y)]=this.data[this._idx(I,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)]};ai.prototype.get=function(e,i){var c=new Uint8Array(this.data.buffer),y=4*this._idx(e,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(c[y],c[y+1],c[y+2])},ai.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ai.prototype._idx=function(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)},ai.prototype._unpackMapbox=function(e,i,c){return(256*e*256+256*i+c)/10-1e4},ai.prototype._unpackTerrarium=function(e,i,c){return 256*e+i+c/256-32768},ai.prototype.getPixels=function(){return new mt({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ai.prototype.backfillBorder=function(e,i,c){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var y=i*this.dim,I=i*this.dim+this.dim,H=c*this.dim,Q=c*this.dim+this.dim;switch(i){case-1:y=I-1;break;case 1:I=y+1}switch(c){case-1:H=Q-1;break;case 1:Q=H+1}for(var ge=-i*this.dim,tt=-c*this.dim,Rt=H;Rt<Q;Rt++)for(var Ft=y;Ft<I;Ft++)this.data[this._idx(Ft,Rt)]=e.data[this._idx(Ft+ge,Rt+tt)]},ao("DEMData",ai);var ln=function(e){this._stringToNumber={},this._numberToString=[];for(var i=0;i<e.length;i++){var c=e[i];this._stringToNumber[c]=i,this._numberToString[i]=c}};ln.prototype.encode=function(e){return this._stringToNumber[e]},ln.prototype.decode=function(e){return this._numberToString[e]};var pi=function(e,i,c,y,I){this.type="Feature",this._vectorTileFeature=e,e._z=i,e._x=c,e._y=y,this.properties=e.properties,this.id=I},gi={geometry:{configurable:!0}};gi.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},gi.geometry.set=function(e){this._geometry=e},pi.prototype.toJSON=function(){var e={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(e[i]=this[i]);return e},Object.defineProperties(pi.prototype,gi);var Li=function(){this.state={},this.stateChanges={},this.deletedStates={}};Li.prototype.updateState=function(e,i,c){var y=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][y]=this.stateChanges[e][y]||{},fe(this.stateChanges[e][y],c),this.deletedStates[e]===null)for(var I in this.deletedStates[e]={},this.state[e])I!==y&&(this.deletedStates[e][I]=null);else if(this.deletedStates[e]&&this.deletedStates[e][y]===null)for(var H in this.deletedStates[e][y]={},this.state[e][y])c[H]||(this.deletedStates[e][y][H]=null);else for(var Q in c)this.deletedStates[e]&&this.deletedStates[e][y]&&this.deletedStates[e][y][Q]===null&&delete this.deletedStates[e][y][Q]},Li.prototype.removeFeatureState=function(e,i,c){if(this.deletedStates[e]!==null){var y=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&i!==void 0)this.deletedStates[e][y]!==null&&(this.deletedStates[e][y]=this.deletedStates[e][y]||{},this.deletedStates[e][y][c]=null);else if(i!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][y])for(c in this.deletedStates[e][y]={},this.stateChanges[e][y])this.deletedStates[e][y][c]=null;else this.deletedStates[e][y]=null;else this.deletedStates[e]=null}},Li.prototype.getState=function(e,i){var c=String(i),y=fe({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var I=this.deletedStates[e][i];if(I===null)return{};for(var H in I)delete y[H]}return y},Li.prototype.initializeTileState=function(e,i){e.setFeatureState(this.state,i)},Li.prototype.coalesceChanges=function(e,i){var c={};for(var y in this.stateChanges){this.state[y]=this.state[y]||{};var I={};for(var H in this.stateChanges[y])this.state[y][H]||(this.state[y][H]={}),fe(this.state[y][H],this.stateChanges[y][H]),I[H]=this.state[y][H];c[y]=I}for(var Q in this.deletedStates){this.state[Q]=this.state[Q]||{};var ge={};if(this.deletedStates[Q]===null)for(var tt in this.state[Q])ge[tt]={},this.state[Q][tt]={};else for(var Rt in this.deletedStates[Q]){if(this.deletedStates[Q][Rt]===null)this.state[Q][Rt]={};else for(var Ft=0,Jt=Object.keys(this.deletedStates[Q][Rt]);Ft<Jt.length;Ft+=1)delete this.state[Q][Rt][Jt[Ft]];ge[Rt]=this.state[Q][Rt]}c[Q]=c[Q]||{},fe(c[Q],ge)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(var dr in e)e[dr].setFeatureState(c,i)};var Ki=function(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Rl(8192,16,0),this.grid3D=new Rl(8192,16,0),this.featureIndexArray=new fr,this.promoteId=i};function ua(e,i,c,y,I){return qe(e,function(H,Q){var ge=i instanceof fc?i.get(Q):null;return ge&&ge.evaluate?ge.evaluate(c,y,I):ge})}function la(e){for(var i=1/0,c=1/0,y=-1/0,I=-1/0,H=0,Q=e;H<Q.length;H+=1){var ge=Q[H];i=Math.min(i,ge.x),c=Math.min(c,ge.y),y=Math.max(y,ge.x),I=Math.max(I,ge.y)}return{minX:i,minY:c,maxX:y,maxY:I}}function Lo(e,i){return i-e}Ki.prototype.insert=function(e,i,c,y,I,H){var Q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,y,I);for(var ge=H?this.grid3D:this.grid,tt=0;tt<i.length;tt++){for(var Rt=i[tt],Ft=[1/0,1/0,-1/0,-1/0],Jt=0;Jt<Rt.length;Jt++){var dr=Rt[Jt];Ft[0]=Math.min(Ft[0],dr.x),Ft[1]=Math.min(Ft[1],dr.y),Ft[2]=Math.max(Ft[2],dr.x),Ft[3]=Math.max(Ft[3],dr.y)}Ft[0]<8192&&Ft[1]<8192&&Ft[2]>=0&&Ft[3]>=0&&ge.insert(Q,Ft[0],Ft[1],Ft[2],Ft[3])}},Ki.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new cu.VectorTile(new wd(this.rawTileData)).layers,this.sourceLayerCoder=new ln(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ki.prototype.query=function(e,i,c,y){var I=this;this.loadVTLayers();for(var H=e.params||{},Q=8192/e.tileSize/e.scale,ge=su(H.filter),tt=e.queryGeometry,Rt=e.queryPadding*Q,Ft=la(tt),Jt=this.grid.query(Ft.minX-Rt,Ft.minY-Rt,Ft.maxX+Rt,Ft.maxY+Rt),dr=la(e.cameraQueryGeometry),Cr=this.grid3D.query(dr.minX-Rt,dr.minY-Rt,dr.maxX+Rt,dr.maxY+Rt,function(_i,xi,Ii,ta){return function(Qi,ja,qn,ca,ra){for(var bo=0,Eo=Qi;bo<Eo.length;bo+=1){var qa=Eo[bo];if(ja<=qa.x&&qn<=qa.y&&ca>=qa.x&&ra>=qa.y)return!0}var Ss=[new L(ja,qn),new L(ja,ra),new L(ca,ra),new L(ca,qn)];if(Qi.length>2){for(var Is=0,pu=Ss;Is<pu.length;Is+=1)if(pf(Qi,pu[Is]))return!0}for(var es=0;es<Qi.length-1;es++)if(oh(Qi[es],Qi[es+1],Ss))return!0;return!1}(e.cameraQueryGeometry,_i-Rt,xi-Rt,Ii+Rt,ta+Rt)}),tn=0,rn=Cr;tn<rn.length;tn+=1)Jt.push(rn[tn]);Jt.sort(Lo);for(var yn,vn={},$n=function(_i){var xi=Jt[_i];if(xi!==yn){yn=xi;var Ii=I.featureIndexArray.get(xi),ta=null;I.loadMatchingFeature(vn,Ii.bucketIndex,Ii.sourceLayerIndex,Ii.featureIndex,ge,H.layers,H.availableImages,i,c,y,function(Qi,ja,qn){return ta||(ta=Ju(Qi)),ja.queryIntersectsFeature(tt,Qi,qn,ta,I.z,e.transform,Q,e.pixelPosMatrix)})}},ri=0;ri<Jt.length;ri++)$n(ri);return vn},Ki.prototype.loadMatchingFeature=function(e,i,c,y,I,H,Q,ge,tt,Rt,Ft){var Jt=this.bucketLayerIDs[i];if(!H||function(Qi,ja){for(var qn=0;qn<Qi.length;qn++)if(ja.indexOf(Qi[qn])>=0)return!0;return!1}(H,Jt)){var dr=this.sourceLayerCoder.decode(c),Cr=this.vtLayers[dr].feature(y);if(I.needGeometry){var tn=qu(Cr,!0);if(!I.filter(new Ks(this.tileID.overscaledZ),tn,this.tileID.canonical))return}else if(!I.filter(new Ks(this.tileID.overscaledZ),Cr))return;for(var rn=this.getId(Cr,dr),yn=0;yn<Jt.length;yn++){var vn=Jt[yn];if(!(H&&H.indexOf(vn)<0)){var $n=ge[vn];if($n){var ri={};rn!==void 0&&Rt&&(ri=Rt.getState($n.sourceLayer||"_geojsonTileLayer",rn));var _i=fe({},tt[vn]);_i.paint=ua(_i.paint,$n.paint,Cr,ri,Q),_i.layout=ua(_i.layout,$n.layout,Cr,ri,Q);var xi=!Ft||Ft(Cr,$n,ri);if(xi){var Ii=new pi(Cr,this.z,this.x,this.y,rn);Ii.layer=_i;var ta=e[vn];ta===void 0&&(ta=e[vn]=[]),ta.push({featureIndex:y,feature:Ii,intersectionZ:xi})}}}}}},Ki.prototype.lookupSymbolFeatures=function(e,i,c,y,I,H,Q,ge){var tt={};this.loadVTLayers();for(var Rt=su(I),Ft=0,Jt=e;Ft<Jt.length;Ft+=1)this.loadMatchingFeature(tt,c,y,Jt[Ft],Rt,H,Q,ge,i);return tt},Ki.prototype.hasLayer=function(e){for(var i=0,c=this.bucketLayerIDs;i<c.length;i+=1)for(var y=0,I=c[i];y<I.length;y+=1)if(e===I[y])return!0;return!1},Ki.prototype.getId=function(e,i){var c=e.id;return this.promoteId&&typeof(c=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(c=Number(c)),c},ao("FeatureIndex",Ki,{omit:["rawTileData","sourceLayerCoder"]});var Fa=function(e,i){this.tileID=e,this.uid=je(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Fa.prototype.registerFadeDuration=function(e){var i=e+this.timeAdded;i<we.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},Fa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Fa.prototype.loadVectorData=function(e,i,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var y in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(Rt,Ft){var Jt={};if(!Ft)return Jt;for(var dr=function(){var rn=tn[Cr],yn=rn.layerIds.map(function(ri){return Ft.getLayer(ri)}).filter(Boolean);if(yn.length!==0){rn.layers=yn,rn.stateDependentLayerIds&&(rn.stateDependentLayers=rn.stateDependentLayerIds.map(function(ri){return yn.filter(function(_i){return _i.id===ri})[0]}));for(var vn=0,$n=yn;vn<$n.length;vn+=1)Jt[$n[vn].id]=rn}},Cr=0,tn=Rt;Cr<tn.length;Cr+=1)dr();return Jt}(e.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var I=this.buckets[y];if(I instanceof Tt){if(this.hasSymbolBuckets=!0,!c)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var H in this.buckets){var Q=this.buckets[H];if(Q instanceof Tt&&Q.hasRTLText){this.hasRTLText=!0,gu.isLoading()||gu.isLoaded()||Vh()!=="deferred"||Ql();break}}for(var ge in this.queryPadding=0,this.buckets){var tt=this.buckets[ge];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(ge).queryRadius(tt))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new g},Fa.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Fa.prototype.getBucket=function(e){return this.buckets[e.id]},Fa.prototype.upload=function(e){for(var i in this.buckets){var c=this.buckets[i];c.uploadPending()&&c.upload(e)}var y=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new M(e,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new M(e,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)},Fa.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Fa.prototype.queryRenderedFeatures=function(e,i,c,y,I,H,Q,ge,tt,Rt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:I,scale:H,tileSize:this.tileSize,pixelPosMatrix:Rt,transform:ge,params:Q,queryPadding:this.queryPadding*tt},e,i,c):{}},Fa.prototype.querySourceFeatures=function(e,i){var c=this.latestFeatureIndex;if(c&&c.rawTileData){var y=c.loadVTLayers(),I=i?i.sourceLayer:"",H=y._geojsonTileLayer||y[I];if(H)for(var Q=su(i&&i.filter),ge=this.tileID.canonical,tt=ge.z,Rt=ge.x,Ft=ge.y,Jt={z:tt,x:Rt,y:Ft},dr=0;dr<H.length;dr++){var Cr=H.feature(dr);if(Q.needGeometry){var tn=qu(Cr,!0);if(!Q.filter(new Ks(this.tileID.overscaledZ),tn,this.tileID.canonical))continue}else if(!Q.filter(new Ks(this.tileID.overscaledZ),Cr))continue;var rn=c.getId(Cr,I),yn=new pi(Cr,tt,Rt,Ft,rn);yn.tile=Jt,e.push(yn)}}},Fa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Fa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Fa.prototype.setExpiryData=function(e){var i=this.expirationTime;if(e.cacheControl){var c=Ve(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var y=Date.now(),I=!1;if(this.expirationTime>y)I=!1;else if(i)if(this.expirationTime<i)I=!0;else{var H=this.expirationTime-i;H?this.expirationTime=y+Math.max(H,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Fa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Fa.prototype.setFeatureState=function(e,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var c=this.latestFeatureIndex.loadVTLayers();for(var y in this.buckets)if(i.style.hasLayer(y)){var I=this.buckets[y],H=I.layers[0].sourceLayer||"_geojsonTileLayer",Q=c[H],ge=e[H];if(Q&&ge&&Object.keys(ge).length!==0){I.update(ge,Q,this.imageAtlas&&this.imageAtlas.patternPositions||{});var tt=i&&i.style&&i.style.getLayer(y);tt&&(this.queryPadding=Math.max(this.queryPadding,tt.queryRadius(I)))}}}},Fa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Fa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<we.now()},Fa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Fa.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=we.now()+e},Fa.prototype.setDependencies=function(e,i){for(var c={},y=0,I=i;y<I.length;y+=1)c[I[y]]=!0;this.dependencies[e]=c},Fa.prototype.hasDependency=function(e,i){for(var c=0,y=e;c<y.length;c+=1){var I=this.dependencies[y[c]];if(I){for(var H=0,Q=i;H<Q.length;H+=1)if(I[Q[H]])return!0}}return!1};var go=O.performance,Qs=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},go.mark(this._marks.start)};Qs.prototype.finish=function(){go.mark(this._marks.end);var e=go.getEntriesByName(this._marks.measure);return e.length===0&&(go.measure(this._marks.measure,this._marks.start,this._marks.end),e=go.getEntriesByName(this._marks.measure),go.clearMarks(this._marks.start),go.clearMarks(this._marks.end),go.clearMeasures(this._marks.measure)),e},l.Actor=P,l.AlphaImage=xt,l.CanonicalTileID=ei,l.CollisionBoxArray=g,l.Color=ma,l.DEMData=ai,l.DataConstantProperty=oo,l.DictionaryCoder=ln,l.EXTENT=8192,l.ErrorEvent=Ar,l.EvaluationParameters=Ks,l.Event=cr,l.Evented=Lr,l.FeatureIndex=Ki,l.FillBucket=An,l.FillExtrusionBucket=ll,l.ImageAtlas=La,l.ImagePosition=ui,l.LineBucket=Zu,l.LngLat=be,l.LngLatBounds=q,l.MercatorCoordinate=Un,l.ONE_EM=24,l.OverscaledTileID=Sn,l.Point=L,l.Point$1=L,l.Properties=mu,l.Protobuf=wd,l.RGBAImage=mt,l.RequestManager=Et,l.RequestPerformance=Qs,l.ResourceType=Pr,l.SegmentVector=Dr,l.SourceFeatureState=Li,l.StructArrayLayout1ui2=sd,l.StructArrayLayout2f1f2i16=zc,l.StructArrayLayout2i4=ph,l.StructArrayLayout3ui6=rc,l.StructArrayLayout4i8=Cc,l.SymbolBucket=Tt,l.Texture=M,l.Tile=Fa,l.Transitionable=eu,l.Uniform1f=ka,l.Uniform1i=na,l.Uniform2f=Na,l.Uniform3f=po,l.Uniform4f=No,l.UniformColor=is,l.UniformMatrix4f=Ls,l.UnwrappedTileID=Jn,l.ValidationError=Ge,l.WritingMode=Ya,l.ZoomHistory=jh,l.add=function(e,i,c){return e[0]=i[0]+c[0],e[1]=i[1]+c[1],e[2]=i[2]+c[2],e},l.addDynamicAttributes=Fe,l.asyncAll=function(e,i,c){if(!e.length)return c(null,[]);var y=e.length,I=new Array(e.length),H=null;e.forEach(function(Q,ge){i(Q,function(tt,Rt){tt&&(H=tt),I[ge]=Rt,--y==0&&c(H,I)})})},l.bezier=ue,l.bindAll=wt,l.browser=we,l.cacheEntryPossiblyAdded=function(e){++br>ir&&(e.getActor().send("enforceCacheSizeLimit",Qt),br=0)},l.clamp=re,l.clearTileCache=function(e){var i=O.caches.delete("mapbox-tiles");e&&i.catch(e).then(function(){return e()})},l.clipLine=Cl,l.clone=function(e){var i=new Du(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},l.clone$1=_e,l.clone$2=function(e){var i=new Du(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i},l.collisionCircleLayout=ld,l.config=At,l.create=function(){var e=new Du(16);return Du!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},l.create$1=function(){var e=new Du(9);return Du!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},l.create$2=function(){var e=new Du(4);return Du!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},l.createCommonjsModule=$,l.createExpression=Af,l.createLayout=bl,l.createStyleLayer=function(e){return e.type==="custom"?new xn(e):new In[e.type](e)},l.cross=function(e,i,c){var y=i[0],I=i[1],H=i[2],Q=c[0],ge=c[1],tt=c[2];return e[0]=I*tt-H*ge,e[1]=H*Q-y*tt,e[2]=y*ge-I*Q,e},l.deepEqual=function e(i,c){if(Array.isArray(i)){if(!Array.isArray(c)||i.length!==c.length)return!1;for(var y=0;y<i.length;y++)if(!e(i[y],c[y]))return!1;return!0}if(typeof i=="object"&&i!==null&&c!==null){if(typeof c!="object"||Object.keys(i).length!==Object.keys(c).length)return!1;for(var I in i)if(!e(i[I],c[I]))return!1;return!0}return i===c},l.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]},l.dot$1=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]},l.ease=Ae,l.emitValidationErrors=Ul,l.endsWith=se,l.enforceCacheSizeLimit=function(e){Er(),j&&j.then(function(i){i.keys().then(function(c){for(var y=0;y<c.length-e;y++)i.delete(c[y])})})},l.evaluateSizeForFeature=hs,l.evaluateSizeForZoom=zs,l.evaluateVariableOffset=pd,l.evented=Sc,l.extend=fe,l.featureFilter=su,l.filterObject=me,l.fromRotation=function(e,i){var c=Math.sin(i),y=Math.cos(i);return e[0]=y,e[1]=c,e[2]=0,e[3]=-c,e[4]=y,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},l.getAnchorAlignment=Ia,l.getAnchorJustification=w,l.getArrayBuffer=X,l.getImage=xe,l.getJSON=function(e,i){return Or(fe(e,{type:"json"}),i)},l.getRTLTextPluginStatus=Vh,l.getReferrer=kr,l.getVideo=function(e,i){var c,y,I=O.document.createElement("video");I.muted=!0,I.onloadstart=function(){i(null,I)};for(var H=0;H<e.length;H++){var Q=O.document.createElement("source");c=e[H],y=void 0,(y=O.document.createElement("a")).href=c,(y.protocol!==O.document.location.protocol||y.host!==O.document.location.host)&&(I.crossOrigin="Anonymous"),Q.src=e[H],I.appendChild(Q)}return{cancel:function(){}}},l.identity=yu,l.invert=function(e,i){var c=i[0],y=i[1],I=i[2],H=i[3],Q=i[4],ge=i[5],tt=i[6],Rt=i[7],Ft=i[8],Jt=i[9],dr=i[10],Cr=i[11],tn=i[12],rn=i[13],yn=i[14],vn=i[15],$n=c*ge-y*Q,ri=c*tt-I*Q,_i=c*Rt-H*Q,xi=y*tt-I*ge,Ii=y*Rt-H*ge,ta=I*Rt-H*tt,Qi=Ft*rn-Jt*tn,ja=Ft*yn-dr*tn,qn=Ft*vn-Cr*tn,ca=Jt*yn-dr*rn,ra=Jt*vn-Cr*rn,bo=dr*vn-Cr*yn,Eo=$n*bo-ri*ra+_i*ca+xi*qn-Ii*ja+ta*Qi;return Eo?(e[0]=(ge*bo-tt*ra+Rt*ca)*(Eo=1/Eo),e[1]=(I*ra-y*bo-H*ca)*Eo,e[2]=(rn*ta-yn*Ii+vn*xi)*Eo,e[3]=(dr*Ii-Jt*ta-Cr*xi)*Eo,e[4]=(tt*qn-Q*bo-Rt*ja)*Eo,e[5]=(c*bo-I*qn+H*ja)*Eo,e[6]=(yn*_i-tn*ta-vn*ri)*Eo,e[7]=(Ft*ta-dr*_i+Cr*ri)*Eo,e[8]=(Q*ra-ge*qn+Rt*Qi)*Eo,e[9]=(y*qn-c*ra-H*Qi)*Eo,e[10]=(tn*Ii-rn*_i+vn*$n)*Eo,e[11]=(Jt*_i-Ft*Ii-Cr*$n)*Eo,e[12]=(ge*ja-Q*ca-tt*Qi)*Eo,e[13]=(c*ca-y*ja+I*Qi)*Eo,e[14]=(rn*ri-tn*xi-yn*$n)*Eo,e[15]=(Ft*xi-Jt*ri+dr*$n)*Eo,e):null},l.isChar=Qa,l.isMapboxURL=Zt,l.keysDifference=function(e,i){var c=[];for(var y in e)y in i||c.push(y);return c},l.makeRequest=Or,l.mapObject=qe,l.mercatorXfromLng=Gt,l.mercatorYfromLat=yr,l.mercatorZfromAltitude=$r,l.mul=vh,l.multiply=qc,l.mvt=cu,l.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},l.normalize=function(e,i){var c=i[0],y=i[1],I=i[2],H=c*c+y*y+I*I;return H>0&&(H=1/Math.sqrt(H)),e[0]=i[0]*H,e[1]=i[1]*H,e[2]=i[2]*H,e},l.number=Rr,l.offscreenCanvasSupported=Nt,l.ortho=function(e,i,c,y,I,H,Q){var ge=1/(i-c),tt=1/(y-I),Rt=1/(H-Q);return e[0]=-2*ge,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*tt,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*Rt,e[11]=0,e[12]=(i+c)*ge,e[13]=(I+y)*tt,e[14]=(Q+H)*Rt,e[15]=1,e},l.parseGlyphPBF=function(e){return new wd(e).readFields(Ha,[])},l.pbf=wd,l.performSymbolLayout=function(e,i,c,y,I,H,Q){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var ge=e.layers[0].layout,tt=e.layers[0]._unevaluatedLayout._values,Rt={};if(e.textSizeData.kind==="composite"){var Ft=e.textSizeData,Jt=Ft.maxZoom;Rt.compositeTextSizes=[tt["text-size"].possiblyEvaluate(new Ks(Ft.minZoom),Q),tt["text-size"].possiblyEvaluate(new Ks(Jt),Q)]}if(e.iconSizeData.kind==="composite"){var dr=e.iconSizeData,Cr=dr.maxZoom;Rt.compositeIconSizes=[tt["icon-size"].possiblyEvaluate(new Ks(dr.minZoom),Q),tt["icon-size"].possiblyEvaluate(new Ks(Cr),Q)]}Rt.layoutTextSize=tt["text-size"].possiblyEvaluate(new Ks(e.zoom+1),Q),Rt.layoutIconSize=tt["icon-size"].possiblyEvaluate(new Ks(e.zoom+1),Q),Rt.textMaxSize=tt["text-size"].possiblyEvaluate(new Ks(18));for(var tn=24*ge.get("text-line-height"),rn=ge.get("text-rotation-alignment")==="map"&&ge.get("symbol-placement")!=="point",yn=ge.get("text-keep-upright"),vn=ge.get("text-size"),$n=function(){var xi=_i[ri],Ii=ge.get("text-font").evaluate(xi,{},Q).join(","),ta=vn.evaluate(xi,{},Q),Qi=Rt.layoutTextSize.evaluate(xi,{},Q),ja=Rt.layoutIconSize.evaluate(xi,{},Q),qn={horizontal:{},vertical:void 0},ca=xi.text,ra=[0,0];if(ca){var bo=ca.toString(),Eo=24*ge.get("text-letter-spacing").evaluate(xi,{},Q),qa=function(Lu){for(var cl=0,sl=Lu;cl<sl.length;cl+=1)if(Wu=sl[cl].charCodeAt(0),Qa.Arabic(Wu)||Qa["Arabic Supplement"](Wu)||Qa["Arabic Extended-A"](Wu)||Qa["Arabic Presentation Forms-A"](Wu)||Qa["Arabic Presentation Forms-B"](Wu))return!1;var Wu;return!0}(bo)?Eo:0,Ss=ge.get("text-anchor").evaluate(xi,{},Q),Is=ge.get("text-variable-anchor");if(!Is){var pu=ge.get("text-radial-offset").evaluate(xi,{},Q);ra=pu?pd(Ss,[24*pu,nf]):ge.get("text-offset").evaluate(xi,{},Q).map(function(Lu){return 24*Lu})}var es=rn?"center":ge.get("text-justify").evaluate(xi,{},Q),$u=ge.get("symbol-placement"),hl=$u==="point"?24*ge.get("text-max-width").evaluate(xi,{},Q):0,Nl=function(){e.allowVerticalPlacement&&Yl(bo)&&(qn.vertical=xo(ca,i,c,I,Ii,hl,tn,Ss,"left",qa,ra,Ya.vertical,!0,$u,Qi,ta))};if(!rn&&Is){for(var el=es==="auto"?Is.map(function(Lu){return w(Lu)}):[es],af=!1,gf=0;gf<el.length;gf++){var zf=el[gf];if(!qn.horizontal[zf])if(af)qn.horizontal[zf]=qn.horizontal[0];else{var Th=xo(ca,i,c,I,Ii,hl,tn,"center",zf,qa,ra,Ya.horizontal,!1,$u,Qi,ta);Th&&(qn.horizontal[zf]=Th,af=Th.positionedLines.length===1)}}Nl()}else{es==="auto"&&(es=w(Ss));var ed=xo(ca,i,c,I,Ii,hl,tn,Ss,es,qa,ra,Ya.horizontal,!1,$u,Qi,ta);ed&&(qn.horizontal[es]=ed),Nl(),Yl(bo)&&rn&&yn&&(qn.vertical=xo(ca,i,c,I,Ii,hl,tn,Ss,es,qa,ra,Ya.vertical,!1,$u,Qi,ta))}}var Zf=void 0,iu=!1;if(xi.icon&&xi.icon.name){var Uf=y[xi.icon.name];Uf&&(Zf=function(Lu,cl,sl){var Wu=Ia(sl),td=cl[0]-Lu.displaySize[0]*Wu.horizontalAlign,Jf=cl[1]-Lu.displaySize[1]*Wu.verticalAlign;return{image:Lu,top:Jf,bottom:Jf+Lu.displaySize[1],left:td,right:td+Lu.displaySize[0]}}(I[xi.icon.name],ge.get("icon-offset").evaluate(xi,{},Q),ge.get("icon-anchor").evaluate(xi,{},Q)),iu=Uf.sdf,e.sdfIcons===void 0?e.sdfIcons=Uf.sdf:e.sdfIcons!==Uf.sdf&&ht("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Uf.pixelRatio!==e.pixelRatio||ge.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var xh=Ce(qn.horizontal)||qn.vertical;e.iconsInText=!!xh&&xh.iconsInText,(xh||Zf)&&function(Lu,cl,sl,Wu,td,Jf,Rc,$f,rd,wl,Mh){var fd=Jf.textMaxSize.evaluate(cl,{});fd===void 0&&(fd=Rc);var Wd,oc=Lu.layers[0].layout,Ou=oc.get("icon-offset").evaluate(cl,{},Mh),Od=Ce(sl.horizontal),Wh=Rc/24,yf=Lu.tilePixelRatio*Wh,Ep=Lu.tilePixelRatio*fd/24,bd=Lu.tilePixelRatio*$f,ml=Lu.tilePixelRatio*oc.get("symbol-spacing"),vc=oc.get("text-padding")*Lu.tilePixelRatio,vd=oc.get("icon-padding")*Lu.tilePixelRatio,Ad=oc.get("text-max-angle")/180*Math.PI,Fd=oc.get("text-rotation-alignment")==="map"&&oc.get("symbol-placement")!=="point",yp=oc.get("icon-rotation-alignment")==="map"&&oc.get("symbol-placement")!=="point",Ph=oc.get("symbol-placement"),Ed=ml/2,Bd=oc.get("icon-text-fit");Wu&&Bd!=="none"&&(Lu.allowVerticalPlacement&&sl.vertical&&(Wd=Bs(Wu,sl.vertical,Bd,oc.get("icon-text-fit-padding"),Ou,Wh)),Od&&(Wu=Bs(Wu,Od,Bd,oc.get("icon-text-fit-padding"),Ou,Wh)));var Jd=function(N0,qd){qd.x<0||qd.x>=8192||qd.y<0||qd.y>=8192||function(Js,np,Xd,ip,zv,of,Zp,ap,Pp,cv,fv,hv,r0,Zv,Wp,z0,n0,Z0,U0,dv,zd,pv,Uv,Cp,vv){var $v,bp,Op,ch,Xh,mv=Js.addToLineVertexArray(np,Xd),wm=0,$0=0,i0=0,jv=0,gv=-1,a0=-1,op={},o0=fn(""),s0=0,j0=0;if(ap._unevaluatedLayout.getValue("text-radial-offset")===void 0?(s0=($v=ap.layout.get("text-offset").evaluate(zd,{},Cp).map(function(Kd){return 24*Kd}))[0],j0=$v[1]):(s0=24*ap.layout.get("text-radial-offset").evaluate(zd,{},Cp),j0=nf),Js.allowVerticalPlacement&&ip.vertical){var Hv=ap.layout.get("text-rotate").evaluate(zd,{},Cp)+90;ch=new Cf(Pp,np,cv,fv,hv,ip.vertical,r0,Zv,Wp,Hv),Zp&&(Xh=new Cf(Pp,np,cv,fv,hv,Zp,n0,Z0,Wp,Hv))}if(zv){var yv=ap.layout.get("icon-rotate").evaluate(zd,{}),u0=ap.layout.get("icon-text-fit")!=="none",l0=rf(zv,yv,Uv,u0),c0=Zp?rf(Zp,yv,Uv,u0):void 0;Op=new Cf(Pp,np,cv,fv,hv,zv,n0,Z0,!1,yv),wm=4*l0.length;var H0=Js.iconSizeData,Ol=null;H0.kind==="source"?(Ol=[128*ap.layout.get("icon-size").evaluate(zd,{})])[0]>32640&&ht(Js.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):H0.kind==="composite"&&((Ol=[128*pv.compositeIconSizes[0].evaluate(zd,{},Cp),128*pv.compositeIconSizes[1].evaluate(zd,{},Cp)])[0]>32640||Ol[1]>32640)&&ht(Js.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Js.addSymbols(Js.icon,l0,Ol,dv,U0,zd,!1,np,mv.lineStartIndex,mv.lineLength,-1,Cp),gv=Js.icon.placedSymbolArray.length-1,c0&&($0=4*c0.length,Js.addSymbols(Js.icon,c0,Ol,dv,U0,zd,Ya.vertical,np,mv.lineStartIndex,mv.lineLength,-1,Cp),a0=Js.icon.placedSymbolArray.length-1)}for(var _v in ip.horizontal){var xv=ip.horizontal[_v];if(!bp){o0=fn(xv.text);var Xp=ap.layout.get("text-rotate").evaluate(zd,{},Cp);bp=new Cf(Pp,np,cv,fv,hv,xv,r0,Zv,Wp,Xp)}var Vv=xv.positionedLines.length===1;if(i0+=G(Js,np,xv,of,ap,Wp,zd,z0,mv,ip.vertical?Ya.horizontal:Ya.horizontalOnly,Vv?Object.keys(ip.horizontal):[_v],op,gv,pv,Cp),Vv)break}ip.vertical&&(jv+=G(Js,np,ip.vertical,of,ap,Wp,zd,z0,mv,Ya.vertical,["vertical"],op,a0,pv,Cp));var V0=bp?bp.boxStartIndex:Js.collisionBoxArray.length,f0=bp?bp.boxEndIndex:Js.collisionBoxArray.length,bv=ch?ch.boxStartIndex:Js.collisionBoxArray.length,h0=ch?ch.boxEndIndex:Js.collisionBoxArray.length,Ev=Op?Op.boxStartIndex:Js.collisionBoxArray.length,Up=Op?Op.boxEndIndex:Js.collisionBoxArray.length,Am=Xh?Xh.boxStartIndex:Js.collisionBoxArray.length,Tm=Xh?Xh.boxEndIndex:Js.collisionBoxArray.length,lp=-1,Sv=function(Kd,Kp){return Kd&&Kd.circleDiameter?Math.max(Kd.circleDiameter,Kp):Kp};lp=Sv(bp,lp),lp=Sv(ch,lp),lp=Sv(Op,lp);var wp=(lp=Sv(Xh,lp))>-1?1:0;wp&&(lp*=vv/24),Js.glyphOffsetArray.length>=Tt.MAX_GLYPHS&&ht("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zd.sortKey!==void 0&&Js.addToSortKeyRanges(Js.symbolInstances.length,zd.sortKey),Js.symbolInstances.emplaceBack(np.x,np.y,op.right>=0?op.right:-1,op.center>=0?op.center:-1,op.left>=0?op.left:-1,op.vertical||-1,gv,a0,o0,V0,f0,bv,h0,Ev,Up,Am,Tm,cv,i0,jv,wm,$0,wp,0,r0,s0,j0,lp)}(Lu,qd,N0,sl,Wu,td,Wd,Lu.layers[0],Lu.collisionBoxArray,cl.index,cl.sourceLayerIndex,Lu.index,yf,vc,Fd,rd,bd,vd,yp,Ou,cl,Jf,wl,Mh,Rc)};if(Ph==="line")for(var qf=0,bh=Cl(cl.geometry,0,0,8192,8192);qf<bh.length;qf+=1)for(var Bv=bh[qf],nv=0,iv=Ic(Bv,ml,Ad,sl.vertical||Od,Wu,24,Ep,Lu.overscaling,8192);nv<iv.length;nv+=1){var av=iv[nv];Od&&ae(Lu,Od.text,Ed,av)||Jd(Bv,av)}else if(Ph==="line-center")for(var ov=0,sv=cl.geometry;ov<sv.length;ov+=1){var Nd=sv[ov];if(Nd.length>1){var uv=Xl(Nd,Ad,sl.vertical||Od,Wu,24,Ep);uv&&Jd(Nd,uv)}}else if(cl.type==="Polygon")for(var _p=0,Np=Ke(cl.geometry,0);_p<Np.length;_p+=1){var zp=Np[_p],Sp=js(zp,16);Jd(zp[0],new so(Sp.x,Sp.y,0))}else if(cl.type==="LineString")for(var xp=0,Td=cl.geometry;xp<Td.length;xp+=1){var rp=Td[xp];Jd(rp,new so(rp[0].x,rp[0].y,0))}else if(cl.type==="Point")for(var t0=0,F0=cl.geometry;t0<F0.length;t0+=1)for(var Nv=0,B0=F0[t0];Nv<B0.length;Nv+=1){var lv=B0[Nv];Jd([lv],new so(lv.x,lv.y,0))}}(e,xi,qn,Zf,y,Rt,Qi,ja,ra,iu,Q)},ri=0,_i=e.features;ri<_i.length;ri+=1)$n();H&&e.generateCollisionDebugBuffers()},l.perspective=function(e,i,c,y,I){var H,Q=1/Math.tan(i/2);return e[0]=Q/c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=Q,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,I!=null&&I!==1/0?(e[10]=(I+y)*(H=1/(y-I)),e[14]=2*I*y*H):(e[10]=-1,e[14]=-2*y),e},l.pick=function(e,i){for(var c={},y=0;y<i.length;y++){var I=i[y];I in e&&(c[I]=e[I])}return c},l.plugin=gu,l.polygonIntersectsPolygon=Pf,l.postMapLoadEvent=Ct,l.postTurnstileEvent=ot,l.potpack=Ua,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=ao,l.registerForPluginStateChange=function(e){return e({pluginStatus:Ec,pluginURL:ah}),Sc.on("pluginStateChange",e),e},l.renderColorRamp=or,l.rotate=function(e,i,c){var y=i[0],I=i[1],H=i[2],Q=i[3],ge=Math.sin(c),tt=Math.cos(c);return e[0]=y*tt+H*ge,e[1]=I*tt+Q*ge,e[2]=y*-ge+H*tt,e[3]=I*-ge+Q*tt,e},l.rotateX=function(e,i,c){var y=Math.sin(c),I=Math.cos(c),H=i[4],Q=i[5],ge=i[6],tt=i[7],Rt=i[8],Ft=i[9],Jt=i[10],dr=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=H*I+Rt*y,e[5]=Q*I+Ft*y,e[6]=ge*I+Jt*y,e[7]=tt*I+dr*y,e[8]=Rt*I-H*y,e[9]=Ft*I-Q*y,e[10]=Jt*I-ge*y,e[11]=dr*I-tt*y,e},l.rotateZ=function(e,i,c){var y=Math.sin(c),I=Math.cos(c),H=i[0],Q=i[1],ge=i[2],tt=i[3],Rt=i[4],Ft=i[5],Jt=i[6],dr=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=H*I+Rt*y,e[1]=Q*I+Ft*y,e[2]=ge*I+Jt*y,e[3]=tt*I+dr*y,e[4]=Rt*I-H*y,e[5]=Ft*I-Q*y,e[6]=Jt*I-ge*y,e[7]=dr*I-tt*y,e},l.scale=function(e,i,c){var y=c[0],I=c[1],H=c[2];return e[0]=i[0]*y,e[1]=i[1]*y,e[2]=i[2]*y,e[3]=i[3]*y,e[4]=i[4]*I,e[5]=i[5]*I,e[6]=i[6]*I,e[7]=i[7]*I,e[8]=i[8]*H,e[9]=i[9]*H,e[10]=i[10]*H,e[11]=i[11]*H,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},l.scale$1=function(e,i,c){return e[0]=i[0]*c,e[1]=i[1]*c,e[2]=i[2]*c,e[3]=i[3]*c,e},l.scale$2=function(e,i,c){return e[0]=i[0]*c,e[1]=i[1]*c,e[2]=i[2]*c,e},l.setCacheLimits=function(e,i){Qt=e,ir=i},l.setRTLTextPlugin=function(e,i,c){if(c===void 0&&(c=!1),Ec==="deferred"||Ec==="loading"||Ec==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");ah=we.resolveURL(e),Ec="deferred",bc=i,Dh(),c||Ql()},l.sphericalToCartesian=function(e){var i=e[0],c=e[1],y=e[2];return c+=90,c*=Math.PI/180,y*=Math.PI/180,{x:i*Math.cos(c)*Math.sin(y),y:i*Math.sin(c)*Math.sin(y),z:i*Math.cos(y)}},l.sqrLen=function(e){var i=e[0],c=e[1];return i*i+c*c},l.styleSpec=sr,l.sub=function(e,i,c){return e[0]=i[0]-c[0],e[1]=i[1]-c[1],e[2]=i[2]-c[2],e},l.symbolSize=wu,l.transformMat3=function(e,i,c){var y=i[0],I=i[1],H=i[2];return e[0]=y*c[0]+I*c[3]+H*c[6],e[1]=y*c[1]+I*c[4]+H*c[7],e[2]=y*c[2]+I*c[5]+H*c[8],e},l.transformMat4=Nf,l.translate=function(e,i,c){var y,I,H,Q,ge,tt,Rt,Ft,Jt,dr,Cr,tn,rn=c[0],yn=c[1],vn=c[2];return i===e?(e[12]=i[0]*rn+i[4]*yn+i[8]*vn+i[12],e[13]=i[1]*rn+i[5]*yn+i[9]*vn+i[13],e[14]=i[2]*rn+i[6]*yn+i[10]*vn+i[14],e[15]=i[3]*rn+i[7]*yn+i[11]*vn+i[15]):(I=i[1],H=i[2],Q=i[3],ge=i[4],tt=i[5],Rt=i[6],Ft=i[7],Jt=i[8],dr=i[9],Cr=i[10],tn=i[11],e[0]=y=i[0],e[1]=I,e[2]=H,e[3]=Q,e[4]=ge,e[5]=tt,e[6]=Rt,e[7]=Ft,e[8]=Jt,e[9]=dr,e[10]=Cr,e[11]=tn,e[12]=y*rn+ge*yn+Jt*vn+i[12],e[13]=I*rn+tt*yn+dr*vn+i[13],e[14]=H*rn+Rt*yn+Cr*vn+i[14],e[15]=Q*rn+Ft*yn+tn*vn+i[15]),e},l.triggerPluginCompletionEvent=Wc,l.uniqueId=je,l.validateCustomStyleLayer=function(e){var i=[],c=e.id;return c===void 0&&i.push({message:"layers."+c+': missing required property "id"'}),e.render===void 0&&i.push({message:"layers."+c+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&i.push({message:"layers."+c+': property "renderingMode" must be either "2d" or "3d"'}),i},l.validateLight=xf,l.validateStyle=Lh,l.values=function(e){var i=[];for(var c in e)i.push(e[c]);return i},l.vectorTile=cu,l.version="1.13.3",l.warnOnce=ht,l.webpSupported=nt,l.window=O,l.wrap=pe}),C(["./shared"],function(l){"use strict";function $(Xe){var xe=typeof Xe;if(xe==="number"||xe==="boolean"||xe==="string"||Xe==null)return JSON.stringify(Xe);if(Array.isArray(Xe)){for(var rt="[",kt=0,cr=Xe;kt<cr.length;kt+=1)rt+=$(cr[kt])+",";return rt+"]"}for(var Ar=Object.keys(Xe).sort(),Lr="{",sr=0;sr<Ar.length;sr++)Lr+=JSON.stringify(Ar[sr])+":"+$(Xe[Ar[sr]])+",";return Lr+"}"}function R(Xe){for(var xe="",rt=0,kt=l.refProperties;rt<kt.length;rt+=1)xe+="/"+$(Xe[kt[rt]]);return xe}var z=function(Xe){this.keyCache={},Xe&&this.replace(Xe)};z.prototype.replace=function(Xe){this._layerConfigs={},this._layers={},this.update(Xe,[])},z.prototype.update=function(Xe,xe){for(var rt=this,kt=0,cr=Xe;kt<cr.length;kt+=1){var Ar=cr[kt];this._layerConfigs[Ar.id]=Ar;var Lr=this._layers[Ar.id]=l.createStyleLayer(Ar);Lr._featureFilter=l.featureFilter(Lr.filter),this.keyCache[Ar.id]&&delete this.keyCache[Ar.id]}for(var sr=0,Ge=xe;sr<Ge.length;sr+=1){var Gr=Ge[sr];delete this.keyCache[Gr],delete this._layerConfigs[Gr],delete this._layers[Gr]}this.familiesBySource={};for(var on=0,cn=function(oi,Hi){for(var Ca={},Wi=0;Wi<oi.length;Wi++){var jo=Hi&&Hi[oi[Wi].id]||R(oi[Wi]);Hi&&(Hi[oi[Wi].id]=jo);var uo=Ca[jo];uo||(uo=Ca[jo]=[]),uo.push(oi[Wi])}var Pn=[];for(var bn in Ca)Pn.push(Ca[bn]);return Pn}(l.values(this._layerConfigs),this.keyCache);on<cn.length;on+=1){var Dn=cn[on].map(function(oi){return rt._layers[oi.id]}),ci=Dn[0];if(ci.visibility!=="none"){var ia=ci.source||"",Vi=this.familiesBySource[ia];Vi||(Vi=this.familiesBySource[ia]={});var On=ci.sourceLayer||"_geojsonTileLayer",ji=Vi[On];ji||(ji=Vi[On]=[]),ji.push(Dn)}}};var L=function(Xe){var xe={},rt=[];for(var kt in Xe){var cr=Xe[kt],Ar=xe[kt]={};for(var Lr in cr){var sr=cr[+Lr];if(sr&&sr.bitmap.width!==0&&sr.bitmap.height!==0){var Ge={x:0,y:0,w:sr.bitmap.width+2,h:sr.bitmap.height+2};rt.push(Ge),Ar[Lr]={rect:Ge,metrics:sr.metrics}}}}var Gr=l.potpack(rt),on=new l.AlphaImage({width:Gr.w||1,height:Gr.h||1});for(var cn in Xe){var Dn=Xe[cn];for(var ci in Dn){var ia=Dn[+ci];if(ia&&ia.bitmap.width!==0&&ia.bitmap.height!==0){var Vi=xe[cn][ci].rect;l.AlphaImage.copy(ia.bitmap,on,{x:0,y:0},{x:Vi.x+1,y:Vi.y+1},ia.bitmap)}}}this.image=on,this.positions=xe};l.register("GlyphAtlas",L);var T=function(Xe){this.tileID=new l.OverscaledTileID(Xe.tileID.overscaledZ,Xe.tileID.wrap,Xe.tileID.canonical.z,Xe.tileID.canonical.x,Xe.tileID.canonical.y),this.uid=Xe.uid,this.zoom=Xe.zoom,this.pixelRatio=Xe.pixelRatio,this.tileSize=Xe.tileSize,this.source=Xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Xe.showCollisionBoxes,this.collectResourceTiming=!!Xe.collectResourceTiming,this.returnDependencies=!!Xe.returnDependencies,this.promoteId=Xe.promoteId};function O(Xe,xe,rt){for(var kt=new l.EvaluationParameters(xe),cr=0,Ar=Xe;cr<Ar.length;cr+=1)Ar[cr].recalculate(kt,rt)}function F(Xe,xe){var rt=l.getArrayBuffer(Xe.request,function(kt,cr,Ar,Lr){kt?xe(kt):cr&&xe(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(cr)),rawData:cr,cacheControl:Ar,expires:Lr})});return function(){rt.cancel(),xe()}}T.prototype.parse=function(Xe,xe,rt,kt,cr){var Ar=this;this.status="parsing",this.data=Xe,this.collisionBoxArray=new l.CollisionBoxArray;var Lr=new l.DictionaryCoder(Object.keys(Xe.layers).sort()),sr=new l.FeatureIndex(this.tileID,this.promoteId);sr.bucketLayerIDs=[];var Ge,Gr,on,cn,Dn={},ci={featureIndex:sr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:rt},ia=xe.familiesBySource[this.source];for(var Vi in ia){var On=Xe.layers[Vi];if(On){On.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+Vi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ji=Lr.encode(Vi),oi=[],Hi=0;Hi<On.length;Hi++){var Ca=On.feature(Hi),Wi=sr.getId(Ca,Vi);oi.push({feature:Ca,id:Wi,index:Hi,sourceLayerIndex:ji})}for(var jo=0,uo=ia[Vi];jo<uo.length;jo+=1){var Pn=uo[jo],bn=Pn[0];bn.minzoom&&this.zoom<Math.floor(bn.minzoom)||bn.maxzoom&&this.zoom>=bn.maxzoom||bn.visibility!=="none"&&(O(Pn,this.zoom,rt),(Dn[bn.id]=bn.createBucket({index:sr.bucketLayerIDs.length,layers:Pn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ji,sourceID:this.source})).populate(oi,ci,this.tileID.canonical),sr.bucketLayerIDs.push(Pn.map(function(Aa){return Aa.id})))}}}var Oi=l.mapObject(ci.glyphDependencies,function(Aa){return Object.keys(Aa).map(Number)});Object.keys(Oi).length?kt.send("getGlyphs",{uid:this.uid,stacks:Oi},function(Aa,Ta){Ge||(Ge=Aa,Gr=Ta,wa.call(Ar))}):Gr={};var di=Object.keys(ci.iconDependencies);di.length?kt.send("getImages",{icons:di,source:this.source,tileID:this.tileID,type:"icons"},function(Aa,Ta){Ge||(Ge=Aa,on=Ta,wa.call(Ar))}):on={};var va=Object.keys(ci.patternDependencies);function wa(){if(Ge)return cr(Ge);if(Gr&&on&&cn){var Aa=new L(Gr),Ta=new l.ImageAtlas(on,cn);for(var ma in Dn){var Da=Dn[ma];Da instanceof l.SymbolBucket?(O(Da.layers,this.zoom,rt),l.performSymbolLayout(Da,Gr,Aa.positions,on,Ta.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Da.hasPattern&&(Da instanceof l.LineBucket||Da instanceof l.FillBucket||Da instanceof l.FillExtrusionBucket)&&(O(Da.layers,this.zoom,rt),Da.addFeatures(ci,this.tileID.canonical,Ta.patternPositions))}this.status="done",cr(null,{buckets:l.values(Dn).filter(function(Uo){return!Uo.isEmpty()}),featureIndex:sr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Aa.image,imageAtlas:Ta,glyphMap:this.returnDependencies?Gr:null,iconMap:this.returnDependencies?on:null,glyphPositions:this.returnDependencies?Aa.positions:null})}}va.length?kt.send("getImages",{icons:va,source:this.source,tileID:this.tileID,type:"patterns"},function(Aa,Ta){Ge||(Ge=Aa,cn=Ta,wa.call(Ar))}):cn={},wa.call(this)};var ue=function(Xe,xe,rt,kt){this.actor=Xe,this.layerIndex=xe,this.availableImages=rt,this.loadVectorData=kt||F,this.loading={},this.loaded={}};ue.prototype.loadTile=function(Xe,xe){var rt=this,kt=Xe.uid;this.loading||(this.loading={});var cr=!!(Xe&&Xe.request&&Xe.request.collectResourceTiming)&&new l.RequestPerformance(Xe.request),Ar=this.loading[kt]=new T(Xe);Ar.abort=this.loadVectorData(Xe,function(Lr,sr){if(delete rt.loading[kt],Lr||!sr)return Ar.status="done",rt.loaded[kt]=Ar,xe(Lr);var Ge=sr.rawData,Gr={};sr.expires&&(Gr.expires=sr.expires),sr.cacheControl&&(Gr.cacheControl=sr.cacheControl);var on={};if(cr){var cn=cr.finish();cn&&(on.resourceTiming=JSON.parse(JSON.stringify(cn)))}Ar.vectorTile=sr.vectorTile,Ar.parse(sr.vectorTile,rt.layerIndex,rt.availableImages,rt.actor,function(Dn,ci){if(Dn||!ci)return xe(Dn);xe(null,l.extend({rawTileData:Ge.slice(0)},ci,Gr,on))}),rt.loaded=rt.loaded||{},rt.loaded[kt]=Ar})},ue.prototype.reloadTile=function(Xe,xe){var rt=this,kt=this.loaded,cr=Xe.uid,Ar=this;if(kt&&kt[cr]){var Lr=kt[cr];Lr.showCollisionBoxes=Xe.showCollisionBoxes;var sr=function(Ge,Gr){var on=Lr.reloadCallback;on&&(delete Lr.reloadCallback,Lr.parse(Lr.vectorTile,Ar.layerIndex,rt.availableImages,Ar.actor,on)),xe(Ge,Gr)};Lr.status==="parsing"?Lr.reloadCallback=sr:Lr.status==="done"&&(Lr.vectorTile?Lr.parse(Lr.vectorTile,this.layerIndex,this.availableImages,this.actor,sr):sr())}},ue.prototype.abortTile=function(Xe,xe){var rt=this.loading,kt=Xe.uid;rt&&rt[kt]&&rt[kt].abort&&(rt[kt].abort(),delete rt[kt]),xe()},ue.prototype.removeTile=function(Xe,xe){var rt=this.loaded,kt=Xe.uid;rt&&rt[kt]&&delete rt[kt],xe()};var Ae=l.window.ImageBitmap,re=function(){this.loaded={}};function pe(Xe,xe){if(Xe.length!==0){fe(Xe[0],xe);for(var rt=1;rt<Xe.length;rt++)fe(Xe[rt],!xe)}}function fe(Xe,xe){for(var rt=0,kt=0,cr=0,Ar=Xe.length,Lr=Ar-1;cr<Ar;Lr=cr++){var sr=(Xe[cr][0]-Xe[Lr][0])*(Xe[Lr][1]+Xe[cr][1]),Ge=rt+sr;kt+=Math.abs(rt)>=Math.abs(sr)?rt-Ge+sr:sr-Ge+rt,rt=Ge}rt+kt>=0!=!!xe&&Xe.reverse()}re.prototype.loadTile=function(Xe,xe){var rt=Xe.uid,kt=Xe.encoding,cr=Xe.rawImageData,Ar=Ae&&cr instanceof Ae?this.getImageData(cr):cr,Lr=new l.DEMData(rt,Ar,kt);this.loaded=this.loaded||{},this.loaded[rt]=Lr,xe(null,Lr)},re.prototype.getImageData=function(Xe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Xe.width,Xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Xe.width,this.offscreenCanvas.height=Xe.height,this.offscreenCanvasContext.drawImage(Xe,0,0,Xe.width,Xe.height);var xe=this.offscreenCanvasContext.getImageData(-1,-1,Xe.width+2,Xe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:xe.width,height:xe.height},xe.data)},re.prototype.removeTile=function(Xe){var xe=this.loaded,rt=Xe.uid;xe&&xe[rt]&&delete xe[rt]};var ke=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,je=function(Xe){this._feature=Xe,this.extent=l.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))};je.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Xe=[],xe=0,rt=this._feature.geometry;xe<rt.length;xe+=1){var kt=rt[xe];Xe.push([new l.Point$1(kt[0],kt[1])])}return Xe}for(var cr=[],Ar=0,Lr=this._feature.geometry;Ar<Lr.length;Ar+=1){for(var sr=[],Ge=0,Gr=Lr[Ar];Ge<Gr.length;Ge+=1){var on=Gr[Ge];sr.push(new l.Point$1(on[0],on[1]))}cr.push(sr)}return cr},je.prototype.toGeoJSON=function(Xe,xe,rt){return ke.call(this,Xe,xe,rt)};var bt=function(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Xe.length,this._features=Xe};bt.prototype.feature=function(Xe){return new je(this._features[Xe])};var ut=l.vectorTile.VectorTileFeature,wt=se;function se(Xe,xe){this.options=xe||{},this.features=Xe,this.length=Xe.length}function qe(Xe,xe){this.id=typeof Xe.id=="number"?Xe.id:void 0,this.type=Xe.type,this.rawGeometry=Xe.type===1?[Xe.geometry]:Xe.geometry,this.properties=Xe.tags,this.extent=xe||4096}se.prototype.feature=function(Xe){return new qe(this.features[Xe],this.options.extent)},qe.prototype.loadGeometry=function(){var Xe=this.rawGeometry;this.geometry=[];for(var xe=0;xe<Xe.length;xe++){for(var rt=Xe[xe],kt=[],cr=0;cr<rt.length;cr++)kt.push(new l.Point$1(rt[cr][0],rt[cr][1]));this.geometry.push(kt)}return this.geometry},qe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Xe=this.geometry,xe=1/0,rt=-1/0,kt=1/0,cr=-1/0,Ar=0;Ar<Xe.length;Ar++)for(var Lr=Xe[Ar],sr=0;sr<Lr.length;sr++){var Ge=Lr[sr];xe=Math.min(xe,Ge.x),rt=Math.max(rt,Ge.x),kt=Math.min(kt,Ge.y),cr=Math.max(cr,Ge.y)}return[xe,kt,rt,cr]},qe.prototype.toGeoJSON=ut.prototype.toGeoJSON;var me=Te,_e=wt;function Te(Xe){var xe=new l.pbf;return function(rt,kt){for(var cr in rt.layers)kt.writeMessage(3,ht,rt.layers[cr])}(Xe,xe),xe.finish()}function ht(Xe,xe){var rt;xe.writeVarintField(15,Xe.version||1),xe.writeStringField(1,Xe.name||""),xe.writeVarintField(5,Xe.extent||4096);var kt={keys:[],values:[],keycache:{},valuecache:{}};for(rt=0;rt<Xe.length;rt++)kt.feature=Xe.feature(rt),xe.writeMessage(2,We,kt);var cr=kt.keys;for(rt=0;rt<cr.length;rt++)xe.writeStringField(3,cr[rt]);var Ar=kt.values;for(rt=0;rt<Ar.length;rt++)xe.writeMessage(4,ze,Ar[rt])}function We(Xe,xe){var rt=Xe.feature;rt.id!==void 0&&xe.writeVarintField(1,rt.id),xe.writeMessage(2,Ne,Xe),xe.writeVarintField(3,rt.type),xe.writeMessage(4,ie,rt)}function Ne(Xe,xe){var rt=Xe.feature,kt=Xe.keys,cr=Xe.values,Ar=Xe.keycache,Lr=Xe.valuecache;for(var sr in rt.properties){var Ge=Ar[sr];Ge===void 0&&(kt.push(sr),Ar[sr]=Ge=kt.length-1),xe.writeVarint(Ge);var Gr=rt.properties[sr],on=typeof Gr;on!=="string"&&on!=="boolean"&&on!=="number"&&(Gr=JSON.stringify(Gr));var cn=on+":"+Gr,Dn=Lr[cn];Dn===void 0&&(cr.push(Gr),Lr[cn]=Dn=cr.length-1),xe.writeVarint(Dn)}}function he(Xe,xe){return(xe<<3)+(7&Xe)}function Ve(Xe){return Xe<<1^Xe>>31}function ie(Xe,xe){for(var rt=Xe.loadGeometry(),kt=Xe.type,cr=0,Ar=0,Lr=rt.length,sr=0;sr<Lr;sr++){var Ge=rt[sr],Gr=1;kt===1&&(Gr=Ge.length),xe.writeVarint(he(1,Gr));for(var on=kt===3?Ge.length-1:Ge.length,cn=0;cn<on;cn++){cn===1&&kt!==1&&xe.writeVarint(he(2,on-1));var Dn=Ge[cn].x-cr,ci=Ge[cn].y-Ar;xe.writeVarint(Ve(Dn)),xe.writeVarint(Ve(ci)),cr+=Dn,Ar+=ci}kt===3&&xe.writeVarint(he(7,1))}}function ze(Xe,xe){var rt=typeof Xe;rt==="string"?xe.writeStringField(1,Xe):rt==="boolean"?xe.writeBooleanField(7,Xe):rt==="number"&&(Xe%1!=0?xe.writeDoubleField(3,Xe):Xe<0?xe.writeSVarintField(6,Xe):xe.writeVarintField(5,Xe))}function Le(Xe,xe,rt,kt){Re(Xe,rt,kt),Re(xe,2*rt,2*kt),Re(xe,2*rt+1,2*kt+1)}function Re(Xe,xe,rt){var kt=Xe[xe];Xe[xe]=Xe[rt],Xe[rt]=kt}function st(Xe,xe,rt,kt){var cr=Xe-rt,Ar=xe-kt;return cr*cr+Ar*Ar}me.fromVectorTileJs=Te,me.fromGeojsonVt=function(Xe,xe){xe=xe||{};var rt={};for(var kt in Xe)rt[kt]=new wt(Xe[kt].features,xe),rt[kt].name=kt,rt[kt].version=xe.version,rt[kt].extent=xe.extent;return Te({layers:rt})},me.GeoJSONWrapper=_e;var vt=function(Xe){return Xe[0]},Dt=function(Xe){return Xe[1]},ar=function(Xe,xe,rt,kt,cr){xe===void 0&&(xe=vt),rt===void 0&&(rt=Dt),kt===void 0&&(kt=64),cr===void 0&&(cr=Float64Array),this.nodeSize=kt,this.points=Xe;for(var Ar=Xe.length<65536?Uint16Array:Uint32Array,Lr=this.ids=new Ar(Xe.length),sr=this.coords=new cr(2*Xe.length),Ge=0;Ge<Xe.length;Ge++)Lr[Ge]=Ge,sr[2*Ge]=xe(Xe[Ge]),sr[2*Ge+1]=rt(Xe[Ge]);(function Gr(on,cn,Dn,ci,ia,Vi){if(!(ia-ci<=Dn)){var On=ci+ia>>1;(function ji(oi,Hi,Ca,Wi,jo,uo){for(;jo>Wi;){if(jo-Wi>600){var Pn=jo-Wi+1,bn=Ca-Wi+1,Oi=Math.log(Pn),di=.5*Math.exp(2*Oi/3),va=.5*Math.sqrt(Oi*di*(Pn-di)/Pn)*(bn-Pn/2<0?-1:1);ji(oi,Hi,Ca,Math.max(Wi,Math.floor(Ca-bn*di/Pn+va)),Math.min(jo,Math.floor(Ca+(Pn-bn)*di/Pn+va)),uo)}var wa=Hi[2*Ca+uo],Aa=Wi,Ta=jo;for(Le(oi,Hi,Wi,Ca),Hi[2*jo+uo]>wa&&Le(oi,Hi,Wi,jo);Aa<Ta;){for(Le(oi,Hi,Aa,Ta),Aa++,Ta--;Hi[2*Aa+uo]<wa;)Aa++;for(;Hi[2*Ta+uo]>wa;)Ta--}Hi[2*Wi+uo]===wa?Le(oi,Hi,Wi,Ta):Le(oi,Hi,++Ta,jo),Ta<=Ca&&(Wi=Ta+1),Ca<=Ta&&(jo=Ta-1)}})(on,cn,On,ci,ia,Vi%2),Gr(on,cn,Dn,ci,On-1,Vi+1),Gr(on,cn,Dn,On+1,ia,Vi+1)}})(Lr,sr,kt,0,Lr.length-1,0)};ar.prototype.range=function(Xe,xe,rt,kt){return function(cr,Ar,Lr,sr,Ge,Gr,on){for(var cn,Dn,ci=[0,cr.length-1,0],ia=[];ci.length;){var Vi=ci.pop(),On=ci.pop(),ji=ci.pop();if(On-ji<=on)for(var oi=ji;oi<=On;oi++)Dn=Ar[2*oi+1],(cn=Ar[2*oi])>=Lr&&cn<=Ge&&Dn>=sr&&Dn<=Gr&&ia.push(cr[oi]);else{var Hi=Math.floor((ji+On)/2);Dn=Ar[2*Hi+1],(cn=Ar[2*Hi])>=Lr&&cn<=Ge&&Dn>=sr&&Dn<=Gr&&ia.push(cr[Hi]);var Ca=(Vi+1)%2;(Vi===0?Lr<=cn:sr<=Dn)&&(ci.push(ji),ci.push(Hi-1),ci.push(Ca)),(Vi===0?Ge>=cn:Gr>=Dn)&&(ci.push(Hi+1),ci.push(On),ci.push(Ca))}}return ia}(this.ids,this.coords,Xe,xe,rt,kt,this.nodeSize)},ar.prototype.within=function(Xe,xe,rt){return function(kt,cr,Ar,Lr,sr,Ge){for(var Gr=[0,kt.length-1,0],on=[],cn=sr*sr;Gr.length;){var Dn=Gr.pop(),ci=Gr.pop(),ia=Gr.pop();if(ci-ia<=Ge)for(var Vi=ia;Vi<=ci;Vi++)st(cr[2*Vi],cr[2*Vi+1],Ar,Lr)<=cn&&on.push(kt[Vi]);else{var On=Math.floor((ia+ci)/2),ji=cr[2*On],oi=cr[2*On+1];st(ji,oi,Ar,Lr)<=cn&&on.push(kt[On]);var Hi=(Dn+1)%2;(Dn===0?Ar-sr<=ji:Lr-sr<=oi)&&(Gr.push(ia),Gr.push(On-1),Gr.push(Hi)),(Dn===0?Ar+sr>=ji:Lr+sr>=oi)&&(Gr.push(On+1),Gr.push(ci),Gr.push(Hi))}}return on}(this.ids,this.coords,Xe,xe,rt,this.nodeSize)};var $t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Xe){return Xe}},ur=function(Xe){this.options=lt(Object.create($t),Xe),this.trees=new Array(this.options.maxZoom+1)};function we(Xe,xe,rt,kt,cr){return{x:Xe,y:xe,zoom:1/0,id:rt,parentId:-1,numPoints:kt,properties:cr}}function At(Xe,xe){var rt=Xe.geometry.coordinates,kt=rt[1];return{x:St(rt[0]),y:Ut(kt),zoom:1/0,index:xe,parentId:-1}}function nt(Xe){return{type:"Feature",id:Xe.id,properties:Lt(Xe),geometry:{type:"Point",coordinates:[(kt=Xe.x,360*(kt-.5)),(xe=Xe.y,rt=(180-360*xe)*Math.PI/180,360*Math.atan(Math.exp(rt))/Math.PI-90)]}};var xe,rt,kt}function Lt(Xe){var xe=Xe.numPoints,rt=xe>=1e4?Math.round(xe/1e3)+"k":xe>=1e3?Math.round(xe/100)/10+"k":xe;return lt(lt({},Xe.properties),{cluster:!0,cluster_id:Xe.id,point_count:xe,point_count_abbreviated:rt})}function St(Xe){return Xe/360+.5}function Ut(Xe){var xe=Math.sin(Xe*Math.PI/180),rt=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return rt<0?0:rt>1?1:rt}function lt(Xe,xe){for(var rt in xe)Xe[rt]=xe[rt];return Xe}function Et(Xe){return Xe.x}function Zt(Xe){return Xe.y}function Be(Xe,xe,rt,kt,cr,Ar){var Lr=cr-rt,sr=Ar-kt;if(Lr!==0||sr!==0){var Ge=((Xe-rt)*Lr+(xe-kt)*sr)/(Lr*Lr+sr*sr);Ge>1?(rt=cr,kt=Ar):Ge>0&&(rt+=Lr*Ge,kt+=sr*Ge)}return(Lr=Xe-rt)*Lr+(sr=xe-kt)*sr}function He(Xe,xe,rt,kt){var cr={id:Xe===void 0?null:Xe,type:xe,geometry:rt,tags:kt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ar){var Lr=Ar.geometry,sr=Ar.type;if(sr==="Point"||sr==="MultiPoint"||sr==="LineString")ft(Ar,Lr);else if(sr==="Polygon"||sr==="MultiLineString")for(var Ge=0;Ge<Lr.length;Ge++)ft(Ar,Lr[Ge]);else if(sr==="MultiPolygon")for(Ge=0;Ge<Lr.length;Ge++)for(var Gr=0;Gr<Lr[Ge].length;Gr++)ft(Ar,Lr[Ge][Gr])}(cr),cr}function ft(Xe,xe){for(var rt=0;rt<xe.length;rt+=3)Xe.minX=Math.min(Xe.minX,xe[rt]),Xe.minY=Math.min(Xe.minY,xe[rt+1]),Xe.maxX=Math.max(Xe.maxX,xe[rt]),Xe.maxY=Math.max(Xe.maxY,xe[rt+1])}function Z(Xe,xe,rt,kt){if(xe.geometry){var cr=xe.geometry.coordinates,Ar=xe.geometry.type,Lr=Math.pow(rt.tolerance/((1<<rt.maxZoom)*rt.extent),2),sr=[],Ge=xe.id;if(rt.promoteId?Ge=xe.properties[rt.promoteId]:rt.generateId&&(Ge=kt||0),Ar==="Point")J(cr,sr);else if(Ar==="MultiPoint")for(var Gr=0;Gr<cr.length;Gr++)J(cr[Gr],sr);else if(Ar==="LineString")K(cr,sr,Lr,!1);else if(Ar==="MultiLineString"){if(rt.lineMetrics){for(Gr=0;Gr<cr.length;Gr++)K(cr[Gr],sr=[],Lr,!1),Xe.push(He(Ge,"LineString",sr,xe.properties));return}B(cr,sr,Lr,!1)}else if(Ar==="Polygon")B(cr,sr,Lr,!0);else{if(Ar!=="MultiPolygon"){if(Ar==="GeometryCollection"){for(Gr=0;Gr<xe.geometry.geometries.length;Gr++)Z(Xe,{id:Ge,geometry:xe.geometry.geometries[Gr],properties:xe.properties},rt,kt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Gr=0;Gr<cr.length;Gr++){var on=[];B(cr[Gr],on,Lr,!0),sr.push(on)}}Xe.push(He(Ge,Ar,sr,xe.properties))}}function J(Xe,xe){xe.push(j(Xe[0])),xe.push(ee(Xe[1])),xe.push(0)}function K(Xe,xe,rt,kt){for(var cr,Ar,Lr=0,sr=0;sr<Xe.length;sr++){var Ge=j(Xe[sr][0]),Gr=ee(Xe[sr][1]);xe.push(Ge),xe.push(Gr),xe.push(0),sr>0&&(Lr+=kt?(cr*Gr-Ge*Ar)/2:Math.sqrt(Math.pow(Ge-cr,2)+Math.pow(Gr-Ar,2))),cr=Ge,Ar=Gr}var on=xe.length-3;xe[2]=1,function cn(Dn,ci,ia,Vi){for(var On,ji=Vi,oi=ia-ci>>1,Hi=ia-ci,Ca=Dn[ci],Wi=Dn[ci+1],jo=Dn[ia],uo=Dn[ia+1],Pn=ci+3;Pn<ia;Pn+=3){var bn=Be(Dn[Pn],Dn[Pn+1],Ca,Wi,jo,uo);if(bn>ji)On=Pn,ji=bn;else if(bn===ji){var Oi=Math.abs(Pn-oi);Oi<Hi&&(On=Pn,Hi=Oi)}}ji>Vi&&(On-ci>3&&cn(Dn,ci,On,Vi),Dn[On+2]=ji,ia-On>3&&cn(Dn,On,ia,Vi))}(xe,0,on,rt),xe[on+2]=1,xe.size=Math.abs(Lr),xe.start=0,xe.end=xe.size}function B(Xe,xe,rt,kt){for(var cr=0;cr<Xe.length;cr++){var Ar=[];K(Xe[cr],Ar,rt,kt),xe.push(Ar)}}function j(Xe){return Xe/360+.5}function ee(Xe){var xe=Math.sin(Xe*Math.PI/180),rt=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return rt<0?0:rt>1?1:rt}function W(Xe,xe,rt,kt,cr,Ar,Lr,sr){if(kt/=xe,Ar>=(rt/=xe)&&Lr<kt)return Xe;if(Lr<rt||Ar>=kt)return null;for(var Ge=[],Gr=0;Gr<Xe.length;Gr++){var on=Xe[Gr],cn=on.geometry,Dn=on.type,ci=cr===0?on.minX:on.minY,ia=cr===0?on.maxX:on.maxY;if(ci>=rt&&ia<kt)Ge.push(on);else if(!(ia<rt||ci>=kt)){var Vi=[];if(Dn==="Point"||Dn==="MultiPoint")De(cn,Vi,rt,kt,cr);else if(Dn==="LineString")ot(cn,Vi,rt,kt,cr,!1,sr.lineMetrics);else if(Dn==="MultiLineString")Ct(cn,Vi,rt,kt,cr,!1);else if(Dn==="Polygon")Ct(cn,Vi,rt,kt,cr,!0);else if(Dn==="MultiPolygon")for(var On=0;On<cn.length;On++){var ji=[];Ct(cn[On],ji,rt,kt,cr,!0),ji.length&&Vi.push(ji)}if(Vi.length){if(sr.lineMetrics&&Dn==="LineString"){for(On=0;On<Vi.length;On++)Ge.push(He(on.id,Dn,Vi[On],on.tags));continue}Dn!=="LineString"&&Dn!=="MultiLineString"||(Vi.length===1?(Dn="LineString",Vi=Vi[0]):Dn="MultiLineString"),Dn!=="Point"&&Dn!=="MultiPoint"||(Dn=Vi.length===3?"Point":"MultiPoint"),Ge.push(He(on.id,Dn,Vi,on.tags))}}}return Ge.length?Ge:null}function De(Xe,xe,rt,kt,cr){for(var Ar=0;Ar<Xe.length;Ar+=3){var Lr=Xe[Ar+cr];Lr>=rt&&Lr<=kt&&(xe.push(Xe[Ar]),xe.push(Xe[Ar+1]),xe.push(Xe[Ar+2]))}}function ot(Xe,xe,rt,kt,cr,Ar,Lr){for(var sr,Ge,Gr=Wt(Xe),on=cr===0?ir:Er,cn=Xe.start,Dn=0;Dn<Xe.length-3;Dn+=3){var ci=Xe[Dn],ia=Xe[Dn+1],Vi=Xe[Dn+2],On=Xe[Dn+3],ji=Xe[Dn+4],oi=cr===0?ci:ia,Hi=cr===0?On:ji,Ca=!1;Lr&&(sr=Math.sqrt(Math.pow(ci-On,2)+Math.pow(ia-ji,2))),oi<rt?Hi>rt&&(Ge=on(Gr,ci,ia,On,ji,rt),Lr&&(Gr.start=cn+sr*Ge)):oi>kt?Hi<kt&&(Ge=on(Gr,ci,ia,On,ji,kt),Lr&&(Gr.start=cn+sr*Ge)):Qt(Gr,ci,ia,Vi),Hi<rt&&oi>=rt&&(Ge=on(Gr,ci,ia,On,ji,rt),Ca=!0),Hi>kt&&oi<=kt&&(Ge=on(Gr,ci,ia,On,ji,kt),Ca=!0),!Ar&&Ca&&(Lr&&(Gr.end=cn+sr*Ge),xe.push(Gr),Gr=Wt(Xe)),Lr&&(cn+=sr)}var Wi=Xe.length-3;ci=Xe[Wi],ia=Xe[Wi+1],Vi=Xe[Wi+2],(oi=cr===0?ci:ia)>=rt&&oi<=kt&&Qt(Gr,ci,ia,Vi),Wi=Gr.length-3,Ar&&Wi>=3&&(Gr[Wi]!==Gr[0]||Gr[Wi+1]!==Gr[1])&&Qt(Gr,Gr[0],Gr[1],Gr[2]),Gr.length&&xe.push(Gr)}function Wt(Xe){var xe=[];return xe.size=Xe.size,xe.start=Xe.start,xe.end=Xe.end,xe}function Ct(Xe,xe,rt,kt,cr,Ar){for(var Lr=0;Lr<Xe.length;Lr++)ot(Xe[Lr],xe,rt,kt,cr,Ar,!1)}function Qt(Xe,xe,rt,kt){Xe.push(xe),Xe.push(rt),Xe.push(kt)}function ir(Xe,xe,rt,kt,cr,Ar){var Lr=(Ar-xe)/(kt-xe);return Xe.push(Ar),Xe.push(rt+(cr-rt)*Lr),Xe.push(1),Lr}function Er(Xe,xe,rt,kt,cr,Ar){var Lr=(Ar-rt)/(cr-rt);return Xe.push(xe+(kt-xe)*Lr),Xe.push(Ar),Xe.push(1),Lr}function Qr(Xe,xe){for(var rt=[],kt=0;kt<Xe.length;kt++){var cr,Ar=Xe[kt],Lr=Ar.type;if(Lr==="Point"||Lr==="MultiPoint"||Lr==="LineString")cr=Mt(Ar.geometry,xe);else if(Lr==="MultiLineString"||Lr==="Polygon"){cr=[];for(var sr=0;sr<Ar.geometry.length;sr++)cr.push(Mt(Ar.geometry[sr],xe))}else if(Lr==="MultiPolygon")for(cr=[],sr=0;sr<Ar.geometry.length;sr++){for(var Ge=[],Gr=0;Gr<Ar.geometry[sr].length;Gr++)Ge.push(Mt(Ar.geometry[sr][Gr],xe));cr.push(Ge)}rt.push(He(Ar.id,Lr,cr,Ar.tags))}return rt}function Mt(Xe,xe){var rt=[];rt.size=Xe.size,Xe.start!==void 0&&(rt.start=Xe.start,rt.end=Xe.end);for(var kt=0;kt<Xe.length;kt+=3)rt.push(Xe[kt]+xe,Xe[kt+1],Xe[kt+2]);return rt}function br(Xe,xe){if(Xe.transformed)return Xe;var rt,kt,cr,Ar=1<<Xe.z,Lr=Xe.x,sr=Xe.y;for(rt=0;rt<Xe.features.length;rt++){var Ge=Xe.features[rt],Gr=Ge.geometry,on=Ge.type;if(Ge.geometry=[],on===1)for(kt=0;kt<Gr.length;kt+=2)Ge.geometry.push(Nt(Gr[kt],Gr[kt+1],xe,Ar,Lr,sr));else for(kt=0;kt<Gr.length;kt++){var cn=[];for(cr=0;cr<Gr[kt].length;cr+=2)cn.push(Nt(Gr[kt][cr],Gr[kt][cr+1],xe,Ar,Lr,sr));Ge.geometry.push(cn)}}return Xe.transformed=!0,Xe}function Nt(Xe,xe,rt,kt,cr,Ar){return[Math.round(rt*(Xe*kt-cr)),Math.round(rt*(xe*kt-Ar))]}function Pr(Xe,xe,rt,kt,cr){for(var Ar=xe===cr.maxZoom?0:cr.tolerance/((1<<xe)*cr.extent),Lr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:rt,y:kt,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},sr=0;sr<Xe.length;sr++){Lr.numFeatures++,_r(Lr,Xe[sr],Ar,cr);var Ge=Xe[sr].minX,Gr=Xe[sr].minY,on=Xe[sr].maxX,cn=Xe[sr].maxY;Ge<Lr.minX&&(Lr.minX=Ge),Gr<Lr.minY&&(Lr.minY=Gr),on>Lr.maxX&&(Lr.maxX=on),cn>Lr.maxY&&(Lr.maxY=cn)}return Lr}function _r(Xe,xe,rt,kt){var cr=xe.geometry,Ar=xe.type,Lr=[];if(Ar==="Point"||Ar==="MultiPoint")for(var sr=0;sr<cr.length;sr+=3)Lr.push(cr[sr]),Lr.push(cr[sr+1]),Xe.numPoints++,Xe.numSimplified++;else if(Ar==="LineString")kr(Lr,cr,Xe,rt,!1,!1);else if(Ar==="MultiLineString"||Ar==="Polygon")for(sr=0;sr<cr.length;sr++)kr(Lr,cr[sr],Xe,rt,Ar==="Polygon",sr===0);else if(Ar==="MultiPolygon")for(var Ge=0;Ge<cr.length;Ge++){var Gr=cr[Ge];for(sr=0;sr<Gr.length;sr++)kr(Lr,Gr[sr],Xe,rt,!0,sr===0)}if(Lr.length){var on=xe.tags||null;if(Ar==="LineString"&&kt.lineMetrics){for(var cn in on={},xe.tags)on[cn]=xe.tags[cn];on.mapbox_clip_start=cr.start/cr.size,on.mapbox_clip_end=cr.end/cr.size}var Dn={geometry:Lr,type:Ar==="Polygon"||Ar==="MultiPolygon"?3:Ar==="LineString"||Ar==="MultiLineString"?2:1,tags:on};xe.id!==null&&(Dn.id=xe.id),Xe.features.push(Dn)}}function kr(Xe,xe,rt,kt,cr,Ar){var Lr=kt*kt;if(kt>0&&xe.size<(cr?Lr:kt))rt.numPoints+=xe.length/3;else{for(var sr=[],Ge=0;Ge<xe.length;Ge+=3)(kt===0||xe[Ge+2]>Lr)&&(rt.numSimplified++,sr.push(xe[Ge]),sr.push(xe[Ge+1])),rt.numPoints++;cr&&function(Gr,on){for(var cn=0,Dn=0,ci=Gr.length,ia=ci-2;Dn<ci;ia=Dn,Dn+=2)cn+=(Gr[Dn]-Gr[ia])*(Gr[Dn+1]+Gr[ia+1]);if(cn>0===on)for(Dn=0,ci=Gr.length;Dn<ci/2;Dn+=2){var Vi=Gr[Dn],On=Gr[Dn+1];Gr[Dn]=Gr[ci-2-Dn],Gr[Dn+1]=Gr[ci-1-Dn],Gr[ci-2-Dn]=Vi,Gr[ci-1-Dn]=On}}(sr,Ar),Xe.push(sr)}}function zt(Xe,xe){var rt=(xe=this.options=function(cr,Ar){for(var Lr in Ar)cr[Lr]=Ar[Lr];return cr}(Object.create(this.options),xe)).debug;if(rt&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var kt=function(cr,Ar){var Lr=[];if(cr.type==="FeatureCollection")for(var sr=0;sr<cr.features.length;sr++)Z(Lr,cr.features[sr],Ar,sr);else Z(Lr,cr.type==="Feature"?cr:{geometry:cr},Ar);return Lr}(Xe,xe);this.tiles={},this.tileCoords=[],rt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(kt=function(cr,Ar){var Lr=Ar.buffer/Ar.extent,sr=cr,Ge=W(cr,1,-1-Lr,Lr,0,-1,2,Ar),Gr=W(cr,1,1-Lr,2+Lr,0,-1,2,Ar);return(Ge||Gr)&&(sr=W(cr,1,-Lr,1+Lr,0,-1,2,Ar)||[],Ge&&(sr=Qr(Ge,1).concat(sr)),Gr&&(sr=sr.concat(Qr(Gr,-1)))),sr}(kt,xe)).length&&this.splitTile(kt,0,0,0),rt&&(kt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function mr(Xe,xe,rt){return 32*((1<<Xe)*rt+xe)+Xe}function Or(Xe,xe){var rt=Xe.tileID.canonical;if(!this._geoJSONIndex)return xe(null,null);var kt=this._geoJSONIndex.getTile(rt.z,rt.x,rt.y);if(!kt)return xe(null,null);var cr=new bt(kt.features),Ar=me(cr);Ar.byteOffset===0&&Ar.byteLength===Ar.buffer.byteLength||(Ar=new Uint8Array(Ar)),xe(null,{vectorTile:cr,rawData:Ar.buffer})}ur.prototype.load=function(Xe){var xe=this.options,rt=xe.log,kt=xe.minZoom,cr=xe.maxZoom,Ar=xe.nodeSize;rt&&console.time("total time");var Lr="prepare "+Xe.length+" points";rt&&console.time(Lr),this.points=Xe;for(var sr=[],Ge=0;Ge<Xe.length;Ge++)Xe[Ge].geometry&&sr.push(At(Xe[Ge],Ge));this.trees[cr+1]=new ar(sr,Et,Zt,Ar,Float32Array),rt&&console.timeEnd(Lr);for(var Gr=cr;Gr>=kt;Gr--){var on=+Date.now();sr=this._cluster(sr,Gr),this.trees[Gr]=new ar(sr,Et,Zt,Ar,Float32Array),rt&&console.log("z%d: %d clusters in %dms",Gr,sr.length,+Date.now()-on)}return rt&&console.timeEnd("total time"),this},ur.prototype.getClusters=function(Xe,xe){var rt=((Xe[0]+180)%360+360)%360-180,kt=Math.max(-90,Math.min(90,Xe[1])),cr=Xe[2]===180?180:((Xe[2]+180)%360+360)%360-180,Ar=Math.max(-90,Math.min(90,Xe[3]));if(Xe[2]-Xe[0]>=360)rt=-180,cr=180;else if(rt>cr){var Lr=this.getClusters([rt,kt,180,Ar],xe),sr=this.getClusters([-180,kt,cr,Ar],xe);return Lr.concat(sr)}for(var Ge=this.trees[this._limitZoom(xe)],Gr=[],on=0,cn=Ge.range(St(rt),Ut(Ar),St(cr),Ut(kt));on<cn.length;on+=1){var Dn=Ge.points[cn[on]];Gr.push(Dn.numPoints?nt(Dn):this.points[Dn.index])}return Gr},ur.prototype.getChildren=function(Xe){var xe=this._getOriginId(Xe),rt=this._getOriginZoom(Xe),kt="No cluster with the specified id.",cr=this.trees[rt];if(!cr)throw new Error(kt);var Ar=cr.points[xe];if(!Ar)throw new Error(kt);for(var Lr=this.options.radius/(this.options.extent*Math.pow(2,rt-1)),sr=[],Ge=0,Gr=cr.within(Ar.x,Ar.y,Lr);Ge<Gr.length;Ge+=1){var on=cr.points[Gr[Ge]];on.parentId===Xe&&sr.push(on.numPoints?nt(on):this.points[on.index])}if(sr.length===0)throw new Error(kt);return sr},ur.prototype.getLeaves=function(Xe,xe,rt){var kt=[];return this._appendLeaves(kt,Xe,xe=xe||10,rt=rt||0,0),kt},ur.prototype.getTile=function(Xe,xe,rt){var kt=this.trees[this._limitZoom(Xe)],cr=Math.pow(2,Xe),Ar=this.options,Lr=Ar.radius/Ar.extent,sr=(rt-Lr)/cr,Ge=(rt+1+Lr)/cr,Gr={features:[]};return this._addTileFeatures(kt.range((xe-Lr)/cr,sr,(xe+1+Lr)/cr,Ge),kt.points,xe,rt,cr,Gr),xe===0&&this._addTileFeatures(kt.range(1-Lr/cr,sr,1,Ge),kt.points,cr,rt,cr,Gr),xe===cr-1&&this._addTileFeatures(kt.range(0,sr,Lr/cr,Ge),kt.points,-1,rt,cr,Gr),Gr.features.length?Gr:null},ur.prototype.getClusterExpansionZoom=function(Xe){for(var xe=this._getOriginZoom(Xe)-1;xe<=this.options.maxZoom;){var rt=this.getChildren(Xe);if(xe++,rt.length!==1)break;Xe=rt[0].properties.cluster_id}return xe},ur.prototype._appendLeaves=function(Xe,xe,rt,kt,cr){for(var Ar=0,Lr=this.getChildren(xe);Ar<Lr.length;Ar+=1){var sr=Lr[Ar],Ge=sr.properties;if(Ge&&Ge.cluster?cr+Ge.point_count<=kt?cr+=Ge.point_count:cr=this._appendLeaves(Xe,Ge.cluster_id,rt,kt,cr):cr<kt?cr++:Xe.push(sr),Xe.length===rt)break}return cr},ur.prototype._addTileFeatures=function(Xe,xe,rt,kt,cr,Ar){for(var Lr=0,sr=Xe;Lr<sr.length;Lr+=1){var Ge=xe[sr[Lr]],Gr=Ge.numPoints,on={type:1,geometry:[[Math.round(this.options.extent*(Ge.x*cr-rt)),Math.round(this.options.extent*(Ge.y*cr-kt))]],tags:Gr?Lt(Ge):this.points[Ge.index].properties},cn=void 0;Gr?cn=Ge.id:this.options.generateId?cn=Ge.index:this.points[Ge.index].id&&(cn=this.points[Ge.index].id),cn!==void 0&&(on.id=cn),Ar.features.push(on)}},ur.prototype._limitZoom=function(Xe){return Math.max(this.options.minZoom,Math.min(+Xe,this.options.maxZoom+1))},ur.prototype._cluster=function(Xe,xe){for(var rt=[],kt=this.options,cr=kt.reduce,Ar=kt.minPoints,Lr=kt.radius/(kt.extent*Math.pow(2,xe)),sr=0;sr<Xe.length;sr++){var Ge=Xe[sr];if(!(Ge.zoom<=xe)){Ge.zoom=xe;for(var Gr=this.trees[xe+1],on=Gr.within(Ge.x,Ge.y,Lr),cn=Ge.numPoints||1,Dn=cn,ci=0,ia=on;ci<ia.length;ci+=1){var Vi=Gr.points[ia[ci]];Vi.zoom>xe&&(Dn+=Vi.numPoints||1)}if(Dn>=Ar){for(var On=Ge.x*cn,ji=Ge.y*cn,oi=cr&&cn>1?this._map(Ge,!0):null,Hi=(sr<<5)+(xe+1)+this.points.length,Ca=0,Wi=on;Ca<Wi.length;Ca+=1){var jo=Gr.points[Wi[Ca]];if(!(jo.zoom<=xe)){jo.zoom=xe;var uo=jo.numPoints||1;On+=jo.x*uo,ji+=jo.y*uo,jo.parentId=Hi,cr&&(oi||(oi=this._map(Ge,!0)),cr(oi,this._map(jo)))}}Ge.parentId=Hi,rt.push(we(On/Dn,ji/Dn,Hi,Dn,oi))}else if(rt.push(Ge),Dn>1)for(var Pn=0,bn=on;Pn<bn.length;Pn+=1){var Oi=Gr.points[bn[Pn]];Oi.zoom<=xe||(Oi.zoom=xe,rt.push(Oi))}}}return rt},ur.prototype._getOriginId=function(Xe){return Xe-this.points.length>>5},ur.prototype._getOriginZoom=function(Xe){return(Xe-this.points.length)%32},ur.prototype._map=function(Xe,xe){if(Xe.numPoints)return xe?lt({},Xe.properties):Xe.properties;var rt=this.points[Xe.index].properties,kt=this.options.map(rt);return xe&&kt===rt?lt({},kt):kt},zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zt.prototype.splitTile=function(Xe,xe,rt,kt,cr,Ar,Lr){for(var sr=[Xe,xe,rt,kt],Ge=this.options,Gr=Ge.debug;sr.length;){kt=sr.pop(),rt=sr.pop(),xe=sr.pop(),Xe=sr.pop();var on=1<<xe,cn=mr(xe,rt,kt),Dn=this.tiles[cn];if(!Dn&&(Gr>1&&console.time("creation"),Dn=this.tiles[cn]=Pr(Xe,xe,rt,kt,Ge),this.tileCoords.push({z:xe,x:rt,y:kt}),Gr)){Gr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,rt,kt,Dn.numFeatures,Dn.numPoints,Dn.numSimplified),console.timeEnd("creation"));var ci="z"+xe;this.stats[ci]=(this.stats[ci]||0)+1,this.total++}if(Dn.source=Xe,cr){if(xe===Ge.maxZoom||xe===cr)continue;var ia=1<<cr-xe;if(rt!==Math.floor(Ar/ia)||kt!==Math.floor(Lr/ia))continue}else if(xe===Ge.indexMaxZoom||Dn.numPoints<=Ge.indexMaxPoints)continue;if(Dn.source=null,Xe.length!==0){Gr>1&&console.time("clipping");var Vi,On,ji,oi,Hi,Ca,Wi=.5*Ge.buffer/Ge.extent,jo=.5-Wi,uo=.5+Wi,Pn=1+Wi;Vi=On=ji=oi=null,Hi=W(Xe,on,rt-Wi,rt+uo,0,Dn.minX,Dn.maxX,Ge),Ca=W(Xe,on,rt+jo,rt+Pn,0,Dn.minX,Dn.maxX,Ge),Xe=null,Hi&&(Vi=W(Hi,on,kt-Wi,kt+uo,1,Dn.minY,Dn.maxY,Ge),On=W(Hi,on,kt+jo,kt+Pn,1,Dn.minY,Dn.maxY,Ge),Hi=null),Ca&&(ji=W(Ca,on,kt-Wi,kt+uo,1,Dn.minY,Dn.maxY,Ge),oi=W(Ca,on,kt+jo,kt+Pn,1,Dn.minY,Dn.maxY,Ge),Ca=null),Gr>1&&console.timeEnd("clipping"),sr.push(Vi||[],xe+1,2*rt,2*kt),sr.push(On||[],xe+1,2*rt,2*kt+1),sr.push(ji||[],xe+1,2*rt+1,2*kt),sr.push(oi||[],xe+1,2*rt+1,2*kt+1)}}},zt.prototype.getTile=function(Xe,xe,rt){var kt=this.options,cr=kt.extent,Ar=kt.debug;if(Xe<0||Xe>24)return null;var Lr=1<<Xe,sr=mr(Xe,xe=(xe%Lr+Lr)%Lr,rt);if(this.tiles[sr])return br(this.tiles[sr],cr);Ar>1&&console.log("drilling down to z%d-%d-%d",Xe,xe,rt);for(var Ge,Gr=Xe,on=xe,cn=rt;!Ge&&Gr>0;)Gr--,on=Math.floor(on/2),cn=Math.floor(cn/2),Ge=this.tiles[mr(Gr,on,cn)];return Ge&&Ge.source?(Ar>1&&console.log("found parent tile z%d-%d-%d",Gr,on,cn),Ar>1&&console.time("drilling down"),this.splitTile(Ge.source,Gr,on,cn,Xe,xe,rt),Ar>1&&console.timeEnd("drilling down"),this.tiles[sr]?br(this.tiles[sr],cr):null):null};var X=function(Xe){function xe(rt,kt,cr,Ar){Xe.call(this,rt,kt,cr,Or),Ar&&(this.loadGeoJSON=Ar)}return Xe&&(xe.__proto__=Xe),(xe.prototype=Object.create(Xe&&Xe.prototype)).constructor=xe,xe.prototype.loadData=function(rt,kt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=kt,this._pendingLoadDataParams=rt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},xe.prototype._loadData=function(){var rt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var kt=this._pendingCallback,cr=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ar=!!(cr&&cr.request&&cr.request.collectResourceTiming)&&new l.RequestPerformance(cr.request);this.loadGeoJSON(cr,function(Lr,sr){if(Lr||!sr)return kt(Lr);if(typeof sr!="object")return kt(new Error("Input data given to '"+cr.source+"' is not a valid GeoJSON object."));(function Dn(ci,ia){var Vi,On=ci&&ci.type;if(On==="FeatureCollection")for(Vi=0;Vi<ci.features.length;Vi++)Dn(ci.features[Vi],ia);else if(On==="GeometryCollection")for(Vi=0;Vi<ci.geometries.length;Vi++)Dn(ci.geometries[Vi],ia);else if(On==="Feature")Dn(ci.geometry,ia);else if(On==="Polygon")pe(ci.coordinates,ia);else if(On==="MultiPolygon")for(Vi=0;Vi<ci.coordinates.length;Vi++)pe(ci.coordinates[Vi],ia);return ci})(sr,!0);try{if(cr.filter){var Ge=l.createExpression(cr.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ge.result==="error")throw new Error(Ge.value.map(function(Dn){return Dn.key+": "+Dn.message}).join(", "));var Gr=sr.features.filter(function(Dn){return Ge.value.evaluate({zoom:0},Dn)});sr={type:"FeatureCollection",features:Gr}}rt._geoJSONIndex=cr.cluster?new ur(function(Dn){var ci=Dn.superclusterOptions,ia=Dn.clusterProperties;if(!ia||!ci)return ci;for(var Vi={},On={},ji={accumulated:null,zoom:0},oi={properties:null},Hi=Object.keys(ia),Ca=0,Wi=Hi;Ca<Wi.length;Ca+=1){var jo=Wi[Ca],uo=ia[jo],Pn=uo[0],bn=l.createExpression(uo[1]),Oi=l.createExpression(typeof Pn=="string"?[Pn,["accumulated"],["get",jo]]:Pn);Vi[jo]=bn.value,On[jo]=Oi.value}return ci.map=function(di){oi.properties=di;for(var va={},wa=0,Aa=Hi;wa<Aa.length;wa+=1){var Ta=Aa[wa];va[Ta]=Vi[Ta].evaluate(ji,oi)}return va},ci.reduce=function(di,va){oi.properties=va;for(var wa=0,Aa=Hi;wa<Aa.length;wa+=1){var Ta=Aa[wa];ji.accumulated=di[Ta],di[Ta]=On[Ta].evaluate(ji,oi)}},ci}(cr)).load(sr.features):function(Dn,ci){return new zt(Dn,ci)}(sr,cr.geojsonVtOptions)}catch(Dn){return kt(Dn)}rt.loaded={};var on={};if(Ar){var cn=Ar.finish();cn&&(on.resourceTiming={},on.resourceTiming[cr.source]=JSON.parse(JSON.stringify(cn)))}kt(null,on)})}},xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},xe.prototype.reloadTile=function(rt,kt){var cr=this.loaded;return cr&&cr[rt.uid]?Xe.prototype.reloadTile.call(this,rt,kt):this.loadTile(rt,kt)},xe.prototype.loadGeoJSON=function(rt,kt){if(rt.request)l.getJSON(rt.request,kt);else{if(typeof rt.data!="string")return kt(new Error("Input data given to '"+rt.source+"' is not a valid GeoJSON object."));try{return kt(null,JSON.parse(rt.data))}catch(cr){return kt(new Error("Input data given to '"+rt.source+"' is not a valid GeoJSON object."))}}},xe.prototype.removeSource=function(rt,kt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),kt()},xe.prototype.getClusterExpansionZoom=function(rt,kt){try{kt(null,this._geoJSONIndex.getClusterExpansionZoom(rt.clusterId))}catch(cr){kt(cr)}},xe.prototype.getClusterChildren=function(rt,kt){try{kt(null,this._geoJSONIndex.getChildren(rt.clusterId))}catch(cr){kt(cr)}},xe.prototype.getClusterLeaves=function(rt,kt){try{kt(null,this._geoJSONIndex.getLeaves(rt.clusterId,rt.limit,rt.offset))}catch(cr){kt(cr)}},xe}(ue),Nr=function(Xe){var xe=this;this.self=Xe,this.actor=new l.Actor(Xe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ue,geojson:X},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(rt,kt){if(xe.workerSourceTypes[rt])throw new Error('Worker source with name "'+rt+'" already registered.');xe.workerSourceTypes[rt]=kt},this.self.registerRTLTextPlugin=function(rt){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=rt.applyArabicShaping,l.plugin.processBidirectionalText=rt.processBidirectionalText,l.plugin.processStyledBidirectionalText=rt.processStyledBidirectionalText}};return Nr.prototype.setReferrer=function(Xe,xe){this.referrer=xe},Nr.prototype.setImages=function(Xe,xe,rt){for(var kt in this.availableImages[Xe]=xe,this.workerSources[Xe]){var cr=this.workerSources[Xe][kt];for(var Ar in cr)cr[Ar].availableImages=xe}rt()},Nr.prototype.setLayers=function(Xe,xe,rt){this.getLayerIndex(Xe).replace(xe),rt()},Nr.prototype.updateLayers=function(Xe,xe,rt){this.getLayerIndex(Xe).update(xe.layers,xe.removedIds),rt()},Nr.prototype.loadTile=function(Xe,xe,rt){this.getWorkerSource(Xe,xe.type,xe.source).loadTile(xe,rt)},Nr.prototype.loadDEMTile=function(Xe,xe,rt){this.getDEMWorkerSource(Xe,xe.source).loadTile(xe,rt)},Nr.prototype.reloadTile=function(Xe,xe,rt){this.getWorkerSource(Xe,xe.type,xe.source).reloadTile(xe,rt)},Nr.prototype.abortTile=function(Xe,xe,rt){this.getWorkerSource(Xe,xe.type,xe.source).abortTile(xe,rt)},Nr.prototype.removeTile=function(Xe,xe,rt){this.getWorkerSource(Xe,xe.type,xe.source).removeTile(xe,rt)},Nr.prototype.removeDEMTile=function(Xe,xe){this.getDEMWorkerSource(Xe,xe.source).removeTile(xe)},Nr.prototype.removeSource=function(Xe,xe,rt){if(this.workerSources[Xe]&&this.workerSources[Xe][xe.type]&&this.workerSources[Xe][xe.type][xe.source]){var kt=this.workerSources[Xe][xe.type][xe.source];delete this.workerSources[Xe][xe.type][xe.source],kt.removeSource!==void 0?kt.removeSource(xe,rt):rt()}},Nr.prototype.loadWorkerSource=function(Xe,xe,rt){try{this.self.importScripts(xe.url),rt()}catch(kt){rt(kt.toString())}},Nr.prototype.syncRTLPluginState=function(Xe,xe,rt){try{l.plugin.setState(xe);var kt=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&kt!=null){this.self.importScripts(kt);var cr=l.plugin.isParsed();rt(cr?void 0:new Error("RTL Text Plugin failed to import scripts from "+kt),cr)}}catch(Ar){rt(Ar.toString())}},Nr.prototype.getAvailableImages=function(Xe){var xe=this.availableImages[Xe];return xe||(xe=[]),xe},Nr.prototype.getLayerIndex=function(Xe){var xe=this.layerIndexes[Xe];return xe||(xe=this.layerIndexes[Xe]=new z),xe},Nr.prototype.getWorkerSource=function(Xe,xe,rt){var kt=this;return this.workerSources[Xe]||(this.workerSources[Xe]={}),this.workerSources[Xe][xe]||(this.workerSources[Xe][xe]={}),this.workerSources[Xe][xe][rt]||(this.workerSources[Xe][xe][rt]=new this.workerSourceTypes[xe]({send:function(cr,Ar,Lr){kt.actor.send(cr,Ar,Lr,Xe)}},this.getLayerIndex(Xe),this.getAvailableImages(Xe))),this.workerSources[Xe][xe][rt]},Nr.prototype.getDEMWorkerSource=function(Xe,xe){return this.demWorkerSources[Xe]||(this.demWorkerSources[Xe]={}),this.demWorkerSources[Xe][xe]||(this.demWorkerSources[Xe][xe]=new re),this.demWorkerSources[Xe][xe]},Nr.prototype.enforceCacheSizeLimit=function(Xe,xe){l.enforceCacheSizeLimit(xe)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Nr(self)),Nr}),C(["./shared"],function(l){"use strict";var $=l.createCommonjsModule(function(f){function g(Y){return!p(Y)}function p(Y){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Pe,ct,Vt=new Blob([""],{type:"text/javascript"}),fr=URL.createObjectURL(Vt);try{ct=new Worker(fr),Pe=!0}catch(Ir){Pe=!1}return ct&&ct.terminate(),URL.revokeObjectURL(fr),Pe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Pe=document.createElement("canvas");Pe.width=Pe.height=1;var ct=Pe.getContext("2d");if(!ct)return!1;var Vt=ct.getImageData(0,0,1,1);return Vt&&Vt.width===Pe.width}()?(E[ye=Y&&Y.failIfMajorPerformanceCaveat]===void 0&&(E[ye]=function(Pe){var ct=function(fr){var Ir=document.createElement("canvas"),Dr=Object.create(g.webGLContextAttributes);return Dr.failIfMajorPerformanceCaveat=fr,Ir.probablySupportsContext?Ir.probablySupportsContext("webgl",Dr)||Ir.probablySupportsContext("experimental-webgl",Dr):Ir.supportsContext?Ir.supportsContext("webgl",Dr)||Ir.supportsContext("experimental-webgl",Dr):Ir.getContext("webgl",Dr)||Ir.getContext("experimental-webgl",Dr)}(Pe);if(!ct)return!1;var Vt=ct.createShader(ct.VERTEX_SHADER);return!(!Vt||ct.isContextLost())&&(ct.shaderSource(Vt,"void main() {}"),ct.compileShader(Vt),ct.getShaderParameter(Vt,ct.COMPILE_STATUS)===!0)}(ye)),E[ye]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ye}f.exports?f.exports=g:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=g,window.mapboxgl.notSupportedReason=p);var E={};g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),R={create:function(f,g,p){var E=l.window.document.createElement(f);return g!==void 0&&(E.className=g),p&&p.appendChild(E),E},createNS:function(f,g){return l.window.document.createElementNS(f,g)}},z=l.window.document&&l.window.document.documentElement.style;function L(f){if(!z)return f[0];for(var g=0;g<f.length;g++)if(f[g]in z)return f[g];return f[0]}var T,O=L(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);R.disableDrag=function(){z&&O&&(T=z[O],z[O]="none")},R.enableDrag=function(){z&&O&&(z[O]=T)};var F=L(["transform","WebkitTransform"]);R.setTransform=function(f,g){f.style[F]=g};var ue=!1;try{var Ae=Object.defineProperty({},"passive",{get:function(){ue=!0}});l.window.addEventListener("test",Ae,Ae),l.window.removeEventListener("test",Ae,Ae)}catch(f){ue=!1}R.addEventListener=function(f,g,p,E){E===void 0&&(E={}),f.addEventListener(g,p,"passive"in E&&ue?E:E.capture)},R.removeEventListener=function(f,g,p,E){E===void 0&&(E={}),f.removeEventListener(g,p,"passive"in E&&ue?E:E.capture)};var re=function(f){f.preventDefault(),f.stopPropagation(),l.window.removeEventListener("click",re,!0)};function pe(f){var g=f.userImage;return!!(g&&g.render&&g.render())&&(f.data.replace(new Uint8Array(g.data.buffer)),!0)}R.suppressClick=function(){l.window.addEventListener("click",re,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",re,!0)},0)},R.mousePos=function(f,g){var p=f.getBoundingClientRect();return new l.Point(g.clientX-p.left-f.clientLeft,g.clientY-p.top-f.clientTop)},R.touchPos=function(f,g){for(var p=f.getBoundingClientRect(),E=[],Y=0;Y<g.length;Y++)E.push(new l.Point(g[Y].clientX-p.left-f.clientLeft,g[Y].clientY-p.top-f.clientTop));return E},R.mouseButton=function(f){return l.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},R.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};var fe=function(f){function g(){f.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.isLoaded=function(){return this.loaded},g.prototype.setLoaded=function(p){if(this.loaded!==p&&(this.loaded=p,p)){for(var E=0,Y=this.requestors;E<Y.length;E+=1){var ye=Y[E];this._notify(ye.ids,ye.callback)}this.requestors=[]}},g.prototype.getImage=function(p){return this.images[p]},g.prototype.addImage=function(p,E){this._validate(p,E)&&(this.images[p]=E)},g.prototype._validate=function(p,E){var Y=!0;return this._validateStretch(E.stretchX,E.data&&E.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+p+'" has invalid "stretchX" value'))),Y=!1),this._validateStretch(E.stretchY,E.data&&E.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+p+'" has invalid "stretchY" value'))),Y=!1),this._validateContent(E.content,E)||(this.fire(new l.ErrorEvent(new Error('Image "'+p+'" has invalid "content" value'))),Y=!1),Y},g.prototype._validateStretch=function(p,E){if(!p)return!0;for(var Y=0,ye=0,Pe=p;ye<Pe.length;ye+=1){var ct=Pe[ye];if(ct[0]<Y||ct[1]<ct[0]||E<ct[1])return!1;Y=ct[1]}return!0},g.prototype._validateContent=function(p,E){return!(p&&(p.length!==4||p[0]<0||E.data.width<p[0]||p[1]<0||E.data.height<p[1]||p[2]<0||E.data.width<p[2]||p[3]<0||E.data.height<p[3]||p[2]<p[0]||p[3]<p[1]))},g.prototype.updateImage=function(p,E){E.version=this.images[p].version+1,this.images[p]=E,this.updatedImages[p]=!0},g.prototype.removeImage=function(p){var E=this.images[p];delete this.images[p],delete this.patterns[p],E.userImage&&E.userImage.onRemove&&E.userImage.onRemove()},g.prototype.listImages=function(){return Object.keys(this.images)},g.prototype.getImages=function(p,E){var Y=!0;if(!this.isLoaded())for(var ye=0,Pe=p;ye<Pe.length;ye+=1)this.images[Pe[ye]]||(Y=!1);this.isLoaded()||Y?this._notify(p,E):this.requestors.push({ids:p,callback:E})},g.prototype._notify=function(p,E){for(var Y={},ye=0,Pe=p;ye<Pe.length;ye+=1){var ct=Pe[ye];this.images[ct]||this.fire(new l.Event("styleimagemissing",{id:ct}));var Vt=this.images[ct];Vt?Y[ct]={data:Vt.data.clone(),pixelRatio:Vt.pixelRatio,sdf:Vt.sdf,version:Vt.version,stretchX:Vt.stretchX,stretchY:Vt.stretchY,content:Vt.content,hasRenderCallback:Boolean(Vt.userImage&&Vt.userImage.render)}:l.warnOnce('Image "'+ct+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}E(null,Y)},g.prototype.getPixelSize=function(){var p=this.atlasImage;return{width:p.width,height:p.height}},g.prototype.getPattern=function(p){var E=this.patterns[p],Y=this.getImage(p);if(!Y)return null;if(E&&E.position.version===Y.version)return E.position;if(E)E.position.version=Y.version;else{var ye={w:Y.data.width+2,h:Y.data.height+2,x:0,y:0},Pe=new l.ImagePosition(ye,Y);this.patterns[p]={bin:ye,position:Pe}}return this._updatePatternAtlas(),this.patterns[p].position},g.prototype.bind=function(p){var E=p.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(p,this.atlasImage,E.RGBA),this.atlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE)},g.prototype._updatePatternAtlas=function(){var p=[];for(var E in this.patterns)p.push(this.patterns[E].bin);var Y=l.potpack(p),ye=Y.w,Pe=Y.h,ct=this.atlasImage;for(var Vt in ct.resize({width:ye||1,height:Pe||1}),this.patterns){var fr=this.patterns[Vt].bin,Ir=fr.x+1,Dr=fr.y+1,jr=this.images[Vt].data,En=jr.width,gn=jr.height;l.RGBAImage.copy(jr,ct,{x:0,y:0},{x:Ir,y:Dr},{width:En,height:gn}),l.RGBAImage.copy(jr,ct,{x:0,y:gn-1},{x:Ir,y:Dr-1},{width:En,height:1}),l.RGBAImage.copy(jr,ct,{x:0,y:0},{x:Ir,y:Dr+gn},{width:En,height:1}),l.RGBAImage.copy(jr,ct,{x:En-1,y:0},{x:Ir-1,y:Dr},{width:1,height:gn}),l.RGBAImage.copy(jr,ct,{x:0,y:0},{x:Ir+En,y:Dr},{width:1,height:gn})}this.dirty=!0},g.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},g.prototype.dispatchRenderCallbacks=function(p){for(var E=0,Y=p;E<Y.length;E+=1){var ye=Y[E];if(!this.callbackDispatchedThisFrame[ye]){this.callbackDispatchedThisFrame[ye]=!0;var Pe=this.images[ye];pe(Pe)&&this.updateImage(ye,Pe)}}},g}(l.Evented),ke=ut,je=ut,bt=1e20;function ut(f,g,p,E,Y,ye){this.fontSize=f||24,this.buffer=g===void 0?3:g,this.cutoff=E||.25,this.fontFamily=Y||"sans-serif",this.fontWeight=ye||"normal",this.radius=p||8;var Pe=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Pe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Pe*Pe),this.gridInner=new Float64Array(Pe*Pe),this.f=new Float64Array(Pe),this.d=new Float64Array(Pe),this.z=new Float64Array(Pe+1),this.v=new Int16Array(Pe),this.middle=Math.round(Pe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function wt(f,g,p,E,Y,ye,Pe){for(var ct=0;ct<g;ct++){for(var Vt=0;Vt<p;Vt++)E[Vt]=f[Vt*g+ct];for(se(E,Y,ye,Pe,p),Vt=0;Vt<p;Vt++)f[Vt*g+ct]=Y[Vt]}for(Vt=0;Vt<p;Vt++){for(ct=0;ct<g;ct++)E[ct]=f[Vt*g+ct];for(se(E,Y,ye,Pe,g),ct=0;ct<g;ct++)f[Vt*g+ct]=Math.sqrt(Y[ct])}}function se(f,g,p,E,Y){p[0]=0,E[0]=-bt,E[1]=+bt;for(var ye=1,Pe=0;ye<Y;ye++){for(var ct=(f[ye]+ye*ye-(f[p[Pe]]+p[Pe]*p[Pe]))/(2*ye-2*p[Pe]);ct<=E[Pe];)Pe--,ct=(f[ye]+ye*ye-(f[p[Pe]]+p[Pe]*p[Pe]))/(2*ye-2*p[Pe]);p[++Pe]=ye,E[Pe]=ct,E[Pe+1]=+bt}for(ye=0,Pe=0;ye<Y;ye++){for(;E[Pe+1]<ye;)Pe++;g[ye]=(ye-p[Pe])*(ye-p[Pe])+f[p[Pe]]}}ut.prototype.draw=function(f){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(f,this.buffer,this.middle);for(var g=this.ctx.getImageData(0,0,this.size,this.size),p=new Uint8ClampedArray(this.size*this.size),E=0;E<this.size*this.size;E++){var Y=g.data[4*E+3]/255;this.gridOuter[E]=Y===1?0:Y===0?bt:Math.pow(Math.max(0,.5-Y),2),this.gridInner[E]=Y===1?bt:Y===0?0:Math.pow(Math.max(0,Y-.5),2)}for(wt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),wt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),E=0;E<this.size*this.size;E++)p[E]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[E]-this.gridInner[E])/this.radius+this.cutoff))));return p},ke.default=je;var qe=function(f,g){this.requestManager=f,this.localIdeographFontFamily=g,this.entries={}};qe.prototype.setURL=function(f){this.url=f},qe.prototype.getGlyphs=function(f,g){var p=this,E=[];for(var Y in f)for(var ye=0,Pe=f[Y];ye<Pe.length;ye+=1)E.push({stack:Y,id:Pe[ye]});l.asyncAll(E,function(ct,Vt){var fr=ct.stack,Ir=ct.id,Dr=p.entries[fr];Dr||(Dr=p.entries[fr]={glyphs:{},requests:{},ranges:{}});var jr=Dr.glyphs[Ir];if(jr===void 0){if(jr=p._tinySDF(Dr,fr,Ir))return Dr.glyphs[Ir]=jr,void Vt(null,{stack:fr,id:Ir,glyph:jr});var En=Math.floor(Ir/256);if(256*En>65535)Vt(new Error("glyphs > 65535 not supported"));else if(Dr.ranges[En])Vt(null,{stack:fr,id:Ir,glyph:jr});else{var gn=Dr.requests[En];gn||(gn=Dr.requests[En]=[],qe.loadGlyphRange(fr,En,p.url,p.requestManager,function(Bn,fn){if(fn){for(var Fn in fn)p._doesCharSupportLocalGlyph(+Fn)||(Dr.glyphs[+Fn]=fn[+Fn]);Dr.ranges[En]=!0}for(var jn=0,vi=gn;jn<vi.length;jn+=1)(0,vi[jn])(Bn,fn);delete Dr.requests[En]})),gn.push(function(Bn,fn){Bn?Vt(Bn):fn&&Vt(null,{stack:fr,id:Ir,glyph:fn[Ir]||null})})}}else Vt(null,{stack:fr,id:Ir,glyph:jr})},function(ct,Vt){if(ct)g(ct);else if(Vt){for(var fr={},Ir=0,Dr=Vt;Ir<Dr.length;Ir+=1){var jr=Dr[Ir],En=jr.stack,gn=jr.id,Bn=jr.glyph;(fr[En]||(fr[En]={}))[gn]=Bn&&{id:Bn.id,bitmap:Bn.bitmap.clone(),metrics:Bn.metrics}}g(null,fr)}})},qe.prototype._doesCharSupportLocalGlyph=function(f){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](f)||l.isChar["Hangul Syllables"](f)||l.isChar.Hiragana(f)||l.isChar.Katakana(f))},qe.prototype._tinySDF=function(f,g,p){var E=this.localIdeographFontFamily;if(E&&this._doesCharSupportLocalGlyph(p)){var Y=f.tinySDF;if(!Y){var ye="400";/bold/i.test(g)?ye="900":/medium/i.test(g)?ye="500":/light/i.test(g)&&(ye="200"),Y=f.tinySDF=new qe.TinySDF(24,3,8,.25,E,ye)}return{id:p,bitmap:new l.AlphaImage({width:30,height:30},Y.draw(String.fromCharCode(p))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},qe.loadGlyphRange=function(f,g,p,E,Y){var ye=256*g,Pe=ye+255,ct=E.transformRequest(E.normalizeGlyphsURL(p).replace("{fontstack}",f).replace("{range}",ye+"-"+Pe),l.ResourceType.Glyphs);l.getArrayBuffer(ct,function(Vt,fr){if(Vt)Y(Vt);else if(fr){for(var Ir={},Dr=0,jr=l.parseGlyphPBF(fr);Dr<jr.length;Dr+=1){var En=jr[Dr];Ir[En.id]=En}Y(null,Ir)}})},qe.TinySDF=ke;var me=function(){this.specification=l.styleSpec.light.position};me.prototype.possiblyEvaluate=function(f,g){return l.sphericalToCartesian(f.expression.evaluate(g))},me.prototype.interpolate=function(f,g,p){return{x:l.number(f.x,g.x,p),y:l.number(f.y,g.y,p),z:l.number(f.z,g.z,p)}};var _e=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new me,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),Te=function(f){function g(p){f.call(this),this._transitionable=new l.Transitionable(_e),this.setLight(p),this._transitioning=this._transitionable.untransitioned()}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getLight=function(){return this._transitionable.serialize()},g.prototype.setLight=function(p,E){if(E===void 0&&(E={}),!this._validate(l.validateLight,p,E))for(var Y in p){var ye=p[Y];l.endsWith(Y,"-transition")?this._transitionable.setTransition(Y.slice(0,-11),ye):this._transitionable.setValue(Y,ye)}},g.prototype.updateTransitions=function(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)},g.prototype.hasTransition=function(){return this._transitioning.hasTransition()},g.prototype.recalculate=function(p){this.properties=this._transitioning.possiblyEvaluate(p)},g.prototype._validate=function(p,E,Y){return(!Y||Y.validate!==!1)&&l.emitValidationErrors(this,p.call(l.validateStyle,l.extend({value:E,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},g}(l.Evented),ht=function(f,g){this.width=f,this.height=g,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ht.prototype.getDash=function(f,g){var p=f.join(",")+String(g);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(f,g)),this.dashEntry[p]},ht.prototype.getDashRanges=function(f,g,p){var E=[],Y=f.length%2==1?-f[f.length-1]*p:0,ye=f[0]*p,Pe=!0;E.push({left:Y,right:ye,isDash:Pe,zeroLength:f[0]===0});for(var ct=f[0],Vt=1;Vt<f.length;Vt++){var fr=f[Vt];E.push({left:Y=ct*p,right:ye=(ct+=fr)*p,isDash:Pe=!Pe,zeroLength:fr===0})}return E},ht.prototype.addRoundDash=function(f,g,p){for(var E=g/2,Y=-p;Y<=p;Y++)for(var ye=this.width*(this.nextRow+p+Y),Pe=0,ct=f[Pe],Vt=0;Vt<this.width;Vt++){Vt/ct.right>1&&(ct=f[++Pe]);var fr=Math.abs(Vt-ct.left),Ir=Math.abs(Vt-ct.right),Dr=Math.min(fr,Ir),jr=void 0,En=Y/p*(E+1);if(ct.isDash){var gn=E-Math.abs(En);jr=Math.sqrt(Dr*Dr+gn*gn)}else jr=E-Math.sqrt(Dr*Dr+En*En);this.data[ye+Vt]=Math.max(0,Math.min(255,jr+128))}},ht.prototype.addRegularDash=function(f){for(var g=f.length-1;g>=0;--g){var p=f[g],E=f[g+1];p.zeroLength?f.splice(g,1):E&&E.isDash===p.isDash&&(E.left=p.left,f.splice(g,1))}var Y=f[0],ye=f[f.length-1];Y.isDash===ye.isDash&&(Y.left=ye.left-this.width,ye.right=Y.right+this.width);for(var Pe=this.width*this.nextRow,ct=0,Vt=f[ct],fr=0;fr<this.width;fr++){fr/Vt.right>1&&(Vt=f[++ct]);var Ir=Math.abs(fr-Vt.left),Dr=Math.abs(fr-Vt.right),jr=Math.min(Ir,Dr);this.data[Pe+fr]=Math.max(0,Math.min(255,(Vt.isDash?jr:-jr)+128))}},ht.prototype.addDash=function(f,g){var p=g?7:0,E=2*p+1;if(this.nextRow+E>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var Y=0,ye=0;ye<f.length;ye++)Y+=f[ye];if(Y!==0){var Pe=this.width/Y,ct=this.getDashRanges(f,this.width,Pe);g?this.addRoundDash(ct,Pe,p):this.addRegularDash(ct)}var Vt={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:Y};return this.nextRow+=E,this.dirty=!0,Vt},ht.prototype.bind=function(f){var g=f.gl;this.texture?(g.bindTexture(g.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,g.texSubImage2D(g.TEXTURE_2D,0,0,0,this.width,this.height,g.ALPHA,g.UNSIGNED_BYTE,this.data))):(this.texture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texImage2D(g.TEXTURE_2D,0,g.ALPHA,this.width,this.height,0,g.ALPHA,g.UNSIGNED_BYTE,this.data))};var We=function f(g,p){this.workerPool=g,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var E=this.workerPool.acquire(this.id),Y=0;Y<E.length;Y++){var ye=new f.Actor(E[Y],p,this.id);ye.name="Worker "+Y,this.actors.push(ye)}};function Ne(f,g,p){var E=function(Y,ye){if(Y)return p(Y);if(ye){var Pe=l.pick(l.extend(ye,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ye.vector_layers&&(Pe.vectorLayers=ye.vector_layers,Pe.vectorLayerIds=Pe.vectorLayers.map(function(ct){return ct.id})),Pe.tiles=g.canonicalizeTileset(Pe,f.url),p(null,Pe)}};return f.url?l.getJSON(g.transformRequest(g.normalizeSourceURL(f.url),l.ResourceType.Source),E):l.browser.frame(function(){return E(null,f)})}We.prototype.broadcast=function(f,g,p){l.asyncAll(this.actors,function(E,Y){E.send(f,g,Y)},p=p||function(){})},We.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},We.prototype.remove=function(){this.actors.forEach(function(f){f.remove()}),this.actors=[],this.workerPool.release(this.id)},We.Actor=l.Actor;var he=function(f,g,p){this.bounds=l.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=g||0,this.maxzoom=p||24};he.prototype.validateBounds=function(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]},he.prototype.contains=function(f){var g=Math.pow(2,f.z),p=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*g),E=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*g),Y=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*g),ye=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*g);return f.x>=p&&f.x<Y&&f.y>=E&&f.y<ye};var Ve=function(f){function g(p,E,Y,ye){if(f.call(this),this.id=p,this.dispatcher=Y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(E,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},E),this._collectResourceTiming=E.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ye)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.load=function(){var p=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ne(this._options,this.map._requestManager,function(E,Y){p._tileJSONRequest=null,p._loaded=!0,E?p.fire(new l.ErrorEvent(E)):Y&&(l.extend(p,Y),Y.bounds&&(p.tileBounds=new he(Y.bounds,p.minzoom,p.maxzoom)),l.postTurnstileEvent(Y.tiles,p.map._requestManager._customAccessToken),l.postMapLoadEvent(Y.tiles,p.map._getMapId(),p.map._requestManager._skuToken,p.map._requestManager._customAccessToken),p.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),p.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},g.prototype.loaded=function(){return this._loaded},g.prototype.hasTile=function(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.setSourceProperty=function(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},g.prototype.setTiles=function(p){var E=this;return this.setSourceProperty(function(){E._options.tiles=p}),this},g.prototype.setUrl=function(p){var E=this;return this.setSourceProperty(function(){E.url=p,E._options.url=p}),this},g.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},g.prototype.serialize=function(){return l.extend({},this._options)},g.prototype.loadTile=function(p,E){var Y=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),ye={request:this.map._requestManager.transformRequest(Y,l.ResourceType.Tile),uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Pe(ct,Vt){return delete p.request,p.aborted?E(null):ct&&ct.status!==404?E(ct):(Vt&&Vt.resourceTiming&&(p.resourceTiming=Vt.resourceTiming),this.map._refreshExpiredTiles&&Vt&&p.setExpiryData(Vt),p.loadVectorData(Vt,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),E(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}ye.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired"?p.state==="loading"?p.reloadCallback=E:p.request=p.actor.send("reloadTile",ye,Pe.bind(this)):(p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",ye,Pe.bind(this)))},g.prototype.abortTile=function(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id},void 0)},g.prototype.unloadTile=function(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id},void 0)},g.prototype.hasTransition=function(){return!1},g}(l.Evented),ie=function(f){function g(p,E,Y,ye){f.call(this),this.id=p,this.dispatcher=Y,this.setEventedParent(ye),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},E),l.extend(this,l.pick(E,["url","scheme","tileSize"]))}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.load=function(){var p=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ne(this._options,this.map._requestManager,function(E,Y){p._tileJSONRequest=null,p._loaded=!0,E?p.fire(new l.ErrorEvent(E)):Y&&(l.extend(p,Y),Y.bounds&&(p.tileBounds=new he(Y.bounds,p.minzoom,p.maxzoom)),l.postTurnstileEvent(Y.tiles),l.postMapLoadEvent(Y.tiles,p.map._getMapId(),p.map._requestManager._skuToken),p.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),p.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},g.prototype.loaded=function(){return this._loaded},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},g.prototype.serialize=function(){return l.extend({},this._options)},g.prototype.hasTile=function(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)},g.prototype.loadTile=function(p,E){var Y=this,ye=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);p.request=l.getImage(this.map._requestManager.transformRequest(ye,l.ResourceType.Tile),function(Pe,ct){if(delete p.request,p.aborted)p.state="unloaded",E(null);else if(Pe)p.state="errored",E(Pe);else if(ct){Y.map._refreshExpiredTiles&&p.setExpiryData(ct),delete ct.cacheControl,delete ct.expires;var Vt=Y.map.painter.context,fr=Vt.gl;p.texture=Y.map.painter.getTileTexture(ct.width),p.texture?p.texture.update(ct,{useMipmap:!0}):(p.texture=new l.Texture(Vt,ct,fr.RGBA,{useMipmap:!0}),p.texture.bind(fr.LINEAR,fr.CLAMP_TO_EDGE,fr.LINEAR_MIPMAP_NEAREST),Vt.extTextureFilterAnisotropic&&fr.texParameterf(fr.TEXTURE_2D,Vt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Vt.extTextureFilterAnisotropicMax)),p.state="loaded",l.cacheEntryPossiblyAdded(Y.dispatcher),E(null)}})},g.prototype.abortTile=function(p,E){p.request&&(p.request.cancel(),delete p.request),E()},g.prototype.unloadTile=function(p,E){p.texture&&this.map.painter.saveTileTexture(p.texture),E()},g.prototype.hasTransition=function(){return!1},g}(l.Evented),ze=function(f){function g(p,E,Y,ye){f.call(this,p,E,Y,ye),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},E),this.encoding=E.encoding||"mapbox"}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},g.prototype.loadTile=function(p,E){var Y=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ye(Pe,ct){Pe&&(p.state="errored",E(Pe)),ct&&(p.dem=ct,p.needsHillshadePrepare=!0,p.state="loaded",E(null))}p.request=l.getImage(this.map._requestManager.transformRequest(Y,l.ResourceType.Tile),function(Pe,ct){if(delete p.request,p.aborted)p.state="unloaded",E(null);else if(Pe)p.state="errored",E(Pe);else if(ct){this.map._refreshExpiredTiles&&p.setExpiryData(ct),delete ct.cacheControl,delete ct.expires;var Vt=l.window.ImageBitmap&&ct instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?ct:l.browser.getImageData(ct,1),fr={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:Vt,encoding:this.encoding};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",fr,ye.bind(this)))}}.bind(this)),p.neighboringTiles=this._getNeighboringTiles(p.tileID)},g.prototype._getNeighboringTiles=function(p){var E=p.canonical,Y=Math.pow(2,E.z),ye=(E.x-1+Y)%Y,Pe=E.x===0?p.wrap-1:p.wrap,ct=(E.x+1+Y)%Y,Vt=E.x+1===Y?p.wrap+1:p.wrap,fr={};return fr[new l.OverscaledTileID(p.overscaledZ,Pe,E.z,ye,E.y).key]={backfilled:!1},fr[new l.OverscaledTileID(p.overscaledZ,Vt,E.z,ct,E.y).key]={backfilled:!1},E.y>0&&(fr[new l.OverscaledTileID(p.overscaledZ,Pe,E.z,ye,E.y-1).key]={backfilled:!1},fr[new l.OverscaledTileID(p.overscaledZ,p.wrap,E.z,E.x,E.y-1).key]={backfilled:!1},fr[new l.OverscaledTileID(p.overscaledZ,Vt,E.z,ct,E.y-1).key]={backfilled:!1}),E.y+1<Y&&(fr[new l.OverscaledTileID(p.overscaledZ,Pe,E.z,ye,E.y+1).key]={backfilled:!1},fr[new l.OverscaledTileID(p.overscaledZ,p.wrap,E.z,E.x,E.y+1).key]={backfilled:!1},fr[new l.OverscaledTileID(p.overscaledZ,Vt,E.z,ct,E.y+1).key]={backfilled:!1}),fr},g.prototype.unloadTile=function(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded",p.actor&&p.actor.send("removeDEMTile",{uid:p.uid,source:this.id})},g}(ie),Le=function(f){function g(p,E,Y,ye){f.call(this),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Y.getActor(),this.setEventedParent(ye),this._data=E.data,this._options=l.extend({},E),this._collectResourceTiming=E.collectResourceTiming,this._resourceTiming=[],E.maxzoom!==void 0&&(this.maxzoom=E.maxzoom),E.type&&(this.type=E.type),E.attribution&&(this.attribution=E.attribution),this.promoteId=E.promoteId;var Pe=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:E.cluster||!1,geojsonVtOptions:{buffer:(E.buffer!==void 0?E.buffer:128)*Pe,tolerance:(E.tolerance!==void 0?E.tolerance:.375)*Pe,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:E.lineMetrics||!1,generateId:E.generateId||!1},superclusterOptions:{maxZoom:E.clusterMaxZoom!==void 0?Math.min(E.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,E.clusterMinPoints||2),extent:l.EXTENT,radius:(E.clusterRadius||50)*Pe,log:!1,generateId:E.generateId||!1},clusterProperties:E.clusterProperties,filter:E.filter},E.workerOptions)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.load=function(){var p=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(E){if(E)p.fire(new l.ErrorEvent(E));else{var Y={dataType:"source",sourceDataType:"metadata"};p._collectResourceTiming&&p._resourceTiming&&p._resourceTiming.length>0&&(Y.resourceTiming=p._resourceTiming,p._resourceTiming=[]),p.fire(new l.Event("data",Y))}})},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.setData=function(p){var E=this;return this._data=p,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Y){if(Y)E.fire(new l.ErrorEvent(Y));else{var ye={dataType:"source",sourceDataType:"content"};E._collectResourceTiming&&E._resourceTiming&&E._resourceTiming.length>0&&(ye.resourceTiming=E._resourceTiming,E._resourceTiming=[]),E.fire(new l.Event("data",ye))}}),this},g.prototype.getClusterExpansionZoom=function(p,E){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},E),this},g.prototype.getClusterChildren=function(p,E){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},E),this},g.prototype.getClusterLeaves=function(p,E,Y,ye){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:E,offset:Y},ye),this},g.prototype._updateWorkerData=function(p){var E=this;this._loaded=!1;var Y=l.extend({},this.workerOptions),ye=this._data;typeof ye=="string"?(Y.request=this.map._requestManager.transformRequest(l.browser.resolveURL(ye),l.ResourceType.Source),Y.request.collectResourceTiming=this._collectResourceTiming):Y.data=JSON.stringify(ye),this.actor.send(this.type+".loadData",Y,function(Pe,ct){E._removed||ct&&ct.abandoned||(E._loaded=!0,ct&&ct.resourceTiming&&ct.resourceTiming[E.id]&&(E._resourceTiming=ct.resourceTiming[E.id].slice(0)),E.actor.send(E.type+".coalesce",{source:Y.source},null),p(Pe))})},g.prototype.loaded=function(){return this._loaded},g.prototype.loadTile=function(p,E){var Y=this,ye=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(ye,{type:this.type,uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Pe,ct){return delete p.request,p.unloadVectorData(),p.aborted?E(null):Pe?E(Pe):(p.loadVectorData(ct,Y.map.painter,ye==="reloadTile"),E(null))})},g.prototype.abortTile=function(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0},g.prototype.unloadTile=function(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})},g.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},g.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},g.prototype.hasTransition=function(){return!1},g}(l.Evented),Re=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),st=function(f){function g(p,E,Y,ye){f.call(this),this.id=p,this.dispatcher=Y,this.coordinates=E.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ye),this.options=E}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.load=function(p,E){var Y=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(ye,Pe){Y._loaded=!0,ye?Y.fire(new l.ErrorEvent(ye)):Pe&&(Y.image=Pe,p&&(Y.coordinates=p),E&&E(),Y._finishLoading())})},g.prototype.loaded=function(){return this._loaded},g.prototype.updateImage=function(p){var E=this;return this.image&&p.url?(this.options.url=p.url,this.load(p.coordinates,function(){E.texture=null}),this):this},g.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},g.prototype.onAdd=function(p){this.map=p,this.load()},g.prototype.setCoordinates=function(p){var E=this;this.coordinates=p;var Y=p.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(Pe){for(var ct=1/0,Vt=1/0,fr=-1/0,Ir=-1/0,Dr=0,jr=Pe;Dr<jr.length;Dr+=1){var En=jr[Dr];ct=Math.min(ct,En.x),Vt=Math.min(Vt,En.y),fr=Math.max(fr,En.x),Ir=Math.max(Ir,En.y)}var gn=Math.max(fr-ct,Ir-Vt),Bn=Math.max(0,Math.floor(-Math.log(gn)/Math.LN2)),fn=Math.pow(2,Bn);return new l.CanonicalTileID(Bn,Math.floor((ct+fr)/2*fn),Math.floor((Vt+Ir)/2*fn))}(Y),this.minzoom=this.maxzoom=this.tileID.z;var ye=Y.map(function(Pe){return E.tileID.getTilePoint(Pe)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(ye[0].x,ye[0].y,0,0),this._boundsArray.emplaceBack(ye[1].x,ye[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(ye[3].x,ye[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(ye[2].x,ye[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},g.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var p=this.map.painter.context,E=p.gl;for(var Y in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(p,this.image,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE)),this.tiles){var ye=this.tiles[Y];ye.state!=="loaded"&&(ye.state="loaded",ye.texture=this.texture)}}},g.prototype.loadTile=function(p,E){this.tileID&&this.tileID.equals(p.tileID.canonical)?(this.tiles[String(p.tileID.wrap)]=p,p.buckets={},E(null)):(p.state="errored",E(null))},g.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},g.prototype.hasTransition=function(){return!1},g}(l.Evented),vt=function(f){function g(p,E,Y,ye){f.call(this,p,E,Y,ye),this.roundZoom=!0,this.type="video",this.options=E}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.load=function(){var p=this;this._loaded=!1;var E=this.options;this.urls=[];for(var Y=0,ye=E.urls;Y<ye.length;Y+=1)this.urls.push(this.map._requestManager.transformRequest(ye[Y],l.ResourceType.Source).url);l.getVideo(this.urls,function(Pe,ct){p._loaded=!0,Pe?p.fire(new l.ErrorEvent(Pe)):ct&&(p.video=ct,p.video.loop=!0,p.video.setAttribute("playsinline",""),p.video.addEventListener("playing",function(){p.map.triggerRepaint()}),p.map&&p.video.play(),p._finishLoading())})},g.prototype.pause=function(){this.video&&this.video.pause()},g.prototype.play=function(){this.video&&this.video.play()},g.prototype.seek=function(p){if(this.video){var E=this.video.seekable;p<E.start(0)||p>E.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+E.start(0)+" and "+E.end(0)+"-second mark."))):this.video.currentTime=p}},g.prototype.getVideo=function(){return this.video},g.prototype.onAdd=function(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},g.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var p=this.map.painter.context,E=p.gl;for(var Y in this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.texSubImage2D(E.TEXTURE_2D,0,0,0,E.RGBA,E.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(p,this.video,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE)),this.tiles){var ye=this.tiles[Y];ye.state!=="loaded"&&(ye.state="loaded",ye.texture=this.texture)}}},g.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},g.prototype.hasTransition=function(){return this.video&&!this.video.paused},g}(st),Dt=function(f){function g(p,E,Y,ye){f.call(this,p,E,Y,ye),E.coordinates?Array.isArray(E.coordinates)&&E.coordinates.length===4&&!E.coordinates.some(function(Pe){return!Array.isArray(Pe)||Pe.length!==2||Pe.some(function(ct){return typeof ct!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+p,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+p,null,'missing required property "coordinates"'))),E.animate&&typeof E.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+p,null,'optional "animate" property must be a boolean value'))),E.canvas?typeof E.canvas=="string"||E.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+p,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+p,null,'missing required property "canvas"'))),this.options=E,this.animate=E.animate===void 0||E.animate}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},g.prototype.getCanvas=function(){return this.canvas},g.prototype.onAdd=function(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()},g.prototype.onRemove=function(){this.pause()},g.prototype.prepare=function(){var p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var E=this.map.painter.context,Y=E.gl;for(var ye in this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(E,this.canvas,Y.RGBA,{premultiply:!0}),this.tiles){var Pe=this.tiles[ye];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},g.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},g.prototype.hasTransition=function(){return this._playing},g.prototype._hasInvalidDimensions=function(){for(var p=0,E=[this.canvas.width,this.canvas.height];p<E.length;p+=1){var Y=E[p];if(isNaN(Y)||Y<=0)return!0}return!1},g}(st),ar={vector:Ve,raster:ie,"raster-dem":ze,geojson:Le,video:vt,image:st,canvas:Dt};function $t(f,g){var p=l.identity([]);return l.translate(p,p,[1,1,0]),l.scale(p,p,[.5*f.width,.5*f.height,1]),l.multiply(p,p,f.calculatePosMatrix(g.toUnwrapped()))}function ur(f,g,p,E,Y,ye){var Pe=function(Bn,fn,Fn){if(Bn)for(var jn=0,vi=Bn;jn<vi.length;jn+=1){var ki=fn[vi[jn]];if(ki&&ki.source===Fn&&ki.type==="fill-extrusion")return!0}else for(var Ti in fn){var Fi=fn[Ti];if(Fi.source===Fn&&Fi.type==="fill-extrusion")return!0}return!1}(Y&&Y.layers,g,f.id),ct=ye.maxPitchScaleFactor(),Vt=f.tilesIn(E,ct,Pe);Vt.sort(we);for(var fr=[],Ir=0,Dr=Vt;Ir<Dr.length;Ir+=1){var jr=Dr[Ir];fr.push({wrappedTileID:jr.tileID.wrapped().key,queryResults:jr.tile.queryRenderedFeatures(g,p,f._state,jr.queryGeometry,jr.cameraQueryGeometry,jr.scale,Y,ye,ct,$t(f.transform,jr.tileID))})}var En=function(Bn){for(var fn={},Fn={},jn=0,vi=Bn;jn<vi.length;jn+=1){var ki=vi[jn],Ti=ki.queryResults,Fi=ki.wrappedTileID,na=Fn[Fi]=Fn[Fi]||{};for(var ka in Ti)for(var Na=Ti[ka],po=na[ka]=na[ka]||{},No=fn[ka]=fn[ka]||[],is=0,rs=Na;is<rs.length;is+=1){var Ls=rs[is];po[Ls.featureIndex]||(po[Ls.featureIndex]=!0,No.push(Ls))}}return fn}(fr);for(var gn in En)En[gn].forEach(function(Bn){var fn=Bn.feature,Fn=f.getFeatureState(fn.layer["source-layer"],fn.id);fn.source=fn.layer.source,fn.layer["source-layer"]&&(fn.sourceLayer=fn.layer["source-layer"]),fn.state=Fn});return En}function we(f,g){var p=f.tileID,E=g.tileID;return p.overscaledZ-E.overscaledZ||p.canonical.y-E.canonical.y||p.wrap-E.wrap||p.canonical.x-E.canonical.x}var At=function(f,g){this.max=f,this.onRemove=g,this.reset()};At.prototype.reset=function(){for(var f in this.data)for(var g=0,p=this.data[f];g<p.length;g+=1){var E=p[g];E.timeout&&clearTimeout(E.timeout),this.onRemove(E.value)}return this.data={},this.order=[],this},At.prototype.add=function(f,g,p){var E=this,Y=f.wrapped().key;this.data[Y]===void 0&&(this.data[Y]=[]);var ye={value:g,timeout:void 0};if(p!==void 0&&(ye.timeout=setTimeout(function(){E.remove(f,ye)},p)),this.data[Y].push(ye),this.order.push(Y),this.order.length>this.max){var Pe=this._getAndRemoveByKey(this.order[0]);Pe&&this.onRemove(Pe)}return this},At.prototype.has=function(f){return f.wrapped().key in this.data},At.prototype.getAndRemove=function(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null},At.prototype._getAndRemoveByKey=function(f){var g=this.data[f].shift();return g.timeout&&clearTimeout(g.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),g.value},At.prototype.getByKey=function(f){var g=this.data[f];return g?g[0].value:null},At.prototype.get=function(f){return this.has(f)?this.data[f.wrapped().key][0].value:null},At.prototype.remove=function(f,g){if(!this.has(f))return this;var p=f.wrapped().key,E=g===void 0?0:this.data[p].indexOf(g),Y=this.data[p][E];return this.data[p].splice(E,1),Y.timeout&&clearTimeout(Y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(Y.value),this.order.splice(this.order.indexOf(p),1),this},At.prototype.setMaxSize=function(f){for(this.max=f;this.order.length>this.max;){var g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this},At.prototype.filter=function(f){var g=[];for(var p in this.data)for(var E=0,Y=this.data[p];E<Y.length;E+=1){var ye=Y[E];f(ye.value)||g.push(ye)}for(var Pe=0,ct=g;Pe<ct.length;Pe+=1){var Vt=ct[Pe];this.remove(Vt.value.tileID,Vt)}};var nt=function(f,g,p){this.context=f;var E=f.gl;this.buffer=E.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer};nt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},nt.prototype.updateData=function(f){var g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)},nt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Lt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},St=function(f,g,p,E){this.length=g.length,this.attributes=p,this.itemSize=g.bytesPerElement,this.dynamicDraw=E,this.context=f;var Y=f.gl;this.buffer=Y.createBuffer(),f.bindVertexBuffer.set(this.buffer),Y.bufferData(Y.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer};St.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},St.prototype.updateData=function(f){var g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,f.arrayBuffer)},St.prototype.enableAttributes=function(f,g){for(var p=0;p<this.attributes.length;p++){var E=g.attributes[this.attributes[p].name];E!==void 0&&f.enableVertexAttribArray(E)}},St.prototype.setVertexAttribPointers=function(f,g,p){for(var E=0;E<this.attributes.length;E++){var Y=this.attributes[E],ye=g.attributes[Y.name];ye!==void 0&&f.vertexAttribPointer(ye,Y.components,f[Lt[Y.type]],!1,this.itemSize,Y.offset+this.itemSize*(p||0))}},St.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ut=function(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ut.prototype.get=function(){return this.current},Ut.prototype.set=function(f){},Ut.prototype.getDefault=function(){return this.default},Ut.prototype.setDefault=function(){this.set(this.default)};var lt=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return l.Color.transparent},g.prototype.set=function(p){var E=this.current;(p.r!==E.r||p.g!==E.g||p.b!==E.b||p.a!==E.a||this.dirty)&&(this.gl.clearColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)},g}(Ut),Et=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return 1},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.clearDepth(p),this.current=p,this.dirty=!1)},g}(Ut),Zt=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return 0},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.clearStencil(p),this.current=p,this.dirty=!1)},g}(Ut),Be=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return[!0,!0,!0,!0]},g.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||p[2]!==E[2]||p[3]!==E[3]||this.dirty)&&(this.gl.colorMask(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)},g}(Ut),He=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!0},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.depthMask(p),this.current=p,this.dirty=!1)},g}(Ut),ft=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return 255},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.stencilMask(p),this.current=p,this.dirty=!1)},g}(Ut),Z=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},g.prototype.set=function(p){var E=this.current;(p.func!==E.func||p.ref!==E.ref||p.mask!==E.mask||this.dirty)&&(this.gl.stencilFunc(p.func,p.ref,p.mask),this.current=p,this.dirty=!1)},g}(Ut),J=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){var p=this.gl;return[p.KEEP,p.KEEP,p.KEEP]},g.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||p[2]!==E[2]||this.dirty)&&(this.gl.stencilOp(p[0],p[1],p[2]),this.current=p,this.dirty=!1)},g}(Ut),K=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.STENCIL_TEST):E.disable(E.STENCIL_TEST),this.current=p,this.dirty=!1}},g}(Ut),B=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return[0,1]},g.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||this.dirty)&&(this.gl.depthRange(p[0],p[1]),this.current=p,this.dirty=!1)},g}(Ut),j=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST),this.current=p,this.dirty=!1}},g}(Ut),ee=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.LESS},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.depthFunc(p),this.current=p,this.dirty=!1)},g}(Ut),W=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.BLEND):E.disable(E.BLEND),this.current=p,this.dirty=!1}},g}(Ut),De=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){var p=this.gl;return[p.ONE,p.ZERO]},g.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||this.dirty)&&(this.gl.blendFunc(p[0],p[1]),this.current=p,this.dirty=!1)},g}(Ut),ot=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return l.Color.transparent},g.prototype.set=function(p){var E=this.current;(p.r!==E.r||p.g!==E.g||p.b!==E.b||p.a!==E.a||this.dirty)&&(this.gl.blendColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)},g}(Ut),Wt=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.FUNC_ADD},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.blendEquation(p),this.current=p,this.dirty=!1)},g}(Ut),Ct=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;p?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE),this.current=p,this.dirty=!1}},g}(Ut),Qt=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.BACK},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.cullFace(p),this.current=p,this.dirty=!1)},g}(Ut),ir=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.CCW},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.frontFace(p),this.current=p,this.dirty=!1)},g}(Ut),Er=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)},g}(Ut),Qr=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.TEXTURE0},g.prototype.set=function(p){(p!==this.current||this.dirty)&&(this.gl.activeTexture(p),this.current=p,this.dirty=!1)},g}(Ut),Mt=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){var p=this.gl;return[0,0,p.drawingBufferWidth,p.drawingBufferHeight]},g.prototype.set=function(p){var E=this.current;(p[0]!==E[0]||p[1]!==E[1]||p[2]!==E[2]||p[3]!==E[3]||this.dirty)&&(this.gl.viewport(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)},g}(Ut),br=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindFramebuffer(E.FRAMEBUFFER,p),this.current=p,this.dirty=!1}},g}(Ut),Nt=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindRenderbuffer(E.RENDERBUFFER,p),this.current=p,this.dirty=!1}},g}(Ut),Pr=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindTexture(E.TEXTURE_2D,p),this.current=p,this.dirty=!1}},g}(Ut),_r=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.bindBuffer(E.ARRAY_BUFFER,p),this.current=p,this.dirty=!1}},g}(Ut),kr=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){var E=this.gl;E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,p),this.current=p,this.dirty=!1},g}(Ut),zt=function(f){function g(p){f.call(this,p),this.vao=p.extVertexArrayObject}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(p){this.vao&&(p!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(p),this.current=p,this.dirty=!1)},g}(Ut),mr=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return 4},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.pixelStorei(E.UNPACK_ALIGNMENT,p),this.current=p,this.dirty=!1}},g}(Ut),Or=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),this.current=p,this.dirty=!1}},g}(Ut),X=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(p){if(p!==this.current||this.dirty){var E=this.gl;E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,p),this.current=p,this.dirty=!1}},g}(Ut),Nr=function(f){function g(p,E){f.call(this,p),this.context=p,this.parent=E}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g}(Ut),Xe=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.setDirty=function(){this.dirty=!0},g.prototype.set=function(p){if(p!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var E=this.gl;E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,p,0),this.current=p,this.dirty=!1}},g}(Nr),xe=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.set=function(p){if(p!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var E=this.gl;E.framebufferRenderbuffer(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,p),this.current=p,this.dirty=!1}},g}(Nr),rt=function(f,g,p,E){this.context=f,this.width=g,this.height=p;var Y=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new Xe(f,Y),E&&(this.depthAttachment=new xe(f,Y))};rt.prototype.destroy=function(){var f=this.context.gl,g=this.colorAttachment.get();if(g&&f.deleteTexture(g),this.depthAttachment){var p=this.depthAttachment.get();p&&f.deleteRenderbuffer(p)}f.deleteFramebuffer(this.framebuffer)};var kt=function(f,g,p){this.func=f,this.mask=g,this.range=p};kt.ReadOnly=!1,kt.ReadWrite=!0,kt.disabled=new kt(519,kt.ReadOnly,[0,1]);var cr=function(f,g,p,E,Y,ye){this.test=f,this.ref=g,this.mask=p,this.fail=E,this.depthFail=Y,this.pass=ye};cr.disabled=new cr({func:519,mask:0},0,0,7680,7680,7680);var Ar=function(f,g,p){this.blendFunction=f,this.blendColor=g,this.mask=p};Ar.disabled=new Ar(Ar.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),Ar.unblended=new Ar(Ar.Replace,l.Color.transparent,[!0,!0,!0,!0]),Ar.alphaBlended=new Ar([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Lr=function(f,g,p){this.enable=f,this.mode=g,this.frontFace=p};Lr.disabled=new Lr(!1,1029,2305),Lr.backCCW=new Lr(!0,1029,2305);var sr=function(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new lt(this),this.clearDepth=new Et(this),this.clearStencil=new Zt(this),this.colorMask=new Be(this),this.depthMask=new He(this),this.stencilMask=new ft(this),this.stencilFunc=new Z(this),this.stencilOp=new J(this),this.stencilTest=new K(this),this.depthRange=new B(this),this.depthTest=new j(this),this.depthFunc=new ee(this),this.blend=new W(this),this.blendFunc=new De(this),this.blendColor=new ot(this),this.blendEquation=new Wt(this),this.cullFace=new Ct(this),this.cullFaceSide=new Qt(this),this.frontFace=new ir(this),this.program=new Er(this),this.activeTexture=new Qr(this),this.viewport=new Mt(this),this.bindFramebuffer=new br(this),this.bindRenderbuffer=new Nt(this),this.bindTexture=new Pr(this),this.bindVertexBuffer=new _r(this),this.bindElementBuffer=new kr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zt(this),this.pixelStoreUnpack=new mr(this),this.pixelStoreUnpackPremultiplyAlpha=new Or(this),this.pixelStoreUnpackFlipY=new X(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(f.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)};sr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},sr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},sr.prototype.createIndexBuffer=function(f,g){return new nt(this,f,g)},sr.prototype.createVertexBuffer=function(f,g,p){return new St(this,f,g,p)},sr.prototype.createRenderbuffer=function(f,g,p){var E=this.gl,Y=E.createRenderbuffer();return this.bindRenderbuffer.set(Y),E.renderbufferStorage(E.RENDERBUFFER,f,g,p),this.bindRenderbuffer.set(null),Y},sr.prototype.createFramebuffer=function(f,g,p){return new rt(this,f,g,p)},sr.prototype.clear=function(f){var g=f.color,p=f.depth,E=this.gl,Y=0;g&&(Y|=E.COLOR_BUFFER_BIT,this.clearColor.set(g),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(Y|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),E.clear(Y)},sr.prototype.setCullFace=function(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))},sr.prototype.setDepthMode=function(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)},sr.prototype.setStencilMode=function(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)},sr.prototype.setColorMode=function(f){l.deepEqual(f.blendFunction,Ar.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)},sr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ge=function(f){function g(p,E,Y){var ye=this;f.call(this),this.id=p,this.dispatcher=Y,this.on("data",function(Pe){Pe.dataType==="source"&&Pe.sourceDataType==="metadata"&&(ye._sourceLoaded=!0),ye._sourceLoaded&&!ye._paused&&Pe.dataType==="source"&&Pe.sourceDataType==="content"&&(ye.reload(),ye.transform&&ye.update(ye.transform))}),this.on("error",function(){ye._sourceErrored=!0}),this._source=function(Pe,ct,Vt,fr){var Ir=new ar[ct.type](Pe,ct,Vt,fr);if(Ir.id!==Pe)throw new Error("Expected Source id to be "+Pe+" instead of "+Ir.id);return l.bindAll(["load","abort","unload","serialize","prepare"],Ir),Ir}(p,E,Y,this),this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.onAdd=function(p){this.map=p,this._maxTileCacheSize=p?p._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(p)},g.prototype.onRemove=function(p){this._source&&this._source.onRemove&&this._source.onRemove(p)},g.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var p in this._tiles){var E=this._tiles[p];if(E.state!=="loaded"&&E.state!=="errored")return!1}return!0},g.prototype.getSource=function(){return this._source},g.prototype.pause=function(){this._paused=!0},g.prototype.resume=function(){if(this._paused){var p=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,p&&this.reload(),this.transform&&this.update(this.transform)}},g.prototype._loadTile=function(p,E){return this._source.loadTile(p,E)},g.prototype._unloadTile=function(p){if(this._source.unloadTile)return this._source.unloadTile(p,function(){})},g.prototype._abortTile=function(p){if(this._source.abortTile)return this._source.abortTile(p,function(){})},g.prototype.serialize=function(){return this._source.serialize()},g.prototype.prepare=function(p){for(var E in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Y=this._tiles[E];Y.upload(p),Y.prepare(this.map.style.imageManager)}},g.prototype.getIds=function(){return l.values(this._tiles).map(function(p){return p.tileID}).sort(Gr).map(function(p){return p.key})},g.prototype.getRenderableIds=function(p){var E=this,Y=[];for(var ye in this._tiles)this._isIdRenderable(ye,p)&&Y.push(this._tiles[ye]);return p?Y.sort(function(Pe,ct){var Vt=Pe.tileID,fr=ct.tileID,Ir=new l.Point(Vt.canonical.x,Vt.canonical.y)._rotate(E.transform.angle),Dr=new l.Point(fr.canonical.x,fr.canonical.y)._rotate(E.transform.angle);return Vt.overscaledZ-fr.overscaledZ||Dr.y-Ir.y||Dr.x-Ir.x}).map(function(Pe){return Pe.tileID.key}):Y.map(function(Pe){return Pe.tileID}).sort(Gr).map(function(Pe){return Pe.key})},g.prototype.hasRenderableParent=function(p){var E=this.findLoadedParent(p,0);return!!E&&this._isIdRenderable(E.tileID.key)},g.prototype._isIdRenderable=function(p,E){return this._tiles[p]&&this._tiles[p].hasData()&&!this._coveredTiles[p]&&(E||!this._tiles[p].holdingForFade())},g.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var p in this._cache.reset(),this._tiles)this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")},g.prototype._reloadTile=function(p,E){var Y=this._tiles[p];Y&&(Y.state!=="loading"&&(Y.state=E),this._loadTile(Y,this._tileLoaded.bind(this,Y,p,E)))},g.prototype._tileLoaded=function(p,E,Y,ye){if(ye)return p.state="errored",void(ye.status!==404?this._source.fire(new l.ErrorEvent(ye,{tile:p})):this.update(this.transform));p.timeAdded=l.browser.now(),Y==="expired"&&(p.refreshedUponExpiration=!0),this._setTileReloadTimer(E,p),this.getSource().type==="raster-dem"&&p.dem&&this._backfillDEM(p),this._state.initializeTileState(p,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:p,coord:p.tileID}))},g.prototype._backfillDEM=function(p){for(var E=this.getRenderableIds(),Y=0;Y<E.length;Y++){var ye=E[Y];if(p.neighboringTiles&&p.neighboringTiles[ye]){var Pe=this.getTileByID(ye);ct(p,Pe),ct(Pe,p)}}function ct(Vt,fr){Vt.needsHillshadePrepare=!0;var Ir=fr.tileID.canonical.x-Vt.tileID.canonical.x,Dr=fr.tileID.canonical.y-Vt.tileID.canonical.y,jr=Math.pow(2,Vt.tileID.canonical.z),En=fr.tileID.key;Ir===0&&Dr===0||Math.abs(Dr)>1||(Math.abs(Ir)>1&&(Math.abs(Ir+jr)===1?Ir+=jr:Math.abs(Ir-jr)===1&&(Ir-=jr)),fr.dem&&Vt.dem&&(Vt.dem.backfillBorder(fr.dem,Ir,Dr),Vt.neighboringTiles&&Vt.neighboringTiles[En]&&(Vt.neighboringTiles[En].backfilled=!0)))}},g.prototype.getTile=function(p){return this.getTileByID(p.key)},g.prototype.getTileByID=function(p){return this._tiles[p]},g.prototype._retainLoadedChildren=function(p,E,Y,ye){for(var Pe in this._tiles){var ct=this._tiles[Pe];if(!(ye[Pe]||!ct.hasData()||ct.tileID.overscaledZ<=E||ct.tileID.overscaledZ>Y)){for(var Vt=ct.tileID;ct&&ct.tileID.overscaledZ>E+1;){var fr=ct.tileID.scaledTo(ct.tileID.overscaledZ-1);(ct=this._tiles[fr.key])&&ct.hasData()&&(Vt=fr)}for(var Ir=Vt;Ir.overscaledZ>E;)if(p[(Ir=Ir.scaledTo(Ir.overscaledZ-1)).key]){ye[Vt.key]=Vt;break}}}},g.prototype.findLoadedParent=function(p,E){if(p.key in this._loadedParentTiles){var Y=this._loadedParentTiles[p.key];return Y&&Y.tileID.overscaledZ>=E?Y:null}for(var ye=p.overscaledZ-1;ye>=E;ye--){var Pe=p.scaledTo(ye),ct=this._getLoadedTile(Pe);if(ct)return ct}},g.prototype._getLoadedTile=function(p){var E=this._tiles[p.key];return E&&E.hasData()?E:this._cache.getByKey(p.wrapped().key)},g.prototype.updateCacheSize=function(p){var E=Math.ceil(p.width/this._source.tileSize)+1,Y=Math.ceil(p.height/this._source.tileSize)+1,ye=Math.floor(E*Y*5),Pe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ye):ye;this._cache.setMaxSize(Pe)},g.prototype.handleWrapJump=function(p){var E=Math.round((p-(this._prevLng===void 0?p:this._prevLng))/360);if(this._prevLng=p,E){var Y={};for(var ye in this._tiles){var Pe=this._tiles[ye];Pe.tileID=Pe.tileID.unwrapTo(Pe.tileID.wrap+E),Y[Pe.tileID.key]=Pe}for(var ct in this._tiles=Y,this._timers)clearTimeout(this._timers[ct]),delete this._timers[ct];for(var Vt in this._tiles)this._setTileReloadTimer(Vt,this._tiles[Vt])}},g.prototype.update=function(p){var E=this;if(this.transform=p,this._sourceLoaded&&!this._paused){var Y;this.updateCacheSize(p),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Y=p.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(na){return new l.OverscaledTileID(na.canonical.z,na.wrap,na.canonical.z,na.canonical.x,na.canonical.y)}):(Y=p.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Y=Y.filter(function(na){return E._source.hasTile(na)}))):Y=[];var ye=p.coveringZoomLevel(this._source),Pe=Math.max(ye-g.maxOverzooming,this._source.minzoom),ct=Math.max(ye+g.maxUnderzooming,this._source.minzoom),Vt=this._updateRetainedTiles(Y,ye);if(on(this._source.type)){for(var fr={},Ir={},Dr=0,jr=Object.keys(Vt);Dr<jr.length;Dr+=1){var En=jr[Dr],gn=Vt[En],Bn=this._tiles[En];if(Bn&&!(Bn.fadeEndTime&&Bn.fadeEndTime<=l.browser.now())){var fn=this.findLoadedParent(gn,Pe);fn&&(this._addTile(fn.tileID),fr[fn.tileID.key]=fn.tileID),Ir[En]=gn}}for(var Fn in this._retainLoadedChildren(Ir,ye,ct,Vt),fr)Vt[Fn]||(this._coveredTiles[Fn]=!0,Vt[Fn]=fr[Fn])}for(var jn in Vt)this._tiles[jn].clearFadeHold();for(var vi=0,ki=l.keysDifference(this._tiles,Vt);vi<ki.length;vi+=1){var Ti=ki[vi],Fi=this._tiles[Ti];Fi.hasSymbolBuckets&&!Fi.holdingForFade()?Fi.setHoldDuration(this.map._fadeDuration):Fi.hasSymbolBuckets&&!Fi.symbolFadeFinished()||this._removeTile(Ti)}this._updateLoadedParentTileCache()}},g.prototype.releaseSymbolFadeTiles=function(){for(var p in this._tiles)this._tiles[p].holdingForFade()&&this._removeTile(p)},g.prototype._updateRetainedTiles=function(p,E){for(var Y={},ye={},Pe=Math.max(E-g.maxOverzooming,this._source.minzoom),ct=Math.max(E+g.maxUnderzooming,this._source.minzoom),Vt={},fr=0,Ir=p;fr<Ir.length;fr+=1){var Dr=Ir[fr],jr=this._addTile(Dr);Y[Dr.key]=Dr,jr.hasData()||E<this._source.maxzoom&&(Vt[Dr.key]=Dr)}this._retainLoadedChildren(Vt,E,ct,Y);for(var En=0,gn=p;En<gn.length;En+=1){var Bn=gn[En],fn=this._tiles[Bn.key];if(!fn.hasData()){if(E+1>this._source.maxzoom){var Fn=Bn.children(this._source.maxzoom)[0],jn=this.getTile(Fn);if(jn&&jn.hasData()){Y[Fn.key]=Fn;continue}}else{var vi=Bn.children(this._source.maxzoom);if(Y[vi[0].key]&&Y[vi[1].key]&&Y[vi[2].key]&&Y[vi[3].key])continue}for(var ki=fn.wasRequested(),Ti=Bn.overscaledZ-1;Ti>=Pe;--Ti){var Fi=Bn.scaledTo(Ti);if(ye[Fi.key]||(ye[Fi.key]=!0,!(fn=this.getTile(Fi))&&ki&&(fn=this._addTile(Fi)),fn&&(Y[Fi.key]=Fi,ki=fn.wasRequested(),fn.hasData())))break}}}return Y},g.prototype._updateLoadedParentTileCache=function(){for(var p in this._loadedParentTiles={},this._tiles){for(var E=[],Y=void 0,ye=this._tiles[p].tileID;ye.overscaledZ>0;){if(ye.key in this._loadedParentTiles){Y=this._loadedParentTiles[ye.key];break}E.push(ye.key);var Pe=ye.scaledTo(ye.overscaledZ-1);if(Y=this._getLoadedTile(Pe))break;ye=Pe}for(var ct=0,Vt=E;ct<Vt.length;ct+=1)this._loadedParentTiles[Vt[ct]]=Y}},g.prototype._addTile=function(p){var E=this._tiles[p.key];if(E)return E;(E=this._cache.getAndRemove(p))&&(this._setTileReloadTimer(p.key,E),E.tileID=p,this._state.initializeTileState(E,this.map?this.map.painter:null),this._cacheTimers[p.key]&&(clearTimeout(this._cacheTimers[p.key]),delete this._cacheTimers[p.key],this._setTileReloadTimer(p.key,E)));var Y=Boolean(E);return Y||(E=new l.Tile(p,this._source.tileSize*p.overscaleFactor()),this._loadTile(E,this._tileLoaded.bind(this,E,p.key,E.state))),E?(E.uses++,this._tiles[p.key]=E,Y||this._source.fire(new l.Event("dataloading",{tile:E,coord:E.tileID,dataType:"source"})),E):null},g.prototype._setTileReloadTimer=function(p,E){var Y=this;p in this._timers&&(clearTimeout(this._timers[p]),delete this._timers[p]);var ye=E.getExpiryTimeout();ye&&(this._timers[p]=setTimeout(function(){Y._reloadTile(p,"expired"),delete Y._timers[p]},ye))},g.prototype._removeTile=function(p){var E=this._tiles[p];E&&(E.uses--,delete this._tiles[p],this._timers[p]&&(clearTimeout(this._timers[p]),delete this._timers[p]),E.uses>0||(E.hasData()&&E.state!=="reloading"?this._cache.add(E.tileID,E,E.getExpiryTimeout()):(E.aborted=!0,this._abortTile(E),this._unloadTile(E))))},g.prototype.clearTiles=function(){for(var p in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(p);this._cache.reset()},g.prototype.tilesIn=function(p,E,Y){var ye=this,Pe=[],ct=this.transform;if(!ct)return Pe;for(var Vt=Y?ct.getCameraQueryGeometry(p):p,fr=p.map(function(Ti){return ct.pointCoordinate(Ti)}),Ir=Vt.map(function(Ti){return ct.pointCoordinate(Ti)}),Dr=this.getIds(),jr=1/0,En=1/0,gn=-1/0,Bn=-1/0,fn=0,Fn=Ir;fn<Fn.length;fn+=1){var jn=Fn[fn];jr=Math.min(jr,jn.x),En=Math.min(En,jn.y),gn=Math.max(gn,jn.x),Bn=Math.max(Bn,jn.y)}for(var vi=function(Ti){var Fi=ye._tiles[Dr[Ti]];if(!Fi.holdingForFade()){var na=Fi.tileID,ka=Math.pow(2,ct.zoom-Fi.tileID.overscaledZ),Na=E*Fi.queryPadding*l.EXTENT/Fi.tileSize/ka,po=[na.getTilePoint(new l.MercatorCoordinate(jr,En)),na.getTilePoint(new l.MercatorCoordinate(gn,Bn))];if(po[0].x-Na<l.EXTENT&&po[0].y-Na<l.EXTENT&&po[1].x+Na>=0&&po[1].y+Na>=0){var No=fr.map(function(rs){return na.getTilePoint(rs)}),is=Ir.map(function(rs){return na.getTilePoint(rs)});Pe.push({tile:Fi,tileID:na,queryGeometry:No,cameraQueryGeometry:is,scale:ka})}}},ki=0;ki<Dr.length;ki++)vi(ki);return Pe},g.prototype.getVisibleCoordinates=function(p){for(var E=this,Y=this.getRenderableIds(p).map(function(Vt){return E._tiles[Vt].tileID}),ye=0,Pe=Y;ye<Pe.length;ye+=1){var ct=Pe[ye];ct.posMatrix=this.transform.calculatePosMatrix(ct.toUnwrapped())}return Y},g.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(on(this._source.type))for(var p in this._tiles){var E=this._tiles[p];if(E.fadeEndTime!==void 0&&E.fadeEndTime>=l.browser.now())return!0}return!1},g.prototype.setFeatureState=function(p,E,Y){this._state.updateState(p=p||"_geojsonTileLayer",E,Y)},g.prototype.removeFeatureState=function(p,E,Y){this._state.removeFeatureState(p=p||"_geojsonTileLayer",E,Y)},g.prototype.getFeatureState=function(p,E){return this._state.getState(p=p||"_geojsonTileLayer",E)},g.prototype.setDependencies=function(p,E,Y){var ye=this._tiles[p];ye&&ye.setDependencies(E,Y)},g.prototype.reloadTilesForDependencies=function(p,E){for(var Y in this._tiles)this._tiles[Y].hasDependency(p,E)&&this._reloadTile(Y,"reloading");this._cache.filter(function(ye){return!ye.hasDependency(p,E)})},g}(l.Evented);function Gr(f,g){var p=Math.abs(2*f.wrap)-+(f.wrap<0),E=Math.abs(2*g.wrap)-+(g.wrap<0);return f.overscaledZ-g.overscaledZ||E-p||g.canonical.y-f.canonical.y||g.canonical.x-f.canonical.x}function on(f){return f==="raster"||f==="image"||f==="video"}function cn(){return new l.window.Worker(Qc.workerUrl)}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;var Dn="mapboxgl_preloaded_worker_pool",ci=function(){this.active={}};ci.prototype.acquire=function(f){if(!this.workers)for(this.workers=[];this.workers.length<ci.workerCount;)this.workers.push(new cn);return this.active[f]=!0,this.workers.slice()},ci.prototype.release=function(f){delete this.active[f],this.numActive()===0&&(this.workers.forEach(function(g){g.terminate()}),this.workers=null)},ci.prototype.isPreloaded=function(){return!!this.active[Dn]},ci.prototype.numActive=function(){return Object.keys(this.active).length};var ia,Vi=Math.floor(l.browser.hardwareConcurrency/2);function On(){return ia||(ia=new ci),ia}function ji(f,g){var p={};for(var E in f)E!=="ref"&&(p[E]=f[E]);return l.refProperties.forEach(function(Y){Y in g&&(p[Y]=g[Y])}),p}function oi(f){f=f.slice();for(var g=Object.create(null),p=0;p<f.length;p++)g[f[p].id]=f[p];for(var E=0;E<f.length;E++)"ref"in f[E]&&(f[E]=ji(f[E],g[f[E].ref]));return f}ci.workerCount=Math.max(Math.min(Vi,6),1);var Hi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ca(f,g,p){p.push({command:Hi.addSource,args:[f,g[f]]})}function Wi(f,g,p){g.push({command:Hi.removeSource,args:[f]}),p[f]=!0}function jo(f,g,p,E){Wi(f,p,E),Ca(f,g,p)}function uo(f,g,p){var E;for(E in f[p])if(f[p].hasOwnProperty(E)&&E!=="data"&&!l.deepEqual(f[p][E],g[p][E]))return!1;for(E in g[p])if(g[p].hasOwnProperty(E)&&E!=="data"&&!l.deepEqual(f[p][E],g[p][E]))return!1;return!0}function Pn(f,g,p,E,Y,ye){var Pe;for(Pe in g=g||{},f=f||{})f.hasOwnProperty(Pe)&&(l.deepEqual(f[Pe],g[Pe])||p.push({command:ye,args:[E,Pe,g[Pe],Y]}));for(Pe in g)g.hasOwnProperty(Pe)&&!f.hasOwnProperty(Pe)&&(l.deepEqual(f[Pe],g[Pe])||p.push({command:ye,args:[E,Pe,g[Pe],Y]}))}function bn(f){return f.id}function Oi(f,g){return f[g.id]=g,f}var di=function(f,g){this.reset(f,g)};di.prototype.reset=function(f,g){this.points=f||[],this._distances=[0];for(var p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding},di.prototype.lerp=function(f){if(this.points.length===1)return this.points[0];f=l.clamp(f,0,1);for(var g=1,p=this._distances[g],E=f*this.paddedLength+this.padding;p<E&&g<this._distances.length;)p=this._distances[++g];var Y=g-1,ye=this._distances[Y],Pe=p-ye,ct=Pe>0?(E-ye)/Pe:0;return this.points[Y].mult(1-ct).add(this.points[g].mult(ct))};var va=function(f,g,p){var E=this.boxCells=[],Y=this.circleCells=[];this.xCellCount=Math.ceil(f/p),this.yCellCount=Math.ceil(g/p);for(var ye=0;ye<this.xCellCount*this.yCellCount;ye++)E.push([]),Y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=g,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0};function wa(f,g,p,E,Y){var ye=l.create();return g?(l.scale(ye,ye,[1/Y,1/Y,1]),p||l.rotateZ(ye,ye,E.angle)):l.multiply(ye,E.labelPlaneMatrix,f),ye}function Aa(f,g,p,E,Y){if(g){var ye=l.clone(f);return l.scale(ye,ye,[Y,Y,1]),p||l.rotateZ(ye,ye,-E.angle),ye}return E.glCoordMatrix}function Ta(f,g){var p=[f.x,f.y,0,1];qo(p,p,g);var E=p[3];return{point:new l.Point(p[0]/E,p[1]/E),signedDistanceFromCamera:E}}function ma(f,g){return .5+f/g*.5}function Da(f,g){var p=f[0]/f[3],E=f[1]/f[3];return p>=-g[0]&&p<=g[0]&&E>=-g[1]&&E<=g[1]}function Uo(f,g,p,E,Y,ye,Pe,ct){var Vt=E?f.textSizeData:f.iconSizeData,fr=l.evaluateSizeForZoom(Vt,p.transform.zoom),Ir=[256/p.width*2+1,256/p.height*2+1],Dr=E?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;Dr.clear();for(var jr=f.lineVertexArray,En=E?f.text.placedSymbolArray:f.icon.placedSymbolArray,gn=p.transform.width/p.transform.height,Bn=!1,fn=0;fn<En.length;fn++){var Fn=En.get(fn);if(Fn.hidden||Fn.writingMode===l.WritingMode.vertical&&!Bn)no(Fn.numGlyphs,Dr);else{Bn=!1;var jn=[Fn.anchorX,Fn.anchorY,0,1];if(l.transformMat4(jn,jn,g),Da(jn,Ir)){var vi=ma(p.transform.cameraToCenterDistance,jn[3]),ki=l.evaluateSizeForFeature(Vt,fr,Fn),Ti=Pe?ki/vi:ki*vi,Fi=new l.Point(Fn.anchorX,Fn.anchorY),na=Ta(Fi,Y).point,ka={},Na=eo(Fn,Ti,!1,ct,g,Y,ye,f.glyphOffsetArray,jr,Dr,na,Fi,ka,gn);Bn=Na.useVertical,(Na.notEnoughRoom||Bn||Na.needsFlipping&&eo(Fn,Ti,!0,ct,g,Y,ye,f.glyphOffsetArray,jr,Dr,na,Fi,ka,gn).notEnoughRoom)&&no(Fn.numGlyphs,Dr)}else no(Fn.numGlyphs,Dr)}}E?f.text.dynamicLayoutVertexBuffer.updateData(Dr):f.icon.dynamicLayoutVertexBuffer.updateData(Dr)}function ha(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir){var Dr=ct.glyphStartIndex+ct.numGlyphs,jr=ct.lineStartIndex,En=ct.lineStartIndex+ct.lineLength,gn=g.getoffsetX(ct.glyphStartIndex),Bn=g.getoffsetX(Dr-1),fn=Po(f*gn,p,E,Y,ye,Pe,ct.segment,jr,En,Vt,fr,Ir);if(!fn)return null;var Fn=Po(f*Bn,p,E,Y,ye,Pe,ct.segment,jr,En,Vt,fr,Ir);return Fn?{first:fn,last:Fn}:null}function xa(f,g,p,E){return f===l.WritingMode.horizontal&&Math.abs(p.y-g.y)>Math.abs(p.x-g.x)*E?{useVertical:!0}:(f===l.WritingMode.vertical?g.y<p.y:g.x>p.x)?{needsFlipping:!0}:null}function eo(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir,Dr,jr,En){var gn,Bn=g/24,fn=f.lineOffsetX*Bn,Fn=f.lineOffsetY*Bn;if(f.numGlyphs>1){var jn=f.glyphStartIndex+f.numGlyphs,vi=f.lineStartIndex,ki=f.lineStartIndex+f.lineLength,Ti=ha(Bn,ct,fn,Fn,p,Ir,Dr,f,Vt,ye,jr);if(!Ti)return{notEnoughRoom:!0};var Fi=Ta(Ti.first.point,Pe).point,na=Ta(Ti.last.point,Pe).point;if(E&&!p){var ka=xa(f.writingMode,Fi,na,En);if(ka)return ka}gn=[Ti.first];for(var Na=f.glyphStartIndex+1;Na<jn-1;Na++)gn.push(Po(Bn*ct.getoffsetX(Na),fn,Fn,p,Ir,Dr,f.segment,vi,ki,Vt,ye,jr));gn.push(Ti.last)}else{if(E&&!p){var po=Ta(Dr,Y).point,No=f.lineStartIndex+f.segment+1,is=new l.Point(Vt.getx(No),Vt.gety(No)),rs=Ta(is,Y),Ls=rs.signedDistanceFromCamera>0?rs.point:Ee(Dr,is,po,1,Y),vo=xa(f.writingMode,po,Ls,En);if(vo)return vo}var ds=Po(Bn*ct.getoffsetX(f.glyphStartIndex),fn,Fn,p,Ir,Dr,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,Vt,ye,jr);if(!ds)return{notEnoughRoom:!0};gn=[ds]}for(var Ns=0,cs=gn;Ns<cs.length;Ns+=1){var Jo=cs[Ns];l.addDynamicAttributes(fr,Jo.point,Jo.angle)}return{}}function Ee(f,g,p,E,Y){var ye=Ta(f.add(f.sub(g)._unit()),Y).point,Pe=p.sub(ye);return p.add(Pe._mult(E/Pe.mag()))}function Po(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir,Dr){var jr=E?f-g:f+g,En=jr>0?1:-1,gn=0;E&&(En*=-1,gn=Math.PI),En<0&&(gn+=Math.PI);for(var Bn=En>0?ct+Pe:ct+Pe+1,fn=Y,Fn=Y,jn=0,vi=0,ki=Math.abs(jr),Ti=[];jn+vi<=ki;){if((Bn+=En)<ct||Bn>=Vt)return null;if(Fn=fn,Ti.push(fn),(fn=Dr[Bn])===void 0){var Fi=new l.Point(fr.getx(Bn),fr.gety(Bn)),na=Ta(Fi,Ir);if(na.signedDistanceFromCamera>0)fn=Dr[Bn]=na.point;else{var ka=Bn-En;fn=Ee(jn===0?ye:new l.Point(fr.getx(ka),fr.gety(ka)),Fi,Fn,ki-jn+1,Ir)}}jn+=vi,vi=Fn.dist(fn)}var Na=(ki-jn)/vi,po=fn.sub(Fn),No=po.mult(Na)._add(Fn);No._add(po._unit()._perp()._mult(p*En));var is=gn+Math.atan2(fn.y-Fn.y,fn.x-Fn.x);return Ti.push(No),{point:No,angle:is,path:Ti}}va.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},va.prototype.insert=function(f,g,p,E,Y){this._forEachCell(g,p,E,Y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(g),this.bboxes.push(p),this.bboxes.push(E),this.bboxes.push(Y)},va.prototype.insertCircle=function(f,g,p,E){this._forEachCell(g-E,p-E,g+E,p+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(g),this.circles.push(p),this.circles.push(E)},va.prototype._insertBoxCell=function(f,g,p,E,Y,ye){this.boxCells[Y].push(ye)},va.prototype._insertCircleCell=function(f,g,p,E,Y,ye){this.circleCells[Y].push(ye)},va.prototype._query=function(f,g,p,E,Y,ye){if(p<0||f>this.width||E<0||g>this.height)return!Y&&[];var Pe=[];if(f<=0&&g<=0&&this.width<=p&&this.height<=E){if(Y)return!0;for(var ct=0;ct<this.boxKeys.length;ct++)Pe.push({key:this.boxKeys[ct],x1:this.bboxes[4*ct],y1:this.bboxes[4*ct+1],x2:this.bboxes[4*ct+2],y2:this.bboxes[4*ct+3]});for(var Vt=0;Vt<this.circleKeys.length;Vt++){var fr=this.circles[3*Vt],Ir=this.circles[3*Vt+1],Dr=this.circles[3*Vt+2];Pe.push({key:this.circleKeys[Vt],x1:fr-Dr,y1:Ir-Dr,x2:fr+Dr,y2:Ir+Dr})}return ye?Pe.filter(ye):Pe}return this._forEachCell(f,g,p,E,this._queryCell,Pe,{hitTest:Y,seenUids:{box:{},circle:{}}},ye),Y?Pe.length>0:Pe},va.prototype._queryCircle=function(f,g,p,E,Y){var ye=f-p,Pe=f+p,ct=g-p,Vt=g+p;if(Pe<0||ye>this.width||Vt<0||ct>this.height)return!E&&[];var fr=[];return this._forEachCell(ye,ct,Pe,Vt,this._queryCellCircle,fr,{hitTest:E,circle:{x:f,y:g,radius:p},seenUids:{box:{},circle:{}}},Y),E?fr.length>0:fr},va.prototype.query=function(f,g,p,E,Y){return this._query(f,g,p,E,!1,Y)},va.prototype.hitTest=function(f,g,p,E,Y){return this._query(f,g,p,E,!0,Y)},va.prototype.hitTestCircle=function(f,g,p,E){return this._queryCircle(f,g,p,!0,E)},va.prototype._queryCell=function(f,g,p,E,Y,ye,Pe,ct){var Vt=Pe.seenUids,fr=this.boxCells[Y];if(fr!==null)for(var Ir=this.bboxes,Dr=0,jr=fr;Dr<jr.length;Dr+=1){var En=jr[Dr];if(!Vt.box[En]){Vt.box[En]=!0;var gn=4*En;if(f<=Ir[gn+2]&&g<=Ir[gn+3]&&p>=Ir[gn+0]&&E>=Ir[gn+1]&&(!ct||ct(this.boxKeys[En]))){if(Pe.hitTest)return ye.push(!0),!0;ye.push({key:this.boxKeys[En],x1:Ir[gn],y1:Ir[gn+1],x2:Ir[gn+2],y2:Ir[gn+3]})}}}var Bn=this.circleCells[Y];if(Bn!==null)for(var fn=this.circles,Fn=0,jn=Bn;Fn<jn.length;Fn+=1){var vi=jn[Fn];if(!Vt.circle[vi]){Vt.circle[vi]=!0;var ki=3*vi;if(this._circleAndRectCollide(fn[ki],fn[ki+1],fn[ki+2],f,g,p,E)&&(!ct||ct(this.circleKeys[vi]))){if(Pe.hitTest)return ye.push(!0),!0;var Ti=fn[ki],Fi=fn[ki+1],na=fn[ki+2];ye.push({key:this.circleKeys[vi],x1:Ti-na,y1:Fi-na,x2:Ti+na,y2:Fi+na})}}}},va.prototype._queryCellCircle=function(f,g,p,E,Y,ye,Pe,ct){var Vt=Pe.circle,fr=Pe.seenUids,Ir=this.boxCells[Y];if(Ir!==null)for(var Dr=this.bboxes,jr=0,En=Ir;jr<En.length;jr+=1){var gn=En[jr];if(!fr.box[gn]){fr.box[gn]=!0;var Bn=4*gn;if(this._circleAndRectCollide(Vt.x,Vt.y,Vt.radius,Dr[Bn+0],Dr[Bn+1],Dr[Bn+2],Dr[Bn+3])&&(!ct||ct(this.boxKeys[gn])))return ye.push(!0),!0}}var fn=this.circleCells[Y];if(fn!==null)for(var Fn=this.circles,jn=0,vi=fn;jn<vi.length;jn+=1){var ki=vi[jn];if(!fr.circle[ki]){fr.circle[ki]=!0;var Ti=3*ki;if(this._circlesCollide(Fn[Ti],Fn[Ti+1],Fn[Ti+2],Vt.x,Vt.y,Vt.radius)&&(!ct||ct(this.circleKeys[ki])))return ye.push(!0),!0}}},va.prototype._forEachCell=function(f,g,p,E,Y,ye,Pe,ct){for(var Vt=this._convertToXCellCoord(f),fr=this._convertToYCellCoord(g),Ir=this._convertToXCellCoord(p),Dr=this._convertToYCellCoord(E),jr=Vt;jr<=Ir;jr++)for(var En=fr;En<=Dr;En++)if(Y.call(this,f,g,p,E,this.xCellCount*En+jr,ye,Pe,ct))return},va.prototype._convertToXCellCoord=function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))},va.prototype._convertToYCellCoord=function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))},va.prototype._circlesCollide=function(f,g,p,E,Y,ye){var Pe=E-f,ct=Y-g,Vt=p+ye;return Vt*Vt>Pe*Pe+ct*ct},va.prototype._circleAndRectCollide=function(f,g,p,E,Y,ye,Pe){var ct=(ye-E)/2,Vt=Math.abs(f-(E+ct));if(Vt>ct+p)return!1;var fr=(Pe-Y)/2,Ir=Math.abs(g-(Y+fr));if(Ir>fr+p)return!1;if(Vt<=ct||Ir<=fr)return!0;var Dr=Vt-ct,jr=Ir-fr;return Dr*Dr+jr*jr<=p*p};var Hs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function no(f,g){for(var p=0;p<f;p++){var E=g.length;g.resize(E+4),g.float32.set(Hs,3*E)}}function qo(f,g,p){var E=g[0],Y=g[1];return f[0]=p[0]*E+p[4]*Y+p[12],f[1]=p[1]*E+p[5]*Y+p[13],f[3]=p[3]*E+p[7]*Y+p[15],f}var os=function(f,g,p){g===void 0&&(g=new va(f.width+200,f.height+200,25)),p===void 0&&(p=new va(f.width+200,f.height+200,25)),this.transform=f,this.grid=g,this.ignoredGrid=p,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+100,this.screenBottomBoundary=f.height+100,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200};function Go(f,g,p){return g*(l.EXTENT/(f.tileSize*Math.pow(2,p-f.tileID.overscaledZ)))}os.prototype.placeCollisionBox=function(f,g,p,E,Y){var ye=this.projectAndGetPerspectiveRatio(E,f.anchorPointX,f.anchorPointY),Pe=p*ye.perspectiveRatio,ct=f.x1*Pe+ye.point.x,Vt=f.y1*Pe+ye.point.y,fr=f.x2*Pe+ye.point.x,Ir=f.y2*Pe+ye.point.y;return!this.isInsideGrid(ct,Vt,fr,Ir)||!g&&this.grid.hitTest(ct,Vt,fr,Ir,Y)?{box:[],offscreen:!1}:{box:[ct,Vt,fr,Ir],offscreen:this.isOffscreen(ct,Vt,fr,Ir)}},os.prototype.placeCollisionCircles=function(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir,Dr,jr){var En=[],gn=new l.Point(g.anchorX,g.anchorY),Bn=Ta(gn,ye),fn=ma(this.transform.cameraToCenterDistance,Bn.signedDistanceFromCamera),Fn=(fr?Y/fn:Y*fn)/l.ONE_EM,jn=Ta(gn,Pe).point,vi=ha(Fn,E,g.lineOffsetX*Fn,g.lineOffsetY*Fn,!1,jn,gn,g,p,Pe,{}),ki=!1,Ti=!1,Fi=!0;if(vi){for(var na=.5*Dr*fn+jr,ka=new l.Point(-100,-100),Na=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),po=new di,No=vi.first,is=vi.last,rs=[],Ls=No.path.length-1;Ls>=1;Ls--)rs.push(No.path[Ls]);for(var vo=1;vo<is.path.length;vo++)rs.push(is.path[vo]);var ds=2.5*na;if(ct){var Ns=rs.map(function(Uc){return Ta(Uc,ct)});rs=Ns.some(function(Uc){return Uc.signedDistanceFromCamera<=0})?[]:Ns.map(function(Uc){return Uc.point})}var cs=[];if(rs.length>0){for(var Jo=rs[0].clone(),$s=rs[0].clone(),ws=1;ws<rs.length;ws++)Jo.x=Math.min(Jo.x,rs[ws].x),Jo.y=Math.min(Jo.y,rs[ws].y),$s.x=Math.max($s.x,rs[ws].x),$s.y=Math.max($s.y,rs[ws].y);cs=Jo.x>=ka.x&&$s.x<=Na.x&&Jo.y>=ka.y&&$s.y<=Na.y?[rs]:$s.x<ka.x||Jo.x>Na.x||$s.y<ka.y||Jo.y>Na.y?[]:l.clipLine([rs],ka.x,ka.y,Na.x,Na.y)}for(var _s=0,El=cs;_s<El.length;_s+=1){var nl;po.reset(El[_s],.25*na),nl=po.length<=.5*na?1:Math.ceil(po.paddedLength/ds)+1;for(var Qu=0;Qu<nl;Qu++){var Ac=Qu/Math.max(nl-1,1),Ju=po.lerp(Ac),qu=Ju.x+100,Tc=Ju.y+100;En.push(qu,Tc,na,0);var ec=qu-na,Pf=Tc-na,Ef=qu+na,$l=Tc+na;if(Fi=Fi&&this.isOffscreen(ec,Pf,Ef,$l),Ti=Ti||this.isInsideGrid(ec,Pf,Ef,$l),!f&&this.grid.hitTestCircle(qu,Tc,na,Ir)&&(ki=!0,!Vt))return{circles:[],offscreen:!1,collisionDetected:ki}}}}return{circles:!Vt&&ki||!Ti?[]:En,offscreen:Fi,collisionDetected:ki}},os.prototype.queryRenderedSymbols=function(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var g=[],p=1/0,E=1/0,Y=-1/0,ye=-1/0,Pe=0,ct=f;Pe<ct.length;Pe+=1){var Vt=ct[Pe],fr=new l.Point(Vt.x+100,Vt.y+100);p=Math.min(p,fr.x),E=Math.min(E,fr.y),Y=Math.max(Y,fr.x),ye=Math.max(ye,fr.y),g.push(fr)}for(var Ir={},Dr={},jr=0,En=this.grid.query(p,E,Y,ye).concat(this.ignoredGrid.query(p,E,Y,ye));jr<En.length;jr+=1){var gn=En[jr],Bn=gn.key;if(Ir[Bn.bucketInstanceId]===void 0&&(Ir[Bn.bucketInstanceId]={}),!Ir[Bn.bucketInstanceId][Bn.featureIndex]){var fn=[new l.Point(gn.x1,gn.y1),new l.Point(gn.x2,gn.y1),new l.Point(gn.x2,gn.y2),new l.Point(gn.x1,gn.y2)];l.polygonIntersectsPolygon(g,fn)&&(Ir[Bn.bucketInstanceId][Bn.featureIndex]=!0,Dr[Bn.bucketInstanceId]===void 0&&(Dr[Bn.bucketInstanceId]=[]),Dr[Bn.bucketInstanceId].push(Bn.featureIndex))}}return Dr},os.prototype.insertCollisionBox=function(f,g,p,E,Y){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:E,collisionGroupID:Y},f[0],f[1],f[2],f[3])},os.prototype.insertCollisionCircles=function(f,g,p,E,Y){for(var ye=g?this.ignoredGrid:this.grid,Pe={bucketInstanceId:p,featureIndex:E,collisionGroupID:Y},ct=0;ct<f.length;ct+=4)ye.insertCircle(Pe,f[ct],f[ct+1],f[ct+2])},os.prototype.projectAndGetPerspectiveRatio=function(f,g,p){var E=[g,p,0,1];return qo(E,E,f),{point:new l.Point((E[0]/E[3]+1)/2*this.transform.width+100,(-E[1]/E[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}},os.prototype.isOffscreen=function(f,g,p,E){return p<100||f>=this.screenRightBoundary||E<100||g>this.screenBottomBoundary},os.prototype.isInsideGrid=function(f,g,p,E){return p>=0&&f<this.gridRightBoundary&&E>=0&&g<this.gridBottomBoundary},os.prototype.getViewportMatrix=function(){var f=l.identity([]);return l.translate(f,f,[-100,-100,0]),f};var Wo=function(f,g,p,E){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?g:-g))):E&&p?1:0,this.placed=p};Wo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var za=function(f,g,p,E,Y){this.text=new Wo(f?f.text:null,g,p,Y),this.icon=new Wo(f?f.icon:null,g,E,Y)};za.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Tu=function(f,g,p){this.text=f,this.icon=g,this.skipFade=p},Cs=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},Zs=function(f,g,p,E,Y){this.bucketInstanceId=f,this.featureIndex=g,this.sourceLayerIndex=p,this.bucketIndex=E,this.tileID=Y},ts=function(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}};function Vs(f,g,p,E,Y){var ye=l.getAnchorAlignment(f),Pe=-(ye.horizontalAlign-.5)*g,ct=-(ye.verticalAlign-.5)*p,Vt=l.evaluateVariableOffset(f,E);return new l.Point(Pe+Vt[0]*Y,ct+Vt[1]*Y)}function ou(f,g,p,E,Y,ye){var Pe=f.x1,ct=f.x2,Vt=f.y1,fr=f.y2,Ir=f.anchorPointX,Dr=f.anchorPointY,jr=new l.Point(g,p);return E&&jr._rotate(Y?ye:-ye),{x1:Pe+jr.x,y1:Vt+jr.y,x2:ct+jr.x,y2:fr+jr.y,anchorPointX:Ir,anchorPointY:Dr}}ts.prototype.get=function(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){var g=++this.maxGroupID;this.collisionGroups[f]={ID:g,predicate:function(p){return p.collisionGroupID===g}}}return this.collisionGroups[f]};var ls=function(f,g,p,E){this.transform=f.clone(),this.collisionIndex=new os(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new ts(p),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}};function Di(f,g,p,E,Y){f.emplaceBack(g?1:0,p?1:0,E||0,Y||0),f.emplaceBack(g?1:0,p?1:0,E||0,Y||0),f.emplaceBack(g?1:0,p?1:0,E||0,Y||0),f.emplaceBack(g?1:0,p?1:0,E||0,Y||0)}ls.prototype.getBucketParts=function(f,g,p,E){var Y=p.getBucket(g),ye=p.latestFeatureIndex;if(Y&&ye&&g.id===Y.layerIds[0]){var Pe=p.collisionBoxArray,ct=Y.layers[0].layout,Vt=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),fr=p.tileSize/l.EXTENT,Ir=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),Dr=ct.get("text-pitch-alignment")==="map",jr=ct.get("text-rotation-alignment")==="map",En=Go(p,1,this.transform.zoom),gn=wa(Ir,Dr,jr,this.transform,En),Bn=null;if(Dr){var fn=Aa(Ir,Dr,jr,this.transform,En);Bn=l.multiply([],this.transform.labelPlaneMatrix,fn)}this.retainedQueryData[Y.bucketInstanceId]=new Zs(Y.bucketInstanceId,ye,Y.sourceLayerIndex,Y.index,p.tileID);var Fn={bucket:Y,layout:ct,posMatrix:Ir,textLabelPlaneMatrix:gn,labelToScreenMatrix:Bn,scale:Vt,textPixelRatio:fr,holdingForFade:p.holdingForFade(),collisionBoxArray:Pe,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(Y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Y.sourceID)};if(E)for(var jn=0,vi=Y.sortKeyRanges;jn<vi.length;jn+=1){var ki=vi[jn];f.push({sortKey:ki.sortKey,symbolInstanceStart:ki.symbolInstanceStart,symbolInstanceEnd:ki.symbolInstanceEnd,parameters:Fn})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:Y.symbolInstances.length,parameters:Fn})}},ls.prototype.attemptAnchorPlacement=function(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir,Dr,jr,En,gn){var Bn,fn=[Dr.textOffset0,Dr.textOffset1],Fn=Vs(f,p,E,fn,Y),jn=this.collisionIndex.placeCollisionBox(ou(g,Fn.x,Fn.y,ye,Pe,this.transform.angle),Ir,ct,Vt,fr.predicate);if(!gn||this.collisionIndex.placeCollisionBox(ou(gn,Fn.x,Fn.y,ye,Pe,this.transform.angle),Ir,ct,Vt,fr.predicate).box.length!==0)return jn.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Dr.crossTileID]&&this.prevPlacement.placements[Dr.crossTileID]&&this.prevPlacement.placements[Dr.crossTileID].text&&(Bn=this.prevPlacement.variableOffsets[Dr.crossTileID].anchor),this.variableOffsets[Dr.crossTileID]={textOffset:fn,width:p,height:E,anchor:f,textBoxScale:Y,prevAnchor:Bn},this.markUsedJustification(jr,f,Dr,En),jr.allowVerticalPlacement&&(this.markUsedOrientation(jr,En,Dr),this.placedOrientations[Dr.crossTileID]=En),{shift:Fn,placedGlyphBoxes:jn}):void 0},ls.prototype.placeLayerBucketPart=function(f,g,p){var E=this,Y=f.parameters,ye=Y.bucket,Pe=Y.layout,ct=Y.posMatrix,Vt=Y.textLabelPlaneMatrix,fr=Y.labelToScreenMatrix,Ir=Y.textPixelRatio,Dr=Y.holdingForFade,jr=Y.collisionBoxArray,En=Y.partiallyEvaluatedTextSize,gn=Y.collisionGroup,Bn=Pe.get("text-optional"),fn=Pe.get("icon-optional"),Fn=Pe.get("text-allow-overlap"),jn=Pe.get("icon-allow-overlap"),vi=Pe.get("text-rotation-alignment")==="map",ki=Pe.get("text-pitch-alignment")==="map",Ti=Pe.get("icon-text-fit")!=="none",Fi=Pe.get("symbol-z-order")==="viewport-y",na=Fn&&(jn||!ye.hasIconData()||fn),ka=jn&&(Fn||!ye.hasTextData()||Bn);!ye.collisionArrays&&jr&&ye.deserializeCollisionBoxes(jr);var Na=function(vo,ds){if(!g[vo.crossTileID])if(Dr)E.placements[vo.crossTileID]=new Tu(!1,!1,!1);else{var Ns,cs=!1,Jo=!1,$s=!0,ws=null,_s={box:null,offscreen:null},El={box:null,offscreen:null},nl=null,Qu=null,Ac=0,Ju=0,qu=0;ds.textFeatureIndex?Ac=ds.textFeatureIndex:vo.useRuntimeCollisionCircles&&(Ac=vo.featureIndex),ds.verticalTextFeatureIndex&&(Ju=ds.verticalTextFeatureIndex);var Tc=ds.textBox;if(Tc){var ec=function(Du){var yu=l.WritingMode.horizontal;if(ye.allowVerticalPlacement&&!Du&&E.prevPlacement){var qc=E.prevPlacement.placedOrientations[vo.crossTileID];qc&&(E.placedOrientations[vo.crossTileID]=qc,E.markUsedOrientation(ye,yu=qc,vo))}return yu},Pf=function(Du,yu){if(ye.allowVerticalPlacement&&vo.numVerticalGlyphVertices>0&&ds.verticalTextBox)for(var qc=0,sh=ye.writingModes;qc<sh.length&&(sh[qc]===l.WritingMode.vertical?(_s=yu(),El=_s):_s=Du(),!(_s&&_s.box&&_s.box.length));qc+=1);else _s=Du()};if(Pe.get("text-variable-anchor")){var Ef=Pe.get("text-variable-anchor");if(E.prevPlacement&&E.prevPlacement.variableOffsets[vo.crossTileID]){var $l=E.prevPlacement.variableOffsets[vo.crossTileID];Ef.indexOf($l.anchor)>0&&(Ef=Ef.filter(function(Du){return Du!==$l.anchor})).unshift($l.anchor)}var Uc=function(Du,yu,qc){for(var sh=Du.x2-Du.x1,vh=Du.y2-Du.y1,Nf=vo.textBoxScale,mh=Ti&&!jn?yu:null,If={box:[],offscreen:!1},Rf=Fn?2*Ef.length:Ef.length,vf=0;vf<Rf;++vf){var oe=E.attemptAnchorPlacement(Ef[vf%Ef.length],Du,sh,vh,Nf,vi,ki,Ir,ct,gn,vf>=Ef.length,vo,ye,qc,mh);if(oe&&(If=oe.placedGlyphBoxes)&&If.box&&If.box.length){cs=!0,ws=oe.shift;break}}return If};Pf(function(){return Uc(Tc,ds.iconBox,l.WritingMode.horizontal)},function(){var Du=ds.verticalTextBox;return ye.allowVerticalPlacement&&!(_s&&_s.box&&_s.box.length)&&vo.numVerticalGlyphVertices>0&&Du?Uc(Du,ds.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),_s&&(cs=_s.box,$s=_s.offscreen);var Jh=ec(_s&&_s.box);if(!cs&&E.prevPlacement){var qh=E.prevPlacement.variableOffsets[vo.crossTileID];qh&&(E.variableOffsets[vo.crossTileID]=qh,E.markUsedJustification(ye,qh.anchor,vo,Jh))}}else{var Sh=function(Du,yu){var qc=E.collisionIndex.placeCollisionBox(Du,Fn,Ir,ct,gn.predicate);return qc&&qc.box&&qc.box.length&&(E.markUsedOrientation(ye,yu,vo),E.placedOrientations[vo.crossTileID]=yu),qc};Pf(function(){return Sh(Tc,l.WritingMode.horizontal)},function(){var Du=ds.verticalTextBox;return ye.allowVerticalPlacement&&vo.numVerticalGlyphVertices>0&&Du?Sh(Du,l.WritingMode.vertical):{box:null,offscreen:null}}),ec(_s&&_s.box&&_s.box.length)}}if(cs=(Ns=_s)&&Ns.box&&Ns.box.length>0,$s=Ns&&Ns.offscreen,vo.useRuntimeCollisionCircles){var Of=ye.text.placedSymbolArray.get(vo.centerJustifiedTextSymbolIndex),Ch=l.evaluateSizeForFeature(ye.textSizeData,En,Of),pf=Pe.get("text-padding");nl=E.collisionIndex.placeCollisionCircles(Fn,Of,ye.lineVertexArray,ye.glyphOffsetArray,Ch,ct,Vt,fr,p,ki,gn.predicate,vo.collisionCircleDiameter,pf),cs=Fn||nl.circles.length>0&&!nl.collisionDetected,$s=$s&&nl.offscreen}if(ds.iconFeatureIndex&&(qu=ds.iconFeatureIndex),ds.iconBox){var oh=function(Du){var yu=Ti&&ws?ou(Du,ws.x,ws.y,vi,ki,E.transform.angle):Du;return E.collisionIndex.placeCollisionBox(yu,jn,Ir,ct,gn.predicate)};Jo=El&&El.box&&El.box.length&&ds.verticalIconBox?(Qu=oh(ds.verticalIconBox)).box.length>0:(Qu=oh(ds.iconBox)).box.length>0,$s=$s&&Qu.offscreen}var Jc=Bn||vo.numHorizontalGlyphVertices===0&&vo.numVerticalGlyphVertices===0,nc=fn||vo.numIconVertices===0;if(Jc||nc?nc?Jc||(Jo=Jo&&cs):cs=Jo&&cs:Jo=cs=Jo&&cs,cs&&Ns&&Ns.box&&E.collisionIndex.insertCollisionBox(Ns.box,Pe.get("text-ignore-placement"),ye.bucketInstanceId,El&&El.box&&Ju?Ju:Ac,gn.ID),Jo&&Qu&&E.collisionIndex.insertCollisionBox(Qu.box,Pe.get("icon-ignore-placement"),ye.bucketInstanceId,qu,gn.ID),nl&&(cs&&E.collisionIndex.insertCollisionCircles(nl.circles,Pe.get("text-ignore-placement"),ye.bucketInstanceId,Ac,gn.ID),p)){var ic=ye.bucketInstanceId,wh=E.collisionCircleArrays[ic];wh===void 0&&(wh=E.collisionCircleArrays[ic]=new Cs);for(var Fh=0;Fh<nl.circles.length;Fh+=4)wh.circles.push(nl.circles[Fh+0]),wh.circles.push(nl.circles[Fh+1]),wh.circles.push(nl.circles[Fh+2]),wh.circles.push(nl.collisionDetected?1:0)}E.placements[vo.crossTileID]=new Tu(cs||na,Jo||ka,$s||ye.justReloaded),g[vo.crossTileID]=!0}};if(Fi)for(var po=ye.getSortedSymbolIndexes(this.transform.angle),No=po.length-1;No>=0;--No){var is=po[No];Na(ye.symbolInstances.get(is),ye.collisionArrays[is])}else for(var rs=f.symbolInstanceStart;rs<f.symbolInstanceEnd;rs++)Na(ye.symbolInstances.get(rs),ye.collisionArrays[rs]);if(p&&ye.bucketInstanceId in this.collisionCircleArrays){var Ls=this.collisionCircleArrays[ye.bucketInstanceId];l.invert(Ls.invProjMatrix,ct),Ls.viewportMatrix=this.collisionIndex.getViewportMatrix()}ye.justReloaded=!1},ls.prototype.markUsedJustification=function(f,g,p,E){var Y;Y=E===l.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(g)];for(var ye=0,Pe=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];ye<Pe.length;ye+=1){var ct=Pe[ye];ct>=0&&(f.text.placedSymbolArray.get(ct).crossTileID=Y>=0&&ct!==Y?0:p.crossTileID)}},ls.prototype.markUsedOrientation=function(f,g,p){for(var E=g===l.WritingMode.horizontal||g===l.WritingMode.horizontalOnly?g:0,Y=g===l.WritingMode.vertical?g:0,ye=0,Pe=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];ye<Pe.length;ye+=1)f.text.placedSymbolArray.get(Pe[ye]).placedOrientation=E;p.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=Y)},ls.prototype.commit=function(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;var g=this.prevPlacement,p=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;var E=g?g.symbolFadeChange(f):1,Y=g?g.opacities:{},ye=g?g.variableOffsets:{},Pe=g?g.placedOrientations:{};for(var ct in this.placements){var Vt=this.placements[ct],fr=Y[ct];fr?(this.opacities[ct]=new za(fr,E,Vt.text,Vt.icon),p=p||Vt.text!==fr.text.placed||Vt.icon!==fr.icon.placed):(this.opacities[ct]=new za(null,E,Vt.text,Vt.icon,Vt.skipFade),p=p||Vt.text||Vt.icon)}for(var Ir in Y){var Dr=Y[Ir];if(!this.opacities[Ir]){var jr=new za(Dr,E,!1,!1);jr.isHidden()||(this.opacities[Ir]=jr,p=p||Dr.text.placed||Dr.icon.placed)}}for(var En in ye)this.variableOffsets[En]||!this.opacities[En]||this.opacities[En].isHidden()||(this.variableOffsets[En]=ye[En]);for(var gn in Pe)this.placedOrientations[gn]||!this.opacities[gn]||this.opacities[gn].isHidden()||(this.placedOrientations[gn]=Pe[gn]);p?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:f)},ls.prototype.updateLayerOpacities=function(f,g){for(var p={},E=0,Y=g;E<Y.length;E+=1){var ye=Y[E],Pe=ye.getBucket(f);Pe&&ye.latestFeatureIndex&&f.id===Pe.layerIds[0]&&this.updateBucketOpacities(Pe,p,ye.collisionBoxArray)}},ls.prototype.updateBucketOpacities=function(f,g,p){var E=this;f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();var Y=f.layers[0].layout,ye=new za(null,0,!1,!1,!0),Pe=Y.get("text-allow-overlap"),ct=Y.get("icon-allow-overlap"),Vt=Y.get("text-variable-anchor"),fr=Y.get("text-rotation-alignment")==="map",Ir=Y.get("text-pitch-alignment")==="map",Dr=Y.get("icon-text-fit")!=="none",jr=new za(null,0,Pe&&(ct||!f.hasIconData()||Y.get("icon-optional")),ct&&(Pe||!f.hasTextData()||Y.get("text-optional")),!0);!f.collisionArrays&&p&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(p);for(var En=function(Fn,jn,vi){for(var ki=0;ki<jn/4;ki++)Fn.opacityVertexArray.emplaceBack(vi)},gn=function(Fn){var jn=f.symbolInstances.get(Fn),vi=jn.numHorizontalGlyphVertices,ki=jn.numVerticalGlyphVertices,Ti=jn.crossTileID,Fi=E.opacities[Ti];g[Ti]?Fi=ye:Fi||(E.opacities[Ti]=Fi=jr),g[Ti]=!0;var na=jn.numIconVertices>0,ka=E.placedOrientations[jn.crossTileID],Na=ka===l.WritingMode.vertical,po=ka===l.WritingMode.horizontal||ka===l.WritingMode.horizontalOnly;if(vi>0||ki>0){var No=Hr(Fi.text);En(f.text,vi,Na?Bo:No),En(f.text,ki,po?Bo:No);var is=Fi.text.isHidden();[jn.rightJustifiedTextSymbolIndex,jn.centerJustifiedTextSymbolIndex,jn.leftJustifiedTextSymbolIndex].forEach(function(_s){_s>=0&&(f.text.placedSymbolArray.get(_s).hidden=is||Na?1:0)}),jn.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(jn.verticalPlacedTextSymbolIndex).hidden=is||po?1:0);var rs=E.variableOffsets[jn.crossTileID];rs&&E.markUsedJustification(f,rs.anchor,jn,ka);var Ls=E.placedOrientations[jn.crossTileID];Ls&&(E.markUsedJustification(f,"left",jn,Ls),E.markUsedOrientation(f,Ls,jn))}if(na){var vo=Hr(Fi.icon),ds=!(Dr&&jn.verticalPlacedIconSymbolIndex&&Na);jn.placedIconSymbolIndex>=0&&(En(f.icon,jn.numIconVertices,ds?vo:Bo),f.icon.placedSymbolArray.get(jn.placedIconSymbolIndex).hidden=Fi.icon.isHidden()),jn.verticalPlacedIconSymbolIndex>=0&&(En(f.icon,jn.numVerticalIconVertices,ds?Bo:vo),f.icon.placedSymbolArray.get(jn.verticalPlacedIconSymbolIndex).hidden=Fi.icon.isHidden())}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){var Ns=f.collisionArrays[Fn];if(Ns){var cs=new l.Point(0,0);if(Ns.textBox||Ns.verticalTextBox){var Jo=!0;if(Vt){var $s=E.variableOffsets[Ti];$s?(cs=Vs($s.anchor,$s.width,$s.height,$s.textOffset,$s.textBoxScale),fr&&cs._rotate(Ir?E.transform.angle:-E.transform.angle)):Jo=!1}Ns.textBox&&Di(f.textCollisionBox.collisionVertexArray,Fi.text.placed,!Jo||Na,cs.x,cs.y),Ns.verticalTextBox&&Di(f.textCollisionBox.collisionVertexArray,Fi.text.placed,!Jo||po,cs.x,cs.y)}var ws=Boolean(!po&&Ns.verticalIconBox);Ns.iconBox&&Di(f.iconCollisionBox.collisionVertexArray,Fi.icon.placed,ws,Dr?cs.x:0,Dr?cs.y:0),Ns.verticalIconBox&&Di(f.iconCollisionBox.collisionVertexArray,Fi.icon.placed,!ws,Dr?cs.x:0,Dr?cs.y:0)}}},Bn=0;Bn<f.symbolInstances.length;Bn++)gn(Bn);if(f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){var fn=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=fn.invProjMatrix,f.placementViewportMatrix=fn.viewportMatrix,f.collisionCircleArray=fn.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}},ls.prototype.symbolFadeChange=function(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ls.prototype.zoomAdjustment=function(f){return Math.max(0,(this.transform.zoom-f)/1.5)},ls.prototype.hasTransitions=function(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration},ls.prototype.stillRecent=function(f,g){var p=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*p>f},ls.prototype.setStale=function(){this.stale=!0};var As=Math.pow(2,25),Rs=Math.pow(2,24),vr=Math.pow(2,17),zr=Math.pow(2,16),lr=Math.pow(2,9),Zr=Math.pow(2,8),Hn=Math.pow(2,1);function Hr(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;var g=f.placed?1:0,p=Math.floor(127*f.opacity);return p*As+g*Rs+p*vr+g*zr+p*lr+g*Zr+p*Hn+g}var Bo=0,Yr=function(f){this._sortAcrossTiles=f.layout.get("symbol-z-order")!=="viewport-y"&&f.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yr.prototype.continuePlacement=function(f,g,p,E,Y){for(var ye=this._bucketParts;this._currentTileIndex<f.length;)if(g.getBucketParts(ye,E,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ye.sort(function(Pe,ct){return Pe.sortKey-ct.sortKey}));this._currentPartIndex<ye.length;)if(g.placeLayerBucketPart(ye[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,Y())return!0;return!1};var pr=function(f,g,p,E,Y,ye,Pe){this.placement=new ls(f,Y,ye,Pe),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=E,this._done=!1};pr.prototype.isDone=function(){return this._done},pr.prototype.continuePlacement=function(f,g,p){for(var E=this,Y=l.browser.now(),ye=function(){var Vt=l.browser.now()-Y;return!E._forceFullPlacement&&Vt>2};this._currentPlacementIndex>=0;){var Pe=g[f[this._currentPlacementIndex]],ct=this.placement.collisionIndex.transform.zoom;if(Pe.type==="symbol"&&(!Pe.minzoom||Pe.minzoom<=ct)&&(!Pe.maxzoom||Pe.maxzoom>ct)){if(this._inProgressLayer||(this._inProgressLayer=new Yr(Pe)),this._inProgressLayer.continuePlacement(p[Pe.source],this.placement,this._showCollisionBoxes,Pe,ye))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},pr.prototype.commit=function(f){return this.placement.commit(f),this.placement};var at=512/l.EXTENT/2,hr=function(f,g,p){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(var E=0;E<g.length;E++){var Y=g.get(E),ye=Y.key;this.indexedSymbolInstances[ye]||(this.indexedSymbolInstances[ye]=[]),this.indexedSymbolInstances[ye].push({crossTileID:Y.crossTileID,coord:this.getScaledCoordinates(Y,f)})}};hr.prototype.getScaledCoordinates=function(f,g){var p=at/Math.pow(2,g.canonical.z-this.tileID.canonical.z);return{x:Math.floor((g.canonical.x*l.EXTENT+f.anchorX)*p),y:Math.floor((g.canonical.y*l.EXTENT+f.anchorY)*p)}},hr.prototype.findMatches=function(f,g,p){for(var E=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),Y=0;Y<f.length;Y++){var ye=f.get(Y);if(!ye.crossTileID){var Pe=this.indexedSymbolInstances[ye.key];if(Pe)for(var ct=this.getScaledCoordinates(ye,g),Vt=0,fr=Pe;Vt<fr.length;Vt+=1){var Ir=fr[Vt];if(Math.abs(Ir.coord.x-ct.x)<=E&&Math.abs(Ir.coord.y-ct.y)<=E&&!p[Ir.crossTileID]){p[Ir.crossTileID]=!0,ye.crossTileID=Ir.crossTileID;break}}}}};var er=function(){this.maxCrossTileID=0};er.prototype.generate=function(){return++this.maxCrossTileID};var dn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};dn.prototype.handleWrapJump=function(f){var g=Math.round((f-this.lng)/360);if(g!==0)for(var p in this.indexes){var E=this.indexes[p],Y={};for(var ye in E){var Pe=E[ye];Pe.tileID=Pe.tileID.unwrapTo(Pe.tileID.wrap+g),Y[Pe.tileID.key]=Pe}this.indexes[p]=Y}this.lng=f},dn.prototype.addBucket=function(f,g,p){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(var E=0;E<g.symbolInstances.length;E++)g.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});var Y=this.usedCrossTileIDs[f.overscaledZ];for(var ye in this.indexes){var Pe=this.indexes[ye];if(Number(ye)>f.overscaledZ)for(var ct in Pe){var Vt=Pe[ct];Vt.tileID.isChildOf(f)&&Vt.findMatches(g.symbolInstances,f,Y)}else{var fr=Pe[f.scaledTo(Number(ye)).key];fr&&fr.findMatches(g.symbolInstances,f,Y)}}for(var Ir=0;Ir<g.symbolInstances.length;Ir++){var Dr=g.symbolInstances.get(Ir);Dr.crossTileID||(Dr.crossTileID=p.generate(),Y[Dr.crossTileID]=!0)}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new hr(f,g.symbolInstances,g.bucketInstanceId),!0},dn.prototype.removeBucketCrossTileIDs=function(f,g){for(var p in g.indexedSymbolInstances)for(var E=0,Y=g.indexedSymbolInstances[p];E<Y.length;E+=1)delete this.usedCrossTileIDs[f][Y[E].crossTileID]},dn.prototype.removeStaleBuckets=function(f){var g=!1;for(var p in this.indexes){var E=this.indexes[p];for(var Y in E)f[E[Y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,E[Y]),delete E[Y],g=!0)}return g};var mn=function(){this.layerIndexes={},this.crossTileIDs=new er,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};mn.prototype.addLayer=function(f,g,p){var E=this.layerIndexes[f.id];E===void 0&&(E=this.layerIndexes[f.id]=new dn);var Y=!1,ye={};E.handleWrapJump(p);for(var Pe=0,ct=g;Pe<ct.length;Pe+=1){var Vt=ct[Pe],fr=Vt.getBucket(f);fr&&f.id===fr.layerIds[0]&&(fr.bucketInstanceId||(fr.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(Vt.tileID,fr,this.crossTileIDs)&&(Y=!0),ye[fr.bucketInstanceId]=!0)}return E.removeStaleBuckets(ye)&&(Y=!0),Y},mn.prototype.pruneUnusedLayers=function(f){var g={};for(var p in f.forEach(function(E){g[E]=!0}),this.layerIndexes)g[p]||delete this.layerIndexes[p]};var Vn=function(f,g){return l.emitValidationErrors(f,g&&g.filter(function(p){return p.identifier!=="source.canvas"}))},ni=l.pick(Hi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),si=l.pick(Hi,["setCenter","setZoom","setBearing","setPitch"]),Si=function(){var f={},g=l.styleSpec.$version;for(var p in l.styleSpec.$root){var E,Y=l.styleSpec.$root[p];Y.required&&(E=p==="version"?g:Y.type==="array"?[]:{})!=null&&(f[p]=E)}return f}(),qi=function(f){function g(p,E){var Y=this;E===void 0&&(E={}),f.call(this),this.map=p,this.dispatcher=new We(On(),this),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new qe(p._requestManager,E.localIdeographFontFamily),this.lineAtlas=new ht(256,512),this.crossTileSymbolIndex=new mn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var ye=this;this._rtlTextPluginCallback=g.registerForPluginStateChange(function(Pe){ye.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL},function(ct,Vt){if(l.triggerPluginCompletionEvent(ct),Vt&&Vt.every(function(Ir){return Ir}))for(var fr in ye.sourceCaches)ye.sourceCaches[fr].reload()})}),this.on("data",function(Pe){if(Pe.dataType==="source"&&Pe.sourceDataType==="metadata"){var ct=Y.sourceCaches[Pe.sourceId];if(ct){var Vt=ct.getSource();if(Vt&&Vt.vectorLayerIds)for(var fr in Y._layers){var Ir=Y._layers[fr];Ir.source===Vt.id&&Y._validateLayer(Ir)}}}})}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.loadURL=function(p,E){var Y=this;E===void 0&&(E={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var ye=typeof E.validate=="boolean"?E.validate:!l.isMapboxURL(p);p=this.map._requestManager.normalizeStyleURL(p,E.accessToken);var Pe=this.map._requestManager.transformRequest(p,l.ResourceType.Style);this._request=l.getJSON(Pe,function(ct,Vt){Y._request=null,ct?Y.fire(new l.ErrorEvent(ct)):Vt&&Y._load(Vt,ye)})},g.prototype.loadJSON=function(p,E){var Y=this;E===void 0&&(E={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){Y._request=null,Y._load(p,E.validate!==!1)})},g.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Si,!1)},g.prototype._load=function(p,E){if(!E||!Vn(this,l.validateStyle(p))){for(var Y in this._loaded=!0,this.stylesheet=p,p.sources)this.addSource(Y,p.sources[Y],{validate:!1});p.sprite?this._loadSprite(p.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(p.glyphs);var ye=oi(this.stylesheet.layers);this._order=ye.map(function(fr){return fr.id}),this._layers={},this._serializedLayers={};for(var Pe=0,ct=ye;Pe<ct.length;Pe+=1){var Vt=ct[Pe];(Vt=l.createStyleLayer(Vt)).setEventedParent(this,{layer:{id:Vt.id}}),this._layers[Vt.id]=Vt,this._serializedLayers[Vt.id]=Vt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Te(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},g.prototype._loadSprite=function(p){var E=this;this._spriteRequest=function(Y,ye,Pe){var ct,Vt,fr,Ir=l.browser.devicePixelRatio>1?"@2x":"",Dr=l.getJSON(ye.transformRequest(ye.normalizeSpriteURL(Y,Ir,".json"),l.ResourceType.SpriteJSON),function(gn,Bn){Dr=null,fr||(fr=gn,ct=Bn,En())}),jr=l.getImage(ye.transformRequest(ye.normalizeSpriteURL(Y,Ir,".png"),l.ResourceType.SpriteImage),function(gn,Bn){jr=null,fr||(fr=gn,Vt=Bn,En())});function En(){if(fr)Pe(fr);else if(ct&&Vt){var gn=l.browser.getImageData(Vt),Bn={};for(var fn in ct){var Fn=ct[fn],jn=Fn.width,vi=Fn.height,ki=Fn.x,Ti=Fn.y,Fi=Fn.sdf,na=Fn.pixelRatio,ka=Fn.stretchX,Na=Fn.stretchY,po=Fn.content,No=new l.RGBAImage({width:jn,height:vi});l.RGBAImage.copy(gn,No,{x:ki,y:Ti},{x:0,y:0},{width:jn,height:vi}),Bn[fn]={data:No,pixelRatio:na,sdf:Fi,stretchX:ka,stretchY:Na,content:po}}Pe(null,Bn)}}return{cancel:function(){Dr&&(Dr.cancel(),Dr=null),jr&&(jr.cancel(),jr=null)}}}(p,this.map._requestManager,function(Y,ye){if(E._spriteRequest=null,Y)E.fire(new l.ErrorEvent(Y));else if(ye)for(var Pe in ye)E.imageManager.addImage(Pe,ye[Pe]);E.imageManager.setLoaded(!0),E._availableImages=E.imageManager.listImages(),E.dispatcher.broadcast("setImages",E._availableImages),E.fire(new l.Event("data",{dataType:"style"}))})},g.prototype._validateLayer=function(p){var E=this.sourceCaches[p.source];if(E){var Y=p.sourceLayer;if(Y){var ye=E.getSource();(ye.type==="geojson"||ye.vectorLayerIds&&ye.vectorLayerIds.indexOf(Y)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+Y+'" does not exist on source "'+ye.id+'" as specified by style layer "'+p.id+'"')))}}},g.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var p in this.sourceCaches)if(!this.sourceCaches[p].loaded())return!1;return!!this.imageManager.isLoaded()},g.prototype._serializeLayers=function(p){for(var E=[],Y=0,ye=p;Y<ye.length;Y+=1){var Pe=this._layers[ye[Y]];Pe.type!=="custom"&&E.push(Pe.serialize())}return E},g.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(var E in this._layers)if(this._layers[E].hasTransition())return!0;return!1},g.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},g.prototype.update=function(p){if(this._loaded){var E=this._changed;if(this._changed){var Y=Object.keys(this._updatedLayers),ye=Object.keys(this._removedLayers);for(var Pe in(Y.length||ye.length)&&this._updateWorkerLayers(Y,ye),this._updatedSources){var ct=this._updatedSources[Pe];ct==="reload"?this._reloadSource(Pe):ct==="clear"&&this._clearSource(Pe)}for(var Vt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Vt].updateTransitions(p);this.light.updateTransitions(p),this._resetUpdates()}var fr={};for(var Ir in this.sourceCaches){var Dr=this.sourceCaches[Ir];fr[Ir]=Dr.used,Dr.used=!1}for(var jr=0,En=this._order;jr<En.length;jr+=1){var gn=this._layers[En[jr]];gn.recalculate(p,this._availableImages),!gn.isHidden(p.zoom)&&gn.source&&(this.sourceCaches[gn.source].used=!0)}for(var Bn in fr){var fn=this.sourceCaches[Bn];fr[Bn]!==fn.used&&fn.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Bn}))}this.light.recalculate(p),this.z=p.zoom,E&&this.fire(new l.Event("data",{dataType:"style"}))}},g.prototype._updateTilesForChangedImages=function(){var p=Object.keys(this._changedImages);if(p.length){for(var E in this.sourceCaches)this.sourceCaches[E].reloadTilesForDependencies(["icons","patterns"],p);this._changedImages={}}},g.prototype._updateWorkerLayers=function(p,E){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(p),removedIds:E})},g.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},g.prototype.setState=function(p){var E=this;if(this._checkLoaded(),Vn(this,l.validateStyle(p)))return!1;(p=l.clone$1(p)).layers=oi(p.layers);var Y=function(Pe,ct){if(!Pe)return[{command:Hi.setStyle,args:[ct]}];var Vt=[];try{if(!l.deepEqual(Pe.version,ct.version))return[{command:Hi.setStyle,args:[ct]}];l.deepEqual(Pe.center,ct.center)||Vt.push({command:Hi.setCenter,args:[ct.center]}),l.deepEqual(Pe.zoom,ct.zoom)||Vt.push({command:Hi.setZoom,args:[ct.zoom]}),l.deepEqual(Pe.bearing,ct.bearing)||Vt.push({command:Hi.setBearing,args:[ct.bearing]}),l.deepEqual(Pe.pitch,ct.pitch)||Vt.push({command:Hi.setPitch,args:[ct.pitch]}),l.deepEqual(Pe.sprite,ct.sprite)||Vt.push({command:Hi.setSprite,args:[ct.sprite]}),l.deepEqual(Pe.glyphs,ct.glyphs)||Vt.push({command:Hi.setGlyphs,args:[ct.glyphs]}),l.deepEqual(Pe.transition,ct.transition)||Vt.push({command:Hi.setTransition,args:[ct.transition]}),l.deepEqual(Pe.light,ct.light)||Vt.push({command:Hi.setLight,args:[ct.light]});var fr={},Ir=[];(function(jr,En,gn,Bn){var fn;for(fn in En=En||{},jr=jr||{})jr.hasOwnProperty(fn)&&(En.hasOwnProperty(fn)||Wi(fn,gn,Bn));for(fn in En)En.hasOwnProperty(fn)&&(jr.hasOwnProperty(fn)?l.deepEqual(jr[fn],En[fn])||(jr[fn].type==="geojson"&&En[fn].type==="geojson"&&uo(jr,En,fn)?gn.push({command:Hi.setGeoJSONSourceData,args:[fn,En[fn].data]}):jo(fn,En,gn,Bn)):Ca(fn,En,gn))})(Pe.sources,ct.sources,Ir,fr);var Dr=[];Pe.layers&&Pe.layers.forEach(function(jr){fr[jr.source]?Vt.push({command:Hi.removeLayer,args:[jr.id]}):Dr.push(jr)}),Vt=Vt.concat(Ir),function(jr,En,gn){En=En||[];var Bn,fn,Fn,jn,vi,ki,Ti,Fi=(jr=jr||[]).map(bn),na=En.map(bn),ka=jr.reduce(Oi,{}),Na=En.reduce(Oi,{}),po=Fi.slice(),No=Object.create(null);for(Bn=0,fn=0;Bn<Fi.length;Bn++)Na.hasOwnProperty(Fn=Fi[Bn])?fn++:(gn.push({command:Hi.removeLayer,args:[Fn]}),po.splice(po.indexOf(Fn,fn),1));for(Bn=0,fn=0;Bn<na.length;Bn++)po[po.length-1-Bn]!==(Fn=na[na.length-1-Bn])&&(ka.hasOwnProperty(Fn)?(gn.push({command:Hi.removeLayer,args:[Fn]}),po.splice(po.lastIndexOf(Fn,po.length-fn),1)):fn++,gn.push({command:Hi.addLayer,args:[Na[Fn],ki=po[po.length-Bn]]}),po.splice(po.length-Bn,0,Fn),No[Fn]=!0);for(Bn=0;Bn<na.length;Bn++)if(jn=ka[Fn=na[Bn]],vi=Na[Fn],!No[Fn]&&!l.deepEqual(jn,vi))if(l.deepEqual(jn.source,vi.source)&&l.deepEqual(jn["source-layer"],vi["source-layer"])&&l.deepEqual(jn.type,vi.type)){for(Ti in Pn(jn.layout,vi.layout,gn,Fn,null,Hi.setLayoutProperty),Pn(jn.paint,vi.paint,gn,Fn,null,Hi.setPaintProperty),l.deepEqual(jn.filter,vi.filter)||gn.push({command:Hi.setFilter,args:[Fn,vi.filter]}),l.deepEqual(jn.minzoom,vi.minzoom)&&l.deepEqual(jn.maxzoom,vi.maxzoom)||gn.push({command:Hi.setLayerZoomRange,args:[Fn,vi.minzoom,vi.maxzoom]}),jn)jn.hasOwnProperty(Ti)&&Ti!=="layout"&&Ti!=="paint"&&Ti!=="filter"&&Ti!=="metadata"&&Ti!=="minzoom"&&Ti!=="maxzoom"&&(Ti.indexOf("paint.")===0?Pn(jn[Ti],vi[Ti],gn,Fn,Ti.slice(6),Hi.setPaintProperty):l.deepEqual(jn[Ti],vi[Ti])||gn.push({command:Hi.setLayerProperty,args:[Fn,Ti,vi[Ti]]}));for(Ti in vi)vi.hasOwnProperty(Ti)&&!jn.hasOwnProperty(Ti)&&Ti!=="layout"&&Ti!=="paint"&&Ti!=="filter"&&Ti!=="metadata"&&Ti!=="minzoom"&&Ti!=="maxzoom"&&(Ti.indexOf("paint.")===0?Pn(jn[Ti],vi[Ti],gn,Fn,Ti.slice(6),Hi.setPaintProperty):l.deepEqual(jn[Ti],vi[Ti])||gn.push({command:Hi.setLayerProperty,args:[Fn,Ti,vi[Ti]]}))}else gn.push({command:Hi.removeLayer,args:[Fn]}),ki=po[po.lastIndexOf(Fn)+1],gn.push({command:Hi.addLayer,args:[vi,ki]})}(Dr,ct.layers,Vt)}catch(jr){console.warn("Unable to compute style diff:",jr),Vt=[{command:Hi.setStyle,args:[ct]}]}return Vt}(this.serialize(),p).filter(function(Pe){return!(Pe.command in si)});if(Y.length===0)return!1;var ye=Y.filter(function(Pe){return!(Pe.command in ni)});if(ye.length>0)throw new Error("Unimplemented: "+ye.map(function(Pe){return Pe.command}).join(", ")+".");return Y.forEach(function(Pe){Pe.command!=="setTransition"&&E[Pe.command].apply(E,Pe.args)}),this.stylesheet=p,!0},g.prototype.addImage=function(p,E){if(this.getImage(p))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(p,E),this._afterImageUpdated(p)},g.prototype.updateImage=function(p,E){this.imageManager.updateImage(p,E)},g.prototype.getImage=function(p){return this.imageManager.getImage(p)},g.prototype.removeImage=function(p){if(!this.getImage(p))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(p),this._afterImageUpdated(p)},g.prototype._afterImageUpdated=function(p){this._availableImages=this.imageManager.listImages(),this._changedImages[p]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},g.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},g.prototype.addSource=function(p,E,Y){var ye=this;if(Y===void 0&&(Y={}),this._checkLoaded(),this.sourceCaches[p]!==void 0)throw new Error("There is already a source with this ID");if(!E.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(E).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(E.type)>=0&&this._validate(l.validateStyle.source,"sources."+p,E,null,Y))){this.map&&this.map._collectResourceTiming&&(E.collectResourceTiming=!0);var Pe=this.sourceCaches[p]=new Ge(p,E,this.dispatcher);Pe.style=this,Pe.setEventedParent(this,function(){return{isSourceLoaded:ye.loaded(),source:Pe.serialize(),sourceId:p}}),Pe.onAdd(this.map),this._changed=!0}},g.prototype.removeSource=function(p){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error("There is no source with this ID");for(var E in this._layers)if(this._layers[E].source===p)return this.fire(new l.ErrorEvent(new Error('Source "'+p+'" cannot be removed while layer "'+E+'" is using it.')));var Y=this.sourceCaches[p];delete this.sourceCaches[p],delete this._updatedSources[p],Y.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:p})),Y.setEventedParent(null),Y.clearTiles(),Y.onRemove&&Y.onRemove(this.map),this._changed=!0},g.prototype.setGeoJSONSourceData=function(p,E){this._checkLoaded(),this.sourceCaches[p].getSource().setData(E),this._changed=!0},g.prototype.getSource=function(p){return this.sourceCaches[p]&&this.sourceCaches[p].getSource()},g.prototype.addLayer=function(p,E,Y){Y===void 0&&(Y={}),this._checkLoaded();var ye=p.id;if(this.getLayer(ye))this.fire(new l.ErrorEvent(new Error('Layer with id "'+ye+'" already exists on this map')));else{var Pe;if(p.type==="custom"){if(Vn(this,l.validateCustomStyleLayer(p)))return;Pe=l.createStyleLayer(p)}else{if(typeof p.source=="object"&&(this.addSource(ye,p.source),p=l.clone$1(p),p=l.extend(p,{source:ye})),this._validate(l.validateStyle.layer,"layers."+ye,p,{arrayIndex:-1},Y))return;Pe=l.createStyleLayer(p),this._validateLayer(Pe),Pe.setEventedParent(this,{layer:{id:ye}}),this._serializedLayers[Pe.id]=Pe.serialize()}var ct=E?this._order.indexOf(E):this._order.length;if(E&&ct===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+E+'" does not exist on this map.')));else{if(this._order.splice(ct,0,ye),this._layerOrderChanged=!0,this._layers[ye]=Pe,this._removedLayers[ye]&&Pe.source&&Pe.type!=="custom"){var Vt=this._removedLayers[ye];delete this._removedLayers[ye],Vt.type!==Pe.type?this._updatedSources[Pe.source]="clear":(this._updatedSources[Pe.source]="reload",this.sourceCaches[Pe.source].pause())}this._updateLayer(Pe),Pe.onAdd&&Pe.onAdd(this.map)}}},g.prototype.moveLayer=function(p,E){if(this._checkLoaded(),this._changed=!0,this._layers[p]){if(p!==E){var Y=this._order.indexOf(p);this._order.splice(Y,1);var ye=E?this._order.indexOf(E):this._order.length;E&&ye===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+E+'" does not exist on this map.'))):(this._order.splice(ye,0,p),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be moved.")))},g.prototype.removeLayer=function(p){this._checkLoaded();var E=this._layers[p];if(E){E.setEventedParent(null);var Y=this._order.indexOf(p);this._order.splice(Y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[p]=E,delete this._layers[p],delete this._serializedLayers[p],delete this._updatedLayers[p],delete this._updatedPaintProps[p],E.onRemove&&E.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be removed.")))},g.prototype.getLayer=function(p){return this._layers[p]},g.prototype.hasLayer=function(p){return p in this._layers},g.prototype.setLayerZoomRange=function(p,E,Y){this._checkLoaded();var ye=this.getLayer(p);ye?ye.minzoom===E&&ye.maxzoom===Y||(E!=null&&(ye.minzoom=E),Y!=null&&(ye.maxzoom=Y),this._updateLayer(ye)):this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot have zoom extent.")))},g.prototype.setFilter=function(p,E,Y){Y===void 0&&(Y={}),this._checkLoaded();var ye=this.getLayer(p);if(ye){if(!l.deepEqual(ye.filter,E))return E==null?(ye.filter=void 0,void this._updateLayer(ye)):void(this._validate(l.validateStyle.filter,"layers."+ye.id+".filter",E,null,Y)||(ye.filter=l.clone$1(E),this._updateLayer(ye)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be filtered.")))},g.prototype.getFilter=function(p){return l.clone$1(this.getLayer(p).filter)},g.prototype.setLayoutProperty=function(p,E,Y,ye){ye===void 0&&(ye={}),this._checkLoaded();var Pe=this.getLayer(p);Pe?l.deepEqual(Pe.getLayoutProperty(E),Y)||(Pe.setLayoutProperty(E,Y,ye),this._updateLayer(Pe)):this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be styled.")))},g.prototype.getLayoutProperty=function(p,E){var Y=this.getLayer(p);if(Y)return Y.getLayoutProperty(E);this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style.")))},g.prototype.setPaintProperty=function(p,E,Y,ye){ye===void 0&&(ye={}),this._checkLoaded();var Pe=this.getLayer(p);Pe?l.deepEqual(Pe.getPaintProperty(E),Y)||(Pe.setPaintProperty(E,Y,ye)&&this._updateLayer(Pe),this._changed=!0,this._updatedPaintProps[p]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+p+"' does not exist in the map's style and cannot be styled.")))},g.prototype.getPaintProperty=function(p,E){return this.getLayer(p).getPaintProperty(E)},g.prototype.setFeatureState=function(p,E){this._checkLoaded();var Y=p.source,ye=p.sourceLayer,Pe=this.sourceCaches[Y];if(Pe!==void 0){var ct=Pe.getSource().type;ct==="geojson"&&ye?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ct!=="vector"||ye?(p.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.setFeatureState(ye,p.id,E)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+Y+"' does not exist in the map's style.")))},g.prototype.removeFeatureState=function(p,E){this._checkLoaded();var Y=p.source,ye=this.sourceCaches[Y];if(ye!==void 0){var Pe=ye.getSource().type,ct=Pe==="vector"?p.sourceLayer:void 0;Pe!=="vector"||ct?E&&typeof p.id!="string"&&typeof p.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):ye.removeFeatureState(ct,p.id,E):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+Y+"' does not exist in the map's style.")))},g.prototype.getFeatureState=function(p){this._checkLoaded();var E=p.source,Y=p.sourceLayer,ye=this.sourceCaches[E];if(ye!==void 0){if(ye.getSource().type!=="vector"||Y)return p.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),ye.getFeatureState(Y,p.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+E+"' does not exist in the map's style.")))},g.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},g.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(p){return p.serialize()}),layers:this._serializeLayers(this._order)},function(p){return p!==void 0})},g.prototype._updateLayer=function(p){this._updatedLayers[p.id]=!0,p.source&&!this._updatedSources[p.source]&&this.sourceCaches[p.source].getSource().type!=="raster"&&(this._updatedSources[p.source]="reload",this.sourceCaches[p.source].pause()),this._changed=!0},g.prototype._flattenAndSortRenderedFeatures=function(p){for(var E=this,Y=function(ka){return E._layers[ka].type==="fill-extrusion"},ye={},Pe=[],ct=this._order.length-1;ct>=0;ct--){var Vt=this._order[ct];if(Y(Vt)){ye[Vt]=ct;for(var fr=0,Ir=p;fr<Ir.length;fr+=1){var Dr=Ir[fr][Vt];if(Dr)for(var jr=0,En=Dr;jr<En.length;jr+=1)Pe.push(En[jr])}}}Pe.sort(function(ka,Na){return Na.intersectionZ-ka.intersectionZ});for(var gn=[],Bn=this._order.length-1;Bn>=0;Bn--){var fn=this._order[Bn];if(Y(fn))for(var Fn=Pe.length-1;Fn>=0;Fn--){var jn=Pe[Fn].feature;if(ye[jn.layer.id]<Bn)break;gn.push(jn),Pe.pop()}else for(var vi=0,ki=p;vi<ki.length;vi+=1){var Ti=ki[vi][fn];if(Ti)for(var Fi=0,na=Ti;Fi<na.length;Fi+=1)gn.push(na[Fi].feature)}}return gn},g.prototype.queryRenderedFeatures=function(p,E,Y){E&&E.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",E.filter,null,E);var ye={};if(E&&E.layers){if(!Array.isArray(E.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Pe=0,ct=E.layers;Pe<ct.length;Pe+=1){var Vt=ct[Pe],fr=this._layers[Vt];if(!fr)return this.fire(new l.ErrorEvent(new Error("The layer '"+Vt+"' does not exist in the map's style and cannot be queried for features."))),[];ye[fr.source]=!0}}var Ir=[];for(var Dr in E.availableImages=this._availableImages,this.sourceCaches)E.layers&&!ye[Dr]||Ir.push(ur(this.sourceCaches[Dr],this._layers,this._serializedLayers,p,E,Y));return this.placement&&Ir.push(function(jr,En,gn,Bn,fn,Fn,jn){for(var vi={},ki=Fn.queryRenderedSymbols(Bn),Ti=[],Fi=0,na=Object.keys(ki).map(Number);Fi<na.length;Fi+=1)Ti.push(jn[na[Fi]]);Ti.sort(we);for(var ka=function(){var rs=po[Na],Ls=rs.featureIndex.lookupSymbolFeatures(ki[rs.bucketInstanceId],En,rs.bucketIndex,rs.sourceLayerIndex,fn.filter,fn.layers,fn.availableImages,jr);for(var vo in Ls){var ds=vi[vo]=vi[vo]||[],Ns=Ls[vo];Ns.sort(function($s,ws){var _s=rs.featureSortOrder;if(_s){var El=_s.indexOf($s.featureIndex);return _s.indexOf(ws.featureIndex)-El}return ws.featureIndex-$s.featureIndex});for(var cs=0,Jo=Ns;cs<Jo.length;cs+=1)ds.push(Jo[cs])}},Na=0,po=Ti;Na<po.length;Na+=1)ka();var No=function(rs){vi[rs].forEach(function(Ls){var vo=Ls.feature,ds=gn[jr[rs].source].getFeatureState(vo.layer["source-layer"],vo.id);vo.source=vo.layer.source,vo.layer["source-layer"]&&(vo.sourceLayer=vo.layer["source-layer"]),vo.state=ds})};for(var is in vi)No(is);return vi}(this._layers,this._serializedLayers,this.sourceCaches,p,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ir)},g.prototype.querySourceFeatures=function(p,E){E&&E.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",E.filter,null,E);var Y=this.sourceCaches[p];return Y?function(ye,Pe){for(var ct=ye.getRenderableIds().map(function(En){return ye.getTileByID(En)}),Vt=[],fr={},Ir=0;Ir<ct.length;Ir++){var Dr=ct[Ir],jr=Dr.tileID.canonical.key;fr[jr]||(fr[jr]=!0,Dr.querySourceFeatures(Vt,Pe))}return Vt}(Y,E):[]},g.prototype.addSourceType=function(p,E,Y){return g.getSourceType(p)?Y(new Error('A source type called "'+p+'" already exists.')):(g.setSourceType(p,E),E.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:p,url:E.workerSourceURL},Y):Y(null,null))},g.prototype.getLight=function(){return this.light.getLight()},g.prototype.setLight=function(p,E){E===void 0&&(E={}),this._checkLoaded();var Y=this.light.getLight(),ye=!1;for(var Pe in p)if(!l.deepEqual(p[Pe],Y[Pe])){ye=!0;break}if(ye){var ct={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(p,E),this.light.updateTransitions(ct)}},g.prototype._validate=function(p,E,Y,ye,Pe){return Pe===void 0&&(Pe={}),(!Pe||Pe.validate!==!1)&&Vn(this,p.call(l.validateStyle,l.extend({key:E,style:this.serialize(),value:Y,styleSpec:l.styleSpec},ye)))},g.prototype._remove=function(){for(var p in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[p].setEventedParent(null);for(var E in this.sourceCaches)this.sourceCaches[E].clearTiles(),this.sourceCaches[E].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},g.prototype._clearSource=function(p){this.sourceCaches[p].clearTiles()},g.prototype._reloadSource=function(p){this.sourceCaches[p].resume(),this.sourceCaches[p].reload()},g.prototype._updateSources=function(p){for(var E in this.sourceCaches)this.sourceCaches[E].update(p)},g.prototype._generateCollisionBoxes=function(){for(var p in this.sourceCaches)this._reloadSource(p)},g.prototype._updatePlacement=function(p,E,Y,ye,Pe){Pe===void 0&&(Pe=!1);for(var ct=!1,Vt=!1,fr={},Ir=0,Dr=this._order;Ir<Dr.length;Ir+=1){var jr=this._layers[Dr[Ir]];if(jr.type==="symbol"){if(!fr[jr.source]){var En=this.sourceCaches[jr.source];fr[jr.source]=En.getRenderableIds(!0).map(function(jn){return En.getTileByID(jn)}).sort(function(jn,vi){return vi.tileID.overscaledZ-jn.tileID.overscaledZ||(jn.tileID.isLessThan(vi.tileID)?-1:1)})}var gn=this.crossTileSymbolIndex.addLayer(jr,fr[jr.source],p.center.lng);ct=ct||gn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Pe=Pe||this._layerOrderChanged||Y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),p.zoom))&&(this.pauseablePlacement=new pr(p,this._order,Pe,E,Y,ye,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,fr),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),Vt=!0),ct&&this.pauseablePlacement.placement.setStale()),Vt||ct)for(var Bn=0,fn=this._order;Bn<fn.length;Bn+=1){var Fn=this._layers[fn[Bn]];Fn.type==="symbol"&&this.placement.updateLayerOpacities(Fn,fr[Fn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},g.prototype._releaseSymbolFadeTiles=function(){for(var p in this.sourceCaches)this.sourceCaches[p].releaseSymbolFadeTiles()},g.prototype.getImages=function(p,E,Y){this.imageManager.getImages(E.icons,Y),this._updateTilesForChangedImages();var ye=this.sourceCaches[E.source];ye&&ye.setDependencies(E.tileID.key,E.type,E.icons)},g.prototype.getGlyphs=function(p,E,Y){this.glyphManager.getGlyphs(E.stacks,Y)},g.prototype.getResource=function(p,E,Y){return l.makeRequest(E,Y)},g}(l.Evented);qi.getSourceType=function(f){return ar[f]},qi.setSourceType=function(f,g){ar[f]=g},qi.registerForPluginStateChange=l.registerForPluginStateChange;var Rr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Mn=Ho(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),pn=Ho(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wn=Ho(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Kn=Ho(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Ei=Ho("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ji=Ho(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Yi=Ho(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),oa=Ho("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ma=Ho("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),k=Ho("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),de=Ho(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),yt=Ho(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ue=Ho(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),nr=Ho(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Mr=Ho(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),qr=Ho(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),kn=Ho(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Nn=Ho(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Mi=Ho(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Bi=Ho(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),io=Ho(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),co=Ho(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Sa=Ho(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ko=Ho(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),wo=Ho(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Oo=Ho(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ho(f,g){var p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,E=g.match(/attribute ([\w]+) ([\w]+)/g),Y=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ye=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Pe=ye?ye.concat(Y):Y,ct={};return{fragmentSource:f=f.replace(p,function(Vt,fr,Ir,Dr,jr){return ct[jr]=!0,fr==="define"?`
#ifndef HAS_UNIFORM_u_`+jr+`
varying `+Ir+" "+Dr+" "+jr+`;
#else
uniform `+Ir+" "+Dr+" u_"+jr+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+jr+`
    `+Ir+" "+Dr+" "+jr+" = u_"+jr+`;
#endif
`}),vertexSource:g=g.replace(p,function(Vt,fr,Ir,Dr,jr){var En=Dr==="float"?"vec2":"vec4",gn=jr.match(/color/)?"color":En;return ct[jr]?fr==="define"?`
#ifndef HAS_UNIFORM_u_`+jr+`
uniform lowp float u_`+jr+`_t;
attribute `+Ir+" "+En+" a_"+jr+`;
varying `+Ir+" "+Dr+" "+jr+`;
#else
uniform `+Ir+" "+Dr+" u_"+jr+`;
#endif
`:gn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+jr+`
    `+jr+" = a_"+jr+`;
#else
    `+Ir+" "+Dr+" "+jr+" = u_"+jr+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+jr+`
    `+jr+" = unpack_mix_"+gn+"(a_"+jr+", u_"+jr+`_t);
#else
    `+Ir+" "+Dr+" "+jr+" = u_"+jr+`;
#endif
`:fr==="define"?`
#ifndef HAS_UNIFORM_u_`+jr+`
uniform lowp float u_`+jr+`_t;
attribute `+Ir+" "+En+" a_"+jr+`;
#else
uniform `+Ir+" "+Dr+" u_"+jr+`;
#endif
`:gn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+jr+`
    `+Ir+" "+Dr+" "+jr+" = a_"+jr+`;
#else
    `+Ir+" "+Dr+" "+jr+" = u_"+jr+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+jr+`
    `+Ir+" "+Dr+" "+jr+" = unpack_mix_"+gn+"(a_"+jr+", u_"+jr+`_t);
#else
    `+Ir+" "+Dr+" "+jr+" = u_"+jr+`;
#endif
`}),staticAttributes:E,staticUniforms:Pe}}var Io=Object.freeze({__proto__:null,prelude:Mn,background:pn,backgroundPattern:wn,circle:Kn,clippingMask:Ei,heatmap:Ji,heatmapTexture:Yi,collisionBox:oa,collisionCircle:Ma,debug:k,fill:de,fillOutline:yt,fillOutlinePattern:Ue,fillPattern:nr,fillExtrusion:Mr,fillExtrusionPattern:qr,hillshadePrepare:kn,hillshade:Nn,line:Mi,lineGradient:Bi,linePattern:io,lineSDF:co,raster:Sa,symbolIcon:Ko,symbolSDF:wo,symbolTextAndIcon:Oo}),qs=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Il(f){for(var g=[],p=0;p<f.length;p++)if(f[p]!==null){var E=f[p].split(" ");g.push(E.pop())}return g}qs.prototype.bind=function(f,g,p,E,Y,ye,Pe,ct){this.context=f;for(var Vt=this.boundPaintVertexBuffers.length!==E.length,fr=0;!Vt&&fr<E.length;fr++)this.boundPaintVertexBuffers[fr]!==E[fr]&&(Vt=!0);f.extVertexArrayObject&&this.vao&&this.boundProgram===g&&this.boundLayoutVertexBuffer===p&&!Vt&&this.boundIndexBuffer===Y&&this.boundVertexOffset===ye&&this.boundDynamicVertexBuffer===Pe&&this.boundDynamicVertexBuffer2===ct?(f.bindVertexArrayOES.set(this.vao),Pe&&Pe.bind(),Y&&Y.dynamicDraw&&Y.bind(),ct&&ct.bind()):this.freshBind(g,p,E,Y,ye,Pe,ct)},qs.prototype.freshBind=function(f,g,p,E,Y,ye,Pe){var ct,Vt=f.numAttributes,fr=this.context,Ir=fr.gl;if(fr.extVertexArrayObject)this.vao&&this.destroy(),this.vao=fr.extVertexArrayObject.createVertexArrayOES(),fr.bindVertexArrayOES.set(this.vao),ct=0,this.boundProgram=f,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=E,this.boundVertexOffset=Y,this.boundDynamicVertexBuffer=ye,this.boundDynamicVertexBuffer2=Pe;else{ct=fr.currentNumAttributes||0;for(var Dr=Vt;Dr<ct;Dr++)Ir.disableVertexAttribArray(Dr)}g.enableAttributes(Ir,f);for(var jr=0,En=p;jr<En.length;jr+=1)En[jr].enableAttributes(Ir,f);ye&&ye.enableAttributes(Ir,f),Pe&&Pe.enableAttributes(Ir,f),g.bind(),g.setVertexAttribPointers(Ir,f,Y);for(var gn=0,Bn=p;gn<Bn.length;gn+=1){var fn=Bn[gn];fn.bind(),fn.setVertexAttribPointers(Ir,f,Y)}ye&&(ye.bind(),ye.setVertexAttribPointers(Ir,f,Y)),E&&E.bind(),Pe&&(Pe.bind(),Pe.setVertexAttribPointers(Ir,f,Y)),fr.currentNumAttributes=Vt},qs.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ao=function(f,g,p,E,Y,ye){var Pe=f.gl;this.program=Pe.createProgram();for(var ct=Il(p.staticAttributes),Vt=E?E.getBinderAttributes():[],fr=ct.concat(Vt),Ir=p.staticUniforms?Il(p.staticUniforms):[],Dr=E?E.getBinderUniforms():[],jr=[],En=0,gn=Ir.concat(Dr);En<gn.length;En+=1){var Bn=gn[En];jr.indexOf(Bn)<0&&jr.push(Bn)}var fn=E?E.defines():[];ye&&fn.push("#define OVERDRAW_INSPECTOR;");var Fn=fn.concat(Mn.fragmentSource,p.fragmentSource).join(`
`),jn=fn.concat(Mn.vertexSource,p.vertexSource).join(`
`),vi=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost())this.failedToCreate=!0;else{Pe.shaderSource(vi,Fn),Pe.compileShader(vi),Pe.attachShader(this.program,vi);var ki=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost())this.failedToCreate=!0;else{Pe.shaderSource(ki,jn),Pe.compileShader(ki),Pe.attachShader(this.program,ki),this.attributes={};var Ti={};this.numAttributes=fr.length;for(var Fi=0;Fi<this.numAttributes;Fi++)fr[Fi]&&(Pe.bindAttribLocation(this.program,Fi,fr[Fi]),this.attributes[fr[Fi]]=Fi);Pe.linkProgram(this.program),Pe.deleteShader(ki),Pe.deleteShader(vi);for(var na=0;na<jr.length;na++){var ka=jr[na];if(ka&&!Ti[ka]){var Na=Pe.getUniformLocation(this.program,ka);Na&&(Ti[ka]=Na)}}this.fixedUniforms=Y(f,Ti),this.binderUniforms=E?E.getUniforms(f,Ti):[]}}};function Va(f,g,p){var E=1/Go(p,1,g.transform.tileZoom),Y=Math.pow(2,p.tileID.overscaledZ),ye=p.tileSize*Math.pow(2,g.transform.tileZoom)/Y,Pe=ye*(p.tileID.canonical.x+p.tileID.wrap*Y),ct=ye*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[E,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[Pe>>16,ct>>16],u_pixel_coord_lower:[65535&Pe,65535&ct]}}Ao.prototype.draw=function(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir,Dr,jr,En,gn,Bn){var fn,Fn=f.gl;if(!this.failedToCreate){for(var jn in f.program.set(this.program),f.setDepthMode(p),f.setStencilMode(E),f.setColorMode(Y),f.setCullFace(ye),this.fixedUniforms)this.fixedUniforms[jn].set(Pe[jn]);En&&En.setUniforms(f,this.binderUniforms,Dr,{zoom:jr});for(var vi=(fn={},fn[Fn.LINES]=2,fn[Fn.TRIANGLES]=3,fn[Fn.LINE_STRIP]=1,fn)[g],ki=0,Ti=Ir.get();ki<Ti.length;ki+=1){var Fi=Ti[ki],na=Fi.vaos||(Fi.vaos={});(na[ct]||(na[ct]=new qs)).bind(f,this,Vt,En?En.getPaintVertexBuffers():[],fr,Fi.vertexOffset,gn,Bn),Fn.drawElements(g,Fi.primitiveLength*vi,Fn.UNSIGNED_SHORT,Fi.primitiveOffset*vi*2)}}};var gs=function(f,g,p,E){var Y=g.style.light,ye=Y.properties.get("position"),Pe=[ye.x,ye.y,ye.z],ct=l.create$1();Y.properties.get("anchor")==="viewport"&&l.fromRotation(ct,-g.transform.angle),l.transformMat3(Pe,Pe,ct);var Vt=Y.properties.get("color");return{u_matrix:f,u_lightpos:Pe,u_lightintensity:Y.properties.get("intensity"),u_lightcolor:[Vt.r,Vt.g,Vt.b],u_vertical_gradient:+p,u_opacity:E}},Ws=function(f,g,p,E,Y,ye,Pe){return l.extend(gs(f,g,p,E),Va(ye,g,Pe),{u_height_factor:-Math.pow(2,Y.overscaledZ)/Pe.tileSize/8})},bs=function(f){return{u_matrix:f}},Ps=function(f,g,p,E){return l.extend(bs(f),Va(p,g,E))},Xs=function(f,g){return{u_matrix:f,u_world:g}},gl=function(f,g,p,E,Y){return l.extend(Ps(f,g,p,E),{u_world:Y})},jf=function(f,g,p,E){var Y,ye,Pe=f.transform;if(E.paint.get("circle-pitch-alignment")==="map"){var ct=Go(p,1,Pe.zoom);Y=!0,ye=[ct,ct]}else Y=!1,ye=Pe.pixelsToGLUnits;return{u_camera_to_center_distance:Pe.cameraToCenterDistance,u_scale_with_map:+(E.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(g.posMatrix,p,E.paint.get("circle-translate"),E.paint.get("circle-translate-anchor")),u_pitch_with_map:+Y,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:ye}},Mu=function(f,g,p){var E=Go(p,1,g.zoom),Y=Math.pow(2,g.zoom-p.tileID.overscaledZ),ye=p.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:g.cameraToCenterDistance,u_pixels_to_tile_units:E,u_extrude_scale:[g.pixelsToGLUnits[0]/(E*Y),g.pixelsToGLUnits[1]/(E*Y)],u_overscale_factor:ye}},yl=function(f,g,p){return{u_matrix:f,u_inv_matrix:g,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}},lc=function(f,g,p){return p===void 0&&(p=1),{u_matrix:f,u_color:g,u_overlay:0,u_overlay_scale:p}},Lc=function(f){return{u_matrix:f}},dh=function(f,g,p,E){return{u_matrix:f,u_extrude_scale:Go(g,1,p),u_intensity:E}},_l=function(f,g,p){var E=f.transform;return{u_matrix:lf(f,g,p),u_ratio:1/Go(g,1,E.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Us=function(f,g,p,E){return l.extend(_l(f,g,p),{u_image:0,u_image_height:E})},th=function(f,g,p,E){var Y=f.transform,ye=wf(g,Y);return{u_matrix:lf(f,g,p),u_texsize:g.imageAtlasTexture.size,u_ratio:1/Go(g,1,Y.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[ye,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/Y.pixelsToGLUnits[0],1/Y.pixelsToGLUnits[1]]}},kf=function(f,g,p,E,Y){var ye=f.lineAtlas,Pe=wf(g,f.transform),ct=p.layout.get("line-cap")==="round",Vt=ye.getDash(E.from,ct),fr=ye.getDash(E.to,ct),Ir=Vt.width*Y.fromScale,Dr=fr.width*Y.toScale;return l.extend(_l(f,g,p),{u_patternscale_a:[Pe/Ir,-Vt.height/2],u_patternscale_b:[Pe/Dr,-fr.height/2],u_sdfgamma:ye.width/(256*Math.min(Ir,Dr)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Vt.y,u_tex_y_b:fr.y,u_mix:Y.t})};function wf(f,g){return 1/Go(f,1,g.tileZoom)}function lf(f,g,p){return f.translatePosMatrix(g.tileID.posMatrix,g,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}var gd=function(f,g,p,E,Y){return{u_matrix:f,u_tl_parent:g,u_scale_parent:p,u_buffer_scale:1,u_fade_t:E.mix,u_opacity:E.opacity*Y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Y.paint.get("raster-brightness-min"),u_brightness_high:Y.paint.get("raster-brightness-max"),u_saturation_factor:(Pe=Y.paint.get("raster-saturation"),Pe>0?1-1/(1.001-Pe):-Pe),u_contrast_factor:(ye=Y.paint.get("raster-contrast"),ye>0?1/(1-ye):1+ye),u_spin_weights:Kh(Y.paint.get("raster-hue-rotate"))};var ye,Pe};function Kh(f){f*=Math.PI/180;var g=Math.sin(f),p=Math.cos(f);return[(2*p+1)/3,(-Math.sqrt(3)*g-p+1)/3,(Math.sqrt(3)*g-p+1)/3]}var yc,Eh=function(f,g,p,E,Y,ye,Pe,ct,Vt,fr){var Ir=Y.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:g?g.uSizeT:0,u_size:g?g.uSize:0,u_camera_to_center_distance:Ir.cameraToCenterDistance,u_pitch:Ir.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Ir.width/Ir.height,u_fade_change:Y.options.fadeDuration?Y.symbolFadeChange:1,u_matrix:ye,u_label_plane_matrix:Pe,u_coord_matrix:ct,u_is_text:+Vt,u_pitch_with_map:+E,u_texsize:fr,u_texture:0}},cf=function(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir){var Dr=Y.transform;return l.extend(Eh(f,g,p,E,Y,ye,Pe,ct,Vt,fr),{u_gamma_scale:E?Math.cos(Dr._pitch)*Dr.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+Ir})},Af=function(f,g,p,E,Y,ye,Pe,ct,Vt,fr){return l.extend(cf(f,g,p,E,Y,ye,Pe,ct,!0,Vt,!0),{u_texsize_icon:fr,u_texture_icon:1})},_f=function(f,g,p){return{u_matrix:f,u_opacity:g,u_color:p}},Dc=function(f,g,p,E,Y,ye){return l.extend(function(Pe,ct,Vt,fr){var Ir=Vt.imageManager.getPattern(Pe.from.toString()),Dr=Vt.imageManager.getPattern(Pe.to.toString()),jr=Vt.imageManager.getPixelSize(),En=jr.width,gn=jr.height,Bn=Math.pow(2,fr.tileID.overscaledZ),fn=fr.tileSize*Math.pow(2,Vt.transform.tileZoom)/Bn,Fn=fn*(fr.tileID.canonical.x+fr.tileID.wrap*Bn),jn=fn*fr.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ir.tl,u_pattern_br_a:Ir.br,u_pattern_tl_b:Dr.tl,u_pattern_br_b:Dr.br,u_texsize:[En,gn],u_mix:ct.t,u_pattern_size_a:Ir.displaySize,u_pattern_size_b:Dr.displaySize,u_scale_a:ct.fromScale,u_scale_b:ct.toScale,u_tile_units_to_pixels:1/Go(fr,1,Vt.transform.tileZoom),u_pixel_coord_upper:[Fn>>16,jn>>16],u_pixel_coord_lower:[65535&Fn,65535&jn]}}(E,ye,p,Y),{u_matrix:f,u_opacity:g})},Ff={fillExtrusion:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_lightpos:new l.Uniform3f(f,g.u_lightpos),u_lightintensity:new l.Uniform1f(f,g.u_lightintensity),u_lightcolor:new l.Uniform3f(f,g.u_lightcolor),u_vertical_gradient:new l.Uniform1f(f,g.u_vertical_gradient),u_opacity:new l.Uniform1f(f,g.u_opacity)}},fillExtrusionPattern:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_lightpos:new l.Uniform3f(f,g.u_lightpos),u_lightintensity:new l.Uniform1f(f,g.u_lightintensity),u_lightcolor:new l.Uniform3f(f,g.u_lightcolor),u_vertical_gradient:new l.Uniform1f(f,g.u_vertical_gradient),u_height_factor:new l.Uniform1f(f,g.u_height_factor),u_image:new l.Uniform1i(f,g.u_image),u_texsize:new l.Uniform2f(f,g.u_texsize),u_pixel_coord_upper:new l.Uniform2f(f,g.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(f,g.u_pixel_coord_lower),u_scale:new l.Uniform3f(f,g.u_scale),u_fade:new l.Uniform1f(f,g.u_fade),u_opacity:new l.Uniform1f(f,g.u_opacity)}},fill:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix)}},fillPattern:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_image:new l.Uniform1i(f,g.u_image),u_texsize:new l.Uniform2f(f,g.u_texsize),u_pixel_coord_upper:new l.Uniform2f(f,g.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(f,g.u_pixel_coord_lower),u_scale:new l.Uniform3f(f,g.u_scale),u_fade:new l.Uniform1f(f,g.u_fade)}},fillOutline:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_world:new l.Uniform2f(f,g.u_world)}},fillOutlinePattern:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_world:new l.Uniform2f(f,g.u_world),u_image:new l.Uniform1i(f,g.u_image),u_texsize:new l.Uniform2f(f,g.u_texsize),u_pixel_coord_upper:new l.Uniform2f(f,g.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(f,g.u_pixel_coord_lower),u_scale:new l.Uniform3f(f,g.u_scale),u_fade:new l.Uniform1f(f,g.u_fade)}},circle:function(f,g){return{u_camera_to_center_distance:new l.Uniform1f(f,g.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(f,g.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(f,g.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(f,g.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(f,g.u_matrix)}},collisionBox:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_camera_to_center_distance:new l.Uniform1f(f,g.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(f,g.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(f,g.u_extrude_scale),u_overscale_factor:new l.Uniform1f(f,g.u_overscale_factor)}},collisionCircle:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_inv_matrix:new l.UniformMatrix4f(f,g.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(f,g.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(f,g.u_viewport_size)}},debug:function(f,g){return{u_color:new l.UniformColor(f,g.u_color),u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_overlay:new l.Uniform1i(f,g.u_overlay),u_overlay_scale:new l.Uniform1f(f,g.u_overlay_scale)}},clippingMask:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix)}},heatmap:function(f,g){return{u_extrude_scale:new l.Uniform1f(f,g.u_extrude_scale),u_intensity:new l.Uniform1f(f,g.u_intensity),u_matrix:new l.UniformMatrix4f(f,g.u_matrix)}},heatmapTexture:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_world:new l.Uniform2f(f,g.u_world),u_image:new l.Uniform1i(f,g.u_image),u_color_ramp:new l.Uniform1i(f,g.u_color_ramp),u_opacity:new l.Uniform1f(f,g.u_opacity)}},hillshade:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_image:new l.Uniform1i(f,g.u_image),u_latrange:new l.Uniform2f(f,g.u_latrange),u_light:new l.Uniform2f(f,g.u_light),u_shadow:new l.UniformColor(f,g.u_shadow),u_highlight:new l.UniformColor(f,g.u_highlight),u_accent:new l.UniformColor(f,g.u_accent)}},hillshadePrepare:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_image:new l.Uniform1i(f,g.u_image),u_dimension:new l.Uniform2f(f,g.u_dimension),u_zoom:new l.Uniform1f(f,g.u_zoom),u_unpack:new l.Uniform4f(f,g.u_unpack)}},line:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_ratio:new l.Uniform1f(f,g.u_ratio),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(f,g.u_units_to_pixels)}},lineGradient:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_ratio:new l.Uniform1f(f,g.u_ratio),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(f,g.u_units_to_pixels),u_image:new l.Uniform1i(f,g.u_image),u_image_height:new l.Uniform1f(f,g.u_image_height)}},linePattern:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_texsize:new l.Uniform2f(f,g.u_texsize),u_ratio:new l.Uniform1f(f,g.u_ratio),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_image:new l.Uniform1i(f,g.u_image),u_units_to_pixels:new l.Uniform2f(f,g.u_units_to_pixels),u_scale:new l.Uniform3f(f,g.u_scale),u_fade:new l.Uniform1f(f,g.u_fade)}},lineSDF:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_ratio:new l.Uniform1f(f,g.u_ratio),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(f,g.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(f,g.u_patternscale_a),u_patternscale_b:new l.Uniform2f(f,g.u_patternscale_b),u_sdfgamma:new l.Uniform1f(f,g.u_sdfgamma),u_image:new l.Uniform1i(f,g.u_image),u_tex_y_a:new l.Uniform1f(f,g.u_tex_y_a),u_tex_y_b:new l.Uniform1f(f,g.u_tex_y_b),u_mix:new l.Uniform1f(f,g.u_mix)}},raster:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_tl_parent:new l.Uniform2f(f,g.u_tl_parent),u_scale_parent:new l.Uniform1f(f,g.u_scale_parent),u_buffer_scale:new l.Uniform1f(f,g.u_buffer_scale),u_fade_t:new l.Uniform1f(f,g.u_fade_t),u_opacity:new l.Uniform1f(f,g.u_opacity),u_image0:new l.Uniform1i(f,g.u_image0),u_image1:new l.Uniform1i(f,g.u_image1),u_brightness_low:new l.Uniform1f(f,g.u_brightness_low),u_brightness_high:new l.Uniform1f(f,g.u_brightness_high),u_saturation_factor:new l.Uniform1f(f,g.u_saturation_factor),u_contrast_factor:new l.Uniform1f(f,g.u_contrast_factor),u_spin_weights:new l.Uniform3f(f,g.u_spin_weights)}},symbolIcon:function(f,g){return{u_is_size_zoom_constant:new l.Uniform1i(f,g.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(f,g.u_is_size_feature_constant),u_size_t:new l.Uniform1f(f,g.u_size_t),u_size:new l.Uniform1f(f,g.u_size),u_camera_to_center_distance:new l.Uniform1f(f,g.u_camera_to_center_distance),u_pitch:new l.Uniform1f(f,g.u_pitch),u_rotate_symbol:new l.Uniform1i(f,g.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(f,g.u_aspect_ratio),u_fade_change:new l.Uniform1f(f,g.u_fade_change),u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(f,g.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(f,g.u_coord_matrix),u_is_text:new l.Uniform1i(f,g.u_is_text),u_pitch_with_map:new l.Uniform1i(f,g.u_pitch_with_map),u_texsize:new l.Uniform2f(f,g.u_texsize),u_texture:new l.Uniform1i(f,g.u_texture)}},symbolSDF:function(f,g){return{u_is_size_zoom_constant:new l.Uniform1i(f,g.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(f,g.u_is_size_feature_constant),u_size_t:new l.Uniform1f(f,g.u_size_t),u_size:new l.Uniform1f(f,g.u_size),u_camera_to_center_distance:new l.Uniform1f(f,g.u_camera_to_center_distance),u_pitch:new l.Uniform1f(f,g.u_pitch),u_rotate_symbol:new l.Uniform1i(f,g.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(f,g.u_aspect_ratio),u_fade_change:new l.Uniform1f(f,g.u_fade_change),u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(f,g.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(f,g.u_coord_matrix),u_is_text:new l.Uniform1i(f,g.u_is_text),u_pitch_with_map:new l.Uniform1i(f,g.u_pitch_with_map),u_texsize:new l.Uniform2f(f,g.u_texsize),u_texture:new l.Uniform1i(f,g.u_texture),u_gamma_scale:new l.Uniform1f(f,g.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(f,g.u_is_halo)}},symbolTextAndIcon:function(f,g){return{u_is_size_zoom_constant:new l.Uniform1i(f,g.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(f,g.u_is_size_feature_constant),u_size_t:new l.Uniform1f(f,g.u_size_t),u_size:new l.Uniform1f(f,g.u_size),u_camera_to_center_distance:new l.Uniform1f(f,g.u_camera_to_center_distance),u_pitch:new l.Uniform1f(f,g.u_pitch),u_rotate_symbol:new l.Uniform1i(f,g.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(f,g.u_aspect_ratio),u_fade_change:new l.Uniform1f(f,g.u_fade_change),u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(f,g.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(f,g.u_coord_matrix),u_is_text:new l.Uniform1i(f,g.u_is_text),u_pitch_with_map:new l.Uniform1i(f,g.u_pitch_with_map),u_texsize:new l.Uniform2f(f,g.u_texsize),u_texsize_icon:new l.Uniform2f(f,g.u_texsize_icon),u_texture:new l.Uniform1i(f,g.u_texture),u_texture_icon:new l.Uniform1i(f,g.u_texture_icon),u_gamma_scale:new l.Uniform1f(f,g.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(f,g.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(f,g.u_is_halo)}},background:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_opacity:new l.Uniform1f(f,g.u_opacity),u_color:new l.UniformColor(f,g.u_color)}},backgroundPattern:function(f,g){return{u_matrix:new l.UniformMatrix4f(f,g.u_matrix),u_opacity:new l.Uniform1f(f,g.u_opacity),u_image:new l.Uniform1i(f,g.u_image),u_pattern_tl_a:new l.Uniform2f(f,g.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(f,g.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(f,g.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(f,g.u_pattern_br_b),u_texsize:new l.Uniform2f(f,g.u_texsize),u_mix:new l.Uniform1f(f,g.u_mix),u_pattern_size_a:new l.Uniform2f(f,g.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(f,g.u_pattern_size_b),u_scale_a:new l.Uniform1f(f,g.u_scale_a),u_scale_b:new l.Uniform1f(f,g.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(f,g.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(f,g.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(f,g.u_tile_units_to_pixels)}}};function Zl(f,g,p,E,Y,ye,Pe){for(var ct=f.context,Vt=ct.gl,fr=f.useProgram("collisionBox"),Ir=[],Dr=0,jr=0,En=0;En<E.length;En++){var gn=E[En],Bn=g.getTile(gn),fn=Bn.getBucket(p);if(fn){var Fn=gn.posMatrix;Y[0]===0&&Y[1]===0||(Fn=f.translatePosMatrix(gn.posMatrix,Bn,Y,ye));var jn=Pe?fn.textCollisionBox:fn.iconCollisionBox,vi=fn.collisionCircleArray;if(vi.length>0){var ki=l.create(),Ti=Fn;l.mul(ki,fn.placementInvProjMatrix,f.transform.glCoordMatrix),l.mul(ki,ki,fn.placementViewportMatrix),Ir.push({circleArray:vi,circleOffset:jr,transform:Ti,invTransform:ki}),jr=Dr+=vi.length/4}jn&&fr.draw(ct,Vt.LINES,kt.disabled,cr.disabled,f.colorModeForRenderPass(),Lr.disabled,Mu(Fn,f.transform,Bn),p.id,jn.layoutVertexBuffer,jn.indexBuffer,jn.segments,null,f.transform.zoom,null,null,jn.collisionVertexBuffer)}}if(Pe&&Ir.length){var Fi=f.useProgram("collisionCircle"),na=new l.StructArrayLayout2f1f2i16;na.resize(4*Dr),na._trim();for(var ka=0,Na=0,po=Ir;Na<po.length;Na+=1)for(var No=po[Na],is=0;is<No.circleArray.length/4;is++){var rs=4*is,Ls=No.circleArray[rs+0],vo=No.circleArray[rs+1],ds=No.circleArray[rs+2],Ns=No.circleArray[rs+3];na.emplace(ka++,Ls,vo,ds,Ns,0),na.emplace(ka++,Ls,vo,ds,Ns,1),na.emplace(ka++,Ls,vo,ds,Ns,2),na.emplace(ka++,Ls,vo,ds,Ns,3)}(!yc||yc.length<2*Dr)&&(yc=function(nl){var Qu=2*nl,Ac=new l.StructArrayLayout3ui6;Ac.resize(Qu),Ac._trim();for(var Ju=0;Ju<Qu;Ju++){var qu=6*Ju;Ac.uint16[qu+0]=4*Ju+0,Ac.uint16[qu+1]=4*Ju+1,Ac.uint16[qu+2]=4*Ju+2,Ac.uint16[qu+3]=4*Ju+2,Ac.uint16[qu+4]=4*Ju+3,Ac.uint16[qu+5]=4*Ju+0}return Ac}(Dr));for(var cs=ct.createIndexBuffer(yc,!0),Jo=ct.createVertexBuffer(na,l.collisionCircleLayout.members,!0),$s=0,ws=Ir;$s<ws.length;$s+=1){var _s=ws[$s],El=yl(_s.transform,_s.invTransform,f.transform);Fi.draw(ct,Vt.TRIANGLES,kt.disabled,cr.disabled,f.colorModeForRenderPass(),Lr.disabled,El,p.id,Jo,cs,l.SegmentVector.simpleSegment(0,2*_s.circleOffset,_s.circleArray.length,_s.circleArray.length/2),null,f.transform.zoom,null,null,null)}Jo.destroy(),cs.destroy()}}var kc=l.identity(new Float32Array(16));function ad(f,g,p,E,Y,ye){var Pe=l.getAnchorAlignment(f),ct=-(Pe.horizontalAlign-.5)*g,Vt=-(Pe.verticalAlign-.5)*p,fr=l.evaluateVariableOffset(f,E);return new l.Point((ct/Y+fr[0])*ye,(Vt/Y+fr[1])*ye)}function rh(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir){var Dr=f.text.placedSymbolArray,jr=f.text.dynamicLayoutVertexArray,En=f.icon.dynamicLayoutVertexArray,gn={};jr.clear();for(var Bn=0;Bn<Dr.length;Bn++){var fn=Dr.get(Bn),Fn=fn.hidden||!fn.crossTileID||f.allowVerticalPlacement&&!fn.placedOrientation?null:E[fn.crossTileID];if(Fn){var jn=new l.Point(fn.anchorX,fn.anchorY),vi=Ta(jn,p?ct:Pe),ki=ma(ye.cameraToCenterDistance,vi.signedDistanceFromCamera),Ti=Y.evaluateSizeForFeature(f.textSizeData,fr,fn)*ki/l.ONE_EM;p&&(Ti*=f.tilePixelRatio/Vt);for(var Fi=ad(Fn.anchor,Fn.width,Fn.height,Fn.textOffset,Fn.textBoxScale,Ti),na=p?Ta(jn.add(Fi),Pe).point:vi.point.add(g?Fi.rotate(-ye.angle):Fi),ka=f.allowVerticalPlacement&&fn.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,Na=0;Na<fn.numGlyphs;Na++)l.addDynamicAttributes(jr,na,ka);Ir&&fn.associatedIconIndex>=0&&(gn[fn.associatedIconIndex]={shiftedAnchor:na,angle:ka})}else no(fn.numGlyphs,jr)}if(Ir){En.clear();for(var po=f.icon.placedSymbolArray,No=0;No<po.length;No++){var is=po.get(No);if(is.hidden)no(is.numGlyphs,En);else{var rs=gn[No];if(rs)for(var Ls=0;Ls<is.numGlyphs;Ls++)l.addDynamicAttributes(En,rs.shiftedAnchor,rs.angle);else no(is.numGlyphs,En)}}f.icon.dynamicLayoutVertexBuffer.updateData(En)}f.text.dynamicLayoutVertexBuffer.updateData(jr)}function od(f,g,p){return p.iconsInText&&g?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Yo(f,g,p,E,Y,ye,Pe,ct,Vt,fr,Ir,Dr){for(var jr=f.context,En=jr.gl,gn=f.transform,Bn=ct==="map",fn=Vt==="map",Fn=Bn&&p.layout.get("symbol-placement")!=="point",jn=Bn&&!fn&&!Fn,vi=p.layout.get("symbol-sort-key").constantOr(1)!==void 0,ki=!1,Ti=f.depthModeForSublayer(0,kt.ReadOnly),Fi=p.layout.get("text-variable-anchor"),na=[],ka=0,Na=E;ka<Na.length;ka+=1){var po=Na[ka],No=g.getTile(po),is=No.getBucket(p);if(is){var rs=Y?is.text:is.icon;if(rs&&rs.segments.get().length){var Ls=rs.programConfigurations.get(p.id),vo=Y||is.sdfIcons,ds=Y?is.textSizeData:is.iconSizeData,Ns=fn||gn.pitch!==0,cs=f.useProgram(od(vo,Y,is),Ls),Jo=l.evaluateSizeForZoom(ds,gn.zoom),$s=void 0,ws=[0,0],_s=void 0,El=void 0,nl=null,Qu=void 0;if(Y)_s=No.glyphAtlasTexture,El=En.LINEAR,$s=No.glyphAtlasTexture.size,is.iconsInText&&(ws=No.imageAtlasTexture.size,nl=No.imageAtlasTexture,Qu=Ns||f.options.rotating||f.options.zooming||ds.kind==="composite"||ds.kind==="camera"?En.LINEAR:En.NEAREST);else{var Ac=p.layout.get("icon-size").constantOr(0)!==1||is.iconsNeedLinear;_s=No.imageAtlasTexture,El=vo||f.options.rotating||f.options.zooming||Ac||Ns?En.LINEAR:En.NEAREST,$s=No.imageAtlasTexture.size}var Ju=Go(No,1,f.transform.zoom),qu=wa(po.posMatrix,fn,Bn,f.transform,Ju),Tc=Aa(po.posMatrix,fn,Bn,f.transform,Ju),ec=Fi&&is.hasTextData(),Pf=p.layout.get("icon-text-fit")!=="none"&&ec&&is.hasIconData();Fn&&Uo(is,po.posMatrix,f,Y,qu,Tc,fn,fr);var Ef=f.translatePosMatrix(po.posMatrix,No,ye,Pe),$l=Fn||Y&&Fi||Pf?kc:qu,Uc=f.translatePosMatrix(Tc,No,ye,Pe,!0),Jh=vo&&p.paint.get(Y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,qh={program:cs,buffers:rs,uniformValues:vo?is.iconsInText?Af(ds.kind,Jo,jn,fn,f,Ef,$l,Uc,$s,ws):cf(ds.kind,Jo,jn,fn,f,Ef,$l,Uc,Y,$s,!0):Eh(ds.kind,Jo,jn,fn,f,Ef,$l,Uc,Y,$s),atlasTexture:_s,atlasTextureIcon:nl,atlasInterpolation:El,atlasInterpolationIcon:Qu,isSDF:vo,hasHalo:Jh};if(vi&&is.canOverlap){ki=!0;for(var Sh=0,Of=rs.segments.get();Sh<Of.length;Sh+=1){var Ch=Of[Sh];na.push({segments:new l.SegmentVector([Ch]),sortKey:Ch.sortKey,state:qh})}}else na.push({segments:rs.segments,sortKey:0,state:qh})}}}ki&&na.sort(function(wh,Fh){return wh.sortKey-Fh.sortKey});for(var pf=0,oh=na;pf<oh.length;pf+=1){var Jc=oh[pf],nc=Jc.state;if(jr.activeTexture.set(En.TEXTURE0),nc.atlasTexture.bind(nc.atlasInterpolation,En.CLAMP_TO_EDGE),nc.atlasTextureIcon&&(jr.activeTexture.set(En.TEXTURE1),nc.atlasTextureIcon&&nc.atlasTextureIcon.bind(nc.atlasInterpolationIcon,En.CLAMP_TO_EDGE)),nc.isSDF){var ic=nc.uniformValues;nc.hasHalo&&(ic.u_is_halo=1,Gs(nc.buffers,Jc.segments,p,f,nc.program,Ti,Ir,Dr,ic)),ic.u_is_halo=0}Gs(nc.buffers,Jc.segments,p,f,nc.program,Ti,Ir,Dr,nc.uniformValues)}}function Gs(f,g,p,E,Y,ye,Pe,ct,Vt){var fr=E.context;Y.draw(fr,fr.gl.TRIANGLES,ye,Pe,ct,Lr.disabled,Vt,p.id,f.layoutVertexBuffer,f.indexBuffer,g,p.paint,E.transform.zoom,f.programConfigurations.get(p.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Kl(f,g,p,E,Y,ye,Pe){var ct,Vt,fr,Ir,Dr,jr=f.context.gl,En=p.paint.get("fill-pattern"),gn=En&&En.constantOr(1),Bn=p.getCrossfadeParameters();Pe?(Vt=gn&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ct=jr.LINES):(Vt=gn?"fillPattern":"fill",ct=jr.TRIANGLES);for(var fn=0,Fn=E;fn<Fn.length;fn+=1){var jn=Fn[fn],vi=g.getTile(jn);if(!gn||vi.patternsLoaded()){var ki=vi.getBucket(p);if(ki){var Ti=ki.programConfigurations.get(p.id),Fi=f.useProgram(Vt,Ti);gn&&(f.context.activeTexture.set(jr.TEXTURE0),vi.imageAtlasTexture.bind(jr.LINEAR,jr.CLAMP_TO_EDGE),Ti.updatePaintBuffers(Bn));var na=En.constantOr(null);if(na&&vi.imageAtlas){var ka=vi.imageAtlas,Na=ka.patternPositions[na.to.toString()],po=ka.patternPositions[na.from.toString()];Na&&po&&Ti.setConstantPatternPositions(Na,po)}var No=f.translatePosMatrix(jn.posMatrix,vi,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(Pe){Ir=ki.indexBuffer2,Dr=ki.segments2;var is=[jr.drawingBufferWidth,jr.drawingBufferHeight];fr=Vt==="fillOutlinePattern"&&gn?gl(No,f,Bn,vi,is):Xs(No,is)}else Ir=ki.indexBuffer,Dr=ki.segments,fr=gn?Ps(No,f,Bn,vi):bs(No);Fi.draw(f.context,ct,Y,f.stencilModeForClipping(jn),ye,Lr.disabled,fr,p.id,ki.layoutVertexBuffer,Ir,Dr,p.paint,f.transform.zoom,Ti)}}}}function dl(f,g,p,E,Y,ye,Pe){for(var ct=f.context,Vt=ct.gl,fr=p.paint.get("fill-extrusion-pattern"),Ir=fr.constantOr(1),Dr=p.getCrossfadeParameters(),jr=p.paint.get("fill-extrusion-opacity"),En=0,gn=E;En<gn.length;En+=1){var Bn=gn[En],fn=g.getTile(Bn),Fn=fn.getBucket(p);if(Fn){var jn=Fn.programConfigurations.get(p.id),vi=f.useProgram(Ir?"fillExtrusionPattern":"fillExtrusion",jn);Ir&&(f.context.activeTexture.set(Vt.TEXTURE0),fn.imageAtlasTexture.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE),jn.updatePaintBuffers(Dr));var ki=fr.constantOr(null);if(ki&&fn.imageAtlas){var Ti=fn.imageAtlas,Fi=Ti.patternPositions[ki.to.toString()],na=Ti.patternPositions[ki.from.toString()];Fi&&na&&jn.setConstantPatternPositions(Fi,na)}var ka=f.translatePosMatrix(Bn.posMatrix,fn,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Na=p.paint.get("fill-extrusion-vertical-gradient"),po=Ir?Ws(ka,f,Na,jr,Bn,Dr,fn):gs(ka,f,Na,jr);vi.draw(ct,ct.gl.TRIANGLES,Y,ye,Pe,Lr.backCCW,po,p.id,Fn.layoutVertexBuffer,Fn.indexBuffer,Fn.segments,p.paint,f.transform.zoom,jn)}}}function su(f,g,p,E,Y,ye){var Pe=f.context,ct=Pe.gl,Vt=g.fbo;if(Vt){var fr=f.useProgram("hillshade");Pe.activeTexture.set(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,Vt.colorAttachment.get());var Ir=function(Dr,jr,En){var gn=En.paint.get("hillshade-shadow-color"),Bn=En.paint.get("hillshade-highlight-color"),fn=En.paint.get("hillshade-accent-color"),Fn=En.paint.get("hillshade-illumination-direction")*(Math.PI/180);En.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fn-=Dr.transform.angle);var jn,vi,ki,Ti=!Dr.options.moving;return{u_matrix:Dr.transform.calculatePosMatrix(jr.tileID.toUnwrapped(),Ti),u_image:0,u_latrange:(jn=jr.tileID,vi=Math.pow(2,jn.canonical.z),ki=jn.canonical.y,[new l.MercatorCoordinate(0,ki/vi).toLngLat().lat,new l.MercatorCoordinate(0,(ki+1)/vi).toLngLat().lat]),u_light:[En.paint.get("hillshade-exaggeration"),Fn],u_shadow:gn,u_highlight:Bn,u_accent:fn}}(f,g,p);fr.draw(Pe,ct.TRIANGLES,E,Y,ye,Lr.disabled,Ir,p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}}function Fc(f,g,p,E,Y,ye){var Pe=f.context,ct=Pe.gl,Vt=g.dem;if(Vt&&Vt.data){var fr=Vt.dim,Ir=Vt.stride,Dr=Vt.getPixels();if(Pe.activeTexture.set(ct.TEXTURE1),Pe.pixelStoreUnpackPremultiplyAlpha.set(!1),g.demTexture=g.demTexture||f.getTileTexture(Ir),g.demTexture){var jr=g.demTexture;jr.update(Dr,{premultiply:!1}),jr.bind(ct.NEAREST,ct.CLAMP_TO_EDGE)}else g.demTexture=new l.Texture(Pe,Dr,ct.RGBA,{premultiply:!1}),g.demTexture.bind(ct.NEAREST,ct.CLAMP_TO_EDGE);Pe.activeTexture.set(ct.TEXTURE0);var En=g.fbo;if(!En){var gn=new l.Texture(Pe,{width:fr,height:fr,data:null},ct.RGBA);gn.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),(En=g.fbo=Pe.createFramebuffer(fr,fr,!0)).colorAttachment.set(gn.texture)}Pe.bindFramebuffer.set(En.framebuffer),Pe.viewport.set([0,0,fr,fr]),f.useProgram("hillshadePrepare").draw(Pe,ct.TRIANGLES,E,Y,ye,Lr.disabled,function(Bn,fn){var Fn=fn.stride,jn=l.create();return l.ortho(jn,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(jn,jn,[0,-l.EXTENT,0]),{u_matrix:jn,u_image:1,u_dimension:[Fn,Fn],u_zoom:Bn.overscaledZ,u_unpack:fn.getUnpackVector()}}(g.tileID,Vt),p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),g.needsHillshadePrepare=!1}}function tc(f,g,p,E,Y){var ye=E.paint.get("raster-fade-duration");if(ye>0){var Pe=l.browser.now(),ct=(Pe-f.timeAdded)/ye,Vt=g?(Pe-g.timeAdded)/ye:-1,fr=p.getSource(),Ir=Y.coveringZoomLevel({tileSize:fr.tileSize,roundZoom:fr.roundZoom}),Dr=!g||Math.abs(g.tileID.overscaledZ-Ir)>Math.abs(f.tileID.overscaledZ-Ir),jr=Dr&&f.refreshedUponExpiration?1:l.clamp(Dr?ct:1-Vt,0,1);return f.refreshedUponExpiration&&ct>=1&&(f.refreshedUponExpiration=!1),g?{opacity:1,mix:1-jr}:{opacity:jr,mix:0}}return{opacity:1,mix:0}}var Tf=new l.Color(1,0,0,1),_c=new l.Color(0,1,0,1),Hl=new l.Color(0,0,1,1),ff=new l.Color(1,0,1,1),xc=new l.Color(0,1,1,1);function Yh(f,g,p,E){Gc(f,0,g+p/2,f.transform.width,p,E)}function Uh(f,g,p,E){Gc(f,g-p/2,0,p,f.transform.height,E)}function Gc(f,g,p,E,Y,ye){var Pe=f.context,ct=Pe.gl;ct.enable(ct.SCISSOR_TEST),ct.scissor(g*l.browser.devicePixelRatio,p*l.browser.devicePixelRatio,E*l.browser.devicePixelRatio,Y*l.browser.devicePixelRatio),Pe.clear({color:ye}),ct.disable(ct.SCISSOR_TEST)}function Mf(f,g,p){var E=f.context,Y=E.gl,ye=p.posMatrix,Pe=f.useProgram("debug"),ct=kt.disabled,Vt=cr.disabled,fr=f.colorModeForRenderPass();E.activeTexture.set(Y.TEXTURE0),f.emptyTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Pe.draw(E,Y.LINE_STRIP,ct,Vt,fr,Lr.disabled,lc(ye,l.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);var Ir=g.getTileByID(p.key).latestRawTileData,Dr=Math.floor((Ir&&Ir.byteLength||0)/1024),jr=g.getTile(p).tileSize,En=512/Math.min(jr,512)*(p.overscaledZ/f.transform.zoom)*.5,gn=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(gn+=" => "+p.overscaledZ),function(Bn,fn){Bn.initDebugOverlayCanvas();var Fn=Bn.debugOverlayCanvas,jn=Bn.context.gl,vi=Bn.debugOverlayCanvas.getContext("2d");vi.clearRect(0,0,Fn.width,Fn.height),vi.shadowColor="white",vi.shadowBlur=2,vi.lineWidth=1.5,vi.strokeStyle="white",vi.textBaseline="top",vi.font="bold 36px Open Sans, sans-serif",vi.fillText(fn,5,5),vi.strokeText(fn,5,5),Bn.debugOverlayTexture.update(Fn),Bn.debugOverlayTexture.bind(jn.LINEAR,jn.CLAMP_TO_EDGE)}(f,gn+" "+Dr+"kb"),Pe.draw(E,Y.TRIANGLES,ct,Vt,Ar.alphaBlended,Lr.disabled,lc(ye,l.Color.transparent,En),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}var nh={symbol:function(f,g,p,E,Y){if(f.renderPass==="translucent"){var ye=cr.disabled,Pe=f.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(ct,Vt,fr,Ir,Dr,jr,En){for(var gn=Vt.transform,Bn=Dr==="map",fn=jr==="map",Fn=0,jn=ct;Fn<jn.length;Fn+=1){var vi=jn[Fn],ki=Ir.getTile(vi),Ti=ki.getBucket(fr);if(Ti&&Ti.text&&Ti.text.segments.get().length){var Fi=l.evaluateSizeForZoom(Ti.textSizeData,gn.zoom),na=Go(ki,1,Vt.transform.zoom),ka=wa(vi.posMatrix,fn,Bn,Vt.transform,na),Na=fr.layout.get("icon-text-fit")!=="none"&&Ti.hasIconData();if(Fi){var po=Math.pow(2,gn.zoom-ki.tileID.overscaledZ);rh(Ti,Bn,fn,En,l.symbolSize,gn,ka,vi.posMatrix,po,Fi,Na)}}}}(E,f,p,g,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),Y),p.paint.get("icon-opacity").constantOr(1)!==0&&Yo(f,g,p,E,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),ye,Pe),p.paint.get("text-opacity").constantOr(1)!==0&&Yo(f,g,p,E,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),ye,Pe),g.map.showCollisionBoxes&&(Zl(f,g,p,E,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Zl(f,g,p,E,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))}},circle:function(f,g,p,E){if(f.renderPass==="translucent"){var Y=p.paint.get("circle-opacity"),ye=p.paint.get("circle-stroke-width"),Pe=p.paint.get("circle-stroke-opacity"),ct=p.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Y.constantOr(1)!==0||ye.constantOr(1)!==0&&Pe.constantOr(1)!==0){for(var Vt=f.context,fr=Vt.gl,Ir=f.depthModeForSublayer(0,kt.ReadOnly),Dr=cr.disabled,jr=f.colorModeForRenderPass(),En=[],gn=0;gn<E.length;gn++){var Bn=E[gn],fn=g.getTile(Bn),Fn=fn.getBucket(p);if(Fn){var jn=Fn.programConfigurations.get(p.id),vi={programConfiguration:jn,program:f.useProgram("circle",jn),layoutVertexBuffer:Fn.layoutVertexBuffer,indexBuffer:Fn.indexBuffer,uniformValues:jf(f,Bn,fn,p)};if(ct)for(var ki=0,Ti=Fn.segments.get();ki<Ti.length;ki+=1){var Fi=Ti[ki];En.push({segments:new l.SegmentVector([Fi]),sortKey:Fi.sortKey,state:vi})}else En.push({segments:Fn.segments,sortKey:0,state:vi})}}ct&&En.sort(function(No,is){return No.sortKey-is.sortKey});for(var na=0,ka=En;na<ka.length;na+=1){var Na=ka[na],po=Na.state;po.program.draw(Vt,fr.TRIANGLES,Ir,Dr,jr,Lr.disabled,po.uniformValues,p.id,po.layoutVertexBuffer,po.indexBuffer,Na.segments,p.paint,f.transform.zoom,po.programConfiguration)}}}},heatmap:function(f,g,p,E){if(p.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){var Y=f.context,ye=Y.gl,Pe=cr.disabled,ct=new Ar([ye.ONE,ye.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(En,gn,Bn){var fn=En.gl;En.activeTexture.set(fn.TEXTURE1),En.viewport.set([0,0,gn.width/4,gn.height/4]);var Fn=Bn.heatmapFbo;if(Fn)fn.bindTexture(fn.TEXTURE_2D,Fn.colorAttachment.get()),En.bindFramebuffer.set(Fn.framebuffer);else{var jn=fn.createTexture();fn.bindTexture(fn.TEXTURE_2D,jn),fn.texParameteri(fn.TEXTURE_2D,fn.TEXTURE_WRAP_S,fn.CLAMP_TO_EDGE),fn.texParameteri(fn.TEXTURE_2D,fn.TEXTURE_WRAP_T,fn.CLAMP_TO_EDGE),fn.texParameteri(fn.TEXTURE_2D,fn.TEXTURE_MIN_FILTER,fn.LINEAR),fn.texParameteri(fn.TEXTURE_2D,fn.TEXTURE_MAG_FILTER,fn.LINEAR),Fn=Bn.heatmapFbo=En.createFramebuffer(gn.width/4,gn.height/4,!1),function(vi,ki,Ti,Fi){var na=vi.gl;na.texImage2D(na.TEXTURE_2D,0,na.RGBA,ki.width/4,ki.height/4,0,na.RGBA,vi.extRenderToTextureHalfFloat?vi.extTextureHalfFloat.HALF_FLOAT_OES:na.UNSIGNED_BYTE,null),Fi.colorAttachment.set(Ti)}(En,gn,jn,Fn)}})(Y,f,p),Y.clear({color:l.Color.transparent});for(var Vt=0;Vt<E.length;Vt++){var fr=E[Vt];if(!g.hasRenderableParent(fr)){var Ir=g.getTile(fr),Dr=Ir.getBucket(p);if(Dr){var jr=Dr.programConfigurations.get(p.id);f.useProgram("heatmap",jr).draw(Y,ye.TRIANGLES,kt.disabled,Pe,ct,Lr.disabled,dh(fr.posMatrix,Ir,f.transform.zoom,p.paint.get("heatmap-intensity")),p.id,Dr.layoutVertexBuffer,Dr.indexBuffer,Dr.segments,p.paint,f.transform.zoom,jr)}}}Y.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(En,gn){var Bn=En.context,fn=Bn.gl,Fn=gn.heatmapFbo;if(Fn){Bn.activeTexture.set(fn.TEXTURE0),fn.bindTexture(fn.TEXTURE_2D,Fn.colorAttachment.get()),Bn.activeTexture.set(fn.TEXTURE1);var jn=gn.colorRampTexture;jn||(jn=gn.colorRampTexture=new l.Texture(Bn,gn.colorRamp,fn.RGBA)),jn.bind(fn.LINEAR,fn.CLAMP_TO_EDGE),En.useProgram("heatmapTexture").draw(Bn,fn.TRIANGLES,kt.disabled,cr.disabled,En.colorModeForRenderPass(),Lr.disabled,function(vi,ki,Ti,Fi){var na=l.create();l.ortho(na,0,vi.width,vi.height,0,0,1);var ka=vi.context.gl;return{u_matrix:na,u_world:[ka.drawingBufferWidth,ka.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ki.paint.get("heatmap-opacity")}}(En,gn),gn.id,En.viewportBuffer,En.quadTriangleIndexBuffer,En.viewportSegments,gn.paint,En.transform.zoom)}}(f,p))},line:function(f,g,p,E){if(f.renderPass==="translucent"){var Y=p.paint.get("line-opacity"),ye=p.paint.get("line-width");if(Y.constantOr(1)!==0&&ye.constantOr(1)!==0)for(var Pe=f.depthModeForSublayer(0,kt.ReadOnly),ct=f.colorModeForRenderPass(),Vt=p.paint.get("line-dasharray"),fr=p.paint.get("line-pattern"),Ir=fr.constantOr(1),Dr=p.paint.get("line-gradient"),jr=p.getCrossfadeParameters(),En=Ir?"linePattern":Vt?"lineSDF":Dr?"lineGradient":"line",gn=f.context,Bn=gn.gl,fn=!0,Fn=0,jn=E;Fn<jn.length;Fn+=1){var vi=jn[Fn],ki=g.getTile(vi);if(!Ir||ki.patternsLoaded()){var Ti=ki.getBucket(p);if(Ti){var Fi=Ti.programConfigurations.get(p.id),na=f.context.program.get(),ka=f.useProgram(En,Fi),Na=fn||ka.program!==na,po=fr.constantOr(null);if(po&&ki.imageAtlas){var No=ki.imageAtlas,is=No.patternPositions[po.to.toString()],rs=No.patternPositions[po.from.toString()];is&&rs&&Fi.setConstantPatternPositions(is,rs)}var Ls=Ir?th(f,ki,p,jr):Vt?kf(f,ki,p,Vt,jr):Dr?Us(f,ki,p,Ti.lineClipsArray.length):_l(f,ki,p);if(Ir)gn.activeTexture.set(Bn.TEXTURE0),ki.imageAtlasTexture.bind(Bn.LINEAR,Bn.CLAMP_TO_EDGE),Fi.updatePaintBuffers(jr);else if(Vt&&(Na||f.lineAtlas.dirty))gn.activeTexture.set(Bn.TEXTURE0),f.lineAtlas.bind(gn);else if(Dr){var vo=Ti.gradients[p.id],ds=vo.texture;if(p.gradientVersion!==vo.version){var Ns=256;if(p.stepInterpolant){var cs=g.getSource().maxzoom,Jo=vi.canonical.z===cs?Math.ceil(1<<f.transform.maxZoom-vi.canonical.z):1;Ns=l.clamp(l.nextPowerOfTwo(Ti.maxLineLength/l.EXTENT*1024*Jo),256,gn.maxTextureSize)}vo.gradient=l.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:Ns,image:vo.gradient||void 0,clips:Ti.lineClipsArray}),vo.texture?vo.texture.update(vo.gradient):vo.texture=new l.Texture(gn,vo.gradient,Bn.RGBA),vo.version=p.gradientVersion,ds=vo.texture}gn.activeTexture.set(Bn.TEXTURE0),ds.bind(p.stepInterpolant?Bn.NEAREST:Bn.LINEAR,Bn.CLAMP_TO_EDGE)}ka.draw(gn,Bn.TRIANGLES,Pe,f.stencilModeForClipping(vi),ct,Lr.disabled,Ls,p.id,Ti.layoutVertexBuffer,Ti.indexBuffer,Ti.segments,p.paint,f.transform.zoom,Fi,Ti.layoutVertexBuffer2),fn=!1}}}}},fill:function(f,g,p,E){var Y=p.paint.get("fill-color"),ye=p.paint.get("fill-opacity");if(ye.constantOr(1)!==0){var Pe=f.colorModeForRenderPass(),ct=p.paint.get("fill-pattern"),Vt=f.opaquePassEnabledForLayer()&&!ct.constantOr(1)&&Y.constantOr(l.Color.transparent).a===1&&ye.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===Vt){var fr=f.depthModeForSublayer(1,f.renderPass==="opaque"?kt.ReadWrite:kt.ReadOnly);Kl(f,g,p,E,fr,Pe,!1)}if(f.renderPass==="translucent"&&p.paint.get("fill-antialias")){var Ir=f.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,kt.ReadOnly);Kl(f,g,p,E,Ir,Pe,!0)}}},"fill-extrusion":function(f,g,p,E){var Y=p.paint.get("fill-extrusion-opacity");if(Y!==0&&f.renderPass==="translucent"){var ye=new kt(f.context.gl.LEQUAL,kt.ReadWrite,f.depthRangeFor3D);if(Y!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))dl(f,g,p,E,ye,cr.disabled,Ar.disabled),dl(f,g,p,E,ye,f.stencilModeFor3D(),f.colorModeForRenderPass());else{var Pe=f.colorModeForRenderPass();dl(f,g,p,E,ye,cr.disabled,Pe)}}},hillshade:function(f,g,p,E){if(f.renderPass==="offscreen"||f.renderPass==="translucent"){for(var Y=f.context,ye=f.depthModeForSublayer(0,kt.ReadOnly),Pe=f.colorModeForRenderPass(),ct=f.renderPass==="translucent"?f.stencilConfigForOverlap(E):[{},E],Vt=ct[0],fr=0,Ir=ct[1];fr<Ir.length;fr+=1){var Dr=Ir[fr],jr=g.getTile(Dr);jr.needsHillshadePrepare&&f.renderPass==="offscreen"?Fc(f,jr,p,ye,cr.disabled,Pe):f.renderPass==="translucent"&&su(f,jr,p,ye,Vt[Dr.overscaledZ],Pe)}Y.viewport.set([0,0,f.width,f.height])}},raster:function(f,g,p,E){if(f.renderPass==="translucent"&&p.paint.get("raster-opacity")!==0&&E.length)for(var Y=f.context,ye=Y.gl,Pe=g.getSource(),ct=f.useProgram("raster"),Vt=f.colorModeForRenderPass(),fr=Pe instanceof st?[{},E]:f.stencilConfigForOverlap(E),Ir=fr[0],Dr=fr[1],jr=Dr[Dr.length-1].overscaledZ,En=!f.options.moving,gn=0,Bn=Dr;gn<Bn.length;gn+=1){var fn=Bn[gn],Fn=f.depthModeForSublayer(fn.overscaledZ-jr,p.paint.get("raster-opacity")===1?kt.ReadWrite:kt.ReadOnly,ye.LESS),jn=g.getTile(fn),vi=f.transform.calculatePosMatrix(fn.toUnwrapped(),En);jn.registerFadeDuration(p.paint.get("raster-fade-duration"));var ki=g.findLoadedParent(fn,0),Ti=tc(jn,ki,g,p,f.transform),Fi=void 0,na=void 0,ka=p.paint.get("raster-resampling")==="nearest"?ye.NEAREST:ye.LINEAR;Y.activeTexture.set(ye.TEXTURE0),jn.texture.bind(ka,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(ye.TEXTURE1),ki?(ki.texture.bind(ka,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),Fi=Math.pow(2,ki.tileID.overscaledZ-jn.tileID.overscaledZ),na=[jn.tileID.canonical.x*Fi%1,jn.tileID.canonical.y*Fi%1]):jn.texture.bind(ka,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST);var Na=gd(vi,na||[0,0],Fi||1,Ti,p);Pe instanceof st?ct.draw(Y,ye.TRIANGLES,Fn,cr.disabled,Vt,Lr.disabled,Na,p.id,Pe.boundsBuffer,f.quadTriangleIndexBuffer,Pe.boundsSegments):ct.draw(Y,ye.TRIANGLES,Fn,Ir[fn.overscaledZ],Vt,Lr.disabled,Na,p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,g,p){var E=p.paint.get("background-color"),Y=p.paint.get("background-opacity");if(Y!==0){var ye=f.context,Pe=ye.gl,ct=f.transform,Vt=ct.tileSize,fr=p.paint.get("background-pattern");if(!f.isPatternMissing(fr)){var Ir=!fr&&E.a===1&&Y===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass===Ir){var Dr=cr.disabled,jr=f.depthModeForSublayer(0,Ir==="opaque"?kt.ReadWrite:kt.ReadOnly),En=f.colorModeForRenderPass(),gn=f.useProgram(fr?"backgroundPattern":"background"),Bn=ct.coveringTiles({tileSize:Vt});fr&&(ye.activeTexture.set(Pe.TEXTURE0),f.imageManager.bind(f.context));for(var fn=p.getCrossfadeParameters(),Fn=0,jn=Bn;Fn<jn.length;Fn+=1){var vi=jn[Fn],ki=f.transform.calculatePosMatrix(vi.toUnwrapped()),Ti=fr?Dc(ki,Y,f,fr,{tileID:vi,tileSize:Vt},fn):_f(ki,Y,E);gn.draw(ye,Pe.TRIANGLES,jr,Dr,En,Lr.disabled,Ti,p.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}}}},debug:function(f,g,p){for(var E=0;E<p.length;E++)Mf(f,g,p[E])},custom:function(f,g,p){var E=f.context,Y=p.implementation;if(f.renderPass==="offscreen"){var ye=Y.prerender;ye&&(f.setCustomLayerDefaults(),E.setColorMode(f.colorModeForRenderPass()),ye.call(Y,E.gl,f.transform.customLayerMatrix()),E.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),E.setColorMode(f.colorModeForRenderPass()),E.setStencilMode(cr.disabled);var Pe=Y.renderingMode==="3d"?new kt(f.context.gl.LEQUAL,kt.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,kt.ReadOnly);E.setDepthMode(Pe),Y.render(E.gl,f.transform.customLayerMatrix()),E.setDirty(),f.setBaseState(),E.bindFramebuffer.set(null)}}},Qn=function(f,g){this.context=new sr(f),this.transform=g,this._tileTextures={},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new mn,this.gpuTimers={}};Qn.prototype.resize=function(f,g){if(this.width=f*l.browser.devicePixelRatio,this.height=g*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var p=0,E=this.style._order;p<E.length;p+=1)this.style._layers[E[p]].resize()},Qn.prototype.setup=function(){var f=this.context,g=new l.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(l.EXTENT,0),g.emplaceBack(0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(g,Rr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var p=new l.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(l.EXTENT,0),p.emplaceBack(0,l.EXTENT),p.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=f.createVertexBuffer(p,Rr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var E=new l.StructArrayLayout4i8;E.emplaceBack(0,0,0,0),E.emplaceBack(l.EXTENT,0,l.EXTENT,0),E.emplaceBack(0,l.EXTENT,0,l.EXTENT),E.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(E,Re.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Y=new l.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(1,0),Y.emplaceBack(0,1),Y.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(Y,Rr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var ye=new l.StructArrayLayout1ui2;ye.emplaceBack(0),ye.emplaceBack(1),ye.emplaceBack(3),ye.emplaceBack(2),ye.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(ye);var Pe=new l.StructArrayLayout3ui6;Pe.emplaceBack(0,1,2),Pe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(Pe),this.emptyTexture=new l.Texture(f,{width:1,height:1,data:new Uint8Array([0,0,0,0])},f.gl.RGBA);var ct=this.context.gl;this.stencilClearMode=new cr({func:ct.ALWAYS,mask:0},0,255,ct.ZERO,ct.ZERO,ct.ZERO)},Qn.prototype.clearStencil=function(){var f=this.context,g=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var p=l.create();l.ortho(p,0,this.width,this.height,0,0,1),l.scale(p,p,[g.drawingBufferWidth,g.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,g.TRIANGLES,kt.disabled,this.stencilClearMode,Ar.disabled,Lr.disabled,Lc(p),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Qn.prototype._renderTileClippingMasks=function(f,g){if(this.currentStencilSource!==f.source&&f.isTileClipped()&&g&&g.length){this.currentStencilSource=f.source;var p=this.context,E=p.gl;this.nextStencilID+g.length>256&&this.clearStencil(),p.setColorMode(Ar.disabled),p.setDepthMode(kt.disabled);var Y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ye=0,Pe=g;ye<Pe.length;ye+=1){var ct=Pe[ye],Vt=this._tileClippingMaskIDs[ct.key]=this.nextStencilID++;Y.draw(p,E.TRIANGLES,kt.disabled,new cr({func:E.ALWAYS,mask:0},Vt,255,E.KEEP,E.KEEP,E.REPLACE),Ar.disabled,Lr.disabled,Lc(ct.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Qn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var f=this.nextStencilID++,g=this.context.gl;return new cr({func:g.NOTEQUAL,mask:255},f,255,g.KEEP,g.KEEP,g.REPLACE)},Qn.prototype.stencilModeForClipping=function(f){var g=this.context.gl;return new cr({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,g.KEEP,g.KEEP,g.REPLACE)},Qn.prototype.stencilConfigForOverlap=function(f){var g,p=this.context.gl,E=f.sort(function(Vt,fr){return fr.overscaledZ-Vt.overscaledZ}),Y=E[E.length-1].overscaledZ,ye=E[0].overscaledZ-Y+1;if(ye>1){this.currentStencilSource=void 0,this.nextStencilID+ye>256&&this.clearStencil();for(var Pe={},ct=0;ct<ye;ct++)Pe[ct+Y]=new cr({func:p.GEQUAL,mask:255},ct+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=ye,[Pe,E]}return[(g={},g[Y]=cr.disabled,g),E]},Qn.prototype.colorModeForRenderPass=function(){var f=this.context.gl;return this._showOverdrawInspector?new Ar([f.CONSTANT_COLOR,f.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ar.unblended:Ar.alphaBlended},Qn.prototype.depthModeForSublayer=function(f,g,p){if(!this.opaquePassEnabledForLayer())return kt.disabled;var E=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new kt(p||this.context.gl.LEQUAL,g,[E,E])},Qn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Qn.prototype.render=function(f,g){var p=this;this.style=f,this.options=g,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var E=this.style._order,Y=this.style.sourceCaches;for(var ye in Y){var Pe=Y[ye];Pe.used&&Pe.prepare(this.context)}var ct,Vt,fr={},Ir={},Dr={};for(var jr in Y){var En=Y[jr];fr[jr]=En.getVisibleCoordinates(),Ir[jr]=fr[jr].slice().reverse(),Dr[jr]=En.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var gn=0;gn<E.length;gn++)if(this.style._layers[E[gn]].is3D()){this.opaquePassCutoff=gn;break}this.renderPass="offscreen";for(var Bn=0,fn=E;Bn<fn.length;Bn+=1){var Fn=this.style._layers[fn[Bn]];if(Fn.hasOffscreenPass()&&!Fn.isHidden(this.transform.zoom)){var jn=Ir[Fn.source];(Fn.type==="custom"||jn.length)&&this.renderLayer(this,Y[Fn.source],Fn,jn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:g.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){var vi=this.style._layers[E[this.currentLayer]],ki=Y[vi.source],Ti=fr[vi.source];this._renderTileClippingMasks(vi,Ti),this.renderLayer(this,ki,vi,Ti)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){var Fi=this.style._layers[E[this.currentLayer]],na=Y[Fi.source],ka=(Fi.type==="symbol"?Dr:Ir)[Fi.source];this._renderTileClippingMasks(Fi,fr[Fi.source]),this.renderLayer(this,na,Fi,ka)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(Na){Na.source&&!Na.isHidden(p.transform.zoom)&&(Na.source!==(Vt&&Vt.id)&&(Vt=p.style.sourceCaches[Na.source]),(!ct||ct.getSource().maxzoom<Vt.getSource().maxzoom)&&(ct=Vt))}),ct&&nh.debug(this,ct,ct.getVisibleCoordinates())),this.options.showPadding&&function(Na){var po=Na.transform.padding;Yh(Na,Na.transform.height-(po.top||0),3,Tf),Yh(Na,po.bottom||0,3,_c),Uh(Na,po.left||0,3,Hl),Uh(Na,Na.transform.width-(po.right||0),3,ff);var No=Na.transform.centerPoint;(function(is,rs,Ls,vo){Gc(is,rs-1,Ls-10,2,20,vo),Gc(is,rs-10,Ls-1,20,2,vo)})(Na,No.x,Na.transform.height-No.y,xc)}(this),this.context.setDefault()},Qn.prototype.renderLayer=function(f,g,p,E){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||E.length)&&(this.id=p.id,this.gpuTimingStart(p),nh[p.type](f,g,p,E,this.style.placement.variableOffsets),this.gpuTimingEnd())},Qn.prototype.gpuTimingStart=function(f){if(this.options.gpuTiming){var g=this.context.extTimerQuery,p=this.gpuTimers[f.id];p||(p=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),p.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,p.query)}},Qn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}},Qn.prototype.collectGpuTimers=function(){var f=this.gpuTimers;return this.gpuTimers={},f},Qn.prototype.queryGpuTimers=function(f){var g={};for(var p in f){var E=f[p],Y=this.context.extTimerQuery,ye=Y.getQueryObjectEXT(E.query,Y.QUERY_RESULT_EXT)/1e6;Y.deleteQueryEXT(E.query),g[p]=ye}return g},Qn.prototype.translatePosMatrix=function(f,g,p,E,Y){if(!p[0]&&!p[1])return f;var ye=Y?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(ye){var Pe=Math.sin(ye),ct=Math.cos(ye);p=[p[0]*ct-p[1]*Pe,p[0]*Pe+p[1]*ct]}var Vt=[Y?p[0]:Go(g,p[0],this.transform.zoom),Y?p[1]:Go(g,p[1],this.transform.zoom),0],fr=new Float32Array(16);return l.translate(fr,f,Vt),fr},Qn.prototype.saveTileTexture=function(f){var g=this._tileTextures[f.size[0]];g?g.push(f):this._tileTextures[f.size[0]]=[f]},Qn.prototype.getTileTexture=function(f){var g=this._tileTextures[f];return g&&g.length>0?g.pop():null},Qn.prototype.isPatternMissing=function(f){if(!f)return!1;if(!f.from||!f.to)return!0;var g=this.imageManager.getPattern(f.from.toString()),p=this.imageManager.getPattern(f.to.toString());return!g||!p},Qn.prototype.useProgram=function(f,g){this.cache=this.cache||{};var p=""+f+(g?g.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[p]||(this.cache[p]=new Ao(this.context,f,Io[f],g,Ff[f],this._showOverdrawInspector)),this.cache[p]},Qn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Qn.prototype.setBaseState=function(){var f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)},Qn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Qn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fa=function(f,g){this.points=f,this.planes=g};fa.fromInvProjectionMatrix=function(f,g,p){var E=Math.pow(2,p),Y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Pe){return l.transformMat4([],Pe,f)}).map(function(Pe){return l.scale$1([],Pe,1/Pe[3]/g*E)}),ye=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Pe){var ct=l.sub([],Y[Pe[0]],Y[Pe[1]]),Vt=l.sub([],Y[Pe[2]],Y[Pe[1]]),fr=l.normalize([],l.cross([],ct,Vt)),Ir=-l.dot(fr,Y[Pe[1]]);return fr.concat(Ir)});return new fa(Y,ye)};var $i=function(f,g){this.min=f,this.max=g,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};$i.prototype.quadrant=function(f){for(var g=[f%2==0,f<2],p=l.clone$2(this.min),E=l.clone$2(this.max),Y=0;Y<g.length;Y++)p[Y]=g[Y]?this.min[Y]:this.center[Y],E[Y]=g[Y]?this.center[Y]:this.max[Y];return E[2]=this.max[2],new $i(p,E)},$i.prototype.distanceX=function(f){return Math.max(Math.min(this.max[0],f[0]),this.min[0])-f[0]},$i.prototype.distanceY=function(f){return Math.max(Math.min(this.max[1],f[1]),this.min[1])-f[1]},$i.prototype.intersects=function(f){for(var g=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],p=!0,E=0;E<f.planes.length;E++){for(var Y=f.planes[E],ye=0,Pe=0;Pe<g.length;Pe++)ye+=l.dot$1(Y,g[Pe])>=0;if(ye===0)return 0;ye!==g.length&&(p=!1)}if(p)return 2;for(var ct=0;ct<3;ct++){for(var Vt=Number.MAX_VALUE,fr=-Number.MAX_VALUE,Ir=0;Ir<f.points.length;Ir++){var Dr=f.points[Ir][ct]-this.min[ct];Vt=Math.min(Vt,Dr),fr=Math.max(fr,Dr)}if(fr<0||Vt>this.max[ct]-this.min[ct])return 0}return 1};var $o=function(f,g,p,E){if(f===void 0&&(f=0),g===void 0&&(g=0),p===void 0&&(p=0),E===void 0&&(E=0),isNaN(f)||f<0||isNaN(g)||g<0||isNaN(p)||p<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=g,this.left=p,this.right=E};$o.prototype.interpolate=function(f,g,p){return g.top!=null&&f.top!=null&&(this.top=l.number(f.top,g.top,p)),g.bottom!=null&&f.bottom!=null&&(this.bottom=l.number(f.bottom,g.bottom,p)),g.left!=null&&f.left!=null&&(this.left=l.number(f.left,g.left,p)),g.right!=null&&f.right!=null&&(this.right=l.number(f.right,g.right,p)),this},$o.prototype.getCenter=function(f,g){var p=l.clamp((this.left+f-this.right)/2,0,f),E=l.clamp((this.top+g-this.bottom)/2,0,g);return new l.Point(p,E)},$o.prototype.equals=function(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right},$o.prototype.clone=function(){return new $o(this.top,this.bottom,this.left,this.right)},$o.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var lo=function(f,g,p,E,Y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Y===void 0||Y,this._minZoom=f||0,this._maxZoom=g||22,this._minPitch=p==null?0:p,this._maxPitch=E==null?60:E,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $o,this._posMatrixCache={},this._alignedPosMatrixCache={}},Es={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};lo.prototype.clone=function(){var f=new lo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._calcMatrices(),f},Es.minZoom.get=function(){return this._minZoom},Es.minZoom.set=function(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))},Es.maxZoom.get=function(){return this._maxZoom},Es.maxZoom.set=function(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))},Es.minPitch.get=function(){return this._minPitch},Es.minPitch.set=function(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))},Es.maxPitch.get=function(){return this._maxPitch},Es.maxPitch.set=function(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))},Es.renderWorldCopies.get=function(){return this._renderWorldCopies},Es.renderWorldCopies.set=function(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f},Es.worldSize.get=function(){return this.tileSize*this.scale},Es.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Es.size.get=function(){return new l.Point(this.width,this.height)},Es.bearing.get=function(){return-this.angle/Math.PI*180},Es.bearing.set=function(f){var g=-l.wrap(f,-180,180)*Math.PI/180;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Es.pitch.get=function(){return this._pitch/Math.PI*180},Es.pitch.set=function(f){var g=l.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())},Es.fov.get=function(){return this._fov/Math.PI*180},Es.fov.set=function(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())},Es.zoom.get=function(){return this._zoom},Es.zoom.set=function(f){var g=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._zoom=g,this.scale=this.zoomScale(g),this.tileZoom=Math.floor(g),this.zoomFraction=g-this.tileZoom,this._constrain(),this._calcMatrices())},Es.center.get=function(){return this._center},Es.center.set=function(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())},Es.padding.get=function(){return this._edgeInsets.toJSON()},Es.padding.set=function(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())},Es.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},lo.prototype.isPaddingEqual=function(f){return this._edgeInsets.equals(f)},lo.prototype.interpolatePadding=function(f,g,p){this._unmodified=!1,this._edgeInsets.interpolate(f,g,p),this._constrain(),this._calcMatrices()},lo.prototype.coveringZoomLevel=function(f){var g=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,g)},lo.prototype.getVisibleUnwrappedCoordinates=function(f){var g=[new l.UnwrappedTileID(0,f)];if(this._renderWorldCopies)for(var p=this.pointCoordinate(new l.Point(0,0)),E=this.pointCoordinate(new l.Point(this.width,0)),Y=this.pointCoordinate(new l.Point(this.width,this.height)),ye=this.pointCoordinate(new l.Point(0,this.height)),Pe=Math.floor(Math.min(p.x,E.x,Y.x,ye.x)),ct=Math.floor(Math.max(p.x,E.x,Y.x,ye.x)),Vt=Pe-1;Vt<=ct+1;Vt++)Vt!==0&&g.push(new l.UnwrappedTileID(Vt,f));return g},lo.prototype.coveringTiles=function(f){var g=this.coveringZoomLevel(f),p=g;if(f.minzoom!==void 0&&g<f.minzoom)return[];f.maxzoom!==void 0&&g>f.maxzoom&&(g=f.maxzoom);var E=l.MercatorCoordinate.fromLngLat(this.center),Y=Math.pow(2,g),ye=[Y*E.x,Y*E.y,0],Pe=fa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g),ct=f.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ct=g);var Vt=function(Na){return{aabb:new $i([Na*Y,0,0],[(Na+1)*Y,Y,0]),zoom:0,x:0,y:0,wrap:Na,fullyVisible:!1}},fr=[],Ir=[],Dr=g,jr=f.reparseOverscaled?p:g;if(this._renderWorldCopies)for(var En=1;En<=3;En++)fr.push(Vt(-En)),fr.push(Vt(En));for(fr.push(Vt(0));fr.length>0;){var gn=fr.pop(),Bn=gn.x,fn=gn.y,Fn=gn.fullyVisible;if(!Fn){var jn=gn.aabb.intersects(Pe);if(jn===0)continue;Fn=jn===2}var vi=gn.aabb.distanceX(ye),ki=gn.aabb.distanceY(ye),Ti=Math.max(Math.abs(vi),Math.abs(ki));if(gn.zoom===Dr||Ti>3+(1<<Dr-gn.zoom)-2&&gn.zoom>=ct)Ir.push({tileID:new l.OverscaledTileID(gn.zoom===Dr?jr:gn.zoom,gn.wrap,gn.zoom,Bn,fn),distanceSq:l.sqrLen([ye[0]-.5-Bn,ye[1]-.5-fn])});else for(var Fi=0;Fi<4;Fi++){var na=(Bn<<1)+Fi%2,ka=(fn<<1)+(Fi>>1);fr.push({aabb:gn.aabb.quadrant(Fi),zoom:gn.zoom+1,x:na,y:ka,wrap:gn.wrap,fullyVisible:Fn})}}return Ir.sort(function(Na,po){return Na.distanceSq-po.distanceSq}).map(function(Na){return Na.tileID})},lo.prototype.resize=function(f,g){this.width=f,this.height=g,this.pixelsToGLUnits=[2/f,-2/g],this._constrain(),this._calcMatrices()},Es.unmodified.get=function(){return this._unmodified},lo.prototype.zoomScale=function(f){return Math.pow(2,f)},lo.prototype.scaleZoom=function(f){return Math.log(f)/Math.LN2},lo.prototype.project=function(f){var g=l.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(f.lng)*this.worldSize,l.mercatorYfromLat(g)*this.worldSize)},lo.prototype.unproject=function(f){return new l.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()},Es.point.get=function(){return this.project(this.center)},lo.prototype.setLocationAtPoint=function(f,g){var p=this.pointCoordinate(g),E=this.pointCoordinate(this.centerPoint),Y=this.locationCoordinate(f),ye=new l.MercatorCoordinate(Y.x-(p.x-E.x),Y.y-(p.y-E.y));this.center=this.coordinateLocation(ye),this._renderWorldCopies&&(this.center=this.center.wrap())},lo.prototype.locationPoint=function(f){return this.coordinatePoint(this.locationCoordinate(f))},lo.prototype.pointLocation=function(f){return this.coordinateLocation(this.pointCoordinate(f))},lo.prototype.locationCoordinate=function(f){return l.MercatorCoordinate.fromLngLat(f)},lo.prototype.coordinateLocation=function(f){return f.toLngLat()},lo.prototype.pointCoordinate=function(f){var g=[f.x,f.y,0,1],p=[f.x,f.y,1,1];l.transformMat4(g,g,this.pixelMatrixInverse),l.transformMat4(p,p,this.pixelMatrixInverse);var E=g[3],Y=p[3],ye=g[1]/E,Pe=p[1]/Y,ct=g[2]/E,Vt=p[2]/Y,fr=ct===Vt?0:(0-ct)/(Vt-ct);return new l.MercatorCoordinate(l.number(g[0]/E,p[0]/Y,fr)/this.worldSize,l.number(ye,Pe,fr)/this.worldSize)},lo.prototype.coordinatePoint=function(f){var g=[f.x*this.worldSize,f.y*this.worldSize,0,1];return l.transformMat4(g,g,this.pixelMatrix),new l.Point(g[0]/g[3],g[1]/g[3])},lo.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},lo.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},lo.prototype.setMaxBounds=function(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},lo.prototype.calculatePosMatrix=function(f,g){g===void 0&&(g=!1);var p=f.key,E=g?this._alignedPosMatrixCache:this._posMatrixCache;if(E[p])return E[p];var Y=f.canonical,ye=this.worldSize/this.zoomScale(Y.z),Pe=Y.x+Math.pow(2,Y.z)*f.wrap,ct=l.identity(new Float64Array(16));return l.translate(ct,ct,[Pe*ye,Y.y*ye,0]),l.scale(ct,ct,[ye/l.EXTENT,ye/l.EXTENT,1]),l.multiply(ct,g?this.alignedProjMatrix:this.projMatrix,ct),E[p]=new Float32Array(ct),E[p]},lo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},lo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var f,g,p,E,Y=-90,ye=90,Pe=-180,ct=180,Vt=this.size,fr=this._unmodified;if(this.latRange){var Ir=this.latRange;Y=l.mercatorYfromLat(Ir[1])*this.worldSize,f=(ye=l.mercatorYfromLat(Ir[0])*this.worldSize)-Y<Vt.y?Vt.y/(ye-Y):0}if(this.lngRange){var Dr=this.lngRange;Pe=l.mercatorXfromLng(Dr[0])*this.worldSize,g=(ct=l.mercatorXfromLng(Dr[1])*this.worldSize)-Pe<Vt.x?Vt.x/(ct-Pe):0}var jr=this.point,En=Math.max(g||0,f||0);if(En)return this.center=this.unproject(new l.Point(g?(ct+Pe)/2:jr.x,f?(ye+Y)/2:jr.y)),this.zoom+=this.scaleZoom(En),this._unmodified=fr,void(this._constraining=!1);if(this.latRange){var gn=jr.y,Bn=Vt.y/2;gn-Bn<Y&&(E=Y+Bn),gn+Bn>ye&&(E=ye-Bn)}if(this.lngRange){var fn=jr.x,Fn=Vt.x/2;fn-Fn<Pe&&(p=Pe+Fn),fn+Fn>ct&&(p=ct-Fn)}p===void 0&&E===void 0||(this.center=this.unproject(new l.Point(p!==void 0?p:jr.x,E!==void 0?E:jr.y))),this._unmodified=fr,this._constraining=!1}},lo.prototype._calcMatrices=function(){if(this.height){var f=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var g=Math.PI/2+this._pitch,p=this._fov*(.5+f.y/this.height),E=Math.sin(p)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-g-p,.01,Math.PI-.01)),Y=this.point,ye=Y.x,Pe=Y.y,ct=1.01*(Math.cos(Math.PI/2-this._pitch)*E+this.cameraToCenterDistance),Vt=this.height/50,fr=new Float64Array(16);l.perspective(fr,this._fov,this.width/this.height,Vt,ct),fr[8]=2*-f.x/this.width,fr[9]=2*f.y/this.height,l.scale(fr,fr,[1,-1,1]),l.translate(fr,fr,[0,0,-this.cameraToCenterDistance]),l.rotateX(fr,fr,this._pitch),l.rotateZ(fr,fr,this.angle),l.translate(fr,fr,[-ye,-Pe,0]),this.mercatorMatrix=l.scale([],fr,[this.worldSize,this.worldSize,this.worldSize]),l.scale(fr,fr,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=fr,this.invProjMatrix=l.invert([],this.projMatrix);var Ir=this.width%2/2,Dr=this.height%2/2,jr=Math.cos(this.angle),En=Math.sin(this.angle),gn=ye-Math.round(ye)+jr*Ir+En*Dr,Bn=Pe-Math.round(Pe)+jr*Dr+En*Ir,fn=new Float64Array(fr);if(l.translate(fn,fn,[gn>.5?gn-1:gn,Bn>.5?Bn-1:Bn,0]),this.alignedProjMatrix=fn,fr=l.create(),l.scale(fr,fr,[this.width/2,-this.height/2,1]),l.translate(fr,fr,[1,-1,0]),this.labelPlaneMatrix=fr,fr=l.create(),l.scale(fr,fr,[1,-1,1]),l.translate(fr,fr,[-1,-1,0]),l.scale(fr,fr,[2/this.width,2/this.height,1]),this.glCoordMatrix=fr,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(fr=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=fr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},lo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var f=this.pointCoordinate(new l.Point(0,0)),g=[f.x*this.worldSize,f.y*this.worldSize,0,1];return l.transformMat4(g,g,this.pixelMatrix)[3]/this.cameraToCenterDistance},lo.prototype.getCameraPoint=function(){var f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,f))},lo.prototype.getCameraQueryGeometry=function(f){var g=this.getCameraPoint();if(f.length===1)return[f[0],g];for(var p=g.x,E=g.y,Y=g.x,ye=g.y,Pe=0,ct=f;Pe<ct.length;Pe+=1){var Vt=ct[Pe];p=Math.min(p,Vt.x),E=Math.min(E,Vt.y),Y=Math.max(Y,Vt.x),ye=Math.max(ye,Vt.y)}return[new l.Point(p,E),new l.Point(Y,E),new l.Point(Y,ye),new l.Point(p,ye),new l.Point(p,E)]},Object.defineProperties(lo.prototype,Es);var tl=function(f){var g,p,E,Y;this._hashName=f&&encodeURIComponent(f),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(g=this._updateHashUnthrottled.bind(this),p=!1,E=null,Y=function(){E=null,p&&(g(),E=setTimeout(Y,300),p=!1)},function(){return p=!0,E||Y(),E})};tl.prototype.addTo=function(f){return this._map=f,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},tl.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},tl.prototype.getHashString=function(f){var g=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,E=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),Y=Math.pow(10,E),ye=Math.round(g.lng*Y)/Y,Pe=Math.round(g.lat*Y)/Y,ct=this._map.getBearing(),Vt=this._map.getPitch(),fr="";if(fr+=f?"/"+ye+"/"+Pe+"/"+p:p+"/"+Pe+"/"+ye,(ct||Vt)&&(fr+="/"+Math.round(10*ct)/10),Vt&&(fr+="/"+Math.round(Vt)),this._hashName){var Ir=this._hashName,Dr=!1,jr=l.window.location.hash.slice(1).split("&").map(function(En){var gn=En.split("=")[0];return gn===Ir?(Dr=!0,gn+"="+fr):En}).filter(function(En){return En});return Dr||jr.push(Ir+"="+fr),"#"+jr.join("&")}return"#"+fr},tl.prototype._getCurrentHash=function(){var f,g=this,p=l.window.location.hash.replace("#","");return this._hashName?(p.split("&").map(function(E){return E.split("=")}).forEach(function(E){E[0]===g._hashName&&(f=E)}),(f&&f[1]||"").split("/")):p.split("/")},tl.prototype._onHashChange=function(){var f=this._getCurrentHash();if(f.length>=3&&!f.some(function(p){return isNaN(p)})){var g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:g,pitch:+(f[4]||0)}),!0}return!1},tl.prototype._updateHashUnthrottled=function(){var f=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,f)}catch(g){}};var al={linearity:.3,easing:l.bezier(0,0,.3,1)},Tl=l.extend({deceleration:2500,maxSpeed:1400},al),Lh=l.extend({deceleration:20,maxSpeed:1400},al),xf=l.extend({deceleration:1e3,maxSpeed:360},al),Qh=l.extend({deceleration:1e3,maxSpeed:90},al),$h=function(f){this._map=f,this.clear()};function Ul(f,g){(!f.duration||f.duration<g.duration)&&(f.duration=g.duration,f.easing=g.easing)}function Rl(f,g,p){var E=p.maxSpeed,Y=p.linearity,ye=p.deceleration,Pe=l.clamp(f*Y/(g/1e3),-E,E),ct=Math.abs(Pe)/(ye*Y);return{easing:p.easing,duration:1e3*ct,amount:Pe*(ct/2)}}$h.prototype.clear=function(){this._inertiaBuffer=[]},$h.prototype.record=function(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:f})},$h.prototype._drainInertiaBuffer=function(){for(var f=this._inertiaBuffer,g=l.browser.now();f.length>0&&g-f[0].time>160;)f.shift()},$h.prototype._onMoveEnd=function(f){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var g={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},p=0,E=this._inertiaBuffer;p<E.length;p+=1){var Y=E[p].settings;g.zoom+=Y.zoomDelta||0,g.bearing+=Y.bearingDelta||0,g.pitch+=Y.pitchDelta||0,Y.panDelta&&g.pan._add(Y.panDelta),Y.around&&(g.around=Y.around),Y.pinchAround&&(g.pinchAround=Y.pinchAround)}var ye=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Pe={};if(g.pan.mag()){var ct=Rl(g.pan.mag(),ye,l.extend({},Tl,f||{}));Pe.offset=g.pan.mult(ct.amount/g.pan.mag()),Pe.center=this._map.transform.center,Ul(Pe,ct)}if(g.zoom){var Vt=Rl(g.zoom,ye,Lh);Pe.zoom=this._map.transform.zoom+Vt.amount,Ul(Pe,Vt)}if(g.bearing){var fr=Rl(g.bearing,ye,xf);Pe.bearing=this._map.transform.bearing+l.clamp(fr.amount,-179,179),Ul(Pe,fr)}if(g.pitch){var Ir=Rl(g.pitch,ye,Qh);Pe.pitch=this._map.transform.pitch+Ir.amount,Ul(Pe,Ir)}if(Pe.zoom||Pe.bearing){var Dr=g.pinchAround===void 0?g.around:g.pinchAround;Pe.around=Dr?this._map.unproject(Dr):this._map.getCenter()}return this.clear(),l.extend(Pe,{noMoveStart:!0})}};var ol=function(f){function g(E,Y,ye,Pe){Pe===void 0&&(Pe={});var ct=R.mousePos(Y.getCanvasContainer(),ye),Vt=Y.unproject(ct);f.call(this,E,l.extend({point:ct,lngLat:Vt,originalEvent:ye},Pe)),this._defaultPrevented=!1,this.target=Y}f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g;var p={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,p),g}(l.Event),uu=function(f){function g(E,Y,ye){var Pe=E==="touchend"?ye.changedTouches:ye.touches,ct=R.touchPos(Y.getCanvasContainer(),Pe),Vt=ct.map(function(Dr){return Y.unproject(Dr)}),fr=ct.reduce(function(Dr,jr,En,gn){return Dr.add(jr.div(gn.length))},new l.Point(0,0)),Ir=Y.unproject(fr);f.call(this,E,{points:ct,point:fr,lngLats:Vt,lngLat:Ir,originalEvent:ye}),this._defaultPrevented=!1}f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g;var p={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,p),g}(l.Event),Bc=function(f){function g(E,Y,ye){f.call(this,E,{originalEvent:ye}),this._defaultPrevented=!1}f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g;var p={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},p.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,p),g}(l.Event),cc=function(f,g){this._map=f,this._clickTolerance=g.clickTolerance};cc.prototype.reset=function(){delete this._mousedownPos},cc.prototype.wheel=function(f){return this._firePreventable(new Bc(f.type,this._map,f))},cc.prototype.mousedown=function(f,g){return this._mousedownPos=g,this._firePreventable(new ol(f.type,this._map,f))},cc.prototype.mouseup=function(f){this._map.fire(new ol(f.type,this._map,f))},cc.prototype.click=function(f,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||this._map.fire(new ol(f.type,this._map,f))},cc.prototype.dblclick=function(f){return this._firePreventable(new ol(f.type,this._map,f))},cc.prototype.mouseover=function(f){this._map.fire(new ol(f.type,this._map,f))},cc.prototype.mouseout=function(f){this._map.fire(new ol(f.type,this._map,f))},cc.prototype.touchstart=function(f){return this._firePreventable(new uu(f.type,this._map,f))},cc.prototype.touchmove=function(f){this._map.fire(new uu(f.type,this._map,f))},cc.prototype.touchend=function(f){this._map.fire(new uu(f.type,this._map,f))},cc.prototype.touchcancel=function(f){this._map.fire(new uu(f.type,this._map,f))},cc.prototype._firePreventable=function(f){if(this._map.fire(f),f.defaultPrevented)return{}},cc.prototype.isEnabled=function(){return!0},cc.prototype.isActive=function(){return!1},cc.prototype.enable=function(){},cc.prototype.disable=function(){};var ao=function(f){this._map=f};ao.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ao.prototype.mousemove=function(f){this._map.fire(new ol(f.type,this._map,f))},ao.prototype.mousedown=function(){this._delayContextMenu=!0},ao.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ol("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ao.prototype.contextmenu=function(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new ol(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()},ao.prototype.isEnabled=function(){return!0},ao.prototype.isActive=function(){return!1},ao.prototype.enable=function(){},ao.prototype.disable=function(){};var Ml=function(f,g){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=g.clickTolerance||1};function Hf(f,g){for(var p={},E=0;E<f.length;E++)p[f[E].identifier]=g[E];return p}Ml.prototype.isEnabled=function(){return!!this._enabled},Ml.prototype.isActive=function(){return!!this._active},Ml.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ml.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ml.prototype.mousedown=function(f,g){this.isEnabled()&&f.shiftKey&&f.button===0&&(R.disableDrag(),this._startPos=this._lastPos=g,this._active=!0)},Ml.prototype.mousemoveWindow=function(f,g){if(this._active){var p=g;if(!(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)){var E=this._startPos;this._lastPos=p,this._box||(this._box=R.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));var Y=Math.min(E.x,p.x),ye=Math.max(E.x,p.x),Pe=Math.min(E.y,p.y),ct=Math.max(E.y,p.y);R.setTransform(this._box,"translate("+Y+"px,"+Pe+"px)"),this._box.style.width=ye-Y+"px",this._box.style.height=ct-Pe+"px"}}},Ml.prototype.mouseupWindow=function(f,g){var p=this;if(this._active&&f.button===0){var E=this._startPos,Y=g;if(this.reset(),R.suppressClick(),E.x!==Y.x||E.y!==Y.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:function(ye){return ye.fitScreenCoordinates(E,Y,p._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",f)}},Ml.prototype.keydown=function(f){this._active&&f.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",f))},Ml.prototype.blur=function(){this.reset()},Ml.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos},Ml.prototype._fireEvent=function(f,g){return this._map.fire(new l.Event(f,{originalEvent:g}))};var fl=function(f){this.reset(),this.numTouches=f.numTouches};fl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},fl.prototype.touchstart=function(f,g,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=f.timeStamp),p.length===this.numTouches&&(this.centroid=function(E){for(var Y=new l.Point(0,0),ye=0,Pe=E;ye<Pe.length;ye+=1)Y._add(Pe[ye]);return Y.div(E.length)}(g),this.touches=Hf(p,g)))},fl.prototype.touchmove=function(f,g,p){if(!this.aborted&&this.centroid){var E=Hf(p,g);for(var Y in this.touches){var ye=E[Y];(!ye||ye.dist(this.touches[Y])>30)&&(this.aborted=!0)}}},fl.prototype.touchend=function(f,g,p){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){var E=!this.aborted&&this.centroid;if(this.reset(),E)return E}};var Vl=function(f){this.singleTap=new fl(f),this.numTaps=f.numTaps,this.reset()};Vl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Vl.prototype.touchstart=function(f,g,p){this.singleTap.touchstart(f,g,p)},Vl.prototype.touchmove=function(f,g,p){this.singleTap.touchmove(f,g,p)},Vl.prototype.touchend=function(f,g,p){var E=this.singleTap.touchend(f,g,p);if(E){var Y=f.timeStamp-this.lastTime<500,ye=!this.lastTap||this.lastTap.dist(E)<30;if(Y&&ye||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}};var Ll=function(){this._zoomIn=new Vl({numTouches:1,numTaps:2}),this._zoomOut=new Vl({numTouches:2,numTaps:1}),this.reset()};Ll.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ll.prototype.touchstart=function(f,g,p){this._zoomIn.touchstart(f,g,p),this._zoomOut.touchstart(f,g,p)},Ll.prototype.touchmove=function(f,g,p){this._zoomIn.touchmove(f,g,p),this._zoomOut.touchmove(f,g,p)},Ll.prototype.touchend=function(f,g,p){var E=this,Y=this._zoomIn.touchend(f,g,p),ye=this._zoomOut.touchend(f,g,p);return Y?(this._active=!0,f.preventDefault(),setTimeout(function(){return E.reset()},0),{cameraAnimation:function(Pe){return Pe.easeTo({duration:300,zoom:Pe.getZoom()+1,around:Pe.unproject(Y)},{originalEvent:f})}}):ye?(this._active=!0,f.preventDefault(),setTimeout(function(){return E.reset()},0),{cameraAnimation:function(Pe){return Pe.easeTo({duration:300,zoom:Pe.getZoom()-1,around:Pe.unproject(ye)},{originalEvent:f})}}):void 0},Ll.prototype.touchcancel=function(){this.reset()},Ll.prototype.enable=function(){this._enabled=!0},Ll.prototype.disable=function(){this._enabled=!1,this.reset()},Ll.prototype.isEnabled=function(){return this._enabled},Ll.prototype.isActive=function(){return this._active};var jh={0:1,2:2},Qa=function(f){this.reset(),this._clickTolerance=f.clickTolerance||1};Qa.prototype.blur=function(){this.reset()},Qa.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Qa.prototype._correctButton=function(f,g){return!1},Qa.prototype._move=function(f,g){return{}},Qa.prototype.mousedown=function(f,g){if(!this._lastPoint){var p=R.mouseButton(f);this._correctButton(f,p)&&(this._lastPoint=g,this._eventButton=p)}},Qa.prototype.mousemoveWindow=function(f,g){var p=this._lastPoint;if(p){if(f.preventDefault(),function(E,Y){var ye=jh[Y];return E.buttons===void 0||(E.buttons&ye)!==ye}(f,this._eventButton))this.reset();else if(this._moved||!(g.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(p,g)}},Qa.prototype.mouseupWindow=function(f){this._lastPoint&&R.mouseButton(f)===this._eventButton&&(this._moved&&R.suppressClick(),this.reset())},Qa.prototype.enable=function(){this._enabled=!0},Qa.prototype.disable=function(){this._enabled=!1,this.reset()},Qa.prototype.isEnabled=function(){return this._enabled},Qa.prototype.isActive=function(){return this._active};var Yl=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.mousedown=function(p,E){f.prototype.mousedown.call(this,p,E),this._lastPoint&&(this._active=!0)},g.prototype._correctButton=function(p,E){return E===0&&!p.ctrlKey},g.prototype._move=function(p,E){return{around:E,panDelta:E.sub(p)}},g}(Qa),Vf=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype._correctButton=function(p,E){return E===0&&p.ctrlKey||E===2},g.prototype._move=function(p,E){var Y=.8*(E.x-p.x);if(Y)return this._active=!0,{bearingDelta:Y}},g.prototype.contextmenu=function(p){p.preventDefault()},g}(Qa),ih=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype._correctButton=function(p,E){return E===0&&p.ctrlKey||E===2},g.prototype._move=function(p,E){var Y=-.5*(E.y-p.y);if(Y)return this._active=!0,{pitchDelta:Y}},g.prototype.contextmenu=function(p){p.preventDefault()},g}(Qa),Vu=function(f){this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset()};Vu.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Vu.prototype.touchstart=function(f,g,p){return this._calculateTransform(f,g,p)},Vu.prototype.touchmove=function(f,g,p){if(this._active&&!(p.length<this._minTouches))return f.preventDefault(),this._calculateTransform(f,g,p)},Vu.prototype.touchend=function(f,g,p){this._calculateTransform(f,g,p),this._active&&p.length<this._minTouches&&this.reset()},Vu.prototype.touchcancel=function(){this.reset()},Vu.prototype._calculateTransform=function(f,g,p){p.length>0&&(this._active=!0);var E=Hf(p,g),Y=new l.Point(0,0),ye=new l.Point(0,0),Pe=0;for(var ct in E){var Vt=E[ct],fr=this._touches[ct];fr&&(Y._add(Vt),ye._add(Vt.sub(fr)),Pe++,E[ct]=Vt)}if(this._touches=E,!(Pe<this._minTouches)&&ye.mag()){var Ir=ye.div(Pe);if(this._sum._add(Ir),!(this._sum.mag()<this._clickTolerance))return{around:Y.div(Pe),panDelta:Ir}}},Vu.prototype.enable=function(){this._enabled=!0},Vu.prototype.disable=function(){this._enabled=!1,this.reset()},Vu.prototype.isEnabled=function(){return this._enabled},Vu.prototype.isActive=function(){return this._active};var hf=function(){this.reset()};function Hh(f,g,p){for(var E=0;E<f.length;E++)if(f[E].identifier===p)return g[E]}function bc(f,g){return Math.log(f/g)/Math.LN2}hf.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},hf.prototype._start=function(f){},hf.prototype._move=function(f,g,p){return{}},hf.prototype.touchstart=function(f,g,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([g[0],g[1]]))},hf.prototype.touchmove=function(f,g,p){if(this._firstTwoTouches){f.preventDefault();var E=this._firstTwoTouches,Y=E[1],ye=Hh(p,g,E[0]),Pe=Hh(p,g,Y);if(ye&&Pe){var ct=this._aroundCenter?null:ye.add(Pe).div(2);return this._move([ye,Pe],ct,f)}}},hf.prototype.touchend=function(f,g,p){if(this._firstTwoTouches){var E=this._firstTwoTouches,Y=E[1],ye=Hh(p,g,E[0]),Pe=Hh(p,g,Y);ye&&Pe||(this._active&&R.suppressClick(),this.reset())}},hf.prototype.touchcancel=function(){this.reset()},hf.prototype.enable=function(f){this._enabled=!0,this._aroundCenter=!!f&&f.around==="center"},hf.prototype.disable=function(){this._enabled=!1,this.reset()},hf.prototype.isEnabled=function(){return this._enabled},hf.prototype.isActive=function(){return this._active};var Ec=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.reset=function(){f.prototype.reset.call(this),delete this._distance,delete this._startDistance},g.prototype._start=function(p){this._startDistance=this._distance=p[0].dist(p[1])},g.prototype._move=function(p,E){var Y=this._distance;if(this._distance=p[0].dist(p[1]),this._active||!(Math.abs(bc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bc(this._distance,Y),pinchAround:E}},g}(hf);function ah(f,g){return 180*f.angleWith(g)/Math.PI}var Wc=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.reset=function(){f.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},g.prototype._start=function(p){this._startVector=this._vector=p[0].sub(p[1]),this._minDiameter=p[0].dist(p[1])},g.prototype._move=function(p,E){var Y=this._vector;if(this._vector=p[0].sub(p[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ah(this._vector,Y),pinchAround:E}},g.prototype._isBelowThreshold=function(p){this._minDiameter=Math.min(this._minDiameter,p.mag());var E=25/(Math.PI*this._minDiameter)*360,Y=ah(p,this._startVector);return Math.abs(Y)<E},g}(hf);function Dh(f){return Math.abs(f.y)>Math.abs(f.x)}var Sc=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.reset=function(){f.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},g.prototype._start=function(p){this._lastPoints=p,Dh(p[0].sub(p[1]))&&(this._valid=!1)},g.prototype._move=function(p,E,Y){var ye=p[0].sub(this._lastPoints[0]),Pe=p[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ye,Pe,Y.timeStamp),this._valid)return this._lastPoints=p,this._active=!0,{pitchDelta:(ye.y+Pe.y)/2*-.5}},g.prototype.gestureBeginsVertically=function(p,E,Y){if(this._valid!==void 0)return this._valid;var ye=p.mag()>=2,Pe=E.mag()>=2;if(ye||Pe){if(!ye||!Pe)return this._firstMove===void 0&&(this._firstMove=Y),Y-this._firstMove<100&&void 0;var ct=p.y>0==E.y>0;return Dh(p)&&Dh(E)&&ct}},g}(hf),Vh={panStep:100,bearingStep:15,pitchStep:10},Ql=function(){var f=Vh;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1};function gu(f){return f*(2-f)}Ql.prototype.blur=function(){this.reset()},Ql.prototype.reset=function(){this._active=!1},Ql.prototype.keydown=function(f){var g=this;if(!(f.altKey||f.ctrlKey||f.metaKey)){var p=0,E=0,Y=0,ye=0,Pe=0;switch(f.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:f.shiftKey?E=-1:(f.preventDefault(),ye=-1);break;case 39:f.shiftKey?E=1:(f.preventDefault(),ye=1);break;case 38:f.shiftKey?Y=1:(f.preventDefault(),Pe=-1);break;case 40:f.shiftKey?Y=-1:(f.preventDefault(),Pe=1);break;default:return}return this._rotationDisabled&&(E=0,Y=0),{cameraAnimation:function(ct){var Vt=ct.getZoom();ct.easeTo({duration:300,easeId:"keyboardHandler",easing:gu,zoom:p?Math.round(Vt)+p*(f.shiftKey?2:1):Vt,bearing:ct.getBearing()+E*g._bearingStep,pitch:ct.getPitch()+Y*g._pitchStep,offset:[-ye*g._panStep,-Pe*g._panStep],center:ct.getCenter()},{originalEvent:f})}}}},Ql.prototype.enable=function(){this._enabled=!0},Ql.prototype.disable=function(){this._enabled=!1,this.reset()},Ql.prototype.isEnabled=function(){return this._enabled},Ql.prototype.isActive=function(){return this._active},Ql.prototype.disableRotation=function(){this._rotationDisabled=!0},Ql.prototype.enableRotation=function(){this._rotationDisabled=!1};var Ks=function(f,g){this._map=f,this._el=f.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};Ks.prototype.setZoomRate=function(f){this._defaultZoomRate=f},Ks.prototype.setWheelZoomRate=function(f){this._wheelZoomRate=f},Ks.prototype.isEnabled=function(){return!!this._enabled},Ks.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ks.prototype.isZooming=function(){return!!this._zooming},Ks.prototype.enable=function(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&f.around==="center")},Ks.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ks.prototype.wheel=function(f){if(this.isEnabled()){var g=f.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY,p=l.browser.now(),E=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,g!==0&&g%4.000244140625==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(E*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),f.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=f,this._delta-=g,this._active||this._start(f)),f.preventDefault()}},Ks.prototype._onTimeout=function(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},Ks.prototype._start=function(f){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var g=R.mousePos(this._el,f);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(g)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ks.prototype.renderFrame=function(){var f=this;if(this._frameId&&(this._frameId=null,this.isActive())){var g=this._map.transform;if(this._delta!==0){var p=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,E=2/(1+Math.exp(-Math.abs(this._delta*p)));this._delta<0&&E!==0&&(E=1/E);var Y=typeof this._targetZoom=="number"?g.zoomScale(this._targetZoom):g.scale;this._targetZoom=Math.min(g.maxZoom,Math.max(g.minZoom,g.scaleZoom(Y*E))),this._type==="wheel"&&(this._startZoom=g.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ye,Pe=typeof this._targetZoom=="number"?this._targetZoom:g.zoom,ct=this._startZoom,Vt=this._easing,fr=!1;if(this._type==="wheel"&&ct&&Vt){var Ir=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),Dr=Vt(Ir);ye=l.number(ct,Pe,Dr),Ir<1?this._frameId||(this._frameId=!0):fr=!0}else ye=Pe,fr=!0;return this._active=!0,fr&&(this._active=!1,this._finishTimeout=setTimeout(function(){f._zooming=!1,f._handler._triggerRenderFrame(),delete f._targetZoom,delete f._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!fr,zoomDelta:ye-g.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ks.prototype._smoothOutEasing=function(f){var g=l.ease;if(this._prevEase){var p=this._prevEase,E=(l.browser.now()-p.start)/p.duration,Y=p.easing(E+.01)-p.easing(E),ye=.27/Math.sqrt(Y*Y+1e-4)*.01,Pe=Math.sqrt(.0729-ye*ye);g=l.bezier(ye,Pe,.25,1)}return this._prevEase={start:l.browser.now(),duration:f,easing:g},g},Ks.prototype.blur=function(){this.reset()},Ks.prototype.reset=function(){this._active=!1};var Gf=function(f,g){this._clickZoom=f,this._tapZoom=g};Gf.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Gf.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Gf.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Gf.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Bf=function(){this.reset()};Bf.prototype.reset=function(){this._active=!1},Bf.prototype.blur=function(){this.reset()},Bf.prototype.dblclick=function(f,g){return f.preventDefault(),{cameraAnimation:function(p){p.easeTo({duration:300,zoom:p.getZoom()+(f.shiftKey?-1:1),around:p.unproject(g)},{originalEvent:f})}}},Bf.prototype.enable=function(){this._enabled=!0},Bf.prototype.disable=function(){this._enabled=!1,this.reset()},Bf.prototype.isEnabled=function(){return this._enabled},Bf.prototype.isActive=function(){return this._active};var eu=function(){this._tap=new Vl({numTouches:1,numTaps:1}),this.reset()};eu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},eu.prototype.touchstart=function(f,g,p){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=g[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(f,g,p))},eu.prototype.touchmove=function(f,g,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;var E=g[0],Y=E.y-this._swipePoint.y;return this._swipePoint=E,f.preventDefault(),this._active=!0,{zoomDelta:Y/128}}}else this._tap.touchmove(f,g,p)},eu.prototype.touchend=function(f,g,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(f,g,p)&&(this._tapTime=f.timeStamp)},eu.prototype.touchcancel=function(){this.reset()},eu.prototype.enable=function(){this._enabled=!0},eu.prototype.disable=function(){this._enabled=!1,this.reset()},eu.prototype.isEnabled=function(){return this._enabled},eu.prototype.isActive=function(){return this._active};var Pl=function(f,g,p){this._el=f,this._mousePan=g,this._touchPan=p};Pl.prototype.enable=function(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Pl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Pl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Pl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Xc=function(f,g,p){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=g,this._mousePitch=p};Xc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Xc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Xc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Xc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Nc=function(f,g,p,E){this._el=f,this._touchZoom=g,this._touchRotate=p,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0};Nc.prototype.enable=function(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Nc.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Nc.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Nc.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Nc.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Nc.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Jl=function(f){return f.zoom||f.drag||f.pitch||f.rotate},fc=function(f){function g(){f.apply(this,arguments)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g}(l.Event);function oo(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}var ko=function(f,g){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $h(f),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(g),l.bindAll(["handleEvent","handleWindowEvent"],this);var p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[l.window,"blur",void 0]];for(var E=0,Y=this._listeners;E<Y.length;E+=1){var ye=Y[E],Pe=ye[0];R.addEventListener(Pe,ye[1],Pe===l.window.document?this.handleWindowEvent:this.handleEvent,ye[2])}};ko.prototype.destroy=function(){for(var f=0,g=this._listeners;f<g.length;f+=1){var p=g[f],E=p[0];R.removeEventListener(E,p[1],E===l.window.document?this.handleWindowEvent:this.handleEvent,p[2])}},ko.prototype._addDefaultHandlers=function(f){var g=this._map,p=g.getCanvasContainer();this._add("mapEvent",new cc(g,f));var E=g.boxZoom=new Ml(g,f);this._add("boxZoom",E);var Y=new Ll,ye=new Bf;g.doubleClickZoom=new Gf(ye,Y),this._add("tapZoom",Y),this._add("clickZoom",ye);var Pe=new eu;this._add("tapDragZoom",Pe);var ct=g.touchPitch=new Sc;this._add("touchPitch",ct);var Vt=new Vf(f),fr=new ih(f);g.dragRotate=new Xc(f,Vt,fr),this._add("mouseRotate",Vt,["mousePitch"]),this._add("mousePitch",fr,["mouseRotate"]);var Ir=new Yl(f),Dr=new Vu(f);g.dragPan=new Pl(p,Ir,Dr),this._add("mousePan",Ir),this._add("touchPan",Dr,["touchZoom","touchRotate"]);var jr=new Wc,En=new Ec;g.touchZoomRotate=new Nc(p,En,jr,Pe),this._add("touchRotate",jr,["touchPan","touchZoom"]),this._add("touchZoom",En,["touchPan","touchRotate"]);var gn=g.scrollZoom=new Ks(g,this);this._add("scrollZoom",gn,["mousePan"]);var Bn=g.keyboard=new Ql;this._add("keyboard",Bn),this._add("blockableMapEvent",new ao(g));for(var fn=0,Fn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];fn<Fn.length;fn+=1){var jn=Fn[fn];f.interactive&&f[jn]&&g[jn].enable(f[jn])}},ko.prototype._add=function(f,g,p){this._handlers.push({handlerName:f,handler:g,allowed:p}),this._handlersById[f]=g},ko.prototype.stop=function(f){if(!this._updatingCamera){for(var g=0,p=this._handlers;g<p.length;g+=1)p[g].handler.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}},ko.prototype.isActive=function(){for(var f=0,g=this._handlers;f<g.length;f+=1)if(g[f].handler.isActive())return!0;return!1},ko.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ko.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ko.prototype.isMoving=function(){return Boolean(Jl(this._eventsInProgress))||this.isZooming()},ko.prototype._blockedByActive=function(f,g,p){for(var E in f)if(E!==p&&(!g||g.indexOf(E)<0))return!0;return!1},ko.prototype.handleWindowEvent=function(f){this.handleEvent(f,f.type+"Window")},ko.prototype._getMapTouches=function(f){for(var g=[],p=0,E=f;p<E.length;p+=1){var Y=E[p];this._el.contains(Y.target)&&g.push(Y)}return g},ko.prototype.handleEvent=function(f,g){this._updatingCamera=!0;for(var p=f.type==="renderFrame"?void 0:f,E={needsRenderFrame:!1},Y={},ye={},Pe=f.touches?this._getMapTouches(f.touches):void 0,ct=Pe?R.touchPos(this._el,Pe):R.mousePos(this._el,f),Vt=0,fr=this._handlers;Vt<fr.length;Vt+=1){var Ir=fr[Vt],Dr=Ir.handlerName,jr=Ir.handler,En=Ir.allowed;if(jr.isEnabled()){var gn=void 0;this._blockedByActive(ye,En,Dr)?jr.reset():jr[g||f.type]&&(gn=jr[g||f.type](f,ct,Pe),this.mergeHandlerResult(E,Y,gn,Dr,p),gn&&gn.needsRenderFrame&&this._triggerRenderFrame()),(gn||jr.isActive())&&(ye[Dr]=jr)}}var Bn={};for(var fn in this._previousActiveHandlers)ye[fn]||(Bn[fn]=p);this._previousActiveHandlers=ye,(Object.keys(Bn).length||oo(E))&&(this._changes.push([E,Y,Bn]),this._triggerRenderFrame()),(Object.keys(ye).length||oo(E))&&this._map._stop(!0),this._updatingCamera=!1;var Fn=E.cameraAnimation;Fn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fn(this._map))},ko.prototype.mergeHandlerResult=function(f,g,p,E,Y){if(p){l.extend(f,p);var ye={handlerName:E,originalEvent:p.originalEvent||Y};p.zoomDelta!==void 0&&(g.zoom=ye),p.panDelta!==void 0&&(g.drag=ye),p.pitchDelta!==void 0&&(g.pitch=ye),p.bearingDelta!==void 0&&(g.rotate=ye)}},ko.prototype._applyChanges=function(){for(var f={},g={},p={},E=0,Y=this._changes;E<Y.length;E+=1){var ye=Y[E],Pe=ye[0],ct=ye[1],Vt=ye[2];Pe.panDelta&&(f.panDelta=(f.panDelta||new l.Point(0,0))._add(Pe.panDelta)),Pe.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+Pe.zoomDelta),Pe.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+Pe.bearingDelta),Pe.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+Pe.pitchDelta),Pe.around!==void 0&&(f.around=Pe.around),Pe.pinchAround!==void 0&&(f.pinchAround=Pe.pinchAround),Pe.noInertia&&(f.noInertia=Pe.noInertia),l.extend(g,ct),l.extend(p,Vt)}this._updateMapTransform(f,g,p),this._changes=[]},ko.prototype._updateMapTransform=function(f,g,p){var E=this._map,Y=E.transform;if(!oo(f))return this._fireEvents(g,p,!0);var ye=f.panDelta,Pe=f.zoomDelta,ct=f.bearingDelta,Vt=f.pitchDelta,fr=f.around,Ir=f.pinchAround;Ir!==void 0&&(fr=Ir),E._stop(!0),fr=fr||E.transform.centerPoint;var Dr=Y.pointLocation(ye?fr.sub(ye):fr);ct&&(Y.bearing+=ct),Vt&&(Y.pitch+=Vt),Pe&&(Y.zoom+=Pe),Y.setLocationAtPoint(Dr,fr),this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(g,p,!0)},ko.prototype._fireEvents=function(f,g,p){var E=this,Y=Jl(this._eventsInProgress),ye=Jl(f),Pe={};for(var ct in f)this._eventsInProgress[ct]||(Pe[ct+"start"]=f[ct].originalEvent),this._eventsInProgress[ct]=f[ct];for(var Vt in!Y&&ye&&this._fireEvent("movestart",ye.originalEvent),Pe)this._fireEvent(Vt,Pe[Vt]);for(var fr in ye&&this._fireEvent("move",ye.originalEvent),f)this._fireEvent(fr,f[fr].originalEvent);var Ir,Dr={};for(var jr in this._eventsInProgress){var En=this._eventsInProgress[jr],gn=En.handlerName,Bn=En.originalEvent;this._handlersById[gn].isActive()||(delete this._eventsInProgress[jr],Dr[jr+"end"]=Ir=g[gn]||Bn)}for(var fn in Dr)this._fireEvent(fn,Dr[fn]);var Fn=Jl(this._eventsInProgress);if(p&&(Y||ye)&&!Fn){this._updatingCamera=!0;var jn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),vi=function(ki){return ki!==0&&-E._bearingSnap<ki&&ki<E._bearingSnap};jn?(vi(jn.bearing||this._map.getBearing())&&(jn.bearing=0),this._map.easeTo(jn,{originalEvent:Ir})):(this._map.fire(new l.Event("moveend",{originalEvent:Ir})),vi(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ko.prototype._fireEvent=function(f,g){this._map.fire(new l.Event(f,g?{originalEvent:g}:{}))},ko.prototype._requestFrame=function(){var f=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(g){delete f._frameId,f.handleEvent(new fc("renderFrame",{timeStamp:g})),f._applyChanges()})},ko.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var nu=function(f){function g(p,E){f.call(this),this._moving=!1,this._zooming=!1,this.transform=p,this._bearingSnap=E.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},g.prototype.setCenter=function(p,E){return this.jumpTo({center:p},E)},g.prototype.panBy=function(p,E,Y){return p=l.Point.convert(p).mult(-1),this.panTo(this.transform.center,l.extend({offset:p},E),Y)},g.prototype.panTo=function(p,E,Y){return this.easeTo(l.extend({center:p},E),Y)},g.prototype.getZoom=function(){return this.transform.zoom},g.prototype.setZoom=function(p,E){return this.jumpTo({zoom:p},E),this},g.prototype.zoomTo=function(p,E,Y){return this.easeTo(l.extend({zoom:p},E),Y)},g.prototype.zoomIn=function(p,E){return this.zoomTo(this.getZoom()+1,p,E),this},g.prototype.zoomOut=function(p,E){return this.zoomTo(this.getZoom()-1,p,E),this},g.prototype.getBearing=function(){return this.transform.bearing},g.prototype.setBearing=function(p,E){return this.jumpTo({bearing:p},E),this},g.prototype.getPadding=function(){return this.transform.padding},g.prototype.setPadding=function(p,E){return this.jumpTo({padding:p},E),this},g.prototype.rotateTo=function(p,E,Y){return this.easeTo(l.extend({bearing:p},E),Y)},g.prototype.resetNorth=function(p,E){return this.rotateTo(0,l.extend({duration:1e3},p),E),this},g.prototype.resetNorthPitch=function(p,E){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},p),E),this},g.prototype.snapToNorth=function(p,E){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(p,E):this},g.prototype.getPitch=function(){return this.transform.pitch},g.prototype.setPitch=function(p,E){return this.jumpTo({pitch:p},E),this},g.prototype.cameraForBounds=function(p,E){p=l.LngLatBounds.convert(p);var Y=E&&E.bearing||0;return this._cameraForBoxAndBearing(p.getNorthWest(),p.getSouthEast(),Y,E)},g.prototype._cameraForBoxAndBearing=function(p,E,Y,ye){var Pe={top:0,bottom:0,right:0,left:0};if(typeof(ye=l.extend({padding:Pe,offset:[0,0],maxZoom:this.transform.maxZoom},ye)).padding=="number"){var ct=ye.padding;ye.padding={top:ct,bottom:ct,right:ct,left:ct}}ye.padding=l.extend(Pe,ye.padding);var Vt=this.transform,fr=Vt.padding,Ir=Vt.project(l.LngLat.convert(p)),Dr=Vt.project(l.LngLat.convert(E)),jr=Ir.rotate(-Y*Math.PI/180),En=Dr.rotate(-Y*Math.PI/180),gn=new l.Point(Math.max(jr.x,En.x),Math.max(jr.y,En.y)),Bn=new l.Point(Math.min(jr.x,En.x),Math.min(jr.y,En.y)),fn=gn.sub(Bn),Fn=(Vt.width-(fr.left+fr.right+ye.padding.left+ye.padding.right))/fn.x,jn=(Vt.height-(fr.top+fr.bottom+ye.padding.top+ye.padding.bottom))/fn.y;if(!(jn<0||Fn<0)){var vi=Math.min(Vt.scaleZoom(Vt.scale*Math.min(Fn,jn)),ye.maxZoom),ki=typeof ye.offset.x=="number"?new l.Point(ye.offset.x,ye.offset.y):l.Point.convert(ye.offset),Ti=new l.Point((ye.padding.left-ye.padding.right)/2,(ye.padding.top-ye.padding.bottom)/2).rotate(Y*Math.PI/180),Fi=ki.add(Ti).mult(Vt.scale/Vt.zoomScale(vi));return{center:Vt.unproject(Ir.add(Dr).div(2).sub(Fi)),zoom:vi,bearing:Y}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},g.prototype.fitBounds=function(p,E,Y){return this._fitInternal(this.cameraForBounds(p,E),E,Y)},g.prototype.fitScreenCoordinates=function(p,E,Y,ye,Pe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(p)),this.transform.pointLocation(l.Point.convert(E)),Y,ye),ye,Pe)},g.prototype._fitInternal=function(p,E,Y){return p?(delete(E=l.extend(p,E)).padding,E.linear?this.easeTo(E,Y):this.flyTo(E,Y)):this},g.prototype.jumpTo=function(p,E){this.stop();var Y=this.transform,ye=!1,Pe=!1,ct=!1;return"zoom"in p&&Y.zoom!==+p.zoom&&(ye=!0,Y.zoom=+p.zoom),p.center!==void 0&&(Y.center=l.LngLat.convert(p.center)),"bearing"in p&&Y.bearing!==+p.bearing&&(Pe=!0,Y.bearing=+p.bearing),"pitch"in p&&Y.pitch!==+p.pitch&&(ct=!0,Y.pitch=+p.pitch),p.padding==null||Y.isPaddingEqual(p.padding)||(Y.padding=p.padding),this.fire(new l.Event("movestart",E)).fire(new l.Event("move",E)),ye&&this.fire(new l.Event("zoomstart",E)).fire(new l.Event("zoom",E)).fire(new l.Event("zoomend",E)),Pe&&this.fire(new l.Event("rotatestart",E)).fire(new l.Event("rotate",E)).fire(new l.Event("rotateend",E)),ct&&this.fire(new l.Event("pitchstart",E)).fire(new l.Event("pitch",E)).fire(new l.Event("pitchend",E)),this.fire(new l.Event("moveend",E))},g.prototype.easeTo=function(p,E){var Y=this;this._stop(!1,p.easeId),((p=l.extend({offset:[0,0],duration:500,easing:l.ease},p)).animate===!1||!p.essential&&l.browser.prefersReducedMotion)&&(p.duration=0);var ye=this.transform,Pe=this.getZoom(),ct=this.getBearing(),Vt=this.getPitch(),fr=this.getPadding(),Ir="zoom"in p?+p.zoom:Pe,Dr="bearing"in p?this._normalizeBearing(p.bearing,ct):ct,jr="pitch"in p?+p.pitch:Vt,En="padding"in p?p.padding:ye.padding,gn=l.Point.convert(p.offset),Bn=ye.centerPoint.add(gn),fn=ye.pointLocation(Bn),Fn=l.LngLat.convert(p.center||fn);this._normalizeCenter(Fn);var jn,vi,ki=ye.project(fn),Ti=ye.project(Fn).sub(ki),Fi=ye.zoomScale(Ir-Pe);p.around&&(jn=l.LngLat.convert(p.around),vi=ye.locationPoint(jn));var na={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ir!==Pe,this._rotating=this._rotating||ct!==Dr,this._pitching=this._pitching||jr!==Vt,this._padding=!ye.isPaddingEqual(En),this._easeId=p.easeId,this._prepareEase(E,p.noMoveStart,na),this._ease(function(ka){if(Y._zooming&&(ye.zoom=l.number(Pe,Ir,ka)),Y._rotating&&(ye.bearing=l.number(ct,Dr,ka)),Y._pitching&&(ye.pitch=l.number(Vt,jr,ka)),Y._padding&&(ye.interpolatePadding(fr,En,ka),Bn=ye.centerPoint.add(gn)),jn)ye.setLocationAtPoint(jn,vi);else{var Na=ye.zoomScale(ye.zoom-Pe),po=Ir>Pe?Math.min(2,Fi):Math.max(.5,Fi),No=Math.pow(po,1-ka),is=ye.unproject(ki.add(Ti.mult(ka*No)).mult(Na));ye.setLocationAtPoint(ye.renderWorldCopies?is.wrap():is,Bn)}Y._fireMoveEvents(E)},function(ka){Y._afterEase(E,ka)},p),this},g.prototype._prepareEase=function(p,E,Y){Y===void 0&&(Y={}),this._moving=!0,E||Y.moving||this.fire(new l.Event("movestart",p)),this._zooming&&!Y.zooming&&this.fire(new l.Event("zoomstart",p)),this._rotating&&!Y.rotating&&this.fire(new l.Event("rotatestart",p)),this._pitching&&!Y.pitching&&this.fire(new l.Event("pitchstart",p))},g.prototype._fireMoveEvents=function(p){this.fire(new l.Event("move",p)),this._zooming&&this.fire(new l.Event("zoom",p)),this._rotating&&this.fire(new l.Event("rotate",p)),this._pitching&&this.fire(new l.Event("pitch",p))},g.prototype._afterEase=function(p,E){if(!this._easeId||!E||this._easeId!==E){delete this._easeId;var Y=this._zooming,ye=this._rotating,Pe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Y&&this.fire(new l.Event("zoomend",p)),ye&&this.fire(new l.Event("rotateend",p)),Pe&&this.fire(new l.Event("pitchend",p)),this.fire(new l.Event("moveend",p))}},g.prototype.flyTo=function(p,E){var Y=this;if(!p.essential&&l.browser.prefersReducedMotion){var ye=l.pick(p,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ye,E)}this.stop(),p=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},p);var Pe=this.transform,ct=this.getZoom(),Vt=this.getBearing(),fr=this.getPitch(),Ir=this.getPadding(),Dr="zoom"in p?l.clamp(+p.zoom,Pe.minZoom,Pe.maxZoom):ct,jr="bearing"in p?this._normalizeBearing(p.bearing,Vt):Vt,En="pitch"in p?+p.pitch:fr,gn="padding"in p?p.padding:Pe.padding,Bn=Pe.zoomScale(Dr-ct),fn=l.Point.convert(p.offset),Fn=Pe.centerPoint.add(fn),jn=Pe.pointLocation(Fn),vi=l.LngLat.convert(p.center||jn);this._normalizeCenter(vi);var ki=Pe.project(jn),Ti=Pe.project(vi).sub(ki),Fi=p.curve,na=Math.max(Pe.width,Pe.height),ka=na/Bn,Na=Ti.mag();if("minZoom"in p){var po=l.clamp(Math.min(p.minZoom,ct,Dr),Pe.minZoom,Pe.maxZoom),No=na/Pe.zoomScale(po-ct);Fi=Math.sqrt(No/Na*2)}var is=Fi*Fi;function rs(ws){var _s=(ka*ka-na*na+(ws?-1:1)*is*is*Na*Na)/(2*(ws?ka:na)*is*Na);return Math.log(Math.sqrt(_s*_s+1)-_s)}function Ls(ws){return(Math.exp(ws)-Math.exp(-ws))/2}function vo(ws){return(Math.exp(ws)+Math.exp(-ws))/2}var ds=rs(0),Ns=function(ws){return vo(ds)/vo(ds+Fi*ws)},cs=function(ws){return na*((vo(ds)*(Ls(_s=ds+Fi*ws)/vo(_s))-Ls(ds))/is)/Na;var _s},Jo=(rs(1)-ds)/Fi;if(Math.abs(Na)<1e-6||!isFinite(Jo)){if(Math.abs(na-ka)<1e-6)return this.easeTo(p,E);var $s=ka<na?-1:1;Jo=Math.abs(Math.log(ka/na))/Fi,cs=function(){return 0},Ns=function(ws){return Math.exp($s*Fi*ws)}}return p.duration="duration"in p?+p.duration:1e3*Jo/("screenSpeed"in p?+p.screenSpeed/Fi:+p.speed),p.maxDuration&&p.duration>p.maxDuration&&(p.duration=0),this._zooming=!0,this._rotating=Vt!==jr,this._pitching=En!==fr,this._padding=!Pe.isPaddingEqual(gn),this._prepareEase(E,!1),this._ease(function(ws){var _s=ws*Jo,El=1/Ns(_s);Pe.zoom=ws===1?Dr:ct+Pe.scaleZoom(El),Y._rotating&&(Pe.bearing=l.number(Vt,jr,ws)),Y._pitching&&(Pe.pitch=l.number(fr,En,ws)),Y._padding&&(Pe.interpolatePadding(Ir,gn,ws),Fn=Pe.centerPoint.add(fn));var nl=ws===1?vi:Pe.unproject(ki.add(Ti.mult(cs(_s))).mult(El));Pe.setLocationAtPoint(Pe.renderWorldCopies?nl.wrap():nl,Fn),Y._fireMoveEvents(E)},function(){return Y._afterEase(E)},p),this},g.prototype.isEasing=function(){return!!this._easeFrameId},g.prototype.stop=function(){return this._stop()},g.prototype._stop=function(p,E){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Y=this._onEaseEnd;delete this._onEaseEnd,Y.call(this,E)}if(!p){var ye=this.handlers;ye&&ye.stop(!1)}return this},g.prototype._ease=function(p,E,Y){Y.animate===!1||Y.duration===0?(p(1),E()):(this._easeStart=l.browser.now(),this._easeOptions=Y,this._onEaseFrame=p,this._onEaseEnd=E,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},g.prototype._renderFrameCallback=function(){var p=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},g.prototype._normalizeBearing=function(p,E){p=l.wrap(p,-180,180);var Y=Math.abs(p-E);return Math.abs(p-360-E)<Y&&(p-=360),Math.abs(p+360-E)<Y&&(p+=360),p},g.prototype._normalizeCenter=function(p){var E=this.transform;if(E.renderWorldCopies&&!E.lngRange){var Y=p.lng-E.center.lng;p.lng+=Y>180?-360:Y<-180?360:0}},g}(l.Evented),ql=function(f){f===void 0&&(f={}),this.options=f,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ql.prototype.getDefaultPosition=function(){return"bottom-right"},ql.prototype.onAdd=function(f){var g=this.options&&this.options.compact;return this._map=f,this._container=R.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=R.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),g===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ql.prototype.onRemove=function(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ql.prototype._setElementTitle=function(f,g){var p=this._map._getUIString("AttributionControl."+g);f.title=p,f.setAttribute("aria-label",p)},ql.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ql.prototype._updateEditLink=function(){var f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));var g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(f){var p=g.reduce(function(E,Y,ye){return Y.value&&(E+=Y.key+"="+Y.value+(ye<g.length-1?"&":"")),E},"?");f.href=l.config.FEEDBACK_URL+"/"+p+(this._map._hash?this._map._hash.getHashString(!0):""),f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}},ql.prototype._updateData=function(f){!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ql.prototype._updateAttributions=function(){if(this._map.style){var f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map(function(ct){return typeof ct!="string"?"":ct})):typeof this.options.customAttribution=="string"&&f.push(this.options.customAttribution)),this._map.style.stylesheet){var g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}var p=this._map.style.sourceCaches;for(var E in p){var Y=p[E];if(Y.used){var ye=Y.getSource();ye.attribution&&f.indexOf(ye.attribution)<0&&f.push(ye.attribution)}}f.sort(function(ct,Vt){return ct.length-Vt.length});var Pe=(f=f.filter(function(ct,Vt){for(var fr=Vt+1;fr<f.length;fr++)if(f[fr].indexOf(ct)>=0)return!1;return!0})).join(" | ");Pe!==this._attribHTML&&(this._attribHTML=Pe,f.length?(this._innerContainer.innerHTML=Pe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ql.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var xl=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};xl.prototype.onAdd=function(f){this._map=f,this._container=R.create("div","mapboxgl-ctrl");var g=R.create("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},xl.prototype.onRemove=function(){R.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},xl.prototype.getDefaultPosition=function(){return"bottom-left"},xl.prototype._updateLogo=function(f){f&&f.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},xl.prototype._logoRequired=function(){if(this._map.style){var f=this._map.style.sourceCaches;for(var g in f)if(f[g].getSource().mapbox_logo)return!0;return!1}},xl.prototype._updateCompact=function(){var f=this._container.children;if(f.length){var g=f[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}};var mu=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};mu.prototype.add=function(f){var g=++this._id;return this._queue.push({callback:f,id:g,cancelled:!1}),g},mu.prototype.remove=function(f){for(var g=this._currentlyRunning,p=0,E=g?this._queue.concat(g):this._queue;p<E.length;p+=1){var Y=E[p];if(Y.id===f)return void(Y.cancelled=!0)}},mu.prototype.run=function(f){f===void 0&&(f=0);var g=this._currentlyRunning=this._queue;this._queue=[];for(var p=0,E=g;p<E.length;p+=1){var Y=E[p];if(!Y.cancelled&&(Y.callback(f),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},mu.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ku={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Kc=l.window.HTMLImageElement,Gh=l.window.HTMLElement,Yu=l.window.ImageBitmap,bl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},yd=function(f){function g(E){var Y=this;if((E=l.extend({},bl,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ye=new lo(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies);if(f.call(this,ye,E),this._interactive=E.interactive,this._maxTileCacheSize=E.maxTileCacheSize,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new mu,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Ku,E.locale),this._clickTolerance=E.clickTolerance,this._requestManager=new l.RequestManager(E.transformRequest,E.accessToken),typeof E.container=="string"){if(this._container=l.window.document.getElementById(E.container),!this._container)throw new Error("Container '"+E.container+"' not found.")}else{if(!(E.container instanceof Gh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Y._update(!1)}),this.on("moveend",function(){return Y._update(!1)}),this.on("zoom",function(){return Y._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ko(this,E),this._hash=E.hash&&new tl(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,l.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new ql({customAttribution:E.customAttribution})),this.addControl(new xl,E.logoPosition),this.on("style.load",function(){Y.transform.unmodified&&Y.jumpTo(Y.style.stylesheet)}),this.on("data",function(Pe){Y._update(Pe.dataType==="style"),Y.fire(new l.Event(Pe.dataType+"data",Pe))}),this.on("dataloading",function(Pe){Y.fire(new l.Event(Pe.dataType+"dataloading",Pe))})}f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g;var p={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return g.prototype._getMapId=function(){return this._mapId},g.prototype.addControl=function(E,Y){if(Y===void 0&&(Y=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ye=E.onAdd(this);this._controls.push(E);var Pe=this._controlPositions[Y];return Y.indexOf("bottom")!==-1?Pe.insertBefore(ye,Pe.firstChild):Pe.appendChild(ye),this},g.prototype.removeControl=function(E){if(!E||!E.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Y=this._controls.indexOf(E);return Y>-1&&this._controls.splice(Y,1),E.onRemove(this),this},g.prototype.hasControl=function(E){return this._controls.indexOf(E)>-1},g.prototype.resize=function(E){var Y=this._containerDimensions(),ye=Y[0],Pe=Y[1];if(ye===this.transform.width&&Pe===this.transform.height)return this;this._resizeCanvas(ye,Pe),this.transform.resize(ye,Pe),this.painter.resize(ye,Pe);var ct=!this._moving;return ct&&this.fire(new l.Event("movestart",E)).fire(new l.Event("move",E)),this.fire(new l.Event("resize",E)),ct&&this.fire(new l.Event("moveend",E)),this},g.prototype.getBounds=function(){return this.transform.getBounds()},g.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},g.prototype.setMaxBounds=function(E){return this.transform.setMaxBounds(l.LngLatBounds.convert(E)),this._update()},g.prototype.setMinZoom=function(E){if((E=E==null?-2:E)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},g.prototype.getMinZoom=function(){return this.transform.minZoom},g.prototype.setMaxZoom=function(E){if((E=E==null?22:E)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")},g.prototype.getMaxZoom=function(){return this.transform.maxZoom},g.prototype.setMinPitch=function(E){if((E=E==null?0:E)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},g.prototype.getMinPitch=function(){return this.transform.minPitch},g.prototype.setMaxPitch=function(E){if((E=E==null?60:E)>60)throw new Error("maxPitch must be less than or equal to 60");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")},g.prototype.getMaxPitch=function(){return this.transform.maxPitch},g.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},g.prototype.setRenderWorldCopies=function(E){return this.transform.renderWorldCopies=E,this._update()},g.prototype.project=function(E){return this.transform.locationPoint(l.LngLat.convert(E))},g.prototype.unproject=function(E){return this.transform.pointLocation(l.Point.convert(E))},g.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},g.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},g.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},g.prototype._createDelegatedListener=function(E,Y,ye){var Pe,ct=this;if(E==="mouseenter"||E==="mouseover"){var Vt=!1;return{layer:Y,listener:ye,delegates:{mousemove:function(Ir){var Dr=ct.getLayer(Y)?ct.queryRenderedFeatures(Ir.point,{layers:[Y]}):[];Dr.length?Vt||(Vt=!0,ye.call(ct,new ol(E,ct,Ir.originalEvent,{features:Dr}))):Vt=!1},mouseout:function(){Vt=!1}}}}if(E==="mouseleave"||E==="mouseout"){var fr=!1;return{layer:Y,listener:ye,delegates:{mousemove:function(Ir){(ct.getLayer(Y)?ct.queryRenderedFeatures(Ir.point,{layers:[Y]}):[]).length?fr=!0:fr&&(fr=!1,ye.call(ct,new ol(E,ct,Ir.originalEvent)))},mouseout:function(Ir){fr&&(fr=!1,ye.call(ct,new ol(E,ct,Ir.originalEvent)))}}}}return{layer:Y,listener:ye,delegates:(Pe={},Pe[E]=function(Ir){var Dr=ct.getLayer(Y)?ct.queryRenderedFeatures(Ir.point,{layers:[Y]}):[];Dr.length&&(Ir.features=Dr,ye.call(ct,Ir),delete Ir.features)},Pe)}},g.prototype.on=function(E,Y,ye){if(ye===void 0)return f.prototype.on.call(this,E,Y);var Pe=this._createDelegatedListener(E,Y,ye);for(var ct in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(Pe),Pe.delegates)this.on(ct,Pe.delegates[ct]);return this},g.prototype.once=function(E,Y,ye){if(ye===void 0)return f.prototype.once.call(this,E,Y);var Pe=this._createDelegatedListener(E,Y,ye);for(var ct in Pe.delegates)this.once(ct,Pe.delegates[ct]);return this},g.prototype.off=function(E,Y,ye){var Pe=this;return ye===void 0?f.prototype.off.call(this,E,Y):(this._delegatedListeners&&this._delegatedListeners[E]&&function(ct){for(var Vt=ct[E],fr=0;fr<Vt.length;fr++){var Ir=Vt[fr];if(Ir.layer===Y&&Ir.listener===ye){for(var Dr in Ir.delegates)Pe.off(Dr,Ir.delegates[Dr]);return Vt.splice(fr,1),Pe}}}(this._delegatedListeners),this)},g.prototype.queryRenderedFeatures=function(E,Y){if(!this.style)return[];var ye;if(Y!==void 0||E===void 0||E instanceof l.Point||Array.isArray(E)||(Y=E,E=void 0),Y=Y||{},(E=E||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof E[0]=="number")ye=[l.Point.convert(E)];else{var Pe=l.Point.convert(E[0]),ct=l.Point.convert(E[1]);ye=[Pe,new l.Point(ct.x,Pe.y),ct,new l.Point(Pe.x,ct.y),Pe]}return this.style.queryRenderedFeatures(ye,Y,this.transform)},g.prototype.querySourceFeatures=function(E,Y){return this.style.querySourceFeatures(E,Y)},g.prototype.setStyle=function(E,Y){return(Y=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Y)).diff!==!1&&Y.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,Y),this):(this._localIdeographFontFamily=Y.localIdeographFontFamily,this._updateStyle(E,Y))},g.prototype._getUIString=function(E){var Y=this._locale[E];if(Y==null)throw new Error("Missing UI string '"+E+"'");return Y},g.prototype._updateStyle=function(E,Y){return this.style&&(this.style.setEventedParent(null),this.style._remove()),E?(this.style=new qi(this,Y||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E):this.style.loadJSON(E),this):(delete this.style,this)},g.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},g.prototype._diffStyle=function(E,Y){var ye=this;if(typeof E=="string"){var Pe=this._requestManager.normalizeStyleURL(E),ct=this._requestManager.transformRequest(Pe,l.ResourceType.Style);l.getJSON(ct,function(Vt,fr){Vt?ye.fire(new l.ErrorEvent(Vt)):fr&&ye._updateDiff(fr,Y)})}else typeof E=="object"&&this._updateDiff(E,Y)},g.prototype._updateDiff=function(E,Y){try{this.style.setState(E)&&this._update(!0)}catch(ye){l.warnOnce("Unable to perform style diff: "+(ye.message||ye.error||ye)+".  Rebuilding the style from scratch."),this._updateStyle(E,Y)}},g.prototype.getStyle=function(){if(this.style)return this.style.serialize()},g.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},g.prototype.addSource=function(E,Y){return this._lazyInitEmptyStyle(),this.style.addSource(E,Y),this._update(!0)},g.prototype.isSourceLoaded=function(E){var Y=this.style&&this.style.sourceCaches[E];if(Y!==void 0)return Y.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+E+"'")))},g.prototype.areTilesLoaded=function(){var E=this.style&&this.style.sourceCaches;for(var Y in E){var ye=E[Y]._tiles;for(var Pe in ye){var ct=ye[Pe];if(ct.state!=="loaded"&&ct.state!=="errored")return!1}}return!0},g.prototype.addSourceType=function(E,Y,ye){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,Y,ye)},g.prototype.removeSource=function(E){return this.style.removeSource(E),this._update(!0)},g.prototype.getSource=function(E){return this.style.getSource(E)},g.prototype.addImage=function(E,Y,ye){ye===void 0&&(ye={});var Pe=ye.pixelRatio;Pe===void 0&&(Pe=1);var ct=ye.sdf;ct===void 0&&(ct=!1);var Vt=ye.stretchX,fr=ye.stretchY,Ir=ye.content;if(this._lazyInitEmptyStyle(),Y instanceof Kc||Yu&&Y instanceof Yu){var Dr=l.browser.getImageData(Y);this.style.addImage(E,{data:new l.RGBAImage({width:Dr.width,height:Dr.height},Dr.data),pixelRatio:Pe,stretchX:Vt,stretchY:fr,content:Ir,sdf:ct,version:0})}else{if(Y.width===void 0||Y.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var jr=Y;this.style.addImage(E,{data:new l.RGBAImage({width:Y.width,height:Y.height},new Uint8Array(Y.data)),pixelRatio:Pe,stretchX:Vt,stretchY:fr,content:Ir,sdf:ct,version:0,userImage:jr}),jr.onAdd&&jr.onAdd(this,E)}},g.prototype.updateImage=function(E,Y){var ye=this.style.getImage(E);if(!ye)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Pe=Y instanceof Kc||Yu&&Y instanceof Yu?l.browser.getImageData(Y):Y,ct=Pe.width,Vt=Pe.height,fr=Pe.data;return ct===void 0||Vt===void 0?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ct!==ye.data.width||Vt!==ye.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ye.data.replace(fr,!(Y instanceof Kc||Yu&&Y instanceof Yu)),void this.style.updateImage(E,ye))},g.prototype.hasImage=function(E){return E?!!this.style.getImage(E):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},g.prototype.removeImage=function(E){this.style.removeImage(E)},g.prototype.loadImage=function(E,Y){l.getImage(this._requestManager.transformRequest(E,l.ResourceType.Image),Y)},g.prototype.listImages=function(){return this.style.listImages()},g.prototype.addLayer=function(E,Y){return this._lazyInitEmptyStyle(),this.style.addLayer(E,Y),this._update(!0)},g.prototype.moveLayer=function(E,Y){return this.style.moveLayer(E,Y),this._update(!0)},g.prototype.removeLayer=function(E){return this.style.removeLayer(E),this._update(!0)},g.prototype.getLayer=function(E){return this.style.getLayer(E)},g.prototype.setLayerZoomRange=function(E,Y,ye){return this.style.setLayerZoomRange(E,Y,ye),this._update(!0)},g.prototype.setFilter=function(E,Y,ye){return ye===void 0&&(ye={}),this.style.setFilter(E,Y,ye),this._update(!0)},g.prototype.getFilter=function(E){return this.style.getFilter(E)},g.prototype.setPaintProperty=function(E,Y,ye,Pe){return Pe===void 0&&(Pe={}),this.style.setPaintProperty(E,Y,ye,Pe),this._update(!0)},g.prototype.getPaintProperty=function(E,Y){return this.style.getPaintProperty(E,Y)},g.prototype.setLayoutProperty=function(E,Y,ye,Pe){return Pe===void 0&&(Pe={}),this.style.setLayoutProperty(E,Y,ye,Pe),this._update(!0)},g.prototype.getLayoutProperty=function(E,Y){return this.style.getLayoutProperty(E,Y)},g.prototype.setLight=function(E,Y){return Y===void 0&&(Y={}),this._lazyInitEmptyStyle(),this.style.setLight(E,Y),this._update(!0)},g.prototype.getLight=function(){return this.style.getLight()},g.prototype.setFeatureState=function(E,Y){return this.style.setFeatureState(E,Y),this._update()},g.prototype.removeFeatureState=function(E,Y){return this.style.removeFeatureState(E,Y),this._update()},g.prototype.getFeatureState=function(E){return this.style.getFeatureState(E)},g.prototype.getContainer=function(){return this._container},g.prototype.getCanvasContainer=function(){return this._canvasContainer},g.prototype.getCanvas=function(){return this._canvas},g.prototype._containerDimensions=function(){var E=0,Y=0;return this._container&&(E=this._container.clientWidth||400,Y=this._container.clientHeight||300),[E,Y]},g.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},g.prototype._setupContainer=function(){var E=this._container;E.classList.add("mapboxgl-map"),(this._missingCSSCanary=R.create("div","mapboxgl-canary",E)).style.visibility="hidden",this._detectMissingCSS();var Y=this._canvasContainer=R.create("div","mapboxgl-canvas-container",E);this._interactive&&Y.classList.add("mapboxgl-interactive"),this._canvas=R.create("canvas","mapboxgl-canvas",Y),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ye=this._containerDimensions();this._resizeCanvas(ye[0],ye[1]);var Pe=this._controlContainer=R.create("div","mapboxgl-control-container",E),ct=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Vt){ct[Vt]=R.create("div","mapboxgl-ctrl-"+Vt,Pe)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},g.prototype._resizeCanvas=function(E,Y){var ye=l.browser.devicePixelRatio||1;this._canvas.width=ye*E,this._canvas.height=ye*Y,this._canvas.style.width=E+"px",this._canvas.style.height=Y+"px"},g.prototype._setupPainter=function(){var E=l.extend({},$.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Y=this._canvas.getContext("webgl",E)||this._canvas.getContext("experimental-webgl",E);Y?(this.painter=new Qn(Y,this.transform),l.webpSupported.testSupport(Y)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},g.prototype._contextLost=function(E){E.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:E}))},g.prototype._contextRestored=function(E){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:E}))},g.prototype._onMapScroll=function(E){if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},g.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},g.prototype._update=function(E){return this.style?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this},g.prototype._requestRenderFrame=function(E){return this._update(),this._renderTaskQueue.add(E)},g.prototype._cancelRenderFrame=function(E){this._renderTaskQueue.remove(E)},g.prototype._render=function(E){var Y,ye=this,Pe=0,ct=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Y=ct.createQueryEXT(),ct.beginQueryEXT(ct.TIME_ELAPSED_EXT,Y),Pe=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),!this._removed){var Vt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var fr=this.transform.zoom,Ir=l.browser.now();this.style.zoomHistory.update(fr,Ir);var Dr=new l.EvaluationParameters(fr,{now:Ir,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),jr=Dr.crossFadingFactor();jr===1&&jr===this._crossFadingFactor||(Vt=!0,this._crossFadingFactor=jr),this.style.update(Dr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||Vt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var En=l.browser.now()-Pe;ct.endQueryEXT(ct.TIME_ELAPSED_EXT,Y),setTimeout(function(){var fn=ct.getQueryObjectEXT(Y,ct.QUERY_RESULT_EXT)/1e6;ct.deleteQueryEXT(Y),ye.fire(new l.Event("gpu-timing-frame",{cpuTime:En,gpuTime:fn}))},50)}if(this.listens("gpu-timing-layer")){var gn=this.painter.collectGpuTimers();setTimeout(function(){var fn=ye.painter.queryGpuTimers(gn);ye.fire(new l.Event("gpu-timing-layer",{layerTimes:fn}))},50)}var Bn=this._sourcesDirty||this._styleDirty||this._placementDirty;return Bn||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||Bn||(this._fullyLoaded=!0),this}},g.prototype.remove=function(){this._hash&&this._hash.remove();for(var E=0,Y=this._controls;E<Y.length;E+=1)Y[E].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var ye=this.painter.context.gl.getExtension("WEBGL_lose_context");ye&&ye.loseContext(),ph(this._canvasContainer),ph(this._controlContainer),ph(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},g.prototype.triggerRepaint=function(){var E=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(Y){E._frame=null,E._render(Y)}))},g.prototype._onWindowOnline=function(){this._update()},g.prototype._onWindowResize=function(E){this._trackResize&&this.resize({originalEvent:E})._update()},p.showTileBoundaries.get=function(){return!!this._showTileBoundaries},p.showTileBoundaries.set=function(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())},p.showPadding.get=function(){return!!this._showPadding},p.showPadding.set=function(E){this._showPadding!==E&&(this._showPadding=E,this._update())},p.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},p.showCollisionBoxes.set=function(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())},p.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},p.showOverdrawInspector.set=function(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())},p.repaint.get=function(){return!!this._repaint},p.repaint.set=function(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())},p.vertices.get=function(){return!!this._vertices},p.vertices.set=function(E){this._vertices=E,this._update()},g.prototype._setCacheLimits=function(E,Y){l.setCacheLimits(E,Y)},p.version.get=function(){return l.version},Object.defineProperties(g.prototype,p),g}(nu);function ph(f){f.parentNode&&f.parentNode.removeChild(f)}var Cc={showCompass:!0,showZoom:!0,visualizePitch:!1},Yc=function(f){var g=this;this.options=l.extend({},Cc,f),this._container=R.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(p){return p.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(p){return g._map.zoomIn({},{originalEvent:p})}),R.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(p){return g._map.zoomOut({},{originalEvent:p})}),R.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(p){g.options.visualizePitch?g._map.resetNorthPitch({},{originalEvent:p}):g._map.resetNorth({},{originalEvent:p})}),this._compassIcon=R.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Yc.prototype._updateZoomButtons=function(){var f=this._map.getZoom(),g=f===this._map.getMaxZoom(),p=f===this._map.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},Yc.prototype._rotateCompassArrow=function(){var f=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=f},Yc.prototype.onAdd=function(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dl(this._map,this._compass,this.options.visualizePitch)),this._container},Yc.prototype.onRemove=function(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Yc.prototype._createButton=function(f,g){var p=R.create("button",f,this._container);return p.type="button",p.addEventListener("click",g),p},Yc.prototype._setButtonTitle=function(f,g){var p=this._map._getUIString("NavigationControl."+g);f.title=p,f.setAttribute("aria-label",p)};var Dl=function(f,g,p){p===void 0&&(p=!1),this._clickTolerance=10,this.element=g,this.mouseRotate=new Vf({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,p&&(this.mousePitch=new ih({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),R.addEventListener(g,"mousedown",this.mousedown),R.addEventListener(g,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(g,"touchmove",this.touchmove),R.addEventListener(g,"touchend",this.touchend),R.addEventListener(g,"touchcancel",this.reset)};function Ur(f,g,p){if(f=new l.LngLat(f.lng,f.lat),g){var E=new l.LngLat(f.lng-360,f.lat),Y=new l.LngLat(f.lng+360,f.lat),ye=p.locationPoint(f).distSqr(g);p.locationPoint(E).distSqr(g)<ye?f=E:p.locationPoint(Y).distSqr(g)<ye&&(f=Y)}for(;Math.abs(f.lng-p.center.lng)>180;){var Pe=p.locationPoint(f);if(Pe.x>=0&&Pe.y>=0&&Pe.x<=p.width&&Pe.y<=p.height)break;f.lng>p.center.lng?f.lng-=360:f.lng+=360}return f}Dl.prototype.down=function(f,g){this.mouseRotate.mousedown(f,g),this.mousePitch&&this.mousePitch.mousedown(f,g),R.disableDrag()},Dl.prototype.move=function(f,g){var p=this.map,E=this.mouseRotate.mousemoveWindow(f,g);if(E&&E.bearingDelta&&p.setBearing(p.getBearing()+E.bearingDelta),this.mousePitch){var Y=this.mousePitch.mousemoveWindow(f,g);Y&&Y.pitchDelta&&p.setPitch(p.getPitch()+Y.pitchDelta)}},Dl.prototype.off=function(){var f=this.element;R.removeEventListener(f,"mousedown",this.mousedown),R.removeEventListener(f,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(f,"touchmove",this.touchmove),R.removeEventListener(f,"touchend",this.touchend),R.removeEventListener(f,"touchcancel",this.reset),this.offTemp()},Dl.prototype.offTemp=function(){R.enableDrag(),R.removeEventListener(l.window,"mousemove",this.mousemove),R.removeEventListener(l.window,"mouseup",this.mouseup)},Dl.prototype.mousedown=function(f){this.down(l.extend({},f,{ctrlKey:!0,preventDefault:function(){return f.preventDefault()}}),R.mousePos(this.element,f)),R.addEventListener(l.window,"mousemove",this.mousemove),R.addEventListener(l.window,"mouseup",this.mouseup)},Dl.prototype.mousemove=function(f){this.move(f,R.mousePos(this.element,f))},Dl.prototype.mouseup=function(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()},Dl.prototype.touchstart=function(f){f.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return f.preventDefault()}},this._startPos))},Dl.prototype.touchmove=function(f){f.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,f.targetTouches)[0],this.move({preventDefault:function(){return f.preventDefault()}},this._lastPos))},Dl.prototype.touchend=function(f){f.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Dl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var kl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Vo(f,g,p){var E=f.classList;for(var Y in kl)E.remove("mapboxgl-"+p+"-anchor-"+Y);E.add("mapboxgl-"+p+"-anchor-"+g)}var Qo,du=function(f){function g(p,E){if(f.call(this),(p instanceof l.window.HTMLElement||E)&&(p=l.extend({element:p},E)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=p&&p.anchor||"center",this._color=p&&p.color||"#3FB1CE",this._scale=p&&p.scale||1,this._draggable=p&&p.draggable||!1,this._clickTolerance=p&&p.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=p&&p.rotation||0,this._rotationAlignment=p&&p.rotationAlignment||"auto",this._pitchAlignment=p&&p.pitchAlignment&&p.pitchAlignment!=="auto"?p.pitchAlignment:this._rotationAlignment,p&&p.element)this._element=p.element,this._offset=l.Point.convert(p&&p.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div"),this._element.setAttribute("aria-label","Map marker");var Y=R.createNS("http://www.w3.org/2000/svg","svg");Y.setAttributeNS(null,"display","block"),Y.setAttributeNS(null,"height","41px"),Y.setAttributeNS(null,"width","27px"),Y.setAttributeNS(null,"viewBox","0 0 27 41");var ye=R.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"stroke","none"),ye.setAttributeNS(null,"stroke-width","1"),ye.setAttributeNS(null,"fill","none"),ye.setAttributeNS(null,"fill-rule","evenodd");var Pe=R.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"fill-rule","nonzero");var ct=R.createNS("http://www.w3.org/2000/svg","g");ct.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ct.setAttributeNS(null,"fill","#000000");for(var Vt=0,fr=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Vt<fr.length;Vt+=1){var Ir=fr[Vt],Dr=R.createNS("http://www.w3.org/2000/svg","ellipse");Dr.setAttributeNS(null,"opacity","0.04"),Dr.setAttributeNS(null,"cx","10.5"),Dr.setAttributeNS(null,"cy","5.80029008"),Dr.setAttributeNS(null,"rx",Ir.rx),Dr.setAttributeNS(null,"ry",Ir.ry),ct.appendChild(Dr)}var jr=R.createNS("http://www.w3.org/2000/svg","g");jr.setAttributeNS(null,"fill",this._color);var En=R.createNS("http://www.w3.org/2000/svg","path");En.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),jr.appendChild(En);var gn=R.createNS("http://www.w3.org/2000/svg","g");gn.setAttributeNS(null,"opacity","0.25"),gn.setAttributeNS(null,"fill","#000000");var Bn=R.createNS("http://www.w3.org/2000/svg","path");Bn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),gn.appendChild(Bn);var fn=R.createNS("http://www.w3.org/2000/svg","g");fn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fn.setAttributeNS(null,"fill","#FFFFFF");var Fn=R.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var jn=R.createNS("http://www.w3.org/2000/svg","circle");jn.setAttributeNS(null,"fill","#000000"),jn.setAttributeNS(null,"opacity","0.25"),jn.setAttributeNS(null,"cx","5.5"),jn.setAttributeNS(null,"cy","5.5"),jn.setAttributeNS(null,"r","5.4999962");var vi=R.createNS("http://www.w3.org/2000/svg","circle");vi.setAttributeNS(null,"fill","#FFFFFF"),vi.setAttributeNS(null,"cx","5.5"),vi.setAttributeNS(null,"cy","5.5"),vi.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(jn),Fn.appendChild(vi),Pe.appendChild(ct),Pe.appendChild(jr),Pe.appendChild(gn),Pe.appendChild(fn),Pe.appendChild(Fn),Y.appendChild(Pe),Y.setAttributeNS(null,"height",41*this._scale+"px"),Y.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(Y),this._offset=l.Point.convert(p&&p.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ki){ki.preventDefault()}),this._element.addEventListener("mousedown",function(ki){ki.preventDefault()}),Vo(this._element,this._anchor,"marker"),this._popup=null}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.addTo=function(p){return this.remove(),this._map=p,p.getCanvasContainer().appendChild(this._element),p.on("move",this._update),p.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},g.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this},g.prototype.getLngLat=function(){return this._lngLat},g.prototype.setLngLat=function(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},g.prototype.getElement=function(){return this._element},g.prototype.setPopup=function(p){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),p){if(!("offset"in p.options)){var E=Math.sqrt(Math.pow(13.5,2)/2);p.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(24.6+E)],"bottom-right":[-E,-1*(24.6+E)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=p,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},g.prototype._onKeyPress=function(p){var E=p.code,Y=p.charCode||p.keyCode;E!=="Space"&&E!=="Enter"&&Y!==32&&Y!==13||this.togglePopup()},g.prototype._onMapClick=function(p){var E=p.originalEvent.target,Y=this._element;this._popup&&(E===Y||Y.contains(E))&&this.togglePopup()},g.prototype.getPopup=function(){return this._popup},g.prototype.togglePopup=function(){var p=this._popup;return p?(p.isOpen()?p.remove():p.addTo(this._map),this):this},g.prototype._update=function(p){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ur(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(E="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Y="rotateX(0deg)":this._pitchAlignment==="map"&&(Y="rotateX("+this._map.getPitch()+"deg)"),p&&p.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,kl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Y+" "+E)}},g.prototype.getOffset=function(){return this._offset},g.prototype.setOffset=function(p){return this._offset=l.Point.convert(p),this._update(),this},g.prototype._onMove=function(p){if(!this._isDragging){var E=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=E}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},g.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},g.prototype._addDragHandler=function(p){this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},g.prototype.setDraggable=function(p){return this._draggable=!!p,this._map&&(p?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},g.prototype.isDraggable=function(){return this._draggable},g.prototype.setRotation=function(p){return this._rotation=p||0,this._update(),this},g.prototype.getRotation=function(){return this._rotation},g.prototype.setRotationAlignment=function(p){return this._rotationAlignment=p||"auto",this._update(),this},g.prototype.getRotationAlignment=function(){return this._rotationAlignment},g.prototype.setPitchAlignment=function(p){return this._pitchAlignment=p&&p!=="auto"?p:this._rotationAlignment,this._update(),this},g.prototype.getPitchAlignment=function(){return this._pitchAlignment},g}(l.Evented),kh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Wf=0,zc=!1,df=function(f){function g(p){f.call(this),this.options=l.extend({},kh,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.onAdd=function(p){var E;return this._map=p,this._container=R.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),E=this._setupUI,Qo!==void 0?E(Qo):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){E(Qo=Y.state!=="denied")}):E(Qo=!!l.window.navigator.geolocation),this._container},g.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wf=0,zc=!1},g.prototype._isOutOfMapMaxBounds=function(p){var E=this._map.getMaxBounds(),Y=p.coords;return E&&(Y.longitude<E.getWest()||Y.longitude>E.getEast()||Y.latitude<E.getSouth()||Y.latitude>E.getNorth())},g.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},g.prototype._onSuccess=function(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}},g.prototype._updateCamera=function(p){var E=new l.LngLat(p.coords.longitude,p.coords.latitude),Y=p.coords.accuracy,ye=this._map.getBearing(),Pe=l.extend({bearing:ye},this.options.fitBoundsOptions);this._map.fitBounds(E.toBounds(Y),Pe,{geolocateSource:!0})},g.prototype._updateMarker=function(p){if(p){var E=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(E).addTo(this._map),this._userLocationDotMarker.setLngLat(E).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},g.prototype._updateCircleRadius=function(){var p=this._map._container.clientHeight/2,E=this._map.unproject([0,p]),Y=this._map.unproject([1,p]),ye=E.distanceTo(Y),Pe=Math.ceil(2*this._accuracy/ye);this._circleElement.style.width=Pe+"px",this._circleElement.style.height=Pe+"px"},g.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},g.prototype._onError=function(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var E=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&zc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}},g.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},g.prototype._setupUI=function(p){var E=this;if(this._container.addEventListener("contextmenu",function(Pe){return Pe.preventDefault()}),this._geolocateButton=R.create("button","mapboxgl-ctrl-geolocate",this._container),R.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Y,this._geolocateButton.setAttribute("aria-label",Y)}else{var ye=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ye,this._geolocateButton.setAttribute("aria-label",ye)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new du(this._dotElement),this._circleElement=R.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new du({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Pe){Pe.geolocateSource||E._watchState!=="ACTIVE_LOCK"||Pe.originalEvent&&Pe.originalEvent.type==="resize"||(E._watchState="BACKGROUND",E._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),E._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),E.fire(new l.Event("trackuserlocationend")))})},g.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wf--,zc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Wf>1?(p={maximumAge:6e5,timeout:0},zc=!0):(p=this.options.positionOptions,zc=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},g.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},g}(l.Evented),rc={maxWidth:100,unit:"metric"},ys=function(f){this.options=l.extend({},rc,f),l.bindAll(["_onMove","setUnit"],this)};function bf(f,g,p){var E=p&&p.maxWidth||100,Y=f._container.clientHeight/2,ye=f.unproject([0,Y]),Pe=f.unproject([E,Y]),ct=ye.distanceTo(Pe);if(p&&p.unit==="imperial"){var Vt=3.2808*ct;Vt>5280?Xf(g,E,Vt/5280,f._getUIString("ScaleControl.Miles")):Xf(g,E,Vt,f._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Xf(g,E,ct/1852,f._getUIString("ScaleControl.NauticalMiles")):ct>=1e3?Xf(g,E,ct/1e3,f._getUIString("ScaleControl.Kilometers")):Xf(g,E,ct,f._getUIString("ScaleControl.Meters"))}function Xf(f,g,p,E){var Y,ye,Pe,ct=(Y=p,(ye=Math.pow(10,(""+Math.floor(Y)).length-1))*(Pe=(Pe=Y/ye)>=10?10:Pe>=5?5:Pe>=3?3:Pe>=2?2:Pe>=1?1:function(Vt){var fr=Math.pow(10,Math.ceil(-Math.log(Vt)/Math.LN10));return Math.round(Vt*fr)/fr}(Pe)));f.style.width=g*(ct/p)+"px",f.innerHTML=ct+"&nbsp;"+E}ys.prototype.getDefaultPosition=function(){return"bottom-left"},ys.prototype._onMove=function(){bf(this._map,this._container,this.options)},ys.prototype.onAdd=function(f){return this._map=f,this._container=R.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ys.prototype.onRemove=function(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ys.prototype.setUnit=function(f){this.options.unit=f,bf(this._map,this._container,this.options)};var rl=function(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof l.window.HTMLElement?this._container=f.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};rl.prototype.onAdd=function(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},rl.prototype.onRemove=function(){R.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},rl.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},rl.prototype._setupUI=function(){var f=this._fullscreenButton=R.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);R.create("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},rl.prototype._updateTitle=function(){var f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f},rl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},rl.prototype._isFullscreen=function(){return this._fullscreen},rl.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},rl.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var wc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),sd=function(f){function g(p){f.call(this),this.options=l.extend(Object.create(wc),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return f&&(g.__proto__=f),(g.prototype=Object.create(f&&f.prototype)).constructor=g,g.prototype.addTo=function(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},g.prototype.isOpen=function(){return!!this._map},g.prototype.remove=function(){return this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},g.prototype.getLngLat=function(){return this._lngLat},g.prototype.setLngLat=function(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},g.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},g.prototype.getElement=function(){return this._container},g.prototype.setText=function(p){return this.setDOMContent(l.window.document.createTextNode(p))},g.prototype.setHTML=function(p){var E,Y=l.window.document.createDocumentFragment(),ye=l.window.document.createElement("body");for(ye.innerHTML=p;E=ye.firstChild;)Y.appendChild(E);return this.setDOMContent(Y)},g.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},g.prototype.setMaxWidth=function(p){return this.options.maxWidth=p,this._update(),this},g.prototype.setDOMContent=function(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this},g.prototype.addClassName=function(p){this._container&&this._container.classList.add(p)},g.prototype.removeClassName=function(p){this._container&&this._container.classList.remove(p)},g.prototype.setOffset=function(p){return this.options.offset=p,this._update(),this},g.prototype.toggleClassName=function(p){if(this._container)return this._container.classList.toggle(p)},g.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=R.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},g.prototype._onMouseUp=function(p){this._update(p.point)},g.prototype._onMouseMove=function(p){this._update(p.point)},g.prototype._onDrag=function(p){this._update(p.point)},g.prototype._update=function(p){var E=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=R.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=R.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Dr){return E._container.classList.add(Dr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ur(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||p)){var Y=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat),ye=this.options.anchor,Pe=function Dr(jr){if(jr){if(typeof jr=="number"){var En=Math.round(Math.sqrt(.5*Math.pow(jr,2)));return{center:new l.Point(0,0),top:new l.Point(0,jr),"top-left":new l.Point(En,En),"top-right":new l.Point(-En,En),bottom:new l.Point(0,-jr),"bottom-left":new l.Point(En,-En),"bottom-right":new l.Point(-En,-En),left:new l.Point(jr,0),right:new l.Point(-jr,0)}}if(jr instanceof l.Point||Array.isArray(jr)){var gn=l.Point.convert(jr);return{center:gn,top:gn,"top-left":gn,"top-right":gn,bottom:gn,"bottom-left":gn,"bottom-right":gn,left:gn,right:gn}}return{center:l.Point.convert(jr.center||[0,0]),top:l.Point.convert(jr.top||[0,0]),"top-left":l.Point.convert(jr["top-left"]||[0,0]),"top-right":l.Point.convert(jr["top-right"]||[0,0]),bottom:l.Point.convert(jr.bottom||[0,0]),"bottom-left":l.Point.convert(jr["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(jr["bottom-right"]||[0,0]),left:l.Point.convert(jr.left||[0,0]),right:l.Point.convert(jr.right||[0,0])}}return Dr(new l.Point(0,0))}(this.options.offset);if(!ye){var ct,Vt=this._container.offsetWidth,fr=this._container.offsetHeight;ct=Y.y+Pe.bottom.y<fr?["top"]:Y.y>this._map.transform.height-fr?["bottom"]:[],Y.x<Vt/2?ct.push("left"):Y.x>this._map.transform.width-Vt/2&&ct.push("right"),ye=ct.length===0?"bottom":ct.join("-")}var Ir=Y.add(Pe[ye]).round();R.setTransform(this._container,kl[ye]+" translate("+Ir.x+"px,"+Ir.y+"px)"),Vo(this._container,ye,"popup")}},g.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var p=this._container.querySelector(Zc);p&&p.focus()}},g.prototype._onClose=function(){this.remove()},g}(l.Evented),Qc={version:l.version,supported:$,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:yd,NavigationControl:Yc,GeolocateControl:df,AttributionControl:ql,ScaleControl:ys,FullscreenControl:rl,Popup:sd,Marker:du,Style:qi,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){On().acquire(Dn)},clearPrewarmedResources:function(){var f=ia;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Dn),ia=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(f){l.config.ACCESS_TOKEN=f},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(f){l.config.API_URL=f},get workerCount(){return ci.workerCount},set workerCount(f){ci.workerCount=f},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){l.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage:function(f){l.clearTileCache(f)},workerUrl:""};return Qc}),v})},31710:function(Qe){(function(){var te=["Point","LineString","Polygon"],m=["MultiPoint","MultiLineString","MultiPolygon"];function v($){return m.indexOf($.type)>-1?$.coordinates.map(function(R){var z={};return z.type=$.type.replace("Multi",""),z.coordinates=R,$.crs&&(z.crs=$.crs),z}):!1}function C($){var R=$.every(function(O){return te.indexOf(O.type)>-1}),z=$[0].crs||0,L=$.every(function(O){var F=O.crs||0;return F==z});if(R&&L){var T={};return T.type="Multi"+$[0].type,T.coordinates=[],z!=0&&(T.crs=z),$.forEach(function(O){T.coordinates.push(O.coordinates)}),T}else return!1}var l={explode:v,implode:C};Qe.exports?Qe.exports=l:window&&(window.multigeojson=l)})()},27418:function(Qe){"use strict";var te=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function C($){if($==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object($)}function l(){try{if(!Object.assign)return!1;var $=new String("abc");if($[5]="de",Object.getOwnPropertyNames($)[0]==="5")return!1;for(var R={},z=0;z<10;z++)R["_"+String.fromCharCode(z)]=z;var L=Object.getOwnPropertyNames(R).map(function(O){return R[O]});if(L.join("")!=="0123456789")return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(O){T[O]=O}),Object.keys(Object.assign({},T)).join("")==="abcdefghijklmnopqrst"}catch(O){return!1}}Qe.exports=l()?Object.assign:function($,R){for(var z,L=C($),T,O=1;O<arguments.length;O++){z=Object(arguments[O]);for(var F in z)m.call(z,F)&&(L[F]=z[F]);if(te){T=te(z);for(var ue=0;ue<T.length;ue++)v.call(z,T[ue])&&(L[T[ue]]=z[T[ue]])}}return L}},99591:function(Qe,te,m){"use strict";var v=m(24236).assign,C=m(24555),l=m(78843),$=m(71619),R={};v(R,C,l,$),Qe.exports=R},24555:function(Qe,te,m){"use strict";var v=m(30405),C=m(24236),l=m(29373),$=m(48898),R=m(62292),z=Object.prototype.toString,L=0,T=4,O=0,F=1,ue=2,Ae=-1,re=0,pe=8;function fe(ut){if(!(this instanceof fe))return new fe(ut);this.options=C.assign({level:Ae,method:pe,chunkSize:16384,windowBits:15,memLevel:8,strategy:re,to:""},ut||{});var wt=this.options;wt.raw&&wt.windowBits>0?wt.windowBits=-wt.windowBits:wt.gzip&&wt.windowBits>0&&wt.windowBits<16&&(wt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R,this.strm.avail_out=0;var se=v.deflateInit2(this.strm,wt.level,wt.method,wt.windowBits,wt.memLevel,wt.strategy);if(se!==O)throw new Error($[se]);if(wt.header&&v.deflateSetHeader(this.strm,wt.header),wt.dictionary){var qe;if(typeof wt.dictionary=="string"?qe=l.string2buf(wt.dictionary):z.call(wt.dictionary)==="[object ArrayBuffer]"?qe=new Uint8Array(wt.dictionary):qe=wt.dictionary,se=v.deflateSetDictionary(this.strm,qe),se!==O)throw new Error($[se]);this._dict_set=!0}}fe.prototype.push=function(ut,wt){var se=this.strm,qe=this.options.chunkSize,me,_e;if(this.ended)return!1;_e=wt===~~wt?wt:wt===!0?T:L,typeof ut=="string"?se.input=l.string2buf(ut):z.call(ut)==="[object ArrayBuffer]"?se.input=new Uint8Array(ut):se.input=ut,se.next_in=0,se.avail_in=se.input.length;do{if(se.avail_out===0&&(se.output=new C.Buf8(qe),se.next_out=0,se.avail_out=qe),me=v.deflate(se,_e),me!==F&&me!==O)return this.onEnd(me),this.ended=!0,!1;(se.avail_out===0||se.avail_in===0&&(_e===T||_e===ue))&&(this.options.to==="string"?this.onData(l.buf2binstring(C.shrinkBuf(se.output,se.next_out))):this.onData(C.shrinkBuf(se.output,se.next_out)))}while((se.avail_in>0||se.avail_out===0)&&me!==F);return _e===T?(me=v.deflateEnd(this.strm),this.onEnd(me),this.ended=!0,me===O):(_e===ue&&(this.onEnd(O),se.avail_out=0),!0)},fe.prototype.onData=function(ut){this.chunks.push(ut)},fe.prototype.onEnd=function(ut){ut===O&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C.flattenChunks(this.chunks)),this.chunks=[],this.err=ut,this.msg=this.strm.msg};function ke(ut,wt){var se=new fe(wt);if(se.push(ut,!0),se.err)throw se.msg;return se.result}function je(ut,wt){return wt=wt||{},wt.raw=!0,ke(ut,wt)}function bt(ut,wt){return wt=wt||{},wt.gzip=!0,ke(ut,wt)}te.Deflate=fe,te.deflate=ke,te.deflateRaw=je,te.gzip=bt},78843:function(Qe,te,m){"use strict";var v=m(27948),C=m(24236),l=m(29373),$=m(71619),R=m(48898),z=m(62292),L=m(42401),T=Object.prototype.toString;function O(Ae){if(!(this instanceof O))return new O(Ae);this.options=C.assign({chunkSize:16384,windowBits:0,to:""},Ae||{});var re=this.options;re.raw&&re.windowBits>=0&&re.windowBits<16&&(re.windowBits=-re.windowBits,re.windowBits===0&&(re.windowBits=-15)),re.windowBits>=0&&re.windowBits<16&&!(Ae&&Ae.windowBits)&&(re.windowBits+=32),re.windowBits>15&&re.windowBits<48&&(re.windowBits&15||(re.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var pe=v.inflateInit2(this.strm,re.windowBits);if(pe!==$.Z_OK)throw new Error(R[pe]);this.header=new L,v.inflateGetHeader(this.strm,this.header)}O.prototype.push=function(Ae,re){var pe=this.strm,fe=this.options.chunkSize,ke=this.options.dictionary,je,bt,ut,wt,se,qe,me=!1;if(this.ended)return!1;bt=re===~~re?re:re===!0?$.Z_FINISH:$.Z_NO_FLUSH,typeof Ae=="string"?pe.input=l.binstring2buf(Ae):T.call(Ae)==="[object ArrayBuffer]"?pe.input=new Uint8Array(Ae):pe.input=Ae,pe.next_in=0,pe.avail_in=pe.input.length;do{if(pe.avail_out===0&&(pe.output=new C.Buf8(fe),pe.next_out=0,pe.avail_out=fe),je=v.inflate(pe,$.Z_NO_FLUSH),je===$.Z_NEED_DICT&&ke&&(typeof ke=="string"?qe=l.string2buf(ke):T.call(ke)==="[object ArrayBuffer]"?qe=new Uint8Array(ke):qe=ke,je=v.inflateSetDictionary(this.strm,qe)),je===$.Z_BUF_ERROR&&me===!0&&(je=$.Z_OK,me=!1),je!==$.Z_STREAM_END&&je!==$.Z_OK)return this.onEnd(je),this.ended=!0,!1;pe.next_out&&(pe.avail_out===0||je===$.Z_STREAM_END||pe.avail_in===0&&(bt===$.Z_FINISH||bt===$.Z_SYNC_FLUSH))&&(this.options.to==="string"?(ut=l.utf8border(pe.output,pe.next_out),wt=pe.next_out-ut,se=l.buf2string(pe.output,ut),pe.next_out=wt,pe.avail_out=fe-wt,wt&&C.arraySet(pe.output,pe.output,ut,wt,0),this.onData(se)):this.onData(C.shrinkBuf(pe.output,pe.next_out))),pe.avail_in===0&&pe.avail_out===0&&(me=!0)}while((pe.avail_in>0||pe.avail_out===0)&&je!==$.Z_STREAM_END);return je===$.Z_STREAM_END&&(bt=$.Z_FINISH),bt===$.Z_FINISH?(je=v.inflateEnd(this.strm),this.onEnd(je),this.ended=!0,je===$.Z_OK):(bt===$.Z_SYNC_FLUSH&&(this.onEnd($.Z_OK),pe.avail_out=0),!0)},O.prototype.onData=function(Ae){this.chunks.push(Ae)},O.prototype.onEnd=function(Ae){Ae===$.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C.flattenChunks(this.chunks)),this.chunks=[],this.err=Ae,this.msg=this.strm.msg};function F(Ae,re){var pe=new O(re);if(pe.push(Ae,!0),pe.err)throw pe.msg;return pe.result}function ue(Ae,re){return re=re||{},re.raw=!0,F(Ae,re)}te.Inflate=O,te.inflate=F,te.inflateRaw=ue,te.ungzip=F},24236:function(Qe,te){"use strict";var m=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";te.assign=function(l){for(var $=Array.prototype.slice.call(arguments,1);$.length;){var R=$.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(var z in R)R.hasOwnProperty(z)&&(l[z]=R[z])}}return l},te.shrinkBuf=function(l,$){return l.length===$?l:l.subarray?l.subarray(0,$):(l.length=$,l)};var v={arraySet:function(l,$,R,z,L){if($.subarray&&l.subarray){l.set($.subarray(R,R+z),L);return}for(var T=0;T<z;T++)l[L+T]=$[R+T]},flattenChunks:function(l){var $,R,z,L,T,O;for(z=0,$=0,R=l.length;$<R;$++)z+=l[$].length;for(O=new Uint8Array(z),L=0,$=0,R=l.length;$<R;$++)T=l[$],O.set(T,L),L+=T.length;return O}},C={arraySet:function(l,$,R,z,L){for(var T=0;T<z;T++)l[L+T]=$[R+T]},flattenChunks:function(l){return[].concat.apply([],l)}};te.setTyped=function(l){l?(te.Buf8=Uint8Array,te.Buf16=Uint16Array,te.Buf32=Int32Array,te.assign(te,v)):(te.Buf8=Array,te.Buf16=Array,te.Buf32=Array,te.assign(te,C))},te.setTyped(m)},29373:function(Qe,te,m){"use strict";var v=m(24236),C=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch(L){C=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(L){l=!1}for(var $=new v.Buf8(256),R=0;R<256;R++)$[R]=R>=252?6:R>=248?5:R>=240?4:R>=224?3:R>=192?2:1;$[254]=$[254]=1,te.string2buf=function(L){var T,O,F,ue,Ae,re=L.length,pe=0;for(ue=0;ue<re;ue++)O=L.charCodeAt(ue),(O&64512)===55296&&ue+1<re&&(F=L.charCodeAt(ue+1),(F&64512)===56320&&(O=65536+(O-55296<<10)+(F-56320),ue++)),pe+=O<128?1:O<2048?2:O<65536?3:4;for(T=new v.Buf8(pe),Ae=0,ue=0;Ae<pe;ue++)O=L.charCodeAt(ue),(O&64512)===55296&&ue+1<re&&(F=L.charCodeAt(ue+1),(F&64512)===56320&&(O=65536+(O-55296<<10)+(F-56320),ue++)),O<128?T[Ae++]=O:O<2048?(T[Ae++]=192|O>>>6,T[Ae++]=128|O&63):O<65536?(T[Ae++]=224|O>>>12,T[Ae++]=128|O>>>6&63,T[Ae++]=128|O&63):(T[Ae++]=240|O>>>18,T[Ae++]=128|O>>>12&63,T[Ae++]=128|O>>>6&63,T[Ae++]=128|O&63);return T};function z(L,T){if(T<65537&&(L.subarray&&l||!L.subarray&&C))return String.fromCharCode.apply(null,v.shrinkBuf(L,T));for(var O="",F=0;F<T;F++)O+=String.fromCharCode(L[F]);return O}te.buf2binstring=function(L){return z(L,L.length)},te.binstring2buf=function(L){for(var T=new v.Buf8(L.length),O=0,F=T.length;O<F;O++)T[O]=L.charCodeAt(O);return T},te.buf2string=function(L,T){var O,F,ue,Ae,re=T||L.length,pe=new Array(re*2);for(F=0,O=0;O<re;){if(ue=L[O++],ue<128){pe[F++]=ue;continue}if(Ae=$[ue],Ae>4){pe[F++]=65533,O+=Ae-1;continue}for(ue&=Ae===2?31:Ae===3?15:7;Ae>1&&O<re;)ue=ue<<6|L[O++]&63,Ae--;if(Ae>1){pe[F++]=65533;continue}ue<65536?pe[F++]=ue:(ue-=65536,pe[F++]=55296|ue>>10&1023,pe[F++]=56320|ue&1023)}return z(pe,F)},te.utf8border=function(L,T){var O;for(T=T||L.length,T>L.length&&(T=L.length),O=T-1;O>=0&&(L[O]&192)===128;)O--;return O<0||O===0?T:O+$[L[O]]>T?O:T}},66069:function(Qe){"use strict";function te(m,v,C,l){for(var $=m&65535|0,R=m>>>16&65535|0,z=0;C!==0;){z=C>2e3?2e3:C,C-=z;do $=$+v[l++]|0,R=R+$|0;while(--z);$%=65521,R%=65521}return $|R<<16|0}Qe.exports=te},71619:function(Qe){"use strict";Qe.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:function(Qe){"use strict";function te(){for(var C,l=[],$=0;$<256;$++){C=$;for(var R=0;R<8;R++)C=C&1?3988292384^C>>>1:C>>>1;l[$]=C}return l}var m=te();function v(C,l,$,R){var z=m,L=R+$;C^=-1;for(var T=R;T<L;T++)C=C>>>8^z[(C^l[T])&255];return C^-1}Qe.exports=v},30405:function(Qe,te,m){"use strict";var v=m(24236),C=m(10342),l=m(66069),$=m(2869),R=m(48898),z=0,L=1,T=3,O=4,F=5,ue=0,Ae=1,re=-2,pe=-3,fe=-5,ke=-1,je=1,bt=2,ut=3,wt=4,se=0,qe=2,me=8,_e=9,Te=15,ht=8,We=29,Ne=256,he=Ne+1+We,Ve=30,ie=19,ze=2*he+1,Le=15,Re=3,st=258,vt=st+Re+1,Dt=32,ar=42,$t=69,ur=73,we=91,At=103,nt=113,Lt=666,St=1,Ut=2,lt=3,Et=4,Zt=3;function Be(X,Nr){return X.msg=R[Nr],Nr}function He(X){return(X<<1)-(X>4?9:0)}function ft(X){for(var Nr=X.length;--Nr>=0;)X[Nr]=0}function Z(X){var Nr=X.state,Xe=Nr.pending;Xe>X.avail_out&&(Xe=X.avail_out),Xe!==0&&(v.arraySet(X.output,Nr.pending_buf,Nr.pending_out,Xe,X.next_out),X.next_out+=Xe,Nr.pending_out+=Xe,X.total_out+=Xe,X.avail_out-=Xe,Nr.pending-=Xe,Nr.pending===0&&(Nr.pending_out=0))}function J(X,Nr){C._tr_flush_block(X,X.block_start>=0?X.block_start:-1,X.strstart-X.block_start,Nr),X.block_start=X.strstart,Z(X.strm)}function K(X,Nr){X.pending_buf[X.pending++]=Nr}function B(X,Nr){X.pending_buf[X.pending++]=Nr>>>8&255,X.pending_buf[X.pending++]=Nr&255}function j(X,Nr,Xe,xe){var rt=X.avail_in;return rt>xe&&(rt=xe),rt===0?0:(X.avail_in-=rt,v.arraySet(Nr,X.input,X.next_in,rt,Xe),X.state.wrap===1?X.adler=l(X.adler,Nr,rt,Xe):X.state.wrap===2&&(X.adler=$(X.adler,Nr,rt,Xe)),X.next_in+=rt,X.total_in+=rt,rt)}function ee(X,Nr){var Xe=X.max_chain_length,xe=X.strstart,rt,kt,cr=X.prev_length,Ar=X.nice_match,Lr=X.strstart>X.w_size-vt?X.strstart-(X.w_size-vt):0,sr=X.window,Ge=X.w_mask,Gr=X.prev,on=X.strstart+st,cn=sr[xe+cr-1],Dn=sr[xe+cr];X.prev_length>=X.good_match&&(Xe>>=2),Ar>X.lookahead&&(Ar=X.lookahead);do if(rt=Nr,!(sr[rt+cr]!==Dn||sr[rt+cr-1]!==cn||sr[rt]!==sr[xe]||sr[++rt]!==sr[xe+1])){xe+=2,rt++;do;while(sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&sr[++xe]===sr[++rt]&&xe<on);if(kt=st-(on-xe),xe=on-st,kt>cr){if(X.match_start=Nr,cr=kt,kt>=Ar)break;cn=sr[xe+cr-1],Dn=sr[xe+cr]}}while((Nr=Gr[Nr&Ge])>Lr&&--Xe!==0);return cr<=X.lookahead?cr:X.lookahead}function W(X){var Nr=X.w_size,Xe,xe,rt,kt,cr;do{if(kt=X.window_size-X.lookahead-X.strstart,X.strstart>=Nr+(Nr-vt)){v.arraySet(X.window,X.window,Nr,Nr,0),X.match_start-=Nr,X.strstart-=Nr,X.block_start-=Nr,xe=X.hash_size,Xe=xe;do rt=X.head[--Xe],X.head[Xe]=rt>=Nr?rt-Nr:0;while(--xe);xe=Nr,Xe=xe;do rt=X.prev[--Xe],X.prev[Xe]=rt>=Nr?rt-Nr:0;while(--xe);kt+=Nr}if(X.strm.avail_in===0)break;if(xe=j(X.strm,X.window,X.strstart+X.lookahead,kt),X.lookahead+=xe,X.lookahead+X.insert>=Re)for(cr=X.strstart-X.insert,X.ins_h=X.window[cr],X.ins_h=(X.ins_h<<X.hash_shift^X.window[cr+1])&X.hash_mask;X.insert&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[cr+Re-1])&X.hash_mask,X.prev[cr&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=cr,cr++,X.insert--,!(X.lookahead+X.insert<Re)););}while(X.lookahead<vt&&X.strm.avail_in!==0)}function De(X,Nr){var Xe=65535;for(Xe>X.pending_buf_size-5&&(Xe=X.pending_buf_size-5);;){if(X.lookahead<=1){if(W(X),X.lookahead===0&&Nr===z)return St;if(X.lookahead===0)break}X.strstart+=X.lookahead,X.lookahead=0;var xe=X.block_start+Xe;if((X.strstart===0||X.strstart>=xe)&&(X.lookahead=X.strstart-xe,X.strstart=xe,J(X,!1),X.strm.avail_out===0)||X.strstart-X.block_start>=X.w_size-vt&&(J(X,!1),X.strm.avail_out===0))return St}return X.insert=0,Nr===O?(J(X,!0),X.strm.avail_out===0?lt:Et):(X.strstart>X.block_start&&(J(X,!1),X.strm.avail_out===0),St)}function ot(X,Nr){for(var Xe,xe;;){if(X.lookahead<vt){if(W(X),X.lookahead<vt&&Nr===z)return St;if(X.lookahead===0)break}if(Xe=0,X.lookahead>=Re&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+Re-1])&X.hash_mask,Xe=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),Xe!==0&&X.strstart-Xe<=X.w_size-vt&&(X.match_length=ee(X,Xe)),X.match_length>=Re)if(xe=C._tr_tally(X,X.strstart-X.match_start,X.match_length-Re),X.lookahead-=X.match_length,X.match_length<=X.max_lazy_match&&X.lookahead>=Re){X.match_length--;do X.strstart++,X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+Re-1])&X.hash_mask,Xe=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart;while(--X.match_length!==0);X.strstart++}else X.strstart+=X.match_length,X.match_length=0,X.ins_h=X.window[X.strstart],X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+1])&X.hash_mask;else xe=C._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++;if(xe&&(J(X,!1),X.strm.avail_out===0))return St}return X.insert=X.strstart<Re-1?X.strstart:Re-1,Nr===O?(J(X,!0),X.strm.avail_out===0?lt:Et):X.last_lit&&(J(X,!1),X.strm.avail_out===0)?St:Ut}function Wt(X,Nr){for(var Xe,xe,rt;;){if(X.lookahead<vt){if(W(X),X.lookahead<vt&&Nr===z)return St;if(X.lookahead===0)break}if(Xe=0,X.lookahead>=Re&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+Re-1])&X.hash_mask,Xe=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),X.prev_length=X.match_length,X.prev_match=X.match_start,X.match_length=Re-1,Xe!==0&&X.prev_length<X.max_lazy_match&&X.strstart-Xe<=X.w_size-vt&&(X.match_length=ee(X,Xe),X.match_length<=5&&(X.strategy===je||X.match_length===Re&&X.strstart-X.match_start>4096)&&(X.match_length=Re-1)),X.prev_length>=Re&&X.match_length<=X.prev_length){rt=X.strstart+X.lookahead-Re,xe=C._tr_tally(X,X.strstart-1-X.prev_match,X.prev_length-Re),X.lookahead-=X.prev_length-1,X.prev_length-=2;do++X.strstart<=rt&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+Re-1])&X.hash_mask,Xe=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart);while(--X.prev_length!==0);if(X.match_available=0,X.match_length=Re-1,X.strstart++,xe&&(J(X,!1),X.strm.avail_out===0))return St}else if(X.match_available){if(xe=C._tr_tally(X,0,X.window[X.strstart-1]),xe&&J(X,!1),X.strstart++,X.lookahead--,X.strm.avail_out===0)return St}else X.match_available=1,X.strstart++,X.lookahead--}return X.match_available&&(xe=C._tr_tally(X,0,X.window[X.strstart-1]),X.match_available=0),X.insert=X.strstart<Re-1?X.strstart:Re-1,Nr===O?(J(X,!0),X.strm.avail_out===0?lt:Et):X.last_lit&&(J(X,!1),X.strm.avail_out===0)?St:Ut}function Ct(X,Nr){for(var Xe,xe,rt,kt,cr=X.window;;){if(X.lookahead<=st){if(W(X),X.lookahead<=st&&Nr===z)return St;if(X.lookahead===0)break}if(X.match_length=0,X.lookahead>=Re&&X.strstart>0&&(rt=X.strstart-1,xe=cr[rt],xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt])){kt=X.strstart+st;do;while(xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt]&&xe===cr[++rt]&&rt<kt);X.match_length=st-(kt-rt),X.match_length>X.lookahead&&(X.match_length=X.lookahead)}if(X.match_length>=Re?(Xe=C._tr_tally(X,1,X.match_length-Re),X.lookahead-=X.match_length,X.strstart+=X.match_length,X.match_length=0):(Xe=C._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++),Xe&&(J(X,!1),X.strm.avail_out===0))return St}return X.insert=0,Nr===O?(J(X,!0),X.strm.avail_out===0?lt:Et):X.last_lit&&(J(X,!1),X.strm.avail_out===0)?St:Ut}function Qt(X,Nr){for(var Xe;;){if(X.lookahead===0&&(W(X),X.lookahead===0)){if(Nr===z)return St;break}if(X.match_length=0,Xe=C._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++,Xe&&(J(X,!1),X.strm.avail_out===0))return St}return X.insert=0,Nr===O?(J(X,!0),X.strm.avail_out===0?lt:Et):X.last_lit&&(J(X,!1),X.strm.avail_out===0)?St:Ut}function ir(X,Nr,Xe,xe,rt){this.good_length=X,this.max_lazy=Nr,this.nice_length=Xe,this.max_chain=xe,this.func=rt}var Er;Er=[new ir(0,0,0,0,De),new ir(4,4,8,4,ot),new ir(4,5,16,8,ot),new ir(4,6,32,32,ot),new ir(4,4,16,16,Wt),new ir(8,16,32,32,Wt),new ir(8,16,128,128,Wt),new ir(8,32,128,256,Wt),new ir(32,128,258,1024,Wt),new ir(32,258,258,4096,Wt)];function Qr(X){X.window_size=2*X.w_size,ft(X.head),X.max_lazy_match=Er[X.level].max_lazy,X.good_match=Er[X.level].good_length,X.nice_match=Er[X.level].nice_length,X.max_chain_length=Er[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=Re-1,X.match_available=0,X.ins_h=0}function Mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=me,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new v.Buf16(ze*2),this.dyn_dtree=new v.Buf16((2*Ve+1)*2),this.bl_tree=new v.Buf16((2*ie+1)*2),ft(this.dyn_ltree),ft(this.dyn_dtree),ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new v.Buf16(Le+1),this.heap=new v.Buf16(2*he+1),ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new v.Buf16(2*he+1),ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function br(X){var Nr;return!X||!X.state?Be(X,re):(X.total_in=X.total_out=0,X.data_type=qe,Nr=X.state,Nr.pending=0,Nr.pending_out=0,Nr.wrap<0&&(Nr.wrap=-Nr.wrap),Nr.status=Nr.wrap?ar:nt,X.adler=Nr.wrap===2?0:1,Nr.last_flush=z,C._tr_init(Nr),ue)}function Nt(X){var Nr=br(X);return Nr===ue&&Qr(X.state),Nr}function Pr(X,Nr){return!X||!X.state||X.state.wrap!==2?re:(X.state.gzhead=Nr,ue)}function _r(X,Nr,Xe,xe,rt,kt){if(!X)return re;var cr=1;if(Nr===ke&&(Nr=6),xe<0?(cr=0,xe=-xe):xe>15&&(cr=2,xe-=16),rt<1||rt>_e||Xe!==me||xe<8||xe>15||Nr<0||Nr>9||kt<0||kt>wt)return Be(X,re);xe===8&&(xe=9);var Ar=new Mt;return X.state=Ar,Ar.strm=X,Ar.wrap=cr,Ar.gzhead=null,Ar.w_bits=xe,Ar.w_size=1<<Ar.w_bits,Ar.w_mask=Ar.w_size-1,Ar.hash_bits=rt+7,Ar.hash_size=1<<Ar.hash_bits,Ar.hash_mask=Ar.hash_size-1,Ar.hash_shift=~~((Ar.hash_bits+Re-1)/Re),Ar.window=new v.Buf8(Ar.w_size*2),Ar.head=new v.Buf16(Ar.hash_size),Ar.prev=new v.Buf16(Ar.w_size),Ar.lit_bufsize=1<<rt+6,Ar.pending_buf_size=Ar.lit_bufsize*4,Ar.pending_buf=new v.Buf8(Ar.pending_buf_size),Ar.d_buf=1*Ar.lit_bufsize,Ar.l_buf=(1+2)*Ar.lit_bufsize,Ar.level=Nr,Ar.strategy=kt,Ar.method=Xe,Nt(X)}function kr(X,Nr){return _r(X,Nr,me,Te,ht,se)}function zt(X,Nr){var Xe,xe,rt,kt;if(!X||!X.state||Nr>F||Nr<0)return X?Be(X,re):re;if(xe=X.state,!X.output||!X.input&&X.avail_in!==0||xe.status===Lt&&Nr!==O)return Be(X,X.avail_out===0?fe:re);if(xe.strm=X,Xe=xe.last_flush,xe.last_flush=Nr,xe.status===ar)if(xe.wrap===2)X.adler=0,K(xe,31),K(xe,139),K(xe,8),xe.gzhead?(K(xe,(xe.gzhead.text?1:0)+(xe.gzhead.hcrc?2:0)+(xe.gzhead.extra?4:0)+(xe.gzhead.name?8:0)+(xe.gzhead.comment?16:0)),K(xe,xe.gzhead.time&255),K(xe,xe.gzhead.time>>8&255),K(xe,xe.gzhead.time>>16&255),K(xe,xe.gzhead.time>>24&255),K(xe,xe.level===9?2:xe.strategy>=bt||xe.level<2?4:0),K(xe,xe.gzhead.os&255),xe.gzhead.extra&&xe.gzhead.extra.length&&(K(xe,xe.gzhead.extra.length&255),K(xe,xe.gzhead.extra.length>>8&255)),xe.gzhead.hcrc&&(X.adler=$(X.adler,xe.pending_buf,xe.pending,0)),xe.gzindex=0,xe.status=$t):(K(xe,0),K(xe,0),K(xe,0),K(xe,0),K(xe,0),K(xe,xe.level===9?2:xe.strategy>=bt||xe.level<2?4:0),K(xe,Zt),xe.status=nt);else{var cr=me+(xe.w_bits-8<<4)<<8,Ar=-1;xe.strategy>=bt||xe.level<2?Ar=0:xe.level<6?Ar=1:xe.level===6?Ar=2:Ar=3,cr|=Ar<<6,xe.strstart!==0&&(cr|=Dt),cr+=31-cr%31,xe.status=nt,B(xe,cr),xe.strstart!==0&&(B(xe,X.adler>>>16),B(xe,X.adler&65535)),X.adler=1}if(xe.status===$t)if(xe.gzhead.extra){for(rt=xe.pending;xe.gzindex<(xe.gzhead.extra.length&65535)&&!(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>rt&&(X.adler=$(X.adler,xe.pending_buf,xe.pending-rt,rt)),Z(X),rt=xe.pending,xe.pending===xe.pending_buf_size));)K(xe,xe.gzhead.extra[xe.gzindex]&255),xe.gzindex++;xe.gzhead.hcrc&&xe.pending>rt&&(X.adler=$(X.adler,xe.pending_buf,xe.pending-rt,rt)),xe.gzindex===xe.gzhead.extra.length&&(xe.gzindex=0,xe.status=ur)}else xe.status=ur;if(xe.status===ur)if(xe.gzhead.name){rt=xe.pending;do{if(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>rt&&(X.adler=$(X.adler,xe.pending_buf,xe.pending-rt,rt)),Z(X),rt=xe.pending,xe.pending===xe.pending_buf_size)){kt=1;break}xe.gzindex<xe.gzhead.name.length?kt=xe.gzhead.name.charCodeAt(xe.gzindex++)&255:kt=0,K(xe,kt)}while(kt!==0);xe.gzhead.hcrc&&xe.pending>rt&&(X.adler=$(X.adler,xe.pending_buf,xe.pending-rt,rt)),kt===0&&(xe.gzindex=0,xe.status=we)}else xe.status=we;if(xe.status===we)if(xe.gzhead.comment){rt=xe.pending;do{if(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>rt&&(X.adler=$(X.adler,xe.pending_buf,xe.pending-rt,rt)),Z(X),rt=xe.pending,xe.pending===xe.pending_buf_size)){kt=1;break}xe.gzindex<xe.gzhead.comment.length?kt=xe.gzhead.comment.charCodeAt(xe.gzindex++)&255:kt=0,K(xe,kt)}while(kt!==0);xe.gzhead.hcrc&&xe.pending>rt&&(X.adler=$(X.adler,xe.pending_buf,xe.pending-rt,rt)),kt===0&&(xe.status=At)}else xe.status=At;if(xe.status===At&&(xe.gzhead.hcrc?(xe.pending+2>xe.pending_buf_size&&Z(X),xe.pending+2<=xe.pending_buf_size&&(K(xe,X.adler&255),K(xe,X.adler>>8&255),X.adler=0,xe.status=nt)):xe.status=nt),xe.pending!==0){if(Z(X),X.avail_out===0)return xe.last_flush=-1,ue}else if(X.avail_in===0&&He(Nr)<=He(Xe)&&Nr!==O)return Be(X,fe);if(xe.status===Lt&&X.avail_in!==0)return Be(X,fe);if(X.avail_in!==0||xe.lookahead!==0||Nr!==z&&xe.status!==Lt){var Lr=xe.strategy===bt?Qt(xe,Nr):xe.strategy===ut?Ct(xe,Nr):Er[xe.level].func(xe,Nr);if((Lr===lt||Lr===Et)&&(xe.status=Lt),Lr===St||Lr===lt)return X.avail_out===0&&(xe.last_flush=-1),ue;if(Lr===Ut&&(Nr===L?C._tr_align(xe):Nr!==F&&(C._tr_stored_block(xe,0,0,!1),Nr===T&&(ft(xe.head),xe.lookahead===0&&(xe.strstart=0,xe.block_start=0,xe.insert=0))),Z(X),X.avail_out===0))return xe.last_flush=-1,ue}return Nr!==O?ue:xe.wrap<=0?Ae:(xe.wrap===2?(K(xe,X.adler&255),K(xe,X.adler>>8&255),K(xe,X.adler>>16&255),K(xe,X.adler>>24&255),K(xe,X.total_in&255),K(xe,X.total_in>>8&255),K(xe,X.total_in>>16&255),K(xe,X.total_in>>24&255)):(B(xe,X.adler>>>16),B(xe,X.adler&65535)),Z(X),xe.wrap>0&&(xe.wrap=-xe.wrap),xe.pending!==0?ue:Ae)}function mr(X){var Nr;return!X||!X.state?re:(Nr=X.state.status,Nr!==ar&&Nr!==$t&&Nr!==ur&&Nr!==we&&Nr!==At&&Nr!==nt&&Nr!==Lt?Be(X,re):(X.state=null,Nr===nt?Be(X,pe):ue))}function Or(X,Nr){var Xe=Nr.length,xe,rt,kt,cr,Ar,Lr,sr,Ge;if(!X||!X.state||(xe=X.state,cr=xe.wrap,cr===2||cr===1&&xe.status!==ar||xe.lookahead))return re;for(cr===1&&(X.adler=l(X.adler,Nr,Xe,0)),xe.wrap=0,Xe>=xe.w_size&&(cr===0&&(ft(xe.head),xe.strstart=0,xe.block_start=0,xe.insert=0),Ge=new v.Buf8(xe.w_size),v.arraySet(Ge,Nr,Xe-xe.w_size,xe.w_size,0),Nr=Ge,Xe=xe.w_size),Ar=X.avail_in,Lr=X.next_in,sr=X.input,X.avail_in=Xe,X.next_in=0,X.input=Nr,W(xe);xe.lookahead>=Re;){rt=xe.strstart,kt=xe.lookahead-(Re-1);do xe.ins_h=(xe.ins_h<<xe.hash_shift^xe.window[rt+Re-1])&xe.hash_mask,xe.prev[rt&xe.w_mask]=xe.head[xe.ins_h],xe.head[xe.ins_h]=rt,rt++;while(--kt);xe.strstart=rt,xe.lookahead=Re-1,W(xe)}return xe.strstart+=xe.lookahead,xe.block_start=xe.strstart,xe.insert=xe.lookahead,xe.lookahead=0,xe.match_length=xe.prev_length=Re-1,xe.match_available=0,X.next_in=Lr,X.input=sr,X.avail_in=Ar,xe.wrap=cr,ue}te.deflateInit=kr,te.deflateInit2=_r,te.deflateReset=Nt,te.deflateResetKeep=br,te.deflateSetHeader=Pr,te.deflate=zt,te.deflateEnd=mr,te.deflateSetDictionary=Or,te.deflateInfo="pako deflate (from Nodeca project)"},42401:function(Qe){"use strict";function te(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Qe.exports=te},94264:function(Qe){"use strict";var te=30,m=12;Qe.exports=function(C,l){var $,R,z,L,T,O,F,ue,Ae,re,pe,fe,ke,je,bt,ut,wt,se,qe,me,_e,Te,ht,We,Ne;$=C.state,R=C.next_in,We=C.input,z=R+(C.avail_in-5),L=C.next_out,Ne=C.output,T=L-(l-C.avail_out),O=L+(C.avail_out-257),F=$.dmax,ue=$.wsize,Ae=$.whave,re=$.wnext,pe=$.window,fe=$.hold,ke=$.bits,je=$.lencode,bt=$.distcode,ut=(1<<$.lenbits)-1,wt=(1<<$.distbits)-1;e:do{ke<15&&(fe+=We[R++]<<ke,ke+=8,fe+=We[R++]<<ke,ke+=8),se=je[fe&ut];t:for(;;){if(qe=se>>>24,fe>>>=qe,ke-=qe,qe=se>>>16&255,qe===0)Ne[L++]=se&65535;else if(qe&16){me=se&65535,qe&=15,qe&&(ke<qe&&(fe+=We[R++]<<ke,ke+=8),me+=fe&(1<<qe)-1,fe>>>=qe,ke-=qe),ke<15&&(fe+=We[R++]<<ke,ke+=8,fe+=We[R++]<<ke,ke+=8),se=bt[fe&wt];r:for(;;){if(qe=se>>>24,fe>>>=qe,ke-=qe,qe=se>>>16&255,qe&16){if(_e=se&65535,qe&=15,ke<qe&&(fe+=We[R++]<<ke,ke+=8,ke<qe&&(fe+=We[R++]<<ke,ke+=8)),_e+=fe&(1<<qe)-1,_e>F){C.msg="invalid distance too far back",$.mode=te;break e}if(fe>>>=qe,ke-=qe,qe=L-T,_e>qe){if(qe=_e-qe,qe>Ae&&$.sane){C.msg="invalid distance too far back",$.mode=te;break e}if(Te=0,ht=pe,re===0){if(Te+=ue-qe,qe<me){me-=qe;do Ne[L++]=pe[Te++];while(--qe);Te=L-_e,ht=Ne}}else if(re<qe){if(Te+=ue+re-qe,qe-=re,qe<me){me-=qe;do Ne[L++]=pe[Te++];while(--qe);if(Te=0,re<me){qe=re,me-=qe;do Ne[L++]=pe[Te++];while(--qe);Te=L-_e,ht=Ne}}}else if(Te+=re-qe,qe<me){me-=qe;do Ne[L++]=pe[Te++];while(--qe);Te=L-_e,ht=Ne}for(;me>2;)Ne[L++]=ht[Te++],Ne[L++]=ht[Te++],Ne[L++]=ht[Te++],me-=3;me&&(Ne[L++]=ht[Te++],me>1&&(Ne[L++]=ht[Te++]))}else{Te=L-_e;do Ne[L++]=Ne[Te++],Ne[L++]=Ne[Te++],Ne[L++]=Ne[Te++],me-=3;while(me>2);me&&(Ne[L++]=Ne[Te++],me>1&&(Ne[L++]=Ne[Te++]))}}else if(qe&64){C.msg="invalid distance code",$.mode=te;break e}else{se=bt[(se&65535)+(fe&(1<<qe)-1)];continue r}break}}else if(qe&64)if(qe&32){$.mode=m;break e}else{C.msg="invalid literal/length code",$.mode=te;break e}else{se=je[(se&65535)+(fe&(1<<qe)-1)];continue t}break}}while(R<z&&L<O);me=ke>>3,R-=me,ke-=me<<3,fe&=(1<<ke)-1,C.next_in=R,C.next_out=L,C.avail_in=R<z?5+(z-R):5-(R-z),C.avail_out=L<O?257+(O-L):257-(L-O),$.hold=fe,$.bits=ke}},27948:function(Qe,te,m){"use strict";var v=m(24236),C=m(66069),l=m(2869),$=m(94264),R=m(9241),z=0,L=1,T=2,O=4,F=5,ue=6,Ae=0,re=1,pe=2,fe=-2,ke=-3,je=-4,bt=-5,ut=8,wt=1,se=2,qe=3,me=4,_e=5,Te=6,ht=7,We=8,Ne=9,he=10,Ve=11,ie=12,ze=13,Le=14,Re=15,st=16,vt=17,Dt=18,ar=19,$t=20,ur=21,we=22,At=23,nt=24,Lt=25,St=26,Ut=27,lt=28,Et=29,Zt=30,Be=31,He=32,ft=852,Z=592,J=15,K=J;function B(_r){return(_r>>>24&255)+(_r>>>8&65280)+((_r&65280)<<8)+((_r&255)<<24)}function j(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ee(_r){var kr;return!_r||!_r.state?fe:(kr=_r.state,_r.total_in=_r.total_out=kr.total=0,_r.msg="",kr.wrap&&(_r.adler=kr.wrap&1),kr.mode=wt,kr.last=0,kr.havedict=0,kr.dmax=32768,kr.head=null,kr.hold=0,kr.bits=0,kr.lencode=kr.lendyn=new v.Buf32(ft),kr.distcode=kr.distdyn=new v.Buf32(Z),kr.sane=1,kr.back=-1,Ae)}function W(_r){var kr;return!_r||!_r.state?fe:(kr=_r.state,kr.wsize=0,kr.whave=0,kr.wnext=0,ee(_r))}function De(_r,kr){var zt,mr;return!_r||!_r.state||(mr=_r.state,kr<0?(zt=0,kr=-kr):(zt=(kr>>4)+1,kr<48&&(kr&=15)),kr&&(kr<8||kr>15))?fe:(mr.window!==null&&mr.wbits!==kr&&(mr.window=null),mr.wrap=zt,mr.wbits=kr,W(_r))}function ot(_r,kr){var zt,mr;return _r?(mr=new j,_r.state=mr,mr.window=null,zt=De(_r,kr),zt!==Ae&&(_r.state=null),zt):fe}function Wt(_r){return ot(_r,K)}var Ct=!0,Qt,ir;function Er(_r){if(Ct){var kr;for(Qt=new v.Buf32(512),ir=new v.Buf32(32),kr=0;kr<144;)_r.lens[kr++]=8;for(;kr<256;)_r.lens[kr++]=9;for(;kr<280;)_r.lens[kr++]=7;for(;kr<288;)_r.lens[kr++]=8;for(R(L,_r.lens,0,288,Qt,0,_r.work,{bits:9}),kr=0;kr<32;)_r.lens[kr++]=5;R(T,_r.lens,0,32,ir,0,_r.work,{bits:5}),Ct=!1}_r.lencode=Qt,_r.lenbits=9,_r.distcode=ir,_r.distbits=5}function Qr(_r,kr,zt,mr){var Or,X=_r.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new v.Buf8(X.wsize)),mr>=X.wsize?(v.arraySet(X.window,kr,zt-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(Or=X.wsize-X.wnext,Or>mr&&(Or=mr),v.arraySet(X.window,kr,zt-mr,Or,X.wnext),mr-=Or,mr?(v.arraySet(X.window,kr,zt-mr,mr,0),X.wnext=mr,X.whave=X.wsize):(X.wnext+=Or,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=Or))),0}function Mt(_r,kr){var zt,mr,Or,X,Nr,Xe,xe,rt,kt,cr,Ar,Lr,sr,Ge,Gr=0,on,cn,Dn,ci,ia,Vi,On,ji,oi=new v.Buf8(4),Hi,Ca,Wi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_r||!_r.state||!_r.output||!_r.input&&_r.avail_in!==0)return fe;zt=_r.state,zt.mode===ie&&(zt.mode=ze),Nr=_r.next_out,Or=_r.output,xe=_r.avail_out,X=_r.next_in,mr=_r.input,Xe=_r.avail_in,rt=zt.hold,kt=zt.bits,cr=Xe,Ar=xe,ji=Ae;e:for(;;)switch(zt.mode){case wt:if(zt.wrap===0){zt.mode=ze;break}for(;kt<16;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(zt.wrap&2&&rt===35615){zt.check=0,oi[0]=rt&255,oi[1]=rt>>>8&255,zt.check=l(zt.check,oi,2,0),rt=0,kt=0,zt.mode=se;break}if(zt.flags=0,zt.head&&(zt.head.done=!1),!(zt.wrap&1)||(((rt&255)<<8)+(rt>>8))%31){_r.msg="incorrect header check",zt.mode=Zt;break}if((rt&15)!==ut){_r.msg="unknown compression method",zt.mode=Zt;break}if(rt>>>=4,kt-=4,On=(rt&15)+8,zt.wbits===0)zt.wbits=On;else if(On>zt.wbits){_r.msg="invalid window size",zt.mode=Zt;break}zt.dmax=1<<On,_r.adler=zt.check=1,zt.mode=rt&512?he:ie,rt=0,kt=0;break;case se:for(;kt<16;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(zt.flags=rt,(zt.flags&255)!==ut){_r.msg="unknown compression method",zt.mode=Zt;break}if(zt.flags&57344){_r.msg="unknown header flags set",zt.mode=Zt;break}zt.head&&(zt.head.text=rt>>8&1),zt.flags&512&&(oi[0]=rt&255,oi[1]=rt>>>8&255,zt.check=l(zt.check,oi,2,0)),rt=0,kt=0,zt.mode=qe;case qe:for(;kt<32;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}zt.head&&(zt.head.time=rt),zt.flags&512&&(oi[0]=rt&255,oi[1]=rt>>>8&255,oi[2]=rt>>>16&255,oi[3]=rt>>>24&255,zt.check=l(zt.check,oi,4,0)),rt=0,kt=0,zt.mode=me;case me:for(;kt<16;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}zt.head&&(zt.head.xflags=rt&255,zt.head.os=rt>>8),zt.flags&512&&(oi[0]=rt&255,oi[1]=rt>>>8&255,zt.check=l(zt.check,oi,2,0)),rt=0,kt=0,zt.mode=_e;case _e:if(zt.flags&1024){for(;kt<16;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}zt.length=rt,zt.head&&(zt.head.extra_len=rt),zt.flags&512&&(oi[0]=rt&255,oi[1]=rt>>>8&255,zt.check=l(zt.check,oi,2,0)),rt=0,kt=0}else zt.head&&(zt.head.extra=null);zt.mode=Te;case Te:if(zt.flags&1024&&(Lr=zt.length,Lr>Xe&&(Lr=Xe),Lr&&(zt.head&&(On=zt.head.extra_len-zt.length,zt.head.extra||(zt.head.extra=new Array(zt.head.extra_len)),v.arraySet(zt.head.extra,mr,X,Lr,On)),zt.flags&512&&(zt.check=l(zt.check,mr,Lr,X)),Xe-=Lr,X+=Lr,zt.length-=Lr),zt.length))break e;zt.length=0,zt.mode=ht;case ht:if(zt.flags&2048){if(Xe===0)break e;Lr=0;do On=mr[X+Lr++],zt.head&&On&&zt.length<65536&&(zt.head.name+=String.fromCharCode(On));while(On&&Lr<Xe);if(zt.flags&512&&(zt.check=l(zt.check,mr,Lr,X)),Xe-=Lr,X+=Lr,On)break e}else zt.head&&(zt.head.name=null);zt.length=0,zt.mode=We;case We:if(zt.flags&4096){if(Xe===0)break e;Lr=0;do On=mr[X+Lr++],zt.head&&On&&zt.length<65536&&(zt.head.comment+=String.fromCharCode(On));while(On&&Lr<Xe);if(zt.flags&512&&(zt.check=l(zt.check,mr,Lr,X)),Xe-=Lr,X+=Lr,On)break e}else zt.head&&(zt.head.comment=null);zt.mode=Ne;case Ne:if(zt.flags&512){for(;kt<16;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(rt!==(zt.check&65535)){_r.msg="header crc mismatch",zt.mode=Zt;break}rt=0,kt=0}zt.head&&(zt.head.hcrc=zt.flags>>9&1,zt.head.done=!0),_r.adler=zt.check=0,zt.mode=ie;break;case he:for(;kt<32;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}_r.adler=zt.check=B(rt),rt=0,kt=0,zt.mode=Ve;case Ve:if(zt.havedict===0)return _r.next_out=Nr,_r.avail_out=xe,_r.next_in=X,_r.avail_in=Xe,zt.hold=rt,zt.bits=kt,pe;_r.adler=zt.check=1,zt.mode=ie;case ie:if(kr===F||kr===ue)break e;case ze:if(zt.last){rt>>>=kt&7,kt-=kt&7,zt.mode=Ut;break}for(;kt<3;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}switch(zt.last=rt&1,rt>>>=1,kt-=1,rt&3){case 0:zt.mode=Le;break;case 1:if(Er(zt),zt.mode=$t,kr===ue){rt>>>=2,kt-=2;break e}break;case 2:zt.mode=vt;break;case 3:_r.msg="invalid block type",zt.mode=Zt}rt>>>=2,kt-=2;break;case Le:for(rt>>>=kt&7,kt-=kt&7;kt<32;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if((rt&65535)!==(rt>>>16^65535)){_r.msg="invalid stored block lengths",zt.mode=Zt;break}if(zt.length=rt&65535,rt=0,kt=0,zt.mode=Re,kr===ue)break e;case Re:zt.mode=st;case st:if(Lr=zt.length,Lr){if(Lr>Xe&&(Lr=Xe),Lr>xe&&(Lr=xe),Lr===0)break e;v.arraySet(Or,mr,X,Lr,Nr),Xe-=Lr,X+=Lr,xe-=Lr,Nr+=Lr,zt.length-=Lr;break}zt.mode=ie;break;case vt:for(;kt<14;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(zt.nlen=(rt&31)+257,rt>>>=5,kt-=5,zt.ndist=(rt&31)+1,rt>>>=5,kt-=5,zt.ncode=(rt&15)+4,rt>>>=4,kt-=4,zt.nlen>286||zt.ndist>30){_r.msg="too many length or distance symbols",zt.mode=Zt;break}zt.have=0,zt.mode=Dt;case Dt:for(;zt.have<zt.ncode;){for(;kt<3;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}zt.lens[Wi[zt.have++]]=rt&7,rt>>>=3,kt-=3}for(;zt.have<19;)zt.lens[Wi[zt.have++]]=0;if(zt.lencode=zt.lendyn,zt.lenbits=7,Hi={bits:zt.lenbits},ji=R(z,zt.lens,0,19,zt.lencode,0,zt.work,Hi),zt.lenbits=Hi.bits,ji){_r.msg="invalid code lengths set",zt.mode=Zt;break}zt.have=0,zt.mode=ar;case ar:for(;zt.have<zt.nlen+zt.ndist;){for(;Gr=zt.lencode[rt&(1<<zt.lenbits)-1],on=Gr>>>24,cn=Gr>>>16&255,Dn=Gr&65535,!(on<=kt);){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(Dn<16)rt>>>=on,kt-=on,zt.lens[zt.have++]=Dn;else{if(Dn===16){for(Ca=on+2;kt<Ca;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(rt>>>=on,kt-=on,zt.have===0){_r.msg="invalid bit length repeat",zt.mode=Zt;break}On=zt.lens[zt.have-1],Lr=3+(rt&3),rt>>>=2,kt-=2}else if(Dn===17){for(Ca=on+3;kt<Ca;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}rt>>>=on,kt-=on,On=0,Lr=3+(rt&7),rt>>>=3,kt-=3}else{for(Ca=on+7;kt<Ca;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}rt>>>=on,kt-=on,On=0,Lr=11+(rt&127),rt>>>=7,kt-=7}if(zt.have+Lr>zt.nlen+zt.ndist){_r.msg="invalid bit length repeat",zt.mode=Zt;break}for(;Lr--;)zt.lens[zt.have++]=On}}if(zt.mode===Zt)break;if(zt.lens[256]===0){_r.msg="invalid code -- missing end-of-block",zt.mode=Zt;break}if(zt.lenbits=9,Hi={bits:zt.lenbits},ji=R(L,zt.lens,0,zt.nlen,zt.lencode,0,zt.work,Hi),zt.lenbits=Hi.bits,ji){_r.msg="invalid literal/lengths set",zt.mode=Zt;break}if(zt.distbits=6,zt.distcode=zt.distdyn,Hi={bits:zt.distbits},ji=R(T,zt.lens,zt.nlen,zt.ndist,zt.distcode,0,zt.work,Hi),zt.distbits=Hi.bits,ji){_r.msg="invalid distances set",zt.mode=Zt;break}if(zt.mode=$t,kr===ue)break e;case $t:zt.mode=ur;case ur:if(Xe>=6&&xe>=258){_r.next_out=Nr,_r.avail_out=xe,_r.next_in=X,_r.avail_in=Xe,zt.hold=rt,zt.bits=kt,$(_r,Ar),Nr=_r.next_out,Or=_r.output,xe=_r.avail_out,X=_r.next_in,mr=_r.input,Xe=_r.avail_in,rt=zt.hold,kt=zt.bits,zt.mode===ie&&(zt.back=-1);break}for(zt.back=0;Gr=zt.lencode[rt&(1<<zt.lenbits)-1],on=Gr>>>24,cn=Gr>>>16&255,Dn=Gr&65535,!(on<=kt);){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(cn&&!(cn&240)){for(ci=on,ia=cn,Vi=Dn;Gr=zt.lencode[Vi+((rt&(1<<ci+ia)-1)>>ci)],on=Gr>>>24,cn=Gr>>>16&255,Dn=Gr&65535,!(ci+on<=kt);){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}rt>>>=ci,kt-=ci,zt.back+=ci}if(rt>>>=on,kt-=on,zt.back+=on,zt.length=Dn,cn===0){zt.mode=St;break}if(cn&32){zt.back=-1,zt.mode=ie;break}if(cn&64){_r.msg="invalid literal/length code",zt.mode=Zt;break}zt.extra=cn&15,zt.mode=we;case we:if(zt.extra){for(Ca=zt.extra;kt<Ca;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}zt.length+=rt&(1<<zt.extra)-1,rt>>>=zt.extra,kt-=zt.extra,zt.back+=zt.extra}zt.was=zt.length,zt.mode=At;case At:for(;Gr=zt.distcode[rt&(1<<zt.distbits)-1],on=Gr>>>24,cn=Gr>>>16&255,Dn=Gr&65535,!(on<=kt);){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(!(cn&240)){for(ci=on,ia=cn,Vi=Dn;Gr=zt.distcode[Vi+((rt&(1<<ci+ia)-1)>>ci)],on=Gr>>>24,cn=Gr>>>16&255,Dn=Gr&65535,!(ci+on<=kt);){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}rt>>>=ci,kt-=ci,zt.back+=ci}if(rt>>>=on,kt-=on,zt.back+=on,cn&64){_r.msg="invalid distance code",zt.mode=Zt;break}zt.offset=Dn,zt.extra=cn&15,zt.mode=nt;case nt:if(zt.extra){for(Ca=zt.extra;kt<Ca;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}zt.offset+=rt&(1<<zt.extra)-1,rt>>>=zt.extra,kt-=zt.extra,zt.back+=zt.extra}if(zt.offset>zt.dmax){_r.msg="invalid distance too far back",zt.mode=Zt;break}zt.mode=Lt;case Lt:if(xe===0)break e;if(Lr=Ar-xe,zt.offset>Lr){if(Lr=zt.offset-Lr,Lr>zt.whave&&zt.sane){_r.msg="invalid distance too far back",zt.mode=Zt;break}Lr>zt.wnext?(Lr-=zt.wnext,sr=zt.wsize-Lr):sr=zt.wnext-Lr,Lr>zt.length&&(Lr=zt.length),Ge=zt.window}else Ge=Or,sr=Nr-zt.offset,Lr=zt.length;Lr>xe&&(Lr=xe),xe-=Lr,zt.length-=Lr;do Or[Nr++]=Ge[sr++];while(--Lr);zt.length===0&&(zt.mode=ur);break;case St:if(xe===0)break e;Or[Nr++]=zt.length,xe--,zt.mode=ur;break;case Ut:if(zt.wrap){for(;kt<32;){if(Xe===0)break e;Xe--,rt|=mr[X++]<<kt,kt+=8}if(Ar-=xe,_r.total_out+=Ar,zt.total+=Ar,Ar&&(_r.adler=zt.check=zt.flags?l(zt.check,Or,Ar,Nr-Ar):C(zt.check,Or,Ar,Nr-Ar)),Ar=xe,(zt.flags?rt:B(rt))!==zt.check){_r.msg="incorrect data check",zt.mode=Zt;break}rt=0,kt=0}zt.mode=lt;case lt:if(zt.wrap&&zt.flags){for(;kt<32;){if(Xe===0)break e;Xe--,rt+=mr[X++]<<kt,kt+=8}if(rt!==(zt.total&4294967295)){_r.msg="incorrect length check",zt.mode=Zt;break}rt=0,kt=0}zt.mode=Et;case Et:ji=re;break e;case Zt:ji=ke;break e;case Be:return je;case He:default:return fe}return _r.next_out=Nr,_r.avail_out=xe,_r.next_in=X,_r.avail_in=Xe,zt.hold=rt,zt.bits=kt,(zt.wsize||Ar!==_r.avail_out&&zt.mode<Zt&&(zt.mode<Ut||kr!==O))&&Qr(_r,_r.output,_r.next_out,Ar-_r.avail_out)?(zt.mode=Be,je):(cr-=_r.avail_in,Ar-=_r.avail_out,_r.total_in+=cr,_r.total_out+=Ar,zt.total+=Ar,zt.wrap&&Ar&&(_r.adler=zt.check=zt.flags?l(zt.check,Or,Ar,_r.next_out-Ar):C(zt.check,Or,Ar,_r.next_out-Ar)),_r.data_type=zt.bits+(zt.last?64:0)+(zt.mode===ie?128:0)+(zt.mode===$t||zt.mode===Re?256:0),(cr===0&&Ar===0||kr===O)&&ji===Ae&&(ji=bt),ji)}function br(_r){if(!_r||!_r.state)return fe;var kr=_r.state;return kr.window&&(kr.window=null),_r.state=null,Ae}function Nt(_r,kr){var zt;return!_r||!_r.state||(zt=_r.state,!(zt.wrap&2))?fe:(zt.head=kr,kr.done=!1,Ae)}function Pr(_r,kr){var zt=kr.length,mr,Or,X;return!_r||!_r.state||(mr=_r.state,mr.wrap!==0&&mr.mode!==Ve)?fe:mr.mode===Ve&&(Or=1,Or=C(Or,kr,zt,0),Or!==mr.check)?ke:(X=Qr(_r,kr,zt,zt),X?(mr.mode=Be,je):(mr.havedict=1,Ae))}te.inflateReset=W,te.inflateReset2=De,te.inflateResetKeep=ee,te.inflateInit=Wt,te.inflateInit2=ot,te.inflate=Mt,te.inflateEnd=br,te.inflateGetHeader=Nt,te.inflateSetDictionary=Pr,te.inflateInfo="pako inflate (from Nodeca project)"},9241:function(Qe,te,m){"use strict";var v=m(24236),C=15,l=852,$=592,R=0,z=1,L=2,T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],O=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ue=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Qe.exports=function(re,pe,fe,ke,je,bt,ut,wt){var se=wt.bits,qe=0,me=0,_e=0,Te=0,ht=0,We=0,Ne=0,he=0,Ve=0,ie=0,ze,Le,Re,st,vt,Dt=null,ar=0,$t,ur=new v.Buf16(C+1),we=new v.Buf16(C+1),At=null,nt=0,Lt,St,Ut;for(qe=0;qe<=C;qe++)ur[qe]=0;for(me=0;me<ke;me++)ur[pe[fe+me]]++;for(ht=se,Te=C;Te>=1&&ur[Te]===0;Te--);if(ht>Te&&(ht=Te),Te===0)return je[bt++]=1<<24|64<<16|0,je[bt++]=1<<24|64<<16|0,wt.bits=1,0;for(_e=1;_e<Te&&ur[_e]===0;_e++);for(ht<_e&&(ht=_e),he=1,qe=1;qe<=C;qe++)if(he<<=1,he-=ur[qe],he<0)return-1;if(he>0&&(re===R||Te!==1))return-1;for(we[1]=0,qe=1;qe<C;qe++)we[qe+1]=we[qe]+ur[qe];for(me=0;me<ke;me++)pe[fe+me]!==0&&(ut[we[pe[fe+me]]++]=me);if(re===R?(Dt=At=ut,$t=19):re===z?(Dt=T,ar-=257,At=O,nt-=257,$t=256):(Dt=F,At=ue,$t=-1),ie=0,me=0,qe=_e,vt=bt,We=ht,Ne=0,Re=-1,Ve=1<<ht,st=Ve-1,re===z&&Ve>l||re===L&&Ve>$)return 1;for(var lt=0;;){lt++,Lt=qe-Ne,ut[me]<$t?(St=0,Ut=ut[me]):ut[me]>$t?(St=At[nt+ut[me]],Ut=Dt[ar+ut[me]]):(St=32+64,Ut=0),ze=1<<qe-Ne,Le=1<<We,_e=Le;do Le-=ze,je[vt+(ie>>Ne)+Le]=Lt<<24|St<<16|Ut|0;while(Le!==0);for(ze=1<<qe-1;ie&ze;)ze>>=1;if(ze!==0?(ie&=ze-1,ie+=ze):ie=0,me++,--ur[qe]===0){if(qe===Te)break;qe=pe[fe+ut[me]]}if(qe>ht&&(ie&st)!==Re){for(Ne===0&&(Ne=ht),vt+=_e,We=qe-Ne,he=1<<We;We+Ne<Te&&(he-=ur[We+Ne],!(he<=0));)We++,he<<=1;if(Ve+=1<<We,re===z&&Ve>l||re===L&&Ve>$)return 1;Re=ie&st,je[Re]=ht<<24|We<<16|vt-bt|0}}return ie!==0&&(je[vt+ie]=qe-Ne<<24|64<<16|0),wt.bits=ht,0}},48898:function(Qe){"use strict";Qe.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},10342:function(Qe,te,m){"use strict";var v=m(24236),C=4,l=0,$=1,R=2;function z(Mt){for(var br=Mt.length;--br>=0;)Mt[br]=0}var L=0,T=1,O=2,F=3,ue=258,Ae=29,re=256,pe=re+1+Ae,fe=30,ke=19,je=2*pe+1,bt=15,ut=16,wt=7,se=256,qe=16,me=17,_e=18,Te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ht=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],We=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=512,Ve=new Array((pe+2)*2);z(Ve);var ie=new Array(fe*2);z(ie);var ze=new Array(he);z(ze);var Le=new Array(ue-F+1);z(Le);var Re=new Array(Ae);z(Re);var st=new Array(fe);z(st);function vt(Mt,br,Nt,Pr,_r){this.static_tree=Mt,this.extra_bits=br,this.extra_base=Nt,this.elems=Pr,this.max_length=_r,this.has_stree=Mt&&Mt.length}var Dt,ar,$t;function ur(Mt,br){this.dyn_tree=Mt,this.max_code=0,this.stat_desc=br}function we(Mt){return Mt<256?ze[Mt]:ze[256+(Mt>>>7)]}function At(Mt,br){Mt.pending_buf[Mt.pending++]=br&255,Mt.pending_buf[Mt.pending++]=br>>>8&255}function nt(Mt,br,Nt){Mt.bi_valid>ut-Nt?(Mt.bi_buf|=br<<Mt.bi_valid&65535,At(Mt,Mt.bi_buf),Mt.bi_buf=br>>ut-Mt.bi_valid,Mt.bi_valid+=Nt-ut):(Mt.bi_buf|=br<<Mt.bi_valid&65535,Mt.bi_valid+=Nt)}function Lt(Mt,br,Nt){nt(Mt,Nt[br*2],Nt[br*2+1])}function St(Mt,br){var Nt=0;do Nt|=Mt&1,Mt>>>=1,Nt<<=1;while(--br>0);return Nt>>>1}function Ut(Mt){Mt.bi_valid===16?(At(Mt,Mt.bi_buf),Mt.bi_buf=0,Mt.bi_valid=0):Mt.bi_valid>=8&&(Mt.pending_buf[Mt.pending++]=Mt.bi_buf&255,Mt.bi_buf>>=8,Mt.bi_valid-=8)}function lt(Mt,br){var Nt=br.dyn_tree,Pr=br.max_code,_r=br.stat_desc.static_tree,kr=br.stat_desc.has_stree,zt=br.stat_desc.extra_bits,mr=br.stat_desc.extra_base,Or=br.stat_desc.max_length,X,Nr,Xe,xe,rt,kt,cr=0;for(xe=0;xe<=bt;xe++)Mt.bl_count[xe]=0;for(Nt[Mt.heap[Mt.heap_max]*2+1]=0,X=Mt.heap_max+1;X<je;X++)Nr=Mt.heap[X],xe=Nt[Nt[Nr*2+1]*2+1]+1,xe>Or&&(xe=Or,cr++),Nt[Nr*2+1]=xe,!(Nr>Pr)&&(Mt.bl_count[xe]++,rt=0,Nr>=mr&&(rt=zt[Nr-mr]),kt=Nt[Nr*2],Mt.opt_len+=kt*(xe+rt),kr&&(Mt.static_len+=kt*(_r[Nr*2+1]+rt)));if(cr!==0){do{for(xe=Or-1;Mt.bl_count[xe]===0;)xe--;Mt.bl_count[xe]--,Mt.bl_count[xe+1]+=2,Mt.bl_count[Or]--,cr-=2}while(cr>0);for(xe=Or;xe!==0;xe--)for(Nr=Mt.bl_count[xe];Nr!==0;)Xe=Mt.heap[--X],!(Xe>Pr)&&(Nt[Xe*2+1]!==xe&&(Mt.opt_len+=(xe-Nt[Xe*2+1])*Nt[Xe*2],Nt[Xe*2+1]=xe),Nr--)}}function Et(Mt,br,Nt){var Pr=new Array(bt+1),_r=0,kr,zt;for(kr=1;kr<=bt;kr++)Pr[kr]=_r=_r+Nt[kr-1]<<1;for(zt=0;zt<=br;zt++){var mr=Mt[zt*2+1];mr!==0&&(Mt[zt*2]=St(Pr[mr]++,mr))}}function Zt(){var Mt,br,Nt,Pr,_r,kr=new Array(bt+1);for(Nt=0,Pr=0;Pr<Ae-1;Pr++)for(Re[Pr]=Nt,Mt=0;Mt<1<<Te[Pr];Mt++)Le[Nt++]=Pr;for(Le[Nt-1]=Pr,_r=0,Pr=0;Pr<16;Pr++)for(st[Pr]=_r,Mt=0;Mt<1<<ht[Pr];Mt++)ze[_r++]=Pr;for(_r>>=7;Pr<fe;Pr++)for(st[Pr]=_r<<7,Mt=0;Mt<1<<ht[Pr]-7;Mt++)ze[256+_r++]=Pr;for(br=0;br<=bt;br++)kr[br]=0;for(Mt=0;Mt<=143;)Ve[Mt*2+1]=8,Mt++,kr[8]++;for(;Mt<=255;)Ve[Mt*2+1]=9,Mt++,kr[9]++;for(;Mt<=279;)Ve[Mt*2+1]=7,Mt++,kr[7]++;for(;Mt<=287;)Ve[Mt*2+1]=8,Mt++,kr[8]++;for(Et(Ve,pe+1,kr),Mt=0;Mt<fe;Mt++)ie[Mt*2+1]=5,ie[Mt*2]=St(Mt,5);Dt=new vt(Ve,Te,re+1,pe,bt),ar=new vt(ie,ht,0,fe,bt),$t=new vt(new Array(0),We,0,ke,wt)}function Be(Mt){var br;for(br=0;br<pe;br++)Mt.dyn_ltree[br*2]=0;for(br=0;br<fe;br++)Mt.dyn_dtree[br*2]=0;for(br=0;br<ke;br++)Mt.bl_tree[br*2]=0;Mt.dyn_ltree[se*2]=1,Mt.opt_len=Mt.static_len=0,Mt.last_lit=Mt.matches=0}function He(Mt){Mt.bi_valid>8?At(Mt,Mt.bi_buf):Mt.bi_valid>0&&(Mt.pending_buf[Mt.pending++]=Mt.bi_buf),Mt.bi_buf=0,Mt.bi_valid=0}function ft(Mt,br,Nt,Pr){He(Mt),Pr&&(At(Mt,Nt),At(Mt,~Nt)),v.arraySet(Mt.pending_buf,Mt.window,br,Nt,Mt.pending),Mt.pending+=Nt}function Z(Mt,br,Nt,Pr){var _r=br*2,kr=Nt*2;return Mt[_r]<Mt[kr]||Mt[_r]===Mt[kr]&&Pr[br]<=Pr[Nt]}function J(Mt,br,Nt){for(var Pr=Mt.heap[Nt],_r=Nt<<1;_r<=Mt.heap_len&&(_r<Mt.heap_len&&Z(br,Mt.heap[_r+1],Mt.heap[_r],Mt.depth)&&_r++,!Z(br,Pr,Mt.heap[_r],Mt.depth));)Mt.heap[Nt]=Mt.heap[_r],Nt=_r,_r<<=1;Mt.heap[Nt]=Pr}function K(Mt,br,Nt){var Pr,_r,kr=0,zt,mr;if(Mt.last_lit!==0)do Pr=Mt.pending_buf[Mt.d_buf+kr*2]<<8|Mt.pending_buf[Mt.d_buf+kr*2+1],_r=Mt.pending_buf[Mt.l_buf+kr],kr++,Pr===0?Lt(Mt,_r,br):(zt=Le[_r],Lt(Mt,zt+re+1,br),mr=Te[zt],mr!==0&&(_r-=Re[zt],nt(Mt,_r,mr)),Pr--,zt=we(Pr),Lt(Mt,zt,Nt),mr=ht[zt],mr!==0&&(Pr-=st[zt],nt(Mt,Pr,mr)));while(kr<Mt.last_lit);Lt(Mt,se,br)}function B(Mt,br){var Nt=br.dyn_tree,Pr=br.stat_desc.static_tree,_r=br.stat_desc.has_stree,kr=br.stat_desc.elems,zt,mr,Or=-1,X;for(Mt.heap_len=0,Mt.heap_max=je,zt=0;zt<kr;zt++)Nt[zt*2]!==0?(Mt.heap[++Mt.heap_len]=Or=zt,Mt.depth[zt]=0):Nt[zt*2+1]=0;for(;Mt.heap_len<2;)X=Mt.heap[++Mt.heap_len]=Or<2?++Or:0,Nt[X*2]=1,Mt.depth[X]=0,Mt.opt_len--,_r&&(Mt.static_len-=Pr[X*2+1]);for(br.max_code=Or,zt=Mt.heap_len>>1;zt>=1;zt--)J(Mt,Nt,zt);X=kr;do zt=Mt.heap[1],Mt.heap[1]=Mt.heap[Mt.heap_len--],J(Mt,Nt,1),mr=Mt.heap[1],Mt.heap[--Mt.heap_max]=zt,Mt.heap[--Mt.heap_max]=mr,Nt[X*2]=Nt[zt*2]+Nt[mr*2],Mt.depth[X]=(Mt.depth[zt]>=Mt.depth[mr]?Mt.depth[zt]:Mt.depth[mr])+1,Nt[zt*2+1]=Nt[mr*2+1]=X,Mt.heap[1]=X++,J(Mt,Nt,1);while(Mt.heap_len>=2);Mt.heap[--Mt.heap_max]=Mt.heap[1],lt(Mt,br),Et(Nt,Or,Mt.bl_count)}function j(Mt,br,Nt){var Pr,_r=-1,kr,zt=br[0*2+1],mr=0,Or=7,X=4;for(zt===0&&(Or=138,X=3),br[(Nt+1)*2+1]=65535,Pr=0;Pr<=Nt;Pr++)kr=zt,zt=br[(Pr+1)*2+1],!(++mr<Or&&kr===zt)&&(mr<X?Mt.bl_tree[kr*2]+=mr:kr!==0?(kr!==_r&&Mt.bl_tree[kr*2]++,Mt.bl_tree[qe*2]++):mr<=10?Mt.bl_tree[me*2]++:Mt.bl_tree[_e*2]++,mr=0,_r=kr,zt===0?(Or=138,X=3):kr===zt?(Or=6,X=3):(Or=7,X=4))}function ee(Mt,br,Nt){var Pr,_r=-1,kr,zt=br[0*2+1],mr=0,Or=7,X=4;for(zt===0&&(Or=138,X=3),Pr=0;Pr<=Nt;Pr++)if(kr=zt,zt=br[(Pr+1)*2+1],!(++mr<Or&&kr===zt)){if(mr<X)do Lt(Mt,kr,Mt.bl_tree);while(--mr!==0);else kr!==0?(kr!==_r&&(Lt(Mt,kr,Mt.bl_tree),mr--),Lt(Mt,qe,Mt.bl_tree),nt(Mt,mr-3,2)):mr<=10?(Lt(Mt,me,Mt.bl_tree),nt(Mt,mr-3,3)):(Lt(Mt,_e,Mt.bl_tree),nt(Mt,mr-11,7));mr=0,_r=kr,zt===0?(Or=138,X=3):kr===zt?(Or=6,X=3):(Or=7,X=4)}}function W(Mt){var br;for(j(Mt,Mt.dyn_ltree,Mt.l_desc.max_code),j(Mt,Mt.dyn_dtree,Mt.d_desc.max_code),B(Mt,Mt.bl_desc),br=ke-1;br>=3&&Mt.bl_tree[Ne[br]*2+1]===0;br--);return Mt.opt_len+=3*(br+1)+5+5+4,br}function De(Mt,br,Nt,Pr){var _r;for(nt(Mt,br-257,5),nt(Mt,Nt-1,5),nt(Mt,Pr-4,4),_r=0;_r<Pr;_r++)nt(Mt,Mt.bl_tree[Ne[_r]*2+1],3);ee(Mt,Mt.dyn_ltree,br-1),ee(Mt,Mt.dyn_dtree,Nt-1)}function ot(Mt){var br=4093624447,Nt;for(Nt=0;Nt<=31;Nt++,br>>>=1)if(br&1&&Mt.dyn_ltree[Nt*2]!==0)return l;if(Mt.dyn_ltree[9*2]!==0||Mt.dyn_ltree[10*2]!==0||Mt.dyn_ltree[13*2]!==0)return $;for(Nt=32;Nt<re;Nt++)if(Mt.dyn_ltree[Nt*2]!==0)return $;return l}var Wt=!1;function Ct(Mt){Wt||(Zt(),Wt=!0),Mt.l_desc=new ur(Mt.dyn_ltree,Dt),Mt.d_desc=new ur(Mt.dyn_dtree,ar),Mt.bl_desc=new ur(Mt.bl_tree,$t),Mt.bi_buf=0,Mt.bi_valid=0,Be(Mt)}function Qt(Mt,br,Nt,Pr){nt(Mt,(L<<1)+(Pr?1:0),3),ft(Mt,br,Nt,!0)}function ir(Mt){nt(Mt,T<<1,3),Lt(Mt,se,Ve),Ut(Mt)}function Er(Mt,br,Nt,Pr){var _r,kr,zt=0;Mt.level>0?(Mt.strm.data_type===R&&(Mt.strm.data_type=ot(Mt)),B(Mt,Mt.l_desc),B(Mt,Mt.d_desc),zt=W(Mt),_r=Mt.opt_len+3+7>>>3,kr=Mt.static_len+3+7>>>3,kr<=_r&&(_r=kr)):_r=kr=Nt+5,Nt+4<=_r&&br!==-1?Qt(Mt,br,Nt,Pr):Mt.strategy===C||kr===_r?(nt(Mt,(T<<1)+(Pr?1:0),3),K(Mt,Ve,ie)):(nt(Mt,(O<<1)+(Pr?1:0),3),De(Mt,Mt.l_desc.max_code+1,Mt.d_desc.max_code+1,zt+1),K(Mt,Mt.dyn_ltree,Mt.dyn_dtree)),Be(Mt),Pr&&He(Mt)}function Qr(Mt,br,Nt){return Mt.pending_buf[Mt.d_buf+Mt.last_lit*2]=br>>>8&255,Mt.pending_buf[Mt.d_buf+Mt.last_lit*2+1]=br&255,Mt.pending_buf[Mt.l_buf+Mt.last_lit]=Nt&255,Mt.last_lit++,br===0?Mt.dyn_ltree[Nt*2]++:(Mt.matches++,br--,Mt.dyn_ltree[(Le[Nt]+re+1)*2]++,Mt.dyn_dtree[we(br)*2]++),Mt.last_lit===Mt.lit_bufsize-1}te._tr_init=Ct,te._tr_stored_block=Qt,te._tr_flush_block=Er,te._tr_tally=Qr,te._tr_align=ir},62292:function(Qe){"use strict";function te(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Qe.exports=te},3614:function(Qe,te,m){"use strict";Qe.exports=C;var v=m(80645);function C(he){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(he)?he:new Uint8Array(he||0),this.pos=0,this.type=0,this.length=this.buf.length}C.Varint=0,C.Fixed64=1,C.Bytes=2,C.Fixed32=5;var l=(1<<16)*(1<<16),$=1/l,R=12,z=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");C.prototype={destroy:function(){this.buf=null},readFields:function(he,Ve,ie){for(ie=ie||this.length;this.pos<ie;){var ze=this.readVarint(),Le=ze>>3,Re=this.pos;this.type=ze&7,he(Le,Ve,this),this.pos===Re&&this.skip(ze)}return Ve},readMessage:function(he,Ve){return this.readFields(he,Ve,this.readVarint()+this.pos)},readFixed32:function(){var he=me(this.buf,this.pos);return this.pos+=4,he},readSFixed32:function(){var he=Te(this.buf,this.pos);return this.pos+=4,he},readFixed64:function(){var he=me(this.buf,this.pos)+me(this.buf,this.pos+4)*l;return this.pos+=8,he},readSFixed64:function(){var he=me(this.buf,this.pos)+Te(this.buf,this.pos+4)*l;return this.pos+=8,he},readFloat:function(){var he=v.read(this.buf,this.pos,!0,23,4);return this.pos+=4,he},readDouble:function(){var he=v.read(this.buf,this.pos,!0,52,8);return this.pos+=8,he},readVarint:function(he){var Ve=this.buf,ie,ze;return ze=Ve[this.pos++],ie=ze&127,ze<128||(ze=Ve[this.pos++],ie|=(ze&127)<<7,ze<128)||(ze=Ve[this.pos++],ie|=(ze&127)<<14,ze<128)||(ze=Ve[this.pos++],ie|=(ze&127)<<21,ze<128)?ie:(ze=Ve[this.pos],ie|=(ze&15)<<28,L(ie,he,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var he=this.readVarint();return he%2===1?(he+1)/-2:he/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var he=this.readVarint()+this.pos,Ve=this.pos;return this.pos=he,he-Ve>=R&&z?We(this.buf,Ve,he):ht(this.buf,Ve,he)},readBytes:function(){var he=this.readVarint()+this.pos,Ve=this.buf.subarray(this.pos,he);return this.pos=he,Ve},readPackedVarint:function(he,Ve){if(this.type!==C.Bytes)return he.push(this.readVarint(Ve));var ie=T(this);for(he=he||[];this.pos<ie;)he.push(this.readVarint(Ve));return he},readPackedSVarint:function(he){if(this.type!==C.Bytes)return he.push(this.readSVarint());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readSVarint());return he},readPackedBoolean:function(he){if(this.type!==C.Bytes)return he.push(this.readBoolean());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readBoolean());return he},readPackedFloat:function(he){if(this.type!==C.Bytes)return he.push(this.readFloat());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readFloat());return he},readPackedDouble:function(he){if(this.type!==C.Bytes)return he.push(this.readDouble());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readDouble());return he},readPackedFixed32:function(he){if(this.type!==C.Bytes)return he.push(this.readFixed32());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readFixed32());return he},readPackedSFixed32:function(he){if(this.type!==C.Bytes)return he.push(this.readSFixed32());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readSFixed32());return he},readPackedFixed64:function(he){if(this.type!==C.Bytes)return he.push(this.readFixed64());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readFixed64());return he},readPackedSFixed64:function(he){if(this.type!==C.Bytes)return he.push(this.readSFixed64());var Ve=T(this);for(he=he||[];this.pos<Ve;)he.push(this.readSFixed64());return he},skip:function(he){var Ve=he&7;if(Ve===C.Varint)for(;this.buf[this.pos++]>127;);else if(Ve===C.Bytes)this.pos=this.readVarint()+this.pos;else if(Ve===C.Fixed32)this.pos+=4;else if(Ve===C.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Ve)},writeTag:function(he,Ve){this.writeVarint(he<<3|Ve)},realloc:function(he){for(var Ve=this.length||16;Ve<this.pos+he;)Ve*=2;if(Ve!==this.length){var ie=new Uint8Array(Ve);ie.set(this.buf),this.buf=ie,this.length=Ve}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(he){this.realloc(4),_e(this.buf,he,this.pos),this.pos+=4},writeSFixed32:function(he){this.realloc(4),_e(this.buf,he,this.pos),this.pos+=4},writeFixed64:function(he){this.realloc(8),_e(this.buf,he&-1,this.pos),_e(this.buf,Math.floor(he*$),this.pos+4),this.pos+=8},writeSFixed64:function(he){this.realloc(8),_e(this.buf,he&-1,this.pos),_e(this.buf,Math.floor(he*$),this.pos+4),this.pos+=8},writeVarint:function(he){if(he=+he||0,he>268435455||he<0){F(he,this);return}this.realloc(4),this.buf[this.pos++]=he&127|(he>127?128:0),!(he<=127)&&(this.buf[this.pos++]=(he>>>=7)&127|(he>127?128:0),!(he<=127)&&(this.buf[this.pos++]=(he>>>=7)&127|(he>127?128:0),!(he<=127)&&(this.buf[this.pos++]=he>>>7&127)))},writeSVarint:function(he){this.writeVarint(he<0?-he*2-1:he*2)},writeBoolean:function(he){this.writeVarint(Boolean(he))},writeString:function(he){he=String(he),this.realloc(he.length*4),this.pos++;var Ve=this.pos;this.pos=Ne(this.buf,he,this.pos);var ie=this.pos-Ve;ie>=128&&re(Ve,ie,this),this.pos=Ve-1,this.writeVarint(ie),this.pos+=ie},writeFloat:function(he){this.realloc(4),v.write(this.buf,he,this.pos,!0,23,4),this.pos+=4},writeDouble:function(he){this.realloc(8),v.write(this.buf,he,this.pos,!0,52,8),this.pos+=8},writeBytes:function(he){var Ve=he.length;this.writeVarint(Ve),this.realloc(Ve);for(var ie=0;ie<Ve;ie++)this.buf[this.pos++]=he[ie]},writeRawMessage:function(he,Ve){this.pos++;var ie=this.pos;he(Ve,this);var ze=this.pos-ie;ze>=128&&re(ie,ze,this),this.pos=ie-1,this.writeVarint(ze),this.pos+=ze},writeMessage:function(he,Ve,ie){this.writeTag(he,C.Bytes),this.writeRawMessage(Ve,ie)},writePackedVarint:function(he,Ve){Ve.length&&this.writeMessage(he,pe,Ve)},writePackedSVarint:function(he,Ve){Ve.length&&this.writeMessage(he,fe,Ve)},writePackedBoolean:function(he,Ve){Ve.length&&this.writeMessage(he,bt,Ve)},writePackedFloat:function(he,Ve){Ve.length&&this.writeMessage(he,ke,Ve)},writePackedDouble:function(he,Ve){Ve.length&&this.writeMessage(he,je,Ve)},writePackedFixed32:function(he,Ve){Ve.length&&this.writeMessage(he,ut,Ve)},writePackedSFixed32:function(he,Ve){Ve.length&&this.writeMessage(he,wt,Ve)},writePackedFixed64:function(he,Ve){Ve.length&&this.writeMessage(he,se,Ve)},writePackedSFixed64:function(he,Ve){Ve.length&&this.writeMessage(he,qe,Ve)},writeBytesField:function(he,Ve){this.writeTag(he,C.Bytes),this.writeBytes(Ve)},writeFixed32Field:function(he,Ve){this.writeTag(he,C.Fixed32),this.writeFixed32(Ve)},writeSFixed32Field:function(he,Ve){this.writeTag(he,C.Fixed32),this.writeSFixed32(Ve)},writeFixed64Field:function(he,Ve){this.writeTag(he,C.Fixed64),this.writeFixed64(Ve)},writeSFixed64Field:function(he,Ve){this.writeTag(he,C.Fixed64),this.writeSFixed64(Ve)},writeVarintField:function(he,Ve){this.writeTag(he,C.Varint),this.writeVarint(Ve)},writeSVarintField:function(he,Ve){this.writeTag(he,C.Varint),this.writeSVarint(Ve)},writeStringField:function(he,Ve){this.writeTag(he,C.Bytes),this.writeString(Ve)},writeFloatField:function(he,Ve){this.writeTag(he,C.Fixed32),this.writeFloat(Ve)},writeDoubleField:function(he,Ve){this.writeTag(he,C.Fixed64),this.writeDouble(Ve)},writeBooleanField:function(he,Ve){this.writeVarintField(he,Boolean(Ve))}};function L(he,Ve,ie){var ze=ie.buf,Le,Re;if(Re=ze[ie.pos++],Le=(Re&112)>>4,Re<128||(Re=ze[ie.pos++],Le|=(Re&127)<<3,Re<128)||(Re=ze[ie.pos++],Le|=(Re&127)<<10,Re<128)||(Re=ze[ie.pos++],Le|=(Re&127)<<17,Re<128)||(Re=ze[ie.pos++],Le|=(Re&127)<<24,Re<128)||(Re=ze[ie.pos++],Le|=(Re&1)<<31,Re<128))return O(he,Le,Ve);throw new Error("Expected varint not more than 10 bytes")}function T(he){return he.type===C.Bytes?he.readVarint()+he.pos:he.pos+1}function O(he,Ve,ie){return ie?Ve*4294967296+(he>>>0):(Ve>>>0)*4294967296+(he>>>0)}function F(he,Ve){var ie,ze;if(he>=0?(ie=he%4294967296|0,ze=he/4294967296|0):(ie=~(-he%4294967296),ze=~(-he/4294967296),ie^4294967295?ie=ie+1|0:(ie=0,ze=ze+1|0)),he>=18446744073709552e3||he<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ve.realloc(10),ue(ie,ze,Ve),Ae(ze,Ve)}function ue(he,Ve,ie){ie.buf[ie.pos++]=he&127|128,he>>>=7,ie.buf[ie.pos++]=he&127|128,he>>>=7,ie.buf[ie.pos++]=he&127|128,he>>>=7,ie.buf[ie.pos++]=he&127|128,he>>>=7,ie.buf[ie.pos]=he&127}function Ae(he,Ve){var ie=(he&7)<<4;Ve.buf[Ve.pos++]|=ie|((he>>>=3)?128:0),he&&(Ve.buf[Ve.pos++]=he&127|((he>>>=7)?128:0),he&&(Ve.buf[Ve.pos++]=he&127|((he>>>=7)?128:0),he&&(Ve.buf[Ve.pos++]=he&127|((he>>>=7)?128:0),he&&(Ve.buf[Ve.pos++]=he&127|((he>>>=7)?128:0),he&&(Ve.buf[Ve.pos++]=he&127)))))}function re(he,Ve,ie){var ze=Ve<=16383?1:Ve<=2097151?2:Ve<=268435455?3:Math.floor(Math.log(Ve)/(Math.LN2*7));ie.realloc(ze);for(var Le=ie.pos-1;Le>=he;Le--)ie.buf[Le+ze]=ie.buf[Le]}function pe(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeVarint(he[ie])}function fe(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeSVarint(he[ie])}function ke(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeFloat(he[ie])}function je(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeDouble(he[ie])}function bt(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeBoolean(he[ie])}function ut(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeFixed32(he[ie])}function wt(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeSFixed32(he[ie])}function se(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeFixed64(he[ie])}function qe(he,Ve){for(var ie=0;ie<he.length;ie++)Ve.writeSFixed64(he[ie])}function me(he,Ve){return(he[Ve]|he[Ve+1]<<8|he[Ve+2]<<16)+he[Ve+3]*16777216}function _e(he,Ve,ie){he[ie]=Ve,he[ie+1]=Ve>>>8,he[ie+2]=Ve>>>16,he[ie+3]=Ve>>>24}function Te(he,Ve){return(he[Ve]|he[Ve+1]<<8|he[Ve+2]<<16)+(he[Ve+3]<<24)}function ht(he,Ve,ie){for(var ze="",Le=Ve;Le<ie;){var Re=he[Le],st=null,vt=Re>239?4:Re>223?3:Re>191?2:1;if(Le+vt>ie)break;var Dt,ar,$t;vt===1?Re<128&&(st=Re):vt===2?(Dt=he[Le+1],(Dt&192)===128&&(st=(Re&31)<<6|Dt&63,st<=127&&(st=null))):vt===3?(Dt=he[Le+1],ar=he[Le+2],(Dt&192)===128&&(ar&192)===128&&(st=(Re&15)<<12|(Dt&63)<<6|ar&63,(st<=2047||st>=55296&&st<=57343)&&(st=null))):vt===4&&(Dt=he[Le+1],ar=he[Le+2],$t=he[Le+3],(Dt&192)===128&&(ar&192)===128&&($t&192)===128&&(st=(Re&15)<<18|(Dt&63)<<12|(ar&63)<<6|$t&63,(st<=65535||st>=1114112)&&(st=null))),st===null?(st=65533,vt=1):st>65535&&(st-=65536,ze+=String.fromCharCode(st>>>10&1023|55296),st=56320|st&1023),ze+=String.fromCharCode(st),Le+=vt}return ze}function We(he,Ve,ie){return z.decode(he.subarray(Ve,ie))}function Ne(he,Ve,ie){for(var ze=0,Le,Re;ze<Ve.length;ze++){if(Le=Ve.charCodeAt(ze),Le>55295&&Le<57344)if(Re)if(Le<56320){he[ie++]=239,he[ie++]=191,he[ie++]=189,Re=Le;continue}else Le=Re-55296<<10|Le-56320|65536,Re=null;else{Le>56319||ze+1===Ve.length?(he[ie++]=239,he[ie++]=191,he[ie++]=189):Re=Le;continue}else Re&&(he[ie++]=239,he[ie++]=191,he[ie++]=189,Re=null);Le<128?he[ie++]=Le:(Le<2048?he[ie++]=Le>>6|192:(Le<65536?he[ie++]=Le>>12|224:(he[ie++]=Le>>18|240,he[ie++]=Le>>12&63|128),he[ie++]=Le>>6&63|128),he[ie++]=Le&63|128)}return ie}},32676:function(Qe,te,m){var v=m(34155);(function(C,l){Qe.exports=l()})(this,function(){"use strict";function C(K,B){if(!(K instanceof B))throw new TypeError("Cannot call a class as a function")}function l(K,B){for(var j=0;j<B.length;j++){var ee=B[j];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(K,ee.key,ee)}}function $(K,B,j){return B&&l(K.prototype,B),j&&l(K,j),K}var R=function(){function K(B,j){this.next=null,this.key=B,this.data=j,this.left=null,this.right=null}return K}();function z(K,B){return K>B?1:K<B?-1:0}function L(K,B,j){for(var ee=new R(null,null),W=ee,De=ee;;){var ot=j(K,B.key);if(ot<0){if(B.left===null)break;if(j(K,B.left.key)<0){var Wt=B.left;if(B.left=Wt.right,Wt.right=B,B=Wt,B.left===null)break}De.left=B,De=B,B=B.left}else if(ot>0){if(B.right===null)break;if(j(K,B.right.key)>0){var Wt=B.right;if(B.right=Wt.left,Wt.left=B,B=Wt,B.right===null)break}W.right=B,W=B,B=B.right}else break}return W.right=B.left,De.left=B.right,B.left=ee.right,B.right=ee.left,B}function T(K,B,j,ee){var W=new R(K,B);if(j===null)return W.left=W.right=null,W;j=L(K,j,ee);var De=ee(K,j.key);return De<0?(W.left=j.left,W.right=j,j.left=null):De>=0&&(W.right=j.right,W.left=j,j.right=null),W}function O(K,B,j){var ee=null,W=null;if(B){B=L(K,B,j);var De=j(B.key,K);De===0?(ee=B.left,W=B.right):De<0?(W=B.right,B.right=null,ee=B):(ee=B.left,B.left=null,W=B)}return{left:ee,right:W}}function F(K,B,j){return B===null?K:(K===null||(B=L(K.key,B,j),B.left=K),B)}function ue(K,B,j,ee,W){if(K){ee(""+B+(j?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+W(K)+`
`);var De=B+(j?"    ":"\u2502   ");K.left&&ue(K.left,De,!1,ee,W),K.right&&ue(K.right,De,!0,ee,W)}}var Ae=function(){function K(B){B===void 0&&(B=z),this._root=null,this._size=0,this._comparator=B}return K.prototype.insert=function(B,j){return this._size++,this._root=T(B,j,this._root,this._comparator)},K.prototype.add=function(B,j){var ee=new R(B,j);this._root===null&&(ee.left=ee.right=null,this._size++,this._root=ee);var W=this._comparator,De=L(B,this._root,W),ot=W(B,De.key);return ot===0?this._root=De:(ot<0?(ee.left=De.left,ee.right=De,De.left=null):ot>0&&(ee.right=De.right,ee.left=De,De.right=null),this._size++,this._root=ee),this._root},K.prototype.remove=function(B){this._root=this._remove(B,this._root,this._comparator)},K.prototype._remove=function(B,j,ee){var W;if(j===null)return null;j=L(B,j,ee);var De=ee(B,j.key);return De===0?(j.left===null?W=j.right:(W=L(B,j.left,ee),W.right=j.right),this._size--,W):j},K.prototype.pop=function(){var B=this._root;if(B){for(;B.left;)B=B.left;return this._root=L(B.key,this._root,this._comparator),this._root=this._remove(B.key,this._root,this._comparator),{key:B.key,data:B.data}}return null},K.prototype.findStatic=function(B){for(var j=this._root,ee=this._comparator;j;){var W=ee(B,j.key);if(W===0)return j;W<0?j=j.left:j=j.right}return null},K.prototype.find=function(B){return this._root&&(this._root=L(B,this._root,this._comparator),this._comparator(B,this._root.key)!==0)?null:this._root},K.prototype.contains=function(B){for(var j=this._root,ee=this._comparator;j;){var W=ee(B,j.key);if(W===0)return!0;W<0?j=j.left:j=j.right}return!1},K.prototype.forEach=function(B,j){for(var ee=this._root,W=[],De=!1;!De;)ee!==null?(W.push(ee),ee=ee.left):W.length!==0?(ee=W.pop(),B.call(j,ee),ee=ee.right):De=!0;return this},K.prototype.range=function(B,j,ee,W){for(var De=[],ot=this._comparator,Wt=this._root,Ct;De.length!==0||Wt;)if(Wt)De.push(Wt),Wt=Wt.left;else{if(Wt=De.pop(),Ct=ot(Wt.key,j),Ct>0)break;if(ot(Wt.key,B)>=0&&ee.call(W,Wt))return this;Wt=Wt.right}return this},K.prototype.keys=function(){var B=[];return this.forEach(function(j){var ee=j.key;return B.push(ee)}),B},K.prototype.values=function(){var B=[];return this.forEach(function(j){var ee=j.data;return B.push(ee)}),B},K.prototype.min=function(){return this._root?this.minNode(this._root).key:null},K.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},K.prototype.minNode=function(B){if(B===void 0&&(B=this._root),B)for(;B.left;)B=B.left;return B},K.prototype.maxNode=function(B){if(B===void 0&&(B=this._root),B)for(;B.right;)B=B.right;return B},K.prototype.at=function(B){for(var j=this._root,ee=!1,W=0,De=[];!ee;)if(j)De.push(j),j=j.left;else if(De.length>0){if(j=De.pop(),W===B)return j;W++,j=j.right}else ee=!0;return null},K.prototype.next=function(B){var j=this._root,ee=null;if(B.right){for(ee=B.right;ee.left;)ee=ee.left;return ee}for(var W=this._comparator;j;){var De=W(B.key,j.key);if(De===0)break;De<0?(ee=j,j=j.left):j=j.right}return ee},K.prototype.prev=function(B){var j=this._root,ee=null;if(B.left!==null){for(ee=B.left;ee.right;)ee=ee.right;return ee}for(var W=this._comparator;j;){var De=W(B.key,j.key);if(De===0)break;De<0?j=j.left:(ee=j,j=j.right)}return ee},K.prototype.clear=function(){return this._root=null,this._size=0,this},K.prototype.toList=function(){return fe(this._root)},K.prototype.load=function(B,j,ee){j===void 0&&(j=[]),ee===void 0&&(ee=!1);var W=B.length,De=this._comparator;if(ee&&bt(B,j,0,W-1,De),this._root===null)this._root=re(B,j,0,W),this._size=W;else{var ot=je(this.toList(),pe(B,j),De);W=this._size+W,this._root=ke({head:ot},0,W)}return this},K.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(K.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),K.prototype.toString=function(B){B===void 0&&(B=function(W){return String(W.key)});var j=[];return ue(this._root,"",!0,function(ee){return j.push(ee)},B),j.join("")},K.prototype.update=function(B,j,ee){var W=this._comparator,De=O(B,this._root,W),ot=De.left,Wt=De.right;W(B,j)<0?Wt=T(j,ee,Wt,W):ot=T(j,ee,ot,W),this._root=F(ot,Wt,W)},K.prototype.split=function(B){return O(B,this._root,this._comparator)},K}();function re(K,B,j,ee){var W=ee-j;if(W>0){var De=j+Math.floor(W/2),ot=K[De],Wt=B[De],Ct=new R(ot,Wt);return Ct.left=re(K,B,j,De),Ct.right=re(K,B,De+1,ee),Ct}return null}function pe(K,B){for(var j=new R(null,null),ee=j,W=0;W<K.length;W++)ee=ee.next=new R(K[W],B[W]);return ee.next=null,j.next}function fe(K){for(var B=K,j=[],ee=!1,W=new R(null,null),De=W;!ee;)B?(j.push(B),B=B.left):j.length>0?(B=De=De.next=j.pop(),B=B.right):ee=!0;return De.next=null,W.next}function ke(K,B,j){var ee=j-B;if(ee>0){var W=B+Math.floor(ee/2),De=ke(K,B,W),ot=K.head;return ot.left=De,K.head=K.head.next,ot.right=ke(K,W+1,j),ot}return null}function je(K,B,j){for(var ee=new R(null,null),W=ee,De=K,ot=B;De!==null&&ot!==null;)j(De.key,ot.key)<0?(W.next=De,De=De.next):(W.next=ot,ot=ot.next),W=W.next;return De!==null?W.next=De:ot!==null&&(W.next=ot),ee.next}function bt(K,B,j,ee,W){if(!(j>=ee)){for(var De=K[j+ee>>1],ot=j-1,Wt=ee+1;;){do ot++;while(W(K[ot],De)<0);do Wt--;while(W(K[Wt],De)>0);if(ot>=Wt)break;var Ct=K[ot];K[ot]=K[Wt],K[Wt]=Ct,Ct=B[ot],B[ot]=B[Wt],B[Wt]=Ct}bt(K,B,j,Wt,W),bt(K,B,Wt+1,ee,W)}}var ut=function(B,j){return B.ll.x<=j.x&&j.x<=B.ur.x&&B.ll.y<=j.y&&j.y<=B.ur.y},wt=function(B,j){if(j.ur.x<B.ll.x||B.ur.x<j.ll.x||j.ur.y<B.ll.y||B.ur.y<j.ll.y)return null;var ee=B.ll.x<j.ll.x?j.ll.x:B.ll.x,W=B.ur.x<j.ur.x?B.ur.x:j.ur.x,De=B.ll.y<j.ll.y?j.ll.y:B.ll.y,ot=B.ur.y<j.ur.y?B.ur.y:j.ur.y;return{ll:{x:ee,y:De},ur:{x:W,y:ot}}},se=Number.EPSILON;se===void 0&&(se=Math.pow(2,-52));var qe=se*se,me=function(B,j){if(-se<B&&B<se&&-se<j&&j<se)return 0;var ee=B-j;return ee*ee<qe*B*j?0:B<j?-1:1},_e=function(){function K(){C(this,K),this.reset()}return $(K,[{key:"reset",value:function(){this.xRounder=new Te,this.yRounder=new Te}},{key:"round",value:function(j,ee){return{x:this.xRounder.round(j),y:this.yRounder.round(ee)}}}]),K}(),Te=function(){function K(){C(this,K),this.tree=new Ae,this.round(0)}return $(K,[{key:"round",value:function(j){var ee=this.tree.add(j),W=this.tree.prev(ee);if(W!==null&&me(ee.key,W.key)===0)return this.tree.remove(j),W.key;var De=this.tree.next(ee);return De!==null&&me(ee.key,De.key)===0?(this.tree.remove(j),De.key):j}}]),K}(),ht=new _e,We=function(B,j){return B.x*j.y-B.y*j.x},Ne=function(B,j){return B.x*j.x+B.y*j.y},he=function(B,j,ee){var W={x:j.x-B.x,y:j.y-B.y},De={x:ee.x-B.x,y:ee.y-B.y},ot=We(W,De);return me(ot,0)},Ve=function(B){return Math.sqrt(Ne(B,B))},ie=function(B,j,ee){var W={x:j.x-B.x,y:j.y-B.y},De={x:ee.x-B.x,y:ee.y-B.y};return We(De,W)/Ve(De)/Ve(W)},ze=function(B,j,ee){var W={x:j.x-B.x,y:j.y-B.y},De={x:ee.x-B.x,y:ee.y-B.y};return Ne(De,W)/Ve(De)/Ve(W)},Le=function(B,j,ee){return j.y===0?null:{x:B.x+j.x/j.y*(ee-B.y),y:ee}},Re=function(B,j,ee){return j.x===0?null:{x:ee,y:B.y+j.y/j.x*(ee-B.x)}},st=function(B,j,ee,W){if(j.x===0)return Re(ee,W,B.x);if(W.x===0)return Re(B,j,ee.x);if(j.y===0)return Le(ee,W,B.y);if(W.y===0)return Le(B,j,ee.y);var De=We(j,W);if(De==0)return null;var ot={x:ee.x-B.x,y:ee.y-B.y},Wt=We(ot,j)/De,Ct=We(ot,W)/De,Qt=B.x+Ct*j.x,ir=ee.x+Wt*W.x,Er=B.y+Ct*j.y,Qr=ee.y+Wt*W.y,Mt=(Qt+ir)/2,br=(Er+Qr)/2;return{x:Mt,y:br}},vt=function(){$(K,null,[{key:"compare",value:function(j,ee){var W=K.comparePoints(j.point,ee.point);return W!==0?W:(j.point!==ee.point&&j.link(ee),j.isLeft!==ee.isLeft?j.isLeft?1:-1:ar.compare(j.segment,ee.segment))}},{key:"comparePoints",value:function(j,ee){return j.x<ee.x?-1:j.x>ee.x?1:j.y<ee.y?-1:j.y>ee.y?1:0}}]);function K(B,j){C(this,K),B.events===void 0?B.events=[this]:B.events.push(this),this.point=B,this.isLeft=j}return $(K,[{key:"link",value:function(j){if(j.point===this.point)throw new Error("Tried to link already linked events");for(var ee=j.point.events,W=0,De=ee.length;W<De;W++){var ot=ee[W];this.point.events.push(ot),ot.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var j=this.point.events.length,ee=0;ee<j;ee++){var W=this.point.events[ee];if(W.segment.consumedBy===void 0)for(var De=ee+1;De<j;De++){var ot=this.point.events[De];ot.consumedBy===void 0&&W.otherSE.point.events===ot.otherSE.point.events&&W.segment.consume(ot.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var j=[],ee=0,W=this.point.events.length;ee<W;ee++){var De=this.point.events[ee];De!==this&&!De.segment.ringOut&&De.segment.isInResult()&&j.push(De)}return j}},{key:"getLeftmostComparator",value:function(j){var ee=this,W=new Map,De=function(Wt){var Ct=Wt.otherSE;W.set(Wt,{sine:ie(ee.point,j.point,Ct.point),cosine:ze(ee.point,j.point,Ct.point)})};return function(ot,Wt){W.has(ot)||De(ot),W.has(Wt)||De(Wt);var Ct=W.get(ot),Qt=Ct.sine,ir=Ct.cosine,Er=W.get(Wt),Qr=Er.sine,Mt=Er.cosine;return Qt>=0&&Qr>=0?ir<Mt?1:ir>Mt?-1:0:Qt<0&&Qr<0?ir<Mt?-1:ir>Mt?1:0:Qr<Qt?-1:Qr>Qt?1:0}}}]),K}(),Dt=0,ar=function(){$(K,null,[{key:"compare",value:function(j,ee){var W=j.leftSE.point.x,De=ee.leftSE.point.x,ot=j.rightSE.point.x,Wt=ee.rightSE.point.x;if(Wt<W)return 1;if(ot<De)return-1;var Ct=j.leftSE.point.y,Qt=ee.leftSE.point.y,ir=j.rightSE.point.y,Er=ee.rightSE.point.y;if(W<De){if(Qt<Ct&&Qt<ir)return 1;if(Qt>Ct&&Qt>ir)return-1;var Qr=j.comparePoint(ee.leftSE.point);if(Qr<0)return 1;if(Qr>0)return-1;var Mt=ee.comparePoint(j.rightSE.point);return Mt!==0?Mt:-1}if(W>De){if(Ct<Qt&&Ct<Er)return-1;if(Ct>Qt&&Ct>Er)return 1;var br=ee.comparePoint(j.leftSE.point);if(br!==0)return br;var Nt=j.comparePoint(ee.rightSE.point);return Nt<0?1:Nt>0?-1:1}if(Ct<Qt)return-1;if(Ct>Qt)return 1;if(ot<Wt){var Pr=ee.comparePoint(j.rightSE.point);if(Pr!==0)return Pr}if(ot>Wt){var _r=j.comparePoint(ee.rightSE.point);if(_r<0)return 1;if(_r>0)return-1}if(ot!==Wt){var kr=ir-Ct,zt=ot-W,mr=Er-Qt,Or=Wt-De;if(kr>zt&&mr<Or)return 1;if(kr<zt&&mr>Or)return-1}return ot>Wt?1:ot<Wt||ir<Er?-1:ir>Er?1:j.id<ee.id?-1:j.id>ee.id?1:0}}]);function K(B,j,ee,W){C(this,K),this.id=++Dt,this.leftSE=B,B.segment=this,B.otherSE=j,this.rightSE=j,j.segment=this,j.otherSE=B,this.rings=ee,this.windings=W}return $(K,[{key:"replaceRightSE",value:function(j){this.rightSE=j,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var j=this.leftSE.point.y,ee=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:j<ee?j:ee},ur:{x:this.rightSE.point.x,y:j>ee?j:ee}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(j){return j.x===this.leftSE.point.x&&j.y===this.leftSE.point.y||j.x===this.rightSE.point.x&&j.y===this.rightSE.point.y}},{key:"comparePoint",value:function(j){if(this.isAnEndpoint(j))return 0;var ee=this.leftSE.point,W=this.rightSE.point,De=this.vector();if(ee.x===W.x)return j.x===ee.x?0:j.x<ee.x?1:-1;var ot=(j.y-ee.y)/De.y,Wt=ee.x+ot*De.x;if(j.x===Wt)return 0;var Ct=(j.x-ee.x)/De.x,Qt=ee.y+Ct*De.y;return j.y===Qt?0:j.y<Qt?-1:1}},{key:"getIntersection",value:function(j){var ee=this.bbox(),W=j.bbox(),De=wt(ee,W);if(De===null)return null;var ot=this.leftSE.point,Wt=this.rightSE.point,Ct=j.leftSE.point,Qt=j.rightSE.point,ir=ut(ee,Ct)&&this.comparePoint(Ct)===0,Er=ut(W,ot)&&j.comparePoint(ot)===0,Qr=ut(ee,Qt)&&this.comparePoint(Qt)===0,Mt=ut(W,Wt)&&j.comparePoint(Wt)===0;if(Er&&ir)return Mt&&!Qr?Wt:!Mt&&Qr?Qt:null;if(Er)return Qr&&ot.x===Qt.x&&ot.y===Qt.y?null:ot;if(ir)return Mt&&Wt.x===Ct.x&&Wt.y===Ct.y?null:Ct;if(Mt&&Qr)return null;if(Mt)return Wt;if(Qr)return Qt;var br=st(ot,this.vector(),Ct,j.vector());return br===null||!ut(De,br)?null:ht.round(br.x,br.y)}},{key:"split",value:function(j){var ee=[],W=j.events!==void 0,De=new vt(j,!0),ot=new vt(j,!1),Wt=this.rightSE;this.replaceRightSE(ot),ee.push(ot),ee.push(De);var Ct=new K(De,Wt,this.rings.slice(),this.windings.slice());return vt.comparePoints(Ct.leftSE.point,Ct.rightSE.point)>0&&Ct.swapEvents(),vt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),W&&(De.checkForConsuming(),ot.checkForConsuming()),ee}},{key:"swapEvents",value:function(){var j=this.rightSE;this.rightSE=this.leftSE,this.leftSE=j,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var ee=0,W=this.windings.length;ee<W;ee++)this.windings[ee]*=-1}},{key:"consume",value:function(j){for(var ee=this,W=j;ee.consumedBy;)ee=ee.consumedBy;for(;W.consumedBy;)W=W.consumedBy;var De=K.compare(ee,W);if(De!==0){if(De>0){var ot=ee;ee=W,W=ot}if(ee.prev===W){var Wt=ee;ee=W,W=Wt}for(var Ct=0,Qt=W.rings.length;Ct<Qt;Ct++){var ir=W.rings[Ct],Er=W.windings[Ct],Qr=ee.rings.indexOf(ir);Qr===-1?(ee.rings.push(ir),ee.windings.push(Er)):ee.windings[Qr]+=Er}W.rings=null,W.windings=null,W.consumedBy=ee,W.leftSE.consumedBy=ee.leftSE,W.rightSE.consumedBy=ee.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var j=this.prev.consumedBy||this.prev;this._beforeState=j.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var j=this.beforeState();this._afterState={rings:j.rings.slice(0),windings:j.windings.slice(0),multiPolys:[]};for(var ee=this._afterState.rings,W=this._afterState.windings,De=this._afterState.multiPolys,ot=0,Wt=this.rings.length;ot<Wt;ot++){var Ct=this.rings[ot],Qt=this.windings[ot],ir=ee.indexOf(Ct);ir===-1?(ee.push(Ct),W.push(Qt)):W[ir]+=Qt}for(var Er=[],Qr=[],Mt=0,br=ee.length;Mt<br;Mt++)if(W[Mt]!==0){var Nt=ee[Mt],Pr=Nt.poly;if(Qr.indexOf(Pr)===-1)if(Nt.isExterior)Er.push(Pr);else{Qr.indexOf(Pr)===-1&&Qr.push(Pr);var _r=Er.indexOf(Nt.poly);_r!==-1&&Er.splice(_r,1)}}for(var kr=0,zt=Er.length;kr<zt;kr++){var mr=Er[kr].multiPoly;De.indexOf(mr)===-1&&De.push(mr)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var j=this.beforeState().multiPolys,ee=this.afterState().multiPolys;switch(Zt.type){case"union":{var W=j.length===0,De=ee.length===0;this._isInResult=W!==De;break}case"intersection":{var ot,Wt;j.length<ee.length?(ot=j.length,Wt=ee.length):(ot=ee.length,Wt=j.length),this._isInResult=Wt===Zt.numMultiPolys&&ot<Wt;break}case"xor":{var Ct=Math.abs(j.length-ee.length);this._isInResult=Ct%2===1;break}case"difference":{var Qt=function(Er){return Er.length===1&&Er[0].isSubject};this._isInResult=Qt(j)!==Qt(ee);break}default:throw new Error("Unrecognized operation type found ".concat(Zt.type))}return this._isInResult}}],[{key:"fromRing",value:function(j,ee,W){var De,ot,Wt,Ct=vt.comparePoints(j,ee);if(Ct<0)De=j,ot=ee,Wt=1;else if(Ct>0)De=ee,ot=j,Wt=-1;else throw new Error("Tried to create degenerate segment at [".concat(j.x,", ").concat(j.y,"]"));var Qt=new vt(De,!0),ir=new vt(ot,!1);return new K(Qt,ir,[W],[Wt])}}]),K}(),$t=function(){function K(B,j,ee){if(C(this,K),!Array.isArray(B)||B.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=j,this.isExterior=ee,this.segments=[],typeof B[0][0]!="number"||typeof B[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var W=ht.round(B[0][0],B[0][1]);this.bbox={ll:{x:W.x,y:W.y},ur:{x:W.x,y:W.y}};for(var De=W,ot=1,Wt=B.length;ot<Wt;ot++){if(typeof B[ot][0]!="number"||typeof B[ot][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ct=ht.round(B[ot][0],B[ot][1]);Ct.x===De.x&&Ct.y===De.y||(this.segments.push(ar.fromRing(De,Ct,this)),Ct.x<this.bbox.ll.x&&(this.bbox.ll.x=Ct.x),Ct.y<this.bbox.ll.y&&(this.bbox.ll.y=Ct.y),Ct.x>this.bbox.ur.x&&(this.bbox.ur.x=Ct.x),Ct.y>this.bbox.ur.y&&(this.bbox.ur.y=Ct.y),De=Ct)}(W.x!==De.x||W.y!==De.y)&&this.segments.push(ar.fromRing(De,W,this))}return $(K,[{key:"getSweepEvents",value:function(){for(var j=[],ee=0,W=this.segments.length;ee<W;ee++){var De=this.segments[ee];j.push(De.leftSE),j.push(De.rightSE)}return j}}]),K}(),ur=function(){function K(B,j){if(C(this,K),!Array.isArray(B))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new $t(B[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ee=1,W=B.length;ee<W;ee++){var De=new $t(B[ee],this,!1);De.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=De.bbox.ll.x),De.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=De.bbox.ll.y),De.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=De.bbox.ur.x),De.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=De.bbox.ur.y),this.interiorRings.push(De)}this.multiPoly=j}return $(K,[{key:"getSweepEvents",value:function(){for(var j=this.exteriorRing.getSweepEvents(),ee=0,W=this.interiorRings.length;ee<W;ee++)for(var De=this.interiorRings[ee].getSweepEvents(),ot=0,Wt=De.length;ot<Wt;ot++)j.push(De[ot]);return j}}]),K}(),we=function(){function K(B,j){if(C(this,K),!Array.isArray(B))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof B[0][0][0]=="number"&&(B=[B])}catch(ot){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ee=0,W=B.length;ee<W;ee++){var De=new ur(B[ee],this);De.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=De.bbox.ll.x),De.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=De.bbox.ll.y),De.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=De.bbox.ur.x),De.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=De.bbox.ur.y),this.polys.push(De)}this.isSubject=j}return $(K,[{key:"getSweepEvents",value:function(){for(var j=[],ee=0,W=this.polys.length;ee<W;ee++)for(var De=this.polys[ee].getSweepEvents(),ot=0,Wt=De.length;ot<Wt;ot++)j.push(De[ot]);return j}}]),K}(),At=function(){$(K,null,[{key:"factory",value:function(j){for(var ee=[],W=0,De=j.length;W<De;W++){var ot=j[W];if(!(!ot.isInResult()||ot.ringOut)){for(var Wt=null,Ct=ot.leftSE,Qt=ot.rightSE,ir=[Ct],Er=Ct.point,Qr=[];Wt=Ct,Ct=Qt,ir.push(Ct),Ct.point!==Er;)for(;;){var Mt=Ct.getAvailableLinkedEvents();if(Mt.length===0){var br=ir[0].point,Nt=ir[ir.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(br.x,",")+" ".concat(br.y,"]. Last matching segment found ends at")+" [".concat(Nt.x,", ").concat(Nt.y,"]."))}if(Mt.length===1){Qt=Mt[0].otherSE;break}for(var Pr=null,_r=0,kr=Qr.length;_r<kr;_r++)if(Qr[_r].point===Ct.point){Pr=_r;break}if(Pr!==null){var zt=Qr.splice(Pr)[0],mr=ir.splice(zt.index);mr.unshift(mr[0].otherSE),ee.push(new K(mr.reverse()));continue}Qr.push({index:ir.length,point:Ct.point});var Or=Ct.getLeftmostComparator(Wt);Qt=Mt.sort(Or)[0].otherSE;break}ee.push(new K(ir))}}return ee}}]);function K(B){C(this,K),this.events=B;for(var j=0,ee=B.length;j<ee;j++)B[j].segment.ringOut=this;this.poly=null}return $(K,[{key:"getGeom",value:function(){for(var j=this.events[0].point,ee=[j],W=1,De=this.events.length-1;W<De;W++){var ot=this.events[W].point,Wt=this.events[W+1].point;he(ot,j,Wt)!==0&&(ee.push(ot),j=ot)}if(ee.length===1)return null;var Ct=ee[0],Qt=ee[1];he(Ct,j,Qt)===0&&ee.shift(),ee.push(ee[0]);for(var ir=this.isExteriorRing()?1:-1,Er=this.isExteriorRing()?0:ee.length-1,Qr=this.isExteriorRing()?ee.length:-1,Mt=[],br=Er;br!=Qr;br+=ir)Mt.push([ee[br].x,ee[br].y]);return Mt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var j=this.enclosingRing();this._isExteriorRing=j?!j.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var j=this.events[0],ee=1,W=this.events.length;ee<W;ee++){var De=this.events[ee];vt.compare(j,De)>0&&(j=De)}for(var ot=j.segment.prevInResult(),Wt=ot?ot.prevInResult():null;;){if(!ot)return null;if(!Wt)return ot.ringOut;if(Wt.ringOut!==ot.ringOut)return Wt.ringOut.enclosingRing()!==ot.ringOut?ot.ringOut:ot.ringOut.enclosingRing();ot=Wt.prevInResult(),Wt=ot?ot.prevInResult():null}}}]),K}(),nt=function(){function K(B){C(this,K),this.exteriorRing=B,B.poly=this,this.interiorRings=[]}return $(K,[{key:"addInterior",value:function(j){this.interiorRings.push(j),j.poly=this}},{key:"getGeom",value:function(){var j=[this.exteriorRing.getGeom()];if(j[0]===null)return null;for(var ee=0,W=this.interiorRings.length;ee<W;ee++){var De=this.interiorRings[ee].getGeom();De!==null&&j.push(De)}return j}}]),K}(),Lt=function(){function K(B){C(this,K),this.rings=B,this.polys=this._composePolys(B)}return $(K,[{key:"getGeom",value:function(){for(var j=[],ee=0,W=this.polys.length;ee<W;ee++){var De=this.polys[ee].getGeom();De!==null&&j.push(De)}return j}},{key:"_composePolys",value:function(j){for(var ee=[],W=0,De=j.length;W<De;W++){var ot=j[W];if(!ot.poly)if(ot.isExteriorRing())ee.push(new nt(ot));else{var Wt=ot.enclosingRing();Wt.poly||ee.push(new nt(Wt)),Wt.poly.addInterior(ot)}}return ee}}]),K}(),St=function(){function K(B){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ar.compare;C(this,K),this.queue=B,this.tree=new Ae(j),this.segments=[]}return $(K,[{key:"process",value:function(j){var ee=j.segment,W=[];if(j.consumedBy)return j.isLeft?this.queue.remove(j.otherSE):this.tree.remove(ee),W;var De=j.isLeft?this.tree.insert(ee):this.tree.find(ee);if(!De)throw new Error("Unable to find segment #".concat(ee.id," ")+"[".concat(ee.leftSE.point.x,", ").concat(ee.leftSE.point.y,"] -> ")+"[".concat(ee.rightSE.point.x,", ").concat(ee.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var ot=De,Wt=De,Ct=void 0,Qt=void 0;Ct===void 0;)ot=this.tree.prev(ot),ot===null?Ct=null:ot.key.consumedBy===void 0&&(Ct=ot.key);for(;Qt===void 0;)Wt=this.tree.next(Wt),Wt===null?Qt=null:Wt.key.consumedBy===void 0&&(Qt=Wt.key);if(j.isLeft){var ir=null;if(Ct){var Er=Ct.getIntersection(ee);if(Er!==null&&(ee.isAnEndpoint(Er)||(ir=Er),!Ct.isAnEndpoint(Er)))for(var Qr=this._splitSafely(Ct,Er),Mt=0,br=Qr.length;Mt<br;Mt++)W.push(Qr[Mt])}var Nt=null;if(Qt){var Pr=Qt.getIntersection(ee);if(Pr!==null&&(ee.isAnEndpoint(Pr)||(Nt=Pr),!Qt.isAnEndpoint(Pr)))for(var _r=this._splitSafely(Qt,Pr),kr=0,zt=_r.length;kr<zt;kr++)W.push(_r[kr])}if(ir!==null||Nt!==null){var mr=null;if(ir===null)mr=Nt;else if(Nt===null)mr=ir;else{var Or=vt.comparePoints(ir,Nt);mr=Or<=0?ir:Nt}this.queue.remove(ee.rightSE),W.push(ee.rightSE);for(var X=ee.split(mr),Nr=0,Xe=X.length;Nr<Xe;Nr++)W.push(X[Nr])}W.length>0?(this.tree.remove(ee),W.push(j)):(this.segments.push(ee),ee.prev=Ct)}else{if(Ct&&Qt){var xe=Ct.getIntersection(Qt);if(xe!==null){if(!Ct.isAnEndpoint(xe))for(var rt=this._splitSafely(Ct,xe),kt=0,cr=rt.length;kt<cr;kt++)W.push(rt[kt]);if(!Qt.isAnEndpoint(xe))for(var Ar=this._splitSafely(Qt,xe),Lr=0,sr=Ar.length;Lr<sr;Lr++)W.push(Ar[Lr])}}this.tree.remove(ee)}return W}},{key:"_splitSafely",value:function(j,ee){this.tree.remove(j);var W=j.rightSE;this.queue.remove(W);var De=j.split(ee);return De.push(W),j.consumedBy===void 0&&this.tree.insert(j),De}}]),K}(),Ut=typeof v!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,lt=typeof v!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Et=function(){function K(){C(this,K)}return $(K,[{key:"run",value:function(j,ee,W){Zt.type=j,ht.reset();for(var De=[new we(ee,!0)],ot=0,Wt=W.length;ot<Wt;ot++)De.push(new we(W[ot],!1));if(Zt.numMultiPolys=De.length,Zt.type==="difference")for(var Ct=De[0],Qt=1;Qt<De.length;)wt(De[Qt].bbox,Ct.bbox)!==null?Qt++:De.splice(Qt,1);if(Zt.type==="intersection"){for(var ir=0,Er=De.length;ir<Er;ir++)for(var Qr=De[ir],Mt=ir+1,br=De.length;Mt<br;Mt++)if(wt(Qr.bbox,De[Mt].bbox)===null)return[]}for(var Nt=new Ae(vt.compare),Pr=0,_r=De.length;Pr<_r;Pr++)for(var kr=De[Pr].getSweepEvents(),zt=0,mr=kr.length;zt<mr;zt++)if(Nt.insert(kr[zt]),Nt.size>Ut)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Or=new St(Nt),X=Nt.size,Nr=Nt.pop();Nr;){var Xe=Nr.key;if(Nt.size===X){var xe=Xe.segment;throw new Error("Unable to pop() ".concat(Xe.isLeft?"left":"right"," SweepEvent ")+"[".concat(Xe.point.x,", ").concat(Xe.point.y,"] from segment #").concat(xe.id," ")+"[".concat(xe.leftSE.point.x,", ").concat(xe.leftSE.point.y,"] -> ")+"[".concat(xe.rightSE.point.x,", ").concat(xe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Nt.size>Ut)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Or.segments.length>lt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var rt=Or.process(Xe),kt=0,cr=rt.length;kt<cr;kt++){var Ar=rt[kt];Ar.consumedBy===void 0&&Nt.insert(Ar)}X=Nt.size,Nr=Nt.pop()}ht.reset();var Lr=At.factory(Or.segments),sr=new Lt(Lr);return sr.getGeom()}}]),K}(),Zt=new Et,Be=function(B){for(var j=arguments.length,ee=new Array(j>1?j-1:0),W=1;W<j;W++)ee[W-1]=arguments[W];return Zt.run("union",B,ee)},He=function(B){for(var j=arguments.length,ee=new Array(j>1?j-1:0),W=1;W<j;W++)ee[W-1]=arguments[W];return Zt.run("intersection",B,ee)},ft=function(B){for(var j=arguments.length,ee=new Array(j>1?j-1:0),W=1;W<j;W++)ee[W-1]=arguments[W];return Zt.run("xor",B,ee)},Z=function(B){for(var j=arguments.length,ee=new Array(j>1?j-1:0),W=1;W<j;W++)ee[W-1]=arguments[W];return Zt.run("difference",B,ee)},J={union:Be,intersection:He,xor:ft,difference:Z};return J})},34155:function(Qe){var te=Qe.exports={},m,v;function C(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?m=setTimeout:m=C}catch(pe){m=C}try{typeof clearTimeout=="function"?v=clearTimeout:v=l}catch(pe){v=l}})();function $(pe){if(m===setTimeout)return setTimeout(pe,0);if((m===C||!m)&&setTimeout)return m=setTimeout,setTimeout(pe,0);try{return m(pe,0)}catch(fe){try{return m.call(null,pe,0)}catch(ke){return m.call(this,pe,0)}}}function R(pe){if(v===clearTimeout)return clearTimeout(pe);if((v===l||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(pe);try{return v(pe)}catch(fe){try{return v.call(null,pe)}catch(ke){return v.call(this,pe)}}}var z=[],L=!1,T,O=-1;function F(){!L||!T||(L=!1,T.length?z=T.concat(z):O=-1,z.length&&ue())}function ue(){if(!L){var pe=$(F);L=!0;for(var fe=z.length;fe;){for(T=z,z=[];++O<fe;)T&&T[O].run();O=-1,fe=z.length}T=null,L=!1,R(pe)}}te.nextTick=function(pe){var fe=new Array(arguments.length-1);if(arguments.length>1)for(var ke=1;ke<arguments.length;ke++)fe[ke-1]=arguments[ke];z.push(new Ae(pe,fe)),z.length===1&&!L&&$(ue)};function Ae(pe,fe){this.fun=pe,this.array=fe}Ae.prototype.run=function(){this.fun.apply(null,this.array)},te.title="browser",te.browser=!0,te.env={},te.argv=[],te.version="",te.versions={};function re(){}te.on=re,te.addListener=re,te.once=re,te.off=re,te.removeListener=re,te.removeAllListeners=re,te.emit=re,te.prependListener=re,te.prependOnceListener=re,te.listeners=function(pe){return[]},te.binding=function(pe){throw new Error("process.binding is not supported")},te.cwd=function(){return"/"},te.chdir=function(pe){throw new Error("process.chdir is not supported")},te.umask=function(){return 0}},50132:function(Qe,te,m){"use strict";var v=m(87462),C=m(4942),l=m(91),$=m(1413),R=m(15671),z=m(43144),L=m(60136),T=m(29388),O=m(67294),F=m(94184),ue=m.n(F),Ae=function(re){(0,L.Z)(fe,re);var pe=(0,T.Z)(fe);function fe(ke){var je;(0,R.Z)(this,fe),je=pe.call(this,ke),je.handleChange=function(ut){var wt=je.props,se=wt.disabled,qe=wt.onChange;se||("checked"in je.props||je.setState({checked:ut.target.checked}),qe&&qe({target:(0,$.Z)((0,$.Z)({},je.props),{},{checked:ut.target.checked}),stopPropagation:function(){ut.stopPropagation()},preventDefault:function(){ut.preventDefault()},nativeEvent:ut.nativeEvent}))},je.saveInput=function(ut){je.input=ut};var bt="checked"in ke?ke.checked:ke.defaultChecked;return je.state={checked:bt},je}return(0,z.Z)(fe,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var je,bt=this.props,ut=bt.prefixCls,wt=bt.className,se=bt.style,qe=bt.name,me=bt.id,_e=bt.type,Te=bt.disabled,ht=bt.readOnly,We=bt.tabIndex,Ne=bt.onClick,he=bt.onFocus,Ve=bt.onBlur,ie=bt.onKeyDown,ze=bt.onKeyPress,Le=bt.onKeyUp,Re=bt.autoFocus,st=bt.value,vt=bt.required,Dt=(0,l.Z)(bt,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),ar=Object.keys(Dt).reduce(function(we,At){return(At.substr(0,5)==="aria-"||At.substr(0,5)==="data-"||At==="role")&&(we[At]=Dt[At]),we},{}),$t=this.state.checked,ur=ue()(ut,wt,(je={},(0,C.Z)(je,"".concat(ut,"-checked"),$t),(0,C.Z)(je,"".concat(ut,"-disabled"),Te),je));return O.createElement("span",{className:ur,style:se},O.createElement("input",(0,v.Z)({name:qe,id:me,type:_e,required:vt,readOnly:ht,disabled:Te,tabIndex:We,className:"".concat(ut,"-input"),checked:!!$t,onClick:Ne,onFocus:he,onBlur:Ve,onKeyUp:Le,onKeyDown:ie,onKeyPress:ze,onChange:this.handleChange,autoFocus:Re,ref:this.saveInput,value:st},ar)),O.createElement("span",{className:"".concat(ut,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(je,bt){return"checked"in je?(0,$.Z)((0,$.Z)({},bt),{},{checked:je.checked}):null}}]),fe}(O.Component);Ae.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},te.Z=Ae},24407:function(Qe,te,m){"use strict";m.d(te,{zb:function(){return je},RV:function(){return ou}});var v=m(67294),C=m(87462),l=m(91),$=m(4942),R=m(1413),z=m(74902),L=m(15671),T=m(43144),O=m(97326),F=m(60136),ue=m(29388),Ae=m(50344),re=m(80334),pe="RC_FORM_INTERNAL_HOOKS",fe=function(){(0,re.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},ke=v.createContext({getFieldValue:fe,getFieldsValue:fe,getFieldError:fe,getFieldWarning:fe,getFieldsError:fe,isFieldsTouched:fe,isFieldTouched:fe,isFieldValidating:fe,isFieldsValidating:fe,resetFields:fe,setFields:fe,setFieldValue:fe,setFieldsValue:fe,validateFields:fe,submit:fe,getInternalHooks:function(){return fe(),{dispatch:fe,initEntityValue:fe,registerField:fe,useSubscribe:fe,setInitialValues:fe,destroyForm:fe,setCallbacks:fe,registerWatch:fe,getFields:fe,setValidateMessages:fe,setPreserve:fe,getInitialValue:fe}}}),je=ke;function bt(Yr){return Yr==null?[]:Array.isArray(Yr)?Yr:[Yr]}var ut=m(74165),wt=m(15861),se=m(34155);function qe(){return qe=Object.assign?Object.assign.bind():function(Yr){for(var pr=1;pr<arguments.length;pr++){var at=arguments[pr];for(var hr in at)Object.prototype.hasOwnProperty.call(at,hr)&&(Yr[hr]=at[hr])}return Yr},qe.apply(this,arguments)}function me(Yr,pr){Yr.prototype=Object.create(pr.prototype),Yr.prototype.constructor=Yr,Te(Yr,pr)}function _e(Yr){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(at){return at.__proto__||Object.getPrototypeOf(at)},_e(Yr)}function Te(Yr,pr){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(hr,er){return hr.__proto__=er,hr},Te(Yr,pr)}function ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Yr){return!1}}function We(Yr,pr,at){return ht()?We=Reflect.construct.bind():We=function(er,dn,mn){var Vn=[null];Vn.push.apply(Vn,dn);var ni=Function.bind.apply(er,Vn),si=new ni;return mn&&Te(si,mn.prototype),si},We.apply(null,arguments)}function Ne(Yr){return Function.toString.call(Yr).indexOf("[native code]")!==-1}function he(Yr){var pr=typeof Map=="function"?new Map:void 0;return he=function(hr){if(hr===null||!Ne(hr))return hr;if(typeof hr!="function")throw new TypeError("Super expression must either be null or a function");if(typeof pr!="undefined"){if(pr.has(hr))return pr.get(hr);pr.set(hr,er)}function er(){return We(hr,arguments,_e(this).constructor)}return er.prototype=Object.create(hr.prototype,{constructor:{value:er,enumerable:!1,writable:!0,configurable:!0}}),Te(er,hr)},he(Yr)}var Ve=/%[sdj%]/g,ie=function(){};function ze(Yr){if(!Yr||!Yr.length)return null;var pr={};return Yr.forEach(function(at){var hr=at.field;pr[hr]=pr[hr]||[],pr[hr].push(at)}),pr}function Le(Yr){for(var pr=arguments.length,at=new Array(pr>1?pr-1:0),hr=1;hr<pr;hr++)at[hr-1]=arguments[hr];var er=0,dn=at.length;if(typeof Yr=="function")return Yr.apply(null,at);if(typeof Yr=="string"){var mn=Yr.replace(Ve,function(Vn){if(Vn==="%%")return"%";if(er>=dn)return Vn;switch(Vn){case"%s":return String(at[er++]);case"%d":return Number(at[er++]);case"%j":try{return JSON.stringify(at[er++])}catch(ni){return"[Circular]"}break;default:return Vn}});return mn}return Yr}function Re(Yr){return Yr==="string"||Yr==="url"||Yr==="hex"||Yr==="email"||Yr==="date"||Yr==="pattern"}function st(Yr,pr){return!!(Yr==null||pr==="array"&&Array.isArray(Yr)&&!Yr.length||Re(pr)&&typeof Yr=="string"&&!Yr)}function vt(Yr,pr,at){var hr=[],er=0,dn=Yr.length;function mn(Vn){hr.push.apply(hr,Vn||[]),er++,er===dn&&at(hr)}Yr.forEach(function(Vn){pr(Vn,mn)})}function Dt(Yr,pr,at){var hr=0,er=Yr.length;function dn(mn){if(mn&&mn.length){at(mn);return}var Vn=hr;hr=hr+1,Vn<er?pr(Yr[Vn],dn):at([])}dn([])}function ar(Yr){var pr=[];return Object.keys(Yr).forEach(function(at){pr.push.apply(pr,Yr[at]||[])}),pr}var $t=function(Yr){me(pr,Yr);function pr(at,hr){var er;return er=Yr.call(this,"Async Validation Error")||this,er.errors=at,er.fields=hr,er}return pr}(he(Error));function ur(Yr,pr,at,hr,er){if(pr.first){var dn=new Promise(function(Rr,Mn){var pn=function(Ei){return hr(Ei),Ei.length?Mn(new $t(Ei,ze(Ei))):Rr(er)},wn=ar(Yr);Dt(wn,at,pn)});return dn.catch(function(Rr){return Rr}),dn}var mn=pr.firstFields===!0?Object.keys(Yr):pr.firstFields||[],Vn=Object.keys(Yr),ni=Vn.length,si=0,Si=[],qi=new Promise(function(Rr,Mn){var pn=function(Kn){if(Si.push.apply(Si,Kn),si++,si===ni)return hr(Si),Si.length?Mn(new $t(Si,ze(Si))):Rr(er)};Vn.length||(hr(Si),Rr(er)),Vn.forEach(function(wn){var Kn=Yr[wn];mn.indexOf(wn)!==-1?Dt(Kn,at,pn):vt(Kn,at,pn)})});return qi.catch(function(Rr){return Rr}),qi}function we(Yr){return!!(Yr&&Yr.message!==void 0)}function At(Yr,pr){for(var at=Yr,hr=0;hr<pr.length;hr++){if(at==null)return at;at=at[pr[hr]]}return at}function nt(Yr,pr){return function(at){var hr;return Yr.fullFields?hr=At(pr,Yr.fullFields):hr=pr[at.field||Yr.fullField],we(at)?(at.field=at.field||Yr.fullField,at.fieldValue=hr,at):{message:typeof at=="function"?at():at,fieldValue:hr,field:at.field||Yr.fullField}}}function Lt(Yr,pr){if(pr){for(var at in pr)if(pr.hasOwnProperty(at)){var hr=pr[at];typeof hr=="object"&&typeof Yr[at]=="object"?Yr[at]=qe({},Yr[at],hr):Yr[at]=hr}}return Yr}var St=function(pr,at,hr,er,dn,mn){pr.required&&(!hr.hasOwnProperty(pr.field)||st(at,mn||pr.type))&&er.push(Le(dn.messages.required,pr.fullField))},Ut=function(pr,at,hr,er,dn){(/^\s+$/.test(at)||at==="")&&er.push(Le(dn.messages.whitespace,pr.fullField))},lt,Et=function(){if(lt)return lt;var Yr="[a-fA-F\\d:]",pr=function(oa){return oa&&oa.includeBoundaries?"(?:(?<=\\s|^)(?="+Yr+")|(?<="+Yr+")(?=\\s|$))":""},at="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",hr="[a-fA-F\\d]{1,4}",er=(`
(?:
(?:`+hr+":){7}(?:"+hr+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+hr+":){6}(?:"+at+"|:"+hr+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+hr+":){5}(?::"+at+"|(?::"+hr+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+hr+":){4}(?:(?::"+hr+"){0,1}:"+at+"|(?::"+hr+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+hr+":){3}(?:(?::"+hr+"){0,2}:"+at+"|(?::"+hr+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+hr+":){2}(?:(?::"+hr+"){0,3}:"+at+"|(?::"+hr+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+hr+":){1}(?:(?::"+hr+"){0,4}:"+at+"|(?::"+hr+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+hr+"){0,5}:"+at+"|(?::"+hr+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),dn=new RegExp("(?:^"+at+"$)|(?:^"+er+"$)"),mn=new RegExp("^"+at+"$"),Vn=new RegExp("^"+er+"$"),ni=function(oa){return oa&&oa.exact?dn:new RegExp("(?:"+pr(oa)+at+pr(oa)+")|(?:"+pr(oa)+er+pr(oa)+")","g")};ni.v4=function(Yi){return Yi&&Yi.exact?mn:new RegExp(""+pr(Yi)+at+pr(Yi),"g")},ni.v6=function(Yi){return Yi&&Yi.exact?Vn:new RegExp(""+pr(Yi)+er+pr(Yi),"g")};var si="(?:(?:[a-z]+:)?//)",Si="(?:\\S+(?::\\S*)?@)?",qi=ni.v4().source,Rr=ni.v6().source,Mn="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",pn="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",wn="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",Kn="(?::\\d{2,5})?",Ei='(?:[/?#][^\\s"]*)?',Ji="(?:"+si+"|www\\.)"+Si+"(?:localhost|"+qi+"|"+Rr+"|"+Mn+pn+wn+")"+Kn+Ei;return lt=new RegExp("(?:^"+Ji+"$)","i"),lt},Zt={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Be={integer:function(pr){return Be.number(pr)&&parseInt(pr,10)===pr},float:function(pr){return Be.number(pr)&&!Be.integer(pr)},array:function(pr){return Array.isArray(pr)},regexp:function(pr){if(pr instanceof RegExp)return!0;try{return!!new RegExp(pr)}catch(at){return!1}},date:function(pr){return typeof pr.getTime=="function"&&typeof pr.getMonth=="function"&&typeof pr.getYear=="function"&&!isNaN(pr.getTime())},number:function(pr){return isNaN(pr)?!1:typeof pr=="number"},object:function(pr){return typeof pr=="object"&&!Be.array(pr)},method:function(pr){return typeof pr=="function"},email:function(pr){return typeof pr=="string"&&pr.length<=320&&!!pr.match(Zt.email)},url:function(pr){return typeof pr=="string"&&pr.length<=2048&&!!pr.match(Et())},hex:function(pr){return typeof pr=="string"&&!!pr.match(Zt.hex)}},He=function(pr,at,hr,er,dn){if(pr.required&&at===void 0){St(pr,at,hr,er,dn);return}var mn=["integer","float","array","regexp","object","method","email","number","date","url","hex"],Vn=pr.type;mn.indexOf(Vn)>-1?Be[Vn](at)||er.push(Le(dn.messages.types[Vn],pr.fullField,pr.type)):Vn&&typeof at!==pr.type&&er.push(Le(dn.messages.types[Vn],pr.fullField,pr.type))},ft=function(pr,at,hr,er,dn){var mn=typeof pr.len=="number",Vn=typeof pr.min=="number",ni=typeof pr.max=="number",si=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Si=at,qi=null,Rr=typeof at=="number",Mn=typeof at=="string",pn=Array.isArray(at);if(Rr?qi="number":Mn?qi="string":pn&&(qi="array"),!qi)return!1;pn&&(Si=at.length),Mn&&(Si=at.replace(si,"_").length),mn?Si!==pr.len&&er.push(Le(dn.messages[qi].len,pr.fullField,pr.len)):Vn&&!ni&&Si<pr.min?er.push(Le(dn.messages[qi].min,pr.fullField,pr.min)):ni&&!Vn&&Si>pr.max?er.push(Le(dn.messages[qi].max,pr.fullField,pr.max)):Vn&&ni&&(Si<pr.min||Si>pr.max)&&er.push(Le(dn.messages[qi].range,pr.fullField,pr.min,pr.max))},Z="enum",J=function(pr,at,hr,er,dn){pr[Z]=Array.isArray(pr[Z])?pr[Z]:[],pr[Z].indexOf(at)===-1&&er.push(Le(dn.messages[Z],pr.fullField,pr[Z].join(", ")))},K=function(pr,at,hr,er,dn){if(pr.pattern){if(pr.pattern instanceof RegExp)pr.pattern.lastIndex=0,pr.pattern.test(at)||er.push(Le(dn.messages.pattern.mismatch,pr.fullField,at,pr.pattern));else if(typeof pr.pattern=="string"){var mn=new RegExp(pr.pattern);mn.test(at)||er.push(Le(dn.messages.pattern.mismatch,pr.fullField,at,pr.pattern))}}},B={required:St,whitespace:Ut,type:He,range:ft,enum:J,pattern:K},j=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at,"string")&&!pr.required)return hr();B.required(pr,at,er,mn,dn,"string"),st(at,"string")||(B.type(pr,at,er,mn,dn),B.range(pr,at,er,mn,dn),B.pattern(pr,at,er,mn,dn),pr.whitespace===!0&&B.whitespace(pr,at,er,mn,dn))}hr(mn)},ee=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&B.type(pr,at,er,mn,dn)}hr(mn)},W=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(at===""&&(at=void 0),st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&(B.type(pr,at,er,mn,dn),B.range(pr,at,er,mn,dn))}hr(mn)},De=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&B.type(pr,at,er,mn,dn)}hr(mn)},ot=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),st(at)||B.type(pr,at,er,mn,dn)}hr(mn)},Wt=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&(B.type(pr,at,er,mn,dn),B.range(pr,at,er,mn,dn))}hr(mn)},Ct=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&(B.type(pr,at,er,mn,dn),B.range(pr,at,er,mn,dn))}hr(mn)},Qt=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(at==null&&!pr.required)return hr();B.required(pr,at,er,mn,dn,"array"),at!=null&&(B.type(pr,at,er,mn,dn),B.range(pr,at,er,mn,dn))}hr(mn)},ir=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&B.type(pr,at,er,mn,dn)}hr(mn)},Er="enum",Qr=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn),at!==void 0&&B[Er](pr,at,er,mn,dn)}hr(mn)},Mt=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at,"string")&&!pr.required)return hr();B.required(pr,at,er,mn,dn),st(at,"string")||B.pattern(pr,at,er,mn,dn)}hr(mn)},br=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at,"date")&&!pr.required)return hr();if(B.required(pr,at,er,mn,dn),!st(at,"date")){var ni;at instanceof Date?ni=at:ni=new Date(at),B.type(pr,ni,er,mn,dn),ni&&B.range(pr,ni.getTime(),er,mn,dn)}}hr(mn)},Nt=function(pr,at,hr,er,dn){var mn=[],Vn=Array.isArray(at)?"array":typeof at;B.required(pr,at,er,mn,dn,Vn),hr(mn)},Pr=function(pr,at,hr,er,dn){var mn=pr.type,Vn=[],ni=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(ni){if(st(at,mn)&&!pr.required)return hr();B.required(pr,at,er,Vn,dn,mn),st(at,mn)||B.type(pr,at,er,Vn,dn)}hr(Vn)},_r=function(pr,at,hr,er,dn){var mn=[],Vn=pr.required||!pr.required&&er.hasOwnProperty(pr.field);if(Vn){if(st(at)&&!pr.required)return hr();B.required(pr,at,er,mn,dn)}hr(mn)},kr={string:j,method:ee,number:W,boolean:De,regexp:ot,integer:Wt,float:Ct,array:Qt,object:ir,enum:Qr,pattern:Mt,date:br,url:Pr,hex:Pr,email:Pr,required:Nt,any:_r};function zt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var pr=JSON.parse(JSON.stringify(this));return pr.clone=this.clone,pr}}}var mr=zt(),Or=function(){function Yr(at){this.rules=null,this._messages=mr,this.define(at)}var pr=Yr.prototype;return pr.define=function(hr){var er=this;if(!hr)throw new Error("Cannot configure a schema with no rules");if(typeof hr!="object"||Array.isArray(hr))throw new Error("Rules must be an object");this.rules={},Object.keys(hr).forEach(function(dn){var mn=hr[dn];er.rules[dn]=Array.isArray(mn)?mn:[mn]})},pr.messages=function(hr){return hr&&(this._messages=Lt(zt(),hr)),this._messages},pr.validate=function(hr,er,dn){var mn=this;er===void 0&&(er={}),dn===void 0&&(dn=function(){});var Vn=hr,ni=er,si=dn;if(typeof ni=="function"&&(si=ni,ni={}),!this.rules||Object.keys(this.rules).length===0)return si&&si(null,Vn),Promise.resolve(Vn);function Si(wn){var Kn=[],Ei={};function Ji(oa){if(Array.isArray(oa)){var Ma;Kn=(Ma=Kn).concat.apply(Ma,oa)}else Kn.push(oa)}for(var Yi=0;Yi<wn.length;Yi++)Ji(wn[Yi]);Kn.length?(Ei=ze(Kn),si(Kn,Ei)):si(null,Vn)}if(ni.messages){var qi=this.messages();qi===mr&&(qi=zt()),Lt(qi,ni.messages),ni.messages=qi}else ni.messages=this.messages();var Rr={},Mn=ni.keys||Object.keys(this.rules);Mn.forEach(function(wn){var Kn=mn.rules[wn],Ei=Vn[wn];Kn.forEach(function(Ji){var Yi=Ji;typeof Yi.transform=="function"&&(Vn===hr&&(Vn=qe({},Vn)),Ei=Vn[wn]=Yi.transform(Ei)),typeof Yi=="function"?Yi={validator:Yi}:Yi=qe({},Yi),Yi.validator=mn.getValidationMethod(Yi),Yi.validator&&(Yi.field=wn,Yi.fullField=Yi.fullField||wn,Yi.type=mn.getType(Yi),Rr[wn]=Rr[wn]||[],Rr[wn].push({rule:Yi,value:Ei,source:Vn,field:wn}))})});var pn={};return ur(Rr,ni,function(wn,Kn){var Ei=wn.rule,Ji=(Ei.type==="object"||Ei.type==="array")&&(typeof Ei.fields=="object"||typeof Ei.defaultField=="object");Ji=Ji&&(Ei.required||!Ei.required&&wn.value),Ei.field=wn.field;function Yi(k,de){return qe({},de,{fullField:Ei.fullField+"."+k,fullFields:Ei.fullFields?[].concat(Ei.fullFields,[k]):[k]})}function oa(k){k===void 0&&(k=[]);var de=Array.isArray(k)?k:[k];!ni.suppressWarning&&de.length&&Yr.warning("async-validator:",de),de.length&&Ei.message!==void 0&&(de=[].concat(Ei.message));var yt=de.map(nt(Ei,Vn));if(ni.first&&yt.length)return pn[Ei.field]=1,Kn(yt);if(!Ji)Kn(yt);else{if(Ei.required&&!wn.value)return Ei.message!==void 0?yt=[].concat(Ei.message).map(nt(Ei,Vn)):ni.error&&(yt=[ni.error(Ei,Le(ni.messages.required,Ei.field))]),Kn(yt);var Ue={};Ei.defaultField&&Object.keys(wn.value).map(function(qr){Ue[qr]=Ei.defaultField}),Ue=qe({},Ue,wn.rule.fields);var nr={};Object.keys(Ue).forEach(function(qr){var kn=Ue[qr],Nn=Array.isArray(kn)?kn:[kn];nr[qr]=Nn.map(Yi.bind(null,qr))});var Mr=new Yr(nr);Mr.messages(ni.messages),wn.rule.options&&(wn.rule.options.messages=ni.messages,wn.rule.options.error=ni.error),Mr.validate(wn.value,wn.rule.options||ni,function(qr){var kn=[];yt&&yt.length&&kn.push.apply(kn,yt),qr&&qr.length&&kn.push.apply(kn,qr),Kn(kn.length?kn:null)})}}var Ma;if(Ei.asyncValidator)Ma=Ei.asyncValidator(Ei,wn.value,oa,wn.source,ni);else if(Ei.validator){try{Ma=Ei.validator(Ei,wn.value,oa,wn.source,ni)}catch(k){console.error==null||console.error(k),ni.suppressValidatorError||setTimeout(function(){throw k},0),oa(k.message)}Ma===!0?oa():Ma===!1?oa(typeof Ei.message=="function"?Ei.message(Ei.fullField||Ei.field):Ei.message||(Ei.fullField||Ei.field)+" fails"):Ma instanceof Array?oa(Ma):Ma instanceof Error&&oa(Ma.message)}Ma&&Ma.then&&Ma.then(function(){return oa()},function(k){return oa(k)})},function(wn){Si(wn)},Vn)},pr.getType=function(hr){if(hr.type===void 0&&hr.pattern instanceof RegExp&&(hr.type="pattern"),typeof hr.validator!="function"&&hr.type&&!kr.hasOwnProperty(hr.type))throw new Error(Le("Unknown rule type %s",hr.type));return hr.type||"string"},pr.getValidationMethod=function(hr){if(typeof hr.validator=="function")return hr.validator;var er=Object.keys(hr),dn=er.indexOf("message");return dn!==-1&&er.splice(dn,1),er.length===1&&er[0]==="required"?kr.required:kr[this.getType(hr)]||void 0},Yr}();Or.register=function(pr,at){if(typeof at!="function")throw new Error("Cannot register a validator by type, validator is not a function");kr[pr]=at},Or.warning=ie,Or.messages=mr,Or.validators=kr;var X="'${name}' is not a valid ${type}",Nr={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:X,method:X,array:X,object:X,number:X,date:X,boolean:X,integer:X,float:X,regexp:X,email:X,url:X,hex:X},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Xe=m(71002),xe=m(88306),rt=m(84506);function kt(Yr,pr,at,hr){if(!pr.length)return at;var er=(0,rt.Z)(pr),dn=er[0],mn=er.slice(1),Vn;return!Yr&&typeof dn=="number"?Vn=[]:Array.isArray(Yr)?Vn=(0,z.Z)(Yr):Vn=(0,R.Z)({},Yr),hr&&at===void 0&&mn.length===1?delete Vn[dn][mn[0]]:Vn[dn]=kt(Vn[dn],mn,at,hr),Vn}function cr(Yr,pr,at){var hr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return pr.length&&hr&&at===void 0&&!(0,xe.Z)(Yr,pr.slice(0,-1))?Yr:kt(Yr,pr,at,hr)}function Ar(Yr){return Array.isArray(Yr)?sr(Yr):(0,Xe.Z)(Yr)==="object"&&Yr!==null?Lr(Yr):Yr}function Lr(Yr){if(Object.getPrototypeOf(Yr)===Object.prototype){var pr={};for(var at in Yr)pr[at]=Ar(Yr[at]);return pr}return Yr}function sr(Yr){return Yr.map(function(pr){return Ar(pr)})}var Ge=Ar;function Gr(Yr){return bt(Yr)}function on(Yr,pr){var at=(0,xe.Z)(Yr,pr);return at}function cn(Yr,pr,at){var hr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,er=cr(Yr,pr,at,hr);return er}function Dn(Yr,pr){var at={};return pr.forEach(function(hr){var er=on(Yr,hr);at=cn(at,hr,er)}),at}function ci(Yr,pr){return Yr&&Yr.some(function(at){return ji(at,pr)})}function ia(Yr){return(0,Xe.Z)(Yr)==="object"&&Yr!==null&&Object.getPrototypeOf(Yr)===Object.prototype}function Vi(Yr,pr){var at=Array.isArray(Yr)?(0,z.Z)(Yr):(0,R.Z)({},Yr);return pr&&Object.keys(pr).forEach(function(hr){var er=at[hr],dn=pr[hr],mn=ia(er)&&ia(dn);at[hr]=mn?Vi(er,dn||{}):Ge(dn)}),at}function On(Yr){for(var pr=arguments.length,at=new Array(pr>1?pr-1:0),hr=1;hr<pr;hr++)at[hr-1]=arguments[hr];return at.reduce(function(er,dn){return Vi(er,dn)},Yr)}function ji(Yr,pr){return!Yr||!pr||Yr.length!==pr.length?!1:Yr.every(function(at,hr){return pr[hr]===at})}function oi(Yr,pr){if(Yr===pr)return!0;if(!Yr&&pr||Yr&&!pr||!Yr||!pr||(0,Xe.Z)(Yr)!=="object"||(0,Xe.Z)(pr)!=="object")return!1;var at=Object.keys(Yr),hr=Object.keys(pr),er=new Set([].concat(at,hr));return(0,z.Z)(er).every(function(dn){var mn=Yr[dn],Vn=pr[dn];return typeof mn=="function"&&typeof Vn=="function"?!0:mn===Vn})}function Hi(Yr){var pr=arguments.length<=1?void 0:arguments[1];return pr&&pr.target&&(0,Xe.Z)(pr.target)==="object"&&Yr in pr.target?pr.target[Yr]:pr}function Ca(Yr,pr,at){var hr=Yr.length;if(pr<0||pr>=hr||at<0||at>=hr)return Yr;var er=Yr[pr],dn=pr-at;return dn>0?[].concat((0,z.Z)(Yr.slice(0,at)),[er],(0,z.Z)(Yr.slice(at,pr)),(0,z.Z)(Yr.slice(pr+1,hr))):dn<0?[].concat((0,z.Z)(Yr.slice(0,pr)),(0,z.Z)(Yr.slice(pr+1,at+1)),[er],(0,z.Z)(Yr.slice(at+1,hr))):Yr}var Wi=Or;function jo(Yr,pr){return Yr.replace(/\$\{\w+\}/g,function(at){var hr=at.slice(2,-1);return pr[hr]})}var uo="CODE_LOGIC_ERROR";function Pn(Yr,pr,at,hr,er){return bn.apply(this,arguments)}function bn(){return bn=(0,wt.Z)((0,ut.Z)().mark(function Yr(pr,at,hr,er,dn){var mn,Vn,ni,si,Si,qi,Rr,Mn,pn;return(0,ut.Z)().wrap(function(Kn){for(;;)switch(Kn.prev=Kn.next){case 0:return mn=(0,R.Z)({},hr),delete mn.ruleIndex,mn.validator&&(Vn=mn.validator,mn.validator=function(){try{return Vn.apply(void 0,arguments)}catch(Ei){return console.error(Ei),Promise.reject(uo)}}),ni=null,mn&&mn.type==="array"&&mn.defaultField&&(ni=mn.defaultField,delete mn.defaultField),si=new Wi((0,$.Z)({},pr,[mn])),Si=On({},Nr,er.validateMessages),si.messages(Si),qi=[],Kn.prev=9,Kn.next=12,Promise.resolve(si.validate((0,$.Z)({},pr,at),(0,R.Z)({},er)));case 12:Kn.next=17;break;case 14:Kn.prev=14,Kn.t0=Kn.catch(9),Kn.t0.errors&&(qi=Kn.t0.errors.map(function(Ei,Ji){var Yi=Ei.message,oa=Yi===uo?Si.default:Yi;return v.isValidElement(oa)?v.cloneElement(oa,{key:"error_".concat(Ji)}):oa}));case 17:if(!(!qi.length&&ni)){Kn.next=22;break}return Kn.next=20,Promise.all(at.map(function(Ei,Ji){return Pn("".concat(pr,".").concat(Ji),Ei,ni,er,dn)}));case 20:return Rr=Kn.sent,Kn.abrupt("return",Rr.reduce(function(Ei,Ji){return[].concat((0,z.Z)(Ei),(0,z.Z)(Ji))},[]));case 22:return Mn=(0,R.Z)((0,R.Z)({},hr),{},{name:pr,enum:(hr.enum||[]).join(", ")},dn),pn=qi.map(function(Ei){return typeof Ei=="string"?jo(Ei,Mn):Ei}),Kn.abrupt("return",pn);case 25:case"end":return Kn.stop()}},Yr,null,[[9,14]])})),bn.apply(this,arguments)}function Oi(Yr,pr,at,hr,er,dn){var mn=Yr.join("."),Vn=at.map(function(Si,qi){var Rr=Si.validator,Mn=(0,R.Z)((0,R.Z)({},Si),{},{ruleIndex:qi});return Rr&&(Mn.validator=function(pn,wn,Kn){var Ei=!1,Ji=function(){for(var Ma=arguments.length,k=new Array(Ma),de=0;de<Ma;de++)k[de]=arguments[de];Promise.resolve().then(function(){(0,re.ZP)(!Ei,"Your validator function has already return a promise. `callback` will be ignored."),Ei||Kn.apply(void 0,k)})},Yi=Rr(pn,wn,Ji);Ei=Yi&&typeof Yi.then=="function"&&typeof Yi.catch=="function",(0,re.ZP)(Ei,"`callback` is deprecated. Please return a promise instead."),Ei&&Yi.then(function(){Kn()}).catch(function(oa){Kn(oa||" ")})}),Mn}).sort(function(Si,qi){var Rr=Si.warningOnly,Mn=Si.ruleIndex,pn=qi.warningOnly,wn=qi.ruleIndex;return!!Rr==!!pn?Mn-wn:Rr?1:-1}),ni;if(er===!0)ni=new Promise(function(){var Si=(0,wt.Z)((0,ut.Z)().mark(function qi(Rr,Mn){var pn,wn,Kn;return(0,ut.Z)().wrap(function(Ji){for(;;)switch(Ji.prev=Ji.next){case 0:pn=0;case 1:if(!(pn<Vn.length)){Ji.next=12;break}return wn=Vn[pn],Ji.next=5,Pn(mn,pr,wn,hr,dn);case 5:if(Kn=Ji.sent,!Kn.length){Ji.next=9;break}return Mn([{errors:Kn,rule:wn}]),Ji.abrupt("return");case 9:pn+=1,Ji.next=1;break;case 12:Rr([]);case 13:case"end":return Ji.stop()}},qi)}));return function(qi,Rr){return Si.apply(this,arguments)}}());else{var si=Vn.map(function(Si){return Pn(mn,pr,Si,hr,dn).then(function(qi){return{errors:qi,rule:Si}})});ni=(er?wa(si):di(si)).then(function(Si){return Promise.reject(Si)})}return ni.catch(function(Si){return Si}),ni}function di(Yr){return va.apply(this,arguments)}function va(){return va=(0,wt.Z)((0,ut.Z)().mark(function Yr(pr){return(0,ut.Z)().wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.abrupt("return",Promise.all(pr).then(function(er){var dn,mn=(dn=[]).concat.apply(dn,(0,z.Z)(er));return mn}));case 1:case"end":return hr.stop()}},Yr)})),va.apply(this,arguments)}function wa(Yr){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,wt.Z)((0,ut.Z)().mark(function Yr(pr){var at;return(0,ut.Z)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return at=0,er.abrupt("return",new Promise(function(dn){pr.forEach(function(mn){mn.then(function(Vn){Vn.errors.length&&dn([Vn]),at+=1,at===pr.length&&dn([])})})}));case 2:case"end":return er.stop()}},Yr)})),Aa.apply(this,arguments)}var Ta=["name"],ma=[];function Da(Yr,pr,at,hr,er,dn){return typeof Yr=="function"?Yr(pr,at,"source"in dn?{source:dn.source}:{}):hr!==er}var Uo=function(Yr){(0,F.Z)(at,Yr);var pr=(0,ue.Z)(at);function at(hr){var er;if((0,L.Z)(this,at),er=pr.call(this,hr),er.state={resetCount:0},er.cancelRegisterFunc=null,er.mounted=!1,er.touched=!1,er.dirty=!1,er.validatePromise=null,er.prevValidating=void 0,er.errors=ma,er.warnings=ma,er.cancelRegister=function(){var ni=er.props,si=ni.preserve,Si=ni.isListField,qi=ni.name;er.cancelRegisterFunc&&er.cancelRegisterFunc(Si,si,Gr(qi)),er.cancelRegisterFunc=null},er.getNamePath=function(){var ni=er.props,si=ni.name,Si=ni.fieldContext,qi=Si.prefixName,Rr=qi===void 0?[]:qi;return si!==void 0?[].concat((0,z.Z)(Rr),(0,z.Z)(si)):[]},er.getRules=function(){var ni=er.props,si=ni.rules,Si=si===void 0?[]:si,qi=ni.fieldContext;return Si.map(function(Rr){return typeof Rr=="function"?Rr(qi):Rr})},er.refresh=function(){er.mounted&&er.setState(function(ni){var si=ni.resetCount;return{resetCount:si+1}})},er.triggerMetaEvent=function(ni){var si=er.props.onMetaChange;si==null||si((0,R.Z)((0,R.Z)({},er.getMeta()),{},{destroy:ni}))},er.onStoreChange=function(ni,si,Si){var qi=er.props,Rr=qi.shouldUpdate,Mn=qi.dependencies,pn=Mn===void 0?[]:Mn,wn=qi.onReset,Kn=Si.store,Ei=er.getNamePath(),Ji=er.getValue(ni),Yi=er.getValue(Kn),oa=si&&ci(si,Ei);switch(Si.type==="valueUpdate"&&Si.source==="external"&&Ji!==Yi&&(er.touched=!0,er.dirty=!0,er.validatePromise=null,er.errors=ma,er.warnings=ma,er.triggerMetaEvent()),Si.type){case"reset":if(!si||oa){er.touched=!1,er.dirty=!1,er.validatePromise=null,er.errors=ma,er.warnings=ma,er.triggerMetaEvent(),wn==null||wn(),er.refresh();return}break;case"remove":{if(Rr){er.reRender();return}break}case"setField":{if(oa){var Ma=Si.data;"touched"in Ma&&(er.touched=Ma.touched),"validating"in Ma&&!("originRCField"in Ma)&&(er.validatePromise=Ma.validating?Promise.resolve([]):null),"errors"in Ma&&(er.errors=Ma.errors||ma),"warnings"in Ma&&(er.warnings=Ma.warnings||ma),er.dirty=!0,er.triggerMetaEvent(),er.reRender();return}if(Rr&&!Ei.length&&Da(Rr,ni,Kn,Ji,Yi,Si)){er.reRender();return}break}case"dependenciesUpdate":{var k=pn.map(Gr);if(k.some(function(de){return ci(Si.relatedFields,de)})){er.reRender();return}break}default:if(oa||(!pn.length||Ei.length||Rr)&&Da(Rr,ni,Kn,Ji,Yi,Si)){er.reRender();return}break}Rr===!0&&er.reRender()},er.validateRules=function(ni){var si=er.getNamePath(),Si=er.getValue(),qi=Promise.resolve().then(function(){if(!er.mounted)return[];var Rr=er.props,Mn=Rr.validateFirst,pn=Mn===void 0?!1:Mn,wn=Rr.messageVariables,Kn=ni||{},Ei=Kn.triggerName,Ji=er.getRules();Ei&&(Ji=Ji.filter(function(oa){return oa}).filter(function(oa){var Ma=oa.validateTrigger;if(!Ma)return!0;var k=bt(Ma);return k.includes(Ei)}));var Yi=Oi(si,Si,Ji,ni,pn,wn);return Yi.catch(function(oa){return oa}).then(function(){var oa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ma;if(er.validatePromise===qi){var Ma;er.validatePromise=null;var k=[],de=[];(Ma=oa.forEach)===null||Ma===void 0||Ma.call(oa,function(yt){var Ue=yt.rule.warningOnly,nr=yt.errors,Mr=nr===void 0?ma:nr;Ue?de.push.apply(de,(0,z.Z)(Mr)):k.push.apply(k,(0,z.Z)(Mr))}),er.errors=k,er.warnings=de,er.triggerMetaEvent(),er.reRender()}}),Yi});return er.validatePromise=qi,er.dirty=!0,er.errors=ma,er.warnings=ma,er.triggerMetaEvent(),er.reRender(),qi},er.isFieldValidating=function(){return!!er.validatePromise},er.isFieldTouched=function(){return er.touched},er.isFieldDirty=function(){if(er.dirty||er.props.initialValue!==void 0)return!0;var ni=er.props.fieldContext,si=ni.getInternalHooks(pe),Si=si.getInitialValue;return Si(er.getNamePath())!==void 0},er.getErrors=function(){return er.errors},er.getWarnings=function(){return er.warnings},er.isListField=function(){return er.props.isListField},er.isList=function(){return er.props.isList},er.isPreserve=function(){return er.props.preserve},er.getMeta=function(){er.prevValidating=er.isFieldValidating();var ni={touched:er.isFieldTouched(),validating:er.prevValidating,errors:er.errors,warnings:er.warnings,name:er.getNamePath()};return ni},er.getOnlyChild=function(ni){if(typeof ni=="function"){var si=er.getMeta();return(0,R.Z)((0,R.Z)({},er.getOnlyChild(ni(er.getControlled(),si,er.props.fieldContext))),{},{isFunction:!0})}var Si=(0,Ae.Z)(ni);return Si.length!==1||!v.isValidElement(Si[0])?{child:Si,isFunction:!1}:{child:Si[0],isFunction:!1}},er.getValue=function(ni){var si=er.props.fieldContext.getFieldsValue,Si=er.getNamePath();return on(ni||si(!0),Si)},er.getControlled=function(){var ni=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},si=er.props,Si=si.trigger,qi=si.validateTrigger,Rr=si.getValueFromEvent,Mn=si.normalize,pn=si.valuePropName,wn=si.getValueProps,Kn=si.fieldContext,Ei=qi!==void 0?qi:Kn.validateTrigger,Ji=er.getNamePath(),Yi=Kn.getInternalHooks,oa=Kn.getFieldsValue,Ma=Yi(pe),k=Ma.dispatch,de=er.getValue(),yt=wn||function(qr){return(0,$.Z)({},pn,qr)},Ue=ni[Si],nr=(0,R.Z)((0,R.Z)({},ni),yt(de));nr[Si]=function(){er.touched=!0,er.dirty=!0,er.triggerMetaEvent();for(var qr,kn=arguments.length,Nn=new Array(kn),Mi=0;Mi<kn;Mi++)Nn[Mi]=arguments[Mi];Rr?qr=Rr.apply(void 0,Nn):qr=Hi.apply(void 0,[pn].concat(Nn)),Mn&&(qr=Mn(qr,de,oa(!0))),k({type:"updateValue",namePath:Ji,value:qr}),Ue&&Ue.apply(void 0,Nn)};var Mr=bt(Ei||[]);return Mr.forEach(function(qr){var kn=nr[qr];nr[qr]=function(){kn&&kn.apply(void 0,arguments);var Nn=er.props.rules;Nn&&Nn.length&&k({type:"validateField",namePath:Ji,triggerName:qr})}}),nr},hr.fieldContext){var dn=hr.fieldContext.getInternalHooks,mn=dn(pe),Vn=mn.initEntityValue;Vn((0,O.Z)(er))}return er}return(0,T.Z)(at,[{key:"componentDidMount",value:function(){var er=this.props,dn=er.shouldUpdate,mn=er.fieldContext;if(this.mounted=!0,mn){var Vn=mn.getInternalHooks,ni=Vn(pe),si=ni.registerField;this.cancelRegisterFunc=si(this)}dn===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var er=this.state.resetCount,dn=this.props.children,mn=this.getOnlyChild(dn),Vn=mn.child,ni=mn.isFunction,si;return ni?si=Vn:v.isValidElement(Vn)?si=v.cloneElement(Vn,this.getControlled(Vn.props)):((0,re.ZP)(!Vn,"`children` of Field is not validate ReactElement."),si=Vn),v.createElement(v.Fragment,{key:er},si)}}]),at}(v.Component);Uo.contextType=je,Uo.defaultProps={trigger:"onChange",valuePropName:"value"};function ha(Yr){var pr=Yr.name,at=(0,l.Z)(Yr,Ta),hr=v.useContext(je),er=pr!==void 0?Gr(pr):void 0,dn="keep";return at.isListField||(dn="_".concat((er||[]).join("_"))),v.createElement(Uo,(0,C.Z)({key:dn,name:er},at,{fieldContext:hr}))}var xa=ha,eo=v.createContext(null),Ee=eo,Po=function(pr){var at=pr.name,hr=pr.initialValue,er=pr.children,dn=pr.rules,mn=pr.validateTrigger,Vn=v.useContext(je),ni=v.useRef({keys:[],id:0}),si=ni.current,Si=v.useMemo(function(){var pn=Gr(Vn.prefixName)||[];return[].concat((0,z.Z)(pn),(0,z.Z)(Gr(at)))},[Vn.prefixName,at]),qi=v.useMemo(function(){return(0,R.Z)((0,R.Z)({},Vn),{},{prefixName:Si})},[Vn,Si]),Rr=v.useMemo(function(){return{getKey:function(wn){var Kn=Si.length,Ei=wn[Kn];return[si.keys[Ei],wn.slice(Kn+1)]}}},[Si]);if(typeof er!="function")return(0,re.ZP)(!1,"Form.List only accepts function as children."),null;var Mn=function(wn,Kn,Ei){var Ji=Ei.source;return Ji==="internal"?!1:wn!==Kn};return v.createElement(Ee.Provider,{value:Rr},v.createElement(je.Provider,{value:qi},v.createElement(xa,{name:[],shouldUpdate:Mn,rules:dn,validateTrigger:mn,initialValue:hr,isList:!0},function(pn,wn){var Kn=pn.value,Ei=Kn===void 0?[]:Kn,Ji=pn.onChange,Yi=Vn.getFieldValue,oa=function(){var yt=Yi(Si||[]);return yt||[]},Ma={add:function(yt,Ue){var nr=oa();Ue>=0&&Ue<=nr.length?(si.keys=[].concat((0,z.Z)(si.keys.slice(0,Ue)),[si.id],(0,z.Z)(si.keys.slice(Ue))),Ji([].concat((0,z.Z)(nr.slice(0,Ue)),[yt],(0,z.Z)(nr.slice(Ue))))):(si.keys=[].concat((0,z.Z)(si.keys),[si.id]),Ji([].concat((0,z.Z)(nr),[yt]))),si.id+=1},remove:function(yt){var Ue=oa(),nr=new Set(Array.isArray(yt)?yt:[yt]);nr.size<=0||(si.keys=si.keys.filter(function(Mr,qr){return!nr.has(qr)}),Ji(Ue.filter(function(Mr,qr){return!nr.has(qr)})))},move:function(yt,Ue){if(yt!==Ue){var nr=oa();yt<0||yt>=nr.length||Ue<0||Ue>=nr.length||(si.keys=Ca(si.keys,yt,Ue),Ji(Ca(nr,yt,Ue)))}}},k=Ei||[];return Array.isArray(k)||(k=[]),er(k.map(function(de,yt){var Ue=si.keys[yt];return Ue===void 0&&(si.keys[yt]=si.id,Ue=si.keys[yt],si.id+=1),{name:yt,key:Ue,isListField:!0}}),Ma,wn)})))},Hs=Po,no=m(97685);function qo(Yr){var pr=!1,at=Yr.length,hr=[];return Yr.length?new Promise(function(er,dn){Yr.forEach(function(mn,Vn){mn.catch(function(ni){return pr=!0,ni}).then(function(ni){at-=1,hr[Vn]=ni,!(at>0)&&(pr&&dn(hr),er(hr))})})}):Promise.resolve([])}var os="__@field_split__";function Go(Yr){return Yr.map(function(pr){return"".concat((0,Xe.Z)(pr),":").concat(pr)}).join(os)}var Wo=function(){function Yr(){(0,L.Z)(this,Yr),this.kvs=new Map}return(0,T.Z)(Yr,[{key:"set",value:function(at,hr){this.kvs.set(Go(at),hr)}},{key:"get",value:function(at){return this.kvs.get(Go(at))}},{key:"update",value:function(at,hr){var er=this.get(at),dn=hr(er);dn?this.set(at,dn):this.delete(at)}},{key:"delete",value:function(at){this.kvs.delete(Go(at))}},{key:"map",value:function(at){return(0,z.Z)(this.kvs.entries()).map(function(hr){var er=(0,no.Z)(hr,2),dn=er[0],mn=er[1],Vn=dn.split(os);return at({key:Vn.map(function(ni){var si=ni.match(/^([^:]*):(.*)$/),Si=(0,no.Z)(si,3),qi=Si[1],Rr=Si[2];return qi==="number"?Number(Rr):Rr}),value:mn})})}},{key:"toJSON",value:function(){var at={};return this.map(function(hr){var er=hr.key,dn=hr.value;return at[er.join(".")]=dn,null}),at}}]),Yr}(),za=Wo,Tu=["name","errors"],Cs=(0,T.Z)(function Yr(pr){var at=this;(0,L.Z)(this,Yr),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:at.getFieldValue,getFieldsValue:at.getFieldsValue,getFieldError:at.getFieldError,getFieldWarning:at.getFieldWarning,getFieldsError:at.getFieldsError,isFieldsTouched:at.isFieldsTouched,isFieldTouched:at.isFieldTouched,isFieldValidating:at.isFieldValidating,isFieldsValidating:at.isFieldsValidating,resetFields:at.resetFields,setFields:at.setFields,setFieldValue:at.setFieldValue,setFieldsValue:at.setFieldsValue,validateFields:at.validateFields,submit:at.submit,_init:!0,getInternalHooks:at.getInternalHooks}},this.getInternalHooks=function(hr){return hr===pe?(at.formHooked=!0,{dispatch:at.dispatch,initEntityValue:at.initEntityValue,registerField:at.registerField,useSubscribe:at.useSubscribe,setInitialValues:at.setInitialValues,destroyForm:at.destroyForm,setCallbacks:at.setCallbacks,setValidateMessages:at.setValidateMessages,getFields:at.getFields,setPreserve:at.setPreserve,getInitialValue:at.getInitialValue,registerWatch:at.registerWatch}):((0,re.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(hr){at.subscribable=hr},this.prevWithoutPreserves=null,this.setInitialValues=function(hr,er){if(at.initialValues=hr||{},er){var dn,mn=On({},hr,at.store);(dn=at.prevWithoutPreserves)===null||dn===void 0||dn.map(function(Vn){var ni=Vn.key;mn=cn(mn,ni,on(hr,ni))}),at.prevWithoutPreserves=null,at.updateStore(mn)}},this.destroyForm=function(){var hr=new za;at.getFieldEntities(!0).forEach(function(er){at.isMergedPreserve(er.isPreserve())||hr.set(er.getNamePath(),!0)}),at.prevWithoutPreserves=hr},this.getInitialValue=function(hr){var er=on(at.initialValues,hr);return hr.length?Ge(er):er},this.setCallbacks=function(hr){at.callbacks=hr},this.setValidateMessages=function(hr){at.validateMessages=hr},this.setPreserve=function(hr){at.preserve=hr},this.watchList=[],this.registerWatch=function(hr){return at.watchList.push(hr),function(){at.watchList=at.watchList.filter(function(er){return er!==hr})}},this.notifyWatch=function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(at.watchList.length){var er=at.getFieldsValue();at.watchList.forEach(function(dn){dn(er,hr)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(hr){at.store=hr},this.getFieldEntities=function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return hr?at.fieldEntities.filter(function(er){return er.getNamePath().length}):at.fieldEntities},this.getFieldsMap=function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,er=new za;return at.getFieldEntities(hr).forEach(function(dn){var mn=dn.getNamePath();er.set(mn,dn)}),er},this.getFieldEntitiesForNamePathList=function(hr){if(!hr)return at.getFieldEntities(!0);var er=at.getFieldsMap(!0);return hr.map(function(dn){var mn=Gr(dn);return er.get(mn)||{INVALIDATE_NAME_PATH:Gr(dn)}})},this.getFieldsValue=function(hr,er){if(at.warningUnhooked(),hr===!0&&!er)return at.store;var dn=at.getFieldEntitiesForNamePathList(Array.isArray(hr)?hr:null),mn=[];return dn.forEach(function(Vn){var ni,si="INVALIDATE_NAME_PATH"in Vn?Vn.INVALIDATE_NAME_PATH:Vn.getNamePath();if(!(!hr&&(!((ni=Vn.isListField)===null||ni===void 0)&&ni.call(Vn))))if(!er)mn.push(si);else{var Si="getMeta"in Vn?Vn.getMeta():null;er(Si)&&mn.push(si)}}),Dn(at.store,mn.map(Gr))},this.getFieldValue=function(hr){at.warningUnhooked();var er=Gr(hr);return on(at.store,er)},this.getFieldsError=function(hr){at.warningUnhooked();var er=at.getFieldEntitiesForNamePathList(hr);return er.map(function(dn,mn){return dn&&!("INVALIDATE_NAME_PATH"in dn)?{name:dn.getNamePath(),errors:dn.getErrors(),warnings:dn.getWarnings()}:{name:Gr(hr[mn]),errors:[],warnings:[]}})},this.getFieldError=function(hr){at.warningUnhooked();var er=Gr(hr),dn=at.getFieldsError([er])[0];return dn.errors},this.getFieldWarning=function(hr){at.warningUnhooked();var er=Gr(hr),dn=at.getFieldsError([er])[0];return dn.warnings},this.isFieldsTouched=function(){at.warningUnhooked();for(var hr=arguments.length,er=new Array(hr),dn=0;dn<hr;dn++)er[dn]=arguments[dn];var mn=er[0],Vn=er[1],ni,si=!1;er.length===0?ni=null:er.length===1?Array.isArray(mn)?(ni=mn.map(Gr),si=!1):(ni=null,si=mn):(ni=mn.map(Gr),si=Vn);var Si=at.getFieldEntities(!0),qi=function(Kn){return Kn.isFieldTouched()};if(!ni)return si?Si.every(qi):Si.some(qi);var Rr=new za;ni.forEach(function(wn){Rr.set(wn,[])}),Si.forEach(function(wn){var Kn=wn.getNamePath();ni.forEach(function(Ei){Ei.every(function(Ji,Yi){return Kn[Yi]===Ji})&&Rr.update(Ei,function(Ji){return[].concat((0,z.Z)(Ji),[wn])})})});var Mn=function(Kn){return Kn.some(qi)},pn=Rr.map(function(wn){var Kn=wn.value;return Kn});return si?pn.every(Mn):pn.some(Mn)},this.isFieldTouched=function(hr){return at.warningUnhooked(),at.isFieldsTouched([hr])},this.isFieldsValidating=function(hr){at.warningUnhooked();var er=at.getFieldEntities();if(!hr)return er.some(function(mn){return mn.isFieldValidating()});var dn=hr.map(Gr);return er.some(function(mn){var Vn=mn.getNamePath();return ci(dn,Vn)&&mn.isFieldValidating()})},this.isFieldValidating=function(hr){return at.warningUnhooked(),at.isFieldsValidating([hr])},this.resetWithFieldInitialValue=function(){var hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},er=new za,dn=at.getFieldEntities(!0);dn.forEach(function(ni){var si=ni.props.initialValue,Si=ni.getNamePath();if(si!==void 0){var qi=er.get(Si)||new Set;qi.add({entity:ni,value:si}),er.set(Si,qi)}});var mn=function(si){si.forEach(function(Si){var qi=Si.props.initialValue;if(qi!==void 0){var Rr=Si.getNamePath(),Mn=at.getInitialValue(Rr);if(Mn!==void 0)(0,re.ZP)(!1,"Form already set 'initialValues' with path '".concat(Rr.join("."),"'. Field can not overwrite it."));else{var pn=er.get(Rr);if(pn&&pn.size>1)(0,re.ZP)(!1,"Multiple Field with path '".concat(Rr.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(pn){var wn=at.getFieldValue(Rr);(!hr.skipExist||wn===void 0)&&at.updateStore(cn(at.store,Rr,(0,z.Z)(pn)[0].value))}}}})},Vn;hr.entities?Vn=hr.entities:hr.namePathList?(Vn=[],hr.namePathList.forEach(function(ni){var si=er.get(ni);if(si){var Si;(Si=Vn).push.apply(Si,(0,z.Z)((0,z.Z)(si).map(function(qi){return qi.entity})))}})):Vn=dn,mn(Vn)},this.resetFields=function(hr){at.warningUnhooked();var er=at.store;if(!hr){at.updateStore(On({},at.initialValues)),at.resetWithFieldInitialValue(),at.notifyObservers(er,null,{type:"reset"}),at.notifyWatch();return}var dn=hr.map(Gr);dn.forEach(function(mn){var Vn=at.getInitialValue(mn);at.updateStore(cn(at.store,mn,Vn))}),at.resetWithFieldInitialValue({namePathList:dn}),at.notifyObservers(er,dn,{type:"reset"}),at.notifyWatch(dn)},this.setFields=function(hr){at.warningUnhooked();var er=at.store,dn=[];hr.forEach(function(mn){var Vn=mn.name,ni=mn.errors,si=(0,l.Z)(mn,Tu),Si=Gr(Vn);dn.push(Si),"value"in si&&at.updateStore(cn(at.store,Si,si.value)),at.notifyObservers(er,[Si],{type:"setField",data:mn})}),at.notifyWatch(dn)},this.getFields=function(){var hr=at.getFieldEntities(!0),er=hr.map(function(dn){var mn=dn.getNamePath(),Vn=dn.getMeta(),ni=(0,R.Z)((0,R.Z)({},Vn),{},{name:mn,value:at.getFieldValue(mn)});return Object.defineProperty(ni,"originRCField",{value:!0}),ni});return er},this.initEntityValue=function(hr){var er=hr.props.initialValue;if(er!==void 0){var dn=hr.getNamePath(),mn=on(at.store,dn);mn===void 0&&at.updateStore(cn(at.store,dn,er))}},this.isMergedPreserve=function(hr){var er=hr!==void 0?hr:at.preserve;return er!=null?er:!0},this.registerField=function(hr){at.fieldEntities.push(hr);var er=hr.getNamePath();if(at.notifyWatch([er]),hr.props.initialValue!==void 0){var dn=at.store;at.resetWithFieldInitialValue({entities:[hr],skipExist:!0}),at.notifyObservers(dn,[hr.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(mn,Vn){var ni=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(at.fieldEntities=at.fieldEntities.filter(function(qi){return qi!==hr}),!at.isMergedPreserve(Vn)&&(!mn||ni.length>1)){var si=mn?void 0:at.getInitialValue(er);if(er.length&&at.getFieldValue(er)!==si&&at.fieldEntities.every(function(qi){return!ji(qi.getNamePath(),er)})){var Si=at.store;at.updateStore(cn(Si,er,si,!0)),at.notifyObservers(Si,[er],{type:"remove"}),at.triggerDependenciesUpdate(Si,er)}}at.notifyWatch([er])}},this.dispatch=function(hr){switch(hr.type){case"updateValue":{var er=hr.namePath,dn=hr.value;at.updateValue(er,dn);break}case"validateField":{var mn=hr.namePath,Vn=hr.triggerName;at.validateFields([mn],{triggerName:Vn});break}default:}},this.notifyObservers=function(hr,er,dn){if(at.subscribable){var mn=(0,R.Z)((0,R.Z)({},dn),{},{store:at.getFieldsValue(!0)});at.getFieldEntities().forEach(function(Vn){var ni=Vn.onStoreChange;ni(hr,er,mn)})}else at.forceRootUpdate()},this.triggerDependenciesUpdate=function(hr,er){var dn=at.getDependencyChildrenFields(er);return dn.length&&at.validateFields(dn),at.notifyObservers(hr,dn,{type:"dependenciesUpdate",relatedFields:[er].concat((0,z.Z)(dn))}),dn},this.updateValue=function(hr,er){var dn=Gr(hr),mn=at.store;at.updateStore(cn(at.store,dn,er)),at.notifyObservers(mn,[dn],{type:"valueUpdate",source:"internal"}),at.notifyWatch([dn]);var Vn=at.triggerDependenciesUpdate(mn,dn),ni=at.callbacks.onValuesChange;if(ni){var si=Dn(at.store,[dn]);ni(si,at.getFieldsValue())}at.triggerOnFieldsChange([dn].concat((0,z.Z)(Vn)))},this.setFieldsValue=function(hr){at.warningUnhooked();var er=at.store;if(hr){var dn=On(at.store,hr);at.updateStore(dn)}at.notifyObservers(er,null,{type:"valueUpdate",source:"external"}),at.notifyWatch()},this.setFieldValue=function(hr,er){at.setFields([{name:hr,value:er}])},this.getDependencyChildrenFields=function(hr){var er=new Set,dn=[],mn=new za;at.getFieldEntities().forEach(function(ni){var si=ni.props.dependencies;(si||[]).forEach(function(Si){var qi=Gr(Si);mn.update(qi,function(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return Rr.add(ni),Rr})})});var Vn=function ni(si){var Si=mn.get(si)||new Set;Si.forEach(function(qi){if(!er.has(qi)){er.add(qi);var Rr=qi.getNamePath();qi.isFieldDirty()&&Rr.length&&(dn.push(Rr),ni(Rr))}})};return Vn(hr),dn},this.triggerOnFieldsChange=function(hr,er){var dn=at.callbacks.onFieldsChange;if(dn){var mn=at.getFields();if(er){var Vn=new za;er.forEach(function(si){var Si=si.name,qi=si.errors;Vn.set(Si,qi)}),mn.forEach(function(si){si.errors=Vn.get(si.name)||si.errors})}var ni=mn.filter(function(si){var Si=si.name;return ci(hr,Si)});dn(ni,mn)}},this.validateFields=function(hr,er){at.warningUnhooked();var dn=!!hr,mn=dn?hr.map(Gr):[],Vn=[];at.getFieldEntities(!0).forEach(function(Si){if(dn||mn.push(Si.getNamePath()),er!=null&&er.recursive&&dn){var qi=Si.getNamePath();qi.every(function(pn,wn){return hr[wn]===pn||hr[wn]===void 0})&&mn.push(qi)}if(!(!Si.props.rules||!Si.props.rules.length)){var Rr=Si.getNamePath();if(!dn||ci(mn,Rr)){var Mn=Si.validateRules((0,R.Z)({validateMessages:(0,R.Z)((0,R.Z)({},Nr),at.validateMessages)},er));Vn.push(Mn.then(function(){return{name:Rr,errors:[],warnings:[]}}).catch(function(pn){var wn,Kn=[],Ei=[];return(wn=pn.forEach)===null||wn===void 0||wn.call(pn,function(Ji){var Yi=Ji.rule.warningOnly,oa=Ji.errors;Yi?Ei.push.apply(Ei,(0,z.Z)(oa)):Kn.push.apply(Kn,(0,z.Z)(oa))}),Kn.length?Promise.reject({name:Rr,errors:Kn,warnings:Ei}):{name:Rr,errors:Kn,warnings:Ei}}))}}});var ni=qo(Vn);at.lastValidatePromise=ni,ni.catch(function(Si){return Si}).then(function(Si){var qi=Si.map(function(Rr){var Mn=Rr.name;return Mn});at.notifyObservers(at.store,qi,{type:"validateFinish"}),at.triggerOnFieldsChange(qi,Si)});var si=ni.then(function(){return at.lastValidatePromise===ni?Promise.resolve(at.getFieldsValue(mn)):Promise.reject([])}).catch(function(Si){var qi=Si.filter(function(Rr){return Rr&&Rr.errors.length});return Promise.reject({values:at.getFieldsValue(mn),errorFields:qi,outOfDate:at.lastValidatePromise!==ni})});return si.catch(function(Si){return Si}),si},this.submit=function(){at.warningUnhooked(),at.validateFields().then(function(hr){var er=at.callbacks.onFinish;if(er)try{er(hr)}catch(dn){console.error(dn)}}).catch(function(hr){var er=at.callbacks.onFinishFailed;er&&er(hr)})},this.forceRootUpdate=pr});function Zs(Yr){var pr=v.useRef(),at=v.useState({}),hr=(0,no.Z)(at,2),er=hr[1];if(!pr.current)if(Yr)pr.current=Yr;else{var dn=function(){er({})},mn=new Cs(dn);pr.current=mn.getForm()}return[pr.current]}var ts=Zs,Vs=v.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ou=function(pr){var at=pr.validateMessages,hr=pr.onFormChange,er=pr.onFormFinish,dn=pr.children,mn=v.useContext(Vs),Vn=v.useRef({});return v.createElement(Vs.Provider,{value:(0,R.Z)((0,R.Z)({},mn),{},{validateMessages:(0,R.Z)((0,R.Z)({},mn.validateMessages),at),triggerFormChange:function(si,Si){hr&&hr(si,{changedFields:Si,forms:Vn.current}),mn.triggerFormChange(si,Si)},triggerFormFinish:function(si,Si){er&&er(si,{values:Si,forms:Vn.current}),mn.triggerFormFinish(si,Si)},registerForm:function(si,Si){si&&(Vn.current=(0,R.Z)((0,R.Z)({},Vn.current),{},(0,$.Z)({},si,Si))),mn.registerForm(si,Si)},unregisterForm:function(si){var Si=(0,R.Z)({},Vn.current);delete Si[si],Vn.current=Si,mn.unregisterForm(si)}})},dn)},ls=Vs,Di=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],As=function(pr,at){var hr=pr.name,er=pr.initialValues,dn=pr.fields,mn=pr.form,Vn=pr.preserve,ni=pr.children,si=pr.component,Si=si===void 0?"form":si,qi=pr.validateMessages,Rr=pr.validateTrigger,Mn=Rr===void 0?"onChange":Rr,pn=pr.onValuesChange,wn=pr.onFieldsChange,Kn=pr.onFinish,Ei=pr.onFinishFailed,Ji=(0,l.Z)(pr,Di),Yi=v.useContext(ls),oa=ts(mn),Ma=(0,no.Z)(oa,1),k=Ma[0],de=k.getInternalHooks(pe),yt=de.useSubscribe,Ue=de.setInitialValues,nr=de.setCallbacks,Mr=de.setValidateMessages,qr=de.setPreserve,kn=de.destroyForm;v.useImperativeHandle(at,function(){return k}),v.useEffect(function(){return Yi.registerForm(hr,k),function(){Yi.unregisterForm(hr)}},[Yi,k,hr]),Mr((0,R.Z)((0,R.Z)({},Yi.validateMessages),qi)),nr({onValuesChange:pn,onFieldsChange:function(Oo){if(Yi.triggerFormChange(hr,Oo),wn){for(var Ho=arguments.length,Io=new Array(Ho>1?Ho-1:0),qs=1;qs<Ho;qs++)Io[qs-1]=arguments[qs];wn.apply(void 0,[Oo].concat(Io))}},onFinish:function(Oo){Yi.triggerFormFinish(hr,Oo),Kn&&Kn(Oo)},onFinishFailed:Ei}),qr(Vn);var Nn=v.useRef(null);Ue(er,!Nn.current),Nn.current||(Nn.current=!0),v.useEffect(function(){return kn},[]);var Mi,Bi=typeof ni=="function";if(Bi){var io=k.getFieldsValue(!0);Mi=ni(io,k)}else Mi=ni;yt(!Bi);var co=v.useRef();v.useEffect(function(){oi(co.current||[],dn||[])||k.setFields(dn||[]),co.current=dn},[dn,k]);var Sa=v.useMemo(function(){return(0,R.Z)((0,R.Z)({},k),{},{validateTrigger:Mn})},[k,Mn]),Ko=v.createElement(je.Provider,{value:Sa},Mi);return Si===!1?Ko:v.createElement(Si,(0,C.Z)({},Ji,{onSubmit:function(Oo){Oo.preventDefault(),Oo.stopPropagation(),k.submit()},onReset:function(Oo){var Ho;Oo.preventDefault(),k.resetFields(),(Ho=Ji.onReset)===null||Ho===void 0||Ho.call(Ji,Oo)}}),Ko)},Rs=As;function vr(Yr){try{return JSON.stringify(Yr)}catch(pr){return Math.random()}}var zr=function(){};function lr(){for(var Yr=arguments.length,pr=new Array(Yr),at=0;at<Yr;at++)pr[at]=arguments[at];var hr=pr[0],er=hr===void 0?[]:hr,dn=pr[1],mn=(0,v.useState)(),Vn=(0,no.Z)(mn,2),ni=Vn[0],si=Vn[1],Si=(0,v.useMemo)(function(){return vr(ni)},[ni]),qi=(0,v.useRef)(Si);qi.current=Si;var Rr=(0,v.useContext)(je),Mn=dn||Rr,pn=Mn&&Mn._init,wn=Gr(er),Kn=(0,v.useRef)(wn);return Kn.current=wn,zr(wn),(0,v.useEffect)(function(){if(pn){var Ei=Mn.getFieldsValue,Ji=Mn.getInternalHooks,Yi=Ji(pe),oa=Yi.registerWatch,Ma=oa(function(de){var yt=on(de,Kn.current),Ue=vr(yt);qi.current!==Ue&&(qi.current=Ue,si(yt))}),k=on(Ei(),Kn.current);return si(k),Ma}},[pn]),ni}var Zr=lr,Hn=v.forwardRef(Rs),Hr=Hn;Hr.FormProvider=ou,Hr.Field=xa,Hr.List=Hs,Hr.useForm=ts,Hr.useWatch=Zr;var Bo=null},62906:function(Qe,te){"use strict";te.Z={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},21990:function(Qe,te,m){"use strict";m.d(te,{Xo:function(){return Xe},Wx:function(){return rt},ZP:function(){return uo}});var v=m(87462),C=m(74902),l=m(4942),$=m(1413),R=m(97685),z=m(91),L=m(71002),T=m(21770),O=m(80334),F=m(67294),ue=m(94184),Ae=m.n(ue),re=m(8410),pe=m(31131),fe=m(15105),ke=m(42550),je=F.createContext(null);function bt(){return F.useContext(je)}function ut(){var Pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,bn=F.useState(!1),Oi=(0,R.Z)(bn,2),di=Oi[0],va=Oi[1],wa=F.useRef(null),Aa=function(){window.clearTimeout(wa.current)};F.useEffect(function(){return Aa},[]);var Ta=function(Da,Uo){Aa(),wa.current=window.setTimeout(function(){va(Da),Uo&&Uo()},Pn)};return[di,Ta,Aa]}function wt(){var Pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,bn=F.useRef(null),Oi=F.useRef(null);F.useEffect(function(){return function(){window.clearTimeout(Oi.current)}},[]);function di(va){(va||bn.current===null)&&(bn.current=va),window.clearTimeout(Oi.current),Oi.current=window.setTimeout(function(){bn.current=null},Pn)}return[function(){return bn.current},di]}function se(Pn,bn,Oi,di){var va=F.useRef(null);va.current={open:bn,triggerOpen:Oi,customizedTrigger:di},F.useEffect(function(){function wa(Aa){var Ta;if(!((Ta=va.current)!==null&&Ta!==void 0&&Ta.customizedTrigger)){var ma=Aa.target;ma.shadowRoot&&Aa.composed&&(ma=Aa.composedPath()[0]||ma),va.current.open&&Pn().filter(function(Da){return Da}).every(function(Da){return!Da.contains(ma)&&Da!==ma})&&va.current.triggerOpen(!1)}}return window.addEventListener("mousedown",wa),function(){return window.removeEventListener("mousedown",wa)}},[])}var qe=m(64217),me=m(34243),_e=function(bn){var Oi=bn.className,di=bn.customizeIcon,va=bn.customizeIconProps,wa=bn.onMouseDown,Aa=bn.onClick,Ta=bn.children,ma;return typeof di=="function"?ma=di(va):ma=di,F.createElement("span",{className:Oi,onMouseDown:function(Uo){Uo.preventDefault(),wa&&wa(Uo)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:Aa,"aria-hidden":!0},ma!==void 0?ma:F.createElement("span",{className:Ae()(Oi.split(/\s+/).map(function(Da){return"".concat(Da,"-icon")}))},Ta))},Te=_e,ht=function(bn,Oi){var di,va,wa=bn.prefixCls,Aa=bn.id,Ta=bn.inputElement,ma=bn.disabled,Da=bn.tabIndex,Uo=bn.autoFocus,ha=bn.autoComplete,xa=bn.editable,eo=bn.activeDescendantId,Ee=bn.value,Po=bn.maxLength,Hs=bn.onKeyDown,no=bn.onMouseDown,qo=bn.onChange,os=bn.onPaste,Go=bn.onCompositionStart,Wo=bn.onCompositionEnd,za=bn.open,Tu=bn.attrs,Cs=Ta||F.createElement("input",null),Zs=Cs,ts=Zs.ref,Vs=Zs.props,ou=Vs.onKeyDown,ls=Vs.onChange,Di=Vs.onMouseDown,As=Vs.onCompositionStart,Rs=Vs.onCompositionEnd,vr=Vs.style;return(0,O.Kp)(!("maxLength"in Cs.props),"Passing 'maxLength' to input element directly may not work because input in BaseSelect is controlled."),Cs=F.cloneElement(Cs,(0,$.Z)((0,$.Z)((0,$.Z)({type:"search"},Vs),{},{id:Aa,ref:(0,ke.sQ)(Oi,ts),disabled:ma,tabIndex:Da,autoComplete:ha||"off",autoFocus:Uo,className:Ae()("".concat(wa,"-selection-search-input"),(di=Cs)===null||di===void 0||(va=di.props)===null||va===void 0?void 0:va.className),role:"combobox","aria-expanded":za,"aria-haspopup":"listbox","aria-owns":"".concat(Aa,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(Aa,"_list"),"aria-activedescendant":eo},Tu),{},{value:xa?Ee:"",maxLength:Po,readOnly:!xa,unselectable:xa?null:"on",style:(0,$.Z)((0,$.Z)({},vr),{},{opacity:xa?null:0}),onKeyDown:function(lr){Hs(lr),ou&&ou(lr)},onMouseDown:function(lr){no(lr),Di&&Di(lr)},onChange:function(lr){qo(lr),ls&&ls(lr)},onCompositionStart:function(lr){Go(lr),As&&As(lr)},onCompositionEnd:function(lr){Wo(lr),Rs&&Rs(lr)},onPaste:os})),Cs},We=F.forwardRef(ht);We.displayName="Input";var Ne=We;function he(Pn){return Array.isArray(Pn)?Pn:Pn!==void 0?[Pn]:[]}var Ve=typeof window!="undefined"&&window.document&&window.document.documentElement,ie=Ve;function ze(Pn){return Pn!=null}function Le(Pn){return["string","number"].includes((0,L.Z)(Pn))}function Re(Pn){var bn=void 0;return Pn&&(Le(Pn.title)?bn=Pn.title.toString():Le(Pn.label)&&(bn=Pn.label.toString())),bn}function st(Pn,bn){ie?F.useLayoutEffect(Pn,bn):F.useEffect(Pn,bn)}function vt(Pn){var bn;return(bn=Pn.key)!==null&&bn!==void 0?bn:Pn.value}var Dt=function(bn){bn.preventDefault(),bn.stopPropagation()},ar=function(bn){var Oi=bn.id,di=bn.prefixCls,va=bn.values,wa=bn.open,Aa=bn.searchValue,Ta=bn.autoClearSearchValue,ma=bn.inputRef,Da=bn.placeholder,Uo=bn.disabled,ha=bn.mode,xa=bn.showSearch,eo=bn.autoFocus,Ee=bn.autoComplete,Po=bn.activeDescendantId,Hs=bn.tabIndex,no=bn.removeIcon,qo=bn.maxTagCount,os=bn.maxTagTextLength,Go=bn.maxTagPlaceholder,Wo=Go===void 0?function(si){return"+ ".concat(si.length," ...")}:Go,za=bn.tagRender,Tu=bn.onToggleOpen,Cs=bn.onRemove,Zs=bn.onInputChange,ts=bn.onInputPaste,Vs=bn.onInputKeyDown,ou=bn.onInputMouseDown,ls=bn.onInputCompositionStart,Di=bn.onInputCompositionEnd,As=F.useRef(null),Rs=(0,F.useState)(0),vr=(0,R.Z)(Rs,2),zr=vr[0],lr=vr[1],Zr=(0,F.useState)(!1),Hn=(0,R.Z)(Zr,2),Hr=Hn[0],Bo=Hn[1],Yr="".concat(di,"-selection"),pr=wa||ha==="multiple"&&Ta===!1||ha==="tags"?Aa:"",at=ha==="tags"||ha==="multiple"&&Ta===!1||xa&&(wa||Hr);st(function(){lr(As.current.scrollWidth)},[pr]);function hr(si,Si,qi,Rr,Mn){return F.createElement("span",{className:Ae()("".concat(Yr,"-item"),(0,l.Z)({},"".concat(Yr,"-item-disabled"),qi)),title:Re(si)},F.createElement("span",{className:"".concat(Yr,"-item-content")},Si),Rr&&F.createElement(Te,{className:"".concat(Yr,"-item-remove"),onMouseDown:Dt,onClick:Mn,customizeIcon:no},"\xD7"))}function er(si,Si,qi,Rr,Mn){var pn=function(Kn){Dt(Kn),Tu(!wa)};return F.createElement("span",{onMouseDown:pn},za({label:Si,value:si,disabled:qi,closable:Rr,onClose:Mn}))}function dn(si){var Si=si.disabled,qi=si.label,Rr=si.value,Mn=!Uo&&!Si,pn=qi;if(typeof os=="number"&&(typeof qi=="string"||typeof qi=="number")){var wn=String(pn);wn.length>os&&(pn="".concat(wn.slice(0,os),"..."))}var Kn=function(Ji){Ji&&Ji.stopPropagation(),Cs(si)};return typeof za=="function"?er(Rr,pn,Si,Mn,Kn):hr(si,pn,Si,Mn,Kn)}function mn(si){var Si=typeof Wo=="function"?Wo(si):Wo;return hr({title:Si},Si,!1)}var Vn=F.createElement("div",{className:"".concat(Yr,"-search"),style:{width:zr},onFocus:function(){Bo(!0)},onBlur:function(){Bo(!1)}},F.createElement(Ne,{ref:ma,open:wa,prefixCls:di,id:Oi,inputElement:null,disabled:Uo,autoFocus:eo,autoComplete:Ee,editable:at,activeDescendantId:Po,value:pr,onKeyDown:Vs,onMouseDown:ou,onChange:Zs,onPaste:ts,onCompositionStart:ls,onCompositionEnd:Di,tabIndex:Hs,attrs:(0,qe.Z)(bn,!0)}),F.createElement("span",{ref:As,className:"".concat(Yr,"-search-mirror"),"aria-hidden":!0},pr,"\xA0")),ni=F.createElement(me.Z,{prefixCls:"".concat(Yr,"-overflow"),data:va,renderItem:dn,renderRest:mn,suffix:Vn,itemKey:vt,maxCount:qo});return F.createElement(F.Fragment,null,ni,!va.length&&!pr&&F.createElement("span",{className:"".concat(Yr,"-placeholder")},Da))},$t=ar,ur=function(bn){var Oi=bn.inputElement,di=bn.prefixCls,va=bn.id,wa=bn.inputRef,Aa=bn.disabled,Ta=bn.autoFocus,ma=bn.autoComplete,Da=bn.activeDescendantId,Uo=bn.mode,ha=bn.open,xa=bn.values,eo=bn.placeholder,Ee=bn.tabIndex,Po=bn.showSearch,Hs=bn.searchValue,no=bn.activeValue,qo=bn.maxLength,os=bn.onInputKeyDown,Go=bn.onInputMouseDown,Wo=bn.onInputChange,za=bn.onInputPaste,Tu=bn.onInputCompositionStart,Cs=bn.onInputCompositionEnd,Zs=F.useState(!1),ts=(0,R.Z)(Zs,2),Vs=ts[0],ou=ts[1],ls=Uo==="combobox",Di=ls||Po,As=xa[0],Rs=Hs||"";ls&&no&&!Vs&&(Rs=no),F.useEffect(function(){ls&&ou(!1)},[ls,no]);var vr=Uo!=="combobox"&&!ha&&!Po?!1:!!Rs,zr=Re(As),lr=function(){if(As)return null;var Hn=vr?{visibility:"hidden"}:void 0;return F.createElement("span",{className:"".concat(di,"-selection-placeholder"),style:Hn},eo)};return F.createElement(F.Fragment,null,F.createElement("span",{className:"".concat(di,"-selection-search")},F.createElement(Ne,{ref:wa,prefixCls:di,id:va,open:ha,inputElement:Oi,disabled:Aa,autoFocus:Ta,autoComplete:ma,editable:Di,activeDescendantId:Da,value:Rs,onKeyDown:os,onMouseDown:Go,onChange:function(Hn){ou(!0),Wo(Hn)},onPaste:za,onCompositionStart:Tu,onCompositionEnd:Cs,tabIndex:Ee,attrs:(0,qe.Z)(bn,!0),maxLength:ls?qo:void 0})),!ls&&As&&!vr&&F.createElement("span",{className:"".concat(di,"-selection-item"),title:zr},As.label),lr())},we=ur;function At(Pn){return![fe.Z.ESC,fe.Z.SHIFT,fe.Z.BACKSPACE,fe.Z.TAB,fe.Z.WIN_KEY,fe.Z.ALT,fe.Z.META,fe.Z.WIN_KEY_RIGHT,fe.Z.CTRL,fe.Z.SEMICOLON,fe.Z.EQUALS,fe.Z.CAPS_LOCK,fe.Z.CONTEXT_MENU,fe.Z.F1,fe.Z.F2,fe.Z.F3,fe.Z.F4,fe.Z.F5,fe.Z.F6,fe.Z.F7,fe.Z.F8,fe.Z.F9,fe.Z.F10,fe.Z.F11,fe.Z.F12].includes(Pn)}var nt=function(bn,Oi){var di=(0,F.useRef)(null),va=(0,F.useRef)(!1),wa=bn.prefixCls,Aa=bn.open,Ta=bn.mode,ma=bn.showSearch,Da=bn.tokenWithEnter,Uo=bn.autoClearSearchValue,ha=bn.onSearch,xa=bn.onSearchSubmit,eo=bn.onToggleOpen,Ee=bn.onInputKeyDown,Po=bn.domRef;F.useImperativeHandle(Oi,function(){return{focus:function(){di.current.focus()},blur:function(){di.current.blur()}}});var Hs=wt(0),no=(0,R.Z)(Hs,2),qo=no[0],os=no[1],Go=function(vr){var zr=vr.which;(zr===fe.Z.UP||zr===fe.Z.DOWN)&&vr.preventDefault(),Ee&&Ee(vr),zr===fe.Z.ENTER&&Ta==="tags"&&!va.current&&!Aa&&(xa==null||xa(vr.target.value)),At(zr)&&eo(!0)},Wo=function(){os(!0)},za=(0,F.useRef)(null),Tu=function(vr){ha(vr,!0,va.current)!==!1&&eo(!0)},Cs=function(){va.current=!0},Zs=function(vr){va.current=!1,Ta!=="combobox"&&Tu(vr.target.value)},ts=function(vr){var zr=vr.target.value;if(Da&&za.current&&/[\r\n]/.test(za.current)){var lr=za.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");zr=zr.replace(lr,za.current)}za.current=null,Tu(zr)},Vs=function(vr){var zr=vr.clipboardData,lr=zr.getData("text");za.current=lr},ou=function(vr){var zr=vr.target;if(zr!==di.current){var lr=document.body.style.msTouchAction!==void 0;lr?setTimeout(function(){di.current.focus()}):di.current.focus()}},ls=function(vr){var zr=qo();vr.target!==di.current&&!zr&&Ta!=="combobox"&&vr.preventDefault(),(Ta!=="combobox"&&(!ma||!zr)||!Aa)&&(Aa&&Uo!==!1&&ha("",!0,!1),eo())},Di={inputRef:di,onInputKeyDown:Go,onInputMouseDown:Wo,onInputChange:ts,onInputPaste:Vs,onInputCompositionStart:Cs,onInputCompositionEnd:Zs},As=Ta==="multiple"||Ta==="tags"?F.createElement($t,(0,v.Z)({},bn,Di)):F.createElement(we,(0,v.Z)({},bn,Di));return F.createElement("div",{ref:Po,className:"".concat(wa,"-selector"),onClick:ou,onMouseDown:ls},As)},Lt=F.forwardRef(nt);Lt.displayName="Selector";var St=Lt,Ut=m(81263),lt=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Et=function(bn){var Oi=bn===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:Oi,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:Oi,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:Oi,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:Oi,adjustY:1}}}},Zt=function(bn,Oi){var di=bn.prefixCls,va=bn.disabled,wa=bn.visible,Aa=bn.children,Ta=bn.popupElement,ma=bn.containerWidth,Da=bn.animation,Uo=bn.transitionName,ha=bn.dropdownStyle,xa=bn.dropdownClassName,eo=bn.direction,Ee=eo===void 0?"ltr":eo,Po=bn.placement,Hs=bn.dropdownMatchSelectWidth,no=bn.dropdownRender,qo=bn.dropdownAlign,os=bn.getPopupContainer,Go=bn.empty,Wo=bn.getTriggerDOMNode,za=bn.onPopupVisibleChange,Tu=bn.onPopupMouseEnter,Cs=(0,z.Z)(bn,lt),Zs="".concat(di,"-dropdown"),ts=Ta;no&&(ts=no(Ta));var Vs=F.useMemo(function(){return Et(Hs)},[Hs]),ou=Da?"".concat(Zs,"-").concat(Da):Uo,ls=F.useRef(null);F.useImperativeHandle(Oi,function(){return{getPopupElement:function(){return ls.current}}});var Di=(0,$.Z)({minWidth:ma},ha);return typeof Hs=="number"?Di.width=Hs:Hs&&(Di.width=ma),F.createElement(Ut.Z,(0,v.Z)({},Cs,{showAction:za?["click"]:[],hideAction:za?["click"]:[],popupPlacement:Po||(Ee==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:Vs,prefixCls:Zs,popupTransitionName:ou,popup:F.createElement("div",{ref:ls,onMouseEnter:Tu},ts),popupAlign:qo,popupVisible:wa,getPopupContainer:os,popupClassName:Ae()(xa,(0,l.Z)({},"".concat(Zs,"-empty"),Go)),popupStyle:Di,getTriggerDOMNode:Wo,onPopupVisibleChange:za}),Aa)},Be=F.forwardRef(Zt);Be.displayName="SelectTrigger";var He=Be,ft=m(84506);function Z(Pn,bn){var Oi=Pn.key,di;return"value"in Pn&&(di=Pn.value),Oi!=null?Oi:di!==void 0?di:"rc-index-key-".concat(bn)}function J(Pn,bn){var Oi=Pn||{},di=Oi.label,va=Oi.value,wa=Oi.options;return{label:di||(bn?"children":"label"),value:va||"value",options:wa||"options"}}function K(Pn){var bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oi=bn.fieldNames,di=bn.childrenAsData,va=[],wa=J(Oi,!1),Aa=wa.label,Ta=wa.value,ma=wa.options;function Da(Uo,ha){Uo.forEach(function(xa){var eo=xa[Aa];if(ha||!(ma in xa)){var Ee=xa[Ta];va.push({key:Z(xa,va.length),groupOption:ha,data:xa,label:eo,value:Ee})}else{var Po=eo;Po===void 0&&di&&(Po=xa.label),va.push({key:Z(xa,va.length),group:!0,data:xa,label:Po}),Da(xa[ma],!0)}})}return Da(Pn,!1),va}function B(Pn){var bn=(0,$.Z)({},Pn);return"props"in bn||Object.defineProperty(bn,"props",{get:function(){return(0,O.ZP)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),bn}}),bn}function j(Pn,bn){if(!bn||!bn.length)return null;var Oi=!1;function di(wa,Aa){var Ta=(0,ft.Z)(Aa),ma=Ta[0],Da=Ta.slice(1);if(!ma)return[wa];var Uo=wa.split(ma);return Oi=Oi||Uo.length>1,Uo.reduce(function(ha,xa){return[].concat((0,C.Z)(ha),(0,C.Z)(di(xa,Da)))},[]).filter(function(ha){return ha})}var va=di(Pn,bn);return Oi?va:null}var ee=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],W=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function De(Pn){return Pn==="tags"||Pn==="multiple"}var ot=F.forwardRef(function(Pn,bn){var Oi,di,va=Pn.id,wa=Pn.prefixCls,Aa=Pn.className,Ta=Pn.showSearch,ma=Pn.tagRender,Da=Pn.direction,Uo=Pn.omitDomProps,ha=Pn.displayValues,xa=Pn.onDisplayValuesChange,eo=Pn.emptyOptions,Ee=Pn.notFoundContent,Po=Ee===void 0?"Not Found":Ee,Hs=Pn.onClear,no=Pn.mode,qo=Pn.disabled,os=Pn.loading,Go=Pn.getInputElement,Wo=Pn.getRawInputElement,za=Pn.open,Tu=Pn.defaultOpen,Cs=Pn.onDropdownVisibleChange,Zs=Pn.activeValue,ts=Pn.onActiveValueChange,Vs=Pn.activeDescendantId,ou=Pn.searchValue,ls=Pn.autoClearSearchValue,Di=Pn.onSearch,As=Pn.onSearchSplit,Rs=Pn.tokenSeparators,vr=Pn.allowClear,zr=Pn.showArrow,lr=Pn.inputIcon,Zr=Pn.clearIcon,Hn=Pn.OptionList,Hr=Pn.animation,Bo=Pn.transitionName,Yr=Pn.dropdownStyle,pr=Pn.dropdownClassName,at=Pn.dropdownMatchSelectWidth,hr=Pn.dropdownRender,er=Pn.dropdownAlign,dn=Pn.placement,mn=Pn.getPopupContainer,Vn=Pn.showAction,ni=Vn===void 0?[]:Vn,si=Pn.onFocus,Si=Pn.onBlur,qi=Pn.onKeyUp,Rr=Pn.onKeyDown,Mn=Pn.onMouseDown,pn=(0,z.Z)(Pn,ee),wn=De(no),Kn=(Ta!==void 0?Ta:wn)||no==="combobox",Ei=(0,$.Z)({},pn);W.forEach(function(Yo){delete Ei[Yo]}),Uo==null||Uo.forEach(function(Yo){delete Ei[Yo]});var Ji=F.useState(!1),Yi=(0,R.Z)(Ji,2),oa=Yi[0],Ma=Yi[1];F.useEffect(function(){Ma((0,pe.Z)())},[]);var k=F.useRef(null),de=F.useRef(null),yt=F.useRef(null),Ue=F.useRef(null),nr=F.useRef(null),Mr=ut(),qr=(0,R.Z)(Mr,3),kn=qr[0],Nn=qr[1],Mi=qr[2];F.useImperativeHandle(bn,function(){var Yo,Gs;return{focus:(Yo=Ue.current)===null||Yo===void 0?void 0:Yo.focus,blur:(Gs=Ue.current)===null||Gs===void 0?void 0:Gs.blur,scrollTo:function(dl){var su;return(su=nr.current)===null||su===void 0?void 0:su.scrollTo(dl)}}});var Bi=F.useMemo(function(){var Yo;if(no!=="combobox")return ou;var Gs=(Yo=ha[0])===null||Yo===void 0?void 0:Yo.value;return typeof Gs=="string"||typeof Gs=="number"?String(Gs):""},[ou,no,ha]),io=no==="combobox"&&typeof Go=="function"&&Go()||null,co=typeof Wo=="function"&&Wo(),Sa=(0,ke.x1)(de,co==null||(Oi=co.props)===null||Oi===void 0?void 0:Oi.ref),Ko=(0,T.Z)(void 0,{defaultValue:Tu,value:za}),wo=(0,R.Z)(Ko,2),Oo=wo[0],Ho=wo[1],Io=Oo,qs=!Po&&eo;(qo||qs&&Io&&no==="combobox")&&(Io=!1);var Il=qs?!1:Io,Ao=F.useCallback(function(Yo){var Gs=Yo!==void 0?Yo:!Io;qo||(Ho(Gs),Io!==Gs&&(Cs==null||Cs(Gs)))},[qo,Io,Ho,Cs]),Va=F.useMemo(function(){return(Rs||[]).some(function(Yo){return[`
`,`\r
`].includes(Yo)})},[Rs]),gs=function(Gs,Kl,dl){var su=!0,Fc=Gs;ts==null||ts(null);var tc=dl?null:j(Gs,Rs);return no!=="combobox"&&tc&&(Fc="",As==null||As(tc),Ao(!1),su=!1),Di&&Bi!==Fc&&Di(Fc,{source:Kl?"typing":"effect"}),su},Ws=function(Gs){!Gs||!Gs.trim()||Di(Gs,{source:"submit"})};F.useEffect(function(){!Io&&!wn&&no!=="combobox"&&gs("",!1,!1)},[Io]),F.useEffect(function(){Oo&&qo&&Ho(!1),qo&&Nn(!1)},[qo]);var bs=wt(),Ps=(0,R.Z)(bs,2),Xs=Ps[0],gl=Ps[1],jf=function(Gs){var Kl=Xs(),dl=Gs.which;if(dl===fe.Z.ENTER&&(no!=="combobox"&&Gs.preventDefault(),Io||Ao(!0)),gl(!!Bi),dl===fe.Z.BACKSPACE&&!Kl&&wn&&!Bi&&ha.length){for(var su=(0,C.Z)(ha),Fc=null,tc=su.length-1;tc>=0;tc-=1){var Tf=su[tc];if(!Tf.disabled){su.splice(tc,1),Fc=Tf;break}}Fc&&xa(su,{type:"remove",values:[Fc]})}for(var _c=arguments.length,Hl=new Array(_c>1?_c-1:0),ff=1;ff<_c;ff++)Hl[ff-1]=arguments[ff];if(Io&&nr.current){var xc;(xc=nr.current).onKeyDown.apply(xc,[Gs].concat(Hl))}Rr==null||Rr.apply(void 0,[Gs].concat(Hl))},Mu=function(Gs){for(var Kl=arguments.length,dl=new Array(Kl>1?Kl-1:0),su=1;su<Kl;su++)dl[su-1]=arguments[su];if(Io&&nr.current){var Fc;(Fc=nr.current).onKeyUp.apply(Fc,[Gs].concat(dl))}qi==null||qi.apply(void 0,[Gs].concat(dl))},yl=function(Gs){var Kl=ha.filter(function(dl){return dl!==Gs});xa(Kl,{type:"remove",values:[Gs]})},lc=F.useRef(!1),Lc=function(){Nn(!0),qo||(si&&!lc.current&&si.apply(void 0,arguments),ni.includes("focus")&&Ao(!0)),lc.current=!0},dh=function(){Nn(!1,function(){lc.current=!1,Ao(!1)}),!qo&&(Bi&&(no==="tags"?Di(Bi,{source:"submit"}):no==="multiple"&&Di("",{source:"blur"})),Si&&Si.apply(void 0,arguments))},_l=[];F.useEffect(function(){return function(){_l.forEach(function(Yo){return clearTimeout(Yo)}),_l.splice(0,_l.length)}},[]);var Us=function(Gs){var Kl,dl=Gs.target,su=(Kl=yt.current)===null||Kl===void 0?void 0:Kl.getPopupElement();if(su&&su.contains(dl)){var Fc=setTimeout(function(){var Hl=_l.indexOf(Fc);if(Hl!==-1&&_l.splice(Hl,1),Mi(),!oa&&!su.contains(document.activeElement)){var ff;(ff=Ue.current)===null||ff===void 0||ff.focus()}});_l.push(Fc)}for(var tc=arguments.length,Tf=new Array(tc>1?tc-1:0),_c=1;_c<tc;_c++)Tf[_c-1]=arguments[_c];Mn==null||Mn.apply(void 0,[Gs].concat(Tf))},th=F.useState(null),kf=(0,R.Z)(th,2),wf=kf[0],lf=kf[1],gd=F.useState({}),Kh=(0,R.Z)(gd,2),yc=Kh[1];function Eh(){yc({})}(0,re.Z)(function(){if(Il){var Yo,Gs=Math.ceil((Yo=k.current)===null||Yo===void 0?void 0:Yo.offsetWidth);wf!==Gs&&!Number.isNaN(Gs)&&lf(Gs)}},[Il]);var cf;co&&(cf=function(Gs){Ao(Gs)}),se(function(){var Yo;return[k.current,(Yo=yt.current)===null||Yo===void 0?void 0:Yo.getPopupElement()]},Il,Ao,!!co);var Af=F.useMemo(function(){return(0,$.Z)((0,$.Z)({},Pn),{},{notFoundContent:Po,open:Io,triggerOpen:Il,id:va,showSearch:Kn,multiple:wn,toggleOpen:Ao})},[Pn,Po,Il,Io,va,Kn,wn,Ao]),_f=zr!==void 0?zr:os||!wn&&no!=="combobox",Dc;_f&&(Dc=F.createElement(Te,{className:Ae()("".concat(wa,"-arrow"),(0,l.Z)({},"".concat(wa,"-arrow-loading"),os)),customizeIcon:lr,customizeIconProps:{loading:os,searchValue:Bi,open:Io,focused:kn,showSearch:Kn}}));var Ff,Zl=function(){var Gs;Hs==null||Hs(),(Gs=Ue.current)===null||Gs===void 0||Gs.focus(),xa([],{type:"clear",values:ha}),gs("",!1,!1)};!qo&&vr&&(ha.length||Bi)&&!(no==="combobox"&&Bi==="")&&(Ff=F.createElement(Te,{className:"".concat(wa,"-clear"),onMouseDown:Zl,customizeIcon:Zr},"\xD7"));var kc=F.createElement(Hn,{ref:nr}),ad=Ae()(wa,Aa,(di={},(0,l.Z)(di,"".concat(wa,"-focused"),kn),(0,l.Z)(di,"".concat(wa,"-multiple"),wn),(0,l.Z)(di,"".concat(wa,"-single"),!wn),(0,l.Z)(di,"".concat(wa,"-allow-clear"),vr),(0,l.Z)(di,"".concat(wa,"-show-arrow"),_f),(0,l.Z)(di,"".concat(wa,"-disabled"),qo),(0,l.Z)(di,"".concat(wa,"-loading"),os),(0,l.Z)(di,"".concat(wa,"-open"),Io),(0,l.Z)(di,"".concat(wa,"-customize-input"),io),(0,l.Z)(di,"".concat(wa,"-show-search"),Kn),di)),rh=F.createElement(He,{ref:yt,disabled:qo,prefixCls:wa,visible:Il,popupElement:kc,containerWidth:wf,animation:Hr,transitionName:Bo,dropdownStyle:Yr,dropdownClassName:pr,direction:Da,dropdownMatchSelectWidth:at,dropdownRender:hr,dropdownAlign:er,placement:dn,getPopupContainer:mn,empty:eo,getTriggerDOMNode:function(){return de.current},onPopupVisibleChange:cf,onPopupMouseEnter:Eh},co?F.cloneElement(co,{ref:Sa}):F.createElement(St,(0,v.Z)({},Pn,{domRef:de,prefixCls:wa,inputElement:io,ref:Ue,id:va,showSearch:Kn,autoClearSearchValue:ls,mode:no,activeDescendantId:Vs,tagRender:ma,values:ha,open:Io,onToggleOpen:Ao,activeValue:Zs,searchValue:Bi,onSearch:gs,onSearchSubmit:Ws,onRemove:yl,tokenWithEnter:Va}))),od;return co?od=rh:od=F.createElement("div",(0,v.Z)({className:ad},Ei,{ref:k,onMouseDown:Us,onKeyDown:jf,onKeyUp:Mu,onFocus:Lc,onBlur:dh}),kn&&!Io&&F.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(ha.map(function(Yo){var Gs=Yo.label,Kl=Yo.value;return["number","string"].includes((0,L.Z)(Gs))?Gs:Kl}).join(", "))),rh,Dc,Ff),F.createElement(je.Provider,{value:Af},od)}),Wt=ot,Ct=function(Pn,bn){var Oi=F.useRef({values:new Map,options:new Map}),di=F.useMemo(function(){var wa=Oi.current,Aa=wa.values,Ta=wa.options,ma=Pn.map(function(ha){if(ha.label===void 0){var xa;return(0,$.Z)((0,$.Z)({},ha),{},{label:(xa=Aa.get(ha.value))===null||xa===void 0?void 0:xa.label})}return ha}),Da=new Map,Uo=new Map;return ma.forEach(function(ha){Da.set(ha.value,ha),Uo.set(ha.value,bn.get(ha.value)||Ta.get(ha.value))}),Oi.current.values=Da,Oi.current.options=Uo,ma},[Pn,bn]),va=F.useCallback(function(wa){return bn.get(wa)||Oi.current.options.get(wa)},[bn]);return[di,va]};function Qt(Pn,bn){return he(Pn).join("").toUpperCase().includes(bn)}var ir=function(Pn,bn,Oi,di,va){return F.useMemo(function(){if(!Oi||di===!1)return Pn;var wa=bn.options,Aa=bn.label,Ta=bn.value,ma=[],Da=typeof di=="function",Uo=Oi.toUpperCase(),ha=Da?di:function(eo,Ee){return va?Qt(Ee[va],Uo):Ee[wa]?Qt(Ee[Aa!=="children"?Aa:"label"],Uo):Qt(Ee[Ta],Uo)},xa=Da?function(eo){return B(eo)}:function(eo){return eo};return Pn.forEach(function(eo){if(eo[wa]){var Ee=ha(Oi,xa(eo));if(Ee)ma.push(eo);else{var Po=eo[wa].filter(function(Hs){return ha(Oi,xa(Hs))});Po.length&&ma.push((0,$.Z)((0,$.Z)({},eo),{},(0,l.Z)({},wa,Po)))}return}ha(Oi,xa(eo))&&ma.push(eo)}),ma},[Pn,di,va,Oi,bn])},Er=m(98924),Qr=0,Mt=(0,Er.Z)();function br(){var Pn;return Mt?(Pn=Qr,Qr+=1):Pn="TEST_OR_SSR",Pn}function Nt(Pn){var bn=F.useState(),Oi=(0,R.Z)(bn,2),di=Oi[0],va=Oi[1];return F.useEffect(function(){va("rc_select_".concat(br()))},[]),Pn||di}var Pr=m(50344),_r=["children","value"],kr=["children"];function zt(Pn){var bn=Pn,Oi=bn.key,di=bn.props,va=di.children,wa=di.value,Aa=(0,z.Z)(di,_r);return(0,$.Z)({key:Oi,value:wa!==void 0?wa:Oi,children:va},Aa)}function mr(Pn){var bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(0,Pr.Z)(Pn).map(function(Oi,di){if(!F.isValidElement(Oi)||!Oi.type)return null;var va=Oi,wa=va.type.isSelectOptGroup,Aa=va.key,Ta=va.props,ma=Ta.children,Da=(0,z.Z)(Ta,kr);return bn||!wa?zt(Oi):(0,$.Z)((0,$.Z)({key:"__RC_SELECT_GRP__".concat(Aa===null?di:Aa,"__"),label:Aa},Da),{},{options:mr(ma)})}).filter(function(Oi){return Oi})}function Or(Pn,bn,Oi,di,va){return F.useMemo(function(){var wa=Pn,Aa=!Pn;Aa&&(wa=mr(bn));var Ta=new Map,ma=new Map,Da=function(xa,eo,Ee){Ee&&typeof Ee=="string"&&xa.set(eo[Ee],eo)};function Uo(ha){for(var xa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,eo=0;eo<ha.length;eo+=1){var Ee=ha[eo];!Ee[Oi.options]||xa?(Ta.set(Ee[Oi.value],Ee),Da(ma,Ee,Oi.label),Da(ma,Ee,di),Da(ma,Ee,va)):Uo(Ee[Oi.options],!0)}}return Uo(wa),{options:wa,valueOptions:Ta,labelOptions:ma}},[Pn,bn,Oi,di,va])}function X(Pn){var bn=F.useRef();bn.current=Pn;var Oi=F.useCallback(function(){return bn.current.apply(bn,arguments)},[]);return Oi}var Nr=function(){return null};Nr.isSelectOptGroup=!0;var Xe=Nr,xe=function(){return null};xe.isSelectOption=!0;var rt=xe,kt=m(56982),cr=m(98423),Ar=m(73453),Lr=F.createContext(null),sr=Lr;function Ge(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Gr=["disabled","title","children","style","className"];function on(Pn){return typeof Pn=="string"||typeof Pn=="number"}var cn=function(bn,Oi){var di=bt(),va=di.prefixCls,wa=di.id,Aa=di.open,Ta=di.multiple,ma=di.mode,Da=di.searchValue,Uo=di.toggleOpen,ha=di.notFoundContent,xa=di.onPopupScroll,eo=F.useContext(sr),Ee=eo.flattenOptions,Po=eo.onActiveValue,Hs=eo.defaultActiveFirstOption,no=eo.onSelect,qo=eo.menuItemSelectedIcon,os=eo.rawValues,Go=eo.fieldNames,Wo=eo.virtual,za=eo.listHeight,Tu=eo.listItemHeight,Cs="".concat(va,"-item"),Zs=(0,kt.Z)(function(){return Ee},[Aa,Ee],function(at,hr){return hr[0]&&at[1]!==hr[1]}),ts=F.useRef(null),Vs=function(hr){hr.preventDefault()},ou=function(hr){ts.current&&ts.current.scrollTo(typeof hr=="number"?{index:hr}:hr)},ls=function(hr){for(var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,dn=Zs.length,mn=0;mn<dn;mn+=1){var Vn=(hr+mn*er+dn)%dn,ni=Zs[Vn],si=ni.group,Si=ni.data;if(!si&&!Si.disabled)return Vn}return-1},Di=F.useState(function(){return ls(0)}),As=(0,R.Z)(Di,2),Rs=As[0],vr=As[1],zr=function(hr){var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;vr(hr);var dn={source:er?"keyboard":"mouse"},mn=Zs[hr];if(!mn){Po(null,-1,dn);return}Po(mn.value,hr,dn)};(0,F.useEffect)(function(){zr(Hs!==!1?ls(0):-1)},[Zs.length,Da]);var lr=F.useCallback(function(at){return os.has(at)&&ma!=="combobox"},[ma,(0,C.Z)(os).toString(),os.size]);(0,F.useEffect)(function(){var at=setTimeout(function(){if(!Ta&&Aa&&os.size===1){var er=Array.from(os)[0],dn=Zs.findIndex(function(mn){var Vn=mn.data;return Vn.value===er});dn!==-1&&(zr(dn),ou(dn))}});if(Aa){var hr;(hr=ts.current)===null||hr===void 0||hr.scrollTo(void 0)}return function(){return clearTimeout(at)}},[Aa,Da]);var Zr=function(hr){hr!==void 0&&no(hr,{selected:!os.has(hr)}),Ta||Uo(!1)};if(F.useImperativeHandle(Oi,function(){return{onKeyDown:function(hr){var er=hr.which,dn=hr.ctrlKey;switch(er){case fe.Z.N:case fe.Z.P:case fe.Z.UP:case fe.Z.DOWN:{var mn=0;if(er===fe.Z.UP?mn=-1:er===fe.Z.DOWN?mn=1:Ge()&&dn&&(er===fe.Z.N?mn=1:er===fe.Z.P&&(mn=-1)),mn!==0){var Vn=ls(Rs+mn,mn);ou(Vn),zr(Vn,!0)}break}case fe.Z.ENTER:{var ni=Zs[Rs];ni&&!ni.data.disabled?Zr(ni.value):Zr(void 0),Aa&&hr.preventDefault();break}case fe.Z.ESC:Uo(!1),Aa&&hr.stopPropagation()}},onKeyUp:function(){},scrollTo:function(hr){ou(hr)}}}),Zs.length===0)return F.createElement("div",{role:"listbox",id:"".concat(wa,"_list"),className:"".concat(Cs,"-empty"),onMouseDown:Vs},ha);var Hn=Object.keys(Go).map(function(at){return Go[at]}),Hr=function(hr){return hr.label};function Bo(at,hr){var er=at.group;return{role:er?"presentation":"option",id:"".concat(wa,"_list_").concat(hr)}}var Yr=function(hr){var er=Zs[hr];if(!er)return null;var dn=er.data||{},mn=dn.value,Vn=er.group,ni=(0,qe.Z)(dn,!0),si=Hr(er);return er?F.createElement("div",(0,v.Z)({"aria-label":typeof si=="string"&&!Vn?si:null},ni,{key:hr},Bo(er,hr),{"aria-selected":lr(mn)}),mn):null},pr={role:"listbox",id:"".concat(wa,"_list")};return F.createElement(F.Fragment,null,Wo&&F.createElement("div",(0,v.Z)({},pr,{style:{height:0,width:0,overflow:"hidden"}}),Yr(Rs-1),Yr(Rs),Yr(Rs+1)),F.createElement(Ar.Z,{itemKey:"key",ref:ts,data:Zs,height:za,itemHeight:Tu,fullHeight:!1,onMouseDown:Vs,onScroll:xa,virtual:Wo,innerProps:Wo?null:pr},function(at,hr){var er,dn=at.group,mn=at.groupOption,Vn=at.data,ni=at.label,si=at.value,Si=Vn.key;if(dn){var qi,Rr=(qi=Vn.title)!==null&&qi!==void 0?qi:on(ni)?ni.toString():void 0;return F.createElement("div",{className:Ae()(Cs,"".concat(Cs,"-group")),title:Rr},ni!==void 0?ni:Si)}var Mn=Vn.disabled,pn=Vn.title,wn=Vn.children,Kn=Vn.style,Ei=Vn.className,Ji=(0,z.Z)(Vn,Gr),Yi=(0,cr.Z)(Ji,Hn),oa=lr(si),Ma="".concat(Cs,"-option"),k=Ae()(Cs,Ma,Ei,(er={},(0,l.Z)(er,"".concat(Ma,"-grouped"),mn),(0,l.Z)(er,"".concat(Ma,"-active"),Rs===hr&&!Mn),(0,l.Z)(er,"".concat(Ma,"-disabled"),Mn),(0,l.Z)(er,"".concat(Ma,"-selected"),oa),er)),de=Hr(at),yt=!qo||typeof qo=="function"||oa,Ue=typeof de=="number"?de:de||si,nr=on(Ue)?Ue.toString():void 0;return pn!==void 0&&(nr=pn),F.createElement("div",(0,v.Z)({},(0,qe.Z)(Yi),Wo?{}:Bo(at,hr),{"aria-selected":oa,className:k,title:nr,onMouseMove:function(){Rs===hr||Mn||zr(hr)},onClick:function(){Mn||Zr(si)},style:Kn}),F.createElement("div",{className:"".concat(Ma,"-content")},Ue),F.isValidElement(qo)||oa,yt&&F.createElement(Te,{className:"".concat(Cs,"-option-state"),customizeIcon:qo,customizeIconProps:{isSelected:oa}},oa?"\u2713":null))}))},Dn=F.forwardRef(cn);Dn.displayName="OptionList";var ci=Dn;function ia(Pn){var bn=Pn.mode,Oi=Pn.options,di=Pn.children,va=Pn.backfill,wa=Pn.allowClear,Aa=Pn.placeholder,Ta=Pn.getInputElement,ma=Pn.showSearch,Da=Pn.onSearch,Uo=Pn.defaultOpen,ha=Pn.autoFocus,xa=Pn.labelInValue,eo=Pn.value,Ee=Pn.inputValue,Po=Pn.optionLabelProp,Hs=isMultiple(bn),no=ma!==void 0?ma:Hs||bn==="combobox",qo=Oi||convertChildrenToData(di);if(warning(bn!=="tags"||qo.every(function(za){return!za.disabled}),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),bn==="tags"||bn==="combobox"){var os=qo.some(function(za){return za.options?za.options.some(function(Tu){return typeof("value"in Tu?Tu.value:Tu.key)=="number"}):typeof("value"in za?za.value:za.key)=="number"});warning(!os,"`value` of Option should not use number type when `mode` is `tags` or `combobox`.")}if(warning(bn!=="combobox"||!Po,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),warning(bn==="combobox"||!va,"`backfill` only works with `combobox` mode."),warning(bn==="combobox"||!Ta,"`getInputElement` only work with `combobox` mode."),noteOnce(bn!=="combobox"||!Ta||!wa||!Aa,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),Da&&!no&&bn!=="combobox"&&bn!=="tags"&&warning(!1,"`onSearch` should work with `showSearch` instead of use alone."),noteOnce(!Uo||ha,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),eo!=null){var Go=toArray(eo);warning(!xa||Go.every(function(za){return _typeof(za)==="object"&&("key"in za||"value"in za)}),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),warning(!Hs||Array.isArray(eo),"`value` should be array when `mode` is `multiple` or `tags`")}if(di){var Wo=null;toNodeArray(di).some(function(za){if(!React.isValidElement(za)||!za.type)return!1;var Tu=za,Cs=Tu.type;if(Cs.isSelectOption)return!1;if(Cs.isSelectOptGroup){var Zs=toNodeArray(za.props.children).every(function(ts){return!React.isValidElement(ts)||!za.type||ts.type.isSelectOption?!0:(Wo=ts.type,!1)});return!Zs}return Wo=Cs,!0}),Wo&&warning(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(Wo.displayName||Wo.name||Wo,"`.")),warning(Ee===void 0,"`inputValue` is deprecated, please use `searchValue` instead.")}}function Vi(Pn,bn){if(Pn){var Oi=function di(va){for(var wa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Aa=0;Aa<va.length;Aa++){var Ta=va[Aa];if(Ta[bn==null?void 0:bn.value]===null)return warning(!1,"`value` in Select options should not be `null`."),!0;if(!wa&&Array.isArray(Ta[bn==null?void 0:bn.options])&&di(Ta[bn==null?void 0:bn.options],!0))break}};Oi(Pn)}}var On=null,ji=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],oi=["inputValue"];function Hi(Pn){return!Pn||(0,L.Z)(Pn)!=="object"}var Ca=F.forwardRef(function(Pn,bn){var Oi=Pn.id,di=Pn.mode,va=Pn.prefixCls,wa=va===void 0?"rc-select":va,Aa=Pn.backfill,Ta=Pn.fieldNames,ma=Pn.inputValue,Da=Pn.searchValue,Uo=Pn.onSearch,ha=Pn.autoClearSearchValue,xa=ha===void 0?!0:ha,eo=Pn.onSelect,Ee=Pn.onDeselect,Po=Pn.dropdownMatchSelectWidth,Hs=Po===void 0?!0:Po,no=Pn.filterOption,qo=Pn.filterSort,os=Pn.optionFilterProp,Go=Pn.optionLabelProp,Wo=Pn.options,za=Pn.children,Tu=Pn.defaultActiveFirstOption,Cs=Pn.menuItemSelectedIcon,Zs=Pn.virtual,ts=Pn.listHeight,Vs=ts===void 0?200:ts,ou=Pn.listItemHeight,ls=ou===void 0?20:ou,Di=Pn.value,As=Pn.defaultValue,Rs=Pn.labelInValue,vr=Pn.onChange,zr=(0,z.Z)(Pn,ji),lr=Nt(Oi),Zr=De(di),Hn=!!(!Wo&&za),Hr=F.useMemo(function(){return no===void 0&&di==="combobox"?!1:no},[no,di]),Bo=F.useMemo(function(){return J(Ta,Hn)},[JSON.stringify(Ta),Hn]),Yr=(0,T.Z)("",{value:Da!==void 0?Da:ma,postState:function(Va){return Va||""}}),pr=(0,R.Z)(Yr,2),at=pr[0],hr=pr[1],er=Or(Wo,za,Bo,os,Go),dn=er.valueOptions,mn=er.labelOptions,Vn=er.options,ni=F.useCallback(function(Ao){var Va=he(Ao);return Va.map(function(gs){var Ws,bs,Ps,Xs,gl;if(Hi(gs))Ws=gs;else{var jf;Ps=gs.key,bs=gs.label,Ws=(jf=gs.value)!==null&&jf!==void 0?jf:Ps}var Mu=dn.get(Ws);if(Mu){var yl;if(bs===void 0&&(bs=Mu==null?void 0:Mu[Go||Bo.label]),Ps===void 0&&(Ps=(yl=Mu==null?void 0:Mu.key)!==null&&yl!==void 0?yl:Ws),Xs=Mu==null?void 0:Mu.disabled,gl=Mu==null?void 0:Mu.title,!1)var lc}return{label:bs,value:Ws,key:Ps,disabled:Xs,title:gl}})},[Bo,Go,dn]),si=(0,T.Z)(As,{value:Di}),Si=(0,R.Z)(si,2),qi=Si[0],Rr=Si[1],Mn=F.useMemo(function(){var Ao,Va=ni(qi);return di==="combobox"&&!((Ao=Va[0])!==null&&Ao!==void 0&&Ao.value)?[]:Va},[qi,ni,di]),pn=Ct(Mn,dn),wn=(0,R.Z)(pn,2),Kn=wn[0],Ei=wn[1],Ji=F.useMemo(function(){if(!di&&Kn.length===1){var Ao=Kn[0];if(Ao.value===null&&(Ao.label===null||Ao.label===void 0))return[]}return Kn.map(function(Va){var gs;return(0,$.Z)((0,$.Z)({},Va),{},{label:(gs=Va.label)!==null&&gs!==void 0?gs:Va.value})})},[di,Kn]),Yi=F.useMemo(function(){return new Set(Kn.map(function(Ao){return Ao.value}))},[Kn]);F.useEffect(function(){if(di==="combobox"){var Ao,Va=(Ao=Kn[0])===null||Ao===void 0?void 0:Ao.value;hr(ze(Va)?String(Va):"")}},[Kn]);var oa=X(function(Ao,Va){var gs,Ws=Va!=null?Va:Ao;return gs={},(0,l.Z)(gs,Bo.value,Ao),(0,l.Z)(gs,Bo.label,Ws),gs}),Ma=F.useMemo(function(){if(di!=="tags")return Vn;var Ao=(0,C.Z)(Vn),Va=function(Ws){return dn.has(Ws)};return(0,C.Z)(Kn).sort(function(gs,Ws){return gs.value<Ws.value?-1:1}).forEach(function(gs){var Ws=gs.value;Va(Ws)||Ao.push(oa(Ws,gs.label))}),Ao},[oa,Vn,dn,Kn,di]),k=ir(Ma,Bo,at,Hr,os),de=F.useMemo(function(){return di!=="tags"||!at||k.some(function(Ao){return Ao[os||"value"]===at})?k:[oa(at)].concat((0,C.Z)(k))},[oa,os,di,k,at]),yt=F.useMemo(function(){return qo?(0,C.Z)(de).sort(function(Ao,Va){return qo(Ao,Va)}):de},[de,qo]),Ue=F.useMemo(function(){return K(yt,{fieldNames:Bo,childrenAsData:Hn})},[yt,Bo,Hn]),nr=function(Va){var gs=ni(Va);if(Rr(gs),vr&&(gs.length!==Kn.length||gs.some(function(Ps,Xs){var gl;return((gl=Kn[Xs])===null||gl===void 0?void 0:gl.value)!==(Ps==null?void 0:Ps.value)}))){var Ws=Rs?gs:gs.map(function(Ps){return Ps.value}),bs=gs.map(function(Ps){return B(Ei(Ps.value))});vr(Zr?Ws:Ws[0],Zr?bs:bs[0])}},Mr=F.useState(null),qr=(0,R.Z)(Mr,2),kn=qr[0],Nn=qr[1],Mi=F.useState(0),Bi=(0,R.Z)(Mi,2),io=Bi[0],co=Bi[1],Sa=Tu!==void 0?Tu:di!=="combobox",Ko=F.useCallback(function(Ao,Va){var gs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ws=gs.source,bs=Ws===void 0?"keyboard":Ws;co(Va),Aa&&di==="combobox"&&Ao!==null&&bs==="keyboard"&&Nn(String(Ao))},[Aa,di]),wo=function(Va,gs,Ws){var bs=function(){var _l,Us=Ei(Va);return[Rs?{label:Us==null?void 0:Us[Bo.label],value:Va,key:(_l=Us==null?void 0:Us.key)!==null&&_l!==void 0?_l:Va}:Va,B(Us)]};if(gs&&eo){var Ps=bs(),Xs=(0,R.Z)(Ps,2),gl=Xs[0],jf=Xs[1];eo(gl,jf)}else if(!gs&&Ee&&Ws!=="clear"){var Mu=bs(),yl=(0,R.Z)(Mu,2),lc=yl[0],Lc=yl[1];Ee(lc,Lc)}},Oo=X(function(Ao,Va){var gs,Ws=Zr?Va.selected:!0;Ws?gs=Zr?[].concat((0,C.Z)(Kn),[Ao]):[Ao]:gs=Kn.filter(function(bs){return bs.value!==Ao}),nr(gs),wo(Ao,Ws),di==="combobox"?Nn(""):(!De||xa)&&(hr(""),Nn(""))}),Ho=function(Va,gs){nr(Va);var Ws=gs.type,bs=gs.values;(Ws==="remove"||Ws==="clear")&&bs.forEach(function(Ps){wo(Ps.value,!1,Ws)})},Io=function(Va,gs){if(hr(Va),Nn(null),gs.source==="submit"){var Ws=(Va||"").trim();if(Ws){var bs=Array.from(new Set([].concat((0,C.Z)(Yi),[Ws])));nr(bs),wo(Ws,!0),hr("")}return}gs.source!=="blur"&&(di==="combobox"&&nr(Va),Uo==null||Uo(Va))},qs=function(Va){var gs=Va;di!=="tags"&&(gs=Va.map(function(bs){var Ps=mn.get(bs);return Ps==null?void 0:Ps.value}).filter(function(bs){return bs!==void 0}));var Ws=Array.from(new Set([].concat((0,C.Z)(Yi),(0,C.Z)(gs))));nr(Ws),Ws.forEach(function(bs){wo(bs,!0)})},Il=F.useMemo(function(){var Ao=Zs!==!1&&Hs!==!1;return(0,$.Z)((0,$.Z)({},er),{},{flattenOptions:Ue,onActiveValue:Ko,defaultActiveFirstOption:Sa,onSelect:Oo,menuItemSelectedIcon:Cs,rawValues:Yi,fieldNames:Bo,virtual:Ao,listHeight:Vs,listItemHeight:ls,childrenAsData:Hn})},[er,Ue,Ko,Sa,Oo,Cs,Yi,Bo,Zs,Hs,Vs,ls,Hn]);return F.createElement(sr.Provider,{value:Il},F.createElement(Wt,(0,v.Z)({},zr,{id:lr,prefixCls:wa,ref:bn,omitDomProps:oi,mode:di,displayValues:Ji,onDisplayValuesChange:Ho,searchValue:at,onSearch:Io,autoClearSearchValue:xa,onSearchSplit:qs,dropdownMatchSelectWidth:Hs,OptionList:ci,emptyOptions:!Ue.length,activeValue:kn,activeDescendantId:"".concat(lr,"_list_").concat(io)})))}),Wi=Ca;Wi.Option=rt,Wi.OptGroup=Xe;var jo=Wi,uo=jo},43159:function(Qe,te,m){"use strict";m.d(te,{C:function(){return l}});var v={adjustX:1,adjustY:1},C=[0,0],l={left:{points:["cr","cl"],overflow:v,offset:[-4,0],targetOffset:C},right:{points:["cl","cr"],overflow:v,offset:[4,0],targetOffset:C},top:{points:["bc","tc"],overflow:v,offset:[0,-4],targetOffset:C},bottom:{points:["tc","bc"],overflow:v,offset:[0,4],targetOffset:C},topLeft:{points:["bl","tl"],overflow:v,offset:[0,-4],targetOffset:C},leftTop:{points:["tr","tl"],overflow:v,offset:[-4,0],targetOffset:C},topRight:{points:["br","tr"],overflow:v,offset:[0,-4],targetOffset:C},rightTop:{points:["tl","tr"],overflow:v,offset:[4,0],targetOffset:C},bottomRight:{points:["tr","br"],overflow:v,offset:[0,4],targetOffset:C},rightBottom:{points:["bl","br"],overflow:v,offset:[4,0],targetOffset:C},bottomLeft:{points:["tl","bl"],overflow:v,offset:[0,4],targetOffset:C},leftBottom:{points:["br","bl"],overflow:v,offset:[-4,0],targetOffset:C}},$=null},44958:function(Qe,te,m){"use strict";m.d(te,{hq:function(){return fe},jL:function(){return Ae}});var v=m(98924),C=m(94999),l="data-rc-order",$="rc-util-key",R=new Map;function z(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=ke.mark;return je?je.startsWith("data-")?je:"data-".concat(je):$}function L(ke){if(ke.attachTo)return ke.attachTo;var je=document.querySelector("head");return je||document.body}function T(ke){return ke==="queue"?"prependQueue":ke?"prepend":"append"}function O(ke){return Array.from((R.get(ke)||ke).children).filter(function(je){return je.tagName==="STYLE"})}function F(ke){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,v.Z)())return null;var bt=je.csp,ut=je.prepend,wt=document.createElement("style");wt.setAttribute(l,T(ut)),bt!=null&&bt.nonce&&(wt.nonce=bt==null?void 0:bt.nonce),wt.innerHTML=ke;var se=L(je),qe=se.firstChild;if(ut){if(ut==="queue"){var me=O(se).filter(function(_e){return["prepend","prependQueue"].includes(_e.getAttribute(l))});if(me.length)return se.insertBefore(wt,me[me.length-1].nextSibling),wt}se.insertBefore(wt,qe)}else se.appendChild(wt);return wt}function ue(ke){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=L(je);return O(bt).find(function(ut){return ut.getAttribute(z(je))===ke})}function Ae(ke){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=ue(ke,je);if(bt){var ut=L(je);ut.removeChild(bt)}}function re(ke,je){var bt=R.get(ke);if(!bt||!(0,C.Z)(document,bt)){var ut=F("",je),wt=ut.parentNode;R.set(ke,wt),ke.removeChild(ut)}}function pe(){R.clear()}function fe(ke,je){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=L(bt);re(ut,bt);var wt=ue(je,bt);if(wt){var se,qe;if((se=bt.csp)!==null&&se!==void 0&&se.nonce&&wt.nonce!==((qe=bt.csp)===null||qe===void 0?void 0:qe.nonce)){var me;wt.nonce=(me=bt.csp)===null||me===void 0?void 0:me.nonce}return wt.innerHTML!==ke&&(wt.innerHTML=ke),wt}var _e=F(ke,bt);return _e.setAttribute(z(bt),je),_e}},38135:function(Qe,te,m){"use strict";var v;m.d(te,{s:function(){return bt},v:function(){return me}});var C=m(74165),l=m(15861),$=m(71002),R=m(1413),z=m(73935),L=(0,R.Z)({},v||(v=m.t(z,2))),T=L.version,O=L.render,F=L.unmountComponentAtNode,ue;try{var Ae=Number((T||"").split(".")[0]);Ae>=18&&(ue=L.createRoot)}catch(Te){}function re(Te){var ht=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ht&&(0,$.Z)(ht)==="object"&&(ht.usingClientEntryPoint=Te)}var pe="__rc_react_root__";function fe(Te,ht){re(!0);var We=ht[pe]||ue(ht);re(!1),We.render(Te),ht[pe]=We}function ke(Te,ht){O(Te,ht)}function je(Te,ht){}function bt(Te,ht){if(ue){fe(Te,ht);return}ke(Te,ht)}function ut(Te){return wt.apply(this,arguments)}function wt(){return wt=(0,l.Z)((0,C.Z)().mark(function Te(ht){return(0,C.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.abrupt("return",Promise.resolve().then(function(){var he;(he=ht[pe])===null||he===void 0||he.unmount(),delete ht[pe]}));case 1:case"end":return Ne.stop()}},Te)})),wt.apply(this,arguments)}function se(Te){F(Te)}function qe(Te){}function me(Te){return _e.apply(this,arguments)}function _e(){return _e=(0,l.Z)((0,C.Z)().mark(function Te(ht){return(0,C.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(ue===void 0){Ne.next=2;break}return Ne.abrupt("return",ut(ht));case 2:se(ht);case 3:case"end":return Ne.stop()}},Te)})),_e.apply(this,arguments)}},64217:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return T}});var v=m(1413),C=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,l=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,$="".concat(C," ").concat(l).split(/[\s\n]+/),R="aria-",z="data-";function L(O,F){return O.indexOf(F)===0}function T(O){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ue;F===!1?ue={aria:!0,data:!0,attr:!0}:F===!0?ue={aria:!0}:ue=(0,v.Z)({},F);var Ae={};return Object.keys(O).forEach(function(re){(ue.aria&&(re==="role"||L(re,R))||ue.data&&L(re,z)||ue.attr&&$.includes(re))&&(Ae[re]=O[re])}),Ae}},88306:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return v}});function v(C,l){for(var $=C,R=0;R<l.length;R+=1){if($==null)return;$=$[l[R]]}return $}},73453:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return Lt}});var v=m(87462),C=m(4942),l=m(1413),$=m(97685),R=m(91),z=m(67294),L=m(94184),T=m.n(L),O=m(48555),F=z.forwardRef(function(St,Ut){var lt=St.height,Et=St.offset,Zt=St.children,Be=St.prefixCls,He=St.onInnerResize,ft=St.innerProps,Z={},J={display:"flex",flexDirection:"column"};return Et!==void 0&&(Z={height:lt,position:"relative",overflow:"hidden"},J=(0,l.Z)((0,l.Z)({},J),{},{transform:"translateY(".concat(Et,"px)"),position:"absolute",left:0,right:0,top:0})),z.createElement("div",{style:Z},z.createElement(O.Z,{onResize:function(B){var j=B.offsetHeight;j&&He&&He()}},z.createElement("div",(0,v.Z)({style:J,className:T()((0,C.Z)({},"".concat(Be,"-holder-inner"),Be)),ref:Ut},ft),Zt)))});F.displayName="Filler";var ue=F,Ae=m(15671),re=m(43144),pe=m(60136),fe=m(29388),ke=m(75164),je=20;function bt(St){return"touches"in St?St.touches[0].pageY:St.pageY}var ut=function(St){(0,pe.Z)(lt,St);var Ut=(0,fe.Z)(lt);function lt(){var Et;(0,Ae.Z)(this,lt);for(var Zt=arguments.length,Be=new Array(Zt),He=0;He<Zt;He++)Be[He]=arguments[He];return Et=Ut.call.apply(Ut,[this].concat(Be)),Et.moveRaf=null,Et.scrollbarRef=z.createRef(),Et.thumbRef=z.createRef(),Et.visibleTimeout=null,Et.state={dragging:!1,pageY:null,startTop:null,visible:!1},Et.delayHidden=function(){clearTimeout(Et.visibleTimeout),Et.setState({visible:!0}),Et.visibleTimeout=setTimeout(function(){Et.setState({visible:!1})},2e3)},Et.onScrollbarTouchStart=function(ft){ft.preventDefault()},Et.onContainerMouseDown=function(ft){ft.stopPropagation(),ft.preventDefault()},Et.patchEvents=function(){window.addEventListener("mousemove",Et.onMouseMove),window.addEventListener("mouseup",Et.onMouseUp),Et.thumbRef.current.addEventListener("touchmove",Et.onMouseMove),Et.thumbRef.current.addEventListener("touchend",Et.onMouseUp)},Et.removeEvents=function(){var ft;window.removeEventListener("mousemove",Et.onMouseMove),window.removeEventListener("mouseup",Et.onMouseUp),(ft=Et.scrollbarRef.current)===null||ft===void 0||ft.removeEventListener("touchstart",Et.onScrollbarTouchStart),Et.thumbRef.current&&(Et.thumbRef.current.removeEventListener("touchstart",Et.onMouseDown),Et.thumbRef.current.removeEventListener("touchmove",Et.onMouseMove),Et.thumbRef.current.removeEventListener("touchend",Et.onMouseUp)),ke.Z.cancel(Et.moveRaf)},Et.onMouseDown=function(ft){var Z=Et.props.onStartMove;Et.setState({dragging:!0,pageY:bt(ft),startTop:Et.getTop()}),Z(),Et.patchEvents(),ft.stopPropagation(),ft.preventDefault()},Et.onMouseMove=function(ft){var Z=Et.state,J=Z.dragging,K=Z.pageY,B=Z.startTop,j=Et.props.onScroll;if(ke.Z.cancel(Et.moveRaf),J){var ee=bt(ft)-K,W=B+ee,De=Et.getEnableScrollRange(),ot=Et.getEnableHeightRange(),Wt=ot?W/ot:0,Ct=Math.ceil(Wt*De);Et.moveRaf=(0,ke.Z)(function(){j(Ct)})}},Et.onMouseUp=function(){var ft=Et.props.onStopMove;Et.setState({dragging:!1}),ft(),Et.removeEvents()},Et.getSpinHeight=function(){var ft=Et.props,Z=ft.height,J=ft.count,K=Z/J*10;return K=Math.max(K,je),K=Math.min(K,Z/2),Math.floor(K)},Et.getEnableScrollRange=function(){var ft=Et.props,Z=ft.scrollHeight,J=ft.height;return Z-J||0},Et.getEnableHeightRange=function(){var ft=Et.props.height,Z=Et.getSpinHeight();return ft-Z||0},Et.getTop=function(){var ft=Et.props.scrollTop,Z=Et.getEnableScrollRange(),J=Et.getEnableHeightRange();if(ft===0||Z===0)return 0;var K=ft/Z;return K*J},Et.showScroll=function(){var ft=Et.props,Z=ft.height,J=ft.scrollHeight;return J>Z},Et}return(0,re.Z)(lt,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(Zt){Zt.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var Zt=this.state,Be=Zt.dragging,He=Zt.visible,ft=this.props.prefixCls,Z=this.getSpinHeight(),J=this.getTop(),K=this.showScroll(),B=K&&He;return z.createElement("div",{ref:this.scrollbarRef,className:T()("".concat(ft,"-scrollbar"),(0,C.Z)({},"".concat(ft,"-scrollbar-show"),K)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:B?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},z.createElement("div",{ref:this.thumbRef,className:T()("".concat(ft,"-scrollbar-thumb"),(0,C.Z)({},"".concat(ft,"-scrollbar-thumb-moving"),Be)),style:{width:"100%",height:Z,top:J,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),lt}(z.Component);function wt(St){var Ut=St.children,lt=St.setRef,Et=z.useCallback(function(Zt){lt(Zt)},[]);return z.cloneElement(Ut,{ref:Et})}function se(St,Ut,lt,Et,Zt,Be){var He=Be.getKey;return St.slice(Ut,lt+1).map(function(ft,Z){var J=Ut+Z,K=Zt(ft,J,{}),B=He(ft);return z.createElement(wt,{key:B,setRef:function(ee){return Et(ft,ee)}},K)})}var qe=m(34203),me=function(){function St(){(0,Ae.Z)(this,St),this.maps=void 0,this.maps=Object.create(null)}return(0,re.Z)(St,[{key:"set",value:function(lt,Et){this.maps[lt]=Et}},{key:"get",value:function(lt){return this.maps[lt]}}]),St}(),_e=me;function Te(St,Ut,lt){var Et=z.useState(0),Zt=(0,$.Z)(Et,2),Be=Zt[0],He=Zt[1],ft=(0,z.useRef)(new Map),Z=(0,z.useRef)(new _e),J=(0,z.useRef)();function K(){ke.Z.cancel(J.current)}function B(){K(),J.current=(0,ke.Z)(function(){ft.current.forEach(function(ee,W){if(ee&&ee.offsetParent){var De=(0,qe.Z)(ee),ot=De.offsetHeight;Z.current.get(W)!==ot&&Z.current.set(W,De.offsetHeight)}}),He(function(ee){return ee+1})})}function j(ee,W){var De=St(ee),ot=ft.current.get(De);W?(ft.current.set(De,W),B()):ft.current.delete(De),!ot!=!W&&(W?Ut==null||Ut(ee):lt==null||lt(ee))}return(0,z.useEffect)(function(){return K},[]),[j,B,Z.current,Be]}var ht=m(71002);function We(St,Ut,lt,Et,Zt,Be,He,ft){var Z=z.useRef();return function(J){if(J==null){ft();return}if(ke.Z.cancel(Z.current),typeof J=="number")He(J);else if(J&&(0,ht.Z)(J)==="object"){var K,B=J.align;"index"in J?K=J.index:K=Ut.findIndex(function(De){return Zt(De)===J.key});var j=J.offset,ee=j===void 0?0:j,W=function De(ot,Wt){if(!(ot<0||!St.current)){var Ct=St.current.clientHeight,Qt=!1,ir=Wt;if(Ct){for(var Er=Wt||B,Qr=0,Mt=0,br=0,Nt=Math.min(Ut.length,K),Pr=0;Pr<=Nt;Pr+=1){var _r=Zt(Ut[Pr]);Mt=Qr;var kr=lt.get(_r);br=Mt+(kr===void 0?Et:kr),Qr=br,Pr===K&&kr===void 0&&(Qt=!0)}var zt=null;switch(Er){case"top":zt=Mt-ee;break;case"bottom":zt=br-Ct+ee;break;default:{var mr=St.current.scrollTop,Or=mr+Ct;Mt<mr?ir="top":br>Or&&(ir="bottom")}}zt!==null&&zt!==St.current.scrollTop&&He(zt)}Z.current=(0,ke.Z)(function(){Qt&&Be(),De(ot-1,ir)},2)}};W(3)}}}function Ne(St,Ut,lt,Et){var Zt=lt-St,Be=Ut-lt,He=Math.min(Zt,Be)*2;if(Et<=He){var ft=Math.floor(Et/2);return Et%2?lt+ft+1:lt-ft}return Zt>Be?lt-(Et-Be):lt+(Et-Zt)}function he(St,Ut,lt){var Et=St.length,Zt=Ut.length,Be,He;if(Et===0&&Zt===0)return null;Et<Zt?(Be=St,He=Ut):(Be=Ut,He=St);var ft={__EMPTY_ITEM__:!0};function Z(W){return W!==void 0?lt(W):ft}for(var J=null,K=Math.abs(Et-Zt)!==1,B=0;B<He.length;B+=1){var j=Z(Be[B]),ee=Z(He[B]);if(j!==ee){J=B,K=K||j!==Z(He[B+1]);break}}return J===null?null:{index:J,multiple:K}}function Ve(St,Ut,lt){var Et=z.useState(St),Zt=(0,$.Z)(Et,2),Be=Zt[0],He=Zt[1],ft=z.useState(null),Z=(0,$.Z)(ft,2),J=Z[0],K=Z[1];return z.useEffect(function(){var B=he(Be||[],St||[],Ut);(B==null?void 0:B.index)!==void 0&&(lt==null||lt(B.index),K(St[B.index])),He(St)},[St]),[J]}var ie=(typeof navigator=="undefined"?"undefined":(0,ht.Z)(navigator))==="object"&&/Firefox/i.test(navigator.userAgent),ze=ie,Le=function(St,Ut){var lt=(0,z.useRef)(!1),Et=(0,z.useRef)(null);function Zt(){clearTimeout(Et.current),lt.current=!0,Et.current=setTimeout(function(){lt.current=!1},50)}var Be=(0,z.useRef)({top:St,bottom:Ut});return Be.current.top=St,Be.current.bottom=Ut,function(He){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Z=He<0&&Be.current.top||He>0&&Be.current.bottom;return ft&&Z?(clearTimeout(Et.current),lt.current=!1):(!Z||lt.current)&&Zt(),!lt.current&&Z}};function Re(St,Ut,lt,Et){var Zt=(0,z.useRef)(0),Be=(0,z.useRef)(null),He=(0,z.useRef)(null),ft=(0,z.useRef)(!1),Z=Le(Ut,lt);function J(B){if(St){ke.Z.cancel(Be.current);var j=B.deltaY;Zt.current+=j,He.current=j,!Z(j)&&(ze||B.preventDefault(),Be.current=(0,ke.Z)(function(){var ee=ft.current?10:1;Et(Zt.current*ee),Zt.current=0}))}}function K(B){St&&(ft.current=B.detail===He.current)}return[J,K]}var st=m(8410),vt=14/15;function Dt(St,Ut,lt){var Et=(0,z.useRef)(!1),Zt=(0,z.useRef)(0),Be=(0,z.useRef)(null),He=(0,z.useRef)(null),ft,Z=function(j){if(Et.current){var ee=Math.ceil(j.touches[0].pageY),W=Zt.current-ee;Zt.current=ee,lt(W)&&j.preventDefault(),clearInterval(He.current),He.current=setInterval(function(){W*=vt,(!lt(W,!0)||Math.abs(W)<=.1)&&clearInterval(He.current)},16)}},J=function(){Et.current=!1,ft()},K=function(j){ft(),j.touches.length===1&&!Et.current&&(Et.current=!0,Zt.current=Math.ceil(j.touches[0].pageY),Be.current=j.target,Be.current.addEventListener("touchmove",Z),Be.current.addEventListener("touchend",J))};ft=function(){Be.current&&(Be.current.removeEventListener("touchmove",Z),Be.current.removeEventListener("touchend",J))},(0,st.Z)(function(){return St&&Ut.current.addEventListener("touchstart",K),function(){var B;(B=Ut.current)===null||B===void 0||B.removeEventListener("touchstart",K),ft(),clearInterval(He.current)}},[St])}var ar=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],$t=[],ur={overflowY:"auto",overflowAnchor:"none"};function we(St,Ut){var lt=St.prefixCls,Et=lt===void 0?"rc-virtual-list":lt,Zt=St.className,Be=St.height,He=St.itemHeight,ft=St.fullHeight,Z=ft===void 0?!0:ft,J=St.style,K=St.data,B=St.children,j=St.itemKey,ee=St.virtual,W=St.component,De=W===void 0?"div":W,ot=St.onScroll,Wt=St.onVisibleChange,Ct=St.innerProps,Qt=(0,R.Z)(St,ar),ir=!!(ee!==!1&&Be&&He),Er=ir&&K&&He*K.length>Be,Qr=(0,z.useState)(0),Mt=(0,$.Z)(Qr,2),br=Mt[0],Nt=Mt[1],Pr=(0,z.useState)(!1),_r=(0,$.Z)(Pr,2),kr=_r[0],zt=_r[1],mr=T()(Et,Zt),Or=K||$t,X=(0,z.useRef)(),Nr=(0,z.useRef)(),Xe=(0,z.useRef)(),xe=z.useCallback(function(ha){return typeof j=="function"?j(ha):ha==null?void 0:ha[j]},[j]),rt={getKey:xe};function kt(ha){Nt(function(xa){var eo;typeof ha=="function"?eo=ha(xa):eo=ha;var Ee=jo(eo);return X.current.scrollTop=Ee,Ee})}var cr=(0,z.useRef)({start:0,end:Or.length}),Ar=(0,z.useRef)(),Lr=Ve(Or,xe),sr=(0,$.Z)(Lr,1),Ge=sr[0];Ar.current=Ge;var Gr=Te(xe,null,null),on=(0,$.Z)(Gr,4),cn=on[0],Dn=on[1],ci=on[2],ia=on[3],Vi=z.useMemo(function(){if(!ir)return{scrollHeight:void 0,start:0,end:Or.length-1,offset:void 0};if(!Er){var ha;return{scrollHeight:((ha=Nr.current)===null||ha===void 0?void 0:ha.offsetHeight)||0,start:0,end:Or.length-1,offset:void 0}}for(var xa=0,eo,Ee,Po,Hs=Or.length,no=0;no<Hs;no+=1){var qo=Or[no],os=xe(qo),Go=ci.get(os),Wo=xa+(Go===void 0?He:Go);Wo>=br&&eo===void 0&&(eo=no,Ee=xa),Wo>br+Be&&Po===void 0&&(Po=no),xa=Wo}return eo===void 0&&(eo=0,Ee=0,Po=Math.ceil(Be/He)),Po===void 0&&(Po=Or.length-1),Po=Math.min(Po+1,Or.length),{scrollHeight:xa,start:eo,end:Po,offset:Ee}},[Er,ir,br,Or,ia,Be]),On=Vi.scrollHeight,ji=Vi.start,oi=Vi.end,Hi=Vi.offset;cr.current.start=ji,cr.current.end=oi;var Ca=On-Be,Wi=(0,z.useRef)(Ca);Wi.current=Ca;function jo(ha){var xa=ha;return Number.isNaN(Wi.current)||(xa=Math.min(xa,Wi.current)),xa=Math.max(xa,0),xa}var uo=br<=0,Pn=br>=Ca,bn=Le(uo,Pn);function Oi(ha){var xa=ha;kt(xa)}function di(ha){var xa=ha.currentTarget.scrollTop;xa!==br&&kt(xa),ot==null||ot(ha)}var va=Re(ir,uo,Pn,function(ha){kt(function(xa){var eo=xa+ha;return eo})}),wa=(0,$.Z)(va,2),Aa=wa[0],Ta=wa[1];Dt(ir,X,function(ha,xa){return bn(ha,xa)?!1:(Aa({preventDefault:function(){},deltaY:ha}),!0)}),(0,st.Z)(function(){function ha(xa){ir&&xa.preventDefault()}return X.current.addEventListener("wheel",Aa),X.current.addEventListener("DOMMouseScroll",Ta),X.current.addEventListener("MozMousePixelScroll",ha),function(){X.current&&(X.current.removeEventListener("wheel",Aa),X.current.removeEventListener("DOMMouseScroll",Ta),X.current.removeEventListener("MozMousePixelScroll",ha))}},[ir]);var ma=We(X,Or,ci,He,xe,Dn,kt,function(){var ha;(ha=Xe.current)===null||ha===void 0||ha.delayHidden()});z.useImperativeHandle(Ut,function(){return{scrollTo:ma}}),(0,st.Z)(function(){if(Wt){var ha=Or.slice(ji,oi+1);Wt(ha,Or)}},[ji,oi,Or]);var Da=se(Or,ji,oi,cn,B,rt),Uo=null;return Be&&(Uo=(0,l.Z)((0,C.Z)({},Z?"height":"maxHeight",Be),ur),ir&&(Uo.overflowY="hidden",kr&&(Uo.pointerEvents="none"))),z.createElement("div",(0,v.Z)({style:(0,l.Z)((0,l.Z)({},J),{},{position:"relative"}),className:mr},Qt),z.createElement(De,{className:"".concat(Et,"-holder"),style:Uo,ref:X,onScroll:di},z.createElement(ue,{prefixCls:Et,height:On,offset:Hi,onInnerResize:Dn,ref:Nr,innerProps:Ct},Da)),ir&&z.createElement(ut,{ref:Xe,prefixCls:Et,scrollTop:br,height:Be,scrollHeight:On,count:Or.length,onScroll:Oi,onStartMove:function(){zt(!0)},onStopMove:function(){zt(!1)}}))}var At=z.forwardRef(we);At.displayName="List";var nt=At,Lt=nt},28660:function(Qe,te,m){var v=m(34155);var C;(function(l){(function($){var R=typeof m.g=="object"?m.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),z=L(l);typeof R.Reflect=="undefined"?R.Reflect=l:z=L(R.Reflect,z),$(z);function L(T,O){return function(F,ue){typeof T[F]!="function"&&Object.defineProperty(T,F,{configurable:!0,writable:!0,value:ue}),O&&O(F,ue)}}})(function($){var R=Object.prototype.hasOwnProperty,z=typeof Symbol=="function",L=z&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",T=z&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",O=typeof Object.create=="function",F={__proto__:[]}instanceof Array,ue=!O&&!F,Ae={create:O?function(){return Wt(Object.create(null))}:F?function(){return Wt({__proto__:null})}:function(){return Wt({})},has:ue?function(Ct,Qt){return R.call(Ct,Qt)}:function(Ct,Qt){return Qt in Ct},get:ue?function(Ct,Qt){return R.call(Ct,Qt)?Ct[Qt]:void 0}:function(Ct,Qt){return Ct[Qt]}},re=Object.getPrototypeOf(Function),pe=typeof v=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",fe=!pe&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:W(),ke=!pe&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:De(),je=!pe&&typeof WeakMap=="function"?WeakMap:ot(),bt=new je;function ut(Ct,Qt,ir,Er){if(ur(ir)){if(!Zt(Ct))throw new TypeError;if(!He(Qt))throw new TypeError;return he(Ct,Qt)}else{if(!Zt(Ct))throw new TypeError;if(!nt(Qt))throw new TypeError;if(!nt(Er)&&!ur(Er)&&!we(Er))throw new TypeError;return we(Er)&&(Er=void 0),ir=Et(ir),Ve(Ct,Qt,ir,Er)}}$("decorate",ut);function wt(Ct,Qt){function ir(Er,Qr){if(!nt(Er))throw new TypeError;if(!ur(Qr)&&!ft(Qr))throw new TypeError;vt(Ct,Qt,Er,Qr)}return ir}$("metadata",wt);function se(Ct,Qt,ir,Er){if(!nt(ir))throw new TypeError;return ur(Er)||(Er=Et(Er)),vt(Ct,Qt,ir,Er)}$("defineMetadata",se);function qe(Ct,Qt,ir){if(!nt(Qt))throw new TypeError;return ur(ir)||(ir=Et(ir)),ze(Ct,Qt,ir)}$("hasMetadata",qe);function me(Ct,Qt,ir){if(!nt(Qt))throw new TypeError;return ur(ir)||(ir=Et(ir)),Le(Ct,Qt,ir)}$("hasOwnMetadata",me);function _e(Ct,Qt,ir){if(!nt(Qt))throw new TypeError;return ur(ir)||(ir=Et(ir)),Re(Ct,Qt,ir)}$("getMetadata",_e);function Te(Ct,Qt,ir){if(!nt(Qt))throw new TypeError;return ur(ir)||(ir=Et(ir)),st(Ct,Qt,ir)}$("getOwnMetadata",Te);function ht(Ct,Qt){if(!nt(Ct))throw new TypeError;return ur(Qt)||(Qt=Et(Qt)),Dt(Ct,Qt)}$("getMetadataKeys",ht);function We(Ct,Qt){if(!nt(Ct))throw new TypeError;return ur(Qt)||(Qt=Et(Qt)),ar(Ct,Qt)}$("getOwnMetadataKeys",We);function Ne(Ct,Qt,ir){if(!nt(Qt))throw new TypeError;ur(ir)||(ir=Et(ir));var Er=ie(Qt,ir,!1);if(ur(Er)||!Er.delete(Ct))return!1;if(Er.size>0)return!0;var Qr=bt.get(Qt);return Qr.delete(ir),Qr.size>0||bt.delete(Qt),!0}$("deleteMetadata",Ne);function he(Ct,Qt){for(var ir=Ct.length-1;ir>=0;--ir){var Er=Ct[ir],Qr=Er(Qt);if(!ur(Qr)&&!we(Qr)){if(!He(Qr))throw new TypeError;Qt=Qr}}return Qt}function Ve(Ct,Qt,ir,Er){for(var Qr=Ct.length-1;Qr>=0;--Qr){var Mt=Ct[Qr],br=Mt(Qt,ir,Er);if(!ur(br)&&!we(br)){if(!nt(br))throw new TypeError;Er=br}}return Er}function ie(Ct,Qt,ir){var Er=bt.get(Ct);if(ur(Er)){if(!ir)return;Er=new fe,bt.set(Ct,Er)}var Qr=Er.get(Qt);if(ur(Qr)){if(!ir)return;Qr=new fe,Er.set(Qt,Qr)}return Qr}function ze(Ct,Qt,ir){var Er=Le(Ct,Qt,ir);if(Er)return!0;var Qr=ee(Qt);return we(Qr)?!1:ze(Ct,Qr,ir)}function Le(Ct,Qt,ir){var Er=ie(Qt,ir,!1);return ur(Er)?!1:Ut(Er.has(Ct))}function Re(Ct,Qt,ir){var Er=Le(Ct,Qt,ir);if(Er)return st(Ct,Qt,ir);var Qr=ee(Qt);if(!we(Qr))return Re(Ct,Qr,ir)}function st(Ct,Qt,ir){var Er=ie(Qt,ir,!1);if(!ur(Er))return Er.get(Ct)}function vt(Ct,Qt,ir,Er){var Qr=ie(ir,Er,!0);Qr.set(Ct,Qt)}function Dt(Ct,Qt){var ir=ar(Ct,Qt),Er=ee(Ct);if(Er===null)return ir;var Qr=Dt(Er,Qt);if(Qr.length<=0)return ir;if(ir.length<=0)return Qr;for(var Mt=new ke,br=[],Nt=0,Pr=ir;Nt<Pr.length;Nt++){var _r=Pr[Nt],kr=Mt.has(_r);kr||(Mt.add(_r),br.push(_r))}for(var zt=0,mr=Qr;zt<mr.length;zt++){var _r=mr[zt],kr=Mt.has(_r);kr||(Mt.add(_r),br.push(_r))}return br}function ar(Ct,Qt){var ir=[],Er=ie(Ct,Qt,!1);if(ur(Er))return ir;for(var Qr=Er.keys(),Mt=J(Qr),br=0;;){var Nt=B(Mt);if(!Nt)return ir.length=br,ir;var Pr=K(Nt);try{ir[br]=Pr}catch(_r){try{j(Mt)}finally{throw _r}}br++}}function $t(Ct){if(Ct===null)return 1;switch(typeof Ct){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Ct===null?1:6;default:return 6}}function ur(Ct){return Ct===void 0}function we(Ct){return Ct===null}function At(Ct){return typeof Ct=="symbol"}function nt(Ct){return typeof Ct=="object"?Ct!==null:typeof Ct=="function"}function Lt(Ct,Qt){switch($t(Ct)){case 0:return Ct;case 1:return Ct;case 2:return Ct;case 3:return Ct;case 4:return Ct;case 5:return Ct}var ir=Qt===3?"string":Qt===5?"number":"default",Er=Z(Ct,L);if(Er!==void 0){var Qr=Er.call(Ct,ir);if(nt(Qr))throw new TypeError;return Qr}return St(Ct,ir==="default"?"number":ir)}function St(Ct,Qt){if(Qt==="string"){var ir=Ct.toString;if(Be(ir)){var Er=ir.call(Ct);if(!nt(Er))return Er}var Qr=Ct.valueOf;if(Be(Qr)){var Er=Qr.call(Ct);if(!nt(Er))return Er}}else{var Qr=Ct.valueOf;if(Be(Qr)){var Er=Qr.call(Ct);if(!nt(Er))return Er}var Mt=Ct.toString;if(Be(Mt)){var Er=Mt.call(Ct);if(!nt(Er))return Er}}throw new TypeError}function Ut(Ct){return!!Ct}function lt(Ct){return""+Ct}function Et(Ct){var Qt=Lt(Ct,3);return At(Qt)?Qt:lt(Qt)}function Zt(Ct){return Array.isArray?Array.isArray(Ct):Ct instanceof Object?Ct instanceof Array:Object.prototype.toString.call(Ct)==="[object Array]"}function Be(Ct){return typeof Ct=="function"}function He(Ct){return typeof Ct=="function"}function ft(Ct){switch($t(Ct)){case 3:return!0;case 4:return!0;default:return!1}}function Z(Ct,Qt){var ir=Ct[Qt];if(ir!=null){if(!Be(ir))throw new TypeError;return ir}}function J(Ct){var Qt=Z(Ct,T);if(!Be(Qt))throw new TypeError;var ir=Qt.call(Ct);if(!nt(ir))throw new TypeError;return ir}function K(Ct){return Ct.value}function B(Ct){var Qt=Ct.next();return Qt.done?!1:Qt}function j(Ct){var Qt=Ct.return;Qt&&Qt.call(Ct)}function ee(Ct){var Qt=Object.getPrototypeOf(Ct);if(typeof Ct!="function"||Ct===re||Qt!==re)return Qt;var ir=Ct.prototype,Er=ir&&Object.getPrototypeOf(ir);if(Er==null||Er===Object.prototype)return Qt;var Qr=Er.constructor;return typeof Qr!="function"||Qr===Ct?Qt:Qr}function W(){var Ct={},Qt=[],ir=function(){function br(Nt,Pr,_r){this._index=0,this._keys=Nt,this._values=Pr,this._selector=_r}return br.prototype["@@iterator"]=function(){return this},br.prototype[T]=function(){return this},br.prototype.next=function(){var Nt=this._index;if(Nt>=0&&Nt<this._keys.length){var Pr=this._selector(this._keys[Nt],this._values[Nt]);return Nt+1>=this._keys.length?(this._index=-1,this._keys=Qt,this._values=Qt):this._index++,{value:Pr,done:!1}}return{value:void 0,done:!0}},br.prototype.throw=function(Nt){throw this._index>=0&&(this._index=-1,this._keys=Qt,this._values=Qt),Nt},br.prototype.return=function(Nt){return this._index>=0&&(this._index=-1,this._keys=Qt,this._values=Qt),{value:Nt,done:!0}},br}();return function(){function br(){this._keys=[],this._values=[],this._cacheKey=Ct,this._cacheIndex=-2}return Object.defineProperty(br.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),br.prototype.has=function(Nt){return this._find(Nt,!1)>=0},br.prototype.get=function(Nt){var Pr=this._find(Nt,!1);return Pr>=0?this._values[Pr]:void 0},br.prototype.set=function(Nt,Pr){var _r=this._find(Nt,!0);return this._values[_r]=Pr,this},br.prototype.delete=function(Nt){var Pr=this._find(Nt,!1);if(Pr>=0){for(var _r=this._keys.length,kr=Pr+1;kr<_r;kr++)this._keys[kr-1]=this._keys[kr],this._values[kr-1]=this._values[kr];return this._keys.length--,this._values.length--,Nt===this._cacheKey&&(this._cacheKey=Ct,this._cacheIndex=-2),!0}return!1},br.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Ct,this._cacheIndex=-2},br.prototype.keys=function(){return new ir(this._keys,this._values,Er)},br.prototype.values=function(){return new ir(this._keys,this._values,Qr)},br.prototype.entries=function(){return new ir(this._keys,this._values,Mt)},br.prototype["@@iterator"]=function(){return this.entries()},br.prototype[T]=function(){return this.entries()},br.prototype._find=function(Nt,Pr){return this._cacheKey!==Nt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Nt)),this._cacheIndex<0&&Pr&&(this._cacheIndex=this._keys.length,this._keys.push(Nt),this._values.push(void 0)),this._cacheIndex},br}();function Er(br,Nt){return br}function Qr(br,Nt){return Nt}function Mt(br,Nt){return[br,Nt]}}function De(){return function(){function Ct(){this._map=new fe}return Object.defineProperty(Ct.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Ct.prototype.has=function(Qt){return this._map.has(Qt)},Ct.prototype.add=function(Qt){return this._map.set(Qt,Qt),this},Ct.prototype.delete=function(Qt){return this._map.delete(Qt)},Ct.prototype.clear=function(){this._map.clear()},Ct.prototype.keys=function(){return this._map.keys()},Ct.prototype.values=function(){return this._map.values()},Ct.prototype.entries=function(){return this._map.entries()},Ct.prototype["@@iterator"]=function(){return this.keys()},Ct.prototype[T]=function(){return this.keys()},Ct}()}function ot(){var Ct=16,Qt=Ae.create(),ir=Er();return function(){function Pr(){this._key=Er()}return Pr.prototype.has=function(_r){var kr=Qr(_r,!1);return kr!==void 0?Ae.has(kr,this._key):!1},Pr.prototype.get=function(_r){var kr=Qr(_r,!1);return kr!==void 0?Ae.get(kr,this._key):void 0},Pr.prototype.set=function(_r,kr){var zt=Qr(_r,!0);return zt[this._key]=kr,this},Pr.prototype.delete=function(_r){var kr=Qr(_r,!1);return kr!==void 0?delete kr[this._key]:!1},Pr.prototype.clear=function(){this._key=Er()},Pr}();function Er(){var Pr;do Pr="@@WeakMap@@"+Nt();while(Ae.has(Qt,Pr));return Qt[Pr]=!0,Pr}function Qr(Pr,_r){if(!R.call(Pr,ir)){if(!_r)return;Object.defineProperty(Pr,ir,{value:Ae.create()})}return Pr[ir]}function Mt(Pr,_r){for(var kr=0;kr<_r;++kr)Pr[kr]=Math.random()*255|0;return Pr}function br(Pr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Pr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Pr)):Mt(new Uint8Array(Pr),Pr):Mt(new Array(Pr),Pr)}function Nt(){var Pr=br(Ct);Pr[6]=Pr[6]&79|64,Pr[8]=Pr[8]&191|128;for(var _r="",kr=0;kr<Ct;++kr){var zt=Pr[kr];(kr===4||kr===6||kr===8)&&(_r+="-"),zt<16&&(_r+="0"),_r+=zt.toString(16).toLowerCase()}return _r}}function Wt(Ct){return Ct.__=void 0,delete Ct.__,Ct}})})(C||(C={}))},84893:function(Qe,te,m){Qe.exports.download=m(54709),Qe.exports.write=m(4803),Qe.exports.zip=m(68447)},54709:function(Qe,te,m){var v=m(68447);Qe.exports=function(C,l){var $=v(C,l);location.href="data:application/zip;base64,"+$}},8452:function(Qe){Qe.exports.enlarge=function(m,v){return v[0]<m.xmin&&(m.xmin=v[0]),v[0]>m.xmax&&(m.xmax=v[0]),v[1]<m.ymin&&(m.ymin=v[1]),v[1]>m.ymax&&(m.ymax=v[1]),m},Qe.exports.enlargeExtent=function(m,v){return v.xmax>m.xmax&&(m.xmax=v.xmax),v.xmin<m.xmin&&(m.xmin=v.xmin),v.ymax>m.ymax&&(m.ymax=v.ymax),v.ymin<m.ymin&&(m.ymin=v.ymin),m},Qe.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}},26360:function(Qe,te,m){var v=m(68694).jstypes;Qe.exports.geojson=C,Qe.exports.obj=$;function C(R){var z={};R.forEach(L);function L(T){l(z,T.properties)}return $(z)}function l(R,z){for(var L in z)R[L]=z[L];return R}function $(R){var z={},L=[];for(var T in R)z[T]=typeof R[T];for(var O in z)L.push({name:O,type:v[z[O]]});return L}},22669:function(Qe){Qe.exports.point=te("Point","POINT"),Qe.exports.line=te("LineString","POLYLINE"),Qe.exports.polygon=te("Polygon","POLYGON");function te(l,$){return function(R){var z=R.features.filter(C(l));return{geometries:$==="POLYGON"||$==="POLYLINE"?[z.map(m)]:z.map(m),properties:z.map(v),type:$}}}function m(l){return l.geometry.coordinates[0]!==void 0&&l.geometry.coordinates[0][0]!==void 0&&l.geometry.coordinates[0][0][0]!==void 0?l.geometry.coordinates[0]:l.geometry.coordinates}function v(l){return l.properties}function C(l){return function($){return $.geometry.type===l}}},20101:function(Qe,te,m){var v=m(8452);Qe.exports.write=function(l,$,R,z){var L=28,T=100,O=0,F=0;l.forEach(function(Ae,re){R.setInt32(O,re),R.setInt32(O+4,10),R.setInt32(O+8,1,!0),R.setFloat64(O+12,Ae[0],!0),R.setFloat64(O+20,Ae[1],!0),z.setInt32(F,T/2),z.setInt32(F+4,10),F+=8,O+=L,T+=L})},Qe.exports.extent=function(C){return C.reduce(function(l,$){return v.enlarge(l,$)},v.blank())},Qe.exports.parts=function(l,$){return l.length},Qe.exports.shxLength=function(C){return C.length*8},Qe.exports.shpLength=function(C){return C.length*28}},49479:function(Qe,te,m){var v=m(8452),C=m(68694);Qe.exports.write=function(L,T,O,F,ue){var Ae=0,re=0,pe=100;L.forEach(fe);function fe(ke,je){var bt=R(ke),ut=l([ke],ue),wt=bt.length*16+48+(ut-1)*4,se=bt.reduce(function(_e,Te){return v.enlarge(_e,Te)},v.blank());F.setInt32(re,pe/2),F.setInt32(re+4,wt/2),re+=8,pe+=wt+8,O.setInt32(Ae,je+1),O.setInt32(Ae+4,wt/2),O.setInt32(Ae+8,ue,!0),O.setFloat64(Ae+12,se.xmin,!0),O.setFloat64(Ae+20,se.ymin,!0),O.setFloat64(Ae+28,se.xmax,!0),O.setFloat64(Ae+36,se.ymax,!0),O.setInt32(Ae+44,ut,!0),O.setInt32(Ae+48,bt.length,!0),O.setInt32(Ae+52,0,!0);for(var qe=ke.reduce(function(_e,Te){return Array.isArray(Te[0][0])?_e=_e.concat(Te):_e.push(Te),_e},[]),me=1;me<ut;me++)O.setInt32(Ae+52+me*4,qe.reduce(function(_e,Te,ht){return ht<me?_e+Te.length:_e},0),!0);bt.forEach(function(Te,ht){O.setFloat64(Ae+56+ht*16+(ut-1)*4,Te[0],!0),O.setFloat64(Ae+56+ht*16+(ut-1)*4+8,Te[1],!0)}),Ae+=wt+8}},Qe.exports.shpLength=function(z){return z.length*56+R(z).length*16},Qe.exports.shxLength=function(z){return z.length*8},Qe.exports.extent=function(z){return R(z).reduce(function(L,T){return v.enlarge(L,T)},v.blank())};function l(z,L){var T=1;return(L===C.geometries.POLYGON||L===C.geometries.POLYLINE)&&(T=z.reduce(function(O,F){return O+=F.length,Array.isArray(F[0][0][0])&&(O+=F.reduce(function(ue,Ae){return ue+Ae.length-1},0)),O},0)),T}Qe.exports.parts=l;function $(z){var L=0;return z.forEach(function(T){L+=T.length}),L}function R(z,L){return L===void 0&&(L=[]),typeof z[0][0]=="object"?z.reduce(function(T,O){return T.concat(R(O))},L):z}},68953:function(Qe){Qe.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'},68694:function(Qe){Qe.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},4803:function(Qe,te,m){var v=m(68694),C=m(24019),l=m(68953),$=m(8452),R=m(26360),z=m(48583),L=m(20101),T=m(49479),O={1:L,5:T,3:T},F=8;Qe.exports=ue;function ue(pe,fe,ke,je){var bt=v.geometries[fe],ut=O[bt],wt=ut.parts(ke,bt),se=100+(wt-ke.length)*4+ut.shpLength(ke),qe=100+ut.shxLength(ke),me=new ArrayBuffer(se),_e=new DataView(me),Te=new ArrayBuffer(qe),ht=new DataView(Te),We=ut.extent(ke);Ae(_e,bt),Ae(ht,bt),re(We,_e),re(We,ht),ut.write(ke,We,new DataView(me,100),new DataView(Te,100),bt),_e.setInt32(24,se/2),ht.setInt32(24,50+ke.length*4);var Ne=C.structure(pe);je(null,{shp:_e,shx:ht,dbf:Ne,prj:l})}function Ae(pe,fe){pe.setInt32(0,9994),pe.setInt32(28,1e3,!0),pe.setInt32(32,fe,!0)}function re(pe,fe){fe.setFloat64(36,pe.xmin,!0),fe.setFloat64(44,pe.ymin,!0),fe.setFloat64(52,pe.xmax,!0),fe.setFloat64(60,pe.ymax,!0)}},68447:function(Qe,te,m){var v=m(34155),C=m(4803),l=m(22669),$=m(68953),R=m(66085);Qe.exports=function(z,L){var T=new R,O=T.folder(L&&L.folder?L.folder:"layers");[l.point(z),l.line(z),l.polygon(z)].forEach(function(ue){ue.geometries.length&&ue.geometries[0].length&&C(ue.properties,ue.type,ue.geometries,function(Ae,re){var pe=L&&L.types[ue.type.toLowerCase()]?L.types[ue.type.toLowerCase()]:ue.type;O.file(pe+".shp",re.shp.buffer,{binary:!0}),O.file(pe+".shx",re.shx.buffer,{binary:!0}),O.file(pe+".dbf",re.dbf.buffer,{binary:!0}),O.file(pe+".prj",$)})});var F={compression:"STORE"};return v.browser||(F.type="nodebuffer"),T.generate(F)}},86851:function(Qe,te,m){"use strict";var v=m(89594),C=Array.prototype.concat,l=Array.prototype.slice,$=Qe.exports=function(z){for(var L=[],T=0,O=z.length;T<O;T++){var F=z[T];v(F)?L=C.call(L,l.call(F)):L.push(F)}return L};$.wrap=function(R){return function(){return R($(arguments))}}},89594:function(Qe){Qe.exports=function(m){return!m||typeof m=="string"?!1:m instanceof Array||Array.isArray(m)||m.length>=0&&(m.splice instanceof Function||Object.getOwnPropertyDescriptor(m,m.length-1)&&m.constructor.name!=="String")}},10442:function(Qe){Qe.exports.attr=te,Qe.exports.tagClose=m,Qe.exports.tag=v,Qe.exports.encode=C;function te(l){return l&&l.length?" "+l.map(function($){return $[0]+'="'+$[1]+'"'}).join(" "):""}function m(l,$){return"<"+l+te($)+"/>"}function v(l,$,R){return"<"+l+te(R)+">"+$+"</"+l+">"}function C(l){return(l===null?"":l.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},69848:function(Qe){(function(te,m){Qe.exports=m()})(this,function(){"use strict";function te(me,_e,Te,ht,We,Ne){if(!(We-ht<=Te)){var he=ht+We>>1;m(me,_e,he,ht,We,Ne%2),te(me,_e,Te,ht,he-1,Ne+1),te(me,_e,Te,he+1,We,Ne+1)}}function m(me,_e,Te,ht,We,Ne){for(;We>ht;){if(We-ht>600){var he=We-ht+1,Ve=Te-ht+1,ie=Math.log(he),ze=.5*Math.exp(2*ie/3),Le=.5*Math.sqrt(ie*ze*(he-ze)/he)*(Ve-he/2<0?-1:1),Re=Math.max(ht,Math.floor(Te-Ve*ze/he+Le)),st=Math.min(We,Math.floor(Te+(he-Ve)*ze/he+Le));m(me,_e,Te,Re,st,Ne)}var vt=_e[2*Te+Ne],Dt=ht,ar=We;for(v(me,_e,ht,Te),_e[2*We+Ne]>vt&&v(me,_e,ht,We);Dt<ar;){for(v(me,_e,Dt,ar),Dt++,ar--;_e[2*Dt+Ne]<vt;)Dt++;for(;_e[2*ar+Ne]>vt;)ar--}_e[2*ht+Ne]===vt?v(me,_e,ht,ar):(ar++,v(me,_e,ar,We)),ar<=Te&&(ht=ar+1),Te<=ar&&(We=ar-1)}}function v(me,_e,Te,ht){C(me,Te,ht),C(_e,2*Te,2*ht),C(_e,2*Te+1,2*ht+1)}function C(me,_e,Te){var ht=me[_e];me[_e]=me[Te],me[Te]=ht}function l(me,_e,Te,ht,We,Ne,he){for(var Ve=[0,me.length-1,0],ie=[],ze,Le;Ve.length;){var Re=Ve.pop(),st=Ve.pop(),vt=Ve.pop();if(st-vt<=he){for(var Dt=vt;Dt<=st;Dt++)ze=_e[2*Dt],Le=_e[2*Dt+1],ze>=Te&&ze<=We&&Le>=ht&&Le<=Ne&&ie.push(me[Dt]);continue}var ar=Math.floor((vt+st)/2);ze=_e[2*ar],Le=_e[2*ar+1],ze>=Te&&ze<=We&&Le>=ht&&Le<=Ne&&ie.push(me[ar]);var $t=(Re+1)%2;(Re===0?Te<=ze:ht<=Le)&&(Ve.push(vt),Ve.push(ar-1),Ve.push($t)),(Re===0?We>=ze:Ne>=Le)&&(Ve.push(ar+1),Ve.push(st),Ve.push($t))}return ie}function $(me,_e,Te,ht,We,Ne){for(var he=[0,me.length-1,0],Ve=[],ie=We*We;he.length;){var ze=he.pop(),Le=he.pop(),Re=he.pop();if(Le-Re<=Ne){for(var st=Re;st<=Le;st++)R(_e[2*st],_e[2*st+1],Te,ht)<=ie&&Ve.push(me[st]);continue}var vt=Math.floor((Re+Le)/2),Dt=_e[2*vt],ar=_e[2*vt+1];R(Dt,ar,Te,ht)<=ie&&Ve.push(me[vt]);var $t=(ze+1)%2;(ze===0?Te-We<=Dt:ht-We<=ar)&&(he.push(Re),he.push(vt-1),he.push($t)),(ze===0?Te+We>=Dt:ht+We>=ar)&&(he.push(vt+1),he.push(Le),he.push($t))}return Ve}function R(me,_e,Te,ht){var We=me-Te,Ne=_e-ht;return We*We+Ne*Ne}var z=function(me){return me[0]},L=function(me){return me[1]},T=function(_e,Te,ht,We,Ne){Te===void 0&&(Te=z),ht===void 0&&(ht=L),We===void 0&&(We=64),Ne===void 0&&(Ne=Float64Array),this.nodeSize=We,this.points=_e;for(var he=_e.length<65536?Uint16Array:Uint32Array,Ve=this.ids=new he(_e.length),ie=this.coords=new Ne(_e.length*2),ze=0;ze<_e.length;ze++)Ve[ze]=ze,ie[2*ze]=Te(_e[ze]),ie[2*ze+1]=ht(_e[ze]);te(Ve,ie,We,0,Ve.length-1,0)};T.prototype.range=function(_e,Te,ht,We){return l(this.ids,this.coords,_e,Te,ht,We,this.nodeSize)},T.prototype.within=function(_e,Te,ht){return $(this.ids,this.coords,_e,Te,ht,this.nodeSize)};var O={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(me){return me}},F=Math.fround||function(me){return function(_e){return me[0]=+_e,me[0]}}(new Float32Array(1)),ue=function(_e){this.options=wt(Object.create(O),_e),this.trees=new Array(this.options.maxZoom+1)};ue.prototype.load=function(_e){var Te=this.options,ht=Te.log,We=Te.minZoom,Ne=Te.maxZoom,he=Te.nodeSize;ht&&console.time("total time");var Ve="prepare "+_e.length+" points";ht&&console.time(Ve),this.points=_e;for(var ie=[],ze=0;ze<_e.length;ze++)_e[ze].geometry&&ie.push(re(_e[ze],ze));this.trees[Ne+1]=new T(ie,se,qe,he,Float32Array),ht&&console.timeEnd(Ve);for(var Le=Ne;Le>=We;Le--){var Re=+Date.now();ie=this._cluster(ie,Le),this.trees[Le]=new T(ie,se,qe,he,Float32Array),ht&&console.log("z%d: %d clusters in %dms",Le,ie.length,+Date.now()-Re)}return ht&&console.timeEnd("total time"),this},ue.prototype.getClusters=function(_e,Te){var ht=((_e[0]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,_e[1])),Ne=_e[2]===180?180:((_e[2]+180)%360+360)%360-180,he=Math.max(-90,Math.min(90,_e[3]));if(_e[2]-_e[0]>=360)ht=-180,Ne=180;else if(ht>Ne){var Ve=this.getClusters([ht,We,180,he],Te),ie=this.getClusters([-180,We,Ne,he],Te);return Ve.concat(ie)}for(var ze=this.trees[this._limitZoom(Te)],Le=ze.range(ke(ht),je(he),ke(Ne),je(We)),Re=[],st=0,vt=Le;st<vt.length;st+=1){var Dt=vt[st],ar=ze.points[Dt];Re.push(ar.numPoints?pe(ar):this.points[ar.index])}return Re},ue.prototype.getChildren=function(_e){var Te=this._getOriginId(_e),ht=this._getOriginZoom(_e),We="No cluster with the specified id.",Ne=this.trees[ht];if(!Ne)throw new Error(We);var he=Ne.points[Te];if(!he)throw new Error(We);for(var Ve=this.options.radius/(this.options.extent*Math.pow(2,ht-1)),ie=Ne.within(he.x,he.y,Ve),ze=[],Le=0,Re=ie;Le<Re.length;Le+=1){var st=Re[Le],vt=Ne.points[st];vt.parentId===_e&&ze.push(vt.numPoints?pe(vt):this.points[vt.index])}if(ze.length===0)throw new Error(We);return ze},ue.prototype.getLeaves=function(_e,Te,ht){Te=Te||10,ht=ht||0;var We=[];return this._appendLeaves(We,_e,Te,ht,0),We},ue.prototype.getTile=function(_e,Te,ht){var We=this.trees[this._limitZoom(_e)],Ne=Math.pow(2,_e),he=this.options,Ve=he.extent,ie=he.radius,ze=ie/Ve,Le=(ht-ze)/Ne,Re=(ht+1+ze)/Ne,st={features:[]};return this._addTileFeatures(We.range((Te-ze)/Ne,Le,(Te+1+ze)/Ne,Re),We.points,Te,ht,Ne,st),Te===0&&this._addTileFeatures(We.range(1-ze/Ne,Le,1,Re),We.points,Ne,ht,Ne,st),Te===Ne-1&&this._addTileFeatures(We.range(0,Le,ze/Ne,Re),We.points,-1,ht,Ne,st),st.features.length?st:null},ue.prototype.getClusterExpansionZoom=function(_e){for(var Te=this._getOriginZoom(_e)-1;Te<=this.options.maxZoom;){var ht=this.getChildren(_e);if(Te++,ht.length!==1)break;_e=ht[0].properties.cluster_id}return Te},ue.prototype._appendLeaves=function(_e,Te,ht,We,Ne){for(var he=this.getChildren(Te),Ve=0,ie=he;Ve<ie.length;Ve+=1){var ze=ie[Ve],Le=ze.properties;if(Le&&Le.cluster?Ne+Le.point_count<=We?Ne+=Le.point_count:Ne=this._appendLeaves(_e,Le.cluster_id,ht,We,Ne):Ne<We?Ne++:_e.push(ze),_e.length===ht)break}return Ne},ue.prototype._addTileFeatures=function(_e,Te,ht,We,Ne,he){for(var Ve=0,ie=_e;Ve<ie.length;Ve+=1){var ze=ie[Ve],Le=Te[ze],Re=Le.numPoints,st=void 0,vt=void 0,Dt=void 0;if(Re)st=fe(Le),vt=Le.x,Dt=Le.y;else{var ar=this.points[Le.index];st=ar.properties,vt=ke(ar.geometry.coordinates[0]),Dt=je(ar.geometry.coordinates[1])}var $t={type:1,geometry:[[Math.round(this.options.extent*(vt*Ne-ht)),Math.round(this.options.extent*(Dt*Ne-We))]],tags:st},ur=void 0;Re?ur=Le.id:this.options.generateId?ur=Le.index:this.points[Le.index].id&&(ur=this.points[Le.index].id),ur!==void 0&&($t.id=ur),he.features.push($t)}},ue.prototype._limitZoom=function(_e){return Math.max(this.options.minZoom,Math.min(Math.floor(+_e),this.options.maxZoom+1))},ue.prototype._cluster=function(_e,Te){for(var ht=[],We=this.options,Ne=We.radius,he=We.extent,Ve=We.reduce,ie=We.minPoints,ze=Ne/(he*Math.pow(2,Te)),Le=0;Le<_e.length;Le++){var Re=_e[Le];if(!(Re.zoom<=Te)){Re.zoom=Te;for(var st=this.trees[Te+1],vt=st.within(Re.x,Re.y,ze),Dt=Re.numPoints||1,ar=Dt,$t=0,ur=vt;$t<ur.length;$t+=1){var we=ur[$t],At=st.points[we];At.zoom>Te&&(ar+=At.numPoints||1)}if(ar>Dt&&ar>=ie){for(var nt=Re.x*Dt,Lt=Re.y*Dt,St=Ve&&Dt>1?this._map(Re,!0):null,Ut=(Le<<5)+(Te+1)+this.points.length,lt=0,Et=vt;lt<Et.length;lt+=1){var Zt=Et[lt],Be=st.points[Zt];if(!(Be.zoom<=Te)){Be.zoom=Te;var He=Be.numPoints||1;nt+=Be.x*He,Lt+=Be.y*He,Be.parentId=Ut,Ve&&(St||(St=this._map(Re,!0)),Ve(St,this._map(Be)))}}Re.parentId=Ut,ht.push(Ae(nt/ar,Lt/ar,Ut,ar,St))}else if(ht.push(Re),ar>1)for(var ft=0,Z=vt;ft<Z.length;ft+=1){var J=Z[ft],K=st.points[J];K.zoom<=Te||(K.zoom=Te,ht.push(K))}}}return ht},ue.prototype._getOriginId=function(_e){return _e-this.points.length>>5},ue.prototype._getOriginZoom=function(_e){return(_e-this.points.length)%32},ue.prototype._map=function(_e,Te){if(_e.numPoints)return Te?wt({},_e.properties):_e.properties;var ht=this.points[_e.index].properties,We=this.options.map(ht);return Te&&We===ht?wt({},We):We};function Ae(me,_e,Te,ht,We){return{x:F(me),y:F(_e),zoom:1/0,id:Te,parentId:-1,numPoints:ht,properties:We}}function re(me,_e){var Te=me.geometry.coordinates,ht=Te[0],We=Te[1];return{x:F(ke(ht)),y:F(je(We)),zoom:1/0,index:_e,parentId:-1}}function pe(me){return{type:"Feature",id:me.id,properties:fe(me),geometry:{type:"Point",coordinates:[bt(me.x),ut(me.y)]}}}function fe(me){var _e=me.numPoints,Te=_e>=1e4?Math.round(_e/1e3)+"k":_e>=1e3?Math.round(_e/100)/10+"k":_e;return wt(wt({},me.properties),{cluster:!0,cluster_id:me.id,point_count:_e,point_count_abbreviated:Te})}function ke(me){return me/360+.5}function je(me){var _e=Math.sin(me*Math.PI/180),Te=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Te<0?0:Te>1?1:Te}function bt(me){return(me-.5)*360}function ut(me){var _e=(180-me*360)*Math.PI/180;return 360*Math.atan(Math.exp(_e))/Math.PI-90}function wt(me,_e){for(var Te in _e)me[Te]=_e[Te];return me}function se(me){return me.x}function qe(me){return me.y}return ue})},12816:function(Qe,te,m){var v=m(10442),C=v.tag,l=v.encode;Qe.exports=function(Te,ht){return ht=ht||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+C("kml",C("Document",z(ht)+L(ht)+R(Te,ht)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function $(_e,Te){return function(ht){if(!ht.properties||!ue.valid(ht.geometry))return"";var We=ue.any(ht.geometry);if(!We)return"";var Ne="",he="";if(_e.simplestyle){var Ve=se(ht.properties);Ve&&(ue.isPoint(ht.geometry)&&fe(ht.properties)?(Te.indexOf(Ve)===-1&&(Ne=ke(ht.properties,Ve),Te.push(Ve)),he=C("styleUrl","#"+Ve)):(ue.isPolygon(ht.geometry)||ue.isLine(ht.geometry))&&ut(ht.properties)&&(Te.indexOf(Ve)===-1&&(Ne=wt(ht.properties,Ve),Te.push(Ve)),he=C("styleUrl","#"+Ve)))}return Ne+C("Placemark",T(ht.properties,_e)+O(ht.properties,_e)+re(ht.properties)+F(ht.properties,_e)+We+he)}}function R(_e,Te){if(!_e.type)return"";var ht=[];switch(_e.type){case"FeatureCollection":return _e.features?_e.features.map($(Te,ht)).join(""):"";case"Feature":return $(Te,ht)(_e);default:return $(Te,ht)({type:"Feature",geometry:_e,properties:{}})}}function z(_e){return _e.documentName!==void 0?C("name",_e.documentName):""}function L(_e){return _e.documentDescription!==void 0?C("description",_e.documentDescription):""}function T(_e,Te){return _e[Te.name]?C("name",l(_e[Te.name])):""}function O(_e,Te){return _e[Te.description]?C("description",l(_e[Te.description])):""}function F(_e,Te){return _e[Te.timestamp]?C("TimeStamp",C("when",l(_e[Te.timestamp]))):""}var ue={Point:function(_e){return C("Point",C("coordinates",_e.coordinates.join(",")))},LineString:function(_e){return C("LineString",C("coordinates",Ae(_e.coordinates)))},Polygon:function(_e){if(!_e.coordinates.length)return"";var Te=_e.coordinates[0],ht=_e.coordinates.slice(1),We=C("outerBoundaryIs",C("LinearRing",C("coordinates",Ae(Te)))),Ne=ht.map(function(he){return C("innerBoundaryIs",C("LinearRing",C("coordinates",Ae(he))))}).join("");return C("Polygon",We+Ne)},MultiPoint:function(_e){return _e.coordinates.length?C("MultiGeometry",_e.coordinates.map(function(Te){return ue.Point({coordinates:Te})}).join("")):""},MultiPolygon:function(_e){return _e.coordinates.length?C("MultiGeometry",_e.coordinates.map(function(Te){return ue.Polygon({coordinates:Te})}).join("")):""},MultiLineString:function(_e){return _e.coordinates.length?C("MultiGeometry",_e.coordinates.map(function(Te){return ue.LineString({coordinates:Te})}).join("")):""},GeometryCollection:function(_e){return C("MultiGeometry",_e.geometries.map(ue.any).join(""))},valid:function(_e){return _e&&_e.type&&(_e.coordinates||_e.type==="GeometryCollection"&&_e.geometries&&_e.geometries.every(ue.valid))},any:function(_e){return ue[_e.type]?ue[_e.type](_e):""},isPoint:function(_e){return _e.type==="Point"||_e.type==="MultiPoint"},isPolygon:function(_e){return _e.type==="Polygon"||_e.type==="MultiPolygon"},isLine:function(_e){return _e.type==="LineString"||_e.type==="MultiLineString"}};function Ae(_e){return _e.map(function(Te){return Te.join(",")}).join(" ")}function re(_e){return C("ExtendedData",me(_e).map(pe).join(""))}function pe(_e){return C("Data",C("value",l(_e[1])),[["name",l(_e[0])]])}function fe(_e){return!!(_e["marker-size"]||_e["marker-symbol"]||_e["marker-color"])}function ke(_e,Te){return C("Style",C("IconStyle",C("Icon",C("href",je(_e))))+bt(_e),[["id",Te]])}function je(_e){var Te=_e["marker-size"]||"medium",ht=_e["marker-symbol"]?"-"+_e["marker-symbol"]:"",We=(_e["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+Te.charAt(0)+ht+"+"+We+".png"}function bt(_e){return C("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function ut(_e){for(var Te in _e)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[Te])return!0}function wt(_e,Te){var ht=C("LineStyle",[C("color",qe(_e.stroke,_e["stroke-opacity"])||"ff555555")+C("width",_e["stroke-width"]===void 0?2:_e["stroke-width"])]),We="";return(_e.fill||_e["fill-opacity"])&&(We=C("PolyStyle",[C("color",qe(_e.fill,_e["fill-opacity"])||"88555555")])),C("Style",ht+We,[["id",Te]])}function se(_e){var Te="";return _e["marker-symbol"]&&(Te=Te+"ms"+_e["marker-symbol"]),_e["marker-color"]&&(Te=Te+"mc"+_e["marker-color"].replace("#","")),_e["marker-size"]&&(Te=Te+"ms"+_e["marker-size"]),_e.stroke&&(Te=Te+"s"+_e.stroke.replace("#","")),_e["stroke-width"]&&(Te=Te+"sw"+_e["stroke-width"].toString().replace(".","")),_e["stroke-opacity"]&&(Te=Te+"mo"+_e["stroke-opacity"].toString().replace(".","")),_e.fill&&(Te=Te+"f"+_e.fill.replace("#","")),_e["fill-opacity"]&&(Te=Te+"fo"+_e["fill-opacity"].toString().replace(".","")),Te}function qe(_e,Te){if(typeof _e!="string")return"";if(_e=_e.replace("#","").toLowerCase(),_e.length===3)_e=_e[0]+_e[0]+_e[1]+_e[1]+_e[2]+_e[2];else if(_e.length!==6)return"";var ht=_e[0]+_e[1],We=_e[2]+_e[3],Ne=_e[4]+_e[5],he="ff";return typeof Te=="number"&&Te>=0&&Te<=1&&(he=(Te*255).toString(16),he.indexOf(".")>-1&&(he=he.substr(0,he.indexOf("."))),he.length<2&&(he="0"+he)),he+Ne+We+ht}function me(_e){var Te=[];for(var ht in _e)Te.push([ht,_e[ht]]);return Te}},12450:function(Qe,te,m){"use strict";m.d(te,{MM:function(){return qe}});function v(vt){var Dt=1/0,ar=1/0,$t=-1/0,ur=-1/0;function we(lt){lt!=null&&At.hasOwnProperty(lt.type)&&At[lt.type](lt)}var At={GeometryCollection:function(lt){lt.geometries.forEach(we)},Point:function(lt){nt(lt.coordinates)},MultiPoint:function(lt){lt.coordinates.forEach(nt)},LineString:function(lt){Lt(lt.arcs)},MultiLineString:function(lt){lt.arcs.forEach(Lt)},Polygon:function(lt){lt.arcs.forEach(Lt)},MultiPolygon:function(lt){lt.arcs.forEach(St)}};function nt(lt){var Et=lt[0],Zt=lt[1];Et<Dt&&(Dt=Et),Et>$t&&($t=Et),Zt<ar&&(ar=Zt),Zt>ur&&(ur=Zt)}function Lt(lt){lt.forEach(nt)}function St(lt){lt.forEach(Lt)}for(var Ut in vt)we(vt[Ut]);return $t>=Dt&&ur>=ar?[Dt,ar,$t,ur]:void 0}function C(vt,Dt,ar,$t,ur){arguments.length===3&&($t=Array,ur=null);for(var we=new $t(vt=1<<Math.max(4,Math.ceil(Math.log(vt)/Math.LN2))),At=vt-1,nt=0;nt<vt;++nt)we[nt]=ur;function Lt(lt){for(var Et=Dt(lt)&At,Zt=we[Et],Be=0;Zt!=ur;){if(ar(Zt,lt))return!0;if(++Be>=vt)throw new Error("full hashset");Zt=we[Et=Et+1&At]}return we[Et]=lt,!0}function St(lt){for(var Et=Dt(lt)&At,Zt=we[Et],Be=0;Zt!=ur;){if(ar(Zt,lt))return!0;if(++Be>=vt)break;Zt=we[Et=Et+1&At]}return!1}function Ut(){for(var lt=[],Et=0,Zt=we.length;Et<Zt;++Et){var Be=we[Et];Be!=ur&&lt.push(Be)}return lt}return{add:Lt,has:St,values:Ut}}function l(vt,Dt,ar,$t,ur,we){arguments.length===3&&($t=we=Array,ur=null);for(var At=new $t(vt=1<<Math.max(4,Math.ceil(Math.log(vt)/Math.LN2))),nt=new we(vt),Lt=vt-1,St=0;St<vt;++St)At[St]=ur;function Ut(Be,He){for(var ft=Dt(Be)&Lt,Z=At[ft],J=0;Z!=ur;){if(ar(Z,Be))return nt[ft]=He;if(++J>=vt)throw new Error("full hashmap");Z=At[ft=ft+1&Lt]}return At[ft]=Be,nt[ft]=He,He}function lt(Be,He){for(var ft=Dt(Be)&Lt,Z=At[ft],J=0;Z!=ur;){if(ar(Z,Be))return nt[ft];if(++J>=vt)throw new Error("full hashmap");Z=At[ft=ft+1&Lt]}return At[ft]=Be,nt[ft]=He,He}function Et(Be,He){for(var ft=Dt(Be)&Lt,Z=At[ft],J=0;Z!=ur;){if(ar(Z,Be))return nt[ft];if(++J>=vt)break;Z=At[ft=ft+1&Lt]}return He}function Zt(){for(var Be=[],He=0,ft=At.length;He<ft;++He){var Z=At[He];Z!=ur&&Be.push(Z)}return Be}return{set:Ut,maybeSet:lt,get:Et,keys:Zt}}function $(vt,Dt){return vt[0]===Dt[0]&&vt[1]===Dt[1]}var R=new ArrayBuffer(16),z=new Float64Array(R),L=new Uint32Array(R);function T(vt){z[0]=vt[0],z[1]=vt[1];var Dt=L[0]^L[1];return Dt=Dt<<5^Dt>>7^L[2]^L[3],Dt&2147483647}function O(vt){var Dt=vt.coordinates,ar=vt.lines,$t=vt.rings,ur=ee(),we=new Int32Array(Dt.length),At=new Int32Array(Dt.length),nt=new Int32Array(Dt.length),Lt=new Int8Array(Dt.length),St=0,Ut,lt,Et,Zt,Be;for(Ut=0,lt=Dt.length;Ut<lt;++Ut)we[Ut]=At[Ut]=nt[Ut]=-1;for(Ut=0,lt=ar.length;Ut<lt;++Ut){var He=ar[Ut],ft=He[0],Z=He[1];for(Zt=ur[ft],Be=ur[++ft],++St,Lt[Zt]=1;++ft<=Z;)j(Ut,Et=Zt,Zt=Be,Be=ur[ft]);++St,Lt[Be]=1}for(Ut=0,lt=Dt.length;Ut<lt;++Ut)we[Ut]=-1;for(Ut=0,lt=$t.length;Ut<lt;++Ut){var J=$t[Ut],K=J[0]+1,B=J[1];for(Et=ur[B-1],Zt=ur[K-1],Be=ur[K],j(Ut,Et,Zt,Be);++K<=B;)j(Ut,Et=Zt,Zt=Be,Be=ur[K])}function j(Ct,Qt,ir,Er){if(we[ir]!==Ct){we[ir]=Ct;var Qr=At[ir];if(Qr>=0){var Mt=nt[ir];(Qr!==Qt||Mt!==Er)&&(Qr!==Er||Mt!==Qt)&&(++St,Lt[ir]=1)}else At[ir]=Qt,nt[ir]=Er}}function ee(){for(var Ct=l(Dt.length*1.4,W,De,Int32Array,-1,Int32Array),Qt=new Int32Array(Dt.length),ir=0,Er=Dt.length;ir<Er;++ir)Qt[ir]=Ct.maybeSet(ir,ir);return Qt}function W(Ct){return T(Dt[Ct])}function De(Ct,Qt){return $(Dt[Ct],Dt[Qt])}we=At=nt=null;var ot=C(St*1.4,T,$),Wt;for(Ut=0,lt=Dt.length;Ut<lt;++Ut)Lt[Wt=ur[Ut]]&&ot.add(Dt[Wt]);return ot}function F(vt){var Dt=O(vt),ar=vt.coordinates,$t=vt.lines,ur=vt.rings,we,At,nt;for(At=0,nt=$t.length;At<nt;++At)for(var Lt=$t[At],St=Lt[0],Ut=Lt[1];++St<Ut;)Dt.has(ar[St])&&(we={0:St,1:Lt[1]},Lt[1]=St,Lt=Lt.next=we);for(At=0,nt=ur.length;At<nt;++At)for(var lt=ur[At],Et=lt[0],Zt=Et,Be=lt[1],He=Dt.has(ar[Et]);++Zt<Be;)Dt.has(ar[Zt])&&(He?(we={0:Zt,1:lt[1]},lt[1]=Zt,lt=lt.next=we):(ue(ar,Et,Be,Be-Zt),ar[Be]=ar[Et],He=!0,Zt=Et));return vt}function ue(vt,Dt,ar,$t){Ae(vt,Dt,ar),Ae(vt,Dt,Dt+$t),Ae(vt,Dt+$t,ar)}function Ae(vt,Dt,ar){for(var $t=Dt+(ar---Dt>>1),ur;Dt<$t;++Dt,--ar)ur=vt[Dt],vt[Dt]=vt[ar],vt[ar]=ur}function re(vt){var Dt=vt.coordinates,ar=vt.lines,$t,ur=vt.rings,we,At=ar.length+ur.length,nt,Lt;for(delete vt.lines,delete vt.rings,nt=0,Lt=ar.length;nt<Lt;++nt)for($t=ar[nt];$t=$t.next;)++At;for(nt=0,Lt=ur.length;nt<Lt;++nt)for(we=ur[nt];we=we.next;)++At;var St=l(At*2*1.4,T,$),Ut=vt.arcs=[];for(nt=0,Lt=ar.length;nt<Lt;++nt){$t=ar[nt];do lt($t);while($t=$t.next)}for(nt=0,Lt=ur.length;nt<Lt;++nt)if(we=ur[nt],we.next)do lt(we);while(we=we.next);else Et(we);function lt(J){var K,B,j,ee,W,De,ot,Wt;if(j=St.get(K=Dt[J[0]])){for(ot=0,Wt=j.length;ot<Wt;++ot)if(ee=j[ot],Zt(ee,J)){J[0]=ee[0],J[1]=ee[1];return}}if(W=St.get(B=Dt[J[1]])){for(ot=0,Wt=W.length;ot<Wt;++ot)if(De=W[ot],Be(De,J)){J[1]=De[0],J[0]=De[1];return}}j?j.push(J):St.set(K,[J]),W?W.push(J):St.set(B,[J]),Ut.push(J)}function Et(J){var K,B,j,ee,W;if(B=St.get(K=Dt[J[0]]))for(ee=0,W=B.length;ee<W;++ee){if(j=B[ee],He(j,J)){J[0]=j[0],J[1]=j[1];return}if(ft(j,J)){J[0]=j[1],J[1]=j[0];return}}if(B=St.get(K=Dt[J[0]+Z(J)]))for(ee=0,W=B.length;ee<W;++ee){if(j=B[ee],He(j,J)){J[0]=j[0],J[1]=j[1];return}if(ft(j,J)){J[0]=j[1],J[1]=j[0];return}}B?B.push(J):St.set(K,[J]),Ut.push(J)}function Zt(J,K){var B=J[0],j=K[0],ee=J[1],W=K[1];if(B-ee!==j-W)return!1;for(;B<=ee;++B,++j)if(!$(Dt[B],Dt[j]))return!1;return!0}function Be(J,K){var B=J[0],j=K[0],ee=J[1],W=K[1];if(B-ee!==j-W)return!1;for(;B<=ee;++B,--W)if(!$(Dt[B],Dt[W]))return!1;return!0}function He(J,K){var B=J[0],j=K[0],ee=J[1],W=K[1],De=ee-B;if(De!==W-j)return!1;for(var ot=Z(J),Wt=Z(K),Ct=0;Ct<De;++Ct)if(!$(Dt[B+(Ct+ot)%De],Dt[j+(Ct+Wt)%De]))return!1;return!0}function ft(J,K){var B=J[0],j=K[0],ee=J[1],W=K[1],De=ee-B;if(De!==W-j)return!1;for(var ot=Z(J),Wt=De-Z(K),Ct=0;Ct<De;++Ct)if(!$(Dt[B+(Ct+ot)%De],Dt[W-(Ct+Wt)%De]))return!1;return!0}function Z(J){for(var K=J[0],B=J[1],j=K,ee=j,W=Dt[j];++j<B;){var De=Dt[j];(De[0]<W[0]||De[0]===W[0]&&De[1]<W[1])&&(ee=j,W=De)}return ee-K}return vt}function pe(vt){for(var Dt=-1,ar=vt.length;++Dt<ar;){for(var $t=vt[Dt],ur=0,we=1,At=$t.length,nt=$t[0],Lt=nt[0],St=nt[1],Ut,lt;++ur<At;)nt=$t[ur],Ut=nt[0],lt=nt[1],(Ut!==Lt||lt!==St)&&($t[we++]=[Ut-Lt,lt-St],Lt=Ut,St=lt);we===1&&($t[we++]=[0,0]),$t.length=we}return vt}function fe(vt){var Dt=-1,ar=[],$t=[],ur=[];function we(lt){lt&&At.hasOwnProperty(lt.type)&&At[lt.type](lt)}var At={GeometryCollection:function(lt){lt.geometries.forEach(we)},LineString:function(lt){lt.arcs=nt(lt.arcs)},MultiLineString:function(lt){lt.arcs=lt.arcs.map(nt)},Polygon:function(lt){lt.arcs=lt.arcs.map(Lt)},MultiPolygon:function(lt){lt.arcs=lt.arcs.map(St)}};function nt(lt){for(var Et=0,Zt=lt.length;Et<Zt;++Et)ur[++Dt]=lt[Et];var Be={0:Dt-Zt+1,1:Dt};return ar.push(Be),Be}function Lt(lt){for(var Et=0,Zt=lt.length;Et<Zt;++Et)ur[++Dt]=lt[Et];var Be={0:Dt-Zt+1,1:Dt};return $t.push(Be),Be}function St(lt){return lt.map(Lt)}for(var Ut in vt)we(vt[Ut]);return{type:"Topology",coordinates:ur,lines:ar,rings:$t,objects:vt}}function ke(vt){var Dt={},ar;for(ar in vt)Dt[ar]=je(vt[ar]);return Dt}function je(vt){return vt==null?{type:null}:(vt.type==="FeatureCollection"?bt:vt.type==="Feature"?ut:wt)(vt)}function bt(vt){var Dt={type:"GeometryCollection",geometries:vt.features.map(ut)};return vt.bbox!=null&&(Dt.bbox=vt.bbox),Dt}function ut(vt){var Dt=wt(vt.geometry),ar;vt.id!=null&&(Dt.id=vt.id),vt.bbox!=null&&(Dt.bbox=vt.bbox);for(ar in vt.properties){Dt.properties=vt.properties;break}return Dt}function wt(vt){if(vt==null)return{type:null};var Dt=vt.type==="GeometryCollection"?{type:"GeometryCollection",geometries:vt.geometries.map(wt)}:vt.type==="Point"||vt.type==="MultiPoint"?{type:vt.type,coordinates:vt.coordinates}:{type:vt.type,arcs:vt.coordinates};return vt.bbox!=null&&(Dt.bbox=vt.bbox),Dt}function se(vt,Dt,ar){var $t=Dt[0],ur=Dt[1],we=Dt[2],At=Dt[3],nt=we-$t?(ar-1)/(we-$t):1,Lt=At-ur?(ar-1)/(At-ur):1;function St(Z){return[Math.round((Z[0]-$t)*nt),Math.round((Z[1]-ur)*Lt)]}function Ut(Z,J){for(var K=-1,B=0,j=Z.length,ee=new Array(j),W,De,ot,Wt,Ct;++K<j;)W=Z[K],Wt=Math.round((W[0]-$t)*nt),Ct=Math.round((W[1]-ur)*Lt),(Wt!==De||Ct!==ot)&&(ee[B++]=[De=Wt,ot=Ct]);for(ee.length=B;B<J;)B=ee.push([ee[0][0],ee[0][1]]);return ee}function lt(Z){return Ut(Z,2)}function Et(Z){return Ut(Z,4)}function Zt(Z){return Z.map(Et)}function Be(Z){Z!=null&&He.hasOwnProperty(Z.type)&&He[Z.type](Z)}var He={GeometryCollection:function(Z){Z.geometries.forEach(Be)},Point:function(Z){Z.coordinates=St(Z.coordinates)},MultiPoint:function(Z){Z.coordinates=Z.coordinates.map(St)},LineString:function(Z){Z.arcs=lt(Z.arcs)},MultiLineString:function(Z){Z.arcs=Z.arcs.map(lt)},Polygon:function(Z){Z.arcs=Zt(Z.arcs)},MultiPolygon:function(Z){Z.arcs=Z.arcs.map(Zt)}};for(var ft in vt)Be(vt[ft]);return{scale:[1/nt,1/Lt],translate:[$t,ur]}}function qe(vt,Dt){var ar=v(vt=ke(vt)),$t=Dt>0&&ar&&se(vt,ar,Dt),ur=re(F(fe(vt))),we=ur.coordinates,At=l(ur.arcs.length*1.4,me,_e);vt=ur.objects,ur.bbox=ar,ur.arcs=ur.arcs.map(function(Et,Zt){return At.set(Et,Zt),we.slice(Et[0],Et[1]+1)}),delete ur.coordinates,we=null;function nt(Et){Et&&Lt.hasOwnProperty(Et.type)&&Lt[Et.type](Et)}var Lt={GeometryCollection:function(Et){Et.geometries.forEach(nt)},LineString:function(Et){Et.arcs=St(Et.arcs)},MultiLineString:function(Et){Et.arcs=Et.arcs.map(St)},Polygon:function(Et){Et.arcs=Et.arcs.map(St)},MultiPolygon:function(Et){Et.arcs=Et.arcs.map(Ut)}};function St(Et){var Zt=[];do{var Be=At.get(Et);Zt.push(Et[0]<Et[1]?Be:~Be)}while(Et=Et.next);return Zt}function Ut(Et){return Et.map(St)}for(var lt in vt)nt(vt[lt]);return $t&&(ur.transform=$t,ur.arcs=pe(ur.arcs)),ur}function me(vt){var Dt=vt[0],ar=vt[1],$t;return ar<Dt&&($t=Dt,Dt=ar,ar=$t),Dt+31*ar}function _e(vt,Dt){var ar=vt[0],$t=vt[1],ur=Dt[0],we=Dt[1],At;return $t<ar&&(At=ar,ar=$t,$t=At),we<ur&&(At=ur,ur=we,we=At),ar===ur&&$t===we}var Te=Math.PI,ht=2*Te,We=Te/4,Ne=Te/180,he=Math.abs,Ve=Math.atan2,ie=Math.cos,ze=Math.sin;function Le(vt,Dt){for(var ar=0,$t=vt.length,ur=0,we=vt[Dt?ar++:$t-1],At,nt=we[0]*Ne,Lt=we[1]*Ne/2+We,St,Ut=ie(Lt),lt,Et=ze(Lt);ar<$t;++ar){we=vt[ar],At=nt,nt=we[0]*Ne,Lt=we[1]*Ne/2+We,St=Ut,Ut=ie(Lt),lt=Et,Et=ze(Lt);var Zt=nt-At,Be=Zt>=0?1:-1,He=Be*Zt,ft=lt*Et,Z=St*Ut+ft*ie(He),J=ft*Be*ze(He);ur+=Ve(J,Z)}return ur}function Re(vt,Dt){var ar=Le(vt,!0);return Dt&&(ar*=-1),(ar<0?ht+ar:ar)*2}function st(vt){return he(Le(vt,!1))*2}},55538:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return $t}});var v=m(15671),C=m(43144),l=m(82963),$=m(61120),R=m(60136),z=m(97326),L=m(97685),T=m(98333);function O(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function F(ur,we){var At=T.fF([],we,ur);return T.bA(At,At,1/At[3]),At}function ue(ur,we){var At=ur%we;return At<0?we+At:At}function Ae(ur,we,At){return At*we+(1-At)*ur}var re=m(85975),pe=m(31437),fe=m(77160);function ke(ur,we){if(!ur)throw new Error(we||"viewport-mercator-project: assertion failed.")}var je=Math.PI,bt=je/4,ut=je/180,wt=180/je,se=512,qe=4003e4,me=1.5;function _e(ur){return Math.pow(2,ur)}function Te(ur){return Math.log2(ur)}function ht(ur,we){var At=(0,L.Z)(ur,2),nt=At[0],Lt=At[1];ke(Number.isFinite(nt)&&Number.isFinite(we)),ke(Number.isFinite(Lt)&&Lt>=-90&&Lt<=90,"invalid latitude"),we*=se;var St=nt*ut,Ut=Lt*ut,lt=we*(St+je)/(2*je),Et=we*(je-Math.log(Math.tan(bt+Ut*.5)))/(2*je);return[lt,Et]}function We(ur,we){var At=(0,L.Z)(ur,2),nt=At[0],Lt=At[1];we*=se;var St=nt/we*(2*je)-je,Ut=2*(Math.atan(Math.exp(je-Lt/we*(2*je)))-bt);return[St*wt,Ut*wt]}function Ne(ur){var we=ur.latitude;assert(Number.isFinite(we));var At=Math.cos(we*ut);return Te(qe*At)-9}function he(ur){var we=ur.latitude,At=ur.longitude,nt=ur.zoom,Lt=ur.scale,St=ur.highPrecision,Ut=St===void 0?!1:St;Lt=Lt!==void 0?Lt:_e(nt),ke(Number.isFinite(we)&&Number.isFinite(At)&&Number.isFinite(Lt));var lt={},Et=se*Lt,Zt=Math.cos(we*ut),Be=Et/360,He=Be/Zt,ft=Et/qe/Zt;if(lt.pixelsPerMeter=[ft,-ft,ft],lt.metersPerPixel=[1/ft,-1/ft,1/ft],lt.pixelsPerDegree=[Be,-He,ft],lt.degreesPerPixel=[1/Be,-1/He,1/ft],Ut){var Z=ut*Math.tan(we*ut)/Zt,J=Be*Z/2,K=Et/qe*Z,B=K/He*ft;lt.pixelsPerDegree2=[0,-J,K],lt.pixelsPerMeter2=[B,0,B]}return lt}function Ve(ur,we){var At=_slicedToArray(ur,3),nt=At[0],Lt=At[1],St=At[2],Ut=_slicedToArray(we,3),lt=Ut[0],Et=Ut[1],Zt=Ut[2],Be=1,He=he({longitude:nt,latitude:Lt,scale:Be,highPrecision:!0}),ft=He.pixelsPerMeter,Z=He.pixelsPerMeter2,J=ht(ur,Be);J[0]+=lt*(ft[0]+Z[0]*Et),J[1]+=Et*(ft[1]+Z[1]*Et);var K=We(J,Be),B=(St||0)+(Zt||0);return Number.isFinite(St)||Number.isFinite(Zt)?[K[0],K[1],B]:K}function ie(ur){var we=ur.height,At=ur.pitch,nt=ur.bearing,Lt=ur.altitude,St=ur.center,Ut=St===void 0?null:St,lt=ur.flipY,Et=lt===void 0?!1:lt,Zt=O();return re.translate(Zt,Zt,[0,0,-Lt]),re.scale(Zt,Zt,[1,1,1/we]),re.rotateX(Zt,Zt,-At*ut),re.rotateZ(Zt,Zt,nt*ut),Et&&re.scale(Zt,Zt,[1,-1,1]),Ut&&re.translate(Zt,Zt,fe.negate([],Ut)),Zt}function ze(ur){var we=ur.width,At=ur.height,nt=ur.altitude,Lt=nt===void 0?me:nt,St=ur.pitch,Ut=St===void 0?0:St,lt=ur.nearZMultiplier,Et=lt===void 0?1:lt,Zt=ur.farZMultiplier,Be=Zt===void 0?1:Zt,He=Ut*ut,ft=Math.atan(.5/Lt),Z=Math.sin(ft)*Lt/Math.sin(Math.PI/2-He-ft),J=Math.cos(Math.PI/2-He)*Z+Lt;return{fov:2*Math.atan(At/2/Lt),aspect:we/At,focalDistance:Lt,near:Et,far:J*Be}}function Le(ur){var we=ur.width,At=ur.height,nt=ur.pitch,Lt=ur.altitude,St=ur.nearZMultiplier,Ut=ur.farZMultiplier,lt=ze({width:we,height:At,altitude:Lt,pitch:nt,nearZMultiplier:St,farZMultiplier:Ut}),Et=lt.fov,Zt=lt.aspect,Be=lt.near,He=lt.far,ft=re.perspective([],Et,Zt,Be,He);return ft}function Re(ur,we){var At=(0,L.Z)(ur,3),nt=At[0],Lt=At[1],St=At[2],Ut=St===void 0?0:St;return ke(Number.isFinite(nt)&&Number.isFinite(Lt)&&Number.isFinite(Ut)),F(we,[nt,Lt,Ut,1])}function st(ur,we){var At=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,nt=(0,L.Z)(ur,3),Lt=nt[0],St=nt[1],Ut=nt[2];if(ke(Number.isFinite(Lt)&&Number.isFinite(St),"invalid pixel coordinate"),Number.isFinite(Ut)){var lt=F(we,[Lt,St,Ut,1]);return lt}var Et=F(we,[Lt,St,0,1]),Zt=F(we,[Lt,St,1,1]),Be=Et[2],He=Zt[2],ft=Be===He?0:((At||0)-Be)/(He-Be);return pe.t7([],Et,Zt,ft)}var vt=O(),Dt=function(){function ur(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},At=we.width,nt=we.height,Lt=we.viewMatrix,St=Lt===void 0?vt:Lt,Ut=we.projectionMatrix,lt=Ut===void 0?vt:Ut;(0,v.Z)(this,ur),this.width=At||1,this.height=nt||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=St,this.projectionMatrix=lt;var Et=O();re.multiply(Et,Et,this.projectionMatrix),re.multiply(Et,Et,this.viewMatrix),this.viewProjectionMatrix=Et;var Zt=O();re.scale(Zt,Zt,[this.width/2,-this.height/2,1]),re.translate(Zt,Zt,[1,-1,0]),re.multiply(Zt,Zt,this.viewProjectionMatrix);var Be=re.invert(O(),Zt);if(!Be)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=Zt,this.pixelUnprojectionMatrix=Be,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,C.Z)(ur,[{key:"equals",value:function(At){return At instanceof ur?At.width===this.width&&At.height===this.height&&re.equals(At.projectionMatrix,this.projectionMatrix)&&re.equals(At.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(At){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=nt.topLeft,St=Lt===void 0?!0:Lt,Ut=this.projectPosition(At),lt=Re(Ut,this.pixelProjectionMatrix),Et=(0,L.Z)(lt,2),Zt=Et[0],Be=Et[1],He=St?Be:this.height-Be;return At.length===2?[Zt,He]:[Zt,He,lt[2]]}},{key:"unproject",value:function(At){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=nt.topLeft,St=Lt===void 0?!0:Lt,Ut=nt.targetZ,lt=(0,L.Z)(At,3),Et=lt[0],Zt=lt[1],Be=lt[2],He=St?Zt:this.height-Zt,ft=Ut&&Ut*this.pixelsPerMeter,Z=st([Et,He,Be],this.pixelUnprojectionMatrix,ft),J=this.unprojectPosition(Z),K=(0,L.Z)(J,3),B=K[0],j=K[1],ee=K[2];return Number.isFinite(Be)?[B,j,ee]:Number.isFinite(Ut)?[B,j,Ut]:[B,j]}},{key:"projectPosition",value:function(At){var nt=this.projectFlat(At),Lt=(0,L.Z)(nt,2),St=Lt[0],Ut=Lt[1],lt=(At[2]||0)*this.pixelsPerMeter;return[St,Ut,lt]}},{key:"unprojectPosition",value:function(At){var nt=this.unprojectFlat(At),Lt=(0,L.Z)(nt,2),St=Lt[0],Ut=Lt[1],lt=(At[2]||0)/this.pixelsPerMeter;return[St,Ut,lt]}},{key:"projectFlat",value:function(At){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return At}},{key:"unprojectFlat",value:function(At){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return At}}]),ur}();function ar(ur){var we=ur.width,At=ur.height,nt=ur.bounds,Lt=ur.minExtent,St=Lt===void 0?0:Lt,Ut=ur.maxZoom,lt=Ut===void 0?24:Ut,Et=ur.padding,Zt=Et===void 0?0:Et,Be=ur.offset,He=Be===void 0?[0,0]:Be,ft=(0,L.Z)(nt,2),Z=(0,L.Z)(ft[0],2),J=Z[0],K=Z[1],B=(0,L.Z)(ft[1],2),j=B[0],ee=B[1];if(Number.isFinite(Zt)){var W=Zt;Zt={top:W,bottom:W,left:W,right:W}}else ke(Number.isFinite(Zt.top)&&Number.isFinite(Zt.bottom)&&Number.isFinite(Zt.left)&&Number.isFinite(Zt.right));var De=new $t({width:we,height:At,longitude:0,latitude:0,zoom:0}),ot=De.project([J,ee]),Wt=De.project([j,K]),Ct=[Math.max(Math.abs(Wt[0]-ot[0]),St),Math.max(Math.abs(Wt[1]-ot[1]),St)],Qt=[we-Zt.left-Zt.right-Math.abs(He[0])*2,At-Zt.top-Zt.bottom-Math.abs(He[1])*2];ke(Qt[0]>0&&Qt[1]>0);var ir=Qt[0]/Ct[0],Er=Qt[1]/Ct[1],Qr=(Zt.right-Zt.left)/2/ir,Mt=(Zt.bottom-Zt.top)/2/Er,br=[(Wt[0]+ot[0])/2+Qr,(Wt[1]+ot[1])/2+Mt],Nt=De.unproject(br),Pr=De.zoom+Math.log2(Math.abs(Math.min(ir,Er)));return{longitude:Nt[0],latitude:Nt[1],zoom:Math.min(Pr,lt)}}var $t=function(ur){(0,R.Z)(we,ur);function we(){var At,nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Lt=nt.width,St=nt.height,Ut=nt.latitude,lt=Ut===void 0?0:Ut,Et=nt.longitude,Zt=Et===void 0?0:Et,Be=nt.zoom,He=Be===void 0?0:Be,ft=nt.pitch,Z=ft===void 0?0:ft,J=nt.bearing,K=J===void 0?0:J,B=nt.altitude,j=B===void 0?1.5:B,ee=nt.nearZMultiplier,W=nt.farZMultiplier;(0,v.Z)(this,we),Lt=Lt||1,St=St||1;var De=_e(He);j=Math.max(.75,j);var ot=ht([Zt,lt],De);ot[2]=0;var Wt=Le({width:Lt,height:St,pitch:Z,bearing:K,altitude:j,nearZMultiplier:ee||1/St,farZMultiplier:W||1.01}),Ct=ie({height:St,center:ot,pitch:Z,bearing:K,altitude:j,flipY:!0});return At=(0,l.Z)(this,(0,$.Z)(we).call(this,{width:Lt,height:St,viewMatrix:Ct,projectionMatrix:Wt})),At.latitude=lt,At.longitude=Zt,At.zoom=He,At.pitch=Z,At.bearing=K,At.altitude=j,At.scale=De,At.center=ot,At.pixelsPerMeter=he((0,z.Z)((0,z.Z)(At))).pixelsPerMeter[2],Object.freeze((0,z.Z)((0,z.Z)(At))),At}return(0,C.Z)(we,[{key:"projectFlat",value:function(nt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return ht(nt,Lt)}},{key:"unprojectFlat",value:function(nt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return We(nt,Lt)}},{key:"getMapCenterByLngLatPosition",value:function(nt){var Lt=nt.lngLat,St=nt.pos,Ut=st(St,this.pixelUnprojectionMatrix),lt=ht(Lt,this.scale),Et=pe.IH([],lt,pe.tk([],Ut)),Zt=pe.IH([],this.center,Et);return We(Zt,this.scale)}},{key:"getLocationAtPoint",value:function(nt){var Lt=nt.lngLat,St=nt.pos;return this.getMapCenterByLngLatPosition({lngLat:Lt,pos:St})}},{key:"fitBounds",value:function(nt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=this.width,Ut=this.height,lt=ar(Object.assign({width:St,height:Ut,bounds:nt},Lt)),Et=lt.longitude,Zt=lt.latitude,Be=lt.zoom;return new we({width:St,height:Ut,longitude:Et,latitude:Zt,zoom:Be})}}]),we}(Dt)},17061:function(Qe,te,m){var v=m(18698).default;function C(){"use strict";Qe.exports=C=function(){return l},Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports;var l={},$=Object.prototype,R=$.hasOwnProperty,z=Object.defineProperty||function(ie,ze,Le){ie[ze]=Le.value},L=typeof Symbol=="function"?Symbol:{},T=L.iterator||"@@iterator",O=L.asyncIterator||"@@asyncIterator",F=L.toStringTag||"@@toStringTag";function ue(ie,ze,Le){return Object.defineProperty(ie,ze,{value:Le,enumerable:!0,configurable:!0,writable:!0}),ie[ze]}try{ue({},"")}catch(ie){ue=function(Le,Re,st){return Le[Re]=st}}function Ae(ie,ze,Le,Re){var st=ze&&ze.prototype instanceof fe?ze:fe,vt=Object.create(st.prototype),Dt=new Ne(Re||[]);return z(vt,"_invoke",{value:_e(ie,Le,Dt)}),vt}function re(ie,ze,Le){try{return{type:"normal",arg:ie.call(ze,Le)}}catch(Re){return{type:"throw",arg:Re}}}l.wrap=Ae;var pe={};function fe(){}function ke(){}function je(){}var bt={};ue(bt,T,function(){return this});var ut=Object.getPrototypeOf,wt=ut&&ut(ut(he([])));wt&&wt!==$&&R.call(wt,T)&&(bt=wt);var se=je.prototype=fe.prototype=Object.create(bt);function qe(ie){["next","throw","return"].forEach(function(ze){ue(ie,ze,function(Le){return this._invoke(ze,Le)})})}function me(ie,ze){function Le(st,vt,Dt,ar){var $t=re(ie[st],ie,vt);if($t.type!=="throw"){var ur=$t.arg,we=ur.value;return we&&v(we)=="object"&&R.call(we,"__await")?ze.resolve(we.__await).then(function(At){Le("next",At,Dt,ar)},function(At){Le("throw",At,Dt,ar)}):ze.resolve(we).then(function(At){ur.value=At,Dt(ur)},function(At){return Le("throw",At,Dt,ar)})}ar($t.arg)}var Re;z(this,"_invoke",{value:function(vt,Dt){function ar(){return new ze(function($t,ur){Le(vt,Dt,$t,ur)})}return Re=Re?Re.then(ar,ar):ar()}})}function _e(ie,ze,Le){var Re="suspendedStart";return function(st,vt){if(Re==="executing")throw new Error("Generator is already running");if(Re==="completed"){if(st==="throw")throw vt;return Ve()}for(Le.method=st,Le.arg=vt;;){var Dt=Le.delegate;if(Dt){var ar=Te(Dt,Le);if(ar){if(ar===pe)continue;return ar}}if(Le.method==="next")Le.sent=Le._sent=Le.arg;else if(Le.method==="throw"){if(Re==="suspendedStart")throw Re="completed",Le.arg;Le.dispatchException(Le.arg)}else Le.method==="return"&&Le.abrupt("return",Le.arg);Re="executing";var $t=re(ie,ze,Le);if($t.type==="normal"){if(Re=Le.done?"completed":"suspendedYield",$t.arg===pe)continue;return{value:$t.arg,done:Le.done}}$t.type==="throw"&&(Re="completed",Le.method="throw",Le.arg=$t.arg)}}}function Te(ie,ze){var Le=ze.method,Re=ie.iterator[Le];if(Re===void 0)return ze.delegate=null,Le==="throw"&&ie.iterator.return&&(ze.method="return",ze.arg=void 0,Te(ie,ze),ze.method==="throw")||Le!=="return"&&(ze.method="throw",ze.arg=new TypeError("The iterator does not provide a '"+Le+"' method")),pe;var st=re(Re,ie.iterator,ze.arg);if(st.type==="throw")return ze.method="throw",ze.arg=st.arg,ze.delegate=null,pe;var vt=st.arg;return vt?vt.done?(ze[ie.resultName]=vt.value,ze.next=ie.nextLoc,ze.method!=="return"&&(ze.method="next",ze.arg=void 0),ze.delegate=null,pe):vt:(ze.method="throw",ze.arg=new TypeError("iterator result is not an object"),ze.delegate=null,pe)}function ht(ie){var ze={tryLoc:ie[0]};1 in ie&&(ze.catchLoc=ie[1]),2 in ie&&(ze.finallyLoc=ie[2],ze.afterLoc=ie[3]),this.tryEntries.push(ze)}function We(ie){var ze=ie.completion||{};ze.type="normal",delete ze.arg,ie.completion=ze}function Ne(ie){this.tryEntries=[{tryLoc:"root"}],ie.forEach(ht,this),this.reset(!0)}function he(ie){if(ie){var ze=ie[T];if(ze)return ze.call(ie);if(typeof ie.next=="function")return ie;if(!isNaN(ie.length)){var Le=-1,Re=function st(){for(;++Le<ie.length;)if(R.call(ie,Le))return st.value=ie[Le],st.done=!1,st;return st.value=void 0,st.done=!0,st};return Re.next=Re}}return{next:Ve}}function Ve(){return{value:void 0,done:!0}}return ke.prototype=je,z(se,"constructor",{value:je,configurable:!0}),z(je,"constructor",{value:ke,configurable:!0}),ke.displayName=ue(je,F,"GeneratorFunction"),l.isGeneratorFunction=function(ie){var ze=typeof ie=="function"&&ie.constructor;return!!ze&&(ze===ke||(ze.displayName||ze.name)==="GeneratorFunction")},l.mark=function(ie){return Object.setPrototypeOf?Object.setPrototypeOf(ie,je):(ie.__proto__=je,ue(ie,F,"GeneratorFunction")),ie.prototype=Object.create(se),ie},l.awrap=function(ie){return{__await:ie}},qe(me.prototype),ue(me.prototype,O,function(){return this}),l.AsyncIterator=me,l.async=function(ie,ze,Le,Re,st){st===void 0&&(st=Promise);var vt=new me(Ae(ie,ze,Le,Re),st);return l.isGeneratorFunction(ze)?vt:vt.next().then(function(Dt){return Dt.done?Dt.value:vt.next()})},qe(se),ue(se,F,"Generator"),ue(se,T,function(){return this}),ue(se,"toString",function(){return"[object Generator]"}),l.keys=function(ie){var ze=Object(ie),Le=[];for(var Re in ze)Le.push(Re);return Le.reverse(),function st(){for(;Le.length;){var vt=Le.pop();if(vt in ze)return st.value=vt,st.done=!1,st}return st.done=!0,st}},l.values=he,Ne.prototype={constructor:Ne,reset:function(ze){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(We),!ze)for(var Le in this)Le.charAt(0)==="t"&&R.call(this,Le)&&!isNaN(+Le.slice(1))&&(this[Le]=void 0)},stop:function(){this.done=!0;var ze=this.tryEntries[0].completion;if(ze.type==="throw")throw ze.arg;return this.rval},dispatchException:function(ze){if(this.done)throw ze;var Le=this;function Re(ur,we){return Dt.type="throw",Dt.arg=ze,Le.next=ur,we&&(Le.method="next",Le.arg=void 0),!!we}for(var st=this.tryEntries.length-1;st>=0;--st){var vt=this.tryEntries[st],Dt=vt.completion;if(vt.tryLoc==="root")return Re("end");if(vt.tryLoc<=this.prev){var ar=R.call(vt,"catchLoc"),$t=R.call(vt,"finallyLoc");if(ar&&$t){if(this.prev<vt.catchLoc)return Re(vt.catchLoc,!0);if(this.prev<vt.finallyLoc)return Re(vt.finallyLoc)}else if(ar){if(this.prev<vt.catchLoc)return Re(vt.catchLoc,!0)}else{if(!$t)throw new Error("try statement without catch or finally");if(this.prev<vt.finallyLoc)return Re(vt.finallyLoc)}}}},abrupt:function(ze,Le){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var st=this.tryEntries[Re];if(st.tryLoc<=this.prev&&R.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var vt=st;break}}vt&&(ze==="break"||ze==="continue")&&vt.tryLoc<=Le&&Le<=vt.finallyLoc&&(vt=null);var Dt=vt?vt.completion:{};return Dt.type=ze,Dt.arg=Le,vt?(this.method="next",this.next=vt.finallyLoc,pe):this.complete(Dt)},complete:function(ze,Le){if(ze.type==="throw")throw ze.arg;return ze.type==="break"||ze.type==="continue"?this.next=ze.arg:ze.type==="return"?(this.rval=this.arg=ze.arg,this.method="return",this.next="end"):ze.type==="normal"&&Le&&(this.next=Le),pe},finish:function(ze){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var Re=this.tryEntries[Le];if(Re.finallyLoc===ze)return this.complete(Re.completion,Re.afterLoc),We(Re),pe}},catch:function(ze){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var Re=this.tryEntries[Le];if(Re.tryLoc===ze){var st=Re.completion;if(st.type==="throw"){var vt=st.arg;We(Re)}return vt}}throw new Error("illegal catch attempt")},delegateYield:function(ze,Le,Re){return this.delegate={iterator:he(ze),resultName:Le,nextLoc:Re},this.method==="next"&&(this.arg=void 0),pe}},l}Qe.exports=C,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},18698:function(Qe){function te(m){return Qe.exports=te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports,te(m)}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},64687:function(Qe,te,m){var v=m(17061)();Qe.exports=v;try{regeneratorRuntime=v}catch(C){typeof globalThis=="object"?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}},96446:function(Qe,te,m){var v=m(37923);function C(l){if(Array.isArray(l))return v(l)}Qe.exports=C,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},25098:function(Qe){function te(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},12444:function(Qe){function te(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},72004:function(Qe,te,m){var v=m(51883);function C($,R){for(var z=0;z<R.length;z++){var L=R[z];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty($,v(L.key),L)}}function l($,R,z){return R&&C($.prototype,R),z&&C($,z),Object.defineProperty($,"prototype",{writable:!1}),$}Qe.exports=l,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},96695:function(Qe,te,m){var v=m(96263);function C(l,$){var R=typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(!R){if(Array.isArray(l)||(R=v(l))||$&&l&&typeof l.length=="number"){R&&(l=R);var z=0,L=function(){};return{s:L,n:function(){return z>=l.length?{done:!0}:{done:!1,value:l[z++]}},e:function(Ae){throw Ae},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T=!0,O=!1,F;return{s:function(){R=R.call(l)},n:function(){var Ae=R.next();return T=Ae.done,Ae},e:function(Ae){O=!0,F=Ae},f:function(){try{!T&&R.return!=null&&R.return()}finally{if(O)throw F}}}}Qe.exports=C,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},26037:function(Qe,te,m){var v=m(48374),C=m(21771),l=m(73408);function $(R){var z=C();return function(){var T=v(R),O;if(z){var F=v(this).constructor;O=Reflect.construct(T,arguments,F)}else O=T.apply(this,arguments);return l(this,O)}}Qe.exports=$,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},48374:function(Qe){function te(m){return Qe.exports=te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(C){return C.__proto__||Object.getPrototypeOf(C)},Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports,te(m)}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},31996:function(Qe,te,m){var v=m(21314);function C(l,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create($&&$.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),$&&v(l,$)}Qe.exports=C,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},21771:function(Qe){function te(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(m){return!1}}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},96936:function(Qe){function te(m){if(typeof Symbol!="undefined"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},88619:function(Qe){function te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},73408:function(Qe,te,m){var v=m(52677).default,C=m(25098);function l($,R){if(R&&(v(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C($)}Qe.exports=l,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},21314:function(Qe){function te(m,v){return Qe.exports=te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,$){return l.__proto__=$,l},Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports,te(m,v)}Qe.exports=te,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},19632:function(Qe,te,m){var v=m(96446),C=m(96936),l=m(96263),$=m(88619);function R(z){return v(z)||C(z)||l(z)||$()}Qe.exports=R,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports},53229:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return v}});function v(C,l,$,R,z){var L={};return Object.keys(R).forEach(function(T){L[T]=R[T]}),L.enumerable=!!L.enumerable,L.configurable=!!L.configurable,("value"in L||L.initializer)&&(L.writable=!0),L=$.slice().reverse().reduce(function(T,O){return O(C,l,T)||T},L),z&&L.initializer!==void 0&&(L.value=L.initializer?L.initializer.call(z):void 0,L.initializer=void 0),L.initializer===void 0&&(Object.defineProperty(C,l,L),L=null),L}},5647:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return l}});var v=m(89611),C=m(78814);function l($,R,z){return(0,C.Z)()?l=Reflect.construct.bind():l=function(T,O,F){var ue=[null];ue.push.apply(ue,O);var Ae=Function.bind.apply(T,ue),re=new Ae;return F&&(0,v.Z)(re,F.prototype),re},l.apply(null,arguments)}},73237:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return l}});var v=m(61120);function C($,R){for(;!Object.prototype.hasOwnProperty.call($,R)&&($=(0,v.Z)($),$!==null););return $}function l(){return typeof Reflect!="undefined"&&Reflect.get?l=Reflect.get.bind():l=function(R,z,L){var T=C(R,z);if(T){var O=Object.getOwnPropertyDescriptor(T,z);return O.get?O.get.call(arguments.length<3?R:L):O.value}},l.apply(this,arguments)}},43269:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return v}});function v(C,l,$,R){$&&Object.defineProperty(C,l,{enumerable:$.enumerable,configurable:$.configurable,writable:$.writable,value:$.initializer?$.initializer.call(R):void 0})}},84506:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return R}});var v=m(83878),C=m(59199),l=m(40181),$=m(25267);function R(z){return(0,v.Z)(z)||(0,C.Z)(z)||(0,l.Z)(z)||(0,$.Z)()}},95:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return C}});var v=m(1449);function C(l,$){$===void 0&&($={});var R=Number(l[0]),z=Number(l[1]),L=Number(l[2]),T=Number(l[3]);if(l.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var O=[R,z],F=[R,T],ue=[L,T],Ae=[L,z];return(0,v.yu)([[O,Ae,ue,F,O]],$.properties,{bbox:l,id:$.id})}},62096:function(Qe,te,m){"use strict";var v=m(39034);function C(l){var $=[1/0,1/0,-1/0,-1/0];return(0,v.pZ)(l,function(R){$[0]>R[0]&&($[0]=R[0]),$[1]>R[1]&&($[1]=R[1]),$[2]<R[0]&&($[2]=R[0]),$[3]<R[1]&&($[3]=R[1])}),$}C.default=C,te.Z=C},78445:function(Qe,te,m){"use strict";var v=m(62096),C=m(95);function l($){return(0,C.Z)((0,v.Z)($))}te.Z=l},1449:function(Qe,te,m){"use strict";m.d(te,{DL:function(){return ut},Ht:function(){return _e},Kn:function(){return Ne},Tu:function(){return ue},tw:function(){return ke},uf:function(){return re},vi:function(){return me},yu:function(){return O},zL:function(){return R}});var v=63710088e-1,C={centimeters:v*100,centimetres:v*100,degrees:v/111325,feet:v*3.28084,inches:v*39.37,kilometers:v/1e3,kilometres:v/1e3,meters:v,metres:v,miles:v/1609.344,millimeters:v*1e3,millimetres:v*1e3,nauticalmiles:v/1852,radians:1,yards:v*1.0936},l={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/v,yards:1.0936133},$={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function R(ie,ze,Le){Le===void 0&&(Le={});var Re={type:"Feature"};return(Le.id===0||Le.id)&&(Re.id=Le.id),Le.bbox&&(Re.bbox=Le.bbox),Re.properties=ze||{},Re.geometry=ie,Re}function z(ie,ze,Le){switch(Le===void 0&&(Le={}),ie){case"Point":return L(ze).geometry;case"LineString":return ue(ze).geometry;case"Polygon":return O(ze).geometry;case"MultiPoint":return fe(ze).geometry;case"MultiLineString":return pe(ze).geometry;case"MultiPolygon":return ke(ze).geometry;default:throw new Error(ie+" is invalid")}}function L(ie,ze,Le){if(Le===void 0&&(Le={}),!ie)throw new Error("coordinates is required");if(!Array.isArray(ie))throw new Error("coordinates must be an Array");if(ie.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!We(ie[0])||!We(ie[1]))throw new Error("coordinates must contain numbers");var Re={type:"Point",coordinates:ie};return R(Re,ze,Le)}function T(ie,ze,Le){return Le===void 0&&(Le={}),re(ie.map(function(Re){return L(Re,ze)}),Le)}function O(ie,ze,Le){Le===void 0&&(Le={});for(var Re=0,st=ie;Re<st.length;Re++){var vt=st[Re];if(vt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Dt=0;Dt<vt[vt.length-1].length;Dt++)if(vt[vt.length-1][Dt]!==vt[0][Dt])throw new Error("First and last Position are not equivalent.")}var ar={type:"Polygon",coordinates:ie};return R(ar,ze,Le)}function F(ie,ze,Le){return Le===void 0&&(Le={}),re(ie.map(function(Re){return O(Re,ze)}),Le)}function ue(ie,ze,Le){if(Le===void 0&&(Le={}),ie.length<2)throw new Error("coordinates must be an array of two or more positions");var Re={type:"LineString",coordinates:ie};return R(Re,ze,Le)}function Ae(ie,ze,Le){return Le===void 0&&(Le={}),re(ie.map(function(Re){return ue(Re,ze)}),Le)}function re(ie,ze){ze===void 0&&(ze={});var Le={type:"FeatureCollection"};return ze.id&&(Le.id=ze.id),ze.bbox&&(Le.bbox=ze.bbox),Le.features=ie,Le}function pe(ie,ze,Le){Le===void 0&&(Le={});var Re={type:"MultiLineString",coordinates:ie};return R(Re,ze,Le)}function fe(ie,ze,Le){Le===void 0&&(Le={});var Re={type:"MultiPoint",coordinates:ie};return R(Re,ze,Le)}function ke(ie,ze,Le){Le===void 0&&(Le={});var Re={type:"MultiPolygon",coordinates:ie};return R(Re,ze,Le)}function je(ie,ze,Le){Le===void 0&&(Le={});var Re={type:"GeometryCollection",geometries:ie};return R(Re,ze,Le)}function bt(ie,ze){if(ze===void 0&&(ze=0),ze&&!(ze>=0))throw new Error("precision must be a positive number");var Le=Math.pow(10,ze||0);return Math.round(ie*Le)/Le}function ut(ie,ze){ze===void 0&&(ze="kilometers");var Le=C[ze];if(!Le)throw new Error(ze+" units is invalid");return ie*Le}function wt(ie,ze){ze===void 0&&(ze="kilometers");var Le=C[ze];if(!Le)throw new Error(ze+" units is invalid");return ie/Le}function se(ie,ze){return me(wt(ie,ze))}function qe(ie){var ze=ie%360;return ze<0&&(ze+=360),ze}function me(ie){var ze=ie%(2*Math.PI);return ze*180/Math.PI}function _e(ie){var ze=ie%360;return ze*Math.PI/180}function Te(ie,ze,Le){if(ze===void 0&&(ze="kilometers"),Le===void 0&&(Le="kilometers"),!(ie>=0))throw new Error("length must be a positive number");return ut(wt(ie,ze),Le)}function ht(ie,ze,Le){if(ze===void 0&&(ze="meters"),Le===void 0&&(Le="kilometers"),!(ie>=0))throw new Error("area must be a positive number");var Re=$[ze];if(!Re)throw new Error("invalid original units");var st=$[Le];if(!st)throw new Error("invalid final units");return ie/Re*st}function We(ie){return!isNaN(ie)&&ie!==null&&!Array.isArray(ie)}function Ne(ie){return!!ie&&ie.constructor===Object}function he(ie){if(!ie)throw new Error("bbox is required");if(!Array.isArray(ie))throw new Error("bbox must be an Array");if(ie.length!==4&&ie.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");ie.forEach(function(ze){if(!We(ze))throw new Error("bbox must only contain numbers")})}function Ve(ie){if(!ie)throw new Error("id is required");if(["string","number"].indexOf(typeof ie)===-1)throw new Error("id must be a number or a string")}},36987:function(Qe,te,m){"use strict";m.d(te,{oL:function(){return O},r7:function(){return l},wA:function(){return T}});var v=m(1449);function C(F){if(!F)throw new Error("coord is required");if(!Array.isArray(F)){if(F.type==="Feature"&&F.geometry!==null&&F.geometry.type==="Point")return F.geometry.coordinates;if(F.type==="Point")return F.coordinates}if(Array.isArray(F)&&F.length>=2&&!Array.isArray(F[0])&&!Array.isArray(F[1]))return F;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function l(F){if(Array.isArray(F))return F;if(F.type==="Feature"){if(F.geometry!==null)return F.geometry.coordinates}else if(F.coordinates)return F.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $(F){if(F.length>1&&isNumber(F[0])&&isNumber(F[1]))return!0;if(Array.isArray(F[0])&&F[0].length)return $(F[0]);throw new Error("coordinates must only contain numbers")}function R(F,ue,Ae){if(!ue||!Ae)throw new Error("type and name required");if(!F||F.type!==ue)throw new Error("Invalid input to "+Ae+": must be a "+ue+", given "+F.type)}function z(F,ue,Ae){if(!F)throw new Error("No feature passed");if(!Ae)throw new Error(".featureOf() requires a name");if(!F||F.type!=="Feature"||!F.geometry)throw new Error("Invalid input to "+Ae+", Feature with geometry required");if(!F.geometry||F.geometry.type!==ue)throw new Error("Invalid input to "+Ae+": must be a "+ue+", given "+F.geometry.type)}function L(F,ue,Ae){if(!F)throw new Error("No featureCollection passed");if(!Ae)throw new Error(".collectionOf() requires a name");if(!F||F.type!=="FeatureCollection")throw new Error("Invalid input to "+Ae+", FeatureCollection required");for(var re=0,pe=F.features;re<pe.length;re++){var fe=pe[re];if(!fe||fe.type!=="Feature"||!fe.geometry)throw new Error("Invalid input to "+Ae+", Feature with geometry required");if(!fe.geometry||fe.geometry.type!==ue)throw new Error("Invalid input to "+Ae+": must be a "+ue+", given "+fe.geometry.type)}}function T(F){return F.type==="Feature"?F.geometry:F}function O(F,ue){return F.type==="FeatureCollection"?"FeatureCollection":F.type==="GeometryCollection"?"GeometryCollection":F.type==="Feature"&&F.geometry!==null?F.geometry.type:F.type}},39034:function(Qe,te,m){"use strict";m.d(te,{nG:function(){return ue},on:function(){return O},pZ:function(){return C}});var v=m(1449);function C(ut,wt,se){if(ut!==null)for(var qe,me,_e,Te,ht,We,Ne,he=0,Ve=0,ie,ze=ut.type,Le=ze==="FeatureCollection",Re=ze==="Feature",st=Le?ut.features.length:1,vt=0;vt<st;vt++){Ne=Le?ut.features[vt].geometry:Re?ut.geometry:ut,ie=Ne?Ne.type==="GeometryCollection":!1,ht=ie?Ne.geometries.length:1;for(var Dt=0;Dt<ht;Dt++){var ar=0,$t=0;if(Te=ie?Ne.geometries[Dt]:Ne,Te!==null){We=Te.coordinates;var ur=Te.type;switch(he=se&&(ur==="Polygon"||ur==="MultiPolygon")?1:0,ur){case null:break;case"Point":if(wt(We,Ve,vt,ar,$t)===!1)return!1;Ve++,ar++;break;case"LineString":case"MultiPoint":for(qe=0;qe<We.length;qe++){if(wt(We[qe],Ve,vt,ar,$t)===!1)return!1;Ve++,ur==="MultiPoint"&&ar++}ur==="LineString"&&ar++;break;case"Polygon":case"MultiLineString":for(qe=0;qe<We.length;qe++){for(me=0;me<We[qe].length-he;me++){if(wt(We[qe][me],Ve,vt,ar,$t)===!1)return!1;Ve++}ur==="MultiLineString"&&ar++,ur==="Polygon"&&$t++}ur==="Polygon"&&ar++;break;case"MultiPolygon":for(qe=0;qe<We.length;qe++){for($t=0,me=0;me<We[qe].length;me++){for(_e=0;_e<We[qe][me].length-he;_e++){if(wt(We[qe][me][_e],Ve,vt,ar,$t)===!1)return!1;Ve++}$t++}ar++}break;case"GeometryCollection":for(qe=0;qe<Te.geometries.length;qe++)if(C(Te.geometries[qe],wt,se)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(ut,wt,se,qe){var me=se;return C(ut,function(_e,Te,ht,We,Ne){Te===0&&se===void 0?me=_e:me=wt(me,_e,Te,ht,We,Ne)},qe),me}function $(ut,wt){var se;switch(ut.type){case"FeatureCollection":for(se=0;se<ut.features.length&&wt(ut.features[se].properties,se)!==!1;se++);break;case"Feature":wt(ut.properties,0);break}}function R(ut,wt,se){var qe=se;return $(ut,function(me,_e){_e===0&&se===void 0?qe=me:qe=wt(qe,me,_e)}),qe}function z(ut,wt){if(ut.type==="Feature")wt(ut,0);else if(ut.type==="FeatureCollection")for(var se=0;se<ut.features.length&&wt(ut.features[se],se)!==!1;se++);}function L(ut,wt,se){var qe=se;return z(ut,function(me,_e){_e===0&&se===void 0?qe=me:qe=wt(qe,me,_e)}),qe}function T(ut){var wt=[];return C(ut,function(se){wt.push(se)}),wt}function O(ut,wt){var se,qe,me,_e,Te,ht,We,Ne,he,Ve,ie=0,ze=ut.type==="FeatureCollection",Le=ut.type==="Feature",Re=ze?ut.features.length:1;for(se=0;se<Re;se++){for(ht=ze?ut.features[se].geometry:Le?ut.geometry:ut,Ne=ze?ut.features[se].properties:Le?ut.properties:{},he=ze?ut.features[se].bbox:Le?ut.bbox:void 0,Ve=ze?ut.features[se].id:Le?ut.id:void 0,We=ht?ht.type==="GeometryCollection":!1,Te=We?ht.geometries.length:1,me=0;me<Te;me++){if(_e=We?ht.geometries[me]:ht,_e===null){if(wt(null,ie,Ne,he,Ve)===!1)return!1;continue}switch(_e.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(wt(_e,ie,Ne,he,Ve)===!1)return!1;break}case"GeometryCollection":{for(qe=0;qe<_e.geometries.length;qe++)if(wt(_e.geometries[qe],ie,Ne,he,Ve)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ie++}}function F(ut,wt,se){var qe=se;return O(ut,function(me,_e,Te,ht,We){_e===0&&se===void 0?qe=me:qe=wt(qe,me,_e,Te,ht,We)}),qe}function ue(ut,wt){O(ut,function(se,qe,me,_e,Te){var ht=se===null?null:se.type;switch(ht){case null:case"Point":case"LineString":case"Polygon":return wt((0,v.zL)(se,me,{bbox:_e,id:Te}),qe,0)===!1?!1:void 0}var We;switch(ht){case"MultiPoint":We="Point";break;case"MultiLineString":We="LineString";break;case"MultiPolygon":We="Polygon";break}for(var Ne=0;Ne<se.coordinates.length;Ne++){var he=se.coordinates[Ne],Ve={type:We,coordinates:he};if(wt((0,v.zL)(Ve,me),qe,Ne)===!1)return!1}})}function Ae(ut,wt,se){var qe=se;return ue(ut,function(me,_e,Te){_e===0&&Te===0&&se===void 0?qe=me:qe=wt(qe,me,_e,Te)}),qe}function re(ut,wt){ue(ut,function(se,qe,me){var _e=0;if(se.geometry){var Te=se.geometry.type;if(!(Te==="Point"||Te==="MultiPoint")){var ht,We=0,Ne=0,he=0;if(C(se,function(Ve,ie,ze,Le,Re){if(ht===void 0||qe>We||Le>Ne||Re>he){ht=Ve,We=qe,Ne=Le,he=Re,_e=0;return}var st=lineString([ht,Ve],se.properties);if(wt(st,qe,me,Re,_e)===!1)return!1;_e++,ht=Ve})===!1)return!1}}})}function pe(ut,wt,se){var qe=se,me=!1;return re(ut,function(_e,Te,ht,We,Ne){me===!1&&se===void 0?qe=_e:qe=wt(qe,_e,Te,ht,We,Ne),me=!0}),qe}function fe(ut,wt){if(!ut)throw new Error("geojson is required");ue(ut,function(se,qe,me){if(se.geometry!==null){var _e=se.geometry.type,Te=se.geometry.coordinates;switch(_e){case"LineString":if(wt(se,qe,me,0,0)===!1)return!1;break;case"Polygon":for(var ht=0;ht<Te.length;ht++)if(wt(lineString(Te[ht],se.properties),qe,me,ht)===!1)return!1;break}}})}function ke(ut,wt,se){var qe=se;return fe(ut,function(me,_e,Te,ht){_e===0&&se===void 0?qe=me:qe=wt(qe,me,_e,Te,ht)}),qe}function je(ut,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var se=wt.featureIndex||0,qe=wt.multiFeatureIndex||0,me=wt.geometryIndex||0,_e=wt.segmentIndex||0,Te=wt.properties,ht;switch(ut.type){case"FeatureCollection":se<0&&(se=ut.features.length+se),Te=Te||ut.features[se].properties,ht=ut.features[se].geometry;break;case"Feature":Te=Te||ut.properties,ht=ut.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ht=ut;break;default:throw new Error("geojson is invalid")}if(ht===null)return null;var We=ht.coordinates;switch(ht.type){case"Point":case"MultiPoint":return null;case"LineString":return _e<0&&(_e=We.length+_e-1),lineString([We[_e],We[_e+1]],Te,wt);case"Polygon":return me<0&&(me=We.length+me),_e<0&&(_e=We[me].length+_e-1),lineString([We[me][_e],We[me][_e+1]],Te,wt);case"MultiLineString":return qe<0&&(qe=We.length+qe),_e<0&&(_e=We[qe].length+_e-1),lineString([We[qe][_e],We[qe][_e+1]],Te,wt);case"MultiPolygon":return qe<0&&(qe=We.length+qe),me<0&&(me=We[qe].length+me),_e<0&&(_e=We[qe][me].length-_e-1),lineString([We[qe][me][_e],We[qe][me][_e+1]],Te,wt)}throw new Error("geojson is invalid")}function bt(ut,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var se=wt.featureIndex||0,qe=wt.multiFeatureIndex||0,me=wt.geometryIndex||0,_e=wt.coordIndex||0,Te=wt.properties,ht;switch(ut.type){case"FeatureCollection":se<0&&(se=ut.features.length+se),Te=Te||ut.features[se].properties,ht=ut.features[se].geometry;break;case"Feature":Te=Te||ut.properties,ht=ut.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ht=ut;break;default:throw new Error("geojson is invalid")}if(ht===null)return null;var We=ht.coordinates;switch(ht.type){case"Point":return point(We,Te,wt);case"MultiPoint":return qe<0&&(qe=We.length+qe),point(We[qe],Te,wt);case"LineString":return _e<0&&(_e=We.length+_e),point(We[_e],Te,wt);case"Polygon":return me<0&&(me=We.length+me),_e<0&&(_e=We[me].length+_e),point(We[me][_e],Te,wt);case"MultiLineString":return qe<0&&(qe=We.length+qe),_e<0&&(_e=We[qe].length+_e),point(We[qe][_e],Te,wt);case"MultiPolygon":return qe<0&&(qe=We.length+qe),me<0&&(me=We[qe].length+me),_e<0&&(_e=We[qe][me].length-_e),point(We[qe][me][_e],Te,wt)}throw new Error("geojson is invalid")}},13365:function(Qe,te,m){"use strict";m.d(te,{Z:function(){return We}});var v=m(1449),C=m(36987);function l(Ne,he){he===void 0&&(he={});var Ve=typeof he=="object"?he.mutate:he;if(!Ne)throw new Error("geojson is required");var ie=(0,C.oL)(Ne),ze=[];switch(ie){case"LineString":ze=$(Ne);break;case"MultiLineString":case"Polygon":(0,C.r7)(Ne).forEach(function(Re){ze.push($(Re))});break;case"MultiPolygon":(0,C.r7)(Ne).forEach(function(Re){var st=[];Re.forEach(function(vt){st.push($(vt))}),ze.push(st)});break;case"Point":return Ne;case"MultiPoint":var Le={};(0,C.r7)(Ne).forEach(function(Re){var st=Re.join("-");Object.prototype.hasOwnProperty.call(Le,st)||(ze.push(Re),Le[st]=!0)});break;default:throw new Error(ie+" geometry not supported")}return Ne.coordinates?Ve===!0?(Ne.coordinates=ze,Ne):{type:ie,coordinates:ze}:Ve===!0?(Ne.geometry.coordinates=ze,Ne):(0,v.zL)({type:ie,coordinates:ze},Ne.properties,{bbox:Ne.bbox,id:Ne.id})}function $(Ne){var he=(0,C.r7)(Ne);if(he.length===2&&!R(he[0],he[1]))return he;var Ve=[],ie=he.length-1,ze=Ve.length;Ve.push(he[0]);for(var Le=1;Le<ie;Le++){var Re=Ve[Ve.length-1];he[Le][0]===Re[0]&&he[Le][1]===Re[1]||(Ve.push(he[Le]),ze=Ve.length,ze>2&&z(Ve[ze-3],Ve[ze-1],Ve[ze-2])&&Ve.splice(Ve.length-2,1))}if(Ve.push(he[he.length-1]),ze=Ve.length,R(he[0],he[he.length-1])&&ze<4)throw new Error("invalid polygon");return z(Ve[ze-3],Ve[ze-1],Ve[ze-2])&&Ve.splice(Ve.length-2,1),Ve}function R(Ne,he){return Ne[0]===he[0]&&Ne[1]===he[1]}function z(Ne,he,Ve){var ie=Ve[0],ze=Ve[1],Le=Ne[0],Re=Ne[1],st=he[0],vt=he[1],Dt=ie-Le,ar=ze-Re,$t=st-Le,ur=vt-Re,we=Dt*ur-ar*$t;return we!==0?!1:Math.abs($t)>=Math.abs(ur)?$t>0?Le<=ie&&ie<=st:st<=ie&&ie<=Le:ur>0?Re<=ze&&ze<=vt:vt<=ze&&ze<=Re}var L=l;function T(Ne){if(!Ne)throw new Error("geojson is required");switch(Ne.type){case"Feature":return O(Ne);case"FeatureCollection":return ue(Ne);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ae(Ne);default:throw new Error("unknown GeoJSON type")}}function O(Ne){var he={type:"Feature"};return Object.keys(Ne).forEach(function(Ve){switch(Ve){case"type":case"properties":case"geometry":return;default:he[Ve]=Ne[Ve]}}),he.properties=F(Ne.properties),he.geometry=Ae(Ne.geometry),he}function F(Ne){var he={};return Ne&&Object.keys(Ne).forEach(function(Ve){var ie=Ne[Ve];typeof ie=="object"?ie===null?he[Ve]=null:Array.isArray(ie)?he[Ve]=ie.map(function(ze){return ze}):he[Ve]=F(ie):he[Ve]=ie}),he}function ue(Ne){var he={type:"FeatureCollection"};return Object.keys(Ne).forEach(function(Ve){switch(Ve){case"type":case"features":return;default:he[Ve]=Ne[Ve]}}),he.features=Ne.features.map(function(Ve){return O(Ve)}),he}function Ae(Ne){var he={type:Ne.type};return Ne.bbox&&(he.bbox=Ne.bbox),Ne.type==="GeometryCollection"?(he.geometries=Ne.geometries.map(function(Ve){return Ae(Ve)}),he):(he.coordinates=re(Ne.coordinates),he)}function re(Ne){var he=Ne;return typeof he[0]!="object"?he.slice():he.map(function(Ve){return re(Ve)})}var pe=T,fe=m(39034);function ke(Ne,he){var Ve=Ne.x-he.x,ie=Ne.y-he.y;return Ve*Ve+ie*ie}function je(Ne,he,Ve){var ie=he.x,ze=he.y,Le=Ve.x-ie,Re=Ve.y-ze;if(Le!==0||Re!==0){var st=((Ne.x-ie)*Le+(Ne.y-ze)*Re)/(Le*Le+Re*Re);st>1?(ie=Ve.x,ze=Ve.y):st>0&&(ie+=Le*st,ze+=Re*st)}return Le=Ne.x-ie,Re=Ne.y-ze,Le*Le+Re*Re}function bt(Ne,he){for(var Ve=Ne[0],ie=[Ve],ze,Le=1,Re=Ne.length;Le<Re;Le++)ze=Ne[Le],ke(ze,Ve)>he&&(ie.push(ze),Ve=ze);return Ve!==ze&&ie.push(ze),ie}function ut(Ne,he,Ve,ie,ze){for(var Le=ie,Re,st=he+1;st<Ve;st++){var vt=je(Ne[st],Ne[he],Ne[Ve]);vt>Le&&(Re=st,Le=vt)}Le>ie&&(Re-he>1&&ut(Ne,he,Re,ie,ze),ze.push(Ne[Re]),Ve-Re>1&&ut(Ne,Re,Ve,ie,ze))}function wt(Ne,he){var Ve=Ne.length-1,ie=[Ne[0]];return ut(Ne,0,Ve,he,ie),ie.push(Ne[Ve]),ie}function se(Ne,he,Ve){if(Ne.length<=2)return Ne;var ie=he!==void 0?he*he:1;return Ne=Ve?Ne:bt(Ne,ie),Ne=wt(Ne,ie),Ne}function qe(Ne,he){if(he=he||{},!(0,v.Kn)(he))throw new Error("options is invalid");var Ve=he.tolerance!==void 0?he.tolerance:1,ie=he.highQuality||!1,ze=he.mutate||!1;if(!Ne)throw new Error("geojson is required");if(Ve&&Ve<0)throw new Error("invalid tolerance");return ze!==!0&&(Ne=pe(Ne)),(0,fe.on)(Ne,function(Le){me(Le,Ve,ie)}),Ne}function me(Ne,he,Ve){var ie=Ne.type;if(ie==="Point"||ie==="MultiPoint")return Ne;L(Ne,!0);var ze=Ne.coordinates;switch(ie){case"LineString":Ne.coordinates=_e(ze,he,Ve);break;case"MultiLineString":Ne.coordinates=ze.map(function(Le){return _e(Le,he,Ve)});break;case"Polygon":Ne.coordinates=Te(ze,he,Ve);break;case"MultiPolygon":Ne.coordinates=ze.map(function(Le){return Te(Le,he,Ve)})}return Ne}function _e(Ne,he,Ve){return se(Ne.map(function(ie){return{x:ie[0],y:ie[1],z:ie[2]}}),he,Ve).map(function(ie){return ie.z?[ie.x,ie.y,ie.z]:[ie.x,ie.y]})}function Te(Ne,he,Ve){return Ne.map(function(ie){var ze=ie.map(function(Re){return{x:Re[0],y:Re[1]}});if(ze.length<4)throw new Error("invalid polygon");for(var Le=se(ze,he,Ve).map(function(Re){return[Re.x,Re.y]});!ht(Le);)he-=he*.01,Le=se(ze,he,Ve).map(function(Re){return[Re.x,Re.y]});return(Le[Le.length-1][0]!==Le[0][0]||Le[Le.length-1][1]!==Le[0][1])&&Le.push(Le[0]),Le})}function ht(Ne){return Ne.length<3?!1:!(Ne.length===3&&Ne[2][0]===Ne[0][0]&&Ne[2][1]===Ne[0][1])}var We=qe}}]);
